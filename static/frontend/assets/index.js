var dv=Object.defineProperty;var pv=(t,e,n)=>e in t?dv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Re=(t,e,n)=>pv(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Md(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const gr={},Au=[],wa=()=>{},gv=()=>!1,Nh=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Bd=t=>t.startsWith("onUpdate:"),Ti=Object.assign,Td=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},mv=Object.prototype.hasOwnProperty,sr=(t,e)=>mv.call(t,e),fn=Array.isArray,Mu=t=>Bc(t)==="[object Map]",zu=t=>Bc(t)==="[object Set]",dp=t=>Bc(t)==="[object Date]",En=t=>typeof t=="function",Xr=t=>typeof t=="string",La=t=>typeof t=="symbol",mr=t=>t!==null&&typeof t=="object",_g=t=>(mr(t)||En(t))&&En(t.then)&&En(t.catch),bg=Object.prototype.toString,Bc=t=>bg.call(t),vv=t=>Bc(t).slice(8,-1),wg=t=>Bc(t)==="[object Object]",Nd=t=>Xr(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,oc=Md(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Dh=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},yv=/-(\w)/g,Eo=Dh(t=>t.replace(yv,(e,n)=>n?n.toUpperCase():"")),_v=/\B([A-Z])/g,ou=Dh(t=>t.replace(_v,"-$1").toLowerCase()),Oh=Dh(t=>t.charAt(0).toUpperCase()+t.slice(1)),mf=Dh(t=>t?`on${Oh(t)}`:""),kl=(t,e)=>!Object.is(t,e),rh=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},xg=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},mh=t=>{const e=parseFloat(t);return isNaN(e)?t:e},bv=t=>{const e=Xr(t)?Number(t):NaN;return isNaN(e)?t:e};let pp;const Rh=()=>pp||(pp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ih(t){if(fn(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],o=Xr(r)?Cv(r):Ih(r);if(o)for(const a in o)e[a]=o[a]}return e}else if(Xr(t)||mr(t))return t}const wv=/;(?![^(]*\))/g,xv=/:([^]+)/,Lv=/\/\*[^]*?\*\//g;function Cv(t){const e={};return t.replace(Lv,"").split(wv).forEach(n=>{if(n){const r=n.split(xv);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function zr(t){let e="";if(Xr(t))e=t;else if(fn(t))for(let n=0;n<t.length;n++){const r=zr(t[n]);r&&(e+=r+" ")}else if(mr(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const kv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Pv=Md(kv);function Lg(t){return!!t||t===""}function Sv(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=ru(t[r],e[r]);return n}function ru(t,e){if(t===e)return!0;let n=dp(t),r=dp(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=La(t),r=La(e),n||r)return t===e;if(n=fn(t),r=fn(e),n||r)return n&&r?Sv(t,e):!1;if(n=mr(t),r=mr(e),n||r){if(!n||!r)return!1;const o=Object.keys(t).length,a=Object.keys(e).length;if(o!==a)return!1;for(const u in t){const f=t.hasOwnProperty(u),p=e.hasOwnProperty(u);if(f&&!p||!f&&p||!ru(t[u],e[u]))return!1}}return String(t)===String(e)}function Dd(t,e){return t.findIndex(n=>ru(n,e))}const Cg=t=>!!(t&&t.__v_isRef===!0),Se=t=>Xr(t)?t:t==null?"":fn(t)||mr(t)&&(t.toString===bg||!En(t.toString))?Cg(t)?Se(t.value):JSON.stringify(t,kg,2):String(t),kg=(t,e)=>Cg(e)?kg(t,e.value):Mu(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,o],a)=>(n[vf(r,a)+" =>"]=o,n),{})}:zu(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>vf(n))}:La(e)?vf(e):mr(e)&&!fn(e)&&!wg(e)?String(e):e,vf=(t,e="")=>{var n;return La(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ps;class Pg{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ps,!e&&ps&&(this.index=(ps.scopes||(ps.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=ps;try{return ps=this,e()}finally{ps=n}}}on(){ps=this}off(){ps=this.parent}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function Sg(t){return new Pg(t)}function Eg(){return ps}function Ev(t,e=!1){ps&&ps.cleanups.push(t)}let wr;const yf=new WeakSet;class Ag{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ps&&ps.active&&ps.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,yf.has(this)&&(yf.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Bg(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,gp(this),Tg(this);const e=wr,n=Ko;wr=this,Ko=!0;try{return this.fn()}finally{Ng(this),wr=e,Ko=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Id(e);this.deps=this.depsTail=void 0,gp(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?yf.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Wf(this)&&this.run()}get dirty(){return Wf(this)}}let Mg=0,ac,lc;function Bg(t,e=!1){if(t.flags|=8,e){t.next=lc,lc=t;return}t.next=ac,ac=t}function Od(){Mg++}function Rd(){if(--Mg>0)return;if(lc){let e=lc;for(lc=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;ac;){let e=ac;for(ac=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function Tg(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Ng(t){let e,n=t.depsTail,r=n;for(;r;){const o=r.prevDep;r.version===-1?(r===n&&(n=o),Id(r),Av(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=o}t.deps=e,t.depsTail=n}function Wf(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Dg(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Dg(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===yc))return;t.globalVersion=yc;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!Wf(t)){t.flags&=-3;return}const n=wr,r=Ko;wr=t,Ko=!0;try{Tg(t);const o=t.fn(t._value);(e.version===0||kl(o,t._value))&&(t._value=o,e.version++)}catch(o){throw e.version++,o}finally{wr=n,Ko=r,Ng(t),t.flags&=-3}}function Id(t,e=!1){const{dep:n,prevSub:r,nextSub:o}=t;if(r&&(r.nextSub=o,t.prevSub=void 0),o&&(o.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let a=n.computed.deps;a;a=a.nextDep)Id(a,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Av(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Ko=!0;const Og=[];function Bl(){Og.push(Ko),Ko=!1}function Tl(){const t=Og.pop();Ko=t===void 0?!0:t}function gp(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=wr;wr=void 0;try{e()}finally{wr=n}}}let yc=0;class Mv{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Fd{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!wr||!Ko||wr===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==wr)n=this.activeLink=new Mv(wr,this),wr.deps?(n.prevDep=wr.depsTail,wr.depsTail.nextDep=n,wr.depsTail=n):wr.deps=wr.depsTail=n,Rg(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=wr.depsTail,n.nextDep=void 0,wr.depsTail.nextDep=n,wr.depsTail=n,wr.deps===n&&(wr.deps=r)}return n}trigger(e){this.version++,yc++,this.notify(e)}notify(e){Od();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Rd()}}}function Rg(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Rg(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const vh=new WeakMap,Ql=Symbol(""),Zf=Symbol(""),_c=Symbol("");function ns(t,e,n){if(Ko&&wr){let r=vh.get(t);r||vh.set(t,r=new Map);let o=r.get(n);o||(r.set(n,o=new Fd),o.map=r,o.key=n),o.track()}}function Ga(t,e,n,r,o,a){const u=vh.get(t);if(!u){yc++;return}const f=p=>{p&&p.trigger()};if(Od(),e==="clear")u.forEach(f);else{const p=fn(t),v=p&&Nd(n);if(p&&n==="length"){const w=Number(r);u.forEach((b,S)=>{(S==="length"||S===_c||!La(S)&&S>=w)&&f(b)})}else switch((n!==void 0||u.has(void 0))&&f(u.get(n)),v&&f(u.get(_c)),e){case"add":p?v&&f(u.get("length")):(f(u.get(Ql)),Mu(t)&&f(u.get(Zf)));break;case"delete":p||(f(u.get(Ql)),Mu(t)&&f(u.get(Zf)));break;case"set":Mu(t)&&f(u.get(Ql));break}}Rd()}function Bv(t,e){const n=vh.get(t);return n&&n.get(e)}function mu(t){const e=Kn(t);return e===t?e:(ns(e,"iterate",_c),ko(t)?e:e.map(rs))}function Fh(t){return ns(t=Kn(t),"iterate",_c),t}const Tv={__proto__:null,[Symbol.iterator](){return _f(this,Symbol.iterator,rs)},concat(...t){return mu(this).concat(...t.map(e=>fn(e)?mu(e):e))},entries(){return _f(this,"entries",t=>(t[1]=rs(t[1]),t))},every(t,e){return Ua(this,"every",t,e,void 0,arguments)},filter(t,e){return Ua(this,"filter",t,e,n=>n.map(rs),arguments)},find(t,e){return Ua(this,"find",t,e,rs,arguments)},findIndex(t,e){return Ua(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Ua(this,"findLast",t,e,rs,arguments)},findLastIndex(t,e){return Ua(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Ua(this,"forEach",t,e,void 0,arguments)},includes(...t){return bf(this,"includes",t)},indexOf(...t){return bf(this,"indexOf",t)},join(t){return mu(this).join(t)},lastIndexOf(...t){return bf(this,"lastIndexOf",t)},map(t,e){return Ua(this,"map",t,e,void 0,arguments)},pop(){return Ku(this,"pop")},push(...t){return Ku(this,"push",t)},reduce(t,...e){return mp(this,"reduce",t,e)},reduceRight(t,...e){return mp(this,"reduceRight",t,e)},shift(){return Ku(this,"shift")},some(t,e){return Ua(this,"some",t,e,void 0,arguments)},splice(...t){return Ku(this,"splice",t)},toReversed(){return mu(this).toReversed()},toSorted(t){return mu(this).toSorted(t)},toSpliced(...t){return mu(this).toSpliced(...t)},unshift(...t){return Ku(this,"unshift",t)},values(){return _f(this,"values",rs)}};function _f(t,e,n){const r=Fh(t),o=r[e]();return r!==t&&!ko(t)&&(o._next=o.next,o.next=()=>{const a=o._next();return a.value&&(a.value=n(a.value)),a}),o}const Nv=Array.prototype;function Ua(t,e,n,r,o,a){const u=Fh(t),f=u!==t&&!ko(t),p=u[e];if(p!==Nv[e]){const b=p.apply(t,a);return f?rs(b):b}let v=n;u!==t&&(f?v=function(b,S){return n.call(this,rs(b),S,t)}:n.length>2&&(v=function(b,S){return n.call(this,b,S,t)}));const w=p.call(u,v,r);return f&&o?o(w):w}function mp(t,e,n,r){const o=Fh(t);let a=n;return o!==t&&(ko(t)?n.length>3&&(a=function(u,f,p){return n.call(this,u,f,p,t)}):a=function(u,f,p){return n.call(this,u,rs(f),p,t)}),o[e](a,...r)}function bf(t,e,n){const r=Kn(t);ns(r,"iterate",_c);const o=r[e](...n);return(o===-1||o===!1)&&Ud(n[0])?(n[0]=Kn(n[0]),r[e](...n)):o}function Ku(t,e,n=[]){Bl(),Od();const r=Kn(t)[e].apply(t,n);return Rd(),Tl(),r}const Dv=Md("__proto__,__v_isRef,__isVue"),Ig=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(La));function Ov(t){La(t)||(t=String(t));const e=Kn(this);return ns(e,"has",t),e.hasOwnProperty(t)}class Fg{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const o=this._isReadonly,a=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return a;if(n==="__v_raw")return r===(o?a?Hv:qg:a?Ug:zg).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const u=fn(e);if(!o){let p;if(u&&(p=Tv[n]))return p;if(n==="hasOwnProperty")return Ov}const f=Reflect.get(e,n,Yr(e)?e:r);return(La(n)?Ig.has(n):Dv(n))||(o||ns(e,"get",n),a)?f:Yr(f)?u&&Nd(n)?f:f.value:mr(f)?o?Vg(f):Ya(f):f}}class jg extends Fg{constructor(e=!1){super(!1,e)}set(e,n,r,o){let a=e[n];if(!this._isShallow){const p=iu(a);if(!ko(r)&&!iu(r)&&(a=Kn(a),r=Kn(r)),!fn(e)&&Yr(a)&&!Yr(r))return p?!1:(a.value=r,!0)}const u=fn(e)&&Nd(n)?Number(n)<e.length:sr(e,n),f=Reflect.set(e,n,r,Yr(e)?e:o);return e===Kn(o)&&(u?kl(r,a)&&Ga(e,"set",n,r):Ga(e,"add",n,r)),f}deleteProperty(e,n){const r=sr(e,n);e[n];const o=Reflect.deleteProperty(e,n);return o&&r&&Ga(e,"delete",n,void 0),o}has(e,n){const r=Reflect.has(e,n);return(!La(n)||!Ig.has(n))&&ns(e,"has",n),r}ownKeys(e){return ns(e,"iterate",fn(e)?"length":Ql),Reflect.ownKeys(e)}}class Rv extends Fg{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Iv=new jg,Fv=new Rv,jv=new jg(!0);const Kf=t=>t,Wc=t=>Reflect.getPrototypeOf(t);function zv(t,e,n){return function(...r){const o=this.__v_raw,a=Kn(o),u=Mu(a),f=t==="entries"||t===Symbol.iterator&&u,p=t==="keys"&&u,v=o[t](...r),w=n?Kf:e?Jf:rs;return!e&&ns(a,"iterate",p?Zf:Ql),{next(){const{value:b,done:S}=v.next();return S?{value:b,done:S}:{value:f?[w(b[0]),w(b[1])]:w(b),done:S}},[Symbol.iterator](){return this}}}}function Zc(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Uv(t,e){const n={get(o){const a=this.__v_raw,u=Kn(a),f=Kn(o);t||(kl(o,f)&&ns(u,"get",o),ns(u,"get",f));const{has:p}=Wc(u),v=e?Kf:t?Jf:rs;if(p.call(u,o))return v(a.get(o));if(p.call(u,f))return v(a.get(f));a!==u&&a.get(o)},get size(){const o=this.__v_raw;return!t&&ns(Kn(o),"iterate",Ql),Reflect.get(o,"size",o)},has(o){const a=this.__v_raw,u=Kn(a),f=Kn(o);return t||(kl(o,f)&&ns(u,"has",o),ns(u,"has",f)),o===f?a.has(o):a.has(o)||a.has(f)},forEach(o,a){const u=this,f=u.__v_raw,p=Kn(f),v=e?Kf:t?Jf:rs;return!t&&ns(p,"iterate",Ql),f.forEach((w,b)=>o.call(a,v(w),v(b),u))}};return Ti(n,t?{add:Zc("add"),set:Zc("set"),delete:Zc("delete"),clear:Zc("clear")}:{add(o){!e&&!ko(o)&&!iu(o)&&(o=Kn(o));const a=Kn(this);return Wc(a).has.call(a,o)||(a.add(o),Ga(a,"add",o,o)),this},set(o,a){!e&&!ko(a)&&!iu(a)&&(a=Kn(a));const u=Kn(this),{has:f,get:p}=Wc(u);let v=f.call(u,o);v||(o=Kn(o),v=f.call(u,o));const w=p.call(u,o);return u.set(o,a),v?kl(a,w)&&Ga(u,"set",o,a):Ga(u,"add",o,a),this},delete(o){const a=Kn(this),{has:u,get:f}=Wc(a);let p=u.call(a,o);p||(o=Kn(o),p=u.call(a,o)),f&&f.call(a,o);const v=a.delete(o);return p&&Ga(a,"delete",o,void 0),v},clear(){const o=Kn(this),a=o.size!==0,u=o.clear();return a&&Ga(o,"clear",void 0,void 0),u}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=zv(o,t,e)}),n}function jd(t,e){const n=Uv(t,e);return(r,o,a)=>o==="__v_isReactive"?!t:o==="__v_isReadonly"?t:o==="__v_raw"?r:Reflect.get(sr(n,o)&&o in r?n:r,o,a)}const qv={get:jd(!1,!1)},$v={get:jd(!1,!0)},Vv={get:jd(!0,!1)};const zg=new WeakMap,Ug=new WeakMap,qg=new WeakMap,Hv=new WeakMap;function Gv(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Wv(t){return t.__v_skip||!Object.isExtensible(t)?0:Gv(vv(t))}function Ya(t){return iu(t)?t:zd(t,!1,Iv,qv,zg)}function $g(t){return zd(t,!1,jv,$v,Ug)}function Vg(t){return zd(t,!0,Fv,Vv,qg)}function zd(t,e,n,r,o){if(!mr(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const a=o.get(t);if(a)return a;const u=Wv(t);if(u===0)return t;const f=new Proxy(t,u===2?r:n);return o.set(t,f),f}function Pl(t){return iu(t)?Pl(t.__v_raw):!!(t&&t.__v_isReactive)}function iu(t){return!!(t&&t.__v_isReadonly)}function ko(t){return!!(t&&t.__v_isShallow)}function Ud(t){return t?!!t.__v_raw:!1}function Kn(t){const e=t&&t.__v_raw;return e?Kn(e):t}function qd(t){return!sr(t,"__v_skip")&&Object.isExtensible(t)&&xg(t,"__v_skip",!0),t}const rs=t=>mr(t)?Ya(t):t,Jf=t=>mr(t)?Vg(t):t;function Yr(t){return t?t.__v_isRef===!0:!1}function Ie(t){return Hg(t,!1)}function Zv(t){return Hg(t,!0)}function Hg(t,e){return Yr(t)?t:new Kv(t,e)}class Kv{constructor(e,n){this.dep=new Fd,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Kn(e),this._value=n?e:rs(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||ko(e)||iu(e);e=r?e:Kn(e),kl(e,n)&&(this._rawValue=e,this._value=r?e:rs(e),this.dep.trigger())}}function On(t){return Yr(t)?t.value:t}const Jv={get:(t,e,n)=>e==="__v_raw"?t:On(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const o=t[e];return Yr(o)&&!Yr(n)?(o.value=n,!0):Reflect.set(t,e,n,r)}};function Gg(t){return Pl(t)?t:new Proxy(t,Jv)}function Yv(t){const e=fn(t)?new Array(t.length):{};for(const n in t)e[n]=Qv(t,n);return e}class Xv{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Bv(Kn(this._object),this._key)}}function Qv(t,e,n){const r=t[e];return Yr(r)?r:new Xv(t,e,n)}class ty{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Fd(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=yc-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&wr!==this)return Bg(this,!0),!0}get value(){const e=this.dep.track();return Dg(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function ey(t,e,n=!1){let r,o;return En(t)?r=t:(r=t.get,o=t.set),new ty(r,o,n)}const Kc={},yh=new WeakMap;let Vl;function ny(t,e=!1,n=Vl){if(n){let r=yh.get(n);r||yh.set(n,r=[]),r.push(t)}}function ry(t,e,n=gr){const{immediate:r,deep:o,once:a,scheduler:u,augmentJob:f,call:p}=n,v=mt=>o?mt:ko(mt)||o===!1||o===0?Wa(mt,1):Wa(mt);let w,b,S,x,I=!1,D=!1;if(Yr(t)?(b=()=>t.value,I=ko(t)):Pl(t)?(b=()=>v(t),I=!0):fn(t)?(D=!0,I=t.some(mt=>Pl(mt)||ko(mt)),b=()=>t.map(mt=>{if(Yr(mt))return mt.value;if(Pl(mt))return v(mt);if(En(mt))return p?p(mt,2):mt()})):En(t)?e?b=p?()=>p(t,2):t:b=()=>{if(S){Bl();try{S()}finally{Tl()}}const mt=Vl;Vl=w;try{return p?p(t,3,[x]):t(x)}finally{Vl=mt}}:b=wa,e&&o){const mt=b,Tt=o===!0?1/0:o;b=()=>Wa(mt(),Tt)}const j=Eg(),z=()=>{w.stop(),j&&j.active&&Td(j.effects,w)};if(a&&e){const mt=e;e=(...Tt)=>{mt(...Tt),z()}}let W=D?new Array(t.length).fill(Kc):Kc;const Q=mt=>{if(!(!(w.flags&1)||!w.dirty&&!mt))if(e){const Tt=w.run();if(o||I||(D?Tt.some((Nt,Ft)=>kl(Nt,W[Ft])):kl(Tt,W))){S&&S();const Nt=Vl;Vl=w;try{const Ft=[Tt,W===Kc?void 0:D&&W[0]===Kc?[]:W,x];p?p(e,3,Ft):e(...Ft),W=Tt}finally{Vl=Nt}}}else w.run()};return f&&f(Q),w=new Ag(b),w.scheduler=u?()=>u(Q,!1):Q,x=mt=>ny(mt,!1,w),S=w.onStop=()=>{const mt=yh.get(w);if(mt){if(p)p(mt,4);else for(const Tt of mt)Tt();yh.delete(w)}},e?r?Q(!0):W=w.run():u?u(Q.bind(null,!0),!0):w.run(),z.pause=w.pause.bind(w),z.resume=w.resume.bind(w),z.stop=z,z}function Wa(t,e=1/0,n){if(e<=0||!mr(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Yr(t))Wa(t.value,e,n);else if(fn(t))for(let r=0;r<t.length;r++)Wa(t[r],e,n);else if(zu(t)||Mu(t))t.forEach(r=>{Wa(r,e,n)});else if(wg(t)){for(const r in t)Wa(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Wa(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Tc(t,e,n,r){try{return r?t(...r):t()}catch(o){jh(o,e,n)}}function Jo(t,e,n,r){if(En(t)){const o=Tc(t,e,n,r);return o&&_g(o)&&o.catch(a=>{jh(a,e,n)}),o}if(fn(t)){const o=[];for(let a=0;a<t.length;a++)o.push(Jo(t[a],e,n,r));return o}}function jh(t,e,n,r=!0){const o=e?e.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:u}=e&&e.appContext.config||gr;if(e){let f=e.parent;const p=e.proxy,v=`https://vuejs.org/error-reference/#runtime-${n}`;for(;f;){const w=f.ec;if(w){for(let b=0;b<w.length;b++)if(w[b](t,p,v)===!1)return}f=f.parent}if(a){Bl(),Tc(a,null,10,[t,p,v]),Tl();return}}iy(t,n,o,r,u)}function iy(t,e,n,r=!0,o=!1){if(o)throw t;console.error(t)}const gs=[];let ya=-1;const Bu=[];let _l=null,wu=0;const Wg=Promise.resolve();let _h=null;function Ai(t){const e=_h||Wg;return t?e.then(this?t.bind(this):t):e}function sy(t){let e=ya+1,n=gs.length;for(;e<n;){const r=e+n>>>1,o=gs[r],a=bc(o);a<t||a===t&&o.flags&2?e=r+1:n=r}return e}function $d(t){if(!(t.flags&1)){const e=bc(t),n=gs[gs.length-1];!n||!(t.flags&2)&&e>=bc(n)?gs.push(t):gs.splice(sy(e),0,t),t.flags|=1,Zg()}}function Zg(){_h||(_h=Wg.then(Jg))}function oy(t){fn(t)?Bu.push(...t):_l&&t.id===-1?_l.splice(wu+1,0,t):t.flags&1||(Bu.push(t),t.flags|=1),Zg()}function vp(t,e,n=ya+1){for(;n<gs.length;n++){const r=gs[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;gs.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Kg(t){if(Bu.length){const e=[...new Set(Bu)].sort((n,r)=>bc(n)-bc(r));if(Bu.length=0,_l){_l.push(...e);return}for(_l=e,wu=0;wu<_l.length;wu++){const n=_l[wu];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}_l=null,wu=0}}const bc=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Jg(t){try{for(ya=0;ya<gs.length;ya++){const e=gs[ya];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Tc(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;ya<gs.length;ya++){const e=gs[ya];e&&(e.flags&=-2)}ya=-1,gs.length=0,Kg(),_h=null,(gs.length||Bu.length)&&Jg()}}let ms=null,Yg=null;function bh(t){const e=ms;return ms=t,Yg=t&&t.type.__scopeId||null,e}function Za(t,e=ms,n){if(!e||t._n)return t;const r=(...o)=>{r._d&&Ep(-1);const a=bh(e);let u;try{u=t(...o)}finally{bh(a),r._d&&Ep(1)}return u};return r._n=!0,r._c=!0,r._d=!0,r}function An(t,e){if(ms===null)return t;const n=Gh(ms),r=t.dirs||(t.dirs=[]);for(let o=0;o<e.length;o++){let[a,u,f,p=gr]=e[o];a&&(En(a)&&(a={mounted:a,updated:a}),a.deep&&Wa(u),r.push({dir:a,instance:n,value:u,oldValue:void 0,arg:f,modifiers:p}))}return t}function zl(t,e,n,r){const o=t.dirs,a=e&&e.dirs;for(let u=0;u<o.length;u++){const f=o[u];a&&(f.oldValue=a[u].value);let p=f.dir[r];p&&(Bl(),Jo(p,n,8,[t.el,f,t,e]),Tl())}}const ay=Symbol("_vte"),Xg=t=>t.__isTeleport,bl=Symbol("_leaveCb"),Jc=Symbol("_enterCb");function ly(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ca(()=>{t.isMounted=!0}),qh(()=>{t.isUnmounting=!0}),t}const Lo=[Function,Array],Qg={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Lo,onEnter:Lo,onAfterEnter:Lo,onEnterCancelled:Lo,onBeforeLeave:Lo,onLeave:Lo,onAfterLeave:Lo,onLeaveCancelled:Lo,onBeforeAppear:Lo,onAppear:Lo,onAfterAppear:Lo,onAppearCancelled:Lo},tm=t=>{const e=t.subTree;return e.component?tm(e.component):e},uy={name:"BaseTransition",props:Qg,setup(t,{slots:e}){const n=a_(),r=ly();return()=>{const o=e.default&&rm(e.default(),!0);if(!o||!o.length)return;const a=em(o),u=Kn(t),{mode:f}=u;if(r.isLeaving)return wf(a);const p=yp(a);if(!p)return wf(a);let v=Yf(p,u,r,n,b=>v=b);p.type!==Fs&&wc(p,v);let w=n.subTree&&yp(n.subTree);if(w&&w.type!==Fs&&!Wl(p,w)&&tm(n).type!==Fs){let b=Yf(w,u,r,n);if(wc(w,b),f==="out-in"&&p.type!==Fs)return r.isLeaving=!0,b.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete b.afterLeave,w=void 0},wf(a);f==="in-out"&&p.type!==Fs?b.delayLeave=(S,x,I)=>{const D=nm(r,w);D[String(w.key)]=w,S[bl]=()=>{x(),S[bl]=void 0,delete v.delayedLeave,w=void 0},v.delayedLeave=()=>{I(),delete v.delayedLeave,w=void 0}}:w=void 0}else w&&(w=void 0);return a}}};function em(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Fs){e=n;break}}return e}const cy=uy;function nm(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Yf(t,e,n,r,o){const{appear:a,mode:u,persisted:f=!1,onBeforeEnter:p,onEnter:v,onAfterEnter:w,onEnterCancelled:b,onBeforeLeave:S,onLeave:x,onAfterLeave:I,onLeaveCancelled:D,onBeforeAppear:j,onAppear:z,onAfterAppear:W,onAppearCancelled:Q}=e,mt=String(t.key),Tt=nm(n,t),Nt=(Ct,Ut)=>{Ct&&Jo(Ct,r,9,Ut)},Ft=(Ct,Ut)=>{const Z=Ut[1];Nt(Ct,Ut),fn(Ct)?Ct.every(V=>V.length<=1)&&Z():Ct.length<=1&&Z()},vt={mode:u,persisted:f,beforeEnter(Ct){let Ut=p;if(!n.isMounted)if(a)Ut=j||p;else return;Ct[bl]&&Ct[bl](!0);const Z=Tt[mt];Z&&Wl(t,Z)&&Z.el[bl]&&Z.el[bl](),Nt(Ut,[Ct])},enter(Ct){let Ut=v,Z=w,V=b;if(!n.isMounted)if(a)Ut=z||v,Z=W||w,V=Q||b;else return;let St=!1;const Et=Ct[Jc]=M=>{St||(St=!0,M?Nt(V,[Ct]):Nt(Z,[Ct]),vt.delayedLeave&&vt.delayedLeave(),Ct[Jc]=void 0)};Ut?Ft(Ut,[Ct,Et]):Et()},leave(Ct,Ut){const Z=String(t.key);if(Ct[Jc]&&Ct[Jc](!0),n.isUnmounting)return Ut();Nt(S,[Ct]);let V=!1;const St=Ct[bl]=Et=>{V||(V=!0,Ut(),Et?Nt(D,[Ct]):Nt(I,[Ct]),Ct[bl]=void 0,Tt[Z]===t&&delete Tt[Z])};Tt[Z]=t,x?Ft(x,[Ct,St]):St()},clone(Ct){const Ut=Yf(Ct,e,n,r,o);return o&&o(Ut),Ut}};return vt}function wf(t){if(zh(t))return t=Sl(t),t.children=null,t}function yp(t){if(!zh(t))return Xg(t.type)&&t.children?em(t.children):t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&En(n.default))return n.default()}}function wc(t,e){t.shapeFlag&6&&t.component?(t.transition=e,wc(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function rm(t,e=!1,n){let r=[],o=0;for(let a=0;a<t.length;a++){let u=t[a];const f=n==null?u.key:String(n)+String(u.key!=null?u.key:a);u.type===_n?(u.patchFlag&128&&o++,r=r.concat(rm(u.children,e,f))):(e||u.type!==Fs)&&r.push(f!=null?Sl(u,{key:f}):u)}if(o>1)for(let a=0;a<r.length;a++)r[a].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function ys(t,e){return En(t)?Ti({name:t.name},e,{setup:t}):t}function im(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function wh(t,e,n,r,o=!1){if(fn(t)){t.forEach((I,D)=>wh(I,e&&(fn(e)?e[D]:e),n,r,o));return}if(uc(r)&&!o){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&wh(t,e,n,r.component.subTree);return}const a=r.shapeFlag&4?Gh(r.component):r.el,u=o?null:a,{i:f,r:p}=t,v=e&&e.r,w=f.refs===gr?f.refs={}:f.refs,b=f.setupState,S=Kn(b),x=b===gr?()=>!1:I=>sr(S,I);if(v!=null&&v!==p&&(Xr(v)?(w[v]=null,x(v)&&(b[v]=null)):Yr(v)&&(v.value=null)),En(p))Tc(p,f,12,[u,w]);else{const I=Xr(p),D=Yr(p);if(I||D){const j=()=>{if(t.f){const z=I?x(p)?b[p]:w[p]:p.value;o?fn(z)&&Td(z,a):fn(z)?z.includes(a)||z.push(a):I?(w[p]=[a],x(p)&&(b[p]=w[p])):(p.value=[a],t.k&&(w[t.k]=p.value))}else I?(w[p]=u,x(p)&&(b[p]=u)):D&&(p.value=u,t.k&&(w[t.k]=u))};u?(j.id=-1,no(j,n)):j()}}}Rh().requestIdleCallback;Rh().cancelIdleCallback;const uc=t=>!!t.type.__asyncLoader,zh=t=>t.type.__isKeepAlive;function hy(t,e){sm(t,"a",e)}function fy(t,e){sm(t,"da",e)}function sm(t,e,n=Bi){const r=t.__wdc||(t.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return t()});if(Uh(e,r,n),n){let o=n.parent;for(;o&&o.parent;)zh(o.parent.vnode)&&dy(r,e,n,o),o=o.parent}}function dy(t,e,n,r){const o=Uh(e,t,r,!0);$h(()=>{Td(r[e],o)},n)}function Uh(t,e,n=Bi,r=!1){if(n){const o=n[t]||(n[t]=[]),a=e.__weh||(e.__weh=(...u)=>{Bl();const f=Nc(n),p=Jo(e,n,t,u);return f(),Tl(),p});return r?o.unshift(a):o.push(a),a}}const Xa=t=>(e,n=Bi)=>{(!Lc||t==="sp")&&Uh(t,(...r)=>e(...r),n)},py=Xa("bm"),Ca=Xa("m"),gy=Xa("bu"),my=Xa("u"),qh=Xa("bum"),$h=Xa("um"),vy=Xa("sp"),yy=Xa("rtg"),_y=Xa("rtc");function by(t,e=Bi){Uh("ec",t,e)}const wy="components";function xy(t,e){return Cy(wy,t,!0,e)||t}const Ly=Symbol.for("v-ndc");function Cy(t,e,n=!0,r=!1){const o=ms||Bi;if(o){const a=o.type;{const f=f_(a,!1);if(f&&(f===e||f===Eo(e)||f===Oh(Eo(e))))return a}const u=_p(o[t]||a[t],e)||_p(o.appContext[t],e);return!u&&r?a:u}}function _p(t,e){return t&&(t[e]||t[Eo(e)]||t[Oh(Eo(e))])}function Vn(t,e,n,r){let o;const a=n,u=fn(t);if(u||Xr(t)){const f=u&&Pl(t);let p=!1;f&&(p=!ko(t),t=Fh(t)),o=new Array(t.length);for(let v=0,w=t.length;v<w;v++)o[v]=e(p?rs(t[v]):t[v],v,void 0,a)}else if(typeof t=="number"){o=new Array(t);for(let f=0;f<t;f++)o[f]=e(f+1,f,void 0,a)}else if(mr(t))if(t[Symbol.iterator])o=Array.from(t,(f,p)=>e(f,p,void 0,a));else{const f=Object.keys(t);o=new Array(f.length);for(let p=0,v=f.length;p<v;p++){const w=f[p];o[p]=e(t[w],w,p,a)}}else o=[];return o}const Xf=t=>t?Pm(t)?Gh(t):Xf(t.parent):null,cc=Ti(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Xf(t.parent),$root:t=>Xf(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>am(t),$forceUpdate:t=>t.f||(t.f=()=>{$d(t.update)}),$nextTick:t=>t.n||(t.n=Ai.bind(t.proxy)),$watch:t=>Gy.bind(t)}),xf=(t,e)=>t!==gr&&!t.__isScriptSetup&&sr(t,e),ky={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:o,props:a,accessCache:u,type:f,appContext:p}=t;let v;if(e[0]!=="$"){const x=u[e];if(x!==void 0)switch(x){case 1:return r[e];case 2:return o[e];case 4:return n[e];case 3:return a[e]}else{if(xf(r,e))return u[e]=1,r[e];if(o!==gr&&sr(o,e))return u[e]=2,o[e];if((v=t.propsOptions[0])&&sr(v,e))return u[e]=3,a[e];if(n!==gr&&sr(n,e))return u[e]=4,n[e];Qf&&(u[e]=0)}}const w=cc[e];let b,S;if(w)return e==="$attrs"&&ns(t.attrs,"get",""),w(t);if((b=f.__cssModules)&&(b=b[e]))return b;if(n!==gr&&sr(n,e))return u[e]=4,n[e];if(S=p.config.globalProperties,sr(S,e))return S[e]},set({_:t},e,n){const{data:r,setupState:o,ctx:a}=t;return xf(o,e)?(o[e]=n,!0):r!==gr&&sr(r,e)?(r[e]=n,!0):sr(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(a[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:o,propsOptions:a}},u){let f;return!!n[u]||t!==gr&&sr(t,u)||xf(e,u)||(f=a[0])&&sr(f,u)||sr(r,u)||sr(cc,u)||sr(o.config.globalProperties,u)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:sr(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function bp(t){return fn(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Qf=!0;function Py(t){const e=am(t),n=t.proxy,r=t.ctx;Qf=!1,e.beforeCreate&&wp(e.beforeCreate,t,"bc");const{data:o,computed:a,methods:u,watch:f,provide:p,inject:v,created:w,beforeMount:b,mounted:S,beforeUpdate:x,updated:I,activated:D,deactivated:j,beforeDestroy:z,beforeUnmount:W,destroyed:Q,unmounted:mt,render:Tt,renderTracked:Nt,renderTriggered:Ft,errorCaptured:vt,serverPrefetch:Ct,expose:Ut,inheritAttrs:Z,components:V,directives:St,filters:Et}=e;if(v&&Sy(v,r,null),u)for(const q in u){const O=u[q];En(O)&&(r[q]=O.bind(n))}if(o){const q=o.call(n,n);mr(q)&&(t.data=Ya(q))}if(Qf=!0,a)for(const q in a){const O=a[q],dt=En(O)?O.bind(n,n):En(O.get)?O.get.bind(n,n):wa,gt=!En(O)&&En(O.set)?O.set.bind(n):wa,Y=Fn({get:dt,set:gt});Object.defineProperty(r,q,{enumerable:!0,configurable:!0,get:()=>Y.value,set:A=>Y.value=A})}if(f)for(const q in f)om(f[q],r,n,q);if(p){const q=En(p)?p.call(n):p;Reflect.ownKeys(q).forEach(O=>{ih(O,q[O])})}w&&wp(w,t,"c");function $(q,O){fn(O)?O.forEach(dt=>q(dt.bind(n))):O&&q(O.bind(n))}if($(py,b),$(Ca,S),$(gy,x),$(my,I),$(hy,D),$(fy,j),$(by,vt),$(_y,Nt),$(yy,Ft),$(qh,W),$($h,mt),$(vy,Ct),fn(Ut))if(Ut.length){const q=t.exposed||(t.exposed={});Ut.forEach(O=>{Object.defineProperty(q,O,{get:()=>n[O],set:dt=>n[O]=dt})})}else t.exposed||(t.exposed={});Tt&&t.render===wa&&(t.render=Tt),Z!=null&&(t.inheritAttrs=Z),V&&(t.components=V),St&&(t.directives=St),Ct&&im(t)}function Sy(t,e,n=wa){fn(t)&&(t=td(t));for(const r in t){const o=t[r];let a;mr(o)?"default"in o?a=Po(o.from||r,o.default,!0):a=Po(o.from||r):a=Po(o),Yr(a)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:u=>a.value=u}):e[r]=a}}function wp(t,e,n){Jo(fn(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function om(t,e,n,r){let o=r.includes(".")?wm(n,r):()=>n[r];if(Xr(t)){const a=e[t];En(a)&&zi(o,a)}else if(En(t))zi(o,t.bind(n));else if(mr(t))if(fn(t))t.forEach(a=>om(a,e,n,r));else{const a=En(t.handler)?t.handler.bind(n):e[t.handler];En(a)&&zi(o,a,t)}}function am(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:o,optionsCache:a,config:{optionMergeStrategies:u}}=t.appContext,f=a.get(e);let p;return f?p=f:!o.length&&!n&&!r?p=e:(p={},o.length&&o.forEach(v=>xh(p,v,u,!0)),xh(p,e,u)),mr(e)&&a.set(e,p),p}function xh(t,e,n,r=!1){const{mixins:o,extends:a}=e;a&&xh(t,a,n,!0),o&&o.forEach(u=>xh(t,u,n,!0));for(const u in e)if(!(r&&u==="expose")){const f=Ey[u]||n&&n[u];t[u]=f?f(t[u],e[u]):e[u]}return t}const Ey={data:xp,props:Lp,emits:Lp,methods:ic,computed:ic,beforeCreate:ds,created:ds,beforeMount:ds,mounted:ds,beforeUpdate:ds,updated:ds,beforeDestroy:ds,beforeUnmount:ds,destroyed:ds,unmounted:ds,activated:ds,deactivated:ds,errorCaptured:ds,serverPrefetch:ds,components:ic,directives:ic,watch:My,provide:xp,inject:Ay};function xp(t,e){return e?t?function(){return Ti(En(t)?t.call(this,this):t,En(e)?e.call(this,this):e)}:e:t}function Ay(t,e){return ic(td(t),td(e))}function td(t){if(fn(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function ds(t,e){return t?[...new Set([].concat(t,e))]:e}function ic(t,e){return t?Ti(Object.create(null),t,e):e}function Lp(t,e){return t?fn(t)&&fn(e)?[...new Set([...t,...e])]:Ti(Object.create(null),bp(t),bp(e??{})):e}function My(t,e){if(!t)return e;if(!e)return t;const n=Ti(Object.create(null),t);for(const r in e)n[r]=ds(t[r],e[r]);return n}function lm(){return{app:null,config:{isNativeTag:gv,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let By=0;function Ty(t,e){return function(r,o=null){En(r)||(r=Ti({},r)),o!=null&&!mr(o)&&(o=null);const a=lm(),u=new WeakSet,f=[];let p=!1;const v=a.app={_uid:By++,_component:r,_props:o,_container:null,_context:a,_instance:null,version:p_,get config(){return a.config},set config(w){},use(w,...b){return u.has(w)||(w&&En(w.install)?(u.add(w),w.install(v,...b)):En(w)&&(u.add(w),w(v,...b))),v},mixin(w){return a.mixins.includes(w)||a.mixins.push(w),v},component(w,b){return b?(a.components[w]=b,v):a.components[w]},directive(w,b){return b?(a.directives[w]=b,v):a.directives[w]},mount(w,b,S){if(!p){const x=v._ceVNode||Sr(r,o);return x.appContext=a,S===!0?S="svg":S===!1&&(S=void 0),t(x,w,S),p=!0,v._container=w,w.__vue_app__=v,Gh(x.component)}},onUnmount(w){f.push(w)},unmount(){p&&(Jo(f,v._instance,16),t(null,v._container),delete v._container.__vue_app__)},provide(w,b){return a.provides[w]=b,v},runWithContext(w){const b=tu;tu=v;try{return w()}finally{tu=b}}};return v}}let tu=null;function ih(t,e){if(Bi){let n=Bi.provides;const r=Bi.parent&&Bi.parent.provides;r===n&&(n=Bi.provides=Object.create(r)),n[t]=e}}function Po(t,e,n=!1){const r=Bi||ms;if(r||tu){const o=tu?tu._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(o&&t in o)return o[t];if(arguments.length>1)return n&&En(e)?e.call(r&&r.proxy):e}}function Ny(){return!!(Bi||ms||tu)}const um={},cm=()=>Object.create(um),hm=t=>Object.getPrototypeOf(t)===um;function Dy(t,e,n,r=!1){const o={},a=cm();t.propsDefaults=Object.create(null),fm(t,e,o,a);for(const u in t.propsOptions[0])u in o||(o[u]=void 0);n?t.props=r?o:$g(o):t.type.props?t.props=o:t.props=a,t.attrs=a}function Oy(t,e,n,r){const{props:o,attrs:a,vnode:{patchFlag:u}}=t,f=Kn(o),[p]=t.propsOptions;let v=!1;if((r||u>0)&&!(u&16)){if(u&8){const w=t.vnode.dynamicProps;for(let b=0;b<w.length;b++){let S=w[b];if(Vh(t.emitsOptions,S))continue;const x=e[S];if(p)if(sr(a,S))x!==a[S]&&(a[S]=x,v=!0);else{const I=Eo(S);o[I]=ed(p,f,I,x,t,!1)}else x!==a[S]&&(a[S]=x,v=!0)}}}else{fm(t,e,o,a)&&(v=!0);let w;for(const b in f)(!e||!sr(e,b)&&((w=ou(b))===b||!sr(e,w)))&&(p?n&&(n[b]!==void 0||n[w]!==void 0)&&(o[b]=ed(p,f,b,void 0,t,!0)):delete o[b]);if(a!==f)for(const b in a)(!e||!sr(e,b))&&(delete a[b],v=!0)}v&&Ga(t.attrs,"set","")}function fm(t,e,n,r){const[o,a]=t.propsOptions;let u=!1,f;if(e)for(let p in e){if(oc(p))continue;const v=e[p];let w;o&&sr(o,w=Eo(p))?!a||!a.includes(w)?n[w]=v:(f||(f={}))[w]=v:Vh(t.emitsOptions,p)||(!(p in r)||v!==r[p])&&(r[p]=v,u=!0)}if(a){const p=Kn(n),v=f||gr;for(let w=0;w<a.length;w++){const b=a[w];n[b]=ed(o,p,b,v[b],t,!sr(v,b))}}return u}function ed(t,e,n,r,o,a){const u=t[n];if(u!=null){const f=sr(u,"default");if(f&&r===void 0){const p=u.default;if(u.type!==Function&&!u.skipFactory&&En(p)){const{propsDefaults:v}=o;if(n in v)r=v[n];else{const w=Nc(o);r=v[n]=p.call(null,e),w()}}else r=p;o.ce&&o.ce._setProp(n,r)}u[0]&&(a&&!f?r=!1:u[1]&&(r===""||r===ou(n))&&(r=!0))}return r}const Ry=new WeakMap;function dm(t,e,n=!1){const r=n?Ry:e.propsCache,o=r.get(t);if(o)return o;const a=t.props,u={},f=[];let p=!1;if(!En(t)){const w=b=>{p=!0;const[S,x]=dm(b,e,!0);Ti(u,S),x&&f.push(...x)};!n&&e.mixins.length&&e.mixins.forEach(w),t.extends&&w(t.extends),t.mixins&&t.mixins.forEach(w)}if(!a&&!p)return mr(t)&&r.set(t,Au),Au;if(fn(a))for(let w=0;w<a.length;w++){const b=Eo(a[w]);Cp(b)&&(u[b]=gr)}else if(a)for(const w in a){const b=Eo(w);if(Cp(b)){const S=a[w],x=u[b]=fn(S)||En(S)?{type:S}:Ti({},S),I=x.type;let D=!1,j=!0;if(fn(I))for(let z=0;z<I.length;++z){const W=I[z],Q=En(W)&&W.name;if(Q==="Boolean"){D=!0;break}else Q==="String"&&(j=!1)}else D=En(I)&&I.name==="Boolean";x[0]=D,x[1]=j,(D||sr(x,"default"))&&f.push(b)}}const v=[u,f];return mr(t)&&r.set(t,v),v}function Cp(t){return t[0]!=="$"&&!oc(t)}const pm=t=>t[0]==="_"||t==="$stable",Vd=t=>fn(t)?t.map(_a):[_a(t)],Iy=(t,e,n)=>{if(e._n)return e;const r=Za((...o)=>Vd(e(...o)),n);return r._c=!1,r},gm=(t,e,n)=>{const r=t._ctx;for(const o in t){if(pm(o))continue;const a=t[o];if(En(a))e[o]=Iy(o,a,r);else if(a!=null){const u=Vd(a);e[o]=()=>u}}},mm=(t,e)=>{const n=Vd(e);t.slots.default=()=>n},vm=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},Fy=(t,e,n)=>{const r=t.slots=cm();if(t.vnode.shapeFlag&32){const o=e._;o?(vm(r,e,n),n&&xg(r,"_",o,!0)):gm(e,r)}else e&&mm(t,e)},jy=(t,e,n)=>{const{vnode:r,slots:o}=t;let a=!0,u=gr;if(r.shapeFlag&32){const f=e._;f?n&&f===1?a=!1:vm(o,e,n):(a=!e.$stable,gm(e,o)),u=e}else e&&(mm(t,e),u={default:1});if(a)for(const f in o)!pm(f)&&u[f]==null&&delete o[f]},no=Qy;function zy(t){return Uy(t)}function Uy(t,e){const n=Rh();n.__VUE__=!0;const{insert:r,remove:o,patchProp:a,createElement:u,createText:f,createComment:p,setText:v,setElementText:w,parentNode:b,nextSibling:S,setScopeId:x=wa,insertStaticContent:I}=t,D=(H,J,yt,wt=null,K=null,Ht=null,ne=void 0,Zt=null,Dt=!!J.dynamicChildren)=>{if(H===J)return;H&&!Wl(H,J)&&(wt=tt(H),A(H,K,Ht,!0),H=null),J.patchFlag===-2&&(Dt=!1,J.dynamicChildren=null);const{type:Lt,ref:ae,shapeFlag:te}=J;switch(Lt){case Hh:j(H,J,yt,wt);break;case Fs:z(H,J,yt,wt);break;case sh:H==null&&W(J,yt,wt,ne);break;case _n:V(H,J,yt,wt,K,Ht,ne,Zt,Dt);break;default:te&1?Tt(H,J,yt,wt,K,Ht,ne,Zt,Dt):te&6?St(H,J,yt,wt,K,Ht,ne,Zt,Dt):(te&64||te&128)&&Lt.process(H,J,yt,wt,K,Ht,ne,Zt,Dt,At)}ae!=null&&K&&wh(ae,H&&H.ref,Ht,J||H,!J)},j=(H,J,yt,wt)=>{if(H==null)r(J.el=f(J.children),yt,wt);else{const K=J.el=H.el;J.children!==H.children&&v(K,J.children)}},z=(H,J,yt,wt)=>{H==null?r(J.el=p(J.children||""),yt,wt):J.el=H.el},W=(H,J,yt,wt)=>{[H.el,H.anchor]=I(H.children,J,yt,wt,H.el,H.anchor)},Q=({el:H,anchor:J},yt,wt)=>{let K;for(;H&&H!==J;)K=S(H),r(H,yt,wt),H=K;r(J,yt,wt)},mt=({el:H,anchor:J})=>{let yt;for(;H&&H!==J;)yt=S(H),o(H),H=yt;o(J)},Tt=(H,J,yt,wt,K,Ht,ne,Zt,Dt)=>{J.type==="svg"?ne="svg":J.type==="math"&&(ne="mathml"),H==null?Nt(J,yt,wt,K,Ht,ne,Zt,Dt):Ct(H,J,K,Ht,ne,Zt,Dt)},Nt=(H,J,yt,wt,K,Ht,ne,Zt)=>{let Dt,Lt;const{props:ae,shapeFlag:te,transition:xe,dirs:zt}=H;if(Dt=H.el=u(H.type,Ht,ae&&ae.is,ae),te&8?w(Dt,H.children):te&16&&vt(H.children,Dt,null,wt,K,Lf(H,Ht),ne,Zt),zt&&zl(H,null,wt,"created"),Ft(Dt,H,H.scopeId,ne,wt),ae){for(const qe in ae)qe!=="value"&&!oc(qe)&&a(Dt,qe,null,ae[qe],Ht,wt);"value"in ae&&a(Dt,"value",null,ae.value,Ht),(Lt=ae.onVnodeBeforeMount)&&ga(Lt,wt,H)}zt&&zl(H,null,wt,"beforeMount");const pe=qy(K,xe);pe&&xe.beforeEnter(Dt),r(Dt,J,yt),((Lt=ae&&ae.onVnodeMounted)||pe||zt)&&no(()=>{Lt&&ga(Lt,wt,H),pe&&xe.enter(Dt),zt&&zl(H,null,wt,"mounted")},K)},Ft=(H,J,yt,wt,K)=>{if(yt&&x(H,yt),wt)for(let Ht=0;Ht<wt.length;Ht++)x(H,wt[Ht]);if(K){let Ht=K.subTree;if(J===Ht||Lm(Ht.type)&&(Ht.ssContent===J||Ht.ssFallback===J)){const ne=K.vnode;Ft(H,ne,ne.scopeId,ne.slotScopeIds,K.parent)}}},vt=(H,J,yt,wt,K,Ht,ne,Zt,Dt=0)=>{for(let Lt=Dt;Lt<H.length;Lt++){const ae=H[Lt]=Zt?wl(H[Lt]):_a(H[Lt]);D(null,ae,J,yt,wt,K,Ht,ne,Zt)}},Ct=(H,J,yt,wt,K,Ht,ne)=>{const Zt=J.el=H.el;let{patchFlag:Dt,dynamicChildren:Lt,dirs:ae}=J;Dt|=H.patchFlag&16;const te=H.props||gr,xe=J.props||gr;let zt;if(yt&&Ul(yt,!1),(zt=xe.onVnodeBeforeUpdate)&&ga(zt,yt,J,H),ae&&zl(J,H,yt,"beforeUpdate"),yt&&Ul(yt,!0),(te.innerHTML&&xe.innerHTML==null||te.textContent&&xe.textContent==null)&&w(Zt,""),Lt?Ut(H.dynamicChildren,Lt,Zt,yt,wt,Lf(J,K),Ht):ne||O(H,J,Zt,null,yt,wt,Lf(J,K),Ht,!1),Dt>0){if(Dt&16)Z(Zt,te,xe,yt,K);else if(Dt&2&&te.class!==xe.class&&a(Zt,"class",null,xe.class,K),Dt&4&&a(Zt,"style",te.style,xe.style,K),Dt&8){const pe=J.dynamicProps;for(let qe=0;qe<pe.length;qe++){const He=pe[qe],Fe=te[He],Xe=xe[He];(Xe!==Fe||He==="value")&&a(Zt,He,Fe,Xe,K,yt)}}Dt&1&&H.children!==J.children&&w(Zt,J.children)}else!ne&&Lt==null&&Z(Zt,te,xe,yt,K);((zt=xe.onVnodeUpdated)||ae)&&no(()=>{zt&&ga(zt,yt,J,H),ae&&zl(J,H,yt,"updated")},wt)},Ut=(H,J,yt,wt,K,Ht,ne)=>{for(let Zt=0;Zt<J.length;Zt++){const Dt=H[Zt],Lt=J[Zt],ae=Dt.el&&(Dt.type===_n||!Wl(Dt,Lt)||Dt.shapeFlag&70)?b(Dt.el):yt;D(Dt,Lt,ae,null,wt,K,Ht,ne,!0)}},Z=(H,J,yt,wt,K)=>{if(J!==yt){if(J!==gr)for(const Ht in J)!oc(Ht)&&!(Ht in yt)&&a(H,Ht,J[Ht],null,K,wt);for(const Ht in yt){if(oc(Ht))continue;const ne=yt[Ht],Zt=J[Ht];ne!==Zt&&Ht!=="value"&&a(H,Ht,Zt,ne,K,wt)}"value"in yt&&a(H,"value",J.value,yt.value,K)}},V=(H,J,yt,wt,K,Ht,ne,Zt,Dt)=>{const Lt=J.el=H?H.el:f(""),ae=J.anchor=H?H.anchor:f("");let{patchFlag:te,dynamicChildren:xe,slotScopeIds:zt}=J;zt&&(Zt=Zt?Zt.concat(zt):zt),H==null?(r(Lt,yt,wt),r(ae,yt,wt),vt(J.children||[],yt,ae,K,Ht,ne,Zt,Dt)):te>0&&te&64&&xe&&H.dynamicChildren?(Ut(H.dynamicChildren,xe,yt,K,Ht,ne,Zt),(J.key!=null||K&&J===K.subTree)&&ym(H,J,!0)):O(H,J,yt,ae,K,Ht,ne,Zt,Dt)},St=(H,J,yt,wt,K,Ht,ne,Zt,Dt)=>{J.slotScopeIds=Zt,H==null?J.shapeFlag&512?K.ctx.activate(J,yt,wt,ne,Dt):Et(J,yt,wt,K,Ht,ne,Dt):M(H,J,Dt)},Et=(H,J,yt,wt,K,Ht,ne)=>{const Zt=H.component=o_(H,wt,K);if(zh(H)&&(Zt.ctx.renderer=At),l_(Zt,!1,ne),Zt.asyncDep){if(K&&K.registerDep(Zt,$,ne),!H.el){const Dt=Zt.subTree=Sr(Fs);z(null,Dt,J,yt)}}else $(Zt,H,J,yt,K,Ht,ne)},M=(H,J,yt)=>{const wt=J.component=H.component;if(Yy(H,J,yt))if(wt.asyncDep&&!wt.asyncResolved){q(wt,J,yt);return}else wt.next=J,wt.update();else J.el=H.el,wt.vnode=J},$=(H,J,yt,wt,K,Ht,ne)=>{const Zt=()=>{if(H.isMounted){let{next:te,bu:xe,u:zt,parent:pe,vnode:qe}=H;{const on=_m(H);if(on){te&&(te.el=qe.el,q(H,te,ne)),on.asyncDep.then(()=>{H.isUnmounted||Zt()});return}}let He=te,Fe;Ul(H,!1),te?(te.el=qe.el,q(H,te,ne)):te=qe,xe&&rh(xe),(Fe=te.props&&te.props.onVnodeBeforeUpdate)&&ga(Fe,pe,te,qe),Ul(H,!0);const Xe=Pp(H),De=H.subTree;H.subTree=Xe,D(De,Xe,b(De.el),tt(De),H,K,Ht),te.el=Xe.el,He===null&&Xy(H,Xe.el),zt&&no(zt,K),(Fe=te.props&&te.props.onVnodeUpdated)&&no(()=>ga(Fe,pe,te,qe),K)}else{let te;const{el:xe,props:zt}=J,{bm:pe,m:qe,parent:He,root:Fe,type:Xe}=H,De=uc(J);Ul(H,!1),pe&&rh(pe),!De&&(te=zt&&zt.onVnodeBeforeMount)&&ga(te,He,J),Ul(H,!0);{Fe.ce&&Fe.ce._injectChildStyle(Xe);const on=H.subTree=Pp(H);D(null,on,yt,wt,H,K,Ht),J.el=on.el}if(qe&&no(qe,K),!De&&(te=zt&&zt.onVnodeMounted)){const on=J;no(()=>ga(te,He,on),K)}(J.shapeFlag&256||He&&uc(He.vnode)&&He.vnode.shapeFlag&256)&&H.a&&no(H.a,K),H.isMounted=!0,J=yt=wt=null}};H.scope.on();const Dt=H.effect=new Ag(Zt);H.scope.off();const Lt=H.update=Dt.run.bind(Dt),ae=H.job=Dt.runIfDirty.bind(Dt);ae.i=H,ae.id=H.uid,Dt.scheduler=()=>$d(ae),Ul(H,!0),Lt()},q=(H,J,yt)=>{J.component=H;const wt=H.vnode.props;H.vnode=J,H.next=null,Oy(H,J.props,wt,yt),jy(H,J.children,yt),Bl(),vp(H),Tl()},O=(H,J,yt,wt,K,Ht,ne,Zt,Dt=!1)=>{const Lt=H&&H.children,ae=H?H.shapeFlag:0,te=J.children,{patchFlag:xe,shapeFlag:zt}=J;if(xe>0){if(xe&128){gt(Lt,te,yt,wt,K,Ht,ne,Zt,Dt);return}else if(xe&256){dt(Lt,te,yt,wt,K,Ht,ne,Zt,Dt);return}}zt&8?(ae&16&&ct(Lt,K,Ht),te!==Lt&&w(yt,te)):ae&16?zt&16?gt(Lt,te,yt,wt,K,Ht,ne,Zt,Dt):ct(Lt,K,Ht,!0):(ae&8&&w(yt,""),zt&16&&vt(te,yt,wt,K,Ht,ne,Zt,Dt))},dt=(H,J,yt,wt,K,Ht,ne,Zt,Dt)=>{H=H||Au,J=J||Au;const Lt=H.length,ae=J.length,te=Math.min(Lt,ae);let xe;for(xe=0;xe<te;xe++){const zt=J[xe]=Dt?wl(J[xe]):_a(J[xe]);D(H[xe],zt,yt,null,K,Ht,ne,Zt,Dt)}Lt>ae?ct(H,K,Ht,!0,!1,te):vt(J,yt,wt,K,Ht,ne,Zt,Dt,te)},gt=(H,J,yt,wt,K,Ht,ne,Zt,Dt)=>{let Lt=0;const ae=J.length;let te=H.length-1,xe=ae-1;for(;Lt<=te&&Lt<=xe;){const zt=H[Lt],pe=J[Lt]=Dt?wl(J[Lt]):_a(J[Lt]);if(Wl(zt,pe))D(zt,pe,yt,null,K,Ht,ne,Zt,Dt);else break;Lt++}for(;Lt<=te&&Lt<=xe;){const zt=H[te],pe=J[xe]=Dt?wl(J[xe]):_a(J[xe]);if(Wl(zt,pe))D(zt,pe,yt,null,K,Ht,ne,Zt,Dt);else break;te--,xe--}if(Lt>te){if(Lt<=xe){const zt=xe+1,pe=zt<ae?J[zt].el:wt;for(;Lt<=xe;)D(null,J[Lt]=Dt?wl(J[Lt]):_a(J[Lt]),yt,pe,K,Ht,ne,Zt,Dt),Lt++}}else if(Lt>xe)for(;Lt<=te;)A(H[Lt],K,Ht,!0),Lt++;else{const zt=Lt,pe=Lt,qe=new Map;for(Lt=pe;Lt<=xe;Lt++){const rn=J[Lt]=Dt?wl(J[Lt]):_a(J[Lt]);rn.key!=null&&qe.set(rn.key,Lt)}let He,Fe=0;const Xe=xe-pe+1;let De=!1,on=0;const pn=new Array(Xe);for(Lt=0;Lt<Xe;Lt++)pn[Lt]=0;for(Lt=zt;Lt<=te;Lt++){const rn=H[Lt];if(Fe>=Xe){A(rn,K,Ht,!0);continue}let hn;if(rn.key!=null)hn=qe.get(rn.key);else for(He=pe;He<=xe;He++)if(pn[He-pe]===0&&Wl(rn,J[He])){hn=He;break}hn===void 0?A(rn,K,Ht,!0):(pn[hn-pe]=Lt+1,hn>=on?on=hn:De=!0,D(rn,J[hn],yt,null,K,Ht,ne,Zt,Dt),Fe++)}const cr=De?$y(pn):Au;for(He=cr.length-1,Lt=Xe-1;Lt>=0;Lt--){const rn=pe+Lt,hn=J[rn],Ze=rn+1<ae?J[rn+1].el:wt;pn[Lt]===0?D(null,hn,yt,Ze,K,Ht,ne,Zt,Dt):De&&(He<0||Lt!==cr[He]?Y(hn,yt,Ze,2):He--)}}},Y=(H,J,yt,wt,K=null)=>{const{el:Ht,type:ne,transition:Zt,children:Dt,shapeFlag:Lt}=H;if(Lt&6){Y(H.component.subTree,J,yt,wt);return}if(Lt&128){H.suspense.move(J,yt,wt);return}if(Lt&64){ne.move(H,J,yt,At);return}if(ne===_n){r(Ht,J,yt);for(let te=0;te<Dt.length;te++)Y(Dt[te],J,yt,wt);r(H.anchor,J,yt);return}if(ne===sh){Q(H,J,yt);return}if(wt!==2&&Lt&1&&Zt)if(wt===0)Zt.beforeEnter(Ht),r(Ht,J,yt),no(()=>Zt.enter(Ht),K);else{const{leave:te,delayLeave:xe,afterLeave:zt}=Zt,pe=()=>r(Ht,J,yt),qe=()=>{te(Ht,()=>{pe(),zt&&zt()})};xe?xe(Ht,pe,qe):qe()}else r(Ht,J,yt)},A=(H,J,yt,wt=!1,K=!1)=>{const{type:Ht,props:ne,ref:Zt,children:Dt,dynamicChildren:Lt,shapeFlag:ae,patchFlag:te,dirs:xe,cacheIndex:zt}=H;if(te===-2&&(K=!1),Zt!=null&&wh(Zt,null,yt,H,!0),zt!=null&&(J.renderCache[zt]=void 0),ae&256){J.ctx.deactivate(H);return}const pe=ae&1&&xe,qe=!uc(H);let He;if(qe&&(He=ne&&ne.onVnodeBeforeUnmount)&&ga(He,J,H),ae&6)lt(H.component,yt,wt);else{if(ae&128){H.suspense.unmount(yt,wt);return}pe&&zl(H,null,J,"beforeUnmount"),ae&64?H.type.remove(H,J,yt,At,wt):Lt&&!Lt.hasOnce&&(Ht!==_n||te>0&&te&64)?ct(Lt,J,yt,!1,!0):(Ht===_n&&te&384||!K&&ae&16)&&ct(Dt,J,yt),wt&&U(H)}(qe&&(He=ne&&ne.onVnodeUnmounted)||pe)&&no(()=>{He&&ga(He,J,H),pe&&zl(H,null,J,"unmounted")},yt)},U=H=>{const{type:J,el:yt,anchor:wt,transition:K}=H;if(J===_n){et(yt,wt);return}if(J===sh){mt(H);return}const Ht=()=>{o(yt),K&&!K.persisted&&K.afterLeave&&K.afterLeave()};if(H.shapeFlag&1&&K&&!K.persisted){const{leave:ne,delayLeave:Zt}=K,Dt=()=>ne(yt,Ht);Zt?Zt(H.el,Ht,Dt):Dt()}else Ht()},et=(H,J)=>{let yt;for(;H!==J;)yt=S(H),o(H),H=yt;o(J)},lt=(H,J,yt)=>{const{bum:wt,scope:K,job:Ht,subTree:ne,um:Zt,m:Dt,a:Lt}=H;kp(Dt),kp(Lt),wt&&rh(wt),K.stop(),Ht&&(Ht.flags|=8,A(ne,H,J,yt)),Zt&&no(Zt,J),no(()=>{H.isUnmounted=!0},J),J&&J.pendingBranch&&!J.isUnmounted&&H.asyncDep&&!H.asyncResolved&&H.suspenseId===J.pendingId&&(J.deps--,J.deps===0&&J.resolve())},ct=(H,J,yt,wt=!1,K=!1,Ht=0)=>{for(let ne=Ht;ne<H.length;ne++)A(H[ne],J,yt,wt,K)},tt=H=>{if(H.shapeFlag&6)return tt(H.component.subTree);if(H.shapeFlag&128)return H.suspense.next();const J=S(H.anchor||H.el),yt=J&&J[ay];return yt?S(yt):J};let ft=!1;const ht=(H,J,yt)=>{H==null?J._vnode&&A(J._vnode,null,null,!0):D(J._vnode||null,H,J,null,null,null,yt),J._vnode=H,ft||(ft=!0,vp(),Kg(),ft=!1)},At={p:D,um:A,m:Y,r:U,mt:Et,mc:vt,pc:O,pbc:Ut,n:tt,o:t};return{render:ht,hydrate:void 0,createApp:Ty(ht)}}function Lf({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Ul({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function qy(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function ym(t,e,n=!1){const r=t.children,o=e.children;if(fn(r)&&fn(o))for(let a=0;a<r.length;a++){const u=r[a];let f=o[a];f.shapeFlag&1&&!f.dynamicChildren&&((f.patchFlag<=0||f.patchFlag===32)&&(f=o[a]=wl(o[a]),f.el=u.el),!n&&f.patchFlag!==-2&&ym(u,f)),f.type===Hh&&(f.el=u.el)}}function $y(t){const e=t.slice(),n=[0];let r,o,a,u,f;const p=t.length;for(r=0;r<p;r++){const v=t[r];if(v!==0){if(o=n[n.length-1],t[o]<v){e[r]=o,n.push(r);continue}for(a=0,u=n.length-1;a<u;)f=a+u>>1,t[n[f]]<v?a=f+1:u=f;v<t[n[a]]&&(a>0&&(e[r]=n[a-1]),n[a]=r)}}for(a=n.length,u=n[a-1];a-- >0;)n[a]=u,u=e[u];return n}function _m(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:_m(e)}function kp(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Vy=Symbol.for("v-scx"),Hy=()=>Po(Vy);function zi(t,e,n){return bm(t,e,n)}function bm(t,e,n=gr){const{immediate:r,deep:o,flush:a,once:u}=n,f=Ti({},n),p=e&&r||!e&&a!=="post";let v;if(Lc){if(a==="sync"){const x=Hy();v=x.__watcherHandles||(x.__watcherHandles=[])}else if(!p){const x=()=>{};return x.stop=wa,x.resume=wa,x.pause=wa,x}}const w=Bi;f.call=(x,I,D)=>Jo(x,w,I,D);let b=!1;a==="post"?f.scheduler=x=>{no(x,w&&w.suspense)}:a!=="sync"&&(b=!0,f.scheduler=(x,I)=>{I?x():$d(x)}),f.augmentJob=x=>{e&&(x.flags|=4),b&&(x.flags|=2,w&&(x.id=w.uid,x.i=w))};const S=ry(t,e,f);return Lc&&(v?v.push(S):p&&S()),S}function Gy(t,e,n){const r=this.proxy,o=Xr(t)?t.includes(".")?wm(r,t):()=>r[t]:t.bind(r,r);let a;En(e)?a=e:(a=e.handler,n=e);const u=Nc(this),f=bm(o,a.bind(r),n);return u(),f}function wm(t,e){const n=e.split(".");return()=>{let r=t;for(let o=0;o<n.length&&r;o++)r=r[n[o]];return r}}const Wy=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Eo(e)}Modifiers`]||t[`${ou(e)}Modifiers`];function Zy(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||gr;let o=n;const a=e.startsWith("update:"),u=a&&Wy(r,e.slice(7));u&&(u.trim&&(o=n.map(w=>Xr(w)?w.trim():w)),u.number&&(o=n.map(mh)));let f,p=r[f=mf(e)]||r[f=mf(Eo(e))];!p&&a&&(p=r[f=mf(ou(e))]),p&&Jo(p,t,6,o);const v=r[f+"Once"];if(v){if(!t.emitted)t.emitted={};else if(t.emitted[f])return;t.emitted[f]=!0,Jo(v,t,6,o)}}function xm(t,e,n=!1){const r=e.emitsCache,o=r.get(t);if(o!==void 0)return o;const a=t.emits;let u={},f=!1;if(!En(t)){const p=v=>{const w=xm(v,e,!0);w&&(f=!0,Ti(u,w))};!n&&e.mixins.length&&e.mixins.forEach(p),t.extends&&p(t.extends),t.mixins&&t.mixins.forEach(p)}return!a&&!f?(mr(t)&&r.set(t,null),null):(fn(a)?a.forEach(p=>u[p]=null):Ti(u,a),mr(t)&&r.set(t,u),u)}function Vh(t,e){return!t||!Nh(e)?!1:(e=e.slice(2).replace(/Once$/,""),sr(t,e[0].toLowerCase()+e.slice(1))||sr(t,ou(e))||sr(t,e))}function Pp(t){const{type:e,vnode:n,proxy:r,withProxy:o,propsOptions:[a],slots:u,attrs:f,emit:p,render:v,renderCache:w,props:b,data:S,setupState:x,ctx:I,inheritAttrs:D}=t,j=bh(t);let z,W;try{if(n.shapeFlag&4){const mt=o||r,Tt=mt;z=_a(v.call(Tt,mt,w,b,x,S,I)),W=f}else{const mt=e;z=_a(mt.length>1?mt(b,{attrs:f,slots:u,emit:p}):mt(b,null)),W=e.props?f:Ky(f)}}catch(mt){hc.length=0,jh(mt,t,1),z=Sr(Fs)}let Q=z;if(W&&D!==!1){const mt=Object.keys(W),{shapeFlag:Tt}=Q;mt.length&&Tt&7&&(a&&mt.some(Bd)&&(W=Jy(W,a)),Q=Sl(Q,W,!1,!0))}return n.dirs&&(Q=Sl(Q,null,!1,!0),Q.dirs=Q.dirs?Q.dirs.concat(n.dirs):n.dirs),n.transition&&wc(Q,n.transition),z=Q,bh(j),z}const Ky=t=>{let e;for(const n in t)(n==="class"||n==="style"||Nh(n))&&((e||(e={}))[n]=t[n]);return e},Jy=(t,e)=>{const n={};for(const r in t)(!Bd(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function Yy(t,e,n){const{props:r,children:o,component:a}=t,{props:u,children:f,patchFlag:p}=e,v=a.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&p>=0){if(p&1024)return!0;if(p&16)return r?Sp(r,u,v):!!u;if(p&8){const w=e.dynamicProps;for(let b=0;b<w.length;b++){const S=w[b];if(u[S]!==r[S]&&!Vh(v,S))return!0}}}else return(o||f)&&(!f||!f.$stable)?!0:r===u?!1:r?u?Sp(r,u,v):!0:!!u;return!1}function Sp(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let o=0;o<r.length;o++){const a=r[o];if(e[a]!==t[a]&&!Vh(n,a))return!0}return!1}function Xy({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Lm=t=>t.__isSuspense;function Qy(t,e){e&&e.pendingBranch?fn(t)?e.effects.push(...t):e.effects.push(t):oy(t)}const _n=Symbol.for("v-fgt"),Hh=Symbol.for("v-txt"),Fs=Symbol.for("v-cmt"),sh=Symbol.for("v-stc"),hc=[];let ro=null;function ie(t=!1){hc.push(ro=t?null:[])}function t_(){hc.pop(),ro=hc[hc.length-1]||null}let xc=1;function Ep(t,e=!1){xc+=t,t<0&&ro&&e&&(ro.hasOnce=!0)}function Cm(t){return t.dynamicChildren=xc>0?ro||Au:null,t_(),xc>0&&ro&&ro.push(t),t}function ue(t,e,n,r,o,a){return Cm(B(t,e,n,r,o,a,!0))}function Ja(t,e,n,r,o){return Cm(Sr(t,e,n,r,o,!0))}function Lh(t){return t?t.__v_isVNode===!0:!1}function Wl(t,e){return t.type===e.type&&t.key===e.key}const km=({key:t})=>t??null,oh=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Xr(t)||Yr(t)||En(t)?{i:ms,r:t,k:e,f:!!n}:t:null);function B(t,e=null,n=null,r=0,o=null,a=t===_n?0:1,u=!1,f=!1){const p={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&km(e),ref:e&&oh(e),scopeId:Yg,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:ms};return f?(Hd(p,n),a&128&&t.normalize(p)):n&&(p.shapeFlag|=Xr(n)?8:16),xc>0&&!u&&ro&&(p.patchFlag>0||a&6)&&p.patchFlag!==32&&ro.push(p),p}const Sr=e_;function e_(t,e=null,n=null,r=0,o=null,a=!1){if((!t||t===Ly)&&(t=Fs),Lh(t)){const f=Sl(t,e,!0);return n&&Hd(f,n),xc>0&&!a&&ro&&(f.shapeFlag&6?ro[ro.indexOf(t)]=f:ro.push(f)),f.patchFlag=-2,f}if(d_(t)&&(t=t.__vccOpts),e){e=n_(e);let{class:f,style:p}=e;f&&!Xr(f)&&(e.class=zr(f)),mr(p)&&(Ud(p)&&!fn(p)&&(p=Ti({},p)),e.style=Ih(p))}const u=Xr(t)?1:Lm(t)?128:Xg(t)?64:mr(t)?4:En(t)?2:0;return B(t,e,n,r,o,u,a,!0)}function n_(t){return t?Ud(t)||hm(t)?Ti({},t):t:null}function Sl(t,e,n=!1,r=!1){const{props:o,ref:a,patchFlag:u,children:f,transition:p}=t,v=e?r_(o||{},e):o,w={__v_isVNode:!0,__v_skip:!0,type:t.type,props:v,key:v&&km(v),ref:e&&e.ref?n&&a?fn(a)?a.concat(oh(e)):[a,oh(e)]:oh(e):a,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:f,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==_n?u===-1?16:u|16:u,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:p,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Sl(t.ssContent),ssFallback:t.ssFallback&&Sl(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return p&&r&&wc(w,p.clone(w)),w}function Ur(t=" ",e=0){return Sr(Hh,null,t,e)}function fc(t,e){const n=Sr(sh,null,t);return n.staticCount=e,n}function nn(t="",e=!1){return e?(ie(),Ja(Fs,null,t)):Sr(Fs,null,t)}function _a(t){return t==null||typeof t=="boolean"?Sr(Fs):fn(t)?Sr(_n,null,t.slice()):Lh(t)?wl(t):Sr(Hh,null,String(t))}function wl(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Sl(t)}function Hd(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(fn(e))n=16;else if(typeof e=="object")if(r&65){const o=e.default;o&&(o._c&&(o._d=!1),Hd(t,o()),o._c&&(o._d=!0));return}else{n=32;const o=e._;!o&&!hm(e)?e._ctx=ms:o===3&&ms&&(ms.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else En(e)?(e={default:e,_ctx:ms},n=32):(e=String(e),r&64?(n=16,e=[Ur(e)]):n=8);t.children=e,t.shapeFlag|=n}function r_(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const o in r)if(o==="class")e.class!==r.class&&(e.class=zr([e.class,r.class]));else if(o==="style")e.style=Ih([e.style,r.style]);else if(Nh(o)){const a=e[o],u=r[o];u&&a!==u&&!(fn(a)&&a.includes(u))&&(e[o]=a?[].concat(a,u):u)}else o!==""&&(e[o]=r[o])}return e}function ga(t,e,n,r=null){Jo(t,e,7,[n,r])}const i_=lm();let s_=0;function o_(t,e,n){const r=t.type,o=(e?e.appContext:t.appContext)||i_,a={uid:s_++,vnode:t,type:r,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Pg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:dm(r,o),emitsOptions:xm(r,o),emit:null,emitted:null,propsDefaults:gr,inheritAttrs:r.inheritAttrs,ctx:gr,data:gr,props:gr,attrs:gr,slots:gr,refs:gr,setupState:gr,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=Zy.bind(null,a),t.ce&&t.ce(a),a}let Bi=null;const a_=()=>Bi||ms;let Ch,nd;{const t=Rh(),e=(n,r)=>{let o;return(o=t[n])||(o=t[n]=[]),o.push(r),a=>{o.length>1?o.forEach(u=>u(a)):o[0](a)}};Ch=e("__VUE_INSTANCE_SETTERS__",n=>Bi=n),nd=e("__VUE_SSR_SETTERS__",n=>Lc=n)}const Nc=t=>{const e=Bi;return Ch(t),t.scope.on(),()=>{t.scope.off(),Ch(e)}},Ap=()=>{Bi&&Bi.scope.off(),Ch(null)};function Pm(t){return t.vnode.shapeFlag&4}let Lc=!1;function l_(t,e=!1,n=!1){e&&nd(e);const{props:r,children:o}=t.vnode,a=Pm(t);Dy(t,r,a,e),Fy(t,o,n);const u=a?u_(t,e):void 0;return e&&nd(!1),u}function u_(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,ky);const{setup:r}=n;if(r){Bl();const o=t.setupContext=r.length>1?h_(t):null,a=Nc(t),u=Tc(r,t,0,[t.props,o]),f=_g(u);if(Tl(),a(),(f||t.sp)&&!uc(t)&&im(t),f){if(u.then(Ap,Ap),e)return u.then(p=>{Mp(t,p)}).catch(p=>{jh(p,t,0)});t.asyncDep=u}else Mp(t,u)}else Sm(t)}function Mp(t,e,n){En(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:mr(e)&&(t.setupState=Gg(e)),Sm(t)}function Sm(t,e,n){const r=t.type;t.render||(t.render=r.render||wa);{const o=Nc(t);Bl();try{Py(t)}finally{Tl(),o()}}}const c_={get(t,e){return ns(t,"get",""),t[e]}};function h_(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,c_),slots:t.slots,emit:t.emit,expose:e}}function Gh(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Gg(qd(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in cc)return cc[n](t)},has(e,n){return n in e||n in cc}})):t.proxy}function f_(t,e=!0){return En(t)?t.displayName||t.name:t.name||e&&t.__name}function d_(t){return En(t)&&"__vccOpts"in t}const Fn=(t,e)=>ey(t,e,Lc);function Gd(t,e,n){const r=arguments.length;return r===2?mr(e)&&!fn(e)?Lh(e)?Sr(t,null,[e]):Sr(t,e):Sr(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Lh(n)&&(n=[n]),Sr(t,e,n))}const p_="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let rd;const Bp=typeof window<"u"&&window.trustedTypes;if(Bp)try{rd=Bp.createPolicy("vue",{createHTML:t=>t})}catch{}const Em=rd?t=>rd.createHTML(t):t=>t,g_="http://www.w3.org/2000/svg",m_="http://www.w3.org/1998/Math/MathML",Ha=typeof document<"u"?document:null,Tp=Ha&&Ha.createElement("template"),v_={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const o=e==="svg"?Ha.createElementNS(g_,t):e==="mathml"?Ha.createElementNS(m_,t):n?Ha.createElement(t,{is:n}):Ha.createElement(t);return t==="select"&&r&&r.multiple!=null&&o.setAttribute("multiple",r.multiple),o},createText:t=>Ha.createTextNode(t),createComment:t=>Ha.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ha.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,o,a){const u=n?n.previousSibling:e.lastChild;if(o&&(o===a||o.nextSibling))for(;e.insertBefore(o.cloneNode(!0),n),!(o===a||!(o=o.nextSibling)););else{Tp.innerHTML=Em(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const f=Tp.content;if(r==="svg"||r==="mathml"){const p=f.firstChild;for(;p.firstChild;)f.appendChild(p.firstChild);f.removeChild(p)}e.insertBefore(f,n)}return[u?u.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},pl="transition",Ju="animation",Cc=Symbol("_vtc"),Am={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},y_=Ti({},Qg,Am),__=t=>(t.displayName="Transition",t.props=y_,t),Np=__((t,{slots:e})=>Gd(cy,b_(t),e)),ql=(t,e=[])=>{fn(t)?t.forEach(n=>n(...e)):t&&t(...e)},Dp=t=>t?fn(t)?t.some(e=>e.length>1):t.length>1:!1;function b_(t){const e={};for(const V in t)V in Am||(e[V]=t[V]);if(t.css===!1)return e;const{name:n="v",type:r,duration:o,enterFromClass:a=`${n}-enter-from`,enterActiveClass:u=`${n}-enter-active`,enterToClass:f=`${n}-enter-to`,appearFromClass:p=a,appearActiveClass:v=u,appearToClass:w=f,leaveFromClass:b=`${n}-leave-from`,leaveActiveClass:S=`${n}-leave-active`,leaveToClass:x=`${n}-leave-to`}=t,I=w_(o),D=I&&I[0],j=I&&I[1],{onBeforeEnter:z,onEnter:W,onEnterCancelled:Q,onLeave:mt,onLeaveCancelled:Tt,onBeforeAppear:Nt=z,onAppear:Ft=W,onAppearCancelled:vt=Q}=e,Ct=(V,St,Et,M)=>{V._enterCancelled=M,$l(V,St?w:f),$l(V,St?v:u),Et&&Et()},Ut=(V,St)=>{V._isLeaving=!1,$l(V,b),$l(V,x),$l(V,S),St&&St()},Z=V=>(St,Et)=>{const M=V?Ft:W,$=()=>Ct(St,V,Et);ql(M,[St,$]),Op(()=>{$l(St,V?p:a),qa(St,V?w:f),Dp(M)||Rp(St,r,D,$)})};return Ti(e,{onBeforeEnter(V){ql(z,[V]),qa(V,a),qa(V,u)},onBeforeAppear(V){ql(Nt,[V]),qa(V,p),qa(V,v)},onEnter:Z(!1),onAppear:Z(!0),onLeave(V,St){V._isLeaving=!0;const Et=()=>Ut(V,St);qa(V,b),V._enterCancelled?(qa(V,S),jp()):(jp(),qa(V,S)),Op(()=>{V._isLeaving&&($l(V,b),qa(V,x),Dp(mt)||Rp(V,r,j,Et))}),ql(mt,[V,Et])},onEnterCancelled(V){Ct(V,!1,void 0,!0),ql(Q,[V])},onAppearCancelled(V){Ct(V,!0,void 0,!0),ql(vt,[V])},onLeaveCancelled(V){Ut(V),ql(Tt,[V])}})}function w_(t){if(t==null)return null;if(mr(t))return[Cf(t.enter),Cf(t.leave)];{const e=Cf(t);return[e,e]}}function Cf(t){return bv(t)}function qa(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Cc]||(t[Cc]=new Set)).add(e)}function $l(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Cc];n&&(n.delete(e),n.size||(t[Cc]=void 0))}function Op(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let x_=0;function Rp(t,e,n,r){const o=t._endId=++x_,a=()=>{o===t._endId&&r()};if(n!=null)return setTimeout(a,n);const{type:u,timeout:f,propCount:p}=L_(t,e);if(!u)return r();const v=u+"end";let w=0;const b=()=>{t.removeEventListener(v,S),a()},S=x=>{x.target===t&&++w>=p&&b()};setTimeout(()=>{w<p&&b()},f+1),t.addEventListener(v,S)}function L_(t,e){const n=window.getComputedStyle(t),r=I=>(n[I]||"").split(", "),o=r(`${pl}Delay`),a=r(`${pl}Duration`),u=Ip(o,a),f=r(`${Ju}Delay`),p=r(`${Ju}Duration`),v=Ip(f,p);let w=null,b=0,S=0;e===pl?u>0&&(w=pl,b=u,S=a.length):e===Ju?v>0&&(w=Ju,b=v,S=p.length):(b=Math.max(u,v),w=b>0?u>v?pl:Ju:null,S=w?w===pl?a.length:p.length:0);const x=w===pl&&/\b(transform|all)(,|$)/.test(r(`${pl}Property`).toString());return{type:w,timeout:b,propCount:S,hasTransform:x}}function Ip(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>Fp(n)+Fp(t[r])))}function Fp(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function jp(){return document.body.offsetHeight}function C_(t,e,n){const r=t[Cc];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const kh=Symbol("_vod"),Mm=Symbol("_vsh"),zp={beforeMount(t,{value:e},{transition:n}){t[kh]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Yu(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Yu(t,!0),r.enter(t)):r.leave(t,()=>{Yu(t,!1)}):Yu(t,e))},beforeUnmount(t,{value:e}){Yu(t,e)}};function Yu(t,e){t.style.display=e?t[kh]:"none",t[Mm]=!e}const k_=Symbol(""),P_=/(^|;)\s*display\s*:/;function S_(t,e,n){const r=t.style,o=Xr(n);let a=!1;if(n&&!o){if(e)if(Xr(e))for(const u of e.split(";")){const f=u.slice(0,u.indexOf(":")).trim();n[f]==null&&ah(r,f,"")}else for(const u in e)n[u]==null&&ah(r,u,"");for(const u in n)u==="display"&&(a=!0),ah(r,u,n[u])}else if(o){if(e!==n){const u=r[k_];u&&(n+=";"+u),r.cssText=n,a=P_.test(n)}}else e&&t.removeAttribute("style");kh in t&&(t[kh]=a?r.display:"",t[Mm]&&(r.display="none"))}const Up=/\s*!important$/;function ah(t,e,n){if(fn(n))n.forEach(r=>ah(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=E_(t,e);Up.test(n)?t.setProperty(ou(r),n.replace(Up,""),"important"):t[r]=n}}const qp=["Webkit","Moz","ms"],kf={};function E_(t,e){const n=kf[e];if(n)return n;let r=Eo(e);if(r!=="filter"&&r in t)return kf[e]=r;r=Oh(r);for(let o=0;o<qp.length;o++){const a=qp[o]+r;if(a in t)return kf[e]=a}return e}const $p="http://www.w3.org/1999/xlink";function Vp(t,e,n,r,o,a=Pv(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS($p,e.slice(6,e.length)):t.setAttributeNS($p,e,n):n==null||a&&!Lg(n)?t.removeAttribute(e):t.setAttribute(e,a?"":La(n)?String(n):n)}function Hp(t,e,n,r,o){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Em(n):n);return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const f=a==="OPTION"?t.getAttribute("value")||"":t.value,p=n==null?t.type==="checkbox"?"on":"":String(n);(f!==p||!("_value"in t))&&(t.value=p),n==null&&t.removeAttribute(e),t._value=n;return}let u=!1;if(n===""||n==null){const f=typeof t[e];f==="boolean"?n=Lg(n):n==null&&f==="string"?(n="",u=!0):f==="number"&&(n=0,u=!0)}try{t[e]=n}catch{}u&&t.removeAttribute(o||e)}function Ka(t,e,n,r){t.addEventListener(e,n,r)}function A_(t,e,n,r){t.removeEventListener(e,n,r)}const Gp=Symbol("_vei");function M_(t,e,n,r,o=null){const a=t[Gp]||(t[Gp]={}),u=a[e];if(r&&u)u.value=r;else{const[f,p]=B_(e);if(r){const v=a[e]=D_(r,o);Ka(t,f,v,p)}else u&&(A_(t,f,u,p),a[e]=void 0)}}const Wp=/(?:Once|Passive|Capture)$/;function B_(t){let e;if(Wp.test(t)){e={};let r;for(;r=t.match(Wp);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ou(t.slice(2)),e]}let Pf=0;const T_=Promise.resolve(),N_=()=>Pf||(T_.then(()=>Pf=0),Pf=Date.now());function D_(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Jo(O_(r,n.value),e,5,[r])};return n.value=t,n.attached=N_(),n}function O_(t,e){if(fn(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>o=>!o._stopped&&r&&r(o))}else return e}const Zp=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,R_=(t,e,n,r,o,a)=>{const u=o==="svg";e==="class"?C_(t,r,u):e==="style"?S_(t,n,r):Nh(e)?Bd(e)||M_(t,e,n,r,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):I_(t,e,r,u))?(Hp(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Vp(t,e,r,u,a,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Xr(r))?Hp(t,Eo(e),r,a,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Vp(t,e,r,u))};function I_(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Zp(e)&&En(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const o=t.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return Zp(e)&&Xr(n)?!1:e in t}const El=t=>{const e=t.props["onUpdate:modelValue"]||!1;return fn(e)?n=>rh(e,n):e};function F_(t){t.target.composing=!0}function Kp(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const So=Symbol("_assign"),fr={created(t,{modifiers:{lazy:e,trim:n,number:r}},o){t[So]=El(o);const a=r||o.props&&o.props.type==="number";Ka(t,e?"change":"input",u=>{if(u.target.composing)return;let f=t.value;n&&(f=f.trim()),a&&(f=mh(f)),t[So](f)}),n&&Ka(t,"change",()=>{t.value=t.value.trim()}),e||(Ka(t,"compositionstart",F_),Ka(t,"compositionend",Kp),Ka(t,"change",Kp))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:o,number:a}},u){if(t[So]=El(u),t.composing)return;const f=(a||t.type==="number")&&!/^0\d/.test(t.value)?mh(t.value):t.value,p=e??"";f!==p&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||o&&t.value.trim()===p)||(t.value=p))}},Bm={deep:!0,created(t,e,n){t[So]=El(n),Ka(t,"change",()=>{const r=t._modelValue,o=Ru(t),a=t.checked,u=t[So];if(fn(r)){const f=Dd(r,o),p=f!==-1;if(a&&!p)u(r.concat(o));else if(!a&&p){const v=[...r];v.splice(f,1),u(v)}}else if(zu(r)){const f=new Set(r);a?f.add(o):f.delete(o),u(f)}else u(Tm(t,a))})},mounted:Jp,beforeUpdate(t,e,n){t[So]=El(n),Jp(t,e,n)}};function Jp(t,{value:e,oldValue:n},r){t._modelValue=e;let o;if(fn(e))o=Dd(e,r.props.value)>-1;else if(zu(e))o=e.has(r.props.value);else{if(e===n)return;o=ru(e,Tm(t,!0))}t.checked!==o&&(t.checked=o)}const j_={created(t,{value:e},n){t.checked=ru(e,n.props.value),t[So]=El(n),Ka(t,"change",()=>{t[So](Ru(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[So]=El(r),e!==n&&(t.checked=ru(e,r.props.value))}},js={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const o=zu(e);Ka(t,"change",()=>{const a=Array.prototype.filter.call(t.options,u=>u.selected).map(u=>n?mh(Ru(u)):Ru(u));t[So](t.multiple?o?new Set(a):a:a[0]),t._assigning=!0,Ai(()=>{t._assigning=!1})}),t[So]=El(r)},mounted(t,{value:e}){Yp(t,e)},beforeUpdate(t,e,n){t[So]=El(n)},updated(t,{value:e}){t._assigning||Yp(t,e)}};function Yp(t,e){const n=t.multiple,r=fn(e);if(!(n&&!r&&!zu(e))){for(let o=0,a=t.options.length;o<a;o++){const u=t.options[o],f=Ru(u);if(n)if(r){const p=typeof f;p==="string"||p==="number"?u.selected=e.some(v=>String(v)===String(f)):u.selected=Dd(e,f)>-1}else u.selected=e.has(f);else if(ru(Ru(u),e)){t.selectedIndex!==o&&(t.selectedIndex=o);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Ru(t){return"_value"in t?t._value:t.value}function Tm(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const z_={created(t,e,n){Yc(t,e,n,null,"created")},mounted(t,e,n){Yc(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){Yc(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){Yc(t,e,n,r,"updated")}};function U_(t,e){switch(t){case"SELECT":return js;case"TEXTAREA":return fr;default:switch(e){case"checkbox":return Bm;case"radio":return j_;default:return fr}}}function Yc(t,e,n,r,o){const u=U_(t.tagName,n.props&&n.props.type)[o];u&&u(t,e,n,r)}const q_=["ctrl","shift","alt","meta"],$_={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>q_.some(n=>t[`${n}Key`]&&!e.includes(n))},Wh=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(o,...a)=>{for(let u=0;u<e.length;u++){const f=$_[e[u]];if(f&&f(o,e))return}return t(o,...a)})},V_=Ti({patchProp:R_},v_);let Xp;function H_(){return Xp||(Xp=zy(V_))}const G_=(...t)=>{const e=H_().createApp(...t),{mount:n}=e;return e.mount=r=>{const o=Z_(r);if(!o)return;const a=e._component;!En(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const u=n(o,!1,W_(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),u},e};function W_(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Z_(t){return Xr(t)?document.querySelector(t):t}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Nm;const Zh=t=>Nm=t,Dm=Symbol();function id(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var dc;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(dc||(dc={}));function K_(){const t=Sg(!0),e=t.run(()=>Ie({}));let n=[],r=[];const o=qd({install(a){Zh(o),o._a=a,a.provide(Dm,o),a.config.globalProperties.$pinia=o,r.forEach(u=>n.push(u)),r=[]},use(a){return this._a?n.push(a):r.push(a),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return o}const Om=()=>{};function Qp(t,e,n,r=Om){t.push(e);const o=()=>{const a=t.indexOf(e);a>-1&&(t.splice(a,1),r())};return!n&&Eg()&&Ev(o),o}function vu(t,...e){t.slice().forEach(n=>{n(...e)})}const J_=t=>t(),t0=Symbol(),Sf=Symbol();function sd(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],o=t[n];id(o)&&id(r)&&t.hasOwnProperty(n)&&!Yr(r)&&!Pl(r)?t[n]=sd(o,r):t[n]=r}return t}const Y_=Symbol();function X_(t){return!id(t)||!t.hasOwnProperty(Y_)}const{assign:yl}=Object;function Q_(t){return!!(Yr(t)&&t.effect)}function t2(t,e,n,r){const{state:o,actions:a,getters:u}=e,f=n.state.value[t];let p;function v(){f||(n.state.value[t]=o?o():{});const w=Yv(n.state.value[t]);return yl(w,a,Object.keys(u||{}).reduce((b,S)=>(b[S]=qd(Fn(()=>{Zh(n);const x=n._s.get(t);return u[S].call(x,x)})),b),{}))}return p=Rm(t,v,e,n,r,!0),p}function Rm(t,e,n={},r,o,a){let u;const f=yl({actions:{}},n),p={deep:!0};let v,w,b=[],S=[],x;const I=r.state.value[t];!a&&!I&&(r.state.value[t]={}),Ie({});let D;function j(vt){let Ct;v=w=!1,typeof vt=="function"?(vt(r.state.value[t]),Ct={type:dc.patchFunction,storeId:t,events:x}):(sd(r.state.value[t],vt),Ct={type:dc.patchObject,payload:vt,storeId:t,events:x});const Ut=D=Symbol();Ai().then(()=>{D===Ut&&(v=!0)}),w=!0,vu(b,Ct,r.state.value[t])}const z=a?function(){const{state:Ct}=n,Ut=Ct?Ct():{};this.$patch(Z=>{yl(Z,Ut)})}:Om;function W(){u.stop(),b=[],S=[],r._s.delete(t)}const Q=(vt,Ct="")=>{if(t0 in vt)return vt[Sf]=Ct,vt;const Ut=function(){Zh(r);const Z=Array.from(arguments),V=[],St=[];function Et(q){V.push(q)}function M(q){St.push(q)}vu(S,{args:Z,name:Ut[Sf],store:Tt,after:Et,onError:M});let $;try{$=vt.apply(this&&this.$id===t?this:Tt,Z)}catch(q){throw vu(St,q),q}return $ instanceof Promise?$.then(q=>(vu(V,q),q)).catch(q=>(vu(St,q),Promise.reject(q))):(vu(V,$),$)};return Ut[t0]=!0,Ut[Sf]=Ct,Ut},mt={_p:r,$id:t,$onAction:Qp.bind(null,S),$patch:j,$reset:z,$subscribe(vt,Ct={}){const Ut=Qp(b,vt,Ct.detached,()=>Z()),Z=u.run(()=>zi(()=>r.state.value[t],V=>{(Ct.flush==="sync"?w:v)&&vt({storeId:t,type:dc.direct,events:x},V)},yl({},p,Ct)));return Ut},$dispose:W},Tt=Ya(mt);r._s.set(t,Tt);const Ft=(r._a&&r._a.runWithContext||J_)(()=>r._e.run(()=>(u=Sg()).run(()=>e({action:Q}))));for(const vt in Ft){const Ct=Ft[vt];if(Yr(Ct)&&!Q_(Ct)||Pl(Ct))a||(I&&X_(Ct)&&(Yr(Ct)?Ct.value=I[vt]:sd(Ct,I[vt])),r.state.value[t][vt]=Ct);else if(typeof Ct=="function"){const Ut=Q(Ct,vt);Ft[vt]=Ut,f.actions[vt]=Ct}}return yl(Tt,Ft),yl(Kn(Tt),Ft),Object.defineProperty(Tt,"$state",{get:()=>r.state.value[t],set:vt=>{j(Ct=>{yl(Ct,vt)})}}),r._p.forEach(vt=>{yl(Tt,u.run(()=>vt({store:Tt,app:r._a,pinia:r,options:f})))}),I&&a&&n.hydrate&&n.hydrate(Tt.$state,I),v=!0,w=!0,Tt}/*! #__NO_SIDE_EFFECTS__ */function Wd(t,e,n){let r,o;const a=typeof e=="function";typeof t=="string"?(r=t,o=a?n:e):(o=t,r=t.id);function u(f,p){const v=Ny();return f=f||(v?Po(Dm,null):null),f&&Zh(f),f=Nm,f._s.has(r)||(a?Rm(r,e,o,f):t2(r,o,f)),f._s.get(r)}return u.$id=r,u}function Im(t,e){return function(){return t.apply(e,arguments)}}const{toString:e2}=Object.prototype,{getPrototypeOf:Zd}=Object,Kh=(t=>e=>{const n=e2.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Xo=t=>(t=t.toLowerCase(),e=>Kh(e)===t),Jh=t=>e=>typeof e===t,{isArray:Uu}=Array,kc=Jh("undefined");function n2(t){return t!==null&&!kc(t)&&t.constructor!==null&&!kc(t.constructor)&&so(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Fm=Xo("ArrayBuffer");function r2(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Fm(t.buffer),e}const i2=Jh("string"),so=Jh("function"),jm=Jh("number"),Yh=t=>t!==null&&typeof t=="object",s2=t=>t===!0||t===!1,lh=t=>{if(Kh(t)!=="object")return!1;const e=Zd(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},o2=Xo("Date"),a2=Xo("File"),l2=Xo("Blob"),u2=Xo("FileList"),c2=t=>Yh(t)&&so(t.pipe),h2=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||so(t.append)&&((e=Kh(t))==="formdata"||e==="object"&&so(t.toString)&&t.toString()==="[object FormData]"))},f2=Xo("URLSearchParams"),[d2,p2,g2,m2]=["ReadableStream","Request","Response","Headers"].map(Xo),v2=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Dc(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,o;if(typeof t!="object"&&(t=[t]),Uu(t))for(r=0,o=t.length;r<o;r++)e.call(null,t[r],r,t);else{const a=n?Object.getOwnPropertyNames(t):Object.keys(t),u=a.length;let f;for(r=0;r<u;r++)f=a[r],e.call(null,t[f],f,t)}}function zm(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,o;for(;r-- >0;)if(o=n[r],e===o.toLowerCase())return o;return null}const Kl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Um=t=>!kc(t)&&t!==Kl;function od(){const{caseless:t}=Um(this)&&this||{},e={},n=(r,o)=>{const a=t&&zm(e,o)||o;lh(e[a])&&lh(r)?e[a]=od(e[a],r):lh(r)?e[a]=od({},r):Uu(r)?e[a]=r.slice():e[a]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&Dc(arguments[r],n);return e}const y2=(t,e,n,{allOwnKeys:r}={})=>(Dc(e,(o,a)=>{n&&so(o)?t[a]=Im(o,n):t[a]=o},{allOwnKeys:r}),t),_2=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),b2=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},w2=(t,e,n,r)=>{let o,a,u;const f={};if(e=e||{},t==null)return e;do{for(o=Object.getOwnPropertyNames(t),a=o.length;a-- >0;)u=o[a],(!r||r(u,t,e))&&!f[u]&&(e[u]=t[u],f[u]=!0);t=n!==!1&&Zd(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},x2=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},L2=t=>{if(!t)return null;if(Uu(t))return t;let e=t.length;if(!jm(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},C2=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Zd(Uint8Array)),k2=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let o;for(;(o=r.next())&&!o.done;){const a=o.value;e.call(t,a[0],a[1])}},P2=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},S2=Xo("HTMLFormElement"),E2=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,o){return r.toUpperCase()+o}),e0=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),A2=Xo("RegExp"),qm=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Dc(n,(o,a)=>{let u;(u=e(o,a,t))!==!1&&(r[a]=u||o)}),Object.defineProperties(t,r)},M2=t=>{qm(t,(e,n)=>{if(so(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(so(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},B2=(t,e)=>{const n={},r=o=>{o.forEach(a=>{n[a]=!0})};return Uu(t)?r(t):r(String(t).split(e)),n},T2=()=>{},N2=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,Ef="abcdefghijklmnopqrstuvwxyz",n0="0123456789",$m={DIGIT:n0,ALPHA:Ef,ALPHA_DIGIT:Ef+Ef.toUpperCase()+n0},D2=(t=16,e=$m.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function O2(t){return!!(t&&so(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const R2=t=>{const e=new Array(10),n=(r,o)=>{if(Yh(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[o]=r;const a=Uu(r)?[]:{};return Dc(r,(u,f)=>{const p=n(u,o+1);!kc(p)&&(a[f]=p)}),e[o]=void 0,a}}return r};return n(t,0)},I2=Xo("AsyncFunction"),F2=t=>t&&(Yh(t)||so(t))&&so(t.then)&&so(t.catch),Vm=((t,e)=>t?setImmediate:e?((n,r)=>(Kl.addEventListener("message",({source:o,data:a})=>{o===Kl&&a===n&&r.length&&r.shift()()},!1),o=>{r.push(o),Kl.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",so(Kl.postMessage)),j2=typeof queueMicrotask<"u"?queueMicrotask.bind(Kl):typeof process<"u"&&process.nextTick||Vm,Le={isArray:Uu,isArrayBuffer:Fm,isBuffer:n2,isFormData:h2,isArrayBufferView:r2,isString:i2,isNumber:jm,isBoolean:s2,isObject:Yh,isPlainObject:lh,isReadableStream:d2,isRequest:p2,isResponse:g2,isHeaders:m2,isUndefined:kc,isDate:o2,isFile:a2,isBlob:l2,isRegExp:A2,isFunction:so,isStream:c2,isURLSearchParams:f2,isTypedArray:C2,isFileList:u2,forEach:Dc,merge:od,extend:y2,trim:v2,stripBOM:_2,inherits:b2,toFlatObject:w2,kindOf:Kh,kindOfTest:Xo,endsWith:x2,toArray:L2,forEachEntry:k2,matchAll:P2,isHTMLForm:S2,hasOwnProperty:e0,hasOwnProp:e0,reduceDescriptors:qm,freezeMethods:M2,toObjectSet:B2,toCamelCase:E2,noop:T2,toFiniteNumber:N2,findKey:zm,global:Kl,isContextDefined:Um,ALPHABET:$m,generateString:D2,isSpecCompliantForm:O2,toJSONObject:R2,isAsyncFn:I2,isThenable:F2,setImmediate:Vm,asap:j2};function Bn(t,e,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}Le.inherits(Bn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Le.toJSONObject(this.config),code:this.code,status:this.status}}});const Hm=Bn.prototype,Gm={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Gm[t]={value:t}});Object.defineProperties(Bn,Gm);Object.defineProperty(Hm,"isAxiosError",{value:!0});Bn.from=(t,e,n,r,o,a)=>{const u=Object.create(Hm);return Le.toFlatObject(t,u,function(p){return p!==Error.prototype},f=>f!=="isAxiosError"),Bn.call(u,t.message,e,n,r,o),u.cause=t,u.name=t.name,a&&Object.assign(u,a),u};const z2=null;function ad(t){return Le.isPlainObject(t)||Le.isArray(t)}function Wm(t){return Le.endsWith(t,"[]")?t.slice(0,-2):t}function r0(t,e,n){return t?t.concat(e).map(function(o,a){return o=Wm(o),!n&&a?"["+o+"]":o}).join(n?".":""):e}function U2(t){return Le.isArray(t)&&!t.some(ad)}const q2=Le.toFlatObject(Le,{},null,function(e){return/^is[A-Z]/.test(e)});function Xh(t,e,n){if(!Le.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Le.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(D,j){return!Le.isUndefined(j[D])});const r=n.metaTokens,o=n.visitor||w,a=n.dots,u=n.indexes,p=(n.Blob||typeof Blob<"u"&&Blob)&&Le.isSpecCompliantForm(e);if(!Le.isFunction(o))throw new TypeError("visitor must be a function");function v(I){if(I===null)return"";if(Le.isDate(I))return I.toISOString();if(!p&&Le.isBlob(I))throw new Bn("Blob is not supported. Use a Buffer instead.");return Le.isArrayBuffer(I)||Le.isTypedArray(I)?p&&typeof Blob=="function"?new Blob([I]):Buffer.from(I):I}function w(I,D,j){let z=I;if(I&&!j&&typeof I=="object"){if(Le.endsWith(D,"{}"))D=r?D:D.slice(0,-2),I=JSON.stringify(I);else if(Le.isArray(I)&&U2(I)||(Le.isFileList(I)||Le.endsWith(D,"[]"))&&(z=Le.toArray(I)))return D=Wm(D),z.forEach(function(Q,mt){!(Le.isUndefined(Q)||Q===null)&&e.append(u===!0?r0([D],mt,a):u===null?D:D+"[]",v(Q))}),!1}return ad(I)?!0:(e.append(r0(j,D,a),v(I)),!1)}const b=[],S=Object.assign(q2,{defaultVisitor:w,convertValue:v,isVisitable:ad});function x(I,D){if(!Le.isUndefined(I)){if(b.indexOf(I)!==-1)throw Error("Circular reference detected in "+D.join("."));b.push(I),Le.forEach(I,function(z,W){(!(Le.isUndefined(z)||z===null)&&o.call(e,z,Le.isString(W)?W.trim():W,D,S))===!0&&x(z,D?D.concat(W):[W])}),b.pop()}}if(!Le.isObject(t))throw new TypeError("data must be an object");return x(t),e}function i0(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Kd(t,e){this._pairs=[],t&&Xh(t,this,e)}const Zm=Kd.prototype;Zm.append=function(e,n){this._pairs.push([e,n])};Zm.toString=function(e){const n=e?function(r){return e.call(this,r,i0)}:i0;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function $2(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Km(t,e,n){if(!e)return t;const r=n&&n.encode||$2;Le.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let a;if(o?a=o(e,n):a=Le.isURLSearchParams(e)?e.toString():new Kd(e,n).toString(r),a){const u=t.indexOf("#");u!==-1&&(t=t.slice(0,u)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class s0{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Le.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Jm={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},V2=typeof URLSearchParams<"u"?URLSearchParams:Kd,H2=typeof FormData<"u"?FormData:null,G2=typeof Blob<"u"?Blob:null,W2={isBrowser:!0,classes:{URLSearchParams:V2,FormData:H2,Blob:G2},protocols:["http","https","file","blob","url","data"]},Jd=typeof window<"u"&&typeof document<"u",ld=typeof navigator=="object"&&navigator||void 0,Z2=Jd&&(!ld||["ReactNative","NativeScript","NS"].indexOf(ld.product)<0),K2=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",J2=Jd&&window.location.href||"http://localhost",Y2=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Jd,hasStandardBrowserEnv:Z2,hasStandardBrowserWebWorkerEnv:K2,navigator:ld,origin:J2},Symbol.toStringTag,{value:"Module"})),is={...Y2,...W2};function X2(t,e){return Xh(t,new is.classes.URLSearchParams,Object.assign({visitor:function(n,r,o,a){return is.isNode&&Le.isBuffer(n)?(this.append(r,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function Q2(t){return Le.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function t4(t){const e={},n=Object.keys(t);let r;const o=n.length;let a;for(r=0;r<o;r++)a=n[r],e[a]=t[a];return e}function Ym(t){function e(n,r,o,a){let u=n[a++];if(u==="__proto__")return!0;const f=Number.isFinite(+u),p=a>=n.length;return u=!u&&Le.isArray(o)?o.length:u,p?(Le.hasOwnProp(o,u)?o[u]=[o[u],r]:o[u]=r,!f):((!o[u]||!Le.isObject(o[u]))&&(o[u]=[]),e(n,r,o[u],a)&&Le.isArray(o[u])&&(o[u]=t4(o[u])),!f)}if(Le.isFormData(t)&&Le.isFunction(t.entries)){const n={};return Le.forEachEntry(t,(r,o)=>{e(Q2(r),o,n,0)}),n}return null}function e4(t,e,n){if(Le.isString(t))try{return(e||JSON.parse)(t),Le.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Oc={transitional:Jm,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",o=r.indexOf("application/json")>-1,a=Le.isObject(e);if(a&&Le.isHTMLForm(e)&&(e=new FormData(e)),Le.isFormData(e))return o?JSON.stringify(Ym(e)):e;if(Le.isArrayBuffer(e)||Le.isBuffer(e)||Le.isStream(e)||Le.isFile(e)||Le.isBlob(e)||Le.isReadableStream(e))return e;if(Le.isArrayBufferView(e))return e.buffer;if(Le.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let f;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return X2(e,this.formSerializer).toString();if((f=Le.isFileList(e))||r.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return Xh(f?{"files[]":e}:e,p&&new p,this.formSerializer)}}return a||o?(n.setContentType("application/json",!1),e4(e)):e}],transformResponse:[function(e){const n=this.transitional||Oc.transitional,r=n&&n.forcedJSONParsing,o=this.responseType==="json";if(Le.isResponse(e)||Le.isReadableStream(e))return e;if(e&&Le.isString(e)&&(r&&!this.responseType||o)){const u=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(f){if(u)throw f.name==="SyntaxError"?Bn.from(f,Bn.ERR_BAD_RESPONSE,this,null,this.response):f}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:is.classes.FormData,Blob:is.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Le.forEach(["delete","get","head","post","put","patch"],t=>{Oc.headers[t]={}});const n4=Le.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),r4=t=>{const e={};let n,r,o;return t&&t.split(`
`).forEach(function(u){o=u.indexOf(":"),n=u.substring(0,o).trim().toLowerCase(),r=u.substring(o+1).trim(),!(!n||e[n]&&n4[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},o0=Symbol("internals");function Xu(t){return t&&String(t).trim().toLowerCase()}function uh(t){return t===!1||t==null?t:Le.isArray(t)?t.map(uh):String(t)}function i4(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const s4=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Af(t,e,n,r,o){if(Le.isFunction(r))return r.call(this,e,n);if(o&&(e=n),!!Le.isString(e)){if(Le.isString(r))return e.indexOf(r)!==-1;if(Le.isRegExp(r))return r.test(e)}}function o4(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function a4(t,e){const n=Le.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(o,a,u){return this[r].call(this,e,o,a,u)},configurable:!0})})}let zs=class{constructor(e){e&&this.set(e)}set(e,n,r){const o=this;function a(f,p,v){const w=Xu(p);if(!w)throw new Error("header name must be a non-empty string");const b=Le.findKey(o,w);(!b||o[b]===void 0||v===!0||v===void 0&&o[b]!==!1)&&(o[b||p]=uh(f))}const u=(f,p)=>Le.forEach(f,(v,w)=>a(v,w,p));if(Le.isPlainObject(e)||e instanceof this.constructor)u(e,n);else if(Le.isString(e)&&(e=e.trim())&&!s4(e))u(r4(e),n);else if(Le.isHeaders(e))for(const[f,p]of e.entries())a(p,f,r);else e!=null&&a(n,e,r);return this}get(e,n){if(e=Xu(e),e){const r=Le.findKey(this,e);if(r){const o=this[r];if(!n)return o;if(n===!0)return i4(o);if(Le.isFunction(n))return n.call(this,o,r);if(Le.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Xu(e),e){const r=Le.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Af(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let o=!1;function a(u){if(u=Xu(u),u){const f=Le.findKey(r,u);f&&(!n||Af(r,r[f],f,n))&&(delete r[f],o=!0)}}return Le.isArray(e)?e.forEach(a):a(e),o}clear(e){const n=Object.keys(this);let r=n.length,o=!1;for(;r--;){const a=n[r];(!e||Af(this,this[a],a,e,!0))&&(delete this[a],o=!0)}return o}normalize(e){const n=this,r={};return Le.forEach(this,(o,a)=>{const u=Le.findKey(r,a);if(u){n[u]=uh(o),delete n[a];return}const f=e?o4(a):String(a).trim();f!==a&&delete n[a],n[f]=uh(o),r[f]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Le.forEach(this,(r,o)=>{r!=null&&r!==!1&&(n[o]=e&&Le.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(o=>r.set(o)),r}static accessor(e){const r=(this[o0]=this[o0]={accessors:{}}).accessors,o=this.prototype;function a(u){const f=Xu(u);r[f]||(a4(o,u),r[f]=!0)}return Le.isArray(e)?e.forEach(a):a(e),this}};zs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Le.reduceDescriptors(zs.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Le.freezeMethods(zs);function Mf(t,e){const n=this||Oc,r=e||n,o=zs.from(r.headers);let a=r.data;return Le.forEach(t,function(f){a=f.call(n,a,o.normalize(),e?e.status:void 0)}),o.normalize(),a}function Xm(t){return!!(t&&t.__CANCEL__)}function qu(t,e,n){Bn.call(this,t??"canceled",Bn.ERR_CANCELED,e,n),this.name="CanceledError"}Le.inherits(qu,Bn,{__CANCEL__:!0});function Qm(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Bn("Request failed with status code "+n.status,[Bn.ERR_BAD_REQUEST,Bn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function l4(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function u4(t,e){t=t||10;const n=new Array(t),r=new Array(t);let o=0,a=0,u;return e=e!==void 0?e:1e3,function(p){const v=Date.now(),w=r[a];u||(u=v),n[o]=p,r[o]=v;let b=a,S=0;for(;b!==o;)S+=n[b++],b=b%t;if(o=(o+1)%t,o===a&&(a=(a+1)%t),v-u<e)return;const x=w&&v-w;return x?Math.round(S*1e3/x):void 0}}function c4(t,e){let n=0,r=1e3/e,o,a;const u=(v,w=Date.now())=>{n=w,o=null,a&&(clearTimeout(a),a=null),t.apply(null,v)};return[(...v)=>{const w=Date.now(),b=w-n;b>=r?u(v,w):(o=v,a||(a=setTimeout(()=>{a=null,u(o)},r-b)))},()=>o&&u(o)]}const Ph=(t,e,n=3)=>{let r=0;const o=u4(50,250);return c4(a=>{const u=a.loaded,f=a.lengthComputable?a.total:void 0,p=u-r,v=o(p),w=u<=f;r=u;const b={loaded:u,total:f,progress:f?u/f:void 0,bytes:p,rate:v||void 0,estimated:v&&f&&w?(f-u)/v:void 0,event:a,lengthComputable:f!=null,[e?"download":"upload"]:!0};t(b)},n)},a0=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},l0=t=>(...e)=>Le.asap(()=>t(...e)),h4=is.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,is.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(is.origin),is.navigator&&/(msie|trident)/i.test(is.navigator.userAgent)):()=>!0,f4=is.hasStandardBrowserEnv?{write(t,e,n,r,o,a){const u=[t+"="+encodeURIComponent(e)];Le.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),Le.isString(r)&&u.push("path="+r),Le.isString(o)&&u.push("domain="+o),a===!0&&u.push("secure"),document.cookie=u.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function d4(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function p4(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function t1(t,e){return t&&!d4(e)?p4(t,e):e}const u0=t=>t instanceof zs?{...t}:t;function su(t,e){e=e||{};const n={};function r(v,w,b,S){return Le.isPlainObject(v)&&Le.isPlainObject(w)?Le.merge.call({caseless:S},v,w):Le.isPlainObject(w)?Le.merge({},w):Le.isArray(w)?w.slice():w}function o(v,w,b,S){if(Le.isUndefined(w)){if(!Le.isUndefined(v))return r(void 0,v,b,S)}else return r(v,w,b,S)}function a(v,w){if(!Le.isUndefined(w))return r(void 0,w)}function u(v,w){if(Le.isUndefined(w)){if(!Le.isUndefined(v))return r(void 0,v)}else return r(void 0,w)}function f(v,w,b){if(b in e)return r(v,w);if(b in t)return r(void 0,v)}const p={url:a,method:a,data:a,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:f,headers:(v,w,b)=>o(u0(v),u0(w),b,!0)};return Le.forEach(Object.keys(Object.assign({},t,e)),function(w){const b=p[w]||o,S=b(t[w],e[w],w);Le.isUndefined(S)&&b!==f||(n[w]=S)}),n}const e1=t=>{const e=su({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:a,headers:u,auth:f}=e;e.headers=u=zs.from(u),e.url=Km(t1(e.baseURL,e.url),t.params,t.paramsSerializer),f&&u.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):"")));let p;if(Le.isFormData(n)){if(is.hasStandardBrowserEnv||is.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if((p=u.getContentType())!==!1){const[v,...w]=p?p.split(";").map(b=>b.trim()).filter(Boolean):[];u.setContentType([v||"multipart/form-data",...w].join("; "))}}if(is.hasStandardBrowserEnv&&(r&&Le.isFunction(r)&&(r=r(e)),r||r!==!1&&h4(e.url))){const v=o&&a&&f4.read(a);v&&u.set(o,v)}return e},g4=typeof XMLHttpRequest<"u",m4=g4&&function(t){return new Promise(function(n,r){const o=e1(t);let a=o.data;const u=zs.from(o.headers).normalize();let{responseType:f,onUploadProgress:p,onDownloadProgress:v}=o,w,b,S,x,I;function D(){x&&x(),I&&I(),o.cancelToken&&o.cancelToken.unsubscribe(w),o.signal&&o.signal.removeEventListener("abort",w)}let j=new XMLHttpRequest;j.open(o.method.toUpperCase(),o.url,!0),j.timeout=o.timeout;function z(){if(!j)return;const Q=zs.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),Tt={data:!f||f==="text"||f==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:Q,config:t,request:j};Qm(function(Ft){n(Ft),D()},function(Ft){r(Ft),D()},Tt),j=null}"onloadend"in j?j.onloadend=z:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(z)},j.onabort=function(){j&&(r(new Bn("Request aborted",Bn.ECONNABORTED,t,j)),j=null)},j.onerror=function(){r(new Bn("Network Error",Bn.ERR_NETWORK,t,j)),j=null},j.ontimeout=function(){let mt=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const Tt=o.transitional||Jm;o.timeoutErrorMessage&&(mt=o.timeoutErrorMessage),r(new Bn(mt,Tt.clarifyTimeoutError?Bn.ETIMEDOUT:Bn.ECONNABORTED,t,j)),j=null},a===void 0&&u.setContentType(null),"setRequestHeader"in j&&Le.forEach(u.toJSON(),function(mt,Tt){j.setRequestHeader(Tt,mt)}),Le.isUndefined(o.withCredentials)||(j.withCredentials=!!o.withCredentials),f&&f!=="json"&&(j.responseType=o.responseType),v&&([S,I]=Ph(v,!0),j.addEventListener("progress",S)),p&&j.upload&&([b,x]=Ph(p),j.upload.addEventListener("progress",b),j.upload.addEventListener("loadend",x)),(o.cancelToken||o.signal)&&(w=Q=>{j&&(r(!Q||Q.type?new qu(null,t,j):Q),j.abort(),j=null)},o.cancelToken&&o.cancelToken.subscribe(w),o.signal&&(o.signal.aborted?w():o.signal.addEventListener("abort",w)));const W=l4(o.url);if(W&&is.protocols.indexOf(W)===-1){r(new Bn("Unsupported protocol "+W+":",Bn.ERR_BAD_REQUEST,t));return}j.send(a||null)})},v4=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,o;const a=function(v){if(!o){o=!0,f();const w=v instanceof Error?v:this.reason;r.abort(w instanceof Bn?w:new qu(w instanceof Error?w.message:w))}};let u=e&&setTimeout(()=>{u=null,a(new Bn(`timeout ${e} of ms exceeded`,Bn.ETIMEDOUT))},e);const f=()=>{t&&(u&&clearTimeout(u),u=null,t.forEach(v=>{v.unsubscribe?v.unsubscribe(a):v.removeEventListener("abort",a)}),t=null)};t.forEach(v=>v.addEventListener("abort",a));const{signal:p}=r;return p.unsubscribe=()=>Le.asap(f),p}},y4=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,o;for(;r<n;)o=r+e,yield t.slice(r,o),r=o},_4=async function*(t,e){for await(const n of b4(t))yield*y4(n,e)},b4=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},c0=(t,e,n,r)=>{const o=_4(t,e);let a=0,u,f=p=>{u||(u=!0,r&&r(p))};return new ReadableStream({async pull(p){try{const{done:v,value:w}=await o.next();if(v){f(),p.close();return}let b=w.byteLength;if(n){let S=a+=b;n(S)}p.enqueue(new Uint8Array(w))}catch(v){throw f(v),v}},cancel(p){return f(p),o.return()}},{highWaterMark:2})},Qh=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",n1=Qh&&typeof ReadableStream=="function",w4=Qh&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),r1=(t,...e)=>{try{return!!t(...e)}catch{return!1}},x4=n1&&r1(()=>{let t=!1;const e=new Request(is.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),h0=64*1024,ud=n1&&r1(()=>Le.isReadableStream(new Response("").body)),Sh={stream:ud&&(t=>t.body)};Qh&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Sh[e]&&(Sh[e]=Le.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new Bn(`Response type '${e}' is not supported`,Bn.ERR_NOT_SUPPORT,r)})})})(new Response);const L4=async t=>{if(t==null)return 0;if(Le.isBlob(t))return t.size;if(Le.isSpecCompliantForm(t))return(await new Request(is.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Le.isArrayBufferView(t)||Le.isArrayBuffer(t))return t.byteLength;if(Le.isURLSearchParams(t)&&(t=t+""),Le.isString(t))return(await w4(t)).byteLength},C4=async(t,e)=>{const n=Le.toFiniteNumber(t.getContentLength());return n??L4(e)},k4=Qh&&(async t=>{let{url:e,method:n,data:r,signal:o,cancelToken:a,timeout:u,onDownloadProgress:f,onUploadProgress:p,responseType:v,headers:w,withCredentials:b="same-origin",fetchOptions:S}=e1(t);v=v?(v+"").toLowerCase():"text";let x=v4([o,a&&a.toAbortSignal()],u),I;const D=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let j;try{if(p&&x4&&n!=="get"&&n!=="head"&&(j=await C4(w,r))!==0){let Tt=new Request(e,{method:"POST",body:r,duplex:"half"}),Nt;if(Le.isFormData(r)&&(Nt=Tt.headers.get("content-type"))&&w.setContentType(Nt),Tt.body){const[Ft,vt]=a0(j,Ph(l0(p)));r=c0(Tt.body,h0,Ft,vt)}}Le.isString(b)||(b=b?"include":"omit");const z="credentials"in Request.prototype;I=new Request(e,{...S,signal:x,method:n.toUpperCase(),headers:w.normalize().toJSON(),body:r,duplex:"half",credentials:z?b:void 0});let W=await fetch(I);const Q=ud&&(v==="stream"||v==="response");if(ud&&(f||Q&&D)){const Tt={};["status","statusText","headers"].forEach(Ct=>{Tt[Ct]=W[Ct]});const Nt=Le.toFiniteNumber(W.headers.get("content-length")),[Ft,vt]=f&&a0(Nt,Ph(l0(f),!0))||[];W=new Response(c0(W.body,h0,Ft,()=>{vt&&vt(),D&&D()}),Tt)}v=v||"text";let mt=await Sh[Le.findKey(Sh,v)||"text"](W,t);return!Q&&D&&D(),await new Promise((Tt,Nt)=>{Qm(Tt,Nt,{data:mt,headers:zs.from(W.headers),status:W.status,statusText:W.statusText,config:t,request:I})})}catch(z){throw D&&D(),z&&z.name==="TypeError"&&/fetch/i.test(z.message)?Object.assign(new Bn("Network Error",Bn.ERR_NETWORK,t,I),{cause:z.cause||z}):Bn.from(z,z&&z.code,t,I)}}),cd={http:z2,xhr:m4,fetch:k4};Le.forEach(cd,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const f0=t=>`- ${t}`,P4=t=>Le.isFunction(t)||t===null||t===!1,i1={getAdapter:t=>{t=Le.isArray(t)?t:[t];const{length:e}=t;let n,r;const o={};for(let a=0;a<e;a++){n=t[a];let u;if(r=n,!P4(n)&&(r=cd[(u=String(n)).toLowerCase()],r===void 0))throw new Bn(`Unknown adapter '${u}'`);if(r)break;o[u||"#"+a]=r}if(!r){const a=Object.entries(o).map(([f,p])=>`adapter ${f} `+(p===!1?"is not supported by the environment":"is not available in the build"));let u=e?a.length>1?`since :
`+a.map(f0).join(`
`):" "+f0(a[0]):"as no adapter specified";throw new Bn("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return r},adapters:cd};function Bf(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new qu(null,t)}function d0(t){return Bf(t),t.headers=zs.from(t.headers),t.data=Mf.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),i1.getAdapter(t.adapter||Oc.adapter)(t).then(function(r){return Bf(t),r.data=Mf.call(t,t.transformResponse,r),r.headers=zs.from(r.headers),r},function(r){return Xm(r)||(Bf(t),r&&r.response&&(r.response.data=Mf.call(t,t.transformResponse,r.response),r.response.headers=zs.from(r.response.headers))),Promise.reject(r)})}const s1="1.7.9",tf={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{tf[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const p0={};tf.transitional=function(e,n,r){function o(a,u){return"[Axios v"+s1+"] Transitional option '"+a+"'"+u+(r?". "+r:"")}return(a,u,f)=>{if(e===!1)throw new Bn(o(u," has been removed"+(n?" in "+n:"")),Bn.ERR_DEPRECATED);return n&&!p0[u]&&(p0[u]=!0,console.warn(o(u," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(a,u,f):!0}};tf.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function S4(t,e,n){if(typeof t!="object")throw new Bn("options must be an object",Bn.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let o=r.length;for(;o-- >0;){const a=r[o],u=e[a];if(u){const f=t[a],p=f===void 0||u(f,a,t);if(p!==!0)throw new Bn("option "+a+" must be "+p,Bn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Bn("Unknown option "+a,Bn.ERR_BAD_OPTION)}}const ch={assertOptions:S4,validators:tf},ma=ch.validators;let eu=class{constructor(e){this.defaults=e,this.interceptors={request:new s0,response:new s0}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const a=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=su(this.defaults,n);const{transitional:r,paramsSerializer:o,headers:a}=n;r!==void 0&&ch.assertOptions(r,{silentJSONParsing:ma.transitional(ma.boolean),forcedJSONParsing:ma.transitional(ma.boolean),clarifyTimeoutError:ma.transitional(ma.boolean)},!1),o!=null&&(Le.isFunction(o)?n.paramsSerializer={serialize:o}:ch.assertOptions(o,{encode:ma.function,serialize:ma.function},!0)),ch.assertOptions(n,{baseUrl:ma.spelling("baseURL"),withXsrfToken:ma.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let u=a&&Le.merge(a.common,a[n.method]);a&&Le.forEach(["delete","get","head","post","put","patch","common"],I=>{delete a[I]}),n.headers=zs.concat(u,a);const f=[];let p=!0;this.interceptors.request.forEach(function(D){typeof D.runWhen=="function"&&D.runWhen(n)===!1||(p=p&&D.synchronous,f.unshift(D.fulfilled,D.rejected))});const v=[];this.interceptors.response.forEach(function(D){v.push(D.fulfilled,D.rejected)});let w,b=0,S;if(!p){const I=[d0.bind(this),void 0];for(I.unshift.apply(I,f),I.push.apply(I,v),S=I.length,w=Promise.resolve(n);b<S;)w=w.then(I[b++],I[b++]);return w}S=f.length;let x=n;for(b=0;b<S;){const I=f[b++],D=f[b++];try{x=I(x)}catch(j){D.call(this,j);break}}try{w=d0.call(this,x)}catch(I){return Promise.reject(I)}for(b=0,S=v.length;b<S;)w=w.then(v[b++],v[b++]);return w}getUri(e){e=su(this.defaults,e);const n=t1(e.baseURL,e.url);return Km(n,e.params,e.paramsSerializer)}};Le.forEach(["delete","get","head","options"],function(e){eu.prototype[e]=function(n,r){return this.request(su(r||{},{method:e,url:n,data:(r||{}).data}))}});Le.forEach(["post","put","patch"],function(e){function n(r){return function(a,u,f){return this.request(su(f||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:u}))}}eu.prototype[e]=n(),eu.prototype[e+"Form"]=n(!0)});let E4=class o1{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const r=this;this.promise.then(o=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](o);r._listeners=null}),this.promise.then=o=>{let a;const u=new Promise(f=>{r.subscribe(f),a=f}).then(o);return u.cancel=function(){r.unsubscribe(a)},u},e(function(a,u,f){r.reason||(r.reason=new qu(a,u,f),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new o1(function(o){e=o}),cancel:e}}};function A4(t){return function(n){return t.apply(null,n)}}function M4(t){return Le.isObject(t)&&t.isAxiosError===!0}const hd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(hd).forEach(([t,e])=>{hd[e]=t});function a1(t){const e=new eu(t),n=Im(eu.prototype.request,e);return Le.extend(n,eu.prototype,e,{allOwnKeys:!0}),Le.extend(n,e,null,{allOwnKeys:!0}),n.create=function(o){return a1(su(t,o))},n}const Qr=a1(Oc);Qr.Axios=eu;Qr.CanceledError=qu;Qr.CancelToken=E4;Qr.isCancel=Xm;Qr.VERSION=s1;Qr.toFormData=Xh;Qr.AxiosError=Bn;Qr.Cancel=Qr.CanceledError;Qr.all=function(e){return Promise.all(e)};Qr.spread=A4;Qr.isAxiosError=M4;Qr.mergeConfig=su;Qr.AxiosHeaders=zs;Qr.formToJSON=t=>Ym(Le.isHTMLForm(t)?new FormData(t):t);Qr.getAdapter=i1.getAdapter;Qr.HttpStatusCode=hd;Qr.default=Qr;const{Axios:mS,AxiosError:vS,CanceledError:yS,isCancel:_S,CancelToken:bS,VERSION:wS,all:xS,Cancel:LS,isAxiosError:CS,spread:kS,toFormData:PS,AxiosHeaders:SS,HttpStatusCode:ES,formToJSON:AS,getAdapter:MS,mergeConfig:BS}=Qr,Cn=Qr.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});function l1(t){var r;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}Cn.interceptors.request.use(t=>{const e=l1("access_token");return e&&(t.headers.Authorization=`Bearer ${e}`),console.log("Request config:",{url:t.url,method:t.method,headers:t.headers,withCredentials:t.withCredentials}),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));Cn.interceptors.response.use(t=>t,async t=>{var n;const e=t.config;if(((n=t.response)==null?void 0:n.status)===401&&!e._retry){e._retry=!0;try{await vs().refreshToken();const o=l1("access_token");if(o)return e.headers.Authorization=`Bearer ${o}`,Cn(e)}catch(r){console.error("Token refresh failed:",r),window.location.href="/login"}}return Promise.reject(t)});Cn.defaults.baseURL="/api";Cn.defaults.headers.common["Content-Type"]="application/json";Cn.defaults.withCredentials=!0;function Eh(t){var r;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}Cn.interceptors.request.use(t=>{const e=Eh("access_token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));Cn.interceptors.response.use(t=>t,async t=>{var r,o;const e=vs(),n=t.config;if(((r=t.response)==null?void 0:r.status)===401&&!n._retry&&!((o=n.url)!=null&&o.includes("/token/refresh/"))){n._retry=!0;try{if(!Eh("access_token"))throw new Error("No token available");await e.refreshToken();const u=Eh("access_token");if(u)return n.headers.Authorization=`Bearer ${u}`,Cn(n)}catch(a){console.error("Token refresh failed:",a),await e.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(t)});function B4(t,e,n=1){const r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);const o=`expires=${r.toUTCString()}`;document.cookie=`${t}=${e};${o};path=/;secure;samesite=Strict`}function Jl(t){if(!t)return"Non spécifié";const e=`${t.first_name} ${t.last_name.toUpperCase()}`;return t.company_name?`${e} (${t.company_name})`:e}const vs=Wd("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,concessionnaires:[]}),getters:{isAdmin:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="admin"},isDealer:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="dealer"},isClient:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="client"},currentUser:t=>t.user,hasDealer:t=>{var e;return!!((e=t.user)!=null&&e.dealer)}},actions:{async initialize(t){if(!t){const n=await this.restoreSession();return this.initialized=!0,n}if(t.isAuthenticated&&t.user)return this.user=t.user,this.isAuthenticated=!0,this.mustChangePassword=t.user.must_change_password||!1,this.initialized=!0,!0;const e=await this.restoreSession();return this.initialized=!0,e},async restoreSession(){try{if(!Eh("access_token"))return this.isAuthenticated=!1,this.user=null,!1;const e=await Cn.post("/token/refresh/");return e.data.user?(this.user=e.data.user,this.isAuthenticated=!0,this.mustChangePassword=e.data.user.must_change_password||!1,!0):(await this.fetchUserProfile(),!0)}catch(t){return console.error("Failed to restore session:",t),this.isAuthenticated=!1,this.user=null,!1}},async login(t,e){var n,r,o;try{const a=await Cn.post("/token/",{username:t,password:e});if(!a.data.access)throw new Error("Token d'accès non reçu");document.cookie=`access_token=${a.data.access}; path=/; secure; samesite=Strict`;const u=await this.fetchUserProfile();return this.user=u,this.isAuthenticated=!0,!0}catch(a){throw this.isAuthenticated=!1,this.user=null,((n=a.response)==null?void 0:n.status)===401?new Error("Identifiants incorrects"):(o=(r=a.response)==null?void 0:r.data)!=null&&o.detail?new Error(a.response.data.detail):a}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const t=await Cn.get("/users/me/");return this.user=t.data,this.isAuthenticated=!0,this.mustChangePassword=t.data.must_change_password||!1,t.data}catch(t){throw this.isAuthenticated=!1,this.user=null,t}},async changePassword(t,e){try{const n=await Cn.post("/users/change_password/",{old_password:t,password:e});return this.user={...this.user,must_change_password:!1},n.data}catch(n){throw console.error("Password change error:",n),n}},async refreshToken(){var t,e,n,r;try{const o=await Cn.post("/token/refresh/",{},{withCredentials:!0}),{access:a}=o.data;if(!a)throw new Error("No access token received");return B4("access_token",a,1),this.isAuthenticated=!0,a}catch(o){throw console.error("Error refreshing token:",{status:(t=o.response)==null?void 0:t.status,data:(e=o.response)==null?void 0:e.data}),(((n=o.response)==null?void 0:n.status)===401||((r=o.response)==null?void 0:r.status)===403)&&await this.logout(),o}},async fetchConcessionnaires(){this.loading=!0;try{const t=await Cn.get("/users/",{params:{role:"dealer"}});this.concessionnaires=t.data}catch(t){throw this.error="Erreur lors de la récupération des concessionnaires",t}finally{this.loading=!1}},async setConcessionnaire(t,e){this.loading=!0;try{await Cn.patch(`/users/${t}/`,{concessionnaire:e}),this.user&&this.user.id===t&&(this.user.dealer=e)}catch(n){throw this.error="Erreur lors de la mise à jour du concessionnaire",n}finally{this.loading=!1}},async createUser(t){this.loading=!0;try{return(await Cn.post("/users/",t)).data}catch(e){throw this.error="Erreur lors de la création de l'utilisateur",e}finally{this.loading=!1}},async updateUserRole(t,e){this.loading=!0;try{const n=await Cn.patch(`/users/${t}/`,{role:e});return this.user&&this.user.id===t&&(this.user.user_type=e),n.data}catch(n){throw this.error="Erreur lors de la mise à jour du rôle",n}finally{this.loading=!1}},async updateUserEmail(t){var e;this.loading=!0;try{const n=await Cn.patch(`/users/${(e=this.user)==null?void 0:e.id}/`,{email:t});return this.user&&(this.user.email=t),n.data}catch(n){throw this.error="Erreur lors de la mise à jour de l'email",n}finally{this.loading=!1}},checkAccess(t){return this.user?t.includes(this.user.user_type):!1}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const xu=typeof document<"u";function u1(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function T4(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&u1(t.default)}const ir=Object.assign;function Tf(t,e){const n={};for(const r in e){const o=e[r];n[r]=Yo(o)?o.map(t):t(o)}return n}const pc=()=>{},Yo=Array.isArray,c1=/#/g,N4=/&/g,D4=/\//g,O4=/=/g,R4=/\?/g,h1=/\+/g,I4=/%5B/g,F4=/%5D/g,f1=/%5E/g,j4=/%60/g,d1=/%7B/g,z4=/%7C/g,p1=/%7D/g,U4=/%20/g;function Yd(t){return encodeURI(""+t).replace(z4,"|").replace(I4,"[").replace(F4,"]")}function q4(t){return Yd(t).replace(d1,"{").replace(p1,"}").replace(f1,"^")}function fd(t){return Yd(t).replace(h1,"%2B").replace(U4,"+").replace(c1,"%23").replace(N4,"%26").replace(j4,"`").replace(d1,"{").replace(p1,"}").replace(f1,"^")}function $4(t){return fd(t).replace(O4,"%3D")}function V4(t){return Yd(t).replace(c1,"%23").replace(R4,"%3F")}function H4(t){return t==null?"":V4(t).replace(D4,"%2F")}function Pc(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const G4=/\/$/,W4=t=>t.replace(G4,"");function Nf(t,e,n="/"){let r,o={},a="",u="";const f=e.indexOf("#");let p=e.indexOf("?");return f<p&&f>=0&&(p=-1),p>-1&&(r=e.slice(0,p),a=e.slice(p+1,f>-1?f:e.length),o=t(a)),f>-1&&(r=r||e.slice(0,f),u=e.slice(f,e.length)),r=Y4(r??e,n),{fullPath:r+(a&&"?")+a+u,path:r,query:o,hash:Pc(u)}}function Z4(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function g0(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function K4(t,e,n){const r=e.matched.length-1,o=n.matched.length-1;return r>-1&&r===o&&Iu(e.matched[r],n.matched[o])&&g1(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Iu(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function g1(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!J4(t[n],e[n]))return!1;return!0}function J4(t,e){return Yo(t)?m0(t,e):Yo(e)?m0(e,t):t===e}function m0(t,e){return Yo(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function Y4(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),o=r[r.length-1];(o===".."||o===".")&&r.push("");let a=n.length-1,u,f;for(u=0;u<r.length;u++)if(f=r[u],f!==".")if(f==="..")a>1&&a--;else break;return n.slice(0,a).join("/")+"/"+r.slice(u).join("/")}const gl={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Sc;(function(t){t.pop="pop",t.push="push"})(Sc||(Sc={}));var gc;(function(t){t.back="back",t.forward="forward",t.unknown=""})(gc||(gc={}));function X4(t){if(!t)if(xu){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),W4(t)}const Q4=/^[^#]+#/;function t5(t,e){return t.replace(Q4,"#")+e}function e5(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const ef=()=>({left:window.scrollX,top:window.scrollY});function n5(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;e=e5(o,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function v0(t,e){return(history.state?history.state.position-e:-1)+t}const dd=new Map;function r5(t,e){dd.set(t,e)}function i5(t){const e=dd.get(t);return dd.delete(t),e}let s5=()=>location.protocol+"//"+location.host;function m1(t,e){const{pathname:n,search:r,hash:o}=e,a=t.indexOf("#");if(a>-1){let f=o.includes(t.slice(a))?t.slice(a).length:1,p=o.slice(f);return p[0]!=="/"&&(p="/"+p),g0(p,"")}return g0(n,t)+r+o}function o5(t,e,n,r){let o=[],a=[],u=null;const f=({state:S})=>{const x=m1(t,location),I=n.value,D=e.value;let j=0;if(S){if(n.value=x,e.value=S,u&&u===I){u=null;return}j=D?S.position-D.position:0}else r(x);o.forEach(z=>{z(n.value,I,{delta:j,type:Sc.pop,direction:j?j>0?gc.forward:gc.back:gc.unknown})})};function p(){u=n.value}function v(S){o.push(S);const x=()=>{const I=o.indexOf(S);I>-1&&o.splice(I,1)};return a.push(x),x}function w(){const{history:S}=window;S.state&&S.replaceState(ir({},S.state,{scroll:ef()}),"")}function b(){for(const S of a)S();a=[],window.removeEventListener("popstate",f),window.removeEventListener("beforeunload",w)}return window.addEventListener("popstate",f),window.addEventListener("beforeunload",w,{passive:!0}),{pauseListeners:p,listen:v,destroy:b}}function y0(t,e,n,r=!1,o=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:o?ef():null}}function a5(t){const{history:e,location:n}=window,r={value:m1(t,n)},o={value:e.state};o.value||a(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function a(p,v,w){const b=t.indexOf("#"),S=b>-1?(n.host&&document.querySelector("base")?t:t.slice(b))+p:s5()+t+p;try{e[w?"replaceState":"pushState"](v,"",S),o.value=v}catch(x){console.error(x),n[w?"replace":"assign"](S)}}function u(p,v){const w=ir({},e.state,y0(o.value.back,p,o.value.forward,!0),v,{position:o.value.position});a(p,w,!0),r.value=p}function f(p,v){const w=ir({},o.value,e.state,{forward:p,scroll:ef()});a(w.current,w,!0);const b=ir({},y0(r.value,p,null),{position:w.position+1},v);a(p,b,!1),r.value=p}return{location:r,state:o,push:f,replace:u}}function l5(t){t=X4(t);const e=a5(t),n=o5(t,e.state,e.location,e.replace);function r(a,u=!0){u||n.pauseListeners(),history.go(a)}const o=ir({location:"",base:t,go:r,createHref:t5.bind(null,t)},e,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>e.state.value}),o}function u5(t){return typeof t=="string"||t&&typeof t=="object"}function v1(t){return typeof t=="string"||typeof t=="symbol"}const y1=Symbol("");var _0;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(_0||(_0={}));function Fu(t,e){return ir(new Error,{type:t,[y1]:!0},e)}function $a(t,e){return t instanceof Error&&y1 in t&&(e==null||!!(t.type&e))}const b0="[^/]+?",c5={sensitive:!1,strict:!1,start:!0,end:!0},h5=/[.+*?^${}()[\]/\\]/g;function f5(t,e){const n=ir({},c5,e),r=[];let o=n.start?"^":"";const a=[];for(const v of t){const w=v.length?[]:[90];n.strict&&!v.length&&(o+="/");for(let b=0;b<v.length;b++){const S=v[b];let x=40+(n.sensitive?.25:0);if(S.type===0)b||(o+="/"),o+=S.value.replace(h5,"\\$&"),x+=40;else if(S.type===1){const{value:I,repeatable:D,optional:j,regexp:z}=S;a.push({name:I,repeatable:D,optional:j});const W=z||b0;if(W!==b0){x+=10;try{new RegExp(`(${W})`)}catch(mt){throw new Error(`Invalid custom RegExp for param "${I}" (${W}): `+mt.message)}}let Q=D?`((?:${W})(?:/(?:${W}))*)`:`(${W})`;b||(Q=j&&v.length<2?`(?:/${Q})`:"/"+Q),j&&(Q+="?"),o+=Q,x+=20,j&&(x+=-8),D&&(x+=-20),W===".*"&&(x+=-50)}w.push(x)}r.push(w)}if(n.strict&&n.end){const v=r.length-1;r[v][r[v].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const u=new RegExp(o,n.sensitive?"":"i");function f(v){const w=v.match(u),b={};if(!w)return null;for(let S=1;S<w.length;S++){const x=w[S]||"",I=a[S-1];b[I.name]=x&&I.repeatable?x.split("/"):x}return b}function p(v){let w="",b=!1;for(const S of t){(!b||!w.endsWith("/"))&&(w+="/"),b=!1;for(const x of S)if(x.type===0)w+=x.value;else if(x.type===1){const{value:I,repeatable:D,optional:j}=x,z=I in v?v[I]:"";if(Yo(z)&&!D)throw new Error(`Provided param "${I}" is an array but it is not repeatable (* or + modifiers)`);const W=Yo(z)?z.join("/"):z;if(!W)if(j)S.length<2&&(w.endsWith("/")?w=w.slice(0,-1):b=!0);else throw new Error(`Missing required param "${I}"`);w+=W}}return w||"/"}return{re:u,score:r,keys:a,parse:f,stringify:p}}function d5(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function _1(t,e){let n=0;const r=t.score,o=e.score;for(;n<r.length&&n<o.length;){const a=d5(r[n],o[n]);if(a)return a;n++}if(Math.abs(o.length-r.length)===1){if(w0(r))return 1;if(w0(o))return-1}return o.length-r.length}function w0(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const p5={type:0,value:""},g5=/[a-zA-Z0-9_]/;function m5(t){if(!t)return[[]];if(t==="/")return[[p5]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(x){throw new Error(`ERR (${n})/"${v}": ${x}`)}let n=0,r=n;const o=[];let a;function u(){a&&o.push(a),a=[]}let f=0,p,v="",w="";function b(){v&&(n===0?a.push({type:0,value:v}):n===1||n===2||n===3?(a.length>1&&(p==="*"||p==="+")&&e(`A repeatable param (${v}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:v,regexp:w,repeatable:p==="*"||p==="+",optional:p==="*"||p==="?"})):e("Invalid state to consume buffer"),v="")}function S(){v+=p}for(;f<t.length;){if(p=t[f++],p==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:p==="/"?(v&&b(),u()):p===":"?(b(),n=1):S();break;case 4:S(),n=r;break;case 1:p==="("?n=2:g5.test(p)?S():(b(),n=0,p!=="*"&&p!=="?"&&p!=="+"&&f--);break;case 2:p===")"?w[w.length-1]=="\\"?w=w.slice(0,-1)+p:n=3:w+=p;break;case 3:b(),n=0,p!=="*"&&p!=="?"&&p!=="+"&&f--,w="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${v}"`),b(),u(),o}function v5(t,e,n){const r=f5(m5(t.path),n),o=ir(r,{record:t,parent:e,children:[],alias:[]});return e&&!o.record.aliasOf==!e.record.aliasOf&&e.children.push(o),o}function y5(t,e){const n=[],r=new Map;e=k0({strict:!1,end:!0,sensitive:!1},e);function o(b){return r.get(b)}function a(b,S,x){const I=!x,D=L0(b);D.aliasOf=x&&x.record;const j=k0(e,b),z=[D];if("alias"in b){const mt=typeof b.alias=="string"?[b.alias]:b.alias;for(const Tt of mt)z.push(L0(ir({},D,{components:x?x.record.components:D.components,path:Tt,aliasOf:x?x.record:D})))}let W,Q;for(const mt of z){const{path:Tt}=mt;if(S&&Tt[0]!=="/"){const Nt=S.record.path,Ft=Nt[Nt.length-1]==="/"?"":"/";mt.path=S.record.path+(Tt&&Ft+Tt)}if(W=v5(mt,S,j),x?x.alias.push(W):(Q=Q||W,Q!==W&&Q.alias.push(W),I&&b.name&&!C0(W)&&u(b.name)),b1(W)&&p(W),D.children){const Nt=D.children;for(let Ft=0;Ft<Nt.length;Ft++)a(Nt[Ft],W,x&&x.children[Ft])}x=x||W}return Q?()=>{u(Q)}:pc}function u(b){if(v1(b)){const S=r.get(b);S&&(r.delete(b),n.splice(n.indexOf(S),1),S.children.forEach(u),S.alias.forEach(u))}else{const S=n.indexOf(b);S>-1&&(n.splice(S,1),b.record.name&&r.delete(b.record.name),b.children.forEach(u),b.alias.forEach(u))}}function f(){return n}function p(b){const S=w5(b,n);n.splice(S,0,b),b.record.name&&!C0(b)&&r.set(b.record.name,b)}function v(b,S){let x,I={},D,j;if("name"in b&&b.name){if(x=r.get(b.name),!x)throw Fu(1,{location:b});j=x.record.name,I=ir(x0(S.params,x.keys.filter(Q=>!Q.optional).concat(x.parent?x.parent.keys.filter(Q=>Q.optional):[]).map(Q=>Q.name)),b.params&&x0(b.params,x.keys.map(Q=>Q.name))),D=x.stringify(I)}else if(b.path!=null)D=b.path,x=n.find(Q=>Q.re.test(D)),x&&(I=x.parse(D),j=x.record.name);else{if(x=S.name?r.get(S.name):n.find(Q=>Q.re.test(S.path)),!x)throw Fu(1,{location:b,currentLocation:S});j=x.record.name,I=ir({},S.params,b.params),D=x.stringify(I)}const z=[];let W=x;for(;W;)z.unshift(W.record),W=W.parent;return{name:j,path:D,params:I,matched:z,meta:b5(z)}}t.forEach(b=>a(b));function w(){n.length=0,r.clear()}return{addRoute:a,resolve:v,removeRoute:u,clearRoutes:w,getRoutes:f,getRecordMatcher:o}}function x0(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function L0(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:_5(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function _5(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function C0(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function b5(t){return t.reduce((e,n)=>ir(e,n.meta),{})}function k0(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function w5(t,e){let n=0,r=e.length;for(;n!==r;){const a=n+r>>1;_1(t,e[a])<0?r=a:n=a+1}const o=x5(t);return o&&(r=e.lastIndexOf(o,r-1)),r}function x5(t){let e=t;for(;e=e.parent;)if(b1(e)&&_1(t,e)===0)return e}function b1({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function L5(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let o=0;o<r.length;++o){const a=r[o].replace(h1," "),u=a.indexOf("="),f=Pc(u<0?a:a.slice(0,u)),p=u<0?null:Pc(a.slice(u+1));if(f in e){let v=e[f];Yo(v)||(v=e[f]=[v]),v.push(p)}else e[f]=p}return e}function P0(t){let e="";for(let n in t){const r=t[n];if(n=$4(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Yo(r)?r.map(a=>a&&fd(a)):[r&&fd(r)]).forEach(a=>{a!==void 0&&(e+=(e.length?"&":"")+n,a!=null&&(e+="="+a))})}return e}function C5(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Yo(r)?r.map(o=>o==null?null:""+o):r==null?r:""+r)}return e}const k5=Symbol(""),S0=Symbol(""),nf=Symbol(""),Xd=Symbol(""),pd=Symbol("");function Qu(){let t=[];function e(r){return t.push(r),()=>{const o=t.indexOf(r);o>-1&&t.splice(o,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function xl(t,e,n,r,o,a=u=>u()){const u=r&&(r.enterCallbacks[o]=r.enterCallbacks[o]||[]);return()=>new Promise((f,p)=>{const v=S=>{S===!1?p(Fu(4,{from:n,to:e})):S instanceof Error?p(S):u5(S)?p(Fu(2,{from:e,to:S})):(u&&r.enterCallbacks[o]===u&&typeof S=="function"&&u.push(S),f())},w=a(()=>t.call(r&&r.instances[o],e,n,v));let b=Promise.resolve(w);t.length<3&&(b=b.then(v)),b.catch(S=>p(S))})}function Df(t,e,n,r,o=a=>a()){const a=[];for(const u of t)for(const f in u.components){let p=u.components[f];if(!(e!=="beforeRouteEnter"&&!u.instances[f]))if(u1(p)){const w=(p.__vccOpts||p)[e];w&&a.push(xl(w,n,r,u,f,o))}else{let v=p();a.push(()=>v.then(w=>{if(!w)throw new Error(`Couldn't resolve component "${f}" at "${u.path}"`);const b=T4(w)?w.default:w;u.mods[f]=w,u.components[f]=b;const x=(b.__vccOpts||b)[e];return x&&xl(x,n,r,u,f,o)()}))}}return a}function E0(t){const e=Po(nf),n=Po(Xd),r=Fn(()=>{const p=On(t.to);return e.resolve(p)}),o=Fn(()=>{const{matched:p}=r.value,{length:v}=p,w=p[v-1],b=n.matched;if(!w||!b.length)return-1;const S=b.findIndex(Iu.bind(null,w));if(S>-1)return S;const x=A0(p[v-2]);return v>1&&A0(w)===x&&b[b.length-1].path!==x?b.findIndex(Iu.bind(null,p[v-2])):S}),a=Fn(()=>o.value>-1&&A5(n.params,r.value.params)),u=Fn(()=>o.value>-1&&o.value===n.matched.length-1&&g1(n.params,r.value.params));function f(p={}){if(E5(p)){const v=e[On(t.replace)?"replace":"push"](On(t.to)).catch(pc);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>v),v}return Promise.resolve()}return{route:r,href:Fn(()=>r.value.href),isActive:a,isExactActive:u,navigate:f}}function P5(t){return t.length===1?t[0]:t}const S5=ys({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:E0,setup(t,{slots:e}){const n=Ya(E0(t)),{options:r}=Po(nf),o=Fn(()=>({[M0(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[M0(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const a=e.default&&P5(e.default(n));return t.custom?a:Gd("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},a)}}}),Lu=S5;function E5(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function A5(t,e){for(const n in e){const r=e[n],o=t[n];if(typeof r=="string"){if(r!==o)return!1}else if(!Yo(o)||o.length!==r.length||r.some((a,u)=>a!==o[u]))return!1}return!0}function A0(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const M0=(t,e,n)=>t??e??n,M5=ys({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Po(pd),o=Fn(()=>t.route||r.value),a=Po(S0,0),u=Fn(()=>{let v=On(a);const{matched:w}=o.value;let b;for(;(b=w[v])&&!b.components;)v++;return v}),f=Fn(()=>o.value.matched[u.value]);ih(S0,Fn(()=>u.value+1)),ih(k5,f),ih(pd,o);const p=Ie();return zi(()=>[p.value,f.value,t.name],([v,w,b],[S,x,I])=>{w&&(w.instances[b]=v,x&&x!==w&&v&&v===S&&(w.leaveGuards.size||(w.leaveGuards=x.leaveGuards),w.updateGuards.size||(w.updateGuards=x.updateGuards))),v&&w&&(!x||!Iu(w,x)||!S)&&(w.enterCallbacks[b]||[]).forEach(D=>D(v))},{flush:"post"}),()=>{const v=o.value,w=t.name,b=f.value,S=b&&b.components[w];if(!S)return B0(n.default,{Component:S,route:v});const x=b.props[w],I=x?x===!0?v.params:typeof x=="function"?x(v):x:null,j=Gd(S,ir({},I,e,{onVnodeUnmounted:z=>{z.component.isUnmounted&&(b.instances[w]=null)},ref:p}));return B0(n.default,{Component:j,route:v})||j}}});function B0(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const w1=M5;function B5(t){const e=y5(t.routes,t),n=t.parseQuery||L5,r=t.stringifyQuery||P0,o=t.history,a=Qu(),u=Qu(),f=Qu(),p=Zv(gl);let v=gl;xu&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const w=Tf.bind(null,tt=>""+tt),b=Tf.bind(null,H4),S=Tf.bind(null,Pc);function x(tt,ft){let ht,At;return v1(tt)?(ht=e.getRecordMatcher(tt),At=ft):At=tt,e.addRoute(At,ht)}function I(tt){const ft=e.getRecordMatcher(tt);ft&&e.removeRoute(ft)}function D(){return e.getRoutes().map(tt=>tt.record)}function j(tt){return!!e.getRecordMatcher(tt)}function z(tt,ft){if(ft=ir({},ft||p.value),typeof tt=="string"){const yt=Nf(n,tt,ft.path),wt=e.resolve({path:yt.path},ft),K=o.createHref(yt.fullPath);return ir(yt,wt,{params:S(wt.params),hash:Pc(yt.hash),redirectedFrom:void 0,href:K})}let ht;if(tt.path!=null)ht=ir({},tt,{path:Nf(n,tt.path,ft.path).path});else{const yt=ir({},tt.params);for(const wt in yt)yt[wt]==null&&delete yt[wt];ht=ir({},tt,{params:b(yt)}),ft.params=b(ft.params)}const At=e.resolve(ht,ft),jt=tt.hash||"";At.params=w(S(At.params));const H=Z4(r,ir({},tt,{hash:q4(jt),path:At.path})),J=o.createHref(H);return ir({fullPath:H,hash:jt,query:r===P0?C5(tt.query):tt.query||{}},At,{redirectedFrom:void 0,href:J})}function W(tt){return typeof tt=="string"?Nf(n,tt,p.value.path):ir({},tt)}function Q(tt,ft){if(v!==tt)return Fu(8,{from:ft,to:tt})}function mt(tt){return Ft(tt)}function Tt(tt){return mt(ir(W(tt),{replace:!0}))}function Nt(tt){const ft=tt.matched[tt.matched.length-1];if(ft&&ft.redirect){const{redirect:ht}=ft;let At=typeof ht=="function"?ht(tt):ht;return typeof At=="string"&&(At=At.includes("?")||At.includes("#")?At=W(At):{path:At},At.params={}),ir({query:tt.query,hash:tt.hash,params:At.path!=null?{}:tt.params},At)}}function Ft(tt,ft){const ht=v=z(tt),At=p.value,jt=tt.state,H=tt.force,J=tt.replace===!0,yt=Nt(ht);if(yt)return Ft(ir(W(yt),{state:typeof yt=="object"?ir({},jt,yt.state):jt,force:H,replace:J}),ft||ht);const wt=ht;wt.redirectedFrom=ft;let K;return!H&&K4(r,At,ht)&&(K=Fu(16,{to:wt,from:At}),Y(At,At,!0,!1)),(K?Promise.resolve(K):Ut(wt,At)).catch(Ht=>$a(Ht)?$a(Ht,2)?Ht:gt(Ht):O(Ht,wt,At)).then(Ht=>{if(Ht){if($a(Ht,2))return Ft(ir({replace:J},W(Ht.to),{state:typeof Ht.to=="object"?ir({},jt,Ht.to.state):jt,force:H}),ft||wt)}else Ht=V(wt,At,!0,J,jt);return Z(wt,At,Ht),Ht})}function vt(tt,ft){const ht=Q(tt,ft);return ht?Promise.reject(ht):Promise.resolve()}function Ct(tt){const ft=et.values().next().value;return ft&&typeof ft.runWithContext=="function"?ft.runWithContext(tt):tt()}function Ut(tt,ft){let ht;const[At,jt,H]=T5(tt,ft);ht=Df(At.reverse(),"beforeRouteLeave",tt,ft);for(const yt of At)yt.leaveGuards.forEach(wt=>{ht.push(xl(wt,tt,ft))});const J=vt.bind(null,tt,ft);return ht.push(J),ct(ht).then(()=>{ht=[];for(const yt of a.list())ht.push(xl(yt,tt,ft));return ht.push(J),ct(ht)}).then(()=>{ht=Df(jt,"beforeRouteUpdate",tt,ft);for(const yt of jt)yt.updateGuards.forEach(wt=>{ht.push(xl(wt,tt,ft))});return ht.push(J),ct(ht)}).then(()=>{ht=[];for(const yt of H)if(yt.beforeEnter)if(Yo(yt.beforeEnter))for(const wt of yt.beforeEnter)ht.push(xl(wt,tt,ft));else ht.push(xl(yt.beforeEnter,tt,ft));return ht.push(J),ct(ht)}).then(()=>(tt.matched.forEach(yt=>yt.enterCallbacks={}),ht=Df(H,"beforeRouteEnter",tt,ft,Ct),ht.push(J),ct(ht))).then(()=>{ht=[];for(const yt of u.list())ht.push(xl(yt,tt,ft));return ht.push(J),ct(ht)}).catch(yt=>$a(yt,8)?yt:Promise.reject(yt))}function Z(tt,ft,ht){f.list().forEach(At=>Ct(()=>At(tt,ft,ht)))}function V(tt,ft,ht,At,jt){const H=Q(tt,ft);if(H)return H;const J=ft===gl,yt=xu?history.state:{};ht&&(At||J?o.replace(tt.fullPath,ir({scroll:J&&yt&&yt.scroll},jt)):o.push(tt.fullPath,jt)),p.value=tt,Y(tt,ft,ht,J),gt()}let St;function Et(){St||(St=o.listen((tt,ft,ht)=>{if(!lt.listening)return;const At=z(tt),jt=Nt(At);if(jt){Ft(ir(jt,{replace:!0,force:!0}),At).catch(pc);return}v=At;const H=p.value;xu&&r5(v0(H.fullPath,ht.delta),ef()),Ut(At,H).catch(J=>$a(J,12)?J:$a(J,2)?(Ft(ir(W(J.to),{force:!0}),At).then(yt=>{$a(yt,20)&&!ht.delta&&ht.type===Sc.pop&&o.go(-1,!1)}).catch(pc),Promise.reject()):(ht.delta&&o.go(-ht.delta,!1),O(J,At,H))).then(J=>{J=J||V(At,H,!1),J&&(ht.delta&&!$a(J,8)?o.go(-ht.delta,!1):ht.type===Sc.pop&&$a(J,20)&&o.go(-1,!1)),Z(At,H,J)}).catch(pc)}))}let M=Qu(),$=Qu(),q;function O(tt,ft,ht){gt(tt);const At=$.list();return At.length?At.forEach(jt=>jt(tt,ft,ht)):console.error(tt),Promise.reject(tt)}function dt(){return q&&p.value!==gl?Promise.resolve():new Promise((tt,ft)=>{M.add([tt,ft])})}function gt(tt){return q||(q=!tt,Et(),M.list().forEach(([ft,ht])=>tt?ht(tt):ft()),M.reset()),tt}function Y(tt,ft,ht,At){const{scrollBehavior:jt}=t;if(!xu||!jt)return Promise.resolve();const H=!ht&&i5(v0(tt.fullPath,0))||(At||!ht)&&history.state&&history.state.scroll||null;return Ai().then(()=>jt(tt,ft,H)).then(J=>J&&n5(J)).catch(J=>O(J,tt,ft))}const A=tt=>o.go(tt);let U;const et=new Set,lt={currentRoute:p,listening:!0,addRoute:x,removeRoute:I,clearRoutes:e.clearRoutes,hasRoute:j,getRoutes:D,resolve:z,options:t,push:mt,replace:Tt,go:A,back:()=>A(-1),forward:()=>A(1),beforeEach:a.add,beforeResolve:u.add,afterEach:f.add,onError:$.add,isReady:dt,install(tt){const ft=this;tt.component("RouterLink",Lu),tt.component("RouterView",w1),tt.config.globalProperties.$router=ft,Object.defineProperty(tt.config.globalProperties,"$route",{enumerable:!0,get:()=>On(p)}),xu&&!U&&p.value===gl&&(U=!0,mt(o.location).catch(jt=>{}));const ht={};for(const jt in gl)Object.defineProperty(ht,jt,{get:()=>p.value[jt],enumerable:!0});tt.provide(nf,ft),tt.provide(Xd,$g(ht)),tt.provide(pd,p);const At=tt.unmount;et.add(tt),tt.unmount=function(){et.delete(tt),et.size<1&&(v=gl,St&&St(),St=null,p.value=gl,U=!1,q=!1),At()}}};function ct(tt){return tt.reduce((ft,ht)=>ft.then(()=>Ct(ht)),Promise.resolve())}return lt}function T5(t,e){const n=[],r=[],o=[],a=Math.max(e.matched.length,t.matched.length);for(let u=0;u<a;u++){const f=e.matched[u];f&&(t.matched.find(v=>Iu(v,f))?r.push(f):n.push(f));const p=t.matched[u];p&&(e.matched.find(v=>Iu(v,p))||o.push(p))}return[n,r,o]}function Rc(){return Po(nf)}function TS(t){return Po(Xd)}var Co=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function x1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function N5(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var L1=N5,D5=typeof Co=="object"&&Co&&Co.Object===Object&&Co,O5=D5,R5=O5,I5=typeof self=="object"&&self&&self.Object===Object&&self,F5=R5||I5||Function("return this")(),C1=F5,j5=C1,z5=function(){return j5.Date.now()},U5=z5,q5=/\s/;function $5(t){for(var e=t.length;e--&&q5.test(t.charAt(e)););return e}var V5=$5,H5=V5,G5=/^\s+/;function W5(t){return t&&t.slice(0,H5(t)+1).replace(G5,"")}var Z5=W5,K5=C1,J5=K5.Symbol,k1=J5,T0=k1,P1=Object.prototype,Y5=P1.hasOwnProperty,X5=P1.toString,tc=T0?T0.toStringTag:void 0;function Q5(t){var e=Y5.call(t,tc),n=t[tc];try{t[tc]=void 0;var r=!0}catch{}var o=X5.call(t);return r&&(e?t[tc]=n:delete t[tc]),o}var tb=Q5,eb=Object.prototype,nb=eb.toString;function rb(t){return nb.call(t)}var ib=rb,N0=k1,sb=tb,ob=ib,ab="[object Null]",lb="[object Undefined]",D0=N0?N0.toStringTag:void 0;function ub(t){return t==null?t===void 0?lb:ab:D0&&D0 in Object(t)?sb(t):ob(t)}var cb=ub;function hb(t){return t!=null&&typeof t=="object"}var fb=hb,db=cb,pb=fb,gb="[object Symbol]";function mb(t){return typeof t=="symbol"||pb(t)&&db(t)==gb}var vb=mb,yb=Z5,O0=L1,_b=vb,R0=NaN,bb=/^[-+]0x[0-9a-f]+$/i,wb=/^0b[01]+$/i,xb=/^0o[0-7]+$/i,Lb=parseInt;function Cb(t){if(typeof t=="number")return t;if(_b(t))return R0;if(O0(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=O0(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=yb(t);var n=wb.test(t);return n||xb.test(t)?Lb(t.slice(2),n?2:8):bb.test(t)?R0:+t}var kb=Cb,Pb=L1,Of=U5,I0=kb,Sb="Expected a function",Eb=Math.max,Ab=Math.min;function Mb(t,e,n){var r,o,a,u,f,p,v=0,w=!1,b=!1,S=!0;if(typeof t!="function")throw new TypeError(Sb);e=I0(e)||0,Pb(n)&&(w=!!n.leading,b="maxWait"in n,a=b?Eb(I0(n.maxWait)||0,e):a,S="trailing"in n?!!n.trailing:S);function x(Nt){var Ft=r,vt=o;return r=o=void 0,v=Nt,u=t.apply(vt,Ft),u}function I(Nt){return v=Nt,f=setTimeout(z,e),w?x(Nt):u}function D(Nt){var Ft=Nt-p,vt=Nt-v,Ct=e-Ft;return b?Ab(Ct,a-vt):Ct}function j(Nt){var Ft=Nt-p,vt=Nt-v;return p===void 0||Ft>=e||Ft<0||b&&vt>=a}function z(){var Nt=Of();if(j(Nt))return W(Nt);f=setTimeout(z,D(Nt))}function W(Nt){return f=void 0,S&&r?x(Nt):(r=o=void 0,u)}function Q(){f!==void 0&&clearTimeout(f),v=0,r=p=o=f=void 0}function mt(){return f===void 0?u:W(Of())}function Tt(){var Nt=Of(),Ft=j(Nt);if(r=arguments,o=this,p=Nt,Ft){if(f===void 0)return I(p);if(b)return clearTimeout(f),f=setTimeout(z,e),x(p)}return f===void 0&&(f=setTimeout(z,e)),u}return Tt.cancel=Q,Tt.flush=mt,Tt}var Bb=Mb;const Tb=x1(Bb),Nb={class:"relative w-full"},Db={key:0,class:"search-results w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},Ob=["onClick"],F0=ys({__name:"SearchBar",emits:["select-location"],setup(t,{emit:e}){const n=Ie(""),r=Ie([]),o=e,a=Tb(async p=>{if(p.length<3){r.value=[];return}try{const w=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(p)}`)).json();r.value=w}catch(v){console.error("Erreur lors de la recherche d'adresse:",v),r.value=[]}},300);function u(){a(n.value)}function f(p){n.value=p.display_name,r.value=[],o("select-location",{lat:parseFloat(p.lat),lng:parseFloat(p.lon)})}return(p,v)=>(ie(),ue("div",Nb,[An(B("input",{"onUpdate:modelValue":v[0]||(v[0]=w=>n.value=w),onInput:u,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[fr,n.value]]),r.value.length>0?(ie(),ue("div",Db,[(ie(!0),ue(_n,null,Vn(r.value,w=>(ie(),ue("div",{key:w.place_id,onClick:b=>f(w),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},Se(w.display_name),9,Ob))),128))])):nn("",!0)]))}}),Rb={class:"h-screen flex flex-col"},Ib={key:0,class:"bg-white shadow-sm z-[2000]"},Fb={class:"mx-auto px-4 sm:px-6 lg:px-8"},jb={class:"flex h-16 items-center justify-between"},zb={class:"flex items-center space-x-8"},Ub={class:"hidden md:flex space-x-6"},qb={key:0,class:"hidden md:block flex-1 mx-8"},$b={key:1,class:"flex-1"},Vb={class:"flex items-center space-x-2 md:space-x-4"},Hb={class:"flex md:hidden"},Gb={class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Wb={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},Zb={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},Kb={class:"relative"},Jb={class:"hidden md:flex flex-col items-end"},Yb={class:"text-sm font-medium text-gray-700"},Xb={key:0,class:"text-xs text-gray-500"},Qb=["src","alt"],t3={key:0,class:"absolute right-0 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3000]"},e3={class:"md:hidden px-4 py-2 border-b border-gray-100"},n3={class:"text-sm font-medium text-gray-700"},r3={class:"text-xs text-gray-500"},i3={key:0,class:"md:hidden"},s3={class:"space-y-1 px-2 pb-3 pt-2"},o3={key:0,class:"px-4 py-3"},a3={class:"flex-1 flex flex-col overflow-hidden"},l3={key:0,class:"fixed inset-0 bg-white z-[2001] flex flex-col items-center justify-center p-6 text-center"},u3=ys({__name:"App",setup(t){const e=Rc(),n=vs(),r=Ie(!1),o=Ie(!1),a=Ie(!1);function u(){a.value=window.innerWidth<768}Ca(()=>{u(),window.addEventListener("resize",u)}),qh(()=>{window.removeEventListener("resize",u)});const f=Fn(()=>{const W=n.user;if(!W)return"";const Q=`${W.first_name} ${W.last_name.toUpperCase()}`;return W.company_name?`${Q} (${W.company_name})`:Q}),p=Fn(()=>{var Q;const W=(Q=n.user)==null?void 0:Q.user_type;switch(console.log("User type:",W),W){case"admin":return"Accès administrateur";case"dealer":return"Accès concessionnaire";case"client":return"Accès client";default:return""}}),v=Fn(()=>{var W;return((W=n.user)==null?void 0:W.user_type)==="admin"}),w=Ie(""),b=Fn(()=>n.isAuthenticated),S=[{name:"Carte",to:"/"},{name:"Plans",to:"/plans"}],x=Fn(()=>{var Q;if(!b.value)return[];const W=[...S];return v.value?W.push({name:"Utilisateurs",to:"/users"}):((Q=n.user)==null?void 0:Q.user_type)==="dealer"&&W.push({name:"Clients",to:"/clients"}),W}),I=Fn(()=>b.value?[{name:"Mon profil",to:"/profile"}]:[]);async function D(){try{await n.logout(),e.push("/login")}catch(W){console.error("Erreur lors de la déconnexion:",W)}}function j(W){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:W.lat,lng:W.lng,zoom:16}}))}Ca(async()=>{console.log("App mounted, checking auth...");try{localStorage.getItem("token")?(console.log("Token found, checking auth..."),await n.checkAuth(),await n.fetchUserProfile()):console.log("No token found")}catch(W){console.error("Auth check error:",W),e.push("/login")}});const z=Fn(()=>{const W="IrrigationDesign";if(!b.value)return`${W} - Connexion`;const Q=e.currentRoute.value,Tt={home:"Carte",plans:"Plans",users:"Utilisateurs",profile:"Mon profil",selectDealer:"Sélection du concessionnaire",changePassword:"Changement de mot de passe",map:"Carte"}[Q.name]||"";return Tt?`${W} - ${Tt}`:W});return zi(z,W=>{document.title=W},{immediate:!0}),(W,Q)=>(ie(),ue("div",Rb,[b.value?(ie(),ue("header",Ib,[B("nav",Fb,[B("div",jb,[B("div",zb,[Sr(On(Lu),{to:"/",class:"text-xl font-semibold text-primary-600 truncate"},{default:Za(()=>Q[4]||(Q[4]=[B("span",{class:"md:inline hidden"},"IrrigationDesign",-1),B("span",{class:"md:hidden inline"},"ID",-1)])),_:1}),B("div",Ub,[(ie(!0),ue(_n,null,Vn(x.value,mt=>(ie(),Ja(On(Lu),{key:mt.name,to:mt.to,class:zr(["text-sm font-medium transition-colors duration-200",[W.$route.path===mt.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Za(()=>[Ur(Se(mt.name),1)]),_:2},1032,["to","class"]))),128))])]),W.$route.path==="/"?(ie(),ue("div",qb,[Sr(F0,{onSelectLocation:j})])):(ie(),ue("div",$b)),B("div",Vb,[B("div",Hb,[B("button",{onClick:Q[0]||(Q[0]=mt=>o.value=!o.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500"},[Q[5]||(Q[5]=B("span",{class:"sr-only"},"Ouvrir le menu",-1)),(ie(),ue("svg",Gb,[o.value?(ie(),ue("path",Zb)):(ie(),ue("path",Wb))]))])]),Q[6]||(Q[6]=B("button",{class:"hidden md:flex p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},[B("span",{class:"sr-only"},"Voir les notifications"),B("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})])],-1)),B("div",Kb,[B("button",{onClick:Q[1]||(Q[1]=mt=>r.value=!r.value),class:"flex items-center space-x-2 md:space-x-3 focus:outline-none"},[B("div",Jb,[B("span",Yb,Se(f.value),1),p.value?(ie(),ue("span",Xb,Se(p.value),1)):nn("",!0)]),B("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:w.value||"https://ui-avatars.com/api/?name="+encodeURIComponent(f.value),alt:f.value},null,8,Qb)]),r.value?(ie(),ue("div",t3,[B("div",e3,[B("div",n3,Se(f.value),1),B("div",r3,Se(p.value),1)]),(ie(!0),ue(_n,null,Vn(I.value,mt=>(ie(),Ja(On(Lu),{key:mt.name,to:mt.to,class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:Q[2]||(Q[2]=Tt=>r.value=!1)},{default:Za(()=>[Ur(Se(mt.name),1)]),_:2},1032,["to"]))),128)),B("button",{onClick:D,class:"block w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-gray-50"}," Déconnexion ")])):nn("",!0)])])]),o.value?(ie(),ue("div",i3,[B("div",s3,[(ie(!0),ue(_n,null,Vn(x.value,mt=>(ie(),Ja(On(Lu),{key:mt.name,to:mt.to,class:zr(["block px-3 py-2 rounded-md text-base font-medium",[W.$route.path===mt.to?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]]),onClick:Q[3]||(Q[3]=Tt=>o.value=!1)},{default:Za(()=>[Ur(Se(mt.name),1)]),_:2},1032,["to","class"]))),128))]),W.$route.path==="/"?(ie(),ue("div",o3,[Sr(F0,{onSelectLocation:j})])):nn("",!0)])):nn("",!0)])])):nn("",!0),B("main",a3,[a.value&&W.$route.path==="/"?(ie(),ue("div",l3,[Q[8]||(Q[8]=B("svg",{class:"w-24 h-24 text-primary-500 mb-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),Q[9]||(Q[9]=B("h2",{class:"text-2xl font-bold text-gray-900 mb-4"}," Version bureau recommandée ",-1)),Q[10]||(Q[10]=B("p",{class:"text-gray-600 mb-8 max-w-md"}," Pour une meilleure expérience de conception d'irrigation, nous vous recommandons d'utiliser un écran plus large ou un ordinateur. ",-1)),Sr(On(Lu),{to:"/plans",class:"inline-flex items-center px-4 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700"},{default:Za(()=>Q[7]||(Q[7]=[Ur(" Voir mes plans ")])),_:1})])):(ie(),Ja(On(w1),{key:1}))])]))}}),c3="modulepreload",h3=function(t){return"/static/frontend/"+t},j0={},Yl=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));o=Promise.allSettled(n.map(p=>{if(p=h3(p),p in j0)return;j0[p]=!0;const v=p.endsWith(".css"),w=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${w}`))return;const b=document.createElement("link");if(b.rel=v?"stylesheet":c3,v||(b.as="script"),b.crossOrigin="",b.href=p,f&&b.setAttribute("nonce",f),document.head.appendChild(b),v)return new Promise((S,x)=>{b.addEventListener("load",S),b.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return o.then(u=>{for(const f of u||[])f.status==="rejected"&&a(f.reason);return e().catch(a)})},f3={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},d3={class:"max-w-md w-full space-y-8"},p3={class:"space-y-4"},g3={class:"mt-1"},m3={class:"mt-1"},v3={class:"mt-1"},y3={key:0,class:"rounded-md bg-red-50 p-4"},_3={class:"flex"},b3={class:"ml-3"},w3={class:"text-sm font-medium text-red-800"},x3={key:1,class:"rounded-md bg-yellow-50 p-4"},L3={class:"flex"},C3={class:"ml-3"},k3={class:"mt-2 text-sm text-yellow-700"},P3={class:"list-disc pl-5 space-y-1"},S3=["disabled"],E3={class:"absolute left-0 inset-y-0 flex items-center pl-3"},A3={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},M3={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},B3=ys({__name:"ChangePasswordForm",setup(t){const e=Rc(),n=vs(),r=Ya({oldPassword:"",newPassword:"",confirmPassword:""}),o=Ie(!1),a=Ie("");Ca(()=>{var v,w;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:n.isAuthenticated,userId:(v=n.user)==null?void 0:v.id,mustChangePassword:(w=n.user)==null?void 0:w.must_change_password})});const u=Fn(()=>{const v=[];return r.newPassword&&r.newPassword.length<8&&v.push("Le nouveau mot de passe doit contenir au moins 8 caractères"),r.newPassword&&r.confirmPassword&&r.newPassword!==r.confirmPassword&&v.push("Les mots de passe ne correspondent pas"),v}),f=Fn(()=>r.oldPassword.length>0&&r.newPassword.length>=8&&r.newPassword===r.confirmPassword);async function p(){var v,w,b,S,x,I,D,j;if(!f.value){a.value="Veuillez corriger les erreurs avant de continuer";return}if(!((v=n.user)!=null&&v.id)){a.value="Erreur : utilisateur non identifié";return}o.value=!0,a.value="";try{console.log("Submitting password change..."),await n.changePassword(r.oldPassword,r.newPassword),console.log("Password changed successfully"),e.push("/")}catch(z){console.error("Password change failed:",z),(b=(w=z.response)==null?void 0:w.data)!=null&&b.detail?a.value=z.response.data.detail:(x=(S=z.response)==null?void 0:S.data)!=null&&x.old_password?a.value=z.response.data.old_password[0]:(D=(I=z.response)==null?void 0:I.data)!=null&&D.password?a.value=z.response.data.password[0]:((j=z.response)==null?void 0:j.status)===401?(a.value="Session expirée, veuillez vous reconnecter",await n.logout(),e.push("/login")):a.value="Une erreur est survenue lors du changement de mot de passe"}finally{o.value=!1}}return(v,w)=>(ie(),ue("div",f3,[B("div",d3,[w[12]||(w[12]=B("div",null,[B("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),B("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de sécurité, vous devez changer votre mot de passe. ")],-1)),B("form",{class:"mt-8 space-y-6",onSubmit:Wh(p,["prevent"])},[B("div",p3,[B("div",null,[w[3]||(w[3]=B("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),B("div",g3,[An(B("input",{id:"old-password","onUpdate:modelValue":w[0]||(w[0]=b=>r.oldPassword=b),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[fr,r.oldPassword]])])]),B("div",null,[w[4]||(w[4]=B("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),B("div",m3,[An(B("input",{id:"new-password","onUpdate:modelValue":w[1]||(w[1]=b=>r.newPassword=b),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[fr,r.newPassword]])]),w[5]||(w[5]=B("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractères ",-1))]),B("div",null,[w[6]||(w[6]=B("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),B("div",v3,[An(B("input",{id:"confirm-password","onUpdate:modelValue":w[2]||(w[2]=b=>r.confirmPassword=b),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[fr,r.confirmPassword]])])])]),a.value?(ie(),ue("div",y3,[B("div",_3,[w[7]||(w[7]=B("div",{class:"flex-shrink-0"},[B("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),B("div",b3,[B("h3",w3,Se(a.value),1)])])])):nn("",!0),u.value.length>0?(ie(),ue("div",x3,[B("div",L3,[w[9]||(w[9]=B("div",{class:"flex-shrink-0"},[B("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),B("div",C3,[w[8]||(w[8]=B("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),B("div",k3,[B("ul",P3,[(ie(!0),ue(_n,null,Vn(u.value,(b,S)=>(ie(),ue("li",{key:S},Se(b),1))),128))])])])])])):nn("",!0),B("div",null,[B("button",{type:"submit",disabled:o.value||!f.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[B("span",E3,[o.value?(ie(),ue("svg",M3,w[11]||(w[11]=[B("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),B("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(ie(),ue("svg",A3,w[10]||(w[10]=[B("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),Ur(" "+Se(o.value?"Modification en cours...":"Changer le mot de passe"),1)],8,S3)])],32)])]))}}),T3="/static/frontend/assets/logo.svg",N3={class:"min-h-screen bg-white from-blue-50 to-white flex flex-col justify-center py-12 sm:px-6 lg:px-8"},D3={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},O3={class:"bg-white py-8 px-6 shadow-lg rounded-md sm:px-10"},R3={key:0,class:"rounded-md bg-red-50 p-4"},I3={class:"flex"},F3={class:"ml-3"},j3={class:"text-sm font-medium text-red-800"},z3={class:"mt-1"},U3={class:"mt-1 relative"},q3=["type"],$3={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},V3={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},H3={class:"flex items-center justify-between"},G3={class:"flex items-center"},W3={class:"text-sm"},Z3=["disabled"],K3={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},J3=ys({__name:"LoginView",setup(t){const e=Rc(),n=vs(),r=Ie(!1),o=Ie(null),a=Ie(!1),u=Ya({username:"",password:"",rememberMe:!1});Ca(()=>{var p;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE),(p=window.INITIAL_STATE)!=null&&p.isAuthenticated&&(console.log("User is authenticated, redirecting to home"),e.push("/"))});async function f(){var p,v,w,b,S,x;r.value=!0,o.value=null;try{if(!u.username||!u.password){o.value="Veuillez remplir tous les champs";return}await n.login(u.username,u.password),(p=n.user)!=null&&p.must_change_password?e.push("/change-password"):e.push("/")}catch(I){console.error("Login error:",I),o.value=((w=(v=I==null?void 0:I.response)==null?void 0:v.data)==null?void 0:w.detail)||((x=(S=(b=I==null?void 0:I.response)==null?void 0:b.data)==null?void 0:S.non_field_errors)==null?void 0:x[0])||(I==null?void 0:I.message)||"Erreur lors de la connexion"}finally{r.value=!1}}return(p,v)=>{const w=xy("router-link");return ie(),ue("div",N3,[v[12]||(v[12]=B("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[B("img",{src:T3,alt:"IrrigationDesign Logo",class:"mx-auto h-40 w-auto transition-transform duration-300 hover:scale-110"}),B("h2",{class:"mt-2 text-center text-3xl font-bold text-gray-800"}," IrrigationDesign "),B("p",{class:"mt-2 text-center text-sm text-gray-600"}," Connectez-vous pour accéder à votre espace ")],-1)),B("div",D3,[B("div",O3,[B("form",{class:"space-y-6",onSubmit:Wh(f,["prevent"])},[o.value?(ie(),ue("div",R3,[B("div",I3,[v[4]||(v[4]=B("div",{class:"flex-shrink-0"},[B("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),B("div",F3,[B("h3",j3,Se(o.value),1)])])])):nn("",!0),B("div",null,[v[5]||(v[5]=B("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),B("div",z3,[An(B("input",{id:"username","onUpdate:modelValue":v[0]||(v[0]=b=>u.username=b),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[fr,u.username]])])]),B("div",null,[v[8]||(v[8]=B("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),B("div",U3,[An(B("input",{id:"password","onUpdate:modelValue":v[1]||(v[1]=b=>u.password=b),type:a.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,q3),[[z_,u.password]]),B("button",{type:"button",onClick:v[2]||(v[2]=b=>a.value=!a.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[a.value?(ie(),ue("svg",$3,v[6]||(v[6]=[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(ie(),ue("svg",V3,v[7]||(v[7]=[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),B("div",H3,[B("div",G3,[An(B("input",{id:"remember-me","onUpdate:modelValue":v[3]||(v[3]=b=>u.rememberMe=b),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[Bm,u.rememberMe]]),v[9]||(v[9]=B("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),B("div",W3,[Sr(w,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Za(()=>v[10]||(v[10]=[Ur(" Mot de passe oublié ? ")])),_:1})])]),B("div",null,[B("button",{type:"submit",disabled:r.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[r.value?(ie(),ue("svg",K3,v[11]||(v[11]=[B("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),B("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):nn("",!0),Ur(" "+Se(r.value?"Connexion en cours...":"Se connecter"),1)],8,Z3)])],32)])])])}}}),z0="/static/frontend/assets/logo.jpeg";var gd={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(Co,function(n){var r="1.9.4";function o(i){var c,m,P,F;for(m=1,P=arguments.length;m<P;m++){F=arguments[m];for(c in F)i[c]=F[c]}return i}var a=Object.create||function(){function i(){}return function(c){return i.prototype=c,new i}}();function u(i,c){var m=Array.prototype.slice;if(i.bind)return i.bind.apply(i,m.call(arguments,1));var P=m.call(arguments,2);return function(){return i.apply(c,P.length?P.concat(m.call(arguments)):arguments)}}var f=0;function p(i){return"_leaflet_id"in i||(i._leaflet_id=++f),i._leaflet_id}function v(i,c,m){var P,F,at,$t;return $t=function(){P=!1,F&&(at.apply(m,F),F=!1)},at=function(){P?F=arguments:(i.apply(m,arguments),setTimeout($t,c),P=!0)},at}function w(i,c,m){var P=c[1],F=c[0],at=P-F;return i===P&&m?i:((i-F)%at+at)%at+F}function b(){return!1}function S(i,c){if(c===!1)return i;var m=Math.pow(10,c===void 0?6:c);return Math.round(i*m)/m}function x(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function I(i){return x(i).split(/\s+/)}function D(i,c){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?a(i.options):{});for(var m in c)i.options[m]=c[m];return i.options}function j(i,c,m){var P=[];for(var F in i)P.push(encodeURIComponent(m?F.toUpperCase():F)+"="+encodeURIComponent(i[F]));return(!c||c.indexOf("?")===-1?"?":"&")+P.join("&")}var z=/\{ *([\w_ -]+) *\}/g;function W(i,c){return i.replace(z,function(m,P){var F=c[P];if(F===void 0)throw new Error("No value provided for variable "+m);return typeof F=="function"&&(F=F(c)),F})}var Q=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function mt(i,c){for(var m=0;m<i.length;m++)if(i[m]===c)return m;return-1}var Tt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Nt(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var Ft=0;function vt(i){var c=+new Date,m=Math.max(0,16-(c-Ft));return Ft=c+m,window.setTimeout(i,m)}var Ct=window.requestAnimationFrame||Nt("RequestAnimationFrame")||vt,Ut=window.cancelAnimationFrame||Nt("CancelAnimationFrame")||Nt("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function Z(i,c,m){if(m&&Ct===vt)i.call(c);else return Ct.call(window,u(i,c))}function V(i){i&&Ut.call(window,i)}var St={__proto__:null,extend:o,create:a,bind:u,get lastId(){return f},stamp:p,throttle:v,wrapNum:w,falseFn:b,formatNum:S,trim:x,splitWords:I,setOptions:D,getParamString:j,template:W,isArray:Q,indexOf:mt,emptyImageUrl:Tt,requestFn:Ct,cancelFn:Ut,requestAnimFrame:Z,cancelAnimFrame:V};function Et(){}Et.extend=function(i){var c=function(){D(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},m=c.__super__=this.prototype,P=a(m);P.constructor=c,c.prototype=P;for(var F in this)Object.prototype.hasOwnProperty.call(this,F)&&F!=="prototype"&&F!=="__super__"&&(c[F]=this[F]);return i.statics&&o(c,i.statics),i.includes&&(M(i.includes),o.apply(null,[P].concat(i.includes))),o(P,i),delete P.statics,delete P.includes,P.options&&(P.options=m.options?a(m.options):{},o(P.options,i.options)),P._initHooks=[],P.callInitHooks=function(){if(!this._initHooksCalled){m.callInitHooks&&m.callInitHooks.call(this),this._initHooksCalled=!0;for(var at=0,$t=P._initHooks.length;at<$t;at++)P._initHooks[at].call(this)}},c},Et.include=function(i){var c=this.prototype.options;return o(this.prototype,i),i.options&&(this.prototype.options=c,this.mergeOptions(i.options)),this},Et.mergeOptions=function(i){return o(this.prototype.options,i),this},Et.addInitHook=function(i){var c=Array.prototype.slice.call(arguments,1),m=typeof i=="function"?i:function(){this[i].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(m),this};function M(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=Q(i)?i:[i];for(var c=0;c<i.length;c++)i[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var $={on:function(i,c,m){if(typeof i=="object")for(var P in i)this._on(P,i[P],c);else{i=I(i);for(var F=0,at=i.length;F<at;F++)this._on(i[F],c,m)}return this},off:function(i,c,m){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var P in i)this._off(P,i[P],c);else{i=I(i);for(var F=arguments.length===1,at=0,$t=i.length;at<$t;at++)F?this._off(i[at]):this._off(i[at],c,m)}return this},_on:function(i,c,m,P){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(i,c,m)===!1){m===this&&(m=void 0);var F={fn:c,ctx:m};P&&(F.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(F)}},_off:function(i,c,m){var P,F,at;if(this._events&&(P=this._events[i],!!P)){if(arguments.length===1){if(this._firingCount)for(F=0,at=P.length;F<at;F++)P[F].fn=b;delete this._events[i];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var $t=this._listens(i,c,m);if($t!==!1){var fe=P[$t];this._firingCount&&(fe.fn=b,this._events[i]=P=P.slice()),P.splice($t,1)}}},fire:function(i,c,m){if(!this.listens(i,m))return this;var P=o({},c,{type:i,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var F=this._events[i];if(F){this._firingCount=this._firingCount+1||1;for(var at=0,$t=F.length;at<$t;at++){var fe=F[at],_e=fe.fn;fe.once&&this.off(i,_e,fe.ctx),_e.call(fe.ctx||this,P)}this._firingCount--}}return m&&this._propagateEvent(P),this},listens:function(i,c,m,P){typeof i!="string"&&console.warn('"string" type argument expected');var F=c;typeof c!="function"&&(P=!!c,F=void 0,m=void 0);var at=this._events&&this._events[i];if(at&&at.length&&this._listens(i,F,m)!==!1)return!0;if(P){for(var $t in this._eventParents)if(this._eventParents[$t].listens(i,c,m,P))return!0}return!1},_listens:function(i,c,m){if(!this._events)return!1;var P=this._events[i]||[];if(!c)return!!P.length;m===this&&(m=void 0);for(var F=0,at=P.length;F<at;F++)if(P[F].fn===c&&P[F].ctx===m)return F;return!1},once:function(i,c,m){if(typeof i=="object")for(var P in i)this._on(P,i[P],c,!0);else{i=I(i);for(var F=0,at=i.length;F<at;F++)this._on(i[F],c,m,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[p(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[p(i)],this},_propagateEvent:function(i){for(var c in this._eventParents)this._eventParents[c].fire(i.type,o({layer:i.target,propagatedFrom:i.target},i),!0)}};$.addEventListener=$.on,$.removeEventListener=$.clearAllEventListeners=$.off,$.addOneTimeEventListener=$.once,$.fireEvent=$.fire,$.hasEventListeners=$.listens;var q=Et.extend($);function O(i,c,m){this.x=m?Math.round(i):i,this.y=m?Math.round(c):c}var dt=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};O.prototype={clone:function(){return new O(this.x,this.y)},add:function(i){return this.clone()._add(gt(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(gt(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new O(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new O(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=dt(this.x),this.y=dt(this.y),this},distanceTo:function(i){i=gt(i);var c=i.x-this.x,m=i.y-this.y;return Math.sqrt(c*c+m*m)},equals:function(i){return i=gt(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=gt(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+S(this.x)+", "+S(this.y)+")"}};function gt(i,c,m){return i instanceof O?i:Q(i)?new O(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new O(i.x,i.y):new O(i,c,m)}function Y(i,c){if(i)for(var m=c?[i,c]:i,P=0,F=m.length;P<F;P++)this.extend(m[P])}Y.prototype={extend:function(i){var c,m;if(!i)return this;if(i instanceof O||typeof i[0]=="number"||"x"in i)c=m=gt(i);else if(i=A(i),c=i.min,m=i.max,!c||!m)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=m.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(m.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(m.y,this.max.y)),this},getCenter:function(i){return gt((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return gt(this.min.x,this.max.y)},getTopRight:function(){return gt(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var c,m;return typeof i[0]=="number"||i instanceof O?i=gt(i):i=A(i),i instanceof Y?(c=i.min,m=i.max):c=m=i,c.x>=this.min.x&&m.x<=this.max.x&&c.y>=this.min.y&&m.y<=this.max.y},intersects:function(i){i=A(i);var c=this.min,m=this.max,P=i.min,F=i.max,at=F.x>=c.x&&P.x<=m.x,$t=F.y>=c.y&&P.y<=m.y;return at&&$t},overlaps:function(i){i=A(i);var c=this.min,m=this.max,P=i.min,F=i.max,at=F.x>c.x&&P.x<m.x,$t=F.y>c.y&&P.y<m.y;return at&&$t},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var c=this.min,m=this.max,P=Math.abs(c.x-m.x)*i,F=Math.abs(c.y-m.y)*i;return A(gt(c.x-P,c.y-F),gt(m.x+P,m.y+F))},equals:function(i){return i?(i=A(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function A(i,c){return!i||i instanceof Y?i:new Y(i,c)}function U(i,c){if(i)for(var m=c?[i,c]:i,P=0,F=m.length;P<F;P++)this.extend(m[P])}U.prototype={extend:function(i){var c=this._southWest,m=this._northEast,P,F;if(i instanceof lt)P=i,F=i;else if(i instanceof U){if(P=i._southWest,F=i._northEast,!P||!F)return this}else return i?this.extend(ct(i)||et(i)):this;return!c&&!m?(this._southWest=new lt(P.lat,P.lng),this._northEast=new lt(F.lat,F.lng)):(c.lat=Math.min(P.lat,c.lat),c.lng=Math.min(P.lng,c.lng),m.lat=Math.max(F.lat,m.lat),m.lng=Math.max(F.lng,m.lng)),this},pad:function(i){var c=this._southWest,m=this._northEast,P=Math.abs(c.lat-m.lat)*i,F=Math.abs(c.lng-m.lng)*i;return new U(new lt(c.lat-P,c.lng-F),new lt(m.lat+P,m.lng+F))},getCenter:function(){return new lt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new lt(this.getNorth(),this.getWest())},getSouthEast:function(){return new lt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof lt||"lat"in i?i=ct(i):i=et(i);var c=this._southWest,m=this._northEast,P,F;return i instanceof U?(P=i.getSouthWest(),F=i.getNorthEast()):P=F=i,P.lat>=c.lat&&F.lat<=m.lat&&P.lng>=c.lng&&F.lng<=m.lng},intersects:function(i){i=et(i);var c=this._southWest,m=this._northEast,P=i.getSouthWest(),F=i.getNorthEast(),at=F.lat>=c.lat&&P.lat<=m.lat,$t=F.lng>=c.lng&&P.lng<=m.lng;return at&&$t},overlaps:function(i){i=et(i);var c=this._southWest,m=this._northEast,P=i.getSouthWest(),F=i.getNorthEast(),at=F.lat>c.lat&&P.lat<m.lat,$t=F.lng>c.lng&&P.lng<m.lng;return at&&$t},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,c){return i?(i=et(i),this._southWest.equals(i.getSouthWest(),c)&&this._northEast.equals(i.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function et(i,c){return i instanceof U?i:new U(i,c)}function lt(i,c,m){if(isNaN(i)||isNaN(c))throw new Error("Invalid LatLng object: ("+i+", "+c+")");this.lat=+i,this.lng=+c,m!==void 0&&(this.alt=+m)}lt.prototype={equals:function(i,c){if(!i)return!1;i=ct(i);var m=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return m<=(c===void 0?1e-9:c)},toString:function(i){return"LatLng("+S(this.lat,i)+", "+S(this.lng,i)+")"},distanceTo:function(i){return ft.distance(this,ct(i))},wrap:function(){return ft.wrapLatLng(this)},toBounds:function(i){var c=180*i/40075017,m=c/Math.cos(Math.PI/180*this.lat);return et([this.lat-c,this.lng-m],[this.lat+c,this.lng+m])},clone:function(){return new lt(this.lat,this.lng,this.alt)}};function ct(i,c,m){return i instanceof lt?i:Q(i)&&typeof i[0]!="object"?i.length===3?new lt(i[0],i[1],i[2]):i.length===2?new lt(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new lt(i.lat,"lng"in i?i.lng:i.lon,i.alt):c===void 0?null:new lt(i,c,m)}var tt={latLngToPoint:function(i,c){var m=this.projection.project(i),P=this.scale(c);return this.transformation._transform(m,P)},pointToLatLng:function(i,c){var m=this.scale(c),P=this.transformation.untransform(i,m);return this.projection.unproject(P)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var c=this.projection.bounds,m=this.scale(i),P=this.transformation.transform(c.min,m),F=this.transformation.transform(c.max,m);return new Y(P,F)},infinite:!1,wrapLatLng:function(i){var c=this.wrapLng?w(i.lng,this.wrapLng,!0):i.lng,m=this.wrapLat?w(i.lat,this.wrapLat,!0):i.lat,P=i.alt;return new lt(m,c,P)},wrapLatLngBounds:function(i){var c=i.getCenter(),m=this.wrapLatLng(c),P=c.lat-m.lat,F=c.lng-m.lng;if(P===0&&F===0)return i;var at=i.getSouthWest(),$t=i.getNorthEast(),fe=new lt(at.lat-P,at.lng-F),_e=new lt($t.lat-P,$t.lng-F);return new U(fe,_e)}},ft=o({},tt,{wrapLng:[-180,180],R:6371e3,distance:function(i,c){var m=Math.PI/180,P=i.lat*m,F=c.lat*m,at=Math.sin((c.lat-i.lat)*m/2),$t=Math.sin((c.lng-i.lng)*m/2),fe=at*at+Math.cos(P)*Math.cos(F)*$t*$t,_e=2*Math.atan2(Math.sqrt(fe),Math.sqrt(1-fe));return this.R*_e}}),ht=6378137,At={R:ht,MAX_LATITUDE:85.0511287798,project:function(i){var c=Math.PI/180,m=this.MAX_LATITUDE,P=Math.max(Math.min(m,i.lat),-m),F=Math.sin(P*c);return new O(this.R*i.lng*c,this.R*Math.log((1+F)/(1-F))/2)},unproject:function(i){var c=180/Math.PI;return new lt((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*c,i.x*c/this.R)},bounds:function(){var i=ht*Math.PI;return new Y([-i,-i],[i,i])}()};function jt(i,c,m,P){if(Q(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=c,this._c=m,this._d=P}jt.prototype={transform:function(i,c){return this._transform(i.clone(),c)},_transform:function(i,c){return c=c||1,i.x=c*(this._a*i.x+this._b),i.y=c*(this._c*i.y+this._d),i},untransform:function(i,c){return c=c||1,new O((i.x/c-this._b)/this._a,(i.y/c-this._d)/this._c)}};function H(i,c,m,P){return new jt(i,c,m,P)}var J=o({},ft,{code:"EPSG:3857",projection:At,transformation:function(){var i=.5/(Math.PI*At.R);return H(i,.5,-i,.5)}()}),yt=o({},J,{code:"EPSG:900913"});function wt(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function K(i,c){var m="",P,F,at,$t,fe,_e;for(P=0,at=i.length;P<at;P++){for(fe=i[P],F=0,$t=fe.length;F<$t;F++)_e=fe[F],m+=(F?"L":"M")+_e.x+" "+_e.y;m+=c?$e.svg?"z":"x":""}return m||"M0 0"}var Ht=document.documentElement.style,ne="ActiveXObject"in window,Zt=ne&&!document.addEventListener,Dt="msLaunchUri"in navigator&&!("documentMode"in document),Lt=Un("webkit"),ae=Un("android"),te=Un("android 2")||Un("android 3"),xe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),zt=ae&&Un("Google")&&xe<537&&!("AudioNode"in window),pe=!!window.opera,qe=!Dt&&Un("chrome"),He=Un("gecko")&&!Lt&&!pe&&!ne,Fe=!qe&&Un("safari"),Xe=Un("phantom"),De="OTransition"in Ht,on=navigator.platform.indexOf("Win")===0,pn=ne&&"transition"in Ht,cr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!te,rn="MozPerspective"in Ht,hn=!window.L_DISABLE_3D&&(pn||cr||rn)&&!De&&!Xe,Ze=typeof orientation<"u"||Un("mobile"),Pn=Ze&&Lt,vr=Ze&&cr,Tn=!window.PointerEvent&&window.MSPointerEvent,or=!!(window.PointerEvent||Tn),dr="ontouchstart"in window||!!window.TouchEvent,qn=!window.L_NO_TOUCH&&(dr||or),ze=Ze&&pe,Ne=Ze&&He,Mr=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ar=function(){var i=!1;try{var c=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",b,c),window.removeEventListener("testPassiveEventSupport",b,c)}catch{}return i}(),je=function(){return!!document.createElement("canvas").getContext}(),hr=!!(document.createElementNS&&wt("svg").createSVGRect),tn=!!hr&&function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),nr=!hr&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var c=i.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),Ni=navigator.platform.indexOf("Mac")===0,qr=navigator.platform.indexOf("Linux")===0;function Un(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var $e={ie:ne,ielt9:Zt,edge:Dt,webkit:Lt,android:ae,android23:te,androidStock:zt,opera:pe,chrome:qe,gecko:He,safari:Fe,phantom:Xe,opera12:De,win:on,ie3d:pn,webkit3d:cr,gecko3d:rn,any3d:hn,mobile:Ze,mobileWebkit:Pn,mobileWebkit3d:vr,msPointer:Tn,pointer:or,touch:qn,touchNative:dr,mobileOpera:ze,mobileGecko:Ne,retina:Mr,passiveEvents:ar,canvas:je,svg:hr,vml:nr,inlineSvg:tn,mac:Ni,linux:qr},$r=$e.msPointer?"MSPointerDown":"pointerdown",_s=$e.msPointer?"MSPointerMove":"pointermove",bi=$e.msPointer?"MSPointerUp":"pointerup",ci=$e.msPointer?"MSPointerCancel":"pointercancel",ti={touchstart:$r,touchmove:_s,touchend:bi,touchcancel:ci},hi={touchstart:Xn,touchmove:ws,touchend:ws,touchcancel:ws},Ir={},ei=!1;function Di(i,c,m){return c==="touchstart"&&os(),hi[c]?(m=hi[c].bind(this,m),i.addEventListener(ti[c],m,!1),m):(console.warn("wrong event specified:",c),b)}function bs(i,c,m){if(!ti[c]){console.warn("wrong event specified:",c);return}i.removeEventListener(ti[c],m,!1)}function qs(i){Ir[i.pointerId]=i}function $s(i){Ir[i.pointerId]&&(Ir[i.pointerId]=i)}function Ui(i){delete Ir[i.pointerId]}function os(){ei||(document.addEventListener($r,qs,!0),document.addEventListener(_s,$s,!0),document.addEventListener(bi,Ui,!0),document.addEventListener(ci,Ui,!0),ei=!0)}function ws(i,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var m in Ir)c.touches.push(Ir[m]);c.changedTouches=[c],i(c)}}function Xn(i,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&xr(c),ws(i,c)}function xs(i){var c={},m,P;for(P in i)m=i[P],c[P]=m&&m.bind?m.bind(i):m;return i=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var Ls=200;function ea(i,c){i.addEventListener("dblclick",c);var m=0,P;function F(at){if(at.detail!==1){P=at.detail;return}if(!(at.pointerType==="mouse"||at.sourceCapabilities&&!at.sourceCapabilities.firesTouchEvents)){var $t=Zs(at);if(!($t.some(function(_e){return _e instanceof HTMLLabelElement&&_e.attributes.for})&&!$t.some(function(_e){return _e instanceof HTMLInputElement||_e instanceof HTMLSelectElement}))){var fe=Date.now();fe-m<=Ls?(P++,P===2&&c(xs(at))):P=1,m=fe}}}return i.addEventListener("click",F),{dblclick:c,simDblclick:F}}function Nl(i,c){i.removeEventListener("dblclick",c.dblclick),i.removeEventListener("click",c.simDblclick)}var Ao=na(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Mo=na(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Pa=Mo==="webkitTransition"||Mo==="OTransition"?Mo+"End":"transitionend";function Qa(i){return typeof i=="string"?document.getElementById(i):i}function Oi(i,c){var m=i.style[c]||i.currentStyle&&i.currentStyle[c];if((!m||m==="auto")&&document.defaultView){var P=document.defaultView.getComputedStyle(i,null);m=P?P[c]:null}return m==="auto"?null:m}function jn(i,c,m){var P=document.createElement(i);return P.className=c||"",m&&m.appendChild(P),P}function xn(i){var c=i.parentNode;c&&c.removeChild(i)}function oo(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Vs(i){var c=i.parentNode;c&&c.lastChild!==i&&c.appendChild(i)}function Cs(i){var c=i.parentNode;c&&c.firstChild!==i&&c.insertBefore(i,c.firstChild)}function Bo(i,c){if(i.classList!==void 0)return i.classList.contains(c);var m=Vr(i);return m.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(m)}function kn(i,c){if(i.classList!==void 0)for(var m=I(c),P=0,F=m.length;P<F;P++)i.classList.add(m[P]);else if(!Bo(i,c)){var at=Vr(i);ao(i,(at?at+" ":"")+c)}}function $n(i,c){i.classList!==void 0?i.classList.remove(c):ao(i,x((" "+Vr(i)+" ").replace(" "+c+" "," ")))}function ao(i,c){i.className.baseVal===void 0?i.className=c:i.className.baseVal=c}function Vr(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function ni(i,c){"opacity"in i.style?i.style.opacity=c:"filter"in i.style&&tl(i,c)}function tl(i,c){var m=!1,P="DXImageTransform.Microsoft.Alpha";try{m=i.filters.item(P)}catch{if(c===1)return}c=Math.round(c*100),m?(m.Enabled=c!==100,m.Opacity=c):i.style.filter+=" progid:"+P+"(opacity="+c+")"}function na(i){for(var c=document.documentElement.style,m=0;m<i.length;m++)if(i[m]in c)return i[m];return!1}function ks(i,c,m){var P=c||new O(0,0);i.style[Ao]=($e.ie3d?"translate("+P.x+"px,"+P.y+"px)":"translate3d("+P.x+"px,"+P.y+"px,0)")+(m?" scale("+m+")":"")}function yr(i,c){i._leaflet_pos=c,$e.any3d?ks(i,c):(i.style.left=c.x+"px",i.style.top=c.y+"px")}function Ps(i){return i._leaflet_pos||new O(0,0)}var To,Hs,Sa;if("onselectstart"in document)To=function(){Ln(window,"selectstart",xr)},Hs=function(){Rn(window,"selectstart",xr)};else{var lo=na(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);To=function(){if(lo){var i=document.documentElement.style;Sa=i[lo],i[lo]="none"}},Hs=function(){lo&&(document.documentElement.style[lo]=Sa,Sa=void 0)}}function Ea(){Ln(window,"dragstart",xr)}function as(){Rn(window,"dragstart",xr)}var Gs,uo;function ra(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(Br(),Gs=i,uo=i.style.outlineStyle,i.style.outlineStyle="none",Ln(window,"keydown",Br))}function Br(){Gs&&(Gs.style.outlineStyle=uo,Gs=void 0,uo=void 0,Rn(window,"keydown",Br))}function el(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function ia(i){var c=i.getBoundingClientRect();return{x:c.width/i.offsetWidth||1,y:c.height/i.offsetHeight||1,boundingClientRect:c}}var bn={__proto__:null,TRANSFORM:Ao,TRANSITION:Mo,TRANSITION_END:Pa,get:Qa,getStyle:Oi,create:jn,remove:xn,empty:oo,toFront:Vs,toBack:Cs,hasClass:Bo,addClass:kn,removeClass:$n,setClass:ao,getClass:Vr,setOpacity:ni,testProp:na,setTransform:ks,setPosition:yr,getPosition:Ps,get disableTextSelection(){return To},get enableTextSelection(){return Hs},disableImageDrag:Ea,enableImageDrag:as,preventOutline:ra,restoreOutline:Br,getSizedParentNode:el,getScale:ia};function Ln(i,c,m,P){if(c&&typeof c=="object")for(var F in c)co(i,F,c[F],m);else{c=I(c);for(var at=0,$t=c.length;at<$t;at++)co(i,c[at],m,P)}return this}var qi="_leaflet_events";function Rn(i,c,m,P){if(arguments.length===1)Aa(i),delete i[qi];else if(c&&typeof c=="object")for(var F in c)$i(i,F,c[F],m);else if(c=I(c),arguments.length===2)Aa(i,function(fe){return mt(c,fe)!==-1});else for(var at=0,$t=c.length;at<$t;at++)$i(i,c[at],m,P);return this}function Aa(i,c){for(var m in i[qi]){var P=m.split(/\d/)[0];(!c||c(P))&&$i(i,P,null,null,m)}}var sa={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function co(i,c,m,P){var F=c+p(m)+(P?"_"+p(P):"");if(i[qi]&&i[qi][F])return this;var at=function(fe){return m.call(P||i,fe||window.event)},$t=at;!$e.touchNative&&$e.pointer&&c.indexOf("touch")===0?at=Di(i,c,at):$e.touch&&c==="dblclick"?at=ea(i,at):"addEventListener"in i?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?i.addEventListener(sa[c]||c,at,$e.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(at=function(fe){fe=fe||window.event,ho(i,fe)&&$t(fe)},i.addEventListener(sa[c],at,!1)):i.addEventListener(c,$t,!1):i.attachEvent("on"+c,at),i[qi]=i[qi]||{},i[qi][F]=at}function $i(i,c,m,P,F){F=F||c+p(m)+(P?"_"+p(P):"");var at=i[qi]&&i[qi][F];if(!at)return this;!$e.touchNative&&$e.pointer&&c.indexOf("touch")===0?bs(i,c,at):$e.touch&&c==="dblclick"?Nl(i,at):"removeEventListener"in i?i.removeEventListener(sa[c]||c,at,!1):i.detachEvent("on"+c,at),i[qi][F]=null}function Ws(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function Ma(i){return co(i,"wheel",Ws),this}function No(i){return Ln(i,"mousedown touchstart dblclick contextmenu",Ws),i._leaflet_disable_click=!0,this}function xr(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function Ri(i){return xr(i),Ws(i),this}function Zs(i){if(i.composedPath)return i.composedPath();for(var c=[],m=i.target;m;)c.push(m),m=m.parentNode;return c}function nl(i,c){if(!c)return new O(i.clientX,i.clientY);var m=ia(c),P=m.boundingClientRect;return new O((i.clientX-P.left)/m.x-c.clientLeft,(i.clientY-P.top)/m.y-c.clientTop)}var Do=$e.linux&&$e.chrome?window.devicePixelRatio:$e.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function oa(i){return $e.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/Do:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function ho(i,c){var m=c.relatedTarget;if(!m)return!0;try{for(;m&&m!==i;)m=m.parentNode}catch{return!1}return m!==i}var Oo={__proto__:null,on:Ln,off:Rn,stopPropagation:Ws,disableScrollPropagation:Ma,disableClickPropagation:No,preventDefault:xr,stop:Ri,getPropagationPath:Zs,getMousePosition:nl,getWheelDelta:oa,isExternalTarget:ho,addListener:Ln,removeListener:Rn},Ba=q.extend({run:function(i,c,m,P){this.stop(),this._el=i,this._inProgress=!0,this._duration=m||.25,this._easeOutPower=1/Math.max(P||.5,.2),this._startPos=Ps(i),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Z(this._animate,this),this._step()},_step:function(i){var c=+new Date-this._startTime,m=this._duration*1e3;c<m?this._runFrame(this._easeOut(c/m),i):(this._runFrame(1),this._complete())},_runFrame:function(i,c){var m=this._startPos.add(this._offset.multiplyBy(i));c&&m._round(),yr(this._el,m),this.fire("step")},_complete:function(){V(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),Nn=q.extend({options:{crs:J,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,c){c=D(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(ct(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Mo&&$e.any3d&&!$e.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ln(this._proxy,Pa,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,c,m){if(c=c===void 0?this._zoom:this._limitZoom(c),i=this._limitCenter(ct(i),c,this.options.maxBounds),m=m||{},this._stop(),this._loaded&&!m.reset&&m!==!0){m.animate!==void 0&&(m.zoom=o({animate:m.animate},m.zoom),m.pan=o({animate:m.animate,duration:m.duration},m.pan));var P=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,c,m.zoom):this._tryAnimatedPan(i,m.pan);if(P)return clearTimeout(this._sizeTimer),this}return this._resetView(i,c,m.pan&&m.pan.noMoveStart),this},setZoom:function(i,c){return this._loaded?this.setView(this.getCenter(),i,{zoom:c}):(this._zoom=i,this)},zoomIn:function(i,c){return i=i||($e.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,c)},zoomOut:function(i,c){return i=i||($e.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,c)},setZoomAround:function(i,c,m){var P=this.getZoomScale(c),F=this.getSize().divideBy(2),at=i instanceof O?i:this.latLngToContainerPoint(i),$t=at.subtract(F).multiplyBy(1-1/P),fe=this.containerPointToLatLng(F.add($t));return this.setView(fe,c,{zoom:m})},_getBoundsCenterZoom:function(i,c){c=c||{},i=i.getBounds?i.getBounds():et(i);var m=gt(c.paddingTopLeft||c.padding||[0,0]),P=gt(c.paddingBottomRight||c.padding||[0,0]),F=this.getBoundsZoom(i,!1,m.add(P));if(F=typeof c.maxZoom=="number"?Math.min(c.maxZoom,F):F,F===1/0)return{center:i.getCenter(),zoom:F};var at=P.subtract(m).divideBy(2),$t=this.project(i.getSouthWest(),F),fe=this.project(i.getNorthEast(),F),_e=this.unproject($t.add(fe).divideBy(2).add(at),F);return{center:_e,zoom:F}},fitBounds:function(i,c){if(i=et(i),!i.isValid())throw new Error("Bounds are not valid.");var m=this._getBoundsCenterZoom(i,c);return this.setView(m.center,m.zoom,c)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,c){return this.setView(i,this._zoom,{pan:c})},panBy:function(i,c){if(i=gt(i).round(),c=c||{},!i.x&&!i.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ba,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){kn(this._mapPane,"leaflet-pan-anim");var m=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,m,c.duration||.25,c.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,c,m){if(m=m||{},m.animate===!1||!$e.any3d)return this.setView(i,c,m);this._stop();var P=this.project(this.getCenter()),F=this.project(i),at=this.getSize(),$t=this._zoom;i=ct(i),c=c===void 0?$t:c;var fe=Math.max(at.x,at.y),_e=fe*this.getZoomScale($t,c),Me=F.distanceTo(P)||1,We=1.42,ln=We*We;function Mn(Yn){var ai=Yn?-1:1,Vu=Yn?_e:fe,Os=_e*_e-fe*fe+ai*ln*ln*Me*Me,lu=2*Vu*ln*Me,qo=Os/lu,ll=Math.sqrt(qo*qo+1)-qo,uu=ll<1e-9?-18:Math.log(ll);return uu}function _i(Yn){return(Math.exp(Yn)-Math.exp(-Yn))/2}function Rr(Yn){return(Math.exp(Yn)+Math.exp(-Yn))/2}function Si(Yn){return _i(Yn)/Rr(Yn)}var br=Mn(0);function Ds(Yn){return fe*(Rr(br)/Rr(br+We*Yn))}function Ol(Yn){return fe*(Rr(br)*Si(br+We*Yn)-_i(br))/ln}function hs(Yn){return 1-Math.pow(1-Yn,1.5)}var Yi=Date.now(),ji=(Mn(1)-br)/We,$u=m.duration?1e3*m.duration:1e3*ji*.8;function Rl(){var Yn=(Date.now()-Yi)/$u,ai=hs(Yn)*ji;Yn<=1?(this._flyToFrame=Z(Rl,this),this._move(this.unproject(P.add(F.subtract(P).multiplyBy(Ol(ai)/Me)),$t),this.getScaleZoom(fe/Ds(ai),$t),{flyTo:!0})):this._move(i,c)._moveEnd(!0)}return this._moveStart(!0,m.noMoveStart),Rl.call(this),this},flyToBounds:function(i,c){var m=this._getBoundsCenterZoom(i,c);return this.flyTo(m.center,m.zoom,c)},setMaxBounds:function(i){return i=et(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var c=this.options.minZoom;return this.options.minZoom=i,this._loaded&&c!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var c=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&c!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,c){this._enforcingBounds=!0;var m=this.getCenter(),P=this._limitCenter(m,this._zoom,et(i));return m.equals(P)||this.panTo(P,c),this._enforcingBounds=!1,this},panInside:function(i,c){c=c||{};var m=gt(c.paddingTopLeft||c.padding||[0,0]),P=gt(c.paddingBottomRight||c.padding||[0,0]),F=this.project(this.getCenter()),at=this.project(i),$t=this.getPixelBounds(),fe=A([$t.min.add(m),$t.max.subtract(P)]),_e=fe.getSize();if(!fe.contains(at)){this._enforcingBounds=!0;var Me=at.subtract(fe.getCenter()),We=fe.extend(at).getSize().subtract(_e);F.x+=Me.x<0?-We.x:We.x,F.y+=Me.y<0?-We.y:We.y,this.panTo(this.unproject(F),c),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=o({animate:!1,pan:!0},i===!0?{animate:!0}:i);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var m=this.getSize(),P=c.divideBy(2).round(),F=m.divideBy(2).round(),at=P.subtract(F);return!at.x&&!at.y?this:(i.animate&&i.pan?this.panBy(at):(i.pan&&this._rawPanBy(at),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:m}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=o({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=u(this._handleGeolocationResponse,this),m=u(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,m,i):navigator.geolocation.getCurrentPosition(c,m,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var c=i.code,m=i.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+m+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var c=i.coords.latitude,m=i.coords.longitude,P=new lt(c,m),F=P.toBounds(i.coords.accuracy*2),at=this._locateOptions;if(at.setView){var $t=this.getBoundsZoom(F);this.setView(P,at.maxZoom?Math.min($t,at.maxZoom):$t)}var fe={latlng:P,bounds:F,timestamp:i.timestamp};for(var _e in i.coords)typeof i.coords[_e]=="number"&&(fe[_e]=i.coords[_e]);this.fire("locationfound",fe)}},addHandler:function(i,c){if(!c)return this;var m=this[i]=new c(this);return this._handlers.push(m),this.options[i]&&m.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),xn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(V(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)xn(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,c){var m="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),P=jn("div",m,c||this._mapPane);return i&&(this._panes[i]=P),P},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),c=this.unproject(i.getBottomLeft()),m=this.unproject(i.getTopRight());return new U(c,m)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,c,m){i=et(i),m=gt(m||[0,0]);var P=this.getZoom()||0,F=this.getMinZoom(),at=this.getMaxZoom(),$t=i.getNorthWest(),fe=i.getSouthEast(),_e=this.getSize().subtract(m),Me=A(this.project(fe,P),this.project($t,P)).getSize(),We=$e.any3d?this.options.zoomSnap:1,ln=_e.x/Me.x,Mn=_e.y/Me.y,_i=c?Math.max(ln,Mn):Math.min(ln,Mn);return P=this.getScaleZoom(_i,P),We&&(P=Math.round(P/(We/100))*(We/100),P=c?Math.ceil(P/We)*We:Math.floor(P/We)*We),Math.max(F,Math.min(at,P))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new O(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,c){var m=this._getTopLeftPoint(i,c);return new Y(m,m.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,c){var m=this.options.crs;return c=c===void 0?this._zoom:c,m.scale(i)/m.scale(c)},getScaleZoom:function(i,c){var m=this.options.crs;c=c===void 0?this._zoom:c;var P=m.zoom(i*m.scale(c));return isNaN(P)?1/0:P},project:function(i,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(ct(i),c)},unproject:function(i,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(gt(i),c)},layerPointToLatLng:function(i){var c=gt(i).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(i){var c=this.project(ct(i))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(ct(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(et(i))},distance:function(i,c){return this.options.crs.distance(ct(i),ct(c))},containerPointToLayerPoint:function(i){return gt(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return gt(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var c=this.containerPointToLayerPoint(gt(i));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ct(i)))},mouseEventToContainerPoint:function(i){return nl(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var c=this._container=Qa(i);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ln(c,"scroll",this._onScroll,this),this._containerId=p(c)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&$e.any3d,kn(i,"leaflet-container"+($e.touch?" leaflet-touch":"")+($e.retina?" leaflet-retina":"")+($e.ielt9?" leaflet-oldie":"")+($e.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=Oi(i,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),yr(this._mapPane,new O(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(kn(i.markerPane,"leaflet-zoom-hide"),kn(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,c,m){yr(this._mapPane,new O(0,0));var P=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var F=this._zoom!==c;this._moveStart(F,m)._move(i,c)._moveEnd(F),this.fire("viewreset"),P&&this.fire("load")},_moveStart:function(i,c){return i&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(i,c,m,P){c===void 0&&(c=this._zoom);var F=this._zoom!==c;return this._zoom=c,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),P?m&&m.pinch&&this.fire("zoom",m):((F||m&&m.pinch)&&this.fire("zoom",m),this.fire("move",m)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return V(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){yr(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[p(this._container)]=this;var c=i?Rn:Ln;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),$e.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){V(this._resizeRequest),this._resizeRequest=Z(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,c){for(var m=[],P,F=c==="mouseout"||c==="mouseover",at=i.target||i.srcElement,$t=!1;at;){if(P=this._targets[p(at)],P&&(c==="click"||c==="preclick")&&this._draggableMoved(P)){$t=!0;break}if(P&&P.listens(c,!0)&&(F&&!ho(at,i)||(m.push(P),F))||at===this._container)break;at=at.parentNode}return!m.length&&!$t&&!F&&this.listens(c,!0)&&(m=[this]),m},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var c=i.target||i.srcElement;if(!(!this._loaded||c._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(c))){var m=i.type;m==="mousedown"&&ra(c),this._fireDOMEvent(i,m)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,c,m){if(i.type==="click"){var P=o({},i);P.type="preclick",this._fireDOMEvent(P,P.type,m)}var F=this._findEventTargets(i,c);if(m){for(var at=[],$t=0;$t<m.length;$t++)m[$t].listens(c,!0)&&at.push(m[$t]);F=at.concat(F)}if(F.length){c==="contextmenu"&&xr(i);var fe=F[0],_e={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var Me=fe.getLatLng&&(!fe._radius||fe._radius<=10);_e.containerPoint=Me?this.latLngToContainerPoint(fe.getLatLng()):this.mouseEventToContainerPoint(i),_e.layerPoint=this.containerPointToLayerPoint(_e.containerPoint),_e.latlng=Me?fe.getLatLng():this.layerPointToLatLng(_e.layerPoint)}for($t=0;$t<F.length;$t++)if(F[$t].fire(c,_e,!0),_e.originalEvent._stopped||F[$t].options.bubblingMouseEvents===!1&&mt(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,c=this._handlers.length;i<c;i++)this._handlers[i].disable()},whenReady:function(i,c){return this._loaded?i.call(c||this,{target:this}):this.on("load",i,c),this},_getMapPanePos:function(){return Ps(this._mapPane)||new O(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,c){var m=i&&c!==void 0?this._getNewPixelOrigin(i,c):this.getPixelOrigin();return m.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,c){var m=this.getSize()._divideBy(2);return this.project(i,c)._subtract(m)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,c,m){var P=this._getNewPixelOrigin(m,c);return this.project(i,c)._subtract(P)},_latLngBoundsToNewLayerBounds:function(i,c,m){var P=this._getNewPixelOrigin(m,c);return A([this.project(i.getSouthWest(),c)._subtract(P),this.project(i.getNorthWest(),c)._subtract(P),this.project(i.getSouthEast(),c)._subtract(P),this.project(i.getNorthEast(),c)._subtract(P)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,c,m){if(!m)return i;var P=this.project(i,c),F=this.getSize().divideBy(2),at=new Y(P.subtract(F),P.add(F)),$t=this._getBoundsOffset(at,m,c);return Math.abs($t.x)<=1&&Math.abs($t.y)<=1?i:this.unproject(P.add($t),c)},_limitOffset:function(i,c){if(!c)return i;var m=this.getPixelBounds(),P=new Y(m.min.add(i),m.max.add(i));return i.add(this._getBoundsOffset(P,c))},_getBoundsOffset:function(i,c,m){var P=A(this.project(c.getNorthEast(),m),this.project(c.getSouthWest(),m)),F=P.min.subtract(i.min),at=P.max.subtract(i.max),$t=this._rebound(F.x,-at.x),fe=this._rebound(F.y,-at.y);return new O($t,fe)},_rebound:function(i,c){return i+c>0?Math.round(i-c)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(c))},_limitZoom:function(i){var c=this.getMinZoom(),m=this.getMaxZoom(),P=$e.any3d?this.options.zoomSnap:1;return P&&(i=Math.round(i/P)*P),Math.max(c,Math.min(m,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){$n(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,c){var m=this._getCenterOffset(i)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(m)?!1:(this.panBy(m,c),!0)},_createAnimProxy:function(){var i=this._proxy=jn("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(c){var m=Ao,P=this._proxy.style[m];ks(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),P===this._proxy.style[m]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){xn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),c=this.getZoom();ks(this._proxy,this.project(i,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,c,m){if(this._animatingZoom)return!0;if(m=m||{},!this._zoomAnimated||m.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var P=this.getZoomScale(c),F=this._getCenterOffset(i)._divideBy(1-1/P);return m.animate!==!0&&!this.getSize().contains(F)?!1:(Z(function(){this._moveStart(!0,m.noMoveStart||!1)._animateZoom(i,c,!0)},this),!0)},_animateZoom:function(i,c,m,P){this._mapPane&&(m&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=c,kn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:c,noUpdate:P}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&$n(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ta(i,c){return new Nn(i,c)}var un=Et.extend({options:{position:"topright"},initialize:function(i){D(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var c=this._map;return c&&c.removeControl(this),this.options.position=i,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var c=this._container=this.onAdd(i),m=this.getPosition(),P=i._controlCorners[m];return kn(c,"leaflet-control"),m.indexOf("bottom")!==-1?P.insertBefore(c,P.firstChild):P.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(xn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),fi=function(i){return new un(i)};Nn.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},c="leaflet-",m=this._controlContainer=jn("div",c+"control-container",this._container);function P(F,at){var $t=c+F+" "+c+at;i[F+at]=jn("div",$t,m)}P("top","left"),P("top","right"),P("bottom","left"),P("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)xn(this._controlCorners[i]);xn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ro=un.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,c,m,P){return m<P?-1:P<m?1:0}},initialize:function(i,c,m){D(this,m),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var P in i)this._addLayer(i[P],P);for(P in c)this._addLayer(c[P],P,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return un.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,c){return this._addLayer(i,c),this._map?this._update():this},addOverlay:function(i,c){return this._addLayer(i,c,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var c=this._getLayer(p(i));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){kn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(kn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):$n(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return $n(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",c=this._container=jn("div",i),m=this.options.collapsed;c.setAttribute("aria-haspopup",!0),No(c),Ma(c);var P=this._section=jn("section",i+"-list");m&&(this._map.on("click",this.collapse,this),Ln(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var F=this._layersLink=jn("a",i+"-toggle",c);F.href="#",F.title="Layers",F.setAttribute("role","button"),Ln(F,{keydown:function(at){at.keyCode===13&&this._expandSafely()},click:function(at){xr(at),this._expandSafely()}},this),m||this.expand(),this._baseLayersList=jn("div",i+"-base",P),this._separator=jn("div",i+"-separator",P),this._overlaysList=jn("div",i+"-overlays",P),c.appendChild(P)},_getLayer:function(i){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&p(this._layers[c].layer)===i)return this._layers[c]},_addLayer:function(i,c,m){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:c,overlay:m}),this.options.sortLayers&&this._layers.sort(u(function(P,F){return this.options.sortFunction(P.layer,F.layer,P.name,F.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;oo(this._baseLayersList),oo(this._overlaysList),this._layerControlInputs=[];var i,c,m,P,F=0;for(m=0;m<this._layers.length;m++)P=this._layers[m],this._addItem(P),c=c||P.overlay,i=i||!P.overlay,F+=P.overlay?0:1;return this.options.hideSingleBase&&(i=i&&F>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=c&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var c=this._getLayer(p(i.target)),m=c.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;m&&this._map.fire(m,c)},_createRadioElement:function(i,c){var m='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(c?' checked="checked"':"")+"/>",P=document.createElement("div");return P.innerHTML=m,P.firstChild},_addItem:function(i){var c=document.createElement("label"),m=this._map.hasLayer(i.layer),P;i.overlay?(P=document.createElement("input"),P.type="checkbox",P.className="leaflet-control-layers-selector",P.defaultChecked=m):P=this._createRadioElement("leaflet-base-layers_"+p(this),m),this._layerControlInputs.push(P),P.layerId=p(i.layer),Ln(P,"click",this._onInputClick,this);var F=document.createElement("span");F.innerHTML=" "+i.name;var at=document.createElement("span");c.appendChild(at),at.appendChild(P),at.appendChild(F);var $t=i.overlay?this._overlaysList:this._baseLayersList;return $t.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,c,m,P=[],F=[];this._handlingClick=!0;for(var at=i.length-1;at>=0;at--)c=i[at],m=this._getLayer(c.layerId).layer,c.checked?P.push(m):c.checked||F.push(m);for(at=0;at<F.length;at++)this._map.hasLayer(F[at])&&this._map.removeLayer(F[at]);for(at=0;at<P.length;at++)this._map.hasLayer(P[at])||this._map.addLayer(P[at]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,c,m,P=this._map.getZoom(),F=i.length-1;F>=0;F--)c=i[F],m=this._getLayer(c.layerId).layer,c.disabled=m.options.minZoom!==void 0&&P<m.options.minZoom||m.options.maxZoom!==void 0&&P>m.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,Ln(i,"click",xr),this.expand();var c=this;setTimeout(function(){Rn(i,"click",xr),c._preventClick=!1})}}),fo=function(i,c,m){return new Ro(i,c,m)},wi=un.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var c="leaflet-control-zoom",m=jn("div",c+" leaflet-bar"),P=this.options;return this._zoomInButton=this._createButton(P.zoomInText,P.zoomInTitle,c+"-in",m,this._zoomIn),this._zoomOutButton=this._createButton(P.zoomOutText,P.zoomOutTitle,c+"-out",m,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),m},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,c,m,P,F){var at=jn("a",m,P);return at.innerHTML=i,at.href="#",at.title=c,at.setAttribute("role","button"),at.setAttribute("aria-label",c),No(at),Ln(at,"click",Ri),Ln(at,"click",F,this),Ln(at,"click",this._refocusOnMap,this),at},_updateDisabled:function(){var i=this._map,c="leaflet-disabled";$n(this._zoomInButton,c),$n(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(kn(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(kn(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});Nn.mergeOptions({zoomControl:!0}),Nn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new wi,this.addControl(this.zoomControl))});var Na=function(i){return new wi(i)},Ss=un.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var c="leaflet-control-scale",m=jn("div",c),P=this.options;return this._addScales(P,c+"-line",m),i.on(P.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),m},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,c,m){i.metric&&(this._mScale=jn("div",c,m)),i.imperial&&(this._iScale=jn("div",c,m))},_update:function(){var i=this._map,c=i.getSize().y/2,m=i.distance(i.containerPointToLatLng([0,c]),i.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(m)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var c=this._getRoundNum(i),m=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,m,c/i)},_updateImperial:function(i){var c=i*3.2808399,m,P,F;c>5280?(m=c/5280,P=this._getRoundNum(m),this._updateScale(this._iScale,P+" mi",P/m)):(F=this._getRoundNum(c),this._updateScale(this._iScale,F+" ft",F/c))},_updateScale:function(i,c,m){i.style.width=Math.round(this.options.maxWidth*m)+"px",i.innerHTML=c},_getRoundNum:function(i){var c=Math.pow(10,(Math.floor(i)+"").length-1),m=i/c;return m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:1,c*m}}),aa=function(i){return new Ss(i)},la='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Vi=un.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+($e.inlineSvg?la+" ":"")+"Leaflet</a>"},initialize:function(i){D(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=jn("div","leaflet-control-attribution"),No(this._container);for(var c in i._layers)i._layers[c].getAttribution&&this.addAttribution(i._layers[c].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var c in this._attributions)this._attributions[c]&&i.push(c);var m=[];this.options.prefix&&m.push(this.options.prefix),i.length&&m.push(i.join(", ")),this._container.innerHTML=m.join(' <span aria-hidden="true">|</span> ')}}});Nn.mergeOptions({attributionControl:!0}),Nn.addInitHook(function(){this.options.attributionControl&&new Vi().addTo(this)});var ua=function(i){return new Vi(i)};un.Layers=Ro,un.Zoom=wi,un.Scale=Ss,un.Attribution=Vi,fi.layers=fo,fi.zoom=Na,fi.scale=aa,fi.attribution=ua;var Tr=Et.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Tr.addTo=function(i,c){return i.addHandler(c,this),this};var rl={Events:$},Io=$e.touch?"touchstart mousedown":"mousedown",Hi=q.extend({options:{clickTolerance:3},initialize:function(i,c,m,P){D(this,P),this._element=i,this._dragStartTarget=c||i,this._preventOutline=m},enable:function(){this._enabled||(Ln(this._dragStartTarget,Io,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Hi._dragging===this&&this.finishDrag(!0),Rn(this._dragStartTarget,Io,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!Bo(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){Hi._dragging===this&&this.finishDrag();return}if(!(Hi._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(Hi._dragging=this,this._preventOutline&&ra(this._element),Ea(),To(),!this._moving)){this.fire("down");var c=i.touches?i.touches[0]:i,m=el(this._element);this._startPoint=new O(c.clientX,c.clientY),this._startPos=Ps(this._element),this._parentScale=ia(m);var P=i.type==="mousedown";Ln(document,P?"mousemove":"touchmove",this._onMove,this),Ln(document,P?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var c=i.touches&&i.touches.length===1?i.touches[0]:i,m=new O(c.clientX,c.clientY)._subtract(this._startPoint);!m.x&&!m.y||Math.abs(m.x)+Math.abs(m.y)<this.options.clickTolerance||(m.x/=this._parentScale.x,m.y/=this._parentScale.y,xr(i),this._moved||(this.fire("dragstart"),this._moved=!0,kn(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),kn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(m),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),yr(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){$n(document.body,"leaflet-dragging"),this._lastTarget&&($n(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Rn(document,"mousemove touchmove",this._onMove,this),Rn(document,"mouseup touchend touchcancel",this._onUp,this),as(),Hs();var c=this._moved&&this._moving;this._moving=!1,Hi._dragging=!1,c&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function ca(i,c,m){var P,F=[1,4,2,8],at,$t,fe,_e,Me,We,ln,Mn;for(at=0,We=i.length;at<We;at++)i[at]._code=be(i[at],c);for(fe=0;fe<4;fe++){for(ln=F[fe],P=[],at=0,We=i.length,$t=We-1;at<We;$t=at++)_e=i[at],Me=i[$t],_e._code&ln?Me._code&ln||(Mn=le(Me,_e,ln,c,m),Mn._code=be(Mn,c),P.push(Mn)):(Me._code&ln&&(Mn=le(Me,_e,ln,c,m),Mn._code=be(Mn,c),P.push(Mn)),P.push(_e));i=P}return i}function Da(i,c){var m,P,F,at,$t,fe,_e,Me,We;if(!i||i.length===0)throw new Error("latlngs not passed");Je(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var ln=ct([0,0]),Mn=et(i),_i=Mn.getNorthWest().distanceTo(Mn.getSouthWest())*Mn.getNorthEast().distanceTo(Mn.getNorthWest());_i<1700&&(ln=Oa(i));var Rr=i.length,Si=[];for(m=0;m<Rr;m++){var br=ct(i[m]);Si.push(c.project(ct([br.lat-ln.lat,br.lng-ln.lng])))}for(fe=_e=Me=0,m=0,P=Rr-1;m<Rr;P=m++)F=Si[m],at=Si[P],$t=F.y*at.x-at.y*F.x,_e+=(F.x+at.x)*$t,Me+=(F.y+at.y)*$t,fe+=$t*3;fe===0?We=Si[0]:We=[_e/fe,Me/fe];var Ds=c.unproject(gt(We));return ct([Ds.lat+ln.lat,Ds.lng+ln.lng])}function Oa(i){for(var c=0,m=0,P=0,F=0;F<i.length;F++){var at=ct(i[F]);c+=at.lat,m+=at.lng,P++}return ct([c/P,m/P])}var ha={__proto__:null,clipPolygon:ca,polygonCenter:Da,centroid:Oa};function po(i,c){if(!c||!i.length)return i.slice();var m=c*c;return i=nt(i,m),i=Lr(i,m),i}function Fo(i,c,m){return Math.sqrt(Ge(i,c,m,!0))}function go(i,c,m){return Ge(i,c,m)}function Lr(i,c){var m=i.length,P=typeof Uint8Array<"u"?Uint8Array:Array,F=new P(m);F[0]=F[m-1]=1,C(i,F,c,0,m-1);var at,$t=[];for(at=0;at<m;at++)F[at]&&$t.push(i[at]);return $t}function C(i,c,m,P,F){var at=0,$t,fe,_e;for(fe=P+1;fe<=F-1;fe++)_e=Ge(i[fe],i[P],i[F],!0),_e>at&&($t=fe,at=_e);at>m&&(c[$t]=1,C(i,c,m,P,$t),C(i,c,m,$t,F))}function nt(i,c){for(var m=[i[0]],P=1,F=0,at=i.length;P<at;P++)Te(i[P],i[F])>c&&(m.push(i[P]),F=P);return F<at-1&&m.push(i[at-1]),m}var Ot;function Gt(i,c,m,P,F){var at=P?Ot:be(i,m),$t=be(c,m),fe,_e,Me;for(Ot=$t;;){if(!(at|$t))return[i,c];if(at&$t)return!1;fe=at||$t,_e=le(i,c,fe,m,F),Me=be(_e,m),fe===at?(i=_e,at=Me):(c=_e,$t=Me)}}function le(i,c,m,P,F){var at=c.x-i.x,$t=c.y-i.y,fe=P.min,_e=P.max,Me,We;return m&8?(Me=i.x+at*(_e.y-i.y)/$t,We=_e.y):m&4?(Me=i.x+at*(fe.y-i.y)/$t,We=fe.y):m&2?(Me=_e.x,We=i.y+$t*(_e.x-i.x)/at):m&1&&(Me=fe.x,We=i.y+$t*(fe.x-i.x)/at),new O(Me,We,F)}function be(i,c){var m=0;return i.x<c.min.x?m|=1:i.x>c.max.x&&(m|=2),i.y<c.min.y?m|=4:i.y>c.max.y&&(m|=8),m}function Te(i,c){var m=c.x-i.x,P=c.y-i.y;return m*m+P*P}function Ge(i,c,m,P){var F=c.x,at=c.y,$t=m.x-F,fe=m.y-at,_e=$t*$t+fe*fe,Me;return _e>0&&(Me=((i.x-F)*$t+(i.y-at)*fe)/_e,Me>1?(F=m.x,at=m.y):Me>0&&(F+=$t*Me,at+=fe*Me)),$t=i.x-F,fe=i.y-at,P?$t*$t+fe*fe:new O(F,at)}function Je(i){return!Q(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function an(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Je(i)}function vn(i,c){var m,P,F,at,$t,fe,_e,Me;if(!i||i.length===0)throw new Error("latlngs not passed");Je(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var We=ct([0,0]),ln=et(i),Mn=ln.getNorthWest().distanceTo(ln.getSouthWest())*ln.getNorthEast().distanceTo(ln.getNorthWest());Mn<1700&&(We=Oa(i));var _i=i.length,Rr=[];for(m=0;m<_i;m++){var Si=ct(i[m]);Rr.push(c.project(ct([Si.lat-We.lat,Si.lng-We.lng])))}for(m=0,P=0;m<_i-1;m++)P+=Rr[m].distanceTo(Rr[m+1])/2;if(P===0)Me=Rr[0];else for(m=0,at=0;m<_i-1;m++)if($t=Rr[m],fe=Rr[m+1],F=$t.distanceTo(fe),at+=F,at>P){_e=(at-P)/F,Me=[fe.x-_e*(fe.x-$t.x),fe.y-_e*(fe.y-$t.y)];break}var br=c.unproject(gt(Me));return ct([br.lat+We.lat,br.lng+We.lng])}var Dn={__proto__:null,simplify:po,pointToSegmentDistance:Fo,closestPointOnSegment:go,clipSegment:Gt,_getEdgeIntersection:le,_getBitCode:be,_sqClosestPointOnSegment:Ge,isFlat:Je,_flat:an,polylineCenter:vn},lr={project:function(i){return new O(i.lng,i.lat)},unproject:function(i){return new lt(i.y,i.x)},bounds:new Y([-180,-90],[180,90])},zn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Y([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var c=Math.PI/180,m=this.R,P=i.lat*c,F=this.R_MINOR/m,at=Math.sqrt(1-F*F),$t=at*Math.sin(P),fe=Math.tan(Math.PI/4-P/2)/Math.pow((1-$t)/(1+$t),at/2);return P=-m*Math.log(Math.max(fe,1e-10)),new O(i.lng*c*m,P)},unproject:function(i){for(var c=180/Math.PI,m=this.R,P=this.R_MINOR/m,F=Math.sqrt(1-P*P),at=Math.exp(-i.y/m),$t=Math.PI/2-2*Math.atan(at),fe=0,_e=.1,Me;fe<15&&Math.abs(_e)>1e-7;fe++)Me=F*Math.sin($t),Me=Math.pow((1-Me)/(1+Me),F/2),_e=Math.PI/2-2*Math.atan(at*Me)-$t,$t+=_e;return new lt($t*c,i.x*c/m)}},Gn={__proto__:null,LonLat:lr,Mercator:zn,SphericalMercator:At},Nr=o({},ft,{code:"EPSG:3395",projection:zn,transformation:function(){var i=.5/(Math.PI*zn.R);return H(i,.5,-i,.5)}()}),Er=o({},ft,{code:"EPSG:4326",projection:lr,transformation:H(1/180,1,-1/180,.5)}),Ii=o({},tt,{projection:lr,transformation:H(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,c){var m=c.lng-i.lng,P=c.lat-i.lat;return Math.sqrt(m*m+P*P)},infinite:!0});tt.Earth=ft,tt.EPSG3395=Nr,tt.EPSG3857=J,tt.EPSG900913=yt,tt.EPSG4326=Er,tt.Simple=Ii;var Qn=q.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[p(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[p(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var c=i.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var m=this.getEvents();c.on(m,this),this.once("remove",function(){c.off(m,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});Nn.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var c=p(i);return this._layers[c]?this:(this._layers[c]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var c=p(i);return this._layers[c]?(this._loaded&&i.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return p(i)in this._layers},eachLayer:function(i,c){for(var m in this._layers)i.call(c,this._layers[m]);return this},_addLayers:function(i){i=i?Q(i)?i:[i]:[];for(var c=0,m=i.length;c<m;c++)this.addLayer(i[c])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[p(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var c=p(i);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,c=-1/0,m=this._getZoomSpan();for(var P in this._zoomBoundLayers){var F=this._zoomBoundLayers[P].options;i=F.minZoom===void 0?i:Math.min(i,F.minZoom),c=F.maxZoom===void 0?c:Math.max(c,F.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=i===1/0?void 0:i,m!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var di=Qn.extend({initialize:function(i,c){D(this,c),this._layers={};var m,P;if(i)for(m=0,P=i.length;m<P;m++)this.addLayer(i[m])},addLayer:function(i){var c=this.getLayerId(i);return this._layers[c]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var c=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(i){var c=typeof i=="number"?i:this.getLayerId(i);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var c=Array.prototype.slice.call(arguments,1),m,P;for(m in this._layers)P=this._layers[m],P[i]&&P[i].apply(P,c);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,c){for(var m in this._layers)i.call(c,this._layers[m]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return p(i)}}),il=function(i,c){return new di(i,c)},pi=di.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),di.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),di.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new U;for(var c in this._layers){var m=this._layers[c];i.extend(m.getBounds?m.getBounds():m.getLatLng())}return i}}),Ra=function(i,c){return new pi(i,c)},ls=Et.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){D(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,c){var m=this._getIconUrl(i);if(!m){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var P=this._createImg(m,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(P,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(P.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),P},_setIconStyles:function(i,c){var m=this.options,P=m[c+"Size"];typeof P=="number"&&(P=[P,P]);var F=gt(P),at=gt(c==="shadow"&&m.shadowAnchor||m.iconAnchor||F&&F.divideBy(2,!0));i.className="leaflet-marker-"+c+" "+(m.className||""),at&&(i.style.marginLeft=-at.x+"px",i.style.marginTop=-at.y+"px"),F&&(i.style.width=F.x+"px",i.style.height=F.y+"px")},_createImg:function(i,c){return c=c||document.createElement("img"),c.src=i,c},_getIconUrl:function(i){return $e.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function Ia(i){return new ls(i)}var Ks=ls.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof Ks.imagePath!="string"&&(Ks.imagePath=this._detectIconPath()),(this.options.imagePath||Ks.imagePath)+ls.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var c=function(m,P,F){var at=P.exec(m);return at&&at[F]};return i=c(i,/^url\((['"])?(.+)\1\)$/,2),i&&c(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=jn("div","leaflet-default-icon-path",document.body),c=Oi(i,"background-image")||Oi(i,"backgroundImage");if(document.body.removeChild(i),c=this._stripUrl(c),c)return c;var m=document.querySelector('link[href$="leaflet.css"]');return m?m.href.substring(0,m.href.length-11-1):""}}),Js=Tr.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new Hi(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),kn(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&$n(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var c=this._marker,m=c._map,P=this._marker.options.autoPanSpeed,F=this._marker.options.autoPanPadding,at=Ps(c._icon),$t=m.getPixelBounds(),fe=m.getPixelOrigin(),_e=A($t.min._subtract(fe).add(F),$t.max._subtract(fe).subtract(F));if(!_e.contains(at)){var Me=gt((Math.max(_e.max.x,at.x)-_e.max.x)/($t.max.x-_e.max.x)-(Math.min(_e.min.x,at.x)-_e.min.x)/($t.min.x-_e.min.x),(Math.max(_e.max.y,at.y)-_e.max.y)/($t.max.y-_e.max.y)-(Math.min(_e.min.y,at.y)-_e.min.y)/($t.min.y-_e.min.y)).multiplyBy(P);m.panBy(Me,{animate:!1}),this._draggable._newPos._add(Me),this._draggable._startPos._add(Me),yr(c._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=Z(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(V(this._panRequest),this._panRequest=Z(this._adjustPan.bind(this,i)))},_onDrag:function(i){var c=this._marker,m=c._shadow,P=Ps(c._icon),F=c._map.layerPointToLatLng(P);m&&yr(m,P),c._latlng=F,i.latlng=F,i.oldLatLng=this._oldLatLng,c.fire("move",i).fire("drag",i)},_onDragEnd:function(i){V(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),Ar=Qn.extend({options:{icon:new Ks,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,c){D(this,c),this._latlng=ct(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var c=this._latlng;return this._latlng=ct(i),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),m=i.icon.createIcon(this._icon),P=!1;m!==this._icon&&(this._icon&&this._removeIcon(),P=!0,i.title&&(m.title=i.title),m.tagName==="IMG"&&(m.alt=i.alt||"")),kn(m,c),i.keyboard&&(m.tabIndex="0",m.setAttribute("role","button")),this._icon=m,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ln(m,"focus",this._panOnFocus,this);var F=i.icon.createShadow(this._shadow),at=!1;F!==this._shadow&&(this._removeShadow(),at=!0),F&&(kn(F,c),F.alt=""),this._shadow=F,i.opacity<1&&this._updateOpacity(),P&&this.getPane().appendChild(this._icon),this._initInteraction(),F&&at&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Rn(this._icon,"focus",this._panOnFocus,this),xn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&xn(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&yr(this._icon,i),this._shadow&&yr(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var c=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(kn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Js)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Js(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&ni(this._icon,i),this._shadow&&ni(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var c=this.options.icon.options,m=c.iconSize?gt(c.iconSize):gt(0,0),P=c.iconAnchor?gt(c.iconAnchor):gt(0,0);i.panInside(this._latlng,{paddingTopLeft:P,paddingBottomRight:m.subtract(P)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function fa(i,c){return new Ar(i,c)}var xi=Qn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return D(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),gi=xi.extend({options:{fill:!0,radius:10},initialize:function(i,c){D(this,c),this._latlng=ct(i),this._radius=this.options.radius},setLatLng:function(i){var c=this._latlng;return this._latlng=ct(i),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var c=i&&i.radius||this._radius;return xi.prototype.setStyle.call(this,i),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,c=this._radiusY||i,m=this._clickTolerance(),P=[i+m,c+m];this._pxBounds=new Y(this._point.subtract(P),this._point.add(P))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function da(i,c){return new gi(i,c)}var ri=gi.extend({initialize:function(i,c,m){if(typeof c=="number"&&(c=o({},m,{radius:c})),D(this,c),this._latlng=ct(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new U(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:xi.prototype.setStyle,_project:function(){var i=this._latlng.lng,c=this._latlng.lat,m=this._map,P=m.options.crs;if(P.distance===ft.distance){var F=Math.PI/180,at=this._mRadius/ft.R/F,$t=m.project([c+at,i]),fe=m.project([c-at,i]),_e=$t.add(fe).divideBy(2),Me=m.unproject(_e).lat,We=Math.acos((Math.cos(at*F)-Math.sin(c*F)*Math.sin(Me*F))/(Math.cos(c*F)*Math.cos(Me*F)))/F;(isNaN(We)||We===0)&&(We=at/Math.cos(Math.PI/180*c)),this._point=_e.subtract(m.getPixelOrigin()),this._radius=isNaN(We)?0:_e.x-m.project([Me,i-We]).x,this._radiusY=_e.y-$t.y}else{var ln=P.unproject(P.project(this._latlng).subtract([this._mRadius,0]));this._point=m.latLngToLayerPoint(this._latlng),this._radius=this._point.x-m.latLngToLayerPoint(ln).x}this._updateBounds()}});function Ys(i,c,m){return new ri(i,c,m)}var Fi=xi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,c){D(this,c),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var c=1/0,m=null,P=Ge,F,at,$t=0,fe=this._parts.length;$t<fe;$t++)for(var _e=this._parts[$t],Me=1,We=_e.length;Me<We;Me++){F=_e[Me-1],at=_e[Me];var ln=P(i,F,at,!0);ln<c&&(c=ln,m=P(i,F,at))}return m&&(m.distance=Math.sqrt(c)),m},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return vn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,c){return c=c||this._defaultShape(),i=ct(i),c.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new U,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return Je(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var c=[],m=Je(i),P=0,F=i.length;P<F;P++)m?(c[P]=ct(i[P]),this._bounds.extend(c[P])):c[P]=this._convertLatLngs(i[P]);return c},_project:function(){var i=new Y;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),c=new O(i,i);this._rawPxBounds&&(this._pxBounds=new Y([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(i,c,m){var P=i[0]instanceof lt,F=i.length,at,$t;if(P){for($t=[],at=0;at<F;at++)$t[at]=this._map.latLngToLayerPoint(i[at]),m.extend($t[at]);c.push($t)}else for(at=0;at<F;at++)this._projectLatlngs(i[at],c,m)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,m,P,F,at,$t,fe,_e;for(m=0,F=0,at=this._rings.length;m<at;m++)for(_e=this._rings[m],P=0,$t=_e.length;P<$t-1;P++)fe=Gt(_e[P],_e[P+1],i,P,!0),fe&&(c[F]=c[F]||[],c[F].push(fe[0]),(fe[1]!==_e[P+1]||P===$t-2)&&(c[F].push(fe[1]),F++))}},_simplifyPoints:function(){for(var i=this._parts,c=this.options.smoothFactor,m=0,P=i.length;m<P;m++)i[m]=po(i[m],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,c){var m,P,F,at,$t,fe,_e=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(m=0,at=this._parts.length;m<at;m++)for(fe=this._parts[m],P=0,$t=fe.length,F=$t-1;P<$t;F=P++)if(!(!c&&P===0)&&Fo(i,fe[F],fe[P])<=_e)return!0;return!1}});function sl(i,c){return new Fi(i,c)}Fi._flat=an;var Dr=Fi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Da(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var c=Fi.prototype._convertLatLngs.call(this,i),m=c.length;return m>=2&&c[0]instanceof lt&&c[0].equals(c[m-1])&&c.pop(),c},_setLatLngs:function(i){Fi.prototype._setLatLngs.call(this,i),Je(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Je(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,c=this.options.weight,m=new O(c,c);if(i=new Y(i.min.subtract(m),i.max.add(m)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var P=0,F=this._rings.length,at;P<F;P++)at=ca(this._rings[P],i,!0),at.length&&this._parts.push(at)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var c=!1,m,P,F,at,$t,fe,_e,Me;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(at=0,_e=this._parts.length;at<_e;at++)for(m=this._parts[at],$t=0,Me=m.length,fe=Me-1;$t<Me;fe=$t++)P=m[$t],F=m[fe],P.y>i.y!=F.y>i.y&&i.x<(F.x-P.x)*(i.y-P.y)/(F.y-P.y)+P.x&&(c=!c);return c||Fi.prototype._containsPoint.call(this,i,!0)}});function Es(i,c){return new Dr(i,c)}var Gi=pi.extend({initialize:function(i,c){D(this,c),this._layers={},i&&this.addData(i)},addData:function(i){var c=Q(i)?i:i.features,m,P,F;if(c){for(m=0,P=c.length;m<P;m++)F=c[m],(F.geometries||F.geometry||F.features||F.coordinates)&&this.addData(F);return this}var at=this.options;if(at.filter&&!at.filter(i))return this;var $t=jo(i,at);return $t?($t.feature=Wi(i),$t.defaultOptions=$t.options,this.resetStyle($t),at.onEachFeature&&at.onEachFeature(i,$t),this.addLayer($t)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=o({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(c){this._setLayerStyle(c,i)},this)},_setLayerStyle:function(i,c){i.setStyle&&(typeof c=="function"&&(c=c(i.feature)),i.setStyle(c))}});function jo(i,c){var m=i.type==="Feature"?i.geometry:i,P=m?m.coordinates:null,F=[],at=c&&c.pointToLayer,$t=c&&c.coordsToLatLng||As,fe,_e,Me,We;if(!P&&!m)return null;switch(m.type){case"Point":return fe=$t(P),Xs(at,i,fe,c);case"MultiPoint":for(Me=0,We=P.length;Me<We;Me++)fe=$t(P[Me]),F.push(Xs(at,i,fe,c));return new pi(F);case"LineString":case"MultiLineString":return _e=Hr(P,m.type==="LineString"?0:1,$t),new Fi(_e,c);case"Polygon":case"MultiPolygon":return _e=Hr(P,m.type==="Polygon"?1:2,$t),new Dr(_e,c);case"GeometryCollection":for(Me=0,We=m.geometries.length;Me<We;Me++){var ln=jo({geometry:m.geometries[Me],type:"Feature",properties:i.properties},c);ln&&F.push(ln)}return new pi(F);case"FeatureCollection":for(Me=0,We=m.features.length;Me<We;Me++){var Mn=jo(m.features[Me],c);Mn&&F.push(Mn)}return new pi(F);default:throw new Error("Invalid GeoJSON object.")}}function Xs(i,c,m,P){return i?i(c,m):new Ar(m,P&&P.markersInheritOptions&&P)}function As(i){return new lt(i[1],i[0],i[2])}function Hr(i,c,m){for(var P=[],F=0,at=i.length,$t;F<at;F++)$t=c?Hr(i[F],c-1,m):(m||As)(i[F]),P.push($t);return P}function Fr(i,c){return i=ct(i),i.alt!==void 0?[S(i.lng,c),S(i.lat,c),S(i.alt,c)]:[S(i.lng,c),S(i.lat,c)]}function us(i,c,m,P){for(var F=[],at=0,$t=i.length;at<$t;at++)F.push(c?us(i[at],Je(i[at])?0:c-1,m,P):Fr(i[at],P));return!c&&m&&F.length>0&&F.push(F[0].slice()),F}function Li(i,c){return i.feature?o({},i.feature,{geometry:c}):Wi(c)}function Wi(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var Qs={toGeoJSON:function(i){return Li(this,{type:"Point",coordinates:Fr(this.getLatLng(),i)})}};Ar.include(Qs),ri.include(Qs),gi.include(Qs),Fi.include({toGeoJSON:function(i){var c=!Je(this._latlngs),m=us(this._latlngs,c?1:0,!1,i);return Li(this,{type:(c?"Multi":"")+"LineString",coordinates:m})}}),Dr.include({toGeoJSON:function(i){var c=!Je(this._latlngs),m=c&&!Je(this._latlngs[0]),P=us(this._latlngs,m?2:c?1:0,!0,i);return c||(P=[P]),Li(this,{type:(m?"Multi":"")+"Polygon",coordinates:P})}}),di.include({toMultiPoint:function(i){var c=[];return this.eachLayer(function(m){c.push(m.toGeoJSON(i).geometry.coordinates)}),Li(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(i){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(i);var m=c==="GeometryCollection",P=[];return this.eachLayer(function(F){if(F.toGeoJSON){var at=F.toGeoJSON(i);if(m)P.push(at.geometry);else{var $t=Wi(at);$t.type==="FeatureCollection"?P.push.apply(P,$t.features):P.push($t)}}}),m?Li(this,{geometries:P,type:"GeometryCollection"}):{type:"FeatureCollection",features:P}}});function Zi(i,c){return new Gi(i,c)}var _r=Zi,Ms=Qn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,c,m){this._url=i,this._bounds=et(c),D(this,m)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(kn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){xn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Vs(this._image),this},bringToBack:function(){return this._map&&Cs(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=et(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",c=this._image=i?this._url:jn("img");if(kn(c,"leaflet-image-layer"),this._zoomAnimated&&kn(c,"leaflet-zoom-animated"),this.options.className&&kn(c,this.options.className),c.onselectstart=b,c.onmousemove=b,c.onload=u(this.fire,this,"load"),c.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(i){var c=this._map.getZoomScale(i.zoom),m=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;ks(this._image,m,c)},_reset:function(){var i=this._image,c=new Y(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),m=c.getSize();yr(i,c.min),i.style.width=m.x+"px",i.style.height=m.y+"px"},_updateOpacity:function(){ni(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),mi=function(i,c,m){return new Ms(i,c,m)},ii=Ms.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",c=this._image=i?this._url:jn("video");if(kn(c,"leaflet-image-layer"),this._zoomAnimated&&kn(c,"leaflet-zoom-animated"),this.options.className&&kn(c,this.options.className),c.onselectstart=b,c.onmousemove=b,c.onloadeddata=u(this.fire,this,"load"),i){for(var m=c.getElementsByTagName("source"),P=[],F=0;F<m.length;F++)P.push(m[F].src);this._url=m.length>0?P:[c.src];return}Q(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var at=0;at<this._url.length;at++){var $t=jn("source");$t.src=this._url[at],c.appendChild($t)}}});function zo(i,c,m){return new ii(i,c,m)}var Fa=Ms.extend({_initImage:function(){var i=this._image=this._url;kn(i,"leaflet-image-layer"),this._zoomAnimated&&kn(i,"leaflet-zoom-animated"),this.options.className&&kn(i,this.options.className),i.onselectstart=b,i.onmousemove=b}});function ja(i,c,m){return new Fa(i,c,m)}var si=Qn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,c){i&&(i instanceof lt||Q(i))?(this._latlng=ct(i),D(this,c)):(D(this,i),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&ni(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&ni(this._container,1),this.bringToFront(),this.options.interactive&&(kn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(ni(this._container,0),this._removeTimeout=setTimeout(u(xn,void 0,this._container),200)):xn(this._container),this.options.interactive&&($n(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=ct(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Vs(this._container),this},bringToBack:function(){return this._map&&Cs(this._container),this},_prepareOpen:function(i){var c=this._source;if(!c._map)return!1;if(c instanceof pi){c=null;var m=this._source._layers;for(var P in m)if(m[P]._map){c=m[P];break}if(!c)return!1;this._source=c}if(!i)if(c.getCenter)i=c.getCenter();else if(c.getLatLng)i=c.getLatLng();else if(c.getBounds)i=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")i.innerHTML=c;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),c=gt(this.options.offset),m=this._getAnchor();this._zoomAnimated?yr(this._container,i.add(m)):c=c.add(i).add(m);var P=this._containerBottom=-c.y,F=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=P+"px",this._container.style.left=F+"px"}},_getAnchor:function(){return[0,0]}});Nn.include({_initOverlay:function(i,c,m,P){var F=c;return F instanceof i||(F=new i(P).setContent(c)),m&&F.setLatLng(m),F}}),Qn.include({_initOverlay:function(i,c,m,P){var F=m;return F instanceof i?(D(F,P),F._source=this):(F=c&&!P?c:new i(P,this),F.setContent(m)),F}});var Ci=si.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,si.prototype.openOn.call(this,i)},onAdd:function(i){si.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof xi||this._source.on("preclick",Ws))},onRemove:function(i){si.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof xi||this._source.off("preclick",Ws))},getEvents:function(){var i=si.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",c=this._container=jn("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),m=this._wrapper=jn("div",i+"-content-wrapper",c);if(this._contentNode=jn("div",i+"-content",m),No(c),Ma(this._contentNode),Ln(c,"contextmenu",Ws),this._tipContainer=jn("div",i+"-tip-container",c),this._tip=jn("div",i+"-tip",this._tipContainer),this.options.closeButton){var P=this._closeButton=jn("a",i+"-close-button",c);P.setAttribute("role","button"),P.setAttribute("aria-label","Close popup"),P.href="#close",P.innerHTML='<span aria-hidden="true">&#215;</span>',Ln(P,"click",function(F){xr(F),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,c=i.style;c.width="",c.whiteSpace="nowrap";var m=i.offsetWidth;m=Math.min(m,this.options.maxWidth),m=Math.max(m,this.options.minWidth),c.width=m+1+"px",c.whiteSpace="",c.height="";var P=i.offsetHeight,F=this.options.maxHeight,at="leaflet-popup-scrolled";F&&P>F?(c.height=F+"px",kn(i,at)):$n(i,at),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var c=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),m=this._getAnchor();yr(this._container,c.add(m))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,c=parseInt(Oi(this._container,"marginBottom"),10)||0,m=this._container.offsetHeight+c,P=this._containerWidth,F=new O(this._containerLeft,-m-this._containerBottom);F._add(Ps(this._container));var at=i.layerPointToContainerPoint(F),$t=gt(this.options.autoPanPadding),fe=gt(this.options.autoPanPaddingTopLeft||$t),_e=gt(this.options.autoPanPaddingBottomRight||$t),Me=i.getSize(),We=0,ln=0;at.x+P+_e.x>Me.x&&(We=at.x+P-Me.x+_e.x),at.x-We-fe.x<0&&(We=at.x-fe.x),at.y+m+_e.y>Me.y&&(ln=at.y+m-Me.y+_e.y),at.y-ln-fe.y<0&&(ln=at.y-fe.y),(We||ln)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([We,ln]))}},_getAnchor:function(){return gt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),mo=function(i,c){return new Ci(i,c)};Nn.mergeOptions({closePopupOnClick:!0}),Nn.include({openPopup:function(i,c,m){return this._initOverlay(Ci,i,c,m).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),Qn.include({bindPopup:function(i,c){return this._popup=this._initOverlay(Ci,this._popup,i,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof pi||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){Ri(i);var c=i.layer||i.target;if(this._popup._source===c&&!(c instanceof xi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=c,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var Bs=si.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){si.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){si.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=si.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",c=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=jn("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+p(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var c,m,P=this._map,F=this._container,at=P.latLngToContainerPoint(P.getCenter()),$t=P.layerPointToContainerPoint(i),fe=this.options.direction,_e=F.offsetWidth,Me=F.offsetHeight,We=gt(this.options.offset),ln=this._getAnchor();fe==="top"?(c=_e/2,m=Me):fe==="bottom"?(c=_e/2,m=0):fe==="center"?(c=_e/2,m=Me/2):fe==="right"?(c=0,m=Me/2):fe==="left"?(c=_e,m=Me/2):$t.x<at.x?(fe="right",c=0,m=Me/2):(fe="left",c=_e+(We.x+ln.x)*2,m=Me/2),i=i.subtract(gt(c,m,!0)).add(We).add(ln),$n(F,"leaflet-tooltip-right"),$n(F,"leaflet-tooltip-left"),$n(F,"leaflet-tooltip-top"),$n(F,"leaflet-tooltip-bottom"),kn(F,"leaflet-tooltip-"+fe),yr(F,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&ni(this._container,i)},_animateZoom:function(i){var c=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(c)},_getAnchor:function(){return gt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),pa=function(i,c){return new Bs(i,c)};Nn.include({openTooltip:function(i,c,m){return this._initOverlay(Bs,i,c,m).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),Qn.include({bindTooltip:function(i,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Bs,this._tooltip,i,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var c=i?"off":"on",m={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?m.add=this._openTooltip:(m.mouseover=this._openTooltip,m.mouseout=this.closeTooltip,m.click=this._openTooltip,this._map?this._addFocusListeners():m.add=this._addFocusListeners),this._tooltip.options.sticky&&(m.mousemove=this._moveTooltip),this[c](m),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof pi||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var c=typeof i.getElement=="function"&&i.getElement();c&&(Ln(c,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),Ln(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var c=typeof i.getElement=="function"&&i.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var c=i.latlng,m,P;this._tooltip.options.sticky&&i.originalEvent&&(m=this._map.mouseEventToContainerPoint(i.originalEvent),P=this._map.containerPointToLayerPoint(m),c=this._map.layerPointToLatLng(P)),this._tooltip.setLatLng(c)}});var vo=ls.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var c=i&&i.tagName==="DIV"?i:document.createElement("div"),m=this.options;if(m.html instanceof Element?(oo(c),c.appendChild(m.html)):c.innerHTML=m.html!==!1?m.html:"",m.bgPos){var P=gt(m.bgPos);c.style.backgroundPosition=-P.x+"px "+-P.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function yo(i){return new vo(i)}ls.Default=Ks;var to=Qn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:$e.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){D(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),xn(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Vs(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Cs(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=v(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof O?i:new O(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var c=this.getPane().children,m=-i(-1/0,1/0),P=0,F=c.length,at;P<F;P++)at=c[P].style.zIndex,c[P]!==this._container&&at&&(m=i(m,+at));isFinite(m)&&(this.options.zIndex=m+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!$e.ielt9){ni(this._container,this.options.opacity);var i=+new Date,c=!1,m=!1;for(var P in this._tiles){var F=this._tiles[P];if(!(!F.current||!F.loaded)){var at=Math.min(1,(i-F.loaded)/200);ni(F.el,at),at<1?c=!0:(F.active?m=!0:this._onOpaqueTile(F),F.active=!0)}}m&&!this._noPrune&&this._pruneTiles(),c&&(V(this._fadeFrame),this._fadeFrame=Z(this._updateOpacity,this))}},_onOpaqueTile:b,_initContainer:function(){this._container||(this._container=jn("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,c=this.options.maxZoom;if(i!==void 0){for(var m in this._levels)m=Number(m),this._levels[m].el.children.length||m===i?(this._levels[m].el.style.zIndex=c-Math.abs(i-m),this._onUpdateLevel(m)):(xn(this._levels[m].el),this._removeTilesAtZoom(m),this._onRemoveLevel(m),delete this._levels[m]);var P=this._levels[i],F=this._map;return P||(P=this._levels[i]={},P.el=jn("div","leaflet-tile-container leaflet-zoom-animated",this._container),P.el.style.zIndex=c,P.origin=F.project(F.unproject(F.getPixelOrigin()),i).round(),P.zoom=i,this._setZoomTransform(P,F.getCenter(),F.getZoom()),b(P.el.offsetWidth),this._onCreateLevel(P)),this._level=P,P}},_onUpdateLevel:b,_onRemoveLevel:b,_onCreateLevel:b,_pruneTiles:function(){if(this._map){var i,c,m=this._map.getZoom();if(m>this.options.maxZoom||m<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)c=this._tiles[i],c.retain=c.current;for(i in this._tiles)if(c=this._tiles[i],c.current&&!c.active){var P=c.coords;this._retainParent(P.x,P.y,P.z,P.z-5)||this._retainChildren(P.x,P.y,P.z,P.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var c in this._tiles)this._tiles[c].coords.z===i&&this._removeTile(c)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)xn(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,c,m,P){var F=Math.floor(i/2),at=Math.floor(c/2),$t=m-1,fe=new O(+F,+at);fe.z=+$t;var _e=this._tileCoordsToKey(fe),Me=this._tiles[_e];return Me&&Me.active?(Me.retain=!0,!0):(Me&&Me.loaded&&(Me.retain=!0),$t>P?this._retainParent(F,at,$t,P):!1)},_retainChildren:function(i,c,m,P){for(var F=2*i;F<2*i+2;F++)for(var at=2*c;at<2*c+2;at++){var $t=new O(F,at);$t.z=m+1;var fe=this._tileCoordsToKey($t),_e=this._tiles[fe];if(_e&&_e.active){_e.retain=!0;continue}else _e&&_e.loaded&&(_e.retain=!0);m+1<P&&this._retainChildren(F,at,m+1,P)}},_resetView:function(i){var c=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var c=this.options;return c.minNativeZoom!==void 0&&i<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<i?c.maxNativeZoom:i},_setView:function(i,c,m,P){var F=Math.round(c);this.options.maxZoom!==void 0&&F>this.options.maxZoom||this.options.minZoom!==void 0&&F<this.options.minZoom?F=void 0:F=this._clampZoom(F);var at=this.options.updateWhenZooming&&F!==this._tileZoom;(!P||at)&&(this._tileZoom=F,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),F!==void 0&&this._update(i),m||this._pruneTiles(),this._noPrune=!!m),this._setZoomTransforms(i,c)},_setZoomTransforms:function(i,c){for(var m in this._levels)this._setZoomTransform(this._levels[m],i,c)},_setZoomTransform:function(i,c,m){var P=this._map.getZoomScale(m,i.zoom),F=i.origin.multiplyBy(P).subtract(this._map._getNewPixelOrigin(c,m)).round();$e.any3d?ks(i.el,F,P):yr(i.el,F)},_resetGrid:function(){var i=this._map,c=i.options.crs,m=this._tileSize=this.getTileSize(),P=this._tileZoom,F=this._map.getPixelWorldBounds(this._tileZoom);F&&(this._globalTileRange=this._pxBoundsToTileRange(F)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,c.wrapLng[0]],P).x/m.x),Math.ceil(i.project([0,c.wrapLng[1]],P).x/m.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([c.wrapLat[0],0],P).y/m.x),Math.ceil(i.project([c.wrapLat[1],0],P).y/m.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var c=this._map,m=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),P=c.getZoomScale(m,this._tileZoom),F=c.project(i,this._tileZoom).floor(),at=c.getSize().divideBy(P*2);return new Y(F.subtract(at),F.add(at))},_update:function(i){var c=this._map;if(c){var m=this._clampZoom(c.getZoom());if(i===void 0&&(i=c.getCenter()),this._tileZoom!==void 0){var P=this._getTiledPixelBounds(i),F=this._pxBoundsToTileRange(P),at=F.getCenter(),$t=[],fe=this.options.keepBuffer,_e=new Y(F.getBottomLeft().subtract([fe,-fe]),F.getTopRight().add([fe,-fe]));if(!(isFinite(F.min.x)&&isFinite(F.min.y)&&isFinite(F.max.x)&&isFinite(F.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Me in this._tiles){var We=this._tiles[Me].coords;(We.z!==this._tileZoom||!_e.contains(new O(We.x,We.y)))&&(this._tiles[Me].current=!1)}if(Math.abs(m-this._tileZoom)>1){this._setView(i,m);return}for(var ln=F.min.y;ln<=F.max.y;ln++)for(var Mn=F.min.x;Mn<=F.max.x;Mn++){var _i=new O(Mn,ln);if(_i.z=this._tileZoom,!!this._isValidTile(_i)){var Rr=this._tiles[this._tileCoordsToKey(_i)];Rr?Rr.current=!0:$t.push(_i)}}if($t.sort(function(br,Ds){return br.distanceTo(at)-Ds.distanceTo(at)}),$t.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Si=document.createDocumentFragment();for(Mn=0;Mn<$t.length;Mn++)this._addTile($t[Mn],Si);this._level.el.appendChild(Si)}}}},_isValidTile:function(i){var c=this._map.options.crs;if(!c.infinite){var m=this._globalTileRange;if(!c.wrapLng&&(i.x<m.min.x||i.x>m.max.x)||!c.wrapLat&&(i.y<m.min.y||i.y>m.max.y))return!1}if(!this.options.bounds)return!0;var P=this._tileCoordsToBounds(i);return et(this.options.bounds).overlaps(P)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var c=this._map,m=this.getTileSize(),P=i.scaleBy(m),F=P.add(m),at=c.unproject(P,i.z),$t=c.unproject(F,i.z);return[at,$t]},_tileCoordsToBounds:function(i){var c=this._tileCoordsToNwSe(i),m=new U(c[0],c[1]);return this.options.noWrap||(m=this._map.wrapLatLngBounds(m)),m},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var c=i.split(":"),m=new O(+c[0],+c[1]);return m.z=+c[2],m},_removeTile:function(i){var c=this._tiles[i];c&&(xn(c.el),delete this._tiles[i],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){kn(i,"leaflet-tile");var c=this.getTileSize();i.style.width=c.x+"px",i.style.height=c.y+"px",i.onselectstart=b,i.onmousemove=b,$e.ielt9&&this.options.opacity<1&&ni(i,this.options.opacity)},_addTile:function(i,c){var m=this._getTilePos(i),P=this._tileCoordsToKey(i),F=this.createTile(this._wrapCoords(i),u(this._tileReady,this,i));this._initTile(F),this.createTile.length<2&&Z(u(this._tileReady,this,i,null,F)),yr(F,m),this._tiles[P]={el:F,coords:i,current:!0},c.appendChild(F),this.fire("tileloadstart",{tile:F,coords:i})},_tileReady:function(i,c,m){c&&this.fire("tileerror",{error:c,tile:m,coords:i});var P=this._tileCoordsToKey(i);m=this._tiles[P],m&&(m.loaded=+new Date,this._map._fadeAnimated?(ni(m.el,0),V(this._fadeFrame),this._fadeFrame=Z(this._updateOpacity,this)):(m.active=!0,this._pruneTiles()),c||(kn(m.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:m.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),$e.ielt9||!this._map._fadeAnimated?Z(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var c=new O(this._wrapX?w(i.x,this._wrapX):i.x,this._wrapY?w(i.y,this._wrapY):i.y);return c.z=i.z,c},_pxBoundsToTileRange:function(i){var c=this.getTileSize();return new Y(i.min.unscaleBy(c).floor(),i.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function Ki(i){return new to(i)}var Gr=to.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,c){this._url=i,c=D(this,c),c.detectRetina&&$e.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,c){return this._url===i&&c===void 0&&(c=!0),this._url=i,c||this.redraw(),this},createTile:function(i,c){var m=document.createElement("img");return Ln(m,"load",u(this._tileOnLoad,this,c,m)),Ln(m,"error",u(this._tileOnError,this,c,m)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(m.referrerPolicy=this.options.referrerPolicy),m.alt="",m.src=this.getTileUrl(i),m},getTileUrl:function(i){var c={r:$e.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var m=this._globalTileRange.max.y-i.y;this.options.tms&&(c.y=m),c["-y"]=m}return W(this._url,o(c,this.options))},_tileOnLoad:function(i,c){$e.ielt9?setTimeout(u(i,this,null,c),0):i(null,c)},_tileOnError:function(i,c,m){var P=this.options.errorTileUrl;P&&c.getAttribute("src")!==P&&(c.src=P),i(m,c)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,c=this.options.maxZoom,m=this.options.zoomReverse,P=this.options.zoomOffset;return m&&(i=c-i),i+P},_getSubdomain:function(i){var c=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var i,c;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(c=this._tiles[i].el,c.onload=b,c.onerror=b,!c.complete)){c.src=Tt;var m=this._tiles[i].coords;xn(c),delete this._tiles[i],this.fire("tileabort",{tile:c,coords:m})}},_removeTile:function(i){var c=this._tiles[i];if(c)return c.el.setAttribute("src",Tt),to.prototype._removeTile.call(this,i)},_tileReady:function(i,c,m){if(!(!this._map||m&&m.getAttribute("src")===Tt))return to.prototype._tileReady.call(this,i,c,m)}});function Jn(i,c){return new Gr(i,c)}var Wn=Gr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,c){this._url=i;var m=o({},this.defaultWmsParams);for(var P in c)P in this.options||(m[P]=c[P]);c=D(this,c);var F=c.detectRetina&&$e.retina?2:1,at=this.getTileSize();m.width=at.x*F,m.height=at.y*F,this.wmsParams=m},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,Gr.prototype.onAdd.call(this,i)},getTileUrl:function(i){var c=this._tileCoordsToNwSe(i),m=this._crs,P=A(m.project(c[0]),m.project(c[1])),F=P.min,at=P.max,$t=(this._wmsVersion>=1.3&&this._crs===Er?[F.y,F.x,at.y,at.x]:[F.x,F.y,at.x,at.y]).join(","),fe=Gr.prototype.getTileUrl.call(this,i);return fe+j(this.wmsParams,fe,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+$t},setParams:function(i,c){return o(this.wmsParams,i),c||this.redraw(),this}});function Cr(i,c){return new Wn(i,c)}Gr.WMS=Wn,Jn.wms=Cr;var tr=Qn.extend({options:{padding:.1},initialize:function(i){D(this,i),p(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),kn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,c){var m=this._map.getZoomScale(c,this._zoom),P=this._map.getSize().multiplyBy(.5+this.options.padding),F=this._map.project(this._center,c),at=P.multiplyBy(-m).add(F).subtract(this._map._getNewPixelOrigin(i,c));$e.any3d?ks(this._container,at,m):yr(this._container,at)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,c=this._map.getSize(),m=this._map.containerPointToLayerPoint(c.multiplyBy(-i)).round();this._bounds=new Y(m,m.add(c.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),cs=tr.extend({options:{tolerance:0},getEvents:function(){var i=tr.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){tr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");Ln(i,"mousemove",this._onMouseMove,this),Ln(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ln(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){V(this._redrawRequest),delete this._ctx,xn(this._container),Rn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var c in this._layers)i=this._layers[c],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){tr.prototype._update.call(this);var i=this._bounds,c=this._container,m=i.getSize(),P=$e.retina?2:1;yr(c,i.min),c.width=P*m.x,c.height=P*m.y,c.style.width=m.x+"px",c.style.height=m.y+"px",$e.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){tr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[p(i)]=i;var c=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var c=i._order,m=c.next,P=c.prev;m?m.prev=P:this._drawLast=P,P?P.next=m:this._drawFirst=m,delete i._order,delete this._layers[p(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var c=i.options.dashArray.split(/[, ]+/),m=[],P,F;for(F=0;F<c.length;F++){if(P=Number(c[F]),isNaN(P))return;m.push(P)}i.options._dashArray=m}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||Z(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var c=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Y,this._redrawBounds.extend(i._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(i._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var c=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,c=this._redrawBounds;if(this._ctx.save(),c){var m=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,m.x,m.y),this._ctx.clip()}this._drawing=!0;for(var P=this._drawFirst;P;P=P.next)i=P.layer,(!c||i._pxBounds&&i._pxBounds.intersects(c))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,c){if(this._drawing){var m,P,F,at,$t=i._parts,fe=$t.length,_e=this._ctx;if(fe){for(_e.beginPath(),m=0;m<fe;m++){for(P=0,F=$t[m].length;P<F;P++)at=$t[m][P],_e[P?"lineTo":"moveTo"](at.x,at.y);c&&_e.closePath()}this._fillStroke(_e,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var c=i._point,m=this._ctx,P=Math.max(Math.round(i._radius),1),F=(Math.max(Math.round(i._radiusY),1)||P)/P;F!==1&&(m.save(),m.scale(1,F)),m.beginPath(),m.arc(c.x,c.y/F,P,0,Math.PI*2,!1),F!==1&&m.restore(),this._fillStroke(m,i)}},_fillStroke:function(i,c){var m=c.options;m.fill&&(i.globalAlpha=m.fillOpacity,i.fillStyle=m.fillColor||m.color,i.fill(m.fillRule||"evenodd")),m.stroke&&m.weight!==0&&(i.setLineDash&&i.setLineDash(c.options&&c.options._dashArray||[]),i.globalAlpha=m.opacity,i.lineWidth=m.weight,i.strokeStyle=m.color,i.lineCap=m.lineCap,i.lineJoin=m.lineJoin,i.stroke())},_onClick:function(i){for(var c=this._map.mouseEventToLayerPoint(i),m,P,F=this._drawFirst;F;F=F.next)m=F.layer,m.options.interactive&&m._containsPoint(c)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(m))&&(P=m);this._fireEvent(P?[P]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,c)}},_handleMouseOut:function(i){var c=this._hoveredLayer;c&&($n(this._container,"leaflet-interactive"),this._fireEvent([c],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,c){if(!this._mouseHoverThrottled){for(var m,P,F=this._drawFirst;F;F=F.next)m=F.layer,m.options.interactive&&m._containsPoint(c)&&(P=m);P!==this._hoveredLayer&&(this._handleMouseOut(i),P&&(kn(this._container,"leaflet-interactive"),this._fireEvent([P],i,"mouseover"),this._hoveredLayer=P)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,c,m){this._map._fireDOMEvent(c,m||c.type,i)},_bringToFront:function(i){var c=i._order;if(c){var m=c.next,P=c.prev;if(m)m.prev=P;else return;P?P.next=m:m&&(this._drawFirst=m),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(i)}},_bringToBack:function(i){var c=i._order;if(c){var m=c.next,P=c.prev;if(P)P.next=m;else return;m?m.prev=P:P&&(this._drawLast=P),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(i)}}});function _o(i){return $e.canvas?new cs(i):null}var Ts=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),ol={_initContainer:function(){this._container=jn("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(tr.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var c=i._container=Ts("shape");kn(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",i._path=Ts("path"),c.appendChild(i._path),this._updateStyle(i),this._layers[p(i)]=i},_addPath:function(i){var c=i._container;this._container.appendChild(c),i.options.interactive&&i.addInteractiveTarget(c)},_removePath:function(i){var c=i._container;xn(c),i.removeInteractiveTarget(c),delete this._layers[p(i)]},_updateStyle:function(i){var c=i._stroke,m=i._fill,P=i.options,F=i._container;F.stroked=!!P.stroke,F.filled=!!P.fill,P.stroke?(c||(c=i._stroke=Ts("stroke")),F.appendChild(c),c.weight=P.weight+"px",c.color=P.color,c.opacity=P.opacity,P.dashArray?c.dashStyle=Q(P.dashArray)?P.dashArray.join(" "):P.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=P.lineCap.replace("butt","flat"),c.joinstyle=P.lineJoin):c&&(F.removeChild(c),i._stroke=null),P.fill?(m||(m=i._fill=Ts("fill")),F.appendChild(m),m.color=P.fillColor||P.color,m.opacity=P.fillOpacity):m&&(F.removeChild(m),i._fill=null)},_updateCircle:function(i){var c=i._point.round(),m=Math.round(i._radius),P=Math.round(i._radiusY||m);this._setPath(i,i._empty()?"M0 0":"AL "+c.x+","+c.y+" "+m+","+P+" 0,"+65535*360)},_setPath:function(i,c){i._path.v=c},_bringToFront:function(i){Vs(i._container)},_bringToBack:function(i){Cs(i._container)}},bo=$e.vml?Ts:wt,Or=tr.extend({_initContainer:function(){this._container=bo("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=bo("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){xn(this._container),Rn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){tr.prototype._update.call(this);var i=this._bounds,c=i.getSize(),m=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,m.setAttribute("width",c.x),m.setAttribute("height",c.y)),yr(m,i.min),m.setAttribute("viewBox",[i.min.x,i.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(i){var c=i._path=bo("path");i.options.className&&kn(c,i.options.className),i.options.interactive&&kn(c,"leaflet-interactive"),this._updateStyle(i),this._layers[p(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){xn(i._path),i.removeInteractiveTarget(i._path),delete this._layers[p(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var c=i._path,m=i.options;c&&(m.stroke?(c.setAttribute("stroke",m.color),c.setAttribute("stroke-opacity",m.opacity),c.setAttribute("stroke-width",m.weight),c.setAttribute("stroke-linecap",m.lineCap),c.setAttribute("stroke-linejoin",m.lineJoin),m.dashArray?c.setAttribute("stroke-dasharray",m.dashArray):c.removeAttribute("stroke-dasharray"),m.dashOffset?c.setAttribute("stroke-dashoffset",m.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),m.fill?(c.setAttribute("fill",m.fillColor||m.color),c.setAttribute("fill-opacity",m.fillOpacity),c.setAttribute("fill-rule",m.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(i,c){this._setPath(i,K(i._parts,c))},_updateCircle:function(i){var c=i._point,m=Math.max(Math.round(i._radius),1),P=Math.max(Math.round(i._radiusY),1)||m,F="a"+m+","+P+" 0 1,0 ",at=i._empty()?"M0 0":"M"+(c.x-m)+","+c.y+F+m*2+",0 "+F+-m*2+",0 ";this._setPath(i,at)},_setPath:function(i,c){i._path.setAttribute("d",c)},_bringToFront:function(i){Vs(i._path)},_bringToBack:function(i){Cs(i._path)}});$e.vml&&Or.include(ol);function er(i){return $e.svg||$e.vml?new Or(i):null}Nn.include({getRenderer:function(i){var c=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var c=this._paneRenderers[i];return c===void 0&&(c=this._createRenderer({pane:i}),this._paneRenderers[i]=c),c},_createRenderer:function(i){return this.options.preferCanvas&&_o(i)||er(i)}});var ki=Dr.extend({initialize:function(i,c){Dr.prototype.initialize.call(this,this._boundsToLatLngs(i),c)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=et(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function Pi(i,c){return new ki(i,c)}Or.create=bo,Or.pointsToPath=K,Gi.geometryToLayer=jo,Gi.coordsToLatLng=As,Gi.coordsToLatLngs=Hr,Gi.latLngToCoords=Fr,Gi.latLngsToCoords=us,Gi.getFeature=Li,Gi.asFeature=Wi,Nn.mergeOptions({boxZoom:!0});var gn=Tr.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){Ln(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Rn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){xn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),To(),Ea(),this._startPoint=this._map.mouseEventToContainerPoint(i),Ln(document,{contextmenu:Ri,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=jn("div","leaflet-zoom-box",this._container),kn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var c=new Y(this._point,this._startPoint),m=c.getSize();yr(this._box,c.min),this._box.style.width=m.x+"px",this._box.style.height=m.y+"px"},_finish:function(){this._moved&&(xn(this._box),$n(this._container,"leaflet-crosshair")),Hs(),as(),Rn(document,{contextmenu:Ri,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var c=new U(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Nn.addInitHook("addHandler","boxZoom",gn),Nn.mergeOptions({doubleClickZoom:!0});var al=Tr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var c=this._map,m=c.getZoom(),P=c.options.zoomDelta,F=i.originalEvent.shiftKey?m-P:m+P;c.options.doubleClickZoom==="center"?c.setZoom(F):c.setZoomAround(i.containerPoint,F)}});Nn.addInitHook("addHandler","doubleClickZoom",al),Nn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Uo=Tr.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new Hi(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}kn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){$n(this._map._container,"leaflet-grab"),$n(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=et(this._map.options.maxBounds);this._offsetLimit=A(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var c=this._lastTime=+new Date,m=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(m),this._times.push(c),this._prunePositions(c)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,c){return i-(i-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;i.x<c.min.x&&(i.x=this._viscousLimit(i.x,c.min.x)),i.y<c.min.y&&(i.y=this._viscousLimit(i.y,c.min.y)),i.x>c.max.x&&(i.x=this._viscousLimit(i.x,c.max.x)),i.y>c.max.y&&(i.y=this._viscousLimit(i.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,c=Math.round(i/2),m=this._initialWorldOffset,P=this._draggable._newPos.x,F=(P-c+m)%i+c-m,at=(P+c+m)%i-c-m,$t=Math.abs(F+m)<Math.abs(at+m)?F:at;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=$t},_onDragEnd:function(i){var c=this._map,m=c.options,P=!m.inertia||i.noInertia||this._times.length<2;if(c.fire("dragend",i),P)c.fire("moveend");else{this._prunePositions(+new Date);var F=this._lastPos.subtract(this._positions[0]),at=(this._lastTime-this._times[0])/1e3,$t=m.easeLinearity,fe=F.multiplyBy($t/at),_e=fe.distanceTo([0,0]),Me=Math.min(m.inertiaMaxSpeed,_e),We=fe.multiplyBy(Me/_e),ln=Me/(m.inertiaDeceleration*$t),Mn=We.multiplyBy(-ln/2).round();!Mn.x&&!Mn.y?c.fire("moveend"):(Mn=c._limitOffset(Mn,c.options.maxBounds),Z(function(){c.panBy(Mn,{duration:ln,easeLinearity:$t,noMoveStart:!0,animate:!0})}))}}});Nn.addInitHook("addHandler","dragging",Uo),Nn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ji=Tr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),Ln(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Rn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,c=document.documentElement,m=i.scrollTop||c.scrollTop,P=i.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(P,m)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var c=this._panKeys={},m=this.keyCodes,P,F;for(P=0,F=m.left.length;P<F;P++)c[m.left[P]]=[-1*i,0];for(P=0,F=m.right.length;P<F;P++)c[m.right[P]]=[i,0];for(P=0,F=m.down.length;P<F;P++)c[m.down[P]]=[0,i];for(P=0,F=m.up.length;P<F;P++)c[m.up[P]]=[0,-1*i]},_setZoomDelta:function(i){var c=this._zoomKeys={},m=this.keyCodes,P,F;for(P=0,F=m.zoomIn.length;P<F;P++)c[m.zoomIn[P]]=i;for(P=0,F=m.zoomOut.length;P<F;P++)c[m.zoomOut[P]]=-i},_addHooks:function(){Ln(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Rn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var c=i.keyCode,m=this._map,P;if(c in this._panKeys){if(!m._panAnim||!m._panAnim._inProgress)if(P=this._panKeys[c],i.shiftKey&&(P=gt(P).multiplyBy(3)),m.options.maxBounds&&(P=m._limitOffset(gt(P),m.options.maxBounds)),m.options.worldCopyJump){var F=m.wrapLatLng(m.unproject(m.project(m.getCenter()).add(P)));m.panTo(F)}else m.panBy(P)}else if(c in this._zoomKeys)m.setZoom(m.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&m._popup&&m._popup.options.closeOnEscapeKey)m.closePopup();else return;Ri(i)}}});Nn.addInitHook("addHandler","keyboard",Ji),Nn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var oi=Tr.extend({addHooks:function(){Ln(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Rn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var c=oa(i),m=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var P=Math.max(m-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),P),Ri(i)},_performZoom:function(){var i=this._map,c=i.getZoom(),m=this._map.options.zoomSnap||0;i._stop();var P=this._delta/(this._map.options.wheelPxPerZoomLevel*4),F=4*Math.log(2/(1+Math.exp(-Math.abs(P))))/Math.LN2,at=m?Math.ceil(F/m)*m:F,$t=i._limitZoom(c+(this._delta>0?at:-at))-c;this._delta=0,this._startTime=null,$t&&(i.options.scrollWheelZoom==="center"?i.setZoom(c+$t):i.setZoomAround(this._lastMousePos,c+$t))}});Nn.addInitHook("addHandler","scrollWheelZoom",oi);var Dl=600;Nn.mergeOptions({tapHold:$e.touchNative&&$e.safari&&$e.mobile,tapTolerance:15});var vi=Tr.extend({addHooks:function(){Ln(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Rn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var c=i.touches[0];this._startPos=this._newPos=new O(c.clientX,c.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(Ln(document,"touchend",xr),Ln(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),Dl),Ln(document,"touchend touchcancel contextmenu",this._cancel,this),Ln(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){Rn(document,"touchend",xr),Rn(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),Rn(document,"touchend touchcancel contextmenu",this._cancel,this),Rn(document,"touchmove",this._onMove,this)},_onMove:function(i){var c=i.touches[0];this._newPos=new O(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,c){var m=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});m._simulated=!0,c.target.dispatchEvent(m)}});Nn.addInitHook("addHandler","tapHold",vi),Nn.mergeOptions({touchZoom:$e.touch,bounceAtZoomLimits:!0});var yi=Tr.extend({addHooks:function(){kn(this._map._container,"leaflet-touch-zoom"),Ln(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){$n(this._map._container,"leaflet-touch-zoom"),Rn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var c=this._map;if(!(!i.touches||i.touches.length!==2||c._animatingZoom||this._zooming)){var m=c.mouseEventToContainerPoint(i.touches[0]),P=c.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(m.add(P)._divideBy(2))),this._startDist=m.distanceTo(P),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),Ln(document,"touchmove",this._onTouchMove,this),Ln(document,"touchend touchcancel",this._onTouchEnd,this),xr(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var c=this._map,m=c.mouseEventToContainerPoint(i.touches[0]),P=c.mouseEventToContainerPoint(i.touches[1]),F=m.distanceTo(P)/this._startDist;if(this._zoom=c.getScaleZoom(F,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&F<1||this._zoom>c.getMaxZoom()&&F>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,F===1)return}else{var at=m._add(P)._divideBy(2)._subtract(this._centerPoint);if(F===1&&at.x===0&&at.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(at),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),V(this._animRequest);var $t=u(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Z($t,this,!0),xr(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,V(this._animRequest),Rn(document,"touchmove",this._onTouchMove,this),Rn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Nn.addInitHook("addHandler","touchZoom",yi),Nn.BoxZoom=gn,Nn.DoubleClickZoom=al,Nn.Drag=Uo,Nn.Keyboard=Ji,Nn.ScrollWheelZoom=oi,Nn.TapHold=vi,Nn.TouchZoom=yi,n.Bounds=Y,n.Browser=$e,n.CRS=tt,n.Canvas=cs,n.Circle=ri,n.CircleMarker=gi,n.Class=Et,n.Control=un,n.DivIcon=vo,n.DivOverlay=si,n.DomEvent=Oo,n.DomUtil=bn,n.Draggable=Hi,n.Evented=q,n.FeatureGroup=pi,n.GeoJSON=Gi,n.GridLayer=to,n.Handler=Tr,n.Icon=ls,n.ImageOverlay=Ms,n.LatLng=lt,n.LatLngBounds=U,n.Layer=Qn,n.LayerGroup=di,n.LineUtil=Dn,n.Map=Nn,n.Marker=Ar,n.Mixin=rl,n.Path=xi,n.Point=O,n.PolyUtil=ha,n.Polygon=Dr,n.Polyline=Fi,n.Popup=Ci,n.PosAnimation=Ba,n.Projection=Gn,n.Rectangle=ki,n.Renderer=tr,n.SVG=Or,n.SVGOverlay=Fa,n.TileLayer=Gr,n.Tooltip=Bs,n.Transformation=jt,n.Util=St,n.VideoOverlay=ii,n.bind=u,n.bounds=A,n.canvas=_o,n.circle=Ys,n.circleMarker=da,n.control=fi,n.divIcon=yo,n.extend=o,n.featureGroup=Ra,n.geoJSON=Zi,n.geoJson=_r,n.gridLayer=Ki,n.icon=Ia,n.imageOverlay=mi,n.latLng=ct,n.latLngBounds=et,n.layerGroup=il,n.map=Ta,n.marker=fa,n.point=gt,n.polygon=Es,n.polyline=sl,n.popup=mo,n.rectangle=Pi,n.setOptions=D,n.stamp=p,n.svg=er,n.svgOverlay=ja,n.tileLayer=Jn,n.tooltip=pa,n.transformation=H,n.version=r,n.videoOverlay=zo;var Ns=window.L;n.noConflict=function(){return window.L=Ns,this},window.L=n})})(gd,gd.exports);var ui=gd.exports;const Kt=x1(ui);var U0={exports:{}};(function(t,e){(function(n,r){r(e)})(Co,function(n){var r=typeof window<"u"?window:typeof Co<"u"?Co:typeof self<"u"?self:{};function o(v,w){return v(w={exports:{}},w.exports),w.exports}var a=o(function(v,w){(function(b){const S={escape:function(M){return M.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:x,mimeType:function(M){return M=x(M).toLowerCase(),function(){var $="application/font-woff",q="image/jpeg";return{woff:$,woff2:$,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:q,jpeg:q,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[M]||""},dataAsUrl:function(M,$){return`data:${$};base64,`+M},isDataUrl:function(M){return M.search(/^(data:)/)!==-1},canvasToBlob:function(M){return M.toBlob?new Promise(function(q){M.toBlob(q)}):($=M,new Promise(function(q){const O=Ft($.toDataURL().split(",")[1]);var dt=O.length;const gt=new Uint8Array(dt);for(let Y=0;Y<dt;Y++)gt[Y]=O.charCodeAt(Y);q(new Blob([gt],{type:"image/png"}))}));var $},resolveUrl:function(M,$){const q=document.implementation.createHTMLDocument(),O=q.createElement("base"),dt=(q.head.appendChild(O),q.createElement("a"));return q.body.appendChild(dt),O.href=$,dt.href=M,dt.href},getAndEncode:function(M){let $=Tt.impl.urlCache.find(function(q){return q.url===M});return $||($={url:M,promise:null},Tt.impl.urlCache.push($)),$.promise===null&&(Tt.impl.options.cacheBust&&(M+=(/\?/.test(M)?"&":"?")+new Date().getTime()),$.promise=new Promise(function(q){const O=Tt.impl.options.httpTimeout,dt=new XMLHttpRequest;let gt;var Y;function A(U){console.error(U),q("")}dt.onreadystatechange=function(){if(dt.readyState===4)if(dt.status!==200)gt?q(gt):A(`cannot fetch resource: ${M}, status: `+dt.status);else{const U=new FileReader;U.onloadend=function(){var et=U.result.split(/,/)[1];q(et)},U.readAsDataURL(dt.response)}},dt.ontimeout=function(){gt?q(gt):A(`timeout of ${O}ms occured while fetching resource: `+M)},dt.responseType="blob",dt.timeout=O,Tt.impl.options.useCredentials&&(dt.withCredentials=!0),dt.open("GET",M,!0),dt.send(),Tt.impl.options.imagePlaceholder&&(Y=Tt.impl.options.imagePlaceholder.split(/,/))&&Y[1]&&(gt=Y[1])})),$.promise},uid:function(){let M=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+M++}}(),delay:function(M){return function($){return new Promise(function(q){setTimeout(function(){q($)},M)})}},asArray:function(M){const $=[],q=M.length;for(let O=0;O<q;O++)$.push(M[O]);return $},escapeXhtml:function(M){return M.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(M){return M!=="data:,"?new Promise(function($,q){const O=new Image;Tt.impl.options.useCredentials&&(O.crossOrigin="use-credentials"),O.onload=function(){$(O)},O.onerror=q,O.src=M}):Promise.resolve()},width:function(M){var $=I(M,"border-left-width"),q=I(M,"border-right-width");return M.scrollWidth+$+q},height:function(M){var $=I(M,"border-top-width"),q=I(M,"border-bottom-width");return M.scrollHeight+$+q}};function x(M){return(M=/\.([^\.\/]*?)(\?|$)/g.exec(M))?M[1]:""}function I(M,$){const q=Nt(M).getPropertyValue($);return parseFloat(q.replace("px",""))}const D=function(){const M=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(dt,gt,Y){return $(dt)?Promise.resolve(dt).then(q).then(function(A){let U=Promise.resolve(dt);return A.forEach(function(et){U=U.then(function(lt){return O(lt,et,gt,Y)})}),U}):Promise.resolve(dt)},shouldProcess:$,impl:{readUrls:q,inline:O}};function $(dt){return dt.search(M)!==-1}function q(dt){const gt=[];for(var Y;(Y=M.exec(dt))!==null;)gt.push(Y[1]);return gt.filter(function(A){return!S.isDataUrl(A)})}function O(dt,gt,Y,A){return Promise.resolve(gt).then(function(U){return Y?S.resolveUrl(U,Y):U}).then(A||S.getAndEncode).then(function(U){return S.dataAsUrl(U,S.mimeType(gt))}).then(function(U){return dt.replace((et=gt,new RegExp(`(url\\(['"]?)(${S.escape(et)})(['"]?\\))`,"g")),`$1${U}$3`);var et})}}(),j={resolveAll:function(){return z().then(function(M){return Promise.all(M.map(function($){return $.resolve()}))}).then(function(M){return M.join(`
`)})},impl:{readAll:z}};function z(){return Promise.resolve(S.asArray(document.styleSheets)).then(function($){const q=[];return $.forEach(function(O){if(Object.getPrototypeOf(O).hasOwnProperty("cssRules"))try{S.asArray(O.cssRules||[]).forEach(q.push.bind(q))}catch(dt){console.log("Error while reading CSS rules from "+O.href,dt.toString())}}),q}).then(function($){return $.filter(function(q){return q.type===CSSRule.FONT_FACE_RULE}).filter(function(q){return D.shouldProcess(q.style.getPropertyValue("src"))})}).then(function($){return $.map(M)});function M($){return{resolve:function(){var q=($.parentStyleSheet||{}).href;return D.inlineAll($.cssText,q)},src:function(){return $.style.getPropertyValue("src")}}}}const W={inlineAll:function M($){return $ instanceof Element?function(q){const O=q.style.getPropertyValue("background");return O?D.inlineAll(O).then(function(dt){q.style.setProperty("background",dt,O)}).then(function(){return q}):Promise.resolve(q)}($).then(function(){return $ instanceof HTMLImageElement?Q($).inline():Promise.all(S.asArray($.childNodes).map(function(q){return M(q)}))}):Promise.resolve($)},impl:{newImage:Q}};function Q(M){return{inline:function($){return S.isDataUrl(M.src)?Promise.resolve():Promise.resolve(M.src).then($||S.getAndEncode).then(function(q){return S.dataAsUrl(q,S.mimeType(M.src))}).then(function(q){return new Promise(function(O){M.onload=O,M.onerror=O,M.src=q})})}}}const mt={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},Tt={toSvg:vt,toPng:function(M,$){return($=$||{}).raster=!0,Ct(M,$).then(function(q){return q.toDataURL()})},toJpeg:function(M,$){return($=$||{}).raster=!0,Ct(M,$).then(function(q){return q.toDataURL("image/jpeg",$.quality||1)})},toBlob:function(M,$){return($=$||{}).raster=!0,Ct(M,$).then(S.canvasToBlob)},toPixelData:function(M,$){return($=$||{}).raster=!0,Ct(M,$).then(function(q){return q.getContext("2d").getImageData(0,0,S.width(M),S.height(M)).data})},toCanvas:function(M,$){return($=$||{}).raster=!0,Ct(M,$||{})},impl:{fontFaces:j,images:W,util:S,inliner:D,urlCache:[],options:{}}},Nt=(v.exports=Tt,b.getComputedStyle||window.getComputedStyle),Ft=b.atob||window.atob;function vt(M,$){var q=$=$||{};return q.imagePlaceholder===void 0?Tt.impl.options.imagePlaceholder=mt.imagePlaceholder:Tt.impl.options.imagePlaceholder=q.imagePlaceholder,q.cacheBust===void 0?Tt.impl.options.cacheBust=mt.cacheBust:Tt.impl.options.cacheBust=q.cacheBust,q.useCredentials===void 0?Tt.impl.options.useCredentials=mt.useCredentials:Tt.impl.options.useCredentials=q.useCredentials,Promise.resolve(M).then(function(O){return function dt(gt,Y,A,U,et=null){return A||!Y||Y(gt)?Promise.resolve(gt).then(function(lt){return lt instanceof HTMLCanvasElement?S.makeImage(lt.toDataURL()):lt.nodeName==="IFRAME"?html2canvas(lt.contentDocument.body).then(ct=>ct.toDataURL()).then(S.makeImage):lt.cloneNode(!1)}).then(function(lt){return function(ct,tt){const ft=ct.childNodes;return ft.length===0?Promise.resolve(tt):function(ht,At){const jt=Nt(ct);let H=Promise.resolve();return At.forEach(function(J){H=H.then(function(){return dt(J,Y,!1,U,jt)}).then(function(yt){yt&&ht.appendChild(yt)})}),H}(tt,S.asArray(ft)).then(function(){return tt})}(gt,lt)}).then(function(lt){return function(ct,tt,ft){return tt instanceof Element?Promise.resolve().then(function(){(function(ht,At){const jt=Nt(ht);jt.cssText?(At.style.cssText=jt.cssText,function(H,J){J.font=H.font,J.fontFamily=H.fontFamily,J.fontFeatureSettings=H.fontFeatureSettings,J.fontKerning=H.fontKerning,J.fontSize=H.fontSize,J.fontStretch=H.fontStretch,J.fontStyle=H.fontStyle,J.fontVariant=H.fontVariant,J.fontVariantCaps=H.fontVariantCaps,J.fontVariantEastAsian=H.fontVariantEastAsian,J.fontVariantLigatures=H.fontVariantLigatures,J.fontVariantNumeric=H.fontVariantNumeric,J.fontVariationSettings=H.fontVariationSettings,J.fontWeight=H.fontWeight}(jt,At.style)):(ft?function(H,J,yt,wt){const K=yt.style,Ht=H.style;for(var ne of J){var Zt=J.getPropertyValue(ne),Dt=Ht.getPropertyValue(ne),Lt=(Ht.setProperty(ne,wt?"initial":"unset"),J.getPropertyValue(ne));Lt!==Zt?K.setProperty(ne,Zt):K.removeProperty(ne),Ht.setProperty(ne,Dt)}}(ht,jt,At,A):function(H,J,yt){const wt=function(Ht){if(Et[Ht])return Et[Ht];St||((St=document.createElement("iframe")).style.visibility="hidden",St.style.position="fixed",document.body.appendChild(St),St.contentWindow.document.write('<!DOCTYPE html><meta charset="UTF-8"><title>sandbox</title><body>'));const ne=document.createElement(Ht),Zt=(St.contentWindow.document.body.appendChild(ne),ne.textContent=".",St.contentWindow.getComputedStyle(ne)),Dt={};return S.asArray(Zt).forEach(function(Lt){Dt[Lt]=Lt==="width"||Lt==="height"?"auto":Zt.getPropertyValue(Lt)}),St.contentWindow.document.body.removeChild(ne),Et[Ht]=Dt}(yt.tagName),K=yt.style;S.asArray(H).forEach(function(Ht){var ne=H.getPropertyValue(Ht);(ne!==wt[Ht]||J&&ne!==J.getPropertyValue(Ht))&&K.setProperty(Ht,ne,H.getPropertyPriority(Ht))})}(jt,et,At),A&&(["inset-block","inset-block-start","inset-block-end"].forEach(H=>At.style.removeProperty(H)),["left","right","top","bottom"].forEach(H=>{At.style.getPropertyValue(H)&&At.style.setProperty(H,"0px")})))})(ct,tt)}).then(function(){[":before",":after"].forEach(function(ht){(function(At){const jt=Nt(ct,At),H=jt.getPropertyValue("content");if(H!==""&&H!=="none"){const J=S.uid(),yt=tt.getAttribute("class"),wt=(yt&&tt.setAttribute("class",yt+" "+J),document.createElement("style"));wt.appendChild(function(){const K=`.${J}:`+At,Ht=(jt.cssText?function(){return`${jt.cssText} content: ${jt.getPropertyValue("content")};`}:function(){return S.asArray(jt).map(function(ne){return ne+": "+jt.getPropertyValue(ne)+(jt.getPropertyPriority(ne)?" !important":"")}).join("; ")+";"})();return document.createTextNode(K+`{${Ht}}`)}()),tt.appendChild(wt)}})(ht)})}).then(function(){ct instanceof HTMLTextAreaElement&&(tt.innerHTML=ct.value),ct instanceof HTMLInputElement&&tt.setAttribute("value",ct.value)}).then(function(){tt instanceof SVGElement&&(tt.setAttribute("xmlns","http://www.w3.org/2000/svg"),tt instanceof SVGRectElement&&["width","height"].forEach(function(ht){const At=tt.getAttribute(ht);At&&tt.style.setProperty(ht,At)}))}).then(function(){return tt}):tt}(gt,lt,U)}):Promise.resolve()}(O,$.filter,!0,!$.raster)}).then(Ut).then(Z).then(function(O){$.bgcolor&&(O.style.backgroundColor=$.bgcolor),$.width&&(O.style.width=$.width+"px"),$.height&&(O.style.height=$.height+"px"),$.style&&Object.keys($.style).forEach(function(gt){O.style[gt]=$.style[gt]});let dt=null;return typeof $.onclone=="function"&&(dt=$.onclone(O)),Promise.resolve(dt).then(function(){return O})}).then(function(O){return O=O,dt=$.width||S.width(M),gt=$.height||S.height(M),Promise.resolve(O).then(function(Y){return Y.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(Y)}).then(S.escapeXhtml).then(function(Y){return`<foreignObject x="0" y="0" width="100%" height="100%">${Y}</foreignObject>`}).then(function(Y){return`<svg xmlns="http://www.w3.org/2000/svg" width="${dt}" height="${gt}">${Y}</svg>`}).then(function(Y){return"data:image/svg+xml;charset=utf-8,"+Y});var dt,gt}).then(function(O){return Tt.impl.urlCache=[],O})}function Ct(M,$){return vt(M,$).then(S.makeImage).then(S.delay(0)).then(function(q){var O=typeof $.scale!="number"?1:$.scale;const dt=function(Y,A){const U=document.createElement("canvas");if(U.width=($.width||S.width(Y))*A,U.height=($.height||S.height(Y))*A,$.bgcolor){const et=U.getContext("2d");et.fillStyle=$.bgcolor,et.fillRect(0,0,U.width,U.height)}return U}(M,O),gt=dt.getContext("2d");return gt.mozImageSmoothingEnabled=!1,gt.msImageSmoothingEnabled=!1,gt.imageSmoothingEnabled=!1,q&&(gt.scale(O,O),gt.drawImage(q,0,0)),St&&(document.body.removeChild(St),St=null,V&&clearTimeout(V),V=setTimeout(()=>{V=null,Et={}},2e4)),dt})}function Ut(M){return j.resolveAll().then(function($){const q=document.createElement("style");return M.appendChild(q),q.appendChild(document.createTextNode($)),M})}function Z(M){return W.inlineAll(M).then(function(){return M})}let V=null,St=null,Et={}})(r)}),u=o(function(v,w){(function(){function b(j,z,W){var Q=new XMLHttpRequest;Q.open("GET",j),Q.responseType="blob",Q.onload=function(){D(Q.response,z,W)},Q.onerror=function(){console.error("could not download file")},Q.send()}function S(j){var z=new XMLHttpRequest;z.open("HEAD",j,!1);try{z.send()}catch{}return 200<=z.status&&299>=z.status}function x(j){try{j.dispatchEvent(new MouseEvent("click"))}catch{var z=document.createEvent("MouseEvents");z.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),j.dispatchEvent(z)}}var I=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof r=="object"&&r.global===r?r:void 0,D=I.saveAs||(typeof window!="object"||window!==I?function(){}:"download"in HTMLAnchorElement.prototype?function(j,z,W){var Q=I.URL||I.webkitURL,mt=document.createElement("a");z=z||j.name||"download",mt.download=z,mt.rel="noopener",typeof j=="string"?(mt.href=j,mt.origin===location.origin?x(mt):S(mt.href)?b(j,z,W):x(mt,mt.target="_blank")):(mt.href=Q.createObjectURL(j),setTimeout(function(){Q.revokeObjectURL(mt.href)},4e4),setTimeout(function(){x(mt)},0))}:"msSaveOrOpenBlob"in navigator?function(j,z,W){if(z=z||j.name||"download",typeof j!="string")navigator.msSaveOrOpenBlob(function(mt,Tt){return Tt===void 0?Tt={autoBom:!1}:typeof Tt!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),Tt={autoBom:!Tt}),Tt.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(mt.type)?new Blob(["\uFEFF",mt],{type:mt.type}):mt}(j,W),z);else if(S(j))b(j,z,W);else{var Q=document.createElement("a");Q.href=j,Q.target="_blank",setTimeout(function(){x(Q)})}}:function(j,z,W,Q){if((Q=Q||open("","_blank"))&&(Q.document.title=Q.document.body.innerText="downloading..."),typeof j=="string")return b(j,z,W);var mt=j.type==="application/octet-stream",Tt=/constructor/i.test(I.HTMLElement)||I.safari,Nt=/CriOS\/[\d]+/.test(navigator.userAgent);if((Nt||mt&&Tt)&&typeof FileReader=="object"){var Ft=new FileReader;Ft.onloadend=function(){var Ut=Ft.result;Ut=Nt?Ut:Ut.replace(/^data:[^;]*;/,"data:attachment/file;"),Q?Q.location.href=Ut:location=Ut,Q=null},Ft.readAsDataURL(j)}else{var vt=I.URL||I.webkitURL,Ct=vt.createObjectURL(j);Q?Q.location=Ct:location.href=Ct,Q=null,setTimeout(function(){vt.revokeObjectURL(Ct)},4e4)}});I.saveAs=D.saveAs=D,v.exports=D})()}),f=L.Control.extend({options:{cropImageByInnerWH:!0,hidden:!1,domtoimageOptions:{},position:"topleft",screenName:"screen",iconUrl:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+",hideElementsWithSelectors:[".leaflet-control-container"],onCropBorderSize:2,caption:null,captionFontSize:15,captionFont:"Arial",captionColor:"black",captionBgColor:"white",captionOffset:5,mimeType:"image/png",debugMode:!1,preventDownload:!1,onPixelDataFail:function(v){var w=v.node,b=v.error;return console.warn("Map node is very big "+w.scrollWidth+"x"+w.scrollHeight),console.warn(`Add function: SimpleMapScreenshoter({
              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {
                 // Solutions:
                 // decrease size of map
                 // or decrease zoom level
                 // or remove elements with big distanses
                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap
                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)
              }
            })`),Promise.reject(b)}},onAdd:function(){return this._container=L.DomUtil.create("div","leaflet-control-simpleMapScreenshoter"),this._link=null,this._screenState={status:1,promise:null},this.options.hidden===!1&&this._addScreenBtn(),this._onUserStartInteractWithMap=this._onUserStartInteractWithMap.bind(this),this._onUserEndInteractWithMap=this._onUserEndInteractWithMap.bind(this),this._map.on("zoomstart",this._onUserStartInteractWithMap),this._map.on("move",this._onUserStartInteractWithMap),this._map.on("zoomend",this._onUserEndInteractWithMap),this._map.on("moveend",this._onUserEndInteractWithMap),this._container},takeScreen:function(){var v=this,w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"blob",b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},S={};for(var x in this.options)b.hasOwnProperty(x)?S[x]=b[x]:S[x]=this.options[x];return this._screenState.status===2?this._screenState.promise:(this._map.fire("simpleMapScreenshoter.takeScreen"),this._screenState.status=2,this._setElementsVisible(!1),this._screenState.promise=this._waitEndOfInteractions().then(function(){return v._getPixelData(S)}).then(function(I){return v._setElementsVisible(!0),v._toCanvas(I,S)}).then(function(I){return w==="image"?v._canvasToImage(I,S):w==="canvas"?I:v._canvasToBlob(I,S)}).then(function(I){return v._screenState.status=1,v._map.fire("simpleMapScreenshoter.done"),I}).catch(function(I){return v._setElementsVisible(!0),v._screenState.status=1,v._map.fire("simpleMapScreenshoter.error",{e:I}),Promise.reject(I)}),this._screenState.promise)},_setElementsVisible:function(){var v=this,w=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.hideElementsWithSelectors.forEach(function(b){var S=v._map._container.querySelectorAll(b),x=!0,I=!1,D=void 0;try{for(var j,z=S[Symbol.iterator]();!(x=(j=z.next()).done);x=!0)j.value.style.opacity=w===!1?0:1}catch(W){I=!0,D=W}finally{try{!x&&z.return&&z.return()}finally{if(I)throw D}}})},_canvasToImage:function(v,w){var b=w.mimeType,S=v.toDataURL(b);return S.indexOf("base64")===-1?Promise.reject(new Error("Base64 image generation error")):Promise.resolve(S)},_canvasToBlob:function(v,w){var b=w.mimeType;return new Promise(function(S,x){v.toBlob(function(I){S(I)},b)})},_toCanvas:function(v,w){var b=w.captionOffset,S=w.caption,x=w.captionFontSize,I=w.captionFont,D=w.captionColor,j=w.captionBgColor,z=this._node,W=z.screenHeight,Q=z.screenWidth,mt=document.createElement("canvas");mt.width=Q,mt.height=W;for(var Tt=mt.getContext("2d"),Nt=Tt.createImageData(Q,W),Ft=0;Ft<v.length;++Ft)Nt.data[Ft]=v[Ft];Tt.putImageData(Nt,0,0),Nt=null;var vt=document.createElement("canvas"),Ct=vt.getContext("2d"),Ut=0,Z=0,V=W,St=Q;if(this.options.cropImageByInnerWH===!0){for(var Et=[],M=0,$=0;$<W;++$){M=0;for(var q=0;q<Q;++q)v[4*$*Q+4*q+4]===0&&M++;M===Q&&Et.push($)}var O=this._getMinAndMaxOnValuesBreak(Et);Ut=O.min;for(var dt=Q,gt=O.max,Y=[],A=0,U=Z;U<dt;++U){A=0;for(var et=0;et<W;++et)v[4*et*Q+4*U+4]===0&&A++;A===W&&Y.push(U)}var lt=this._getMinAndMaxOnValuesBreak(Y);Z=lt.min,dt=lt.max,(Z===0&&dt===0||dt===null)&&(dt=Q),(Ut===0&&gt===0||gt===null)&&(gt=W),this.options.debugMode===!0&&(console.log("emptyYLine",Et),console.log("minMaxY",O),console.log("emptyXLine",Y),console.log("minMaxX",lt),console.log("debugX",{}),console.log("debugY",{})),Ut===0&&gt===W&&Z===0&&dt===Q||(Ut+=this.options.onCropBorderSize,gt-=this.options.onCropBorderSize,Z+=this.options.onCropBorderSize,dt-=this.options.onCropBorderSize),V=gt-Ut,St=dt-Z,vt.width=St,vt.height=V}else vt.width=St,vt.height=V;var ct=null;return S&&(ct=typeof S=="function"?S.call(this):S),ct!==null&&(vt.height=vt.height+(b+x+b),Ct.beginPath(),Ct.rect(0,0,vt.width,vt.height),Ct.fillStyle=j,Ct.fill(),Ct.save()),Ct.drawImage(mt,Z,Ut,St,V,0,0,St,V),ct!==null&&(Ct.font=x+"px "+I,Ct.fillStyle=D,Ct.fillText(ct,b,V+b+x)),Promise.resolve(vt)},_getMinAndMaxOnValuesBreak:function(v){for(var w=0,b=0,S=!1,x=1;x<v.length;x++){if(v[x]-1!==v[x-1]){b=v[x],S=!0;break}w=v[x]}return S===!1&&v[0]>1?(w=0,b=v[0]):S===!1&&(w=v[v.length-1]||0,b=null),{min:w,max:b}},_getPixelData:function(v){var w=this,b=v.domtoimageOptions,S=b===void 0?{}:b;return this._getPixelDataOfNormalMap(S).catch(function(x){return console.warn("May be map size very big on that zoom level, we have error:",x.toString()),console.warn("You can manually hide map elements with large distances between them for fix that warn"),w._getPixelDataOfBigMap(S)})},_getPixelDataOfNormalMap:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},w=this._map.getContainer();return this._node={node:w,screenHeight:w.scrollHeight,screenWidth:w.scrollWidth},a.toPixelData(w,v)},_getPixelDataOfBigMap:function(){var v=this,w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=this._map.getContainer(),S=this._map.getPane("mapPane");S.style.width=2*b.clientWidth+"px",S.style.height=2*b.clientHeight+"px",S.style.overflow="hidden";var x=function(){S.style.width="initial",S.style.height="initial",S.style.overflow="initial"};return this._node={node:b,screenHeight:b.scrollHeight,screenWidth:b.scrollWidth},a.toPixelData(b,w).then(function(I){return x(),I}).catch(function(I){return x(),b.scrollHeight>=4e3||b.scrollWidth>=4e3?v.options.onPixelDataFail({plugin:v,node:b,mapPane:S,error:I,domtoimageOptions:w}):Promise.reject(I)})},_addScreenBtn:function(){this._link=L.DomUtil.create("a","leaflet-control-simpleMapScreenshoter-btn",this._container),this._addCss(),L.DomEvent.addListener(this._link,"click",this._onScreenBtn,this),L.DomEvent.disableClickPropagation(this._link)},_addCss:function(){var v=`
    .leaflet-control-simpleMapScreenshoter{
       border: 2px solid rgba(0,0,0,0.2);
       background-clip: padding-box;
    }
    .leaflet-control-simpleMapScreenshoter a{
       background-color: #fff;
       border-bottom: 1px solid #ccc;
       width: 30px;
       height: 30px;
       line-height: 30px;
       display: block;
       text-align: center;
       text-decoration: none;
       color: black;
       overflow: hidden;
       border-radius: 2px;
       background-image: url('`+this.options.iconUrl+`');
       background-position: 46% 41%;
       background-repeat: no-repeat;
       background-size: 63%;
    }
    .leaflet-control-simpleMapScreenshoter a:hover{
       cursor: pointer;
    }
    `,w=document.head||document.getElementsByTagName("head")[0],b=document.createElement("style");b.appendChild(document.createTextNode(v)),w.appendChild(b)},_onScreenBtn:function(){var v=this;this._map.fire("simpleMapScreenshoter.click"),this.options.preventDownload||this.takeScreen().then(function(w){var b=typeof v.options.screenName=="function"?v.options.screenName.call(v):v.options.screenName;u.saveAs(w,b+".png")}).catch(function(w){v._map.fire("simpleMapScreenshoter.error",{e:w})})},_onUserStartInteractWithMap:function(){this._interaction=!0},_onUserEndInteractWithMap:function(){this._interaction=!1},_waitEndOfInteractions:function(){var v=this;return new Promise(function(w){var b=setInterval(function(){v._interaction||(w(),clearInterval(b))},100)})}}),p=(L.Control.SimpleMapScreenshoter=f,L.simpleMapScreenshoter=function(v){return new L.Control.SimpleMapScreenshoter(v)},f);n.default=p,n.SimpleMapScreenshoter=f,Object.defineProperty(n,"__esModule",{value:!0})})})(U0,U0.exports);const Y3={class:"h-full flex flex-col bg-white overflow-y-auto"},X3={class:"p-3 border-b border-gray-200"},Q3={class:"grid grid-cols-4 gap-1"},tw=["onClick","title"],ew=["innerHTML"],nw={key:0,class:"flex-1 overflow-y-auto"},rw={class:"p-3 border-b border-gray-200"},iw={class:"p-3"},sw={class:"grid grid-cols-6 gap-2 mb-4"},ow=["onClick","title"],aw={key:0,class:"space-y-4"},lw={class:"flex items-center gap-4"},uw={class:"flex items-center gap-2"},cw={class:"flex items-center gap-4"},hw=["value"],fw={key:0,class:"flex items-center gap-4"},dw={class:"flex items-center gap-2"},pw={key:1,class:"space-y-4"},gw={class:"flex items-center gap-4"},mw={class:"flex items-center gap-2"},vw={class:"flex items-center gap-4"},yw={class:"flex items-center gap-2"},_w={class:"flex items-center gap-4"},bw={class:"flex items-center gap-2"},ww={class:"flex items-center gap-4"},xw={class:"flex items-center gap-2"},Lw={class:"flex items-center gap-4"},Cw={class:"flex items-center gap-2"},kw=["onClick","title"],Pw=["innerHTML"],Sw={key:1,class:"p-3 border-t border-gray-200"},Ew={class:"mt-3"},Aw={key:0},Mw={class:"grid grid-cols-2 gap-4"},Bw={class:"text-sm font-medium text-gray-500"},Tw={class:"text-sm font-medium text-gray-500"},Nw={class:"text-sm font-medium text-gray-500"},Dw={class:"text-sm font-medium text-gray-500"},Ow={class:"text-sm font-medium text-gray-500"},Rw={class:"text-sm font-medium text-gray-500"},Iw={class:"text-sm font-medium text-gray-500"},Fw={class:"text-sm font-medium text-gray-500"},jw={class:"text-sm font-medium text-gray-500"},zw={class:"text-sm font-medium text-gray-500"},Uw={class:"text-sm font-medium text-gray-500"},qw={key:1,class:"text-center text-sm text-gray-500"},$w=ys({__name:"DrawingTools",props:{currentTool:{},selectedShape:{}},emits:["tool-change","style-update","delete-shape"],setup(t,{emit:e}){const n=t,r=e,o=Ie(null),a=Ie("Double-cliquez pour éditer"),u=Ie("#3B82F6"),f=Ie(.2),p=Ie("#2563EB"),v=Ie(2),w=Ie("solid"),b=Ie("#000000"),S=Ie("Arial, sans-serif"),x=Ie("center"),I=Ie(!1),D=Ie(!1),j=Ie({style:!1,properties:!1}),z=Fn(()=>{var Y,A;return!((Y=n.selectedShape)!=null&&Y.properties)||n.selectedShape.properties.type!=="TextRectangle"?"center":((A=n.selectedShape.properties.style)==null?void 0:A.textAlign)||"center"});zi(()=>n.selectedShape,Y=>{var A,U;if(!Y){o.value=null,x.value="center",I.value=!1,D.value=!1,a.value="Double-cliquez pour éditer";return}if(console.log("[DrawingTools] Changement de forme sélectionnée",{newShape:Y,properties:Y==null?void 0:Y.properties}),Y){if(o.value={...Y.properties},((A=Y.properties)==null?void 0:A.type)==="TextRectangle"){const et=((U=Y.properties)==null?void 0:U.style)||{};b.value=et.textColor||"#000000",S.value=et.fontFamily||"Arial, sans-serif",x.value=et.textAlign||"center",I.value=et.bold||!1,D.value=et.italic||!1,a.value=Y.properties.text||"Double-cliquez pour éditer",console.log("[DrawingTools] Initialisation du TextRectangle",{text:a.value,style:et})}}else o.value=null},{immediate:!0}),zi(()=>{var Y,A;return(A=(Y=n.selectedShape)==null?void 0:Y.properties)==null?void 0:A.text},Y=>{var A,U;((U=(A=n.selectedShape)==null?void 0:A.properties)==null?void 0:U.type)==="TextRectangle"&&(console.log("[DrawingTools] Mise à jour du texte :",Y),a.value=Y||"Double-cliquez pour éditer")},{immediate:!0}),zi(()=>{var Y,A;return(A=(Y=n.selectedShape)==null?void 0:Y.properties)==null?void 0:A.style},Y=>{var A;(A=n.selectedShape)!=null&&A.properties&&n.selectedShape.properties.type==="TextRectangle"&&Y&&(b.value=Y.textColor||"#000000",S.value=Y.fontFamily||"Arial, sans-serif",I.value=Y.bold||!1,D.value=Y.italic||!1)},{deep:!0});const W=(Y,A)=>{let U=null;return(...et)=>{U!==null&&clearTimeout(U),U=window.setTimeout(()=>{Y(...et),U=null},A)}},Q=(Y,A)=>{if(Y===A)return!0;if(Y===null||A===null)return!1;if(typeof Y!="object"||typeof A!="object")return Y===A;const U=Object.keys(Y),et=Object.keys(A);if(U.length!==et.length)return!1;for(const lt of U)if(!et.includes(lt)||!Q(Y[lt],A[lt]))return!1;return!0},mt=W((Y,A)=>{console.log("[DrawingTools] Changement détecté dans localProperties",{newProperties:Y,oldProperties:A,selectedShape:n.selectedShape})},300);zi(()=>o.value,(Y,A)=>{Y&&A&&!Q(Y,A)&&mt(Y,A)},{deep:!0});const Tt=Y=>({Circle:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10" /></svg>',Semicircle:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 12a10 10 0 0 1 20 0" /></svg>',Rectangle:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" /></svg>',Polygon:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 3l9 7-3 9H6l-3-9 9-7z" /></svg>',delete:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6" /><path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2" /><line x1="10" y1="11" x2="10" y2="17" /><line x1="14" y1="11" x2="14" y2="17" /></svg>',Line:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 19l18-14" /></svg>',TextRectangle:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" /><path d="M9 8h6m-3 0v8" /></svg>'})[Y]||"",Nt=[{type:"Circle",label:"Cercle"},{type:"Semicircle",label:"Demi-cercle"},{type:"Rectangle",label:"Rectangle"},{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"TextRectangle",label:"Texte"},{type:"delete",label:"Supprimer"}],Ft=["#2563EB","#DC2626","#059669","#D97706","#7C3AED","#DB2777"],vt=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointillé"},{value:"dashdot",label:"Tiret-point"}],Ct=[{value:"left",label:"Aligné à gauche",icon:"&#8678;"},{value:"center",label:"Centré",icon:"&#8645;"},{value:"right",label:"Aligné à droite",icon:"&#8680;"}],Ut=Fn(()=>{var A,U;const Y=(U=(A=n.selectedShape)==null?void 0:A.properties)==null?void 0:U.type;return console.log("[DrawingTools] Calcul de showFillOptions",{shapeType:Y,selectedShape:n.selectedShape}),Y?["Circle","Rectangle","Polygon","Semicircle"].includes(Y):!1}),Z=Y=>{j.value[Y]=!j.value[Y]},V=Y=>{switch(Y){case"dashed":return"10,10";case"dotted":return"2,5";case"dashdot":return"10,5,2,5";default:return""}},St=Y=>{var A,U;p.value=Y,(Ut.value||((A=o.value)==null?void 0:A.type)==="TextRectangle")&&(u.value=Y),Et({strokeColor:Y,fillColor:Ut.value||((U=o.value)==null?void 0:U.type)==="TextRectangle"?Y:void 0})},Et=Y=>{const A={...Y};Y.strokeStyle&&(A.dashArray=V(Y.strokeStyle)),Y.fillOpacity!==void 0&&(A.fillOpacity=parseFloat(Y.fillOpacity)),Y.strokeOpacity!==void 0&&(A.strokeOpacity=parseFloat(Y.strokeOpacity)),Y.strokeWidth!==void 0&&(A.weight=parseInt(Y.strokeWidth)),Y.strokeColor&&(A.color=Y.strokeColor),r("style-update",A)},M=Y=>{var U,et,lt,ct,tt,ft,ht;if(((et=(U=n.selectedShape)==null?void 0:U.properties)==null?void 0:et.type)!=="TextRectangle")return;const A={textColor:(lt=n.selectedShape.properties.style)==null?void 0:lt.textColor,fontFamily:(ct=n.selectedShape.properties.style)==null?void 0:ct.fontFamily,textAlign:(tt=n.selectedShape.properties.style)==null?void 0:tt.textAlign,bold:(ft=n.selectedShape.properties.style)==null?void 0:ft.bold,italic:(ht=n.selectedShape.properties.style)==null?void 0:ht.italic,...Y};r("style-update",A)},$=()=>{I.value=!I.value,M({bold:I.value})},q=()=>{D.value=!D.value,M({italic:D.value})},O=Y=>Y?Y>=1e3?`${(Y/1e3).toFixed(2)} km`:`${Y.toFixed(2)} m`:"0 m",dt=Y=>Y?`${(Y/1e4).toFixed(2)} ha`:"0 ha",gt=Y=>Y?`${((Y%360+360)%360).toFixed(1)}°`:"0°";return(Y,A)=>(ie(),ue("div",Y3,[A[50]||(A[50]=B("div",{class:"p-3 bg-gray-50 border-b border-gray-200"},[B("h3",{class:"text-sm font-semibold text-gray-700"},"Outils de dessin")],-1)),B("div",X3,[B("div",Q3,[(ie(!0),ue(_n,null,Vn(Nt.filter(U=>U.type!=="delete"),U=>(ie(),ue("button",{key:U.type,class:zr(["flex items-center justify-center p-2 rounded border",{"bg-blue-50 border-blue-200 text-blue-700":Y.currentTool===U.type}]),onClick:et=>Y.$emit("tool-change",U.type),title:U.label},[B("span",{class:"icon",innerHTML:Tt(U.type)},null,8,ew)],10,tw))),128))]),Y.selectedShape?(ie(),ue("button",{key:0,class:zr(["w-full mt-2 p-2 rounded border border-red-200 bg-red-50 text-red-600 hover:bg-red-100",{"bg-red-100":Y.currentTool==="delete"}]),onClick:A[0]||(A[0]=U=>Y.$emit("delete-shape")),title:"Supprimer la forme"},A[25]||(A[25]=[B("svg",{class:"w-4 h-4 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),2)):nn("",!0)]),Y.selectedShape&&o.value?(ie(),ue("div",nw,[B("div",rw,[B("button",{class:"flex items-center justify-between w-full text-sm font-semibold text-gray-700",onClick:A[1]||(A[1]=U=>Z("style"))},[A[27]||(A[27]=B("span",null,"Style",-1)),(ie(),ue("svg",{class:zr(["w-4 h-4",{"rotate-180":!j.value.style}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},A[26]||(A[26]=[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))])]),An(B("div",iw,[B("div",sw,[(ie(),ue(_n,null,Vn(Ft,U=>B("button",{key:U,class:"w-8 h-8 rounded-full",style:Ih({backgroundColor:U}),onClick:et=>St(U),title:U},null,12,ow)),64))]),o.value.type!=="TextRectangle"?(ie(),ue("div",aw,[B("div",lw,[A[28]||(A[28]=B("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),B("div",uw,[An(B("input",{type:"color","onUpdate:modelValue":A[2]||(A[2]=U=>p.value=U),class:"w-16 h-8 rounded border",onChange:A[3]||(A[3]=U=>Et({strokeColor:p.value})),title:"Couleur du contour"},null,544),[[fr,p.value]]),An(B("input",{type:"range","onUpdate:modelValue":A[4]||(A[4]=U=>v.value=U),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:A[5]||(A[5]=U=>Et({strokeWidth:v.value})),title:"Épaisseur du contour"},null,544),[[fr,v.value]])])]),B("div",cw,[A[29]||(A[29]=B("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Style",-1)),An(B("select",{"onUpdate:modelValue":A[6]||(A[6]=U=>w.value=U),class:"w-full rounded border",onChange:A[7]||(A[7]=U=>Et({strokeStyle:w.value}))},[(ie(),ue(_n,null,Vn(vt,U=>B("option",{key:U.value,value:U.value},Se(U.label),9,hw)),64))],544),[[js,w.value]])]),Ut.value?(ie(),ue("div",fw,[A[30]||(A[30]=B("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),B("div",dw,[An(B("input",{type:"color","onUpdate:modelValue":A[8]||(A[8]=U=>u.value=U),class:"w-16 h-8 rounded border",onChange:A[9]||(A[9]=U=>Et({fillColor:u.value})),title:"Couleur de remplissage"},null,544),[[fr,u.value]]),An(B("input",{type:"range","onUpdate:modelValue":A[10]||(A[10]=U=>f.value=U),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:A[11]||(A[11]=U=>Et({fillOpacity:f.value})),title:"Opacité du remplissage"},null,544),[[fr,f.value]])])])):nn("",!0)])):nn("",!0),o.value.type==="TextRectangle"?(ie(),ue("div",pw,[B("div",gw,[A[31]||(A[31]=B("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),B("div",mw,[An(B("input",{type:"color","onUpdate:modelValue":A[12]||(A[12]=U=>p.value=U),class:"w-16 h-8 rounded border",onChange:A[13]||(A[13]=U=>Et({strokeColor:p.value})),title:"Couleur du contour"},null,544),[[fr,p.value]]),An(B("input",{type:"range","onUpdate:modelValue":A[14]||(A[14]=U=>v.value=U),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:A[15]||(A[15]=U=>Et({strokeWidth:v.value})),title:"Épaisseur du contour"},null,544),[[fr,v.value]])])]),B("div",vw,[A[32]||(A[32]=B("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),B("div",yw,[An(B("input",{type:"color","onUpdate:modelValue":A[16]||(A[16]=U=>u.value=U),class:"w-16 h-8 rounded border",onChange:A[17]||(A[17]=U=>Et({fillColor:u.value})),title:"Couleur de remplissage"},null,544),[[fr,u.value]]),An(B("input",{type:"range","onUpdate:modelValue":A[18]||(A[18]=U=>f.value=U),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:A[19]||(A[19]=U=>Et({fillOpacity:f.value})),title:"Opacité du remplissage"},null,544),[[fr,f.value]])])]),B("div",_w,[A[33]||(A[33]=B("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Texte",-1)),B("div",bw,[An(B("input",{type:"color","onUpdate:modelValue":A[20]||(A[20]=U=>b.value=U),class:"w-16 h-8 rounded border",onChange:A[21]||(A[21]=U=>M({textColor:b.value})),title:"Couleur du texte"},null,544),[[fr,b.value]])])]),B("div",ww,[A[35]||(A[35]=B("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Police",-1)),B("div",xw,[An(B("select",{"onUpdate:modelValue":A[22]||(A[22]=U=>S.value=U),class:"w-full rounded border",onChange:A[23]||(A[23]=U=>M({fontFamily:S.value}))},A[34]||(A[34]=[fc('<option value="Arial, sans-serif" data-v-fd622759>Arial</option><option value="&#39;Times New Roman&#39;, serif" data-v-fd622759>Times</option><option value="&#39;Courier New&#39;, monospace" data-v-fd622759>Courier</option><option value="Georgia, serif" data-v-fd622759>Georgia</option><option value="Verdana, sans-serif" data-v-fd622759>Verdana</option>',5)]),544),[[js,S.value]])])]),B("div",Lw,[A[36]||(A[36]=B("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Align.",-1)),B("div",Cw,[(ie(),ue(_n,null,Vn(Ct,U=>B("button",{key:U.value,class:zr(["flex items-center justify-center p-2 rounded border",{"bg-blue-50 border-blue-200 text-blue-700":z.value===U.value}]),onClick:et=>M({textAlign:U.value}),title:U.label},[B("span",{innerHTML:U.icon},null,8,Pw)],10,kw)),64)),B("button",{class:zr(["flex items-center justify-center p-2 rounded border",{"bg-blue-50 border-blue-200 text-blue-700":I.value}]),onClick:$,title:"Gras"}," B ",2),B("button",{class:zr(["flex items-center justify-center p-2 rounded border",{"bg-blue-50 border-blue-200 text-blue-700":D.value}]),onClick:q,title:"Italique"}," I ",2)])])])):nn("",!0)],512),[[zp,!j.value.style]])])):nn("",!0),Y.selectedShape&&o.value&&o.value.type!=="TextRectangle"?(ie(),ue("div",Sw,[B("button",{class:"flex items-center justify-between w-full text-sm font-semibold text-gray-700",onClick:A[24]||(A[24]=U=>Z("properties"))},[A[38]||(A[38]=B("span",null,"Propriétés",-1)),(ie(),ue("svg",{class:zr(["w-4 h-4",{"rotate-180":!j.value.properties}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},A[37]||(A[37]=[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),An(B("div",Ew,[o.value?(ie(),ue("div",Aw,[B("div",Mw,[o.value.type==="Circle"?(ie(),ue(_n,{key:0},[A[39]||(A[39]=B("span",{class:"text-sm font-semibold text-gray-700"},"Rayon :",-1)),B("span",Bw,Se(O(o.value.radius||0)),1),A[40]||(A[40]=B("span",{class:"text-sm font-semibold text-gray-700"},"Surface :",-1)),B("span",Tw,Se(dt(o.value.area||0)),1)],64)):o.value.type==="Rectangle"?(ie(),ue(_n,{key:1},[A[41]||(A[41]=B("span",{class:"text-sm font-semibold text-gray-700"},"Largeur :",-1)),B("span",Nw,Se(O(o.value.width||0)),1),A[42]||(A[42]=B("span",{class:"text-sm font-semibold text-gray-700"},"Hauteur :",-1)),B("span",Dw,Se(O(o.value.height||0)),1),A[43]||(A[43]=B("span",{class:"text-sm font-semibold text-gray-700"},"Surface :",-1)),B("span",Ow,Se(dt(o.value.area||0)),1)],64)):o.value.type==="Semicircle"?(ie(),ue(_n,{key:2},[A[44]||(A[44]=B("span",{class:"text-sm font-semibold text-gray-700"},"Rayon :",-1)),B("span",Rw,Se(O(o.value.radius||0)),1),A[45]||(A[45]=B("span",{class:"text-sm font-semibold text-gray-700"},"Surface :",-1)),B("span",Iw,Se(dt(o.value.area||0)),1),A[46]||(A[46]=B("span",{class:"text-sm font-semibold text-gray-700"},"Angle :",-1)),B("span",Fw,Se(gt(o.value.openingAngle||0)),1)],64)):o.value.type==="Line"?(ie(),ue(_n,{key:3},[A[47]||(A[47]=B("span",{class:"text-sm font-semibold text-gray-700"},"Longueur :",-1)),B("span",jw,Se(O(o.value.length||0)),1)],64)):o.value.type==="Polygon"?(ie(),ue(_n,{key:4},[A[48]||(A[48]=B("span",{class:"text-sm font-semibold text-gray-700"},"Surface :",-1)),B("span",zw,Se(dt(o.value.area||0)),1),A[49]||(A[49]=B("span",{class:"text-sm font-semibold text-gray-700"},"Périmètre :",-1)),B("span",Uw,Se(O(o.value.perimeter||0)),1)],64)):nn("",!0)])])):(ie(),ue("div",qw," Aucune propriété disponible "))],512),[[zp,!j.value.properties]])])):nn("",!0)]))}}),S1=(t,e)=>{const n=t.__vccOpts||t;for(const[r,o]of e)n[r]=o;return n},Vw=S1($w,[["__scopeId","data-v-fd622759"]]),Hw={class:"map-toolbar w-full"},Gw={class:"hidden md:flex items-center space-x-2"},Ww={class:"dropdown"},Zw={class:"btn-toolbar dropdown-toggle"},Kw={class:"dropdown-menu"},Jw=["onClick"],Yw={key:0,class:"border-l pl-2 flex-1"},Xw={class:"flex items-center"},Qw={class:"plan-info"},tx={class:"plan-name"},ex={key:0,class:"plan-description"},nx={class:"border-l pl-2 ml-auto"},rx={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ix={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},sx={key:"saving"},ox={key:"success",class:"save-success-text"},ax={key:"default"},lx={class:"md:hidden"},ux={class:"flex justify-between items-center"},cx={key:0,class:"truncate mx-2 text-sm font-medium"},hx={key:0,class:"mobile-menu mt-2 bg-white shadow-md rounded p-2 z-50"},fx={class:"flex flex-col space-y-2"},dx={key:0,class:"flex flex-col pb-2 border-b"},px={class:"text-sm font-semibold text-gray-800"},gx={key:0,class:"text-xs text-gray-600 mt-1"},mx={class:"flex flex-col"},vx={class:"grid grid-cols-2 gap-1"},yx=["onClick"],_x={key:0,class:"animate-spin h-3 w-3 mr-1 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},bx={key:1,class:"h-3 w-3 mr-1 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},wx={key:"saving"},xx={key:"success",class:"save-success-text"},Lx={key:"default"},Cx=ys({__name:"MapToolbar",props:{lastSave:{},planName:{},planDescription:{},saveStatus:{}},emits:["change-map-type","create-new-plan","load-plan","save-plan","adjust-view","generate-summary"],setup(t,{emit:e}){const n=e,r=t,o=Ie("Ville"),a=Ie(!1),u={Ville:"Ville",Satellite:"Satellite",Cadastre:"Cadastre"},f=Fn(()=>r.lastSave?new Date(r.lastSave).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Jamais"),p=D=>{o.value=D,n("change-map-type",D),I()},v=()=>{n("create-new-plan"),I()},w=()=>{n("load-plan"),I()},b=()=>{n("save-plan"),I()},S=()=>{n("adjust-view"),I()},x=()=>{n("generate-summary"),I()},I=()=>{a.value=!1};return(D,j)=>(ie(),ue("div",Hw,[B("div",Gw,[B("div",Ww,[B("button",Zw,[j[1]||(j[1]=B("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{"fill-rule":"evenodd",d:"M12 1.586l-4 4V17h8V5.586l-4-4zM2 17V9.276l4-3.638V17H2zM2 8.162V3h4.5L12 8.5V17H6V5.638L2 8.162z","clip-rule":"evenodd"})],-1)),B("span",null,Se(u[o.value]),1)]),B("div",Kw,[(ie(),ue(_n,null,Vn(u,(z,W)=>B("button",{key:W,class:zr(["dropdown-item",{active:W===o.value}]),onClick:Q=>p(W)},Se(z),11,Jw)),64))])]),D.planName?(ie(),ue("div",Yw,[B("div",Xw,[B("div",Qw,[B("h2",tx,Se(D.planName),1),D.planDescription?(ie(),ue("p",ex,Se(D.planDescription),1)):nn("",!0)])])])):nn("",!0),B("div",{class:"border-l pl-2"},[B("div",{class:"flex items-center space-x-1"},[B("button",{onClick:v,class:"btn-toolbar",title:"Nouveau plan"},j[2]||(j[2]=[B("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),B("span",{class:"hidden lg:inline ml-1"},"Nouveau",-1)])),B("button",{onClick:w,class:"btn-toolbar",title:"Charger un plan"},j[3]||(j[3]=[fc('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" data-v-62ed19e0><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" data-v-62ed19e0></path><path d="M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z" data-v-62ed19e0></path><path fill-rule="evenodd" d="M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z" clip-rule="evenodd" data-v-62ed19e0></path></svg><span class="hidden lg:inline ml-1" data-v-62ed19e0>Charger</span>',2)])),B("button",{onClick:b,class:"btn-toolbar",title:"Enregistrer le plan"},j[4]||(j[4]=[B("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1),B("span",{class:"hidden lg:inline ml-1"},"Enregistrer",-1)]))])]),B("div",{class:"border-l pl-2"},[B("div",{class:"flex items-center space-x-1"},[B("button",{onClick:S,class:"btn-toolbar",title:"Ajuster la vue"},j[5]||(j[5]=[B("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),B("span",{class:"hidden lg:inline ml-1"},"Ajuster",-1)])),B("button",{onClick:x,class:"btn-toolbar",title:"Générer une synthèse"},j[6]||(j[6]=[B("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),B("span",{class:"hidden lg:inline ml-1"},"Synthèse",-1)]))])]),B("div",nx,[B("div",{class:zr(["text-xs hidden lg:flex items-center",{"text-gray-500":!D.saveStatus,"text-primary-600 font-medium":D.saveStatus==="success","text-blue-600 font-medium":D.saveStatus==="saving"}])},[D.saveStatus==="saving"?(ie(),ue("svg",rx,j[7]||(j[7]=[B("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),B("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):nn("",!0),D.saveStatus==="success"?(ie(),ue("svg",ix,j[8]||(j[8]=[B("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):nn("",!0),Sr(Np,{name:"fade-slide",mode:"out-in"},{default:Za(()=>[D.saveStatus==="saving"?(ie(),ue("span",sx," Sauvegarde en cours... ")):D.saveStatus==="success"?(ie(),ue("span",ox," Sauvegarde réussie ! ")):(ie(),ue("span",ax," Dernière modification : "+Se(f.value),1))]),_:1})],2)])]),B("div",lx,[B("div",ux,[B("button",{onClick:j[0]||(j[0]=z=>a.value=!a.value),class:"p-1 rounded border"},j[9]||(j[9]=[B("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{"fill-rule":"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1)])),D.planName?(ie(),ue("div",cx,Se(D.planName),1)):nn("",!0),B("div",{class:"flex space-x-1"},[B("button",{onClick:v,class:"p-1 rounded border bg-white"},j[10]||(j[10]=[B("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1)])),B("button",{onClick:b,class:"p-1 rounded border bg-white"},j[11]||(j[11]=[B("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1)])),B("button",{onClick:S,class:"p-1 rounded border bg-white"},j[12]||(j[12]=[B("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)]))])]),a.value?(ie(),ue("div",hx,[B("div",fx,[D.planName?(ie(),ue("div",dx,[B("h3",px,Se(D.planName),1),D.planDescription?(ie(),ue("p",gx,Se(D.planDescription),1)):nn("",!0)])):nn("",!0),B("div",mx,[j[13]||(j[13]=B("span",{class:"text-xs font-medium text-gray-500 mb-1"},"Type de carte",-1)),B("div",vx,[(ie(),ue(_n,null,Vn(u,(z,W)=>B("button",{key:W,class:zr(["px-2 py-1 text-xs rounded border",{"bg-blue-50 border-blue-200 text-blue-700":W===o.value}]),onClick:Q=>p(W)},Se(z),11,yx)),64))])]),B("div",{class:"flex flex-col"},[j[16]||(j[16]=B("span",{class:"text-xs font-medium text-gray-500 mb-1"},"Outils de plan",-1)),B("div",{class:"grid grid-cols-2 gap-1"},[B("button",{onClick:w,class:"px-2 py-1 text-xs rounded border flex items-center justify-center"},j[14]||(j[14]=[B("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule":"evenodd"}),B("path",{d:"M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z"}),B("path",{"fill-rule":"evenodd",d:"M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),Ur(" Charger ")])),B("button",{onClick:x,class:"px-2 py-1 text-xs rounded border flex items-center justify-center"},j[15]||(j[15]=[B("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),Ur(" Synthèse ")]))])]),B("div",{class:zr(["text-xs text-center pt-1 border-t flex items-center justify-center space-x-1",{"text-gray-500":!D.saveStatus,"text-primary-600 font-medium":D.saveStatus==="success","text-blue-600 font-medium":D.saveStatus==="saving"}])},[D.saveStatus==="saving"?(ie(),ue("svg",_x,j[17]||(j[17]=[B("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),B("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):nn("",!0),D.saveStatus==="success"?(ie(),ue("svg",bx,j[18]||(j[18]=[B("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):nn("",!0),Sr(Np,{name:"fade-slide",mode:"out-in"},{default:Za(()=>[D.saveStatus==="saving"?(ie(),ue("span",wx," Sauvegarde en cours... ")):D.saveStatus==="success"?(ie(),ue("span",xx," Sauvegarde réussie ! ")):(ie(),ue("span",Lx," Dernière modification : "+Se(f.value),1))]),_:1})],2)])])):nn("",!0)])]))}}),kx=S1(Cx,[["__scopeId","data-v-62ed19e0"]]);(()=>{var Ve,cn;var t=Object.create,e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,o=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,u=(s,l)=>()=>(l||s((l={exports:{}}).exports,l),l.exports),f=(s,l,h,g)=>{if(l&&typeof l=="object"||typeof l=="function")for(let y of r(l))!a.call(s,y)&&y!==h&&e(s,y,{get:()=>l[y],enumerable:!(g=n(l,y))||g.enumerable});return s},p=(s,l,h)=>(h=s!=null?t(o(s)):{},f(l||!s||!s.__esModule?e(h,"default",{value:s,enumerable:!0}):h,s)),v=u((s,l)=>{function h(){this.__data__=[],this.size=0}l.exports=h}),w=u((s,l)=>{function h(g,y){return g===y||g!==g&&y!==y}l.exports=h}),b=u((s,l)=>{var h=w();function g(y,k){for(var T=y.length;T--;)if(h(y[T][0],k))return T;return-1}l.exports=g}),S=u((s,l)=>{var h=b(),g=Array.prototype,y=g.splice;function k(T){var N=this.__data__,G=h(N,T);if(G<0)return!1;var it=N.length-1;return G==it?N.pop():y.call(N,G,1),--this.size,!0}l.exports=k}),x=u((s,l)=>{var h=b();function g(y){var k=this.__data__,T=h(k,y);return T<0?void 0:k[T][1]}l.exports=g}),I=u((s,l)=>{var h=b();function g(y){return h(this.__data__,y)>-1}l.exports=g}),D=u((s,l)=>{var h=b();function g(y,k){var T=this.__data__,N=h(T,y);return N<0?(++this.size,T.push([y,k])):T[N][1]=k,this}l.exports=g}),j=u((s,l)=>{var h=v(),g=S(),y=x(),k=I(),T=D();function N(G){var it=-1,It=G==null?0:G.length;for(this.clear();++it<It;){var Bt=G[it];this.set(Bt[0],Bt[1])}}N.prototype.clear=h,N.prototype.delete=g,N.prototype.get=y,N.prototype.has=k,N.prototype.set=T,l.exports=N}),z=u((s,l)=>{var h=j();function g(){this.__data__=new h,this.size=0}l.exports=g}),W=u((s,l)=>{function h(g){var y=this.__data__,k=y.delete(g);return this.size=y.size,k}l.exports=h}),Q=u((s,l)=>{function h(g){return this.__data__.get(g)}l.exports=h}),mt=u((s,l)=>{function h(g){return this.__data__.has(g)}l.exports=h}),Tt=u((s,l)=>{var h=typeof Co=="object"&&Co&&Co.Object===Object&&Co;l.exports=h}),Nt=u((s,l)=>{var h=Tt(),g=typeof self=="object"&&self&&self.Object===Object&&self,y=h||g||Function("return this")();l.exports=y}),Ft=u((s,l)=>{var h=Nt(),g=h.Symbol;l.exports=g}),vt=u((s,l)=>{var h=Ft(),g=Object.prototype,y=g.hasOwnProperty,k=g.toString,T=h?h.toStringTag:void 0;function N(G){var it=y.call(G,T),It=G[T];try{G[T]=void 0;var Bt=!0}catch{}var ee=k.call(G);return Bt&&(it?G[T]=It:delete G[T]),ee}l.exports=N}),Ct=u((s,l)=>{var h=Object.prototype,g=h.toString;function y(k){return g.call(k)}l.exports=y}),Ut=u((s,l)=>{var h=Ft(),g=vt(),y=Ct(),k="[object Null]",T="[object Undefined]",N=h?h.toStringTag:void 0;function G(it){return it==null?it===void 0?T:k:N&&N in Object(it)?g(it):y(it)}l.exports=G}),Z=u((s,l)=>{function h(g){var y=typeof g;return g!=null&&(y=="object"||y=="function")}l.exports=h}),V=u((s,l)=>{var h=Ut(),g=Z(),y="[object AsyncFunction]",k="[object Function]",T="[object GeneratorFunction]",N="[object Proxy]";function G(it){if(!g(it))return!1;var It=h(it);return It==k||It==T||It==y||It==N}l.exports=G}),St=u((s,l)=>{var h=Nt(),g=h["__core-js_shared__"];l.exports=g}),Et=u((s,l)=>{var h=St(),g=function(){var k=/[^.]+$/.exec(h&&h.keys&&h.keys.IE_PROTO||"");return k?"Symbol(src)_1."+k:""}();function y(k){return!!g&&g in k}l.exports=y}),M=u((s,l)=>{var h=Function.prototype,g=h.toString;function y(k){if(k!=null){try{return g.call(k)}catch{}try{return k+""}catch{}}return""}l.exports=y}),$=u((s,l)=>{var h=V(),g=Et(),y=Z(),k=M(),T=/[\\^$.*+?()[\]{}|]/g,N=/^\[object .+?Constructor\]$/,G=Function.prototype,it=Object.prototype,It=G.toString,Bt=it.hasOwnProperty,ee=RegExp("^"+It.call(Bt).replace(T,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function de(Pe){if(!y(Pe)||g(Pe))return!1;var Oe=h(Pe)?ee:N;return Oe.test(k(Pe))}l.exports=de}),q=u((s,l)=>{function h(g,y){return g==null?void 0:g[y]}l.exports=h}),O=u((s,l)=>{var h=$(),g=q();function y(k,T){var N=g(k,T);return h(N)?N:void 0}l.exports=y}),dt=u((s,l)=>{var h=O(),g=Nt(),y=h(g,"Map");l.exports=y}),gt=u((s,l)=>{var h=O(),g=h(Object,"create");l.exports=g}),Y=u((s,l)=>{var h=gt();function g(){this.__data__=h?h(null):{},this.size=0}l.exports=g}),A=u((s,l)=>{function h(g){var y=this.has(g)&&delete this.__data__[g];return this.size-=y?1:0,y}l.exports=h}),U=u((s,l)=>{var h=gt(),g="__lodash_hash_undefined__",y=Object.prototype,k=y.hasOwnProperty;function T(N){var G=this.__data__;if(h){var it=G[N];return it===g?void 0:it}return k.call(G,N)?G[N]:void 0}l.exports=T}),et=u((s,l)=>{var h=gt(),g=Object.prototype,y=g.hasOwnProperty;function k(T){var N=this.__data__;return h?N[T]!==void 0:y.call(N,T)}l.exports=k}),lt=u((s,l)=>{var h=gt(),g="__lodash_hash_undefined__";function y(k,T){var N=this.__data__;return this.size+=this.has(k)?0:1,N[k]=h&&T===void 0?g:T,this}l.exports=y}),ct=u((s,l)=>{var h=Y(),g=A(),y=U(),k=et(),T=lt();function N(G){var it=-1,It=G==null?0:G.length;for(this.clear();++it<It;){var Bt=G[it];this.set(Bt[0],Bt[1])}}N.prototype.clear=h,N.prototype.delete=g,N.prototype.get=y,N.prototype.has=k,N.prototype.set=T,l.exports=N}),tt=u((s,l)=>{var h=ct(),g=j(),y=dt();function k(){this.size=0,this.__data__={hash:new h,map:new(y||g),string:new h}}l.exports=k}),ft=u((s,l)=>{function h(g){var y=typeof g;return y=="string"||y=="number"||y=="symbol"||y=="boolean"?g!=="__proto__":g===null}l.exports=h}),ht=u((s,l)=>{var h=ft();function g(y,k){var T=y.__data__;return h(k)?T[typeof k=="string"?"string":"hash"]:T.map}l.exports=g}),At=u((s,l)=>{var h=ht();function g(y){var k=h(this,y).delete(y);return this.size-=k?1:0,k}l.exports=g}),jt=u((s,l)=>{var h=ht();function g(y){return h(this,y).get(y)}l.exports=g}),H=u((s,l)=>{var h=ht();function g(y){return h(this,y).has(y)}l.exports=g}),J=u((s,l)=>{var h=ht();function g(y,k){var T=h(this,y),N=T.size;return T.set(y,k),this.size+=T.size==N?0:1,this}l.exports=g}),yt=u((s,l)=>{var h=tt(),g=At(),y=jt(),k=H(),T=J();function N(G){var it=-1,It=G==null?0:G.length;for(this.clear();++it<It;){var Bt=G[it];this.set(Bt[0],Bt[1])}}N.prototype.clear=h,N.prototype.delete=g,N.prototype.get=y,N.prototype.has=k,N.prototype.set=T,l.exports=N}),wt=u((s,l)=>{var h=j(),g=dt(),y=yt(),k=200;function T(N,G){var it=this.__data__;if(it instanceof h){var It=it.__data__;if(!g||It.length<k-1)return It.push([N,G]),this.size=++it.size,this;it=this.__data__=new y(It)}return it.set(N,G),this.size=it.size,this}l.exports=T}),K=u((s,l)=>{var h=j(),g=z(),y=W(),k=Q(),T=mt(),N=wt();function G(it){var It=this.__data__=new h(it);this.size=It.size}G.prototype.clear=g,G.prototype.delete=y,G.prototype.get=k,G.prototype.has=T,G.prototype.set=N,l.exports=G}),Ht=u((s,l)=>{var h=O(),g=function(){try{var y=h(Object,"defineProperty");return y({},"",{}),y}catch{}}();l.exports=g}),ne=u((s,l)=>{var h=Ht();function g(y,k,T){k=="__proto__"&&h?h(y,k,{configurable:!0,enumerable:!0,value:T,writable:!0}):y[k]=T}l.exports=g}),Zt=u((s,l)=>{var h=ne(),g=w();function y(k,T,N){(N!==void 0&&!g(k[T],N)||N===void 0&&!(T in k))&&h(k,T,N)}l.exports=y}),Dt=u((s,l)=>{function h(g){return function(y,k,T){for(var N=-1,G=Object(y),it=T(y),It=it.length;It--;){var Bt=it[g?It:++N];if(k(G[Bt],Bt,G)===!1)break}return y}}l.exports=h}),Lt=u((s,l)=>{var h=Dt(),g=h();l.exports=g}),ae=u((s,l)=>{var h=Nt(),g=typeof s=="object"&&s&&!s.nodeType&&s,y=g&&typeof l=="object"&&l&&!l.nodeType&&l,k=y&&y.exports===g,T=k?h.Buffer:void 0,N=T?T.allocUnsafe:void 0;function G(it,It){if(It)return it.slice();var Bt=it.length,ee=N?N(Bt):new it.constructor(Bt);return it.copy(ee),ee}l.exports=G}),te=u((s,l)=>{var h=Nt(),g=h.Uint8Array;l.exports=g}),xe=u((s,l)=>{var h=te();function g(y){var k=new y.constructor(y.byteLength);return new h(k).set(new h(y)),k}l.exports=g}),zt=u((s,l)=>{var h=xe();function g(y,k){var T=k?h(y.buffer):y.buffer;return new y.constructor(T,y.byteOffset,y.length)}l.exports=g}),pe=u((s,l)=>{function h(g,y){var k=-1,T=g.length;for(y||(y=Array(T));++k<T;)y[k]=g[k];return y}l.exports=h}),qe=u((s,l)=>{var h=Z(),g=Object.create,y=function(){function k(){}return function(T){if(!h(T))return{};if(g)return g(T);k.prototype=T;var N=new k;return k.prototype=void 0,N}}();l.exports=y}),He=u((s,l)=>{function h(g,y){return function(k){return g(y(k))}}l.exports=h}),Fe=u((s,l)=>{var h=He(),g=h(Object.getPrototypeOf,Object);l.exports=g}),Xe=u((s,l)=>{var h=Object.prototype;function g(y){var k=y&&y.constructor,T=typeof k=="function"&&k.prototype||h;return y===T}l.exports=g}),De=u((s,l)=>{var h=qe(),g=Fe(),y=Xe();function k(T){return typeof T.constructor=="function"&&!y(T)?h(g(T)):{}}l.exports=k}),on=u((s,l)=>{function h(g){return g!=null&&typeof g=="object"}l.exports=h}),pn=u((s,l)=>{var h=Ut(),g=on(),y="[object Arguments]";function k(T){return g(T)&&h(T)==y}l.exports=k}),cr=u((s,l)=>{var h=pn(),g=on(),y=Object.prototype,k=y.hasOwnProperty,T=y.propertyIsEnumerable,N=h(function(){return arguments}())?h:function(G){return g(G)&&k.call(G,"callee")&&!T.call(G,"callee")};l.exports=N}),rn=u((s,l)=>{var h=Array.isArray;l.exports=h}),hn=u((s,l)=>{var h=9007199254740991;function g(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=h}l.exports=g}),Ze=u((s,l)=>{var h=V(),g=hn();function y(k){return k!=null&&g(k.length)&&!h(k)}l.exports=y}),Pn=u((s,l)=>{var h=Ze(),g=on();function y(k){return g(k)&&h(k)}l.exports=y}),vr=u((s,l)=>{function h(){return!1}l.exports=h}),Tn=u((s,l)=>{var h=Nt(),g=vr(),y=typeof s=="object"&&s&&!s.nodeType&&s,k=y&&typeof l=="object"&&l&&!l.nodeType&&l,T=k&&k.exports===y,N=T?h.Buffer:void 0,G=N?N.isBuffer:void 0,it=G||g;l.exports=it}),or=u((s,l)=>{var h=Ut(),g=Fe(),y=on(),k="[object Object]",T=Function.prototype,N=Object.prototype,G=T.toString,it=N.hasOwnProperty,It=G.call(Object);function Bt(ee){if(!y(ee)||h(ee)!=k)return!1;var de=g(ee);if(de===null)return!0;var Pe=it.call(de,"constructor")&&de.constructor;return typeof Pe=="function"&&Pe instanceof Pe&&G.call(Pe)==It}l.exports=Bt}),dr=u((s,l)=>{var h=Ut(),g=hn(),y=on(),k="[object Arguments]",T="[object Array]",N="[object Boolean]",G="[object Date]",it="[object Error]",It="[object Function]",Bt="[object Map]",ee="[object Number]",de="[object Object]",Pe="[object RegExp]",Oe="[object Set]",Ue="[object String]",mn="[object WeakMap]",Rt="[object ArrayBuffer]",qt="[object DataView]",Yt="[object Float32Array]",ye="[object Float64Array]",se="[object Int8Array]",ge="[object Int16Array]",X="[object Int32Array]",st="[object Uint8Array]",xt="[object Uint8ClampedArray]",bt="[object Uint16Array]",kt="[object Uint32Array]",Pt={};Pt[Yt]=Pt[ye]=Pt[se]=Pt[ge]=Pt[X]=Pt[st]=Pt[xt]=Pt[bt]=Pt[kt]=!0,Pt[k]=Pt[T]=Pt[Rt]=Pt[N]=Pt[qt]=Pt[G]=Pt[it]=Pt[It]=Pt[Bt]=Pt[ee]=Pt[de]=Pt[Pe]=Pt[Oe]=Pt[Ue]=Pt[mn]=!1;function Wt(Vt){return y(Vt)&&g(Vt.length)&&!!Pt[h(Vt)]}l.exports=Wt}),qn=u((s,l)=>{function h(g){return function(y){return g(y)}}l.exports=h}),ze=u((s,l)=>{var h=Tt(),g=typeof s=="object"&&s&&!s.nodeType&&s,y=g&&typeof l=="object"&&l&&!l.nodeType&&l,k=y&&y.exports===g,T=k&&h.process,N=function(){try{var G=y&&y.require&&y.require("util").types;return G||T&&T.binding&&T.binding("util")}catch{}}();l.exports=N}),Ne=u((s,l)=>{var h=dr(),g=qn(),y=ze(),k=y&&y.isTypedArray,T=k?g(k):h;l.exports=T}),Mr=u((s,l)=>{function h(g,y){if(!(y==="constructor"&&typeof g[y]=="function")&&y!="__proto__")return g[y]}l.exports=h}),ar=u((s,l)=>{var h=ne(),g=w(),y=Object.prototype,k=y.hasOwnProperty;function T(N,G,it){var It=N[G];(!(k.call(N,G)&&g(It,it))||it===void 0&&!(G in N))&&h(N,G,it)}l.exports=T}),je=u((s,l)=>{var h=ar(),g=ne();function y(k,T,N,G){var it=!N;N||(N={});for(var It=-1,Bt=T.length;++It<Bt;){var ee=T[It],de=G?G(N[ee],k[ee],ee,N,k):void 0;de===void 0&&(de=k[ee]),it?g(N,ee,de):h(N,ee,de)}return N}l.exports=y}),hr=u((s,l)=>{function h(g,y){for(var k=-1,T=Array(g);++k<g;)T[k]=y(k);return T}l.exports=h}),tn=u((s,l)=>{var h=9007199254740991,g=/^(?:0|[1-9]\d*)$/;function y(k,T){var N=typeof k;return T=T??h,!!T&&(N=="number"||N!="symbol"&&g.test(k))&&k>-1&&k%1==0&&k<T}l.exports=y}),nr=u((s,l)=>{var h=hr(),g=cr(),y=rn(),k=Tn(),T=tn(),N=Ne(),G=Object.prototype,it=G.hasOwnProperty;function It(Bt,ee){var de=y(Bt),Pe=!de&&g(Bt),Oe=!de&&!Pe&&k(Bt),Ue=!de&&!Pe&&!Oe&&N(Bt),mn=de||Pe||Oe||Ue,Rt=mn?h(Bt.length,String):[],qt=Rt.length;for(var Yt in Bt)(ee||it.call(Bt,Yt))&&!(mn&&(Yt=="length"||Oe&&(Yt=="offset"||Yt=="parent")||Ue&&(Yt=="buffer"||Yt=="byteLength"||Yt=="byteOffset")||T(Yt,qt)))&&Rt.push(Yt);return Rt}l.exports=It}),Ni=u((s,l)=>{function h(g){var y=[];if(g!=null)for(var k in Object(g))y.push(k);return y}l.exports=h}),qr=u((s,l)=>{var h=Z(),g=Xe(),y=Ni(),k=Object.prototype,T=k.hasOwnProperty;function N(G){if(!h(G))return y(G);var it=g(G),It=[];for(var Bt in G)Bt=="constructor"&&(it||!T.call(G,Bt))||It.push(Bt);return It}l.exports=N}),Un=u((s,l)=>{var h=nr(),g=qr(),y=Ze();function k(T){return y(T)?h(T,!0):g(T)}l.exports=k}),$e=u((s,l)=>{var h=je(),g=Un();function y(k){return h(k,g(k))}l.exports=y}),$r=u((s,l)=>{var h=Zt(),g=ae(),y=zt(),k=pe(),T=De(),N=cr(),G=rn(),it=Pn(),It=Tn(),Bt=V(),ee=Z(),de=or(),Pe=Ne(),Oe=Mr(),Ue=$e();function mn(Rt,qt,Yt,ye,se,ge,X){var st=Oe(Rt,Yt),xt=Oe(qt,Yt),bt=X.get(xt);if(bt){h(Rt,Yt,bt);return}var kt=ge?ge(st,xt,Yt+"",Rt,qt,X):void 0,Pt=kt===void 0;if(Pt){var Wt=G(xt),Vt=!Wt&&It(xt),Xt=!Wt&&!Vt&&Pe(xt);kt=xt,Wt||Vt||Xt?G(st)?kt=st:it(st)?kt=k(st):Vt?(Pt=!1,kt=g(xt,!0)):Xt?(Pt=!1,kt=y(xt,!0)):kt=[]:de(xt)||N(xt)?(kt=st,N(st)?kt=Ue(st):(!ee(st)||Bt(st))&&(kt=T(xt))):Pt=!1}Pt&&(X.set(xt,kt),se(kt,xt,ye,ge,X),X.delete(xt)),h(Rt,Yt,kt)}l.exports=mn}),_s=u((s,l)=>{var h=K(),g=Zt(),y=Lt(),k=$r(),T=Z(),N=Un(),G=Mr();function it(It,Bt,ee,de,Pe){It!==Bt&&y(Bt,function(Oe,Ue){if(Pe||(Pe=new h),T(Oe))k(It,Bt,Ue,ee,it,de,Pe);else{var mn=de?de(G(It,Ue),Oe,Ue+"",It,Bt,Pe):void 0;mn===void 0&&(mn=Oe),g(It,Ue,mn)}},N)}l.exports=it}),bi=u((s,l)=>{function h(g){return g}l.exports=h}),ci=u((s,l)=>{function h(g,y,k){switch(k.length){case 0:return g.call(y);case 1:return g.call(y,k[0]);case 2:return g.call(y,k[0],k[1]);case 3:return g.call(y,k[0],k[1],k[2])}return g.apply(y,k)}l.exports=h}),ti=u((s,l)=>{var h=ci(),g=Math.max;function y(k,T,N){return T=g(T===void 0?k.length-1:T,0),function(){for(var G=arguments,it=-1,It=g(G.length-T,0),Bt=Array(It);++it<It;)Bt[it]=G[T+it];it=-1;for(var ee=Array(T+1);++it<T;)ee[it]=G[it];return ee[T]=N(Bt),h(k,this,ee)}}l.exports=y}),hi=u((s,l)=>{function h(g){return function(){return g}}l.exports=h}),Ir=u((s,l)=>{var h=hi(),g=Ht(),y=bi(),k=g?function(T,N){return g(T,"toString",{configurable:!0,enumerable:!1,value:h(N),writable:!0})}:y;l.exports=k}),ei=u((s,l)=>{var h=800,g=16,y=Date.now;function k(T){var N=0,G=0;return function(){var it=y(),It=g-(it-G);if(G=it,It>0){if(++N>=h)return arguments[0]}else N=0;return T.apply(void 0,arguments)}}l.exports=k}),Di=u((s,l)=>{var h=Ir(),g=ei(),y=g(h);l.exports=y}),bs=u((s,l)=>{var h=bi(),g=ti(),y=Di();function k(T,N){return y(g(T,N,h),T+"")}l.exports=k}),qs=u((s,l)=>{var h=w(),g=Ze(),y=tn(),k=Z();function T(N,G,it){if(!k(it))return!1;var It=typeof G;return(It=="number"?g(it)&&y(G,it.length):It=="string"&&G in it)?h(it[G],N):!1}l.exports=T}),$s=u((s,l)=>{var h=bs(),g=qs();function y(k){return h(function(T,N){var G=-1,it=N.length,It=it>1?N[it-1]:void 0,Bt=it>2?N[2]:void 0;for(It=k.length>3&&typeof It=="function"?(it--,It):void 0,Bt&&g(N[0],N[1],Bt)&&(It=it<3?void 0:It,it=1),T=Object(T);++G<it;){var ee=N[G];ee&&k(T,ee,G,It)}return T})}l.exports=y}),Ui=u((s,l)=>{var h=_s(),g=$s(),y=g(function(k,T,N){h(k,T,N)});l.exports=y}),os=u((s,l)=>{var h=Ut(),g=on(),y="[object Symbol]";function k(T){return typeof T=="symbol"||g(T)&&h(T)==y}l.exports=k}),ws=u((s,l)=>{var h=rn(),g=os(),y=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,k=/^\w*$/;function T(N,G){if(h(N))return!1;var it=typeof N;return it=="number"||it=="symbol"||it=="boolean"||N==null||g(N)?!0:k.test(N)||!y.test(N)||G!=null&&N in Object(G)}l.exports=T}),Xn=u((s,l)=>{var h=yt(),g="Expected a function";function y(k,T){if(typeof k!="function"||T!=null&&typeof T!="function")throw new TypeError(g);var N=function(){var G=arguments,it=T?T.apply(this,G):G[0],It=N.cache;if(It.has(it))return It.get(it);var Bt=k.apply(this,G);return N.cache=It.set(it,Bt)||It,Bt};return N.cache=new(y.Cache||h),N}y.Cache=h,l.exports=y}),xs=u((s,l)=>{var h=Xn(),g=500;function y(k){var T=h(k,function(G){return N.size===g&&N.clear(),G}),N=T.cache;return T}l.exports=y}),Ls=u((s,l)=>{var h=xs(),g=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,y=/\\(\\)?/g,k=h(function(T){var N=[];return T.charCodeAt(0)===46&&N.push(""),T.replace(g,function(G,it,It,Bt){N.push(It?Bt.replace(y,"$1"):it||G)}),N});l.exports=k}),ea=u((s,l)=>{function h(g,y){for(var k=-1,T=g==null?0:g.length,N=Array(T);++k<T;)N[k]=y(g[k],k,g);return N}l.exports=h}),Nl=u((s,l)=>{var h=Ft(),g=ea(),y=rn(),k=os(),T=h?h.prototype:void 0,N=T?T.toString:void 0;function G(it){if(typeof it=="string")return it;if(y(it))return g(it,G)+"";if(k(it))return N?N.call(it):"";var It=it+"";return It=="0"&&1/it==-1/0?"-0":It}l.exports=G}),Ao=u((s,l)=>{var h=Nl();function g(y){return y==null?"":h(y)}l.exports=g}),Mo=u((s,l)=>{var h=rn(),g=ws(),y=Ls(),k=Ao();function T(N,G){return h(N)?N:g(N,G)?[N]:y(k(N))}l.exports=T}),Pa=u((s,l)=>{var h=os();function g(y){if(typeof y=="string"||h(y))return y;var k=y+"";return k=="0"&&1/y==-1/0?"-0":k}l.exports=g}),Qa=u((s,l)=>{var h=Mo(),g=Pa();function y(k,T){T=h(T,k);for(var N=0,G=T.length;k!=null&&N<G;)k=k[g(T[N++])];return N&&N==G?k:void 0}l.exports=y}),Oi=u((s,l)=>{var h=Qa();function g(y,k,T){var N=y==null?void 0:h(y,k);return N===void 0?T:N}l.exports=g}),jn=u((s,l)=>{(function(h,g){typeof s=="object"&&typeof l<"u"?l.exports=g():(h=h||self).RBush=g()})(s,function(){function h(Rt,qt,Yt,ye,se){(function ge(X,st,xt,bt,kt){for(;bt>xt;){if(bt-xt>600){var Pt=bt-xt+1,Wt=st-xt+1,Vt=Math.log(Pt),Xt=.5*Math.exp(2*Vt/3),he=.5*Math.sqrt(Vt*Xt*(Pt-Xt)/Pt)*(Wt-Pt/2<0?-1:1),ce=Math.max(xt,Math.floor(st-Wt*Xt/Pt+he)),Ae=Math.min(bt,Math.floor(st+(Pt-Wt)*Xt/Pt+he));ge(X,st,ce,Ae,kt)}var Ke=X[st],Qe=xt,sn=bt;for(g(X,xt,st),kt(X[bt],Ke)>0&&g(X,xt,bt);Qe<sn;){for(g(X,Qe,sn),Qe++,sn--;kt(X[Qe],Ke)<0;)Qe++;for(;kt(X[sn],Ke)>0;)sn--}kt(X[xt],Ke)===0?g(X,xt,sn):g(X,++sn,bt),sn<=st&&(xt=sn+1),st<=sn&&(bt=sn-1)}})(Rt,qt,Yt||0,ye||Rt.length-1,se||y)}function g(Rt,qt,Yt){var ye=Rt[qt];Rt[qt]=Rt[Yt],Rt[Yt]=ye}function y(Rt,qt){return Rt<qt?-1:Rt>qt?1:0}var k=function(Rt){Rt===void 0&&(Rt=9),this._maxEntries=Math.max(4,Rt),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function T(Rt,qt,Yt){if(!Yt)return qt.indexOf(Rt);for(var ye=0;ye<qt.length;ye++)if(Yt(Rt,qt[ye]))return ye;return-1}function N(Rt,qt){G(Rt,0,Rt.children.length,qt,Rt)}function G(Rt,qt,Yt,ye,se){se||(se=Ue(null)),se.minX=1/0,se.minY=1/0,se.maxX=-1/0,se.maxY=-1/0;for(var ge=qt;ge<Yt;ge++){var X=Rt.children[ge];it(se,Rt.leaf?ye(X):X)}return se}function it(Rt,qt){return Rt.minX=Math.min(Rt.minX,qt.minX),Rt.minY=Math.min(Rt.minY,qt.minY),Rt.maxX=Math.max(Rt.maxX,qt.maxX),Rt.maxY=Math.max(Rt.maxY,qt.maxY),Rt}function It(Rt,qt){return Rt.minX-qt.minX}function Bt(Rt,qt){return Rt.minY-qt.minY}function ee(Rt){return(Rt.maxX-Rt.minX)*(Rt.maxY-Rt.minY)}function de(Rt){return Rt.maxX-Rt.minX+(Rt.maxY-Rt.minY)}function Pe(Rt,qt){return Rt.minX<=qt.minX&&Rt.minY<=qt.minY&&qt.maxX<=Rt.maxX&&qt.maxY<=Rt.maxY}function Oe(Rt,qt){return qt.minX<=Rt.maxX&&qt.minY<=Rt.maxY&&qt.maxX>=Rt.minX&&qt.maxY>=Rt.minY}function Ue(Rt){return{children:Rt,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function mn(Rt,qt,Yt,ye,se){for(var ge=[qt,Yt];ge.length;)if(!((Yt=ge.pop())-(qt=ge.pop())<=ye)){var X=qt+Math.ceil((Yt-qt)/ye/2)*ye;h(Rt,X,qt,Yt,se),ge.push(qt,X,X,Yt)}}return k.prototype.all=function(){return this._all(this.data,[])},k.prototype.search=function(Rt){var qt=this.data,Yt=[];if(!Oe(Rt,qt))return Yt;for(var ye=this.toBBox,se=[];qt;){for(var ge=0;ge<qt.children.length;ge++){var X=qt.children[ge],st=qt.leaf?ye(X):X;Oe(Rt,st)&&(qt.leaf?Yt.push(X):Pe(Rt,st)?this._all(X,Yt):se.push(X))}qt=se.pop()}return Yt},k.prototype.collides=function(Rt){var qt=this.data;if(!Oe(Rt,qt))return!1;for(var Yt=[];qt;){for(var ye=0;ye<qt.children.length;ye++){var se=qt.children[ye],ge=qt.leaf?this.toBBox(se):se;if(Oe(Rt,ge)){if(qt.leaf||Pe(Rt,ge))return!0;Yt.push(se)}}qt=Yt.pop()}return!1},k.prototype.load=function(Rt){if(!Rt||!Rt.length)return this;if(Rt.length<this._minEntries){for(var qt=0;qt<Rt.length;qt++)this.insert(Rt[qt]);return this}var Yt=this._build(Rt.slice(),0,Rt.length-1,0);if(this.data.children.length)if(this.data.height===Yt.height)this._splitRoot(this.data,Yt);else{if(this.data.height<Yt.height){var ye=this.data;this.data=Yt,Yt=ye}this._insert(Yt,this.data.height-Yt.height-1,!0)}else this.data=Yt;return this},k.prototype.insert=function(Rt){return Rt&&this._insert(Rt,this.data.height-1),this},k.prototype.clear=function(){return this.data=Ue([]),this},k.prototype.remove=function(Rt,qt){if(!Rt)return this;for(var Yt,ye,se,ge=this.data,X=this.toBBox(Rt),st=[],xt=[];ge||st.length;){if(ge||(ge=st.pop(),ye=st[st.length-1],Yt=xt.pop(),se=!0),ge.leaf){var bt=T(Rt,ge.children,qt);if(bt!==-1)return ge.children.splice(bt,1),st.push(ge),this._condense(st),this}se||ge.leaf||!Pe(ge,X)?ye?(Yt++,ge=ye.children[Yt],se=!1):ge=null:(st.push(ge),xt.push(Yt),Yt=0,ye=ge,ge=ge.children[0])}return this},k.prototype.toBBox=function(Rt){return Rt},k.prototype.compareMinX=function(Rt,qt){return Rt.minX-qt.minX},k.prototype.compareMinY=function(Rt,qt){return Rt.minY-qt.minY},k.prototype.toJSON=function(){return this.data},k.prototype.fromJSON=function(Rt){return this.data=Rt,this},k.prototype._all=function(Rt,qt){for(var Yt=[];Rt;)Rt.leaf?qt.push.apply(qt,Rt.children):Yt.push.apply(Yt,Rt.children),Rt=Yt.pop();return qt},k.prototype._build=function(Rt,qt,Yt,ye){var se,ge=Yt-qt+1,X=this._maxEntries;if(ge<=X)return N(se=Ue(Rt.slice(qt,Yt+1)),this.toBBox),se;ye||(ye=Math.ceil(Math.log(ge)/Math.log(X)),X=Math.ceil(ge/Math.pow(X,ye-1))),(se=Ue([])).leaf=!1,se.height=ye;var st=Math.ceil(ge/X),xt=st*Math.ceil(Math.sqrt(X));mn(Rt,qt,Yt,xt,this.compareMinX);for(var bt=qt;bt<=Yt;bt+=xt){var kt=Math.min(bt+xt-1,Yt);mn(Rt,bt,kt,st,this.compareMinY);for(var Pt=bt;Pt<=kt;Pt+=st){var Wt=Math.min(Pt+st-1,kt);se.children.push(this._build(Rt,Pt,Wt,ye-1))}}return N(se,this.toBBox),se},k.prototype._chooseSubtree=function(Rt,qt,Yt,ye){for(;ye.push(qt),!qt.leaf&&ye.length-1!==Yt;){for(var se=1/0,ge=1/0,X=void 0,st=0;st<qt.children.length;st++){var xt=qt.children[st],bt=ee(xt),kt=(Pt=Rt,Wt=xt,(Math.max(Wt.maxX,Pt.maxX)-Math.min(Wt.minX,Pt.minX))*(Math.max(Wt.maxY,Pt.maxY)-Math.min(Wt.minY,Pt.minY))-bt);kt<ge?(ge=kt,se=bt<se?bt:se,X=xt):kt===ge&&bt<se&&(se=bt,X=xt)}qt=X||qt.children[0]}var Pt,Wt;return qt},k.prototype._insert=function(Rt,qt,Yt){var ye=Yt?Rt:this.toBBox(Rt),se=[],ge=this._chooseSubtree(ye,this.data,qt,se);for(ge.children.push(Rt),it(ge,ye);qt>=0&&se[qt].children.length>this._maxEntries;)this._split(se,qt),qt--;this._adjustParentBBoxes(ye,se,qt)},k.prototype._split=function(Rt,qt){var Yt=Rt[qt],ye=Yt.children.length,se=this._minEntries;this._chooseSplitAxis(Yt,se,ye);var ge=this._chooseSplitIndex(Yt,se,ye),X=Ue(Yt.children.splice(ge,Yt.children.length-ge));X.height=Yt.height,X.leaf=Yt.leaf,N(Yt,this.toBBox),N(X,this.toBBox),qt?Rt[qt-1].children.push(X):this._splitRoot(Yt,X)},k.prototype._splitRoot=function(Rt,qt){this.data=Ue([Rt,qt]),this.data.height=Rt.height+1,this.data.leaf=!1,N(this.data,this.toBBox)},k.prototype._chooseSplitIndex=function(Rt,qt,Yt){for(var ye,se,ge,X,st,xt,bt,kt=1/0,Pt=1/0,Wt=qt;Wt<=Yt-qt;Wt++){var Vt=G(Rt,0,Wt,this.toBBox),Xt=G(Rt,Wt,Yt,this.toBBox),he=(se=Vt,ge=Xt,X=void 0,st=void 0,xt=void 0,bt=void 0,X=Math.max(se.minX,ge.minX),st=Math.max(se.minY,ge.minY),xt=Math.min(se.maxX,ge.maxX),bt=Math.min(se.maxY,ge.maxY),Math.max(0,xt-X)*Math.max(0,bt-st)),ce=ee(Vt)+ee(Xt);he<kt?(kt=he,ye=Wt,Pt=ce<Pt?ce:Pt):he===kt&&ce<Pt&&(Pt=ce,ye=Wt)}return ye||Yt-qt},k.prototype._chooseSplitAxis=function(Rt,qt,Yt){var ye=Rt.leaf?this.compareMinX:It,se=Rt.leaf?this.compareMinY:Bt;this._allDistMargin(Rt,qt,Yt,ye)<this._allDistMargin(Rt,qt,Yt,se)&&Rt.children.sort(ye)},k.prototype._allDistMargin=function(Rt,qt,Yt,ye){Rt.children.sort(ye);for(var se=this.toBBox,ge=G(Rt,0,qt,se),X=G(Rt,Yt-qt,Yt,se),st=de(ge)+de(X),xt=qt;xt<Yt-qt;xt++){var bt=Rt.children[xt];it(ge,Rt.leaf?se(bt):bt),st+=de(ge)}for(var kt=Yt-qt-1;kt>=qt;kt--){var Pt=Rt.children[kt];it(X,Rt.leaf?se(Pt):Pt),st+=de(X)}return st},k.prototype._adjustParentBBoxes=function(Rt,qt,Yt){for(var ye=Yt;ye>=0;ye--)it(qt[ye],Rt)},k.prototype._condense=function(Rt){for(var qt=Rt.length-1,Yt=void 0;qt>=0;qt--)Rt[qt].children.length===0?qt>0?(Yt=Rt[qt-1].children).splice(Yt.indexOf(Rt[qt]),1):this.clear():N(Rt[qt],this.toBBox)},k})}),xn=u(s=>{Object.defineProperty(s,"__esModule",{value:!0}),s.earthRadius=63710088e-1,s.factors={centimeters:s.earthRadius*100,centimetres:s.earthRadius*100,degrees:s.earthRadius/111325,feet:s.earthRadius*3.28084,inches:s.earthRadius*39.37,kilometers:s.earthRadius/1e3,kilometres:s.earthRadius/1e3,meters:s.earthRadius,metres:s.earthRadius,miles:s.earthRadius/1609.344,millimeters:s.earthRadius*1e3,millimetres:s.earthRadius*1e3,nauticalmiles:s.earthRadius/1852,radians:1,yards:s.earthRadius*1.0936},s.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/s.earthRadius,yards:1.0936133},s.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function l(bt,kt,Pt){Pt===void 0&&(Pt={});var Wt={type:"Feature"};return(Pt.id===0||Pt.id)&&(Wt.id=Pt.id),Pt.bbox&&(Wt.bbox=Pt.bbox),Wt.properties=kt||{},Wt.geometry=bt,Wt}s.feature=l;function h(bt,kt,Pt){switch(bt){case"Point":return g(kt).geometry;case"LineString":return N(kt).geometry;case"Polygon":return k(kt).geometry;case"MultiPoint":return Bt(kt).geometry;case"MultiLineString":return It(kt).geometry;case"MultiPolygon":return ee(kt).geometry;default:throw new Error(bt+" is invalid")}}s.geometry=h;function g(bt,kt,Pt){if(Pt===void 0&&(Pt={}),!bt)throw new Error("coordinates is required");if(!Array.isArray(bt))throw new Error("coordinates must be an Array");if(bt.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ge(bt[0])||!ge(bt[1]))throw new Error("coordinates must contain numbers");var Wt={type:"Point",coordinates:bt};return l(Wt,kt,Pt)}s.point=g;function y(bt,kt,Pt){return Pt===void 0&&(Pt={}),it(bt.map(function(Wt){return g(Wt,kt)}),Pt)}s.points=y;function k(bt,kt,Pt){Pt===void 0&&(Pt={});for(var Wt=0,Vt=bt;Wt<Vt.length;Wt++){var Xt=Vt[Wt];if(Xt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var he=0;he<Xt[Xt.length-1].length;he++)if(Xt[Xt.length-1][he]!==Xt[0][he])throw new Error("First and last Position are not equivalent.")}var ce={type:"Polygon",coordinates:bt};return l(ce,kt,Pt)}s.polygon=k;function T(bt,kt,Pt){return Pt===void 0&&(Pt={}),it(bt.map(function(Wt){return k(Wt,kt)}),Pt)}s.polygons=T;function N(bt,kt,Pt){if(Pt===void 0&&(Pt={}),bt.length<2)throw new Error("coordinates must be an array of two or more positions");var Wt={type:"LineString",coordinates:bt};return l(Wt,kt,Pt)}s.lineString=N;function G(bt,kt,Pt){return Pt===void 0&&(Pt={}),it(bt.map(function(Wt){return N(Wt,kt)}),Pt)}s.lineStrings=G;function it(bt,kt){kt===void 0&&(kt={});var Pt={type:"FeatureCollection"};return kt.id&&(Pt.id=kt.id),kt.bbox&&(Pt.bbox=kt.bbox),Pt.features=bt,Pt}s.featureCollection=it;function It(bt,kt,Pt){Pt===void 0&&(Pt={});var Wt={type:"MultiLineString",coordinates:bt};return l(Wt,kt,Pt)}s.multiLineString=It;function Bt(bt,kt,Pt){Pt===void 0&&(Pt={});var Wt={type:"MultiPoint",coordinates:bt};return l(Wt,kt,Pt)}s.multiPoint=Bt;function ee(bt,kt,Pt){Pt===void 0&&(Pt={});var Wt={type:"MultiPolygon",coordinates:bt};return l(Wt,kt,Pt)}s.multiPolygon=ee;function de(bt,kt,Pt){Pt===void 0&&(Pt={});var Wt={type:"GeometryCollection",geometries:bt};return l(Wt,kt,Pt)}s.geometryCollection=de;function Pe(bt,kt){if(kt===void 0&&(kt=0),kt&&!(kt>=0))throw new Error("precision must be a positive number");var Pt=Math.pow(10,kt||0);return Math.round(bt*Pt)/Pt}s.round=Pe;function Oe(bt,kt){kt===void 0&&(kt="kilometers");var Pt=s.factors[kt];if(!Pt)throw new Error(kt+" units is invalid");return bt*Pt}s.radiansToLength=Oe;function Ue(bt,kt){kt===void 0&&(kt="kilometers");var Pt=s.factors[kt];if(!Pt)throw new Error(kt+" units is invalid");return bt/Pt}s.lengthToRadians=Ue;function mn(bt,kt){return qt(Ue(bt,kt))}s.lengthToDegrees=mn;function Rt(bt){var kt=bt%360;return kt<0&&(kt+=360),kt}s.bearingToAzimuth=Rt;function qt(bt){var kt=bt%(2*Math.PI);return kt*180/Math.PI}s.radiansToDegrees=qt;function Yt(bt){var kt=bt%360;return kt*Math.PI/180}s.degreesToRadians=Yt;function ye(bt,kt,Pt){if(kt===void 0&&(kt="kilometers"),Pt===void 0&&(Pt="kilometers"),!(bt>=0))throw new Error("length must be a positive number");return Oe(Ue(bt,kt),Pt)}s.convertLength=ye;function se(bt,kt,Pt){if(kt===void 0&&(kt="meters"),Pt===void 0&&(Pt="kilometers"),!(bt>=0))throw new Error("area must be a positive number");var Wt=s.areaFactors[kt];if(!Wt)throw new Error("invalid original units");var Vt=s.areaFactors[Pt];if(!Vt)throw new Error("invalid final units");return bt/Wt*Vt}s.convertArea=se;function ge(bt){return!isNaN(bt)&&bt!==null&&!Array.isArray(bt)}s.isNumber=ge;function X(bt){return!!bt&&bt.constructor===Object}s.isObject=X;function st(bt){if(!bt)throw new Error("bbox is required");if(!Array.isArray(bt))throw new Error("bbox must be an Array");if(bt.length!==4&&bt.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");bt.forEach(function(kt){if(!ge(kt))throw new Error("bbox must only contain numbers")})}s.validateBBox=st;function xt(bt){if(!bt)throw new Error("id is required");if(["string","number"].indexOf(typeof bt)===-1)throw new Error("id must be a number or a string")}s.validateId=xt}),oo=u(s=>{Object.defineProperty(s,"__esModule",{value:!0});var l=xn();function h(qt,Yt,ye){if(qt!==null)for(var se,ge,X,st,xt,bt,kt,Pt=0,Wt=0,Vt,Xt=qt.type,he=Xt==="FeatureCollection",ce=Xt==="Feature",Ae=he?qt.features.length:1,Ke=0;Ke<Ae;Ke++){kt=he?qt.features[Ke].geometry:ce?qt.geometry:qt,Vt=kt?kt.type==="GeometryCollection":!1,xt=Vt?kt.geometries.length:1;for(var Qe=0;Qe<xt;Qe++){var sn=0,Hn=0;if(st=Vt?kt.geometries[Qe]:kt,st!==null){bt=st.coordinates;var Zn=st.type;switch(Pt=ye&&(Zn==="Polygon"||Zn==="MultiPolygon")?1:0,Zn){case null:break;case"Point":if(Yt(bt,Wt,Ke,sn,Hn)===!1)return!1;Wt++,sn++;break;case"LineString":case"MultiPoint":for(se=0;se<bt.length;se++){if(Yt(bt[se],Wt,Ke,sn,Hn)===!1)return!1;Wt++,Zn==="MultiPoint"&&sn++}Zn==="LineString"&&sn++;break;case"Polygon":case"MultiLineString":for(se=0;se<bt.length;se++){for(ge=0;ge<bt[se].length-Pt;ge++){if(Yt(bt[se][ge],Wt,Ke,sn,Hn)===!1)return!1;Wt++}Zn==="MultiLineString"&&sn++,Zn==="Polygon"&&Hn++}Zn==="Polygon"&&sn++;break;case"MultiPolygon":for(se=0;se<bt.length;se++){for(Hn=0,ge=0;ge<bt[se].length;ge++){for(X=0;X<bt[se][ge].length-Pt;X++){if(Yt(bt[se][ge][X],Wt,Ke,sn,Hn)===!1)return!1;Wt++}Hn++}sn++}break;case"GeometryCollection":for(se=0;se<st.geometries.length;se++)if(h(st.geometries[se],Yt,ye)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function g(qt,Yt,ye,se){var ge=ye;return h(qt,function(X,st,xt,bt,kt){st===0&&ye===void 0?ge=X:ge=Yt(ge,X,st,xt,bt,kt)},se),ge}function y(qt,Yt){var ye;switch(qt.type){case"FeatureCollection":for(ye=0;ye<qt.features.length&&Yt(qt.features[ye].properties,ye)!==!1;ye++);break;case"Feature":Yt(qt.properties,0);break}}function k(qt,Yt,ye){var se=ye;return y(qt,function(ge,X){X===0&&ye===void 0?se=ge:se=Yt(se,ge,X)}),se}function T(qt,Yt){if(qt.type==="Feature")Yt(qt,0);else if(qt.type==="FeatureCollection")for(var ye=0;ye<qt.features.length&&Yt(qt.features[ye],ye)!==!1;ye++);}function N(qt,Yt,ye){var se=ye;return T(qt,function(ge,X){X===0&&ye===void 0?se=ge:se=Yt(se,ge,X)}),se}function G(qt){var Yt=[];return h(qt,function(ye){Yt.push(ye)}),Yt}function it(qt,Yt){var ye,se,ge,X,st,xt,bt,kt,Pt,Wt,Vt=0,Xt=qt.type==="FeatureCollection",he=qt.type==="Feature",ce=Xt?qt.features.length:1;for(ye=0;ye<ce;ye++){for(xt=Xt?qt.features[ye].geometry:he?qt.geometry:qt,kt=Xt?qt.features[ye].properties:he?qt.properties:{},Pt=Xt?qt.features[ye].bbox:he?qt.bbox:void 0,Wt=Xt?qt.features[ye].id:he?qt.id:void 0,bt=xt?xt.type==="GeometryCollection":!1,st=bt?xt.geometries.length:1,ge=0;ge<st;ge++){if(X=bt?xt.geometries[ge]:xt,X===null){if(Yt(null,Vt,kt,Pt,Wt)===!1)return!1;continue}switch(X.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(Yt(X,Vt,kt,Pt,Wt)===!1)return!1;break}case"GeometryCollection":{for(se=0;se<X.geometries.length;se++)if(Yt(X.geometries[se],Vt,kt,Pt,Wt)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}Vt++}}function It(qt,Yt,ye){var se=ye;return it(qt,function(ge,X,st,xt,bt){X===0&&ye===void 0?se=ge:se=Yt(se,ge,X,st,xt,bt)}),se}function Bt(qt,Yt){it(qt,function(ye,se,ge,X,st){var xt=ye===null?null:ye.type;switch(xt){case null:case"Point":case"LineString":case"Polygon":return Yt(l.feature(ye,ge,{bbox:X,id:st}),se,0)===!1?!1:void 0}var bt;switch(xt){case"MultiPoint":bt="Point";break;case"MultiLineString":bt="LineString";break;case"MultiPolygon":bt="Polygon";break}for(var kt=0;kt<ye.coordinates.length;kt++){var Pt=ye.coordinates[kt],Wt={type:bt,coordinates:Pt};if(Yt(l.feature(Wt,ge),se,kt)===!1)return!1}})}function ee(qt,Yt,ye){var se=ye;return Bt(qt,function(ge,X,st){X===0&&st===0&&ye===void 0?se=ge:se=Yt(se,ge,X,st)}),se}function de(qt,Yt){Bt(qt,function(ye,se,ge){var X=0;if(ye.geometry){var st=ye.geometry.type;if(!(st==="Point"||st==="MultiPoint")){var xt,bt=0,kt=0,Pt=0;if(h(ye,function(Wt,Vt,Xt,he,ce){if(xt===void 0||se>bt||he>kt||ce>Pt){xt=Wt,bt=se,kt=he,Pt=ce,X=0;return}var Ae=l.lineString([xt,Wt],ye.properties);if(Yt(Ae,se,ge,ce,X)===!1)return!1;X++,xt=Wt})===!1)return!1}}})}function Pe(qt,Yt,ye){var se=ye,ge=!1;return de(qt,function(X,st,xt,bt,kt){ge===!1&&ye===void 0?se=X:se=Yt(se,X,st,xt,bt,kt),ge=!0}),se}function Oe(qt,Yt){if(!qt)throw new Error("geojson is required");Bt(qt,function(ye,se,ge){if(ye.geometry!==null){var X=ye.geometry.type,st=ye.geometry.coordinates;switch(X){case"LineString":if(Yt(ye,se,ge,0,0)===!1)return!1;break;case"Polygon":for(var xt=0;xt<st.length;xt++)if(Yt(l.lineString(st[xt],ye.properties),se,ge,xt)===!1)return!1;break}}})}function Ue(qt,Yt,ye){var se=ye;return Oe(qt,function(ge,X,st,xt){X===0&&ye===void 0?se=ge:se=Yt(se,ge,X,st,xt)}),se}function mn(qt,Yt){if(Yt=Yt||{},!l.isObject(Yt))throw new Error("options is invalid");var ye=Yt.featureIndex||0,se=Yt.multiFeatureIndex||0,ge=Yt.geometryIndex||0,X=Yt.segmentIndex||0,st=Yt.properties,xt;switch(qt.type){case"FeatureCollection":ye<0&&(ye=qt.features.length+ye),st=st||qt.features[ye].properties,xt=qt.features[ye].geometry;break;case"Feature":st=st||qt.properties,xt=qt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":xt=qt;break;default:throw new Error("geojson is invalid")}if(xt===null)return null;var bt=xt.coordinates;switch(xt.type){case"Point":case"MultiPoint":return null;case"LineString":return X<0&&(X=bt.length+X-1),l.lineString([bt[X],bt[X+1]],st,Yt);case"Polygon":return ge<0&&(ge=bt.length+ge),X<0&&(X=bt[ge].length+X-1),l.lineString([bt[ge][X],bt[ge][X+1]],st,Yt);case"MultiLineString":return se<0&&(se=bt.length+se),X<0&&(X=bt[se].length+X-1),l.lineString([bt[se][X],bt[se][X+1]],st,Yt);case"MultiPolygon":return se<0&&(se=bt.length+se),ge<0&&(ge=bt[se].length+ge),X<0&&(X=bt[se][ge].length-X-1),l.lineString([bt[se][ge][X],bt[se][ge][X+1]],st,Yt)}throw new Error("geojson is invalid")}function Rt(qt,Yt){if(Yt=Yt||{},!l.isObject(Yt))throw new Error("options is invalid");var ye=Yt.featureIndex||0,se=Yt.multiFeatureIndex||0,ge=Yt.geometryIndex||0,X=Yt.coordIndex||0,st=Yt.properties,xt;switch(qt.type){case"FeatureCollection":ye<0&&(ye=qt.features.length+ye),st=st||qt.features[ye].properties,xt=qt.features[ye].geometry;break;case"Feature":st=st||qt.properties,xt=qt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":xt=qt;break;default:throw new Error("geojson is invalid")}if(xt===null)return null;var bt=xt.coordinates;switch(xt.type){case"Point":return l.point(bt,st,Yt);case"MultiPoint":return se<0&&(se=bt.length+se),l.point(bt[se],st,Yt);case"LineString":return X<0&&(X=bt.length+X),l.point(bt[X],st,Yt);case"Polygon":return ge<0&&(ge=bt.length+ge),X<0&&(X=bt[ge].length+X),l.point(bt[ge][X],st,Yt);case"MultiLineString":return se<0&&(se=bt.length+se),X<0&&(X=bt[se].length+X),l.point(bt[se][X],st,Yt);case"MultiPolygon":return se<0&&(se=bt.length+se),ge<0&&(ge=bt[se].length+ge),X<0&&(X=bt[se][ge].length-X),l.point(bt[se][ge][X],st,Yt)}throw new Error("geojson is invalid")}s.coordAll=G,s.coordEach=h,s.coordReduce=g,s.featureEach=T,s.featureReduce=N,s.findPoint=Rt,s.findSegment=mn,s.flattenEach=Bt,s.flattenReduce=ee,s.geomEach=it,s.geomReduce=It,s.lineEach=Oe,s.lineReduce=Ue,s.propEach=y,s.propReduce=k,s.segmentEach=de,s.segmentReduce=Pe}),Vs=u(s=>{Object.defineProperty(s,"__esModule",{value:!0});var l=oo();function h(g){var y=[1/0,1/0,-1/0,-1/0];return l.coordEach(g,function(k){y[0]>k[0]&&(y[0]=k[0]),y[1]>k[1]&&(y[1]=k[1]),y[2]<k[0]&&(y[2]=k[0]),y[3]<k[1]&&(y[3]=k[1])}),y}h.default=h,s.default=h}),Cs=u((s,l)=>{var h=jn(),g=xn(),y=oo(),k=Vs().default,T=y.featureEach;y.coordEach,g.polygon;var N=g.featureCollection;function G(it){var It=new h(it);return It.insert=function(Bt){if(Bt.type!=="Feature")throw new Error("invalid feature");return Bt.bbox=Bt.bbox?Bt.bbox:k(Bt),h.prototype.insert.call(this,Bt)},It.load=function(Bt){var ee=[];return Array.isArray(Bt)?Bt.forEach(function(de){if(de.type!=="Feature")throw new Error("invalid features");de.bbox=de.bbox?de.bbox:k(de),ee.push(de)}):T(Bt,function(de){if(de.type!=="Feature")throw new Error("invalid features");de.bbox=de.bbox?de.bbox:k(de),ee.push(de)}),h.prototype.load.call(this,ee)},It.remove=function(Bt,ee){if(Bt.type!=="Feature")throw new Error("invalid feature");return Bt.bbox=Bt.bbox?Bt.bbox:k(Bt),h.prototype.remove.call(this,Bt,ee)},It.clear=function(){return h.prototype.clear.call(this)},It.search=function(Bt){var ee=h.prototype.search.call(this,this.toBBox(Bt));return N(ee)},It.collides=function(Bt){return h.prototype.collides.call(this,this.toBBox(Bt))},It.all=function(){var Bt=h.prototype.all.call(this);return N(Bt)},It.toJSON=function(){return h.prototype.toJSON.call(this)},It.fromJSON=function(Bt){return h.prototype.fromJSON.call(this,Bt)},It.toBBox=function(Bt){var ee;if(Bt.bbox)ee=Bt.bbox;else if(Array.isArray(Bt)&&Bt.length===4)ee=Bt;else if(Array.isArray(Bt)&&Bt.length===6)ee=[Bt[0],Bt[1],Bt[3],Bt[4]];else if(Bt.type==="Feature")ee=k(Bt);else if(Bt.type==="FeatureCollection")ee=k(Bt);else throw new Error("invalid geojson");return{minX:ee[0],minY:ee[1],maxX:ee[2],maxY:ee[3]}},It}l.exports=G,l.exports.default=G});Array.prototype.findIndex=Array.prototype.findIndex||function(s){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof s!="function")throw new TypeError("callback must be a function");for(var l=Object(this),h=l.length>>>0,g=arguments[1],y=0;y<h;y++)if(s.call(g,l[y],y,l))return y;return-1},Array.prototype.find=Array.prototype.find||function(s){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof s!="function")throw new TypeError("callback must be a function");for(var l=Object(this),h=l.length>>>0,g=arguments[1],y=0;y<h;y++){var k=l[y];if(s.call(g,k,y,l))return k}},typeof Object.assign!="function"&&(Object.assign=function(s){if(s==null)throw new TypeError("Cannot convert undefined or null to object");s=Object(s);for(var l=1;l<arguments.length;l++){var h=arguments[l];if(h!=null)for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(s[g]=h[g])}return s}),function(s){s.forEach(function(l){l.hasOwnProperty("remove")||Object.defineProperty(l,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(s,l){if(this==null)throw new TypeError('"this" is null or not defined');var h=Object(this),g=h.length>>>0;if(g===0)return!1;var y=l|0,k=Math.max(y>=0?y:g-Math.abs(y),0);function T(N,G){return N===G||typeof N=="number"&&typeof G=="number"&&isNaN(N)&&isNaN(G)}for(;k<g;){if(T(h[k],s))return!0;k++}return!1}});var Bo={version:"2.18.3"},kn=p(Ui()),$n={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},ao={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex löschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer löschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknüpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Länge",segmentLength:"Segment Länge",area:"Fläche",radius:"Radius",perimeter:"Umfang",height:"Höhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},Vr={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},ni={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},tl={tooltips:{placeMarker:"Adaugă un punct",firstVertex:"Apasă aici pentru a adăuga primul Vertex",continueLine:"Apasă aici pentru a continua desenul",finishLine:"Apasă pe orice obiect pentru a finisa desenul",finishPoly:"Apasă pe primul obiect pentru a finisa",finishRect:"Apasă pentru a finisa",startCircle:"Apasă pentru a desena un cerc",finishCircle:"Apasă pentru a finisa un cerc",placeCircleMarker:"Adaugă un punct"},actions:{finish:"Termină",cancel:"Anulează",removeLastVertex:"Șterge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaugă o bulină",drawPolyButton:"Desenează un poligon",drawLineButton:"Desenează o linie",drawCircleButton:"Desenează un cerc",drawRectButton:"Desenează un dreptunghi",editButton:"Editează straturile",dragButton:"Mută straturile",cutButton:"Taie straturile",deleteButton:"Șterge straturile",drawCircleMarkerButton:"Desenează marcatorul cercului",snappingButton:"Fixați marcatorul glisat pe alte straturi și vârfuri",pinningButton:"Fixați vârfurile partajate împreună",rotateButton:"Rotiți stratul"}},na={tooltips:{placeMarker:"Нажмите, чтобы нанести маркер",firstVertex:"Нажмите, чтобы нанести первый объект",continueLine:"Нажмите, чтобы продолжить рисование",finishLine:"Нажмите любой существующий маркер для завершения",finishPoly:"Выберите первую точку, чтобы закончить",finishRect:"Нажмите, чтобы закончить",startCircle:"Нажмите, чтобы добавить центр круга",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Нажмите, чтобы нанести круговой маркер"},actions:{finish:"Завершить",cancel:"Отменить",removeLastVertex:"Отменить последнее действие"},buttonTitles:{drawMarkerButton:"Добавить маркер",drawPolyButton:"Рисовать полигон",drawLineButton:"Рисовать кривую",drawCircleButton:"Рисовать круг",drawRectButton:"Рисовать прямоугольник",editButton:"Редактировать слой",dragButton:"Перенести слой",cutButton:"Вырезать слой",deleteButton:"Удалить слой",drawCircleMarkerButton:"Добавить круговой маркер",snappingButton:"Привязать перетаскиваемый маркер к другим слоям и вершинам",pinningButton:"Связать общие точки вместе",rotateButton:"Поворот слоя"}},ks={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vértice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del círculo",finishCircle:"Presiona para finalizar el círculo",placeCircleMarker:"Presiona para colocar un marcador de círculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar último vértice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polígono",drawLineButton:"Dibujar Línea",drawCircleButton:"Dibujar Círculo",drawRectButton:"Dibujar Rectángulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Círculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vértices",pinningButton:"Fijar juntos los vértices compartidos",rotateButton:"Rotar capa"}},yr={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beëindigen",finishPoly:"Klik op het eerst punt om te beëindigen",finishRect:"Klik om te beëindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beëindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},Ps={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer à dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"Éditer des calques",dragButton:"Déplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"Épingler ensemble les sommets partagés",rotateButton:"Tourner des calques"}},To={tooltips:{placeMarker:"单击放置标记",firstVertex:"单击放置首个顶点",continueLine:"单击继续绘制",finishLine:"单击任何存在的标记以完成",finishPoly:"单击第一个标记以完成",finishRect:"单击完成",startCircle:"单击放置圆心",finishCircle:"单击完成圆形",placeCircleMarker:"点击放置圆形标记"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最后的顶点"},buttonTitles:{drawMarkerButton:"绘制标记",drawPolyButton:"绘制多边形",drawLineButton:"绘制线段",drawCircleButton:"绘制圆形",drawRectButton:"绘制长方形",editButton:"编辑图层",dragButton:"拖拽图层",cutButton:"剪切图层",deleteButton:"删除图层",drawCircleMarkerButton:"画圆圈标记",snappingButton:"将拖动的标记捕捉到其他图层和顶点",pinningButton:"将共享顶点固定在一起",rotateButton:"旋转图层"}},Hs={tooltips:{placeMarker:"單擊放置標記",firstVertex:"單擊放置第一個頂點",continueLine:"單擊繼續繪製",finishLine:"單擊任何存在的標記以完成",finishPoly:"單擊第一個標記以完成",finishRect:"單擊完成",startCircle:"單擊放置圓心",finishCircle:"單擊完成圓形",placeCircleMarker:"點擊放置圓形標記"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最後一個頂點"},buttonTitles:{drawMarkerButton:"放置標記",drawPolyButton:"繪製多邊形",drawLineButton:"繪製線段",drawCircleButton:"繪製圓形",drawRectButton:"繪製方形",editButton:"編輯圖形",dragButton:"移動圖形",cutButton:"裁切圖形",deleteButton:"刪除圖形",drawCircleMarkerButton:"畫圓圈標記",snappingButton:"將拖動的標記對齊到其他圖層和頂點",pinningButton:"將共享頂點固定在一起",rotateButton:"旋轉圖形"}},Sa={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vértice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do círculo",finishCircle:"Clique para finalizar o círculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover último vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},lo={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vértice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do círculo",finishCircle:"Clique para terminar o círculo",placeCircleMarker:"Clique para colocar marcador de círculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover Último Vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},Ea={tooltips:{placeMarker:"Kliknij, aby umieścić znacznik",firstVertex:"Kliknij, aby umieścić pierwszy wierzchołek",continueLine:"Kliknij, aby kontynuować rysowanie",finishLine:"Kliknij dowolny istniejący znacznik, aby zakończyć",finishPoly:"Kliknij pierwszy znacznik, aby zakończyć",finishRect:"Kliknij, aby zakończyć",startCircle:"Kliknij, aby umieścić środek okręgu",finishCircle:"Kliknij, aby zakończyć okrąg",placeCircleMarker:"Kliknij, aby umieścić znacznik okręgu",placeText:"Kliknij, aby umieścić tekst"},actions:{finish:"Zakończ",cancel:"Anuluj",removeLastVertex:"Usuń ostatni wierzchołek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokąt",drawLineButton:"Rysuj linię",drawCircleButton:"Rysuj okrąg",drawRectButton:"Rysuj prostokąt",editButton:"Edytuj warstwy",dragButton:"Przeciągnij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usuń warstwy",drawCircleMarkerButton:"Rysuj znacznik okrągły",snappingButton:"Przyciągnij przenoszony znacznik do innych warstw i wierzchołków",pinningButton:"Przypnij wspólne wierzchołki razem",rotateButton:"Obróć warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne śledzenie linii"},measurements:{totalLength:"Długość",segmentLength:"Długość odcinka",area:"Obszar",radius:"Promień",perimeter:"Obwód",height:"Wysokość",width:"Szerokość",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},as={tooltips:{placeMarker:"Klicka för att placera markör",firstVertex:"Klicka för att placera första hörnet",continueLine:"Klicka för att fortsätta rita",finishLine:"Klicka på en existerande punkt för att slutföra",finishPoly:"Klicka på den första punkten för att slutföra",finishRect:"Klicka för att slutföra",startCircle:"Klicka för att placera cirkelns centrum",finishCircle:"Klicka för att slutföra cirkeln",placeCircleMarker:"Klicka för att placera cirkelmarkör"},actions:{finish:"Slutför",cancel:"Avbryt",removeLastVertex:"Ta bort sista hörnet"},buttonTitles:{drawMarkerButton:"Rita Markör",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkör",snappingButton:"Snäpp dra markören till andra lager och hörn",pinningButton:"Fäst delade hörn tillsammans",rotateButton:"Rotera lagret"}},Gs={tooltips:{placeMarker:"Κάντε κλικ για να τοποθετήσετε Δείκτη",firstVertex:"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο",continueLine:"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε",finishLine:"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί",finishPoly:"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε",finishRect:"Κάντε κλικ για να τελειώσετε",startCircle:"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου",finishCircle:"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο",placeCircleMarker:"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},actions:{finish:"Τέλος",cancel:"Ακύρωση",removeLastVertex:"Κατάργηση τελευταίου σημείου"},buttonTitles:{drawMarkerButton:"Σχεδίαση Δείκτη",drawPolyButton:"Σχεδίαση Πολυγώνου",drawLineButton:"Σχεδίαση Γραμμής",drawCircleButton:"Σχεδίαση Κύκλου",drawRectButton:"Σχεδίαση Ορθογωνίου",editButton:"Επεξεργασία Επιπέδων",dragButton:"Μεταφορά Επιπέδων",cutButton:"Αποκοπή Επιπέδων",deleteButton:"Κατάργηση Επιπέδων",drawCircleMarkerButton:"Σχεδίαση Κυκλικού Δείκτη",snappingButton:"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές",pinningButton:"Περικοπή κοινών κορυφών μαζί",rotateButton:"Περιστρέψτε το στρώμα"}},uo={tooltips:{placeMarker:"Kattintson a jelölő elhelyezéséhez",firstVertex:"Kattintson az első pont elhelyezéséhez",continueLine:"Kattintson a következő pont elhelyezéséhez",finishLine:"A befejezéshez kattintson egy meglévő pontra",finishPoly:"A befejezéshez kattintson az első pontra",finishRect:"Kattintson a befejezéshez",startCircle:"Kattintson a kör középpontjának elhelyezéséhez",finishCircle:"Kattintson a kör befejezéséhez",placeCircleMarker:"Kattintson a körjelölő elhelyezéséhez"},actions:{finish:"Befejezés",cancel:"Mégse",removeLastVertex:"Utolsó pont eltávolítása"},buttonTitles:{drawMarkerButton:"Jelölő rajzolása",drawPolyButton:"Poligon rajzolása",drawLineButton:"Vonal rajzolása",drawCircleButton:"Kör rajzolása",drawRectButton:"Négyzet rajzolása",editButton:"Elemek szerkesztése",dragButton:"Elemek mozgatása",cutButton:"Elemek vágása",deleteButton:"Elemek törlése",drawCircleMarkerButton:"Kör jelölő rajzolása",snappingButton:"Kapcsolja a jelöltőt másik elemhez vagy ponthoz",pinningButton:"Közös pontok összekötése",rotateButton:"Fólia elforgatása"}},ra={tooltips:{placeMarker:"Tryk for at placere en markør",firstVertex:"Tryk for at placere det første punkt",continueLine:"Tryk for at fortsætte linjen",finishLine:"Tryk på et eksisterende punkt for at afslutte",finishPoly:"Tryk på det første punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkør"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markør",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Træk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkør",snappingButton:"Fastgør trukket markør til andre elementer",pinningButton:"Sammenlæg delte elementer",rotateButton:"Roter laget"}},Br={tooltips:{placeMarker:"Klikk for å plassere punkt",firstVertex:"Klikk for å plassere første punkt",continueLine:"Klikk for å tegne videre",finishLine:"Klikk på et eksisterende punkt for å fullføre",finishPoly:"Klikk første punkt for å fullføre",finishRect:"Klikk for å fullføre",startCircle:"Klikk for å sette sirkel midtpunkt",finishCircle:"Klikk for å fullføre sirkel",placeCircleMarker:"Klikk for å plassere sirkel",placeText:"Klikk for å plassere tekst"},actions:{finish:"Fullfør",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotér objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalér objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Område",radius:"Radius",perimeter:"Omriss",height:"Høyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkør"}},el={tooltips:{placeMarker:"کلیک برای جانمایی نشان",firstVertex:"کلیک برای رسم اولین رأس",continueLine:"کلیک برای ادامه رسم",finishLine:"کلیک روی هر نشان موجود برای پایان",finishPoly:"کلیک روی اولین نشان برای پایان",finishRect:"کلیک برای پایان",startCircle:"کلیک برای رسم مرکز دایره",finishCircle:"کلیک برای پایان رسم دایره",placeCircleMarker:"کلیک برای رسم نشان دایره",placeText:"کلیک برای نوشتن متن"},actions:{finish:"پایان",cancel:"لفو",removeLastVertex:"حذف آخرین رأس"},buttonTitles:{drawMarkerButton:"درج نشان",drawPolyButton:"رسم چندضلعی",drawLineButton:"رسم خط",drawCircleButton:"رسم دایره",drawRectButton:"رسم چهارضلعی",editButton:"ویرایش لایه‌ها",dragButton:"جابجایی لایه‌ها",cutButton:"برش لایه‌ها",deleteButton:"حذف لایه‌ها",drawCircleMarkerButton:"رسم نشان دایره",snappingButton:"نشانگر را به لایه‌ها و رئوس دیگر بکشید",pinningButton:"رئوس مشترک را با هم پین کنید",rotateButton:"چرخش لایه",drawTextButton:"رسم متن",scaleButton:"مقیاس‌گذاری",autoTracingButton:"ردیاب خودکار"},measurements:{totalLength:"طول",segmentLength:"طول بخش",area:"ناحیه",radius:"شعاع",perimeter:"محیط",height:"ارتفاع",width:"عرض",coordinates:"موقعیت",coordinatesMarker:"موقعیت نشان"}},ia={tooltips:{placeMarker:"Натисніть, щоб нанести маркер",firstVertex:"Натисніть, щоб нанести першу вершину",continueLine:"Натисніть, щоб продовжити малювати",finishLine:"Натисніть будь-який існуючий маркер для завершення",finishPoly:"Виберіть перший маркер, щоб завершити",finishRect:"Натисніть, щоб завершити",startCircle:"Натисніть, щоб додати центр кола",finishCircle:"Натисніть, щоб завершити коло",placeCircleMarker:"Натисніть, щоб нанести круговий маркер"},actions:{finish:"Завершити",cancel:"Відмінити",removeLastVertex:"Видалити попередню вершину"},buttonTitles:{drawMarkerButton:"Малювати маркер",drawPolyButton:"Малювати полігон",drawLineButton:"Малювати криву",drawCircleButton:"Малювати коло",drawRectButton:"Малювати прямокутник",editButton:"Редагувати шари",dragButton:"Перенести шари",cutButton:"Вирізати шари",deleteButton:"Видалити шари",drawCircleMarkerButton:"Малювати круговий маркер",snappingButton:"Прив’язати перетягнутий маркер до інших шарів та вершин",pinningButton:"Зв'язати спільні вершини разом",rotateButton:"Повернути шар"}},bn={tooltips:{placeMarker:"İşaretçi yerleştirmek için tıklayın",firstVertex:"İlk tepe noktasını yerleştirmek için tıklayın",continueLine:"Çizime devam etmek için tıklayın",finishLine:"Bitirmek için mevcut herhangi bir işaretçiyi tıklayın",finishPoly:"Bitirmek için ilk işaretçiyi tıklayın",finishRect:"Bitirmek için tıklayın",startCircle:"Daire merkezine yerleştirmek için tıklayın",finishCircle:"Daireyi bitirmek için tıklayın",placeCircleMarker:"Daire işaretçisi yerleştirmek için tıklayın"},actions:{finish:"Bitir",cancel:"İptal",removeLastVertex:"Son köşeyi kaldır"},buttonTitles:{drawMarkerButton:"Çizim İşaretçisi",drawPolyButton:"Çokgenler çiz",drawLineButton:"Çoklu çizgi çiz",drawCircleButton:"Çember çiz",drawRectButton:"Dikdörtgen çiz",editButton:"Katmanları düzenle",dragButton:"Katmanları sürükle",cutButton:"Katmanları kes",deleteButton:"Katmanları kaldır",drawCircleMarkerButton:"Daire işaretçisi çiz",snappingButton:"Sürüklenen işaretçiyi diğer katmanlara ve köşelere yapıştır",pinningButton:"Paylaşılan köşeleri birbirine sabitle",rotateButton:"Katmanı döndür"}},Ln={tooltips:{placeMarker:"Kliknutím vytvoříte značku",firstVertex:"Kliknutím vytvoříte první objekt",continueLine:"Kliknutím pokračujte v kreslení",finishLine:"Kliknutí na libovolnou existující značku pro dokončení",finishPoly:"Vyberte první bod pro dokončení",finishRect:"Klikněte pro dokončení",startCircle:"Kliknutím přidejte střed kruhu",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Kliknutím nastavte poloměr"},actions:{finish:"Dokončit",cancel:"Zrušit",removeLastVertex:"Zrušit poslední akci"},buttonTitles:{drawMarkerButton:"Přidat značku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit křivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdélník",editButton:"Upravit vrstvu",dragButton:"Přeneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Přidat kruhovou značku",snappingButton:"Navázat tažnou značku k dalším vrstvám a vrcholům",pinningButton:"Spojit společné body dohromady",rotateButton:"Otočte vrstvu"}},qi={tooltips:{placeMarker:"クリックしてマーカーを配置",firstVertex:"クリックして最初の頂点を配置",continueLine:"クリックして描画を続ける",finishLine:"任意のマーカーをクリックして終了",finishPoly:"最初のマーカーをクリックして終了",finishRect:"クリックして終了",startCircle:"クリックして円の中心を配置",finishCircle:"クリックして円の描画を終了",placeCircleMarker:"クリックして円マーカーを配置",placeText:"クリックしてテキストを配置"},actions:{finish:"終了",cancel:"キャンセル",removeLastVertex:"最後の頂点を削除"},buttonTitles:{drawMarkerButton:"マーカーを描画",drawPolyButton:"ポリゴンを描画",drawLineButton:"折れ線を描画",drawCircleButton:"円を描画",drawRectButton:"矩形を描画",editButton:"レイヤーを編集",dragButton:"レイヤーをドラッグ",cutButton:"レイヤーを切り取り",deleteButton:"レイヤーを削除",drawCircleMarkerButton:"円マーカーを描画",snappingButton:"ドラッグしたマーカーを他のレイヤーや頂点にスナップする",pinningButton:"共有する頂点を同時に動かす",rotateButton:"レイヤーを回転",drawTextButton:"テキストを描画"}},Rn={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmäisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtämistä",finishLine:"Klikkaa olemassa olevaa merkkiä lopettaaksesi",finishPoly:"Klikkaa ensimmäistä merkkiä lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrän keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrän",placeCircleMarker:"Klikkaa asettaaksesi ympyrämerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirrä merkkejä",drawPolyButton:"Piirrä monikulmioita",drawLineButton:"Piirrä viivoja",drawCircleButton:"Piirrä ympyrä",drawRectButton:"Piirrä neliskulmioita",editButton:"Muokkaa",dragButton:"Siirrä",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirrä ympyrämerkki",snappingButton:"Kiinnitä siirrettävä merkki toisiin muotoihin",pinningButton:"Kiinnitä jaetut muodot yhteen",rotateButton:"Käännä",drawTextButton:"Piirrä tekstiä"}},Aa={tooltips:{placeMarker:"마커 위치를 클릭하세요",firstVertex:"첫번째 꼭지점 위치을 클릭하세요",continueLine:"계속 그리려면 클릭하세요",finishLine:"끝내려면 기존 마커를 클릭하세요",finishPoly:"끝내려면 처음 마커를 클릭하세요",finishRect:"끝내려면 클릭하세요",startCircle:"원의 중심이 될 위치를 클릭하세요",finishCircle:"원을 끝내려면 클릭하세요",placeCircleMarker:"원 마커 위치를 클릭하세요",placeText:"텍스트 위치를 클릭하세요"},actions:{finish:"끝내기",cancel:"취소",removeLastVertex:"마지막 꼭지점 제거"},buttonTitles:{drawMarkerButton:"마커 그리기",drawPolyButton:"다각형 그리기",drawLineButton:"다각선 그리기",drawCircleButton:"원 그리기",drawRectButton:"직사각형 그리기",editButton:"레이어 편집하기",dragButton:"레이어 끌기",cutButton:"레이어 자르기",deleteButton:"레이어 제거하기",drawCircleMarkerButton:"원 마커 그리기",snappingButton:"잡아끈 마커를 다른 레이어 및 꼭지점에 들러붙게 하기",pinningButton:"공유 꼭지점을 함께 찍기",rotateButton:"레이어 회전하기",drawTextButton:"텍스트 그리기"}},sa={tooltips:{placeMarker:"Маркерди жайгаштыруу үчүн басыңыз",firstVertex:"Биринчи чокуну жайгаштырууну үчүн басыңыз",continueLine:"Сүрөт тартууну улантуу үчүн басыңыз",finishLine:"Аяктоо үчүн учурдагы маркерди басыңыз",finishPoly:"Бүтүрүү үчүн биринчи маркерди басыңыз",finishRect:"Бүтүрүү үчүн басыңыз",startCircle:"Айлананын борборун жайгаштырууну үчүн басыңыз",finishCircle:"Айлананы бүтүрүү үчүн басыңыз",placeCircleMarker:"Тегерек маркерди жайгаштыруу үчүн басыңыз",placeText:"Текстти жайгаштыруу үчүн басыңыз"},actions:{finish:"Аягы",cancel:"Жок кылуу",removeLastVertex:"Акыркы чокуну өчүрүү"},buttonTitles:{drawMarkerButton:"Маркерди чизуу",drawPolyButton:"Полигон чизуу",drawLineButton:"Полилиния чизуу",drawCircleButton:"Дайынды чизуу",drawRectButton:"Прямоугольник чизуу",editButton:"Слоопту түзөтүү",dragButton:"Слоопту карап сүйлөү",cutButton:"Слооптун башын кесүү",deleteButton:"Слооптун өчүрүү",drawCircleMarkerButton:"Дайынды маркерди чизуу",snappingButton:"Башка слооптордун жана вертекстердин арасына чекилдөө",pinningButton:"Бөлүшкөн вертекстерди бирге тутуштуруу",rotateButton:"Слооптун өзгөртүү",drawTextButton:"Текст чизуу",scaleButton:"Слооптун өлчөмүн өзгөртүү",autoTracingButton:"Автоматтык тизмеги чизуу"},measurements:{totalLength:"Узундук",segmentLength:"Сегмент узундугу",area:"Аймак",radius:"Радиус",perimeter:"Периметр",height:"Диаметр",width:"Кенчилик",coordinates:"Координаттар",coordinatesMarker:"Маркердин координаттары"}},co=lo,$i={en:$n,de:ao,it:Vr,id:ni,ro:tl,ru:na,es:ks,nl:yr,fr:Ps,pt:co,pt_br:Sa,pt_pt:lo,zh:To,zh_tw:Hs,pl:Ea,sv:as,el:Gs,hu:uo,da:ra,no:Br,fa:el,ua:ia,tr:bn,cz:Ln,ja:qi,fi:Rn,ko:Aa,ky:sa},Ws={_globalEditModeEnabled:!1,enableGlobalEditMode(s){let l={...s};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(h=>{this._isRelevantForEdit(h)&&h.pm.enable(l)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(s=>{s.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(s=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(s)},handleLayerAdditionInGlobalEditMode(){let s=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let l in s){let h=s[l];this._isRelevantForEdit(h)&&h.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:s}){this._addedLayersEdit[L.stamp(s)]=s},_isRelevantForEdit(s){return s.pm&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.allowEditing}},Ma=Ws,No={_globalDragModeEnabled:!1,enableGlobalDragMode(){let s=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},s.forEach(l=>{this._isRelevantForDrag(l)&&l.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let s=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,s.forEach(l=>{l.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let s=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let l in s){let h=s[l];this._isRelevantForDrag(h)&&h.pm.enableLayerDrag()}},_layerAddedDrag({layer:s}){this._addedLayersDrag[L.stamp(s)]=s},_isRelevantForDrag(s){return s.pm&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.draggable}},xr=No,Ri={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(s=>{this._isRelevantForRemoval(s)&&(s.pm.enabled()&&s.pm.disable(),s.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(s=>{s.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(s){let l=s.target;this._isRelevantForRemoval(l)&&!l.pm.dragging()&&(l.removeFrom(this.map.pm._getContainingLayer()),l.remove(),l instanceof L.LayerGroup?(this._fireRemoveLayerGroup(l),this._fireRemoveLayerGroup(this.map,l)):(l.pm._fireRemove(l),l.pm._fireRemove(this.map,l)))},_isRelevantForRemoval(s){return s.pm&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let s=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let l in s){let h=s[l];this._isRelevantForRemoval(h)&&(h.pm.enabled()&&h.pm.disable(),h.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:s}){this._addedLayersRemoval[L.stamp(s)]=s}},Zs=Ri,nl={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(s=>s instanceof L.Polyline).forEach(s=>{this._isRelevantForRotate(s)&&s.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(s=>s instanceof L.Polyline).forEach(s=>{s.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(s){return s.pm&&s instanceof L.Polyline&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let s=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let l in s){let h=s[l];this._isRelevantForRemoval(h)&&h.pm.enableRotate()}},_layerAddedRotate({layer:s}){this._addedLayersRotate[L.stamp(s)]=s}},Do=nl,oa=p(Ui()),ho={_fireDrawStart(s="Draw",l={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},s,l)},_fireDrawEnd(s="Draw",l={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},s,l)},_fireCreate(s,l="Draw",h={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:s,layer:s},l,h)},_fireCenterPlaced(s="Draw",l={}){let h=s==="Draw"?this._layer:void 0,g=s!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:h,layer:g,latlng:this._layer.getLatLng()},s,l)},_fireCut(s,l,h,g="Draw",y={}){this.__fire(s,"pm:cut",{shape:this._shape,layer:l,originalLayer:h},g,y)},_fireEdit(s=this._layer,l="Edit",h={}){this.__fire(s,"pm:edit",{layer:this._layer,shape:this.getShape()},l,h)},_fireEnable(s="Edit",l={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},s,l)},_fireDisable(s="Edit",l={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},s,l)},_fireUpdate(s="Edit",l={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},s,l)},_fireMarkerDragStart(s,l=void 0,h="Edit",g={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:s,shape:this.getShape(),indexPath:l},h,g)},_fireMarkerDrag(s,l=void 0,h="Edit",g={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:s,shape:this.getShape(),indexPath:l},h,g)},_fireMarkerDragEnd(s,l=void 0,h=void 0,g="Edit",y={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:s,shape:this.getShape(),indexPath:l,intersectionReset:h},g,y)},_fireDragStart(s="Edit",l={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},s,l)},_fireDrag(s,l="Edit",h={}){this.__fire(this._layer,"pm:drag",{...s,shape:this.getShape()},l,h)},_fireDragEnd(s="Edit",l={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},s,l)},_fireDragEnable(s="Edit",l={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},s,l)},_fireDragDisable(s="Edit",l={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},s,l)},_fireRemove(s,l=s,h="Edit",g={}){this.__fire(s,"pm:remove",{layer:l,shape:this.getShape()},h,g)},_fireVertexAdded(s,l,h,g="Edit",y={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:s,indexPath:l,latlng:h,shape:this.getShape()},g,y)},_fireVertexRemoved(s,l,h="Edit",g={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:s,indexPath:l,shape:this.getShape()},h,g)},_fireVertexClick(s,l,h="Edit",g={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:s,indexPath:l,shape:this.getShape()},h,g)},_fireIntersect(s,l=this._layer,h="Edit",g={}){this.__fire(l,"pm:intersect",{layer:this._layer,intersection:s,shape:this.getShape()},h,g)},_fireLayerReset(s,l,h="Edit",g={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:s,indexPath:l,shape:this.getShape()},h,g)},_fireChange(s,l="Edit",h={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:s,shape:this.getShape()},l,h)},_fireTextChange(s,l="Edit",h={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:s,shape:this.getShape()},l,h)},_fireTextFocus(s="Edit",l={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},s,l)},_fireTextBlur(s="Edit",l={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},s,l)},_fireSnapDrag(s,l,h="Snapping",g={}){this.__fire(s,"pm:snapdrag",l,h,g)},_fireSnap(s,l,h="Snapping",g={}){this.__fire(s,"pm:snap",l,h,g)},_fireUnsnap(s,l,h="Snapping",g={}){this.__fire(s,"pm:unsnap",l,h,g)},_fireRotationEnable(s,l,h="Rotation",g={}){this.__fire(s,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},h,g)},_fireRotationDisable(s,l="Rotation",h={}){this.__fire(s,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},l,h)},_fireRotationStart(s,l,h="Rotation",g={}){this.__fire(s,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:l},h,g)},_fireRotation(s,l,h,g=this._rotationLayer,y="Rotation",k={}){this.__fire(s,"pm:rotate",{layer:g,helpLayer:this._layer,startAngle:this._startAngle,angle:g.pm.getAngle(),angleDiff:l,oldLatLngs:h,newLatLngs:g.getLatLngs()},y,k)},_fireRotationEnd(s,l,h,g="Rotation",y={}){this.__fire(s,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:l,angle:this._rotationLayer.pm.getAngle(),originLatLngs:h,newLatLngs:this._rotationLayer.getLatLngs()},g,y)},_fireActionClick(s,l,h,g="Toolbar",y={}){this.__fire(this._map,"pm:actionclick",{text:s.text,action:s,btnName:l,button:h},g,y)},_fireButtonClick(s,l,h="Toolbar",g={}){this.__fire(this._map,"pm:buttonclick",{btnName:s,button:l},h,g)},_fireLangChange(s,l,h,g,y="Global",k={}){this.__fire(this.map,"pm:langchange",{oldLang:s,activeLang:l,fallback:h,translations:g},y,k)},_fireGlobalDragModeToggled(s,l="Global",h={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:s,map:this.map},l,h)},_fireGlobalEditModeToggled(s,l="Global",h={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:s,map:this.map},l,h)},_fireGlobalRemovalModeToggled(s,l="Global",h={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:s,map:this.map},l,h)},_fireGlobalCutModeToggled(s="Global",l={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},s,l)},_fireGlobalDrawModeToggled(s="Global",l={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},s,l)},_fireGlobalRotateModeToggled(s="Global",l={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},s,l)},_fireRemoveLayerGroup(s,l=s,h="Edit",g={}){this.__fire(s,"pm:remove",{layer:l,shape:void 0},h,g)},_fireKeyeventEvent(s,l,h,g="Global",y={}){this.__fire(this.map,"pm:keyevent",{event:s,eventType:l,focusOn:h},g,y)},__fire(s,l,h,g,y={}){h=(0,oa.default)(h,y,{source:g}),L.PM.Utils._fireEvent(s,l,h)}},Oo=ho,Ba=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(s){this.map=s,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),s.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(s){let l="document";this.map.getContainer().contains(s.target)&&(l="map");let h={event:s,eventType:s.type,focusOn:l};this._lastEvents[s.type]=h,this._lastEvents.current=h,this.map.pm._fireKeyeventEvent(s,s.type,l)},_onBlur(s){s.altKey=!1;let l={event:s,eventType:s.type,focusOn:"document"};this._lastEvents[s.type]=l,this._lastEvents.current=l},getLastKeyEvent(s="current"){return this._lastEvents[s]},isShiftKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.shiftKey},isAltKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.altKey},isCtrlKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.ctrlKey},isMetaKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.metaKey},getPressedKey(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.key}}),Nn=Ba,Ta=p(Oi());function un(s){let l=L.PM.activeLang;return(0,Ta.default)($i[l],s)||(0,Ta.default)($i.en,s)||s}function fi(s){for(let l=0;l<s.length;l+=1){let h=s[l];if(Array.isArray(h)){if(fi(h))return!0}else if(h!=null&&h!=="")return!0}return!1}function Ro(s){return s.reduce((l,h)=>{if(h.length!==0){let g=Array.isArray(h)?Ro(h):h;Array.isArray(g)?g.length!==0&&l.push(g):l.push(g)}return l},[])}function fo(s,l,h){let g={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:y,b:k,f:T}=g,N=s.lng,G=s.lat,it=h,It=Math.PI,Bt=l*It/180,ee=Math.sin(Bt),de=Math.cos(Bt),Pe=(1-T)*Math.tan(G*It/180),Oe=1/Math.sqrt(1+Pe*Pe),Ue=Pe*Oe,mn=Math.atan2(Pe,de),Rt=Oe*ee,qt=1-Rt*Rt,Yt=qt*(y*y-k*k)/(k*k),ye=1+Yt/16384*(4096+Yt*(-768+Yt*(320-175*Yt))),se=Yt/1024*(256+Yt*(-128+Yt*(74-47*Yt))),ge=it/(k*ye),X=2*Math.PI,st,xt,bt;for(;Math.abs(ge-X)>1e-12;){st=Math.cos(2*mn+ge),xt=Math.sin(ge),bt=Math.cos(ge);let Ae=se*xt*(st+se/4*(bt*(-1+2*st*st)-se/6*st*(-3+4*xt*xt)*(-3+4*st*st)));X=ge,ge=it/(k*ye)+Ae}let kt=Ue*xt-Oe*bt*de,Pt=Math.atan2(Ue*bt+Oe*xt*de,(1-T)*Math.sqrt(Rt*Rt+kt*kt)),Wt=Math.atan2(xt*ee,Oe*bt-Ue*xt*de),Vt=T/16*qt*(4+T*(4-3*qt)),Xt=Wt-(1-Vt)*T*Rt*(ge+Vt*xt*(st+Vt*bt*(-1+2*st*st))),he=N+Xt*180/It,ce=Pt*180/It;return L.latLng(he,ce)}function wi(s,l,h,g,y=!0){let k,T,N,G=[];for(let it=0;it<h;it+=1){if(y)k=it*360/h+g,T=fo(s,k,l),N=L.latLng(T.lng,T.lat);else{let It=s.lat+Math.cos(2*it*Math.PI/h)*l,Bt=s.lng+Math.sin(2*it*Math.PI/h)*l;N=L.latLng(It,Bt)}G.push(N)}return G}function Na(s,l,h){l=(l+360)%360;let g=Math.PI/180,y=180/Math.PI,{R:k}=L.CRS.Earth,T=s.lng*g,N=s.lat*g,G=l*g,it=Math.sin(N),It=Math.cos(N),Bt=Math.cos(h/k),ee=Math.sin(h/k),de=Math.asin(it*Bt+It*ee*Math.cos(G)),Pe=T+Math.atan2(Math.sin(G)*ee*It,Bt-it*Math.sin(de));Pe*=y;let Oe=Pe-360,Ue=Pe<-180?Pe+360:Pe;return Pe=Pe>180?Oe:Ue,L.latLng([de*y,Pe])}function Ss(s,l,h){let g=s.latLngToContainerPoint(l),y=s.latLngToContainerPoint(h),k=Math.atan2(y.y-g.y,y.x-g.x)*180/Math.PI+90;return k+=k<0?360:0,k}function aa(s,l,h,g){let y=Ss(s,l,h);return Na(l,y,g)}function la(s,l,h="asc"){if(!l||Object.keys(l).length===0)return(G,it)=>G-it;let g=Object.keys(l),y,k=g.length-1,T={};for(;k>=0;)y=g[k],T[y.toLowerCase()]=l[y],k-=1;function N(G){if(G instanceof L.Marker)return"Marker";if(G instanceof L.Circle)return"Circle";if(G instanceof L.CircleMarker)return"CircleMarker";if(G instanceof L.Rectangle)return"Rectangle";if(G instanceof L.Polygon)return"Polygon";if(G instanceof L.Polyline)return"Line"}return(G,it)=>{let It,Bt;if(It=N(G.layer).toLowerCase(),Bt=N(it.layer).toLowerCase(),!It||!Bt)return 0;let ee=It in T?T[It]:Number.MAX_SAFE_INTEGER,de=Bt in T?T[Bt]:Number.MAX_SAFE_INTEGER,Pe=0;return ee<de?Pe=-1:ee>de&&(Pe=1),h==="desc"?Pe*-1:Pe}}function Vi(s,l=s.getLatLngs()){return s instanceof L.Polygon?L.polygon(l).getLatLngs():L.polyline(l).getLatLngs()}function ua(s,l){var h,g,y,k;if((g=(h=l.options.crs)==null?void 0:h.projection)!=null&&g.MAX_LATITUDE){let T=(k=(y=l.options.crs)==null?void 0:y.projection)==null?void 0:k.MAX_LATITUDE;s.lat=Math.max(Math.min(T,s.lat),-T)}return s}function Tr(s){return s.options.renderer||s._map&&(s._map._getPaneRenderer(s.options.pane)||s._map.options.renderer||s._map._renderer)||s._renderer}var rl=L.Class.extend({includes:[Ma,xr,Zs,Do,Oo],initialize(s){this.map=s,this.Draw=new L.PM.Draw(s),this.Toolbar=new L.PM.Toolbar(s),this.Keyboard=Nn(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(s)},setLang(s="en",l,h="en"){if(s=s.trim().toLowerCase(),!/^[a-z]{2}$/.test(s)){let y=s.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(y){let k=[`${y[1]}_${y[2]}`,`${y[1]}`];for(let T of k)if($i[T]){s=T;break}}}let g=L.PM.activeLang;l&&($i[s]=(0,kn.default)($i[h],l)),L.PM.activeLang=s,this.map.pm.Toolbar.reinit(),this._fireLangChange(g,s,h,$i[s])},addControls(s){this.Toolbar.addControls(s)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(s="Polygon",l){s==="Poly"&&(s="Polygon"),this.Draw.enable(s,l)},disableDraw(s="Polygon"){s==="Poly"&&(s="Polygon"),this.Draw.disable(s)},setPathOptions(s,l={}){let h=l.ignoreShapes||[],g=l.merge||!1;this.map.pm.Draw.shapes.forEach(y=>{h.indexOf(y)===-1&&this.map.pm.Draw[y].setPathOptions(s,g)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(s){let l=(0,kn.default)(this.globalOptions,s);l.editable&&(l.resizeableCircleMarker=l.editable,delete l.editable);let h=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!l.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),h=!0);let g=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!l.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),g=!0),this.map.pm.Draw.shapes.forEach(y=>{this.map.pm.Draw[y].setOptions(l)}),h&&this.map.pm.Draw.CircleMarker.enable(),g&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(y=>{y.pm.setOptions(l)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=l,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(s=>{s.pm.enabled()&&s.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(s){return this.Draw.Cut.enable(s)},toggleGlobalCutMode(s){return this.Draw.Cut.toggle(s)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(s=!1){let l=L.PM.Utils.findLayers(this.map);if(!s)return l;let h=L.featureGroup();return h._pmTempLayer=!0,l.forEach(g=>{h.addLayer(g)}),h},getGeomanDrawLayers(s=!1){let l=L.PM.Utils.findLayers(this.map).filter(g=>g._drawnByGeoman===!0);if(!s)return l;let h=L.featureGroup();return h._pmTempLayer=!0,l.forEach(g=>{h.addLayer(g)}),h},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(s){this._touchEventCounter===0&&(L.DomEvent.on(s,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(s,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(s){this._touchEventCounter===1&&(L.DomEvent.off(s,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(s,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(s){Tr(this.map)._onMouseMove(this._createMouseEvent("mousemove",s))},_canvasTouchClick(s){let l="";s.type==="touchstart"||s.type==="pointerdown"?l="mousedown":(s.type==="touchend"||s.type==="pointerup"||s.type==="touchcancel"||s.type==="pointercancel")&&(l="mouseup"),l&&Tr(this.map)._onClick(this._createMouseEvent(l,s))},_createMouseEvent(s,l){let h,g=l.touches[0]||l.changedTouches[0];try{h=new MouseEvent(s,{bubbles:l.bubbles,cancelable:l.cancelable,view:l.view,detail:g.detail,screenX:g.screenX,screenY:g.screenY,clientX:g.clientX,clientY:g.clientY,ctrlKey:l.ctrlKey,altKey:l.altKey,shiftKey:l.shiftKey,metaKey:l.metaKey,button:l.button,relatedTarget:l.relatedTarget})}catch{h=document.createEvent("MouseEvents"),h.initMouseEvent(s,l.bubbles,l.cancelable,l.view,g.detail,g.screenX,g.screenY,g.clientX,g.clientY,l.ctrlKey,l.altKey,l.shiftKey,l.metaKey,l.button,l.relatedTarget)}return h}}),Io=rl,Hi=L.Control.extend({includes:[Oo],options:{position:"topleft",disableByOtherButtons:!0},initialize(s){this._button=L.Util.extend({},this.options,s)},onAdd(s){return this._map=s,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let s=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),s?s.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(s){return typeof s=="boolean"?this._button.toggleStatus=s:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(s){s&&s.preventDefault(),!this._button.disabled&&(this._button.onClick(s,{button:this,event:s}),this._clicked(s),this._button.afterClick(s,{button:this,event:s}))},_makeButton(s){let l=this.options.position.indexOf("right")>-1?"pos-right":"",h=L.DomUtil.create("div",`button-container  ${l}`,this._container);s.title&&h.setAttribute("title",s.title);let g=L.DomUtil.create("a","leaflet-buttons-control-button",h);g.setAttribute("role","button"),g.setAttribute("tabindex","0"),g.href="#";let y=L.DomUtil.create("div",`leaflet-pm-actions-container ${l}`,h),k=s.actions,T={cancel:{text:un("actions.cancel"),title:un("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:un("actions.finish"),title:un("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:un("actions.removeLastVertex"),title:un("actions.removeLastVertex"),onClick(){this._map.pm.Draw[s.jsClass]._removeLastVertex()}},finish:{text:un("actions.finish"),title:un("actions.finish"),onClick(G){this._map.pm.Draw[s.jsClass]._finishShape(G)}}};s._preparedActions=k.map(G=>{let it=typeof G=="string"?G:G.name,It;if(T[it])It=T[it];else if(G.text)It=G;else return It;let Bt=L.DomUtil.create("a",`leaflet-pm-action ${l} action-${it}`,y);if(Bt.setAttribute("role","button"),Bt.setAttribute("tabindex","0"),Bt.href="#",It.title&&(Bt.title=It.title),Bt.innerHTML=It.text,L.DomEvent.disableClickPropagation(Bt),L.DomEvent.on(Bt,"click",L.DomEvent.stop),It._node=Bt,!s.disabled&&It.onClick){let ee=de=>{de.preventDefault();let Pe="",{buttons:Oe}=this._map.pm.Toolbar;for(let Ue in Oe)if(Oe[Ue]._button===s){Pe=Ue;break}this._fireActionClick(It,Pe,s)};L.DomEvent.addListener(Bt,"click",ee,this),L.DomEvent.addListener(Bt,"click",It.onClick,this),L.DomEvent.addListener(Bt,"click",()=>this._updateActiveAction(s))}return It}),this._updateActiveAction(s),s.toggleStatus&&L.DomUtil.addClass(h,"active");let N=L.DomUtil.create("div","control-icon",g);return s.iconUrl&&N.setAttribute("src",s.iconUrl),s.className&&L.DomUtil.addClass(N,s.className),L.DomEvent.disableClickPropagation(g),L.DomEvent.on(g,"click",L.DomEvent.stop),s.disabled||(L.DomEvent.addListener(g,"click",this._onBtnClick,this),L.DomEvent.addListener(g,"click",this._triggerClick,this)),s.disabled&&(L.DomUtil.addClass(g,"pm-disabled"),g.setAttribute("aria-disabled","true")),h},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let s="",{buttons:l}=this._map.pm.Toolbar;for(let h in l)if(l[h]._button===this._button){s=h;break}this._fireButtonClick(s,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let s="pm-disabled",l=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(l,s),l.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(l,s),l.setAttribute("aria-disabled","false"))},_updateActiveAction(s){var l;(l=s._preparedActions)==null||l.forEach(h=>{h!=null&&h._node&&(h.isActive&&h.isActive.call(this)?L.DomUtil.addClass(h._node,"active-action"):L.DomUtil.removeClass(h._node,"active-action"))})}}),ca=Hi;L.Control.PMButton=ca;var Da=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(s){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(s)},reinit(){let s=this.isVisible;this.removeControls(),this._defineButtons(),s&&this.addControls()},init(s){this.map=s,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(s){let l=`${s}Container`;return this[l]||(this[l]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${s} leaflet-bar leaflet-control`)),this[l]},getButtons(){return this.buttons},addControls(s=this.options){typeof s.editPolygon<"u"&&(s.editMode=s.editPolygon),typeof s.deleteLayer<"u"&&(s.removalMode=s.deleteLayer),L.Util.setOptions(this,s),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let s=this.getButtons(),l={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let h in s){let g=s[h];L.Util.setOptions(g,{className:l.geomanIcons[h]})}},removeControls(){let s=this.getButtons();for(let l in s)s[l].remove();this.isVisible=!1},toggleControls(s=this.options){this.isVisible?this.removeControls():this.addControls(s)},_addButton(s,l){return this.buttons[s]=l,this.options[s]=!!this.options[s]||!1,this.buttons[s]},triggerClickOnToggledButtons(s){for(let l in this.buttons){let h=this.buttons[l];h._button.disableByOtherButtons&&h!==s&&h.toggled()&&h._triggerClick()}},toggleButton(s,l,h=!0){s==="editPolygon"&&(s="editMode"),s==="deleteLayer"&&(s="removalMode");let g=s;return h&&this.triggerClickOnToggledButtons(this.buttons[g]),this.buttons[g]?this.buttons[g].toggle(l):!1},_defineButtons(){let s={className:"control-icon leaflet-pm-icon-marker",title:un("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(ee,de)=>{this.map.pm.Draw[de.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},l={title:un("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(ee,de)=>{this.map.pm.Draw[de.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},h={className:"control-icon leaflet-pm-icon-polyline",title:un("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(ee,de)=>{this.map.pm.Draw[de.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},g={title:un("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(ee,de)=>{this.map.pm.Draw[de.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},y={title:un("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(ee,de)=>{this.map.pm.Draw[de.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},k={title:un("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(ee,de)=>{this.map.pm.Draw[de.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},T={title:un("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},N={title:un("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},G={title:un("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(ee,de)=>{this.map.pm.Draw[de.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},it={title:un("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},It={title:un("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Bt={className:"control-icon leaflet-pm-icon-text",title:un("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(ee,de)=>{this.map.pm.Draw[de.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(s)),this._addButton("drawPolyline",new L.Control.PMButton(h)),this._addButton("drawRectangle",new L.Control.PMButton(k)),this._addButton("drawPolygon",new L.Control.PMButton(l)),this._addButton("drawCircle",new L.Control.PMButton(g)),this._addButton("drawCircleMarker",new L.Control.PMButton(y)),this._addButton("drawText",new L.Control.PMButton(Bt)),this._addButton("editMode",new L.Control.PMButton(T)),this._addButton("dragMode",new L.Control.PMButton(N)),this._addButton("cutPolygon",new L.Control.PMButton(G)),this._addButton("removalMode",new L.Control.PMButton(it)),this._addButton("rotateMode",new L.Control.PMButton(It))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let s=this.getButtons(),l=[];this.options.drawControls===!1&&(l=l.concat(Object.keys(s).filter(h=>!s[h]._button.tool))),this.options.editControls===!1&&(l=l.concat(Object.keys(s).filter(h=>s[h]._button.tool==="edit"))),this.options.optionsControls===!1&&(l=l.concat(Object.keys(s).filter(h=>s[h]._button.tool==="options"))),this.options.customControls===!1&&(l=l.concat(Object.keys(s).filter(h=>s[h]._button.tool==="custom")));for(let h in s)if(this.options[h]&&l.indexOf(h)===-1){let g=s[h]._button.tool;g||(g="draw"),s[h].setPosition(this._getBtnPosition(g)),s[h].addTo(this.map)}},_getBtnPosition(s){return this.options.positions&&this.options.positions[s]?this.options.positions[s]:this.options.position},setBlockPosition(s,l){this.options.positions[s]=l,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(s,l){if(l)typeof l!="object"&&(l={name:l});else throw new TypeError("Button has no name");let h=this._btnNameMapping(s);if(!l.name)throw new TypeError("Button has no name");if(this.buttons[l.name])throw new TypeError("Button with this name already exists");let g=this.map.pm.Draw.createNewDrawInstance(l.name,h);l={...this.buttons[h]._button,...l};let y=this.createCustomControl(l);return{drawInstance:g,control:y}},createCustomControl(s){if(!s.name)throw new TypeError("Button has no name");if(this.buttons[s.name])throw new TypeError("Button with this name already exists");s.onClick||(s.onClick=()=>{}),s.afterClick||(s.afterClick=()=>{}),s.toggle!==!1&&(s.toggle=!0),s.block&&(s.block=s.block.toLowerCase()),(!s.block||s.block==="draw")&&(s.block=""),s.className?s.className.indexOf("control-icon")===-1&&(s.className=`control-icon ${s.className}`):s.className="control-icon";let l={tool:s.block,className:s.className,title:s.title||"",jsClass:s.name,onClick:s.onClick,afterClick:s.afterClick,doToggle:s.toggle,toggleStatus:!1,disableOtherButtons:s.disableOtherButtons??!0,disableByOtherButtons:s.disableByOtherButtons??!0,cssToggle:s.toggle,position:this.options.position,actions:s.actions||[],disabled:!!s.disabled};this.options[s.name]!==!1&&(this.options[s.name]=!0);let h=this._addButton(s.name,new L.Control.PMButton(l));return this.changeControlOrder(),h},controlExists(s){return!!this.getButton(s)},getButton(s){return this.getButtons()[s]},getButtonsInBlock(s){let l={};if(s)for(let h in this.getButtons()){let g=this.getButtons()[h];(g._button.tool===s||s==="draw"&&!g._button.tool)&&(l[h]=g)}return l},changeControlOrder(s=[]){let l=this._shapeMapping(),h=[];s.forEach(k=>{l[k]?h.push(l[k]):h.push(k)});let g=this.getButtons(),y={};h.forEach(k=>{g[k]&&(y[k]=g[k])}),Object.keys(g).filter(k=>!g[k]._button.tool||g[k]._button.tool==="draw").forEach(k=>{h.indexOf(k)===-1&&(y[k]=g[k])}),Object.keys(g).filter(k=>g[k]._button.tool==="edit").forEach(k=>{h.indexOf(k)===-1&&(y[k]=g[k])}),Object.keys(g).filter(k=>g[k]._button.tool==="options").forEach(k=>{h.indexOf(k)===-1&&(y[k]=g[k])}),Object.keys(g).filter(k=>g[k]._button.tool==="custom").forEach(k=>{h.indexOf(k)===-1&&(y[k]=g[k])}),Object.keys(g).forEach(k=>{h.indexOf(k)===-1&&(y[k]=g[k])}),this.map.pm.Toolbar.buttons=y,this._showHideButtons()},getControlOrder(){let s=this.getButtons(),l=[];for(let h in s)l.push(h);return l},changeActionsOfControl(s,l){let h=this._btnNameMapping(s);if(!h)throw new TypeError("No name passed");if(!l)throw new TypeError("No actions passed");if(!this.buttons[h])throw new TypeError("Button with this name not exists");this.buttons[h]._button.actions=l,this.changeControlOrder()},setButtonDisabled(s,l){let h=this._btnNameMapping(s);l?this.buttons[h].disable():this.buttons[h].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(s){let l=this._shapeMapping();return l[s]?l[s]:s}}),Oa=Da,ha=p(Ui()),po={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(s){s.forEach(l=>{if(Array.isArray(l)){this._assignEvents(l);return}l.off("drag",this._handleSnapping,this),l.on("drag",this._handleSnapping,this),l.off("dragend",this._cleanupSnapping,this),l.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(s){if(s){let l=s.target;l._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(l=>{l.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(s){var N,G,it;let l=s.target;if(l._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((N=s==null?void 0:s.originalEvent)==null?void 0:N.altKey)||((it=(G=this._map)==null?void 0:G.pm)==null?void 0:it.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let h=this._calcClosestLayer(l.getLatLng(),this._snapList);if(Object.keys(h).length===0)return!1;let g=h.layer instanceof L.Marker||h.layer instanceof L.CircleMarker||!this.options.snapSegment,y;g?y=h.latlng:y=this._checkPrioritiySnapping(h);let k=this.options.snapDistance,T={marker:l,shape:this._shape,snapLatLng:y,segment:h.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:h.layer,distance:h.distance};if(this._fireSnapDrag(T.marker,T),this._fireSnapDrag(this._layer,T),h.distance<k){l._orgLatLng=l.getLatLng(),l.setLatLng(y),l._snapped=!0,l._snapInfo=T;let It=()=>{this._snapLatLng=y,this._fireSnap(l,T),this._fireSnap(this._layer,T)},Bt=this._snapLatLng||{},ee=y||{};(Bt.lat!==ee.lat||Bt.lng!==ee.lng)&&It()}else this._snapLatLng&&(this._unsnap(T),l._snapped=!1,l._snapInfo=void 0,this._fireUnsnap(T.marker,T),this._fireUnsnap(this._layer,T));return!0},_createSnapList(){let s=[],l=[],h=this._map;h.off("layerremove",this._handleSnapLayerRemoval,this),h.on("layerremove",this._handleSnapLayerRemoval,this),h.eachLayer(g=>{if((g instanceof L.Polyline||g instanceof L.Marker||g instanceof L.CircleMarker||g instanceof L.ImageOverlay)&&g.options.snapIgnore!==!0){if(g.options.snapIgnore===void 0&&(!L.PM.optIn&&g.options.pmIgnore===!0||L.PM.optIn&&g.options.pmIgnore!==!1))return;(g instanceof L.Circle||g instanceof L.CircleMarker)&&g.pm&&g.pm._hiddenPolyCircle?s.push(g.pm._hiddenPolyCircle):g instanceof L.ImageOverlay&&(g=L.rectangle(g.getBounds())),s.push(g);let y=L.polyline([],{color:"red",pmIgnore:!0});y._pmTempLayer=!0,l.push(y),(g instanceof L.Circle||g instanceof L.CircleMarker)&&l.push(y)}}),s=s.filter(g=>this._layer!==g),s=s.filter(g=>g._latlng||g._latlngs&&fi(g._latlngs)),s=s.filter(g=>!g._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let g=L.polyline([],{color:"red",pmIgnore:!0});g._pmTempLayer=!0,l.push(g)}),this._snapList=s.concat(this._otherSnapLayers)):this._snapList=s,this.debugIndicatorLines=l},_handleSnapLayerRemoval({layer:s}){if(!s._leaflet_id)return;let l=this._snapList.findIndex(h=>h._leaflet_id===s._leaflet_id);l>-1&&this._snapList.splice(l,1)},_calcClosestLayer(s,l){return this._calcClosestLayers(s,l,1)[0]},_calcClosestLayers(s,l,h=1){let g=[],y={};l.forEach((T,N)=>{var it;if(T._parentCopy&&T._parentCopy===this._layer||((it=T.getLatLngs)==null?void 0:it.call(T).flat(5).length)<2)return;let G=this._calcLayerDistances(s,T);if(G.distance=Math.floor(G.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[N]){let It=L.polyline([],{color:"red",pmIgnore:!0});It._pmTempLayer=!0,this.debugIndicatorLines[N]=It}this.debugIndicatorLines[N].setLatLngs([s,G.latlng])}h===1&&(y.distance===void 0||G.distance-5<=y.distance)?(G.distance+5<y.distance&&(g=[]),y=G,y.layer=T,g.push(y)):h!==1&&(y={},y=G,y.layer=T,g.push(y))}),h!==1&&(g=g.sort((T,N)=>T.distance-N.distance)),h===-1&&(h=g.length);let k=this._getClosestLayerByPriority(g,h);return L.Util.isArray(k)?k:[k]},_calcLayerDistances(s,l){let h=this._map,g=l instanceof L.Marker||l instanceof L.CircleMarker,y=l instanceof L.Polygon,k=s;if(g){let T=l.getLatLng();return{latlng:{...T},distance:this._getDistance(h,T,k)}}return this._calcLatLngDistances(k,l.getLatLngs(),h,y)},_calcLatLngDistances(s,l,h,g=!1){let y,k,T,N=G=>{G.forEach((it,It)=>{if(Array.isArray(it)){N(it);return}if(this.options.snapSegment){let Bt=it,ee;g?ee=It+1===G.length?0:It+1:ee=It+1===G.length?void 0:It+1;let de=G[ee];if(de){let Pe=this._getDistanceToSegment(h,s,Bt,de);(k===void 0||Pe<k)&&(k=Pe,T=[Bt,de])}}else{let Bt=this._getDistance(h,s,it);(k===void 0||Bt<k)&&(k=Bt,y=it)}})};return N(l),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(h,s,T[0],T[1])},segment:T,distance:k}:{latlng:y,distance:k}},_getClosestLayerByPriority(s,l=1){s=s.sort((T,N)=>T._leaflet_id-N._leaflet_id);let h=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],g=this._map.pm.globalOptions.snappingOrder||[],y=0,k={};return g.concat(h).forEach(T=>{k[T]||(y+=1,k[T]=y)}),s.sort(la("instanceofShape",k)),l===1?s[0]||{}:s.slice(0,l)},_checkPrioritiySnapping(s){let l=this._map,h=s.segment[0],g=s.segment[1],y=s.latlng,k=y;if(this.options.snapVertex){let T=this._getDistance(l,h,y),N=this._getDistance(l,g,y),G=T<N?h:g,it=T<N?T:N;if(this.options.snapMiddle){let Bt=L.PM.Utils.calcMiddleLatLng(l,h,g),ee=this._getDistance(l,Bt,y);ee<T&&ee<N&&(G=Bt,it=ee)}let It=this.options.snapDistance;it<It&&(k=G)}return{...k}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(s,l,h,g){let y=s.getMaxZoom();y===1/0&&(y=s.getZoom());let k=s.project(l,y),T=s.project(h,y),N=s.project(g,y),G=L.LineUtil.closestPointOnSegment(k,T,N);return s.unproject(G,y)},_getDistanceToSegment(s,l,h,g){let y=s.latLngToContainerPoint(l),k=s.latLngToContainerPoint(h),T=s.latLngToContainerPoint(g);return L.LineUtil.pointToSegmentDistance(y,k,T)},_getDistance(s,l,h){return s.latLngToContainerPoint(l).distanceTo(s.latLngToContainerPoint(h))}},Fo=po,go=L.Class.extend({includes:[Fo,Oo],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(s){L.Util.setOptions(this,s),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(s){let l=new L.Icon.Default;l.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=l,this._map=s,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(h=>{this[h]=new L.PM.Draw[h](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(s,l=!1){l?this.options.pathOptions=(0,ha.default)(this.options.pathOptions,s):this.options.pathOptions=s},getShapes(){return this.shapes},getShape(){return this._shape},enable(s,l){if(!s)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[s].enable(l)},disable(){this.shapes.forEach(s=>{this[s].disable()})},addControls(){this.shapes.forEach(s=>{this[s].addButton()})},getActiveShape(){let s;return this.shapes.forEach(l=>{this[l]._enabled&&(s=l)}),s},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let s=[];this._map.eachLayer(l=>{(l instanceof L.Polyline||l instanceof L.Marker||l instanceof L.Circle||l instanceof L.CircleMarker||l instanceof L.ImageOverlay)&&(l._pmTempLayer||s.push(l))}),this._enabled?s.forEach(l=>{L.PM.Utils.disablePopup(l)}):s.forEach(l=>{L.PM.Utils.enablePopup(l)})},createNewDrawInstance(s,l){let h=this._getShapeFromBtnName(l);if(this[s])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[h])throw new TypeError(`There is no class L.PM.Draw.${h}`);return this[s]=new L.PM.Draw[h](this._map),this[s].toolbarButtonName=s,this[s]._shape=s,this.shapes.push(s),this[l]&&this[s].setOptions(this[l].options),this[s].setOptions(this[s].options),this[s]},_getShapeFromBtnName(s){let l={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return l[s]?l[s]:this[s]?this[s]._shape:s},_finishLayer(s){s.pm&&(s.pm.setOptions(this.options),s.pm._shape=this._shape,s.pm._map=this._map),this._addDrawnLayerProp(s)},_addDrawnLayerProp(s){s._drawnByGeoman=!0},_setPane(s,l){l==="layerPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":l==="vertexPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":l==="markerPane"&&(s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),Lr=go;Lr.Marker=Lr.extend({initialize(s){this._map=s,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(s){L.Util.setOptions(this,s),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(un("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(l=>{this.isRelevantMarker(l)&&l.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},isRelevantMarker(s){return s instanceof L.Marker&&s.pm&&!s._pmTempLayer&&!s.pm._initTextMarker},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let l=s;l.target=this._hintMarker,this._handleSnapping(l)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(s){if(!s.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let l=this._hintMarker.getLatLng(),h=new L.Marker(l,this.options.markerStyle);this._setPane(h,"markerPane"),this._finishLayer(h),h.pm||(h.options.draggable=!1),h.addTo(this._map.pm._getContainingLayer()),h.pm&&this.options.markerEditable?h.pm.enable():h.dragging&&h.dragging.disable(),this._fireCreate(h),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var s,l;(s=this.options.markerStyle)!=null&&s.icon&&((l=this._hintMarker)==null||l.setIcon(this.options.markerStyle.icon))}});var C=63710088e-1,nt={centimeters:C*100,centimetres:C*100,degrees:C/111325,feet:C*3.28084,inches:C*39.37,kilometers:C/1e3,kilometres:C/1e3,meters:C,metres:C,miles:C/1609.344,millimeters:C*1e3,millimetres:C*1e3,nauticalmiles:C/1852,radians:1,yards:C*1.0936};function Ot(s,l,h){h===void 0&&(h={});var g={type:"Feature"};return(h.id===0||h.id)&&(g.id=h.id),h.bbox&&(g.bbox=h.bbox),g.properties=l||{},g.geometry=s,g}function Gt(s,l,h){if(h===void 0&&(h={}),!s)throw new Error("coordinates is required");if(!Array.isArray(s))throw new Error("coordinates must be an Array");if(s.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!vn(s[0])||!vn(s[1]))throw new Error("coordinates must contain numbers");var g={type:"Point",coordinates:s};return Ot(g,l,h)}function le(s,l,h){if(h===void 0&&(h={}),s.length<2)throw new Error("coordinates must be an array of two or more positions");var g={type:"LineString",coordinates:s};return Ot(g,l,h)}function be(s,l){l===void 0&&(l={});var h={type:"FeatureCollection"};return l.id&&(h.id=l.id),l.bbox&&(h.bbox=l.bbox),h.features=s,h}function Te(s,l){l===void 0&&(l="kilometers");var h=nt[l];if(!h)throw new Error(l+" units is invalid");return s*h}function Ge(s,l){l===void 0&&(l="kilometers");var h=nt[l];if(!h)throw new Error(l+" units is invalid");return s/h}function Je(s){var l=s%(2*Math.PI);return l*180/Math.PI}function an(s){var l=s%360;return l*Math.PI/180}function vn(s){return!isNaN(s)&&s!==null&&!Array.isArray(s)}function Dn(s){var l,h,g={type:"FeatureCollection",features:[]};if(s.type==="Feature"?h=s.geometry:h=s,h.type==="LineString")l=[h.coordinates];else if(h.type==="MultiLineString")l=h.coordinates;else if(h.type==="MultiPolygon")l=[].concat.apply([],h.coordinates);else if(h.type==="Polygon")l=h.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return l.forEach(function(y){l.forEach(function(k){for(var T=0;T<y.length-1;T++)for(var N=T;N<k.length-1;N++)if(!(y===k&&(Math.abs(T-N)===1||T===0&&N===y.length-2&&y[T][0]===y[y.length-1][0]&&y[T][1]===y[y.length-1][1]))){var G=lr(y[T][0],y[T][1],y[T+1][0],y[T+1][1],k[N][0],k[N][1],k[N+1][0],k[N+1][1]);G&&g.features.push(Gt([G[0],G[1]]))}})}),g}function lr(s,l,h,g,y,k,T,N){var G,it,It,Bt,ee,de={x:null,y:null,onLine1:!1,onLine2:!1};return G=(N-k)*(h-s)-(T-y)*(g-l),G===0?de.x!==null&&de.y!==null?de:!1:(it=l-k,It=s-y,Bt=(T-y)*it-(N-k)*It,ee=(h-s)*it-(g-l)*It,it=Bt/G,It=ee/G,de.x=s+it*(h-s),de.y=l+it*(g-l),it>=0&&it<=1&&(de.onLine1=!0),It>=0&&It<=1&&(de.onLine2=!0),de.onLine1&&de.onLine2?[de.x,de.y]:!1)}Lr.Line=Lr.extend({initialize(s){this._map=s,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(s){L.Util.setOptions(this,s),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(un("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_syncHintLine(){let s=this._layer.getLatLngs();if(s.length>0){let l=s[s.length-1];this._hintline.setLatLngs([l,this._hintMarker.getLatLng()])}},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let h=s;h.target=this._hintMarker,this._handleSnapping(h)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let l=this._layer._defaultShape().slice();l.push(this._hintMarker.getLatLng()),this._change(l)},hasSelfIntersection(){return Dn(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(s,l){let h=L.polyline(this._layer.getLatLngs());s&&(l||(l=this._hintMarker.getLatLng()),h.addLatLng(l));let g=Dn(h.toGeoJSON(15));this._doesSelfIntersect=g.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(g,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(s){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,s.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let l=this._hintMarker.getLatLng(),h=this._layer.getLatLngs(),g=h[h.length-1];if(l.equals(h[0])||h.length>0&&l.equals(g)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:l,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(l);let y=this._createMarker(l);this._setTooltipText(),this._setHintLineAfterNewVertex(l),this._fireVertexAdded(y,void 0,l,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(s)},_setHintLineAfterNewVertex(s){this._hintline.setLatLngs([s,s])},_removeLastVertex(){let s=this._markers;if(s.length<=1){this.disable();return}let l=this._layer.getLatLngs(),h=s[s.length-1],{indexPath:g}=L.PM.Utils.findDeepMarkerIndex(s,h);s.pop(),this._layerGroup.removeLayer(h);let y=s[s.length-1],k=l.indexOf(y.getLatLng());l=l.slice(0,k+1),this._layer.setLatLngs(l),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(h,g,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let s=this._layer.getLatLngs();if(s.length<=1)return;let l=L.polyline(s,this.options.pathOptions);this._setPane(l,"layerPane"),this._finishLayer(l),l.addTo(this._map.pm._getContainingLayer()),this._fireCreate(l),this.options.snappable&&this._cleanupSnapping();let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))},_createMarker(s){let l=new L.Marker(s,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(l,"vertexPane"),l._pmTempLayer=!0,this._layerGroup.addLayer(l),this._markers.push(l),l.on("click",this._finishShape,this),l},_setTooltipText(){let{length:s}=this._layer.getLatLngs().flat(),l="";s<=1?l=un("tooltips.continueLine"):l=un("tooltips.finishLine"),this._hintMarker.setTooltipContent(l)},_change(s){this._fireChange(s,"Draw")},setStyle(){var s,l;(s=this._layer)==null||s.setStyle(this.options.templineStyle),(l=this._hintline)==null||l.setStyle(this.options.hintlineStyle)}}),Lr.Polygon=Lr.Line.extend({initialize(s){this._map=s,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(s){L.PM.Draw.Line.prototype.enable.call(this,s),this._layer.pm._shape="Polygon"},_createMarker(s){let l=new L.Marker(s,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(l,"vertexPane"),l._pmTempLayer=!0,this._layerGroup.addLayer(l),this._markers.push(l),this._layer.getLatLngs().flat().length===1?(l.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(l)-1,this.options.snappable&&this._cleanupSnapping()):l.on("click",()=>1),l},_setTooltipText(){let{length:s}=this._layer.getLatLngs().flat(),l="";s<=2?l=un("tooltips.continueLine"):l=un("tooltips.finishPoly"),this._hintMarker.setTooltipContent(l)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let s=this._layer.getLatLngs();if(s.length<=2)return;let l=L.polygon(s,this.options.pathOptions);this._setPane(l,"layerPane"),this._finishLayer(l),l.addTo(this._map.pm._getContainingLayer()),this._fireCreate(l),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))}}),Lr.Rectangle=Lr.extend({initialize(s){this._map=s,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(s){if(L.Util.setOptions(this,s),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(un("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let l=0;l<2;l+=1){let h=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(h,"vertexPane"),h._pmTempLayer=!0,this._layerGroup.addLayer(h),this._styleMarkers.push(h)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_placeStartingMarkers(s){this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let l=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(l),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(h=>{L.DomUtil.addClass(h._icon,"visible"),h.setLatLng(l)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(un("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let s=this._startMarker.getLatLng();s&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([s,s]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let h=s;h.target=this._hintMarker,this._handleSnapping(h)}let l=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(l,"Draw")},_syncRectangleSize(){let s=ua(this._startMarker.getLatLng(),this._map),l=ua(this._hintMarker.getLatLng(),this._map),h=L.PM.Utils._getRotatedRectangle(s,l,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(h),this.options.cursorMarker&&this._styleMarkers){let g=[];h.forEach(y=>{!y.equals(s,1e-8)&&!y.equals(l,1e-8)&&g.push(y)}),g.forEach((y,k)=>{try{this._styleMarkers[k].setLatLng(y)}catch{}})}},_findCorners(){let s=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(s[0],s[2],this.options.rectangleAngle||0,this._map)},_finishShape(s){this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let l=this._hintMarker.getLatLng(),h=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||h.equals(l))return;let g=L.rectangle([h,l],this.options.pathOptions);if(this.options.rectangleAngle){let k=L.PM.Utils._getRotatedRectangle(h,l,this.options.rectangleAngle||0,this._map);g.setLatLngs(k),g.pm&&g.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(g,"layerPane"),this._finishLayer(g),g.addTo(this._map.pm._getContainingLayer()),this._fireCreate(g);let y=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(y))},setStyle(){var s;(s=this._layer)==null||s.setStyle(this.options.pathOptions)}}),Lr.CircleMarker=Lr.extend({initialize(s){this._map=s,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(s){if(L.Util.setOptions(this,s),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let l={};L.extend(l,this.options.templineStyle),l.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),l),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(un("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(un("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.disable()})},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_placeCenterMarker(s){this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let l=this._hintMarker.getLatLng();this._centerMarker.setLatLng(l),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let s=this._centerMarker.getLatLng();s&&(this._layer.setLatLng(s),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(un("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let s=this._centerMarker.getLatLng(),l=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([s,l])},_syncCircleRadius(){let s=this._centerMarker.getLatLng(),l=this._hintMarker.getLatLng(),h=this._distanceCalculation(s,l);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(h)},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let h=s;h.target=this._hintMarker,this._handleSnapping(h)}this._handleHintMarkerSnapping();let l=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(l,"Draw")},isRelevantMarker(s){return s instanceof L.CircleMarker&&!(s instanceof L.Circle)&&s.pm&&!s._pmTempLayer},_createMarker(s){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!s.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let l=this._hintMarker.getLatLng(),h=new this._BaseCircleClass(l,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(h,"layerPane"),this._finishLayer(h),h.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(h),this._fireCreate(h),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(s){s.pm&&this.options.markerEditable&&s.pm.enable()},_finishShape(s){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let l=this._centerMarker.getLatLng(),h=this._defaultRadius;if(this.options[this._editableOption]){let T=this._hintMarker.getLatLng();h=this._distanceCalculation(l,T),this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?h=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(h=this.options[this._maxRadiusOption])}let g={...this.options.pathOptions,radius:h},y=new this._BaseCircleClass(l,g);this._setPane(y,"layerPane"),this._finishLayer(y),y.addTo(this._map.pm._getContainingLayer()),y.pm&&y.pm._updateHiddenPolyCircle(),this._fireCreate(y);let k=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(k))},_getNewDestinationOfHintMarker(){let s=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return s;let l=this._centerMarker.getLatLng(),h=this._distanceCalculation(l,s);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?s=aa(this._map,l,s,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(s=aa(this._map,l,s,this._getMaxDistanceInMeter()))}return s},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let s=this._centerMarker.getLatLng(),l=this._hintMarker.getLatLng(),h=this._distanceCalculation(s,l);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var l,h;let s={};L.extend(s,this.options.templineStyle),this.options[this._editableOption]&&(s.radius=0),(l=this._layer)==null||l.setStyle(s),(h=this._hintline)==null||h.setStyle(this.options.hintlineStyle)},_distanceCalculation(s,l){return this._map.project(s).distanceTo(this._map.project(l))}}),Lr.Circle=Lr.CircleMarker.extend({initialize(s){this._map=s,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(s,l){return this._map.distance(s,l)}});function zn(s){if(!s)throw new Error("coord is required");if(!Array.isArray(s)){if(s.type==="Feature"&&s.geometry!==null&&s.geometry.type==="Point")return s.geometry.coordinates;if(s.type==="Point")return s.coordinates}if(Array.isArray(s)&&s.length>=2&&!Array.isArray(s[0])&&!Array.isArray(s[1]))return s;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Gn(s){if(Array.isArray(s))return s;if(s.type==="Feature"){if(s.geometry!==null)return s.geometry.coordinates}else if(s.coordinates)return s.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Nr(s){return s.type==="Feature"?s.geometry:s}function Er(s,l){return s.type==="FeatureCollection"?"FeatureCollection":s.type==="GeometryCollection"?"GeometryCollection":s.type==="Feature"&&s.geometry!==null?s.geometry.type:s.type}function Ii(s,l,h){if(s!==null)for(var g,y,k,T,N,G,it,It=0,Bt=0,ee,de=s.type,Pe=de==="FeatureCollection",Oe=de==="Feature",Ue=Pe?s.features.length:1,mn=0;mn<Ue;mn++){it=Pe?s.features[mn].geometry:Oe?s.geometry:s,ee=it?it.type==="GeometryCollection":!1,N=ee?it.geometries.length:1;for(var Rt=0;Rt<N;Rt++){var qt=0,Yt=0;if(T=ee?it.geometries[Rt]:it,T!==null){G=T.coordinates;var ye=T.type;switch(It=0,ye){case null:break;case"Point":if(l(G,Bt,mn,qt,Yt)===!1)return!1;Bt++,qt++;break;case"LineString":case"MultiPoint":for(g=0;g<G.length;g++){if(l(G[g],Bt,mn,qt,Yt)===!1)return!1;Bt++,ye==="MultiPoint"&&qt++}ye==="LineString"&&qt++;break;case"Polygon":case"MultiLineString":for(g=0;g<G.length;g++){for(y=0;y<G[g].length-It;y++){if(l(G[g][y],Bt,mn,qt,Yt)===!1)return!1;Bt++}ye==="MultiLineString"&&qt++,ye==="Polygon"&&Yt++}ye==="Polygon"&&qt++;break;case"MultiPolygon":for(g=0;g<G.length;g++){for(Yt=0,y=0;y<G[g].length;y++){for(k=0;k<G[g][y].length-It;k++){if(l(G[g][y][k],Bt,mn,qt,Yt)===!1)return!1;Bt++}Yt++}qt++}break;case"GeometryCollection":for(g=0;g<T.geometries.length;g++)if(Ii(T.geometries[g],l)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Qn(s,l){if(s.type==="Feature")l(s,0);else if(s.type==="FeatureCollection")for(var h=0;h<s.features.length&&l(s.features[h],h)!==!1;h++);}function di(s,l,h){var g=h;return Qn(s,function(y,k){k===0&&h===void 0?g=y:g=l(g,y,k)}),g}function il(s,l){var h,g,y,k,T,N,G,it,It,Bt,ee=0,de=s.type==="FeatureCollection",Pe=s.type==="Feature",Oe=de?s.features.length:1;for(h=0;h<Oe;h++){for(N=de?s.features[h].geometry:Pe?s.geometry:s,it=de?s.features[h].properties:Pe?s.properties:{},It=de?s.features[h].bbox:Pe?s.bbox:void 0,Bt=de?s.features[h].id:Pe?s.id:void 0,G=N?N.type==="GeometryCollection":!1,T=G?N.geometries.length:1,y=0;y<T;y++){if(k=G?N.geometries[y]:N,k===null){if(l(null,ee,it,It,Bt)===!1)return!1;continue}switch(k.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(l(k,ee,it,It,Bt)===!1)return!1;break}case"GeometryCollection":{for(g=0;g<k.geometries.length;g++)if(l(k.geometries[g],ee,it,It,Bt)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}ee++}}function pi(s,l){il(s,function(h,g,y,k,T){var N=h===null?null:h.type;switch(N){case null:case"Point":case"LineString":case"Polygon":return l(Ot(h,y,{bbox:k,id:T}),g,0)===!1?!1:void 0}var G;switch(N){case"MultiPoint":G="Point";break;case"MultiLineString":G="LineString";break;case"MultiPolygon":G="Polygon";break}for(var it=0;it<h.coordinates.length;it++){var It=h.coordinates[it],Bt={type:G,coordinates:It};if(l(Ot(Bt,y),g,it)===!1)return!1}})}function Ra(s){if(!s)throw new Error("geojson is required");var l=[];return pi(s,function(h){ls(h,l)}),be(l)}function ls(s,l){var h=[],g=s.geometry;if(g!==null){switch(g.type){case"Polygon":h=Gn(g);break;case"LineString":h=[Gn(g)]}h.forEach(function(y){var k=Ia(y,s.properties);k.forEach(function(T){T.id=l.length,l.push(T)})})}}function Ia(s,l){var h=[];return s.reduce(function(g,y){var k=le([g,y],l);return k.bbox=Ks(g,y),h.push(k),y}),h}function Ks(s,l){var h=s[0],g=s[1],y=l[0],k=l[1],T=h<y?h:y,N=g<k?g:k,G=h>y?h:y,it=g>k?g:k;return[T,N,G,it]}var Js=Ra,Ar=p(Cs(),1);function fa(s,l){var h={},g=[];if(s.type==="LineString"&&(s=Ot(s)),l.type==="LineString"&&(l=Ot(l)),s.type==="Feature"&&l.type==="Feature"&&s.geometry!==null&&l.geometry!==null&&s.geometry.type==="LineString"&&l.geometry.type==="LineString"&&s.geometry.coordinates.length===2&&l.geometry.coordinates.length===2){var y=xi(s,l);return y&&g.push(y),be(g)}var k=(0,Ar.default)();return k.load(Js(l)),Qn(Js(s),function(T){Qn(k.search(T),function(N){var G=xi(T,N);if(G){var it=Gn(G).join(",");h[it]||(h[it]=!0,g.push(G))}})}),be(g)}function xi(s,l){var h=Gn(s),g=Gn(l);if(h.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(g.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var y=h[0][0],k=h[0][1],T=h[1][0],N=h[1][1],G=g[0][0],it=g[0][1],It=g[1][0],Bt=g[1][1],ee=(Bt-it)*(T-y)-(It-G)*(N-k),de=(It-G)*(k-it)-(Bt-it)*(y-G),Pe=(T-y)*(k-it)-(N-k)*(y-G);if(ee===0)return null;var Oe=de/ee,Ue=Pe/ee;if(Oe>=0&&Oe<=1&&Ue>=0&&Ue<=1){var mn=y+Oe*(T-y),Rt=k+Oe*(N-k);return Gt([mn,Rt])}return null}var gi=fa,da=p(Cs(),1);function ri(s,l,h){h===void 0&&(h={});var g=zn(s),y=zn(l),k=an(y[1]-g[1]),T=an(y[0]-g[0]),N=an(g[1]),G=an(y[1]),it=Math.pow(Math.sin(k/2),2)+Math.pow(Math.sin(T/2),2)*Math.cos(N)*Math.cos(G);return Te(2*Math.atan2(Math.sqrt(it),Math.sqrt(1-it)),h.units)}var Ys=ri;function Fi(s){var l=s[0],h=s[1],g=s[2],y=s[3],k=Ys(s.slice(0,2),[g,h]),T=Ys(s.slice(0,2),[l,y]);if(k>=T){var N=(h+y)/2;return[l,N-(g-l)/2,g,N+(g-l)/2]}else{var G=(l+g)/2;return[G-(y-h)/2,h,G+(y-h)/2,y]}}var sl=Fi;function Dr(s){var l=[1/0,1/0,-1/0,-1/0];return Ii(s,function(h){l[0]>h[0]&&(l[0]=h[0]),l[1]>h[1]&&(l[1]=h[1]),l[2]<h[0]&&(l[2]=h[0]),l[3]<h[1]&&(l[3]=h[1])}),l}Dr.default=Dr;var Es=Dr;function Gi(s,l){l===void 0&&(l={});var h=l.precision,g=l.coordinates,y=l.mutate;if(h=h==null||isNaN(h)?6:h,g=g==null||isNaN(g)?3:g,!s)throw new Error("<geojson> is required");if(typeof h!="number")throw new Error("<precision> must be a number");if(typeof g!="number")throw new Error("<coordinates> must be a number");(y===!1||y===void 0)&&(s=JSON.parse(JSON.stringify(s)));var k=Math.pow(10,h);return Ii(s,function(T){jo(T,k,g)}),s}function jo(s,l,h){s.length>h&&s.splice(h,s.length);for(var g=0;g<s.length;g++)s[g]=Math.round(s[g]*l)/l;return s}var Xs=Gi;function As(s,l,h){if(h===void 0&&(h={}),h.final===!0)return Hr(s,l);var g=zn(s),y=zn(l),k=an(g[0]),T=an(y[0]),N=an(g[1]),G=an(y[1]),it=Math.sin(T-k)*Math.cos(G),It=Math.cos(N)*Math.sin(G)-Math.sin(N)*Math.cos(G)*Math.cos(T-k);return Je(Math.atan2(it,It))}function Hr(s,l){var h=As(l,s);return h=(h+180)%360,h}function Fr(s,l,h,g){g===void 0&&(g={});var y=zn(s),k=an(y[0]),T=an(y[1]),N=an(h),G=Ge(l,g.units),it=Math.asin(Math.sin(T)*Math.cos(G)+Math.cos(T)*Math.sin(G)*Math.cos(N)),It=k+Math.atan2(Math.sin(N)*Math.sin(G)*Math.cos(T),Math.cos(G)-Math.sin(T)*Math.sin(it)),Bt=Je(It),ee=Je(it);return Gt([Bt,ee],g.properties)}function us(s,l,h){h===void 0&&(h={});var g=Gt([1/0,1/0],{dist:1/0}),y=0;return pi(s,function(k){for(var T=Gn(k),N=0;N<T.length-1;N++){var G=Gt(T[N]);G.properties.dist=Ys(l,G,h);var it=Gt(T[N+1]);it.properties.dist=Ys(l,it,h);var It=Ys(G,it,h),Bt=Math.max(G.properties.dist,it.properties.dist),ee=As(G,it),de=Fr(l,Bt,ee+90,h),Pe=Fr(l,Bt,ee-90,h),Oe=gi(le([de.geometry.coordinates,Pe.geometry.coordinates]),le([G.geometry.coordinates,it.geometry.coordinates])),Ue=null;Oe.features.length>0&&(Ue=Oe.features[0],Ue.properties.dist=Ys(l,Ue,h),Ue.properties.location=y+Ys(G,Ue,h)),G.properties.dist<g.properties.dist&&(g=G,g.properties.index=N,g.properties.location=y),it.properties.dist<g.properties.dist&&(g=it,g.properties.index=N+1,g.properties.location=y+It),Ue&&Ue.properties.dist<g.properties.dist&&(g=Ue,g.properties.index=N),y+=It}}),g}var Li=us;function Wi(s,l){if(!s)throw new Error("line is required");if(!l)throw new Error("splitter is required");var h=Er(s),g=Er(l);if(h!=="LineString")throw new Error("line must be LineString");if(g==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(g==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var y=Xs(l,{precision:7});switch(g){case"Point":return Zi(s,y);case"MultiPoint":return Qs(s,y);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Qs(s,gi(s,y))}}function Qs(s,l){var h=[],g=(0,da.default)();return pi(l,function(y){if(h.forEach(function(N,G){N.id=G}),!h.length)h=Zi(s,y).features,h.forEach(function(N){N.bbox||(N.bbox=sl(Es(N)))}),g.load(be(h));else{var k=g.search(y);if(k.features.length){var T=_r(y,k);h=h.filter(function(N){return N.id!==T.id}),g.remove(T),Qn(Zi(T,y),function(N){h.push(N),g.insert(N)})}}}),be(h)}function Zi(s,l){var h=[],g=Gn(s)[0],y=Gn(s)[s.geometry.coordinates.length-1];if(Ms(g,zn(l))||Ms(y,zn(l)))return be([s]);var k=(0,da.default)(),T=Js(s);k.load(T);var N=k.search(l);if(!N.features.length)return be([s]);var G=_r(l,N),it=[g],It=di(T,function(Bt,ee,de){var Pe=Gn(ee)[1],Oe=zn(l);return de===G.id?(Bt.push(Oe),h.push(le(Bt)),Ms(Oe,Pe)?[Oe]:[Oe,Pe]):(Bt.push(Pe),Bt)},it);return It.length>1&&h.push(le(It)),be(h)}function _r(s,l){if(!l.features.length)throw new Error("lines must contain features");if(l.features.length===1)return l.features[0];var h,g=1/0;return Qn(l,function(y){var k=Li(y,s),T=k.properties.dist;T<g&&(h=y,g=T)}),h}function Ms(s,l){return s[0]===l[0]&&s[1]===l[1]}var mi=Wi;function ii(s,l,h){if(h===void 0&&(h={}),!s)throw new Error("point is required");if(!l)throw new Error("polygon is required");var g=zn(s),y=Nr(l),k=y.type,T=l.bbox,N=y.coordinates;if(T&&Fa(g,T)===!1)return!1;k==="Polygon"&&(N=[N]);for(var G=!1,it=0;it<N.length&&!G;it++)if(zo(g,N[it][0],h.ignoreBoundary)){for(var It=!1,Bt=1;Bt<N[it].length&&!It;)zo(g,N[it][Bt],!h.ignoreBoundary)&&(It=!0),Bt++;It||(G=!0)}return G}function zo(s,l,h){var g=!1;l[0][0]===l[l.length-1][0]&&l[0][1]===l[l.length-1][1]&&(l=l.slice(0,l.length-1));for(var y=0,k=l.length-1;y<l.length;k=y++){var T=l[y][0],N=l[y][1],G=l[k][0],it=l[k][1],It=s[1]*(T-G)+N*(G-s[0])+it*(s[0]-T)===0&&(T-s[0])*(G-s[0])<=0&&(N-s[1])*(it-s[1])<=0;if(It)return!h;var Bt=N>s[1]!=it>s[1]&&s[0]<(G-T)*(s[1]-N)/(it-N)+T;Bt&&(g=!g)}return g}function Fa(s,l){return l[0]<=s[0]&&l[1]<=s[1]&&l[2]>=s[0]&&l[3]>=s[1]}function ja(s,l,h){h===void 0&&(h={});for(var g=zn(s),y=Gn(l),k=0;k<y.length-1;k++){var T=!1;if(h.ignoreEndVertices&&(k===0&&(T="start"),k===y.length-2&&(T="end"),k===0&&k+1===y.length-1&&(T="both")),si(y[k],y[k+1],g,T,typeof h.epsilon>"u"?null:h.epsilon))return!0}return!1}function si(s,l,h,g,y){var k=h[0],T=h[1],N=s[0],G=s[1],it=l[0],It=l[1],Bt=h[0]-N,ee=h[1]-G,de=it-N,Pe=It-G,Oe=Bt*Pe-ee*de;if(y!==null){if(Math.abs(Oe)>y)return!1}else if(Oe!==0)return!1;if(g){if(g==="start")return Math.abs(de)>=Math.abs(Pe)?de>0?N<k&&k<=it:it<=k&&k<N:Pe>0?G<T&&T<=It:It<=T&&T<G;if(g==="end")return Math.abs(de)>=Math.abs(Pe)?de>0?N<=k&&k<it:it<k&&k<=N:Pe>0?G<=T&&T<It:It<T&&T<=G;if(g==="both")return Math.abs(de)>=Math.abs(Pe)?de>0?N<k&&k<it:it<k&&k<N:Pe>0?G<T&&T<It:It<T&&T<G}else return Math.abs(de)>=Math.abs(Pe)?de>0?N<=k&&k<=it:it<=k&&k<=N:Pe>0?G<=T&&T<=It:It<=T&&T<=G;return!1}var Ci=ja;function mo(s,l){var h=Nr(s),g=Nr(l),y=h.type,k=g.type,T=h.coordinates,N=g.coordinates;switch(y){case"Point":switch(k){case"Point":return Wn(T,N);default:throw new Error("feature2 "+k+" geometry not supported")}case"MultiPoint":switch(k){case"Point":return Bs(h,g);case"MultiPoint":return pa(h,g);default:throw new Error("feature2 "+k+" geometry not supported")}case"LineString":switch(k){case"Point":return Ci(g,h,{ignoreEndVertices:!0});case"LineString":return to(h,g);case"MultiPoint":return vo(h,g);default:throw new Error("feature2 "+k+" geometry not supported")}case"Polygon":switch(k){case"Point":return ii(g,h,{ignoreBoundary:!0});case"LineString":return Ki(h,g);case"Polygon":return Gr(h,g);case"MultiPoint":return yo(h,g);default:throw new Error("feature2 "+k+" geometry not supported")}default:throw new Error("feature1 "+y+" geometry not supported")}}function Bs(s,l){var h,g=!1;for(h=0;h<s.coordinates.length;h++)if(Wn(s.coordinates[h],l.coordinates)){g=!0;break}return g}function pa(s,l){for(var h=0,g=l.coordinates;h<g.length;h++){for(var y=g[h],k=!1,T=0,N=s.coordinates;T<N.length;T++){var G=N[T];if(Wn(y,G)){k=!0;break}}if(!k)return!1}return!0}function vo(s,l){for(var h=!1,g=0,y=l.coordinates;g<y.length;g++){var k=y[g];if(Ci(k,s,{ignoreEndVertices:!0})&&(h=!0),!Ci(k,s))return!1}return!!h}function yo(s,l){for(var h=0,g=l.coordinates;h<g.length;h++){var y=g[h];if(!ii(y,s,{ignoreBoundary:!0}))return!1}return!0}function to(s,l){for(var h=!1,g=0,y=l.coordinates;g<y.length;g++){var k=y[g];if(Ci({type:"Point",coordinates:k},s,{ignoreEndVertices:!0})&&(h=!0),!Ci({type:"Point",coordinates:k},s,{ignoreEndVertices:!1}))return!1}return h}function Ki(s,l){var h=!1,g=0,y=Es(s),k=Es(l);if(!Jn(y,k))return!1;for(g;g<l.coordinates.length-1;g++){var T=Cr(l.coordinates[g],l.coordinates[g+1]);if(ii({type:"Point",coordinates:T},s,{ignoreBoundary:!0})){h=!0;break}}return h}function Gr(s,l){if(s.type==="Feature"&&s.geometry===null||l.type==="Feature"&&l.geometry===null)return!1;var h=Es(s),g=Es(l);if(!Jn(h,g))return!1;for(var y=Nr(l).coordinates,k=0,T=y;k<T.length;k++)for(var N=T[k],G=0,it=N;G<it.length;G++){var It=it[G];if(!ii(It,s))return!1}return!0}function Jn(s,l){return!(s[0]>l[0]||s[2]<l[2]||s[1]>l[1]||s[3]<l[3])}function Wn(s,l){return s[0]===l[0]&&s[1]===l[1]}function Cr(s,l){return[(s[0]+l[0])/2,(s[1]+l[1])/2]}var tr=p(Oi()),cs=s=>()=>s,_o=s=>{let l=s?(h,g)=>g.minus(h).abs().isLessThanOrEqualTo(s):cs(!1);return(h,g)=>l(h,g)?0:h.comparedTo(g)};function Ts(s){let l=s?(h,g,y,k,T)=>h.exponentiatedBy(2).isLessThanOrEqualTo(k.minus(g).exponentiatedBy(2).plus(T.minus(y).exponentiatedBy(2)).times(s)):cs(!1);return(h,g,y)=>{let k=h.x,T=h.y,N=y.x,G=y.y,it=T.minus(G).times(g.x.minus(N)).minus(k.minus(N).times(g.y.minus(G)));return l(it,k,T,N,G)?0:it.comparedTo(0)}}var ol=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,bo=Math.ceil,Or=Math.floor,er="[BigNumber Error] ",ki=er+"Number primitive has more than 15 significant digits: ",Pi=1e14,gn=14,al=9007199254740991,Uo=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Ji=1e7,oi=1e9;function Dl(s){var l,h,g,y=Rt.prototype={constructor:Rt,toString:null,valueOf:null},k=new Rt(1),T=20,N=4,G=-7,it=21,It=-1e7,Bt=1e7,ee=!1,de=1,Pe=0,Oe={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},Ue="0123456789abcdefghijklmnopqrstuvwxyz",mn=!0;function Rt(X,st){var xt,bt,kt,Pt,Wt,Vt,Xt,he,ce=this;if(!(ce instanceof Rt))return new Rt(X,st);if(st==null){if(X&&X._isBigNumber===!0){ce.s=X.s,!X.c||X.e>Bt?ce.c=ce.e=null:X.e<It?ce.c=[ce.e=0]:(ce.e=X.e,ce.c=X.c.slice());return}if((Vt=typeof X=="number")&&X*0==0){if(ce.s=1/X<0?(X=-X,-1):1,X===~~X){for(Pt=0,Wt=X;Wt>=10;Wt/=10,Pt++);Pt>Bt?ce.c=ce.e=null:(ce.e=Pt,ce.c=[X]);return}he=String(X)}else{if(!ol.test(he=String(X)))return g(ce,he,Vt);ce.s=he.charCodeAt(0)==45?(he=he.slice(1),-1):1}(Pt=he.indexOf("."))>-1&&(he=he.replace(".","")),(Wt=he.search(/e/i))>0?(Pt<0&&(Pt=Wt),Pt+=+he.slice(Wt+1),he=he.substring(0,Wt)):Pt<0&&(Pt=he.length)}else{if(i(st,2,Ue.length,"Base"),st==10&&mn)return ce=new Rt(X),se(ce,T+ce.e+1,N);if(he=String(X),Vt=typeof X=="number"){if(X*0!=0)return g(ce,he,Vt,st);if(ce.s=1/X<0?(he=he.slice(1),-1):1,Rt.DEBUG&&he.replace(/^0\.0*|\./,"").length>15)throw Error(ki+X)}else ce.s=he.charCodeAt(0)===45?(he=he.slice(1),-1):1;for(xt=Ue.slice(0,st),Pt=Wt=0,Xt=he.length;Wt<Xt;Wt++)if(xt.indexOf(bt=he.charAt(Wt))<0){if(bt=="."){if(Wt>Pt){Pt=Xt;continue}}else if(!kt&&(he==he.toUpperCase()&&(he=he.toLowerCase())||he==he.toLowerCase()&&(he=he.toUpperCase()))){kt=!0,Wt=-1,Pt=0;continue}return g(ce,String(X),Vt,st)}Vt=!1,he=h(he,st,10,ce.s),(Pt=he.indexOf("."))>-1?he=he.replace(".",""):Pt=he.length}for(Wt=0;he.charCodeAt(Wt)===48;Wt++);for(Xt=he.length;he.charCodeAt(--Xt)===48;);if(he=he.slice(Wt,++Xt)){if(Xt-=Wt,Vt&&Rt.DEBUG&&Xt>15&&(X>al||X!==Or(X)))throw Error(ki+ce.s*X);if((Pt=Pt-Wt-1)>Bt)ce.c=ce.e=null;else if(Pt<It)ce.c=[ce.e=0];else{if(ce.e=Pt,ce.c=[],Wt=(Pt+1)%gn,Pt<0&&(Wt+=gn),Wt<Xt){for(Wt&&ce.c.push(+he.slice(0,Wt)),Xt-=gn;Wt<Xt;)ce.c.push(+he.slice(Wt,Wt+=gn));Wt=gn-(he=he.slice(Wt)).length}else Wt-=Xt;for(;Wt--;he+="0");ce.c.push(+he)}}else ce.c=[ce.e=0]}Rt.clone=Dl,Rt.ROUND_UP=0,Rt.ROUND_DOWN=1,Rt.ROUND_CEIL=2,Rt.ROUND_FLOOR=3,Rt.ROUND_HALF_UP=4,Rt.ROUND_HALF_DOWN=5,Rt.ROUND_HALF_EVEN=6,Rt.ROUND_HALF_CEIL=7,Rt.ROUND_HALF_FLOOR=8,Rt.EUCLID=9,Rt.config=Rt.set=function(X){var st,xt;if(X!=null)if(typeof X=="object"){if(X.hasOwnProperty(st="DECIMAL_PLACES")&&(xt=X[st],i(xt,0,oi,st),T=xt),X.hasOwnProperty(st="ROUNDING_MODE")&&(xt=X[st],i(xt,0,8,st),N=xt),X.hasOwnProperty(st="EXPONENTIAL_AT")&&(xt=X[st],xt&&xt.pop?(i(xt[0],-1e9,0,st),i(xt[1],0,oi,st),G=xt[0],it=xt[1]):(i(xt,-1e9,oi,st),G=-(it=xt<0?-xt:xt))),X.hasOwnProperty(st="RANGE"))if(xt=X[st],xt&&xt.pop)i(xt[0],-1e9,-1,st),i(xt[1],1,oi,st),It=xt[0],Bt=xt[1];else if(i(xt,-1e9,oi,st),xt)It=-(Bt=xt<0?-xt:xt);else throw Error(er+st+" cannot be zero: "+xt);if(X.hasOwnProperty(st="CRYPTO"))if(xt=X[st],xt===!!xt)if(xt)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))ee=xt;else throw ee=!xt,Error(er+"crypto unavailable");else ee=xt;else throw Error(er+st+" not true or false: "+xt);if(X.hasOwnProperty(st="MODULO_MODE")&&(xt=X[st],i(xt,0,9,st),de=xt),X.hasOwnProperty(st="POW_PRECISION")&&(xt=X[st],i(xt,0,oi,st),Pe=xt),X.hasOwnProperty(st="FORMAT"))if(xt=X[st],typeof xt=="object")Oe=xt;else throw Error(er+st+" not an object: "+xt);if(X.hasOwnProperty(st="ALPHABET"))if(xt=X[st],typeof xt=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(xt))mn=xt.slice(0,10)=="0123456789",Ue=xt;else throw Error(er+st+" invalid: "+xt)}else throw Error(er+"Object expected: "+X);return{DECIMAL_PLACES:T,ROUNDING_MODE:N,EXPONENTIAL_AT:[G,it],RANGE:[It,Bt],CRYPTO:ee,MODULO_MODE:de,POW_PRECISION:Pe,FORMAT:Oe,ALPHABET:Ue}},Rt.isBigNumber=function(X){if(!X||X._isBigNumber!==!0)return!1;if(!Rt.DEBUG)return!0;var st,xt,bt=X.c,kt=X.e,Pt=X.s;t:if({}.toString.call(bt)=="[object Array]"){if((Pt===1||Pt===-1)&&kt>=-1e9&&kt<=oi&&kt===Or(kt)){if(bt[0]===0){if(kt===0&&bt.length===1)return!0;break t}if(st=(kt+1)%gn,st<1&&(st+=gn),String(bt[0]).length==st){for(st=0;st<bt.length;st++)if(xt=bt[st],xt<0||xt>=Pi||xt!==Or(xt))break t;if(xt!==0)return!0}}}else if(bt===null&&kt===null&&(Pt===null||Pt===1||Pt===-1))return!0;throw Error(er+"Invalid BigNumber: "+X)},Rt.maximum=Rt.max=function(){return Yt(arguments,-1)},Rt.minimum=Rt.min=function(){return Yt(arguments,1)},Rt.random=function(){var X=9007199254740992,st=Math.random()*X&2097151?function(){return Or(Math.random()*X)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(xt){var bt,kt,Pt,Wt,Vt,Xt=0,he=[],ce=new Rt(k);if(xt==null?xt=T:i(xt,0,oi),Wt=bo(xt/gn),ee)if(crypto.getRandomValues){for(bt=crypto.getRandomValues(new Uint32Array(Wt*=2));Xt<Wt;)Vt=bt[Xt]*131072+(bt[Xt+1]>>>11),Vt>=9e15?(kt=crypto.getRandomValues(new Uint32Array(2)),bt[Xt]=kt[0],bt[Xt+1]=kt[1]):(he.push(Vt%1e14),Xt+=2);Xt=Wt/2}else if(crypto.randomBytes){for(bt=crypto.randomBytes(Wt*=7);Xt<Wt;)Vt=(bt[Xt]&31)*281474976710656+bt[Xt+1]*1099511627776+bt[Xt+2]*4294967296+bt[Xt+3]*16777216+(bt[Xt+4]<<16)+(bt[Xt+5]<<8)+bt[Xt+6],Vt>=9e15?crypto.randomBytes(7).copy(bt,Xt):(he.push(Vt%1e14),Xt+=7);Xt=Wt/7}else throw ee=!1,Error(er+"crypto unavailable");if(!ee)for(;Xt<Wt;)Vt=st(),Vt<9e15&&(he[Xt++]=Vt%1e14);for(Wt=he[--Xt],xt%=gn,Wt&&xt&&(Vt=Uo[gn-xt],he[Xt]=Or(Wt/Vt)*Vt);he[Xt]===0;he.pop(),Xt--);if(Xt<0)he=[Pt=0];else{for(Pt=-1;he[0]===0;he.splice(0,1),Pt-=gn);for(Xt=1,Vt=he[0];Vt>=10;Vt/=10,Xt++);Xt<gn&&(Pt-=gn-Xt)}return ce.e=Pt,ce.c=he,ce}}(),Rt.sum=function(){for(var X=1,st=arguments,xt=new Rt(st[0]);X<st.length;)xt=xt.plus(st[X++]);return xt},h=function(){var X="0123456789";function st(xt,bt,kt,Pt){for(var Wt,Vt=[0],Xt,he=0,ce=xt.length;he<ce;){for(Xt=Vt.length;Xt--;Vt[Xt]*=bt);for(Vt[0]+=Pt.indexOf(xt.charAt(he++)),Wt=0;Wt<Vt.length;Wt++)Vt[Wt]>kt-1&&(Vt[Wt+1]==null&&(Vt[Wt+1]=0),Vt[Wt+1]+=Vt[Wt]/kt|0,Vt[Wt]%=kt)}return Vt.reverse()}return function(xt,bt,kt,Pt,Wt){var Vt,Xt,he,ce,Ae,Ke,Qe,sn,Hn=xt.indexOf("."),Zn=T,In=N;for(Hn>=0&&(ce=Pe,Pe=0,xt=xt.replace(".",""),sn=new Rt(bt),Ke=sn.pow(xt.length-Hn),Pe=ce,sn.c=st(P(yi(Ke.c),Ke.e,"0"),10,kt,X),sn.e=sn.c.length),Qe=st(xt,bt,kt,Wt?(Vt=Ue,X):(Vt=X,Ue)),he=ce=Qe.length;Qe[--ce]==0;Qe.pop());if(!Qe[0])return Vt.charAt(0);if(Hn<0?--he:(Ke.c=Qe,Ke.e=he,Ke.s=Pt,Ke=l(Ke,sn,Zn,In,kt),Qe=Ke.c,Ae=Ke.r,he=Ke.e),Xt=he+Zn+1,Hn=Qe[Xt],ce=kt/2,Ae=Ae||Xt<0||Qe[Xt+1]!=null,Ae=In<4?(Hn!=null||Ae)&&(In==0||In==(Ke.s<0?3:2)):Hn>ce||Hn==ce&&(In==4||Ae||In==6&&Qe[Xt-1]&1||In==(Ke.s<0?8:7)),Xt<1||!Qe[0])xt=Ae?P(Vt.charAt(1),-Zn,Vt.charAt(0)):Vt.charAt(0);else{if(Qe.length=Xt,Ae)for(--kt;++Qe[--Xt]>kt;)Qe[Xt]=0,Xt||(++he,Qe=[1].concat(Qe));for(ce=Qe.length;!Qe[--ce];);for(Hn=0,xt="";Hn<=ce;xt+=Vt.charAt(Qe[Hn++]));xt=P(xt,he,Vt.charAt(0))}return xt}}(),l=function(){function X(bt,kt,Pt){var Wt,Vt,Xt,he,ce=0,Ae=bt.length,Ke=kt%Ji,Qe=kt/Ji|0;for(bt=bt.slice();Ae--;)Xt=bt[Ae]%Ji,he=bt[Ae]/Ji|0,Wt=Qe*Xt+he*Ke,Vt=Ke*Xt+Wt%Ji*Ji+ce,ce=(Vt/Pt|0)+(Wt/Ji|0)+Qe*he,bt[Ae]=Vt%Pt;return ce&&(bt=[ce].concat(bt)),bt}function st(bt,kt,Pt,Wt){var Vt,Xt;if(Pt!=Wt)Xt=Pt>Wt?1:-1;else for(Vt=Xt=0;Vt<Pt;Vt++)if(bt[Vt]!=kt[Vt]){Xt=bt[Vt]>kt[Vt]?1:-1;break}return Xt}function xt(bt,kt,Pt,Wt){for(var Vt=0;Pt--;)bt[Pt]-=Vt,Vt=bt[Pt]<kt[Pt]?1:0,bt[Pt]=Vt*Wt+bt[Pt]-kt[Pt];for(;!bt[0]&&bt.length>1;bt.splice(0,1));}return function(bt,kt,Pt,Wt,Vt){var Xt,he,ce,Ae,Ke,Qe,sn,Hn,Zn,In,rr,Ei,cl,wo,Gu,xo,jl,fs=bt.s==kt.s?1:-1,li=bt.c,kr=kt.c;if(!li||!li[0]||!kr||!kr[0])return new Rt(!bt.s||!kt.s||(li?kr&&li[0]==kr[0]:!kr)?NaN:li&&li[0]==0||!kr?fs*0:fs/0);for(Hn=new Rt(fs),Zn=Hn.c=[],he=bt.e-kt.e,fs=Pt+he+1,Vt||(Vt=Pi,he=vi(bt.e/gn)-vi(kt.e/gn),fs=fs/gn|0),ce=0;kr[ce]==(li[ce]||0);ce++);if(kr[ce]>(li[ce]||0)&&he--,fs<0)Zn.push(1),Ae=!0;else{for(wo=li.length,xo=kr.length,ce=0,fs+=2,Ke=Or(Vt/(kr[0]+1)),Ke>1&&(kr=X(kr,Ke,Vt),li=X(li,Ke,Vt),xo=kr.length,wo=li.length),cl=xo,In=li.slice(0,xo),rr=In.length;rr<xo;In[rr++]=0);jl=kr.slice(),jl=[0].concat(jl),Gu=kr[0],kr[1]>=Vt/2&&Gu++;do{if(Ke=0,Xt=st(kr,In,xo,rr),Xt<0){if(Ei=In[0],xo!=rr&&(Ei=Ei*Vt+(In[1]||0)),Ke=Or(Ei/Gu),Ke>1)for(Ke>=Vt&&(Ke=Vt-1),Qe=X(kr,Ke,Vt),sn=Qe.length,rr=In.length;st(Qe,In,sn,rr)==1;)Ke--,xt(Qe,xo<sn?jl:kr,sn,Vt),sn=Qe.length,Xt=1;else Ke==0&&(Xt=Ke=1),Qe=kr.slice(),sn=Qe.length;if(sn<rr&&(Qe=[0].concat(Qe)),xt(In,Qe,rr,Vt),rr=In.length,Xt==-1)for(;st(kr,In,xo,rr)<1;)Ke++,xt(In,xo<rr?jl:kr,rr,Vt),rr=In.length}else Xt===0&&(Ke++,In=[0]);Zn[ce++]=Ke,In[0]?In[rr++]=li[cl]||0:(In=[li[cl]],rr=1)}while((cl++<wo||In[0]!=null)&&fs--);Ae=In[0]!=null,Zn[0]||Zn.splice(0,1)}if(Vt==Pi){for(ce=1,fs=Zn[0];fs>=10;fs/=10,ce++);se(Hn,Pt+(Hn.e=ce+he*gn-1)+1,Wt,Ae)}else Hn.e=he,Hn.r=+Ae;return Hn}}();function qt(X,st,xt,bt){var kt,Pt,Wt,Vt,Xt;if(xt==null?xt=N:i(xt,0,8),!X.c)return X.toString();if(kt=X.c[0],Wt=X.e,st==null)Xt=yi(X.c),Xt=bt==1||bt==2&&(Wt<=G||Wt>=it)?m(Xt,Wt):P(Xt,Wt,"0");else if(X=se(new Rt(X),st,xt),Pt=X.e,Xt=yi(X.c),Vt=Xt.length,bt==1||bt==2&&(st<=Pt||Pt<=G)){for(;Vt<st;Xt+="0",Vt++);Xt=m(Xt,Pt)}else if(st-=Wt,Xt=P(Xt,Pt,"0"),Pt+1>Vt){if(--st>0)for(Xt+=".";st--;Xt+="0");}else if(st+=Pt-Vt,st>0)for(Pt+1==Vt&&(Xt+=".");st--;Xt+="0");return X.s<0&&kt?"-"+Xt:Xt}function Yt(X,st){for(var xt,bt,kt=1,Pt=new Rt(X[0]);kt<X.length;kt++)bt=new Rt(X[kt]),(!bt.s||(xt=Ns(Pt,bt))===st||xt===0&&Pt.s===st)&&(Pt=bt);return Pt}function ye(X,st,xt){for(var bt=1,kt=st.length;!st[--kt];st.pop());for(kt=st[0];kt>=10;kt/=10,bt++);return(xt=bt+xt*gn-1)>Bt?X.c=X.e=null:xt<It?X.c=[X.e=0]:(X.e=xt,X.c=st),X}g=function(){var X=/^(-?)0([xbo])(?=\w[\w.]*$)/i,st=/^([^.]+)\.$/,xt=/^\.([^.]+)$/,bt=/^-?(Infinity|NaN)$/,kt=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(Pt,Wt,Vt,Xt){var he,ce=Vt?Wt:Wt.replace(kt,"");if(bt.test(ce))Pt.s=isNaN(ce)?null:ce<0?-1:1;else{if(!Vt&&(ce=ce.replace(X,function(Ae,Ke,Qe){return he=(Qe=Qe.toLowerCase())=="x"?16:Qe=="b"?2:8,!Xt||Xt==he?Ke:Ae}),Xt&&(he=Xt,ce=ce.replace(st,"$1").replace(xt,"0.$1")),Wt!=ce))return new Rt(ce,he);if(Rt.DEBUG)throw Error(er+"Not a"+(Xt?" base "+Xt:"")+" number: "+Wt);Pt.s=null}Pt.c=Pt.e=null}}();function se(X,st,xt,bt){var kt,Pt,Wt,Vt,Xt,he,ce,Ae=X.c,Ke=Uo;if(Ae){t:{for(kt=1,Vt=Ae[0];Vt>=10;Vt/=10,kt++);if(Pt=st-kt,Pt<0)Pt+=gn,Wt=st,Xt=Ae[he=0],ce=Or(Xt/Ke[kt-Wt-1]%10);else if(he=bo((Pt+1)/gn),he>=Ae.length)if(bt){for(;Ae.length<=he;Ae.push(0));Xt=ce=0,kt=1,Pt%=gn,Wt=Pt-gn+1}else break t;else{for(Xt=Vt=Ae[he],kt=1;Vt>=10;Vt/=10,kt++);Pt%=gn,Wt=Pt-gn+kt,ce=Wt<0?0:Or(Xt/Ke[kt-Wt-1]%10)}if(bt=bt||st<0||Ae[he+1]!=null||(Wt<0?Xt:Xt%Ke[kt-Wt-1]),bt=xt<4?(ce||bt)&&(xt==0||xt==(X.s<0?3:2)):ce>5||ce==5&&(xt==4||bt||xt==6&&(Pt>0?Wt>0?Xt/Ke[kt-Wt]:0:Ae[he-1])%10&1||xt==(X.s<0?8:7)),st<1||!Ae[0])return Ae.length=0,bt?(st-=X.e+1,Ae[0]=Ke[(gn-st%gn)%gn],X.e=-st||0):Ae[0]=X.e=0,X;if(Pt==0?(Ae.length=he,Vt=1,he--):(Ae.length=he+1,Vt=Ke[gn-Pt],Ae[he]=Wt>0?Or(Xt/Ke[kt-Wt]%Ke[Wt])*Vt:0),bt)for(;;)if(he==0){for(Pt=1,Wt=Ae[0];Wt>=10;Wt/=10,Pt++);for(Wt=Ae[0]+=Vt,Vt=1;Wt>=10;Wt/=10,Vt++);Pt!=Vt&&(X.e++,Ae[0]==Pi&&(Ae[0]=1));break}else{if(Ae[he]+=Vt,Ae[he]!=Pi)break;Ae[he--]=0,Vt=1}for(Pt=Ae.length;Ae[--Pt]===0;Ae.pop());}X.e>Bt?X.c=X.e=null:X.e<It&&(X.c=[X.e=0])}return X}function ge(X){var st,xt=X.e;return xt===null?X.toString():(st=yi(X.c),st=xt<=G||xt>=it?m(st,xt):P(st,xt,"0"),X.s<0?"-"+st:st)}return y.absoluteValue=y.abs=function(){var X=new Rt(this);return X.s<0&&(X.s=1),X},y.comparedTo=function(X,st){return Ns(this,new Rt(X,st))},y.decimalPlaces=y.dp=function(X,st){var xt,bt,kt,Pt=this;if(X!=null)return i(X,0,oi),st==null?st=N:i(st,0,8),se(new Rt(Pt),X+Pt.e+1,st);if(!(xt=Pt.c))return null;if(bt=((kt=xt.length-1)-vi(this.e/gn))*gn,kt=xt[kt])for(;kt%10==0;kt/=10,bt--);return bt<0&&(bt=0),bt},y.dividedBy=y.div=function(X,st){return l(this,new Rt(X,st),T,N)},y.dividedToIntegerBy=y.idiv=function(X,st){return l(this,new Rt(X,st),0,1)},y.exponentiatedBy=y.pow=function(X,st){var xt,bt,kt,Pt,Wt,Vt,Xt,he,ce,Ae=this;if(X=new Rt(X),X.c&&!X.isInteger())throw Error(er+"Exponent not an integer: "+ge(X));if(st!=null&&(st=new Rt(st)),Vt=X.e>14,!Ae.c||!Ae.c[0]||Ae.c[0]==1&&!Ae.e&&Ae.c.length==1||!X.c||!X.c[0])return ce=new Rt(Math.pow(+ge(Ae),Vt?X.s*(2-c(X)):+ge(X))),st?ce.mod(st):ce;if(Xt=X.s<0,st){if(st.c?!st.c[0]:!st.s)return new Rt(NaN);bt=!Xt&&Ae.isInteger()&&st.isInteger(),bt&&(Ae=Ae.mod(st))}else{if(X.e>9&&(Ae.e>0||Ae.e<-1||(Ae.e==0?Ae.c[0]>1||Vt&&Ae.c[1]>=24e7:Ae.c[0]<8e13||Vt&&Ae.c[0]<=9999975e7)))return Pt=Ae.s<0&&c(X)?-0:0,Ae.e>-1&&(Pt=1/Pt),new Rt(Xt?1/Pt:Pt);Pe&&(Pt=bo(Pe/gn+2))}for(Vt?(xt=new Rt(.5),Xt&&(X.s=1),he=c(X)):(kt=Math.abs(+ge(X)),he=kt%2),ce=new Rt(k);;){if(he){if(ce=ce.times(Ae),!ce.c)break;Pt?ce.c.length>Pt&&(ce.c.length=Pt):bt&&(ce=ce.mod(st))}if(kt){if(kt=Or(kt/2),kt===0)break;he=kt%2}else if(X=X.times(xt),se(X,X.e+1,1),X.e>14)he=c(X);else{if(kt=+ge(X),kt===0)break;he=kt%2}Ae=Ae.times(Ae),Pt?Ae.c&&Ae.c.length>Pt&&(Ae.c.length=Pt):bt&&(Ae=Ae.mod(st))}return bt?ce:(Xt&&(ce=k.div(ce)),st?ce.mod(st):Pt?se(ce,Pe,N,Wt):ce)},y.integerValue=function(X){var st=new Rt(this);return X==null?X=N:i(X,0,8),se(st,st.e+1,X)},y.isEqualTo=y.eq=function(X,st){return Ns(this,new Rt(X,st))===0},y.isFinite=function(){return!!this.c},y.isGreaterThan=y.gt=function(X,st){return Ns(this,new Rt(X,st))>0},y.isGreaterThanOrEqualTo=y.gte=function(X,st){return(st=Ns(this,new Rt(X,st)))===1||st===0},y.isInteger=function(){return!!this.c&&vi(this.e/gn)>this.c.length-2},y.isLessThan=y.lt=function(X,st){return Ns(this,new Rt(X,st))<0},y.isLessThanOrEqualTo=y.lte=function(X,st){return(st=Ns(this,new Rt(X,st)))===-1||st===0},y.isNaN=function(){return!this.s},y.isNegative=function(){return this.s<0},y.isPositive=function(){return this.s>0},y.isZero=function(){return!!this.c&&this.c[0]==0},y.minus=function(X,st){var xt,bt,kt,Pt,Wt=this,Vt=Wt.s;if(X=new Rt(X,st),st=X.s,!Vt||!st)return new Rt(NaN);if(Vt!=st)return X.s=-st,Wt.plus(X);var Xt=Wt.e/gn,he=X.e/gn,ce=Wt.c,Ae=X.c;if(!Xt||!he){if(!ce||!Ae)return ce?(X.s=-st,X):new Rt(Ae?Wt:NaN);if(!ce[0]||!Ae[0])return Ae[0]?(X.s=-st,X):new Rt(ce[0]?Wt:N==3?-0:0)}if(Xt=vi(Xt),he=vi(he),ce=ce.slice(),Vt=Xt-he){for((Pt=Vt<0)?(Vt=-Vt,kt=ce):(he=Xt,kt=Ae),kt.reverse(),st=Vt;st--;kt.push(0));kt.reverse()}else for(bt=(Pt=(Vt=ce.length)<(st=Ae.length))?Vt:st,Vt=st=0;st<bt;st++)if(ce[st]!=Ae[st]){Pt=ce[st]<Ae[st];break}if(Pt&&(kt=ce,ce=Ae,Ae=kt,X.s=-X.s),st=(bt=Ae.length)-(xt=ce.length),st>0)for(;st--;ce[xt++]=0);for(st=Pi-1;bt>Vt;){if(ce[--bt]<Ae[bt]){for(xt=bt;xt&&!ce[--xt];ce[xt]=st);--ce[xt],ce[bt]+=Pi}ce[bt]-=Ae[bt]}for(;ce[0]==0;ce.splice(0,1),--he);return ce[0]?ye(X,ce,he):(X.s=N==3?-1:1,X.c=[X.e=0],X)},y.modulo=y.mod=function(X,st){var xt,bt,kt=this;return X=new Rt(X,st),!kt.c||!X.s||X.c&&!X.c[0]?new Rt(NaN):!X.c||kt.c&&!kt.c[0]?new Rt(kt):(de==9?(bt=X.s,X.s=1,xt=l(kt,X,0,3),X.s=bt,xt.s*=bt):xt=l(kt,X,0,de),X=kt.minus(xt.times(X)),!X.c[0]&&de==1&&(X.s=kt.s),X)},y.multipliedBy=y.times=function(X,st){var xt,bt,kt,Pt,Wt,Vt,Xt,he,ce,Ae,Ke,Qe,sn,Hn,Zn,In=this,rr=In.c,Ei=(X=new Rt(X,st)).c;if(!rr||!Ei||!rr[0]||!Ei[0])return!In.s||!X.s||rr&&!rr[0]&&!Ei||Ei&&!Ei[0]&&!rr?X.c=X.e=X.s=null:(X.s*=In.s,!rr||!Ei?X.c=X.e=null:(X.c=[0],X.e=0)),X;for(bt=vi(In.e/gn)+vi(X.e/gn),X.s*=In.s,Xt=rr.length,Ae=Ei.length,Xt<Ae&&(sn=rr,rr=Ei,Ei=sn,kt=Xt,Xt=Ae,Ae=kt),kt=Xt+Ae,sn=[];kt--;sn.push(0));for(Hn=Pi,Zn=Ji,kt=Ae;--kt>=0;){for(xt=0,Ke=Ei[kt]%Zn,Qe=Ei[kt]/Zn|0,Wt=Xt,Pt=kt+Wt;Pt>kt;)he=rr[--Wt]%Zn,ce=rr[Wt]/Zn|0,Vt=Qe*he+ce*Ke,he=Ke*he+Vt%Zn*Zn+sn[Pt]+xt,xt=(he/Hn|0)+(Vt/Zn|0)+Qe*ce,sn[Pt--]=he%Hn;sn[Pt]=xt}return xt?++bt:sn.splice(0,1),ye(X,sn,bt)},y.negated=function(){var X=new Rt(this);return X.s=-X.s||null,X},y.plus=function(X,st){var xt,bt=this,kt=bt.s;if(X=new Rt(X,st),st=X.s,!kt||!st)return new Rt(NaN);if(kt!=st)return X.s=-st,bt.minus(X);var Pt=bt.e/gn,Wt=X.e/gn,Vt=bt.c,Xt=X.c;if(!Pt||!Wt){if(!Vt||!Xt)return new Rt(kt/0);if(!Vt[0]||!Xt[0])return Xt[0]?X:new Rt(Vt[0]?bt:kt*0)}if(Pt=vi(Pt),Wt=vi(Wt),Vt=Vt.slice(),kt=Pt-Wt){for(kt>0?(Wt=Pt,xt=Xt):(kt=-kt,xt=Vt),xt.reverse();kt--;xt.push(0));xt.reverse()}for(kt=Vt.length,st=Xt.length,kt-st<0&&(xt=Xt,Xt=Vt,Vt=xt,st=kt),kt=0;st;)kt=(Vt[--st]=Vt[st]+Xt[st]+kt)/Pi|0,Vt[st]=Pi===Vt[st]?0:Vt[st]%Pi;return kt&&(Vt=[kt].concat(Vt),++Wt),ye(X,Vt,Wt)},y.precision=y.sd=function(X,st){var xt,bt,kt,Pt=this;if(X!=null&&X!==!!X)return i(X,1,oi),st==null?st=N:i(st,0,8),se(new Rt(Pt),X,st);if(!(xt=Pt.c))return null;if(kt=xt.length-1,bt=kt*gn+1,kt=xt[kt]){for(;kt%10==0;kt/=10,bt--);for(kt=xt[0];kt>=10;kt/=10,bt++);}return X&&Pt.e+1>bt&&(bt=Pt.e+1),bt},y.shiftedBy=function(X){return i(X,-9007199254740991,al),this.times("1e"+X)},y.squareRoot=y.sqrt=function(){var X,st,xt,bt,kt,Pt=this,Wt=Pt.c,Vt=Pt.s,Xt=Pt.e,he=T+4,ce=new Rt("0.5");if(Vt!==1||!Wt||!Wt[0])return new Rt(!Vt||Vt<0&&(!Wt||Wt[0])?NaN:Wt?Pt:1/0);if(Vt=Math.sqrt(+ge(Pt)),Vt==0||Vt==1/0?(st=yi(Wt),(st.length+Xt)%2==0&&(st+="0"),Vt=Math.sqrt(+st),Xt=vi((Xt+1)/2)-(Xt<0||Xt%2),Vt==1/0?st="5e"+Xt:(st=Vt.toExponential(),st=st.slice(0,st.indexOf("e")+1)+Xt),xt=new Rt(st)):xt=new Rt(Vt+""),xt.c[0]){for(Xt=xt.e,Vt=Xt+he,Vt<3&&(Vt=0);;)if(kt=xt,xt=ce.times(kt.plus(l(Pt,kt,he,1))),yi(kt.c).slice(0,Vt)===(st=yi(xt.c)).slice(0,Vt))if(xt.e<Xt&&--Vt,st=st.slice(Vt-3,Vt+1),st=="9999"||!bt&&st=="4999"){if(!bt&&(se(kt,kt.e+T+2,0),kt.times(kt).eq(Pt))){xt=kt;break}he+=4,Vt+=4,bt=1}else{(!+st||!+st.slice(1)&&st.charAt(0)=="5")&&(se(xt,xt.e+T+2,1),X=!xt.times(xt).eq(Pt));break}}return se(xt,xt.e+T+1,N,X)},y.toExponential=function(X,st){return X!=null&&(i(X,0,oi),X++),qt(this,X,st,1)},y.toFixed=function(X,st){return X!=null&&(i(X,0,oi),X=X+this.e+1),qt(this,X,st)},y.toFormat=function(X,st,xt){var bt,kt=this;if(xt==null)X!=null&&st&&typeof st=="object"?(xt=st,st=null):X&&typeof X=="object"?(xt=X,X=st=null):xt=Oe;else if(typeof xt!="object")throw Error(er+"Argument not an object: "+xt);if(bt=kt.toFixed(X,st),kt.c){var Pt,Wt=bt.split("."),Vt=+xt.groupSize,Xt=+xt.secondaryGroupSize,he=xt.groupSeparator||"",ce=Wt[0],Ae=Wt[1],Ke=kt.s<0,Qe=Ke?ce.slice(1):ce,sn=Qe.length;if(Xt&&(Pt=Vt,Vt=Xt,Xt=Pt,sn-=Pt),Vt>0&&sn>0){for(Pt=sn%Vt||Vt,ce=Qe.substr(0,Pt);Pt<sn;Pt+=Vt)ce+=he+Qe.substr(Pt,Vt);Xt>0&&(ce+=he+Qe.slice(Pt)),Ke&&(ce="-"+ce)}bt=Ae?ce+(xt.decimalSeparator||"")+((Xt=+xt.fractionGroupSize)?Ae.replace(new RegExp("\\d{"+Xt+"}\\B","g"),"$&"+(xt.fractionGroupSeparator||"")):Ae):ce}return(xt.prefix||"")+bt+(xt.suffix||"")},y.toFraction=function(X){var st,xt,bt,kt,Pt,Wt,Vt,Xt,he,ce,Ae,Ke,Qe=this,sn=Qe.c;if(X!=null&&(Vt=new Rt(X),!Vt.isInteger()&&(Vt.c||Vt.s!==1)||Vt.lt(k)))throw Error(er+"Argument "+(Vt.isInteger()?"out of range: ":"not an integer: ")+ge(Vt));if(!sn)return new Rt(Qe);for(st=new Rt(k),he=xt=new Rt(k),bt=Xt=new Rt(k),Ke=yi(sn),Pt=st.e=Ke.length-Qe.e-1,st.c[0]=Uo[(Wt=Pt%gn)<0?gn+Wt:Wt],X=!X||Vt.comparedTo(st)>0?Pt>0?st:he:Vt,Wt=Bt,Bt=1/0,Vt=new Rt(Ke),Xt.c[0]=0;ce=l(Vt,st,0,1),kt=xt.plus(ce.times(bt)),kt.comparedTo(X)!=1;)xt=bt,bt=kt,he=Xt.plus(ce.times(kt=he)),Xt=kt,st=Vt.minus(ce.times(kt=st)),Vt=kt;return kt=l(X.minus(xt),bt,0,1),Xt=Xt.plus(kt.times(he)),xt=xt.plus(kt.times(bt)),Xt.s=he.s=Qe.s,Pt=Pt*2,Ae=l(he,bt,Pt,N).minus(Qe).abs().comparedTo(l(Xt,xt,Pt,N).minus(Qe).abs())<1?[he,bt]:[Xt,xt],Bt=Wt,Ae},y.toNumber=function(){return+ge(this)},y.toPrecision=function(X,st){return X!=null&&i(X,1,oi),qt(this,X,st,2)},y.toString=function(X){var st,xt=this,bt=xt.s,kt=xt.e;return kt===null?bt?(st="Infinity",bt<0&&(st="-"+st)):st="NaN":(X==null?st=kt<=G||kt>=it?m(yi(xt.c),kt):P(yi(xt.c),kt,"0"):X===10&&mn?(xt=se(new Rt(xt),T+kt+1,N),st=P(yi(xt.c),xt.e,"0")):(i(X,2,Ue.length,"Base"),st=h(P(yi(xt.c),kt,"0"),10,X,bt,!0)),bt<0&&xt.c[0]&&(st="-"+st)),st},y.valueOf=y.toJSON=function(){return ge(this)},y._isBigNumber=!0,y[Symbol.toStringTag]="BigNumber",y[Symbol.for("nodejs.util.inspect.custom")]=y.valueOf,s!=null&&Rt.set(s),Rt}function vi(s){var l=s|0;return s>0||s===l?l:l-1}function yi(s){for(var l,h,g=1,y=s.length,k=s[0]+"";g<y;){for(l=s[g++]+"",h=gn-l.length;h--;l="0"+l);k+=l}for(y=k.length;k.charCodeAt(--y)===48;);return k.slice(0,y+1||1)}function Ns(s,l){var h,g,y=s.c,k=l.c,T=s.s,N=l.s,G=s.e,it=l.e;if(!T||!N)return null;if(h=y&&!y[0],g=k&&!k[0],h||g)return h?g?0:-N:T;if(T!=N)return T;if(h=T<0,g=G==it,!y||!k)return g?0:!y^h?1:-1;if(!g)return G>it^h?1:-1;for(N=(G=y.length)<(it=k.length)?G:it,T=0;T<N;T++)if(y[T]!=k[T])return y[T]>k[T]^h?1:-1;return G==it?0:G>it^h?1:-1}function i(s,l,h,g){if(s<l||s>h||s!==Or(s))throw Error(er+(g||"Argument")+(typeof s=="number"?s<l||s>h?" out of range: ":" not an integer: ":" not a primitive number: ")+String(s))}function c(s){var l=s.c.length-1;return vi(s.e/gn)==l&&s.c[l]%2!=0}function m(s,l){return(s.length>1?s.charAt(0)+"."+s.slice(1):s)+(l<0?"e":"e+")+l}function P(s,l,h){var g,y;if(l<0){for(y=h+".";++l;y+=h);s=y+s}else if(g=s.length,++l>g){for(y=h,l-=g;--l;y+=h);s+=y}else l<g&&(s=s.slice(0,l)+"."+s.slice(l));return s}var F=Dl(),at=F,$t=class{constructor(s){Re(this,"key");Re(this,"left",null);Re(this,"right",null);this.key=s}},fe=class extends $t{constructor(s){super(s)}},_e=class{constructor(){Re(this,"size",0);Re(this,"modificationCount",0);Re(this,"splayCount",0)}splay(s){let l=this.root;if(l==null)return this.compare(s,s),-1;let h=null,g=null,y=null,k=null,T=l,N=this.compare,G;for(;;)if(G=N(T.key,s),G>0){let it=T.left;if(it==null||(G=N(it.key,s),G>0&&(T.left=it.right,it.right=T,T=it,it=T.left,it==null)))break;h==null?g=T:h.left=T,h=T,T=it}else if(G<0){let it=T.right;if(it==null||(G=N(it.key,s),G<0&&(T.right=it.left,it.left=T,T=it,it=T.right,it==null)))break;y==null?k=T:y.right=T,y=T,T=it}else break;return y!=null&&(y.right=T.left,T.left=k),h!=null&&(h.left=T.right,T.right=g),this.root!==T&&(this.root=T,this.splayCount++),G}splayMin(s){let l=s,h=l.left;for(;h!=null;){let g=h;l.left=g.right,g.right=l,l=g,h=l.left}return l}splayMax(s){let l=s,h=l.right;for(;h!=null;){let g=h;l.right=g.left,g.left=l,l=g,h=l.right}return l}_delete(s){if(this.root==null||this.splay(s)!=0)return null;let l=this.root,h=l,g=l.left;if(this.size--,g==null)this.root=l.right;else{let y=l.right;l=this.splayMax(g),l.right=y,this.root=l}return this.modificationCount++,h}addNewRoot(s,l){this.size++,this.modificationCount++;let h=this.root;if(h==null){this.root=s;return}l<0?(s.left=h,s.right=h.right,h.right=null):(s.right=h,s.left=h.left,h.left=null),this.root=s}_first(){let s=this.root;return s==null?null:(this.root=this.splayMin(s),this.root)}_last(){let s=this.root;return s==null?null:(this.root=this.splayMax(s),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(s){return this.validKey(s)&&this.splay(s)==0}defaultCompare(){return(s,l)=>s<l?-1:s>l?1:0}wrap(){return{getRoot:()=>this.root,setRoot:s=>{this.root=s},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:s=>{this.splayCount=s},splay:s=>this.splay(s),has:s=>this.has(s)}}},Me=class sc extends _e{constructor(h,g){super();Re(this,"root",null);Re(this,"compare");Re(this,"validKey");Re(this,Ve,"[object Set]");this.compare=h??this.defaultCompare(),this.validKey=g??(y=>y!=null&&y!=null)}delete(h){return this.validKey(h)?this._delete(h)!=null:!1}deleteAll(h){for(let g of h)this.delete(g)}forEach(h){let g=this[Symbol.iterator](),y;for(;y=g.next(),!y.done;)h(y.value,y.value,this)}add(h){let g=this.splay(h);return g!=0&&this.addNewRoot(new fe(h),g),this}addAndReturn(h){let g=this.splay(h);return g!=0&&this.addNewRoot(new fe(h),g),this.root.key}addAll(h){for(let g of h)this.add(g)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(h){if(h==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(h)<0)return this.root.key;let g=this.root.left;if(g==null)return null;let y=g.right;for(;y!=null;)g=y,y=g.right;return g.key}firstAfter(h){if(h==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(h)>0)return this.root.key;let g=this.root.right;if(g==null)return null;let y=g.left;for(;y!=null;)g=y,y=g.left;return g.key}retainAll(h){let g=new sc(this.compare,this.validKey),y=this.modificationCount;for(let k of h){if(y!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(k)&&this.splay(k)==0&&g.add(this.root.key)}g.size!=this.size&&(this.root=g.root,this.size=g.size,this.modificationCount++)}lookup(h){return!this.validKey(h)||this.splay(h)!=0?null:this.root.key}intersection(h){let g=new sc(this.compare,this.validKey);for(let y of this)h.has(y)&&g.add(y);return g}difference(h){let g=new sc(this.compare,this.validKey);for(let y of this)h.has(y)||g.add(y);return g}union(h){let g=this.clone();return g.addAll(h),g}clone(){let h=new sc(this.compare,this.validKey);return h.size=this.size,h.root=this.copyNode(this.root),h}copyNode(h){if(h==null)return null;function g(k,T){let N,G;do{if(N=k.left,G=k.right,N!=null){let it=new fe(N.key);T.left=it,g(N,it)}if(G!=null){let it=new fe(G.key);T.right=it,k=G,T=it}}while(G!=null)}let y=new fe(h.key);return g(h,y),y}toSet(){return this.clone()}entries(){return new Mn(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(cn=Symbol.iterator,Ve=Symbol.toStringTag,cn)](){return new ln(this.wrap())}},We=class{constructor(s){Re(this,"tree");Re(this,"path",new Array);Re(this,"modificationCount",null);Re(this,"splayCount");this.tree=s,this.splayCount=s.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let s=this.path[this.path.length-1];return this.getValue(s)}rebuildPath(s){this.path.splice(0,this.path.length),this.tree.splay(s),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(s){for(;s!=null;)this.path.push(s),s=s.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let h=this.tree.getRoot();for(;h!=null;)this.path.push(h),h=h.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let s=this.path[this.path.length-1],l=s.right;if(l!=null){for(;l!=null;)this.path.push(l),l=l.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===s;)s=this.path.pop();return this.path.length>0}},ln=class extends We{getValue(s){return s.key}},Mn=class extends We{getValue(s){return[s.key,s.key]}},_i=s=>s,Rr=s=>{if(s){let l=new Me(_o(s)),h=new Me(_o(s)),g=(k,T)=>T.addAndReturn(k),y=k=>({x:g(k.x,l),y:g(k.y,h)});return y({x:new at(0),y:new at(0)}),y}return _i},Si=s=>({set:l=>{br=Si(l)},reset:()=>Si(s),compare:_o(s),snap:Rr(s),orient:Ts(s)}),br=Si(),Ds=(s,l)=>s.ll.x.isLessThanOrEqualTo(l.x)&&l.x.isLessThanOrEqualTo(s.ur.x)&&s.ll.y.isLessThanOrEqualTo(l.y)&&l.y.isLessThanOrEqualTo(s.ur.y),Ol=(s,l)=>{if(l.ur.x.isLessThan(s.ll.x)||s.ur.x.isLessThan(l.ll.x)||l.ur.y.isLessThan(s.ll.y)||s.ur.y.isLessThan(l.ll.y))return null;let h=s.ll.x.isLessThan(l.ll.x)?l.ll.x:s.ll.x,g=s.ur.x.isLessThan(l.ur.x)?s.ur.x:l.ur.x,y=s.ll.y.isLessThan(l.ll.y)?l.ll.y:s.ll.y,k=s.ur.y.isLessThan(l.ur.y)?s.ur.y:l.ur.y;return{ll:{x:h,y},ur:{x:g,y:k}}},hs=(s,l)=>s.x.times(l.y).minus(s.y.times(l.x)),Yi=(s,l)=>s.x.times(l.x).plus(s.y.times(l.y)),ji=s=>Yi(s,s).sqrt(),$u=(s,l,h)=>{let g={x:l.x.minus(s.x),y:l.y.minus(s.y)},y={x:h.x.minus(s.x),y:h.y.minus(s.y)};return hs(y,g).div(ji(y)).div(ji(g))},Rl=(s,l,h)=>{let g={x:l.x.minus(s.x),y:l.y.minus(s.y)},y={x:h.x.minus(s.x),y:h.y.minus(s.y)};return Yi(y,g).div(ji(y)).div(ji(g))},Yn=(s,l,h)=>l.y.isZero()?null:{x:s.x.plus(l.x.div(l.y).times(h.minus(s.y))),y:h},ai=(s,l,h)=>l.x.isZero()?null:{x:h,y:s.y.plus(l.y.div(l.x).times(h.minus(s.x)))},Vu=(s,l,h,g)=>{if(l.x.isZero())return ai(h,g,s.x);if(g.x.isZero())return ai(s,l,h.x);if(l.y.isZero())return Yn(h,g,s.y);if(g.y.isZero())return Yn(s,l,h.y);let y=hs(l,g);if(y.isZero())return null;let k={x:h.x.minus(s.x),y:h.y.minus(s.y)},T=hs(k,l).div(y),N=hs(k,g).div(y),G=s.x.plus(N.times(l.x)),it=h.x.plus(T.times(g.x)),It=s.y.plus(N.times(l.y)),Bt=h.y.plus(T.times(g.y)),ee=G.plus(it).div(2),de=It.plus(Bt).div(2);return{x:ee,y:de}},Os=class E1{constructor(l,h){Re(this,"point");Re(this,"isLeft");Re(this,"segment");Re(this,"otherSE");Re(this,"consumedBy");l.events===void 0?l.events=[this]:l.events.push(this),this.point=l,this.isLeft=h}static compare(l,h){let g=E1.comparePoints(l.point,h.point);return g!==0?g:(l.point!==h.point&&l.link(h),l.isLeft!==h.isLeft?l.isLeft?1:-1:qo.compare(l.segment,h.segment))}static comparePoints(l,h){return l.x.isLessThan(h.x)?-1:l.x.isGreaterThan(h.x)?1:l.y.isLessThan(h.y)?-1:l.y.isGreaterThan(h.y)?1:0}link(l){if(l.point===this.point)throw new Error("Tried to link already linked events");let h=l.point.events;for(let g=0,y=h.length;g<y;g++){let k=h[g];this.point.events.push(k),k.point=this.point}this.checkForConsuming()}checkForConsuming(){let l=this.point.events.length;for(let h=0;h<l;h++){let g=this.point.events[h];if(g.segment.consumedBy===void 0)for(let y=h+1;y<l;y++){let k=this.point.events[y];k.consumedBy===void 0&&g.otherSE.point.events===k.otherSE.point.events&&g.segment.consume(k.segment)}}}getAvailableLinkedEvents(){let l=[];for(let h=0,g=this.point.events.length;h<g;h++){let y=this.point.events[h];y!==this&&!y.segment.ringOut&&y.segment.isInResult()&&l.push(y)}return l}getLeftmostComparator(l){let h=new Map,g=y=>{let k=y.otherSE;h.set(y,{sine:$u(this.point,l.point,k.point),cosine:Rl(this.point,l.point,k.point)})};return(y,k)=>{h.has(y)||g(y),h.has(k)||g(k);let{sine:T,cosine:N}=h.get(y),{sine:G,cosine:it}=h.get(k);return T.isGreaterThanOrEqualTo(0)&&G.isGreaterThanOrEqualTo(0)?N.isLessThan(it)?1:N.isGreaterThan(it)?-1:0:T.isLessThan(0)&&G.isLessThan(0)?N.isLessThan(it)?-1:N.isGreaterThan(it)?1:0:G.isLessThan(T)?-1:G.isGreaterThan(T)?1:0}}},lu=0,qo=class hh{constructor(l,h,g,y){Re(this,"id");Re(this,"leftSE");Re(this,"rightSE");Re(this,"rings");Re(this,"windings");Re(this,"ringOut");Re(this,"consumedBy");Re(this,"prev");Re(this,"_prevInResult");Re(this,"_beforeState");Re(this,"_afterState");Re(this,"_isInResult");this.id=++lu,this.leftSE=l,l.segment=this,l.otherSE=h,this.rightSE=h,h.segment=this,h.otherSE=l,this.rings=g,this.windings=y}static compare(l,h){let g=l.leftSE.point.x,y=h.leftSE.point.x,k=l.rightSE.point.x,T=h.rightSE.point.x;if(T.isLessThan(g))return 1;if(k.isLessThan(y))return-1;let N=l.leftSE.point.y,G=h.leftSE.point.y,it=l.rightSE.point.y,It=h.rightSE.point.y;if(g.isLessThan(y)){if(G.isLessThan(N)&&G.isLessThan(it))return 1;if(G.isGreaterThan(N)&&G.isGreaterThan(it))return-1;let Bt=l.comparePoint(h.leftSE.point);if(Bt<0)return 1;if(Bt>0)return-1;let ee=h.comparePoint(l.rightSE.point);return ee!==0?ee:-1}if(g.isGreaterThan(y)){if(N.isLessThan(G)&&N.isLessThan(It))return-1;if(N.isGreaterThan(G)&&N.isGreaterThan(It))return 1;let Bt=h.comparePoint(l.leftSE.point);if(Bt!==0)return Bt;let ee=l.comparePoint(h.rightSE.point);return ee<0?1:ee>0?-1:1}if(N.isLessThan(G))return-1;if(N.isGreaterThan(G))return 1;if(k.isLessThan(T)){let Bt=h.comparePoint(l.rightSE.point);if(Bt!==0)return Bt}if(k.isGreaterThan(T)){let Bt=l.comparePoint(h.rightSE.point);if(Bt<0)return 1;if(Bt>0)return-1}if(!k.eq(T)){let Bt=it.minus(N),ee=k.minus(g),de=It.minus(G),Pe=T.minus(y);if(Bt.isGreaterThan(ee)&&de.isLessThan(Pe))return 1;if(Bt.isLessThan(ee)&&de.isGreaterThan(Pe))return-1}return k.isGreaterThan(T)?1:k.isLessThan(T)||it.isLessThan(It)?-1:it.isGreaterThan(It)?1:l.id<h.id?-1:l.id>h.id?1:0}static fromRing(l,h,g){let y,k,T,N=Os.comparePoints(l,h);if(N<0)y=l,k=h,T=1;else if(N>0)y=h,k=l,T=-1;else throw new Error(`Tried to create degenerate segment at [${l.x}, ${l.y}]`);let G=new Os(y,!0),it=new Os(k,!1);return new hh(G,it,[g],[T])}replaceRightSE(l){this.rightSE=l,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let l=this.leftSE.point.y,h=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:l.isLessThan(h)?l:h},ur:{x:this.rightSE.point.x,y:l.isGreaterThan(h)?l:h}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(l){return l.x.eq(this.leftSE.point.x)&&l.y.eq(this.leftSE.point.y)||l.x.eq(this.rightSE.point.x)&&l.y.eq(this.rightSE.point.y)}comparePoint(l){return br.orient(this.leftSE.point,l,this.rightSE.point)}getIntersection(l){let h=this.bbox(),g=l.bbox(),y=Ol(h,g);if(y===null)return null;let k=this.leftSE.point,T=this.rightSE.point,N=l.leftSE.point,G=l.rightSE.point,it=Ds(h,N)&&this.comparePoint(N)===0,It=Ds(g,k)&&l.comparePoint(k)===0,Bt=Ds(h,G)&&this.comparePoint(G)===0,ee=Ds(g,T)&&l.comparePoint(T)===0;if(It&&it)return ee&&!Bt?T:!ee&&Bt?G:null;if(It)return Bt&&k.x.eq(G.x)&&k.y.eq(G.y)?null:k;if(it)return ee&&T.x.eq(N.x)&&T.y.eq(N.y)?null:N;if(ee&&Bt)return null;if(ee)return T;if(Bt)return G;let de=Vu(k,this.vector(),N,l.vector());return de===null||!Ds(y,de)?null:br.snap(de)}split(l){let h=[],g=l.events!==void 0,y=new Os(l,!0),k=new Os(l,!1),T=this.rightSE;this.replaceRightSE(k),h.push(k),h.push(y);let N=new hh(y,T,this.rings.slice(),this.windings.slice());return Os.comparePoints(N.leftSE.point,N.rightSE.point)>0&&N.swapEvents(),Os.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),g&&(y.checkForConsuming(),k.checkForConsuming()),h}swapEvents(){let l=this.rightSE;this.rightSE=this.leftSE,this.leftSE=l,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let h=0,g=this.windings.length;h<g;h++)this.windings[h]*=-1}consume(l){let h=this,g=l;for(;h.consumedBy;)h=h.consumedBy;for(;g.consumedBy;)g=g.consumedBy;let y=hh.compare(h,g);if(y!==0){if(y>0){let k=h;h=g,g=k}if(h.prev===g){let k=h;h=g,g=k}for(let k=0,T=g.rings.length;k<T;k++){let N=g.rings[k],G=g.windings[k],it=h.rings.indexOf(N);it===-1?(h.rings.push(N),h.windings.push(G)):h.windings[it]+=G}g.rings=null,g.windings=null,g.consumedBy=h,g.leftSE.consumedBy=h.leftSE,g.rightSE.consumedBy=h.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let l=this.prev.consumedBy||this.prev;this._beforeState=l.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let l=this.beforeState();this._afterState={rings:l.rings.slice(0),windings:l.windings.slice(0),multiPolys:[]};let h=this._afterState.rings,g=this._afterState.windings,y=this._afterState.multiPolys;for(let N=0,G=this.rings.length;N<G;N++){let it=this.rings[N],It=this.windings[N],Bt=h.indexOf(it);Bt===-1?(h.push(it),g.push(It)):g[Bt]+=It}let k=[],T=[];for(let N=0,G=h.length;N<G;N++){if(g[N]===0)continue;let it=h[N],It=it.poly;if(T.indexOf(It)===-1)if(it.isExterior)k.push(It);else{T.indexOf(It)===-1&&T.push(It);let Bt=k.indexOf(it.poly);Bt!==-1&&k.splice(Bt,1)}}for(let N=0,G=k.length;N<G;N++){let it=k[N].multiPoly;y.indexOf(it)===-1&&y.push(it)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let l=this.beforeState().multiPolys,h=this.afterState().multiPolys;switch(hu.type){case"union":{let g=l.length===0,y=h.length===0;this._isInResult=g!==y;break}case"intersection":{let g,y;l.length<h.length?(g=l.length,y=h.length):(g=h.length,y=l.length),this._isInResult=y===hu.numMultiPolys&&g<y;break}case"xor":{let g=Math.abs(l.length-h.length);this._isInResult=g%2===1;break}case"difference":{let g=y=>y.length===1&&y[0].isSubject;this._isInResult=g(l)!==g(h);break}}return this._isInResult}},ll=class{constructor(s,l,h){Re(this,"poly");Re(this,"isExterior");Re(this,"segments");Re(this,"bbox");if(!Array.isArray(s)||s.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=l,this.isExterior=h,this.segments=[],typeof s[0][0]!="number"||typeof s[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let g=br.snap({x:new at(s[0][0]),y:new at(s[0][1])});this.bbox={ll:{x:g.x,y:g.y},ur:{x:g.x,y:g.y}};let y=g;for(let k=1,T=s.length;k<T;k++){if(typeof s[k][0]!="number"||typeof s[k][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let N=br.snap({x:new at(s[k][0]),y:new at(s[k][1])});N.x.eq(y.x)&&N.y.eq(y.y)||(this.segments.push(qo.fromRing(y,N,this)),N.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=N.x),N.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=N.y),N.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=N.x),N.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=N.y),y=N)}(!g.x.eq(y.x)||!g.y.eq(y.y))&&this.segments.push(qo.fromRing(y,g,this))}getSweepEvents(){let s=[];for(let l=0,h=this.segments.length;l<h;l++){let g=this.segments[l];s.push(g.leftSE),s.push(g.rightSE)}return s}},uu=class{constructor(s,l){Re(this,"multiPoly");Re(this,"exteriorRing");Re(this,"interiorRings");Re(this,"bbox");if(!Array.isArray(s))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new ll(s[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let h=1,g=s.length;h<g;h++){let y=new ll(s[h],this,!1);y.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=y.bbox.ll.x),y.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=y.bbox.ll.y),y.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=y.bbox.ur.x),y.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=y.bbox.ur.y),this.interiorRings.push(y)}this.multiPoly=l}getSweepEvents(){let s=this.exteriorRing.getSweepEvents();for(let l=0,h=this.interiorRings.length;l<h;l++){let g=this.interiorRings[l].getSweepEvents();for(let y=0,k=g.length;y<k;y++)s.push(g[y])}return s}},Ic=class{constructor(s,l){Re(this,"isSubject");Re(this,"polys");Re(this,"bbox");if(!Array.isArray(s))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof s[0][0][0]=="number"&&(s=[s])}catch{}this.polys=[],this.bbox={ll:{x:new at(Number.POSITIVE_INFINITY),y:new at(Number.POSITIVE_INFINITY)},ur:{x:new at(Number.NEGATIVE_INFINITY),y:new at(Number.NEGATIVE_INFINITY)}};for(let h=0,g=s.length;h<g;h++){let y=new uu(s[h],this);y.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=y.bbox.ll.x),y.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=y.bbox.ll.y),y.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=y.bbox.ur.x),y.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=y.bbox.ur.y),this.polys.push(y)}this.isSubject=l}getSweepEvents(){let s=[];for(let l=0,h=this.polys.length;l<h;l++){let g=this.polys[l].getSweepEvents();for(let y=0,k=g.length;y<k;y++)s.push(g[y])}return s}},cu=class md{constructor(l){Re(this,"events");Re(this,"poly");Re(this,"_isExteriorRing");Re(this,"_enclosingRing");this.events=l;for(let h=0,g=l.length;h<g;h++)l[h].segment.ringOut=this;this.poly=null}static factory(l){let h=[];for(let g=0,y=l.length;g<y;g++){let k=l[g];if(!k.isInResult()||k.ringOut)continue;let T=null,N=k.leftSE,G=k.rightSE,it=[N],It=N.point,Bt=[];for(;T=N,N=G,it.push(N),N.point!==It;)for(;;){let ee=N.getAvailableLinkedEvents();if(ee.length===0){let Oe=it[0].point,Ue=it[it.length-1].point;throw new Error(`Unable to complete output ring starting at [${Oe.x}, ${Oe.y}]. Last matching segment found ends at [${Ue.x}, ${Ue.y}].`)}if(ee.length===1){G=ee[0].otherSE;break}let de=null;for(let Oe=0,Ue=Bt.length;Oe<Ue;Oe++)if(Bt[Oe].point===N.point){de=Oe;break}if(de!==null){let Oe=Bt.splice(de)[0],Ue=it.splice(Oe.index);Ue.unshift(Ue[0].otherSE),h.push(new md(Ue.reverse()));continue}Bt.push({index:it.length,point:N.point});let Pe=N.getLeftmostComparator(T);G=ee.sort(Pe)[0].otherSE;break}h.push(new md(it))}return h}getGeom(){let l=this.events[0].point,h=[l];for(let it=1,It=this.events.length-1;it<It;it++){let Bt=this.events[it].point,ee=this.events[it+1].point;br.orient(Bt,l,ee)!==0&&(h.push(Bt),l=Bt)}if(h.length===1)return null;let g=h[0],y=h[1];br.orient(g,l,y)===0&&h.shift(),h.push(h[0]);let k=this.isExteriorRing()?1:-1,T=this.isExteriorRing()?0:h.length-1,N=this.isExteriorRing()?h.length:-1,G=[];for(let it=T;it!=N;it+=k)G.push([h[it].x.toNumber(),h[it].y.toNumber()]);return G}isExteriorRing(){if(this._isExteriorRing===void 0){let l=this.enclosingRing();this._isExteriorRing=l?!l.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var y,k;let l=this.events[0];for(let T=1,N=this.events.length;T<N;T++){let G=this.events[T];Os.compare(l,G)>0&&(l=G)}let h=l.segment.prevInResult(),g=h?h.prevInResult():null;for(;;){if(!h)return null;if(!g)return h.ringOut;if(g.ringOut!==h.ringOut)return((y=g.ringOut)==null?void 0:y.enclosingRing())!==h.ringOut?h.ringOut:(k=h.ringOut)==null?void 0:k.enclosingRing();h=g.prevInResult(),g=h?h.prevInResult():null}}},Il=class{constructor(s){Re(this,"exteriorRing");Re(this,"interiorRings");this.exteriorRing=s,s.poly=this,this.interiorRings=[]}addInterior(s){this.interiorRings.push(s),s.poly=this}getGeom(){let s=this.exteriorRing.getGeom();if(s===null)return null;let l=[s];for(let h=0,g=this.interiorRings.length;h<g;h++){let y=this.interiorRings[h].getGeom();y!==null&&l.push(y)}return l}},Fl=class{constructor(s){Re(this,"rings");Re(this,"polys");this.rings=s,this.polys=this._composePolys(s)}getGeom(){let s=[];for(let l=0,h=this.polys.length;l<h;l++){let g=this.polys[l].getGeom();g!==null&&s.push(g)}return s}_composePolys(s){var h;let l=[];for(let g=0,y=s.length;g<y;g++){let k=s[g];if(!k.poly)if(k.isExteriorRing())l.push(new Il(k));else{let T=k.enclosingRing();T!=null&&T.poly||l.push(new Il(T)),(h=T==null?void 0:T.poly)==null||h.addInterior(k)}}return l}},Hu=class{constructor(s,l=qo.compare){Re(this,"queue");Re(this,"tree");Re(this,"segments");this.queue=s,this.tree=new Me(l),this.segments=[]}process(s){let l=s.segment,h=[];if(s.consumedBy)return s.isLeft?this.queue.delete(s.otherSE):this.tree.delete(l),h;s.isLeft&&this.tree.add(l);let g=l,y=l;do g=this.tree.lastBefore(g);while(g!=null&&g.consumedBy!=null);do y=this.tree.firstAfter(y);while(y!=null&&y.consumedBy!=null);if(s.isLeft){let k=null;if(g){let N=g.getIntersection(l);if(N!==null&&(l.isAnEndpoint(N)||(k=N),!g.isAnEndpoint(N))){let G=this._splitSafely(g,N);for(let it=0,It=G.length;it<It;it++)h.push(G[it])}}let T=null;if(y){let N=y.getIntersection(l);if(N!==null&&(l.isAnEndpoint(N)||(T=N),!y.isAnEndpoint(N))){let G=this._splitSafely(y,N);for(let it=0,It=G.length;it<It;it++)h.push(G[it])}}if(k!==null||T!==null){let N=null;k===null?N=T:T===null?N=k:N=Os.comparePoints(k,T)<=0?k:T,this.queue.delete(l.rightSE),h.push(l.rightSE);let G=l.split(N);for(let it=0,It=G.length;it<It;it++)h.push(G[it])}h.length>0?(this.tree.delete(l),h.push(s)):(this.segments.push(l),l.prev=g)}else{if(g&&y){let k=g.getIntersection(y);if(k!==null){if(!g.isAnEndpoint(k)){let T=this._splitSafely(g,k);for(let N=0,G=T.length;N<G;N++)h.push(T[N])}if(!y.isAnEndpoint(k)){let T=this._splitSafely(y,k);for(let N=0,G=T.length;N<G;N++)h.push(T[N])}}}this.tree.delete(l)}return h}_splitSafely(s,l){this.tree.delete(s);let h=s.rightSE;this.queue.delete(h);let g=s.split(l);return g.push(h),s.consumedBy===void 0&&this.tree.add(s),g}},af=class{constructor(){Re(this,"type");Re(this,"numMultiPolys")}run(s,l,h){ul.type=s;let g=[new Ic(l,!0)];for(let G=0,it=h.length;G<it;G++)g.push(new Ic(h[G],!1));if(ul.numMultiPolys=g.length,ul.type==="difference"){let G=g[0],it=1;for(;it<g.length;)Ol(g[it].bbox,G.bbox)!==null?it++:g.splice(it,1)}if(ul.type==="intersection")for(let G=0,it=g.length;G<it;G++){let It=g[G];for(let Bt=G+1,ee=g.length;Bt<ee;Bt++)if(Ol(It.bbox,g[Bt].bbox)===null)return[]}let y=new Me(Os.compare);for(let G=0,it=g.length;G<it;G++){let It=g[G].getSweepEvents();for(let Bt=0,ee=It.length;Bt<ee;Bt++)y.add(It[Bt])}let k=new Hu(y),T=null;for(y.size!=0&&(T=y.first(),y.delete(T));T;){let G=k.process(T);for(let it=0,It=G.length;it<It;it++){let Bt=G[it];Bt.consumedBy===void 0&&y.add(Bt)}y.size!=0?(T=y.first(),y.delete(T)):T=null}br.reset();let N=cu.factory(k.segments);return new Fl(N).getGeom()}},ul=new af,hu=ul,lf=(s,...l)=>hu.run("intersection",s,l),uf=(s,...l)=>hu.run("difference",s,l);br.set;function fu(s){let l={type:"Feature"};return l.geometry=s,l}function du(s){return s.type==="Feature"?s.geometry:s}function Fc(s){return s&&s.geometry&&s.geometry.coordinates?s.geometry.coordinates:s}function jc(s){return fu({type:"LineString",coordinates:s})}function pu(s){return fu({type:"MultiLineString",coordinates:s})}function zc(s){return fu({type:"Polygon",coordinates:s})}function Uc(s){return fu({type:"MultiPolygon",coordinates:s})}function qc(s,l){let h=du(s),g=du(l),y=lf(h.coordinates,g.coordinates);return y.length===0?null:y.length===1?zc(y[0]):Uc(y)}function d(s,l){let h=du(s),g=du(l),y=uf(h.coordinates,g.coordinates);return y.length===0?null:y.length===1?zc(y[0]):Uc(y)}function _(s){return Array.isArray(s)?1+_(s[0]):-1}function E(s){s instanceof L.Polyline&&(s=s.toGeoJSON(15));let l=Fc(s),h=_(l),g=[];return h>1?l.forEach(y=>{g.push(jc(y))}):g.push(s),g}function R(s){let l=[];return s.eachLayer(h=>{l.push(Fc(h.toGeoJSON(15)))}),pu(l)}Lr.Cut=Lr.Polygon.extend({initialize(s){this._map=s,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let s=this._layer.getLatLngs();if(s.length<=2)return;let l=L.polygon(s,this.options.pathOptions);l._latlngInfos=this._layer._latlngInfo,this.cut(l),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:g,originalLayer:y})=>{this._fireCut(y,g,y),this._fireCut(this._map,g,y),y.pm._fireEdit()}),this._editedLayers=[];let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))},cut(s){let l=this._map._layers,h=s._latlngInfos||[];Object.keys(l).map(g=>l[g]).filter(g=>g.pm).filter(g=>!g._pmTempLayer).filter(g=>!L.PM.optIn&&!g.options.pmIgnore||L.PM.optIn&&g.options.pmIgnore===!1).filter(g=>g instanceof L.Polyline).filter(g=>g!==s).filter(g=>g.pm.options.allowCutting).filter(g=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(g)>-1:!0).filter(g=>!this._layerGroup.hasLayer(g)).filter(g=>{try{let y=!!gi(s.toGeoJSON(15),g.toGeoJSON(15)).features.length>0;return y||g instanceof L.Polyline&&!(g instanceof L.Polygon)?y:!!qc(s.toGeoJSON(15),g.toGeoJSON(15))}catch{return g instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(g=>{let y;if(g instanceof L.Polygon){y=L.polygon(g.getLatLngs());let G=y.getLatLngs();h.forEach(it=>{if(it&&it.snapInfo){let{latlng:It}=it,Bt=this._calcClosestLayer(It,[y]);if(Bt&&Bt.segment&&Bt.distance<this.options.snapDistance){let{segment:ee}=Bt;if(ee&&ee.length===2){let{indexPath:de,parentPath:Pe,newIndex:Oe}=L.PM.Utils._getIndexFromSegment(G,ee);(de.length>1?(0,tr.default)(G,Pe):G).splice(Oe,0,It)}}}})}else y=g;let k=this._cutLayer(s,y),T=L.geoJSON(k,g.options);T.getLayers().length===1&&([T]=T.getLayers()),this._setPane(T,"layerPane");let N=T.addTo(this._map.pm._getContainingLayer());if(N.pm.enable(g.pm.options),N.pm.disable(),g._pmTempLayer=!0,s._pmTempLayer=!0,g.remove(),g.removeFrom(this._map.pm._getContainingLayer()),s.remove(),s.removeFrom(this._map.pm._getContainingLayer()),N.getLayers&&N.getLayers().length===0&&this._map.pm.removeLayer({target:N}),N instanceof L.LayerGroup?(N.eachLayer(G=>{this._addDrawnLayerProp(G)}),this._addDrawnLayerProp(N)):this._addDrawnLayerProp(N),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let G=this.options.layersToCut.indexOf(g);G>-1&&this.options.layersToCut.splice(G,1)}this._editedLayers.push({layer:N,originalLayer:g})})},_cutLayer(s,l){let h=L.geoJSON(),g;if(l instanceof L.Polygon)g=d(l.toGeoJSON(15),s.toGeoJSON(15));else{let y=E(l);y.forEach(k=>{let T=mi(k,s.toGeoJSON(15)),N;T&&T.features.length>0?N=L.geoJSON(T):N=L.geoJSON(k),N.getLayers().forEach(G=>{mo(s.toGeoJSON(15),G.toGeoJSON(15))||G.addTo(h)})}),y.length>1?g=R(h):g=h.toGeoJSON(15)}return g},_change:L.Util.falseFn}),Lr.Text=Lr.extend({initialize(s){this._map=s,this._shape="Text",this.toolbarButtonName="drawText"},enable(s){L.Util.setOptions(this,s),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(un("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var s;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(s=this._hintMarker)==null||s.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let l=s;l.target=this._hintMarker,this._handleSnapping(l)}},_createMarker(s){var y,k,T,N;if(!s.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let l=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(y=this.options.textOptions)==null?void 0:y.className){let G=this.options.textOptions.className.split(" ");this.textArea.classList.add(...G)}let h=this._createTextIcon(this.textArea),g=new L.Marker(l,{textMarker:!0,_textMarkerOverPM:!0,icon:h});if(this._setPane(g,"markerPane"),this._finishLayer(g),g.pm||(g.options.draggable=!1),g.addTo(this._map.pm._getContainingLayer()),g.pm){g.pm.textArea=this.textArea,L.setOptions(g.pm,{removeIfEmpty:((k=this.options.textOptions)==null?void 0:k.removeIfEmpty)??!0});let G=((T=this.options.textOptions)==null?void 0:T.focusAfterDraw)??!0;g.pm._createTextMarker(G),(N=this.options.textOptions)!=null&&N.text&&g.pm.setText(this.options.textOptions.text)}this._fireCreate(g),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(s){this.enable(),this._hintMarker.setLatLng(s.latlng)},_createTextArea(){let s=document.createElement("textarea");return s.readOnly=!0,s.classList.add("pm-textarea","pm-disabled"),s},_createTextIcon(s){return L.divIcon({className:"pm-text-marker",html:s})}});var rt={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,Tr(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let s=this._getDOMElem();s&&(Tr(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(s)):L.DomEvent.on(s,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,Tr(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let s=this._getDOMElem();s&&(Tr(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(s)):L.DomEvent.off(s,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(s){let l=s.touches?s.touches[0]:s,h={originalEvent:l,target:this._layer};return h.containerPoint=this._map.mouseEventToContainerPoint(l),h.latlng=this._map.containerPointToLatLng(h.containerPoint),this._dragMixinOnMouseDown(h),!1},_simulateMouseMoveEvent(s){let l=s.touches?s.touches[0]:s,h={originalEvent:l,target:this._layer};return h.containerPoint=this._map.mouseEventToContainerPoint(l),h.latlng=this._map.containerPointToLatLng(h.containerPoint),this._dragMixinOnMouseMove(h),!1},_simulateMouseUpEvent(s){let l={originalEvent:s.touches?s.touches[0]:s,target:this._layer};return s.type.indexOf("touch")===-1&&(l.containerPoint=this._map.mouseEventToContainerPoint(s),l.latlng=this._map.containerPointToLatLng(l.containerPoint)),this._dragMixinOnMouseUp(l),!1},_dragMixinOnMouseDown(s){if(s.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(s);let l=s._fromLayerSync,h=this._syncLayers("_dragMixinOnMouseDown",s);if(this._layer instanceof L.Marker&&(this.options.snappable&&!l&&!h?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let g="resizeableCircleMarker";this._layer instanceof L.Circle&&(g="resizeableCircle"),this.options.snappable&&!l&&!h?this._layer.pm.options[g]||this._initSnappableMarkersDrag():this._layer.pm.options[g]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=s.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(s){this._overwriteEventIfItComesFromMarker(s);let l=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",s),this._dragging||(this._dragging=!0,L.DomUtil.addClass(l,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=s.latlng),this._onLayerDrag(s),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(s){let l=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",s),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,l&&L.DomUtil.removeClass(l,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(s){let{latlng:l}=s,h={lat:l.lat-this._tempDragCoord.lat,lng:l.lng-this._tempDragCoord.lng},g=y=>y.map(k=>{if(Array.isArray(k))return g(k);let T={lat:k.lat+h.lat,lng:k.lng+h.lng};return(k.alt||k.alt===0)&&(T.alt=k.alt),T});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let y=g([this._layer.getLatLng()]);this._layer.setLatLng(y[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let y=this._layer.getLatLng();this._layer._snapped&&(y=this._layer._orgLatLng);let k=g([y]);this._layer.setLatLng(k[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let y=g([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(y),this._fireChange(this._layer.getBounds(),"Edit")}else{let y=g(this._layer.getLatLngs());this._layer.setLatLngs(y),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=l,s.layer=this._layer,this._fireDrag(s)},addDraggingClass(){let s=this._getDOMElem();s&&L.DomUtil.addClass(s,"leaflet-pm-draggable")},removeDraggingClass(){let s=this._getDOMElem();s&&L.DomUtil.removeClass(s,"leaflet-pm-draggable")},_getDOMElem(){let s=null;return this._layer._path?s=this._layer._path:this._layer._renderer&&this._layer._renderer._container?s=this._layer._renderer._container:this._layer._image?s=this._layer._image:this._layer._icon&&(s=this._layer._icon),s},_overwriteEventIfItComesFromMarker(s){s.target.getLatLng&&(!s.target._radius||s.target._radius<=10)&&(s.containerPoint=this._map.mouseEventToContainerPoint(s.originalEvent),s.latlng=this._map.containerPointToLatLng(s.containerPoint))},_syncLayers(s,l){if(this.enabled())return!1;if(!l._fromLayerSync&&this._layer===l.target&&this.options.syncLayersOnDrag){l._fromLayerSync=!0;let h=[];if(L.Util.isArray(this.options.syncLayersOnDrag))h=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(g=>{g instanceof L.LayerGroup&&(h=h.concat(g.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let g in this._parentLayerGroup){let y=this._parentLayerGroup[g];y.pm&&(h=y.pm.getLayers(!0))}return L.Util.isArray(h)&&h.length>0&&(h=h.filter(g=>!!g.pm).filter(g=>!!g.pm.options.draggable),h.forEach(g=>{g!==this._layer&&g.pm[s]&&(g._snapped=!1,g.pm[s](l))})),h.length>0}return!1},_stopDOMImageDrag(s){return s.preventDefault(),!1}},ot=rt,ut=p(Oi());function pt(s,l,h,g){return h.unproject(l.transform(h.project(s,g)),g)}function _t(s,l,h){let g=h.getMaxZoom();if(g===1/0&&(g=h.getZoom()),L.Util.isArray(s)){let y=[];return s.forEach(k=>{y.push(_t(k,l,h))}),y}return s instanceof L.LatLng?pt(s,l,h,g):null}function Mt(s,l){l instanceof L.Layer&&(l=l.getLatLng());let h=s.getMaxZoom();return h===1/0&&(h=s.getZoom()),s.project(l,h)}function Jt(s,l){let h=s.getMaxZoom();return h===1/0&&(h=s.getZoom()),s.unproject(l,h)}var me={_onRotateStart(s){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Mt(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Mt(this._map,s.target.getLatLng()),this._initialRotateLatLng=Vi(this._layer),this._startAngle=this.getAngle();let l=Vi(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,l),this._fireRotationStart(this._map,l)},_onRotate(s){let l=Mt(this._map,s.target.getLatLng()),h=this._rotationStartPoint,g=this._rotationOriginPoint,y=Math.atan2(l.y-g.y,l.x-g.x)-Math.atan2(h.y-g.y,h.x-g.x);this._layer.setLatLngs(this._rotateLayer(y,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let k=this;function T(It,Bt=[],ee=-1){if(ee>-1&&Bt.push(ee),L.Util.isArray(It[0]))It.forEach((de,Pe)=>T(de,Bt.slice(),Pe));else{let de=Bt.length>0?(0,ut.default)(k._markers,Bt):k._markers[0];It.forEach((Pe,Oe)=>{de[Oe].setLatLng(Pe)})}}T(this._layer.getLatLngs());let N=Vi(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(y,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let G=y*180/Math.PI;G=G<0?G+360:G;let it=G+this._startAngle;this._setAngle(it),this._rotationLayer.pm._setAngle(it),this._fireRotation(this._rotationLayer,G,N),this._fireRotation(this._map,G,N),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let s=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let l=Vi(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Vi(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,s,l),this._fireRotationEnd(this._map,s,l),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(s,l,h,g,y){let k=Mt(y,h);return this._matrix=g.clone().rotate(s,k).flip(),_t(l,this._matrix,y)},_setAngle(s){s=s<0?s+360:s,this._angle=s%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let s=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),l=s.getCenter();return s.removeFrom(this._layer._map),l},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(Ss(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let s={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),s),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Vi(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(s){let l=this.getAngle(),h=this._layer.getLatLngs(),g=s*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(g,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+s),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(g,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let y=this.getAngle()-l;y=y<0?y+360:y,this._startAngle=l,this._fireRotation(this._layer,y,h,this._layer),this._fireRotation(this._map||this._layer._map,y,h,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(s){let l=s-this.getAngle();this.rotateLayer(l)},getAngle(){return this._angle||0},setInitAngle(s){this._setAngle(s)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(s){this._rotationCenter=s,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(s)}},ve=me,oe=L.Class.extend({includes:[ot,Fo,ve,Oo],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(s){L.Util.setOptions(this,s)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(s,l){l==="layerPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":l==="vertexPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":l==="markerPane"&&(s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(s,l){let h=l.target,g={layer:this._layer,marker:h,event:l},y="";return s==="move"?y="moveVertexValidation":s==="add"?y="addVertexValidation":s==="remove"&&(y="removeVertexValidation"),this.options[y]&&typeof this.options[y]=="function"&&!this.options[y](g)?(s==="move"&&(h._cancelDragEventChain=h.getLatLng()),!1):(h._cancelDragEventChain=null,!0)},_vertexValidationDrag(s){return s._cancelDragEventChain?(s._latlng=s._cancelDragEventChain,s.update(),!1):!0},_vertexValidationDragEnd(s){return s._cancelDragEventChain?(s._cancelDragEventChain=null,!1):!0}}),Ce=oe;Ce.LayerGroup=L.Class.extend({initialize(s){this._layerGroup=s,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(g=>this._initLayer(g));let l=g=>{if(g.layer._pmTempLayer)return;this._layers=this.getLayers();let y=this._layers.filter(k=>!k.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in k.pm._parentLayerGroup));y.forEach(k=>{this._initLayer(k)}),y.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(l,100,this),this),this._layerGroup.on("layerremove",g=>{this._removeLayerFromGroup(g.target)},this);let h=g=>{g.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(h,100,this),this)},enable(s,l=[]){l.length===0&&(this._layers=this.getLayers()),this._options=s,this._layers.forEach(h=>{h instanceof L.LayerGroup?l.indexOf(h._leaflet_id)===-1&&(l.push(h._leaflet_id),h.pm.enable(s,l)):h.pm.enable(s)})},disable(s=[]){s.length===0&&(this._layers=this.getLayers()),this._layers.forEach(l=>{l instanceof L.LayerGroup?s.indexOf(l._leaflet_id)===-1&&(s.push(l._leaflet_id),l.pm.disable(s)):l.pm.disable()})},enabled(s=[]){return s.length===0&&(this._layers=this.getLayers()),!!this._layers.find(l=>l instanceof L.LayerGroup?s.indexOf(l._leaflet_id)===-1?(s.push(l._leaflet_id),l.pm.enabled(s)):!1:l.pm.enabled())},toggleEdit(s,l=[]){l.length===0&&(this._layers=this.getLayers()),this._options=s,this._layers.forEach(h=>{h instanceof L.LayerGroup?l.indexOf(h._leaflet_id)===-1&&(l.push(h._leaflet_id),h.pm.toggleEdit(s,l)):h.pm.toggleEdit(s)})},_initLayer(s){let l=L.Util.stamp(this._layerGroup);s.pm._parentLayerGroup||(s.pm._parentLayerGroup={}),s.pm._parentLayerGroup[l]=this._layerGroup},_removeLayerFromGroup(s){if(s.pm&&s.pm._layerGroup){let l=L.Util.stamp(this._layerGroup);delete s.pm._layerGroup[l]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(s=>s.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var s;return this._map||((s=this._layers.find(l=>!!l._map))==null?void 0:s._map)||null},getLayers(s=!1,l=!0,h=!0,g=[]){let y=[];return s?this._layerGroup.getLayers().forEach(k=>{y.push(k),k instanceof L.LayerGroup&&g.indexOf(k._leaflet_id)===-1&&(g.push(k._leaflet_id),y=y.concat(k.pm.getLayers(!0,!0,!0,g)))}):y=this._layerGroup.getLayers(),h&&(y=y.filter(k=>!(k instanceof L.LayerGroup))),l&&(y=y.filter(k=>!!k.pm),y=y.filter(k=>!k._pmTempLayer),y=y.filter(k=>!L.PM.optIn&&!k.options.pmIgnore||L.PM.optIn&&k.options.pmIgnore===!1)),y},setOptions(s,l=[]){l.length===0&&(this._layers=this.getLayers()),this.options=s,this._layers.forEach(h=>{h.pm&&(h instanceof L.LayerGroup?l.indexOf(h._leaflet_id)===-1&&(l.push(h._leaflet_id),h.pm.setOptions(s,l)):h.pm.setOptions(s))})}}),Ce.Marker=Ce.extend({_shape:"Marker",initialize(s){this._layer=s,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(s={draggable:!0}){if(L.Util.setOptions(this,s),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(s){let l=s.target;l.remove(),this._fireRemove(l),this._fireRemove(this._map,l)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let s=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,s.off("pm:drag",this._handleSnapping,this),s.on("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.on("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this),s.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let s=this._layer;s.off("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this)}});var we=p(Oi()),Qt={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let s=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=s.filter((l,h,g)=>g.indexOf(l)===h)},_removeFromCache(s){let l=this.markerCache.indexOf(s);l>-1&&this.markerCache.splice(l,1)},renderLimits(s){this.markerCache.forEach(l=>{s.includes(l)?this._markerGroup.addLayer(l):this._markerGroup.removeLayer(l)})},applyLimitFilters({latlng:s={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let l=[...this._filterClosestMarkers(s)];this.renderLimits(l)},_filterClosestMarkers(s){let l=[...this.markerCache],h=this.options.limitMarkersToCount;return h===-1?l:(l.sort((g,y)=>{let k=g._latlng.distanceTo(s),T=y._latlng.distanceTo(s);return k-T}),l.filter((g,y)=>h>-1?y<h:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(s){this._preventRenderMarkers=!!s}},re=Qt;Ce.Line=Ce.extend({includes:[re],_shape:"Line",initialize(s){this._layer=s,this._enabled=!1},enable(s){if(L.Util.setOptions(this,s),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let s=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(s,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(s){return this.enabled()?this.disable():this.enable(s),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let s=this._map,l=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(s),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let h=g=>{if(Array.isArray(g[0]))return g.map(h,this);let y=g.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&g.map((k,T)=>{let N=this.isPolygon()?(T+1)%g.length:T+1;return this._createMiddleMarker(y[T],y[N])}),y};this._markers=h(l),this.filterMarkerGroup(),s.addLayer(this._markerGroup)},_createMarker(s){let l=new L.Marker(s,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(l,"vertexPane"),l._pmTempLayer=!0,this.options.rotate?(l.on("dragstart",this._onRotateStart,this),l.on("drag",this._onRotate,this),l.on("dragend",this._onRotateEnd,this)):(l.on("click",this._onVertexClick,this),l.on("dragstart",this._onMarkerDragStart,this),l.on("move",this._onMarkerDrag,this),l.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||l.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(l),l},_createMiddleMarker(s,l){if(!s||!l)return!1;let h=L.PM.Utils.calcMiddleLatLng(this._map,s.getLatLng(),l.getLatLng()),g=this._createMarker(h),y=L.divIcon({className:"marker-icon marker-icon-middle"});return g.setIcon(y),g.leftM=s,g.rightM=l,s._middleMarkerNext=g,l._middleMarkerPrev=g,g.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),g.on("movestart",this._onMiddleMarkerMoveStart,this),g},_onMiddleMarkerClick(s){let l=s.target;if(!this._vertexValidation("add",s))return;let h=L.divIcon({className:"marker-icon"});l.setIcon(h),this._addMarker(l,l.leftM,l.rightM)},_onMiddleMarkerMoveStart(s){let l=s.target;if(l.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",s)){l.on("move",this._onMiddleMarkerMovePrevent,this);return}l._dragging=!0,this._addMarker(l,l.leftM,l.rightM)},_onMiddleMarkerMovePrevent(s){let l=s.target;this._vertexValidationDrag(l)},_onMiddleMarkerMoveEnd(s){let l=s.target;if(l.off("move",this._onMiddleMarkerMovePrevent,this),l.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(l))return;let h=L.divIcon({className:"marker-icon"});l.setIcon(h),setTimeout(()=>{delete l._dragging},100)},_addMarker(s,l,h){s.off("movestart",this._onMiddleMarkerMoveStart,this),s.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let g=s.getLatLng(),y=this._layer._latlngs;delete s.leftM,delete s.rightM;let{indexPath:k,index:T,parentPath:N}=L.PM.Utils.findDeepMarkerIndex(this._markers,l),G=k.length>1?(0,we.default)(y,N):y,it=k.length>1?(0,we.default)(this._markers,N):this._markers;G.splice(T+1,0,g),it.splice(T+1,0,s),this._layer.setLatLngs(y),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(l,s),this._createMiddleMarker(s,h)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(s,L.PM.Utils.findDeepMarkerIndex(this._markers,s).indexPath,g),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return Dn(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(s){let l=this._layer,h,g;if(this.options.allowSelfIntersection?h=!1:(g=Dn(this._layer.toGeoJSON(15)),h=g.features.length>0),h){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return h;s?this._flashLayer():(l.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(g)}else l.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return h},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(s,l){s.forEach(h=>{Array.isArray(h)?this._updateDisabledMarkerStyle(h,l):h._icon&&(l&&!this._checkMarkerAllowedToDrag(h)?L.DomUtil.addClass(h._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(h._icon,"vertexmarker-disabled"))})},_removeMarker(s){let l=s.target;if(!this._vertexValidation("remove",s))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=Vi(this._layer,this._layer.getLatLngs()));let h=this._layer.getLatLngs(),{indexPath:g,index:y,parentPath:k}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);if(!g)return;let T=g.length>1?(0,we.default)(h,k):h,N=g.length>1?(0,we.default)(this._markers,k):this._markers,G=k[k.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!G&&(T.length<=2||this.isPolygon()&&T.length<=3)){this._flashLayer();return}T.splice(y,1),this._layer.setLatLngs(h),this.isPolygon()&&T.length<=2&&T.splice(0,T.length);let it=!1;if(T.length<=1&&(T.splice(0,T.length),k.length>1&&g.length>1&&(h=Ro(h)),this._layer.setLatLngs(h),this._initMarkers(),it=!0),fi(h)||this._layer.remove(),h=Ro(h),this._layer.setLatLngs(h),this._markers=Ro(this._markers),!it&&(N=g.length>1?(0,we.default)(this._markers,k):this._markers,l._middleMarkerPrev&&(this._markerGroup.removeLayer(l._middleMarkerPrev),this._removeFromCache(l._middleMarkerPrev)),l._middleMarkerNext&&(this._markerGroup.removeLayer(l._middleMarkerNext),this._removeFromCache(l._middleMarkerNext)),this._markerGroup.removeLayer(l),this._removeFromCache(l),N)){let It,Bt;if(this.isPolygon()?(It=(y+1)%N.length,Bt=(y+(N.length-1))%N.length):(Bt=y-1<0?void 0:y-1,It=y+1>=N.length?void 0:y+1),It!==Bt){let ee=N[Bt],de=N[It];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(ee,de)}N.splice(y,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(l,g),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(s){let l=this._layer.getLatLngs(),h=s.getLatLng(),{indexPath:g,index:y,parentPath:k}=L.PM.Utils.findDeepMarkerIndex(this._markers,s);(g.length>1?(0,we.default)(l,k):l).splice(y,1,h),this._layer.setLatLngs(l)},_getNeighborMarkers(s){let{indexPath:l,index:h,parentPath:g}=L.PM.Utils.findDeepMarkerIndex(this._markers,s),y=l.length>1?(0,we.default)(this._markers,g):this._markers,k=(h+1)%y.length,T=(h+(y.length-1))%y.length,N=y[T],G=y[k];return{prevMarker:N,nextMarker:G}},_checkMarkerAllowedToDrag(s){let{prevMarker:l,nextMarker:h}=this._getNeighborMarkers(s),g=L.polyline([l.getLatLng(),s.getLatLng()]),y=L.polyline([s.getLatLng(),h.getLatLng()]),k=gi(this._layer.toGeoJSON(15),g.toGeoJSON(15)).features.length,T=gi(this._layer.toGeoJSON(15),y.toGeoJSON(15)).features.length;return s.getLatLng()===this._markers[0][0].getLatLng()?T+=1:s.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(k+=1),!(k<=2&&T<=2)},_onMarkerDragStart(s){let l=s.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",s))return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireMarkerDragStart(s,h),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Vi(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(l):this._markerAllowedToDrag=null},_onMarkerDrag(s){let l=s.target;if(!this._vertexValidationDrag(l))return;let{indexPath:h,index:g,parentPath:y}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);if(!h)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(l);let k=h.length>1?(0,we.default)(this._markers,y):this._markers,T=(g+1)%k.length,N=(g+(k.length-1))%k.length,G=l.getLatLng(),it=k[N].getLatLng(),It=k[T].getLatLng();if(l._middleMarkerNext){let Bt=L.PM.Utils.calcMiddleLatLng(this._map,G,It);l._middleMarkerNext.setLatLng(Bt)}if(l._middleMarkerPrev){let Bt=L.PM.Utils.calcMiddleLatLng(this._map,G,it);l._middleMarkerPrev.setLatLng(Bt)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(s,h),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(s){let l=s.target;if(!this._vertexValidationDragEnd(l))return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l),g=!this.options.allowSelfIntersection&&this.hasSelfIntersection();g&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(g=!1);let y=!this.options.allowSelfIntersection&&g;if(this._fireMarkerDragEnd(s,h,y),y){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(s,h);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(s){let l=s.target;if(l._dragging)return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireVertexClick(s,h)}}),Ce.Polygon=Ce.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(s){let{prevMarker:l,nextMarker:h}=this._getNeighborMarkers(s),g=L.polyline([l.getLatLng(),s.getLatLng()]),y=L.polyline([s.getLatLng(),h.getLatLng()]),k=gi(this._layer.toGeoJSON(15),g.toGeoJSON(15)).features.length,T=gi(this._layer.toGeoJSON(15),y.toGeoJSON(15)).features.length;return!(k<=2&&T<=2)}}),Ce.Rectangle=Ce.Polygon.extend({_shape:"Rectangle",_initMarkers(){let s=this._map,l=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,s.addLayer(this._markerGroup),this._markers=[],this._markers[0]=l.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((h,g)=>{let y=this._cornerMarkers.find(k=>k._index===g);y&&y.setLatLng(h)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(s,l){let h=new L.Marker(s,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._origLatLng=s,h._index=l,h._pmTempLayer=!0,h.on("click",this._onVertexClick,this),this._markerGroup.addLayer(h),h},_addMarkerEvents(){this._markers[0].forEach(s=>{s.on("dragstart",this._onMarkerDragStart,this),s.on("drag",this._onMarkerDrag,this),s.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||s.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(s){if(!this._vertexValidation("move",s))return;let l=s.target,h=this._cornerMarkers;l._oppositeCornerLatLng=h.find(y=>y._index===(l._index+2)%4).getLatLng(),l._snapped=!1;let{indexPath:g}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireMarkerDragStart(s,g)},_onMarkerDrag(s){let l=s.target;if(!this._vertexValidationDrag(l)||l._index===void 0)return;this._adjustRectangleForMarkerMove(l);let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireMarkerDrag(s,h),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(s){let l=s.target;if(!this._vertexValidationDragEnd(l))return;this._cornerMarkers.forEach(g=>{delete g._oppositeCornerLatLng});let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireMarkerDragEnd(s,h),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(s){L.extend(s._origLatLng,s._latlng);let l=L.PM.Utils._getRotatedRectangle(s.getLatLng(),s._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(l),this._adjustAllMarkers(s),this._layer.redraw()},_adjustAllMarkers(s){let l=this._layer.getLatLngs()[0];if(l&&l.length!==4&&l.length>0)l.forEach((h,g)=>{this._cornerMarkers[g].setLatLng(h)}),this._cornerMarkers.slice(l.length).forEach(h=>{h.setLatLng(l[0])});else if(!l||!l.length)console.error("The layer has no LatLngs");else{let h=l.findIndex(g=>s.getLatLng().equals(g));h>-1?(this._cornerMarkers[(s._index+1)%4].setLatLng(l[(h+1)%4]),this._cornerMarkers[(s._index+2)%4].setLatLng(l[(h+2)%4]),this._cornerMarkers[(s._index+3)%4].setLatLng(l[(h+3)%4])):this._cornerMarkers.forEach(g=>{g.setLatLng(l[g._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(Ss(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let s=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(s[0],s[2],this.getAngle(),this._map||this)}}),Ce.CircleMarker=Ce.extend({_shape:"CircleMarker",initialize(s){this._layer=s,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(s={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,s),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let s=this._map;this._helperLayers&&(this._helperLayers.removeFrom(s),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(s);let l=this._layer.getLatLng(),h=this._layer._radius,g=this._getLatLngOnCircle(l,h);this._centerMarker=this._createCenterMarker(l),this._outerMarker=this._createOuterMarker(g),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(s,l){let h=this._map.project(s),g=L.point(h.x+l,h.y);return this._map.unproject(g)},_createHintLine(s,l){let h=s.getLatLng(),g=l.getLatLng();this._hintline=L.polyline([h,g],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(s){let l=this._createMarker(s);return this.options.draggable?(L.DomUtil.addClass(l._icon,"leaflet-pm-draggable"),l.on("move",this._moveCircle,this)):l.dragging.disable(),l},_createOuterMarker(s){let l=this._createMarker(s);return l.on("drag",this._resizeCircle,this),l},_createMarker(s){let l=new L.Marker(s,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(l,"vertexPane"),l._origLatLng=s,l._pmTempLayer=!0,l.on("dragstart",this._onMarkerDragStart,this),l.on("drag",this._onMarkerDrag,this),l.on("dragend",this._onMarkerDragEnd,this),l.on("click",this._onVertexClick,this),this._helperLayers.addLayer(l),l},_moveCircle(s){if(s.target._cancelDragEventChain)return;let l=this._centerMarker.getLatLng();this._layer.setLatLng(l);let h=this._layer._radius,g=this._getLatLngOnCircle(l,h);this._outerMarker._latlng=g,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let s=this._layer.getLatLng(),l=this._layer._radius,h=this._getLatLngOnCircle(s,l);this._outerMarker.setLatLng(h),this._centerMarker.setLatLng(s),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let s=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng(),h=this._distanceCalculation(s,l);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(h),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let s=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng();this._hintline.setLatLngs([s,l])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(s){this._vertexValidation("move",s)&&this._fireMarkerDragStart(s)},_onMarkerDrag(s){let l=s.target;l instanceof L.Marker&&!this._vertexValidationDrag(l)||this._fireMarkerDrag(s)},_onMarkerDragEnd(s){this._extedingMarkerDragEnd();let l=s.target;this._vertexValidationDragEnd(l)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(s))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let s=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,s.off("pm:drag",this._handleSnapping,this),s.on("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.on("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this),s.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let s=this._layer;s.off("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let s=this._layer._map||this._map;if(s){let l=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),s,this._layer.getLatLng()),h=L.circle(this._layer.getLatLng(),this._layer.options);h.setRadius(l);let g=s&&s.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(h,200,!g).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(h,200,!g),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let s=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng(),h=this._distanceCalculation(s,l);return this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?l=aa(this._map,s,l,this._getMinDistanceInMeter(s)):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(l=aa(this._map,s,l,this._getMaxDistanceInMeter(s))),l},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let s=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng(),h=this._distanceCalculation(s,l);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(s,l){return this._map.project(s).distanceTo(this._map.project(l))},_getMinDistanceInMeter(s){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,s)},_getMaxDistanceInMeter(s){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,s)},_onVertexClick(s){s.target._dragging||this._fireVertexClick(s,void 0)}}),Ce.Circle=Ce.CircleMarker.extend({_shape:"Circle",initialize(s){this._layer=s,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(s){L.PM.Edit.CircleMarker.prototype.enable.call(this,s||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let s=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(s,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let s=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!s).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!s),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(s,l){return this._map.distance(s,l)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(s){s.target._dragging||this._fireVertexClick(s,void 0)}}),Ce.ImageOverlay=Ce.extend({_shape:"ImageOverlay",initialize(s){this._layer=s,this._enabled=!1},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},enabled(){return this._enabled},enable(s={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,s),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let s=this._layer.getBounds(),l=s.getNorthWest(),h=s.getNorthEast(),g=s.getSouthEast(),y=s.getSouthWest();return[l,h,g,y]}}),Ce.Text=Ce.extend({_shape:"Text",initialize(s){this._layer=s,this._enabled=!1},enable(s){if(L.Util.setOptions(this,s),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let s=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),s.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let s=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,s.off("pm:drag",this._handleSnapping,this),s.on("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.on("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this),s.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let s=this._layer;s.off("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let s=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,l=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${s}px`,this.textArea.style.width=`${l}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(s){s.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(s={}){let l=this._hasFocus;this._hasFocus=s.type==="focus",!l!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(s){s&&(this.textArea.value=s),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let l=this.options.className.split(" ");this.textArea.classList.add(...l)}let s=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(s),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(s=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),s===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(s){s.preventDefault()}});var ke=function(s,l,h,g,y,k){this._matrix=[s,l,h,g,y,k]};ke.init=()=>new L.PM.Matrix(1,0,0,1,0,0),ke.prototype={transform(s){return this._transform(s.clone())},_transform(s){let l=this._matrix,{x:h,y:g}=s;return s.x=l[0]*h+l[1]*g+l[4],s.y=l[2]*h+l[3]*g+l[5],s},untransform(s){let l=this._matrix;return new L.Point((s.x/l[0]-l[4])/l[0],(s.y/l[2]-l[5])/l[2])},clone(){let s=this._matrix;return new L.PM.Matrix(s[0],s[1],s[2],s[3],s[4],s[5])},translate(s){if(s===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let l,h;return typeof s=="number"?(l=s,h=s):(l=s.x,h=s.y),this._add(1,0,0,1,l,h)},scale(s,l){if(s===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let h,g;return l=l||L.point(0,0),typeof s=="number"?(h=s,g=s):(h=s.x,g=s.y),this._add(h,0,0,g,l.x,l.y)._add(1,0,0,1,-l.x,-l.y)},rotate(s,l){let h=Math.cos(s),g=Math.sin(s);return l=l||new L.Point(0,0),this._add(h,g,-g,h,l.x,l.y)._add(1,0,0,1,-l.x,-l.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(s,l,h,g,y,k){let T=[[],[],[]],N=this._matrix,G=[[N[0],N[2],N[4]],[N[1],N[3],N[5]],[0,0,1]],it=[[s,h,y],[l,g,k],[0,0,1]],It;s&&s instanceof L.PM.Matrix&&(N=s._matrix,it=[[N[0],N[2],N[4]],[N[1],N[3],N[5]],[0,0,1]]);for(let Bt=0;Bt<3;Bt+=1)for(let ee=0;ee<3;ee+=1){It=0;for(let de=0;de<3;de+=1)It+=G[Bt][de]*it[de][ee];T[Bt][ee]=It}return this._matrix=[T[0][0],T[1][0],T[0][1],T[1][1],T[0][2],T[1][2]],this}};var Be=ke,Ee={calcMiddleLatLng(s,l,h){let g=s.project(l),y=s.project(h);return s.unproject(g._add(y)._divideBy(2))},findLayers(s){let l=[];return s.eachLayer(h=>{(h instanceof L.Polyline||h instanceof L.Marker||h instanceof L.Circle||h instanceof L.CircleMarker||h instanceof L.ImageOverlay)&&l.push(h)}),l=l.filter(h=>!!h.pm),l=l.filter(h=>!h._pmTempLayer),l=l.filter(h=>!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1),l},circleToPolygon(s,l=60,h=!0){let g=s.getLatLng(),y=s.getRadius(),k=wi(g,y,l,0,h),T=[];for(let N=0;N<k.length;N+=1){let G=[k[N].lat,k[N].lng];T.push(G)}return L.polygon(T,s.options)},disablePopup(s){s.getPopup()&&(s._tempPopupCopy=s.getPopup(),s.unbindPopup())},enablePopup(s){s._tempPopupCopy&&(s.bindPopup(s._tempPopupCopy),delete s._tempPopupCopy)},_fireEvent(s,l,h,g=!1){s.fire(l,h,g);let{groups:y}=this.getAllParentGroups(s);y.forEach(k=>{k.fire(l,h,g)})},getAllParentGroups(s){let l=[],h=[],g=y=>{for(let k in y._eventParents)if(l.indexOf(k)===-1){l.push(k);let T=y._eventParents[k];h.push(T),g(T)}};return!s._pmLastGroupFetch||!s._pmLastGroupFetch.time||new Date().getTime()-s._pmLastGroupFetch.time>1e3?(g(s),s._pmLastGroupFetch={time:new Date().getTime(),groups:h,groupIds:l},{groupIds:l,groups:h}):{groups:s._pmLastGroupFetch.groups,groupIds:s._pmLastGroupFetch.groupIds}},createGeodesicPolygon:wi,getTranslation:un,findDeepCoordIndex(s,l,h=!0){let g,y=T=>(N,G)=>{let it=T.concat(G);if(h){if(N.lat&&N.lat===l.lat&&N.lng===l.lng)return g=it,!0}else if(N.lat&&L.latLng(N).equals(l))return g=it,!0;return Array.isArray(N)&&N.some(y(it))};s.some(y([]));let k={};return g&&(k={indexPath:g,index:g[g.length-1],parentPath:g.slice(0,g.length-1)}),k},findDeepMarkerIndex(s,l){let h,g=k=>(T,N)=>{let G=k.concat(N);return T._leaflet_id===l._leaflet_id?(h=G,!0):Array.isArray(T)&&T.some(g(G))};s.some(g([]));let y={};return h&&(y={indexPath:h,index:h[h.length-1],parentPath:h.slice(0,h.length-1)}),y},_getIndexFromSegment(s,l){if(l&&l.length===2){let h=this.findDeepCoordIndex(s,l[0]),g=this.findDeepCoordIndex(s,l[1]),y=Math.max(h.index,g.index);return(h.index===0||g.index===0)&&y!==1&&(y+=1),{indexA:h,indexB:g,newIndex:y,indexPath:h.indexPath,parentPath:h.parentPath}}return null},_getRotatedRectangle(s,l,h,g){let y=Mt(g,s),k=Mt(g,l),T=h*Math.PI/180,N=Math.cos(T),G=Math.sin(T),it=(k.x-y.x)*N+(k.y-y.y)*G,It=(k.y-y.y)*N-(k.x-y.x)*G,Bt=it*N+y.x,ee=it*G+y.y,de=-It*G+y.x,Pe=It*N+y.y,Oe=Jt(g,y),Ue=Jt(g,{x:Bt,y:ee}),mn=Jt(g,k),Rt=Jt(g,{x:de,y:Pe});return[Oe,Ue,mn,Rt]},pxRadiusToMeterRadius(s,l,h){let g=l.project(h),y=L.point(g.x+s,g.y);return l.distance(l.unproject(y),h)}},Ye=Ee;L.PM=L.PM||{version:Bo.version,Map:Io,Toolbar:Oa,Draw:Lr,Edit:Ce,Utils:Ye,Matrix:Be,activeLang:"en",optIn:!1,initialize(s){this.addInitHooks(s)},setOptIn(s){this.optIn=!!s},addInitHooks(){function s(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(s);function l(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(l);function h(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(h);function g(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(g);function y(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(y);function k(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(k);function T(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(T);function N(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(N);function G(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(G)},reInitLayer(s){s instanceof L.LayerGroup&&s.eachLayer(l=>{this.reInitLayer(l)}),s.pm||L.PM.optIn&&s.options.pmIgnore!==!1||s.options.pmIgnore||(s instanceof L.Map?s.pm=new L.PM.Map(s):s instanceof L.Marker?s.options.textMarker?(s.pm=new L.PM.Edit.Text(s),s.pm._initTextMarker(),s.pm._createTextMarker(!1)):s.pm=new L.PM.Edit.Marker(s):s instanceof L.Circle?s.pm=new L.PM.Edit.Circle(s):s instanceof L.CircleMarker?s.pm=new L.PM.Edit.CircleMarker(s):s instanceof L.Rectangle?s.pm=new L.PM.Edit.Rectangle(s):s instanceof L.Polygon?s.pm=new L.PM.Edit.Polygon(s):s instanceof L.Polyline?s.pm=new L.PM.Edit.Line(s):s instanceof L.LayerGroup?s.pm=new L.PM.Edit.LayerGroup(s):s instanceof L.ImageOverlay&&(s.pm=new L.PM.Edit.ImageOverlay(s)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(s){let l=this._map.mouseEventToLayerPoint(s),h,g;for(let y=this._drawFirst;y;y=y.next)h=y.layer,h.options.interactive&&h._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(h))&&(g=h);g&&(L.DomEvent.fakeStop(s),this._fireEvent([g],s))}}),L.PM.initialize()})();class Hl extends Kt.Polygon{constructor(n,r,o=0,a=180,u={}){super([[]],{...u,pmIgnore:!1,interactive:!0,className:"leaflet-semicircle"});Re(this,"center");Re(this,"radius");Re(this,"startAngle");Re(this,"stopAngle");Re(this,"numPoints");Re(this,"properties");Re(this,"pm");Re(this,"getRadius",()=>this.radius);Re(this,"getStartAngle",()=>this.startAngle);Re(this,"getStopAngle",()=>this.stopAngle);this.center=n,this.radius=r,this.startAngle=this.normalizeAngle(o),this.stopAngle=this.normalizeAngle(a),this.numPoints=64,this.properties={type:"Semicircle",radius:this.radius,startAngle:this.startAngle,stopAngle:this.stopAngle,style:{...u,startAngle:this.startAngle,stopAngle:this.stopAngle}},this.on("pm:enable",()=>{var f;this.pm&&(this.pm._layers=[],this.pm._markers=[],(f=this.pm._markerGroup)==null||f.clearLayers())}),this.on("pm:vertexadded",()=>{var f;this.pm&&((f=this.pm._markerGroup)==null||f.clearLayers())}),this.on("add",()=>{this._map&&(this.updateGeometry(),this.pm&&this.pm.enable({allowSelfIntersection:!1,preventMarkerRemoval:!0}))}),this.updateProperties()}normalizeAngle(n){return(n%360+360)%360}calculateArcPoints(){if(!this._map)return[];const n=[],r=this.getOpeningAngle();n.push(this.center);for(let o=0;o<=this.numPoints;o++){const u=(this.startAngle+r*o/this.numPoints)*Math.PI/180,f=this.radius*Math.cos(u),v=this.radius*Math.sin(u)/111319.9,w=f/(111319.9*Math.cos(this.center.lat*Math.PI/180)),b=Kt.latLng(this.center.lat+v,this.center.lng+w);n.push(b)}return n.push(this.center),n}setRadius(n){return n<=0?this:(this.radius=n,this.properties.radius=n,this.updateGeometry(),this.updateProperties(),this)}setAngles(n,r){const o=this.normalizeAngle(n),a=this.normalizeAngle(r),u=this.getOpeningAngle();let f=(a-o+360)%360;const p=45;return Math.abs(f-u)>p&&(f>u?f=u+p:f=u-p),f=Math.max(5,Math.min(355,f)),this.startAngle=o,this.stopAngle=(o+f)%360,this.properties.startAngle=this.startAngle,this.properties.stopAngle=this.stopAngle,this.properties.openingAngle=f,this.properties.style.startAngle=this.startAngle,this.properties.style.stopAngle=this.stopAngle,this.updateGeometry(),this}setOpeningAngle(n){return n<5||n>355?this:(this.stopAngle=(this.startAngle+n)%360,this.properties.openingAngle=n,this.updateGeometry(),this.updateProperties(),this)}setCenter(n){return!n.lat||!n.lng?this:(this.center=n,this.updateGeometry(),this.updateProperties(),this)}getCenter(){return this.center}getOpeningAngle(){return(this.stopAngle-this.startAngle+360)%360}calculatePointOnArc(n){const r=n*Math.PI/180;return Kt.latLng(this.center.lat+this.radius/111319.9*Math.sin(r),this.center.lng+this.radius/(111319.9*Math.cos(this.center.lat*Math.PI/180))*Math.cos(r))}calculateMidpointPosition(){const n=this.getOpeningAngle(),r=(this.startAngle+n/2)%360;return this.calculatePointOnArc(r)}calculateAngleToPoint(n){return Math.atan2(n.lat-this.center.lat,n.lng-this.center.lng)*180/Math.PI}createControlPoints(n,r){const o=[],a=this.calculatePointOnArc(this.startAngle),u=this.calculatePointOnArc(this.stopAngle),f=this.calculateMidpointPosition(),p=this.createControlPoint(n,this.center,"#059669"),v=this.createControlPoint(n,a,"#DC2626"),w=this.createControlPoint(n,u,"#DC2626"),b=this.createControlPoint(n,f,"#2563EB");o.push(p,v,w,b),r(o)}createControlPoint(n,r,o){return Kt.circleMarker(r,{radius:6,color:o,fillColor:o,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0}).addTo(n)}updateProperties(){const n=this.getOpeningAngle(),r=Math.PI*Math.pow(this.radius,2)*n/360,o=2*Math.PI*this.radius*n/360,a=o+2*this.radius;this.properties.area=r,this.properties.arcLength=o,this.properties.perimeter=a,this.properties.openingAngle=n,this.properties.surfaceInterieure=r,this.properties.surfaceExterieure=r,this.properties.diameter=this.radius*2,this.properties.center=this.center,this.fire("properties:updated",{shape:this,properties:this.properties})}updateGeometry(){if(!this._map)return;const n=this.calculateArcPoints();n.length>0&&(this.setLatLngs([n]),this.updateProperties())}toGeoJSON(){const n=super.toGeoJSON();return{...n,properties:{...n.properties,type:"Semicircle",radius:this.radius,startAngle:this.startAngle,stopAngle:this.stopAngle,openingAngle:this.getOpeningAngle()}}}}class ec extends Kt.Circle{constructor(n,r){const o=r.radius||10;super(n,o,r);Re(this,"properties");this.properties={type:"Circle",style:r||{}},this.updateProperties(),this.on("add",()=>{this.updateProperties()})}updateProperties(){var o;const n=this.getRadius(),r=this.getLatLng();this.properties={...this.properties,radius:n,diameter:n*2,area:Math.PI*Math.pow(n,2),perimeter:2*Math.PI*n,center:r,surfaceInterieure:Math.PI*Math.pow(n,2),surfaceExterieure:Math.PI*Math.pow(n,2),style:{...this.options,color:this.options.color||"#3388ff",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#3388ff",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||""}},this.fire("properties:updated",{shape:this,properties:this.properties})}setRadius(n){return super.setRadius(n),this.updateProperties(),this}setLatLng(n){return super.setLatLng(n),this.updateProperties(),this}calculatePointOnCircle(n){const r=this.getLatLng(),o=this.getRadius(),a=n*Math.PI/180;return Kt.latLng(r.lat+o/111319.9*Math.sin(a),r.lng+o/(111319.9*Math.cos(r.lat*Math.PI/180))*Math.cos(a))}getCardinalPoints(){return[0,45,90,135,180,225,270,315].map(n=>this.calculatePointOnCircle(n))}calculateAngleFromPoint(n){const r=this.getLatLng(),o=n.lng-r.lng,a=n.lat-r.lat;let u=Math.atan2(a,o)*180/Math.PI;return u<0&&(u+=360),u}resizeFromControlPoint(n){const o=this.getLatLng().distanceTo(n);o>0&&super.setRadius(o)}}var Rs=63710088e-1,Px={centimeters:Rs*100,centimetres:Rs*100,degrees:Rs/111325,feet:Rs*3.28084,inches:Rs*39.37,kilometers:Rs/1e3,kilometres:Rs/1e3,meters:Rs,metres:Rs,miles:Rs/1609.344,millimeters:Rs*1e3,millimetres:Rs*1e3,nauticalmiles:Rs/1852,radians:1,yards:Rs*1.0936};function Ah(t,e,n){n===void 0&&(n={});var r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function Ll(t,e,n){n===void 0&&(n={});for(var r=0,o=t;r<o.length;r++){var a=o[r];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var u=0;u<a[a.length-1].length;u++)if(a[a.length-1][u]!==a[0][u])throw new Error("First and last Position are not equivalent.")}var f={type:"Polygon",coordinates:t};return Ah(f,e,n)}function ju(t,e,n){if(n===void 0&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");var r={type:"LineString",coordinates:t};return Ah(r,e,n)}function Sx(t,e){e===void 0&&(e="kilometers");var n=Px[e];if(!n)throw new Error(e+" units is invalid");return t*n}function Xc(t){var e=t%360;return e*Math.PI/180}function A1(t,e,n){if(t!==null)for(var r,o,a,u,f,p,v,w=0,b=0,S,x=t.type,I=x==="FeatureCollection",D=x==="Feature",j=I?t.features.length:1,z=0;z<j;z++){v=I?t.features[z].geometry:D?t.geometry:t,S=v?v.type==="GeometryCollection":!1,f=S?v.geometries.length:1;for(var W=0;W<f;W++){var Q=0,mt=0;if(u=S?v.geometries[W]:v,u!==null){p=u.coordinates;var Tt=u.type;switch(w=0,Tt){case null:break;case"Point":if(e(p,b,z,Q,mt)===!1)return!1;b++,Q++;break;case"LineString":case"MultiPoint":for(r=0;r<p.length;r++){if(e(p[r],b,z,Q,mt)===!1)return!1;b++,Tt==="MultiPoint"&&Q++}Tt==="LineString"&&Q++;break;case"Polygon":case"MultiLineString":for(r=0;r<p.length;r++){for(o=0;o<p[r].length-w;o++){if(e(p[r][o],b,z,Q,mt)===!1)return!1;b++}Tt==="MultiLineString"&&Q++,Tt==="Polygon"&&mt++}Tt==="Polygon"&&Q++;break;case"MultiPolygon":for(r=0;r<p.length;r++){for(mt=0,o=0;o<p[r].length;o++){for(a=0;a<p[r][o].length-w;a++){if(e(p[r][o][a],b,z,Q,mt)===!1)return!1;b++}mt++}Q++}break;case"GeometryCollection":for(r=0;r<u.geometries.length;r++)if(A1(u.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function M1(t,e){var n,r,o,a,u,f,p,v,w,b,S=0,x=t.type==="FeatureCollection",I=t.type==="Feature",D=x?t.features.length:1;for(n=0;n<D;n++){for(f=x?t.features[n].geometry:I?t.geometry:t,v=x?t.features[n].properties:I?t.properties:{},w=x?t.features[n].bbox:I?t.bbox:void 0,b=x?t.features[n].id:I?t.id:void 0,p=f?f.type==="GeometryCollection":!1,u=p?f.geometries.length:1,o=0;o<u;o++){if(a=p?f.geometries[o]:f,a===null){if(e(null,S,v,w,b)===!1)return!1;continue}switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(a,S,v,w,b)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<a.geometries.length;r++)if(e(a.geometries[r],S,v,w,b)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}S++}}function Ex(t,e,n){var r=n;return M1(t,function(o,a,u,f,p){r=e(r,o,a,u,f,p)}),r}function Ax(t,e){M1(t,function(n,r,o,a,u){var f=n===null?null:n.type;switch(f){case null:case"Point":case"LineString":case"Polygon":return e(Ah(n,o,{bbox:a,id:u}),r,0)===!1?!1:void 0}var p;switch(f){case"MultiPoint":p="Point";break;case"MultiLineString":p="LineString";break;case"MultiPolygon":p="Polygon";break}for(var v=0;v<n.coordinates.length;v++){var w=n.coordinates[v],b={type:p,coordinates:w};if(e(Ah(b,o),r,v)===!1)return!1}})}function Mx(t,e){Ax(t,function(n,r,o){var a=0;if(n.geometry){var u=n.geometry.type;if(!(u==="Point"||u==="MultiPoint")){var f,p=0,v=0,w=0;if(A1(n,function(b,S,x,I,D){if(f===void 0||r>p||I>v||D>w){f=b,p=r,v=I,w=D,a=0;return}var j=ju([f,b],n.properties);if(e(j,r,o,D,a)===!1)return!1;a++,f=b})===!1)return!1}}})}function Bx(t,e,n){var r=n,o=!1;return Mx(t,function(a,u,f,p,v){o===!1&&n===void 0?r=a:r=e(r,a,u,f,p,v),o=!0}),r}function q0(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Xl(t,e,n){n===void 0&&(n={});var r=q0(t),o=q0(e),a=Xc(o[1]-r[1]),u=Xc(o[0]-r[0]),f=Xc(r[1]),p=Xc(o[1]),v=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(f)*Math.cos(p);return Sx(2*Math.atan2(Math.sqrt(v),Math.sqrt(1-v)),n.units)}var $0=6378137;function Cu(t){return Ex(t,function(e,n){return e+Tx(n)},0)}function Tx(t){var e=0,n;switch(t.type){case"Polygon":return V0(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)e+=V0(t.coordinates[n]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function V0(t){var e=0;if(t&&t.length>0){e+=Math.abs(H0(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(H0(t[n]))}return e}function H0(t){var e,n,r,o,a,u,f,p=0,v=t.length;if(v>2){for(f=0;f<v;f++)f===v-2?(o=v-2,a=v-1,u=0):f===v-1?(o=v-1,a=0,u=1):(o=f,a=f+1,u=f+2),e=t[o],n=t[a],r=t[u],p+=(Rf(r[0])-Rf(e[0]))*Math.sin(Rf(n[1]));p=p*$0*$0/2}return p}function Rf(t){return t*Math.PI/180}function Ec(t,e){return e===void 0&&(e={}),Bx(t,function(n,r){var o=r.geometry.coordinates;return n+Xl(o[0],o[1],e)},0)}class $o extends Kt.Rectangle{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});Re(this,"properties");this.properties={type:"Rectangle",style:r||{}},this.updateProperties(),this.on("add",()=>{this.updateProperties()})}updateProperties(){var f;const n=this.getBounds(),r=n.getNorthEast(),o=n.getSouthWest(),a=Xl([o.lng,o.lat],[r.lng,o.lat],{units:"meters"}),u=Xl([o.lng,o.lat],[o.lng,r.lat],{units:"meters"});this.properties={...this.properties,width:a,height:u,area:a*u,perimeter:2*(a+u),center:n.getCenter(),corners:{northEast:r,northWest:n.getNorthWest(),southEast:n.getSouthEast(),southWest:o},bounds:n,surfaceInterieure:a*u,surfaceExterieure:a*u,style:{...this.options,color:this.options.color||"#3388ff",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#3388ff",fillOpacity:this.options.fillOpacity||.2,dashArray:((f=this.options)==null?void 0:f.dashArray)||""}},this.fire("properties:updated",{shape:this,properties:this.properties})}setBounds(n){return super.setBounds(n),this.updateProperties(),this}getMidPoints(){const n=this.getBounds(),r=n.getNorthWest(),o=n.getNorthEast(),a=n.getSouthEast(),u=n.getSouthWest();return[Kt.latLng((r.lat+o.lat)/2,(r.lng+o.lng)/2),Kt.latLng((o.lat+a.lat)/2,(o.lng+a.lng)/2),Kt.latLng((u.lat+a.lat)/2,(u.lng+a.lng)/2),Kt.latLng((r.lat+u.lat)/2,(r.lng+u.lng)/2)]}getDimensions(){const n=this.getBounds(),r=n.getNorthEast(),o=n.getSouthWest(),a=Xl([o.lng,o.lat],[r.lng,o.lat],{units:"meters"}),u=Xl([o.lng,o.lat],[o.lng,r.lat],{units:"meters"});return{width:a,height:u}}resizeFromCorner(n,r){const o=this.getBounds(),a=[o.getNorthWest(),o.getNorthEast(),o.getSouthEast(),o.getSouthWest()],u=(n+2)%4,f=a[u],p=Kt.latLngBounds(f,r);Kt.Rectangle.prototype.setBounds.call(this,p)}resizeFromSide(n,r){const o=this.getBounds(),a=o.getNorthWest(),u=o.getSouthEast(),f=o.getSouthWest();let p;switch(n){case 0:p=Kt.latLngBounds(Kt.latLng(r.lat,a.lng),Kt.latLng(f.lat,u.lng));break;case 1:p=Kt.latLngBounds(Kt.latLng(a.lat,a.lng),Kt.latLng(u.lat,r.lng));break;case 2:p=Kt.latLngBounds(Kt.latLng(a.lat,a.lng),Kt.latLng(r.lat,u.lng));break;case 3:p=Kt.latLngBounds(Kt.latLng(a.lat,r.lng),Kt.latLng(u.lat,u.lng));break}p&&(Kt.Rectangle.prototype.setBounds.call(this,p),this.updateProperties())}moveFromCenter(n){const r=this.getBounds(),o=r.getCenter(),a=n.lng-o.lng,u=n.lat-o.lat,f=r.getNorthWest(),p=r.getSouthEast(),v=Kt.latLng(f.lat+u,f.lng+a),w=Kt.latLng(p.lat+u,p.lng+a);Kt.Rectangle.prototype.setBounds.call(this,Kt.latLngBounds(v,w))}}class Go extends Kt.Rectangle{constructor(n,r="Double-cliquez pour éditer",o={}){var p,v,w,b,S,x,I,D;const a=n instanceof Kt.LatLngBounds?n:Kt.latLngBounds(n);if(!a.isValid()){console.warn("[TextRectangle] Limites invalides, utilisation de limites par défaut");const j=Kt.latLng(0,0);a.extend(Kt.latLng(j.lat+.001,j.lng+.001)),a.extend(Kt.latLng(j.lat-.001,j.lng-.001))}const u={...o.textStyle,color:o.textColor||((p=o.textStyle)==null?void 0:p.color)||"#000000",fontFamily:o.fontFamily||((v=o.textStyle)==null?void 0:v.fontFamily)||"Arial, sans-serif",textAlign:o.textAlign||((w=o.textStyle)==null?void 0:w.textAlign)||"center",backgroundColor:o.backgroundColor||((b=o.textStyle)==null?void 0:b.backgroundColor)||"#FFFFFF",backgroundOpacity:o.backgroundOpacity??((S=o.textStyle)==null?void 0:S.backgroundOpacity)??1,bold:o.bold||((x=o.textStyle)==null?void 0:x.bold)||!1,italic:o.italic||((I=o.textStyle)==null?void 0:I.italic)||!1,fontSize:((D=o.textStyle)==null?void 0:D.fontSize)||"14px"},f={pmIgnore:!1,interactive:!0,fill:!0,stroke:!0,className:"leaflet-text-rectangle",...o,textStyle:u};super(a,f);Re(this,"properties");Re(this,"_textNode",null);Re(this,"_isEditing",!1);Re(this,"_editableDiv",null);Re(this,"_text");Re(this,"_rotation",0);Re(this,"_textStyle",{color:"#000000",fontSize:"14px",fontFamily:"Arial, sans-serif",textAlign:"center",backgroundColor:"#FFFFFF",backgroundOpacity:1,bold:!1,italic:!1});Re(this,"_initialBounds",null);Re(this,"_isResizing",!1);Re(this,"_resizePreview",null);Re(this,"_minWidth",50);Re(this,"_minHeight",30);Re(this,"_maxWidth",2e3);Re(this,"_maxHeight",1e3);Re(this,"_onKeyDown",n=>{n.key==="Enter"&&n.ctrlKey?(n.preventDefault(),this._finishEditing()):n.key==="Escape"&&(n.preventDefault(),this._cancelEditing())});Re(this,"_finishEditing",()=>{if(this._editableDiv)try{const n=this._editableDiv.innerText.trim()||"Double-cliquez pour éditer";this._cleanupEditableDiv(),this.setText(n),this._textRedraw(),this.fire("edit:end"),this.map&&!this.map.dragging.enabled()&&this.map.dragging.enable()}catch(n){console.error("[TextRectangle] Erreur lors de la finalisation de l'édition :",n),this._cleanupEditableDiv()}});Re(this,"_cancelEditing",()=>{this._textRedraw(),this._cleanupEditableDiv(),this.map&&!this.map.dragging.enabled()&&this.map.dragging.enable()});Re(this,"_updateTextPosition",()=>{this.updateProperties(),this._textRedraw()});Re(this,"_onZoomEnd",()=>{this._textRedraw()});Re(this,"_onAdd",()=>{this._textRedraw(),this.map&&this.map.on("zoomend",this._onZoomEnd.bind(this))});Re(this,"_onRemove",()=>{this._removeTextNode(),this.map&&this.map.off("zoomend",this._onZoomEnd)});this._text=r,this._textStyle=u,this.properties={type:"TextRectangle",text:this._text,width:0,height:0,area:0,rotation:this._rotation,style:{...f,textStyle:this._textStyle}},this.on({add:this._onAdd,remove:this._onRemove,dblclick:this._onDoubleClick,dragend:this._updateTextPosition,"pm:edit":this._updateTextPosition,"pm:dragend":this._updateTextPosition,"pm:markerdragend":this._updateTextPosition,"pm:vertexadded":this._updateTextPosition,"pm:vertexremoved":this._updateTextPosition}),this.pm&&(this.pm.enableLayerDrag(),console.log("[TextRectangle] Geoman activé pour cette instance"))}get map(){return this._map}set map(n){this._map=n}setText(n,r){const o=this.properties.text;this._text=n,r&&(this._textStyle={...this._textStyle,...r}),this.properties.text=n||"Double-cliquez pour éditer",console.log("[TextRectangle] Mise à jour du texte",{oldText:o,newText:this.properties.text,hasTextNode:!!this._textNode}),this._textRedraw(),this.fire("text:updated",{text:this.properties.text,oldText:o,bounds:this.getBounds(),style:this.properties.style}),this.fire("properties:updated",{shape:this,properties:this.properties,source:"setText"})}setTextStyle(n){this._textStyle={...this._textStyle,...n},this.properties.style.textStyle=this._textStyle,this._textRedraw(),this.fire("properties:updated",{shape:this,properties:this.properties})}setRotation(n){this.properties.rotation=n%360,this._textRedraw(),this.fire("properties:updated",{shape:this,properties:this.properties})}getTextElement(){return this._textNode}updateProperties(){if(this.map)try{const n=this.getBounds(),r=n.getSouthWest(),o=Kt.latLng(n.getSouth(),n.getEast()),a=this.map.distance(r,o),u=this.map.distance(r,Kt.latLng(n.getNorth(),n.getWest()));this.properties.width=a,this.properties.height=u,this.properties.area=a*u,this.properties.center=n.getCenter(),this.fire("properties:updated",{shape:this,properties:this.properties,source:"updateProperties",dimensions:{width:a,height:u}}),console.log("[TextRectangle] Propriétés mises à jour",{width:a,height:u,area:a*u,center:n.getCenter()})}catch(n){console.error("[TextRectangle] Erreur lors de la mise à jour des propriétés :",n)}}setBounds(n){const r=n instanceof Kt.LatLngBounds?n:Kt.latLngBounds(n);return Kt.Rectangle.prototype.setBounds.call(this,r),this._textRedraw(),this.updateProperties(),this}startResize(){if(!this._isResizing&&(this._isResizing=!0,this._initialBounds=this.getBounds(),this.map&&!this._resizePreview))try{if(this._resizePreview=Kt.rectangle(this._initialBounds,{color:this.options.color||"#3388ff",weight:this.options.weight||2,opacity:.8,fillColor:this.options.fillColor||"#3388ff",fillOpacity:.2,dashArray:this.options.dashArray||"5,5",className:"resize-preview"}).addTo(this.map),this._rotation!==0){const n=this.getCenter(),r=this._resizePreview._path;r&&(r.style.transformOrigin="center",r.style.transform=`rotate(${this._rotation}deg)`)}this._textNode&&(this._textNode.style.opacity="0.5")}catch(n){console.error("[TextRectangle] Erreur lors de la création du rectangle fantôme:",n),this._cleanupResizePreview()}}updateResizePreview(n){if(!(!this._isResizing||!this._resizePreview||!this.map))try{const r=this.map.latLngToContainerPoint(n.getNorthWest()),o=this.map.latLngToContainerPoint(n.getSouthEast()),a=Math.abs(o.x-r.x),u=Math.abs(o.y-r.y);if(a<this._minWidth||u<this._minHeight||a>this._maxWidth||u>this._maxHeight)return;if(this._resizePreview.setBounds(n),this._rotation!==0){const f=n.getCenter(),p=this._resizePreview._path;p&&(p.style.transformOrigin="center",p.style.transform=`rotate(${this._rotation}deg)`)}if(this._textNode){const f=Math.min(a,u)*.1,p=Math.max(10,Math.min(48,f)),v=p*1.2,b=this.properties.text.split(`
`).length*v,S=r.y+(u-b)/2,x=this._calculateTextX(r.x,o.x,5);if(this._textNode.setAttribute("x",x.toString()),this._textNode.setAttribute("y",S.toString()),this._textNode.querySelectorAll("tspan").forEach((I,D)=>{I.setAttribute("x",x.toString()),I.setAttribute("dy",D===0?"0":`${v}px`),I.style.fontSize=`${p}px`}),this._rotation!==0){const I=this.map.latLngToLayerPoint(n.getCenter());this._textNode.setAttribute("transform",`rotate(${this._rotation}, ${I.x}, ${I.y})`)}}this.fire("resize:update",{bounds:n})}catch(r){console.error("[TextRectangle] Erreur lors de la mise à jour du rectangle fantôme:",r),this._cleanupResizePreview()}}endResize(n){if(this._isResizing)try{if(this._cleanupResizePreview(),this._textNode&&(this._textNode.style.opacity="1"),this.map){const r=this.map.latLngToContainerPoint(n.getNorthWest()),o=this.map.latLngToContainerPoint(n.getSouthEast()),a=Math.abs(o.x-r.x),u=Math.abs(o.y-r.y);if(a<this._minWidth||u<this._minHeight||a>this._maxWidth||u>this._maxHeight){this.cancelResize();return}}this.setBounds(n),this._textRedraw(),this.fire("resize:end",{bounds:n})}catch(r){console.error("[TextRectangle] Erreur lors de la fin du redimensionnement:",r),this.cancelResize()}finally{this._isResizing=!1}}cancelResize(){if(!(!this._isResizing||!this._initialBounds))try{this._cleanupResizePreview(),this._textNode&&(this._textNode.style.opacity="1"),this.setBounds(this._initialBounds)}catch(n){console.error("[TextRectangle] Erreur lors de l'annulation du redimensionnement:",n)}finally{this._isResizing=!1,this._initialBounds=null}}_cleanupResizePreview(){if(this._resizePreview&&this.map)try{this.map.removeLayer(this._resizePreview)}catch(n){console.error("[TextRectangle] Erreur lors du nettoyage du rectangle fantôme:",n)}finally{this._resizePreview=null}}_onDoubleClick(n){this._isEditing||this._isResizing||(Kt.DomEvent.stopPropagation(n),this.fire("edit:start"),this._isEditing=!0,this._removeTextNode(),this._createEditableDiv())}_createEditableDiv(){if(this.map)try{const n=this.getBounds(),r=this.map.latLngToContainerPoint(n.getNorthWest()),o=this.map.latLngToContainerPoint(n.getSouthEast()),a=o.x-r.x,u=o.y-r.y,f=document.createElement("div");f.className="leaflet-text-rectangle-editor",f.contentEditable="true",f.innerText=this.properties.text;const p=Math.min(a,u)*.1,v=Math.max(10,Math.min(48,p));if(Object.assign(f.style,{position:"absolute",left:`${r.x}px`,top:`${r.y}px`,width:`${a}px`,height:`${u}px`,backgroundColor:this.properties.style.fillColor||"#FFFFFF",opacity:`${this.properties.style.fillOpacity??1}`,color:this.properties.style.textColor||"#000000",fontSize:`${v}px`,fontFamily:this.properties.style.fontFamily||"Arial, sans-serif",fontWeight:this.properties.style.bold?"bold":"normal",fontStyle:this.properties.style.italic?"italic":"normal",textAlign:this.properties.style.textAlign||"center",border:`${this.properties.style.weight||2}px solid ${this.properties.style.color||"#3388ff"}`,borderRadius:"2px",padding:"4px",boxSizing:"border-box",zIndex:"1000",overflow:"auto",whiteSpace:"pre-wrap",wordBreak:"break-word",cursor:"text",userSelect:"text",outline:"none",display:"flex",alignItems:"center",justifyContent:this._getJustifyContent()}),this.properties.rotation!==0){const x=this.map.latLngToContainerPoint(n.getCenter());f.style.transformOrigin=`${x.x-r.x}px ${x.y-r.y}px`,f.style.transform=`rotate(${this.properties.rotation}deg)`}this.map.getContainer().appendChild(f),this._editableDiv=f,f.focus();const b=window.getSelection(),S=document.createRange();S.selectNodeContents(f),b==null||b.removeAllRanges(),b==null||b.addRange(S),f.addEventListener("keydown",this._onKeyDown.bind(this)),f.addEventListener("blur",this._finishEditing.bind(this)),f.addEventListener("paste",x=>{var D;x.preventDefault();const I=((D=x.clipboardData)==null?void 0:D.getData("text/plain"))||"";document.execCommand("insertText",!1,I)}),this.map.dragging.enabled()&&this.map.dragging.disable(),console.log("[TextRectangle] Div éditable créé",{position:{left:r.x,top:r.y},size:{width:a,height:u},fontSize:v,styles:this.properties.style})}catch(n){console.error("[TextRectangle] Erreur lors de la création de l'éditeur :",n),this._isEditing=!1}}_getJustifyContent(){switch(this.properties.style.textAlign||"center"){case"left":return"flex-start";case"right":return"flex-end";case"center":default:return"center"}}_cleanupEditableDiv(){this._editableDiv&&(this._editableDiv.removeEventListener("keydown",this._onKeyDown),this._editableDiv.removeEventListener("blur",this._finishEditing),this._editableDiv.parentNode&&this._editableDiv.parentNode.removeChild(this._editableDiv),this._editableDiv=null,this._isEditing=!1)}_textRedraw(){if(!Kt.Browser.svg||!this.map||this._isEditing||!this._path){console.log("[TextRectangle] _textRedraw ignoré",{reason:Kt.Browser.svg?this.map?this._isEditing?"En cours d'édition":"Chemin SVG non trouvé":"Carte non disponible":"SVG non supporté"});return}this._removeTextNode();const n=this.properties.text;if(n)try{const r=this._path;if(!r){console.warn("[TextRectangle] Chemin SVG non trouvé");return}const o=r.ownerSVGElement;if(!o){console.warn("[TextRectangle] Élément SVG parent non trouvé");return}const a=Kt.SVG.create("text");a.setAttribute("class","leaflet-text-rectangle-text"),Object.assign(a.style,{fill:this.properties.style.textColor||"#000000",fontFamily:this.properties.style.fontFamily||"Arial, sans-serif",fontWeight:this.properties.style.bold?"bold":"normal",fontStyle:this.properties.style.italic?"italic":"normal"});const u=this.getBounds(),f=this.map.latLngToLayerPoint(u.getNorthWest()),p=this.map.latLngToLayerPoint(u.getSouthEast()),v=p.x-f.x,w=p.y-f.y,b=Math.min(v,w)*.1,S=Math.max(10,Math.min(48,b)),x=n.split(`
`),I=S*1.2,D=x.length*I,j=f.y+(w-D)/2,z=this._getTextAnchor(),W=this._calculateTextX(f.x,p.x,5);if(a.setAttribute("text-anchor",z),a.setAttribute("dominant-baseline","hanging"),x.forEach((Q,mt)=>{const Tt=Kt.SVG.create("tspan");Tt.textContent=Q,Tt.setAttribute("x",W.toString()),Tt.setAttribute("dy",mt===0?"0":`${I}px`),Tt.style.fontSize=`${S}px`,a.appendChild(Tt)}),a.setAttribute("y",j.toString()),this.properties.rotation!==0){const Q=this.map.latLngToLayerPoint(u.getCenter());a.setAttribute("transform",`rotate(${this.properties.rotation}, ${Q.x}, ${Q.y})`)}this._textNode=a,o.appendChild(a),this.fire("text:redrawn",{text:n,fontSize:S,position:{x:W,y:j},dimensions:{width:v,height:w}}),console.log("[TextRectangle] Texte redessiné avec succès",{text:n,fontSize:S,position:{x:W,y:j},dimensions:{width:v,height:w},lines:x.length,lineHeight:I,totalTextHeight:D})}catch(r){console.error("[TextRectangle] Erreur lors du rendu du texte :",r)}}_calculateTextX(n,r,o){const a=r-n;switch(this.properties.style.textAlign){case"left":return n+o;case"right":return r-o;case"center":default:return n+a/2}}_getTextAnchor(){switch(this.properties.style.textAlign){case"left":return"start";case"right":return"end";case"center":default:return"middle"}}_removeTextNode(){this._textNode&&this._textNode.parentNode&&(this._textNode.parentNode.removeChild(this._textNode),this._textNode=null)}getDimensions(){const n=this.getBounds();if(!this.map)return{width:0,height:0};const r=n.getSouthWest(),o=Kt.latLng(n.getSouth(),n.getEast()),a=this.map.distance(r,o),u=this.map.distance(r,Kt.latLng(n.getNorth(),n.getWest()));return{width:a,height:u}}getMidPoints(){const n=this.getBounds(),r=n.getNorthWest(),o=n.getNorthEast(),a=n.getSouthEast(),u=n.getSouthWest();return[Kt.latLng((r.lat+o.lat)/2,(r.lng+o.lng)/2),Kt.latLng((o.lat+a.lat)/2,(o.lng+a.lng)/2),Kt.latLng((u.lat+a.lat)/2,(u.lng+a.lng)/2),Kt.latLng((r.lat+u.lat)/2,(r.lng+u.lng)/2)]}}var eo=63710088e-1,B1={centimeters:eo*100,centimetres:eo*100,degrees:360/(2*Math.PI),feet:eo*3.28084,inches:eo*39.37,kilometers:eo/1e3,kilometres:eo/1e3,meters:eo,metres:eo,miles:eo/1609.344,millimeters:eo*1e3,millimetres:eo*1e3,nauticalmiles:eo/1852,radians:1,yards:eo*1.0936};function Nx(t,e,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function vd(t,e,n={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!G0(t[0])||!G0(t[1]))throw new Error("coordinates must contain numbers");return Nx({type:"Point",coordinates:t},e,n)}function Dx(t,e="kilometers"){const n=B1[e];if(!n)throw new Error(e+" units is invalid");return t*n}function Ox(t,e="kilometers"){const n=B1[e];if(!n)throw new Error(e+" units is invalid");return t/n}function yd(t){return t%(2*Math.PI)*180/Math.PI}function Zo(t){return t%360*Math.PI/180}function G0(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function Ac(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Rx(t){return t.type==="Feature"?t.geometry:t}function T1(t,e,n={}){if(n.final===!0)return Ix(t,e);const r=Ac(t),o=Ac(e),a=Zo(r[0]),u=Zo(o[0]),f=Zo(r[1]),p=Zo(o[1]),v=Math.sin(u-a)*Math.cos(p),w=Math.cos(f)*Math.sin(p)-Math.sin(f)*Math.cos(p)*Math.cos(u-a);return yd(Math.atan2(v,w))}function Ix(t,e){let n=T1(e,t);return n=(n+180)%360,n}function Fx(t,e,n,r={}){const o=Ac(t),a=Zo(o[0]),u=Zo(o[1]),f=Zo(n),p=Ox(e,r.units),v=Math.asin(Math.sin(u)*Math.cos(p)+Math.cos(u)*Math.sin(p)*Math.cos(f)),w=a+Math.atan2(Math.sin(f)*Math.sin(p)*Math.cos(u),Math.cos(p)-Math.sin(u)*Math.sin(v)),b=yd(w),S=yd(v);return vd([b,S],r.properties)}function jx(t,e,n={}){var r=Ac(t),o=Ac(e),a=Zo(o[1]-r[1]),u=Zo(o[0]-r[0]),f=Zo(r[1]),p=Zo(o[1]),v=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(f)*Math.cos(p);return Dx(2*Math.atan2(Math.sqrt(v),Math.sqrt(1-v)),n.units)}function zx(t,e,n={}){const o=Rx(t).coordinates;let a=0;for(let u=0;u<o.length&&!(e>=a&&u===o.length-1);u++)if(a>=e){const f=e-a;if(f){const p=T1(o[u],o[u-1])-180;return Fx(o[u],f,p,n)}else return vd(o[u])}else a+=jx(o[u],o[u+1],n);return vd(o[o.length-1])}var W0=zx;class Wr extends Kt.Polyline{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});Re(this,"properties");Re(this,"cachedProperties",{});Re(this,"needsUpdate",!0);this.properties={type:"Line",style:r||{}},this.updateProperties(),this.on("add",()=>{this.updateProperties()})}updateProperties(){var o;const n=this.getLatLngs();if(!n||n.length<2){console.warn("Line has less than 2 points, cannot calculate properties");return}const r=n.map(a=>[a.lng,a.lat]);try{const a=ju(r),u=Ec(a,{units:"meters"});let f;if(n.length===2)f=Kt.latLng((n[0].lat+n[1].lat)/2,(n[0].lng+n[1].lng)/2);else{const v=W0(a,u/2,{units:"meters"});f=Kt.latLng(v.geometry.coordinates[1],v.geometry.coordinates[0])}const p=10;this.properties={...this.properties,length:u,center:f,vertices:n.length,surfaceInfluence:u*p,dimensions:{width:p},style:{...this.options,color:this.options.color||"#3388ff",weight:this.options.weight||3,opacity:this.options.opacity||1,dashArray:((o=this.options)==null?void 0:o.dashArray)||""}},this.cachedProperties.length=u,this.cachedProperties.center=f,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.needsUpdate=!1,this.fire("properties:updated",{shape:this,properties:this.properties})}catch(a){console.error("Failed to calculate line properties",a)}finally{}}invalidateCache(){this.needsUpdate=!0,this.cachedProperties={}}setLatLngs(n){return super.setLatLngs(n),this.invalidateCache(),this.updateProperties(),this}getMidPoints(){if(!this.needsUpdate&&this.cachedProperties.midPoints)return this.cachedProperties.midPoints;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let o=0;o<n.length-1;o++){const a=n[o],u=n[o+1];if(!a||!u){console.warn("Points invalides détectés pour le segment",o);continue}r.push(Kt.latLng((a.lat+u.lat)/2,(a.lng+u.lng)/2))}return this.cachedProperties.midPoints=r,r}getMidPointAt(n){const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return null;const o=r[n],a=r[n+1];return!o||!a?(console.warn("Points invalides pour calcul du midpoint au segment",n),null):Kt.latLng((o.lat+a.lat)/2,(o.lng+a.lng)/2)}moveVertex(n,r,o=!1){const a=this.getLatLngs();n>=0&&n<a.length&&(a[n]=r,Kt.Polyline.prototype.setLatLngs.call(this,a),this.needsUpdate=!0,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.cachedProperties.center=void 0,this.cachedProperties.length=void 0,o&&this.updateProperties())}addVertex(n,r,o=!1){const a=this.getLatLngs();n>=0&&n<a.length-1&&(a.splice(n+1,0,r),Kt.Polyline.prototype.setLatLngs.call(this,a),this.needsUpdate=!0,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.cachedProperties.center=void 0,this.cachedProperties.length=void 0,o&&this.updateProperties())}move(n,r=!0){const a=this.getLatLngs().map(u=>Kt.latLng(u.lat+n.lat,u.lng+n.lng));return Kt.Polyline.prototype.setLatLngs.call(this,a),this.fire("move"),this.needsUpdate=!0,this.cachedProperties.center=void 0,r&&this.updateProperties(),this}getCenter(){if(!this.needsUpdate&&this.cachedProperties.center)return this.cachedProperties.center;const n=this.getLatLngs();if(n.length<2)return n[0]||new Kt.LatLng(0,0);try{const r=n.map(p=>[p.lng,p.lat]),o=ju(r),a=Ec(o,{units:"meters"}),u=W0(o,a/2,{units:"meters"}),f=Kt.latLng(u.geometry.coordinates[1],u.geometry.coordinates[0]);return this.cachedProperties.center=f,f}catch(r){console.warn("Error calculating line center with turf.js, using simple method",r);const o=n.reduce((f,p)=>f+p.lat,0)/n.length,a=n.reduce((f,p)=>f+p.lng,0)/n.length,u=new Kt.LatLng(o,a);return this.cachedProperties.center=u,u}}getSegmentLengths(){if(!this.needsUpdate&&this.cachedProperties.segmentLengths)return this.cachedProperties.segmentLengths;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let o=0;o<n.length-1;o++){const a=n[o],u=n[o+1];r.push(a.distanceTo(u))}return this.cachedProperties.segmentLengths=r,r}getSegmentLengthAt(n){const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return 0;const o=r[n],a=r[n+1];return o.distanceTo(a)}getLengthToVertex(n){const r=this.getLatLngs();let o=0;if(n<=0||r.length<2)return 0;for(let a=0;a<Math.min(n,r.length-1);a++)o+=r[a].distanceTo(r[a+1]);return o}getLength(){if(!this.needsUpdate&&this.cachedProperties.length)return this.cachedProperties.length;const n=this.getLatLngs();let r=0;for(let o=0;o<n.length-1;o++)r+=n[o].distanceTo(n[o+1]);return this.cachedProperties.length=r,r}}function Ux(t,e,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function qx(t,e,n={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Z0(t[0])||!Z0(t[1]))throw new Error("coordinates must contain numbers");return Ux({type:"Point",coordinates:t},e,n)}function Z0(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function N1(t,e,n){if(t!==null)for(var r,o,a,u,f,p,v,w=0,b=0,S,x=t.type,I=x==="FeatureCollection",D=x==="Feature",j=I?t.features.length:1,z=0;z<j;z++){v=I?t.features[z].geometry:D?t.geometry:t,S=v?v.type==="GeometryCollection":!1,f=S?v.geometries.length:1;for(var W=0;W<f;W++){var Q=0,mt=0;if(u=S?v.geometries[W]:v,u!==null){p=u.coordinates;var Tt=u.type;switch(w=Tt==="Polygon"||Tt==="MultiPolygon"?1:0,Tt){case null:break;case"Point":if(e(p,b,z,Q,mt)===!1)return!1;b++,Q++;break;case"LineString":case"MultiPoint":for(r=0;r<p.length;r++){if(e(p[r],b,z,Q,mt)===!1)return!1;b++,Tt==="MultiPoint"&&Q++}Tt==="LineString"&&Q++;break;case"Polygon":case"MultiLineString":for(r=0;r<p.length;r++){for(o=0;o<p[r].length-w;o++){if(e(p[r][o],b,z,Q,mt)===!1)return!1;b++}Tt==="MultiLineString"&&Q++,Tt==="Polygon"&&mt++}Tt==="Polygon"&&Q++;break;case"MultiPolygon":for(r=0;r<p.length;r++){for(mt=0,o=0;o<p[r].length;o++){for(a=0;a<p[r][o].length-w;a++){if(e(p[r][o][a],b,z,Q,mt)===!1)return!1;b++}mt++}Q++}break;case"GeometryCollection":for(r=0;r<u.geometries.length;r++)if(N1(u.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function $x(t,e={}){let n=0,r=0,o=0;return N1(t,function(a){n+=a[0],r+=a[1],o++}),qx([n/o,r/o],e.properties)}var mc=$x;const Mh=(t,e)=>{if(!t||typeof t!="string"||!t.startsWith("#"))return`rgba(0, 0, 0, ${e})`;const n=parseInt(t.slice(1,3),16),r=parseInt(t.slice(3,5),16),o=parseInt(t.slice(5,7),16);return`rgba(${n}, ${r}, ${o}, ${e})`},K0=(t,e)=>{t.style.fontSize=e.fontSize,t.style.color=e.color,t.style.backgroundColor=Mh(e.backgroundColor,e.backgroundOpacity),e.hasBorder?t.style.border=`${e.borderWidth} solid ${Mh(e.borderColor,e.borderOpacity)}`:t.style.border="none",t.style.padding=e.padding,t.style.borderRadius=e.borderRadius},Is=t=>{document.querySelectorAll(".drawing-help-message").forEach(r=>r.remove());const n=Kt.DomUtil.create("div","drawing-help-message");return n.innerHTML=t,n.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(n),n};function J0(t,e,n){const r=156543.03392*Math.cos(e*Math.PI/180)/Math.pow(2,n);return t/r}const dn=(t,e="m",n="")=>{let r,o;return e==="m²"?t>=1e4?(r=(t/1e4).toFixed(2),o="ha"):(r=t.toFixed(2),o="m²"):e==="m"?t>=1e3?(r=(t/1e3).toFixed(2),o="km"):(r=t.toFixed(2),o="m"):(r=t.toFixed(2),o=e),n?`${n}: ${r} ${o}`:`${r} ${o}`},If=t=>`${((t%360+360)%360).toFixed(1)}°`,Vx=t=>({...t,clientX:t.clientX,clientY:t.clientY,button:t.button||0,buttons:t.buttons||0,altKey:t.altKey||!1}),Hx=(t,e)=>{let n;return function(...r){window.clearTimeout(n),n=window.setTimeout(()=>t.apply(this,r),e)}},yu=(t,e)=>{let n=0;return function(...r){const o=Date.now();if(!(o-n<e))return n=o,t.apply(this,r)}};function Gx(){const t=Ie(null),e=Ie(null),n=Ie(null),r=Ie(null),o=Ie(""),a=Ie(null),u=Ie(!1);window.addEventListener("clearControlPoints",()=>{a.value=null,n.value&&n.value.clearLayers(),r.value&&r.value.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(M=>M.remove()),document.querySelectorAll(".drawing-help-message").forEach(M=>M.remove())}),$h(()=>{window.removeEventListener("clearControlPoints",()=>{}),t.value&&(t.value.remove(),t.value=null)});const f=(M,$="Double-cliquez pour éditer")=>{const q={fontSize:"14px",color:"#000000",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderWidth:"1px",borderOpacity:1,padding:"5px 10px",borderRadius:"3px",hasBorder:!0,rotation:0,physicalSize:2},O=(ht,At)=>{var yt;const jt=((yt=t.value)==null?void 0:yt.getZoom())||14,H=M.lat,J=J0(At.physicalSize,H,jt);return`<div class="text-container" style="width:${J}px;height:${J}px;transform:rotate(${At.rotation}deg)">
        <div class="text-annotation" style="font-size:${J*.2}px;color:${At.color};background-color:${Mh(At.backgroundColor,At.backgroundOpacity)};border:${At.hasBorder?At.borderWidth+" solid "+Mh(At.borderColor,At.borderOpacity):"none"};padding:${At.padding};border-radius:${At.borderRadius}">${ht}</div>
        <div class="text-controls"><div class="control-button rotate"></div><div class="control-button move"></div></div>
      </div>`},dt=()=>{if(!t.value)return;const ht=Y.getIcon(),At={html:O(Y.properties.text,Y.properties.style),className:ht.options.className};Y.setIcon(Kt.divIcon(At))},gt=Kt.divIcon({html:O($,q),className:"text-container",iconSize:[40,40],iconAnchor:[20,20]}),Y=Kt.marker(M,{icon:gt,draggable:!1,pmIgnore:!0});Y.properties={type:"text",text:$,style:{...q}},t.value&&(t.value.on("zoomend",dt),Y.on("remove",()=>{var ht;(ht=t.value)==null||ht.off("zoomend",dt)})),dt();let A=!1,U=!1,et=0,lt=0;const ct=ht=>{if(!t.value)return;const At=ht.target;if(At.classList.contains("rotate")){A=!0;const jt=Y.getLatLng(),H=t.value.mouseEventToLatLng(ht);et=Math.atan2(H.lat-jt.lat,H.lng-jt.lng)*180/Math.PI,lt=Y.properties.style.rotation||0}else At.classList.contains("move")&&(U=!0);document.addEventListener("mousemove",tt),document.addEventListener("mouseup",ft)},tt=ht=>{if(!(!U||!t.value)){if(A){const At=Y.getLatLng(),jt=t.value.mouseEventToLatLng(ht),H=Math.atan2(jt.lat-At.lat,jt.lng-At.lng)*180/Math.PI,J=(lt+(H-et))%360;Y.properties.style.rotation=J;const yt=Y.getIcon(),wt={html:O(Y.properties.text,Y.properties.style),className:yt.options.className};Y.setIcon(Kt.divIcon(wt))}else if(U){const At=Vx(ht),jt=t.value.mouseEventToLatLng(At);Y.setLatLng(jt)}}},ft=()=>{A=!1,U=!1,document.removeEventListener("mousemove",tt),document.removeEventListener("mouseup",ft)};return Y.on("add",()=>{const ht=Y.getElement();ht&&ht.querySelectorAll(".control-button").forEach(jt=>{jt.addEventListener("mousedown",ct)})}),Y.on("remove",()=>{const ht=Y.getElement();ht&&ht.querySelectorAll(".control-button").forEach(jt=>{jt.removeEventListener("mousedown",ct)})}),Y.on("dblclick",ht=>{var wt;Kt.DomEvent.stopPropagation(ht);const At=(wt=Y.getElement())==null?void 0:wt.querySelector(".text-annotation");if(!At)return;At.contentEditable="true",At.focus(),At.classList.add("editing");const jt=window.getSelection(),H=document.createRange();H.selectNodeContents(At),jt==null||jt.removeAllRanges(),jt==null||jt.addRange(H);const J=()=>{At.contentEditable="false",At.classList.remove("editing");const K=At.innerText.trim();if(K){Y.properties.text=K;const Ht=Y.getIcon(),ne={html:O(K,Y.properties.style),className:Ht.options.className};Y.setIcon(Kt.divIcon(ne))}At.removeEventListener("blur",J),At.removeEventListener("keydown",yt)},yt=K=>{K.key==="Enter"&&!K.shiftKey&&(K.preventDefault(),J())};At.addEventListener("blur",J),At.addEventListener("keydown",yt)}),Y},p=(M,$)=>{const q=Kt.DomUtil.create("div","measure-tooltip");if(q.innerHTML=$,q.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(q),t.value){const O=t.value.latLngToContainerPoint(M);q.style.left=`${O.x+10}px`,q.style.top=`${O.y-25}px`}return q},v=yu((M,$,q)=>{if(M&&(M.innerHTML=q,t.value)){const O=t.value.latLngToContainerPoint($);M.style.left=`${O.x+10}px`,M.style.top=`${O.y-25}px`}},100),w=(M,$,q)=>{M.on("mouseover",()=>{const O=p(M.getLatLng(),q());M.measureDiv=O}),M.on("mousemove",O=>{M.measureDiv&&t.value&&v(M.measureDiv,O.latlng,q())}),M.on("mouseout",()=>{M.measureDiv&&(M.measureDiv.remove(),M.measureDiv=void 0)})};let b=[];const S=()=>{b.forEach(M=>{M&&M.remove&&("measureDiv"in M&&M.measureDiv&&(M.measureDiv.remove(),M.measureDiv=void 0),n.value&&n.value.removeLayer(M),M.remove())}),b=[],document.querySelectorAll(".measure-tooltip").forEach(M=>{M.remove()})},x=(M,$="#2563EB")=>{const q=Kt.circleMarker(M,{radius:6,color:$,fillColor:$,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return n.value&&n.value.addLayer(q),q},I=(M,$)=>{var O,dt,gt,Y,A,U;console.log("Input layer:",{type:$,instanceof:{Circle:M instanceof Kt.Circle,Rectangle:M instanceof Kt.Rectangle,Polygon:M instanceof Kt.Polygon,Polyline:M instanceof Kt.Polyline,CircleArc:M instanceof Hl,TextRectangle:M instanceof Go},options:M.options});const q={type:$,style:M.options||{}};try{if(M instanceof Go)return M.properties;if(M instanceof Kt.Circle){const et=M.getRadius(),lt=M.getLatLng();q.radius=et,q.diameter=et*2,q.area=Math.PI*Math.pow(et,2),q.perimeter=2*Math.PI*et,q.center=lt,q.surfaceInterieure=q.area,q.surfaceExterieure=q.area}else if(M instanceof Hl){const et=M.getRadius(),lt=M.getCenter(),ct=M.getStartAngle(),tt=M.getStopAngle(),ft=M.getOpeningAngle();q.radius=et,q.diameter=et*2,q.area=Math.PI*Math.pow(et,2)*ft/360,q.arcLength=2*Math.PI*et*ft/360,q.perimeter=q.arcLength+2*et,q.center=lt,q.startAngle=ct,q.stopAngle=tt,q.openingAngle=ft,q.surfaceInterieure=q.area,q.surfaceExterieure=q.area}else if(M instanceof Kt.Rectangle){const et=M.getBounds(),lt=et.getNorthEast(),ct=et.getSouthWest(),tt=Xl([ct.lng,ct.lat],[lt.lng,ct.lat],{units:"meters"}),ft=Xl([ct.lng,ct.lat],[ct.lng,lt.lat],{units:"meters"});q.width=tt,q.height=ft,q.area=tt*ft,q.perimeter=2*(tt+ft),q.surfaceInterieure=q.area,q.surfaceExterieure=q.area,q.dimensions={width:tt,height:ft}}else if(M instanceof Kt.Polygon){const lt=M.getLatLngs()[0].map(tt=>[tt.lng,tt.lat]);lt.push(lt[0]);const ct=Ll([lt]);q.area=Cu(ct),q.perimeter=Ec(ju([...lt]),{units:"meters"}),q.surfaceInterieure=q.area,q.surfaceExterieure=q.area}else if(M instanceof Kt.Polyline&&!(M instanceof Kt.Polygon))if(M instanceof Wr)M.updateProperties(),Object.assign(q,{...M.properties,type:"Line"});else{const lt=M.getLatLngs().map(ft=>[ft.lng,ft.lat]),ct=ju(lt);q.length=Ec(ct,{units:"meters"});const tt=10;q.surfaceInfluence=q.length*tt,q.dimensions={width:tt}}q.style={...q.style,color:((O=M.options)==null?void 0:O.color)||"#3388ff",weight:((dt=M.options)==null?void 0:dt.weight)||3,opacity:((gt=M.options)==null?void 0:gt.opacity)||1,fillColor:((Y=M.options)==null?void 0:Y.fillColor)||"#3388ff",fillOpacity:((A=M.options)==null?void 0:A.fillOpacity)||.2,dashArray:((U=M.options)==null?void 0:U.dashArray)||""}}catch(et){console.error("Error calculating shape properties:",et)}return q},D=(M,$=2)=>{var Y;if(!t.value){console.warn("Map is not available for text size update");return}const q=t.value.getZoom(),O=M.getLatLng().lat,dt=J0($,O,q),gt=(Y=M.getElement())==null?void 0:Y.querySelector(".text-annotation");gt&&(M.properties.style.fontSize=`${dt}px`,M.properties.physicalWidth=$,M.properties.physicalHeight=$,K0(gt,M.properties.style))},j=(M,$,q)=>{const O=Kt.map(M).setView($,q);t.value=O,Kt.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors"}).addTo(O);const dt=new Kt.FeatureGroup;return dt.addTo(O),e.value=dt,n.value=Kt.featureGroup().addTo(O),r.value=Kt.featureGroup().addTo(O),O.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:dt,snapLayers:[dt,r.value],templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),O.on("pm:drawstart",gt=>{u.value=!0,gt.shape==="Circle"&&o.value==="Semicircle"&&(O.getContainer().style.cursor="crosshair")}),O.on("pm:drawend",()=>{u.value=!1,O.getContainer().style.cursor="",a.value&&Is("Cliquez sur la forme pour afficher les points de contrôle")}),O.on("pm:create",async gt=>{var U,et,lt,ct,tt,ft,ht,At,jt;const Y=gt.layer;(U=e.value)==null||U.addLayer(Y);let A="unknown";if(Y instanceof Kt.Circle?A=o.value==="Semicircle"?"Semicircle":"Circle":Y instanceof Kt.Rectangle?A="Rectangle":Y instanceof Kt.Polygon?A="Polygon":Y instanceof Kt.Polyline&&!(Y instanceof Kt.Polygon)&&(A="Line"),Y.properties=I(Y,A),a.value=Y,Y.on("mouseover",()=>{console.log("[mouseover] Survol de la forme",{type:A,isSelected:a.value===Y}),(!a.value||a.value!==Y)&&St(Y)}),Y.on("mouseout",()=>{var H;console.log("[mouseout] Sortie de la forme",{type:A,isSelected:a.value===Y}),(!a.value||a.value!==Y)&&((H=r.value)==null||H.clearLayers())}),A==="Semicircle"){const H=Y.getLatLng(),J=Y.getRadius();(et=e.value)==null||et.removeLayer(Y);const yt=new Hl(H,J);yt.properties=I(yt,"Semicircle"),(lt=e.value)==null||lt.addLayer(yt),a.value=yt,V(yt)}else if(A==="Circle"){(ct=e.value)==null||ct.removeLayer(Y);const H=new ec(Y.getLatLng(),{...Y.options,radius:Y.getRadius()});H.updateProperties(),(tt=e.value)==null||tt.addLayer(H),a.value=H,vt(H)}else if(A==="Rectangle"){(ft=e.value)==null||ft.removeLayer(Y);const H=new $o(Y.getBounds(),{...Y.options});H.updateProperties(),(ht=e.value)==null||ht.addLayer(H),a.value=H,Ct(H)}else if(Y instanceof Kt.Polygon)Z(Y);else if(Y instanceof Wr)Ut(Y);else if(Y instanceof Kt.Polyline&&!(Y instanceof Kt.Polygon)){const H=Y.getLatLngs(),J=new Wr(H,{...Y.options});J.updateProperties(),(At=e.value)==null||At.removeLayer(Y),(jt=e.value)==null||jt.addLayer(J),a.value=J,Ut(J)}Is("Cliquez sur la forme pour afficher les points de contrôle")}),dt.on("click",gt=>{var A,U,et,lt,ct,tt,ft,ht,At;Kt.DomEvent.stopPropagation(gt);const Y=gt.layer;if(console.log("[featureGroup click] Sélection de forme",{type:(A=Y.properties)==null?void 0:A.type,previouslySelected:a.value===Y}),(U=r.value)==null||U.clearLayers(),S(),(et=document.querySelector(".drawing-help-message"))==null||et.remove(),a.value=Y,Y instanceof Go){console.log("[featureGroup click] TextRectangle sélectionné",{id:Y._leaflet_id,bounds:Y.getBounds(),hasTextContainer:!!Y.getTextElement(),properties:Y.properties}),(lt=t.value)!=null&&lt.pm.globalEditModeEnabled()&&t.value.pm.disableGlobalEditMode(),Et(Y),Is("Double-cliquez pour éditer le texte. Utilisez les points rouges pour redimensionner.");return}if(Y instanceof Hl||((ct=Y.properties)==null?void 0:ct.type)==="Semicircle")V(Y);else if(Y instanceof ec)vt(Y);else if(Y instanceof Kt.Circle){const jt=new ec(Y.getLatLng(),{...Y.options,radius:Y.getRadius()});jt.updateProperties(),(tt=e.value)==null||tt.removeLayer(Y),(ft=e.value)==null||ft.addLayer(jt),a.value=jt,vt(jt)}else if(Y instanceof $o)Ct(Y);else if(Y instanceof Kt.Rectangle){const jt=new $o(Y.getBounds(),{...Y.options});jt.updateProperties(),(ht=e.value)==null||ht.removeLayer(Y),(At=e.value)==null||At.addLayer(jt),a.value=jt,Ct(jt)}else Y instanceof Kt.Polygon?Z(Y):(Y instanceof Wr||Y instanceof Kt.Polyline&&!(Y instanceof Kt.Polygon))&&Ut(Y)}),O.on("pm:edit",gt=>{var A,U,et;console.log("[pm:edit] Début",{layer:gt.layer,currentProperties:gt.layer.properties});const Y=gt.layer;if(Y){const lt=((A=Y.properties)==null?void 0:A.type)||"unknown";if(Nt(Y,lt),console.log("[pm:edit] Après updateLayerProperties",{updatedProperties:Y.properties,selectedShape:a.value}),lt==="Semicircle")V(Y);else if(Y instanceof ec)vt(Y);else if(Y instanceof $o)Ct(Y);else if(Y instanceof Kt.Rectangle){const ct=new $o(Y.getBounds(),{...Y.options});ct.updateProperties(),(U=e.value)==null||U.removeLayer(Y),(et=e.value)==null||et.addLayer(ct),a.value=ct,Ct(ct)}else Y instanceof Kt.Polygon?Z(Y):Y instanceof Wr?(Y.updateProperties(),Nt(Y,"Line"),Ut(Y)):Y instanceof Kt.Polyline&&Ut(Y)}}),O.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(gt=>gt.remove()),Is("Déplacez la forme à l'endroit souhaité")}),O.on("pm:dragend",gt=>{var A,U,et;console.log("[pm:dragend] Début",{layer:gt.layer,currentProperties:gt.layer.properties});const Y=gt.layer;if(Y){const lt=((A=Y.properties)==null?void 0:A.type)||"unknown";if(Y instanceof Kt.Rectangle&&!(Y instanceof $o)){const ct=new $o(Y.getBounds(),{...Y.options});ct.updateProperties(),(U=e.value)==null||U.removeLayer(Y),(et=e.value)==null||et.addLayer(ct),a.value=ct,Ct(ct)}else Y instanceof Wr?(Y.updateProperties(),Nt(Y,"Line"),Ut(Y)):Nt(Y,lt);console.log("[pm:dragend] Après updateLayerProperties",{updatedProperties:Y.properties,selectedShape:a.value})}setTimeout(()=>{Is("Cliquez sur la forme pour afficher les points de contrôle")},100)}),O.on("pm:remove",()=>{var gt;(gt=document.querySelector(".drawing-help-message"))==null||gt.remove()}),O.on("pm:select",gt=>{var A;const Y=gt.layer;document.querySelectorAll(".drawing-help-message").forEach(U=>U.remove()),Y instanceof Hl||((A=Y.properties)==null?void 0:A.type)==="Semicircle"?Is(`Points de contrôle : <span style="color: #059669">●</span> Ajuster le rayon, <span style="color: #2563EB">●</span> et <span style="color: #DC2626">●</span> Modifier l'ouverture du demi-cercle`):Is("Utilisez les points de contrôle pour modifier la forme")}),O.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(gt=>gt.remove())}),O.on("zoomstart",()=>{a.value&&(S(),a.value=null,document.querySelectorAll(".drawing-help-message").forEach(gt=>gt.remove()))}),O},z=()=>{if(!t.value||!e.value)return;const M=e.value.getBounds();M.isValid()&&t.value.fitBounds(M,{padding:[50,50],maxZoom:19})},W=M=>{var $;if(t.value){document.querySelectorAll(".drawing-help-message").forEach(q=>q.remove());try{const q=t.value.pm;q.globalEditModeEnabled()&&q.disableGlobalEditMode(),q.globalRemovalModeEnabled()&&q.disableGlobalRemovalMode(),q.disableDraw(),S(),($=r.value)==null||$.clearLayers()}catch(q){console.error("Error disabling modes:",q)}if(o.value=M,!M){S();return}setTimeout(()=>{var q,O,dt,gt,Y,A,U,et,lt;try{switch(M){case"Circle":case"Semicircle":const ct=(q=e.value)==null?void 0:q.getLayers().filter(tt=>tt instanceof $o||tt instanceof Go);ct&&ct.length>0&&ct.forEach(tt=>{var J;if(!tt.getBounds)return;const ft=tt.getBounds();[ft.getNorthWest(),ft.getNorthEast(),ft.getSouthEast(),ft.getSouthWest()].forEach(yt=>{var K;const wt=Kt.circleMarker(yt,{radius:4,color:"#DC2626",fillColor:"#DC2626",fillOpacity:.4,weight:2,className:"temp-corner-marker",pmIgnore:!0});(K=r.value)==null||K.addLayer(wt)}),(tt instanceof $o?tt.getMidPoints():[Kt.latLng((ft.getNorth()+ft.getSouth())/2,ft.getWest()),Kt.latLng(ft.getNorth(),(ft.getEast()+ft.getWest())/2),Kt.latLng((ft.getNorth()+ft.getSouth())/2,ft.getEast()),Kt.latLng(ft.getSouth(),(ft.getEast()+ft.getWest())/2)]).forEach(yt=>{var K;const wt=Kt.circleMarker(yt,{radius:5,color:"#2563EB",fillColor:"#2563EB",fillOpacity:.6,weight:2,className:"temp-midpoint-marker",pmIgnore:!0});(K=r.value)==null||K.addLayer(wt)});const jt=ft.getCenter(),H=Kt.circleMarker(jt,{radius:4,color:"#059669",fillColor:"#059669",fillOpacity:.4,weight:2,className:"temp-center-marker",pmIgnore:!0});(J=r.value)==null||J.addLayer(H)}),t.value.pm.setGlobalOptions({snapDistance:20,snapSegment:!0,snapLayers:[e.value,r.value]}),Is(M==="Circle"?"Positionnez le centre du cercle. Points bleus : milieu des côtés, Points rouges : sommets, Point vert : centre":"Positionnez le centre du demi-cercle. Points bleus : milieu des côtés, Points rouges : sommets, Point vert : centre"),t.value.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Rectangle":Is("Cliquez et maintenez pour dessiner un rectangle, relâchez pour terminer"),(O=t.value)==null||O.pm.enableDraw("Rectangle",{finishOn:"mouseup"});break;case"Polygon":Is("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(dt=t.value)==null||dt.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Line":Is("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(gt=t.value)==null||gt.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Text":if(Is("Cliquez pour ajouter du texte, double-cliquez pour éditer"),t.value){const tt=ft=>{if(!t.value||!e.value)return;const ht=f(ft.latlng);e.value.addLayer(ht),a.value=ht,t.value.off("click",tt),W("")};t.value.on("click",tt)}break;case"delete":Is("Cliquez sur une forme pour la supprimer"),(Y=t.value)==null||Y.pm.enableGlobalRemovalMode();break;case"TextRectangle":Is("Cliquez et maintenez pour dessiner un rectangle avec texte, relâchez pour terminer"),(A=t.value)!=null&&A.pm.globalEditModeEnabled()&&t.value.pm.disableGlobalEditMode(),(U=t.value)==null||U.pm.enableDraw("Rectangle",{finishOn:"mouseup",continueDrawing:!1,templineStyle:{color:"#3B82F6",weight:2,dashArray:"5,5"}}),(et=t.value)==null||et.off("pm:create"),(lt=t.value)==null||lt.on("pm:create",tt=>{var ft,ht,At;if(tt.shape==="Rectangle"&&tt.layer){const jt=tt.layer.getBounds();let H=!1;if(e.value&&e.value.eachLayer(J=>{if(J instanceof Go){const yt=J.getBounds(),wt=1e-8;Math.abs(yt.getNorth()-jt.getNorth())<wt&&Math.abs(yt.getSouth()-jt.getSouth())<wt&&Math.abs(yt.getEast()-jt.getEast())<wt&&Math.abs(yt.getWest()-jt.getWest())<wt&&(H=!0,a.value=J,console.log("[TextRectangle] Rectangle existant trouvé, sélection au lieu de création"))}}),!H){(ft=t.value)==null||ft.removeLayer(tt.layer),(ht=e.value)!=null&&ht.hasLayer(tt.layer)&&e.value.removeLayer(tt.layer);const J=new Go(jt,"Double-cliquez pour éditer",{color:"#3B82F6",weight:2,fillColor:"#F9FAFB",fillOpacity:.8,textColor:"#000000",fontFamily:"Arial, sans-serif",textAlign:"center",bold:!1,italic:!1});e.value&&(e.value.addLayer(J),a.value=J,J.updateProperties(),Et(J),console.log("[TextRectangle] Nouveau rectangle créé avec succès",{bounds:J.getBounds(),properties:J.properties,style:J.properties.style}))}(At=t.value)==null||At.pm.disableDraw()}});break}}catch(ct){console.error("Error enabling tool:",ct)}},100)}},Q=M=>{var q;if(!a.value)return;const $=a.value;if($.properties=$.properties||{},$.properties.style=$.properties.style||{},$.properties.style={...$.properties.style,...M},$.properties.type==="text"){const O=$.properties._textLayer,dt=(q=O==null?void 0:O.getElement())==null?void 0:q.querySelector(".text-annotation");dt&&K0(dt,$.properties.style);const gt={color:M.borderColor||$.properties.style.borderColor,weight:parseInt(M.borderWidth||$.properties.style.borderWidth),opacity:M.borderOpacity??$.properties.style.borderOpacity};"setStyle"in $&&$.setStyle(gt)}else if($.properties.type==="TextRectangle"){if($ instanceof Go){const O={};M.textColor!==void 0&&(O.textColor=M.textColor),M.fontSize!==void 0&&(O.fontSize=M.fontSize),M.fontFamily!==void 0&&(O.fontFamily=M.fontFamily),M.backgroundColor!==void 0&&(O.backgroundColor=M.backgroundColor),M.backgroundOpacity!==void 0&&(O.backgroundOpacity=M.backgroundOpacity),M.textAlign!==void 0&&(O.textAlign=M.textAlign),M.bold!==void 0&&(O.bold=M.bold),M.italic!==void 0&&(O.italic=M.italic),M.fillColor&&(O.fillColor=M.fillColor),M.fillOpacity!==void 0&&(O.fillOpacity=M.fillOpacity),M.strokeColor&&(O.color=M.strokeColor),M.color&&(O.color=M.color),M.strokeOpacity!==void 0&&(O.opacity=M.strokeOpacity),M.strokeWidth!==void 0&&(O.weight=M.strokeWidth),M.weight!==void 0&&(O.weight=M.weight),M.dashArray&&(O.dashArray=M.dashArray),$.setTextStyle(O)}}else{const O={};M.fillColor&&(O.fillColor=M.fillColor),M.fillOpacity!==void 0&&(O.fillOpacity=M.fillOpacity),M.strokeColor&&(O.color=M.strokeColor),M.strokeOpacity!==void 0&&(O.opacity=M.strokeOpacity),M.strokeWidth!==void 0&&(O.weight=M.strokeWidth),M.dashArray&&(O.dashArray=M.dashArray),"setStyle"in $&&$.setStyle(O)}},mt=M=>{if(!a.value)return;const $=a.value;$.properties={...$.properties,...M},M.radius&&$ instanceof Kt.Circle&&$.setRadius(M.radius)},Tt=M=>{console.log("[forceShapeUpdate] Début",{currentProperties:M.properties,selectedShapeRef:a.value}),a.value=null,Ai(()=>{a.value=M,console.log("[forceShapeUpdate] Après mise à jour",{selectedShape:a.value,properties:a.value.properties})})},Nt=(M,$)=>{console.log("[updateLayerProperties] Début",{layer:M,shapeType:$,currentProperties:M.properties}),Hx((O,dt)=>{const gt=I(O,dt);console.log("[updateLayerProperties] Nouvelles propriétés calculées",{newProperties:gt}),O.properties={...gt},Tt(O),O.fire("properties:updated",{shape:O,properties:O.properties}),console.log("[updateLayerProperties] Fin",{finalProperties:O.properties,selectedShape:a.value})},100)(M,$)},Ft=(M,$)=>Kt.latLng((M.lat+$.lat)/2,(M.lng+$.lng)/2),vt=M=>{if(!t.value||!e.value)return;S();const $=M.getLatLng(),q=M.getRadius(),O=x($,"#059669");b.push(O),w(O,M,()=>[dn(q,"m","Rayon"),dn(q*2,"m","Diamètre"),dn(Math.PI*Math.pow(q,2),"m²","Surface")].join("<br>"));const dt=[],gt=[0,45,90,135,180,225,270,315];gt.forEach(Y=>{const A=M.calculatePointOnCircle(Y),U=x(A,"#2563EB");dt.push(U),b.push(U),w(U,M,()=>dn(q,"m","Rayon")),U.on("mousedown",et=>{if(!t.value)return;Kt.DomEvent.stopPropagation(et),t.value.dragging.disable();let lt=!0;const ct=ft=>{lt&&(M.resizeFromControlPoint(ft.latlng),dt.forEach((ht,At)=>{const jt=M.calculatePointOnCircle(gt[At]);ht.setLatLng(jt)}),O.setLatLng(M.getLatLng()),U.measureDiv&&(U.measureDiv.innerHTML=dn(M.getRadius(),"m","Rayon")))},tt=()=>{lt=!1,t.value&&(t.value.off("mousemove",ct),document.removeEventListener("mouseup",tt),t.value.dragging.enable(),M.updateProperties(),a.value=null,Ai(()=>{a.value=M}),Nt(M,"Circle"))};t.value.on("mousemove",ct),document.addEventListener("mouseup",tt)})}),O.on("mousedown",Y=>{if(!t.value)return;Kt.DomEvent.stopPropagation(Y),t.value.dragging.disable();let A=!0;const U=M.getLatLng(),et=Y.latlng,lt=tt=>{if(!A)return;const ft=tt.latlng.lng-et.lng,ht=tt.latlng.lat-et.lat,At=Kt.latLng(U.lat+ht,U.lng+ft);Kt.Circle.prototype.setLatLng.call(M,At),O.setLatLng(At),dt.forEach((jt,H)=>{const J=M.calculatePointOnCircle(gt[H]);jt.setLatLng(J)}),O.measureDiv&&(O.measureDiv.innerHTML=[dn(M.getRadius(),"m","Rayon"),dn(M.getRadius()*2,"m","Diamètre"),dn(Math.PI*Math.pow(M.getRadius(),2),"m²","Surface")].join("<br>"))},ct=()=>{A=!1,t.value&&(t.value.off("mousemove",lt),document.removeEventListener("mouseup",ct),t.value.dragging.enable(),M.updateProperties(),a.value=null,Ai(()=>{a.value=M}),Nt(M,"Circle"))};t.value.on("mousemove",lt),document.addEventListener("mouseup",ct)}),M.on("circle:resized",()=>{Nt(M,"Circle")}),a.value=M},Ct=M=>{if(!t.value||!e.value)return;if(!(M instanceof $o)){console.warn("La couche n'est pas une instance de Rectangle");return}const $=M;S();const q=$.getBounds(),O=q.getCenter(),dt=[q.getNorthWest(),q.getNorthEast(),q.getSouthEast(),q.getSouthWest()],gt=x(O,"#059669");b.push(gt),w(gt,$,()=>{const{width:et,height:lt}=$.getDimensions(),ct=et*lt;return[dn(et,"m","Largeur"),dn(lt,"m","Hauteur"),dn(ct,"m²","Surface")].join("<br>")});const Y=[];dt.forEach((et,lt)=>{const ct=x(et,"#DC2626");Y.push(ct),b.push(ct),w(ct,$,()=>{const{width:tt,height:ft}=$.getDimensions();return[dn(tt,"m","Largeur"),dn(ft,"m","Hauteur")].join("<br>")}),ct.on("mousedown",tt=>{if(!t.value)return;Kt.DomEvent.stopPropagation(tt),t.value.dragging.disable();const ft=At=>{$.resizeFromCorner(lt,At.latlng);const jt=$.getBounds(),H=[jt.getNorthWest(),jt.getNorthEast(),jt.getSouthEast(),jt.getSouthWest()];ct.setLatLng(At.latlng),gt.setLatLng(jt.getCenter()),Y.forEach((yt,wt)=>{wt!==lt&&yt.setLatLng(H[wt])});const J=$.getMidPoints();A.forEach((yt,wt)=>{yt.setLatLng(J[wt]);const{width:K,height:Ht}=$.getDimensions(),ne=wt%2===0?K:Ht;yt.measureDiv&&(yt.measureDiv.innerHTML=[dn(ne,"m","Longueur du côté"),dn(ne/2,"m","Distance au coin")].join("<br>"))})},ht=()=>{t.value&&(t.value.off("mousemove",ft),document.removeEventListener("mouseup",ht),t.value.dragging.enable(),$.updateProperties(),a.value=null,Ai(()=>{a.value=$}))};t.value.on("mousemove",ft),document.addEventListener("mouseup",ht)})});const A=[];$.getMidPoints().forEach((et,lt)=>{const ct=x(et,"#2563EB");A.push(ct),b.push(ct),w(ct,$,()=>{const{width:tt,height:ft}=$.getDimensions(),ht=lt%2===0?tt:ft;return[dn(ht,"m","Longueur du côté"),dn(ht/2,"m","Distance au coin")].join("<br>")}),ct.on("mousedown",tt=>{Kt.DomEvent.stopPropagation(tt),t.value.dragging.disable();const ft=At=>{const jt=t.value.mouseEventToLatLng(At.originalEvent),H=$.getBounds(),J=H.getNorthWest(),yt=H.getSouthEast();let wt;if(lt%2===0){const Zt=(J.lng+yt.lng)/2;wt=Kt.latLng(jt.lat,Zt)}else{const Zt=(J.lat+yt.lat)/2;wt=Kt.latLng(Zt,jt.lng)}$.resizeFromSide(lt,wt);const K=$.getBounds(),Ht=[K.getNorthWest(),K.getNorthEast(),K.getSouthEast(),K.getSouthWest()];gt.setLatLng(K.getCenter()),Y.forEach((Zt,Dt)=>{Zt.setLatLng(Ht[Dt])});const ne=$.getMidPoints();A.forEach((Zt,Dt)=>{Zt.setLatLng(ne[Dt]);const{width:Lt,height:ae}=$.getDimensions(),te=Dt%2===0?Lt:ae;Zt.measureDiv&&(Zt.measureDiv.innerHTML=[dn(te,"m","Longueur du côté"),dn(te/2,"m","Distance au coin")].join("<br>"))})},ht=()=>{t.value.dragging.enable(),t.value.off("mousemove",ft),document.removeEventListener("mouseup",ht),$.updateProperties(),a.value=null,Ai(()=>{a.value=$})};t.value.on("mousemove",ft),document.addEventListener("mouseup",ht)})}),gt.on("mousedown",et=>{if(!t.value)return;Kt.DomEvent.stopPropagation(et),t.value.dragging.disable();let lt=!0;const ct=ft=>{if(!lt)return;$.moveFromCenter(ft.latlng),gt.setLatLng(ft.latlng);const ht=$.getBounds(),At=[ht.getNorthWest(),ht.getNorthEast(),ht.getSouthEast(),ht.getSouthWest()];Y.forEach((H,J)=>{H.setLatLng(At[J])});const jt=$.getMidPoints();if(A.forEach((H,J)=>{H.setLatLng(jt[J])}),gt.measureDiv){const{width:H,height:J}=$.getDimensions(),yt=H*J;gt.measureDiv.innerHTML=[dn(H,"m","Largeur"),dn(J,"m","Hauteur"),dn(yt,"m²","Surface")].join("<br>")}},tt=()=>{lt=!1,t.value&&(t.value.off("mousemove",ct),document.removeEventListener("mouseup",tt),t.value.dragging.enable(),$.updateProperties(),a.value=null,Ai(()=>{a.value=$}))};t.value.on("mousemove",ct),document.addEventListener("mouseup",tt)})},Ut=M=>{if(!t.value||!e.value)return;S();const $=M.getLatLngs();let q=null;if(M instanceof Wr){const gt=M.getCenter();q=x(gt,"#059669"),b.push(q),w(q,M,()=>{const Y=M.getLength()||0;return dn(Y,"m","Longueur totale")}),q.on("mousedown",Y=>{if(!t.value)return;Kt.DomEvent.stopPropagation(Y),t.value.dragging.disable();let A=!0;const U=Y.latlng,et=[...M.getLatLngs()];b.forEach((tt,ft)=>{ft>0&&tt.setStyle({opacity:0,fillOpacity:0})});const lt=tt=>{if(!A)return;const ft=tt.latlng.lng-U.lng,ht=tt.latlng.lat-U.lat,At=et.map(jt=>Kt.latLng(jt.lat+ht,jt.lng+ft));Kt.Polyline.prototype.setLatLngs.call(M,At),q==null||q.setLatLng(tt.latlng)},ct=()=>{A=!1,t.value&&(t.value.off("mousemove",lt),document.removeEventListener("mouseup",ct),t.value.dragging.enable(),S(),Ut(M),M instanceof Wr&&(M.updateProperties(),Nt(M,"Line")),a.value=M)};t.value.on("mousemove",lt),document.addEventListener("mouseup",ct)})}$.forEach((gt,Y)=>{const A=x(gt,"#DC2626");b.push(A),w(A,M,()=>{let U=0,et=0;return M instanceof Wr?(U=M.getLength()||0,et=M.getLengthToVertex(Y)):(U=$.reduce((lt,ct,tt)=>tt===0?0:lt+ct.distanceTo($[tt-1]),0),et=$.slice(0,Y+1).reduce((lt,ct,tt)=>tt===0?0:lt+ct.distanceTo($[tt-1]),0)),[dn(et,"m","Distance depuis le début"),dn(U,"m","Longueur totale")].join("<br>")}),A.on("mousedown",U=>{if(!t.value)return;Kt.DomEvent.stopPropagation(U),t.value.dragging.disable();let et=!0;q&&(q.setStyle({opacity:0,fillOpacity:0}),q.measureDiv&&(q.measureDiv.style.display="none"));const lt=[];Y>0&&lt.push(Y-1),Y<$.length-1&&lt.push(Y);const ct=lt.map(ht=>$.length+ht),tt=ht=>{et&&(M instanceof Wr?M.moveVertex(Y,ht.latlng,!1):($[Y]=ht.latlng,M.setLatLngs($)),A.setLatLng(ht.latlng),dt(lt,ct))},ft=()=>{if(et=!1,!!t.value){if(t.value.off("mousemove",tt),document.removeEventListener("mouseup",ft),t.value.dragging.enable(),M instanceof Wr&&(M.updateProperties(),Nt(M,"Line")),q&&M instanceof Wr){const ht=M.getCenter();q.setLatLng(ht),q.setStyle({opacity:1,fillOpacity:1}),q.measureDiv&&(q.measureDiv.style.display="")}a.value=null,Ai(()=>{a.value=M})}};t.value.on("mousemove",tt),document.addEventListener("mouseup",ft)})});const O=()=>{const gt=M.getLatLngs(),Y=M instanceof Wr?gt.length+1:gt.length;b.slice(Y).forEach(U=>{var et;U&&typeof U.remove=="function"&&((et=n.value)==null||et.removeLayer(U))}),b=b.slice(0,Y),(M instanceof Wr?M.getMidPoints():Array.from({length:gt.length-1},(U,et)=>{const lt=gt[et],ct=gt[et+1];return Kt.latLng((lt.lat+ct.lat)/2,(lt.lng+ct.lng)/2)})).forEach((U,et)=>{const lt=x(U,"#2563EB");b.push(lt),w(lt,M,()=>{let ct=0,tt=0,ft=0;if(M instanceof Wr)ct=M.getSegmentLengthAt(et),tt=M.getLength()||0,ft=M.getLengthToVertex(et)+ct/2;else{const ht=gt[et],At=gt[et+1];ct=ht.distanceTo(At),tt=gt.reduce((jt,H,J)=>J===0?0:jt+H.distanceTo(gt[J-1]),0),ft=gt.slice(0,et+1).reduce((jt,H,J)=>J===0?0:jt+H.distanceTo(gt[J-1]),0)+ct/2}return[dn(ct,"m","Longueur du segment"),dn(ct/2,"m","Demi-segment"),dn(ft,"m","Distance depuis le début"),dn(tt,"m","Longueur totale")].join("<br>")}),lt.on("mousedown",ct=>{if(!t.value)return;Kt.DomEvent.stopPropagation(ct),t.value.dragging.disable();let tt=!0;const ft=et,ht=M.getLatLngs(),At=b.find(J=>J.options&&J.options.color==="#059669");At&&(At.setStyle({opacity:0,fillOpacity:0}),At.measureDiv&&(At.measureDiv.style.display="none"));const jt=J=>{if(tt){if(M instanceof Wr)M.addVertex(ft,J.latlng,!1);else{const yt=ht.slice();yt.splice(ft+1,0,J.latlng),M.setLatLngs(yt)}S(),Ut(M),H()}},H=()=>{tt=!1,t.value&&(t.value.off("mousemove",jt),document.removeEventListener("mouseup",H),t.value.dragging.enable(),M instanceof Wr&&(M.updateProperties(),Nt(M,"Line")),a.value=null,Ai(()=>{a.value=M}))};t.value.on("mousemove",jt),document.addEventListener("mouseup",H)})})},dt=(gt,Y)=>{const A=M.getLatLngs();gt.forEach((U,et)=>{if(U<0||U>=A.length-1)return;const lt=Y[et];if(lt>=0&&lt<b.length){let ct;if(M instanceof Wr){const ft=M.getMidPointAt(U);if(!ft)return;ct=ft}else{const ft=A[U],ht=A[U+1];ct=Kt.latLng((ft.lat+ht.lat)/2,(ft.lng+ht.lng)/2)}const tt=b[lt];if(tt&&tt.setLatLng){tt.setLatLng(ct);const ft=tt;if(ft.measureDiv){let ht=0,At=0,jt=0;if(M instanceof Wr)ht=M.getSegmentLengthAt(U),At=M.getLength()||0,jt=M.getLengthToVertex(U)+ht/2;else{const H=A[U],J=A[U+1];ht=H.distanceTo(J),At=0,jt=0;for(let yt=0;yt<A.length-1;yt++){const wt=A[yt].distanceTo(A[yt+1]);At+=wt,yt<U?jt+=wt:yt===U&&(jt+=wt/2)}}ft.measureDiv.innerHTML=[dn(ht,"m","Longueur du segment"),dn(ht/2,"m","Demi-segment"),dn(jt,"m","Distance depuis le début"),dn(At,"m","Longueur totale")].join("<br>")}}}})};O()},Z=M=>{if(!t.value||!e.value)return;S();const $=M.getLatLngs()[0],q=$.map(et=>[et.lng,et.lat]);q.push(q[0]);const O=Ll([q]),dt=Cu(O),gt=$.reduce((et,lt,ct)=>{const tt=$[(ct+1)%$.length];return et+lt.distanceTo(tt)},0);let Y;if(typeof M.getCenter=="function")try{Y=M.getCenter()}catch(et){console.warn("Erreur lors de la récupération du centre du polygone via getCenter(), utilisation de la méthode alternative",et);const lt=mc(O);Y=Kt.latLng(lt.geometry.coordinates[1],lt.geometry.coordinates[0])}else{const et=mc(O);Y=Kt.latLng(et.geometry.coordinates[1],et.geometry.coordinates[0])}const A=x(Y,"#059669");b.push(A),w(A,M,()=>[dn(gt,"m","Périmètre"),dn(dt,"m²","Surface")].join("<br>")),A.on("mousedown",et=>{if(!t.value)return;Kt.DomEvent.stopPropagation(et),t.value.dragging.disable();let lt=!0;const ct=et.latlng,tt=[...$];b.forEach((jt,H)=>{H>0&&jt.setStyle({opacity:0,fillOpacity:0})});const ft=yu(jt=>{if(!lt)return;const H=jt.latlng.lng-ct.lng,J=jt.latlng.lat-ct.lat,yt=tt.map(wt=>Kt.latLng(wt.lat+J,wt.lng+H));Kt.Polygon.prototype.setLatLngs.call(M,[yt]),A.setLatLng(jt.latlng)},16),ht=jt=>{lt&&ft(jt)},At=()=>{if(lt=!1,!!t.value){if(t.value.off("mousemove",ht),document.removeEventListener("mouseup",At),t.value.dragging.enable(),M.properties){const jt=M.getLatLngs()[0],H=jt.map(yt=>[yt.lng,yt.lat]);H.push(H[0]);const J=Ll([H]);M.properties.area=Cu(J),M.properties.perimeter=jt.reduce((yt,wt,K)=>{const Ht=jt[(K+1)%jt.length];return yt+wt.distanceTo(Ht)},0),M.properties.surfaceInterieure=M.properties.area,M.properties.surfaceExterieure=M.properties.area}S(),Z(M),a.value=null,Ai(()=>{a.value=M})}};t.value.on("mousemove",ht),document.addEventListener("mouseup",At)}),$.forEach((et,lt)=>{const ct=x(et,"#DC2626");b.push(ct),w(ct,M,()=>{const tt=$[(lt-1+$.length)%$.length],ft=$[(lt+1)%$.length],ht=et.distanceTo(tt),At=et.distanceTo(ft);return[dn(ht,"m","Distance au point précédent"),dn(At,"m","Distance au point suivant"),dn(gt,"m","Périmètre total"),dn(dt,"m²","Surface")].join("<br>")}),ct.on("mousedown",tt=>{if(Kt.DomEvent.stopPropagation(tt),!t.value)return;t.value.dragging.disable();let ft=!0;A&&(A.setStyle({opacity:0,fillOpacity:0}),A.measureDiv&&(A.measureDiv.style.display="none"));const ht=yu(H=>{if(!ft)return;$[lt]=H.latlng,Kt.Polygon.prototype.setLatLngs.call(M,[$]),ct.setLatLng(H.latlng);const J=b.slice($.length+1),yt=(lt-1+$.length)%$.length,wt=J[yt];if(wt){const Ht=$[yt],ne=$[lt],Zt=Kt.latLng((Ht.lat+ne.lat)/2,(Ht.lng+ne.lng)/2);wt.setLatLng(Zt)}const K=J[lt];if(K){const Ht=$[lt],ne=$[(lt+1)%$.length],Zt=Kt.latLng((Ht.lat+ne.lat)/2,(Ht.lng+ne.lng)/2);K.setLatLng(Zt)}},16),At=H=>{ft&&ht(H)},jt=()=>{if(ft=!1,!!t.value){if(t.value.off("mousemove",At),document.removeEventListener("mouseup",jt),t.value.dragging.enable(),M.properties){const H=M.getLatLngs()[0].map(yt=>[yt.lng,yt.lat]);H.push(H[0]);const J=Ll([H]);M.properties.area=Cu(J),M.properties.perimeter=$.reduce((yt,wt,K)=>{const Ht=$[(K+1)%$.length];return yt+wt.distanceTo(Ht)},0),M.properties.surfaceInterieure=M.properties.area,M.properties.surfaceExterieure=M.properties.area}S(),Z(M),a.value=null,Ai(()=>{a.value=M})}};t.value.on("mousemove",At),document.addEventListener("mouseup",jt)})}),(()=>{const et=M.getLatLngs()[0];b.slice(et.length+1).forEach(ct=>{n.value&&n.value.removeLayer(ct)}),b=b.slice(0,et.length+1);const lt=new Array(et.length);for(let ct=0;ct<et.length;ct++){const tt=et[ct],ft=et[(ct+1)%et.length];lt[ct]=Ft(tt,ft)}lt.forEach((ct,tt)=>{const ft=x(ct,"#2563EB");b.push(ft),w(ft,M,()=>{const ht=et[tt],At=et[(tt+1)%et.length],jt=ht.distanceTo(At);return[dn(jt,"m","Longueur du segment"),dn(gt,"m","Périmètre total"),dn(dt,"m²","Surface")].join("<br>")}),ft.on("mousedown",ht=>{if(!t.value)return;Kt.DomEvent.stopPropagation(ht),t.value.dragging.disable();let At=!0;const jt=tt;A&&(A.setStyle({opacity:0,fillOpacity:0}),A.measureDiv&&(A.measureDiv.style.display="none"));const H=[...M.getLatLngs()[0]];H.splice((jt+1)%H.length,0,ct),M.setLatLngs([H]),S(),Z(M);const J=jt+1,yt=1+J,wt=J<b.length-1?b[yt]:null;if(wt){const K=ne=>{if(!At)return;const Zt=M.getLatLngs()[0];Zt[J]=ne.latlng,M.setLatLngs([Zt]),wt.setLatLng(ne.latlng);const Dt=b.slice(1+Zt.length),Lt=(J-1+Zt.length)%Zt.length,ae=J;if(Dt[Lt]){const te=Zt[Lt],xe=Zt[J],zt=Kt.latLng((te.lat+xe.lat)/2,(te.lng+xe.lng)/2);Dt[Lt].setLatLng(zt)}if(Dt[ae]){const te=Zt[J],xe=Zt[(J+1)%Zt.length],zt=Kt.latLng((te.lat+xe.lat)/2,(te.lng+xe.lng)/2);Dt[ae].setLatLng(zt)}},Ht=()=>{if(At=!1,!!t.value){if(t.value.off("mousemove",K),document.removeEventListener("mouseup",Ht),t.value.dragging.enable(),M.properties){const ne=M.getLatLngs()[0].map(Dt=>[Dt.lng,Dt.lat]);ne.push(ne[0]);const Zt=Ll([ne]);M.properties.area=Cu(Zt),M.properties.perimeter=M.getLatLngs()[0].reduce((Dt,Lt,ae,te)=>{const xe=te[(ae+1)%te.length];return Dt+Lt.distanceTo(xe)},0)}S(),Z(M),a.value=null,Ai(()=>{a.value=M})}};t.value.on("mousemove",K),document.addEventListener("mouseup",Ht)}else t.value.dragging.enable(),S(),Z(M)})})})()},V=M=>{if(!t.value||!e.value)return;S();const $=M.getCenter(),q=M.getRadius(),O=M.getStartAngle(),dt=M.getStopAngle(),gt=M.getOpeningAngle(),Y=M.calculatePointOnArc(O),A=M.calculatePointOnArc(dt),U=x(Y,"#DC2626"),et=x(A,"#DC2626");b.push(U,et),w(U,M,()=>`Angle d'ouverture: ${If(gt)}`),w(et,M,()=>`Angle d'ouverture: ${If(gt)}`);const lt=x($,"#059669");if(b.push(lt),w(lt,M,()=>{const ct=M.properties.area||0;return[dn(q,"m","Rayon"),dn(ct,"m²","Surface"),`Angle: ${If(gt)}`].join("<br>")}),gt>5){const ct=M.calculateMidpointPosition(),tt=x(ct,"#2563EB");b.push(tt),w(tt,M,()=>dn(M.getRadius(),"m","Rayon")),tt.on("mousedown",ft=>{if(!t.value)return;Kt.DomEvent.stopPropagation(ft),t.value.dragging.disable();let ht=!0;const At=H=>{if(!ht)return;const J=$.distanceTo(H.latlng);M.setRadius(J);const yt=M.calculatePointOnArc(O),wt=M.calculatePointOnArc(dt),K=M.calculateMidpointPosition();if(U.setLatLng(yt),et.setLatLng(wt),tt.setLatLng(K),a.value=M,tt){const Ht=tt.measureDiv;Ht&&(Ht.innerHTML=dn(J,"m","Rayon"))}},jt=()=>{ht=!1,t.value&&(t.value.off("mousemove",At),document.removeEventListener("mouseup",jt),t.value.dragging.enable())};t.value.on("mousemove",At),document.addEventListener("mouseup",jt)})}[U,et].forEach((ct,tt)=>{ct.on("mousedown",ft=>{if(!t.value)return;Kt.DomEvent.stopPropagation(ft),t.value.dragging.disable();let ht=!0;const At=b.find(J=>{var yt;return((yt=J.options)==null?void 0:yt.color)==="#2563EB"}),jt=J=>{if(!ht||!t.value)return;const yt=Math.atan2(J.latlng.lat-$.lat,J.latlng.lng-$.lng)*180/Math.PI;tt===0?M.setAngles(yt,M.getStopAngle()):M.setAngles(M.getStartAngle(),yt);const wt=M.getStartAngle(),K=M.getStopAngle(),Ht=M.getOpeningAngle(),ne=M.calculatePointOnArc(wt),Zt=M.calculatePointOnArc(K);if(U.setLatLng(ne),et.setLatLng(Zt),At&&Ht>5){const Dt=M.calculateMidpointPosition();At.setLatLng(Dt),At.setStyle({opacity:1,fillOpacity:1})}else At&&At.setStyle({opacity:0,fillOpacity:0});a.value=M},H=()=>{ht=!1,t.value&&(t.value.off("mousemove",jt),document.removeEventListener("mouseup",H),t.value.dragging.enable(),V(M))};t.value.on("mousemove",jt),document.addEventListener("mouseup",H)})}),lt.on("mousedown",ct=>{if(!t.value)return;Kt.DomEvent.stopPropagation(ct),t.value.dragging.disable();let tt=!0;const ft=At=>{if(!tt)return;M.setCenter(At.latlng),lt.setLatLng(At.latlng);const jt=M.getStartAngle(),H=M.getStopAngle(),J=M.getOpeningAngle(),yt=M.calculatePointOnArc(jt),wt=M.calculatePointOnArc(H);U.setLatLng(yt),et.setLatLng(wt);const K=b.find(Ht=>{var ne;return((ne=Ht.options)==null?void 0:ne.color)==="#2563EB"});if(K&&J>5){const Ht=M.calculateMidpointPosition();K.setLatLng(Ht),K.setStyle({opacity:1,fillOpacity:1})}else K&&K.setStyle({opacity:0,fillOpacity:0});a.value=M},ht=()=>{tt=!1,t.value&&(t.value.off("mousemove",ft),document.removeEventListener("mouseup",ht),t.value.dragging.enable())};t.value.on("mousemove",ft),document.addEventListener("mouseup",ht)})},St=M=>{var $;if(!(!t.value||!r.value)){if(console.log("[generateTempControlPoints] Génération des points temporaires pour",{layerType:M.constructor.name,properties:M.properties}),r.value.clearLayers(),M instanceof Go){if(M.getCenter()){const q=Kt.circleMarker(M.getCenter(),{radius:0,className:"text-hint-marker",pmIgnore:!0});r.value.addLayer(q)}return}if(M instanceof ec){const q=M.getLatLng(),O=x(q,"#059669");r.value.addLayer(O),M.getCardinalPoints().forEach(dt=>{const gt=x(dt,"#2563EB");r.value.addLayer(gt)})}else if(M instanceof Kt.Circle){const q=M.getLatLng(),O=M.getRadius(),dt=x(q,"#059669");r.value.addLayer(dt),[0,45,90,135,180,225,270,315].forEach(gt=>{const Y=gt*Math.PI/180,A=Kt.latLng(q.lat+O/111319.9*Math.sin(Y),q.lng+O/(111319.9*Math.cos(q.lat*Math.PI/180))*Math.cos(Y)),U=x(A,"#2563EB");r.value.addLayer(U)})}else if(M instanceof $o){const q=M,O=q.getBounds(),dt=O.getCenter(),gt=[O.getNorthWest(),O.getNorthEast(),O.getSouthEast(),O.getSouthWest()],Y=x(dt,"#059669");r.value.addLayer(Y),gt.forEach(A=>{const U=x(A,"#DC2626");r.value.addLayer(U)}),q.getMidPoints().forEach(A=>{const U=x(A,"#2563EB");r.value.addLayer(U)})}else if(M instanceof Hl||(($=M.properties)==null?void 0:$.type)==="Semicircle"){const q=M,O=x(q.getCenter(),"#059669");r.value.addLayer(O);const dt=q.calculatePointOnArc(q.getStartAngle()),gt=q.calculatePointOnArc(q.getStopAngle()),Y=x(dt,"#DC2626"),A=x(gt,"#DC2626");if(r.value.addLayer(Y),r.value.addLayer(A),q.getOpeningAngle()>5){const U=q.calculateMidpointPosition(),et=x(U,"#2563EB");r.value.addLayer(et)}}else if(M instanceof Kt.Polyline){const q=M.getLatLngs();if(M instanceof Wr){const O=M.getCenter(),dt=x(O,"#059669");r.value.addLayer(dt)}if(q.forEach(O=>{const dt=x(O,"#DC2626");r.value.addLayer(dt)}),M instanceof Wr)M.getMidPoints().forEach(O=>{const dt=x(O,"#2563EB");r.value.addLayer(dt)});else for(let O=0;O<q.length-1;O++){const dt=Ft(q[O],q[O+1]),gt=x(dt,"#2563EB");r.value.addLayer(gt)}}else if(M instanceof Kt.Polygon){const q=M.getLatLngs()[0];let O;try{if(typeof M.getCenter=="function")O=M.getCenter();else{const dt=q.map(A=>[A.lng,A.lat]);dt.push(dt[0]);const gt=Ll([dt]),Y=mc(gt);O=Kt.latLng(Y.geometry.coordinates[1],Y.geometry.coordinates[0])}if(O&&typeof O.lat=="number"&&typeof O.lng=="number"&&!isNaN(O.lat)&&!isNaN(O.lng)){const dt=x(O,"#059669");r.value.addLayer(dt)}}catch(dt){console.warn("Erreur lors du calcul du centre temporaire du polygone",dt)}q.forEach(dt=>{const gt=x(dt,"#DC2626");r.value.addLayer(gt)});for(let dt=0;dt<q.length;dt++){const gt=q[(dt+1)%q.length],Y=Ft(q[dt],gt),A=x(Y,"#2563EB");r.value.addLayer(A)}}console.log("[generateTempControlPoints] Points temporaires générés",{count:r.value.getLayers().length})}},Et=M=>{if(!t.value||!e.value||!M.getBounds)return;const $=M;S(),$.on("edit:start",()=>{S()}),$.on("edit:end",()=>{Et($)});const q=$.getBounds(),O=q.getCenter(),dt=$.properties.rotation||0,gt=tt=>{if(dt===0)return tt;const ft=dt*Math.PI/180,ht=Math.cos(ft),At=Math.sin(ft),jt=tt.lng-O.lng,H=tt.lat-O.lat,J=jt*ht-H*At,yt=jt*At+H*ht;return Kt.latLng(O.lat+yt,O.lng+J)},Y=[q.getNorthWest(),q.getNorthEast(),q.getSouthEast(),q.getSouthWest()].map(tt=>gt(tt)),A=$.getMidPoints().map(tt=>gt(tt)),U=x(O,"#059669");U.addTo(t.value),b.push(U),w(U,$,()=>{const{width:tt,height:ft}=$.getDimensions(),ht=tt*ft;return[dn(tt,"m","Largeur"),dn(ft,"m","Hauteur"),dn(ht,"m²","Surface"),`Rotation: ${dt.toFixed(1)}°`].join("<br>")});const et=Y.map((tt,ft)=>{const ht=x(tt,"#DC2626");return ht.addTo(t.value),b.push(ht),w(ht,$,()=>{const{width:At,height:jt}=$.getDimensions();return[dn(At,"m","Largeur"),dn(jt,"m","Hauteur")].join("<br>")}),ht.on("mousedown",At=>{if(!t.value)return;Kt.DomEvent.stopPropagation(At),t.value.dragging.disable();const jt=(ft+2)%4,H=Y[jt];$.startResize();const J=yu(K=>{const Ht=Kt.latLngBounds(H,K.latlng);$.updateResizePreview(Ht)},16),yt=K=>J(K),wt=()=>{if(!t.value)return;t.value.off("mousemove",yt),document.removeEventListener("mouseup",wt),t.value.dragging.enable();const K=Kt.latLngBounds(H,ht.getLatLng());$.endResize(K),a.value=null,Ai(()=>{a.value=$})};t.value.on("mousemove",yt),document.addEventListener("mouseup",wt)}),ht}),lt=A.map((tt,ft)=>{const ht=x(tt,"#2563EB");return ht.addTo(t.value),b.push(ht),w(ht,$,()=>{const{width:At,height:jt}=$.getDimensions(),H=ft%2===0?At:jt;return[dn(H,"m","Longueur du côté"),dn(H/2,"m","Distance au coin"),`Rotation: ${dt.toFixed(1)}°`].join("<br>")}),ht.on("mousedown",At=>{if(!t.value)return;Kt.DomEvent.stopPropagation(At),t.value.dragging.disable(),$.startResize();const jt=yu(yt=>{const wt=$.getBounds();let K;switch(ft){case 0:K=Kt.latLngBounds(Kt.latLng(yt.latlng.lat,wt.getWest()),Kt.latLng(wt.getSouth(),wt.getEast()));break;case 1:K=Kt.latLngBounds(Kt.latLng(wt.getNorth(),wt.getWest()),Kt.latLng(wt.getSouth(),yt.latlng.lng));break;case 2:K=Kt.latLngBounds(Kt.latLng(wt.getNorth(),wt.getWest()),Kt.latLng(yt.latlng.lat,wt.getEast()));break;case 3:K=Kt.latLngBounds(Kt.latLng(wt.getNorth(),yt.latlng.lng),Kt.latLng(wt.getSouth(),wt.getEast()));break;default:return}$.updateResizePreview(K)},16),H=yt=>jt(yt),J=()=>{if(!t.value)return;t.value.off("mousemove",H),document.removeEventListener("mouseup",J),t.value.dragging.enable();const yt=$.getBounds();let wt;switch(ft){case 0:wt=Kt.latLngBounds(Kt.latLng(ht.getLatLng().lat,yt.getWest()),Kt.latLng(yt.getSouth(),yt.getEast()));break;case 1:wt=Kt.latLngBounds(Kt.latLng(yt.getNorth(),yt.getWest()),Kt.latLng(yt.getSouth(),ht.getLatLng().lng));break;case 2:wt=Kt.latLngBounds(Kt.latLng(yt.getNorth(),yt.getWest()),Kt.latLng(ht.getLatLng().lat,yt.getEast()));break;case 3:wt=Kt.latLngBounds(Kt.latLng(yt.getNorth(),ht.getLatLng().lng),Kt.latLng(yt.getSouth(),yt.getEast()));break;default:return}$.endResize(wt),a.value=null,Ai(()=>{a.value=$})};t.value.on("mousemove",H),document.addEventListener("mouseup",J)}),ht});U.on("mousedown",tt=>{if(!t.value)return;Kt.DomEvent.stopPropagation(tt),t.value.dragging.disable();const ft=$.getBounds().getCenter(),ht=tt.latlng;$.startResize();const At=yu(J=>{const yt=J.latlng.lng-ht.lng,wt=J.latlng.lat-ht.lat,K=Kt.latLng(ft.lat+wt,ft.lng+yt),Ht=$.getBounds(),ne=Ht.getEast()-Ht.getWest(),Zt=Ht.getNorth()-Ht.getSouth(),Dt=Kt.latLngBounds(Kt.latLng(K.lat-Zt/2,K.lng-ne/2),Kt.latLng(K.lat+Zt/2,K.lng+ne/2));$.updateResizePreview(Dt)},16),jt=J=>At(J),H=()=>{if(!t.value)return;t.value.off("mousemove",jt),document.removeEventListener("mouseup",H),t.value.dragging.enable();const J=$.getBounds(),yt=J.getEast()-J.getWest(),wt=J.getNorth()-J.getSouth(),K=U.getLatLng(),Ht=Kt.latLngBounds(Kt.latLng(K.lat-wt/2,K.lng-yt/2),Kt.latLng(K.lat+wt/2,K.lng+yt/2));$.endResize(Ht),a.value=null,Ai(()=>{a.value=$})};t.value.on("mousemove",jt),document.addEventListener("mouseup",H)}),$.on("resize:update",tt=>{const ft=tt.bounds,ht=ft.getCenter();$.properties.rotation;const At=[ft.getNorthWest(),ft.getNorthEast(),ft.getSouthEast(),ft.getSouthWest()].map(H=>gt(H));et.forEach((H,J)=>{H.setLatLng(At[J])}),U.setLatLng(ht);const jt=[Kt.latLng((At[0].lat+At[1].lat)/2,(At[0].lng+At[1].lng)/2),Kt.latLng((At[1].lat+At[2].lat)/2,(At[1].lng+At[2].lng)/2),Kt.latLng((At[2].lat+At[3].lat)/2,(At[2].lng+At[3].lng)/2),Kt.latLng((At[3].lat+At[0].lat)/2,(At[3].lng+At[0].lng)/2)].map(H=>gt(H));lt.forEach((H,J)=>{H.setLatLng(jt[J])})});const ct=()=>{$.off("edit:start"),$.off("edit:end"),$.off("resize:update")};b.cleanup=ct};return{map:t,featureGroup:e,controlPointsGroup:n,tempControlPointsGroup:r,currentTool:o,selectedShape:a,isDrawing:u,initMap:j,setDrawingTool:W,updateShapeStyle:Q,updateShapeProperties:mt,updateTextFixedSize:D,adjustView:z,clearActiveControlPoints:S}}function Wx(){const t=Ie(null),e=Ie(""),n=Ie("Ville"),r={Ville:ui.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors",maxZoom:19}),Satellite:ui.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"© Esri",maxZoom:19}),Cadastre:ui.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{attribution:"Cadastre - Carte © IGN/Geoportail",maxZoom:19})};return{map:t,searchQuery:e,currentBaseMap:n,baseMaps:r,initMap:f=>{t.value=f,ui.control.layers(r).addTo(f),r[n.value].addTo(f)},searchLocation:async()=>{if(!(!t.value||!e.value))try{const p=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(e.value)}`)).json();if(p&&p.length>0){const{lat:v,lon:w}=p[0];t.value.setView([v,w],13)}}catch(f){console.error("Erreur lors de la recherche de localisation:",f)}},changeBaseMap:f=>{!t.value||!r[f]||(Object.values(r).forEach(p=>{var v;(v=t.value)!=null&&v.hasLayer(p)&&t.value.removeLayer(p)}),r[f].addTo(t.value),n.value=f)}}}const Qd=Wd("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[]}),getters:{getPlanById:t=>e=>t.plans.find(n=>n.id===e),hasUnsavedChanges:t=>t.unsavedChanges,getCurrentPlanHistory:t=>t.planHistory},actions:{async fetchPlans(){var e,n;const t=vs();this.loading=!0;try{let r="/plans/";t.isDealer?r+="?concessionnaire="+((e=t.user)==null?void 0:e.id):t.isClient&&(r+="?utilisateur="+((n=t.user)==null?void 0:n.id));const o=await Cn.get(r);this.plans=o.data}catch(r){throw this.error="Erreur lors du chargement des plans",r}finally{this.loading=!1}},async fetchPlansWithDetails(){var e,n;const t=vs();this.loading=!0;try{let r="/plans/";const o={include_details:!0};t.isDealer?o.concessionnaire=(e=t.user)==null?void 0:e.id:t.isClient&&(o.utilisateur=(n=t.user)==null?void 0:n.id);const a=await Cn.get(r,{params:o});return this.plans=a.data,a}catch(r){throw this.error="Erreur lors du chargement des plans",r}finally{this.loading=!1}},async createPlan(t){this.clearCurrentPlan(),this.loading=!0;try{const e=await Cn.post("/plans/",t);return this.plans.push(e.data),e.data}catch(e){const n=e instanceof Error?e.message:String(e);throw console.error("Error creating plan:",n),this.error="Erreur lors de la création du plan",e}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(t){var e,n;if(this.unsavedChanges){this.loading=!0;try{const r=await Cn.patch(`/plans/${t}/`,{...this.currentPlan,version:((e=this.currentPlan)==null?void 0:e.version)||1}),o=this.plans.findIndex(a=>a.id===t);return o!==-1&&(this.plans[o]=r.data),((n=this.currentPlan)==null?void 0:n.id)===t&&(this.currentPlan=r.data),this.unsavedChanges=!1,r.data}catch(r){throw this.error="Erreur lors de la sauvegarde du plan",r}finally{this.loading=!1}}},async updatePlanDetails(t,e){var n;try{const r=await Cn.patch(`/plans/${t}/`,e),o=this.plans.findIndex(a=>a.id===t);return o!==-1&&(this.plans[o]={...this.plans[o],...r.data}),((n=this.currentPlan)==null?void 0:n.id)===t&&(this.currentPlan={...this.currentPlan,...r.data}),r.data}catch(r){throw console.error("Erreur lors de la mise à jour du plan:",r),r}},async fetchPlanHistory(t){this.loading=!0;try{const e=await Cn.get(`/plans/${t}/historique/`);return this.planHistory=e.data,e.data}catch(e){throw this.error="Erreur lors de la récupération de l'historique",e}finally{this.loading=!1}},async restorePlanVersion(t,e){var n;this.loading=!0;try{const r=await Cn.post(`/plans/${t}/restaurer/`,{version_id:e});((n=this.currentPlan)==null?void 0:n.id)===t&&(this.currentPlan=r.data);const o=this.plans.findIndex(a=>a.id===t);return o!==-1&&(this.plans[o]=r.data),r.data}catch(r){throw this.error="Erreur lors de la restauration de la version",r}finally{this.loading=!1}},setCurrentPlan(t){this.currentPlan=t,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.unsavedChanges=!1,this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(t){var e;this.loading=!0;try{await Cn.delete(`/plans/${t}/`),this.plans=this.plans.filter(n=>n.id!==t),((e=this.currentPlan)==null?void 0:e.id)===t&&this.clearCurrentPlan()}catch(n){throw this.error="Erreur lors de la suppression du plan",n}finally{this.loading=!1}}}});class Zx extends Kt.Polygon{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});Re(this,"properties");this.properties={type:"Polygon",style:r||{}},this.updateProperties(),this.on("add",()=>{this.updateProperties()})}updateProperties(){var o;const n=this.getLatLngs()[0];if(!n||n.length<3){console.warn("Polygon has less than 3 points, cannot calculate properties");return}const r=n.map(a=>[a.lng,a.lat]);r.push(r[0]);try{const a=Ll([r]),u=Cu(a),f=Ec(ju([...r]),{units:"meters"}),p=mc(a),v=Kt.latLng(p.geometry.coordinates[1],p.geometry.coordinates[0]);this.properties={...this.properties,area:u,perimeter:f,center:v,vertices:n.length,surfaceInterieure:u,surfaceExterieure:u,style:{...this.options,color:this.options.color||"#3388ff",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#3388ff",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||""}},this.fire("properties:updated",{shape:this,properties:this.properties})}catch(a){console.error("Failed to calculate polygon properties",a)}}setLatLngs(n){return super.setLatLngs(n),this.updateProperties(),this}getMidPoints(){const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let o=0;o<n.length;o++){const a=n[o],u=n[(o+1)%n.length];r.push(Kt.latLng((a.lat+u.lat)/2,(a.lng+u.lng)/2))}return r}moveVertex(n,r){const o=this.getLatLngs()[0];n>=0&&n<o.length&&(o[n]=r,Kt.Polygon.prototype.setLatLngs.call(this,[o]))}addVertex(n,r){const o=this.getLatLngs()[0];n>=0&&n<o.length&&(o.splice((n+1)%o.length,0,r),Kt.Polygon.prototype.setLatLngs.call(this,[o]))}move(n){const o=this.getLatLngs()[0].map(a=>Kt.latLng(a.lat+n.lat,a.lng+n.lng));return Kt.Polygon.prototype.setLatLngs.call(this,[o]),this}getCenter(){const n=this.getLatLngs()[0];if(!n||n.length===0)return new Kt.LatLng(0,0);try{const r=n.filter(v=>v&&typeof v.lat=="number"&&typeof v.lng=="number"&&!isNaN(v.lat)&&!isNaN(v.lng)&&Math.abs(v.lat)<=90&&Math.abs(v.lng)<=180);if(r.length===0)return console.warn("Aucun point valide dans le polygone pour calculer le centre"),new Kt.LatLng(0,0);const o=r.map(v=>[v.lng,v.lat]);o.push(o[0]);const a=Ll([o]),u=mc(a),f=u.geometry.coordinates[1],p=u.geometry.coordinates[0];if(typeof f!="number"||typeof p!="number"||isNaN(f)||isNaN(p)||Math.abs(f)>90||Math.abs(p)>180)throw new Error("Centroid calculé invalide");return Kt.latLng(f,p)}catch(r){console.warn("Erreur lors du calcul du centroïde avec turf.js, utilisation de la méthode simple",r);let o=0,a=0,u=0;for(const f of n)f&&typeof f.lat=="number"&&typeof f.lng=="number"&&!isNaN(f.lat)&&!isNaN(f.lng)&&Math.abs(f.lat)<=90&&Math.abs(f.lng)<=180&&(o+=f.lat,a+=f.lng,u++);return u===0?(console.error("Impossible de calculer un centre valide pour le polygone"),new Kt.LatLng(0,0)):new Kt.LatLng(o/u,a/u)}}getSegmentLengths(){const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let o=0;o<n.length;o++){const a=n[o],u=n[(o+1)%n.length];r.push(a.distanceTo(u))}return r}}function ku(t){return"content"in t&&"bounds"in t}function Kx(t){return t&&Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2}function Y0(t){var r,o,a,u,f,p,v,w,b,S,x,I,D,j;console.log("[DrawingStore] Conversion de la forme en élément",{type:(r=t.properties)==null?void 0:r.type,properties:t.properties,bounds:(o=t.getBounds)==null?void 0:o.call(t),shape:t});let e,n;if(t instanceof Go||((a=t.properties)==null?void 0:a.type)==="TextRectangle"){e="TEXTE";const z=t.getBounds();return n={bounds:{southWest:[z.getSouthWest().lng,z.getSouthWest().lat],northEast:[z.getNorthEast().lng,z.getNorthEast().lat]},content:t.properties.text||"",style:{...t.properties.style,textStyle:{color:((u=t.properties.style.textStyle)==null?void 0:u.color)||"#000000",fontSize:((f=t.properties.style.textStyle)==null?void 0:f.fontSize)||"14px",fontFamily:((p=t.properties.style.textStyle)==null?void 0:p.fontFamily)||"Arial, sans-serif",textAlign:((v=t.properties.style.textStyle)==null?void 0:v.textAlign)||"center",backgroundColor:((w=t.properties.style.textStyle)==null?void 0:w.backgroundColor)||"#FFFFFF",backgroundOpacity:((b=t.properties.style.textStyle)==null?void 0:b.backgroundOpacity)??1,bold:((S=t.properties.style.textStyle)==null?void 0:S.bold)||!1,italic:((x=t.properties.style.textStyle)==null?void 0:x.italic)||!1}},rotation:t.properties.rotation||0},console.log("[DrawingStore] TextRectangle converti",{type_forme:e,data:n,originalProperties:t.properties}),{type_forme:e,data:n}}switch((I=t.properties)==null?void 0:I.type){case"Polygon":e="POLYGON",n={points:t.getLatLngs()[0].map(W=>[W.lng,W.lat]),style:{color:t.properties.style.color||"#3388ff",weight:t.properties.style.weight||3,opacity:t.properties.style.opacity||1,fillColor:t.properties.style.fillColor||"#3388ff",fillOpacity:t.properties.style.fillOpacity||.2,dashArray:t.properties.style.dashArray||""}};break;case"Rectangle":e="RECTANGLE",n={bounds:{southWest:[t.getBounds().getSouthWest().lng,t.getBounds().getSouthWest().lat],northEast:[t.getBounds().getNorthEast().lng,t.getBounds().getNorthEast().lat]},style:((D=t.properties)==null?void 0:D.style)||{}};break;default:console.warn("[DrawingStore] Type de forme non géré:",(j=t.properties)==null?void 0:j.type),e="UNKNOWN",n={}}return console.log("[DrawingStore] Élément converti",{type_forme:e,data:n}),{type_forme:e,data:n}}function Jx(t){var e,n,r,o,a,u,f,p,v,w,b,S,x,I,D,j,z,W,Q;switch(console.log("[DrawingStore] Conversion de l'élément stocké en forme",{element:t}),t.type_forme){case"TEXTE":{if(!ku(t.data))return console.error("[DrawingStore] Données invalides pour TextRectangle"),null;const mt=t.data;if(!mt.bounds)return console.error("[DrawingStore] Données de bounds manquantes pour TextRectangle"),null;const Tt=new Kt.LatLngBounds(Kt.latLng(mt.bounds.southWest[1],mt.bounds.southWest[0]),Kt.latLng(mt.bounds.northEast[1],mt.bounds.northEast[0])),Nt={color:((e=mt.style)==null?void 0:e.color)||"#3388ff",fillColor:((n=mt.style)==null?void 0:n.fillColor)||"#3388ff",fillOpacity:((r=mt.style)==null?void 0:r.fillOpacity)||.2,weight:((o=mt.style)==null?void 0:o.weight)||3,opacity:((a=mt.style)==null?void 0:a.opacity)||1,textStyle:{color:((u=mt.style.textStyle)==null?void 0:u.color)||"#000000",fontSize:((f=mt.style.textStyle)==null?void 0:f.fontSize)||"14px",fontFamily:((p=mt.style.textStyle)==null?void 0:p.fontFamily)||"Arial, sans-serif",textAlign:((v=mt.style.textStyle)==null?void 0:v.textAlign)||"center",backgroundColor:((w=mt.style.textStyle)==null?void 0:w.backgroundColor)||"#FFFFFF",backgroundOpacity:((b=mt.style.textStyle)==null?void 0:b.backgroundOpacity)??1,bold:((S=mt.style.textStyle)==null?void 0:S.bold)||!1,italic:((x=mt.style.textStyle)==null?void 0:x.italic)||!1}};return{type:"TextRectangle",bounds:Tt,text:mt.content||"Double-cliquez pour éditer",options:Nt,properties:{type:"TextRectangle",text:mt.content||"Double-cliquez pour éditer",style:Nt,rotation:mt.rotation||0}}}case"POLYGON":{const mt=t.data;if(!Kx(mt))return console.error("[DrawingStore] Données invalides pour Polygon"),null;const Tt=mt.points.map(Ft=>Kt.latLng(Ft[1],Ft[0])),Nt=new Zx([Tt],{...mt.style,color:((I=mt.style)==null?void 0:I.color)||"#3388ff",weight:((D=mt.style)==null?void 0:D.weight)||3,opacity:((j=mt.style)==null?void 0:j.opacity)||1,fillColor:((z=mt.style)==null?void 0:z.fillColor)||"#3388ff",fillOpacity:((W=mt.style)==null?void 0:W.fillOpacity)||.2,dashArray:((Q=mt.style)==null?void 0:Q.dashArray)||""});return Nt.updateProperties(),Nt}default:return console.warn("[DrawingStore] Type non géré pour la restauration:",t.type_forme),null}}const D1=Wd("drawing",{state:()=>({currentPlanId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null}),getters:{hasUnsavedChanges:t=>t.unsavedChanges,getCurrentElements:t=>t.elements,getSelectedElement:t=>t.selectedElement,getCurrentTool:t=>t.currentTool,getCurrentStyle:t=>t.currentStyle,getLastUsedType:t=>t.lastUsedType},actions:{setCurrentPlan(t){window.dispatchEvent(new CustomEvent("clearControlPoints")),this.currentPlanId=t,t===null&&this.clearElements(),this.selectedElement=null,this.unsavedChanges=!1,this.currentTool="",this.lastUsedType=null,this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2}},clearCurrentPlan(){this.currentPlanId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.error=null},addElement(t){var e;if(console.log("[DrawingStore] Ajout d'un élément",{element:t}),(e=t.properties)!=null&&e.type){const n=Y0(t);console.log("[DrawingStore] Élément converti avant ajout",n),this.elements.push(n)}else!t.type_forme&&this.lastUsedType&&(t.type_forme=this.lastUsedType),this.elements.push(t);this.unsavedChanges=!0,console.log("[DrawingStore] État après ajout",{elements:this.elements,unsavedChanges:this.unsavedChanges})},updateElement(t){const e=this.elements.findIndex(n=>n.id===t.id);if(e!==-1){const n=this.elements[e].type_forme;this.elements[e]={...t,type_forme:n},this.unsavedChanges=!0}},removeElement(t){const e=this.elements.findIndex(n=>n.id===t);e!==-1&&(this.elements.splice(e,1),this.unsavedChanges=!0)},selectElement(t){this.selectedElement=t},setCurrentTool(t){this.currentTool=t,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(t)&&(this.lastUsedType=t)},setCurrentStyle(t){this.currentStyle={...this.currentStyle,...t}},async loadPlanElements(t){this.loading=!0;try{console.log("[DrawingStore] Début du chargement du plan",{planId:t});const n=(await Cn.get(`/plans/${t}/`)).data;return console.log("[DrawingStore] Données du plan reçues",{formes:n.formes,preferences:n.preferences}),this.elements=n.formes.map(r=>{if(console.log("[DrawingStore] Traitement de la forme stockée",{id:r.id,type_forme:r.type_forme,data:r.data,isTextRectangle:r.type_forme==="TEXTE"||r.data&&ku(r.data)}),r.type_forme)return console.log("[DrawingStore] Forme déjà au format élément",{type_forme:r.type_forme,data:r.data}),{id:r.id,type_forme:r.type_forme,data:r.data||{}};try{const o=Jx(r);if(o)return console.log("[DrawingStore] Forme convertie avec succès",{originalType:r.type_forme,convertedType:o.type,properties:o.properties}),Y0(o)}catch(o){console.error("[DrawingStore] Erreur lors de la conversion de la forme",{error:o,forme:r})}return console.warn("[DrawingStore] Utilisation de la forme sans conversion",{type_forme:r.type_forme,data:r.data}),r}),console.log(`[DrawingStore] Plan ${t} - Chargé ${this.elements.length} éléments`,{elements:this.elements.map(r=>({id:r.id,type_forme:r.type_forme,isTextRectangle:r.type_forme==="TEXTE"||ku(r.data)}))}),this.currentPlanId=t,this.unsavedChanges=!1,n.preferences&&(console.log("[DrawingStore] Chargement des préférences",n.preferences),n.preferences.currentTool&&this.setCurrentTool(n.preferences.currentTool),n.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...n.preferences.currentStyle}),n.preferences.lastUsedType&&(this.lastUsedType=n.preferences.lastUsedType)),this.elements}catch(e){throw console.error("[DrawingStore] Erreur lors du chargement des éléments:",e),this.error="Erreur lors du chargement des éléments du plan",e}finally{this.loading=!1}},async saveToPlan(t,e){this.loading=!0;try{const n=t||this.currentPlanId;if(!n)throw new Error("Aucun plan sélectionné pour la sauvegarde");console.log("[DrawingStore] Début de la sauvegarde",{planId:n,elementsCount:this.elements.length,elements:this.elements.map(u=>({id:u.id,type_forme:u.type_forme,isTextRectangle:u.type_forme==="TEXTE"||ku(u.data)}))});const r=this.elements.map(u=>(console.log("[DrawingStore] Préparation de l'élément pour sauvegarde",{id:u.id,type_forme:u.type_forme,isTextRectangle:u.type_forme==="TEXTE"||ku(u.data),dataType:u.data?Object.keys(u.data):null}),u.type_forme==="TEXTE"&&ku(u.data)&&console.log("[DrawingStore] Traitement spécial TextRectangle",{bounds:u.data.bounds,content:u.data.content,style:u.data.style}),{...u,type_forme:u.type_forme||this.lastUsedType})),o=(e==null?void 0:e.elementsToDelete)||[];console.log("[DrawingStore] Envoi de la sauvegarde",{planId:n,formesCount:r.length,formes:r,elementsToDeleteCount:o.length,preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}});const a=await Cn.post(`/plans/${n}/save_with_elements/`,{formes:r,connexions:[],annotations:[],elementsToDelete:o,preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}});return console.log("[DrawingStore] Réponse de sauvegarde reçue",{formes:a.data.formes,status:a.status}),this.elements=a.data.formes.map(u=>(console.log("[DrawingStore] Mise à jour de l'élément après sauvegarde",{forme:u,type_forme:u.type_forme}),{...u,type_forme:u.type_forme})),this.unsavedChanges=!1,a.data}catch(n){throw console.error("[DrawingStore] Erreur lors de la sauvegarde:",n),this.error="Erreur lors de la sauvegarde du plan",n}finally{this.loading=!1}}}}),Yx={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},Xx={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4"},Qx={key:0,class:"mb-4"},tL={key:0,class:"animate-pulse"},eL=["value"],nL={key:1,class:"mb-4"},rL={key:0,class:"animate-pulse"},iL=["disabled"],sL={value:null},oL=["value"],aL={class:"mb-4"},lL={class:"mb-6"},uL={class:"flex justify-end space-x-3"},cL=["disabled"],hL={key:0},fL={key:1},O1=ys({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","dealerSelected","clientSelected"],setup(t,{expose:e,emit:n}){const r=t,o=n,a=vs(),u=Qd(),f=D1();Ie(!1);const p=Ie(!1),v=Ie(null),w=Ie([]),b=Ie([]),S=Ie(null),x=Ie(null),I=Ie(!1),D=Ie(!1),j=Ie({nom:"",description:"",concessionnaire:null,client:null}),z=Fn(()=>{var vt,Ct;return((vt=a.user)==null?void 0:vt.user_type)==="admin"?j.value.nom.trim()&&j.value.concessionnaire&&j.value.client:((Ct=a.user)==null?void 0:Ct.user_type)==="dealer"?j.value.nom.trim()&&j.value.client:j.value.nom.trim()});zi(()=>j.value.concessionnaire,async vt=>{if(r.modelValue)if(vt){const Ct=w.value.find(Ut=>Ut.id===vt);Ct&&await mt(Ct)}else b.value=[],S.value=null,x.value=null,j.value.client=null}),zi(()=>r.modelValue,vt=>{var Ct,Ut;vt?((Ct=a.user)==null?void 0:Ct.user_type)==="admin"?W():((Ut=a.user)==null?void 0:Ut.user_type)==="dealer"&&Q(a.user.id):(j.value={nom:"",description:"",concessionnaire:null,client:null},S.value=null,x.value=null,b.value=[],w.value=[],v.value=null)}),Fn(()=>{var vt;return((vt=a.user)==null?void 0:vt.user_type)==="admin"?S.value?b.value:[]:b.value});async function W(){I.value=!0;try{const vt=await Cn.get("/users/",{params:{role:"CONCESSIONNAIRE"}});w.value=vt.data}catch(vt){console.error("[NewPlanModal] Error loading dealers:",vt)}finally{I.value=!1}}async function Q(vt){D.value=!0;try{const Ct=await Cn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:vt}});b.value=Array.isArray(Ct.data)?Ct.data:[Ct.data]}catch(Ct){console.error("[NewPlanModal] Error loading clients:",Ct),b.value=[]}finally{D.value=!1}}async function mt(vt){if(r.modelValue){S.value=vt,j.value.concessionnaire=vt.id,D.value=!0;try{const Ct=await Cn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:vt.id}});b.value=Array.isArray(Ct.data)?Ct.data:[Ct.data]}catch(Ct){console.error("[NewPlanModal] Error loading clients:",Ct),b.value=[]}finally{D.value=!1}}}function Tt(vt){r.modelValue&&(x.value=vt,j.value.client=vt.id,o("clientSelected",vt))}function Nt(){o("update:modelValue",!1),j.value={nom:"",description:"",concessionnaire:null,client:null},S.value=null,x.value=null,b.value=[],v.value=null}async function Ft(){var vt,Ct,Ut,Z,V;v.value=null,p.value=!0;try{const St={nom:j.value.nom.trim(),description:j.value.description.trim()};((vt=a.user)==null?void 0:vt.user_type)==="admin"?(St.concessionnaire=j.value.concessionnaire,St.client=j.value.client):((Ct=a.user)==null?void 0:Ct.user_type)==="dealer"?(St.concessionnaire=a.user.id,St.client=j.value.client):((Ut=a.user)==null?void 0:Ut.user_type)==="client"&&(St.client=a.user.id),u.clearCurrentPlan(),f.setCurrentPlan(null);const Et=await u.createPlan(St);o("created",Et.id),Nt()}catch(St){console.error("[NewPlanModal] Error creating plan:",St),v.value=((V=(Z=St.response)==null?void 0:Z.data)==null?void 0:V.detail)||St.message||"Une erreur est survenue lors de la création du plan"}finally{p.value=!1}}return e({dealers:w,dealerClients:b,selectedDealer:S,selectedClient:x,loadDealers:W,loadDealerClients:Q,selectDealer:mt,selectClient:Tt}),(vt,Ct)=>{var Ut,Z;return vt.modelValue?(ie(),ue("div",Yx,[B("div",Xx,[B("div",{class:"flex justify-between items-center mb-4"},[Ct[5]||(Ct[5]=B("h2",{class:"text-xl font-semibold text-gray-900"},"Créer un nouveau plan",-1)),B("button",{onClick:Nt,class:"text-gray-400 hover:text-gray-500"},Ct[4]||(Ct[4]=[B("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),On(a).isAdmin?(ie(),ue("div",Qx,[Ct[8]||(Ct[8]=B("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Concessionnaire",-1)),I.value?(ie(),ue("div",tL,Ct[6]||(Ct[6]=[B("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):An((ie(),ue("select",{key:1,"onUpdate:modelValue":Ct[0]||(Ct[0]=V=>j.value.concessionnaire=V),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[Ct[7]||(Ct[7]=B("option",{value:null},"Sélectionnez un concessionnaire",-1)),(ie(!0),ue(_n,null,Vn(w.value,V=>(ie(),ue("option",{key:V.id,value:V.id},Se(V.first_name)+" "+Se(V.last_name)+" ("+Se(V.company_name)+") ",9,eL))),128))],512)),[[js,j.value.concessionnaire]])])):nn("",!0),((Ut=On(a).user)==null?void 0:Ut.user_type)==="admin"||((Z=On(a).user)==null?void 0:Z.user_type)==="dealer"?(ie(),ue("div",nL,[Ct[10]||(Ct[10]=B("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Client",-1)),D.value?(ie(),ue("div",rL,Ct[9]||(Ct[9]=[B("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):An((ie(),ue("select",{key:1,"onUpdate:modelValue":Ct[1]||(Ct[1]=V=>j.value.client=V),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!b.value.length},[B("option",sL,Se(b.value.length?"Sélectionnez un client":"Aucun client disponible"),1),(ie(!0),ue(_n,null,Vn(b.value,V=>(ie(),ue("option",{key:V.id,value:V.id},Se(V.first_name)+" "+Se(V.last_name)+" ("+Se(V.company_name)+") ",9,oL))),128))],8,iL)),[[js,j.value.client]])])):nn("",!0),B("div",aL,[Ct[11]||(Ct[11]=B("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),An(B("input",{"onUpdate:modelValue":Ct[2]||(Ct[2]=V=>j.value.nom=V),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[fr,j.value.nom]])]),B("div",lL,[Ct[12]||(Ct[12]=B("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),An(B("textarea",{"onUpdate:modelValue":Ct[3]||(Ct[3]=V=>j.value.description=V),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[fr,j.value.description]])]),B("div",uL,[B("button",{onClick:Nt,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),B("button",{onClick:Ft,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!z.value||p.value},[p.value?(ie(),ue("span",hL,"Création en cours...")):(ie(),ue("span",fL,"Créer le plan"))],8,cL)])])])):nn("",!0)}}});function ur(t){"@babel/helpers - typeof";return ur=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ur(t)}var ss=Uint8Array,io=Uint16Array,tp=Int32Array,rf=new ss([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),sf=new ss([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),_d=new ss([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),R1=function(t,e){for(var n=new io(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var o=new tp(n[30]),r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)o[a]=a-n[r]<<5|r;return{b:n,r:o}},I1=R1(rf,2),F1=I1.b,bd=I1.r;F1[28]=258,bd[258]=28;var j1=R1(sf,0),dL=j1.b,X0=j1.r,wd=new io(32768);for(var Pr=0;Pr<32768;++Pr){var ml=(Pr&43690)>>1|(Pr&21845)<<1;ml=(ml&52428)>>2|(ml&13107)<<2,ml=(ml&61680)>>4|(ml&3855)<<4,wd[Pr]=((ml&65280)>>8|(ml&255)<<8)>>1}var xa=function(t,e,n){for(var r=t.length,o=0,a=new io(e);o<r;++o)t[o]&&++a[t[o]-1];var u=new io(e);for(o=1;o<e;++o)u[o]=u[o-1]+a[o-1]<<1;var f;if(n){f=new io(1<<e);var p=15-e;for(o=0;o<r;++o)if(t[o])for(var v=o<<4|t[o],w=e-t[o],b=u[t[o]-1]++<<w,S=b|(1<<w)-1;b<=S;++b)f[wd[b]>>p]=v}else for(f=new io(r),o=0;o<r;++o)t[o]&&(f[o]=wd[u[t[o]-1]++]>>15-t[o]);return f},Al=new ss(288);for(var Pr=0;Pr<144;++Pr)Al[Pr]=8;for(var Pr=144;Pr<256;++Pr)Al[Pr]=9;for(var Pr=256;Pr<280;++Pr)Al[Pr]=7;for(var Pr=280;Pr<288;++Pr)Al[Pr]=8;var Mc=new ss(32);for(var Pr=0;Pr<32;++Pr)Mc[Pr]=5;var pL=xa(Al,9,0),gL=xa(Al,9,1),mL=xa(Mc,5,0),vL=xa(Mc,5,1),Ff=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Vo=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},jf=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},ep=function(t){return(t+7)/8|0},z1=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new ss(t.subarray(e,n))},yL=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Wo=function(t,e,n){var r=new Error(e||yL[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,Wo),!n)throw r;return r},_L=function(t,e,n,r){var o=t.length,a=0;if(!o||e.f&&!e.l)return n||new ss(0);var u=!n,f=u||e.i!=2,p=e.i;u&&(n=new ss(o*3));var v=function(jt){var H=n.length;if(jt>H){var J=new ss(Math.max(H*2,jt));J.set(n),n=J}},w=e.f||0,b=e.p||0,S=e.b||0,x=e.l,I=e.d,D=e.m,j=e.n,z=o*8;do{if(!x){w=Vo(t,b,1);var W=Vo(t,b+1,3);if(b+=3,W)if(W==1)x=gL,I=vL,D=9,j=5;else if(W==2){var Nt=Vo(t,b,31)+257,Ft=Vo(t,b+10,15)+4,vt=Nt+Vo(t,b+5,31)+1;b+=14;for(var Ct=new ss(vt),Ut=new ss(19),Z=0;Z<Ft;++Z)Ut[_d[Z]]=Vo(t,b+Z*3,7);b+=Ft*3;for(var V=Ff(Ut),St=(1<<V)-1,Et=xa(Ut,V,1),Z=0;Z<vt;){var M=Et[Vo(t,b,St)];b+=M&15;var Q=M>>4;if(Q<16)Ct[Z++]=Q;else{var $=0,q=0;for(Q==16?(q=3+Vo(t,b,3),b+=2,$=Ct[Z-1]):Q==17?(q=3+Vo(t,b,7),b+=3):Q==18&&(q=11+Vo(t,b,127),b+=7);q--;)Ct[Z++]=$}}var O=Ct.subarray(0,Nt),dt=Ct.subarray(Nt);D=Ff(O),j=Ff(dt),x=xa(O,D,1),I=xa(dt,j,1)}else Wo(1);else{var Q=ep(b)+4,mt=t[Q-4]|t[Q-3]<<8,Tt=Q+mt;if(Tt>o){p&&Wo(0);break}f&&v(S+mt),n.set(t.subarray(Q,Tt),S),e.b=S+=mt,e.p=b=Tt*8,e.f=w;continue}if(b>z){p&&Wo(0);break}}f&&v(S+131072);for(var gt=(1<<D)-1,Y=(1<<j)-1,A=b;;A=b){var $=x[jf(t,b)&gt],U=$>>4;if(b+=$&15,b>z){p&&Wo(0);break}if($||Wo(2),U<256)n[S++]=U;else if(U==256){A=b,x=null;break}else{var et=U-254;if(U>264){var Z=U-257,lt=rf[Z];et=Vo(t,b,(1<<lt)-1)+F1[Z],b+=lt}var ct=I[jf(t,b)&Y],tt=ct>>4;ct||Wo(3),b+=ct&15;var dt=dL[tt];if(tt>3){var lt=sf[tt];dt+=jf(t,b)&(1<<lt)-1,b+=lt}if(b>z){p&&Wo(0);break}f&&v(S+131072);var ft=S+et;if(S<dt){var ht=a-dt,At=Math.min(dt,ft);for(ht+S<0&&Wo(3);S<At;++S)n[S]=r[ht+S]}for(;S<ft;++S)n[S]=n[S-dt]}}e.l=x,e.p=A,e.b=S,e.f=w,x&&(w=1,e.m=D,e.d=I,e.n=j)}while(!w);return S!=n.length&&u?z1(n,0,S):n.subarray(0,S)},Va=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},nc=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},zf=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var o=n.length,a=n.slice();if(!o)return{t:q1,l:0};if(o==1){var u=new ss(n[0].s+1);return u[n[0].s]=1,{t:u,l:1}}n.sort(function(Tt,Nt){return Tt.f-Nt.f}),n.push({s:-1,f:25001});var f=n[0],p=n[1],v=0,w=1,b=2;for(n[0]={s:-1,f:f.f+p.f,l:f,r:p};w!=o-1;)f=n[n[v].f<n[b].f?v++:b++],p=n[v!=w&&n[v].f<n[b].f?v++:b++],n[w++]={s:-1,f:f.f+p.f,l:f,r:p};for(var S=a[0].s,r=1;r<o;++r)a[r].s>S&&(S=a[r].s);var x=new io(S+1),I=xd(n[w-1],x,0);if(I>e){var r=0,D=0,j=I-e,z=1<<j;for(a.sort(function(Nt,Ft){return x[Ft.s]-x[Nt.s]||Nt.f-Ft.f});r<o;++r){var W=a[r].s;if(x[W]>e)D+=z-(1<<I-x[W]),x[W]=e;else break}for(D>>=j;D>0;){var Q=a[r].s;x[Q]<e?D-=1<<e-x[Q]++-1:++r}for(;r>=0&&D;--r){var mt=a[r].s;x[mt]==e&&(--x[mt],++D)}I=e}return{t:new ss(x),l:I}},xd=function(t,e,n){return t.s==-1?Math.max(xd(t.l,e,n+1),xd(t.r,e,n+1)):e[t.s]=n},Q0=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new io(++e),r=0,o=t[0],a=1,u=function(p){n[r++]=p},f=1;f<=e;++f)if(t[f]==o&&f!=e)++a;else{if(!o&&a>2){for(;a>138;a-=138)u(32754);a>2&&(u(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(u(o),--a;a>6;a-=6)u(8304);a>2&&(u(a-3<<5|8208),a=0)}for(;a--;)u(o);a=1,o=t[f]}return{c:n.subarray(0,r),n:e}},rc=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},U1=function(t,e,n){var r=n.length,o=ep(e+2);t[o]=r&255,t[o+1]=r>>8,t[o+2]=t[o]^255,t[o+3]=t[o+1]^255;for(var a=0;a<r;++a)t[o+a+4]=n[a];return(o+4+r)*8},tg=function(t,e,n,r,o,a,u,f,p,v,w){Va(e,w++,n),++o[256];for(var b=zf(o,15),S=b.t,x=b.l,I=zf(a,15),D=I.t,j=I.l,z=Q0(S),W=z.c,Q=z.n,mt=Q0(D),Tt=mt.c,Nt=mt.n,Ft=new io(19),vt=0;vt<W.length;++vt)++Ft[W[vt]&31];for(var vt=0;vt<Tt.length;++vt)++Ft[Tt[vt]&31];for(var Ct=zf(Ft,7),Ut=Ct.t,Z=Ct.l,V=19;V>4&&!Ut[_d[V-1]];--V);var St=v+5<<3,Et=rc(o,Al)+rc(a,Mc)+u,M=rc(o,S)+rc(a,D)+u+14+3*V+rc(Ft,Ut)+2*Ft[16]+3*Ft[17]+7*Ft[18];if(p>=0&&St<=Et&&St<=M)return U1(e,w,t.subarray(p,p+v));var $,q,O,dt;if(Va(e,w,1+(M<Et)),w+=2,M<Et){$=xa(S,x,0),q=S,O=xa(D,j,0),dt=D;var gt=xa(Ut,Z,0);Va(e,w,Q-257),Va(e,w+5,Nt-1),Va(e,w+10,V-4),w+=14;for(var vt=0;vt<V;++vt)Va(e,w+3*vt,Ut[_d[vt]]);w+=3*V;for(var Y=[W,Tt],A=0;A<2;++A)for(var U=Y[A],vt=0;vt<U.length;++vt){var et=U[vt]&31;Va(e,w,gt[et]),w+=Ut[et],et>15&&(Va(e,w,U[vt]>>5&127),w+=U[vt]>>12)}}else $=pL,q=Al,O=mL,dt=Mc;for(var vt=0;vt<f;++vt){var lt=r[vt];if(lt>255){var et=lt>>18&31;nc(e,w,$[et+257]),w+=q[et+257],et>7&&(Va(e,w,lt>>23&31),w+=rf[et]);var ct=lt&31;nc(e,w,O[ct]),w+=dt[ct],ct>3&&(nc(e,w,lt>>5&8191),w+=sf[ct])}else nc(e,w,$[lt]),w+=q[lt]}return nc(e,w,$[256]),w+q[256]},bL=new tp([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),q1=new ss(0),wL=function(t,e,n,r,o,a){var u=a.z||t.length,f=new ss(r+u+5*(1+Math.ceil(u/7e3))+o),p=f.subarray(r,f.length-o),v=a.l,w=(a.r||0)&7;if(e){w&&(p[0]=a.r>>3);for(var b=bL[e-1],S=b>>13,x=b&8191,I=(1<<n)-1,D=a.p||new io(32768),j=a.h||new io(I+1),z=Math.ceil(n/3),W=2*z,Q=function(yt){return(t[yt]^t[yt+1]<<z^t[yt+2]<<W)&I},mt=new tp(25e3),Tt=new io(288),Nt=new io(32),Ft=0,vt=0,Ct=a.i||0,Ut=0,Z=a.w||0,V=0;Ct+2<u;++Ct){var St=Q(Ct),Et=Ct&32767,M=j[St];if(D[Et]=M,j[St]=Et,Z<=Ct){var $=u-Ct;if((Ft>7e3||Ut>24576)&&($>423||!v)){w=tg(t,p,0,mt,Tt,Nt,vt,Ut,V,Ct-V,w),Ut=Ft=vt=0,V=Ct;for(var q=0;q<286;++q)Tt[q]=0;for(var q=0;q<30;++q)Nt[q]=0}var O=2,dt=0,gt=x,Y=Et-M&32767;if($>2&&St==Q(Ct-Y))for(var A=Math.min(S,$)-1,U=Math.min(32767,Ct),et=Math.min(258,$);Y<=U&&--gt&&Et!=M;){if(t[Ct+O]==t[Ct+O-Y]){for(var lt=0;lt<et&&t[Ct+lt]==t[Ct+lt-Y];++lt);if(lt>O){if(O=lt,dt=Y,lt>A)break;for(var ct=Math.min(Y,lt-2),tt=0,q=0;q<ct;++q){var ft=Ct-Y+q&32767,ht=D[ft],At=ft-ht&32767;At>tt&&(tt=At,M=ft)}}}Et=M,M=D[Et],Y+=Et-M&32767}if(dt){mt[Ut++]=268435456|bd[O]<<18|X0[dt];var jt=bd[O]&31,H=X0[dt]&31;vt+=rf[jt]+sf[H],++Tt[257+jt],++Nt[H],Z=Ct+O,++Ft}else mt[Ut++]=t[Ct],++Tt[t[Ct]]}}for(Ct=Math.max(Ct,Z);Ct<u;++Ct)mt[Ut++]=t[Ct],++Tt[t[Ct]];w=tg(t,p,v,mt,Tt,Nt,vt,Ut,V,Ct-V,w),v||(a.r=w&7|p[w/8|0]<<3,w-=7,a.h=j,a.p=D,a.i=Ct,a.w=Z)}else{for(var Ct=a.w||0;Ct<u+v;Ct+=65535){var J=Ct+65535;J>=u&&(p[w/8|0]=v,J=u),w=U1(p,w+1,t.subarray(Ct,J))}a.i=u}return z1(f,0,r+ep(w)+o)},$1=function(){var t=1,e=0;return{p:function(n){for(var r=t,o=e,a=n.length|0,u=0;u!=a;){for(var f=Math.min(u+2655,a);u<f;++u)o+=r+=n[u];r=(r&65535)+15*(r>>16),o=(o&65535)+15*(o>>16)}t=r,e=o},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},xL=function(t,e,n,r,o){if(!o&&(o={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),u=new ss(a.length+t.length);u.set(a),u.set(t,a.length),t=u,o.w=a.length}return wL(t,e.level==null?6:e.level,e.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,o)},V1=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},LL=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var o=$1();o.p(e.dictionary),V1(t,2,o.d())}},CL=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Wo(6,"invalid zlib data"),(t[1]>>5&1)==1&&Wo(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function Ld(t,e){e||(e={});var n=$1();n.p(t);var r=xL(t,e,e.dictionary?6:2,4);return LL(r,e),V1(r,r.length-4,n.d()),r}function kL(t,e){return _L(t.subarray(CL(t),-4),{i:2},e,e)}var PL=typeof TextDecoder<"u"&&new TextDecoder,SL=0;try{PL.decode(q1,{stream:!0}),SL=1}catch{}var wn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Uf(){wn.console&&typeof wn.console.log=="function"&&wn.console.log.apply(wn.console,arguments)}var pr={log:Uf,warn:function(t){wn.console&&(typeof wn.console.warn=="function"?wn.console.warn.apply(wn.console,arguments):Uf.call(null,arguments))},error:function(t){wn.console&&(typeof wn.console.error=="function"?wn.console.error.apply(wn.console,arguments):Uf(t))}};function qf(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Gl(r.response,e,n)},r.onerror=function(){pr.error("could not download file")},r.send()}function eg(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Qc(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var vc,Cd,Gl=wn.saveAs||((typeof window>"u"?"undefined":ur(window))!=="object"||window!==wn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=wn.URL||wn.webkitURL,o=document.createElement("a");e=e||t.name||"download",o.download=e,o.rel="noopener",typeof t=="string"?(o.href=t,o.origin!==location.origin?eg(o.href)?qf(t,e,n):Qc(o,o.target="_blank"):Qc(o)):(o.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(o.href)},4e4),setTimeout(function(){Qc(o)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(eg(t))qf(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){Qc(r)})}else navigator.msSaveOrOpenBlob(function(o,a){return a===void 0?a={autoBom:!1}:ur(a)!=="object"&&(pr.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return qf(t,e,n);var o=t.type==="application/octet-stream",a=/constructor/i.test(wn.HTMLElement)||wn.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||o&&a)&&(typeof FileReader>"u"?"undefined":ur(FileReader))==="object"){var f=new FileReader;f.onloadend=function(){var w=f.result;w=u?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=w:location=w,r=null},f.readAsDataURL(t)}else{var p=wn.URL||wn.webkitURL,v=p.createObjectURL(t);r?r.location=v:location.href=v,r=null,setTimeout(function(){p.revokeObjectURL(v)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function H1(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(f){return[parseInt(f[1]),parseInt(f[2]),parseInt(f[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(f){return[parseInt(f[1],16),parseInt(f[2],16),parseInt(f[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(f){return[parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16),parseInt(f[3]+f[3],16)]}}],r=0;r<n.length;r++){var o=n[r].re,a=n[r].process,u=o.exec(t);u&&(e=a(u),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var f=this.r.toString(16),p=this.g.toString(16),v=this.b.toString(16);return f.length==1&&(f="0"+f),p.length==1&&(p="0"+p),v.length==1&&(v="0"+v),"#"+f+p+v}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function $f(t,e){var n=t[0],r=t[1],o=t[2],a=t[3];n=Xi(n,r,o,a,e[0],7,-680876936),a=Xi(a,n,r,o,e[1],12,-389564586),o=Xi(o,a,n,r,e[2],17,606105819),r=Xi(r,o,a,n,e[3],22,-1044525330),n=Xi(n,r,o,a,e[4],7,-176418897),a=Xi(a,n,r,o,e[5],12,1200080426),o=Xi(o,a,n,r,e[6],17,-1473231341),r=Xi(r,o,a,n,e[7],22,-45705983),n=Xi(n,r,o,a,e[8],7,1770035416),a=Xi(a,n,r,o,e[9],12,-1958414417),o=Xi(o,a,n,r,e[10],17,-42063),r=Xi(r,o,a,n,e[11],22,-1990404162),n=Xi(n,r,o,a,e[12],7,1804603682),a=Xi(a,n,r,o,e[13],12,-40341101),o=Xi(o,a,n,r,e[14],17,-1502002290),n=Qi(n,r=Xi(r,o,a,n,e[15],22,1236535329),o,a,e[1],5,-165796510),a=Qi(a,n,r,o,e[6],9,-1069501632),o=Qi(o,a,n,r,e[11],14,643717713),r=Qi(r,o,a,n,e[0],20,-373897302),n=Qi(n,r,o,a,e[5],5,-701558691),a=Qi(a,n,r,o,e[10],9,38016083),o=Qi(o,a,n,r,e[15],14,-660478335),r=Qi(r,o,a,n,e[4],20,-405537848),n=Qi(n,r,o,a,e[9],5,568446438),a=Qi(a,n,r,o,e[14],9,-1019803690),o=Qi(o,a,n,r,e[3],14,-187363961),r=Qi(r,o,a,n,e[8],20,1163531501),n=Qi(n,r,o,a,e[13],5,-1444681467),a=Qi(a,n,r,o,e[2],9,-51403784),o=Qi(o,a,n,r,e[7],14,1735328473),n=ts(n,r=Qi(r,o,a,n,e[12],20,-1926607734),o,a,e[5],4,-378558),a=ts(a,n,r,o,e[8],11,-2022574463),o=ts(o,a,n,r,e[11],16,1839030562),r=ts(r,o,a,n,e[14],23,-35309556),n=ts(n,r,o,a,e[1],4,-1530992060),a=ts(a,n,r,o,e[4],11,1272893353),o=ts(o,a,n,r,e[7],16,-155497632),r=ts(r,o,a,n,e[10],23,-1094730640),n=ts(n,r,o,a,e[13],4,681279174),a=ts(a,n,r,o,e[0],11,-358537222),o=ts(o,a,n,r,e[3],16,-722521979),r=ts(r,o,a,n,e[6],23,76029189),n=ts(n,r,o,a,e[9],4,-640364487),a=ts(a,n,r,o,e[12],11,-421815835),o=ts(o,a,n,r,e[15],16,530742520),n=es(n,r=ts(r,o,a,n,e[2],23,-995338651),o,a,e[0],6,-198630844),a=es(a,n,r,o,e[7],10,1126891415),o=es(o,a,n,r,e[14],15,-1416354905),r=es(r,o,a,n,e[5],21,-57434055),n=es(n,r,o,a,e[12],6,1700485571),a=es(a,n,r,o,e[3],10,-1894986606),o=es(o,a,n,r,e[10],15,-1051523),r=es(r,o,a,n,e[1],21,-2054922799),n=es(n,r,o,a,e[8],6,1873313359),a=es(a,n,r,o,e[15],10,-30611744),o=es(o,a,n,r,e[6],15,-1560198380),r=es(r,o,a,n,e[13],21,1309151649),n=es(n,r,o,a,e[4],6,-145523070),a=es(a,n,r,o,e[11],10,-1120210379),o=es(o,a,n,r,e[2],15,718787259),r=es(r,o,a,n,e[9],21,-343485551),t[0]=Cl(n,t[0]),t[1]=Cl(r,t[1]),t[2]=Cl(o,t[2]),t[3]=Cl(a,t[3])}function of(t,e,n,r,o,a){return e=Cl(Cl(e,t),Cl(r,a)),Cl(e<<o|e>>>32-o,n)}function Xi(t,e,n,r,o,a,u){return of(e&n|~e&r,t,e,o,a,u)}function Qi(t,e,n,r,o,a,u){return of(e&r|n&~r,t,e,o,a,u)}function ts(t,e,n,r,o,a,u){return of(e^n^r,t,e,o,a,u)}function es(t,e,n,r,o,a,u){return of(n^(e|~r),t,e,o,a,u)}function G1(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)$f(r,EL(t.substring(e-64,e)));t=t.substring(e-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)o[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for($f(r,o),e=0;e<16;e++)o[e]=0;return o[14]=8*n,$f(r,o),r}function EL(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}vc=wn.atob.bind(wn),Cd=wn.btoa.bind(wn);var ng="0123456789abcdef".split("");function AL(t){for(var e="",n=0;n<4;n++)e+=ng[t>>8*n+4&15]+ng[t>>8*n&15];return e}function ML(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function kd(t){return G1(t).map(ML).join("")}var BL=function(t){for(var e=0;e<t.length;e++)t[e]=AL(t[e]);return t.join("")}(G1("hello"))!="5d41402abc4b2a76b9719d911017c592";function Cl(t,e){if(BL){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Pd(t,e){var n,r,o,a;if(t!==n){for(var u=(o=t,a=1+(256/t.length>>0),new Array(a+1).join(o)),f=[],p=0;p<256;p++)f[p]=p;var v=0;for(p=0;p<256;p++){var w=f[p];v=(v+w+u.charCodeAt(p))%256,f[p]=f[v],f[v]=w}n=t,r=f}else f=r;var b=e.length,S=0,x=0,I="";for(p=0;p<b;p++)x=(x+(w=f[S=(S+1)%256]))%256,f[S]=f[x],f[x]=w,u=f[(f[S]+f[x])%256],I+=String.fromCharCode(e.charCodeAt(p)^u);return I}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var rg={print:4,modify:8,copy:16,"annot-forms":32};function Pu(t,e,n,r){this.v=1,this.r=2;var o=192;t.forEach(function(f){if(rg.perm!==void 0)throw new Error("Invalid permission: "+f);o+=rg[f]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var a=(e+this.padding).substr(0,32),u=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,u),this.P=-(1+(255^o)),this.encryptionKey=kd(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Pd(this.encryptionKey,this.padding)}function Su(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var o=t.charCodeAt(r);o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?e+="#"+("0"+o.toString(16)).slice(-2):e+=t[r]}return e}function ig(t){if(ur(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,o){if(o=o||!1,typeof n!="string"||typeof r!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var a=Math.random().toString(35);return e[n][a]=[r,!!o],a},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),o=[];for(var a in e[n]){var u=e[n][a];try{u[0].apply(t,r)}catch(f){wn.console&&pr.error("jsPDF PubSub Error",f.message,f)}u[1]&&o.push(a)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Bh(t){if(!(this instanceof Bh))return new Bh(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function W1(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Zl(t,e,n,r,o){if(!(this instanceof Zl))return new Zl(t,e,n,r,o);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,W1.call(this,r,o)}function Eu(t,e,n,r,o){if(!(this instanceof Eu))return new Eu(t,e,n,r,o);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,W1.call(this,r,o)}function yn(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],o=arguments[2],a=arguments[3],u=[],f=1,p=16,v="S",w=null;ur(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,o=t.format||o,a=t.compress||t.compressPdf||a,(w=t.encryption||null)!==null&&(w.userPassword=w.userPassword||"",w.ownerPassword=w.ownerPassword||"",w.userPermissions=w.userPermissions||[]),f=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(p=t.floatPrecision),v=t.defaultPathOperation||"S"),u=t.filters||(a===!0?["FlateEncode"]:u),r=r||"mm",n=(""+(n||"P")).toLowerCase();var b=t.putOnlyUsedFonts||!1,S={},x={internal:{},__private__:{}};x.__private__.PubSub=ig;var I="1.3",D=x.__private__.getPdfVersion=function(){return I};x.__private__.setPdfVersion=function(C){I=C};var j={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return j};var z=x.__private__.getPageFormat=function(C){return j[C]};o=o||"a4";var W={COMPAT:"compat",ADVANCED:"advanced"},Q=W.COMPAT;function mt(){this.saveGraphicsState(),K(new tn(De,0,0,-De,0,go()*De).toString()+" cm"),this.setFontSize(this.getFontSize()/De),v="n",Q=W.ADVANCED}function Tt(){this.restoreGraphicsState(),v="S",Q=W.COMPAT}var Nt=x.__private__.combineFontStyleAndFontWeight=function(C,nt){if(C=="bold"&&nt=="normal"||C=="bold"&&nt==400||C=="normal"&&nt=="italic"||C=="bold"&&nt=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return nt&&(C=nt==400||nt==="normal"?C==="italic"?"italic":"normal":nt!=700&&nt!=="bold"||C!=="normal"?(nt==700?"bold":nt)+""+C:"bold"),C};x.advancedAPI=function(C){var nt=Q===W.COMPAT;return nt&&mt.call(this),typeof C!="function"||(C(this),nt&&Tt.call(this)),this},x.compatAPI=function(C){var nt=Q===W.ADVANCED;return nt&&Tt.call(this),typeof C!="function"||(C(this),nt&&mt.call(this)),this},x.isAdvancedAPI=function(){return Q===W.ADVANCED};var Ft,vt=function(C){if(Q!==W.ADVANCED)throw new Error(C+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Ct=x.roundToPrecision=x.__private__.roundToPrecision=function(C,nt){var Ot=e||nt;if(isNaN(C)||isNaN(Ot))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return C.toFixed(Ot).replace(/0+$/,"")};Ft=x.hpf=x.__private__.hpf=typeof p=="number"?function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return Ct(C,p)}:p==="smart"?function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return Ct(C,C>-1&&C<1?16:5)}:function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return Ct(C,16)};var Ut=x.f2=x.__private__.f2=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.f2");return Ct(C,2)},Z=x.__private__.f3=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.f3");return Ct(C,3)},V=x.scale=x.__private__.scale=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.scale");return Q===W.COMPAT?C*De:Q===W.ADVANCED?C:void 0},St=function(C){return Q===W.COMPAT?go()-C:Q===W.ADVANCED?C:void 0},Et=function(C){return V(St(C))};x.__private__.setPrecision=x.setPrecision=function(C){typeof parseInt(C,10)=="number"&&(e=parseInt(C,10))};var M,$="00000000000000000000000000000000",q=x.__private__.getFileId=function(){return $},O=x.__private__.setFileId=function(C){return $=C!==void 0&&/^[a-fA-F0-9]{32}$/.test(C)?C.toUpperCase():$.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),w!==null&&(Br=new Pu(w.userPermissions,w.userPassword,w.ownerPassword,$)),$};x.setFileId=function(C){return O(C),this},x.getFileId=function(){return q()};var dt=x.__private__.convertDateToPDFDate=function(C){var nt=C.getTimezoneOffset(),Ot=nt<0?"+":"-",Gt=Math.floor(Math.abs(nt/60)),le=Math.abs(nt%60),be=[Ot,et(Gt),"'",et(le),"'"].join("");return["D:",C.getFullYear(),et(C.getMonth()+1),et(C.getDate()),et(C.getHours()),et(C.getMinutes()),et(C.getSeconds()),be].join("")},gt=x.__private__.convertPDFDateToDate=function(C){var nt=parseInt(C.substr(2,4),10),Ot=parseInt(C.substr(6,2),10)-1,Gt=parseInt(C.substr(8,2),10),le=parseInt(C.substr(10,2),10),be=parseInt(C.substr(12,2),10),Te=parseInt(C.substr(14,2),10);return new Date(nt,Ot,Gt,le,be,Te,0)},Y=x.__private__.setCreationDate=function(C){var nt;if(C===void 0&&(C=new Date),C instanceof Date)nt=dt(C);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(C))throw new Error("Invalid argument passed to jsPDF.setCreationDate");nt=C}return M=nt},A=x.__private__.getCreationDate=function(C){var nt=M;return C==="jsDate"&&(nt=gt(M)),nt};x.setCreationDate=function(C){return Y(C),this},x.getCreationDate=function(C){return A(C)};var U,et=x.__private__.padd2=function(C){return("0"+parseInt(C)).slice(-2)},lt=x.__private__.padd2Hex=function(C){return("00"+(C=C.toString())).substr(C.length)},ct=0,tt=[],ft=[],ht=0,At=[],jt=[],H=!1,J=ft,yt=function(){ct=0,ht=0,ft=[],tt=[],At=[],bi=$e(),ci=$e()};x.__private__.setCustomOutputDestination=function(C){H=!0,J=C};var wt=function(C){H||(J=C)};x.__private__.resetCustomOutputDestination=function(){H=!1,J=ft};var K=x.__private__.out=function(C){return C=C.toString(),ht+=C.length+1,J.push(C),J},Ht=x.__private__.write=function(C){return K(arguments.length===1?C.toString():Array.prototype.join.call(arguments," "))},ne=x.__private__.getArrayBuffer=function(C){for(var nt=C.length,Ot=new ArrayBuffer(nt),Gt=new Uint8Array(Ot);nt--;)Gt[nt]=C.charCodeAt(nt);return Ot},Zt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return Zt};var Dt=t.fontSize||16;x.__private__.setFontSize=x.setFontSize=function(C){return Dt=Q===W.ADVANCED?C/De:C,this};var Lt,ae=x.__private__.getFontSize=x.getFontSize=function(){return Q===W.COMPAT?Dt:Dt*De},te=t.R2L||!1;x.__private__.setR2L=x.setR2L=function(C){return te=C,this},x.__private__.getR2L=x.getR2L=function(){return te};var xe,zt=x.__private__.setZoomMode=function(C){var nt=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(C))Lt=C;else if(isNaN(C)){if(nt.indexOf(C)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+C+'" is not recognized.');Lt=C}else Lt=parseInt(C,10)};x.__private__.getZoomMode=function(){return Lt};var pe,qe=x.__private__.setPageMode=function(C){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(C)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+C+'" is not recognized.');xe=C};x.__private__.getPageMode=function(){return xe};var He=x.__private__.setLayoutMode=function(C){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(C)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+C+'" is not recognized.');pe=C};x.__private__.getLayoutMode=function(){return pe},x.__private__.setDisplayMode=x.setDisplayMode=function(C,nt,Ot){return zt(C),He(nt),qe(Ot),this};var Fe={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function(C){if(Object.keys(Fe).indexOf(C)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Fe[C]},x.__private__.getDocumentProperties=function(){return Fe},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function(C){for(var nt in Fe)Fe.hasOwnProperty(nt)&&C[nt]&&(Fe[nt]=C[nt]);return this},x.__private__.setDocumentProperty=function(C,nt){if(Object.keys(Fe).indexOf(C)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Fe[C]=nt};var Xe,De,on,pn,cr,rn={},hn={},Ze=[],Pn={},vr={},Tn={},or={},dr=null,qn=0,ze=[],Ne=new ig(x),Mr=t.hotfixes||[],ar={},je={},hr=[],tn=function C(nt,Ot,Gt,le,be,Te){if(!(this instanceof C))return new C(nt,Ot,Gt,le,be,Te);isNaN(nt)&&(nt=1),isNaN(Ot)&&(Ot=0),isNaN(Gt)&&(Gt=0),isNaN(le)&&(le=1),isNaN(be)&&(be=0),isNaN(Te)&&(Te=0),this._matrix=[nt,Ot,Gt,le,be,Te]};Object.defineProperty(tn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(C){this._matrix[0]=C}}),Object.defineProperty(tn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(C){this._matrix[1]=C}}),Object.defineProperty(tn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(C){this._matrix[2]=C}}),Object.defineProperty(tn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(C){this._matrix[3]=C}}),Object.defineProperty(tn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(C){this._matrix[4]=C}}),Object.defineProperty(tn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(C){this._matrix[5]=C}}),Object.defineProperty(tn.prototype,"a",{get:function(){return this._matrix[0]},set:function(C){this._matrix[0]=C}}),Object.defineProperty(tn.prototype,"b",{get:function(){return this._matrix[1]},set:function(C){this._matrix[1]=C}}),Object.defineProperty(tn.prototype,"c",{get:function(){return this._matrix[2]},set:function(C){this._matrix[2]=C}}),Object.defineProperty(tn.prototype,"d",{get:function(){return this._matrix[3]},set:function(C){this._matrix[3]=C}}),Object.defineProperty(tn.prototype,"e",{get:function(){return this._matrix[4]},set:function(C){this._matrix[4]=C}}),Object.defineProperty(tn.prototype,"f",{get:function(){return this._matrix[5]},set:function(C){this._matrix[5]=C}}),Object.defineProperty(tn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(tn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(tn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(tn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),tn.prototype.join=function(C){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Ft).join(C)},tn.prototype.multiply=function(C){var nt=C.sx*this.sx+C.shy*this.shx,Ot=C.sx*this.shy+C.shy*this.sy,Gt=C.shx*this.sx+C.sy*this.shx,le=C.shx*this.shy+C.sy*this.sy,be=C.tx*this.sx+C.ty*this.shx+this.tx,Te=C.tx*this.shy+C.ty*this.sy+this.ty;return new tn(nt,Ot,Gt,le,be,Te)},tn.prototype.decompose=function(){var C=this.sx,nt=this.shy,Ot=this.shx,Gt=this.sy,le=this.tx,be=this.ty,Te=Math.sqrt(C*C+nt*nt),Ge=(C/=Te)*Ot+(nt/=Te)*Gt;Ot-=C*Ge,Gt-=nt*Ge;var Je=Math.sqrt(Ot*Ot+Gt*Gt);return Ge/=Je,C*(Gt/=Je)<nt*(Ot/=Je)&&(C=-C,nt=-nt,Ge=-Ge,Te=-Te),{scale:new tn(Te,0,0,Je,0,0),translate:new tn(1,0,0,1,le,be),rotate:new tn(C,nt,-nt,C,0,0),skew:new tn(1,0,Ge,1,0,0)}},tn.prototype.toString=function(C){return this.join(" ")},tn.prototype.inversed=function(){var C=this.sx,nt=this.shy,Ot=this.shx,Gt=this.sy,le=this.tx,be=this.ty,Te=1/(C*Gt-nt*Ot),Ge=Gt*Te,Je=-nt*Te,an=-Ot*Te,vn=C*Te;return new tn(Ge,Je,an,vn,-Ge*le-an*be,-Je*le-vn*be)},tn.prototype.applyToPoint=function(C){var nt=C.x*this.sx+C.y*this.shx+this.tx,Ot=C.x*this.shy+C.y*this.sy+this.ty;return new Io(nt,Ot)},tn.prototype.applyToRectangle=function(C){var nt=this.applyToPoint(C),Ot=this.applyToPoint(new Io(C.x+C.w,C.y+C.h));return new Hi(nt.x,nt.y,Ot.x-nt.x,Ot.y-nt.y)},tn.prototype.clone=function(){var C=this.sx,nt=this.shy,Ot=this.shx,Gt=this.sy,le=this.tx,be=this.ty;return new tn(C,nt,Ot,Gt,le,be)},x.Matrix=tn;var nr=x.matrixMult=function(C,nt){return nt.multiply(C)},Ni=new tn(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=Ni;var qr=function(C,nt){if(!vr[C]){var Ot=(nt instanceof Zl?"Sh":"P")+(Object.keys(Pn).length+1).toString(10);nt.id=Ot,vr[C]=Ot,Pn[Ot]=nt,Ne.publish("addPattern",nt)}};x.ShadingPattern=Zl,x.TilingPattern=Eu,x.addShadingPattern=function(C,nt){return vt("addShadingPattern()"),qr(C,nt),this},x.beginTilingPattern=function(C){vt("beginTilingPattern()"),Da(C.boundingBox[0],C.boundingBox[1],C.boundingBox[2]-C.boundingBox[0],C.boundingBox[3]-C.boundingBox[1],C.matrix)},x.endTilingPattern=function(C,nt){vt("endTilingPattern()"),nt.stream=jt[U].join(`
`),qr(C,nt),Ne.publish("endTilingPattern",nt),hr.pop().restore()};var Un=x.__private__.newObject=function(){var C=$e();return $r(C,!0),C},$e=x.__private__.newObjectDeferred=function(){return ct++,tt[ct]=function(){return ht},ct},$r=function(C,nt){return nt=typeof nt=="boolean"&&nt,tt[C]=ht,nt&&K(C+" 0 obj"),C},_s=x.__private__.newAdditionalObject=function(){var C={objId:$e(),content:""};return At.push(C),C},bi=$e(),ci=$e(),ti=x.__private__.decodeColorString=function(C){var nt=C.split(" ");if(nt.length!==2||nt[1]!=="g"&&nt[1]!=="G")nt.length===5&&(nt[4]==="k"||nt[4]==="K")&&(nt=[(1-nt[0])*(1-nt[3]),(1-nt[1])*(1-nt[3]),(1-nt[2])*(1-nt[3]),"r"]);else{var Ot=parseFloat(nt[0]);nt=[Ot,Ot,Ot,"r"]}for(var Gt="#",le=0;le<3;le++)Gt+=("0"+Math.floor(255*parseFloat(nt[le])).toString(16)).slice(-2);return Gt},hi=x.__private__.encodeColorString=function(C){var nt;typeof C=="string"&&(C={ch1:C});var Ot=C.ch1,Gt=C.ch2,le=C.ch3,be=C.ch4,Te=C.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ot=="string"&&Ot.charAt(0)!=="#"){var Ge=new H1(Ot);if(Ge.ok)Ot=Ge.toHex();else if(!/^\d*\.?\d*$/.test(Ot))throw new Error('Invalid color "'+Ot+'" passed to jsPDF.encodeColorString.')}if(typeof Ot=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ot)&&(Ot="#"+Ot[1]+Ot[1]+Ot[2]+Ot[2]+Ot[3]+Ot[3]),typeof Ot=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ot)){var Je=parseInt(Ot.substr(1),16);Ot=Je>>16&255,Gt=Je>>8&255,le=255&Je}if(Gt===void 0||be===void 0&&Ot===Gt&&Gt===le)if(typeof Ot=="string")nt=Ot+" "+Te[0];else switch(C.precision){case 2:nt=Ut(Ot/255)+" "+Te[0];break;case 3:default:nt=Z(Ot/255)+" "+Te[0]}else if(be===void 0||ur(be)==="object"){if(be&&!isNaN(be.a)&&be.a===0)return nt=["1.","1.","1.",Te[1]].join(" ");if(typeof Ot=="string")nt=[Ot,Gt,le,Te[1]].join(" ");else switch(C.precision){case 2:nt=[Ut(Ot/255),Ut(Gt/255),Ut(le/255),Te[1]].join(" ");break;default:case 3:nt=[Z(Ot/255),Z(Gt/255),Z(le/255),Te[1]].join(" ")}}else if(typeof Ot=="string")nt=[Ot,Gt,le,be,Te[2]].join(" ");else switch(C.precision){case 2:nt=[Ut(Ot),Ut(Gt),Ut(le),Ut(be),Te[2]].join(" ");break;case 3:default:nt=[Z(Ot),Z(Gt),Z(le),Z(be),Te[2]].join(" ")}return nt},Ir=x.__private__.getFilters=function(){return u},ei=x.__private__.putStream=function(C){var nt=(C=C||{}).data||"",Ot=C.filters||Ir(),Gt=C.alreadyAppliedFilters||[],le=C.addLength1||!1,be=nt.length,Te=C.objectId,Ge=function(Nr){return Nr};if(w!==null&&Te===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");w!==null&&(Ge=Br.encryptor(Te,0));var Je={};Ot===!0&&(Ot=["FlateEncode"]);var an=C.additionalKeyValues||[],vn=(Je=yn.API.processDataByFilters!==void 0?yn.API.processDataByFilters(nt,Ot):{data:nt,reverseChain:[]}).reverseChain+(Array.isArray(Gt)?Gt.join(" "):Gt.toString());if(Je.data.length!==0&&(an.push({key:"Length",value:Je.data.length}),le===!0&&an.push({key:"Length1",value:be})),vn.length!=0)if(vn.split("/").length-1==1)an.push({key:"Filter",value:vn});else{an.push({key:"Filter",value:"["+vn+"]"});for(var Dn=0;Dn<an.length;Dn+=1)if(an[Dn].key==="DecodeParms"){for(var lr=[],zn=0;zn<Je.reverseChain.split("/").length-1;zn+=1)lr.push("null");lr.push(an[Dn].value),an[Dn].value="["+lr.join(" ")+"]"}}K("<<");for(var Gn=0;Gn<an.length;Gn++)K("/"+an[Gn].key+" "+an[Gn].value);K(">>"),Je.data.length!==0&&(K("stream"),K(Ge(Je.data)),K("endstream"))},Di=x.__private__.putPage=function(C){var nt=C.number,Ot=C.data,Gt=C.objId,le=C.contentsObjId;$r(Gt,!0),K("<</Type /Page"),K("/Parent "+C.rootDictionaryObjId+" 0 R"),K("/Resources "+C.resourceDictionaryObjId+" 0 R"),K("/MediaBox ["+parseFloat(Ft(C.mediaBox.bottomLeftX))+" "+parseFloat(Ft(C.mediaBox.bottomLeftY))+" "+Ft(C.mediaBox.topRightX)+" "+Ft(C.mediaBox.topRightY)+"]"),C.cropBox!==null&&K("/CropBox ["+Ft(C.cropBox.bottomLeftX)+" "+Ft(C.cropBox.bottomLeftY)+" "+Ft(C.cropBox.topRightX)+" "+Ft(C.cropBox.topRightY)+"]"),C.bleedBox!==null&&K("/BleedBox ["+Ft(C.bleedBox.bottomLeftX)+" "+Ft(C.bleedBox.bottomLeftY)+" "+Ft(C.bleedBox.topRightX)+" "+Ft(C.bleedBox.topRightY)+"]"),C.trimBox!==null&&K("/TrimBox ["+Ft(C.trimBox.bottomLeftX)+" "+Ft(C.trimBox.bottomLeftY)+" "+Ft(C.trimBox.topRightX)+" "+Ft(C.trimBox.topRightY)+"]"),C.artBox!==null&&K("/ArtBox ["+Ft(C.artBox.bottomLeftX)+" "+Ft(C.artBox.bottomLeftY)+" "+Ft(C.artBox.topRightX)+" "+Ft(C.artBox.topRightY)+"]"),typeof C.userUnit=="number"&&C.userUnit!==1&&K("/UserUnit "+C.userUnit),Ne.publish("putPage",{objId:Gt,pageContext:ze[nt],pageNumber:nt,page:Ot}),K("/Contents "+le+" 0 R"),K(">>"),K("endobj");var be=Ot.join(`
`);return Q===W.ADVANCED&&(be+=`
Q`),$r(le,!0),ei({data:be,filters:Ir(),objectId:le}),K("endobj"),Gt},bs=x.__private__.putPages=function(){var C,nt,Ot=[];for(C=1;C<=qn;C++)ze[C].objId=$e(),ze[C].contentsObjId=$e();for(C=1;C<=qn;C++)Ot.push(Di({number:C,data:jt[C],objId:ze[C].objId,contentsObjId:ze[C].contentsObjId,mediaBox:ze[C].mediaBox,cropBox:ze[C].cropBox,bleedBox:ze[C].bleedBox,trimBox:ze[C].trimBox,artBox:ze[C].artBox,userUnit:ze[C].userUnit,rootDictionaryObjId:bi,resourceDictionaryObjId:ci}));$r(bi,!0),K("<</Type /Pages");var Gt="/Kids [";for(nt=0;nt<qn;nt++)Gt+=Ot[nt]+" 0 R ";K(Gt+"]"),K("/Count "+qn),K(">>"),K("endobj"),Ne.publish("postPutPages")},qs=function(C){Ne.publish("putFont",{font:C,out:K,newObject:Un,putStream:ei}),C.isAlreadyPutted!==!0&&(C.objectNumber=Un(),K("<<"),K("/Type /Font"),K("/BaseFont /"+Su(C.postScriptName)),K("/Subtype /Type1"),typeof C.encoding=="string"&&K("/Encoding /"+C.encoding),K("/FirstChar 32"),K("/LastChar 255"),K(">>"),K("endobj"))},$s=function(){for(var C in rn)rn.hasOwnProperty(C)&&(b===!1||b===!0&&S.hasOwnProperty(C))&&qs(rn[C])},Ui=function(C){C.objectNumber=Un();var nt=[];nt.push({key:"Type",value:"/XObject"}),nt.push({key:"Subtype",value:"/Form"}),nt.push({key:"BBox",value:"["+[Ft(C.x),Ft(C.y),Ft(C.x+C.width),Ft(C.y+C.height)].join(" ")+"]"}),nt.push({key:"Matrix",value:"["+C.matrix.toString()+"]"});var Ot=C.pages[1].join(`
`);ei({data:Ot,additionalKeyValues:nt,objectId:C.objectNumber}),K("endobj")},os=function(){for(var C in ar)ar.hasOwnProperty(C)&&Ui(ar[C])},ws=function(C,nt){var Ot,Gt=[],le=1/(nt-1);for(Ot=0;Ot<1;Ot+=le)Gt.push(Ot);if(Gt.push(1),C[0].offset!=0){var be={offset:0,color:C[0].color};C.unshift(be)}if(C[C.length-1].offset!=1){var Te={offset:1,color:C[C.length-1].color};C.push(Te)}for(var Ge="",Je=0,an=0;an<Gt.length;an++){for(Ot=Gt[an];Ot>C[Je+1].offset;)Je++;var vn=C[Je].offset,Dn=(Ot-vn)/(C[Je+1].offset-vn),lr=C[Je].color,zn=C[Je+1].color;Ge+=lt(Math.round((1-Dn)*lr[0]+Dn*zn[0]).toString(16))+lt(Math.round((1-Dn)*lr[1]+Dn*zn[1]).toString(16))+lt(Math.round((1-Dn)*lr[2]+Dn*zn[2]).toString(16))}return Ge.trim()},Xn=function(C,nt){nt||(nt=21);var Ot=Un(),Gt=ws(C.colors,nt),le=[];le.push({key:"FunctionType",value:"0"}),le.push({key:"Domain",value:"[0.0 1.0]"}),le.push({key:"Size",value:"["+nt+"]"}),le.push({key:"BitsPerSample",value:"8"}),le.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),le.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ei({data:Gt,additionalKeyValues:le,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ot}),K("endobj"),C.objectNumber=Un(),K("<< /ShadingType "+C.type),K("/ColorSpace /DeviceRGB");var be="/Coords ["+Ft(parseFloat(C.coords[0]))+" "+Ft(parseFloat(C.coords[1]))+" ";C.type===2?be+=Ft(parseFloat(C.coords[2]))+" "+Ft(parseFloat(C.coords[3])):be+=Ft(parseFloat(C.coords[2]))+" "+Ft(parseFloat(C.coords[3]))+" "+Ft(parseFloat(C.coords[4]))+" "+Ft(parseFloat(C.coords[5])),K(be+="]"),C.matrix&&K("/Matrix ["+C.matrix.toString()+"]"),K("/Function "+Ot+" 0 R"),K("/Extend [true true]"),K(">>"),K("endobj")},xs=function(C,nt){var Ot=$e(),Gt=Un();nt.push({resourcesOid:Ot,objectOid:Gt}),C.objectNumber=Gt;var le=[];le.push({key:"Type",value:"/Pattern"}),le.push({key:"PatternType",value:"1"}),le.push({key:"PaintType",value:"1"}),le.push({key:"TilingType",value:"1"}),le.push({key:"BBox",value:"["+C.boundingBox.map(Ft).join(" ")+"]"}),le.push({key:"XStep",value:Ft(C.xStep)}),le.push({key:"YStep",value:Ft(C.yStep)}),le.push({key:"Resources",value:Ot+" 0 R"}),C.matrix&&le.push({key:"Matrix",value:"["+C.matrix.toString()+"]"}),ei({data:C.stream,additionalKeyValues:le,objectId:C.objectNumber}),K("endobj")},Ls=function(C){var nt;for(nt in Pn)Pn.hasOwnProperty(nt)&&(Pn[nt]instanceof Zl?Xn(Pn[nt]):Pn[nt]instanceof Eu&&xs(Pn[nt],C))},ea=function(C){for(var nt in C.objectNumber=Un(),K("<<"),C)switch(nt){case"opacity":K("/ca "+Ut(C[nt]));break;case"stroke-opacity":K("/CA "+Ut(C[nt]))}K(">>"),K("endobj")},Nl=function(){var C;for(C in Tn)Tn.hasOwnProperty(C)&&ea(Tn[C])},Ao=function(){for(var C in K("/XObject <<"),ar)ar.hasOwnProperty(C)&&ar[C].objectNumber>=0&&K("/"+C+" "+ar[C].objectNumber+" 0 R");Ne.publish("putXobjectDict"),K(">>")},Mo=function(){Br.oid=Un(),K("<<"),K("/Filter /Standard"),K("/V "+Br.v),K("/R "+Br.r),K("/U <"+Br.toHexString(Br.U)+">"),K("/O <"+Br.toHexString(Br.O)+">"),K("/P "+Br.P),K(">>"),K("endobj")},Pa=function(){for(var C in K("/Font <<"),rn)rn.hasOwnProperty(C)&&(b===!1||b===!0&&S.hasOwnProperty(C))&&K("/"+C+" "+rn[C].objectNumber+" 0 R");K(">>")},Qa=function(){if(Object.keys(Pn).length>0){for(var C in K("/Shading <<"),Pn)Pn.hasOwnProperty(C)&&Pn[C]instanceof Zl&&Pn[C].objectNumber>=0&&K("/"+C+" "+Pn[C].objectNumber+" 0 R");Ne.publish("putShadingPatternDict"),K(">>")}},Oi=function(C){if(Object.keys(Pn).length>0){for(var nt in K("/Pattern <<"),Pn)Pn.hasOwnProperty(nt)&&Pn[nt]instanceof x.TilingPattern&&Pn[nt].objectNumber>=0&&Pn[nt].objectNumber<C&&K("/"+nt+" "+Pn[nt].objectNumber+" 0 R");Ne.publish("putTilingPatternDict"),K(">>")}},jn=function(){if(Object.keys(Tn).length>0){var C;for(C in K("/ExtGState <<"),Tn)Tn.hasOwnProperty(C)&&Tn[C].objectNumber>=0&&K("/"+C+" "+Tn[C].objectNumber+" 0 R");Ne.publish("putGStateDict"),K(">>")}},xn=function(C){$r(C.resourcesOid,!0),K("<<"),K("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Pa(),Qa(),Oi(C.objectOid),jn(),Ao(),K(">>"),K("endobj")},oo=function(){var C=[];$s(),Nl(),os(),Ls(C),Ne.publish("putResources"),C.forEach(xn),xn({resourcesOid:ci,objectOid:Number.MAX_SAFE_INTEGER}),Ne.publish("postPutResources")},Vs=function(){Ne.publish("putAdditionalObjects");for(var C=0;C<At.length;C++){var nt=At[C];$r(nt.objId,!0),K(nt.content),K("endobj")}Ne.publish("postPutAdditionalObjects")},Cs=function(C){hn[C.fontName]=hn[C.fontName]||{},hn[C.fontName][C.fontStyle]=C.id},Bo=function(C,nt,Ot,Gt,le){var be={id:"F"+(Object.keys(rn).length+1).toString(10),postScriptName:C,fontName:nt,fontStyle:Ot,encoding:Gt,isStandardFont:le||!1,metadata:{}};return Ne.publish("addFont",{font:be,instance:this}),rn[be.id]=be,Cs(be),be.id},kn=function(C){for(var nt=0,Ot=Zt.length;nt<Ot;nt++){var Gt=Bo.call(this,C[nt][0],C[nt][1],C[nt][2],Zt[nt][3],!0);b===!1&&(S[Gt]=!0);var le=C[nt][0].split("-");Cs({id:Gt,fontName:le[0],fontStyle:le[1]||""})}Ne.publish("addFonts",{fonts:rn,dictionary:hn})},$n=function(C){return C.foo=function(){try{return C.apply(this,arguments)}catch(Gt){var nt=Gt.stack||"";~nt.indexOf(" at ")&&(nt=nt.split(" at ")[1]);var Ot="Error in function "+nt.split(`
`)[0].split("<")[0]+": "+Gt.message;if(!wn.console)throw new Error(Ot);wn.console.error(Ot,Gt),wn.alert&&alert(Ot)}},C.foo.bar=C,C.foo},ao=function(C,nt){var Ot,Gt,le,be,Te,Ge,Je,an,vn;if(le=(nt=nt||{}).sourceEncoding||"Unicode",Te=nt.outputEncoding,(nt.autoencode||Te)&&rn[Xe].metadata&&rn[Xe].metadata[le]&&rn[Xe].metadata[le].encoding&&(be=rn[Xe].metadata[le].encoding,!Te&&rn[Xe].encoding&&(Te=rn[Xe].encoding),!Te&&be.codePages&&(Te=be.codePages[0]),typeof Te=="string"&&(Te=be[Te]),Te)){for(Je=!1,Ge=[],Ot=0,Gt=C.length;Ot<Gt;Ot++)(an=Te[C.charCodeAt(Ot)])?Ge.push(String.fromCharCode(an)):Ge.push(C[Ot]),Ge[Ot].charCodeAt(0)>>8&&(Je=!0);C=Ge.join("")}for(Ot=C.length;Je===void 0&&Ot!==0;)C.charCodeAt(Ot-1)>>8&&(Je=!0),Ot--;if(!Je)return C;for(Ge=nt.noBOM?[]:[254,255],Ot=0,Gt=C.length;Ot<Gt;Ot++){if((vn=(an=C.charCodeAt(Ot))>>8)>>8)throw new Error("Character at position "+Ot+" of string '"+C+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ge.push(vn),Ge.push(an-(vn<<8))}return String.fromCharCode.apply(void 0,Ge)},Vr=x.__private__.pdfEscape=x.pdfEscape=function(C,nt){return ao(C,nt).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ni=x.__private__.beginPage=function(C){jt[++qn]=[],ze[qn]={objId:0,contentsObjId:0,userUnit:Number(f),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(C[0]),topRightY:Number(C[1])}},ks(qn),wt(jt[U])},tl=function(C,nt){var Ot,Gt,le;switch(n=nt||n,typeof C=="string"&&(Ot=z(C.toLowerCase()),Array.isArray(Ot)&&(Gt=Ot[0],le=Ot[1])),Array.isArray(C)&&(Gt=C[0]*De,le=C[1]*De),isNaN(Gt)&&(Gt=o[0],le=o[1]),(Gt>14400||le>14400)&&(pr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Gt=Math.min(14400,Gt),le=Math.min(14400,le)),o=[Gt,le],n.substr(0,1)){case"l":le>Gt&&(o=[le,Gt]);break;case"p":Gt>le&&(o=[le,Gt])}ni(o),Oo(oa),K(wi),ua!==0&&K(ua+" J"),Tr!==0&&K(Tr+" j"),Ne.publish("addPage",{pageNumber:qn})},na=function(C){C>0&&C<=qn&&(jt.splice(C,1),ze.splice(C,1),qn--,U>qn&&(U=qn),this.setPage(U))},ks=function(C){C>0&&C<=qn&&(U=C)},yr=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return jt.length-1},Ps=function(C,nt,Ot){var Gt,le=void 0;return Ot=Ot||{},C=C!==void 0?C:rn[Xe].fontName,nt=nt!==void 0?nt:rn[Xe].fontStyle,Gt=C.toLowerCase(),hn[Gt]!==void 0&&hn[Gt][nt]!==void 0?le=hn[Gt][nt]:hn[C]!==void 0&&hn[C][nt]!==void 0?le=hn[C][nt]:Ot.disableWarning===!1&&pr.warn("Unable to look up font label for font '"+C+"', '"+nt+"'. Refer to getFontList() for available fonts."),le||Ot.noFallback||(le=hn.times[nt])==null&&(le=hn.times.normal),le},To=x.__private__.putInfo=function(){var C=Un(),nt=function(Gt){return Gt};for(var Ot in w!==null&&(nt=Br.encryptor(C,0)),K("<<"),K("/Producer ("+Vr(nt("jsPDF "+yn.version))+")"),Fe)Fe.hasOwnProperty(Ot)&&Fe[Ot]&&K("/"+Ot.substr(0,1).toUpperCase()+Ot.substr(1)+" ("+Vr(nt(Fe[Ot]))+")");K("/CreationDate ("+Vr(nt(M))+")"),K(">>"),K("endobj")},Hs=x.__private__.putCatalog=function(C){var nt=(C=C||{}).rootDictionaryObjId||bi;switch(Un(),K("<<"),K("/Type /Catalog"),K("/Pages "+nt+" 0 R"),Lt||(Lt="fullwidth"),Lt){case"fullwidth":K("/OpenAction [3 0 R /FitH null]");break;case"fullheight":K("/OpenAction [3 0 R /FitV null]");break;case"fullpage":K("/OpenAction [3 0 R /Fit]");break;case"original":K("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ot=""+Lt;Ot.substr(Ot.length-1)==="%"&&(Lt=parseInt(Lt)/100),typeof Lt=="number"&&K("/OpenAction [3 0 R /XYZ null null "+Ut(Lt)+"]")}switch(pe||(pe="continuous"),pe){case"continuous":K("/PageLayout /OneColumn");break;case"single":K("/PageLayout /SinglePage");break;case"two":case"twoleft":K("/PageLayout /TwoColumnLeft");break;case"tworight":K("/PageLayout /TwoColumnRight")}xe&&K("/PageMode /"+xe),Ne.publish("putCatalog"),K(">>"),K("endobj")},Sa=x.__private__.putTrailer=function(){K("trailer"),K("<<"),K("/Size "+(ct+1)),K("/Root "+ct+" 0 R"),K("/Info "+(ct-1)+" 0 R"),w!==null&&K("/Encrypt "+Br.oid+" 0 R"),K("/ID [ <"+$+"> <"+$+"> ]"),K(">>")},lo=x.__private__.putHeader=function(){K("%PDF-"+I),K("%ºß¬à")},Ea=x.__private__.putXRef=function(){var C="0000000000";K("xref"),K("0 "+(ct+1)),K("0000000000 65535 f ");for(var nt=1;nt<=ct;nt++)typeof tt[nt]=="function"?K((C+tt[nt]()).slice(-10)+" 00000 n "):tt[nt]!==void 0?K((C+tt[nt]).slice(-10)+" 00000 n "):K("0000000000 00000 n ")},as=x.__private__.buildDocument=function(){yt(),wt(ft),Ne.publish("buildDocument"),lo(),bs(),Vs(),oo(),w!==null&&Mo(),To(),Hs();var C=ht;return Ea(),Sa(),K("startxref"),K(""+C),K("%%EOF"),wt(jt[U]),ft.join(`
`)},Gs=x.__private__.getBlob=function(C){return new Blob([ne(C)],{type:"application/pdf"})},uo=x.output=x.__private__.output=$n(function(C,nt){switch(typeof(nt=nt||{})=="string"?nt={filename:nt}:nt.filename=nt.filename||"generated.pdf",C){case void 0:return as();case"save":x.save(nt.filename);break;case"arraybuffer":return ne(as());case"blob":return Gs(as());case"bloburi":case"bloburl":if(wn.URL!==void 0&&typeof wn.URL.createObjectURL=="function")return wn.URL&&wn.URL.createObjectURL(Gs(as()))||void 0;pr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ot="",Gt=as();try{Ot=Cd(Gt)}catch{Ot=Cd(unescape(encodeURIComponent(Gt)))}return"data:application/pdf;filename="+nt.filename+";base64,"+Ot;case"pdfobjectnewwindow":if(Object.prototype.toString.call(wn)==="[object Window]"){var le="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",be=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';nt.pdfObjectUrl&&(le=nt.pdfObjectUrl,be="");var Te='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+le+'"'+be+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(nt)+");<\/script></body></html>",Ge=wn.open();return Ge!==null&&Ge.document.write(Te),Ge}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(wn)==="[object Window]"){var Je='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(nt.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+nt.filename+'" width="500px" height="400px" /></body></html>',an=wn.open();if(an!==null){an.document.write(Je);var vn=this;an.document.documentElement.querySelector("#pdfViewer").onload=function(){an.document.title=nt.filename,an.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(vn.output("bloburl"))}}return an}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(wn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Dn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",nt)+'"></iframe></body></html>',lr=wn.open();if(lr!==null&&(lr.document.write(Dn),lr.document.title=nt.filename),lr||typeof safari>"u")return lr;break;case"datauri":case"dataurl":return wn.document.location.href=this.output("datauristring",nt);default:return null}}),ra=function(C){return Array.isArray(Mr)===!0&&Mr.indexOf(C)>-1};switch(r){case"pt":De=1;break;case"mm":De=72/25.4;break;case"cm":De=72/2.54;break;case"in":De=72;break;case"px":De=ra("px_scaling")==1?.75:96/72;break;case"pc":case"em":De=12;break;case"ex":De=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);De=r}var Br=null;Y(),O();var el=function(C){return w!==null?Br.encryptor(C,0):function(nt){return nt}},ia=x.__private__.getPageInfo=x.getPageInfo=function(C){if(isNaN(C)||C%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ze[C].objId,pageNumber:C,pageContext:ze[C]}},bn=x.__private__.getPageInfoByObjId=function(C){if(isNaN(C)||C%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var nt in ze)if(ze[nt].objId===C)break;return ia(nt)},Ln=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:ze[U].objId,pageNumber:U,pageContext:ze[U]}};x.addPage=function(){return tl.apply(this,arguments),this},x.setPage=function(){return ks.apply(this,arguments),wt.call(this,jt[U]),this},x.insertPage=function(C){return this.addPage(),this.movePage(U,C),this},x.movePage=function(C,nt){var Ot,Gt;if(C>nt){Ot=jt[C],Gt=ze[C];for(var le=C;le>nt;le--)jt[le]=jt[le-1],ze[le]=ze[le-1];jt[nt]=Ot,ze[nt]=Gt,this.setPage(nt)}else if(C<nt){Ot=jt[C],Gt=ze[C];for(var be=C;be<nt;be++)jt[be]=jt[be+1],ze[be]=ze[be+1];jt[nt]=Ot,ze[nt]=Gt,this.setPage(nt)}return this},x.deletePage=function(){return na.apply(this,arguments),this},x.__private__.text=x.text=function(C,nt,Ot,Gt,le){var be,Te,Ge,Je,an,vn,Dn,lr,zn,Gn=(Gt=Gt||{}).scope||this;if(typeof C=="number"&&typeof nt=="number"&&(typeof Ot=="string"||Array.isArray(Ot))){var Nr=Ot;Ot=nt,nt=C,C=Nr}if(arguments[3]instanceof tn?(vt("The transform parameter of text() with a Matrix value"),zn=le):(Ge=arguments[4],Je=arguments[5],ur(Dn=arguments[3])==="object"&&Dn!==null||(typeof Ge=="string"&&(Je=Ge,Ge=null),typeof Dn=="string"&&(Je=Dn,Dn=null),typeof Dn=="number"&&(Ge=Dn,Dn=null),Gt={flags:Dn,angle:Ge,align:Je})),isNaN(nt)||isNaN(Ot)||C==null)throw new Error("Invalid arguments passed to jsPDF.text");if(C.length===0)return Gn;var Er="",Ii=!1,Qn=typeof Gt.lineHeightFactor=="number"?Gt.lineHeightFactor:Do,di=Gn.internal.scaleFactor;function il(Jn){return Jn=Jn.split("	").join(Array(Gt.TabLen||9).join(" ")),Vr(Jn,Dn)}function pi(Jn){for(var Wn,Cr=Jn.concat(),tr=[],cs=Cr.length;cs--;)typeof(Wn=Cr.shift())=="string"?tr.push(Wn):Array.isArray(Jn)&&(Wn.length===1||Wn[1]===void 0&&Wn[2]===void 0)?tr.push(Wn[0]):tr.push([Wn[0],Wn[1],Wn[2]]);return tr}function Ra(Jn,Wn){var Cr;if(typeof Jn=="string")Cr=Wn(Jn)[0];else if(Array.isArray(Jn)){for(var tr,cs,_o=Jn.concat(),Ts=[],ol=_o.length;ol--;)typeof(tr=_o.shift())=="string"?Ts.push(Wn(tr)[0]):Array.isArray(tr)&&typeof tr[0]=="string"&&(cs=Wn(tr[0],tr[1],tr[2]),Ts.push([cs[0],cs[1],cs[2]]));Cr=Ts}return Cr}var ls=!1,Ia=!0;if(typeof C=="string")ls=!0;else if(Array.isArray(C)){var Ks=C.concat();Te=[];for(var Js,Ar=Ks.length;Ar--;)(typeof(Js=Ks.shift())!="string"||Array.isArray(Js)&&typeof Js[0]!="string")&&(Ia=!1);ls=Ia}if(ls===!1)throw new Error('Type of text must be string or Array. "'+C+'" is not recognized.');typeof C=="string"&&(C=C.match(/[\r?\n]/)?C.split(/\r\n|\r|\n/g):[C]);var fa=Dt/Gn.internal.scaleFactor,xi=fa*(Qn-1);switch(Gt.baseline){case"bottom":Ot-=xi;break;case"top":Ot+=fa-xi;break;case"hanging":Ot+=fa-2*xi;break;case"middle":Ot+=fa/2-xi}if((vn=Gt.maxWidth||0)>0&&(typeof C=="string"?C=Gn.splitTextToSize(C,vn):Object.prototype.toString.call(C)==="[object Array]"&&(C=C.reduce(function(Jn,Wn){return Jn.concat(Gn.splitTextToSize(Wn,vn))},[]))),be={text:C,x:nt,y:Ot,options:Gt,mutex:{pdfEscape:Vr,activeFontKey:Xe,fonts:rn,activeFontSize:Dt}},Ne.publish("preProcessText",be),C=be.text,Ge=(Gt=be.options).angle,!(zn instanceof tn)&&Ge&&typeof Ge=="number"){Ge*=Math.PI/180,Gt.rotationDirection===0&&(Ge=-Ge),Q===W.ADVANCED&&(Ge=-Ge);var gi=Math.cos(Ge),da=Math.sin(Ge);zn=new tn(gi,da,-da,gi,0,0)}else Ge&&Ge instanceof tn&&(zn=Ge);Q!==W.ADVANCED||zn||(zn=Ni),(an=Gt.charSpace||la)!==void 0&&(Er+=Ft(V(an))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(lr=Gt.horizontalScale)!==void 0&&(Er+=Ft(100*lr)+` Tz
`),Gt.lang;var ri=-1,Ys=Gt.renderingMode!==void 0?Gt.renderingMode:Gt.stroke,Fi=Gn.internal.getCurrentPageInfo().pageContext;switch(Ys){case 0:case!1:case"fill":ri=0;break;case 1:case!0:case"stroke":ri=1;break;case 2:case"fillThenStroke":ri=2;break;case 3:case"invisible":ri=3;break;case 4:case"fillAndAddForClipping":ri=4;break;case 5:case"strokeAndAddPathForClipping":ri=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ri=6;break;case 7:case"addToPathForClipping":ri=7}var sl=Fi.usedRenderingMode!==void 0?Fi.usedRenderingMode:-1;ri!==-1?Er+=ri+` Tr
`:sl!==-1&&(Er+=`0 Tr
`),ri!==-1&&(Fi.usedRenderingMode=ri),Je=Gt.align||"left";var Dr,Es=Dt*Qn,Gi=Gn.internal.pageSize.getWidth(),jo=rn[Xe];an=Gt.charSpace||la,vn=Gt.maxWidth||0,Dn=Object.assign({autoencode:!0,noBOM:!0},Gt.flags);var Xs=[],As=function(Jn){return Gn.getStringUnitWidth(Jn,{font:jo,charSpace:an,fontSize:Dt,doKerning:!1})*Dt/di};if(Object.prototype.toString.call(C)==="[object Array]"){var Hr;Te=pi(C),Je!=="left"&&(Dr=Te.map(As));var Fr,us=0;if(Je==="right"){nt-=Dr[0],C=[],Ar=Te.length;for(var Li=0;Li<Ar;Li++)Li===0?(Fr=un(nt),Hr=fi(Ot)):(Fr=V(us-Dr[Li]),Hr=-Es),C.push([Te[Li],Fr,Hr]),us=Dr[Li]}else if(Je==="center"){nt-=Dr[0]/2,C=[],Ar=Te.length;for(var Wi=0;Wi<Ar;Wi++)Wi===0?(Fr=un(nt),Hr=fi(Ot)):(Fr=V((us-Dr[Wi])/2),Hr=-Es),C.push([Te[Wi],Fr,Hr]),us=Dr[Wi]}else if(Je==="left"){C=[],Ar=Te.length;for(var Qs=0;Qs<Ar;Qs++)C.push(Te[Qs])}else if(Je==="justify"&&jo.encoding==="Identity-H"){C=[],Ar=Te.length,vn=vn!==0?vn:Gi;for(var Zi=0,_r=0;_r<Ar;_r++)if(Hr=_r===0?fi(Ot):-Es,Fr=_r===0?un(nt):Zi,_r<Ar-1){var Ms=V((vn-Dr[_r])/(Te[_r].split(" ").length-1)),mi=Te[_r].split(" ");C.push([mi[0]+" ",Fr,Hr]),Zi=0;for(var ii=1;ii<mi.length;ii++){var zo=(As(mi[ii-1]+" "+mi[ii])-As(mi[ii]))*di+Ms;ii==mi.length-1?C.push([mi[ii],zo,0]):C.push([mi[ii]+" ",zo,0]),Zi-=zo}}else C.push([Te[_r],Fr,Hr]);C.push(["",Zi,0])}else{if(Je!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(C=[],Ar=Te.length,vn=vn!==0?vn:Gi,_r=0;_r<Ar;_r++)Hr=_r===0?fi(Ot):-Es,Fr=_r===0?un(nt):0,_r<Ar-1?Xs.push(Ft(V((vn-Dr[_r])/(Te[_r].split(" ").length-1)))):Xs.push(0),C.push([Te[_r],Fr,Hr])}}var Fa=typeof Gt.R2L=="boolean"?Gt.R2L:te;Fa===!0&&(C=Ra(C,function(Jn,Wn,Cr){return[Jn.split("").reverse().join(""),Wn,Cr]})),be={text:C,x:nt,y:Ot,options:Gt,mutex:{pdfEscape:Vr,activeFontKey:Xe,fonts:rn,activeFontSize:Dt}},Ne.publish("postProcessText",be),C=be.text,Ii=be.mutex.isHex||!1;var ja=rn[Xe].encoding;ja!=="WinAnsiEncoding"&&ja!=="StandardEncoding"||(C=Ra(C,function(Jn,Wn,Cr){return[il(Jn),Wn,Cr]})),Te=pi(C),C=[];for(var si,Ci,mo,Bs=0,pa=1,vo=Array.isArray(Te[0])?pa:Bs,yo="",to=function(Jn,Wn,Cr){var tr="";return Cr instanceof tn?(Cr=typeof Gt.angle=="number"?nr(Cr,new tn(1,0,0,1,Jn,Wn)):nr(new tn(1,0,0,1,Jn,Wn),Cr),Q===W.ADVANCED&&(Cr=nr(new tn(1,0,0,-1,0,0),Cr)),tr=Cr.join(" ")+` Tm
`):tr=Ft(Jn)+" "+Ft(Wn)+` Td
`,tr},Ki=0;Ki<Te.length;Ki++){switch(yo="",vo){case pa:mo=(Ii?"<":"(")+Te[Ki][0]+(Ii?">":")"),si=parseFloat(Te[Ki][1]),Ci=parseFloat(Te[Ki][2]);break;case Bs:mo=(Ii?"<":"(")+Te[Ki]+(Ii?">":")"),si=un(nt),Ci=fi(Ot)}Xs!==void 0&&Xs[Ki]!==void 0&&(yo=Xs[Ki]+` Tw
`),Ki===0?C.push(yo+to(si,Ci,zn)+mo):vo===Bs?C.push(yo+mo):vo===pa&&C.push(yo+to(si,Ci,zn)+mo)}C=vo===Bs?C.join(` Tj
T* `):C.join(` Tj
`),C+=` Tj
`;var Gr=`BT
/`;return Gr+=Xe+" "+Dt+` Tf
`,Gr+=Ft(Dt*Qn)+` TL
`,Gr+=Ss+`
`,Gr+=Er,Gr+=C,K(Gr+="ET"),S[Xe]=!0,Gn};var qi=x.__private__.clip=x.clip=function(C){return K(C==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return qi("evenodd")},x.__private__.discardPath=x.discardPath=function(){return K("n"),this};var Rn=x.__private__.isValidStyle=function(C){var nt=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(C)!==-1&&(nt=!0),nt};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function(C){return Rn(C)&&(v=C),this};var Aa=x.__private__.getStyle=x.getStyle=function(C){var nt=v;switch(C){case"D":case"S":nt="S";break;case"F":nt="f";break;case"FD":case"DF":nt="B";break;case"f":case"f*":case"B":case"B*":nt=C}return nt},sa=x.close=function(){return K("h"),this};x.stroke=function(){return K("S"),this},x.fill=function(C){return co("f",C),this},x.fillEvenOdd=function(C){return co("f*",C),this},x.fillStroke=function(C){return co("B",C),this},x.fillStrokeEvenOdd=function(C){return co("B*",C),this};var co=function(C,nt){ur(nt)==="object"?Ma(nt,C):K(C)},$i=function(C){C===null||Q===W.ADVANCED&&C===void 0||(C=Aa(C),K(C))};function Ws(C,nt,Ot,Gt,le){var be=new Eu(nt||this.boundingBox,Ot||this.xStep,Gt||this.yStep,this.gState,le||this.matrix);be.stream=this.stream;var Te=C+"$$"+this.cloneIndex+++"$$";return qr(Te,be),be}var Ma=function(C,nt){var Ot=vr[C.key],Gt=Pn[Ot];if(Gt instanceof Zl)K("q"),K(No(nt)),Gt.gState&&x.setGState(Gt.gState),K(C.matrix.toString()+" cm"),K("/"+Ot+" sh"),K("Q");else if(Gt instanceof Eu){var le=new tn(1,0,0,-1,0,go());C.matrix&&(le=le.multiply(C.matrix||Ni),Ot=Ws.call(Gt,C.key,C.boundingBox,C.xStep,C.yStep,le).id),K("q"),K("/Pattern cs"),K("/"+Ot+" scn"),Gt.gState&&x.setGState(Gt.gState),K(nt),K("Q")}},No=function(C){switch(C){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},xr=x.moveTo=function(C,nt){return K(Ft(V(C))+" "+Ft(Et(nt))+" m"),this},Ri=x.lineTo=function(C,nt){return K(Ft(V(C))+" "+Ft(Et(nt))+" l"),this},Zs=x.curveTo=function(C,nt,Ot,Gt,le,be){return K([Ft(V(C)),Ft(Et(nt)),Ft(V(Ot)),Ft(Et(Gt)),Ft(V(le)),Ft(Et(be)),"c"].join(" ")),this};x.__private__.line=x.line=function(C,nt,Ot,Gt,le){if(isNaN(C)||isNaN(nt)||isNaN(Ot)||isNaN(Gt)||!Rn(le))throw new Error("Invalid arguments passed to jsPDF.line");return Q===W.COMPAT?this.lines([[Ot-C,Gt-nt]],C,nt,[1,1],le||"S"):this.lines([[Ot-C,Gt-nt]],C,nt,[1,1]).stroke()},x.__private__.lines=x.lines=function(C,nt,Ot,Gt,le,be){var Te,Ge,Je,an,vn,Dn,lr,zn,Gn,Nr,Er,Ii;if(typeof C=="number"&&(Ii=Ot,Ot=nt,nt=C,C=Ii),Gt=Gt||[1,1],be=be||!1,isNaN(nt)||isNaN(Ot)||!Array.isArray(C)||!Array.isArray(Gt)||!Rn(le)||typeof be!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(xr(nt,Ot),Te=Gt[0],Ge=Gt[1],an=C.length,Nr=nt,Er=Ot,Je=0;Je<an;Je++)(vn=C[Je]).length===2?(Nr=vn[0]*Te+Nr,Er=vn[1]*Ge+Er,Ri(Nr,Er)):(Dn=vn[0]*Te+Nr,lr=vn[1]*Ge+Er,zn=vn[2]*Te+Nr,Gn=vn[3]*Ge+Er,Nr=vn[4]*Te+Nr,Er=vn[5]*Ge+Er,Zs(Dn,lr,zn,Gn,Nr,Er));return be&&sa(),$i(le),this},x.path=function(C){for(var nt=0;nt<C.length;nt++){var Ot=C[nt],Gt=Ot.c;switch(Ot.op){case"m":xr(Gt[0],Gt[1]);break;case"l":Ri(Gt[0],Gt[1]);break;case"c":Zs.apply(this,Gt);break;case"h":sa()}}return this},x.__private__.rect=x.rect=function(C,nt,Ot,Gt,le){if(isNaN(C)||isNaN(nt)||isNaN(Ot)||isNaN(Gt)||!Rn(le))throw new Error("Invalid arguments passed to jsPDF.rect");return Q===W.COMPAT&&(Gt=-Gt),K([Ft(V(C)),Ft(Et(nt)),Ft(V(Ot)),Ft(V(Gt)),"re"].join(" ")),$i(le),this},x.__private__.triangle=x.triangle=function(C,nt,Ot,Gt,le,be,Te){if(isNaN(C)||isNaN(nt)||isNaN(Ot)||isNaN(Gt)||isNaN(le)||isNaN(be)||!Rn(Te))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ot-C,Gt-nt],[le-Ot,be-Gt],[C-le,nt-be]],C,nt,[1,1],Te,!0),this},x.__private__.roundedRect=x.roundedRect=function(C,nt,Ot,Gt,le,be,Te){if(isNaN(C)||isNaN(nt)||isNaN(Ot)||isNaN(Gt)||isNaN(le)||isNaN(be)||!Rn(Te))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ge=4/3*(Math.SQRT2-1);return le=Math.min(le,.5*Ot),be=Math.min(be,.5*Gt),this.lines([[Ot-2*le,0],[le*Ge,0,le,be-be*Ge,le,be],[0,Gt-2*be],[0,be*Ge,-le*Ge,be,-le,be],[2*le-Ot,0],[-le*Ge,0,-le,-be*Ge,-le,-be],[0,2*be-Gt],[0,-be*Ge,le*Ge,-be,le,-be]],C+le,nt,[1,1],Te,!0),this},x.__private__.ellipse=x.ellipse=function(C,nt,Ot,Gt,le){if(isNaN(C)||isNaN(nt)||isNaN(Ot)||isNaN(Gt)||!Rn(le))throw new Error("Invalid arguments passed to jsPDF.ellipse");var be=4/3*(Math.SQRT2-1)*Ot,Te=4/3*(Math.SQRT2-1)*Gt;return xr(C+Ot,nt),Zs(C+Ot,nt-Te,C+be,nt-Gt,C,nt-Gt),Zs(C-be,nt-Gt,C-Ot,nt-Te,C-Ot,nt),Zs(C-Ot,nt+Te,C-be,nt+Gt,C,nt+Gt),Zs(C+be,nt+Gt,C+Ot,nt+Te,C+Ot,nt),$i(le),this},x.__private__.circle=x.circle=function(C,nt,Ot,Gt){if(isNaN(C)||isNaN(nt)||isNaN(Ot)||!Rn(Gt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(C,nt,Ot,Ot,Gt)},x.setFont=function(C,nt,Ot){return Ot&&(nt=Nt(nt,Ot)),Xe=Ps(C,nt,{disableWarning:!1}),this};var nl=x.__private__.getFont=x.getFont=function(){return rn[Ps.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var C,nt,Ot={};for(C in hn)if(hn.hasOwnProperty(C))for(nt in Ot[C]=[],hn[C])hn[C].hasOwnProperty(nt)&&Ot[C].push(nt);return Ot},x.addFont=function(C,nt,Ot,Gt,le){var be=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&be.indexOf(arguments[3])!==-1?le=arguments[3]:arguments[3]&&be.indexOf(arguments[3])==-1&&(Ot=Nt(Ot,Gt)),le=le||"Identity-H",Bo.call(this,C,nt,Ot,le)};var Do,oa=t.lineWidth||.200025,ho=x.__private__.getLineWidth=x.getLineWidth=function(){return oa},Oo=x.__private__.setLineWidth=x.setLineWidth=function(C){return oa=C,K(Ft(V(C))+" w"),this};x.__private__.setLineDash=yn.API.setLineDash=yn.API.setLineDashPattern=function(C,nt){if(C=C||[],nt=nt||0,isNaN(nt)||!Array.isArray(C))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return C=C.map(function(Ot){return Ft(V(Ot))}).join(" "),nt=Ft(V(nt)),K("["+C+"] "+nt+" d"),this};var Ba=x.__private__.getLineHeight=x.getLineHeight=function(){return Dt*Do};x.__private__.getLineHeight=x.getLineHeight=function(){return Dt*Do};var Nn=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function(C){return typeof(C=C||1.15)=="number"&&(Do=C),this},Ta=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return Do};Nn(t.lineHeight);var un=x.__private__.getHorizontalCoordinate=function(C){return V(C)},fi=x.__private__.getVerticalCoordinate=function(C){return Q===W.ADVANCED?C:ze[U].mediaBox.topRightY-ze[U].mediaBox.bottomLeftY-V(C)},Ro=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function(C){return Ft(un(C))},fo=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function(C){return Ft(fi(C))},wi=t.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return ti(wi)},x.__private__.setStrokeColor=x.setDrawColor=function(C,nt,Ot,Gt){return wi=hi({ch1:C,ch2:nt,ch3:Ot,ch4:Gt,pdfColorType:"draw",precision:2}),K(wi),this};var Na=t.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return ti(Na)},x.__private__.setFillColor=x.setFillColor=function(C,nt,Ot,Gt){return Na=hi({ch1:C,ch2:nt,ch3:Ot,ch4:Gt,pdfColorType:"fill",precision:2}),K(Na),this};var Ss=t.textColor||"0 g",aa=x.__private__.getTextColor=x.getTextColor=function(){return ti(Ss)};x.__private__.setTextColor=x.setTextColor=function(C,nt,Ot,Gt){return Ss=hi({ch1:C,ch2:nt,ch3:Ot,ch4:Gt,pdfColorType:"text",precision:3}),this};var la=t.charSpace,Vi=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(la||0)};x.__private__.setCharSpace=x.setCharSpace=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return la=C,this};var ua=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function(C){var nt=x.CapJoinStyles[C];if(nt===void 0)throw new Error("Line cap style of '"+C+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ua=nt,K(nt+" J"),this};var Tr=0;x.__private__.setLineJoin=x.setLineJoin=function(C){var nt=x.CapJoinStyles[C];if(nt===void 0)throw new Error("Line join style of '"+C+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Tr=nt,K(nt+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function(C){if(C=C||0,isNaN(C))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return K(Ft(V(C))+" M"),this},x.GState=Bh,x.setGState=function(C){(C=typeof C=="string"?Tn[or[C]]:rl(null,C)).equals(dr)||(K("/"+C.id+" gs"),dr=C)};var rl=function(C,nt){if(!C||!or[C]){var Ot=!1;for(var Gt in Tn)if(Tn.hasOwnProperty(Gt)&&Tn[Gt].equals(nt)){Ot=!0;break}if(Ot)nt=Tn[Gt];else{var le="GS"+(Object.keys(Tn).length+1).toString(10);Tn[le]=nt,nt.id=le}return C&&(or[C]=nt.id),Ne.publish("addGState",nt),nt}};x.addGState=function(C,nt){return rl(C,nt),this},x.saveGraphicsState=function(){return K("q"),Ze.push({key:Xe,size:Dt,color:Ss}),this},x.restoreGraphicsState=function(){K("Q");var C=Ze.pop();return Xe=C.key,Dt=C.size,Ss=C.color,dr=null,this},x.setCurrentTransformationMatrix=function(C){return K(C.toString()+" cm"),this},x.comment=function(C){return K("#"+C),this};var Io=function(C,nt){var Ot=C||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ot},set:function(be){isNaN(be)||(Ot=parseFloat(be))}});var Gt=nt||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Gt},set:function(be){isNaN(be)||(Gt=parseFloat(be))}});var le="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return le},set:function(be){le=be.toString()}}),this},Hi=function(C,nt,Ot,Gt){Io.call(this,C,nt),this.type="rect";var le=Ot||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return le},set:function(Te){isNaN(Te)||(le=parseFloat(Te))}});var be=Gt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return be},set:function(Te){isNaN(Te)||(be=parseFloat(Te))}}),this},ca=function(){this.page=qn,this.currentPage=U,this.pages=jt.slice(0),this.pagesContext=ze.slice(0),this.x=on,this.y=pn,this.matrix=cr,this.width=po(U),this.height=go(U),this.outputDestination=J,this.id="",this.objectNumber=-1};ca.prototype.restore=function(){qn=this.page,U=this.currentPage,ze=this.pagesContext,jt=this.pages,on=this.x,pn=this.y,cr=this.matrix,Fo(U,this.width),Lr(U,this.height),J=this.outputDestination};var Da=function(C,nt,Ot,Gt,le){hr.push(new ca),qn=U=0,jt=[],on=C,pn=nt,cr=le,ni([Ot,Gt])},Oa=function(C){if(je[C])hr.pop().restore();else{var nt=new ca,Ot="Xo"+(Object.keys(ar).length+1).toString(10);nt.id=Ot,je[C]=Ot,ar[Ot]=nt,Ne.publish("addFormObject",nt),hr.pop().restore()}};for(var ha in x.beginFormObject=function(C,nt,Ot,Gt,le){return Da(C,nt,Ot,Gt,le),this},x.endFormObject=function(C){return Oa(C),this},x.doFormObject=function(C,nt){var Ot=ar[je[C]];return K("q"),K(nt.toString()+" cm"),K("/"+Ot.id+" Do"),K("Q"),this},x.getFormObject=function(C){var nt=ar[je[C]];return{x:nt.x,y:nt.y,width:nt.width,height:nt.height,matrix:nt.matrix}},x.save=function(C,nt){return C=C||"generated.pdf",(nt=nt||{}).returnPromise=nt.returnPromise||!1,nt.returnPromise===!1?(Gl(Gs(as()),C),typeof Gl.unload=="function"&&wn.setTimeout&&setTimeout(Gl.unload,911),this):new Promise(function(Ot,Gt){try{var le=Gl(Gs(as()),C);typeof Gl.unload=="function"&&wn.setTimeout&&setTimeout(Gl.unload,911),Ot(le)}catch(be){Gt(be.message)}})},yn.API)yn.API.hasOwnProperty(ha)&&(ha==="events"&&yn.API.events.length?function(C,nt){var Ot,Gt,le;for(le=nt.length-1;le!==-1;le--)Ot=nt[le][0],Gt=nt[le][1],C.subscribe.apply(C,[Ot].concat(typeof Gt=="function"?[Gt]:Gt))}(Ne,yn.API.events):x[ha]=yn.API[ha]);var po=x.getPageWidth=function(C){return(ze[C=C||U].mediaBox.topRightX-ze[C].mediaBox.bottomLeftX)/De},Fo=x.setPageWidth=function(C,nt){ze[C].mediaBox.topRightX=nt*De+ze[C].mediaBox.bottomLeftX},go=x.getPageHeight=function(C){return(ze[C=C||U].mediaBox.topRightY-ze[C].mediaBox.bottomLeftY)/De},Lr=x.setPageHeight=function(C,nt){ze[C].mediaBox.topRightY=nt*De+ze[C].mediaBox.bottomLeftY};return x.internal={pdfEscape:Vr,getStyle:Aa,getFont:nl,getFontSize:ae,getCharSpace:Vi,getTextColor:aa,getLineHeight:Ba,getLineHeightFactor:Ta,getLineWidth:ho,write:Ht,getHorizontalCoordinate:un,getVerticalCoordinate:fi,getCoordinateString:Ro,getVerticalCoordinateString:fo,collections:{},newObject:Un,newAdditionalObject:_s,newObjectDeferred:$e,newObjectDeferredBegin:$r,getFilters:Ir,putStream:ei,events:Ne,scaleFactor:De,pageSize:{getWidth:function(){return po(U)},setWidth:function(C){Fo(U,C)},getHeight:function(){return go(U)},setHeight:function(C){Lr(U,C)}},encryptionOptions:w,encryption:Br,getEncryptor:el,output:uo,getNumberOfPages:yr,pages:jt,out:K,f2:Ut,f3:Z,getPageInfo:ia,getPageInfoByObjId:bn,getCurrentPageInfo:Ln,getPDFVersion:D,Point:Io,Rectangle:Hi,Matrix:tn,hasHotfix:ra},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return po(U)},set:function(C){Fo(U,C)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return go(U)},set:function(C){Lr(U,C)},enumerable:!0,configurable:!0}),kn.call(x,Zt),Xe="F1",tl(o,n),Ne.publish("initialized"),x}Pu.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Pu.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Pu.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Pu.prototype.processOwnerPassword=function(t,e){return Pd(kd(e).substr(0,5),t)},Pu.prototype.encryptor=function(t,e){var n=kd(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Pd(n,r)}},Bh.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||ur(t)!==ur(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},yn.API={events:[]},yn.version="3.0.0";var jr=yn.API,np=1,au=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_u=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Sn=function(t){return t.toFixed(2)},vl=function(t){return t.toFixed(5)};jr.__acroform__={};var Us=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},sg=function(t){return t*np},va=function(t){var e=new K1,n=en.internal.getHeight(t)||0,r=en.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Sn(r)),Number(Sn(n))],e},TL=jr.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},NL=jr.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},DL=jr.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Zr=jr.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return DL(t,e-1)},Kr=jr.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return TL(t,e-1)},Jr=jr.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return NL(t,e-1)},OL=jr.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,o=t[0],a=t[1],u=t[2],f=t[3],p={};return p.lowerLeft_X=n(o)||0,p.lowerLeft_Y=r(a+f)||0,p.upperRight_X=n(o+u)||0,p.upperRight_Y=r(a)||0,[Number(Sn(p.lowerLeft_X)),Number(Sn(p.lowerLeft_Y)),Number(Sn(p.upperRight_X)),Number(Sn(p.upperRight_Y))]},RL=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=Sd(t,n),o=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+o+" "+Sn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=va(t);return a.scope=t.scope,a.stream=e.join(`
`),a}},Sd=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},o=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");o=t.multiline?o.map(function(Z){return Z.split(`
`)}):o.map(function(Z){return[Z]});var a=n,u=en.internal.getHeight(t)||0;u=u<0?-u:u;var f=en.internal.getWidth(t)||0;f=f<0?-f:f;var p=function(Z,V,St){if(Z+1<o.length){var Et=V+" "+o[Z+1][0];return th(Et,t,St).width<=f-4}return!1};a++;t:for(;a>0;){e="",a--;var v,w,b=th("3",t,a).height,S=t.multiline?u-a:(u-b)/2,x=S+=2,I=0,D=0,j=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+th(e,t,a=12).width+", FieldWidth:"+f+`
`;break}for(var z="",W=0,Q=0;Q<o.length;Q++)if(o.hasOwnProperty(Q)){var mt=!1;if(o[Q].length!==1&&j!==o[Q].length-1){if((b+2)*(W+2)+2>u)continue t;z+=o[Q][j],mt=!0,D=Q,Q--}else{z=(z+=o[Q][j]+" ").substr(z.length-1)==" "?z.substr(0,z.length-1):z;var Tt=parseInt(Q),Nt=p(Tt,z,a),Ft=Q>=o.length-1;if(Nt&&!Ft){z+=" ",j=0;continue}if(Nt||Ft){if(Ft)D=Tt;else if(t.multiline&&(b+2)*(W+2)+2>u)continue t}else{if(!t.multiline||(b+2)*(W+2)+2>u)continue t;D=Tt}}for(var vt="",Ct=I;Ct<=D;Ct++){var Ut=o[Ct];if(t.multiline){if(Ct===D){vt+=Ut[j]+" ",j=(j+1)%Ut.length;continue}if(Ct===I){vt+=Ut[Ut.length-1]+" ";continue}}vt+=Ut[0]+" "}switch(vt=vt.substr(vt.length-1)==" "?vt.substr(0,vt.length-1):vt,w=th(vt,t,a).width,t.textAlign){case"right":v=f-w-2;break;case"center":v=(f-w)/2;break;case"left":default:v=2}e+=Sn(v)+" "+Sn(x)+` Td
`,e+="("+au(vt)+`) Tj
`,e+=-Sn(v)+` 0 Td
`,x=-(a+2),w=0,I=mt?D:D+1,W++,z=""}break}return r.text=e,r.fontSize=a,r},th=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),o=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:o}},IL={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},FL=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},jL=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,o=t[n];e.internal.newObjectDeferredBegin(o.objId,!0),ur(o)==="object"&&typeof o.putStream=="function"&&o.putStream(),delete t[r]}},zL=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Qo.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(IL)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");np=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new J1,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];a.objId=void 0,a.hasAnnotation&&FL(a,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,o){var a=!r;for(var u in r||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(u)){var f=r[u],p=[],v=f.Rect;if(f.Rect&&(f.Rect=OL(f.Rect,o)),o.internal.newObjectDeferredBegin(f.objId,!0),f.DA=en.createDefaultAppearanceStream(f),ur(f)==="object"&&typeof f.getKeyValueListForStream=="function"&&(p=f.getKeyValueListForStream()),f.Rect=v,f.hasAppearanceStream&&!f.appearanceStreamContent){var w=RL(f);p.push({key:"AP",value:"<</N "+w+">>"}),o.internal.acroformPlugin.xForms.push(w)}if(f.appearanceStreamContent){var b="";for(var S in f.appearanceStreamContent)if(f.appearanceStreamContent.hasOwnProperty(S)){var x=f.appearanceStreamContent[S];if(b+="/"+S+" ",b+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var u in x)if(x.hasOwnProperty(u)){var I=x[u];typeof I=="function"&&(I=I.call(o,f)),b+="/"+u+" "+I+" ",o.internal.acroformPlugin.xForms.indexOf(I)>=0||o.internal.acroformPlugin.xForms.push(I)}}else typeof(I=x)=="function"&&(I=I.call(o,f)),b+="/"+u+" "+I,o.internal.acroformPlugin.xForms.indexOf(I)>=0||o.internal.acroformPlugin.xForms.push(I);b+=">>"}p.push({key:"AP",value:`<<
`+b+">>"})}o.internal.putStream({additionalKeyValues:p,objectId:f.objId}),o.internal.out("endobj")}a&&jL(o.internal.acroformPlugin.xForms,o)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},Z1=jr.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(u){return u};if(Array.isArray(t)){for(var o="[",a=0;a<t.length;a++)switch(a!==0&&(o+=" "),ur(t[a])){case"boolean":case"number":case"object":o+=t[a].toString();break;case"string":t[a].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),o+="("+au(r(t[a].toString()))+")"):o+=t[a].toString()}return o+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Vf=function(t,e,n){var r=function(o){return o};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+au(r(t))+")"},ba=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ba.prototype.toString=function(){return this.objId+" 0 R"},ba.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},ba.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],o=this[r];o&&(Array.isArray(o)?t.push({key:r,value:Z1(o,this.objId,this.scope)}):o instanceof ba?(o.scope=this.scope,t.push({key:r,value:o.objId+" 0 R"})):typeof o!="function"&&t.push({key:r,value:o}))}return t};var K1=function(){ba.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Us(K1,ba);var J1=function(){ba.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+au(n(t))+")"}},set:function(n){t=n}})};Us(J1,ba);var Qo=function t(){ba.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(z){if(isNaN(z))throw new Error('Invalid value "'+z+'" for attribute F supplied.');e=z}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Zr(e,3)},set:function(z){z?this.F=Kr(e,3):this.F=Jr(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(z){if(isNaN(z))throw new Error('Invalid value "'+z+'" for attribute Ff supplied.');n=z}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(z){r=z!==void 0?z:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(z){r[0]=z}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(z){r[1]=z}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(z){r[2]=z}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(z){r[3]=z}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(z){switch(z){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=z;break;default:throw new Error('Invalid value "'+z+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Th)return;a="FieldObject"+t.FieldNum++}var z=function(W){return W};return this.scope&&(z=this.scope.internal.getEncryptor(this.objId)),"("+au(z(a))+")"},set:function(z){a=z.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(z){a=z}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(z){u=z}});var f="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return f},set:function(z){f=z}});var p=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return p},set:function(z){p=z}});var v=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return v===void 0?50/np:v},set:function(z){v=z}});var w="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return w},set:function(z){w=z}});var b="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!b||this instanceof Th||this instanceof nu))return Vf(b,this.objId,this.scope)},set:function(z){z=z.toString(),b=z}});var S=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(S)return this instanceof Mi?S:Vf(S,this.objId,this.scope)},set:function(z){z=z.toString(),S=this instanceof Mi?z:z.substr(0,1)==="("?_u(z.substr(1,z.length-2)):_u(z)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Mi?_u(S.substr(1,S.length-1)):S},set:function(z){z=z.toString(),S=this instanceof Mi?"/"+z:z}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(z){this.V=z}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof Mi?x:Vf(x,this.objId,this.scope)},set:function(z){z=z.toString(),x=this instanceof Mi?z:z.substr(0,1)==="("?_u(z.substr(1,z.length-2)):_u(z)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Mi?_u(x.substr(1,x.length-1)):x},set:function(z){z=z.toString(),x=this instanceof Mi?"/"+z:z}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var I,D=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return D},set:function(z){z=!!z,D=z}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(I)return I},set:function(z){I=z}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,1)},set:function(z){z?this.Ff=Kr(this.Ff,1):this.Ff=Jr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,2)},set:function(z){z?this.Ff=Kr(this.Ff,2):this.Ff=Jr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,3)},set:function(z){z?this.Ff=Kr(this.Ff,3):this.Ff=Jr(this.Ff,3)}});var j=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(j!==null)return j},set:function(z){if([0,1,2].indexOf(z)===-1)throw new Error('Invalid value "'+z+'" for attribute Q supplied.');j=z}}),Object.defineProperty(this,"textAlign",{get:function(){var z;switch(j){case 0:default:z="left";break;case 1:z="center";break;case 2:z="right"}return z},configurable:!0,enumerable:!0,set:function(z){switch(z){case"right":case 2:j=2;break;case"center":case 1:j=1;break;case"left":case 0:default:j=0}}})};Us(Qo,ba);var Tu=function(){Qo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Z1(e,this.objId,this.scope)},set:function(n){var r,o;o=[],typeof(r=n)=="string"&&(o=function(a,u,f){f||(f=1);for(var p,v=[];p=u.exec(a);)v.push(p[f]);return v}(r,/\((.*?)\)/g)),e=o}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,18)},set:function(n){n?this.Ff=Kr(this.Ff,18):this.Ff=Jr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Kr(this.Ff,19):this.Ff=Jr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,20)},set:function(n){n?(this.Ff=Kr(this.Ff,20),e.sort()):this.Ff=Jr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,22)},set:function(n){n?this.Ff=Kr(this.Ff,22):this.Ff=Jr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,23)},set:function(n){n?this.Ff=Kr(this.Ff,23):this.Ff=Jr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,27)},set:function(n){n?this.Ff=Kr(this.Ff,27):this.Ff=Jr(this.Ff,27)}}),this.hasAppearanceStream=!1};Us(Tu,Qo);var Nu=function(){Tu.call(this),this.fontName="helvetica",this.combo=!1};Us(Nu,Tu);var Du=function(){Nu.call(this),this.combo=!0};Us(Du,Nu);var fh=function(){Du.call(this),this.edit=!0};Us(fh,Du);var Mi=function(){Qo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,15)},set:function(n){n?this.Ff=Kr(this.Ff,15):this.Ff=Jr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,16)},set:function(n){n?this.Ff=Kr(this.Ff,16):this.Ff=Jr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,17)},set:function(n){n?this.Ff=Kr(this.Ff,17):this.Ff=Jr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,26)},set:function(n){n?this.Ff=Kr(this.Ff,26):this.Ff=Jr(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(a){return a};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,o=[];for(r in o.push("<<"),e)o.push("/"+r+" ("+au(n(e[r]))+")");return o.push(">>"),o.join(`
`)}},set:function(n){ur(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Us(Mi,Qo);var dh=function(){Mi.call(this),this.pushButton=!0};Us(dh,Mi);var Ou=function(){Mi.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Us(Ou,Mi);var Th=function(){var t,e;Qo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(o){t=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(o){e=o}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(f){return f};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var a,u=[];for(a in u.push("<<"),r)u.push("/"+a+" ("+au(o(r[a]))+")");return u.push(">>"),u.join(`
`)},set:function(o){ur(o)==="object"&&(r=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(o){typeof o=="string"&&(r.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(o){n="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=en.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Us(Th,Qo),Ou.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Ou.prototype.createOption=function(t){var e=new Th;return e.Parent=this,e.optionName=t,this.Kids.push(e),UL.call(this.scope,e),e};var ph=function(){Mi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=en.CheckBox.createAppearanceStream()};Us(ph,Mi);var nu=function(){Qo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,13)},set:function(e){e?this.Ff=Kr(this.Ff,13):this.Ff=Jr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,21)},set:function(e){e?this.Ff=Kr(this.Ff,21):this.Ff=Jr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,23)},set:function(e){e?this.Ff=Kr(this.Ff,23):this.Ff=Jr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,24)},set:function(e){e?this.Ff=Kr(this.Ff,24):this.Ff=Jr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,25)},set:function(e){e?this.Ff=Kr(this.Ff,25):this.Ff=Jr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,26)},set:function(e){e?this.Ff=Kr(this.Ff,26):this.Ff=Jr(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Us(nu,Qo);var gh=function(){nu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,14)},set:function(t){t?this.Ff=Kr(this.Ff,14):this.Ff=Jr(this.Ff,14)}}),this.password=!0};Us(gh,nu);var en={CheckBox:{createAppearanceStream:function(){return{N:{On:en.CheckBox.YesNormal},D:{On:en.CheckBox.YesPushDown,Off:en.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=va(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,o=t.scope.__private__.encodeColorString(t.color),a=Sd(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Sn(en.internal.getWidth(t))+" "+Sn(en.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Sn(a.fontSize)+" Tf "+o),n.push("BT"),n.push(a.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=va(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),o=[],a=en.internal.getHeight(t),u=en.internal.getWidth(t),f=Sd(t,t.caption);return o.push("1 g"),o.push("0 0 "+Sn(u)+" "+Sn(a)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+Sn(u-1)+" "+Sn(a-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+n+" "+Sn(f.fontSize)+" Tf "+r),o.push(f.text),o.push("ET"),o.push("Q"),e.stream=o.join(`
`),e},OffPushDown:function(t){var e=va(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Sn(en.internal.getWidth(t))+" "+Sn(en.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:en.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=en.RadioButton.Circle.YesNormal,e.D[t]=en.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=va(t);e.scope=t.scope;var n=[],r=en.internal.getWidth(t)<=en.internal.getHeight(t)?en.internal.getWidth(t)/4:en.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var o=en.internal.Bezier_C,a=Number((r*o).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+vl(en.internal.getWidth(t)/2)+" "+vl(en.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=va(t);e.scope=t.scope;var n=[],r=en.internal.getWidth(t)<=en.internal.getHeight(t)?en.internal.getWidth(t)/4:en.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),a=Number((o*en.internal.Bezier_C).toFixed(5)),u=Number((r*en.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+vl(en.internal.getWidth(t)/2)+" "+vl(en.internal.getHeight(t)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+a+" "+a+" "+o+" 0 "+o+" c"),n.push("-"+a+" "+o+" -"+o+" "+a+" -"+o+" 0 c"),n.push("-"+o+" -"+a+" -"+a+" -"+o+" 0 -"+o+" c"),n.push(a+" -"+o+" "+o+" -"+a+" "+o+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+vl(en.internal.getWidth(t)/2)+" "+vl(en.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+u+" "+u+" "+r+" 0 "+r+" c"),n.push("-"+u+" "+r+" -"+r+" "+u+" -"+r+" 0 c"),n.push("-"+r+" -"+u+" -"+u+" -"+r+" 0 -"+r+" c"),n.push(u+" -"+r+" "+r+" -"+u+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=va(t);e.scope=t.scope;var n=[],r=en.internal.getWidth(t)<=en.internal.getHeight(t)?en.internal.getWidth(t)/4:en.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),a=Number((o*en.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+vl(en.internal.getWidth(t)/2)+" "+vl(en.internal.getHeight(t)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+a+" "+a+" "+o+" 0 "+o+" c"),n.push("-"+a+" "+o+" -"+o+" "+a+" -"+o+" 0 c"),n.push("-"+o+" -"+a+" -"+a+" -"+o+" 0 -"+o+" c"),n.push(a+" -"+o+" "+o+" -"+a+" "+o+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:en.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=en.RadioButton.Cross.YesNormal,e.D[t]=en.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=va(t);e.scope=t.scope;var n=[],r=en.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Sn(en.internal.getWidth(t)-2)+" "+Sn(en.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Sn(r.x1.x)+" "+Sn(r.x1.y)+" m"),n.push(Sn(r.x2.x)+" "+Sn(r.x2.y)+" l"),n.push(Sn(r.x4.x)+" "+Sn(r.x4.y)+" m"),n.push(Sn(r.x3.x)+" "+Sn(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=va(t);e.scope=t.scope;var n=en.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Sn(en.internal.getWidth(t))+" "+Sn(en.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Sn(en.internal.getWidth(t)-2)+" "+Sn(en.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Sn(n.x1.x)+" "+Sn(n.x1.y)+" m"),r.push(Sn(n.x2.x)+" "+Sn(n.x2.y)+" l"),r.push(Sn(n.x4.x)+" "+Sn(n.x4.y)+" m"),r.push(Sn(n.x3.x)+" "+Sn(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=va(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Sn(en.internal.getWidth(t))+" "+Sn(en.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};en.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=en.internal.getWidth(t),n=en.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},en.internal.getWidth=function(t){var e=0;return ur(t)==="object"&&(e=sg(t.Rect[2])),e},en.internal.getHeight=function(t){var e=0;return ur(t)==="object"&&(e=sg(t.Rect[3])),e};var UL=jr.addField=function(t){if(zL(this,t),!(t instanceof Qo))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};jr.AcroFormChoiceField=Tu,jr.AcroFormListBox=Nu,jr.AcroFormComboBox=Du,jr.AcroFormEditBox=fh,jr.AcroFormButton=Mi,jr.AcroFormPushButton=dh,jr.AcroFormRadioButton=Ou,jr.AcroFormCheckBox=ph,jr.AcroFormTextField=nu,jr.AcroFormPasswordField=gh,jr.AcroFormAppearance=en,jr.AcroForm={ChoiceField:Tu,ListBox:Nu,ComboBox:Du,EditBox:fh,Button:Mi,PushButton:dh,RadioButton:Ou,CheckBox:ph,TextField:nu,PasswordField:gh,Appearance:en},yn.AcroForm={ChoiceField:Tu,ListBox:Nu,ComboBox:Du,EditBox:fh,Button:Mi,PushButton:dh,RadioButton:Ou,CheckBox:ph,TextField:nu,PasswordField:gh,Appearance:en};yn.AcroForm;function Y1(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(Z,V){var St,Et,M,$,q,O=e;if((V=V||e)==="RGBA"||Z.data!==void 0&&Z.data instanceof Uint8ClampedArray&&"height"in Z&&"width"in Z)return"RGBA";if(Nt(Z))for(q in n)for(M=n[q],St=0;St<M.length;St+=1){for($=!0,Et=0;Et<M[St].length;Et+=1)if(M[St][Et]!==void 0&&M[St][Et]!==Z[Et]){$=!1;break}if($===!0){O=q;break}}else for(q in n)for(M=n[q],St=0;St<M.length;St+=1){for($=!0,Et=0;Et<M[St].length;Et+=1)if(M[St][Et]!==void 0&&M[St][Et]!==Z.charCodeAt(Et)){$=!1;break}if($===!0){O=q;break}}return O===e&&V!==e&&(O=V),O},o=function Z(V){for(var St=this.internal.write,Et=this.internal.putStream,M=(0,this.internal.getFilters)();M.indexOf("FlateEncode")!==-1;)M.splice(M.indexOf("FlateEncode"),1);V.objectId=this.internal.newObject();var $=[];if($.push({key:"Type",value:"/XObject"}),$.push({key:"Subtype",value:"/Image"}),$.push({key:"Width",value:V.width}),$.push({key:"Height",value:V.height}),V.colorSpace===j.INDEXED?$.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(V.palette.length/3-1)+" "+("sMask"in V&&V.sMask!==void 0?V.objectId+2:V.objectId+1)+" 0 R]"}):($.push({key:"ColorSpace",value:"/"+V.colorSpace}),V.colorSpace===j.DEVICE_CMYK&&$.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),$.push({key:"BitsPerComponent",value:V.bitsPerComponent}),"decodeParameters"in V&&V.decodeParameters!==void 0&&$.push({key:"DecodeParms",value:"<<"+V.decodeParameters+">>"}),"transparency"in V&&Array.isArray(V.transparency)){for(var q="",O=0,dt=V.transparency.length;O<dt;O++)q+=V.transparency[O]+" "+V.transparency[O]+" ";$.push({key:"Mask",value:"["+q+"]"})}V.sMask!==void 0&&$.push({key:"SMask",value:V.objectId+1+" 0 R"});var gt=V.filter!==void 0?["/"+V.filter]:void 0;if(Et({data:V.data,additionalKeyValues:$,alreadyAppliedFilters:gt,objectId:V.objectId}),St("endobj"),"sMask"in V&&V.sMask!==void 0){var Y="/Predictor "+V.predictor+" /Colors 1 /BitsPerComponent "+V.bitsPerComponent+" /Columns "+V.width,A={width:V.width,height:V.height,colorSpace:"DeviceGray",bitsPerComponent:V.bitsPerComponent,decodeParameters:Y,data:V.sMask};"filter"in V&&(A.filter=V.filter),Z.call(this,A)}if(V.colorSpace===j.INDEXED){var U=this.internal.newObject();Et({data:vt(new Uint8Array(V.palette)),objectId:U}),St("endobj")}},a=function(){var Z=this.internal.collections.addImage_images;for(var V in Z)o.call(this,Z[V])},u=function(){var Z,V=this.internal.collections.addImage_images,St=this.internal.write;for(var Et in V)St("/I"+(Z=V[Et]).index,Z.objectId,"0","R")},f=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",u))},p=function(){var Z=this.internal.collections.addImage_images;return f.call(this),Z},v=function(){return Object.keys(this.internal.collections.addImage_images).length},w=function(Z){return typeof t["process"+Z.toUpperCase()]=="function"},b=function(Z){return ur(Z)==="object"&&Z.nodeType===1},S=function(Z,V){if(Z.nodeName==="IMG"&&Z.hasAttribute("src")){var St=""+Z.getAttribute("src");if(St.indexOf("data:image/")===0)return vc(unescape(St).split("base64,").pop());var Et=t.loadFile(St,!0);if(Et!==void 0)return Et}if(Z.nodeName==="CANVAS"){if(Z.width===0||Z.height===0)throw new Error("Given canvas must have data. Canvas width: "+Z.width+", height: "+Z.height);var M;switch(V){case"PNG":M="image/png";break;case"WEBP":M="image/webp";break;case"JPEG":case"JPG":default:M="image/jpeg"}return vc(Z.toDataURL(M,1).split("base64,").pop())}},x=function(Z){var V=this.internal.collections.addImage_images;if(V){for(var St in V)if(Z===V[St].alias)return V[St]}},I=function(Z,V,St){return Z||V||(Z=-96,V=-96),Z<0&&(Z=-1*St.width*72/Z/this.internal.scaleFactor),V<0&&(V=-1*St.height*72/V/this.internal.scaleFactor),Z===0&&(Z=V*St.width/St.height),V===0&&(V=Z*St.height/St.width),[Z,V]},D=function(Z,V,St,Et,M,$){var q=I.call(this,St,Et,M),O=this.internal.getCoordinateString,dt=this.internal.getVerticalCoordinateString,gt=p.call(this);if(St=q[0],Et=q[1],gt[M.index]=M,$){$*=Math.PI/180;var Y=Math.cos($),A=Math.sin($),U=function(lt){return lt.toFixed(4)},et=[U(Y),U(A),U(-1*A),U(Y),0,0,"cm"]}this.internal.write("q"),$?(this.internal.write([1,"0","0",1,O(Z),dt(V+Et),"cm"].join(" ")),this.internal.write(et.join(" ")),this.internal.write([O(St),"0","0",O(Et),"0","0","cm"].join(" "))):this.internal.write([O(St),"0","0",O(Et),O(Z),dt(V+Et),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+M.index+" Do"),this.internal.write("Q")},j=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var z=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},W=t.__addimage__.sHashCode=function(Z){var V,St,Et=0;if(typeof Z=="string")for(St=Z.length,V=0;V<St;V++)Et=(Et<<5)-Et+Z.charCodeAt(V),Et|=0;else if(Nt(Z))for(St=Z.byteLength/2,V=0;V<St;V++)Et=(Et<<5)-Et+Z[V],Et|=0;return Et},Q=t.__addimage__.validateStringAsBase64=function(Z){(Z=Z||"").toString().trim();var V=!0;return Z.length===0&&(V=!1),Z.length%4!=0&&(V=!1),/^[A-Za-z0-9+/]+$/.test(Z.substr(0,Z.length-2))===!1&&(V=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(Z.substr(-2))===!1&&(V=!1),V},mt=t.__addimage__.extractImageFromDataUrl=function(Z){var V=(Z=Z||"").split("base64,"),St=null;if(V.length===2){var Et=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(V[0]);Array.isArray(Et)&&(St={mimeType:Et[1],charset:Et[2],data:V[1]})}return St},Tt=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(Z){return Tt()&&Z instanceof ArrayBuffer};var Nt=t.__addimage__.isArrayBufferView=function(Z){return Tt()&&typeof Uint32Array<"u"&&(Z instanceof Int8Array||Z instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&Z instanceof Uint8ClampedArray||Z instanceof Int16Array||Z instanceof Uint16Array||Z instanceof Int32Array||Z instanceof Uint32Array||Z instanceof Float32Array||Z instanceof Float64Array)},Ft=t.__addimage__.binaryStringToUint8Array=function(Z){for(var V=Z.length,St=new Uint8Array(V),Et=0;Et<V;Et++)St[Et]=Z.charCodeAt(Et);return St},vt=t.__addimage__.arrayBufferToBinaryString=function(Z){for(var V="",St=Nt(Z)?Z:new Uint8Array(Z),Et=0;Et<St.length;Et+=8192)V+=String.fromCharCode.apply(null,St.subarray(Et,Et+8192));return V};t.addImage=function(){var Z,V,St,Et,M,$,q,O,dt;if(typeof arguments[1]=="number"?(V=e,St=arguments[1],Et=arguments[2],M=arguments[3],$=arguments[4],q=arguments[5],O=arguments[6],dt=arguments[7]):(V=arguments[1],St=arguments[2],Et=arguments[3],M=arguments[4],$=arguments[5],q=arguments[6],O=arguments[7],dt=arguments[8]),ur(Z=arguments[0])==="object"&&!b(Z)&&"imageData"in Z){var gt=Z;Z=gt.imageData,V=gt.format||V||e,St=gt.x||St||0,Et=gt.y||Et||0,M=gt.w||gt.width||M,$=gt.h||gt.height||$,q=gt.alias||q,O=gt.compression||O,dt=gt.rotation||gt.angle||dt}var Y=this.internal.getFilters();if(O===void 0&&Y.indexOf("FlateEncode")!==-1&&(O="SLOW"),isNaN(St)||isNaN(Et))throw new Error("Invalid coordinates passed to jsPDF.addImage");f.call(this);var A=Ct.call(this,Z,V,q,O);return D.call(this,St,Et,M,$,A,dt),this};var Ct=function(Z,V,St,Et){var M,$,q;if(typeof Z=="string"&&r(Z)===e){Z=unescape(Z);var O=Ut(Z,!1);(O!==""||(O=t.loadFile(Z,!0))!==void 0)&&(Z=O)}if(b(Z)&&(Z=S(Z,V)),V=r(Z,V),!w(V))throw new Error("addImage does not support files of type '"+V+"', please ensure that a plugin for '"+V+"' support is added.");if(((q=St)==null||q.length===0)&&(St=function(dt){return typeof dt=="string"||Nt(dt)?W(dt):Nt(dt.data)?W(dt.data):null}(Z)),(M=x.call(this,St))||(Tt()&&(Z instanceof Uint8Array||V==="RGBA"||($=Z,Z=Ft(Z))),M=this["process"+V.toUpperCase()](Z,v.call(this),St,function(dt){return dt&&typeof dt=="string"&&(dt=dt.toUpperCase()),dt in t.image_compression?dt:z.NONE}(Et),$)),!M)throw new Error("An unknown error occurred whilst processing the image.");return M},Ut=t.__addimage__.convertBase64ToBinaryString=function(Z,V){var St;V=typeof V!="boolean"||V;var Et,M="";if(typeof Z=="string"){Et=(St=mt(Z))!==null?St.data:Z;try{M=vc(Et)}catch($){if(V)throw Q(Et)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+$.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return M};t.getImageProperties=function(Z){var V,St,Et="";if(b(Z)&&(Z=S(Z)),typeof Z=="string"&&r(Z)===e&&((Et=Ut(Z,!1))===""&&(Et=t.loadFile(Z)||""),Z=Et),St=r(Z),!w(St))throw new Error("addImage does not support files of type '"+St+"', please ensure that a plugin for '"+St+"' support is added.");if(!Tt()||Z instanceof Uint8Array||(Z=Ft(Z)),!(V=this["process"+St.toUpperCase()](Z)))throw new Error("An unknown error occurred whilst processing the image");return V.fileType=St,V}})(yn.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};yn.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,o,a,u=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString,p=this.internal.getPageInfoByObjId(n.objId),v=n.pageContext.annotations,w=!1,b=0;b<v.length&&!w;b++)switch((r=v[b]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(w=!0);break;case"reference":case"text":case"freetext":w=!0}if(w!=0){this.internal.write("/Annots [");for(var S=0;S<v.length;S++){r=v[S];var x=this.internal.pdfEscape,I=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var D=this.internal.newAdditionalObject(),j=this.internal.newAdditionalObject(),z=this.internal.getEncryptor(D.objId),W=r.title||"Note";a="<</Type /Annot /Subtype /Text "+(o="/Rect ["+u(r.bounds.x)+" "+f(r.bounds.y+r.bounds.h)+" "+u(r.bounds.x+r.bounds.w)+" "+f(r.bounds.y)+"] ")+"/Contents ("+x(z(r.contents))+")",a+=" /Popup "+j.objId+" 0 R",a+=" /P "+p.objId+" 0 R",a+=" /T ("+x(z(W))+") >>",D.content=a;var Q=D.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+u(r.bounds.x+30)+" "+f(r.bounds.y+r.bounds.h)+" "+u(r.bounds.x+r.bounds.w+30)+" "+f(r.bounds.y)+"] ")+" /Parent "+Q,r.open&&(a+=" /Open true"),a+=" >>",j.content=a,this.internal.write(D.objId,"0 R",j.objId,"0 R");break;case"freetext":o="/Rect ["+u(r.bounds.x)+" "+f(r.bounds.y)+" "+u(r.bounds.x+r.bounds.w)+" "+f(r.bounds.y+r.bounds.h)+"] ";var mt=r.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+x(I(r.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+mt+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(r.options.name){var Tt=this.annotations._nameMap[r.options.name];r.options.pageNumber=Tt.page,r.options.top=Tt.y}else r.options.top||(r.options.top=0);if(o="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",a="",r.options.url)a="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+x(I(r.options.url))+") >>";else if(r.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,a+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var Nt=f(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),a+=" /XYZ "+r.options.left+" "+Nt+" "+r.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,o,a,u){var f=this.internal.getCurrentPageInfo(),p=this.internal.getCoordinateString,v=this.internal.getVerticalCoordinateString;f.pageContext.annotations.push({finalBounds:{x:p(n),y:v(r),w:p(n+o),h:v(r+a)},options:u,type:"link"})},t.textWithLink=function(n,r,o,a){var u,f,p=this.getTextWidth(n),v=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){f=a.maxWidth;var w=this.splitTextToSize(n,f).length;u=Math.ceil(v*w)}else f=p,u=v;return this.text(n,r,o,a),o+=.2*v,a.align==="center"&&(r-=p/2),a.align==="right"&&(r-=p),this.link(r,o-v,f,u,a),p},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(yn.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];t.__arabicParser__={};var a=t.__arabicParser__.isInArabicSubstitutionA=function(D){return e[D.charCodeAt(0)]!==void 0},u=t.__arabicParser__.isArabicLetter=function(D){return typeof D=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(D)},f=t.__arabicParser__.isArabicEndLetter=function(D){return u(D)&&a(D)&&e[D.charCodeAt(0)].length<=2},p=t.__arabicParser__.isArabicAlfLetter=function(D){return u(D)&&o.indexOf(D.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(D){return u(D)&&a(D)&&e[D.charCodeAt(0)].length>=1};var v=t.__arabicParser__.arabicLetterHasFinalForm=function(D){return u(D)&&a(D)&&e[D.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(D){return u(D)&&a(D)&&e[D.charCodeAt(0)].length>=3};var w=t.__arabicParser__.arabicLetterHasMedialForm=function(D){return u(D)&&a(D)&&e[D.charCodeAt(0)].length==4},b=t.__arabicParser__.resolveLigatures=function(D){var j=0,z=n,W="",Q=0;for(j=0;j<D.length;j+=1)z[D.charCodeAt(j)]!==void 0?(Q++,typeof(z=z[D.charCodeAt(j)])=="number"&&(W+=String.fromCharCode(z),z=n,Q=0),j===D.length-1&&(z=n,W+=D.charAt(j-(Q-1)),j-=Q-1,Q=0)):(z=n,W+=D.charAt(j-Q),j-=Q,Q=0);return W};t.__arabicParser__.isArabicDiacritic=function(D){return D!==void 0&&r[D.charCodeAt(0)]!==void 0};var S=t.__arabicParser__.getCorrectForm=function(D,j,z){return u(D)?a(D)===!1?-1:!v(D)||!u(j)&&!u(z)||!u(z)&&f(j)||f(D)&&!u(j)||f(D)&&p(j)||f(D)&&f(j)?0:w(D)&&u(j)&&!f(j)&&u(z)&&v(z)?3:f(D)||!u(z)?1:2:-1},x=function(D){var j=0,z=0,W=0,Q="",mt="",Tt="",Nt=(D=D||"").split("\\s+"),Ft=[];for(j=0;j<Nt.length;j+=1){for(Ft.push(""),z=0;z<Nt[j].length;z+=1)Q=Nt[j][z],mt=Nt[j][z-1],Tt=Nt[j][z+1],u(Q)?(W=S(Q,mt,Tt),Ft[j]+=W!==-1?String.fromCharCode(e[Q.charCodeAt(0)][W]):Q):Ft[j]+=Q;Ft[j]=b(Ft[j])}return Ft.join(" ")},I=t.__arabicParser__.processArabic=t.processArabic=function(){var D,j=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,z=[];if(Array.isArray(j)){var W=0;for(z=[],W=0;W<j.length;W+=1)Array.isArray(j[W])?z.push([x(j[W][0]),j[W][1],j[W][2]]):z.push([x(j[W])]);D=z}else D=x(j);return typeof arguments[0]=="string"?D:(arguments[0].text=D,arguments[0])};t.events.push(["preProcessText",I])}(yn.API),yn.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(f){n=f}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(f){r=isNaN(f)||Number.isInteger(f)===!1||f<0?150:f,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(f){o=isNaN(f)||Number.isInteger(f)===!1||f<0?300:f,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(f){a=f}});var u={};Object.defineProperty(this,"style",{get:function(){return u},set:function(f){u=f}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var o;if((n=n||"2d")!=="2d")return null;for(o in r)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=r[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(yn.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var p=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return p},set:function(D){p=D}});var v=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return v},set:function(D){v=D}});var w=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return w},set:function(D){w=D}});var b=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return b},set:function(D){b=D}});var S=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return S},set:function(D){S=D}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function(D){x=D}});var I=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return I},set:function(D){I=D}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(p){return r.call(this),this.internal.__cell__.headerFunction=typeof p=="function"?p:void 0,this},t.getTextDimensions=function(p,v){r.call(this);var w=(v=v||{}).fontSize||this.getFontSize(),b=v.font||this.getFont(),S=v.scaleFactor||this.internal.scaleFactor,x=0,I=0,D=0,j=this;if(!Array.isArray(p)&&typeof p!="string"){if(typeof p!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");p=String(p)}var z=v.maxWidth;z>0?typeof p=="string"?p=this.splitTextToSize(p,z):Object.prototype.toString.call(p)==="[object Array]"&&(p=p.reduce(function(Q,mt){return Q.concat(j.splitTextToSize(mt,z))},[])):p=Array.isArray(p)?p:[p];for(var W=0;W<p.length;W++)x<(D=this.getStringUnitWidth(p[W],{font:b})*w)&&(x=D);return x!==0&&(I=p.length),{w:x/=S,h:Math.max((I*w*this.getLineHeightFactor()-w*(this.getLineHeightFactor()-1))/S,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var p=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(p.left,p.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var u=t.cell=function(){var p;p=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var v=this.internal.__cell__.lastCell,w=this.internal.__cell__.padding,b=this.internal.__cell__.margins||e,S=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return v.lineNumber!==void 0&&(v.lineNumber===p.lineNumber?(p.x=(v.x||0)+(v.width||0),p.y=v.y||0):v.y+v.height+p.height+b.bottom>this.getPageHeight()?(this.cellAddPage(),p.y=b.top,x&&S&&(this.printHeaderRow(p.lineNumber,!0),p.y+=S[0].height)):p.y=v.y+v.height||p.y),p.text[0]!==void 0&&(this.rect(p.x,p.y,p.width,p.height,n===!0?"FD":void 0),p.align==="right"?this.text(p.text,p.x+p.width-w,p.y+w,{align:"right",baseline:"top"}):p.align==="center"?this.text(p.text,p.x+p.width/2,p.y+w,{align:"center",baseline:"top",maxWidth:p.width-w-w}):this.text(p.text,p.x+w,p.y+w,{align:"left",baseline:"top",maxWidth:p.width-w-w})),this.internal.__cell__.lastCell=p,this};t.table=function(p,v,w,b,S){if(r.call(this),!w)throw new Error("No data for PDF table.");var x,I,D,j,z=[],W=[],Q=[],mt={},Tt={},Nt=[],Ft=[],vt=(S=S||{}).autoSize||!1,Ct=S.printHeaders!==!1,Ut=S.css&&S.css["font-size"]!==void 0?16*S.css["font-size"]:S.fontSize||12,Z=S.margins||Object.assign({width:this.getPageWidth()},e),V=typeof S.padding=="number"?S.padding:3,St=S.headerBackgroundColor||"#c8c8c8",Et=S.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=Ct,this.internal.__cell__.margins=Z,this.internal.__cell__.table_font_size=Ut,this.internal.__cell__.padding=V,this.internal.__cell__.headerBackgroundColor=St,this.internal.__cell__.headerTextColor=Et,this.setFontSize(Ut),b==null)W=z=Object.keys(w[0]),Q=z.map(function(){return"left"});else if(Array.isArray(b)&&ur(b[0])==="object")for(z=b.map(function(gt){return gt.name}),W=b.map(function(gt){return gt.prompt||gt.name||""}),Q=b.map(function(gt){return gt.align||"left"}),x=0;x<b.length;x+=1)Tt[b[x].name]=b[x].width*(19.049976/25.4);else Array.isArray(b)&&typeof b[0]=="string"&&(W=z=b,Q=z.map(function(){return"left"}));if(vt||Array.isArray(b)&&typeof b[0]=="string")for(x=0;x<z.length;x+=1){for(mt[j=z[x]]=w.map(function(gt){return gt[j]}),this.setFont(void 0,"bold"),Nt.push(this.getTextDimensions(W[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),I=mt[j],this.setFont(void 0,"normal"),D=0;D<I.length;D+=1)Nt.push(this.getTextDimensions(I[D],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Tt[j]=Math.max.apply(null,Nt)+V+V,Nt=[]}if(Ct){var M={};for(x=0;x<z.length;x+=1)M[z[x]]={},M[z[x]].text=W[x],M[z[x]].align=Q[x];var $=f.call(this,M,Tt);Ft=z.map(function(gt){return new a(p,v,Tt[gt],$,M[gt].text,void 0,M[gt].align)}),this.setTableHeaderRow(Ft),this.printHeaderRow(1,!1)}var q=b.reduce(function(gt,Y){return gt[Y.name]=Y.align,gt},{});for(x=0;x<w.length;x+=1){"rowStart"in S&&S.rowStart instanceof Function&&S.rowStart({row:x,data:w[x]},this);var O=f.call(this,w[x],Tt);for(D=0;D<z.length;D+=1){var dt=w[x][z[D]];"cellStart"in S&&S.cellStart instanceof Function&&S.cellStart({row:x,col:D,data:dt},this),u.call(this,new a(p,v,Tt[z[D]],O,dt,x+2,q[z[D]]))}}return this.internal.__cell__.table_x=p,this.internal.__cell__.table_y=v,this};var f=function(p,v){var w=this.internal.__cell__.padding,b=this.internal.__cell__.table_font_size,S=this.internal.scaleFactor;return Object.keys(p).map(function(x){var I=p[x];return this.splitTextToSize(I.hasOwnProperty("text")?I.text:I,v[x]-w-w)},this).map(function(x){return this.getLineHeightFactor()*x.length*b/S+w+w},this).reduce(function(x,I){return Math.max(x,I)},0)};t.setTableHeaderRow=function(p){r.call(this),this.internal.__cell__.tableHeaderRow=p},t.printHeaderRow=function(p,v){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var w;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var b=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(b[0],b[1],b[2],b[3],void 0,-1)}this.setFont(void 0,"bold");for(var S=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){w=this.internal.__cell__.tableHeaderRow[x].clone(),v&&(w.y=this.internal.__cell__.margins.top||0,S.push(w)),w.lineNumber=p;var I=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),u.call(this,w),this.setTextColor(I)}S.length>0&&this.setTableHeaderRow(S),this.setFont(void 0,"normal"),n=!1}}(yn.API);var X1={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Q1=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ed=Y1(Q1),tv=[100,200,300,400,500,600,700,800,900],qL=Y1(tv);function Ad(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(a){return X1[a=a||"normal"]?a:"normal"}(t.style),r=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(t.weight),o=function(a){return typeof Ed[a=a||"normal"]=="number"?a:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:o,src:t.src||[],ref:t.ref||{name:e,style:[o,n,r].join(" ")}}}function og(t,e,n,r){var o;for(o=n;o>=0&&o<e.length;o+=r)if(t[e[o]])return t[e[o]];for(o=n;o>=0&&o<e.length;o-=r)if(t[e[o]])return t[e[o]]}var $L={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},ag={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function lg(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function VL(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",o=Object.assign({},$L,n.genericFontFamilies||{}),a=null,u=null,f=0;f<e.length;++f)if(o[(a=Ad(e[f])).family]&&(a.family=o[a.family]),t.hasOwnProperty(a.family)){u=t[a.family];break}if(!(u=u||t[r]))throw new Error("Could not find a font-family for the rule '"+lg(a)+"' and default family '"+r+"'.");if(u=function(p,v){if(v[p])return v[p];var w=Ed[p],b=w<=Ed.normal?-1:1,S=og(v,Q1,w,b);if(!S)throw new Error("Could not find a matching font-stretch value for "+p);return S}(a.stretch,u),u=function(p,v){if(v[p])return v[p];for(var w=X1[p],b=0;b<w.length;++b)if(v[w[b]])return v[w[b]];throw new Error("Could not find a matching font-style for "+p)}(a.style,u),!(u=function(p,v){if(v[p])return v[p];if(p===400&&v[500])return v[500];if(p===500&&v[400])return v[400];var w=qL[p],b=og(v,tv,w,p<400?-1:1);if(!b)throw new Error("Could not find a matching font-weight for value "+p);return b}(a.weight,u)))throw new Error("Failed to resolve a font for the rule '"+lg(a)+"'.");return u}function ug(t){return t.trimLeft()}function HL(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function GL(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var eh,cg,hg,Hf=["times"];(function(t){var e,n,r,o,a,u,f,p,v,w=function(A){return A=A||{},this.isStrokeTransparent=A.isStrokeTransparent||!1,this.strokeOpacity=A.strokeOpacity||1,this.strokeStyle=A.strokeStyle||"#000000",this.fillStyle=A.fillStyle||"#000000",this.isFillTransparent=A.isFillTransparent||!1,this.fillOpacity=A.fillOpacity||1,this.font=A.font||"10px sans-serif",this.textBaseline=A.textBaseline||"alphabetic",this.textAlign=A.textAlign||"left",this.lineWidth=A.lineWidth||1,this.lineJoin=A.lineJoin||"miter",this.lineCap=A.lineCap||"butt",this.path=A.path||[],this.transform=A.transform!==void 0?A.transform.clone():new p,this.globalCompositeOperation=A.globalCompositeOperation||"normal",this.globalAlpha=A.globalAlpha||1,this.clip_path=A.clip_path||[],this.currentPoint=A.currentPoint||new u,this.miterLimit=A.miterLimit||10,this.lastPoint=A.lastPoint||new u,this.lineDashOffset=A.lineDashOffset||0,this.lineDash=A.lineDash||[],this.margin=A.margin||[0,0,0,0],this.prevPageLastElemOffset=A.prevPageLastElemOffset||0,this.ignoreClearRect=typeof A.ignoreClearRect!="boolean"||A.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new b(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,u=this.internal.Point,f=this.internal.Rectangle,p=this.internal.Matrix,v=new w}]);var b=function(A){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var U=A;Object.defineProperty(this,"pdf",{get:function(){return U}});var et=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return et},set:function(wt){et=!!wt}});var lt=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return lt},set:function(wt){lt=!!wt}});var ct=0;Object.defineProperty(this,"posX",{get:function(){return ct},set:function(wt){isNaN(wt)||(ct=wt)}});var tt=0;Object.defineProperty(this,"posY",{get:function(){return tt},set:function(wt){isNaN(wt)||(tt=wt)}}),Object.defineProperty(this,"margin",{get:function(){return v.margin},set:function(wt){var K;typeof wt=="number"?K=[wt,wt,wt,wt]:((K=new Array(4))[0]=wt[0],K[1]=wt.length>=2?wt[1]:K[0],K[2]=wt.length>=3?wt[2]:K[0],K[3]=wt.length>=4?wt[3]:K[1]),v.margin=K}});var ft=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ft},set:function(wt){ft=wt}});var ht=0;Object.defineProperty(this,"lastBreak",{get:function(){return ht},set:function(wt){ht=wt}});var At=[];Object.defineProperty(this,"pageBreaks",{get:function(){return At},set:function(wt){At=wt}}),Object.defineProperty(this,"ctx",{get:function(){return v},set:function(wt){wt instanceof w&&(v=wt)}}),Object.defineProperty(this,"path",{get:function(){return v.path},set:function(wt){v.path=wt}});var jt=[];Object.defineProperty(this,"ctxStack",{get:function(){return jt},set:function(wt){jt=wt}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(wt){var K;K=S(wt),this.ctx.fillStyle=K.style,this.ctx.isFillTransparent=K.a===0,this.ctx.fillOpacity=K.a,this.pdf.setFillColor(K.r,K.g,K.b,{a:K.a}),this.pdf.setTextColor(K.r,K.g,K.b,{a:K.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(wt){var K=S(wt);this.ctx.strokeStyle=K.style,this.ctx.isStrokeTransparent=K.a===0,this.ctx.strokeOpacity=K.a,K.a===0?this.pdf.setDrawColor(255,255,255):(K.a,this.pdf.setDrawColor(K.r,K.g,K.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(wt){["butt","round","square"].indexOf(wt)!==-1&&(this.ctx.lineCap=wt,this.pdf.setLineCap(wt))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(wt){isNaN(wt)||(this.ctx.lineWidth=wt,this.pdf.setLineWidth(wt))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(wt){["bevel","round","miter"].indexOf(wt)!==-1&&(this.ctx.lineJoin=wt,this.pdf.setLineJoin(wt))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(wt){isNaN(wt)||(this.ctx.miterLimit=wt,this.pdf.setMiterLimit(wt))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(wt){this.ctx.textBaseline=wt}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(wt){["right","end","center","left","start"].indexOf(wt)!==-1&&(this.ctx.textAlign=wt)}});var H=null;function J(wt,K){if(H===null){var Ht=function(ne){var Zt=[];return Object.keys(ne).forEach(function(Dt){ne[Dt].forEach(function(Lt){var ae=null;switch(Lt){case"bold":ae={family:Dt,weight:"bold"};break;case"italic":ae={family:Dt,style:"italic"};break;case"bolditalic":ae={family:Dt,weight:"bold",style:"italic"};break;case"":case"normal":ae={family:Dt}}ae!==null&&(ae.ref={name:Dt,style:Lt},Zt.push(ae))})}),Zt}(wt.getFontList());H=function(ne){for(var Zt={},Dt=0;Dt<ne.length;++Dt){var Lt=Ad(ne[Dt]),ae=Lt.family,te=Lt.stretch,xe=Lt.style,zt=Lt.weight;Zt[ae]=Zt[ae]||{},Zt[ae][te]=Zt[ae][te]||{},Zt[ae][te][xe]=Zt[ae][te][xe]||{},Zt[ae][te][xe][zt]=Lt}return Zt}(Ht.concat(K))}return H}var yt=null;Object.defineProperty(this,"fontFaces",{get:function(){return yt},set:function(wt){H=null,yt=wt}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(wt){var K;if(this.ctx.font=wt,(K=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(wt))!==null){var Ht=K[1],ne=(K[2],K[3]),Zt=K[4],Dt=(K[5],K[6]),Lt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Zt)[2];Zt=Math.floor(Lt==="px"?parseFloat(Zt)*this.pdf.internal.scaleFactor:Lt==="em"?parseFloat(Zt)*this.pdf.getFontSize():parseFloat(Zt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Zt);var ae=function(Fe){var Xe,De,on=[],pn=Fe.trim();if(pn==="")return Hf;if(pn in ag)return[ag[pn]];for(;pn!=="";){switch(De=null,Xe=(pn=ug(pn)).charAt(0)){case'"':case"'":De=HL(pn.substring(1),Xe);break;default:De=GL(pn)}if(De===null||(on.push(De[0]),(pn=ug(De[1]))!==""&&pn.charAt(0)!==","))return Hf;pn=pn.replace(/^,/,"")}return on}(Dt);if(this.fontFaces){var te=VL(J(this.pdf,this.fontFaces),ae.map(function(Fe){return{family:Fe,stretch:"normal",weight:ne,style:Ht}}));this.pdf.setFont(te.ref.name,te.ref.style)}else{var xe="";(ne==="bold"||parseInt(ne,10)>=700||Ht==="bold")&&(xe="bold"),Ht==="italic"&&(xe+="italic"),xe.length===0&&(xe="normal");for(var zt="",pe={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},qe=0;qe<ae.length;qe++){if(this.pdf.internal.getFont(ae[qe],xe,{noFallback:!0,disableWarning:!0})!==void 0){zt=ae[qe];break}if(xe==="bolditalic"&&this.pdf.internal.getFont(ae[qe],"bold",{noFallback:!0,disableWarning:!0})!==void 0)zt=ae[qe],xe="bold";else if(this.pdf.internal.getFont(ae[qe],"normal",{noFallback:!0,disableWarning:!0})!==void 0){zt=ae[qe],xe="normal";break}}if(zt===""){for(var He=0;He<ae.length;He++)if(pe[ae[He]]){zt=pe[ae[He]];break}}zt=zt===""?"Times":zt,this.pdf.setFont(zt,xe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(wt){this.ctx.globalCompositeOperation=wt}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(wt){this.ctx.globalAlpha=wt}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(wt){this.ctx.lineDashOffset=wt,Y.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(wt){this.ctx.lineDash=wt,Y.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(wt){this.ctx.ignoreClearRect=!!wt}})};b.prototype.setLineDash=function(A){this.lineDash=A},b.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},b.prototype.fill=function(){mt.call(this,"fill",!1)},b.prototype.stroke=function(){mt.call(this,"stroke",!1)},b.prototype.beginPath=function(){this.path=[{type:"begin"}]},b.prototype.moveTo=function(A,U){if(isNaN(A)||isNaN(U))throw pr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var et=this.ctx.transform.applyToPoint(new u(A,U));this.path.push({type:"mt",x:et.x,y:et.y}),this.ctx.lastPoint=new u(A,U)},b.prototype.closePath=function(){var A=new u(0,0),U=0;for(U=this.path.length-1;U!==-1;U--)if(this.path[U].type==="begin"&&ur(this.path[U+1])==="object"&&typeof this.path[U+1].x=="number"){A=new u(this.path[U+1].x,this.path[U+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new u(A.x,A.y)},b.prototype.lineTo=function(A,U){if(isNaN(A)||isNaN(U))throw pr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var et=this.ctx.transform.applyToPoint(new u(A,U));this.path.push({type:"lt",x:et.x,y:et.y}),this.ctx.lastPoint=new u(et.x,et.y)},b.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),mt.call(this,null,!0)},b.prototype.quadraticCurveTo=function(A,U,et,lt){if(isNaN(et)||isNaN(lt)||isNaN(A)||isNaN(U))throw pr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ct=this.ctx.transform.applyToPoint(new u(et,lt)),tt=this.ctx.transform.applyToPoint(new u(A,U));this.path.push({type:"qct",x1:tt.x,y1:tt.y,x:ct.x,y:ct.y}),this.ctx.lastPoint=new u(ct.x,ct.y)},b.prototype.bezierCurveTo=function(A,U,et,lt,ct,tt){if(isNaN(ct)||isNaN(tt)||isNaN(A)||isNaN(U)||isNaN(et)||isNaN(lt))throw pr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ft=this.ctx.transform.applyToPoint(new u(ct,tt)),ht=this.ctx.transform.applyToPoint(new u(A,U)),At=this.ctx.transform.applyToPoint(new u(et,lt));this.path.push({type:"bct",x1:ht.x,y1:ht.y,x2:At.x,y2:At.y,x:ft.x,y:ft.y}),this.ctx.lastPoint=new u(ft.x,ft.y)},b.prototype.arc=function(A,U,et,lt,ct,tt){if(isNaN(A)||isNaN(U)||isNaN(et)||isNaN(lt)||isNaN(ct))throw pr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(tt=!!tt,!this.ctx.transform.isIdentity){var ft=this.ctx.transform.applyToPoint(new u(A,U));A=ft.x,U=ft.y;var ht=this.ctx.transform.applyToPoint(new u(0,et)),At=this.ctx.transform.applyToPoint(new u(0,0));et=Math.sqrt(Math.pow(ht.x-At.x,2)+Math.pow(ht.y-At.y,2))}Math.abs(ct-lt)>=2*Math.PI&&(lt=0,ct=2*Math.PI),this.path.push({type:"arc",x:A,y:U,radius:et,startAngle:lt,endAngle:ct,counterclockwise:tt})},b.prototype.arcTo=function(A,U,et,lt,ct){throw new Error("arcTo not implemented.")},b.prototype.rect=function(A,U,et,lt){if(isNaN(A)||isNaN(U)||isNaN(et)||isNaN(lt))throw pr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(A,U),this.lineTo(A+et,U),this.lineTo(A+et,U+lt),this.lineTo(A,U+lt),this.lineTo(A,U),this.lineTo(A+et,U),this.lineTo(A,U)},b.prototype.fillRect=function(A,U,et,lt){if(isNaN(A)||isNaN(U)||isNaN(et)||isNaN(lt))throw pr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var ct={};this.lineCap!=="butt"&&(ct.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ct.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(A,U,et,lt),this.fill(),ct.hasOwnProperty("lineCap")&&(this.lineCap=ct.lineCap),ct.hasOwnProperty("lineJoin")&&(this.lineJoin=ct.lineJoin)}},b.prototype.strokeRect=function(A,U,et,lt){if(isNaN(A)||isNaN(U)||isNaN(et)||isNaN(lt))throw pr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");I.call(this)||(this.beginPath(),this.rect(A,U,et,lt),this.stroke())},b.prototype.clearRect=function(A,U,et,lt){if(isNaN(A)||isNaN(U)||isNaN(et)||isNaN(lt))throw pr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(A,U,et,lt))},b.prototype.save=function(A){A=typeof A!="boolean"||A;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,et=0;et<this.pdf.internal.getNumberOfPages();et++)this.pdf.setPage(et+1),this.pdf.internal.out("q");if(this.pdf.setPage(U),A){this.ctx.fontSize=this.pdf.internal.getFontSize();var lt=new w(this.ctx);this.ctxStack.push(this.ctx),this.ctx=lt}},b.prototype.restore=function(A){A=typeof A!="boolean"||A;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,et=0;et<this.pdf.internal.getNumberOfPages();et++)this.pdf.setPage(et+1),this.pdf.internal.out("Q");this.pdf.setPage(U),A&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},b.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var S=function(A){var U,et,lt,ct;if(A.isCanvasGradient===!0&&(A=A.getColor()),!A)return{r:0,g:0,b:0,a:0,style:A};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(A))U=0,et=0,lt=0,ct=0;else{var tt=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(A);if(tt!==null)U=parseInt(tt[1]),et=parseInt(tt[2]),lt=parseInt(tt[3]),ct=1;else if((tt=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(A))!==null)U=parseInt(tt[1]),et=parseInt(tt[2]),lt=parseInt(tt[3]),ct=parseFloat(tt[4]);else{if(ct=1,typeof A=="string"&&A.charAt(0)!=="#"){var ft=new H1(A);A=ft.ok?ft.toHex():"#000000"}A.length===4?(U=A.substring(1,2),U+=U,et=A.substring(2,3),et+=et,lt=A.substring(3,4),lt+=lt):(U=A.substring(1,3),et=A.substring(3,5),lt=A.substring(5,7)),U=parseInt(U,16),et=parseInt(et,16),lt=parseInt(lt,16)}}return{r:U,g:et,b:lt,a:ct,style:A}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},I=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};b.prototype.fillText=function(A,U,et,lt){if(isNaN(U)||isNaN(et)||typeof A!="string")throw pr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(lt=isNaN(lt)?void 0:lt,!x.call(this)){var ct=O(this.ctx.transform.rotation),tt=this.ctx.transform.scaleX;V.call(this,{text:A,x:U,y:et,scale:tt,angle:ct,align:this.textAlign,maxWidth:lt})}},b.prototype.strokeText=function(A,U,et,lt){if(isNaN(U)||isNaN(et)||typeof A!="string")throw pr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!I.call(this)){lt=isNaN(lt)?void 0:lt;var ct=O(this.ctx.transform.rotation),tt=this.ctx.transform.scaleX;V.call(this,{text:A,x:U,y:et,scale:tt,renderingMode:"stroke",angle:ct,align:this.textAlign,maxWidth:lt})}},b.prototype.measureText=function(A){if(typeof A!="string")throw pr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var U=this.pdf,et=this.pdf.internal.scaleFactor,lt=U.internal.getFontSize(),ct=U.getStringUnitWidth(A)*lt/U.internal.scaleFactor,tt=function(ft){var ht=(ft=ft||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ht}}),this};return new tt({width:ct*=Math.round(96*et/72*1e4)/1e4})},b.prototype.scale=function(A,U){if(isNaN(A)||isNaN(U))throw pr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var et=new p(A,0,0,U,0,0);this.ctx.transform=this.ctx.transform.multiply(et)},b.prototype.rotate=function(A){if(isNaN(A))throw pr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var U=new p(Math.cos(A),Math.sin(A),-Math.sin(A),Math.cos(A),0,0);this.ctx.transform=this.ctx.transform.multiply(U)},b.prototype.translate=function(A,U){if(isNaN(A)||isNaN(U))throw pr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var et=new p(1,0,0,1,A,U);this.ctx.transform=this.ctx.transform.multiply(et)},b.prototype.transform=function(A,U,et,lt,ct,tt){if(isNaN(A)||isNaN(U)||isNaN(et)||isNaN(lt)||isNaN(ct)||isNaN(tt))throw pr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ft=new p(A,U,et,lt,ct,tt);this.ctx.transform=this.ctx.transform.multiply(ft)},b.prototype.setTransform=function(A,U,et,lt,ct,tt){A=isNaN(A)?1:A,U=isNaN(U)?0:U,et=isNaN(et)?0:et,lt=isNaN(lt)?1:lt,ct=isNaN(ct)?0:ct,tt=isNaN(tt)?0:tt,this.ctx.transform=new p(A,U,et,lt,ct,tt)};var D=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};b.prototype.drawImage=function(A,U,et,lt,ct,tt,ft,ht,At){var jt=this.pdf.getImageProperties(A),H=1,J=1,yt=1,wt=1;lt!==void 0&&ht!==void 0&&(yt=ht/lt,wt=At/ct,H=jt.width/lt*ht/lt,J=jt.height/ct*At/ct),tt===void 0&&(tt=U,ft=et,U=0,et=0),lt!==void 0&&ht===void 0&&(ht=lt,At=ct),lt===void 0&&ht===void 0&&(ht=jt.width,At=jt.height);for(var K,Ht=this.ctx.transform.decompose(),ne=O(Ht.rotate.shx),Zt=new p,Dt=(Zt=(Zt=(Zt=Zt.multiply(Ht.translate)).multiply(Ht.skew)).multiply(Ht.scale)).applyToRectangle(new f(tt-U*yt,ft-et*wt,lt*H,ct*J)),Lt=j.call(this,Dt),ae=[],te=0;te<Lt.length;te+=1)ae.indexOf(Lt[te])===-1&&ae.push(Lt[te]);if(Q(ae),this.autoPaging)for(var xe=ae[0],zt=ae[ae.length-1],pe=xe;pe<zt+1;pe++){this.pdf.setPage(pe);var qe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],He=pe===1?this.posY+this.margin[0]:this.margin[0],Fe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Xe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],De=pe===1?0:Fe+(pe-2)*Xe;if(this.ctx.clip_path.length!==0){var on=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=W(K,this.posX+this.margin[3],-De+He+this.ctx.prevPageLastElemOffset),Tt.call(this,"fill",!0),this.path=on}var pn=JSON.parse(JSON.stringify(Dt));pn=W([pn],this.posX+this.margin[3],-De+He+this.ctx.prevPageLastElemOffset)[0];var cr=(pe>xe||pe<zt)&&D.call(this);cr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],qe,Xe,null).clip().discardPath()),this.pdf.addImage(A,"JPEG",pn.x,pn.y,pn.w,pn.h,null,null,ne),cr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(A,"JPEG",Dt.x,Dt.y,Dt.w,Dt.h,null,null,ne)};var j=function(A,U,et){var lt=[];U=U||this.pdf.internal.pageSize.width,et=et||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ct=this.posY+this.ctx.prevPageLastElemOffset;switch(A.type){default:case"mt":case"lt":lt.push(Math.floor((A.y+ct)/et)+1);break;case"arc":lt.push(Math.floor((A.y+ct-A.radius)/et)+1),lt.push(Math.floor((A.y+ct+A.radius)/et)+1);break;case"qct":var tt=dt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,A.x1,A.y1,A.x,A.y);lt.push(Math.floor((tt.y+ct)/et)+1),lt.push(Math.floor((tt.y+tt.h+ct)/et)+1);break;case"bct":var ft=gt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,A.x1,A.y1,A.x2,A.y2,A.x,A.y);lt.push(Math.floor((ft.y+ct)/et)+1),lt.push(Math.floor((ft.y+ft.h+ct)/et)+1);break;case"rect":lt.push(Math.floor((A.y+ct)/et)+1),lt.push(Math.floor((A.y+A.h+ct)/et)+1)}for(var ht=0;ht<lt.length;ht+=1)for(;this.pdf.internal.getNumberOfPages()<lt[ht];)z.call(this);return lt},z=function(){var A=this.fillStyle,U=this.strokeStyle,et=this.font,lt=this.lineCap,ct=this.lineWidth,tt=this.lineJoin;this.pdf.addPage(),this.fillStyle=A,this.strokeStyle=U,this.font=et,this.lineCap=lt,this.lineWidth=ct,this.lineJoin=tt},W=function(A,U,et){for(var lt=0;lt<A.length;lt++)switch(A[lt].type){case"bct":A[lt].x2+=U,A[lt].y2+=et;case"qct":A[lt].x1+=U,A[lt].y1+=et;case"mt":case"lt":case"arc":default:A[lt].x+=U,A[lt].y+=et}return A},Q=function(A){return A.sort(function(U,et){return U-et})},mt=function(A,U){for(var et,lt,ct=this.fillStyle,tt=this.strokeStyle,ft=this.lineCap,ht=this.lineWidth,At=Math.abs(ht*this.ctx.transform.scaleX),jt=this.lineJoin,H=JSON.parse(JSON.stringify(this.path)),J=JSON.parse(JSON.stringify(this.path)),yt=[],wt=0;wt<J.length;wt++)if(J[wt].x!==void 0)for(var K=j.call(this,J[wt]),Ht=0;Ht<K.length;Ht+=1)yt.indexOf(K[Ht])===-1&&yt.push(K[Ht]);for(var ne=0;ne<yt.length;ne++)for(;this.pdf.internal.getNumberOfPages()<yt[ne];)z.call(this);if(Q(yt),this.autoPaging)for(var Zt=yt[0],Dt=yt[yt.length-1],Lt=Zt;Lt<Dt+1;Lt++){this.pdf.setPage(Lt),this.fillStyle=ct,this.strokeStyle=tt,this.lineCap=ft,this.lineWidth=At,this.lineJoin=jt;var ae=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],te=Lt===1?this.posY+this.margin[0]:this.margin[0],xe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],zt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pe=Lt===1?0:xe+(Lt-2)*zt;if(this.ctx.clip_path.length!==0){var qe=this.path;et=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=W(et,this.posX+this.margin[3],-pe+te+this.ctx.prevPageLastElemOffset),Tt.call(this,A,!0),this.path=qe}if(lt=JSON.parse(JSON.stringify(H)),this.path=W(lt,this.posX+this.margin[3],-pe+te+this.ctx.prevPageLastElemOffset),U===!1||Lt===0){var He=(Lt>Zt||Lt<Dt)&&D.call(this);He&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ae,zt,null).clip().discardPath()),Tt.call(this,A,U),He&&this.pdf.restoreGraphicsState()}this.lineWidth=ht}else this.lineWidth=At,Tt.call(this,A,U),this.lineWidth=ht;this.path=H},Tt=function(A,U){if((A!=="stroke"||U||!I.call(this))&&(A==="stroke"||U||!x.call(this))){for(var et,lt,ct=[],tt=this.path,ft=0;ft<tt.length;ft++){var ht=tt[ft];switch(ht.type){case"begin":ct.push({begin:!0});break;case"close":ct.push({close:!0});break;case"mt":ct.push({start:ht,deltas:[],abs:[]});break;case"lt":var At=ct.length;if(tt[ft-1]&&!isNaN(tt[ft-1].x)&&(et=[ht.x-tt[ft-1].x,ht.y-tt[ft-1].y],At>0)){for(;At>=0;At--)if(ct[At-1].close!==!0&&ct[At-1].begin!==!0){ct[At-1].deltas.push(et),ct[At-1].abs.push(ht);break}}break;case"bct":et=[ht.x1-tt[ft-1].x,ht.y1-tt[ft-1].y,ht.x2-tt[ft-1].x,ht.y2-tt[ft-1].y,ht.x-tt[ft-1].x,ht.y-tt[ft-1].y],ct[ct.length-1].deltas.push(et);break;case"qct":var jt=tt[ft-1].x+2/3*(ht.x1-tt[ft-1].x),H=tt[ft-1].y+2/3*(ht.y1-tt[ft-1].y),J=ht.x+2/3*(ht.x1-ht.x),yt=ht.y+2/3*(ht.y1-ht.y),wt=ht.x,K=ht.y;et=[jt-tt[ft-1].x,H-tt[ft-1].y,J-tt[ft-1].x,yt-tt[ft-1].y,wt-tt[ft-1].x,K-tt[ft-1].y],ct[ct.length-1].deltas.push(et);break;case"arc":ct.push({deltas:[],abs:[],arc:!0}),Array.isArray(ct[ct.length-1].abs)&&ct[ct.length-1].abs.push(ht)}}lt=U?null:A==="stroke"?"stroke":"fill";for(var Ht=!1,ne=0;ne<ct.length;ne++)if(ct[ne].arc)for(var Zt=ct[ne].abs,Dt=0;Dt<Zt.length;Dt++){var Lt=Zt[Dt];Lt.type==="arc"?vt.call(this,Lt.x,Lt.y,Lt.radius,Lt.startAngle,Lt.endAngle,Lt.counterclockwise,void 0,U,!Ht):St.call(this,Lt.x,Lt.y),Ht=!0}else if(ct[ne].close===!0)this.pdf.internal.out("h"),Ht=!1;else if(ct[ne].begin!==!0){var ae=ct[ne].start.x,te=ct[ne].start.y;Et.call(this,ct[ne].deltas,ae,te),Ht=!0}lt&&Ct.call(this,lt),U&&Ut.call(this)}},Nt=function(A){var U=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,et=U*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return A-et;case"top":return A+U-et;case"hanging":return A+U-2*et;case"middle":return A+U/2-et;case"ideographic":return A;case"alphabetic":default:return A}},Ft=function(A){return A+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};b.prototype.createLinearGradient=function(){var A=function(){};return A.colorStops=[],A.addColorStop=function(U,et){this.colorStops.push([U,et])},A.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},A.isCanvasGradient=!0,A},b.prototype.createPattern=function(){return this.createLinearGradient()},b.prototype.createRadialGradient=function(){return this.createLinearGradient()};var vt=function(A,U,et,lt,ct,tt,ft,ht,At){for(var jt=$.call(this,et,lt,ct,tt),H=0;H<jt.length;H++){var J=jt[H];H===0&&(At?Z.call(this,J.x1+A,J.y1+U):St.call(this,J.x1+A,J.y1+U)),M.call(this,A,U,J.x2,J.y2,J.x3,J.y3,J.x4,J.y4)}ht?Ut.call(this):Ct.call(this,ft)},Ct=function(A){switch(A){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Ut=function(){this.pdf.clip(),this.pdf.discardPath()},Z=function(A,U){this.pdf.internal.out(n(A)+" "+r(U)+" m")},V=function(A){var U;switch(A.align){case"right":case"end":U="right";break;case"center":U="center";break;case"left":case"start":default:U="left"}var et=this.pdf.getTextDimensions(A.text),lt=Nt.call(this,A.y),ct=Ft.call(this,lt)-et.h,tt=this.ctx.transform.applyToPoint(new u(A.x,lt)),ft=this.ctx.transform.decompose(),ht=new p;ht=(ht=(ht=ht.multiply(ft.translate)).multiply(ft.skew)).multiply(ft.scale);for(var At,jt,H,J=this.ctx.transform.applyToRectangle(new f(A.x,lt,et.w,et.h)),yt=ht.applyToRectangle(new f(A.x,ct,et.w,et.h)),wt=j.call(this,yt),K=[],Ht=0;Ht<wt.length;Ht+=1)K.indexOf(wt[Ht])===-1&&K.push(wt[Ht]);if(Q(K),this.autoPaging)for(var ne=K[0],Zt=K[K.length-1],Dt=ne;Dt<Zt+1;Dt++){this.pdf.setPage(Dt);var Lt=Dt===1?this.posY+this.margin[0]:this.margin[0],ae=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],te=this.pdf.internal.pageSize.height-this.margin[2],xe=te-this.margin[0],zt=this.pdf.internal.pageSize.width-this.margin[1],pe=zt-this.margin[3],qe=Dt===1?0:ae+(Dt-2)*xe;if(this.ctx.clip_path.length!==0){var He=this.path;At=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=W(At,this.posX+this.margin[3],-1*qe+Lt),Tt.call(this,"fill",!0),this.path=He}var Fe=W([JSON.parse(JSON.stringify(yt))],this.posX+this.margin[3],-qe+Lt+this.ctx.prevPageLastElemOffset)[0];A.scale>=.01&&(jt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(jt*A.scale),H=this.lineWidth,this.lineWidth=H*A.scale);var Xe=this.autoPaging!=="text";if(Xe||Fe.y+Fe.h<=te){if(Xe||Fe.y>=Lt&&Fe.x<=zt){var De=Xe?A.text:this.pdf.splitTextToSize(A.text,A.maxWidth||zt-Fe.x)[0],on=W([JSON.parse(JSON.stringify(J))],this.posX+this.margin[3],-qe+Lt+this.ctx.prevPageLastElemOffset)[0],pn=Xe&&(Dt>ne||Dt<Zt)&&D.call(this);pn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pe,xe,null).clip().discardPath()),this.pdf.text(De,on.x,on.y,{angle:A.angle,align:U,renderingMode:A.renderingMode}),pn&&this.pdf.restoreGraphicsState()}}else Fe.y<te&&(this.ctx.prevPageLastElemOffset+=te-Fe.y);A.scale>=.01&&(this.pdf.setFontSize(jt),this.lineWidth=H)}else A.scale>=.01&&(jt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(jt*A.scale),H=this.lineWidth,this.lineWidth=H*A.scale),this.pdf.text(A.text,tt.x+this.posX,tt.y+this.posY,{angle:A.angle,align:U,renderingMode:A.renderingMode,maxWidth:A.maxWidth}),A.scale>=.01&&(this.pdf.setFontSize(jt),this.lineWidth=H)},St=function(A,U,et,lt){et=et||0,lt=lt||0,this.pdf.internal.out(n(A+et)+" "+r(U+lt)+" l")},Et=function(A,U,et){return this.pdf.lines(A,U,et,null,null)},M=function(A,U,et,lt,ct,tt,ft,ht){this.pdf.internal.out([e(o(et+A)),e(a(lt+U)),e(o(ct+A)),e(a(tt+U)),e(o(ft+A)),e(a(ht+U)),"c"].join(" "))},$=function(A,U,et,lt){for(var ct=2*Math.PI,tt=Math.PI/2;U>et;)U-=ct;var ft=Math.abs(et-U);ft<ct&&lt&&(ft=ct-ft);for(var ht=[],At=lt?-1:1,jt=U;ft>1e-5;){var H=jt+At*Math.min(ft,tt);ht.push(q.call(this,A,jt,H)),ft-=Math.abs(H-jt),jt=H}return ht},q=function(A,U,et){var lt=(et-U)/2,ct=A*Math.cos(lt),tt=A*Math.sin(lt),ft=ct,ht=-tt,At=ft*ft+ht*ht,jt=At+ft*ct+ht*tt,H=4/3*(Math.sqrt(2*At*jt)-jt)/(ft*tt-ht*ct),J=ft-H*ht,yt=ht+H*ft,wt=J,K=-yt,Ht=lt+U,ne=Math.cos(Ht),Zt=Math.sin(Ht);return{x1:A*Math.cos(U),y1:A*Math.sin(U),x2:J*ne-yt*Zt,y2:J*Zt+yt*ne,x3:wt*ne-K*Zt,y3:wt*Zt+K*ne,x4:A*Math.cos(et),y4:A*Math.sin(et)}},O=function(A){return 180*A/Math.PI},dt=function(A,U,et,lt,ct,tt){var ft=A+.5*(et-A),ht=U+.5*(lt-U),At=ct+.5*(et-ct),jt=tt+.5*(lt-tt),H=Math.min(A,ct,ft,At),J=Math.max(A,ct,ft,At),yt=Math.min(U,tt,ht,jt),wt=Math.max(U,tt,ht,jt);return new f(H,yt,J-H,wt-yt)},gt=function(A,U,et,lt,ct,tt,ft,ht){var At,jt,H,J,yt,wt,K,Ht,ne,Zt,Dt,Lt,ae,te,xe=et-A,zt=lt-U,pe=ct-et,qe=tt-lt,He=ft-ct,Fe=ht-tt;for(jt=0;jt<41;jt++)ne=(K=(H=A+(At=jt/40)*xe)+At*((yt=et+At*pe)-H))+At*(yt+At*(ct+At*He-yt)-K),Zt=(Ht=(J=U+At*zt)+At*((wt=lt+At*qe)-J))+At*(wt+At*(tt+At*Fe-wt)-Ht),jt==0?(Dt=ne,Lt=Zt,ae=ne,te=Zt):(Dt=Math.min(Dt,ne),Lt=Math.min(Lt,Zt),ae=Math.max(ae,ne),te=Math.max(te,Zt));return new f(Math.round(Dt),Math.round(Lt),Math.round(ae-Dt),Math.round(te-Lt))},Y=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var A,U,et=(A=this.ctx.lineDash,U=this.ctx.lineDashOffset,JSON.stringify({lineDash:A,lineDashOffset:U}));this.prevLineDash!==et&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=et)}}})(yn.API),function(t){var e=function(a){var u,f,p,v,w,b,S,x,I,D;for(f=[],p=0,v=(a+=u="\0\0\0\0".slice(a.length%4||4)).length;v>p;p+=4)(w=(a.charCodeAt(p)<<24)+(a.charCodeAt(p+1)<<16)+(a.charCodeAt(p+2)<<8)+a.charCodeAt(p+3))!==0?(b=(w=((w=((w=((w=(w-(D=w%85))/85)-(I=w%85))/85)-(x=w%85))/85)-(S=w%85))/85)%85,f.push(b+33,S+33,x+33,I+33,D+33)):f.push(122);return function(j,z){for(var W=z;W>0;W--)j.pop()}(f,u.length),String.fromCharCode.apply(String,f)+"~>"},n=function(a){var u,f,p,v,w,b=String,S="length",x=255,I="charCodeAt",D="slice",j="replace";for(a[D](-2),a=a[D](0,-2)[j](/\s/g,"")[j]("z","!!!!!"),p=[],v=0,w=(a+=u="uuuuu"[D](a[S]%5||5))[S];w>v;v+=5)f=52200625*(a[I](v)-33)+614125*(a[I](v+1)-33)+7225*(a[I](v+2)-33)+85*(a[I](v+3)-33)+(a[I](v+4)-33),p.push(x&f>>24,x&f>>16,x&f>>8,x&f);return function(z,W){for(var Q=W;Q>0;Q--)z.pop()}(p,u[S]),b.fromCharCode.apply(b,p)},r=function(a){var u=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),u.test(a)===!1)return"";for(var f="",p=0;p<a.length;p+=2)f+=String.fromCharCode("0x"+(a[p]+a[p+1]));return f},o=function(a){for(var u=new Uint8Array(a.length),f=a.length;f--;)u[f]=a.charCodeAt(f);return a=(u=Ld(u)).reduce(function(p,v){return p+String.fromCharCode(v)},"")};t.processDataByFilters=function(a,u){var f=0,p=a||"",v=[];for(typeof(u=u||[])=="string"&&(u=[u]),f=0;f<u.length;f+=1)switch(u[f]){case"ASCII85Decode":case"/ASCII85Decode":p=n(p),v.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":p=e(p),v.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":p=r(p),v.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":p=p.split("").map(function(w){return("0"+w.charCodeAt().toString(16)).slice(-2)}).join("")+">",v.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":p=o(p),v.push("/FlateDecode");break;default:throw new Error('The filter: "'+u[f]+'" is not implemented')}return{data:p,reverseChain:v.reverse().join(" ")}}}(yn.API),function(t){t.loadFile=function(e,n,r){return function(o,a,u){a=a!==!1,u=typeof u=="function"?u:function(){};var f=void 0;try{f=function(p,v,w){var b=new XMLHttpRequest,S=0,x=function(I){var D=I.length,j=[],z=String.fromCharCode;for(S=0;S<D;S+=1)j.push(z(255&I.charCodeAt(S)));return j.join("")};if(b.open("GET",p,!v),b.overrideMimeType("text/plain; charset=x-user-defined"),v===!1&&(b.onload=function(){b.status===200?w(x(this.responseText)):w(void 0)}),b.send(null),v&&b.status===200)return x(b.responseText)}(o,a,u)}catch{}return f}(e,n,r)},t.loadImageFile=t.loadFile}(yn.API),function(t){function e(){return(wn.html2canvas?Promise.resolve(wn.html2canvas):Yl(()=>import("./html2canvas.esm.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load html2canvas: "+u))}).then(function(u){return u.default?u.default:u})}function n(){return(wn.DOMPurify?Promise.resolve(wn.DOMPurify):Yl(()=>import("./purify.es.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load dompurify: "+u))}).then(function(u){return u.default?u.default:u})}var r=function(u){var f=ur(u);return f==="undefined"?"undefined":f==="string"||u instanceof String?"string":f==="number"||u instanceof Number?"number":f==="function"||u instanceof Function?"function":u&&u.constructor===Array?"array":u&&u.nodeType===1?"element":f==="object"?"object":"unknown"},o=function(u,f){var p=document.createElement(u);for(var v in f.className&&(p.className=f.className),f.innerHTML&&f.dompurify&&(p.innerHTML=f.dompurify.sanitize(f.innerHTML)),f.style)p.style[v]=f.style[v];return p},a=function u(f){var p=Object.assign(u.convert(Promise.resolve()),JSON.parse(JSON.stringify(u.template))),v=u.convert(Promise.resolve(),p);return v=(v=v.setProgress(1,u,1,[u])).set(f)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(u,f){return u.__proto__=f||a.prototype,u},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(u,f){return this.then(function(){switch(f=f||function(p){switch(r(p)){case"string":return"string";case"element":return p.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(u)){case"string":return this.then(n).then(function(p){return this.set({src:o("div",{innerHTML:u,dompurify:p})})});case"element":return this.set({src:u});case"canvas":return this.set({canvas:u});case"img":return this.set({img:u});default:return this.error("Unknown source type.")}})},a.prototype.to=function(u){switch(u){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var u={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},f=function p(v,w){for(var b=v.nodeType===3?document.createTextNode(v.nodeValue):v.cloneNode(!1),S=v.firstChild;S;S=S.nextSibling)w!==!0&&S.nodeType===1&&S.nodeName==="SCRIPT"||b.appendChild(p(S,w));return v.nodeType===1&&(v.nodeName==="CANVAS"?(b.width=v.width,b.height=v.height,b.getContext("2d").drawImage(v,0,0)):v.nodeName!=="TEXTAREA"&&v.nodeName!=="SELECT"||(b.value=v.value),b.addEventListener("load",function(){b.scrollTop=v.scrollTop,b.scrollLeft=v.scrollLeft},!0)),b}(this.prop.src,this.opt.html2canvas.javascriptEnabled);f.tagName==="BODY"&&(u.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:u}),this.prop.container.appendChild(f),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(e).then(function(f){var p=Object.assign({},this.opt.html2canvas);return delete p.onrendered,f(this.prop.container,p)}).then(function(f){(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(e).then(function(f){var p=this.opt.jsPDF,v=this.opt.fontFaces,w=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,b=Object.assign({async:!0,allowTaint:!0,scale:w,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete b.onrendered,p.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,p.context2d.posX=this.opt.x,p.context2d.posY=this.opt.y,p.context2d.margin=this.opt.margin,p.context2d.fontFaces=v,v)for(var S=0;S<v.length;++S){var x=v[S],I=x.src.find(function(D){return D.format==="truetype"});I&&p.addFont(I.url,x.ref.name,x.ref.style)}return b.windowHeight=b.windowHeight||0,b.windowHeight=b.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):b.windowHeight,p.context2d.save(!0),f(this.prop.container,b)}).then(function(f){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var u=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=u})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(u,f,p){return(p=p||"pdf").toLowerCase()==="img"||p.toLowerCase()==="image"?this.outputImg(u,f):this.outputPdf(u,f)},a.prototype.outputPdf=function(u,f){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(u,f)})},a.prototype.outputImg=function(u){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(u){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+u+'" is not supported.'}})},a.prototype.save=function(u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(u?{filename:u}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(u){if(r(u)!=="object")return this;var f=Object.keys(u||{}).map(function(p){if(p in a.template.prop)return function(){this.prop[p]=u[p]};switch(p){case"margin":return this.setMargin.bind(this,u.margin);case"jsPDF":return function(){return this.opt.jsPDF=u.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,u.pageSize);default:return function(){this.opt[p]=u[p]}}},this);return this.then(function(){return this.thenList(f)})},a.prototype.get=function(u,f){return this.then(function(){var p=u in a.template.prop?this.prop[u]:this.opt[u];return f?f(p):p})},a.prototype.setMargin=function(u){return this.then(function(){switch(r(u)){case"number":u=[u,u,u,u];case"array":if(u.length===2&&(u=[u[0],u[1],u[0],u[1]]),u.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=u}).then(this.setPageSize)},a.prototype.setPageSize=function(u){function f(p,v){return Math.floor(p*v/72*96)}return this.then(function(){(u=u||yn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(u.inner={width:u.width-this.opt.margin[1]-this.opt.margin[3],height:u.height-this.opt.margin[0]-this.opt.margin[2]},u.inner.px={width:f(u.inner.width,u.k),height:f(u.inner.height,u.k)},u.inner.ratio=u.inner.height/u.inner.width),this.prop.pageSize=u})},a.prototype.setProgress=function(u,f,p,v){return u!=null&&(this.progress.val=u),f!=null&&(this.progress.state=f),p!=null&&(this.progress.n=p),v!=null&&(this.progress.stack=v),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(u,f,p,v){return this.setProgress(u?this.progress.val+u:null,f||null,p?this.progress.n+p:null,v?this.progress.stack.concat(v):null)},a.prototype.then=function(u,f){var p=this;return this.thenCore(u,f,function(v,w){return p.updateProgress(null,null,1,[v]),Promise.prototype.then.call(this,function(b){return p.updateProgress(null,v),b}).then(v,w).then(function(b){return p.updateProgress(1),b})})},a.prototype.thenCore=function(u,f,p){p=p||Promise.prototype.then,u&&(u=u.bind(this)),f&&(f=f.bind(this));var v=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),w=p.call(v,u,f);return a.convert(w,this.__proto__)},a.prototype.thenExternal=function(u,f){return Promise.prototype.then.call(this,u,f)},a.prototype.thenList=function(u){var f=this;return u.forEach(function(p){f=f.thenCore(p)}),f},a.prototype.catch=function(u){u&&(u=u.bind(this));var f=Promise.prototype.catch.call(this,u);return a.convert(f,this)},a.prototype.catchExternal=function(u){return Promise.prototype.catch.call(this,u)},a.prototype.error=function(u){return this.then(function(){throw new Error(u)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,yn.getPageSize=function(u,f,p){if(ur(u)==="object"){var v=u;u=v.orientation,f=v.unit||f,p=v.format||p}f=f||"mm",p=p||"a4",u=(""+(u||"P")).toLowerCase();var w,b=(""+p).toLowerCase(),S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(f){case"pt":w=1;break;case"mm":w=72/25.4;break;case"cm":w=72/2.54;break;case"in":w=72;break;case"px":w=.75;break;case"pc":case"em":w=12;break;case"ex":w=6;break;default:throw"Invalid unit: "+f}var x,I=0,D=0;if(S.hasOwnProperty(b))I=S[b][1]/w,D=S[b][0]/w;else try{I=p[1],D=p[0]}catch{throw new Error("Invalid format: "+p)}if(u==="p"||u==="portrait")u="p",D>I&&(x=D,D=I,I=x);else{if(u!=="l"&&u!=="landscape")throw"Invalid orientation: "+u;u="l",I>D&&(x=D,D=I,I=x)}return{width:D,height:I,unit:f,k:w,orientation:u}},t.html=function(u,f){(f=f||{}).callback=f.callback||function(){},f.html2canvas=f.html2canvas||{},f.html2canvas.canvas=f.html2canvas.canvas||this.canvas,f.jsPDF=f.jsPDF||this,f.fontFaces=f.fontFaces?f.fontFaces.map(Ad):null;var p=new a(f);return f.worker?p:p.from(u).doCallback()}}(yn.API),yn.API.addJS=function(t){return hg=t,this.internal.events.subscribe("postPutResources",function(){eh=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(eh+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),cg=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+hg+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){eh!==void 0&&cg!==void 0&&this.internal.out("/Names <</JavaScript "+eh+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=n.outline.render().split(/\r\n/),a=0;a<o.length;a++){var u=o[a],f=r.exec(u);if(f!=null){var p=f[1];n.internal.newObjectDeferredBegin(p,!1)}n.internal.write(u)}if(this.outline.createNamedDestinations){var v=this.internal.pages.length,w=[];for(a=0;a<v;a++){var b=n.internal.newObject();w.push(b);var S=n.internal.getPageInfo(a+1);n.internal.write("<< /D["+S.objId+" 0 R /XYZ null null null]>> endobj")}var x=n.internal.newObject();for(n.internal.write("<< /Names [ "),a=0;a<w.length;a++)n.internal.write("(page_"+(a+1)+")"+w[a]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+x+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,o,a){var u={title:o,options:a,children:[]};return r==null&&(r=this.root),r.children.push(u),u},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var o=0;o<r.children.length;o++)this.genIds_r(r.children[o])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<r.children.length;a++){var u=r.children[a];this.objStart(u),this.line("/Title "+this.makeString(u.title)),this.line("/Parent "+this.makeRef(r)),a>0&&this.line("/Prev "+this.makeRef(r.children[a-1])),a<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[a+1])),u.children.length>0&&(this.line("/First "+this.makeRef(u.children[0])),this.line("/Last "+this.makeRef(u.children[u.children.length-1])));var f=this.count=this.count_r({count:0},u);if(f>0&&this.line("/Count "+f),u.options&&u.options.pageNumber){var p=n.internal.getPageInfo(u.options.pageNumber);this.line("/Dest ["+p.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var v=0;v<r.children.length;v++)this.renderItems(r.children[v])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,o){for(var a=0;a<o.children.length;a++)r.count++,this.count_r(r,o.children[a]);return r.count}}])}(yn.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,o,a,u,f){var p,v=this.decode.DCT_DECODE,w=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=u||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(p=function(b){for(var S,x=256*b.charCodeAt(4)+b.charCodeAt(5),I=b.length,D={width:0,height:0,numcomponents:1},j=4;j<I;j+=2){if(j+=x,e.indexOf(b.charCodeAt(j+1))!==-1){S=256*b.charCodeAt(j+5)+b.charCodeAt(j+6),D={width:256*b.charCodeAt(j+7)+b.charCodeAt(j+8),height:S,numcomponents:b.charCodeAt(j+9)};break}x=256*b.charCodeAt(j+2)+b.charCodeAt(j+3)}return D}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:f=this.color_spaces.DEVICE_GRAY;break;case 4:f=this.color_spaces.DEVICE_CMYK;break;case 3:f=this.color_spaces.DEVICE_RGB}w={data:n,width:p.width,height:p.height,colorSpace:f,bitsPerComponent:8,filter:v,index:r,alias:o}}return w}}(yn.API);var bu,nh,fg,dg,pg,WL=function(){var t,e,n;function r(a){var u,f,p,v,w,b,S,x,I,D,j,z,W,Q;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},b=null;;){switch(u=this.readUInt32(),I=(function(){var mt,Tt;for(Tt=[],mt=0;mt<4;++mt)Tt.push(String.fromCharCode(this.data[this.pos++]));return Tt}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(u);break;case"fcTL":b&&this.animation.frames.push(b),this.pos+=4,b={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},w=this.readUInt16(),v=this.readUInt16()||100,b.delay=1e3*w/v,b.disposeOp=this.data[this.pos++],b.blendOp=this.data[this.pos++],b.data=[];break;case"IDAT":case"fdAT":for(I==="fdAT"&&(this.pos+=4,u-=4),a=(b!=null?b.data:void 0)||this.imgData,z=0;0<=u?z<u:z>u;0<=u?++z:--z)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(p=this.palette.length/3,this.transparency.indexed=this.read(u),this.transparency.indexed.length>p)throw new Error("More transparent colors than palette size");if((D=p-this.transparency.indexed.length)>0)for(W=0;0<=D?W<D:W>D;0<=D?++W:--W)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(u)[0];break;case 2:this.transparency.rgb=this.read(u)}break;case"tEXt":S=(j=this.read(u)).indexOf(0),x=String.fromCharCode.apply(String,j.slice(0,S)),this.text[x]=String.fromCharCode.apply(String,j.slice(S+1));break;case"IEND":return b&&this.animation.frames.push(b),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(Q=this.colorType)===4||Q===6,f=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*f,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=u}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(a){var u,f;for(f=[],u=0;0<=a?u<a:u>a;0<=a?++u:--u)f.push(this.data[this.pos++]);return f},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(a){var u=this.pixelBitlength/8,f=new Uint8Array(this.width*this.height*u),p=0,v=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function w(b,S,x,I){var D,j,z,W,Q,mt,Tt,Nt,Ft,vt,Ct,Ut,Z,V,St,Et,M,$,q,O,dt,gt=Math.ceil((v.width-b)/x),Y=Math.ceil((v.height-S)/I),A=v.width==gt&&v.height==Y;for(V=u*gt,Ut=A?f:new Uint8Array(V*Y),mt=a.length,Z=0,j=0;Z<Y&&p<mt;){switch(a[p++]){case 0:for(W=M=0;M<V;W=M+=1)Ut[j++]=a[p++];break;case 1:for(W=$=0;$<V;W=$+=1)D=a[p++],Q=W<u?0:Ut[j-u],Ut[j++]=(D+Q)%256;break;case 2:for(W=q=0;q<V;W=q+=1)D=a[p++],z=(W-W%u)/u,St=Z&&Ut[(Z-1)*V+z*u+W%u],Ut[j++]=(St+D)%256;break;case 3:for(W=O=0;O<V;W=O+=1)D=a[p++],z=(W-W%u)/u,Q=W<u?0:Ut[j-u],St=Z&&Ut[(Z-1)*V+z*u+W%u],Ut[j++]=(D+Math.floor((Q+St)/2))%256;break;case 4:for(W=dt=0;dt<V;W=dt+=1)D=a[p++],z=(W-W%u)/u,Q=W<u?0:Ut[j-u],Z===0?St=Et=0:(St=Ut[(Z-1)*V+z*u+W%u],Et=z&&Ut[(Z-1)*V+(z-1)*u+W%u]),Tt=Q+St-Et,Nt=Math.abs(Tt-Q),vt=Math.abs(Tt-St),Ct=Math.abs(Tt-Et),Ft=Nt<=vt&&Nt<=Ct?Q:vt<=Ct?St:Et,Ut[j++]=(D+Ft)%256;break;default:throw new Error("Invalid filter algorithm: "+a[p-1])}if(!A){var U=((S+Z*I)*v.width+b)*u,et=Z*V;for(W=0;W<gt;W+=1){for(var lt=0;lt<u;lt+=1)f[U++]=Ut[et++];U+=(x-1)*u}}Z++}}return a=kL(a),v.interlaceMethod==1?(w(0,0,8,8),w(4,0,8,8),w(0,4,4,8),w(2,0,4,4),w(0,2,2,4),w(1,0,2,2),w(0,1,1,2)):w(0,0,1,1),f},r.prototype.decodePalette=function(){var a,u,f,p,v,w,b,S,x;for(f=this.palette,w=this.transparency.indexed||[],v=new Uint8Array((w.length||0)+f.length),p=0,a=0,u=b=0,S=f.length;b<S;u=b+=3)v[p++]=f[u],v[p++]=f[u+1],v[p++]=f[u+2],v[p++]=(x=w[a++])!=null?x:255;return v},r.prototype.copyToImageData=function(a,u){var f,p,v,w,b,S,x,I,D,j,z;if(p=this.colors,D=null,f=this.hasAlphaChannel,this.palette.length&&(D=(z=this._decodedPalette)!=null?z:this._decodedPalette=this.decodePalette(),p=4,f=!0),I=(v=a.data||a).length,b=D||u,w=S=0,p===1)for(;w<I;)x=D?4*u[w/4]:S,j=b[x++],v[w++]=j,v[w++]=j,v[w++]=j,v[w++]=f?b[x++]:255,S=x;else for(;w<I;)x=D?4*u[w/4]:S,v[w++]=b[x++],v[w++]=b[x++],v[w++]=b[x++],v[w++]=f?b[x++]:255,S=x},r.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var o=function(){if(Object.prototype.toString.call(wn)==="[object Window]"){try{e=wn.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return o(),t=function(a){var u;if(o()===!0)return n.width=a.width,n.height=a.height,n.clearRect(0,0,a.width,a.height),n.putImageData(a,0,0),(u=new Image).src=e.toDataURL(),u;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(a){var u,f,p,v,w,b,S,x;if(this.animation){for(x=[],f=w=0,b=(S=this.animation.frames).length;w<b;f=++w)u=S[f],p=a.createImageData(u.width,u.height),v=this.decodePixels(new Uint8Array(u.data)),this.copyToImageData(p,v),u.imageData=p,x.push(u.image=t(p));return x}},r.prototype.renderFrame=function(a,u){var f,p,v;return f=(p=this.animation.frames)[u],v=p[u-1],u===0&&a.clearRect(0,0,this.width,this.height),(v!=null?v.disposeOp:void 0)===1?a.clearRect(v.xOffset,v.yOffset,v.width,v.height):(v!=null?v.disposeOp:void 0)===2&&a.putImageData(v.imageData,v.xOffset,v.yOffset),f.blendOp===0&&a.clearRect(f.xOffset,f.yOffset,f.width,f.height),a.drawImage(f.image,f.xOffset,f.yOffset)},r.prototype.animate=function(a){var u,f,p,v,w,b,S=this;return f=0,b=this.animation,v=b.numFrames,p=b.frames,w=b.numPlays,(u=function(){var x,I;if(x=f++%v,I=p[x],S.renderFrame(a,x),v>1&&f/v<w)return S.animation._timeout=setTimeout(u,I.delay)})()},r.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},r.prototype.render=function(a){var u,f;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,u=a.getContext("2d"),this.animation?(this.decodeFrames(u),this.animate(u)):(f=u.createImageData(this.width,this.height),this.copyToImageData(f,this.decodePixels()),u.putImageData(f,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function ZL(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,o=t[e++],a=o>>7,u=1<<(7&o)+1;t[e++],t[e++];var f=null,p=null;a&&(f=e,p=u,e+=3*u);var v=!0,w=[],b=0,S=null,x=0,I=null;for(this.width=n,this.height=r;v&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,I=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((Z=t[e++])>=0))throw Error("Invalid block size");if(Z===0)break;e+=Z}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var D=t[e++];b=t[e++]|t[e++]<<8,S=t[e++],!(1&D)&&(S=null),x=D>>2&7,e++;break;case 254:for(;;){if(!((Z=t[e++])>=0))throw Error("Invalid block size");if(Z===0)break;e+=Z}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var j=t[e++]|t[e++]<<8,z=t[e++]|t[e++]<<8,W=t[e++]|t[e++]<<8,Q=t[e++]|t[e++]<<8,mt=t[e++],Tt=mt>>6&1,Nt=1<<(7&mt)+1,Ft=f,vt=p,Ct=!1;mt>>7&&(Ct=!0,Ft=e,vt=Nt,e+=3*Nt);var Ut=e;for(e++;;){var Z;if(!((Z=t[e++])>=0))throw Error("Invalid block size");if(Z===0)break;e+=Z}w.push({x:j,y:z,width:W,height:Q,has_local_palette:Ct,palette_offset:Ft,palette_size:vt,data_offset:Ut,data_length:e-Ut,transparent_index:S,interlaced:!!Tt,delay:b,disposal:x});break;case 59:v=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return w.length},this.loopCount=function(){return I},this.frameInfo=function(V){if(V<0||V>=w.length)throw new Error("Frame index out of range.");return w[V]},this.decodeAndBlitFrameBGRA=function(V,St){var Et=this.frameInfo(V),M=Et.width*Et.height,$=new Uint8Array(M);gg(t,Et.data_offset,$,M);var q=Et.palette_offset,O=Et.transparent_index;O===null&&(O=256);var dt=Et.width,gt=n-dt,Y=dt,A=4*(Et.y*n+Et.x),U=4*((Et.y+Et.height)*n+Et.x),et=A,lt=4*gt;Et.interlaced===!0&&(lt+=4*n*7);for(var ct=8,tt=0,ft=$.length;tt<ft;++tt){var ht=$[tt];if(Y===0&&(Y=dt,(et+=lt)>=U&&(lt=4*gt+4*n*(ct-1),et=A+(dt+gt)*(ct<<1),ct>>=1)),ht===O)et+=4;else{var At=t[q+3*ht],jt=t[q+3*ht+1],H=t[q+3*ht+2];St[et++]=H,St[et++]=jt,St[et++]=At,St[et++]=255}--Y}},this.decodeAndBlitFrameRGBA=function(V,St){var Et=this.frameInfo(V),M=Et.width*Et.height,$=new Uint8Array(M);gg(t,Et.data_offset,$,M);var q=Et.palette_offset,O=Et.transparent_index;O===null&&(O=256);var dt=Et.width,gt=n-dt,Y=dt,A=4*(Et.y*n+Et.x),U=4*((Et.y+Et.height)*n+Et.x),et=A,lt=4*gt;Et.interlaced===!0&&(lt+=4*n*7);for(var ct=8,tt=0,ft=$.length;tt<ft;++tt){var ht=$[tt];if(Y===0&&(Y=dt,(et+=lt)>=U&&(lt=4*gt+4*n*(ct-1),et=A+(dt+gt)*(ct<<1),ct>>=1)),ht===O)et+=4;else{var At=t[q+3*ht],jt=t[q+3*ht+1],H=t[q+3*ht+2];St[et++]=At,St[et++]=jt,St[et++]=H,St[et++]=255}--Y}}}function gg(t,e,n,r){for(var o=t[e++],a=1<<o,u=a+1,f=u+1,p=o+1,v=(1<<p)-1,w=0,b=0,S=0,x=t[e++],I=new Int32Array(4096),D=null;;){for(;w<16&&x!==0;)b|=t[e++]<<w,w+=8,x===1?x=t[e++]:--x;if(w<p)break;var j=b&v;if(b>>=p,w-=p,j!==a){if(j===u)break;for(var z=j<f?j:D,W=0,Q=z;Q>a;)Q=I[Q]>>8,++W;var mt=Q;if(S+W+(z!==j?1:0)>r)return void pr.log("Warning, gif stream longer than expected.");n[S++]=mt;var Tt=S+=W;for(z!==j&&(n[S++]=mt),Q=z;W--;)Q=I[Q],n[--Tt]=255&Q,Q>>=8;D!==null&&f<4096&&(I[f++]=D<<8|mt,f>=v+1&&p<12&&(++p,v=v<<1|1)),D=j}else f=u+1,v=(1<<(p=o+1))-1,D=null}return S!==r&&pr.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Gf(t){var e,n,r,o,a,u=Math.floor,f=new Array(64),p=new Array(64),v=new Array(64),w=new Array(64),b=new Array(65535),S=new Array(65535),x=new Array(64),I=new Array(64),D=[],j=0,z=7,W=new Array(64),Q=new Array(64),mt=new Array(64),Tt=new Array(256),Nt=new Array(2048),Ft=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],vt=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Ct=[0,1,2,3,4,5,6,7,8,9,10,11],Ut=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Z=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],V=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],St=[0,1,2,3,4,5,6,7,8,9,10,11],Et=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],M=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function $(A,U){for(var et=0,lt=0,ct=new Array,tt=1;tt<=16;tt++){for(var ft=1;ft<=A[tt];ft++)ct[U[lt]]=[],ct[U[lt]][0]=et,ct[U[lt]][1]=tt,lt++,et++;et*=2}return ct}function q(A){for(var U=A[0],et=A[1]-1;et>=0;)U&1<<et&&(j|=1<<z),et--,--z<0&&(j==255?(O(255),O(0)):O(j),z=7,j=0)}function O(A){D.push(A)}function dt(A){O(A>>8&255),O(255&A)}function gt(A,U,et,lt,ct){for(var tt,ft=ct[0],ht=ct[240],At=function(Zt,Dt){var Lt,ae,te,xe,zt,pe,qe,He,Fe,Xe,De=0;for(Fe=0;Fe<8;++Fe){Lt=Zt[De],ae=Zt[De+1],te=Zt[De+2],xe=Zt[De+3],zt=Zt[De+4],pe=Zt[De+5],qe=Zt[De+6];var on=Lt+(He=Zt[De+7]),pn=Lt-He,cr=ae+qe,rn=ae-qe,hn=te+pe,Ze=te-pe,Pn=xe+zt,vr=xe-zt,Tn=on+Pn,or=on-Pn,dr=cr+hn,qn=cr-hn;Zt[De]=Tn+dr,Zt[De+4]=Tn-dr;var ze=.707106781*(qn+or);Zt[De+2]=or+ze,Zt[De+6]=or-ze;var Ne=.382683433*((Tn=vr+Ze)-(qn=rn+pn)),Mr=.5411961*Tn+Ne,ar=1.306562965*qn+Ne,je=.707106781*(dr=Ze+rn),hr=pn+je,tn=pn-je;Zt[De+5]=tn+Mr,Zt[De+3]=tn-Mr,Zt[De+1]=hr+ar,Zt[De+7]=hr-ar,De+=8}for(De=0,Fe=0;Fe<8;++Fe){Lt=Zt[De],ae=Zt[De+8],te=Zt[De+16],xe=Zt[De+24],zt=Zt[De+32],pe=Zt[De+40],qe=Zt[De+48];var nr=Lt+(He=Zt[De+56]),Ni=Lt-He,qr=ae+qe,Un=ae-qe,$e=te+pe,$r=te-pe,_s=xe+zt,bi=xe-zt,ci=nr+_s,ti=nr-_s,hi=qr+$e,Ir=qr-$e;Zt[De]=ci+hi,Zt[De+32]=ci-hi;var ei=.707106781*(Ir+ti);Zt[De+16]=ti+ei,Zt[De+48]=ti-ei;var Di=.382683433*((ci=bi+$r)-(Ir=Un+Ni)),bs=.5411961*ci+Di,qs=1.306562965*Ir+Di,$s=.707106781*(hi=$r+Un),Ui=Ni+$s,os=Ni-$s;Zt[De+40]=os+bs,Zt[De+24]=os-bs,Zt[De+8]=Ui+qs,Zt[De+56]=Ui-qs,De++}for(Fe=0;Fe<64;++Fe)Xe=Zt[Fe]*Dt[Fe],x[Fe]=Xe>0?Xe+.5|0:Xe-.5|0;return x}(A,U),jt=0;jt<64;++jt)I[Ft[jt]]=At[jt];var H=I[0]-et;et=I[0],H==0?q(lt[0]):(q(lt[S[tt=32767+H]]),q(b[tt]));for(var J=63;J>0&&I[J]==0;)J--;if(J==0)return q(ft),et;for(var yt,wt=1;wt<=J;){for(var K=wt;I[wt]==0&&wt<=J;)++wt;var Ht=wt-K;if(Ht>=16){yt=Ht>>4;for(var ne=1;ne<=yt;++ne)q(ht);Ht&=15}tt=32767+I[wt],q(ct[(Ht<<4)+S[tt]]),q(b[tt]),wt++}return J!=63&&q(ft),et}function Y(A){A=Math.min(Math.max(A,1),100),a!=A&&(function(U){for(var et=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],lt=0;lt<64;lt++){var ct=u((et[lt]*U+50)/100);ct=Math.min(Math.max(ct,1),255),f[Ft[lt]]=ct}for(var tt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ft=0;ft<64;ft++){var ht=u((tt[ft]*U+50)/100);ht=Math.min(Math.max(ht,1),255),p[Ft[ft]]=ht}for(var At=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],jt=0,H=0;H<8;H++)for(var J=0;J<8;J++)v[jt]=1/(f[Ft[jt]]*At[H]*At[J]*8),w[jt]=1/(p[Ft[jt]]*At[H]*At[J]*8),jt++}(A<50?Math.floor(5e3/A):Math.floor(200-2*A)),a=A)}this.encode=function(A,U){U&&Y(U),D=new Array,j=0,z=7,dt(65496),dt(65504),dt(16),O(74),O(70),O(73),O(70),O(0),O(1),O(1),O(0),dt(1),dt(1),O(0),O(0),function(){dt(65499),dt(132),O(0);for(var ae=0;ae<64;ae++)O(f[ae]);O(1);for(var te=0;te<64;te++)O(p[te])}(),function(ae,te){dt(65472),dt(17),O(8),dt(te),dt(ae),O(3),O(1),O(17),O(0),O(2),O(17),O(1),O(3),O(17),O(1)}(A.width,A.height),function(){dt(65476),dt(418),O(0);for(var ae=0;ae<16;ae++)O(vt[ae+1]);for(var te=0;te<=11;te++)O(Ct[te]);O(16);for(var xe=0;xe<16;xe++)O(Ut[xe+1]);for(var zt=0;zt<=161;zt++)O(Z[zt]);O(1);for(var pe=0;pe<16;pe++)O(V[pe+1]);for(var qe=0;qe<=11;qe++)O(St[qe]);O(17);for(var He=0;He<16;He++)O(Et[He+1]);for(var Fe=0;Fe<=161;Fe++)O(M[Fe])}(),dt(65498),dt(12),O(3),O(1),O(0),O(2),O(17),O(3),O(17),O(0),O(63),O(0);var et=0,lt=0,ct=0;j=0,z=7,this.encode.displayName="_encode_";for(var tt,ft,ht,At,jt,H,J,yt,wt,K=A.data,Ht=A.width,ne=A.height,Zt=4*Ht,Dt=0;Dt<ne;){for(tt=0;tt<Zt;){for(jt=Zt*Dt+tt,J=-1,yt=0,wt=0;wt<64;wt++)H=jt+(yt=wt>>3)*Zt+(J=4*(7&wt)),Dt+yt>=ne&&(H-=Zt*(Dt+1+yt-ne)),tt+J>=Zt&&(H-=tt+J-Zt+4),ft=K[H++],ht=K[H++],At=K[H++],W[wt]=(Nt[ft]+Nt[ht+256>>0]+Nt[At+512>>0]>>16)-128,Q[wt]=(Nt[ft+768>>0]+Nt[ht+1024>>0]+Nt[At+1280>>0]>>16)-128,mt[wt]=(Nt[ft+1280>>0]+Nt[ht+1536>>0]+Nt[At+1792>>0]>>16)-128;et=gt(W,v,et,e,r),lt=gt(Q,w,lt,n,o),ct=gt(mt,w,ct,n,o),tt+=32}Dt+=8}if(z>=0){var Lt=[];Lt[1]=z+1,Lt[0]=(1<<z+1)-1,q(Lt)}return dt(65497),new Uint8Array(D)},t=t||50,function(){for(var A=String.fromCharCode,U=0;U<256;U++)Tt[U]=A(U)}(),e=$(vt,Ct),n=$(V,St),r=$(Ut,Z),o=$(Et,M),function(){for(var A=1,U=2,et=1;et<=15;et++){for(var lt=A;lt<U;lt++)S[32767+lt]=et,b[32767+lt]=[],b[32767+lt][1]=et,b[32767+lt][0]=lt;for(var ct=-(U-1);ct<=-A;ct++)S[32767+ct]=et,b[32767+ct]=[],b[32767+ct][1]=et,b[32767+ct][0]=U-1+ct;A<<=1,U<<=1}}(),function(){for(var A=0;A<256;A++)Nt[A]=19595*A,Nt[A+256>>0]=38470*A,Nt[A+512>>0]=7471*A+32768,Nt[A+768>>0]=-11059*A,Nt[A+1024>>0]=-21709*A,Nt[A+1280>>0]=32768*A+8421375,Nt[A+1536>>0]=-27439*A,Nt[A+1792>>0]=-5329*A}(),Y(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ho(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function mg(t){function e(vt){if(!vt)throw Error("assert :P")}function n(vt,Ct,Ut){for(var Z=0;4>Z;Z++)if(vt[Ct+Z]!=Ut.charCodeAt(Z))return!0;return!1}function r(vt,Ct,Ut,Z,V){for(var St=0;St<V;St++)vt[Ct+St]=Ut[Z+St]}function o(vt,Ct,Ut,Z){for(var V=0;V<Z;V++)vt[Ct+V]=Ut}function a(vt){return new Int32Array(vt)}function u(vt,Ct){for(var Ut=[],Z=0;Z<vt;Z++)Ut.push(new Ct);return Ut}function f(vt,Ct){var Ut=[];return function Z(V,St,Et){for(var M=Et[St],$=0;$<M&&(V.push(Et.length>St+1?[]:new Ct),!(Et.length<St+1));$++)Z(V[$],St+1,Et)}(Ut,0,vt),Ut}var p=function(){var vt=this;function Ct(d,_){for(var E=1<<_-1>>>0;d&E;)E>>>=1;return E?(d&E-1)+E:d}function Ut(d,_,E,R,rt){e(!(R%E));do d[_+(R-=E)]=rt;while(0<R)}function Z(d,_,E,R,rt){if(e(2328>=rt),512>=rt)var ot=a(512);else if((ot=a(rt))==null)return 0;return function(ut,pt,_t,Mt,Jt,me){var ve,oe,Ce=pt,we=1<<_t,Qt=a(16),re=a(16);for(e(Jt!=0),e(Mt!=null),e(ut!=null),e(0<_t),oe=0;oe<Jt;++oe){if(15<Mt[oe])return 0;++Qt[Mt[oe]]}if(Qt[0]==Jt)return 0;for(re[1]=0,ve=1;15>ve;++ve){if(Qt[ve]>1<<ve)return 0;re[ve+1]=re[ve]+Qt[ve]}for(oe=0;oe<Jt;++oe)ve=Mt[oe],0<Mt[oe]&&(me[re[ve]++]=oe);if(re[15]==1)return(Mt=new V).g=0,Mt.value=me[0],Ut(ut,Ce,1,we,Mt),we;var ke,Be=-1,Ee=we-1,Ye=0,Ve=1,cn=1,s=1<<_t;for(oe=0,ve=1,Jt=2;ve<=_t;++ve,Jt<<=1){if(Ve+=cn<<=1,0>(cn-=Qt[ve]))return 0;for(;0<Qt[ve];--Qt[ve])(Mt=new V).g=ve,Mt.value=me[oe++],Ut(ut,Ce+Ye,Jt,s,Mt),Ye=Ct(Ye,ve)}for(ve=_t+1,Jt=2;15>=ve;++ve,Jt<<=1){if(Ve+=cn<<=1,0>(cn-=Qt[ve]))return 0;for(;0<Qt[ve];--Qt[ve]){if(Mt=new V,(Ye&Ee)!=Be){for(Ce+=s,ke=1<<(Be=ve)-_t;15>Be&&!(0>=(ke-=Qt[Be]));)++Be,ke<<=1;we+=s=1<<(ke=Be-_t),ut[pt+(Be=Ye&Ee)].g=ke+_t,ut[pt+Be].value=Ce-pt-Be}Mt.g=ve-_t,Mt.value=me[oe++],Ut(ut,Ce+(Ye>>_t),Jt,s,Mt),Ye=Ct(Ye,ve)}}return Ve!=2*re[15]-1?0:we}(d,_,E,R,rt,ot)}function V(){this.value=this.g=0}function St(){this.value=this.g=0}function Et(){this.G=u(5,V),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=u(Ar,St)}function M(d,_,E,R){e(d!=null),e(_!=null),e(2147483648>R),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=_,d.pa=E,d.Jd=_,d.Yc=E+R,d.Zc=4<=R?E+R-4+1:E,tt(d)}function $(d,_){for(var E=0;0<_--;)E|=ht(d,128)<<_;return E}function q(d,_){var E=$(d,_);return ft(d)?-E:E}function O(d,_,E,R){var rt,ot=0;for(e(d!=null),e(_!=null),e(4294967288>R),d.Sb=R,d.Ra=0,d.u=0,d.h=0,4<R&&(R=4),rt=0;rt<R;++rt)ot+=_[E+rt]<<8*rt;d.Ra=ot,d.bb=R,d.oa=_,d.pa=E}function dt(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<gi-8>>>0,++d.bb,d.u-=8;et(d)&&(d.h=1,d.u=0)}function gt(d,_){if(e(0<=_),!d.h&&_<=xi){var E=U(d)&fa[_];return d.u+=_,dt(d),E}return d.h=1,d.u=0}function Y(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function A(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function U(d){return d.Ra>>>(d.u&gi-1)>>>0}function et(d){return e(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>gi}function lt(d,_){d.u=_,d.h=et(d)}function ct(d){d.u>=da&&(e(d.u>=da),dt(d))}function tt(d){e(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(e(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function ft(d){return $(d,1)}function ht(d,_){var E=d.Ca;0>d.b&&tt(d);var R=d.b,rt=E*_>>>8,ot=(d.I>>>R>rt)+0;for(ot?(E-=rt,d.I-=rt+1<<R>>>0):E=rt+1,R=E,rt=0;256<=R;)rt+=8,R>>=8;return R=7^rt+ri[R],d.b-=R,d.Ca=(E<<R)-1,ot}function At(d,_,E){d[_+0]=E>>24&255,d[_+1]=E>>16&255,d[_+2]=E>>8&255,d[_+3]=E>>0&255}function jt(d,_){return d[_+0]<<0|d[_+1]<<8}function H(d,_){return jt(d,_)|d[_+2]<<16}function J(d,_){return jt(d,_)|jt(d,_+2)<<16}function yt(d,_){var E=1<<_;return e(d!=null),e(0<_),d.X=a(E),d.X==null?0:(d.Mb=32-_,d.Xa=_,1)}function wt(d,_){e(d!=null),e(_!=null),e(d.Xa==_.Xa),r(_.X,0,d.X,0,1<<_.Xa)}function K(){this.X=[],this.Xa=this.Mb=0}function Ht(d,_,E,R){e(E!=null),e(R!=null);var rt=E[0],ot=R[0];return rt==0&&(rt=(d*ot+_/2)/_),ot==0&&(ot=(_*rt+d/2)/d),0>=rt||0>=ot?0:(E[0]=rt,R[0]=ot,1)}function ne(d,_){return d+(1<<_)-1>>>_}function Zt(d,_){return((4278255360&d)+(4278255360&_)>>>0&4278255360)+((16711935&d)+(16711935&_)>>>0&16711935)>>>0}function Dt(d,_){vt[_]=function(E,R,rt,ot,ut,pt,_t){var Mt;for(Mt=0;Mt<ut;++Mt){var Jt=vt[d](pt[_t+Mt-1],rt,ot+Mt);pt[_t+Mt]=Zt(E[R+Mt],Jt)}}}function Lt(){this.ud=this.hd=this.jd=0}function ae(d,_){return((4278124286&(d^_))>>>1)+(d&_)>>>0}function te(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function xe(d,_){return te(d+(d-_+.5>>1))}function zt(d,_,E){return Math.abs(_-E)-Math.abs(d-E)}function pe(d,_,E,R,rt,ot,ut){for(R=ot[ut-1],E=0;E<rt;++E)ot[ut+E]=R=Zt(d[_+E],R)}function qe(d,_,E,R,rt){var ot;for(ot=0;ot<E;++ot){var ut=d[_+ot],pt=ut>>8&255,_t=16711935&(_t=(_t=16711935&ut)+((pt<<16)+pt));R[rt+ot]=(4278255360&ut)+_t>>>0}}function He(d,_){_.jd=d>>0&255,_.hd=d>>8&255,_.ud=d>>16&255}function Fe(d,_,E,R,rt,ot){var ut;for(ut=0;ut<R;++ut){var pt=_[E+ut],_t=pt>>>8,Mt=pt,Jt=255&(Jt=(Jt=pt>>>16)+((d.jd<<24>>24)*(_t<<24>>24)>>>5));Mt=255&(Mt=(Mt=Mt+((d.hd<<24>>24)*(_t<<24>>24)>>>5))+((d.ud<<24>>24)*(Jt<<24>>24)>>>5)),rt[ot+ut]=(4278255360&pt)+(Jt<<16)+Mt}}function Xe(d,_,E,R,rt){vt[_]=function(ot,ut,pt,_t,Mt,Jt,me,ve,oe){for(_t=me;_t<ve;++_t)for(me=0;me<oe;++me)Mt[Jt++]=rt(pt[R(ot[ut++])])},vt[d]=function(ot,ut,pt,_t,Mt,Jt,me){var ve=8>>ot.b,oe=ot.Ea,Ce=ot.K[0],we=ot.w;if(8>ve)for(ot=(1<<ot.b)-1,we=(1<<ve)-1;ut<pt;++ut){var Qt,re=0;for(Qt=0;Qt<oe;++Qt)Qt&ot||(re=R(_t[Mt++])),Jt[me++]=rt(Ce[re&we]),re>>=ve}else vt["VP8LMapColor"+E](_t,Mt,Ce,we,Jt,me,ut,pt,oe)}}function De(d,_,E,R,rt){for(E=_+E;_<E;){var ot=d[_++];R[rt++]=ot>>16&255,R[rt++]=ot>>8&255,R[rt++]=ot>>0&255}}function on(d,_,E,R,rt){for(E=_+E;_<E;){var ot=d[_++];R[rt++]=ot>>16&255,R[rt++]=ot>>8&255,R[rt++]=ot>>0&255,R[rt++]=ot>>24&255}}function pn(d,_,E,R,rt){for(E=_+E;_<E;){var ot=(ut=d[_++])>>16&240|ut>>12&15,ut=ut>>0&240|ut>>28&15;R[rt++]=ot,R[rt++]=ut}}function cr(d,_,E,R,rt){for(E=_+E;_<E;){var ot=(ut=d[_++])>>16&248|ut>>13&7,ut=ut>>5&224|ut>>3&31;R[rt++]=ot,R[rt++]=ut}}function rn(d,_,E,R,rt){for(E=_+E;_<E;){var ot=d[_++];R[rt++]=ot>>0&255,R[rt++]=ot>>8&255,R[rt++]=ot>>16&255}}function hn(d,_,E,R,rt,ot){if(ot==0)for(E=_+E;_<E;)At(R,((ot=d[_++])[0]>>24|ot[1]>>8&65280|ot[2]<<8&16711680|ot[3]<<24)>>>0),rt+=32;else r(R,rt,d,_,E)}function Ze(d,_){vt[_][0]=vt[d+"0"],vt[_][1]=vt[d+"1"],vt[_][2]=vt[d+"2"],vt[_][3]=vt[d+"3"],vt[_][4]=vt[d+"4"],vt[_][5]=vt[d+"5"],vt[_][6]=vt[d+"6"],vt[_][7]=vt[d+"7"],vt[_][8]=vt[d+"8"],vt[_][9]=vt[d+"9"],vt[_][10]=vt[d+"10"],vt[_][11]=vt[d+"11"],vt[_][12]=vt[d+"12"],vt[_][13]=vt[d+"13"],vt[_][14]=vt[d+"0"],vt[_][15]=vt[d+"0"]}function Pn(d){return d==vi||d==yi||d==Ns||d==i}function vr(){this.eb=[],this.size=this.A=this.fb=0}function Tn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function or(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new vr,this.f.kb=new Tn,this.sd=null}function dr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function qn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ze(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function Ne(d,_){var E=d.T,R=_.ba.f.RGBA,rt=R.eb,ot=R.fb+d.ka*R.A,ut=ai[_.ba.S],pt=d.y,_t=d.O,Mt=d.f,Jt=d.N,me=d.ea,ve=d.W,oe=_.cc,Ce=_.dc,we=_.Mc,Qt=_.Nc,re=d.ka,ke=d.ka+d.T,Be=d.U,Ee=Be+1>>1;for(re==0?ut(pt,_t,null,null,Mt,Jt,me,ve,Mt,Jt,me,ve,rt,ot,null,null,Be):(ut(_.ec,_.fc,pt,_t,oe,Ce,we,Qt,Mt,Jt,me,ve,rt,ot-R.A,rt,ot,Be),++E);re+2<ke;re+=2)oe=Mt,Ce=Jt,we=me,Qt=ve,Jt+=d.Rc,ve+=d.Rc,ot+=2*R.A,ut(pt,(_t+=2*d.fa)-d.fa,pt,_t,oe,Ce,we,Qt,Mt,Jt,me,ve,rt,ot-R.A,rt,ot,Be);return _t+=d.fa,d.j+ke<d.o?(r(_.ec,_.fc,pt,_t,Be),r(_.cc,_.dc,Mt,Jt,Ee),r(_.Mc,_.Nc,me,ve,Ee),E--):1&ke||ut(pt,_t,null,null,Mt,Jt,me,ve,Mt,Jt,me,ve,rt,ot+R.A,null,null,Be),E}function Mr(d,_,E){var R=d.F,rt=[d.J];if(R!=null){var ot=d.U,ut=_.ba.S,pt=ut==Ji||ut==Ns;_=_.ba.f.RGBA;var _t=[0],Mt=d.ka;_t[0]=d.T,d.Kb&&(Mt==0?--_t[0]:(--Mt,rt[0]-=d.width),d.j+d.ka+d.T==d.o&&(_t[0]=d.o-d.j-Mt));var Jt=_.eb;Mt=_.fb+Mt*_.A,d=Wn(R,rt[0],d.width,ot,_t,Jt,Mt+(pt?0:3),_.A),e(E==_t),d&&Pn(ut)&&Gr(Jt,Mt,pt,ot,_t,_.A)}return 0}function ar(d){var _=d.ma,E=_.ba.S,R=11>E,rt=E==gn||E==Uo||E==Ji||E==oi||E==12||Pn(E);if(_.memory=null,_.Ib=null,_.Jb=null,_.Nd=null,!Ia(_.Oa,d,rt?11:12))return 0;if(rt&&Pn(E)&&Te(),d.da)alert("todo:use_scaling");else{if(R){if(_.Ib=ze,d.Kb){if(E=d.U+1>>1,_.memory=a(d.U+2*E),_.memory==null)return 0;_.ec=_.memory,_.fc=0,_.cc=_.ec,_.dc=_.fc+d.U,_.Mc=_.cc,_.Nc=_.dc+E,_.Ib=Ne,Te()}}else alert("todo:EmitYUV");rt&&(_.Jb=Mr,R&&le())}if(R&&!ul){for(d=0;256>d;++d)hu[d]=89858*(d-128)+Il>>cu,fu[d]=-22014*(d-128)+Il,uf[d]=-45773*(d-128),lf[d]=113618*(d-128)+Il>>cu;for(d=Fl;d<Hu;++d)_=76283*(d-16)+Il>>cu,du[d-Fl]=Qn(_,255),Fc[d-Fl]=Qn(_+8>>4,15);ul=1}return 1}function je(d){var _=d.ma,E=d.U,R=d.T;return e(!(1&d.ka)),0>=E||0>=R?0:(E=_.Ib(d,_),_.Jb!=null&&_.Jb(d,_,E),_.Dc+=E,1)}function hr(d){d.ma.memory=null}function tn(d,_,E,R){return gt(d,8)!=47?0:(_[0]=gt(d,14)+1,E[0]=gt(d,14)+1,R[0]=gt(d,1),gt(d,3)!=0?0:!d.h)}function nr(d,_){if(4>d)return d+1;var E=d-2>>1;return(2+(1&d)<<E)+gt(_,E)+1}function Ni(d,_){return 120<_?_-120:1<=(E=((E=$t[_-1])>>4)*d+(8-(15&E)))?E:1;var E}function qr(d,_,E){var R=U(E),rt=d[_+=255&R].g-8;return 0<rt&&(lt(E,E.u+8),R=U(E),_+=d[_].value,_+=R&(1<<rt)-1),lt(E,E.u+d[_].g),d[_].value}function Un(d,_,E){return E.g+=d.g,E.value+=d.value<<_>>>0,e(8>=E.g),d.g}function $e(d,_,E){var R=d.xc;return e((_=R==0?0:d.vc[d.md*(E>>R)+(_>>R)])<d.Wb),d.Ya[_]}function $r(d,_,E,R){var rt=d.ab,ot=d.c*_,ut=d.C;_=ut+_;var pt=E,_t=R;for(R=d.Ta,E=d.Ua;0<rt--;){var Mt=d.gc[rt],Jt=ut,me=_,ve=pt,oe=_t,Ce=(_t=R,pt=E,Mt.Ea);switch(e(Jt<me),e(me<=Mt.nc),Mt.hc){case 2:sl(ve,oe,(me-Jt)*Ce,_t,pt);break;case 0:var we=Jt,Qt=me,re=_t,ke=pt,Be=(s=Mt).Ea;we==0&&(Ys(ve,oe,null,null,1,re,ke),pe(ve,oe+1,0,0,Be-1,re,ke+1),oe+=Be,ke+=Be,++we);for(var Ee=1<<s.b,Ye=Ee-1,Ve=ne(Be,s.b),cn=s.K,s=s.w+(we>>s.b)*Ve;we<Qt;){var l=cn,h=s,g=1;for(Fi(ve,oe,re,ke-Be,1,re,ke);g<Be;){var y=(g&~Ye)+Ee;y>Be&&(y=Be),(0,Xs[l[h++]>>8&15])(ve,oe+ +g,re,ke+g-Be,y-g,re,ke+g),g=y}oe+=Be,ke+=Be,++we&Ye||(s+=Ve)}me!=Mt.nc&&r(_t,pt-Ce,_t,pt+(me-Jt-1)*Ce,Ce);break;case 1:for(Ce=ve,Qt=oe,Be=(ve=Mt.Ea)-(ke=ve&~(re=(oe=1<<Mt.b)-1)),we=ne(ve,Mt.b),Ee=Mt.K,Mt=Mt.w+(Jt>>Mt.b)*we;Jt<me;){for(Ye=Ee,Ve=Mt,cn=new Lt,s=Qt+ke,l=Qt+ve;Qt<s;)He(Ye[Ve++],cn),As(cn,Ce,Qt,oe,_t,pt),Qt+=oe,pt+=oe;Qt<l&&(He(Ye[Ve++],cn),As(cn,Ce,Qt,Be,_t,pt),Qt+=Be,pt+=Be),++Jt&re||(Mt+=we)}break;case 3:if(ve==_t&&oe==pt&&0<Mt.b){for(Qt=_t,ve=Ce=pt+(me-Jt)*Ce-(ke=(me-Jt)*ne(Mt.Ea,Mt.b)),oe=_t,re=pt,we=[],ke=(Be=ke)-1;0<=ke;--ke)we[ke]=oe[re+ke];for(ke=Be-1;0<=ke;--ke)Qt[ve+ke]=we[ke];Dr(Mt,Jt,me,_t,Ce,_t,pt)}else Dr(Mt,Jt,me,ve,oe,_t,pt)}pt=R,_t=E}_t!=E&&r(R,E,pt,_t,ot)}function _s(d,_){var E=d.V,R=d.Ba+d.c*d.C,rt=_-d.C;if(e(_<=d.l.o),e(16>=rt),0<rt){var ot=d.l,ut=d.Ta,pt=d.Ua,_t=ot.width;if($r(d,rt,E,R),rt=pt=[pt],e((E=d.C)<(R=_)),e(ot.v<ot.va),R>ot.o&&(R=ot.o),E<ot.j){var Mt=ot.j-E;E=ot.j,rt[0]+=Mt*_t}if(E>=R?E=0:(rt[0]+=4*ot.v,ot.ka=E-ot.j,ot.U=ot.va-ot.v,ot.T=R-E,E=1),E){if(pt=pt[0],11>(E=d.ca).S){var Jt=E.f.RGBA,me=(R=E.S,rt=ot.U,ot=ot.T,Mt=Jt.eb,Jt.A),ve=ot;for(Jt=Jt.fb+d.Ma*Jt.A;0<ve--;){var oe=ut,Ce=pt,we=rt,Qt=Mt,re=Jt;switch(R){case Pi:Hr(oe,Ce,we,Qt,re);break;case gn:Fr(oe,Ce,we,Qt,re);break;case vi:Fr(oe,Ce,we,Qt,re),Gr(Qt,re,0,we,1,0);break;case al:Wi(oe,Ce,we,Qt,re);break;case Uo:hn(oe,Ce,we,Qt,re,1);break;case yi:hn(oe,Ce,we,Qt,re,1),Gr(Qt,re,0,we,1,0);break;case Ji:hn(oe,Ce,we,Qt,re,0);break;case Ns:hn(oe,Ce,we,Qt,re,0),Gr(Qt,re,1,we,1,0);break;case oi:us(oe,Ce,we,Qt,re);break;case i:us(oe,Ce,we,Qt,re),Jn(Qt,re,we,1,0);break;case Dl:Li(oe,Ce,we,Qt,re);break;default:e(0)}pt+=_t,Jt+=me}d.Ma+=ot}else alert("todo:EmitRescaledRowsYUVA");e(d.Ma<=E.height)}}d.C=_,e(d.C<=d.i)}function bi(d){var _;if(0<d.ua)return 0;for(_=0;_<d.Wb;++_){var E=d.Ya[_].G,R=d.Ya[_].H;if(0<E[1][R[1]+0].g||0<E[2][R[2]+0].g||0<E[3][R[3]+0].g)return 0}return 1}function ci(d,_,E,R,rt,ot){if(d.Z!=0){var ut=d.qd,pt=d.rd;for(e(Yn[d.Z]!=null);_<E;++_)Yn[d.Z](ut,pt,R,rt,R,rt,ot),ut=R,pt=rt,rt+=ot;d.qd=ut,d.rd=pt}}function ti(d,_){var E=d.l.ma,R=E.Z==0||E.Z==1?d.l.j:d.C;if(R=d.C<R?R:d.C,e(_<=d.l.o),_>R){var rt=d.l.width,ot=E.ca,ut=E.tb+rt*R,pt=d.V,_t=d.Ba+d.c*R,Mt=d.gc;e(d.ab==1),e(Mt[0].hc==3),Gi(Mt[0],R,_,pt,_t,ot,ut),ci(E,R,_,ot,ut,rt)}d.C=d.Ma=_}function hi(d,_,E,R,rt,ot,ut){var pt=d.$/R,_t=d.$%R,Mt=d.m,Jt=d.s,me=E+d.$,ve=me;rt=E+R*rt;var oe=E+R*ot,Ce=280+Jt.ua,we=d.Pb?pt:16777216,Qt=0<Jt.ua?Jt.Wa:null,re=Jt.wc,ke=me<oe?$e(Jt,_t,pt):null;e(d.C<ot),e(oe<=rt);var Be=!1;t:for(;;){for(;Be||me<oe;){var Ee=0;if(pt>=we){var Ye=me-E;e((we=d).Pb),we.wd=we.m,we.xd=Ye,0<we.s.ua&&wt(we.s.Wa,we.s.vb),we=pt+_e}if(_t&re||(ke=$e(Jt,_t,pt)),e(ke!=null),ke.Qb&&(_[me]=ke.qb,Be=!0),!Be)if(ct(Mt),ke.jc){Ee=Mt,Ye=_;var Ve=me,cn=ke.pd[U(Ee)&Ar-1];e(ke.jc),256>cn.g?(lt(Ee,Ee.u+cn.g),Ye[Ve]=cn.value,Ee=0):(lt(Ee,Ee.u+cn.g-256),e(256<=cn.value),Ee=cn.value),Ee==0&&(Be=!0)}else Ee=qr(ke.G[0],ke.H[0],Mt);if(Mt.h)break;if(Be||256>Ee){if(!Be)if(ke.nd)_[me]=(ke.qb|Ee<<8)>>>0;else{if(ct(Mt),Be=qr(ke.G[1],ke.H[1],Mt),ct(Mt),Ye=qr(ke.G[2],ke.H[2],Mt),Ve=qr(ke.G[3],ke.H[3],Mt),Mt.h)break;_[me]=(Ve<<24|Be<<16|Ee<<8|Ye)>>>0}if(Be=!1,++me,++_t>=R&&(_t=0,++pt,ut!=null&&pt<=ot&&!(pt%16)&&ut(d,pt),Qt!=null))for(;ve<me;)Ee=_[ve++],Qt.X[(506832829*Ee&4294967295)>>>Qt.Mb]=Ee}else if(280>Ee){if(Ee=nr(Ee-256,Mt),Ye=qr(ke.G[4],ke.H[4],Mt),ct(Mt),Ye=Ni(R,Ye=nr(Ye,Mt)),Mt.h)break;if(me-E<Ye||rt-me<Ee)break t;for(Ve=0;Ve<Ee;++Ve)_[me+Ve]=_[me+Ve-Ye];for(me+=Ee,_t+=Ee;_t>=R;)_t-=R,++pt,ut!=null&&pt<=ot&&!(pt%16)&&ut(d,pt);if(e(me<=rt),_t&re&&(ke=$e(Jt,_t,pt)),Qt!=null)for(;ve<me;)Ee=_[ve++],Qt.X[(506832829*Ee&4294967295)>>>Qt.Mb]=Ee}else{if(!(Ee<Ce))break t;for(Be=Ee-280,e(Qt!=null);ve<me;)Ee=_[ve++],Qt.X[(506832829*Ee&4294967295)>>>Qt.Mb]=Ee;Ee=me,e(!(Be>>>(Ye=Qt).Xa)),_[Ee]=Ye.X[Be],Be=!0}Be||e(Mt.h==et(Mt))}if(d.Pb&&Mt.h&&me<rt)e(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&wt(d.s.vb,d.s.Wa);else{if(Mt.h)break t;ut!=null&&ut(d,pt>ot?ot:pt),d.a=0,d.$=me-E}return 1}return d.a=3,0}function Ir(d){e(d!=null),d.vc=null,d.yc=null,d.Ya=null;var _=d.Wa;_!=null&&(_.X=null),d.vb=null,e(d!=null)}function ei(){var d=new Oa;return d==null?null:(d.a=0,d.xb=Rl,Ze("Predictor","VP8LPredictors"),Ze("Predictor","VP8LPredictors_C"),Ze("PredictorAdd","VP8LPredictorsAdd"),Ze("PredictorAdd","VP8LPredictorsAdd_C"),sl=qe,As=Fe,Hr=De,Fr=on,us=pn,Li=cr,Wi=rn,vt.VP8LMapColor32b=Es,vt.VP8LMapColor8b=jo,d)}function Di(d,_,E,R,rt){var ot=1,ut=[d],pt=[_],_t=R.m,Mt=R.s,Jt=null,me=0;t:for(;;){if(E)for(;ot&&gt(_t,1);){var ve=ut,oe=pt,Ce=R,we=1,Qt=Ce.m,re=Ce.gc[Ce.ab],ke=gt(Qt,2);if(Ce.Oc&1<<ke)ot=0;else{switch(Ce.Oc|=1<<ke,re.hc=ke,re.Ea=ve[0],re.nc=oe[0],re.K=[null],++Ce.ab,e(4>=Ce.ab),ke){case 0:case 1:re.b=gt(Qt,3)+2,we=Di(ne(re.Ea,re.b),ne(re.nc,re.b),0,Ce,re.K),re.K=re.K[0];break;case 3:var Be,Ee=gt(Qt,8)+1,Ye=16<Ee?0:4<Ee?1:2<Ee?2:3;if(ve[0]=ne(re.Ea,Ye),re.b=Ye,Be=we=Di(Ee,1,0,Ce,re.K)){var Ve,cn=Ee,s=re,l=1<<(8>>s.b),h=a(l);if(h==null)Be=0;else{var g=s.K[0],y=s.w;for(h[0]=s.K[0][0],Ve=1;Ve<1*cn;++Ve)h[Ve]=Zt(g[y+Ve],h[Ve-1]);for(;Ve<4*l;++Ve)h[Ve]=0;s.K[0]=null,s.K[0]=h,Be=1}}we=Be;break;case 2:break;default:e(0)}ot=we}}if(ut=ut[0],pt=pt[0],ot&&gt(_t,1)&&!(ot=1<=(me=gt(_t,4))&&11>=me)){R.a=3;break t}var k;if(k=ot)e:{var T,N,G,it=R,It=ut,Bt=pt,ee=me,de=E,Pe=it.m,Oe=it.s,Ue=[null],mn=1,Rt=0,qt=fe[ee];n:for(;;){if(de&&gt(Pe,1)){var Yt=gt(Pe,3)+2,ye=ne(It,Yt),se=ne(Bt,Yt),ge=ye*se;if(!Di(ye,se,0,it,Ue))break n;for(Ue=Ue[0],Oe.xc=Yt,T=0;T<ge;++T){var X=Ue[T]>>8&65535;Ue[T]=X,X>=mn&&(mn=X+1)}}if(Pe.h)break n;for(N=0;5>N;++N){var st=P[N];!N&&0<ee&&(st+=1<<ee),Rt<st&&(Rt=st)}var xt=u(mn*qt,V),bt=mn,kt=u(bt,Et);if(kt==null)var Pt=null;else e(65536>=bt),Pt=kt;var Wt=a(Rt);if(Pt==null||Wt==null||xt==null){it.a=1;break n}var Vt=xt;for(T=G=0;T<mn;++T){var Xt=Pt[T],he=Xt.G,ce=Xt.H,Ae=0,Ke=1,Qe=0;for(N=0;5>N;++N){st=P[N],he[N]=Vt,ce[N]=G,!N&&0<ee&&(st+=1<<ee);i:{var sn,Hn=st,Zn=it,In=Wt,rr=Vt,Ei=G,cl=0,wo=Zn.m,Gu=gt(wo,1);if(o(In,0,0,Hn),Gu){var xo=gt(wo,1)+1,jl=gt(wo,1),fs=gt(wo,jl==0?1:8);In[fs]=1,xo==2&&(In[fs=gt(wo,8)]=1);var li=1}else{var kr=a(19),ip=gt(wo,4)+4;if(19<ip){Zn.a=3;var $c=0;break i}for(sn=0;sn<ip;++sn)kr[at[sn]]=gt(wo,3);var cf=void 0,Wu=void 0,sp=Zn,av=kr,Vc=Hn,op=In,hf=0,hl=sp.m,ap=8,lp=u(128,V);r:for(;Z(lp,0,7,av,19);){if(gt(hl,1)){var lv=2+2*gt(hl,3);if((cf=2+gt(hl,lv))>Vc)break r}else cf=Vc;for(Wu=0;Wu<Vc&&cf--;){ct(hl);var up=lp[0+(127&U(hl))];lt(hl,hl.u+up.g);var gu=up.value;if(16>gu)op[Wu++]=gu,gu!=0&&(ap=gu);else{var uv=gu==16,cp=gu-16,cv=m[cp],hp=gt(hl,c[cp])+cv;if(Wu+hp>Vc)break r;for(var hv=uv?ap:0;0<hp--;)op[Wu++]=hv}}hf=1;break r}hf||(sp.a=3),li=hf}(li=li&&!wo.h)&&(cl=Z(rr,Ei,8,In,Hn)),li&&cl!=0?$c=cl:(Zn.a=3,$c=0)}if($c==0)break n;if(Ke&&F[N]==1&&(Ke=Vt[G].g==0),Ae+=Vt[G].g,G+=$c,3>=N){var Zu,ff=Wt[0];for(Zu=1;Zu<st;++Zu)Wt[Zu]>ff&&(ff=Wt[Zu]);Qe+=ff}}if(Xt.nd=Ke,Xt.Qb=0,Ke&&(Xt.qb=(he[3][ce[3]+0].value<<24|he[1][ce[1]+0].value<<16|he[2][ce[2]+0].value)>>>0,Ae==0&&256>he[0][ce[0]+0].value&&(Xt.Qb=1,Xt.qb+=he[0][ce[0]+0].value<<8)),Xt.jc=!Xt.Qb&&6>Qe,Xt.jc){var Hc,za=Xt;for(Hc=0;Hc<Ar;++Hc){var fl=Hc,dl=za.pd[fl],Gc=za.G[0][za.H[0]+fl];256<=Gc.value?(dl.g=Gc.g+256,dl.value=Gc.value):(dl.g=0,dl.value=0,fl>>=Un(Gc,8,dl),fl>>=Un(za.G[1][za.H[1]+fl],16,dl),fl>>=Un(za.G[2][za.H[2]+fl],0,dl),Un(za.G[3][za.H[3]+fl],24,dl))}}}Oe.vc=Ue,Oe.Wb=mn,Oe.Ya=Pt,Oe.yc=xt,k=1;break e}k=0}if(!(ot=k)){R.a=3;break t}if(0<me){if(Mt.ua=1<<me,!yt(Mt.Wa,me)){R.a=1,ot=0;break t}}else Mt.ua=0;var df=R,fp=ut,fv=pt,pf=df.s,gf=pf.xc;if(df.c=fp,df.i=fv,pf.md=ne(fp,gf),pf.wc=gf==0?-1:(1<<gf)-1,E){R.xb=$u;break t}if((Jt=a(ut*pt))==null){R.a=1,ot=0;break t}ot=(ot=hi(R,Jt,0,ut,pt,pt,null))&&!_t.h;break t}return ot?(rt!=null?rt[0]=Jt:(e(Jt==null),e(E)),R.$=0,E||Ir(Mt)):Ir(Mt),ot}function bs(d,_){var E=d.c*d.i,R=E+_+16*_;return e(d.c<=_),d.V=a(R),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+E+_,1)}function qs(d,_){var E=d.C,R=_-E,rt=d.V,ot=d.Ba+d.c*E;for(e(_<=d.l.o);0<R;){var ut=16<R?16:R,pt=d.l.ma,_t=d.l.width,Mt=_t*ut,Jt=pt.ca,me=pt.tb+_t*E,ve=d.Ta,oe=d.Ua;$r(d,ut,rt,ot),Cr(ve,oe,Jt,me,Mt),ci(pt,E,E+ut,Jt,me,_t),R-=ut,rt+=ut*d.c,E+=ut}e(E==_),d.C=d.Ma=_}function $s(){this.ub=this.yd=this.td=this.Rb=0}function Ui(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function os(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function ws(){this.Yb=function(){var d=[];return function _(E,R,rt){for(var ot=rt[R],ut=0;ut<ot&&(E.push(rt.length>R+1?[]:0),!(rt.length<R+1));ut++)_(E[ut],R+1,rt)}(d,0,[3,11]),d}()}function Xn(){this.jb=a(3),this.Wc=f([4,8],ws),this.Xc=f([4,17],ws)}function xs(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Ls(){this.ld=this.La=this.dd=this.tc=0}function ea(){this.Na=this.la=0}function Nl(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ao(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Mo(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ls),this.Y=0,this.ya=Array(new Ao),this.aa=0,this.l=new Oi}function Pa(){this.y=a(16),this.f=a(8),this.ea=a(8)}function Qa(){this.cb=this.a=0,this.sc="",this.m=new Y,this.Od=new $s,this.Kc=new Ui,this.ed=new xs,this.Qa=new os,this.Ic=this.$c=this.Aa=0,this.D=new Mo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=u(8,Y),this.ia=0,this.pb=u(4,Nl),this.Pa=new Xn,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Pa),this.Hd=0,this.rb=Array(new ea),this.sb=0,this.wa=Array(new Ls),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ao),this.L=this.aa=0,this.gd=f([4,2],Ls),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Oi(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function jn(){var d=new Qa;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,ln||(ln=Cs)),d}function xn(d,_,E){return d.a==0&&(d.a=_,d.sc=E,d.cb=0),0}function oo(d,_,E){return 3<=E&&d[_+0]==157&&d[_+1]==1&&d[_+2]==42}function Vs(d,_){if(d==null)return 0;if(d.a=0,d.sc="OK",_==null)return xn(d,2,"null VP8Io passed to VP8GetHeaders()");var E=_.data,R=_.w,rt=_.ha;if(4>rt)return xn(d,7,"Truncated header.");var ot=E[R+0]|E[R+1]<<8|E[R+2]<<16,ut=d.Od;if(ut.Rb=!(1&ot),ut.td=ot>>1&7,ut.yd=ot>>4&1,ut.ub=ot>>5,3<ut.td)return xn(d,3,"Incorrect keyframe parameters.");if(!ut.yd)return xn(d,4,"Frame not displayable.");R+=3,rt-=3;var pt=d.Kc;if(ut.Rb){if(7>rt)return xn(d,7,"cannot parse picture header");if(!oo(E,R,rt))return xn(d,3,"Bad code word");pt.c=16383&(E[R+4]<<8|E[R+3]),pt.Td=E[R+4]>>6,pt.i=16383&(E[R+6]<<8|E[R+5]),pt.Ud=E[R+6]>>6,R+=7,rt-=7,d.za=pt.c+15>>4,d.Ub=pt.i+15>>4,_.width=pt.c,_.height=pt.i,_.Da=0,_.j=0,_.v=0,_.va=_.width,_.o=_.height,_.da=0,_.ib=_.width,_.hb=_.height,_.U=_.width,_.T=_.height,o((ot=d.Pa).jb,0,255,ot.jb.length),e((ot=d.Qa)!=null),ot.Cb=0,ot.Bb=0,ot.Fb=1,o(ot.Zb,0,0,ot.Zb.length),o(ot.Lb,0,0,ot.Lb)}if(ut.ub>rt)return xn(d,7,"bad partition length");M(ot=d.m,E,R,ut.ub),R+=ut.ub,rt-=ut.ub,ut.Rb&&(pt.Ld=ft(ot),pt.Kd=ft(ot)),pt=d.Qa;var _t,Mt=d.Pa;if(e(ot!=null),e(pt!=null),pt.Cb=ft(ot),pt.Cb){if(pt.Bb=ft(ot),ft(ot)){for(pt.Fb=ft(ot),_t=0;4>_t;++_t)pt.Zb[_t]=ft(ot)?q(ot,7):0;for(_t=0;4>_t;++_t)pt.Lb[_t]=ft(ot)?q(ot,6):0}if(pt.Bb)for(_t=0;3>_t;++_t)Mt.jb[_t]=ft(ot)?$(ot,8):255}else pt.Bb=0;if(ot.Ka)return xn(d,3,"cannot parse segment header");if((pt=d.ed).zd=ft(ot),pt.Tb=$(ot,6),pt.wb=$(ot,3),pt.Pc=ft(ot),pt.Pc&&ft(ot)){for(Mt=0;4>Mt;++Mt)ft(ot)&&(pt.vd[Mt]=q(ot,6));for(Mt=0;4>Mt;++Mt)ft(ot)&&(pt.od[Mt]=q(ot,6))}if(d.L=pt.Tb==0?0:pt.zd?1:2,ot.Ka)return xn(d,3,"cannot parse filter header");var Jt=rt;if(rt=_t=R,R=_t+Jt,pt=Jt,d.Xb=(1<<$(d.m,2))-1,Jt<3*(Mt=d.Xb))E=7;else{for(_t+=3*Mt,pt-=3*Mt,Jt=0;Jt<Mt;++Jt){var me=E[rt+0]|E[rt+1]<<8|E[rt+2]<<16;me>pt&&(me=pt),M(d.Jc[+Jt],E,_t,me),_t+=me,pt-=me,rt+=3}M(d.Jc[+Mt],E,_t,pt),E=_t<R?0:5}if(E!=0)return xn(d,E,"cannot parse partitions");for(E=$(_t=d.m,7),rt=ft(_t)?q(_t,4):0,R=ft(_t)?q(_t,4):0,pt=ft(_t)?q(_t,4):0,Mt=ft(_t)?q(_t,4):0,_t=ft(_t)?q(_t,4):0,Jt=d.Qa,me=0;4>me;++me){if(Jt.Cb){var ve=Jt.Zb[me];Jt.Fb||(ve+=E)}else{if(0<me){d.pb[me]=d.pb[0];continue}ve=E}var oe=d.pb[me];oe.Sc[0]=Me[Qn(ve+rt,127)],oe.Sc[1]=We[Qn(ve+0,127)],oe.Eb[0]=2*Me[Qn(ve+R,127)],oe.Eb[1]=101581*We[Qn(ve+pt,127)]>>16,8>oe.Eb[1]&&(oe.Eb[1]=8),oe.Qc[0]=Me[Qn(ve+Mt,117)],oe.Qc[1]=We[Qn(ve+_t,127)],oe.lc=ve+_t}if(!ut.Rb)return xn(d,4,"Not a key frame.");for(ft(ot),ut=d.Pa,E=0;4>E;++E){for(rt=0;8>rt;++rt)for(R=0;3>R;++R)for(pt=0;11>pt;++pt)Mt=ht(ot,Ds[E][rt][R][pt])?$(ot,8):Si[E][rt][R][pt],ut.Wc[E][rt].Yb[R][pt]=Mt;for(rt=0;17>rt;++rt)ut.Xc[E][rt]=ut.Wc[E][Ol[rt]]}return d.kc=ft(ot),d.kc&&(d.Bd=$(ot,8)),d.cb=1}function Cs(d,_,E,R,rt,ot,ut){var pt=_[rt].Yb[E];for(E=0;16>rt;++rt){if(!ht(d,pt[E+0]))return rt;for(;!ht(d,pt[E+1]);)if(pt=_[++rt].Yb[0],E=0,rt==16)return 16;var _t=_[rt+1].Yb;if(ht(d,pt[E+2])){var Mt=d,Jt=0;if(ht(Mt,(ve=pt)[(me=E)+3]))if(ht(Mt,ve[me+6])){for(pt=0,me=2*(Jt=ht(Mt,ve[me+8]))+(ve=ht(Mt,ve[me+9+Jt])),Jt=0,ve=Mn[me];ve[pt];++pt)Jt+=Jt+ht(Mt,ve[pt]);Jt+=3+(8<<me)}else ht(Mt,ve[me+7])?(Jt=7+2*ht(Mt,165),Jt+=ht(Mt,145)):Jt=5+ht(Mt,159);else Jt=ht(Mt,ve[me+4])?3+ht(Mt,ve[me+5]):2;pt=_t[2]}else Jt=1,pt=_t[1];_t=ut+_i[rt],0>(Mt=d).b&&tt(Mt);var me,ve=Mt.b,oe=(me=Mt.Ca>>1)-(Mt.I>>ve)>>31;--Mt.b,Mt.Ca+=oe,Mt.Ca|=1,Mt.I-=(me+1&oe)<<ve,ot[_t]=((Jt^oe)-oe)*R[(0<rt)+0]}return 16}function Bo(d){var _=d.rb[d.sb-1];_.la=0,_.Na=0,o(d.zc,0,0,d.zc.length),d.ja=0}function kn(d,_){if(d==null)return 0;if(_==null)return xn(d,2,"NULL VP8Io parameter in VP8Decode().");if(!d.cb&&!Vs(d,_))return 0;if(e(d.cb),_.ac==null||_.ac(_)){_.ob&&(d.L=0);var E=pu[d.L];if(d.L==2?(d.yb=0,d.zb=0):(d.yb=_.v-E>>4,d.zb=_.j-E>>4,0>d.yb&&(d.yb=0),0>d.zb&&(d.zb=0)),d.Va=_.o+15+E>>4,d.Hb=_.va+15+E>>4,d.Hb>d.za&&(d.Hb=d.za),d.Va>d.Ub&&(d.Va=d.Ub),0<d.L){var R=d.ed;for(E=0;4>E;++E){var rt;if(d.Qa.Cb){var ot=d.Qa.Lb[E];d.Qa.Fb||(ot+=R.Tb)}else ot=R.Tb;for(rt=0;1>=rt;++rt){var ut=d.gd[E][rt],pt=ot;if(R.Pc&&(pt+=R.vd[0],rt&&(pt+=R.od[0])),0<(pt=0>pt?0:63<pt?63:pt)){var _t=pt;0<R.wb&&(_t=4<R.wb?_t>>2:_t>>1)>9-R.wb&&(_t=9-R.wb),1>_t&&(_t=1),ut.dd=_t,ut.tc=2*pt+_t,ut.ld=40<=pt?2:15<=pt?1:0}else ut.tc=0;ut.La=rt}}}E=0}else xn(d,6,"Frame setup failed"),E=d.a;if(E=E==0){if(E){d.$c=0,0<d.Aa||(d.Ic=Uc);t:{E=d.Ic,R=4*(_t=d.za);var Mt=32*_t,Jt=_t+1,me=0<d.L?_t*(0<d.Aa?2:1):0,ve=(d.Aa==2?2:1)*_t;if((ut=R+832+(rt=3*(16*E+pu[d.L])/2*Mt)+(ot=d.Fa!=null&&0<d.Fa.length?d.Kc.c*d.Kc.i:0))!=ut)E=0;else{if(ut>d.Vb){if(d.Vb=0,d.Ec=a(ut),d.Fc=0,d.Ec==null){E=xn(d,1,"no memory during frame initialization.");break t}d.Vb=ut}ut=d.Ec,pt=d.Fc,d.Ac=ut,d.Bc=pt,pt+=R,d.Gd=u(Mt,Pa),d.Hd=0,d.rb=u(Jt+1,ea),d.sb=1,d.wa=me?u(me,Ls):null,d.Y=0,d.D.Nb=0,d.D.wa=d.wa,d.D.Y=d.Y,0<d.Aa&&(d.D.Y+=_t),e(!0),d.oc=ut,d.pc=pt,pt+=832,d.ya=u(ve,Ao),d.aa=0,d.D.ya=d.ya,d.D.aa=d.aa,d.Aa==2&&(d.D.aa+=_t),d.R=16*_t,d.B=8*_t,_t=(Mt=pu[d.L])*d.R,Mt=Mt/2*d.B,d.sa=ut,d.ta=pt+_t,d.qa=d.sa,d.ra=d.ta+16*E*d.R+Mt,d.Ha=d.qa,d.Ia=d.ra+8*E*d.B+Mt,d.$c=0,pt+=rt,d.mb=ot?ut:null,d.nb=ot?pt:null,e(pt+ot<=d.Fc+d.Vb),Bo(d),o(d.Ac,d.Bc,0,R),E=1}}if(E){if(_.ka=0,_.y=d.sa,_.O=d.ta,_.f=d.qa,_.N=d.ra,_.ea=d.Ha,_.Vd=d.Ia,_.fa=d.R,_.Rc=d.B,_.F=null,_.J=0,!ol){for(E=-255;255>=E;++E)tr[255+E]=0>E?-E:E;for(E=-1020;1020>=E;++E)cs[1020+E]=-128>E?-128:127<E?127:E;for(E=-112;112>=E;++E)_o[112+E]=-16>E?-16:15<E?15:E;for(E=-255;510>=E;++E)Ts[255+E]=0>E?0:255<E?255:E;ol=1}Qs=To,Zi=na,Ms=ks,mi=yr,ii=Ps,_r=tl,zo=Na,Fa=Ss,ja=Vi,si=ua,Ci=aa,mo=la,Bs=Tr,pa=rl,vo=Ta,yo=un,to=fi,Ki=Ro,Yi[0]=Rn,Yi[1]=Sa,Yi[2]=Ln,Yi[3]=qi,Yi[4]=Aa,Yi[5]=co,Yi[6]=sa,Yi[7]=$i,Yi[8]=Ma,Yi[9]=Ws,hs[0]=ra,hs[1]=Ea,hs[2]=as,hs[3]=Gs,hs[4]=Br,hs[5]=el,hs[6]=ia,ji[0]=Zs,ji[1]=lo,ji[2]=No,ji[3]=xr,ji[4]=Do,ji[5]=nl,ji[6]=oa,E=1}else E=0}E&&(E=function(oe,Ce){for(oe.M=0;oe.M<oe.Va;++oe.M){var we,Qt=oe.Jc[oe.M&oe.Xb],re=oe.m,ke=oe;for(we=0;we<ke.za;++we){var Be=re,Ee=ke,Ye=Ee.Ac,Ve=Ee.Bc+4*we,cn=Ee.zc,s=Ee.ya[Ee.aa+we];if(Ee.Qa.Bb?s.$b=ht(Be,Ee.Pa.jb[0])?2+ht(Be,Ee.Pa.jb[2]):ht(Be,Ee.Pa.jb[1]):s.$b=0,Ee.kc&&(s.Ad=ht(Be,Ee.Bd)),s.Za=!ht(Be,145)+0,s.Za){var l=s.Ob,h=0;for(Ee=0;4>Ee;++Ee){var g,y=cn[0+Ee];for(g=0;4>g;++g){y=br[Ye[Ve+g]][y];for(var k=Rr[ht(Be,y[0])];0<k;)k=Rr[2*k+ht(Be,y[k])];y=-k,Ye[Ve+g]=y}r(l,h,Ye,Ve,4),h+=4,cn[0+Ee]=y}}else y=ht(Be,156)?ht(Be,128)?1:3:ht(Be,163)?2:0,s.Ob[0]=y,o(Ye,Ve,y,4),o(cn,0,y,4);s.Dd=ht(Be,142)?ht(Be,114)?ht(Be,183)?1:3:2:0}if(ke.m.Ka)return xn(oe,7,"Premature end-of-partition0 encountered.");for(;oe.ja<oe.za;++oe.ja){if(ke=Qt,Be=(re=oe).rb[re.sb-1],Ye=re.rb[re.sb+re.ja],we=re.ya[re.aa+re.ja],Ve=re.kc?we.Ad:0)Be.la=Ye.la=0,we.Za||(Be.Na=Ye.Na=0),we.Hc=0,we.Gc=0,we.ia=0;else{var T,N;if(Be=Ye,Ye=ke,Ve=re.Pa.Xc,cn=re.ya[re.aa+re.ja],s=re.pb[cn.$b],Ee=cn.ad,l=0,h=re.rb[re.sb-1],y=g=0,o(Ee,l,0,384),cn.Za)var G=0,it=Ve[3];else{k=a(16);var It=Be.Na+h.Na;if(It=ln(Ye,Ve[1],It,s.Eb,0,k,0),Be.Na=h.Na=(0<It)+0,1<It)Qs(k,0,Ee,l);else{var Bt=k[0]+3>>3;for(k=0;256>k;k+=16)Ee[l+k]=Bt}G=1,it=Ve[0]}var ee=15&Be.la,de=15&h.la;for(k=0;4>k;++k){var Pe=1&de;for(Bt=N=0;4>Bt;++Bt)ee=ee>>1|(Pe=(It=ln(Ye,it,It=Pe+(1&ee),s.Sc,G,Ee,l))>G)<<7,N=N<<2|(3<It?3:1<It?2:Ee[l+0]!=0),l+=16;ee>>=4,de=de>>1|Pe<<7,g=(g<<8|N)>>>0}for(it=ee,G=de>>4,T=0;4>T;T+=2){for(N=0,ee=Be.la>>4+T,de=h.la>>4+T,k=0;2>k;++k){for(Pe=1&de,Bt=0;2>Bt;++Bt)It=Pe+(1&ee),ee=ee>>1|(Pe=0<(It=ln(Ye,Ve[2],It,s.Qc,0,Ee,l)))<<3,N=N<<2|(3<It?3:1<It?2:Ee[l+0]!=0),l+=16;ee>>=2,de=de>>1|Pe<<5}y|=N<<4*T,it|=ee<<4<<T,G|=(240&de)<<T}Be.la=it,h.la=G,cn.Hc=g,cn.Gc=y,cn.ia=43690&y?0:s.ia,Ve=!(g|y)}if(0<re.L&&(re.wa[re.Y+re.ja]=re.gd[we.$b][we.Za],re.wa[re.Y+re.ja].La|=!Ve),ke.Ka)return xn(oe,7,"Premature end-of-file encountered.")}if(Bo(oe),re=Ce,ke=1,we=(Qt=oe).D,Be=0<Qt.L&&Qt.M>=Qt.zb&&Qt.M<=Qt.Va,Qt.Aa==0)t:{if(we.M=Qt.M,we.uc=Be,Ra(Qt,we),ke=1,we=(N=Qt.D).Nb,Be=(y=pu[Qt.L])*Qt.R,Ye=y/2*Qt.B,k=16*we*Qt.R,Bt=8*we*Qt.B,Ve=Qt.sa,cn=Qt.ta-Be+k,s=Qt.qa,Ee=Qt.ra-Ye+Bt,l=Qt.Ha,h=Qt.Ia-Ye+Bt,de=(ee=N.M)==0,g=ee>=Qt.Va-1,Qt.Aa==2&&Ra(Qt,N),N.uc)for(Pe=(It=Qt).D.M,e(It.D.uc),N=It.yb;N<It.Hb;++N){G=N,it=Pe;var Oe=(Ue=(st=It).D).Nb;T=st.R;var Ue=Ue.wa[Ue.Y+G],mn=st.sa,Rt=st.ta+16*Oe*T+16*G,qt=Ue.dd,Yt=Ue.tc;if(Yt!=0)if(e(3<=Yt),st.L==1)0<G&&yo(mn,Rt,T,Yt+4),Ue.La&&Ki(mn,Rt,T,Yt),0<it&&vo(mn,Rt,T,Yt+4),Ue.La&&to(mn,Rt,T,Yt);else{var ye=st.B,se=st.qa,ge=st.ra+8*Oe*ye+8*G,X=st.Ha,st=st.Ia+8*Oe*ye+8*G;Oe=Ue.ld,0<G&&(Fa(mn,Rt,T,Yt+4,qt,Oe),si(se,ge,X,st,ye,Yt+4,qt,Oe)),Ue.La&&(mo(mn,Rt,T,Yt,qt,Oe),pa(se,ge,X,st,ye,Yt,qt,Oe)),0<it&&(zo(mn,Rt,T,Yt+4,qt,Oe),ja(se,ge,X,st,ye,Yt+4,qt,Oe)),Ue.La&&(Ci(mn,Rt,T,Yt,qt,Oe),Bs(se,ge,X,st,ye,Yt,qt,Oe))}}if(Qt.ia&&alert("todo:DitherRow"),re.put!=null){if(N=16*ee,ee=16*(ee+1),de?(re.y=Qt.sa,re.O=Qt.ta+k,re.f=Qt.qa,re.N=Qt.ra+Bt,re.ea=Qt.Ha,re.W=Qt.Ia+Bt):(N-=y,re.y=Ve,re.O=cn,re.f=s,re.N=Ee,re.ea=l,re.W=h),g||(ee-=y),ee>re.o&&(ee=re.o),re.F=null,re.J=null,Qt.Fa!=null&&0<Qt.Fa.length&&N<ee&&(re.J=Lr(Qt,re,N,ee-N),re.F=Qt.mb,re.F==null&&re.F.length==0)){ke=xn(Qt,3,"Could not decode alpha data.");break t}N<re.j&&(y=re.j-N,N=re.j,e(!(1&y)),re.O+=Qt.R*y,re.N+=Qt.B*(y>>1),re.W+=Qt.B*(y>>1),re.F!=null&&(re.J+=re.width*y)),N<ee&&(re.O+=re.v,re.N+=re.v>>1,re.W+=re.v>>1,re.F!=null&&(re.J+=re.v),re.ka=N-re.j,re.U=re.va-re.v,re.T=ee-N,ke=re.put(re))}we+1!=Qt.Ic||g||(r(Qt.sa,Qt.ta-Be,Ve,cn+16*Qt.R,Be),r(Qt.qa,Qt.ra-Ye,s,Ee+8*Qt.B,Ye),r(Qt.Ha,Qt.Ia-Ye,l,h+8*Qt.B,Ye))}if(!ke)return xn(oe,6,"Output aborted.")}return 1}(d,_)),_.bc!=null&&_.bc(_),E&=1}return E?(d.cb=0,E):0}function $n(d,_,E,R,rt){rt=d[_+E+32*R]+(rt>>3),d[_+E+32*R]=-256&rt?0>rt?0:255:rt}function ao(d,_,E,R,rt,ot){$n(d,_,0,E,R+rt),$n(d,_,1,E,R+ot),$n(d,_,2,E,R-ot),$n(d,_,3,E,R-rt)}function Vr(d){return(20091*d>>16)+d}function ni(d,_,E,R){var rt,ot=0,ut=a(16);for(rt=0;4>rt;++rt){var pt=d[_+0]+d[_+8],_t=d[_+0]-d[_+8],Mt=(35468*d[_+4]>>16)-Vr(d[_+12]),Jt=Vr(d[_+4])+(35468*d[_+12]>>16);ut[ot+0]=pt+Jt,ut[ot+1]=_t+Mt,ut[ot+2]=_t-Mt,ut[ot+3]=pt-Jt,ot+=4,_++}for(rt=ot=0;4>rt;++rt)pt=(d=ut[ot+0]+4)+ut[ot+8],_t=d-ut[ot+8],Mt=(35468*ut[ot+4]>>16)-Vr(ut[ot+12]),$n(E,R,0,0,pt+(Jt=Vr(ut[ot+4])+(35468*ut[ot+12]>>16))),$n(E,R,1,0,_t+Mt),$n(E,R,2,0,_t-Mt),$n(E,R,3,0,pt-Jt),ot++,R+=32}function tl(d,_,E,R){var rt=d[_+0]+4,ot=35468*d[_+4]>>16,ut=Vr(d[_+4]),pt=35468*d[_+1]>>16;ao(E,R,0,rt+ut,d=Vr(d[_+1]),pt),ao(E,R,1,rt+ot,d,pt),ao(E,R,2,rt-ot,d,pt),ao(E,R,3,rt-ut,d,pt)}function na(d,_,E,R,rt){ni(d,_,E,R),rt&&ni(d,_+16,E,R+4)}function ks(d,_,E,R){Zi(d,_+0,E,R,1),Zi(d,_+32,E,R+128,1)}function yr(d,_,E,R){var rt;for(d=d[_+0]+4,rt=0;4>rt;++rt)for(_=0;4>_;++_)$n(E,R,_,rt,d)}function Ps(d,_,E,R){d[_+0]&&mi(d,_+0,E,R),d[_+16]&&mi(d,_+16,E,R+4),d[_+32]&&mi(d,_+32,E,R+128),d[_+48]&&mi(d,_+48,E,R+128+4)}function To(d,_,E,R){var rt,ot=a(16);for(rt=0;4>rt;++rt){var ut=d[_+0+rt]+d[_+12+rt],pt=d[_+4+rt]+d[_+8+rt],_t=d[_+4+rt]-d[_+8+rt],Mt=d[_+0+rt]-d[_+12+rt];ot[0+rt]=ut+pt,ot[8+rt]=ut-pt,ot[4+rt]=Mt+_t,ot[12+rt]=Mt-_t}for(rt=0;4>rt;++rt)ut=(d=ot[0+4*rt]+3)+ot[3+4*rt],pt=ot[1+4*rt]+ot[2+4*rt],_t=ot[1+4*rt]-ot[2+4*rt],Mt=d-ot[3+4*rt],E[R+0]=ut+pt>>3,E[R+16]=Mt+_t>>3,E[R+32]=ut-pt>>3,E[R+48]=Mt-_t>>3,R+=64}function Hs(d,_,E){var R,rt=_-32,ot=er,ut=255-d[rt-1];for(R=0;R<E;++R){var pt,_t=ot,Mt=ut+d[_-1];for(pt=0;pt<E;++pt)d[_+pt]=_t[Mt+d[rt+pt]];_+=32}}function Sa(d,_){Hs(d,_,4)}function lo(d,_){Hs(d,_,8)}function Ea(d,_){Hs(d,_,16)}function as(d,_){var E;for(E=0;16>E;++E)r(d,_+32*E,d,_-32,16)}function Gs(d,_){var E;for(E=16;0<E;--E)o(d,_,d[_-1],16),_+=32}function uo(d,_,E){var R;for(R=0;16>R;++R)o(_,E+32*R,d,16)}function ra(d,_){var E,R=16;for(E=0;16>E;++E)R+=d[_-1+32*E]+d[_+E-32];uo(R>>5,d,_)}function Br(d,_){var E,R=8;for(E=0;16>E;++E)R+=d[_-1+32*E];uo(R>>4,d,_)}function el(d,_){var E,R=8;for(E=0;16>E;++E)R+=d[_+E-32];uo(R>>4,d,_)}function ia(d,_){uo(128,d,_)}function bn(d,_,E){return d+2*_+E+2>>2}function Ln(d,_){var E,R=_-32;for(R=new Uint8Array([bn(d[R-1],d[R+0],d[R+1]),bn(d[R+0],d[R+1],d[R+2]),bn(d[R+1],d[R+2],d[R+3]),bn(d[R+2],d[R+3],d[R+4])]),E=0;4>E;++E)r(d,_+32*E,R,0,R.length)}function qi(d,_){var E=d[_-1],R=d[_-1+32],rt=d[_-1+64],ot=d[_-1+96];At(d,_+0,16843009*bn(d[_-1-32],E,R)),At(d,_+32,16843009*bn(E,R,rt)),At(d,_+64,16843009*bn(R,rt,ot)),At(d,_+96,16843009*bn(rt,ot,ot))}function Rn(d,_){var E,R=4;for(E=0;4>E;++E)R+=d[_+E-32]+d[_-1+32*E];for(R>>=3,E=0;4>E;++E)o(d,_+32*E,R,4)}function Aa(d,_){var E=d[_-1+0],R=d[_-1+32],rt=d[_-1+64],ot=d[_-1-32],ut=d[_+0-32],pt=d[_+1-32],_t=d[_+2-32],Mt=d[_+3-32];d[_+0+96]=bn(R,rt,d[_-1+96]),d[_+1+96]=d[_+0+64]=bn(E,R,rt),d[_+2+96]=d[_+1+64]=d[_+0+32]=bn(ot,E,R),d[_+3+96]=d[_+2+64]=d[_+1+32]=d[_+0+0]=bn(ut,ot,E),d[_+3+64]=d[_+2+32]=d[_+1+0]=bn(pt,ut,ot),d[_+3+32]=d[_+2+0]=bn(_t,pt,ut),d[_+3+0]=bn(Mt,_t,pt)}function sa(d,_){var E=d[_+1-32],R=d[_+2-32],rt=d[_+3-32],ot=d[_+4-32],ut=d[_+5-32],pt=d[_+6-32],_t=d[_+7-32];d[_+0+0]=bn(d[_+0-32],E,R),d[_+1+0]=d[_+0+32]=bn(E,R,rt),d[_+2+0]=d[_+1+32]=d[_+0+64]=bn(R,rt,ot),d[_+3+0]=d[_+2+32]=d[_+1+64]=d[_+0+96]=bn(rt,ot,ut),d[_+3+32]=d[_+2+64]=d[_+1+96]=bn(ot,ut,pt),d[_+3+64]=d[_+2+96]=bn(ut,pt,_t),d[_+3+96]=bn(pt,_t,_t)}function co(d,_){var E=d[_-1+0],R=d[_-1+32],rt=d[_-1+64],ot=d[_-1-32],ut=d[_+0-32],pt=d[_+1-32],_t=d[_+2-32],Mt=d[_+3-32];d[_+0+0]=d[_+1+64]=ot+ut+1>>1,d[_+1+0]=d[_+2+64]=ut+pt+1>>1,d[_+2+0]=d[_+3+64]=pt+_t+1>>1,d[_+3+0]=_t+Mt+1>>1,d[_+0+96]=bn(rt,R,E),d[_+0+64]=bn(R,E,ot),d[_+0+32]=d[_+1+96]=bn(E,ot,ut),d[_+1+32]=d[_+2+96]=bn(ot,ut,pt),d[_+2+32]=d[_+3+96]=bn(ut,pt,_t),d[_+3+32]=bn(pt,_t,Mt)}function $i(d,_){var E=d[_+0-32],R=d[_+1-32],rt=d[_+2-32],ot=d[_+3-32],ut=d[_+4-32],pt=d[_+5-32],_t=d[_+6-32],Mt=d[_+7-32];d[_+0+0]=E+R+1>>1,d[_+1+0]=d[_+0+64]=R+rt+1>>1,d[_+2+0]=d[_+1+64]=rt+ot+1>>1,d[_+3+0]=d[_+2+64]=ot+ut+1>>1,d[_+0+32]=bn(E,R,rt),d[_+1+32]=d[_+0+96]=bn(R,rt,ot),d[_+2+32]=d[_+1+96]=bn(rt,ot,ut),d[_+3+32]=d[_+2+96]=bn(ot,ut,pt),d[_+3+64]=bn(ut,pt,_t),d[_+3+96]=bn(pt,_t,Mt)}function Ws(d,_){var E=d[_-1+0],R=d[_-1+32],rt=d[_-1+64],ot=d[_-1+96];d[_+0+0]=E+R+1>>1,d[_+2+0]=d[_+0+32]=R+rt+1>>1,d[_+2+32]=d[_+0+64]=rt+ot+1>>1,d[_+1+0]=bn(E,R,rt),d[_+3+0]=d[_+1+32]=bn(R,rt,ot),d[_+3+32]=d[_+1+64]=bn(rt,ot,ot),d[_+3+64]=d[_+2+64]=d[_+0+96]=d[_+1+96]=d[_+2+96]=d[_+3+96]=ot}function Ma(d,_){var E=d[_-1+0],R=d[_-1+32],rt=d[_-1+64],ot=d[_-1+96],ut=d[_-1-32],pt=d[_+0-32],_t=d[_+1-32],Mt=d[_+2-32];d[_+0+0]=d[_+2+32]=E+ut+1>>1,d[_+0+32]=d[_+2+64]=R+E+1>>1,d[_+0+64]=d[_+2+96]=rt+R+1>>1,d[_+0+96]=ot+rt+1>>1,d[_+3+0]=bn(pt,_t,Mt),d[_+2+0]=bn(ut,pt,_t),d[_+1+0]=d[_+3+32]=bn(E,ut,pt),d[_+1+32]=d[_+3+64]=bn(R,E,ut),d[_+1+64]=d[_+3+96]=bn(rt,R,E),d[_+1+96]=bn(ot,rt,R)}function No(d,_){var E;for(E=0;8>E;++E)r(d,_+32*E,d,_-32,8)}function xr(d,_){var E;for(E=0;8>E;++E)o(d,_,d[_-1],8),_+=32}function Ri(d,_,E){var R;for(R=0;8>R;++R)o(_,E+32*R,d,8)}function Zs(d,_){var E,R=8;for(E=0;8>E;++E)R+=d[_+E-32]+d[_-1+32*E];Ri(R>>4,d,_)}function nl(d,_){var E,R=4;for(E=0;8>E;++E)R+=d[_+E-32];Ri(R>>3,d,_)}function Do(d,_){var E,R=4;for(E=0;8>E;++E)R+=d[_-1+32*E];Ri(R>>3,d,_)}function oa(d,_){Ri(128,d,_)}function ho(d,_,E){var R=d[_-E],rt=d[_+0],ot=3*(rt-R)+bo[1020+d[_-2*E]-d[_+E]],ut=Or[112+(ot+4>>3)];d[_-E]=er[255+R+Or[112+(ot+3>>3)]],d[_+0]=er[255+rt-ut]}function Oo(d,_,E,R){var rt=d[_+0],ot=d[_+E];return ki[255+d[_-2*E]-d[_-E]]>R||ki[255+ot-rt]>R}function Ba(d,_,E,R){return 4*ki[255+d[_-E]-d[_+0]]+ki[255+d[_-2*E]-d[_+E]]<=R}function Nn(d,_,E,R,rt){var ot=d[_-3*E],ut=d[_-2*E],pt=d[_-E],_t=d[_+0],Mt=d[_+E],Jt=d[_+2*E],me=d[_+3*E];return 4*ki[255+pt-_t]+ki[255+ut-Mt]>R?0:ki[255+d[_-4*E]-ot]<=rt&&ki[255+ot-ut]<=rt&&ki[255+ut-pt]<=rt&&ki[255+me-Jt]<=rt&&ki[255+Jt-Mt]<=rt&&ki[255+Mt-_t]<=rt}function Ta(d,_,E,R){var rt=2*R+1;for(R=0;16>R;++R)Ba(d,_+R,E,rt)&&ho(d,_+R,E)}function un(d,_,E,R){var rt=2*R+1;for(R=0;16>R;++R)Ba(d,_+R*E,1,rt)&&ho(d,_+R*E,1)}function fi(d,_,E,R){var rt;for(rt=3;0<rt;--rt)Ta(d,_+=4*E,E,R)}function Ro(d,_,E,R){var rt;for(rt=3;0<rt;--rt)un(d,_+=4,E,R)}function fo(d,_,E,R,rt,ot,ut,pt){for(ot=2*ot+1;0<rt--;){if(Nn(d,_,E,ot,ut))if(Oo(d,_,E,pt))ho(d,_,E);else{var _t=d,Mt=_,Jt=E,me=_t[Mt-2*Jt],ve=_t[Mt-Jt],oe=_t[Mt+0],Ce=_t[Mt+Jt],we=_t[Mt+2*Jt],Qt=27*(ke=bo[1020+3*(oe-ve)+bo[1020+me-Ce]])+63>>7,re=18*ke+63>>7,ke=9*ke+63>>7;_t[Mt-3*Jt]=er[255+_t[Mt-3*Jt]+ke],_t[Mt-2*Jt]=er[255+me+re],_t[Mt-Jt]=er[255+ve+Qt],_t[Mt+0]=er[255+oe-Qt],_t[Mt+Jt]=er[255+Ce-re],_t[Mt+2*Jt]=er[255+we-ke]}_+=R}}function wi(d,_,E,R,rt,ot,ut,pt){for(ot=2*ot+1;0<rt--;){if(Nn(d,_,E,ot,ut))if(Oo(d,_,E,pt))ho(d,_,E);else{var _t=d,Mt=_,Jt=E,me=_t[Mt-Jt],ve=_t[Mt+0],oe=_t[Mt+Jt],Ce=Or[112+((we=3*(ve-me))+4>>3)],we=Or[112+(we+3>>3)],Qt=Ce+1>>1;_t[Mt-2*Jt]=er[255+_t[Mt-2*Jt]+Qt],_t[Mt-Jt]=er[255+me+we],_t[Mt+0]=er[255+ve-Ce],_t[Mt+Jt]=er[255+oe-Qt]}_+=R}}function Na(d,_,E,R,rt,ot){fo(d,_,E,1,16,R,rt,ot)}function Ss(d,_,E,R,rt,ot){fo(d,_,1,E,16,R,rt,ot)}function aa(d,_,E,R,rt,ot){var ut;for(ut=3;0<ut;--ut)wi(d,_+=4*E,E,1,16,R,rt,ot)}function la(d,_,E,R,rt,ot){var ut;for(ut=3;0<ut;--ut)wi(d,_+=4,1,E,16,R,rt,ot)}function Vi(d,_,E,R,rt,ot,ut,pt){fo(d,_,rt,1,8,ot,ut,pt),fo(E,R,rt,1,8,ot,ut,pt)}function ua(d,_,E,R,rt,ot,ut,pt){fo(d,_,1,rt,8,ot,ut,pt),fo(E,R,1,rt,8,ot,ut,pt)}function Tr(d,_,E,R,rt,ot,ut,pt){wi(d,_+4*rt,rt,1,8,ot,ut,pt),wi(E,R+4*rt,rt,1,8,ot,ut,pt)}function rl(d,_,E,R,rt,ot,ut,pt){wi(d,_+4,1,rt,8,ot,ut,pt),wi(E,R+4,1,rt,8,ot,ut,pt)}function Io(){this.ba=new or,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new qn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Hi(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ca(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Da(){this.ua=0,this.Wa=new K,this.vb=new K,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Et,this.yc=new V}function Oa(){this.xb=this.a=0,this.l=new Oi,this.ca=new or,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new A,this.Pb=0,this.wd=new A,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Da,this.ab=0,this.gc=u(4,ca),this.Oc=0}function ha(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Oi,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function po(d,_,E,R,rt,ot,ut){for(d=d==null?0:d[_+0],_=0;_<ut;++_)rt[ot+_]=d+E[R+_]&255,d=rt[ot+_]}function Fo(d,_,E,R,rt,ot,ut){var pt;if(d==null)po(null,null,E,R,rt,ot,ut);else for(pt=0;pt<ut;++pt)rt[ot+pt]=d[_+pt]+E[R+pt]&255}function go(d,_,E,R,rt,ot,ut){if(d==null)po(null,null,E,R,rt,ot,ut);else{var pt,_t=d[_+0],Mt=_t,Jt=_t;for(pt=0;pt<ut;++pt)Mt=Jt+(_t=d[_+pt])-Mt,Jt=E[R+pt]+(-256&Mt?0>Mt?0:255:Mt)&255,Mt=_t,rt[ot+pt]=Jt}}function Lr(d,_,E,R){var rt=_.width,ot=_.o;if(e(d!=null&&_!=null),0>E||0>=R||E+R>ot)return null;if(!d.Cc){if(d.ga==null){var ut;if(d.ga=new ha,(ut=d.ga==null)||(ut=_.width*_.o,e(d.Gb.length==0),d.Gb=a(ut),d.Uc=0,d.Gb==null?ut=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,ut=1),ut=!ut),!ut){ut=d.ga;var pt=d.Fa,_t=d.P,Mt=d.qc,Jt=d.mb,me=d.nb,ve=_t+1,oe=Mt-1,Ce=ut.l;if(e(pt!=null&&Jt!=null&&_!=null),Yn[0]=null,Yn[1]=po,Yn[2]=Fo,Yn[3]=go,ut.ca=Jt,ut.tb=me,ut.c=_.width,ut.i=_.height,e(0<ut.c&&0<ut.i),1>=Mt)_=0;else if(ut.$a=pt[_t+0]>>0&3,ut.Z=pt[_t+0]>>2&3,ut.Lc=pt[_t+0]>>4&3,_t=pt[_t+0]>>6&3,0>ut.$a||1<ut.$a||4<=ut.Z||1<ut.Lc||_t)_=0;else if(Ce.put=je,Ce.ac=ar,Ce.bc=hr,Ce.ma=ut,Ce.width=_.width,Ce.height=_.height,Ce.Da=_.Da,Ce.v=_.v,Ce.va=_.va,Ce.j=_.j,Ce.o=_.o,ut.$a)t:{e(ut.$a==1),_=ei();e:for(;;){if(_==null){_=0;break t}if(e(ut!=null),ut.mc=_,_.c=ut.c,_.i=ut.i,_.l=ut.l,_.l.ma=ut,_.l.width=ut.c,_.l.height=ut.i,_.a=0,O(_.m,pt,ve,oe),!Di(ut.c,ut.i,1,_,null)||(_.ab==1&&_.gc[0].hc==3&&bi(_.s)?(ut.ic=1,pt=_.c*_.i,_.Ta=null,_.Ua=0,_.V=a(pt),_.Ba=0,_.V==null?(_.a=1,_=0):_=1):(ut.ic=0,_=bs(_,ut.c)),!_))break e;_=1;break t}ut.mc=null,_=0}else _=oe>=ut.c*ut.i;ut=!_}if(ut)return null;d.ga.Lc!=1?d.Ga=0:R=ot-E}e(d.ga!=null),e(E+R<=ot);t:{if(_=(pt=d.ga).c,ot=pt.l.o,pt.$a==0){if(ve=d.rc,oe=d.Vc,Ce=d.Fa,_t=d.P+1+E*_,Mt=d.mb,Jt=d.nb+E*_,e(_t<=d.P+d.qc),pt.Z!=0)for(e(Yn[pt.Z]!=null),ut=0;ut<R;++ut)Yn[pt.Z](ve,oe,Ce,_t,Mt,Jt,_),ve=Mt,oe=Jt,Jt+=_,_t+=_;else for(ut=0;ut<R;++ut)r(Mt,Jt,Ce,_t,_),ve=Mt,oe=Jt,Jt+=_,_t+=_;d.rc=ve,d.Vc=oe}else{if(e(pt.mc!=null),_=E+R,e((ut=pt.mc)!=null),e(_<=ut.i),ut.C>=_)_=1;else if(pt.ic||le(),pt.ic){pt=ut.V,ve=ut.Ba,oe=ut.c;var we=ut.i,Qt=(Ce=1,_t=ut.$/oe,Mt=ut.$%oe,Jt=ut.m,me=ut.s,ut.$),re=oe*we,ke=oe*_,Be=me.wc,Ee=Qt<ke?$e(me,Mt,_t):null;e(Qt<=re),e(_<=we),e(bi(me));e:for(;;){for(;!Jt.h&&Qt<ke;){if(Mt&Be||(Ee=$e(me,Mt,_t)),e(Ee!=null),ct(Jt),256>(we=qr(Ee.G[0],Ee.H[0],Jt)))pt[ve+Qt]=we,++Qt,++Mt>=oe&&(Mt=0,++_t<=_&&!(_t%16)&&ti(ut,_t));else{if(!(280>we)){Ce=0;break e}we=nr(we-256,Jt);var Ye,Ve=qr(Ee.G[4],Ee.H[4],Jt);if(ct(Jt),!(Qt>=(Ve=Ni(oe,Ve=nr(Ve,Jt)))&&re-Qt>=we)){Ce=0;break e}for(Ye=0;Ye<we;++Ye)pt[ve+Qt+Ye]=pt[ve+Qt+Ye-Ve];for(Qt+=we,Mt+=we;Mt>=oe;)Mt-=oe,++_t<=_&&!(_t%16)&&ti(ut,_t);Qt<ke&&Mt&Be&&(Ee=$e(me,Mt,_t))}e(Jt.h==et(Jt))}ti(ut,_t>_?_:_t);break e}!Ce||Jt.h&&Qt<re?(Ce=0,ut.a=Jt.h?5:3):ut.$=Qt,_=Ce}else _=hi(ut,ut.V,ut.Ba,ut.c,ut.i,_,qs);if(!_){R=0;break t}}E+R>=ot&&(d.Cc=1),R=1}if(!R)return null;if(d.Cc&&((R=d.ga)!=null&&(R.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+E*rt}function C(d,_,E,R,rt,ot){for(;0<rt--;){var ut,pt=d,_t=_+(E?1:0),Mt=d,Jt=_+(E?0:3);for(ut=0;ut<R;++ut){var me=Mt[Jt+4*ut];me!=255&&(me*=32897,pt[_t+4*ut+0]=pt[_t+4*ut+0]*me>>23,pt[_t+4*ut+1]=pt[_t+4*ut+1]*me>>23,pt[_t+4*ut+2]=pt[_t+4*ut+2]*me>>23)}_+=ot}}function nt(d,_,E,R,rt){for(;0<R--;){var ot;for(ot=0;ot<E;++ot){var ut=d[_+2*ot+0],pt=15&(Mt=d[_+2*ot+1]),_t=4369*pt,Mt=(240&Mt|Mt>>4)*_t>>16;d[_+2*ot+0]=(240&ut|ut>>4)*_t>>16&240|(15&ut|ut<<4)*_t>>16>>4&15,d[_+2*ot+1]=240&Mt|pt}_+=rt}}function Ot(d,_,E,R,rt,ot,ut,pt){var _t,Mt,Jt=255;for(Mt=0;Mt<rt;++Mt){for(_t=0;_t<R;++_t){var me=d[_+_t];ot[ut+4*_t]=me,Jt&=me}_+=E,ut+=pt}return Jt!=255}function Gt(d,_,E,R,rt){var ot;for(ot=0;ot<rt;++ot)E[R+ot]=d[_+ot]>>8}function le(){Gr=C,Jn=nt,Wn=Ot,Cr=Gt}function be(d,_,E){vt[d]=function(R,rt,ot,ut,pt,_t,Mt,Jt,me,ve,oe,Ce,we,Qt,re,ke,Be){var Ee,Ye=Be-1>>1,Ve=pt[_t+0]|Mt[Jt+0]<<16,cn=me[ve+0]|oe[Ce+0]<<16;e(R!=null);var s=3*Ve+cn+131074>>2;for(_(R[rt+0],255&s,s>>16,we,Qt),ot!=null&&(s=3*cn+Ve+131074>>2,_(ot[ut+0],255&s,s>>16,re,ke)),Ee=1;Ee<=Ye;++Ee){var l=pt[_t+Ee]|Mt[Jt+Ee]<<16,h=me[ve+Ee]|oe[Ce+Ee]<<16,g=Ve+l+cn+h+524296,y=g+2*(l+cn)>>3;s=y+Ve>>1,Ve=(g=g+2*(Ve+h)>>3)+l>>1,_(R[rt+2*Ee-1],255&s,s>>16,we,Qt+(2*Ee-1)*E),_(R[rt+2*Ee-0],255&Ve,Ve>>16,we,Qt+(2*Ee-0)*E),ot!=null&&(s=g+cn>>1,Ve=y+h>>1,_(ot[ut+2*Ee-1],255&s,s>>16,re,ke+(2*Ee-1)*E),_(ot[ut+2*Ee+0],255&Ve,Ve>>16,re,ke+(2*Ee+0)*E)),Ve=l,cn=h}1&Be||(s=3*Ve+cn+131074>>2,_(R[rt+Be-1],255&s,s>>16,we,Qt+(Be-1)*E),ot!=null&&(s=3*cn+Ve+131074>>2,_(ot[ut+Be-1],255&s,s>>16,re,ke+(Be-1)*E)))}}function Te(){ai[Pi]=Vu,ai[gn]=lu,ai[al]=Os,ai[Uo]=qo,ai[Ji]=ll,ai[oi]=uu,ai[Dl]=Ic,ai[vi]=lu,ai[yi]=qo,ai[Ns]=ll,ai[i]=uu}function Ge(d){return d&-16384?0>d?0:255:d>>af}function Je(d,_){return Ge((19077*d>>8)+(26149*_>>8)-14234)}function an(d,_,E){return Ge((19077*d>>8)-(6419*_>>8)-(13320*E>>8)+8708)}function vn(d,_){return Ge((19077*d>>8)+(33050*_>>8)-17685)}function Dn(d,_,E,R,rt){R[rt+0]=Je(d,E),R[rt+1]=an(d,_,E),R[rt+2]=vn(d,_)}function lr(d,_,E,R,rt){R[rt+0]=vn(d,_),R[rt+1]=an(d,_,E),R[rt+2]=Je(d,E)}function zn(d,_,E,R,rt){var ot=an(d,_,E);_=ot<<3&224|vn(d,_)>>3,R[rt+0]=248&Je(d,E)|ot>>5,R[rt+1]=_}function Gn(d,_,E,R,rt){var ot=240&vn(d,_)|15;R[rt+0]=240&Je(d,E)|an(d,_,E)>>4,R[rt+1]=ot}function Nr(d,_,E,R,rt){R[rt+0]=255,Dn(d,_,E,R,rt+1)}function Er(d,_,E,R,rt){lr(d,_,E,R,rt),R[rt+3]=255}function Ii(d,_,E,R,rt){Dn(d,_,E,R,rt),R[rt+3]=255}function Qn(d,_){return 0>d?0:d>_?_:d}function di(d,_,E){vt[d]=function(R,rt,ot,ut,pt,_t,Mt,Jt,me){for(var ve=Jt+(-2&me)*E;Jt!=ve;)_(R[rt+0],ot[ut+0],pt[_t+0],Mt,Jt),_(R[rt+1],ot[ut+0],pt[_t+0],Mt,Jt+E),rt+=2,++ut,++_t,Jt+=2*E;1&me&&_(R[rt+0],ot[ut+0],pt[_t+0],Mt,Jt)}}function il(d,_,E){return E==0?d==0?_==0?6:5:_==0?4:0:E}function pi(d,_,E,R,rt){switch(d>>>30){case 3:Zi(_,E,R,rt,0);break;case 2:_r(_,E,R,rt);break;case 1:mi(_,E,R,rt)}}function Ra(d,_){var E,R,rt=_.M,ot=_.Nb,ut=d.oc,pt=d.pc+40,_t=d.oc,Mt=d.pc+584,Jt=d.oc,me=d.pc+600;for(E=0;16>E;++E)ut[pt+32*E-1]=129;for(E=0;8>E;++E)_t[Mt+32*E-1]=129,Jt[me+32*E-1]=129;for(0<rt?ut[pt-1-32]=_t[Mt-1-32]=Jt[me-1-32]=129:(o(ut,pt-32-1,127,21),o(_t,Mt-32-1,127,9),o(Jt,me-32-1,127,9)),R=0;R<d.za;++R){var ve=_.ya[_.aa+R];if(0<R){for(E=-1;16>E;++E)r(ut,pt+32*E-4,ut,pt+32*E+12,4);for(E=-1;8>E;++E)r(_t,Mt+32*E-4,_t,Mt+32*E+4,4),r(Jt,me+32*E-4,Jt,me+32*E+4,4)}var oe=d.Gd,Ce=d.Hd+R,we=ve.ad,Qt=ve.Hc;if(0<rt&&(r(ut,pt-32,oe[Ce].y,0,16),r(_t,Mt-32,oe[Ce].f,0,8),r(Jt,me-32,oe[Ce].ea,0,8)),ve.Za){var re=ut,ke=pt-32+16;for(0<rt&&(R>=d.za-1?o(re,ke,oe[Ce].y[15],4):r(re,ke,oe[Ce+1].y,0,4)),E=0;4>E;E++)re[ke+128+E]=re[ke+256+E]=re[ke+384+E]=re[ke+0+E];for(E=0;16>E;++E,Qt<<=2)re=ut,ke=pt+jc[E],Yi[ve.Ob[E]](re,ke),pi(Qt,we,16*+E,re,ke)}else if(re=il(R,rt,ve.Ob[0]),hs[re](ut,pt),Qt!=0)for(E=0;16>E;++E,Qt<<=2)pi(Qt,we,16*+E,ut,pt+jc[E]);for(E=ve.Gc,re=il(R,rt,ve.Dd),ji[re](_t,Mt),ji[re](Jt,me),Qt=we,re=_t,ke=Mt,255&(ve=E>>0)&&(170&ve?Ms(Qt,256,re,ke):ii(Qt,256,re,ke)),ve=Jt,Qt=me,255&(E>>=8)&&(170&E?Ms(we,320,ve,Qt):ii(we,320,ve,Qt)),rt<d.Ub-1&&(r(oe[Ce].y,0,ut,pt+480,16),r(oe[Ce].f,0,_t,Mt+224,8),r(oe[Ce].ea,0,Jt,me+224,8)),E=8*ot*d.B,oe=d.sa,Ce=d.ta+16*R+16*ot*d.R,we=d.qa,ve=d.ra+8*R+E,Qt=d.Ha,re=d.Ia+8*R+E,E=0;16>E;++E)r(oe,Ce+E*d.R,ut,pt+32*E,16);for(E=0;8>E;++E)r(we,ve+E*d.B,_t,Mt+32*E,8),r(Qt,re+E*d.B,Jt,me+32*E,8)}}function ls(d,_,E,R,rt,ot,ut,pt,_t){var Mt=[0],Jt=[0],me=0,ve=_t!=null?_t.kd:0,oe=_t??new Hi;if(d==null||12>E)return 7;oe.data=d,oe.w=_,oe.ha=E,_=[_],E=[E],oe.gb=[oe.gb];t:{var Ce=_,we=E,Qt=oe.gb;if(e(d!=null),e(we!=null),e(Qt!=null),Qt[0]=0,12<=we[0]&&!n(d,Ce[0],"RIFF")){if(n(d,Ce[0]+8,"WEBP")){Qt=3;break t}var re=J(d,Ce[0]+4);if(12>re||4294967286<re){Qt=3;break t}if(ve&&re>we[0]-8){Qt=7;break t}Qt[0]=re,Ce[0]+=12,we[0]-=12}Qt=0}if(Qt!=0)return Qt;for(re=0<oe.gb[0],E=E[0];;){t:{var ke=d;we=_,Qt=E;var Be=Mt,Ee=Jt,Ye=Ce=[0];if((s=me=[me])[0]=0,8>Qt[0])Qt=7;else{if(!n(ke,we[0],"VP8X")){if(J(ke,we[0]+4)!=10){Qt=3;break t}if(18>Qt[0]){Qt=7;break t}var Ve=J(ke,we[0]+8),cn=1+H(ke,we[0]+12);if(2147483648<=cn*(ke=1+H(ke,we[0]+15))){Qt=3;break t}Ye!=null&&(Ye[0]=Ve),Be!=null&&(Be[0]=cn),Ee!=null&&(Ee[0]=ke),we[0]+=18,Qt[0]-=18,s[0]=1}Qt=0}}if(me=me[0],Ce=Ce[0],Qt!=0)return Qt;if(we=!!(2&Ce),!re&&me)return 3;if(ot!=null&&(ot[0]=!!(16&Ce)),ut!=null&&(ut[0]=we),pt!=null&&(pt[0]=0),ut=Mt[0],Ce=Jt[0],me&&we&&_t==null){Qt=0;break}if(4>E){Qt=7;break}if(re&&me||!re&&!me&&!n(d,_[0],"ALPH")){E=[E],oe.na=[oe.na],oe.P=[oe.P],oe.Sa=[oe.Sa];t:{Ve=d,Qt=_,re=E;var s=oe.gb;Be=oe.na,Ee=oe.P,Ye=oe.Sa,cn=22,e(Ve!=null),e(re!=null),ke=Qt[0];var l=re[0];for(e(Be!=null),e(Ye!=null),Be[0]=null,Ee[0]=null,Ye[0]=0;;){if(Qt[0]=ke,re[0]=l,8>l){Qt=7;break t}var h=J(Ve,ke+4);if(4294967286<h){Qt=3;break t}var g=8+h+1&-2;if(cn+=g,0<s&&cn>s){Qt=3;break t}if(!n(Ve,ke,"VP8 ")||!n(Ve,ke,"VP8L")){Qt=0;break t}if(l[0]<g){Qt=7;break t}n(Ve,ke,"ALPH")||(Be[0]=Ve,Ee[0]=ke+8,Ye[0]=h),ke+=g,l-=g}}if(E=E[0],oe.na=oe.na[0],oe.P=oe.P[0],oe.Sa=oe.Sa[0],Qt!=0)break}E=[E],oe.Ja=[oe.Ja],oe.xa=[oe.xa];t:if(s=d,Qt=_,re=E,Be=oe.gb[0],Ee=oe.Ja,Ye=oe.xa,Ve=Qt[0],ke=!n(s,Ve,"VP8 "),cn=!n(s,Ve,"VP8L"),e(s!=null),e(re!=null),e(Ee!=null),e(Ye!=null),8>re[0])Qt=7;else{if(ke||cn){if(s=J(s,Ve+4),12<=Be&&s>Be-12){Qt=3;break t}if(ve&&s>re[0]-8){Qt=7;break t}Ee[0]=s,Qt[0]+=8,re[0]-=8,Ye[0]=cn}else Ye[0]=5<=re[0]&&s[Ve+0]==47&&!(s[Ve+4]>>5),Ee[0]=re[0];Qt=0}if(E=E[0],oe.Ja=oe.Ja[0],oe.xa=oe.xa[0],_=_[0],Qt!=0)break;if(4294967286<oe.Ja)return 3;if(pt==null||we||(pt[0]=oe.xa?2:1),ut=[ut],Ce=[Ce],oe.xa){if(5>E){Qt=7;break}pt=ut,ve=Ce,we=ot,d==null||5>E?d=0:5<=E&&d[_+0]==47&&!(d[_+4]>>5)?(re=[0],s=[0],Be=[0],O(Ee=new A,d,_,E),tn(Ee,re,s,Be)?(pt!=null&&(pt[0]=re[0]),ve!=null&&(ve[0]=s[0]),we!=null&&(we[0]=Be[0]),d=1):d=0):d=0}else{if(10>E){Qt=7;break}pt=Ce,d==null||10>E||!oo(d,_+3,E-3)?d=0:(ve=d[_+0]|d[_+1]<<8|d[_+2]<<16,we=16383&(d[_+7]<<8|d[_+6]),d=16383&(d[_+9]<<8|d[_+8]),1&ve||3<(ve>>1&7)||!(ve>>4&1)||ve>>5>=oe.Ja||!we||!d?d=0:(ut&&(ut[0]=we),pt&&(pt[0]=d),d=1))}if(!d||(ut=ut[0],Ce=Ce[0],me&&(Mt[0]!=ut||Jt[0]!=Ce)))return 3;_t!=null&&(_t[0]=oe,_t.offset=_-_t.w,e(4294967286>_-_t.w),e(_t.offset==_t.ha-E));break}return Qt==0||Qt==7&&me&&_t==null?(ot!=null&&(ot[0]|=oe.na!=null&&0<oe.na.length),R!=null&&(R[0]=ut),rt!=null&&(rt[0]=Ce),0):Qt}function Ia(d,_,E){var R=_.width,rt=_.height,ot=0,ut=0,pt=R,_t=rt;if(_.Da=d!=null&&0<d.Da,_.Da&&(pt=d.cd,_t=d.bd,ot=d.v,ut=d.j,11>E||(ot&=-2,ut&=-2),0>ot||0>ut||0>=pt||0>=_t||ot+pt>R||ut+_t>rt))return 0;if(_.v=ot,_.j=ut,_.va=ot+pt,_.o=ut+_t,_.U=pt,_.T=_t,_.da=d!=null&&0<d.da,_.da){if(!Ht(pt,_t,E=[d.ib],ot=[d.hb]))return 0;_.ib=E[0],_.hb=ot[0]}return _.ob=d!=null&&d.ob,_.Kb=d==null||!d.Sd,_.da&&(_.ob=_.ib<3*R/4&&_.hb<3*rt/4,_.Kb=0),1}function Ks(d){if(d==null)return 2;if(11>d.S){var _=d.f.RGBA;_.fb+=(d.height-1)*_.A,_.A=-_.A}else _=d.f.kb,d=d.height,_.O+=(d-1)*_.fa,_.fa=-_.fa,_.N+=(d-1>>1)*_.Ab,_.Ab=-_.Ab,_.W+=(d-1>>1)*_.Db,_.Db=-_.Db,_.F!=null&&(_.J+=(d-1)*_.lb,_.lb=-_.lb);return 0}function Js(d,_,E,R){if(R==null||0>=d||0>=_)return 2;if(E!=null){if(E.Da){var rt=E.cd,ot=E.bd,ut=-2&E.v,pt=-2&E.j;if(0>ut||0>pt||0>=rt||0>=ot||ut+rt>d||pt+ot>_)return 2;d=rt,_=ot}if(E.da){if(!Ht(d,_,rt=[E.ib],ot=[E.hb]))return 2;d=rt[0],_=ot[0]}}R.width=d,R.height=_;t:{var _t=R.width,Mt=R.height;if(d=R.S,0>=_t||0>=Mt||!(d>=Pi&&13>d))d=2;else{if(0>=R.Rd&&R.sd==null){ut=ot=rt=_=0;var Jt=(pt=_t*qc[d])*Mt;if(11>d||(ot=(Mt+1)/2*(_=(_t+1)/2),d==12&&(ut=(rt=_t)*Mt)),(Mt=a(Jt+2*ot+ut))==null){d=1;break t}R.sd=Mt,11>d?((_t=R.f.RGBA).eb=Mt,_t.fb=0,_t.A=pt,_t.size=Jt):((_t=R.f.kb).y=Mt,_t.O=0,_t.fa=pt,_t.Fd=Jt,_t.f=Mt,_t.N=0+Jt,_t.Ab=_,_t.Cd=ot,_t.ea=Mt,_t.W=0+Jt+ot,_t.Db=_,_t.Ed=ot,d==12&&(_t.F=Mt,_t.J=0+Jt+2*ot),_t.Tc=ut,_t.lb=rt)}if(_=1,rt=R.S,ot=R.width,ut=R.height,rt>=Pi&&13>rt)if(11>rt)d=R.f.RGBA,_&=(pt=Math.abs(d.A))*(ut-1)+ot<=d.size,_&=pt>=ot*qc[rt],_&=d.eb!=null;else{d=R.f.kb,pt=(ot+1)/2,Jt=(ut+1)/2,_t=Math.abs(d.fa),Mt=Math.abs(d.Ab);var me=Math.abs(d.Db),ve=Math.abs(d.lb),oe=ve*(ut-1)+ot;_&=_t*(ut-1)+ot<=d.Fd,_&=Mt*(Jt-1)+pt<=d.Cd,_=(_&=me*(Jt-1)+pt<=d.Ed)&_t>=ot&Mt>=pt&me>=pt,_&=d.y!=null,_&=d.f!=null,_&=d.ea!=null,rt==12&&(_&=ve>=ot,_&=oe<=d.Tc,_&=d.F!=null)}else _=0;d=_?0:2}}return d!=0||E!=null&&E.fd&&(d=Ks(R)),d}var Ar=64,fa=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],xi=24,gi=32,da=8,ri=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Dt("Predictor0","PredictorAdd0"),vt.Predictor0=function(){return 4278190080},vt.Predictor1=function(d){return d},vt.Predictor2=function(d,_,E){return _[E+0]},vt.Predictor3=function(d,_,E){return _[E+1]},vt.Predictor4=function(d,_,E){return _[E-1]},vt.Predictor5=function(d,_,E){return ae(ae(d,_[E+1]),_[E+0])},vt.Predictor6=function(d,_,E){return ae(d,_[E-1])},vt.Predictor7=function(d,_,E){return ae(d,_[E+0])},vt.Predictor8=function(d,_,E){return ae(_[E-1],_[E+0])},vt.Predictor9=function(d,_,E){return ae(_[E+0],_[E+1])},vt.Predictor10=function(d,_,E){return ae(ae(d,_[E-1]),ae(_[E+0],_[E+1]))},vt.Predictor11=function(d,_,E){var R=_[E+0];return 0>=zt(R>>24&255,d>>24&255,(_=_[E-1])>>24&255)+zt(R>>16&255,d>>16&255,_>>16&255)+zt(R>>8&255,d>>8&255,_>>8&255)+zt(255&R,255&d,255&_)?R:d},vt.Predictor12=function(d,_,E){var R=_[E+0];return(te((d>>24&255)+(R>>24&255)-((_=_[E-1])>>24&255))<<24|te((d>>16&255)+(R>>16&255)-(_>>16&255))<<16|te((d>>8&255)+(R>>8&255)-(_>>8&255))<<8|te((255&d)+(255&R)-(255&_)))>>>0},vt.Predictor13=function(d,_,E){var R=_[E-1];return(xe((d=ae(d,_[E+0]))>>24&255,R>>24&255)<<24|xe(d>>16&255,R>>16&255)<<16|xe(d>>8&255,R>>8&255)<<8|xe(d>>0&255,R>>0&255))>>>0};var Ys=vt.PredictorAdd0;vt.PredictorAdd1=pe,Dt("Predictor2","PredictorAdd2"),Dt("Predictor3","PredictorAdd3"),Dt("Predictor4","PredictorAdd4"),Dt("Predictor5","PredictorAdd5"),Dt("Predictor6","PredictorAdd6"),Dt("Predictor7","PredictorAdd7"),Dt("Predictor8","PredictorAdd8"),Dt("Predictor9","PredictorAdd9"),Dt("Predictor10","PredictorAdd10"),Dt("Predictor11","PredictorAdd11"),Dt("Predictor12","PredictorAdd12"),Dt("Predictor13","PredictorAdd13");var Fi=vt.PredictorAdd2;Xe("ColorIndexInverseTransform","MapARGB","32b",function(d){return d>>8&255},function(d){return d}),Xe("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(d){return d},function(d){return d>>8&255});var sl,Dr=vt.ColorIndexInverseTransform,Es=vt.MapARGB,Gi=vt.VP8LColorIndexInverseTransformAlpha,jo=vt.MapAlpha,Xs=vt.VP8LPredictorsAdd=[];Xs.length=16,(vt.VP8LPredictors=[]).length=16,(vt.VP8LPredictorsAdd_C=[]).length=16,(vt.VP8LPredictors_C=[]).length=16;var As,Hr,Fr,us,Li,Wi,Qs,Zi,_r,Ms,mi,ii,zo,Fa,ja,si,Ci,mo,Bs,pa,vo,yo,to,Ki,Gr,Jn,Wn,Cr,tr=a(511),cs=a(2041),_o=a(225),Ts=a(767),ol=0,bo=cs,Or=_o,er=Ts,ki=tr,Pi=0,gn=1,al=2,Uo=3,Ji=4,oi=5,Dl=6,vi=7,yi=8,Ns=9,i=10,c=[2,3,7],m=[3,3,11],P=[280,256,256,256,40],F=[0,1,1,1,0],at=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],$t=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],fe=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],_e=8,Me=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],We=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ln=null,Mn=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],_i=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Rr=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Si=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],br=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Ds=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Ol=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],hs=[],Yi=[],ji=[],$u=1,Rl=2,Yn=[],ai=[];be("UpsampleRgbLinePair",Dn,3),be("UpsampleBgrLinePair",lr,3),be("UpsampleRgbaLinePair",Ii,4),be("UpsampleBgraLinePair",Er,4),be("UpsampleArgbLinePair",Nr,4),be("UpsampleRgba4444LinePair",Gn,2),be("UpsampleRgb565LinePair",zn,2);var Vu=vt.UpsampleRgbLinePair,Os=vt.UpsampleBgrLinePair,lu=vt.UpsampleRgbaLinePair,qo=vt.UpsampleBgraLinePair,ll=vt.UpsampleArgbLinePair,uu=vt.UpsampleRgba4444LinePair,Ic=vt.UpsampleRgb565LinePair,cu=16,Il=1<<cu-1,Fl=-227,Hu=482,af=6,ul=0,hu=a(256),lf=a(256),uf=a(256),fu=a(256),du=a(Hu-Fl),Fc=a(Hu-Fl);di("YuvToRgbRow",Dn,3),di("YuvToBgrRow",lr,3),di("YuvToRgbaRow",Ii,4),di("YuvToBgraRow",Er,4),di("YuvToArgbRow",Nr,4),di("YuvToRgba4444Row",Gn,2),di("YuvToRgb565Row",zn,2);var jc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],pu=[0,2,8],zc=[8,7,6,4,4,2,2,2,1,1,1,1],Uc=1;this.WebPDecodeRGBA=function(d,_,E,R,rt){var ot=gn,ut=new Io,pt=new or;ut.ba=pt,pt.S=ot,pt.width=[pt.width],pt.height=[pt.height];var _t=pt.width,Mt=pt.height,Jt=new dr;if(Jt==null||d==null)var me=2;else e(Jt!=null),me=ls(d,_,E,Jt.width,Jt.height,Jt.Pd,Jt.Qd,Jt.format,null);if(me!=0?_t=0:(_t!=null&&(_t[0]=Jt.width[0]),Mt!=null&&(Mt[0]=Jt.height[0]),_t=1),_t){pt.width=pt.width[0],pt.height=pt.height[0],R!=null&&(R[0]=pt.width),rt!=null&&(rt[0]=pt.height);t:{if(R=new Oi,(rt=new Hi).data=d,rt.w=_,rt.ha=E,rt.kd=1,_=[0],e(rt!=null),((d=ls(rt.data,rt.w,rt.ha,null,null,null,_,null,rt))==0||d==7)&&_[0]&&(d=4),(_=d)==0){if(e(ut!=null),R.data=rt.data,R.w=rt.w+rt.offset,R.ha=rt.ha-rt.offset,R.put=je,R.ac=ar,R.bc=hr,R.ma=ut,rt.xa){if((d=ei())==null){ut=1;break t}if(function(ve,oe){var Ce=[0],we=[0],Qt=[0];e:for(;;){if(ve==null)return 0;if(oe==null)return ve.a=2,0;if(ve.l=oe,ve.a=0,O(ve.m,oe.data,oe.w,oe.ha),!tn(ve.m,Ce,we,Qt)){ve.a=3;break e}if(ve.xb=Rl,oe.width=Ce[0],oe.height=we[0],!Di(Ce[0],we[0],1,ve,null))break e;return 1}return e(ve.a!=0),0}(d,R)){if(R=(_=Js(R.width,R.height,ut.Oa,ut.ba))==0){e:{R=d;n:for(;;){if(R==null){R=0;break e}if(e(R.s.yc!=null),e(R.s.Ya!=null),e(0<R.s.Wb),e((E=R.l)!=null),e((rt=E.ma)!=null),R.xb!=0){if(R.ca=rt.ba,R.tb=rt.tb,e(R.ca!=null),!Ia(rt.Oa,E,Uo)){R.a=2;break n}if(!bs(R,E.width)||E.da)break n;if((E.da||Pn(R.ca.S))&&le(),11>R.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),R.ca.f.kb.F!=null&&le()),R.Pb&&0<R.s.ua&&R.s.vb.X==null&&!yt(R.s.vb,R.s.Wa.Xa)){R.a=1;break n}R.xb=0}if(!hi(R,R.V,R.Ba,R.c,R.i,E.o,_s))break n;rt.Dc=R.Ma,R=1;break e}e(R.a!=0),R=0}R=!R}R&&(_=d.a)}else _=d.a}else{if((d=new jn)==null){ut=1;break t}if(d.Fa=rt.na,d.P=rt.P,d.qc=rt.Sa,Vs(d,R)){if((_=Js(R.width,R.height,ut.Oa,ut.ba))==0){if(d.Aa=0,E=ut.Oa,e((rt=d)!=null),E!=null){if(0<(_t=0>(_t=E.Md)?0:100<_t?255:255*_t/100)){for(Mt=Jt=0;4>Mt;++Mt)12>(me=rt.pb[Mt]).lc&&(me.ia=_t*zc[0>me.lc?0:me.lc]>>3),Jt|=me.ia;Jt&&(alert("todo:VP8InitRandom"),rt.ia=1)}rt.Ga=E.Id,100<rt.Ga?rt.Ga=100:0>rt.Ga&&(rt.Ga=0)}kn(d,R)||(_=d.a)}}else _=d.a}_==0&&ut.Oa!=null&&ut.Oa.fd&&(_=Ks(ut.ba))}ut=_}ot=ut!=0?null:11>ot?pt.f.RGBA.eb:pt.f.kb.y}else ot=null;return ot};var qc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function v(vt,Ct){for(var Ut="",Z=0;Z<4;Z++)Ut+=String.fromCharCode(vt[Ct++]);return Ut}function w(vt,Ct){return(vt[Ct+0]<<0|vt[Ct+1]<<8|vt[Ct+2]<<16)>>>0}function b(vt,Ct){return(vt[Ct+0]<<0|vt[Ct+1]<<8|vt[Ct+2]<<16|vt[Ct+3]<<24)>>>0}new p;var S=[0],x=[0],I=[],D=new p,j=t,z=function(vt,Ct){var Ut={},Z=0,V=!1,St=0,Et=0;if(Ut.frames=[],!function(U,et,lt,ct){for(var tt=0;tt<ct;tt++)if(U[et+tt]!=lt.charCodeAt(tt))return!0;return!1}(vt,Ct,"RIFF",4)){var M,$;for(b(vt,Ct+=4),Ct+=8;Ct<vt.length;){var q=v(vt,Ct),O=b(vt,Ct+=4);Ct+=4;var dt=O+(1&O);switch(q){case"VP8 ":case"VP8L":Ut.frames[Z]===void 0&&(Ut.frames[Z]={}),(A=Ut.frames[Z]).src_off=V?Et:Ct-8,A.src_size=St+O+8,Z++,V&&(V=!1,St=0,Et=0);break;case"VP8X":(A=Ut.header={}).feature_flags=vt[Ct];var gt=Ct+4;A.canvas_width=1+w(vt,gt),gt+=3,A.canvas_height=1+w(vt,gt),gt+=3;break;case"ALPH":V=!0,St=dt+8,Et=Ct-8;break;case"ANIM":(A=Ut.header).bgcolor=b(vt,Ct),gt=Ct+4,A.loop_count=(M=vt)[($=gt)+0]<<0|M[$+1]<<8,gt+=2;break;case"ANMF":var Y,A;(A=Ut.frames[Z]={}).offset_x=2*w(vt,Ct),Ct+=3,A.offset_y=2*w(vt,Ct),Ct+=3,A.width=1+w(vt,Ct),Ct+=3,A.height=1+w(vt,Ct),Ct+=3,A.duration=w(vt,Ct),Ct+=3,Y=vt[Ct++],A.dispose=1&Y,A.blend=Y>>1&1}q!="ANMF"&&(Ct+=dt)}return Ut}}(j,0);z.response=j,z.rgbaoutput=!0,z.dataurl=!1;var W=z.header?z.header:null,Q=z.frames?z.frames:null;if(W){W.loop_counter=W.loop_count,S=[W.canvas_height],x=[W.canvas_width];for(var mt=0;mt<Q.length&&Q[mt].blend!=0;mt++);}var Tt=Q[0],Nt=D.WebPDecodeRGBA(j,Tt.src_off,Tt.src_size,x,S);Tt.rgba=Nt,Tt.imgwidth=x[0],Tt.imgheight=S[0];for(var Ft=0;Ft<x[0]*S[0]*4;Ft++)I[Ft]=Nt[Ft];return this.width=x,this.height=S,this.data=I,this}(function(t){var e=function(){return typeof Ld=="function"},n=function(S,x,I,D){var j=4,z=u;switch(D){case t.image_compression.FAST:j=1,z=a;break;case t.image_compression.MEDIUM:j=6,z=f;break;case t.image_compression.SLOW:j=9,z=p}S=r(S,x,I,z);var W=Ld(S,{level:j});return t.__addimage__.arrayBufferToBinaryString(W)},r=function(S,x,I,D){for(var j,z,W,Q=S.length/x,mt=new Uint8Array(S.length+Q),Tt=w(),Nt=0;Nt<Q;Nt+=1){if(W=Nt*x,j=S.subarray(W,W+x),D)mt.set(D(j,I,z),W+Nt);else{for(var Ft,vt=Tt.length,Ct=[];Ft<vt;Ft+=1)Ct[Ft]=Tt[Ft](j,I,z);var Ut=b(Ct.concat());mt.set(Ct[Ut],W+Nt)}z=j}return mt},o=function(S){var x=Array.apply([],S);return x.unshift(0),x},a=function(S,x){var I,D=[],j=S.length;D[0]=1;for(var z=0;z<j;z+=1)I=S[z-x]||0,D[z+1]=S[z]-I+256&255;return D},u=function(S,x,I){var D,j=[],z=S.length;j[0]=2;for(var W=0;W<z;W+=1)D=I&&I[W]||0,j[W+1]=S[W]-D+256&255;return j},f=function(S,x,I){var D,j,z=[],W=S.length;z[0]=3;for(var Q=0;Q<W;Q+=1)D=S[Q-x]||0,j=I&&I[Q]||0,z[Q+1]=S[Q]+256-(D+j>>>1)&255;return z},p=function(S,x,I){var D,j,z,W,Q=[],mt=S.length;Q[0]=4;for(var Tt=0;Tt<mt;Tt+=1)D=S[Tt-x]||0,j=I&&I[Tt]||0,z=I&&I[Tt-x]||0,W=v(D,j,z),Q[Tt+1]=S[Tt]-W+256&255;return Q},v=function(S,x,I){if(S===x&&x===I)return S;var D=Math.abs(x-I),j=Math.abs(S-I),z=Math.abs(S+x-I-I);return D<=j&&D<=z?S:j<=z?x:I},w=function(){return[o,a,u,f,p]},b=function(S){var x=S.map(function(I){return I.reduce(function(D,j){return D+Math.abs(j)},0)});return x.indexOf(Math.min.apply(null,x))};t.processPNG=function(S,x,I,D){var j,z,W,Q,mt,Tt,Nt,Ft,vt,Ct,Ut,Z,V,St,Et,M=this.decode.FLATE_DECODE,$="";if(this.__addimage__.isArrayBuffer(S)&&(S=new Uint8Array(S)),this.__addimage__.isArrayBufferView(S)){if(S=(W=new WL(S)).imgData,z=W.bits,j=W.colorSpace,mt=W.colors,[4,6].indexOf(W.colorType)!==-1){if(W.bits===8){vt=(Ft=W.pixelBitlength==32?new Uint32Array(W.decodePixels().buffer):W.pixelBitlength==16?new Uint16Array(W.decodePixels().buffer):new Uint8Array(W.decodePixels().buffer)).length,Ut=new Uint8Array(vt*W.colors),Ct=new Uint8Array(vt);var q,O=W.pixelBitlength-W.bits;for(St=0,Et=0;St<vt;St++){for(V=Ft[St],q=0;q<O;)Ut[Et++]=V>>>q&255,q+=W.bits;Ct[St]=V>>>q&255}}if(W.bits===16){vt=(Ft=new Uint32Array(W.decodePixels().buffer)).length,Ut=new Uint8Array(vt*(32/W.pixelBitlength)*W.colors),Ct=new Uint8Array(vt*(32/W.pixelBitlength)),Z=W.colors>1,St=0,Et=0;for(var dt=0;St<vt;)V=Ft[St++],Ut[Et++]=V>>>0&255,Z&&(Ut[Et++]=V>>>16&255,V=Ft[St++],Ut[Et++]=V>>>0&255),Ct[dt++]=V>>>16&255;z=8}D!==t.image_compression.NONE&&e()?(S=n(Ut,W.width*W.colors,W.colors,D),Nt=n(Ct,W.width,1,D)):(S=Ut,Nt=Ct,M=void 0)}if(W.colorType===3&&(j=this.color_spaces.INDEXED,Tt=W.palette,W.transparency.indexed)){var gt=W.transparency.indexed,Y=0;for(St=0,vt=gt.length;St<vt;++St)Y+=gt[St];if((Y/=255)===vt-1&&gt.indexOf(0)!==-1)Q=[gt.indexOf(0)];else if(Y!==vt){for(Ft=W.decodePixels(),Ct=new Uint8Array(Ft.length),St=0,vt=Ft.length;St<vt;St++)Ct[St]=gt[Ft[St]];Nt=n(Ct,W.width,1)}}var A=function(U){var et;switch(U){case t.image_compression.FAST:et=11;break;case t.image_compression.MEDIUM:et=13;break;case t.image_compression.SLOW:et=14;break;default:et=12}return et}(D);return M===this.decode.FLATE_DECODE&&($="/Predictor "+A+" "),$+="/Colors "+mt+" /BitsPerComponent "+z+" /Columns "+W.width,(this.__addimage__.isArrayBuffer(S)||this.__addimage__.isArrayBufferView(S))&&(S=this.__addimage__.arrayBufferToBinaryString(S)),(Nt&&this.__addimage__.isArrayBuffer(Nt)||this.__addimage__.isArrayBufferView(Nt))&&(Nt=this.__addimage__.arrayBufferToBinaryString(Nt)),{alias:I,data:S,index:x,filter:M,decodeParameters:$,transparency:Q,palette:Tt,sMask:Nt,predictor:A,width:W.width,height:W.height,bitsPerComponent:z,colorSpace:j}}}})(yn.API),function(t){t.processGIF89A=function(e,n,r,o){var a=new ZL(e),u=a.width,f=a.height,p=[];a.decodeAndBlitFrameRGBA(0,p);var v={data:p,width:u,height:f},w=new Gf(100).encode(v,100);return t.processJPEG.call(this,w,n,r,o)},t.processGIF87A=t.processGIF89A}(yn.API),Ho.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:o,green:r,blue:n,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ho.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){pr.log("bit decode error:"+n)}},Ho.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,o=0;o<e;o++)for(var a=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+8*o*4,f=0;f<8&&8*o+f<this.width;f++){var p=this.palette[a>>7-f&1];this.data[u+4*f]=p.blue,this.data[u+4*f+1]=p.green,this.data[u+4*f+2]=p.red,this.data[u+4*f+3]=255}n!==0&&(this.pos+=4-n)}},Ho.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,o=0;o<t;o++){var a=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+2*o*4,f=a>>4,p=15&a,v=this.palette[f];if(this.data[u]=v.blue,this.data[u+1]=v.green,this.data[u+2]=v.red,this.data[u+3]=255,2*o+1>=this.width)break;v=this.palette[p],this.data[u+4]=v.blue,this.data[u+4+1]=v.green,this.data[u+4+2]=v.red,this.data[u+4+3]=255}e!==0&&(this.pos+=4-e)}},Ho.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var o=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+4*r;if(o<this.palette.length){var u=this.palette[o];this.data[a]=u.red,this.data[a+1]=u.green,this.data[a+2]=u.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}t!==0&&(this.pos+=4-t)}},Ho.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(a&e)/e*255|0,f=(a>>5&e)/e*255|0,p=(a>>10&e)/e*255|0,v=a>>15?255:0,w=r*this.width*4+4*o;this.data[w]=p,this.data[w+1]=f,this.data[w+2]=u,this.data[w+3]=v}this.pos+=t}},Ho.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var o=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var f=(u&e)/e*255|0,p=(u>>5&n)/n*255|0,v=(u>>11)/e*255|0,w=o*this.width*4+4*a;this.data[w]=v,this.data[w+1]=p,this.data[w+2]=f,this.data[w+3]=255}this.pos+=t}},Ho.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*n;this.data[u]=a,this.data[u+1]=o,this.data[u+2]=r,this.data[u+3]=255}this.pos+=this.width%4}},Ho.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),f=e*this.width*4+4*n;this.data[f]=a,this.data[f+1]=o,this.data[f+2]=r,this.data[f+3]=u}},Ho.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,o){var a=new Ho(e,!1),u=a.width,f=a.height,p={data:a.getData(),width:u,height:f},v=new Gf(100).encode(p,100);return t.processJPEG.call(this,v,n,r,o)}}(yn.API),mg.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,o){var a=new mg(e),u=a.width,f=a.height,p={data:a.getData(),width:u,height:f},v=new Gf(100).encode(p,100);return t.processJPEG.call(this,v,n,r,o)}}(yn.API),yn.API.processRGBA=function(t,e,n){for(var r=t.data,o=r.length,a=new Uint8Array(o/4*3),u=new Uint8Array(o/4),f=0,p=0,v=0;v<o;v+=4){var w=r[v],b=r[v+1],S=r[v+2],x=r[v+3];a[f++]=w,a[f++]=b,a[f++]=S,u[p++]=x}var I=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(u),data:I,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},yn.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},bu=yn.API,nh=bu.getCharWidthsArray=function(t,e){var n,r,o=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),u=e.charSpace||this.internal.getCharSpace(),f=e.widths?e.widths:o.metadata.Unicode.widths,p=f.fof?f.fof:1,v=e.kerning?e.kerning:o.metadata.Unicode.kerning,w=v.fof?v.fof:1,b=e.doKerning!==!1,S=0,x=t.length,I=0,D=f[0]||p,j=[];for(n=0;n<x;n++)r=t.charCodeAt(n),typeof o.metadata.widthOfString=="function"?j.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(r))+u*(1e3/a)||0)/1e3):(S=b&&ur(v[r])==="object"&&!isNaN(parseInt(v[r][I],10))?v[r][I]/w:0,j.push((f[r]||D)/p+S)),I=r;return j},fg=bu.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),o=e.charSpace||this.internal.getCharSpace();return bu.processArabic&&(t=bu.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,o)/n:nh.apply(this,arguments).reduce(function(a,u){return a+u},0)},dg=function(t,e,n,r){for(var o=[],a=0,u=t.length,f=0;a!==u&&f+e[a]<n;)f+=e[a],a++;o.push(t.slice(0,a));var p=a;for(f=0;a!==u;)f+e[a]>r&&(o.push(t.slice(p,a)),f=0,p=a),f+=e[a],a++;return p!==a&&o.push(t.slice(p,a)),o},pg=function(t,e,n){n||(n={});var r,o,a,u,f,p,v,w=[],b=[w],S=n.textIndent||0,x=0,I=0,D=t.split(" "),j=nh.apply(this,[" ",n])[0];if(p=n.lineIndent===-1?D[0].length+2:n.lineIndent||0){var z=Array(p).join(" "),W=[];D.map(function(mt){(mt=mt.split(/\s*\n/)).length>1?W=W.concat(mt.map(function(Tt,Nt){return(Nt&&Tt.length?`
`:"")+Tt})):W.push(mt[0])}),D=W,p=fg.apply(this,[z,n])}for(a=0,u=D.length;a<u;a++){var Q=0;if(r=D[a],p&&r[0]==`
`&&(r=r.substr(1),Q=1),S+x+(I=(o=nh.apply(this,[r,n])).reduce(function(mt,Tt){return mt+Tt},0))>e||Q){if(I>e){for(f=dg.apply(this,[r,o,e-(S+x),e]),w.push(f.shift()),w=[f.pop()];f.length;)b.push([f.shift()]);I=o.slice(r.length-(w[0]?w[0].length:0)).reduce(function(mt,Tt){return mt+Tt},0)}else w=[r];b.push(w),S=I+p,x=j}else w.push(r),S+=x+I,x=j}return v=p?function(mt,Tt){return(Tt?z:"")+mt.join(" ")}:function(mt){return mt.join(" ")},b.map(v)},bu.splitTextToSize=function(t,e,n){var r,o=(n=n||{}).fontSize||this.internal.getFontSize(),a=(function(w){if(w.widths&&w.kerning)return{widths:w.widths,kerning:w.kerning};var b=this.internal.getFont(w.fontName,w.fontStyle);return b.metadata.Unicode?{widths:b.metadata.Unicode.widths||{0:1},kerning:b.metadata.Unicode.kerning||{}}:{font:b.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var u=1*this.internal.scaleFactor*e/o;a.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/o:0,a.lineIndent=n.lineIndent;var f,p,v=[];for(f=0,p=r.length;f<p;f++)v=v.concat(pg.apply(this,[r[f],u,a]));return v},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},o=0;o<e.length;o++)n[e[o]]="0123456789abcdef"[o],r["0123456789abcdef"[o]]=e[o];var a=function(b){return"0x"+parseInt(b,10).toString(16)},u=t.__fontmetrics__.compress=function(b){var S,x,I,D,j=["{"];for(var z in b){if(S=b[z],isNaN(parseInt(z,10))?x="'"+z+"'":(z=parseInt(z,10),x=(x=a(z).slice(2)).slice(0,-1)+r[x.slice(-1)]),typeof S=="number")S<0?(I=a(S).slice(3),D="-"):(I=a(S).slice(2),D=""),I=D+I.slice(0,-1)+r[I.slice(-1)];else{if(ur(S)!=="object")throw new Error("Don't know what to do with value type "+ur(S)+".");I=u(S)}j.push(x+I)}return j.push("}"),j.join("")},f=t.__fontmetrics__.uncompress=function(b){if(typeof b!="string")throw new Error("Invalid argument passed to uncompress.");for(var S,x,I,D,j={},z=1,W=j,Q=[],mt="",Tt="",Nt=b.length-1,Ft=1;Ft<Nt;Ft+=1)(D=b[Ft])=="'"?S?(I=S.join(""),S=void 0):S=[]:S?S.push(D):D=="{"?(Q.push([W,I]),W={},I=void 0):D=="}"?((x=Q.pop())[0][x[1]]=W,I=void 0,W=x[0]):D=="-"?z=-1:I===void 0?n.hasOwnProperty(D)?(mt+=n[D],I=parseInt(mt,16)*z,z=1,mt=""):mt+=D:n.hasOwnProperty(D)?(Tt+=n[D],W[I]=parseInt(Tt,16)*z,z=1,I=void 0,Tt=""):Tt+=D;return j},p={codePages:["WinAnsiEncoding"],WinAnsiEncoding:f("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},v={Unicode:{Courier:p,"Courier-Bold":p,"Courier-BoldOblique":p,"Courier-Oblique":p,Helvetica:p,"Helvetica-Bold":p,"Helvetica-BoldOblique":p,"Helvetica-Oblique":p,"Times-Roman":p,"Times-Bold":p,"Times-BoldItalic":p,"Times-Italic":p}},w={Unicode:{"Courier-Oblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":f("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":f("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:f("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:f("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":f("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":f("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(b){var S=b.font,x=w.Unicode[S.postScriptName];x&&(S.metadata.Unicode={},S.metadata.Unicode.widths=x.widths,S.metadata.Unicode.kerning=x.kerning);var I=v.Unicode[S.postScriptName];I&&(S.metadata.Unicode.encoding=I,S.encoding=I.codePages[0])}])}(yn.API),function(t){var e=function(n){for(var r=n.length,o=new Uint8Array(r),a=0;a<r;a++)o[a]=n.charCodeAt(a);return o};t.API.events.push(["addFont",function(n){var r=void 0,o=n.font,a=n.instance;if(!o.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(r=a.existsFileInVFS(o.postScriptName)===!1?a.loadFile(o.postScriptName):a.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(u,f){f=/^\x00\x01\x00\x00/.test(f)?e(f):e(vc(f)),u.metadata=t.API.TTFFont.open(f),u.metadata.Unicode=u.metadata.Unicode||{encoding:{},kerning:{},widths:[]},u.metadata.glyIdsUsed=[0]})(o,r)}}])}(yn),function(t){function e(){return(wn.canvg?Promise.resolve(wn.canvg):Yl(()=>import("./index.es.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}yn.API.addSvgAsImage=function(n,r,o,a,u,f,p,v){if(isNaN(r)||isNaN(o))throw pr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(u))throw pr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var w=document.createElement("canvas");w.width=a,w.height=u;var b=w.getContext("2d");b.fillStyle="#fff",b.fillRect(0,0,w.width,w.height);var S={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},x=this;return e().then(function(I){return I.fromString(b,n,S)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(I){return I.render(S)}).then(function(){x.addImage(w.toDataURL("image/jpeg",1),r,o,a,u,p,v)})}}(),yn.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var o=0;o<this.internal.pages[r].length;o++)this.internal.pages[r][o]=this.internal.pages[r][o].replace(e,n);return this},yn.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,o,a,u={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},f=Object.keys(u),p=[],v=0,w=0,b=0;function S(I,D){var j,z=!1;for(j=0;j<I.length;j+=1)I[j]===D&&(z=!0);return z}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(u)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var x=f.length;for(b=0;b<x;b+=1)n[f[b]].value=n[f[b]].defaultValue,n[f[b]].explicitSet=!1}if(ur(t)==="object"){for(o in t)if(a=t[o],S(f,o)&&a!==void 0){if(n[o].type==="boolean"&&typeof a=="boolean")n[o].value=a;else if(n[o].type==="name"&&S(n[o].valueSet,a))n[o].value=a;else if(n[o].type==="integer"&&Number.isInteger(a))n[o].value=a;else if(n[o].type==="array"){for(v=0;v<a.length;v+=1)if(r=!0,a[v].length===1&&typeof a[v][0]=="number")p.push(String(a[v]-1));else if(a[v].length>1){for(w=0;w<a[v].length;w+=1)typeof a[v][w]!="number"&&(r=!1);r===!0&&p.push([a[v][0]-1,a[v][1]-1].join(" "))}n[o].value="["+p.join(" ")+"]"}else n[o].value=n[o].defaultValue;n[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var I,D=[];for(I in n)n[I].explicitSet===!0&&(n[I].type==="name"?D.push("/"+I+" /"+n[I].value):D.push("/"+I+" "+n[I].value));D.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+D.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(r)),u=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),f=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),p=unescape(encodeURIComponent("</x:xmpmeta>")),v=a.length+u.length+f.length+o.length+p.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+v+" >>"),this.internal.write("stream"),this.internal.write(o+a+u+f+p),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(yn.API),function(t){var e=t.API,n=e.pdfEscape16=function(a,u){for(var f,p=u.metadata.Unicode.widths,v=["","0","00","000","0000"],w=[""],b=0,S=a.length;b<S;++b){if(f=u.metadata.characterToGlyph(a.charCodeAt(b)),u.metadata.glyIdsUsed.push(f),u.metadata.toUnicode[f]=a.charCodeAt(b),p.indexOf(f)==-1&&(p.push(f),p.push([parseInt(u.metadata.widthOfGlyph(f),10)])),f=="0")return w.join("");f=f.toString(16),w.push(v[4-f.length],f)}return w.join("")},r=function(a){var u,f,p,v,w,b,S;for(w=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,p=[],b=0,S=(f=Object.keys(a).sort(function(x,I){return x-I})).length;b<S;b++)u=f[b],p.length>=100&&(w+=`
`+p.length+` beginbfchar
`+p.join(`
`)+`
endbfchar`,p=[]),a[u]!==void 0&&a[u]!==null&&typeof a[u].toString=="function"&&(v=("0000"+a[u].toString(16)).slice(-4),u=("0000"+(+u).toString(16)).slice(-4),p.push("<"+u+"><"+v+">"));return p.length&&(w+=`
`+p.length+` beginbfchar
`+p.join(`
`)+`
endbfchar
`),w+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(u){var f=u.font,p=u.out,v=u.newObject,w=u.putStream;if(f.metadata instanceof t.API.TTFFont&&f.encoding==="Identity-H"){for(var b=f.metadata.Unicode.widths,S=f.metadata.subset.encode(f.metadata.glyIdsUsed,1),x="",I=0;I<S.length;I++)x+=String.fromCharCode(S[I]);var D=v();w({data:x,addLength1:!0,objectId:D}),p("endobj");var j=v();w({data:r(f.metadata.toUnicode),addLength1:!0,objectId:j}),p("endobj");var z=v();p("<<"),p("/Type /FontDescriptor"),p("/FontName /"+Su(f.fontName)),p("/FontFile2 "+D+" 0 R"),p("/FontBBox "+t.API.PDFObject.convert(f.metadata.bbox)),p("/Flags "+f.metadata.flags),p("/StemV "+f.metadata.stemV),p("/ItalicAngle "+f.metadata.italicAngle),p("/Ascent "+f.metadata.ascender),p("/Descent "+f.metadata.decender),p("/CapHeight "+f.metadata.capHeight),p(">>"),p("endobj");var W=v();p("<<"),p("/Type /Font"),p("/BaseFont /"+Su(f.fontName)),p("/FontDescriptor "+z+" 0 R"),p("/W "+t.API.PDFObject.convert(b)),p("/CIDToGIDMap /Identity"),p("/DW 1000"),p("/Subtype /CIDFontType2"),p("/CIDSystemInfo"),p("<<"),p("/Supplement 0"),p("/Registry (Adobe)"),p("/Ordering ("+f.encoding+")"),p(">>"),p(">>"),p("endobj"),f.objectNumber=v(),p("<<"),p("/Type /Font"),p("/Subtype /Type0"),p("/ToUnicode "+j+" 0 R"),p("/BaseFont /"+Su(f.fontName)),p("/Encoding /"+f.encoding),p("/DescendantFonts ["+W+" 0 R]"),p(">>"),p("endobj"),f.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(u){var f=u.font,p=u.out,v=u.newObject,w=u.putStream;if(f.metadata instanceof t.API.TTFFont&&f.encoding==="WinAnsiEncoding"){for(var b=f.metadata.rawData,S="",x=0;x<b.length;x++)S+=String.fromCharCode(b[x]);var I=v();w({data:S,addLength1:!0,objectId:I}),p("endobj");var D=v();w({data:r(f.metadata.toUnicode),addLength1:!0,objectId:D}),p("endobj");var j=v();p("<<"),p("/Descent "+f.metadata.decender),p("/CapHeight "+f.metadata.capHeight),p("/StemV "+f.metadata.stemV),p("/Type /FontDescriptor"),p("/FontFile2 "+I+" 0 R"),p("/Flags 96"),p("/FontBBox "+t.API.PDFObject.convert(f.metadata.bbox)),p("/FontName /"+Su(f.fontName)),p("/ItalicAngle "+f.metadata.italicAngle),p("/Ascent "+f.metadata.ascender),p(">>"),p("endobj"),f.objectNumber=v();for(var z=0;z<f.metadata.hmtx.widths.length;z++)f.metadata.hmtx.widths[z]=parseInt(f.metadata.hmtx.widths[z]*(1e3/f.metadata.head.unitsPerEm));p("<</Subtype/TrueType/Type/Font/ToUnicode "+D+" 0 R/BaseFont/"+Su(f.fontName)+"/FontDescriptor "+j+" 0 R/Encoding/"+f.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(f.metadata.hmtx.widths)+">>"),p("endobj"),f.isAlreadyPutted=!0}})(a)}]);var o=function(a){var u,f=a.text||"",p=a.x,v=a.y,w=a.options||{},b=a.mutex||{},S=b.pdfEscape,x=b.activeFontKey,I=b.fonts,D=x,j="",z=0,W="",Q=I[D].encoding;if(I[D].encoding!=="Identity-H")return{text:f,x:p,y:v,options:w,mutex:b};for(W=f,D=x,Array.isArray(f)&&(W=f[0]),z=0;z<W.length;z+=1)I[D].metadata.hasOwnProperty("cmap")&&(u=I[D].metadata.cmap.unicode.codeMap[W[z].charCodeAt(0)]),u||W[z].charCodeAt(0)<256&&I[D].metadata.hasOwnProperty("Unicode")?j+=W[z]:j+="";var mt="";return parseInt(D.slice(1))<14||Q==="WinAnsiEncoding"?mt=S(j,D).split("").map(function(Tt){return Tt.charCodeAt(0).toString(16)}).join(""):Q==="Identity-H"&&(mt=n(j,I[D])),b.isHex=!0,{text:mt,x:p,y:v,options:w,mutex:b}};e.events.push(["postProcessText",function(a){var u=a.text||"",f=[],p={text:u,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(u)){var v=0;for(v=0;v<u.length;v+=1)Array.isArray(u[v])&&u[v].length===3?f.push([o(Object.assign({},p,{text:u[v][0]})).text,u[v][1],u[v][2]]):f.push(o(Object.assign({},p,{text:u[v]})).text);a.text=f}else a.text=o(Object.assign({},p,{text:u})).text}])}(yn),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(yn.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var o,a,u,f,p,v,w,b=e,S=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],I={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},D={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},j=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],z=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),W=!1,Q=0;this.__bidiEngine__={};var mt=function(Z){var V=Z.charCodeAt(),St=V>>8,Et=D[St];return Et!==void 0?b[256*Et+(255&V)]:St===252||St===253?"AL":z.test(St)?"L":St===8?"R":"N"},Tt=function(Z){for(var V,St=0;St<Z.length;St++){if((V=mt(Z.charAt(St)))==="L")return!1;if(V==="R")return!0}return!1},Nt=function(Z,V,St,Et){var M,$,q,O,dt=V[Et];switch(dt){case"L":case"R":W=!1;break;case"N":case"AN":break;case"EN":W&&(dt="AN");break;case"AL":W=!0,dt="R";break;case"WS":dt="N";break;case"CS":Et<1||Et+1>=V.length||(M=St[Et-1])!=="EN"&&M!=="AN"||($=V[Et+1])!=="EN"&&$!=="AN"?dt="N":W&&($="AN"),dt=$===M?$:"N";break;case"ES":dt=(M=Et>0?St[Et-1]:"B")==="EN"&&Et+1<V.length&&V[Et+1]==="EN"?"EN":"N";break;case"ET":if(Et>0&&St[Et-1]==="EN"){dt="EN";break}if(W){dt="N";break}for(q=Et+1,O=V.length;q<O&&V[q]==="ET";)q++;dt=q<O&&V[q]==="EN"?"EN":"N";break;case"NSM":if(u&&!f){for(O=V.length,q=Et+1;q<O&&V[q]==="NSM";)q++;if(q<O){var gt=Z[Et],Y=gt>=1425&&gt<=2303||gt===64286;if(M=V[q],Y&&(M==="R"||M==="AL")){dt="R";break}}}dt=Et<1||(M=V[Et-1])==="B"?"N":St[Et-1];break;case"B":W=!1,o=!0,dt=Q;break;case"S":a=!0,dt="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":W=!1;break;case"BN":dt="N"}return dt},Ft=function(Z,V,St){var Et=Z.split("");return St&&vt(Et,St,{hiLevel:Q}),Et.reverse(),V&&V.reverse(),Et.join("")},vt=function(Z,V,St){var Et,M,$,q,O,dt=-1,gt=Z.length,Y=0,A=[],U=Q?x:S,et=[];for(W=!1,o=!1,a=!1,M=0;M<gt;M++)et[M]=mt(Z[M]);for($=0;$<gt;$++){if(O=Y,A[$]=Nt(Z,et,A,$),Et=240&(Y=U[O][I[A[$]]]),Y&=15,V[$]=q=U[Y][5],Et>0)if(Et===16){for(M=dt;M<$;M++)V[M]=1;dt=-1}else dt=-1;if(U[Y][6])dt===-1&&(dt=$);else if(dt>-1){for(M=dt;M<$;M++)V[M]=q;dt=-1}et[$]==="B"&&(V[$]=0),St.hiLevel|=q}a&&function(lt,ct,tt){for(var ft=0;ft<tt;ft++)if(lt[ft]==="S"){ct[ft]=Q;for(var ht=ft-1;ht>=0&&lt[ht]==="WS";ht--)ct[ht]=Q}}(et,V,gt)},Ct=function(Z,V,St,Et,M){if(!(M.hiLevel<Z)){if(Z===1&&Q===1&&!o)return V.reverse(),void(St&&St.reverse());for(var $,q,O,dt,gt=V.length,Y=0;Y<gt;){if(Et[Y]>=Z){for(O=Y+1;O<gt&&Et[O]>=Z;)O++;for(dt=Y,q=O-1;dt<q;dt++,q--)$=V[dt],V[dt]=V[q],V[q]=$,St&&($=St[dt],St[dt]=St[q],St[q]=$);Y=O}Y++}}},Ut=function(Z,V,St){var Et=Z.split(""),M={hiLevel:Q};return St||(St=[]),vt(Et,St,M),function($,q,O){if(O.hiLevel!==0&&w)for(var dt,gt=0;gt<$.length;gt++)q[gt]===1&&(dt=j.indexOf($[gt]))>=0&&($[gt]=j[dt+1])}(Et,St,M),Ct(2,Et,V,St,M),Ct(1,Et,V,St,M),Et.join("")};return this.__bidiEngine__.doBidiReorder=function(Z,V,St){if(function(M,$){if($)for(var q=0;q<M.length;q++)$[q]=q;f===void 0&&(f=Tt(M)),v===void 0&&(v=Tt(M))}(Z,V),u||!p||v)if(u&&p&&f^v)Q=f?1:0,Z=Ft(Z,V,St);else if(!u&&p&&v)Q=f?1:0,Z=Ut(Z,V,St),Z=Ft(Z,V);else if(!u||f||p||v){if(u&&!p&&f^v)Z=Ft(Z,V),f?(Q=0,Z=Ut(Z,V,St)):(Q=1,Z=Ut(Z,V,St),Z=Ft(Z,V));else if(u&&f&&!p&&v)Q=1,Z=Ut(Z,V,St),Z=Ft(Z,V);else if(!u&&!p&&f^v){var Et=w;f?(Q=1,Z=Ut(Z,V,St),Q=0,w=!1,Z=Ut(Z,V,St),w=Et):(Q=0,Z=Ut(Z,V,St),Z=Ft(Z,V),Q=1,w=!1,Z=Ut(Z,V,St),w=Et,Z=Ft(Z,V))}}else Q=0,Z=Ut(Z,V,St);else Q=f?1:0,Z=Ut(Z,V,St);return Z},this.__bidiEngine__.setOptions=function(Z){Z&&(u=Z.isInputVisual,p=Z.isOutputVisual,f=Z.isInputRtl,v=Z.isOutputRtl,w=Z.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var o=r.text,a=(r.x,r.y,r.options||{}),u=(r.mutex,a.lang,[]);if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,n.setOptions(a),Object.prototype.toString.call(o)==="[object Array]"){var f=0;for(u=[],f=0;f<o.length;f+=1)Object.prototype.toString.call(o[f])==="[object Array]"?u.push([n.doBidiReorder(o[f][0]),o[f][1],o[f][2]]):u.push([n.doBidiReorder(o[f])]);r.text=u}else r.text=n.doBidiReorder(o);n.setOptions({isInputVisual:!0})}])}(yn),yn.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Ml(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new uC(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new KL(this.contents),this.head=new YL(this),this.name=new nC(this),this.cmap=new ev(this),this.toUnicode={},this.hhea=new XL(this),this.maxp=new rC(this),this.hmtx=new iC(this),this.post=new tC(this),this.os2=new QL(this),this.loca=new lC(this),this.glyf=new sC(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,o,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var u,f,p,v;for(v=[],u=0,f=(p=this.bbox).length;u<f;u++)e=p[u],v.push(Math.round(e*this.scaleFactor));return v}).call(this),this.stemV=0,this.post.exists?(r=255&(o=this.post.italic_angle),32768&(n=o>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var o,a,u,f;for(u=0,a=0,f=(e=""+e).length;0<=f?a<f:a>f;a=0<=f?++a:--a)o=e.charCodeAt(a),u+=this.widthOfGlyph(this.characterToGlyph(o))+r*(1e3/n)||0;return u*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var ta,Ml=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,o;for(o=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)o.push(this.writeByte(e.charCodeAt(n)));return o},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,o,a,u,f,p;return e=this.readByte(),n=this.readByte(),r=this.readByte(),o=this.readByte(),a=this.readByte(),u=this.readByte(),f=this.readByte(),p=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^o)+16777216*(255^a)+65536*(255^u)+256*(255^f)+(255^p)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*o+16777216*a+65536*u+256*f+p},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,o,a;for(a=[],r=0,o=e.length;r<o;r++)n=e[r],a.push(this.writeByte(n));return a},t}(),KL=function(){var t;function e(n){var r,o,a;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},o=0,a=this.tableCount;0<=a?o<a:o>a;o=0<=a?++o:--o)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,o,a,u,f,p,v,w,b,S,x,I,D;for(D in x=Object.keys(n).length,p=Math.log(2),b=16*Math.floor(Math.log(x)/p),u=Math.floor(b/p),w=16*x-b,(o=new Ml).writeInt(this.scalarType),o.writeShort(x),o.writeShort(b),o.writeShort(u),o.writeShort(w),a=16*x,v=o.pos+a,f=null,I=[],n)for(S=n[D],o.writeString(D),o.writeInt(t(S)),o.writeInt(v),o.writeInt(S.length),I=I.concat(S),D==="head"&&(f=v),v+=S.length;v%4;)I.push(0),v++;return o.write(I),r=2981146554-t(o.data),o.pos=f+8,o.writeUInt32(r),o.data},t=function(n){var r,o,a,u;for(n=nv.call(n);n.length%4;)n.push(0);for(a=new Ml(n),o=0,r=0,u=n.length;r<u;r=r+=4)o+=a.readUInt32();return 4294967295&o},e}(),JL={}.hasOwnProperty,ka=function(t,e){for(var n in e)JL.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};ta=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var YL=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ka(e,ta),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new Ml).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),vg=function(){function t(e,n){var r,o,a,u,f,p,v,w,b,S,x,I,D,j,z,W,Q;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),b=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(p=0;p<256;++p)this.codeMap[p]=e.readByte();break;case 4:for(x=e.readUInt16(),S=x/2,e.pos+=6,a=function(){var mt,Tt;for(Tt=[],p=mt=0;0<=S?mt<S:mt>S;p=0<=S?++mt:--mt)Tt.push(e.readUInt16());return Tt}(),e.pos+=2,D=function(){var mt,Tt;for(Tt=[],p=mt=0;0<=S?mt<S:mt>S;p=0<=S?++mt:--mt)Tt.push(e.readUInt16());return Tt}(),v=function(){var mt,Tt;for(Tt=[],p=mt=0;0<=S?mt<S:mt>S;p=0<=S?++mt:--mt)Tt.push(e.readUInt16());return Tt}(),w=function(){var mt,Tt;for(Tt=[],p=mt=0;0<=S?mt<S:mt>S;p=0<=S?++mt:--mt)Tt.push(e.readUInt16());return Tt}(),o=(this.length-e.pos+this.offset)/2,f=function(){var mt,Tt;for(Tt=[],p=mt=0;0<=o?mt<o:mt>o;p=0<=o?++mt:--mt)Tt.push(e.readUInt16());return Tt}(),p=z=0,Q=a.length;z<Q;p=++z)for(j=a[p],r=W=I=D[p];I<=j?W<=j:W>=j;r=I<=j?++W:--W)w[p]===0?u=r+v[p]:(u=f[w[p]/2+(r-I)-(S-p)]||0)!==0&&(u+=v[p]),this.codeMap[r]=65535&u}e.pos=b}return t.encode=function(e,n){var r,o,a,u,f,p,v,w,b,S,x,I,D,j,z,W,Q,mt,Tt,Nt,Ft,vt,Ct,Ut,Z,V,St,Et,M,$,q,O,dt,gt,Y,A,U,et,lt,ct,tt,ft,ht,At,jt,H;switch(Et=new Ml,u=Object.keys(e).sort(function(J,yt){return J-yt}),n){case"macroman":for(D=0,j=function(){var J=[];for(I=0;I<256;++I)J.push(0);return J}(),W={0:0},a={},M=0,dt=u.length;M<dt;M++)W[ht=e[o=u[M]]]==null&&(W[ht]=++D),a[o]={old:e[o],new:W[e[o]]},j[o]=W[e[o]];return Et.writeUInt16(1),Et.writeUInt16(0),Et.writeUInt32(12),Et.writeUInt16(0),Et.writeUInt16(262),Et.writeUInt16(0),Et.write(j),{charMap:a,subtable:Et.data,maxGlyphID:D+1};case"unicode":for(V=[],b=[],Q=0,W={},r={},z=v=null,$=0,gt=u.length;$<gt;$++)W[Tt=e[o=u[$]]]==null&&(W[Tt]=++Q),r[o]={old:Tt,new:W[Tt]},f=W[Tt]-o,z!=null&&f===v||(z&&b.push(z),V.push(o),v=f),z=o;for(z&&b.push(z),b.push(65535),V.push(65535),Ut=2*(Ct=V.length),vt=2*Math.pow(Math.log(Ct)/Math.LN2,2),S=Math.log(vt/2)/Math.LN2,Ft=2*Ct-vt,p=[],Nt=[],x=[],I=q=0,Y=V.length;q<Y;I=++q){if(Z=V[I],w=b[I],Z===65535){p.push(0),Nt.push(0);break}if(Z-(St=r[Z].new)>=32768)for(p.push(0),Nt.push(2*(x.length+Ct-I)),o=O=Z;Z<=w?O<=w:O>=w;o=Z<=w?++O:--O)x.push(r[o].new);else p.push(St-Z),Nt.push(0)}for(Et.writeUInt16(3),Et.writeUInt16(1),Et.writeUInt32(12),Et.writeUInt16(4),Et.writeUInt16(16+8*Ct+2*x.length),Et.writeUInt16(0),Et.writeUInt16(Ut),Et.writeUInt16(vt),Et.writeUInt16(S),Et.writeUInt16(Ft),tt=0,A=b.length;tt<A;tt++)o=b[tt],Et.writeUInt16(o);for(Et.writeUInt16(0),ft=0,U=V.length;ft<U;ft++)o=V[ft],Et.writeUInt16(o);for(At=0,et=p.length;At<et;At++)f=p[At],Et.writeUInt16(f);for(jt=0,lt=Nt.length;jt<lt;jt++)mt=Nt[jt],Et.writeUInt16(mt);for(H=0,ct=x.length;H<ct;H++)D=x[H],Et.writeUInt16(D);return{charMap:r,subtable:Et.data,maxGlyphID:Q+1}}},t}(),ev=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ka(e,ta),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,o,a;for(n.pos=this.offset,this.version=n.readUInt16(),a=n.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)r=new vg(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var o,a;return r==null&&(r="macroman"),o=vg.encode(n,r),(a=new Ml).writeUInt16(0),a.writeUInt16(1),o.table=a.data.concat(o.subtable),o},e}(),XL=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ka(e,ta),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),QL=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ka(e,ta),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,o;for(o=[],r=0;r<10;++r)o.push(n.readByte());return o}(),this.charRange=function(){var r,o;for(o=[],r=0;r<4;++r)o.push(n.readInt());return o}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,o;for(o=[],r=0;r<2;r=++r)o.push(n.readInt());return o}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),tC=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ka(e,ta),e.prototype.tag="post",e.prototype.parse=function(n){var r,o,a;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var u;for(o=n.readUInt16(),this.glyphNameIndex=[],u=0;0<=o?u<o:u>o;u=0<=o?++u:--u)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],a=[];n.pos<this.offset+this.length;)r=n.readByte(),a.push(this.names.push(n.readString(r)));return a;case 151552:return o=n.readUInt16(),this.offsets=n.read(o);case 196608:break;case 262144:return this.map=(function(){var f,p,v;for(v=[],u=f=0,p=this.file.maxp.numGlyphs;0<=p?f<p:f>p;u=0<=p?++f:--f)v.push(n.readUInt32());return v}).call(this)}},e}(),eC=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},nC=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ka(e,ta),e.prototype.tag="name",e.prototype.parse=function(n){var r,o,a,u,f,p,v,w,b,S,x;for(n.pos=this.offset,n.readShort(),r=n.readShort(),p=n.readShort(),o=[],u=0;0<=r?u<r:u>r;u=0<=r?++u:--u)o.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+p+n.readShort()});for(v={},u=b=0,S=o.length;b<S;u=++b)a=o[u],n.pos=a.offset,w=n.readString(a.length),f=new eC(w,a),v[x=a.nameID]==null&&(v[x]=[]),v[a.nameID].push(f);this.strings=v,this.copyright=v[0],this.fontFamily=v[1],this.fontSubfamily=v[2],this.uniqueSubfamily=v[3],this.fontName=v[4],this.version=v[5];try{this.postscriptName=v[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=v[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=v[7],this.manufacturer=v[8],this.designer=v[9],this.description=v[10],this.vendorUrl=v[11],this.designerUrl=v[12],this.license=v[13],this.licenseUrl=v[14],this.preferredFamily=v[15],this.preferredSubfamily=v[17],this.compatibleFull=v[18],this.sampleText=v[19]},e}(),rC=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ka(e,ta),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),iC=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ka(e,ta),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,o,a,u,f,p,v;for(n.pos=this.offset,this.metrics=[],r=0,p=this.file.hhea.numberOfMetrics;0<=p?r<p:r>p;r=0<=p?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var w,b;for(b=[],r=w=0;0<=a?w<a:w>a;r=0<=a?++w:--w)b.push(n.readInt16());return b}(),this.widths=(function(){var w,b,S,x;for(x=[],w=0,b=(S=this.metrics).length;w<b;w++)u=S[w],x.push(u.advance);return x}).call(this),o=this.widths[this.widths.length-1],v=[],r=f=0;0<=a?f<a:f>a;r=0<=a?++f:--f)v.push(this.widths.push(o));return v},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),nv=[].slice,sC=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ka(e,ta),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,o,a,u,f,p,v,w,b,S;return n in this.cache?this.cache[n]:(u=this.file.loca,r=this.file.contents,o=u.indexOf(n),(a=u.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+o,f=(p=new Ml(r.read(a))).readShort(),w=p.readShort(),S=p.readShort(),v=p.readShort(),b=p.readShort(),this.cache[n]=f===-1?new aC(p,w,S,v,b):new oC(p,f,w,S,v,b),this.cache[n]))},e.prototype.encode=function(n,r,o){var a,u,f,p,v;for(f=[],u=[],p=0,v=r.length;p<v;p++)a=n[r[p]],u.push(f.length),a&&(f=f.concat(a.encode(o)));return u.push(f.length),{table:f,offsets:u}},e}(),oC=function(){function t(e,n,r,o,a,u){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=o,this.xMax=a,this.yMax=u,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),aC=function(){function t(e,n,r,o,a){var u,f;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=o,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],u=this.raw;f=u.readShort(),this.glyphOffsets.push(u.pos),this.glyphIDs.push(u.readUInt16()),32&f;)u.pos+=1&f?4:2,128&f?u.pos+=8:64&f?u.pos+=4:8&f&&(u.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Ml(nv.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),lC=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ka(e,ta),e.prototype.tag="loca",e.prototype.parse=function(n){var r,o;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,u;for(u=[],o=0,a=this.length;o<a;o+=2)u.push(2*n.readUInt16());return u}).call(this):(function(){var a,u;for(u=[],o=0,a=this.length;o<a;o+=4)u.push(n.readUInt32());return u}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var o=new Uint32Array(this.offsets.length),a=0,u=0,f=0;f<o.length;++f)if(o[f]=a,u<r.length&&r[u]==f){++u,o[f]=a;var p=this.offsets[f],v=this.offsets[f+1]-p;v>0&&(a+=v)}for(var w=new Array(4*o.length),b=0;b<o.length;++b)w[4*b+3]=255&o[b],w[4*b+2]=(65280&o[b])>>8,w[4*b+1]=(16711680&o[b])>>16,w[4*b]=(4278190080&o[b])>>24;return w},e}(),uC=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,o,a;for(n in o=this.font.cmap.tables[0].codeMap,e={},a=this.subset)r=a[n],e[n]=o[r];return e},t.prototype.glyphsFor=function(e){var n,r,o,a,u,f,p;for(o={},u=0,f=e.length;u<f;u++)o[a=e[u]]=this.font.glyf.glyphFor(a);for(a in n=[],o)(r=o[a])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(a in p=this.glyphsFor(n))r=p[a],o[a]=r;return o},t.prototype.encode=function(e,n){var r,o,a,u,f,p,v,w,b,S,x,I,D,j,z;for(o in r=ev.encode(this.generateCmap(),"unicode"),u=this.glyphsFor(e),x={0:0},z=r.charMap)x[(p=z[o]).old]=p.new;for(I in S=r.maxGlyphID,u)I in x||(x[I]=S++);return w=function(W){var Q,mt;for(Q in mt={},W)mt[W[Q]]=Q;return mt}(x),b=Object.keys(w).sort(function(W,Q){return W-Q}),D=function(){var W,Q,mt;for(mt=[],W=0,Q=b.length;W<Q;W++)f=b[W],mt.push(w[f]);return mt}(),a=this.font.glyf.encode(u,D,x),v=this.font.loca.encode(a.offsets,D),j={cmap:this.font.cmap.raw(),glyf:a.table,loca:v,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(j["OS/2"]=this.font.os2.raw()),this.font.directory.encode(j)},t}();yn.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,o,a,u;if(Array.isArray(n))return"["+function(){var f,p,v;for(v=[],f=0,p=n.length;f<p;f++)r=n[f],v.push(e.convert(r));return v}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(o in a=["<<"],n)u=n[o],a.push("/"+o+" "+e.convert(u));return a.push(">>"),a.join(`
`)}return""+n},e}();const cC={class:"h-full flex"},hC={class:"flex-1 relative"},fC={key:0,class:"absolute inset-0 bg-black/30 backdrop-blur-sm z-[2000] flex items-center justify-center"},dC={key:1,class:"absolute inset-0 flex items-center justify-center bg-gray-50 z-[1000]"},pC={class:"text-center max-w-lg mx-auto p-8"},gC={class:"space-y-4"},mC={class:"relative h-full w-full overflow-hidden flex flex-col"},vC={key:0,class:"z-[1000]"},yC={class:"flex-1 flex overflow-hidden"},_C={class:"flex-1 relative"},bC={key:0,class:"w-64 bg-white border-l border-gray-200 flex-shrink-0"},wC={key:1,class:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 z-50"},xC={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},LC={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4"},CC={class:"flex justify-between items-center mb-4"},kC={key:0,class:"space-y-4"},PC={key:0,class:"space-y-2"},SC={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},EC=["onClick"],AC={class:"font-medium text-gray-900"},MC={key:1,class:"space-y-2"},BC={class:"flex items-center mb-4"},TC={class:"text-sm text-gray-600"},NC={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},DC=["onClick"],OC={class:"font-medium text-gray-900"},RC={key:2,class:"space-y-2"},IC={class:"flex items-center mb-4"},FC={class:"text-sm text-gray-600"},jC={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},zC=["onClick"],UC={class:"font-medium text-gray-900"},qC={class:"text-sm text-gray-500"},$C={class:"text-xs text-gray-400 mt-1"},VC={key:1,class:"space-y-4"},HC={key:0,class:"space-y-2"},GC={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},WC=["onClick"],ZC={class:"font-medium text-gray-900"},KC={key:1,class:"space-y-2"},JC={class:"flex items-center mb-4"},YC={class:"text-sm text-gray-600"},XC={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},QC=["onClick"],t6={class:"font-medium text-gray-900"},e6={class:"text-sm text-gray-500"},n6={class:"text-xs text-gray-400 mt-1"},r6={key:2,class:"max-h-96 overflow-y-auto"},i6={key:0,class:"text-center py-8"},s6={key:1,class:"space-y-2"},o6=["onClick"],a6={class:"font-medium text-gray-900"},l6={class:"text-sm text-gray-500"},u6={class:"text-xs text-gray-400 mt-1"},yg=ys({__name:"MapView",setup(t){const e=Ie(null),n=Qd(),r=D1(),o=Ie([]),{currentTool:a,selectedShape:u,map:f,initMap:p,setDrawingTool:v,updateShapeStyle:w,updateShapeProperties:b,featureGroup:S,adjustView:x,clearActiveControlPoints:I}=Gx(),{initMap:D,changeBaseMap:j}=Wx(),z=Ie(!1),W=Ie(!1),Q=Ie(null),mt=Ie(!1),Tt=Ie(null),Nt=vs(),Ft=Ie([]),vt=Ie([]),Ct=Ie([]),Ut=Ie(null),Z=Ie(null),V=Ie(!1),St=Ie(!1),Et=Ie(!1),M=Ie(null),$=Fn(()=>{var Dt,Lt,ae;return console.log("[MapView][filteredClients] Computing with:",{userType:(Dt=Nt.user)==null?void 0:Dt.user_type,selectedDealer:Ut.value,dealerClients:vt.value}),((Lt=Nt.user)==null?void 0:Lt.user_type)==="admin"?Ut.value?vt.value:[]:((ae=Nt.user)==null?void 0:ae.user_type)==="dealer"?vt.value:[]}),q=Fn(()=>{var Dt;return u.value?{type:((Dt=u.value.properties)==null?void 0:Dt.type)||"unknown",properties:u.value.properties||{},layer:u.value}:null});function O(Dt){const Lt=Dt.getCenter(),ae=Dt.getZoom(),te={lat:Lt.lat,lng:Lt.lng,zoom:ae};document.cookie=`mapState=${JSON.stringify(te)};max-age=2592000;path=/`}function dt(){const Lt=document.cookie.split(";").find(ae=>ae.trim().startsWith("mapState="));if(Lt)try{return JSON.parse(Lt.split("=")[1])}catch(ae){return console.error("Erreur lors de la lecture du cookie de position:",ae),null}return null}Ca(async()=>{var xe,zt;await n.fetchPlans();const Dt=dt(),Lt=Dt?[Dt.lat,Dt.lng]:[46.603354,1.888334],ae=(Dt==null?void 0:Dt.zoom)??6;if(e.value&&!f.value){const pe=p(e.value,Lt,ae);pe.pm.setLang("fr"),pe.pm.addControls({rotateMode:!1}),D(pe),pe.on("moveend",()=>{O(pe)}),window.addEventListener("map-set-location",qe=>{if(pe&&qe.detail){const{lat:He,lng:Fe,zoom:Xe}=qe.detail;pe.flyTo([He,Fe],Xe,{duration:1.5,easeLinearity:.25})}})}const te=localStorage.getItem("lastPlanId");if(te)try{await A(parseInt(te))}catch(pe){console.error("Error loading last plan:",pe)}((xe=Nt.user)==null?void 0:xe.user_type)==="admin"&&await ft(),((zt=Nt.user)==null?void 0:zt.user_type)==="dealer"&&await ht()}),zi(()=>r.hasUnsavedChanges,Dt=>{Dt&&Q.value&&n.markUnsavedChanges()}),zi(f,async Dt=>{Dt&&n.currentPlan&&(gt(),await r.loadPlanElements(n.currentPlan.id),await A(n.currentPlan.id))}),zi(()=>n.currentPlan,async Dt=>{Dt?(Q.value=Dt,n.setCurrentPlan(Dt),r.setCurrentPlan(Dt.id)):(Q.value=null,gt())},{immediate:!0}),qh(()=>{f.value&&f.value.off("moveend")});function gt(){S.value&&S.value.clearLayers(),o.value=[],I(),u.value=null,a.value=""}async function Y(Dt){try{gt(),await r.loadPlanElements(Dt);const Lt=n.getPlanById(Dt);Lt?(Q.value=Lt,n.setCurrentPlan(Lt),r.setCurrentPlan(Lt.id),localStorage.setItem("lastPlanId",Lt.id.toString()),f.value&&S.value&&(r.getCurrentElements.forEach(ae=>{var pe,qe,He,Fe,Xe,De,on,pn,cr,rn,hn,Ze,Pn,vr,Tn,or,dr,qn,ze,Ne,Mr,ar;if(!S.value||!ae.data)return;let te=null;const{style:xe={},...zt}=ae.data;switch(ae.type_forme){case"TEXTE":{const je=ae.data;if(console.log("[refreshMapWithPlan] Création TextRectangle",{bounds:je.bounds,content:je.content,style:je.style}),!je.bounds){console.error("Bounds manquants pour TextRectangle");return}const hr=ui.latLngBounds(ui.latLng(je.bounds.southWest[1],je.bounds.southWest[0]),ui.latLng(je.bounds.northEast[1],je.bounds.northEast[0]));te=new Go(hr,je.content||"Double-cliquez pour éditer",{color:((pe=je.style)==null?void 0:pe.color)||"#3388ff",weight:((qe=je.style)==null?void 0:qe.weight)||3,opacity:((He=je.style)==null?void 0:He.opacity)||1,fillColor:((Fe=je.style)==null?void 0:Fe.fillColor)||"#3388ff",fillOpacity:((Xe=je.style)==null?void 0:Xe.fillOpacity)||.2,textStyle:{color:((on=(De=je.style)==null?void 0:De.textStyle)==null?void 0:on.color)||"#000000",fontSize:((cr=(pn=je.style)==null?void 0:pn.textStyle)==null?void 0:cr.fontSize)||"14px",fontFamily:((hn=(rn=je.style)==null?void 0:rn.textStyle)==null?void 0:hn.fontFamily)||"Arial, sans-serif",textAlign:((Pn=(Ze=je.style)==null?void 0:Ze.textStyle)==null?void 0:Pn.textAlign)||"center",backgroundColor:((Tn=(vr=je.style)==null?void 0:vr.textStyle)==null?void 0:Tn.backgroundColor)||"#FFFFFF",backgroundOpacity:((dr=(or=je.style)==null?void 0:or.textStyle)==null?void 0:dr.backgroundOpacity)??1,bold:((ze=(qn=je.style)==null?void 0:qn.textStyle)==null?void 0:ze.bold)||!1,italic:((Mr=(Ne=je.style)==null?void 0:Ne.textStyle)==null?void 0:Mr.italic)||!1}}),je.rotation&&typeof te.setRotation=="function"&&te.setRotation(je.rotation),te.properties={type:"TextRectangle",text:je.content||"Double-cliquez pour éditer",style:je.style,rotation:je.rotation||0};break}case"CERCLE":{const je=zt;je.center&&je.radius&&(te=ui.circle([je.center[1],je.center[0]],{...xe,radius:je.radius}));break}case"RECTANGLE":{const je=zt;je.bounds&&(te=ui.rectangle([[je.bounds.southWest[1],je.bounds.southWest[0]],[je.bounds.northEast[1],je.bounds.northEast[0]]],xe));break}case"DEMI_CERCLE":{const je=zt;if(je.center&&je.radius){te=new Hl(ui.latLng(je.center[1],je.center[0]),je.radius,je.startAngle,je.endAngle,xe),te.properties={type:"Semicircle",radius:je.radius,startAngle:je.startAngle,stopAngle:je.endAngle,style:xe};const hr=Math.PI*Math.pow(je.radius,2)*((je.endAngle-je.startAngle)/360),tn=2*je.radius+Math.PI*je.radius*((je.endAngle-je.startAngle)/180),nr=Math.PI*je.radius*((je.endAngle-je.startAngle)/180);te.properties.area=hr,te.properties.perimeter=tn,te.properties.arcLength=nr,te.properties.openingAngle=je.endAngle-je.startAngle,console.log("[loadPlan] Demi-cercle restauré avec propriétés:",te.properties)}break}case"LIGNE":{const je=zt;if(je.points){const hr=je.points.map(nr=>ui.latLng(nr[1],nr[0]));te=ui.polyline(hr,xe),te.properties={type:"Line",style:xe};let tn=0;for(let nr=1;nr<hr.length;nr++)tn+=hr[nr].distanceTo(hr[nr-1]);if(te.properties.length=tn,je.hasOwnProperty("dimensions")&&je.dimensions&&(te.properties.dimensions=je.dimensions,je.dimensions.width&&tn)){const nr=tn*je.dimensions.width;te.properties.surfaceInfluence=nr}console.log("[loadPlan] Ligne restaurée avec propriétés:",te.properties)}break}}te&&(te._dbId=ae.id,(ar=S.value)==null||ar.addLayer(te),o.value.push({id:ae.id,type:ae.type_forme,layer:te,properties:te.properties}))}),x()),console.log(`Plan ${Dt} chargé avec succès avec ${r.getCurrentElements.length} formes`)):console.error(`Plan ${Dt} introuvable après chargement`),W.value=!1}catch(Lt){throw console.error("Erreur lors du rafraîchissement de la carte:",Lt),Lt}}async function A(Dt){var Lt;try{if(console.log(`Tentative de chargement du plan ${Dt}...`),!n.getPlanById(Dt))try{await Cn.get(`/plans/${Dt}/`)}catch(te){throw((Lt=te.response)==null?void 0:Lt.status)===404&&(console.warn(`Plan ${Dt} non trouvé - Suppression de la référence du localStorage`),localStorage.removeItem("lastPlanId")),te}await Y(Dt),W.value=!1,console.log(`Plan ${Dt} chargé avec succès avec ${r.getCurrentElements.length} formes`)}catch(ae){throw console.error("Erreur lors du chargement du plan:",ae),ae}}async function U(){var Dt;if(!Q.value||!S.value){console.warn("Aucun plan actif ou groupe de formes à sauvegarder");return}mt.value=!0,Tt.value="saving";try{const Lt=[],ae=new Set(r.getCurrentElements.filter(pe=>pe.id!==void 0).map(pe=>pe.id)),te=new Set;S.value.eachLayer(pe=>{var Xe,De,on,pn,cr,rn,hn,Ze,Pn,vr,Tn,or,dr,qn,ze,Ne,Mr,ar,je,hr,tn,nr,Ni,qr,Un,$e,$r,_s,bi,ci,ti,hi,Ir,ei,Di,bs,qs,$s,Ui,os,ws;if(pe instanceof Go){const Xn=pe.getBounds(),xs=((Xe=pe.properties)==null?void 0:Xe.text)||"",Ls={style:{color:((De=pe.options)==null?void 0:De.color)||"#3388ff",fillColor:((on=pe.options)==null?void 0:on.fillColor)||"#3388ff",fillOpacity:((pn=pe.options)==null?void 0:pn.fillOpacity)||.2,weight:((cr=pe.options)==null?void 0:cr.weight)||3,opacity:((rn=pe.options)==null?void 0:rn.opacity)||1,textStyle:{color:((Pn=(Ze=(hn=pe.properties)==null?void 0:hn.style)==null?void 0:Ze.textStyle)==null?void 0:Pn.color)||"#000000",fontSize:((or=(Tn=(vr=pe.properties)==null?void 0:vr.style)==null?void 0:Tn.textStyle)==null?void 0:or.fontSize)||"14px",fontFamily:((ze=(qn=(dr=pe.properties)==null?void 0:dr.style)==null?void 0:qn.textStyle)==null?void 0:ze.fontFamily)||"Arial, sans-serif",textAlign:((ar=(Mr=(Ne=pe.properties)==null?void 0:Ne.style)==null?void 0:Mr.textStyle)==null?void 0:ar.textAlign)||"center",backgroundColor:((tn=(hr=(je=pe.properties)==null?void 0:je.style)==null?void 0:hr.textStyle)==null?void 0:tn.backgroundColor)||"#FFFFFF",backgroundOpacity:((qr=(Ni=(nr=pe.properties)==null?void 0:nr.style)==null?void 0:Ni.textStyle)==null?void 0:qr.backgroundOpacity)??1,bold:(($r=($e=(Un=pe.properties)==null?void 0:Un.style)==null?void 0:$e.textStyle)==null?void 0:$r.bold)||!1,italic:((ci=(bi=(_s=pe.properties)==null?void 0:_s.style)==null?void 0:bi.textStyle)==null?void 0:ci.italic)||!1}},bounds:{southWest:[Xn.getSouthWest().lng,Xn.getSouthWest().lat],northEast:[Xn.getNorthEast().lng,Xn.getNorthEast().lat]},content:xs};Lt.push({id:pe._dbId,type_forme:"TEXTE",data:Ls}),pe._dbId&&te.add(pe._dbId);return}const qe={style:{color:((ti=pe.options)==null?void 0:ti.color)||"#3388ff",fillColor:((hi=pe.options)==null?void 0:hi.fillColor)||"#3388ff",fillOpacity:((Ir=pe.options)==null?void 0:Ir.fillOpacity)||.2,weight:((ei=pe.options)==null?void 0:ei.weight)||3,opacity:((Di=pe.options)==null?void 0:Di.opacity)||1}};let He,Fe;if(pe instanceof ui.Circle)He="CERCLE",Fe={...qe,center:[pe.getLatLng().lng,pe.getLatLng().lat],radius:pe.getRadius()};else if(pe instanceof ui.Rectangle){He="RECTANGLE";const Xn=pe.getBounds();Fe={...qe,bounds:{southWest:[Xn.getSouthWest().lng,Xn.getSouthWest().lat],northEast:[Xn.getNorthEast().lng,Xn.getNorthEast().lat]}}}else if(((bs=pe.properties)==null?void 0:bs.type)==="Semicircle"){He="DEMI_CERCLE";let Xn;typeof pe.getLatLng=="function"?Xn=pe.getLatLng():pe.getCenter&&typeof pe.getCenter=="function"?Xn=pe.getCenter():pe._latlng?Xn=pe._latlng:Xn={lat:0,lng:0};const xs=pe.getRadius?pe.getRadius():0,Ls=(($s=(qs=pe.properties)==null?void 0:qs.style)==null?void 0:$s.startAngle)||0,ea=((os=(Ui=pe.properties)==null?void 0:Ui.style)==null?void 0:os.stopAngle)||180;Fe={...qe,center:[Xn.lng,Xn.lat],radius:xs,startAngle:Ls,endAngle:ea}}else if(pe instanceof ui.Polyline&&!(pe instanceof ui.Polygon)){He="LIGNE";const Xn=pe.getLatLngs();Fe={...qe,points:Xn.map(xs=>[xs.lng,xs.lat])}}if(He&&Fe){let Xn=pe._elementId;pe._dbId&&(Xn=pe._dbId,typeof Xn=="number"&&te.add(Xn)),Lt.push({id:Xn,type_forme:He,data:{...Fe,rotation:((ws=pe.properties)==null?void 0:ws.rotation)||0}})}});const xe=Array.from(ae).filter(pe=>!te.has(pe));console.log("Sauvegarde du plan:",{totalElements:Lt.length,elementsToDelete:xe.length,details:{elements:Lt,elementsToDelete:xe}}),r.elements=Lt;const zt=await r.saveToPlan(Q.value.id,{elementsToDelete:xe});if(zt&&((Dt=Q.value)!=null&&Dt.id)){const pe=Q.value.id;Q.value={...Q.value,...zt},n.updatePlanDetails(pe,zt)}Tt.value="success",setTimeout(()=>{Tt.value=null},3e3)}catch(Lt){console.error("Erreur lors de la sauvegarde du plan:",Lt),Tt.value=null}finally{mt.value=!1}}$h(()=>{Nt.user||wt(),n.clearCurrentPlan(),r.clearCurrentPlan()});function et(Dt){b(Dt)}function lt(Dt){try{const Lt=new Date(Dt);return isNaN(Lt.getTime())?(console.error("Date invalide reçue:",Dt),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(Lt)}catch(Lt){return console.error("Erreur lors du formatage de la date:",Lt),"Date invalide"}}const ct=()=>{S.value&&x()},tt=()=>{u.value&&S.value&&(v(""),S.value.removeLayer(u.value),u.value=null)};async function ft(){V.value=!0;try{const Dt=await Cn.get("/users/",{params:{role:"CONCESSIONNAIRE"}});Ft.value=Dt.data}catch(Dt){console.error("Erreur lors du chargement des concessionnaires:",Dt)}finally{V.value=!1}}async function ht(){var Dt;St.value=!0;try{const Lt=(Dt=Nt.user)==null?void 0:Dt.id;if(!Lt){console.error("[loadDealerClients] No dealer ID available");return}const ae=await Cn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:Lt}});Array.isArray(ae.data)?vt.value=ae.data:ae.data?vt.value=[ae.data]:vt.value=[]}catch(Lt){console.error("[loadDealerClients] Error:",Lt),vt.value=[]}finally{St.value=!1}}async function At(Dt){if(console.log("[MapView][selectClient] Current state:",{selectedDealer:Ut.value,selectedClient:Z.value,newPlanModalRef:!!M.value}),M.value){M.value.selectClient(Dt),Z.value=Dt,Et.value=!0;try{const Lt={client:Dt.id};Ut.value&&(Lt.concessionnaire=Ut.value.id);const ae=await Cn.get("/plans/",{params:Lt});Ct.value=ae.data}catch(Lt){console.error("[MapView][selectClient] Error loading client plans:",Lt),Ct.value=[]}finally{Et.value=!1}}else console.warn("[MapView][selectClient] NewPlanModal ref is not available")}function jt(){Ut.value=null,Z.value=null,vt.value=[],Ct.value=[]}function H(){Z.value=null,Ct.value=[]}async function J(Dt){console.log(`onPlanCreated - Tentative de chargement du plan ${Dt}`),await n.fetchPlans();const Lt=n.getPlanById(Dt);Lt?(console.log(`Plan ${Dt} trouvé, chargement en cours...`),localStorage.setItem("lastPlanId",Dt.toString()),Q.value=Lt,n.setCurrentPlan(Lt),r.setCurrentPlan(Lt.id),z.value=!1,console.log(`Plan ${Dt} chargé avec succès`)):console.error(`Plan ${Dt} introuvable après création! Vérifiez les permissions.`)}async function yt(Dt){try{M.value?(await M.value.selectDealer(Dt),Ut.value=Dt,vt.value=M.value.dealerClients):console.warn("[MapView][selectDealer] NewPlanModal ref is not available")}catch(Lt){console.error("[MapView][selectDealer] Error:",Lt)}}zi(Ut,async Dt=>{var Lt;if(Dt&&((Lt=Nt.user)==null?void 0:Lt.user_type)==="admin"){St.value=!0;try{const ae=await Cn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:Dt.id}});vt.value=Array.isArray(ae.data)?ae.data:[ae.data]}catch(ae){console.error("[MapView][watch selectedDealer] Error loading clients:",ae),vt.value=[]}finally{St.value=!1}}});function wt(){localStorage.removeItem("lastPlanId")}function K(Dt,Lt="m"){return Lt==="m²"?`${(Dt/1e4).toFixed(2)} ha`:Lt==="m"?Dt>=1e3?`${(Dt/1e3).toFixed(2)} km`:`${Dt.toFixed(2)} m`:`${Dt.toFixed(2)} ${Lt}`}const Ht=Ie(!1);function ne(Dt){return{Circle:"Cercle",Rectangle:"Rectangle",Semicircle:"Demi-cercle",Line:"Ligne",Polygon:"Polygone",TextRectangle:"Rectangle avec texte"}[Dt]||Dt}async function Zt(){var Dt,Lt,ae;if(!(!Q.value||!f.value||!S.value))try{console.log("Sauvegarde automatique avant génération de la synthèse..."),await U(),await new Promise(on=>setTimeout(on,1e3)),Ht.value=!0;const te=Q.value.concessionnaire_details,xe=Q.value.client_details;u.value&&(I(),u.value=null);const zt=new yn("l","mm","a4"),pe=zt.internal.pageSize.getWidth(),qe=zt.internal.pageSize.getHeight(),He=new Image;He.src=z0,await new Promise(on=>{He.onload=()=>on(),He.onerror=()=>on()}),zt.addImage(He,"JPEG",(pe-60)/2,20,60,60),zt.setFontSize(24),zt.setTextColor(0),zt.text(Q.value.nom||"Sans titre",pe/2,100,{align:"center"});let Fe=120;if(zt.setFontSize(14),te&&(zt.setFont("helvetica","bold"),zt.text("Concessionnaire:",20,Fe),zt.setFont("helvetica","normal"),zt.text(`${te.first_name} ${te.last_name}${te.company_name?` (${te.company_name})`:""}`,20,Fe+8),Fe+=25),xe&&(zt.setFont("helvetica","bold"),zt.text("Client:",20,Fe),zt.setFont("helvetica","normal"),zt.text(`${xe.first_name} ${xe.last_name}${xe.company_name?` (${xe.company_name})`:""}`,20,Fe+8),Fe+=25),Q.value.description){zt.setFont("helvetica","bold"),zt.text("Description:",20,Fe),zt.setFont("helvetica","normal");const on=zt.splitTextToSize(Q.value.description,150);zt.text(on,20,Fe+8),Fe+=10*on.length+15}zt.setFontSize(10),zt.setTextColor(100),zt.text(`Date de création: ${lt(Q.value.date_creation)}`,20,qe-20),zt.text(`Dernière modification: ${lt(Q.value.date_modification)}`,pe-20,qe-20,{align:"right"});const Xe=[];S.value.eachLayer(on=>Xe.push(on));const De=ui.simpleMapScreenshoter({hideElementsWithSelectors:[".leaflet-control-container",".leaflet-pm-toolbar",".leaflet-grid-layer",".leaflet-grid-label"],preventDownload:!0}).addTo(f.value);await new Promise(on=>setTimeout(on,3e3));for(let on=0;on<Xe.length;on++){zt.addPage();const pn=30;zt.addImage(He,"JPEG",pe-pn-10,10,pn,30),zt.setFontSize(8),zt.setTextColor(100);let rn=25;te&&(zt.text(`Concessionnaire: ${te.first_name} ${te.last_name}${te.company_name?` (${te.company_name})`:""}`,20,rn),rn+=10),xe&&zt.text(`Client: ${xe.first_name} ${xe.last_name}${xe.company_name?` (${xe.company_name})`:""}`,20,rn),zt.setDrawColor(200,200,200),zt.setLineWidth(.5),zt.line(20,45,pe-20,45);const hn=Xe[on],Ze=hn.properties;Ze&&(zt.setTextColor(0),zt.setFontSize(16),zt.setFont("helvetica","bold"),zt.text(ne(Ze.type),20,60));const Pn=((Dt=hn.getBounds)==null?void 0:Dt.call(hn))||((Lt=hn.getLatLng)==null?void 0:Lt.call(hn));Pn&&f.value.fitBounds(Pn instanceof ui.LatLng?ui.latLngBounds([Pn]):Pn,{padding:[50,50]}),await new Promise(vr=>setTimeout(vr,2e3)),f.value.invalidateSize(),await new Promise(vr=>{const Tn=()=>{var ze;const or=(ze=f.value)==null?void 0:ze.getContainer();if(!or){vr();return}const dr=or.querySelectorAll(".leaflet-tile-loaded");or.querySelectorAll(".leaflet-tile-loading").length===0&&dr.length>0?vr():setTimeout(Tn,100)};Tn()});try{const vr=await De.takeScreen("image"),Tn=await new Promise((ze,Ne)=>{const Mr=new Image;Mr.onload=()=>ze(Mr),Mr.onerror=ar=>Ne(ar),Mr.src=vr}),or=pe*.6-30;let dr=Tn.height*or/Tn.width;dr>qe*.9&&(dr=qe*.9);const qn=Math.max(80,(qe-dr)/2);if(zt.addImage(Tn,"PNG",20,qn,or,dr),Ze){const ze=pe*.6+10;let Ne=70;zt.setFontSize(12),zt.setFont("helvetica","normal"),Ze.type==="Circle"?(zt.text(`Rayon: ${K(Ze.radius)}`,ze,Ne),Ne+=10,zt.text(`Diamètre: ${K(Ze.radius*2)}`,ze,Ne),Ne+=10,zt.text(`Surface: ${K(Ze.area,"m²")}`,ze,Ne),Ne+=10,zt.text(`Périmètre: ${K(Ze.perimeter)}`,ze,Ne),Ne+=10,Ze.surfaceInterieure&&(zt.text(`Surface intérieure: ${K(Ze.surfaceInterieure,"m²")}`,ze,Ne),Ne+=10),Ze.surfaceExterieure&&(zt.text(`Surface extérieure: ${K(Ze.surfaceExterieure,"m²")}`,ze,Ne),Ne+=10)):Ze.type==="Rectangle"?(zt.text(`Largeur: ${K(Ze.width)}`,ze,Ne),Ne+=10,zt.text(`Hauteur: ${K(Ze.height)}`,ze,Ne),Ne+=10,zt.text(`Surface: ${K(Ze.area,"m²")}`,ze,Ne),Ne+=10,zt.text(`Périmètre: ${K(Ze.perimeter)}`,ze,Ne),Ne+=10,Ze.surfaceInterieure&&(zt.text(`Surface intérieure: ${K(Ze.surfaceInterieure,"m²")}`,ze,Ne),Ne+=10),Ze.surfaceExterieure&&(zt.text(`Surface extérieure: ${K(Ze.surfaceExterieure,"m²")}`,ze,Ne),Ne+=10)):Ze.type==="Line"?(zt.text(`Longueur: ${K(Ze.length)}`,ze,Ne),Ne+=10,(ae=Ze.dimensions)!=null&&ae.width&&(zt.text(`Largeur d'influence: ${K(Ze.dimensions.width)}`,ze,Ne),Ne+=10),Ze.surfaceInfluence&&(zt.text(`Surface d'influence: ${K(Ze.surfaceInfluence,"m²")}`,ze,Ne),Ne+=10)):Ze.type==="Polygon"?(zt.text(`Surface: ${K(Ze.area,"m²")}`,ze,Ne),Ne+=10,zt.text(`Périmètre: ${K(Ze.perimeter)}`,ze,Ne),Ne+=10,Ze.surfaceInterieure&&(zt.text(`Surface intérieure: ${K(Ze.surfaceInterieure,"m²")}`,ze,Ne),Ne+=10),Ze.surfaceExterieure&&(zt.text(`Surface extérieure: ${K(Ze.surfaceExterieure,"m²")}`,ze,Ne),Ne+=10)):Ze.type==="Semicircle"&&(zt.text(`Rayon: ${K(Ze.radius)}`,ze,Ne),Ne+=10,zt.text(`Diamètre: ${K(Ze.radius*2)}`,ze,Ne),Ne+=10,zt.text(`Surface: ${K(Ze.area,"m²")}`,ze,Ne),Ne+=10,zt.text(`Périmètre: ${K(Ze.perimeter)}`,ze,Ne),Ne+=10,zt.text(`Longueur d'arc: ${K(Ze.arcLength)}`,ze,Ne),Ne+=10,zt.text(`Angle d'ouverture: ${Ze.openingAngle.toFixed(1)}°`,ze,Ne),Ne+=10,Ze.surfaceInterieure&&(zt.text(`Surface intérieure: ${K(Ze.surfaceInterieure,"m²")}`,ze,Ne),Ne+=10),Ze.surfaceExterieure&&(zt.text(`Surface extérieure: ${K(Ze.surfaceExterieure,"m²")}`,ze,Ne),Ne+=10))}}catch(vr){console.error(`[generateSynthesis] Erreur capture forme ${on+1}:`,vr)}}f.value.removeControl(De),zt.save(`synthese_${Q.value.nom}.pdf`)}catch(te){console.error("[generateSynthesis] Erreur:",te),alert("Une erreur est survenue lors de la génération de la synthèse. Veuillez réessayer.")}finally{Ht.value=!1}}return(Dt,Lt)=>{var ae,te,xe;return ie(),ue("div",cC,[B("div",hC,[Ht.value?(ie(),ue("div",fC,Lt[8]||(Lt[8]=[fc('<div class="bg-white/90 rounded-2xl p-8 max-w-md shadow-2xl border border-gray-100"><div class="flex flex-col items-center"><div class="relative w-24 h-24 mb-6"><div class="absolute inset-0 border-4 border-primary-200 rounded-full"></div><div class="absolute inset-0 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"></div><div class="absolute inset-2 border-2 border-primary-400/30 rounded-full animate-pulse"></div><div class="absolute inset-0 flex items-center justify-center"><svg class="w-8 h-8 text-primary-600 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div><h3 class="text-xl font-semibold text-gray-900 mb-2"> Génération de la synthèse </h3><div class="space-y-2 text-center"><p class="text-primary-600 font-medium"> Capture des formes en cours... </p><p class="text-sm text-gray-500"> Nous optimisons la qualité de vos captures pour un rendu parfait </p></div></div></div>',1)]))):nn("",!0),Q.value?nn("",!0):(ie(),ue("div",dC,[B("div",pC,[Lt[11]||(Lt[11]=fc('<div class="relative w-48 h-48 mx-auto mb-12 rounded-full bg-gradient-to-br from-primary-100 to-primary-50 p-8 shadow-lg ring-4 ring-white"><img src="'+z0+'" alt="IrrigationDesign Logo" class="w-full h-full object-contain filter drop-shadow-md"><div class="absolute inset-0 rounded-full bg-gradient-to-t from-transparent to-white/10 pointer-events-none"></div></div><h1 class="text-3xl font-bold text-gray-900 mb-4">Bienvenue sur IrrigationDesign</h1><p class="text-gray-600 mb-8">Pour commencer à dessiner, vous devez d&#39;abord créer un nouveau plan ou charger un plan existant.</p>',3)),B("div",gC,[B("button",{onClick:Lt[0]||(Lt[0]=zt=>z.value=!0),class:"w-full flex items-center justify-center px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Lt[9]||(Lt[9]=[B("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Ur(" Créer un nouveau plan ")])),B("button",{onClick:Lt[1]||(Lt[1]=zt=>W.value=!0),class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Lt[10]||(Lt[10]=[B("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),Ur(" Charger un plan existant ")]))])])])),B("div",mC,[Q.value&&!Ht.value?(ie(),ue("div",vC,[Sr(kx,{"last-save":(ae=Q.value)!=null&&ae.date_modification?new Date(Q.value.date_modification):void 0,"plan-name":(te=Q.value)==null?void 0:te.nom,"plan-description":(xe=Q.value)==null?void 0:xe.description,"save-status":Tt.value,onChangeMapType:On(j),onCreateNewPlan:Lt[2]||(Lt[2]=zt=>z.value=!0),onLoadPlan:Lt[3]||(Lt[3]=zt=>W.value=!0),onSavePlan:U,onAdjustView:ct,onGenerateSummary:Zt},null,8,["last-save","plan-name","plan-description","save-status","onChangeMapType"])])):nn("",!0),B("div",yC,[B("div",_C,[B("div",{ref_key:"mapContainer",ref:e,class:"absolute inset-0 w-full h-full"},null,512)]),Q.value&&!Ht.value?(ie(),ue("div",bC,[Sr(Vw,{"current-tool":On(a),"selected-shape":q.value,onToolChange:On(v),onStyleUpdate:On(w),onPropertiesUpdate:et,onDeleteShape:tt},null,8,["current-tool","selected-shape","onToolChange","onStyleUpdate"])])):nn("",!0)]),Ht.value?(ie(),ue("div",wC,Lt[12]||(Lt[12]=[fc('<div class="text-center"><div class="mb-4"><svg class="animate-spin h-10 w-10 mx-auto text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div><p class="text-lg font-medium text-gray-900">Génération de la synthèse en cours...</p><p class="text-sm text-gray-500 mt-2">Veuillez patienter pendant que nous analysons votre plan.</p></div>',1)]))):nn("",!0)]),Sr(O1,{ref_key:"newPlanModalRef",ref:M,modelValue:z.value,"onUpdate:modelValue":Lt[4]||(Lt[4]=zt=>z.value=zt),onCreated:J,onDealerSelected:Lt[5]||(Lt[5]=zt=>Ut.value=zt),onClientSelected:Lt[6]||(Lt[6]=zt=>Z.value=zt)},null,8,["modelValue"]),W.value?(ie(),ue("div",xC,[B("div",LC,[B("div",CC,[Lt[14]||(Lt[14]=B("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),B("button",{onClick:Lt[7]||(Lt[7]=zt=>W.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},Lt[13]||(Lt[13]=[B("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),On(Nt).isAdmin?(ie(),ue("div",kC,[Ut.value?Z.value?(ie(),ue("div",RC,[B("div",IC,[B("button",{onClick:H,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Lt[23]||(Lt[23]=[B("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Ur(" Retour à la liste des clients ")])),Lt[24]||(Lt[24]=B("span",{class:"mx-2 text-gray-400"},"|",-1)),B("span",FC,Se(Z.value.first_name)+" "+Se(Z.value.last_name)+" ("+Se(Z.value.company_name)+") ",1)]),Lt[26]||(Lt[26]=B("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),B("div",jC,[Et.value?(ie(),ue(_n,{key:0},Vn(3,zt=>B("div",{key:zt,class:"animate-pulse"},Lt[25]||(Lt[25]=[B("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[B("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),B("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),B("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(ie(!0),ue(_n,{key:1},Vn(Ct.value,zt=>(ie(),ue("button",{key:zt.id,onClick:pe=>A(zt.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[B("div",UC,Se(zt.nom),1),B("div",qC,Se(zt.description),1),B("div",$C," Modifié le "+Se(lt(zt.date_modification)),1)],8,zC))),128))])])):(ie(),ue("div",MC,[B("div",BC,[B("button",{onClick:jt,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Lt[18]||(Lt[18]=[B("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Ur(" Retour à la liste des concessionnaires ")])),Lt[19]||(Lt[19]=B("span",{class:"mx-2 text-gray-400"},"|",-1)),B("span",TC,Se(Ut.value.first_name)+" "+Se(Ut.value.last_name)+" ("+Se(Ut.value.company_name)+") ",1)]),Lt[22]||(Lt[22]=B("h3",{class:"font-medium text-gray-700"},"Sélectionnez un client",-1)),B("div",NC,[St.value?(ie(),ue(_n,{key:0},Vn(3,zt=>B("div",{key:zt,class:"animate-pulse"},Lt[20]||(Lt[20]=[B("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[B("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),B("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(ie(!0),ue(_n,{key:1},Vn($.value,zt=>(ie(),ue("button",{key:zt.id,onClick:pe=>At(zt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[B("div",null,[B("div",OC,Se(zt.first_name)+" "+Se(zt.last_name)+" ("+Se(zt.company_name)+")",1)]),Lt[21]||(Lt[21]=B("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,DC))),128))])])):(ie(),ue("div",PC,[Lt[17]||(Lt[17]=B("h3",{class:"font-medium text-gray-700"},"Sélectionnez un concessionnaire",-1)),B("div",SC,[V.value?(ie(),ue(_n,{key:0},Vn(3,zt=>B("div",{key:zt,class:"animate-pulse"},Lt[15]||(Lt[15]=[B("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[B("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),B("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(ie(!0),ue(_n,{key:1},Vn(Ft.value,zt=>(ie(),ue("button",{key:zt.id,onClick:pe=>yt(zt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[B("div",null,[B("div",AC,Se(zt.first_name)+" "+Se(zt.last_name)+" ("+Se(zt.company_name)+")",1)]),Lt[16]||(Lt[16]=B("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,EC))),128))])]))])):On(Nt).isDealer?(ie(),ue("div",VC,[Z.value?(ie(),ue("div",KC,[B("div",JC,[B("button",{onClick:H,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Lt[30]||(Lt[30]=[B("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Ur(" Retour à la liste des clients ")])),Lt[31]||(Lt[31]=B("span",{class:"mx-2 text-gray-400"},"|",-1)),B("span",YC,Se(Z.value.first_name)+" "+Se(Z.value.last_name),1)]),Lt[33]||(Lt[33]=B("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),B("div",XC,[Et.value?(ie(),ue(_n,{key:0},Vn(3,zt=>B("div",{key:zt,class:"animate-pulse"},Lt[32]||(Lt[32]=[B("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[B("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),B("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),B("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(ie(!0),ue(_n,{key:1},Vn(Ct.value,zt=>(ie(),ue("button",{key:zt.id,onClick:pe=>A(zt.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[B("div",t6,Se(zt.nom),1),B("div",e6,Se(zt.description),1),B("div",n6," Modifié le "+Se(lt(zt.date_modification)),1)],8,QC))),128))])])):(ie(),ue("div",HC,[Lt[29]||(Lt[29]=B("h3",{class:"font-medium text-gray-700"},"Sélectionnez un client",-1)),B("div",GC,[St.value?(ie(),ue(_n,{key:0},Vn(3,zt=>B("div",{key:zt,class:"animate-pulse"},Lt[27]||(Lt[27]=[B("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[B("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),B("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(ie(!0),ue(_n,{key:1},Vn($.value,zt=>(ie(),ue("button",{key:zt.id,onClick:pe=>At(zt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[B("div",null,[B("div",ZC,Se(zt.first_name)+" "+Se(zt.last_name)+" ("+Se(zt.company_name)+")",1)]),Lt[28]||(Lt[28]=B("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,WC))),128))])]))])):(ie(),ue("div",r6,[On(n).plans.length===0?(ie(),ue("div",i6,Lt[34]||(Lt[34]=[B("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(ie(),ue("div",s6,[(ie(!0),ue(_n,null,Vn(On(n).plans,zt=>(ie(),ue("button",{key:zt.id,onClick:pe=>A(zt.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[B("div",a6,Se(zt.nom),1),B("div",l6,Se(zt.description),1),B("div",u6," Modifié le "+Se(lt(zt.date_modification)),1)],8,o6))),128))]))]))])])):nn("",!0)])])}}}),c6={class:"fixed inset-0 z-50 overflow-y-auto"},h6={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},f6={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},d6={class:"mt-3 text-center sm:mt-0 sm:text-left"},p6={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},g6={class:"mt-4"},m6={class:"grid grid-cols-2 gap-4"},v6=["disabled"],y6={key:0,class:"mt-1 text-sm text-gray-500"},_6={class:"grid grid-cols-2 gap-4"},b6={key:0},w6=["disabled"],x6=["value"],L6={key:1},C6=["disabled"],k6=["value"],P6={key:0},S6={class:"grid grid-cols-2 gap-4"},E6={key:1,class:"rounded-md bg-red-50 p-4"},A6={class:"flex"},M6={class:"ml-3"},B6={class:"text-sm font-medium text-red-800"},T6={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense"},N6=["disabled"],D6={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},rv=ys({__name:"UserFormModal",props:{user:{type:Object,default:null},dealers:{type:Array,default:()=>[]},isAdmin:{type:Boolean,required:!0},currentDealer:{type:String,default:""}},emits:["close","save"],setup(t,{emit:e}){var I,D,j,z,W,Q,mt;const n=t,r=e,o=vs(),a=Ie(!1),u=Ie(null),f=Fn(()=>{var Tt;return n.isAdmin?n.user?n.user.id!==((Tt=o.user)==null?void 0:Tt.id):!0:!1}),p=Fn(()=>n.isAdmin?[{value:"ADMIN",label:"Administrateur"},{value:"CONCESSIONNAIRE",label:"Concessionnaire"},{value:"UTILISATEUR",label:"Client"}]:[{value:"UTILISATEUR",label:"Client"}]),v=Fn(()=>n.isAdmin?b.role==="UTILISATEUR":!0),w=Fn(()=>n.dealers.filter(Tt=>Tt.role==="CONCESSIONNAIRE")),b=Ya({first_name:((I=n.user)==null?void 0:I.first_name)||"",last_name:((D=n.user)==null?void 0:D.last_name)||"",email:((j=n.user)==null?void 0:j.email)||"",username:((z=n.user)==null?void 0:z.username)||"",company_name:((W=n.user)==null?void 0:W.company_name)||"",role:((Q=n.user)==null?void 0:Q.role)||(n.isAdmin?"":"UTILISATEUR"),dealer:((mt=n.user)==null?void 0:mt.concessionnaire)||n.currentDealer,password:"",password_confirm:""}),S=()=>{if(!b.first_name||!b.last_name)return u.value="Le prénom et le nom sont requis",!1;if(!b.email)return u.value="L'email est requis",!1;if(!b.username)return u.value="Le nom d'utilisateur est requis",!1;if(!n.user){if(!b.password)return u.value="Le mot de passe est requis",!1;if(b.password!==b.password_confirm)return u.value="Les mots de passe ne correspondent pas",!1}return b.role==="UTILISATEUR"&&!b.dealer?(u.value="Un concessionnaire doit être sélectionné pour un client",!1):!0},x=async()=>{var Tt;if(u.value=null,!!S()){a.value=!0;try{const Nt={...b};(Tt=n.user)!=null&&Tt.id&&(Nt.id=n.user.id,delete Nt.password,delete Nt.password_confirm),Nt.role==="UTILISATEUR"&&Nt.dealer&&(Nt.concessionnaire=Nt.dealer),delete Nt.dealer,await r("save",Nt),r("close")}catch(Nt){console.error("Erreur formulaire:",Nt),u.value=Nt.message,a.value=!1}}};return(Tt,Nt)=>(ie(),ue("div",c6,[B("div",h6,[Nt[24]||(Nt[24]=B("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[B("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),Nt[25]||(Nt[25]=B("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),B("div",f6,[B("div",null,[B("div",d6,[B("h3",p6,Se(t.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),B("div",g6,[B("form",{onSubmit:Wh(x,["prevent"]),class:"space-y-4"},[B("div",m6,[B("div",null,[Nt[10]||(Nt[10]=B("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prénom",-1)),An(B("input",{type:"text",id:"first_name","onUpdate:modelValue":Nt[0]||(Nt[0]=Ft=>b.first_name=Ft),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[fr,b.first_name]])]),B("div",null,[Nt[11]||(Nt[11]=B("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),An(B("input",{type:"text",id:"last_name","onUpdate:modelValue":Nt[1]||(Nt[1]=Ft=>b.last_name=Ft),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[fr,b.last_name]])])]),B("div",null,[Nt[12]||(Nt[12]=B("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),An(B("input",{type:"email",id:"email","onUpdate:modelValue":Nt[2]||(Nt[2]=Ft=>b.email=Ft),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[fr,b.email]])]),B("div",null,[Nt[13]||(Nt[13]=B("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),An(B("input",{type:"text",id:"username","onUpdate:modelValue":Nt[3]||(Nt[3]=Ft=>b.username=Ft),required:"",disabled:!!n.user,class:zr(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",{"bg-gray-100":!!n.user}])},null,10,v6),[[fr,b.username]]),n.user?(ie(),ue("p",y6," Le nom d'utilisateur ne peut pas être modifié après la création. ")):nn("",!0)]),B("div",null,[Nt[14]||(Nt[14]=B("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Nom de l'entreprise",-1)),An(B("input",{type:"text",id:"company_name","onUpdate:modelValue":Nt[4]||(Nt[4]=Ft=>b.company_name=Ft),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[fr,b.company_name]])]),B("div",_6,[n.isAdmin?(ie(),ue("div",b6,[Nt[16]||(Nt[16]=B("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Rôle",-1)),An(B("select",{id:"role","onUpdate:modelValue":Nt[5]||(Nt[5]=Ft=>b.role=Ft),required:"",disabled:!f.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Nt[15]||(Nt[15]=B("option",{value:""},"Sélectionner un rôle",-1)),(ie(!0),ue(_n,null,Vn(p.value,Ft=>(ie(),ue("option",{key:Ft.value,value:Ft.value},Se(Ft.label),9,x6))),128))],8,w6),[[js,b.role]])])):nn("",!0),v.value?(ie(),ue("div",L6,[Nt[18]||(Nt[18]=B("label",{for:"dealer",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),An(B("select",{id:"dealer","onUpdate:modelValue":Nt[6]||(Nt[6]=Ft=>b.dealer=Ft),required:"",disabled:!n.isAdmin,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Nt[17]||(Nt[17]=B("option",{value:""},"Sélectionner un concessionnaire",-1)),(ie(!0),ue(_n,null,Vn(w.value,Ft=>(ie(),ue("option",{key:Ft.id,value:Ft.id},Se(On(Jl)(Ft)),9,k6))),128))],8,C6),[[js,b.dealer]])])):nn("",!0)]),t.user?nn("",!0):(ie(),ue("div",P6,[B("div",S6,[B("div",null,[Nt[19]||(Nt[19]=B("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),An(B("input",{type:"password",id:"password","onUpdate:modelValue":Nt[7]||(Nt[7]=Ft=>b.password=Ft),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[fr,b.password]])]),B("div",null,[Nt[20]||(Nt[20]=B("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),An(B("input",{type:"password",id:"password_confirm","onUpdate:modelValue":Nt[8]||(Nt[8]=Ft=>b.password_confirm=Ft),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[fr,b.password_confirm]])])]),Nt[21]||(Nt[21]=B("p",{class:"mt-1 text-sm text-gray-500"}," L'utilisateur devra changer son mot de passe à sa première connexion. ",-1))])),u.value?(ie(),ue("div",E6,[B("div",A6,[Nt[22]||(Nt[22]=B("div",{class:"flex-shrink-0"},[B("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),B("div",M6,[B("h3",B6,Se(u.value),1)])])])):nn("",!0),B("div",T6,[B("button",{type:"submit",disabled:a.value,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:col-start-2 sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},[a.value?(ie(),ue("svg",D6,Nt[23]||(Nt[23]=[B("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),B("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):nn("",!0),Ur(" "+Se(a.value?"Enregistrement...":"Enregistrer"),1)],8,N6),B("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:col-start-1 sm:text-sm",onClick:Nt[9]||(Nt[9]=Ft=>Tt.$emit("close"))}," Annuler ")])],32)])])])])])]))}}),O6={class:"fixed inset-0 z-50 overflow-y-auto"},R6={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},I6={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},F6={class:"sm:flex sm:items-start"},j6={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},z6={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},U6={class:"mt-2"},q6={class:"text-sm text-gray-500"},$6={class:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},iv=ys({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(t){return(e,n)=>(ie(),ue("div",O6,[B("div",R6,[n[3]||(n[3]=B("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[B("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),n[4]||(n[4]=B("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),B("div",I6,[B("div",F6,[n[2]||(n[2]=B("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[B("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),B("div",j6,[B("h3",z6,Se(t.title),1),B("div",U6,[B("p",q6,Se(t.message),1)])])]),B("div",$6,[B("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:n[0]||(n[0]=r=>e.$emit("confirm"))}," Confirmer "),B("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:w-auto sm:text-sm",onClick:n[1]||(n[1]=r=>e.$emit("cancel"))}," Annuler ")])])])]))}}),V6={class:"h-full bg-gray-50"},H6={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},G6={class:"flex justify-between items-center mb-8"},W6={class:"text-3xl font-extrabold text-gray-900"},Z6={class:"bg-white shadow rounded-lg mb-6 p-4"},K6={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},J6={key:0},Y6=["placeholder"],X6={key:1},Q6=["value"],tk={class:"bg-white shadow rounded-lg"},ek={class:"overflow-x-auto"},nk={class:"min-w-full divide-y divide-gray-200"},rk={class:"bg-gray-50"},ik={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},sk={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},ok={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},ak={class:"bg-white divide-y divide-gray-200"},lk={class:"px-6 py-4 whitespace-nowrap"},uk={class:"flex items-center"},ck={class:"flex-shrink-0 h-10 w-10"},hk={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},fk={class:"text-primary-600 font-medium"},dk={class:"ml-4"},pk={class:"text-sm font-medium text-gray-900"},gk={class:"text-sm text-gray-500"},mk={class:"px-6 py-4 whitespace-nowrap"},vk={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},yk={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},_k={class:"px-6 py-4 whitespace-nowrap"},bk={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},wk=["onClick"],xk=["onClick"],Lk=ys({__name:"UserListView",setup(t){const e=vs(),n=Ie([]),r=Ie([]),o=Ie(!1),a=Ie(!1),u=Ie(null),f=Ie(null),p=Ya({role:"",search:"",dealer:""}),v=Fn(()=>e.isAdmin),w=Fn(()=>e.isDealer),b=Fn(()=>n.value.filter(Z=>Z.role==="CONCESSIONNAIRE")),S=Fn(()=>{var V;console.log("Computing filtered users..."),console.log("Current users:",n.value),console.log("Is admin:",v.value),console.log("Is dealer:",w.value),console.log("Current filters:",p);let Z=n.value;if(w.value&&(console.log("Filtering for dealer:",(V=e.user)==null?void 0:V.id),Z=Z.filter(St=>{var Et;return St.role==="UTILISATEUR"&&St.dealer===((Et=e.user)==null?void 0:Et.id)}),console.log("Filtered users for dealer:",Z)),v.value&&(p.role&&(Z=Z.filter(St=>St.role===p.role),console.log("Filtered by role:",Z)),p.dealer&&(Z=Z.filter(St=>String(St.dealer)===String(p.dealer)),console.log("Filtered by dealer:",Z))),p.search){const St=p.search.toLowerCase();Z=Z.filter(Et=>Et.username.toLowerCase().includes(St)||Et.email.toLowerCase().includes(St)||Et.first_name.toLowerCase().includes(St)||Et.last_name.toLowerCase().includes(St)||Et.company_name&&Et.company_name.toLowerCase().includes(St)),console.log("Filtered by search:",Z)}return console.log("Final filtered users:",Z),Z});Ca(async()=>{await x(),v.value&&await I()});async function x(){try{console.log("Fetching users...");const Z=await Cn.get("/users/");console.log("Users API response:",Z.data),n.value=Z.data,console.log("Users after assignment:",n.value)}catch(Z){console.error("Erreur lors de la récupération des utilisateurs:",Z)}}async function I(){try{const Z=await Cn.get("/users/",{params:{role:"CONCESSIONNAIRE"}});r.value=Z.data}catch(Z){console.error("Erreur lors de la récupération des concessionnaires:",Z)}}function D(){u.value=null,o.value=!0}function j(Z){u.value={...Z},o.value=!0}function z(){o.value=!1,u.value=null}async function W(Z){var V;try{let St;const Et=!!Z.id,M={...Z};return delete M.dealer_name,delete M.full_name,delete M.user_type,delete M.permissions,Et?St=await Cn.patch(`/users/${Z.id}/`,M):St=await Cn.post("/users/",M),await x(),z(),St.data}catch(St){const Et=((V=St.response)==null?void 0:V.data)||{};let M="";throw typeof Et=="object"&&(M=Object.entries(Et).map(([$,q])=>Array.isArray(q)?q[0]:q).filter($=>$).join(`
`)),M||(M="Une erreur est survenue lors de la sauvegarde"),new Error(M)}}function Q(Z){f.value=Z,a.value=!0}async function mt(){if(f.value)try{await Cn.delete(`/users/${f.value.id}/`),await x(),a.value=!1,f.value=null}catch(Z){throw console.error("Erreur lors de la suppression de l'utilisateur:",Z),Z}}function Tt(Z,V){return`${(Z==null?void 0:Z.charAt(0))||""}${(V==null?void 0:V.charAt(0))||""}`.toUpperCase()}const Nt={ADMIN:"Admin",CONCESSIONNAIRE:"Concessionnaire",UTILISATEUR:"Client"};function Ft(Z){return Nt[Z]||Z}function vt(Z){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function Ct(Z){return Z?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}function Ut(Z){var V;return v.value?!0:w.value?Z.role==="UTILISATEUR"&&Z.dealer===((V=e.user)==null?void 0:V.id):!1}return(Z,V)=>{var St,Et;return ie(),ue("div",V6,[B("div",H6,[B("div",G6,[B("h1",W6,Se(v.value?"Gestion des utilisateurs":"Mes clients"),1),B("button",{onClick:D,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[V[4]||(V[4]=B("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),Ur(" "+Se(v.value?"Nouvel utilisateur":"Nouveau client"),1)])]),B("div",Z6,[B("div",K6,[v.value?(ie(),ue("div",J6,[V[6]||(V[6]=B("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rôle",-1)),An(B("select",{id:"role-filter","onUpdate:modelValue":V[0]||(V[0]=M=>p.role=M),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},V[5]||(V[5]=[B("option",{value:""},"Tous les rôles",-1),B("option",{value:"ADMIN"},"Admin",-1),B("option",{value:"CONCESSIONNAIRE"},"Concessionnaire",-1),B("option",{value:"UTILISATEUR"},"Client",-1)]),512),[[js,p.role]])])):nn("",!0),B("div",null,[V[7]||(V[7]=B("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),An(B("input",{type:"text",id:"search","onUpdate:modelValue":V[1]||(V[1]=M=>p.search=M),placeholder:v.value?"Nom, email...":"Rechercher un client...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,8,Y6),[[fr,p.search]])]),v.value?(ie(),ue("div",X6,[V[9]||(V[9]=B("label",{for:"dealer-filter",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),An(B("select",{id:"dealer-filter","onUpdate:modelValue":V[2]||(V[2]=M=>p.dealer=M),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[V[8]||(V[8]=B("option",{value:""},"Tous les concessionnaires",-1)),(ie(!0),ue(_n,null,Vn(b.value,M=>(ie(),ue("option",{key:M.id,value:M.id},Se(M.company_name||`${M.first_name} ${M.last_name}`),9,Q6))),128))],512),[[js,p.dealer]])])):nn("",!0)])]),B("div",tk,[B("div",ek,[B("table",nk,[B("thead",rk,[B("tr",null,[B("th",ik,Se(v.value?"Utilisateur":"Client"),1),v.value?(ie(),ue("th",sk," Rôle ")):nn("",!0),V[10]||(V[10]=B("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),v.value?(ie(),ue("th",ok," Concessionnaire ")):nn("",!0),V[11]||(V[11]=B("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),V[12]||(V[12]=B("th",{scope:"col",class:"relative px-6 py-3"},[B("span",{class:"sr-only"},"Actions")],-1))])]),B("tbody",ak,[(ie(!0),ue(_n,null,Vn(S.value,M=>(ie(),ue("tr",{key:M.id},[B("td",lk,[B("div",uk,[B("div",ck,[B("div",hk,[B("span",fk,Se(Tt(M.first_name,M.last_name)),1)])]),B("div",dk,[B("div",pk,Se(On(Jl)(M)),1),B("div",gk,Se(M.username),1)])])]),B("td",mk,[B("span",{class:zr(vt(M.role))},Se(Ft(M.role)),3)]),B("td",vk,Se(M.email),1),B("td",yk,Se(M.dealer_name||"-"),1),B("td",_k,[B("span",{class:zr(Ct(M.is_active))},Se(M.is_active?"Actif":"Inactif"),3)]),B("td",bk,[B("button",{onClick:$=>j(M),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,wk),Ut(M)?(ie(),ue("button",{key:0,onClick:$=>Q(M),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,xk)):nn("",!0)])]))),128))])])])])]),o.value?(ie(),Ja(rv,{key:0,user:u.value,dealers:r.value,"is-admin":v.value,"current-dealer":(Et=(St=On(e).user)==null?void 0:St.id)==null?void 0:Et.toString(),onClose:z,onSave:W},null,8,["user","dealers","is-admin","current-dealer"])):nn("",!0),a.value?(ie(),Ja(iv,{key:1,title:"Supprimer l'utilisateur",message:"Êtes-vous sûr de vouloir supprimer cet utilisateur ? Cette action est irréversible.",onConfirm:mt,onCancel:V[3]||(V[3]=M=>a.value=!1)})):nn("",!0)])}}}),Ck={class:"h-full bg-gray-50"},kk={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Pk={class:"sm:flex sm:items-center"},Sk={class:"sm:flex-auto"},Ek={class:"text-2xl font-semibold text-gray-900"},Ak={class:"mt-2 text-sm text-gray-700"},Mk={key:0,class:"mt-8"},Bk={class:"mb-6"},Tk=["value"],Nk={key:0,class:"mb-6"},Dk=["value"],Ok={key:1,class:"mt-8"},Rk={class:"mb-6"},Ik=["value"],Fk={class:"mt-8"},jk={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 rounded-lg"},zk={class:"overflow-x-auto"},Uk={class:"min-w-full divide-y divide-gray-300"},qk={class:"bg-gray-50"},$k={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"},Vk={class:"ml-2 flex-none rounded"},Hk={key:0,scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},Gk={key:1,scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},Wk={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},Zk={class:"ml-2 flex-none rounded"},Kk={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},Jk={class:"ml-2 flex-none rounded"},Yk={class:"divide-y divide-gray-200 bg-white"},Xk={key:0},Qk={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},tP={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},eP={key:0,class:"px-3 py-4 text-sm text-gray-900"},nP={key:0,class:"flex items-center"},rP={class:"h-8 w-8 flex-shrink-0"},iP={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},sP={class:"text-primary-700 font-medium text-sm"},oP={class:"ml-3"},aP={class:"font-medium"},lP={key:1,class:"text-gray-500"},uP={key:1,class:"px-3 py-4 text-sm text-gray-900"},cP={key:0,class:"flex items-center"},hP={class:"h-8 w-8 flex-shrink-0"},fP={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},dP={class:"text-primary-700 font-medium text-sm"},pP={class:"ml-3"},gP={class:"font-medium"},mP={key:1,class:"text-gray-500"},vP={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},yP={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},_P={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},bP=["onClick"],wP=["onClick"],xP=["onClick"],LP={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},CP={class:"bg-white rounded-lg p-6 max-w-md w-full"},kP={class:"flex justify-between items-center mb-4"},PP={key:0,class:"space-y-4"},SP=["value"],EP=["value"],AP={key:1,class:"mt-4 bg-red-50 p-4 rounded-md"},MP={class:"flex"},BP={class:"ml-3"},TP={class:"text-sm font-medium text-red-800"},NP={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},DP=["disabled"],OP={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},RP=ys({__name:"PlansView",setup(t){const e=Rc(),n=Qd(),r=vs(),o=Ie([]),a=Ie([]),u=Ie([]),f=Ie(!1),p=Ie(!1),v=Ie({nom:"",description:"",client:null}),w=Ie({id:0,nom:"",description:"",concessionnaire:null,client:null}),b=Ie(!1),S=Ie(null),x=Ie(null),I=Ie(null),D=Ie("date_modification"),j=Ie("desc"),z=Fn(()=>x.value?u.value.filter(q=>q.concessionnaire===x.value):u.value),W=Fn(()=>{let q=o.value;return r.isAdmin?x.value&&(q=q.filter(O=>O.concessionnaire===x.value),I.value&&(q=q.filter(O=>O.client===I.value))):r.isDealer&&(q=q.filter(O=>{var dt;return O.concessionnaire===((dt=r.user)==null?void 0:dt.id)}),I.value&&(q=q.filter(O=>O.client===I.value))),[...q].sort((O,dt)=>{if(D.value==="nom")return j.value==="asc"?O.nom.localeCompare(dt.nom):dt.nom.localeCompare(O.nom);{const gt=new Date(O[D.value]).getTime(),Y=new Date(dt[D.value]).getTime();return j.value==="asc"?gt-Y:Y-gt}})}),Q=Fn(()=>r.isAdmin?{title:"Tous les plans",description:"Liste complète des plans",plans:o.value}:r.isDealer?{title:"Plans des clients",description:"Plans où vous êtes assigné comme concessionnaire",plans:o.value.filter(q=>{var O;return q.concessionnaire===((O=r.user)==null?void 0:O.id)})}:{title:"Mes plans",description:"Plans qui vous sont assignés ou que vous avez créés",plans:o.value.filter(q=>{var O,dt;return q.client===((O=r.user)==null?void 0:O.id)||q.createur.id===((dt=r.user)==null?void 0:dt.id)})});Ca(async()=>{var q;await mt(),r.isAdmin?await Tt():r.isDealer&&await V(((q=r.user)==null?void 0:q.id)||0)});async function mt(){try{const q=await n.fetchPlansWithDetails();o.value=q.data}catch(q){console.error("Erreur lors du chargement des plans:",q)}}async function Tt(){try{const[q,O]=await Promise.all([Cn.get("/users/",{params:{role:"CONCESSIONNAIRE"}}),Cn.get("/users/",{params:{role:"UTILISATEUR"}})]);a.value=q.data,u.value=O.data}catch(q){console.error("Erreur lors du chargement des dealers et clients:",q)}}function Nt(){f.value=!0,v.value={nom:"",description:"",client:null}}async function Ft(q){try{n.setCurrentPlan(q),localStorage.setItem("lastPlanId",q.id.toString()),e.push("/")}catch(O){console.error("Erreur lors du chargement du plan:",O),alert("Une erreur est survenue lors du chargement du plan")}}async function vt(q){var O;if(q!=null&&q.id&&confirm("Êtes-vous sûr de vouloir supprimer ce plan ?"))try{await n.deletePlan(q.id),await mt(),((O=n.currentPlan)==null?void 0:O.id)===q.id&&n.clearCurrentPlan()}catch(dt){console.error("Erreur lors de la suppression du plan:",dt),alert("Une erreur est survenue lors de la suppression du plan")}}function Ct(q){return new Date(q).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function Ut(q){return q?(q.first_name.charAt(0)+q.last_name.charAt(0)).toUpperCase():""}function Z(q){w.value={id:q.id,nom:q.nom,description:q.description,concessionnaire:q.concessionnaire||null,client:q.client||null},q.concessionnaire&&V(q.concessionnaire),p.value=!0}async function V(q){try{const O=await Cn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:q}});u.value=O.data}catch(O){console.error("Erreur lors du chargement des clients:",O),u.value=[]}}async function St(){var q,O,dt,gt,Y;S.value=null,b.value=!0;try{if(!w.value.nom.trim())throw new Error("Le nom du plan est requis");if(w.value.client&&!w.value.concessionnaire)throw new Error("Un concessionnaire doit être sélectionné pour assigner un client");await n.updatePlanDetails(w.value.id,{nom:w.value.nom.trim(),description:w.value.description.trim(),concessionnaire:w.value.concessionnaire,client:w.value.client})&&(p.value=!1,await mt())}catch(A){if(console.error("Erreur lors de la mise à jour du plan:",A),(O=(q=A.response)==null?void 0:q.data)!=null&&O.detail)S.value=A.response.data.detail;else if((gt=(dt=A.response)==null?void 0:dt.data)!=null&&gt.non_field_errors)S.value=A.response.data.non_field_errors[0];else if((Y=A.response)!=null&&Y.data){const U=Object.entries(A.response.data).map(([et,lt])=>`${et}: ${Array.isArray(lt)?lt[0]:lt}`);S.value=U.join(`
`)}else S.value=A.message||"Une erreur est survenue lors de la mise à jour du plan"}finally{b.value=!1}}zi(()=>w.value.concessionnaire,async q=>{q?await V(q):(u.value=[],w.value.client=null)});function Et(q){const O=r.user;return O?O.user_type==="admin"?!0:O.user_type==="dealer"?q.concessionnaire===O.id:q.client===O.id||q.createur.id===O.id:!1}async function M(q){await mt(),localStorage.setItem("lastPlanId",q.toString()),console.log(`Plan ${q} créé et défini comme plan actif`),e.push("/")}function $(q){D.value===q?j.value=j.value==="asc"?"desc":"asc":(D.value=q,j.value="desc")}return(q,O)=>(ie(),ue("div",Ck,[B("div",kk,[B("div",Pk,[B("div",Sk,[B("h1",Ek,Se(Q.value.title),1),B("p",Ak,Se(Q.value.description),1)]),B("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[B("button",{onClick:Nt,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),On(r).isAdmin?(ie(),ue("div",Mk,[B("div",Bk,[O[14]||(O[14]=B("label",{for:"dealer-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par concessionnaire",-1)),An(B("select",{id:"dealer-filter","onUpdate:modelValue":O[0]||(O[0]=dt=>x.value=dt),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[O[13]||(O[13]=B("option",{value:null},"Tous les concessionnaires",-1)),(ie(!0),ue(_n,null,Vn(a.value,dt=>(ie(),ue("option",{key:dt.id,value:dt.id},Se(dt.first_name)+" "+Se(dt.last_name)+" ("+Se(dt.company_name)+") ",9,Tk))),128))],512),[[js,x.value]])]),x.value?(ie(),ue("div",Nk,[O[16]||(O[16]=B("label",{for:"client-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par client",-1)),An(B("select",{id:"client-filter","onUpdate:modelValue":O[1]||(O[1]=dt=>I.value=dt),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[O[15]||(O[15]=B("option",{value:null},"Tous les clients",-1)),(ie(!0),ue(_n,null,Vn(z.value,dt=>(ie(),ue("option",{key:dt.id,value:dt.id},Se(dt.first_name)+" "+Se(dt.last_name)+" ("+Se(dt.company_name)+") ",9,Dk))),128))],512),[[js,I.value]])])):nn("",!0)])):On(r).isDealer?(ie(),ue("div",Ok,[B("div",Rk,[O[18]||(O[18]=B("label",{for:"client-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par client",-1)),An(B("select",{id:"client-filter","onUpdate:modelValue":O[2]||(O[2]=dt=>I.value=dt),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[O[17]||(O[17]=B("option",{value:null},"Tous les clients",-1)),(ie(!0),ue(_n,null,Vn(u.value,dt=>(ie(),ue("option",{key:dt.id,value:dt.id},Se(dt.first_name)+" "+Se(dt.last_name)+" ("+Se(dt.company_name)+") ",9,Ik))),128))],512),[[js,I.value]])])])):nn("",!0),B("div",Fk,[B("div",jk,[B("div",zk,[B("table",Uk,[B("thead",qk,[B("tr",null,[B("th",$k,[B("button",{onClick:O[3]||(O[3]=dt=>$("nom")),class:"group inline-flex items-center"},[O[20]||(O[20]=Ur(" Nom ")),B("span",Vk,[(ie(),ue("svg",{class:zr(["h-5 w-5",{"text-gray-900":D.value==="nom","text-gray-400":D.value!=="nom","rotate-180":D.value==="nom"&&j.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},O[19]||(O[19]=[B("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),O[25]||(O[25]=B("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),On(r).isDealer?nn("",!0):(ie(),ue("th",Hk," Concessionnaire ")),On(r).isClient?nn("",!0):(ie(),ue("th",Gk," Client ")),B("th",Wk,[B("button",{onClick:O[4]||(O[4]=dt=>$("date_creation")),class:"group inline-flex items-center"},[O[22]||(O[22]=Ur(" Créé le ")),B("span",Zk,[(ie(),ue("svg",{class:zr(["h-5 w-5",{"text-gray-900":D.value==="date_creation","text-gray-400":D.value!=="date_creation","rotate-180":D.value==="date_creation"&&j.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},O[21]||(O[21]=[B("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),B("th",Kk,[B("button",{onClick:O[5]||(O[5]=dt=>$("date_modification")),class:"group inline-flex items-center"},[O[24]||(O[24]=Ur(" Modifié le ")),B("span",Jk,[(ie(),ue("svg",{class:zr(["h-5 w-5",{"text-gray-900":D.value==="date_modification","text-gray-400":D.value!=="date_modification","rotate-180":D.value==="date_modification"&&j.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},O[23]||(O[23]=[B("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),O[26]||(O[26]=B("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[B("span",{class:"sr-only"},"Actions")],-1))])]),B("tbody",Yk,[W.value.length===0?(ie(),ue("tr",Xk,O[27]||(O[27]=[B("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun plan disponible ",-1)]))):nn("",!0),(ie(!0),ue(_n,null,Vn(W.value,dt=>(ie(),ue("tr",{key:dt.id,class:"hover:bg-gray-50"},[B("td",Qk,Se(dt.nom),1),B("td",tP,Se(dt.description||"-"),1),On(r).isDealer?nn("",!0):(ie(),ue("td",eP,[dt.concessionnaire_details?(ie(),ue("div",nP,[B("div",rP,[B("div",iP,[B("span",sP,Se(Ut(dt.concessionnaire_details)),1)])]),B("div",oP,[B("div",aP,Se(On(Jl)(dt.concessionnaire_details)),1)])])):(ie(),ue("div",lP,"-"))])),On(r).isClient?nn("",!0):(ie(),ue("td",uP,[dt.client_details?(ie(),ue("div",cP,[B("div",hP,[B("div",fP,[B("span",dP,Se(Ut(dt.client_details)),1)])]),B("div",pP,[B("div",gP,Se(On(Jl)(dt.client_details)),1)])])):(ie(),ue("div",mP,"-"))])),B("td",vP,Se(Ct(dt.date_creation)),1),B("td",yP,Se(Ct(dt.date_modification)),1),B("td",_P,[B("button",{onClick:gt=>Ft(dt),class:"text-primary-600 hover:text-primary-900 mr-4"}," Ouvrir ",8,bP),B("button",{onClick:gt=>Z(dt),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,wP),Et(dt)?(ie(),ue("button",{key:0,onClick:gt=>vt(dt),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,xP)):nn("",!0)])]))),128))])])])])]),Sr(O1,{modelValue:f.value,"onUpdate:modelValue":O[6]||(O[6]=dt=>f.value=dt),dealers:a.value,clients:u.value,onCreated:M},null,8,["modelValue","dealers","clients"]),p.value?(ie(),ue("div",LP,[B("div",CP,[B("div",kP,[O[29]||(O[29]=B("h2",{class:"text-xl font-semibold text-gray-900"},"Modifier le plan",-1)),B("button",{onClick:O[7]||(O[7]=dt=>p.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},O[28]||(O[28]=[B("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),B("form",{onSubmit:Wh(St,["prevent"]),class:"space-y-4"},[B("div",null,[O[30]||(O[30]=B("label",{for:"edit-nom",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),An(B("input",{type:"text",id:"edit-nom","onUpdate:modelValue":O[8]||(O[8]=dt=>w.value.nom=dt),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",required:""},null,512),[[fr,w.value.nom]])]),B("div",null,[O[31]||(O[31]=B("label",{for:"edit-description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),An(B("textarea",{id:"edit-description","onUpdate:modelValue":O[9]||(O[9]=dt=>w.value.description=dt),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[fr,w.value.description]])]),On(r).isAdmin?(ie(),ue("div",PP,[B("div",null,[O[33]||(O[33]=B("label",{for:"edit-concessionnaire",class:"block text-sm font-medium text-gray-700"}," Concessionnaire ",-1)),An(B("select",{id:"edit-concessionnaire","onUpdate:modelValue":O[10]||(O[10]=dt=>w.value.concessionnaire=dt),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[O[32]||(O[32]=B("option",{value:null},"Aucun",-1)),(ie(!0),ue(_n,null,Vn(a.value,dt=>(ie(),ue("option",{key:dt.id,value:dt.id},Se(On(Jl)(dt)),9,SP))),128))],512),[[js,w.value.concessionnaire]])]),B("div",null,[O[35]||(O[35]=B("label",{for:"edit-client",class:"block text-sm font-medium text-gray-700"}," Client ",-1)),An(B("select",{id:"edit-client","onUpdate:modelValue":O[11]||(O[11]=dt=>w.value.client=dt),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[O[34]||(O[34]=B("option",{value:null},"Aucun",-1)),(ie(!0),ue(_n,null,Vn(z.value,dt=>(ie(),ue("option",{key:dt.id,value:dt.id},Se(On(Jl)(dt)),9,EP))),128))],512),[[js,w.value.client]])])])):nn("",!0),S.value?(ie(),ue("div",AP,[B("div",MP,[O[36]||(O[36]=B("div",{class:"flex-shrink-0"},[B("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),B("div",BP,[B("p",TP,Se(S.value),1)])])])):nn("",!0),B("div",NP,[B("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:O[12]||(O[12]=dt=>p.value=!1)}," Annuler "),B("button",{type:"submit",disabled:b.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm disabled:opacity-50"},[b.value?(ie(),ue("svg",OP,O[37]||(O[37]=[B("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),B("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):nn("",!0),Ur(" "+Se(b.value?"Enregistrement...":"Enregistrer"),1)],8,DP)])],32)])])):nn("",!0)])]))}}),IP={class:"h-full bg-gray-50"},FP={class:"container mx-auto px-4 py-8"},jP={class:"sm:flex sm:items-center"},zP={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},UP={class:"mt-8"},qP={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 rounded-lg"},$P={class:"overflow-x-auto"},VP={class:"min-w-full divide-y divide-gray-300"},HP={class:"divide-y divide-gray-200 bg-white"},GP={key:0,class:"animate-pulse"},WP={key:1},ZP={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-6"},KP={class:"flex items-center"},JP={class:"h-10 w-10 flex-shrink-0"},YP={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},XP={class:"text-primary-600 font-medium"},QP={class:"ml-4"},tS={class:"font-medium text-gray-900"},eS={class:"text-gray-500"},nS={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},rS={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},iS={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},sS={class:"flex items-center"},oS={class:"font-medium"},aS={class:"text-gray-400 ml-1"},lS={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},uS=["onClick"],cS=["onClick"],hS=ys({__name:"ClientListView",setup(t){Rc();const e=vs(),n=Ie([]),r=Ie(!0),o=Ie(!1),a=Ie(!1),u=Ie(null),f=Ie(null);Ca(async()=>{await p()});async function p(){var D;try{const j=await Cn.get("/users/",{params:{dealer:(D=e.user)==null?void 0:D.id,role:"UTILISATEUR",include_plans:!0}});n.value=j.data}catch(j){console.error("Error fetching clients:",j)}finally{r.value=!1}}function v(D,j){return`${(D==null?void 0:D.charAt(0))||""}${(j==null?void 0:j.charAt(0))||""}`.toUpperCase()}function w(D){u.value=D,o.value=!0}function b(){o.value=!1,u.value=null}async function S(D){var j;try{const z=!!D.id,W=z?`/users/${D.id}/`:"/users/",Q=z?"patch":"post";D.role="UTILISATEUR",D.concessionnaire=(j=e.user)==null?void 0:j.id,await Cn[Q](W,D),await p(),b()}catch(z){throw console.error("Erreur lors de la sauvegarde du client:",z),z}}function x(D){f.value=D,a.value=!0}async function I(){if(f.value)try{await Cn.delete(`/users/${f.value.id}/`),await p(),a.value=!1,f.value=null}catch(D){throw console.error("Erreur lors de la suppression du client:",D),D}}return(D,j)=>{var z,W;return ie(),ue("div",IP,[B("div",FP,[B("div",jP,[j[3]||(j[3]=B("div",{class:"sm:flex-auto"},[B("h1",{class:"text-2xl font-semibold text-gray-900"},"Clients"),B("p",{class:"mt-2 text-sm text-gray-700"}," Liste de vos clients et leurs plans associés ")],-1)),B("div",zP,[B("button",{onClick:j[0]||(j[0]=Q=>o.value=!0),class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"},j[2]||(j[2]=[B("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1),Ur(" Ajouter un client ")]))])]),B("div",UP,[B("div",qP,[B("div",$P,[B("table",VP,[j[6]||(j[6]=B("thead",{class:"bg-gray-50"},[B("tr",null,[B("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," Client "),B("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Email "),B("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise "),B("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Nombre de plans "),B("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[B("span",{class:"sr-only"},"Actions")])])],-1)),B("tbody",HP,[r.value?(ie(),ue("tr",GP,j[4]||(j[4]=[B("td",{colspan:"5",class:"py-4 px-6"},[B("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):n.value.length===0?(ie(),ue("tr",WP,j[5]||(j[5]=[B("td",{colspan:"5",class:"py-4 px-6 text-center text-gray-500"}," Aucun client trouvé ",-1)]))):nn("",!0),(ie(!0),ue(_n,null,Vn(n.value,Q=>(ie(),ue("tr",{key:Q.id,class:"hover:bg-gray-50"},[B("td",ZP,[B("div",KP,[B("div",JP,[B("div",YP,[B("span",XP,Se(v(Q.first_name,Q.last_name)),1)])]),B("div",QP,[B("div",tS,Se(On(Jl)(Q)),1),B("div",eS,Se(Q.username),1)])])]),B("td",nS,Se(Q.email),1),B("td",rS,Se(Q.company_name||"-"),1),B("td",iS,[B("div",sS,[B("span",oS,Se(Q.plans_count||0),1),B("span",aS,"plan"+Se((Q.plans_count||0)>1?"s":""),1)])]),B("td",lS,[B("button",{onClick:mt=>w(Q),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,uS),B("button",{onClick:mt=>x(Q),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,cS)])]))),128))])])])])]),o.value?(ie(),Ja(rv,{key:0,user:u.value||{},dealers:[{...On(e).user,role:"CONCESSIONNAIRE"}],"is-admin":!1,"current-dealer":(W=(z=On(e).user)==null?void 0:z.id)==null?void 0:W.toString(),onClose:b,onSave:S},null,8,["user","dealers","current-dealer"])):nn("",!0),a.value?(ie(),Ja(iv,{key:1,title:"Supprimer le client",message:"Êtes-vous sûr de vouloir supprimer ce client ? Cette action est irréversible.",onConfirm:I,onCancel:j[1]||(j[1]=Q=>a.value=!1)})):nn("",!0)])])}}}),sv=B5({history:l5("/"),routes:[{path:"/",name:"home",component:yg,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/plans",name:"plans",component:RP,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/users",name:"users",component:Lk,meta:{requiresAuth:!0,allowedRoles:["admin"]}},{path:"/clients",name:"clients",component:hS,meta:{requiresAuth:!0,allowedRoles:["dealer"]}},{path:"/profile",name:"profile",component:()=>Yl(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/login",name:"login",component:J3,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>Yl(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>Yl(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:B3,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/map",name:"map",component:yg,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>Yl(()=>import("./NotFoundView.js"),[])}]});sv.beforeEach(async(t,e,n)=>{var f,p;const r=vs();if(console.log("Route:",t.path,"Auth state:",{initialized:r.initialized,isAuthenticated:r.isAuthenticated,user:r.user}),!r.initialized)try{await r.initialize(window.INITIAL_STATE)}catch(v){console.error("Error initializing auth store:",v)}const o=r.isAuthenticated,a=(f=r.user)==null?void 0:f.must_change_password,u=(p=r.user)==null?void 0:p.user_type;if(t.meta.requiresAuth&&!o){n("/login");return}if(o&&a&&t.name!=="changePassword"){n({name:"changePassword"});return}if(t.name==="changePassword"&&!a){n({name:"home"});return}if(t.meta.allowedRoles&&u&&!t.meta.allowedRoles.includes(u)){n({name:"home"});return}if(t.meta.requiresGuest&&o){n({name:"home"});return}n()});const rp=G_(u3),ov=K_();rp.use(ov);rp.use(sv);const fS=vs(ov);window.INITIAL_STATE&&fS.initialize(window.INITIAL_STATE);rp.mount("#app");export{ur as _,Ya as a,B as b,ue as c,ys as d,nn as e,An as f,ie as g,fc as h,Ur as i,Sr as j,Za as k,xy as l,TS as m,zr as n,Ca as o,Rc as p,Co as q,Ie as r,x1 as s,Se as t,vs as u,fr as v,Wh as w};
