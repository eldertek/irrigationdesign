var E1=Object.defineProperty;var M1=(t,e,n)=>e in t?E1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Xe=(t,e,n)=>M1(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function rd(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const li={},cu=[],ua=()=>{},A1=()=>!1,uh=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),sd=t=>t.startsWith("onUpdate:"),Yr=Object.assign,od=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},B1=Object.prototype.hasOwnProperty,ri=(t,e)=>B1.call(t,e),pn=Array.isArray,hu=t=>oc(t)==="[object Map]",wu=t=>oc(t)==="[object Set]",$d=t=>oc(t)==="[object Date]",Pn=t=>typeof t=="function",Ji=t=>typeof t=="string",ha=t=>typeof t=="symbol",pi=t=>t!==null&&typeof t=="object",U0=t=>(pi(t)||Pn(t))&&Pn(t.then)&&Pn(t.catch),q0=Object.prototype.toString,oc=t=>q0.call(t),T1=t=>oc(t).slice(8,-1),$0=t=>oc(t)==="[object Object]",ad=t=>Ji(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Uu=rd(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ch=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},N1=/-(\w)/g,mo=ch(t=>t.replace(N1,(e,n)=>n?n.toUpperCase():"")),D1=/\B([A-Z])/g,Gl=ch(t=>t.replace(D1,"-$1").toLowerCase()),hh=ch(t=>t.charAt(0).toUpperCase()+t.slice(1)),Gh=ch(t=>t?`on${hh(t)}`:""),cl=(t,e)=>!Object.is(t,e),Nc=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},G0=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Hc=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Gd;const fh=()=>Gd||(Gd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function dh(t){if(pn(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],o=Ji(r)?F1(r):dh(r);if(o)for(const l in o)e[l]=o[l]}return e}else if(Ji(t)||pi(t))return t}const O1=/;(?![^(]*\))/g,I1=/:([^]+)/,R1=/\/\*[^]*?\*\//g;function F1(t){const e={};return t.replace(R1,"").split(O1).forEach(n=>{if(n){const r=n.split(I1);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Kr(t){let e="";if(Ji(t))e=t;else if(pn(t))for(let n=0;n<t.length;n++){const r=Kr(t[n]);r&&(e+=r+" ")}else if(pi(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const j1="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",z1=rd(j1);function V0(t){return!!t||t===""}function U1(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=zl(t[r],e[r]);return n}function zl(t,e){if(t===e)return!0;let n=$d(t),r=$d(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=ha(t),r=ha(e),n||r)return t===e;if(n=pn(t),r=pn(e),n||r)return n&&r?U1(t,e):!1;if(n=pi(t),r=pi(e),n||r){if(!n||!r)return!1;const o=Object.keys(t).length,l=Object.keys(e).length;if(o!==l)return!1;for(const c in t){const d=t.hasOwnProperty(c),m=e.hasOwnProperty(c);if(d&&!m||!d&&m||!zl(t[c],e[c]))return!1}}return String(t)===String(e)}function ld(t,e){return t.findIndex(n=>zl(n,e))}const H0=t=>!!(t&&t.__v_isRef===!0),Ce=t=>Ji(t)?t:t==null?"":pn(t)||pi(t)&&(t.toString===q0||!Pn(t.toString))?H0(t)?Ce(t.value):JSON.stringify(t,W0,2):String(t),W0=(t,e)=>H0(e)?W0(t,e.value):hu(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,o],l)=>(n[Vh(r,l)+" =>"]=o,n),{})}:wu(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Vh(n))}:ha(e)?Vh(e):pi(e)&&!pn(e)&&!$0(e)?String(e):e,Vh=(t,e="")=>{var n;return ha(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let as;class Z0{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=as,!e&&as&&(this.index=(as.scopes||(as.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=as;try{return as=this,e()}finally{as=n}}}on(){as=this}off(){as=this.parent}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function K0(t){return new Z0(t)}function Y0(){return as}function q1(t,e=!1){as&&as.cleanups.push(t)}let di;const Hh=new WeakSet;class J0{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,as&&as.active&&as.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Hh.has(this)&&(Hh.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Q0(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Vd(this),tm(this);const e=di,n=Io;di=this,Io=!0;try{return this.fn()}finally{em(this),di=e,Io=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)hd(e);this.deps=this.depsTail=void 0,Vd(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Hh.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){wf(this)&&this.run()}get dirty(){return wf(this)}}let X0=0,qu,$u;function Q0(t,e=!1){if(t.flags|=8,e){t.next=$u,$u=t;return}t.next=qu,qu=t}function ud(){X0++}function cd(){if(--X0>0)return;if($u){let e=$u;for($u=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;qu;){let e=qu;for(qu=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function tm(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function em(t){let e,n=t.depsTail,r=n;for(;r;){const o=r.prevDep;r.version===-1?(r===n&&(n=o),hd(r),$1(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=o}t.deps=e,t.depsTail=n}function wf(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(nm(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function nm(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ju))return;t.globalVersion=Ju;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!wf(t)){t.flags&=-3;return}const n=di,r=Io;di=t,Io=!0;try{tm(t);const o=t.fn(t._value);(e.version===0||cl(o,t._value))&&(t._value=o,e.version++)}catch(o){throw e.version++,o}finally{di=n,Io=r,em(t),t.flags&=-3}}function hd(t,e=!1){const{dep:n,prevSub:r,nextSub:o}=t;if(r&&(r.nextSub=o,t.prevSub=void 0),o&&(o.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let l=n.computed.deps;l;l=l.nextDep)hd(l,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function $1(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Io=!0;const im=[];function ml(){im.push(Io),Io=!1}function gl(){const t=im.pop();Io=t===void 0?!0:t}function Vd(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=di;di=void 0;try{e()}finally{di=n}}}let Ju=0;class G1{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class fd{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!di||!Io||di===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==di)n=this.activeLink=new G1(di,this),di.deps?(n.prevDep=di.depsTail,di.depsTail.nextDep=n,di.depsTail=n):di.deps=di.depsTail=n,rm(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=di.depsTail,n.nextDep=void 0,di.depsTail.nextDep=n,di.depsTail=n,di.deps===n&&(di.deps=r)}return n}trigger(e){this.version++,Ju++,this.notify(e)}notify(e){ud();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{cd()}}}function rm(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)rm(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Wc=new WeakMap,Il=Symbol(""),xf=Symbol(""),Xu=Symbol("");function Vr(t,e,n){if(Io&&di){let r=Wc.get(t);r||Wc.set(t,r=new Map);let o=r.get(n);o||(r.set(n,o=new fd),o.map=r,o.key=n),o.track()}}function Na(t,e,n,r,o,l){const c=Wc.get(t);if(!c){Ju++;return}const d=m=>{m&&m.trigger()};if(ud(),e==="clear")c.forEach(d);else{const m=pn(t),y=m&&ad(n);if(m&&n==="length"){const b=Number(r);c.forEach((w,E)=>{(E==="length"||E===Xu||!ha(E)&&E>=b)&&d(w)})}else switch((n!==void 0||c.has(void 0))&&d(c.get(n)),y&&d(c.get(Xu)),e){case"add":m?y&&d(c.get("length")):(d(c.get(Il)),hu(t)&&d(c.get(xf)));break;case"delete":m||(d(c.get(Il)),hu(t)&&d(c.get(xf)));break;case"set":hu(t)&&d(c.get(Il));break}}cd()}function V1(t,e){const n=Wc.get(t);return n&&n.get(e)}function tu(t){const e=Yn(t);return e===t?e:(Vr(e,"iterate",Xu),ho(t)?e:e.map(Hr))}function ph(t){return Vr(t=Yn(t),"iterate",Xu),t}const H1={__proto__:null,[Symbol.iterator](){return Wh(this,Symbol.iterator,Hr)},concat(...t){return tu(this).concat(...t.map(e=>pn(e)?tu(e):e))},entries(){return Wh(this,"entries",t=>(t[1]=Hr(t[1]),t))},every(t,e){return Ma(this,"every",t,e,void 0,arguments)},filter(t,e){return Ma(this,"filter",t,e,n=>n.map(Hr),arguments)},find(t,e){return Ma(this,"find",t,e,Hr,arguments)},findIndex(t,e){return Ma(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Ma(this,"findLast",t,e,Hr,arguments)},findLastIndex(t,e){return Ma(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Ma(this,"forEach",t,e,void 0,arguments)},includes(...t){return Zh(this,"includes",t)},indexOf(...t){return Zh(this,"indexOf",t)},join(t){return tu(this).join(t)},lastIndexOf(...t){return Zh(this,"lastIndexOf",t)},map(t,e){return Ma(this,"map",t,e,void 0,arguments)},pop(){return Au(this,"pop")},push(...t){return Au(this,"push",t)},reduce(t,...e){return Hd(this,"reduce",t,e)},reduceRight(t,...e){return Hd(this,"reduceRight",t,e)},shift(){return Au(this,"shift")},some(t,e){return Ma(this,"some",t,e,void 0,arguments)},splice(...t){return Au(this,"splice",t)},toReversed(){return tu(this).toReversed()},toSorted(t){return tu(this).toSorted(t)},toSpliced(...t){return tu(this).toSpliced(...t)},unshift(...t){return Au(this,"unshift",t)},values(){return Wh(this,"values",Hr)}};function Wh(t,e,n){const r=ph(t),o=r[e]();return r!==t&&!ho(t)&&(o._next=o.next,o.next=()=>{const l=o._next();return l.value&&(l.value=n(l.value)),l}),o}const W1=Array.prototype;function Ma(t,e,n,r,o,l){const c=ph(t),d=c!==t&&!ho(t),m=c[e];if(m!==W1[e]){const w=m.apply(t,l);return d?Hr(w):w}let y=n;c!==t&&(d?y=function(w,E){return n.call(this,Hr(w),E,t)}:n.length>2&&(y=function(w,E){return n.call(this,w,E,t)}));const b=m.call(c,y,r);return d&&o?o(b):b}function Hd(t,e,n,r){const o=ph(t);let l=n;return o!==t&&(ho(t)?n.length>3&&(l=function(c,d,m){return n.call(this,c,d,m,t)}):l=function(c,d,m){return n.call(this,c,Hr(d),m,t)}),o[e](l,...r)}function Zh(t,e,n){const r=Yn(t);Vr(r,"iterate",Xu);const o=r[e](...n);return(o===-1||o===!1)&&md(n[0])?(n[0]=Yn(n[0]),r[e](...n)):o}function Au(t,e,n=[]){ml(),ud();const r=Yn(t)[e].apply(t,n);return cd(),gl(),r}const Z1=rd("__proto__,__v_isRef,__isVue"),sm=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ha));function K1(t){ha(t)||(t=String(t));const e=Yn(this);return Vr(e,"has",t),e.hasOwnProperty(t)}class om{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const o=this._isReadonly,l=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return l;if(n==="__v_raw")return r===(o?l?s_:cm:l?um:lm).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const c=pn(e);if(!o){let m;if(c&&(m=H1[n]))return m;if(n==="hasOwnProperty")return K1}const d=Reflect.get(e,n,qi(e)?e:r);return(ha(n)?sm.has(n):Z1(n))||(o||Vr(e,"get",n),l)?d:qi(d)?c&&ad(n)?d:d.value:pi(d)?o?fm(d):Fa(d):d}}class am extends om{constructor(e=!1){super(!1,e)}set(e,n,r,o){let l=e[n];if(!this._isShallow){const m=Ul(l);if(!ho(r)&&!Ul(r)&&(l=Yn(l),r=Yn(r)),!pn(e)&&qi(l)&&!qi(r))return m?!1:(l.value=r,!0)}const c=pn(e)&&ad(n)?Number(n)<e.length:ri(e,n),d=Reflect.set(e,n,r,qi(e)?e:o);return e===Yn(o)&&(c?cl(r,l)&&Na(e,"set",n,r):Na(e,"add",n,r)),d}deleteProperty(e,n){const r=ri(e,n);e[n];const o=Reflect.deleteProperty(e,n);return o&&r&&Na(e,"delete",n,void 0),o}has(e,n){const r=Reflect.has(e,n);return(!ha(n)||!sm.has(n))&&Vr(e,"has",n),r}ownKeys(e){return Vr(e,"iterate",pn(e)?"length":Il),Reflect.ownKeys(e)}}class Y1 extends om{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const J1=new am,X1=new Y1,Q1=new am(!0);const Lf=t=>t,Lc=t=>Reflect.getPrototypeOf(t);function t_(t,e,n){return function(...r){const o=this.__v_raw,l=Yn(o),c=hu(l),d=t==="entries"||t===Symbol.iterator&&c,m=t==="keys"&&c,y=o[t](...r),b=n?Lf:e?Cf:Hr;return!e&&Vr(l,"iterate",m?xf:Il),{next(){const{value:w,done:E}=y.next();return E?{value:w,done:E}:{value:d?[b(w[0]),b(w[1])]:b(w),done:E}},[Symbol.iterator](){return this}}}}function Cc(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function e_(t,e){const n={get(o){const l=this.__v_raw,c=Yn(l),d=Yn(o);t||(cl(o,d)&&Vr(c,"get",o),Vr(c,"get",d));const{has:m}=Lc(c),y=e?Lf:t?Cf:Hr;if(m.call(c,o))return y(l.get(o));if(m.call(c,d))return y(l.get(d));l!==c&&l.get(o)},get size(){const o=this.__v_raw;return!t&&Vr(Yn(o),"iterate",Il),Reflect.get(o,"size",o)},has(o){const l=this.__v_raw,c=Yn(l),d=Yn(o);return t||(cl(o,d)&&Vr(c,"has",o),Vr(c,"has",d)),o===d?l.has(o):l.has(o)||l.has(d)},forEach(o,l){const c=this,d=c.__v_raw,m=Yn(d),y=e?Lf:t?Cf:Hr;return!t&&Vr(m,"iterate",Il),d.forEach((b,w)=>o.call(l,y(b),y(w),c))}};return Yr(n,t?{add:Cc("add"),set:Cc("set"),delete:Cc("delete"),clear:Cc("clear")}:{add(o){!e&&!ho(o)&&!Ul(o)&&(o=Yn(o));const l=Yn(this);return Lc(l).has.call(l,o)||(l.add(o),Na(l,"add",o,o)),this},set(o,l){!e&&!ho(l)&&!Ul(l)&&(l=Yn(l));const c=Yn(this),{has:d,get:m}=Lc(c);let y=d.call(c,o);y||(o=Yn(o),y=d.call(c,o));const b=m.call(c,o);return c.set(o,l),y?cl(l,b)&&Na(c,"set",o,l):Na(c,"add",o,l),this},delete(o){const l=Yn(this),{has:c,get:d}=Lc(l);let m=c.call(l,o);m||(o=Yn(o),m=c.call(l,o)),d&&d.call(l,o);const y=l.delete(o);return m&&Na(l,"delete",o,void 0),y},clear(){const o=Yn(this),l=o.size!==0,c=o.clear();return l&&Na(o,"clear",void 0,void 0),c}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=t_(o,t,e)}),n}function dd(t,e){const n=e_(t,e);return(r,o,l)=>o==="__v_isReactive"?!t:o==="__v_isReadonly"?t:o==="__v_raw"?r:Reflect.get(ri(n,o)&&o in r?n:r,o,l)}const n_={get:dd(!1,!1)},i_={get:dd(!1,!0)},r_={get:dd(!0,!1)};const lm=new WeakMap,um=new WeakMap,cm=new WeakMap,s_=new WeakMap;function o_(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function a_(t){return t.__v_skip||!Object.isExtensible(t)?0:o_(T1(t))}function Fa(t){return Ul(t)?t:pd(t,!1,J1,n_,lm)}function hm(t){return pd(t,!1,Q1,i_,um)}function fm(t){return pd(t,!0,X1,r_,cm)}function pd(t,e,n,r,o){if(!pi(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const l=o.get(t);if(l)return l;const c=a_(t);if(c===0)return t;const d=new Proxy(t,c===2?r:n);return o.set(t,d),d}function hl(t){return Ul(t)?hl(t.__v_raw):!!(t&&t.__v_isReactive)}function Ul(t){return!!(t&&t.__v_isReadonly)}function ho(t){return!!(t&&t.__v_isShallow)}function md(t){return t?!!t.__v_raw:!1}function Yn(t){const e=t&&t.__v_raw;return e?Yn(e):t}function gd(t){return!ri(t,"__v_skip")&&Object.isExtensible(t)&&G0(t,"__v_skip",!0),t}const Hr=t=>pi(t)?Fa(t):t,Cf=t=>pi(t)?fm(t):t;function qi(t){return t?t.__v_isRef===!0:!1}function Re(t){return dm(t,!1)}function l_(t){return dm(t,!0)}function dm(t,e){return qi(t)?t:new u_(t,e)}class u_{constructor(e,n){this.dep=new fd,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Yn(e),this._value=n?e:Hr(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||ho(e)||Ul(e);e=r?e:Yn(e),cl(e,n)&&(this._rawValue=e,this._value=r?e:Hr(e),this.dep.trigger())}}function kn(t){return qi(t)?t.value:t}const c_={get:(t,e,n)=>e==="__v_raw"?t:kn(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const o=t[e];return qi(o)&&!qi(n)?(o.value=n,!0):Reflect.set(t,e,n,r)}};function pm(t){return hl(t)?t:new Proxy(t,c_)}function h_(t){const e=pn(t)?new Array(t.length):{};for(const n in t)e[n]=d_(t,n);return e}class f_{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return V1(Yn(this._object),this._key)}}function d_(t,e,n){const r=t[e];return qi(r)?r:new f_(t,e,n)}class p_{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new fd(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ju-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&di!==this)return Q0(this,!0),!0}get value(){const e=this.dep.track();return nm(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function m_(t,e,n=!1){let r,o;return Pn(t)?r=t:(r=t.get,o=t.set),new p_(r,o,n)}const kc={},Zc=new WeakMap;let El;function g_(t,e=!1,n=El){if(n){let r=Zc.get(n);r||Zc.set(n,r=[]),r.push(t)}}function __(t,e,n=li){const{immediate:r,deep:o,once:l,scheduler:c,augmentJob:d,call:m}=n,y=Ct=>o?Ct:ho(Ct)||o===!1||o===0?Da(Ct,1):Da(Ct);let b,w,E,C,R=!1,O=!1;if(qi(t)?(w=()=>t.value,R=ho(t)):hl(t)?(w=()=>y(t),R=!0):pn(t)?(O=!0,R=t.some(Ct=>hl(Ct)||ho(Ct)),w=()=>t.map(Ct=>{if(qi(Ct))return Ct.value;if(hl(Ct))return y(Ct);if(Pn(Ct))return m?m(Ct,2):Ct()})):Pn(t)?e?w=m?()=>m(t,2):t:w=()=>{if(E){ml();try{E()}finally{gl()}}const Ct=El;El=b;try{return m?m(t,3,[C]):t(C)}finally{El=Ct}}:w=ua,e&&o){const Ct=w,kt=o===!0?1/0:o;w=()=>Da(Ct(),kt)}const q=Y0(),F=()=>{b.stop(),q&&q.active&&od(q.effects,b)};if(l&&e){const Ct=e;e=(...kt)=>{Ct(...kt),F()}}let V=O?new Array(t.length).fill(kc):kc;const Y=Ct=>{if(!(!(b.flags&1)||!b.dirty&&!Ct))if(e){const kt=b.run();if(o||R||(O?kt.some((wt,et)=>cl(wt,V[et])):cl(kt,V))){E&&E();const wt=El;El=b;try{const et=[kt,V===kc?void 0:O&&V[0]===kc?[]:V,C];m?m(e,3,et):e(...et),V=kt}finally{El=wt}}}else b.run()};return d&&d(Y),b=new J0(w),b.scheduler=c?()=>c(Y,!1):Y,C=Ct=>g_(Ct,!1,b),E=b.onStop=()=>{const Ct=Zc.get(b);if(Ct){if(m)m(Ct,4);else for(const kt of Ct)kt();Zc.delete(b)}},e?r?Y(!0):V=b.run():c?c(Y.bind(null,!0),!0):b.run(),F.pause=b.pause.bind(b),F.resume=b.resume.bind(b),F.stop=F,F}function Da(t,e=1/0,n){if(e<=0||!pi(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,qi(t))Da(t.value,e,n);else if(pn(t))for(let r=0;r<t.length;r++)Da(t[r],e,n);else if(wu(t)||hu(t))t.forEach(r=>{Da(r,e,n)});else if($0(t)){for(const r in t)Da(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Da(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ac(t,e,n,r){try{return r?t(...r):t()}catch(o){mh(o,e,n)}}function fa(t,e,n,r){if(Pn(t)){const o=ac(t,e,n,r);return o&&U0(o)&&o.catch(l=>{mh(l,e,n)}),o}if(pn(t)){const o=[];for(let l=0;l<t.length;l++)o.push(fa(t[l],e,n,r));return o}}function mh(t,e,n,r=!0){const o=e?e.vnode:null,{errorHandler:l,throwUnhandledErrorInProduction:c}=e&&e.appContext.config||li;if(e){let d=e.parent;const m=e.proxy,y=`https://vuejs.org/error-reference/#runtime-${n}`;for(;d;){const b=d.ec;if(b){for(let w=0;w<b.length;w++)if(b[w](t,m,y)===!1)return}d=d.parent}if(l){ml(),ac(l,null,10,[t,m,y]),gl();return}}v_(t,n,o,r,c)}function v_(t,e,n,r=!0,o=!1){if(o)throw t;console.error(t)}const ls=[];let oa=-1;const fu=[];let ol=null,ru=0;const mm=Promise.resolve();let Kc=null;function lc(t){const e=Kc||mm;return t?e.then(this?t.bind(this):t):e}function y_(t){let e=oa+1,n=ls.length;for(;e<n;){const r=e+n>>>1,o=ls[r],l=Qu(o);l<t||l===t&&o.flags&2?e=r+1:n=r}return e}function _d(t){if(!(t.flags&1)){const e=Qu(t),n=ls[ls.length-1];!n||!(t.flags&2)&&e>=Qu(n)?ls.push(t):ls.splice(y_(e),0,t),t.flags|=1,gm()}}function gm(){Kc||(Kc=mm.then(vm))}function b_(t){pn(t)?fu.push(...t):ol&&t.id===-1?ol.splice(ru+1,0,t):t.flags&1||(fu.push(t),t.flags|=1),gm()}function Wd(t,e,n=oa+1){for(;n<ls.length;n++){const r=ls[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;ls.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function _m(t){if(fu.length){const e=[...new Set(fu)].sort((n,r)=>Qu(n)-Qu(r));if(fu.length=0,ol){ol.push(...e);return}for(ol=e,ru=0;ru<ol.length;ru++){const n=ol[ru];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ol=null,ru=0}}const Qu=t=>t.id==null?t.flags&2?-1:1/0:t.id;function vm(t){try{for(oa=0;oa<ls.length;oa++){const e=ls[oa];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ac(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;oa<ls.length;oa++){const e=ls[oa];e&&(e.flags&=-2)}oa=-1,ls.length=0,_m(),Kc=null,(ls.length||fu.length)&&vm()}}let Ps=null,ym=null;function Yc(t){const e=Ps;return Ps=t,ym=t&&t.type.__scopeId||null,e}function Bl(t,e=Ps,n){if(!e||t._n)return t;const r=(...o)=>{r._d&&ip(-1);const l=Yc(e);let c;try{c=t(...o)}finally{Yc(l),r._d&&ip(1)}return c};return r._n=!0,r._c=!0,r._d=!0,r}function jn(t,e){if(Ps===null)return t;const n=bh(Ps),r=t.dirs||(t.dirs=[]);for(let o=0;o<e.length;o++){let[l,c,d,m=li]=e[o];l&&(Pn(l)&&(l={mounted:l,updated:l}),l.deep&&Da(c),r.push({dir:l,instance:n,value:c,oldValue:void 0,arg:d,modifiers:m}))}return t}function Pl(t,e,n,r){const o=t.dirs,l=e&&e.dirs;for(let c=0;c<o.length;c++){const d=o[c];l&&(d.oldValue=l[c].value);let m=d.dir[r];m&&(ml(),fa(m,n,8,[t.el,d,t,e]),gl())}}const w_=Symbol("_vte"),x_=t=>t.__isTeleport;function vd(t,e){t.shapeFlag&6&&t.component?(t.transition=e,vd(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function Es(t,e){return Pn(t)?Yr({name:t.name},e,{setup:t}):t}function bm(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Jc(t,e,n,r,o=!1){if(pn(t)){t.forEach((R,O)=>Jc(R,e&&(pn(e)?e[O]:e),n,r,o));return}if(Gu(r)&&!o){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Jc(t,e,n,r.component.subTree);return}const l=r.shapeFlag&4?bh(r.component):r.el,c=o?null:l,{i:d,r:m}=t,y=e&&e.r,b=d.refs===li?d.refs={}:d.refs,w=d.setupState,E=Yn(w),C=w===li?()=>!1:R=>ri(E,R);if(y!=null&&y!==m&&(Ji(y)?(b[y]=null,C(y)&&(w[y]=null)):qi(y)&&(y.value=null)),Pn(m))ac(m,d,12,[c,b]);else{const R=Ji(m),O=qi(m);if(R||O){const q=()=>{if(t.f){const F=R?C(m)?w[m]:b[m]:m.value;o?pn(F)&&od(F,l):pn(F)?F.includes(l)||F.push(l):R?(b[m]=[l],C(m)&&(w[m]=b[m])):(m.value=[l],t.k&&(b[t.k]=m.value))}else R?(b[m]=c,C(m)&&(w[m]=c)):O&&(m.value=c,t.k&&(b[t.k]=c))};c?(q.id=-1,qs(q,n)):q()}}}fh().requestIdleCallback;fh().cancelIdleCallback;const Gu=t=>!!t.type.__asyncLoader,wm=t=>t.type.__isKeepAlive;function L_(t,e){xm(t,"a",e)}function C_(t,e){xm(t,"da",e)}function xm(t,e,n=kr){const r=t.__wdc||(t.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return t()});if(gh(e,r,n),n){let o=n.parent;for(;o&&o.parent;)wm(o.parent.vnode)&&k_(r,e,n,o),o=o.parent}}function k_(t,e,n,r){const o=gh(e,t,r,!0);_h(()=>{od(r[e],o)},n)}function gh(t,e,n=kr,r=!1){if(n){const o=n[t]||(n[t]=[]),l=e.__weh||(e.__weh=(...c)=>{ml();const d=uc(n),m=fa(e,n,t,c);return d(),gl(),m});return r?o.unshift(l):o.push(l),l}}const ja=t=>(e,n=kr)=>{(!ec||t==="sp")&&gh(t,(...r)=>e(...r),n)},P_=ja("bm"),Ra=ja("m"),S_=ja("bu"),E_=ja("u"),yd=ja("bum"),_h=ja("um"),M_=ja("sp"),A_=ja("rtg"),B_=ja("rtc");function T_(t,e=kr){gh("ec",t,e)}const N_="components";function D_(t,e){return I_(N_,t,!0,e)||t}const O_=Symbol.for("v-ndc");function I_(t,e,n=!0,r=!1){const o=Ps||kr;if(o){const l=o.type;{const d=Lv(l,!1);if(d&&(d===e||d===mo(e)||d===hh(mo(e))))return l}const c=Zd(o[t]||l[t],e)||Zd(o.appContext[t],e);return!c&&r?l:c}}function Zd(t,e){return t&&(t[e]||t[mo(e)]||t[hh(mo(e))])}function Wn(t,e,n,r){let o;const l=n,c=pn(t);if(c||Ji(t)){const d=c&&hl(t);let m=!1;d&&(m=!ho(t),t=ph(t)),o=new Array(t.length);for(let y=0,b=t.length;y<b;y++)o[y]=e(m?Hr(t[y]):t[y],y,void 0,l)}else if(typeof t=="number"){o=new Array(t);for(let d=0;d<t;d++)o[d]=e(d+1,d,void 0,l)}else if(pi(t))if(t[Symbol.iterator])o=Array.from(t,(d,m)=>e(d,m,void 0,l));else{const d=Object.keys(t);o=new Array(d.length);for(let m=0,y=d.length;m<y;m++){const b=d[m];o[m]=e(t[b],b,m,l)}}else o=[];return o}const kf=t=>t?$m(t)?bh(t):kf(t.parent):null,Vu=Yr(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>kf(t.parent),$root:t=>kf(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Cm(t),$forceUpdate:t=>t.f||(t.f=()=>{_d(t.update)}),$nextTick:t=>t.n||(t.n=lc.bind(t.proxy)),$watch:t=>rv.bind(t)}),Kh=(t,e)=>t!==li&&!t.__isScriptSetup&&ri(t,e),R_={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:o,props:l,accessCache:c,type:d,appContext:m}=t;let y;if(e[0]!=="$"){const C=c[e];if(C!==void 0)switch(C){case 1:return r[e];case 2:return o[e];case 4:return n[e];case 3:return l[e]}else{if(Kh(r,e))return c[e]=1,r[e];if(o!==li&&ri(o,e))return c[e]=2,o[e];if((y=t.propsOptions[0])&&ri(y,e))return c[e]=3,l[e];if(n!==li&&ri(n,e))return c[e]=4,n[e];Pf&&(c[e]=0)}}const b=Vu[e];let w,E;if(b)return e==="$attrs"&&Vr(t.attrs,"get",""),b(t);if((w=d.__cssModules)&&(w=w[e]))return w;if(n!==li&&ri(n,e))return c[e]=4,n[e];if(E=m.config.globalProperties,ri(E,e))return E[e]},set({_:t},e,n){const{data:r,setupState:o,ctx:l}=t;return Kh(o,e)?(o[e]=n,!0):r!==li&&ri(r,e)?(r[e]=n,!0):ri(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(l[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:o,propsOptions:l}},c){let d;return!!n[c]||t!==li&&ri(t,c)||Kh(e,c)||(d=l[0])&&ri(d,c)||ri(r,c)||ri(Vu,c)||ri(o.config.globalProperties,c)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ri(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Kd(t){return pn(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Pf=!0;function F_(t){const e=Cm(t),n=t.proxy,r=t.ctx;Pf=!1,e.beforeCreate&&Yd(e.beforeCreate,t,"bc");const{data:o,computed:l,methods:c,watch:d,provide:m,inject:y,created:b,beforeMount:w,mounted:E,beforeUpdate:C,updated:R,activated:O,deactivated:q,beforeDestroy:F,beforeUnmount:V,destroyed:Y,unmounted:Ct,render:kt,renderTracked:wt,renderTriggered:et,errorCaptured:ct,serverPrefetch:Bt,expose:Yt,inheritAttrs:$,components:J,directives:I,filters:nt}=e;if(y&&j_(y,r,null),c)for(const _t in c){const G=c[_t];Pn(G)&&(r[_t]=G.bind(n))}if(o){const _t=o.call(n,n);pi(_t)&&(t.data=Fa(_t))}if(Pf=!0,l)for(const _t in l){const G=l[_t],j=Pn(G)?G.bind(n,n):Pn(G.get)?G.get.bind(n,n):ua,X=!Pn(G)&&Pn(G.set)?G.set.bind(n):ua,Rt=Nn({get:j,set:X});Object.defineProperty(r,_t,{enumerable:!0,configurable:!0,get:()=>Rt.value,set:D=>Rt.value=D})}if(d)for(const _t in d)Lm(d[_t],r,n,_t);if(m){const _t=Pn(m)?m.call(n):m;Reflect.ownKeys(_t).forEach(G=>{Dc(G,_t[G])})}b&&Yd(b,t,"c");function tt(_t,G){pn(G)?G.forEach(j=>_t(j.bind(n))):G&&_t(G.bind(n))}if(tt(P_,w),tt(Ra,E),tt(S_,C),tt(E_,R),tt(L_,O),tt(C_,q),tt(T_,ct),tt(B_,wt),tt(A_,et),tt(yd,V),tt(_h,Ct),tt(M_,Bt),pn(Yt))if(Yt.length){const _t=t.exposed||(t.exposed={});Yt.forEach(G=>{Object.defineProperty(_t,G,{get:()=>n[G],set:j=>n[G]=j})})}else t.exposed||(t.exposed={});kt&&t.render===ua&&(t.render=kt),$!=null&&(t.inheritAttrs=$),J&&(t.components=J),I&&(t.directives=I),Bt&&bm(t)}function j_(t,e,n=ua){pn(t)&&(t=Sf(t));for(const r in t){const o=t[r];let l;pi(o)?"default"in o?l=fo(o.from||r,o.default,!0):l=fo(o.from||r):l=fo(o),qi(l)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>l.value,set:c=>l.value=c}):e[r]=l}}function Yd(t,e,n){fa(pn(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Lm(t,e,n,r){let o=r.includes(".")?Fm(n,r):()=>n[r];if(Ji(t)){const l=e[t];Pn(l)&&us(o,l)}else if(Pn(t))us(o,t.bind(n));else if(pi(t))if(pn(t))t.forEach(l=>Lm(l,e,n,r));else{const l=Pn(t.handler)?t.handler.bind(n):e[t.handler];Pn(l)&&us(o,l,t)}}function Cm(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:o,optionsCache:l,config:{optionMergeStrategies:c}}=t.appContext,d=l.get(e);let m;return d?m=d:!o.length&&!n&&!r?m=e:(m={},o.length&&o.forEach(y=>Xc(m,y,c,!0)),Xc(m,e,c)),pi(e)&&l.set(e,m),m}function Xc(t,e,n,r=!1){const{mixins:o,extends:l}=e;l&&Xc(t,l,n,!0),o&&o.forEach(c=>Xc(t,c,n,!0));for(const c in e)if(!(r&&c==="expose")){const d=z_[c]||n&&n[c];t[c]=d?d(t[c],e[c]):e[c]}return t}const z_={data:Jd,props:Xd,emits:Xd,methods:Fu,computed:Fu,beforeCreate:os,created:os,beforeMount:os,mounted:os,beforeUpdate:os,updated:os,beforeDestroy:os,beforeUnmount:os,destroyed:os,unmounted:os,activated:os,deactivated:os,errorCaptured:os,serverPrefetch:os,components:Fu,directives:Fu,watch:q_,provide:Jd,inject:U_};function Jd(t,e){return e?t?function(){return Yr(Pn(t)?t.call(this,this):t,Pn(e)?e.call(this,this):e)}:e:t}function U_(t,e){return Fu(Sf(t),Sf(e))}function Sf(t){if(pn(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function os(t,e){return t?[...new Set([].concat(t,e))]:e}function Fu(t,e){return t?Yr(Object.create(null),t,e):e}function Xd(t,e){return t?pn(t)&&pn(e)?[...new Set([...t,...e])]:Yr(Object.create(null),Kd(t),Kd(e??{})):e}function q_(t,e){if(!t)return e;if(!e)return t;const n=Yr(Object.create(null),t);for(const r in e)n[r]=os(t[r],e[r]);return n}function km(){return{app:null,config:{isNativeTag:A1,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let $_=0;function G_(t,e){return function(r,o=null){Pn(r)||(r=Yr({},r)),o!=null&&!pi(o)&&(o=null);const l=km(),c=new WeakSet,d=[];let m=!1;const y=l.app={_uid:$_++,_component:r,_props:o,_container:null,_context:l,_instance:null,version:kv,get config(){return l.config},set config(b){},use(b,...w){return c.has(b)||(b&&Pn(b.install)?(c.add(b),b.install(y,...w)):Pn(b)&&(c.add(b),b(y,...w))),y},mixin(b){return l.mixins.includes(b)||l.mixins.push(b),y},component(b,w){return w?(l.components[b]=w,y):l.components[b]},directive(b,w){return w?(l.directives[b]=w,y):l.directives[b]},mount(b,w,E){if(!m){const C=y._ceVNode||Di(r,o);return C.appContext=l,E===!0?E="svg":E===!1&&(E=void 0),t(C,b,E),m=!0,y._container=b,b.__vue_app__=y,bh(C.component)}},onUnmount(b){d.push(b)},unmount(){m&&(fa(d,y._instance,16),t(null,y._container),delete y._container.__vue_app__)},provide(b,w){return l.provides[b]=w,y},runWithContext(b){const w=Rl;Rl=y;try{return b()}finally{Rl=w}}};return y}}let Rl=null;function Dc(t,e){if(kr){let n=kr.provides;const r=kr.parent&&kr.parent.provides;r===n&&(n=kr.provides=Object.create(r)),n[t]=e}}function fo(t,e,n=!1){const r=kr||Ps;if(r||Rl){const o=Rl?Rl._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(o&&t in o)return o[t];if(arguments.length>1)return n&&Pn(e)?e.call(r&&r.proxy):e}}function V_(){return!!(kr||Ps||Rl)}const Pm={},Sm=()=>Object.create(Pm),Em=t=>Object.getPrototypeOf(t)===Pm;function H_(t,e,n,r=!1){const o={},l=Sm();t.propsDefaults=Object.create(null),Mm(t,e,o,l);for(const c in t.propsOptions[0])c in o||(o[c]=void 0);n?t.props=r?o:hm(o):t.type.props?t.props=o:t.props=l,t.attrs=l}function W_(t,e,n,r){const{props:o,attrs:l,vnode:{patchFlag:c}}=t,d=Yn(o),[m]=t.propsOptions;let y=!1;if((r||c>0)&&!(c&16)){if(c&8){const b=t.vnode.dynamicProps;for(let w=0;w<b.length;w++){let E=b[w];if(vh(t.emitsOptions,E))continue;const C=e[E];if(m)if(ri(l,E))C!==l[E]&&(l[E]=C,y=!0);else{const R=mo(E);o[R]=Ef(m,d,R,C,t,!1)}else C!==l[E]&&(l[E]=C,y=!0)}}}else{Mm(t,e,o,l)&&(y=!0);let b;for(const w in d)(!e||!ri(e,w)&&((b=Gl(w))===w||!ri(e,b)))&&(m?n&&(n[w]!==void 0||n[b]!==void 0)&&(o[w]=Ef(m,d,w,void 0,t,!0)):delete o[w]);if(l!==d)for(const w in l)(!e||!ri(e,w))&&(delete l[w],y=!0)}y&&Na(t.attrs,"set","")}function Mm(t,e,n,r){const[o,l]=t.propsOptions;let c=!1,d;if(e)for(let m in e){if(Uu(m))continue;const y=e[m];let b;o&&ri(o,b=mo(m))?!l||!l.includes(b)?n[b]=y:(d||(d={}))[b]=y:vh(t.emitsOptions,m)||(!(m in r)||y!==r[m])&&(r[m]=y,c=!0)}if(l){const m=Yn(n),y=d||li;for(let b=0;b<l.length;b++){const w=l[b];n[w]=Ef(o,m,w,y[w],t,!ri(y,w))}}return c}function Ef(t,e,n,r,o,l){const c=t[n];if(c!=null){const d=ri(c,"default");if(d&&r===void 0){const m=c.default;if(c.type!==Function&&!c.skipFactory&&Pn(m)){const{propsDefaults:y}=o;if(n in y)r=y[n];else{const b=uc(o);r=y[n]=m.call(null,e),b()}}else r=m;o.ce&&o.ce._setProp(n,r)}c[0]&&(l&&!d?r=!1:c[1]&&(r===""||r===Gl(n))&&(r=!0))}return r}const Z_=new WeakMap;function Am(t,e,n=!1){const r=n?Z_:e.propsCache,o=r.get(t);if(o)return o;const l=t.props,c={},d=[];let m=!1;if(!Pn(t)){const b=w=>{m=!0;const[E,C]=Am(w,e,!0);Yr(c,E),C&&d.push(...C)};!n&&e.mixins.length&&e.mixins.forEach(b),t.extends&&b(t.extends),t.mixins&&t.mixins.forEach(b)}if(!l&&!m)return pi(t)&&r.set(t,cu),cu;if(pn(l))for(let b=0;b<l.length;b++){const w=mo(l[b]);Qd(w)&&(c[w]=li)}else if(l)for(const b in l){const w=mo(b);if(Qd(w)){const E=l[b],C=c[w]=pn(E)||Pn(E)?{type:E}:Yr({},E),R=C.type;let O=!1,q=!0;if(pn(R))for(let F=0;F<R.length;++F){const V=R[F],Y=Pn(V)&&V.name;if(Y==="Boolean"){O=!0;break}else Y==="String"&&(q=!1)}else O=Pn(R)&&R.name==="Boolean";C[0]=O,C[1]=q,(O||ri(C,"default"))&&d.push(w)}}const y=[c,d];return pi(t)&&r.set(t,y),y}function Qd(t){return t[0]!=="$"&&!Uu(t)}const Bm=t=>t[0]==="_"||t==="$stable",bd=t=>pn(t)?t.map(aa):[aa(t)],K_=(t,e,n)=>{if(e._n)return e;const r=Bl((...o)=>bd(e(...o)),n);return r._c=!1,r},Tm=(t,e,n)=>{const r=t._ctx;for(const o in t){if(Bm(o))continue;const l=t[o];if(Pn(l))e[o]=K_(o,l,r);else if(l!=null){const c=bd(l);e[o]=()=>c}}},Nm=(t,e)=>{const n=bd(e);t.slots.default=()=>n},Dm=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},Y_=(t,e,n)=>{const r=t.slots=Sm();if(t.vnode.shapeFlag&32){const o=e._;o?(Dm(r,e,n),n&&G0(r,"_",o,!0)):Tm(e,r)}else e&&Nm(t,e)},J_=(t,e,n)=>{const{vnode:r,slots:o}=t;let l=!0,c=li;if(r.shapeFlag&32){const d=e._;d?n&&d===1?l=!1:Dm(o,e,n):(l=!e.$stable,Tm(e,o)),c=e}else e&&(Nm(t,e),c={default:1});if(l)for(const d in o)!Bm(d)&&c[d]==null&&delete o[d]},qs=hv;function X_(t){return Q_(t)}function Q_(t,e){const n=fh();n.__VUE__=!0;const{insert:r,remove:o,patchProp:l,createElement:c,createText:d,createComment:m,setText:y,setElementText:b,parentNode:w,nextSibling:E,setScopeId:C=ua,insertStaticContent:R}=t,O=(it,ht,It,Dt=null,lt=null,Gt=null,se=void 0,Qt=null,oe=!!ht.dynamicChildren)=>{if(it===ht)return;it&&!Bu(it,ht)&&(Dt=dt(it),D(it,lt,Gt,!0),it=null),ht.patchFlag===-2&&(oe=!1,ht.dynamicChildren=null);const{type:Ot,ref:Lt,shapeFlag:ie}=ht;switch(Ot){case yh:q(it,ht,It,Dt);break;case ql:F(it,ht,It,Dt);break;case Oc:it==null&&V(ht,It,Dt,se);break;case Mn:J(it,ht,It,Dt,lt,Gt,se,Qt,oe);break;default:ie&1?kt(it,ht,It,Dt,lt,Gt,se,Qt,oe):ie&6?I(it,ht,It,Dt,lt,Gt,se,Qt,oe):(ie&64||ie&128)&&Ot.process(it,ht,It,Dt,lt,Gt,se,Qt,oe,Kt)}Lt!=null&&lt&&Jc(Lt,it&&it.ref,Gt,ht||it,!ht)},q=(it,ht,It,Dt)=>{if(it==null)r(ht.el=d(ht.children),It,Dt);else{const lt=ht.el=it.el;ht.children!==it.children&&y(lt,ht.children)}},F=(it,ht,It,Dt)=>{it==null?r(ht.el=m(ht.children||""),It,Dt):ht.el=it.el},V=(it,ht,It,Dt)=>{[it.el,it.anchor]=R(it.children,ht,It,Dt,it.el,it.anchor)},Y=({el:it,anchor:ht},It,Dt)=>{let lt;for(;it&&it!==ht;)lt=E(it),r(it,It,Dt),it=lt;r(ht,It,Dt)},Ct=({el:it,anchor:ht})=>{let It;for(;it&&it!==ht;)It=E(it),o(it),it=It;o(ht)},kt=(it,ht,It,Dt,lt,Gt,se,Qt,oe)=>{ht.type==="svg"?se="svg":ht.type==="math"&&(se="mathml"),it==null?wt(ht,It,Dt,lt,Gt,se,Qt,oe):Bt(it,ht,lt,Gt,se,Qt,oe)},wt=(it,ht,It,Dt,lt,Gt,se,Qt)=>{let oe,Ot;const{props:Lt,shapeFlag:ie,transition:_e,dirs:Le}=it;if(oe=it.el=c(it.type,Gt,Lt&&Lt.is,Lt),ie&8?b(oe,it.children):ie&16&&ct(it.children,oe,null,Dt,lt,Yh(it,Gt),se,Qt),Le&&Pl(it,null,Dt,"created"),et(oe,it,it.scopeId,se,Dt),Lt){for(const De in Lt)De!=="value"&&!Uu(De)&&l(oe,De,null,Lt[De],Gt,Dt);"value"in Lt&&l(oe,"value",null,Lt.value,Gt),(Ot=Lt.onVnodeBeforeMount)&&ia(Ot,Dt,it)}Le&&Pl(it,null,Dt,"beforeMount");const zt=tv(lt,_e);zt&&_e.beforeEnter(oe),r(oe,ht,It),((Ot=Lt&&Lt.onVnodeMounted)||zt||Le)&&qs(()=>{Ot&&ia(Ot,Dt,it),zt&&_e.enter(oe),Le&&Pl(it,null,Dt,"mounted")},lt)},et=(it,ht,It,Dt,lt)=>{if(It&&C(it,It),Dt)for(let Gt=0;Gt<Dt.length;Gt++)C(it,Dt[Gt]);if(lt){let Gt=lt.subTree;if(ht===Gt||zm(Gt.type)&&(Gt.ssContent===ht||Gt.ssFallback===ht)){const se=lt.vnode;et(it,se,se.scopeId,se.slotScopeIds,lt.parent)}}},ct=(it,ht,It,Dt,lt,Gt,se,Qt,oe=0)=>{for(let Ot=oe;Ot<it.length;Ot++){const Lt=it[Ot]=Qt?al(it[Ot]):aa(it[Ot]);O(null,Lt,ht,It,Dt,lt,Gt,se,Qt)}},Bt=(it,ht,It,Dt,lt,Gt,se)=>{const Qt=ht.el=it.el;let{patchFlag:oe,dynamicChildren:Ot,dirs:Lt}=ht;oe|=it.patchFlag&16;const ie=it.props||li,_e=ht.props||li;let Le;if(It&&Sl(It,!1),(Le=_e.onVnodeBeforeUpdate)&&ia(Le,It,ht,it),Lt&&Pl(ht,it,It,"beforeUpdate"),It&&Sl(It,!0),(ie.innerHTML&&_e.innerHTML==null||ie.textContent&&_e.textContent==null)&&b(Qt,""),Ot?Yt(it.dynamicChildren,Ot,Qt,It,Dt,Yh(ht,lt),Gt):se||G(it,ht,Qt,null,It,Dt,Yh(ht,lt),Gt,!1),oe>0){if(oe&16)$(Qt,ie,_e,It,lt);else if(oe&2&&ie.class!==_e.class&&l(Qt,"class",null,_e.class,lt),oe&4&&l(Qt,"style",ie.style,_e.style,lt),oe&8){const zt=ht.dynamicProps;for(let De=0;De<zt.length;De++){const Te=zt[De],Ue=ie[Te],He=_e[Te];(He!==Ue||Te==="value")&&l(Qt,Te,Ue,He,lt,It)}}oe&1&&it.children!==ht.children&&b(Qt,ht.children)}else!se&&Ot==null&&$(Qt,ie,_e,It,lt);((Le=_e.onVnodeUpdated)||Lt)&&qs(()=>{Le&&ia(Le,It,ht,it),Lt&&Pl(ht,it,It,"updated")},Dt)},Yt=(it,ht,It,Dt,lt,Gt,se)=>{for(let Qt=0;Qt<ht.length;Qt++){const oe=it[Qt],Ot=ht[Qt],Lt=oe.el&&(oe.type===Mn||!Bu(oe,Ot)||oe.shapeFlag&70)?w(oe.el):It;O(oe,Ot,Lt,null,Dt,lt,Gt,se,!0)}},$=(it,ht,It,Dt,lt)=>{if(ht!==It){if(ht!==li)for(const Gt in ht)!Uu(Gt)&&!(Gt in It)&&l(it,Gt,ht[Gt],null,lt,Dt);for(const Gt in It){if(Uu(Gt))continue;const se=It[Gt],Qt=ht[Gt];se!==Qt&&Gt!=="value"&&l(it,Gt,Qt,se,lt,Dt)}"value"in It&&l(it,"value",ht.value,It.value,lt)}},J=(it,ht,It,Dt,lt,Gt,se,Qt,oe)=>{const Ot=ht.el=it?it.el:d(""),Lt=ht.anchor=it?it.anchor:d("");let{patchFlag:ie,dynamicChildren:_e,slotScopeIds:Le}=ht;Le&&(Qt=Qt?Qt.concat(Le):Le),it==null?(r(Ot,It,Dt),r(Lt,It,Dt),ct(ht.children||[],It,Lt,lt,Gt,se,Qt,oe)):ie>0&&ie&64&&_e&&it.dynamicChildren?(Yt(it.dynamicChildren,_e,It,lt,Gt,se,Qt),(ht.key!=null||lt&&ht===lt.subTree)&&Om(it,ht,!0)):G(it,ht,It,Lt,lt,Gt,se,Qt,oe)},I=(it,ht,It,Dt,lt,Gt,se,Qt,oe)=>{ht.slotScopeIds=Qt,it==null?ht.shapeFlag&512?lt.ctx.activate(ht,It,Dt,se,oe):nt(ht,It,Dt,lt,Gt,se,oe):K(it,ht,oe)},nt=(it,ht,It,Dt,lt,Gt,se)=>{const Qt=it.component=vv(it,Dt,lt);if(wm(it)&&(Qt.ctx.renderer=Kt),yv(Qt,!1,se),Qt.asyncDep){if(lt&&lt.registerDep(Qt,tt,se),!it.el){const oe=Qt.subTree=Di(ql);F(null,oe,ht,It)}}else tt(Qt,it,ht,It,lt,Gt,se)},K=(it,ht,It)=>{const Dt=ht.component=it.component;if(uv(it,ht,It))if(Dt.asyncDep&&!Dt.asyncResolved){_t(Dt,ht,It);return}else Dt.next=ht,Dt.update();else ht.el=it.el,Dt.vnode=ht},tt=(it,ht,It,Dt,lt,Gt,se)=>{const Qt=()=>{if(it.isMounted){let{next:ie,bu:_e,u:Le,parent:zt,vnode:De}=it;{const Sn=Im(it);if(Sn){ie&&(ie.el=De.el,_t(it,ie,se)),Sn.asyncDep.then(()=>{it.isUnmounted||Qt()});return}}let Te=ie,Ue;Sl(it,!1),ie?(ie.el=De.el,_t(it,ie,se)):ie=De,_e&&Nc(_e),(Ue=ie.props&&ie.props.onVnodeBeforeUpdate)&&ia(Ue,zt,ie,De),Sl(it,!0);const He=ep(it),Ne=it.subTree;it.subTree=He,O(Ne,He,w(Ne.el),dt(Ne),it,lt,Gt),ie.el=He.el,Te===null&&cv(it,He.el),Le&&qs(Le,lt),(Ue=ie.props&&ie.props.onVnodeUpdated)&&qs(()=>ia(Ue,zt,ie,De),lt)}else{let ie;const{el:_e,props:Le}=ht,{bm:zt,m:De,parent:Te,root:Ue,type:He}=it,Ne=Gu(ht);Sl(it,!1),zt&&Nc(zt),!Ne&&(ie=Le&&Le.onVnodeBeforeMount)&&ia(ie,Te,ht),Sl(it,!0);{Ue.ce&&Ue.ce._injectChildStyle(He);const Sn=it.subTree=ep(it);O(null,Sn,It,Dt,it,lt,Gt),ht.el=Sn.el}if(De&&qs(De,lt),!Ne&&(ie=Le&&Le.onVnodeMounted)){const Sn=ht;qs(()=>ia(ie,Te,Sn),lt)}(ht.shapeFlag&256||Te&&Gu(Te.vnode)&&Te.vnode.shapeFlag&256)&&it.a&&qs(it.a,lt),it.isMounted=!0,ht=It=Dt=null}};it.scope.on();const oe=it.effect=new J0(Qt);it.scope.off();const Ot=it.update=oe.run.bind(oe),Lt=it.job=oe.runIfDirty.bind(oe);Lt.i=it,Lt.id=it.uid,oe.scheduler=()=>_d(Lt),Sl(it,!0),Ot()},_t=(it,ht,It)=>{ht.component=it;const Dt=it.vnode.props;it.vnode=ht,it.next=null,W_(it,ht.props,Dt,It),J_(it,ht.children,It),ml(),Wd(it),gl()},G=(it,ht,It,Dt,lt,Gt,se,Qt,oe=!1)=>{const Ot=it&&it.children,Lt=it?it.shapeFlag:0,ie=ht.children,{patchFlag:_e,shapeFlag:Le}=ht;if(_e>0){if(_e&128){X(Ot,ie,It,Dt,lt,Gt,se,Qt,oe);return}else if(_e&256){j(Ot,ie,It,Dt,lt,Gt,se,Qt,oe);return}}Le&8?(Lt&16&&xt(Ot,lt,Gt),ie!==Ot&&b(It,ie)):Lt&16?Le&16?X(Ot,ie,It,Dt,lt,Gt,se,Qt,oe):xt(Ot,lt,Gt,!0):(Lt&8&&b(It,""),Le&16&&ct(ie,It,Dt,lt,Gt,se,Qt,oe))},j=(it,ht,It,Dt,lt,Gt,se,Qt,oe)=>{it=it||cu,ht=ht||cu;const Ot=it.length,Lt=ht.length,ie=Math.min(Ot,Lt);let _e;for(_e=0;_e<ie;_e++){const Le=ht[_e]=oe?al(ht[_e]):aa(ht[_e]);O(it[_e],Le,It,null,lt,Gt,se,Qt,oe)}Ot>Lt?xt(it,lt,Gt,!0,!1,ie):ct(ht,It,Dt,lt,Gt,se,Qt,oe,ie)},X=(it,ht,It,Dt,lt,Gt,se,Qt,oe)=>{let Ot=0;const Lt=ht.length;let ie=it.length-1,_e=Lt-1;for(;Ot<=ie&&Ot<=_e;){const Le=it[Ot],zt=ht[Ot]=oe?al(ht[Ot]):aa(ht[Ot]);if(Bu(Le,zt))O(Le,zt,It,null,lt,Gt,se,Qt,oe);else break;Ot++}for(;Ot<=ie&&Ot<=_e;){const Le=it[ie],zt=ht[_e]=oe?al(ht[_e]):aa(ht[_e]);if(Bu(Le,zt))O(Le,zt,It,null,lt,Gt,se,Qt,oe);else break;ie--,_e--}if(Ot>ie){if(Ot<=_e){const Le=_e+1,zt=Le<Lt?ht[Le].el:Dt;for(;Ot<=_e;)O(null,ht[Ot]=oe?al(ht[Ot]):aa(ht[Ot]),It,zt,lt,Gt,se,Qt,oe),Ot++}}else if(Ot>_e)for(;Ot<=ie;)D(it[Ot],lt,Gt,!0),Ot++;else{const Le=Ot,zt=Ot,De=new Map;for(Ot=zt;Ot<=_e;Ot++){const cn=ht[Ot]=oe?al(ht[Ot]):aa(ht[Ot]);cn.key!=null&&De.set(cn.key,Ot)}let Te,Ue=0;const He=_e-zt+1;let Ne=!1,Sn=0;const en=new Array(He);for(Ot=0;Ot<He;Ot++)en[Ot]=0;for(Ot=Le;Ot<=ie;Ot++){const cn=it[Ot];if(Ue>=He){D(cn,lt,Gt,!0);continue}let Ln;if(cn.key!=null)Ln=De.get(cn.key);else for(Te=zt;Te<=_e;Te++)if(en[Te-zt]===0&&Bu(cn,ht[Te])){Ln=Te;break}Ln===void 0?D(cn,lt,Gt,!0):(en[Ln-zt]=Ot+1,Ln>=Sn?Sn=Ln:Ne=!0,O(cn,ht[Ln],It,null,lt,Gt,se,Qt,oe),Ue++)}const Jn=Ne?ev(en):cu;for(Te=Jn.length-1,Ot=He-1;Ot>=0;Ot--){const cn=zt+Ot,Ln=ht[cn],Xn=cn+1<Lt?ht[cn+1].el:Dt;en[Ot]===0?O(null,Ln,It,Xn,lt,Gt,se,Qt,oe):Ne&&(Te<0||Ot!==Jn[Te]?Rt(Ln,It,Xn,2):Te--)}}},Rt=(it,ht,It,Dt,lt=null)=>{const{el:Gt,type:se,transition:Qt,children:oe,shapeFlag:Ot}=it;if(Ot&6){Rt(it.component.subTree,ht,It,Dt);return}if(Ot&128){it.suspense.move(ht,It,Dt);return}if(Ot&64){se.move(it,ht,It,Kt);return}if(se===Mn){r(Gt,ht,It);for(let ie=0;ie<oe.length;ie++)Rt(oe[ie],ht,It,Dt);r(it.anchor,ht,It);return}if(se===Oc){Y(it,ht,It);return}if(Dt!==2&&Ot&1&&Qt)if(Dt===0)Qt.beforeEnter(Gt),r(Gt,ht,It),qs(()=>Qt.enter(Gt),lt);else{const{leave:ie,delayLeave:_e,afterLeave:Le}=Qt,zt=()=>r(Gt,ht,It),De=()=>{ie(Gt,()=>{zt(),Le&&Le()})};_e?_e(Gt,zt,De):De()}else r(Gt,ht,It)},D=(it,ht,It,Dt=!1,lt=!1)=>{const{type:Gt,props:se,ref:Qt,children:oe,dynamicChildren:Ot,shapeFlag:Lt,patchFlag:ie,dirs:_e,cacheIndex:Le}=it;if(ie===-2&&(lt=!1),Qt!=null&&Jc(Qt,null,It,it,!0),Le!=null&&(ht.renderCache[Le]=void 0),Lt&256){ht.ctx.deactivate(it);return}const zt=Lt&1&&_e,De=!Gu(it);let Te;if(De&&(Te=se&&se.onVnodeBeforeUnmount)&&ia(Te,ht,it),Lt&6)vt(it.component,It,Dt);else{if(Lt&128){it.suspense.unmount(It,Dt);return}zt&&Pl(it,null,ht,"beforeUnmount"),Lt&64?it.type.remove(it,ht,It,Kt,Dt):Ot&&!Ot.hasOnce&&(Gt!==Mn||ie>0&&ie&64)?xt(Ot,ht,It,!1,!0):(Gt===Mn&&ie&384||!lt&&Lt&16)&&xt(oe,ht,It),Dt&&Z(it)}(De&&(Te=se&&se.onVnodeUnmounted)||zt)&&qs(()=>{Te&&ia(Te,ht,it),zt&&Pl(it,null,ht,"unmounted")},It)},Z=it=>{const{type:ht,el:It,anchor:Dt,transition:lt}=it;if(ht===Mn){ut(It,Dt);return}if(ht===Oc){Ct(it);return}const Gt=()=>{o(It),lt&&!lt.persisted&&lt.afterLeave&&lt.afterLeave()};if(it.shapeFlag&1&&lt&&!lt.persisted){const{leave:se,delayLeave:Qt}=lt,oe=()=>se(It,Gt);Qt?Qt(it.el,Gt,oe):oe()}else Gt()},ut=(it,ht)=>{let It;for(;it!==ht;)It=E(it),o(it),it=It;o(ht)},vt=(it,ht,It)=>{const{bum:Dt,scope:lt,job:Gt,subTree:se,um:Qt,m:oe,a:Ot}=it;tp(oe),tp(Ot),Dt&&Nc(Dt),lt.stop(),Gt&&(Gt.flags|=8,D(se,it,ht,It)),Qt&&qs(Qt,ht),qs(()=>{it.isUnmounted=!0},ht),ht&&ht.pendingBranch&&!ht.isUnmounted&&it.asyncDep&&!it.asyncResolved&&it.suspenseId===ht.pendingId&&(ht.deps--,ht.deps===0&&ht.resolve())},xt=(it,ht,It,Dt=!1,lt=!1,Gt=0)=>{for(let se=Gt;se<it.length;se++)D(it[se],ht,It,Dt,lt)},dt=it=>{if(it.shapeFlag&6)return dt(it.component.subTree);if(it.shapeFlag&128)return it.suspense.next();const ht=E(it.anchor||it.el),It=ht&&ht[w_];return It?E(It):ht};let St=!1;const Mt=(it,ht,It)=>{it==null?ht._vnode&&D(ht._vnode,null,null,!0):O(ht._vnode||null,it,ht,null,null,null,It),ht._vnode=it,St||(St=!0,Wd(),_m(),St=!1)},Kt={p:O,um:D,m:Rt,r:Z,mt:nt,mc:ct,pc:G,pbc:Yt,n:dt,o:t};return{render:Mt,hydrate:void 0,createApp:G_(Mt)}}function Yh({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Sl({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function tv(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Om(t,e,n=!1){const r=t.children,o=e.children;if(pn(r)&&pn(o))for(let l=0;l<r.length;l++){const c=r[l];let d=o[l];d.shapeFlag&1&&!d.dynamicChildren&&((d.patchFlag<=0||d.patchFlag===32)&&(d=o[l]=al(o[l]),d.el=c.el),!n&&d.patchFlag!==-2&&Om(c,d)),d.type===yh&&(d.el=c.el)}}function ev(t){const e=t.slice(),n=[0];let r,o,l,c,d;const m=t.length;for(r=0;r<m;r++){const y=t[r];if(y!==0){if(o=n[n.length-1],t[o]<y){e[r]=o,n.push(r);continue}for(l=0,c=n.length-1;l<c;)d=l+c>>1,t[n[d]]<y?l=d+1:c=d;y<t[n[l]]&&(l>0&&(e[r]=n[l-1]),n[l]=r)}}for(l=n.length,c=n[l-1];l-- >0;)n[l]=c,c=e[c];return n}function Im(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Im(e)}function tp(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const nv=Symbol.for("v-scx"),iv=()=>fo(nv);function us(t,e,n){return Rm(t,e,n)}function Rm(t,e,n=li){const{immediate:r,deep:o,flush:l,once:c}=n,d=Yr({},n),m=e&&r||!e&&l!=="post";let y;if(ec){if(l==="sync"){const C=iv();y=C.__watcherHandles||(C.__watcherHandles=[])}else if(!m){const C=()=>{};return C.stop=ua,C.resume=ua,C.pause=ua,C}}const b=kr;d.call=(C,R,O)=>fa(C,b,R,O);let w=!1;l==="post"?d.scheduler=C=>{qs(C,b&&b.suspense)}:l!=="sync"&&(w=!0,d.scheduler=(C,R)=>{R?C():_d(C)}),d.augmentJob=C=>{e&&(C.flags|=4),w&&(C.flags|=2,b&&(C.id=b.uid,C.i=b))};const E=__(t,e,d);return ec&&(y?y.push(E):m&&E()),E}function rv(t,e,n){const r=this.proxy,o=Ji(t)?t.includes(".")?Fm(r,t):()=>r[t]:t.bind(r,r);let l;Pn(e)?l=e:(l=e.handler,n=e);const c=uc(this),d=Rm(o,l.bind(r),n);return c(),d}function Fm(t,e){const n=e.split(".");return()=>{let r=t;for(let o=0;o<n.length&&r;o++)r=r[n[o]];return r}}const sv=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${mo(e)}Modifiers`]||t[`${Gl(e)}Modifiers`];function ov(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||li;let o=n;const l=e.startsWith("update:"),c=l&&sv(r,e.slice(7));c&&(c.trim&&(o=n.map(b=>Ji(b)?b.trim():b)),c.number&&(o=n.map(Hc)));let d,m=r[d=Gh(e)]||r[d=Gh(mo(e))];!m&&l&&(m=r[d=Gh(Gl(e))]),m&&fa(m,t,6,o);const y=r[d+"Once"];if(y){if(!t.emitted)t.emitted={};else if(t.emitted[d])return;t.emitted[d]=!0,fa(y,t,6,o)}}function jm(t,e,n=!1){const r=e.emitsCache,o=r.get(t);if(o!==void 0)return o;const l=t.emits;let c={},d=!1;if(!Pn(t)){const m=y=>{const b=jm(y,e,!0);b&&(d=!0,Yr(c,b))};!n&&e.mixins.length&&e.mixins.forEach(m),t.extends&&m(t.extends),t.mixins&&t.mixins.forEach(m)}return!l&&!d?(pi(t)&&r.set(t,null),null):(pn(l)?l.forEach(m=>c[m]=null):Yr(c,l),pi(t)&&r.set(t,c),c)}function vh(t,e){return!t||!uh(e)?!1:(e=e.slice(2).replace(/Once$/,""),ri(t,e[0].toLowerCase()+e.slice(1))||ri(t,Gl(e))||ri(t,e))}function ep(t){const{type:e,vnode:n,proxy:r,withProxy:o,propsOptions:[l],slots:c,attrs:d,emit:m,render:y,renderCache:b,props:w,data:E,setupState:C,ctx:R,inheritAttrs:O}=t,q=Yc(t);let F,V;try{if(n.shapeFlag&4){const Ct=o||r,kt=Ct;F=aa(y.call(kt,Ct,b,w,C,E,R)),V=d}else{const Ct=e;F=aa(Ct.length>1?Ct(w,{attrs:d,slots:c,emit:m}):Ct(w,null)),V=e.props?d:av(d)}}catch(Ct){Hu.length=0,mh(Ct,t,1),F=Di(ql)}let Y=F;if(V&&O!==!1){const Ct=Object.keys(V),{shapeFlag:kt}=Y;Ct.length&&kt&7&&(l&&Ct.some(sd)&&(V=lv(V,l)),Y=_u(Y,V,!1,!0))}return n.dirs&&(Y=_u(Y,null,!1,!0),Y.dirs=Y.dirs?Y.dirs.concat(n.dirs):n.dirs),n.transition&&vd(Y,n.transition),F=Y,Yc(q),F}const av=t=>{let e;for(const n in t)(n==="class"||n==="style"||uh(n))&&((e||(e={}))[n]=t[n]);return e},lv=(t,e)=>{const n={};for(const r in t)(!sd(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function uv(t,e,n){const{props:r,children:o,component:l}=t,{props:c,children:d,patchFlag:m}=e,y=l.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&m>=0){if(m&1024)return!0;if(m&16)return r?np(r,c,y):!!c;if(m&8){const b=e.dynamicProps;for(let w=0;w<b.length;w++){const E=b[w];if(c[E]!==r[E]&&!vh(y,E))return!0}}}else return(o||d)&&(!d||!d.$stable)?!0:r===c?!1:r?c?np(r,c,y):!0:!!c;return!1}function np(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let o=0;o<r.length;o++){const l=r[o];if(e[l]!==t[l]&&!vh(n,l))return!0}return!1}function cv({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const zm=t=>t.__isSuspense;function hv(t,e){e&&e.pendingBranch?pn(t)?e.effects.push(...t):e.effects.push(t):b_(t)}const Mn=Symbol.for("v-fgt"),yh=Symbol.for("v-txt"),ql=Symbol.for("v-cmt"),Oc=Symbol.for("v-stc"),Hu=[];let Gs=null;function ue(t=!1){Hu.push(Gs=t?null:[])}function fv(){Hu.pop(),Gs=Hu[Hu.length-1]||null}let tc=1;function ip(t,e=!1){tc+=t,t<0&&Gs&&e&&(Gs.hasOnce=!0)}function Um(t){return t.dynamicChildren=tc>0?Gs||cu:null,fv(),tc>0&&Gs&&Gs.push(t),t}function fe(t,e,n,r,o,l){return Um(A(t,e,n,r,o,l,!0))}function Ia(t,e,n,r,o){return Um(Di(t,e,n,r,o,!0))}function Qc(t){return t?t.__v_isVNode===!0:!1}function Bu(t,e){return t.type===e.type&&t.key===e.key}const qm=({key:t})=>t??null,Ic=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Ji(t)||qi(t)||Pn(t)?{i:Ps,r:t,k:e,f:!!n}:t:null);function A(t,e=null,n=null,r=0,o=null,l=t===Mn?0:1,c=!1,d=!1){const m={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&qm(e),ref:e&&Ic(e),scopeId:ym,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:Ps};return d?(wd(m,n),l&128&&t.normalize(m)):n&&(m.shapeFlag|=Ji(n)?8:16),tc>0&&!c&&Gs&&(m.patchFlag>0||l&6)&&m.patchFlag!==32&&Gs.push(m),m}const Di=dv;function dv(t,e=null,n=null,r=0,o=null,l=!1){if((!t||t===O_)&&(t=ql),Qc(t)){const d=_u(t,e,!0);return n&&wd(d,n),tc>0&&!l&&Gs&&(d.shapeFlag&6?Gs[Gs.indexOf(t)]=d:Gs.push(d)),d.patchFlag=-2,d}if(Cv(t)&&(t=t.__vccOpts),e){e=pv(e);let{class:d,style:m}=e;d&&!Ji(d)&&(e.class=Kr(d)),pi(m)&&(md(m)&&!pn(m)&&(m=Yr({},m)),e.style=dh(m))}const c=Ji(t)?1:zm(t)?128:x_(t)?64:pi(t)?4:Pn(t)?2:0;return A(t,e,n,r,o,c,l,!0)}function pv(t){return t?md(t)||Em(t)?Yr({},t):t:null}function _u(t,e,n=!1,r=!1){const{props:o,ref:l,patchFlag:c,children:d,transition:m}=t,y=e?mv(o||{},e):o,b={__v_isVNode:!0,__v_skip:!0,type:t.type,props:y,key:y&&qm(y),ref:e&&e.ref?n&&l?pn(l)?l.concat(Ic(e)):[l,Ic(e)]:Ic(e):l,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:d,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Mn?c===-1?16:c|16:c,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:m,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&_u(t.ssContent),ssFallback:t.ssFallback&&_u(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return m&&r&&vd(b,m.clone(b)),b}function yi(t=" ",e=0){return Di(yh,null,t,e)}function rp(t,e){const n=Di(Oc,null,t);return n.staticCount=e,n}function an(t="",e=!1){return e?(ue(),Ia(ql,null,t)):Di(ql,null,t)}function aa(t){return t==null||typeof t=="boolean"?Di(ql):pn(t)?Di(Mn,null,t.slice()):Qc(t)?al(t):Di(yh,null,String(t))}function al(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:_u(t)}function wd(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(pn(e))n=16;else if(typeof e=="object")if(r&65){const o=e.default;o&&(o._c&&(o._d=!1),wd(t,o()),o._c&&(o._d=!0));return}else{n=32;const o=e._;!o&&!Em(e)?e._ctx=Ps:o===3&&Ps&&(Ps.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Pn(e)?(e={default:e,_ctx:Ps},n=32):(e=String(e),r&64?(n=16,e=[yi(e)]):n=8);t.children=e,t.shapeFlag|=n}function mv(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const o in r)if(o==="class")e.class!==r.class&&(e.class=Kr([e.class,r.class]));else if(o==="style")e.style=dh([e.style,r.style]);else if(uh(o)){const l=e[o],c=r[o];c&&l!==c&&!(pn(l)&&l.includes(c))&&(e[o]=l?[].concat(l,c):c)}else o!==""&&(e[o]=r[o])}return e}function ia(t,e,n,r=null){fa(t,e,7,[n,r])}const gv=km();let _v=0;function vv(t,e,n){const r=t.type,o=(e?e.appContext:t.appContext)||gv,l={uid:_v++,vnode:t,type:r,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Z0(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Am(r,o),emitsOptions:jm(r,o),emit:null,emitted:null,propsDefaults:li,inheritAttrs:r.inheritAttrs,ctx:li,data:li,props:li,attrs:li,slots:li,refs:li,setupState:li,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=e?e.root:l,l.emit=ov.bind(null,l),t.ce&&t.ce(l),l}let kr=null,th,Mf;{const t=fh(),e=(n,r)=>{let o;return(o=t[n])||(o=t[n]=[]),o.push(r),l=>{o.length>1?o.forEach(c=>c(l)):o[0](l)}};th=e("__VUE_INSTANCE_SETTERS__",n=>kr=n),Mf=e("__VUE_SSR_SETTERS__",n=>ec=n)}const uc=t=>{const e=kr;return th(t),t.scope.on(),()=>{t.scope.off(),th(e)}},sp=()=>{kr&&kr.scope.off(),th(null)};function $m(t){return t.vnode.shapeFlag&4}let ec=!1;function yv(t,e=!1,n=!1){e&&Mf(e);const{props:r,children:o}=t.vnode,l=$m(t);H_(t,r,l,e),Y_(t,o,n);const c=l?bv(t,e):void 0;return e&&Mf(!1),c}function bv(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,R_);const{setup:r}=n;if(r){ml();const o=t.setupContext=r.length>1?xv(t):null,l=uc(t),c=ac(r,t,0,[t.props,o]),d=U0(c);if(gl(),l(),(d||t.sp)&&!Gu(t)&&bm(t),d){if(c.then(sp,sp),e)return c.then(m=>{op(t,m)}).catch(m=>{mh(m,t,0)});t.asyncDep=c}else op(t,c)}else Gm(t)}function op(t,e,n){Pn(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:pi(e)&&(t.setupState=pm(e)),Gm(t)}function Gm(t,e,n){const r=t.type;t.render||(t.render=r.render||ua);{const o=uc(t);ml();try{F_(t)}finally{gl(),o()}}}const wv={get(t,e){return Vr(t,"get",""),t[e]}};function xv(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,wv),slots:t.slots,emit:t.emit,expose:e}}function bh(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(pm(gd(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Vu)return Vu[n](t)},has(e,n){return n in e||n in Vu}})):t.proxy}function Lv(t,e=!0){return Pn(t)?t.displayName||t.name:t.name||e&&t.__name}function Cv(t){return Pn(t)&&"__vccOpts"in t}const Nn=(t,e)=>m_(t,e,ec);function Vm(t,e,n){const r=arguments.length;return r===2?pi(e)&&!pn(e)?Qc(e)?Di(t,null,[e]):Di(t,e):Di(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Qc(n)&&(n=[n]),Di(t,e,n))}const kv="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Af;const ap=typeof window<"u"&&window.trustedTypes;if(ap)try{Af=ap.createPolicy("vue",{createHTML:t=>t})}catch{}const Hm=Af?t=>Af.createHTML(t):t=>t,Pv="http://www.w3.org/2000/svg",Sv="http://www.w3.org/1998/Math/MathML",Ta=typeof document<"u"?document:null,lp=Ta&&Ta.createElement("template"),Ev={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const o=e==="svg"?Ta.createElementNS(Pv,t):e==="mathml"?Ta.createElementNS(Sv,t):n?Ta.createElement(t,{is:n}):Ta.createElement(t);return t==="select"&&r&&r.multiple!=null&&o.setAttribute("multiple",r.multiple),o},createText:t=>Ta.createTextNode(t),createComment:t=>Ta.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ta.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,o,l){const c=n?n.previousSibling:e.lastChild;if(o&&(o===l||o.nextSibling))for(;e.insertBefore(o.cloneNode(!0),n),!(o===l||!(o=o.nextSibling)););else{lp.innerHTML=Hm(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const d=lp.content;if(r==="svg"||r==="mathml"){const m=d.firstChild;for(;m.firstChild;)d.appendChild(m.firstChild);d.removeChild(m)}e.insertBefore(d,n)}return[c?c.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Mv=Symbol("_vtc");function Av(t,e,n){const r=t[Mv];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const eh=Symbol("_vod"),Wm=Symbol("_vsh"),up={beforeMount(t,{value:e},{transition:n}){t[eh]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Tu(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Tu(t,!0),r.enter(t)):r.leave(t,()=>{Tu(t,!1)}):Tu(t,e))},beforeUnmount(t,{value:e}){Tu(t,e)}};function Tu(t,e){t.style.display=e?t[eh]:"none",t[Wm]=!e}const Bv=Symbol(""),Tv=/(^|;)\s*display\s*:/;function Nv(t,e,n){const r=t.style,o=Ji(n);let l=!1;if(n&&!o){if(e)if(Ji(e))for(const c of e.split(";")){const d=c.slice(0,c.indexOf(":")).trim();n[d]==null&&Rc(r,d,"")}else for(const c in e)n[c]==null&&Rc(r,c,"");for(const c in n)c==="display"&&(l=!0),Rc(r,c,n[c])}else if(o){if(e!==n){const c=r[Bv];c&&(n+=";"+c),r.cssText=n,l=Tv.test(n)}}else e&&t.removeAttribute("style");eh in t&&(t[eh]=l?r.display:"",t[Wm]&&(r.display="none"))}const cp=/\s*!important$/;function Rc(t,e,n){if(pn(n))n.forEach(r=>Rc(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=Dv(t,e);cp.test(n)?t.setProperty(Gl(r),n.replace(cp,""),"important"):t[r]=n}}const hp=["Webkit","Moz","ms"],Jh={};function Dv(t,e){const n=Jh[e];if(n)return n;let r=mo(e);if(r!=="filter"&&r in t)return Jh[e]=r;r=hh(r);for(let o=0;o<hp.length;o++){const l=hp[o]+r;if(l in t)return Jh[e]=l}return e}const fp="http://www.w3.org/1999/xlink";function dp(t,e,n,r,o,l=z1(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(fp,e.slice(6,e.length)):t.setAttributeNS(fp,e,n):n==null||l&&!V0(n)?t.removeAttribute(e):t.setAttribute(e,l?"":ha(n)?String(n):n)}function pp(t,e,n,r,o){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Hm(n):n);return}const l=t.tagName;if(e==="value"&&l!=="PROGRESS"&&!l.includes("-")){const d=l==="OPTION"?t.getAttribute("value")||"":t.value,m=n==null?t.type==="checkbox"?"on":"":String(n);(d!==m||!("_value"in t))&&(t.value=m),n==null&&t.removeAttribute(e),t._value=n;return}let c=!1;if(n===""||n==null){const d=typeof t[e];d==="boolean"?n=V0(n):n==null&&d==="string"?(n="",c=!0):d==="number"&&(n=0,c=!0)}try{t[e]=n}catch{}c&&t.removeAttribute(o||e)}function Oa(t,e,n,r){t.addEventListener(e,n,r)}function Ov(t,e,n,r){t.removeEventListener(e,n,r)}const mp=Symbol("_vei");function Iv(t,e,n,r,o=null){const l=t[mp]||(t[mp]={}),c=l[e];if(r&&c)c.value=r;else{const[d,m]=Rv(e);if(r){const y=l[e]=zv(r,o);Oa(t,d,y,m)}else c&&(Ov(t,d,c,m),l[e]=void 0)}}const gp=/(?:Once|Passive|Capture)$/;function Rv(t){let e;if(gp.test(t)){e={};let r;for(;r=t.match(gp);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Gl(t.slice(2)),e]}let Xh=0;const Fv=Promise.resolve(),jv=()=>Xh||(Fv.then(()=>Xh=0),Xh=Date.now());function zv(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;fa(Uv(r,n.value),e,5,[r])};return n.value=t,n.attached=jv(),n}function Uv(t,e){if(pn(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>o=>!o._stopped&&r&&r(o))}else return e}const _p=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,qv=(t,e,n,r,o,l)=>{const c=o==="svg";e==="class"?Av(t,r,c):e==="style"?Nv(t,n,r):uh(e)?sd(e)||Iv(t,e,n,r,l):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):$v(t,e,r,c))?(pp(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&dp(t,e,r,c,l,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Ji(r))?pp(t,mo(e),r,l,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),dp(t,e,r,c))};function $v(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&_p(e)&&Pn(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const o=t.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return _p(e)&&Ji(n)?!1:e in t}const fl=t=>{const e=t.props["onUpdate:modelValue"]||!1;return pn(e)?n=>Nc(e,n):e};function Gv(t){t.target.composing=!0}function vp(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const po=Symbol("_assign"),Bi={created(t,{modifiers:{lazy:e,trim:n,number:r}},o){t[po]=fl(o);const l=r||o.props&&o.props.type==="number";Oa(t,e?"change":"input",c=>{if(c.target.composing)return;let d=t.value;n&&(d=d.trim()),l&&(d=Hc(d)),t[po](d)}),n&&Oa(t,"change",()=>{t.value=t.value.trim()}),e||(Oa(t,"compositionstart",Gv),Oa(t,"compositionend",vp),Oa(t,"change",vp))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:o,number:l}},c){if(t[po]=fl(c),t.composing)return;const d=(l||t.type==="number")&&!/^0\d/.test(t.value)?Hc(t.value):t.value,m=e??"";d!==m&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||o&&t.value.trim()===m)||(t.value=m))}},Zm={deep:!0,created(t,e,n){t[po]=fl(n),Oa(t,"change",()=>{const r=t._modelValue,o=vu(t),l=t.checked,c=t[po];if(pn(r)){const d=ld(r,o),m=d!==-1;if(l&&!m)c(r.concat(o));else if(!l&&m){const y=[...r];y.splice(d,1),c(y)}}else if(wu(r)){const d=new Set(r);l?d.add(o):d.delete(o),c(d)}else c(Km(t,l))})},mounted:yp,beforeUpdate(t,e,n){t[po]=fl(n),yp(t,e,n)}};function yp(t,{value:e,oldValue:n},r){t._modelValue=e;let o;if(pn(e))o=ld(e,r.props.value)>-1;else if(wu(e))o=e.has(r.props.value);else{if(e===n)return;o=zl(e,Km(t,!0))}t.checked!==o&&(t.checked=o)}const Vv={created(t,{value:e},n){t.checked=zl(e,n.props.value),t[po]=fl(n),Oa(t,"change",()=>{t[po](vu(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[po]=fl(r),e!==n&&(t.checked=zl(e,r.props.value))}},$s={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const o=wu(e);Oa(t,"change",()=>{const l=Array.prototype.filter.call(t.options,c=>c.selected).map(c=>n?Hc(vu(c)):vu(c));t[po](t.multiple?o?new Set(l):l:l[0]),t._assigning=!0,lc(()=>{t._assigning=!1})}),t[po]=fl(r)},mounted(t,{value:e}){bp(t,e)},beforeUpdate(t,e,n){t[po]=fl(n)},updated(t,{value:e}){t._assigning||bp(t,e)}};function bp(t,e){const n=t.multiple,r=pn(e);if(!(n&&!r&&!wu(e))){for(let o=0,l=t.options.length;o<l;o++){const c=t.options[o],d=vu(c);if(n)if(r){const m=typeof d;m==="string"||m==="number"?c.selected=e.some(y=>String(y)===String(d)):c.selected=ld(e,d)>-1}else c.selected=e.has(d);else if(zl(vu(c),e)){t.selectedIndex!==o&&(t.selectedIndex=o);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function vu(t){return"_value"in t?t._value:t.value}function Km(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const Hv={created(t,e,n){Pc(t,e,n,null,"created")},mounted(t,e,n){Pc(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){Pc(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){Pc(t,e,n,r,"updated")}};function Wv(t,e){switch(t){case"SELECT":return $s;case"TEXTAREA":return Bi;default:switch(e){case"checkbox":return Zm;case"radio":return Vv;default:return Bi}}}function Pc(t,e,n,r,o){const c=Wv(t.tagName,n.props&&n.props.type)[o];c&&c(t,e,n,r)}const Zv=["ctrl","shift","alt","meta"],Kv={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Zv.some(n=>t[`${n}Key`]&&!e.includes(n))},wh=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(o,...l)=>{for(let c=0;c<e.length;c++){const d=Kv[e[c]];if(d&&d(o,e))return}return t(o,...l)})},Yv=Yr({patchProp:qv},Ev);let wp;function Jv(){return wp||(wp=X_(Yv))}const Xv=(...t)=>{const e=Jv().createApp(...t),{mount:n}=e;return e.mount=r=>{const o=ty(r);if(!o)return;const l=e._component;!Pn(l)&&!l.render&&!l.template&&(l.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const c=n(o,!1,Qv(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),c},e};function Qv(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function ty(t){return Ji(t)?document.querySelector(t):t}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Ym;const xh=t=>Ym=t,Jm=Symbol();function Bf(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Wu;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Wu||(Wu={}));function ey(){const t=K0(!0),e=t.run(()=>Re({}));let n=[],r=[];const o=gd({install(l){xh(o),o._a=l,l.provide(Jm,o),l.config.globalProperties.$pinia=o,r.forEach(c=>n.push(c)),r=[]},use(l){return this._a?n.push(l):r.push(l),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return o}const Xm=()=>{};function xp(t,e,n,r=Xm){t.push(e);const o=()=>{const l=t.indexOf(e);l>-1&&(t.splice(l,1),r())};return!n&&Y0()&&q1(o),o}function eu(t,...e){t.slice().forEach(n=>{n(...e)})}const ny=t=>t(),Lp=Symbol(),Qh=Symbol();function Tf(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],o=t[n];Bf(o)&&Bf(r)&&t.hasOwnProperty(n)&&!qi(r)&&!hl(r)?t[n]=Tf(o,r):t[n]=r}return t}const iy=Symbol();function ry(t){return!Bf(t)||!t.hasOwnProperty(iy)}const{assign:sl}=Object;function sy(t){return!!(qi(t)&&t.effect)}function oy(t,e,n,r){const{state:o,actions:l,getters:c}=e,d=n.state.value[t];let m;function y(){d||(n.state.value[t]=o?o():{});const b=h_(n.state.value[t]);return sl(b,l,Object.keys(c||{}).reduce((w,E)=>(w[E]=gd(Nn(()=>{xh(n);const C=n._s.get(t);return c[E].call(C,C)})),w),{}))}return m=Qm(t,y,e,n,r,!0),m}function Qm(t,e,n={},r,o,l){let c;const d=sl({actions:{}},n),m={deep:!0};let y,b,w=[],E=[],C;const R=r.state.value[t];!l&&!R&&(r.state.value[t]={}),Re({});let O;function q(ct){let Bt;y=b=!1,typeof ct=="function"?(ct(r.state.value[t]),Bt={type:Wu.patchFunction,storeId:t,events:C}):(Tf(r.state.value[t],ct),Bt={type:Wu.patchObject,payload:ct,storeId:t,events:C});const Yt=O=Symbol();lc().then(()=>{O===Yt&&(y=!0)}),b=!0,eu(w,Bt,r.state.value[t])}const F=l?function(){const{state:Bt}=n,Yt=Bt?Bt():{};this.$patch($=>{sl($,Yt)})}:Xm;function V(){c.stop(),w=[],E=[],r._s.delete(t)}const Y=(ct,Bt="")=>{if(Lp in ct)return ct[Qh]=Bt,ct;const Yt=function(){xh(r);const $=Array.from(arguments),J=[],I=[];function nt(_t){J.push(_t)}function K(_t){I.push(_t)}eu(E,{args:$,name:Yt[Qh],store:kt,after:nt,onError:K});let tt;try{tt=ct.apply(this&&this.$id===t?this:kt,$)}catch(_t){throw eu(I,_t),_t}return tt instanceof Promise?tt.then(_t=>(eu(J,_t),_t)).catch(_t=>(eu(I,_t),Promise.reject(_t))):(eu(J,tt),tt)};return Yt[Lp]=!0,Yt[Qh]=Bt,Yt},Ct={_p:r,$id:t,$onAction:xp.bind(null,E),$patch:q,$reset:F,$subscribe(ct,Bt={}){const Yt=xp(w,ct,Bt.detached,()=>$()),$=c.run(()=>us(()=>r.state.value[t],J=>{(Bt.flush==="sync"?b:y)&&ct({storeId:t,type:Wu.direct,events:C},J)},sl({},m,Bt)));return Yt},$dispose:V},kt=Fa(Ct);r._s.set(t,kt);const et=(r._a&&r._a.runWithContext||ny)(()=>r._e.run(()=>(c=K0()).run(()=>e({action:Y}))));for(const ct in et){const Bt=et[ct];if(qi(Bt)&&!sy(Bt)||hl(Bt))l||(R&&ry(Bt)&&(qi(Bt)?Bt.value=R[ct]:Tf(Bt,R[ct])),r.state.value[t][ct]=Bt);else if(typeof Bt=="function"){const Yt=Y(Bt,ct);et[ct]=Yt,d.actions[ct]=Bt}}return sl(kt,et),sl(Yn(kt),et),Object.defineProperty(kt,"$state",{get:()=>r.state.value[t],set:ct=>{q(Bt=>{sl(Bt,ct)})}}),r._p.forEach(ct=>{sl(kt,c.run(()=>ct({store:kt,app:r._a,pinia:r,options:d})))}),R&&l&&n.hydrate&&n.hydrate(kt.$state,R),y=!0,b=!0,kt}/*! #__NO_SIDE_EFFECTS__ */function xd(t,e,n){let r,o;const l=typeof e=="function";typeof t=="string"?(r=t,o=l?n:e):(o=t,r=t.id);function c(d,m){const y=V_();return d=d||(y?fo(Jm,null):null),d&&xh(d),d=Ym,d._s.has(r)||(l?Qm(r,e,o,d):oy(r,o,d)),d._s.get(r)}return c.$id=r,c}function tg(t,e){return function(){return t.apply(e,arguments)}}const{toString:ay}=Object.prototype,{getPrototypeOf:Ld}=Object,Lh=(t=>e=>{const n=ay.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Fo=t=>(t=t.toLowerCase(),e=>Lh(e)===t),Ch=t=>e=>typeof e===t,{isArray:xu}=Array,nc=Ch("undefined");function ly(t){return t!==null&&!nc(t)&&t.constructor!==null&&!nc(t.constructor)&&Hs(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const eg=Fo("ArrayBuffer");function uy(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&eg(t.buffer),e}const cy=Ch("string"),Hs=Ch("function"),ng=Ch("number"),kh=t=>t!==null&&typeof t=="object",hy=t=>t===!0||t===!1,Fc=t=>{if(Lh(t)!=="object")return!1;const e=Ld(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},fy=Fo("Date"),dy=Fo("File"),py=Fo("Blob"),my=Fo("FileList"),gy=t=>kh(t)&&Hs(t.pipe),_y=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Hs(t.append)&&((e=Lh(t))==="formdata"||e==="object"&&Hs(t.toString)&&t.toString()==="[object FormData]"))},vy=Fo("URLSearchParams"),[yy,by,wy,xy]=["ReadableStream","Request","Response","Headers"].map(Fo),Ly=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function cc(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,o;if(typeof t!="object"&&(t=[t]),xu(t))for(r=0,o=t.length;r<o;r++)e.call(null,t[r],r,t);else{const l=n?Object.getOwnPropertyNames(t):Object.keys(t),c=l.length;let d;for(r=0;r<c;r++)d=l[r],e.call(null,t[d],d,t)}}function ig(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,o;for(;r-- >0;)if(o=n[r],e===o.toLowerCase())return o;return null}const Nl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,rg=t=>!nc(t)&&t!==Nl;function Nf(){const{caseless:t}=rg(this)&&this||{},e={},n=(r,o)=>{const l=t&&ig(e,o)||o;Fc(e[l])&&Fc(r)?e[l]=Nf(e[l],r):Fc(r)?e[l]=Nf({},r):xu(r)?e[l]=r.slice():e[l]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&cc(arguments[r],n);return e}const Cy=(t,e,n,{allOwnKeys:r}={})=>(cc(e,(o,l)=>{n&&Hs(o)?t[l]=tg(o,n):t[l]=o},{allOwnKeys:r}),t),ky=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Py=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Sy=(t,e,n,r)=>{let o,l,c;const d={};if(e=e||{},t==null)return e;do{for(o=Object.getOwnPropertyNames(t),l=o.length;l-- >0;)c=o[l],(!r||r(c,t,e))&&!d[c]&&(e[c]=t[c],d[c]=!0);t=n!==!1&&Ld(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Ey=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},My=t=>{if(!t)return null;if(xu(t))return t;let e=t.length;if(!ng(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Ay=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Ld(Uint8Array)),By=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let o;for(;(o=r.next())&&!o.done;){const l=o.value;e.call(t,l[0],l[1])}},Ty=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},Ny=Fo("HTMLFormElement"),Dy=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,o){return r.toUpperCase()+o}),Cp=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Oy=Fo("RegExp"),sg=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};cc(n,(o,l)=>{let c;(c=e(o,l,t))!==!1&&(r[l]=c||o)}),Object.defineProperties(t,r)},Iy=t=>{sg(t,(e,n)=>{if(Hs(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Hs(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Ry=(t,e)=>{const n={},r=o=>{o.forEach(l=>{n[l]=!0})};return xu(t)?r(t):r(String(t).split(e)),n},Fy=()=>{},jy=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,tf="abcdefghijklmnopqrstuvwxyz",kp="0123456789",og={DIGIT:kp,ALPHA:tf,ALPHA_DIGIT:tf+tf.toUpperCase()+kp},zy=(t=16,e=og.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function Uy(t){return!!(t&&Hs(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const qy=t=>{const e=new Array(10),n=(r,o)=>{if(kh(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[o]=r;const l=xu(r)?[]:{};return cc(r,(c,d)=>{const m=n(c,o+1);!nc(m)&&(l[d]=m)}),e[o]=void 0,l}}return r};return n(t,0)},$y=Fo("AsyncFunction"),Gy=t=>t&&(kh(t)||Hs(t))&&Hs(t.then)&&Hs(t.catch),ag=((t,e)=>t?setImmediate:e?((n,r)=>(Nl.addEventListener("message",({source:o,data:l})=>{o===Nl&&l===n&&r.length&&r.shift()()},!1),o=>{r.push(o),Nl.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Hs(Nl.postMessage)),Vy=typeof queueMicrotask<"u"?queueMicrotask.bind(Nl):typeof process<"u"&&process.nextTick||ag,we={isArray:xu,isArrayBuffer:eg,isBuffer:ly,isFormData:_y,isArrayBufferView:uy,isString:cy,isNumber:ng,isBoolean:hy,isObject:kh,isPlainObject:Fc,isReadableStream:yy,isRequest:by,isResponse:wy,isHeaders:xy,isUndefined:nc,isDate:fy,isFile:dy,isBlob:py,isRegExp:Oy,isFunction:Hs,isStream:gy,isURLSearchParams:vy,isTypedArray:Ay,isFileList:my,forEach:cc,merge:Nf,extend:Cy,trim:Ly,stripBOM:ky,inherits:Py,toFlatObject:Sy,kindOf:Lh,kindOfTest:Fo,endsWith:Ey,toArray:My,forEachEntry:By,matchAll:Ty,isHTMLForm:Ny,hasOwnProperty:Cp,hasOwnProp:Cp,reduceDescriptors:sg,freezeMethods:Iy,toObjectSet:Ry,toCamelCase:Dy,noop:Fy,toFiniteNumber:jy,findKey:ig,global:Nl,isContextDefined:rg,ALPHABET:og,generateString:zy,isSpecCompliantForm:Uy,toJSONObject:qy,isAsyncFn:$y,isThenable:Gy,setImmediate:ag,asap:Vy};function An(t,e,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}we.inherits(An,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:we.toJSONObject(this.config),code:this.code,status:this.status}}});const lg=An.prototype,ug={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{ug[t]={value:t}});Object.defineProperties(An,ug);Object.defineProperty(lg,"isAxiosError",{value:!0});An.from=(t,e,n,r,o,l)=>{const c=Object.create(lg);return we.toFlatObject(t,c,function(m){return m!==Error.prototype},d=>d!=="isAxiosError"),An.call(c,t.message,e,n,r,o),c.cause=t,c.name=t.name,l&&Object.assign(c,l),c};const Hy=null;function Df(t){return we.isPlainObject(t)||we.isArray(t)}function cg(t){return we.endsWith(t,"[]")?t.slice(0,-2):t}function Pp(t,e,n){return t?t.concat(e).map(function(o,l){return o=cg(o),!n&&l?"["+o+"]":o}).join(n?".":""):e}function Wy(t){return we.isArray(t)&&!t.some(Df)}const Zy=we.toFlatObject(we,{},null,function(e){return/^is[A-Z]/.test(e)});function Ph(t,e,n){if(!we.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=we.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(O,q){return!we.isUndefined(q[O])});const r=n.metaTokens,o=n.visitor||b,l=n.dots,c=n.indexes,m=(n.Blob||typeof Blob<"u"&&Blob)&&we.isSpecCompliantForm(e);if(!we.isFunction(o))throw new TypeError("visitor must be a function");function y(R){if(R===null)return"";if(we.isDate(R))return R.toISOString();if(!m&&we.isBlob(R))throw new An("Blob is not supported. Use a Buffer instead.");return we.isArrayBuffer(R)||we.isTypedArray(R)?m&&typeof Blob=="function"?new Blob([R]):Buffer.from(R):R}function b(R,O,q){let F=R;if(R&&!q&&typeof R=="object"){if(we.endsWith(O,"{}"))O=r?O:O.slice(0,-2),R=JSON.stringify(R);else if(we.isArray(R)&&Wy(R)||(we.isFileList(R)||we.endsWith(O,"[]"))&&(F=we.toArray(R)))return O=cg(O),F.forEach(function(Y,Ct){!(we.isUndefined(Y)||Y===null)&&e.append(c===!0?Pp([O],Ct,l):c===null?O:O+"[]",y(Y))}),!1}return Df(R)?!0:(e.append(Pp(q,O,l),y(R)),!1)}const w=[],E=Object.assign(Zy,{defaultVisitor:b,convertValue:y,isVisitable:Df});function C(R,O){if(!we.isUndefined(R)){if(w.indexOf(R)!==-1)throw Error("Circular reference detected in "+O.join("."));w.push(R),we.forEach(R,function(F,V){(!(we.isUndefined(F)||F===null)&&o.call(e,F,we.isString(V)?V.trim():V,O,E))===!0&&C(F,O?O.concat(V):[V])}),w.pop()}}if(!we.isObject(t))throw new TypeError("data must be an object");return C(t),e}function Sp(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Cd(t,e){this._pairs=[],t&&Ph(t,this,e)}const hg=Cd.prototype;hg.append=function(e,n){this._pairs.push([e,n])};hg.toString=function(e){const n=e?function(r){return e.call(this,r,Sp)}:Sp;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function Ky(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function fg(t,e,n){if(!e)return t;const r=n&&n.encode||Ky;we.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let l;if(o?l=o(e,n):l=we.isURLSearchParams(e)?e.toString():new Cd(e,n).toString(r),l){const c=t.indexOf("#");c!==-1&&(t=t.slice(0,c)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class Ep{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){we.forEach(this.handlers,function(r){r!==null&&e(r)})}}const dg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Yy=typeof URLSearchParams<"u"?URLSearchParams:Cd,Jy=typeof FormData<"u"?FormData:null,Xy=typeof Blob<"u"?Blob:null,Qy={isBrowser:!0,classes:{URLSearchParams:Yy,FormData:Jy,Blob:Xy},protocols:["http","https","file","blob","url","data"]},kd=typeof window<"u"&&typeof document<"u",Of=typeof navigator=="object"&&navigator||void 0,t2=kd&&(!Of||["ReactNative","NativeScript","NS"].indexOf(Of.product)<0),e2=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",n2=kd&&window.location.href||"http://localhost",i2=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:kd,hasStandardBrowserEnv:t2,hasStandardBrowserWebWorkerEnv:e2,navigator:Of,origin:n2},Symbol.toStringTag,{value:"Module"})),Wr={...i2,...Qy};function r2(t,e){return Ph(t,new Wr.classes.URLSearchParams,Object.assign({visitor:function(n,r,o,l){return Wr.isNode&&we.isBuffer(n)?(this.append(r,n.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},e))}function s2(t){return we.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function o2(t){const e={},n=Object.keys(t);let r;const o=n.length;let l;for(r=0;r<o;r++)l=n[r],e[l]=t[l];return e}function pg(t){function e(n,r,o,l){let c=n[l++];if(c==="__proto__")return!0;const d=Number.isFinite(+c),m=l>=n.length;return c=!c&&we.isArray(o)?o.length:c,m?(we.hasOwnProp(o,c)?o[c]=[o[c],r]:o[c]=r,!d):((!o[c]||!we.isObject(o[c]))&&(o[c]=[]),e(n,r,o[c],l)&&we.isArray(o[c])&&(o[c]=o2(o[c])),!d)}if(we.isFormData(t)&&we.isFunction(t.entries)){const n={};return we.forEachEntry(t,(r,o)=>{e(s2(r),o,n,0)}),n}return null}function a2(t,e,n){if(we.isString(t))try{return(e||JSON.parse)(t),we.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const hc={transitional:dg,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",o=r.indexOf("application/json")>-1,l=we.isObject(e);if(l&&we.isHTMLForm(e)&&(e=new FormData(e)),we.isFormData(e))return o?JSON.stringify(pg(e)):e;if(we.isArrayBuffer(e)||we.isBuffer(e)||we.isStream(e)||we.isFile(e)||we.isBlob(e)||we.isReadableStream(e))return e;if(we.isArrayBufferView(e))return e.buffer;if(we.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(l){if(r.indexOf("application/x-www-form-urlencoded")>-1)return r2(e,this.formSerializer).toString();if((d=we.isFileList(e))||r.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return Ph(d?{"files[]":e}:e,m&&new m,this.formSerializer)}}return l||o?(n.setContentType("application/json",!1),a2(e)):e}],transformResponse:[function(e){const n=this.transitional||hc.transitional,r=n&&n.forcedJSONParsing,o=this.responseType==="json";if(we.isResponse(e)||we.isReadableStream(e))return e;if(e&&we.isString(e)&&(r&&!this.responseType||o)){const c=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(d){if(c)throw d.name==="SyntaxError"?An.from(d,An.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Wr.classes.FormData,Blob:Wr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};we.forEach(["delete","get","head","post","put","patch"],t=>{hc.headers[t]={}});const l2=we.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),u2=t=>{const e={};let n,r,o;return t&&t.split(`
`).forEach(function(c){o=c.indexOf(":"),n=c.substring(0,o).trim().toLowerCase(),r=c.substring(o+1).trim(),!(!n||e[n]&&l2[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},Mp=Symbol("internals");function Nu(t){return t&&String(t).trim().toLowerCase()}function jc(t){return t===!1||t==null?t:we.isArray(t)?t.map(jc):String(t)}function c2(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const h2=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function ef(t,e,n,r,o){if(we.isFunction(r))return r.call(this,e,n);if(o&&(e=n),!!we.isString(e)){if(we.isString(r))return e.indexOf(r)!==-1;if(we.isRegExp(r))return r.test(e)}}function f2(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function d2(t,e){const n=we.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(o,l,c){return this[r].call(this,e,o,l,c)},configurable:!0})})}let Ss=class{constructor(e){e&&this.set(e)}set(e,n,r){const o=this;function l(d,m,y){const b=Nu(m);if(!b)throw new Error("header name must be a non-empty string");const w=we.findKey(o,b);(!w||o[w]===void 0||y===!0||y===void 0&&o[w]!==!1)&&(o[w||m]=jc(d))}const c=(d,m)=>we.forEach(d,(y,b)=>l(y,b,m));if(we.isPlainObject(e)||e instanceof this.constructor)c(e,n);else if(we.isString(e)&&(e=e.trim())&&!h2(e))c(u2(e),n);else if(we.isHeaders(e))for(const[d,m]of e.entries())l(m,d,r);else e!=null&&l(n,e,r);return this}get(e,n){if(e=Nu(e),e){const r=we.findKey(this,e);if(r){const o=this[r];if(!n)return o;if(n===!0)return c2(o);if(we.isFunction(n))return n.call(this,o,r);if(we.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Nu(e),e){const r=we.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||ef(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let o=!1;function l(c){if(c=Nu(c),c){const d=we.findKey(r,c);d&&(!n||ef(r,r[d],d,n))&&(delete r[d],o=!0)}}return we.isArray(e)?e.forEach(l):l(e),o}clear(e){const n=Object.keys(this);let r=n.length,o=!1;for(;r--;){const l=n[r];(!e||ef(this,this[l],l,e,!0))&&(delete this[l],o=!0)}return o}normalize(e){const n=this,r={};return we.forEach(this,(o,l)=>{const c=we.findKey(r,l);if(c){n[c]=jc(o),delete n[l];return}const d=e?f2(l):String(l).trim();d!==l&&delete n[l],n[d]=jc(o),r[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return we.forEach(this,(r,o)=>{r!=null&&r!==!1&&(n[o]=e&&we.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(o=>r.set(o)),r}static accessor(e){const r=(this[Mp]=this[Mp]={accessors:{}}).accessors,o=this.prototype;function l(c){const d=Nu(c);r[d]||(d2(o,c),r[d]=!0)}return we.isArray(e)?e.forEach(l):l(e),this}};Ss.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);we.reduceDescriptors(Ss.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});we.freezeMethods(Ss);function nf(t,e){const n=this||hc,r=e||n,o=Ss.from(r.headers);let l=r.data;return we.forEach(t,function(d){l=d.call(n,l,o.normalize(),e?e.status:void 0)}),o.normalize(),l}function mg(t){return!!(t&&t.__CANCEL__)}function Lu(t,e,n){An.call(this,t??"canceled",An.ERR_CANCELED,e,n),this.name="CanceledError"}we.inherits(Lu,An,{__CANCEL__:!0});function gg(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new An("Request failed with status code "+n.status,[An.ERR_BAD_REQUEST,An.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function p2(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function m2(t,e){t=t||10;const n=new Array(t),r=new Array(t);let o=0,l=0,c;return e=e!==void 0?e:1e3,function(m){const y=Date.now(),b=r[l];c||(c=y),n[o]=m,r[o]=y;let w=l,E=0;for(;w!==o;)E+=n[w++],w=w%t;if(o=(o+1)%t,o===l&&(l=(l+1)%t),y-c<e)return;const C=b&&y-b;return C?Math.round(E*1e3/C):void 0}}function g2(t,e){let n=0,r=1e3/e,o,l;const c=(y,b=Date.now())=>{n=b,o=null,l&&(clearTimeout(l),l=null),t.apply(null,y)};return[(...y)=>{const b=Date.now(),w=b-n;w>=r?c(y,b):(o=y,l||(l=setTimeout(()=>{l=null,c(o)},r-w)))},()=>o&&c(o)]}const nh=(t,e,n=3)=>{let r=0;const o=m2(50,250);return g2(l=>{const c=l.loaded,d=l.lengthComputable?l.total:void 0,m=c-r,y=o(m),b=c<=d;r=c;const w={loaded:c,total:d,progress:d?c/d:void 0,bytes:m,rate:y||void 0,estimated:y&&d&&b?(d-c)/y:void 0,event:l,lengthComputable:d!=null,[e?"download":"upload"]:!0};t(w)},n)},Ap=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},Bp=t=>(...e)=>we.asap(()=>t(...e)),_2=Wr.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Wr.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Wr.origin),Wr.navigator&&/(msie|trident)/i.test(Wr.navigator.userAgent)):()=>!0,v2=Wr.hasStandardBrowserEnv?{write(t,e,n,r,o,l){const c=[t+"="+encodeURIComponent(e)];we.isNumber(n)&&c.push("expires="+new Date(n).toGMTString()),we.isString(r)&&c.push("path="+r),we.isString(o)&&c.push("domain="+o),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function y2(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function b2(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function _g(t,e){return t&&!y2(e)?b2(t,e):e}const Tp=t=>t instanceof Ss?{...t}:t;function $l(t,e){e=e||{};const n={};function r(y,b,w,E){return we.isPlainObject(y)&&we.isPlainObject(b)?we.merge.call({caseless:E},y,b):we.isPlainObject(b)?we.merge({},b):we.isArray(b)?b.slice():b}function o(y,b,w,E){if(we.isUndefined(b)){if(!we.isUndefined(y))return r(void 0,y,w,E)}else return r(y,b,w,E)}function l(y,b){if(!we.isUndefined(b))return r(void 0,b)}function c(y,b){if(we.isUndefined(b)){if(!we.isUndefined(y))return r(void 0,y)}else return r(void 0,b)}function d(y,b,w){if(w in e)return r(y,b);if(w in t)return r(void 0,y)}const m={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:d,headers:(y,b,w)=>o(Tp(y),Tp(b),w,!0)};return we.forEach(Object.keys(Object.assign({},t,e)),function(b){const w=m[b]||o,E=w(t[b],e[b],b);we.isUndefined(E)&&w!==d||(n[b]=E)}),n}const vg=t=>{const e=$l({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:l,headers:c,auth:d}=e;e.headers=c=Ss.from(c),e.url=fg(_g(e.baseURL,e.url),t.params,t.paramsSerializer),d&&c.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):"")));let m;if(we.isFormData(n)){if(Wr.hasStandardBrowserEnv||Wr.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((m=c.getContentType())!==!1){const[y,...b]=m?m.split(";").map(w=>w.trim()).filter(Boolean):[];c.setContentType([y||"multipart/form-data",...b].join("; "))}}if(Wr.hasStandardBrowserEnv&&(r&&we.isFunction(r)&&(r=r(e)),r||r!==!1&&_2(e.url))){const y=o&&l&&v2.read(l);y&&c.set(o,y)}return e},w2=typeof XMLHttpRequest<"u",x2=w2&&function(t){return new Promise(function(n,r){const o=vg(t);let l=o.data;const c=Ss.from(o.headers).normalize();let{responseType:d,onUploadProgress:m,onDownloadProgress:y}=o,b,w,E,C,R;function O(){C&&C(),R&&R(),o.cancelToken&&o.cancelToken.unsubscribe(b),o.signal&&o.signal.removeEventListener("abort",b)}let q=new XMLHttpRequest;q.open(o.method.toUpperCase(),o.url,!0),q.timeout=o.timeout;function F(){if(!q)return;const Y=Ss.from("getAllResponseHeaders"in q&&q.getAllResponseHeaders()),kt={data:!d||d==="text"||d==="json"?q.responseText:q.response,status:q.status,statusText:q.statusText,headers:Y,config:t,request:q};gg(function(et){n(et),O()},function(et){r(et),O()},kt),q=null}"onloadend"in q?q.onloadend=F:q.onreadystatechange=function(){!q||q.readyState!==4||q.status===0&&!(q.responseURL&&q.responseURL.indexOf("file:")===0)||setTimeout(F)},q.onabort=function(){q&&(r(new An("Request aborted",An.ECONNABORTED,t,q)),q=null)},q.onerror=function(){r(new An("Network Error",An.ERR_NETWORK,t,q)),q=null},q.ontimeout=function(){let Ct=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const kt=o.transitional||dg;o.timeoutErrorMessage&&(Ct=o.timeoutErrorMessage),r(new An(Ct,kt.clarifyTimeoutError?An.ETIMEDOUT:An.ECONNABORTED,t,q)),q=null},l===void 0&&c.setContentType(null),"setRequestHeader"in q&&we.forEach(c.toJSON(),function(Ct,kt){q.setRequestHeader(kt,Ct)}),we.isUndefined(o.withCredentials)||(q.withCredentials=!!o.withCredentials),d&&d!=="json"&&(q.responseType=o.responseType),y&&([E,R]=nh(y,!0),q.addEventListener("progress",E)),m&&q.upload&&([w,C]=nh(m),q.upload.addEventListener("progress",w),q.upload.addEventListener("loadend",C)),(o.cancelToken||o.signal)&&(b=Y=>{q&&(r(!Y||Y.type?new Lu(null,t,q):Y),q.abort(),q=null)},o.cancelToken&&o.cancelToken.subscribe(b),o.signal&&(o.signal.aborted?b():o.signal.addEventListener("abort",b)));const V=p2(o.url);if(V&&Wr.protocols.indexOf(V)===-1){r(new An("Unsupported protocol "+V+":",An.ERR_BAD_REQUEST,t));return}q.send(l||null)})},L2=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,o;const l=function(y){if(!o){o=!0,d();const b=y instanceof Error?y:this.reason;r.abort(b instanceof An?b:new Lu(b instanceof Error?b.message:b))}};let c=e&&setTimeout(()=>{c=null,l(new An(`timeout ${e} of ms exceeded`,An.ETIMEDOUT))},e);const d=()=>{t&&(c&&clearTimeout(c),c=null,t.forEach(y=>{y.unsubscribe?y.unsubscribe(l):y.removeEventListener("abort",l)}),t=null)};t.forEach(y=>y.addEventListener("abort",l));const{signal:m}=r;return m.unsubscribe=()=>we.asap(d),m}},C2=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,o;for(;r<n;)o=r+e,yield t.slice(r,o),r=o},k2=async function*(t,e){for await(const n of P2(t))yield*C2(n,e)},P2=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},Np=(t,e,n,r)=>{const o=k2(t,e);let l=0,c,d=m=>{c||(c=!0,r&&r(m))};return new ReadableStream({async pull(m){try{const{done:y,value:b}=await o.next();if(y){d(),m.close();return}let w=b.byteLength;if(n){let E=l+=w;n(E)}m.enqueue(new Uint8Array(b))}catch(y){throw d(y),y}},cancel(m){return d(m),o.return()}},{highWaterMark:2})},Sh=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",yg=Sh&&typeof ReadableStream=="function",S2=Sh&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),bg=(t,...e)=>{try{return!!t(...e)}catch{return!1}},E2=yg&&bg(()=>{let t=!1;const e=new Request(Wr.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),Dp=64*1024,If=yg&&bg(()=>we.isReadableStream(new Response("").body)),ih={stream:If&&(t=>t.body)};Sh&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!ih[e]&&(ih[e]=we.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new An(`Response type '${e}' is not supported`,An.ERR_NOT_SUPPORT,r)})})})(new Response);const M2=async t=>{if(t==null)return 0;if(we.isBlob(t))return t.size;if(we.isSpecCompliantForm(t))return(await new Request(Wr.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(we.isArrayBufferView(t)||we.isArrayBuffer(t))return t.byteLength;if(we.isURLSearchParams(t)&&(t=t+""),we.isString(t))return(await S2(t)).byteLength},A2=async(t,e)=>{const n=we.toFiniteNumber(t.getContentLength());return n??M2(e)},B2=Sh&&(async t=>{let{url:e,method:n,data:r,signal:o,cancelToken:l,timeout:c,onDownloadProgress:d,onUploadProgress:m,responseType:y,headers:b,withCredentials:w="same-origin",fetchOptions:E}=vg(t);y=y?(y+"").toLowerCase():"text";let C=L2([o,l&&l.toAbortSignal()],c),R;const O=C&&C.unsubscribe&&(()=>{C.unsubscribe()});let q;try{if(m&&E2&&n!=="get"&&n!=="head"&&(q=await A2(b,r))!==0){let kt=new Request(e,{method:"POST",body:r,duplex:"half"}),wt;if(we.isFormData(r)&&(wt=kt.headers.get("content-type"))&&b.setContentType(wt),kt.body){const[et,ct]=Ap(q,nh(Bp(m)));r=Np(kt.body,Dp,et,ct)}}we.isString(w)||(w=w?"include":"omit");const F="credentials"in Request.prototype;R=new Request(e,{...E,signal:C,method:n.toUpperCase(),headers:b.normalize().toJSON(),body:r,duplex:"half",credentials:F?w:void 0});let V=await fetch(R);const Y=If&&(y==="stream"||y==="response");if(If&&(d||Y&&O)){const kt={};["status","statusText","headers"].forEach(Bt=>{kt[Bt]=V[Bt]});const wt=we.toFiniteNumber(V.headers.get("content-length")),[et,ct]=d&&Ap(wt,nh(Bp(d),!0))||[];V=new Response(Np(V.body,Dp,et,()=>{ct&&ct(),O&&O()}),kt)}y=y||"text";let Ct=await ih[we.findKey(ih,y)||"text"](V,t);return!Y&&O&&O(),await new Promise((kt,wt)=>{gg(kt,wt,{data:Ct,headers:Ss.from(V.headers),status:V.status,statusText:V.statusText,config:t,request:R})})}catch(F){throw O&&O(),F&&F.name==="TypeError"&&/fetch/i.test(F.message)?Object.assign(new An("Network Error",An.ERR_NETWORK,t,R),{cause:F.cause||F}):An.from(F,F&&F.code,t,R)}}),Rf={http:Hy,xhr:x2,fetch:B2};we.forEach(Rf,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Op=t=>`- ${t}`,T2=t=>we.isFunction(t)||t===null||t===!1,wg={getAdapter:t=>{t=we.isArray(t)?t:[t];const{length:e}=t;let n,r;const o={};for(let l=0;l<e;l++){n=t[l];let c;if(r=n,!T2(n)&&(r=Rf[(c=String(n)).toLowerCase()],r===void 0))throw new An(`Unknown adapter '${c}'`);if(r)break;o[c||"#"+l]=r}if(!r){const l=Object.entries(o).map(([d,m])=>`adapter ${d} `+(m===!1?"is not supported by the environment":"is not available in the build"));let c=e?l.length>1?`since :
`+l.map(Op).join(`
`):" "+Op(l[0]):"as no adapter specified";throw new An("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return r},adapters:Rf};function rf(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Lu(null,t)}function Ip(t){return rf(t),t.headers=Ss.from(t.headers),t.data=nf.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),wg.getAdapter(t.adapter||hc.adapter)(t).then(function(r){return rf(t),r.data=nf.call(t,t.transformResponse,r),r.headers=Ss.from(r.headers),r},function(r){return mg(r)||(rf(t),r&&r.response&&(r.response.data=nf.call(t,t.transformResponse,r.response),r.response.headers=Ss.from(r.response.headers))),Promise.reject(r)})}const xg="1.7.9",Eh={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Eh[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const Rp={};Eh.transitional=function(e,n,r){function o(l,c){return"[Axios v"+xg+"] Transitional option '"+l+"'"+c+(r?". "+r:"")}return(l,c,d)=>{if(e===!1)throw new An(o(c," has been removed"+(n?" in "+n:"")),An.ERR_DEPRECATED);return n&&!Rp[c]&&(Rp[c]=!0,console.warn(o(c," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(l,c,d):!0}};Eh.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function N2(t,e,n){if(typeof t!="object")throw new An("options must be an object",An.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let o=r.length;for(;o-- >0;){const l=r[o],c=e[l];if(c){const d=t[l],m=d===void 0||c(d,l,t);if(m!==!0)throw new An("option "+l+" must be "+m,An.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new An("Unknown option "+l,An.ERR_BAD_OPTION)}}const zc={assertOptions:N2,validators:Eh},ra=zc.validators;let Fl=class{constructor(e){this.defaults=e,this.interceptors={request:new Ep,response:new Ep}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const l=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?l&&!String(r.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+l):r.stack=l}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=$l(this.defaults,n);const{transitional:r,paramsSerializer:o,headers:l}=n;r!==void 0&&zc.assertOptions(r,{silentJSONParsing:ra.transitional(ra.boolean),forcedJSONParsing:ra.transitional(ra.boolean),clarifyTimeoutError:ra.transitional(ra.boolean)},!1),o!=null&&(we.isFunction(o)?n.paramsSerializer={serialize:o}:zc.assertOptions(o,{encode:ra.function,serialize:ra.function},!0)),zc.assertOptions(n,{baseUrl:ra.spelling("baseURL"),withXsrfToken:ra.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let c=l&&we.merge(l.common,l[n.method]);l&&we.forEach(["delete","get","head","post","put","patch","common"],R=>{delete l[R]}),n.headers=Ss.concat(c,l);const d=[];let m=!0;this.interceptors.request.forEach(function(O){typeof O.runWhen=="function"&&O.runWhen(n)===!1||(m=m&&O.synchronous,d.unshift(O.fulfilled,O.rejected))});const y=[];this.interceptors.response.forEach(function(O){y.push(O.fulfilled,O.rejected)});let b,w=0,E;if(!m){const R=[Ip.bind(this),void 0];for(R.unshift.apply(R,d),R.push.apply(R,y),E=R.length,b=Promise.resolve(n);w<E;)b=b.then(R[w++],R[w++]);return b}E=d.length;let C=n;for(w=0;w<E;){const R=d[w++],O=d[w++];try{C=R(C)}catch(q){O.call(this,q);break}}try{b=Ip.call(this,C)}catch(R){return Promise.reject(R)}for(w=0,E=y.length;w<E;)b=b.then(y[w++],y[w++]);return b}getUri(e){e=$l(this.defaults,e);const n=_g(e.baseURL,e.url);return fg(n,e.params,e.paramsSerializer)}};we.forEach(["delete","get","head","options"],function(e){Fl.prototype[e]=function(n,r){return this.request($l(r||{},{method:e,url:n,data:(r||{}).data}))}});we.forEach(["post","put","patch"],function(e){function n(r){return function(l,c,d){return this.request($l(d||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:l,data:c}))}}Fl.prototype[e]=n(),Fl.prototype[e+"Form"]=n(!0)});let D2=class Lg{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(l){n=l});const r=this;this.promise.then(o=>{if(!r._listeners)return;let l=r._listeners.length;for(;l-- >0;)r._listeners[l](o);r._listeners=null}),this.promise.then=o=>{let l;const c=new Promise(d=>{r.subscribe(d),l=d}).then(o);return c.cancel=function(){r.unsubscribe(l)},c},e(function(l,c,d){r.reason||(r.reason=new Lu(l,c,d),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new Lg(function(o){e=o}),cancel:e}}};function O2(t){return function(n){return t.apply(null,n)}}function I2(t){return we.isObject(t)&&t.isAxiosError===!0}const Ff={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ff).forEach(([t,e])=>{Ff[e]=t});function Cg(t){const e=new Fl(t),n=tg(Fl.prototype.request,e);return we.extend(n,Fl.prototype,e,{allOwnKeys:!0}),we.extend(n,e,null,{allOwnKeys:!0}),n.create=function(o){return Cg($l(t,o))},n}const $i=Cg(hc);$i.Axios=Fl;$i.CanceledError=Lu;$i.CancelToken=D2;$i.isCancel=mg;$i.VERSION=xg;$i.toFormData=Ph;$i.AxiosError=An;$i.Cancel=$i.CanceledError;$i.all=function(e){return Promise.all(e)};$i.spread=O2;$i.isAxiosError=I2;$i.mergeConfig=$l;$i.AxiosHeaders=Ss;$i.formToJSON=t=>pg(we.isHTMLForm(t)?new FormData(t):t);$i.getAdapter=wg.getAdapter;$i.HttpStatusCode=Ff;$i.default=$i;const{Axios:pP,AxiosError:mP,CanceledError:gP,isCancel:_P,CancelToken:vP,VERSION:yP,all:bP,Cancel:wP,isAxiosError:xP,spread:LP,toFormData:CP,AxiosHeaders:kP,HttpStatusCode:PP,formToJSON:SP,getAdapter:EP,mergeConfig:MP}=$i,xn=$i.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});function kg(t){var r;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}xn.interceptors.request.use(t=>{const e=kg("access_token");return e&&(t.headers.Authorization=`Bearer ${e}`),console.log("Request config:",{url:t.url,method:t.method,headers:t.headers,withCredentials:t.withCredentials}),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));xn.interceptors.response.use(t=>t,async t=>{var n;const e=t.config;if(((n=t.response)==null?void 0:n.status)===401&&!e._retry){e._retry=!0;try{await cs().refreshToken();const o=kg("access_token");if(o)return e.headers.Authorization=`Bearer ${o}`,xn(e)}catch(r){console.error("Token refresh failed:",r),window.location.href="/login"}}return Promise.reject(t)});xn.defaults.baseURL="/api";xn.defaults.headers.common["Content-Type"]="application/json";xn.defaults.withCredentials=!0;function rh(t){var r;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}xn.interceptors.request.use(t=>{const e=rh("access_token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));xn.interceptors.response.use(t=>t,async t=>{var r,o;const e=cs(),n=t.config;if(((r=t.response)==null?void 0:r.status)===401&&!n._retry&&!((o=n.url)!=null&&o.includes("/token/refresh/"))){n._retry=!0;try{if(!rh("access_token"))throw new Error("No token available");await e.refreshToken();const c=rh("access_token");if(c)return n.headers.Authorization=`Bearer ${c}`,xn(n)}catch(l){console.error("Token refresh failed:",l),await e.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(t)});function R2(t,e,n=1){const r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);const o=`expires=${r.toUTCString()}`;document.cookie=`${t}=${e};${o};path=/;secure;samesite=Strict`}function Dl(t){if(!t)return"Non spécifié";const e=`${t.first_name} ${t.last_name.toUpperCase()}`;return t.company_name?`${e} (${t.company_name})`:e}const cs=xd("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,concessionnaires:[]}),getters:{isAdmin:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="admin"},isDealer:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="dealer"},isClient:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="client"},currentUser:t=>t.user,hasDealer:t=>{var e;return!!((e=t.user)!=null&&e.dealer)}},actions:{async initialize(t){if(console.log("Initializing auth store with state:",t),!t){console.log("No initial state, attempting to restore session...");const n=await this.restoreSession();return this.initialized=!0,n}if(t.isAuthenticated&&t.user)return this.user=t.user,this.isAuthenticated=!0,this.mustChangePassword=t.user.must_change_password||!1,this.initialized=!0,!0;const e=await this.restoreSession();return this.initialized=!0,e},async restoreSession(){console.log("Attempting to restore session...");try{if(!rh("access_token"))return console.log("No token found, skipping session restore"),this.isAuthenticated=!1,this.user=null,!1;const e=await xn.post("/token/refresh/");return e.data.user?(this.user=e.data.user,this.isAuthenticated=!0,this.mustChangePassword=e.data.user.must_change_password||!1,console.log("Session restored successfully"),!0):(await this.fetchUserProfile(),!0)}catch(t){return console.error("Failed to restore session:",t),this.isAuthenticated=!1,this.user=null,!1}},async login(t,e){var n,r,o;try{const l=await xn.post("/token/",{username:t,password:e});if(!l.data.access)throw new Error("Token d'accès non reçu");document.cookie=`access_token=${l.data.access}; path=/; secure; samesite=Strict`;const c=await this.fetchUserProfile();return this.user=c,this.isAuthenticated=!0,!0}catch(l){throw this.isAuthenticated=!1,this.user=null,((n=l.response)==null?void 0:n.status)===401?new Error("Identifiants incorrects"):(o=(r=l.response)==null?void 0:r.data)!=null&&o.detail?new Error(l.response.data.detail):l}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const t=await xn.get("/users/me/");return this.user=t.data,this.isAuthenticated=!0,this.mustChangePassword=t.data.must_change_password||!1,t.data}catch(t){throw this.isAuthenticated=!1,this.user=null,t}},async changePassword(t,e){try{console.log("Attempting to change password...");const n=await xn.post("/users/change_password/",{old_password:t,password:e});return console.log("Password change response:",n.data),this.user={...this.user,must_change_password:!1},n.data}catch(n){throw console.error("Password change error:",n),n}},async refreshToken(){var t,e,n,r;try{console.log("Attempting to refresh token...");const o=await xn.post("/token/refresh/",{},{withCredentials:!0}),{access:l}=o.data;if(!l)throw new Error("No access token received");return console.log("Token refreshed successfully"),R2("access_token",l,1),this.isAuthenticated=!0,l}catch(o){throw console.error("Error refreshing token:",{status:(t=o.response)==null?void 0:t.status,data:(e=o.response)==null?void 0:e.data}),(((n=o.response)==null?void 0:n.status)===401||((r=o.response)==null?void 0:r.status)===403)&&(console.log("Token refresh failed with auth error, logging out"),await this.logout()),o}},async fetchConcessionnaires(){this.loading=!0;try{const t=await xn.get("/users/",{params:{role:"dealer"}});this.concessionnaires=t.data}catch(t){throw this.error="Erreur lors de la récupération des concessionnaires",t}finally{this.loading=!1}},async setConcessionnaire(t,e){this.loading=!0;try{await xn.patch(`/users/${t}/`,{concessionnaire:e}),this.user&&this.user.id===t&&(this.user.dealer=e)}catch(n){throw this.error="Erreur lors de la mise à jour du concessionnaire",n}finally{this.loading=!1}},async createUser(t){this.loading=!0;try{return(await xn.post("/users/",t)).data}catch(e){throw this.error="Erreur lors de la création de l'utilisateur",e}finally{this.loading=!1}},async updateUserRole(t,e){this.loading=!0;try{const n=await xn.patch(`/users/${t}/`,{role:e});return this.user&&this.user.id===t&&(this.user.user_type=e),n.data}catch(n){throw this.error="Erreur lors de la mise à jour du rôle",n}finally{this.loading=!1}},async updateUserEmail(t){var e;this.loading=!0;try{const n=await xn.patch(`/users/${(e=this.user)==null?void 0:e.id}/`,{email:t});return this.user&&(this.user.email=t),n.data}catch(n){throw this.error="Erreur lors de la mise à jour de l'email",n}finally{this.loading=!1}},checkAccess(t){return this.user?t.includes(this.user.user_type):!1}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const su=typeof document<"u";function Pg(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function F2(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Pg(t.default)}const ii=Object.assign;function sf(t,e){const n={};for(const r in e){const o=e[r];n[r]=Ro(o)?o.map(t):t(o)}return n}const Zu=()=>{},Ro=Array.isArray,Sg=/#/g,j2=/&/g,z2=/\//g,U2=/=/g,q2=/\?/g,Eg=/\+/g,$2=/%5B/g,G2=/%5D/g,Mg=/%5E/g,V2=/%60/g,Ag=/%7B/g,H2=/%7C/g,Bg=/%7D/g,W2=/%20/g;function Pd(t){return encodeURI(""+t).replace(H2,"|").replace($2,"[").replace(G2,"]")}function Z2(t){return Pd(t).replace(Ag,"{").replace(Bg,"}").replace(Mg,"^")}function jf(t){return Pd(t).replace(Eg,"%2B").replace(W2,"+").replace(Sg,"%23").replace(j2,"%26").replace(V2,"`").replace(Ag,"{").replace(Bg,"}").replace(Mg,"^")}function K2(t){return jf(t).replace(U2,"%3D")}function Y2(t){return Pd(t).replace(Sg,"%23").replace(q2,"%3F")}function J2(t){return t==null?"":Y2(t).replace(z2,"%2F")}function ic(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const X2=/\/$/,Q2=t=>t.replace(X2,"");function of(t,e,n="/"){let r,o={},l="",c="";const d=e.indexOf("#");let m=e.indexOf("?");return d<m&&d>=0&&(m=-1),m>-1&&(r=e.slice(0,m),l=e.slice(m+1,d>-1?d:e.length),o=t(l)),d>-1&&(r=r||e.slice(0,d),c=e.slice(d,e.length)),r=i5(r??e,n),{fullPath:r+(l&&"?")+l+c,path:r,query:o,hash:ic(c)}}function t5(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Fp(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function e5(t,e,n){const r=e.matched.length-1,o=n.matched.length-1;return r>-1&&r===o&&yu(e.matched[r],n.matched[o])&&Tg(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function yu(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Tg(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!n5(t[n],e[n]))return!1;return!0}function n5(t,e){return Ro(t)?jp(t,e):Ro(e)?jp(e,t):t===e}function jp(t,e){return Ro(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function i5(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),o=r[r.length-1];(o===".."||o===".")&&r.push("");let l=n.length-1,c,d;for(c=0;c<r.length;c++)if(d=r[c],d!==".")if(d==="..")l>1&&l--;else break;return n.slice(0,l).join("/")+"/"+r.slice(c).join("/")}const nl={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var rc;(function(t){t.pop="pop",t.push="push"})(rc||(rc={}));var Ku;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Ku||(Ku={}));function r5(t){if(!t)if(su){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Q2(t)}const s5=/^[^#]+#/;function o5(t,e){return t.replace(s5,"#")+e}function a5(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Mh=()=>({left:window.scrollX,top:window.scrollY});function l5(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;e=a5(o,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function zp(t,e){return(history.state?history.state.position-e:-1)+t}const zf=new Map;function u5(t,e){zf.set(t,e)}function c5(t){const e=zf.get(t);return zf.delete(t),e}let h5=()=>location.protocol+"//"+location.host;function Ng(t,e){const{pathname:n,search:r,hash:o}=e,l=t.indexOf("#");if(l>-1){let d=o.includes(t.slice(l))?t.slice(l).length:1,m=o.slice(d);return m[0]!=="/"&&(m="/"+m),Fp(m,"")}return Fp(n,t)+r+o}function f5(t,e,n,r){let o=[],l=[],c=null;const d=({state:E})=>{const C=Ng(t,location),R=n.value,O=e.value;let q=0;if(E){if(n.value=C,e.value=E,c&&c===R){c=null;return}q=O?E.position-O.position:0}else r(C);o.forEach(F=>{F(n.value,R,{delta:q,type:rc.pop,direction:q?q>0?Ku.forward:Ku.back:Ku.unknown})})};function m(){c=n.value}function y(E){o.push(E);const C=()=>{const R=o.indexOf(E);R>-1&&o.splice(R,1)};return l.push(C),C}function b(){const{history:E}=window;E.state&&E.replaceState(ii({},E.state,{scroll:Mh()}),"")}function w(){for(const E of l)E();l=[],window.removeEventListener("popstate",d),window.removeEventListener("beforeunload",b)}return window.addEventListener("popstate",d),window.addEventListener("beforeunload",b,{passive:!0}),{pauseListeners:m,listen:y,destroy:w}}function Up(t,e,n,r=!1,o=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:o?Mh():null}}function d5(t){const{history:e,location:n}=window,r={value:Ng(t,n)},o={value:e.state};o.value||l(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function l(m,y,b){const w=t.indexOf("#"),E=w>-1?(n.host&&document.querySelector("base")?t:t.slice(w))+m:h5()+t+m;try{e[b?"replaceState":"pushState"](y,"",E),o.value=y}catch(C){console.error(C),n[b?"replace":"assign"](E)}}function c(m,y){const b=ii({},e.state,Up(o.value.back,m,o.value.forward,!0),y,{position:o.value.position});l(m,b,!0),r.value=m}function d(m,y){const b=ii({},o.value,e.state,{forward:m,scroll:Mh()});l(b.current,b,!0);const w=ii({},Up(r.value,m,null),{position:b.position+1},y);l(m,w,!1),r.value=m}return{location:r,state:o,push:d,replace:c}}function p5(t){t=r5(t);const e=d5(t),n=f5(t,e.state,e.location,e.replace);function r(l,c=!0){c||n.pauseListeners(),history.go(l)}const o=ii({location:"",base:t,go:r,createHref:o5.bind(null,t)},e,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>e.state.value}),o}function m5(t){return typeof t=="string"||t&&typeof t=="object"}function Dg(t){return typeof t=="string"||typeof t=="symbol"}const Og=Symbol("");var qp;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(qp||(qp={}));function bu(t,e){return ii(new Error,{type:t,[Og]:!0},e)}function Aa(t,e){return t instanceof Error&&Og in t&&(e==null||!!(t.type&e))}const $p="[^/]+?",g5={sensitive:!1,strict:!1,start:!0,end:!0},_5=/[.+*?^${}()[\]/\\]/g;function v5(t,e){const n=ii({},g5,e),r=[];let o=n.start?"^":"";const l=[];for(const y of t){const b=y.length?[]:[90];n.strict&&!y.length&&(o+="/");for(let w=0;w<y.length;w++){const E=y[w];let C=40+(n.sensitive?.25:0);if(E.type===0)w||(o+="/"),o+=E.value.replace(_5,"\\$&"),C+=40;else if(E.type===1){const{value:R,repeatable:O,optional:q,regexp:F}=E;l.push({name:R,repeatable:O,optional:q});const V=F||$p;if(V!==$p){C+=10;try{new RegExp(`(${V})`)}catch(Ct){throw new Error(`Invalid custom RegExp for param "${R}" (${V}): `+Ct.message)}}let Y=O?`((?:${V})(?:/(?:${V}))*)`:`(${V})`;w||(Y=q&&y.length<2?`(?:/${Y})`:"/"+Y),q&&(Y+="?"),o+=Y,C+=20,q&&(C+=-8),O&&(C+=-20),V===".*"&&(C+=-50)}b.push(C)}r.push(b)}if(n.strict&&n.end){const y=r.length-1;r[y][r[y].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const c=new RegExp(o,n.sensitive?"":"i");function d(y){const b=y.match(c),w={};if(!b)return null;for(let E=1;E<b.length;E++){const C=b[E]||"",R=l[E-1];w[R.name]=C&&R.repeatable?C.split("/"):C}return w}function m(y){let b="",w=!1;for(const E of t){(!w||!b.endsWith("/"))&&(b+="/"),w=!1;for(const C of E)if(C.type===0)b+=C.value;else if(C.type===1){const{value:R,repeatable:O,optional:q}=C,F=R in y?y[R]:"";if(Ro(F)&&!O)throw new Error(`Provided param "${R}" is an array but it is not repeatable (* or + modifiers)`);const V=Ro(F)?F.join("/"):F;if(!V)if(q)E.length<2&&(b.endsWith("/")?b=b.slice(0,-1):w=!0);else throw new Error(`Missing required param "${R}"`);b+=V}}return b||"/"}return{re:c,score:r,keys:l,parse:d,stringify:m}}function y5(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Ig(t,e){let n=0;const r=t.score,o=e.score;for(;n<r.length&&n<o.length;){const l=y5(r[n],o[n]);if(l)return l;n++}if(Math.abs(o.length-r.length)===1){if(Gp(r))return 1;if(Gp(o))return-1}return o.length-r.length}function Gp(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const b5={type:0,value:""},w5=/[a-zA-Z0-9_]/;function x5(t){if(!t)return[[]];if(t==="/")return[[b5]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(C){throw new Error(`ERR (${n})/"${y}": ${C}`)}let n=0,r=n;const o=[];let l;function c(){l&&o.push(l),l=[]}let d=0,m,y="",b="";function w(){y&&(n===0?l.push({type:0,value:y}):n===1||n===2||n===3?(l.length>1&&(m==="*"||m==="+")&&e(`A repeatable param (${y}) must be alone in its segment. eg: '/:ids+.`),l.push({type:1,value:y,regexp:b,repeatable:m==="*"||m==="+",optional:m==="*"||m==="?"})):e("Invalid state to consume buffer"),y="")}function E(){y+=m}for(;d<t.length;){if(m=t[d++],m==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:m==="/"?(y&&w(),c()):m===":"?(w(),n=1):E();break;case 4:E(),n=r;break;case 1:m==="("?n=2:w5.test(m)?E():(w(),n=0,m!=="*"&&m!=="?"&&m!=="+"&&d--);break;case 2:m===")"?b[b.length-1]=="\\"?b=b.slice(0,-1)+m:n=3:b+=m;break;case 3:w(),n=0,m!=="*"&&m!=="?"&&m!=="+"&&d--,b="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${y}"`),w(),c(),o}function L5(t,e,n){const r=v5(x5(t.path),n),o=ii(r,{record:t,parent:e,children:[],alias:[]});return e&&!o.record.aliasOf==!e.record.aliasOf&&e.children.push(o),o}function C5(t,e){const n=[],r=new Map;e=Zp({strict:!1,end:!0,sensitive:!1},e);function o(w){return r.get(w)}function l(w,E,C){const R=!C,O=Hp(w);O.aliasOf=C&&C.record;const q=Zp(e,w),F=[O];if("alias"in w){const Ct=typeof w.alias=="string"?[w.alias]:w.alias;for(const kt of Ct)F.push(Hp(ii({},O,{components:C?C.record.components:O.components,path:kt,aliasOf:C?C.record:O})))}let V,Y;for(const Ct of F){const{path:kt}=Ct;if(E&&kt[0]!=="/"){const wt=E.record.path,et=wt[wt.length-1]==="/"?"":"/";Ct.path=E.record.path+(kt&&et+kt)}if(V=L5(Ct,E,q),C?C.alias.push(V):(Y=Y||V,Y!==V&&Y.alias.push(V),R&&w.name&&!Wp(V)&&c(w.name)),Rg(V)&&m(V),O.children){const wt=O.children;for(let et=0;et<wt.length;et++)l(wt[et],V,C&&C.children[et])}C=C||V}return Y?()=>{c(Y)}:Zu}function c(w){if(Dg(w)){const E=r.get(w);E&&(r.delete(w),n.splice(n.indexOf(E),1),E.children.forEach(c),E.alias.forEach(c))}else{const E=n.indexOf(w);E>-1&&(n.splice(E,1),w.record.name&&r.delete(w.record.name),w.children.forEach(c),w.alias.forEach(c))}}function d(){return n}function m(w){const E=S5(w,n);n.splice(E,0,w),w.record.name&&!Wp(w)&&r.set(w.record.name,w)}function y(w,E){let C,R={},O,q;if("name"in w&&w.name){if(C=r.get(w.name),!C)throw bu(1,{location:w});q=C.record.name,R=ii(Vp(E.params,C.keys.filter(Y=>!Y.optional).concat(C.parent?C.parent.keys.filter(Y=>Y.optional):[]).map(Y=>Y.name)),w.params&&Vp(w.params,C.keys.map(Y=>Y.name))),O=C.stringify(R)}else if(w.path!=null)O=w.path,C=n.find(Y=>Y.re.test(O)),C&&(R=C.parse(O),q=C.record.name);else{if(C=E.name?r.get(E.name):n.find(Y=>Y.re.test(E.path)),!C)throw bu(1,{location:w,currentLocation:E});q=C.record.name,R=ii({},E.params,w.params),O=C.stringify(R)}const F=[];let V=C;for(;V;)F.unshift(V.record),V=V.parent;return{name:q,path:O,params:R,matched:F,meta:P5(F)}}t.forEach(w=>l(w));function b(){n.length=0,r.clear()}return{addRoute:l,resolve:y,removeRoute:c,clearRoutes:b,getRoutes:d,getRecordMatcher:o}}function Vp(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function Hp(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:k5(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function k5(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Wp(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function P5(t){return t.reduce((e,n)=>ii(e,n.meta),{})}function Zp(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function S5(t,e){let n=0,r=e.length;for(;n!==r;){const l=n+r>>1;Ig(t,e[l])<0?r=l:n=l+1}const o=E5(t);return o&&(r=e.lastIndexOf(o,r-1)),r}function E5(t){let e=t;for(;e=e.parent;)if(Rg(e)&&Ig(t,e)===0)return e}function Rg({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function M5(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let o=0;o<r.length;++o){const l=r[o].replace(Eg," "),c=l.indexOf("="),d=ic(c<0?l:l.slice(0,c)),m=c<0?null:ic(l.slice(c+1));if(d in e){let y=e[d];Ro(y)||(y=e[d]=[y]),y.push(m)}else e[d]=m}return e}function Kp(t){let e="";for(let n in t){const r=t[n];if(n=K2(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Ro(r)?r.map(l=>l&&jf(l)):[r&&jf(r)]).forEach(l=>{l!==void 0&&(e+=(e.length?"&":"")+n,l!=null&&(e+="="+l))})}return e}function A5(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Ro(r)?r.map(o=>o==null?null:""+o):r==null?r:""+r)}return e}const B5=Symbol(""),Yp=Symbol(""),Ah=Symbol(""),Sd=Symbol(""),Uf=Symbol("");function Du(){let t=[];function e(r){return t.push(r),()=>{const o=t.indexOf(r);o>-1&&t.splice(o,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function ll(t,e,n,r,o,l=c=>c()){const c=r&&(r.enterCallbacks[o]=r.enterCallbacks[o]||[]);return()=>new Promise((d,m)=>{const y=E=>{E===!1?m(bu(4,{from:n,to:e})):E instanceof Error?m(E):m5(E)?m(bu(2,{from:e,to:E})):(c&&r.enterCallbacks[o]===c&&typeof E=="function"&&c.push(E),d())},b=l(()=>t.call(r&&r.instances[o],e,n,y));let w=Promise.resolve(b);t.length<3&&(w=w.then(y)),w.catch(E=>m(E))})}function af(t,e,n,r,o=l=>l()){const l=[];for(const c of t)for(const d in c.components){let m=c.components[d];if(!(e!=="beforeRouteEnter"&&!c.instances[d]))if(Pg(m)){const b=(m.__vccOpts||m)[e];b&&l.push(ll(b,n,r,c,d,o))}else{let y=m();l.push(()=>y.then(b=>{if(!b)throw new Error(`Couldn't resolve component "${d}" at "${c.path}"`);const w=F2(b)?b.default:b;c.mods[d]=b,c.components[d]=w;const C=(w.__vccOpts||w)[e];return C&&ll(C,n,r,c,d,o)()}))}}return l}function Jp(t){const e=fo(Ah),n=fo(Sd),r=Nn(()=>{const m=kn(t.to);return e.resolve(m)}),o=Nn(()=>{const{matched:m}=r.value,{length:y}=m,b=m[y-1],w=n.matched;if(!b||!w.length)return-1;const E=w.findIndex(yu.bind(null,b));if(E>-1)return E;const C=Xp(m[y-2]);return y>1&&Xp(b)===C&&w[w.length-1].path!==C?w.findIndex(yu.bind(null,m[y-2])):E}),l=Nn(()=>o.value>-1&&O5(n.params,r.value.params)),c=Nn(()=>o.value>-1&&o.value===n.matched.length-1&&Tg(n.params,r.value.params));function d(m={}){if(D5(m)){const y=e[kn(t.replace)?"replace":"push"](kn(t.to)).catch(Zu);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>y),y}return Promise.resolve()}return{route:r,href:Nn(()=>r.value.href),isActive:l,isExactActive:c,navigate:d}}function T5(t){return t.length===1?t[0]:t}const N5=Es({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Jp,setup(t,{slots:e}){const n=Fa(Jp(t)),{options:r}=fo(Ah),o=Nn(()=>({[Qp(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Qp(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const l=e.default&&T5(e.default(n));return t.custom?l:Vm("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},l)}}}),ou=N5;function D5(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function O5(t,e){for(const n in e){const r=e[n],o=t[n];if(typeof r=="string"){if(r!==o)return!1}else if(!Ro(o)||o.length!==r.length||r.some((l,c)=>l!==o[c]))return!1}return!0}function Xp(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Qp=(t,e,n)=>t??e??n,I5=Es({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=fo(Uf),o=Nn(()=>t.route||r.value),l=fo(Yp,0),c=Nn(()=>{let y=kn(l);const{matched:b}=o.value;let w;for(;(w=b[y])&&!w.components;)y++;return y}),d=Nn(()=>o.value.matched[c.value]);Dc(Yp,Nn(()=>c.value+1)),Dc(B5,d),Dc(Uf,o);const m=Re();return us(()=>[m.value,d.value,t.name],([y,b,w],[E,C,R])=>{b&&(b.instances[w]=y,C&&C!==b&&y&&y===E&&(b.leaveGuards.size||(b.leaveGuards=C.leaveGuards),b.updateGuards.size||(b.updateGuards=C.updateGuards))),y&&b&&(!C||!yu(b,C)||!E)&&(b.enterCallbacks[w]||[]).forEach(O=>O(y))},{flush:"post"}),()=>{const y=o.value,b=t.name,w=d.value,E=w&&w.components[b];if(!E)return t0(n.default,{Component:E,route:y});const C=w.props[b],R=C?C===!0?y.params:typeof C=="function"?C(y):C:null,q=Vm(E,ii({},R,e,{onVnodeUnmounted:F=>{F.component.isUnmounted&&(w.instances[b]=null)},ref:m}));return t0(n.default,{Component:q,route:y})||q}}});function t0(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Fg=I5;function R5(t){const e=C5(t.routes,t),n=t.parseQuery||M5,r=t.stringifyQuery||Kp,o=t.history,l=Du(),c=Du(),d=Du(),m=l_(nl);let y=nl;su&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const b=sf.bind(null,dt=>""+dt),w=sf.bind(null,J2),E=sf.bind(null,ic);function C(dt,St){let Mt,Kt;return Dg(dt)?(Mt=e.getRecordMatcher(dt),Kt=St):Kt=dt,e.addRoute(Kt,Mt)}function R(dt){const St=e.getRecordMatcher(dt);St&&e.removeRoute(St)}function O(){return e.getRoutes().map(dt=>dt.record)}function q(dt){return!!e.getRecordMatcher(dt)}function F(dt,St){if(St=ii({},St||m.value),typeof dt=="string"){const It=of(n,dt,St.path),Dt=e.resolve({path:It.path},St),lt=o.createHref(It.fullPath);return ii(It,Dt,{params:E(Dt.params),hash:ic(It.hash),redirectedFrom:void 0,href:lt})}let Mt;if(dt.path!=null)Mt=ii({},dt,{path:of(n,dt.path,St.path).path});else{const It=ii({},dt.params);for(const Dt in It)It[Dt]==null&&delete It[Dt];Mt=ii({},dt,{params:w(It)}),St.params=w(St.params)}const Kt=e.resolve(Mt,St),re=dt.hash||"";Kt.params=b(E(Kt.params));const it=t5(r,ii({},dt,{hash:Z2(re),path:Kt.path})),ht=o.createHref(it);return ii({fullPath:it,hash:re,query:r===Kp?A5(dt.query):dt.query||{}},Kt,{redirectedFrom:void 0,href:ht})}function V(dt){return typeof dt=="string"?of(n,dt,m.value.path):ii({},dt)}function Y(dt,St){if(y!==dt)return bu(8,{from:St,to:dt})}function Ct(dt){return et(dt)}function kt(dt){return Ct(ii(V(dt),{replace:!0}))}function wt(dt){const St=dt.matched[dt.matched.length-1];if(St&&St.redirect){const{redirect:Mt}=St;let Kt=typeof Mt=="function"?Mt(dt):Mt;return typeof Kt=="string"&&(Kt=Kt.includes("?")||Kt.includes("#")?Kt=V(Kt):{path:Kt},Kt.params={}),ii({query:dt.query,hash:dt.hash,params:Kt.path!=null?{}:dt.params},Kt)}}function et(dt,St){const Mt=y=F(dt),Kt=m.value,re=dt.state,it=dt.force,ht=dt.replace===!0,It=wt(Mt);if(It)return et(ii(V(It),{state:typeof It=="object"?ii({},re,It.state):re,force:it,replace:ht}),St||Mt);const Dt=Mt;Dt.redirectedFrom=St;let lt;return!it&&e5(r,Kt,Mt)&&(lt=bu(16,{to:Dt,from:Kt}),Rt(Kt,Kt,!0,!1)),(lt?Promise.resolve(lt):Yt(Dt,Kt)).catch(Gt=>Aa(Gt)?Aa(Gt,2)?Gt:X(Gt):G(Gt,Dt,Kt)).then(Gt=>{if(Gt){if(Aa(Gt,2))return et(ii({replace:ht},V(Gt.to),{state:typeof Gt.to=="object"?ii({},re,Gt.to.state):re,force:it}),St||Dt)}else Gt=J(Dt,Kt,!0,ht,re);return $(Dt,Kt,Gt),Gt})}function ct(dt,St){const Mt=Y(dt,St);return Mt?Promise.reject(Mt):Promise.resolve()}function Bt(dt){const St=ut.values().next().value;return St&&typeof St.runWithContext=="function"?St.runWithContext(dt):dt()}function Yt(dt,St){let Mt;const[Kt,re,it]=F5(dt,St);Mt=af(Kt.reverse(),"beforeRouteLeave",dt,St);for(const It of Kt)It.leaveGuards.forEach(Dt=>{Mt.push(ll(Dt,dt,St))});const ht=ct.bind(null,dt,St);return Mt.push(ht),xt(Mt).then(()=>{Mt=[];for(const It of l.list())Mt.push(ll(It,dt,St));return Mt.push(ht),xt(Mt)}).then(()=>{Mt=af(re,"beforeRouteUpdate",dt,St);for(const It of re)It.updateGuards.forEach(Dt=>{Mt.push(ll(Dt,dt,St))});return Mt.push(ht),xt(Mt)}).then(()=>{Mt=[];for(const It of it)if(It.beforeEnter)if(Ro(It.beforeEnter))for(const Dt of It.beforeEnter)Mt.push(ll(Dt,dt,St));else Mt.push(ll(It.beforeEnter,dt,St));return Mt.push(ht),xt(Mt)}).then(()=>(dt.matched.forEach(It=>It.enterCallbacks={}),Mt=af(it,"beforeRouteEnter",dt,St,Bt),Mt.push(ht),xt(Mt))).then(()=>{Mt=[];for(const It of c.list())Mt.push(ll(It,dt,St));return Mt.push(ht),xt(Mt)}).catch(It=>Aa(It,8)?It:Promise.reject(It))}function $(dt,St,Mt){d.list().forEach(Kt=>Bt(()=>Kt(dt,St,Mt)))}function J(dt,St,Mt,Kt,re){const it=Y(dt,St);if(it)return it;const ht=St===nl,It=su?history.state:{};Mt&&(Kt||ht?o.replace(dt.fullPath,ii({scroll:ht&&It&&It.scroll},re)):o.push(dt.fullPath,re)),m.value=dt,Rt(dt,St,Mt,ht),X()}let I;function nt(){I||(I=o.listen((dt,St,Mt)=>{if(!vt.listening)return;const Kt=F(dt),re=wt(Kt);if(re){et(ii(re,{replace:!0,force:!0}),Kt).catch(Zu);return}y=Kt;const it=m.value;su&&u5(zp(it.fullPath,Mt.delta),Mh()),Yt(Kt,it).catch(ht=>Aa(ht,12)?ht:Aa(ht,2)?(et(ii(V(ht.to),{force:!0}),Kt).then(It=>{Aa(It,20)&&!Mt.delta&&Mt.type===rc.pop&&o.go(-1,!1)}).catch(Zu),Promise.reject()):(Mt.delta&&o.go(-Mt.delta,!1),G(ht,Kt,it))).then(ht=>{ht=ht||J(Kt,it,!1),ht&&(Mt.delta&&!Aa(ht,8)?o.go(-Mt.delta,!1):Mt.type===rc.pop&&Aa(ht,20)&&o.go(-1,!1)),$(Kt,it,ht)}).catch(Zu)}))}let K=Du(),tt=Du(),_t;function G(dt,St,Mt){X(dt);const Kt=tt.list();return Kt.length?Kt.forEach(re=>re(dt,St,Mt)):console.error(dt),Promise.reject(dt)}function j(){return _t&&m.value!==nl?Promise.resolve():new Promise((dt,St)=>{K.add([dt,St])})}function X(dt){return _t||(_t=!dt,nt(),K.list().forEach(([St,Mt])=>dt?Mt(dt):St()),K.reset()),dt}function Rt(dt,St,Mt,Kt){const{scrollBehavior:re}=t;if(!su||!re)return Promise.resolve();const it=!Mt&&c5(zp(dt.fullPath,0))||(Kt||!Mt)&&history.state&&history.state.scroll||null;return lc().then(()=>re(dt,St,it)).then(ht=>ht&&l5(ht)).catch(ht=>G(ht,dt,St))}const D=dt=>o.go(dt);let Z;const ut=new Set,vt={currentRoute:m,listening:!0,addRoute:C,removeRoute:R,clearRoutes:e.clearRoutes,hasRoute:q,getRoutes:O,resolve:F,options:t,push:Ct,replace:kt,go:D,back:()=>D(-1),forward:()=>D(1),beforeEach:l.add,beforeResolve:c.add,afterEach:d.add,onError:tt.add,isReady:j,install(dt){const St=this;dt.component("RouterLink",ou),dt.component("RouterView",Fg),dt.config.globalProperties.$router=St,Object.defineProperty(dt.config.globalProperties,"$route",{enumerable:!0,get:()=>kn(m)}),su&&!Z&&m.value===nl&&(Z=!0,Ct(o.location).catch(re=>{}));const Mt={};for(const re in nl)Object.defineProperty(Mt,re,{get:()=>m.value[re],enumerable:!0});dt.provide(Ah,St),dt.provide(Sd,hm(Mt)),dt.provide(Uf,m);const Kt=dt.unmount;ut.add(dt),dt.unmount=function(){ut.delete(dt),ut.size<1&&(y=nl,I&&I(),I=null,m.value=nl,Z=!1,_t=!1),Kt()}}};function xt(dt){return dt.reduce((St,Mt)=>St.then(()=>Bt(Mt)),Promise.resolve())}return vt}function F5(t,e){const n=[],r=[],o=[],l=Math.max(e.matched.length,t.matched.length);for(let c=0;c<l;c++){const d=e.matched[c];d&&(t.matched.find(y=>yu(y,d))?r.push(d):n.push(d));const m=t.matched[c];m&&(e.matched.find(y=>yu(y,m))||o.push(m))}return[n,r,o]}function fc(){return fo(Ah)}function AP(t){return fo(Sd)}var co=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function j5(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var zg=j5,z5=typeof co=="object"&&co&&co.Object===Object&&co,U5=z5,q5=U5,$5=typeof self=="object"&&self&&self.Object===Object&&self,G5=q5||$5||Function("return this")(),Ug=G5,V5=Ug,H5=function(){return V5.Date.now()},W5=H5,Z5=/\s/;function K5(t){for(var e=t.length;e--&&Z5.test(t.charAt(e)););return e}var Y5=K5,J5=Y5,X5=/^\s+/;function Q5(t){return t&&t.slice(0,J5(t)+1).replace(X5,"")}var t4=Q5,e4=Ug,n4=e4.Symbol,qg=n4,e0=qg,$g=Object.prototype,i4=$g.hasOwnProperty,r4=$g.toString,Ou=e0?e0.toStringTag:void 0;function s4(t){var e=i4.call(t,Ou),n=t[Ou];try{t[Ou]=void 0;var r=!0}catch{}var o=r4.call(t);return r&&(e?t[Ou]=n:delete t[Ou]),o}var o4=s4,a4=Object.prototype,l4=a4.toString;function u4(t){return l4.call(t)}var c4=u4,n0=qg,h4=o4,f4=c4,d4="[object Null]",p4="[object Undefined]",i0=n0?n0.toStringTag:void 0;function m4(t){return t==null?t===void 0?p4:d4:i0&&i0 in Object(t)?h4(t):f4(t)}var g4=m4;function _4(t){return t!=null&&typeof t=="object"}var v4=_4,y4=g4,b4=v4,w4="[object Symbol]";function x4(t){return typeof t=="symbol"||b4(t)&&y4(t)==w4}var L4=x4,C4=t4,r0=zg,k4=L4,s0=NaN,P4=/^[-+]0x[0-9a-f]+$/i,S4=/^0b[01]+$/i,E4=/^0o[0-7]+$/i,M4=parseInt;function A4(t){if(typeof t=="number")return t;if(k4(t))return s0;if(r0(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=r0(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=C4(t);var n=S4.test(t);return n||E4.test(t)?M4(t.slice(2),n?2:8):P4.test(t)?s0:+t}var B4=A4,T4=zg,lf=W5,o0=B4,N4="Expected a function",D4=Math.max,O4=Math.min;function I4(t,e,n){var r,o,l,c,d,m,y=0,b=!1,w=!1,E=!0;if(typeof t!="function")throw new TypeError(N4);e=o0(e)||0,T4(n)&&(b=!!n.leading,w="maxWait"in n,l=w?D4(o0(n.maxWait)||0,e):l,E="trailing"in n?!!n.trailing:E);function C(wt){var et=r,ct=o;return r=o=void 0,y=wt,c=t.apply(ct,et),c}function R(wt){return y=wt,d=setTimeout(F,e),b?C(wt):c}function O(wt){var et=wt-m,ct=wt-y,Bt=e-et;return w?O4(Bt,l-ct):Bt}function q(wt){var et=wt-m,ct=wt-y;return m===void 0||et>=e||et<0||w&&ct>=l}function F(){var wt=lf();if(q(wt))return V(wt);d=setTimeout(F,O(wt))}function V(wt){return d=void 0,E&&r?C(wt):(r=o=void 0,c)}function Y(){d!==void 0&&clearTimeout(d),y=0,r=m=o=d=void 0}function Ct(){return d===void 0?c:V(lf())}function kt(){var wt=lf(),et=q(wt);if(r=arguments,o=this,m=wt,et){if(d===void 0)return R(m);if(w)return clearTimeout(d),d=setTimeout(F,e),C(m)}return d===void 0&&(d=setTimeout(F,e)),c}return kt.cancel=Y,kt.flush=Ct,kt}var R4=I4;const F4=jg(R4),j4={class:"relative w-full"},z4={key:0,class:"absolute w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto z-[1001]"},U4=["onClick"],q4=Es({__name:"SearchBar",emits:["select-location"],setup(t,{emit:e}){const n=Re(""),r=Re([]),o=e,l=F4(async m=>{if(m.length<3){r.value=[];return}try{const b=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(m)}`)).json();r.value=b}catch(y){console.error("Erreur lors de la recherche d'adresse:",y),r.value=[]}},300);function c(){l(n.value)}function d(m){n.value=m.display_name,r.value=[],o("select-location",{lat:parseFloat(m.lat),lng:parseFloat(m.lon)})}return(m,y)=>(ue(),fe("div",j4,[jn(A("input",{"onUpdate:modelValue":y[0]||(y[0]=b=>n.value=b),onInput:c,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[Bi,n.value]]),r.value.length>0?(ue(),fe("div",z4,[(ue(!0),fe(Mn,null,Wn(r.value,b=>(ue(),fe("div",{key:b.place_id,onClick:w=>d(b),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},Ce(b.display_name),9,U4))),128))])):an("",!0)]))}}),Gg=(t,e)=>{const n=t.__vccOpts||t;for(const[r,o]of e)n[r]=o;return n},a0=Gg(q4,[["__scopeId","data-v-0102bcad"]]),$4={class:"h-screen flex flex-col"},G4={key:0,class:"bg-white shadow-sm z-[2000]"},V4={class:"mx-auto px-4 sm:px-6 lg:px-8"},H4={class:"flex h-16 items-center justify-between"},W4={class:"flex items-center space-x-8"},Z4={class:"hidden md:flex space-x-6"},K4={key:0,class:"hidden md:block flex-1 mx-8"},Y4={key:1,class:"flex-1"},J4={class:"flex items-center space-x-2 md:space-x-4"},X4={class:"flex md:hidden"},Q4={class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},tb={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},eb={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},nb={class:"relative"},ib={class:"hidden md:flex flex-col items-end"},rb={class:"text-sm font-medium text-gray-700"},sb={key:0,class:"text-xs text-gray-500"},ob=["src","alt"],ab={key:0,class:"absolute right-0 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3000]"},lb={class:"md:hidden px-4 py-2 border-b border-gray-100"},ub={class:"text-sm font-medium text-gray-700"},cb={class:"text-xs text-gray-500"},hb={key:0,class:"md:hidden"},fb={class:"space-y-1 px-2 pb-3 pt-2"},db={key:0,class:"px-4 py-3"},pb={class:"flex-1 overflow-auto"},mb={key:0,class:"fixed inset-0 bg-white z-[2001] flex flex-col items-center justify-center p-6 text-center"},gb=Es({__name:"App",setup(t){const e=fc(),n=cs(),r=Re(!1),o=Re(!1),l=Re(!1);function c(){l.value=window.innerWidth<768}Ra(()=>{c(),window.addEventListener("resize",c)}),yd(()=>{window.removeEventListener("resize",c)});const d=Nn(()=>{const V=n.user;if(!V)return"";const Y=`${V.first_name} ${V.last_name.toUpperCase()}`;return V.company_name?`${Y} (${V.company_name})`:Y}),m=Nn(()=>{var Y;const V=(Y=n.user)==null?void 0:Y.user_type;switch(console.log("User type:",V),V){case"admin":return"Accès administrateur";case"dealer":return"Accès concessionnaire";case"client":return"Accès client";default:return""}}),y=Nn(()=>{var V;return((V=n.user)==null?void 0:V.user_type)==="admin"}),b=Re(""),w=Nn(()=>n.isAuthenticated),E=[{name:"Carte",to:"/"},{name:"Plans",to:"/plans"}],C=Nn(()=>{var Y;if(!w.value)return[];const V=[...E];return y.value?V.push({name:"Utilisateurs",to:"/users"}):((Y=n.user)==null?void 0:Y.user_type)==="dealer"&&V.push({name:"Clients",to:"/clients"}),V}),R=Nn(()=>w.value?[{name:"Mon profil",to:"/profile"}]:[]);async function O(){try{await n.logout(),e.push("/login")}catch(V){console.error("Erreur lors de la déconnexion:",V)}}function q(V){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:V.lat,lng:V.lng,zoom:16}}))}Ra(async()=>{console.log("App mounted, checking auth...");try{localStorage.getItem("token")?(console.log("Token found, checking auth..."),await n.checkAuth(),await n.fetchUserProfile()):console.log("No token found")}catch(V){console.error("Auth check error:",V),e.push("/login")}});const F=Nn(()=>{const V="IrrigationDesign";if(!w.value)return`${V} - Connexion`;const Y=e.currentRoute.value,kt={home:"Carte",plans:"Plans",users:"Utilisateurs",profile:"Mon profil",selectDealer:"Sélection du concessionnaire",changePassword:"Changement de mot de passe",map:"Carte"}[Y.name]||"";return kt?`${V} - ${kt}`:V});return us(F,V=>{document.title=V},{immediate:!0}),(V,Y)=>(ue(),fe("div",$4,[w.value?(ue(),fe("header",G4,[A("nav",V4,[A("div",H4,[A("div",W4,[Di(kn(ou),{to:"/",class:"text-xl font-semibold text-primary-600 truncate"},{default:Bl(()=>Y[4]||(Y[4]=[A("span",{class:"md:inline hidden"},"IrrigationDesign",-1),A("span",{class:"md:hidden inline"},"ID",-1)])),_:1}),A("div",Z4,[(ue(!0),fe(Mn,null,Wn(C.value,Ct=>(ue(),Ia(kn(ou),{key:Ct.name,to:Ct.to,class:Kr(["text-sm font-medium transition-colors duration-200",[V.$route.path===Ct.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Bl(()=>[yi(Ce(Ct.name),1)]),_:2},1032,["to","class"]))),128))])]),V.$route.path==="/"?(ue(),fe("div",K4,[Di(a0,{onSelectLocation:q})])):(ue(),fe("div",Y4)),A("div",J4,[A("div",X4,[A("button",{onClick:Y[0]||(Y[0]=Ct=>o.value=!o.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500"},[Y[5]||(Y[5]=A("span",{class:"sr-only"},"Ouvrir le menu",-1)),(ue(),fe("svg",Q4,[o.value?(ue(),fe("path",eb)):(ue(),fe("path",tb))]))])]),Y[6]||(Y[6]=A("button",{class:"hidden md:flex p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},[A("span",{class:"sr-only"},"Voir les notifications"),A("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})])],-1)),A("div",nb,[A("button",{onClick:Y[1]||(Y[1]=Ct=>r.value=!r.value),class:"flex items-center space-x-2 md:space-x-3 focus:outline-none"},[A("div",ib,[A("span",rb,Ce(d.value),1),m.value?(ue(),fe("span",sb,Ce(m.value),1)):an("",!0)]),A("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:b.value||"https://ui-avatars.com/api/?name="+encodeURIComponent(d.value),alt:d.value},null,8,ob)]),r.value?(ue(),fe("div",ab,[A("div",lb,[A("div",ub,Ce(d.value),1),A("div",cb,Ce(m.value),1)]),(ue(!0),fe(Mn,null,Wn(R.value,Ct=>(ue(),Ia(kn(ou),{key:Ct.name,to:Ct.to,class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:Y[2]||(Y[2]=kt=>r.value=!1)},{default:Bl(()=>[yi(Ce(Ct.name),1)]),_:2},1032,["to"]))),128)),A("button",{onClick:O,class:"block w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-gray-50"}," Déconnexion ")])):an("",!0)])])]),o.value?(ue(),fe("div",hb,[A("div",fb,[(ue(!0),fe(Mn,null,Wn(C.value,Ct=>(ue(),Ia(kn(ou),{key:Ct.name,to:Ct.to,class:Kr(["block px-3 py-2 rounded-md text-base font-medium",[V.$route.path===Ct.to?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]]),onClick:Y[3]||(Y[3]=kt=>o.value=!1)},{default:Bl(()=>[yi(Ce(Ct.name),1)]),_:2},1032,["to","class"]))),128))]),V.$route.path==="/"?(ue(),fe("div",db,[Di(a0,{onSelectLocation:q})])):an("",!0)])):an("",!0)])])):an("",!0),A("main",pb,[l.value&&V.$route.path==="/"?(ue(),fe("div",mb,[Y[8]||(Y[8]=A("svg",{class:"w-24 h-24 text-primary-500 mb-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),Y[9]||(Y[9]=A("h2",{class:"text-2xl font-bold text-gray-900 mb-4"}," Version bureau recommandée ",-1)),Y[10]||(Y[10]=A("p",{class:"text-gray-600 mb-8 max-w-md"}," Pour une meilleure expérience de conception d'irrigation, nous vous recommandons d'utiliser un écran plus large ou un ordinateur. ",-1)),Di(kn(ou),{to:"/plans",class:"inline-flex items-center px-4 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700"},{default:Bl(()=>Y[7]||(Y[7]=[yi(" Voir mes plans ")])),_:1})])):(ue(),Ia(kn(Fg),{key:1}))])]))}}),_b="modulepreload",vb=function(t){return"/static/frontend/"+t},l0={},Ol=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));o=Promise.allSettled(n.map(m=>{if(m=vb(m),m in l0)return;l0[m]=!0;const y=m.endsWith(".css"),b=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${b}`))return;const w=document.createElement("link");if(w.rel=y?"stylesheet":_b,y||(w.as="script"),w.crossOrigin="",w.href=m,d&&w.setAttribute("nonce",d),document.head.appendChild(w),y)return new Promise((E,C)=>{w.addEventListener("load",E),w.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${m}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return o.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})},yb={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},bb={class:"max-w-md w-full space-y-8"},wb={class:"space-y-4"},xb={class:"mt-1"},Lb={class:"mt-1"},Cb={class:"mt-1"},kb={key:0,class:"rounded-md bg-red-50 p-4"},Pb={class:"flex"},Sb={class:"ml-3"},Eb={class:"text-sm font-medium text-red-800"},Mb={key:1,class:"rounded-md bg-yellow-50 p-4"},Ab={class:"flex"},Bb={class:"ml-3"},Tb={class:"mt-2 text-sm text-yellow-700"},Nb={class:"list-disc pl-5 space-y-1"},Db=["disabled"],Ob={class:"absolute left-0 inset-y-0 flex items-center pl-3"},Ib={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Rb={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Fb=Es({__name:"ChangePasswordForm",setup(t){const e=fc(),n=cs(),r=Fa({oldPassword:"",newPassword:"",confirmPassword:""}),o=Re(!1),l=Re("");Ra(()=>{var y,b;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:n.isAuthenticated,userId:(y=n.user)==null?void 0:y.id,mustChangePassword:(b=n.user)==null?void 0:b.must_change_password})});const c=Nn(()=>{const y=[];return r.newPassword&&r.newPassword.length<8&&y.push("Le nouveau mot de passe doit contenir au moins 8 caractères"),r.newPassword&&r.confirmPassword&&r.newPassword!==r.confirmPassword&&y.push("Les mots de passe ne correspondent pas"),y}),d=Nn(()=>r.oldPassword.length>0&&r.newPassword.length>=8&&r.newPassword===r.confirmPassword);async function m(){var y,b,w,E,C,R,O,q;if(!d.value){l.value="Veuillez corriger les erreurs avant de continuer";return}if(!((y=n.user)!=null&&y.id)){l.value="Erreur : utilisateur non identifié";return}o.value=!0,l.value="";try{console.log("Submitting password change..."),await n.changePassword(r.oldPassword,r.newPassword),console.log("Password changed successfully"),e.push("/")}catch(F){console.error("Password change failed:",F),(w=(b=F.response)==null?void 0:b.data)!=null&&w.detail?l.value=F.response.data.detail:(C=(E=F.response)==null?void 0:E.data)!=null&&C.old_password?l.value=F.response.data.old_password[0]:(O=(R=F.response)==null?void 0:R.data)!=null&&O.password?l.value=F.response.data.password[0]:((q=F.response)==null?void 0:q.status)===401?(l.value="Session expirée, veuillez vous reconnecter",await n.logout(),e.push("/login")):l.value="Une erreur est survenue lors du changement de mot de passe"}finally{o.value=!1}}return(y,b)=>(ue(),fe("div",yb,[A("div",bb,[b[12]||(b[12]=A("div",null,[A("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),A("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de sécurité, vous devez changer votre mot de passe. ")],-1)),A("form",{class:"mt-8 space-y-6",onSubmit:wh(m,["prevent"])},[A("div",wb,[A("div",null,[b[3]||(b[3]=A("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),A("div",xb,[jn(A("input",{id:"old-password","onUpdate:modelValue":b[0]||(b[0]=w=>r.oldPassword=w),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[Bi,r.oldPassword]])])]),A("div",null,[b[4]||(b[4]=A("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),A("div",Lb,[jn(A("input",{id:"new-password","onUpdate:modelValue":b[1]||(b[1]=w=>r.newPassword=w),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[Bi,r.newPassword]])]),b[5]||(b[5]=A("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractères ",-1))]),A("div",null,[b[6]||(b[6]=A("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),A("div",Cb,[jn(A("input",{id:"confirm-password","onUpdate:modelValue":b[2]||(b[2]=w=>r.confirmPassword=w),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[Bi,r.confirmPassword]])])])]),l.value?(ue(),fe("div",kb,[A("div",Pb,[b[7]||(b[7]=A("div",{class:"flex-shrink-0"},[A("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[A("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),A("div",Sb,[A("h3",Eb,Ce(l.value),1)])])])):an("",!0),c.value.length>0?(ue(),fe("div",Mb,[A("div",Ab,[b[9]||(b[9]=A("div",{class:"flex-shrink-0"},[A("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[A("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),A("div",Bb,[b[8]||(b[8]=A("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),A("div",Tb,[A("ul",Nb,[(ue(!0),fe(Mn,null,Wn(c.value,(w,E)=>(ue(),fe("li",{key:E},Ce(w),1))),128))])])])])])):an("",!0),A("div",null,[A("button",{type:"submit",disabled:o.value||!d.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[A("span",Ob,[o.value?(ue(),fe("svg",Rb,b[11]||(b[11]=[A("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),A("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(ue(),fe("svg",Ib,b[10]||(b[10]=[A("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),yi(" "+Ce(o.value?"Modification en cours...":"Changer le mot de passe"),1)],8,Db)])],32)])]))}}),jb="/static/frontend/assets/logo.svg",zb={class:"min-h-screen bg-white from-blue-50 to-white flex flex-col justify-center py-12 sm:px-6 lg:px-8"},Ub={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},qb={class:"bg-white py-8 px-6 shadow-lg rounded-md sm:px-10"},$b={key:0,class:"rounded-md bg-red-50 p-4"},Gb={class:"flex"},Vb={class:"ml-3"},Hb={class:"text-sm font-medium text-red-800"},Wb={class:"mt-1"},Zb={class:"mt-1 relative"},Kb=["type"],Yb={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Jb={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Xb={class:"flex items-center justify-between"},Qb={class:"flex items-center"},t3={class:"text-sm"},e3=["disabled"],n3={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},i3=Es({__name:"LoginView",setup(t){const e=fc(),n=cs(),r=Re(!1),o=Re(null),l=Re(!1),c=Fa({username:"",password:"",rememberMe:!1});Ra(()=>{var m;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE),(m=window.INITIAL_STATE)!=null&&m.isAuthenticated&&(console.log("User is authenticated, redirecting to home"),e.push("/"))});async function d(){var m,y,b,w,E,C;r.value=!0,o.value=null;try{if(!c.username||!c.password){o.value="Veuillez remplir tous les champs";return}await n.login(c.username,c.password),(m=n.user)!=null&&m.must_change_password?e.push("/change-password"):e.push("/")}catch(R){console.error("Login error:",R),o.value=((b=(y=R==null?void 0:R.response)==null?void 0:y.data)==null?void 0:b.detail)||((C=(E=(w=R==null?void 0:R.response)==null?void 0:w.data)==null?void 0:E.non_field_errors)==null?void 0:C[0])||(R==null?void 0:R.message)||"Erreur lors de la connexion"}finally{r.value=!1}}return(m,y)=>{const b=D_("router-link");return ue(),fe("div",zb,[y[12]||(y[12]=A("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[A("img",{src:jb,alt:"IrrigationDesign Logo",class:"mx-auto h-40 w-auto transition-transform duration-300 hover:scale-110"}),A("h2",{class:"mt-2 text-center text-3xl font-bold text-gray-800"}," IrrigationDesign "),A("p",{class:"mt-2 text-center text-sm text-gray-600"}," Connectez-vous pour accéder à votre espace ")],-1)),A("div",Ub,[A("div",qb,[A("form",{class:"space-y-6",onSubmit:wh(d,["prevent"])},[o.value?(ue(),fe("div",$b,[A("div",Gb,[y[4]||(y[4]=A("div",{class:"flex-shrink-0"},[A("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[A("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),A("div",Vb,[A("h3",Hb,Ce(o.value),1)])])])):an("",!0),A("div",null,[y[5]||(y[5]=A("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),A("div",Wb,[jn(A("input",{id:"username","onUpdate:modelValue":y[0]||(y[0]=w=>c.username=w),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[Bi,c.username]])])]),A("div",null,[y[8]||(y[8]=A("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),A("div",Zb,[jn(A("input",{id:"password","onUpdate:modelValue":y[1]||(y[1]=w=>c.password=w),type:l.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,Kb),[[Hv,c.password]]),A("button",{type:"button",onClick:y[2]||(y[2]=w=>l.value=!l.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[l.value?(ue(),fe("svg",Yb,y[6]||(y[6]=[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(ue(),fe("svg",Jb,y[7]||(y[7]=[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),A("div",Xb,[A("div",Qb,[jn(A("input",{id:"remember-me","onUpdate:modelValue":y[3]||(y[3]=w=>c.rememberMe=w),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[Zm,c.rememberMe]]),y[9]||(y[9]=A("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),A("div",t3,[Di(b,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Bl(()=>y[10]||(y[10]=[yi(" Mot de passe oublié ? ")])),_:1})])]),A("div",null,[A("button",{type:"submit",disabled:r.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[r.value?(ue(),fe("svg",n3,y[11]||(y[11]=[A("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),A("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):an("",!0),yi(" "+Ce(r.value?"Connexion en cours...":"Se connecter"),1)],8,e3)])],32)])])])}}}),uf="/static/frontend/assets/logo.jpeg";var qf={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(co,function(n){var r="1.9.4";function o(i){var u,g,P,N;for(g=1,P=arguments.length;g<P;g++){N=arguments[g];for(u in N)i[u]=N[u]}return i}var l=Object.create||function(){function i(){}return function(u){return i.prototype=u,new i}}();function c(i,u){var g=Array.prototype.slice;if(i.bind)return i.bind.apply(i,g.call(arguments,1));var P=g.call(arguments,2);return function(){return i.apply(u,P.length?P.concat(g.call(arguments)):arguments)}}var d=0;function m(i){return"_leaflet_id"in i||(i._leaflet_id=++d),i._leaflet_id}function y(i,u,g){var P,N,ot,jt;return jt=function(){P=!1,N&&(ot.apply(g,N),N=!1)},ot=function(){P?N=arguments:(i.apply(g,arguments),setTimeout(jt,u),P=!0)},ot}function b(i,u,g){var P=u[1],N=u[0],ot=P-N;return i===P&&g?i:((i-N)%ot+ot)%ot+N}function w(){return!1}function E(i,u){if(u===!1)return i;var g=Math.pow(10,u===void 0?6:u);return Math.round(i*g)/g}function C(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function R(i){return C(i).split(/\s+/)}function O(i,u){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?l(i.options):{});for(var g in u)i.options[g]=u[g];return i.options}function q(i,u,g){var P=[];for(var N in i)P.push(encodeURIComponent(g?N.toUpperCase():N)+"="+encodeURIComponent(i[N]));return(!u||u.indexOf("?")===-1?"?":"&")+P.join("&")}var F=/\{ *([\w_ -]+) *\}/g;function V(i,u){return i.replace(F,function(g,P){var N=u[P];if(N===void 0)throw new Error("No value provided for variable "+g);return typeof N=="function"&&(N=N(u)),N})}var Y=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function Ct(i,u){for(var g=0;g<i.length;g++)if(i[g]===u)return g;return-1}var kt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function wt(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var et=0;function ct(i){var u=+new Date,g=Math.max(0,16-(u-et));return et=u+g,window.setTimeout(i,g)}var Bt=window.requestAnimationFrame||wt("RequestAnimationFrame")||ct,Yt=window.cancelAnimationFrame||wt("CancelAnimationFrame")||wt("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function $(i,u,g){if(g&&Bt===ct)i.call(u);else return Bt.call(window,c(i,u))}function J(i){i&&Yt.call(window,i)}var I={__proto__:null,extend:o,create:l,bind:c,get lastId(){return d},stamp:m,throttle:y,wrapNum:b,falseFn:w,formatNum:E,trim:C,splitWords:R,setOptions:O,getParamString:q,template:V,isArray:Y,indexOf:Ct,emptyImageUrl:kt,requestFn:Bt,cancelFn:Yt,requestAnimFrame:$,cancelAnimFrame:J};function nt(){}nt.extend=function(i){var u=function(){O(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},g=u.__super__=this.prototype,P=l(g);P.constructor=u,u.prototype=P;for(var N in this)Object.prototype.hasOwnProperty.call(this,N)&&N!=="prototype"&&N!=="__super__"&&(u[N]=this[N]);return i.statics&&o(u,i.statics),i.includes&&(K(i.includes),o.apply(null,[P].concat(i.includes))),o(P,i),delete P.statics,delete P.includes,P.options&&(P.options=g.options?l(g.options):{},o(P.options,i.options)),P._initHooks=[],P.callInitHooks=function(){if(!this._initHooksCalled){g.callInitHooks&&g.callInitHooks.call(this),this._initHooksCalled=!0;for(var ot=0,jt=P._initHooks.length;ot<jt;ot++)P._initHooks[ot].call(this)}},u},nt.include=function(i){var u=this.prototype.options;return o(this.prototype,i),i.options&&(this.prototype.options=u,this.mergeOptions(i.options)),this},nt.mergeOptions=function(i){return o(this.prototype.options,i),this},nt.addInitHook=function(i){var u=Array.prototype.slice.call(arguments,1),g=typeof i=="function"?i:function(){this[i].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(g),this};function K(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=Y(i)?i:[i];for(var u=0;u<i.length;u++)i[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var tt={on:function(i,u,g){if(typeof i=="object")for(var P in i)this._on(P,i[P],u);else{i=R(i);for(var N=0,ot=i.length;N<ot;N++)this._on(i[N],u,g)}return this},off:function(i,u,g){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var P in i)this._off(P,i[P],u);else{i=R(i);for(var N=arguments.length===1,ot=0,jt=i.length;ot<jt;ot++)N?this._off(i[ot]):this._off(i[ot],u,g)}return this},_on:function(i,u,g,P){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(i,u,g)===!1){g===this&&(g=void 0);var N={fn:u,ctx:g};P&&(N.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(N)}},_off:function(i,u,g){var P,N,ot;if(this._events&&(P=this._events[i],!!P)){if(arguments.length===1){if(this._firingCount)for(N=0,ot=P.length;N<ot;N++)P[N].fn=w;delete this._events[i];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var jt=this._listens(i,u,g);if(jt!==!1){var ce=P[jt];this._firingCount&&(ce.fn=w,this._events[i]=P=P.slice()),P.splice(jt,1)}}},fire:function(i,u,g){if(!this.listens(i,g))return this;var P=o({},u,{type:i,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var N=this._events[i];if(N){this._firingCount=this._firingCount+1||1;for(var ot=0,jt=N.length;ot<jt;ot++){var ce=N[ot],ve=ce.fn;ce.once&&this.off(i,ve,ce.ctx),ve.call(ce.ctx||this,P)}this._firingCount--}}return g&&this._propagateEvent(P),this},listens:function(i,u,g,P){typeof i!="string"&&console.warn('"string" type argument expected');var N=u;typeof u!="function"&&(P=!!u,N=void 0,g=void 0);var ot=this._events&&this._events[i];if(ot&&ot.length&&this._listens(i,N,g)!==!1)return!0;if(P){for(var jt in this._eventParents)if(this._eventParents[jt].listens(i,u,g,P))return!0}return!1},_listens:function(i,u,g){if(!this._events)return!1;var P=this._events[i]||[];if(!u)return!!P.length;g===this&&(g=void 0);for(var N=0,ot=P.length;N<ot;N++)if(P[N].fn===u&&P[N].ctx===g)return N;return!1},once:function(i,u,g){if(typeof i=="object")for(var P in i)this._on(P,i[P],u,!0);else{i=R(i);for(var N=0,ot=i.length;N<ot;N++)this._on(i[N],u,g,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[m(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[m(i)],this},_propagateEvent:function(i){for(var u in this._eventParents)this._eventParents[u].fire(i.type,o({layer:i.target,propagatedFrom:i.target},i),!0)}};tt.addEventListener=tt.on,tt.removeEventListener=tt.clearAllEventListeners=tt.off,tt.addOneTimeEventListener=tt.once,tt.fireEvent=tt.fire,tt.hasEventListeners=tt.listens;var _t=nt.extend(tt);function G(i,u,g){this.x=g?Math.round(i):i,this.y=g?Math.round(u):u}var j=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};G.prototype={clone:function(){return new G(this.x,this.y)},add:function(i){return this.clone()._add(X(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(X(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new G(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new G(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=j(this.x),this.y=j(this.y),this},distanceTo:function(i){i=X(i);var u=i.x-this.x,g=i.y-this.y;return Math.sqrt(u*u+g*g)},equals:function(i){return i=X(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=X(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+E(this.x)+", "+E(this.y)+")"}};function X(i,u,g){return i instanceof G?i:Y(i)?new G(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new G(i.x,i.y):new G(i,u,g)}function Rt(i,u){if(i)for(var g=u?[i,u]:i,P=0,N=g.length;P<N;P++)this.extend(g[P])}Rt.prototype={extend:function(i){var u,g;if(!i)return this;if(i instanceof G||typeof i[0]=="number"||"x"in i)u=g=X(i);else if(i=D(i),u=i.min,g=i.max,!u||!g)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=g.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(g.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(g.y,this.max.y)),this},getCenter:function(i){return X((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return X(this.min.x,this.max.y)},getTopRight:function(){return X(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var u,g;return typeof i[0]=="number"||i instanceof G?i=X(i):i=D(i),i instanceof Rt?(u=i.min,g=i.max):u=g=i,u.x>=this.min.x&&g.x<=this.max.x&&u.y>=this.min.y&&g.y<=this.max.y},intersects:function(i){i=D(i);var u=this.min,g=this.max,P=i.min,N=i.max,ot=N.x>=u.x&&P.x<=g.x,jt=N.y>=u.y&&P.y<=g.y;return ot&&jt},overlaps:function(i){i=D(i);var u=this.min,g=this.max,P=i.min,N=i.max,ot=N.x>u.x&&P.x<g.x,jt=N.y>u.y&&P.y<g.y;return ot&&jt},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var u=this.min,g=this.max,P=Math.abs(u.x-g.x)*i,N=Math.abs(u.y-g.y)*i;return D(X(u.x-P,u.y-N),X(g.x+P,g.y+N))},equals:function(i){return i?(i=D(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function D(i,u){return!i||i instanceof Rt?i:new Rt(i,u)}function Z(i,u){if(i)for(var g=u?[i,u]:i,P=0,N=g.length;P<N;P++)this.extend(g[P])}Z.prototype={extend:function(i){var u=this._southWest,g=this._northEast,P,N;if(i instanceof vt)P=i,N=i;else if(i instanceof Z){if(P=i._southWest,N=i._northEast,!P||!N)return this}else return i?this.extend(xt(i)||ut(i)):this;return!u&&!g?(this._southWest=new vt(P.lat,P.lng),this._northEast=new vt(N.lat,N.lng)):(u.lat=Math.min(P.lat,u.lat),u.lng=Math.min(P.lng,u.lng),g.lat=Math.max(N.lat,g.lat),g.lng=Math.max(N.lng,g.lng)),this},pad:function(i){var u=this._southWest,g=this._northEast,P=Math.abs(u.lat-g.lat)*i,N=Math.abs(u.lng-g.lng)*i;return new Z(new vt(u.lat-P,u.lng-N),new vt(g.lat+P,g.lng+N))},getCenter:function(){return new vt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new vt(this.getNorth(),this.getWest())},getSouthEast:function(){return new vt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof vt||"lat"in i?i=xt(i):i=ut(i);var u=this._southWest,g=this._northEast,P,N;return i instanceof Z?(P=i.getSouthWest(),N=i.getNorthEast()):P=N=i,P.lat>=u.lat&&N.lat<=g.lat&&P.lng>=u.lng&&N.lng<=g.lng},intersects:function(i){i=ut(i);var u=this._southWest,g=this._northEast,P=i.getSouthWest(),N=i.getNorthEast(),ot=N.lat>=u.lat&&P.lat<=g.lat,jt=N.lng>=u.lng&&P.lng<=g.lng;return ot&&jt},overlaps:function(i){i=ut(i);var u=this._southWest,g=this._northEast,P=i.getSouthWest(),N=i.getNorthEast(),ot=N.lat>u.lat&&P.lat<g.lat,jt=N.lng>u.lng&&P.lng<g.lng;return ot&&jt},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,u){return i?(i=ut(i),this._southWest.equals(i.getSouthWest(),u)&&this._northEast.equals(i.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ut(i,u){return i instanceof Z?i:new Z(i,u)}function vt(i,u,g){if(isNaN(i)||isNaN(u))throw new Error("Invalid LatLng object: ("+i+", "+u+")");this.lat=+i,this.lng=+u,g!==void 0&&(this.alt=+g)}vt.prototype={equals:function(i,u){if(!i)return!1;i=xt(i);var g=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return g<=(u===void 0?1e-9:u)},toString:function(i){return"LatLng("+E(this.lat,i)+", "+E(this.lng,i)+")"},distanceTo:function(i){return St.distance(this,xt(i))},wrap:function(){return St.wrapLatLng(this)},toBounds:function(i){var u=180*i/40075017,g=u/Math.cos(Math.PI/180*this.lat);return ut([this.lat-u,this.lng-g],[this.lat+u,this.lng+g])},clone:function(){return new vt(this.lat,this.lng,this.alt)}};function xt(i,u,g){return i instanceof vt?i:Y(i)&&typeof i[0]!="object"?i.length===3?new vt(i[0],i[1],i[2]):i.length===2?new vt(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new vt(i.lat,"lng"in i?i.lng:i.lon,i.alt):u===void 0?null:new vt(i,u,g)}var dt={latLngToPoint:function(i,u){var g=this.projection.project(i),P=this.scale(u);return this.transformation._transform(g,P)},pointToLatLng:function(i,u){var g=this.scale(u),P=this.transformation.untransform(i,g);return this.projection.unproject(P)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var u=this.projection.bounds,g=this.scale(i),P=this.transformation.transform(u.min,g),N=this.transformation.transform(u.max,g);return new Rt(P,N)},infinite:!1,wrapLatLng:function(i){var u=this.wrapLng?b(i.lng,this.wrapLng,!0):i.lng,g=this.wrapLat?b(i.lat,this.wrapLat,!0):i.lat,P=i.alt;return new vt(g,u,P)},wrapLatLngBounds:function(i){var u=i.getCenter(),g=this.wrapLatLng(u),P=u.lat-g.lat,N=u.lng-g.lng;if(P===0&&N===0)return i;var ot=i.getSouthWest(),jt=i.getNorthEast(),ce=new vt(ot.lat-P,ot.lng-N),ve=new vt(jt.lat-P,jt.lng-N);return new Z(ce,ve)}},St=o({},dt,{wrapLng:[-180,180],R:6371e3,distance:function(i,u){var g=Math.PI/180,P=i.lat*g,N=u.lat*g,ot=Math.sin((u.lat-i.lat)*g/2),jt=Math.sin((u.lng-i.lng)*g/2),ce=ot*ot+Math.cos(P)*Math.cos(N)*jt*jt,ve=2*Math.atan2(Math.sqrt(ce),Math.sqrt(1-ce));return this.R*ve}}),Mt=6378137,Kt={R:Mt,MAX_LATITUDE:85.0511287798,project:function(i){var u=Math.PI/180,g=this.MAX_LATITUDE,P=Math.max(Math.min(g,i.lat),-g),N=Math.sin(P*u);return new G(this.R*i.lng*u,this.R*Math.log((1+N)/(1-N))/2)},unproject:function(i){var u=180/Math.PI;return new vt((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*u,i.x*u/this.R)},bounds:function(){var i=Mt*Math.PI;return new Rt([-i,-i],[i,i])}()};function re(i,u,g,P){if(Y(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=u,this._c=g,this._d=P}re.prototype={transform:function(i,u){return this._transform(i.clone(),u)},_transform:function(i,u){return u=u||1,i.x=u*(this._a*i.x+this._b),i.y=u*(this._c*i.y+this._d),i},untransform:function(i,u){return u=u||1,new G((i.x/u-this._b)/this._a,(i.y/u-this._d)/this._c)}};function it(i,u,g,P){return new re(i,u,g,P)}var ht=o({},St,{code:"EPSG:3857",projection:Kt,transformation:function(){var i=.5/(Math.PI*Kt.R);return it(i,.5,-i,.5)}()}),It=o({},ht,{code:"EPSG:900913"});function Dt(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function lt(i,u){var g="",P,N,ot,jt,ce,ve;for(P=0,ot=i.length;P<ot;P++){for(ce=i[P],N=0,jt=ce.length;N<jt;N++)ve=ce[N],g+=(N?"L":"M")+ve.x+" "+ve.y;g+=u?$e.svg?"z":"x":""}return g||"M0 0"}var Gt=document.documentElement.style,se="ActiveXObject"in window,Qt=se&&!document.addEventListener,oe="msLaunchUri"in navigator&&!("documentMode"in document),Ot=$n("webkit"),Lt=$n("android"),ie=$n("android 2")||$n("android 3"),_e=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Le=Lt&&$n("Google")&&_e<537&&!("AudioNode"in window),zt=!!window.opera,De=!oe&&$n("chrome"),Te=$n("gecko")&&!Ot&&!zt&&!se,Ue=!De&&$n("safari"),He=$n("phantom"),Ne="OTransition"in Gt,Sn=navigator.platform.indexOf("Win")===0,en=se&&"transition"in Gt,Jn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ie,cn="MozPerspective"in Gt,Ln=!window.L_DISABLE_3D&&(en||Jn||cn)&&!Ne&&!He,Xn=typeof orientation<"u"||$n("mobile"),qe=Xn&&Ot,Pr=Xn&&Jn,Rn=!window.PointerEvent&&window.MSPointerEvent,Li=!!(window.PointerEvent||Rn),Oi="ontouchstart"in window||!!window.TouchEvent,qn=!window.L_NO_TOUCH&&(Oi||Li),hn=Xn&&zt,Je=Xn&&Te,Ye=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ui=function(){var i=!1;try{var u=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",w,u),window.removeEventListener("testPassiveEventSupport",w,u)}catch{}return i}(),Sr=function(){return!!document.createElement("canvas").getContext}(),Er=!!(document.createElementNS&&Dt("svg").createSVGRect),ln=!!Er&&function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Jr=!Er&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var u=i.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}}(),hs=navigator.platform.indexOf("Mac")===0,ar=navigator.platform.indexOf("Linux")===0;function $n(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var $e={ie:se,ielt9:Qt,edge:oe,webkit:Ot,android:Lt,android23:ie,androidStock:Le,opera:zt,chrome:De,gecko:Te,safari:Ue,phantom:He,opera12:Ne,win:Sn,ie3d:en,webkit3d:Jn,gecko3d:cn,any3d:Ln,mobile:Xn,mobileWebkit:qe,mobileWebkit3d:Pr,msPointer:Rn,pointer:Li,touch:qn,touchNative:Oi,mobileOpera:hn,mobileGecko:Je,retina:Ye,passiveEvents:ui,canvas:Sr,svg:Er,vml:Jr,inlineSvg:ln,mac:hs,linux:ar},lr=$e.msPointer?"MSPointerDown":"pointerdown",go=$e.msPointer?"MSPointerMove":"pointermove",Xr=$e.msPointer?"MSPointerUp":"pointerup",Mr=$e.msPointer?"MSPointerCancel":"pointercancel",vr={touchstart:lr,touchmove:go,touchend:Xr,touchcancel:Mr},Ar={touchstart:_l,touchmove:vo,touchend:vo,touchcancel:vo},Xi={},yr=!1;function fs(i,u,g){return u==="touchstart"&&Ws(),Ar[u]?(g=Ar[u].bind(this,g),i.addEventListener(vr[u],g,!1),g):(console.warn("wrong event specified:",u),w)}function _o(i,u,g){if(!vr[u]){console.warn("wrong event specified:",u);return}i.removeEventListener(vr[u],g,!1)}function Uo(i){Xi[i.pointerId]=i}function qo(i){Xi[i.pointerId]&&(Xi[i.pointerId]=i)}function As(i){delete Xi[i.pointerId]}function Ws(){yr||(document.addEventListener(lr,Uo,!0),document.addEventListener(go,qo,!0),document.addEventListener(Xr,As,!0),document.addEventListener(Mr,As,!0),yr=!0)}function vo(i,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var g in Xi)u.touches.push(Xi[g]);u.changedTouches=[u],i(u)}}function _l(i,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&mi(u),vo(i,u)}function vl(i){var u={},g,P;for(P in i)g=i[P],u[P]=g&&g.bind?g.bind(i):g;return i=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var $o=200;function za(i,u){i.addEventListener("dblclick",u);var g=0,P;function N(ot){if(ot.detail!==1){P=ot.detail;return}if(!(ot.pointerType==="mouse"||ot.sourceCapabilities&&!ot.sourceCapabilities.firesTouchEvents)){var jt=Os(ot);if(!(jt.some(function(ve){return ve instanceof HTMLLabelElement&&ve.attributes.for})&&!jt.some(function(ve){return ve instanceof HTMLInputElement||ve instanceof HTMLSelectElement}))){var ce=Date.now();ce-g<=$o?(P++,P===2&&u(vl(ot))):P=1,g=ce}}}return i.addEventListener("click",N),{dblclick:u,simDblclick:N}}function yl(i,u){i.removeEventListener("dblclick",u.dblclick),i.removeEventListener("click",u.simDblclick)}var yo=Go(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),bo=Go(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),pa=bo==="webkitTransition"||bo==="OTransition"?bo+"End":"transitionend";function Ua(i){return typeof i=="string"?document.getElementById(i):i}function br(i,u){var g=i.style[u]||i.currentStyle&&i.currentStyle[u];if((!g||g==="auto")&&document.defaultView){var P=document.defaultView.getComputedStyle(i,null);g=P?P[u]:null}return g==="auto"?null:g}function In(i,u,g){var P=document.createElement(i);return P.className=u||"",g&&g.appendChild(P),P}function yn(i){var u=i.parentNode;u&&u.removeChild(i)}function Zs(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Bs(i){var u=i.parentNode;u&&u.lastChild!==i&&u.appendChild(i)}function ds(i){var u=i.parentNode;u&&u.firstChild!==i&&u.insertBefore(i,u.firstChild)}function wo(i,u){if(i.classList!==void 0)return i.classList.contains(u);var g=Ii(i);return g.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(g)}function wn(i,u){if(i.classList!==void 0)for(var g=R(u),P=0,N=g.length;P<N;P++)i.classList.add(g[P]);else if(!wo(i,u)){var ot=Ii(i);Ks(i,(ot?ot+" ":"")+u)}}function zn(i,u){i.classList!==void 0?i.classList.remove(u):Ks(i,C((" "+Ii(i)+" ").replace(" "+u+" "," ")))}function Ks(i,u){i.className.baseVal===void 0?i.className=u:i.className.baseVal=u}function Ii(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function Gi(i,u){"opacity"in i.style?i.style.opacity=u:"filter"in i.style&&qa(i,u)}function qa(i,u){var g=!1,P="DXImageTransform.Microsoft.Alpha";try{g=i.filters.item(P)}catch{if(u===1)return}u=Math.round(u*100),g?(g.Enabled=u!==100,g.Opacity=u):i.style.filter+=" progid:"+P+"(opacity="+u+")"}function Go(i){for(var u=document.documentElement.style,g=0;g<i.length;g++)if(i[g]in u)return i[g];return!1}function ps(i,u,g){var P=u||new G(0,0);i.style[yo]=($e.ie3d?"translate("+P.x+"px,"+P.y+"px)":"translate3d("+P.x+"px,"+P.y+"px,0)")+(g?" scale("+g+")":"")}function ci(i,u){i._leaflet_pos=u,$e.any3d?ps(i,u):(i.style.left=u.x+"px",i.style.top=u.y+"px")}function ms(i){return i._leaflet_pos||new G(0,0)}var xo,Ts,ma;if("onselectstart"in document)xo=function(){bn(window,"selectstart",mi)},Ts=function(){Dn(window,"selectstart",mi)};else{var Ys=Go(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);xo=function(){if(Ys){var i=document.documentElement.style;ma=i[Ys],i[Ys]="none"}},Ts=function(){Ys&&(document.documentElement.style[Ys]=ma,ma=void 0)}}function ga(){bn(window,"dragstart",mi)}function Qr(){Dn(window,"dragstart",mi)}var Ns,Js;function Vo(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(Ci(),Ns=i,Js=i.style.outlineStyle,i.style.outlineStyle="none",bn(window,"keydown",Ci))}function Ci(){Ns&&(Ns.style.outlineStyle=Js,Ns=void 0,Js=void 0,Dn(window,"keydown",Ci))}function $a(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function Ho(i){var u=i.getBoundingClientRect();return{x:u.width/i.offsetWidth||1,y:u.height/i.offsetHeight||1,boundingClientRect:u}}var _n={__proto__:null,TRANSFORM:yo,TRANSITION:bo,TRANSITION_END:pa,get:Ua,getStyle:br,create:In,remove:yn,empty:Zs,toFront:Bs,toBack:ds,hasClass:wo,addClass:wn,removeClass:zn,setClass:Ks,getClass:Ii,setOpacity:Gi,testProp:Go,setTransform:ps,setPosition:ci,getPosition:ms,get disableTextSelection(){return xo},get enableTextSelection(){return Ts},disableImageDrag:ga,enableImageDrag:Qr,preventOutline:Vo,restoreOutline:Ci,getSizedParentNode:$a,getScale:Ho};function bn(i,u,g,P){if(u&&typeof u=="object")for(var N in u)Xs(i,N,u[N],g);else{u=R(u);for(var ot=0,jt=u.length;ot<jt;ot++)Xs(i,u[ot],g,P)}return this}var Br="_leaflet_events";function Dn(i,u,g,P){if(arguments.length===1)_a(i),delete i[Br];else if(u&&typeof u=="object")for(var N in u)Tr(i,N,u[N],g);else if(u=R(u),arguments.length===2)_a(i,function(ce){return Ct(u,ce)!==-1});else for(var ot=0,jt=u.length;ot<jt;ot++)Tr(i,u[ot],g,P);return this}function _a(i,u){for(var g in i[Br]){var P=g.split(/\d/)[0];(!u||u(P))&&Tr(i,P,null,null,g)}}var Wo={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Xs(i,u,g,P){var N=u+m(g)+(P?"_"+m(P):"");if(i[Br]&&i[Br][N])return this;var ot=function(ce){return g.call(P||i,ce||window.event)},jt=ot;!$e.touchNative&&$e.pointer&&u.indexOf("touch")===0?ot=fs(i,u,ot):$e.touch&&u==="dblclick"?ot=za(i,ot):"addEventListener"in i?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?i.addEventListener(Wo[u]||u,ot,$e.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(ot=function(ce){ce=ce||window.event,Qs(i,ce)&&jt(ce)},i.addEventListener(Wo[u],ot,!1)):i.addEventListener(u,jt,!1):i.attachEvent("on"+u,ot),i[Br]=i[Br]||{},i[Br][N]=ot}function Tr(i,u,g,P,N){N=N||u+m(g)+(P?"_"+m(P):"");var ot=i[Br]&&i[Br][N];if(!ot)return this;!$e.touchNative&&$e.pointer&&u.indexOf("touch")===0?_o(i,u,ot):$e.touch&&u==="dblclick"?yl(i,ot):"removeEventListener"in i?i.removeEventListener(Wo[u]||u,ot,!1):i.detachEvent("on"+u,ot),i[Br][N]=null}function Ds(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function va(i){return Xs(i,"wheel",Ds),this}function Lo(i){return bn(i,"mousedown touchstart dblclick contextmenu",Ds),i._leaflet_disable_click=!0,this}function mi(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function wr(i){return mi(i),Ds(i),this}function Os(i){if(i.composedPath)return i.composedPath();for(var u=[],g=i.target;g;)u.push(g),g=g.parentNode;return u}function Ga(i,u){if(!u)return new G(i.clientX,i.clientY);var g=Ho(u),P=g.boundingClientRect;return new G((i.clientX-P.left)/g.x-u.clientLeft,(i.clientY-P.top)/g.y-u.clientTop)}var Co=$e.linux&&$e.chrome?window.devicePixelRatio:$e.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Zo(i){return $e.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/Co:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function Qs(i,u){var g=u.relatedTarget;if(!g)return!0;try{for(;g&&g!==i;)g=g.parentNode}catch{return!1}return g!==i}var ko={__proto__:null,on:bn,off:Dn,stopPropagation:Ds,disableScrollPropagation:va,disableClickPropagation:Lo,preventDefault:mi,stop:wr,getPropagationPath:Os,getMousePosition:Ga,getWheelDelta:Zo,isExternalTarget:Qs,addListener:bn,removeListener:Dn},ya=_t.extend({run:function(i,u,g,P){this.stop(),this._el=i,this._inProgress=!0,this._duration=g||.25,this._easeOutPower=1/Math.max(P||.5,.2),this._startPos=ms(i),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=$(this._animate,this),this._step()},_step:function(i){var u=+new Date-this._startTime,g=this._duration*1e3;u<g?this._runFrame(this._easeOut(u/g),i):(this._runFrame(1),this._complete())},_runFrame:function(i,u){var g=this._startPos.add(this._offset.multiplyBy(i));u&&g._round(),ci(this._el,g),this.fire("step")},_complete:function(){J(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),Bn=_t.extend({options:{crs:ht,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,u){u=O(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(xt(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=bo&&$e.any3d&&!$e.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),bn(this._proxy,pa,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,u,g){if(u=u===void 0?this._zoom:this._limitZoom(u),i=this._limitCenter(xt(i),u,this.options.maxBounds),g=g||{},this._stop(),this._loaded&&!g.reset&&g!==!0){g.animate!==void 0&&(g.zoom=o({animate:g.animate},g.zoom),g.pan=o({animate:g.animate,duration:g.duration},g.pan));var P=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,u,g.zoom):this._tryAnimatedPan(i,g.pan);if(P)return clearTimeout(this._sizeTimer),this}return this._resetView(i,u,g.pan&&g.pan.noMoveStart),this},setZoom:function(i,u){return this._loaded?this.setView(this.getCenter(),i,{zoom:u}):(this._zoom=i,this)},zoomIn:function(i,u){return i=i||($e.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,u)},zoomOut:function(i,u){return i=i||($e.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,u)},setZoomAround:function(i,u,g){var P=this.getZoomScale(u),N=this.getSize().divideBy(2),ot=i instanceof G?i:this.latLngToContainerPoint(i),jt=ot.subtract(N).multiplyBy(1-1/P),ce=this.containerPointToLatLng(N.add(jt));return this.setView(ce,u,{zoom:g})},_getBoundsCenterZoom:function(i,u){u=u||{},i=i.getBounds?i.getBounds():ut(i);var g=X(u.paddingTopLeft||u.padding||[0,0]),P=X(u.paddingBottomRight||u.padding||[0,0]),N=this.getBoundsZoom(i,!1,g.add(P));if(N=typeof u.maxZoom=="number"?Math.min(u.maxZoom,N):N,N===1/0)return{center:i.getCenter(),zoom:N};var ot=P.subtract(g).divideBy(2),jt=this.project(i.getSouthWest(),N),ce=this.project(i.getNorthEast(),N),ve=this.unproject(jt.add(ce).divideBy(2).add(ot),N);return{center:ve,zoom:N}},fitBounds:function(i,u){if(i=ut(i),!i.isValid())throw new Error("Bounds are not valid.");var g=this._getBoundsCenterZoom(i,u);return this.setView(g.center,g.zoom,u)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,u){return this.setView(i,this._zoom,{pan:u})},panBy:function(i,u){if(i=X(i).round(),u=u||{},!i.x&&!i.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ya,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){wn(this._mapPane,"leaflet-pan-anim");var g=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,g,u.duration||.25,u.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,u,g){if(g=g||{},g.animate===!1||!$e.any3d)return this.setView(i,u,g);this._stop();var P=this.project(this.getCenter()),N=this.project(i),ot=this.getSize(),jt=this._zoom;i=xt(i),u=u===void 0?jt:u;var ce=Math.max(ot.x,ot.y),ve=ce*this.getZoomScale(jt,u),Me=N.distanceTo(P)||1,Ve=1.42,sn=Ve*Ve;function En(Kn){var Ki=Kn?-1:1,ku=Kn?ve:ce,Cs=ve*ve-ce*ce+Ki*sn*sn*Me*Me,Hl=2*ku*sn*Me,To=Cs/Hl,Ya=Math.sqrt(To*To+1)-To,Wl=Ya<1e-9?-18:Math.log(Ya);return Wl}function or(Kn){return(Math.exp(Kn)-Math.exp(-Kn))/2}function Mi(Kn){return(Math.exp(Kn)+Math.exp(-Kn))/2}function mr(Kn){return or(Kn)/Mi(Kn)}var fi=En(0);function Ls(Kn){return ce*(Mi(fi)/Mi(fi+Ve*Kn))}function wl(Kn){return ce*(Mi(fi)*mr(fi+Ve*Kn)-or(fi))/sn}function is(Kn){return 1-Math.pow(1-Kn,1.5)}var zr=Date.now(),Cr=(En(1)-fi)/Ve,Cu=g.duration?1e3*g.duration:1e3*Cr*.8;function xl(){var Kn=(Date.now()-zr)/Cu,Ki=is(Kn)*Cr;Kn<=1?(this._flyToFrame=$(xl,this),this._move(this.unproject(P.add(N.subtract(P).multiplyBy(wl(Ki)/Me)),jt),this.getScaleZoom(ce/Ls(Ki),jt),{flyTo:!0})):this._move(i,u)._moveEnd(!0)}return this._moveStart(!0,g.noMoveStart),xl.call(this),this},flyToBounds:function(i,u){var g=this._getBoundsCenterZoom(i,u);return this.flyTo(g.center,g.zoom,u)},setMaxBounds:function(i){return i=ut(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var u=this.options.minZoom;return this.options.minZoom=i,this._loaded&&u!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var u=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&u!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,u){this._enforcingBounds=!0;var g=this.getCenter(),P=this._limitCenter(g,this._zoom,ut(i));return g.equals(P)||this.panTo(P,u),this._enforcingBounds=!1,this},panInside:function(i,u){u=u||{};var g=X(u.paddingTopLeft||u.padding||[0,0]),P=X(u.paddingBottomRight||u.padding||[0,0]),N=this.project(this.getCenter()),ot=this.project(i),jt=this.getPixelBounds(),ce=D([jt.min.add(g),jt.max.subtract(P)]),ve=ce.getSize();if(!ce.contains(ot)){this._enforcingBounds=!0;var Me=ot.subtract(ce.getCenter()),Ve=ce.extend(ot).getSize().subtract(ve);N.x+=Me.x<0?-Ve.x:Ve.x,N.y+=Me.y<0?-Ve.y:Ve.y,this.panTo(this.unproject(N),u),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=o({animate:!1,pan:!0},i===!0?{animate:!0}:i);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var g=this.getSize(),P=u.divideBy(2).round(),N=g.divideBy(2).round(),ot=P.subtract(N);return!ot.x&&!ot.y?this:(i.animate&&i.pan?this.panBy(ot):(i.pan&&this._rawPanBy(ot),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:g}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=o({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=c(this._handleGeolocationResponse,this),g=c(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,g,i):navigator.geolocation.getCurrentPosition(u,g,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var u=i.code,g=i.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+g+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var u=i.coords.latitude,g=i.coords.longitude,P=new vt(u,g),N=P.toBounds(i.coords.accuracy*2),ot=this._locateOptions;if(ot.setView){var jt=this.getBoundsZoom(N);this.setView(P,ot.maxZoom?Math.min(jt,ot.maxZoom):jt)}var ce={latlng:P,bounds:N,timestamp:i.timestamp};for(var ve in i.coords)typeof i.coords[ve]=="number"&&(ce[ve]=i.coords[ve]);this.fire("locationfound",ce)}},addHandler:function(i,u){if(!u)return this;var g=this[i]=new u(this);return this._handlers.push(g),this.options[i]&&g.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),yn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(J(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)yn(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,u){var g="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),P=In("div",g,u||this._mapPane);return i&&(this._panes[i]=P),P},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),u=this.unproject(i.getBottomLeft()),g=this.unproject(i.getTopRight());return new Z(u,g)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,u,g){i=ut(i),g=X(g||[0,0]);var P=this.getZoom()||0,N=this.getMinZoom(),ot=this.getMaxZoom(),jt=i.getNorthWest(),ce=i.getSouthEast(),ve=this.getSize().subtract(g),Me=D(this.project(ce,P),this.project(jt,P)).getSize(),Ve=$e.any3d?this.options.zoomSnap:1,sn=ve.x/Me.x,En=ve.y/Me.y,or=u?Math.max(sn,En):Math.min(sn,En);return P=this.getScaleZoom(or,P),Ve&&(P=Math.round(P/(Ve/100))*(Ve/100),P=u?Math.ceil(P/Ve)*Ve:Math.floor(P/Ve)*Ve),Math.max(N,Math.min(ot,P))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new G(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,u){var g=this._getTopLeftPoint(i,u);return new Rt(g,g.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,u){var g=this.options.crs;return u=u===void 0?this._zoom:u,g.scale(i)/g.scale(u)},getScaleZoom:function(i,u){var g=this.options.crs;u=u===void 0?this._zoom:u;var P=g.zoom(i*g.scale(u));return isNaN(P)?1/0:P},project:function(i,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(xt(i),u)},unproject:function(i,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(X(i),u)},layerPointToLatLng:function(i){var u=X(i).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(i){var u=this.project(xt(i))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(xt(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(ut(i))},distance:function(i,u){return this.options.crs.distance(xt(i),xt(u))},containerPointToLayerPoint:function(i){return X(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return X(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var u=this.containerPointToLayerPoint(X(i));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(xt(i)))},mouseEventToContainerPoint:function(i){return Ga(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var u=this._container=Ua(i);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");bn(u,"scroll",this._onScroll,this),this._containerId=m(u)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&$e.any3d,wn(i,"leaflet-container"+($e.touch?" leaflet-touch":"")+($e.retina?" leaflet-retina":"")+($e.ielt9?" leaflet-oldie":"")+($e.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=br(i,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ci(this._mapPane,new G(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(wn(i.markerPane,"leaflet-zoom-hide"),wn(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,u,g){ci(this._mapPane,new G(0,0));var P=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var N=this._zoom!==u;this._moveStart(N,g)._move(i,u)._moveEnd(N),this.fire("viewreset"),P&&this.fire("load")},_moveStart:function(i,u){return i&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(i,u,g,P){u===void 0&&(u=this._zoom);var N=this._zoom!==u;return this._zoom=u,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),P?g&&g.pinch&&this.fire("zoom",g):((N||g&&g.pinch)&&this.fire("zoom",g),this.fire("move",g)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return J(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){ci(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[m(this._container)]=this;var u=i?Dn:bn;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),$e.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){J(this._resizeRequest),this._resizeRequest=$(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,u){for(var g=[],P,N=u==="mouseout"||u==="mouseover",ot=i.target||i.srcElement,jt=!1;ot;){if(P=this._targets[m(ot)],P&&(u==="click"||u==="preclick")&&this._draggableMoved(P)){jt=!0;break}if(P&&P.listens(u,!0)&&(N&&!Qs(ot,i)||(g.push(P),N))||ot===this._container)break;ot=ot.parentNode}return!g.length&&!jt&&!N&&this.listens(u,!0)&&(g=[this]),g},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var u=i.target||i.srcElement;if(!(!this._loaded||u._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(u))){var g=i.type;g==="mousedown"&&Vo(u),this._fireDOMEvent(i,g)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,u,g){if(i.type==="click"){var P=o({},i);P.type="preclick",this._fireDOMEvent(P,P.type,g)}var N=this._findEventTargets(i,u);if(g){for(var ot=[],jt=0;jt<g.length;jt++)g[jt].listens(u,!0)&&ot.push(g[jt]);N=ot.concat(N)}if(N.length){u==="contextmenu"&&mi(i);var ce=N[0],ve={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var Me=ce.getLatLng&&(!ce._radius||ce._radius<=10);ve.containerPoint=Me?this.latLngToContainerPoint(ce.getLatLng()):this.mouseEventToContainerPoint(i),ve.layerPoint=this.containerPointToLayerPoint(ve.containerPoint),ve.latlng=Me?ce.getLatLng():this.layerPointToLatLng(ve.layerPoint)}for(jt=0;jt<N.length;jt++)if(N[jt].fire(u,ve,!0),ve.originalEvent._stopped||N[jt].options.bubblingMouseEvents===!1&&Ct(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,u=this._handlers.length;i<u;i++)this._handlers[i].disable()},whenReady:function(i,u){return this._loaded?i.call(u||this,{target:this}):this.on("load",i,u),this},_getMapPanePos:function(){return ms(this._mapPane)||new G(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,u){var g=i&&u!==void 0?this._getNewPixelOrigin(i,u):this.getPixelOrigin();return g.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,u){var g=this.getSize()._divideBy(2);return this.project(i,u)._subtract(g)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,u,g){var P=this._getNewPixelOrigin(g,u);return this.project(i,u)._subtract(P)},_latLngBoundsToNewLayerBounds:function(i,u,g){var P=this._getNewPixelOrigin(g,u);return D([this.project(i.getSouthWest(),u)._subtract(P),this.project(i.getNorthWest(),u)._subtract(P),this.project(i.getSouthEast(),u)._subtract(P),this.project(i.getNorthEast(),u)._subtract(P)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,u,g){if(!g)return i;var P=this.project(i,u),N=this.getSize().divideBy(2),ot=new Rt(P.subtract(N),P.add(N)),jt=this._getBoundsOffset(ot,g,u);return Math.abs(jt.x)<=1&&Math.abs(jt.y)<=1?i:this.unproject(P.add(jt),u)},_limitOffset:function(i,u){if(!u)return i;var g=this.getPixelBounds(),P=new Rt(g.min.add(i),g.max.add(i));return i.add(this._getBoundsOffset(P,u))},_getBoundsOffset:function(i,u,g){var P=D(this.project(u.getNorthEast(),g),this.project(u.getSouthWest(),g)),N=P.min.subtract(i.min),ot=P.max.subtract(i.max),jt=this._rebound(N.x,-ot.x),ce=this._rebound(N.y,-ot.y);return new G(jt,ce)},_rebound:function(i,u){return i+u>0?Math.round(i-u)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(u))},_limitZoom:function(i){var u=this.getMinZoom(),g=this.getMaxZoom(),P=$e.any3d?this.options.zoomSnap:1;return P&&(i=Math.round(i/P)*P),Math.max(u,Math.min(g,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){zn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,u){var g=this._getCenterOffset(i)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(g)?!1:(this.panBy(g,u),!0)},_createAnimProxy:function(){var i=this._proxy=In("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(u){var g=yo,P=this._proxy.style[g];ps(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),P===this._proxy.style[g]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){yn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),u=this.getZoom();ps(this._proxy,this.project(i,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,u,g){if(this._animatingZoom)return!0;if(g=g||{},!this._zoomAnimated||g.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var P=this.getZoomScale(u),N=this._getCenterOffset(i)._divideBy(1-1/P);return g.animate!==!0&&!this.getSize().contains(N)?!1:($(function(){this._moveStart(!0,g.noMoveStart||!1)._animateZoom(i,u,!0)},this),!0)},_animateZoom:function(i,u,g,P){this._mapPane&&(g&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=u,wn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:u,noUpdate:P}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&zn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ba(i,u){return new Bn(i,u)}var on=nt.extend({options:{position:"topright"},initialize:function(i){O(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var u=this._map;return u&&u.removeControl(this),this.options.position=i,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var u=this._container=this.onAdd(i),g=this.getPosition(),P=i._controlCorners[g];return wn(u,"leaflet-control"),g.indexOf("bottom")!==-1?P.insertBefore(u,P.firstChild):P.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(yn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),Qi=function(i){return new on(i)};Bn.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},u="leaflet-",g=this._controlContainer=In("div",u+"control-container",this._container);function P(N,ot){var jt=u+N+" "+u+ot;i[N+ot]=In("div",jt,g)}P("top","left"),P("top","right"),P("bottom","left"),P("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)yn(this._controlCorners[i]);yn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Po=on.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,u,g,P){return g<P?-1:P<g?1:0}},initialize:function(i,u,g){O(this,g),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var P in i)this._addLayer(i[P],P);for(P in u)this._addLayer(u[P],P,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return on.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,u){return this._addLayer(i,u),this._map?this._update():this},addOverlay:function(i,u){return this._addLayer(i,u,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var u=this._getLayer(m(i));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){wn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(wn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):zn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return zn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",u=this._container=In("div",i),g=this.options.collapsed;u.setAttribute("aria-haspopup",!0),Lo(u),va(u);var P=this._section=In("section",i+"-list");g&&(this._map.on("click",this.collapse,this),bn(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var N=this._layersLink=In("a",i+"-toggle",u);N.href="#",N.title="Layers",N.setAttribute("role","button"),bn(N,{keydown:function(ot){ot.keyCode===13&&this._expandSafely()},click:function(ot){mi(ot),this._expandSafely()}},this),g||this.expand(),this._baseLayersList=In("div",i+"-base",P),this._separator=In("div",i+"-separator",P),this._overlaysList=In("div",i+"-overlays",P),u.appendChild(P)},_getLayer:function(i){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&m(this._layers[u].layer)===i)return this._layers[u]},_addLayer:function(i,u,g){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:u,overlay:g}),this.options.sortLayers&&this._layers.sort(c(function(P,N){return this.options.sortFunction(P.layer,N.layer,P.name,N.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Zs(this._baseLayersList),Zs(this._overlaysList),this._layerControlInputs=[];var i,u,g,P,N=0;for(g=0;g<this._layers.length;g++)P=this._layers[g],this._addItem(P),u=u||P.overlay,i=i||!P.overlay,N+=P.overlay?0:1;return this.options.hideSingleBase&&(i=i&&N>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=u&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var u=this._getLayer(m(i.target)),g=u.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;g&&this._map.fire(g,u)},_createRadioElement:function(i,u){var g='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(u?' checked="checked"':"")+"/>",P=document.createElement("div");return P.innerHTML=g,P.firstChild},_addItem:function(i){var u=document.createElement("label"),g=this._map.hasLayer(i.layer),P;i.overlay?(P=document.createElement("input"),P.type="checkbox",P.className="leaflet-control-layers-selector",P.defaultChecked=g):P=this._createRadioElement("leaflet-base-layers_"+m(this),g),this._layerControlInputs.push(P),P.layerId=m(i.layer),bn(P,"click",this._onInputClick,this);var N=document.createElement("span");N.innerHTML=" "+i.name;var ot=document.createElement("span");u.appendChild(ot),ot.appendChild(P),ot.appendChild(N);var jt=i.overlay?this._overlaysList:this._baseLayersList;return jt.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,u,g,P=[],N=[];this._handlingClick=!0;for(var ot=i.length-1;ot>=0;ot--)u=i[ot],g=this._getLayer(u.layerId).layer,u.checked?P.push(g):u.checked||N.push(g);for(ot=0;ot<N.length;ot++)this._map.hasLayer(N[ot])&&this._map.removeLayer(N[ot]);for(ot=0;ot<P.length;ot++)this._map.hasLayer(P[ot])||this._map.addLayer(P[ot]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,u,g,P=this._map.getZoom(),N=i.length-1;N>=0;N--)u=i[N],g=this._getLayer(u.layerId).layer,u.disabled=g.options.minZoom!==void 0&&P<g.options.minZoom||g.options.maxZoom!==void 0&&P>g.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,bn(i,"click",mi),this.expand();var u=this;setTimeout(function(){Dn(i,"click",mi),u._preventClick=!1})}}),to=function(i,u,g){return new Po(i,u,g)},ur=on.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var u="leaflet-control-zoom",g=In("div",u+" leaflet-bar"),P=this.options;return this._zoomInButton=this._createButton(P.zoomInText,P.zoomInTitle,u+"-in",g,this._zoomIn),this._zoomOutButton=this._createButton(P.zoomOutText,P.zoomOutTitle,u+"-out",g,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),g},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,u,g,P,N){var ot=In("a",g,P);return ot.innerHTML=i,ot.href="#",ot.title=u,ot.setAttribute("role","button"),ot.setAttribute("aria-label",u),Lo(ot),bn(ot,"click",wr),bn(ot,"click",N,this),bn(ot,"click",this._refocusOnMap,this),ot},_updateDisabled:function(){var i=this._map,u="leaflet-disabled";zn(this._zoomInButton,u),zn(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(wn(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(wn(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});Bn.mergeOptions({zoomControl:!0}),Bn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ur,this.addControl(this.zoomControl))});var wa=function(i){return new ur(i)},gs=on.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var u="leaflet-control-scale",g=In("div",u),P=this.options;return this._addScales(P,u+"-line",g),i.on(P.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),g},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,u,g){i.metric&&(this._mScale=In("div",u,g)),i.imperial&&(this._iScale=In("div",u,g))},_update:function(){var i=this._map,u=i.getSize().y/2,g=i.distance(i.containerPointToLatLng([0,u]),i.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(g)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var u=this._getRoundNum(i),g=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,g,u/i)},_updateImperial:function(i){var u=i*3.2808399,g,P,N;u>5280?(g=u/5280,P=this._getRoundNum(g),this._updateScale(this._iScale,P+" mi",P/g)):(N=this._getRoundNum(u),this._updateScale(this._iScale,N+" ft",N/u))},_updateScale:function(i,u,g){i.style.width=Math.round(this.options.maxWidth*g)+"px",i.innerHTML=u},_getRoundNum:function(i){var u=Math.pow(10,(Math.floor(i)+"").length-1),g=i/u;return g=g>=10?10:g>=5?5:g>=3?3:g>=2?2:1,u*g}}),Ko=function(i){return new gs(i)},Yo='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Nr=on.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+($e.inlineSvg?Yo+" ":"")+"Leaflet</a>"},initialize:function(i){O(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=In("div","leaflet-control-attribution"),Lo(this._container);for(var u in i._layers)i._layers[u].getAttribution&&this.addAttribution(i._layers[u].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var u in this._attributions)this._attributions[u]&&i.push(u);var g=[];this.options.prefix&&g.push(this.options.prefix),i.length&&g.push(i.join(", ")),this._container.innerHTML=g.join(' <span aria-hidden="true">|</span> ')}}});Bn.mergeOptions({attributionControl:!0}),Bn.addInitHook(function(){this.options.attributionControl&&new Nr().addTo(this)});var Jo=function(i){return new Nr(i)};on.Layers=Po,on.Zoom=ur,on.Scale=gs,on.Attribution=Nr,Qi.layers=to,Qi.zoom=wa,Qi.scale=Ko,Qi.attribution=Jo;var ki=nt.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ki.addTo=function(i,u){return i.addHandler(u,this),this};var Va={Events:tt},So=$e.touch?"touchstart mousedown":"mousedown",Dr=_t.extend({options:{clickTolerance:3},initialize:function(i,u,g,P){O(this,P),this._element=i,this._dragStartTarget=u||i,this._preventOutline=g},enable:function(){this._enabled||(bn(this._dragStartTarget,So,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Dr._dragging===this&&this.finishDrag(!0),Dn(this._dragStartTarget,So,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!wo(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){Dr._dragging===this&&this.finishDrag();return}if(!(Dr._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(Dr._dragging=this,this._preventOutline&&Vo(this._element),ga(),xo(),!this._moving)){this.fire("down");var u=i.touches?i.touches[0]:i,g=$a(this._element);this._startPoint=new G(u.clientX,u.clientY),this._startPos=ms(this._element),this._parentScale=Ho(g);var P=i.type==="mousedown";bn(document,P?"mousemove":"touchmove",this._onMove,this),bn(document,P?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var u=i.touches&&i.touches.length===1?i.touches[0]:i,g=new G(u.clientX,u.clientY)._subtract(this._startPoint);!g.x&&!g.y||Math.abs(g.x)+Math.abs(g.y)<this.options.clickTolerance||(g.x/=this._parentScale.x,g.y/=this._parentScale.y,mi(i),this._moved||(this.fire("dragstart"),this._moved=!0,wn(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),wn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(g),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),ci(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){zn(document.body,"leaflet-dragging"),this._lastTarget&&(zn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Dn(document,"mousemove touchmove",this._onMove,this),Dn(document,"mouseup touchend touchcancel",this._onUp,this),Qr(),Ts();var u=this._moved&&this._moving;this._moving=!1,Dr._dragging=!1,u&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function Xo(i,u,g){var P,N=[1,4,2,8],ot,jt,ce,ve,Me,Ve,sn,En;for(ot=0,Ve=i.length;ot<Ve;ot++)i[ot]._code=ye(i[ot],u);for(ce=0;ce<4;ce++){for(sn=N[ce],P=[],ot=0,Ve=i.length,jt=Ve-1;ot<Ve;jt=ot++)ve=i[ot],Me=i[jt],ve._code&sn?Me._code&sn||(En=ne(Me,ve,sn,u,g),En._code=ye(En,u),P.push(En)):(Me._code&sn&&(En=ne(Me,ve,sn,u,g),En._code=ye(En,u),P.push(En)),P.push(ve));i=P}return i}function xa(i,u){var g,P,N,ot,jt,ce,ve,Me,Ve;if(!i||i.length===0)throw new Error("latlngs not passed");Ze(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var sn=xt([0,0]),En=ut(i),or=En.getNorthWest().distanceTo(En.getSouthWest())*En.getNorthEast().distanceTo(En.getNorthWest());or<1700&&(sn=La(i));var Mi=i.length,mr=[];for(g=0;g<Mi;g++){var fi=xt(i[g]);mr.push(u.project(xt([fi.lat-sn.lat,fi.lng-sn.lng])))}for(ce=ve=Me=0,g=0,P=Mi-1;g<Mi;P=g++)N=mr[g],ot=mr[P],jt=N.y*ot.x-ot.y*N.x,ve+=(N.x+ot.x)*jt,Me+=(N.y+ot.y)*jt,ce+=jt*3;ce===0?Ve=mr[0]:Ve=[ve/ce,Me/ce];var Ls=u.unproject(X(Ve));return xt([Ls.lat+sn.lat,Ls.lng+sn.lng])}function La(i){for(var u=0,g=0,P=0,N=0;N<i.length;N++){var ot=xt(i[N]);u+=ot.lat,g+=ot.lng,P++}return xt([u/P,g/P])}var Qo={__proto__:null,clipPolygon:Xo,polygonCenter:xa,centroid:La};function eo(i,u){if(!u||!i.length)return i.slice();var g=u*u;return i=H(i,g),i=gi(i,g),i}function Eo(i,u,g){return Math.sqrt(Ge(i,u,g,!0))}function no(i,u,g){return Ge(i,u,g)}function gi(i,u){var g=i.length,P=typeof Uint8Array<"u"?Uint8Array:Array,N=new P(g);N[0]=N[g-1]=1,x(i,N,u,0,g-1);var ot,jt=[];for(ot=0;ot<g;ot++)N[ot]&&jt.push(i[ot]);return jt}function x(i,u,g,P,N){var ot=0,jt,ce,ve;for(ce=P+1;ce<=N-1;ce++)ve=Ge(i[ce],i[P],i[N],!0),ve>ot&&(jt=ce,ot=ve);ot>g&&(u[jt]=1,x(i,u,g,P,jt),x(i,u,g,jt,N))}function H(i,u){for(var g=[i[0]],P=1,N=0,ot=i.length;P<ot;P++)Be(i[P],i[N])>u&&(g.push(i[P]),N=P);return N<ot-1&&g.push(i[ot-1]),g}var At;function qt(i,u,g,P,N){var ot=P?At:ye(i,g),jt=ye(u,g),ce,ve,Me;for(At=jt;;){if(!(ot|jt))return[i,u];if(ot&jt)return!1;ce=ot||jt,ve=ne(i,u,ce,g,N),Me=ye(ve,g),ce===ot?(i=ve,ot=Me):(u=ve,jt=Me)}}function ne(i,u,g,P,N){var ot=u.x-i.x,jt=u.y-i.y,ce=P.min,ve=P.max,Me,Ve;return g&8?(Me=i.x+ot*(ve.y-i.y)/jt,Ve=ve.y):g&4?(Me=i.x+ot*(ce.y-i.y)/jt,Ve=ce.y):g&2?(Me=ve.x,Ve=i.y+jt*(ve.x-i.x)/ot):g&1&&(Me=ce.x,Ve=i.y+jt*(ce.x-i.x)/ot),new G(Me,Ve,N)}function ye(i,u){var g=0;return i.x<u.min.x?g|=1:i.x>u.max.x&&(g|=2),i.y<u.min.y?g|=4:i.y>u.max.y&&(g|=8),g}function Be(i,u){var g=u.x-i.x,P=u.y-i.y;return g*g+P*P}function Ge(i,u,g,P){var N=u.x,ot=u.y,jt=g.x-N,ce=g.y-ot,ve=jt*jt+ce*ce,Me;return ve>0&&(Me=((i.x-N)*jt+(i.y-ot)*ce)/ve,Me>1?(N=g.x,ot=g.y):Me>0&&(N+=jt*Me,ot+=ce*Me)),jt=i.x-N,ce=i.y-ot,P?jt*jt+ce*ce:new G(N,ot)}function Ze(i){return!Y(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function rn(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ze(i)}function mn(i,u){var g,P,N,ot,jt,ce,ve,Me;if(!i||i.length===0)throw new Error("latlngs not passed");Ze(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var Ve=xt([0,0]),sn=ut(i),En=sn.getNorthWest().distanceTo(sn.getSouthWest())*sn.getNorthEast().distanceTo(sn.getNorthWest());En<1700&&(Ve=La(i));var or=i.length,Mi=[];for(g=0;g<or;g++){var mr=xt(i[g]);Mi.push(u.project(xt([mr.lat-Ve.lat,mr.lng-Ve.lng])))}for(g=0,P=0;g<or-1;g++)P+=Mi[g].distanceTo(Mi[g+1])/2;if(P===0)Me=Mi[0];else for(g=0,ot=0;g<or-1;g++)if(jt=Mi[g],ce=Mi[g+1],N=jt.distanceTo(ce),ot+=N,ot>P){ve=(ot-P)/N,Me=[ce.x-ve*(ce.x-jt.x),ce.y-ve*(ce.y-jt.y)];break}var fi=u.unproject(X(Me));return xt([fi.lat+Ve.lat,fi.lng+Ve.lng])}var Tn={__proto__:null,simplify:eo,pointToSegmentDistance:Eo,closestPointOnSegment:no,clipSegment:qt,_getEdgeIntersection:ne,_getBitCode:ye,_sqClosestPointOnSegment:Ge,isFlat:Ze,_flat:rn,polylineCenter:mn},si={project:function(i){return new G(i.lng,i.lat)},unproject:function(i){return new vt(i.y,i.x)},bounds:new Rt([-180,-90],[180,90])},Fn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Rt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var u=Math.PI/180,g=this.R,P=i.lat*u,N=this.R_MINOR/g,ot=Math.sqrt(1-N*N),jt=ot*Math.sin(P),ce=Math.tan(Math.PI/4-P/2)/Math.pow((1-jt)/(1+jt),ot/2);return P=-g*Math.log(Math.max(ce,1e-10)),new G(i.lng*u*g,P)},unproject:function(i){for(var u=180/Math.PI,g=this.R,P=this.R_MINOR/g,N=Math.sqrt(1-P*P),ot=Math.exp(-i.y/g),jt=Math.PI/2-2*Math.atan(ot),ce=0,ve=.1,Me;ce<15&&Math.abs(ve)>1e-7;ce++)Me=N*Math.sin(jt),Me=Math.pow((1-Me)/(1+Me),N/2),ve=Math.PI/2-2*Math.atan(ot*Me)-jt,jt+=ve;return new vt(jt*u,i.x*u/g)}},Gn={__proto__:null,LonLat:si,Mercator:Fn,SphericalMercator:Kt},Pi=o({},St,{code:"EPSG:3395",projection:Fn,transformation:function(){var i=.5/(Math.PI*Fn.R);return it(i,.5,-i,.5)}()}),wi=o({},St,{code:"EPSG:4326",projection:si,transformation:it(1/180,1,-1/180,.5)}),xr=o({},dt,{projection:si,transformation:it(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,u){var g=u.lng-i.lng,P=u.lat-i.lat;return Math.sqrt(g*g+P*P)},infinite:!0});dt.Earth=St,dt.EPSG3395=Pi,dt.EPSG3857=ht,dt.EPSG900913=It,dt.EPSG4326=wi,dt.Simple=xr;var Qn=_t.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[m(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[m(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var u=i.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var g=this.getEvents();u.on(g,this),this.once("remove",function(){u.off(g,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});Bn.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var u=m(i);return this._layers[u]?this:(this._layers[u]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var u=m(i);return this._layers[u]?(this._loaded&&i.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return m(i)in this._layers},eachLayer:function(i,u){for(var g in this._layers)i.call(u,this._layers[g]);return this},_addLayers:function(i){i=i?Y(i)?i:[i]:[];for(var u=0,g=i.length;u<g;u++)this.addLayer(i[u])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[m(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var u=m(i);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,u=-1/0,g=this._getZoomSpan();for(var P in this._zoomBoundLayers){var N=this._zoomBoundLayers[P].options;i=N.minZoom===void 0?i:Math.min(i,N.minZoom),u=N.maxZoom===void 0?u:Math.max(u,N.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=i===1/0?void 0:i,g!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var tr=Qn.extend({initialize:function(i,u){O(this,u),this._layers={};var g,P;if(i)for(g=0,P=i.length;g<P;g++)this.addLayer(i[g])},addLayer:function(i){var u=this.getLayerId(i);return this._layers[u]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var u=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(i){var u=typeof i=="number"?i:this.getLayerId(i);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var u=Array.prototype.slice.call(arguments,1),g,P;for(g in this._layers)P=this._layers[g],P[i]&&P[i].apply(P,u);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,u){for(var g in this._layers)i.call(u,this._layers[g]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return m(i)}}),Ha=function(i,u){return new tr(i,u)},er=tr.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),tr.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),tr.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new Z;for(var u in this._layers){var g=this._layers[u];i.extend(g.getBounds?g.getBounds():g.getLatLng())}return i}}),Ca=function(i,u){return new er(i,u)},ts=nt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){O(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,u){var g=this._getIconUrl(i);if(!g){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var P=this._createImg(g,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(P,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(P.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),P},_setIconStyles:function(i,u){var g=this.options,P=g[u+"Size"];typeof P=="number"&&(P=[P,P]);var N=X(P),ot=X(u==="shadow"&&g.shadowAnchor||g.iconAnchor||N&&N.divideBy(2,!0));i.className="leaflet-marker-"+u+" "+(g.className||""),ot&&(i.style.marginLeft=-ot.x+"px",i.style.marginTop=-ot.y+"px"),N&&(i.style.width=N.x+"px",i.style.height=N.y+"px")},_createImg:function(i,u){return u=u||document.createElement("img"),u.src=i,u},_getIconUrl:function(i){return $e.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function ka(i){return new ts(i)}var Is=ts.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof Is.imagePath!="string"&&(Is.imagePath=this._detectIconPath()),(this.options.imagePath||Is.imagePath)+ts.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var u=function(g,P,N){var ot=P.exec(g);return ot&&ot[N]};return i=u(i,/^url\((['"])?(.+)\1\)$/,2),i&&u(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=In("div","leaflet-default-icon-path",document.body),u=br(i,"background-image")||br(i,"backgroundImage");if(document.body.removeChild(i),u=this._stripUrl(u),u)return u;var g=document.querySelector('link[href$="leaflet.css"]');return g?g.href.substring(0,g.href.length-11-1):""}}),Rs=ki.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new Dr(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),wn(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&zn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var u=this._marker,g=u._map,P=this._marker.options.autoPanSpeed,N=this._marker.options.autoPanPadding,ot=ms(u._icon),jt=g.getPixelBounds(),ce=g.getPixelOrigin(),ve=D(jt.min._subtract(ce).add(N),jt.max._subtract(ce).subtract(N));if(!ve.contains(ot)){var Me=X((Math.max(ve.max.x,ot.x)-ve.max.x)/(jt.max.x-ve.max.x)-(Math.min(ve.min.x,ot.x)-ve.min.x)/(jt.min.x-ve.min.x),(Math.max(ve.max.y,ot.y)-ve.max.y)/(jt.max.y-ve.max.y)-(Math.min(ve.min.y,ot.y)-ve.min.y)/(jt.min.y-ve.min.y)).multiplyBy(P);g.panBy(Me,{animate:!1}),this._draggable._newPos._add(Me),this._draggable._startPos._add(Me),ci(u._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=$(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(J(this._panRequest),this._panRequest=$(this._adjustPan.bind(this,i)))},_onDrag:function(i){var u=this._marker,g=u._shadow,P=ms(u._icon),N=u._map.layerPointToLatLng(P);g&&ci(g,P),u._latlng=N,i.latlng=N,i.oldLatLng=this._oldLatLng,u.fire("move",i).fire("drag",i)},_onDragEnd:function(i){J(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),xi=Qn.extend({options:{icon:new Is,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,u){O(this,u),this._latlng=xt(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var u=this._latlng;return this._latlng=xt(i),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),g=i.icon.createIcon(this._icon),P=!1;g!==this._icon&&(this._icon&&this._removeIcon(),P=!0,i.title&&(g.title=i.title),g.tagName==="IMG"&&(g.alt=i.alt||"")),wn(g,u),i.keyboard&&(g.tabIndex="0",g.setAttribute("role","button")),this._icon=g,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&bn(g,"focus",this._panOnFocus,this);var N=i.icon.createShadow(this._shadow),ot=!1;N!==this._shadow&&(this._removeShadow(),ot=!0),N&&(wn(N,u),N.alt=""),this._shadow=N,i.opacity<1&&this._updateOpacity(),P&&this.getPane().appendChild(this._icon),this._initInteraction(),N&&ot&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Dn(this._icon,"focus",this._panOnFocus,this),yn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&yn(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&ci(this._icon,i),this._shadow&&ci(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var u=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(wn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Rs)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Rs(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&Gi(this._icon,i),this._shadow&&Gi(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var u=this.options.icon.options,g=u.iconSize?X(u.iconSize):X(0,0),P=u.iconAnchor?X(u.iconAnchor):X(0,0);i.panInside(this._latlng,{paddingTopLeft:P,paddingBottomRight:g.subtract(P)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ta(i,u){return new xi(i,u)}var cr=Qn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return O(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),nr=cr.extend({options:{fill:!0,radius:10},initialize:function(i,u){O(this,u),this._latlng=xt(i),this._radius=this.options.radius},setLatLng:function(i){var u=this._latlng;return this._latlng=xt(i),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var u=i&&i.radius||this._radius;return cr.prototype.setStyle.call(this,i),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,u=this._radiusY||i,g=this._clickTolerance(),P=[i+g,u+g];this._pxBounds=new Rt(this._point.subtract(P),this._point.add(P))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ea(i,u){return new nr(i,u)}var Vi=nr.extend({initialize:function(i,u,g){if(typeof u=="number"&&(u=o({},g,{radius:u})),O(this,u),this._latlng=xt(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new Z(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:cr.prototype.setStyle,_project:function(){var i=this._latlng.lng,u=this._latlng.lat,g=this._map,P=g.options.crs;if(P.distance===St.distance){var N=Math.PI/180,ot=this._mRadius/St.R/N,jt=g.project([u+ot,i]),ce=g.project([u-ot,i]),ve=jt.add(ce).divideBy(2),Me=g.unproject(ve).lat,Ve=Math.acos((Math.cos(ot*N)-Math.sin(u*N)*Math.sin(Me*N))/(Math.cos(u*N)*Math.cos(Me*N)))/N;(isNaN(Ve)||Ve===0)&&(Ve=ot/Math.cos(Math.PI/180*u)),this._point=ve.subtract(g.getPixelOrigin()),this._radius=isNaN(Ve)?0:ve.x-g.project([Me,i-Ve]).x,this._radiusY=ve.y-jt.y}else{var sn=P.unproject(P.project(this._latlng).subtract([this._mRadius,0]));this._point=g.latLngToLayerPoint(this._latlng),this._radius=this._point.x-g.latLngToLayerPoint(sn).x}this._updateBounds()}});function Fs(i,u,g){return new Vi(i,u,g)}var Lr=cr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,u){O(this,u),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var u=1/0,g=null,P=Ge,N,ot,jt=0,ce=this._parts.length;jt<ce;jt++)for(var ve=this._parts[jt],Me=1,Ve=ve.length;Me<Ve;Me++){N=ve[Me-1],ot=ve[Me];var sn=P(i,N,ot,!0);sn<u&&(u=sn,g=P(i,N,ot))}return g&&(g.distance=Math.sqrt(u)),g},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return mn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,u){return u=u||this._defaultShape(),i=xt(i),u.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new Z,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return Ze(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var u=[],g=Ze(i),P=0,N=i.length;P<N;P++)g?(u[P]=xt(i[P]),this._bounds.extend(u[P])):u[P]=this._convertLatLngs(i[P]);return u},_project:function(){var i=new Rt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),u=new G(i,i);this._rawPxBounds&&(this._pxBounds=new Rt([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(i,u,g){var P=i[0]instanceof vt,N=i.length,ot,jt;if(P){for(jt=[],ot=0;ot<N;ot++)jt[ot]=this._map.latLngToLayerPoint(i[ot]),g.extend(jt[ot]);u.push(jt)}else for(ot=0;ot<N;ot++)this._projectLatlngs(i[ot],u,g)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,g,P,N,ot,jt,ce,ve;for(g=0,N=0,ot=this._rings.length;g<ot;g++)for(ve=this._rings[g],P=0,jt=ve.length;P<jt-1;P++)ce=qt(ve[P],ve[P+1],i,P,!0),ce&&(u[N]=u[N]||[],u[N].push(ce[0]),(ce[1]!==ve[P+1]||P===jt-2)&&(u[N].push(ce[1]),N++))}},_simplifyPoints:function(){for(var i=this._parts,u=this.options.smoothFactor,g=0,P=i.length;g<P;g++)i[g]=eo(i[g],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,u){var g,P,N,ot,jt,ce,ve=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(g=0,ot=this._parts.length;g<ot;g++)for(ce=this._parts[g],P=0,jt=ce.length,N=jt-1;P<jt;N=P++)if(!(!u&&P===0)&&Eo(i,ce[N],ce[P])<=ve)return!0;return!1}});function Wa(i,u){return new Lr(i,u)}Lr._flat=rn;var Si=Lr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return xa(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var u=Lr.prototype._convertLatLngs.call(this,i),g=u.length;return g>=2&&u[0]instanceof vt&&u[0].equals(u[g-1])&&u.pop(),u},_setLatLngs:function(i){Lr.prototype._setLatLngs.call(this,i),Ze(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ze(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,u=this.options.weight,g=new G(u,u);if(i=new Rt(i.min.subtract(g),i.max.add(g)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var P=0,N=this._rings.length,ot;P<N;P++)ot=Xo(this._rings[P],i,!0),ot.length&&this._parts.push(ot)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var u=!1,g,P,N,ot,jt,ce,ve,Me;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(ot=0,ve=this._parts.length;ot<ve;ot++)for(g=this._parts[ot],jt=0,Me=g.length,ce=Me-1;jt<Me;ce=jt++)P=g[jt],N=g[ce],P.y>i.y!=N.y>i.y&&i.x<(N.x-P.x)*(i.y-P.y)/(N.y-P.y)+P.x&&(u=!u);return u||Lr.prototype._containsPoint.call(this,i,!0)}});function _s(i,u){return new Si(i,u)}var Or=er.extend({initialize:function(i,u){O(this,u),this._layers={},i&&this.addData(i)},addData:function(i){var u=Y(i)?i:i.features,g,P,N;if(u){for(g=0,P=u.length;g<P;g++)N=u[g],(N.geometries||N.geometry||N.features||N.coordinates)&&this.addData(N);return this}var ot=this.options;if(ot.filter&&!ot.filter(i))return this;var jt=Mo(i,ot);return jt?(jt.feature=Ir(i),jt.defaultOptions=jt.options,this.resetStyle(jt),ot.onEachFeature&&ot.onEachFeature(i,jt),this.addLayer(jt)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=o({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(u){this._setLayerStyle(u,i)},this)},_setLayerStyle:function(i,u){i.setStyle&&(typeof u=="function"&&(u=u(i.feature)),i.setStyle(u))}});function Mo(i,u){var g=i.type==="Feature"?i.geometry:i,P=g?g.coordinates:null,N=[],ot=u&&u.pointToLayer,jt=u&&u.coordsToLatLng||vs,ce,ve,Me,Ve;if(!P&&!g)return null;switch(g.type){case"Point":return ce=jt(P),js(ot,i,ce,u);case"MultiPoint":for(Me=0,Ve=P.length;Me<Ve;Me++)ce=jt(P[Me]),N.push(js(ot,i,ce,u));return new er(N);case"LineString":case"MultiLineString":return ve=Ri(P,g.type==="LineString"?0:1,jt),new Lr(ve,u);case"Polygon":case"MultiPolygon":return ve=Ri(P,g.type==="Polygon"?1:2,jt),new Si(ve,u);case"GeometryCollection":for(Me=0,Ve=g.geometries.length;Me<Ve;Me++){var sn=Mo({geometry:g.geometries[Me],type:"Feature",properties:i.properties},u);sn&&N.push(sn)}return new er(N);case"FeatureCollection":for(Me=0,Ve=g.features.length;Me<Ve;Me++){var En=Mo(g.features[Me],u);En&&N.push(En)}return new er(N);default:throw new Error("Invalid GeoJSON object.")}}function js(i,u,g,P){return i?i(u,g):new xi(g,P&&P.markersInheritOptions&&P)}function vs(i){return new vt(i[1],i[0],i[2])}function Ri(i,u,g){for(var P=[],N=0,ot=i.length,jt;N<ot;N++)jt=u?Ri(i[N],u-1,g):(g||vs)(i[N]),P.push(jt);return P}function Ti(i,u){return i=xt(i),i.alt!==void 0?[E(i.lng,u),E(i.lat,u),E(i.alt,u)]:[E(i.lng,u),E(i.lat,u)]}function es(i,u,g,P){for(var N=[],ot=0,jt=i.length;ot<jt;ot++)N.push(u?es(i[ot],Ze(i[ot])?0:u-1,g,P):Ti(i[ot],P));return!u&&g&&N.length>0&&N.push(N[0].slice()),N}function hr(i,u){return i.feature?o({},i.feature,{geometry:u}):Ir(u)}function Ir(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var zs={toGeoJSON:function(i){return hr(this,{type:"Point",coordinates:Ti(this.getLatLng(),i)})}};xi.include(zs),Vi.include(zs),nr.include(zs),Lr.include({toGeoJSON:function(i){var u=!Ze(this._latlngs),g=es(this._latlngs,u?1:0,!1,i);return hr(this,{type:(u?"Multi":"")+"LineString",coordinates:g})}}),Si.include({toGeoJSON:function(i){var u=!Ze(this._latlngs),g=u&&!Ze(this._latlngs[0]),P=es(this._latlngs,g?2:u?1:0,!0,i);return u||(P=[P]),hr(this,{type:(g?"Multi":"")+"Polygon",coordinates:P})}}),tr.include({toMultiPoint:function(i){var u=[];return this.eachLayer(function(g){u.push(g.toGeoJSON(i).geometry.coordinates)}),hr(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(i){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(i);var g=u==="GeometryCollection",P=[];return this.eachLayer(function(N){if(N.toGeoJSON){var ot=N.toGeoJSON(i);if(g)P.push(ot.geometry);else{var jt=Ir(ot);jt.type==="FeatureCollection"?P.push.apply(P,jt.features):P.push(jt)}}}),g?hr(this,{geometries:P,type:"GeometryCollection"}):{type:"FeatureCollection",features:P}}});function Rr(i,u){return new Or(i,u)}var hi=Rr,ys=Qn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,u,g){this._url=i,this._bounds=ut(u),O(this,g)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(wn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){yn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Bs(this._image),this},bringToBack:function(){return this._map&&ds(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=ut(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",u=this._image=i?this._url:In("img");if(wn(u,"leaflet-image-layer"),this._zoomAnimated&&wn(u,"leaflet-zoom-animated"),this.options.className&&wn(u,this.options.className),u.onselectstart=w,u.onmousemove=w,u.onload=c(this.fire,this,"load"),u.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(i){var u=this._map.getZoomScale(i.zoom),g=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;ps(this._image,g,u)},_reset:function(){var i=this._image,u=new Rt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),g=u.getSize();ci(i,u.min),i.style.width=g.x+"px",i.style.height=g.y+"px"},_updateOpacity:function(){Gi(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),ir=function(i,u,g){return new ys(i,u,g)},Hi=ys.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",u=this._image=i?this._url:In("video");if(wn(u,"leaflet-image-layer"),this._zoomAnimated&&wn(u,"leaflet-zoom-animated"),this.options.className&&wn(u,this.options.className),u.onselectstart=w,u.onmousemove=w,u.onloadeddata=c(this.fire,this,"load"),i){for(var g=u.getElementsByTagName("source"),P=[],N=0;N<g.length;N++)P.push(g[N].src);this._url=g.length>0?P:[u.src];return}Y(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var ot=0;ot<this._url.length;ot++){var jt=In("source");jt.src=this._url[ot],u.appendChild(jt)}}});function Ao(i,u,g){return new Hi(i,u,g)}var Pa=ys.extend({_initImage:function(){var i=this._image=this._url;wn(i,"leaflet-image-layer"),this._zoomAnimated&&wn(i,"leaflet-zoom-animated"),this.options.className&&wn(i,this.options.className),i.onselectstart=w,i.onmousemove=w}});function Sa(i,u,g){return new Pa(i,u,g)}var Wi=Qn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,u){i&&(i instanceof vt||Y(i))?(this._latlng=xt(i),O(this,u)):(O(this,i),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&Gi(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&Gi(this._container,1),this.bringToFront(),this.options.interactive&&(wn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(Gi(this._container,0),this._removeTimeout=setTimeout(c(yn,void 0,this._container),200)):yn(this._container),this.options.interactive&&(zn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=xt(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Bs(this._container),this},bringToBack:function(){return this._map&&ds(this._container),this},_prepareOpen:function(i){var u=this._source;if(!u._map)return!1;if(u instanceof er){u=null;var g=this._source._layers;for(var P in g)if(g[P]._map){u=g[P];break}if(!u)return!1;this._source=u}if(!i)if(u.getCenter)i=u.getCenter();else if(u.getLatLng)i=u.getLatLng();else if(u.getBounds)i=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")i.innerHTML=u;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),u=X(this.options.offset),g=this._getAnchor();this._zoomAnimated?ci(this._container,i.add(g)):u=u.add(i).add(g);var P=this._containerBottom=-u.y,N=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=P+"px",this._container.style.left=N+"px"}},_getAnchor:function(){return[0,0]}});Bn.include({_initOverlay:function(i,u,g,P){var N=u;return N instanceof i||(N=new i(P).setContent(u)),g&&N.setLatLng(g),N}}),Qn.include({_initOverlay:function(i,u,g,P){var N=g;return N instanceof i?(O(N,P),N._source=this):(N=u&&!P?u:new i(P,this),N.setContent(g)),N}});var fr=Wi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,Wi.prototype.openOn.call(this,i)},onAdd:function(i){Wi.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof cr||this._source.on("preclick",Ds))},onRemove:function(i){Wi.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof cr||this._source.off("preclick",Ds))},getEvents:function(){var i=Wi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",u=this._container=In("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),g=this._wrapper=In("div",i+"-content-wrapper",u);if(this._contentNode=In("div",i+"-content",g),Lo(u),va(this._contentNode),bn(u,"contextmenu",Ds),this._tipContainer=In("div",i+"-tip-container",u),this._tip=In("div",i+"-tip",this._tipContainer),this.options.closeButton){var P=this._closeButton=In("a",i+"-close-button",u);P.setAttribute("role","button"),P.setAttribute("aria-label","Close popup"),P.href="#close",P.innerHTML='<span aria-hidden="true">&#215;</span>',bn(P,"click",function(N){mi(N),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,u=i.style;u.width="",u.whiteSpace="nowrap";var g=i.offsetWidth;g=Math.min(g,this.options.maxWidth),g=Math.max(g,this.options.minWidth),u.width=g+1+"px",u.whiteSpace="",u.height="";var P=i.offsetHeight,N=this.options.maxHeight,ot="leaflet-popup-scrolled";N&&P>N?(u.height=N+"px",wn(i,ot)):zn(i,ot),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var u=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),g=this._getAnchor();ci(this._container,u.add(g))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,u=parseInt(br(this._container,"marginBottom"),10)||0,g=this._container.offsetHeight+u,P=this._containerWidth,N=new G(this._containerLeft,-g-this._containerBottom);N._add(ms(this._container));var ot=i.layerPointToContainerPoint(N),jt=X(this.options.autoPanPadding),ce=X(this.options.autoPanPaddingTopLeft||jt),ve=X(this.options.autoPanPaddingBottomRight||jt),Me=i.getSize(),Ve=0,sn=0;ot.x+P+ve.x>Me.x&&(Ve=ot.x+P-Me.x+ve.x),ot.x-Ve-ce.x<0&&(Ve=ot.x-ce.x),ot.y+g+ve.y>Me.y&&(sn=ot.y+g-Me.y+ve.y),ot.y-sn-ce.y<0&&(sn=ot.y-ce.y),(Ve||sn)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([Ve,sn]))}},_getAnchor:function(){return X(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),io=function(i,u){return new fr(i,u)};Bn.mergeOptions({closePopupOnClick:!0}),Bn.include({openPopup:function(i,u,g){return this._initOverlay(fr,i,u,g).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),Qn.include({bindPopup:function(i,u){return this._popup=this._initOverlay(fr,this._popup,i,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof er||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){wr(i);var u=i.layer||i.target;if(this._popup._source===u&&!(u instanceof cr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=u,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var bs=Wi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){Wi.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){Wi.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=Wi.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",u=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=In("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+m(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var u,g,P=this._map,N=this._container,ot=P.latLngToContainerPoint(P.getCenter()),jt=P.layerPointToContainerPoint(i),ce=this.options.direction,ve=N.offsetWidth,Me=N.offsetHeight,Ve=X(this.options.offset),sn=this._getAnchor();ce==="top"?(u=ve/2,g=Me):ce==="bottom"?(u=ve/2,g=0):ce==="center"?(u=ve/2,g=Me/2):ce==="right"?(u=0,g=Me/2):ce==="left"?(u=ve,g=Me/2):jt.x<ot.x?(ce="right",u=0,g=Me/2):(ce="left",u=ve+(Ve.x+sn.x)*2,g=Me/2),i=i.subtract(X(u,g,!0)).add(Ve).add(sn),zn(N,"leaflet-tooltip-right"),zn(N,"leaflet-tooltip-left"),zn(N,"leaflet-tooltip-top"),zn(N,"leaflet-tooltip-bottom"),wn(N,"leaflet-tooltip-"+ce),ci(N,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&Gi(this._container,i)},_animateZoom:function(i){var u=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(u)},_getAnchor:function(){return X(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),na=function(i,u){return new bs(i,u)};Bn.include({openTooltip:function(i,u,g){return this._initOverlay(bs,i,u,g).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),Qn.include({bindTooltip:function(i,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(bs,this._tooltip,i,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var u=i?"off":"on",g={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?g.add=this._openTooltip:(g.mouseover=this._openTooltip,g.mouseout=this.closeTooltip,g.click=this._openTooltip,this._map?this._addFocusListeners():g.add=this._addFocusListeners),this._tooltip.options.sticky&&(g.mousemove=this._moveTooltip),this[u](g),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof er||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var u=typeof i.getElement=="function"&&i.getElement();u&&(bn(u,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),bn(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var u=typeof i.getElement=="function"&&i.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var u=i.latlng,g,P;this._tooltip.options.sticky&&i.originalEvent&&(g=this._map.mouseEventToContainerPoint(i.originalEvent),P=this._map.containerPointToLayerPoint(g),u=this._map.layerPointToLatLng(P)),this._tooltip.setLatLng(u)}});var ro=ts.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var u=i&&i.tagName==="DIV"?i:document.createElement("div"),g=this.options;if(g.html instanceof Element?(Zs(u),u.appendChild(g.html)):u.innerHTML=g.html!==!1?g.html:"",g.bgPos){var P=X(g.bgPos);u.style.backgroundPosition=-P.x+"px "+-P.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function so(i){return new ro(i)}ts.Default=Is;var Us=Qn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:$e.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){O(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),yn(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Bs(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ds(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=y(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof G?i:new G(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var u=this.getPane().children,g=-i(-1/0,1/0),P=0,N=u.length,ot;P<N;P++)ot=u[P].style.zIndex,u[P]!==this._container&&ot&&(g=i(g,+ot));isFinite(g)&&(this.options.zIndex=g+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!$e.ielt9){Gi(this._container,this.options.opacity);var i=+new Date,u=!1,g=!1;for(var P in this._tiles){var N=this._tiles[P];if(!(!N.current||!N.loaded)){var ot=Math.min(1,(i-N.loaded)/200);Gi(N.el,ot),ot<1?u=!0:(N.active?g=!0:this._onOpaqueTile(N),N.active=!0)}}g&&!this._noPrune&&this._pruneTiles(),u&&(J(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this))}},_onOpaqueTile:w,_initContainer:function(){this._container||(this._container=In("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,u=this.options.maxZoom;if(i!==void 0){for(var g in this._levels)g=Number(g),this._levels[g].el.children.length||g===i?(this._levels[g].el.style.zIndex=u-Math.abs(i-g),this._onUpdateLevel(g)):(yn(this._levels[g].el),this._removeTilesAtZoom(g),this._onRemoveLevel(g),delete this._levels[g]);var P=this._levels[i],N=this._map;return P||(P=this._levels[i]={},P.el=In("div","leaflet-tile-container leaflet-zoom-animated",this._container),P.el.style.zIndex=u,P.origin=N.project(N.unproject(N.getPixelOrigin()),i).round(),P.zoom=i,this._setZoomTransform(P,N.getCenter(),N.getZoom()),w(P.el.offsetWidth),this._onCreateLevel(P)),this._level=P,P}},_onUpdateLevel:w,_onRemoveLevel:w,_onCreateLevel:w,_pruneTiles:function(){if(this._map){var i,u,g=this._map.getZoom();if(g>this.options.maxZoom||g<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)u=this._tiles[i],u.retain=u.current;for(i in this._tiles)if(u=this._tiles[i],u.current&&!u.active){var P=u.coords;this._retainParent(P.x,P.y,P.z,P.z-5)||this._retainChildren(P.x,P.y,P.z,P.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var u in this._tiles)this._tiles[u].coords.z===i&&this._removeTile(u)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)yn(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,u,g,P){var N=Math.floor(i/2),ot=Math.floor(u/2),jt=g-1,ce=new G(+N,+ot);ce.z=+jt;var ve=this._tileCoordsToKey(ce),Me=this._tiles[ve];return Me&&Me.active?(Me.retain=!0,!0):(Me&&Me.loaded&&(Me.retain=!0),jt>P?this._retainParent(N,ot,jt,P):!1)},_retainChildren:function(i,u,g,P){for(var N=2*i;N<2*i+2;N++)for(var ot=2*u;ot<2*u+2;ot++){var jt=new G(N,ot);jt.z=g+1;var ce=this._tileCoordsToKey(jt),ve=this._tiles[ce];if(ve&&ve.active){ve.retain=!0;continue}else ve&&ve.loaded&&(ve.retain=!0);g+1<P&&this._retainChildren(N,ot,g+1,P)}},_resetView:function(i){var u=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var u=this.options;return u.minNativeZoom!==void 0&&i<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<i?u.maxNativeZoom:i},_setView:function(i,u,g,P){var N=Math.round(u);this.options.maxZoom!==void 0&&N>this.options.maxZoom||this.options.minZoom!==void 0&&N<this.options.minZoom?N=void 0:N=this._clampZoom(N);var ot=this.options.updateWhenZooming&&N!==this._tileZoom;(!P||ot)&&(this._tileZoom=N,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),N!==void 0&&this._update(i),g||this._pruneTiles(),this._noPrune=!!g),this._setZoomTransforms(i,u)},_setZoomTransforms:function(i,u){for(var g in this._levels)this._setZoomTransform(this._levels[g],i,u)},_setZoomTransform:function(i,u,g){var P=this._map.getZoomScale(g,i.zoom),N=i.origin.multiplyBy(P).subtract(this._map._getNewPixelOrigin(u,g)).round();$e.any3d?ps(i.el,N,P):ci(i.el,N)},_resetGrid:function(){var i=this._map,u=i.options.crs,g=this._tileSize=this.getTileSize(),P=this._tileZoom,N=this._map.getPixelWorldBounds(this._tileZoom);N&&(this._globalTileRange=this._pxBoundsToTileRange(N)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,u.wrapLng[0]],P).x/g.x),Math.ceil(i.project([0,u.wrapLng[1]],P).x/g.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([u.wrapLat[0],0],P).y/g.x),Math.ceil(i.project([u.wrapLat[1],0],P).y/g.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var u=this._map,g=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),P=u.getZoomScale(g,this._tileZoom),N=u.project(i,this._tileZoom).floor(),ot=u.getSize().divideBy(P*2);return new Rt(N.subtract(ot),N.add(ot))},_update:function(i){var u=this._map;if(u){var g=this._clampZoom(u.getZoom());if(i===void 0&&(i=u.getCenter()),this._tileZoom!==void 0){var P=this._getTiledPixelBounds(i),N=this._pxBoundsToTileRange(P),ot=N.getCenter(),jt=[],ce=this.options.keepBuffer,ve=new Rt(N.getBottomLeft().subtract([ce,-ce]),N.getTopRight().add([ce,-ce]));if(!(isFinite(N.min.x)&&isFinite(N.min.y)&&isFinite(N.max.x)&&isFinite(N.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Me in this._tiles){var Ve=this._tiles[Me].coords;(Ve.z!==this._tileZoom||!ve.contains(new G(Ve.x,Ve.y)))&&(this._tiles[Me].current=!1)}if(Math.abs(g-this._tileZoom)>1){this._setView(i,g);return}for(var sn=N.min.y;sn<=N.max.y;sn++)for(var En=N.min.x;En<=N.max.x;En++){var or=new G(En,sn);if(or.z=this._tileZoom,!!this._isValidTile(or)){var Mi=this._tiles[this._tileCoordsToKey(or)];Mi?Mi.current=!0:jt.push(or)}}if(jt.sort(function(fi,Ls){return fi.distanceTo(ot)-Ls.distanceTo(ot)}),jt.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var mr=document.createDocumentFragment();for(En=0;En<jt.length;En++)this._addTile(jt[En],mr);this._level.el.appendChild(mr)}}}},_isValidTile:function(i){var u=this._map.options.crs;if(!u.infinite){var g=this._globalTileRange;if(!u.wrapLng&&(i.x<g.min.x||i.x>g.max.x)||!u.wrapLat&&(i.y<g.min.y||i.y>g.max.y))return!1}if(!this.options.bounds)return!0;var P=this._tileCoordsToBounds(i);return ut(this.options.bounds).overlaps(P)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var u=this._map,g=this.getTileSize(),P=i.scaleBy(g),N=P.add(g),ot=u.unproject(P,i.z),jt=u.unproject(N,i.z);return[ot,jt]},_tileCoordsToBounds:function(i){var u=this._tileCoordsToNwSe(i),g=new Z(u[0],u[1]);return this.options.noWrap||(g=this._map.wrapLatLngBounds(g)),g},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var u=i.split(":"),g=new G(+u[0],+u[1]);return g.z=+u[2],g},_removeTile:function(i){var u=this._tiles[i];u&&(yn(u.el),delete this._tiles[i],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){wn(i,"leaflet-tile");var u=this.getTileSize();i.style.width=u.x+"px",i.style.height=u.y+"px",i.onselectstart=w,i.onmousemove=w,$e.ielt9&&this.options.opacity<1&&Gi(i,this.options.opacity)},_addTile:function(i,u){var g=this._getTilePos(i),P=this._tileCoordsToKey(i),N=this.createTile(this._wrapCoords(i),c(this._tileReady,this,i));this._initTile(N),this.createTile.length<2&&$(c(this._tileReady,this,i,null,N)),ci(N,g),this._tiles[P]={el:N,coords:i,current:!0},u.appendChild(N),this.fire("tileloadstart",{tile:N,coords:i})},_tileReady:function(i,u,g){u&&this.fire("tileerror",{error:u,tile:g,coords:i});var P=this._tileCoordsToKey(i);g=this._tiles[P],g&&(g.loaded=+new Date,this._map._fadeAnimated?(Gi(g.el,0),J(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this)):(g.active=!0,this._pruneTiles()),u||(wn(g.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:g.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),$e.ielt9||!this._map._fadeAnimated?$(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var u=new G(this._wrapX?b(i.x,this._wrapX):i.x,this._wrapY?b(i.y,this._wrapY):i.y);return u.z=i.z,u},_pxBoundsToTileRange:function(i){var u=this.getTileSize();return new Rt(i.min.unscaleBy(u).floor(),i.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function Fr(i){return new Us(i)}var Fi=Us.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,u){this._url=i,u=O(this,u),u.detectRetina&&$e.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,u){return this._url===i&&u===void 0&&(u=!0),this._url=i,u||this.redraw(),this},createTile:function(i,u){var g=document.createElement("img");return bn(g,"load",c(this._tileOnLoad,this,u,g)),bn(g,"error",c(this._tileOnError,this,u,g)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(g.referrerPolicy=this.options.referrerPolicy),g.alt="",g.src=this.getTileUrl(i),g},getTileUrl:function(i){var u={r:$e.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var g=this._globalTileRange.max.y-i.y;this.options.tms&&(u.y=g),u["-y"]=g}return V(this._url,o(u,this.options))},_tileOnLoad:function(i,u){$e.ielt9?setTimeout(c(i,this,null,u),0):i(null,u)},_tileOnError:function(i,u,g){var P=this.options.errorTileUrl;P&&u.getAttribute("src")!==P&&(u.src=P),i(g,u)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,u=this.options.maxZoom,g=this.options.zoomReverse,P=this.options.zoomOffset;return g&&(i=u-i),i+P},_getSubdomain:function(i){var u=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var i,u;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(u=this._tiles[i].el,u.onload=w,u.onerror=w,!u.complete)){u.src=kt;var g=this._tiles[i].coords;yn(u),delete this._tiles[i],this.fire("tileabort",{tile:u,coords:g})}},_removeTile:function(i){var u=this._tiles[i];if(u)return u.el.setAttribute("src",kt),Us.prototype._removeTile.call(this,i)},_tileReady:function(i,u,g){if(!(!this._map||g&&g.getAttribute("src")===kt))return Us.prototype._tileReady.call(this,i,u,g)}});function Zn(i,u){return new Fi(i,u)}var Vn=Fi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,u){this._url=i;var g=o({},this.defaultWmsParams);for(var P in u)P in this.options||(g[P]=u[P]);u=O(this,u);var N=u.detectRetina&&$e.retina?2:1,ot=this.getTileSize();g.width=ot.x*N,g.height=ot.y*N,this.wmsParams=g},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,Fi.prototype.onAdd.call(this,i)},getTileUrl:function(i){var u=this._tileCoordsToNwSe(i),g=this._crs,P=D(g.project(u[0]),g.project(u[1])),N=P.min,ot=P.max,jt=(this._wmsVersion>=1.3&&this._crs===wi?[N.y,N.x,ot.y,ot.x]:[N.x,N.y,ot.x,ot.y]).join(","),ce=Fi.prototype.getTileUrl.call(this,i);return ce+q(this.wmsParams,ce,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+jt},setParams:function(i,u){return o(this.wmsParams,i),u||this.redraw(),this}});function _i(i,u){return new Vn(i,u)}Fi.WMS=Vn,Zn.wms=_i;var ti=Qn.extend({options:{padding:.1},initialize:function(i){O(this,i),m(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),wn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,u){var g=this._map.getZoomScale(u,this._zoom),P=this._map.getSize().multiplyBy(.5+this.options.padding),N=this._map.project(this._center,u),ot=P.multiplyBy(-g).add(N).subtract(this._map._getNewPixelOrigin(i,u));$e.any3d?ps(this._container,ot,g):ci(this._container,ot)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,u=this._map.getSize(),g=this._map.containerPointToLayerPoint(u.multiplyBy(-i)).round();this._bounds=new Rt(g,g.add(u.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ns=ti.extend({options:{tolerance:0},getEvents:function(){var i=ti.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ti.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");bn(i,"mousemove",this._onMouseMove,this),bn(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),bn(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){J(this._redrawRequest),delete this._ctx,yn(this._container),Dn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var u in this._layers)i=this._layers[u],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ti.prototype._update.call(this);var i=this._bounds,u=this._container,g=i.getSize(),P=$e.retina?2:1;ci(u,i.min),u.width=P*g.x,u.height=P*g.y,u.style.width=g.x+"px",u.style.height=g.y+"px",$e.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){ti.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[m(i)]=i;var u=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var u=i._order,g=u.next,P=u.prev;g?g.prev=P:this._drawLast=P,P?P.next=g:this._drawFirst=g,delete i._order,delete this._layers[m(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var u=i.options.dashArray.split(/[, ]+/),g=[],P,N;for(N=0;N<u.length;N++){if(P=Number(u[N]),isNaN(P))return;g.push(P)}i.options._dashArray=g}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||$(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var u=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Rt,this._redrawBounds.extend(i._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(i._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var u=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,u=this._redrawBounds;if(this._ctx.save(),u){var g=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,g.x,g.y),this._ctx.clip()}this._drawing=!0;for(var P=this._drawFirst;P;P=P.next)i=P.layer,(!u||i._pxBounds&&i._pxBounds.intersects(u))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,u){if(this._drawing){var g,P,N,ot,jt=i._parts,ce=jt.length,ve=this._ctx;if(ce){for(ve.beginPath(),g=0;g<ce;g++){for(P=0,N=jt[g].length;P<N;P++)ot=jt[g][P],ve[P?"lineTo":"moveTo"](ot.x,ot.y);u&&ve.closePath()}this._fillStroke(ve,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var u=i._point,g=this._ctx,P=Math.max(Math.round(i._radius),1),N=(Math.max(Math.round(i._radiusY),1)||P)/P;N!==1&&(g.save(),g.scale(1,N)),g.beginPath(),g.arc(u.x,u.y/N,P,0,Math.PI*2,!1),N!==1&&g.restore(),this._fillStroke(g,i)}},_fillStroke:function(i,u){var g=u.options;g.fill&&(i.globalAlpha=g.fillOpacity,i.fillStyle=g.fillColor||g.color,i.fill(g.fillRule||"evenodd")),g.stroke&&g.weight!==0&&(i.setLineDash&&i.setLineDash(u.options&&u.options._dashArray||[]),i.globalAlpha=g.opacity,i.lineWidth=g.weight,i.strokeStyle=g.color,i.lineCap=g.lineCap,i.lineJoin=g.lineJoin,i.stroke())},_onClick:function(i){for(var u=this._map.mouseEventToLayerPoint(i),g,P,N=this._drawFirst;N;N=N.next)g=N.layer,g.options.interactive&&g._containsPoint(u)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(g))&&(P=g);this._fireEvent(P?[P]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,u)}},_handleMouseOut:function(i){var u=this._hoveredLayer;u&&(zn(this._container,"leaflet-interactive"),this._fireEvent([u],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,u){if(!this._mouseHoverThrottled){for(var g,P,N=this._drawFirst;N;N=N.next)g=N.layer,g.options.interactive&&g._containsPoint(u)&&(P=g);P!==this._hoveredLayer&&(this._handleMouseOut(i),P&&(wn(this._container,"leaflet-interactive"),this._fireEvent([P],i,"mouseover"),this._hoveredLayer=P)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,u,g){this._map._fireDOMEvent(u,g||u.type,i)},_bringToFront:function(i){var u=i._order;if(u){var g=u.next,P=u.prev;if(g)g.prev=P;else return;P?P.next=g:g&&(this._drawFirst=g),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(i)}},_bringToBack:function(i){var u=i._order;if(u){var g=u.next,P=u.prev;if(P)P.next=g;else return;g?g.prev=P:P&&(this._drawLast=P),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(i)}}});function oo(i){return $e.canvas?new ns(i):null}var ws=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Za={_initContainer:function(){this._container=In("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ti.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var u=i._container=ws("shape");wn(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",i._path=ws("path"),u.appendChild(i._path),this._updateStyle(i),this._layers[m(i)]=i},_addPath:function(i){var u=i._container;this._container.appendChild(u),i.options.interactive&&i.addInteractiveTarget(u)},_removePath:function(i){var u=i._container;yn(u),i.removeInteractiveTarget(u),delete this._layers[m(i)]},_updateStyle:function(i){var u=i._stroke,g=i._fill,P=i.options,N=i._container;N.stroked=!!P.stroke,N.filled=!!P.fill,P.stroke?(u||(u=i._stroke=ws("stroke")),N.appendChild(u),u.weight=P.weight+"px",u.color=P.color,u.opacity=P.opacity,P.dashArray?u.dashStyle=Y(P.dashArray)?P.dashArray.join(" "):P.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=P.lineCap.replace("butt","flat"),u.joinstyle=P.lineJoin):u&&(N.removeChild(u),i._stroke=null),P.fill?(g||(g=i._fill=ws("fill")),N.appendChild(g),g.color=P.fillColor||P.color,g.opacity=P.fillOpacity):g&&(N.removeChild(g),i._fill=null)},_updateCircle:function(i){var u=i._point.round(),g=Math.round(i._radius),P=Math.round(i._radiusY||g);this._setPath(i,i._empty()?"M0 0":"AL "+u.x+","+u.y+" "+g+","+P+" 0,"+65535*360)},_setPath:function(i,u){i._path.v=u},_bringToFront:function(i){Bs(i._container)},_bringToBack:function(i){ds(i._container)}},ao=$e.vml?ws:Dt,Ei=ti.extend({_initContainer:function(){this._container=ao("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ao("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){yn(this._container),Dn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ti.prototype._update.call(this);var i=this._bounds,u=i.getSize(),g=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,g.setAttribute("width",u.x),g.setAttribute("height",u.y)),ci(g,i.min),g.setAttribute("viewBox",[i.min.x,i.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(i){var u=i._path=ao("path");i.options.className&&wn(u,i.options.className),i.options.interactive&&wn(u,"leaflet-interactive"),this._updateStyle(i),this._layers[m(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){yn(i._path),i.removeInteractiveTarget(i._path),delete this._layers[m(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var u=i._path,g=i.options;u&&(g.stroke?(u.setAttribute("stroke",g.color),u.setAttribute("stroke-opacity",g.opacity),u.setAttribute("stroke-width",g.weight),u.setAttribute("stroke-linecap",g.lineCap),u.setAttribute("stroke-linejoin",g.lineJoin),g.dashArray?u.setAttribute("stroke-dasharray",g.dashArray):u.removeAttribute("stroke-dasharray"),g.dashOffset?u.setAttribute("stroke-dashoffset",g.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),g.fill?(u.setAttribute("fill",g.fillColor||g.color),u.setAttribute("fill-opacity",g.fillOpacity),u.setAttribute("fill-rule",g.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(i,u){this._setPath(i,lt(i._parts,u))},_updateCircle:function(i){var u=i._point,g=Math.max(Math.round(i._radius),1),P=Math.max(Math.round(i._radiusY),1)||g,N="a"+g+","+P+" 0 1,0 ",ot=i._empty()?"M0 0":"M"+(u.x-g)+","+u.y+N+g*2+",0 "+N+-g*2+",0 ";this._setPath(i,ot)},_setPath:function(i,u){i._path.setAttribute("d",u)},_bringToFront:function(i){Bs(i._path)},_bringToBack:function(i){ds(i._path)}});$e.vml&&Ei.include(Za);function ei(i){return $e.svg||$e.vml?new Ei(i):null}Bn.include({getRenderer:function(i){var u=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var u=this._paneRenderers[i];return u===void 0&&(u=this._createRenderer({pane:i}),this._paneRenderers[i]=u),u},_createRenderer:function(i){return this.options.preferCanvas&&oo(i)||ei(i)}});var dr=Si.extend({initialize:function(i,u){Si.prototype.initialize.call(this,this._boundsToLatLngs(i),u)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=ut(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function pr(i,u){return new dr(i,u)}Ei.create=ao,Ei.pointsToPath=lt,Or.geometryToLayer=Mo,Or.coordsToLatLng=vs,Or.coordsToLatLngs=Ri,Or.latLngToCoords=Ti,Or.latLngsToCoords=es,Or.getFeature=hr,Or.asFeature=Ir,Bn.mergeOptions({boxZoom:!0});var fn=ki.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){bn(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Dn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){yn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),xo(),ga(),this._startPoint=this._map.mouseEventToContainerPoint(i),bn(document,{contextmenu:wr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=In("div","leaflet-zoom-box",this._container),wn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var u=new Rt(this._point,this._startPoint),g=u.getSize();ci(this._box,u.min),this._box.style.width=g.x+"px",this._box.style.height=g.y+"px"},_finish:function(){this._moved&&(yn(this._box),zn(this._container,"leaflet-crosshair")),Ts(),Qr(),Dn(document,{contextmenu:wr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var u=new Z(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Bn.addInitHook("addHandler","boxZoom",fn),Bn.mergeOptions({doubleClickZoom:!0});var Ka=ki.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var u=this._map,g=u.getZoom(),P=u.options.zoomDelta,N=i.originalEvent.shiftKey?g-P:g+P;u.options.doubleClickZoom==="center"?u.setZoom(N):u.setZoomAround(i.containerPoint,N)}});Bn.addInitHook("addHandler","doubleClickZoom",Ka),Bn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Bo=ki.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new Dr(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}wn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){zn(this._map._container,"leaflet-grab"),zn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=ut(this._map.options.maxBounds);this._offsetLimit=D(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var u=this._lastTime=+new Date,g=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(g),this._times.push(u),this._prunePositions(u)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,u){return i-(i-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;i.x<u.min.x&&(i.x=this._viscousLimit(i.x,u.min.x)),i.y<u.min.y&&(i.y=this._viscousLimit(i.y,u.min.y)),i.x>u.max.x&&(i.x=this._viscousLimit(i.x,u.max.x)),i.y>u.max.y&&(i.y=this._viscousLimit(i.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,u=Math.round(i/2),g=this._initialWorldOffset,P=this._draggable._newPos.x,N=(P-u+g)%i+u-g,ot=(P+u+g)%i-u-g,jt=Math.abs(N+g)<Math.abs(ot+g)?N:ot;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=jt},_onDragEnd:function(i){var u=this._map,g=u.options,P=!g.inertia||i.noInertia||this._times.length<2;if(u.fire("dragend",i),P)u.fire("moveend");else{this._prunePositions(+new Date);var N=this._lastPos.subtract(this._positions[0]),ot=(this._lastTime-this._times[0])/1e3,jt=g.easeLinearity,ce=N.multiplyBy(jt/ot),ve=ce.distanceTo([0,0]),Me=Math.min(g.inertiaMaxSpeed,ve),Ve=ce.multiplyBy(Me/ve),sn=Me/(g.inertiaDeceleration*jt),En=Ve.multiplyBy(-sn/2).round();!En.x&&!En.y?u.fire("moveend"):(En=u._limitOffset(En,u.options.maxBounds),$(function(){u.panBy(En,{duration:sn,easeLinearity:jt,noMoveStart:!0,animate:!0})}))}}});Bn.addInitHook("addHandler","dragging",Bo),Bn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var jr=ki.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),bn(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Dn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,u=document.documentElement,g=i.scrollTop||u.scrollTop,P=i.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(P,g)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var u=this._panKeys={},g=this.keyCodes,P,N;for(P=0,N=g.left.length;P<N;P++)u[g.left[P]]=[-1*i,0];for(P=0,N=g.right.length;P<N;P++)u[g.right[P]]=[i,0];for(P=0,N=g.down.length;P<N;P++)u[g.down[P]]=[0,i];for(P=0,N=g.up.length;P<N;P++)u[g.up[P]]=[0,-1*i]},_setZoomDelta:function(i){var u=this._zoomKeys={},g=this.keyCodes,P,N;for(P=0,N=g.zoomIn.length;P<N;P++)u[g.zoomIn[P]]=i;for(P=0,N=g.zoomOut.length;P<N;P++)u[g.zoomOut[P]]=-i},_addHooks:function(){bn(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Dn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var u=i.keyCode,g=this._map,P;if(u in this._panKeys){if(!g._panAnim||!g._panAnim._inProgress)if(P=this._panKeys[u],i.shiftKey&&(P=X(P).multiplyBy(3)),g.options.maxBounds&&(P=g._limitOffset(X(P),g.options.maxBounds)),g.options.worldCopyJump){var N=g.wrapLatLng(g.unproject(g.project(g.getCenter()).add(P)));g.panTo(N)}else g.panBy(P)}else if(u in this._zoomKeys)g.setZoom(g.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&g._popup&&g._popup.options.closeOnEscapeKey)g.closePopup();else return;wr(i)}}});Bn.addInitHook("addHandler","keyboard",jr),Bn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Zi=ki.extend({addHooks:function(){bn(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Dn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var u=Zo(i),g=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var P=Math.max(g-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),P),wr(i)},_performZoom:function(){var i=this._map,u=i.getZoom(),g=this._map.options.zoomSnap||0;i._stop();var P=this._delta/(this._map.options.wheelPxPerZoomLevel*4),N=4*Math.log(2/(1+Math.exp(-Math.abs(P))))/Math.LN2,ot=g?Math.ceil(N/g)*g:N,jt=i._limitZoom(u+(this._delta>0?ot:-ot))-u;this._delta=0,this._startTime=null,jt&&(i.options.scrollWheelZoom==="center"?i.setZoom(u+jt):i.setZoomAround(this._lastMousePos,u+jt))}});Bn.addInitHook("addHandler","scrollWheelZoom",Zi);var bl=600;Bn.mergeOptions({tapHold:$e.touchNative&&$e.safari&&$e.mobile,tapTolerance:15});var rr=ki.extend({addHooks:function(){bn(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Dn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var u=i.touches[0];this._startPos=this._newPos=new G(u.clientX,u.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(bn(document,"touchend",mi),bn(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),bl),bn(document,"touchend touchcancel contextmenu",this._cancel,this),bn(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){Dn(document,"touchend",mi),Dn(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),Dn(document,"touchend touchcancel contextmenu",this._cancel,this),Dn(document,"touchmove",this._onMove,this)},_onMove:function(i){var u=i.touches[0];this._newPos=new G(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,u){var g=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});g._simulated=!0,u.target.dispatchEvent(g)}});Bn.addInitHook("addHandler","tapHold",rr),Bn.mergeOptions({touchZoom:$e.touch,bounceAtZoomLimits:!0});var sr=ki.extend({addHooks:function(){wn(this._map._container,"leaflet-touch-zoom"),bn(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){zn(this._map._container,"leaflet-touch-zoom"),Dn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var u=this._map;if(!(!i.touches||i.touches.length!==2||u._animatingZoom||this._zooming)){var g=u.mouseEventToContainerPoint(i.touches[0]),P=u.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(g.add(P)._divideBy(2))),this._startDist=g.distanceTo(P),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),bn(document,"touchmove",this._onTouchMove,this),bn(document,"touchend touchcancel",this._onTouchEnd,this),mi(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var u=this._map,g=u.mouseEventToContainerPoint(i.touches[0]),P=u.mouseEventToContainerPoint(i.touches[1]),N=g.distanceTo(P)/this._startDist;if(this._zoom=u.getScaleZoom(N,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&N<1||this._zoom>u.getMaxZoom()&&N>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,N===1)return}else{var ot=g._add(P)._divideBy(2)._subtract(this._centerPoint);if(N===1&&ot.x===0&&ot.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(ot),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),J(this._animRequest);var jt=c(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=$(jt,this,!0),mi(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,J(this._animRequest),Dn(document,"touchmove",this._onTouchMove,this),Dn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Bn.addInitHook("addHandler","touchZoom",sr),Bn.BoxZoom=fn,Bn.DoubleClickZoom=Ka,Bn.Drag=Bo,Bn.Keyboard=jr,Bn.ScrollWheelZoom=Zi,Bn.TapHold=rr,Bn.TouchZoom=sr,n.Bounds=Rt,n.Browser=$e,n.CRS=dt,n.Canvas=ns,n.Circle=Vi,n.CircleMarker=nr,n.Class=nt,n.Control=on,n.DivIcon=ro,n.DivOverlay=Wi,n.DomEvent=ko,n.DomUtil=_n,n.Draggable=Dr,n.Evented=_t,n.FeatureGroup=er,n.GeoJSON=Or,n.GridLayer=Us,n.Handler=ki,n.Icon=ts,n.ImageOverlay=ys,n.LatLng=vt,n.LatLngBounds=Z,n.Layer=Qn,n.LayerGroup=tr,n.LineUtil=Tn,n.Map=Bn,n.Marker=xi,n.Mixin=Va,n.Path=cr,n.Point=G,n.PolyUtil=Qo,n.Polygon=Si,n.Polyline=Lr,n.Popup=fr,n.PosAnimation=ya,n.Projection=Gn,n.Rectangle=dr,n.Renderer=ti,n.SVG=Ei,n.SVGOverlay=Pa,n.TileLayer=Fi,n.Tooltip=bs,n.Transformation=re,n.Util=I,n.VideoOverlay=Hi,n.bind=c,n.bounds=D,n.canvas=oo,n.circle=Fs,n.circleMarker=ea,n.control=Qi,n.divIcon=so,n.extend=o,n.featureGroup=Ca,n.geoJSON=Rr,n.geoJson=hi,n.gridLayer=Fr,n.icon=ka,n.imageOverlay=ir,n.latLng=xt,n.latLngBounds=ut,n.layerGroup=Ha,n.map=ba,n.marker=ta,n.point=X,n.polygon=_s,n.polyline=Wa,n.popup=io,n.rectangle=pr,n.setOptions=O,n.stamp=m,n.svg=ei,n.svgOverlay=Sa,n.tileLayer=Zn,n.tooltip=na,n.transformation=it,n.version=r,n.videoOverlay=Ao;var xs=window.L;n.noConflict=function(){return window.L=xs,this},window.L=n})})(qf,qf.exports);var Ie=qf.exports;const ze=jg(Ie);var u0={exports:{}};(function(t,e){(function(n,r){r(e)})(co,function(n){var r=typeof window<"u"?window:typeof co<"u"?co:typeof self<"u"?self:{};function o(y,b){return y(b={exports:{}},b.exports),b.exports}var l=o(function(y,b){(function(w){const E={escape:function(K){return K.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:C,mimeType:function(K){return K=C(K).toLowerCase(),function(){var tt="application/font-woff",_t="image/jpeg";return{woff:tt,woff2:tt,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:_t,jpeg:_t,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[K]||""},dataAsUrl:function(K,tt){return`data:${tt};base64,`+K},isDataUrl:function(K){return K.search(/^(data:)/)!==-1},canvasToBlob:function(K){return K.toBlob?new Promise(function(_t){K.toBlob(_t)}):(tt=K,new Promise(function(_t){const G=et(tt.toDataURL().split(",")[1]);var j=G.length;const X=new Uint8Array(j);for(let Rt=0;Rt<j;Rt++)X[Rt]=G.charCodeAt(Rt);_t(new Blob([X],{type:"image/png"}))}));var tt},resolveUrl:function(K,tt){const _t=document.implementation.createHTMLDocument(),G=_t.createElement("base"),j=(_t.head.appendChild(G),_t.createElement("a"));return _t.body.appendChild(j),G.href=tt,j.href=K,j.href},getAndEncode:function(K){let tt=kt.impl.urlCache.find(function(_t){return _t.url===K});return tt||(tt={url:K,promise:null},kt.impl.urlCache.push(tt)),tt.promise===null&&(kt.impl.options.cacheBust&&(K+=(/\?/.test(K)?"&":"?")+new Date().getTime()),tt.promise=new Promise(function(_t){const G=kt.impl.options.httpTimeout,j=new XMLHttpRequest;let X;var Rt;function D(Z){console.error(Z),_t("")}j.onreadystatechange=function(){if(j.readyState===4)if(j.status!==200)X?_t(X):D(`cannot fetch resource: ${K}, status: `+j.status);else{const Z=new FileReader;Z.onloadend=function(){var ut=Z.result.split(/,/)[1];_t(ut)},Z.readAsDataURL(j.response)}},j.ontimeout=function(){X?_t(X):D(`timeout of ${G}ms occured while fetching resource: `+K)},j.responseType="blob",j.timeout=G,kt.impl.options.useCredentials&&(j.withCredentials=!0),j.open("GET",K,!0),j.send(),kt.impl.options.imagePlaceholder&&(Rt=kt.impl.options.imagePlaceholder.split(/,/))&&Rt[1]&&(X=Rt[1])})),tt.promise},uid:function(){let K=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+K++}}(),delay:function(K){return function(tt){return new Promise(function(_t){setTimeout(function(){_t(tt)},K)})}},asArray:function(K){const tt=[],_t=K.length;for(let G=0;G<_t;G++)tt.push(K[G]);return tt},escapeXhtml:function(K){return K.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(K){return K!=="data:,"?new Promise(function(tt,_t){const G=new Image;kt.impl.options.useCredentials&&(G.crossOrigin="use-credentials"),G.onload=function(){tt(G)},G.onerror=_t,G.src=K}):Promise.resolve()},width:function(K){var tt=R(K,"border-left-width"),_t=R(K,"border-right-width");return K.scrollWidth+tt+_t},height:function(K){var tt=R(K,"border-top-width"),_t=R(K,"border-bottom-width");return K.scrollHeight+tt+_t}};function C(K){return(K=/\.([^\.\/]*?)(\?|$)/g.exec(K))?K[1]:""}function R(K,tt){const _t=wt(K).getPropertyValue(tt);return parseFloat(_t.replace("px",""))}const O=function(){const K=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(j,X,Rt){return tt(j)?Promise.resolve(j).then(_t).then(function(D){let Z=Promise.resolve(j);return D.forEach(function(ut){Z=Z.then(function(vt){return G(vt,ut,X,Rt)})}),Z}):Promise.resolve(j)},shouldProcess:tt,impl:{readUrls:_t,inline:G}};function tt(j){return j.search(K)!==-1}function _t(j){const X=[];for(var Rt;(Rt=K.exec(j))!==null;)X.push(Rt[1]);return X.filter(function(D){return!E.isDataUrl(D)})}function G(j,X,Rt,D){return Promise.resolve(X).then(function(Z){return Rt?E.resolveUrl(Z,Rt):Z}).then(D||E.getAndEncode).then(function(Z){return E.dataAsUrl(Z,E.mimeType(X))}).then(function(Z){return j.replace((ut=X,new RegExp(`(url\\(['"]?)(${E.escape(ut)})(['"]?\\))`,"g")),`$1${Z}$3`);var ut})}}(),q={resolveAll:function(){return F().then(function(K){return Promise.all(K.map(function(tt){return tt.resolve()}))}).then(function(K){return K.join(`
`)})},impl:{readAll:F}};function F(){return Promise.resolve(E.asArray(document.styleSheets)).then(function(tt){const _t=[];return tt.forEach(function(G){if(Object.getPrototypeOf(G).hasOwnProperty("cssRules"))try{E.asArray(G.cssRules||[]).forEach(_t.push.bind(_t))}catch(j){console.log("Error while reading CSS rules from "+G.href,j.toString())}}),_t}).then(function(tt){return tt.filter(function(_t){return _t.type===CSSRule.FONT_FACE_RULE}).filter(function(_t){return O.shouldProcess(_t.style.getPropertyValue("src"))})}).then(function(tt){return tt.map(K)});function K(tt){return{resolve:function(){var _t=(tt.parentStyleSheet||{}).href;return O.inlineAll(tt.cssText,_t)},src:function(){return tt.style.getPropertyValue("src")}}}}const V={inlineAll:function K(tt){return tt instanceof Element?function(_t){const G=_t.style.getPropertyValue("background");return G?O.inlineAll(G).then(function(j){_t.style.setProperty("background",j,G)}).then(function(){return _t}):Promise.resolve(_t)}(tt).then(function(){return tt instanceof HTMLImageElement?Y(tt).inline():Promise.all(E.asArray(tt.childNodes).map(function(_t){return K(_t)}))}):Promise.resolve(tt)},impl:{newImage:Y}};function Y(K){return{inline:function(tt){return E.isDataUrl(K.src)?Promise.resolve():Promise.resolve(K.src).then(tt||E.getAndEncode).then(function(_t){return E.dataAsUrl(_t,E.mimeType(K.src))}).then(function(_t){return new Promise(function(G){K.onload=G,K.onerror=G,K.src=_t})})}}}const Ct={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},kt={toSvg:ct,toPng:function(K,tt){return(tt=tt||{}).raster=!0,Bt(K,tt).then(function(_t){return _t.toDataURL()})},toJpeg:function(K,tt){return(tt=tt||{}).raster=!0,Bt(K,tt).then(function(_t){return _t.toDataURL("image/jpeg",tt.quality||1)})},toBlob:function(K,tt){return(tt=tt||{}).raster=!0,Bt(K,tt).then(E.canvasToBlob)},toPixelData:function(K,tt){return(tt=tt||{}).raster=!0,Bt(K,tt).then(function(_t){return _t.getContext("2d").getImageData(0,0,E.width(K),E.height(K)).data})},toCanvas:function(K,tt){return(tt=tt||{}).raster=!0,Bt(K,tt||{})},impl:{fontFaces:q,images:V,util:E,inliner:O,urlCache:[],options:{}}},wt=(y.exports=kt,w.getComputedStyle||window.getComputedStyle),et=w.atob||window.atob;function ct(K,tt){var _t=tt=tt||{};return _t.imagePlaceholder===void 0?kt.impl.options.imagePlaceholder=Ct.imagePlaceholder:kt.impl.options.imagePlaceholder=_t.imagePlaceholder,_t.cacheBust===void 0?kt.impl.options.cacheBust=Ct.cacheBust:kt.impl.options.cacheBust=_t.cacheBust,_t.useCredentials===void 0?kt.impl.options.useCredentials=Ct.useCredentials:kt.impl.options.useCredentials=_t.useCredentials,Promise.resolve(K).then(function(G){return function j(X,Rt,D,Z,ut=null){return D||!Rt||Rt(X)?Promise.resolve(X).then(function(vt){return vt instanceof HTMLCanvasElement?E.makeImage(vt.toDataURL()):vt.nodeName==="IFRAME"?html2canvas(vt.contentDocument.body).then(xt=>xt.toDataURL()).then(E.makeImage):vt.cloneNode(!1)}).then(function(vt){return function(xt,dt){const St=xt.childNodes;return St.length===0?Promise.resolve(dt):function(Mt,Kt){const re=wt(xt);let it=Promise.resolve();return Kt.forEach(function(ht){it=it.then(function(){return j(ht,Rt,!1,Z,re)}).then(function(It){It&&Mt.appendChild(It)})}),it}(dt,E.asArray(St)).then(function(){return dt})}(X,vt)}).then(function(vt){return function(xt,dt,St){return dt instanceof Element?Promise.resolve().then(function(){(function(Mt,Kt){const re=wt(Mt);re.cssText?(Kt.style.cssText=re.cssText,function(it,ht){ht.font=it.font,ht.fontFamily=it.fontFamily,ht.fontFeatureSettings=it.fontFeatureSettings,ht.fontKerning=it.fontKerning,ht.fontSize=it.fontSize,ht.fontStretch=it.fontStretch,ht.fontStyle=it.fontStyle,ht.fontVariant=it.fontVariant,ht.fontVariantCaps=it.fontVariantCaps,ht.fontVariantEastAsian=it.fontVariantEastAsian,ht.fontVariantLigatures=it.fontVariantLigatures,ht.fontVariantNumeric=it.fontVariantNumeric,ht.fontVariationSettings=it.fontVariationSettings,ht.fontWeight=it.fontWeight}(re,Kt.style)):(St?function(it,ht,It,Dt){const lt=It.style,Gt=it.style;for(var se of ht){var Qt=ht.getPropertyValue(se),oe=Gt.getPropertyValue(se),Ot=(Gt.setProperty(se,Dt?"initial":"unset"),ht.getPropertyValue(se));Ot!==Qt?lt.setProperty(se,Qt):lt.removeProperty(se),Gt.setProperty(se,oe)}}(Mt,re,Kt,D):function(it,ht,It){const Dt=function(Gt){if(nt[Gt])return nt[Gt];I||((I=document.createElement("iframe")).style.visibility="hidden",I.style.position="fixed",document.body.appendChild(I),I.contentWindow.document.write('<!DOCTYPE html><meta charset="UTF-8"><title>sandbox</title><body>'));const se=document.createElement(Gt),Qt=(I.contentWindow.document.body.appendChild(se),se.textContent=".",I.contentWindow.getComputedStyle(se)),oe={};return E.asArray(Qt).forEach(function(Ot){oe[Ot]=Ot==="width"||Ot==="height"?"auto":Qt.getPropertyValue(Ot)}),I.contentWindow.document.body.removeChild(se),nt[Gt]=oe}(It.tagName),lt=It.style;E.asArray(it).forEach(function(Gt){var se=it.getPropertyValue(Gt);(se!==Dt[Gt]||ht&&se!==ht.getPropertyValue(Gt))&&lt.setProperty(Gt,se,it.getPropertyPriority(Gt))})}(re,ut,Kt),D&&(["inset-block","inset-block-start","inset-block-end"].forEach(it=>Kt.style.removeProperty(it)),["left","right","top","bottom"].forEach(it=>{Kt.style.getPropertyValue(it)&&Kt.style.setProperty(it,"0px")})))})(xt,dt)}).then(function(){[":before",":after"].forEach(function(Mt){(function(Kt){const re=wt(xt,Kt),it=re.getPropertyValue("content");if(it!==""&&it!=="none"){const ht=E.uid(),It=dt.getAttribute("class"),Dt=(It&&dt.setAttribute("class",It+" "+ht),document.createElement("style"));Dt.appendChild(function(){const lt=`.${ht}:`+Kt,Gt=(re.cssText?function(){return`${re.cssText} content: ${re.getPropertyValue("content")};`}:function(){return E.asArray(re).map(function(se){return se+": "+re.getPropertyValue(se)+(re.getPropertyPriority(se)?" !important":"")}).join("; ")+";"})();return document.createTextNode(lt+`{${Gt}}`)}()),dt.appendChild(Dt)}})(Mt)})}).then(function(){xt instanceof HTMLTextAreaElement&&(dt.innerHTML=xt.value),xt instanceof HTMLInputElement&&dt.setAttribute("value",xt.value)}).then(function(){dt instanceof SVGElement&&(dt.setAttribute("xmlns","http://www.w3.org/2000/svg"),dt instanceof SVGRectElement&&["width","height"].forEach(function(Mt){const Kt=dt.getAttribute(Mt);Kt&&dt.style.setProperty(Mt,Kt)}))}).then(function(){return dt}):dt}(X,vt,Z)}):Promise.resolve()}(G,tt.filter,!0,!tt.raster)}).then(Yt).then($).then(function(G){tt.bgcolor&&(G.style.backgroundColor=tt.bgcolor),tt.width&&(G.style.width=tt.width+"px"),tt.height&&(G.style.height=tt.height+"px"),tt.style&&Object.keys(tt.style).forEach(function(X){G.style[X]=tt.style[X]});let j=null;return typeof tt.onclone=="function"&&(j=tt.onclone(G)),Promise.resolve(j).then(function(){return G})}).then(function(G){return G=G,j=tt.width||E.width(K),X=tt.height||E.height(K),Promise.resolve(G).then(function(Rt){return Rt.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(Rt)}).then(E.escapeXhtml).then(function(Rt){return`<foreignObject x="0" y="0" width="100%" height="100%">${Rt}</foreignObject>`}).then(function(Rt){return`<svg xmlns="http://www.w3.org/2000/svg" width="${j}" height="${X}">${Rt}</svg>`}).then(function(Rt){return"data:image/svg+xml;charset=utf-8,"+Rt});var j,X}).then(function(G){return kt.impl.urlCache=[],G})}function Bt(K,tt){return ct(K,tt).then(E.makeImage).then(E.delay(0)).then(function(_t){var G=typeof tt.scale!="number"?1:tt.scale;const j=function(Rt,D){const Z=document.createElement("canvas");if(Z.width=(tt.width||E.width(Rt))*D,Z.height=(tt.height||E.height(Rt))*D,tt.bgcolor){const ut=Z.getContext("2d");ut.fillStyle=tt.bgcolor,ut.fillRect(0,0,Z.width,Z.height)}return Z}(K,G),X=j.getContext("2d");return X.mozImageSmoothingEnabled=!1,X.msImageSmoothingEnabled=!1,X.imageSmoothingEnabled=!1,_t&&(X.scale(G,G),X.drawImage(_t,0,0)),I&&(document.body.removeChild(I),I=null,J&&clearTimeout(J),J=setTimeout(()=>{J=null,nt={}},2e4)),j})}function Yt(K){return q.resolveAll().then(function(tt){const _t=document.createElement("style");return K.appendChild(_t),_t.appendChild(document.createTextNode(tt)),K})}function $(K){return V.inlineAll(K).then(function(){return K})}let J=null,I=null,nt={}})(r)}),c=o(function(y,b){(function(){function w(q,F,V){var Y=new XMLHttpRequest;Y.open("GET",q),Y.responseType="blob",Y.onload=function(){O(Y.response,F,V)},Y.onerror=function(){console.error("could not download file")},Y.send()}function E(q){var F=new XMLHttpRequest;F.open("HEAD",q,!1);try{F.send()}catch{}return 200<=F.status&&299>=F.status}function C(q){try{q.dispatchEvent(new MouseEvent("click"))}catch{var F=document.createEvent("MouseEvents");F.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),q.dispatchEvent(F)}}var R=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof r=="object"&&r.global===r?r:void 0,O=R.saveAs||(typeof window!="object"||window!==R?function(){}:"download"in HTMLAnchorElement.prototype?function(q,F,V){var Y=R.URL||R.webkitURL,Ct=document.createElement("a");F=F||q.name||"download",Ct.download=F,Ct.rel="noopener",typeof q=="string"?(Ct.href=q,Ct.origin===location.origin?C(Ct):E(Ct.href)?w(q,F,V):C(Ct,Ct.target="_blank")):(Ct.href=Y.createObjectURL(q),setTimeout(function(){Y.revokeObjectURL(Ct.href)},4e4),setTimeout(function(){C(Ct)},0))}:"msSaveOrOpenBlob"in navigator?function(q,F,V){if(F=F||q.name||"download",typeof q!="string")navigator.msSaveOrOpenBlob(function(Ct,kt){return kt===void 0?kt={autoBom:!1}:typeof kt!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),kt={autoBom:!kt}),kt.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(Ct.type)?new Blob(["\uFEFF",Ct],{type:Ct.type}):Ct}(q,V),F);else if(E(q))w(q,F,V);else{var Y=document.createElement("a");Y.href=q,Y.target="_blank",setTimeout(function(){C(Y)})}}:function(q,F,V,Y){if((Y=Y||open("","_blank"))&&(Y.document.title=Y.document.body.innerText="downloading..."),typeof q=="string")return w(q,F,V);var Ct=q.type==="application/octet-stream",kt=/constructor/i.test(R.HTMLElement)||R.safari,wt=/CriOS\/[\d]+/.test(navigator.userAgent);if((wt||Ct&&kt)&&typeof FileReader=="object"){var et=new FileReader;et.onloadend=function(){var Yt=et.result;Yt=wt?Yt:Yt.replace(/^data:[^;]*;/,"data:attachment/file;"),Y?Y.location.href=Yt:location=Yt,Y=null},et.readAsDataURL(q)}else{var ct=R.URL||R.webkitURL,Bt=ct.createObjectURL(q);Y?Y.location=Bt:location.href=Bt,Y=null,setTimeout(function(){ct.revokeObjectURL(Bt)},4e4)}});R.saveAs=O.saveAs=O,y.exports=O})()}),d=L.Control.extend({options:{cropImageByInnerWH:!0,hidden:!1,domtoimageOptions:{},position:"topleft",screenName:"screen",iconUrl:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+",hideElementsWithSelectors:[".leaflet-control-container"],onCropBorderSize:2,caption:null,captionFontSize:15,captionFont:"Arial",captionColor:"black",captionBgColor:"white",captionOffset:5,mimeType:"image/png",debugMode:!1,preventDownload:!1,onPixelDataFail:function(y){var b=y.node,w=y.error;return console.warn("Map node is very big "+b.scrollWidth+"x"+b.scrollHeight),console.warn(`Add function: SimpleMapScreenshoter({
              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {
                 // Solutions:
                 // decrease size of map
                 // or decrease zoom level
                 // or remove elements with big distanses
                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap
                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)
              }
            })`),Promise.reject(w)}},onAdd:function(){return this._container=L.DomUtil.create("div","leaflet-control-simpleMapScreenshoter"),this._link=null,this._screenState={status:1,promise:null},this.options.hidden===!1&&this._addScreenBtn(),this._onUserStartInteractWithMap=this._onUserStartInteractWithMap.bind(this),this._onUserEndInteractWithMap=this._onUserEndInteractWithMap.bind(this),this._map.on("zoomstart",this._onUserStartInteractWithMap),this._map.on("move",this._onUserStartInteractWithMap),this._map.on("zoomend",this._onUserEndInteractWithMap),this._map.on("moveend",this._onUserEndInteractWithMap),this._container},takeScreen:function(){var y=this,b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"blob",w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E={};for(var C in this.options)w.hasOwnProperty(C)?E[C]=w[C]:E[C]=this.options[C];return this._screenState.status===2?this._screenState.promise:(this._map.fire("simpleMapScreenshoter.takeScreen"),this._screenState.status=2,this._setElementsVisible(!1),this._screenState.promise=this._waitEndOfInteractions().then(function(){return y._getPixelData(E)}).then(function(R){return y._setElementsVisible(!0),y._toCanvas(R,E)}).then(function(R){return b==="image"?y._canvasToImage(R,E):b==="canvas"?R:y._canvasToBlob(R,E)}).then(function(R){return y._screenState.status=1,y._map.fire("simpleMapScreenshoter.done"),R}).catch(function(R){return y._setElementsVisible(!0),y._screenState.status=1,y._map.fire("simpleMapScreenshoter.error",{e:R}),Promise.reject(R)}),this._screenState.promise)},_setElementsVisible:function(){var y=this,b=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.hideElementsWithSelectors.forEach(function(w){var E=y._map._container.querySelectorAll(w),C=!0,R=!1,O=void 0;try{for(var q,F=E[Symbol.iterator]();!(C=(q=F.next()).done);C=!0)q.value.style.opacity=b===!1?0:1}catch(V){R=!0,O=V}finally{try{!C&&F.return&&F.return()}finally{if(R)throw O}}})},_canvasToImage:function(y,b){var w=b.mimeType,E=y.toDataURL(w);return E.indexOf("base64")===-1?Promise.reject(new Error("Base64 image generation error")):Promise.resolve(E)},_canvasToBlob:function(y,b){var w=b.mimeType;return new Promise(function(E,C){y.toBlob(function(R){E(R)},w)})},_toCanvas:function(y,b){var w=b.captionOffset,E=b.caption,C=b.captionFontSize,R=b.captionFont,O=b.captionColor,q=b.captionBgColor,F=this._node,V=F.screenHeight,Y=F.screenWidth,Ct=document.createElement("canvas");Ct.width=Y,Ct.height=V;for(var kt=Ct.getContext("2d"),wt=kt.createImageData(Y,V),et=0;et<y.length;++et)wt.data[et]=y[et];kt.putImageData(wt,0,0),wt=null;var ct=document.createElement("canvas"),Bt=ct.getContext("2d"),Yt=0,$=0,J=V,I=Y;if(this.options.cropImageByInnerWH===!0){for(var nt=[],K=0,tt=0;tt<V;++tt){K=0;for(var _t=0;_t<Y;++_t)y[4*tt*Y+4*_t+4]===0&&K++;K===Y&&nt.push(tt)}var G=this._getMinAndMaxOnValuesBreak(nt);Yt=G.min;for(var j=Y,X=G.max,Rt=[],D=0,Z=$;Z<j;++Z){D=0;for(var ut=0;ut<V;++ut)y[4*ut*Y+4*Z+4]===0&&D++;D===V&&Rt.push(Z)}var vt=this._getMinAndMaxOnValuesBreak(Rt);$=vt.min,j=vt.max,($===0&&j===0||j===null)&&(j=Y),(Yt===0&&X===0||X===null)&&(X=V),this.options.debugMode===!0&&(console.log("emptyYLine",nt),console.log("minMaxY",G),console.log("emptyXLine",Rt),console.log("minMaxX",vt),console.log("debugX",{}),console.log("debugY",{})),Yt===0&&X===V&&$===0&&j===Y||(Yt+=this.options.onCropBorderSize,X-=this.options.onCropBorderSize,$+=this.options.onCropBorderSize,j-=this.options.onCropBorderSize),J=X-Yt,I=j-$,ct.width=I,ct.height=J}else ct.width=I,ct.height=J;var xt=null;return E&&(xt=typeof E=="function"?E.call(this):E),xt!==null&&(ct.height=ct.height+(w+C+w),Bt.beginPath(),Bt.rect(0,0,ct.width,ct.height),Bt.fillStyle=q,Bt.fill(),Bt.save()),Bt.drawImage(Ct,$,Yt,I,J,0,0,I,J),xt!==null&&(Bt.font=C+"px "+R,Bt.fillStyle=O,Bt.fillText(xt,w,J+w+C)),Promise.resolve(ct)},_getMinAndMaxOnValuesBreak:function(y){for(var b=0,w=0,E=!1,C=1;C<y.length;C++){if(y[C]-1!==y[C-1]){w=y[C],E=!0;break}b=y[C]}return E===!1&&y[0]>1?(b=0,w=y[0]):E===!1&&(b=y[y.length-1]||0,w=null),{min:b,max:w}},_getPixelData:function(y){var b=this,w=y.domtoimageOptions,E=w===void 0?{}:w;return this._getPixelDataOfNormalMap(E).catch(function(C){return console.warn("May be map size very big on that zoom level, we have error:",C.toString()),console.warn("You can manually hide map elements with large distances between them for fix that warn"),b._getPixelDataOfBigMap(E)})},_getPixelDataOfNormalMap:function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=this._map.getContainer();return this._node={node:b,screenHeight:b.scrollHeight,screenWidth:b.scrollWidth},l.toPixelData(b,y)},_getPixelDataOfBigMap:function(){var y=this,b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},w=this._map.getContainer(),E=this._map.getPane("mapPane");E.style.width=2*w.clientWidth+"px",E.style.height=2*w.clientHeight+"px",E.style.overflow="hidden";var C=function(){E.style.width="initial",E.style.height="initial",E.style.overflow="initial"};return this._node={node:w,screenHeight:w.scrollHeight,screenWidth:w.scrollWidth},l.toPixelData(w,b).then(function(R){return C(),R}).catch(function(R){return C(),w.scrollHeight>=4e3||w.scrollWidth>=4e3?y.options.onPixelDataFail({plugin:y,node:w,mapPane:E,error:R,domtoimageOptions:b}):Promise.reject(R)})},_addScreenBtn:function(){this._link=L.DomUtil.create("a","leaflet-control-simpleMapScreenshoter-btn",this._container),this._addCss(),L.DomEvent.addListener(this._link,"click",this._onScreenBtn,this),L.DomEvent.disableClickPropagation(this._link)},_addCss:function(){var y=`
    .leaflet-control-simpleMapScreenshoter{
       border: 2px solid rgba(0,0,0,0.2);
       background-clip: padding-box;
    }
    .leaflet-control-simpleMapScreenshoter a{
       background-color: #fff;
       border-bottom: 1px solid #ccc;
       width: 30px;
       height: 30px;
       line-height: 30px;
       display: block;
       text-align: center;
       text-decoration: none;
       color: black;
       overflow: hidden;
       border-radius: 2px;
       background-image: url('`+this.options.iconUrl+`');
       background-position: 46% 41%;
       background-repeat: no-repeat;
       background-size: 63%;
    }
    .leaflet-control-simpleMapScreenshoter a:hover{
       cursor: pointer;
    }
    `,b=document.head||document.getElementsByTagName("head")[0],w=document.createElement("style");w.appendChild(document.createTextNode(y)),b.appendChild(w)},_onScreenBtn:function(){var y=this;this._map.fire("simpleMapScreenshoter.click"),this.options.preventDownload||this.takeScreen().then(function(b){var w=typeof y.options.screenName=="function"?y.options.screenName.call(y):y.options.screenName;c.saveAs(b,w+".png")}).catch(function(b){y._map.fire("simpleMapScreenshoter.error",{e:b})})},_onUserStartInteractWithMap:function(){this._interaction=!0},_onUserEndInteractWithMap:function(){this._interaction=!1},_waitEndOfInteractions:function(){var y=this;return new Promise(function(b){var w=setInterval(function(){y._interaction||(b(),clearInterval(w))},100)})}}),m=(L.Control.SimpleMapScreenshoter=d,L.simpleMapScreenshoter=function(y){return new L.Control.SimpleMapScreenshoter(y)},d);n.default=m,n.SimpleMapScreenshoter=d,Object.defineProperty(n,"__esModule",{value:!0})})})(u0,u0.exports);const r3={class:"drawing-tools"},s3={class:"mb-4"},o3={class:"grid grid-cols-2 gap-2"},a3=["onClick"],l3={class:"text-sm"},u3={key:0,class:"space-y-2"},c3={class:"border rounded overflow-hidden"},h3={class:"p-3 space-y-3"},f3={class:"grid grid-cols-6 gap-2"},d3=["onClick"],p3={class:"space-y-2"},m3={class:"flex items-center gap-2"},g3={class:"flex items-center gap-2"},_3=["value"],v3={key:0,class:"flex items-center gap-2"},y3={class:"border rounded overflow-hidden mt-4"},b3={class:"p-3 space-y-2 text-sm"},w3={key:0},x3={key:0,class:"space-y-1"},L3={class:"flex justify-between"},C3={class:"font-medium"},k3={class:"flex justify-between"},P3={class:"font-medium"},S3={class:"flex justify-between"},E3={class:"font-medium"},M3={class:"flex justify-between"},A3={class:"font-medium"},B3={key:1,class:"space-y-1"},T3={class:"flex justify-between"},N3={class:"font-medium"},D3={class:"flex justify-between"},O3={class:"font-medium"},I3={class:"flex justify-between"},R3={class:"font-medium"},F3={class:"flex justify-between"},j3={class:"font-medium"},z3={key:2,class:"space-y-1"},U3={class:"flex justify-between"},q3={class:"font-medium"},$3={class:"flex justify-between"},G3={class:"font-medium"},V3={class:"flex justify-between"},H3={class:"font-medium"},W3={class:"flex justify-between"},Z3={class:"font-medium"},K3={class:"flex justify-between"},Y3={class:"font-medium"},J3={key:3,class:"space-y-1"},X3={class:"flex justify-between"},Q3={class:"font-medium"},tw={key:0,class:"flex justify-between"},ew={class:"font-medium"},nw={key:1,class:"flex justify-between"},iw={class:"font-medium"},rw={key:4,class:"space-y-1"},sw={class:"flex justify-between"},ow={class:"font-medium"},aw={class:"flex justify-between"},lw={class:"font-medium"},uw={key:5,class:"space-y-1"},cw={class:"flex justify-between"},hw={class:"font-medium"},fw={class:"flex justify-between"},dw={class:"font-medium"},pw={class:"flex justify-between"},mw={class:"font-medium"},gw={class:"flex justify-between"},_w={class:"font-medium"},vw={key:1,class:"text-gray-500 text-center"},yw=Es({__name:"DrawingTools",props:{currentTool:{},selectedShape:{}},emits:["tool-change","style-update","delete-shape"],setup(t,{emit:e}){const n=t,r=e,o=Re(null);us(()=>n.selectedShape,wt=>{console.log("[DrawingTools] Changement de forme sélectionnée",{newShape:wt,properties:wt==null?void 0:wt.properties}),wt?o.value={...wt.properties}:o.value=null},{deep:!0,immediate:!0}),us(()=>o.value,(wt,et)=>{console.log("[DrawingTools] Changement détecté dans localProperties",{newProperties:wt,oldProperties:et,selectedShape:n.selectedShape})},{deep:!0});const l=[{type:"Circle",label:"Cercle"},{type:"Semicircle",label:"Demi-cercle"},{type:"Rectangle",label:"Rectangle"},{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"TextRectangle",label:"Texte"},{type:"delete",label:"Supprimer"}],c=["#2563EB","#DC2626","#059669","#D97706","#7C3AED","#DB2777"],d=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointillé"},{value:"dashdot",label:"Tiret-point"}],m=Re("#3B82F6"),y=Re(.2),b=Re("#2563EB"),w=Re(2),E=Re("solid"),C=Re({style:!1,properties:!1}),R=Nn(()=>{var et,ct;const wt=(ct=(et=n.selectedShape)==null?void 0:et.properties)==null?void 0:ct.type;return console.log("[DrawingTools] Calcul de showFillOptions",{shapeType:wt,selectedShape:n.selectedShape}),wt?["Circle","Rectangle","Polygon"].includes(wt):!1}),O=wt=>{C.value[wt]=!C.value[wt]},q=wt=>{switch(wt){case"dashed":return"10,10";case"dotted":return"2,5";case"dashdot":return"10,5,2,5";default:return""}},F=wt=>{b.value=wt,R.value&&(m.value=wt),V({strokeColor:wt,fillColor:R.value?wt:void 0})},V=wt=>{const et={...wt};wt.strokeStyle&&(et.dashArray=q(wt.strokeStyle)),wt.fillOpacity!==void 0&&(et.fillOpacity=parseFloat(wt.fillOpacity)),wt.strokeOpacity!==void 0&&(et.strokeOpacity=parseFloat(wt.strokeOpacity)),wt.strokeWidth!==void 0&&(et.weight=parseInt(wt.strokeWidth)),wt.strokeColor&&(et.color=wt.strokeColor),r("style-update",et)},Y=wt=>wt?wt>=1e3?`${(wt/1e3).toFixed(2)} km`:`${wt.toFixed(2)} m`:"0 m",Ct=wt=>wt?`${(wt/1e4).toFixed(2)} ha`:"0 ha",kt=wt=>wt?`${((wt%360+360)%360).toFixed(1)}°`:"0°";return(wt,et)=>{var ct;return ue(),fe("div",r3,[A("div",s3,[A("div",o3,[(ue(!0),fe(Mn,null,Wn(l.filter(Bt=>Bt.type!=="delete"),Bt=>(ue(),fe("button",{key:Bt.type,class:Kr(["flex items-center justify-center p-2 rounded border",{"bg-blue-50 border-blue-200":wt.currentTool===Bt.type,"hover:bg-gray-50 border-gray-200":wt.currentTool!==Bt.type}]),onClick:Yt=>wt.$emit("tool-change",Bt.type)},[A("span",l3,Ce(Bt.label),1)],10,a3))),128))]),wt.selectedShape?(ue(),fe("button",{key:0,class:Kr(["w-full mt-2 flex items-center justify-center p-2 rounded border border-red-500 bg-red-50 hover:bg-red-100 text-red-700 transition-colors duration-200",{"bg-red-100 border-red-600":wt.currentTool==="delete"}]),onClick:et[0]||(et[0]=Bt=>wt.$emit("delete-shape"))},et[13]||(et[13]=[A("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),A("span",{class:"text-sm font-medium"},"Supprimer la forme",-1)]),2)):an("",!0)]),wt.selectedShape&&o.value?(ue(),fe("div",u3,[A("div",c3,[A("button",{class:"w-full px-3 py-2 flex justify-between items-center bg-gray-50 hover:bg-gray-100",onClick:et[1]||(et[1]=Bt=>O("style"))},[et[15]||(et[15]=A("span",{class:"font-medium"},"Style",-1)),(ue(),fe("svg",{class:Kr(["w-5 h-5 transform transition-transform",{"rotate-180":!C.value.style}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},et[14]||(et[14]=[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),jn(A("div",h3,[A("div",f3,[(ue(),fe(Mn,null,Wn(c,Bt=>A("button",{key:Bt,class:"w-6 h-6 rounded-full border hover:scale-110 transition-transform",style:dh({backgroundColor:Bt}),onClick:Yt=>F(Bt)},null,12,d3)),64))]),A("div",p3,[A("div",m3,[et[16]||(et[16]=A("span",{class:"text-xs text-gray-500"},"Contour",-1)),jn(A("input",{type:"color","onUpdate:modelValue":et[2]||(et[2]=Bt=>b.value=Bt),class:"w-6 h-6",onChange:et[3]||(et[3]=Bt=>V({strokeColor:b.value})),title:"Couleur du contour"},null,544),[[Bi,b.value]]),jn(A("input",{type:"range","onUpdate:modelValue":et[4]||(et[4]=Bt=>w.value=Bt),min:"1",max:"10",class:"flex-1",onChange:et[5]||(et[5]=Bt=>V({strokeWidth:w.value})),title:"Épaisseur du contour"},null,544),[[Bi,w.value]])]),A("div",g3,[et[17]||(et[17]=A("span",{class:"text-xs text-gray-500"},"Style",-1)),jn(A("select",{"onUpdate:modelValue":et[6]||(et[6]=Bt=>E.value=Bt),class:"flex-1 text-sm border rounded px-1 py-0.5",onChange:et[7]||(et[7]=Bt=>V({strokeStyle:E.value}))},[(ue(),fe(Mn,null,Wn(d,Bt=>A("option",{key:Bt.value,value:Bt.value},Ce(Bt.label),9,_3)),64))],544),[[$s,E.value]])]),R.value?(ue(),fe("div",v3,[et[18]||(et[18]=A("span",{class:"text-xs text-gray-500"},"Remplissage",-1)),jn(A("input",{type:"color","onUpdate:modelValue":et[8]||(et[8]=Bt=>m.value=Bt),class:"w-6 h-6",onChange:et[9]||(et[9]=Bt=>V({fillColor:m.value})),title:"Couleur de remplissage"},null,544),[[Bi,m.value]]),jn(A("input",{type:"range","onUpdate:modelValue":et[10]||(et[10]=Bt=>y.value=Bt),min:"0",max:"1",step:"0.1",class:"flex-1",onChange:et[11]||(et[11]=Bt=>V({fillOpacity:y.value})),title:"Opacité du remplissage"},null,544),[[Bi,y.value]])])):an("",!0)])],512),[[up,!C.value.style]])]),A("div",y3,[A("button",{class:"w-full px-3 py-2 flex justify-between items-center bg-gray-50 hover:bg-gray-100",onClick:et[12]||(et[12]=Bt=>O("properties"))},[et[20]||(et[20]=A("span",{class:"font-medium"},"Propriétés",-1)),(ue(),fe("svg",{class:Kr(["w-5 h-5 transform transition-transform",{"rotate-180":!C.value.properties}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},et[19]||(et[19]=[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),jn(A("div",b3,[o.value?(ue(),fe("div",w3,[o.value.type==="Circle"?(ue(),fe("div",x3,[A("div",L3,[et[21]||(et[21]=A("span",{class:"text-gray-600"},"Rayon :",-1)),A("span",C3,Ce(Y(o.value.radius||0)),1)]),A("div",k3,[et[22]||(et[22]=A("span",{class:"text-gray-600"},"Diamètre :",-1)),A("span",P3,Ce(Y(o.value.diameter||0)),1)]),A("div",S3,[et[23]||(et[23]=A("span",{class:"text-gray-600"},"Surface :",-1)),A("span",E3,Ce(Ct(o.value.area||0)),1)]),A("div",M3,[et[24]||(et[24]=A("span",{class:"text-gray-600"},"Périmètre :",-1)),A("span",A3,Ce(Y(o.value.perimeter||0)),1)])])):o.value.type==="Rectangle"?(ue(),fe("div",B3,[A("div",T3,[et[25]||(et[25]=A("span",{class:"text-gray-600"},"Largeur :",-1)),A("span",N3,Ce(Y(o.value.width||0)),1)]),A("div",D3,[et[26]||(et[26]=A("span",{class:"text-gray-600"},"Hauteur :",-1)),A("span",O3,Ce(Y(o.value.height||0)),1)]),A("div",I3,[et[27]||(et[27]=A("span",{class:"text-gray-600"},"Surface :",-1)),A("span",R3,Ce(Ct(o.value.area||0)),1)]),A("div",F3,[et[28]||(et[28]=A("span",{class:"text-gray-600"},"Périmètre :",-1)),A("span",j3,Ce(Y(o.value.perimeter||0)),1)])])):o.value.type==="Semicircle"?(ue(),fe("div",z3,[A("div",U3,[et[29]||(et[29]=A("span",{class:"text-gray-600"},"Rayon :",-1)),A("span",q3,Ce(Y(o.value.radius||0)),1)]),A("div",$3,[et[30]||(et[30]=A("span",{class:"text-gray-600"},"Surface :",-1)),A("span",G3,Ce(Ct(o.value.area||0)),1)]),A("div",V3,[et[31]||(et[31]=A("span",{class:"text-gray-600"},"Périmètre :",-1)),A("span",H3,Ce(Y(o.value.perimeter||0)),1)]),A("div",W3,[et[32]||(et[32]=A("span",{class:"text-gray-600"},"Longueur d'arc :",-1)),A("span",Z3,Ce(Y(o.value.arcLength||0)),1)]),A("div",K3,[et[33]||(et[33]=A("span",{class:"text-gray-600"},"Angle d'ouverture :",-1)),A("span",Y3,Ce(kt(o.value.openingAngle||0)),1)])])):o.value.type==="Line"?(ue(),fe("div",J3,[A("div",X3,[et[34]||(et[34]=A("span",{class:"text-gray-600"},"Longueur :",-1)),A("span",Q3,Ce(Y(o.value.length||0)),1)]),(ct=o.value.dimensions)!=null&&ct.width?(ue(),fe("div",tw,[et[35]||(et[35]=A("span",{class:"text-gray-600"},"Largeur d'influence :",-1)),A("span",ew,Ce(Y(o.value.dimensions.width)),1)])):an("",!0),o.value.surfaceInfluence?(ue(),fe("div",nw,[et[36]||(et[36]=A("span",{class:"text-gray-600"},"Surface d'influence :",-1)),A("span",iw,Ce(Ct(o.value.surfaceInfluence)),1)])):an("",!0)])):o.value.type==="Polygon"?(ue(),fe("div",rw,[A("div",sw,[et[37]||(et[37]=A("span",{class:"text-gray-600"},"Surface :",-1)),A("span",ow,Ce(Ct(o.value.area||0)),1)]),A("div",aw,[et[38]||(et[38]=A("span",{class:"text-gray-600"},"Périmètre :",-1)),A("span",lw,Ce(Y(o.value.perimeter||0)),1)])])):o.value.type==="TextRectangle"?(ue(),fe("div",uw,[A("div",cw,[et[39]||(et[39]=A("span",{class:"text-gray-600"},"Largeur :",-1)),A("span",hw,Ce(Y(o.value.width||0)),1)]),A("div",fw,[et[40]||(et[40]=A("span",{class:"text-gray-600"},"Hauteur :",-1)),A("span",dw,Ce(Y(o.value.height||0)),1)]),A("div",pw,[et[41]||(et[41]=A("span",{class:"text-gray-600"},"Surface :",-1)),A("span",mw,Ce(Ct(o.value.area||0)),1)]),A("div",gw,[et[42]||(et[42]=A("span",{class:"text-gray-600"},"Rotation :",-1)),A("span",_w,Ce(kt(o.value.rotation||0)),1)])])):an("",!0)])):(ue(),fe("div",vw," Aucune propriété disponible "))],512),[[up,!C.value.properties]])])])):an("",!0)])}}}),bw=Gg(yw,[["__scopeId","data-v-3f2d70ec"]]);(()=>{var je,un;var t=Object.create,e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,o=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,c=(s,a)=>()=>(a||s((a={exports:{}}).exports,a),a.exports),d=(s,a,h,p)=>{if(a&&typeof a=="object"||typeof a=="function")for(let _ of r(a))!l.call(s,_)&&_!==h&&e(s,_,{get:()=>a[_],enumerable:!(p=n(a,_))||p.enumerable});return s},m=(s,a,h)=>(h=s!=null?t(o(s)):{},d(a||!s||!s.__esModule?e(h,"default",{value:s,enumerable:!0}):h,s)),y=c((s,a)=>{function h(){this.__data__=[],this.size=0}a.exports=h}),b=c((s,a)=>{function h(p,_){return p===_||p!==p&&_!==_}a.exports=h}),w=c((s,a)=>{var h=b();function p(_,k){for(var M=_.length;M--;)if(h(_[M][0],k))return M;return-1}a.exports=p}),E=c((s,a)=>{var h=w(),p=Array.prototype,_=p.splice;function k(M){var B=this.__data__,z=h(B,M);if(z<0)return!1;var Q=B.length-1;return z==Q?B.pop():_.call(B,z,1),--this.size,!0}a.exports=k}),C=c((s,a)=>{var h=w();function p(_){var k=this.__data__,M=h(k,_);return M<0?void 0:k[M][1]}a.exports=p}),R=c((s,a)=>{var h=w();function p(_){return h(this.__data__,_)>-1}a.exports=p}),O=c((s,a)=>{var h=w();function p(_,k){var M=this.__data__,B=h(M,_);return B<0?(++this.size,M.push([_,k])):M[B][1]=k,this}a.exports=p}),q=c((s,a)=>{var h=y(),p=E(),_=C(),k=R(),M=O();function B(z){var Q=-1,Nt=z==null?0:z.length;for(this.clear();++Q<Nt;){var Et=z[Q];this.set(Et[0],Et[1])}}B.prototype.clear=h,B.prototype.delete=p,B.prototype.get=_,B.prototype.has=k,B.prototype.set=M,a.exports=B}),F=c((s,a)=>{var h=q();function p(){this.__data__=new h,this.size=0}a.exports=p}),V=c((s,a)=>{function h(p){var _=this.__data__,k=_.delete(p);return this.size=_.size,k}a.exports=h}),Y=c((s,a)=>{function h(p){return this.__data__.get(p)}a.exports=h}),Ct=c((s,a)=>{function h(p){return this.__data__.has(p)}a.exports=h}),kt=c((s,a)=>{var h=typeof co=="object"&&co&&co.Object===Object&&co;a.exports=h}),wt=c((s,a)=>{var h=kt(),p=typeof self=="object"&&self&&self.Object===Object&&self,_=h||p||Function("return this")();a.exports=_}),et=c((s,a)=>{var h=wt(),p=h.Symbol;a.exports=p}),ct=c((s,a)=>{var h=et(),p=Object.prototype,_=p.hasOwnProperty,k=p.toString,M=h?h.toStringTag:void 0;function B(z){var Q=_.call(z,M),Nt=z[M];try{z[M]=void 0;var Et=!0}catch{}var Jt=k.call(z);return Et&&(Q?z[M]=Nt:delete z[M]),Jt}a.exports=B}),Bt=c((s,a)=>{var h=Object.prototype,p=h.toString;function _(k){return p.call(k)}a.exports=_}),Yt=c((s,a)=>{var h=et(),p=ct(),_=Bt(),k="[object Null]",M="[object Undefined]",B=h?h.toStringTag:void 0;function z(Q){return Q==null?Q===void 0?M:k:B&&B in Object(Q)?p(Q):_(Q)}a.exports=z}),$=c((s,a)=>{function h(p){var _=typeof p;return p!=null&&(_=="object"||_=="function")}a.exports=h}),J=c((s,a)=>{var h=Yt(),p=$(),_="[object AsyncFunction]",k="[object Function]",M="[object GeneratorFunction]",B="[object Proxy]";function z(Q){if(!p(Q))return!1;var Nt=h(Q);return Nt==k||Nt==M||Nt==_||Nt==B}a.exports=z}),I=c((s,a)=>{var h=wt(),p=h["__core-js_shared__"];a.exports=p}),nt=c((s,a)=>{var h=I(),p=function(){var k=/[^.]+$/.exec(h&&h.keys&&h.keys.IE_PROTO||"");return k?"Symbol(src)_1."+k:""}();function _(k){return!!p&&p in k}a.exports=_}),K=c((s,a)=>{var h=Function.prototype,p=h.toString;function _(k){if(k!=null){try{return p.call(k)}catch{}try{return k+""}catch{}}return""}a.exports=_}),tt=c((s,a)=>{var h=J(),p=nt(),_=$(),k=K(),M=/[\\^$.*+?()[\]{}|]/g,B=/^\[object .+?Constructor\]$/,z=Function.prototype,Q=Object.prototype,Nt=z.toString,Et=Q.hasOwnProperty,Jt=RegExp("^"+Nt.call(Et).replace(M,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function he(Pe){if(!_(Pe)||p(Pe))return!1;var Oe=h(Pe)?Jt:B;return Oe.test(k(Pe))}a.exports=he}),_t=c((s,a)=>{function h(p,_){return p==null?void 0:p[_]}a.exports=h}),G=c((s,a)=>{var h=tt(),p=_t();function _(k,M){var B=p(k,M);return h(B)?B:void 0}a.exports=_}),j=c((s,a)=>{var h=G(),p=wt(),_=h(p,"Map");a.exports=_}),X=c((s,a)=>{var h=G(),p=h(Object,"create");a.exports=p}),Rt=c((s,a)=>{var h=X();function p(){this.__data__=h?h(null):{},this.size=0}a.exports=p}),D=c((s,a)=>{function h(p){var _=this.has(p)&&delete this.__data__[p];return this.size-=_?1:0,_}a.exports=h}),Z=c((s,a)=>{var h=X(),p="__lodash_hash_undefined__",_=Object.prototype,k=_.hasOwnProperty;function M(B){var z=this.__data__;if(h){var Q=z[B];return Q===p?void 0:Q}return k.call(z,B)?z[B]:void 0}a.exports=M}),ut=c((s,a)=>{var h=X(),p=Object.prototype,_=p.hasOwnProperty;function k(M){var B=this.__data__;return h?B[M]!==void 0:_.call(B,M)}a.exports=k}),vt=c((s,a)=>{var h=X(),p="__lodash_hash_undefined__";function _(k,M){var B=this.__data__;return this.size+=this.has(k)?0:1,B[k]=h&&M===void 0?p:M,this}a.exports=_}),xt=c((s,a)=>{var h=Rt(),p=D(),_=Z(),k=ut(),M=vt();function B(z){var Q=-1,Nt=z==null?0:z.length;for(this.clear();++Q<Nt;){var Et=z[Q];this.set(Et[0],Et[1])}}B.prototype.clear=h,B.prototype.delete=p,B.prototype.get=_,B.prototype.has=k,B.prototype.set=M,a.exports=B}),dt=c((s,a)=>{var h=xt(),p=q(),_=j();function k(){this.size=0,this.__data__={hash:new h,map:new(_||p),string:new h}}a.exports=k}),St=c((s,a)=>{function h(p){var _=typeof p;return _=="string"||_=="number"||_=="symbol"||_=="boolean"?p!=="__proto__":p===null}a.exports=h}),Mt=c((s,a)=>{var h=St();function p(_,k){var M=_.__data__;return h(k)?M[typeof k=="string"?"string":"hash"]:M.map}a.exports=p}),Kt=c((s,a)=>{var h=Mt();function p(_){var k=h(this,_).delete(_);return this.size-=k?1:0,k}a.exports=p}),re=c((s,a)=>{var h=Mt();function p(_){return h(this,_).get(_)}a.exports=p}),it=c((s,a)=>{var h=Mt();function p(_){return h(this,_).has(_)}a.exports=p}),ht=c((s,a)=>{var h=Mt();function p(_,k){var M=h(this,_),B=M.size;return M.set(_,k),this.size+=M.size==B?0:1,this}a.exports=p}),It=c((s,a)=>{var h=dt(),p=Kt(),_=re(),k=it(),M=ht();function B(z){var Q=-1,Nt=z==null?0:z.length;for(this.clear();++Q<Nt;){var Et=z[Q];this.set(Et[0],Et[1])}}B.prototype.clear=h,B.prototype.delete=p,B.prototype.get=_,B.prototype.has=k,B.prototype.set=M,a.exports=B}),Dt=c((s,a)=>{var h=q(),p=j(),_=It(),k=200;function M(B,z){var Q=this.__data__;if(Q instanceof h){var Nt=Q.__data__;if(!p||Nt.length<k-1)return Nt.push([B,z]),this.size=++Q.size,this;Q=this.__data__=new _(Nt)}return Q.set(B,z),this.size=Q.size,this}a.exports=M}),lt=c((s,a)=>{var h=q(),p=F(),_=V(),k=Y(),M=Ct(),B=Dt();function z(Q){var Nt=this.__data__=new h(Q);this.size=Nt.size}z.prototype.clear=p,z.prototype.delete=_,z.prototype.get=k,z.prototype.has=M,z.prototype.set=B,a.exports=z}),Gt=c((s,a)=>{var h=G(),p=function(){try{var _=h(Object,"defineProperty");return _({},"",{}),_}catch{}}();a.exports=p}),se=c((s,a)=>{var h=Gt();function p(_,k,M){k=="__proto__"&&h?h(_,k,{configurable:!0,enumerable:!0,value:M,writable:!0}):_[k]=M}a.exports=p}),Qt=c((s,a)=>{var h=se(),p=b();function _(k,M,B){(B!==void 0&&!p(k[M],B)||B===void 0&&!(M in k))&&h(k,M,B)}a.exports=_}),oe=c((s,a)=>{function h(p){return function(_,k,M){for(var B=-1,z=Object(_),Q=M(_),Nt=Q.length;Nt--;){var Et=Q[p?Nt:++B];if(k(z[Et],Et,z)===!1)break}return _}}a.exports=h}),Ot=c((s,a)=>{var h=oe(),p=h();a.exports=p}),Lt=c((s,a)=>{var h=wt(),p=typeof s=="object"&&s&&!s.nodeType&&s,_=p&&typeof a=="object"&&a&&!a.nodeType&&a,k=_&&_.exports===p,M=k?h.Buffer:void 0,B=M?M.allocUnsafe:void 0;function z(Q,Nt){if(Nt)return Q.slice();var Et=Q.length,Jt=B?B(Et):new Q.constructor(Et);return Q.copy(Jt),Jt}a.exports=z}),ie=c((s,a)=>{var h=wt(),p=h.Uint8Array;a.exports=p}),_e=c((s,a)=>{var h=ie();function p(_){var k=new _.constructor(_.byteLength);return new h(k).set(new h(_)),k}a.exports=p}),Le=c((s,a)=>{var h=_e();function p(_,k){var M=k?h(_.buffer):_.buffer;return new _.constructor(M,_.byteOffset,_.length)}a.exports=p}),zt=c((s,a)=>{function h(p,_){var k=-1,M=p.length;for(_||(_=Array(M));++k<M;)_[k]=p[k];return _}a.exports=h}),De=c((s,a)=>{var h=$(),p=Object.create,_=function(){function k(){}return function(M){if(!h(M))return{};if(p)return p(M);k.prototype=M;var B=new k;return k.prototype=void 0,B}}();a.exports=_}),Te=c((s,a)=>{function h(p,_){return function(k){return p(_(k))}}a.exports=h}),Ue=c((s,a)=>{var h=Te(),p=h(Object.getPrototypeOf,Object);a.exports=p}),He=c((s,a)=>{var h=Object.prototype;function p(_){var k=_&&_.constructor,M=typeof k=="function"&&k.prototype||h;return _===M}a.exports=p}),Ne=c((s,a)=>{var h=De(),p=Ue(),_=He();function k(M){return typeof M.constructor=="function"&&!_(M)?h(p(M)):{}}a.exports=k}),Sn=c((s,a)=>{function h(p){return p!=null&&typeof p=="object"}a.exports=h}),en=c((s,a)=>{var h=Yt(),p=Sn(),_="[object Arguments]";function k(M){return p(M)&&h(M)==_}a.exports=k}),Jn=c((s,a)=>{var h=en(),p=Sn(),_=Object.prototype,k=_.hasOwnProperty,M=_.propertyIsEnumerable,B=h(function(){return arguments}())?h:function(z){return p(z)&&k.call(z,"callee")&&!M.call(z,"callee")};a.exports=B}),cn=c((s,a)=>{var h=Array.isArray;a.exports=h}),Ln=c((s,a)=>{var h=9007199254740991;function p(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=h}a.exports=p}),Xn=c((s,a)=>{var h=J(),p=Ln();function _(k){return k!=null&&p(k.length)&&!h(k)}a.exports=_}),qe=c((s,a)=>{var h=Xn(),p=Sn();function _(k){return p(k)&&h(k)}a.exports=_}),Pr=c((s,a)=>{function h(){return!1}a.exports=h}),Rn=c((s,a)=>{var h=wt(),p=Pr(),_=typeof s=="object"&&s&&!s.nodeType&&s,k=_&&typeof a=="object"&&a&&!a.nodeType&&a,M=k&&k.exports===_,B=M?h.Buffer:void 0,z=B?B.isBuffer:void 0,Q=z||p;a.exports=Q}),Li=c((s,a)=>{var h=Yt(),p=Ue(),_=Sn(),k="[object Object]",M=Function.prototype,B=Object.prototype,z=M.toString,Q=B.hasOwnProperty,Nt=z.call(Object);function Et(Jt){if(!_(Jt)||h(Jt)!=k)return!1;var he=p(Jt);if(he===null)return!0;var Pe=Q.call(he,"constructor")&&he.constructor;return typeof Pe=="function"&&Pe instanceof Pe&&z.call(Pe)==Nt}a.exports=Et}),Oi=c((s,a)=>{var h=Yt(),p=Ln(),_=Sn(),k="[object Arguments]",M="[object Array]",B="[object Boolean]",z="[object Date]",Q="[object Error]",Nt="[object Function]",Et="[object Map]",Jt="[object Number]",he="[object Object]",Pe="[object RegExp]",Oe="[object Set]",Fe="[object String]",dn="[object WeakMap]",Tt="[object ArrayBuffer]",Ft="[object DataView]",Ht="[object Float32Array]",ge="[object Float64Array]",te="[object Int8Array]",de="[object Int16Array]",U="[object Int32Array]",rt="[object Uint8Array]",gt="[object Uint8ClampedArray]",mt="[object Uint16Array]",yt="[object Uint32Array]",bt={};bt[Ht]=bt[ge]=bt[te]=bt[de]=bt[U]=bt[rt]=bt[gt]=bt[mt]=bt[yt]=!0,bt[k]=bt[M]=bt[Tt]=bt[B]=bt[Ft]=bt[z]=bt[Q]=bt[Nt]=bt[Et]=bt[Jt]=bt[he]=bt[Pe]=bt[Oe]=bt[Fe]=bt[dn]=!1;function $t(Ut){return _(Ut)&&p(Ut.length)&&!!bt[h(Ut)]}a.exports=$t}),qn=c((s,a)=>{function h(p){return function(_){return p(_)}}a.exports=h}),hn=c((s,a)=>{var h=kt(),p=typeof s=="object"&&s&&!s.nodeType&&s,_=p&&typeof a=="object"&&a&&!a.nodeType&&a,k=_&&_.exports===p,M=k&&h.process,B=function(){try{var z=_&&_.require&&_.require("util").types;return z||M&&M.binding&&M.binding("util")}catch{}}();a.exports=B}),Je=c((s,a)=>{var h=Oi(),p=qn(),_=hn(),k=_&&_.isTypedArray,M=k?p(k):h;a.exports=M}),Ye=c((s,a)=>{function h(p,_){if(!(_==="constructor"&&typeof p[_]=="function")&&_!="__proto__")return p[_]}a.exports=h}),ui=c((s,a)=>{var h=se(),p=b(),_=Object.prototype,k=_.hasOwnProperty;function M(B,z,Q){var Nt=B[z];(!(k.call(B,z)&&p(Nt,Q))||Q===void 0&&!(z in B))&&h(B,z,Q)}a.exports=M}),Sr=c((s,a)=>{var h=ui(),p=se();function _(k,M,B,z){var Q=!B;B||(B={});for(var Nt=-1,Et=M.length;++Nt<Et;){var Jt=M[Nt],he=z?z(B[Jt],k[Jt],Jt,B,k):void 0;he===void 0&&(he=k[Jt]),Q?p(B,Jt,he):h(B,Jt,he)}return B}a.exports=_}),Er=c((s,a)=>{function h(p,_){for(var k=-1,M=Array(p);++k<p;)M[k]=_(k);return M}a.exports=h}),ln=c((s,a)=>{var h=9007199254740991,p=/^(?:0|[1-9]\d*)$/;function _(k,M){var B=typeof k;return M=M??h,!!M&&(B=="number"||B!="symbol"&&p.test(k))&&k>-1&&k%1==0&&k<M}a.exports=_}),Jr=c((s,a)=>{var h=Er(),p=Jn(),_=cn(),k=Rn(),M=ln(),B=Je(),z=Object.prototype,Q=z.hasOwnProperty;function Nt(Et,Jt){var he=_(Et),Pe=!he&&p(Et),Oe=!he&&!Pe&&k(Et),Fe=!he&&!Pe&&!Oe&&B(Et),dn=he||Pe||Oe||Fe,Tt=dn?h(Et.length,String):[],Ft=Tt.length;for(var Ht in Et)(Jt||Q.call(Et,Ht))&&!(dn&&(Ht=="length"||Oe&&(Ht=="offset"||Ht=="parent")||Fe&&(Ht=="buffer"||Ht=="byteLength"||Ht=="byteOffset")||M(Ht,Ft)))&&Tt.push(Ht);return Tt}a.exports=Nt}),hs=c((s,a)=>{function h(p){var _=[];if(p!=null)for(var k in Object(p))_.push(k);return _}a.exports=h}),ar=c((s,a)=>{var h=$(),p=He(),_=hs(),k=Object.prototype,M=k.hasOwnProperty;function B(z){if(!h(z))return _(z);var Q=p(z),Nt=[];for(var Et in z)Et=="constructor"&&(Q||!M.call(z,Et))||Nt.push(Et);return Nt}a.exports=B}),$n=c((s,a)=>{var h=Jr(),p=ar(),_=Xn();function k(M){return _(M)?h(M,!0):p(M)}a.exports=k}),$e=c((s,a)=>{var h=Sr(),p=$n();function _(k){return h(k,p(k))}a.exports=_}),lr=c((s,a)=>{var h=Qt(),p=Lt(),_=Le(),k=zt(),M=Ne(),B=Jn(),z=cn(),Q=qe(),Nt=Rn(),Et=J(),Jt=$(),he=Li(),Pe=Je(),Oe=Ye(),Fe=$e();function dn(Tt,Ft,Ht,ge,te,de,U){var rt=Oe(Tt,Ht),gt=Oe(Ft,Ht),mt=U.get(gt);if(mt){h(Tt,Ht,mt);return}var yt=de?de(rt,gt,Ht+"",Tt,Ft,U):void 0,bt=yt===void 0;if(bt){var $t=z(gt),Ut=!$t&&Nt(gt),Wt=!$t&&!Ut&&Pe(gt);yt=gt,$t||Ut||Wt?z(rt)?yt=rt:Q(rt)?yt=k(rt):Ut?(bt=!1,yt=p(gt,!0)):Wt?(bt=!1,yt=_(gt,!0)):yt=[]:he(gt)||B(gt)?(yt=rt,B(rt)?yt=Fe(rt):(!Jt(rt)||Et(rt))&&(yt=M(gt))):bt=!1}bt&&(U.set(gt,yt),te(yt,gt,ge,de,U),U.delete(gt)),h(Tt,Ht,yt)}a.exports=dn}),go=c((s,a)=>{var h=lt(),p=Qt(),_=Ot(),k=lr(),M=$(),B=$n(),z=Ye();function Q(Nt,Et,Jt,he,Pe){Nt!==Et&&_(Et,function(Oe,Fe){if(Pe||(Pe=new h),M(Oe))k(Nt,Et,Fe,Jt,Q,he,Pe);else{var dn=he?he(z(Nt,Fe),Oe,Fe+"",Nt,Et,Pe):void 0;dn===void 0&&(dn=Oe),p(Nt,Fe,dn)}},B)}a.exports=Q}),Xr=c((s,a)=>{function h(p){return p}a.exports=h}),Mr=c((s,a)=>{function h(p,_,k){switch(k.length){case 0:return p.call(_);case 1:return p.call(_,k[0]);case 2:return p.call(_,k[0],k[1]);case 3:return p.call(_,k[0],k[1],k[2])}return p.apply(_,k)}a.exports=h}),vr=c((s,a)=>{var h=Mr(),p=Math.max;function _(k,M,B){return M=p(M===void 0?k.length-1:M,0),function(){for(var z=arguments,Q=-1,Nt=p(z.length-M,0),Et=Array(Nt);++Q<Nt;)Et[Q]=z[M+Q];Q=-1;for(var Jt=Array(M+1);++Q<M;)Jt[Q]=z[Q];return Jt[M]=B(Et),h(k,this,Jt)}}a.exports=_}),Ar=c((s,a)=>{function h(p){return function(){return p}}a.exports=h}),Xi=c((s,a)=>{var h=Ar(),p=Gt(),_=Xr(),k=p?function(M,B){return p(M,"toString",{configurable:!0,enumerable:!1,value:h(B),writable:!0})}:_;a.exports=k}),yr=c((s,a)=>{var h=800,p=16,_=Date.now;function k(M){var B=0,z=0;return function(){var Q=_(),Nt=p-(Q-z);if(z=Q,Nt>0){if(++B>=h)return arguments[0]}else B=0;return M.apply(void 0,arguments)}}a.exports=k}),fs=c((s,a)=>{var h=Xi(),p=yr(),_=p(h);a.exports=_}),_o=c((s,a)=>{var h=Xr(),p=vr(),_=fs();function k(M,B){return _(p(M,B,h),M+"")}a.exports=k}),Uo=c((s,a)=>{var h=b(),p=Xn(),_=ln(),k=$();function M(B,z,Q){if(!k(Q))return!1;var Nt=typeof z;return(Nt=="number"?p(Q)&&_(z,Q.length):Nt=="string"&&z in Q)?h(Q[z],B):!1}a.exports=M}),qo=c((s,a)=>{var h=_o(),p=Uo();function _(k){return h(function(M,B){var z=-1,Q=B.length,Nt=Q>1?B[Q-1]:void 0,Et=Q>2?B[2]:void 0;for(Nt=k.length>3&&typeof Nt=="function"?(Q--,Nt):void 0,Et&&p(B[0],B[1],Et)&&(Nt=Q<3?void 0:Nt,Q=1),M=Object(M);++z<Q;){var Jt=B[z];Jt&&k(M,Jt,z,Nt)}return M})}a.exports=_}),As=c((s,a)=>{var h=go(),p=qo(),_=p(function(k,M,B){h(k,M,B)});a.exports=_}),Ws=c((s,a)=>{var h=Yt(),p=Sn(),_="[object Symbol]";function k(M){return typeof M=="symbol"||p(M)&&h(M)==_}a.exports=k}),vo=c((s,a)=>{var h=cn(),p=Ws(),_=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,k=/^\w*$/;function M(B,z){if(h(B))return!1;var Q=typeof B;return Q=="number"||Q=="symbol"||Q=="boolean"||B==null||p(B)?!0:k.test(B)||!_.test(B)||z!=null&&B in Object(z)}a.exports=M}),_l=c((s,a)=>{var h=It(),p="Expected a function";function _(k,M){if(typeof k!="function"||M!=null&&typeof M!="function")throw new TypeError(p);var B=function(){var z=arguments,Q=M?M.apply(this,z):z[0],Nt=B.cache;if(Nt.has(Q))return Nt.get(Q);var Et=k.apply(this,z);return B.cache=Nt.set(Q,Et)||Nt,Et};return B.cache=new(_.Cache||h),B}_.Cache=h,a.exports=_}),vl=c((s,a)=>{var h=_l(),p=500;function _(k){var M=h(k,function(z){return B.size===p&&B.clear(),z}),B=M.cache;return M}a.exports=_}),$o=c((s,a)=>{var h=vl(),p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_=/\\(\\)?/g,k=h(function(M){var B=[];return M.charCodeAt(0)===46&&B.push(""),M.replace(p,function(z,Q,Nt,Et){B.push(Nt?Et.replace(_,"$1"):Q||z)}),B});a.exports=k}),za=c((s,a)=>{function h(p,_){for(var k=-1,M=p==null?0:p.length,B=Array(M);++k<M;)B[k]=_(p[k],k,p);return B}a.exports=h}),yl=c((s,a)=>{var h=et(),p=za(),_=cn(),k=Ws(),M=h?h.prototype:void 0,B=M?M.toString:void 0;function z(Q){if(typeof Q=="string")return Q;if(_(Q))return p(Q,z)+"";if(k(Q))return B?B.call(Q):"";var Nt=Q+"";return Nt=="0"&&1/Q==-1/0?"-0":Nt}a.exports=z}),yo=c((s,a)=>{var h=yl();function p(_){return _==null?"":h(_)}a.exports=p}),bo=c((s,a)=>{var h=cn(),p=vo(),_=$o(),k=yo();function M(B,z){return h(B)?B:p(B,z)?[B]:_(k(B))}a.exports=M}),pa=c((s,a)=>{var h=Ws();function p(_){if(typeof _=="string"||h(_))return _;var k=_+"";return k=="0"&&1/_==-1/0?"-0":k}a.exports=p}),Ua=c((s,a)=>{var h=bo(),p=pa();function _(k,M){M=h(M,k);for(var B=0,z=M.length;k!=null&&B<z;)k=k[p(M[B++])];return B&&B==z?k:void 0}a.exports=_}),br=c((s,a)=>{var h=Ua();function p(_,k,M){var B=_==null?void 0:h(_,k);return B===void 0?M:B}a.exports=p}),In=c((s,a)=>{(function(h,p){typeof s=="object"&&typeof a<"u"?a.exports=p():(h=h||self).RBush=p()})(s,function(){function h(Tt,Ft,Ht,ge,te){(function de(U,rt,gt,mt,yt){for(;mt>gt;){if(mt-gt>600){var bt=mt-gt+1,$t=rt-gt+1,Ut=Math.log(bt),Wt=.5*Math.exp(2*Ut/3),le=.5*Math.sqrt(Ut*Wt*(bt-Wt)/bt)*($t-bt/2<0?-1:1),ae=Math.max(gt,Math.floor(rt-$t*Wt/bt+le)),Ee=Math.min(mt,Math.floor(rt+(bt-$t)*Wt/bt+le));de(U,rt,ae,Ee,yt)}var We=U[rt],Qe=gt,nn=mt;for(p(U,gt,rt),yt(U[mt],We)>0&&p(U,gt,mt);Qe<nn;){for(p(U,Qe,nn),Qe++,nn--;yt(U[Qe],We)<0;)Qe++;for(;yt(U[nn],We)>0;)nn--}yt(U[gt],We)===0?p(U,gt,nn):p(U,++nn,mt),nn<=rt&&(gt=nn+1),rt<=nn&&(mt=nn-1)}})(Tt,Ft,Ht||0,ge||Tt.length-1,te||_)}function p(Tt,Ft,Ht){var ge=Tt[Ft];Tt[Ft]=Tt[Ht],Tt[Ht]=ge}function _(Tt,Ft){return Tt<Ft?-1:Tt>Ft?1:0}var k=function(Tt){Tt===void 0&&(Tt=9),this._maxEntries=Math.max(4,Tt),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function M(Tt,Ft,Ht){if(!Ht)return Ft.indexOf(Tt);for(var ge=0;ge<Ft.length;ge++)if(Ht(Tt,Ft[ge]))return ge;return-1}function B(Tt,Ft){z(Tt,0,Tt.children.length,Ft,Tt)}function z(Tt,Ft,Ht,ge,te){te||(te=Fe(null)),te.minX=1/0,te.minY=1/0,te.maxX=-1/0,te.maxY=-1/0;for(var de=Ft;de<Ht;de++){var U=Tt.children[de];Q(te,Tt.leaf?ge(U):U)}return te}function Q(Tt,Ft){return Tt.minX=Math.min(Tt.minX,Ft.minX),Tt.minY=Math.min(Tt.minY,Ft.minY),Tt.maxX=Math.max(Tt.maxX,Ft.maxX),Tt.maxY=Math.max(Tt.maxY,Ft.maxY),Tt}function Nt(Tt,Ft){return Tt.minX-Ft.minX}function Et(Tt,Ft){return Tt.minY-Ft.minY}function Jt(Tt){return(Tt.maxX-Tt.minX)*(Tt.maxY-Tt.minY)}function he(Tt){return Tt.maxX-Tt.minX+(Tt.maxY-Tt.minY)}function Pe(Tt,Ft){return Tt.minX<=Ft.minX&&Tt.minY<=Ft.minY&&Ft.maxX<=Tt.maxX&&Ft.maxY<=Tt.maxY}function Oe(Tt,Ft){return Ft.minX<=Tt.maxX&&Ft.minY<=Tt.maxY&&Ft.maxX>=Tt.minX&&Ft.maxY>=Tt.minY}function Fe(Tt){return{children:Tt,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function dn(Tt,Ft,Ht,ge,te){for(var de=[Ft,Ht];de.length;)if(!((Ht=de.pop())-(Ft=de.pop())<=ge)){var U=Ft+Math.ceil((Ht-Ft)/ge/2)*ge;h(Tt,U,Ft,Ht,te),de.push(Ft,U,U,Ht)}}return k.prototype.all=function(){return this._all(this.data,[])},k.prototype.search=function(Tt){var Ft=this.data,Ht=[];if(!Oe(Tt,Ft))return Ht;for(var ge=this.toBBox,te=[];Ft;){for(var de=0;de<Ft.children.length;de++){var U=Ft.children[de],rt=Ft.leaf?ge(U):U;Oe(Tt,rt)&&(Ft.leaf?Ht.push(U):Pe(Tt,rt)?this._all(U,Ht):te.push(U))}Ft=te.pop()}return Ht},k.prototype.collides=function(Tt){var Ft=this.data;if(!Oe(Tt,Ft))return!1;for(var Ht=[];Ft;){for(var ge=0;ge<Ft.children.length;ge++){var te=Ft.children[ge],de=Ft.leaf?this.toBBox(te):te;if(Oe(Tt,de)){if(Ft.leaf||Pe(Tt,de))return!0;Ht.push(te)}}Ft=Ht.pop()}return!1},k.prototype.load=function(Tt){if(!Tt||!Tt.length)return this;if(Tt.length<this._minEntries){for(var Ft=0;Ft<Tt.length;Ft++)this.insert(Tt[Ft]);return this}var Ht=this._build(Tt.slice(),0,Tt.length-1,0);if(this.data.children.length)if(this.data.height===Ht.height)this._splitRoot(this.data,Ht);else{if(this.data.height<Ht.height){var ge=this.data;this.data=Ht,Ht=ge}this._insert(Ht,this.data.height-Ht.height-1,!0)}else this.data=Ht;return this},k.prototype.insert=function(Tt){return Tt&&this._insert(Tt,this.data.height-1),this},k.prototype.clear=function(){return this.data=Fe([]),this},k.prototype.remove=function(Tt,Ft){if(!Tt)return this;for(var Ht,ge,te,de=this.data,U=this.toBBox(Tt),rt=[],gt=[];de||rt.length;){if(de||(de=rt.pop(),ge=rt[rt.length-1],Ht=gt.pop(),te=!0),de.leaf){var mt=M(Tt,de.children,Ft);if(mt!==-1)return de.children.splice(mt,1),rt.push(de),this._condense(rt),this}te||de.leaf||!Pe(de,U)?ge?(Ht++,de=ge.children[Ht],te=!1):de=null:(rt.push(de),gt.push(Ht),Ht=0,ge=de,de=de.children[0])}return this},k.prototype.toBBox=function(Tt){return Tt},k.prototype.compareMinX=function(Tt,Ft){return Tt.minX-Ft.minX},k.prototype.compareMinY=function(Tt,Ft){return Tt.minY-Ft.minY},k.prototype.toJSON=function(){return this.data},k.prototype.fromJSON=function(Tt){return this.data=Tt,this},k.prototype._all=function(Tt,Ft){for(var Ht=[];Tt;)Tt.leaf?Ft.push.apply(Ft,Tt.children):Ht.push.apply(Ht,Tt.children),Tt=Ht.pop();return Ft},k.prototype._build=function(Tt,Ft,Ht,ge){var te,de=Ht-Ft+1,U=this._maxEntries;if(de<=U)return B(te=Fe(Tt.slice(Ft,Ht+1)),this.toBBox),te;ge||(ge=Math.ceil(Math.log(de)/Math.log(U)),U=Math.ceil(de/Math.pow(U,ge-1))),(te=Fe([])).leaf=!1,te.height=ge;var rt=Math.ceil(de/U),gt=rt*Math.ceil(Math.sqrt(U));dn(Tt,Ft,Ht,gt,this.compareMinX);for(var mt=Ft;mt<=Ht;mt+=gt){var yt=Math.min(mt+gt-1,Ht);dn(Tt,mt,yt,rt,this.compareMinY);for(var bt=mt;bt<=yt;bt+=rt){var $t=Math.min(bt+rt-1,yt);te.children.push(this._build(Tt,bt,$t,ge-1))}}return B(te,this.toBBox),te},k.prototype._chooseSubtree=function(Tt,Ft,Ht,ge){for(;ge.push(Ft),!Ft.leaf&&ge.length-1!==Ht;){for(var te=1/0,de=1/0,U=void 0,rt=0;rt<Ft.children.length;rt++){var gt=Ft.children[rt],mt=Jt(gt),yt=(bt=Tt,$t=gt,(Math.max($t.maxX,bt.maxX)-Math.min($t.minX,bt.minX))*(Math.max($t.maxY,bt.maxY)-Math.min($t.minY,bt.minY))-mt);yt<de?(de=yt,te=mt<te?mt:te,U=gt):yt===de&&mt<te&&(te=mt,U=gt)}Ft=U||Ft.children[0]}var bt,$t;return Ft},k.prototype._insert=function(Tt,Ft,Ht){var ge=Ht?Tt:this.toBBox(Tt),te=[],de=this._chooseSubtree(ge,this.data,Ft,te);for(de.children.push(Tt),Q(de,ge);Ft>=0&&te[Ft].children.length>this._maxEntries;)this._split(te,Ft),Ft--;this._adjustParentBBoxes(ge,te,Ft)},k.prototype._split=function(Tt,Ft){var Ht=Tt[Ft],ge=Ht.children.length,te=this._minEntries;this._chooseSplitAxis(Ht,te,ge);var de=this._chooseSplitIndex(Ht,te,ge),U=Fe(Ht.children.splice(de,Ht.children.length-de));U.height=Ht.height,U.leaf=Ht.leaf,B(Ht,this.toBBox),B(U,this.toBBox),Ft?Tt[Ft-1].children.push(U):this._splitRoot(Ht,U)},k.prototype._splitRoot=function(Tt,Ft){this.data=Fe([Tt,Ft]),this.data.height=Tt.height+1,this.data.leaf=!1,B(this.data,this.toBBox)},k.prototype._chooseSplitIndex=function(Tt,Ft,Ht){for(var ge,te,de,U,rt,gt,mt,yt=1/0,bt=1/0,$t=Ft;$t<=Ht-Ft;$t++){var Ut=z(Tt,0,$t,this.toBBox),Wt=z(Tt,$t,Ht,this.toBBox),le=(te=Ut,de=Wt,U=void 0,rt=void 0,gt=void 0,mt=void 0,U=Math.max(te.minX,de.minX),rt=Math.max(te.minY,de.minY),gt=Math.min(te.maxX,de.maxX),mt=Math.min(te.maxY,de.maxY),Math.max(0,gt-U)*Math.max(0,mt-rt)),ae=Jt(Ut)+Jt(Wt);le<yt?(yt=le,ge=$t,bt=ae<bt?ae:bt):le===yt&&ae<bt&&(bt=ae,ge=$t)}return ge||Ht-Ft},k.prototype._chooseSplitAxis=function(Tt,Ft,Ht){var ge=Tt.leaf?this.compareMinX:Nt,te=Tt.leaf?this.compareMinY:Et;this._allDistMargin(Tt,Ft,Ht,ge)<this._allDistMargin(Tt,Ft,Ht,te)&&Tt.children.sort(ge)},k.prototype._allDistMargin=function(Tt,Ft,Ht,ge){Tt.children.sort(ge);for(var te=this.toBBox,de=z(Tt,0,Ft,te),U=z(Tt,Ht-Ft,Ht,te),rt=he(de)+he(U),gt=Ft;gt<Ht-Ft;gt++){var mt=Tt.children[gt];Q(de,Tt.leaf?te(mt):mt),rt+=he(de)}for(var yt=Ht-Ft-1;yt>=Ft;yt--){var bt=Tt.children[yt];Q(U,Tt.leaf?te(bt):bt),rt+=he(U)}return rt},k.prototype._adjustParentBBoxes=function(Tt,Ft,Ht){for(var ge=Ht;ge>=0;ge--)Q(Ft[ge],Tt)},k.prototype._condense=function(Tt){for(var Ft=Tt.length-1,Ht=void 0;Ft>=0;Ft--)Tt[Ft].children.length===0?Ft>0?(Ht=Tt[Ft-1].children).splice(Ht.indexOf(Tt[Ft]),1):this.clear():B(Tt[Ft],this.toBBox)},k})}),yn=c(s=>{Object.defineProperty(s,"__esModule",{value:!0}),s.earthRadius=63710088e-1,s.factors={centimeters:s.earthRadius*100,centimetres:s.earthRadius*100,degrees:s.earthRadius/111325,feet:s.earthRadius*3.28084,inches:s.earthRadius*39.37,kilometers:s.earthRadius/1e3,kilometres:s.earthRadius/1e3,meters:s.earthRadius,metres:s.earthRadius,miles:s.earthRadius/1609.344,millimeters:s.earthRadius*1e3,millimetres:s.earthRadius*1e3,nauticalmiles:s.earthRadius/1852,radians:1,yards:s.earthRadius*1.0936},s.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/s.earthRadius,yards:1.0936133},s.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function a(mt,yt,bt){bt===void 0&&(bt={});var $t={type:"Feature"};return(bt.id===0||bt.id)&&($t.id=bt.id),bt.bbox&&($t.bbox=bt.bbox),$t.properties=yt||{},$t.geometry=mt,$t}s.feature=a;function h(mt,yt,bt){switch(mt){case"Point":return p(yt).geometry;case"LineString":return B(yt).geometry;case"Polygon":return k(yt).geometry;case"MultiPoint":return Et(yt).geometry;case"MultiLineString":return Nt(yt).geometry;case"MultiPolygon":return Jt(yt).geometry;default:throw new Error(mt+" is invalid")}}s.geometry=h;function p(mt,yt,bt){if(bt===void 0&&(bt={}),!mt)throw new Error("coordinates is required");if(!Array.isArray(mt))throw new Error("coordinates must be an Array");if(mt.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!de(mt[0])||!de(mt[1]))throw new Error("coordinates must contain numbers");var $t={type:"Point",coordinates:mt};return a($t,yt,bt)}s.point=p;function _(mt,yt,bt){return bt===void 0&&(bt={}),Q(mt.map(function($t){return p($t,yt)}),bt)}s.points=_;function k(mt,yt,bt){bt===void 0&&(bt={});for(var $t=0,Ut=mt;$t<Ut.length;$t++){var Wt=Ut[$t];if(Wt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var le=0;le<Wt[Wt.length-1].length;le++)if(Wt[Wt.length-1][le]!==Wt[0][le])throw new Error("First and last Position are not equivalent.")}var ae={type:"Polygon",coordinates:mt};return a(ae,yt,bt)}s.polygon=k;function M(mt,yt,bt){return bt===void 0&&(bt={}),Q(mt.map(function($t){return k($t,yt)}),bt)}s.polygons=M;function B(mt,yt,bt){if(bt===void 0&&(bt={}),mt.length<2)throw new Error("coordinates must be an array of two or more positions");var $t={type:"LineString",coordinates:mt};return a($t,yt,bt)}s.lineString=B;function z(mt,yt,bt){return bt===void 0&&(bt={}),Q(mt.map(function($t){return B($t,yt)}),bt)}s.lineStrings=z;function Q(mt,yt){yt===void 0&&(yt={});var bt={type:"FeatureCollection"};return yt.id&&(bt.id=yt.id),yt.bbox&&(bt.bbox=yt.bbox),bt.features=mt,bt}s.featureCollection=Q;function Nt(mt,yt,bt){bt===void 0&&(bt={});var $t={type:"MultiLineString",coordinates:mt};return a($t,yt,bt)}s.multiLineString=Nt;function Et(mt,yt,bt){bt===void 0&&(bt={});var $t={type:"MultiPoint",coordinates:mt};return a($t,yt,bt)}s.multiPoint=Et;function Jt(mt,yt,bt){bt===void 0&&(bt={});var $t={type:"MultiPolygon",coordinates:mt};return a($t,yt,bt)}s.multiPolygon=Jt;function he(mt,yt,bt){bt===void 0&&(bt={});var $t={type:"GeometryCollection",geometries:mt};return a($t,yt,bt)}s.geometryCollection=he;function Pe(mt,yt){if(yt===void 0&&(yt=0),yt&&!(yt>=0))throw new Error("precision must be a positive number");var bt=Math.pow(10,yt||0);return Math.round(mt*bt)/bt}s.round=Pe;function Oe(mt,yt){yt===void 0&&(yt="kilometers");var bt=s.factors[yt];if(!bt)throw new Error(yt+" units is invalid");return mt*bt}s.radiansToLength=Oe;function Fe(mt,yt){yt===void 0&&(yt="kilometers");var bt=s.factors[yt];if(!bt)throw new Error(yt+" units is invalid");return mt/bt}s.lengthToRadians=Fe;function dn(mt,yt){return Ft(Fe(mt,yt))}s.lengthToDegrees=dn;function Tt(mt){var yt=mt%360;return yt<0&&(yt+=360),yt}s.bearingToAzimuth=Tt;function Ft(mt){var yt=mt%(2*Math.PI);return yt*180/Math.PI}s.radiansToDegrees=Ft;function Ht(mt){var yt=mt%360;return yt*Math.PI/180}s.degreesToRadians=Ht;function ge(mt,yt,bt){if(yt===void 0&&(yt="kilometers"),bt===void 0&&(bt="kilometers"),!(mt>=0))throw new Error("length must be a positive number");return Oe(Fe(mt,yt),bt)}s.convertLength=ge;function te(mt,yt,bt){if(yt===void 0&&(yt="meters"),bt===void 0&&(bt="kilometers"),!(mt>=0))throw new Error("area must be a positive number");var $t=s.areaFactors[yt];if(!$t)throw new Error("invalid original units");var Ut=s.areaFactors[bt];if(!Ut)throw new Error("invalid final units");return mt/$t*Ut}s.convertArea=te;function de(mt){return!isNaN(mt)&&mt!==null&&!Array.isArray(mt)}s.isNumber=de;function U(mt){return!!mt&&mt.constructor===Object}s.isObject=U;function rt(mt){if(!mt)throw new Error("bbox is required");if(!Array.isArray(mt))throw new Error("bbox must be an Array");if(mt.length!==4&&mt.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");mt.forEach(function(yt){if(!de(yt))throw new Error("bbox must only contain numbers")})}s.validateBBox=rt;function gt(mt){if(!mt)throw new Error("id is required");if(["string","number"].indexOf(typeof mt)===-1)throw new Error("id must be a number or a string")}s.validateId=gt}),Zs=c(s=>{Object.defineProperty(s,"__esModule",{value:!0});var a=yn();function h(Ft,Ht,ge){if(Ft!==null)for(var te,de,U,rt,gt,mt,yt,bt=0,$t=0,Ut,Wt=Ft.type,le=Wt==="FeatureCollection",ae=Wt==="Feature",Ee=le?Ft.features.length:1,We=0;We<Ee;We++){yt=le?Ft.features[We].geometry:ae?Ft.geometry:Ft,Ut=yt?yt.type==="GeometryCollection":!1,gt=Ut?yt.geometries.length:1;for(var Qe=0;Qe<gt;Qe++){var nn=0,Un=0;if(rt=Ut?yt.geometries[Qe]:yt,rt!==null){mt=rt.coordinates;var Hn=rt.type;switch(bt=ge&&(Hn==="Polygon"||Hn==="MultiPolygon")?1:0,Hn){case null:break;case"Point":if(Ht(mt,$t,We,nn,Un)===!1)return!1;$t++,nn++;break;case"LineString":case"MultiPoint":for(te=0;te<mt.length;te++){if(Ht(mt[te],$t,We,nn,Un)===!1)return!1;$t++,Hn==="MultiPoint"&&nn++}Hn==="LineString"&&nn++;break;case"Polygon":case"MultiLineString":for(te=0;te<mt.length;te++){for(de=0;de<mt[te].length-bt;de++){if(Ht(mt[te][de],$t,We,nn,Un)===!1)return!1;$t++}Hn==="MultiLineString"&&nn++,Hn==="Polygon"&&Un++}Hn==="Polygon"&&nn++;break;case"MultiPolygon":for(te=0;te<mt.length;te++){for(Un=0,de=0;de<mt[te].length;de++){for(U=0;U<mt[te][de].length-bt;U++){if(Ht(mt[te][de][U],$t,We,nn,Un)===!1)return!1;$t++}Un++}nn++}break;case"GeometryCollection":for(te=0;te<rt.geometries.length;te++)if(h(rt.geometries[te],Ht,ge)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function p(Ft,Ht,ge,te){var de=ge;return h(Ft,function(U,rt,gt,mt,yt){rt===0&&ge===void 0?de=U:de=Ht(de,U,rt,gt,mt,yt)},te),de}function _(Ft,Ht){var ge;switch(Ft.type){case"FeatureCollection":for(ge=0;ge<Ft.features.length&&Ht(Ft.features[ge].properties,ge)!==!1;ge++);break;case"Feature":Ht(Ft.properties,0);break}}function k(Ft,Ht,ge){var te=ge;return _(Ft,function(de,U){U===0&&ge===void 0?te=de:te=Ht(te,de,U)}),te}function M(Ft,Ht){if(Ft.type==="Feature")Ht(Ft,0);else if(Ft.type==="FeatureCollection")for(var ge=0;ge<Ft.features.length&&Ht(Ft.features[ge],ge)!==!1;ge++);}function B(Ft,Ht,ge){var te=ge;return M(Ft,function(de,U){U===0&&ge===void 0?te=de:te=Ht(te,de,U)}),te}function z(Ft){var Ht=[];return h(Ft,function(ge){Ht.push(ge)}),Ht}function Q(Ft,Ht){var ge,te,de,U,rt,gt,mt,yt,bt,$t,Ut=0,Wt=Ft.type==="FeatureCollection",le=Ft.type==="Feature",ae=Wt?Ft.features.length:1;for(ge=0;ge<ae;ge++){for(gt=Wt?Ft.features[ge].geometry:le?Ft.geometry:Ft,yt=Wt?Ft.features[ge].properties:le?Ft.properties:{},bt=Wt?Ft.features[ge].bbox:le?Ft.bbox:void 0,$t=Wt?Ft.features[ge].id:le?Ft.id:void 0,mt=gt?gt.type==="GeometryCollection":!1,rt=mt?gt.geometries.length:1,de=0;de<rt;de++){if(U=mt?gt.geometries[de]:gt,U===null){if(Ht(null,Ut,yt,bt,$t)===!1)return!1;continue}switch(U.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(Ht(U,Ut,yt,bt,$t)===!1)return!1;break}case"GeometryCollection":{for(te=0;te<U.geometries.length;te++)if(Ht(U.geometries[te],Ut,yt,bt,$t)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}Ut++}}function Nt(Ft,Ht,ge){var te=ge;return Q(Ft,function(de,U,rt,gt,mt){U===0&&ge===void 0?te=de:te=Ht(te,de,U,rt,gt,mt)}),te}function Et(Ft,Ht){Q(Ft,function(ge,te,de,U,rt){var gt=ge===null?null:ge.type;switch(gt){case null:case"Point":case"LineString":case"Polygon":return Ht(a.feature(ge,de,{bbox:U,id:rt}),te,0)===!1?!1:void 0}var mt;switch(gt){case"MultiPoint":mt="Point";break;case"MultiLineString":mt="LineString";break;case"MultiPolygon":mt="Polygon";break}for(var yt=0;yt<ge.coordinates.length;yt++){var bt=ge.coordinates[yt],$t={type:mt,coordinates:bt};if(Ht(a.feature($t,de),te,yt)===!1)return!1}})}function Jt(Ft,Ht,ge){var te=ge;return Et(Ft,function(de,U,rt){U===0&&rt===0&&ge===void 0?te=de:te=Ht(te,de,U,rt)}),te}function he(Ft,Ht){Et(Ft,function(ge,te,de){var U=0;if(ge.geometry){var rt=ge.geometry.type;if(!(rt==="Point"||rt==="MultiPoint")){var gt,mt=0,yt=0,bt=0;if(h(ge,function($t,Ut,Wt,le,ae){if(gt===void 0||te>mt||le>yt||ae>bt){gt=$t,mt=te,yt=le,bt=ae,U=0;return}var Ee=a.lineString([gt,$t],ge.properties);if(Ht(Ee,te,de,ae,U)===!1)return!1;U++,gt=$t})===!1)return!1}}})}function Pe(Ft,Ht,ge){var te=ge,de=!1;return he(Ft,function(U,rt,gt,mt,yt){de===!1&&ge===void 0?te=U:te=Ht(te,U,rt,gt,mt,yt),de=!0}),te}function Oe(Ft,Ht){if(!Ft)throw new Error("geojson is required");Et(Ft,function(ge,te,de){if(ge.geometry!==null){var U=ge.geometry.type,rt=ge.geometry.coordinates;switch(U){case"LineString":if(Ht(ge,te,de,0,0)===!1)return!1;break;case"Polygon":for(var gt=0;gt<rt.length;gt++)if(Ht(a.lineString(rt[gt],ge.properties),te,de,gt)===!1)return!1;break}}})}function Fe(Ft,Ht,ge){var te=ge;return Oe(Ft,function(de,U,rt,gt){U===0&&ge===void 0?te=de:te=Ht(te,de,U,rt,gt)}),te}function dn(Ft,Ht){if(Ht=Ht||{},!a.isObject(Ht))throw new Error("options is invalid");var ge=Ht.featureIndex||0,te=Ht.multiFeatureIndex||0,de=Ht.geometryIndex||0,U=Ht.segmentIndex||0,rt=Ht.properties,gt;switch(Ft.type){case"FeatureCollection":ge<0&&(ge=Ft.features.length+ge),rt=rt||Ft.features[ge].properties,gt=Ft.features[ge].geometry;break;case"Feature":rt=rt||Ft.properties,gt=Ft.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":gt=Ft;break;default:throw new Error("geojson is invalid")}if(gt===null)return null;var mt=gt.coordinates;switch(gt.type){case"Point":case"MultiPoint":return null;case"LineString":return U<0&&(U=mt.length+U-1),a.lineString([mt[U],mt[U+1]],rt,Ht);case"Polygon":return de<0&&(de=mt.length+de),U<0&&(U=mt[de].length+U-1),a.lineString([mt[de][U],mt[de][U+1]],rt,Ht);case"MultiLineString":return te<0&&(te=mt.length+te),U<0&&(U=mt[te].length+U-1),a.lineString([mt[te][U],mt[te][U+1]],rt,Ht);case"MultiPolygon":return te<0&&(te=mt.length+te),de<0&&(de=mt[te].length+de),U<0&&(U=mt[te][de].length-U-1),a.lineString([mt[te][de][U],mt[te][de][U+1]],rt,Ht)}throw new Error("geojson is invalid")}function Tt(Ft,Ht){if(Ht=Ht||{},!a.isObject(Ht))throw new Error("options is invalid");var ge=Ht.featureIndex||0,te=Ht.multiFeatureIndex||0,de=Ht.geometryIndex||0,U=Ht.coordIndex||0,rt=Ht.properties,gt;switch(Ft.type){case"FeatureCollection":ge<0&&(ge=Ft.features.length+ge),rt=rt||Ft.features[ge].properties,gt=Ft.features[ge].geometry;break;case"Feature":rt=rt||Ft.properties,gt=Ft.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":gt=Ft;break;default:throw new Error("geojson is invalid")}if(gt===null)return null;var mt=gt.coordinates;switch(gt.type){case"Point":return a.point(mt,rt,Ht);case"MultiPoint":return te<0&&(te=mt.length+te),a.point(mt[te],rt,Ht);case"LineString":return U<0&&(U=mt.length+U),a.point(mt[U],rt,Ht);case"Polygon":return de<0&&(de=mt.length+de),U<0&&(U=mt[de].length+U),a.point(mt[de][U],rt,Ht);case"MultiLineString":return te<0&&(te=mt.length+te),U<0&&(U=mt[te].length+U),a.point(mt[te][U],rt,Ht);case"MultiPolygon":return te<0&&(te=mt.length+te),de<0&&(de=mt[te].length+de),U<0&&(U=mt[te][de].length-U),a.point(mt[te][de][U],rt,Ht)}throw new Error("geojson is invalid")}s.coordAll=z,s.coordEach=h,s.coordReduce=p,s.featureEach=M,s.featureReduce=B,s.findPoint=Tt,s.findSegment=dn,s.flattenEach=Et,s.flattenReduce=Jt,s.geomEach=Q,s.geomReduce=Nt,s.lineEach=Oe,s.lineReduce=Fe,s.propEach=_,s.propReduce=k,s.segmentEach=he,s.segmentReduce=Pe}),Bs=c(s=>{Object.defineProperty(s,"__esModule",{value:!0});var a=Zs();function h(p){var _=[1/0,1/0,-1/0,-1/0];return a.coordEach(p,function(k){_[0]>k[0]&&(_[0]=k[0]),_[1]>k[1]&&(_[1]=k[1]),_[2]<k[0]&&(_[2]=k[0]),_[3]<k[1]&&(_[3]=k[1])}),_}h.default=h,s.default=h}),ds=c((s,a)=>{var h=In(),p=yn(),_=Zs(),k=Bs().default,M=_.featureEach;_.coordEach,p.polygon;var B=p.featureCollection;function z(Q){var Nt=new h(Q);return Nt.insert=function(Et){if(Et.type!=="Feature")throw new Error("invalid feature");return Et.bbox=Et.bbox?Et.bbox:k(Et),h.prototype.insert.call(this,Et)},Nt.load=function(Et){var Jt=[];return Array.isArray(Et)?Et.forEach(function(he){if(he.type!=="Feature")throw new Error("invalid features");he.bbox=he.bbox?he.bbox:k(he),Jt.push(he)}):M(Et,function(he){if(he.type!=="Feature")throw new Error("invalid features");he.bbox=he.bbox?he.bbox:k(he),Jt.push(he)}),h.prototype.load.call(this,Jt)},Nt.remove=function(Et,Jt){if(Et.type!=="Feature")throw new Error("invalid feature");return Et.bbox=Et.bbox?Et.bbox:k(Et),h.prototype.remove.call(this,Et,Jt)},Nt.clear=function(){return h.prototype.clear.call(this)},Nt.search=function(Et){var Jt=h.prototype.search.call(this,this.toBBox(Et));return B(Jt)},Nt.collides=function(Et){return h.prototype.collides.call(this,this.toBBox(Et))},Nt.all=function(){var Et=h.prototype.all.call(this);return B(Et)},Nt.toJSON=function(){return h.prototype.toJSON.call(this)},Nt.fromJSON=function(Et){return h.prototype.fromJSON.call(this,Et)},Nt.toBBox=function(Et){var Jt;if(Et.bbox)Jt=Et.bbox;else if(Array.isArray(Et)&&Et.length===4)Jt=Et;else if(Array.isArray(Et)&&Et.length===6)Jt=[Et[0],Et[1],Et[3],Et[4]];else if(Et.type==="Feature")Jt=k(Et);else if(Et.type==="FeatureCollection")Jt=k(Et);else throw new Error("invalid geojson");return{minX:Jt[0],minY:Jt[1],maxX:Jt[2],maxY:Jt[3]}},Nt}a.exports=z,a.exports.default=z});Array.prototype.findIndex=Array.prototype.findIndex||function(s){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof s!="function")throw new TypeError("callback must be a function");for(var a=Object(this),h=a.length>>>0,p=arguments[1],_=0;_<h;_++)if(s.call(p,a[_],_,a))return _;return-1},Array.prototype.find=Array.prototype.find||function(s){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof s!="function")throw new TypeError("callback must be a function");for(var a=Object(this),h=a.length>>>0,p=arguments[1],_=0;_<h;_++){var k=a[_];if(s.call(p,k,_,a))return k}},typeof Object.assign!="function"&&(Object.assign=function(s){if(s==null)throw new TypeError("Cannot convert undefined or null to object");s=Object(s);for(var a=1;a<arguments.length;a++){var h=arguments[a];if(h!=null)for(var p in h)Object.prototype.hasOwnProperty.call(h,p)&&(s[p]=h[p])}return s}),function(s){s.forEach(function(a){a.hasOwnProperty("remove")||Object.defineProperty(a,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(s,a){if(this==null)throw new TypeError('"this" is null or not defined');var h=Object(this),p=h.length>>>0;if(p===0)return!1;var _=a|0,k=Math.max(_>=0?_:p-Math.abs(_),0);function M(B,z){return B===z||typeof B=="number"&&typeof z=="number"&&isNaN(B)&&isNaN(z)}for(;k<p;){if(M(h[k],s))return!0;k++}return!1}});var wo={version:"2.18.3"},wn=m(As()),zn={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},Ks={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex löschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer löschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknüpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Länge",segmentLength:"Segment Länge",area:"Fläche",radius:"Radius",perimeter:"Umfang",height:"Höhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},Ii={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},Gi={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},qa={tooltips:{placeMarker:"Adaugă un punct",firstVertex:"Apasă aici pentru a adăuga primul Vertex",continueLine:"Apasă aici pentru a continua desenul",finishLine:"Apasă pe orice obiect pentru a finisa desenul",finishPoly:"Apasă pe primul obiect pentru a finisa",finishRect:"Apasă pentru a finisa",startCircle:"Apasă pentru a desena un cerc",finishCircle:"Apasă pentru a finisa un cerc",placeCircleMarker:"Adaugă un punct"},actions:{finish:"Termină",cancel:"Anulează",removeLastVertex:"Șterge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaugă o bulină",drawPolyButton:"Desenează un poligon",drawLineButton:"Desenează o linie",drawCircleButton:"Desenează un cerc",drawRectButton:"Desenează un dreptunghi",editButton:"Editează straturile",dragButton:"Mută straturile",cutButton:"Taie straturile",deleteButton:"Șterge straturile",drawCircleMarkerButton:"Desenează marcatorul cercului",snappingButton:"Fixați marcatorul glisat pe alte straturi și vârfuri",pinningButton:"Fixați vârfurile partajate împreună",rotateButton:"Rotiți stratul"}},Go={tooltips:{placeMarker:"Нажмите, чтобы нанести маркер",firstVertex:"Нажмите, чтобы нанести первый объект",continueLine:"Нажмите, чтобы продолжить рисование",finishLine:"Нажмите любой существующий маркер для завершения",finishPoly:"Выберите первую точку, чтобы закончить",finishRect:"Нажмите, чтобы закончить",startCircle:"Нажмите, чтобы добавить центр круга",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Нажмите, чтобы нанести круговой маркер"},actions:{finish:"Завершить",cancel:"Отменить",removeLastVertex:"Отменить последнее действие"},buttonTitles:{drawMarkerButton:"Добавить маркер",drawPolyButton:"Рисовать полигон",drawLineButton:"Рисовать кривую",drawCircleButton:"Рисовать круг",drawRectButton:"Рисовать прямоугольник",editButton:"Редактировать слой",dragButton:"Перенести слой",cutButton:"Вырезать слой",deleteButton:"Удалить слой",drawCircleMarkerButton:"Добавить круговой маркер",snappingButton:"Привязать перетаскиваемый маркер к другим слоям и вершинам",pinningButton:"Связать общие точки вместе",rotateButton:"Поворот слоя"}},ps={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vértice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del círculo",finishCircle:"Presiona para finalizar el círculo",placeCircleMarker:"Presiona para colocar un marcador de círculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar último vértice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polígono",drawLineButton:"Dibujar Línea",drawCircleButton:"Dibujar Círculo",drawRectButton:"Dibujar Rectángulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Círculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vértices",pinningButton:"Fijar juntos los vértices compartidos",rotateButton:"Rotar capa"}},ci={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beëindigen",finishPoly:"Klik op het eerst punt om te beëindigen",finishRect:"Klik om te beëindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beëindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},ms={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer à dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"Éditer des calques",dragButton:"Déplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"Épingler ensemble les sommets partagés",rotateButton:"Tourner des calques"}},xo={tooltips:{placeMarker:"单击放置标记",firstVertex:"单击放置首个顶点",continueLine:"单击继续绘制",finishLine:"单击任何存在的标记以完成",finishPoly:"单击第一个标记以完成",finishRect:"单击完成",startCircle:"单击放置圆心",finishCircle:"单击完成圆形",placeCircleMarker:"点击放置圆形标记"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最后的顶点"},buttonTitles:{drawMarkerButton:"绘制标记",drawPolyButton:"绘制多边形",drawLineButton:"绘制线段",drawCircleButton:"绘制圆形",drawRectButton:"绘制长方形",editButton:"编辑图层",dragButton:"拖拽图层",cutButton:"剪切图层",deleteButton:"删除图层",drawCircleMarkerButton:"画圆圈标记",snappingButton:"将拖动的标记捕捉到其他图层和顶点",pinningButton:"将共享顶点固定在一起",rotateButton:"旋转图层"}},Ts={tooltips:{placeMarker:"單擊放置標記",firstVertex:"單擊放置第一個頂點",continueLine:"單擊繼續繪製",finishLine:"單擊任何存在的標記以完成",finishPoly:"單擊第一個標記以完成",finishRect:"單擊完成",startCircle:"單擊放置圓心",finishCircle:"單擊完成圓形",placeCircleMarker:"點擊放置圓形標記"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最後一個頂點"},buttonTitles:{drawMarkerButton:"放置標記",drawPolyButton:"繪製多邊形",drawLineButton:"繪製線段",drawCircleButton:"繪製圓形",drawRectButton:"繪製方形",editButton:"編輯圖形",dragButton:"移動圖形",cutButton:"裁切圖形",deleteButton:"刪除圖形",drawCircleMarkerButton:"畫圓圈標記",snappingButton:"將拖動的標記對齊到其他圖層和頂點",pinningButton:"將共享頂點固定在一起",rotateButton:"旋轉圖形"}},ma={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vértice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do círculo",finishCircle:"Clique para finalizar o círculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover último vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},Ys={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vértice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do círculo",finishCircle:"Clique para terminar o círculo",placeCircleMarker:"Clique para colocar marcador de círculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover Último Vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},ga={tooltips:{placeMarker:"Kliknij, aby umieścić znacznik",firstVertex:"Kliknij, aby umieścić pierwszy wierzchołek",continueLine:"Kliknij, aby kontynuować rysowanie",finishLine:"Kliknij dowolny istniejący znacznik, aby zakończyć",finishPoly:"Kliknij pierwszy znacznik, aby zakończyć",finishRect:"Kliknij, aby zakończyć",startCircle:"Kliknij, aby umieścić środek okręgu",finishCircle:"Kliknij, aby zakończyć okrąg",placeCircleMarker:"Kliknij, aby umieścić znacznik okręgu",placeText:"Kliknij, aby umieścić tekst"},actions:{finish:"Zakończ",cancel:"Anuluj",removeLastVertex:"Usuń ostatni wierzchołek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokąt",drawLineButton:"Rysuj linię",drawCircleButton:"Rysuj okrąg",drawRectButton:"Rysuj prostokąt",editButton:"Edytuj warstwy",dragButton:"Przeciągnij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usuń warstwy",drawCircleMarkerButton:"Rysuj znacznik okrągły",snappingButton:"Przyciągnij przenoszony znacznik do innych warstw i wierzchołków",pinningButton:"Przypnij wspólne wierzchołki razem",rotateButton:"Obróć warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne śledzenie linii"},measurements:{totalLength:"Długość",segmentLength:"Długość odcinka",area:"Obszar",radius:"Promień",perimeter:"Obwód",height:"Wysokość",width:"Szerokość",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},Qr={tooltips:{placeMarker:"Klicka för att placera markör",firstVertex:"Klicka för att placera första hörnet",continueLine:"Klicka för att fortsätta rita",finishLine:"Klicka på en existerande punkt för att slutföra",finishPoly:"Klicka på den första punkten för att slutföra",finishRect:"Klicka för att slutföra",startCircle:"Klicka för att placera cirkelns centrum",finishCircle:"Klicka för att slutföra cirkeln",placeCircleMarker:"Klicka för att placera cirkelmarkör"},actions:{finish:"Slutför",cancel:"Avbryt",removeLastVertex:"Ta bort sista hörnet"},buttonTitles:{drawMarkerButton:"Rita Markör",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkör",snappingButton:"Snäpp dra markören till andra lager och hörn",pinningButton:"Fäst delade hörn tillsammans",rotateButton:"Rotera lagret"}},Ns={tooltips:{placeMarker:"Κάντε κλικ για να τοποθετήσετε Δείκτη",firstVertex:"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο",continueLine:"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε",finishLine:"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί",finishPoly:"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε",finishRect:"Κάντε κλικ για να τελειώσετε",startCircle:"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου",finishCircle:"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο",placeCircleMarker:"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},actions:{finish:"Τέλος",cancel:"Ακύρωση",removeLastVertex:"Κατάργηση τελευταίου σημείου"},buttonTitles:{drawMarkerButton:"Σχεδίαση Δείκτη",drawPolyButton:"Σχεδίαση Πολυγώνου",drawLineButton:"Σχεδίαση Γραμμής",drawCircleButton:"Σχεδίαση Κύκλου",drawRectButton:"Σχεδίαση Ορθογωνίου",editButton:"Επεξεργασία Επιπέδων",dragButton:"Μεταφορά Επιπέδων",cutButton:"Αποκοπή Επιπέδων",deleteButton:"Κατάργηση Επιπέδων",drawCircleMarkerButton:"Σχεδίαση Κυκλικού Δείκτη",snappingButton:"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές",pinningButton:"Περικοπή κοινών κορυφών μαζί",rotateButton:"Περιστρέψτε το στρώμα"}},Js={tooltips:{placeMarker:"Kattintson a jelölő elhelyezéséhez",firstVertex:"Kattintson az első pont elhelyezéséhez",continueLine:"Kattintson a következő pont elhelyezéséhez",finishLine:"A befejezéshez kattintson egy meglévő pontra",finishPoly:"A befejezéshez kattintson az első pontra",finishRect:"Kattintson a befejezéshez",startCircle:"Kattintson a kör középpontjának elhelyezéséhez",finishCircle:"Kattintson a kör befejezéséhez",placeCircleMarker:"Kattintson a körjelölő elhelyezéséhez"},actions:{finish:"Befejezés",cancel:"Mégse",removeLastVertex:"Utolsó pont eltávolítása"},buttonTitles:{drawMarkerButton:"Jelölő rajzolása",drawPolyButton:"Poligon rajzolása",drawLineButton:"Vonal rajzolása",drawCircleButton:"Kör rajzolása",drawRectButton:"Négyzet rajzolása",editButton:"Elemek szerkesztése",dragButton:"Elemek mozgatása",cutButton:"Elemek vágása",deleteButton:"Elemek törlése",drawCircleMarkerButton:"Kör jelölő rajzolása",snappingButton:"Kapcsolja a jelöltőt másik elemhez vagy ponthoz",pinningButton:"Közös pontok összekötése",rotateButton:"Fólia elforgatása"}},Vo={tooltips:{placeMarker:"Tryk for at placere en markør",firstVertex:"Tryk for at placere det første punkt",continueLine:"Tryk for at fortsætte linjen",finishLine:"Tryk på et eksisterende punkt for at afslutte",finishPoly:"Tryk på det første punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkør"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markør",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Træk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkør",snappingButton:"Fastgør trukket markør til andre elementer",pinningButton:"Sammenlæg delte elementer",rotateButton:"Roter laget"}},Ci={tooltips:{placeMarker:"Klikk for å plassere punkt",firstVertex:"Klikk for å plassere første punkt",continueLine:"Klikk for å tegne videre",finishLine:"Klikk på et eksisterende punkt for å fullføre",finishPoly:"Klikk første punkt for å fullføre",finishRect:"Klikk for å fullføre",startCircle:"Klikk for å sette sirkel midtpunkt",finishCircle:"Klikk for å fullføre sirkel",placeCircleMarker:"Klikk for å plassere sirkel",placeText:"Klikk for å plassere tekst"},actions:{finish:"Fullfør",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotér objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalér objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Område",radius:"Radius",perimeter:"Omriss",height:"Høyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkør"}},$a={tooltips:{placeMarker:"کلیک برای جانمایی نشان",firstVertex:"کلیک برای رسم اولین رأس",continueLine:"کلیک برای ادامه رسم",finishLine:"کلیک روی هر نشان موجود برای پایان",finishPoly:"کلیک روی اولین نشان برای پایان",finishRect:"کلیک برای پایان",startCircle:"کلیک برای رسم مرکز دایره",finishCircle:"کلیک برای پایان رسم دایره",placeCircleMarker:"کلیک برای رسم نشان دایره",placeText:"کلیک برای نوشتن متن"},actions:{finish:"پایان",cancel:"لفو",removeLastVertex:"حذف آخرین رأس"},buttonTitles:{drawMarkerButton:"درج نشان",drawPolyButton:"رسم چندضلعی",drawLineButton:"رسم خط",drawCircleButton:"رسم دایره",drawRectButton:"رسم چهارضلعی",editButton:"ویرایش لایه‌ها",dragButton:"جابجایی لایه‌ها",cutButton:"برش لایه‌ها",deleteButton:"حذف لایه‌ها",drawCircleMarkerButton:"رسم نشان دایره",snappingButton:"نشانگر را به لایه‌ها و رئوس دیگر بکشید",pinningButton:"رئوس مشترک را با هم پین کنید",rotateButton:"چرخش لایه",drawTextButton:"رسم متن",scaleButton:"مقیاس‌گذاری",autoTracingButton:"ردیاب خودکار"},measurements:{totalLength:"طول",segmentLength:"طول بخش",area:"ناحیه",radius:"شعاع",perimeter:"محیط",height:"ارتفاع",width:"عرض",coordinates:"موقعیت",coordinatesMarker:"موقعیت نشان"}},Ho={tooltips:{placeMarker:"Натисніть, щоб нанести маркер",firstVertex:"Натисніть, щоб нанести першу вершину",continueLine:"Натисніть, щоб продовжити малювати",finishLine:"Натисніть будь-який існуючий маркер для завершення",finishPoly:"Виберіть перший маркер, щоб завершити",finishRect:"Натисніть, щоб завершити",startCircle:"Натисніть, щоб додати центр кола",finishCircle:"Натисніть, щоб завершити коло",placeCircleMarker:"Натисніть, щоб нанести круговий маркер"},actions:{finish:"Завершити",cancel:"Відмінити",removeLastVertex:"Видалити попередню вершину"},buttonTitles:{drawMarkerButton:"Малювати маркер",drawPolyButton:"Малювати полігон",drawLineButton:"Малювати криву",drawCircleButton:"Малювати коло",drawRectButton:"Малювати прямокутник",editButton:"Редагувати шари",dragButton:"Перенести шари",cutButton:"Вирізати шари",deleteButton:"Видалити шари",drawCircleMarkerButton:"Малювати круговий маркер",snappingButton:"Прив’язати перетягнутий маркер до інших шарів та вершин",pinningButton:"Зв'язати спільні вершини разом",rotateButton:"Повернути шар"}},_n={tooltips:{placeMarker:"İşaretçi yerleştirmek için tıklayın",firstVertex:"İlk tepe noktasını yerleştirmek için tıklayın",continueLine:"Çizime devam etmek için tıklayın",finishLine:"Bitirmek için mevcut herhangi bir işaretçiyi tıklayın",finishPoly:"Bitirmek için ilk işaretçiyi tıklayın",finishRect:"Bitirmek için tıklayın",startCircle:"Daire merkezine yerleştirmek için tıklayın",finishCircle:"Daireyi bitirmek için tıklayın",placeCircleMarker:"Daire işaretçisi yerleştirmek için tıklayın"},actions:{finish:"Bitir",cancel:"İptal",removeLastVertex:"Son köşeyi kaldır"},buttonTitles:{drawMarkerButton:"Çizim İşaretçisi",drawPolyButton:"Çokgenler çiz",drawLineButton:"Çoklu çizgi çiz",drawCircleButton:"Çember çiz",drawRectButton:"Dikdörtgen çiz",editButton:"Katmanları düzenle",dragButton:"Katmanları sürükle",cutButton:"Katmanları kes",deleteButton:"Katmanları kaldır",drawCircleMarkerButton:"Daire işaretçisi çiz",snappingButton:"Sürüklenen işaretçiyi diğer katmanlara ve köşelere yapıştır",pinningButton:"Paylaşılan köşeleri birbirine sabitle",rotateButton:"Katmanı döndür"}},bn={tooltips:{placeMarker:"Kliknutím vytvoříte značku",firstVertex:"Kliknutím vytvoříte první objekt",continueLine:"Kliknutím pokračujte v kreslení",finishLine:"Kliknutí na libovolnou existující značku pro dokončení",finishPoly:"Vyberte první bod pro dokončení",finishRect:"Klikněte pro dokončení",startCircle:"Kliknutím přidejte střed kruhu",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Kliknutím nastavte poloměr"},actions:{finish:"Dokončit",cancel:"Zrušit",removeLastVertex:"Zrušit poslední akci"},buttonTitles:{drawMarkerButton:"Přidat značku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit křivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdélník",editButton:"Upravit vrstvu",dragButton:"Přeneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Přidat kruhovou značku",snappingButton:"Navázat tažnou značku k dalším vrstvám a vrcholům",pinningButton:"Spojit společné body dohromady",rotateButton:"Otočte vrstvu"}},Br={tooltips:{placeMarker:"クリックしてマーカーを配置",firstVertex:"クリックして最初の頂点を配置",continueLine:"クリックして描画を続ける",finishLine:"任意のマーカーをクリックして終了",finishPoly:"最初のマーカーをクリックして終了",finishRect:"クリックして終了",startCircle:"クリックして円の中心を配置",finishCircle:"クリックして円の描画を終了",placeCircleMarker:"クリックして円マーカーを配置",placeText:"クリックしてテキストを配置"},actions:{finish:"終了",cancel:"キャンセル",removeLastVertex:"最後の頂点を削除"},buttonTitles:{drawMarkerButton:"マーカーを描画",drawPolyButton:"ポリゴンを描画",drawLineButton:"折れ線を描画",drawCircleButton:"円を描画",drawRectButton:"矩形を描画",editButton:"レイヤーを編集",dragButton:"レイヤーをドラッグ",cutButton:"レイヤーを切り取り",deleteButton:"レイヤーを削除",drawCircleMarkerButton:"円マーカーを描画",snappingButton:"ドラッグしたマーカーを他のレイヤーや頂点にスナップする",pinningButton:"共有する頂点を同時に動かす",rotateButton:"レイヤーを回転",drawTextButton:"テキストを描画"}},Dn={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmäisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtämistä",finishLine:"Klikkaa olemassa olevaa merkkiä lopettaaksesi",finishPoly:"Klikkaa ensimmäistä merkkiä lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrän keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrän",placeCircleMarker:"Klikkaa asettaaksesi ympyrämerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirrä merkkejä",drawPolyButton:"Piirrä monikulmioita",drawLineButton:"Piirrä viivoja",drawCircleButton:"Piirrä ympyrä",drawRectButton:"Piirrä neliskulmioita",editButton:"Muokkaa",dragButton:"Siirrä",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirrä ympyrämerkki",snappingButton:"Kiinnitä siirrettävä merkki toisiin muotoihin",pinningButton:"Kiinnitä jaetut muodot yhteen",rotateButton:"Käännä",drawTextButton:"Piirrä tekstiä"}},_a={tooltips:{placeMarker:"마커 위치를 클릭하세요",firstVertex:"첫번째 꼭지점 위치을 클릭하세요",continueLine:"계속 그리려면 클릭하세요",finishLine:"끝내려면 기존 마커를 클릭하세요",finishPoly:"끝내려면 처음 마커를 클릭하세요",finishRect:"끝내려면 클릭하세요",startCircle:"원의 중심이 될 위치를 클릭하세요",finishCircle:"원을 끝내려면 클릭하세요",placeCircleMarker:"원 마커 위치를 클릭하세요",placeText:"텍스트 위치를 클릭하세요"},actions:{finish:"끝내기",cancel:"취소",removeLastVertex:"마지막 꼭지점 제거"},buttonTitles:{drawMarkerButton:"마커 그리기",drawPolyButton:"다각형 그리기",drawLineButton:"다각선 그리기",drawCircleButton:"원 그리기",drawRectButton:"직사각형 그리기",editButton:"레이어 편집하기",dragButton:"레이어 끌기",cutButton:"레이어 자르기",deleteButton:"레이어 제거하기",drawCircleMarkerButton:"원 마커 그리기",snappingButton:"잡아끈 마커를 다른 레이어 및 꼭지점에 들러붙게 하기",pinningButton:"공유 꼭지점을 함께 찍기",rotateButton:"레이어 회전하기",drawTextButton:"텍스트 그리기"}},Wo={tooltips:{placeMarker:"Маркерди жайгаштыруу үчүн басыңыз",firstVertex:"Биринчи чокуну жайгаштырууну үчүн басыңыз",continueLine:"Сүрөт тартууну улантуу үчүн басыңыз",finishLine:"Аяктоо үчүн учурдагы маркерди басыңыз",finishPoly:"Бүтүрүү үчүн биринчи маркерди басыңыз",finishRect:"Бүтүрүү үчүн басыңыз",startCircle:"Айлананын борборун жайгаштырууну үчүн басыңыз",finishCircle:"Айлананы бүтүрүү үчүн басыңыз",placeCircleMarker:"Тегерек маркерди жайгаштыруу үчүн басыңыз",placeText:"Текстти жайгаштыруу үчүн басыңыз"},actions:{finish:"Аягы",cancel:"Жок кылуу",removeLastVertex:"Акыркы чокуну өчүрүү"},buttonTitles:{drawMarkerButton:"Маркерди чизуу",drawPolyButton:"Полигон чизуу",drawLineButton:"Полилиния чизуу",drawCircleButton:"Дайынды чизуу",drawRectButton:"Прямоугольник чизуу",editButton:"Слоопту түзөтүү",dragButton:"Слоопту карап сүйлөү",cutButton:"Слооптун башын кесүү",deleteButton:"Слооптун өчүрүү",drawCircleMarkerButton:"Дайынды маркерди чизуу",snappingButton:"Башка слооптордун жана вертекстердин арасына чекилдөө",pinningButton:"Бөлүшкөн вертекстерди бирге тутуштуруу",rotateButton:"Слооптун өзгөртүү",drawTextButton:"Текст чизуу",scaleButton:"Слооптун өлчөмүн өзгөртүү",autoTracingButton:"Автоматтык тизмеги чизуу"},measurements:{totalLength:"Узундук",segmentLength:"Сегмент узундугу",area:"Аймак",radius:"Радиус",perimeter:"Периметр",height:"Диаметр",width:"Кенчилик",coordinates:"Координаттар",coordinatesMarker:"Маркердин координаттары"}},Xs=Ys,Tr={en:zn,de:Ks,it:Ii,id:Gi,ro:qa,ru:Go,es:ps,nl:ci,fr:ms,pt:Xs,pt_br:ma,pt_pt:Ys,zh:xo,zh_tw:Ts,pl:ga,sv:Qr,el:Ns,hu:Js,da:Vo,no:Ci,fa:$a,ua:Ho,tr:_n,cz:bn,ja:Br,fi:Dn,ko:_a,ky:Wo},Ds={_globalEditModeEnabled:!1,enableGlobalEditMode(s){let a={...s};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(h=>{this._isRelevantForEdit(h)&&h.pm.enable(a)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(s=>{s.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(s=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(s)},handleLayerAdditionInGlobalEditMode(){let s=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let a in s){let h=s[a];this._isRelevantForEdit(h)&&h.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:s}){this._addedLayersEdit[L.stamp(s)]=s},_isRelevantForEdit(s){return s.pm&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.allowEditing}},va=Ds,Lo={_globalDragModeEnabled:!1,enableGlobalDragMode(){let s=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},s.forEach(a=>{this._isRelevantForDrag(a)&&a.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let s=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,s.forEach(a=>{a.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let s=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let a in s){let h=s[a];this._isRelevantForDrag(h)&&h.pm.enableLayerDrag()}},_layerAddedDrag({layer:s}){this._addedLayersDrag[L.stamp(s)]=s},_isRelevantForDrag(s){return s.pm&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.draggable}},mi=Lo,wr={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(s=>{this._isRelevantForRemoval(s)&&(s.pm.enabled()&&s.pm.disable(),s.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(s=>{s.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(s){let a=s.target;this._isRelevantForRemoval(a)&&!a.pm.dragging()&&(a.removeFrom(this.map.pm._getContainingLayer()),a.remove(),a instanceof L.LayerGroup?(this._fireRemoveLayerGroup(a),this._fireRemoveLayerGroup(this.map,a)):(a.pm._fireRemove(a),a.pm._fireRemove(this.map,a)))},_isRelevantForRemoval(s){return s.pm&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let s=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let a in s){let h=s[a];this._isRelevantForRemoval(h)&&(h.pm.enabled()&&h.pm.disable(),h.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:s}){this._addedLayersRemoval[L.stamp(s)]=s}},Os=wr,Ga={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(s=>s instanceof L.Polyline).forEach(s=>{this._isRelevantForRotate(s)&&s.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(s=>s instanceof L.Polyline).forEach(s=>{s.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(s){return s.pm&&s instanceof L.Polyline&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let s=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let a in s){let h=s[a];this._isRelevantForRemoval(h)&&h.pm.enableRotate()}},_layerAddedRotate({layer:s}){this._addedLayersRotate[L.stamp(s)]=s}},Co=Ga,Zo=m(As()),Qs={_fireDrawStart(s="Draw",a={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},s,a)},_fireDrawEnd(s="Draw",a={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},s,a)},_fireCreate(s,a="Draw",h={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:s,layer:s},a,h)},_fireCenterPlaced(s="Draw",a={}){let h=s==="Draw"?this._layer:void 0,p=s!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:h,layer:p,latlng:this._layer.getLatLng()},s,a)},_fireCut(s,a,h,p="Draw",_={}){this.__fire(s,"pm:cut",{shape:this._shape,layer:a,originalLayer:h},p,_)},_fireEdit(s=this._layer,a="Edit",h={}){this.__fire(s,"pm:edit",{layer:this._layer,shape:this.getShape()},a,h)},_fireEnable(s="Edit",a={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},s,a)},_fireDisable(s="Edit",a={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},s,a)},_fireUpdate(s="Edit",a={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},s,a)},_fireMarkerDragStart(s,a=void 0,h="Edit",p={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:s,shape:this.getShape(),indexPath:a},h,p)},_fireMarkerDrag(s,a=void 0,h="Edit",p={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:s,shape:this.getShape(),indexPath:a},h,p)},_fireMarkerDragEnd(s,a=void 0,h=void 0,p="Edit",_={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:s,shape:this.getShape(),indexPath:a,intersectionReset:h},p,_)},_fireDragStart(s="Edit",a={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},s,a)},_fireDrag(s,a="Edit",h={}){this.__fire(this._layer,"pm:drag",{...s,shape:this.getShape()},a,h)},_fireDragEnd(s="Edit",a={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},s,a)},_fireDragEnable(s="Edit",a={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},s,a)},_fireDragDisable(s="Edit",a={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},s,a)},_fireRemove(s,a=s,h="Edit",p={}){this.__fire(s,"pm:remove",{layer:a,shape:this.getShape()},h,p)},_fireVertexAdded(s,a,h,p="Edit",_={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:s,indexPath:a,latlng:h,shape:this.getShape()},p,_)},_fireVertexRemoved(s,a,h="Edit",p={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:s,indexPath:a,shape:this.getShape()},h,p)},_fireVertexClick(s,a,h="Edit",p={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:s,indexPath:a,shape:this.getShape()},h,p)},_fireIntersect(s,a=this._layer,h="Edit",p={}){this.__fire(a,"pm:intersect",{layer:this._layer,intersection:s,shape:this.getShape()},h,p)},_fireLayerReset(s,a,h="Edit",p={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:s,indexPath:a,shape:this.getShape()},h,p)},_fireChange(s,a="Edit",h={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:s,shape:this.getShape()},a,h)},_fireTextChange(s,a="Edit",h={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:s,shape:this.getShape()},a,h)},_fireTextFocus(s="Edit",a={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},s,a)},_fireTextBlur(s="Edit",a={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},s,a)},_fireSnapDrag(s,a,h="Snapping",p={}){this.__fire(s,"pm:snapdrag",a,h,p)},_fireSnap(s,a,h="Snapping",p={}){this.__fire(s,"pm:snap",a,h,p)},_fireUnsnap(s,a,h="Snapping",p={}){this.__fire(s,"pm:unsnap",a,h,p)},_fireRotationEnable(s,a,h="Rotation",p={}){this.__fire(s,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},h,p)},_fireRotationDisable(s,a="Rotation",h={}){this.__fire(s,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},a,h)},_fireRotationStart(s,a,h="Rotation",p={}){this.__fire(s,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:a},h,p)},_fireRotation(s,a,h,p=this._rotationLayer,_="Rotation",k={}){this.__fire(s,"pm:rotate",{layer:p,helpLayer:this._layer,startAngle:this._startAngle,angle:p.pm.getAngle(),angleDiff:a,oldLatLngs:h,newLatLngs:p.getLatLngs()},_,k)},_fireRotationEnd(s,a,h,p="Rotation",_={}){this.__fire(s,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:a,angle:this._rotationLayer.pm.getAngle(),originLatLngs:h,newLatLngs:this._rotationLayer.getLatLngs()},p,_)},_fireActionClick(s,a,h,p="Toolbar",_={}){this.__fire(this._map,"pm:actionclick",{text:s.text,action:s,btnName:a,button:h},p,_)},_fireButtonClick(s,a,h="Toolbar",p={}){this.__fire(this._map,"pm:buttonclick",{btnName:s,button:a},h,p)},_fireLangChange(s,a,h,p,_="Global",k={}){this.__fire(this.map,"pm:langchange",{oldLang:s,activeLang:a,fallback:h,translations:p},_,k)},_fireGlobalDragModeToggled(s,a="Global",h={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:s,map:this.map},a,h)},_fireGlobalEditModeToggled(s,a="Global",h={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:s,map:this.map},a,h)},_fireGlobalRemovalModeToggled(s,a="Global",h={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:s,map:this.map},a,h)},_fireGlobalCutModeToggled(s="Global",a={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},s,a)},_fireGlobalDrawModeToggled(s="Global",a={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},s,a)},_fireGlobalRotateModeToggled(s="Global",a={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},s,a)},_fireRemoveLayerGroup(s,a=s,h="Edit",p={}){this.__fire(s,"pm:remove",{layer:a,shape:void 0},h,p)},_fireKeyeventEvent(s,a,h,p="Global",_={}){this.__fire(this.map,"pm:keyevent",{event:s,eventType:a,focusOn:h},p,_)},__fire(s,a,h,p,_={}){h=(0,Zo.default)(h,_,{source:p}),L.PM.Utils._fireEvent(s,a,h)}},ko=Qs,ya=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(s){this.map=s,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),s.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(s){let a="document";this.map.getContainer().contains(s.target)&&(a="map");let h={event:s,eventType:s.type,focusOn:a};this._lastEvents[s.type]=h,this._lastEvents.current=h,this.map.pm._fireKeyeventEvent(s,s.type,a)},_onBlur(s){s.altKey=!1;let a={event:s,eventType:s.type,focusOn:"document"};this._lastEvents[s.type]=a,this._lastEvents.current=a},getLastKeyEvent(s="current"){return this._lastEvents[s]},isShiftKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.shiftKey},isAltKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.altKey},isCtrlKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.ctrlKey},isMetaKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.metaKey},getPressedKey(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.key}}),Bn=ya,ba=m(br());function on(s){let a=L.PM.activeLang;return(0,ba.default)(Tr[a],s)||(0,ba.default)(Tr.en,s)||s}function Qi(s){for(let a=0;a<s.length;a+=1){let h=s[a];if(Array.isArray(h)){if(Qi(h))return!0}else if(h!=null&&h!=="")return!0}return!1}function Po(s){return s.reduce((a,h)=>{if(h.length!==0){let p=Array.isArray(h)?Po(h):h;Array.isArray(p)?p.length!==0&&a.push(p):a.push(p)}return a},[])}function to(s,a,h){let p={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:_,b:k,f:M}=p,B=s.lng,z=s.lat,Q=h,Nt=Math.PI,Et=a*Nt/180,Jt=Math.sin(Et),he=Math.cos(Et),Pe=(1-M)*Math.tan(z*Nt/180),Oe=1/Math.sqrt(1+Pe*Pe),Fe=Pe*Oe,dn=Math.atan2(Pe,he),Tt=Oe*Jt,Ft=1-Tt*Tt,Ht=Ft*(_*_-k*k)/(k*k),ge=1+Ht/16384*(4096+Ht*(-768+Ht*(320-175*Ht))),te=Ht/1024*(256+Ht*(-128+Ht*(74-47*Ht))),de=Q/(k*ge),U=2*Math.PI,rt,gt,mt;for(;Math.abs(de-U)>1e-12;){rt=Math.cos(2*dn+de),gt=Math.sin(de),mt=Math.cos(de);let Ee=te*gt*(rt+te/4*(mt*(-1+2*rt*rt)-te/6*rt*(-3+4*gt*gt)*(-3+4*rt*rt)));U=de,de=Q/(k*ge)+Ee}let yt=Fe*gt-Oe*mt*he,bt=Math.atan2(Fe*mt+Oe*gt*he,(1-M)*Math.sqrt(Tt*Tt+yt*yt)),$t=Math.atan2(gt*Jt,Oe*mt-Fe*gt*he),Ut=M/16*Ft*(4+M*(4-3*Ft)),Wt=$t-(1-Ut)*M*Tt*(de+Ut*gt*(rt+Ut*mt*(-1+2*rt*rt))),le=B+Wt*180/Nt,ae=bt*180/Nt;return L.latLng(le,ae)}function ur(s,a,h,p,_=!0){let k,M,B,z=[];for(let Q=0;Q<h;Q+=1){if(_)k=Q*360/h+p,M=to(s,k,a),B=L.latLng(M.lng,M.lat);else{let Nt=s.lat+Math.cos(2*Q*Math.PI/h)*a,Et=s.lng+Math.sin(2*Q*Math.PI/h)*a;B=L.latLng(Nt,Et)}z.push(B)}return z}function wa(s,a,h){a=(a+360)%360;let p=Math.PI/180,_=180/Math.PI,{R:k}=L.CRS.Earth,M=s.lng*p,B=s.lat*p,z=a*p,Q=Math.sin(B),Nt=Math.cos(B),Et=Math.cos(h/k),Jt=Math.sin(h/k),he=Math.asin(Q*Et+Nt*Jt*Math.cos(z)),Pe=M+Math.atan2(Math.sin(z)*Jt*Nt,Et-Q*Math.sin(he));Pe*=_;let Oe=Pe-360,Fe=Pe<-180?Pe+360:Pe;return Pe=Pe>180?Oe:Fe,L.latLng([he*_,Pe])}function gs(s,a,h){let p=s.latLngToContainerPoint(a),_=s.latLngToContainerPoint(h),k=Math.atan2(_.y-p.y,_.x-p.x)*180/Math.PI+90;return k+=k<0?360:0,k}function Ko(s,a,h,p){let _=gs(s,a,h);return wa(a,_,p)}function Yo(s,a,h="asc"){if(!a||Object.keys(a).length===0)return(z,Q)=>z-Q;let p=Object.keys(a),_,k=p.length-1,M={};for(;k>=0;)_=p[k],M[_.toLowerCase()]=a[_],k-=1;function B(z){if(z instanceof L.Marker)return"Marker";if(z instanceof L.Circle)return"Circle";if(z instanceof L.CircleMarker)return"CircleMarker";if(z instanceof L.Rectangle)return"Rectangle";if(z instanceof L.Polygon)return"Polygon";if(z instanceof L.Polyline)return"Line"}return(z,Q)=>{let Nt,Et;if(Nt=B(z.layer).toLowerCase(),Et=B(Q.layer).toLowerCase(),!Nt||!Et)return 0;let Jt=Nt in M?M[Nt]:Number.MAX_SAFE_INTEGER,he=Et in M?M[Et]:Number.MAX_SAFE_INTEGER,Pe=0;return Jt<he?Pe=-1:Jt>he&&(Pe=1),h==="desc"?Pe*-1:Pe}}function Nr(s,a=s.getLatLngs()){return s instanceof L.Polygon?L.polygon(a).getLatLngs():L.polyline(a).getLatLngs()}function Jo(s,a){var h,p,_,k;if((p=(h=a.options.crs)==null?void 0:h.projection)!=null&&p.MAX_LATITUDE){let M=(k=(_=a.options.crs)==null?void 0:_.projection)==null?void 0:k.MAX_LATITUDE;s.lat=Math.max(Math.min(M,s.lat),-M)}return s}function ki(s){return s.options.renderer||s._map&&(s._map._getPaneRenderer(s.options.pane)||s._map.options.renderer||s._map._renderer)||s._renderer}var Va=L.Class.extend({includes:[va,mi,Os,Co,ko],initialize(s){this.map=s,this.Draw=new L.PM.Draw(s),this.Toolbar=new L.PM.Toolbar(s),this.Keyboard=Bn(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(s)},setLang(s="en",a,h="en"){if(s=s.trim().toLowerCase(),!/^[a-z]{2}$/.test(s)){let _=s.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(_){let k=[`${_[1]}_${_[2]}`,`${_[1]}`];for(let M of k)if(Tr[M]){s=M;break}}}let p=L.PM.activeLang;a&&(Tr[s]=(0,wn.default)(Tr[h],a)),L.PM.activeLang=s,this.map.pm.Toolbar.reinit(),this._fireLangChange(p,s,h,Tr[s])},addControls(s){this.Toolbar.addControls(s)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(s="Polygon",a){s==="Poly"&&(s="Polygon"),this.Draw.enable(s,a)},disableDraw(s="Polygon"){s==="Poly"&&(s="Polygon"),this.Draw.disable(s)},setPathOptions(s,a={}){let h=a.ignoreShapes||[],p=a.merge||!1;this.map.pm.Draw.shapes.forEach(_=>{h.indexOf(_)===-1&&this.map.pm.Draw[_].setPathOptions(s,p)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(s){let a=(0,wn.default)(this.globalOptions,s);a.editable&&(a.resizeableCircleMarker=a.editable,delete a.editable);let h=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!a.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),h=!0);let p=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!a.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),p=!0),this.map.pm.Draw.shapes.forEach(_=>{this.map.pm.Draw[_].setOptions(a)}),h&&this.map.pm.Draw.CircleMarker.enable(),p&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(_=>{_.pm.setOptions(a)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=a,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(s=>{s.pm.enabled()&&s.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(s){return this.Draw.Cut.enable(s)},toggleGlobalCutMode(s){return this.Draw.Cut.toggle(s)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(s=!1){let a=L.PM.Utils.findLayers(this.map);if(!s)return a;let h=L.featureGroup();return h._pmTempLayer=!0,a.forEach(p=>{h.addLayer(p)}),h},getGeomanDrawLayers(s=!1){let a=L.PM.Utils.findLayers(this.map).filter(p=>p._drawnByGeoman===!0);if(!s)return a;let h=L.featureGroup();return h._pmTempLayer=!0,a.forEach(p=>{h.addLayer(p)}),h},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(s){this._touchEventCounter===0&&(L.DomEvent.on(s,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(s,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(s){this._touchEventCounter===1&&(L.DomEvent.off(s,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(s,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(s){ki(this.map)._onMouseMove(this._createMouseEvent("mousemove",s))},_canvasTouchClick(s){let a="";s.type==="touchstart"||s.type==="pointerdown"?a="mousedown":(s.type==="touchend"||s.type==="pointerup"||s.type==="touchcancel"||s.type==="pointercancel")&&(a="mouseup"),a&&ki(this.map)._onClick(this._createMouseEvent(a,s))},_createMouseEvent(s,a){let h,p=a.touches[0]||a.changedTouches[0];try{h=new MouseEvent(s,{bubbles:a.bubbles,cancelable:a.cancelable,view:a.view,detail:p.detail,screenX:p.screenX,screenY:p.screenY,clientX:p.clientX,clientY:p.clientY,ctrlKey:a.ctrlKey,altKey:a.altKey,shiftKey:a.shiftKey,metaKey:a.metaKey,button:a.button,relatedTarget:a.relatedTarget})}catch{h=document.createEvent("MouseEvents"),h.initMouseEvent(s,a.bubbles,a.cancelable,a.view,p.detail,p.screenX,p.screenY,p.clientX,p.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,a.relatedTarget)}return h}}),So=Va,Dr=L.Control.extend({includes:[ko],options:{position:"topleft",disableByOtherButtons:!0},initialize(s){this._button=L.Util.extend({},this.options,s)},onAdd(s){return this._map=s,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let s=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),s?s.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(s){return typeof s=="boolean"?this._button.toggleStatus=s:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(s){s&&s.preventDefault(),!this._button.disabled&&(this._button.onClick(s,{button:this,event:s}),this._clicked(s),this._button.afterClick(s,{button:this,event:s}))},_makeButton(s){let a=this.options.position.indexOf("right")>-1?"pos-right":"",h=L.DomUtil.create("div",`button-container  ${a}`,this._container);s.title&&h.setAttribute("title",s.title);let p=L.DomUtil.create("a","leaflet-buttons-control-button",h);p.setAttribute("role","button"),p.setAttribute("tabindex","0"),p.href="#";let _=L.DomUtil.create("div",`leaflet-pm-actions-container ${a}`,h),k=s.actions,M={cancel:{text:on("actions.cancel"),title:on("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:on("actions.finish"),title:on("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:on("actions.removeLastVertex"),title:on("actions.removeLastVertex"),onClick(){this._map.pm.Draw[s.jsClass]._removeLastVertex()}},finish:{text:on("actions.finish"),title:on("actions.finish"),onClick(z){this._map.pm.Draw[s.jsClass]._finishShape(z)}}};s._preparedActions=k.map(z=>{let Q=typeof z=="string"?z:z.name,Nt;if(M[Q])Nt=M[Q];else if(z.text)Nt=z;else return Nt;let Et=L.DomUtil.create("a",`leaflet-pm-action ${a} action-${Q}`,_);if(Et.setAttribute("role","button"),Et.setAttribute("tabindex","0"),Et.href="#",Nt.title&&(Et.title=Nt.title),Et.innerHTML=Nt.text,L.DomEvent.disableClickPropagation(Et),L.DomEvent.on(Et,"click",L.DomEvent.stop),Nt._node=Et,!s.disabled&&Nt.onClick){let Jt=he=>{he.preventDefault();let Pe="",{buttons:Oe}=this._map.pm.Toolbar;for(let Fe in Oe)if(Oe[Fe]._button===s){Pe=Fe;break}this._fireActionClick(Nt,Pe,s)};L.DomEvent.addListener(Et,"click",Jt,this),L.DomEvent.addListener(Et,"click",Nt.onClick,this),L.DomEvent.addListener(Et,"click",()=>this._updateActiveAction(s))}return Nt}),this._updateActiveAction(s),s.toggleStatus&&L.DomUtil.addClass(h,"active");let B=L.DomUtil.create("div","control-icon",p);return s.iconUrl&&B.setAttribute("src",s.iconUrl),s.className&&L.DomUtil.addClass(B,s.className),L.DomEvent.disableClickPropagation(p),L.DomEvent.on(p,"click",L.DomEvent.stop),s.disabled||(L.DomEvent.addListener(p,"click",this._onBtnClick,this),L.DomEvent.addListener(p,"click",this._triggerClick,this)),s.disabled&&(L.DomUtil.addClass(p,"pm-disabled"),p.setAttribute("aria-disabled","true")),h},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let s="",{buttons:a}=this._map.pm.Toolbar;for(let h in a)if(a[h]._button===this._button){s=h;break}this._fireButtonClick(s,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let s="pm-disabled",a=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(a,s),a.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(a,s),a.setAttribute("aria-disabled","false"))},_updateActiveAction(s){var a;(a=s._preparedActions)==null||a.forEach(h=>{h!=null&&h._node&&(h.isActive&&h.isActive.call(this)?L.DomUtil.addClass(h._node,"active-action"):L.DomUtil.removeClass(h._node,"active-action"))})}}),Xo=Dr;L.Control.PMButton=Xo;var xa=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(s){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(s)},reinit(){let s=this.isVisible;this.removeControls(),this._defineButtons(),s&&this.addControls()},init(s){this.map=s,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(s){let a=`${s}Container`;return this[a]||(this[a]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${s} leaflet-bar leaflet-control`)),this[a]},getButtons(){return this.buttons},addControls(s=this.options){typeof s.editPolygon<"u"&&(s.editMode=s.editPolygon),typeof s.deleteLayer<"u"&&(s.removalMode=s.deleteLayer),L.Util.setOptions(this,s),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let s=this.getButtons(),a={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let h in s){let p=s[h];L.Util.setOptions(p,{className:a.geomanIcons[h]})}},removeControls(){let s=this.getButtons();for(let a in s)s[a].remove();this.isVisible=!1},toggleControls(s=this.options){this.isVisible?this.removeControls():this.addControls(s)},_addButton(s,a){return this.buttons[s]=a,this.options[s]=!!this.options[s]||!1,this.buttons[s]},triggerClickOnToggledButtons(s){for(let a in this.buttons){let h=this.buttons[a];h._button.disableByOtherButtons&&h!==s&&h.toggled()&&h._triggerClick()}},toggleButton(s,a,h=!0){s==="editPolygon"&&(s="editMode"),s==="deleteLayer"&&(s="removalMode");let p=s;return h&&this.triggerClickOnToggledButtons(this.buttons[p]),this.buttons[p]?this.buttons[p].toggle(a):!1},_defineButtons(){let s={className:"control-icon leaflet-pm-icon-marker",title:on("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(Jt,he)=>{this.map.pm.Draw[he.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},a={title:on("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(Jt,he)=>{this.map.pm.Draw[he.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},h={className:"control-icon leaflet-pm-icon-polyline",title:on("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(Jt,he)=>{this.map.pm.Draw[he.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},p={title:on("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(Jt,he)=>{this.map.pm.Draw[he.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},_={title:on("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(Jt,he)=>{this.map.pm.Draw[he.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},k={title:on("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(Jt,he)=>{this.map.pm.Draw[he.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},M={title:on("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},B={title:on("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},z={title:on("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(Jt,he)=>{this.map.pm.Draw[he.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},Q={title:on("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Nt={title:on("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Et={className:"control-icon leaflet-pm-icon-text",title:on("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(Jt,he)=>{this.map.pm.Draw[he.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(s)),this._addButton("drawPolyline",new L.Control.PMButton(h)),this._addButton("drawRectangle",new L.Control.PMButton(k)),this._addButton("drawPolygon",new L.Control.PMButton(a)),this._addButton("drawCircle",new L.Control.PMButton(p)),this._addButton("drawCircleMarker",new L.Control.PMButton(_)),this._addButton("drawText",new L.Control.PMButton(Et)),this._addButton("editMode",new L.Control.PMButton(M)),this._addButton("dragMode",new L.Control.PMButton(B)),this._addButton("cutPolygon",new L.Control.PMButton(z)),this._addButton("removalMode",new L.Control.PMButton(Q)),this._addButton("rotateMode",new L.Control.PMButton(Nt))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let s=this.getButtons(),a=[];this.options.drawControls===!1&&(a=a.concat(Object.keys(s).filter(h=>!s[h]._button.tool))),this.options.editControls===!1&&(a=a.concat(Object.keys(s).filter(h=>s[h]._button.tool==="edit"))),this.options.optionsControls===!1&&(a=a.concat(Object.keys(s).filter(h=>s[h]._button.tool==="options"))),this.options.customControls===!1&&(a=a.concat(Object.keys(s).filter(h=>s[h]._button.tool==="custom")));for(let h in s)if(this.options[h]&&a.indexOf(h)===-1){let p=s[h]._button.tool;p||(p="draw"),s[h].setPosition(this._getBtnPosition(p)),s[h].addTo(this.map)}},_getBtnPosition(s){return this.options.positions&&this.options.positions[s]?this.options.positions[s]:this.options.position},setBlockPosition(s,a){this.options.positions[s]=a,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(s,a){if(a)typeof a!="object"&&(a={name:a});else throw new TypeError("Button has no name");let h=this._btnNameMapping(s);if(!a.name)throw new TypeError("Button has no name");if(this.buttons[a.name])throw new TypeError("Button with this name already exists");let p=this.map.pm.Draw.createNewDrawInstance(a.name,h);a={...this.buttons[h]._button,...a};let _=this.createCustomControl(a);return{drawInstance:p,control:_}},createCustomControl(s){if(!s.name)throw new TypeError("Button has no name");if(this.buttons[s.name])throw new TypeError("Button with this name already exists");s.onClick||(s.onClick=()=>{}),s.afterClick||(s.afterClick=()=>{}),s.toggle!==!1&&(s.toggle=!0),s.block&&(s.block=s.block.toLowerCase()),(!s.block||s.block==="draw")&&(s.block=""),s.className?s.className.indexOf("control-icon")===-1&&(s.className=`control-icon ${s.className}`):s.className="control-icon";let a={tool:s.block,className:s.className,title:s.title||"",jsClass:s.name,onClick:s.onClick,afterClick:s.afterClick,doToggle:s.toggle,toggleStatus:!1,disableOtherButtons:s.disableOtherButtons??!0,disableByOtherButtons:s.disableByOtherButtons??!0,cssToggle:s.toggle,position:this.options.position,actions:s.actions||[],disabled:!!s.disabled};this.options[s.name]!==!1&&(this.options[s.name]=!0);let h=this._addButton(s.name,new L.Control.PMButton(a));return this.changeControlOrder(),h},controlExists(s){return!!this.getButton(s)},getButton(s){return this.getButtons()[s]},getButtonsInBlock(s){let a={};if(s)for(let h in this.getButtons()){let p=this.getButtons()[h];(p._button.tool===s||s==="draw"&&!p._button.tool)&&(a[h]=p)}return a},changeControlOrder(s=[]){let a=this._shapeMapping(),h=[];s.forEach(k=>{a[k]?h.push(a[k]):h.push(k)});let p=this.getButtons(),_={};h.forEach(k=>{p[k]&&(_[k]=p[k])}),Object.keys(p).filter(k=>!p[k]._button.tool||p[k]._button.tool==="draw").forEach(k=>{h.indexOf(k)===-1&&(_[k]=p[k])}),Object.keys(p).filter(k=>p[k]._button.tool==="edit").forEach(k=>{h.indexOf(k)===-1&&(_[k]=p[k])}),Object.keys(p).filter(k=>p[k]._button.tool==="options").forEach(k=>{h.indexOf(k)===-1&&(_[k]=p[k])}),Object.keys(p).filter(k=>p[k]._button.tool==="custom").forEach(k=>{h.indexOf(k)===-1&&(_[k]=p[k])}),Object.keys(p).forEach(k=>{h.indexOf(k)===-1&&(_[k]=p[k])}),this.map.pm.Toolbar.buttons=_,this._showHideButtons()},getControlOrder(){let s=this.getButtons(),a=[];for(let h in s)a.push(h);return a},changeActionsOfControl(s,a){let h=this._btnNameMapping(s);if(!h)throw new TypeError("No name passed");if(!a)throw new TypeError("No actions passed");if(!this.buttons[h])throw new TypeError("Button with this name not exists");this.buttons[h]._button.actions=a,this.changeControlOrder()},setButtonDisabled(s,a){let h=this._btnNameMapping(s);a?this.buttons[h].disable():this.buttons[h].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(s){let a=this._shapeMapping();return a[s]?a[s]:s}}),La=xa,Qo=m(As()),eo={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(s){s.forEach(a=>{if(Array.isArray(a)){this._assignEvents(a);return}a.off("drag",this._handleSnapping,this),a.on("drag",this._handleSnapping,this),a.off("dragend",this._cleanupSnapping,this),a.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(s){if(s){let a=s.target;a._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(a=>{a.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(s){var B,z,Q;let a=s.target;if(a._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((B=s==null?void 0:s.originalEvent)==null?void 0:B.altKey)||((Q=(z=this._map)==null?void 0:z.pm)==null?void 0:Q.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let h=this._calcClosestLayer(a.getLatLng(),this._snapList);if(Object.keys(h).length===0)return!1;let p=h.layer instanceof L.Marker||h.layer instanceof L.CircleMarker||!this.options.snapSegment,_;p?_=h.latlng:_=this._checkPrioritiySnapping(h);let k=this.options.snapDistance,M={marker:a,shape:this._shape,snapLatLng:_,segment:h.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:h.layer,distance:h.distance};if(this._fireSnapDrag(M.marker,M),this._fireSnapDrag(this._layer,M),h.distance<k){a._orgLatLng=a.getLatLng(),a.setLatLng(_),a._snapped=!0,a._snapInfo=M;let Nt=()=>{this._snapLatLng=_,this._fireSnap(a,M),this._fireSnap(this._layer,M)},Et=this._snapLatLng||{},Jt=_||{};(Et.lat!==Jt.lat||Et.lng!==Jt.lng)&&Nt()}else this._snapLatLng&&(this._unsnap(M),a._snapped=!1,a._snapInfo=void 0,this._fireUnsnap(M.marker,M),this._fireUnsnap(this._layer,M));return!0},_createSnapList(){let s=[],a=[],h=this._map;h.off("layerremove",this._handleSnapLayerRemoval,this),h.on("layerremove",this._handleSnapLayerRemoval,this),h.eachLayer(p=>{if((p instanceof L.Polyline||p instanceof L.Marker||p instanceof L.CircleMarker||p instanceof L.ImageOverlay)&&p.options.snapIgnore!==!0){if(p.options.snapIgnore===void 0&&(!L.PM.optIn&&p.options.pmIgnore===!0||L.PM.optIn&&p.options.pmIgnore!==!1))return;(p instanceof L.Circle||p instanceof L.CircleMarker)&&p.pm&&p.pm._hiddenPolyCircle?s.push(p.pm._hiddenPolyCircle):p instanceof L.ImageOverlay&&(p=L.rectangle(p.getBounds())),s.push(p);let _=L.polyline([],{color:"red",pmIgnore:!0});_._pmTempLayer=!0,a.push(_),(p instanceof L.Circle||p instanceof L.CircleMarker)&&a.push(_)}}),s=s.filter(p=>this._layer!==p),s=s.filter(p=>p._latlng||p._latlngs&&Qi(p._latlngs)),s=s.filter(p=>!p._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let p=L.polyline([],{color:"red",pmIgnore:!0});p._pmTempLayer=!0,a.push(p)}),this._snapList=s.concat(this._otherSnapLayers)):this._snapList=s,this.debugIndicatorLines=a},_handleSnapLayerRemoval({layer:s}){if(!s._leaflet_id)return;let a=this._snapList.findIndex(h=>h._leaflet_id===s._leaflet_id);a>-1&&this._snapList.splice(a,1)},_calcClosestLayer(s,a){return this._calcClosestLayers(s,a,1)[0]},_calcClosestLayers(s,a,h=1){let p=[],_={};a.forEach((M,B)=>{var Q;if(M._parentCopy&&M._parentCopy===this._layer||((Q=M.getLatLngs)==null?void 0:Q.call(M).flat(5).length)<2)return;let z=this._calcLayerDistances(s,M);if(z.distance=Math.floor(z.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[B]){let Nt=L.polyline([],{color:"red",pmIgnore:!0});Nt._pmTempLayer=!0,this.debugIndicatorLines[B]=Nt}this.debugIndicatorLines[B].setLatLngs([s,z.latlng])}h===1&&(_.distance===void 0||z.distance-5<=_.distance)?(z.distance+5<_.distance&&(p=[]),_=z,_.layer=M,p.push(_)):h!==1&&(_={},_=z,_.layer=M,p.push(_))}),h!==1&&(p=p.sort((M,B)=>M.distance-B.distance)),h===-1&&(h=p.length);let k=this._getClosestLayerByPriority(p,h);return L.Util.isArray(k)?k:[k]},_calcLayerDistances(s,a){let h=this._map,p=a instanceof L.Marker||a instanceof L.CircleMarker,_=a instanceof L.Polygon,k=s;if(p){let M=a.getLatLng();return{latlng:{...M},distance:this._getDistance(h,M,k)}}return this._calcLatLngDistances(k,a.getLatLngs(),h,_)},_calcLatLngDistances(s,a,h,p=!1){let _,k,M,B=z=>{z.forEach((Q,Nt)=>{if(Array.isArray(Q)){B(Q);return}if(this.options.snapSegment){let Et=Q,Jt;p?Jt=Nt+1===z.length?0:Nt+1:Jt=Nt+1===z.length?void 0:Nt+1;let he=z[Jt];if(he){let Pe=this._getDistanceToSegment(h,s,Et,he);(k===void 0||Pe<k)&&(k=Pe,M=[Et,he])}}else{let Et=this._getDistance(h,s,Q);(k===void 0||Et<k)&&(k=Et,_=Q)}})};return B(a),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(h,s,M[0],M[1])},segment:M,distance:k}:{latlng:_,distance:k}},_getClosestLayerByPriority(s,a=1){s=s.sort((M,B)=>M._leaflet_id-B._leaflet_id);let h=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],p=this._map.pm.globalOptions.snappingOrder||[],_=0,k={};return p.concat(h).forEach(M=>{k[M]||(_+=1,k[M]=_)}),s.sort(Yo("instanceofShape",k)),a===1?s[0]||{}:s.slice(0,a)},_checkPrioritiySnapping(s){let a=this._map,h=s.segment[0],p=s.segment[1],_=s.latlng,k=_;if(this.options.snapVertex){let M=this._getDistance(a,h,_),B=this._getDistance(a,p,_),z=M<B?h:p,Q=M<B?M:B;if(this.options.snapMiddle){let Et=L.PM.Utils.calcMiddleLatLng(a,h,p),Jt=this._getDistance(a,Et,_);Jt<M&&Jt<B&&(z=Et,Q=Jt)}let Nt=this.options.snapDistance;Q<Nt&&(k=z)}return{...k}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(s,a,h,p){let _=s.getMaxZoom();_===1/0&&(_=s.getZoom());let k=s.project(a,_),M=s.project(h,_),B=s.project(p,_),z=L.LineUtil.closestPointOnSegment(k,M,B);return s.unproject(z,_)},_getDistanceToSegment(s,a,h,p){let _=s.latLngToContainerPoint(a),k=s.latLngToContainerPoint(h),M=s.latLngToContainerPoint(p);return L.LineUtil.pointToSegmentDistance(_,k,M)},_getDistance(s,a,h){return s.latLngToContainerPoint(a).distanceTo(s.latLngToContainerPoint(h))}},Eo=eo,no=L.Class.extend({includes:[Eo,ko],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(s){L.Util.setOptions(this,s),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(s){let a=new L.Icon.Default;a.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=a,this._map=s,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(h=>{this[h]=new L.PM.Draw[h](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(s,a=!1){a?this.options.pathOptions=(0,Qo.default)(this.options.pathOptions,s):this.options.pathOptions=s},getShapes(){return this.shapes},getShape(){return this._shape},enable(s,a){if(!s)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[s].enable(a)},disable(){this.shapes.forEach(s=>{this[s].disable()})},addControls(){this.shapes.forEach(s=>{this[s].addButton()})},getActiveShape(){let s;return this.shapes.forEach(a=>{this[a]._enabled&&(s=a)}),s},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let s=[];this._map.eachLayer(a=>{(a instanceof L.Polyline||a instanceof L.Marker||a instanceof L.Circle||a instanceof L.CircleMarker||a instanceof L.ImageOverlay)&&(a._pmTempLayer||s.push(a))}),this._enabled?s.forEach(a=>{L.PM.Utils.disablePopup(a)}):s.forEach(a=>{L.PM.Utils.enablePopup(a)})},createNewDrawInstance(s,a){let h=this._getShapeFromBtnName(a);if(this[s])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[h])throw new TypeError(`There is no class L.PM.Draw.${h}`);return this[s]=new L.PM.Draw[h](this._map),this[s].toolbarButtonName=s,this[s]._shape=s,this.shapes.push(s),this[a]&&this[s].setOptions(this[a].options),this[s].setOptions(this[s].options),this[s]},_getShapeFromBtnName(s){let a={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return a[s]?a[s]:this[s]?this[s]._shape:s},_finishLayer(s){s.pm&&(s.pm.setOptions(this.options),s.pm._shape=this._shape,s.pm._map=this._map),this._addDrawnLayerProp(s)},_addDrawnLayerProp(s){s._drawnByGeoman=!0},_setPane(s,a){a==="layerPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":a==="vertexPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":a==="markerPane"&&(s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),gi=no;gi.Marker=gi.extend({initialize(s){this._map=s,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(s){L.Util.setOptions(this,s),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(on("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(a=>{this.isRelevantMarker(a)&&a.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},isRelevantMarker(s){return s instanceof L.Marker&&s.pm&&!s._pmTempLayer&&!s.pm._initTextMarker},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let a=s;a.target=this._hintMarker,this._handleSnapping(a)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(s){if(!s.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._hintMarker.getLatLng(),h=new L.Marker(a,this.options.markerStyle);this._setPane(h,"markerPane"),this._finishLayer(h),h.pm||(h.options.draggable=!1),h.addTo(this._map.pm._getContainingLayer()),h.pm&&this.options.markerEditable?h.pm.enable():h.dragging&&h.dragging.disable(),this._fireCreate(h),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var s,a;(s=this.options.markerStyle)!=null&&s.icon&&((a=this._hintMarker)==null||a.setIcon(this.options.markerStyle.icon))}});var x=63710088e-1,H={centimeters:x*100,centimetres:x*100,degrees:x/111325,feet:x*3.28084,inches:x*39.37,kilometers:x/1e3,kilometres:x/1e3,meters:x,metres:x,miles:x/1609.344,millimeters:x*1e3,millimetres:x*1e3,nauticalmiles:x/1852,radians:1,yards:x*1.0936};function At(s,a,h){h===void 0&&(h={});var p={type:"Feature"};return(h.id===0||h.id)&&(p.id=h.id),h.bbox&&(p.bbox=h.bbox),p.properties=a||{},p.geometry=s,p}function qt(s,a,h){if(h===void 0&&(h={}),!s)throw new Error("coordinates is required");if(!Array.isArray(s))throw new Error("coordinates must be an Array");if(s.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!mn(s[0])||!mn(s[1]))throw new Error("coordinates must contain numbers");var p={type:"Point",coordinates:s};return At(p,a,h)}function ne(s,a,h){if(h===void 0&&(h={}),s.length<2)throw new Error("coordinates must be an array of two or more positions");var p={type:"LineString",coordinates:s};return At(p,a,h)}function ye(s,a){a===void 0&&(a={});var h={type:"FeatureCollection"};return a.id&&(h.id=a.id),a.bbox&&(h.bbox=a.bbox),h.features=s,h}function Be(s,a){a===void 0&&(a="kilometers");var h=H[a];if(!h)throw new Error(a+" units is invalid");return s*h}function Ge(s,a){a===void 0&&(a="kilometers");var h=H[a];if(!h)throw new Error(a+" units is invalid");return s/h}function Ze(s){var a=s%(2*Math.PI);return a*180/Math.PI}function rn(s){var a=s%360;return a*Math.PI/180}function mn(s){return!isNaN(s)&&s!==null&&!Array.isArray(s)}function Tn(s){var a,h,p={type:"FeatureCollection",features:[]};if(s.type==="Feature"?h=s.geometry:h=s,h.type==="LineString")a=[h.coordinates];else if(h.type==="MultiLineString")a=h.coordinates;else if(h.type==="MultiPolygon")a=[].concat.apply([],h.coordinates);else if(h.type==="Polygon")a=h.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return a.forEach(function(_){a.forEach(function(k){for(var M=0;M<_.length-1;M++)for(var B=M;B<k.length-1;B++)if(!(_===k&&(Math.abs(M-B)===1||M===0&&B===_.length-2&&_[M][0]===_[_.length-1][0]&&_[M][1]===_[_.length-1][1]))){var z=si(_[M][0],_[M][1],_[M+1][0],_[M+1][1],k[B][0],k[B][1],k[B+1][0],k[B+1][1]);z&&p.features.push(qt([z[0],z[1]]))}})}),p}function si(s,a,h,p,_,k,M,B){var z,Q,Nt,Et,Jt,he={x:null,y:null,onLine1:!1,onLine2:!1};return z=(B-k)*(h-s)-(M-_)*(p-a),z===0?he.x!==null&&he.y!==null?he:!1:(Q=a-k,Nt=s-_,Et=(M-_)*Q-(B-k)*Nt,Jt=(h-s)*Q-(p-a)*Nt,Q=Et/z,Nt=Jt/z,he.x=s+Q*(h-s),he.y=a+Q*(p-a),Q>=0&&Q<=1&&(he.onLine1=!0),Nt>=0&&Nt<=1&&(he.onLine2=!0),he.onLine1&&he.onLine2?[he.x,he.y]:!1)}gi.Line=gi.extend({initialize(s){this._map=s,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(s){L.Util.setOptions(this,s),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(on("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_syncHintLine(){let s=this._layer.getLatLngs();if(s.length>0){let a=s[s.length-1];this._hintline.setLatLngs([a,this._hintMarker.getLatLng()])}},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let h=s;h.target=this._hintMarker,this._handleSnapping(h)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let a=this._layer._defaultShape().slice();a.push(this._hintMarker.getLatLng()),this._change(a)},hasSelfIntersection(){return Tn(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(s,a){let h=L.polyline(this._layer.getLatLngs());s&&(a||(a=this._hintMarker.getLatLng()),h.addLatLng(a));let p=Tn(h.toGeoJSON(15));this._doesSelfIntersect=p.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(p,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(s){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,s.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._hintMarker.getLatLng(),h=this._layer.getLatLngs(),p=h[h.length-1];if(a.equals(h[0])||h.length>0&&a.equals(p)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:a,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(a);let _=this._createMarker(a);this._setTooltipText(),this._setHintLineAfterNewVertex(a),this._fireVertexAdded(_,void 0,a,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(s)},_setHintLineAfterNewVertex(s){this._hintline.setLatLngs([s,s])},_removeLastVertex(){let s=this._markers;if(s.length<=1){this.disable();return}let a=this._layer.getLatLngs(),h=s[s.length-1],{indexPath:p}=L.PM.Utils.findDeepMarkerIndex(s,h);s.pop(),this._layerGroup.removeLayer(h);let _=s[s.length-1],k=a.indexOf(_.getLatLng());a=a.slice(0,k+1),this._layer.setLatLngs(a),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(h,p,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let s=this._layer.getLatLngs();if(s.length<=1)return;let a=L.polyline(s,this.options.pathOptions);this._setPane(a,"layerPane"),this._finishLayer(a),a.addTo(this._map.pm._getContainingLayer()),this._fireCreate(a),this.options.snappable&&this._cleanupSnapping();let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))},_createMarker(s){let a=new L.Marker(s,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(a,"vertexPane"),a._pmTempLayer=!0,this._layerGroup.addLayer(a),this._markers.push(a),a.on("click",this._finishShape,this),a},_setTooltipText(){let{length:s}=this._layer.getLatLngs().flat(),a="";s<=1?a=on("tooltips.continueLine"):a=on("tooltips.finishLine"),this._hintMarker.setTooltipContent(a)},_change(s){this._fireChange(s,"Draw")},setStyle(){var s,a;(s=this._layer)==null||s.setStyle(this.options.templineStyle),(a=this._hintline)==null||a.setStyle(this.options.hintlineStyle)}}),gi.Polygon=gi.Line.extend({initialize(s){this._map=s,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(s){L.PM.Draw.Line.prototype.enable.call(this,s),this._layer.pm._shape="Polygon"},_createMarker(s){let a=new L.Marker(s,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(a,"vertexPane"),a._pmTempLayer=!0,this._layerGroup.addLayer(a),this._markers.push(a),this._layer.getLatLngs().flat().length===1?(a.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(a)-1,this.options.snappable&&this._cleanupSnapping()):a.on("click",()=>1),a},_setTooltipText(){let{length:s}=this._layer.getLatLngs().flat(),a="";s<=2?a=on("tooltips.continueLine"):a=on("tooltips.finishPoly"),this._hintMarker.setTooltipContent(a)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let s=this._layer.getLatLngs();if(s.length<=2)return;let a=L.polygon(s,this.options.pathOptions);this._setPane(a,"layerPane"),this._finishLayer(a),a.addTo(this._map.pm._getContainingLayer()),this._fireCreate(a),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))}}),gi.Rectangle=gi.extend({initialize(s){this._map=s,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(s){if(L.Util.setOptions(this,s),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(on("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let a=0;a<2;a+=1){let h=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(h,"vertexPane"),h._pmTempLayer=!0,this._layerGroup.addLayer(h),this._styleMarkers.push(h)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_placeStartingMarkers(s){this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(a),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(h=>{L.DomUtil.addClass(h._icon,"visible"),h.setLatLng(a)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(on("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let s=this._startMarker.getLatLng();s&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([s,s]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let h=s;h.target=this._hintMarker,this._handleSnapping(h)}let a=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(a,"Draw")},_syncRectangleSize(){let s=Jo(this._startMarker.getLatLng(),this._map),a=Jo(this._hintMarker.getLatLng(),this._map),h=L.PM.Utils._getRotatedRectangle(s,a,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(h),this.options.cursorMarker&&this._styleMarkers){let p=[];h.forEach(_=>{!_.equals(s,1e-8)&&!_.equals(a,1e-8)&&p.push(_)}),p.forEach((_,k)=>{try{this._styleMarkers[k].setLatLng(_)}catch{}})}},_findCorners(){let s=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(s[0],s[2],this.options.rectangleAngle||0,this._map)},_finishShape(s){this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._hintMarker.getLatLng(),h=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||h.equals(a))return;let p=L.rectangle([h,a],this.options.pathOptions);if(this.options.rectangleAngle){let k=L.PM.Utils._getRotatedRectangle(h,a,this.options.rectangleAngle||0,this._map);p.setLatLngs(k),p.pm&&p.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(p,"layerPane"),this._finishLayer(p),p.addTo(this._map.pm._getContainingLayer()),this._fireCreate(p);let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))},setStyle(){var s;(s=this._layer)==null||s.setStyle(this.options.pathOptions)}}),gi.CircleMarker=gi.extend({initialize(s){this._map=s,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(s){if(L.Util.setOptions(this,s),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let a={};L.extend(a,this.options.templineStyle),a.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),a),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(on("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(on("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.disable()})},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_placeCenterMarker(s){this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let a=this._hintMarker.getLatLng();this._centerMarker.setLatLng(a),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let s=this._centerMarker.getLatLng();s&&(this._layer.setLatLng(s),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(on("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let s=this._centerMarker.getLatLng(),a=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([s,a])},_syncCircleRadius(){let s=this._centerMarker.getLatLng(),a=this._hintMarker.getLatLng(),h=this._distanceCalculation(s,a);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(h)},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let h=s;h.target=this._hintMarker,this._handleSnapping(h)}this._handleHintMarkerSnapping();let a=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(a,"Draw")},isRelevantMarker(s){return s instanceof L.CircleMarker&&!(s instanceof L.Circle)&&s.pm&&!s._pmTempLayer},_createMarker(s){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!s.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._hintMarker.getLatLng(),h=new this._BaseCircleClass(a,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(h,"layerPane"),this._finishLayer(h),h.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(h),this._fireCreate(h),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(s){s.pm&&this.options.markerEditable&&s.pm.enable()},_finishShape(s){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._centerMarker.getLatLng(),h=this._defaultRadius;if(this.options[this._editableOption]){let M=this._hintMarker.getLatLng();h=this._distanceCalculation(a,M),this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?h=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(h=this.options[this._maxRadiusOption])}let p={...this.options.pathOptions,radius:h},_=new this._BaseCircleClass(a,p);this._setPane(_,"layerPane"),this._finishLayer(_),_.addTo(this._map.pm._getContainingLayer()),_.pm&&_.pm._updateHiddenPolyCircle(),this._fireCreate(_);let k=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(k))},_getNewDestinationOfHintMarker(){let s=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return s;let a=this._centerMarker.getLatLng(),h=this._distanceCalculation(a,s);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?s=Ko(this._map,a,s,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(s=Ko(this._map,a,s,this._getMaxDistanceInMeter()))}return s},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let s=this._centerMarker.getLatLng(),a=this._hintMarker.getLatLng(),h=this._distanceCalculation(s,a);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var a,h;let s={};L.extend(s,this.options.templineStyle),this.options[this._editableOption]&&(s.radius=0),(a=this._layer)==null||a.setStyle(s),(h=this._hintline)==null||h.setStyle(this.options.hintlineStyle)},_distanceCalculation(s,a){return this._map.project(s).distanceTo(this._map.project(a))}}),gi.Circle=gi.CircleMarker.extend({initialize(s){this._map=s,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(s,a){return this._map.distance(s,a)}});function Fn(s){if(!s)throw new Error("coord is required");if(!Array.isArray(s)){if(s.type==="Feature"&&s.geometry!==null&&s.geometry.type==="Point")return s.geometry.coordinates;if(s.type==="Point")return s.coordinates}if(Array.isArray(s)&&s.length>=2&&!Array.isArray(s[0])&&!Array.isArray(s[1]))return s;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Gn(s){if(Array.isArray(s))return s;if(s.type==="Feature"){if(s.geometry!==null)return s.geometry.coordinates}else if(s.coordinates)return s.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Pi(s){return s.type==="Feature"?s.geometry:s}function wi(s,a){return s.type==="FeatureCollection"?"FeatureCollection":s.type==="GeometryCollection"?"GeometryCollection":s.type==="Feature"&&s.geometry!==null?s.geometry.type:s.type}function xr(s,a,h){if(s!==null)for(var p,_,k,M,B,z,Q,Nt=0,Et=0,Jt,he=s.type,Pe=he==="FeatureCollection",Oe=he==="Feature",Fe=Pe?s.features.length:1,dn=0;dn<Fe;dn++){Q=Pe?s.features[dn].geometry:Oe?s.geometry:s,Jt=Q?Q.type==="GeometryCollection":!1,B=Jt?Q.geometries.length:1;for(var Tt=0;Tt<B;Tt++){var Ft=0,Ht=0;if(M=Jt?Q.geometries[Tt]:Q,M!==null){z=M.coordinates;var ge=M.type;switch(Nt=0,ge){case null:break;case"Point":if(a(z,Et,dn,Ft,Ht)===!1)return!1;Et++,Ft++;break;case"LineString":case"MultiPoint":for(p=0;p<z.length;p++){if(a(z[p],Et,dn,Ft,Ht)===!1)return!1;Et++,ge==="MultiPoint"&&Ft++}ge==="LineString"&&Ft++;break;case"Polygon":case"MultiLineString":for(p=0;p<z.length;p++){for(_=0;_<z[p].length-Nt;_++){if(a(z[p][_],Et,dn,Ft,Ht)===!1)return!1;Et++}ge==="MultiLineString"&&Ft++,ge==="Polygon"&&Ht++}ge==="Polygon"&&Ft++;break;case"MultiPolygon":for(p=0;p<z.length;p++){for(Ht=0,_=0;_<z[p].length;_++){for(k=0;k<z[p][_].length-Nt;k++){if(a(z[p][_][k],Et,dn,Ft,Ht)===!1)return!1;Et++}Ht++}Ft++}break;case"GeometryCollection":for(p=0;p<M.geometries.length;p++)if(xr(M.geometries[p],a)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Qn(s,a){if(s.type==="Feature")a(s,0);else if(s.type==="FeatureCollection")for(var h=0;h<s.features.length&&a(s.features[h],h)!==!1;h++);}function tr(s,a,h){var p=h;return Qn(s,function(_,k){k===0&&h===void 0?p=_:p=a(p,_,k)}),p}function Ha(s,a){var h,p,_,k,M,B,z,Q,Nt,Et,Jt=0,he=s.type==="FeatureCollection",Pe=s.type==="Feature",Oe=he?s.features.length:1;for(h=0;h<Oe;h++){for(B=he?s.features[h].geometry:Pe?s.geometry:s,Q=he?s.features[h].properties:Pe?s.properties:{},Nt=he?s.features[h].bbox:Pe?s.bbox:void 0,Et=he?s.features[h].id:Pe?s.id:void 0,z=B?B.type==="GeometryCollection":!1,M=z?B.geometries.length:1,_=0;_<M;_++){if(k=z?B.geometries[_]:B,k===null){if(a(null,Jt,Q,Nt,Et)===!1)return!1;continue}switch(k.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(a(k,Jt,Q,Nt,Et)===!1)return!1;break}case"GeometryCollection":{for(p=0;p<k.geometries.length;p++)if(a(k.geometries[p],Jt,Q,Nt,Et)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}Jt++}}function er(s,a){Ha(s,function(h,p,_,k,M){var B=h===null?null:h.type;switch(B){case null:case"Point":case"LineString":case"Polygon":return a(At(h,_,{bbox:k,id:M}),p,0)===!1?!1:void 0}var z;switch(B){case"MultiPoint":z="Point";break;case"MultiLineString":z="LineString";break;case"MultiPolygon":z="Polygon";break}for(var Q=0;Q<h.coordinates.length;Q++){var Nt=h.coordinates[Q],Et={type:z,coordinates:Nt};if(a(At(Et,_),p,Q)===!1)return!1}})}function Ca(s){if(!s)throw new Error("geojson is required");var a=[];return er(s,function(h){ts(h,a)}),ye(a)}function ts(s,a){var h=[],p=s.geometry;if(p!==null){switch(p.type){case"Polygon":h=Gn(p);break;case"LineString":h=[Gn(p)]}h.forEach(function(_){var k=ka(_,s.properties);k.forEach(function(M){M.id=a.length,a.push(M)})})}}function ka(s,a){var h=[];return s.reduce(function(p,_){var k=ne([p,_],a);return k.bbox=Is(p,_),h.push(k),_}),h}function Is(s,a){var h=s[0],p=s[1],_=a[0],k=a[1],M=h<_?h:_,B=p<k?p:k,z=h>_?h:_,Q=p>k?p:k;return[M,B,z,Q]}var Rs=Ca,xi=m(ds(),1);function ta(s,a){var h={},p=[];if(s.type==="LineString"&&(s=At(s)),a.type==="LineString"&&(a=At(a)),s.type==="Feature"&&a.type==="Feature"&&s.geometry!==null&&a.geometry!==null&&s.geometry.type==="LineString"&&a.geometry.type==="LineString"&&s.geometry.coordinates.length===2&&a.geometry.coordinates.length===2){var _=cr(s,a);return _&&p.push(_),ye(p)}var k=(0,xi.default)();return k.load(Rs(a)),Qn(Rs(s),function(M){Qn(k.search(M),function(B){var z=cr(M,B);if(z){var Q=Gn(z).join(",");h[Q]||(h[Q]=!0,p.push(z))}})}),ye(p)}function cr(s,a){var h=Gn(s),p=Gn(a);if(h.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(p.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var _=h[0][0],k=h[0][1],M=h[1][0],B=h[1][1],z=p[0][0],Q=p[0][1],Nt=p[1][0],Et=p[1][1],Jt=(Et-Q)*(M-_)-(Nt-z)*(B-k),he=(Nt-z)*(k-Q)-(Et-Q)*(_-z),Pe=(M-_)*(k-Q)-(B-k)*(_-z);if(Jt===0)return null;var Oe=he/Jt,Fe=Pe/Jt;if(Oe>=0&&Oe<=1&&Fe>=0&&Fe<=1){var dn=_+Oe*(M-_),Tt=k+Oe*(B-k);return qt([dn,Tt])}return null}var nr=ta,ea=m(ds(),1);function Vi(s,a,h){h===void 0&&(h={});var p=Fn(s),_=Fn(a),k=rn(_[1]-p[1]),M=rn(_[0]-p[0]),B=rn(p[1]),z=rn(_[1]),Q=Math.pow(Math.sin(k/2),2)+Math.pow(Math.sin(M/2),2)*Math.cos(B)*Math.cos(z);return Be(2*Math.atan2(Math.sqrt(Q),Math.sqrt(1-Q)),h.units)}var Fs=Vi;function Lr(s){var a=s[0],h=s[1],p=s[2],_=s[3],k=Fs(s.slice(0,2),[p,h]),M=Fs(s.slice(0,2),[a,_]);if(k>=M){var B=(h+_)/2;return[a,B-(p-a)/2,p,B+(p-a)/2]}else{var z=(a+p)/2;return[z-(_-h)/2,h,z+(_-h)/2,_]}}var Wa=Lr;function Si(s){var a=[1/0,1/0,-1/0,-1/0];return xr(s,function(h){a[0]>h[0]&&(a[0]=h[0]),a[1]>h[1]&&(a[1]=h[1]),a[2]<h[0]&&(a[2]=h[0]),a[3]<h[1]&&(a[3]=h[1])}),a}Si.default=Si;var _s=Si;function Or(s,a){a===void 0&&(a={});var h=a.precision,p=a.coordinates,_=a.mutate;if(h=h==null||isNaN(h)?6:h,p=p==null||isNaN(p)?3:p,!s)throw new Error("<geojson> is required");if(typeof h!="number")throw new Error("<precision> must be a number");if(typeof p!="number")throw new Error("<coordinates> must be a number");(_===!1||_===void 0)&&(s=JSON.parse(JSON.stringify(s)));var k=Math.pow(10,h);return xr(s,function(M){Mo(M,k,p)}),s}function Mo(s,a,h){s.length>h&&s.splice(h,s.length);for(var p=0;p<s.length;p++)s[p]=Math.round(s[p]*a)/a;return s}var js=Or;function vs(s,a,h){if(h===void 0&&(h={}),h.final===!0)return Ri(s,a);var p=Fn(s),_=Fn(a),k=rn(p[0]),M=rn(_[0]),B=rn(p[1]),z=rn(_[1]),Q=Math.sin(M-k)*Math.cos(z),Nt=Math.cos(B)*Math.sin(z)-Math.sin(B)*Math.cos(z)*Math.cos(M-k);return Ze(Math.atan2(Q,Nt))}function Ri(s,a){var h=vs(a,s);return h=(h+180)%360,h}function Ti(s,a,h,p){p===void 0&&(p={});var _=Fn(s),k=rn(_[0]),M=rn(_[1]),B=rn(h),z=Ge(a,p.units),Q=Math.asin(Math.sin(M)*Math.cos(z)+Math.cos(M)*Math.sin(z)*Math.cos(B)),Nt=k+Math.atan2(Math.sin(B)*Math.sin(z)*Math.cos(M),Math.cos(z)-Math.sin(M)*Math.sin(Q)),Et=Ze(Nt),Jt=Ze(Q);return qt([Et,Jt],p.properties)}function es(s,a,h){h===void 0&&(h={});var p=qt([1/0,1/0],{dist:1/0}),_=0;return er(s,function(k){for(var M=Gn(k),B=0;B<M.length-1;B++){var z=qt(M[B]);z.properties.dist=Fs(a,z,h);var Q=qt(M[B+1]);Q.properties.dist=Fs(a,Q,h);var Nt=Fs(z,Q,h),Et=Math.max(z.properties.dist,Q.properties.dist),Jt=vs(z,Q),he=Ti(a,Et,Jt+90,h),Pe=Ti(a,Et,Jt-90,h),Oe=nr(ne([he.geometry.coordinates,Pe.geometry.coordinates]),ne([z.geometry.coordinates,Q.geometry.coordinates])),Fe=null;Oe.features.length>0&&(Fe=Oe.features[0],Fe.properties.dist=Fs(a,Fe,h),Fe.properties.location=_+Fs(z,Fe,h)),z.properties.dist<p.properties.dist&&(p=z,p.properties.index=B,p.properties.location=_),Q.properties.dist<p.properties.dist&&(p=Q,p.properties.index=B+1,p.properties.location=_+Nt),Fe&&Fe.properties.dist<p.properties.dist&&(p=Fe,p.properties.index=B),_+=Nt}}),p}var hr=es;function Ir(s,a){if(!s)throw new Error("line is required");if(!a)throw new Error("splitter is required");var h=wi(s),p=wi(a);if(h!=="LineString")throw new Error("line must be LineString");if(p==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(p==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var _=js(a,{precision:7});switch(p){case"Point":return Rr(s,_);case"MultiPoint":return zs(s,_);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return zs(s,nr(s,_))}}function zs(s,a){var h=[],p=(0,ea.default)();return er(a,function(_){if(h.forEach(function(B,z){B.id=z}),!h.length)h=Rr(s,_).features,h.forEach(function(B){B.bbox||(B.bbox=Wa(_s(B)))}),p.load(ye(h));else{var k=p.search(_);if(k.features.length){var M=hi(_,k);h=h.filter(function(B){return B.id!==M.id}),p.remove(M),Qn(Rr(M,_),function(B){h.push(B),p.insert(B)})}}}),ye(h)}function Rr(s,a){var h=[],p=Gn(s)[0],_=Gn(s)[s.geometry.coordinates.length-1];if(ys(p,Fn(a))||ys(_,Fn(a)))return ye([s]);var k=(0,ea.default)(),M=Rs(s);k.load(M);var B=k.search(a);if(!B.features.length)return ye([s]);var z=hi(a,B),Q=[p],Nt=tr(M,function(Et,Jt,he){var Pe=Gn(Jt)[1],Oe=Fn(a);return he===z.id?(Et.push(Oe),h.push(ne(Et)),ys(Oe,Pe)?[Oe]:[Oe,Pe]):(Et.push(Pe),Et)},Q);return Nt.length>1&&h.push(ne(Nt)),ye(h)}function hi(s,a){if(!a.features.length)throw new Error("lines must contain features");if(a.features.length===1)return a.features[0];var h,p=1/0;return Qn(a,function(_){var k=hr(_,s),M=k.properties.dist;M<p&&(h=_,p=M)}),h}function ys(s,a){return s[0]===a[0]&&s[1]===a[1]}var ir=Ir;function Hi(s,a,h){if(h===void 0&&(h={}),!s)throw new Error("point is required");if(!a)throw new Error("polygon is required");var p=Fn(s),_=Pi(a),k=_.type,M=a.bbox,B=_.coordinates;if(M&&Pa(p,M)===!1)return!1;k==="Polygon"&&(B=[B]);for(var z=!1,Q=0;Q<B.length&&!z;Q++)if(Ao(p,B[Q][0],h.ignoreBoundary)){for(var Nt=!1,Et=1;Et<B[Q].length&&!Nt;)Ao(p,B[Q][Et],!h.ignoreBoundary)&&(Nt=!0),Et++;Nt||(z=!0)}return z}function Ao(s,a,h){var p=!1;a[0][0]===a[a.length-1][0]&&a[0][1]===a[a.length-1][1]&&(a=a.slice(0,a.length-1));for(var _=0,k=a.length-1;_<a.length;k=_++){var M=a[_][0],B=a[_][1],z=a[k][0],Q=a[k][1],Nt=s[1]*(M-z)+B*(z-s[0])+Q*(s[0]-M)===0&&(M-s[0])*(z-s[0])<=0&&(B-s[1])*(Q-s[1])<=0;if(Nt)return!h;var Et=B>s[1]!=Q>s[1]&&s[0]<(z-M)*(s[1]-B)/(Q-B)+M;Et&&(p=!p)}return p}function Pa(s,a){return a[0]<=s[0]&&a[1]<=s[1]&&a[2]>=s[0]&&a[3]>=s[1]}function Sa(s,a,h){h===void 0&&(h={});for(var p=Fn(s),_=Gn(a),k=0;k<_.length-1;k++){var M=!1;if(h.ignoreEndVertices&&(k===0&&(M="start"),k===_.length-2&&(M="end"),k===0&&k+1===_.length-1&&(M="both")),Wi(_[k],_[k+1],p,M,typeof h.epsilon>"u"?null:h.epsilon))return!0}return!1}function Wi(s,a,h,p,_){var k=h[0],M=h[1],B=s[0],z=s[1],Q=a[0],Nt=a[1],Et=h[0]-B,Jt=h[1]-z,he=Q-B,Pe=Nt-z,Oe=Et*Pe-Jt*he;if(_!==null){if(Math.abs(Oe)>_)return!1}else if(Oe!==0)return!1;if(p){if(p==="start")return Math.abs(he)>=Math.abs(Pe)?he>0?B<k&&k<=Q:Q<=k&&k<B:Pe>0?z<M&&M<=Nt:Nt<=M&&M<z;if(p==="end")return Math.abs(he)>=Math.abs(Pe)?he>0?B<=k&&k<Q:Q<k&&k<=B:Pe>0?z<=M&&M<Nt:Nt<M&&M<=z;if(p==="both")return Math.abs(he)>=Math.abs(Pe)?he>0?B<k&&k<Q:Q<k&&k<B:Pe>0?z<M&&M<Nt:Nt<M&&M<z}else return Math.abs(he)>=Math.abs(Pe)?he>0?B<=k&&k<=Q:Q<=k&&k<=B:Pe>0?z<=M&&M<=Nt:Nt<=M&&M<=z;return!1}var fr=Sa;function io(s,a){var h=Pi(s),p=Pi(a),_=h.type,k=p.type,M=h.coordinates,B=p.coordinates;switch(_){case"Point":switch(k){case"Point":return Vn(M,B);default:throw new Error("feature2 "+k+" geometry not supported")}case"MultiPoint":switch(k){case"Point":return bs(h,p);case"MultiPoint":return na(h,p);default:throw new Error("feature2 "+k+" geometry not supported")}case"LineString":switch(k){case"Point":return fr(p,h,{ignoreEndVertices:!0});case"LineString":return Us(h,p);case"MultiPoint":return ro(h,p);default:throw new Error("feature2 "+k+" geometry not supported")}case"Polygon":switch(k){case"Point":return Hi(p,h,{ignoreBoundary:!0});case"LineString":return Fr(h,p);case"Polygon":return Fi(h,p);case"MultiPoint":return so(h,p);default:throw new Error("feature2 "+k+" geometry not supported")}default:throw new Error("feature1 "+_+" geometry not supported")}}function bs(s,a){var h,p=!1;for(h=0;h<s.coordinates.length;h++)if(Vn(s.coordinates[h],a.coordinates)){p=!0;break}return p}function na(s,a){for(var h=0,p=a.coordinates;h<p.length;h++){for(var _=p[h],k=!1,M=0,B=s.coordinates;M<B.length;M++){var z=B[M];if(Vn(_,z)){k=!0;break}}if(!k)return!1}return!0}function ro(s,a){for(var h=!1,p=0,_=a.coordinates;p<_.length;p++){var k=_[p];if(fr(k,s,{ignoreEndVertices:!0})&&(h=!0),!fr(k,s))return!1}return!!h}function so(s,a){for(var h=0,p=a.coordinates;h<p.length;h++){var _=p[h];if(!Hi(_,s,{ignoreBoundary:!0}))return!1}return!0}function Us(s,a){for(var h=!1,p=0,_=a.coordinates;p<_.length;p++){var k=_[p];if(fr({type:"Point",coordinates:k},s,{ignoreEndVertices:!0})&&(h=!0),!fr({type:"Point",coordinates:k},s,{ignoreEndVertices:!1}))return!1}return h}function Fr(s,a){var h=!1,p=0,_=_s(s),k=_s(a);if(!Zn(_,k))return!1;for(p;p<a.coordinates.length-1;p++){var M=_i(a.coordinates[p],a.coordinates[p+1]);if(Hi({type:"Point",coordinates:M},s,{ignoreBoundary:!0})){h=!0;break}}return h}function Fi(s,a){if(s.type==="Feature"&&s.geometry===null||a.type==="Feature"&&a.geometry===null)return!1;var h=_s(s),p=_s(a);if(!Zn(h,p))return!1;for(var _=Pi(a).coordinates,k=0,M=_;k<M.length;k++)for(var B=M[k],z=0,Q=B;z<Q.length;z++){var Nt=Q[z];if(!Hi(Nt,s))return!1}return!0}function Zn(s,a){return!(s[0]>a[0]||s[2]<a[2]||s[1]>a[1]||s[3]<a[3])}function Vn(s,a){return s[0]===a[0]&&s[1]===a[1]}function _i(s,a){return[(s[0]+a[0])/2,(s[1]+a[1])/2]}var ti=m(br()),ns=s=>()=>s,oo=s=>{let a=s?(h,p)=>p.minus(h).abs().isLessThanOrEqualTo(s):ns(!1);return(h,p)=>a(h,p)?0:h.comparedTo(p)};function ws(s){let a=s?(h,p,_,k,M)=>h.exponentiatedBy(2).isLessThanOrEqualTo(k.minus(p).exponentiatedBy(2).plus(M.minus(_).exponentiatedBy(2)).times(s)):ns(!1);return(h,p,_)=>{let k=h.x,M=h.y,B=_.x,z=_.y,Q=M.minus(z).times(p.x.minus(B)).minus(k.minus(B).times(p.y.minus(z)));return a(Q,k,M,B,z)?0:Q.comparedTo(0)}}var Za=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,ao=Math.ceil,Ei=Math.floor,ei="[BigNumber Error] ",dr=ei+"Number primitive has more than 15 significant digits: ",pr=1e14,fn=14,Ka=9007199254740991,Bo=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],jr=1e7,Zi=1e9;function bl(s){var a,h,p,_=Tt.prototype={constructor:Tt,toString:null,valueOf:null},k=new Tt(1),M=20,B=4,z=-7,Q=21,Nt=-1e7,Et=1e7,Jt=!1,he=1,Pe=0,Oe={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},Fe="0123456789abcdefghijklmnopqrstuvwxyz",dn=!0;function Tt(U,rt){var gt,mt,yt,bt,$t,Ut,Wt,le,ae=this;if(!(ae instanceof Tt))return new Tt(U,rt);if(rt==null){if(U&&U._isBigNumber===!0){ae.s=U.s,!U.c||U.e>Et?ae.c=ae.e=null:U.e<Nt?ae.c=[ae.e=0]:(ae.e=U.e,ae.c=U.c.slice());return}if((Ut=typeof U=="number")&&U*0==0){if(ae.s=1/U<0?(U=-U,-1):1,U===~~U){for(bt=0,$t=U;$t>=10;$t/=10,bt++);bt>Et?ae.c=ae.e=null:(ae.e=bt,ae.c=[U]);return}le=String(U)}else{if(!Za.test(le=String(U)))return p(ae,le,Ut);ae.s=le.charCodeAt(0)==45?(le=le.slice(1),-1):1}(bt=le.indexOf("."))>-1&&(le=le.replace(".","")),($t=le.search(/e/i))>0?(bt<0&&(bt=$t),bt+=+le.slice($t+1),le=le.substring(0,$t)):bt<0&&(bt=le.length)}else{if(i(rt,2,Fe.length,"Base"),rt==10&&dn)return ae=new Tt(U),te(ae,M+ae.e+1,B);if(le=String(U),Ut=typeof U=="number"){if(U*0!=0)return p(ae,le,Ut,rt);if(ae.s=1/U<0?(le=le.slice(1),-1):1,Tt.DEBUG&&le.replace(/^0\.0*|\./,"").length>15)throw Error(dr+U)}else ae.s=le.charCodeAt(0)===45?(le=le.slice(1),-1):1;for(gt=Fe.slice(0,rt),bt=$t=0,Wt=le.length;$t<Wt;$t++)if(gt.indexOf(mt=le.charAt($t))<0){if(mt=="."){if($t>bt){bt=Wt;continue}}else if(!yt&&(le==le.toUpperCase()&&(le=le.toLowerCase())||le==le.toLowerCase()&&(le=le.toUpperCase()))){yt=!0,$t=-1,bt=0;continue}return p(ae,String(U),Ut,rt)}Ut=!1,le=h(le,rt,10,ae.s),(bt=le.indexOf("."))>-1?le=le.replace(".",""):bt=le.length}for($t=0;le.charCodeAt($t)===48;$t++);for(Wt=le.length;le.charCodeAt(--Wt)===48;);if(le=le.slice($t,++Wt)){if(Wt-=$t,Ut&&Tt.DEBUG&&Wt>15&&(U>Ka||U!==Ei(U)))throw Error(dr+ae.s*U);if((bt=bt-$t-1)>Et)ae.c=ae.e=null;else if(bt<Nt)ae.c=[ae.e=0];else{if(ae.e=bt,ae.c=[],$t=(bt+1)%fn,bt<0&&($t+=fn),$t<Wt){for($t&&ae.c.push(+le.slice(0,$t)),Wt-=fn;$t<Wt;)ae.c.push(+le.slice($t,$t+=fn));$t=fn-(le=le.slice($t)).length}else $t-=Wt;for(;$t--;le+="0");ae.c.push(+le)}}else ae.c=[ae.e=0]}Tt.clone=bl,Tt.ROUND_UP=0,Tt.ROUND_DOWN=1,Tt.ROUND_CEIL=2,Tt.ROUND_FLOOR=3,Tt.ROUND_HALF_UP=4,Tt.ROUND_HALF_DOWN=5,Tt.ROUND_HALF_EVEN=6,Tt.ROUND_HALF_CEIL=7,Tt.ROUND_HALF_FLOOR=8,Tt.EUCLID=9,Tt.config=Tt.set=function(U){var rt,gt;if(U!=null)if(typeof U=="object"){if(U.hasOwnProperty(rt="DECIMAL_PLACES")&&(gt=U[rt],i(gt,0,Zi,rt),M=gt),U.hasOwnProperty(rt="ROUNDING_MODE")&&(gt=U[rt],i(gt,0,8,rt),B=gt),U.hasOwnProperty(rt="EXPONENTIAL_AT")&&(gt=U[rt],gt&&gt.pop?(i(gt[0],-1e9,0,rt),i(gt[1],0,Zi,rt),z=gt[0],Q=gt[1]):(i(gt,-1e9,Zi,rt),z=-(Q=gt<0?-gt:gt))),U.hasOwnProperty(rt="RANGE"))if(gt=U[rt],gt&&gt.pop)i(gt[0],-1e9,-1,rt),i(gt[1],1,Zi,rt),Nt=gt[0],Et=gt[1];else if(i(gt,-1e9,Zi,rt),gt)Nt=-(Et=gt<0?-gt:gt);else throw Error(ei+rt+" cannot be zero: "+gt);if(U.hasOwnProperty(rt="CRYPTO"))if(gt=U[rt],gt===!!gt)if(gt)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))Jt=gt;else throw Jt=!gt,Error(ei+"crypto unavailable");else Jt=gt;else throw Error(ei+rt+" not true or false: "+gt);if(U.hasOwnProperty(rt="MODULO_MODE")&&(gt=U[rt],i(gt,0,9,rt),he=gt),U.hasOwnProperty(rt="POW_PRECISION")&&(gt=U[rt],i(gt,0,Zi,rt),Pe=gt),U.hasOwnProperty(rt="FORMAT"))if(gt=U[rt],typeof gt=="object")Oe=gt;else throw Error(ei+rt+" not an object: "+gt);if(U.hasOwnProperty(rt="ALPHABET"))if(gt=U[rt],typeof gt=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(gt))dn=gt.slice(0,10)=="0123456789",Fe=gt;else throw Error(ei+rt+" invalid: "+gt)}else throw Error(ei+"Object expected: "+U);return{DECIMAL_PLACES:M,ROUNDING_MODE:B,EXPONENTIAL_AT:[z,Q],RANGE:[Nt,Et],CRYPTO:Jt,MODULO_MODE:he,POW_PRECISION:Pe,FORMAT:Oe,ALPHABET:Fe}},Tt.isBigNumber=function(U){if(!U||U._isBigNumber!==!0)return!1;if(!Tt.DEBUG)return!0;var rt,gt,mt=U.c,yt=U.e,bt=U.s;t:if({}.toString.call(mt)=="[object Array]"){if((bt===1||bt===-1)&&yt>=-1e9&&yt<=Zi&&yt===Ei(yt)){if(mt[0]===0){if(yt===0&&mt.length===1)return!0;break t}if(rt=(yt+1)%fn,rt<1&&(rt+=fn),String(mt[0]).length==rt){for(rt=0;rt<mt.length;rt++)if(gt=mt[rt],gt<0||gt>=pr||gt!==Ei(gt))break t;if(gt!==0)return!0}}}else if(mt===null&&yt===null&&(bt===null||bt===1||bt===-1))return!0;throw Error(ei+"Invalid BigNumber: "+U)},Tt.maximum=Tt.max=function(){return Ht(arguments,-1)},Tt.minimum=Tt.min=function(){return Ht(arguments,1)},Tt.random=function(){var U=9007199254740992,rt=Math.random()*U&2097151?function(){return Ei(Math.random()*U)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(gt){var mt,yt,bt,$t,Ut,Wt=0,le=[],ae=new Tt(k);if(gt==null?gt=M:i(gt,0,Zi),$t=ao(gt/fn),Jt)if(crypto.getRandomValues){for(mt=crypto.getRandomValues(new Uint32Array($t*=2));Wt<$t;)Ut=mt[Wt]*131072+(mt[Wt+1]>>>11),Ut>=9e15?(yt=crypto.getRandomValues(new Uint32Array(2)),mt[Wt]=yt[0],mt[Wt+1]=yt[1]):(le.push(Ut%1e14),Wt+=2);Wt=$t/2}else if(crypto.randomBytes){for(mt=crypto.randomBytes($t*=7);Wt<$t;)Ut=(mt[Wt]&31)*281474976710656+mt[Wt+1]*1099511627776+mt[Wt+2]*4294967296+mt[Wt+3]*16777216+(mt[Wt+4]<<16)+(mt[Wt+5]<<8)+mt[Wt+6],Ut>=9e15?crypto.randomBytes(7).copy(mt,Wt):(le.push(Ut%1e14),Wt+=7);Wt=$t/7}else throw Jt=!1,Error(ei+"crypto unavailable");if(!Jt)for(;Wt<$t;)Ut=rt(),Ut<9e15&&(le[Wt++]=Ut%1e14);for($t=le[--Wt],gt%=fn,$t&&gt&&(Ut=Bo[fn-gt],le[Wt]=Ei($t/Ut)*Ut);le[Wt]===0;le.pop(),Wt--);if(Wt<0)le=[bt=0];else{for(bt=-1;le[0]===0;le.splice(0,1),bt-=fn);for(Wt=1,Ut=le[0];Ut>=10;Ut/=10,Wt++);Wt<fn&&(bt-=fn-Wt)}return ae.e=bt,ae.c=le,ae}}(),Tt.sum=function(){for(var U=1,rt=arguments,gt=new Tt(rt[0]);U<rt.length;)gt=gt.plus(rt[U++]);return gt},h=function(){var U="0123456789";function rt(gt,mt,yt,bt){for(var $t,Ut=[0],Wt,le=0,ae=gt.length;le<ae;){for(Wt=Ut.length;Wt--;Ut[Wt]*=mt);for(Ut[0]+=bt.indexOf(gt.charAt(le++)),$t=0;$t<Ut.length;$t++)Ut[$t]>yt-1&&(Ut[$t+1]==null&&(Ut[$t+1]=0),Ut[$t+1]+=Ut[$t]/yt|0,Ut[$t]%=yt)}return Ut.reverse()}return function(gt,mt,yt,bt,$t){var Ut,Wt,le,ae,Ee,We,Qe,nn,Un=gt.indexOf("."),Hn=M,On=B;for(Un>=0&&(ae=Pe,Pe=0,gt=gt.replace(".",""),nn=new Tt(mt),We=nn.pow(gt.length-Un),Pe=ae,nn.c=rt(P(sr(We.c),We.e,"0"),10,yt,U),nn.e=nn.c.length),Qe=rt(gt,mt,yt,$t?(Ut=Fe,U):(Ut=U,Fe)),le=ae=Qe.length;Qe[--ae]==0;Qe.pop());if(!Qe[0])return Ut.charAt(0);if(Un<0?--le:(We.c=Qe,We.e=le,We.s=bt,We=a(We,nn,Hn,On,yt),Qe=We.c,Ee=We.r,le=We.e),Wt=le+Hn+1,Un=Qe[Wt],ae=yt/2,Ee=Ee||Wt<0||Qe[Wt+1]!=null,Ee=On<4?(Un!=null||Ee)&&(On==0||On==(We.s<0?3:2)):Un>ae||Un==ae&&(On==4||Ee||On==6&&Qe[Wt-1]&1||On==(We.s<0?8:7)),Wt<1||!Qe[0])gt=Ee?P(Ut.charAt(1),-Hn,Ut.charAt(0)):Ut.charAt(0);else{if(Qe.length=Wt,Ee)for(--yt;++Qe[--Wt]>yt;)Qe[Wt]=0,Wt||(++le,Qe=[1].concat(Qe));for(ae=Qe.length;!Qe[--ae];);for(Un=0,gt="";Un<=ae;gt+=Ut.charAt(Qe[Un++]));gt=P(gt,le,Ut.charAt(0))}return gt}}(),a=function(){function U(mt,yt,bt){var $t,Ut,Wt,le,ae=0,Ee=mt.length,We=yt%jr,Qe=yt/jr|0;for(mt=mt.slice();Ee--;)Wt=mt[Ee]%jr,le=mt[Ee]/jr|0,$t=Qe*Wt+le*We,Ut=We*Wt+$t%jr*jr+ae,ae=(Ut/bt|0)+($t/jr|0)+Qe*le,mt[Ee]=Ut%bt;return ae&&(mt=[ae].concat(mt)),mt}function rt(mt,yt,bt,$t){var Ut,Wt;if(bt!=$t)Wt=bt>$t?1:-1;else for(Ut=Wt=0;Ut<bt;Ut++)if(mt[Ut]!=yt[Ut]){Wt=mt[Ut]>yt[Ut]?1:-1;break}return Wt}function gt(mt,yt,bt,$t){for(var Ut=0;bt--;)mt[bt]-=Ut,Ut=mt[bt]<yt[bt]?1:0,mt[bt]=Ut*$t+mt[bt]-yt[bt];for(;!mt[0]&&mt.length>1;mt.splice(0,1));}return function(mt,yt,bt,$t,Ut){var Wt,le,ae,Ee,We,Qe,nn,Un,Hn,On,ni,gr,Xa,lo,Su,uo,kl,rs=mt.s==yt.s?1:-1,Yi=mt.c,vi=yt.c;if(!Yi||!Yi[0]||!vi||!vi[0])return new Tt(!mt.s||!yt.s||(Yi?vi&&Yi[0]==vi[0]:!vi)?NaN:Yi&&Yi[0]==0||!vi?rs*0:rs/0);for(Un=new Tt(rs),Hn=Un.c=[],le=mt.e-yt.e,rs=bt+le+1,Ut||(Ut=pr,le=rr(mt.e/fn)-rr(yt.e/fn),rs=rs/fn|0),ae=0;vi[ae]==(Yi[ae]||0);ae++);if(vi[ae]>(Yi[ae]||0)&&le--,rs<0)Hn.push(1),Ee=!0;else{for(lo=Yi.length,uo=vi.length,ae=0,rs+=2,We=Ei(Ut/(vi[0]+1)),We>1&&(vi=U(vi,We,Ut),Yi=U(Yi,We,Ut),uo=vi.length,lo=Yi.length),Xa=uo,On=Yi.slice(0,uo),ni=On.length;ni<uo;On[ni++]=0);kl=vi.slice(),kl=[0].concat(kl),Su=vi[0],vi[1]>=Ut/2&&Su++;do{if(We=0,Wt=rt(vi,On,uo,ni),Wt<0){if(gr=On[0],uo!=ni&&(gr=gr*Ut+(On[1]||0)),We=Ei(gr/Su),We>1)for(We>=Ut&&(We=Ut-1),Qe=U(vi,We,Ut),nn=Qe.length,ni=On.length;rt(Qe,On,nn,ni)==1;)We--,gt(Qe,uo<nn?kl:vi,nn,Ut),nn=Qe.length,Wt=1;else We==0&&(Wt=We=1),Qe=vi.slice(),nn=Qe.length;if(nn<ni&&(Qe=[0].concat(Qe)),gt(On,Qe,ni,Ut),ni=On.length,Wt==-1)for(;rt(vi,On,uo,ni)<1;)We++,gt(On,uo<ni?kl:vi,ni,Ut),ni=On.length}else Wt===0&&(We++,On=[0]);Hn[ae++]=We,On[0]?On[ni++]=Yi[Xa]||0:(On=[Yi[Xa]],ni=1)}while((Xa++<lo||On[0]!=null)&&rs--);Ee=On[0]!=null,Hn[0]||Hn.splice(0,1)}if(Ut==pr){for(ae=1,rs=Hn[0];rs>=10;rs/=10,ae++);te(Un,bt+(Un.e=ae+le*fn-1)+1,$t,Ee)}else Un.e=le,Un.r=+Ee;return Un}}();function Ft(U,rt,gt,mt){var yt,bt,$t,Ut,Wt;if(gt==null?gt=B:i(gt,0,8),!U.c)return U.toString();if(yt=U.c[0],$t=U.e,rt==null)Wt=sr(U.c),Wt=mt==1||mt==2&&($t<=z||$t>=Q)?g(Wt,$t):P(Wt,$t,"0");else if(U=te(new Tt(U),rt,gt),bt=U.e,Wt=sr(U.c),Ut=Wt.length,mt==1||mt==2&&(rt<=bt||bt<=z)){for(;Ut<rt;Wt+="0",Ut++);Wt=g(Wt,bt)}else if(rt-=$t,Wt=P(Wt,bt,"0"),bt+1>Ut){if(--rt>0)for(Wt+=".";rt--;Wt+="0");}else if(rt+=bt-Ut,rt>0)for(bt+1==Ut&&(Wt+=".");rt--;Wt+="0");return U.s<0&&yt?"-"+Wt:Wt}function Ht(U,rt){for(var gt,mt,yt=1,bt=new Tt(U[0]);yt<U.length;yt++)mt=new Tt(U[yt]),(!mt.s||(gt=xs(bt,mt))===rt||gt===0&&bt.s===rt)&&(bt=mt);return bt}function ge(U,rt,gt){for(var mt=1,yt=rt.length;!rt[--yt];rt.pop());for(yt=rt[0];yt>=10;yt/=10,mt++);return(gt=mt+gt*fn-1)>Et?U.c=U.e=null:gt<Nt?U.c=[U.e=0]:(U.e=gt,U.c=rt),U}p=function(){var U=/^(-?)0([xbo])(?=\w[\w.]*$)/i,rt=/^([^.]+)\.$/,gt=/^\.([^.]+)$/,mt=/^-?(Infinity|NaN)$/,yt=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(bt,$t,Ut,Wt){var le,ae=Ut?$t:$t.replace(yt,"");if(mt.test(ae))bt.s=isNaN(ae)?null:ae<0?-1:1;else{if(!Ut&&(ae=ae.replace(U,function(Ee,We,Qe){return le=(Qe=Qe.toLowerCase())=="x"?16:Qe=="b"?2:8,!Wt||Wt==le?We:Ee}),Wt&&(le=Wt,ae=ae.replace(rt,"$1").replace(gt,"0.$1")),$t!=ae))return new Tt(ae,le);if(Tt.DEBUG)throw Error(ei+"Not a"+(Wt?" base "+Wt:"")+" number: "+$t);bt.s=null}bt.c=bt.e=null}}();function te(U,rt,gt,mt){var yt,bt,$t,Ut,Wt,le,ae,Ee=U.c,We=Bo;if(Ee){t:{for(yt=1,Ut=Ee[0];Ut>=10;Ut/=10,yt++);if(bt=rt-yt,bt<0)bt+=fn,$t=rt,Wt=Ee[le=0],ae=Ei(Wt/We[yt-$t-1]%10);else if(le=ao((bt+1)/fn),le>=Ee.length)if(mt){for(;Ee.length<=le;Ee.push(0));Wt=ae=0,yt=1,bt%=fn,$t=bt-fn+1}else break t;else{for(Wt=Ut=Ee[le],yt=1;Ut>=10;Ut/=10,yt++);bt%=fn,$t=bt-fn+yt,ae=$t<0?0:Ei(Wt/We[yt-$t-1]%10)}if(mt=mt||rt<0||Ee[le+1]!=null||($t<0?Wt:Wt%We[yt-$t-1]),mt=gt<4?(ae||mt)&&(gt==0||gt==(U.s<0?3:2)):ae>5||ae==5&&(gt==4||mt||gt==6&&(bt>0?$t>0?Wt/We[yt-$t]:0:Ee[le-1])%10&1||gt==(U.s<0?8:7)),rt<1||!Ee[0])return Ee.length=0,mt?(rt-=U.e+1,Ee[0]=We[(fn-rt%fn)%fn],U.e=-rt||0):Ee[0]=U.e=0,U;if(bt==0?(Ee.length=le,Ut=1,le--):(Ee.length=le+1,Ut=We[fn-bt],Ee[le]=$t>0?Ei(Wt/We[yt-$t]%We[$t])*Ut:0),mt)for(;;)if(le==0){for(bt=1,$t=Ee[0];$t>=10;$t/=10,bt++);for($t=Ee[0]+=Ut,Ut=1;$t>=10;$t/=10,Ut++);bt!=Ut&&(U.e++,Ee[0]==pr&&(Ee[0]=1));break}else{if(Ee[le]+=Ut,Ee[le]!=pr)break;Ee[le--]=0,Ut=1}for(bt=Ee.length;Ee[--bt]===0;Ee.pop());}U.e>Et?U.c=U.e=null:U.e<Nt&&(U.c=[U.e=0])}return U}function de(U){var rt,gt=U.e;return gt===null?U.toString():(rt=sr(U.c),rt=gt<=z||gt>=Q?g(rt,gt):P(rt,gt,"0"),U.s<0?"-"+rt:rt)}return _.absoluteValue=_.abs=function(){var U=new Tt(this);return U.s<0&&(U.s=1),U},_.comparedTo=function(U,rt){return xs(this,new Tt(U,rt))},_.decimalPlaces=_.dp=function(U,rt){var gt,mt,yt,bt=this;if(U!=null)return i(U,0,Zi),rt==null?rt=B:i(rt,0,8),te(new Tt(bt),U+bt.e+1,rt);if(!(gt=bt.c))return null;if(mt=((yt=gt.length-1)-rr(this.e/fn))*fn,yt=gt[yt])for(;yt%10==0;yt/=10,mt--);return mt<0&&(mt=0),mt},_.dividedBy=_.div=function(U,rt){return a(this,new Tt(U,rt),M,B)},_.dividedToIntegerBy=_.idiv=function(U,rt){return a(this,new Tt(U,rt),0,1)},_.exponentiatedBy=_.pow=function(U,rt){var gt,mt,yt,bt,$t,Ut,Wt,le,ae,Ee=this;if(U=new Tt(U),U.c&&!U.isInteger())throw Error(ei+"Exponent not an integer: "+de(U));if(rt!=null&&(rt=new Tt(rt)),Ut=U.e>14,!Ee.c||!Ee.c[0]||Ee.c[0]==1&&!Ee.e&&Ee.c.length==1||!U.c||!U.c[0])return ae=new Tt(Math.pow(+de(Ee),Ut?U.s*(2-u(U)):+de(U))),rt?ae.mod(rt):ae;if(Wt=U.s<0,rt){if(rt.c?!rt.c[0]:!rt.s)return new Tt(NaN);mt=!Wt&&Ee.isInteger()&&rt.isInteger(),mt&&(Ee=Ee.mod(rt))}else{if(U.e>9&&(Ee.e>0||Ee.e<-1||(Ee.e==0?Ee.c[0]>1||Ut&&Ee.c[1]>=24e7:Ee.c[0]<8e13||Ut&&Ee.c[0]<=9999975e7)))return bt=Ee.s<0&&u(U)?-0:0,Ee.e>-1&&(bt=1/bt),new Tt(Wt?1/bt:bt);Pe&&(bt=ao(Pe/fn+2))}for(Ut?(gt=new Tt(.5),Wt&&(U.s=1),le=u(U)):(yt=Math.abs(+de(U)),le=yt%2),ae=new Tt(k);;){if(le){if(ae=ae.times(Ee),!ae.c)break;bt?ae.c.length>bt&&(ae.c.length=bt):mt&&(ae=ae.mod(rt))}if(yt){if(yt=Ei(yt/2),yt===0)break;le=yt%2}else if(U=U.times(gt),te(U,U.e+1,1),U.e>14)le=u(U);else{if(yt=+de(U),yt===0)break;le=yt%2}Ee=Ee.times(Ee),bt?Ee.c&&Ee.c.length>bt&&(Ee.c.length=bt):mt&&(Ee=Ee.mod(rt))}return mt?ae:(Wt&&(ae=k.div(ae)),rt?ae.mod(rt):bt?te(ae,Pe,B,$t):ae)},_.integerValue=function(U){var rt=new Tt(this);return U==null?U=B:i(U,0,8),te(rt,rt.e+1,U)},_.isEqualTo=_.eq=function(U,rt){return xs(this,new Tt(U,rt))===0},_.isFinite=function(){return!!this.c},_.isGreaterThan=_.gt=function(U,rt){return xs(this,new Tt(U,rt))>0},_.isGreaterThanOrEqualTo=_.gte=function(U,rt){return(rt=xs(this,new Tt(U,rt)))===1||rt===0},_.isInteger=function(){return!!this.c&&rr(this.e/fn)>this.c.length-2},_.isLessThan=_.lt=function(U,rt){return xs(this,new Tt(U,rt))<0},_.isLessThanOrEqualTo=_.lte=function(U,rt){return(rt=xs(this,new Tt(U,rt)))===-1||rt===0},_.isNaN=function(){return!this.s},_.isNegative=function(){return this.s<0},_.isPositive=function(){return this.s>0},_.isZero=function(){return!!this.c&&this.c[0]==0},_.minus=function(U,rt){var gt,mt,yt,bt,$t=this,Ut=$t.s;if(U=new Tt(U,rt),rt=U.s,!Ut||!rt)return new Tt(NaN);if(Ut!=rt)return U.s=-rt,$t.plus(U);var Wt=$t.e/fn,le=U.e/fn,ae=$t.c,Ee=U.c;if(!Wt||!le){if(!ae||!Ee)return ae?(U.s=-rt,U):new Tt(Ee?$t:NaN);if(!ae[0]||!Ee[0])return Ee[0]?(U.s=-rt,U):new Tt(ae[0]?$t:B==3?-0:0)}if(Wt=rr(Wt),le=rr(le),ae=ae.slice(),Ut=Wt-le){for((bt=Ut<0)?(Ut=-Ut,yt=ae):(le=Wt,yt=Ee),yt.reverse(),rt=Ut;rt--;yt.push(0));yt.reverse()}else for(mt=(bt=(Ut=ae.length)<(rt=Ee.length))?Ut:rt,Ut=rt=0;rt<mt;rt++)if(ae[rt]!=Ee[rt]){bt=ae[rt]<Ee[rt];break}if(bt&&(yt=ae,ae=Ee,Ee=yt,U.s=-U.s),rt=(mt=Ee.length)-(gt=ae.length),rt>0)for(;rt--;ae[gt++]=0);for(rt=pr-1;mt>Ut;){if(ae[--mt]<Ee[mt]){for(gt=mt;gt&&!ae[--gt];ae[gt]=rt);--ae[gt],ae[mt]+=pr}ae[mt]-=Ee[mt]}for(;ae[0]==0;ae.splice(0,1),--le);return ae[0]?ge(U,ae,le):(U.s=B==3?-1:1,U.c=[U.e=0],U)},_.modulo=_.mod=function(U,rt){var gt,mt,yt=this;return U=new Tt(U,rt),!yt.c||!U.s||U.c&&!U.c[0]?new Tt(NaN):!U.c||yt.c&&!yt.c[0]?new Tt(yt):(he==9?(mt=U.s,U.s=1,gt=a(yt,U,0,3),U.s=mt,gt.s*=mt):gt=a(yt,U,0,he),U=yt.minus(gt.times(U)),!U.c[0]&&he==1&&(U.s=yt.s),U)},_.multipliedBy=_.times=function(U,rt){var gt,mt,yt,bt,$t,Ut,Wt,le,ae,Ee,We,Qe,nn,Un,Hn,On=this,ni=On.c,gr=(U=new Tt(U,rt)).c;if(!ni||!gr||!ni[0]||!gr[0])return!On.s||!U.s||ni&&!ni[0]&&!gr||gr&&!gr[0]&&!ni?U.c=U.e=U.s=null:(U.s*=On.s,!ni||!gr?U.c=U.e=null:(U.c=[0],U.e=0)),U;for(mt=rr(On.e/fn)+rr(U.e/fn),U.s*=On.s,Wt=ni.length,Ee=gr.length,Wt<Ee&&(nn=ni,ni=gr,gr=nn,yt=Wt,Wt=Ee,Ee=yt),yt=Wt+Ee,nn=[];yt--;nn.push(0));for(Un=pr,Hn=jr,yt=Ee;--yt>=0;){for(gt=0,We=gr[yt]%Hn,Qe=gr[yt]/Hn|0,$t=Wt,bt=yt+$t;bt>yt;)le=ni[--$t]%Hn,ae=ni[$t]/Hn|0,Ut=Qe*le+ae*We,le=We*le+Ut%Hn*Hn+nn[bt]+gt,gt=(le/Un|0)+(Ut/Hn|0)+Qe*ae,nn[bt--]=le%Un;nn[bt]=gt}return gt?++mt:nn.splice(0,1),ge(U,nn,mt)},_.negated=function(){var U=new Tt(this);return U.s=-U.s||null,U},_.plus=function(U,rt){var gt,mt=this,yt=mt.s;if(U=new Tt(U,rt),rt=U.s,!yt||!rt)return new Tt(NaN);if(yt!=rt)return U.s=-rt,mt.minus(U);var bt=mt.e/fn,$t=U.e/fn,Ut=mt.c,Wt=U.c;if(!bt||!$t){if(!Ut||!Wt)return new Tt(yt/0);if(!Ut[0]||!Wt[0])return Wt[0]?U:new Tt(Ut[0]?mt:yt*0)}if(bt=rr(bt),$t=rr($t),Ut=Ut.slice(),yt=bt-$t){for(yt>0?($t=bt,gt=Wt):(yt=-yt,gt=Ut),gt.reverse();yt--;gt.push(0));gt.reverse()}for(yt=Ut.length,rt=Wt.length,yt-rt<0&&(gt=Wt,Wt=Ut,Ut=gt,rt=yt),yt=0;rt;)yt=(Ut[--rt]=Ut[rt]+Wt[rt]+yt)/pr|0,Ut[rt]=pr===Ut[rt]?0:Ut[rt]%pr;return yt&&(Ut=[yt].concat(Ut),++$t),ge(U,Ut,$t)},_.precision=_.sd=function(U,rt){var gt,mt,yt,bt=this;if(U!=null&&U!==!!U)return i(U,1,Zi),rt==null?rt=B:i(rt,0,8),te(new Tt(bt),U,rt);if(!(gt=bt.c))return null;if(yt=gt.length-1,mt=yt*fn+1,yt=gt[yt]){for(;yt%10==0;yt/=10,mt--);for(yt=gt[0];yt>=10;yt/=10,mt++);}return U&&bt.e+1>mt&&(mt=bt.e+1),mt},_.shiftedBy=function(U){return i(U,-9007199254740991,Ka),this.times("1e"+U)},_.squareRoot=_.sqrt=function(){var U,rt,gt,mt,yt,bt=this,$t=bt.c,Ut=bt.s,Wt=bt.e,le=M+4,ae=new Tt("0.5");if(Ut!==1||!$t||!$t[0])return new Tt(!Ut||Ut<0&&(!$t||$t[0])?NaN:$t?bt:1/0);if(Ut=Math.sqrt(+de(bt)),Ut==0||Ut==1/0?(rt=sr($t),(rt.length+Wt)%2==0&&(rt+="0"),Ut=Math.sqrt(+rt),Wt=rr((Wt+1)/2)-(Wt<0||Wt%2),Ut==1/0?rt="5e"+Wt:(rt=Ut.toExponential(),rt=rt.slice(0,rt.indexOf("e")+1)+Wt),gt=new Tt(rt)):gt=new Tt(Ut+""),gt.c[0]){for(Wt=gt.e,Ut=Wt+le,Ut<3&&(Ut=0);;)if(yt=gt,gt=ae.times(yt.plus(a(bt,yt,le,1))),sr(yt.c).slice(0,Ut)===(rt=sr(gt.c)).slice(0,Ut))if(gt.e<Wt&&--Ut,rt=rt.slice(Ut-3,Ut+1),rt=="9999"||!mt&&rt=="4999"){if(!mt&&(te(yt,yt.e+M+2,0),yt.times(yt).eq(bt))){gt=yt;break}le+=4,Ut+=4,mt=1}else{(!+rt||!+rt.slice(1)&&rt.charAt(0)=="5")&&(te(gt,gt.e+M+2,1),U=!gt.times(gt).eq(bt));break}}return te(gt,gt.e+M+1,B,U)},_.toExponential=function(U,rt){return U!=null&&(i(U,0,Zi),U++),Ft(this,U,rt,1)},_.toFixed=function(U,rt){return U!=null&&(i(U,0,Zi),U=U+this.e+1),Ft(this,U,rt)},_.toFormat=function(U,rt,gt){var mt,yt=this;if(gt==null)U!=null&&rt&&typeof rt=="object"?(gt=rt,rt=null):U&&typeof U=="object"?(gt=U,U=rt=null):gt=Oe;else if(typeof gt!="object")throw Error(ei+"Argument not an object: "+gt);if(mt=yt.toFixed(U,rt),yt.c){var bt,$t=mt.split("."),Ut=+gt.groupSize,Wt=+gt.secondaryGroupSize,le=gt.groupSeparator||"",ae=$t[0],Ee=$t[1],We=yt.s<0,Qe=We?ae.slice(1):ae,nn=Qe.length;if(Wt&&(bt=Ut,Ut=Wt,Wt=bt,nn-=bt),Ut>0&&nn>0){for(bt=nn%Ut||Ut,ae=Qe.substr(0,bt);bt<nn;bt+=Ut)ae+=le+Qe.substr(bt,Ut);Wt>0&&(ae+=le+Qe.slice(bt)),We&&(ae="-"+ae)}mt=Ee?ae+(gt.decimalSeparator||"")+((Wt=+gt.fractionGroupSize)?Ee.replace(new RegExp("\\d{"+Wt+"}\\B","g"),"$&"+(gt.fractionGroupSeparator||"")):Ee):ae}return(gt.prefix||"")+mt+(gt.suffix||"")},_.toFraction=function(U){var rt,gt,mt,yt,bt,$t,Ut,Wt,le,ae,Ee,We,Qe=this,nn=Qe.c;if(U!=null&&(Ut=new Tt(U),!Ut.isInteger()&&(Ut.c||Ut.s!==1)||Ut.lt(k)))throw Error(ei+"Argument "+(Ut.isInteger()?"out of range: ":"not an integer: ")+de(Ut));if(!nn)return new Tt(Qe);for(rt=new Tt(k),le=gt=new Tt(k),mt=Wt=new Tt(k),We=sr(nn),bt=rt.e=We.length-Qe.e-1,rt.c[0]=Bo[($t=bt%fn)<0?fn+$t:$t],U=!U||Ut.comparedTo(rt)>0?bt>0?rt:le:Ut,$t=Et,Et=1/0,Ut=new Tt(We),Wt.c[0]=0;ae=a(Ut,rt,0,1),yt=gt.plus(ae.times(mt)),yt.comparedTo(U)!=1;)gt=mt,mt=yt,le=Wt.plus(ae.times(yt=le)),Wt=yt,rt=Ut.minus(ae.times(yt=rt)),Ut=yt;return yt=a(U.minus(gt),mt,0,1),Wt=Wt.plus(yt.times(le)),gt=gt.plus(yt.times(mt)),Wt.s=le.s=Qe.s,bt=bt*2,Ee=a(le,mt,bt,B).minus(Qe).abs().comparedTo(a(Wt,gt,bt,B).minus(Qe).abs())<1?[le,mt]:[Wt,gt],Et=$t,Ee},_.toNumber=function(){return+de(this)},_.toPrecision=function(U,rt){return U!=null&&i(U,1,Zi),Ft(this,U,rt,2)},_.toString=function(U){var rt,gt=this,mt=gt.s,yt=gt.e;return yt===null?mt?(rt="Infinity",mt<0&&(rt="-"+rt)):rt="NaN":(U==null?rt=yt<=z||yt>=Q?g(sr(gt.c),yt):P(sr(gt.c),yt,"0"):U===10&&dn?(gt=te(new Tt(gt),M+yt+1,B),rt=P(sr(gt.c),gt.e,"0")):(i(U,2,Fe.length,"Base"),rt=h(P(sr(gt.c),yt,"0"),10,U,mt,!0)),mt<0&&gt.c[0]&&(rt="-"+rt)),rt},_.valueOf=_.toJSON=function(){return de(this)},_._isBigNumber=!0,_[Symbol.toStringTag]="BigNumber",_[Symbol.for("nodejs.util.inspect.custom")]=_.valueOf,s!=null&&Tt.set(s),Tt}function rr(s){var a=s|0;return s>0||s===a?a:a-1}function sr(s){for(var a,h,p=1,_=s.length,k=s[0]+"";p<_;){for(a=s[p++]+"",h=fn-a.length;h--;a="0"+a);k+=a}for(_=k.length;k.charCodeAt(--_)===48;);return k.slice(0,_+1||1)}function xs(s,a){var h,p,_=s.c,k=a.c,M=s.s,B=a.s,z=s.e,Q=a.e;if(!M||!B)return null;if(h=_&&!_[0],p=k&&!k[0],h||p)return h?p?0:-B:M;if(M!=B)return M;if(h=M<0,p=z==Q,!_||!k)return p?0:!_^h?1:-1;if(!p)return z>Q^h?1:-1;for(B=(z=_.length)<(Q=k.length)?z:Q,M=0;M<B;M++)if(_[M]!=k[M])return _[M]>k[M]^h?1:-1;return z==Q?0:z>Q^h?1:-1}function i(s,a,h,p){if(s<a||s>h||s!==Ei(s))throw Error(ei+(p||"Argument")+(typeof s=="number"?s<a||s>h?" out of range: ":" not an integer: ":" not a primitive number: ")+String(s))}function u(s){var a=s.c.length-1;return rr(s.e/fn)==a&&s.c[a]%2!=0}function g(s,a){return(s.length>1?s.charAt(0)+"."+s.slice(1):s)+(a<0?"e":"e+")+a}function P(s,a,h){var p,_;if(a<0){for(_=h+".";++a;_+=h);s=_+s}else if(p=s.length,++a>p){for(_=h,a-=p;--a;_+=h);s+=_}else a<p&&(s=s.slice(0,a)+"."+s.slice(a));return s}var N=bl(),ot=N,jt=class{constructor(s){Xe(this,"key");Xe(this,"left",null);Xe(this,"right",null);this.key=s}},ce=class extends jt{constructor(s){super(s)}},ve=class{constructor(){Xe(this,"size",0);Xe(this,"modificationCount",0);Xe(this,"splayCount",0)}splay(s){let a=this.root;if(a==null)return this.compare(s,s),-1;let h=null,p=null,_=null,k=null,M=a,B=this.compare,z;for(;;)if(z=B(M.key,s),z>0){let Q=M.left;if(Q==null||(z=B(Q.key,s),z>0&&(M.left=Q.right,Q.right=M,M=Q,Q=M.left,Q==null)))break;h==null?p=M:h.left=M,h=M,M=Q}else if(z<0){let Q=M.right;if(Q==null||(z=B(Q.key,s),z<0&&(M.right=Q.left,Q.left=M,M=Q,Q=M.right,Q==null)))break;_==null?k=M:_.right=M,_=M,M=Q}else break;return _!=null&&(_.right=M.left,M.left=k),h!=null&&(h.left=M.right,M.right=p),this.root!==M&&(this.root=M,this.splayCount++),z}splayMin(s){let a=s,h=a.left;for(;h!=null;){let p=h;a.left=p.right,p.right=a,a=p,h=a.left}return a}splayMax(s){let a=s,h=a.right;for(;h!=null;){let p=h;a.right=p.left,p.left=a,a=p,h=a.right}return a}_delete(s){if(this.root==null||this.splay(s)!=0)return null;let a=this.root,h=a,p=a.left;if(this.size--,p==null)this.root=a.right;else{let _=a.right;a=this.splayMax(p),a.right=_,this.root=a}return this.modificationCount++,h}addNewRoot(s,a){this.size++,this.modificationCount++;let h=this.root;if(h==null){this.root=s;return}a<0?(s.left=h,s.right=h.right,h.right=null):(s.right=h,s.left=h.left,h.left=null),this.root=s}_first(){let s=this.root;return s==null?null:(this.root=this.splayMin(s),this.root)}_last(){let s=this.root;return s==null?null:(this.root=this.splayMax(s),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(s){return this.validKey(s)&&this.splay(s)==0}defaultCompare(){return(s,a)=>s<a?-1:s>a?1:0}wrap(){return{getRoot:()=>this.root,setRoot:s=>{this.root=s},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:s=>{this.splayCount=s},splay:s=>this.splay(s),has:s=>this.has(s)}}},Me=class ju extends ve{constructor(h,p){super();Xe(this,"root",null);Xe(this,"compare");Xe(this,"validKey");Xe(this,je,"[object Set]");this.compare=h??this.defaultCompare(),this.validKey=p??(_=>_!=null&&_!=null)}delete(h){return this.validKey(h)?this._delete(h)!=null:!1}deleteAll(h){for(let p of h)this.delete(p)}forEach(h){let p=this[Symbol.iterator](),_;for(;_=p.next(),!_.done;)h(_.value,_.value,this)}add(h){let p=this.splay(h);return p!=0&&this.addNewRoot(new ce(h),p),this}addAndReturn(h){let p=this.splay(h);return p!=0&&this.addNewRoot(new ce(h),p),this.root.key}addAll(h){for(let p of h)this.add(p)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(h){if(h==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(h)<0)return this.root.key;let p=this.root.left;if(p==null)return null;let _=p.right;for(;_!=null;)p=_,_=p.right;return p.key}firstAfter(h){if(h==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(h)>0)return this.root.key;let p=this.root.right;if(p==null)return null;let _=p.left;for(;_!=null;)p=_,_=p.left;return p.key}retainAll(h){let p=new ju(this.compare,this.validKey),_=this.modificationCount;for(let k of h){if(_!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(k)&&this.splay(k)==0&&p.add(this.root.key)}p.size!=this.size&&(this.root=p.root,this.size=p.size,this.modificationCount++)}lookup(h){return!this.validKey(h)||this.splay(h)!=0?null:this.root.key}intersection(h){let p=new ju(this.compare,this.validKey);for(let _ of this)h.has(_)&&p.add(_);return p}difference(h){let p=new ju(this.compare,this.validKey);for(let _ of this)h.has(_)||p.add(_);return p}union(h){let p=this.clone();return p.addAll(h),p}clone(){let h=new ju(this.compare,this.validKey);return h.size=this.size,h.root=this.copyNode(this.root),h}copyNode(h){if(h==null)return null;function p(k,M){let B,z;do{if(B=k.left,z=k.right,B!=null){let Q=new ce(B.key);M.left=Q,p(B,Q)}if(z!=null){let Q=new ce(z.key);M.right=Q,k=z,M=Q}}while(z!=null)}let _=new ce(h.key);return p(h,_),_}toSet(){return this.clone()}entries(){return new En(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(un=Symbol.iterator,je=Symbol.toStringTag,un)](){return new sn(this.wrap())}},Ve=class{constructor(s){Xe(this,"tree");Xe(this,"path",new Array);Xe(this,"modificationCount",null);Xe(this,"splayCount");this.tree=s,this.splayCount=s.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let s=this.path[this.path.length-1];return this.getValue(s)}rebuildPath(s){this.path.splice(0,this.path.length),this.tree.splay(s),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(s){for(;s!=null;)this.path.push(s),s=s.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let h=this.tree.getRoot();for(;h!=null;)this.path.push(h),h=h.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let s=this.path[this.path.length-1],a=s.right;if(a!=null){for(;a!=null;)this.path.push(a),a=a.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===s;)s=this.path.pop();return this.path.length>0}},sn=class extends Ve{getValue(s){return s.key}},En=class extends Ve{getValue(s){return[s.key,s.key]}},or=s=>s,Mi=s=>{if(s){let a=new Me(oo(s)),h=new Me(oo(s)),p=(k,M)=>M.addAndReturn(k),_=k=>({x:p(k.x,a),y:p(k.y,h)});return _({x:new ot(0),y:new ot(0)}),_}return or},mr=s=>({set:a=>{fi=mr(a)},reset:()=>mr(s),compare:oo(s),snap:Mi(s),orient:ws(s)}),fi=mr(),Ls=(s,a)=>s.ll.x.isLessThanOrEqualTo(a.x)&&a.x.isLessThanOrEqualTo(s.ur.x)&&s.ll.y.isLessThanOrEqualTo(a.y)&&a.y.isLessThanOrEqualTo(s.ur.y),wl=(s,a)=>{if(a.ur.x.isLessThan(s.ll.x)||s.ur.x.isLessThan(a.ll.x)||a.ur.y.isLessThan(s.ll.y)||s.ur.y.isLessThan(a.ll.y))return null;let h=s.ll.x.isLessThan(a.ll.x)?a.ll.x:s.ll.x,p=s.ur.x.isLessThan(a.ur.x)?s.ur.x:a.ur.x,_=s.ll.y.isLessThan(a.ll.y)?a.ll.y:s.ll.y,k=s.ur.y.isLessThan(a.ur.y)?s.ur.y:a.ur.y;return{ll:{x:h,y:_},ur:{x:p,y:k}}},is=(s,a)=>s.x.times(a.y).minus(s.y.times(a.x)),zr=(s,a)=>s.x.times(a.x).plus(s.y.times(a.y)),Cr=s=>zr(s,s).sqrt(),Cu=(s,a,h)=>{let p={x:a.x.minus(s.x),y:a.y.minus(s.y)},_={x:h.x.minus(s.x),y:h.y.minus(s.y)};return is(_,p).div(Cr(_)).div(Cr(p))},xl=(s,a,h)=>{let p={x:a.x.minus(s.x),y:a.y.minus(s.y)},_={x:h.x.minus(s.x),y:h.y.minus(s.y)};return zr(_,p).div(Cr(_)).div(Cr(p))},Kn=(s,a,h)=>a.y.isZero()?null:{x:s.x.plus(a.x.div(a.y).times(h.minus(s.y))),y:h},Ki=(s,a,h)=>a.x.isZero()?null:{x:h,y:s.y.plus(a.y.div(a.x).times(h.minus(s.x)))},ku=(s,a,h,p)=>{if(a.x.isZero())return Ki(h,p,s.x);if(p.x.isZero())return Ki(s,a,h.x);if(a.y.isZero())return Kn(h,p,s.y);if(p.y.isZero())return Kn(s,a,h.y);let _=is(a,p);if(_.isZero())return null;let k={x:h.x.minus(s.x),y:h.y.minus(s.y)},M=is(k,a).div(_),B=is(k,p).div(_),z=s.x.plus(B.times(a.x)),Q=h.x.plus(M.times(p.x)),Nt=s.y.plus(B.times(a.y)),Et=h.y.plus(M.times(p.y)),Jt=z.plus(Q).div(2),he=Nt.plus(Et).div(2);return{x:Jt,y:he}},Cs=class Vg{constructor(a,h){Xe(this,"point");Xe(this,"isLeft");Xe(this,"segment");Xe(this,"otherSE");Xe(this,"consumedBy");a.events===void 0?a.events=[this]:a.events.push(this),this.point=a,this.isLeft=h}static compare(a,h){let p=Vg.comparePoints(a.point,h.point);return p!==0?p:(a.point!==h.point&&a.link(h),a.isLeft!==h.isLeft?a.isLeft?1:-1:To.compare(a.segment,h.segment))}static comparePoints(a,h){return a.x.isLessThan(h.x)?-1:a.x.isGreaterThan(h.x)?1:a.y.isLessThan(h.y)?-1:a.y.isGreaterThan(h.y)?1:0}link(a){if(a.point===this.point)throw new Error("Tried to link already linked events");let h=a.point.events;for(let p=0,_=h.length;p<_;p++){let k=h[p];this.point.events.push(k),k.point=this.point}this.checkForConsuming()}checkForConsuming(){let a=this.point.events.length;for(let h=0;h<a;h++){let p=this.point.events[h];if(p.segment.consumedBy===void 0)for(let _=h+1;_<a;_++){let k=this.point.events[_];k.consumedBy===void 0&&p.otherSE.point.events===k.otherSE.point.events&&p.segment.consume(k.segment)}}}getAvailableLinkedEvents(){let a=[];for(let h=0,p=this.point.events.length;h<p;h++){let _=this.point.events[h];_!==this&&!_.segment.ringOut&&_.segment.isInResult()&&a.push(_)}return a}getLeftmostComparator(a){let h=new Map,p=_=>{let k=_.otherSE;h.set(_,{sine:Cu(this.point,a.point,k.point),cosine:xl(this.point,a.point,k.point)})};return(_,k)=>{h.has(_)||p(_),h.has(k)||p(k);let{sine:M,cosine:B}=h.get(_),{sine:z,cosine:Q}=h.get(k);return M.isGreaterThanOrEqualTo(0)&&z.isGreaterThanOrEqualTo(0)?B.isLessThan(Q)?1:B.isGreaterThan(Q)?-1:0:M.isLessThan(0)&&z.isLessThan(0)?B.isLessThan(Q)?-1:B.isGreaterThan(Q)?1:0:z.isLessThan(M)?-1:z.isGreaterThan(M)?1:0}}},Hl=0,To=class Uc{constructor(a,h,p,_){Xe(this,"id");Xe(this,"leftSE");Xe(this,"rightSE");Xe(this,"rings");Xe(this,"windings");Xe(this,"ringOut");Xe(this,"consumedBy");Xe(this,"prev");Xe(this,"_prevInResult");Xe(this,"_beforeState");Xe(this,"_afterState");Xe(this,"_isInResult");this.id=++Hl,this.leftSE=a,a.segment=this,a.otherSE=h,this.rightSE=h,h.segment=this,h.otherSE=a,this.rings=p,this.windings=_}static compare(a,h){let p=a.leftSE.point.x,_=h.leftSE.point.x,k=a.rightSE.point.x,M=h.rightSE.point.x;if(M.isLessThan(p))return 1;if(k.isLessThan(_))return-1;let B=a.leftSE.point.y,z=h.leftSE.point.y,Q=a.rightSE.point.y,Nt=h.rightSE.point.y;if(p.isLessThan(_)){if(z.isLessThan(B)&&z.isLessThan(Q))return 1;if(z.isGreaterThan(B)&&z.isGreaterThan(Q))return-1;let Et=a.comparePoint(h.leftSE.point);if(Et<0)return 1;if(Et>0)return-1;let Jt=h.comparePoint(a.rightSE.point);return Jt!==0?Jt:-1}if(p.isGreaterThan(_)){if(B.isLessThan(z)&&B.isLessThan(Nt))return-1;if(B.isGreaterThan(z)&&B.isGreaterThan(Nt))return 1;let Et=h.comparePoint(a.leftSE.point);if(Et!==0)return Et;let Jt=a.comparePoint(h.rightSE.point);return Jt<0?1:Jt>0?-1:1}if(B.isLessThan(z))return-1;if(B.isGreaterThan(z))return 1;if(k.isLessThan(M)){let Et=h.comparePoint(a.rightSE.point);if(Et!==0)return Et}if(k.isGreaterThan(M)){let Et=a.comparePoint(h.rightSE.point);if(Et<0)return 1;if(Et>0)return-1}if(!k.eq(M)){let Et=Q.minus(B),Jt=k.minus(p),he=Nt.minus(z),Pe=M.minus(_);if(Et.isGreaterThan(Jt)&&he.isLessThan(Pe))return 1;if(Et.isLessThan(Jt)&&he.isGreaterThan(Pe))return-1}return k.isGreaterThan(M)?1:k.isLessThan(M)||Q.isLessThan(Nt)?-1:Q.isGreaterThan(Nt)?1:a.id<h.id?-1:a.id>h.id?1:0}static fromRing(a,h,p){let _,k,M,B=Cs.comparePoints(a,h);if(B<0)_=a,k=h,M=1;else if(B>0)_=h,k=a,M=-1;else throw new Error(`Tried to create degenerate segment at [${a.x}, ${a.y}]`);let z=new Cs(_,!0),Q=new Cs(k,!1);return new Uc(z,Q,[p],[M])}replaceRightSE(a){this.rightSE=a,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let a=this.leftSE.point.y,h=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:a.isLessThan(h)?a:h},ur:{x:this.rightSE.point.x,y:a.isGreaterThan(h)?a:h}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(a){return a.x.eq(this.leftSE.point.x)&&a.y.eq(this.leftSE.point.y)||a.x.eq(this.rightSE.point.x)&&a.y.eq(this.rightSE.point.y)}comparePoint(a){return fi.orient(this.leftSE.point,a,this.rightSE.point)}getIntersection(a){let h=this.bbox(),p=a.bbox(),_=wl(h,p);if(_===null)return null;let k=this.leftSE.point,M=this.rightSE.point,B=a.leftSE.point,z=a.rightSE.point,Q=Ls(h,B)&&this.comparePoint(B)===0,Nt=Ls(p,k)&&a.comparePoint(k)===0,Et=Ls(h,z)&&this.comparePoint(z)===0,Jt=Ls(p,M)&&a.comparePoint(M)===0;if(Nt&&Q)return Jt&&!Et?M:!Jt&&Et?z:null;if(Nt)return Et&&k.x.eq(z.x)&&k.y.eq(z.y)?null:k;if(Q)return Jt&&M.x.eq(B.x)&&M.y.eq(B.y)?null:B;if(Jt&&Et)return null;if(Jt)return M;if(Et)return z;let he=ku(k,this.vector(),B,a.vector());return he===null||!Ls(_,he)?null:fi.snap(he)}split(a){let h=[],p=a.events!==void 0,_=new Cs(a,!0),k=new Cs(a,!1),M=this.rightSE;this.replaceRightSE(k),h.push(k),h.push(_);let B=new Uc(_,M,this.rings.slice(),this.windings.slice());return Cs.comparePoints(B.leftSE.point,B.rightSE.point)>0&&B.swapEvents(),Cs.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),p&&(_.checkForConsuming(),k.checkForConsuming()),h}swapEvents(){let a=this.rightSE;this.rightSE=this.leftSE,this.leftSE=a,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let h=0,p=this.windings.length;h<p;h++)this.windings[h]*=-1}consume(a){let h=this,p=a;for(;h.consumedBy;)h=h.consumedBy;for(;p.consumedBy;)p=p.consumedBy;let _=Uc.compare(h,p);if(_!==0){if(_>0){let k=h;h=p,p=k}if(h.prev===p){let k=h;h=p,p=k}for(let k=0,M=p.rings.length;k<M;k++){let B=p.rings[k],z=p.windings[k],Q=h.rings.indexOf(B);Q===-1?(h.rings.push(B),h.windings.push(z)):h.windings[Q]+=z}p.rings=null,p.windings=null,p.consumedBy=h,p.leftSE.consumedBy=h.leftSE,p.rightSE.consumedBy=h.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let a=this.prev.consumedBy||this.prev;this._beforeState=a.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let a=this.beforeState();this._afterState={rings:a.rings.slice(0),windings:a.windings.slice(0),multiPolys:[]};let h=this._afterState.rings,p=this._afterState.windings,_=this._afterState.multiPolys;for(let B=0,z=this.rings.length;B<z;B++){let Q=this.rings[B],Nt=this.windings[B],Et=h.indexOf(Q);Et===-1?(h.push(Q),p.push(Nt)):p[Et]+=Nt}let k=[],M=[];for(let B=0,z=h.length;B<z;B++){if(p[B]===0)continue;let Q=h[B],Nt=Q.poly;if(M.indexOf(Nt)===-1)if(Q.isExterior)k.push(Nt);else{M.indexOf(Nt)===-1&&M.push(Nt);let Et=k.indexOf(Q.poly);Et!==-1&&k.splice(Et,1)}}for(let B=0,z=k.length;B<z;B++){let Q=k[B].multiPoly;_.indexOf(Q)===-1&&_.push(Q)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let a=this.beforeState().multiPolys,h=this.afterState().multiPolys;switch(Kl.type){case"union":{let p=a.length===0,_=h.length===0;this._isInResult=p!==_;break}case"intersection":{let p,_;a.length<h.length?(p=a.length,_=h.length):(p=h.length,_=a.length),this._isInResult=_===Kl.numMultiPolys&&p<_;break}case"xor":{let p=Math.abs(a.length-h.length);this._isInResult=p%2===1;break}case"difference":{let p=_=>_.length===1&&_[0].isSubject;this._isInResult=p(a)!==p(h);break}}return this._isInResult}},Ya=class{constructor(s,a,h){Xe(this,"poly");Xe(this,"isExterior");Xe(this,"segments");Xe(this,"bbox");if(!Array.isArray(s)||s.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=a,this.isExterior=h,this.segments=[],typeof s[0][0]!="number"||typeof s[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let p=fi.snap({x:new ot(s[0][0]),y:new ot(s[0][1])});this.bbox={ll:{x:p.x,y:p.y},ur:{x:p.x,y:p.y}};let _=p;for(let k=1,M=s.length;k<M;k++){if(typeof s[k][0]!="number"||typeof s[k][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let B=fi.snap({x:new ot(s[k][0]),y:new ot(s[k][1])});B.x.eq(_.x)&&B.y.eq(_.y)||(this.segments.push(To.fromRing(_,B,this)),B.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=B.x),B.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=B.y),B.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=B.x),B.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=B.y),_=B)}(!p.x.eq(_.x)||!p.y.eq(_.y))&&this.segments.push(To.fromRing(_,p,this))}getSweepEvents(){let s=[];for(let a=0,h=this.segments.length;a<h;a++){let p=this.segments[a];s.push(p.leftSE),s.push(p.rightSE)}return s}},Wl=class{constructor(s,a){Xe(this,"multiPoly");Xe(this,"exteriorRing");Xe(this,"interiorRings");Xe(this,"bbox");if(!Array.isArray(s))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Ya(s[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let h=1,p=s.length;h<p;h++){let _=new Ya(s[h],this,!1);_.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=_.bbox.ll.x),_.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=_.bbox.ll.y),_.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=_.bbox.ur.x),_.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=_.bbox.ur.y),this.interiorRings.push(_)}this.multiPoly=a}getSweepEvents(){let s=this.exteriorRing.getSweepEvents();for(let a=0,h=this.interiorRings.length;a<h;a++){let p=this.interiorRings[a].getSweepEvents();for(let _=0,k=p.length;_<k;_++)s.push(p[_])}return s}},dc=class{constructor(s,a){Xe(this,"isSubject");Xe(this,"polys");Xe(this,"bbox");if(!Array.isArray(s))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof s[0][0][0]=="number"&&(s=[s])}catch{}this.polys=[],this.bbox={ll:{x:new ot(Number.POSITIVE_INFINITY),y:new ot(Number.POSITIVE_INFINITY)},ur:{x:new ot(Number.NEGATIVE_INFINITY),y:new ot(Number.NEGATIVE_INFINITY)}};for(let h=0,p=s.length;h<p;h++){let _=new Wl(s[h],this);_.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=_.bbox.ll.x),_.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=_.bbox.ll.y),_.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=_.bbox.ur.x),_.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=_.bbox.ur.y),this.polys.push(_)}this.isSubject=a}getSweepEvents(){let s=[];for(let a=0,h=this.polys.length;a<h;a++){let p=this.polys[a].getSweepEvents();for(let _=0,k=p.length;_<k;_++)s.push(p[_])}return s}},Zl=class $f{constructor(a){Xe(this,"events");Xe(this,"poly");Xe(this,"_isExteriorRing");Xe(this,"_enclosingRing");this.events=a;for(let h=0,p=a.length;h<p;h++)a[h].segment.ringOut=this;this.poly=null}static factory(a){let h=[];for(let p=0,_=a.length;p<_;p++){let k=a[p];if(!k.isInResult()||k.ringOut)continue;let M=null,B=k.leftSE,z=k.rightSE,Q=[B],Nt=B.point,Et=[];for(;M=B,B=z,Q.push(B),B.point!==Nt;)for(;;){let Jt=B.getAvailableLinkedEvents();if(Jt.length===0){let Oe=Q[0].point,Fe=Q[Q.length-1].point;throw new Error(`Unable to complete output ring starting at [${Oe.x}, ${Oe.y}]. Last matching segment found ends at [${Fe.x}, ${Fe.y}].`)}if(Jt.length===1){z=Jt[0].otherSE;break}let he=null;for(let Oe=0,Fe=Et.length;Oe<Fe;Oe++)if(Et[Oe].point===B.point){he=Oe;break}if(he!==null){let Oe=Et.splice(he)[0],Fe=Q.splice(Oe.index);Fe.unshift(Fe[0].otherSE),h.push(new $f(Fe.reverse()));continue}Et.push({index:Q.length,point:B.point});let Pe=B.getLeftmostComparator(M);z=Jt.sort(Pe)[0].otherSE;break}h.push(new $f(Q))}return h}getGeom(){let a=this.events[0].point,h=[a];for(let Q=1,Nt=this.events.length-1;Q<Nt;Q++){let Et=this.events[Q].point,Jt=this.events[Q+1].point;fi.orient(Et,a,Jt)!==0&&(h.push(Et),a=Et)}if(h.length===1)return null;let p=h[0],_=h[1];fi.orient(p,a,_)===0&&h.shift(),h.push(h[0]);let k=this.isExteriorRing()?1:-1,M=this.isExteriorRing()?0:h.length-1,B=this.isExteriorRing()?h.length:-1,z=[];for(let Q=M;Q!=B;Q+=k)z.push([h[Q].x.toNumber(),h[Q].y.toNumber()]);return z}isExteriorRing(){if(this._isExteriorRing===void 0){let a=this.enclosingRing();this._isExteriorRing=a?!a.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var _,k;let a=this.events[0];for(let M=1,B=this.events.length;M<B;M++){let z=this.events[M];Cs.compare(a,z)>0&&(a=z)}let h=a.segment.prevInResult(),p=h?h.prevInResult():null;for(;;){if(!h)return null;if(!p)return h.ringOut;if(p.ringOut!==h.ringOut)return((_=p.ringOut)==null?void 0:_.enclosingRing())!==h.ringOut?h.ringOut:(k=h.ringOut)==null?void 0:k.enclosingRing();h=p.prevInResult(),p=h?h.prevInResult():null}}},Ll=class{constructor(s){Xe(this,"exteriorRing");Xe(this,"interiorRings");this.exteriorRing=s,s.poly=this,this.interiorRings=[]}addInterior(s){this.interiorRings.push(s),s.poly=this}getGeom(){let s=this.exteriorRing.getGeom();if(s===null)return null;let a=[s];for(let h=0,p=this.interiorRings.length;h<p;h++){let _=this.interiorRings[h].getGeom();_!==null&&a.push(_)}return a}},Cl=class{constructor(s){Xe(this,"rings");Xe(this,"polys");this.rings=s,this.polys=this._composePolys(s)}getGeom(){let s=[];for(let a=0,h=this.polys.length;a<h;a++){let p=this.polys[a].getGeom();p!==null&&s.push(p)}return s}_composePolys(s){var h;let a=[];for(let p=0,_=s.length;p<_;p++){let k=s[p];if(!k.poly)if(k.isExteriorRing())a.push(new Ll(k));else{let M=k.enclosingRing();M!=null&&M.poly||a.push(new Ll(M)),(h=M==null?void 0:M.poly)==null||h.addInterior(k)}}return a}},Pu=class{constructor(s,a=To.compare){Xe(this,"queue");Xe(this,"tree");Xe(this,"segments");this.queue=s,this.tree=new Me(a),this.segments=[]}process(s){let a=s.segment,h=[];if(s.consumedBy)return s.isLeft?this.queue.delete(s.otherSE):this.tree.delete(a),h;s.isLeft&&this.tree.add(a);let p=a,_=a;do p=this.tree.lastBefore(p);while(p!=null&&p.consumedBy!=null);do _=this.tree.firstAfter(_);while(_!=null&&_.consumedBy!=null);if(s.isLeft){let k=null;if(p){let B=p.getIntersection(a);if(B!==null&&(a.isAnEndpoint(B)||(k=B),!p.isAnEndpoint(B))){let z=this._splitSafely(p,B);for(let Q=0,Nt=z.length;Q<Nt;Q++)h.push(z[Q])}}let M=null;if(_){let B=_.getIntersection(a);if(B!==null&&(a.isAnEndpoint(B)||(M=B),!_.isAnEndpoint(B))){let z=this._splitSafely(_,B);for(let Q=0,Nt=z.length;Q<Nt;Q++)h.push(z[Q])}}if(k!==null||M!==null){let B=null;k===null?B=M:M===null?B=k:B=Cs.comparePoints(k,M)<=0?k:M,this.queue.delete(a.rightSE),h.push(a.rightSE);let z=a.split(B);for(let Q=0,Nt=z.length;Q<Nt;Q++)h.push(z[Q])}h.length>0?(this.tree.delete(a),h.push(s)):(this.segments.push(a),a.prev=p)}else{if(p&&_){let k=p.getIntersection(_);if(k!==null){if(!p.isAnEndpoint(k)){let M=this._splitSafely(p,k);for(let B=0,z=M.length;B<z;B++)h.push(M[B])}if(!_.isAnEndpoint(k)){let M=this._splitSafely(_,k);for(let B=0,z=M.length;B<z;B++)h.push(M[B])}}}this.tree.delete(a)}return h}_splitSafely(s,a){this.tree.delete(s);let h=s.rightSE;this.queue.delete(h);let p=s.split(a);return p.push(h),s.consumedBy===void 0&&this.tree.add(s),p}},Oh=class{constructor(){Xe(this,"type");Xe(this,"numMultiPolys")}run(s,a,h){Ja.type=s;let p=[new dc(a,!0)];for(let z=0,Q=h.length;z<Q;z++)p.push(new dc(h[z],!1));if(Ja.numMultiPolys=p.length,Ja.type==="difference"){let z=p[0],Q=1;for(;Q<p.length;)wl(p[Q].bbox,z.bbox)!==null?Q++:p.splice(Q,1)}if(Ja.type==="intersection")for(let z=0,Q=p.length;z<Q;z++){let Nt=p[z];for(let Et=z+1,Jt=p.length;Et<Jt;Et++)if(wl(Nt.bbox,p[Et].bbox)===null)return[]}let _=new Me(Cs.compare);for(let z=0,Q=p.length;z<Q;z++){let Nt=p[z].getSweepEvents();for(let Et=0,Jt=Nt.length;Et<Jt;Et++)_.add(Nt[Et])}let k=new Pu(_),M=null;for(_.size!=0&&(M=_.first(),_.delete(M));M;){let z=k.process(M);for(let Q=0,Nt=z.length;Q<Nt;Q++){let Et=z[Q];Et.consumedBy===void 0&&_.add(Et)}_.size!=0?(M=_.first(),_.delete(M)):M=null}fi.reset();let B=Zl.factory(k.segments);return new Cl(B).getGeom()}},Ja=new Oh,Kl=Ja,Ih=(s,...a)=>Kl.run("intersection",s,a),Rh=(s,...a)=>Kl.run("difference",s,a);fi.set;function Yl(s){let a={type:"Feature"};return a.geometry=s,a}function Jl(s){return s.type==="Feature"?s.geometry:s}function pc(s){return s&&s.geometry&&s.geometry.coordinates?s.geometry.coordinates:s}function mc(s){return Yl({type:"LineString",coordinates:s})}function Xl(s){return Yl({type:"MultiLineString",coordinates:s})}function gc(s){return Yl({type:"Polygon",coordinates:s})}function _c(s){return Yl({type:"MultiPolygon",coordinates:s})}function vc(s,a){let h=Jl(s),p=Jl(a),_=Ih(h.coordinates,p.coordinates);return _.length===0?null:_.length===1?gc(_[0]):_c(_)}function f(s,a){let h=Jl(s),p=Jl(a),_=Rh(h.coordinates,p.coordinates);return _.length===0?null:_.length===1?gc(_[0]):_c(_)}function v(s){return Array.isArray(s)?1+v(s[0]):-1}function S(s){s instanceof L.Polyline&&(s=s.toGeoJSON(15));let a=pc(s),h=v(a),p=[];return h>1?a.forEach(_=>{p.push(mc(_))}):p.push(s),p}function T(s){let a=[];return s.eachLayer(h=>{a.push(pc(h.toGeoJSON(15)))}),Xl(a)}gi.Cut=gi.Polygon.extend({initialize(s){this._map=s,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let s=this._layer.getLatLngs();if(s.length<=2)return;let a=L.polygon(s,this.options.pathOptions);a._latlngInfos=this._layer._latlngInfo,this.cut(a),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:p,originalLayer:_})=>{this._fireCut(_,p,_),this._fireCut(this._map,p,_),_.pm._fireEdit()}),this._editedLayers=[];let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))},cut(s){let a=this._map._layers,h=s._latlngInfos||[];Object.keys(a).map(p=>a[p]).filter(p=>p.pm).filter(p=>!p._pmTempLayer).filter(p=>!L.PM.optIn&&!p.options.pmIgnore||L.PM.optIn&&p.options.pmIgnore===!1).filter(p=>p instanceof L.Polyline).filter(p=>p!==s).filter(p=>p.pm.options.allowCutting).filter(p=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(p)>-1:!0).filter(p=>!this._layerGroup.hasLayer(p)).filter(p=>{try{let _=!!nr(s.toGeoJSON(15),p.toGeoJSON(15)).features.length>0;return _||p instanceof L.Polyline&&!(p instanceof L.Polygon)?_:!!vc(s.toGeoJSON(15),p.toGeoJSON(15))}catch{return p instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(p=>{let _;if(p instanceof L.Polygon){_=L.polygon(p.getLatLngs());let z=_.getLatLngs();h.forEach(Q=>{if(Q&&Q.snapInfo){let{latlng:Nt}=Q,Et=this._calcClosestLayer(Nt,[_]);if(Et&&Et.segment&&Et.distance<this.options.snapDistance){let{segment:Jt}=Et;if(Jt&&Jt.length===2){let{indexPath:he,parentPath:Pe,newIndex:Oe}=L.PM.Utils._getIndexFromSegment(z,Jt);(he.length>1?(0,ti.default)(z,Pe):z).splice(Oe,0,Nt)}}}})}else _=p;let k=this._cutLayer(s,_),M=L.geoJSON(k,p.options);M.getLayers().length===1&&([M]=M.getLayers()),this._setPane(M,"layerPane");let B=M.addTo(this._map.pm._getContainingLayer());if(B.pm.enable(p.pm.options),B.pm.disable(),p._pmTempLayer=!0,s._pmTempLayer=!0,p.remove(),p.removeFrom(this._map.pm._getContainingLayer()),s.remove(),s.removeFrom(this._map.pm._getContainingLayer()),B.getLayers&&B.getLayers().length===0&&this._map.pm.removeLayer({target:B}),B instanceof L.LayerGroup?(B.eachLayer(z=>{this._addDrawnLayerProp(z)}),this._addDrawnLayerProp(B)):this._addDrawnLayerProp(B),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let z=this.options.layersToCut.indexOf(p);z>-1&&this.options.layersToCut.splice(z,1)}this._editedLayers.push({layer:B,originalLayer:p})})},_cutLayer(s,a){let h=L.geoJSON(),p;if(a instanceof L.Polygon)p=f(a.toGeoJSON(15),s.toGeoJSON(15));else{let _=S(a);_.forEach(k=>{let M=ir(k,s.toGeoJSON(15)),B;M&&M.features.length>0?B=L.geoJSON(M):B=L.geoJSON(k),B.getLayers().forEach(z=>{io(s.toGeoJSON(15),z.toGeoJSON(15))||z.addTo(h)})}),_.length>1?p=T(h):p=h.toGeoJSON(15)}return p},_change:L.Util.falseFn}),gi.Text=gi.extend({initialize(s){this._map=s,this._shape="Text",this.toolbarButtonName="drawText"},enable(s){L.Util.setOptions(this,s),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(on("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var s;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(s=this._hintMarker)==null||s.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let a=s;a.target=this._hintMarker,this._handleSnapping(a)}},_createMarker(s){var _,k,M,B;if(!s.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(_=this.options.textOptions)==null?void 0:_.className){let z=this.options.textOptions.className.split(" ");this.textArea.classList.add(...z)}let h=this._createTextIcon(this.textArea),p=new L.Marker(a,{textMarker:!0,_textMarkerOverPM:!0,icon:h});if(this._setPane(p,"markerPane"),this._finishLayer(p),p.pm||(p.options.draggable=!1),p.addTo(this._map.pm._getContainingLayer()),p.pm){p.pm.textArea=this.textArea,L.setOptions(p.pm,{removeIfEmpty:((k=this.options.textOptions)==null?void 0:k.removeIfEmpty)??!0});let z=((M=this.options.textOptions)==null?void 0:M.focusAfterDraw)??!0;p.pm._createTextMarker(z),(B=this.options.textOptions)!=null&&B.text&&p.pm.setText(this.options.textOptions.text)}this._fireCreate(p),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(s){this.enable(),this._hintMarker.setLatLng(s.latlng)},_createTextArea(){let s=document.createElement("textarea");return s.readOnly=!0,s.classList.add("pm-textarea","pm-disabled"),s},_createTextIcon(s){return L.divIcon({className:"pm-text-marker",html:s})}});var W={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,ki(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let s=this._getDOMElem();s&&(ki(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(s)):L.DomEvent.on(s,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,ki(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let s=this._getDOMElem();s&&(ki(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(s)):L.DomEvent.off(s,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(s){let a=s.touches?s.touches[0]:s,h={originalEvent:a,target:this._layer};return h.containerPoint=this._map.mouseEventToContainerPoint(a),h.latlng=this._map.containerPointToLatLng(h.containerPoint),this._dragMixinOnMouseDown(h),!1},_simulateMouseMoveEvent(s){let a=s.touches?s.touches[0]:s,h={originalEvent:a,target:this._layer};return h.containerPoint=this._map.mouseEventToContainerPoint(a),h.latlng=this._map.containerPointToLatLng(h.containerPoint),this._dragMixinOnMouseMove(h),!1},_simulateMouseUpEvent(s){let a={originalEvent:s.touches?s.touches[0]:s,target:this._layer};return s.type.indexOf("touch")===-1&&(a.containerPoint=this._map.mouseEventToContainerPoint(s),a.latlng=this._map.containerPointToLatLng(a.containerPoint)),this._dragMixinOnMouseUp(a),!1},_dragMixinOnMouseDown(s){if(s.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(s);let a=s._fromLayerSync,h=this._syncLayers("_dragMixinOnMouseDown",s);if(this._layer instanceof L.Marker&&(this.options.snappable&&!a&&!h?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let p="resizeableCircleMarker";this._layer instanceof L.Circle&&(p="resizeableCircle"),this.options.snappable&&!a&&!h?this._layer.pm.options[p]||this._initSnappableMarkersDrag():this._layer.pm.options[p]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=s.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(s){this._overwriteEventIfItComesFromMarker(s);let a=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",s),this._dragging||(this._dragging=!0,L.DomUtil.addClass(a,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=s.latlng),this._onLayerDrag(s),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(s){let a=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",s),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,a&&L.DomUtil.removeClass(a,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(s){let{latlng:a}=s,h={lat:a.lat-this._tempDragCoord.lat,lng:a.lng-this._tempDragCoord.lng},p=_=>_.map(k=>{if(Array.isArray(k))return p(k);let M={lat:k.lat+h.lat,lng:k.lng+h.lng};return(k.alt||k.alt===0)&&(M.alt=k.alt),M});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let _=p([this._layer.getLatLng()]);this._layer.setLatLng(_[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let _=this._layer.getLatLng();this._layer._snapped&&(_=this._layer._orgLatLng);let k=p([_]);this._layer.setLatLng(k[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let _=p([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(_),this._fireChange(this._layer.getBounds(),"Edit")}else{let _=p(this._layer.getLatLngs());this._layer.setLatLngs(_),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=a,s.layer=this._layer,this._fireDrag(s)},addDraggingClass(){let s=this._getDOMElem();s&&L.DomUtil.addClass(s,"leaflet-pm-draggable")},removeDraggingClass(){let s=this._getDOMElem();s&&L.DomUtil.removeClass(s,"leaflet-pm-draggable")},_getDOMElem(){let s=null;return this._layer._path?s=this._layer._path:this._layer._renderer&&this._layer._renderer._container?s=this._layer._renderer._container:this._layer._image?s=this._layer._image:this._layer._icon&&(s=this._layer._icon),s},_overwriteEventIfItComesFromMarker(s){s.target.getLatLng&&(!s.target._radius||s.target._radius<=10)&&(s.containerPoint=this._map.mouseEventToContainerPoint(s.originalEvent),s.latlng=this._map.containerPointToLatLng(s.containerPoint))},_syncLayers(s,a){if(this.enabled())return!1;if(!a._fromLayerSync&&this._layer===a.target&&this.options.syncLayersOnDrag){a._fromLayerSync=!0;let h=[];if(L.Util.isArray(this.options.syncLayersOnDrag))h=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(p=>{p instanceof L.LayerGroup&&(h=h.concat(p.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let p in this._parentLayerGroup){let _=this._parentLayerGroup[p];_.pm&&(h=_.pm.getLayers(!0))}return L.Util.isArray(h)&&h.length>0&&(h=h.filter(p=>!!p.pm).filter(p=>!!p.pm.options.draggable),h.forEach(p=>{p!==this._layer&&p.pm[s]&&(p._snapped=!1,p.pm[s](a))})),h.length>0}return!1},_stopDOMImageDrag(s){return s.preventDefault(),!1}},st=W,at=m(br());function ft(s,a,h,p){return h.unproject(a.transform(h.project(s,p)),p)}function pt(s,a,h){let p=h.getMaxZoom();if(p===1/0&&(p=h.getZoom()),L.Util.isArray(s)){let _=[];return s.forEach(k=>{_.push(pt(k,a,h))}),_}return s instanceof L.LatLng?ft(s,a,h,p):null}function Pt(s,a){a instanceof L.Layer&&(a=a.getLatLng());let h=s.getMaxZoom();return h===1/0&&(h=s.getZoom()),s.project(a,h)}function Vt(s,a){let h=s.getMaxZoom();return h===1/0&&(h=s.getZoom()),s.unproject(a,h)}var pe={_onRotateStart(s){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Pt(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Pt(this._map,s.target.getLatLng()),this._initialRotateLatLng=Nr(this._layer),this._startAngle=this.getAngle();let a=Nr(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,a),this._fireRotationStart(this._map,a)},_onRotate(s){let a=Pt(this._map,s.target.getLatLng()),h=this._rotationStartPoint,p=this._rotationOriginPoint,_=Math.atan2(a.y-p.y,a.x-p.x)-Math.atan2(h.y-p.y,h.x-p.x);this._layer.setLatLngs(this._rotateLayer(_,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let k=this;function M(Nt,Et=[],Jt=-1){if(Jt>-1&&Et.push(Jt),L.Util.isArray(Nt[0]))Nt.forEach((he,Pe)=>M(he,Et.slice(),Pe));else{let he=Et.length>0?(0,at.default)(k._markers,Et):k._markers[0];Nt.forEach((Pe,Oe)=>{he[Oe].setLatLng(Pe)})}}M(this._layer.getLatLngs());let B=Nr(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(_,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let z=_*180/Math.PI;z=z<0?z+360:z;let Q=z+this._startAngle;this._setAngle(Q),this._rotationLayer.pm._setAngle(Q),this._fireRotation(this._rotationLayer,z,B),this._fireRotation(this._map,z,B),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let s=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let a=Nr(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Nr(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,s,a),this._fireRotationEnd(this._map,s,a),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(s,a,h,p,_){let k=Pt(_,h);return this._matrix=p.clone().rotate(s,k).flip(),pt(a,this._matrix,_)},_setAngle(s){s=s<0?s+360:s,this._angle=s%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let s=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),a=s.getCenter();return s.removeFrom(this._layer._map),a},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(gs(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let s={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),s),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Nr(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(s){let a=this.getAngle(),h=this._layer.getLatLngs(),p=s*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(p,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+s),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(p,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let _=this.getAngle()-a;_=_<0?_+360:_,this._startAngle=a,this._fireRotation(this._layer,_,h,this._layer),this._fireRotation(this._map||this._layer._map,_,h,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(s){let a=s-this.getAngle();this.rotateLayer(a)},getAngle(){return this._angle||0},setInitAngle(s){this._setAngle(s)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(s){this._rotationCenter=s,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(s)}},me=pe,ee=L.Class.extend({includes:[st,Eo,me,ko],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(s){L.Util.setOptions(this,s)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(s,a){a==="layerPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":a==="vertexPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":a==="markerPane"&&(s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(s,a){let h=a.target,p={layer:this._layer,marker:h,event:a},_="";return s==="move"?_="moveVertexValidation":s==="add"?_="addVertexValidation":s==="remove"&&(_="removeVertexValidation"),this.options[_]&&typeof this.options[_]=="function"&&!this.options[_](p)?(s==="move"&&(h._cancelDragEventChain=h.getLatLng()),!1):(h._cancelDragEventChain=null,!0)},_vertexValidationDrag(s){return s._cancelDragEventChain?(s._latlng=s._cancelDragEventChain,s.update(),!1):!0},_vertexValidationDragEnd(s){return s._cancelDragEventChain?(s._cancelDragEventChain=null,!1):!0}}),xe=ee;xe.LayerGroup=L.Class.extend({initialize(s){this._layerGroup=s,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(p=>this._initLayer(p));let a=p=>{if(p.layer._pmTempLayer)return;this._layers=this.getLayers();let _=this._layers.filter(k=>!k.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in k.pm._parentLayerGroup));_.forEach(k=>{this._initLayer(k)}),_.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(a,100,this),this),this._layerGroup.on("layerremove",p=>{this._removeLayerFromGroup(p.target)},this);let h=p=>{p.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(h,100,this),this)},enable(s,a=[]){a.length===0&&(this._layers=this.getLayers()),this._options=s,this._layers.forEach(h=>{h instanceof L.LayerGroup?a.indexOf(h._leaflet_id)===-1&&(a.push(h._leaflet_id),h.pm.enable(s,a)):h.pm.enable(s)})},disable(s=[]){s.length===0&&(this._layers=this.getLayers()),this._layers.forEach(a=>{a instanceof L.LayerGroup?s.indexOf(a._leaflet_id)===-1&&(s.push(a._leaflet_id),a.pm.disable(s)):a.pm.disable()})},enabled(s=[]){return s.length===0&&(this._layers=this.getLayers()),!!this._layers.find(a=>a instanceof L.LayerGroup?s.indexOf(a._leaflet_id)===-1?(s.push(a._leaflet_id),a.pm.enabled(s)):!1:a.pm.enabled())},toggleEdit(s,a=[]){a.length===0&&(this._layers=this.getLayers()),this._options=s,this._layers.forEach(h=>{h instanceof L.LayerGroup?a.indexOf(h._leaflet_id)===-1&&(a.push(h._leaflet_id),h.pm.toggleEdit(s,a)):h.pm.toggleEdit(s)})},_initLayer(s){let a=L.Util.stamp(this._layerGroup);s.pm._parentLayerGroup||(s.pm._parentLayerGroup={}),s.pm._parentLayerGroup[a]=this._layerGroup},_removeLayerFromGroup(s){if(s.pm&&s.pm._layerGroup){let a=L.Util.stamp(this._layerGroup);delete s.pm._layerGroup[a]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(s=>s.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var s;return this._map||((s=this._layers.find(a=>!!a._map))==null?void 0:s._map)||null},getLayers(s=!1,a=!0,h=!0,p=[]){let _=[];return s?this._layerGroup.getLayers().forEach(k=>{_.push(k),k instanceof L.LayerGroup&&p.indexOf(k._leaflet_id)===-1&&(p.push(k._leaflet_id),_=_.concat(k.pm.getLayers(!0,!0,!0,p)))}):_=this._layerGroup.getLayers(),h&&(_=_.filter(k=>!(k instanceof L.LayerGroup))),a&&(_=_.filter(k=>!!k.pm),_=_.filter(k=>!k._pmTempLayer),_=_.filter(k=>!L.PM.optIn&&!k.options.pmIgnore||L.PM.optIn&&k.options.pmIgnore===!1)),_},setOptions(s,a=[]){a.length===0&&(this._layers=this.getLayers()),this.options=s,this._layers.forEach(h=>{h.pm&&(h instanceof L.LayerGroup?a.indexOf(h._leaflet_id)===-1&&(a.push(h._leaflet_id),h.pm.setOptions(s,a)):h.pm.setOptions(s))})}}),xe.Marker=xe.extend({_shape:"Marker",initialize(s){this._layer=s,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(s={draggable:!0}){if(L.Util.setOptions(this,s),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(s){let a=s.target;a.remove(),this._fireRemove(a),this._fireRemove(this._map,a)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let s=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,s.off("pm:drag",this._handleSnapping,this),s.on("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.on("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this),s.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let s=this._layer;s.off("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this)}});var be=m(br()),Zt={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let s=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=s.filter((a,h,p)=>p.indexOf(a)===h)},_removeFromCache(s){let a=this.markerCache.indexOf(s);a>-1&&this.markerCache.splice(a,1)},renderLimits(s){this.markerCache.forEach(a=>{s.includes(a)?this._markerGroup.addLayer(a):this._markerGroup.removeLayer(a)})},applyLimitFilters({latlng:s={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let a=[...this._filterClosestMarkers(s)];this.renderLimits(a)},_filterClosestMarkers(s){let a=[...this.markerCache],h=this.options.limitMarkersToCount;return h===-1?a:(a.sort((p,_)=>{let k=p._latlng.distanceTo(s),M=_._latlng.distanceTo(s);return k-M}),a.filter((p,_)=>h>-1?_<h:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(s){this._preventRenderMarkers=!!s}},Xt=Zt;xe.Line=xe.extend({includes:[Xt],_shape:"Line",initialize(s){this._layer=s,this._enabled=!1},enable(s){if(L.Util.setOptions(this,s),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let s=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(s,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(s){return this.enabled()?this.disable():this.enable(s),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let s=this._map,a=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(s),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let h=p=>{if(Array.isArray(p[0]))return p.map(h,this);let _=p.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&p.map((k,M)=>{let B=this.isPolygon()?(M+1)%p.length:M+1;return this._createMiddleMarker(_[M],_[B])}),_};this._markers=h(a),this.filterMarkerGroup(),s.addLayer(this._markerGroup)},_createMarker(s){let a=new L.Marker(s,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(a,"vertexPane"),a._pmTempLayer=!0,this.options.rotate?(a.on("dragstart",this._onRotateStart,this),a.on("drag",this._onRotate,this),a.on("dragend",this._onRotateEnd,this)):(a.on("click",this._onVertexClick,this),a.on("dragstart",this._onMarkerDragStart,this),a.on("move",this._onMarkerDrag,this),a.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||a.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(a),a},_createMiddleMarker(s,a){if(!s||!a)return!1;let h=L.PM.Utils.calcMiddleLatLng(this._map,s.getLatLng(),a.getLatLng()),p=this._createMarker(h),_=L.divIcon({className:"marker-icon marker-icon-middle"});return p.setIcon(_),p.leftM=s,p.rightM=a,s._middleMarkerNext=p,a._middleMarkerPrev=p,p.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),p.on("movestart",this._onMiddleMarkerMoveStart,this),p},_onMiddleMarkerClick(s){let a=s.target;if(!this._vertexValidation("add",s))return;let h=L.divIcon({className:"marker-icon"});a.setIcon(h),this._addMarker(a,a.leftM,a.rightM)},_onMiddleMarkerMoveStart(s){let a=s.target;if(a.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",s)){a.on("move",this._onMiddleMarkerMovePrevent,this);return}a._dragging=!0,this._addMarker(a,a.leftM,a.rightM)},_onMiddleMarkerMovePrevent(s){let a=s.target;this._vertexValidationDrag(a)},_onMiddleMarkerMoveEnd(s){let a=s.target;if(a.off("move",this._onMiddleMarkerMovePrevent,this),a.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(a))return;let h=L.divIcon({className:"marker-icon"});a.setIcon(h),setTimeout(()=>{delete a._dragging},100)},_addMarker(s,a,h){s.off("movestart",this._onMiddleMarkerMoveStart,this),s.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let p=s.getLatLng(),_=this._layer._latlngs;delete s.leftM,delete s.rightM;let{indexPath:k,index:M,parentPath:B}=L.PM.Utils.findDeepMarkerIndex(this._markers,a),z=k.length>1?(0,be.default)(_,B):_,Q=k.length>1?(0,be.default)(this._markers,B):this._markers;z.splice(M+1,0,p),Q.splice(M+1,0,s),this._layer.setLatLngs(_),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(a,s),this._createMiddleMarker(s,h)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(s,L.PM.Utils.findDeepMarkerIndex(this._markers,s).indexPath,p),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return Tn(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(s){let a=this._layer,h,p;if(this.options.allowSelfIntersection?h=!1:(p=Tn(this._layer.toGeoJSON(15)),h=p.features.length>0),h){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return h;s?this._flashLayer():(a.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(p)}else a.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return h},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(s,a){s.forEach(h=>{Array.isArray(h)?this._updateDisabledMarkerStyle(h,a):h._icon&&(a&&!this._checkMarkerAllowedToDrag(h)?L.DomUtil.addClass(h._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(h._icon,"vertexmarker-disabled"))})},_removeMarker(s){let a=s.target;if(!this._vertexValidation("remove",s))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=Nr(this._layer,this._layer.getLatLngs()));let h=this._layer.getLatLngs(),{indexPath:p,index:_,parentPath:k}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);if(!p)return;let M=p.length>1?(0,be.default)(h,k):h,B=p.length>1?(0,be.default)(this._markers,k):this._markers,z=k[k.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!z&&(M.length<=2||this.isPolygon()&&M.length<=3)){this._flashLayer();return}M.splice(_,1),this._layer.setLatLngs(h),this.isPolygon()&&M.length<=2&&M.splice(0,M.length);let Q=!1;if(M.length<=1&&(M.splice(0,M.length),k.length>1&&p.length>1&&(h=Po(h)),this._layer.setLatLngs(h),this._initMarkers(),Q=!0),Qi(h)||this._layer.remove(),h=Po(h),this._layer.setLatLngs(h),this._markers=Po(this._markers),!Q&&(B=p.length>1?(0,be.default)(this._markers,k):this._markers,a._middleMarkerPrev&&(this._markerGroup.removeLayer(a._middleMarkerPrev),this._removeFromCache(a._middleMarkerPrev)),a._middleMarkerNext&&(this._markerGroup.removeLayer(a._middleMarkerNext),this._removeFromCache(a._middleMarkerNext)),this._markerGroup.removeLayer(a),this._removeFromCache(a),B)){let Nt,Et;if(this.isPolygon()?(Nt=(_+1)%B.length,Et=(_+(B.length-1))%B.length):(Et=_-1<0?void 0:_-1,Nt=_+1>=B.length?void 0:_+1),Nt!==Et){let Jt=B[Et],he=B[Nt];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(Jt,he)}B.splice(_,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(a,p),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(s){let a=this._layer.getLatLngs(),h=s.getLatLng(),{indexPath:p,index:_,parentPath:k}=L.PM.Utils.findDeepMarkerIndex(this._markers,s);(p.length>1?(0,be.default)(a,k):a).splice(_,1,h),this._layer.setLatLngs(a)},_getNeighborMarkers(s){let{indexPath:a,index:h,parentPath:p}=L.PM.Utils.findDeepMarkerIndex(this._markers,s),_=a.length>1?(0,be.default)(this._markers,p):this._markers,k=(h+1)%_.length,M=(h+(_.length-1))%_.length,B=_[M],z=_[k];return{prevMarker:B,nextMarker:z}},_checkMarkerAllowedToDrag(s){let{prevMarker:a,nextMarker:h}=this._getNeighborMarkers(s),p=L.polyline([a.getLatLng(),s.getLatLng()]),_=L.polyline([s.getLatLng(),h.getLatLng()]),k=nr(this._layer.toGeoJSON(15),p.toGeoJSON(15)).features.length,M=nr(this._layer.toGeoJSON(15),_.toGeoJSON(15)).features.length;return s.getLatLng()===this._markers[0][0].getLatLng()?M+=1:s.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(k+=1),!(k<=2&&M<=2)},_onMarkerDragStart(s){let a=s.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",s))return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);this._fireMarkerDragStart(s,h),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Nr(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(a):this._markerAllowedToDrag=null},_onMarkerDrag(s){let a=s.target;if(!this._vertexValidationDrag(a))return;let{indexPath:h,index:p,parentPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);if(!h)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(a);let k=h.length>1?(0,be.default)(this._markers,_):this._markers,M=(p+1)%k.length,B=(p+(k.length-1))%k.length,z=a.getLatLng(),Q=k[B].getLatLng(),Nt=k[M].getLatLng();if(a._middleMarkerNext){let Et=L.PM.Utils.calcMiddleLatLng(this._map,z,Nt);a._middleMarkerNext.setLatLng(Et)}if(a._middleMarkerPrev){let Et=L.PM.Utils.calcMiddleLatLng(this._map,z,Q);a._middleMarkerPrev.setLatLng(Et)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(s,h),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(s){let a=s.target;if(!this._vertexValidationDragEnd(a))return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,a),p=!this.options.allowSelfIntersection&&this.hasSelfIntersection();p&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(p=!1);let _=!this.options.allowSelfIntersection&&p;if(this._fireMarkerDragEnd(s,h,_),_){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(s,h);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(s){let a=s.target;if(a._dragging)return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);this._fireVertexClick(s,h)}}),xe.Polygon=xe.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(s){let{prevMarker:a,nextMarker:h}=this._getNeighborMarkers(s),p=L.polyline([a.getLatLng(),s.getLatLng()]),_=L.polyline([s.getLatLng(),h.getLatLng()]),k=nr(this._layer.toGeoJSON(15),p.toGeoJSON(15)).features.length,M=nr(this._layer.toGeoJSON(15),_.toGeoJSON(15)).features.length;return!(k<=2&&M<=2)}}),xe.Rectangle=xe.Polygon.extend({_shape:"Rectangle",_initMarkers(){let s=this._map,a=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,s.addLayer(this._markerGroup),this._markers=[],this._markers[0]=a.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((h,p)=>{let _=this._cornerMarkers.find(k=>k._index===p);_&&_.setLatLng(h)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(s,a){let h=new L.Marker(s,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._origLatLng=s,h._index=a,h._pmTempLayer=!0,h.on("click",this._onVertexClick,this),this._markerGroup.addLayer(h),h},_addMarkerEvents(){this._markers[0].forEach(s=>{s.on("dragstart",this._onMarkerDragStart,this),s.on("drag",this._onMarkerDrag,this),s.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||s.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(s){if(!this._vertexValidation("move",s))return;let a=s.target,h=this._cornerMarkers;a._oppositeCornerLatLng=h.find(_=>_._index===(a._index+2)%4).getLatLng(),a._snapped=!1;let{indexPath:p}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);this._fireMarkerDragStart(s,p)},_onMarkerDrag(s){let a=s.target;if(!this._vertexValidationDrag(a)||a._index===void 0)return;this._adjustRectangleForMarkerMove(a);let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);this._fireMarkerDrag(s,h),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(s){let a=s.target;if(!this._vertexValidationDragEnd(a))return;this._cornerMarkers.forEach(p=>{delete p._oppositeCornerLatLng});let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);this._fireMarkerDragEnd(s,h),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(s){L.extend(s._origLatLng,s._latlng);let a=L.PM.Utils._getRotatedRectangle(s.getLatLng(),s._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(a),this._adjustAllMarkers(s),this._layer.redraw()},_adjustAllMarkers(s){let a=this._layer.getLatLngs()[0];if(a&&a.length!==4&&a.length>0)a.forEach((h,p)=>{this._cornerMarkers[p].setLatLng(h)}),this._cornerMarkers.slice(a.length).forEach(h=>{h.setLatLng(a[0])});else if(!a||!a.length)console.error("The layer has no LatLngs");else{let h=a.findIndex(p=>s.getLatLng().equals(p));h>-1?(this._cornerMarkers[(s._index+1)%4].setLatLng(a[(h+1)%4]),this._cornerMarkers[(s._index+2)%4].setLatLng(a[(h+2)%4]),this._cornerMarkers[(s._index+3)%4].setLatLng(a[(h+3)%4])):this._cornerMarkers.forEach(p=>{p.setLatLng(a[p._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(gs(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let s=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(s[0],s[2],this.getAngle(),this._map||this)}}),xe.CircleMarker=xe.extend({_shape:"CircleMarker",initialize(s){this._layer=s,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(s={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,s),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let s=this._map;this._helperLayers&&(this._helperLayers.removeFrom(s),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(s);let a=this._layer.getLatLng(),h=this._layer._radius,p=this._getLatLngOnCircle(a,h);this._centerMarker=this._createCenterMarker(a),this._outerMarker=this._createOuterMarker(p),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(s,a){let h=this._map.project(s),p=L.point(h.x+a,h.y);return this._map.unproject(p)},_createHintLine(s,a){let h=s.getLatLng(),p=a.getLatLng();this._hintline=L.polyline([h,p],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(s){let a=this._createMarker(s);return this.options.draggable?(L.DomUtil.addClass(a._icon,"leaflet-pm-draggable"),a.on("move",this._moveCircle,this)):a.dragging.disable(),a},_createOuterMarker(s){let a=this._createMarker(s);return a.on("drag",this._resizeCircle,this),a},_createMarker(s){let a=new L.Marker(s,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(a,"vertexPane"),a._origLatLng=s,a._pmTempLayer=!0,a.on("dragstart",this._onMarkerDragStart,this),a.on("drag",this._onMarkerDrag,this),a.on("dragend",this._onMarkerDragEnd,this),a.on("click",this._onVertexClick,this),this._helperLayers.addLayer(a),a},_moveCircle(s){if(s.target._cancelDragEventChain)return;let a=this._centerMarker.getLatLng();this._layer.setLatLng(a);let h=this._layer._radius,p=this._getLatLngOnCircle(a,h);this._outerMarker._latlng=p,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let s=this._layer.getLatLng(),a=this._layer._radius,h=this._getLatLngOnCircle(s,a);this._outerMarker.setLatLng(h),this._centerMarker.setLatLng(s),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let s=this._centerMarker.getLatLng(),a=this._outerMarker.getLatLng(),h=this._distanceCalculation(s,a);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(h),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let s=this._centerMarker.getLatLng(),a=this._outerMarker.getLatLng();this._hintline.setLatLngs([s,a])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(s){this._vertexValidation("move",s)&&this._fireMarkerDragStart(s)},_onMarkerDrag(s){let a=s.target;a instanceof L.Marker&&!this._vertexValidationDrag(a)||this._fireMarkerDrag(s)},_onMarkerDragEnd(s){this._extedingMarkerDragEnd();let a=s.target;this._vertexValidationDragEnd(a)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(s))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let s=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,s.off("pm:drag",this._handleSnapping,this),s.on("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.on("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this),s.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let s=this._layer;s.off("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let s=this._layer._map||this._map;if(s){let a=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),s,this._layer.getLatLng()),h=L.circle(this._layer.getLatLng(),this._layer.options);h.setRadius(a);let p=s&&s.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(h,200,!p).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(h,200,!p),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let s=this._centerMarker.getLatLng(),a=this._outerMarker.getLatLng(),h=this._distanceCalculation(s,a);return this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?a=Ko(this._map,s,a,this._getMinDistanceInMeter(s)):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(a=Ko(this._map,s,a,this._getMaxDistanceInMeter(s))),a},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let s=this._centerMarker.getLatLng(),a=this._outerMarker.getLatLng(),h=this._distanceCalculation(s,a);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(s,a){return this._map.project(s).distanceTo(this._map.project(a))},_getMinDistanceInMeter(s){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,s)},_getMaxDistanceInMeter(s){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,s)},_onVertexClick(s){s.target._dragging||this._fireVertexClick(s,void 0)}}),xe.Circle=xe.CircleMarker.extend({_shape:"Circle",initialize(s){this._layer=s,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(s){L.PM.Edit.CircleMarker.prototype.enable.call(this,s||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let s=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(s,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let s=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!s).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!s),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(s,a){return this._map.distance(s,a)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(s){s.target._dragging||this._fireVertexClick(s,void 0)}}),xe.ImageOverlay=xe.extend({_shape:"ImageOverlay",initialize(s){this._layer=s,this._enabled=!1},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},enabled(){return this._enabled},enable(s={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,s),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let s=this._layer.getBounds(),a=s.getNorthWest(),h=s.getNorthEast(),p=s.getSouthEast(),_=s.getSouthWest();return[a,h,p,_]}}),xe.Text=xe.extend({_shape:"Text",initialize(s){this._layer=s,this._enabled=!1},enable(s){if(L.Util.setOptions(this,s),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let s=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),s.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let s=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,s.off("pm:drag",this._handleSnapping,this),s.on("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.on("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this),s.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let s=this._layer;s.off("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let s=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,a=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${s}px`,this.textArea.style.width=`${a}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(s){s.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(s={}){let a=this._hasFocus;this._hasFocus=s.type==="focus",!a!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(s){s&&(this.textArea.value=s),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let a=this.options.className.split(" ");this.textArea.classList.add(...a)}let s=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(s),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(s=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),s===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(s){s.preventDefault()}});var ke=function(s,a,h,p,_,k){this._matrix=[s,a,h,p,_,k]};ke.init=()=>new L.PM.Matrix(1,0,0,1,0,0),ke.prototype={transform(s){return this._transform(s.clone())},_transform(s){let a=this._matrix,{x:h,y:p}=s;return s.x=a[0]*h+a[1]*p+a[4],s.y=a[2]*h+a[3]*p+a[5],s},untransform(s){let a=this._matrix;return new L.Point((s.x/a[0]-a[4])/a[0],(s.y/a[2]-a[5])/a[2])},clone(){let s=this._matrix;return new L.PM.Matrix(s[0],s[1],s[2],s[3],s[4],s[5])},translate(s){if(s===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let a,h;return typeof s=="number"?(a=s,h=s):(a=s.x,h=s.y),this._add(1,0,0,1,a,h)},scale(s,a){if(s===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let h,p;return a=a||L.point(0,0),typeof s=="number"?(h=s,p=s):(h=s.x,p=s.y),this._add(h,0,0,p,a.x,a.y)._add(1,0,0,1,-a.x,-a.y)},rotate(s,a){let h=Math.cos(s),p=Math.sin(s);return a=a||new L.Point(0,0),this._add(h,p,-p,h,a.x,a.y)._add(1,0,0,1,-a.x,-a.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(s,a,h,p,_,k){let M=[[],[],[]],B=this._matrix,z=[[B[0],B[2],B[4]],[B[1],B[3],B[5]],[0,0,1]],Q=[[s,h,_],[a,p,k],[0,0,1]],Nt;s&&s instanceof L.PM.Matrix&&(B=s._matrix,Q=[[B[0],B[2],B[4]],[B[1],B[3],B[5]],[0,0,1]]);for(let Et=0;Et<3;Et+=1)for(let Jt=0;Jt<3;Jt+=1){Nt=0;for(let he=0;he<3;he+=1)Nt+=z[Et][he]*Q[he][Jt];M[Et][Jt]=Nt}return this._matrix=[M[0][0],M[1][0],M[0][1],M[1][1],M[0][2],M[1][2]],this}};var Ae=ke,Se={calcMiddleLatLng(s,a,h){let p=s.project(a),_=s.project(h);return s.unproject(p._add(_)._divideBy(2))},findLayers(s){let a=[];return s.eachLayer(h=>{(h instanceof L.Polyline||h instanceof L.Marker||h instanceof L.Circle||h instanceof L.CircleMarker||h instanceof L.ImageOverlay)&&a.push(h)}),a=a.filter(h=>!!h.pm),a=a.filter(h=>!h._pmTempLayer),a=a.filter(h=>!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1),a},circleToPolygon(s,a=60,h=!0){let p=s.getLatLng(),_=s.getRadius(),k=ur(p,_,a,0,h),M=[];for(let B=0;B<k.length;B+=1){let z=[k[B].lat,k[B].lng];M.push(z)}return L.polygon(M,s.options)},disablePopup(s){s.getPopup()&&(s._tempPopupCopy=s.getPopup(),s.unbindPopup())},enablePopup(s){s._tempPopupCopy&&(s.bindPopup(s._tempPopupCopy),delete s._tempPopupCopy)},_fireEvent(s,a,h,p=!1){s.fire(a,h,p);let{groups:_}=this.getAllParentGroups(s);_.forEach(k=>{k.fire(a,h,p)})},getAllParentGroups(s){let a=[],h=[],p=_=>{for(let k in _._eventParents)if(a.indexOf(k)===-1){a.push(k);let M=_._eventParents[k];h.push(M),p(M)}};return!s._pmLastGroupFetch||!s._pmLastGroupFetch.time||new Date().getTime()-s._pmLastGroupFetch.time>1e3?(p(s),s._pmLastGroupFetch={time:new Date().getTime(),groups:h,groupIds:a},{groupIds:a,groups:h}):{groups:s._pmLastGroupFetch.groups,groupIds:s._pmLastGroupFetch.groupIds}},createGeodesicPolygon:ur,getTranslation:on,findDeepCoordIndex(s,a,h=!0){let p,_=M=>(B,z)=>{let Q=M.concat(z);if(h){if(B.lat&&B.lat===a.lat&&B.lng===a.lng)return p=Q,!0}else if(B.lat&&L.latLng(B).equals(a))return p=Q,!0;return Array.isArray(B)&&B.some(_(Q))};s.some(_([]));let k={};return p&&(k={indexPath:p,index:p[p.length-1],parentPath:p.slice(0,p.length-1)}),k},findDeepMarkerIndex(s,a){let h,p=k=>(M,B)=>{let z=k.concat(B);return M._leaflet_id===a._leaflet_id?(h=z,!0):Array.isArray(M)&&M.some(p(z))};s.some(p([]));let _={};return h&&(_={indexPath:h,index:h[h.length-1],parentPath:h.slice(0,h.length-1)}),_},_getIndexFromSegment(s,a){if(a&&a.length===2){let h=this.findDeepCoordIndex(s,a[0]),p=this.findDeepCoordIndex(s,a[1]),_=Math.max(h.index,p.index);return(h.index===0||p.index===0)&&_!==1&&(_+=1),{indexA:h,indexB:p,newIndex:_,indexPath:h.indexPath,parentPath:h.parentPath}}return null},_getRotatedRectangle(s,a,h,p){let _=Pt(p,s),k=Pt(p,a),M=h*Math.PI/180,B=Math.cos(M),z=Math.sin(M),Q=(k.x-_.x)*B+(k.y-_.y)*z,Nt=(k.y-_.y)*B-(k.x-_.x)*z,Et=Q*B+_.x,Jt=Q*z+_.y,he=-Nt*z+_.x,Pe=Nt*B+_.y,Oe=Vt(p,_),Fe=Vt(p,{x:Et,y:Jt}),dn=Vt(p,k),Tt=Vt(p,{x:he,y:Pe});return[Oe,Fe,dn,Tt]},pxRadiusToMeterRadius(s,a,h){let p=a.project(h),_=L.point(p.x+s,p.y);return a.distance(a.unproject(_),h)}},Ke=Se;L.PM=L.PM||{version:wo.version,Map:So,Toolbar:La,Draw:gi,Edit:xe,Utils:Ke,Matrix:Ae,activeLang:"en",optIn:!1,initialize(s){this.addInitHooks(s)},setOptIn(s){this.optIn=!!s},addInitHooks(){function s(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(s);function a(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(a);function h(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(h);function p(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(p);function _(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(_);function k(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(k);function M(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(M);function B(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(B);function z(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(z)},reInitLayer(s){s instanceof L.LayerGroup&&s.eachLayer(a=>{this.reInitLayer(a)}),s.pm||L.PM.optIn&&s.options.pmIgnore!==!1||s.options.pmIgnore||(s instanceof L.Map?s.pm=new L.PM.Map(s):s instanceof L.Marker?s.options.textMarker?(s.pm=new L.PM.Edit.Text(s),s.pm._initTextMarker(),s.pm._createTextMarker(!1)):s.pm=new L.PM.Edit.Marker(s):s instanceof L.Circle?s.pm=new L.PM.Edit.Circle(s):s instanceof L.CircleMarker?s.pm=new L.PM.Edit.CircleMarker(s):s instanceof L.Rectangle?s.pm=new L.PM.Edit.Rectangle(s):s instanceof L.Polygon?s.pm=new L.PM.Edit.Polygon(s):s instanceof L.Polyline?s.pm=new L.PM.Edit.Line(s):s instanceof L.LayerGroup?s.pm=new L.PM.Edit.LayerGroup(s):s instanceof L.ImageOverlay&&(s.pm=new L.PM.Edit.ImageOverlay(s)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(s){let a=this._map.mouseEventToLayerPoint(s),h,p;for(let _=this._drawFirst;_;_=_.next)h=_.layer,h.options.interactive&&h._containsPoint(a)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(h))&&(p=h);p&&(L.DomEvent.fakeStop(s),this._fireEvent([p],s))}}),L.PM.initialize()})();class Ml extends ze.Polygon{constructor(n,r,o=0,l=180,c={}){super([[]],{...c,pmIgnore:!1,interactive:!0,className:"leaflet-semicircle"});Xe(this,"center");Xe(this,"radius");Xe(this,"startAngle");Xe(this,"stopAngle");Xe(this,"numPoints");Xe(this,"properties");Xe(this,"pm");Xe(this,"getRadius",()=>this.radius);Xe(this,"getStartAngle",()=>this.startAngle);Xe(this,"getStopAngle",()=>this.stopAngle);this.center=n,this.radius=r,this.startAngle=this.normalizeAngle(o),this.stopAngle=this.normalizeAngle(l),this.numPoints=64,this.properties={type:"Semicircle",radius:this.radius,startAngle:this.startAngle,stopAngle:this.stopAngle,style:{...c,startAngle:this.startAngle,stopAngle:this.stopAngle}},this.on("pm:enable",()=>{var d;this.pm&&(this.pm._layers=[],this.pm._markers=[],(d=this.pm._markerGroup)==null||d.clearLayers())}),this.on("pm:vertexadded",()=>{var d;this.pm&&((d=this.pm._markerGroup)==null||d.clearLayers())}),this.on("add",()=>{this._map&&(this.updateGeometry(),this.pm&&this.pm.enable({allowSelfIntersection:!1,preventMarkerRemoval:!0}))})}normalizeAngle(n){return(n%360+360)%360}calculateArcPoints(){if(!this._map)return[];const n=[],r=(this.stopAngle-this.startAngle+360)%360;n.push(this.center);for(let o=0;o<=this.numPoints;o++){const c=(this.startAngle+r*o/this.numPoints)*Math.PI/180,d=this.radius*Math.cos(c),y=this.radius*Math.sin(c)/111319.9,b=d/(111319.9*Math.cos(this.center.lat*Math.PI/180)),w=ze.latLng(this.center.lat+y,this.center.lng+b);n.push(w)}return n.push(this.center),n}setRadius(n){return n<=0?this:(this.radius=n,this.properties.radius=n,this.updateGeometry(),this)}setAngles(n,r){const o=this.normalizeAngle(n),l=this.normalizeAngle(r),c=this.getOpeningAngle();let d=(l-o+360)%360;const m=45;return Math.abs(d-c)>m&&(d>c?d=c+m:d=c-m),d=Math.max(0,Math.min(360,d)),this.startAngle=o,this.stopAngle=(o+d)%360,this.properties.startAngle=this.startAngle,this.properties.stopAngle=this.stopAngle,this.properties.style.startAngle=this.startAngle,this.properties.style.stopAngle=this.stopAngle,this.updateGeometry(),this}setOpeningAngle(n){return n<0||n>360?this:(this.stopAngle=this.normalizeAngle(this.startAngle+n),this.updateGeometry(),this)}setCenter(n){return!n.lat||!n.lng?this:(this.center=n,this.updateGeometry(),this)}getCenter(){return this.center}getOpeningAngle(){return(this.stopAngle-this.startAngle+360)%360}updateGeometry(){if(!this._map)return;const n=this.calculateArcPoints();n.length>0&&this.setLatLngs([n])}toGeoJSON(){const n=super.toGeoJSON();return{...n,properties:{...n.properties,type:"Semicircle",radius:this.radius,startAngle:this.startAngle,stopAngle:this.stopAngle}}}}/**
* Drag/rotate/resize handler for [leaflet](http://leafletjs.com) vector features.
*
* @author Alexander Milevski <info@w8r.name>
* @license MIT
* @preserve
*/Ie.SVG.include({_resetTransformPath:function(t){t._path.setAttributeNS(null,"transform","")},transformPath:function(t,e){t._path.setAttributeNS(null,"transform","matrix("+e.join(" ")+")")}});Ie.SVG.include(Ie.Browser.vml?{_resetTransformPath:function(t){t._skew&&(t._skew.on=!1,t._path.removeChild(t._skew),t._skew=null)},transformPath:function(t,e){let n=t._skew;n||(n=Ie.SVG.create("skew"),t._path.appendChild(n),n.style.behavior="url(#default#VML)",t._skew=n);const r=e[0].toFixed(8)+" "+e[1].toFixed(8)+" "+e[2].toFixed(8)+" "+e[3].toFixed(8)+" 0 0",o=Math.floor(e[4]).toFixed()+", "+Math.floor(e[5]).toFixed(),l=this._path.style;let c=parseFloat(l.left),d=parseFloat(l.top),m=parseFloat(l.width),y=parseFloat(l.height);isNaN(c)&&(c=0),isNaN(d)&&(d=0),(isNaN(m)||!m)&&(m=1),(isNaN(y)||!y)&&(y=1);const b=(-c/m-.5).toFixed(8)+" "+(-d/y-.5).toFixed(8);n.on="f",n.matrix=r,n.origin=b,n.offset=o,n.on=!0}}:{});function ww(){return!0}Ie.Canvas.include({_resetTransformPath:function(t){this._containerCopy&&(delete this._containerCopy,t._containsPoint_&&(t._containsPoint=t._containsPoint_,delete t._containsPoint_,this._requestRedraw(t)))},transformPath:function(t,e){let n=this._containerCopy;const r=this._ctx;let o;const l=Ie.Browser.retina?2:1,c=this._bounds,d=c.getSize(),m=c.min;n||(n=this._containerCopy=document.createElement("canvas"),o=n.getContext("2d"),n.width=l*d.x,n.height=l*d.y,this._removePath(t),this._redraw(),o.translate(l*c.min.x,l*c.min.y),o.drawImage(this._container,0,0),this._initPath(t),t._containsPoint_=t._containsPoint,t._containsPoint=ww),r.save(),r.clearRect(m.x,m.y,d.x*l,d.y*l),r.setTransform(1,0,0,1,0,0),r.restore(),r.save(),r.drawImage(this._containerCopy,0,0,d.x,d.y),r.transform.apply(r,e),this._drawing=!0,t._updatePath(),this._drawing=!1,r.restore()}});/**
 * Leaflet vector features drag functionality
 * @author Alexander Milevski <info@w8r.name>
 * @preserve
 */Ie.Path.include({_transform:function(t){return this._renderer&&(t?this._renderer.transformPath(this,t):(this._renderer._resetTransformPath(this),this._update())),this},_onMouseClick:function(t){this.dragging&&this.dragging.moved()||this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(t)}});const xw={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},Lw={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"};function Cw(t,e){const n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}Ie.Handler.PathDrag=Ie.Handler.extend({statics:{DRAGGING_CLS:"leaflet-path-draggable"},initialize:function(t){this._path=t,this._matrix=null,this._startPoint=null,this._dragStartPoint=null,this._mapDraggingWasEnabled=!1,this._path._dragMoved=!1},addHooks:function(){this._path.on("mousedown",this._onDragStart,this),this._path.options.className=this._path.options.className?this._path.options.className+" "+Ie.Handler.PathDrag.DRAGGING_CLS:Ie.Handler.PathDrag.DRAGGING_CLS,this._path._path&&Ie.DomUtil.addClass(this._path._path,Ie.Handler.PathDrag.DRAGGING_CLS)},removeHooks:function(){this._path.off("mousedown",this._onDragStart,this),this._path.options.className=this._path.options.className.replace(new RegExp("\\s+"+Ie.Handler.PathDrag.DRAGGING_CLS),""),this._path._path&&Ie.DomUtil.removeClass(this._path._path,Ie.Handler.PathDrag.DRAGGING_CLS)},moved:function(){return this._path._dragMoved},_onDragStart:function(t){const e=t.originalEvent._simulated?"touchstart":t.originalEvent.type;this._mapDraggingWasEnabled=!1,this._startPoint=t.containerPoint.clone(),this._dragStartPoint=t.containerPoint.clone(),this._matrix=[1,0,0,1,0,0],Ie.DomEvent.stop(t.originalEvent),Ie.DomUtil.addClass(this._path._renderer._container,"leaflet-interactive"),Ie.DomEvent.on(document,Lw[e],this._onDrag,this).on(document,xw[e],this._onDragEnd,this),this._path._map.dragging.enabled()&&(this._path._map.dragging.disable(),this._mapDraggingWasEnabled=!0),this._path._dragMoved=!1,this._path._popup&&this._path._popup.close(),this._replaceCoordGetters(t)},_onDrag:function(t){Ie.DomEvent.stop(t);const e=t.touches&&t.touches.length>=1?t.touches[0]:t,n=this._path._map.mouseEventToContainerPoint(e);if(t.type==="touchmove"&&!this._path._dragMoved&&this._dragStartPoint.distanceTo(n)<=this._path._map.options.tapTolerance)return;const r=n.x,o=n.y,l=r-this._startPoint.x,c=o-this._startPoint.y;(l||c)&&(this._path._dragMoved||(this._path._dragMoved=!0,this._path.options.interactive=!1,this._path._map.dragging._draggable._moved=!0,this._path.fire("dragstart",t),this._path.bringToFront()),this._matrix[4]+=l,this._matrix[5]+=c,this._startPoint.x=r,this._startPoint.y=o,this._path.fire("predrag",t),this._path._transform(this._matrix),this._path.fire("drag",t))},_onDragEnd:function(t){const e=this._path._map.mouseEventToContainerPoint(t),n=this.moved();if(n&&(this._transformPoints(this._matrix),this._path._updatePath(),this._path._project(),this._path._transform(null),Ie.DomEvent.stop(t)),Ie.DomEvent.off(document,"mousemove touchmove",this._onDrag,this),Ie.DomEvent.off(document,"mouseup touchend",this._onDragEnd,this),this._restoreCoordGetters(),n){this._path.fire("dragend",{distance:Cw(this._dragStartPoint,e)});const r=this._path._containsPoint;this._path._containsPoint=Ie.Util.falseFn,Ie.Util.requestAnimFrame(function(){this._path._dragMoved=!1,this._path.options.interactive=!0,this._path._containsPoint=r},this)}this._mapDraggingWasEnabled&&this._path._map.dragging.enable()},_transformPoints:function(t,e){const n=this._path,r=L.point(t[4],t[5]),o=n._map.options.crs,l=o.transformation,c=o.scale(n._map.getZoom()),d=o.projection,m=l.untransform(r,c).subtract(l.untransform(Ie.point(0,0),c)),y=!e;if(n._bounds=new Ie.LatLngBounds,n._point)e=d.unproject(d.project(n._latlng)._add(m)),y&&(n._latlng=e,n._point._add(r));else if(n._rings||n._parts){const b=n._rings||n._parts;let w=n._latlngs;e=e||w,Ie.Util.isArray(w[0])||(w=[w],e=[e]);for(let E=0,C=b.length;E<C;E++){e[E]=e[E]||[];for(let R=0,O=b[E].length;R<O;R++){const q=w[E][R];e[E][R]=d.unproject(d.project(q)._add(m)),y&&(n._bounds.extend(w[E][R]),b[E][R]._add(r))}}}return e},_replaceCoordGetters:function(){this._path.getLatLng?(this._path.getLatLng_=this._path.getLatLng,this._path.getLatLng=Ie.Util.bind(function(){return this.dragging._transformPoints(this.dragging._matrix,{})},this._path)):this._path.getLatLngs&&(this._path.getLatLngs_=this._path.getLatLngs,this._path.getLatLngs=Ie.Util.bind(function(){return this.dragging._transformPoints(this.dragging._matrix,[])},this._path))},_restoreCoordGetters:function(){this._path.getLatLng_?(this._path.getLatLng=this._path.getLatLng_,delete this._path.getLatLng_):this._path.getLatLngs_&&(this._path.getLatLngs=this._path.getLatLngs_,delete this._path.getLatLngs_)}});Ie.Handler.PathDrag.makeDraggable=function(t){return t.dragging=new Ie.Handler.PathDrag(t),t};Ie.Path.prototype.makeDraggable=function(){return Ie.Handler.PathDrag.makeDraggable(this)};Ie.Path.addInitHook(function(){this.options.draggable?(this.options.interactive=!0,this.dragging?this.dragging.enable():(Ie.Handler.PathDrag.makeDraggable(this),this.dragging.enable())):this.dragging&&this.dragging.disable()});const kw=Ie.Handler.PathDrag,Pw=(t,e,n)=>{var r=1+n/t.distanceTo(e);return new L.Point(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},Sw=(...t)=>{var e=1,n,r,o=t[e];function l(d){return Object.prototype.toString.call(d)==="[object Object]"}for(var c=t[0];o;){o=t[e++];for(n in o)o.hasOwnProperty(n)&&(r=o[n],l(r)&&l(c[n])?c[n]=L.PathTransform.merge(c[n],r):c[n]=r)}return c};let zu=class Gf{constructor(e,n,r,o,l,c){this._matrix=[e,n,r,o,l,c]}transform(e){return this._transform(e.clone())}_transform(e){const n=this._matrix,r=e.x,o=e.y;return e.x=n[0]*r+n[1]*o+n[4],e.y=n[2]*r+n[3]*o+n[5],e}untransform(e){const n=this._matrix;return new Ie.Point((e.x/n[0]-n[4])/n[0],(e.y/n[2]-n[5])/n[2])}clone(){const e=this._matrix;return new Gf(e[0],e[1],e[2],e[3],e[4],e[5])}translate(e){if(e===void 0)return new Ie.Point(this._matrix[4],this._matrix[5]);let n,r;return typeof e=="number"?n=r=e:(n=e.x,r=e.y),this._add(1,0,0,1,n,r)}scale(e,n){if(e===void 0)return new Ie.Point(this._matrix[0],this._matrix[3]);let r,o;return n=n||new Ie.Point(0,0),typeof e=="number"?r=o=e:(r=e.x,o=e.y),this._add(r,0,0,o,n.x,n.y)._add(1,0,0,1,-n.x,-n.y)}rotate(e,n){const r=Math.cos(e),o=Math.sin(e);return n=n||new Ie.Point(0,0),this._add(r,o,-o,r,n.x,n.y)._add(1,0,0,1,-n.x,-n.y)}flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this}_add(e,n,r,o,l,c){const d=[[],[],[]];let m=this._matrix;const y=[[m[0],m[2],m[4]],[m[1],m[3],m[5]],[0,0,1]];let b=[[e,r,l],[n,o,c],[0,0,1]],w;e&&e instanceof Gf&&(m=e._matrix,b=[[m[0],m[2],m[4]],[m[1],m[3],m[5]],[0,0,1]]);for(let E=0;E<3;E++)for(let C=0;C<3;C++){w=0;for(let R=0;R<3;R++)w+=y[E][R]*b[R][C];d[E][C]=w}return this._matrix=[d[0][0],d[1][0],d[0][1],d[1][1],d[0][2],d[1][2]],this}};const Sc=(t,e,n,r,o,l)=>new zu(t,e,n,r,o,l),Ew=["nesw-resize","nwse-resize","nesw-resize","nwse-resize"],Ed=Ie.CircleMarker.extend({options:{className:"leaflet-path-transform-handler"},onAdd:function(t){Ie.CircleMarker.prototype.onAdd.call(this,t),this._path&&this.options.setCursor&&(this._path.style.cursor=Ew[this.options.index])}}),Hg=Ed.extend({options:{className:"leaflet-path-transform-handler transform-handler--rotate"},onAdd(t){Ie.CircleMarker.prototype.onAdd.call(this,t),this._path&&this.options.setCursor&&(this._path.style.cursor="all-scroll")}}),Md=Ie.Handler.extend({options:{rotation:!0,scaling:!0,uniformScaling:!0,maxZoom:22,handlerOptions:{radius:5,fillColor:"#ffffff",color:"#202020",fillOpacity:1,weight:2,opacity:.7,setCursor:!0},boundsOptions:{weight:1,opacity:1,dashArray:[3,3],fill:!1,noClip:!0},rotateHandleOptions:{weight:1,opacity:1,setCursor:!0},handleLength:20,edgesCount:4,handleClass:Ed,rotateHandleClass:Hg},initialize(t){this._path=t,this._map=null,this._activeMarker=null,this._originMarker=null,this._rotationMarker=null,this._rotationOrigin=null,this._scaleOrigin=null,this._angle=0,this._scale=Ie.point(1,1),this._initialDist=0,this._initialDistX=0,this._initialDistY=0,this._rotationStart=null,this._rotationOriginPt=null,this._matrix=new zu(1,0,0,1,0,0),this._projectedMatrix=new zu(1,0,0,1,0,0),this._handlersGroup=null,this._rect=null,this._handlers=[],this._handleLine=null},enable(t){this._path._map&&(this._map=this._path._map,t&&this.setOptions(t),Ie.Handler.prototype.enable.call(this))},addHooks(){this._createHandlers(),this._path.on("dragstart",this._onDragStart,this).on("dragend",this._onDragEnd,this)},removeHooks(){this._hideHandlers(),this._path.off("dragstart",this._onDragStart,this).off("dragend",this._onDragEnd,this),this._handlersGroup=null,this._rect=null,this._handlers=[]},setOptions(t){const e=this._enabled;return e&&this.disable(),this.options=Sw({},Md.prototype.options,t),e&&this.enable(),this},rotate(t,e){return this.transform(t,null,e)},scale(t,e){return typeof t=="number"&&(t=Ie.point(t,t)),this.transform(0,t,null,e)},transform(t,e,n,r){const o=this._path.getCenter();return n=n||o,r=r||o,this._map=this._path._map,this._transformPoints(this._path,t,e,n,r),this._transformPoints(this._rect,t,e,n,r),this._transformPoints(this._handleLine,t,e,n,r),this._updateHandlers(),this},_update(){const t=this._matrix;for(const e of this._handlers)e!==this._originMarker&&(e._point=t.transform(e._initialPoint),e._updatePath());this._applyTransform(t.clone().flip()),this._path.fire("transform",{layer:this._path})},_applyTransform(t){this._path._transform(t._matrix),this._rect._transform(t._matrix),this.options.rotation&&this._handleLine._transform(t._matrix)},_apply(){const t=this._map,e=this._matrix.clone(),n=this._angle,r=this._scale.clone();this._transformGeometries();for(const o of this._handlers)o._latlng=t.layerPointToLatLng(o._point),delete o._initialPoint,o.redraw();this._matrix=new zu(1,0,0,1,0,0),this._scale=Ie.point(1,1),this._angle=0,this._updateHandlers(),t.dragging.enable(),this._path.fire("transformed",{matrix:e,scale:r,rotation:n,layer:this._path})},reset(){this._enabled&&(this._rect&&(this._handlersGroup.removeLayer(this._rect),this._rect=this._getBoundingPolygon().addTo(this._handlersGroup)),this._updateHandlers())},_updateHandlers(){const t=this._handlersGroup;this._rectShape=this._rect.toGeoJSON(),this._handleLine&&this._handlersGroup.removeLayer(this._handleLine),this._rotationMarker&&this._handlersGroup.removeLayer(this._rotationMarker),this._handleLine=this._rotationMarker=null;for(let e=this._handlers.length-1;e>=0;e--)t.removeLayer(this._handlers[e]);this._createHandlers()},_transformGeometries(){this._path._transform(null),this._rect._transform(null),this._transformPoints(this._path),this._transformPoints(this._rect),this.options.rotation&&(this._handleLine._transform(null),this._transformPoints(this._handleLine,this._angle,null,this._origin))},_getProjectedMatrix(t,e,n,r){const o=this._map,l=o.getMaxZoom()||this.options.maxZoom;let c=Sc(1,0,0,1,0,0),d;return t=t||this._angle||0,e=e||this._scale||Ie.point(1,1),e.x===1&&e.y===1||(r=r||this._scaleOrigin,d=o.project(r,l),c=c._add(Sc(1,0,0,1,d.x,d.y))._add(Sc(e.x,0,0,e.y,0,0))._add(Sc(1,0,0,1,-d.x,-d.y))),t&&(n=n||this._rotationOrigin,d=o.project(n,l),c=c.rotate(t,d).flip()),c},_transformPoint(t,e,n,r){return n.unproject(e.transform(n.project(t,r)),r)},_transformPoints(t,e,n,r,o){const l=t._map,c=l.getMaxZoom()||this.options.maxZoom,d=this._projectedMatrix=this._getProjectedMatrix(e,n,r,o);if(t._point){t._latlng=this._transformPoint(t._latlng,d,l,c);const m=this._getBoundingPolygon(),y=Math.floor(Math.abs(m._bounds._southWest.lat-m._bounds._northEast.lat)/2);t.setRadius(y)}else if(t._rings||t._parts){const m=t._rings;let y=t._latlngs;t._bounds=new Ie.LatLngBounds,Ie.Util.isArray(y[0])||(y=[y]);for(let b=0,w=m.length;b<w;b++)for(let E=0,C=m[b].length;E<C;E++)y[b][E]=this._transformPoint(y[b][E],d,l,c),t._bounds.extend(y[b][E])}t._reset()},_createHandlers(){const t=this._map;if(this._handlersGroup=this._handlersGroup||new Ie.LayerGroup().addTo(t),this._rect=this._rect||this._getBoundingPolygon().addTo(this._handlersGroup),this.options.scaling){this._handlers=[];for(let e=0;e<this.options.edgesCount;e++)this._handlers.push(this._createHandler(this._rect._latlngs[0][e],e*2,e).addTo(this._handlersGroup))}this.options.rotation&&this._createRotationHandlers(),this._handlersGroup.getLayers().forEach(function(e){e.bringToFront()})},_createRotationHandlers(){const t=this._map,e=this._rect._latlngs[0],n=Ie.latLng((e[0].lat+e[3].lat)/2,(e[0].lng+e[3].lng)/2),r=Ie.latLng((e[1].lat+e[2].lat)/2,(e[1].lng+e[2].lng)/2),o=t.layerPointToLatLng(Pw(t.latLngToLayerPoint(n),t.latLngToLayerPoint(r),this.options.handleLength));this._handleLine=new Ie.Polyline([r,o],this.options.rotateHandleOptions).addTo(this._handlersGroup);const l=this.options.rotateHandleClass;this._rotationMarker=new l(o,this.options.handlerOptions).addTo(this._handlersGroup).on("mousedown",this._onRotateStart,this),this._rotationOrigin=Ie.latLng((r.lat+n.lat)/2,(r.lng+n.lng)/2),this._handlers.push(this._rotationMarker)},_getRotationOrigin(){const t=this._rect._latlngs[0],e=t[0],n=t[2];return Ie.latLng((e.lat+n.lat)/2,(e.lng+n.lng)/2)},_onRotateStart(t){this._map.dragging.disable(),this._originMarker=null,this._rotationOriginPt=this._map.latLngToLayerPoint(this._getRotationOrigin()),this._rotationStart=t.layerPoint,this._initialMatrix=this._matrix.clone();const e=t.originalEvent._simulated;console.log({isTouch:e}),this._angle=0,this._path._map.on(e?"touchmove":"mousemove",this._onRotate,this).on(e?"touchend":"mouseup",this._onRotateEnd,this),this._cachePoints(),this._path.fire("transformstart",{layer:this._path}).fire("rotatestart",{layer:this._path,rotation:0})},_onRotate(t){Ie.DomEvent.stop(t);const e=t.layerPoint,n=this._rotationStart,r=this._rotationOriginPt;this._angle=Math.atan2(e.y-r.y,e.x-r.x)-Math.atan2(n.y-r.y,n.x-r.x),this._matrix=this._initialMatrix.clone().rotate(this._angle,r).flip(),this._update(),this._path.fire("rotate",{layer:this._path,rotation:this._angle})},_onRotateEnd(){this._path._map.off("mousemove touchmove",this._onRotate,this).off("mouseup touchend",this._onRotateEnd,this);const t=this._angle;this._apply(),this._path.fire("rotateend",{layer:this._path,rotation:t})},_onScaleStart(t){const e=t.target,n=this._map,r=t.originalEvent._simulated;n.dragging.disable(),this._activeMarker=e,this._originMarker=this._handlers[(e.options.index+2)%4],this._scaleOrigin=this._originMarker.getLatLng(),this._initialMatrix=this._matrix.clone(),this._cachePoints(),this._map.on(r?"touchmove":"mousemove",this._onScale,this).on(r?"touchend":"mouseup",this._onScaleEnd,this),this._initialDist=this._originMarker._point.distanceTo(this._activeMarker._point),this._initialDistX=this._originMarker._point.x-this._activeMarker._point.x,this._initialDistY=this._originMarker._point.y-this._activeMarker._point.y,this._path.fire("transformstart",{layer:this._path}).fire("scalestart",{layer:this._path,scale:L.point(1,1)}),this._handleLine&&this._map.removeLayer(this._handleLine),this._rotationMarker&&this._map.removeLayer(this._rotationMarker)},_onScale(t){const e=this._originMarker._point;let n,r;this.options.uniformScaling?(n=e.distanceTo(t.layerPoint)/this._initialDist,r=n):(n=(e.x-t.layerPoint.x)/this._initialDistX,r=(e.y-t.layerPoint.y)/this._initialDistY),this._scale=Ie.point(n,r),this._matrix=this._initialMatrix.clone().scale(this._scale,e),this._update(),this._path.fire("scale",{layer:this._path,scale:this._scale.clone()})},_onScaleEnd(){this._map.off("mousemove touchmove",this._onScale,this).off("mouseup touchend",this._onScaleEnd,this),this._handleLine&&this._map.addLayer(this._handleLine),this._rotationMarker&&this._map.addLayer(this._rotationMarker),this._apply(),this._path.fire("scaleend",{layer:this._path,scale:this._scale.clone()})},_cachePoints(){this._handlersGroup.eachLayer(t=>t.bringToFront());for(const t of this._handlers)t._initialPoint=t._point.clone()},_getBoundingPolygon(){return this._rectShape?Ie.GeoJSON.geometryToLayer(this._rectShape,this.options.boundsOptions):new Ie.Rectangle(this._path.getBounds(),this.options.boundsOptions)},_createHandler(t,e,n){const r=this.options.handleClass,o=new r(t,Ie.Util.extend({},this.options.handlerOptions,{className:"leaflet-drag-transform-marker drag-marker--"+n+" drag-marker--"+e,index:n,type:e}));return o.on("mousedown",this._onScaleStart,this),o},_hideHandlers(){this._map.removeLayer(this._handlersGroup)},_onDragStart(){this._hideHandlers()},_onDragEnd(t){const e=this._rect,n=(t.layer?t.layer:this._path).dragging._matrix.slice();e.dragging||(e.dragging=new kw(e)),e.dragging.enable(),this._map.addLayer(e),e.dragging._transformPoints(n),e._updatePath(),e._project(),e.dragging.disable(),this._map.addLayer(this._handlersGroup),this._updateHandlers(),this._path.fire("transformed",{scale:L.point(1,1),rotation:0,matrix:new zu(...n),translate:Ie.point(n[4],n[5]),layer:this._path})}});Ie.Handler.RotateHandle=Hg;Ie.Handler.Handle=Ed;Ie.Path.addInitHook(function(){this.options.transform&&(this.transform=new Md(this,this.options.transform))});ze.Handler.PathTransform=Md;class cf extends ze.Rectangle{constructor(n,r="Double-cliquez pour éditer",o={}){super(n,{...o,pmIgnore:!1,interactive:!0,className:"leaflet-text-rectangle"});Xe(this,"textMarker");Xe(this,"properties");this.properties={type:"TextRectangle",text:r,width:0,height:0,area:0,rotation:0,style:{...o,textColor:"#000000",fontSize:"14px",backgroundColor:"#FFFFFF"}};const l=ze.divIcon({className:"text-icon",html:`<div class="text-container" contenteditable="false">${r}</div>`,iconSize:[40,40],iconAnchor:[20,20]});this.textMarker=ze.marker(this.getBounds().getCenter(),{icon:l,draggable:!1}),this.transform.enable({rotation:!0,scaling:!0}),this.on("add",()=>{this._map&&(this.textMarker.addTo(this._map),this.updateTextPosition())}),this.on("remove",()=>{this.textMarker.remove()}),this.on("transform:rotate",c=>{this.properties.rotation=c.rotation,this.updateTextRotation()}),this.on("transform",()=>{this.updateTextPosition(),this.updateProperties()}),this.textMarker.on("dblclick",c=>{var E;ze.DomEvent.stopPropagation(c);const d=(E=this.textMarker.getElement())==null?void 0:E.querySelector(".text-container");if(!d)return;this.transform.disable(),d.contentEditable="true",d.focus(),d.classList.add("editing");const m=window.getSelection(),y=document.createRange();y.selectNodeContents(d),m==null||m.removeAllRanges(),m==null||m.addRange(y);const b=()=>{d.contentEditable="false",d.classList.remove("editing");const C=d.innerText.trim();C&&(this.properties.text=C,this.setText(C)),d.removeEventListener("blur",b),d.removeEventListener("keydown",w),this.transform.enable({rotation:!0,scaling:!0})},w=C=>{C.key==="Enter"&&!C.shiftKey&&(C.preventDefault(),b())};d.addEventListener("blur",b),d.addEventListener("keydown",w)})}updateTextPosition(){const n=this.getBounds().getCenter();this.textMarker.setLatLng(n)}updateTextRotation(){const n=this.textMarker.getElement();n&&(n.style.transform=`rotate(${this.properties.rotation}deg)`)}updateProperties(){const n=this.getBounds(),r=n.getNorthEast(),o=n.getSouthWest();this.properties.width=this.calculateDistance([o.lat,o.lng],[o.lat,r.lng]),this.properties.height=this.calculateDistance([o.lat,o.lng],[r.lat,o.lng]),this.properties.area=this.properties.width*this.properties.height}calculateDistance(n,r){const o=n[0]*Math.PI/180,l=n[1]*Math.PI/180,c=r[0]*Math.PI/180,d=r[1]*Math.PI/180,m=6371e3,y=c-o,b=d-l,w=Math.sin(y/2)*Math.sin(y/2)+Math.cos(o)*Math.cos(c)*Math.sin(b/2)*Math.sin(b/2),E=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return m*E}setText(n){var o;this.properties.text=n;const r=(o=this.textMarker.getElement())==null?void 0:o.querySelector(".text-container");r&&(r.innerText=n)}setTextStyle(n){var o;this.properties.style={...this.properties.style,...n};const r=(o=this.textMarker.getElement())==null?void 0:o.querySelector(".text-container");r&&(n.textColor&&(r.style.color=n.textColor),n.fontSize&&(r.style.fontSize=n.fontSize),n.backgroundColor&&(r.style.backgroundColor=n.backgroundColor))}}var ks=63710088e-1,Mw={centimeters:ks*100,centimetres:ks*100,degrees:ks/111325,feet:ks*3.28084,inches:ks*39.37,kilometers:ks/1e3,kilometres:ks/1e3,meters:ks,metres:ks,miles:ks/1609.344,millimeters:ks*1e3,millimetres:ks*1e3,nauticalmiles:ks/1852,radians:1,yards:ks*1.0936};function sh(t,e,n){n===void 0&&(n={});var r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function c0(t,e,n){n===void 0&&(n={});for(var r=0,o=t;r<o.length;r++){var l=o[r];if(l.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var c=0;c<l[l.length-1].length;c++)if(l[l.length-1][c]!==l[0][c])throw new Error("First and last Position are not equivalent.")}var d={type:"Polygon",coordinates:t};return sh(d,e,n)}function Vf(t,e,n){if(n===void 0&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");var r={type:"LineString",coordinates:t};return sh(r,e,n)}function Aw(t,e){e===void 0&&(e="kilometers");var n=Mw[e];if(!n)throw new Error(e+" units is invalid");return t*n}function Ec(t){var e=t%360;return e*Math.PI/180}function Wg(t,e,n){if(t!==null)for(var r,o,l,c,d,m,y,b=0,w=0,E,C=t.type,R=C==="FeatureCollection",O=C==="Feature",q=R?t.features.length:1,F=0;F<q;F++){y=R?t.features[F].geometry:O?t.geometry:t,E=y?y.type==="GeometryCollection":!1,d=E?y.geometries.length:1;for(var V=0;V<d;V++){var Y=0,Ct=0;if(c=E?y.geometries[V]:y,c!==null){m=c.coordinates;var kt=c.type;switch(b=0,kt){case null:break;case"Point":if(e(m,w,F,Y,Ct)===!1)return!1;w++,Y++;break;case"LineString":case"MultiPoint":for(r=0;r<m.length;r++){if(e(m[r],w,F,Y,Ct)===!1)return!1;w++,kt==="MultiPoint"&&Y++}kt==="LineString"&&Y++;break;case"Polygon":case"MultiLineString":for(r=0;r<m.length;r++){for(o=0;o<m[r].length-b;o++){if(e(m[r][o],w,F,Y,Ct)===!1)return!1;w++}kt==="MultiLineString"&&Y++,kt==="Polygon"&&Ct++}kt==="Polygon"&&Y++;break;case"MultiPolygon":for(r=0;r<m.length;r++){for(Ct=0,o=0;o<m[r].length;o++){for(l=0;l<m[r][o].length-b;l++){if(e(m[r][o][l],w,F,Y,Ct)===!1)return!1;w++}Ct++}Y++}break;case"GeometryCollection":for(r=0;r<c.geometries.length;r++)if(Wg(c.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Zg(t,e){var n,r,o,l,c,d,m,y,b,w,E=0,C=t.type==="FeatureCollection",R=t.type==="Feature",O=C?t.features.length:1;for(n=0;n<O;n++){for(d=C?t.features[n].geometry:R?t.geometry:t,y=C?t.features[n].properties:R?t.properties:{},b=C?t.features[n].bbox:R?t.bbox:void 0,w=C?t.features[n].id:R?t.id:void 0,m=d?d.type==="GeometryCollection":!1,c=m?d.geometries.length:1,o=0;o<c;o++){if(l=m?d.geometries[o]:d,l===null){if(e(null,E,y,b,w)===!1)return!1;continue}switch(l.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(l,E,y,b,w)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<l.geometries.length;r++)if(e(l.geometries[r],E,y,b,w)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}E++}}function Bw(t,e,n){var r=n;return Zg(t,function(o,l,c,d,m){r=e(r,o,l,c,d,m)}),r}function Tw(t,e){Zg(t,function(n,r,o,l,c){var d=n===null?null:n.type;switch(d){case null:case"Point":case"LineString":case"Polygon":return e(sh(n,o,{bbox:l,id:c}),r,0)===!1?!1:void 0}var m;switch(d){case"MultiPoint":m="Point";break;case"MultiLineString":m="LineString";break;case"MultiPolygon":m="Polygon";break}for(var y=0;y<n.coordinates.length;y++){var b=n.coordinates[y],w={type:m,coordinates:b};if(e(sh(w,o),r,y)===!1)return!1}})}function Nw(t,e){Tw(t,function(n,r,o){var l=0;if(n.geometry){var c=n.geometry.type;if(!(c==="Point"||c==="MultiPoint")){var d,m=0,y=0,b=0;if(Wg(n,function(w,E,C,R,O){if(d===void 0||r>m||R>y||O>b){d=w,m=r,y=R,b=O,l=0;return}var q=Vf([d,w],n.properties);if(e(q,r,o,O,l)===!1)return!1;l++,d=w})===!1)return!1}}})}function Dw(t,e,n){var r=n,o=!1;return Nw(t,function(l,c,d,m,y){o===!1&&n===void 0?r=l:r=e(r,l,c,d,m,y),o=!0}),r}function h0(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Hf(t,e,n){n===void 0&&(n={});var r=h0(t),o=h0(e),l=Ec(o[1]-r[1]),c=Ec(o[0]-r[0]),d=Ec(r[1]),m=Ec(o[1]),y=Math.pow(Math.sin(l/2),2)+Math.pow(Math.sin(c/2),2)*Math.cos(d)*Math.cos(m);return Aw(2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y)),n.units)}var f0=6378137;function d0(t){return Bw(t,function(e,n){return e+Ow(n)},0)}function Ow(t){var e=0,n;switch(t.type){case"Polygon":return p0(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)e+=p0(t.coordinates[n]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function p0(t){var e=0;if(t&&t.length>0){e+=Math.abs(m0(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(m0(t[n]))}return e}function m0(t){var e,n,r,o,l,c,d,m=0,y=t.length;if(y>2){for(d=0;d<y;d++)d===y-2?(o=y-2,l=y-1,c=0):d===y-1?(o=y-1,l=0,c=1):(o=d,l=d+1,c=d+2),e=t[o],n=t[l],r=t[c],m+=(hf(r[0])-hf(e[0]))*Math.sin(hf(n[1]));m=m*f0*f0/2}return m}function hf(t){return t*Math.PI/180}function g0(t,e){return e===void 0&&(e={}),Dw(t,function(n,r){var o=r.geometry.coordinates;return n+Hf(o[0],o[1],e)},0)}const oh=(t,e)=>{if(!t||typeof t!="string"||!t.startsWith("#"))return`rgba(0, 0, 0, ${e})`;const n=parseInt(t.slice(1,3),16),r=parseInt(t.slice(3,5),16),o=parseInt(t.slice(5,7),16);return`rgba(${n}, ${r}, ${o}, ${e})`},_0=(t,e)=>{t.style.fontSize=e.fontSize,t.style.color=e.color,t.style.backgroundColor=oh(e.backgroundColor,e.backgroundOpacity),e.hasBorder?t.style.border=`${e.borderWidth} solid ${oh(e.borderColor,e.borderOpacity)}`:t.style.border="none",t.style.padding=e.padding,t.style.borderRadius=e.borderRadius},ss=t=>{document.querySelectorAll(".drawing-help-message").forEach(r=>r.remove());const n=ze.DomUtil.create("div","drawing-help-message");return n.innerHTML=t,n.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(n),n};function v0(t,e,n){const r=156543.03392*Math.cos(e*Math.PI/180)/Math.pow(2,n);return t/r}const Ai=(t,e="m",n="")=>{let r,o;return e==="m²"?t>=1e4?(r=(t/1e4).toFixed(2),o="ha"):(r=t.toFixed(2),o="m²"):e==="m"?t>=1e3?(r=(t/1e3).toFixed(2),o="km"):(r=t.toFixed(2),o="m"):(r=t.toFixed(2),o=e),n?`${n}: ${r} ${o}`:`${r} ${o}`},y0=t=>`${((t%360+360)%360).toFixed(1)}°`,Iw=t=>({...t,clientX:t.clientX,clientY:t.clientY,button:t.button||0,buttons:t.buttons||0,altKey:t.altKey||!1}),Rw=(t,e)=>{let n;return function(...r){window.clearTimeout(n),n=window.setTimeout(()=>t.apply(this,r),e)}};function Fw(){const t=Re(null),e=Re(null),n=Re(null),r=Re(null),o=Re(""),l=Re(null),c=Re(!1),d=(I,nt="Double-cliquez pour éditer")=>{const K={fontSize:"14px",color:"#000000",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderWidth:"1px",borderOpacity:1,padding:"5px 10px",borderRadius:"3px",hasBorder:!0,rotation:0,physicalSize:2},tt=(dt,St)=>{var it;const Mt=((it=t.value)==null?void 0:it.getZoom())||14,Kt=I.lat,re=v0(St.physicalSize,Kt,Mt);return`<div class="text-container" style="width:${re}px;height:${re}px;transform:rotate(${St.rotation}deg)">
        <div class="text-annotation" style="font-size:${re*.2}px;color:${St.color};background-color:${oh(St.backgroundColor,St.backgroundOpacity)};border:${St.hasBorder?St.borderWidth+" solid "+oh(St.borderColor,St.borderOpacity):"none"};padding:${St.padding};border-radius:${St.borderRadius}">${dt}</div>
        <div class="text-controls"><div class="control-button rotate"></div><div class="control-button move"></div></div>
      </div>`},_t=()=>{if(!t.value)return;const dt=j.getIcon(),St={html:tt(j.properties.text,j.properties.style),className:dt.options.className};j.setIcon(ze.divIcon(St))},G=ze.divIcon({html:tt(nt,K),className:"text-container",iconSize:[40,40],iconAnchor:[20,20]}),j=ze.marker(I,{icon:G,draggable:!1,pmIgnore:!0});j.properties={type:"text",text:nt,style:{...K}},t.value&&(t.value.on("zoomend",_t),j.on("remove",()=>{var dt;(dt=t.value)==null||dt.off("zoomend",_t)})),_t();let X=!1,Rt=!1,D=0,Z=0;const ut=dt=>{if(!t.value)return;const St=dt.target;if(St.classList.contains("rotate")){X=!0;const Mt=j.getLatLng(),Kt=t.value.mouseEventToLatLng(dt);D=Math.atan2(Kt.lat-Mt.lat,Kt.lng-Mt.lng)*180/Math.PI,Z=j.properties.style.rotation||0}else St.classList.contains("move")&&(Rt=!0);document.addEventListener("mousemove",vt),document.addEventListener("mouseup",xt)},vt=dt=>{if(!(!Rt||!t.value)){if(X){const St=j.getLatLng(),Mt=t.value.mouseEventToLatLng(dt),Kt=Math.atan2(Mt.lat-St.lat,Mt.lng-St.lng)*180/Math.PI,re=(Z+(Kt-D))%360;j.properties.style.rotation=re;const it=j.getIcon(),ht={html:tt(j.properties.text,j.properties.style),className:it.options.className};j.setIcon(ze.divIcon(ht))}else if(Rt){const St=Iw(dt),Mt=t.value.mouseEventToLatLng(St);j.setLatLng(Mt)}}},xt=()=>{X=!1,Rt=!1,document.removeEventListener("mousemove",vt),document.removeEventListener("mouseup",xt)};return j.on("add",()=>{const dt=j.getElement();dt&&dt.querySelectorAll(".control-button").forEach(Mt=>{Mt.addEventListener("mousedown",ut)})}),j.on("remove",()=>{const dt=j.getElement();dt&&dt.querySelectorAll(".control-button").forEach(Mt=>{Mt.removeEventListener("mousedown",ut)})}),j.on("dblclick",dt=>{var ht;ze.DomEvent.stopPropagation(dt);const St=(ht=j.getElement())==null?void 0:ht.querySelector(".text-annotation");if(!St)return;St.contentEditable="true",St.focus(),St.classList.add("editing");const Mt=window.getSelection(),Kt=document.createRange();Kt.selectNodeContents(St),Mt==null||Mt.removeAllRanges(),Mt==null||Mt.addRange(Kt);const re=()=>{St.contentEditable="false",St.classList.remove("editing");const It=St.innerText.trim();if(It){j.properties.text=It;const Dt=j.getIcon(),lt={html:tt(It,j.properties.style),className:Dt.options.className};j.setIcon(ze.divIcon(lt))}St.removeEventListener("blur",re),St.removeEventListener("keydown",it)},it=It=>{It.key==="Enter"&&!It.shiftKey&&(It.preventDefault(),re())};St.addEventListener("blur",re),St.addEventListener("keydown",it)}),j},m=(I,nt)=>{const K=ze.DomUtil.create("div","measure-tooltip");if(K.innerHTML=nt,K.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(K),t.value){const tt=t.value.latLngToContainerPoint(I);K.style.left=`${tt.x+10}px`,K.style.top=`${tt.y-25}px`}return K},y=(I,nt,K)=>{I.on("mouseover",()=>{const tt=m(I.getLatLng(),K());I.measureDiv=tt}),I.on("mousemove",tt=>{if(I.measureDiv&&t.value){const _t=t.value.latLngToContainerPoint(tt.latlng);I.measureDiv.style.left=`${_t.x+10}px`,I.measureDiv.style.top=`${_t.y-25}px`}}),I.on("mouseout",()=>{I.measureDiv&&(I.measureDiv.remove(),I.measureDiv=void 0)})};let b=[];const w=()=>{b.forEach(I=>{I&&I.remove&&("measureDiv"in I&&I.measureDiv&&(I.measureDiv.remove(),I.measureDiv=void 0),n.value&&n.value.removeLayer(I),I.remove())}),b=[],document.querySelectorAll(".measure-tooltip").forEach(I=>{I.remove()})},E=(I,nt="#2563EB")=>{const K=ze.circleMarker(I,{radius:6,color:nt,fillColor:nt,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return n.value&&n.value.addLayer(K),K},C=(I,nt)=>{var tt,_t,G,j,X,Rt;console.log("=== CALCULATING SHAPE PROPERTIES START ==="),console.log("Input layer:",{type:nt,instanceof:{Circle:I instanceof ze.Circle,Rectangle:I instanceof ze.Rectangle,Polygon:I instanceof ze.Polygon,Polyline:I instanceof ze.Polyline,CircleArc:I instanceof Ml,TextRectangle:I instanceof cf},options:I.options});const K={type:nt,style:I.options||{}};try{if(I instanceof cf)return I.properties;if(I instanceof ze.Circle){const D=I.getRadius(),Z=I.getLatLng();K.radius=D,K.diameter=D*2,K.area=Math.PI*Math.pow(D,2),K.perimeter=2*Math.PI*D,K.center=Z,K.surfaceInterieure=K.area,K.surfaceExterieure=K.area,console.log("Circle properties calculated:",K)}else if(I instanceof Ml){const D=I.getRadius(),Z=I.getCenter(),ut=I.getStartAngle(),vt=I.getStopAngle(),xt=I.getOpeningAngle();K.radius=D,K.diameter=D*2,K.area=Math.PI*Math.pow(D,2)*xt/360,K.arcLength=2*Math.PI*D*xt/360,K.perimeter=K.arcLength+2*D,K.center=Z,K.startAngle=ut,K.stopAngle=vt,K.openingAngle=xt,K.surfaceInterieure=K.area,K.surfaceExterieure=K.area,console.log("CircleArc properties calculated:",K)}else if(I instanceof ze.Rectangle){const D=I.getBounds(),Z=D.getNorthEast(),ut=D.getSouthWest(),vt=Hf([ut.lng,ut.lat],[Z.lng,ut.lat],{units:"meters"}),xt=Hf([ut.lng,ut.lat],[ut.lng,Z.lat],{units:"meters"});K.width=vt,K.height=xt,K.area=vt*xt,K.perimeter=2*(vt+xt),K.surfaceInterieure=K.area,K.surfaceExterieure=K.area,K.dimensions={width:vt,height:xt},console.log("Rectangle properties calculated:",K)}else if(I instanceof ze.Polygon){const Z=I.getLatLngs()[0].map(vt=>[vt.lng,vt.lat]);Z.push(Z[0]);const ut=c0([Z]);K.area=d0(ut),K.perimeter=g0(Vf([...Z]),{units:"meters"}),K.surfaceInterieure=K.area,K.surfaceExterieure=K.area,console.log("Polygon properties calculated:",K)}else if(I instanceof ze.Polyline&&!(I instanceof ze.Polygon)){const Z=I.getLatLngs().map(xt=>[xt.lng,xt.lat]),ut=Vf(Z);K.length=g0(ut,{units:"meters"});const vt=10;K.surfaceInfluence=K.length*vt,K.dimensions={width:vt},console.log("Polyline properties calculated:",K)}K.style={...K.style,color:((tt=I.options)==null?void 0:tt.color)||"#3388ff",weight:((_t=I.options)==null?void 0:_t.weight)||3,opacity:((G=I.options)==null?void 0:G.opacity)||1,fillColor:((j=I.options)==null?void 0:j.fillColor)||"#3388ff",fillOpacity:((X=I.options)==null?void 0:X.fillOpacity)||.2,dashArray:((Rt=I.options)==null?void 0:Rt.dashArray)||""}}catch(D){console.error("Error calculating shape properties:",D)}return console.log("=== CALCULATING SHAPE PROPERTIES END ==="),console.log("Final properties:",K),K},R=(I,nt=2)=>{var j;if(!t.value){console.warn("Map is not available for text size update");return}const K=t.value.getZoom(),tt=I.getLatLng().lat,_t=v0(nt,tt,K),G=(j=I.getElement())==null?void 0:j.querySelector(".text-annotation");G&&(I.properties.style.fontSize=`${_t}px`,I.properties.physicalWidth=nt,I.properties.physicalHeight=nt,_0(G,I.properties.style))},O=(I,nt,K)=>{const tt=ze.map(I).setView(nt,K);t.value=tt,ze.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors"}).addTo(tt);const _t=new ze.FeatureGroup;return _t.addTo(tt),e.value=_t,n.value=ze.featureGroup().addTo(tt),r.value=ze.featureGroup().addTo(tt),tt.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:_t,snapLayers:[_t,r.value],templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),tt.on("pm:drawstart",G=>{c.value=!0,G.shape==="Circle"&&o.value==="Semicircle"&&(tt.getContainer().style.cursor="crosshair")}),tt.on("pm:drawend",()=>{c.value=!1,tt.getContainer().style.cursor="",l.value&&ss("Cliquez sur la forme pour afficher les points de contrôle")}),tt.on("pm:create",async G=>{var Rt,D,Z;const j=G.layer;(Rt=e.value)==null||Rt.addLayer(j);let X="unknown";if(j instanceof ze.Circle?X=o.value==="Semicircle"?"Semicircle":"Circle":j instanceof ze.Rectangle?X="Rectangle":j instanceof ze.Polygon?X="Polygon":j instanceof ze.Polyline&&!(j instanceof ze.Polygon)&&(X="Line"),j.properties=C(j,X),l.value=j,j.on("mouseover",()=>{console.log("[mouseover] Survol de la forme",{type:X,isSelected:l.value===j}),(!l.value||l.value!==j)&&J(j)}),j.on("mouseout",()=>{var ut;console.log("[mouseout] Sortie de la forme",{type:X,isSelected:l.value===j}),(!l.value||l.value!==j)&&((ut=r.value)==null||ut.clearLayers())}),X==="Semicircle"){const ut=j.getLatLng(),vt=j.getRadius();(D=e.value)==null||D.removeLayer(j);const xt=new Ml(ut,vt);xt.properties=C(xt,"Semicircle"),(Z=e.value)==null||Z.addLayer(xt),l.value=xt,$(xt)}else j instanceof ze.Circle?et(j):j instanceof ze.Rectangle?ct(j):j instanceof ze.Polygon?Yt(j):j instanceof ze.Polyline&&!(j instanceof ze.Polygon)&&Bt(j);ss("Cliquez sur la forme pour afficher les points de contrôle")}),_t.on("click",G=>{var X,Rt,D,Z;ze.DomEvent.stopPropagation(G);const j=G.layer;console.log("[featureGroup click] Sélection de forme",{type:(X=j.properties)==null?void 0:X.type,previouslySelected:l.value===j}),(Rt=r.value)==null||Rt.clearLayers(),w(),(D=document.querySelector(".drawing-help-message"))==null||D.remove(),l.value=j,j instanceof Ml||((Z=j.properties)==null?void 0:Z.type)==="Semicircle"?$(j):j instanceof ze.Circle?et(j):j instanceof ze.Rectangle?ct(j):j instanceof ze.Polygon?Yt(j):j instanceof ze.Polyline&&!(j instanceof ze.Polygon)&&Bt(j)}),tt.on("pm:edit",G=>{var X;console.log("[pm:edit] Début",{layer:G.layer,currentProperties:G.layer.properties});const j=G.layer;if(j){const Rt=((X=j.properties)==null?void 0:X.type)||"unknown";kt(j,Rt),console.log("[pm:edit] Après updateLayerProperties",{updatedProperties:j.properties,selectedShape:l.value}),Rt==="Semicircle"?$(j):j instanceof ze.Circle?et(j):j instanceof ze.Rectangle?ct(j):j instanceof ze.Polygon?Yt(j):j instanceof ze.Polyline&&Bt(j)}}),tt.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(G=>G.remove()),ss("Déplacez la forme à l'endroit souhaité")}),tt.on("pm:dragend",G=>{var X;console.log("[pm:dragend] Début",{layer:G.layer,currentProperties:G.layer.properties});const j=G.layer;if(j){const Rt=((X=j.properties)==null?void 0:X.type)||"unknown";kt(j,Rt),console.log("[pm:dragend] Après updateLayerProperties",{updatedProperties:j.properties,selectedShape:l.value})}setTimeout(()=>{ss("Cliquez sur la forme pour afficher les points de contrôle")},100)}),tt.on("pm:remove",()=>{var G;(G=document.querySelector(".drawing-help-message"))==null||G.remove()}),tt.on("pm:select",G=>{var X;const j=G.layer;document.querySelectorAll(".drawing-help-message").forEach(Rt=>Rt.remove()),j instanceof Ml||((X=j.properties)==null?void 0:X.type)==="Semicircle"?ss(`Points de contrôle : <span style="color: #059669">●</span> Ajuster le rayon, <span style="color: #2563EB">●</span> et <span style="color: #DC2626">●</span> Modifier l'ouverture du demi-cercle`):ss("Utilisez les points de contrôle pour modifier la forme")}),tt.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(G=>G.remove())}),tt},q=()=>{if(!t.value||!e.value)return;const I=e.value.getBounds();I.isValid()&&t.value.fitBounds(I,{padding:[50,50],maxZoom:19})},F=I=>{if(t.value){console.log("=== SETTING DRAWING TOOL START ==="),console.log("Current tool:",o.value),console.log("New tool:",I),document.querySelectorAll(".drawing-help-message").forEach(nt=>nt.remove());try{console.log("Disabling all modes...");const nt=t.value.pm;nt.globalEditModeEnabled()&&nt.disableGlobalEditMode(),nt.globalDragModeEnabled()&&nt.disableGlobalDragMode(),nt.globalRemovalModeEnabled()&&nt.disableGlobalRemovalMode(),nt.disableDraw(),w()}catch(nt){console.error("Error disabling modes:",nt)}if(o.value=I,console.log("Tool set to:",o.value),!I){console.log("No tool selected, clearing control points"),w();return}setTimeout(()=>{var nt,K,tt,_t,G,j,X,Rt;try{switch(console.log("Enabling tool:",I),I){case"Circle":ss("Cliquez et maintenez pour dessiner un cercle, relâchez pour terminer"),(nt=t.value)==null||nt.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Semicircle":ss("Cliquez et maintenez pour dessiner un demi-cercle, relâchez pour terminer"),(K=t.value)==null||K.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Rectangle":ss("Cliquez et maintenez pour dessiner un rectangle, relâchez pour terminer"),(tt=t.value)==null||tt.pm.enableDraw("Rectangle",{finishOn:"mouseup"});break;case"Polygon":ss("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(_t=t.value)==null||_t.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Line":ss("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(G=t.value)==null||G.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Text":if(ss("Cliquez pour ajouter du texte, double-cliquez pour éditer"),t.value){const D=Z=>{if(!t.value||!e.value)return;const ut=d(Z.latlng);e.value.addLayer(ut),l.value=ut,t.value.off("click",D),F("")};t.value.on("click",D)}break;case"drag":ss("Cliquez et maintenez une forme pour la déplacer"),(j=t.value)==null||j.pm.enableGlobalDragMode();break;case"delete":ss("Cliquez sur une forme pour la supprimer"),(X=t.value)==null||X.pm.enableGlobalRemovalMode();break;case"TextRectangle":ss("Cliquez et maintenez pour dessiner un rectangle avec texte, relâchez pour terminer"),(Rt=t.value)==null||Rt.pm.enableDraw("Rectangle",{finishOn:"mouseup",continueDrawing:!1}),t.value.once("pm:create",D=>{var vt,xt;const Z=D.layer;(vt=e.value)==null||vt.removeLayer(Z);const ut=new cf(Z.getBounds(),"Double-cliquez pour éditer",{color:"#3388ff",weight:2,fillColor:"#3388ff",fillOpacity:.2});(xt=e.value)==null||xt.addLayer(ut),l.value=ut});break}console.log("Tool enabled successfully")}catch(D){console.error("Error enabling tool:",D)}},100),console.log("=== SETTING DRAWING TOOL END ===")}},V=I=>{var K;if(!l.value)return;const nt=l.value;if(nt.properties=nt.properties||{},nt.properties.style=nt.properties.style||{},nt.properties.style={...nt.properties.style,...I},nt.properties.type==="text"){const tt=nt.properties._textLayer,_t=(K=tt==null?void 0:tt.getElement())==null?void 0:K.querySelector(".text-annotation");_t&&_0(_t,nt.properties.style);const G={color:I.borderColor||nt.properties.style.borderColor,weight:parseInt(I.borderWidth||nt.properties.style.borderWidth),opacity:I.borderOpacity??nt.properties.style.borderOpacity};"setStyle"in nt&&nt.setStyle(G)}else{const tt={};I.fillColor&&(tt.fillColor=I.fillColor),I.fillOpacity!==void 0&&(tt.fillOpacity=I.fillOpacity),I.strokeColor&&(tt.color=I.strokeColor),I.strokeOpacity!==void 0&&(tt.opacity=I.strokeOpacity),I.strokeWidth!==void 0&&(tt.weight=I.strokeWidth),I.dashArray&&(tt.dashArray=I.dashArray),"setStyle"in nt&&nt.setStyle(tt)}},Y=I=>{if(!l.value)return;const nt=l.value;nt.properties={...nt.properties,...I},I.radius&&nt instanceof ze.Circle&&nt.setRadius(I.radius)},Ct=I=>{console.log("[forceShapeUpdate] Début",{currentProperties:I.properties,selectedShapeRef:l.value}),l.value=null,lc(()=>{l.value=I,console.log("[forceShapeUpdate] Après mise à jour",{selectedShape:l.value,properties:l.value.properties})})},kt=(I,nt)=>{console.log("[updateLayerProperties] Début",{layer:I,shapeType:nt,currentProperties:I.properties}),Rw((tt,_t)=>{const G=C(tt,_t);console.log("[updateLayerProperties] Nouvelles propriétés calculées",{newProperties:G}),tt.properties={...G},Ct(tt),tt.fire("properties:updated",{shape:tt,properties:tt.properties}),console.log("[updateLayerProperties] Fin",{finalProperties:tt.properties,selectedShape:l.value})},100)(I,nt)},wt=(I,nt)=>ze.latLng((I.lat+nt.lat)/2,(I.lng+nt.lng)/2),et=I=>{if(!t.value||!e.value)return;w();const nt=I.getLatLng(),K=I.getRadius(),tt=E(nt,"#059669");b.push(tt);const _t=[];[0,45,90,135,180,225,270,315].forEach(G=>{const j=G*Math.PI/180,X=ze.latLng(nt.lat+K/111319.9*Math.sin(j),nt.lng+K/(111319.9*Math.cos(nt.lat*Math.PI/180))*Math.cos(j)),Rt=E(X,"#2563EB");_t.push(Rt),b.push(Rt),Rt.on("mousedown",D=>{if(!t.value)return;ze.DomEvent.stopPropagation(D),t.value.dragging.disable();let Z=!0;const ut=xt=>{if(!Z)return;console.log("[Circle Control Point] Début du mouvement",{currentRadius:I.getRadius(),currentProperties:I.properties});const dt=nt.distanceTo(xt.latlng);I.setRadius(dt),_t.forEach((St,Mt)=>{const Kt=Mt*45*Math.PI/180,re=ze.latLng(nt.lat+dt/111319.9*Math.sin(Kt),nt.lng+dt/(111319.9*Math.cos(nt.lat*Math.PI/180))*Math.cos(Kt));St.setLatLng(re)}),kt(I,"Circle"),l.value=I,console.log("[Circle Control Point] Après mise à jour",{newRadius:dt,updatedProperties:I.properties,selectedShape:l.value})},vt=()=>{Z=!1,t.value&&(t.value.off("mousemove",ut),document.removeEventListener("mouseup",vt),t.value.dragging.enable())};t.value.on("mousemove",ut),document.addEventListener("mouseup",vt)})}),l.value=I},ct=I=>{if(!t.value||!e.value)return;w();const nt=I.getBounds(),K=nt.getCenter(),tt=[nt.getNorthWest(),nt.getNorthEast(),nt.getSouthEast(),nt.getSouthWest()],_t=E(K,"#059669");b.push(_t),y(_t,I,()=>{const X=I.getBounds(),Rt=X.getNorthEast().distanceTo(X.getNorthWest()),D=X.getNorthWest().distanceTo(X.getSouthWest()),Z=Rt*D;return[Ai(Rt,"m","Largeur"),Ai(D,"m","Hauteur"),Ai(Z,"m²","Surface")].join("<br>")});const G=[];tt.forEach(X=>{const Rt=E(X,"#DC2626");G.push(Rt),b.push(Rt),y(Rt,I,()=>{const D=I.getBounds(),Z=D.getNorthEast().distanceTo(D.getNorthWest()),ut=D.getNorthWest().distanceTo(D.getSouthWest());return[Ai(Z,"m","Largeur"),Ai(ut,"m","Hauteur")].join("<br>")})});const j=[];tt.forEach((X,Rt)=>{const D=tt[(Rt+1)%4],Z=wt(X,D),ut=E(Z,"#2563EB");j.push(ut),b.push(ut),y(ut,I,()=>{const vt=I.getBounds(),xt=vt.getNorthEast().distanceTo(vt.getNorthWest()),dt=vt.getNorthWest().distanceTo(vt.getSouthWest());return[Ai(xt,"m","Largeur"),Ai(dt,"m","Hauteur")].join("<br>")})}),_t.on("mousedown",X=>{if(!t.value)return;ze.DomEvent.stopPropagation(X),t.value.dragging.disable();let Rt=!0;const D=I.getBounds(),Z=X.latlng,ut=xt=>{if(!Rt)return;const dt=xt.latlng.lng-Z.lng,St=xt.latlng.lat-Z.lat,Mt=ze.latLngBounds(ze.latLng(D.getSouth()+St,D.getWest()+dt),ze.latLng(D.getNorth()+St,D.getEast()+dt));I.setBounds(Mt);const Kt=[Mt.getNorthWest(),Mt.getNorthEast(),Mt.getSouthEast(),Mt.getSouthWest()];_t.setLatLng(Mt.getCenter()),G.forEach((re,it)=>{re.setLatLng(Kt[it])}),j.forEach((re,it)=>{const ht=Kt[it],It=Kt[(it+1)%4];re.setLatLng(wt(ht,It))}),kt(I,"Rectangle")},vt=()=>{Rt=!1,t.value&&(t.value.off("mousemove",ut),document.removeEventListener("mouseup",vt),t.value.dragging.enable())};t.value.on("mousemove",ut),document.addEventListener("mouseup",vt)}),G.forEach((X,Rt)=>{X.on("mousedown",D=>{if(!t.value)return;ze.DomEvent.stopPropagation(D),t.value.dragging.disable();let Z=!0;const ut=xt=>{if(!Z)return;const dt=(Rt+2)%4,St=tt[dt],Mt=ze.latLngBounds(St,xt.latlng);I.setBounds(Mt);const Kt=[Mt.getNorthWest(),Mt.getNorthEast(),Mt.getSouthEast(),Mt.getSouthWest()];_t.setLatLng(Mt.getCenter()),G.forEach((re,it)=>{re.setLatLng(Kt[it])}),j.forEach((re,it)=>{const ht=Kt[it],It=Kt[(it+1)%4];re.setLatLng(wt(ht,It))}),kt(I,"Rectangle")},vt=()=>{Z=!1,t.value&&(t.value.off("mousemove",ut),document.removeEventListener("mouseup",vt),t.value.dragging.enable())};t.value.on("mousemove",ut),document.addEventListener("mouseup",vt)})})},Bt=I=>{if(!t.value||!e.value)return;w();const nt=I.getLatLngs();nt.forEach((tt,_t)=>{const G=E(tt,"#059669");b.push(G),y(G,I,()=>{const j=nt.reduce((Rt,D,Z)=>Z===0?0:Rt+D.distanceTo(nt[Z-1]),0);let X=nt.slice(0,_t+1).reduce((Rt,D,Z)=>Z===0?0:Rt+D.distanceTo(nt[Z-1]),0);return[Ai(X,"m","Distance depuis le début"),Ai(j,"m","Longueur totale")].join("<br>")}),G.on("mousedown",j=>{if(!t.value)return;ze.DomEvent.stopPropagation(j),t.value.dragging.disable();let X=!0;const Rt=Z=>{X&&(nt[_t]=Z.latlng,I.setLatLngs(nt),G.setLatLng(Z.latlng),K())},D=()=>{X=!1,t.value&&(t.value.off("mousemove",Rt),document.removeEventListener("mouseup",D),t.value.dragging.enable(),Bt(I))};t.value.on("mousemove",Rt),document.addEventListener("mouseup",D)})});const K=()=>{b.slice(nt.length).forEach(tt=>{e.value&&e.value.removeLayer(tt)}),b=b.slice(0,nt.length);for(let tt=0;tt<nt.length-1;tt++){const _t=wt(nt[tt],nt[tt+1]),G=E(_t,"#2563EB");b.push(G),y(G,I,()=>{const j=nt[tt].distanceTo(nt[tt+1]),X=nt.reduce((D,Z,ut)=>ut===0?0:D+Z.distanceTo(nt[ut-1]),0),Rt=nt.slice(0,tt+1).reduce((D,Z,ut)=>ut===0?0:D+Z.distanceTo(nt[ut-1]),0)+j/2;return[Ai(j,"m","Longueur du segment"),Ai(j/2,"m","Demi-segment"),Ai(Rt,"m","Distance depuis le début"),Ai(X,"m","Longueur totale")].join("<br>")}),G.on("mousedown",j=>{if(!t.value)return;ze.DomEvent.stopPropagation(j),t.value.dragging.disable();let X=!0;const Rt=Z=>{X&&(nt.splice(tt+1,0,Z.latlng),I.setLatLngs(nt),Bt(I))},D=()=>{X=!1,t.value&&(t.value.off("mousemove",Rt),t.value.dragging.enable())};t.value.on("mousemove",Rt),document.addEventListener("mouseup",D)})}};K()},Yt=I=>{if(!t.value||!e.value)return;w();const nt=I.getLatLngs()[0],K=nt.map(X=>[X.lng,X.lat]);K.push(K[0]);const tt=c0([K]),_t=d0(tt),G=nt.reduce((X,Rt,D)=>{const Z=nt[(D+1)%nt.length];return X+Rt.distanceTo(Z)},0);nt.forEach((X,Rt)=>{const D=E(X,"#059669");b.push(D),y(D,I,()=>{const Z=nt[(Rt-1+nt.length)%nt.length],ut=nt[(Rt+1)%nt.length],vt=X.distanceTo(Z),xt=X.distanceTo(ut);return[Ai(vt,"m","Distance au point précédent"),Ai(xt,"m","Distance au point suivant"),Ai(G,"m","Périmètre total"),Ai(_t,"m²","Surface")].join("<br>")}),D.on("mousedown",Z=>{if(ze.DomEvent.stopPropagation(Z),!t.value)return;t.value.dragging.disable();let ut=!0;const vt=dt=>{ut&&(ze.DomEvent.stopPropagation(dt),nt[Rt]=dt.latlng,I.setLatLngs([nt]),D.setLatLng(dt.latlng),j())},xt=()=>{ut=!1,t.value&&(t.value.off("mousemove",vt),document.removeEventListener("mouseup",xt),t.value.dragging.enable())};t.value.on("mousemove",vt),document.addEventListener("mouseup",xt)})});const j=()=>{const X=I.getLatLngs()[0];b.slice(X.length).forEach(Rt=>{e.value&&e.value.removeLayer(Rt)}),b=b.slice(0,X.length);for(let Rt=0;Rt<X.length;Rt++){const D=X[(Rt+1)%X.length],Z=wt(X[Rt],D),ut=E(Z,"#2563EB");b.push(ut),y(ut,I,()=>{const vt=X[Rt].distanceTo(D);return[Ai(vt,"m","Longueur du segment"),Ai(G,"m","Périmètre total"),Ai(_t,"m²","Surface")].join("<br>")})}};j()},$=I=>{var D,Z,ut,vt,xt;if(!t.value||!e.value)return;w();const nt=ze.latLng(0,0),K=(((D=I.getCenter)==null?void 0:D.call(I))||((Z=I.getLatLng)==null?void 0:Z.call(I)))??nt,tt=((ut=I.getRadius)==null?void 0:ut.call(I))??0,_t=((vt=I.getStartAngle)==null?void 0:vt.call(I))??0,G=((xt=I.getStopAngle)==null?void 0:xt.call(I))??180,j=[_t,G];j.forEach((dt,St)=>{const Mt=dt*Math.PI/180,Kt=ze.latLng(K.lat+tt/111319.9*Math.sin(Mt),K.lng+tt/(111319.9*Math.cos(K.lat*Math.PI/180))*Math.cos(Mt)),re=E(Kt,"#DC2626");b.push(re),y(re,I,()=>`Angle: ${y0(dt)}`),re.on("mousedown",it=>{if(!t.value)return;ze.DomEvent.stopPropagation(it),t.value.dragging.disable();let ht=!0;const It=b.find(Gt=>Gt.options.color==="#2563EB");It&&It.setStyle({opacity:0,fillOpacity:0});const Dt=Gt=>{if(!ht||!t.value)return;const se=Math.atan2(Gt.latlng.lat-K.lat,Gt.latlng.lng-K.lng)*180/Math.PI,Qt=ze.latLng(K.lat+tt/111319.9*Math.sin(se*Math.PI/180),K.lng+tt/(111319.9*Math.cos(K.lat*Math.PI/180))*Math.cos(se*Math.PI/180));re.setLatLng(Qt),St===0?I.setAngles(se,I.getStopAngle()):I.setAngles(I.getStartAngle(),se);const oe=C(I,"Semicircle");I.properties={...oe},I.fire("properties:updated",{shape:I,properties:I.properties})},lt=()=>{ht=!1,t.value&&(t.value.off("mousemove",Dt),document.removeEventListener("mouseup",lt),t.value.dragging.enable(),$(I))};t.value.on("mousemove",Dt),document.addEventListener("mouseup",lt)})});const X=E(K,"#059669");if(b.push(X),y(X,I,()=>{const dt=Math.PI*tt*tt*I.getOpeningAngle()/360;return[Ai(tt,"m","Rayon"),Ai(dt,"m²","Surface"),`Angle: ${y0(I.getOpeningAngle())}`].join("<br>")}),I.getOpeningAngle()>5){const St=((_t+G)/2+360)%360*Math.PI/180,Mt=ze.latLng(K.lat+tt/111319.9*Math.sin(St),K.lng+tt/(111319.9*Math.cos(K.lat*Math.PI/180))*Math.cos(St)),Kt=E(Mt,"#2563EB");b.push(Kt),y(Kt,I,()=>Ai(tt,"m","Rayon")),Kt.on("mousedown",re=>{if(!t.value)return;ze.DomEvent.stopPropagation(re),t.value.dragging.disable();let it=!0;const ht=Dt=>{if(!it)return;const lt=K.distanceTo(Dt.latlng);I.setRadius(lt);const Gt=Math.atan2(Dt.latlng.lat-K.lat,Dt.latlng.lng-K.lng)*180/Math.PI,se=I.getOpeningAngle();if((Gt-_t+360)%360<=se){const oe=ze.latLng(K.lat+lt/111319.9*Math.sin(St),K.lng+lt/(111319.9*Math.cos(K.lat*Math.PI/180))*Math.cos(St));Kt.setLatLng(oe),kt(I,"Semicircle"),j.forEach((Ot,Lt)=>{const ie=Ot*Math.PI/180,_e=ze.latLng(K.lat+lt/111319.9*Math.sin(ie),K.lng+lt/(111319.9*Math.cos(K.lat*Math.PI/180))*Math.cos(ie));b[Lt].setLatLng(_e)})}},It=()=>{it=!1,t.value&&(t.value.off("mousemove",ht),document.removeEventListener("mouseup",It),t.value.dragging.enable())};t.value.on("mousemove",ht),document.addEventListener("mouseup",It)})}X.on("mousedown",dt=>{if(!t.value)return;ze.DomEvent.stopPropagation(dt),t.value.dragging.disable();let St=!0;const Mt=re=>{if(!St)return;I.setCenter(re.latlng),X.setLatLng(re.latlng);const it=C(I,"Semicircle");I.properties={...it},I.fire("properties:updated",{shape:I,properties:I.properties}),$(I)},Kt=()=>{St=!1,t.value&&(t.value.off("mousemove",Mt),document.removeEventListener("mouseup",Kt),t.value.dragging.enable())};t.value.on("mousemove",Mt),document.addEventListener("mouseup",Kt)})},J=I=>{var nt,K,tt,_t,G,j;if(!(!t.value||!r.value)){if(console.log("[generateTempControlPoints] Génération des points temporaires pour",{layerType:I.constructor.name,properties:I.properties}),r.value.clearLayers(),I instanceof ze.Circle){const X=I.getLatLng(),Rt=I.getRadius(),D=E(X,"#059669");r.value.addLayer(D),[0,45,90,135,180,225,270,315].forEach(Z=>{const ut=Z*Math.PI/180,vt=ze.latLng(X.lat+Rt/111319.9*Math.sin(ut),X.lng+Rt/(111319.9*Math.cos(X.lat*Math.PI/180))*Math.cos(ut)),xt=E(vt,"#2563EB");r.value.addLayer(xt)})}else if(I instanceof ze.Rectangle){const X=I.getBounds(),Rt=X.getCenter(),D=[X.getNorthWest(),X.getNorthEast(),X.getSouthEast(),X.getSouthWest()],Z=E(Rt,"#059669");r.value.addLayer(Z),D.forEach(ut=>{const vt=E(ut,"#DC2626");r.value.addLayer(vt)}),D.forEach((ut,vt)=>{const xt=D[(vt+1)%4],dt=wt(ut,xt),St=E(dt,"#2563EB");r.value.addLayer(St)})}else if(I instanceof Ml||((nt=I.properties)==null?void 0:nt.type)==="Semicircle"){const X=ze.latLng(0,0),Rt=(((K=I.getCenter)==null?void 0:K.call(I))||((tt=I.getLatLng)==null?void 0:tt.call(I)))??X,D=((_t=I.getRadius)==null?void 0:_t.call(I))??0,Z=((G=I.getStartAngle)==null?void 0:G.call(I))??0,ut=((j=I.getStopAngle)==null?void 0:j.call(I))??180,vt=E(Rt,"#059669");r.value.addLayer(vt),[Z,ut].forEach(Kt=>{const re=Kt*Math.PI/180,it=ze.latLng(Rt.lat+D/111319.9*Math.sin(re),Rt.lng+D/(111319.9*Math.cos(Rt.lat*Math.PI/180))*Math.cos(re)),ht=E(it,"#DC2626");r.value.addLayer(ht)});const dt=((Z+ut)/2+360)%360*Math.PI/180,St=ze.latLng(Rt.lat+D/111319.9*Math.sin(dt),Rt.lng+D/(111319.9*Math.cos(Rt.lat*Math.PI/180))*Math.cos(dt)),Mt=E(St,"#2563EB");r.value.addLayer(Mt)}else if(I instanceof ze.Polyline){const X=I.getLatLngs();X.forEach(Rt=>{const D=E(Rt,"#059669");r.value.addLayer(D)});for(let Rt=0;Rt<X.length-1;Rt++){const D=wt(X[Rt],X[Rt+1]),Z=E(D,"#2563EB");r.value.addLayer(Z)}}console.log("[generateTempControlPoints] Points temporaires générés",{count:r.value.getLayers().length})}};return _h(()=>{t.value&&(t.value.remove(),t.value=null)}),{map:t,featureGroup:e,controlPointsGroup:n,tempControlPointsGroup:r,currentTool:o,selectedShape:l,isDrawing:c,initMap:O,setDrawingTool:F,updateShapeStyle:V,updateShapeProperties:Y,updateTextFixedSize:R,adjustView:q,clearActiveControlPoints:w}}function jw(){const t=Re(null),e=Re(""),n=Re("Ville"),r={Ville:Ie.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors",maxZoom:19}),Satellite:Ie.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"© Esri",maxZoom:19}),Cadastre:Ie.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{attribution:"Cadastre - Carte © IGN/Geoportail",maxZoom:19})};return{map:t,searchQuery:e,currentBaseMap:n,baseMaps:r,initMap:d=>{t.value=d,Ie.control.layers(r).addTo(d),r[n.value].addTo(d)},searchLocation:async()=>{if(!(!t.value||!e.value))try{const m=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(e.value)}`)).json();if(m&&m.length>0){const{lat:y,lon:b}=m[0];t.value.setView([y,b],13)}}catch(d){console.error("Erreur lors de la recherche de localisation:",d)}},changeBaseMap:d=>{!t.value||!r[d]||(Object.values(r).forEach(m=>{var y;(y=t.value)!=null&&y.hasLayer(m)&&t.value.removeLayer(m)}),r[d].addTo(t.value),n.value=d)}}}const Bh=xd("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[]}),getters:{getPlanById:t=>e=>t.plans.find(n=>n.id===e),hasUnsavedChanges:t=>t.unsavedChanges,getCurrentPlanHistory:t=>t.planHistory},actions:{async fetchPlans(){var e,n;const t=cs();this.loading=!0;try{let r="/plans/";t.isDealer?r+="?concessionnaire="+((e=t.user)==null?void 0:e.id):t.isClient&&(r+="?utilisateur="+((n=t.user)==null?void 0:n.id));const o=await xn.get(r);this.plans=o.data}catch(r){throw this.error="Erreur lors du chargement des plans",r}finally{this.loading=!1}},async fetchPlansWithDetails(){var e,n;const t=cs();this.loading=!0;try{let r="/plans/";const o={include_details:!0};t.isDealer?o.concessionnaire=(e=t.user)==null?void 0:e.id:t.isClient&&(o.utilisateur=(n=t.user)==null?void 0:n.id);const l=await xn.get(r,{params:o});return this.plans=l.data,l}catch(r){throw this.error="Erreur lors du chargement des plans",r}finally{this.loading=!1}},async createPlan(t){this.loading=!0;try{console.log("Creating plan with data:",t);const e=await xn.post("/plans/",t);return console.log("Plan creation response:",e.data),this.plans.push(e.data),e.data}catch(e){const n=e instanceof Error?e.message:String(e);throw console.error("Error creating plan:",n),this.error="Erreur lors de la création du plan",e}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(t){var e,n;if(this.unsavedChanges){this.loading=!0;try{const r=await xn.patch(`/plans/${t}/`,{...this.currentPlan,version:((e=this.currentPlan)==null?void 0:e.version)||1}),o=this.plans.findIndex(l=>l.id===t);return o!==-1&&(this.plans[o]=r.data),((n=this.currentPlan)==null?void 0:n.id)===t&&(this.currentPlan=r.data),this.unsavedChanges=!1,r.data}catch(r){throw this.error="Erreur lors de la sauvegarde du plan",r}finally{this.loading=!1}}},async updatePlanDetails(t,e){var n;try{const r=await xn.patch(`/plans/${t}/`,e),o=this.plans.findIndex(l=>l.id===t);return o!==-1&&(this.plans[o]={...this.plans[o],...r.data}),((n=this.currentPlan)==null?void 0:n.id)===t&&(this.currentPlan={...this.currentPlan,...r.data}),r.data}catch(r){throw console.error("Erreur lors de la mise à jour du plan:",r),r}},async fetchPlanHistory(t){this.loading=!0;try{const e=await xn.get(`/plans/${t}/historique/`);return this.planHistory=e.data,e.data}catch(e){throw this.error="Erreur lors de la récupération de l'historique",e}finally{this.loading=!1}},async restorePlanVersion(t,e){var n;this.loading=!0;try{const r=await xn.post(`/plans/${t}/restaurer/`,{version_id:e});((n=this.currentPlan)==null?void 0:n.id)===t&&(this.currentPlan=r.data);const o=this.plans.findIndex(l=>l.id===t);return o!==-1&&(this.plans[o]=r.data),r.data}catch(r){throw this.error="Erreur lors de la restauration de la version",r}finally{this.loading=!1}},setCurrentPlan(t){this.currentPlan=t,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.stopAutoSave()},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(t){var e;this.loading=!0;try{await xn.delete(`/plans/${t}/`),this.plans=this.plans.filter(n=>n.id!==t),((e=this.currentPlan)==null?void 0:e.id)===t&&this.clearCurrentPlan()}catch(n){throw this.error="Erreur lors de la suppression du plan",n}finally{this.loading=!1}}}}),Kg=xd("drawing",{state:()=>({currentPlanId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null}),getters:{hasUnsavedChanges:t=>t.unsavedChanges,getCurrentElements:t=>t.elements,getSelectedElement:t=>t.selectedElement,getCurrentTool:t=>t.currentTool,getCurrentStyle:t=>t.currentStyle,getLastUsedType:t=>t.lastUsedType},actions:{setCurrentPlan(t){this.currentPlanId=t,t===null&&this.clearElements()},clearCurrentPlan(){this.currentPlanId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1},addElement(t){!t.type_forme&&this.lastUsedType&&(t.type_forme=this.lastUsedType),this.elements.push(t),this.unsavedChanges=!0},updateElement(t){const e=this.elements.findIndex(n=>n.id===t.id);if(e!==-1){const n=this.elements[e].type_forme;this.elements[e]={...t,type_forme:n},this.unsavedChanges=!0}},removeElement(t){const e=this.elements.findIndex(n=>n.id===t);e!==-1&&(this.elements.splice(e,1),this.unsavedChanges=!0)},selectElement(t){this.selectedElement=t},setCurrentTool(t){this.currentTool=t,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(t)&&(this.lastUsedType=t)},setCurrentStyle(t){this.currentStyle={...this.currentStyle,...t}},async loadPlanElements(t){var e;this.loading=!0;try{const r=(await xn.get(`/plans/${t}/`)).data;this.elements=r.formes.map(o=>({...o,type_forme:o.type_forme})),this.currentPlanId=t,this.unsavedChanges=!1,r.preferences&&(r.preferences.currentTool&&this.setCurrentTool(r.preferences.currentTool),r.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...r.preferences.currentStyle}),r.preferences.lastUsedType&&(this.lastUsedType=r.preferences.lastUsedType)),(e=this.selectedElement)!=null&&e.type_forme&&this.setCurrentTool(this.selectedElement.type_forme)}catch(n){throw console.error("Erreur lors du chargement des éléments:",n),this.error="Erreur lors du chargement des éléments du plan",n}finally{this.loading=!1}},async saveToPlan(t){Bh(),this.loading=!0;try{const e=t||this.currentPlanId;if(!e)throw new Error("Aucun plan sélectionné pour la sauvegarde");const n=this.elements.map(o=>({...o,type_forme:o.type_forme||this.lastUsedType})),r=await xn.post(`/plans/${e}/save_with_elements/`,{formes:n,connexions:[],annotations:[],preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}});return this.elements=r.data.formes.map(o=>({...o,type_forme:o.type_forme})),this.unsavedChanges=!1,r.data}catch(e){throw console.error("Erreur lors de la sauvegarde:",e),this.error="Erreur lors de la sauvegarde du plan",e}finally{this.loading=!1}}}}),zw={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},Uw={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4"},qw={key:0,class:"mb-4"},$w={key:0,class:"animate-pulse"},Gw=["value"],Vw={key:1,class:"mb-4"},Hw={key:0,class:"animate-pulse"},Ww=["disabled"],Zw={value:null},Kw=["value"],Yw={class:"mb-4"},Jw={class:"mb-6"},Xw={class:"flex justify-end space-x-3"},Qw=["disabled"],tx={key:0},ex={key:1},Yg=Es({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","dealerSelected","clientSelected"],setup(t,{expose:e,emit:n}){const r=t,o=n,l=cs(),c=Bh();Re(!1);const d=Re(!1),m=Re(null),y=Re([]),b=Re([]),w=Re(null),E=Re(null),C=Re(!1),R=Re(!1),O=Re({nom:"",description:"",concessionnaire:null,client:null}),q=Nn(()=>{var et,ct;return((et=l.user)==null?void 0:et.user_type)==="admin"?O.value.nom.trim()&&O.value.concessionnaire&&O.value.client:((ct=l.user)==null?void 0:ct.user_type)==="dealer"?O.value.nom.trim()&&O.value.client:O.value.nom.trim()});us(()=>O.value.concessionnaire,async et=>{if(r.modelValue)if(console.log("[NewPlanModal] Concessionnaire changed:",et),et){const ct=y.value.find(Bt=>Bt.id===et);ct&&await Y(ct)}else b.value=[],w.value=null,E.value=null,O.value.client=null}),us(()=>r.modelValue,et=>{var ct,Bt;et?((ct=l.user)==null?void 0:ct.user_type)==="admin"?F():((Bt=l.user)==null?void 0:Bt.user_type)==="dealer"&&V(l.user.id):(O.value={nom:"",description:"",concessionnaire:null,client:null},w.value=null,E.value=null,b.value=[],y.value=[],m.value=null)}),Nn(()=>{var et;return((et=l.user)==null?void 0:et.user_type)==="admin"?w.value?b.value:[]:b.value});async function F(){console.log("[NewPlanModal] Loading dealers..."),C.value=!0;try{const et=await xn.get("/users/",{params:{role:"CONCESSIONNAIRE"}});console.log("[NewPlanModal] Dealers loaded:",et.data),y.value=et.data}catch(et){console.error("[NewPlanModal] Error loading dealers:",et)}finally{C.value=!1}}async function V(et){console.log("[NewPlanModal] Loading clients for dealer:",et),R.value=!0;try{const ct=await xn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:et}});console.log("[NewPlanModal] Clients loaded:",ct.data),b.value=Array.isArray(ct.data)?ct.data:[ct.data]}catch(ct){console.error("[NewPlanModal] Error loading clients:",ct),b.value=[]}finally{R.value=!1}}async function Y(et){if(r.modelValue){console.log("[NewPlanModal] Selecting dealer:",et),w.value=et,O.value.concessionnaire=et.id,R.value=!0;try{const ct=await xn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:et.id}});console.log("[NewPlanModal] Clients loaded:",ct.data),b.value=Array.isArray(ct.data)?ct.data:[ct.data]}catch(ct){console.error("[NewPlanModal] Error loading clients:",ct),b.value=[]}finally{R.value=!1}}}function Ct(et){r.modelValue&&(console.log("[NewPlanModal] Client selected:",et),E.value=et,O.value.client=et.id,o("clientSelected",et))}function kt(){o("update:modelValue",!1),O.value={nom:"",description:"",concessionnaire:null,client:null},w.value=null,E.value=null,b.value=[],m.value=null}async function wt(){var et,ct,Bt,Yt,$;m.value=null,d.value=!0;try{const J={nom:O.value.nom.trim(),description:O.value.description.trim()};((et=l.user)==null?void 0:et.user_type)==="admin"?(J.concessionnaire=O.value.concessionnaire,J.client=O.value.client):((ct=l.user)==null?void 0:ct.user_type)==="dealer"?(J.concessionnaire=l.user.id,J.client=O.value.client):((Bt=l.user)==null?void 0:Bt.user_type)==="client"&&(J.client=l.user.id);const I=await c.createPlan(J);o("created",I.id),kt()}catch(J){console.error("[NewPlanModal] Error creating plan:",J),m.value=(($=(Yt=J.response)==null?void 0:Yt.data)==null?void 0:$.detail)||J.message||"Une erreur est survenue lors de la création du plan"}finally{d.value=!1}}return e({dealers:y,dealerClients:b,selectedDealer:w,selectedClient:E,loadDealers:F,loadDealerClients:V,selectDealer:Y,selectClient:Ct}),(et,ct)=>{var Bt,Yt;return et.modelValue?(ue(),fe("div",zw,[A("div",Uw,[A("div",{class:"flex justify-between items-center mb-4"},[ct[5]||(ct[5]=A("h2",{class:"text-xl font-semibold text-gray-900"},"Créer un nouveau plan",-1)),A("button",{onClick:kt,class:"text-gray-400 hover:text-gray-500"},ct[4]||(ct[4]=[A("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),kn(l).isAdmin?(ue(),fe("div",qw,[ct[8]||(ct[8]=A("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Concessionnaire",-1)),C.value?(ue(),fe("div",$w,ct[6]||(ct[6]=[A("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):jn((ue(),fe("select",{key:1,"onUpdate:modelValue":ct[0]||(ct[0]=$=>O.value.concessionnaire=$),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[ct[7]||(ct[7]=A("option",{value:null},"Sélectionnez un concessionnaire",-1)),(ue(!0),fe(Mn,null,Wn(y.value,$=>(ue(),fe("option",{key:$.id,value:$.id},Ce($.first_name)+" "+Ce($.last_name)+" ("+Ce($.company_name)+") ",9,Gw))),128))],512)),[[$s,O.value.concessionnaire]])])):an("",!0),((Bt=kn(l).user)==null?void 0:Bt.user_type)==="admin"||((Yt=kn(l).user)==null?void 0:Yt.user_type)==="dealer"?(ue(),fe("div",Vw,[ct[10]||(ct[10]=A("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Client",-1)),R.value?(ue(),fe("div",Hw,ct[9]||(ct[9]=[A("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):jn((ue(),fe("select",{key:1,"onUpdate:modelValue":ct[1]||(ct[1]=$=>O.value.client=$),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!b.value.length},[A("option",Zw,Ce(b.value.length?"Sélectionnez un client":"Aucun client disponible"),1),(ue(!0),fe(Mn,null,Wn(b.value,$=>(ue(),fe("option",{key:$.id,value:$.id},Ce($.first_name)+" "+Ce($.last_name)+" ("+Ce($.company_name)+") ",9,Kw))),128))],8,Ww)),[[$s,O.value.client]])])):an("",!0),A("div",Yw,[ct[11]||(ct[11]=A("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),jn(A("input",{"onUpdate:modelValue":ct[2]||(ct[2]=$=>O.value.nom=$),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[Bi,O.value.nom]])]),A("div",Jw,[ct[12]||(ct[12]=A("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),jn(A("textarea",{"onUpdate:modelValue":ct[3]||(ct[3]=$=>O.value.description=$),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[Bi,O.value.description]])]),A("div",Xw,[A("button",{onClick:kt,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),A("button",{onClick:wt,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!q.value||d.value},[d.value?(ue(),fe("span",tx,"Création en cours...")):(ue(),fe("span",ex,"Créer le plan"))],8,Qw)])])])):an("",!0)}}});function oi(t){"@babel/helpers - typeof";return oi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oi(t)}var Zr=Uint8Array,Vs=Uint16Array,Ad=Int32Array,Th=new Zr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Nh=new Zr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Wf=new Zr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Jg=function(t,e){for(var n=new Vs(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var o=new Ad(n[30]),r=1;r<30;++r)for(var l=n[r];l<n[r+1];++l)o[l]=l-n[r]<<5|r;return{b:n,r:o}},Xg=Jg(Th,2),Qg=Xg.b,Zf=Xg.r;Qg[28]=258,Zf[258]=28;var t1=Jg(Nh,0),nx=t1.b,b0=t1.r,Kf=new Vs(32768);for(var bi=0;bi<32768;++bi){var il=(bi&43690)>>1|(bi&21845)<<1;il=(il&52428)>>2|(il&13107)<<2,il=(il&61680)>>4|(il&3855)<<4,Kf[bi]=((il&65280)>>8|(il&255)<<8)>>1}var ca=function(t,e,n){for(var r=t.length,o=0,l=new Vs(e);o<r;++o)t[o]&&++l[t[o]-1];var c=new Vs(e);for(o=1;o<e;++o)c[o]=c[o-1]+l[o-1]<<1;var d;if(n){d=new Vs(1<<e);var m=15-e;for(o=0;o<r;++o)if(t[o])for(var y=o<<4|t[o],b=e-t[o],w=c[t[o]-1]++<<b,E=w|(1<<b)-1;w<=E;++w)d[Kf[w]>>m]=y}else for(d=new Vs(r),o=0;o<r;++o)t[o]&&(d[o]=Kf[c[t[o]-1]++]>>15-t[o]);return d},dl=new Zr(288);for(var bi=0;bi<144;++bi)dl[bi]=8;for(var bi=144;bi<256;++bi)dl[bi]=9;for(var bi=256;bi<280;++bi)dl[bi]=7;for(var bi=280;bi<288;++bi)dl[bi]=8;var sc=new Zr(32);for(var bi=0;bi<32;++bi)sc[bi]=5;var ix=ca(dl,9,0),rx=ca(dl,9,1),sx=ca(sc,5,0),ox=ca(sc,5,1),ff=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},No=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},df=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},Bd=function(t){return(t+7)/8|0},e1=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Zr(t.subarray(e,n))},ax=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Oo=function(t,e,n){var r=new Error(e||ax[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,Oo),!n)throw r;return r},lx=function(t,e,n,r){var o=t.length,l=0;if(!o||e.f&&!e.l)return n||new Zr(0);var c=!n,d=c||e.i!=2,m=e.i;c&&(n=new Zr(o*3));var y=function(re){var it=n.length;if(re>it){var ht=new Zr(Math.max(it*2,re));ht.set(n),n=ht}},b=e.f||0,w=e.p||0,E=e.b||0,C=e.l,R=e.d,O=e.m,q=e.n,F=o*8;do{if(!C){b=No(t,w,1);var V=No(t,w+1,3);if(w+=3,V)if(V==1)C=rx,R=ox,O=9,q=5;else if(V==2){var wt=No(t,w,31)+257,et=No(t,w+10,15)+4,ct=wt+No(t,w+5,31)+1;w+=14;for(var Bt=new Zr(ct),Yt=new Zr(19),$=0;$<et;++$)Yt[Wf[$]]=No(t,w+$*3,7);w+=et*3;for(var J=ff(Yt),I=(1<<J)-1,nt=ca(Yt,J,1),$=0;$<ct;){var K=nt[No(t,w,I)];w+=K&15;var Y=K>>4;if(Y<16)Bt[$++]=Y;else{var tt=0,_t=0;for(Y==16?(_t=3+No(t,w,3),w+=2,tt=Bt[$-1]):Y==17?(_t=3+No(t,w,7),w+=3):Y==18&&(_t=11+No(t,w,127),w+=7);_t--;)Bt[$++]=tt}}var G=Bt.subarray(0,wt),j=Bt.subarray(wt);O=ff(G),q=ff(j),C=ca(G,O,1),R=ca(j,q,1)}else Oo(1);else{var Y=Bd(w)+4,Ct=t[Y-4]|t[Y-3]<<8,kt=Y+Ct;if(kt>o){m&&Oo(0);break}d&&y(E+Ct),n.set(t.subarray(Y,kt),E),e.b=E+=Ct,e.p=w=kt*8,e.f=b;continue}if(w>F){m&&Oo(0);break}}d&&y(E+131072);for(var X=(1<<O)-1,Rt=(1<<q)-1,D=w;;D=w){var tt=C[df(t,w)&X],Z=tt>>4;if(w+=tt&15,w>F){m&&Oo(0);break}if(tt||Oo(2),Z<256)n[E++]=Z;else if(Z==256){D=w,C=null;break}else{var ut=Z-254;if(Z>264){var $=Z-257,vt=Th[$];ut=No(t,w,(1<<vt)-1)+Qg[$],w+=vt}var xt=R[df(t,w)&Rt],dt=xt>>4;xt||Oo(3),w+=xt&15;var j=nx[dt];if(dt>3){var vt=Nh[dt];j+=df(t,w)&(1<<vt)-1,w+=vt}if(w>F){m&&Oo(0);break}d&&y(E+131072);var St=E+ut;if(E<j){var Mt=l-j,Kt=Math.min(j,St);for(Mt+E<0&&Oo(3);E<Kt;++E)n[E]=r[Mt+E]}for(;E<St;++E)n[E]=n[E-j]}}e.l=C,e.p=D,e.b=E,e.f=b,C&&(b=1,e.m=O,e.d=R,e.n=q)}while(!b);return E!=n.length&&c?e1(n,0,E):n.subarray(0,E)},Ba=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Iu=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},pf=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var o=n.length,l=n.slice();if(!o)return{t:i1,l:0};if(o==1){var c=new Zr(n[0].s+1);return c[n[0].s]=1,{t:c,l:1}}n.sort(function(kt,wt){return kt.f-wt.f}),n.push({s:-1,f:25001});var d=n[0],m=n[1],y=0,b=1,w=2;for(n[0]={s:-1,f:d.f+m.f,l:d,r:m};b!=o-1;)d=n[n[y].f<n[w].f?y++:w++],m=n[y!=b&&n[y].f<n[w].f?y++:w++],n[b++]={s:-1,f:d.f+m.f,l:d,r:m};for(var E=l[0].s,r=1;r<o;++r)l[r].s>E&&(E=l[r].s);var C=new Vs(E+1),R=Yf(n[b-1],C,0);if(R>e){var r=0,O=0,q=R-e,F=1<<q;for(l.sort(function(wt,et){return C[et.s]-C[wt.s]||wt.f-et.f});r<o;++r){var V=l[r].s;if(C[V]>e)O+=F-(1<<R-C[V]),C[V]=e;else break}for(O>>=q;O>0;){var Y=l[r].s;C[Y]<e?O-=1<<e-C[Y]++-1:++r}for(;r>=0&&O;--r){var Ct=l[r].s;C[Ct]==e&&(--C[Ct],++O)}R=e}return{t:new Zr(C),l:R}},Yf=function(t,e,n){return t.s==-1?Math.max(Yf(t.l,e,n+1),Yf(t.r,e,n+1)):e[t.s]=n},w0=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Vs(++e),r=0,o=t[0],l=1,c=function(m){n[r++]=m},d=1;d<=e;++d)if(t[d]==o&&d!=e)++l;else{if(!o&&l>2){for(;l>138;l-=138)c(32754);l>2&&(c(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(c(o),--l;l>6;l-=6)c(8304);l>2&&(c(l-3<<5|8208),l=0)}for(;l--;)c(o);l=1,o=t[d]}return{c:n.subarray(0,r),n:e}},Ru=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},n1=function(t,e,n){var r=n.length,o=Bd(e+2);t[o]=r&255,t[o+1]=r>>8,t[o+2]=t[o]^255,t[o+3]=t[o+1]^255;for(var l=0;l<r;++l)t[o+l+4]=n[l];return(o+4+r)*8},x0=function(t,e,n,r,o,l,c,d,m,y,b){Ba(e,b++,n),++o[256];for(var w=pf(o,15),E=w.t,C=w.l,R=pf(l,15),O=R.t,q=R.l,F=w0(E),V=F.c,Y=F.n,Ct=w0(O),kt=Ct.c,wt=Ct.n,et=new Vs(19),ct=0;ct<V.length;++ct)++et[V[ct]&31];for(var ct=0;ct<kt.length;++ct)++et[kt[ct]&31];for(var Bt=pf(et,7),Yt=Bt.t,$=Bt.l,J=19;J>4&&!Yt[Wf[J-1]];--J);var I=y+5<<3,nt=Ru(o,dl)+Ru(l,sc)+c,K=Ru(o,E)+Ru(l,O)+c+14+3*J+Ru(et,Yt)+2*et[16]+3*et[17]+7*et[18];if(m>=0&&I<=nt&&I<=K)return n1(e,b,t.subarray(m,m+y));var tt,_t,G,j;if(Ba(e,b,1+(K<nt)),b+=2,K<nt){tt=ca(E,C,0),_t=E,G=ca(O,q,0),j=O;var X=ca(Yt,$,0);Ba(e,b,Y-257),Ba(e,b+5,wt-1),Ba(e,b+10,J-4),b+=14;for(var ct=0;ct<J;++ct)Ba(e,b+3*ct,Yt[Wf[ct]]);b+=3*J;for(var Rt=[V,kt],D=0;D<2;++D)for(var Z=Rt[D],ct=0;ct<Z.length;++ct){var ut=Z[ct]&31;Ba(e,b,X[ut]),b+=Yt[ut],ut>15&&(Ba(e,b,Z[ct]>>5&127),b+=Z[ct]>>12)}}else tt=ix,_t=dl,G=sx,j=sc;for(var ct=0;ct<d;++ct){var vt=r[ct];if(vt>255){var ut=vt>>18&31;Iu(e,b,tt[ut+257]),b+=_t[ut+257],ut>7&&(Ba(e,b,vt>>23&31),b+=Th[ut]);var xt=vt&31;Iu(e,b,G[xt]),b+=j[xt],xt>3&&(Iu(e,b,vt>>5&8191),b+=Nh[xt])}else Iu(e,b,tt[vt]),b+=_t[vt]}return Iu(e,b,tt[256]),b+_t[256]},ux=new Ad([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),i1=new Zr(0),cx=function(t,e,n,r,o,l){var c=l.z||t.length,d=new Zr(r+c+5*(1+Math.ceil(c/7e3))+o),m=d.subarray(r,d.length-o),y=l.l,b=(l.r||0)&7;if(e){b&&(m[0]=l.r>>3);for(var w=ux[e-1],E=w>>13,C=w&8191,R=(1<<n)-1,O=l.p||new Vs(32768),q=l.h||new Vs(R+1),F=Math.ceil(n/3),V=2*F,Y=function(It){return(t[It]^t[It+1]<<F^t[It+2]<<V)&R},Ct=new Ad(25e3),kt=new Vs(288),wt=new Vs(32),et=0,ct=0,Bt=l.i||0,Yt=0,$=l.w||0,J=0;Bt+2<c;++Bt){var I=Y(Bt),nt=Bt&32767,K=q[I];if(O[nt]=K,q[I]=nt,$<=Bt){var tt=c-Bt;if((et>7e3||Yt>24576)&&(tt>423||!y)){b=x0(t,m,0,Ct,kt,wt,ct,Yt,J,Bt-J,b),Yt=et=ct=0,J=Bt;for(var _t=0;_t<286;++_t)kt[_t]=0;for(var _t=0;_t<30;++_t)wt[_t]=0}var G=2,j=0,X=C,Rt=nt-K&32767;if(tt>2&&I==Y(Bt-Rt))for(var D=Math.min(E,tt)-1,Z=Math.min(32767,Bt),ut=Math.min(258,tt);Rt<=Z&&--X&&nt!=K;){if(t[Bt+G]==t[Bt+G-Rt]){for(var vt=0;vt<ut&&t[Bt+vt]==t[Bt+vt-Rt];++vt);if(vt>G){if(G=vt,j=Rt,vt>D)break;for(var xt=Math.min(Rt,vt-2),dt=0,_t=0;_t<xt;++_t){var St=Bt-Rt+_t&32767,Mt=O[St],Kt=St-Mt&32767;Kt>dt&&(dt=Kt,K=St)}}}nt=K,K=O[nt],Rt+=nt-K&32767}if(j){Ct[Yt++]=268435456|Zf[G]<<18|b0[j];var re=Zf[G]&31,it=b0[j]&31;ct+=Th[re]+Nh[it],++kt[257+re],++wt[it],$=Bt+G,++et}else Ct[Yt++]=t[Bt],++kt[t[Bt]]}}for(Bt=Math.max(Bt,$);Bt<c;++Bt)Ct[Yt++]=t[Bt],++kt[t[Bt]];b=x0(t,m,y,Ct,kt,wt,ct,Yt,J,Bt-J,b),y||(l.r=b&7|m[b/8|0]<<3,b-=7,l.h=q,l.p=O,l.i=Bt,l.w=$)}else{for(var Bt=l.w||0;Bt<c+y;Bt+=65535){var ht=Bt+65535;ht>=c&&(m[b/8|0]=y,ht=c),b=n1(m,b+1,t.subarray(Bt,ht))}l.i=c}return e1(d,0,r+Bd(b)+o)},r1=function(){var t=1,e=0;return{p:function(n){for(var r=t,o=e,l=n.length|0,c=0;c!=l;){for(var d=Math.min(c+2655,l);c<d;++c)o+=r+=n[c];r=(r&65535)+15*(r>>16),o=(o&65535)+15*(o>>16)}t=r,e=o},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},hx=function(t,e,n,r,o){if(!o&&(o={l:1},e.dictionary)){var l=e.dictionary.subarray(-32768),c=new Zr(l.length+t.length);c.set(l),c.set(t,l.length),t=c,o.w=l.length}return cx(t,e.level==null?6:e.level,e.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,o)},s1=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},fx=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var o=r1();o.p(e.dictionary),s1(t,2,o.d())}},dx=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Oo(6,"invalid zlib data"),(t[1]>>5&1)==1&&Oo(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function Jf(t,e){e||(e={});var n=r1();n.p(t);var r=hx(t,e,e.dictionary?6:2,4);return fx(r,e),s1(r,r.length-4,n.d()),r}function px(t,e){return lx(t.subarray(dx(t),-4),{i:2},e,e)}var mx=typeof TextDecoder<"u"&&new TextDecoder,gx=0;try{mx.decode(i1,{stream:!0}),gx=1}catch{}var vn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function mf(){vn.console&&typeof vn.console.log=="function"&&vn.console.log.apply(vn.console,arguments)}var ai={log:mf,warn:function(t){vn.console&&(typeof vn.console.warn=="function"?vn.console.warn.apply(vn.console,arguments):mf.call(null,arguments))},error:function(t){vn.console&&(typeof vn.console.error=="function"?vn.console.error.apply(vn.console,arguments):mf(t))}};function gf(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Al(r.response,e,n)},r.onerror=function(){ai.error("could not download file")},r.send()}function L0(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Mc(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Yu,Xf,Al=vn.saveAs||((typeof window>"u"?"undefined":oi(window))!=="object"||window!==vn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=vn.URL||vn.webkitURL,o=document.createElement("a");e=e||t.name||"download",o.download=e,o.rel="noopener",typeof t=="string"?(o.href=t,o.origin!==location.origin?L0(o.href)?gf(t,e,n):Mc(o,o.target="_blank"):Mc(o)):(o.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(o.href)},4e4),setTimeout(function(){Mc(o)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(L0(t))gf(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){Mc(r)})}else navigator.msSaveOrOpenBlob(function(o,l){return l===void 0?l={autoBom:!1}:oi(l)!=="object"&&(ai.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return gf(t,e,n);var o=t.type==="application/octet-stream",l=/constructor/i.test(vn.HTMLElement)||vn.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||o&&l)&&(typeof FileReader>"u"?"undefined":oi(FileReader))==="object"){var d=new FileReader;d.onloadend=function(){var b=d.result;b=c?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=b:location=b,r=null},d.readAsDataURL(t)}else{var m=vn.URL||vn.webkitURL,y=m.createObjectURL(t);r?r.location=y:location.href=y,r=null,setTimeout(function(){m.revokeObjectURL(y)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function o1(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(d){return[parseInt(d[1]),parseInt(d[2]),parseInt(d[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(d){return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(d){return[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]}}],r=0;r<n.length;r++){var o=n[r].re,l=n[r].process,c=o.exec(t);c&&(e=l(c),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var d=this.r.toString(16),m=this.g.toString(16),y=this.b.toString(16);return d.length==1&&(d="0"+d),m.length==1&&(m="0"+m),y.length==1&&(y="0"+y),"#"+d+m+y}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function _f(t,e){var n=t[0],r=t[1],o=t[2],l=t[3];n=Ur(n,r,o,l,e[0],7,-680876936),l=Ur(l,n,r,o,e[1],12,-389564586),o=Ur(o,l,n,r,e[2],17,606105819),r=Ur(r,o,l,n,e[3],22,-1044525330),n=Ur(n,r,o,l,e[4],7,-176418897),l=Ur(l,n,r,o,e[5],12,1200080426),o=Ur(o,l,n,r,e[6],17,-1473231341),r=Ur(r,o,l,n,e[7],22,-45705983),n=Ur(n,r,o,l,e[8],7,1770035416),l=Ur(l,n,r,o,e[9],12,-1958414417),o=Ur(o,l,n,r,e[10],17,-42063),r=Ur(r,o,l,n,e[11],22,-1990404162),n=Ur(n,r,o,l,e[12],7,1804603682),l=Ur(l,n,r,o,e[13],12,-40341101),o=Ur(o,l,n,r,e[14],17,-1502002290),n=qr(n,r=Ur(r,o,l,n,e[15],22,1236535329),o,l,e[1],5,-165796510),l=qr(l,n,r,o,e[6],9,-1069501632),o=qr(o,l,n,r,e[11],14,643717713),r=qr(r,o,l,n,e[0],20,-373897302),n=qr(n,r,o,l,e[5],5,-701558691),l=qr(l,n,r,o,e[10],9,38016083),o=qr(o,l,n,r,e[15],14,-660478335),r=qr(r,o,l,n,e[4],20,-405537848),n=qr(n,r,o,l,e[9],5,568446438),l=qr(l,n,r,o,e[14],9,-1019803690),o=qr(o,l,n,r,e[3],14,-187363961),r=qr(r,o,l,n,e[8],20,1163531501),n=qr(n,r,o,l,e[13],5,-1444681467),l=qr(l,n,r,o,e[2],9,-51403784),o=qr(o,l,n,r,e[7],14,1735328473),n=$r(n,r=qr(r,o,l,n,e[12],20,-1926607734),o,l,e[5],4,-378558),l=$r(l,n,r,o,e[8],11,-2022574463),o=$r(o,l,n,r,e[11],16,1839030562),r=$r(r,o,l,n,e[14],23,-35309556),n=$r(n,r,o,l,e[1],4,-1530992060),l=$r(l,n,r,o,e[4],11,1272893353),o=$r(o,l,n,r,e[7],16,-155497632),r=$r(r,o,l,n,e[10],23,-1094730640),n=$r(n,r,o,l,e[13],4,681279174),l=$r(l,n,r,o,e[0],11,-358537222),o=$r(o,l,n,r,e[3],16,-722521979),r=$r(r,o,l,n,e[6],23,76029189),n=$r(n,r,o,l,e[9],4,-640364487),l=$r(l,n,r,o,e[12],11,-421815835),o=$r(o,l,n,r,e[15],16,530742520),n=Gr(n,r=$r(r,o,l,n,e[2],23,-995338651),o,l,e[0],6,-198630844),l=Gr(l,n,r,o,e[7],10,1126891415),o=Gr(o,l,n,r,e[14],15,-1416354905),r=Gr(r,o,l,n,e[5],21,-57434055),n=Gr(n,r,o,l,e[12],6,1700485571),l=Gr(l,n,r,o,e[3],10,-1894986606),o=Gr(o,l,n,r,e[10],15,-1051523),r=Gr(r,o,l,n,e[1],21,-2054922799),n=Gr(n,r,o,l,e[8],6,1873313359),l=Gr(l,n,r,o,e[15],10,-30611744),o=Gr(o,l,n,r,e[6],15,-1560198380),r=Gr(r,o,l,n,e[13],21,1309151649),n=Gr(n,r,o,l,e[4],6,-145523070),l=Gr(l,n,r,o,e[11],10,-1120210379),o=Gr(o,l,n,r,e[2],15,718787259),r=Gr(r,o,l,n,e[9],21,-343485551),t[0]=ul(n,t[0]),t[1]=ul(r,t[1]),t[2]=ul(o,t[2]),t[3]=ul(l,t[3])}function Dh(t,e,n,r,o,l){return e=ul(ul(e,t),ul(r,l)),ul(e<<o|e>>>32-o,n)}function Ur(t,e,n,r,o,l,c){return Dh(e&n|~e&r,t,e,o,l,c)}function qr(t,e,n,r,o,l,c){return Dh(e&r|n&~r,t,e,o,l,c)}function $r(t,e,n,r,o,l,c){return Dh(e^n^r,t,e,o,l,c)}function Gr(t,e,n,r,o,l,c){return Dh(n^(e|~r),t,e,o,l,c)}function a1(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)_f(r,_x(t.substring(e-64,e)));t=t.substring(e-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)o[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(_f(r,o),e=0;e<16;e++)o[e]=0;return o[14]=8*n,_f(r,o),r}function _x(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}Yu=vn.atob.bind(vn),Xf=vn.btoa.bind(vn);var C0="0123456789abcdef".split("");function vx(t){for(var e="",n=0;n<4;n++)e+=C0[t>>8*n+4&15]+C0[t>>8*n&15];return e}function yx(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Qf(t){return a1(t).map(yx).join("")}var bx=function(t){for(var e=0;e<t.length;e++)t[e]=vx(t[e]);return t.join("")}(a1("hello"))!="5d41402abc4b2a76b9719d911017c592";function ul(t,e){if(bx){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function td(t,e){var n,r,o,l;if(t!==n){for(var c=(o=t,l=1+(256/t.length>>0),new Array(l+1).join(o)),d=[],m=0;m<256;m++)d[m]=m;var y=0;for(m=0;m<256;m++){var b=d[m];y=(y+b+c.charCodeAt(m))%256,d[m]=d[y],d[y]=b}n=t,r=d}else d=r;var w=e.length,E=0,C=0,R="";for(m=0;m<w;m++)C=(C+(b=d[E=(E+1)%256]))%256,d[E]=d[C],d[C]=b,c=d[(d[E]+d[C])%256],R+=String.fromCharCode(e.charCodeAt(m)^c);return R}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var k0={print:4,modify:8,copy:16,"annot-forms":32};function au(t,e,n,r){this.v=1,this.r=2;var o=192;t.forEach(function(d){if(k0.perm!==void 0)throw new Error("Invalid permission: "+d);o+=k0[d]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var l=(e+this.padding).substr(0,32),c=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(l,c),this.P=-(1+(255^o)),this.encryptionKey=Qf(l+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=td(this.encryptionKey,this.padding)}function lu(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var o=t.charCodeAt(r);o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?e+="#"+("0"+o.toString(16)).slice(-2):e+=t[r]}return e}function P0(t){if(oi(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,o){if(o=o||!1,typeof n!="string"||typeof r!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var l=Math.random().toString(35);return e[n][l]=[r,!!o],l},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),o=[];for(var l in e[n]){var c=e[n][l];try{c[0].apply(t,r)}catch(d){vn.console&&ai.error("jsPDF PubSub Error",d.message,d)}c[1]&&o.push(l)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function ah(t){if(!(this instanceof ah))return new ah(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function l1(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Tl(t,e,n,r,o){if(!(this instanceof Tl))return new Tl(t,e,n,r,o);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,l1.call(this,r,o)}function uu(t,e,n,r,o){if(!(this instanceof uu))return new uu(t,e,n,r,o);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,l1.call(this,r,o)}function gn(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],o=arguments[2],l=arguments[3],c=[],d=1,m=16,y="S",b=null;oi(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,o=t.format||o,l=t.compress||t.compressPdf||l,(b=t.encryption||null)!==null&&(b.userPassword=b.userPassword||"",b.ownerPassword=b.ownerPassword||"",b.userPermissions=b.userPermissions||[]),d=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(m=t.floatPrecision),y=t.defaultPathOperation||"S"),c=t.filters||(l===!0?["FlateEncode"]:c),r=r||"mm",n=(""+(n||"P")).toLowerCase();var w=t.putOnlyUsedFonts||!1,E={},C={internal:{},__private__:{}};C.__private__.PubSub=P0;var R="1.3",O=C.__private__.getPdfVersion=function(){return R};C.__private__.setPdfVersion=function(x){R=x};var q={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};C.__private__.getPageFormats=function(){return q};var F=C.__private__.getPageFormat=function(x){return q[x]};o=o||"a4";var V={COMPAT:"compat",ADVANCED:"advanced"},Y=V.COMPAT;function Ct(){this.saveGraphicsState(),lt(new ln(Ne,0,0,-Ne,0,no()*Ne).toString()+" cm"),this.setFontSize(this.getFontSize()/Ne),y="n",Y=V.ADVANCED}function kt(){this.restoreGraphicsState(),y="S",Y=V.COMPAT}var wt=C.__private__.combineFontStyleAndFontWeight=function(x,H){if(x=="bold"&&H=="normal"||x=="bold"&&H==400||x=="normal"&&H=="italic"||x=="bold"&&H=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return H&&(x=H==400||H==="normal"?x==="italic"?"italic":"normal":H!=700&&H!=="bold"||x!=="normal"?(H==700?"bold":H)+""+x:"bold"),x};C.advancedAPI=function(x){var H=Y===V.COMPAT;return H&&Ct.call(this),typeof x!="function"||(x(this),H&&kt.call(this)),this},C.compatAPI=function(x){var H=Y===V.ADVANCED;return H&&kt.call(this),typeof x!="function"||(x(this),H&&Ct.call(this)),this},C.isAdvancedAPI=function(){return Y===V.ADVANCED};var et,ct=function(x){if(Y!==V.ADVANCED)throw new Error(x+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Bt=C.roundToPrecision=C.__private__.roundToPrecision=function(x,H){var At=e||H;if(isNaN(x)||isNaN(At))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return x.toFixed(At).replace(/0+$/,"")};et=C.hpf=C.__private__.hpf=typeof m=="number"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return Bt(x,m)}:m==="smart"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return Bt(x,x>-1&&x<1?16:5)}:function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return Bt(x,16)};var Yt=C.f2=C.__private__.f2=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f2");return Bt(x,2)},$=C.__private__.f3=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f3");return Bt(x,3)},J=C.scale=C.__private__.scale=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.scale");return Y===V.COMPAT?x*Ne:Y===V.ADVANCED?x:void 0},I=function(x){return Y===V.COMPAT?no()-x:Y===V.ADVANCED?x:void 0},nt=function(x){return J(I(x))};C.__private__.setPrecision=C.setPrecision=function(x){typeof parseInt(x,10)=="number"&&(e=parseInt(x,10))};var K,tt="00000000000000000000000000000000",_t=C.__private__.getFileId=function(){return tt},G=C.__private__.setFileId=function(x){return tt=x!==void 0&&/^[a-fA-F0-9]{32}$/.test(x)?x.toUpperCase():tt.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),b!==null&&(Ci=new au(b.userPermissions,b.userPassword,b.ownerPassword,tt)),tt};C.setFileId=function(x){return G(x),this},C.getFileId=function(){return _t()};var j=C.__private__.convertDateToPDFDate=function(x){var H=x.getTimezoneOffset(),At=H<0?"+":"-",qt=Math.floor(Math.abs(H/60)),ne=Math.abs(H%60),ye=[At,ut(qt),"'",ut(ne),"'"].join("");return["D:",x.getFullYear(),ut(x.getMonth()+1),ut(x.getDate()),ut(x.getHours()),ut(x.getMinutes()),ut(x.getSeconds()),ye].join("")},X=C.__private__.convertPDFDateToDate=function(x){var H=parseInt(x.substr(2,4),10),At=parseInt(x.substr(6,2),10)-1,qt=parseInt(x.substr(8,2),10),ne=parseInt(x.substr(10,2),10),ye=parseInt(x.substr(12,2),10),Be=parseInt(x.substr(14,2),10);return new Date(H,At,qt,ne,ye,Be,0)},Rt=C.__private__.setCreationDate=function(x){var H;if(x===void 0&&(x=new Date),x instanceof Date)H=j(x);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(x))throw new Error("Invalid argument passed to jsPDF.setCreationDate");H=x}return K=H},D=C.__private__.getCreationDate=function(x){var H=K;return x==="jsDate"&&(H=X(K)),H};C.setCreationDate=function(x){return Rt(x),this},C.getCreationDate=function(x){return D(x)};var Z,ut=C.__private__.padd2=function(x){return("0"+parseInt(x)).slice(-2)},vt=C.__private__.padd2Hex=function(x){return("00"+(x=x.toString())).substr(x.length)},xt=0,dt=[],St=[],Mt=0,Kt=[],re=[],it=!1,ht=St,It=function(){xt=0,Mt=0,St=[],dt=[],Kt=[],Xr=$e(),Mr=$e()};C.__private__.setCustomOutputDestination=function(x){it=!0,ht=x};var Dt=function(x){it||(ht=x)};C.__private__.resetCustomOutputDestination=function(){it=!1,ht=St};var lt=C.__private__.out=function(x){return x=x.toString(),Mt+=x.length+1,ht.push(x),ht},Gt=C.__private__.write=function(x){return lt(arguments.length===1?x.toString():Array.prototype.join.call(arguments," "))},se=C.__private__.getArrayBuffer=function(x){for(var H=x.length,At=new ArrayBuffer(H),qt=new Uint8Array(At);H--;)qt[H]=x.charCodeAt(H);return At},Qt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];C.__private__.getStandardFonts=function(){return Qt};var oe=t.fontSize||16;C.__private__.setFontSize=C.setFontSize=function(x){return oe=Y===V.ADVANCED?x/Ne:x,this};var Ot,Lt=C.__private__.getFontSize=C.getFontSize=function(){return Y===V.COMPAT?oe:oe*Ne},ie=t.R2L||!1;C.__private__.setR2L=C.setR2L=function(x){return ie=x,this},C.__private__.getR2L=C.getR2L=function(){return ie};var _e,Le=C.__private__.setZoomMode=function(x){var H=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(x))Ot=x;else if(isNaN(x)){if(H.indexOf(x)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+x+'" is not recognized.');Ot=x}else Ot=parseInt(x,10)};C.__private__.getZoomMode=function(){return Ot};var zt,De=C.__private__.setPageMode=function(x){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(x)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+x+'" is not recognized.');_e=x};C.__private__.getPageMode=function(){return _e};var Te=C.__private__.setLayoutMode=function(x){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(x)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+x+'" is not recognized.');zt=x};C.__private__.getLayoutMode=function(){return zt},C.__private__.setDisplayMode=C.setDisplayMode=function(x,H,At){return Le(x),Te(H),De(At),this};var Ue={title:"",subject:"",author:"",keywords:"",creator:""};C.__private__.getDocumentProperty=function(x){if(Object.keys(Ue).indexOf(x)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ue[x]},C.__private__.getDocumentProperties=function(){return Ue},C.__private__.setDocumentProperties=C.setProperties=C.setDocumentProperties=function(x){for(var H in Ue)Ue.hasOwnProperty(H)&&x[H]&&(Ue[H]=x[H]);return this},C.__private__.setDocumentProperty=function(x,H){if(Object.keys(Ue).indexOf(x)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ue[x]=H};var He,Ne,Sn,en,Jn,cn={},Ln={},Xn=[],qe={},Pr={},Rn={},Li={},Oi=null,qn=0,hn=[],Je=new P0(C),Ye=t.hotfixes||[],ui={},Sr={},Er=[],ln=function x(H,At,qt,ne,ye,Be){if(!(this instanceof x))return new x(H,At,qt,ne,ye,Be);isNaN(H)&&(H=1),isNaN(At)&&(At=0),isNaN(qt)&&(qt=0),isNaN(ne)&&(ne=1),isNaN(ye)&&(ye=0),isNaN(Be)&&(Be=0),this._matrix=[H,At,qt,ne,ye,Be]};Object.defineProperty(ln.prototype,"sx",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(ln.prototype,"shy",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(ln.prototype,"shx",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(ln.prototype,"sy",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(ln.prototype,"tx",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(ln.prototype,"ty",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(ln.prototype,"a",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(ln.prototype,"b",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(ln.prototype,"c",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(ln.prototype,"d",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(ln.prototype,"e",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(ln.prototype,"f",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(ln.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ln.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ln.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ln.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ln.prototype.join=function(x){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(et).join(x)},ln.prototype.multiply=function(x){var H=x.sx*this.sx+x.shy*this.shx,At=x.sx*this.shy+x.shy*this.sy,qt=x.shx*this.sx+x.sy*this.shx,ne=x.shx*this.shy+x.sy*this.sy,ye=x.tx*this.sx+x.ty*this.shx+this.tx,Be=x.tx*this.shy+x.ty*this.sy+this.ty;return new ln(H,At,qt,ne,ye,Be)},ln.prototype.decompose=function(){var x=this.sx,H=this.shy,At=this.shx,qt=this.sy,ne=this.tx,ye=this.ty,Be=Math.sqrt(x*x+H*H),Ge=(x/=Be)*At+(H/=Be)*qt;At-=x*Ge,qt-=H*Ge;var Ze=Math.sqrt(At*At+qt*qt);return Ge/=Ze,x*(qt/=Ze)<H*(At/=Ze)&&(x=-x,H=-H,Ge=-Ge,Be=-Be),{scale:new ln(Be,0,0,Ze,0,0),translate:new ln(1,0,0,1,ne,ye),rotate:new ln(x,H,-H,x,0,0),skew:new ln(1,0,Ge,1,0,0)}},ln.prototype.toString=function(x){return this.join(" ")},ln.prototype.inversed=function(){var x=this.sx,H=this.shy,At=this.shx,qt=this.sy,ne=this.tx,ye=this.ty,Be=1/(x*qt-H*At),Ge=qt*Be,Ze=-H*Be,rn=-At*Be,mn=x*Be;return new ln(Ge,Ze,rn,mn,-Ge*ne-rn*ye,-Ze*ne-mn*ye)},ln.prototype.applyToPoint=function(x){var H=x.x*this.sx+x.y*this.shx+this.tx,At=x.x*this.shy+x.y*this.sy+this.ty;return new So(H,At)},ln.prototype.applyToRectangle=function(x){var H=this.applyToPoint(x),At=this.applyToPoint(new So(x.x+x.w,x.y+x.h));return new Dr(H.x,H.y,At.x-H.x,At.y-H.y)},ln.prototype.clone=function(){var x=this.sx,H=this.shy,At=this.shx,qt=this.sy,ne=this.tx,ye=this.ty;return new ln(x,H,At,qt,ne,ye)},C.Matrix=ln;var Jr=C.matrixMult=function(x,H){return H.multiply(x)},hs=new ln(1,0,0,1,0,0);C.unitMatrix=C.identityMatrix=hs;var ar=function(x,H){if(!Pr[x]){var At=(H instanceof Tl?"Sh":"P")+(Object.keys(qe).length+1).toString(10);H.id=At,Pr[x]=At,qe[At]=H,Je.publish("addPattern",H)}};C.ShadingPattern=Tl,C.TilingPattern=uu,C.addShadingPattern=function(x,H){return ct("addShadingPattern()"),ar(x,H),this},C.beginTilingPattern=function(x){ct("beginTilingPattern()"),xa(x.boundingBox[0],x.boundingBox[1],x.boundingBox[2]-x.boundingBox[0],x.boundingBox[3]-x.boundingBox[1],x.matrix)},C.endTilingPattern=function(x,H){ct("endTilingPattern()"),H.stream=re[Z].join(`
`),ar(x,H),Je.publish("endTilingPattern",H),Er.pop().restore()};var $n=C.__private__.newObject=function(){var x=$e();return lr(x,!0),x},$e=C.__private__.newObjectDeferred=function(){return xt++,dt[xt]=function(){return Mt},xt},lr=function(x,H){return H=typeof H=="boolean"&&H,dt[x]=Mt,H&&lt(x+" 0 obj"),x},go=C.__private__.newAdditionalObject=function(){var x={objId:$e(),content:""};return Kt.push(x),x},Xr=$e(),Mr=$e(),vr=C.__private__.decodeColorString=function(x){var H=x.split(" ");if(H.length!==2||H[1]!=="g"&&H[1]!=="G")H.length===5&&(H[4]==="k"||H[4]==="K")&&(H=[(1-H[0])*(1-H[3]),(1-H[1])*(1-H[3]),(1-H[2])*(1-H[3]),"r"]);else{var At=parseFloat(H[0]);H=[At,At,At,"r"]}for(var qt="#",ne=0;ne<3;ne++)qt+=("0"+Math.floor(255*parseFloat(H[ne])).toString(16)).slice(-2);return qt},Ar=C.__private__.encodeColorString=function(x){var H;typeof x=="string"&&(x={ch1:x});var At=x.ch1,qt=x.ch2,ne=x.ch3,ye=x.ch4,Be=x.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof At=="string"&&At.charAt(0)!=="#"){var Ge=new o1(At);if(Ge.ok)At=Ge.toHex();else if(!/^\d*\.?\d*$/.test(At))throw new Error('Invalid color "'+At+'" passed to jsPDF.encodeColorString.')}if(typeof At=="string"&&/^#[0-9A-Fa-f]{3}$/.test(At)&&(At="#"+At[1]+At[1]+At[2]+At[2]+At[3]+At[3]),typeof At=="string"&&/^#[0-9A-Fa-f]{6}$/.test(At)){var Ze=parseInt(At.substr(1),16);At=Ze>>16&255,qt=Ze>>8&255,ne=255&Ze}if(qt===void 0||ye===void 0&&At===qt&&qt===ne)if(typeof At=="string")H=At+" "+Be[0];else switch(x.precision){case 2:H=Yt(At/255)+" "+Be[0];break;case 3:default:H=$(At/255)+" "+Be[0]}else if(ye===void 0||oi(ye)==="object"){if(ye&&!isNaN(ye.a)&&ye.a===0)return H=["1.","1.","1.",Be[1]].join(" ");if(typeof At=="string")H=[At,qt,ne,Be[1]].join(" ");else switch(x.precision){case 2:H=[Yt(At/255),Yt(qt/255),Yt(ne/255),Be[1]].join(" ");break;default:case 3:H=[$(At/255),$(qt/255),$(ne/255),Be[1]].join(" ")}}else if(typeof At=="string")H=[At,qt,ne,ye,Be[2]].join(" ");else switch(x.precision){case 2:H=[Yt(At),Yt(qt),Yt(ne),Yt(ye),Be[2]].join(" ");break;case 3:default:H=[$(At),$(qt),$(ne),$(ye),Be[2]].join(" ")}return H},Xi=C.__private__.getFilters=function(){return c},yr=C.__private__.putStream=function(x){var H=(x=x||{}).data||"",At=x.filters||Xi(),qt=x.alreadyAppliedFilters||[],ne=x.addLength1||!1,ye=H.length,Be=x.objectId,Ge=function(Pi){return Pi};if(b!==null&&Be===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");b!==null&&(Ge=Ci.encryptor(Be,0));var Ze={};At===!0&&(At=["FlateEncode"]);var rn=x.additionalKeyValues||[],mn=(Ze=gn.API.processDataByFilters!==void 0?gn.API.processDataByFilters(H,At):{data:H,reverseChain:[]}).reverseChain+(Array.isArray(qt)?qt.join(" "):qt.toString());if(Ze.data.length!==0&&(rn.push({key:"Length",value:Ze.data.length}),ne===!0&&rn.push({key:"Length1",value:ye})),mn.length!=0)if(mn.split("/").length-1==1)rn.push({key:"Filter",value:mn});else{rn.push({key:"Filter",value:"["+mn+"]"});for(var Tn=0;Tn<rn.length;Tn+=1)if(rn[Tn].key==="DecodeParms"){for(var si=[],Fn=0;Fn<Ze.reverseChain.split("/").length-1;Fn+=1)si.push("null");si.push(rn[Tn].value),rn[Tn].value="["+si.join(" ")+"]"}}lt("<<");for(var Gn=0;Gn<rn.length;Gn++)lt("/"+rn[Gn].key+" "+rn[Gn].value);lt(">>"),Ze.data.length!==0&&(lt("stream"),lt(Ge(Ze.data)),lt("endstream"))},fs=C.__private__.putPage=function(x){var H=x.number,At=x.data,qt=x.objId,ne=x.contentsObjId;lr(qt,!0),lt("<</Type /Page"),lt("/Parent "+x.rootDictionaryObjId+" 0 R"),lt("/Resources "+x.resourceDictionaryObjId+" 0 R"),lt("/MediaBox ["+parseFloat(et(x.mediaBox.bottomLeftX))+" "+parseFloat(et(x.mediaBox.bottomLeftY))+" "+et(x.mediaBox.topRightX)+" "+et(x.mediaBox.topRightY)+"]"),x.cropBox!==null&&lt("/CropBox ["+et(x.cropBox.bottomLeftX)+" "+et(x.cropBox.bottomLeftY)+" "+et(x.cropBox.topRightX)+" "+et(x.cropBox.topRightY)+"]"),x.bleedBox!==null&&lt("/BleedBox ["+et(x.bleedBox.bottomLeftX)+" "+et(x.bleedBox.bottomLeftY)+" "+et(x.bleedBox.topRightX)+" "+et(x.bleedBox.topRightY)+"]"),x.trimBox!==null&&lt("/TrimBox ["+et(x.trimBox.bottomLeftX)+" "+et(x.trimBox.bottomLeftY)+" "+et(x.trimBox.topRightX)+" "+et(x.trimBox.topRightY)+"]"),x.artBox!==null&&lt("/ArtBox ["+et(x.artBox.bottomLeftX)+" "+et(x.artBox.bottomLeftY)+" "+et(x.artBox.topRightX)+" "+et(x.artBox.topRightY)+"]"),typeof x.userUnit=="number"&&x.userUnit!==1&&lt("/UserUnit "+x.userUnit),Je.publish("putPage",{objId:qt,pageContext:hn[H],pageNumber:H,page:At}),lt("/Contents "+ne+" 0 R"),lt(">>"),lt("endobj");var ye=At.join(`
`);return Y===V.ADVANCED&&(ye+=`
Q`),lr(ne,!0),yr({data:ye,filters:Xi(),objectId:ne}),lt("endobj"),qt},_o=C.__private__.putPages=function(){var x,H,At=[];for(x=1;x<=qn;x++)hn[x].objId=$e(),hn[x].contentsObjId=$e();for(x=1;x<=qn;x++)At.push(fs({number:x,data:re[x],objId:hn[x].objId,contentsObjId:hn[x].contentsObjId,mediaBox:hn[x].mediaBox,cropBox:hn[x].cropBox,bleedBox:hn[x].bleedBox,trimBox:hn[x].trimBox,artBox:hn[x].artBox,userUnit:hn[x].userUnit,rootDictionaryObjId:Xr,resourceDictionaryObjId:Mr}));lr(Xr,!0),lt("<</Type /Pages");var qt="/Kids [";for(H=0;H<qn;H++)qt+=At[H]+" 0 R ";lt(qt+"]"),lt("/Count "+qn),lt(">>"),lt("endobj"),Je.publish("postPutPages")},Uo=function(x){Je.publish("putFont",{font:x,out:lt,newObject:$n,putStream:yr}),x.isAlreadyPutted!==!0&&(x.objectNumber=$n(),lt("<<"),lt("/Type /Font"),lt("/BaseFont /"+lu(x.postScriptName)),lt("/Subtype /Type1"),typeof x.encoding=="string"&&lt("/Encoding /"+x.encoding),lt("/FirstChar 32"),lt("/LastChar 255"),lt(">>"),lt("endobj"))},qo=function(){for(var x in cn)cn.hasOwnProperty(x)&&(w===!1||w===!0&&E.hasOwnProperty(x))&&Uo(cn[x])},As=function(x){x.objectNumber=$n();var H=[];H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Form"}),H.push({key:"BBox",value:"["+[et(x.x),et(x.y),et(x.x+x.width),et(x.y+x.height)].join(" ")+"]"}),H.push({key:"Matrix",value:"["+x.matrix.toString()+"]"});var At=x.pages[1].join(`
`);yr({data:At,additionalKeyValues:H,objectId:x.objectNumber}),lt("endobj")},Ws=function(){for(var x in ui)ui.hasOwnProperty(x)&&As(ui[x])},vo=function(x,H){var At,qt=[],ne=1/(H-1);for(At=0;At<1;At+=ne)qt.push(At);if(qt.push(1),x[0].offset!=0){var ye={offset:0,color:x[0].color};x.unshift(ye)}if(x[x.length-1].offset!=1){var Be={offset:1,color:x[x.length-1].color};x.push(Be)}for(var Ge="",Ze=0,rn=0;rn<qt.length;rn++){for(At=qt[rn];At>x[Ze+1].offset;)Ze++;var mn=x[Ze].offset,Tn=(At-mn)/(x[Ze+1].offset-mn),si=x[Ze].color,Fn=x[Ze+1].color;Ge+=vt(Math.round((1-Tn)*si[0]+Tn*Fn[0]).toString(16))+vt(Math.round((1-Tn)*si[1]+Tn*Fn[1]).toString(16))+vt(Math.round((1-Tn)*si[2]+Tn*Fn[2]).toString(16))}return Ge.trim()},_l=function(x,H){H||(H=21);var At=$n(),qt=vo(x.colors,H),ne=[];ne.push({key:"FunctionType",value:"0"}),ne.push({key:"Domain",value:"[0.0 1.0]"}),ne.push({key:"Size",value:"["+H+"]"}),ne.push({key:"BitsPerSample",value:"8"}),ne.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ne.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),yr({data:qt,additionalKeyValues:ne,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:At}),lt("endobj"),x.objectNumber=$n(),lt("<< /ShadingType "+x.type),lt("/ColorSpace /DeviceRGB");var ye="/Coords ["+et(parseFloat(x.coords[0]))+" "+et(parseFloat(x.coords[1]))+" ";x.type===2?ye+=et(parseFloat(x.coords[2]))+" "+et(parseFloat(x.coords[3])):ye+=et(parseFloat(x.coords[2]))+" "+et(parseFloat(x.coords[3]))+" "+et(parseFloat(x.coords[4]))+" "+et(parseFloat(x.coords[5])),lt(ye+="]"),x.matrix&&lt("/Matrix ["+x.matrix.toString()+"]"),lt("/Function "+At+" 0 R"),lt("/Extend [true true]"),lt(">>"),lt("endobj")},vl=function(x,H){var At=$e(),qt=$n();H.push({resourcesOid:At,objectOid:qt}),x.objectNumber=qt;var ne=[];ne.push({key:"Type",value:"/Pattern"}),ne.push({key:"PatternType",value:"1"}),ne.push({key:"PaintType",value:"1"}),ne.push({key:"TilingType",value:"1"}),ne.push({key:"BBox",value:"["+x.boundingBox.map(et).join(" ")+"]"}),ne.push({key:"XStep",value:et(x.xStep)}),ne.push({key:"YStep",value:et(x.yStep)}),ne.push({key:"Resources",value:At+" 0 R"}),x.matrix&&ne.push({key:"Matrix",value:"["+x.matrix.toString()+"]"}),yr({data:x.stream,additionalKeyValues:ne,objectId:x.objectNumber}),lt("endobj")},$o=function(x){var H;for(H in qe)qe.hasOwnProperty(H)&&(qe[H]instanceof Tl?_l(qe[H]):qe[H]instanceof uu&&vl(qe[H],x))},za=function(x){for(var H in x.objectNumber=$n(),lt("<<"),x)switch(H){case"opacity":lt("/ca "+Yt(x[H]));break;case"stroke-opacity":lt("/CA "+Yt(x[H]))}lt(">>"),lt("endobj")},yl=function(){var x;for(x in Rn)Rn.hasOwnProperty(x)&&za(Rn[x])},yo=function(){for(var x in lt("/XObject <<"),ui)ui.hasOwnProperty(x)&&ui[x].objectNumber>=0&&lt("/"+x+" "+ui[x].objectNumber+" 0 R");Je.publish("putXobjectDict"),lt(">>")},bo=function(){Ci.oid=$n(),lt("<<"),lt("/Filter /Standard"),lt("/V "+Ci.v),lt("/R "+Ci.r),lt("/U <"+Ci.toHexString(Ci.U)+">"),lt("/O <"+Ci.toHexString(Ci.O)+">"),lt("/P "+Ci.P),lt(">>"),lt("endobj")},pa=function(){for(var x in lt("/Font <<"),cn)cn.hasOwnProperty(x)&&(w===!1||w===!0&&E.hasOwnProperty(x))&&lt("/"+x+" "+cn[x].objectNumber+" 0 R");lt(">>")},Ua=function(){if(Object.keys(qe).length>0){for(var x in lt("/Shading <<"),qe)qe.hasOwnProperty(x)&&qe[x]instanceof Tl&&qe[x].objectNumber>=0&&lt("/"+x+" "+qe[x].objectNumber+" 0 R");Je.publish("putShadingPatternDict"),lt(">>")}},br=function(x){if(Object.keys(qe).length>0){for(var H in lt("/Pattern <<"),qe)qe.hasOwnProperty(H)&&qe[H]instanceof C.TilingPattern&&qe[H].objectNumber>=0&&qe[H].objectNumber<x&&lt("/"+H+" "+qe[H].objectNumber+" 0 R");Je.publish("putTilingPatternDict"),lt(">>")}},In=function(){if(Object.keys(Rn).length>0){var x;for(x in lt("/ExtGState <<"),Rn)Rn.hasOwnProperty(x)&&Rn[x].objectNumber>=0&&lt("/"+x+" "+Rn[x].objectNumber+" 0 R");Je.publish("putGStateDict"),lt(">>")}},yn=function(x){lr(x.resourcesOid,!0),lt("<<"),lt("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),pa(),Ua(),br(x.objectOid),In(),yo(),lt(">>"),lt("endobj")},Zs=function(){var x=[];qo(),yl(),Ws(),$o(x),Je.publish("putResources"),x.forEach(yn),yn({resourcesOid:Mr,objectOid:Number.MAX_SAFE_INTEGER}),Je.publish("postPutResources")},Bs=function(){Je.publish("putAdditionalObjects");for(var x=0;x<Kt.length;x++){var H=Kt[x];lr(H.objId,!0),lt(H.content),lt("endobj")}Je.publish("postPutAdditionalObjects")},ds=function(x){Ln[x.fontName]=Ln[x.fontName]||{},Ln[x.fontName][x.fontStyle]=x.id},wo=function(x,H,At,qt,ne){var ye={id:"F"+(Object.keys(cn).length+1).toString(10),postScriptName:x,fontName:H,fontStyle:At,encoding:qt,isStandardFont:ne||!1,metadata:{}};return Je.publish("addFont",{font:ye,instance:this}),cn[ye.id]=ye,ds(ye),ye.id},wn=function(x){for(var H=0,At=Qt.length;H<At;H++){var qt=wo.call(this,x[H][0],x[H][1],x[H][2],Qt[H][3],!0);w===!1&&(E[qt]=!0);var ne=x[H][0].split("-");ds({id:qt,fontName:ne[0],fontStyle:ne[1]||""})}Je.publish("addFonts",{fonts:cn,dictionary:Ln})},zn=function(x){return x.foo=function(){try{return x.apply(this,arguments)}catch(qt){var H=qt.stack||"";~H.indexOf(" at ")&&(H=H.split(" at ")[1]);var At="Error in function "+H.split(`
`)[0].split("<")[0]+": "+qt.message;if(!vn.console)throw new Error(At);vn.console.error(At,qt),vn.alert&&alert(At)}},x.foo.bar=x,x.foo},Ks=function(x,H){var At,qt,ne,ye,Be,Ge,Ze,rn,mn;if(ne=(H=H||{}).sourceEncoding||"Unicode",Be=H.outputEncoding,(H.autoencode||Be)&&cn[He].metadata&&cn[He].metadata[ne]&&cn[He].metadata[ne].encoding&&(ye=cn[He].metadata[ne].encoding,!Be&&cn[He].encoding&&(Be=cn[He].encoding),!Be&&ye.codePages&&(Be=ye.codePages[0]),typeof Be=="string"&&(Be=ye[Be]),Be)){for(Ze=!1,Ge=[],At=0,qt=x.length;At<qt;At++)(rn=Be[x.charCodeAt(At)])?Ge.push(String.fromCharCode(rn)):Ge.push(x[At]),Ge[At].charCodeAt(0)>>8&&(Ze=!0);x=Ge.join("")}for(At=x.length;Ze===void 0&&At!==0;)x.charCodeAt(At-1)>>8&&(Ze=!0),At--;if(!Ze)return x;for(Ge=H.noBOM?[]:[254,255],At=0,qt=x.length;At<qt;At++){if((mn=(rn=x.charCodeAt(At))>>8)>>8)throw new Error("Character at position "+At+" of string '"+x+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ge.push(mn),Ge.push(rn-(mn<<8))}return String.fromCharCode.apply(void 0,Ge)},Ii=C.__private__.pdfEscape=C.pdfEscape=function(x,H){return Ks(x,H).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Gi=C.__private__.beginPage=function(x){re[++qn]=[],hn[qn]={objId:0,contentsObjId:0,userUnit:Number(d),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(x[0]),topRightY:Number(x[1])}},ps(qn),Dt(re[Z])},qa=function(x,H){var At,qt,ne;switch(n=H||n,typeof x=="string"&&(At=F(x.toLowerCase()),Array.isArray(At)&&(qt=At[0],ne=At[1])),Array.isArray(x)&&(qt=x[0]*Ne,ne=x[1]*Ne),isNaN(qt)&&(qt=o[0],ne=o[1]),(qt>14400||ne>14400)&&(ai.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),qt=Math.min(14400,qt),ne=Math.min(14400,ne)),o=[qt,ne],n.substr(0,1)){case"l":ne>qt&&(o=[ne,qt]);break;case"p":qt>ne&&(o=[ne,qt])}Gi(o),ko(Zo),lt(ur),Jo!==0&&lt(Jo+" J"),ki!==0&&lt(ki+" j"),Je.publish("addPage",{pageNumber:qn})},Go=function(x){x>0&&x<=qn&&(re.splice(x,1),hn.splice(x,1),qn--,Z>qn&&(Z=qn),this.setPage(Z))},ps=function(x){x>0&&x<=qn&&(Z=x)},ci=C.__private__.getNumberOfPages=C.getNumberOfPages=function(){return re.length-1},ms=function(x,H,At){var qt,ne=void 0;return At=At||{},x=x!==void 0?x:cn[He].fontName,H=H!==void 0?H:cn[He].fontStyle,qt=x.toLowerCase(),Ln[qt]!==void 0&&Ln[qt][H]!==void 0?ne=Ln[qt][H]:Ln[x]!==void 0&&Ln[x][H]!==void 0?ne=Ln[x][H]:At.disableWarning===!1&&ai.warn("Unable to look up font label for font '"+x+"', '"+H+"'. Refer to getFontList() for available fonts."),ne||At.noFallback||(ne=Ln.times[H])==null&&(ne=Ln.times.normal),ne},xo=C.__private__.putInfo=function(){var x=$n(),H=function(qt){return qt};for(var At in b!==null&&(H=Ci.encryptor(x,0)),lt("<<"),lt("/Producer ("+Ii(H("jsPDF "+gn.version))+")"),Ue)Ue.hasOwnProperty(At)&&Ue[At]&&lt("/"+At.substr(0,1).toUpperCase()+At.substr(1)+" ("+Ii(H(Ue[At]))+")");lt("/CreationDate ("+Ii(H(K))+")"),lt(">>"),lt("endobj")},Ts=C.__private__.putCatalog=function(x){var H=(x=x||{}).rootDictionaryObjId||Xr;switch($n(),lt("<<"),lt("/Type /Catalog"),lt("/Pages "+H+" 0 R"),Ot||(Ot="fullwidth"),Ot){case"fullwidth":lt("/OpenAction [3 0 R /FitH null]");break;case"fullheight":lt("/OpenAction [3 0 R /FitV null]");break;case"fullpage":lt("/OpenAction [3 0 R /Fit]");break;case"original":lt("/OpenAction [3 0 R /XYZ null null 1]");break;default:var At=""+Ot;At.substr(At.length-1)==="%"&&(Ot=parseInt(Ot)/100),typeof Ot=="number"&&lt("/OpenAction [3 0 R /XYZ null null "+Yt(Ot)+"]")}switch(zt||(zt="continuous"),zt){case"continuous":lt("/PageLayout /OneColumn");break;case"single":lt("/PageLayout /SinglePage");break;case"two":case"twoleft":lt("/PageLayout /TwoColumnLeft");break;case"tworight":lt("/PageLayout /TwoColumnRight")}_e&&lt("/PageMode /"+_e),Je.publish("putCatalog"),lt(">>"),lt("endobj")},ma=C.__private__.putTrailer=function(){lt("trailer"),lt("<<"),lt("/Size "+(xt+1)),lt("/Root "+xt+" 0 R"),lt("/Info "+(xt-1)+" 0 R"),b!==null&&lt("/Encrypt "+Ci.oid+" 0 R"),lt("/ID [ <"+tt+"> <"+tt+"> ]"),lt(">>")},Ys=C.__private__.putHeader=function(){lt("%PDF-"+R),lt("%ºß¬à")},ga=C.__private__.putXRef=function(){var x="0000000000";lt("xref"),lt("0 "+(xt+1)),lt("0000000000 65535 f ");for(var H=1;H<=xt;H++)typeof dt[H]=="function"?lt((x+dt[H]()).slice(-10)+" 00000 n "):dt[H]!==void 0?lt((x+dt[H]).slice(-10)+" 00000 n "):lt("0000000000 00000 n ")},Qr=C.__private__.buildDocument=function(){It(),Dt(St),Je.publish("buildDocument"),Ys(),_o(),Bs(),Zs(),b!==null&&bo(),xo(),Ts();var x=Mt;return ga(),ma(),lt("startxref"),lt(""+x),lt("%%EOF"),Dt(re[Z]),St.join(`
`)},Ns=C.__private__.getBlob=function(x){return new Blob([se(x)],{type:"application/pdf"})},Js=C.output=C.__private__.output=zn(function(x,H){switch(typeof(H=H||{})=="string"?H={filename:H}:H.filename=H.filename||"generated.pdf",x){case void 0:return Qr();case"save":C.save(H.filename);break;case"arraybuffer":return se(Qr());case"blob":return Ns(Qr());case"bloburi":case"bloburl":if(vn.URL!==void 0&&typeof vn.URL.createObjectURL=="function")return vn.URL&&vn.URL.createObjectURL(Ns(Qr()))||void 0;ai.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var At="",qt=Qr();try{At=Xf(qt)}catch{At=Xf(unescape(encodeURIComponent(qt)))}return"data:application/pdf;filename="+H.filename+";base64,"+At;case"pdfobjectnewwindow":if(Object.prototype.toString.call(vn)==="[object Window]"){var ne="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ye=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';H.pdfObjectUrl&&(ne=H.pdfObjectUrl,ye="");var Be='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ne+'"'+ye+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(H)+");<\/script></body></html>",Ge=vn.open();return Ge!==null&&Ge.document.write(Be),Ge}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(vn)==="[object Window]"){var Ze='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(H.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+H.filename+'" width="500px" height="400px" /></body></html>',rn=vn.open();if(rn!==null){rn.document.write(Ze);var mn=this;rn.document.documentElement.querySelector("#pdfViewer").onload=function(){rn.document.title=H.filename,rn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(mn.output("bloburl"))}}return rn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(vn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Tn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",H)+'"></iframe></body></html>',si=vn.open();if(si!==null&&(si.document.write(Tn),si.document.title=H.filename),si||typeof safari>"u")return si;break;case"datauri":case"dataurl":return vn.document.location.href=this.output("datauristring",H);default:return null}}),Vo=function(x){return Array.isArray(Ye)===!0&&Ye.indexOf(x)>-1};switch(r){case"pt":Ne=1;break;case"mm":Ne=72/25.4;break;case"cm":Ne=72/2.54;break;case"in":Ne=72;break;case"px":Ne=Vo("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ne=12;break;case"ex":Ne=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Ne=r}var Ci=null;Rt(),G();var $a=function(x){return b!==null?Ci.encryptor(x,0):function(H){return H}},Ho=C.__private__.getPageInfo=C.getPageInfo=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:hn[x].objId,pageNumber:x,pageContext:hn[x]}},_n=C.__private__.getPageInfoByObjId=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var H in hn)if(hn[H].objId===x)break;return Ho(H)},bn=C.__private__.getCurrentPageInfo=C.getCurrentPageInfo=function(){return{objId:hn[Z].objId,pageNumber:Z,pageContext:hn[Z]}};C.addPage=function(){return qa.apply(this,arguments),this},C.setPage=function(){return ps.apply(this,arguments),Dt.call(this,re[Z]),this},C.insertPage=function(x){return this.addPage(),this.movePage(Z,x),this},C.movePage=function(x,H){var At,qt;if(x>H){At=re[x],qt=hn[x];for(var ne=x;ne>H;ne--)re[ne]=re[ne-1],hn[ne]=hn[ne-1];re[H]=At,hn[H]=qt,this.setPage(H)}else if(x<H){At=re[x],qt=hn[x];for(var ye=x;ye<H;ye++)re[ye]=re[ye+1],hn[ye]=hn[ye+1];re[H]=At,hn[H]=qt,this.setPage(H)}return this},C.deletePage=function(){return Go.apply(this,arguments),this},C.__private__.text=C.text=function(x,H,At,qt,ne){var ye,Be,Ge,Ze,rn,mn,Tn,si,Fn,Gn=(qt=qt||{}).scope||this;if(typeof x=="number"&&typeof H=="number"&&(typeof At=="string"||Array.isArray(At))){var Pi=At;At=H,H=x,x=Pi}if(arguments[3]instanceof ln?(ct("The transform parameter of text() with a Matrix value"),Fn=ne):(Ge=arguments[4],Ze=arguments[5],oi(Tn=arguments[3])==="object"&&Tn!==null||(typeof Ge=="string"&&(Ze=Ge,Ge=null),typeof Tn=="string"&&(Ze=Tn,Tn=null),typeof Tn=="number"&&(Ge=Tn,Tn=null),qt={flags:Tn,angle:Ge,align:Ze})),isNaN(H)||isNaN(At)||x==null)throw new Error("Invalid arguments passed to jsPDF.text");if(x.length===0)return Gn;var wi="",xr=!1,Qn=typeof qt.lineHeightFactor=="number"?qt.lineHeightFactor:Co,tr=Gn.internal.scaleFactor;function Ha(Zn){return Zn=Zn.split("	").join(Array(qt.TabLen||9).join(" ")),Ii(Zn,Tn)}function er(Zn){for(var Vn,_i=Zn.concat(),ti=[],ns=_i.length;ns--;)typeof(Vn=_i.shift())=="string"?ti.push(Vn):Array.isArray(Zn)&&(Vn.length===1||Vn[1]===void 0&&Vn[2]===void 0)?ti.push(Vn[0]):ti.push([Vn[0],Vn[1],Vn[2]]);return ti}function Ca(Zn,Vn){var _i;if(typeof Zn=="string")_i=Vn(Zn)[0];else if(Array.isArray(Zn)){for(var ti,ns,oo=Zn.concat(),ws=[],Za=oo.length;Za--;)typeof(ti=oo.shift())=="string"?ws.push(Vn(ti)[0]):Array.isArray(ti)&&typeof ti[0]=="string"&&(ns=Vn(ti[0],ti[1],ti[2]),ws.push([ns[0],ns[1],ns[2]]));_i=ws}return _i}var ts=!1,ka=!0;if(typeof x=="string")ts=!0;else if(Array.isArray(x)){var Is=x.concat();Be=[];for(var Rs,xi=Is.length;xi--;)(typeof(Rs=Is.shift())!="string"||Array.isArray(Rs)&&typeof Rs[0]!="string")&&(ka=!1);ts=ka}if(ts===!1)throw new Error('Type of text must be string or Array. "'+x+'" is not recognized.');typeof x=="string"&&(x=x.match(/[\r?\n]/)?x.split(/\r\n|\r|\n/g):[x]);var ta=oe/Gn.internal.scaleFactor,cr=ta*(Qn-1);switch(qt.baseline){case"bottom":At-=cr;break;case"top":At+=ta-cr;break;case"hanging":At+=ta-2*cr;break;case"middle":At+=ta/2-cr}if((mn=qt.maxWidth||0)>0&&(typeof x=="string"?x=Gn.splitTextToSize(x,mn):Object.prototype.toString.call(x)==="[object Array]"&&(x=x.reduce(function(Zn,Vn){return Zn.concat(Gn.splitTextToSize(Vn,mn))},[]))),ye={text:x,x:H,y:At,options:qt,mutex:{pdfEscape:Ii,activeFontKey:He,fonts:cn,activeFontSize:oe}},Je.publish("preProcessText",ye),x=ye.text,Ge=(qt=ye.options).angle,!(Fn instanceof ln)&&Ge&&typeof Ge=="number"){Ge*=Math.PI/180,qt.rotationDirection===0&&(Ge=-Ge),Y===V.ADVANCED&&(Ge=-Ge);var nr=Math.cos(Ge),ea=Math.sin(Ge);Fn=new ln(nr,ea,-ea,nr,0,0)}else Ge&&Ge instanceof ln&&(Fn=Ge);Y!==V.ADVANCED||Fn||(Fn=hs),(rn=qt.charSpace||Yo)!==void 0&&(wi+=et(J(rn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(si=qt.horizontalScale)!==void 0&&(wi+=et(100*si)+` Tz
`),qt.lang;var Vi=-1,Fs=qt.renderingMode!==void 0?qt.renderingMode:qt.stroke,Lr=Gn.internal.getCurrentPageInfo().pageContext;switch(Fs){case 0:case!1:case"fill":Vi=0;break;case 1:case!0:case"stroke":Vi=1;break;case 2:case"fillThenStroke":Vi=2;break;case 3:case"invisible":Vi=3;break;case 4:case"fillAndAddForClipping":Vi=4;break;case 5:case"strokeAndAddPathForClipping":Vi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Vi=6;break;case 7:case"addToPathForClipping":Vi=7}var Wa=Lr.usedRenderingMode!==void 0?Lr.usedRenderingMode:-1;Vi!==-1?wi+=Vi+` Tr
`:Wa!==-1&&(wi+=`0 Tr
`),Vi!==-1&&(Lr.usedRenderingMode=Vi),Ze=qt.align||"left";var Si,_s=oe*Qn,Or=Gn.internal.pageSize.getWidth(),Mo=cn[He];rn=qt.charSpace||Yo,mn=qt.maxWidth||0,Tn=Object.assign({autoencode:!0,noBOM:!0},qt.flags);var js=[],vs=function(Zn){return Gn.getStringUnitWidth(Zn,{font:Mo,charSpace:rn,fontSize:oe,doKerning:!1})*oe/tr};if(Object.prototype.toString.call(x)==="[object Array]"){var Ri;Be=er(x),Ze!=="left"&&(Si=Be.map(vs));var Ti,es=0;if(Ze==="right"){H-=Si[0],x=[],xi=Be.length;for(var hr=0;hr<xi;hr++)hr===0?(Ti=on(H),Ri=Qi(At)):(Ti=J(es-Si[hr]),Ri=-_s),x.push([Be[hr],Ti,Ri]),es=Si[hr]}else if(Ze==="center"){H-=Si[0]/2,x=[],xi=Be.length;for(var Ir=0;Ir<xi;Ir++)Ir===0?(Ti=on(H),Ri=Qi(At)):(Ti=J((es-Si[Ir])/2),Ri=-_s),x.push([Be[Ir],Ti,Ri]),es=Si[Ir]}else if(Ze==="left"){x=[],xi=Be.length;for(var zs=0;zs<xi;zs++)x.push(Be[zs])}else if(Ze==="justify"&&Mo.encoding==="Identity-H"){x=[],xi=Be.length,mn=mn!==0?mn:Or;for(var Rr=0,hi=0;hi<xi;hi++)if(Ri=hi===0?Qi(At):-_s,Ti=hi===0?on(H):Rr,hi<xi-1){var ys=J((mn-Si[hi])/(Be[hi].split(" ").length-1)),ir=Be[hi].split(" ");x.push([ir[0]+" ",Ti,Ri]),Rr=0;for(var Hi=1;Hi<ir.length;Hi++){var Ao=(vs(ir[Hi-1]+" "+ir[Hi])-vs(ir[Hi]))*tr+ys;Hi==ir.length-1?x.push([ir[Hi],Ao,0]):x.push([ir[Hi]+" ",Ao,0]),Rr-=Ao}}else x.push([Be[hi],Ti,Ri]);x.push(["",Rr,0])}else{if(Ze!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(x=[],xi=Be.length,mn=mn!==0?mn:Or,hi=0;hi<xi;hi++)Ri=hi===0?Qi(At):-_s,Ti=hi===0?on(H):0,hi<xi-1?js.push(et(J((mn-Si[hi])/(Be[hi].split(" ").length-1)))):js.push(0),x.push([Be[hi],Ti,Ri])}}var Pa=typeof qt.R2L=="boolean"?qt.R2L:ie;Pa===!0&&(x=Ca(x,function(Zn,Vn,_i){return[Zn.split("").reverse().join(""),Vn,_i]})),ye={text:x,x:H,y:At,options:qt,mutex:{pdfEscape:Ii,activeFontKey:He,fonts:cn,activeFontSize:oe}},Je.publish("postProcessText",ye),x=ye.text,xr=ye.mutex.isHex||!1;var Sa=cn[He].encoding;Sa!=="WinAnsiEncoding"&&Sa!=="StandardEncoding"||(x=Ca(x,function(Zn,Vn,_i){return[Ha(Zn),Vn,_i]})),Be=er(x),x=[];for(var Wi,fr,io,bs=0,na=1,ro=Array.isArray(Be[0])?na:bs,so="",Us=function(Zn,Vn,_i){var ti="";return _i instanceof ln?(_i=typeof qt.angle=="number"?Jr(_i,new ln(1,0,0,1,Zn,Vn)):Jr(new ln(1,0,0,1,Zn,Vn),_i),Y===V.ADVANCED&&(_i=Jr(new ln(1,0,0,-1,0,0),_i)),ti=_i.join(" ")+` Tm
`):ti=et(Zn)+" "+et(Vn)+` Td
`,ti},Fr=0;Fr<Be.length;Fr++){switch(so="",ro){case na:io=(xr?"<":"(")+Be[Fr][0]+(xr?">":")"),Wi=parseFloat(Be[Fr][1]),fr=parseFloat(Be[Fr][2]);break;case bs:io=(xr?"<":"(")+Be[Fr]+(xr?">":")"),Wi=on(H),fr=Qi(At)}js!==void 0&&js[Fr]!==void 0&&(so=js[Fr]+` Tw
`),Fr===0?x.push(so+Us(Wi,fr,Fn)+io):ro===bs?x.push(so+io):ro===na&&x.push(so+Us(Wi,fr,Fn)+io)}x=ro===bs?x.join(` Tj
T* `):x.join(` Tj
`),x+=` Tj
`;var Fi=`BT
/`;return Fi+=He+" "+oe+` Tf
`,Fi+=et(oe*Qn)+` TL
`,Fi+=gs+`
`,Fi+=wi,Fi+=x,lt(Fi+="ET"),E[He]=!0,Gn};var Br=C.__private__.clip=C.clip=function(x){return lt(x==="evenodd"?"W*":"W"),this};C.clipEvenOdd=function(){return Br("evenodd")},C.__private__.discardPath=C.discardPath=function(){return lt("n"),this};var Dn=C.__private__.isValidStyle=function(x){var H=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(x)!==-1&&(H=!0),H};C.__private__.setDefaultPathOperation=C.setDefaultPathOperation=function(x){return Dn(x)&&(y=x),this};var _a=C.__private__.getStyle=C.getStyle=function(x){var H=y;switch(x){case"D":case"S":H="S";break;case"F":H="f";break;case"FD":case"DF":H="B";break;case"f":case"f*":case"B":case"B*":H=x}return H},Wo=C.close=function(){return lt("h"),this};C.stroke=function(){return lt("S"),this},C.fill=function(x){return Xs("f",x),this},C.fillEvenOdd=function(x){return Xs("f*",x),this},C.fillStroke=function(x){return Xs("B",x),this},C.fillStrokeEvenOdd=function(x){return Xs("B*",x),this};var Xs=function(x,H){oi(H)==="object"?va(H,x):lt(x)},Tr=function(x){x===null||Y===V.ADVANCED&&x===void 0||(x=_a(x),lt(x))};function Ds(x,H,At,qt,ne){var ye=new uu(H||this.boundingBox,At||this.xStep,qt||this.yStep,this.gState,ne||this.matrix);ye.stream=this.stream;var Be=x+"$$"+this.cloneIndex+++"$$";return ar(Be,ye),ye}var va=function(x,H){var At=Pr[x.key],qt=qe[At];if(qt instanceof Tl)lt("q"),lt(Lo(H)),qt.gState&&C.setGState(qt.gState),lt(x.matrix.toString()+" cm"),lt("/"+At+" sh"),lt("Q");else if(qt instanceof uu){var ne=new ln(1,0,0,-1,0,no());x.matrix&&(ne=ne.multiply(x.matrix||hs),At=Ds.call(qt,x.key,x.boundingBox,x.xStep,x.yStep,ne).id),lt("q"),lt("/Pattern cs"),lt("/"+At+" scn"),qt.gState&&C.setGState(qt.gState),lt(H),lt("Q")}},Lo=function(x){switch(x){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},mi=C.moveTo=function(x,H){return lt(et(J(x))+" "+et(nt(H))+" m"),this},wr=C.lineTo=function(x,H){return lt(et(J(x))+" "+et(nt(H))+" l"),this},Os=C.curveTo=function(x,H,At,qt,ne,ye){return lt([et(J(x)),et(nt(H)),et(J(At)),et(nt(qt)),et(J(ne)),et(nt(ye)),"c"].join(" ")),this};C.__private__.line=C.line=function(x,H,At,qt,ne){if(isNaN(x)||isNaN(H)||isNaN(At)||isNaN(qt)||!Dn(ne))throw new Error("Invalid arguments passed to jsPDF.line");return Y===V.COMPAT?this.lines([[At-x,qt-H]],x,H,[1,1],ne||"S"):this.lines([[At-x,qt-H]],x,H,[1,1]).stroke()},C.__private__.lines=C.lines=function(x,H,At,qt,ne,ye){var Be,Ge,Ze,rn,mn,Tn,si,Fn,Gn,Pi,wi,xr;if(typeof x=="number"&&(xr=At,At=H,H=x,x=xr),qt=qt||[1,1],ye=ye||!1,isNaN(H)||isNaN(At)||!Array.isArray(x)||!Array.isArray(qt)||!Dn(ne)||typeof ye!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(mi(H,At),Be=qt[0],Ge=qt[1],rn=x.length,Pi=H,wi=At,Ze=0;Ze<rn;Ze++)(mn=x[Ze]).length===2?(Pi=mn[0]*Be+Pi,wi=mn[1]*Ge+wi,wr(Pi,wi)):(Tn=mn[0]*Be+Pi,si=mn[1]*Ge+wi,Fn=mn[2]*Be+Pi,Gn=mn[3]*Ge+wi,Pi=mn[4]*Be+Pi,wi=mn[5]*Ge+wi,Os(Tn,si,Fn,Gn,Pi,wi));return ye&&Wo(),Tr(ne),this},C.path=function(x){for(var H=0;H<x.length;H++){var At=x[H],qt=At.c;switch(At.op){case"m":mi(qt[0],qt[1]);break;case"l":wr(qt[0],qt[1]);break;case"c":Os.apply(this,qt);break;case"h":Wo()}}return this},C.__private__.rect=C.rect=function(x,H,At,qt,ne){if(isNaN(x)||isNaN(H)||isNaN(At)||isNaN(qt)||!Dn(ne))throw new Error("Invalid arguments passed to jsPDF.rect");return Y===V.COMPAT&&(qt=-qt),lt([et(J(x)),et(nt(H)),et(J(At)),et(J(qt)),"re"].join(" ")),Tr(ne),this},C.__private__.triangle=C.triangle=function(x,H,At,qt,ne,ye,Be){if(isNaN(x)||isNaN(H)||isNaN(At)||isNaN(qt)||isNaN(ne)||isNaN(ye)||!Dn(Be))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[At-x,qt-H],[ne-At,ye-qt],[x-ne,H-ye]],x,H,[1,1],Be,!0),this},C.__private__.roundedRect=C.roundedRect=function(x,H,At,qt,ne,ye,Be){if(isNaN(x)||isNaN(H)||isNaN(At)||isNaN(qt)||isNaN(ne)||isNaN(ye)||!Dn(Be))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ge=4/3*(Math.SQRT2-1);return ne=Math.min(ne,.5*At),ye=Math.min(ye,.5*qt),this.lines([[At-2*ne,0],[ne*Ge,0,ne,ye-ye*Ge,ne,ye],[0,qt-2*ye],[0,ye*Ge,-ne*Ge,ye,-ne,ye],[2*ne-At,0],[-ne*Ge,0,-ne,-ye*Ge,-ne,-ye],[0,2*ye-qt],[0,-ye*Ge,ne*Ge,-ye,ne,-ye]],x+ne,H,[1,1],Be,!0),this},C.__private__.ellipse=C.ellipse=function(x,H,At,qt,ne){if(isNaN(x)||isNaN(H)||isNaN(At)||isNaN(qt)||!Dn(ne))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ye=4/3*(Math.SQRT2-1)*At,Be=4/3*(Math.SQRT2-1)*qt;return mi(x+At,H),Os(x+At,H-Be,x+ye,H-qt,x,H-qt),Os(x-ye,H-qt,x-At,H-Be,x-At,H),Os(x-At,H+Be,x-ye,H+qt,x,H+qt),Os(x+ye,H+qt,x+At,H+Be,x+At,H),Tr(ne),this},C.__private__.circle=C.circle=function(x,H,At,qt){if(isNaN(x)||isNaN(H)||isNaN(At)||!Dn(qt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(x,H,At,At,qt)},C.setFont=function(x,H,At){return At&&(H=wt(H,At)),He=ms(x,H,{disableWarning:!1}),this};var Ga=C.__private__.getFont=C.getFont=function(){return cn[ms.apply(C,arguments)]};C.__private__.getFontList=C.getFontList=function(){var x,H,At={};for(x in Ln)if(Ln.hasOwnProperty(x))for(H in At[x]=[],Ln[x])Ln[x].hasOwnProperty(H)&&At[x].push(H);return At},C.addFont=function(x,H,At,qt,ne){var ye=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ye.indexOf(arguments[3])!==-1?ne=arguments[3]:arguments[3]&&ye.indexOf(arguments[3])==-1&&(At=wt(At,qt)),ne=ne||"Identity-H",wo.call(this,x,H,At,ne)};var Co,Zo=t.lineWidth||.200025,Qs=C.__private__.getLineWidth=C.getLineWidth=function(){return Zo},ko=C.__private__.setLineWidth=C.setLineWidth=function(x){return Zo=x,lt(et(J(x))+" w"),this};C.__private__.setLineDash=gn.API.setLineDash=gn.API.setLineDashPattern=function(x,H){if(x=x||[],H=H||0,isNaN(H)||!Array.isArray(x))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return x=x.map(function(At){return et(J(At))}).join(" "),H=et(J(H)),lt("["+x+"] "+H+" d"),this};var ya=C.__private__.getLineHeight=C.getLineHeight=function(){return oe*Co};C.__private__.getLineHeight=C.getLineHeight=function(){return oe*Co};var Bn=C.__private__.setLineHeightFactor=C.setLineHeightFactor=function(x){return typeof(x=x||1.15)=="number"&&(Co=x),this},ba=C.__private__.getLineHeightFactor=C.getLineHeightFactor=function(){return Co};Bn(t.lineHeight);var on=C.__private__.getHorizontalCoordinate=function(x){return J(x)},Qi=C.__private__.getVerticalCoordinate=function(x){return Y===V.ADVANCED?x:hn[Z].mediaBox.topRightY-hn[Z].mediaBox.bottomLeftY-J(x)},Po=C.__private__.getHorizontalCoordinateString=C.getHorizontalCoordinateString=function(x){return et(on(x))},to=C.__private__.getVerticalCoordinateString=C.getVerticalCoordinateString=function(x){return et(Qi(x))},ur=t.strokeColor||"0 G";C.__private__.getStrokeColor=C.getDrawColor=function(){return vr(ur)},C.__private__.setStrokeColor=C.setDrawColor=function(x,H,At,qt){return ur=Ar({ch1:x,ch2:H,ch3:At,ch4:qt,pdfColorType:"draw",precision:2}),lt(ur),this};var wa=t.fillColor||"0 g";C.__private__.getFillColor=C.getFillColor=function(){return vr(wa)},C.__private__.setFillColor=C.setFillColor=function(x,H,At,qt){return wa=Ar({ch1:x,ch2:H,ch3:At,ch4:qt,pdfColorType:"fill",precision:2}),lt(wa),this};var gs=t.textColor||"0 g",Ko=C.__private__.getTextColor=C.getTextColor=function(){return vr(gs)};C.__private__.setTextColor=C.setTextColor=function(x,H,At,qt){return gs=Ar({ch1:x,ch2:H,ch3:At,ch4:qt,pdfColorType:"text",precision:3}),this};var Yo=t.charSpace,Nr=C.__private__.getCharSpace=C.getCharSpace=function(){return parseFloat(Yo||0)};C.__private__.setCharSpace=C.setCharSpace=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Yo=x,this};var Jo=0;C.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},C.__private__.setLineCap=C.setLineCap=function(x){var H=C.CapJoinStyles[x];if(H===void 0)throw new Error("Line cap style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Jo=H,lt(H+" J"),this};var ki=0;C.__private__.setLineJoin=C.setLineJoin=function(x){var H=C.CapJoinStyles[x];if(H===void 0)throw new Error("Line join style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ki=H,lt(H+" j"),this},C.__private__.setLineMiterLimit=C.__private__.setMiterLimit=C.setLineMiterLimit=C.setMiterLimit=function(x){if(x=x||0,isNaN(x))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return lt(et(J(x))+" M"),this},C.GState=ah,C.setGState=function(x){(x=typeof x=="string"?Rn[Li[x]]:Va(null,x)).equals(Oi)||(lt("/"+x.id+" gs"),Oi=x)};var Va=function(x,H){if(!x||!Li[x]){var At=!1;for(var qt in Rn)if(Rn.hasOwnProperty(qt)&&Rn[qt].equals(H)){At=!0;break}if(At)H=Rn[qt];else{var ne="GS"+(Object.keys(Rn).length+1).toString(10);Rn[ne]=H,H.id=ne}return x&&(Li[x]=H.id),Je.publish("addGState",H),H}};C.addGState=function(x,H){return Va(x,H),this},C.saveGraphicsState=function(){return lt("q"),Xn.push({key:He,size:oe,color:gs}),this},C.restoreGraphicsState=function(){lt("Q");var x=Xn.pop();return He=x.key,oe=x.size,gs=x.color,Oi=null,this},C.setCurrentTransformationMatrix=function(x){return lt(x.toString()+" cm"),this},C.comment=function(x){return lt("#"+x),this};var So=function(x,H){var At=x||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return At},set:function(ye){isNaN(ye)||(At=parseFloat(ye))}});var qt=H||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return qt},set:function(ye){isNaN(ye)||(qt=parseFloat(ye))}});var ne="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ne},set:function(ye){ne=ye.toString()}}),this},Dr=function(x,H,At,qt){So.call(this,x,H),this.type="rect";var ne=At||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ne},set:function(Be){isNaN(Be)||(ne=parseFloat(Be))}});var ye=qt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ye},set:function(Be){isNaN(Be)||(ye=parseFloat(Be))}}),this},Xo=function(){this.page=qn,this.currentPage=Z,this.pages=re.slice(0),this.pagesContext=hn.slice(0),this.x=Sn,this.y=en,this.matrix=Jn,this.width=eo(Z),this.height=no(Z),this.outputDestination=ht,this.id="",this.objectNumber=-1};Xo.prototype.restore=function(){qn=this.page,Z=this.currentPage,hn=this.pagesContext,re=this.pages,Sn=this.x,en=this.y,Jn=this.matrix,Eo(Z,this.width),gi(Z,this.height),ht=this.outputDestination};var xa=function(x,H,At,qt,ne){Er.push(new Xo),qn=Z=0,re=[],Sn=x,en=H,Jn=ne,Gi([At,qt])},La=function(x){if(Sr[x])Er.pop().restore();else{var H=new Xo,At="Xo"+(Object.keys(ui).length+1).toString(10);H.id=At,Sr[x]=At,ui[At]=H,Je.publish("addFormObject",H),Er.pop().restore()}};for(var Qo in C.beginFormObject=function(x,H,At,qt,ne){return xa(x,H,At,qt,ne),this},C.endFormObject=function(x){return La(x),this},C.doFormObject=function(x,H){var At=ui[Sr[x]];return lt("q"),lt(H.toString()+" cm"),lt("/"+At.id+" Do"),lt("Q"),this},C.getFormObject=function(x){var H=ui[Sr[x]];return{x:H.x,y:H.y,width:H.width,height:H.height,matrix:H.matrix}},C.save=function(x,H){return x=x||"generated.pdf",(H=H||{}).returnPromise=H.returnPromise||!1,H.returnPromise===!1?(Al(Ns(Qr()),x),typeof Al.unload=="function"&&vn.setTimeout&&setTimeout(Al.unload,911),this):new Promise(function(At,qt){try{var ne=Al(Ns(Qr()),x);typeof Al.unload=="function"&&vn.setTimeout&&setTimeout(Al.unload,911),At(ne)}catch(ye){qt(ye.message)}})},gn.API)gn.API.hasOwnProperty(Qo)&&(Qo==="events"&&gn.API.events.length?function(x,H){var At,qt,ne;for(ne=H.length-1;ne!==-1;ne--)At=H[ne][0],qt=H[ne][1],x.subscribe.apply(x,[At].concat(typeof qt=="function"?[qt]:qt))}(Je,gn.API.events):C[Qo]=gn.API[Qo]);var eo=C.getPageWidth=function(x){return(hn[x=x||Z].mediaBox.topRightX-hn[x].mediaBox.bottomLeftX)/Ne},Eo=C.setPageWidth=function(x,H){hn[x].mediaBox.topRightX=H*Ne+hn[x].mediaBox.bottomLeftX},no=C.getPageHeight=function(x){return(hn[x=x||Z].mediaBox.topRightY-hn[x].mediaBox.bottomLeftY)/Ne},gi=C.setPageHeight=function(x,H){hn[x].mediaBox.topRightY=H*Ne+hn[x].mediaBox.bottomLeftY};return C.internal={pdfEscape:Ii,getStyle:_a,getFont:Ga,getFontSize:Lt,getCharSpace:Nr,getTextColor:Ko,getLineHeight:ya,getLineHeightFactor:ba,getLineWidth:Qs,write:Gt,getHorizontalCoordinate:on,getVerticalCoordinate:Qi,getCoordinateString:Po,getVerticalCoordinateString:to,collections:{},newObject:$n,newAdditionalObject:go,newObjectDeferred:$e,newObjectDeferredBegin:lr,getFilters:Xi,putStream:yr,events:Je,scaleFactor:Ne,pageSize:{getWidth:function(){return eo(Z)},setWidth:function(x){Eo(Z,x)},getHeight:function(){return no(Z)},setHeight:function(x){gi(Z,x)}},encryptionOptions:b,encryption:Ci,getEncryptor:$a,output:Js,getNumberOfPages:ci,pages:re,out:lt,f2:Yt,f3:$,getPageInfo:Ho,getPageInfoByObjId:_n,getCurrentPageInfo:bn,getPDFVersion:O,Point:So,Rectangle:Dr,Matrix:ln,hasHotfix:Vo},Object.defineProperty(C.internal.pageSize,"width",{get:function(){return eo(Z)},set:function(x){Eo(Z,x)},enumerable:!0,configurable:!0}),Object.defineProperty(C.internal.pageSize,"height",{get:function(){return no(Z)},set:function(x){gi(Z,x)},enumerable:!0,configurable:!0}),wn.call(C,Qt),He="F1",qa(o,n),Je.publish("initialized"),C}au.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},au.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},au.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},au.prototype.processOwnerPassword=function(t,e){return td(Qf(e).substr(0,5),t)},au.prototype.encryptor=function(t,e){var n=Qf(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return td(n,r)}},ah.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||oi(t)!==oi(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},gn.API={events:[]},gn.version="3.0.0";var Ni=gn.API,Td=1,Vl=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},nu=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Cn=function(t){return t.toFixed(2)},rl=function(t){return t.toFixed(5)};Ni.__acroform__={};var Ms=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},S0=function(t){return t*Td},sa=function(t){var e=new c1,n=tn.internal.getHeight(t)||0,r=tn.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Cn(r)),Number(Cn(n))],e},wx=Ni.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},xx=Ni.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},Lx=Ni.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},ji=Ni.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Lx(t,e-1)},zi=Ni.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return wx(t,e-1)},Ui=Ni.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return xx(t,e-1)},Cx=Ni.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,o=t[0],l=t[1],c=t[2],d=t[3],m={};return m.lowerLeft_X=n(o)||0,m.lowerLeft_Y=r(l+d)||0,m.upperRight_X=n(o+c)||0,m.upperRight_Y=r(l)||0,[Number(Cn(m.lowerLeft_X)),Number(Cn(m.lowerLeft_Y)),Number(Cn(m.upperRight_X)),Number(Cn(m.upperRight_Y))]},kx=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=ed(t,n),o=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+o+" "+Cn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var l=sa(t);return l.scope=t.scope,l.stream=e.join(`
`),l}},ed=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},o=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");o=t.multiline?o.map(function($){return $.split(`
`)}):o.map(function($){return[$]});var l=n,c=tn.internal.getHeight(t)||0;c=c<0?-c:c;var d=tn.internal.getWidth(t)||0;d=d<0?-d:d;var m=function($,J,I){if($+1<o.length){var nt=J+" "+o[$+1][0];return Ac(nt,t,I).width<=d-4}return!1};l++;t:for(;l>0;){e="",l--;var y,b,w=Ac("3",t,l).height,E=t.multiline?c-l:(c-w)/2,C=E+=2,R=0,O=0,q=0;if(l<=0){e=`(...) Tj
`,e+="% Width of Text: "+Ac(e,t,l=12).width+", FieldWidth:"+d+`
`;break}for(var F="",V=0,Y=0;Y<o.length;Y++)if(o.hasOwnProperty(Y)){var Ct=!1;if(o[Y].length!==1&&q!==o[Y].length-1){if((w+2)*(V+2)+2>c)continue t;F+=o[Y][q],Ct=!0,O=Y,Y--}else{F=(F+=o[Y][q]+" ").substr(F.length-1)==" "?F.substr(0,F.length-1):F;var kt=parseInt(Y),wt=m(kt,F,l),et=Y>=o.length-1;if(wt&&!et){F+=" ",q=0;continue}if(wt||et){if(et)O=kt;else if(t.multiline&&(w+2)*(V+2)+2>c)continue t}else{if(!t.multiline||(w+2)*(V+2)+2>c)continue t;O=kt}}for(var ct="",Bt=R;Bt<=O;Bt++){var Yt=o[Bt];if(t.multiline){if(Bt===O){ct+=Yt[q]+" ",q=(q+1)%Yt.length;continue}if(Bt===R){ct+=Yt[Yt.length-1]+" ";continue}}ct+=Yt[0]+" "}switch(ct=ct.substr(ct.length-1)==" "?ct.substr(0,ct.length-1):ct,b=Ac(ct,t,l).width,t.textAlign){case"right":y=d-b-2;break;case"center":y=(d-b)/2;break;case"left":default:y=2}e+=Cn(y)+" "+Cn(C)+` Td
`,e+="("+Vl(ct)+`) Tj
`,e+=-Cn(y)+` 0 Td
`,C=-(l+2),b=0,R=Ct?O:O+1,V++,F=""}break}return r.text=e,r.fontSize=l,r},Ac=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),o=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:o}},Px={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Sx=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},Ex=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,o=t[n];e.internal.newObjectDeferredBegin(o.objId,!0),oi(o)==="object"&&typeof o.putStream=="function"&&o.putStream(),delete t[r]}},Mx=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(jo.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Px)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Td=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new h1,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in r)if(r.hasOwnProperty(o)){var l=r[o];l.objId=void 0,l.hasAnnotation&&Sx(l,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,o){var l=!r;for(var c in r||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(c)){var d=r[c],m=[],y=d.Rect;if(d.Rect&&(d.Rect=Cx(d.Rect,o)),o.internal.newObjectDeferredBegin(d.objId,!0),d.DA=tn.createDefaultAppearanceStream(d),oi(d)==="object"&&typeof d.getKeyValueListForStream=="function"&&(m=d.getKeyValueListForStream()),d.Rect=y,d.hasAppearanceStream&&!d.appearanceStreamContent){var b=kx(d);m.push({key:"AP",value:"<</N "+b+">>"}),o.internal.acroformPlugin.xForms.push(b)}if(d.appearanceStreamContent){var w="";for(var E in d.appearanceStreamContent)if(d.appearanceStreamContent.hasOwnProperty(E)){var C=d.appearanceStreamContent[E];if(w+="/"+E+" ",w+="<<",Object.keys(C).length>=1||Array.isArray(C)){for(var c in C)if(C.hasOwnProperty(c)){var R=C[c];typeof R=="function"&&(R=R.call(o,d)),w+="/"+c+" "+R+" ",o.internal.acroformPlugin.xForms.indexOf(R)>=0||o.internal.acroformPlugin.xForms.push(R)}}else typeof(R=C)=="function"&&(R=R.call(o,d)),w+="/"+c+" "+R,o.internal.acroformPlugin.xForms.indexOf(R)>=0||o.internal.acroformPlugin.xForms.push(R);w+=">>"}m.push({key:"AP",value:`<<
`+w+">>"})}o.internal.putStream({additionalKeyValues:m,objectId:d.objId}),o.internal.out("endobj")}l&&Ex(o.internal.acroformPlugin.xForms,o)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},u1=Ni.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(c){return c};if(Array.isArray(t)){for(var o="[",l=0;l<t.length;l++)switch(l!==0&&(o+=" "),oi(t[l])){case"boolean":case"number":case"object":o+=t[l].toString();break;case"string":t[l].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),o+="("+Vl(r(t[l].toString()))+")"):o+=t[l].toString()}return o+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},vf=function(t,e,n){var r=function(o){return o};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Vl(r(t))+")"},la=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};la.prototype.toString=function(){return this.objId+" 0 R"},la.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},la.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(l){return l!="content"&&l!="appearanceStreamContent"&&l!="scope"&&l!="objId"&&l.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],o=this[r];o&&(Array.isArray(o)?t.push({key:r,value:u1(o,this.objId,this.scope)}):o instanceof la?(o.scope=this.scope,t.push({key:r,value:o.objId+" 0 R"})):typeof o!="function"&&t.push({key:r,value:o}))}return t};var c1=function(){la.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Ms(c1,la);var h1=function(){la.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Vl(n(t))+")"}},set:function(n){t=n}})};Ms(h1,la);var jo=function t(){la.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(F){if(isNaN(F))throw new Error('Invalid value "'+F+'" for attribute F supplied.');e=F}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ji(e,3)},set:function(F){F?this.F=zi(e,3):this.F=Ui(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(F){if(isNaN(F))throw new Error('Invalid value "'+F+'" for attribute Ff supplied.');n=F}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(F){r=F!==void 0?F:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(F){r[0]=F}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(F){r[1]=F}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(F){r[2]=F}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(F){r[3]=F}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(F){switch(F){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=F;break;default:throw new Error('Invalid value "'+F+'" for attribute FT supplied.')}}});var l=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!l||l.length<1){if(this instanceof lh)return;l="FieldObject"+t.FieldNum++}var F=function(V){return V};return this.scope&&(F=this.scope.internal.getEncryptor(this.objId)),"("+Vl(F(l))+")"},set:function(F){l=F.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return l},set:function(F){l=F}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(F){c=F}});var d="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return d},set:function(F){d=F}});var m=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return m},set:function(F){m=F}});var y=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return y===void 0?50/Td:y},set:function(F){y=F}});var b="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return b},set:function(F){b=F}});var w="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!w||this instanceof lh||this instanceof jl))return vf(w,this.objId,this.scope)},set:function(F){F=F.toString(),w=F}});var E=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(E)return this instanceof _r?E:vf(E,this.objId,this.scope)},set:function(F){F=F.toString(),E=this instanceof _r?F:F.substr(0,1)==="("?nu(F.substr(1,F.length-2)):nu(F)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof _r?nu(E.substr(1,E.length-1)):E},set:function(F){F=F.toString(),E=this instanceof _r?"/"+F:F}});var C=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(C)return C},set:function(F){this.V=F}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(C)return this instanceof _r?C:vf(C,this.objId,this.scope)},set:function(F){F=F.toString(),C=this instanceof _r?F:F.substr(0,1)==="("?nu(F.substr(1,F.length-2)):nu(F)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof _r?nu(C.substr(1,C.length-1)):C},set:function(F){F=F.toString(),C=this instanceof _r?"/"+F:F}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var R,O=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return O},set:function(F){F=!!F,O=F}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(R)return R},set:function(F){R=F}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ji(this.Ff,1)},set:function(F){F?this.Ff=zi(this.Ff,1):this.Ff=Ui(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ji(this.Ff,2)},set:function(F){F?this.Ff=zi(this.Ff,2):this.Ff=Ui(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ji(this.Ff,3)},set:function(F){F?this.Ff=zi(this.Ff,3):this.Ff=Ui(this.Ff,3)}});var q=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(q!==null)return q},set:function(F){if([0,1,2].indexOf(F)===-1)throw new Error('Invalid value "'+F+'" for attribute Q supplied.');q=F}}),Object.defineProperty(this,"textAlign",{get:function(){var F;switch(q){case 0:default:F="left";break;case 1:F="center";break;case 2:F="right"}return F},configurable:!0,enumerable:!0,set:function(F){switch(F){case"right":case 2:q=2;break;case"center":case 1:q=1;break;case"left":case 0:default:q=0}}})};Ms(jo,la);var du=function(){jo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return u1(e,this.objId,this.scope)},set:function(n){var r,o;o=[],typeof(r=n)=="string"&&(o=function(l,c,d){d||(d=1);for(var m,y=[];m=c.exec(l);)y.push(m[d]);return y}(r,/\((.*?)\)/g)),e=o}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ji(this.Ff,18)},set:function(n){n?this.Ff=zi(this.Ff,18):this.Ff=Ui(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ji(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=zi(this.Ff,19):this.Ff=Ui(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ji(this.Ff,20)},set:function(n){n?(this.Ff=zi(this.Ff,20),e.sort()):this.Ff=Ui(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ji(this.Ff,22)},set:function(n){n?this.Ff=zi(this.Ff,22):this.Ff=Ui(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ji(this.Ff,23)},set:function(n){n?this.Ff=zi(this.Ff,23):this.Ff=Ui(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ji(this.Ff,27)},set:function(n){n?this.Ff=zi(this.Ff,27):this.Ff=Ui(this.Ff,27)}}),this.hasAppearanceStream=!1};Ms(du,jo);var pu=function(){du.call(this),this.fontName="helvetica",this.combo=!1};Ms(pu,du);var mu=function(){pu.call(this),this.combo=!0};Ms(mu,pu);var qc=function(){mu.call(this),this.edit=!0};Ms(qc,mu);var _r=function(){jo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ji(this.Ff,15)},set:function(n){n?this.Ff=zi(this.Ff,15):this.Ff=Ui(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ji(this.Ff,16)},set:function(n){n?this.Ff=zi(this.Ff,16):this.Ff=Ui(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ji(this.Ff,17)},set:function(n){n?this.Ff=zi(this.Ff,17):this.Ff=Ui(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ji(this.Ff,26)},set:function(n){n?this.Ff=zi(this.Ff,26):this.Ff=Ui(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(l){return l};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,o=[];for(r in o.push("<<"),e)o.push("/"+r+" ("+Vl(n(e[r]))+")");return o.push(">>"),o.join(`
`)}},set:function(n){oi(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Ms(_r,jo);var $c=function(){_r.call(this),this.pushButton=!0};Ms($c,_r);var gu=function(){_r.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Ms(gu,_r);var lh=function(){var t,e;jo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(o){t=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(o){e=o}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(d){return d};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var l,c=[];for(l in c.push("<<"),r)c.push("/"+l+" ("+Vl(o(r[l]))+")");return c.push(">>"),c.join(`
`)},set:function(o){oi(o)==="object"&&(r=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(o){typeof o=="string"&&(r.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(o){n="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=tn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ms(lh,jo),gu.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},gu.prototype.createOption=function(t){var e=new lh;return e.Parent=this,e.optionName=t,this.Kids.push(e),Ax.call(this.scope,e),e};var Gc=function(){_r.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=tn.CheckBox.createAppearanceStream()};Ms(Gc,_r);var jl=function(){jo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ji(this.Ff,13)},set:function(e){e?this.Ff=zi(this.Ff,13):this.Ff=Ui(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ji(this.Ff,21)},set:function(e){e?this.Ff=zi(this.Ff,21):this.Ff=Ui(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ji(this.Ff,23)},set:function(e){e?this.Ff=zi(this.Ff,23):this.Ff=Ui(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ji(this.Ff,24)},set:function(e){e?this.Ff=zi(this.Ff,24):this.Ff=Ui(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ji(this.Ff,25)},set:function(e){e?this.Ff=zi(this.Ff,25):this.Ff=Ui(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ji(this.Ff,26)},set:function(e){e?this.Ff=zi(this.Ff,26):this.Ff=Ui(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ms(jl,jo);var Vc=function(){jl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ji(this.Ff,14)},set:function(t){t?this.Ff=zi(this.Ff,14):this.Ff=Ui(this.Ff,14)}}),this.password=!0};Ms(Vc,jl);var tn={CheckBox:{createAppearanceStream:function(){return{N:{On:tn.CheckBox.YesNormal},D:{On:tn.CheckBox.YesPushDown,Off:tn.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=sa(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,o=t.scope.__private__.encodeColorString(t.color),l=ed(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Cn(tn.internal.getWidth(t))+" "+Cn(tn.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Cn(l.fontSize)+" Tf "+o),n.push("BT"),n.push(l.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=sa(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),o=[],l=tn.internal.getHeight(t),c=tn.internal.getWidth(t),d=ed(t,t.caption);return o.push("1 g"),o.push("0 0 "+Cn(c)+" "+Cn(l)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+Cn(c-1)+" "+Cn(l-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+n+" "+Cn(d.fontSize)+" Tf "+r),o.push(d.text),o.push("ET"),o.push("Q"),e.stream=o.join(`
`),e},OffPushDown:function(t){var e=sa(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Cn(tn.internal.getWidth(t))+" "+Cn(tn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:tn.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=tn.RadioButton.Circle.YesNormal,e.D[t]=tn.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=sa(t);e.scope=t.scope;var n=[],r=tn.internal.getWidth(t)<=tn.internal.getHeight(t)?tn.internal.getWidth(t)/4:tn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var o=tn.internal.Bezier_C,l=Number((r*o).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+rl(tn.internal.getWidth(t)/2)+" "+rl(tn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+l+" "+l+" "+r+" 0 "+r+" c"),n.push("-"+l+" "+r+" -"+r+" "+l+" -"+r+" 0 c"),n.push("-"+r+" -"+l+" -"+l+" -"+r+" 0 -"+r+" c"),n.push(l+" -"+r+" "+r+" -"+l+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=sa(t);e.scope=t.scope;var n=[],r=tn.internal.getWidth(t)<=tn.internal.getHeight(t)?tn.internal.getWidth(t)/4:tn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),l=Number((o*tn.internal.Bezier_C).toFixed(5)),c=Number((r*tn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+rl(tn.internal.getWidth(t)/2)+" "+rl(tn.internal.getHeight(t)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+l+" "+l+" "+o+" 0 "+o+" c"),n.push("-"+l+" "+o+" -"+o+" "+l+" -"+o+" 0 c"),n.push("-"+o+" -"+l+" -"+l+" -"+o+" 0 -"+o+" c"),n.push(l+" -"+o+" "+o+" -"+l+" "+o+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+rl(tn.internal.getWidth(t)/2)+" "+rl(tn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+c+" "+c+" "+r+" 0 "+r+" c"),n.push("-"+c+" "+r+" -"+r+" "+c+" -"+r+" 0 c"),n.push("-"+r+" -"+c+" -"+c+" -"+r+" 0 -"+r+" c"),n.push(c+" -"+r+" "+r+" -"+c+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=sa(t);e.scope=t.scope;var n=[],r=tn.internal.getWidth(t)<=tn.internal.getHeight(t)?tn.internal.getWidth(t)/4:tn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),l=Number((o*tn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+rl(tn.internal.getWidth(t)/2)+" "+rl(tn.internal.getHeight(t)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+l+" "+l+" "+o+" 0 "+o+" c"),n.push("-"+l+" "+o+" -"+o+" "+l+" -"+o+" 0 c"),n.push("-"+o+" -"+l+" -"+l+" -"+o+" 0 -"+o+" c"),n.push(l+" -"+o+" "+o+" -"+l+" "+o+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:tn.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=tn.RadioButton.Cross.YesNormal,e.D[t]=tn.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=sa(t);e.scope=t.scope;var n=[],r=tn.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Cn(tn.internal.getWidth(t)-2)+" "+Cn(tn.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Cn(r.x1.x)+" "+Cn(r.x1.y)+" m"),n.push(Cn(r.x2.x)+" "+Cn(r.x2.y)+" l"),n.push(Cn(r.x4.x)+" "+Cn(r.x4.y)+" m"),n.push(Cn(r.x3.x)+" "+Cn(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=sa(t);e.scope=t.scope;var n=tn.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Cn(tn.internal.getWidth(t))+" "+Cn(tn.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Cn(tn.internal.getWidth(t)-2)+" "+Cn(tn.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Cn(n.x1.x)+" "+Cn(n.x1.y)+" m"),r.push(Cn(n.x2.x)+" "+Cn(n.x2.y)+" l"),r.push(Cn(n.x4.x)+" "+Cn(n.x4.y)+" m"),r.push(Cn(n.x3.x)+" "+Cn(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=sa(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Cn(tn.internal.getWidth(t))+" "+Cn(tn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};tn.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=tn.internal.getWidth(t),n=tn.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},tn.internal.getWidth=function(t){var e=0;return oi(t)==="object"&&(e=S0(t.Rect[2])),e},tn.internal.getHeight=function(t){var e=0;return oi(t)==="object"&&(e=S0(t.Rect[3])),e};var Ax=Ni.addField=function(t){if(Mx(this,t),!(t instanceof jo))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Ni.AcroFormChoiceField=du,Ni.AcroFormListBox=pu,Ni.AcroFormComboBox=mu,Ni.AcroFormEditBox=qc,Ni.AcroFormButton=_r,Ni.AcroFormPushButton=$c,Ni.AcroFormRadioButton=gu,Ni.AcroFormCheckBox=Gc,Ni.AcroFormTextField=jl,Ni.AcroFormPasswordField=Vc,Ni.AcroFormAppearance=tn,Ni.AcroForm={ChoiceField:du,ListBox:pu,ComboBox:mu,EditBox:qc,Button:_r,PushButton:$c,RadioButton:gu,CheckBox:Gc,TextField:jl,PasswordField:Vc,Appearance:tn},gn.AcroForm={ChoiceField:du,ListBox:pu,ComboBox:mu,EditBox:qc,Button:_r,PushButton:$c,RadioButton:gu,CheckBox:Gc,TextField:jl,PasswordField:Vc,Appearance:tn};gn.AcroForm;function f1(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function($,J){var I,nt,K,tt,_t,G=e;if((J=J||e)==="RGBA"||$.data!==void 0&&$.data instanceof Uint8ClampedArray&&"height"in $&&"width"in $)return"RGBA";if(wt($))for(_t in n)for(K=n[_t],I=0;I<K.length;I+=1){for(tt=!0,nt=0;nt<K[I].length;nt+=1)if(K[I][nt]!==void 0&&K[I][nt]!==$[nt]){tt=!1;break}if(tt===!0){G=_t;break}}else for(_t in n)for(K=n[_t],I=0;I<K.length;I+=1){for(tt=!0,nt=0;nt<K[I].length;nt+=1)if(K[I][nt]!==void 0&&K[I][nt]!==$.charCodeAt(nt)){tt=!1;break}if(tt===!0){G=_t;break}}return G===e&&J!==e&&(G=J),G},o=function $(J){for(var I=this.internal.write,nt=this.internal.putStream,K=(0,this.internal.getFilters)();K.indexOf("FlateEncode")!==-1;)K.splice(K.indexOf("FlateEncode"),1);J.objectId=this.internal.newObject();var tt=[];if(tt.push({key:"Type",value:"/XObject"}),tt.push({key:"Subtype",value:"/Image"}),tt.push({key:"Width",value:J.width}),tt.push({key:"Height",value:J.height}),J.colorSpace===q.INDEXED?tt.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(J.palette.length/3-1)+" "+("sMask"in J&&J.sMask!==void 0?J.objectId+2:J.objectId+1)+" 0 R]"}):(tt.push({key:"ColorSpace",value:"/"+J.colorSpace}),J.colorSpace===q.DEVICE_CMYK&&tt.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),tt.push({key:"BitsPerComponent",value:J.bitsPerComponent}),"decodeParameters"in J&&J.decodeParameters!==void 0&&tt.push({key:"DecodeParms",value:"<<"+J.decodeParameters+">>"}),"transparency"in J&&Array.isArray(J.transparency)){for(var _t="",G=0,j=J.transparency.length;G<j;G++)_t+=J.transparency[G]+" "+J.transparency[G]+" ";tt.push({key:"Mask",value:"["+_t+"]"})}J.sMask!==void 0&&tt.push({key:"SMask",value:J.objectId+1+" 0 R"});var X=J.filter!==void 0?["/"+J.filter]:void 0;if(nt({data:J.data,additionalKeyValues:tt,alreadyAppliedFilters:X,objectId:J.objectId}),I("endobj"),"sMask"in J&&J.sMask!==void 0){var Rt="/Predictor "+J.predictor+" /Colors 1 /BitsPerComponent "+J.bitsPerComponent+" /Columns "+J.width,D={width:J.width,height:J.height,colorSpace:"DeviceGray",bitsPerComponent:J.bitsPerComponent,decodeParameters:Rt,data:J.sMask};"filter"in J&&(D.filter=J.filter),$.call(this,D)}if(J.colorSpace===q.INDEXED){var Z=this.internal.newObject();nt({data:ct(new Uint8Array(J.palette)),objectId:Z}),I("endobj")}},l=function(){var $=this.internal.collections.addImage_images;for(var J in $)o.call(this,$[J])},c=function(){var $,J=this.internal.collections.addImage_images,I=this.internal.write;for(var nt in J)I("/I"+($=J[nt]).index,$.objectId,"0","R")},d=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",c))},m=function(){var $=this.internal.collections.addImage_images;return d.call(this),$},y=function(){return Object.keys(this.internal.collections.addImage_images).length},b=function($){return typeof t["process"+$.toUpperCase()]=="function"},w=function($){return oi($)==="object"&&$.nodeType===1},E=function($,J){if($.nodeName==="IMG"&&$.hasAttribute("src")){var I=""+$.getAttribute("src");if(I.indexOf("data:image/")===0)return Yu(unescape(I).split("base64,").pop());var nt=t.loadFile(I,!0);if(nt!==void 0)return nt}if($.nodeName==="CANVAS"){if($.width===0||$.height===0)throw new Error("Given canvas must have data. Canvas width: "+$.width+", height: "+$.height);var K;switch(J){case"PNG":K="image/png";break;case"WEBP":K="image/webp";break;case"JPEG":case"JPG":default:K="image/jpeg"}return Yu($.toDataURL(K,1).split("base64,").pop())}},C=function($){var J=this.internal.collections.addImage_images;if(J){for(var I in J)if($===J[I].alias)return J[I]}},R=function($,J,I){return $||J||($=-96,J=-96),$<0&&($=-1*I.width*72/$/this.internal.scaleFactor),J<0&&(J=-1*I.height*72/J/this.internal.scaleFactor),$===0&&($=J*I.width/I.height),J===0&&(J=$*I.height/I.width),[$,J]},O=function($,J,I,nt,K,tt){var _t=R.call(this,I,nt,K),G=this.internal.getCoordinateString,j=this.internal.getVerticalCoordinateString,X=m.call(this);if(I=_t[0],nt=_t[1],X[K.index]=K,tt){tt*=Math.PI/180;var Rt=Math.cos(tt),D=Math.sin(tt),Z=function(vt){return vt.toFixed(4)},ut=[Z(Rt),Z(D),Z(-1*D),Z(Rt),0,0,"cm"]}this.internal.write("q"),tt?(this.internal.write([1,"0","0",1,G($),j(J+nt),"cm"].join(" ")),this.internal.write(ut.join(" ")),this.internal.write([G(I),"0","0",G(nt),"0","0","cm"].join(" "))):this.internal.write([G(I),"0","0",G(nt),G($),j(J+nt),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+K.index+" Do"),this.internal.write("Q")},q=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var F=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},V=t.__addimage__.sHashCode=function($){var J,I,nt=0;if(typeof $=="string")for(I=$.length,J=0;J<I;J++)nt=(nt<<5)-nt+$.charCodeAt(J),nt|=0;else if(wt($))for(I=$.byteLength/2,J=0;J<I;J++)nt=(nt<<5)-nt+$[J],nt|=0;return nt},Y=t.__addimage__.validateStringAsBase64=function($){($=$||"").toString().trim();var J=!0;return $.length===0&&(J=!1),$.length%4!=0&&(J=!1),/^[A-Za-z0-9+/]+$/.test($.substr(0,$.length-2))===!1&&(J=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test($.substr(-2))===!1&&(J=!1),J},Ct=t.__addimage__.extractImageFromDataUrl=function($){var J=($=$||"").split("base64,"),I=null;if(J.length===2){var nt=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(J[0]);Array.isArray(nt)&&(I={mimeType:nt[1],charset:nt[2],data:J[1]})}return I},kt=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function($){return kt()&&$ instanceof ArrayBuffer};var wt=t.__addimage__.isArrayBufferView=function($){return kt()&&typeof Uint32Array<"u"&&($ instanceof Int8Array||$ instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&$ instanceof Uint8ClampedArray||$ instanceof Int16Array||$ instanceof Uint16Array||$ instanceof Int32Array||$ instanceof Uint32Array||$ instanceof Float32Array||$ instanceof Float64Array)},et=t.__addimage__.binaryStringToUint8Array=function($){for(var J=$.length,I=new Uint8Array(J),nt=0;nt<J;nt++)I[nt]=$.charCodeAt(nt);return I},ct=t.__addimage__.arrayBufferToBinaryString=function($){for(var J="",I=wt($)?$:new Uint8Array($),nt=0;nt<I.length;nt+=8192)J+=String.fromCharCode.apply(null,I.subarray(nt,nt+8192));return J};t.addImage=function(){var $,J,I,nt,K,tt,_t,G,j;if(typeof arguments[1]=="number"?(J=e,I=arguments[1],nt=arguments[2],K=arguments[3],tt=arguments[4],_t=arguments[5],G=arguments[6],j=arguments[7]):(J=arguments[1],I=arguments[2],nt=arguments[3],K=arguments[4],tt=arguments[5],_t=arguments[6],G=arguments[7],j=arguments[8]),oi($=arguments[0])==="object"&&!w($)&&"imageData"in $){var X=$;$=X.imageData,J=X.format||J||e,I=X.x||I||0,nt=X.y||nt||0,K=X.w||X.width||K,tt=X.h||X.height||tt,_t=X.alias||_t,G=X.compression||G,j=X.rotation||X.angle||j}var Rt=this.internal.getFilters();if(G===void 0&&Rt.indexOf("FlateEncode")!==-1&&(G="SLOW"),isNaN(I)||isNaN(nt))throw new Error("Invalid coordinates passed to jsPDF.addImage");d.call(this);var D=Bt.call(this,$,J,_t,G);return O.call(this,I,nt,K,tt,D,j),this};var Bt=function($,J,I,nt){var K,tt,_t;if(typeof $=="string"&&r($)===e){$=unescape($);var G=Yt($,!1);(G!==""||(G=t.loadFile($,!0))!==void 0)&&($=G)}if(w($)&&($=E($,J)),J=r($,J),!b(J))throw new Error("addImage does not support files of type '"+J+"', please ensure that a plugin for '"+J+"' support is added.");if(((_t=I)==null||_t.length===0)&&(I=function(j){return typeof j=="string"||wt(j)?V(j):wt(j.data)?V(j.data):null}($)),(K=C.call(this,I))||(kt()&&($ instanceof Uint8Array||J==="RGBA"||(tt=$,$=et($))),K=this["process"+J.toUpperCase()]($,y.call(this),I,function(j){return j&&typeof j=="string"&&(j=j.toUpperCase()),j in t.image_compression?j:F.NONE}(nt),tt)),!K)throw new Error("An unknown error occurred whilst processing the image.");return K},Yt=t.__addimage__.convertBase64ToBinaryString=function($,J){var I;J=typeof J!="boolean"||J;var nt,K="";if(typeof $=="string"){nt=(I=Ct($))!==null?I.data:$;try{K=Yu(nt)}catch(tt){if(J)throw Y(nt)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+tt.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return K};t.getImageProperties=function($){var J,I,nt="";if(w($)&&($=E($)),typeof $=="string"&&r($)===e&&((nt=Yt($,!1))===""&&(nt=t.loadFile($)||""),$=nt),I=r($),!b(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(!kt()||$ instanceof Uint8Array||($=et($)),!(J=this["process"+I.toUpperCase()]($)))throw new Error("An unknown error occurred whilst processing the image");return J.fileType=I,J}})(gn.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};gn.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,o,l,c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString,m=this.internal.getPageInfoByObjId(n.objId),y=n.pageContext.annotations,b=!1,w=0;w<y.length&&!b;w++)switch((r=y[w]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(b=!0);break;case"reference":case"text":case"freetext":b=!0}if(b!=0){this.internal.write("/Annots [");for(var E=0;E<y.length;E++){r=y[E];var C=this.internal.pdfEscape,R=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var O=this.internal.newAdditionalObject(),q=this.internal.newAdditionalObject(),F=this.internal.getEncryptor(O.objId),V=r.title||"Note";l="<</Type /Annot /Subtype /Text "+(o="/Rect ["+c(r.bounds.x)+" "+d(r.bounds.y+r.bounds.h)+" "+c(r.bounds.x+r.bounds.w)+" "+d(r.bounds.y)+"] ")+"/Contents ("+C(F(r.contents))+")",l+=" /Popup "+q.objId+" 0 R",l+=" /P "+m.objId+" 0 R",l+=" /T ("+C(F(V))+") >>",O.content=l;var Y=O.objId+" 0 R";l="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+c(r.bounds.x+30)+" "+d(r.bounds.y+r.bounds.h)+" "+c(r.bounds.x+r.bounds.w+30)+" "+d(r.bounds.y)+"] ")+" /Parent "+Y,r.open&&(l+=" /Open true"),l+=" >>",q.content=l,this.internal.write(O.objId,"0 R",q.objId,"0 R");break;case"freetext":o="/Rect ["+c(r.bounds.x)+" "+d(r.bounds.y)+" "+c(r.bounds.x+r.bounds.w)+" "+d(r.bounds.y+r.bounds.h)+"] ";var Ct=r.color||"#000000";l="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+C(R(r.contents))+")",l+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Ct+")",l+=" /Border [0 0 0]",l+=" >>",this.internal.write(l);break;case"link":if(r.options.name){var kt=this.annotations._nameMap[r.options.name];r.options.pageNumber=kt.page,r.options.top=kt.y}else r.options.top||(r.options.top=0);if(o="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",l="",r.options.url)l="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+C(R(r.options.url))+") >>";else if(r.options.pageNumber)switch(l="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":l+=" /Fit]";break;case"FitH":l+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,l+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var wt=d(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),l+=" /XYZ "+r.options.left+" "+wt+" "+r.options.zoom+"]"}l!=""&&(l+=" >>",this.internal.write(l))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,o,l,c){var d=this.internal.getCurrentPageInfo(),m=this.internal.getCoordinateString,y=this.internal.getVerticalCoordinateString;d.pageContext.annotations.push({finalBounds:{x:m(n),y:y(r),w:m(n+o),h:y(r+l)},options:c,type:"link"})},t.textWithLink=function(n,r,o,l){var c,d,m=this.getTextWidth(n),y=this.internal.getLineHeight()/this.internal.scaleFactor;if(l.maxWidth!==void 0){d=l.maxWidth;var b=this.splitTextToSize(n,d).length;c=Math.ceil(y*b)}else d=m,c=y;return this.text(n,r,o,l),o+=.2*y,l.align==="center"&&(r-=m/2),l.align==="right"&&(r-=m),this.link(r,o-y,d,c,l),m},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(gn.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];t.__arabicParser__={};var l=t.__arabicParser__.isInArabicSubstitutionA=function(O){return e[O.charCodeAt(0)]!==void 0},c=t.__arabicParser__.isArabicLetter=function(O){return typeof O=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(O)},d=t.__arabicParser__.isArabicEndLetter=function(O){return c(O)&&l(O)&&e[O.charCodeAt(0)].length<=2},m=t.__arabicParser__.isArabicAlfLetter=function(O){return c(O)&&o.indexOf(O.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(O){return c(O)&&l(O)&&e[O.charCodeAt(0)].length>=1};var y=t.__arabicParser__.arabicLetterHasFinalForm=function(O){return c(O)&&l(O)&&e[O.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(O){return c(O)&&l(O)&&e[O.charCodeAt(0)].length>=3};var b=t.__arabicParser__.arabicLetterHasMedialForm=function(O){return c(O)&&l(O)&&e[O.charCodeAt(0)].length==4},w=t.__arabicParser__.resolveLigatures=function(O){var q=0,F=n,V="",Y=0;for(q=0;q<O.length;q+=1)F[O.charCodeAt(q)]!==void 0?(Y++,typeof(F=F[O.charCodeAt(q)])=="number"&&(V+=String.fromCharCode(F),F=n,Y=0),q===O.length-1&&(F=n,V+=O.charAt(q-(Y-1)),q-=Y-1,Y=0)):(F=n,V+=O.charAt(q-Y),q-=Y,Y=0);return V};t.__arabicParser__.isArabicDiacritic=function(O){return O!==void 0&&r[O.charCodeAt(0)]!==void 0};var E=t.__arabicParser__.getCorrectForm=function(O,q,F){return c(O)?l(O)===!1?-1:!y(O)||!c(q)&&!c(F)||!c(F)&&d(q)||d(O)&&!c(q)||d(O)&&m(q)||d(O)&&d(q)?0:b(O)&&c(q)&&!d(q)&&c(F)&&y(F)?3:d(O)||!c(F)?1:2:-1},C=function(O){var q=0,F=0,V=0,Y="",Ct="",kt="",wt=(O=O||"").split("\\s+"),et=[];for(q=0;q<wt.length;q+=1){for(et.push(""),F=0;F<wt[q].length;F+=1)Y=wt[q][F],Ct=wt[q][F-1],kt=wt[q][F+1],c(Y)?(V=E(Y,Ct,kt),et[q]+=V!==-1?String.fromCharCode(e[Y.charCodeAt(0)][V]):Y):et[q]+=Y;et[q]=w(et[q])}return et.join(" ")},R=t.__arabicParser__.processArabic=t.processArabic=function(){var O,q=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,F=[];if(Array.isArray(q)){var V=0;for(F=[],V=0;V<q.length;V+=1)Array.isArray(q[V])?F.push([C(q[V][0]),q[V][1],q[V][2]]):F.push([C(q[V])]);O=F}else O=C(q);return typeof arguments[0]=="string"?O:(arguments[0].text=O,arguments[0])};t.events.push(["preProcessText",R])}(gn.API),gn.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(d){n=d}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(d){r=isNaN(d)||Number.isInteger(d)===!1||d<0?150:d,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(d){o=isNaN(d)||Number.isInteger(d)===!1||d<0?300:d,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var l=[];Object.defineProperty(this,"childNodes",{get:function(){return l},set:function(d){l=d}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(d){c=d}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var o;if((n=n||"2d")!=="2d")return null;for(o in r)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=r[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(gn.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new l,this.internal.__cell__.pages=1},l=function(){var m=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return m},set:function(O){m=O}});var y=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return y},set:function(O){y=O}});var b=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return b},set:function(O){b=O}});var w=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return w},set:function(O){w=O}});var E=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return E},set:function(O){E=O}});var C=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return C},set:function(O){C=O}});var R=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return R},set:function(O){R=O}}),this};l.prototype.clone=function(){return new l(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},l.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(m){return r.call(this),this.internal.__cell__.headerFunction=typeof m=="function"?m:void 0,this},t.getTextDimensions=function(m,y){r.call(this);var b=(y=y||{}).fontSize||this.getFontSize(),w=y.font||this.getFont(),E=y.scaleFactor||this.internal.scaleFactor,C=0,R=0,O=0,q=this;if(!Array.isArray(m)&&typeof m!="string"){if(typeof m!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");m=String(m)}var F=y.maxWidth;F>0?typeof m=="string"?m=this.splitTextToSize(m,F):Object.prototype.toString.call(m)==="[object Array]"&&(m=m.reduce(function(Y,Ct){return Y.concat(q.splitTextToSize(Ct,F))},[])):m=Array.isArray(m)?m:[m];for(var V=0;V<m.length;V++)C<(O=this.getStringUnitWidth(m[V],{font:w})*b)&&(C=O);return C!==0&&(R=m.length),{w:C/=E,h:Math.max((R*b*this.getLineHeightFactor()-b*(this.getLineHeightFactor()-1))/E,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var m=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new l(m.left,m.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=t.cell=function(){var m;m=arguments[0]instanceof l?arguments[0]:new l(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var y=this.internal.__cell__.lastCell,b=this.internal.__cell__.padding,w=this.internal.__cell__.margins||e,E=this.internal.__cell__.tableHeaderRow,C=this.internal.__cell__.printHeaders;return y.lineNumber!==void 0&&(y.lineNumber===m.lineNumber?(m.x=(y.x||0)+(y.width||0),m.y=y.y||0):y.y+y.height+m.height+w.bottom>this.getPageHeight()?(this.cellAddPage(),m.y=w.top,C&&E&&(this.printHeaderRow(m.lineNumber,!0),m.y+=E[0].height)):m.y=y.y+y.height||m.y),m.text[0]!==void 0&&(this.rect(m.x,m.y,m.width,m.height,n===!0?"FD":void 0),m.align==="right"?this.text(m.text,m.x+m.width-b,m.y+b,{align:"right",baseline:"top"}):m.align==="center"?this.text(m.text,m.x+m.width/2,m.y+b,{align:"center",baseline:"top",maxWidth:m.width-b-b}):this.text(m.text,m.x+b,m.y+b,{align:"left",baseline:"top",maxWidth:m.width-b-b})),this.internal.__cell__.lastCell=m,this};t.table=function(m,y,b,w,E){if(r.call(this),!b)throw new Error("No data for PDF table.");var C,R,O,q,F=[],V=[],Y=[],Ct={},kt={},wt=[],et=[],ct=(E=E||{}).autoSize||!1,Bt=E.printHeaders!==!1,Yt=E.css&&E.css["font-size"]!==void 0?16*E.css["font-size"]:E.fontSize||12,$=E.margins||Object.assign({width:this.getPageWidth()},e),J=typeof E.padding=="number"?E.padding:3,I=E.headerBackgroundColor||"#c8c8c8",nt=E.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=Bt,this.internal.__cell__.margins=$,this.internal.__cell__.table_font_size=Yt,this.internal.__cell__.padding=J,this.internal.__cell__.headerBackgroundColor=I,this.internal.__cell__.headerTextColor=nt,this.setFontSize(Yt),w==null)V=F=Object.keys(b[0]),Y=F.map(function(){return"left"});else if(Array.isArray(w)&&oi(w[0])==="object")for(F=w.map(function(X){return X.name}),V=w.map(function(X){return X.prompt||X.name||""}),Y=w.map(function(X){return X.align||"left"}),C=0;C<w.length;C+=1)kt[w[C].name]=w[C].width*(19.049976/25.4);else Array.isArray(w)&&typeof w[0]=="string"&&(V=F=w,Y=F.map(function(){return"left"}));if(ct||Array.isArray(w)&&typeof w[0]=="string")for(C=0;C<F.length;C+=1){for(Ct[q=F[C]]=b.map(function(X){return X[q]}),this.setFont(void 0,"bold"),wt.push(this.getTextDimensions(V[C],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),R=Ct[q],this.setFont(void 0,"normal"),O=0;O<R.length;O+=1)wt.push(this.getTextDimensions(R[O],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);kt[q]=Math.max.apply(null,wt)+J+J,wt=[]}if(Bt){var K={};for(C=0;C<F.length;C+=1)K[F[C]]={},K[F[C]].text=V[C],K[F[C]].align=Y[C];var tt=d.call(this,K,kt);et=F.map(function(X){return new l(m,y,kt[X],tt,K[X].text,void 0,K[X].align)}),this.setTableHeaderRow(et),this.printHeaderRow(1,!1)}var _t=w.reduce(function(X,Rt){return X[Rt.name]=Rt.align,X},{});for(C=0;C<b.length;C+=1){"rowStart"in E&&E.rowStart instanceof Function&&E.rowStart({row:C,data:b[C]},this);var G=d.call(this,b[C],kt);for(O=0;O<F.length;O+=1){var j=b[C][F[O]];"cellStart"in E&&E.cellStart instanceof Function&&E.cellStart({row:C,col:O,data:j},this),c.call(this,new l(m,y,kt[F[O]],G,j,C+2,_t[F[O]]))}}return this.internal.__cell__.table_x=m,this.internal.__cell__.table_y=y,this};var d=function(m,y){var b=this.internal.__cell__.padding,w=this.internal.__cell__.table_font_size,E=this.internal.scaleFactor;return Object.keys(m).map(function(C){var R=m[C];return this.splitTextToSize(R.hasOwnProperty("text")?R.text:R,y[C]-b-b)},this).map(function(C){return this.getLineHeightFactor()*C.length*w/E+b+b},this).reduce(function(C,R){return Math.max(C,R)},0)};t.setTableHeaderRow=function(m){r.call(this),this.internal.__cell__.tableHeaderRow=m},t.printHeaderRow=function(m,y){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var b;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var w=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new l(w[0],w[1],w[2],w[3],void 0,-1)}this.setFont(void 0,"bold");for(var E=[],C=0;C<this.internal.__cell__.tableHeaderRow.length;C+=1){b=this.internal.__cell__.tableHeaderRow[C].clone(),y&&(b.y=this.internal.__cell__.margins.top||0,E.push(b)),b.lineNumber=m;var R=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,b),this.setTextColor(R)}E.length>0&&this.setTableHeaderRow(E),this.setFont(void 0,"normal"),n=!1}}(gn.API);var d1={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},p1=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],nd=f1(p1),m1=[100,200,300,400,500,600,700,800,900],Bx=f1(m1);function id(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(l){return d1[l=l||"normal"]?l:"normal"}(t.style),r=function(l){if(!l)return 400;if(typeof l=="number")return l>=100&&l<=900&&l%100==0?l:400;if(/^\d00$/.test(l))return parseInt(l);switch(l){case"bold":return 700;case"normal":default:return 400}}(t.weight),o=function(l){return typeof nd[l=l||"normal"]=="number"?l:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:o,src:t.src||[],ref:t.ref||{name:e,style:[o,n,r].join(" ")}}}function E0(t,e,n,r){var o;for(o=n;o>=0&&o<e.length;o+=r)if(t[e[o]])return t[e[o]];for(o=n;o>=0&&o<e.length;o-=r)if(t[e[o]])return t[e[o]]}var Tx={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},M0={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function A0(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Nx(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",o=Object.assign({},Tx,n.genericFontFamilies||{}),l=null,c=null,d=0;d<e.length;++d)if(o[(l=id(e[d])).family]&&(l.family=o[l.family]),t.hasOwnProperty(l.family)){c=t[l.family];break}if(!(c=c||t[r]))throw new Error("Could not find a font-family for the rule '"+A0(l)+"' and default family '"+r+"'.");if(c=function(m,y){if(y[m])return y[m];var b=nd[m],w=b<=nd.normal?-1:1,E=E0(y,p1,b,w);if(!E)throw new Error("Could not find a matching font-stretch value for "+m);return E}(l.stretch,c),c=function(m,y){if(y[m])return y[m];for(var b=d1[m],w=0;w<b.length;++w)if(y[b[w]])return y[b[w]];throw new Error("Could not find a matching font-style for "+m)}(l.style,c),!(c=function(m,y){if(y[m])return y[m];if(m===400&&y[500])return y[500];if(m===500&&y[400])return y[400];var b=Bx[m],w=E0(y,m1,b,m<400?-1:1);if(!w)throw new Error("Could not find a matching font-weight for value "+m);return w}(l.weight,c)))throw new Error("Failed to resolve a font for the rule '"+A0(l)+"'.");return c}function B0(t){return t.trimLeft()}function Dx(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function Ox(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Bc,T0,N0,yf=["times"];(function(t){var e,n,r,o,l,c,d,m,y,b=function(D){return D=D||{},this.isStrokeTransparent=D.isStrokeTransparent||!1,this.strokeOpacity=D.strokeOpacity||1,this.strokeStyle=D.strokeStyle||"#000000",this.fillStyle=D.fillStyle||"#000000",this.isFillTransparent=D.isFillTransparent||!1,this.fillOpacity=D.fillOpacity||1,this.font=D.font||"10px sans-serif",this.textBaseline=D.textBaseline||"alphabetic",this.textAlign=D.textAlign||"left",this.lineWidth=D.lineWidth||1,this.lineJoin=D.lineJoin||"miter",this.lineCap=D.lineCap||"butt",this.path=D.path||[],this.transform=D.transform!==void 0?D.transform.clone():new m,this.globalCompositeOperation=D.globalCompositeOperation||"normal",this.globalAlpha=D.globalAlpha||1,this.clip_path=D.clip_path||[],this.currentPoint=D.currentPoint||new c,this.miterLimit=D.miterLimit||10,this.lastPoint=D.lastPoint||new c,this.lineDashOffset=D.lineDashOffset||0,this.lineDash=D.lineDash||[],this.margin=D.margin||[0,0,0,0],this.prevPageLastElemOffset=D.prevPageLastElemOffset||0,this.ignoreClearRect=typeof D.ignoreClearRect!="boolean"||D.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new w(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,l=this.internal.getVerticalCoordinate,c=this.internal.Point,d=this.internal.Rectangle,m=this.internal.Matrix,y=new b}]);var w=function(D){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Z=D;Object.defineProperty(this,"pdf",{get:function(){return Z}});var ut=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ut},set:function(Dt){ut=!!Dt}});var vt=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return vt},set:function(Dt){vt=!!Dt}});var xt=0;Object.defineProperty(this,"posX",{get:function(){return xt},set:function(Dt){isNaN(Dt)||(xt=Dt)}});var dt=0;Object.defineProperty(this,"posY",{get:function(){return dt},set:function(Dt){isNaN(Dt)||(dt=Dt)}}),Object.defineProperty(this,"margin",{get:function(){return y.margin},set:function(Dt){var lt;typeof Dt=="number"?lt=[Dt,Dt,Dt,Dt]:((lt=new Array(4))[0]=Dt[0],lt[1]=Dt.length>=2?Dt[1]:lt[0],lt[2]=Dt.length>=3?Dt[2]:lt[0],lt[3]=Dt.length>=4?Dt[3]:lt[1]),y.margin=lt}});var St=!1;Object.defineProperty(this,"autoPaging",{get:function(){return St},set:function(Dt){St=Dt}});var Mt=0;Object.defineProperty(this,"lastBreak",{get:function(){return Mt},set:function(Dt){Mt=Dt}});var Kt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Kt},set:function(Dt){Kt=Dt}}),Object.defineProperty(this,"ctx",{get:function(){return y},set:function(Dt){Dt instanceof b&&(y=Dt)}}),Object.defineProperty(this,"path",{get:function(){return y.path},set:function(Dt){y.path=Dt}});var re=[];Object.defineProperty(this,"ctxStack",{get:function(){return re},set:function(Dt){re=Dt}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Dt){var lt;lt=E(Dt),this.ctx.fillStyle=lt.style,this.ctx.isFillTransparent=lt.a===0,this.ctx.fillOpacity=lt.a,this.pdf.setFillColor(lt.r,lt.g,lt.b,{a:lt.a}),this.pdf.setTextColor(lt.r,lt.g,lt.b,{a:lt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Dt){var lt=E(Dt);this.ctx.strokeStyle=lt.style,this.ctx.isStrokeTransparent=lt.a===0,this.ctx.strokeOpacity=lt.a,lt.a===0?this.pdf.setDrawColor(255,255,255):(lt.a,this.pdf.setDrawColor(lt.r,lt.g,lt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Dt){["butt","round","square"].indexOf(Dt)!==-1&&(this.ctx.lineCap=Dt,this.pdf.setLineCap(Dt))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Dt){isNaN(Dt)||(this.ctx.lineWidth=Dt,this.pdf.setLineWidth(Dt))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Dt){["bevel","round","miter"].indexOf(Dt)!==-1&&(this.ctx.lineJoin=Dt,this.pdf.setLineJoin(Dt))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Dt){isNaN(Dt)||(this.ctx.miterLimit=Dt,this.pdf.setMiterLimit(Dt))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Dt){this.ctx.textBaseline=Dt}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Dt){["right","end","center","left","start"].indexOf(Dt)!==-1&&(this.ctx.textAlign=Dt)}});var it=null;function ht(Dt,lt){if(it===null){var Gt=function(se){var Qt=[];return Object.keys(se).forEach(function(oe){se[oe].forEach(function(Ot){var Lt=null;switch(Ot){case"bold":Lt={family:oe,weight:"bold"};break;case"italic":Lt={family:oe,style:"italic"};break;case"bolditalic":Lt={family:oe,weight:"bold",style:"italic"};break;case"":case"normal":Lt={family:oe}}Lt!==null&&(Lt.ref={name:oe,style:Ot},Qt.push(Lt))})}),Qt}(Dt.getFontList());it=function(se){for(var Qt={},oe=0;oe<se.length;++oe){var Ot=id(se[oe]),Lt=Ot.family,ie=Ot.stretch,_e=Ot.style,Le=Ot.weight;Qt[Lt]=Qt[Lt]||{},Qt[Lt][ie]=Qt[Lt][ie]||{},Qt[Lt][ie][_e]=Qt[Lt][ie][_e]||{},Qt[Lt][ie][_e][Le]=Ot}return Qt}(Gt.concat(lt))}return it}var It=null;Object.defineProperty(this,"fontFaces",{get:function(){return It},set:function(Dt){it=null,It=Dt}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Dt){var lt;if(this.ctx.font=Dt,(lt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Dt))!==null){var Gt=lt[1],se=(lt[2],lt[3]),Qt=lt[4],oe=(lt[5],lt[6]),Ot=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Qt)[2];Qt=Math.floor(Ot==="px"?parseFloat(Qt)*this.pdf.internal.scaleFactor:Ot==="em"?parseFloat(Qt)*this.pdf.getFontSize():parseFloat(Qt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Qt);var Lt=function(Ue){var He,Ne,Sn=[],en=Ue.trim();if(en==="")return yf;if(en in M0)return[M0[en]];for(;en!=="";){switch(Ne=null,He=(en=B0(en)).charAt(0)){case'"':case"'":Ne=Dx(en.substring(1),He);break;default:Ne=Ox(en)}if(Ne===null||(Sn.push(Ne[0]),(en=B0(Ne[1]))!==""&&en.charAt(0)!==","))return yf;en=en.replace(/^,/,"")}return Sn}(oe);if(this.fontFaces){var ie=Nx(ht(this.pdf,this.fontFaces),Lt.map(function(Ue){return{family:Ue,stretch:"normal",weight:se,style:Gt}}));this.pdf.setFont(ie.ref.name,ie.ref.style)}else{var _e="";(se==="bold"||parseInt(se,10)>=700||Gt==="bold")&&(_e="bold"),Gt==="italic"&&(_e+="italic"),_e.length===0&&(_e="normal");for(var Le="",zt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},De=0;De<Lt.length;De++){if(this.pdf.internal.getFont(Lt[De],_e,{noFallback:!0,disableWarning:!0})!==void 0){Le=Lt[De];break}if(_e==="bolditalic"&&this.pdf.internal.getFont(Lt[De],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Le=Lt[De],_e="bold";else if(this.pdf.internal.getFont(Lt[De],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Le=Lt[De],_e="normal";break}}if(Le===""){for(var Te=0;Te<Lt.length;Te++)if(zt[Lt[Te]]){Le=zt[Lt[Te]];break}}Le=Le===""?"Times":Le,this.pdf.setFont(Le,_e)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Dt){this.ctx.globalCompositeOperation=Dt}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Dt){this.ctx.globalAlpha=Dt}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Dt){this.ctx.lineDashOffset=Dt,Rt.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Dt){this.ctx.lineDash=Dt,Rt.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Dt){this.ctx.ignoreClearRect=!!Dt}})};w.prototype.setLineDash=function(D){this.lineDash=D},w.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},w.prototype.fill=function(){Ct.call(this,"fill",!1)},w.prototype.stroke=function(){Ct.call(this,"stroke",!1)},w.prototype.beginPath=function(){this.path=[{type:"begin"}]},w.prototype.moveTo=function(D,Z){if(isNaN(D)||isNaN(Z))throw ai.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ut=this.ctx.transform.applyToPoint(new c(D,Z));this.path.push({type:"mt",x:ut.x,y:ut.y}),this.ctx.lastPoint=new c(D,Z)},w.prototype.closePath=function(){var D=new c(0,0),Z=0;for(Z=this.path.length-1;Z!==-1;Z--)if(this.path[Z].type==="begin"&&oi(this.path[Z+1])==="object"&&typeof this.path[Z+1].x=="number"){D=new c(this.path[Z+1].x,this.path[Z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(D.x,D.y)},w.prototype.lineTo=function(D,Z){if(isNaN(D)||isNaN(Z))throw ai.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ut=this.ctx.transform.applyToPoint(new c(D,Z));this.path.push({type:"lt",x:ut.x,y:ut.y}),this.ctx.lastPoint=new c(ut.x,ut.y)},w.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Ct.call(this,null,!0)},w.prototype.quadraticCurveTo=function(D,Z,ut,vt){if(isNaN(ut)||isNaN(vt)||isNaN(D)||isNaN(Z))throw ai.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var xt=this.ctx.transform.applyToPoint(new c(ut,vt)),dt=this.ctx.transform.applyToPoint(new c(D,Z));this.path.push({type:"qct",x1:dt.x,y1:dt.y,x:xt.x,y:xt.y}),this.ctx.lastPoint=new c(xt.x,xt.y)},w.prototype.bezierCurveTo=function(D,Z,ut,vt,xt,dt){if(isNaN(xt)||isNaN(dt)||isNaN(D)||isNaN(Z)||isNaN(ut)||isNaN(vt))throw ai.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var St=this.ctx.transform.applyToPoint(new c(xt,dt)),Mt=this.ctx.transform.applyToPoint(new c(D,Z)),Kt=this.ctx.transform.applyToPoint(new c(ut,vt));this.path.push({type:"bct",x1:Mt.x,y1:Mt.y,x2:Kt.x,y2:Kt.y,x:St.x,y:St.y}),this.ctx.lastPoint=new c(St.x,St.y)},w.prototype.arc=function(D,Z,ut,vt,xt,dt){if(isNaN(D)||isNaN(Z)||isNaN(ut)||isNaN(vt)||isNaN(xt))throw ai.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(dt=!!dt,!this.ctx.transform.isIdentity){var St=this.ctx.transform.applyToPoint(new c(D,Z));D=St.x,Z=St.y;var Mt=this.ctx.transform.applyToPoint(new c(0,ut)),Kt=this.ctx.transform.applyToPoint(new c(0,0));ut=Math.sqrt(Math.pow(Mt.x-Kt.x,2)+Math.pow(Mt.y-Kt.y,2))}Math.abs(xt-vt)>=2*Math.PI&&(vt=0,xt=2*Math.PI),this.path.push({type:"arc",x:D,y:Z,radius:ut,startAngle:vt,endAngle:xt,counterclockwise:dt})},w.prototype.arcTo=function(D,Z,ut,vt,xt){throw new Error("arcTo not implemented.")},w.prototype.rect=function(D,Z,ut,vt){if(isNaN(D)||isNaN(Z)||isNaN(ut)||isNaN(vt))throw ai.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(D,Z),this.lineTo(D+ut,Z),this.lineTo(D+ut,Z+vt),this.lineTo(D,Z+vt),this.lineTo(D,Z),this.lineTo(D+ut,Z),this.lineTo(D,Z)},w.prototype.fillRect=function(D,Z,ut,vt){if(isNaN(D)||isNaN(Z)||isNaN(ut)||isNaN(vt))throw ai.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!C.call(this)){var xt={};this.lineCap!=="butt"&&(xt.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(xt.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(D,Z,ut,vt),this.fill(),xt.hasOwnProperty("lineCap")&&(this.lineCap=xt.lineCap),xt.hasOwnProperty("lineJoin")&&(this.lineJoin=xt.lineJoin)}},w.prototype.strokeRect=function(D,Z,ut,vt){if(isNaN(D)||isNaN(Z)||isNaN(ut)||isNaN(vt))throw ai.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");R.call(this)||(this.beginPath(),this.rect(D,Z,ut,vt),this.stroke())},w.prototype.clearRect=function(D,Z,ut,vt){if(isNaN(D)||isNaN(Z)||isNaN(ut)||isNaN(vt))throw ai.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(D,Z,ut,vt))},w.prototype.save=function(D){D=typeof D!="boolean"||D;for(var Z=this.pdf.internal.getCurrentPageInfo().pageNumber,ut=0;ut<this.pdf.internal.getNumberOfPages();ut++)this.pdf.setPage(ut+1),this.pdf.internal.out("q");if(this.pdf.setPage(Z),D){this.ctx.fontSize=this.pdf.internal.getFontSize();var vt=new b(this.ctx);this.ctxStack.push(this.ctx),this.ctx=vt}},w.prototype.restore=function(D){D=typeof D!="boolean"||D;for(var Z=this.pdf.internal.getCurrentPageInfo().pageNumber,ut=0;ut<this.pdf.internal.getNumberOfPages();ut++)this.pdf.setPage(ut+1),this.pdf.internal.out("Q");this.pdf.setPage(Z),D&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},w.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var E=function(D){var Z,ut,vt,xt;if(D.isCanvasGradient===!0&&(D=D.getColor()),!D)return{r:0,g:0,b:0,a:0,style:D};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(D))Z=0,ut=0,vt=0,xt=0;else{var dt=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(D);if(dt!==null)Z=parseInt(dt[1]),ut=parseInt(dt[2]),vt=parseInt(dt[3]),xt=1;else if((dt=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(D))!==null)Z=parseInt(dt[1]),ut=parseInt(dt[2]),vt=parseInt(dt[3]),xt=parseFloat(dt[4]);else{if(xt=1,typeof D=="string"&&D.charAt(0)!=="#"){var St=new o1(D);D=St.ok?St.toHex():"#000000"}D.length===4?(Z=D.substring(1,2),Z+=Z,ut=D.substring(2,3),ut+=ut,vt=D.substring(3,4),vt+=vt):(Z=D.substring(1,3),ut=D.substring(3,5),vt=D.substring(5,7)),Z=parseInt(Z,16),ut=parseInt(ut,16),vt=parseInt(vt,16)}}return{r:Z,g:ut,b:vt,a:xt,style:D}},C=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},R=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};w.prototype.fillText=function(D,Z,ut,vt){if(isNaN(Z)||isNaN(ut)||typeof D!="string")throw ai.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(vt=isNaN(vt)?void 0:vt,!C.call(this)){var xt=G(this.ctx.transform.rotation),dt=this.ctx.transform.scaleX;J.call(this,{text:D,x:Z,y:ut,scale:dt,angle:xt,align:this.textAlign,maxWidth:vt})}},w.prototype.strokeText=function(D,Z,ut,vt){if(isNaN(Z)||isNaN(ut)||typeof D!="string")throw ai.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!R.call(this)){vt=isNaN(vt)?void 0:vt;var xt=G(this.ctx.transform.rotation),dt=this.ctx.transform.scaleX;J.call(this,{text:D,x:Z,y:ut,scale:dt,renderingMode:"stroke",angle:xt,align:this.textAlign,maxWidth:vt})}},w.prototype.measureText=function(D){if(typeof D!="string")throw ai.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Z=this.pdf,ut=this.pdf.internal.scaleFactor,vt=Z.internal.getFontSize(),xt=Z.getStringUnitWidth(D)*vt/Z.internal.scaleFactor,dt=function(St){var Mt=(St=St||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Mt}}),this};return new dt({width:xt*=Math.round(96*ut/72*1e4)/1e4})},w.prototype.scale=function(D,Z){if(isNaN(D)||isNaN(Z))throw ai.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ut=new m(D,0,0,Z,0,0);this.ctx.transform=this.ctx.transform.multiply(ut)},w.prototype.rotate=function(D){if(isNaN(D))throw ai.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Z=new m(Math.cos(D),Math.sin(D),-Math.sin(D),Math.cos(D),0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},w.prototype.translate=function(D,Z){if(isNaN(D)||isNaN(Z))throw ai.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ut=new m(1,0,0,1,D,Z);this.ctx.transform=this.ctx.transform.multiply(ut)},w.prototype.transform=function(D,Z,ut,vt,xt,dt){if(isNaN(D)||isNaN(Z)||isNaN(ut)||isNaN(vt)||isNaN(xt)||isNaN(dt))throw ai.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var St=new m(D,Z,ut,vt,xt,dt);this.ctx.transform=this.ctx.transform.multiply(St)},w.prototype.setTransform=function(D,Z,ut,vt,xt,dt){D=isNaN(D)?1:D,Z=isNaN(Z)?0:Z,ut=isNaN(ut)?0:ut,vt=isNaN(vt)?1:vt,xt=isNaN(xt)?0:xt,dt=isNaN(dt)?0:dt,this.ctx.transform=new m(D,Z,ut,vt,xt,dt)};var O=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};w.prototype.drawImage=function(D,Z,ut,vt,xt,dt,St,Mt,Kt){var re=this.pdf.getImageProperties(D),it=1,ht=1,It=1,Dt=1;vt!==void 0&&Mt!==void 0&&(It=Mt/vt,Dt=Kt/xt,it=re.width/vt*Mt/vt,ht=re.height/xt*Kt/xt),dt===void 0&&(dt=Z,St=ut,Z=0,ut=0),vt!==void 0&&Mt===void 0&&(Mt=vt,Kt=xt),vt===void 0&&Mt===void 0&&(Mt=re.width,Kt=re.height);for(var lt,Gt=this.ctx.transform.decompose(),se=G(Gt.rotate.shx),Qt=new m,oe=(Qt=(Qt=(Qt=Qt.multiply(Gt.translate)).multiply(Gt.skew)).multiply(Gt.scale)).applyToRectangle(new d(dt-Z*It,St-ut*Dt,vt*it,xt*ht)),Ot=q.call(this,oe),Lt=[],ie=0;ie<Ot.length;ie+=1)Lt.indexOf(Ot[ie])===-1&&Lt.push(Ot[ie]);if(Y(Lt),this.autoPaging)for(var _e=Lt[0],Le=Lt[Lt.length-1],zt=_e;zt<Le+1;zt++){this.pdf.setPage(zt);var De=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Te=zt===1?this.posY+this.margin[0]:this.margin[0],Ue=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],He=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ne=zt===1?0:Ue+(zt-2)*He;if(this.ctx.clip_path.length!==0){var Sn=this.path;lt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=V(lt,this.posX+this.margin[3],-Ne+Te+this.ctx.prevPageLastElemOffset),kt.call(this,"fill",!0),this.path=Sn}var en=JSON.parse(JSON.stringify(oe));en=V([en],this.posX+this.margin[3],-Ne+Te+this.ctx.prevPageLastElemOffset)[0];var Jn=(zt>_e||zt<Le)&&O.call(this);Jn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],De,He,null).clip().discardPath()),this.pdf.addImage(D,"JPEG",en.x,en.y,en.w,en.h,null,null,se),Jn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(D,"JPEG",oe.x,oe.y,oe.w,oe.h,null,null,se)};var q=function(D,Z,ut){var vt=[];Z=Z||this.pdf.internal.pageSize.width,ut=ut||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var xt=this.posY+this.ctx.prevPageLastElemOffset;switch(D.type){default:case"mt":case"lt":vt.push(Math.floor((D.y+xt)/ut)+1);break;case"arc":vt.push(Math.floor((D.y+xt-D.radius)/ut)+1),vt.push(Math.floor((D.y+xt+D.radius)/ut)+1);break;case"qct":var dt=j(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x,D.y);vt.push(Math.floor((dt.y+xt)/ut)+1),vt.push(Math.floor((dt.y+dt.h+xt)/ut)+1);break;case"bct":var St=X(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x2,D.y2,D.x,D.y);vt.push(Math.floor((St.y+xt)/ut)+1),vt.push(Math.floor((St.y+St.h+xt)/ut)+1);break;case"rect":vt.push(Math.floor((D.y+xt)/ut)+1),vt.push(Math.floor((D.y+D.h+xt)/ut)+1)}for(var Mt=0;Mt<vt.length;Mt+=1)for(;this.pdf.internal.getNumberOfPages()<vt[Mt];)F.call(this);return vt},F=function(){var D=this.fillStyle,Z=this.strokeStyle,ut=this.font,vt=this.lineCap,xt=this.lineWidth,dt=this.lineJoin;this.pdf.addPage(),this.fillStyle=D,this.strokeStyle=Z,this.font=ut,this.lineCap=vt,this.lineWidth=xt,this.lineJoin=dt},V=function(D,Z,ut){for(var vt=0;vt<D.length;vt++)switch(D[vt].type){case"bct":D[vt].x2+=Z,D[vt].y2+=ut;case"qct":D[vt].x1+=Z,D[vt].y1+=ut;case"mt":case"lt":case"arc":default:D[vt].x+=Z,D[vt].y+=ut}return D},Y=function(D){return D.sort(function(Z,ut){return Z-ut})},Ct=function(D,Z){for(var ut,vt,xt=this.fillStyle,dt=this.strokeStyle,St=this.lineCap,Mt=this.lineWidth,Kt=Math.abs(Mt*this.ctx.transform.scaleX),re=this.lineJoin,it=JSON.parse(JSON.stringify(this.path)),ht=JSON.parse(JSON.stringify(this.path)),It=[],Dt=0;Dt<ht.length;Dt++)if(ht[Dt].x!==void 0)for(var lt=q.call(this,ht[Dt]),Gt=0;Gt<lt.length;Gt+=1)It.indexOf(lt[Gt])===-1&&It.push(lt[Gt]);for(var se=0;se<It.length;se++)for(;this.pdf.internal.getNumberOfPages()<It[se];)F.call(this);if(Y(It),this.autoPaging)for(var Qt=It[0],oe=It[It.length-1],Ot=Qt;Ot<oe+1;Ot++){this.pdf.setPage(Ot),this.fillStyle=xt,this.strokeStyle=dt,this.lineCap=St,this.lineWidth=Kt,this.lineJoin=re;var Lt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ie=Ot===1?this.posY+this.margin[0]:this.margin[0],_e=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Le=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],zt=Ot===1?0:_e+(Ot-2)*Le;if(this.ctx.clip_path.length!==0){var De=this.path;ut=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=V(ut,this.posX+this.margin[3],-zt+ie+this.ctx.prevPageLastElemOffset),kt.call(this,D,!0),this.path=De}if(vt=JSON.parse(JSON.stringify(it)),this.path=V(vt,this.posX+this.margin[3],-zt+ie+this.ctx.prevPageLastElemOffset),Z===!1||Ot===0){var Te=(Ot>Qt||Ot<oe)&&O.call(this);Te&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Lt,Le,null).clip().discardPath()),kt.call(this,D,Z),Te&&this.pdf.restoreGraphicsState()}this.lineWidth=Mt}else this.lineWidth=Kt,kt.call(this,D,Z),this.lineWidth=Mt;this.path=it},kt=function(D,Z){if((D!=="stroke"||Z||!R.call(this))&&(D==="stroke"||Z||!C.call(this))){for(var ut,vt,xt=[],dt=this.path,St=0;St<dt.length;St++){var Mt=dt[St];switch(Mt.type){case"begin":xt.push({begin:!0});break;case"close":xt.push({close:!0});break;case"mt":xt.push({start:Mt,deltas:[],abs:[]});break;case"lt":var Kt=xt.length;if(dt[St-1]&&!isNaN(dt[St-1].x)&&(ut=[Mt.x-dt[St-1].x,Mt.y-dt[St-1].y],Kt>0)){for(;Kt>=0;Kt--)if(xt[Kt-1].close!==!0&&xt[Kt-1].begin!==!0){xt[Kt-1].deltas.push(ut),xt[Kt-1].abs.push(Mt);break}}break;case"bct":ut=[Mt.x1-dt[St-1].x,Mt.y1-dt[St-1].y,Mt.x2-dt[St-1].x,Mt.y2-dt[St-1].y,Mt.x-dt[St-1].x,Mt.y-dt[St-1].y],xt[xt.length-1].deltas.push(ut);break;case"qct":var re=dt[St-1].x+2/3*(Mt.x1-dt[St-1].x),it=dt[St-1].y+2/3*(Mt.y1-dt[St-1].y),ht=Mt.x+2/3*(Mt.x1-Mt.x),It=Mt.y+2/3*(Mt.y1-Mt.y),Dt=Mt.x,lt=Mt.y;ut=[re-dt[St-1].x,it-dt[St-1].y,ht-dt[St-1].x,It-dt[St-1].y,Dt-dt[St-1].x,lt-dt[St-1].y],xt[xt.length-1].deltas.push(ut);break;case"arc":xt.push({deltas:[],abs:[],arc:!0}),Array.isArray(xt[xt.length-1].abs)&&xt[xt.length-1].abs.push(Mt)}}vt=Z?null:D==="stroke"?"stroke":"fill";for(var Gt=!1,se=0;se<xt.length;se++)if(xt[se].arc)for(var Qt=xt[se].abs,oe=0;oe<Qt.length;oe++){var Ot=Qt[oe];Ot.type==="arc"?ct.call(this,Ot.x,Ot.y,Ot.radius,Ot.startAngle,Ot.endAngle,Ot.counterclockwise,void 0,Z,!Gt):I.call(this,Ot.x,Ot.y),Gt=!0}else if(xt[se].close===!0)this.pdf.internal.out("h"),Gt=!1;else if(xt[se].begin!==!0){var Lt=xt[se].start.x,ie=xt[se].start.y;nt.call(this,xt[se].deltas,Lt,ie),Gt=!0}vt&&Bt.call(this,vt),Z&&Yt.call(this)}},wt=function(D){var Z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ut=Z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return D-ut;case"top":return D+Z-ut;case"hanging":return D+Z-2*ut;case"middle":return D+Z/2-ut;case"ideographic":return D;case"alphabetic":default:return D}},et=function(D){return D+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};w.prototype.createLinearGradient=function(){var D=function(){};return D.colorStops=[],D.addColorStop=function(Z,ut){this.colorStops.push([Z,ut])},D.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},D.isCanvasGradient=!0,D},w.prototype.createPattern=function(){return this.createLinearGradient()},w.prototype.createRadialGradient=function(){return this.createLinearGradient()};var ct=function(D,Z,ut,vt,xt,dt,St,Mt,Kt){for(var re=tt.call(this,ut,vt,xt,dt),it=0;it<re.length;it++){var ht=re[it];it===0&&(Kt?$.call(this,ht.x1+D,ht.y1+Z):I.call(this,ht.x1+D,ht.y1+Z)),K.call(this,D,Z,ht.x2,ht.y2,ht.x3,ht.y3,ht.x4,ht.y4)}Mt?Yt.call(this):Bt.call(this,St)},Bt=function(D){switch(D){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Yt=function(){this.pdf.clip(),this.pdf.discardPath()},$=function(D,Z){this.pdf.internal.out(n(D)+" "+r(Z)+" m")},J=function(D){var Z;switch(D.align){case"right":case"end":Z="right";break;case"center":Z="center";break;case"left":case"start":default:Z="left"}var ut=this.pdf.getTextDimensions(D.text),vt=wt.call(this,D.y),xt=et.call(this,vt)-ut.h,dt=this.ctx.transform.applyToPoint(new c(D.x,vt)),St=this.ctx.transform.decompose(),Mt=new m;Mt=(Mt=(Mt=Mt.multiply(St.translate)).multiply(St.skew)).multiply(St.scale);for(var Kt,re,it,ht=this.ctx.transform.applyToRectangle(new d(D.x,vt,ut.w,ut.h)),It=Mt.applyToRectangle(new d(D.x,xt,ut.w,ut.h)),Dt=q.call(this,It),lt=[],Gt=0;Gt<Dt.length;Gt+=1)lt.indexOf(Dt[Gt])===-1&&lt.push(Dt[Gt]);if(Y(lt),this.autoPaging)for(var se=lt[0],Qt=lt[lt.length-1],oe=se;oe<Qt+1;oe++){this.pdf.setPage(oe);var Ot=oe===1?this.posY+this.margin[0]:this.margin[0],Lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ie=this.pdf.internal.pageSize.height-this.margin[2],_e=ie-this.margin[0],Le=this.pdf.internal.pageSize.width-this.margin[1],zt=Le-this.margin[3],De=oe===1?0:Lt+(oe-2)*_e;if(this.ctx.clip_path.length!==0){var Te=this.path;Kt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=V(Kt,this.posX+this.margin[3],-1*De+Ot),kt.call(this,"fill",!0),this.path=Te}var Ue=V([JSON.parse(JSON.stringify(It))],this.posX+this.margin[3],-De+Ot+this.ctx.prevPageLastElemOffset)[0];D.scale>=.01&&(re=this.pdf.internal.getFontSize(),this.pdf.setFontSize(re*D.scale),it=this.lineWidth,this.lineWidth=it*D.scale);var He=this.autoPaging!=="text";if(He||Ue.y+Ue.h<=ie){if(He||Ue.y>=Ot&&Ue.x<=Le){var Ne=He?D.text:this.pdf.splitTextToSize(D.text,D.maxWidth||Le-Ue.x)[0],Sn=V([JSON.parse(JSON.stringify(ht))],this.posX+this.margin[3],-De+Ot+this.ctx.prevPageLastElemOffset)[0],en=He&&(oe>se||oe<Qt)&&O.call(this);en&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],zt,_e,null).clip().discardPath()),this.pdf.text(Ne,Sn.x,Sn.y,{angle:D.angle,align:Z,renderingMode:D.renderingMode}),en&&this.pdf.restoreGraphicsState()}}else Ue.y<ie&&(this.ctx.prevPageLastElemOffset+=ie-Ue.y);D.scale>=.01&&(this.pdf.setFontSize(re),this.lineWidth=it)}else D.scale>=.01&&(re=this.pdf.internal.getFontSize(),this.pdf.setFontSize(re*D.scale),it=this.lineWidth,this.lineWidth=it*D.scale),this.pdf.text(D.text,dt.x+this.posX,dt.y+this.posY,{angle:D.angle,align:Z,renderingMode:D.renderingMode,maxWidth:D.maxWidth}),D.scale>=.01&&(this.pdf.setFontSize(re),this.lineWidth=it)},I=function(D,Z,ut,vt){ut=ut||0,vt=vt||0,this.pdf.internal.out(n(D+ut)+" "+r(Z+vt)+" l")},nt=function(D,Z,ut){return this.pdf.lines(D,Z,ut,null,null)},K=function(D,Z,ut,vt,xt,dt,St,Mt){this.pdf.internal.out([e(o(ut+D)),e(l(vt+Z)),e(o(xt+D)),e(l(dt+Z)),e(o(St+D)),e(l(Mt+Z)),"c"].join(" "))},tt=function(D,Z,ut,vt){for(var xt=2*Math.PI,dt=Math.PI/2;Z>ut;)Z-=xt;var St=Math.abs(ut-Z);St<xt&&vt&&(St=xt-St);for(var Mt=[],Kt=vt?-1:1,re=Z;St>1e-5;){var it=re+Kt*Math.min(St,dt);Mt.push(_t.call(this,D,re,it)),St-=Math.abs(it-re),re=it}return Mt},_t=function(D,Z,ut){var vt=(ut-Z)/2,xt=D*Math.cos(vt),dt=D*Math.sin(vt),St=xt,Mt=-dt,Kt=St*St+Mt*Mt,re=Kt+St*xt+Mt*dt,it=4/3*(Math.sqrt(2*Kt*re)-re)/(St*dt-Mt*xt),ht=St-it*Mt,It=Mt+it*St,Dt=ht,lt=-It,Gt=vt+Z,se=Math.cos(Gt),Qt=Math.sin(Gt);return{x1:D*Math.cos(Z),y1:D*Math.sin(Z),x2:ht*se-It*Qt,y2:ht*Qt+It*se,x3:Dt*se-lt*Qt,y3:Dt*Qt+lt*se,x4:D*Math.cos(ut),y4:D*Math.sin(ut)}},G=function(D){return 180*D/Math.PI},j=function(D,Z,ut,vt,xt,dt){var St=D+.5*(ut-D),Mt=Z+.5*(vt-Z),Kt=xt+.5*(ut-xt),re=dt+.5*(vt-dt),it=Math.min(D,xt,St,Kt),ht=Math.max(D,xt,St,Kt),It=Math.min(Z,dt,Mt,re),Dt=Math.max(Z,dt,Mt,re);return new d(it,It,ht-it,Dt-It)},X=function(D,Z,ut,vt,xt,dt,St,Mt){var Kt,re,it,ht,It,Dt,lt,Gt,se,Qt,oe,Ot,Lt,ie,_e=ut-D,Le=vt-Z,zt=xt-ut,De=dt-vt,Te=St-xt,Ue=Mt-dt;for(re=0;re<41;re++)se=(lt=(it=D+(Kt=re/40)*_e)+Kt*((It=ut+Kt*zt)-it))+Kt*(It+Kt*(xt+Kt*Te-It)-lt),Qt=(Gt=(ht=Z+Kt*Le)+Kt*((Dt=vt+Kt*De)-ht))+Kt*(Dt+Kt*(dt+Kt*Ue-Dt)-Gt),re==0?(oe=se,Ot=Qt,Lt=se,ie=Qt):(oe=Math.min(oe,se),Ot=Math.min(Ot,Qt),Lt=Math.max(Lt,se),ie=Math.max(ie,Qt));return new d(Math.round(oe),Math.round(Ot),Math.round(Lt-oe),Math.round(ie-Ot))},Rt=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var D,Z,ut=(D=this.ctx.lineDash,Z=this.ctx.lineDashOffset,JSON.stringify({lineDash:D,lineDashOffset:Z}));this.prevLineDash!==ut&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ut)}}})(gn.API),function(t){var e=function(l){var c,d,m,y,b,w,E,C,R,O;for(d=[],m=0,y=(l+=c="\0\0\0\0".slice(l.length%4||4)).length;y>m;m+=4)(b=(l.charCodeAt(m)<<24)+(l.charCodeAt(m+1)<<16)+(l.charCodeAt(m+2)<<8)+l.charCodeAt(m+3))!==0?(w=(b=((b=((b=((b=(b-(O=b%85))/85)-(R=b%85))/85)-(C=b%85))/85)-(E=b%85))/85)%85,d.push(w+33,E+33,C+33,R+33,O+33)):d.push(122);return function(q,F){for(var V=F;V>0;V--)q.pop()}(d,c.length),String.fromCharCode.apply(String,d)+"~>"},n=function(l){var c,d,m,y,b,w=String,E="length",C=255,R="charCodeAt",O="slice",q="replace";for(l[O](-2),l=l[O](0,-2)[q](/\s/g,"")[q]("z","!!!!!"),m=[],y=0,b=(l+=c="uuuuu"[O](l[E]%5||5))[E];b>y;y+=5)d=52200625*(l[R](y)-33)+614125*(l[R](y+1)-33)+7225*(l[R](y+2)-33)+85*(l[R](y+3)-33)+(l[R](y+4)-33),m.push(C&d>>24,C&d>>16,C&d>>8,C&d);return function(F,V){for(var Y=V;Y>0;Y--)F.pop()}(m,c[E]),w.fromCharCode.apply(w,m)},r=function(l){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),c.test(l)===!1)return"";for(var d="",m=0;m<l.length;m+=2)d+=String.fromCharCode("0x"+(l[m]+l[m+1]));return d},o=function(l){for(var c=new Uint8Array(l.length),d=l.length;d--;)c[d]=l.charCodeAt(d);return l=(c=Jf(c)).reduce(function(m,y){return m+String.fromCharCode(y)},"")};t.processDataByFilters=function(l,c){var d=0,m=l||"",y=[];for(typeof(c=c||[])=="string"&&(c=[c]),d=0;d<c.length;d+=1)switch(c[d]){case"ASCII85Decode":case"/ASCII85Decode":m=n(m),y.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":m=e(m),y.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":m=r(m),y.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":m=m.split("").map(function(b){return("0"+b.charCodeAt().toString(16)).slice(-2)}).join("")+">",y.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":m=o(m),y.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[d]+'" is not implemented')}return{data:m,reverseChain:y.reverse().join(" ")}}}(gn.API),function(t){t.loadFile=function(e,n,r){return function(o,l,c){l=l!==!1,c=typeof c=="function"?c:function(){};var d=void 0;try{d=function(m,y,b){var w=new XMLHttpRequest,E=0,C=function(R){var O=R.length,q=[],F=String.fromCharCode;for(E=0;E<O;E+=1)q.push(F(255&R.charCodeAt(E)));return q.join("")};if(w.open("GET",m,!y),w.overrideMimeType("text/plain; charset=x-user-defined"),y===!1&&(w.onload=function(){w.status===200?b(C(this.responseText)):b(void 0)}),w.send(null),y&&w.status===200)return C(w.responseText)}(o,l,c)}catch{}return d}(e,n,r)},t.loadImageFile=t.loadFile}(gn.API),function(t){function e(){return(vn.html2canvas?Promise.resolve(vn.html2canvas):Ol(()=>import("./html2canvas.esm.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function n(){return(vn.DOMPurify?Promise.resolve(vn.DOMPurify):Ol(()=>import("./purify.es.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var r=function(c){var d=oi(c);return d==="undefined"?"undefined":d==="string"||c instanceof String?"string":d==="number"||c instanceof Number?"number":d==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":d==="object"?"object":"unknown"},o=function(c,d){var m=document.createElement(c);for(var y in d.className&&(m.className=d.className),d.innerHTML&&d.dompurify&&(m.innerHTML=d.dompurify.sanitize(d.innerHTML)),d.style)m.style[y]=d.style[y];return m},l=function c(d){var m=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),y=c.convert(Promise.resolve(),m);return y=(y=y.setProgress(1,c,1,[c])).set(d)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(c,d){return c.__proto__=d||l.prototype,c},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(c,d){return this.then(function(){switch(d=d||function(m){switch(r(m)){case"string":return"string";case"element":return m.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(c)){case"string":return this.then(n).then(function(m){return this.set({src:o("div",{innerHTML:c,dompurify:m})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},l.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},d=function m(y,b){for(var w=y.nodeType===3?document.createTextNode(y.nodeValue):y.cloneNode(!1),E=y.firstChild;E;E=E.nextSibling)b!==!0&&E.nodeType===1&&E.nodeName==="SCRIPT"||w.appendChild(m(E,b));return y.nodeType===1&&(y.nodeName==="CANVAS"?(w.width=y.width,w.height=y.height,w.getContext("2d").drawImage(y,0,0)):y.nodeName!=="TEXTAREA"&&y.nodeName!=="SELECT"||(w.value=y.value),w.addEventListener("load",function(){w.scrollTop=y.scrollTop,w.scrollLeft=y.scrollLeft},!0)),w}(this.prop.src,this.opt.html2canvas.javascriptEnabled);d.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(d),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(d){var m=Object.assign({},this.opt.html2canvas);return delete m.onrendered,d(this.prop.container,m)}).then(function(d){(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(d){var m=this.opt.jsPDF,y=this.opt.fontFaces,b=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,w=Object.assign({async:!0,allowTaint:!0,scale:b,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete w.onrendered,m.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,m.context2d.posX=this.opt.x,m.context2d.posY=this.opt.y,m.context2d.margin=this.opt.margin,m.context2d.fontFaces=y,y)for(var E=0;E<y.length;++E){var C=y[E],R=C.src.find(function(O){return O.format==="truetype"});R&&m.addFont(R.url,C.ref.name,C.ref.style)}return w.windowHeight=w.windowHeight||0,w.windowHeight=w.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):w.windowHeight,m.context2d.save(!0),d(this.prop.container,w)}).then(function(d){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(c,d,m){return(m=m||"pdf").toLowerCase()==="img"||m.toLowerCase()==="image"?this.outputImg(c,d):this.outputPdf(c,d)},l.prototype.outputPdf=function(c,d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,d)})},l.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},l.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(c){if(r(c)!=="object")return this;var d=Object.keys(c||{}).map(function(m){if(m in l.template.prop)return function(){this.prop[m]=c[m]};switch(m){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[m]=c[m]}}},this);return this.then(function(){return this.thenList(d)})},l.prototype.get=function(c,d){return this.then(function(){var m=c in l.template.prop?this.prop[c]:this.opt[c];return d?d(m):m})},l.prototype.setMargin=function(c){return this.then(function(){switch(r(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},l.prototype.setPageSize=function(c){function d(m,y){return Math.floor(m*y/72*96)}return this.then(function(){(c=c||gn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:d(c.inner.width,c.k),height:d(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},l.prototype.setProgress=function(c,d,m,y){return c!=null&&(this.progress.val=c),d!=null&&(this.progress.state=d),m!=null&&(this.progress.n=m),y!=null&&(this.progress.stack=y),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(c,d,m,y){return this.setProgress(c?this.progress.val+c:null,d||null,m?this.progress.n+m:null,y?this.progress.stack.concat(y):null)},l.prototype.then=function(c,d){var m=this;return this.thenCore(c,d,function(y,b){return m.updateProgress(null,null,1,[y]),Promise.prototype.then.call(this,function(w){return m.updateProgress(null,y),w}).then(y,b).then(function(w){return m.updateProgress(1),w})})},l.prototype.thenCore=function(c,d,m){m=m||Promise.prototype.then,c&&(c=c.bind(this)),d&&(d=d.bind(this));var y=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:l.convert(Object.assign({},this),Promise.prototype),b=m.call(y,c,d);return l.convert(b,this.__proto__)},l.prototype.thenExternal=function(c,d){return Promise.prototype.then.call(this,c,d)},l.prototype.thenList=function(c){var d=this;return c.forEach(function(m){d=d.thenCore(m)}),d},l.prototype.catch=function(c){c&&(c=c.bind(this));var d=Promise.prototype.catch.call(this,c);return l.convert(d,this)},l.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},l.prototype.error=function(c){return this.then(function(){throw new Error(c)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,gn.getPageSize=function(c,d,m){if(oi(c)==="object"){var y=c;c=y.orientation,d=y.unit||d,m=y.format||m}d=d||"mm",m=m||"a4",c=(""+(c||"P")).toLowerCase();var b,w=(""+m).toLowerCase(),E={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(d){case"pt":b=1;break;case"mm":b=72/25.4;break;case"cm":b=72/2.54;break;case"in":b=72;break;case"px":b=.75;break;case"pc":case"em":b=12;break;case"ex":b=6;break;default:throw"Invalid unit: "+d}var C,R=0,O=0;if(E.hasOwnProperty(w))R=E[w][1]/b,O=E[w][0]/b;else try{R=m[1],O=m[0]}catch{throw new Error("Invalid format: "+m)}if(c==="p"||c==="portrait")c="p",O>R&&(C=O,O=R,R=C);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",R>O&&(C=O,O=R,R=C)}return{width:O,height:R,unit:d,k:b,orientation:c}},t.html=function(c,d){(d=d||{}).callback=d.callback||function(){},d.html2canvas=d.html2canvas||{},d.html2canvas.canvas=d.html2canvas.canvas||this.canvas,d.jsPDF=d.jsPDF||this,d.fontFaces=d.fontFaces?d.fontFaces.map(id):null;var m=new l(d);return d.worker?m:m.from(c).doCallback()}}(gn.API),gn.API.addJS=function(t){return N0=t,this.internal.events.subscribe("postPutResources",function(){Bc=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Bc+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),T0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+N0+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Bc!==void 0&&T0!==void 0&&this.internal.out("/Names <</JavaScript "+Bc+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=n.outline.render().split(/\r\n/),l=0;l<o.length;l++){var c=o[l],d=r.exec(c);if(d!=null){var m=d[1];n.internal.newObjectDeferredBegin(m,!1)}n.internal.write(c)}if(this.outline.createNamedDestinations){var y=this.internal.pages.length,b=[];for(l=0;l<y;l++){var w=n.internal.newObject();b.push(w);var E=n.internal.getPageInfo(l+1);n.internal.write("<< /D["+E.objId+" 0 R /XYZ null null null]>> endobj")}var C=n.internal.newObject();for(n.internal.write("<< /Names [ "),l=0;l<b.length;l++)n.internal.write("(page_"+(l+1)+")"+b[l]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+C+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,o,l){var c={title:o,options:l,children:[]};return r==null&&(r=this.root),r.children.push(c),c},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var o=0;o<r.children.length;o++)this.genIds_r(r.children[o])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,l=0;l<r.children.length;l++){var c=r.children[l];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(r)),l>0&&this.line("/Prev "+this.makeRef(r.children[l-1])),l<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[l+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var d=this.count=this.count_r({count:0},c);if(d>0&&this.line("/Count "+d),c.options&&c.options.pageNumber){var m=n.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+m.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var y=0;y<r.children.length;y++)this.renderItems(r.children[y])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,o){for(var l=0;l<o.children.length;l++)r.count++,this.count_r(r,o.children[l]);return r.count}}])}(gn.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,o,l,c,d){var m,y=this.decode.DCT_DECODE,b=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=c||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(m=function(w){for(var E,C=256*w.charCodeAt(4)+w.charCodeAt(5),R=w.length,O={width:0,height:0,numcomponents:1},q=4;q<R;q+=2){if(q+=C,e.indexOf(w.charCodeAt(q+1))!==-1){E=256*w.charCodeAt(q+5)+w.charCodeAt(q+6),O={width:256*w.charCodeAt(q+7)+w.charCodeAt(q+8),height:E,numcomponents:w.charCodeAt(q+9)};break}C=256*w.charCodeAt(q+2)+w.charCodeAt(q+3)}return O}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:d=this.color_spaces.DEVICE_GRAY;break;case 4:d=this.color_spaces.DEVICE_CMYK;break;case 3:d=this.color_spaces.DEVICE_RGB}b={data:n,width:m.width,height:m.height,colorSpace:d,bitsPerComponent:8,filter:y,index:r,alias:o}}return b}}(gn.API);var iu,Tc,D0,O0,I0,Ix=function(){var t,e,n;function r(l){var c,d,m,y,b,w,E,C,R,O,q,F,V,Y;for(this.data=l,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},w=null;;){switch(c=this.readUInt32(),R=(function(){var Ct,kt;for(kt=[],Ct=0;Ct<4;++Ct)kt.push(String.fromCharCode(this.data[this.pos++]));return kt}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(c);break;case"fcTL":w&&this.animation.frames.push(w),this.pos+=4,w={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},b=this.readUInt16(),y=this.readUInt16()||100,w.delay=1e3*b/y,w.disposeOp=this.data[this.pos++],w.blendOp=this.data[this.pos++],w.data=[];break;case"IDAT":case"fdAT":for(R==="fdAT"&&(this.pos+=4,c-=4),l=(w!=null?w.data:void 0)||this.imgData,F=0;0<=c?F<c:F>c;0<=c?++F:--F)l.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(m=this.palette.length/3,this.transparency.indexed=this.read(c),this.transparency.indexed.length>m)throw new Error("More transparent colors than palette size");if((O=m-this.transparency.indexed.length)>0)for(V=0;0<=O?V<O:V>O;0<=O?++V:--V)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(c)[0];break;case 2:this.transparency.rgb=this.read(c)}break;case"tEXt":E=(q=this.read(c)).indexOf(0),C=String.fromCharCode.apply(String,q.slice(0,E)),this.text[C]=String.fromCharCode.apply(String,q.slice(E+1));break;case"IEND":return w&&this.animation.frames.push(w),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(Y=this.colorType)===4||Y===6,d=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*d,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=c}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(l){var c,d;for(d=[],c=0;0<=l?c<l:c>l;0<=l?++c:--c)d.push(this.data[this.pos++]);return d},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(l){var c=this.pixelBitlength/8,d=new Uint8Array(this.width*this.height*c),m=0,y=this;if(l==null&&(l=this.imgData),l.length===0)return new Uint8Array(0);function b(w,E,C,R){var O,q,F,V,Y,Ct,kt,wt,et,ct,Bt,Yt,$,J,I,nt,K,tt,_t,G,j,X=Math.ceil((y.width-w)/C),Rt=Math.ceil((y.height-E)/R),D=y.width==X&&y.height==Rt;for(J=c*X,Yt=D?d:new Uint8Array(J*Rt),Ct=l.length,$=0,q=0;$<Rt&&m<Ct;){switch(l[m++]){case 0:for(V=K=0;K<J;V=K+=1)Yt[q++]=l[m++];break;case 1:for(V=tt=0;tt<J;V=tt+=1)O=l[m++],Y=V<c?0:Yt[q-c],Yt[q++]=(O+Y)%256;break;case 2:for(V=_t=0;_t<J;V=_t+=1)O=l[m++],F=(V-V%c)/c,I=$&&Yt[($-1)*J+F*c+V%c],Yt[q++]=(I+O)%256;break;case 3:for(V=G=0;G<J;V=G+=1)O=l[m++],F=(V-V%c)/c,Y=V<c?0:Yt[q-c],I=$&&Yt[($-1)*J+F*c+V%c],Yt[q++]=(O+Math.floor((Y+I)/2))%256;break;case 4:for(V=j=0;j<J;V=j+=1)O=l[m++],F=(V-V%c)/c,Y=V<c?0:Yt[q-c],$===0?I=nt=0:(I=Yt[($-1)*J+F*c+V%c],nt=F&&Yt[($-1)*J+(F-1)*c+V%c]),kt=Y+I-nt,wt=Math.abs(kt-Y),ct=Math.abs(kt-I),Bt=Math.abs(kt-nt),et=wt<=ct&&wt<=Bt?Y:ct<=Bt?I:nt,Yt[q++]=(O+et)%256;break;default:throw new Error("Invalid filter algorithm: "+l[m-1])}if(!D){var Z=((E+$*R)*y.width+w)*c,ut=$*J;for(V=0;V<X;V+=1){for(var vt=0;vt<c;vt+=1)d[Z++]=Yt[ut++];Z+=(C-1)*c}}$++}}return l=px(l),y.interlaceMethod==1?(b(0,0,8,8),b(4,0,8,8),b(0,4,4,8),b(2,0,4,4),b(0,2,2,4),b(1,0,2,2),b(0,1,1,2)):b(0,0,1,1),d},r.prototype.decodePalette=function(){var l,c,d,m,y,b,w,E,C;for(d=this.palette,b=this.transparency.indexed||[],y=new Uint8Array((b.length||0)+d.length),m=0,l=0,c=w=0,E=d.length;w<E;c=w+=3)y[m++]=d[c],y[m++]=d[c+1],y[m++]=d[c+2],y[m++]=(C=b[l++])!=null?C:255;return y},r.prototype.copyToImageData=function(l,c){var d,m,y,b,w,E,C,R,O,q,F;if(m=this.colors,O=null,d=this.hasAlphaChannel,this.palette.length&&(O=(F=this._decodedPalette)!=null?F:this._decodedPalette=this.decodePalette(),m=4,d=!0),R=(y=l.data||l).length,w=O||c,b=E=0,m===1)for(;b<R;)C=O?4*c[b/4]:E,q=w[C++],y[b++]=q,y[b++]=q,y[b++]=q,y[b++]=d?w[C++]:255,E=C;else for(;b<R;)C=O?4*c[b/4]:E,y[b++]=w[C++],y[b++]=w[C++],y[b++]=w[C++],y[b++]=d?w[C++]:255,E=C},r.prototype.decode=function(){var l;return l=new Uint8Array(this.width*this.height*4),this.copyToImageData(l,this.decodePixels()),l};var o=function(){if(Object.prototype.toString.call(vn)==="[object Window]"){try{e=vn.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return o(),t=function(l){var c;if(o()===!0)return n.width=l.width,n.height=l.height,n.clearRect(0,0,l.width,l.height),n.putImageData(l,0,0),(c=new Image).src=e.toDataURL(),c;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(l){var c,d,m,y,b,w,E,C;if(this.animation){for(C=[],d=b=0,w=(E=this.animation.frames).length;b<w;d=++b)c=E[d],m=l.createImageData(c.width,c.height),y=this.decodePixels(new Uint8Array(c.data)),this.copyToImageData(m,y),c.imageData=m,C.push(c.image=t(m));return C}},r.prototype.renderFrame=function(l,c){var d,m,y;return d=(m=this.animation.frames)[c],y=m[c-1],c===0&&l.clearRect(0,0,this.width,this.height),(y!=null?y.disposeOp:void 0)===1?l.clearRect(y.xOffset,y.yOffset,y.width,y.height):(y!=null?y.disposeOp:void 0)===2&&l.putImageData(y.imageData,y.xOffset,y.yOffset),d.blendOp===0&&l.clearRect(d.xOffset,d.yOffset,d.width,d.height),l.drawImage(d.image,d.xOffset,d.yOffset)},r.prototype.animate=function(l){var c,d,m,y,b,w,E=this;return d=0,w=this.animation,y=w.numFrames,m=w.frames,b=w.numPlays,(c=function(){var C,R;if(C=d++%y,R=m[C],E.renderFrame(l,C),y>1&&d/y<b)return E.animation._timeout=setTimeout(c,R.delay)})()},r.prototype.stopAnimation=function(){var l;return clearTimeout((l=this.animation)!=null?l._timeout:void 0)},r.prototype.render=function(l){var c,d;return l._png&&l._png.stopAnimation(),l._png=this,l.width=this.width,l.height=this.height,c=l.getContext("2d"),this.animation?(this.decodeFrames(c),this.animate(c)):(d=c.createImageData(this.width,this.height),this.copyToImageData(d,this.decodePixels()),c.putImageData(d,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Rx(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,o=t[e++],l=o>>7,c=1<<(7&o)+1;t[e++],t[e++];var d=null,m=null;l&&(d=e,m=c,e+=3*c);var y=!0,b=[],w=0,E=null,C=0,R=null;for(this.width=n,this.height=r;y&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,R=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!(($=t[e++])>=0))throw Error("Invalid block size");if($===0)break;e+=$}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var O=t[e++];w=t[e++]|t[e++]<<8,E=t[e++],!(1&O)&&(E=null),C=O>>2&7,e++;break;case 254:for(;;){if(!(($=t[e++])>=0))throw Error("Invalid block size");if($===0)break;e+=$}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var q=t[e++]|t[e++]<<8,F=t[e++]|t[e++]<<8,V=t[e++]|t[e++]<<8,Y=t[e++]|t[e++]<<8,Ct=t[e++],kt=Ct>>6&1,wt=1<<(7&Ct)+1,et=d,ct=m,Bt=!1;Ct>>7&&(Bt=!0,et=e,ct=wt,e+=3*wt);var Yt=e;for(e++;;){var $;if(!(($=t[e++])>=0))throw Error("Invalid block size");if($===0)break;e+=$}b.push({x:q,y:F,width:V,height:Y,has_local_palette:Bt,palette_offset:et,palette_size:ct,data_offset:Yt,data_length:e-Yt,transparent_index:E,interlaced:!!kt,delay:w,disposal:C});break;case 59:y=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return b.length},this.loopCount=function(){return R},this.frameInfo=function(J){if(J<0||J>=b.length)throw new Error("Frame index out of range.");return b[J]},this.decodeAndBlitFrameBGRA=function(J,I){var nt=this.frameInfo(J),K=nt.width*nt.height,tt=new Uint8Array(K);R0(t,nt.data_offset,tt,K);var _t=nt.palette_offset,G=nt.transparent_index;G===null&&(G=256);var j=nt.width,X=n-j,Rt=j,D=4*(nt.y*n+nt.x),Z=4*((nt.y+nt.height)*n+nt.x),ut=D,vt=4*X;nt.interlaced===!0&&(vt+=4*n*7);for(var xt=8,dt=0,St=tt.length;dt<St;++dt){var Mt=tt[dt];if(Rt===0&&(Rt=j,(ut+=vt)>=Z&&(vt=4*X+4*n*(xt-1),ut=D+(j+X)*(xt<<1),xt>>=1)),Mt===G)ut+=4;else{var Kt=t[_t+3*Mt],re=t[_t+3*Mt+1],it=t[_t+3*Mt+2];I[ut++]=it,I[ut++]=re,I[ut++]=Kt,I[ut++]=255}--Rt}},this.decodeAndBlitFrameRGBA=function(J,I){var nt=this.frameInfo(J),K=nt.width*nt.height,tt=new Uint8Array(K);R0(t,nt.data_offset,tt,K);var _t=nt.palette_offset,G=nt.transparent_index;G===null&&(G=256);var j=nt.width,X=n-j,Rt=j,D=4*(nt.y*n+nt.x),Z=4*((nt.y+nt.height)*n+nt.x),ut=D,vt=4*X;nt.interlaced===!0&&(vt+=4*n*7);for(var xt=8,dt=0,St=tt.length;dt<St;++dt){var Mt=tt[dt];if(Rt===0&&(Rt=j,(ut+=vt)>=Z&&(vt=4*X+4*n*(xt-1),ut=D+(j+X)*(xt<<1),xt>>=1)),Mt===G)ut+=4;else{var Kt=t[_t+3*Mt],re=t[_t+3*Mt+1],it=t[_t+3*Mt+2];I[ut++]=Kt,I[ut++]=re,I[ut++]=it,I[ut++]=255}--Rt}}}function R0(t,e,n,r){for(var o=t[e++],l=1<<o,c=l+1,d=c+1,m=o+1,y=(1<<m)-1,b=0,w=0,E=0,C=t[e++],R=new Int32Array(4096),O=null;;){for(;b<16&&C!==0;)w|=t[e++]<<b,b+=8,C===1?C=t[e++]:--C;if(b<m)break;var q=w&y;if(w>>=m,b-=m,q!==l){if(q===c)break;for(var F=q<d?q:O,V=0,Y=F;Y>l;)Y=R[Y]>>8,++V;var Ct=Y;if(E+V+(F!==q?1:0)>r)return void ai.log("Warning, gif stream longer than expected.");n[E++]=Ct;var kt=E+=V;for(F!==q&&(n[E++]=Ct),Y=F;V--;)Y=R[Y],n[--kt]=255&Y,Y>>=8;O!==null&&d<4096&&(R[d++]=O<<8|Ct,d>=y+1&&m<12&&(++m,y=y<<1|1)),O=q}else d=c+1,y=(1<<(m=o+1))-1,O=null}return E!==r&&ai.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function bf(t){var e,n,r,o,l,c=Math.floor,d=new Array(64),m=new Array(64),y=new Array(64),b=new Array(64),w=new Array(65535),E=new Array(65535),C=new Array(64),R=new Array(64),O=[],q=0,F=7,V=new Array(64),Y=new Array(64),Ct=new Array(64),kt=new Array(256),wt=new Array(2048),et=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ct=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Bt=[0,1,2,3,4,5,6,7,8,9,10,11],Yt=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],$=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],J=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],nt=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],K=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function tt(D,Z){for(var ut=0,vt=0,xt=new Array,dt=1;dt<=16;dt++){for(var St=1;St<=D[dt];St++)xt[Z[vt]]=[],xt[Z[vt]][0]=ut,xt[Z[vt]][1]=dt,vt++,ut++;ut*=2}return xt}function _t(D){for(var Z=D[0],ut=D[1]-1;ut>=0;)Z&1<<ut&&(q|=1<<F),ut--,--F<0&&(q==255?(G(255),G(0)):G(q),F=7,q=0)}function G(D){O.push(D)}function j(D){G(D>>8&255),G(255&D)}function X(D,Z,ut,vt,xt){for(var dt,St=xt[0],Mt=xt[240],Kt=function(Qt,oe){var Ot,Lt,ie,_e,Le,zt,De,Te,Ue,He,Ne=0;for(Ue=0;Ue<8;++Ue){Ot=Qt[Ne],Lt=Qt[Ne+1],ie=Qt[Ne+2],_e=Qt[Ne+3],Le=Qt[Ne+4],zt=Qt[Ne+5],De=Qt[Ne+6];var Sn=Ot+(Te=Qt[Ne+7]),en=Ot-Te,Jn=Lt+De,cn=Lt-De,Ln=ie+zt,Xn=ie-zt,qe=_e+Le,Pr=_e-Le,Rn=Sn+qe,Li=Sn-qe,Oi=Jn+Ln,qn=Jn-Ln;Qt[Ne]=Rn+Oi,Qt[Ne+4]=Rn-Oi;var hn=.707106781*(qn+Li);Qt[Ne+2]=Li+hn,Qt[Ne+6]=Li-hn;var Je=.382683433*((Rn=Pr+Xn)-(qn=cn+en)),Ye=.5411961*Rn+Je,ui=1.306562965*qn+Je,Sr=.707106781*(Oi=Xn+cn),Er=en+Sr,ln=en-Sr;Qt[Ne+5]=ln+Ye,Qt[Ne+3]=ln-Ye,Qt[Ne+1]=Er+ui,Qt[Ne+7]=Er-ui,Ne+=8}for(Ne=0,Ue=0;Ue<8;++Ue){Ot=Qt[Ne],Lt=Qt[Ne+8],ie=Qt[Ne+16],_e=Qt[Ne+24],Le=Qt[Ne+32],zt=Qt[Ne+40],De=Qt[Ne+48];var Jr=Ot+(Te=Qt[Ne+56]),hs=Ot-Te,ar=Lt+De,$n=Lt-De,$e=ie+zt,lr=ie-zt,go=_e+Le,Xr=_e-Le,Mr=Jr+go,vr=Jr-go,Ar=ar+$e,Xi=ar-$e;Qt[Ne]=Mr+Ar,Qt[Ne+32]=Mr-Ar;var yr=.707106781*(Xi+vr);Qt[Ne+16]=vr+yr,Qt[Ne+48]=vr-yr;var fs=.382683433*((Mr=Xr+lr)-(Xi=$n+hs)),_o=.5411961*Mr+fs,Uo=1.306562965*Xi+fs,qo=.707106781*(Ar=lr+$n),As=hs+qo,Ws=hs-qo;Qt[Ne+40]=Ws+_o,Qt[Ne+24]=Ws-_o,Qt[Ne+8]=As+Uo,Qt[Ne+56]=As-Uo,Ne++}for(Ue=0;Ue<64;++Ue)He=Qt[Ue]*oe[Ue],C[Ue]=He>0?He+.5|0:He-.5|0;return C}(D,Z),re=0;re<64;++re)R[et[re]]=Kt[re];var it=R[0]-ut;ut=R[0],it==0?_t(vt[0]):(_t(vt[E[dt=32767+it]]),_t(w[dt]));for(var ht=63;ht>0&&R[ht]==0;)ht--;if(ht==0)return _t(St),ut;for(var It,Dt=1;Dt<=ht;){for(var lt=Dt;R[Dt]==0&&Dt<=ht;)++Dt;var Gt=Dt-lt;if(Gt>=16){It=Gt>>4;for(var se=1;se<=It;++se)_t(Mt);Gt&=15}dt=32767+R[Dt],_t(xt[(Gt<<4)+E[dt]]),_t(w[dt]),Dt++}return ht!=63&&_t(St),ut}function Rt(D){D=Math.min(Math.max(D,1),100),l!=D&&(function(Z){for(var ut=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],vt=0;vt<64;vt++){var xt=c((ut[vt]*Z+50)/100);xt=Math.min(Math.max(xt,1),255),d[et[vt]]=xt}for(var dt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],St=0;St<64;St++){var Mt=c((dt[St]*Z+50)/100);Mt=Math.min(Math.max(Mt,1),255),m[et[St]]=Mt}for(var Kt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],re=0,it=0;it<8;it++)for(var ht=0;ht<8;ht++)y[re]=1/(d[et[re]]*Kt[it]*Kt[ht]*8),b[re]=1/(m[et[re]]*Kt[it]*Kt[ht]*8),re++}(D<50?Math.floor(5e3/D):Math.floor(200-2*D)),l=D)}this.encode=function(D,Z){Z&&Rt(Z),O=new Array,q=0,F=7,j(65496),j(65504),j(16),G(74),G(70),G(73),G(70),G(0),G(1),G(1),G(0),j(1),j(1),G(0),G(0),function(){j(65499),j(132),G(0);for(var Lt=0;Lt<64;Lt++)G(d[Lt]);G(1);for(var ie=0;ie<64;ie++)G(m[ie])}(),function(Lt,ie){j(65472),j(17),G(8),j(ie),j(Lt),G(3),G(1),G(17),G(0),G(2),G(17),G(1),G(3),G(17),G(1)}(D.width,D.height),function(){j(65476),j(418),G(0);for(var Lt=0;Lt<16;Lt++)G(ct[Lt+1]);for(var ie=0;ie<=11;ie++)G(Bt[ie]);G(16);for(var _e=0;_e<16;_e++)G(Yt[_e+1]);for(var Le=0;Le<=161;Le++)G($[Le]);G(1);for(var zt=0;zt<16;zt++)G(J[zt+1]);for(var De=0;De<=11;De++)G(I[De]);G(17);for(var Te=0;Te<16;Te++)G(nt[Te+1]);for(var Ue=0;Ue<=161;Ue++)G(K[Ue])}(),j(65498),j(12),G(3),G(1),G(0),G(2),G(17),G(3),G(17),G(0),G(63),G(0);var ut=0,vt=0,xt=0;q=0,F=7,this.encode.displayName="_encode_";for(var dt,St,Mt,Kt,re,it,ht,It,Dt,lt=D.data,Gt=D.width,se=D.height,Qt=4*Gt,oe=0;oe<se;){for(dt=0;dt<Qt;){for(re=Qt*oe+dt,ht=-1,It=0,Dt=0;Dt<64;Dt++)it=re+(It=Dt>>3)*Qt+(ht=4*(7&Dt)),oe+It>=se&&(it-=Qt*(oe+1+It-se)),dt+ht>=Qt&&(it-=dt+ht-Qt+4),St=lt[it++],Mt=lt[it++],Kt=lt[it++],V[Dt]=(wt[St]+wt[Mt+256>>0]+wt[Kt+512>>0]>>16)-128,Y[Dt]=(wt[St+768>>0]+wt[Mt+1024>>0]+wt[Kt+1280>>0]>>16)-128,Ct[Dt]=(wt[St+1280>>0]+wt[Mt+1536>>0]+wt[Kt+1792>>0]>>16)-128;ut=X(V,y,ut,e,r),vt=X(Y,b,vt,n,o),xt=X(Ct,b,xt,n,o),dt+=32}oe+=8}if(F>=0){var Ot=[];Ot[1]=F+1,Ot[0]=(1<<F+1)-1,_t(Ot)}return j(65497),new Uint8Array(O)},t=t||50,function(){for(var D=String.fromCharCode,Z=0;Z<256;Z++)kt[Z]=D(Z)}(),e=tt(ct,Bt),n=tt(J,I),r=tt(Yt,$),o=tt(nt,K),function(){for(var D=1,Z=2,ut=1;ut<=15;ut++){for(var vt=D;vt<Z;vt++)E[32767+vt]=ut,w[32767+vt]=[],w[32767+vt][1]=ut,w[32767+vt][0]=vt;for(var xt=-(Z-1);xt<=-D;xt++)E[32767+xt]=ut,w[32767+xt]=[],w[32767+xt][1]=ut,w[32767+xt][0]=Z-1+xt;D<<=1,Z<<=1}}(),function(){for(var D=0;D<256;D++)wt[D]=19595*D,wt[D+256>>0]=38470*D,wt[D+512>>0]=7471*D+32768,wt[D+768>>0]=-11059*D,wt[D+1024>>0]=-21709*D,wt[D+1280>>0]=32768*D+8421375,wt[D+1536>>0]=-27439*D,wt[D+1792>>0]=-5329*D}(),Rt(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Do(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function F0(t){function e(ct){if(!ct)throw Error("assert :P")}function n(ct,Bt,Yt){for(var $=0;4>$;$++)if(ct[Bt+$]!=Yt.charCodeAt($))return!0;return!1}function r(ct,Bt,Yt,$,J){for(var I=0;I<J;I++)ct[Bt+I]=Yt[$+I]}function o(ct,Bt,Yt,$){for(var J=0;J<$;J++)ct[Bt+J]=Yt}function l(ct){return new Int32Array(ct)}function c(ct,Bt){for(var Yt=[],$=0;$<ct;$++)Yt.push(new Bt);return Yt}function d(ct,Bt){var Yt=[];return function $(J,I,nt){for(var K=nt[I],tt=0;tt<K&&(J.push(nt.length>I+1?[]:new Bt),!(nt.length<I+1));tt++)$(J[tt],I+1,nt)}(Yt,0,ct),Yt}var m=function(){var ct=this;function Bt(f,v){for(var S=1<<v-1>>>0;f&S;)S>>>=1;return S?(f&S-1)+S:f}function Yt(f,v,S,T,W){e(!(T%S));do f[v+(T-=S)]=W;while(0<T)}function $(f,v,S,T,W){if(e(2328>=W),512>=W)var st=l(512);else if((st=l(W))==null)return 0;return function(at,ft,pt,Pt,Vt,pe){var me,ee,xe=ft,be=1<<pt,Zt=l(16),Xt=l(16);for(e(Vt!=0),e(Pt!=null),e(at!=null),e(0<pt),ee=0;ee<Vt;++ee){if(15<Pt[ee])return 0;++Zt[Pt[ee]]}if(Zt[0]==Vt)return 0;for(Xt[1]=0,me=1;15>me;++me){if(Zt[me]>1<<me)return 0;Xt[me+1]=Xt[me]+Zt[me]}for(ee=0;ee<Vt;++ee)me=Pt[ee],0<Pt[ee]&&(pe[Xt[me]++]=ee);if(Xt[15]==1)return(Pt=new J).g=0,Pt.value=pe[0],Yt(at,xe,1,be,Pt),be;var ke,Ae=-1,Se=be-1,Ke=0,je=1,un=1,s=1<<pt;for(ee=0,me=1,Vt=2;me<=pt;++me,Vt<<=1){if(je+=un<<=1,0>(un-=Zt[me]))return 0;for(;0<Zt[me];--Zt[me])(Pt=new J).g=me,Pt.value=pe[ee++],Yt(at,xe+Ke,Vt,s,Pt),Ke=Bt(Ke,me)}for(me=pt+1,Vt=2;15>=me;++me,Vt<<=1){if(je+=un<<=1,0>(un-=Zt[me]))return 0;for(;0<Zt[me];--Zt[me]){if(Pt=new J,(Ke&Se)!=Ae){for(xe+=s,ke=1<<(Ae=me)-pt;15>Ae&&!(0>=(ke-=Zt[Ae]));)++Ae,ke<<=1;be+=s=1<<(ke=Ae-pt),at[ft+(Ae=Ke&Se)].g=ke+pt,at[ft+Ae].value=xe-ft-Ae}Pt.g=me-pt,Pt.value=pe[ee++],Yt(at,xe+(Ke>>pt),Vt,s,Pt),Ke=Bt(Ke,me)}}return je!=2*Xt[15]-1?0:be}(f,v,S,T,W,st)}function J(){this.value=this.g=0}function I(){this.value=this.g=0}function nt(){this.G=c(5,J),this.H=l(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(xi,I)}function K(f,v,S,T){e(f!=null),e(v!=null),e(2147483648>T),f.Ca=254,f.I=0,f.b=-8,f.Ka=0,f.oa=v,f.pa=S,f.Jd=v,f.Yc=S+T,f.Zc=4<=T?S+T-4+1:S,dt(f)}function tt(f,v){for(var S=0;0<v--;)S|=Mt(f,128)<<v;return S}function _t(f,v){var S=tt(f,v);return St(f)?-S:S}function G(f,v,S,T){var W,st=0;for(e(f!=null),e(v!=null),e(4294967288>T),f.Sb=T,f.Ra=0,f.u=0,f.h=0,4<T&&(T=4),W=0;W<T;++W)st+=v[S+W]<<8*W;f.Ra=st,f.bb=T,f.oa=v,f.pa=S}function j(f){for(;8<=f.u&&f.bb<f.Sb;)f.Ra>>>=8,f.Ra+=f.oa[f.pa+f.bb]<<nr-8>>>0,++f.bb,f.u-=8;ut(f)&&(f.h=1,f.u=0)}function X(f,v){if(e(0<=v),!f.h&&v<=cr){var S=Z(f)&ta[v];return f.u+=v,j(f),S}return f.h=1,f.u=0}function Rt(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function D(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Z(f){return f.Ra>>>(f.u&nr-1)>>>0}function ut(f){return e(f.bb<=f.Sb),f.h||f.bb==f.Sb&&f.u>nr}function vt(f,v){f.u=v,f.h=ut(f)}function xt(f){f.u>=ea&&(e(f.u>=ea),j(f))}function dt(f){e(f!=null&&f.oa!=null),f.pa<f.Zc?(f.I=(f.oa[f.pa++]|f.I<<8)>>>0,f.b+=8):(e(f!=null&&f.oa!=null),f.pa<f.Yc?(f.b+=8,f.I=f.oa[f.pa++]|f.I<<8):f.Ka?f.b=0:(f.I<<=8,f.b+=8,f.Ka=1))}function St(f){return tt(f,1)}function Mt(f,v){var S=f.Ca;0>f.b&&dt(f);var T=f.b,W=S*v>>>8,st=(f.I>>>T>W)+0;for(st?(S-=W,f.I-=W+1<<T>>>0):S=W+1,T=S,W=0;256<=T;)W+=8,T>>=8;return T=7^W+Vi[T],f.b-=T,f.Ca=(S<<T)-1,st}function Kt(f,v,S){f[v+0]=S>>24&255,f[v+1]=S>>16&255,f[v+2]=S>>8&255,f[v+3]=S>>0&255}function re(f,v){return f[v+0]<<0|f[v+1]<<8}function it(f,v){return re(f,v)|f[v+2]<<16}function ht(f,v){return re(f,v)|re(f,v+2)<<16}function It(f,v){var S=1<<v;return e(f!=null),e(0<v),f.X=l(S),f.X==null?0:(f.Mb=32-v,f.Xa=v,1)}function Dt(f,v){e(f!=null),e(v!=null),e(f.Xa==v.Xa),r(v.X,0,f.X,0,1<<v.Xa)}function lt(){this.X=[],this.Xa=this.Mb=0}function Gt(f,v,S,T){e(S!=null),e(T!=null);var W=S[0],st=T[0];return W==0&&(W=(f*st+v/2)/v),st==0&&(st=(v*W+f/2)/f),0>=W||0>=st?0:(S[0]=W,T[0]=st,1)}function se(f,v){return f+(1<<v)-1>>>v}function Qt(f,v){return((4278255360&f)+(4278255360&v)>>>0&4278255360)+((16711935&f)+(16711935&v)>>>0&16711935)>>>0}function oe(f,v){ct[v]=function(S,T,W,st,at,ft,pt){var Pt;for(Pt=0;Pt<at;++Pt){var Vt=ct[f](ft[pt+Pt-1],W,st+Pt);ft[pt+Pt]=Qt(S[T+Pt],Vt)}}}function Ot(){this.ud=this.hd=this.jd=0}function Lt(f,v){return((4278124286&(f^v))>>>1)+(f&v)>>>0}function ie(f){return 0<=f&&256>f?f:0>f?0:255<f?255:void 0}function _e(f,v){return ie(f+(f-v+.5>>1))}function Le(f,v,S){return Math.abs(v-S)-Math.abs(f-S)}function zt(f,v,S,T,W,st,at){for(T=st[at-1],S=0;S<W;++S)st[at+S]=T=Qt(f[v+S],T)}function De(f,v,S,T,W){var st;for(st=0;st<S;++st){var at=f[v+st],ft=at>>8&255,pt=16711935&(pt=(pt=16711935&at)+((ft<<16)+ft));T[W+st]=(4278255360&at)+pt>>>0}}function Te(f,v){v.jd=f>>0&255,v.hd=f>>8&255,v.ud=f>>16&255}function Ue(f,v,S,T,W,st){var at;for(at=0;at<T;++at){var ft=v[S+at],pt=ft>>>8,Pt=ft,Vt=255&(Vt=(Vt=ft>>>16)+((f.jd<<24>>24)*(pt<<24>>24)>>>5));Pt=255&(Pt=(Pt=Pt+((f.hd<<24>>24)*(pt<<24>>24)>>>5))+((f.ud<<24>>24)*(Vt<<24>>24)>>>5)),W[st+at]=(4278255360&ft)+(Vt<<16)+Pt}}function He(f,v,S,T,W){ct[v]=function(st,at,ft,pt,Pt,Vt,pe,me,ee){for(pt=pe;pt<me;++pt)for(pe=0;pe<ee;++pe)Pt[Vt++]=W(ft[T(st[at++])])},ct[f]=function(st,at,ft,pt,Pt,Vt,pe){var me=8>>st.b,ee=st.Ea,xe=st.K[0],be=st.w;if(8>me)for(st=(1<<st.b)-1,be=(1<<me)-1;at<ft;++at){var Zt,Xt=0;for(Zt=0;Zt<ee;++Zt)Zt&st||(Xt=T(pt[Pt++])),Vt[pe++]=W(xe[Xt&be]),Xt>>=me}else ct["VP8LMapColor"+S](pt,Pt,xe,be,Vt,pe,at,ft,ee)}}function Ne(f,v,S,T,W){for(S=v+S;v<S;){var st=f[v++];T[W++]=st>>16&255,T[W++]=st>>8&255,T[W++]=st>>0&255}}function Sn(f,v,S,T,W){for(S=v+S;v<S;){var st=f[v++];T[W++]=st>>16&255,T[W++]=st>>8&255,T[W++]=st>>0&255,T[W++]=st>>24&255}}function en(f,v,S,T,W){for(S=v+S;v<S;){var st=(at=f[v++])>>16&240|at>>12&15,at=at>>0&240|at>>28&15;T[W++]=st,T[W++]=at}}function Jn(f,v,S,T,W){for(S=v+S;v<S;){var st=(at=f[v++])>>16&248|at>>13&7,at=at>>5&224|at>>3&31;T[W++]=st,T[W++]=at}}function cn(f,v,S,T,W){for(S=v+S;v<S;){var st=f[v++];T[W++]=st>>0&255,T[W++]=st>>8&255,T[W++]=st>>16&255}}function Ln(f,v,S,T,W,st){if(st==0)for(S=v+S;v<S;)Kt(T,((st=f[v++])[0]>>24|st[1]>>8&65280|st[2]<<8&16711680|st[3]<<24)>>>0),W+=32;else r(T,W,f,v,S)}function Xn(f,v){ct[v][0]=ct[f+"0"],ct[v][1]=ct[f+"1"],ct[v][2]=ct[f+"2"],ct[v][3]=ct[f+"3"],ct[v][4]=ct[f+"4"],ct[v][5]=ct[f+"5"],ct[v][6]=ct[f+"6"],ct[v][7]=ct[f+"7"],ct[v][8]=ct[f+"8"],ct[v][9]=ct[f+"9"],ct[v][10]=ct[f+"10"],ct[v][11]=ct[f+"11"],ct[v][12]=ct[f+"12"],ct[v][13]=ct[f+"13"],ct[v][14]=ct[f+"0"],ct[v][15]=ct[f+"0"]}function qe(f){return f==rr||f==sr||f==xs||f==i}function Pr(){this.eb=[],this.size=this.A=this.fb=0}function Rn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Li(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Pr,this.f.kb=new Rn,this.sd=null}function Oi(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function qn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function hn(f){return alert("todo:WebPSamplerProcessPlane"),f.T}function Je(f,v){var S=f.T,T=v.ba.f.RGBA,W=T.eb,st=T.fb+f.ka*T.A,at=Ki[v.ba.S],ft=f.y,pt=f.O,Pt=f.f,Vt=f.N,pe=f.ea,me=f.W,ee=v.cc,xe=v.dc,be=v.Mc,Zt=v.Nc,Xt=f.ka,ke=f.ka+f.T,Ae=f.U,Se=Ae+1>>1;for(Xt==0?at(ft,pt,null,null,Pt,Vt,pe,me,Pt,Vt,pe,me,W,st,null,null,Ae):(at(v.ec,v.fc,ft,pt,ee,xe,be,Zt,Pt,Vt,pe,me,W,st-T.A,W,st,Ae),++S);Xt+2<ke;Xt+=2)ee=Pt,xe=Vt,be=pe,Zt=me,Vt+=f.Rc,me+=f.Rc,st+=2*T.A,at(ft,(pt+=2*f.fa)-f.fa,ft,pt,ee,xe,be,Zt,Pt,Vt,pe,me,W,st-T.A,W,st,Ae);return pt+=f.fa,f.j+ke<f.o?(r(v.ec,v.fc,ft,pt,Ae),r(v.cc,v.dc,Pt,Vt,Se),r(v.Mc,v.Nc,pe,me,Se),S--):1&ke||at(ft,pt,null,null,Pt,Vt,pe,me,Pt,Vt,pe,me,W,st+T.A,null,null,Ae),S}function Ye(f,v,S){var T=f.F,W=[f.J];if(T!=null){var st=f.U,at=v.ba.S,ft=at==jr||at==xs;v=v.ba.f.RGBA;var pt=[0],Pt=f.ka;pt[0]=f.T,f.Kb&&(Pt==0?--pt[0]:(--Pt,W[0]-=f.width),f.j+f.ka+f.T==f.o&&(pt[0]=f.o-f.j-Pt));var Vt=v.eb;Pt=v.fb+Pt*v.A,f=Vn(T,W[0],f.width,st,pt,Vt,Pt+(ft?0:3),v.A),e(S==pt),f&&qe(at)&&Fi(Vt,Pt,ft,st,pt,v.A)}return 0}function ui(f){var v=f.ma,S=v.ba.S,T=11>S,W=S==fn||S==Bo||S==jr||S==Zi||S==12||qe(S);if(v.memory=null,v.Ib=null,v.Jb=null,v.Nd=null,!ka(v.Oa,f,W?11:12))return 0;if(W&&qe(S)&&Be(),f.da)alert("todo:use_scaling");else{if(T){if(v.Ib=hn,f.Kb){if(S=f.U+1>>1,v.memory=l(f.U+2*S),v.memory==null)return 0;v.ec=v.memory,v.fc=0,v.cc=v.ec,v.dc=v.fc+f.U,v.Mc=v.cc,v.Nc=v.dc+S,v.Ib=Je,Be()}}else alert("todo:EmitYUV");W&&(v.Jb=Ye,T&&ne())}if(T&&!Ja){for(f=0;256>f;++f)Kl[f]=89858*(f-128)+Ll>>Zl,Yl[f]=-22014*(f-128)+Ll,Rh[f]=-45773*(f-128),Ih[f]=113618*(f-128)+Ll>>Zl;for(f=Cl;f<Pu;++f)v=76283*(f-16)+Ll>>Zl,Jl[f-Cl]=Qn(v,255),pc[f-Cl]=Qn(v+8>>4,15);Ja=1}return 1}function Sr(f){var v=f.ma,S=f.U,T=f.T;return e(!(1&f.ka)),0>=S||0>=T?0:(S=v.Ib(f,v),v.Jb!=null&&v.Jb(f,v,S),v.Dc+=S,1)}function Er(f){f.ma.memory=null}function ln(f,v,S,T){return X(f,8)!=47?0:(v[0]=X(f,14)+1,S[0]=X(f,14)+1,T[0]=X(f,1),X(f,3)!=0?0:!f.h)}function Jr(f,v){if(4>f)return f+1;var S=f-2>>1;return(2+(1&f)<<S)+X(v,S)+1}function hs(f,v){return 120<v?v-120:1<=(S=((S=jt[v-1])>>4)*f+(8-(15&S)))?S:1;var S}function ar(f,v,S){var T=Z(S),W=f[v+=255&T].g-8;return 0<W&&(vt(S,S.u+8),T=Z(S),v+=f[v].value,v+=T&(1<<W)-1),vt(S,S.u+f[v].g),f[v].value}function $n(f,v,S){return S.g+=f.g,S.value+=f.value<<v>>>0,e(8>=S.g),f.g}function $e(f,v,S){var T=f.xc;return e((v=T==0?0:f.vc[f.md*(S>>T)+(v>>T)])<f.Wb),f.Ya[v]}function lr(f,v,S,T){var W=f.ab,st=f.c*v,at=f.C;v=at+v;var ft=S,pt=T;for(T=f.Ta,S=f.Ua;0<W--;){var Pt=f.gc[W],Vt=at,pe=v,me=ft,ee=pt,xe=(pt=T,ft=S,Pt.Ea);switch(e(Vt<pe),e(pe<=Pt.nc),Pt.hc){case 2:Wa(me,ee,(pe-Vt)*xe,pt,ft);break;case 0:var be=Vt,Zt=pe,Xt=pt,ke=ft,Ae=(s=Pt).Ea;be==0&&(Fs(me,ee,null,null,1,Xt,ke),zt(me,ee+1,0,0,Ae-1,Xt,ke+1),ee+=Ae,ke+=Ae,++be);for(var Se=1<<s.b,Ke=Se-1,je=se(Ae,s.b),un=s.K,s=s.w+(be>>s.b)*je;be<Zt;){var a=un,h=s,p=1;for(Lr(me,ee,Xt,ke-Ae,1,Xt,ke);p<Ae;){var _=(p&~Ke)+Se;_>Ae&&(_=Ae),(0,js[a[h++]>>8&15])(me,ee+ +p,Xt,ke+p-Ae,_-p,Xt,ke+p),p=_}ee+=Ae,ke+=Ae,++be&Ke||(s+=je)}pe!=Pt.nc&&r(pt,ft-xe,pt,ft+(pe-Vt-1)*xe,xe);break;case 1:for(xe=me,Zt=ee,Ae=(me=Pt.Ea)-(ke=me&~(Xt=(ee=1<<Pt.b)-1)),be=se(me,Pt.b),Se=Pt.K,Pt=Pt.w+(Vt>>Pt.b)*be;Vt<pe;){for(Ke=Se,je=Pt,un=new Ot,s=Zt+ke,a=Zt+me;Zt<s;)Te(Ke[je++],un),vs(un,xe,Zt,ee,pt,ft),Zt+=ee,ft+=ee;Zt<a&&(Te(Ke[je++],un),vs(un,xe,Zt,Ae,pt,ft),Zt+=Ae,ft+=Ae),++Vt&Xt||(Pt+=be)}break;case 3:if(me==pt&&ee==ft&&0<Pt.b){for(Zt=pt,me=xe=ft+(pe-Vt)*xe-(ke=(pe-Vt)*se(Pt.Ea,Pt.b)),ee=pt,Xt=ft,be=[],ke=(Ae=ke)-1;0<=ke;--ke)be[ke]=ee[Xt+ke];for(ke=Ae-1;0<=ke;--ke)Zt[me+ke]=be[ke];Si(Pt,Vt,pe,pt,xe,pt,ft)}else Si(Pt,Vt,pe,me,ee,pt,ft)}ft=T,pt=S}pt!=S&&r(T,S,ft,pt,st)}function go(f,v){var S=f.V,T=f.Ba+f.c*f.C,W=v-f.C;if(e(v<=f.l.o),e(16>=W),0<W){var st=f.l,at=f.Ta,ft=f.Ua,pt=st.width;if(lr(f,W,S,T),W=ft=[ft],e((S=f.C)<(T=v)),e(st.v<st.va),T>st.o&&(T=st.o),S<st.j){var Pt=st.j-S;S=st.j,W[0]+=Pt*pt}if(S>=T?S=0:(W[0]+=4*st.v,st.ka=S-st.j,st.U=st.va-st.v,st.T=T-S,S=1),S){if(ft=ft[0],11>(S=f.ca).S){var Vt=S.f.RGBA,pe=(T=S.S,W=st.U,st=st.T,Pt=Vt.eb,Vt.A),me=st;for(Vt=Vt.fb+f.Ma*Vt.A;0<me--;){var ee=at,xe=ft,be=W,Zt=Pt,Xt=Vt;switch(T){case pr:Ri(ee,xe,be,Zt,Xt);break;case fn:Ti(ee,xe,be,Zt,Xt);break;case rr:Ti(ee,xe,be,Zt,Xt),Fi(Zt,Xt,0,be,1,0);break;case Ka:Ir(ee,xe,be,Zt,Xt);break;case Bo:Ln(ee,xe,be,Zt,Xt,1);break;case sr:Ln(ee,xe,be,Zt,Xt,1),Fi(Zt,Xt,0,be,1,0);break;case jr:Ln(ee,xe,be,Zt,Xt,0);break;case xs:Ln(ee,xe,be,Zt,Xt,0),Fi(Zt,Xt,1,be,1,0);break;case Zi:es(ee,xe,be,Zt,Xt);break;case i:es(ee,xe,be,Zt,Xt),Zn(Zt,Xt,be,1,0);break;case bl:hr(ee,xe,be,Zt,Xt);break;default:e(0)}ft+=pt,Vt+=pe}f.Ma+=st}else alert("todo:EmitRescaledRowsYUVA");e(f.Ma<=S.height)}}f.C=v,e(f.C<=f.i)}function Xr(f){var v;if(0<f.ua)return 0;for(v=0;v<f.Wb;++v){var S=f.Ya[v].G,T=f.Ya[v].H;if(0<S[1][T[1]+0].g||0<S[2][T[2]+0].g||0<S[3][T[3]+0].g)return 0}return 1}function Mr(f,v,S,T,W,st){if(f.Z!=0){var at=f.qd,ft=f.rd;for(e(Kn[f.Z]!=null);v<S;++v)Kn[f.Z](at,ft,T,W,T,W,st),at=T,ft=W,W+=st;f.qd=at,f.rd=ft}}function vr(f,v){var S=f.l.ma,T=S.Z==0||S.Z==1?f.l.j:f.C;if(T=f.C<T?T:f.C,e(v<=f.l.o),v>T){var W=f.l.width,st=S.ca,at=S.tb+W*T,ft=f.V,pt=f.Ba+f.c*T,Pt=f.gc;e(f.ab==1),e(Pt[0].hc==3),Or(Pt[0],T,v,ft,pt,st,at),Mr(S,T,v,st,at,W)}f.C=f.Ma=v}function Ar(f,v,S,T,W,st,at){var ft=f.$/T,pt=f.$%T,Pt=f.m,Vt=f.s,pe=S+f.$,me=pe;W=S+T*W;var ee=S+T*st,xe=280+Vt.ua,be=f.Pb?ft:16777216,Zt=0<Vt.ua?Vt.Wa:null,Xt=Vt.wc,ke=pe<ee?$e(Vt,pt,ft):null;e(f.C<st),e(ee<=W);var Ae=!1;t:for(;;){for(;Ae||pe<ee;){var Se=0;if(ft>=be){var Ke=pe-S;e((be=f).Pb),be.wd=be.m,be.xd=Ke,0<be.s.ua&&Dt(be.s.Wa,be.s.vb),be=ft+ve}if(pt&Xt||(ke=$e(Vt,pt,ft)),e(ke!=null),ke.Qb&&(v[pe]=ke.qb,Ae=!0),!Ae)if(xt(Pt),ke.jc){Se=Pt,Ke=v;var je=pe,un=ke.pd[Z(Se)&xi-1];e(ke.jc),256>un.g?(vt(Se,Se.u+un.g),Ke[je]=un.value,Se=0):(vt(Se,Se.u+un.g-256),e(256<=un.value),Se=un.value),Se==0&&(Ae=!0)}else Se=ar(ke.G[0],ke.H[0],Pt);if(Pt.h)break;if(Ae||256>Se){if(!Ae)if(ke.nd)v[pe]=(ke.qb|Se<<8)>>>0;else{if(xt(Pt),Ae=ar(ke.G[1],ke.H[1],Pt),xt(Pt),Ke=ar(ke.G[2],ke.H[2],Pt),je=ar(ke.G[3],ke.H[3],Pt),Pt.h)break;v[pe]=(je<<24|Ae<<16|Se<<8|Ke)>>>0}if(Ae=!1,++pe,++pt>=T&&(pt=0,++ft,at!=null&&ft<=st&&!(ft%16)&&at(f,ft),Zt!=null))for(;me<pe;)Se=v[me++],Zt.X[(506832829*Se&4294967295)>>>Zt.Mb]=Se}else if(280>Se){if(Se=Jr(Se-256,Pt),Ke=ar(ke.G[4],ke.H[4],Pt),xt(Pt),Ke=hs(T,Ke=Jr(Ke,Pt)),Pt.h)break;if(pe-S<Ke||W-pe<Se)break t;for(je=0;je<Se;++je)v[pe+je]=v[pe+je-Ke];for(pe+=Se,pt+=Se;pt>=T;)pt-=T,++ft,at!=null&&ft<=st&&!(ft%16)&&at(f,ft);if(e(pe<=W),pt&Xt&&(ke=$e(Vt,pt,ft)),Zt!=null)for(;me<pe;)Se=v[me++],Zt.X[(506832829*Se&4294967295)>>>Zt.Mb]=Se}else{if(!(Se<xe))break t;for(Ae=Se-280,e(Zt!=null);me<pe;)Se=v[me++],Zt.X[(506832829*Se&4294967295)>>>Zt.Mb]=Se;Se=pe,e(!(Ae>>>(Ke=Zt).Xa)),v[Se]=Ke.X[Ae],Ae=!0}Ae||e(Pt.h==ut(Pt))}if(f.Pb&&Pt.h&&pe<W)e(f.m.h),f.a=5,f.m=f.wd,f.$=f.xd,0<f.s.ua&&Dt(f.s.vb,f.s.Wa);else{if(Pt.h)break t;at!=null&&at(f,ft>st?st:ft),f.a=0,f.$=pe-S}return 1}return f.a=3,0}function Xi(f){e(f!=null),f.vc=null,f.yc=null,f.Ya=null;var v=f.Wa;v!=null&&(v.X=null),f.vb=null,e(f!=null)}function yr(){var f=new La;return f==null?null:(f.a=0,f.xb=xl,Xn("Predictor","VP8LPredictors"),Xn("Predictor","VP8LPredictors_C"),Xn("PredictorAdd","VP8LPredictorsAdd"),Xn("PredictorAdd","VP8LPredictorsAdd_C"),Wa=De,vs=Ue,Ri=Ne,Ti=Sn,es=en,hr=Jn,Ir=cn,ct.VP8LMapColor32b=_s,ct.VP8LMapColor8b=Mo,f)}function fs(f,v,S,T,W){var st=1,at=[f],ft=[v],pt=T.m,Pt=T.s,Vt=null,pe=0;t:for(;;){if(S)for(;st&&X(pt,1);){var me=at,ee=ft,xe=T,be=1,Zt=xe.m,Xt=xe.gc[xe.ab],ke=X(Zt,2);if(xe.Oc&1<<ke)st=0;else{switch(xe.Oc|=1<<ke,Xt.hc=ke,Xt.Ea=me[0],Xt.nc=ee[0],Xt.K=[null],++xe.ab,e(4>=xe.ab),ke){case 0:case 1:Xt.b=X(Zt,3)+2,be=fs(se(Xt.Ea,Xt.b),se(Xt.nc,Xt.b),0,xe,Xt.K),Xt.K=Xt.K[0];break;case 3:var Ae,Se=X(Zt,8)+1,Ke=16<Se?0:4<Se?1:2<Se?2:3;if(me[0]=se(Xt.Ea,Ke),Xt.b=Ke,Ae=be=fs(Se,1,0,xe,Xt.K)){var je,un=Se,s=Xt,a=1<<(8>>s.b),h=l(a);if(h==null)Ae=0;else{var p=s.K[0],_=s.w;for(h[0]=s.K[0][0],je=1;je<1*un;++je)h[je]=Qt(p[_+je],h[je-1]);for(;je<4*a;++je)h[je]=0;s.K[0]=null,s.K[0]=h,Ae=1}}be=Ae;break;case 2:break;default:e(0)}st=be}}if(at=at[0],ft=ft[0],st&&X(pt,1)&&!(st=1<=(pe=X(pt,4))&&11>=pe)){T.a=3;break t}var k;if(k=st)e:{var M,B,z,Q=T,Nt=at,Et=ft,Jt=pe,he=S,Pe=Q.m,Oe=Q.s,Fe=[null],dn=1,Tt=0,Ft=ce[Jt];n:for(;;){if(he&&X(Pe,1)){var Ht=X(Pe,3)+2,ge=se(Nt,Ht),te=se(Et,Ht),de=ge*te;if(!fs(ge,te,0,Q,Fe))break n;for(Fe=Fe[0],Oe.xc=Ht,M=0;M<de;++M){var U=Fe[M]>>8&65535;Fe[M]=U,U>=dn&&(dn=U+1)}}if(Pe.h)break n;for(B=0;5>B;++B){var rt=P[B];!B&&0<Jt&&(rt+=1<<Jt),Tt<rt&&(Tt=rt)}var gt=c(dn*Ft,J),mt=dn,yt=c(mt,nt);if(yt==null)var bt=null;else e(65536>=mt),bt=yt;var $t=l(Tt);if(bt==null||$t==null||gt==null){Q.a=1;break n}var Ut=gt;for(M=z=0;M<dn;++M){var Wt=bt[M],le=Wt.G,ae=Wt.H,Ee=0,We=1,Qe=0;for(B=0;5>B;++B){rt=P[B],le[B]=Ut,ae[B]=z,!B&&0<Jt&&(rt+=1<<Jt);r:{var nn,Un=rt,Hn=Q,On=$t,ni=Ut,gr=z,Xa=0,lo=Hn.m,Su=X(lo,1);if(o(On,0,0,Un),Su){var uo=X(lo,1)+1,kl=X(lo,1),rs=X(lo,kl==0?1:8);On[rs]=1,uo==2&&(On[rs=X(lo,8)]=1);var Yi=1}else{var vi=l(19),Dd=X(lo,4)+4;if(19<Dd){Hn.a=3;var yc=0;break r}for(nn=0;nn<Dd;++nn)vi[ot[nn]]=X(lo,3);var Fh=void 0,Eu=void 0,Od=Hn,x1=vi,bc=Un,Id=On,jh=0,Qa=Od.m,Rd=8,Fd=c(128,J);i:for(;$(Fd,0,7,x1,19);){if(X(Qa,1)){var L1=2+2*X(Qa,3);if((Fh=2+X(Qa,L1))>bc)break i}else Fh=bc;for(Eu=0;Eu<bc&&Fh--;){xt(Qa);var jd=Fd[0+(127&Z(Qa))];vt(Qa,Qa.u+jd.g);var Ql=jd.value;if(16>Ql)Id[Eu++]=Ql,Ql!=0&&(Rd=Ql);else{var C1=Ql==16,zd=Ql-16,k1=g[zd],Ud=X(Qa,u[zd])+k1;if(Eu+Ud>bc)break i;for(var P1=C1?Rd:0;0<Ud--;)Id[Eu++]=P1}}jh=1;break i}jh||(Od.a=3),Yi=jh}(Yi=Yi&&!lo.h)&&(Xa=$(ni,gr,8,On,Un)),Yi&&Xa!=0?yc=Xa:(Hn.a=3,yc=0)}if(yc==0)break n;if(We&&N[B]==1&&(We=Ut[z].g==0),Ee+=Ut[z].g,z+=yc,3>=B){var Mu,zh=$t[0];for(Mu=1;Mu<rt;++Mu)$t[Mu]>zh&&(zh=$t[Mu]);Qe+=zh}}if(Wt.nd=We,Wt.Qb=0,We&&(Wt.qb=(le[3][ae[3]+0].value<<24|le[1][ae[1]+0].value<<16|le[2][ae[2]+0].value)>>>0,Ee==0&&256>le[0][ae[0]+0].value&&(Wt.Qb=1,Wt.qb+=le[0][ae[0]+0].value<<8)),Wt.jc=!Wt.Qb&&6>Qe,Wt.jc){var wc,Ea=Wt;for(wc=0;wc<xi;++wc){var tl=wc,el=Ea.pd[tl],xc=Ea.G[0][Ea.H[0]+tl];256<=xc.value?(el.g=xc.g+256,el.value=xc.value):(el.g=0,el.value=0,tl>>=$n(xc,8,el),tl>>=$n(Ea.G[1][Ea.H[1]+tl],16,el),tl>>=$n(Ea.G[2][Ea.H[2]+tl],0,el),$n(Ea.G[3][Ea.H[3]+tl],24,el))}}}Oe.vc=Fe,Oe.Wb=dn,Oe.Ya=bt,Oe.yc=gt,k=1;break e}k=0}if(!(st=k)){T.a=3;break t}if(0<pe){if(Pt.ua=1<<pe,!It(Pt.Wa,pe)){T.a=1,st=0;break t}}else Pt.ua=0;var Uh=T,qd=at,S1=ft,qh=Uh.s,$h=qh.xc;if(Uh.c=qd,Uh.i=S1,qh.md=se(qd,$h),qh.wc=$h==0?-1:(1<<$h)-1,S){T.xb=Cu;break t}if((Vt=l(at*ft))==null){T.a=1,st=0;break t}st=(st=Ar(T,Vt,0,at,ft,ft,null))&&!pt.h;break t}return st?(W!=null?W[0]=Vt:(e(Vt==null),e(S)),T.$=0,S||Xi(Pt)):Xi(Pt),st}function _o(f,v){var S=f.c*f.i,T=S+v+16*v;return e(f.c<=v),f.V=l(T),f.V==null?(f.Ta=null,f.Ua=0,f.a=1,0):(f.Ta=f.V,f.Ua=f.Ba+S+v,1)}function Uo(f,v){var S=f.C,T=v-S,W=f.V,st=f.Ba+f.c*S;for(e(v<=f.l.o);0<T;){var at=16<T?16:T,ft=f.l.ma,pt=f.l.width,Pt=pt*at,Vt=ft.ca,pe=ft.tb+pt*S,me=f.Ta,ee=f.Ua;lr(f,at,W,st),_i(me,ee,Vt,pe,Pt),Mr(ft,S,S+at,Vt,pe,pt),T-=at,W+=at*f.c,S+=at}e(S==v),f.C=f.Ma=v}function qo(){this.ub=this.yd=this.td=this.Rb=0}function As(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ws(){this.Fb=this.Bb=this.Cb=0,this.Zb=l(4),this.Lb=l(4)}function vo(){this.Yb=function(){var f=[];return function v(S,T,W){for(var st=W[T],at=0;at<st&&(S.push(W.length>T+1?[]:0),!(W.length<T+1));at++)v(S[at],T+1,W)}(f,0,[3,11]),f}()}function _l(){this.jb=l(3),this.Wc=d([4,8],vo),this.Xc=d([4,17],vo)}function vl(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new l(4),this.od=new l(4)}function $o(){this.ld=this.La=this.dd=this.tc=0}function za(){this.Na=this.la=0}function yl(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function yo(){this.ad=l(384),this.Za=0,this.Ob=l(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function bo(){this.uc=this.M=this.Nb=0,this.wa=Array(new $o),this.Y=0,this.ya=Array(new yo),this.aa=0,this.l=new br}function pa(){this.y=l(16),this.f=l(8),this.ea=l(8)}function Ua(){this.cb=this.a=0,this.sc="",this.m=new Rt,this.Od=new qo,this.Kc=new As,this.ed=new vl,this.Qa=new Ws,this.Ic=this.$c=this.Aa=0,this.D=new bo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,Rt),this.ia=0,this.pb=c(4,yl),this.Pa=new _l,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new pa),this.Hd=0,this.rb=Array(new za),this.sb=0,this.wa=Array(new $o),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new yo),this.L=this.aa=0,this.gd=d([4,2],$o),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function br(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function In(){var f=new Ua;return f!=null&&(f.a=0,f.sc="OK",f.cb=0,f.Xb=0,sn||(sn=ds)),f}function yn(f,v,S){return f.a==0&&(f.a=v,f.sc=S,f.cb=0),0}function Zs(f,v,S){return 3<=S&&f[v+0]==157&&f[v+1]==1&&f[v+2]==42}function Bs(f,v){if(f==null)return 0;if(f.a=0,f.sc="OK",v==null)return yn(f,2,"null VP8Io passed to VP8GetHeaders()");var S=v.data,T=v.w,W=v.ha;if(4>W)return yn(f,7,"Truncated header.");var st=S[T+0]|S[T+1]<<8|S[T+2]<<16,at=f.Od;if(at.Rb=!(1&st),at.td=st>>1&7,at.yd=st>>4&1,at.ub=st>>5,3<at.td)return yn(f,3,"Incorrect keyframe parameters.");if(!at.yd)return yn(f,4,"Frame not displayable.");T+=3,W-=3;var ft=f.Kc;if(at.Rb){if(7>W)return yn(f,7,"cannot parse picture header");if(!Zs(S,T,W))return yn(f,3,"Bad code word");ft.c=16383&(S[T+4]<<8|S[T+3]),ft.Td=S[T+4]>>6,ft.i=16383&(S[T+6]<<8|S[T+5]),ft.Ud=S[T+6]>>6,T+=7,W-=7,f.za=ft.c+15>>4,f.Ub=ft.i+15>>4,v.width=ft.c,v.height=ft.i,v.Da=0,v.j=0,v.v=0,v.va=v.width,v.o=v.height,v.da=0,v.ib=v.width,v.hb=v.height,v.U=v.width,v.T=v.height,o((st=f.Pa).jb,0,255,st.jb.length),e((st=f.Qa)!=null),st.Cb=0,st.Bb=0,st.Fb=1,o(st.Zb,0,0,st.Zb.length),o(st.Lb,0,0,st.Lb)}if(at.ub>W)return yn(f,7,"bad partition length");K(st=f.m,S,T,at.ub),T+=at.ub,W-=at.ub,at.Rb&&(ft.Ld=St(st),ft.Kd=St(st)),ft=f.Qa;var pt,Pt=f.Pa;if(e(st!=null),e(ft!=null),ft.Cb=St(st),ft.Cb){if(ft.Bb=St(st),St(st)){for(ft.Fb=St(st),pt=0;4>pt;++pt)ft.Zb[pt]=St(st)?_t(st,7):0;for(pt=0;4>pt;++pt)ft.Lb[pt]=St(st)?_t(st,6):0}if(ft.Bb)for(pt=0;3>pt;++pt)Pt.jb[pt]=St(st)?tt(st,8):255}else ft.Bb=0;if(st.Ka)return yn(f,3,"cannot parse segment header");if((ft=f.ed).zd=St(st),ft.Tb=tt(st,6),ft.wb=tt(st,3),ft.Pc=St(st),ft.Pc&&St(st)){for(Pt=0;4>Pt;++Pt)St(st)&&(ft.vd[Pt]=_t(st,6));for(Pt=0;4>Pt;++Pt)St(st)&&(ft.od[Pt]=_t(st,6))}if(f.L=ft.Tb==0?0:ft.zd?1:2,st.Ka)return yn(f,3,"cannot parse filter header");var Vt=W;if(W=pt=T,T=pt+Vt,ft=Vt,f.Xb=(1<<tt(f.m,2))-1,Vt<3*(Pt=f.Xb))S=7;else{for(pt+=3*Pt,ft-=3*Pt,Vt=0;Vt<Pt;++Vt){var pe=S[W+0]|S[W+1]<<8|S[W+2]<<16;pe>ft&&(pe=ft),K(f.Jc[+Vt],S,pt,pe),pt+=pe,ft-=pe,W+=3}K(f.Jc[+Pt],S,pt,ft),S=pt<T?0:5}if(S!=0)return yn(f,S,"cannot parse partitions");for(S=tt(pt=f.m,7),W=St(pt)?_t(pt,4):0,T=St(pt)?_t(pt,4):0,ft=St(pt)?_t(pt,4):0,Pt=St(pt)?_t(pt,4):0,pt=St(pt)?_t(pt,4):0,Vt=f.Qa,pe=0;4>pe;++pe){if(Vt.Cb){var me=Vt.Zb[pe];Vt.Fb||(me+=S)}else{if(0<pe){f.pb[pe]=f.pb[0];continue}me=S}var ee=f.pb[pe];ee.Sc[0]=Me[Qn(me+W,127)],ee.Sc[1]=Ve[Qn(me+0,127)],ee.Eb[0]=2*Me[Qn(me+T,127)],ee.Eb[1]=101581*Ve[Qn(me+ft,127)]>>16,8>ee.Eb[1]&&(ee.Eb[1]=8),ee.Qc[0]=Me[Qn(me+Pt,117)],ee.Qc[1]=Ve[Qn(me+pt,127)],ee.lc=me+pt}if(!at.Rb)return yn(f,4,"Not a key frame.");for(St(st),at=f.Pa,S=0;4>S;++S){for(W=0;8>W;++W)for(T=0;3>T;++T)for(ft=0;11>ft;++ft)Pt=Mt(st,Ls[S][W][T][ft])?tt(st,8):mr[S][W][T][ft],at.Wc[S][W].Yb[T][ft]=Pt;for(W=0;17>W;++W)at.Xc[S][W]=at.Wc[S][wl[W]]}return f.kc=St(st),f.kc&&(f.Bd=tt(st,8)),f.cb=1}function ds(f,v,S,T,W,st,at){var ft=v[W].Yb[S];for(S=0;16>W;++W){if(!Mt(f,ft[S+0]))return W;for(;!Mt(f,ft[S+1]);)if(ft=v[++W].Yb[0],S=0,W==16)return 16;var pt=v[W+1].Yb;if(Mt(f,ft[S+2])){var Pt=f,Vt=0;if(Mt(Pt,(me=ft)[(pe=S)+3]))if(Mt(Pt,me[pe+6])){for(ft=0,pe=2*(Vt=Mt(Pt,me[pe+8]))+(me=Mt(Pt,me[pe+9+Vt])),Vt=0,me=En[pe];me[ft];++ft)Vt+=Vt+Mt(Pt,me[ft]);Vt+=3+(8<<pe)}else Mt(Pt,me[pe+7])?(Vt=7+2*Mt(Pt,165),Vt+=Mt(Pt,145)):Vt=5+Mt(Pt,159);else Vt=Mt(Pt,me[pe+4])?3+Mt(Pt,me[pe+5]):2;ft=pt[2]}else Vt=1,ft=pt[1];pt=at+or[W],0>(Pt=f).b&&dt(Pt);var pe,me=Pt.b,ee=(pe=Pt.Ca>>1)-(Pt.I>>me)>>31;--Pt.b,Pt.Ca+=ee,Pt.Ca|=1,Pt.I-=(pe+1&ee)<<me,st[pt]=((Vt^ee)-ee)*T[(0<W)+0]}return 16}function wo(f){var v=f.rb[f.sb-1];v.la=0,v.Na=0,o(f.zc,0,0,f.zc.length),f.ja=0}function wn(f,v){if(f==null)return 0;if(v==null)return yn(f,2,"NULL VP8Io parameter in VP8Decode().");if(!f.cb&&!Bs(f,v))return 0;if(e(f.cb),v.ac==null||v.ac(v)){v.ob&&(f.L=0);var S=Xl[f.L];if(f.L==2?(f.yb=0,f.zb=0):(f.yb=v.v-S>>4,f.zb=v.j-S>>4,0>f.yb&&(f.yb=0),0>f.zb&&(f.zb=0)),f.Va=v.o+15+S>>4,f.Hb=v.va+15+S>>4,f.Hb>f.za&&(f.Hb=f.za),f.Va>f.Ub&&(f.Va=f.Ub),0<f.L){var T=f.ed;for(S=0;4>S;++S){var W;if(f.Qa.Cb){var st=f.Qa.Lb[S];f.Qa.Fb||(st+=T.Tb)}else st=T.Tb;for(W=0;1>=W;++W){var at=f.gd[S][W],ft=st;if(T.Pc&&(ft+=T.vd[0],W&&(ft+=T.od[0])),0<(ft=0>ft?0:63<ft?63:ft)){var pt=ft;0<T.wb&&(pt=4<T.wb?pt>>2:pt>>1)>9-T.wb&&(pt=9-T.wb),1>pt&&(pt=1),at.dd=pt,at.tc=2*ft+pt,at.ld=40<=ft?2:15<=ft?1:0}else at.tc=0;at.La=W}}}S=0}else yn(f,6,"Frame setup failed"),S=f.a;if(S=S==0){if(S){f.$c=0,0<f.Aa||(f.Ic=_c);t:{S=f.Ic,T=4*(pt=f.za);var Pt=32*pt,Vt=pt+1,pe=0<f.L?pt*(0<f.Aa?2:1):0,me=(f.Aa==2?2:1)*pt;if((at=T+832+(W=3*(16*S+Xl[f.L])/2*Pt)+(st=f.Fa!=null&&0<f.Fa.length?f.Kc.c*f.Kc.i:0))!=at)S=0;else{if(at>f.Vb){if(f.Vb=0,f.Ec=l(at),f.Fc=0,f.Ec==null){S=yn(f,1,"no memory during frame initialization.");break t}f.Vb=at}at=f.Ec,ft=f.Fc,f.Ac=at,f.Bc=ft,ft+=T,f.Gd=c(Pt,pa),f.Hd=0,f.rb=c(Vt+1,za),f.sb=1,f.wa=pe?c(pe,$o):null,f.Y=0,f.D.Nb=0,f.D.wa=f.wa,f.D.Y=f.Y,0<f.Aa&&(f.D.Y+=pt),e(!0),f.oc=at,f.pc=ft,ft+=832,f.ya=c(me,yo),f.aa=0,f.D.ya=f.ya,f.D.aa=f.aa,f.Aa==2&&(f.D.aa+=pt),f.R=16*pt,f.B=8*pt,pt=(Pt=Xl[f.L])*f.R,Pt=Pt/2*f.B,f.sa=at,f.ta=ft+pt,f.qa=f.sa,f.ra=f.ta+16*S*f.R+Pt,f.Ha=f.qa,f.Ia=f.ra+8*S*f.B+Pt,f.$c=0,ft+=W,f.mb=st?at:null,f.nb=st?ft:null,e(ft+st<=f.Fc+f.Vb),wo(f),o(f.Ac,f.Bc,0,T),S=1}}if(S){if(v.ka=0,v.y=f.sa,v.O=f.ta,v.f=f.qa,v.N=f.ra,v.ea=f.Ha,v.Vd=f.Ia,v.fa=f.R,v.Rc=f.B,v.F=null,v.J=0,!Za){for(S=-255;255>=S;++S)ti[255+S]=0>S?-S:S;for(S=-1020;1020>=S;++S)ns[1020+S]=-128>S?-128:127<S?127:S;for(S=-112;112>=S;++S)oo[112+S]=-16>S?-16:15<S?15:S;for(S=-255;510>=S;++S)ws[255+S]=0>S?0:255<S?255:S;Za=1}zs=xo,Rr=Go,ys=ps,ir=ci,Hi=ms,hi=qa,Ao=wa,Pa=gs,Sa=Nr,Wi=Jo,fr=Ko,io=Yo,bs=ki,na=Va,ro=ba,so=on,Us=Qi,Fr=Po,zr[0]=Dn,zr[1]=ma,zr[2]=bn,zr[3]=Br,zr[4]=_a,zr[5]=Xs,zr[6]=Wo,zr[7]=Tr,zr[8]=va,zr[9]=Ds,is[0]=Vo,is[1]=ga,is[2]=Qr,is[3]=Ns,is[4]=Ci,is[5]=$a,is[6]=Ho,Cr[0]=Os,Cr[1]=Ys,Cr[2]=Lo,Cr[3]=mi,Cr[4]=Co,Cr[5]=Ga,Cr[6]=Zo,S=1}else S=0}S&&(S=function(ee,xe){for(ee.M=0;ee.M<ee.Va;++ee.M){var be,Zt=ee.Jc[ee.M&ee.Xb],Xt=ee.m,ke=ee;for(be=0;be<ke.za;++be){var Ae=Xt,Se=ke,Ke=Se.Ac,je=Se.Bc+4*be,un=Se.zc,s=Se.ya[Se.aa+be];if(Se.Qa.Bb?s.$b=Mt(Ae,Se.Pa.jb[0])?2+Mt(Ae,Se.Pa.jb[2]):Mt(Ae,Se.Pa.jb[1]):s.$b=0,Se.kc&&(s.Ad=Mt(Ae,Se.Bd)),s.Za=!Mt(Ae,145)+0,s.Za){var a=s.Ob,h=0;for(Se=0;4>Se;++Se){var p,_=un[0+Se];for(p=0;4>p;++p){_=fi[Ke[je+p]][_];for(var k=Mi[Mt(Ae,_[0])];0<k;)k=Mi[2*k+Mt(Ae,_[k])];_=-k,Ke[je+p]=_}r(a,h,Ke,je,4),h+=4,un[0+Se]=_}}else _=Mt(Ae,156)?Mt(Ae,128)?1:3:Mt(Ae,163)?2:0,s.Ob[0]=_,o(Ke,je,_,4),o(un,0,_,4);s.Dd=Mt(Ae,142)?Mt(Ae,114)?Mt(Ae,183)?1:3:2:0}if(ke.m.Ka)return yn(ee,7,"Premature end-of-partition0 encountered.");for(;ee.ja<ee.za;++ee.ja){if(ke=Zt,Ae=(Xt=ee).rb[Xt.sb-1],Ke=Xt.rb[Xt.sb+Xt.ja],be=Xt.ya[Xt.aa+Xt.ja],je=Xt.kc?be.Ad:0)Ae.la=Ke.la=0,be.Za||(Ae.Na=Ke.Na=0),be.Hc=0,be.Gc=0,be.ia=0;else{var M,B;if(Ae=Ke,Ke=ke,je=Xt.Pa.Xc,un=Xt.ya[Xt.aa+Xt.ja],s=Xt.pb[un.$b],Se=un.ad,a=0,h=Xt.rb[Xt.sb-1],_=p=0,o(Se,a,0,384),un.Za)var z=0,Q=je[3];else{k=l(16);var Nt=Ae.Na+h.Na;if(Nt=sn(Ke,je[1],Nt,s.Eb,0,k,0),Ae.Na=h.Na=(0<Nt)+0,1<Nt)zs(k,0,Se,a);else{var Et=k[0]+3>>3;for(k=0;256>k;k+=16)Se[a+k]=Et}z=1,Q=je[0]}var Jt=15&Ae.la,he=15&h.la;for(k=0;4>k;++k){var Pe=1&he;for(Et=B=0;4>Et;++Et)Jt=Jt>>1|(Pe=(Nt=sn(Ke,Q,Nt=Pe+(1&Jt),s.Sc,z,Se,a))>z)<<7,B=B<<2|(3<Nt?3:1<Nt?2:Se[a+0]!=0),a+=16;Jt>>=4,he=he>>1|Pe<<7,p=(p<<8|B)>>>0}for(Q=Jt,z=he>>4,M=0;4>M;M+=2){for(B=0,Jt=Ae.la>>4+M,he=h.la>>4+M,k=0;2>k;++k){for(Pe=1&he,Et=0;2>Et;++Et)Nt=Pe+(1&Jt),Jt=Jt>>1|(Pe=0<(Nt=sn(Ke,je[2],Nt,s.Qc,0,Se,a)))<<3,B=B<<2|(3<Nt?3:1<Nt?2:Se[a+0]!=0),a+=16;Jt>>=2,he=he>>1|Pe<<5}_|=B<<4*M,Q|=Jt<<4<<M,z|=(240&he)<<M}Ae.la=Q,h.la=z,un.Hc=p,un.Gc=_,un.ia=43690&_?0:s.ia,je=!(p|_)}if(0<Xt.L&&(Xt.wa[Xt.Y+Xt.ja]=Xt.gd[be.$b][be.Za],Xt.wa[Xt.Y+Xt.ja].La|=!je),ke.Ka)return yn(ee,7,"Premature end-of-file encountered.")}if(wo(ee),Xt=xe,ke=1,be=(Zt=ee).D,Ae=0<Zt.L&&Zt.M>=Zt.zb&&Zt.M<=Zt.Va,Zt.Aa==0)t:{if(be.M=Zt.M,be.uc=Ae,Ca(Zt,be),ke=1,be=(B=Zt.D).Nb,Ae=(_=Xl[Zt.L])*Zt.R,Ke=_/2*Zt.B,k=16*be*Zt.R,Et=8*be*Zt.B,je=Zt.sa,un=Zt.ta-Ae+k,s=Zt.qa,Se=Zt.ra-Ke+Et,a=Zt.Ha,h=Zt.Ia-Ke+Et,he=(Jt=B.M)==0,p=Jt>=Zt.Va-1,Zt.Aa==2&&Ca(Zt,B),B.uc)for(Pe=(Nt=Zt).D.M,e(Nt.D.uc),B=Nt.yb;B<Nt.Hb;++B){z=B,Q=Pe;var Oe=(Fe=(rt=Nt).D).Nb;M=rt.R;var Fe=Fe.wa[Fe.Y+z],dn=rt.sa,Tt=rt.ta+16*Oe*M+16*z,Ft=Fe.dd,Ht=Fe.tc;if(Ht!=0)if(e(3<=Ht),rt.L==1)0<z&&so(dn,Tt,M,Ht+4),Fe.La&&Fr(dn,Tt,M,Ht),0<Q&&ro(dn,Tt,M,Ht+4),Fe.La&&Us(dn,Tt,M,Ht);else{var ge=rt.B,te=rt.qa,de=rt.ra+8*Oe*ge+8*z,U=rt.Ha,rt=rt.Ia+8*Oe*ge+8*z;Oe=Fe.ld,0<z&&(Pa(dn,Tt,M,Ht+4,Ft,Oe),Wi(te,de,U,rt,ge,Ht+4,Ft,Oe)),Fe.La&&(io(dn,Tt,M,Ht,Ft,Oe),na(te,de,U,rt,ge,Ht,Ft,Oe)),0<Q&&(Ao(dn,Tt,M,Ht+4,Ft,Oe),Sa(te,de,U,rt,ge,Ht+4,Ft,Oe)),Fe.La&&(fr(dn,Tt,M,Ht,Ft,Oe),bs(te,de,U,rt,ge,Ht,Ft,Oe))}}if(Zt.ia&&alert("todo:DitherRow"),Xt.put!=null){if(B=16*Jt,Jt=16*(Jt+1),he?(Xt.y=Zt.sa,Xt.O=Zt.ta+k,Xt.f=Zt.qa,Xt.N=Zt.ra+Et,Xt.ea=Zt.Ha,Xt.W=Zt.Ia+Et):(B-=_,Xt.y=je,Xt.O=un,Xt.f=s,Xt.N=Se,Xt.ea=a,Xt.W=h),p||(Jt-=_),Jt>Xt.o&&(Jt=Xt.o),Xt.F=null,Xt.J=null,Zt.Fa!=null&&0<Zt.Fa.length&&B<Jt&&(Xt.J=gi(Zt,Xt,B,Jt-B),Xt.F=Zt.mb,Xt.F==null&&Xt.F.length==0)){ke=yn(Zt,3,"Could not decode alpha data.");break t}B<Xt.j&&(_=Xt.j-B,B=Xt.j,e(!(1&_)),Xt.O+=Zt.R*_,Xt.N+=Zt.B*(_>>1),Xt.W+=Zt.B*(_>>1),Xt.F!=null&&(Xt.J+=Xt.width*_)),B<Jt&&(Xt.O+=Xt.v,Xt.N+=Xt.v>>1,Xt.W+=Xt.v>>1,Xt.F!=null&&(Xt.J+=Xt.v),Xt.ka=B-Xt.j,Xt.U=Xt.va-Xt.v,Xt.T=Jt-B,ke=Xt.put(Xt))}be+1!=Zt.Ic||p||(r(Zt.sa,Zt.ta-Ae,je,un+16*Zt.R,Ae),r(Zt.qa,Zt.ra-Ke,s,Se+8*Zt.B,Ke),r(Zt.Ha,Zt.Ia-Ke,a,h+8*Zt.B,Ke))}if(!ke)return yn(ee,6,"Output aborted.")}return 1}(f,v)),v.bc!=null&&v.bc(v),S&=1}return S?(f.cb=0,S):0}function zn(f,v,S,T,W){W=f[v+S+32*T]+(W>>3),f[v+S+32*T]=-256&W?0>W?0:255:W}function Ks(f,v,S,T,W,st){zn(f,v,0,S,T+W),zn(f,v,1,S,T+st),zn(f,v,2,S,T-st),zn(f,v,3,S,T-W)}function Ii(f){return(20091*f>>16)+f}function Gi(f,v,S,T){var W,st=0,at=l(16);for(W=0;4>W;++W){var ft=f[v+0]+f[v+8],pt=f[v+0]-f[v+8],Pt=(35468*f[v+4]>>16)-Ii(f[v+12]),Vt=Ii(f[v+4])+(35468*f[v+12]>>16);at[st+0]=ft+Vt,at[st+1]=pt+Pt,at[st+2]=pt-Pt,at[st+3]=ft-Vt,st+=4,v++}for(W=st=0;4>W;++W)ft=(f=at[st+0]+4)+at[st+8],pt=f-at[st+8],Pt=(35468*at[st+4]>>16)-Ii(at[st+12]),zn(S,T,0,0,ft+(Vt=Ii(at[st+4])+(35468*at[st+12]>>16))),zn(S,T,1,0,pt+Pt),zn(S,T,2,0,pt-Pt),zn(S,T,3,0,ft-Vt),st++,T+=32}function qa(f,v,S,T){var W=f[v+0]+4,st=35468*f[v+4]>>16,at=Ii(f[v+4]),ft=35468*f[v+1]>>16;Ks(S,T,0,W+at,f=Ii(f[v+1]),ft),Ks(S,T,1,W+st,f,ft),Ks(S,T,2,W-st,f,ft),Ks(S,T,3,W-at,f,ft)}function Go(f,v,S,T,W){Gi(f,v,S,T),W&&Gi(f,v+16,S,T+4)}function ps(f,v,S,T){Rr(f,v+0,S,T,1),Rr(f,v+32,S,T+128,1)}function ci(f,v,S,T){var W;for(f=f[v+0]+4,W=0;4>W;++W)for(v=0;4>v;++v)zn(S,T,v,W,f)}function ms(f,v,S,T){f[v+0]&&ir(f,v+0,S,T),f[v+16]&&ir(f,v+16,S,T+4),f[v+32]&&ir(f,v+32,S,T+128),f[v+48]&&ir(f,v+48,S,T+128+4)}function xo(f,v,S,T){var W,st=l(16);for(W=0;4>W;++W){var at=f[v+0+W]+f[v+12+W],ft=f[v+4+W]+f[v+8+W],pt=f[v+4+W]-f[v+8+W],Pt=f[v+0+W]-f[v+12+W];st[0+W]=at+ft,st[8+W]=at-ft,st[4+W]=Pt+pt,st[12+W]=Pt-pt}for(W=0;4>W;++W)at=(f=st[0+4*W]+3)+st[3+4*W],ft=st[1+4*W]+st[2+4*W],pt=st[1+4*W]-st[2+4*W],Pt=f-st[3+4*W],S[T+0]=at+ft>>3,S[T+16]=Pt+pt>>3,S[T+32]=at-ft>>3,S[T+48]=Pt-pt>>3,T+=64}function Ts(f,v,S){var T,W=v-32,st=ei,at=255-f[W-1];for(T=0;T<S;++T){var ft,pt=st,Pt=at+f[v-1];for(ft=0;ft<S;++ft)f[v+ft]=pt[Pt+f[W+ft]];v+=32}}function ma(f,v){Ts(f,v,4)}function Ys(f,v){Ts(f,v,8)}function ga(f,v){Ts(f,v,16)}function Qr(f,v){var S;for(S=0;16>S;++S)r(f,v+32*S,f,v-32,16)}function Ns(f,v){var S;for(S=16;0<S;--S)o(f,v,f[v-1],16),v+=32}function Js(f,v,S){var T;for(T=0;16>T;++T)o(v,S+32*T,f,16)}function Vo(f,v){var S,T=16;for(S=0;16>S;++S)T+=f[v-1+32*S]+f[v+S-32];Js(T>>5,f,v)}function Ci(f,v){var S,T=8;for(S=0;16>S;++S)T+=f[v-1+32*S];Js(T>>4,f,v)}function $a(f,v){var S,T=8;for(S=0;16>S;++S)T+=f[v+S-32];Js(T>>4,f,v)}function Ho(f,v){Js(128,f,v)}function _n(f,v,S){return f+2*v+S+2>>2}function bn(f,v){var S,T=v-32;for(T=new Uint8Array([_n(f[T-1],f[T+0],f[T+1]),_n(f[T+0],f[T+1],f[T+2]),_n(f[T+1],f[T+2],f[T+3]),_n(f[T+2],f[T+3],f[T+4])]),S=0;4>S;++S)r(f,v+32*S,T,0,T.length)}function Br(f,v){var S=f[v-1],T=f[v-1+32],W=f[v-1+64],st=f[v-1+96];Kt(f,v+0,16843009*_n(f[v-1-32],S,T)),Kt(f,v+32,16843009*_n(S,T,W)),Kt(f,v+64,16843009*_n(T,W,st)),Kt(f,v+96,16843009*_n(W,st,st))}function Dn(f,v){var S,T=4;for(S=0;4>S;++S)T+=f[v+S-32]+f[v-1+32*S];for(T>>=3,S=0;4>S;++S)o(f,v+32*S,T,4)}function _a(f,v){var S=f[v-1+0],T=f[v-1+32],W=f[v-1+64],st=f[v-1-32],at=f[v+0-32],ft=f[v+1-32],pt=f[v+2-32],Pt=f[v+3-32];f[v+0+96]=_n(T,W,f[v-1+96]),f[v+1+96]=f[v+0+64]=_n(S,T,W),f[v+2+96]=f[v+1+64]=f[v+0+32]=_n(st,S,T),f[v+3+96]=f[v+2+64]=f[v+1+32]=f[v+0+0]=_n(at,st,S),f[v+3+64]=f[v+2+32]=f[v+1+0]=_n(ft,at,st),f[v+3+32]=f[v+2+0]=_n(pt,ft,at),f[v+3+0]=_n(Pt,pt,ft)}function Wo(f,v){var S=f[v+1-32],T=f[v+2-32],W=f[v+3-32],st=f[v+4-32],at=f[v+5-32],ft=f[v+6-32],pt=f[v+7-32];f[v+0+0]=_n(f[v+0-32],S,T),f[v+1+0]=f[v+0+32]=_n(S,T,W),f[v+2+0]=f[v+1+32]=f[v+0+64]=_n(T,W,st),f[v+3+0]=f[v+2+32]=f[v+1+64]=f[v+0+96]=_n(W,st,at),f[v+3+32]=f[v+2+64]=f[v+1+96]=_n(st,at,ft),f[v+3+64]=f[v+2+96]=_n(at,ft,pt),f[v+3+96]=_n(ft,pt,pt)}function Xs(f,v){var S=f[v-1+0],T=f[v-1+32],W=f[v-1+64],st=f[v-1-32],at=f[v+0-32],ft=f[v+1-32],pt=f[v+2-32],Pt=f[v+3-32];f[v+0+0]=f[v+1+64]=st+at+1>>1,f[v+1+0]=f[v+2+64]=at+ft+1>>1,f[v+2+0]=f[v+3+64]=ft+pt+1>>1,f[v+3+0]=pt+Pt+1>>1,f[v+0+96]=_n(W,T,S),f[v+0+64]=_n(T,S,st),f[v+0+32]=f[v+1+96]=_n(S,st,at),f[v+1+32]=f[v+2+96]=_n(st,at,ft),f[v+2+32]=f[v+3+96]=_n(at,ft,pt),f[v+3+32]=_n(ft,pt,Pt)}function Tr(f,v){var S=f[v+0-32],T=f[v+1-32],W=f[v+2-32],st=f[v+3-32],at=f[v+4-32],ft=f[v+5-32],pt=f[v+6-32],Pt=f[v+7-32];f[v+0+0]=S+T+1>>1,f[v+1+0]=f[v+0+64]=T+W+1>>1,f[v+2+0]=f[v+1+64]=W+st+1>>1,f[v+3+0]=f[v+2+64]=st+at+1>>1,f[v+0+32]=_n(S,T,W),f[v+1+32]=f[v+0+96]=_n(T,W,st),f[v+2+32]=f[v+1+96]=_n(W,st,at),f[v+3+32]=f[v+2+96]=_n(st,at,ft),f[v+3+64]=_n(at,ft,pt),f[v+3+96]=_n(ft,pt,Pt)}function Ds(f,v){var S=f[v-1+0],T=f[v-1+32],W=f[v-1+64],st=f[v-1+96];f[v+0+0]=S+T+1>>1,f[v+2+0]=f[v+0+32]=T+W+1>>1,f[v+2+32]=f[v+0+64]=W+st+1>>1,f[v+1+0]=_n(S,T,W),f[v+3+0]=f[v+1+32]=_n(T,W,st),f[v+3+32]=f[v+1+64]=_n(W,st,st),f[v+3+64]=f[v+2+64]=f[v+0+96]=f[v+1+96]=f[v+2+96]=f[v+3+96]=st}function va(f,v){var S=f[v-1+0],T=f[v-1+32],W=f[v-1+64],st=f[v-1+96],at=f[v-1-32],ft=f[v+0-32],pt=f[v+1-32],Pt=f[v+2-32];f[v+0+0]=f[v+2+32]=S+at+1>>1,f[v+0+32]=f[v+2+64]=T+S+1>>1,f[v+0+64]=f[v+2+96]=W+T+1>>1,f[v+0+96]=st+W+1>>1,f[v+3+0]=_n(ft,pt,Pt),f[v+2+0]=_n(at,ft,pt),f[v+1+0]=f[v+3+32]=_n(S,at,ft),f[v+1+32]=f[v+3+64]=_n(T,S,at),f[v+1+64]=f[v+3+96]=_n(W,T,S),f[v+1+96]=_n(st,W,T)}function Lo(f,v){var S;for(S=0;8>S;++S)r(f,v+32*S,f,v-32,8)}function mi(f,v){var S;for(S=0;8>S;++S)o(f,v,f[v-1],8),v+=32}function wr(f,v,S){var T;for(T=0;8>T;++T)o(v,S+32*T,f,8)}function Os(f,v){var S,T=8;for(S=0;8>S;++S)T+=f[v+S-32]+f[v-1+32*S];wr(T>>4,f,v)}function Ga(f,v){var S,T=4;for(S=0;8>S;++S)T+=f[v+S-32];wr(T>>3,f,v)}function Co(f,v){var S,T=4;for(S=0;8>S;++S)T+=f[v-1+32*S];wr(T>>3,f,v)}function Zo(f,v){wr(128,f,v)}function Qs(f,v,S){var T=f[v-S],W=f[v+0],st=3*(W-T)+ao[1020+f[v-2*S]-f[v+S]],at=Ei[112+(st+4>>3)];f[v-S]=ei[255+T+Ei[112+(st+3>>3)]],f[v+0]=ei[255+W-at]}function ko(f,v,S,T){var W=f[v+0],st=f[v+S];return dr[255+f[v-2*S]-f[v-S]]>T||dr[255+st-W]>T}function ya(f,v,S,T){return 4*dr[255+f[v-S]-f[v+0]]+dr[255+f[v-2*S]-f[v+S]]<=T}function Bn(f,v,S,T,W){var st=f[v-3*S],at=f[v-2*S],ft=f[v-S],pt=f[v+0],Pt=f[v+S],Vt=f[v+2*S],pe=f[v+3*S];return 4*dr[255+ft-pt]+dr[255+at-Pt]>T?0:dr[255+f[v-4*S]-st]<=W&&dr[255+st-at]<=W&&dr[255+at-ft]<=W&&dr[255+pe-Vt]<=W&&dr[255+Vt-Pt]<=W&&dr[255+Pt-pt]<=W}function ba(f,v,S,T){var W=2*T+1;for(T=0;16>T;++T)ya(f,v+T,S,W)&&Qs(f,v+T,S)}function on(f,v,S,T){var W=2*T+1;for(T=0;16>T;++T)ya(f,v+T*S,1,W)&&Qs(f,v+T*S,1)}function Qi(f,v,S,T){var W;for(W=3;0<W;--W)ba(f,v+=4*S,S,T)}function Po(f,v,S,T){var W;for(W=3;0<W;--W)on(f,v+=4,S,T)}function to(f,v,S,T,W,st,at,ft){for(st=2*st+1;0<W--;){if(Bn(f,v,S,st,at))if(ko(f,v,S,ft))Qs(f,v,S);else{var pt=f,Pt=v,Vt=S,pe=pt[Pt-2*Vt],me=pt[Pt-Vt],ee=pt[Pt+0],xe=pt[Pt+Vt],be=pt[Pt+2*Vt],Zt=27*(ke=ao[1020+3*(ee-me)+ao[1020+pe-xe]])+63>>7,Xt=18*ke+63>>7,ke=9*ke+63>>7;pt[Pt-3*Vt]=ei[255+pt[Pt-3*Vt]+ke],pt[Pt-2*Vt]=ei[255+pe+Xt],pt[Pt-Vt]=ei[255+me+Zt],pt[Pt+0]=ei[255+ee-Zt],pt[Pt+Vt]=ei[255+xe-Xt],pt[Pt+2*Vt]=ei[255+be-ke]}v+=T}}function ur(f,v,S,T,W,st,at,ft){for(st=2*st+1;0<W--;){if(Bn(f,v,S,st,at))if(ko(f,v,S,ft))Qs(f,v,S);else{var pt=f,Pt=v,Vt=S,pe=pt[Pt-Vt],me=pt[Pt+0],ee=pt[Pt+Vt],xe=Ei[112+((be=3*(me-pe))+4>>3)],be=Ei[112+(be+3>>3)],Zt=xe+1>>1;pt[Pt-2*Vt]=ei[255+pt[Pt-2*Vt]+Zt],pt[Pt-Vt]=ei[255+pe+be],pt[Pt+0]=ei[255+me-xe],pt[Pt+Vt]=ei[255+ee-Zt]}v+=T}}function wa(f,v,S,T,W,st){to(f,v,S,1,16,T,W,st)}function gs(f,v,S,T,W,st){to(f,v,1,S,16,T,W,st)}function Ko(f,v,S,T,W,st){var at;for(at=3;0<at;--at)ur(f,v+=4*S,S,1,16,T,W,st)}function Yo(f,v,S,T,W,st){var at;for(at=3;0<at;--at)ur(f,v+=4,1,S,16,T,W,st)}function Nr(f,v,S,T,W,st,at,ft){to(f,v,W,1,8,st,at,ft),to(S,T,W,1,8,st,at,ft)}function Jo(f,v,S,T,W,st,at,ft){to(f,v,1,W,8,st,at,ft),to(S,T,1,W,8,st,at,ft)}function ki(f,v,S,T,W,st,at,ft){ur(f,v+4*W,W,1,8,st,at,ft),ur(S,T+4*W,W,1,8,st,at,ft)}function Va(f,v,S,T,W,st,at,ft){ur(f,v+4,1,W,8,st,at,ft),ur(S,T+4,1,W,8,st,at,ft)}function So(){this.ba=new Li,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new qn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Dr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Xo(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function xa(){this.ua=0,this.Wa=new lt,this.vb=new lt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new nt,this.yc=new J}function La(){this.xb=this.a=0,this.l=new br,this.ca=new Li,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new D,this.Pb=0,this.wd=new D,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new xa,this.ab=0,this.gc=c(4,Xo),this.Oc=0}function Qo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new br,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function eo(f,v,S,T,W,st,at){for(f=f==null?0:f[v+0],v=0;v<at;++v)W[st+v]=f+S[T+v]&255,f=W[st+v]}function Eo(f,v,S,T,W,st,at){var ft;if(f==null)eo(null,null,S,T,W,st,at);else for(ft=0;ft<at;++ft)W[st+ft]=f[v+ft]+S[T+ft]&255}function no(f,v,S,T,W,st,at){if(f==null)eo(null,null,S,T,W,st,at);else{var ft,pt=f[v+0],Pt=pt,Vt=pt;for(ft=0;ft<at;++ft)Pt=Vt+(pt=f[v+ft])-Pt,Vt=S[T+ft]+(-256&Pt?0>Pt?0:255:Pt)&255,Pt=pt,W[st+ft]=Vt}}function gi(f,v,S,T){var W=v.width,st=v.o;if(e(f!=null&&v!=null),0>S||0>=T||S+T>st)return null;if(!f.Cc){if(f.ga==null){var at;if(f.ga=new Qo,(at=f.ga==null)||(at=v.width*v.o,e(f.Gb.length==0),f.Gb=l(at),f.Uc=0,f.Gb==null?at=0:(f.mb=f.Gb,f.nb=f.Uc,f.rc=null,at=1),at=!at),!at){at=f.ga;var ft=f.Fa,pt=f.P,Pt=f.qc,Vt=f.mb,pe=f.nb,me=pt+1,ee=Pt-1,xe=at.l;if(e(ft!=null&&Vt!=null&&v!=null),Kn[0]=null,Kn[1]=eo,Kn[2]=Eo,Kn[3]=no,at.ca=Vt,at.tb=pe,at.c=v.width,at.i=v.height,e(0<at.c&&0<at.i),1>=Pt)v=0;else if(at.$a=ft[pt+0]>>0&3,at.Z=ft[pt+0]>>2&3,at.Lc=ft[pt+0]>>4&3,pt=ft[pt+0]>>6&3,0>at.$a||1<at.$a||4<=at.Z||1<at.Lc||pt)v=0;else if(xe.put=Sr,xe.ac=ui,xe.bc=Er,xe.ma=at,xe.width=v.width,xe.height=v.height,xe.Da=v.Da,xe.v=v.v,xe.va=v.va,xe.j=v.j,xe.o=v.o,at.$a)t:{e(at.$a==1),v=yr();e:for(;;){if(v==null){v=0;break t}if(e(at!=null),at.mc=v,v.c=at.c,v.i=at.i,v.l=at.l,v.l.ma=at,v.l.width=at.c,v.l.height=at.i,v.a=0,G(v.m,ft,me,ee),!fs(at.c,at.i,1,v,null)||(v.ab==1&&v.gc[0].hc==3&&Xr(v.s)?(at.ic=1,ft=v.c*v.i,v.Ta=null,v.Ua=0,v.V=l(ft),v.Ba=0,v.V==null?(v.a=1,v=0):v=1):(at.ic=0,v=_o(v,at.c)),!v))break e;v=1;break t}at.mc=null,v=0}else v=ee>=at.c*at.i;at=!v}if(at)return null;f.ga.Lc!=1?f.Ga=0:T=st-S}e(f.ga!=null),e(S+T<=st);t:{if(v=(ft=f.ga).c,st=ft.l.o,ft.$a==0){if(me=f.rc,ee=f.Vc,xe=f.Fa,pt=f.P+1+S*v,Pt=f.mb,Vt=f.nb+S*v,e(pt<=f.P+f.qc),ft.Z!=0)for(e(Kn[ft.Z]!=null),at=0;at<T;++at)Kn[ft.Z](me,ee,xe,pt,Pt,Vt,v),me=Pt,ee=Vt,Vt+=v,pt+=v;else for(at=0;at<T;++at)r(Pt,Vt,xe,pt,v),me=Pt,ee=Vt,Vt+=v,pt+=v;f.rc=me,f.Vc=ee}else{if(e(ft.mc!=null),v=S+T,e((at=ft.mc)!=null),e(v<=at.i),at.C>=v)v=1;else if(ft.ic||ne(),ft.ic){ft=at.V,me=at.Ba,ee=at.c;var be=at.i,Zt=(xe=1,pt=at.$/ee,Pt=at.$%ee,Vt=at.m,pe=at.s,at.$),Xt=ee*be,ke=ee*v,Ae=pe.wc,Se=Zt<ke?$e(pe,Pt,pt):null;e(Zt<=Xt),e(v<=be),e(Xr(pe));e:for(;;){for(;!Vt.h&&Zt<ke;){if(Pt&Ae||(Se=$e(pe,Pt,pt)),e(Se!=null),xt(Vt),256>(be=ar(Se.G[0],Se.H[0],Vt)))ft[me+Zt]=be,++Zt,++Pt>=ee&&(Pt=0,++pt<=v&&!(pt%16)&&vr(at,pt));else{if(!(280>be)){xe=0;break e}be=Jr(be-256,Vt);var Ke,je=ar(Se.G[4],Se.H[4],Vt);if(xt(Vt),!(Zt>=(je=hs(ee,je=Jr(je,Vt)))&&Xt-Zt>=be)){xe=0;break e}for(Ke=0;Ke<be;++Ke)ft[me+Zt+Ke]=ft[me+Zt+Ke-je];for(Zt+=be,Pt+=be;Pt>=ee;)Pt-=ee,++pt<=v&&!(pt%16)&&vr(at,pt);Zt<ke&&Pt&Ae&&(Se=$e(pe,Pt,pt))}e(Vt.h==ut(Vt))}vr(at,pt>v?v:pt);break e}!xe||Vt.h&&Zt<Xt?(xe=0,at.a=Vt.h?5:3):at.$=Zt,v=xe}else v=Ar(at,at.V,at.Ba,at.c,at.i,v,Uo);if(!v){T=0;break t}}S+T>=st&&(f.Cc=1),T=1}if(!T)return null;if(f.Cc&&((T=f.ga)!=null&&(T.mc=null),f.ga=null,0<f.Ga))return alert("todo:WebPDequantizeLevels"),null}return f.nb+S*W}function x(f,v,S,T,W,st){for(;0<W--;){var at,ft=f,pt=v+(S?1:0),Pt=f,Vt=v+(S?0:3);for(at=0;at<T;++at){var pe=Pt[Vt+4*at];pe!=255&&(pe*=32897,ft[pt+4*at+0]=ft[pt+4*at+0]*pe>>23,ft[pt+4*at+1]=ft[pt+4*at+1]*pe>>23,ft[pt+4*at+2]=ft[pt+4*at+2]*pe>>23)}v+=st}}function H(f,v,S,T,W){for(;0<T--;){var st;for(st=0;st<S;++st){var at=f[v+2*st+0],ft=15&(Pt=f[v+2*st+1]),pt=4369*ft,Pt=(240&Pt|Pt>>4)*pt>>16;f[v+2*st+0]=(240&at|at>>4)*pt>>16&240|(15&at|at<<4)*pt>>16>>4&15,f[v+2*st+1]=240&Pt|ft}v+=W}}function At(f,v,S,T,W,st,at,ft){var pt,Pt,Vt=255;for(Pt=0;Pt<W;++Pt){for(pt=0;pt<T;++pt){var pe=f[v+pt];st[at+4*pt]=pe,Vt&=pe}v+=S,at+=ft}return Vt!=255}function qt(f,v,S,T,W){var st;for(st=0;st<W;++st)S[T+st]=f[v+st]>>8}function ne(){Fi=x,Zn=H,Vn=At,_i=qt}function ye(f,v,S){ct[f]=function(T,W,st,at,ft,pt,Pt,Vt,pe,me,ee,xe,be,Zt,Xt,ke,Ae){var Se,Ke=Ae-1>>1,je=ft[pt+0]|Pt[Vt+0]<<16,un=pe[me+0]|ee[xe+0]<<16;e(T!=null);var s=3*je+un+131074>>2;for(v(T[W+0],255&s,s>>16,be,Zt),st!=null&&(s=3*un+je+131074>>2,v(st[at+0],255&s,s>>16,Xt,ke)),Se=1;Se<=Ke;++Se){var a=ft[pt+Se]|Pt[Vt+Se]<<16,h=pe[me+Se]|ee[xe+Se]<<16,p=je+a+un+h+524296,_=p+2*(a+un)>>3;s=_+je>>1,je=(p=p+2*(je+h)>>3)+a>>1,v(T[W+2*Se-1],255&s,s>>16,be,Zt+(2*Se-1)*S),v(T[W+2*Se-0],255&je,je>>16,be,Zt+(2*Se-0)*S),st!=null&&(s=p+un>>1,je=_+h>>1,v(st[at+2*Se-1],255&s,s>>16,Xt,ke+(2*Se-1)*S),v(st[at+2*Se+0],255&je,je>>16,Xt,ke+(2*Se+0)*S)),je=a,un=h}1&Ae||(s=3*je+un+131074>>2,v(T[W+Ae-1],255&s,s>>16,be,Zt+(Ae-1)*S),st!=null&&(s=3*un+je+131074>>2,v(st[at+Ae-1],255&s,s>>16,Xt,ke+(Ae-1)*S)))}}function Be(){Ki[pr]=ku,Ki[fn]=Hl,Ki[Ka]=Cs,Ki[Bo]=To,Ki[jr]=Ya,Ki[Zi]=Wl,Ki[bl]=dc,Ki[rr]=Hl,Ki[sr]=To,Ki[xs]=Ya,Ki[i]=Wl}function Ge(f){return f&-16384?0>f?0:255:f>>Oh}function Ze(f,v){return Ge((19077*f>>8)+(26149*v>>8)-14234)}function rn(f,v,S){return Ge((19077*f>>8)-(6419*v>>8)-(13320*S>>8)+8708)}function mn(f,v){return Ge((19077*f>>8)+(33050*v>>8)-17685)}function Tn(f,v,S,T,W){T[W+0]=Ze(f,S),T[W+1]=rn(f,v,S),T[W+2]=mn(f,v)}function si(f,v,S,T,W){T[W+0]=mn(f,v),T[W+1]=rn(f,v,S),T[W+2]=Ze(f,S)}function Fn(f,v,S,T,W){var st=rn(f,v,S);v=st<<3&224|mn(f,v)>>3,T[W+0]=248&Ze(f,S)|st>>5,T[W+1]=v}function Gn(f,v,S,T,W){var st=240&mn(f,v)|15;T[W+0]=240&Ze(f,S)|rn(f,v,S)>>4,T[W+1]=st}function Pi(f,v,S,T,W){T[W+0]=255,Tn(f,v,S,T,W+1)}function wi(f,v,S,T,W){si(f,v,S,T,W),T[W+3]=255}function xr(f,v,S,T,W){Tn(f,v,S,T,W),T[W+3]=255}function Qn(f,v){return 0>f?0:f>v?v:f}function tr(f,v,S){ct[f]=function(T,W,st,at,ft,pt,Pt,Vt,pe){for(var me=Vt+(-2&pe)*S;Vt!=me;)v(T[W+0],st[at+0],ft[pt+0],Pt,Vt),v(T[W+1],st[at+0],ft[pt+0],Pt,Vt+S),W+=2,++at,++pt,Vt+=2*S;1&pe&&v(T[W+0],st[at+0],ft[pt+0],Pt,Vt)}}function Ha(f,v,S){return S==0?f==0?v==0?6:5:v==0?4:0:S}function er(f,v,S,T,W){switch(f>>>30){case 3:Rr(v,S,T,W,0);break;case 2:hi(v,S,T,W);break;case 1:ir(v,S,T,W)}}function Ca(f,v){var S,T,W=v.M,st=v.Nb,at=f.oc,ft=f.pc+40,pt=f.oc,Pt=f.pc+584,Vt=f.oc,pe=f.pc+600;for(S=0;16>S;++S)at[ft+32*S-1]=129;for(S=0;8>S;++S)pt[Pt+32*S-1]=129,Vt[pe+32*S-1]=129;for(0<W?at[ft-1-32]=pt[Pt-1-32]=Vt[pe-1-32]=129:(o(at,ft-32-1,127,21),o(pt,Pt-32-1,127,9),o(Vt,pe-32-1,127,9)),T=0;T<f.za;++T){var me=v.ya[v.aa+T];if(0<T){for(S=-1;16>S;++S)r(at,ft+32*S-4,at,ft+32*S+12,4);for(S=-1;8>S;++S)r(pt,Pt+32*S-4,pt,Pt+32*S+4,4),r(Vt,pe+32*S-4,Vt,pe+32*S+4,4)}var ee=f.Gd,xe=f.Hd+T,be=me.ad,Zt=me.Hc;if(0<W&&(r(at,ft-32,ee[xe].y,0,16),r(pt,Pt-32,ee[xe].f,0,8),r(Vt,pe-32,ee[xe].ea,0,8)),me.Za){var Xt=at,ke=ft-32+16;for(0<W&&(T>=f.za-1?o(Xt,ke,ee[xe].y[15],4):r(Xt,ke,ee[xe+1].y,0,4)),S=0;4>S;S++)Xt[ke+128+S]=Xt[ke+256+S]=Xt[ke+384+S]=Xt[ke+0+S];for(S=0;16>S;++S,Zt<<=2)Xt=at,ke=ft+mc[S],zr[me.Ob[S]](Xt,ke),er(Zt,be,16*+S,Xt,ke)}else if(Xt=Ha(T,W,me.Ob[0]),is[Xt](at,ft),Zt!=0)for(S=0;16>S;++S,Zt<<=2)er(Zt,be,16*+S,at,ft+mc[S]);for(S=me.Gc,Xt=Ha(T,W,me.Dd),Cr[Xt](pt,Pt),Cr[Xt](Vt,pe),Zt=be,Xt=pt,ke=Pt,255&(me=S>>0)&&(170&me?ys(Zt,256,Xt,ke):Hi(Zt,256,Xt,ke)),me=Vt,Zt=pe,255&(S>>=8)&&(170&S?ys(be,320,me,Zt):Hi(be,320,me,Zt)),W<f.Ub-1&&(r(ee[xe].y,0,at,ft+480,16),r(ee[xe].f,0,pt,Pt+224,8),r(ee[xe].ea,0,Vt,pe+224,8)),S=8*st*f.B,ee=f.sa,xe=f.ta+16*T+16*st*f.R,be=f.qa,me=f.ra+8*T+S,Zt=f.Ha,Xt=f.Ia+8*T+S,S=0;16>S;++S)r(ee,xe+S*f.R,at,ft+32*S,16);for(S=0;8>S;++S)r(be,me+S*f.B,pt,Pt+32*S,8),r(Zt,Xt+S*f.B,Vt,pe+32*S,8)}}function ts(f,v,S,T,W,st,at,ft,pt){var Pt=[0],Vt=[0],pe=0,me=pt!=null?pt.kd:0,ee=pt??new Dr;if(f==null||12>S)return 7;ee.data=f,ee.w=v,ee.ha=S,v=[v],S=[S],ee.gb=[ee.gb];t:{var xe=v,be=S,Zt=ee.gb;if(e(f!=null),e(be!=null),e(Zt!=null),Zt[0]=0,12<=be[0]&&!n(f,xe[0],"RIFF")){if(n(f,xe[0]+8,"WEBP")){Zt=3;break t}var Xt=ht(f,xe[0]+4);if(12>Xt||4294967286<Xt){Zt=3;break t}if(me&&Xt>be[0]-8){Zt=7;break t}Zt[0]=Xt,xe[0]+=12,be[0]-=12}Zt=0}if(Zt!=0)return Zt;for(Xt=0<ee.gb[0],S=S[0];;){t:{var ke=f;be=v,Zt=S;var Ae=Pt,Se=Vt,Ke=xe=[0];if((s=pe=[pe])[0]=0,8>Zt[0])Zt=7;else{if(!n(ke,be[0],"VP8X")){if(ht(ke,be[0]+4)!=10){Zt=3;break t}if(18>Zt[0]){Zt=7;break t}var je=ht(ke,be[0]+8),un=1+it(ke,be[0]+12);if(2147483648<=un*(ke=1+it(ke,be[0]+15))){Zt=3;break t}Ke!=null&&(Ke[0]=je),Ae!=null&&(Ae[0]=un),Se!=null&&(Se[0]=ke),be[0]+=18,Zt[0]-=18,s[0]=1}Zt=0}}if(pe=pe[0],xe=xe[0],Zt!=0)return Zt;if(be=!!(2&xe),!Xt&&pe)return 3;if(st!=null&&(st[0]=!!(16&xe)),at!=null&&(at[0]=be),ft!=null&&(ft[0]=0),at=Pt[0],xe=Vt[0],pe&&be&&pt==null){Zt=0;break}if(4>S){Zt=7;break}if(Xt&&pe||!Xt&&!pe&&!n(f,v[0],"ALPH")){S=[S],ee.na=[ee.na],ee.P=[ee.P],ee.Sa=[ee.Sa];t:{je=f,Zt=v,Xt=S;var s=ee.gb;Ae=ee.na,Se=ee.P,Ke=ee.Sa,un=22,e(je!=null),e(Xt!=null),ke=Zt[0];var a=Xt[0];for(e(Ae!=null),e(Ke!=null),Ae[0]=null,Se[0]=null,Ke[0]=0;;){if(Zt[0]=ke,Xt[0]=a,8>a){Zt=7;break t}var h=ht(je,ke+4);if(4294967286<h){Zt=3;break t}var p=8+h+1&-2;if(un+=p,0<s&&un>s){Zt=3;break t}if(!n(je,ke,"VP8 ")||!n(je,ke,"VP8L")){Zt=0;break t}if(a[0]<p){Zt=7;break t}n(je,ke,"ALPH")||(Ae[0]=je,Se[0]=ke+8,Ke[0]=h),ke+=p,a-=p}}if(S=S[0],ee.na=ee.na[0],ee.P=ee.P[0],ee.Sa=ee.Sa[0],Zt!=0)break}S=[S],ee.Ja=[ee.Ja],ee.xa=[ee.xa];t:if(s=f,Zt=v,Xt=S,Ae=ee.gb[0],Se=ee.Ja,Ke=ee.xa,je=Zt[0],ke=!n(s,je,"VP8 "),un=!n(s,je,"VP8L"),e(s!=null),e(Xt!=null),e(Se!=null),e(Ke!=null),8>Xt[0])Zt=7;else{if(ke||un){if(s=ht(s,je+4),12<=Ae&&s>Ae-12){Zt=3;break t}if(me&&s>Xt[0]-8){Zt=7;break t}Se[0]=s,Zt[0]+=8,Xt[0]-=8,Ke[0]=un}else Ke[0]=5<=Xt[0]&&s[je+0]==47&&!(s[je+4]>>5),Se[0]=Xt[0];Zt=0}if(S=S[0],ee.Ja=ee.Ja[0],ee.xa=ee.xa[0],v=v[0],Zt!=0)break;if(4294967286<ee.Ja)return 3;if(ft==null||be||(ft[0]=ee.xa?2:1),at=[at],xe=[xe],ee.xa){if(5>S){Zt=7;break}ft=at,me=xe,be=st,f==null||5>S?f=0:5<=S&&f[v+0]==47&&!(f[v+4]>>5)?(Xt=[0],s=[0],Ae=[0],G(Se=new D,f,v,S),ln(Se,Xt,s,Ae)?(ft!=null&&(ft[0]=Xt[0]),me!=null&&(me[0]=s[0]),be!=null&&(be[0]=Ae[0]),f=1):f=0):f=0}else{if(10>S){Zt=7;break}ft=xe,f==null||10>S||!Zs(f,v+3,S-3)?f=0:(me=f[v+0]|f[v+1]<<8|f[v+2]<<16,be=16383&(f[v+7]<<8|f[v+6]),f=16383&(f[v+9]<<8|f[v+8]),1&me||3<(me>>1&7)||!(me>>4&1)||me>>5>=ee.Ja||!be||!f?f=0:(at&&(at[0]=be),ft&&(ft[0]=f),f=1))}if(!f||(at=at[0],xe=xe[0],pe&&(Pt[0]!=at||Vt[0]!=xe)))return 3;pt!=null&&(pt[0]=ee,pt.offset=v-pt.w,e(4294967286>v-pt.w),e(pt.offset==pt.ha-S));break}return Zt==0||Zt==7&&pe&&pt==null?(st!=null&&(st[0]|=ee.na!=null&&0<ee.na.length),T!=null&&(T[0]=at),W!=null&&(W[0]=xe),0):Zt}function ka(f,v,S){var T=v.width,W=v.height,st=0,at=0,ft=T,pt=W;if(v.Da=f!=null&&0<f.Da,v.Da&&(ft=f.cd,pt=f.bd,st=f.v,at=f.j,11>S||(st&=-2,at&=-2),0>st||0>at||0>=ft||0>=pt||st+ft>T||at+pt>W))return 0;if(v.v=st,v.j=at,v.va=st+ft,v.o=at+pt,v.U=ft,v.T=pt,v.da=f!=null&&0<f.da,v.da){if(!Gt(ft,pt,S=[f.ib],st=[f.hb]))return 0;v.ib=S[0],v.hb=st[0]}return v.ob=f!=null&&f.ob,v.Kb=f==null||!f.Sd,v.da&&(v.ob=v.ib<3*T/4&&v.hb<3*W/4,v.Kb=0),1}function Is(f){if(f==null)return 2;if(11>f.S){var v=f.f.RGBA;v.fb+=(f.height-1)*v.A,v.A=-v.A}else v=f.f.kb,f=f.height,v.O+=(f-1)*v.fa,v.fa=-v.fa,v.N+=(f-1>>1)*v.Ab,v.Ab=-v.Ab,v.W+=(f-1>>1)*v.Db,v.Db=-v.Db,v.F!=null&&(v.J+=(f-1)*v.lb,v.lb=-v.lb);return 0}function Rs(f,v,S,T){if(T==null||0>=f||0>=v)return 2;if(S!=null){if(S.Da){var W=S.cd,st=S.bd,at=-2&S.v,ft=-2&S.j;if(0>at||0>ft||0>=W||0>=st||at+W>f||ft+st>v)return 2;f=W,v=st}if(S.da){if(!Gt(f,v,W=[S.ib],st=[S.hb]))return 2;f=W[0],v=st[0]}}T.width=f,T.height=v;t:{var pt=T.width,Pt=T.height;if(f=T.S,0>=pt||0>=Pt||!(f>=pr&&13>f))f=2;else{if(0>=T.Rd&&T.sd==null){at=st=W=v=0;var Vt=(ft=pt*vc[f])*Pt;if(11>f||(st=(Pt+1)/2*(v=(pt+1)/2),f==12&&(at=(W=pt)*Pt)),(Pt=l(Vt+2*st+at))==null){f=1;break t}T.sd=Pt,11>f?((pt=T.f.RGBA).eb=Pt,pt.fb=0,pt.A=ft,pt.size=Vt):((pt=T.f.kb).y=Pt,pt.O=0,pt.fa=ft,pt.Fd=Vt,pt.f=Pt,pt.N=0+Vt,pt.Ab=v,pt.Cd=st,pt.ea=Pt,pt.W=0+Vt+st,pt.Db=v,pt.Ed=st,f==12&&(pt.F=Pt,pt.J=0+Vt+2*st),pt.Tc=at,pt.lb=W)}if(v=1,W=T.S,st=T.width,at=T.height,W>=pr&&13>W)if(11>W)f=T.f.RGBA,v&=(ft=Math.abs(f.A))*(at-1)+st<=f.size,v&=ft>=st*vc[W],v&=f.eb!=null;else{f=T.f.kb,ft=(st+1)/2,Vt=(at+1)/2,pt=Math.abs(f.fa),Pt=Math.abs(f.Ab);var pe=Math.abs(f.Db),me=Math.abs(f.lb),ee=me*(at-1)+st;v&=pt*(at-1)+st<=f.Fd,v&=Pt*(Vt-1)+ft<=f.Cd,v=(v&=pe*(Vt-1)+ft<=f.Ed)&pt>=st&Pt>=ft&pe>=ft,v&=f.y!=null,v&=f.f!=null,v&=f.ea!=null,W==12&&(v&=me>=st,v&=ee<=f.Tc,v&=f.F!=null)}else v=0;f=v?0:2}}return f!=0||S!=null&&S.fd&&(f=Is(T)),f}var xi=64,ta=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],cr=24,nr=32,ea=8,Vi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];oe("Predictor0","PredictorAdd0"),ct.Predictor0=function(){return 4278190080},ct.Predictor1=function(f){return f},ct.Predictor2=function(f,v,S){return v[S+0]},ct.Predictor3=function(f,v,S){return v[S+1]},ct.Predictor4=function(f,v,S){return v[S-1]},ct.Predictor5=function(f,v,S){return Lt(Lt(f,v[S+1]),v[S+0])},ct.Predictor6=function(f,v,S){return Lt(f,v[S-1])},ct.Predictor7=function(f,v,S){return Lt(f,v[S+0])},ct.Predictor8=function(f,v,S){return Lt(v[S-1],v[S+0])},ct.Predictor9=function(f,v,S){return Lt(v[S+0],v[S+1])},ct.Predictor10=function(f,v,S){return Lt(Lt(f,v[S-1]),Lt(v[S+0],v[S+1]))},ct.Predictor11=function(f,v,S){var T=v[S+0];return 0>=Le(T>>24&255,f>>24&255,(v=v[S-1])>>24&255)+Le(T>>16&255,f>>16&255,v>>16&255)+Le(T>>8&255,f>>8&255,v>>8&255)+Le(255&T,255&f,255&v)?T:f},ct.Predictor12=function(f,v,S){var T=v[S+0];return(ie((f>>24&255)+(T>>24&255)-((v=v[S-1])>>24&255))<<24|ie((f>>16&255)+(T>>16&255)-(v>>16&255))<<16|ie((f>>8&255)+(T>>8&255)-(v>>8&255))<<8|ie((255&f)+(255&T)-(255&v)))>>>0},ct.Predictor13=function(f,v,S){var T=v[S-1];return(_e((f=Lt(f,v[S+0]))>>24&255,T>>24&255)<<24|_e(f>>16&255,T>>16&255)<<16|_e(f>>8&255,T>>8&255)<<8|_e(f>>0&255,T>>0&255))>>>0};var Fs=ct.PredictorAdd0;ct.PredictorAdd1=zt,oe("Predictor2","PredictorAdd2"),oe("Predictor3","PredictorAdd3"),oe("Predictor4","PredictorAdd4"),oe("Predictor5","PredictorAdd5"),oe("Predictor6","PredictorAdd6"),oe("Predictor7","PredictorAdd7"),oe("Predictor8","PredictorAdd8"),oe("Predictor9","PredictorAdd9"),oe("Predictor10","PredictorAdd10"),oe("Predictor11","PredictorAdd11"),oe("Predictor12","PredictorAdd12"),oe("Predictor13","PredictorAdd13");var Lr=ct.PredictorAdd2;He("ColorIndexInverseTransform","MapARGB","32b",function(f){return f>>8&255},function(f){return f}),He("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(f){return f},function(f){return f>>8&255});var Wa,Si=ct.ColorIndexInverseTransform,_s=ct.MapARGB,Or=ct.VP8LColorIndexInverseTransformAlpha,Mo=ct.MapAlpha,js=ct.VP8LPredictorsAdd=[];js.length=16,(ct.VP8LPredictors=[]).length=16,(ct.VP8LPredictorsAdd_C=[]).length=16,(ct.VP8LPredictors_C=[]).length=16;var vs,Ri,Ti,es,hr,Ir,zs,Rr,hi,ys,ir,Hi,Ao,Pa,Sa,Wi,fr,io,bs,na,ro,so,Us,Fr,Fi,Zn,Vn,_i,ti=l(511),ns=l(2041),oo=l(225),ws=l(767),Za=0,ao=ns,Ei=oo,ei=ws,dr=ti,pr=0,fn=1,Ka=2,Bo=3,jr=4,Zi=5,bl=6,rr=7,sr=8,xs=9,i=10,u=[2,3,7],g=[3,3,11],P=[280,256,256,256,40],N=[0,1,1,1,0],ot=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],jt=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ce=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ve=8,Me=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Ve=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],sn=null,En=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],or=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Mi=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],mr=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],fi=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Ls=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],wl=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],is=[],zr=[],Cr=[],Cu=1,xl=2,Kn=[],Ki=[];ye("UpsampleRgbLinePair",Tn,3),ye("UpsampleBgrLinePair",si,3),ye("UpsampleRgbaLinePair",xr,4),ye("UpsampleBgraLinePair",wi,4),ye("UpsampleArgbLinePair",Pi,4),ye("UpsampleRgba4444LinePair",Gn,2),ye("UpsampleRgb565LinePair",Fn,2);var ku=ct.UpsampleRgbLinePair,Cs=ct.UpsampleBgrLinePair,Hl=ct.UpsampleRgbaLinePair,To=ct.UpsampleBgraLinePair,Ya=ct.UpsampleArgbLinePair,Wl=ct.UpsampleRgba4444LinePair,dc=ct.UpsampleRgb565LinePair,Zl=16,Ll=1<<Zl-1,Cl=-227,Pu=482,Oh=6,Ja=0,Kl=l(256),Ih=l(256),Rh=l(256),Yl=l(256),Jl=l(Pu-Cl),pc=l(Pu-Cl);tr("YuvToRgbRow",Tn,3),tr("YuvToBgrRow",si,3),tr("YuvToRgbaRow",xr,4),tr("YuvToBgraRow",wi,4),tr("YuvToArgbRow",Pi,4),tr("YuvToRgba4444Row",Gn,2),tr("YuvToRgb565Row",Fn,2);var mc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Xl=[0,2,8],gc=[8,7,6,4,4,2,2,2,1,1,1,1],_c=1;this.WebPDecodeRGBA=function(f,v,S,T,W){var st=fn,at=new So,ft=new Li;at.ba=ft,ft.S=st,ft.width=[ft.width],ft.height=[ft.height];var pt=ft.width,Pt=ft.height,Vt=new Oi;if(Vt==null||f==null)var pe=2;else e(Vt!=null),pe=ts(f,v,S,Vt.width,Vt.height,Vt.Pd,Vt.Qd,Vt.format,null);if(pe!=0?pt=0:(pt!=null&&(pt[0]=Vt.width[0]),Pt!=null&&(Pt[0]=Vt.height[0]),pt=1),pt){ft.width=ft.width[0],ft.height=ft.height[0],T!=null&&(T[0]=ft.width),W!=null&&(W[0]=ft.height);t:{if(T=new br,(W=new Dr).data=f,W.w=v,W.ha=S,W.kd=1,v=[0],e(W!=null),((f=ts(W.data,W.w,W.ha,null,null,null,v,null,W))==0||f==7)&&v[0]&&(f=4),(v=f)==0){if(e(at!=null),T.data=W.data,T.w=W.w+W.offset,T.ha=W.ha-W.offset,T.put=Sr,T.ac=ui,T.bc=Er,T.ma=at,W.xa){if((f=yr())==null){at=1;break t}if(function(me,ee){var xe=[0],be=[0],Zt=[0];e:for(;;){if(me==null)return 0;if(ee==null)return me.a=2,0;if(me.l=ee,me.a=0,G(me.m,ee.data,ee.w,ee.ha),!ln(me.m,xe,be,Zt)){me.a=3;break e}if(me.xb=xl,ee.width=xe[0],ee.height=be[0],!fs(xe[0],be[0],1,me,null))break e;return 1}return e(me.a!=0),0}(f,T)){if(T=(v=Rs(T.width,T.height,at.Oa,at.ba))==0){e:{T=f;n:for(;;){if(T==null){T=0;break e}if(e(T.s.yc!=null),e(T.s.Ya!=null),e(0<T.s.Wb),e((S=T.l)!=null),e((W=S.ma)!=null),T.xb!=0){if(T.ca=W.ba,T.tb=W.tb,e(T.ca!=null),!ka(W.Oa,S,Bo)){T.a=2;break n}if(!_o(T,S.width)||S.da)break n;if((S.da||qe(T.ca.S))&&ne(),11>T.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),T.ca.f.kb.F!=null&&ne()),T.Pb&&0<T.s.ua&&T.s.vb.X==null&&!It(T.s.vb,T.s.Wa.Xa)){T.a=1;break n}T.xb=0}if(!Ar(T,T.V,T.Ba,T.c,T.i,S.o,go))break n;W.Dc=T.Ma,T=1;break e}e(T.a!=0),T=0}T=!T}T&&(v=f.a)}else v=f.a}else{if((f=new In)==null){at=1;break t}if(f.Fa=W.na,f.P=W.P,f.qc=W.Sa,Bs(f,T)){if((v=Rs(T.width,T.height,at.Oa,at.ba))==0){if(f.Aa=0,S=at.Oa,e((W=f)!=null),S!=null){if(0<(pt=0>(pt=S.Md)?0:100<pt?255:255*pt/100)){for(Pt=Vt=0;4>Pt;++Pt)12>(pe=W.pb[Pt]).lc&&(pe.ia=pt*gc[0>pe.lc?0:pe.lc]>>3),Vt|=pe.ia;Vt&&(alert("todo:VP8InitRandom"),W.ia=1)}W.Ga=S.Id,100<W.Ga?W.Ga=100:0>W.Ga&&(W.Ga=0)}wn(f,T)||(v=f.a)}}else v=f.a}v==0&&at.Oa!=null&&at.Oa.fd&&(v=Is(at.ba))}at=v}st=at!=0?null:11>st?ft.f.RGBA.eb:ft.f.kb.y}else st=null;return st};var vc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function y(ct,Bt){for(var Yt="",$=0;$<4;$++)Yt+=String.fromCharCode(ct[Bt++]);return Yt}function b(ct,Bt){return(ct[Bt+0]<<0|ct[Bt+1]<<8|ct[Bt+2]<<16)>>>0}function w(ct,Bt){return(ct[Bt+0]<<0|ct[Bt+1]<<8|ct[Bt+2]<<16|ct[Bt+3]<<24)>>>0}new m;var E=[0],C=[0],R=[],O=new m,q=t,F=function(ct,Bt){var Yt={},$=0,J=!1,I=0,nt=0;if(Yt.frames=[],!function(Z,ut,vt,xt){for(var dt=0;dt<xt;dt++)if(Z[ut+dt]!=vt.charCodeAt(dt))return!0;return!1}(ct,Bt,"RIFF",4)){var K,tt;for(w(ct,Bt+=4),Bt+=8;Bt<ct.length;){var _t=y(ct,Bt),G=w(ct,Bt+=4);Bt+=4;var j=G+(1&G);switch(_t){case"VP8 ":case"VP8L":Yt.frames[$]===void 0&&(Yt.frames[$]={}),(D=Yt.frames[$]).src_off=J?nt:Bt-8,D.src_size=I+G+8,$++,J&&(J=!1,I=0,nt=0);break;case"VP8X":(D=Yt.header={}).feature_flags=ct[Bt];var X=Bt+4;D.canvas_width=1+b(ct,X),X+=3,D.canvas_height=1+b(ct,X),X+=3;break;case"ALPH":J=!0,I=j+8,nt=Bt-8;break;case"ANIM":(D=Yt.header).bgcolor=w(ct,Bt),X=Bt+4,D.loop_count=(K=ct)[(tt=X)+0]<<0|K[tt+1]<<8,X+=2;break;case"ANMF":var Rt,D;(D=Yt.frames[$]={}).offset_x=2*b(ct,Bt),Bt+=3,D.offset_y=2*b(ct,Bt),Bt+=3,D.width=1+b(ct,Bt),Bt+=3,D.height=1+b(ct,Bt),Bt+=3,D.duration=b(ct,Bt),Bt+=3,Rt=ct[Bt++],D.dispose=1&Rt,D.blend=Rt>>1&1}_t!="ANMF"&&(Bt+=j)}return Yt}}(q,0);F.response=q,F.rgbaoutput=!0,F.dataurl=!1;var V=F.header?F.header:null,Y=F.frames?F.frames:null;if(V){V.loop_counter=V.loop_count,E=[V.canvas_height],C=[V.canvas_width];for(var Ct=0;Ct<Y.length&&Y[Ct].blend!=0;Ct++);}var kt=Y[0],wt=O.WebPDecodeRGBA(q,kt.src_off,kt.src_size,C,E);kt.rgba=wt,kt.imgwidth=C[0],kt.imgheight=E[0];for(var et=0;et<C[0]*E[0]*4;et++)R[et]=wt[et];return this.width=C,this.height=E,this.data=R,this}(function(t){var e=function(){return typeof Jf=="function"},n=function(E,C,R,O){var q=4,F=c;switch(O){case t.image_compression.FAST:q=1,F=l;break;case t.image_compression.MEDIUM:q=6,F=d;break;case t.image_compression.SLOW:q=9,F=m}E=r(E,C,R,F);var V=Jf(E,{level:q});return t.__addimage__.arrayBufferToBinaryString(V)},r=function(E,C,R,O){for(var q,F,V,Y=E.length/C,Ct=new Uint8Array(E.length+Y),kt=b(),wt=0;wt<Y;wt+=1){if(V=wt*C,q=E.subarray(V,V+C),O)Ct.set(O(q,R,F),V+wt);else{for(var et,ct=kt.length,Bt=[];et<ct;et+=1)Bt[et]=kt[et](q,R,F);var Yt=w(Bt.concat());Ct.set(Bt[Yt],V+wt)}F=q}return Ct},o=function(E){var C=Array.apply([],E);return C.unshift(0),C},l=function(E,C){var R,O=[],q=E.length;O[0]=1;for(var F=0;F<q;F+=1)R=E[F-C]||0,O[F+1]=E[F]-R+256&255;return O},c=function(E,C,R){var O,q=[],F=E.length;q[0]=2;for(var V=0;V<F;V+=1)O=R&&R[V]||0,q[V+1]=E[V]-O+256&255;return q},d=function(E,C,R){var O,q,F=[],V=E.length;F[0]=3;for(var Y=0;Y<V;Y+=1)O=E[Y-C]||0,q=R&&R[Y]||0,F[Y+1]=E[Y]+256-(O+q>>>1)&255;return F},m=function(E,C,R){var O,q,F,V,Y=[],Ct=E.length;Y[0]=4;for(var kt=0;kt<Ct;kt+=1)O=E[kt-C]||0,q=R&&R[kt]||0,F=R&&R[kt-C]||0,V=y(O,q,F),Y[kt+1]=E[kt]-V+256&255;return Y},y=function(E,C,R){if(E===C&&C===R)return E;var O=Math.abs(C-R),q=Math.abs(E-R),F=Math.abs(E+C-R-R);return O<=q&&O<=F?E:q<=F?C:R},b=function(){return[o,l,c,d,m]},w=function(E){var C=E.map(function(R){return R.reduce(function(O,q){return O+Math.abs(q)},0)});return C.indexOf(Math.min.apply(null,C))};t.processPNG=function(E,C,R,O){var q,F,V,Y,Ct,kt,wt,et,ct,Bt,Yt,$,J,I,nt,K=this.decode.FLATE_DECODE,tt="";if(this.__addimage__.isArrayBuffer(E)&&(E=new Uint8Array(E)),this.__addimage__.isArrayBufferView(E)){if(E=(V=new Ix(E)).imgData,F=V.bits,q=V.colorSpace,Ct=V.colors,[4,6].indexOf(V.colorType)!==-1){if(V.bits===8){ct=(et=V.pixelBitlength==32?new Uint32Array(V.decodePixels().buffer):V.pixelBitlength==16?new Uint16Array(V.decodePixels().buffer):new Uint8Array(V.decodePixels().buffer)).length,Yt=new Uint8Array(ct*V.colors),Bt=new Uint8Array(ct);var _t,G=V.pixelBitlength-V.bits;for(I=0,nt=0;I<ct;I++){for(J=et[I],_t=0;_t<G;)Yt[nt++]=J>>>_t&255,_t+=V.bits;Bt[I]=J>>>_t&255}}if(V.bits===16){ct=(et=new Uint32Array(V.decodePixels().buffer)).length,Yt=new Uint8Array(ct*(32/V.pixelBitlength)*V.colors),Bt=new Uint8Array(ct*(32/V.pixelBitlength)),$=V.colors>1,I=0,nt=0;for(var j=0;I<ct;)J=et[I++],Yt[nt++]=J>>>0&255,$&&(Yt[nt++]=J>>>16&255,J=et[I++],Yt[nt++]=J>>>0&255),Bt[j++]=J>>>16&255;F=8}O!==t.image_compression.NONE&&e()?(E=n(Yt,V.width*V.colors,V.colors,O),wt=n(Bt,V.width,1,O)):(E=Yt,wt=Bt,K=void 0)}if(V.colorType===3&&(q=this.color_spaces.INDEXED,kt=V.palette,V.transparency.indexed)){var X=V.transparency.indexed,Rt=0;for(I=0,ct=X.length;I<ct;++I)Rt+=X[I];if((Rt/=255)===ct-1&&X.indexOf(0)!==-1)Y=[X.indexOf(0)];else if(Rt!==ct){for(et=V.decodePixels(),Bt=new Uint8Array(et.length),I=0,ct=et.length;I<ct;I++)Bt[I]=X[et[I]];wt=n(Bt,V.width,1)}}var D=function(Z){var ut;switch(Z){case t.image_compression.FAST:ut=11;break;case t.image_compression.MEDIUM:ut=13;break;case t.image_compression.SLOW:ut=14;break;default:ut=12}return ut}(O);return K===this.decode.FLATE_DECODE&&(tt="/Predictor "+D+" "),tt+="/Colors "+Ct+" /BitsPerComponent "+F+" /Columns "+V.width,(this.__addimage__.isArrayBuffer(E)||this.__addimage__.isArrayBufferView(E))&&(E=this.__addimage__.arrayBufferToBinaryString(E)),(wt&&this.__addimage__.isArrayBuffer(wt)||this.__addimage__.isArrayBufferView(wt))&&(wt=this.__addimage__.arrayBufferToBinaryString(wt)),{alias:R,data:E,index:C,filter:K,decodeParameters:tt,transparency:Y,palette:kt,sMask:wt,predictor:D,width:V.width,height:V.height,bitsPerComponent:F,colorSpace:q}}}})(gn.API),function(t){t.processGIF89A=function(e,n,r,o){var l=new Rx(e),c=l.width,d=l.height,m=[];l.decodeAndBlitFrameRGBA(0,m);var y={data:m,width:c,height:d},b=new bf(100).encode(y,100);return t.processJPEG.call(this,b,n,r,o)},t.processGIF87A=t.processGIF89A}(gn.API),Do.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:o,green:r,blue:n,quad:l}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Do.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){ai.log("bit decode error:"+n)}},Do.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,o=0;o<e;o++)for(var l=this.datav.getUint8(this.pos++,!0),c=r*this.width*4+8*o*4,d=0;d<8&&8*o+d<this.width;d++){var m=this.palette[l>>7-d&1];this.data[c+4*d]=m.blue,this.data[c+4*d+1]=m.green,this.data[c+4*d+2]=m.red,this.data[c+4*d+3]=255}n!==0&&(this.pos+=4-n)}},Do.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,o=0;o<t;o++){var l=this.datav.getUint8(this.pos++,!0),c=r*this.width*4+2*o*4,d=l>>4,m=15&l,y=this.palette[d];if(this.data[c]=y.blue,this.data[c+1]=y.green,this.data[c+2]=y.red,this.data[c+3]=255,2*o+1>=this.width)break;y=this.palette[m],this.data[c+4]=y.blue,this.data[c+4+1]=y.green,this.data[c+4+2]=y.red,this.data[c+4+3]=255}e!==0&&(this.pos+=4-e)}},Do.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var o=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+4*r;if(o<this.palette.length){var c=this.palette[o];this.data[l]=c.red,this.data[l+1]=c.green,this.data[l+2]=c.blue,this.data[l+3]=255}else this.data[l]=255,this.data[l+1]=255,this.data[l+2]=255,this.data[l+3]=255}t!==0&&(this.pos+=4-t)}},Do.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(l&e)/e*255|0,d=(l>>5&e)/e*255|0,m=(l>>10&e)/e*255|0,y=l>>15?255:0,b=r*this.width*4+4*o;this.data[b]=m,this.data[b+1]=d,this.data[b+2]=c,this.data[b+3]=y}this.pos+=t}},Do.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var o=this.bottom_up?r:this.height-1-r,l=0;l<this.width;l++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var d=(c&e)/e*255|0,m=(c>>5&n)/n*255|0,y=(c>>11)/e*255|0,b=o*this.width*4+4*l;this.data[b]=y,this.data[b+1]=m,this.data[b+2]=d,this.data[b+3]=255}this.pos+=t}},Do.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*n;this.data[c]=l,this.data[c+1]=o,this.data[c+2]=r,this.data[c+3]=255}this.pos+=this.width%4}},Do.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),d=e*this.width*4+4*n;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=r,this.data[d+3]=c}},Do.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,o){var l=new Do(e,!1),c=l.width,d=l.height,m={data:l.getData(),width:c,height:d},y=new bf(100).encode(m,100);return t.processJPEG.call(this,y,n,r,o)}}(gn.API),F0.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,o){var l=new F0(e),c=l.width,d=l.height,m={data:l.getData(),width:c,height:d},y=new bf(100).encode(m,100);return t.processJPEG.call(this,y,n,r,o)}}(gn.API),gn.API.processRGBA=function(t,e,n){for(var r=t.data,o=r.length,l=new Uint8Array(o/4*3),c=new Uint8Array(o/4),d=0,m=0,y=0;y<o;y+=4){var b=r[y],w=r[y+1],E=r[y+2],C=r[y+3];l[d++]=b,l[d++]=w,l[d++]=E,c[m++]=C}var R=this.__addimage__.arrayBufferToBinaryString(l);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:R,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},gn.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},iu=gn.API,Tc=iu.getCharWidthsArray=function(t,e){var n,r,o=(e=e||{}).font||this.internal.getFont(),l=e.fontSize||this.internal.getFontSize(),c=e.charSpace||this.internal.getCharSpace(),d=e.widths?e.widths:o.metadata.Unicode.widths,m=d.fof?d.fof:1,y=e.kerning?e.kerning:o.metadata.Unicode.kerning,b=y.fof?y.fof:1,w=e.doKerning!==!1,E=0,C=t.length,R=0,O=d[0]||m,q=[];for(n=0;n<C;n++)r=t.charCodeAt(n),typeof o.metadata.widthOfString=="function"?q.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(r))+c*(1e3/l)||0)/1e3):(E=w&&oi(y[r])==="object"&&!isNaN(parseInt(y[r][R],10))?y[r][R]/b:0,q.push((d[r]||O)/m+E)),R=r;return q},D0=iu.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),o=e.charSpace||this.internal.getCharSpace();return iu.processArabic&&(t=iu.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,o)/n:Tc.apply(this,arguments).reduce(function(l,c){return l+c},0)},O0=function(t,e,n,r){for(var o=[],l=0,c=t.length,d=0;l!==c&&d+e[l]<n;)d+=e[l],l++;o.push(t.slice(0,l));var m=l;for(d=0;l!==c;)d+e[l]>r&&(o.push(t.slice(m,l)),d=0,m=l),d+=e[l],l++;return m!==l&&o.push(t.slice(m,l)),o},I0=function(t,e,n){n||(n={});var r,o,l,c,d,m,y,b=[],w=[b],E=n.textIndent||0,C=0,R=0,O=t.split(" "),q=Tc.apply(this,[" ",n])[0];if(m=n.lineIndent===-1?O[0].length+2:n.lineIndent||0){var F=Array(m).join(" "),V=[];O.map(function(Ct){(Ct=Ct.split(/\s*\n/)).length>1?V=V.concat(Ct.map(function(kt,wt){return(wt&&kt.length?`
`:"")+kt})):V.push(Ct[0])}),O=V,m=D0.apply(this,[F,n])}for(l=0,c=O.length;l<c;l++){var Y=0;if(r=O[l],m&&r[0]==`
`&&(r=r.substr(1),Y=1),E+C+(R=(o=Tc.apply(this,[r,n])).reduce(function(Ct,kt){return Ct+kt},0))>e||Y){if(R>e){for(d=O0.apply(this,[r,o,e-(E+C),e]),b.push(d.shift()),b=[d.pop()];d.length;)w.push([d.shift()]);R=o.slice(r.length-(b[0]?b[0].length:0)).reduce(function(Ct,kt){return Ct+kt},0)}else b=[r];w.push(b),E=R+m,C=q}else b.push(r),E+=C+R,C=q}return y=m?function(Ct,kt){return(kt?F:"")+Ct.join(" ")}:function(Ct){return Ct.join(" ")},w.map(y)},iu.splitTextToSize=function(t,e,n){var r,o=(n=n||{}).fontSize||this.internal.getFontSize(),l=(function(b){if(b.widths&&b.kerning)return{widths:b.widths,kerning:b.kerning};var w=this.internal.getFont(b.fontName,b.fontStyle);return w.metadata.Unicode?{widths:w.metadata.Unicode.widths||{0:1},kerning:w.metadata.Unicode.kerning||{}}:{font:w.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var c=1*this.internal.scaleFactor*e/o;l.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/o:0,l.lineIndent=n.lineIndent;var d,m,y=[];for(d=0,m=r.length;d<m;d++)y=y.concat(I0.apply(this,[r[d],c,l]));return y},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},o=0;o<e.length;o++)n[e[o]]="0123456789abcdef"[o],r["0123456789abcdef"[o]]=e[o];var l=function(w){return"0x"+parseInt(w,10).toString(16)},c=t.__fontmetrics__.compress=function(w){var E,C,R,O,q=["{"];for(var F in w){if(E=w[F],isNaN(parseInt(F,10))?C="'"+F+"'":(F=parseInt(F,10),C=(C=l(F).slice(2)).slice(0,-1)+r[C.slice(-1)]),typeof E=="number")E<0?(R=l(E).slice(3),O="-"):(R=l(E).slice(2),O=""),R=O+R.slice(0,-1)+r[R.slice(-1)];else{if(oi(E)!=="object")throw new Error("Don't know what to do with value type "+oi(E)+".");R=c(E)}q.push(C+R)}return q.push("}"),q.join("")},d=t.__fontmetrics__.uncompress=function(w){if(typeof w!="string")throw new Error("Invalid argument passed to uncompress.");for(var E,C,R,O,q={},F=1,V=q,Y=[],Ct="",kt="",wt=w.length-1,et=1;et<wt;et+=1)(O=w[et])=="'"?E?(R=E.join(""),E=void 0):E=[]:E?E.push(O):O=="{"?(Y.push([V,R]),V={},R=void 0):O=="}"?((C=Y.pop())[0][C[1]]=V,R=void 0,V=C[0]):O=="-"?F=-1:R===void 0?n.hasOwnProperty(O)?(Ct+=n[O],R=parseInt(Ct,16)*F,F=1,Ct=""):Ct+=O:n.hasOwnProperty(O)?(kt+=n[O],V[R]=parseInt(kt,16)*F,F=1,R=void 0,kt=""):kt+=O;return q},m={codePages:["WinAnsiEncoding"],WinAnsiEncoding:d("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},y={Unicode:{Courier:m,"Courier-Bold":m,"Courier-BoldOblique":m,"Courier-Oblique":m,Helvetica:m,"Helvetica-Bold":m,"Helvetica-BoldOblique":m,"Helvetica-Oblique":m,"Times-Roman":m,"Times-Bold":m,"Times-BoldItalic":m,"Times-Italic":m}},b={Unicode:{"Courier-Oblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":d("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":d("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:d("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:d("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":d("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":d("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(w){var E=w.font,C=b.Unicode[E.postScriptName];C&&(E.metadata.Unicode={},E.metadata.Unicode.widths=C.widths,E.metadata.Unicode.kerning=C.kerning);var R=y.Unicode[E.postScriptName];R&&(E.metadata.Unicode.encoding=R,E.encoding=R.codePages[0])}])}(gn.API),function(t){var e=function(n){for(var r=n.length,o=new Uint8Array(r),l=0;l<r;l++)o[l]=n.charCodeAt(l);return o};t.API.events.push(["addFont",function(n){var r=void 0,o=n.font,l=n.instance;if(!o.isStandardFont){if(l===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(r=l.existsFileInVFS(o.postScriptName)===!1?l.loadFile(o.postScriptName):l.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(c,d){d=/^\x00\x01\x00\x00/.test(d)?e(d):e(Yu(d)),c.metadata=t.API.TTFFont.open(d),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(o,r)}}])}(gn),function(t){function e(){return(vn.canvg?Promise.resolve(vn.canvg):Ol(()=>import("./index.es.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}gn.API.addSvgAsImage=function(n,r,o,l,c,d,m,y){if(isNaN(r)||isNaN(o))throw ai.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(l)||isNaN(c))throw ai.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var b=document.createElement("canvas");b.width=l,b.height=c;var w=b.getContext("2d");w.fillStyle="#fff",w.fillRect(0,0,b.width,b.height);var E={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},C=this;return e().then(function(R){return R.fromString(w,n,E)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(R){return R.render(E)}).then(function(){C.addImage(b.toDataURL("image/jpeg",1),r,o,l,c,m,y)})}}(),gn.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var o=0;o<this.internal.pages[r].length;o++)this.internal.pages[r][o]=this.internal.pages[r][o].replace(e,n);return this},gn.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,o,l,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},d=Object.keys(c),m=[],y=0,b=0,w=0;function E(R,O){var q,F=!1;for(q=0;q<R.length;q+=1)R[q]===O&&(F=!0);return F}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var C=d.length;for(w=0;w<C;w+=1)n[d[w]].value=n[d[w]].defaultValue,n[d[w]].explicitSet=!1}if(oi(t)==="object"){for(o in t)if(l=t[o],E(d,o)&&l!==void 0){if(n[o].type==="boolean"&&typeof l=="boolean")n[o].value=l;else if(n[o].type==="name"&&E(n[o].valueSet,l))n[o].value=l;else if(n[o].type==="integer"&&Number.isInteger(l))n[o].value=l;else if(n[o].type==="array"){for(y=0;y<l.length;y+=1)if(r=!0,l[y].length===1&&typeof l[y][0]=="number")m.push(String(l[y]-1));else if(l[y].length>1){for(b=0;b<l[y].length;b+=1)typeof l[y][b]!="number"&&(r=!1);r===!0&&m.push([l[y][0]-1,l[y][1]-1].join(" "))}n[o].value="["+m.join(" ")+"]"}else n[o].value=n[o].defaultValue;n[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var R,O=[];for(R in n)n[R].explicitSet===!0&&(n[R].type==="name"?O.push("/"+R+" /"+n[R].value):O.push("/"+R+" "+n[R].value));O.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+O.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),l=unescape(encodeURIComponent(r)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),d=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),m=unescape(encodeURIComponent("</x:xmpmeta>")),y=l.length+c.length+d.length+o.length+m.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+y+" >>"),this.internal.write("stream"),this.internal.write(o+l+c+d+m),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(gn.API),function(t){var e=t.API,n=e.pdfEscape16=function(l,c){for(var d,m=c.metadata.Unicode.widths,y=["","0","00","000","0000"],b=[""],w=0,E=l.length;w<E;++w){if(d=c.metadata.characterToGlyph(l.charCodeAt(w)),c.metadata.glyIdsUsed.push(d),c.metadata.toUnicode[d]=l.charCodeAt(w),m.indexOf(d)==-1&&(m.push(d),m.push([parseInt(c.metadata.widthOfGlyph(d),10)])),d=="0")return b.join("");d=d.toString(16),b.push(y[4-d.length],d)}return b.join("")},r=function(l){var c,d,m,y,b,w,E;for(b=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,m=[],w=0,E=(d=Object.keys(l).sort(function(C,R){return C-R})).length;w<E;w++)c=d[w],m.length>=100&&(b+=`
`+m.length+` beginbfchar
`+m.join(`
`)+`
endbfchar`,m=[]),l[c]!==void 0&&l[c]!==null&&typeof l[c].toString=="function"&&(y=("0000"+l[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),m.push("<"+c+"><"+y+">"));return m.length&&(b+=`
`+m.length+` beginbfchar
`+m.join(`
`)+`
endbfchar
`),b+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(l){(function(c){var d=c.font,m=c.out,y=c.newObject,b=c.putStream;if(d.metadata instanceof t.API.TTFFont&&d.encoding==="Identity-H"){for(var w=d.metadata.Unicode.widths,E=d.metadata.subset.encode(d.metadata.glyIdsUsed,1),C="",R=0;R<E.length;R++)C+=String.fromCharCode(E[R]);var O=y();b({data:C,addLength1:!0,objectId:O}),m("endobj");var q=y();b({data:r(d.metadata.toUnicode),addLength1:!0,objectId:q}),m("endobj");var F=y();m("<<"),m("/Type /FontDescriptor"),m("/FontName /"+lu(d.fontName)),m("/FontFile2 "+O+" 0 R"),m("/FontBBox "+t.API.PDFObject.convert(d.metadata.bbox)),m("/Flags "+d.metadata.flags),m("/StemV "+d.metadata.stemV),m("/ItalicAngle "+d.metadata.italicAngle),m("/Ascent "+d.metadata.ascender),m("/Descent "+d.metadata.decender),m("/CapHeight "+d.metadata.capHeight),m(">>"),m("endobj");var V=y();m("<<"),m("/Type /Font"),m("/BaseFont /"+lu(d.fontName)),m("/FontDescriptor "+F+" 0 R"),m("/W "+t.API.PDFObject.convert(w)),m("/CIDToGIDMap /Identity"),m("/DW 1000"),m("/Subtype /CIDFontType2"),m("/CIDSystemInfo"),m("<<"),m("/Supplement 0"),m("/Registry (Adobe)"),m("/Ordering ("+d.encoding+")"),m(">>"),m(">>"),m("endobj"),d.objectNumber=y(),m("<<"),m("/Type /Font"),m("/Subtype /Type0"),m("/ToUnicode "+q+" 0 R"),m("/BaseFont /"+lu(d.fontName)),m("/Encoding /"+d.encoding),m("/DescendantFonts ["+V+" 0 R]"),m(">>"),m("endobj"),d.isAlreadyPutted=!0}})(l)}]),e.events.push(["putFont",function(l){(function(c){var d=c.font,m=c.out,y=c.newObject,b=c.putStream;if(d.metadata instanceof t.API.TTFFont&&d.encoding==="WinAnsiEncoding"){for(var w=d.metadata.rawData,E="",C=0;C<w.length;C++)E+=String.fromCharCode(w[C]);var R=y();b({data:E,addLength1:!0,objectId:R}),m("endobj");var O=y();b({data:r(d.metadata.toUnicode),addLength1:!0,objectId:O}),m("endobj");var q=y();m("<<"),m("/Descent "+d.metadata.decender),m("/CapHeight "+d.metadata.capHeight),m("/StemV "+d.metadata.stemV),m("/Type /FontDescriptor"),m("/FontFile2 "+R+" 0 R"),m("/Flags 96"),m("/FontBBox "+t.API.PDFObject.convert(d.metadata.bbox)),m("/FontName /"+lu(d.fontName)),m("/ItalicAngle "+d.metadata.italicAngle),m("/Ascent "+d.metadata.ascender),m(">>"),m("endobj"),d.objectNumber=y();for(var F=0;F<d.metadata.hmtx.widths.length;F++)d.metadata.hmtx.widths[F]=parseInt(d.metadata.hmtx.widths[F]*(1e3/d.metadata.head.unitsPerEm));m("<</Subtype/TrueType/Type/Font/ToUnicode "+O+" 0 R/BaseFont/"+lu(d.fontName)+"/FontDescriptor "+q+" 0 R/Encoding/"+d.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(d.metadata.hmtx.widths)+">>"),m("endobj"),d.isAlreadyPutted=!0}})(l)}]);var o=function(l){var c,d=l.text||"",m=l.x,y=l.y,b=l.options||{},w=l.mutex||{},E=w.pdfEscape,C=w.activeFontKey,R=w.fonts,O=C,q="",F=0,V="",Y=R[O].encoding;if(R[O].encoding!=="Identity-H")return{text:d,x:m,y,options:b,mutex:w};for(V=d,O=C,Array.isArray(d)&&(V=d[0]),F=0;F<V.length;F+=1)R[O].metadata.hasOwnProperty("cmap")&&(c=R[O].metadata.cmap.unicode.codeMap[V[F].charCodeAt(0)]),c||V[F].charCodeAt(0)<256&&R[O].metadata.hasOwnProperty("Unicode")?q+=V[F]:q+="";var Ct="";return parseInt(O.slice(1))<14||Y==="WinAnsiEncoding"?Ct=E(q,O).split("").map(function(kt){return kt.charCodeAt(0).toString(16)}).join(""):Y==="Identity-H"&&(Ct=n(q,R[O])),w.isHex=!0,{text:Ct,x:m,y,options:b,mutex:w}};e.events.push(["postProcessText",function(l){var c=l.text||"",d=[],m={text:c,x:l.x,y:l.y,options:l.options,mutex:l.mutex};if(Array.isArray(c)){var y=0;for(y=0;y<c.length;y+=1)Array.isArray(c[y])&&c[y].length===3?d.push([o(Object.assign({},m,{text:c[y][0]})).text,c[y][1],c[y][2]]):d.push(o(Object.assign({},m,{text:c[y]})).text);l.text=d}else l.text=o(Object.assign({},m,{text:c})).text}])}(gn),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(gn.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var o,l,c,d,m,y,b,w=e,E=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],C=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],R={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},O={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},q=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],F=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),V=!1,Y=0;this.__bidiEngine__={};var Ct=function($){var J=$.charCodeAt(),I=J>>8,nt=O[I];return nt!==void 0?w[256*nt+(255&J)]:I===252||I===253?"AL":F.test(I)?"L":I===8?"R":"N"},kt=function($){for(var J,I=0;I<$.length;I++){if((J=Ct($.charAt(I)))==="L")return!1;if(J==="R")return!0}return!1},wt=function($,J,I,nt){var K,tt,_t,G,j=J[nt];switch(j){case"L":case"R":V=!1;break;case"N":case"AN":break;case"EN":V&&(j="AN");break;case"AL":V=!0,j="R";break;case"WS":j="N";break;case"CS":nt<1||nt+1>=J.length||(K=I[nt-1])!=="EN"&&K!=="AN"||(tt=J[nt+1])!=="EN"&&tt!=="AN"?j="N":V&&(tt="AN"),j=tt===K?tt:"N";break;case"ES":j=(K=nt>0?I[nt-1]:"B")==="EN"&&nt+1<J.length&&J[nt+1]==="EN"?"EN":"N";break;case"ET":if(nt>0&&I[nt-1]==="EN"){j="EN";break}if(V){j="N";break}for(_t=nt+1,G=J.length;_t<G&&J[_t]==="ET";)_t++;j=_t<G&&J[_t]==="EN"?"EN":"N";break;case"NSM":if(c&&!d){for(G=J.length,_t=nt+1;_t<G&&J[_t]==="NSM";)_t++;if(_t<G){var X=$[nt],Rt=X>=1425&&X<=2303||X===64286;if(K=J[_t],Rt&&(K==="R"||K==="AL")){j="R";break}}}j=nt<1||(K=J[nt-1])==="B"?"N":I[nt-1];break;case"B":V=!1,o=!0,j=Y;break;case"S":l=!0,j="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":V=!1;break;case"BN":j="N"}return j},et=function($,J,I){var nt=$.split("");return I&&ct(nt,I,{hiLevel:Y}),nt.reverse(),J&&J.reverse(),nt.join("")},ct=function($,J,I){var nt,K,tt,_t,G,j=-1,X=$.length,Rt=0,D=[],Z=Y?C:E,ut=[];for(V=!1,o=!1,l=!1,K=0;K<X;K++)ut[K]=Ct($[K]);for(tt=0;tt<X;tt++){if(G=Rt,D[tt]=wt($,ut,D,tt),nt=240&(Rt=Z[G][R[D[tt]]]),Rt&=15,J[tt]=_t=Z[Rt][5],nt>0)if(nt===16){for(K=j;K<tt;K++)J[K]=1;j=-1}else j=-1;if(Z[Rt][6])j===-1&&(j=tt);else if(j>-1){for(K=j;K<tt;K++)J[K]=_t;j=-1}ut[tt]==="B"&&(J[tt]=0),I.hiLevel|=_t}l&&function(vt,xt,dt){for(var St=0;St<dt;St++)if(vt[St]==="S"){xt[St]=Y;for(var Mt=St-1;Mt>=0&&vt[Mt]==="WS";Mt--)xt[Mt]=Y}}(ut,J,X)},Bt=function($,J,I,nt,K){if(!(K.hiLevel<$)){if($===1&&Y===1&&!o)return J.reverse(),void(I&&I.reverse());for(var tt,_t,G,j,X=J.length,Rt=0;Rt<X;){if(nt[Rt]>=$){for(G=Rt+1;G<X&&nt[G]>=$;)G++;for(j=Rt,_t=G-1;j<_t;j++,_t--)tt=J[j],J[j]=J[_t],J[_t]=tt,I&&(tt=I[j],I[j]=I[_t],I[_t]=tt);Rt=G}Rt++}}},Yt=function($,J,I){var nt=$.split(""),K={hiLevel:Y};return I||(I=[]),ct(nt,I,K),function(tt,_t,G){if(G.hiLevel!==0&&b)for(var j,X=0;X<tt.length;X++)_t[X]===1&&(j=q.indexOf(tt[X]))>=0&&(tt[X]=q[j+1])}(nt,I,K),Bt(2,nt,J,I,K),Bt(1,nt,J,I,K),nt.join("")};return this.__bidiEngine__.doBidiReorder=function($,J,I){if(function(K,tt){if(tt)for(var _t=0;_t<K.length;_t++)tt[_t]=_t;d===void 0&&(d=kt(K)),y===void 0&&(y=kt(K))}($,J),c||!m||y)if(c&&m&&d^y)Y=d?1:0,$=et($,J,I);else if(!c&&m&&y)Y=d?1:0,$=Yt($,J,I),$=et($,J);else if(!c||d||m||y){if(c&&!m&&d^y)$=et($,J),d?(Y=0,$=Yt($,J,I)):(Y=1,$=Yt($,J,I),$=et($,J));else if(c&&d&&!m&&y)Y=1,$=Yt($,J,I),$=et($,J);else if(!c&&!m&&d^y){var nt=b;d?(Y=1,$=Yt($,J,I),Y=0,b=!1,$=Yt($,J,I),b=nt):(Y=0,$=Yt($,J,I),$=et($,J),Y=1,b=!1,$=Yt($,J,I),b=nt,$=et($,J))}}else Y=0,$=Yt($,J,I);else Y=d?1:0,$=Yt($,J,I);return $},this.__bidiEngine__.setOptions=function($){$&&(c=$.isInputVisual,m=$.isOutputVisual,d=$.isInputRtl,y=$.isOutputRtl,b=$.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var o=r.text,l=(r.x,r.y,r.options||{}),c=(r.mutex,l.lang,[]);if(l.isInputVisual=typeof l.isInputVisual!="boolean"||l.isInputVisual,n.setOptions(l),Object.prototype.toString.call(o)==="[object Array]"){var d=0;for(c=[],d=0;d<o.length;d+=1)Object.prototype.toString.call(o[d])==="[object Array]"?c.push([n.doBidiReorder(o[d][0]),o[d][1],o[d][2]]):c.push([n.doBidiReorder(o[d])]);r.text=c}else r.text=n.doBidiReorder(o);n.setOptions({isInputVisual:!0})}])}(gn),gn.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new pl(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new Xx(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new Fx(this.contents),this.head=new zx(this),this.name=new Vx(this),this.cmap=new g1(this),this.toUnicode={},this.hhea=new Ux(this),this.maxp=new Hx(this),this.hmtx=new Wx(this),this.post=new $x(this),this.os2=new qx(this),this.loca=new Jx(this),this.glyf=new Zx(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,o,l;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var c,d,m,y;for(y=[],c=0,d=(m=this.bbox).length;c<d;c++)e=m[c],y.push(Math.round(e*this.scaleFactor));return y}).call(this),this.stemV=0,this.post.exists?(r=255&(o=this.post.italic_angle),32768&(n=o>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(l=this.familyClass)===1||l===2||l===3||l===4||l===5||l===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var o,l,c,d;for(c=0,l=0,d=(e=""+e).length;0<=d?l<d:l>d;l=0<=d?++l:--l)o=e.charCodeAt(l),c+=this.widthOfGlyph(this.characterToGlyph(o))+r*(1e3/n)||0;return c*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var zo,pl=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,o;for(o=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)o.push(this.writeByte(e.charCodeAt(n)));return o},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,o,l,c,d,m;return e=this.readByte(),n=this.readByte(),r=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),d=this.readByte(),m=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^o)+16777216*(255^l)+65536*(255^c)+256*(255^d)+(255^m)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*o+16777216*l+65536*c+256*d+m},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,o,l;for(l=[],r=0,o=e.length;r<o;r++)n=e[r],l.push(this.writeByte(n));return l},t}(),Fx=function(){var t;function e(n){var r,o,l;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},o=0,l=this.tableCount;0<=l?o<l:o>l;o=0<=l?++o:--o)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,o,l,c,d,m,y,b,w,E,C,R,O;for(O in C=Object.keys(n).length,m=Math.log(2),w=16*Math.floor(Math.log(C)/m),c=Math.floor(w/m),b=16*C-w,(o=new pl).writeInt(this.scalarType),o.writeShort(C),o.writeShort(w),o.writeShort(c),o.writeShort(b),l=16*C,y=o.pos+l,d=null,R=[],n)for(E=n[O],o.writeString(O),o.writeInt(t(E)),o.writeInt(y),o.writeInt(E.length),R=R.concat(E),O==="head"&&(d=y),y+=E.length;y%4;)R.push(0),y++;return o.write(R),r=2981146554-t(o.data),o.pos=d+8,o.writeUInt32(r),o.data},t=function(n){var r,o,l,c;for(n=_1.call(n);n.length%4;)n.push(0);for(l=new pl(n),o=0,r=0,c=n.length;r<c;r=r+=4)o+=l.readUInt32();return 4294967295&o},e}(),jx={}.hasOwnProperty,da=function(t,e){for(var n in e)jx.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};zo=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var zx=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return da(e,zo),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new pl).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),j0=function(){function t(e,n){var r,o,l,c,d,m,y,b,w,E,C,R,O,q,F,V,Y;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),w=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(m=0;m<256;++m)this.codeMap[m]=e.readByte();break;case 4:for(C=e.readUInt16(),E=C/2,e.pos+=6,l=function(){var Ct,kt;for(kt=[],m=Ct=0;0<=E?Ct<E:Ct>E;m=0<=E?++Ct:--Ct)kt.push(e.readUInt16());return kt}(),e.pos+=2,O=function(){var Ct,kt;for(kt=[],m=Ct=0;0<=E?Ct<E:Ct>E;m=0<=E?++Ct:--Ct)kt.push(e.readUInt16());return kt}(),y=function(){var Ct,kt;for(kt=[],m=Ct=0;0<=E?Ct<E:Ct>E;m=0<=E?++Ct:--Ct)kt.push(e.readUInt16());return kt}(),b=function(){var Ct,kt;for(kt=[],m=Ct=0;0<=E?Ct<E:Ct>E;m=0<=E?++Ct:--Ct)kt.push(e.readUInt16());return kt}(),o=(this.length-e.pos+this.offset)/2,d=function(){var Ct,kt;for(kt=[],m=Ct=0;0<=o?Ct<o:Ct>o;m=0<=o?++Ct:--Ct)kt.push(e.readUInt16());return kt}(),m=F=0,Y=l.length;F<Y;m=++F)for(q=l[m],r=V=R=O[m];R<=q?V<=q:V>=q;r=R<=q?++V:--V)b[m]===0?c=r+y[m]:(c=d[b[m]/2+(r-R)-(E-m)]||0)!==0&&(c+=y[m]),this.codeMap[r]=65535&c}e.pos=w}return t.encode=function(e,n){var r,o,l,c,d,m,y,b,w,E,C,R,O,q,F,V,Y,Ct,kt,wt,et,ct,Bt,Yt,$,J,I,nt,K,tt,_t,G,j,X,Rt,D,Z,ut,vt,xt,dt,St,Mt,Kt,re,it;switch(nt=new pl,c=Object.keys(e).sort(function(ht,It){return ht-It}),n){case"macroman":for(O=0,q=function(){var ht=[];for(R=0;R<256;++R)ht.push(0);return ht}(),V={0:0},l={},K=0,j=c.length;K<j;K++)V[Mt=e[o=c[K]]]==null&&(V[Mt]=++O),l[o]={old:e[o],new:V[e[o]]},q[o]=V[e[o]];return nt.writeUInt16(1),nt.writeUInt16(0),nt.writeUInt32(12),nt.writeUInt16(0),nt.writeUInt16(262),nt.writeUInt16(0),nt.write(q),{charMap:l,subtable:nt.data,maxGlyphID:O+1};case"unicode":for(J=[],w=[],Y=0,V={},r={},F=y=null,tt=0,X=c.length;tt<X;tt++)V[kt=e[o=c[tt]]]==null&&(V[kt]=++Y),r[o]={old:kt,new:V[kt]},d=V[kt]-o,F!=null&&d===y||(F&&w.push(F),J.push(o),y=d),F=o;for(F&&w.push(F),w.push(65535),J.push(65535),Yt=2*(Bt=J.length),ct=2*Math.pow(Math.log(Bt)/Math.LN2,2),E=Math.log(ct/2)/Math.LN2,et=2*Bt-ct,m=[],wt=[],C=[],R=_t=0,Rt=J.length;_t<Rt;R=++_t){if($=J[R],b=w[R],$===65535){m.push(0),wt.push(0);break}if($-(I=r[$].new)>=32768)for(m.push(0),wt.push(2*(C.length+Bt-R)),o=G=$;$<=b?G<=b:G>=b;o=$<=b?++G:--G)C.push(r[o].new);else m.push(I-$),wt.push(0)}for(nt.writeUInt16(3),nt.writeUInt16(1),nt.writeUInt32(12),nt.writeUInt16(4),nt.writeUInt16(16+8*Bt+2*C.length),nt.writeUInt16(0),nt.writeUInt16(Yt),nt.writeUInt16(ct),nt.writeUInt16(E),nt.writeUInt16(et),dt=0,D=w.length;dt<D;dt++)o=w[dt],nt.writeUInt16(o);for(nt.writeUInt16(0),St=0,Z=J.length;St<Z;St++)o=J[St],nt.writeUInt16(o);for(Kt=0,ut=m.length;Kt<ut;Kt++)d=m[Kt],nt.writeUInt16(d);for(re=0,vt=wt.length;re<vt;re++)Ct=wt[re],nt.writeUInt16(Ct);for(it=0,xt=C.length;it<xt;it++)O=C[it],nt.writeUInt16(O);return{charMap:r,subtable:nt.data,maxGlyphID:Y+1}}},t}(),g1=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return da(e,zo),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,o,l;for(n.pos=this.offset,this.version=n.readUInt16(),l=n.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=l?o<l:o>l;o=0<=l?++o:--o)r=new j0(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var o,l;return r==null&&(r="macroman"),o=j0.encode(n,r),(l=new pl).writeUInt16(0),l.writeUInt16(1),o.table=l.data.concat(o.subtable),o},e}(),Ux=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return da(e,zo),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),qx=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return da(e,zo),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,o;for(o=[],r=0;r<10;++r)o.push(n.readByte());return o}(),this.charRange=function(){var r,o;for(o=[],r=0;r<4;++r)o.push(n.readInt());return o}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,o;for(o=[],r=0;r<2;r=++r)o.push(n.readInt());return o}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),$x=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return da(e,zo),e.prototype.tag="post",e.prototype.parse=function(n){var r,o,l;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var c;for(o=n.readUInt16(),this.glyphNameIndex=[],c=0;0<=o?c<o:c>o;c=0<=o?++c:--c)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],l=[];n.pos<this.offset+this.length;)r=n.readByte(),l.push(this.names.push(n.readString(r)));return l;case 151552:return o=n.readUInt16(),this.offsets=n.read(o);case 196608:break;case 262144:return this.map=(function(){var d,m,y;for(y=[],c=d=0,m=this.file.maxp.numGlyphs;0<=m?d<m:d>m;c=0<=m?++d:--d)y.push(n.readUInt32());return y}).call(this)}},e}(),Gx=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Vx=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return da(e,zo),e.prototype.tag="name",e.prototype.parse=function(n){var r,o,l,c,d,m,y,b,w,E,C;for(n.pos=this.offset,n.readShort(),r=n.readShort(),m=n.readShort(),o=[],c=0;0<=r?c<r:c>r;c=0<=r?++c:--c)o.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+m+n.readShort()});for(y={},c=w=0,E=o.length;w<E;c=++w)l=o[c],n.pos=l.offset,b=n.readString(l.length),d=new Gx(b,l),y[C=l.nameID]==null&&(y[C]=[]),y[l.nameID].push(d);this.strings=y,this.copyright=y[0],this.fontFamily=y[1],this.fontSubfamily=y[2],this.uniqueSubfamily=y[3],this.fontName=y[4],this.version=y[5];try{this.postscriptName=y[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=y[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=y[7],this.manufacturer=y[8],this.designer=y[9],this.description=y[10],this.vendorUrl=y[11],this.designerUrl=y[12],this.license=y[13],this.licenseUrl=y[14],this.preferredFamily=y[15],this.preferredSubfamily=y[17],this.compatibleFull=y[18],this.sampleText=y[19]},e}(),Hx=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return da(e,zo),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),Wx=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return da(e,zo),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,o,l,c,d,m,y;for(n.pos=this.offset,this.metrics=[],r=0,m=this.file.hhea.numberOfMetrics;0<=m?r<m:r>m;r=0<=m?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(l=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var b,w;for(w=[],r=b=0;0<=l?b<l:b>l;r=0<=l?++b:--b)w.push(n.readInt16());return w}(),this.widths=(function(){var b,w,E,C;for(C=[],b=0,w=(E=this.metrics).length;b<w;b++)c=E[b],C.push(c.advance);return C}).call(this),o=this.widths[this.widths.length-1],y=[],r=d=0;0<=l?d<l:d>l;r=0<=l?++d:--d)y.push(this.widths.push(o));return y},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),_1=[].slice,Zx=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return da(e,zo),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,o,l,c,d,m,y,b,w,E;return n in this.cache?this.cache[n]:(c=this.file.loca,r=this.file.contents,o=c.indexOf(n),(l=c.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+o,d=(m=new pl(r.read(l))).readShort(),b=m.readShort(),E=m.readShort(),y=m.readShort(),w=m.readShort(),this.cache[n]=d===-1?new Yx(m,b,E,y,w):new Kx(m,d,b,E,y,w),this.cache[n]))},e.prototype.encode=function(n,r,o){var l,c,d,m,y;for(d=[],c=[],m=0,y=r.length;m<y;m++)l=n[r[m]],c.push(d.length),l&&(d=d.concat(l.encode(o)));return c.push(d.length),{table:d,offsets:c}},e}(),Kx=function(){function t(e,n,r,o,l,c){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=o,this.xMax=l,this.yMax=c,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Yx=function(){function t(e,n,r,o,l){var c,d;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=o,this.yMax=l,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;d=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&d;)c.pos+=1&d?4:2,128&d?c.pos+=8:64&d?c.pos+=4:8&d&&(c.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new pl(_1.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),Jx=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return da(e,zo),e.prototype.tag="loca",e.prototype.parse=function(n){var r,o;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var l,c;for(c=[],o=0,l=this.length;o<l;o+=2)c.push(2*n.readUInt16());return c}).call(this):(function(){var l,c;for(c=[],o=0,l=this.length;o<l;o+=4)c.push(n.readUInt32());return c}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var o=new Uint32Array(this.offsets.length),l=0,c=0,d=0;d<o.length;++d)if(o[d]=l,c<r.length&&r[c]==d){++c,o[d]=l;var m=this.offsets[d],y=this.offsets[d+1]-m;y>0&&(l+=y)}for(var b=new Array(4*o.length),w=0;w<o.length;++w)b[4*w+3]=255&o[w],b[4*w+2]=(65280&o[w])>>8,b[4*w+1]=(16711680&o[w])>>16,b[4*w]=(4278190080&o[w])>>24;return b},e}(),Xx=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,o,l;for(n in o=this.font.cmap.tables[0].codeMap,e={},l=this.subset)r=l[n],e[n]=o[r];return e},t.prototype.glyphsFor=function(e){var n,r,o,l,c,d,m;for(o={},c=0,d=e.length;c<d;c++)o[l=e[c]]=this.font.glyf.glyphFor(l);for(l in n=[],o)(r=o[l])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(l in m=this.glyphsFor(n))r=m[l],o[l]=r;return o},t.prototype.encode=function(e,n){var r,o,l,c,d,m,y,b,w,E,C,R,O,q,F;for(o in r=g1.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(e),C={0:0},F=r.charMap)C[(m=F[o]).old]=m.new;for(R in E=r.maxGlyphID,c)R in C||(C[R]=E++);return b=function(V){var Y,Ct;for(Y in Ct={},V)Ct[V[Y]]=Y;return Ct}(C),w=Object.keys(b).sort(function(V,Y){return V-Y}),O=function(){var V,Y,Ct;for(Ct=[],V=0,Y=w.length;V<Y;V++)d=w[V],Ct.push(b[d]);return Ct}(),l=this.font.glyf.encode(c,O,C),y=this.font.loca.encode(l.offsets,O),q={cmap:this.font.cmap.raw(),glyf:l.table,loca:y,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(q["OS/2"]=this.font.os2.raw()),this.font.directory.encode(q)},t}();gn.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,o,l,c;if(Array.isArray(n))return"["+function(){var d,m,y;for(y=[],d=0,m=n.length;d<m;d++)r=n[d],y.push(e.convert(r));return y}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(o in l=["<<"],n)c=n[o],l.push("/"+o+" "+e.convert(c));return l.push(">>"),l.join(`
`)}return""+n},e}();const Qx={class:"h-full flex"},tL={class:"flex-1 relative"},eL={key:0,class:"absolute inset-0 bg-black/30 backdrop-blur-sm z-[2000] flex items-center justify-center"},nL={key:1,class:"absolute inset-0 flex items-center justify-center bg-gray-50 z-[1000]"},iL={class:"text-center max-w-lg mx-auto p-8"},rL={class:"space-y-4"},sL={key:2,class:"absolute bottom-6 left-6 z-[1000]"},oL={class:"bg-white rounded-lg shadow-lg p-3 mb-3"},aL={class:"grid grid-cols-3 gap-2"},lL=["onClick"],uL={class:"bg-white rounded-lg shadow-lg p-3 space-y-2"},cL={class:"flex flex-col mb-2"},hL={class:"text-xl font-bold text-gray-800 mb-1"},fL={key:0,class:"text-sm text-gray-500"},dL={class:"grid grid-cols-1 gap-2"},pL=["disabled"],mL={key:0,class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},gL={key:1,class:"animate-spin h-5 w-5 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},_L={key:0,class:"text-xs text-gray-500 mt-2"},vL={key:3,class:"fixed bottom-6 right-6 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg shadow-lg z-[2000] flex items-center transform transition-all duration-300 ease-in-out",role:"alert"},yL={key:4,class:"drawing-tools-container absolute top-4 right-4 z-[1000]"},bL={key:5,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},wL={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4"},xL={class:"flex justify-between items-center mb-4"},LL={key:0,class:"space-y-4"},CL={key:0,class:"space-y-2"},kL={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},PL=["onClick"],SL={class:"font-medium text-gray-900"},EL={key:1,class:"space-y-2"},ML={class:"flex items-center mb-4"},AL={class:"text-sm text-gray-600"},BL={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},TL=["onClick"],NL={class:"font-medium text-gray-900"},DL={key:2,class:"space-y-2"},OL={class:"flex items-center mb-4"},IL={class:"text-sm text-gray-600"},RL={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},FL=["onClick"],jL={class:"font-medium text-gray-900"},zL={class:"text-sm text-gray-500"},UL={class:"text-xs text-gray-400 mt-1"},qL={key:1,class:"space-y-4"},$L={key:0,class:"space-y-2"},GL={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},VL=["onClick"],HL={class:"font-medium text-gray-900"},WL={key:1,class:"space-y-2"},ZL={class:"flex items-center mb-4"},KL={class:"text-sm text-gray-600"},YL={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},JL=["onClick"],XL={class:"font-medium text-gray-900"},QL={class:"text-sm text-gray-500"},tC={class:"text-xs text-gray-400 mt-1"},eC={key:2,class:"max-h-96 overflow-y-auto"},nC={key:0,class:"text-center py-8"},iC={key:1,class:"space-y-2"},rC=["onClick"],sC={class:"font-medium text-gray-900"},oC={class:"text-sm text-gray-500"},aC={class:"text-xs text-gray-400 mt-1"},z0=Es({__name:"MapView",setup(t){const e=Re(null),n=Bh(),r=Kg(),o=Re([]),{currentTool:l,selectedShape:c,map:d,initMap:m,setDrawingTool:y,updateShapeStyle:b,updateShapeProperties:w,featureGroup:E,adjustView:C,clearActiveControlPoints:R}=Fw(),{initMap:O,baseMaps:q,currentBaseMap:F,changeBaseMap:V}=jw(),Y=Re(!1),Ct=Re(!1),kt=Re(null),wt=Re(!1),et=Re(!1),ct=cs(),Bt=Re([]),Yt=Re([]),$=Re([]),J=Re(null),I=Re(null),nt=Re(!1),K=Re(!1),tt=Re(!1),_t=Re(null),G=Nn(()=>{var Ot,Lt,ie;if(console.log("[MapView][filteredClients] Computing with:",{userType:(Ot=ct.user)==null?void 0:Ot.user_type,selectedDealer:J.value,dealerClients:Yt.value}),((Lt=ct.user)==null?void 0:Lt.user_type)==="admin"){const _e=J.value?Yt.value:[];return console.log("[MapView][filteredClients] Admin clients:",_e),_e}else if(((ie=ct.user)==null?void 0:ie.user_type)==="dealer")return console.log("[MapView][filteredClients] Dealer clients:",Yt.value),Yt.value;return console.log("[MapView][filteredClients] No clients returned"),[]}),j=Nn(()=>{var Ot;return c.value?{type:((Ot=c.value.properties)==null?void 0:Ot.type)||"unknown",properties:c.value.properties||{},layer:c.value}:null});function X(Ot){const Lt=Ot.getCenter(),ie=Ot.getZoom(),_e={lat:Lt.lat,lng:Lt.lng,zoom:ie};document.cookie=`mapState=${JSON.stringify(_e)};max-age=2592000;path=/`}function Rt(){const Lt=document.cookie.split(";").find(ie=>ie.trim().startsWith("mapState="));if(Lt)try{return JSON.parse(Lt.split("=")[1])}catch(ie){return console.error("Erreur lors de la lecture du cookie de position:",ie),null}return null}Ra(async()=>{var Le,zt;console.log("[onMounted] Starting initialization..."),await n.fetchPlans();const Ot=Rt(),Lt=Ot?[Ot.lat,Ot.lng]:[46.603354,1.888334],ie=(Ot==null?void 0:Ot.zoom)??6;if(e.value&&!d.value){const De=m(e.value,Lt,ie);De.pm.setLang("fr"),De.pm.addControls({rotateMode:!1}),Ie.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles © Esri — Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",maxZoom:19}).addTo(De),O(De),De.on("moveend",()=>{X(De)}),window.addEventListener("map-set-location",Te=>{if(De&&Te.detail){const{lat:Ue,lng:He,zoom:Ne}=Te.detail;De.flyTo([Ue,He],Ne,{duration:1.5,easeLinearity:.25})}})}const _e=localStorage.getItem("lastPlanId");if(_e)try{await D(parseInt(_e))}catch(De){console.error("Error loading last plan:",De)}((Le=ct.user)==null?void 0:Le.user_type)==="admin"&&(console.log("[onMounted] Loading dealers for admin..."),await St()),((zt=ct.user)==null?void 0:zt.user_type)==="dealer"&&(console.log("[onMounted] Loading clients for dealer..."),await Mt())}),us(()=>r.hasUnsavedChanges,Ot=>{Ot&&kt.value&&n.markUnsavedChanges()}),us(d,async Ot=>{Ot&&n.currentPlan&&(lt(),await r.loadPlanElements(n.currentPlan.id),await D(n.currentPlan.id))}),us(()=>n.currentPlan,async Ot=>{Ot?(kt.value=Ot,n.setCurrentPlan(Ot),r.setCurrentPlan(Ot.id)):(kt.value=null,lt())},{immediate:!0}),yd(()=>{d.value&&d.value.off("moveend")});async function D(Ot){try{lt(),await r.loadPlanElements(Ot);const Lt=n.getPlanById(Ot);Lt&&(kt.value=Lt,n.setCurrentPlan(Lt),r.setCurrentPlan(Lt.id),localStorage.setItem("lastPlanId",Lt.id.toString()),d.value&&E.value&&r.getCurrentElements.forEach(ie=>{var De;if(!E.value||!ie.data)return;let _e=null;const{style:Le={},...zt}=ie.data;switch(ie.type_forme){case"CERCLE":{const Te=zt;Te.center&&Te.radius&&(_e=Ie.circle([Te.center[1],Te.center[0]],{...Le,radius:Te.radius}));break}case"RECTANGLE":{const Te=zt;Te.bounds&&(_e=Ie.rectangle([[Te.bounds.southWest[1],Te.bounds.southWest[0]],[Te.bounds.northEast[1],Te.bounds.northEast[0]]],Le));break}case"DEMI_CERCLE":{const Te=zt;Te.center&&Te.radius&&(_e=new Ml(Ie.latLng(Te.center[1],Te.center[0]),Te.radius,Te.startAngle,Te.endAngle,Le));break}case"LIGNE":{const Te=zt;if(Te.points){const Ue=Te.points.map(He=>Ie.latLng(He[1],He[0]));_e=Ie.polyline(Ue,Le)}break}case"TEXTE":{const Te=zt;if(Te.position&&Te.content){const Ue=Ie.divIcon({html:`<div class="text-annotation" style="font-size: ${Le.fontSize||"14px"}">${Te.content}</div>`,className:"text-container"});_e=Ie.marker([Te.position[1],Te.position[0]],{icon:Ue,...Le})}break}}_e&&(_e.properties={type:ie.type_forme,style:Le,...zt},(De=E.value)==null||De.addLayer(_e),o.value.push({id:ie.id,type:ie.type_forme,layer:_e,properties:_e.properties}),zt.rotation&&typeof _e.setRotation=="function"&&_e.setRotation(zt.rotation))})),Ct.value=!1}catch(Lt){console.error("Erreur lors du chargement du plan:",Lt)}}async function Z(){if(!kt.value||!E.value){console.warn("Aucun plan actif ou groupe de formes à sauvegarder");return}wt.value=!0;try{const Ot=[];E.value.eachLayer(Lt=>{var zt,De,Te,Ue,He,Ne,Sn,en;const ie={style:{color:((zt=Lt.options)==null?void 0:zt.color)||"#3388ff",fillColor:((De=Lt.options)==null?void 0:De.fillColor)||"#3388ff",fillOpacity:((Te=Lt.options)==null?void 0:Te.fillOpacity)||.2,weight:((Ue=Lt.options)==null?void 0:Ue.weight)||3,opacity:((He=Lt.options)==null?void 0:He.opacity)||1}};let _e,Le;if(Lt instanceof Ie.Circle)_e="CERCLE",Le={...ie,center:[Lt.getLatLng().lng,Lt.getLatLng().lat],radius:Lt.getRadius()};else if(Lt instanceof Ie.Rectangle){_e="RECTANGLE";const Jn=Lt.getBounds();Le={...ie,bounds:{southWest:[Jn.getSouthWest().lng,Jn.getSouthWest().lat],northEast:[Jn.getNorthEast().lng,Jn.getNorthEast().lat]}}}else if(((Ne=Lt.properties)==null?void 0:Ne.type)==="Semicircle")_e="DEMI_CERCLE",Le={...ie,center:[Lt.getLatLng().lng,Lt.getLatLng().lat],radius:Lt.getRadius(),startAngle:Lt.properties.style.startAngle||0,endAngle:Lt.properties.style.stopAngle||180};else if(Lt instanceof Ie.Polyline&&!(Lt instanceof Ie.Polygon)){_e="LIGNE";const Jn=Lt.getLatLngs();Le={...ie,points:Jn.map(cn=>[cn.lng,cn.lat])}}else((Sn=Lt.properties)==null?void 0:Sn.type)==="text"&&(_e="TEXTE",Le={...ie,position:[Lt.getLatLng().lng,Lt.getLatLng().lat],content:Lt.properties.text,style:{...Lt.properties.style,fontSize:Lt.properties.style.fontSize}});_e&&Le&&Ot.push({id:Lt.id,type_forme:_e,data:{...Le,rotation:((en=Lt.properties)==null?void 0:en.rotation)||0}})}),r.elements=Ot,await r.saveToPlan(kt.value.id),et.value=!0,setTimeout(()=>{et.value=!1},3e3)}catch(Ot){console.error("Erreur lors de la sauvegarde du plan:",Ot)}finally{wt.value=!1}}_h(()=>{ct.user||Dt(),n.clearCurrentPlan(),r.clearCurrentPlan()});function ut(Ot){w(Ot)}function vt(Ot){try{const Lt=new Date(Ot);return isNaN(Lt.getTime())?(console.error("Date invalide reçue:",Ot),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(Lt)}catch(Lt){return console.error("Erreur lors du formatage de la date:",Lt),"Date invalide"}}const xt=()=>{C()},dt=()=>{c.value&&E.value&&(y(""),E.value.removeLayer(c.value),c.value=null)};async function St(){nt.value=!0;try{const Ot=await xn.get("/users/",{params:{role:"CONCESSIONNAIRE"}});Bt.value=Ot.data}catch(Ot){console.error("Erreur lors du chargement des concessionnaires:",Ot)}finally{nt.value=!1}}async function Mt(){var Ot;console.log("[loadDealerClients] Starting..."),console.log("[loadDealerClients] authStore.user:",ct.user),K.value=!0;try{const Lt=(Ot=ct.user)==null?void 0:Ot.id;if(console.log("[loadDealerClients] Using dealerId:",Lt),!Lt){console.error("[loadDealerClients] No dealer ID available");return}const ie=await xn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:Lt}});console.log("[loadDealerClients] Response:",ie.data),Array.isArray(ie.data)?Yt.value=ie.data:ie.data?Yt.value=[ie.data]:Yt.value=[],console.log("[loadDealerClients] Processed clients:",Yt.value)}catch(Lt){console.error("[loadDealerClients] Error:",Lt),Yt.value=[]}finally{K.value=!1}}async function Kt(Ot){if(console.log("[MapView][selectClient] Starting with client:",Ot),console.log("[MapView][selectClient] Current state:",{selectedDealer:J.value,selectedClient:I.value,newPlanModalRef:!!_t.value}),_t.value){console.log("[MapView][selectClient] Using NewPlanModal ref"),_t.value.selectClient(Ot),I.value=Ot,console.log("[MapView][selectClient] Updated selectedClient:",I.value),tt.value=!0;try{const Lt={client:Ot.id};J.value&&(Lt.concessionnaire=J.value.id);const ie=await xn.get("/plans/",{params:Lt});console.log("[MapView][selectClient] Loaded client plans:",ie.data),$.value=ie.data}catch(Lt){console.error("[MapView][selectClient] Error loading client plans:",Lt),$.value=[]}finally{tt.value=!1}}else console.warn("[MapView][selectClient] NewPlanModal ref is not available")}function re(){J.value=null,I.value=null,Yt.value=[],$.value=[]}function it(){I.value=null,$.value=[]}async function ht(Ot){const Lt=await n.getPlanById(Ot);Lt&&(kt.value=Lt,n.setCurrentPlan(Lt),r.setCurrentPlan(Lt.id),Y.value=!1)}async function It(Ot){try{_t.value?(await _t.value.selectDealer(Ot),J.value=Ot,Yt.value=_t.value.dealerClients):console.warn("[MapView][selectDealer] NewPlanModal ref is not available")}catch(Lt){console.error("[MapView][selectDealer] Error:",Lt)}}us(J,async Ot=>{var Lt;if(Ot&&((Lt=ct.user)==null?void 0:Lt.user_type)==="admin"){K.value=!0;try{const ie=await xn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:Ot.id}});Yt.value=Array.isArray(ie.data)?ie.data:[ie.data]}catch(ie){console.error("[MapView][watch selectedDealer] Error loading clients:",ie),Yt.value=[]}finally{K.value=!1}}});function Dt(){localStorage.removeItem("lastPlanId")}function lt(){E.value&&E.value.clearLayers(),o.value=[]}function Gt(Ot,Lt="m"){return Lt==="m²"?`${(Ot/1e4).toFixed(2)} ha`:Lt==="m"?Ot>=1e3?`${(Ot/1e3).toFixed(2)} km`:`${Ot.toFixed(2)} m`:`${Ot.toFixed(2)} ${Lt}`}const se=Re(!1);function Qt(Ot){return{Circle:"Cercle",Rectangle:"Rectangle",Semicircle:"Demi-cercle",Line:"Ligne",Polygon:"Polygone",Text:"Texte"}[Ot]||Ot}async function oe(){var Ot,Lt,ie;if(!kt.value||!d.value||!E.value){console.log("[generateSynthesis] Conditions initiales non remplies");return}try{console.log("[generateSynthesis] Début de la génération"),se.value=!0;const _e=kt.value.concessionnaire_details,Le=kt.value.client_details;c.value&&(R(),c.value=null);const zt=new gn("l","mm","a4"),De=zt.internal.pageSize.getWidth(),Te=zt.internal.pageSize.getHeight(),Ue=new Image;Ue.src=uf,await new Promise(en=>{Ue.onload=()=>en(),Ue.onerror=()=>en()}),zt.addImage(Ue,"JPEG",(De-60)/2,20,60,60),zt.setFontSize(24),zt.setTextColor(0),zt.text(kt.value.nom||"Sans titre",De/2,100,{align:"center"});let He=120;if(zt.setFontSize(14),_e&&(zt.setFont("helvetica","bold"),zt.text("Concessionnaire:",20,He),zt.setFont("helvetica","normal"),zt.text(`${_e.first_name} ${_e.last_name}${_e.company_name?` (${_e.company_name})`:""}`,20,He+8),He+=25),Le&&(zt.setFont("helvetica","bold"),zt.text("Client:",20,He),zt.setFont("helvetica","normal"),zt.text(`${Le.first_name} ${Le.last_name}${Le.company_name?` (${Le.company_name})`:""}`,20,He+8),He+=25),kt.value.description){zt.setFont("helvetica","bold"),zt.text("Description:",20,He),zt.setFont("helvetica","normal");const en=zt.splitTextToSize(kt.value.description,150);zt.text(en,20,He+8),He+=10*en.length+15}zt.setFontSize(10),zt.setTextColor(100),zt.text(`Date de création: ${vt(kt.value.date_creation)}`,20,Te-20),zt.text(`Dernière modification: ${vt(kt.value.date_modification)}`,De-20,Te-20,{align:"right"});const Ne=[];E.value.eachLayer(en=>Ne.push(en)),console.log(`[generateSynthesis] Nombre de formes à traiter: ${Ne.length}`);const Sn=Ie.simpleMapScreenshoter({hideElementsWithSelectors:[".leaflet-control-container",".leaflet-pm-toolbar",".leaflet-grid-layer",".leaflet-grid-label"],preventDownload:!0}).addTo(d.value);await new Promise(en=>setTimeout(en,3e3));for(let en=0;en<Ne.length;en++){zt.addPage();const Jn=30;zt.addImage(uf,"JPEG",De-Jn-10,10,Jn,30),zt.setFontSize(8),zt.setTextColor(100);let Ln=25;_e&&(zt.text(`Concessionnaire: ${_e.first_name} ${_e.last_name}${_e.company_name?` (${_e.company_name})`:""}`,20,Ln),Ln+=10),Le&&zt.text(`Client: ${Le.first_name} ${Le.last_name}${Le.company_name?` (${Le.company_name})`:""}`,20,Ln),zt.setDrawColor(200,200,200),zt.setLineWidth(.5),zt.line(20,45,De-20,45);const Xn=Ne[en],qe=Xn.properties;qe&&(zt.setTextColor(0),zt.setFontSize(16),zt.setFont("helvetica","bold"),zt.text(Qt(qe.type),20,60));const Pr=((Ot=Xn.getBounds)==null?void 0:Ot.call(Xn))||((Lt=Xn.getLatLng)==null?void 0:Lt.call(Xn));Pr&&d.value.fitBounds(Pr instanceof Ie.LatLng?Ie.latLngBounds([Pr]):Pr,{padding:[50,50]}),await new Promise(Rn=>setTimeout(Rn,2e3)),d.value.invalidateSize(),await new Promise(Rn=>{const Li=()=>{var Je;const Oi=(Je=d.value)==null?void 0:Je.getContainer();if(!Oi){Rn();return}const qn=Oi.querySelectorAll(".leaflet-tile-loaded");Oi.querySelectorAll(".leaflet-tile-loading").length===0&&qn.length>0?Rn():setTimeout(Li,100)};Li()});try{const Rn=await Sn.takeScreen("image"),Li=await new Promise((Je,Ye)=>{const ui=new Image;ui.onload=()=>Je(ui),ui.onerror=Sr=>Ye(Sr),ui.src=Rn}),Oi=De*.6-30;let qn=Li.height*Oi/Li.width;qn>Te*.9&&(qn=Te*.9);const hn=Math.max(80,(Te-qn)/2);if(zt.addImage(Li,"PNG",20,hn,Oi,qn),qe){const Je=De*.6+10;let Ye=70;zt.setFontSize(12),zt.setFont("helvetica","normal"),qe.type==="Circle"?(zt.text(`Rayon: ${Gt(qe.radius)}`,Je,Ye),Ye+=10,zt.text(`Diamètre: ${Gt(qe.radius*2)}`,Je,Ye),Ye+=10,zt.text(`Surface: ${Gt(qe.area,"m²")}`,Je,Ye),Ye+=10,zt.text(`Périmètre: ${Gt(qe.perimeter)}`,Je,Ye),Ye+=10,qe.surfaceInterieure&&(zt.text(`Surface intérieure: ${Gt(qe.surfaceInterieure,"m²")}`,Je,Ye),Ye+=10),qe.surfaceExterieure&&(zt.text(`Surface extérieure: ${Gt(qe.surfaceExterieure,"m²")}`,Je,Ye),Ye+=10)):qe.type==="Rectangle"?(zt.text(`Largeur: ${Gt(qe.width)}`,Je,Ye),Ye+=10,zt.text(`Hauteur: ${Gt(qe.height)}`,Je,Ye),Ye+=10,zt.text(`Surface: ${Gt(qe.area,"m²")}`,Je,Ye),Ye+=10,zt.text(`Périmètre: ${Gt(qe.perimeter)}`,Je,Ye),Ye+=10,qe.surfaceInterieure&&(zt.text(`Surface intérieure: ${Gt(qe.surfaceInterieure,"m²")}`,Je,Ye),Ye+=10),qe.surfaceExterieure&&(zt.text(`Surface extérieure: ${Gt(qe.surfaceExterieure,"m²")}`,Je,Ye),Ye+=10)):qe.type==="Line"?(zt.text(`Longueur: ${Gt(qe.length)}`,Je,Ye),Ye+=10,(ie=qe.dimensions)!=null&&ie.width&&(zt.text(`Largeur d'influence: ${Gt(qe.dimensions.width)}`,Je,Ye),Ye+=10),qe.surfaceInfluence&&(zt.text(`Surface d'influence: ${Gt(qe.surfaceInfluence,"m²")}`,Je,Ye),Ye+=10)):qe.type==="Polygon"?(zt.text(`Surface: ${Gt(qe.area,"m²")}`,Je,Ye),Ye+=10,zt.text(`Périmètre: ${Gt(qe.perimeter)}`,Je,Ye),Ye+=10,qe.surfaceInterieure&&(zt.text(`Surface intérieure: ${Gt(qe.surfaceInterieure,"m²")}`,Je,Ye),Ye+=10),qe.surfaceExterieure&&(zt.text(`Surface extérieure: ${Gt(qe.surfaceExterieure,"m²")}`,Je,Ye),Ye+=10)):qe.type==="Semicircle"&&(zt.text(`Rayon: ${Gt(qe.radius)}`,Je,Ye),Ye+=10,zt.text(`Diamètre: ${Gt(qe.radius*2)}`,Je,Ye),Ye+=10,zt.text(`Surface: ${Gt(qe.area,"m²")}`,Je,Ye),Ye+=10,zt.text(`Périmètre: ${Gt(qe.perimeter)}`,Je,Ye),Ye+=10,zt.text(`Longueur d'arc: ${Gt(qe.arcLength)}`,Je,Ye),Ye+=10,zt.text(`Angle d'ouverture: ${qe.openingAngle.toFixed(1)}°`,Je,Ye),Ye+=10,qe.surfaceInterieure&&(zt.text(`Surface intérieure: ${Gt(qe.surfaceInterieure,"m²")}`,Je,Ye),Ye+=10),qe.surfaceExterieure&&(zt.text(`Surface extérieure: ${Gt(qe.surfaceExterieure,"m²")}`,Je,Ye),Ye+=10))}}catch(Rn){console.error(`[generateSynthesis] Erreur capture forme ${en+1}:`,Rn)}}d.value.removeControl(Sn),console.log("[generateSynthesis] Génération du PDF terminée"),zt.save(`synthese_${kt.value.nom}.pdf`)}catch(_e){console.error("[generateSynthesis] Erreur:",_e)}finally{se.value=!1}}return(Ot,Lt)=>{var ie,_e,Le;return ue(),fe("div",Qx,[A("div",tL,[se.value?(ue(),fe("div",eL,Lt[8]||(Lt[8]=[rp('<div class="bg-white/90 rounded-2xl p-8 max-w-md shadow-2xl border border-gray-100"><div class="flex flex-col items-center"><div class="relative w-24 h-24 mb-6"><div class="absolute inset-0 border-4 border-primary-200 rounded-full"></div><div class="absolute inset-0 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"></div><div class="absolute inset-2 border-2 border-primary-400/30 rounded-full animate-pulse"></div><div class="absolute inset-0 flex items-center justify-center"><svg class="w-8 h-8 text-primary-600 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div><h3 class="text-xl font-semibold text-gray-900 mb-2"> Génération de la synthèse </h3><div class="space-y-2 text-center"><p class="text-primary-600 font-medium"> Capture des formes en cours... </p><p class="text-sm text-gray-500"> Nous optimisons la qualité de vos captures pour un rendu parfait </p></div></div></div>',1)]))):an("",!0),kt.value?an("",!0):(ue(),fe("div",nL,[A("div",iL,[Lt[11]||(Lt[11]=rp('<div class="relative w-48 h-48 mx-auto mb-12 rounded-full bg-gradient-to-br from-primary-100 to-primary-50 p-8 shadow-lg ring-4 ring-white"><img src="'+uf+'" alt="IrrigationDesign Logo" class="w-full h-full object-contain filter drop-shadow-md"><div class="absolute inset-0 rounded-full bg-gradient-to-t from-transparent to-white/10 pointer-events-none"></div></div><h1 class="text-3xl font-bold text-gray-900 mb-4">Bienvenue sur IrrigationDesign</h1><p class="text-gray-600 mb-8">Pour commencer à dessiner, vous devez d&#39;abord créer un nouveau plan ou charger un plan existant.</p>',3)),A("div",rL,[A("button",{onClick:Lt[0]||(Lt[0]=zt=>Y.value=!0),class:"w-full flex items-center justify-center px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Lt[9]||(Lt[9]=[A("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),yi(" Créer un nouveau plan ")])),A("button",{onClick:Lt[1]||(Lt[1]=zt=>Ct.value=!0),class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Lt[10]||(Lt[10]=[A("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),yi(" Charger un plan existant ")]))])])])),A("div",{ref_key:"mapContainer",ref:e,class:"absolute inset-0 w-full h-full"},null,512),kt.value&&!se.value?(ue(),fe("div",sL,[A("div",oL,[Lt[12]||(Lt[12]=A("h2",{class:"text-sm font-semibold text-gray-700 mb-2"},"Type de carte",-1)),A("div",aL,[(ue(!0),fe(Mn,null,Wn(Object.keys(kn(q)),zt=>(ue(),fe("button",{key:zt,onClick:De=>kn(V)(zt),class:Kr(["px-3 py-2 text-sm rounded-md transition-colors duration-200",{"bg-primary-600 text-white":kn(F)===zt,"bg-gray-100 text-gray-700 hover:bg-gray-200":kn(F)!==zt}])},Ce(zt),11,lL))),128))])]),A("div",uL,[A("div",cL,[A("h1",hL,Ce(((ie=kt.value)==null?void 0:ie.nom)||"Aucun plan chargé"),1),(_e=kt.value)!=null&&_e.description?(ue(),fe("span",fL,Ce(kt.value.description),1)):an("",!0)]),A("div",dL,[A("button",{onClick:Lt[2]||(Lt[2]=zt=>Y.value=!0),class:"flex items-center px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Lt[13]||(Lt[13]=[A("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),yi(" Nouveau plan ")])),A("button",{onClick:Lt[3]||(Lt[3]=zt=>Ct.value=!0),class:"flex items-center px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Lt[14]||(Lt[14]=[A("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),yi(" Charger un plan ")])),kt.value?(ue(),fe("button",{key:0,onClick:Z,class:"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors duration-200",disabled:wt.value},[wt.value?(ue(),fe("svg",gL,Lt[16]||(Lt[16]=[A("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),A("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(ue(),fe("svg",mL,Lt[15]||(Lt[15]=[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"},null,-1)]))),yi(" "+Ce(wt.value?"Sauvegarde...":"Enregistrer"),1)],8,pL)):an("",!0),A("button",{onClick:xt,class:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors duration-200"},Lt[17]||(Lt[17]=[A("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1),yi(" Ajuster la vue ")])),A("button",{onClick:oe,class:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-colors duration-200"},Lt[18]||(Lt[18]=[A("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),yi(" Générer synthèse ")]))]),(Le=kt.value)!=null&&Le.date_modification?(ue(),fe("div",_L," Dernière sauvegarde : "+Ce(vt(kt.value.date_modification)),1)):an("",!0)])])):an("",!0),et.value?(ue(),fe("div",vL,Lt[19]||(Lt[19]=[A("svg",{class:"w-5 h-5 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),A("span",{class:"font-medium"},"Plan sauvegardé avec succès",-1)]))):an("",!0),kt.value&&!se.value?(ue(),fe("div",yL,[Di(bw,{"current-tool":kn(l),"selected-shape":j.value,onToolChange:kn(y),onStyleUpdate:kn(b),onPropertiesUpdate:ut,onDeleteShape:dt},null,8,["current-tool","selected-shape","onToolChange","onStyleUpdate"])])):an("",!0),Di(Yg,{ref_key:"newPlanModalRef",ref:_t,modelValue:Y.value,"onUpdate:modelValue":Lt[4]||(Lt[4]=zt=>Y.value=zt),onCreated:ht,onDealerSelected:Lt[5]||(Lt[5]=zt=>J.value=zt),onClientSelected:Lt[6]||(Lt[6]=zt=>I.value=zt)},null,8,["modelValue"]),Ct.value?(ue(),fe("div",bL,[A("div",wL,[A("div",xL,[Lt[21]||(Lt[21]=A("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),A("button",{onClick:Lt[7]||(Lt[7]=zt=>Ct.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},Lt[20]||(Lt[20]=[A("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),kn(ct).isAdmin?(ue(),fe("div",LL,[J.value?I.value?(ue(),fe("div",DL,[A("div",OL,[A("button",{onClick:it,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Lt[30]||(Lt[30]=[A("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),yi(" Retour à la liste des clients ")])),Lt[31]||(Lt[31]=A("span",{class:"mx-2 text-gray-400"},"|",-1)),A("span",IL,Ce(I.value.first_name)+" "+Ce(I.value.last_name)+" ("+Ce(I.value.company_name)+") ",1)]),Lt[33]||(Lt[33]=A("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),A("div",RL,[tt.value?(ue(),fe(Mn,{key:0},Wn(3,zt=>A("div",{key:zt,class:"animate-pulse"},Lt[32]||(Lt[32]=[A("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[A("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),A("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),A("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(ue(!0),fe(Mn,{key:1},Wn($.value,zt=>(ue(),fe("button",{key:zt.id,onClick:De=>D(zt.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[A("div",jL,Ce(zt.nom),1),A("div",zL,Ce(zt.description),1),A("div",UL," Modifié le "+Ce(vt(zt.date_modification)),1)],8,FL))),128))])])):(ue(),fe("div",EL,[A("div",ML,[A("button",{onClick:re,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Lt[25]||(Lt[25]=[A("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),yi(" Retour à la liste des concessionnaires ")])),Lt[26]||(Lt[26]=A("span",{class:"mx-2 text-gray-400"},"|",-1)),A("span",AL,Ce(J.value.first_name)+" "+Ce(J.value.last_name)+" ("+Ce(J.value.company_name)+") ",1)]),Lt[29]||(Lt[29]=A("h3",{class:"font-medium text-gray-700"},"Sélectionnez un client",-1)),A("div",BL,[K.value?(ue(),fe(Mn,{key:0},Wn(3,zt=>A("div",{key:zt,class:"animate-pulse"},Lt[27]||(Lt[27]=[A("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[A("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),A("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(ue(!0),fe(Mn,{key:1},Wn(G.value,zt=>(ue(),fe("button",{key:zt.id,onClick:De=>Kt(zt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[A("div",null,[A("div",NL,Ce(zt.first_name)+" "+Ce(zt.last_name)+" ("+Ce(zt.company_name)+")",1)]),Lt[28]||(Lt[28]=A("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,TL))),128))])])):(ue(),fe("div",CL,[Lt[24]||(Lt[24]=A("h3",{class:"font-medium text-gray-700"},"Sélectionnez un concessionnaire",-1)),A("div",kL,[nt.value?(ue(),fe(Mn,{key:0},Wn(3,zt=>A("div",{key:zt,class:"animate-pulse"},Lt[22]||(Lt[22]=[A("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[A("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),A("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(ue(!0),fe(Mn,{key:1},Wn(Bt.value,zt=>(ue(),fe("button",{key:zt.id,onClick:De=>It(zt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[A("div",null,[A("div",SL,Ce(zt.first_name)+" "+Ce(zt.last_name)+" ("+Ce(zt.company_name)+")",1)]),Lt[23]||(Lt[23]=A("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,PL))),128))])]))])):kn(ct).isDealer?(ue(),fe("div",qL,[I.value?(ue(),fe("div",WL,[A("div",ZL,[A("button",{onClick:it,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Lt[37]||(Lt[37]=[A("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),yi(" Retour à la liste des clients ")])),Lt[38]||(Lt[38]=A("span",{class:"mx-2 text-gray-400"},"|",-1)),A("span",KL,Ce(I.value.first_name)+" "+Ce(I.value.last_name),1)]),Lt[40]||(Lt[40]=A("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),A("div",YL,[tt.value?(ue(),fe(Mn,{key:0},Wn(3,zt=>A("div",{key:zt,class:"animate-pulse"},Lt[39]||(Lt[39]=[A("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[A("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),A("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),A("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(ue(!0),fe(Mn,{key:1},Wn($.value,zt=>(ue(),fe("button",{key:zt.id,onClick:De=>D(zt.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[A("div",XL,Ce(zt.nom),1),A("div",QL,Ce(zt.description),1),A("div",tC," Modifié le "+Ce(vt(zt.date_modification)),1)],8,JL))),128))])])):(ue(),fe("div",$L,[Lt[36]||(Lt[36]=A("h3",{class:"font-medium text-gray-700"},"Sélectionnez un client",-1)),A("div",GL,[K.value?(ue(),fe(Mn,{key:0},Wn(3,zt=>A("div",{key:zt,class:"animate-pulse"},Lt[34]||(Lt[34]=[A("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[A("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),A("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(ue(!0),fe(Mn,{key:1},Wn(G.value,zt=>(ue(),fe("button",{key:zt.id,onClick:De=>Kt(zt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[A("div",null,[A("div",HL,Ce(zt.first_name)+" "+Ce(zt.last_name)+" ("+Ce(zt.company_name)+")",1)]),Lt[35]||(Lt[35]=A("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,VL))),128))])]))])):(ue(),fe("div",eC,[kn(n).plans.length===0?(ue(),fe("div",nC,Lt[41]||(Lt[41]=[A("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(ue(),fe("div",iC,[(ue(!0),fe(Mn,null,Wn(kn(n).plans,zt=>(ue(),fe("button",{key:zt.id,onClick:De=>D(zt.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[A("div",sC,Ce(zt.nom),1),A("div",oC,Ce(zt.description),1),A("div",aC," Modifié le "+Ce(vt(zt.date_modification)),1)],8,rC))),128))]))]))])])):an("",!0)])])}}}),lC={class:"fixed inset-0 z-50 overflow-y-auto"},uC={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},cC={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},hC={class:"mt-3 text-center sm:mt-0 sm:text-left"},fC={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},dC={class:"mt-4"},pC={class:"grid grid-cols-2 gap-4"},mC=["disabled"],gC={key:0,class:"mt-1 text-sm text-gray-500"},_C={class:"grid grid-cols-2 gap-4"},vC={key:0},yC=["disabled"],bC=["value"],wC={key:1},xC=["disabled"],LC=["value"],CC={key:0},kC={class:"grid grid-cols-2 gap-4"},PC={key:1,class:"rounded-md bg-red-50 p-4"},SC={class:"flex"},EC={class:"ml-3"},MC={class:"text-sm font-medium text-red-800"},AC={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense"},BC=["disabled"],TC={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},v1=Es({__name:"UserFormModal",props:{user:{type:Object,default:null},dealers:{type:Array,default:()=>[]},isAdmin:{type:Boolean,required:!0},currentDealer:{type:String,default:""}},emits:["close","save"],setup(t,{emit:e}){var R,O,q,F,V,Y,Ct;const n=t,r=e,o=cs(),l=Re(!1),c=Re(null),d=Nn(()=>{var kt;return n.isAdmin?n.user?n.user.id!==((kt=o.user)==null?void 0:kt.id):!0:!1}),m=Nn(()=>n.isAdmin?[{value:"ADMIN",label:"Administrateur"},{value:"CONCESSIONNAIRE",label:"Concessionnaire"},{value:"UTILISATEUR",label:"Client"}]:[{value:"UTILISATEUR",label:"Client"}]),y=Nn(()=>n.isAdmin?w.role==="UTILISATEUR":!0),b=Nn(()=>n.dealers.filter(kt=>kt.role==="CONCESSIONNAIRE")),w=Fa({first_name:((R=n.user)==null?void 0:R.first_name)||"",last_name:((O=n.user)==null?void 0:O.last_name)||"",email:((q=n.user)==null?void 0:q.email)||"",username:((F=n.user)==null?void 0:F.username)||"",company_name:((V=n.user)==null?void 0:V.company_name)||"",role:((Y=n.user)==null?void 0:Y.role)||(n.isAdmin?"":"UTILISATEUR"),dealer:((Ct=n.user)==null?void 0:Ct.concessionnaire)||n.currentDealer,password:"",password_confirm:""}),E=()=>{if(!w.first_name||!w.last_name)return c.value="Le prénom et le nom sont requis",!1;if(!w.email)return c.value="L'email est requis",!1;if(!w.username)return c.value="Le nom d'utilisateur est requis",!1;if(!n.user){if(!w.password)return c.value="Le mot de passe est requis",!1;if(w.password!==w.password_confirm)return c.value="Les mots de passe ne correspondent pas",!1}return w.role==="UTILISATEUR"&&!w.dealer?(c.value="Un concessionnaire doit être sélectionné pour un client",!1):!0},C=async()=>{var kt;if(c.value=null,!!E()){l.value=!0;try{const wt={...w};(kt=n.user)!=null&&kt.id&&(wt.id=n.user.id,delete wt.password,delete wt.password_confirm),wt.role==="UTILISATEUR"&&wt.dealer&&(wt.concessionnaire=wt.dealer),delete wt.dealer,await r("save",wt),r("close")}catch(wt){console.error("Erreur formulaire:",wt),c.value=wt.message,l.value=!1}}};return(kt,wt)=>(ue(),fe("div",lC,[A("div",uC,[wt[24]||(wt[24]=A("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[A("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),wt[25]||(wt[25]=A("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),A("div",cC,[A("div",null,[A("div",hC,[A("h3",fC,Ce(t.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),A("div",dC,[A("form",{onSubmit:wh(C,["prevent"]),class:"space-y-4"},[A("div",pC,[A("div",null,[wt[10]||(wt[10]=A("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prénom",-1)),jn(A("input",{type:"text",id:"first_name","onUpdate:modelValue":wt[0]||(wt[0]=et=>w.first_name=et),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Bi,w.first_name]])]),A("div",null,[wt[11]||(wt[11]=A("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),jn(A("input",{type:"text",id:"last_name","onUpdate:modelValue":wt[1]||(wt[1]=et=>w.last_name=et),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Bi,w.last_name]])])]),A("div",null,[wt[12]||(wt[12]=A("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),jn(A("input",{type:"email",id:"email","onUpdate:modelValue":wt[2]||(wt[2]=et=>w.email=et),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Bi,w.email]])]),A("div",null,[wt[13]||(wt[13]=A("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),jn(A("input",{type:"text",id:"username","onUpdate:modelValue":wt[3]||(wt[3]=et=>w.username=et),required:"",disabled:!!n.user,class:Kr(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",{"bg-gray-100":!!n.user}])},null,10,mC),[[Bi,w.username]]),n.user?(ue(),fe("p",gC," Le nom d'utilisateur ne peut pas être modifié après la création. ")):an("",!0)]),A("div",null,[wt[14]||(wt[14]=A("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Nom de l'entreprise",-1)),jn(A("input",{type:"text",id:"company_name","onUpdate:modelValue":wt[4]||(wt[4]=et=>w.company_name=et),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Bi,w.company_name]])]),A("div",_C,[n.isAdmin?(ue(),fe("div",vC,[wt[16]||(wt[16]=A("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Rôle",-1)),jn(A("select",{id:"role","onUpdate:modelValue":wt[5]||(wt[5]=et=>w.role=et),required:"",disabled:!d.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[wt[15]||(wt[15]=A("option",{value:""},"Sélectionner un rôle",-1)),(ue(!0),fe(Mn,null,Wn(m.value,et=>(ue(),fe("option",{key:et.value,value:et.value},Ce(et.label),9,bC))),128))],8,yC),[[$s,w.role]])])):an("",!0),y.value?(ue(),fe("div",wC,[wt[18]||(wt[18]=A("label",{for:"dealer",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),jn(A("select",{id:"dealer","onUpdate:modelValue":wt[6]||(wt[6]=et=>w.dealer=et),required:"",disabled:!n.isAdmin,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[wt[17]||(wt[17]=A("option",{value:""},"Sélectionner un concessionnaire",-1)),(ue(!0),fe(Mn,null,Wn(b.value,et=>(ue(),fe("option",{key:et.id,value:et.id},Ce(kn(Dl)(et)),9,LC))),128))],8,xC),[[$s,w.dealer]])])):an("",!0)]),t.user?an("",!0):(ue(),fe("div",CC,[A("div",kC,[A("div",null,[wt[19]||(wt[19]=A("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),jn(A("input",{type:"password",id:"password","onUpdate:modelValue":wt[7]||(wt[7]=et=>w.password=et),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Bi,w.password]])]),A("div",null,[wt[20]||(wt[20]=A("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),jn(A("input",{type:"password",id:"password_confirm","onUpdate:modelValue":wt[8]||(wt[8]=et=>w.password_confirm=et),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Bi,w.password_confirm]])])]),wt[21]||(wt[21]=A("p",{class:"mt-1 text-sm text-gray-500"}," L'utilisateur devra changer son mot de passe à sa première connexion. ",-1))])),c.value?(ue(),fe("div",PC,[A("div",SC,[wt[22]||(wt[22]=A("div",{class:"flex-shrink-0"},[A("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[A("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),A("div",EC,[A("h3",MC,Ce(c.value),1)])])])):an("",!0),A("div",AC,[A("button",{type:"submit",disabled:l.value,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:col-start-2 sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},[l.value?(ue(),fe("svg",TC,wt[23]||(wt[23]=[A("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),A("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):an("",!0),yi(" "+Ce(l.value?"Enregistrement...":"Enregistrer"),1)],8,BC),A("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:col-start-1 sm:text-sm",onClick:wt[9]||(wt[9]=et=>kt.$emit("close"))}," Annuler ")])],32)])])])])])]))}}),NC={class:"fixed inset-0 z-50 overflow-y-auto"},DC={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},OC={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},IC={class:"sm:flex sm:items-start"},RC={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},FC={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},jC={class:"mt-2"},zC={class:"text-sm text-gray-500"},UC={class:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},y1=Es({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(t){return(e,n)=>(ue(),fe("div",NC,[A("div",DC,[n[3]||(n[3]=A("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[A("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),n[4]||(n[4]=A("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),A("div",OC,[A("div",IC,[n[2]||(n[2]=A("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[A("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),A("div",RC,[A("h3",FC,Ce(t.title),1),A("div",jC,[A("p",zC,Ce(t.message),1)])])]),A("div",UC,[A("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:n[0]||(n[0]=r=>e.$emit("confirm"))}," Confirmer "),A("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:w-auto sm:text-sm",onClick:n[1]||(n[1]=r=>e.$emit("cancel"))}," Annuler ")])])])]))}}),qC={class:"h-full bg-gray-50"},$C={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},GC={class:"flex justify-between items-center mb-8"},VC={class:"text-3xl font-extrabold text-gray-900"},HC={class:"bg-white shadow rounded-lg mb-6 p-4"},WC={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ZC={key:0},KC=["placeholder"],YC={key:1},JC=["value"],XC={class:"bg-white shadow rounded-lg"},QC={class:"overflow-x-auto"},t6={class:"min-w-full divide-y divide-gray-200"},e6={class:"bg-gray-50"},n6={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},i6={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},r6={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},s6={class:"bg-white divide-y divide-gray-200"},o6={class:"px-6 py-4 whitespace-nowrap"},a6={class:"flex items-center"},l6={class:"flex-shrink-0 h-10 w-10"},u6={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},c6={class:"text-primary-600 font-medium"},h6={class:"ml-4"},f6={class:"text-sm font-medium text-gray-900"},d6={class:"text-sm text-gray-500"},p6={class:"px-6 py-4 whitespace-nowrap"},m6={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},g6={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},_6={class:"px-6 py-4 whitespace-nowrap"},v6={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},y6=["onClick"],b6=["onClick"],w6=Es({__name:"UserListView",setup(t){const e=cs(),n=Re([]),r=Re([]),o=Re(!1),l=Re(!1),c=Re(null),d=Re(null),m=Fa({role:"",search:"",dealer:""}),y=Nn(()=>e.isAdmin),b=Nn(()=>e.isDealer),w=Nn(()=>n.value.filter($=>$.role==="CONCESSIONNAIRE")),E=Nn(()=>{var J;console.log("Computing filtered users..."),console.log("Current users:",n.value),console.log("Is admin:",y.value),console.log("Is dealer:",b.value),console.log("Current filters:",m);let $=n.value;if(b.value&&(console.log("Filtering for dealer:",(J=e.user)==null?void 0:J.id),$=$.filter(I=>{var nt;return I.role==="UTILISATEUR"&&I.dealer===((nt=e.user)==null?void 0:nt.id)}),console.log("Filtered users for dealer:",$)),y.value&&(m.role&&($=$.filter(I=>I.role===m.role),console.log("Filtered by role:",$)),m.dealer&&($=$.filter(I=>String(I.dealer)===String(m.dealer)),console.log("Filtered by dealer:",$))),m.search){const I=m.search.toLowerCase();$=$.filter(nt=>nt.username.toLowerCase().includes(I)||nt.email.toLowerCase().includes(I)||nt.first_name.toLowerCase().includes(I)||nt.last_name.toLowerCase().includes(I)||nt.company_name&&nt.company_name.toLowerCase().includes(I)),console.log("Filtered by search:",$)}return console.log("Final filtered users:",$),$});Ra(async()=>{await C(),y.value&&await R()});async function C(){try{console.log("Fetching users...");const $=await xn.get("/users/");console.log("Users API response:",$.data),n.value=$.data,console.log("Users after assignment:",n.value)}catch($){console.error("Erreur lors de la récupération des utilisateurs:",$)}}async function R(){try{const $=await xn.get("/users/",{params:{role:"CONCESSIONNAIRE"}});r.value=$.data}catch($){console.error("Erreur lors de la récupération des concessionnaires:",$)}}function O(){c.value=null,o.value=!0}function q($){c.value={...$},o.value=!0}function F(){o.value=!1,c.value=null}async function V($){var J;try{let I;const nt=!!$.id,K={...$};return delete K.dealer_name,delete K.full_name,delete K.user_type,delete K.permissions,nt?I=await xn.patch(`/users/${$.id}/`,K):I=await xn.post("/users/",K),await C(),F(),I.data}catch(I){const nt=((J=I.response)==null?void 0:J.data)||{};let K="";throw typeof nt=="object"&&(K=Object.entries(nt).map(([tt,_t])=>Array.isArray(_t)?_t[0]:_t).filter(tt=>tt).join(`
`)),K||(K="Une erreur est survenue lors de la sauvegarde"),new Error(K)}}function Y($){d.value=$,l.value=!0}async function Ct(){if(d.value)try{await xn.delete(`/users/${d.value.id}/`),await C(),l.value=!1,d.value=null}catch($){throw console.error("Erreur lors de la suppression de l'utilisateur:",$),$}}function kt($,J){return`${($==null?void 0:$.charAt(0))||""}${(J==null?void 0:J.charAt(0))||""}`.toUpperCase()}const wt={ADMIN:"Admin",CONCESSIONNAIRE:"Concessionnaire",UTILISATEUR:"Client"};function et($){return wt[$]||$}function ct($){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function Bt($){return $?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}function Yt($){var J;return y.value?!0:b.value?$.role==="UTILISATEUR"&&$.dealer===((J=e.user)==null?void 0:J.id):!1}return($,J)=>{var I,nt;return ue(),fe("div",qC,[A("div",$C,[A("div",GC,[A("h1",VC,Ce(y.value?"Gestion des utilisateurs":"Mes clients"),1),A("button",{onClick:O,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[J[4]||(J[4]=A("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[A("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),yi(" "+Ce(y.value?"Nouvel utilisateur":"Nouveau client"),1)])]),A("div",HC,[A("div",WC,[y.value?(ue(),fe("div",ZC,[J[6]||(J[6]=A("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rôle",-1)),jn(A("select",{id:"role-filter","onUpdate:modelValue":J[0]||(J[0]=K=>m.role=K),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},J[5]||(J[5]=[A("option",{value:""},"Tous les rôles",-1),A("option",{value:"ADMIN"},"Admin",-1),A("option",{value:"CONCESSIONNAIRE"},"Concessionnaire",-1),A("option",{value:"UTILISATEUR"},"Client",-1)]),512),[[$s,m.role]])])):an("",!0),A("div",null,[J[7]||(J[7]=A("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),jn(A("input",{type:"text",id:"search","onUpdate:modelValue":J[1]||(J[1]=K=>m.search=K),placeholder:y.value?"Nom, email...":"Rechercher un client...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,8,KC),[[Bi,m.search]])]),y.value?(ue(),fe("div",YC,[J[9]||(J[9]=A("label",{for:"dealer-filter",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),jn(A("select",{id:"dealer-filter","onUpdate:modelValue":J[2]||(J[2]=K=>m.dealer=K),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[J[8]||(J[8]=A("option",{value:""},"Tous les concessionnaires",-1)),(ue(!0),fe(Mn,null,Wn(w.value,K=>(ue(),fe("option",{key:K.id,value:K.id},Ce(K.company_name||`${K.first_name} ${K.last_name}`),9,JC))),128))],512),[[$s,m.dealer]])])):an("",!0)])]),A("div",XC,[A("div",QC,[A("table",t6,[A("thead",e6,[A("tr",null,[A("th",n6,Ce(y.value?"Utilisateur":"Client"),1),y.value?(ue(),fe("th",i6," Rôle ")):an("",!0),J[10]||(J[10]=A("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),y.value?(ue(),fe("th",r6," Concessionnaire ")):an("",!0),J[11]||(J[11]=A("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),J[12]||(J[12]=A("th",{scope:"col",class:"relative px-6 py-3"},[A("span",{class:"sr-only"},"Actions")],-1))])]),A("tbody",s6,[(ue(!0),fe(Mn,null,Wn(E.value,K=>(ue(),fe("tr",{key:K.id},[A("td",o6,[A("div",a6,[A("div",l6,[A("div",u6,[A("span",c6,Ce(kt(K.first_name,K.last_name)),1)])]),A("div",h6,[A("div",f6,Ce(kn(Dl)(K)),1),A("div",d6,Ce(K.username),1)])])]),A("td",p6,[A("span",{class:Kr(ct(K.role))},Ce(et(K.role)),3)]),A("td",m6,Ce(K.email),1),A("td",g6,Ce(K.dealer_name||"-"),1),A("td",_6,[A("span",{class:Kr(Bt(K.is_active))},Ce(K.is_active?"Actif":"Inactif"),3)]),A("td",v6,[A("button",{onClick:tt=>q(K),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,y6),Yt(K)?(ue(),fe("button",{key:0,onClick:tt=>Y(K),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,b6)):an("",!0)])]))),128))])])])])]),o.value?(ue(),Ia(v1,{key:0,user:c.value,dealers:r.value,"is-admin":y.value,"current-dealer":(nt=(I=kn(e).user)==null?void 0:I.id)==null?void 0:nt.toString(),onClose:F,onSave:V},null,8,["user","dealers","is-admin","current-dealer"])):an("",!0),l.value?(ue(),Ia(y1,{key:1,title:"Supprimer l'utilisateur",message:"Êtes-vous sûr de vouloir supprimer cet utilisateur ? Cette action est irréversible.",onConfirm:Ct,onCancel:J[3]||(J[3]=K=>l.value=!1)})):an("",!0)])}}}),x6={class:"h-full bg-gray-50"},L6={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},C6={class:"sm:flex sm:items-center"},k6={class:"sm:flex-auto"},P6={class:"text-2xl font-semibold text-gray-900"},S6={class:"mt-2 text-sm text-gray-700"},E6={key:0,class:"mt-8"},M6={class:"mb-6"},A6=["value"],B6={key:0,class:"mb-6"},T6=["value"],N6={key:1,class:"mt-8"},D6={class:"mb-6"},O6=["value"],I6={class:"mt-8"},R6={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 rounded-lg"},F6={class:"overflow-x-auto"},j6={class:"min-w-full divide-y divide-gray-300"},z6={class:"bg-gray-50"},U6={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"},q6={class:"ml-2 flex-none rounded"},$6={key:0,scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},G6={key:1,scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},V6={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},H6={class:"ml-2 flex-none rounded"},W6={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},Z6={class:"ml-2 flex-none rounded"},K6={class:"divide-y divide-gray-200 bg-white"},Y6={key:0},J6={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},X6={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},Q6={key:0,class:"px-3 py-4 text-sm text-gray-900"},tk={key:0,class:"flex items-center"},ek={class:"h-8 w-8 flex-shrink-0"},nk={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},ik={class:"text-primary-700 font-medium text-sm"},rk={class:"ml-3"},sk={class:"font-medium"},ok={key:1,class:"text-gray-500"},ak={key:1,class:"px-3 py-4 text-sm text-gray-900"},lk={key:0,class:"flex items-center"},uk={class:"h-8 w-8 flex-shrink-0"},ck={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},hk={class:"text-primary-700 font-medium text-sm"},fk={class:"ml-3"},dk={class:"font-medium"},pk={key:1,class:"text-gray-500"},mk={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},gk={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},_k={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},vk=["onClick"],yk=["onClick"],bk=["onClick"],wk={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},xk={class:"bg-white rounded-lg p-6 max-w-md w-full"},Lk={class:"flex justify-between items-center mb-4"},Ck={key:0,class:"space-y-4"},kk=["value"],Pk=["value"],Sk={key:1,class:"mt-4 bg-red-50 p-4 rounded-md"},Ek={class:"flex"},Mk={class:"ml-3"},Ak={class:"text-sm font-medium text-red-800"},Bk={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},Tk=["disabled"],Nk={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Dk=Es({__name:"PlansView",setup(t){const e=fc(),n=Bh(),r=cs(),o=Kg(),l=Re([]),c=Re([]),d=Re([]),m=Re(!1),y=Re(!1),b=Re({nom:"",description:"",client:null}),w=Re({id:0,nom:"",description:"",concessionnaire:null,client:null}),E=Re(!1),C=Re(null),R=Re(null),O=Re(null),q=Re("date_modification"),F=Re("desc"),V=Nn(()=>R.value?d.value.filter(G=>G.concessionnaire===R.value):d.value),Y=Nn(()=>{let G=l.value;return r.isAdmin?R.value&&(G=G.filter(j=>j.concessionnaire===R.value),O.value&&(G=G.filter(j=>j.client===O.value))):r.isDealer&&(G=G.filter(j=>{var X;return j.concessionnaire===((X=r.user)==null?void 0:X.id)}),O.value&&(G=G.filter(j=>j.client===O.value))),[...G].sort((j,X)=>{if(q.value==="nom")return F.value==="asc"?j.nom.localeCompare(X.nom):X.nom.localeCompare(j.nom);{const Rt=new Date(j[q.value]).getTime(),D=new Date(X[q.value]).getTime();return F.value==="asc"?Rt-D:D-Rt}})});Nn(()=>l.value.filter(G=>{var j;return G.createur.id===((j=r.user)==null?void 0:j.id)})),Nn(()=>l.value.filter(G=>{var j,X,Rt;return r.isAdmin?G.createur.id!==((j=r.user)==null?void 0:j.id):r.isDealer?G.concessionnaire===((X=r.user)==null?void 0:X.id):G.client===((Rt=r.user)==null?void 0:Rt.id)}));const Ct=Nn(()=>r.isAdmin?{title:"Tous les plans",description:"Liste complète des plans",plans:l.value}:r.isDealer?{title:"Plans des clients",description:"Plans où vous êtes assigné comme concessionnaire",plans:l.value.filter(G=>{var j;return G.concessionnaire===((j=r.user)==null?void 0:j.id)})}:{title:"Mes plans",description:"Plans qui vous sont assignés ou que vous avez créés",plans:l.value.filter(G=>{var j,X;return G.client===((j=r.user)==null?void 0:j.id)||G.createur.id===((X=r.user)==null?void 0:X.id)})});Ra(async()=>{var G;await kt(),r.isAdmin?await wt():r.isDealer&&await I(((G=r.user)==null?void 0:G.id)||0)});async function kt(){try{const G=await n.fetchPlansWithDetails();l.value=G.data}catch(G){console.error("Erreur lors du chargement des plans:",G)}}async function wt(){try{const[G,j]=await Promise.all([xn.get("/users/",{params:{role:"CONCESSIONNAIRE"}}),xn.get("/users/",{params:{role:"UTILISATEUR"}})]);c.value=G.data,d.value=j.data}catch(G){console.error("Erreur lors du chargement des dealers et clients:",G)}}function et(){m.value=!0,b.value={nom:"",description:"",client:null}}async function ct(G){try{n.setCurrentPlan(G),await o.loadPlanElements(G.id),e.push("/")}catch(j){console.error("Erreur lors du chargement du plan:",j),alert("Une erreur est survenue lors du chargement du plan")}}async function Bt(G){var j;if(G!=null&&G.id&&confirm("Êtes-vous sûr de vouloir supprimer ce plan ?"))try{await n.deletePlan(G.id),await kt(),((j=n.currentPlan)==null?void 0:j.id)===G.id&&n.clearCurrentPlan()}catch(X){console.error("Erreur lors de la suppression du plan:",X),alert("Une erreur est survenue lors de la suppression du plan")}}function Yt(G){return new Date(G).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function $(G){return G?(G.first_name.charAt(0)+G.last_name.charAt(0)).toUpperCase():""}function J(G){w.value={id:G.id,nom:G.nom,description:G.description,concessionnaire:G.concessionnaire||null,client:G.client||null},G.concessionnaire&&I(G.concessionnaire),y.value=!0}async function I(G){try{const j=await xn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:G}});d.value=j.data}catch(j){console.error("Erreur lors du chargement des clients:",j),d.value=[]}}async function nt(){var G,j,X,Rt,D;C.value=null,E.value=!0;try{if(!w.value.nom.trim())throw new Error("Le nom du plan est requis");if(w.value.client&&!w.value.concessionnaire)throw new Error("Un concessionnaire doit être sélectionné pour assigner un client");await n.updatePlanDetails(w.value.id,{nom:w.value.nom.trim(),description:w.value.description.trim(),concessionnaire:w.value.concessionnaire,client:w.value.client})&&(y.value=!1,await kt())}catch(Z){if(console.error("Erreur lors de la mise à jour du plan:",Z),(j=(G=Z.response)==null?void 0:G.data)!=null&&j.detail)C.value=Z.response.data.detail;else if((Rt=(X=Z.response)==null?void 0:X.data)!=null&&Rt.non_field_errors)C.value=Z.response.data.non_field_errors[0];else if((D=Z.response)!=null&&D.data){const ut=Object.entries(Z.response.data).map(([vt,xt])=>`${vt}: ${Array.isArray(xt)?xt[0]:xt}`);C.value=ut.join(`
`)}else C.value=Z.message||"Une erreur est survenue lors de la mise à jour du plan"}finally{E.value=!1}}us(()=>w.value.concessionnaire,async G=>{G?await I(G):(d.value=[],w.value.client=null)});function K(G){const j=r.user;return j?j.user_type==="admin"?!0:j.user_type==="dealer"?G.concessionnaire===j.id:G.client===j.id||G.createur.id===j.id:!1}Nn(()=>{const G=new Map;return l.value.forEach(j=>{j.createur&&G.set(j.createur.id,j.createur),j.concessionnaire_details&&G.set(j.concessionnaire_details.id,j.concessionnaire_details),j.client_details&&G.set(j.client_details.id,j.client_details)}),G});async function tt(G){await kt(),e.push("/")}function _t(G){q.value===G?F.value=F.value==="asc"?"desc":"asc":(q.value=G,F.value="desc")}return(G,j)=>(ue(),fe("div",x6,[A("div",L6,[A("div",C6,[A("div",k6,[A("h1",P6,Ce(Ct.value.title),1),A("p",S6,Ce(Ct.value.description),1)]),A("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[A("button",{onClick:et,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),kn(r).isAdmin?(ue(),fe("div",E6,[A("div",M6,[j[14]||(j[14]=A("label",{for:"dealer-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par concessionnaire",-1)),jn(A("select",{id:"dealer-filter","onUpdate:modelValue":j[0]||(j[0]=X=>R.value=X),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[j[13]||(j[13]=A("option",{value:null},"Tous les concessionnaires",-1)),(ue(!0),fe(Mn,null,Wn(c.value,X=>(ue(),fe("option",{key:X.id,value:X.id},Ce(X.first_name)+" "+Ce(X.last_name)+" ("+Ce(X.company_name)+") ",9,A6))),128))],512),[[$s,R.value]])]),R.value?(ue(),fe("div",B6,[j[16]||(j[16]=A("label",{for:"client-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par client",-1)),jn(A("select",{id:"client-filter","onUpdate:modelValue":j[1]||(j[1]=X=>O.value=X),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[j[15]||(j[15]=A("option",{value:null},"Tous les clients",-1)),(ue(!0),fe(Mn,null,Wn(V.value,X=>(ue(),fe("option",{key:X.id,value:X.id},Ce(X.first_name)+" "+Ce(X.last_name)+" ("+Ce(X.company_name)+") ",9,T6))),128))],512),[[$s,O.value]])])):an("",!0)])):kn(r).isDealer?(ue(),fe("div",N6,[A("div",D6,[j[18]||(j[18]=A("label",{for:"client-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par client",-1)),jn(A("select",{id:"client-filter","onUpdate:modelValue":j[2]||(j[2]=X=>O.value=X),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[j[17]||(j[17]=A("option",{value:null},"Tous les clients",-1)),(ue(!0),fe(Mn,null,Wn(d.value,X=>(ue(),fe("option",{key:X.id,value:X.id},Ce(X.first_name)+" "+Ce(X.last_name)+" ("+Ce(X.company_name)+") ",9,O6))),128))],512),[[$s,O.value]])])])):an("",!0),A("div",I6,[A("div",R6,[A("div",F6,[A("table",j6,[A("thead",z6,[A("tr",null,[A("th",U6,[A("button",{onClick:j[3]||(j[3]=X=>_t("nom")),class:"group inline-flex items-center"},[j[20]||(j[20]=yi(" Nom ")),A("span",q6,[(ue(),fe("svg",{class:Kr(["h-5 w-5",{"text-gray-900":q.value==="nom","text-gray-400":q.value!=="nom","rotate-180":q.value==="nom"&&F.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},j[19]||(j[19]=[A("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),j[25]||(j[25]=A("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),kn(r).isDealer?an("",!0):(ue(),fe("th",$6," Concessionnaire ")),kn(r).isClient?an("",!0):(ue(),fe("th",G6," Client ")),A("th",V6,[A("button",{onClick:j[4]||(j[4]=X=>_t("date_creation")),class:"group inline-flex items-center"},[j[22]||(j[22]=yi(" Créé le ")),A("span",H6,[(ue(),fe("svg",{class:Kr(["h-5 w-5",{"text-gray-900":q.value==="date_creation","text-gray-400":q.value!=="date_creation","rotate-180":q.value==="date_creation"&&F.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},j[21]||(j[21]=[A("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),A("th",W6,[A("button",{onClick:j[5]||(j[5]=X=>_t("date_modification")),class:"group inline-flex items-center"},[j[24]||(j[24]=yi(" Modifié le ")),A("span",Z6,[(ue(),fe("svg",{class:Kr(["h-5 w-5",{"text-gray-900":q.value==="date_modification","text-gray-400":q.value!=="date_modification","rotate-180":q.value==="date_modification"&&F.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},j[23]||(j[23]=[A("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),j[26]||(j[26]=A("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[A("span",{class:"sr-only"},"Actions")],-1))])]),A("tbody",K6,[Y.value.length===0?(ue(),fe("tr",Y6,j[27]||(j[27]=[A("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun plan disponible ",-1)]))):an("",!0),(ue(!0),fe(Mn,null,Wn(Y.value,X=>(ue(),fe("tr",{key:X.id,class:"hover:bg-gray-50"},[A("td",J6,Ce(X.nom),1),A("td",X6,Ce(X.description||"-"),1),kn(r).isDealer?an("",!0):(ue(),fe("td",Q6,[X.concessionnaire_details?(ue(),fe("div",tk,[A("div",ek,[A("div",nk,[A("span",ik,Ce($(X.concessionnaire_details)),1)])]),A("div",rk,[A("div",sk,Ce(kn(Dl)(X.concessionnaire_details)),1)])])):(ue(),fe("div",ok,"-"))])),kn(r).isClient?an("",!0):(ue(),fe("td",ak,[X.client_details?(ue(),fe("div",lk,[A("div",uk,[A("div",ck,[A("span",hk,Ce($(X.client_details)),1)])]),A("div",fk,[A("div",dk,Ce(kn(Dl)(X.client_details)),1)])])):(ue(),fe("div",pk,"-"))])),A("td",mk,Ce(Yt(X.date_creation)),1),A("td",gk,Ce(Yt(X.date_modification)),1),A("td",_k,[A("button",{onClick:Rt=>ct(X),class:"text-primary-600 hover:text-primary-900 mr-4"}," Ouvrir ",8,vk),A("button",{onClick:Rt=>J(X),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,yk),K(X)?(ue(),fe("button",{key:0,onClick:Rt=>Bt(X),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,bk)):an("",!0)])]))),128))])])])])]),Di(Yg,{modelValue:m.value,"onUpdate:modelValue":j[6]||(j[6]=X=>m.value=X),dealers:c.value,clients:d.value,onCreated:tt},null,8,["modelValue","dealers","clients"]),y.value?(ue(),fe("div",wk,[A("div",xk,[A("div",Lk,[j[29]||(j[29]=A("h2",{class:"text-xl font-semibold text-gray-900"},"Modifier le plan",-1)),A("button",{onClick:j[7]||(j[7]=X=>y.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},j[28]||(j[28]=[A("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),A("form",{onSubmit:wh(nt,["prevent"]),class:"space-y-4"},[A("div",null,[j[30]||(j[30]=A("label",{for:"edit-nom",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),jn(A("input",{type:"text",id:"edit-nom","onUpdate:modelValue":j[8]||(j[8]=X=>w.value.nom=X),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",required:""},null,512),[[Bi,w.value.nom]])]),A("div",null,[j[31]||(j[31]=A("label",{for:"edit-description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),jn(A("textarea",{id:"edit-description","onUpdate:modelValue":j[9]||(j[9]=X=>w.value.description=X),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[Bi,w.value.description]])]),kn(r).isAdmin?(ue(),fe("div",Ck,[A("div",null,[j[33]||(j[33]=A("label",{for:"edit-concessionnaire",class:"block text-sm font-medium text-gray-700"}," Concessionnaire ",-1)),jn(A("select",{id:"edit-concessionnaire","onUpdate:modelValue":j[10]||(j[10]=X=>w.value.concessionnaire=X),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[j[32]||(j[32]=A("option",{value:null},"Aucun",-1)),(ue(!0),fe(Mn,null,Wn(c.value,X=>(ue(),fe("option",{key:X.id,value:X.id},Ce(kn(Dl)(X)),9,kk))),128))],512),[[$s,w.value.concessionnaire]])]),A("div",null,[j[35]||(j[35]=A("label",{for:"edit-client",class:"block text-sm font-medium text-gray-700"}," Client ",-1)),jn(A("select",{id:"edit-client","onUpdate:modelValue":j[11]||(j[11]=X=>w.value.client=X),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[j[34]||(j[34]=A("option",{value:null},"Aucun",-1)),(ue(!0),fe(Mn,null,Wn(V.value,X=>(ue(),fe("option",{key:X.id,value:X.id},Ce(kn(Dl)(X)),9,Pk))),128))],512),[[$s,w.value.client]])])])):an("",!0),C.value?(ue(),fe("div",Sk,[A("div",Ek,[j[36]||(j[36]=A("div",{class:"flex-shrink-0"},[A("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[A("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),A("div",Mk,[A("p",Ak,Ce(C.value),1)])])])):an("",!0),A("div",Bk,[A("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:j[12]||(j[12]=X=>y.value=!1)}," Annuler "),A("button",{type:"submit",disabled:E.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm disabled:opacity-50"},[E.value?(ue(),fe("svg",Nk,j[37]||(j[37]=[A("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),A("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):an("",!0),yi(" "+Ce(E.value?"Enregistrement...":"Enregistrer"),1)],8,Tk)])],32)])])):an("",!0)])]))}}),Ok={class:"h-full bg-gray-50"},Ik={class:"container mx-auto px-4 py-8"},Rk={class:"sm:flex sm:items-center"},Fk={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},jk={class:"mt-8"},zk={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 rounded-lg"},Uk={class:"overflow-x-auto"},qk={class:"min-w-full divide-y divide-gray-300"},$k={class:"divide-y divide-gray-200 bg-white"},Gk={key:0,class:"animate-pulse"},Vk={key:1},Hk={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-6"},Wk={class:"flex items-center"},Zk={class:"h-10 w-10 flex-shrink-0"},Kk={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},Yk={class:"text-primary-600 font-medium"},Jk={class:"ml-4"},Xk={class:"font-medium text-gray-900"},Qk={class:"text-gray-500"},tP={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},eP={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},nP={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},iP={class:"flex items-center"},rP={class:"font-medium"},sP={class:"text-gray-400 ml-1"},oP={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},aP=["onClick"],lP=["onClick"],uP=Es({__name:"ClientListView",setup(t){fc();const e=cs(),n=Re([]),r=Re(!0),o=Re(!1),l=Re(!1),c=Re(null),d=Re(null);Ra(async()=>{await m()});async function m(){var O;try{const q=await xn.get("/users/",{params:{dealer:(O=e.user)==null?void 0:O.id,role:"UTILISATEUR",include_plans:!0}});n.value=q.data}catch(q){console.error("Error fetching clients:",q)}finally{r.value=!1}}function y(O,q){return`${(O==null?void 0:O.charAt(0))||""}${(q==null?void 0:q.charAt(0))||""}`.toUpperCase()}function b(O){c.value=O,o.value=!0}function w(){o.value=!1,c.value=null}async function E(O){var q;try{const F=!!O.id,V=F?`/users/${O.id}/`:"/users/",Y=F?"patch":"post";O.role="UTILISATEUR",O.concessionnaire=(q=e.user)==null?void 0:q.id,await xn[Y](V,O),await m(),w()}catch(F){throw console.error("Erreur lors de la sauvegarde du client:",F),F}}function C(O){d.value=O,l.value=!0}async function R(){if(d.value)try{await xn.delete(`/users/${d.value.id}/`),await m(),l.value=!1,d.value=null}catch(O){throw console.error("Erreur lors de la suppression du client:",O),O}}return(O,q)=>{var F,V;return ue(),fe("div",Ok,[A("div",Ik,[A("div",Rk,[q[3]||(q[3]=A("div",{class:"sm:flex-auto"},[A("h1",{class:"text-2xl font-semibold text-gray-900"},"Clients"),A("p",{class:"mt-2 text-sm text-gray-700"}," Liste de vos clients et leurs plans associés ")],-1)),A("div",Fk,[A("button",{onClick:q[0]||(q[0]=Y=>o.value=!0),class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"},q[2]||(q[2]=[A("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[A("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1),yi(" Ajouter un client ")]))])]),A("div",jk,[A("div",zk,[A("div",Uk,[A("table",qk,[q[6]||(q[6]=A("thead",{class:"bg-gray-50"},[A("tr",null,[A("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," Client "),A("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Email "),A("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise "),A("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Nombre de plans "),A("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[A("span",{class:"sr-only"},"Actions")])])],-1)),A("tbody",$k,[r.value?(ue(),fe("tr",Gk,q[4]||(q[4]=[A("td",{colspan:"5",class:"py-4 px-6"},[A("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):n.value.length===0?(ue(),fe("tr",Vk,q[5]||(q[5]=[A("td",{colspan:"5",class:"py-4 px-6 text-center text-gray-500"}," Aucun client trouvé ",-1)]))):an("",!0),(ue(!0),fe(Mn,null,Wn(n.value,Y=>(ue(),fe("tr",{key:Y.id,class:"hover:bg-gray-50"},[A("td",Hk,[A("div",Wk,[A("div",Zk,[A("div",Kk,[A("span",Yk,Ce(y(Y.first_name,Y.last_name)),1)])]),A("div",Jk,[A("div",Xk,Ce(kn(Dl)(Y)),1),A("div",Qk,Ce(Y.username),1)])])]),A("td",tP,Ce(Y.email),1),A("td",eP,Ce(Y.company_name||"-"),1),A("td",nP,[A("div",iP,[A("span",rP,Ce(Y.plans_count||0),1),A("span",sP,"plan"+Ce((Y.plans_count||0)>1?"s":""),1)])]),A("td",oP,[A("button",{onClick:Ct=>b(Y),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,aP),A("button",{onClick:Ct=>C(Y),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,lP)])]))),128))])])])])]),o.value?(ue(),Ia(v1,{key:0,user:c.value||{},dealers:[{...kn(e).user,role:"CONCESSIONNAIRE"}],"is-admin":!1,"current-dealer":(V=(F=kn(e).user)==null?void 0:F.id)==null?void 0:V.toString(),onClose:w,onSave:E},null,8,["user","dealers","current-dealer"])):an("",!0),l.value?(ue(),Ia(y1,{key:1,title:"Supprimer le client",message:"Êtes-vous sûr de vouloir supprimer ce client ? Cette action est irréversible.",onConfirm:R,onCancel:q[1]||(q[1]=Y=>l.value=!1)})):an("",!0)])])}}}),b1=R5({history:p5("/"),routes:[{path:"/",name:"home",component:z0,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/plans",name:"plans",component:Dk,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/users",name:"users",component:w6,meta:{requiresAuth:!0,allowedRoles:["admin"]}},{path:"/clients",name:"clients",component:uP,meta:{requiresAuth:!0,allowedRoles:["dealer"]}},{path:"/profile",name:"profile",component:()=>Ol(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/login",name:"login",component:i3,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>Ol(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>Ol(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:Fb,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/map",name:"map",component:z0,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>Ol(()=>import("./NotFoundView.js"),[])}]});b1.beforeEach(async(t,e,n)=>{var d,m;const r=cs();if(console.log("Route:",t.path,"Auth state:",{initialized:r.initialized,isAuthenticated:r.isAuthenticated,user:r.user}),!r.initialized)try{await r.initialize(window.INITIAL_STATE)}catch(y){console.error("Error initializing auth store:",y)}const o=r.isAuthenticated,l=(d=r.user)==null?void 0:d.must_change_password,c=(m=r.user)==null?void 0:m.user_type;if(t.meta.requiresAuth&&!o){n("/login");return}if(o&&l&&t.name!=="changePassword"){n({name:"changePassword"});return}if(t.name==="changePassword"&&!l){n({name:"home"});return}if(t.meta.allowedRoles&&c&&!t.meta.allowedRoles.includes(c)){n({name:"home"});return}if(t.meta.requiresGuest&&o){n({name:"home"});return}n()});const Nd=Xv(gb),w1=ey();Nd.use(w1);Nd.use(b1);const cP=cs(w1);window.INITIAL_STATE&&cP.initialize(window.INITIAL_STATE);Nd.mount("#app");export{oi as _,Fa as a,A as b,fe as c,Es as d,an as e,jn as f,ue as g,rp as h,yi as i,Di as j,Bl as k,D_ as l,AP as m,Kr as n,Ra as o,fc as p,co as q,Re as r,jg as s,Ce as t,cs as u,Bi as v,wh as w};
