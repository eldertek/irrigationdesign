var F1=Object.defineProperty;var j1=(e,t,n)=>t in e?F1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var zt=(e,t,n)=>j1(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function pd(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const lr={},vu=[],da=()=>{},z1=()=>!1,_h=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),md=e=>e.startsWith("onUpdate:"),Xi=Object.assign,gd=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},U1=Object.prototype.hasOwnProperty,ir=(e,t)=>U1.call(e,t),dn=Array.isArray,_u=e=>gc(e)==="[object Map]",Mu=e=>gc(e)==="[object Set]",Yd=e=>gc(e)==="[object Date]",kn=e=>typeof e=="function",Xr=e=>typeof e=="string",ma=e=>typeof e=="symbol",pr=e=>e!==null&&typeof e=="object",K0=e=>(pr(e)||kn(e))&&kn(e.then)&&kn(e.catch),J0=Object.prototype.toString,gc=e=>J0.call(e),q1=e=>gc(e).slice(8,-1),Y0=e=>gc(e)==="[object Object]",vd=e=>Xr(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ku=pd(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),yh=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},$1=/-(\w)/g,_o=yh(e=>e.replace($1,(t,n)=>n?n.toUpperCase():"")),V1=/\B([A-Z])/g,Jl=yh(e=>e.replace(V1,"-$1").toLowerCase()),bh=yh(e=>e.charAt(0).toUpperCase()+e.slice(1)),Qh=yh(e=>e?`on${bh(e)}`:""),gl=(e,t)=>!Object.is(e,t),Uc=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},X0=(e,t,n,i=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:i,value:n})},eh=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Xd;const wh=()=>Xd||(Xd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function xh(e){if(dn(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],o=Xr(i)?Z1(i):xh(i);if(o)for(const a in o)t[a]=o[a]}return t}else if(Xr(e)||pr(e))return e}const G1=/;(?![^(]*\))/g,H1=/:([^]+)/,W1=/\/\*[^]*?\*\//g;function Z1(e){const t={};return e.replace(W1,"").split(G1).forEach(n=>{if(n){const i=n.split(H1);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function Ji(e){let t="";if(Xr(e))t=e;else if(dn(e))for(let n=0;n<e.length;n++){const i=Ji(e[n]);i&&(t+=i+" ")}else if(pr(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const K1="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",J1=pd(K1);function Q0(e){return!!e||e===""}function Y1(e,t){if(e.length!==t.length)return!1;let n=!0;for(let i=0;n&&i<e.length;i++)n=Hl(e[i],t[i]);return n}function Hl(e,t){if(e===t)return!0;let n=Yd(e),i=Yd(t);if(n||i)return n&&i?e.getTime()===t.getTime():!1;if(n=ma(e),i=ma(t),n||i)return e===t;if(n=dn(e),i=dn(t),n||i)return n&&i?Y1(e,t):!1;if(n=pr(e),i=pr(t),n||i){if(!n||!i)return!1;const o=Object.keys(e).length,a=Object.keys(t).length;if(o!==a)return!1;for(const u in e){const d=e.hasOwnProperty(u),m=t.hasOwnProperty(u);if(d&&!m||!d&&m||!Hl(e[u],t[u]))return!1}}return String(e)===String(t)}function _d(e,t){return e.findIndex(n=>Hl(n,t))}const em=e=>!!(e&&e.__v_isRef===!0),kt=e=>Xr(e)?e:e==null?"":dn(e)||pr(e)&&(e.toString===J0||!kn(e.toString))?em(e)?kt(e.value):JSON.stringify(e,tm,2):String(e),tm=(e,t)=>em(t)?tm(e,t.value):_u(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,o],a)=>(n[ef(i,a)+" =>"]=o,n),{})}:Mu(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>ef(n))}:ma(t)?ef(t):pr(t)&&!dn(t)&&!Y0(t)?String(t):t,ef=(e,t="")=>{var n;return ma(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let us;class nm{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=us,!t&&us&&(this.index=(us.scopes||(us.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=us;try{return us=this,t()}finally{us=n}}}on(){us=this}off(){us=this.parent}stop(t){if(this._active){this._active=!1;let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(this.effects.length=0,n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function rm(e){return new nm(e)}function im(){return us}function X1(e,t=!1){us&&us.cleanups.push(e)}let dr;const tf=new WeakSet;class sm{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,us&&us.active&&us.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,tf.has(this)&&(tf.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||am(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Qd(this),lm(this);const t=dr,n=zo;dr=this,zo=!0;try{return this.fn()}finally{um(this),dr=t,zo=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)wd(t);this.deps=this.depsTail=void 0,Qd(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?tf.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Bf(this)&&this.run()}get dirty(){return Bf(this)}}let om=0,Ju,Yu;function am(e,t=!1){if(e.flags|=8,t){e.next=Yu,Yu=e;return}e.next=Ju,Ju=e}function yd(){om++}function bd(){if(--om>0)return;if(Yu){let t=Yu;for(Yu=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Ju;){let t=Ju;for(Ju=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){e||(e=i)}t=n}}if(e)throw e}function lm(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function um(e){let t,n=e.depsTail,i=n;for(;i;){const o=i.prevDep;i.version===-1?(i===n&&(n=o),wd(i),Q1(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=o}e.deps=t,e.depsTail=n}function Bf(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(cm(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function cm(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===sc))return;e.globalVersion=sc;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!Bf(e)){e.flags&=-3;return}const n=dr,i=zo;dr=e,zo=!0;try{lm(e);const o=e.fn(e._value);(t.version===0||gl(o,e._value))&&(e._value=o,t.version++)}catch(o){throw t.version++,o}finally{dr=n,zo=i,um(e),e.flags&=-3}}function wd(e,t=!1){const{dep:n,prevSub:i,nextSub:o}=e;if(i&&(i.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=i,e.nextSub=void 0),n.subs===e&&(n.subs=i,!i&&n.computed)){n.computed.flags&=-5;for(let a=n.computed.deps;a;a=a.nextDep)wd(a,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Q1(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let zo=!0;const hm=[];function wl(){hm.push(zo),zo=!1}function xl(){const e=hm.pop();zo=e===void 0?!0:e}function Qd(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=dr;dr=void 0;try{t()}finally{dr=n}}}let sc=0;class ev{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class xd{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!dr||!zo||dr===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==dr)n=this.activeLink=new ev(dr,this),dr.deps?(n.prevDep=dr.depsTail,dr.depsTail.nextDep=n,dr.depsTail=n):dr.deps=dr.depsTail=n,fm(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const i=n.nextDep;i.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=i),n.prevDep=dr.depsTail,n.nextDep=void 0,dr.depsTail.nextDep=n,dr.depsTail=n,dr.deps===n&&(dr.deps=i)}return n}trigger(t){this.version++,sc++,this.notify(t)}notify(t){yd();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{bd()}}}function fm(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)fm(i)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const th=new WeakMap,ql=Symbol(""),Tf=Symbol(""),oc=Symbol("");function Hi(e,t,n){if(zo&&dr){let i=th.get(e);i||th.set(e,i=new Map);let o=i.get(n);o||(i.set(n,o=new xd),o.map=i,o.key=n),o.track()}}function Fa(e,t,n,i,o,a){const u=th.get(e);if(!u){sc++;return}const d=m=>{m&&m.trigger()};if(yd(),t==="clear")u.forEach(d);else{const m=dn(e),_=m&&vd(n);if(m&&n==="length"){const b=Number(i);u.forEach((w,S)=>{(S==="length"||S===oc||!ma(S)&&S>=b)&&d(w)})}else switch((n!==void 0||u.has(void 0))&&d(u.get(n)),_&&d(u.get(oc)),t){case"add":m?_&&d(u.get("length")):(d(u.get(ql)),_u(e)&&d(u.get(Tf)));break;case"delete":m||(d(u.get(ql)),_u(e)&&d(u.get(Tf)));break;case"set":_u(e)&&d(u.get(ql));break}}bd()}function tv(e,t){const n=th.get(e);return n&&n.get(t)}function ou(e){const t=Jn(e);return t===e?t:(Hi(t,"iterate",oc),mo(e)?t:t.map(Wi))}function Lh(e){return Hi(e=Jn(e),"iterate",oc),e}const nv={__proto__:null,[Symbol.iterator](){return nf(this,Symbol.iterator,Wi)},concat(...e){return ou(this).concat(...e.map(t=>dn(t)?ou(t):t))},entries(){return nf(this,"entries",e=>(e[1]=Wi(e[1]),e))},every(e,t){return Na(this,"every",e,t,void 0,arguments)},filter(e,t){return Na(this,"filter",e,t,n=>n.map(Wi),arguments)},find(e,t){return Na(this,"find",e,t,Wi,arguments)},findIndex(e,t){return Na(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Na(this,"findLast",e,t,Wi,arguments)},findLastIndex(e,t){return Na(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Na(this,"forEach",e,t,void 0,arguments)},includes(...e){return rf(this,"includes",e)},indexOf(...e){return rf(this,"indexOf",e)},join(e){return ou(this).join(e)},lastIndexOf(...e){return rf(this,"lastIndexOf",e)},map(e,t){return Na(this,"map",e,t,void 0,arguments)},pop(){return Fu(this,"pop")},push(...e){return Fu(this,"push",e)},reduce(e,...t){return ep(this,"reduce",e,t)},reduceRight(e,...t){return ep(this,"reduceRight",e,t)},shift(){return Fu(this,"shift")},some(e,t){return Na(this,"some",e,t,void 0,arguments)},splice(...e){return Fu(this,"splice",e)},toReversed(){return ou(this).toReversed()},toSorted(e){return ou(this).toSorted(e)},toSpliced(...e){return ou(this).toSpliced(...e)},unshift(...e){return Fu(this,"unshift",e)},values(){return nf(this,"values",Wi)}};function nf(e,t,n){const i=Lh(e),o=i[t]();return i!==e&&!mo(e)&&(o._next=o.next,o.next=()=>{const a=o._next();return a.value&&(a.value=n(a.value)),a}),o}const rv=Array.prototype;function Na(e,t,n,i,o,a){const u=Lh(e),d=u!==e&&!mo(e),m=u[t];if(m!==rv[t]){const w=m.apply(e,a);return d?Wi(w):w}let _=n;u!==e&&(d?_=function(w,S){return n.call(this,Wi(w),S,e)}:n.length>2&&(_=function(w,S){return n.call(this,w,S,e)}));const b=m.call(u,_,i);return d&&o?o(b):b}function ep(e,t,n,i){const o=Lh(e);let a=n;return o!==e&&(mo(e)?n.length>3&&(a=function(u,d,m){return n.call(this,u,d,m,e)}):a=function(u,d,m){return n.call(this,u,Wi(d),m,e)}),o[t](a,...i)}function rf(e,t,n){const i=Jn(e);Hi(i,"iterate",oc);const o=i[t](...n);return(o===-1||o===!1)&&kd(n[0])?(n[0]=Jn(n[0]),i[t](...n)):o}function Fu(e,t,n=[]){wl(),yd();const i=Jn(e)[t].apply(e,n);return bd(),xl(),i}const iv=pd("__proto__,__v_isRef,__isVue"),dm=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ma));function sv(e){ma(e)||(e=String(e));const t=Jn(this);return Hi(t,"has",e),t.hasOwnProperty(e)}class pm{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,i){if(n==="__v_skip")return t.__v_skip;const o=this._isReadonly,a=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return a;if(n==="__v_raw")return i===(o?a?mv:_m:a?vm:gm).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const u=dn(t);if(!o){let m;if(u&&(m=nv[n]))return m;if(n==="hasOwnProperty")return sv}const d=Reflect.get(t,n,Ur(t)?t:i);return(ma(n)?dm.has(n):iv(n))||(o||Hi(t,"get",n),a)?d:Ur(d)?u&&vd(n)?d:d.value:pr(d)?o?bm(d):Va(d):d}}class mm extends pm{constructor(t=!1){super(!1,t)}set(t,n,i,o){let a=t[n];if(!this._isShallow){const m=Wl(a);if(!mo(i)&&!Wl(i)&&(a=Jn(a),i=Jn(i)),!dn(t)&&Ur(a)&&!Ur(i))return m?!1:(a.value=i,!0)}const u=dn(t)&&vd(n)?Number(n)<t.length:ir(t,n),d=Reflect.set(t,n,i,Ur(t)?t:o);return t===Jn(o)&&(u?gl(i,a)&&Fa(t,"set",n,i):Fa(t,"add",n,i)),d}deleteProperty(t,n){const i=ir(t,n);t[n];const o=Reflect.deleteProperty(t,n);return o&&i&&Fa(t,"delete",n,void 0),o}has(t,n){const i=Reflect.has(t,n);return(!ma(n)||!dm.has(n))&&Hi(t,"has",n),i}ownKeys(t){return Hi(t,"iterate",dn(t)?"length":ql),Reflect.ownKeys(t)}}class ov extends pm{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const av=new mm,lv=new ov,uv=new mm(!0);const Nf=e=>e,Tc=e=>Reflect.getPrototypeOf(e);function cv(e,t,n){return function(...i){const o=this.__v_raw,a=Jn(o),u=_u(a),d=e==="entries"||e===Symbol.iterator&&u,m=e==="keys"&&u,_=o[e](...i),b=n?Nf:t?Df:Wi;return!t&&Hi(a,"iterate",m?Tf:ql),{next(){const{value:w,done:S}=_.next();return S?{value:w,done:S}:{value:d?[b(w[0]),b(w[1])]:b(w),done:S}},[Symbol.iterator](){return this}}}}function Nc(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function hv(e,t){const n={get(o){const a=this.__v_raw,u=Jn(a),d=Jn(o);e||(gl(o,d)&&Hi(u,"get",o),Hi(u,"get",d));const{has:m}=Tc(u),_=t?Nf:e?Df:Wi;if(m.call(u,o))return _(a.get(o));if(m.call(u,d))return _(a.get(d));a!==u&&a.get(o)},get size(){const o=this.__v_raw;return!e&&Hi(Jn(o),"iterate",ql),Reflect.get(o,"size",o)},has(o){const a=this.__v_raw,u=Jn(a),d=Jn(o);return e||(gl(o,d)&&Hi(u,"has",o),Hi(u,"has",d)),o===d?a.has(o):a.has(o)||a.has(d)},forEach(o,a){const u=this,d=u.__v_raw,m=Jn(d),_=t?Nf:e?Df:Wi;return!e&&Hi(m,"iterate",ql),d.forEach((b,w)=>o.call(a,_(b),_(w),u))}};return Xi(n,e?{add:Nc("add"),set:Nc("set"),delete:Nc("delete"),clear:Nc("clear")}:{add(o){!t&&!mo(o)&&!Wl(o)&&(o=Jn(o));const a=Jn(this);return Tc(a).has.call(a,o)||(a.add(o),Fa(a,"add",o,o)),this},set(o,a){!t&&!mo(a)&&!Wl(a)&&(a=Jn(a));const u=Jn(this),{has:d,get:m}=Tc(u);let _=d.call(u,o);_||(o=Jn(o),_=d.call(u,o));const b=m.call(u,o);return u.set(o,a),_?gl(a,b)&&Fa(u,"set",o,a):Fa(u,"add",o,a),this},delete(o){const a=Jn(this),{has:u,get:d}=Tc(a);let m=u.call(a,o);m||(o=Jn(o),m=u.call(a,o)),d&&d.call(a,o);const _=a.delete(o);return m&&Fa(a,"delete",o,void 0),_},clear(){const o=Jn(this),a=o.size!==0,u=o.clear();return a&&Fa(o,"clear",void 0,void 0),u}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=cv(o,e,t)}),n}function Ld(e,t){const n=hv(e,t);return(i,o,a)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?i:Reflect.get(ir(n,o)&&o in i?n:i,o,a)}const fv={get:Ld(!1,!1)},dv={get:Ld(!1,!0)},pv={get:Ld(!0,!1)};const gm=new WeakMap,vm=new WeakMap,_m=new WeakMap,mv=new WeakMap;function gv(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function vv(e){return e.__v_skip||!Object.isExtensible(e)?0:gv(q1(e))}function Va(e){return Wl(e)?e:Cd(e,!1,av,fv,gm)}function ym(e){return Cd(e,!1,uv,dv,vm)}function bm(e){return Cd(e,!0,lv,pv,_m)}function Cd(e,t,n,i,o){if(!pr(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=o.get(e);if(a)return a;const u=vv(e);if(u===0)return e;const d=new Proxy(e,u===2?i:n);return o.set(e,d),d}function vl(e){return Wl(e)?vl(e.__v_raw):!!(e&&e.__v_isReactive)}function Wl(e){return!!(e&&e.__v_isReadonly)}function mo(e){return!!(e&&e.__v_isShallow)}function kd(e){return e?!!e.__v_raw:!1}function Jn(e){const t=e&&e.__v_raw;return t?Jn(t):e}function Pd(e){return!ir(e,"__v_skip")&&Object.isExtensible(e)&&X0(e,"__v_skip",!0),e}const Wi=e=>pr(e)?Va(e):e,Df=e=>pr(e)?bm(e):e;function Ur(e){return e?e.__v_isRef===!0:!1}function It(e){return wm(e,!1)}function _v(e){return wm(e,!0)}function wm(e,t){return Ur(e)?e:new yv(e,t)}class yv{constructor(t,n){this.dep=new xd,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Jn(t),this._value=n?t:Wi(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,i=this.__v_isShallow||mo(t)||Wl(t);t=i?t:Jn(t),gl(t,n)&&(this._rawValue=t,this._value=i?t:Wi(t),this.dep.trigger())}}function Cn(e){return Ur(e)?e.value:e}const bv={get:(e,t,n)=>t==="__v_raw"?e:Cn(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const o=e[t];return Ur(o)&&!Ur(n)?(o.value=n,!0):Reflect.set(e,t,n,i)}};function xm(e){return vl(e)?e:new Proxy(e,bv)}function wv(e){const t=dn(e)?new Array(e.length):{};for(const n in e)t[n]=Lv(e,n);return t}class xv{constructor(t,n,i){this._object=t,this._key=n,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return tv(Jn(this._object),this._key)}}function Lv(e,t,n){const i=e[t];return Ur(i)?i:new xv(e,t,n)}class Cv{constructor(t,n,i){this.fn=t,this.setter=n,this._value=void 0,this.dep=new xd(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=sc-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&dr!==this)return am(this,!0),!0}get value(){const t=this.dep.track();return cm(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function kv(e,t,n=!1){let i,o;return kn(e)?i=e:(i=e.get,o=e.set),new Cv(i,o,n)}const Dc={},nh=new WeakMap;let Dl;function Pv(e,t=!1,n=Dl){if(n){let i=nh.get(n);i||nh.set(n,i=[]),i.push(e)}}function Ev(e,t,n=lr){const{immediate:i,deep:o,once:a,scheduler:u,augmentJob:d,call:m}=n,_=ke=>o?ke:mo(ke)||o===!1||o===0?ja(ke,1):ja(ke);let b,w,S,C,F=!1,R=!1;if(Ur(e)?(w=()=>e.value,F=mo(e)):vl(e)?(w=()=>_(e),F=!0):dn(e)?(R=!0,F=e.some(ke=>vl(ke)||mo(ke)),w=()=>e.map(ke=>{if(Ur(ke))return ke.value;if(vl(ke))return _(ke);if(kn(ke))return m?m(ke,2):ke()})):kn(e)?t?w=m?()=>m(e,2):e:w=()=>{if(S){wl();try{S()}finally{xl()}}const ke=Dl;Dl=b;try{return m?m(e,3,[C]):e(C)}finally{Dl=ke}}:w=da,t&&o){const ke=w,Ce=o===!0?1/0:o;w=()=>ja(ke(),Ce)}const $=im(),j=()=>{b.stop(),$&&$.active&&gd($.effects,b)};if(a&&t){const ke=t;t=(...Ce)=>{ke(...Ce),j()}}let G=R?new Array(e.length).fill(Dc):Dc;const Y=ke=>{if(!(!(b.flags&1)||!b.dirty&&!ke))if(t){const Ce=b.run();if(o||F||(R?Ce.some((be,ie)=>gl(be,G[ie])):gl(Ce,G))){S&&S();const be=Dl;Dl=b;try{const ie=[Ce,G===Dc?void 0:R&&G[0]===Dc?[]:G,C];m?m(t,3,ie):t(...ie),G=Ce}finally{Dl=be}}}else b.run()};return d&&d(Y),b=new sm(w),b.scheduler=u?()=>u(Y,!1):Y,C=ke=>Pv(ke,!1,b),S=b.onStop=()=>{const ke=nh.get(b);if(ke){if(m)m(ke,4);else for(const Ce of ke)Ce();nh.delete(b)}},t?i?Y(!0):G=b.run():u?u(Y.bind(null,!0),!0):b.run(),j.pause=b.pause.bind(b),j.resume=b.resume.bind(b),j.stop=j,j}function ja(e,t=1/0,n){if(t<=0||!pr(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Ur(e))ja(e.value,t,n);else if(dn(e))for(let i=0;i<e.length;i++)ja(e[i],t,n);else if(Mu(e)||_u(e))e.forEach(i=>{ja(i,t,n)});else if(Y0(e)){for(const i in e)ja(e[i],t,n);for(const i of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,i)&&ja(e[i],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function vc(e,t,n,i){try{return i?e(...i):e()}catch(o){Ch(o,t,n)}}function ga(e,t,n,i){if(kn(e)){const o=vc(e,t,n,i);return o&&K0(o)&&o.catch(a=>{Ch(a,t,n)}),o}if(dn(e)){const o=[];for(let a=0;a<e.length;a++)o.push(ga(e[a],t,n,i));return o}}function Ch(e,t,n,i=!0){const o=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:u}=t&&t.appContext.config||lr;if(t){let d=t.parent;const m=t.proxy,_=`https://vuejs.org/error-reference/#runtime-${n}`;for(;d;){const b=d.ec;if(b){for(let w=0;w<b.length;w++)if(b[w](e,m,_)===!1)return}d=d.parent}if(a){wl(),vc(a,null,10,[e,m,_]),xl();return}}Sv(e,n,o,i,u)}function Sv(e,t,n,i=!0,o=!1){if(o)throw e;console.error(e)}const cs=[];let ca=-1;const yu=[];let fl=null,hu=0;const Lm=Promise.resolve();let rh=null;function Gs(e){const t=rh||Lm;return e?t.then(this?e.bind(this):e):t}function Mv(e){let t=ca+1,n=cs.length;for(;t<n;){const i=t+n>>>1,o=cs[i],a=ac(o);a<e||a===e&&o.flags&2?t=i+1:n=i}return t}function Ed(e){if(!(e.flags&1)){const t=ac(e),n=cs[cs.length-1];!n||!(e.flags&2)&&t>=ac(n)?cs.push(e):cs.splice(Mv(t),0,e),e.flags|=1,Cm()}}function Cm(){rh||(rh=Lm.then(Pm))}function Av(e){dn(e)?yu.push(...e):fl&&e.id===-1?fl.splice(hu+1,0,e):e.flags&1||(yu.push(e),e.flags|=1),Cm()}function tp(e,t,n=ca+1){for(;n<cs.length;n++){const i=cs[n];if(i&&i.flags&2){if(e&&i.id!==e.uid)continue;cs.splice(n,1),n--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function km(e){if(yu.length){const t=[...new Set(yu)].sort((n,i)=>ac(n)-ac(i));if(yu.length=0,fl){fl.push(...t);return}for(fl=t,hu=0;hu<fl.length;hu++){const n=fl[hu];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}fl=null,hu=0}}const ac=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Pm(e){try{for(ca=0;ca<cs.length;ca++){const t=cs[ca];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),vc(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;ca<cs.length;ca++){const t=cs[ca];t&&(t.flags&=-2)}ca=-1,cs.length=0,km(),rh=null,(cs.length||yu.length)&&Pm()}}let Es=null,Em=null;function ih(e){const t=Es;return Es=e,Em=e&&e.type.__scopeId||null,t}function Il(e,t=Es,n){if(!t||e._n)return e;const i=(...o)=>{i._d&&hp(-1);const a=ih(t);let u;try{u=e(...o)}finally{ih(a),i._d&&hp(1)}return u};return i._n=!0,i._c=!0,i._d=!0,i}function jn(e,t){if(Es===null)return e;const n=Mh(Es),i=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[a,u,d,m=lr]=t[o];a&&(kn(a)&&(a={mounted:a,updated:a}),a.deep&&ja(u),i.push({dir:a,instance:n,value:u,oldValue:void 0,arg:d,modifiers:m}))}return e}function Tl(e,t,n,i){const o=e.dirs,a=t&&t.dirs;for(let u=0;u<o.length;u++){const d=o[u];a&&(d.oldValue=a[u].value);let m=d.dir[i];m&&(wl(),ga(m,n,8,[e.el,d,e,t]),xl())}}const Bv=Symbol("_vte"),Tv=e=>e.__isTeleport;function Sd(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Sd(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function Ms(e,t){return kn(e)?Xi({name:e.name},t,{setup:e}):e}function Sm(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function sh(e,t,n,i,o=!1){if(dn(e)){e.forEach((F,R)=>sh(F,t&&(dn(t)?t[R]:t),n,i,o));return}if(Xu(i)&&!o){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&sh(e,t,n,i.component.subTree);return}const a=i.shapeFlag&4?Mh(i.component):i.el,u=o?null:a,{i:d,r:m}=e,_=t&&t.r,b=d.refs===lr?d.refs={}:d.refs,w=d.setupState,S=Jn(w),C=w===lr?()=>!1:F=>ir(S,F);if(_!=null&&_!==m&&(Xr(_)?(b[_]=null,C(_)&&(w[_]=null)):Ur(_)&&(_.value=null)),kn(m))vc(m,d,12,[u,b]);else{const F=Xr(m),R=Ur(m);if(F||R){const $=()=>{if(e.f){const j=F?C(m)?w[m]:b[m]:m.value;o?dn(j)&&gd(j,a):dn(j)?j.includes(a)||j.push(a):F?(b[m]=[a],C(m)&&(w[m]=b[m])):(m.value=[a],e.k&&(b[e.k]=m.value))}else F?(b[m]=u,C(m)&&(w[m]=u)):R&&(m.value=u,e.k&&(b[e.k]=u))};u?($.id=-1,Vs($,n)):$()}}}wh().requestIdleCallback;wh().cancelIdleCallback;const Xu=e=>!!e.type.__asyncLoader,Mm=e=>e.type.__isKeepAlive;function Nv(e,t){Am(e,"a",t)}function Dv(e,t){Am(e,"da",t)}function Am(e,t,n=Pi){const i=e.__wdc||(e.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(kh(t,i,n),n){let o=n.parent;for(;o&&o.parent;)Mm(o.parent.vnode)&&Ov(i,t,n,o),o=o.parent}}function Ov(e,t,n,i){const o=kh(t,e,i,!0);Ph(()=>{gd(i[t],o)},n)}function kh(e,t,n=Pi,i=!1){if(n){const o=n[e]||(n[e]=[]),a=t.__weh||(t.__weh=(...u)=>{wl();const d=_c(n),m=ga(t,n,e,u);return d(),xl(),m});return i?o.unshift(a):o.push(a),a}}const Ga=e=>(t,n=Pi)=>{(!uc||e==="sp")&&kh(e,(...i)=>t(...i),n)},Rv=Ga("bm"),$a=Ga("m"),Iv=Ga("bu"),Fv=Ga("u"),Md=Ga("bum"),Ph=Ga("um"),jv=Ga("sp"),zv=Ga("rtg"),Uv=Ga("rtc");function qv(e,t=Pi){kh("ec",e,t)}const $v="components";function Vv(e,t){return Hv($v,e,!0,t)||e}const Gv=Symbol.for("v-ndc");function Hv(e,t,n=!0,i=!1){const o=Es||Pi;if(o){const a=o.type;{const d=N_(a,!1);if(d&&(d===t||d===_o(t)||d===bh(_o(t))))return a}const u=np(o[e]||a[e],t)||np(o.appContext[e],t);return!u&&i?a:u}}function np(e,t){return e&&(e[t]||e[_o(t)]||e[bh(_o(t))])}function Wn(e,t,n,i){let o;const a=n,u=dn(e);if(u||Xr(e)){const d=u&&vl(e);let m=!1;d&&(m=!mo(e),e=Lh(e)),o=new Array(e.length);for(let _=0,b=e.length;_<b;_++)o[_]=t(m?Wi(e[_]):e[_],_,void 0,a)}else if(typeof e=="number"){o=new Array(e);for(let d=0;d<e;d++)o[d]=t(d+1,d,void 0,a)}else if(pr(e))if(e[Symbol.iterator])o=Array.from(e,(d,m)=>t(d,m,void 0,a));else{const d=Object.keys(e);o=new Array(d.length);for(let m=0,_=d.length;m<_;m++){const b=d[m];o[m]=t(e[b],b,m,a)}}else o=[];return o}const Of=e=>e?Ym(e)?Mh(e):Of(e.parent):null,Qu=Xi(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Of(e.parent),$root:e=>Of(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Tm(e),$forceUpdate:e=>e.f||(e.f=()=>{Ed(e.update)}),$nextTick:e=>e.n||(e.n=Gs.bind(e.proxy)),$watch:e=>p_.bind(e)}),sf=(e,t)=>e!==lr&&!e.__isScriptSetup&&ir(e,t),Wv={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:i,data:o,props:a,accessCache:u,type:d,appContext:m}=e;let _;if(t[0]!=="$"){const C=u[t];if(C!==void 0)switch(C){case 1:return i[t];case 2:return o[t];case 4:return n[t];case 3:return a[t]}else{if(sf(i,t))return u[t]=1,i[t];if(o!==lr&&ir(o,t))return u[t]=2,o[t];if((_=e.propsOptions[0])&&ir(_,t))return u[t]=3,a[t];if(n!==lr&&ir(n,t))return u[t]=4,n[t];Rf&&(u[t]=0)}}const b=Qu[t];let w,S;if(b)return t==="$attrs"&&Hi(e.attrs,"get",""),b(e);if((w=d.__cssModules)&&(w=w[t]))return w;if(n!==lr&&ir(n,t))return u[t]=4,n[t];if(S=m.config.globalProperties,ir(S,t))return S[t]},set({_:e},t,n){const{data:i,setupState:o,ctx:a}=e;return sf(o,t)?(o[t]=n,!0):i!==lr&&ir(i,t)?(i[t]=n,!0):ir(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:o,propsOptions:a}},u){let d;return!!n[u]||e!==lr&&ir(e,u)||sf(t,u)||(d=a[0])&&ir(d,u)||ir(i,u)||ir(Qu,u)||ir(o.config.globalProperties,u)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:ir(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function rp(e){return dn(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Rf=!0;function Zv(e){const t=Tm(e),n=e.proxy,i=e.ctx;Rf=!1,t.beforeCreate&&ip(t.beforeCreate,e,"bc");const{data:o,computed:a,methods:u,watch:d,provide:m,inject:_,created:b,beforeMount:w,mounted:S,beforeUpdate:C,updated:F,activated:R,deactivated:$,beforeDestroy:j,beforeUnmount:G,destroyed:Y,unmounted:ke,render:Ce,renderTracked:be,renderTriggered:ie,errorCaptured:re,serverPrefetch:Ie,expose:Je,inheritAttrs:V,components:X,directives:N,filters:te}=t;if(_&&Kv(_,i,null),u)for(const me in u){const U=u[me];kn(U)&&(i[me]=U.bind(n))}if(o){const me=o.call(n,n);pr(me)&&(e.data=Va(me))}if(Rf=!0,a)for(const me in a){const U=a[me],I=kn(U)?U.bind(n,n):kn(U.get)?U.get.bind(n,n):da,Q=!kn(U)&&kn(U.set)?U.set.bind(n):da,Re=Nn({get:I,set:Q});Object.defineProperty(i,me,{enumerable:!0,configurable:!0,get:()=>Re.value,set:O=>Re.value=O})}if(d)for(const me in d)Bm(d[me],i,n,me);if(m){const me=kn(m)?m.call(n):m;Reflect.ownKeys(me).forEach(U=>{qc(U,me[U])})}b&&ip(b,e,"c");function H(me,U){dn(U)?U.forEach(I=>me(I.bind(n))):U&&me(U.bind(n))}if(H(Rv,w),H($a,S),H(Iv,C),H(Fv,F),H(Nv,R),H(Dv,$),H(qv,re),H(Uv,be),H(zv,ie),H(Md,G),H(Ph,ke),H(jv,Ie),dn(Je))if(Je.length){const me=e.exposed||(e.exposed={});Je.forEach(U=>{Object.defineProperty(me,U,{get:()=>n[U],set:I=>n[U]=I})})}else e.exposed||(e.exposed={});Ce&&e.render===da&&(e.render=Ce),V!=null&&(e.inheritAttrs=V),X&&(e.components=X),N&&(e.directives=N),Ie&&Sm(e)}function Kv(e,t,n=da){dn(e)&&(e=If(e));for(const i in e){const o=e[i];let a;pr(o)?"default"in o?a=go(o.from||i,o.default,!0):a=go(o.from||i):a=go(o),Ur(a)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>a.value,set:u=>a.value=u}):t[i]=a}}function ip(e,t,n){ga(dn(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function Bm(e,t,n,i){let o=i.includes(".")?Hm(n,i):()=>n[i];if(Xr(e)){const a=t[e];kn(a)&&Yi(o,a)}else if(kn(e))Yi(o,e.bind(n));else if(pr(e))if(dn(e))e.forEach(a=>Bm(a,t,n,i));else{const a=kn(e.handler)?e.handler.bind(n):t[e.handler];kn(a)&&Yi(o,a,e)}}function Tm(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:o,optionsCache:a,config:{optionMergeStrategies:u}}=e.appContext,d=a.get(t);let m;return d?m=d:!o.length&&!n&&!i?m=t:(m={},o.length&&o.forEach(_=>oh(m,_,u,!0)),oh(m,t,u)),pr(t)&&a.set(t,m),m}function oh(e,t,n,i=!1){const{mixins:o,extends:a}=t;a&&oh(e,a,n,!0),o&&o.forEach(u=>oh(e,u,n,!0));for(const u in t)if(!(i&&u==="expose")){const d=Jv[u]||n&&n[u];e[u]=d?d(e[u],t[u]):t[u]}return e}const Jv={data:sp,props:op,emits:op,methods:Wu,computed:Wu,beforeCreate:ls,created:ls,beforeMount:ls,mounted:ls,beforeUpdate:ls,updated:ls,beforeDestroy:ls,beforeUnmount:ls,destroyed:ls,unmounted:ls,activated:ls,deactivated:ls,errorCaptured:ls,serverPrefetch:ls,components:Wu,directives:Wu,watch:Xv,provide:sp,inject:Yv};function sp(e,t){return t?e?function(){return Xi(kn(e)?e.call(this,this):e,kn(t)?t.call(this,this):t)}:t:e}function Yv(e,t){return Wu(If(e),If(t))}function If(e){if(dn(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ls(e,t){return e?[...new Set([].concat(e,t))]:t}function Wu(e,t){return e?Xi(Object.create(null),e,t):t}function op(e,t){return e?dn(e)&&dn(t)?[...new Set([...e,...t])]:Xi(Object.create(null),rp(e),rp(t??{})):t}function Xv(e,t){if(!e)return t;if(!t)return e;const n=Xi(Object.create(null),e);for(const i in t)n[i]=ls(e[i],t[i]);return n}function Nm(){return{app:null,config:{isNativeTag:z1,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Qv=0;function e_(e,t){return function(i,o=null){kn(i)||(i=Xi({},i)),o!=null&&!pr(o)&&(o=null);const a=Nm(),u=new WeakSet,d=[];let m=!1;const _=a.app={_uid:Qv++,_component:i,_props:o,_container:null,_context:a,_instance:null,version:O_,get config(){return a.config},set config(b){},use(b,...w){return u.has(b)||(b&&kn(b.install)?(u.add(b),b.install(_,...w)):kn(b)&&(u.add(b),b(_,...w))),_},mixin(b){return a.mixins.includes(b)||a.mixins.push(b),_},component(b,w){return w?(a.components[b]=w,_):a.components[b]},directive(b,w){return w?(a.directives[b]=w,_):a.directives[b]},mount(b,w,S){if(!m){const C=_._ceVNode||Nr(i,o);return C.appContext=a,S===!0?S="svg":S===!1&&(S=void 0),e(C,b,S),m=!0,_._container=b,b.__vue_app__=_,Mh(C.component)}},onUnmount(b){d.push(b)},unmount(){m&&(ga(d,_._instance,16),e(null,_._container),delete _._container.__vue_app__)},provide(b,w){return a.provides[b]=w,_},runWithContext(b){const w=$l;$l=_;try{return b()}finally{$l=w}}};return _}}let $l=null;function qc(e,t){if(Pi){let n=Pi.provides;const i=Pi.parent&&Pi.parent.provides;i===n&&(n=Pi.provides=Object.create(i)),n[e]=t}}function go(e,t,n=!1){const i=Pi||Es;if(i||$l){const o=$l?$l._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return n&&kn(t)?t.call(i&&i.proxy):t}}function t_(){return!!(Pi||Es||$l)}const Dm={},Om=()=>Object.create(Dm),Rm=e=>Object.getPrototypeOf(e)===Dm;function n_(e,t,n,i=!1){const o={},a=Om();e.propsDefaults=Object.create(null),Im(e,t,o,a);for(const u in e.propsOptions[0])u in o||(o[u]=void 0);n?e.props=i?o:ym(o):e.type.props?e.props=o:e.props=a,e.attrs=a}function r_(e,t,n,i){const{props:o,attrs:a,vnode:{patchFlag:u}}=e,d=Jn(o),[m]=e.propsOptions;let _=!1;if((i||u>0)&&!(u&16)){if(u&8){const b=e.vnode.dynamicProps;for(let w=0;w<b.length;w++){let S=b[w];if(Eh(e.emitsOptions,S))continue;const C=t[S];if(m)if(ir(a,S))C!==a[S]&&(a[S]=C,_=!0);else{const F=_o(S);o[F]=Ff(m,d,F,C,e,!1)}else C!==a[S]&&(a[S]=C,_=!0)}}}else{Im(e,t,o,a)&&(_=!0);let b;for(const w in d)(!t||!ir(t,w)&&((b=Jl(w))===w||!ir(t,b)))&&(m?n&&(n[w]!==void 0||n[b]!==void 0)&&(o[w]=Ff(m,d,w,void 0,e,!0)):delete o[w]);if(a!==d)for(const w in a)(!t||!ir(t,w))&&(delete a[w],_=!0)}_&&Fa(e.attrs,"set","")}function Im(e,t,n,i){const[o,a]=e.propsOptions;let u=!1,d;if(t)for(let m in t){if(Ku(m))continue;const _=t[m];let b;o&&ir(o,b=_o(m))?!a||!a.includes(b)?n[b]=_:(d||(d={}))[b]=_:Eh(e.emitsOptions,m)||(!(m in i)||_!==i[m])&&(i[m]=_,u=!0)}if(a){const m=Jn(n),_=d||lr;for(let b=0;b<a.length;b++){const w=a[b];n[w]=Ff(o,m,w,_[w],e,!ir(_,w))}}return u}function Ff(e,t,n,i,o,a){const u=e[n];if(u!=null){const d=ir(u,"default");if(d&&i===void 0){const m=u.default;if(u.type!==Function&&!u.skipFactory&&kn(m)){const{propsDefaults:_}=o;if(n in _)i=_[n];else{const b=_c(o);i=_[n]=m.call(null,t),b()}}else i=m;o.ce&&o.ce._setProp(n,i)}u[0]&&(a&&!d?i=!1:u[1]&&(i===""||i===Jl(n))&&(i=!0))}return i}const i_=new WeakMap;function Fm(e,t,n=!1){const i=n?i_:t.propsCache,o=i.get(e);if(o)return o;const a=e.props,u={},d=[];let m=!1;if(!kn(e)){const b=w=>{m=!0;const[S,C]=Fm(w,t,!0);Xi(u,S),C&&d.push(...C)};!n&&t.mixins.length&&t.mixins.forEach(b),e.extends&&b(e.extends),e.mixins&&e.mixins.forEach(b)}if(!a&&!m)return pr(e)&&i.set(e,vu),vu;if(dn(a))for(let b=0;b<a.length;b++){const w=_o(a[b]);ap(w)&&(u[w]=lr)}else if(a)for(const b in a){const w=_o(b);if(ap(w)){const S=a[b],C=u[w]=dn(S)||kn(S)?{type:S}:Xi({},S),F=C.type;let R=!1,$=!0;if(dn(F))for(let j=0;j<F.length;++j){const G=F[j],Y=kn(G)&&G.name;if(Y==="Boolean"){R=!0;break}else Y==="String"&&($=!1)}else R=kn(F)&&F.name==="Boolean";C[0]=R,C[1]=$,(R||ir(C,"default"))&&d.push(w)}}const _=[u,d];return pr(e)&&i.set(e,_),_}function ap(e){return e[0]!=="$"&&!Ku(e)}const jm=e=>e[0]==="_"||e==="$stable",Ad=e=>dn(e)?e.map(ha):[ha(e)],s_=(e,t,n)=>{if(t._n)return t;const i=Il((...o)=>Ad(t(...o)),n);return i._c=!1,i},zm=(e,t,n)=>{const i=e._ctx;for(const o in e){if(jm(o))continue;const a=e[o];if(kn(a))t[o]=s_(o,a,i);else if(a!=null){const u=Ad(a);t[o]=()=>u}}},Um=(e,t)=>{const n=Ad(t);e.slots.default=()=>n},qm=(e,t,n)=>{for(const i in t)(n||i!=="_")&&(e[i]=t[i])},o_=(e,t,n)=>{const i=e.slots=Om();if(e.vnode.shapeFlag&32){const o=t._;o?(qm(i,t,n),n&&X0(i,"_",o,!0)):zm(t,i)}else t&&Um(e,t)},a_=(e,t,n)=>{const{vnode:i,slots:o}=e;let a=!0,u=lr;if(i.shapeFlag&32){const d=t._;d?n&&d===1?a=!1:qm(o,t,n):(a=!t.$stable,zm(t,o)),u=t}else t&&(Um(e,t),u={default:1});if(a)for(const d in o)!jm(d)&&u[d]==null&&delete o[d]},Vs=w_;function l_(e){return u_(e)}function u_(e,t){const n=wh();n.__VUE__=!0;const{insert:i,remove:o,patchProp:a,createElement:u,createText:d,createComment:m,setText:_,setElementText:b,parentNode:w,nextSibling:S,setScopeId:C=da,insertStaticContent:F}=e,R=(ne,fe,De,Be=null,ce=null,Ge=null,it=void 0,Qe=null,lt=!!fe.dynamicChildren)=>{if(ne===fe)return;ne&&!ju(ne,fe)&&(Be=he(ne),O(ne,ce,Ge,!0),ne=null),fe.patchFlag===-2&&(lt=!1,fe.dynamicChildren=null);const{type:Oe,ref:Pe,shapeFlag:ot}=fe;switch(Oe){case Sh:$(ne,fe,De,Be);break;case Zl:j(ne,fe,De,Be);break;case $c:ne==null&&G(fe,De,Be,it);break;case Sn:X(ne,fe,De,Be,ce,Ge,it,Qe,lt);break;default:ot&1?Ce(ne,fe,De,Be,ce,Ge,it,Qe,lt):ot&6?N(ne,fe,De,Be,ce,Ge,it,Qe,lt):(ot&64||ot&128)&&Oe.process(ne,fe,De,Be,ce,Ge,it,Qe,lt,Ve)}Pe!=null&&ce&&sh(Pe,ne&&ne.ref,Ge,fe||ne,!fe)},$=(ne,fe,De,Be)=>{if(ne==null)i(fe.el=d(fe.children),De,Be);else{const ce=fe.el=ne.el;fe.children!==ne.children&&_(ce,fe.children)}},j=(ne,fe,De,Be)=>{ne==null?i(fe.el=m(fe.children||""),De,Be):fe.el=ne.el},G=(ne,fe,De,Be)=>{[ne.el,ne.anchor]=F(ne.children,fe,De,Be,ne.el,ne.anchor)},Y=({el:ne,anchor:fe},De,Be)=>{let ce;for(;ne&&ne!==fe;)ce=S(ne),i(ne,De,Be),ne=ce;i(fe,De,Be)},ke=({el:ne,anchor:fe})=>{let De;for(;ne&&ne!==fe;)De=S(ne),o(ne),ne=De;o(fe)},Ce=(ne,fe,De,Be,ce,Ge,it,Qe,lt)=>{fe.type==="svg"?it="svg":fe.type==="math"&&(it="mathml"),ne==null?be(fe,De,Be,ce,Ge,it,Qe,lt):Ie(ne,fe,ce,Ge,it,Qe,lt)},be=(ne,fe,De,Be,ce,Ge,it,Qe)=>{let lt,Oe;const{props:Pe,shapeFlag:ot,transition:_t,dirs:Ct}=ne;if(lt=ne.el=u(ne.type,Ge,Pe&&Pe.is,Pe),ot&8?b(lt,ne.children):ot&16&&re(ne.children,lt,null,Be,ce,of(ne,Ge),it,Qe),Ct&&Tl(ne,null,Be,"created"),ie(lt,ne,ne.scopeId,it,Be),Pe){for(const Ot in Pe)Ot!=="value"&&!Ku(Ot)&&a(lt,Ot,null,Pe[Ot],Ge,Be);"value"in Pe&&a(lt,"value",null,Pe.value,Ge),(Oe=Pe.onVnodeBeforeMount)&&aa(Oe,Be,ne)}Ct&&Tl(ne,null,Be,"beforeMount");const ze=c_(ce,_t);ze&&_t.beforeEnter(lt),i(lt,fe,De),((Oe=Pe&&Pe.onVnodeMounted)||ze||Ct)&&Vs(()=>{Oe&&aa(Oe,Be,ne),ze&&_t.enter(lt),Ct&&Tl(ne,null,Be,"mounted")},ce)},ie=(ne,fe,De,Be,ce)=>{if(De&&C(ne,De),Be)for(let Ge=0;Ge<Be.length;Ge++)C(ne,Be[Ge]);if(ce){let Ge=ce.subTree;if(fe===Ge||Zm(Ge.type)&&(Ge.ssContent===fe||Ge.ssFallback===fe)){const it=ce.vnode;ie(ne,it,it.scopeId,it.slotScopeIds,ce.parent)}}},re=(ne,fe,De,Be,ce,Ge,it,Qe,lt=0)=>{for(let Oe=lt;Oe<ne.length;Oe++){const Pe=ne[Oe]=Qe?dl(ne[Oe]):ha(ne[Oe]);R(null,Pe,fe,De,Be,ce,Ge,it,Qe)}},Ie=(ne,fe,De,Be,ce,Ge,it)=>{const Qe=fe.el=ne.el;let{patchFlag:lt,dynamicChildren:Oe,dirs:Pe}=fe;lt|=ne.patchFlag&16;const ot=ne.props||lr,_t=fe.props||lr;let Ct;if(De&&Nl(De,!1),(Ct=_t.onVnodeBeforeUpdate)&&aa(Ct,De,fe,ne),Pe&&Tl(fe,ne,De,"beforeUpdate"),De&&Nl(De,!0),(ot.innerHTML&&_t.innerHTML==null||ot.textContent&&_t.textContent==null)&&b(Qe,""),Oe?Je(ne.dynamicChildren,Oe,Qe,De,Be,of(fe,ce),Ge):it||U(ne,fe,Qe,null,De,Be,of(fe,ce),Ge,!1),lt>0){if(lt&16)V(Qe,ot,_t,De,ce);else if(lt&2&&ot.class!==_t.class&&a(Qe,"class",null,_t.class,ce),lt&4&&a(Qe,"style",ot.style,_t.style,ce),lt&8){const ze=fe.dynamicProps;for(let Ot=0;Ot<ze.length;Ot++){const Nt=ze[Ot],Ut=ot[Nt],Ht=_t[Nt];(Ht!==Ut||Nt==="value")&&a(Qe,Nt,Ut,Ht,ce,De)}}lt&1&&ne.children!==fe.children&&b(Qe,fe.children)}else!it&&Oe==null&&V(Qe,ot,_t,De,ce);((Ct=_t.onVnodeUpdated)||Pe)&&Vs(()=>{Ct&&aa(Ct,De,fe,ne),Pe&&Tl(fe,ne,De,"updated")},Be)},Je=(ne,fe,De,Be,ce,Ge,it)=>{for(let Qe=0;Qe<fe.length;Qe++){const lt=ne[Qe],Oe=fe[Qe],Pe=lt.el&&(lt.type===Sn||!ju(lt,Oe)||lt.shapeFlag&70)?w(lt.el):De;R(lt,Oe,Pe,null,Be,ce,Ge,it,!0)}},V=(ne,fe,De,Be,ce)=>{if(fe!==De){if(fe!==lr)for(const Ge in fe)!Ku(Ge)&&!(Ge in De)&&a(ne,Ge,fe[Ge],null,ce,Be);for(const Ge in De){if(Ku(Ge))continue;const it=De[Ge],Qe=fe[Ge];it!==Qe&&Ge!=="value"&&a(ne,Ge,Qe,it,ce,Be)}"value"in De&&a(ne,"value",fe.value,De.value,ce)}},X=(ne,fe,De,Be,ce,Ge,it,Qe,lt)=>{const Oe=fe.el=ne?ne.el:d(""),Pe=fe.anchor=ne?ne.anchor:d("");let{patchFlag:ot,dynamicChildren:_t,slotScopeIds:Ct}=fe;Ct&&(Qe=Qe?Qe.concat(Ct):Ct),ne==null?(i(Oe,De,Be),i(Pe,De,Be),re(fe.children||[],De,Pe,ce,Ge,it,Qe,lt)):ot>0&&ot&64&&_t&&ne.dynamicChildren?(Je(ne.dynamicChildren,_t,De,ce,Ge,it,Qe),(fe.key!=null||ce&&fe===ce.subTree)&&$m(ne,fe,!0)):U(ne,fe,De,Pe,ce,Ge,it,Qe,lt)},N=(ne,fe,De,Be,ce,Ge,it,Qe,lt)=>{fe.slotScopeIds=Qe,ne==null?fe.shapeFlag&512?ce.ctx.activate(fe,De,Be,it,lt):te(fe,De,Be,ce,Ge,it,lt):W(ne,fe,lt)},te=(ne,fe,De,Be,ce,Ge,it)=>{const Qe=ne.component=S_(ne,Be,ce);if(Mm(ne)&&(Qe.ctx.renderer=Ve),M_(Qe,!1,it),Qe.asyncDep){if(ce&&ce.registerDep(Qe,H,it),!ne.el){const lt=Qe.subTree=Nr(Zl);j(null,lt,fe,De)}}else H(Qe,ne,fe,De,ce,Ge,it)},W=(ne,fe,De)=>{const Be=fe.component=ne.component;if(y_(ne,fe,De))if(Be.asyncDep&&!Be.asyncResolved){me(Be,fe,De);return}else Be.next=fe,Be.update();else fe.el=ne.el,Be.vnode=fe},H=(ne,fe,De,Be,ce,Ge,it)=>{const Qe=()=>{if(ne.isMounted){let{next:ot,bu:_t,u:Ct,parent:ze,vnode:Ot}=ne;{const Pn=Vm(ne);if(Pn){ot&&(ot.el=Ot.el,me(ne,ot,it)),Pn.asyncDep.then(()=>{ne.isUnmounted||Qe()});return}}let Nt=ot,Ut;Nl(ne,!1),ot?(ot.el=Ot.el,me(ne,ot,it)):ot=Ot,_t&&Uc(_t),(Ut=ot.props&&ot.props.onVnodeBeforeUpdate)&&aa(Ut,ze,ot,Ot),Nl(ne,!0);const Ht=up(ne),Dt=ne.subTree;ne.subTree=Ht,R(Dt,Ht,w(Dt.el),he(Dt),ne,ce,Ge),ot.el=Ht.el,Nt===null&&b_(ne,Ht.el),Ct&&Vs(Ct,ce),(Ut=ot.props&&ot.props.onVnodeUpdated)&&Vs(()=>aa(Ut,ze,ot,Ot),ce)}else{let ot;const{el:_t,props:Ct}=fe,{bm:ze,m:Ot,parent:Nt,root:Ut,type:Ht}=ne,Dt=Xu(fe);Nl(ne,!1),ze&&Uc(ze),!Dt&&(ot=Ct&&Ct.onVnodeBeforeMount)&&aa(ot,Nt,fe),Nl(ne,!0);{Ut.ce&&Ut.ce._injectChildStyle(Ht);const Pn=ne.subTree=up(ne);R(null,Pn,De,Be,ne,ce,Ge),fe.el=Pn.el}if(Ot&&Vs(Ot,ce),!Dt&&(ot=Ct&&Ct.onVnodeMounted)){const Pn=fe;Vs(()=>aa(ot,Nt,Pn),ce)}(fe.shapeFlag&256||Nt&&Xu(Nt.vnode)&&Nt.vnode.shapeFlag&256)&&ne.a&&Vs(ne.a,ce),ne.isMounted=!0,fe=De=Be=null}};ne.scope.on();const lt=ne.effect=new sm(Qe);ne.scope.off();const Oe=ne.update=lt.run.bind(lt),Pe=ne.job=lt.runIfDirty.bind(lt);Pe.i=ne,Pe.id=ne.uid,lt.scheduler=()=>Ed(Pe),Nl(ne,!0),Oe()},me=(ne,fe,De)=>{fe.component=ne;const Be=ne.vnode.props;ne.vnode=fe,ne.next=null,r_(ne,fe.props,Be,De),a_(ne,fe.children,De),wl(),tp(ne),xl()},U=(ne,fe,De,Be,ce,Ge,it,Qe,lt=!1)=>{const Oe=ne&&ne.children,Pe=ne?ne.shapeFlag:0,ot=fe.children,{patchFlag:_t,shapeFlag:Ct}=fe;if(_t>0){if(_t&128){Q(Oe,ot,De,Be,ce,Ge,it,Qe,lt);return}else if(_t&256){I(Oe,ot,De,Be,ce,Ge,it,Qe,lt);return}}Ct&8?(Pe&16&&_e(Oe,ce,Ge),ot!==Oe&&b(De,ot)):Pe&16?Ct&16?Q(Oe,ot,De,Be,ce,Ge,it,Qe,lt):_e(Oe,ce,Ge,!0):(Pe&8&&b(De,""),Ct&16&&re(ot,De,Be,ce,Ge,it,Qe,lt))},I=(ne,fe,De,Be,ce,Ge,it,Qe,lt)=>{ne=ne||vu,fe=fe||vu;const Oe=ne.length,Pe=fe.length,ot=Math.min(Oe,Pe);let _t;for(_t=0;_t<ot;_t++){const Ct=fe[_t]=lt?dl(fe[_t]):ha(fe[_t]);R(ne[_t],Ct,De,null,ce,Ge,it,Qe,lt)}Oe>Pe?_e(ne,ce,Ge,!0,!1,ot):re(fe,De,Be,ce,Ge,it,Qe,lt,ot)},Q=(ne,fe,De,Be,ce,Ge,it,Qe,lt)=>{let Oe=0;const Pe=fe.length;let ot=ne.length-1,_t=Pe-1;for(;Oe<=ot&&Oe<=_t;){const Ct=ne[Oe],ze=fe[Oe]=lt?dl(fe[Oe]):ha(fe[Oe]);if(ju(Ct,ze))R(Ct,ze,De,null,ce,Ge,it,Qe,lt);else break;Oe++}for(;Oe<=ot&&Oe<=_t;){const Ct=ne[ot],ze=fe[_t]=lt?dl(fe[_t]):ha(fe[_t]);if(ju(Ct,ze))R(Ct,ze,De,null,ce,Ge,it,Qe,lt);else break;ot--,_t--}if(Oe>ot){if(Oe<=_t){const Ct=_t+1,ze=Ct<Pe?fe[Ct].el:Be;for(;Oe<=_t;)R(null,fe[Oe]=lt?dl(fe[Oe]):ha(fe[Oe]),De,ze,ce,Ge,it,Qe,lt),Oe++}}else if(Oe>_t)for(;Oe<=ot;)O(ne[Oe],ce,Ge,!0),Oe++;else{const Ct=Oe,ze=Oe,Ot=new Map;for(Oe=ze;Oe<=_t;Oe++){const ln=fe[Oe]=lt?dl(fe[Oe]):ha(fe[Oe]);ln.key!=null&&Ot.set(ln.key,Oe)}let Nt,Ut=0;const Ht=_t-ze+1;let Dt=!1,Pn=0;const en=new Array(Ht);for(Oe=0;Oe<Ht;Oe++)en[Oe]=0;for(Oe=Ct;Oe<=ot;Oe++){const ln=ne[Oe];if(Ut>=Ht){O(ln,ce,Ge,!0);continue}let xn;if(ln.key!=null)xn=Ot.get(ln.key);else for(Nt=ze;Nt<=_t;Nt++)if(en[Nt-ze]===0&&ju(ln,fe[Nt])){xn=Nt;break}xn===void 0?O(ln,ce,Ge,!0):(en[xn-ze]=Oe+1,xn>=Pn?Pn=xn:Dt=!0,R(ln,fe[xn],De,null,ce,Ge,it,Qe,lt),Ut++)}const Yn=Dt?h_(en):vu;for(Nt=Yn.length-1,Oe=Ht-1;Oe>=0;Oe--){const ln=ze+Oe,xn=fe[ln],Xn=ln+1<Pe?fe[ln+1].el:Be;en[Oe]===0?R(null,xn,De,Xn,ce,Ge,it,Qe,lt):Dt&&(Nt<0||Oe!==Yn[Nt]?Re(xn,De,Xn,2):Nt--)}}},Re=(ne,fe,De,Be,ce=null)=>{const{el:Ge,type:it,transition:Qe,children:lt,shapeFlag:Oe}=ne;if(Oe&6){Re(ne.component.subTree,fe,De,Be);return}if(Oe&128){ne.suspense.move(fe,De,Be);return}if(Oe&64){it.move(ne,fe,De,Ve);return}if(it===Sn){i(Ge,fe,De);for(let ot=0;ot<lt.length;ot++)Re(lt[ot],fe,De,Be);i(ne.anchor,fe,De);return}if(it===$c){Y(ne,fe,De);return}if(Be!==2&&Oe&1&&Qe)if(Be===0)Qe.beforeEnter(Ge),i(Ge,fe,De),Vs(()=>Qe.enter(Ge),ce);else{const{leave:ot,delayLeave:_t,afterLeave:Ct}=Qe,ze=()=>i(Ge,fe,De),Ot=()=>{ot(Ge,()=>{ze(),Ct&&Ct()})};_t?_t(Ge,ze,Ot):Ot()}else i(Ge,fe,De)},O=(ne,fe,De,Be=!1,ce=!1)=>{const{type:Ge,props:it,ref:Qe,children:lt,dynamicChildren:Oe,shapeFlag:Pe,patchFlag:ot,dirs:_t,cacheIndex:Ct}=ne;if(ot===-2&&(ce=!1),Qe!=null&&sh(Qe,null,De,ne,!0),Ct!=null&&(fe.renderCache[Ct]=void 0),Pe&256){fe.ctx.deactivate(ne);return}const ze=Pe&1&&_t,Ot=!Xu(ne);let Nt;if(Ot&&(Nt=it&&it.onVnodeBeforeUnmount)&&aa(Nt,fe,ne),Pe&6)de(ne.component,De,Be);else{if(Pe&128){ne.suspense.unmount(De,Be);return}ze&&Tl(ne,null,fe,"beforeUnmount"),Pe&64?ne.type.remove(ne,fe,De,Ve,Be):Oe&&!Oe.hasOnce&&(Ge!==Sn||ot>0&&ot&64)?_e(Oe,fe,De,!1,!0):(Ge===Sn&&ot&384||!ce&&Pe&16)&&_e(lt,fe,De),Be&&J(ne)}(Ot&&(Nt=it&&it.onVnodeUnmounted)||ze)&&Vs(()=>{Nt&&aa(Nt,fe,ne),ze&&Tl(ne,null,fe,"unmounted")},De)},J=ne=>{const{type:fe,el:De,anchor:Be,transition:ce}=ne;if(fe===Sn){se(De,Be);return}if(fe===$c){ke(ne);return}const Ge=()=>{o(De),ce&&!ce.persisted&&ce.afterLeave&&ce.afterLeave()};if(ne.shapeFlag&1&&ce&&!ce.persisted){const{leave:it,delayLeave:Qe}=ce,lt=()=>it(De,Ge);Qe?Qe(ne.el,Ge,lt):lt()}else Ge()},se=(ne,fe)=>{let De;for(;ne!==fe;)De=S(ne),o(ne),ne=De;o(fe)},de=(ne,fe,De)=>{const{bum:Be,scope:ce,job:Ge,subTree:it,um:Qe,m:lt,a:Oe}=ne;lp(lt),lp(Oe),Be&&Uc(Be),ce.stop(),Ge&&(Ge.flags|=8,O(it,ne,fe,De)),Qe&&Vs(Qe,fe),Vs(()=>{ne.isUnmounted=!0},fe),fe&&fe.pendingBranch&&!fe.isUnmounted&&ne.asyncDep&&!ne.asyncResolved&&ne.suspenseId===fe.pendingId&&(fe.deps--,fe.deps===0&&fe.resolve())},_e=(ne,fe,De,Be=!1,ce=!1,Ge=0)=>{for(let it=Ge;it<ne.length;it++)O(ne[it],fe,De,Be,ce)},he=ne=>{if(ne.shapeFlag&6)return he(ne.component.subTree);if(ne.shapeFlag&128)return ne.suspense.next();const fe=S(ne.anchor||ne.el),De=fe&&fe[Bv];return De?S(De):fe};let we=!1;const Ee=(ne,fe,De)=>{ne==null?fe._vnode&&O(fe._vnode,null,null,!0):R(fe._vnode||null,ne,fe,null,null,null,De),fe._vnode=ne,we||(we=!0,tp(),km(),we=!1)},Ve={p:R,um:O,m:Re,r:J,mt:te,mc:re,pc:U,pbc:Je,n:he,o:e};return{render:Ee,hydrate:void 0,createApp:e_(Ee)}}function of({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Nl({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function c_(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function $m(e,t,n=!1){const i=e.children,o=t.children;if(dn(i)&&dn(o))for(let a=0;a<i.length;a++){const u=i[a];let d=o[a];d.shapeFlag&1&&!d.dynamicChildren&&((d.patchFlag<=0||d.patchFlag===32)&&(d=o[a]=dl(o[a]),d.el=u.el),!n&&d.patchFlag!==-2&&$m(u,d)),d.type===Sh&&(d.el=u.el)}}function h_(e){const t=e.slice(),n=[0];let i,o,a,u,d;const m=e.length;for(i=0;i<m;i++){const _=e[i];if(_!==0){if(o=n[n.length-1],e[o]<_){t[i]=o,n.push(i);continue}for(a=0,u=n.length-1;a<u;)d=a+u>>1,e[n[d]]<_?a=d+1:u=d;_<e[n[a]]&&(a>0&&(t[i]=n[a-1]),n[a]=i)}}for(a=n.length,u=n[a-1];a-- >0;)n[a]=u,u=t[u];return n}function Vm(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Vm(t)}function lp(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const f_=Symbol.for("v-scx"),d_=()=>go(f_);function Yi(e,t,n){return Gm(e,t,n)}function Gm(e,t,n=lr){const{immediate:i,deep:o,flush:a,once:u}=n,d=Xi({},n),m=t&&i||!t&&a!=="post";let _;if(uc){if(a==="sync"){const C=d_();_=C.__watcherHandles||(C.__watcherHandles=[])}else if(!m){const C=()=>{};return C.stop=da,C.resume=da,C.pause=da,C}}const b=Pi;d.call=(C,F,R)=>ga(C,b,F,R);let w=!1;a==="post"?d.scheduler=C=>{Vs(C,b&&b.suspense)}:a!=="sync"&&(w=!0,d.scheduler=(C,F)=>{F?C():Ed(C)}),d.augmentJob=C=>{t&&(C.flags|=4),w&&(C.flags|=2,b&&(C.id=b.uid,C.i=b))};const S=Ev(e,t,d);return uc&&(_?_.push(S):m&&S()),S}function p_(e,t,n){const i=this.proxy,o=Xr(e)?e.includes(".")?Hm(i,e):()=>i[e]:e.bind(i,i);let a;kn(t)?a=t:(a=t.handler,n=t);const u=_c(this),d=Gm(o,a.bind(i),n);return u(),d}function Hm(e,t){const n=t.split(".");return()=>{let i=e;for(let o=0;o<n.length&&i;o++)i=i[n[o]];return i}}const m_=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${_o(t)}Modifiers`]||e[`${Jl(t)}Modifiers`];function g_(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||lr;let o=n;const a=t.startsWith("update:"),u=a&&m_(i,t.slice(7));u&&(u.trim&&(o=n.map(b=>Xr(b)?b.trim():b)),u.number&&(o=n.map(eh)));let d,m=i[d=Qh(t)]||i[d=Qh(_o(t))];!m&&a&&(m=i[d=Qh(Jl(t))]),m&&ga(m,e,6,o);const _=i[d+"Once"];if(_){if(!e.emitted)e.emitted={};else if(e.emitted[d])return;e.emitted[d]=!0,ga(_,e,6,o)}}function Wm(e,t,n=!1){const i=t.emitsCache,o=i.get(e);if(o!==void 0)return o;const a=e.emits;let u={},d=!1;if(!kn(e)){const m=_=>{const b=Wm(_,t,!0);b&&(d=!0,Xi(u,b))};!n&&t.mixins.length&&t.mixins.forEach(m),e.extends&&m(e.extends),e.mixins&&e.mixins.forEach(m)}return!a&&!d?(pr(e)&&i.set(e,null),null):(dn(a)?a.forEach(m=>u[m]=null):Xi(u,a),pr(e)&&i.set(e,u),u)}function Eh(e,t){return!e||!_h(t)?!1:(t=t.slice(2).replace(/Once$/,""),ir(e,t[0].toLowerCase()+t.slice(1))||ir(e,Jl(t))||ir(e,t))}function up(e){const{type:t,vnode:n,proxy:i,withProxy:o,propsOptions:[a],slots:u,attrs:d,emit:m,render:_,renderCache:b,props:w,data:S,setupState:C,ctx:F,inheritAttrs:R}=e,$=ih(e);let j,G;try{if(n.shapeFlag&4){const ke=o||i,Ce=ke;j=ha(_.call(Ce,ke,b,w,C,S,F)),G=d}else{const ke=t;j=ha(ke.length>1?ke(w,{attrs:d,slots:u,emit:m}):ke(w,null)),G=t.props?d:v_(d)}}catch(ke){ec.length=0,Ch(ke,e,1),j=Nr(Zl)}let Y=j;if(G&&R!==!1){const ke=Object.keys(G),{shapeFlag:Ce}=Y;ke.length&&Ce&7&&(a&&ke.some(md)&&(G=__(G,a)),Y=Cu(Y,G,!1,!0))}return n.dirs&&(Y=Cu(Y,null,!1,!0),Y.dirs=Y.dirs?Y.dirs.concat(n.dirs):n.dirs),n.transition&&Sd(Y,n.transition),j=Y,ih($),j}const v_=e=>{let t;for(const n in e)(n==="class"||n==="style"||_h(n))&&((t||(t={}))[n]=e[n]);return t},__=(e,t)=>{const n={};for(const i in e)(!md(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function y_(e,t,n){const{props:i,children:o,component:a}=e,{props:u,children:d,patchFlag:m}=t,_=a.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&m>=0){if(m&1024)return!0;if(m&16)return i?cp(i,u,_):!!u;if(m&8){const b=t.dynamicProps;for(let w=0;w<b.length;w++){const S=b[w];if(u[S]!==i[S]&&!Eh(_,S))return!0}}}else return(o||d)&&(!d||!d.$stable)?!0:i===u?!1:i?u?cp(i,u,_):!0:!!u;return!1}function cp(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let o=0;o<i.length;o++){const a=i[o];if(t[a]!==e[a]&&!Eh(n,a))return!0}return!1}function b_({vnode:e,parent:t},n){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i===e)(e=t.vnode).el=n,t=t.parent;else break}}const Zm=e=>e.__isSuspense;function w_(e,t){t&&t.pendingBranch?dn(e)?t.effects.push(...e):t.effects.push(e):Av(e)}const Sn=Symbol.for("v-fgt"),Sh=Symbol.for("v-txt"),Zl=Symbol.for("v-cmt"),$c=Symbol.for("v-stc"),ec=[];let Ws=null;function ut(e=!1){ec.push(Ws=e?null:[])}function x_(){ec.pop(),Ws=ec[ec.length-1]||null}let lc=1;function hp(e,t=!1){lc+=e,e<0&&Ws&&t&&(Ws.hasOnce=!0)}function Km(e){return e.dynamicChildren=lc>0?Ws||vu:null,x_(),lc>0&&Ws&&Ws.push(e),e}function dt(e,t,n,i,o,a){return Km(B(e,t,n,i,o,a,!0))}function Ua(e,t,n,i,o){return Km(Nr(e,t,n,i,o,!0))}function ah(e){return e?e.__v_isVNode===!0:!1}function ju(e,t){return e.type===t.type&&e.key===t.key}const Jm=({key:e})=>e??null,Vc=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Xr(e)||Ur(e)||kn(e)?{i:Es,r:e,k:t,f:!!n}:e:null);function B(e,t=null,n=null,i=0,o=null,a=e===Sn?0:1,u=!1,d=!1){const m={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Jm(t),ref:t&&Vc(t),scopeId:Em,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:i,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:Es};return d?(Bd(m,n),a&128&&e.normalize(m)):n&&(m.shapeFlag|=Xr(n)?8:16),lc>0&&!u&&Ws&&(m.patchFlag>0||a&6)&&m.patchFlag!==32&&Ws.push(m),m}const Nr=L_;function L_(e,t=null,n=null,i=0,o=null,a=!1){if((!e||e===Gv)&&(e=Zl),ah(e)){const d=Cu(e,t,!0);return n&&Bd(d,n),lc>0&&!a&&Ws&&(d.shapeFlag&6?Ws[Ws.indexOf(e)]=d:Ws.push(d)),d.patchFlag=-2,d}if(D_(e)&&(e=e.__vccOpts),t){t=C_(t);let{class:d,style:m}=t;d&&!Xr(d)&&(t.class=Ji(d)),pr(m)&&(kd(m)&&!dn(m)&&(m=Xi({},m)),t.style=xh(m))}const u=Xr(e)?1:Zm(e)?128:Tv(e)?64:pr(e)?4:kn(e)?2:0;return B(e,t,n,i,o,u,a,!0)}function C_(e){return e?kd(e)||Rm(e)?Xi({},e):e:null}function Cu(e,t,n=!1,i=!1){const{props:o,ref:a,patchFlag:u,children:d,transition:m}=e,_=t?k_(o||{},t):o,b={__v_isVNode:!0,__v_skip:!0,type:e.type,props:_,key:_&&Jm(_),ref:t&&t.ref?n&&a?dn(a)?a.concat(Vc(t)):[a,Vc(t)]:Vc(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:d,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Sn?u===-1?16:u|16:u,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:m,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Cu(e.ssContent),ssFallback:e.ssFallback&&Cu(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return m&&i&&Sd(b,m.clone(b)),b}function yr(e=" ",t=0){return Nr(Sh,null,e,t)}function fp(e,t){const n=Nr($c,null,e);return n.staticCount=t,n}function un(e="",t=!1){return t?(ut(),Ua(Zl,null,e)):Nr(Zl,null,e)}function ha(e){return e==null||typeof e=="boolean"?Nr(Zl):dn(e)?Nr(Sn,null,e.slice()):ah(e)?dl(e):Nr(Sh,null,String(e))}function dl(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Cu(e)}function Bd(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(dn(t))n=16;else if(typeof t=="object")if(i&65){const o=t.default;o&&(o._c&&(o._d=!1),Bd(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!Rm(t)?t._ctx=Es:o===3&&Es&&(Es.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else kn(t)?(t={default:t,_ctx:Es},n=32):(t=String(t),i&64?(n=16,t=[yr(t)]):n=8);e.children=t,e.shapeFlag|=n}function k_(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const o in i)if(o==="class")t.class!==i.class&&(t.class=Ji([t.class,i.class]));else if(o==="style")t.style=xh([t.style,i.style]);else if(_h(o)){const a=t[o],u=i[o];u&&a!==u&&!(dn(a)&&a.includes(u))&&(t[o]=a?[].concat(a,u):u)}else o!==""&&(t[o]=i[o])}return t}function aa(e,t,n,i=null){ga(e,t,7,[n,i])}const P_=Nm();let E_=0;function S_(e,t,n){const i=e.type,o=(t?t.appContext:e.appContext)||P_,a={uid:E_++,vnode:e,type:i,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new nm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Fm(i,o),emitsOptions:Wm(i,o),emit:null,emitted:null,propsDefaults:lr,inheritAttrs:i.inheritAttrs,ctx:lr,data:lr,props:lr,attrs:lr,slots:lr,refs:lr,setupState:lr,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=g_.bind(null,a),e.ce&&e.ce(a),a}let Pi=null,lh,jf;{const e=wh(),t=(n,i)=>{let o;return(o=e[n])||(o=e[n]=[]),o.push(i),a=>{o.length>1?o.forEach(u=>u(a)):o[0](a)}};lh=t("__VUE_INSTANCE_SETTERS__",n=>Pi=n),jf=t("__VUE_SSR_SETTERS__",n=>uc=n)}const _c=e=>{const t=Pi;return lh(e),e.scope.on(),()=>{e.scope.off(),lh(t)}},dp=()=>{Pi&&Pi.scope.off(),lh(null)};function Ym(e){return e.vnode.shapeFlag&4}let uc=!1;function M_(e,t=!1,n=!1){t&&jf(t);const{props:i,children:o}=e.vnode,a=Ym(e);n_(e,i,a,t),o_(e,o,n);const u=a?A_(e,t):void 0;return t&&jf(!1),u}function A_(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Wv);const{setup:i}=n;if(i){wl();const o=e.setupContext=i.length>1?T_(e):null,a=_c(e),u=vc(i,e,0,[e.props,o]),d=K0(u);if(xl(),a(),(d||e.sp)&&!Xu(e)&&Sm(e),d){if(u.then(dp,dp),t)return u.then(m=>{pp(e,m)}).catch(m=>{Ch(m,e,0)});e.asyncDep=u}else pp(e,u)}else Xm(e)}function pp(e,t,n){kn(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:pr(t)&&(e.setupState=xm(t)),Xm(e)}function Xm(e,t,n){const i=e.type;e.render||(e.render=i.render||da);{const o=_c(e);wl();try{Zv(e)}finally{xl(),o()}}}const B_={get(e,t){return Hi(e,"get",""),e[t]}};function T_(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,B_),slots:e.slots,emit:e.emit,expose:t}}function Mh(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(xm(Pd(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Qu)return Qu[n](e)},has(t,n){return n in t||n in Qu}})):e.proxy}function N_(e,t=!0){return kn(e)?e.displayName||e.name:e.name||t&&e.__name}function D_(e){return kn(e)&&"__vccOpts"in e}const Nn=(e,t)=>kv(e,t,uc);function Qm(e,t,n){const i=arguments.length;return i===2?pr(t)&&!dn(t)?ah(t)?Nr(e,null,[t]):Nr(e,t):Nr(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&ah(n)&&(n=[n]),Nr(e,t,n))}const O_="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let zf;const mp=typeof window<"u"&&window.trustedTypes;if(mp)try{zf=mp.createPolicy("vue",{createHTML:e=>e})}catch{}const eg=zf?e=>zf.createHTML(e):e=>e,R_="http://www.w3.org/2000/svg",I_="http://www.w3.org/1998/Math/MathML",Ia=typeof document<"u"?document:null,gp=Ia&&Ia.createElement("template"),F_={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const o=t==="svg"?Ia.createElementNS(R_,e):t==="mathml"?Ia.createElementNS(I_,e):n?Ia.createElement(e,{is:n}):Ia.createElement(e);return e==="select"&&i&&i.multiple!=null&&o.setAttribute("multiple",i.multiple),o},createText:e=>Ia.createTextNode(e),createComment:e=>Ia.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ia.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,o,a){const u=n?n.previousSibling:t.lastChild;if(o&&(o===a||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),!(o===a||!(o=o.nextSibling)););else{gp.innerHTML=eg(i==="svg"?`<svg>${e}</svg>`:i==="mathml"?`<math>${e}</math>`:e);const d=gp.content;if(i==="svg"||i==="mathml"){const m=d.firstChild;for(;m.firstChild;)d.appendChild(m.firstChild);d.removeChild(m)}t.insertBefore(d,n)}return[u?u.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},j_=Symbol("_vtc");function z_(e,t,n){const i=e[j_];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const uh=Symbol("_vod"),tg=Symbol("_vsh"),vp={beforeMount(e,{value:t},{transition:n}){e[uh]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):zu(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:i}){!t!=!n&&(i?t?(i.beforeEnter(e),zu(e,!0),i.enter(e)):i.leave(e,()=>{zu(e,!1)}):zu(e,t))},beforeUnmount(e,{value:t}){zu(e,t)}};function zu(e,t){e.style.display=t?e[uh]:"none",e[tg]=!t}const U_=Symbol(""),q_=/(^|;)\s*display\s*:/;function $_(e,t,n){const i=e.style,o=Xr(n);let a=!1;if(n&&!o){if(t)if(Xr(t))for(const u of t.split(";")){const d=u.slice(0,u.indexOf(":")).trim();n[d]==null&&Gc(i,d,"")}else for(const u in t)n[u]==null&&Gc(i,u,"");for(const u in n)u==="display"&&(a=!0),Gc(i,u,n[u])}else if(o){if(t!==n){const u=i[U_];u&&(n+=";"+u),i.cssText=n,a=q_.test(n)}}else t&&e.removeAttribute("style");uh in e&&(e[uh]=a?i.display:"",e[tg]&&(i.display="none"))}const _p=/\s*!important$/;function Gc(e,t,n){if(dn(n))n.forEach(i=>Gc(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=V_(e,t);_p.test(n)?e.setProperty(Jl(i),n.replace(_p,""),"important"):e[i]=n}}const yp=["Webkit","Moz","ms"],af={};function V_(e,t){const n=af[t];if(n)return n;let i=_o(t);if(i!=="filter"&&i in e)return af[t]=i;i=bh(i);for(let o=0;o<yp.length;o++){const a=yp[o]+i;if(a in e)return af[t]=a}return t}const bp="http://www.w3.org/1999/xlink";function wp(e,t,n,i,o,a=J1(t)){i&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(bp,t.slice(6,t.length)):e.setAttributeNS(bp,t,n):n==null||a&&!Q0(n)?e.removeAttribute(t):e.setAttribute(t,a?"":ma(n)?String(n):n)}function xp(e,t,n,i,o){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?eg(n):n);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const d=a==="OPTION"?e.getAttribute("value")||"":e.value,m=n==null?e.type==="checkbox"?"on":"":String(n);(d!==m||!("_value"in e))&&(e.value=m),n==null&&e.removeAttribute(t),e._value=n;return}let u=!1;if(n===""||n==null){const d=typeof e[t];d==="boolean"?n=Q0(n):n==null&&d==="string"?(n="",u=!0):d==="number"&&(n=0,u=!0)}try{e[t]=n}catch{}u&&e.removeAttribute(o||t)}function za(e,t,n,i){e.addEventListener(t,n,i)}function G_(e,t,n,i){e.removeEventListener(t,n,i)}const Lp=Symbol("_vei");function H_(e,t,n,i,o=null){const a=e[Lp]||(e[Lp]={}),u=a[t];if(i&&u)u.value=i;else{const[d,m]=W_(t);if(i){const _=a[t]=J_(i,o);za(e,d,_,m)}else u&&(G_(e,d,u,m),a[t]=void 0)}}const Cp=/(?:Once|Passive|Capture)$/;function W_(e){let t;if(Cp.test(e)){t={};let i;for(;i=e.match(Cp);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Jl(e.slice(2)),t]}let lf=0;const Z_=Promise.resolve(),K_=()=>lf||(Z_.then(()=>lf=0),lf=Date.now());function J_(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;ga(Y_(i,n.value),t,5,[i])};return n.value=e,n.attached=K_(),n}function Y_(e,t){if(dn(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>o=>!o._stopped&&i&&i(o))}else return t}const kp=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,X_=(e,t,n,i,o,a)=>{const u=o==="svg";t==="class"?z_(e,i,u):t==="style"?$_(e,n,i):_h(t)?md(t)||H_(e,t,n,i,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Q_(e,t,i,u))?(xp(e,t,i),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&wp(e,t,i,u,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Xr(i))?xp(e,_o(t),i,a,t):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),wp(e,t,i,u))};function Q_(e,t,n,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in e&&kp(t)&&kn(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return kp(t)&&Xr(n)?!1:t in e}const _l=e=>{const t=e.props["onUpdate:modelValue"]||!1;return dn(t)?n=>Uc(t,n):t};function ey(e){e.target.composing=!0}function Pp(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const vo=Symbol("_assign"),Ar={created(e,{modifiers:{lazy:t,trim:n,number:i}},o){e[vo]=_l(o);const a=i||o.props&&o.props.type==="number";za(e,t?"change":"input",u=>{if(u.target.composing)return;let d=e.value;n&&(d=d.trim()),a&&(d=eh(d)),e[vo](d)}),n&&za(e,"change",()=>{e.value=e.value.trim()}),t||(za(e,"compositionstart",ey),za(e,"compositionend",Pp),za(e,"change",Pp))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:i,trim:o,number:a}},u){if(e[vo]=_l(u),e.composing)return;const d=(a||e.type==="number")&&!/^0\d/.test(e.value)?eh(e.value):e.value,m=t??"";d!==m&&(document.activeElement===e&&e.type!=="range"&&(i&&t===n||o&&e.value.trim()===m)||(e.value=m))}},ng={deep:!0,created(e,t,n){e[vo]=_l(n),za(e,"change",()=>{const i=e._modelValue,o=ku(e),a=e.checked,u=e[vo];if(dn(i)){const d=_d(i,o),m=d!==-1;if(a&&!m)u(i.concat(o));else if(!a&&m){const _=[...i];_.splice(d,1),u(_)}}else if(Mu(i)){const d=new Set(i);a?d.add(o):d.delete(o),u(d)}else u(rg(e,a))})},mounted:Ep,beforeUpdate(e,t,n){e[vo]=_l(n),Ep(e,t,n)}};function Ep(e,{value:t,oldValue:n},i){e._modelValue=t;let o;if(dn(t))o=_d(t,i.props.value)>-1;else if(Mu(t))o=t.has(i.props.value);else{if(t===n)return;o=Hl(t,rg(e,!0))}e.checked!==o&&(e.checked=o)}const ty={created(e,{value:t},n){e.checked=Hl(t,n.props.value),e[vo]=_l(n),za(e,"change",()=>{e[vo](ku(e))})},beforeUpdate(e,{value:t,oldValue:n},i){e[vo]=_l(i),t!==n&&(e.checked=Hl(t,i.props.value))}},Hs={deep:!0,created(e,{value:t,modifiers:{number:n}},i){const o=Mu(t);za(e,"change",()=>{const a=Array.prototype.filter.call(e.options,u=>u.selected).map(u=>n?eh(ku(u)):ku(u));e[vo](e.multiple?o?new Set(a):a:a[0]),e._assigning=!0,Gs(()=>{e._assigning=!1})}),e[vo]=_l(i)},mounted(e,{value:t}){Sp(e,t)},beforeUpdate(e,t,n){e[vo]=_l(n)},updated(e,{value:t}){e._assigning||Sp(e,t)}};function Sp(e,t){const n=e.multiple,i=dn(t);if(!(n&&!i&&!Mu(t))){for(let o=0,a=e.options.length;o<a;o++){const u=e.options[o],d=ku(u);if(n)if(i){const m=typeof d;m==="string"||m==="number"?u.selected=t.some(_=>String(_)===String(d)):u.selected=_d(t,d)>-1}else u.selected=t.has(d);else if(Hl(ku(u),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function ku(e){return"_value"in e?e._value:e.value}function rg(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const ny={created(e,t,n){Oc(e,t,n,null,"created")},mounted(e,t,n){Oc(e,t,n,null,"mounted")},beforeUpdate(e,t,n,i){Oc(e,t,n,i,"beforeUpdate")},updated(e,t,n,i){Oc(e,t,n,i,"updated")}};function ry(e,t){switch(e){case"SELECT":return Hs;case"TEXTAREA":return Ar;default:switch(t){case"checkbox":return ng;case"radio":return ty;default:return Ar}}}function Oc(e,t,n,i,o){const u=ry(e.tagName,n.props&&n.props.type)[o];u&&u(e,t,n,i)}const iy=["ctrl","shift","alt","meta"],sy={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>iy.some(n=>e[`${n}Key`]&&!t.includes(n))},Ah=(e,t)=>{const n=e._withMods||(e._withMods={}),i=t.join(".");return n[i]||(n[i]=(o,...a)=>{for(let u=0;u<t.length;u++){const d=sy[t[u]];if(d&&d(o,t))return}return e(o,...a)})},oy=Xi({patchProp:X_},F_);let Mp;function ay(){return Mp||(Mp=l_(oy))}const ly=(...e)=>{const t=ay().createApp(...e),{mount:n}=t;return t.mount=i=>{const o=cy(i);if(!o)return;const a=t._component;!kn(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const u=n(o,!1,uy(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),u},t};function uy(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function cy(e){return Xr(e)?document.querySelector(e):e}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let ig;const Bh=e=>ig=e,sg=Symbol();function Uf(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var tc;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(tc||(tc={}));function hy(){const e=rm(!0),t=e.run(()=>It({}));let n=[],i=[];const o=Pd({install(a){Bh(o),o._a=a,a.provide(sg,o),a.config.globalProperties.$pinia=o,i.forEach(u=>n.push(u)),i=[]},use(a){return this._a?n.push(a):i.push(a),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return o}const og=()=>{};function Ap(e,t,n,i=og){e.push(t);const o=()=>{const a=e.indexOf(t);a>-1&&(e.splice(a,1),i())};return!n&&im()&&X1(o),o}function au(e,...t){e.slice().forEach(n=>{n(...t)})}const fy=e=>e(),Bp=Symbol(),uf=Symbol();function qf(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,i)=>e.set(i,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const i=t[n],o=e[n];Uf(o)&&Uf(i)&&e.hasOwnProperty(n)&&!Ur(i)&&!vl(i)?e[n]=qf(o,i):e[n]=i}return e}const dy=Symbol();function py(e){return!Uf(e)||!e.hasOwnProperty(dy)}const{assign:hl}=Object;function my(e){return!!(Ur(e)&&e.effect)}function gy(e,t,n,i){const{state:o,actions:a,getters:u}=t,d=n.state.value[e];let m;function _(){d||(n.state.value[e]=o?o():{});const b=wv(n.state.value[e]);return hl(b,a,Object.keys(u||{}).reduce((w,S)=>(w[S]=Pd(Nn(()=>{Bh(n);const C=n._s.get(e);return u[S].call(C,C)})),w),{}))}return m=ag(e,_,t,n,i,!0),m}function ag(e,t,n={},i,o,a){let u;const d=hl({actions:{}},n),m={deep:!0};let _,b,w=[],S=[],C;const F=i.state.value[e];!a&&!F&&(i.state.value[e]={}),It({});let R;function $(re){let Ie;_=b=!1,typeof re=="function"?(re(i.state.value[e]),Ie={type:tc.patchFunction,storeId:e,events:C}):(qf(i.state.value[e],re),Ie={type:tc.patchObject,payload:re,storeId:e,events:C});const Je=R=Symbol();Gs().then(()=>{R===Je&&(_=!0)}),b=!0,au(w,Ie,i.state.value[e])}const j=a?function(){const{state:Ie}=n,Je=Ie?Ie():{};this.$patch(V=>{hl(V,Je)})}:og;function G(){u.stop(),w=[],S=[],i._s.delete(e)}const Y=(re,Ie="")=>{if(Bp in re)return re[uf]=Ie,re;const Je=function(){Bh(i);const V=Array.from(arguments),X=[],N=[];function te(me){X.push(me)}function W(me){N.push(me)}au(S,{args:V,name:Je[uf],store:Ce,after:te,onError:W});let H;try{H=re.apply(this&&this.$id===e?this:Ce,V)}catch(me){throw au(N,me),me}return H instanceof Promise?H.then(me=>(au(X,me),me)).catch(me=>(au(N,me),Promise.reject(me))):(au(X,H),H)};return Je[Bp]=!0,Je[uf]=Ie,Je},ke={_p:i,$id:e,$onAction:Ap.bind(null,S),$patch:$,$reset:j,$subscribe(re,Ie={}){const Je=Ap(w,re,Ie.detached,()=>V()),V=u.run(()=>Yi(()=>i.state.value[e],X=>{(Ie.flush==="sync"?b:_)&&re({storeId:e,type:tc.direct,events:C},X)},hl({},m,Ie)));return Je},$dispose:G},Ce=Va(ke);i._s.set(e,Ce);const ie=(i._a&&i._a.runWithContext||fy)(()=>i._e.run(()=>(u=rm()).run(()=>t({action:Y}))));for(const re in ie){const Ie=ie[re];if(Ur(Ie)&&!my(Ie)||vl(Ie))a||(F&&py(Ie)&&(Ur(Ie)?Ie.value=F[re]:qf(Ie,F[re])),i.state.value[e][re]=Ie);else if(typeof Ie=="function"){const Je=Y(Ie,re);ie[re]=Je,d.actions[re]=Ie}}return hl(Ce,ie),hl(Jn(Ce),ie),Object.defineProperty(Ce,"$state",{get:()=>i.state.value[e],set:re=>{$(Ie=>{hl(Ie,re)})}}),i._p.forEach(re=>{hl(Ce,u.run(()=>re({store:Ce,app:i._a,pinia:i,options:d})))}),F&&a&&n.hydrate&&n.hydrate(Ce.$state,F),_=!0,b=!0,Ce}/*! #__NO_SIDE_EFFECTS__ */function Td(e,t,n){let i,o;const a=typeof t=="function";typeof e=="string"?(i=e,o=a?n:t):(o=e,i=e.id);function u(d,m){const _=t_();return d=d||(_?go(sg,null):null),d&&Bh(d),d=ig,d._s.has(i)||(a?ag(i,t,o,d):gy(i,o,d)),d._s.get(i)}return u.$id=i,u}function lg(e,t){return function(){return e.apply(t,arguments)}}const{toString:vy}=Object.prototype,{getPrototypeOf:Nd}=Object,Th=(e=>t=>{const n=vy.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),qo=e=>(e=e.toLowerCase(),t=>Th(t)===e),Nh=e=>t=>typeof t===e,{isArray:Au}=Array,cc=Nh("undefined");function _y(e){return e!==null&&!cc(e)&&e.constructor!==null&&!cc(e.constructor)&&Ks(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const ug=qo("ArrayBuffer");function yy(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&ug(e.buffer),t}const by=Nh("string"),Ks=Nh("function"),cg=Nh("number"),Dh=e=>e!==null&&typeof e=="object",wy=e=>e===!0||e===!1,Hc=e=>{if(Th(e)!=="object")return!1;const t=Nd(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},xy=qo("Date"),Ly=qo("File"),Cy=qo("Blob"),ky=qo("FileList"),Py=e=>Dh(e)&&Ks(e.pipe),Ey=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ks(e.append)&&((t=Th(e))==="formdata"||t==="object"&&Ks(e.toString)&&e.toString()==="[object FormData]"))},Sy=qo("URLSearchParams"),[My,Ay,By,Ty]=["ReadableStream","Request","Response","Headers"].map(qo),Ny=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function yc(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let i,o;if(typeof e!="object"&&(e=[e]),Au(e))for(i=0,o=e.length;i<o;i++)t.call(null,e[i],i,e);else{const a=n?Object.getOwnPropertyNames(e):Object.keys(e),u=a.length;let d;for(i=0;i<u;i++)d=a[i],t.call(null,e[d],d,e)}}function hg(e,t){t=t.toLowerCase();const n=Object.keys(e);let i=n.length,o;for(;i-- >0;)if(o=n[i],t===o.toLowerCase())return o;return null}const jl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,fg=e=>!cc(e)&&e!==jl;function $f(){const{caseless:e}=fg(this)&&this||{},t={},n=(i,o)=>{const a=e&&hg(t,o)||o;Hc(t[a])&&Hc(i)?t[a]=$f(t[a],i):Hc(i)?t[a]=$f({},i):Au(i)?t[a]=i.slice():t[a]=i};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&yc(arguments[i],n);return t}const Dy=(e,t,n,{allOwnKeys:i}={})=>(yc(t,(o,a)=>{n&&Ks(o)?e[a]=lg(o,n):e[a]=o},{allOwnKeys:i}),e),Oy=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Ry=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Iy=(e,t,n,i)=>{let o,a,u;const d={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),a=o.length;a-- >0;)u=o[a],(!i||i(u,e,t))&&!d[u]&&(t[u]=e[u],d[u]=!0);e=n!==!1&&Nd(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Fy=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return i!==-1&&i===n},jy=e=>{if(!e)return null;if(Au(e))return e;let t=e.length;if(!cg(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},zy=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Nd(Uint8Array)),Uy=(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=i.next())&&!o.done;){const a=o.value;t.call(e,a[0],a[1])}},qy=(e,t)=>{let n;const i=[];for(;(n=e.exec(t))!==null;)i.push(n);return i},$y=qo("HTMLFormElement"),Vy=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,o){return i.toUpperCase()+o}),Tp=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Gy=qo("RegExp"),dg=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};yc(n,(o,a)=>{let u;(u=t(o,a,e))!==!1&&(i[a]=u||o)}),Object.defineProperties(e,i)},Hy=e=>{dg(e,(t,n)=>{if(Ks(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=e[n];if(Ks(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Wy=(e,t)=>{const n={},i=o=>{o.forEach(a=>{n[a]=!0})};return Au(e)?i(e):i(String(e).split(t)),n},Zy=()=>{},Ky=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,cf="abcdefghijklmnopqrstuvwxyz",Np="0123456789",pg={DIGIT:Np,ALPHA:cf,ALPHA_DIGIT:cf+cf.toUpperCase()+Np},Jy=(e=16,t=pg.ALPHA_DIGIT)=>{let n="";const{length:i}=t;for(;e--;)n+=t[Math.random()*i|0];return n};function Yy(e){return!!(e&&Ks(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Xy=e=>{const t=new Array(10),n=(i,o)=>{if(Dh(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[o]=i;const a=Au(i)?[]:{};return yc(i,(u,d)=>{const m=n(u,o+1);!cc(m)&&(a[d]=m)}),t[o]=void 0,a}}return i};return n(e,0)},Qy=qo("AsyncFunction"),e2=e=>e&&(Dh(e)||Ks(e))&&Ks(e.then)&&Ks(e.catch),mg=((e,t)=>e?setImmediate:t?((n,i)=>(jl.addEventListener("message",({source:o,data:a})=>{o===jl&&a===n&&i.length&&i.shift()()},!1),o=>{i.push(o),jl.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Ks(jl.postMessage)),t2=typeof queueMicrotask<"u"?queueMicrotask.bind(jl):typeof process<"u"&&process.nextTick||mg,xt={isArray:Au,isArrayBuffer:ug,isBuffer:_y,isFormData:Ey,isArrayBufferView:yy,isString:by,isNumber:cg,isBoolean:wy,isObject:Dh,isPlainObject:Hc,isReadableStream:My,isRequest:Ay,isResponse:By,isHeaders:Ty,isUndefined:cc,isDate:xy,isFile:Ly,isBlob:Cy,isRegExp:Gy,isFunction:Ks,isStream:Py,isURLSearchParams:Sy,isTypedArray:zy,isFileList:ky,forEach:yc,merge:$f,extend:Dy,trim:Ny,stripBOM:Oy,inherits:Ry,toFlatObject:Iy,kindOf:Th,kindOfTest:qo,endsWith:Fy,toArray:jy,forEachEntry:Uy,matchAll:qy,isHTMLForm:$y,hasOwnProperty:Tp,hasOwnProp:Tp,reduceDescriptors:dg,freezeMethods:Hy,toObjectSet:Wy,toCamelCase:Vy,noop:Zy,toFiniteNumber:Ky,findKey:hg,global:jl,isContextDefined:fg,ALPHABET:pg,generateString:Jy,isSpecCompliantForm:Yy,toJSONObject:Xy,isAsyncFn:Qy,isThenable:e2,setImmediate:mg,asap:t2};function Mn(e,t,n,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),o&&(this.response=o,this.status=o.status?o.status:null)}xt.inherits(Mn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:xt.toJSONObject(this.config),code:this.code,status:this.status}}});const gg=Mn.prototype,vg={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{vg[e]={value:e}});Object.defineProperties(Mn,vg);Object.defineProperty(gg,"isAxiosError",{value:!0});Mn.from=(e,t,n,i,o,a)=>{const u=Object.create(gg);return xt.toFlatObject(e,u,function(m){return m!==Error.prototype},d=>d!=="isAxiosError"),Mn.call(u,e.message,t,n,i,o),u.cause=e,u.name=e.name,a&&Object.assign(u,a),u};const n2=null;function Vf(e){return xt.isPlainObject(e)||xt.isArray(e)}function _g(e){return xt.endsWith(e,"[]")?e.slice(0,-2):e}function Dp(e,t,n){return e?e.concat(t).map(function(o,a){return o=_g(o),!n&&a?"["+o+"]":o}).join(n?".":""):t}function r2(e){return xt.isArray(e)&&!e.some(Vf)}const i2=xt.toFlatObject(xt,{},null,function(t){return/^is[A-Z]/.test(t)});function Oh(e,t,n){if(!xt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=xt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(R,$){return!xt.isUndefined($[R])});const i=n.metaTokens,o=n.visitor||b,a=n.dots,u=n.indexes,m=(n.Blob||typeof Blob<"u"&&Blob)&&xt.isSpecCompliantForm(t);if(!xt.isFunction(o))throw new TypeError("visitor must be a function");function _(F){if(F===null)return"";if(xt.isDate(F))return F.toISOString();if(!m&&xt.isBlob(F))throw new Mn("Blob is not supported. Use a Buffer instead.");return xt.isArrayBuffer(F)||xt.isTypedArray(F)?m&&typeof Blob=="function"?new Blob([F]):Buffer.from(F):F}function b(F,R,$){let j=F;if(F&&!$&&typeof F=="object"){if(xt.endsWith(R,"{}"))R=i?R:R.slice(0,-2),F=JSON.stringify(F);else if(xt.isArray(F)&&r2(F)||(xt.isFileList(F)||xt.endsWith(R,"[]"))&&(j=xt.toArray(F)))return R=_g(R),j.forEach(function(Y,ke){!(xt.isUndefined(Y)||Y===null)&&t.append(u===!0?Dp([R],ke,a):u===null?R:R+"[]",_(Y))}),!1}return Vf(F)?!0:(t.append(Dp($,R,a),_(F)),!1)}const w=[],S=Object.assign(i2,{defaultVisitor:b,convertValue:_,isVisitable:Vf});function C(F,R){if(!xt.isUndefined(F)){if(w.indexOf(F)!==-1)throw Error("Circular reference detected in "+R.join("."));w.push(F),xt.forEach(F,function(j,G){(!(xt.isUndefined(j)||j===null)&&o.call(t,j,xt.isString(G)?G.trim():G,R,S))===!0&&C(j,R?R.concat(G):[G])}),w.pop()}}if(!xt.isObject(e))throw new TypeError("data must be an object");return C(e),t}function Op(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function Dd(e,t){this._pairs=[],e&&Oh(e,this,t)}const yg=Dd.prototype;yg.append=function(t,n){this._pairs.push([t,n])};yg.toString=function(t){const n=t?function(i){return t.call(this,i,Op)}:Op;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function s2(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function bg(e,t,n){if(!t)return e;const i=n&&n.encode||s2;xt.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let a;if(o?a=o(t,n):a=xt.isURLSearchParams(t)?t.toString():new Dd(t,n).toString(i),a){const u=e.indexOf("#");u!==-1&&(e=e.slice(0,u)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class Rp{constructor(){this.handlers=[]}use(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){xt.forEach(this.handlers,function(i){i!==null&&t(i)})}}const wg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},o2=typeof URLSearchParams<"u"?URLSearchParams:Dd,a2=typeof FormData<"u"?FormData:null,l2=typeof Blob<"u"?Blob:null,u2={isBrowser:!0,classes:{URLSearchParams:o2,FormData:a2,Blob:l2},protocols:["http","https","file","blob","url","data"]},Od=typeof window<"u"&&typeof document<"u",Gf=typeof navigator=="object"&&navigator||void 0,c2=Od&&(!Gf||["ReactNative","NativeScript","NS"].indexOf(Gf.product)<0),h2=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",f2=Od&&window.location.href||"http://localhost",d2=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Od,hasStandardBrowserEnv:c2,hasStandardBrowserWebWorkerEnv:h2,navigator:Gf,origin:f2},Symbol.toStringTag,{value:"Module"})),Zi={...d2,...u2};function p2(e,t){return Oh(e,new Zi.classes.URLSearchParams,Object.assign({visitor:function(n,i,o,a){return Zi.isNode&&xt.isBuffer(n)?(this.append(i,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}function m2(e){return xt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function g2(e){const t={},n=Object.keys(e);let i;const o=n.length;let a;for(i=0;i<o;i++)a=n[i],t[a]=e[a];return t}function xg(e){function t(n,i,o,a){let u=n[a++];if(u==="__proto__")return!0;const d=Number.isFinite(+u),m=a>=n.length;return u=!u&&xt.isArray(o)?o.length:u,m?(xt.hasOwnProp(o,u)?o[u]=[o[u],i]:o[u]=i,!d):((!o[u]||!xt.isObject(o[u]))&&(o[u]=[]),t(n,i,o[u],a)&&xt.isArray(o[u])&&(o[u]=g2(o[u])),!d)}if(xt.isFormData(e)&&xt.isFunction(e.entries)){const n={};return xt.forEachEntry(e,(i,o)=>{t(m2(i),o,n,0)}),n}return null}function v2(e,t,n){if(xt.isString(e))try{return(t||JSON.parse)(e),xt.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}const bc={transitional:wg,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const i=n.getContentType()||"",o=i.indexOf("application/json")>-1,a=xt.isObject(t);if(a&&xt.isHTMLForm(t)&&(t=new FormData(t)),xt.isFormData(t))return o?JSON.stringify(xg(t)):t;if(xt.isArrayBuffer(t)||xt.isBuffer(t)||xt.isStream(t)||xt.isFile(t)||xt.isBlob(t)||xt.isReadableStream(t))return t;if(xt.isArrayBufferView(t))return t.buffer;if(xt.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let d;if(a){if(i.indexOf("application/x-www-form-urlencoded")>-1)return p2(t,this.formSerializer).toString();if((d=xt.isFileList(t))||i.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return Oh(d?{"files[]":t}:t,m&&new m,this.formSerializer)}}return a||o?(n.setContentType("application/json",!1),v2(t)):t}],transformResponse:[function(t){const n=this.transitional||bc.transitional,i=n&&n.forcedJSONParsing,o=this.responseType==="json";if(xt.isResponse(t)||xt.isReadableStream(t))return t;if(t&&xt.isString(t)&&(i&&!this.responseType||o)){const u=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(d){if(u)throw d.name==="SyntaxError"?Mn.from(d,Mn.ERR_BAD_RESPONSE,this,null,this.response):d}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Zi.classes.FormData,Blob:Zi.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};xt.forEach(["delete","get","head","post","put","patch"],e=>{bc.headers[e]={}});const _2=xt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),y2=e=>{const t={};let n,i,o;return e&&e.split(`
`).forEach(function(u){o=u.indexOf(":"),n=u.substring(0,o).trim().toLowerCase(),i=u.substring(o+1).trim(),!(!n||t[n]&&_2[n])&&(n==="set-cookie"?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t},Ip=Symbol("internals");function Uu(e){return e&&String(e).trim().toLowerCase()}function Wc(e){return e===!1||e==null?e:xt.isArray(e)?e.map(Wc):String(e)}function b2(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}const w2=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function hf(e,t,n,i,o){if(xt.isFunction(i))return i.call(this,t,n);if(o&&(t=n),!!xt.isString(t)){if(xt.isString(i))return t.indexOf(i)!==-1;if(xt.isRegExp(i))return i.test(t)}}function x2(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,i)=>n.toUpperCase()+i)}function L2(e,t){const n=xt.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(o,a,u){return this[i].call(this,t,o,a,u)},configurable:!0})})}let Ss=class{constructor(t){t&&this.set(t)}set(t,n,i){const o=this;function a(d,m,_){const b=Uu(m);if(!b)throw new Error("header name must be a non-empty string");const w=xt.findKey(o,b);(!w||o[w]===void 0||_===!0||_===void 0&&o[w]!==!1)&&(o[w||m]=Wc(d))}const u=(d,m)=>xt.forEach(d,(_,b)=>a(_,b,m));if(xt.isPlainObject(t)||t instanceof this.constructor)u(t,n);else if(xt.isString(t)&&(t=t.trim())&&!w2(t))u(y2(t),n);else if(xt.isHeaders(t))for(const[d,m]of t.entries())a(m,d,i);else t!=null&&a(n,t,i);return this}get(t,n){if(t=Uu(t),t){const i=xt.findKey(this,t);if(i){const o=this[i];if(!n)return o;if(n===!0)return b2(o);if(xt.isFunction(n))return n.call(this,o,i);if(xt.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Uu(t),t){const i=xt.findKey(this,t);return!!(i&&this[i]!==void 0&&(!n||hf(this,this[i],i,n)))}return!1}delete(t,n){const i=this;let o=!1;function a(u){if(u=Uu(u),u){const d=xt.findKey(i,u);d&&(!n||hf(i,i[d],d,n))&&(delete i[d],o=!0)}}return xt.isArray(t)?t.forEach(a):a(t),o}clear(t){const n=Object.keys(this);let i=n.length,o=!1;for(;i--;){const a=n[i];(!t||hf(this,this[a],a,t,!0))&&(delete this[a],o=!0)}return o}normalize(t){const n=this,i={};return xt.forEach(this,(o,a)=>{const u=xt.findKey(i,a);if(u){n[u]=Wc(o),delete n[a];return}const d=t?x2(a):String(a).trim();d!==a&&delete n[a],n[d]=Wc(o),i[d]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return xt.forEach(this,(i,o)=>{i!=null&&i!==!1&&(n[o]=t&&xt.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const i=new this(t);return n.forEach(o=>i.set(o)),i}static accessor(t){const i=(this[Ip]=this[Ip]={accessors:{}}).accessors,o=this.prototype;function a(u){const d=Uu(u);i[d]||(L2(o,u),i[d]=!0)}return xt.isArray(t)?t.forEach(a):a(t),this}};Ss.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);xt.reduceDescriptors(Ss.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[n]=i}}});xt.freezeMethods(Ss);function ff(e,t){const n=this||bc,i=t||n,o=Ss.from(i.headers);let a=i.data;return xt.forEach(e,function(d){a=d.call(n,a,o.normalize(),t?t.status:void 0)}),o.normalize(),a}function Lg(e){return!!(e&&e.__CANCEL__)}function Bu(e,t,n){Mn.call(this,e??"canceled",Mn.ERR_CANCELED,t,n),this.name="CanceledError"}xt.inherits(Bu,Mn,{__CANCEL__:!0});function Cg(e,t,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(new Mn("Request failed with status code "+n.status,[Mn.ERR_BAD_REQUEST,Mn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function C2(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function k2(e,t){e=e||10;const n=new Array(e),i=new Array(e);let o=0,a=0,u;return t=t!==void 0?t:1e3,function(m){const _=Date.now(),b=i[a];u||(u=_),n[o]=m,i[o]=_;let w=a,S=0;for(;w!==o;)S+=n[w++],w=w%e;if(o=(o+1)%e,o===a&&(a=(a+1)%e),_-u<t)return;const C=b&&_-b;return C?Math.round(S*1e3/C):void 0}}function P2(e,t){let n=0,i=1e3/t,o,a;const u=(_,b=Date.now())=>{n=b,o=null,a&&(clearTimeout(a),a=null),e.apply(null,_)};return[(..._)=>{const b=Date.now(),w=b-n;w>=i?u(_,b):(o=_,a||(a=setTimeout(()=>{a=null,u(o)},i-w)))},()=>o&&u(o)]}const ch=(e,t,n=3)=>{let i=0;const o=k2(50,250);return P2(a=>{const u=a.loaded,d=a.lengthComputable?a.total:void 0,m=u-i,_=o(m),b=u<=d;i=u;const w={loaded:u,total:d,progress:d?u/d:void 0,bytes:m,rate:_||void 0,estimated:_&&d&&b?(d-u)/_:void 0,event:a,lengthComputable:d!=null,[t?"download":"upload"]:!0};e(w)},n)},Fp=(e,t)=>{const n=e!=null;return[i=>t[0]({lengthComputable:n,total:e,loaded:i}),t[1]]},jp=e=>(...t)=>xt.asap(()=>e(...t)),E2=Zi.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Zi.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Zi.origin),Zi.navigator&&/(msie|trident)/i.test(Zi.navigator.userAgent)):()=>!0,S2=Zi.hasStandardBrowserEnv?{write(e,t,n,i,o,a){const u=[e+"="+encodeURIComponent(t)];xt.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),xt.isString(i)&&u.push("path="+i),xt.isString(o)&&u.push("domain="+o),a===!0&&u.push("secure"),document.cookie=u.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function M2(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function A2(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function kg(e,t){return e&&!M2(t)?A2(e,t):t}const zp=e=>e instanceof Ss?{...e}:e;function Kl(e,t){t=t||{};const n={};function i(_,b,w,S){return xt.isPlainObject(_)&&xt.isPlainObject(b)?xt.merge.call({caseless:S},_,b):xt.isPlainObject(b)?xt.merge({},b):xt.isArray(b)?b.slice():b}function o(_,b,w,S){if(xt.isUndefined(b)){if(!xt.isUndefined(_))return i(void 0,_,w,S)}else return i(_,b,w,S)}function a(_,b){if(!xt.isUndefined(b))return i(void 0,b)}function u(_,b){if(xt.isUndefined(b)){if(!xt.isUndefined(_))return i(void 0,_)}else return i(void 0,b)}function d(_,b,w){if(w in t)return i(_,b);if(w in e)return i(void 0,_)}const m={url:a,method:a,data:a,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:d,headers:(_,b,w)=>o(zp(_),zp(b),w,!0)};return xt.forEach(Object.keys(Object.assign({},e,t)),function(b){const w=m[b]||o,S=w(e[b],t[b],b);xt.isUndefined(S)&&w!==d||(n[b]=S)}),n}const Pg=e=>{const t=Kl({},e);let{data:n,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:a,headers:u,auth:d}=t;t.headers=u=Ss.from(u),t.url=bg(kg(t.baseURL,t.url),e.params,e.paramsSerializer),d&&u.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):"")));let m;if(xt.isFormData(n)){if(Zi.hasStandardBrowserEnv||Zi.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if((m=u.getContentType())!==!1){const[_,...b]=m?m.split(";").map(w=>w.trim()).filter(Boolean):[];u.setContentType([_||"multipart/form-data",...b].join("; "))}}if(Zi.hasStandardBrowserEnv&&(i&&xt.isFunction(i)&&(i=i(t)),i||i!==!1&&E2(t.url))){const _=o&&a&&S2.read(a);_&&u.set(o,_)}return t},B2=typeof XMLHttpRequest<"u",T2=B2&&function(e){return new Promise(function(n,i){const o=Pg(e);let a=o.data;const u=Ss.from(o.headers).normalize();let{responseType:d,onUploadProgress:m,onDownloadProgress:_}=o,b,w,S,C,F;function R(){C&&C(),F&&F(),o.cancelToken&&o.cancelToken.unsubscribe(b),o.signal&&o.signal.removeEventListener("abort",b)}let $=new XMLHttpRequest;$.open(o.method.toUpperCase(),o.url,!0),$.timeout=o.timeout;function j(){if(!$)return;const Y=Ss.from("getAllResponseHeaders"in $&&$.getAllResponseHeaders()),Ce={data:!d||d==="text"||d==="json"?$.responseText:$.response,status:$.status,statusText:$.statusText,headers:Y,config:e,request:$};Cg(function(ie){n(ie),R()},function(ie){i(ie),R()},Ce),$=null}"onloadend"in $?$.onloadend=j:$.onreadystatechange=function(){!$||$.readyState!==4||$.status===0&&!($.responseURL&&$.responseURL.indexOf("file:")===0)||setTimeout(j)},$.onabort=function(){$&&(i(new Mn("Request aborted",Mn.ECONNABORTED,e,$)),$=null)},$.onerror=function(){i(new Mn("Network Error",Mn.ERR_NETWORK,e,$)),$=null},$.ontimeout=function(){let ke=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const Ce=o.transitional||wg;o.timeoutErrorMessage&&(ke=o.timeoutErrorMessage),i(new Mn(ke,Ce.clarifyTimeoutError?Mn.ETIMEDOUT:Mn.ECONNABORTED,e,$)),$=null},a===void 0&&u.setContentType(null),"setRequestHeader"in $&&xt.forEach(u.toJSON(),function(ke,Ce){$.setRequestHeader(Ce,ke)}),xt.isUndefined(o.withCredentials)||($.withCredentials=!!o.withCredentials),d&&d!=="json"&&($.responseType=o.responseType),_&&([S,F]=ch(_,!0),$.addEventListener("progress",S)),m&&$.upload&&([w,C]=ch(m),$.upload.addEventListener("progress",w),$.upload.addEventListener("loadend",C)),(o.cancelToken||o.signal)&&(b=Y=>{$&&(i(!Y||Y.type?new Bu(null,e,$):Y),$.abort(),$=null)},o.cancelToken&&o.cancelToken.subscribe(b),o.signal&&(o.signal.aborted?b():o.signal.addEventListener("abort",b)));const G=C2(o.url);if(G&&Zi.protocols.indexOf(G)===-1){i(new Mn("Unsupported protocol "+G+":",Mn.ERR_BAD_REQUEST,e));return}$.send(a||null)})},N2=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let i=new AbortController,o;const a=function(_){if(!o){o=!0,d();const b=_ instanceof Error?_:this.reason;i.abort(b instanceof Mn?b:new Bu(b instanceof Error?b.message:b))}};let u=t&&setTimeout(()=>{u=null,a(new Mn(`timeout ${t} of ms exceeded`,Mn.ETIMEDOUT))},t);const d=()=>{e&&(u&&clearTimeout(u),u=null,e.forEach(_=>{_.unsubscribe?_.unsubscribe(a):_.removeEventListener("abort",a)}),e=null)};e.forEach(_=>_.addEventListener("abort",a));const{signal:m}=i;return m.unsubscribe=()=>xt.asap(d),m}},D2=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let i=0,o;for(;i<n;)o=i+t,yield e.slice(i,o),i=o},O2=async function*(e,t){for await(const n of R2(e))yield*D2(n,t)},R2=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:i}=await t.read();if(n)break;yield i}}finally{await t.cancel()}},Up=(e,t,n,i)=>{const o=O2(e,t);let a=0,u,d=m=>{u||(u=!0,i&&i(m))};return new ReadableStream({async pull(m){try{const{done:_,value:b}=await o.next();if(_){d(),m.close();return}let w=b.byteLength;if(n){let S=a+=w;n(S)}m.enqueue(new Uint8Array(b))}catch(_){throw d(_),_}},cancel(m){return d(m),o.return()}},{highWaterMark:2})},Rh=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Eg=Rh&&typeof ReadableStream=="function",I2=Rh&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Sg=(e,...t)=>{try{return!!e(...t)}catch{return!1}},F2=Eg&&Sg(()=>{let e=!1;const t=new Request(Zi.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),qp=64*1024,Hf=Eg&&Sg(()=>xt.isReadableStream(new Response("").body)),hh={stream:Hf&&(e=>e.body)};Rh&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!hh[t]&&(hh[t]=xt.isFunction(e[t])?n=>n[t]():(n,i)=>{throw new Mn(`Response type '${t}' is not supported`,Mn.ERR_NOT_SUPPORT,i)})})})(new Response);const j2=async e=>{if(e==null)return 0;if(xt.isBlob(e))return e.size;if(xt.isSpecCompliantForm(e))return(await new Request(Zi.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(xt.isArrayBufferView(e)||xt.isArrayBuffer(e))return e.byteLength;if(xt.isURLSearchParams(e)&&(e=e+""),xt.isString(e))return(await I2(e)).byteLength},z2=async(e,t)=>{const n=xt.toFiniteNumber(e.getContentLength());return n??j2(t)},U2=Rh&&(async e=>{let{url:t,method:n,data:i,signal:o,cancelToken:a,timeout:u,onDownloadProgress:d,onUploadProgress:m,responseType:_,headers:b,withCredentials:w="same-origin",fetchOptions:S}=Pg(e);_=_?(_+"").toLowerCase():"text";let C=N2([o,a&&a.toAbortSignal()],u),F;const R=C&&C.unsubscribe&&(()=>{C.unsubscribe()});let $;try{if(m&&F2&&n!=="get"&&n!=="head"&&($=await z2(b,i))!==0){let Ce=new Request(t,{method:"POST",body:i,duplex:"half"}),be;if(xt.isFormData(i)&&(be=Ce.headers.get("content-type"))&&b.setContentType(be),Ce.body){const[ie,re]=Fp($,ch(jp(m)));i=Up(Ce.body,qp,ie,re)}}xt.isString(w)||(w=w?"include":"omit");const j="credentials"in Request.prototype;F=new Request(t,{...S,signal:C,method:n.toUpperCase(),headers:b.normalize().toJSON(),body:i,duplex:"half",credentials:j?w:void 0});let G=await fetch(F);const Y=Hf&&(_==="stream"||_==="response");if(Hf&&(d||Y&&R)){const Ce={};["status","statusText","headers"].forEach(Ie=>{Ce[Ie]=G[Ie]});const be=xt.toFiniteNumber(G.headers.get("content-length")),[ie,re]=d&&Fp(be,ch(jp(d),!0))||[];G=new Response(Up(G.body,qp,ie,()=>{re&&re(),R&&R()}),Ce)}_=_||"text";let ke=await hh[xt.findKey(hh,_)||"text"](G,e);return!Y&&R&&R(),await new Promise((Ce,be)=>{Cg(Ce,be,{data:ke,headers:Ss.from(G.headers),status:G.status,statusText:G.statusText,config:e,request:F})})}catch(j){throw R&&R(),j&&j.name==="TypeError"&&/fetch/i.test(j.message)?Object.assign(new Mn("Network Error",Mn.ERR_NETWORK,e,F),{cause:j.cause||j}):Mn.from(j,j&&j.code,e,F)}}),Wf={http:n2,xhr:T2,fetch:U2};xt.forEach(Wf,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const $p=e=>`- ${e}`,q2=e=>xt.isFunction(e)||e===null||e===!1,Mg={getAdapter:e=>{e=xt.isArray(e)?e:[e];const{length:t}=e;let n,i;const o={};for(let a=0;a<t;a++){n=e[a];let u;if(i=n,!q2(n)&&(i=Wf[(u=String(n)).toLowerCase()],i===void 0))throw new Mn(`Unknown adapter '${u}'`);if(i)break;o[u||"#"+a]=i}if(!i){const a=Object.entries(o).map(([d,m])=>`adapter ${d} `+(m===!1?"is not supported by the environment":"is not available in the build"));let u=t?a.length>1?`since :
`+a.map($p).join(`
`):" "+$p(a[0]):"as no adapter specified";throw new Mn("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return i},adapters:Wf};function df(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Bu(null,e)}function Vp(e){return df(e),e.headers=Ss.from(e.headers),e.data=ff.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Mg.getAdapter(e.adapter||bc.adapter)(e).then(function(i){return df(e),i.data=ff.call(e,e.transformResponse,i),i.headers=Ss.from(i.headers),i},function(i){return Lg(i)||(df(e),i&&i.response&&(i.response.data=ff.call(e,e.transformResponse,i.response),i.response.headers=Ss.from(i.response.headers))),Promise.reject(i)})}const Ag="1.7.9",Ih={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ih[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const Gp={};Ih.transitional=function(t,n,i){function o(a,u){return"[Axios v"+Ag+"] Transitional option '"+a+"'"+u+(i?". "+i:"")}return(a,u,d)=>{if(t===!1)throw new Mn(o(u," has been removed"+(n?" in "+n:"")),Mn.ERR_DEPRECATED);return n&&!Gp[u]&&(Gp[u]=!0,console.warn(o(u," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(a,u,d):!0}};Ih.spelling=function(t){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function $2(e,t,n){if(typeof e!="object")throw new Mn("options must be an object",Mn.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let o=i.length;for(;o-- >0;){const a=i[o],u=t[a];if(u){const d=e[a],m=d===void 0||u(d,a,e);if(m!==!0)throw new Mn("option "+a+" must be "+m,Mn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Mn("Unknown option "+a,Mn.ERR_BAD_OPTION)}}const Zc={assertOptions:$2,validators:Ih},la=Zc.validators;let Vl=class{constructor(t){this.defaults=t,this.interceptors={request:new Rp,response:new Rp}}async request(t,n){try{return await this._request(t,n)}catch(i){if(i instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const a=o.stack?o.stack.replace(/^.+\n/,""):"";try{i.stack?a&&!String(i.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+a):i.stack=a}catch{}}throw i}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Kl(this.defaults,n);const{transitional:i,paramsSerializer:o,headers:a}=n;i!==void 0&&Zc.assertOptions(i,{silentJSONParsing:la.transitional(la.boolean),forcedJSONParsing:la.transitional(la.boolean),clarifyTimeoutError:la.transitional(la.boolean)},!1),o!=null&&(xt.isFunction(o)?n.paramsSerializer={serialize:o}:Zc.assertOptions(o,{encode:la.function,serialize:la.function},!0)),Zc.assertOptions(n,{baseUrl:la.spelling("baseURL"),withXsrfToken:la.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let u=a&&xt.merge(a.common,a[n.method]);a&&xt.forEach(["delete","get","head","post","put","patch","common"],F=>{delete a[F]}),n.headers=Ss.concat(u,a);const d=[];let m=!0;this.interceptors.request.forEach(function(R){typeof R.runWhen=="function"&&R.runWhen(n)===!1||(m=m&&R.synchronous,d.unshift(R.fulfilled,R.rejected))});const _=[];this.interceptors.response.forEach(function(R){_.push(R.fulfilled,R.rejected)});let b,w=0,S;if(!m){const F=[Vp.bind(this),void 0];for(F.unshift.apply(F,d),F.push.apply(F,_),S=F.length,b=Promise.resolve(n);w<S;)b=b.then(F[w++],F[w++]);return b}S=d.length;let C=n;for(w=0;w<S;){const F=d[w++],R=d[w++];try{C=F(C)}catch($){R.call(this,$);break}}try{b=Vp.call(this,C)}catch(F){return Promise.reject(F)}for(w=0,S=_.length;w<S;)b=b.then(_[w++],_[w++]);return b}getUri(t){t=Kl(this.defaults,t);const n=kg(t.baseURL,t.url);return bg(n,t.params,t.paramsSerializer)}};xt.forEach(["delete","get","head","options"],function(t){Vl.prototype[t]=function(n,i){return this.request(Kl(i||{},{method:t,url:n,data:(i||{}).data}))}});xt.forEach(["post","put","patch"],function(t){function n(i){return function(a,u,d){return this.request(Kl(d||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:u}))}}Vl.prototype[t]=n(),Vl.prototype[t+"Form"]=n(!0)});let V2=class Bg{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const i=this;this.promise.then(o=>{if(!i._listeners)return;let a=i._listeners.length;for(;a-- >0;)i._listeners[a](o);i._listeners=null}),this.promise.then=o=>{let a;const u=new Promise(d=>{i.subscribe(d),a=d}).then(o);return u.cancel=function(){i.unsubscribe(a)},u},t(function(a,u,d){i.reason||(i.reason=new Bu(a,u,d),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=i=>{t.abort(i)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Bg(function(o){t=o}),cancel:t}}};function G2(e){return function(n){return e.apply(null,n)}}function H2(e){return xt.isObject(e)&&e.isAxiosError===!0}const Zf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Zf).forEach(([e,t])=>{Zf[t]=e});function Tg(e){const t=new Vl(e),n=lg(Vl.prototype.request,t);return xt.extend(n,Vl.prototype,t,{allOwnKeys:!0}),xt.extend(n,t,null,{allOwnKeys:!0}),n.create=function(o){return Tg(Kl(e,o))},n}const qr=Tg(bc);qr.Axios=Vl;qr.CanceledError=Bu;qr.CancelToken=V2;qr.isCancel=Lg;qr.VERSION=Ag;qr.toFormData=Oh;qr.AxiosError=Mn;qr.Cancel=qr.CanceledError;qr.all=function(t){return Promise.all(t)};qr.spread=G2;qr.isAxiosError=H2;qr.mergeConfig=Kl;qr.AxiosHeaders=Ss;qr.formToJSON=e=>xg(xt.isHTMLForm(e)?new FormData(e):e);qr.getAdapter=Mg.getAdapter;qr.HttpStatusCode=Zf;qr.default=qr;const{Axios:EP,AxiosError:SP,CanceledError:MP,isCancel:AP,CancelToken:BP,VERSION:TP,all:NP,Cancel:DP,isAxiosError:OP,spread:RP,toFormData:IP,AxiosHeaders:FP,HttpStatusCode:jP,formToJSON:zP,getAdapter:UP,mergeConfig:qP}=qr,wn=qr.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});function Ng(e){var i;const n=`; ${document.cookie}`.split(`; ${e}=`);return n.length===2&&((i=n.pop())==null?void 0:i.split(";").shift())||null}wn.interceptors.request.use(e=>{const t=Ng("access_token");return t&&(e.headers.Authorization=`Bearer ${t}`),console.log("Request config:",{url:e.url,method:e.method,headers:e.headers,withCredentials:e.withCredentials}),e},e=>(console.error("Request interceptor error:",e),Promise.reject(e)));wn.interceptors.response.use(e=>e,async e=>{var n;const t=e.config;if(((n=e.response)==null?void 0:n.status)===401&&!t._retry){t._retry=!0;try{await hs().refreshToken();const o=Ng("access_token");if(o)return t.headers.Authorization=`Bearer ${o}`,wn(t)}catch(i){console.error("Token refresh failed:",i),window.location.href="/login"}}return Promise.reject(e)});wn.defaults.baseURL="/api";wn.defaults.headers.common["Content-Type"]="application/json";wn.defaults.withCredentials=!0;function fh(e){var i;const n=`; ${document.cookie}`.split(`; ${e}=`);return n.length===2&&((i=n.pop())==null?void 0:i.split(";").shift())||null}wn.interceptors.request.use(e=>{const t=fh("access_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>(console.error("Request interceptor error:",e),Promise.reject(e)));wn.interceptors.response.use(e=>e,async e=>{var i,o;const t=hs(),n=e.config;if(((i=e.response)==null?void 0:i.status)===401&&!n._retry&&!((o=n.url)!=null&&o.includes("/token/refresh/"))){n._retry=!0;try{if(!fh("access_token"))throw new Error("No token available");await t.refreshToken();const u=fh("access_token");if(u)return n.headers.Authorization=`Bearer ${u}`,wn(n)}catch(a){console.error("Token refresh failed:",a),await t.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(e)});function W2(e,t,n=1){const i=new Date;i.setTime(i.getTime()+n*24*60*60*1e3);const o=`expires=${i.toUTCString()}`;document.cookie=`${e}=${t};${o};path=/;secure;samesite=Strict`}function zl(e){if(!e)return"Non spcifi";const t=`${e.first_name} ${e.last_name.toUpperCase()}`;return e.company_name?`${t} (${e.company_name})`:t}const hs=Td("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,concessionnaires:[]}),getters:{isAdmin:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="admin"},isDealer:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="dealer"},isClient:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="client"},currentUser:e=>e.user,hasDealer:e=>{var t;return!!((t=e.user)!=null&&t.dealer)}},actions:{async initialize(e){if(console.log("Initializing auth store with state:",e),!e){console.log("No initial state, attempting to restore session...");const n=await this.restoreSession();return this.initialized=!0,n}if(e.isAuthenticated&&e.user)return this.user=e.user,this.isAuthenticated=!0,this.mustChangePassword=e.user.must_change_password||!1,this.initialized=!0,!0;const t=await this.restoreSession();return this.initialized=!0,t},async restoreSession(){console.log("Attempting to restore session...");try{if(!fh("access_token"))return console.log("No token found, skipping session restore"),this.isAuthenticated=!1,this.user=null,!1;const t=await wn.post("/token/refresh/");return t.data.user?(this.user=t.data.user,this.isAuthenticated=!0,this.mustChangePassword=t.data.user.must_change_password||!1,console.log("Session restored successfully"),!0):(await this.fetchUserProfile(),!0)}catch(e){return console.error("Failed to restore session:",e),this.isAuthenticated=!1,this.user=null,!1}},async login(e,t){var n,i,o;try{const a=await wn.post("/token/",{username:e,password:t});if(!a.data.access)throw new Error("Token d'accs non reu");document.cookie=`access_token=${a.data.access}; path=/; secure; samesite=Strict`;const u=await this.fetchUserProfile();return this.user=u,this.isAuthenticated=!0,!0}catch(a){throw this.isAuthenticated=!1,this.user=null,((n=a.response)==null?void 0:n.status)===401?new Error("Identifiants incorrects"):(o=(i=a.response)==null?void 0:i.data)!=null&&o.detail?new Error(a.response.data.detail):a}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const e=await wn.get("/users/me/");return this.user=e.data,this.isAuthenticated=!0,this.mustChangePassword=e.data.must_change_password||!1,e.data}catch(e){throw this.isAuthenticated=!1,this.user=null,e}},async changePassword(e,t){try{console.log("Attempting to change password...");const n=await wn.post("/users/change_password/",{old_password:e,password:t});return console.log("Password change response:",n.data),this.user={...this.user,must_change_password:!1},n.data}catch(n){throw console.error("Password change error:",n),n}},async refreshToken(){var e,t,n,i;try{console.log("Attempting to refresh token...");const o=await wn.post("/token/refresh/",{},{withCredentials:!0}),{access:a}=o.data;if(!a)throw new Error("No access token received");return console.log("Token refreshed successfully"),W2("access_token",a,1),this.isAuthenticated=!0,a}catch(o){throw console.error("Error refreshing token:",{status:(e=o.response)==null?void 0:e.status,data:(t=o.response)==null?void 0:t.data}),(((n=o.response)==null?void 0:n.status)===401||((i=o.response)==null?void 0:i.status)===403)&&(console.log("Token refresh failed with auth error, logging out"),await this.logout()),o}},async fetchConcessionnaires(){this.loading=!0;try{const e=await wn.get("/users/",{params:{role:"dealer"}});this.concessionnaires=e.data}catch(e){throw this.error="Erreur lors de la rcupration des concessionnaires",e}finally{this.loading=!1}},async setConcessionnaire(e,t){this.loading=!0;try{await wn.patch(`/users/${e}/`,{concessionnaire:t}),this.user&&this.user.id===e&&(this.user.dealer=t)}catch(n){throw this.error="Erreur lors de la mise  jour du concessionnaire",n}finally{this.loading=!1}},async createUser(e){this.loading=!0;try{return(await wn.post("/users/",e)).data}catch(t){throw this.error="Erreur lors de la cration de l'utilisateur",t}finally{this.loading=!1}},async updateUserRole(e,t){this.loading=!0;try{const n=await wn.patch(`/users/${e}/`,{role:t});return this.user&&this.user.id===e&&(this.user.user_type=t),n.data}catch(n){throw this.error="Erreur lors de la mise  jour du rle",n}finally{this.loading=!1}},async updateUserEmail(e){var t;this.loading=!0;try{const n=await wn.patch(`/users/${(t=this.user)==null?void 0:t.id}/`,{email:e});return this.user&&(this.user.email=e),n.data}catch(n){throw this.error="Erreur lors de la mise  jour de l'email",n}finally{this.loading=!1}},checkAccess(e){return this.user?e.includes(this.user.user_type):!1}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const fu=typeof document<"u";function Dg(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Z2(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Dg(e.default)}const rr=Object.assign;function pf(e,t){const n={};for(const i in t){const o=t[i];n[i]=Uo(o)?o.map(e):e(o)}return n}const nc=()=>{},Uo=Array.isArray,Og=/#/g,K2=/&/g,J2=/\//g,Y2=/=/g,X2=/\?/g,Rg=/\+/g,Q2=/%5B/g,e5=/%5D/g,Ig=/%5E/g,t5=/%60/g,Fg=/%7B/g,n5=/%7C/g,jg=/%7D/g,r5=/%20/g;function Rd(e){return encodeURI(""+e).replace(n5,"|").replace(Q2,"[").replace(e5,"]")}function i5(e){return Rd(e).replace(Fg,"{").replace(jg,"}").replace(Ig,"^")}function Kf(e){return Rd(e).replace(Rg,"%2B").replace(r5,"+").replace(Og,"%23").replace(K2,"%26").replace(t5,"`").replace(Fg,"{").replace(jg,"}").replace(Ig,"^")}function s5(e){return Kf(e).replace(Y2,"%3D")}function o5(e){return Rd(e).replace(Og,"%23").replace(X2,"%3F")}function a5(e){return e==null?"":o5(e).replace(J2,"%2F")}function hc(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const l5=/\/$/,u5=e=>e.replace(l5,"");function mf(e,t,n="/"){let i,o={},a="",u="";const d=t.indexOf("#");let m=t.indexOf("?");return d<m&&d>=0&&(m=-1),m>-1&&(i=t.slice(0,m),a=t.slice(m+1,d>-1?d:t.length),o=e(a)),d>-1&&(i=i||t.slice(0,d),u=t.slice(d,t.length)),i=d5(i??t,n),{fullPath:i+(a&&"?")+a+u,path:i,query:o,hash:hc(u)}}function c5(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Hp(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function h5(e,t,n){const i=t.matched.length-1,o=n.matched.length-1;return i>-1&&i===o&&Pu(t.matched[i],n.matched[o])&&zg(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Pu(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function zg(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!f5(e[n],t[n]))return!1;return!0}function f5(e,t){return Uo(e)?Wp(e,t):Uo(t)?Wp(t,e):e===t}function Wp(e,t){return Uo(t)?e.length===t.length&&e.every((n,i)=>n===t[i]):e.length===1&&e[0]===t}function d5(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),i=e.split("/"),o=i[i.length-1];(o===".."||o===".")&&i.push("");let a=n.length-1,u,d;for(u=0;u<i.length;u++)if(d=i[u],d!==".")if(d==="..")a>1&&a--;else break;return n.slice(0,a).join("/")+"/"+i.slice(u).join("/")}const ll={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var fc;(function(e){e.pop="pop",e.push="push"})(fc||(fc={}));var rc;(function(e){e.back="back",e.forward="forward",e.unknown=""})(rc||(rc={}));function p5(e){if(!e)if(fu){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),u5(e)}const m5=/^[^#]+#/;function g5(e,t){return e.replace(m5,"#")+t}function v5(e,t){const n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{behavior:t.behavior,left:i.left-n.left-(t.left||0),top:i.top-n.top-(t.top||0)}}const Fh=()=>({left:window.scrollX,top:window.scrollY});function _5(e){let t;if("el"in e){const n=e.el,i=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;t=v5(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Zp(e,t){return(history.state?history.state.position-t:-1)+e}const Jf=new Map;function y5(e,t){Jf.set(e,t)}function b5(e){const t=Jf.get(e);return Jf.delete(e),t}let w5=()=>location.protocol+"//"+location.host;function Ug(e,t){const{pathname:n,search:i,hash:o}=t,a=e.indexOf("#");if(a>-1){let d=o.includes(e.slice(a))?e.slice(a).length:1,m=o.slice(d);return m[0]!=="/"&&(m="/"+m),Hp(m,"")}return Hp(n,e)+i+o}function x5(e,t,n,i){let o=[],a=[],u=null;const d=({state:S})=>{const C=Ug(e,location),F=n.value,R=t.value;let $=0;if(S){if(n.value=C,t.value=S,u&&u===F){u=null;return}$=R?S.position-R.position:0}else i(C);o.forEach(j=>{j(n.value,F,{delta:$,type:fc.pop,direction:$?$>0?rc.forward:rc.back:rc.unknown})})};function m(){u=n.value}function _(S){o.push(S);const C=()=>{const F=o.indexOf(S);F>-1&&o.splice(F,1)};return a.push(C),C}function b(){const{history:S}=window;S.state&&S.replaceState(rr({},S.state,{scroll:Fh()}),"")}function w(){for(const S of a)S();a=[],window.removeEventListener("popstate",d),window.removeEventListener("beforeunload",b)}return window.addEventListener("popstate",d),window.addEventListener("beforeunload",b,{passive:!0}),{pauseListeners:m,listen:_,destroy:w}}function Kp(e,t,n,i=!1,o=!1){return{back:e,current:t,forward:n,replaced:i,position:window.history.length,scroll:o?Fh():null}}function L5(e){const{history:t,location:n}=window,i={value:Ug(e,n)},o={value:t.state};o.value||a(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(m,_,b){const w=e.indexOf("#"),S=w>-1?(n.host&&document.querySelector("base")?e:e.slice(w))+m:w5()+e+m;try{t[b?"replaceState":"pushState"](_,"",S),o.value=_}catch(C){console.error(C),n[b?"replace":"assign"](S)}}function u(m,_){const b=rr({},t.state,Kp(o.value.back,m,o.value.forward,!0),_,{position:o.value.position});a(m,b,!0),i.value=m}function d(m,_){const b=rr({},o.value,t.state,{forward:m,scroll:Fh()});a(b.current,b,!0);const w=rr({},Kp(i.value,m,null),{position:b.position+1},_);a(m,w,!1),i.value=m}return{location:i,state:o,push:d,replace:u}}function C5(e){e=p5(e);const t=L5(e),n=x5(e,t.state,t.location,t.replace);function i(a,u=!0){u||n.pauseListeners(),history.go(a)}const o=rr({location:"",base:e,go:i,createHref:g5.bind(null,e)},t,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function k5(e){return typeof e=="string"||e&&typeof e=="object"}function qg(e){return typeof e=="string"||typeof e=="symbol"}const $g=Symbol("");var Jp;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Jp||(Jp={}));function Eu(e,t){return rr(new Error,{type:e,[$g]:!0},t)}function Da(e,t){return e instanceof Error&&$g in e&&(t==null||!!(e.type&t))}const Yp="[^/]+?",P5={sensitive:!1,strict:!1,start:!0,end:!0},E5=/[.+*?^${}()[\]/\\]/g;function S5(e,t){const n=rr({},P5,t),i=[];let o=n.start?"^":"";const a=[];for(const _ of e){const b=_.length?[]:[90];n.strict&&!_.length&&(o+="/");for(let w=0;w<_.length;w++){const S=_[w];let C=40+(n.sensitive?.25:0);if(S.type===0)w||(o+="/"),o+=S.value.replace(E5,"\\$&"),C+=40;else if(S.type===1){const{value:F,repeatable:R,optional:$,regexp:j}=S;a.push({name:F,repeatable:R,optional:$});const G=j||Yp;if(G!==Yp){C+=10;try{new RegExp(`(${G})`)}catch(ke){throw new Error(`Invalid custom RegExp for param "${F}" (${G}): `+ke.message)}}let Y=R?`((?:${G})(?:/(?:${G}))*)`:`(${G})`;w||(Y=$&&_.length<2?`(?:/${Y})`:"/"+Y),$&&(Y+="?"),o+=Y,C+=20,$&&(C+=-8),R&&(C+=-20),G===".*"&&(C+=-50)}b.push(C)}i.push(b)}if(n.strict&&n.end){const _=i.length-1;i[_][i[_].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const u=new RegExp(o,n.sensitive?"":"i");function d(_){const b=_.match(u),w={};if(!b)return null;for(let S=1;S<b.length;S++){const C=b[S]||"",F=a[S-1];w[F.name]=C&&F.repeatable?C.split("/"):C}return w}function m(_){let b="",w=!1;for(const S of e){(!w||!b.endsWith("/"))&&(b+="/"),w=!1;for(const C of S)if(C.type===0)b+=C.value;else if(C.type===1){const{value:F,repeatable:R,optional:$}=C,j=F in _?_[F]:"";if(Uo(j)&&!R)throw new Error(`Provided param "${F}" is an array but it is not repeatable (* or + modifiers)`);const G=Uo(j)?j.join("/"):j;if(!G)if($)S.length<2&&(b.endsWith("/")?b=b.slice(0,-1):w=!0);else throw new Error(`Missing required param "${F}"`);b+=G}}return b||"/"}return{re:u,score:i,keys:a,parse:d,stringify:m}}function M5(e,t){let n=0;for(;n<e.length&&n<t.length;){const i=t[n]-e[n];if(i)return i;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Vg(e,t){let n=0;const i=e.score,o=t.score;for(;n<i.length&&n<o.length;){const a=M5(i[n],o[n]);if(a)return a;n++}if(Math.abs(o.length-i.length)===1){if(Xp(i))return 1;if(Xp(o))return-1}return o.length-i.length}function Xp(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const A5={type:0,value:""},B5=/[a-zA-Z0-9_]/;function T5(e){if(!e)return[[]];if(e==="/")return[[A5]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(C){throw new Error(`ERR (${n})/"${_}": ${C}`)}let n=0,i=n;const o=[];let a;function u(){a&&o.push(a),a=[]}let d=0,m,_="",b="";function w(){_&&(n===0?a.push({type:0,value:_}):n===1||n===2||n===3?(a.length>1&&(m==="*"||m==="+")&&t(`A repeatable param (${_}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:_,regexp:b,repeatable:m==="*"||m==="+",optional:m==="*"||m==="?"})):t("Invalid state to consume buffer"),_="")}function S(){_+=m}for(;d<e.length;){if(m=e[d++],m==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:m==="/"?(_&&w(),u()):m===":"?(w(),n=1):S();break;case 4:S(),n=i;break;case 1:m==="("?n=2:B5.test(m)?S():(w(),n=0,m!=="*"&&m!=="?"&&m!=="+"&&d--);break;case 2:m===")"?b[b.length-1]=="\\"?b=b.slice(0,-1)+m:n=3:b+=m;break;case 3:w(),n=0,m!=="*"&&m!=="?"&&m!=="+"&&d--,b="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${_}"`),w(),u(),o}function N5(e,t,n){const i=S5(T5(e.path),n),o=rr(i,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function D5(e,t){const n=[],i=new Map;t=n0({strict:!1,end:!0,sensitive:!1},t);function o(w){return i.get(w)}function a(w,S,C){const F=!C,R=e0(w);R.aliasOf=C&&C.record;const $=n0(t,w),j=[R];if("alias"in w){const ke=typeof w.alias=="string"?[w.alias]:w.alias;for(const Ce of ke)j.push(e0(rr({},R,{components:C?C.record.components:R.components,path:Ce,aliasOf:C?C.record:R})))}let G,Y;for(const ke of j){const{path:Ce}=ke;if(S&&Ce[0]!=="/"){const be=S.record.path,ie=be[be.length-1]==="/"?"":"/";ke.path=S.record.path+(Ce&&ie+Ce)}if(G=N5(ke,S,$),C?C.alias.push(G):(Y=Y||G,Y!==G&&Y.alias.push(G),F&&w.name&&!t0(G)&&u(w.name)),Gg(G)&&m(G),R.children){const be=R.children;for(let ie=0;ie<be.length;ie++)a(be[ie],G,C&&C.children[ie])}C=C||G}return Y?()=>{u(Y)}:nc}function u(w){if(qg(w)){const S=i.get(w);S&&(i.delete(w),n.splice(n.indexOf(S),1),S.children.forEach(u),S.alias.forEach(u))}else{const S=n.indexOf(w);S>-1&&(n.splice(S,1),w.record.name&&i.delete(w.record.name),w.children.forEach(u),w.alias.forEach(u))}}function d(){return n}function m(w){const S=I5(w,n);n.splice(S,0,w),w.record.name&&!t0(w)&&i.set(w.record.name,w)}function _(w,S){let C,F={},R,$;if("name"in w&&w.name){if(C=i.get(w.name),!C)throw Eu(1,{location:w});$=C.record.name,F=rr(Qp(S.params,C.keys.filter(Y=>!Y.optional).concat(C.parent?C.parent.keys.filter(Y=>Y.optional):[]).map(Y=>Y.name)),w.params&&Qp(w.params,C.keys.map(Y=>Y.name))),R=C.stringify(F)}else if(w.path!=null)R=w.path,C=n.find(Y=>Y.re.test(R)),C&&(F=C.parse(R),$=C.record.name);else{if(C=S.name?i.get(S.name):n.find(Y=>Y.re.test(S.path)),!C)throw Eu(1,{location:w,currentLocation:S});$=C.record.name,F=rr({},S.params,w.params),R=C.stringify(F)}const j=[];let G=C;for(;G;)j.unshift(G.record),G=G.parent;return{name:$,path:R,params:F,matched:j,meta:R5(j)}}e.forEach(w=>a(w));function b(){n.length=0,i.clear()}return{addRoute:a,resolve:_,removeRoute:u,clearRoutes:b,getRoutes:d,getRecordMatcher:o}}function Qp(e,t){const n={};for(const i of t)i in e&&(n[i]=e[i]);return n}function e0(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:O5(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function O5(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const i in e.components)t[i]=typeof n=="object"?n[i]:n;return t}function t0(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function R5(e){return e.reduce((t,n)=>rr(t,n.meta),{})}function n0(e,t){const n={};for(const i in e)n[i]=i in t?t[i]:e[i];return n}function I5(e,t){let n=0,i=t.length;for(;n!==i;){const a=n+i>>1;Vg(e,t[a])<0?i=a:n=a+1}const o=F5(e);return o&&(i=t.lastIndexOf(o,i-1)),i}function F5(e){let t=e;for(;t=t.parent;)if(Gg(t)&&Vg(e,t)===0)return t}function Gg({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function j5(e){const t={};if(e===""||e==="?")return t;const i=(e[0]==="?"?e.slice(1):e).split("&");for(let o=0;o<i.length;++o){const a=i[o].replace(Rg," "),u=a.indexOf("="),d=hc(u<0?a:a.slice(0,u)),m=u<0?null:hc(a.slice(u+1));if(d in t){let _=t[d];Uo(_)||(_=t[d]=[_]),_.push(m)}else t[d]=m}return t}function r0(e){let t="";for(let n in e){const i=e[n];if(n=s5(n),i==null){i!==void 0&&(t+=(t.length?"&":"")+n);continue}(Uo(i)?i.map(a=>a&&Kf(a)):[i&&Kf(i)]).forEach(a=>{a!==void 0&&(t+=(t.length?"&":"")+n,a!=null&&(t+="="+a))})}return t}function z5(e){const t={};for(const n in e){const i=e[n];i!==void 0&&(t[n]=Uo(i)?i.map(o=>o==null?null:""+o):i==null?i:""+i)}return t}const U5=Symbol(""),i0=Symbol(""),jh=Symbol(""),Id=Symbol(""),Yf=Symbol("");function qu(){let e=[];function t(i){return e.push(i),()=>{const o=e.indexOf(i);o>-1&&e.splice(o,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function pl(e,t,n,i,o,a=u=>u()){const u=i&&(i.enterCallbacks[o]=i.enterCallbacks[o]||[]);return()=>new Promise((d,m)=>{const _=S=>{S===!1?m(Eu(4,{from:n,to:t})):S instanceof Error?m(S):k5(S)?m(Eu(2,{from:t,to:S})):(u&&i.enterCallbacks[o]===u&&typeof S=="function"&&u.push(S),d())},b=a(()=>e.call(i&&i.instances[o],t,n,_));let w=Promise.resolve(b);e.length<3&&(w=w.then(_)),w.catch(S=>m(S))})}function gf(e,t,n,i,o=a=>a()){const a=[];for(const u of e)for(const d in u.components){let m=u.components[d];if(!(t!=="beforeRouteEnter"&&!u.instances[d]))if(Dg(m)){const b=(m.__vccOpts||m)[t];b&&a.push(pl(b,n,i,u,d,o))}else{let _=m();a.push(()=>_.then(b=>{if(!b)throw new Error(`Couldn't resolve component "${d}" at "${u.path}"`);const w=Z2(b)?b.default:b;u.mods[d]=b,u.components[d]=w;const C=(w.__vccOpts||w)[t];return C&&pl(C,n,i,u,d,o)()}))}}return a}function s0(e){const t=go(jh),n=go(Id),i=Nn(()=>{const m=Cn(e.to);return t.resolve(m)}),o=Nn(()=>{const{matched:m}=i.value,{length:_}=m,b=m[_-1],w=n.matched;if(!b||!w.length)return-1;const S=w.findIndex(Pu.bind(null,b));if(S>-1)return S;const C=o0(m[_-2]);return _>1&&o0(b)===C&&w[w.length-1].path!==C?w.findIndex(Pu.bind(null,m[_-2])):S}),a=Nn(()=>o.value>-1&&G5(n.params,i.value.params)),u=Nn(()=>o.value>-1&&o.value===n.matched.length-1&&zg(n.params,i.value.params));function d(m={}){if(V5(m)){const _=t[Cn(e.replace)?"replace":"push"](Cn(e.to)).catch(nc);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>_),_}return Promise.resolve()}return{route:i,href:Nn(()=>i.value.href),isActive:a,isExactActive:u,navigate:d}}function q5(e){return e.length===1?e[0]:e}const $5=Ms({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:s0,setup(e,{slots:t}){const n=Va(s0(e)),{options:i}=go(jh),o=Nn(()=>({[a0(e.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[a0(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const a=t.default&&q5(t.default(n));return e.custom?a:Qm("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},a)}}}),du=$5;function V5(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function G5(e,t){for(const n in t){const i=t[n],o=e[n];if(typeof i=="string"){if(i!==o)return!1}else if(!Uo(o)||o.length!==i.length||i.some((a,u)=>a!==o[u]))return!1}return!0}function o0(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const a0=(e,t,n)=>e??t??n,H5=Ms({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const i=go(Yf),o=Nn(()=>e.route||i.value),a=go(i0,0),u=Nn(()=>{let _=Cn(a);const{matched:b}=o.value;let w;for(;(w=b[_])&&!w.components;)_++;return _}),d=Nn(()=>o.value.matched[u.value]);qc(i0,Nn(()=>u.value+1)),qc(U5,d),qc(Yf,o);const m=It();return Yi(()=>[m.value,d.value,e.name],([_,b,w],[S,C,F])=>{b&&(b.instances[w]=_,C&&C!==b&&_&&_===S&&(b.leaveGuards.size||(b.leaveGuards=C.leaveGuards),b.updateGuards.size||(b.updateGuards=C.updateGuards))),_&&b&&(!C||!Pu(b,C)||!S)&&(b.enterCallbacks[w]||[]).forEach(R=>R(_))},{flush:"post"}),()=>{const _=o.value,b=e.name,w=d.value,S=w&&w.components[b];if(!S)return l0(n.default,{Component:S,route:_});const C=w.props[b],F=C?C===!0?_.params:typeof C=="function"?C(_):C:null,$=Qm(S,rr({},F,t,{onVnodeUnmounted:j=>{j.component.isUnmounted&&(w.instances[b]=null)},ref:m}));return l0(n.default,{Component:$,route:_})||$}}});function l0(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Hg=H5;function W5(e){const t=D5(e.routes,e),n=e.parseQuery||j5,i=e.stringifyQuery||r0,o=e.history,a=qu(),u=qu(),d=qu(),m=_v(ll);let _=ll;fu&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const b=pf.bind(null,he=>""+he),w=pf.bind(null,a5),S=pf.bind(null,hc);function C(he,we){let Ee,Ve;return qg(he)?(Ee=t.getRecordMatcher(he),Ve=we):Ve=he,t.addRoute(Ve,Ee)}function F(he){const we=t.getRecordMatcher(he);we&&t.removeRoute(we)}function R(){return t.getRoutes().map(he=>he.record)}function $(he){return!!t.getRecordMatcher(he)}function j(he,we){if(we=rr({},we||m.value),typeof he=="string"){const De=mf(n,he,we.path),Be=t.resolve({path:De.path},we),ce=o.createHref(De.fullPath);return rr(De,Be,{params:S(Be.params),hash:hc(De.hash),redirectedFrom:void 0,href:ce})}let Ee;if(he.path!=null)Ee=rr({},he,{path:mf(n,he.path,we.path).path});else{const De=rr({},he.params);for(const Be in De)De[Be]==null&&delete De[Be];Ee=rr({},he,{params:w(De)}),we.params=w(we.params)}const Ve=t.resolve(Ee,we),tt=he.hash||"";Ve.params=b(S(Ve.params));const ne=c5(i,rr({},he,{hash:i5(tt),path:Ve.path})),fe=o.createHref(ne);return rr({fullPath:ne,hash:tt,query:i===r0?z5(he.query):he.query||{}},Ve,{redirectedFrom:void 0,href:fe})}function G(he){return typeof he=="string"?mf(n,he,m.value.path):rr({},he)}function Y(he,we){if(_!==he)return Eu(8,{from:we,to:he})}function ke(he){return ie(he)}function Ce(he){return ke(rr(G(he),{replace:!0}))}function be(he){const we=he.matched[he.matched.length-1];if(we&&we.redirect){const{redirect:Ee}=we;let Ve=typeof Ee=="function"?Ee(he):Ee;return typeof Ve=="string"&&(Ve=Ve.includes("?")||Ve.includes("#")?Ve=G(Ve):{path:Ve},Ve.params={}),rr({query:he.query,hash:he.hash,params:Ve.path!=null?{}:he.params},Ve)}}function ie(he,we){const Ee=_=j(he),Ve=m.value,tt=he.state,ne=he.force,fe=he.replace===!0,De=be(Ee);if(De)return ie(rr(G(De),{state:typeof De=="object"?rr({},tt,De.state):tt,force:ne,replace:fe}),we||Ee);const Be=Ee;Be.redirectedFrom=we;let ce;return!ne&&h5(i,Ve,Ee)&&(ce=Eu(16,{to:Be,from:Ve}),Re(Ve,Ve,!0,!1)),(ce?Promise.resolve(ce):Je(Be,Ve)).catch(Ge=>Da(Ge)?Da(Ge,2)?Ge:Q(Ge):U(Ge,Be,Ve)).then(Ge=>{if(Ge){if(Da(Ge,2))return ie(rr({replace:fe},G(Ge.to),{state:typeof Ge.to=="object"?rr({},tt,Ge.to.state):tt,force:ne}),we||Be)}else Ge=X(Be,Ve,!0,fe,tt);return V(Be,Ve,Ge),Ge})}function re(he,we){const Ee=Y(he,we);return Ee?Promise.reject(Ee):Promise.resolve()}function Ie(he){const we=se.values().next().value;return we&&typeof we.runWithContext=="function"?we.runWithContext(he):he()}function Je(he,we){let Ee;const[Ve,tt,ne]=Z5(he,we);Ee=gf(Ve.reverse(),"beforeRouteLeave",he,we);for(const De of Ve)De.leaveGuards.forEach(Be=>{Ee.push(pl(Be,he,we))});const fe=re.bind(null,he,we);return Ee.push(fe),_e(Ee).then(()=>{Ee=[];for(const De of a.list())Ee.push(pl(De,he,we));return Ee.push(fe),_e(Ee)}).then(()=>{Ee=gf(tt,"beforeRouteUpdate",he,we);for(const De of tt)De.updateGuards.forEach(Be=>{Ee.push(pl(Be,he,we))});return Ee.push(fe),_e(Ee)}).then(()=>{Ee=[];for(const De of ne)if(De.beforeEnter)if(Uo(De.beforeEnter))for(const Be of De.beforeEnter)Ee.push(pl(Be,he,we));else Ee.push(pl(De.beforeEnter,he,we));return Ee.push(fe),_e(Ee)}).then(()=>(he.matched.forEach(De=>De.enterCallbacks={}),Ee=gf(ne,"beforeRouteEnter",he,we,Ie),Ee.push(fe),_e(Ee))).then(()=>{Ee=[];for(const De of u.list())Ee.push(pl(De,he,we));return Ee.push(fe),_e(Ee)}).catch(De=>Da(De,8)?De:Promise.reject(De))}function V(he,we,Ee){d.list().forEach(Ve=>Ie(()=>Ve(he,we,Ee)))}function X(he,we,Ee,Ve,tt){const ne=Y(he,we);if(ne)return ne;const fe=we===ll,De=fu?history.state:{};Ee&&(Ve||fe?o.replace(he.fullPath,rr({scroll:fe&&De&&De.scroll},tt)):o.push(he.fullPath,tt)),m.value=he,Re(he,we,Ee,fe),Q()}let N;function te(){N||(N=o.listen((he,we,Ee)=>{if(!de.listening)return;const Ve=j(he),tt=be(Ve);if(tt){ie(rr(tt,{replace:!0,force:!0}),Ve).catch(nc);return}_=Ve;const ne=m.value;fu&&y5(Zp(ne.fullPath,Ee.delta),Fh()),Je(Ve,ne).catch(fe=>Da(fe,12)?fe:Da(fe,2)?(ie(rr(G(fe.to),{force:!0}),Ve).then(De=>{Da(De,20)&&!Ee.delta&&Ee.type===fc.pop&&o.go(-1,!1)}).catch(nc),Promise.reject()):(Ee.delta&&o.go(-Ee.delta,!1),U(fe,Ve,ne))).then(fe=>{fe=fe||X(Ve,ne,!1),fe&&(Ee.delta&&!Da(fe,8)?o.go(-Ee.delta,!1):Ee.type===fc.pop&&Da(fe,20)&&o.go(-1,!1)),V(Ve,ne,fe)}).catch(nc)}))}let W=qu(),H=qu(),me;function U(he,we,Ee){Q(he);const Ve=H.list();return Ve.length?Ve.forEach(tt=>tt(he,we,Ee)):console.error(he),Promise.reject(he)}function I(){return me&&m.value!==ll?Promise.resolve():new Promise((he,we)=>{W.add([he,we])})}function Q(he){return me||(me=!he,te(),W.list().forEach(([we,Ee])=>he?Ee(he):we()),W.reset()),he}function Re(he,we,Ee,Ve){const{scrollBehavior:tt}=e;if(!fu||!tt)return Promise.resolve();const ne=!Ee&&b5(Zp(he.fullPath,0))||(Ve||!Ee)&&history.state&&history.state.scroll||null;return Gs().then(()=>tt(he,we,ne)).then(fe=>fe&&_5(fe)).catch(fe=>U(fe,he,we))}const O=he=>o.go(he);let J;const se=new Set,de={currentRoute:m,listening:!0,addRoute:C,removeRoute:F,clearRoutes:t.clearRoutes,hasRoute:$,getRoutes:R,resolve:j,options:e,push:ke,replace:Ce,go:O,back:()=>O(-1),forward:()=>O(1),beforeEach:a.add,beforeResolve:u.add,afterEach:d.add,onError:H.add,isReady:I,install(he){const we=this;he.component("RouterLink",du),he.component("RouterView",Hg),he.config.globalProperties.$router=we,Object.defineProperty(he.config.globalProperties,"$route",{enumerable:!0,get:()=>Cn(m)}),fu&&!J&&m.value===ll&&(J=!0,ke(o.location).catch(tt=>{}));const Ee={};for(const tt in ll)Object.defineProperty(Ee,tt,{get:()=>m.value[tt],enumerable:!0});he.provide(jh,we),he.provide(Id,ym(Ee)),he.provide(Yf,m);const Ve=he.unmount;se.add(he),he.unmount=function(){se.delete(he),se.size<1&&(_=ll,N&&N(),N=null,m.value=ll,J=!1,me=!1),Ve()}}};function _e(he){return he.reduce((we,Ee)=>we.then(()=>Ie(Ee)),Promise.resolve())}return de}function Z5(e,t){const n=[],i=[],o=[],a=Math.max(t.matched.length,e.matched.length);for(let u=0;u<a;u++){const d=t.matched[u];d&&(e.matched.find(_=>Pu(_,d))?i.push(d):n.push(d));const m=e.matched[u];m&&(t.matched.find(_=>Pu(_,m))||o.push(m))}return[n,i,o]}function wc(){return go(jh)}function $P(e){return go(Id)}var po=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function K5(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Zg=K5,J5=typeof po=="object"&&po&&po.Object===Object&&po,Y5=J5,X5=Y5,Q5=typeof self=="object"&&self&&self.Object===Object&&self,e4=X5||Q5||Function("return this")(),Kg=e4,t4=Kg,n4=function(){return t4.Date.now()},r4=n4,i4=/\s/;function s4(e){for(var t=e.length;t--&&i4.test(e.charAt(t)););return t}var o4=s4,a4=o4,l4=/^\s+/;function u4(e){return e&&e.slice(0,a4(e)+1).replace(l4,"")}var c4=u4,h4=Kg,f4=h4.Symbol,Jg=f4,u0=Jg,Yg=Object.prototype,d4=Yg.hasOwnProperty,p4=Yg.toString,$u=u0?u0.toStringTag:void 0;function m4(e){var t=d4.call(e,$u),n=e[$u];try{e[$u]=void 0;var i=!0}catch{}var o=p4.call(e);return i&&(t?e[$u]=n:delete e[$u]),o}var g4=m4,v4=Object.prototype,_4=v4.toString;function y4(e){return _4.call(e)}var b4=y4,c0=Jg,w4=g4,x4=b4,L4="[object Null]",C4="[object Undefined]",h0=c0?c0.toStringTag:void 0;function k4(e){return e==null?e===void 0?C4:L4:h0&&h0 in Object(e)?w4(e):x4(e)}var P4=k4;function E4(e){return e!=null&&typeof e=="object"}var S4=E4,M4=P4,A4=S4,B4="[object Symbol]";function T4(e){return typeof e=="symbol"||A4(e)&&M4(e)==B4}var N4=T4,D4=c4,f0=Zg,O4=N4,d0=NaN,R4=/^[-+]0x[0-9a-f]+$/i,I4=/^0b[01]+$/i,F4=/^0o[0-7]+$/i,j4=parseInt;function z4(e){if(typeof e=="number")return e;if(O4(e))return d0;if(f0(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=f0(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=D4(e);var n=I4.test(e);return n||F4.test(e)?j4(e.slice(2),n?2:8):R4.test(e)?d0:+e}var U4=z4,q4=Zg,vf=r4,p0=U4,$4="Expected a function",V4=Math.max,G4=Math.min;function H4(e,t,n){var i,o,a,u,d,m,_=0,b=!1,w=!1,S=!0;if(typeof e!="function")throw new TypeError($4);t=p0(t)||0,q4(n)&&(b=!!n.leading,w="maxWait"in n,a=w?V4(p0(n.maxWait)||0,t):a,S="trailing"in n?!!n.trailing:S);function C(be){var ie=i,re=o;return i=o=void 0,_=be,u=e.apply(re,ie),u}function F(be){return _=be,d=setTimeout(j,t),b?C(be):u}function R(be){var ie=be-m,re=be-_,Ie=t-ie;return w?G4(Ie,a-re):Ie}function $(be){var ie=be-m,re=be-_;return m===void 0||ie>=t||ie<0||w&&re>=a}function j(){var be=vf();if($(be))return G(be);d=setTimeout(j,R(be))}function G(be){return d=void 0,S&&i?C(be):(i=o=void 0,u)}function Y(){d!==void 0&&clearTimeout(d),_=0,i=m=o=d=void 0}function ke(){return d===void 0?u:G(vf())}function Ce(){var be=vf(),ie=$(be);if(i=arguments,o=this,m=be,ie){if(d===void 0)return F(m);if(w)return clearTimeout(d),d=setTimeout(j,t),C(m)}return d===void 0&&(d=setTimeout(j,t)),u}return Ce.cancel=Y,Ce.flush=ke,Ce}var W4=H4;const Z4=Wg(W4),K4={class:"relative w-full"},J4={key:0,class:"absolute w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto z-[1001]"},Y4=["onClick"],X4=Ms({__name:"SearchBar",emits:["select-location"],setup(e,{emit:t}){const n=It(""),i=It([]),o=t,a=Z4(async m=>{if(m.length<3){i.value=[];return}try{const b=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(m)}`)).json();i.value=b}catch(_){console.error("Erreur lors de la recherche d'adresse:",_),i.value=[]}},300);function u(){a(n.value)}function d(m){n.value=m.display_name,i.value=[],o("select-location",{lat:parseFloat(m.lat),lng:parseFloat(m.lon)})}return(m,_)=>(ut(),dt("div",K4,[jn(B("input",{"onUpdate:modelValue":_[0]||(_[0]=b=>n.value=b),onInput:u,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[Ar,n.value]]),i.value.length>0?(ut(),dt("div",J4,[(ut(!0),dt(Sn,null,Wn(i.value,b=>(ut(),dt("div",{key:b.place_id,onClick:w=>d(b),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},kt(b.display_name),9,Y4))),128))])):un("",!0)]))}}),Xg=(e,t)=>{const n=e.__vccOpts||e;for(const[i,o]of t)n[i]=o;return n},m0=Xg(X4,[["__scopeId","data-v-0102bcad"]]),Q4={class:"h-screen flex flex-col"},eb={key:0,class:"bg-white shadow-sm z-[2000]"},tb={class:"mx-auto px-4 sm:px-6 lg:px-8"},nb={class:"flex h-16 items-center justify-between"},rb={class:"flex items-center space-x-8"},ib={class:"hidden md:flex space-x-6"},sb={key:0,class:"hidden md:block flex-1 mx-8"},ob={key:1,class:"flex-1"},ab={class:"flex items-center space-x-2 md:space-x-4"},lb={class:"flex md:hidden"},ub={class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},cb={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},hb={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},fb={class:"relative"},db={class:"hidden md:flex flex-col items-end"},pb={class:"text-sm font-medium text-gray-700"},mb={key:0,class:"text-xs text-gray-500"},gb=["src","alt"],vb={key:0,class:"absolute right-0 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3000]"},_b={class:"md:hidden px-4 py-2 border-b border-gray-100"},yb={class:"text-sm font-medium text-gray-700"},bb={class:"text-xs text-gray-500"},wb={key:0,class:"md:hidden"},xb={class:"space-y-1 px-2 pb-3 pt-2"},Lb={key:0,class:"px-4 py-3"},Cb={class:"flex-1 overflow-auto"},kb={key:0,class:"fixed inset-0 bg-white z-[2001] flex flex-col items-center justify-center p-6 text-center"},Pb=Ms({__name:"App",setup(e){const t=wc(),n=hs(),i=It(!1),o=It(!1),a=It(!1);function u(){a.value=window.innerWidth<768}$a(()=>{u(),window.addEventListener("resize",u)}),Md(()=>{window.removeEventListener("resize",u)});const d=Nn(()=>{const G=n.user;if(!G)return"";const Y=`${G.first_name} ${G.last_name.toUpperCase()}`;return G.company_name?`${Y} (${G.company_name})`:Y}),m=Nn(()=>{var Y;const G=(Y=n.user)==null?void 0:Y.user_type;switch(console.log("User type:",G),G){case"admin":return"Accs administrateur";case"dealer":return"Accs concessionnaire";case"client":return"Accs client";default:return""}}),_=Nn(()=>{var G;return((G=n.user)==null?void 0:G.user_type)==="admin"}),b=It(""),w=Nn(()=>n.isAuthenticated),S=[{name:"Carte",to:"/"},{name:"Plans",to:"/plans"}],C=Nn(()=>{var Y;if(!w.value)return[];const G=[...S];return _.value?G.push({name:"Utilisateurs",to:"/users"}):((Y=n.user)==null?void 0:Y.user_type)==="dealer"&&G.push({name:"Clients",to:"/clients"}),G}),F=Nn(()=>w.value?[{name:"Mon profil",to:"/profile"}]:[]);async function R(){try{await n.logout(),t.push("/login")}catch(G){console.error("Erreur lors de la dconnexion:",G)}}function $(G){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:G.lat,lng:G.lng,zoom:16}}))}$a(async()=>{console.log("App mounted, checking auth...");try{localStorage.getItem("token")?(console.log("Token found, checking auth..."),await n.checkAuth(),await n.fetchUserProfile()):console.log("No token found")}catch(G){console.error("Auth check error:",G),t.push("/login")}});const j=Nn(()=>{const G="IrrigationDesign";if(!w.value)return`${G} - Connexion`;const Y=t.currentRoute.value,Ce={home:"Carte",plans:"Plans",users:"Utilisateurs",profile:"Mon profil",selectDealer:"Slection du concessionnaire",changePassword:"Changement de mot de passe",map:"Carte"}[Y.name]||"";return Ce?`${G} - ${Ce}`:G});return Yi(j,G=>{document.title=G},{immediate:!0}),(G,Y)=>(ut(),dt("div",Q4,[w.value?(ut(),dt("header",eb,[B("nav",tb,[B("div",nb,[B("div",rb,[Nr(Cn(du),{to:"/",class:"text-xl font-semibold text-primary-600 truncate"},{default:Il(()=>Y[4]||(Y[4]=[B("span",{class:"md:inline hidden"},"IrrigationDesign",-1),B("span",{class:"md:hidden inline"},"ID",-1)])),_:1}),B("div",ib,[(ut(!0),dt(Sn,null,Wn(C.value,ke=>(ut(),Ua(Cn(du),{key:ke.name,to:ke.to,class:Ji(["text-sm font-medium transition-colors duration-200",[G.$route.path===ke.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Il(()=>[yr(kt(ke.name),1)]),_:2},1032,["to","class"]))),128))])]),G.$route.path==="/"?(ut(),dt("div",sb,[Nr(m0,{onSelectLocation:$})])):(ut(),dt("div",ob)),B("div",ab,[B("div",lb,[B("button",{onClick:Y[0]||(Y[0]=ke=>o.value=!o.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500"},[Y[5]||(Y[5]=B("span",{class:"sr-only"},"Ouvrir le menu",-1)),(ut(),dt("svg",ub,[o.value?(ut(),dt("path",hb)):(ut(),dt("path",cb))]))])]),Y[6]||(Y[6]=B("button",{class:"hidden md:flex p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},[B("span",{class:"sr-only"},"Voir les notifications"),B("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})])],-1)),B("div",fb,[B("button",{onClick:Y[1]||(Y[1]=ke=>i.value=!i.value),class:"flex items-center space-x-2 md:space-x-3 focus:outline-none"},[B("div",db,[B("span",pb,kt(d.value),1),m.value?(ut(),dt("span",mb,kt(m.value),1)):un("",!0)]),B("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:b.value||"https://ui-avatars.com/api/?name="+encodeURIComponent(d.value),alt:d.value},null,8,gb)]),i.value?(ut(),dt("div",vb,[B("div",_b,[B("div",yb,kt(d.value),1),B("div",bb,kt(m.value),1)]),(ut(!0),dt(Sn,null,Wn(F.value,ke=>(ut(),Ua(Cn(du),{key:ke.name,to:ke.to,class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:Y[2]||(Y[2]=Ce=>i.value=!1)},{default:Il(()=>[yr(kt(ke.name),1)]),_:2},1032,["to"]))),128)),B("button",{onClick:R,class:"block w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-gray-50"}," Dconnexion ")])):un("",!0)])])]),o.value?(ut(),dt("div",wb,[B("div",xb,[(ut(!0),dt(Sn,null,Wn(C.value,ke=>(ut(),Ua(Cn(du),{key:ke.name,to:ke.to,class:Ji(["block px-3 py-2 rounded-md text-base font-medium",[G.$route.path===ke.to?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]]),onClick:Y[3]||(Y[3]=Ce=>o.value=!1)},{default:Il(()=>[yr(kt(ke.name),1)]),_:2},1032,["to","class"]))),128))]),G.$route.path==="/"?(ut(),dt("div",Lb,[Nr(m0,{onSelectLocation:$})])):un("",!0)])):un("",!0)])])):un("",!0),B("main",Cb,[a.value&&G.$route.path==="/"?(ut(),dt("div",kb,[Y[8]||(Y[8]=B("svg",{class:"w-24 h-24 text-primary-500 mb-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),Y[9]||(Y[9]=B("h2",{class:"text-2xl font-bold text-gray-900 mb-4"}," Version bureau recommande ",-1)),Y[10]||(Y[10]=B("p",{class:"text-gray-600 mb-8 max-w-md"}," Pour une meilleure exprience de conception d'irrigation, nous vous recommandons d'utiliser un cran plus large ou un ordinateur. ",-1)),Nr(Cn(du),{to:"/plans",class:"inline-flex items-center px-4 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700"},{default:Il(()=>Y[7]||(Y[7]=[yr(" Voir mes plans ")])),_:1})])):(ut(),Ua(Cn(Hg),{key:1}))])]))}}),Eb="modulepreload",Sb=function(e){return"/static/frontend/"+e},g0={},Ul=function(t,n,i){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));o=Promise.allSettled(n.map(m=>{if(m=Sb(m),m in g0)return;g0[m]=!0;const _=m.endsWith(".css"),b=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${b}`))return;const w=document.createElement("link");if(w.rel=_?"stylesheet":Eb,_||(w.as="script"),w.crossOrigin="",w.href=m,d&&w.setAttribute("nonce",d),document.head.appendChild(w),_)return new Promise((S,C)=>{w.addEventListener("load",S),w.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return o.then(u=>{for(const d of u||[])d.status==="rejected"&&a(d.reason);return t().catch(a)})},Mb={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},Ab={class:"max-w-md w-full space-y-8"},Bb={class:"space-y-4"},Tb={class:"mt-1"},Nb={class:"mt-1"},Db={class:"mt-1"},Ob={key:0,class:"rounded-md bg-red-50 p-4"},Rb={class:"flex"},Ib={class:"ml-3"},Fb={class:"text-sm font-medium text-red-800"},jb={key:1,class:"rounded-md bg-yellow-50 p-4"},zb={class:"flex"},Ub={class:"ml-3"},qb={class:"mt-2 text-sm text-yellow-700"},$b={class:"list-disc pl-5 space-y-1"},Vb=["disabled"],Gb={class:"absolute left-0 inset-y-0 flex items-center pl-3"},Hb={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Wb={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Zb=Ms({__name:"ChangePasswordForm",setup(e){const t=wc(),n=hs(),i=Va({oldPassword:"",newPassword:"",confirmPassword:""}),o=It(!1),a=It("");$a(()=>{var _,b;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:n.isAuthenticated,userId:(_=n.user)==null?void 0:_.id,mustChangePassword:(b=n.user)==null?void 0:b.must_change_password})});const u=Nn(()=>{const _=[];return i.newPassword&&i.newPassword.length<8&&_.push("Le nouveau mot de passe doit contenir au moins 8 caractres"),i.newPassword&&i.confirmPassword&&i.newPassword!==i.confirmPassword&&_.push("Les mots de passe ne correspondent pas"),_}),d=Nn(()=>i.oldPassword.length>0&&i.newPassword.length>=8&&i.newPassword===i.confirmPassword);async function m(){var _,b,w,S,C,F,R,$;if(!d.value){a.value="Veuillez corriger les erreurs avant de continuer";return}if(!((_=n.user)!=null&&_.id)){a.value="Erreur : utilisateur non identifi";return}o.value=!0,a.value="";try{console.log("Submitting password change..."),await n.changePassword(i.oldPassword,i.newPassword),console.log("Password changed successfully"),t.push("/")}catch(j){console.error("Password change failed:",j),(w=(b=j.response)==null?void 0:b.data)!=null&&w.detail?a.value=j.response.data.detail:(C=(S=j.response)==null?void 0:S.data)!=null&&C.old_password?a.value=j.response.data.old_password[0]:(R=(F=j.response)==null?void 0:F.data)!=null&&R.password?a.value=j.response.data.password[0]:(($=j.response)==null?void 0:$.status)===401?(a.value="Session expire, veuillez vous reconnecter",await n.logout(),t.push("/login")):a.value="Une erreur est survenue lors du changement de mot de passe"}finally{o.value=!1}}return(_,b)=>(ut(),dt("div",Mb,[B("div",Ab,[b[12]||(b[12]=B("div",null,[B("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),B("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de scurit, vous devez changer votre mot de passe. ")],-1)),B("form",{class:"mt-8 space-y-6",onSubmit:Ah(m,["prevent"])},[B("div",Bb,[B("div",null,[b[3]||(b[3]=B("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),B("div",Tb,[jn(B("input",{id:"old-password","onUpdate:modelValue":b[0]||(b[0]=w=>i.oldPassword=w),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[Ar,i.oldPassword]])])]),B("div",null,[b[4]||(b[4]=B("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),B("div",Nb,[jn(B("input",{id:"new-password","onUpdate:modelValue":b[1]||(b[1]=w=>i.newPassword=w),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[Ar,i.newPassword]])]),b[5]||(b[5]=B("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractres ",-1))]),B("div",null,[b[6]||(b[6]=B("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),B("div",Db,[jn(B("input",{id:"confirm-password","onUpdate:modelValue":b[2]||(b[2]=w=>i.confirmPassword=w),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[Ar,i.confirmPassword]])])])]),a.value?(ut(),dt("div",Ob,[B("div",Rb,[b[7]||(b[7]=B("div",{class:"flex-shrink-0"},[B("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),B("div",Ib,[B("h3",Fb,kt(a.value),1)])])])):un("",!0),u.value.length>0?(ut(),dt("div",jb,[B("div",zb,[b[9]||(b[9]=B("div",{class:"flex-shrink-0"},[B("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),B("div",Ub,[b[8]||(b[8]=B("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),B("div",qb,[B("ul",$b,[(ut(!0),dt(Sn,null,Wn(u.value,(w,S)=>(ut(),dt("li",{key:S},kt(w),1))),128))])])])])])):un("",!0),B("div",null,[B("button",{type:"submit",disabled:o.value||!d.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[B("span",Gb,[o.value?(ut(),dt("svg",Wb,b[11]||(b[11]=[B("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),B("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(ut(),dt("svg",Hb,b[10]||(b[10]=[B("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),yr(" "+kt(o.value?"Modification en cours...":"Changer le mot de passe"),1)],8,Vb)])],32)])]))}}),Kb="/static/frontend/assets/logo.svg",Jb={class:"min-h-screen bg-white from-blue-50 to-white flex flex-col justify-center py-12 sm:px-6 lg:px-8"},Yb={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},Xb={class:"bg-white py-8 px-6 shadow-lg rounded-md sm:px-10"},Qb={key:0,class:"rounded-md bg-red-50 p-4"},e3={class:"flex"},t3={class:"ml-3"},n3={class:"text-sm font-medium text-red-800"},r3={class:"mt-1"},i3={class:"mt-1 relative"},s3=["type"],o3={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a3={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},l3={class:"flex items-center justify-between"},u3={class:"flex items-center"},c3={class:"text-sm"},h3=["disabled"],f3={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},d3=Ms({__name:"LoginView",setup(e){const t=wc(),n=hs(),i=It(!1),o=It(null),a=It(!1),u=Va({username:"",password:"",rememberMe:!1});$a(()=>{var m;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE),(m=window.INITIAL_STATE)!=null&&m.isAuthenticated&&(console.log("User is authenticated, redirecting to home"),t.push("/"))});async function d(){var m,_,b,w,S,C;i.value=!0,o.value=null;try{if(!u.username||!u.password){o.value="Veuillez remplir tous les champs";return}await n.login(u.username,u.password),(m=n.user)!=null&&m.must_change_password?t.push("/change-password"):t.push("/")}catch(F){console.error("Login error:",F),o.value=((b=(_=F==null?void 0:F.response)==null?void 0:_.data)==null?void 0:b.detail)||((C=(S=(w=F==null?void 0:F.response)==null?void 0:w.data)==null?void 0:S.non_field_errors)==null?void 0:C[0])||(F==null?void 0:F.message)||"Erreur lors de la connexion"}finally{i.value=!1}}return(m,_)=>{const b=Vv("router-link");return ut(),dt("div",Jb,[_[12]||(_[12]=B("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[B("img",{src:Kb,alt:"IrrigationDesign Logo",class:"mx-auto h-40 w-auto transition-transform duration-300 hover:scale-110"}),B("h2",{class:"mt-2 text-center text-3xl font-bold text-gray-800"}," IrrigationDesign "),B("p",{class:"mt-2 text-center text-sm text-gray-600"}," Connectez-vous pour accder  votre espace ")],-1)),B("div",Yb,[B("div",Xb,[B("form",{class:"space-y-6",onSubmit:Ah(d,["prevent"])},[o.value?(ut(),dt("div",Qb,[B("div",e3,[_[4]||(_[4]=B("div",{class:"flex-shrink-0"},[B("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),B("div",t3,[B("h3",n3,kt(o.value),1)])])])):un("",!0),B("div",null,[_[5]||(_[5]=B("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),B("div",r3,[jn(B("input",{id:"username","onUpdate:modelValue":_[0]||(_[0]=w=>u.username=w),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[Ar,u.username]])])]),B("div",null,[_[8]||(_[8]=B("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),B("div",i3,[jn(B("input",{id:"password","onUpdate:modelValue":_[1]||(_[1]=w=>u.password=w),type:a.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,s3),[[ny,u.password]]),B("button",{type:"button",onClick:_[2]||(_[2]=w=>a.value=!a.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[a.value?(ut(),dt("svg",o3,_[6]||(_[6]=[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(ut(),dt("svg",a3,_[7]||(_[7]=[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),B("div",l3,[B("div",u3,[jn(B("input",{id:"remember-me","onUpdate:modelValue":_[3]||(_[3]=w=>u.rememberMe=w),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[ng,u.rememberMe]]),_[9]||(_[9]=B("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),B("div",c3,[Nr(b,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Il(()=>_[10]||(_[10]=[yr(" Mot de passe oubli ? ")])),_:1})])]),B("div",null,[B("button",{type:"submit",disabled:i.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[i.value?(ut(),dt("svg",f3,_[11]||(_[11]=[B("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),B("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):un("",!0),yr(" "+kt(i.value?"Connexion en cours...":"Se connecter"),1)],8,h3)])],32)])])])}}}),_f="/static/frontend/assets/logo.jpeg";var Xf={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,i){i(t)})(po,function(n){var i="1.9.4";function o(r){var c,g,P,D;for(g=1,P=arguments.length;g<P;g++){D=arguments[g];for(c in D)r[c]=D[c]}return r}var a=Object.create||function(){function r(){}return function(c){return r.prototype=c,new r}}();function u(r,c){var g=Array.prototype.slice;if(r.bind)return r.bind.apply(r,g.call(arguments,1));var P=g.call(arguments,2);return function(){return r.apply(c,P.length?P.concat(g.call(arguments)):arguments)}}var d=0;function m(r){return"_leaflet_id"in r||(r._leaflet_id=++d),r._leaflet_id}function _(r,c,g){var P,D,le,je;return je=function(){P=!1,D&&(le.apply(g,D),D=!1)},le=function(){P?D=arguments:(r.apply(g,arguments),setTimeout(je,c),P=!0)},le}function b(r,c,g){var P=c[1],D=c[0],le=P-D;return r===P&&g?r:((r-D)%le+le)%le+D}function w(){return!1}function S(r,c){if(c===!1)return r;var g=Math.pow(10,c===void 0?6:c);return Math.round(r*g)/g}function C(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function F(r){return C(r).split(/\s+/)}function R(r,c){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?a(r.options):{});for(var g in c)r.options[g]=c[g];return r.options}function $(r,c,g){var P=[];for(var D in r)P.push(encodeURIComponent(g?D.toUpperCase():D)+"="+encodeURIComponent(r[D]));return(!c||c.indexOf("?")===-1?"?":"&")+P.join("&")}var j=/\{ *([\w_ -]+) *\}/g;function G(r,c){return r.replace(j,function(g,P){var D=c[P];if(D===void 0)throw new Error("No value provided for variable "+g);return typeof D=="function"&&(D=D(c)),D})}var Y=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function ke(r,c){for(var g=0;g<r.length;g++)if(r[g]===c)return g;return-1}var Ce="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function be(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var ie=0;function re(r){var c=+new Date,g=Math.max(0,16-(c-ie));return ie=c+g,window.setTimeout(r,g)}var Ie=window.requestAnimationFrame||be("RequestAnimationFrame")||re,Je=window.cancelAnimationFrame||be("CancelAnimationFrame")||be("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function V(r,c,g){if(g&&Ie===re)r.call(c);else return Ie.call(window,u(r,c))}function X(r){r&&Je.call(window,r)}var N={__proto__:null,extend:o,create:a,bind:u,get lastId(){return d},stamp:m,throttle:_,wrapNum:b,falseFn:w,formatNum:S,trim:C,splitWords:F,setOptions:R,getParamString:$,template:G,isArray:Y,indexOf:ke,emptyImageUrl:Ce,requestFn:Ie,cancelFn:Je,requestAnimFrame:V,cancelAnimFrame:X};function te(){}te.extend=function(r){var c=function(){R(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},g=c.__super__=this.prototype,P=a(g);P.constructor=c,c.prototype=P;for(var D in this)Object.prototype.hasOwnProperty.call(this,D)&&D!=="prototype"&&D!=="__super__"&&(c[D]=this[D]);return r.statics&&o(c,r.statics),r.includes&&(W(r.includes),o.apply(null,[P].concat(r.includes))),o(P,r),delete P.statics,delete P.includes,P.options&&(P.options=g.options?a(g.options):{},o(P.options,r.options)),P._initHooks=[],P.callInitHooks=function(){if(!this._initHooksCalled){g.callInitHooks&&g.callInitHooks.call(this),this._initHooksCalled=!0;for(var le=0,je=P._initHooks.length;le<je;le++)P._initHooks[le].call(this)}},c},te.include=function(r){var c=this.prototype.options;return o(this.prototype,r),r.options&&(this.prototype.options=c,this.mergeOptions(r.options)),this},te.mergeOptions=function(r){return o(this.prototype.options,r),this},te.addInitHook=function(r){var c=Array.prototype.slice.call(arguments,1),g=typeof r=="function"?r:function(){this[r].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(g),this};function W(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=Y(r)?r:[r];for(var c=0;c<r.length;c++)r[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var H={on:function(r,c,g){if(typeof r=="object")for(var P in r)this._on(P,r[P],c);else{r=F(r);for(var D=0,le=r.length;D<le;D++)this._on(r[D],c,g)}return this},off:function(r,c,g){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var P in r)this._off(P,r[P],c);else{r=F(r);for(var D=arguments.length===1,le=0,je=r.length;le<je;le++)D?this._off(r[le]):this._off(r[le],c,g)}return this},_on:function(r,c,g,P){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(r,c,g)===!1){g===this&&(g=void 0);var D={fn:c,ctx:g};P&&(D.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(D)}},_off:function(r,c,g){var P,D,le;if(this._events&&(P=this._events[r],!!P)){if(arguments.length===1){if(this._firingCount)for(D=0,le=P.length;D<le;D++)P[D].fn=w;delete this._events[r];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var je=this._listens(r,c,g);if(je!==!1){var ct=P[je];this._firingCount&&(ct.fn=w,this._events[r]=P=P.slice()),P.splice(je,1)}}},fire:function(r,c,g){if(!this.listens(r,g))return this;var P=o({},c,{type:r,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var D=this._events[r];if(D){this._firingCount=this._firingCount+1||1;for(var le=0,je=D.length;le<je;le++){var ct=D[le],vt=ct.fn;ct.once&&this.off(r,vt,ct.ctx),vt.call(ct.ctx||this,P)}this._firingCount--}}return g&&this._propagateEvent(P),this},listens:function(r,c,g,P){typeof r!="string"&&console.warn('"string" type argument expected');var D=c;typeof c!="function"&&(P=!!c,D=void 0,g=void 0);var le=this._events&&this._events[r];if(le&&le.length&&this._listens(r,D,g)!==!1)return!0;if(P){for(var je in this._eventParents)if(this._eventParents[je].listens(r,c,g,P))return!0}return!1},_listens:function(r,c,g){if(!this._events)return!1;var P=this._events[r]||[];if(!c)return!!P.length;g===this&&(g=void 0);for(var D=0,le=P.length;D<le;D++)if(P[D].fn===c&&P[D].ctx===g)return D;return!1},once:function(r,c,g){if(typeof r=="object")for(var P in r)this._on(P,r[P],c,!0);else{r=F(r);for(var D=0,le=r.length;D<le;D++)this._on(r[D],c,g,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[m(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[m(r)],this},_propagateEvent:function(r){for(var c in this._eventParents)this._eventParents[c].fire(r.type,o({layer:r.target,propagatedFrom:r.target},r),!0)}};H.addEventListener=H.on,H.removeEventListener=H.clearAllEventListeners=H.off,H.addOneTimeEventListener=H.once,H.fireEvent=H.fire,H.hasEventListeners=H.listens;var me=te.extend(H);function U(r,c,g){this.x=g?Math.round(r):r,this.y=g?Math.round(c):c}var I=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};U.prototype={clone:function(){return new U(this.x,this.y)},add:function(r){return this.clone()._add(Q(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(Q(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new U(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new U(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=I(this.x),this.y=I(this.y),this},distanceTo:function(r){r=Q(r);var c=r.x-this.x,g=r.y-this.y;return Math.sqrt(c*c+g*g)},equals:function(r){return r=Q(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=Q(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+S(this.x)+", "+S(this.y)+")"}};function Q(r,c,g){return r instanceof U?r:Y(r)?new U(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new U(r.x,r.y):new U(r,c,g)}function Re(r,c){if(r)for(var g=c?[r,c]:r,P=0,D=g.length;P<D;P++)this.extend(g[P])}Re.prototype={extend:function(r){var c,g;if(!r)return this;if(r instanceof U||typeof r[0]=="number"||"x"in r)c=g=Q(r);else if(r=O(r),c=r.min,g=r.max,!c||!g)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=g.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(g.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(g.y,this.max.y)),this},getCenter:function(r){return Q((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return Q(this.min.x,this.max.y)},getTopRight:function(){return Q(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var c,g;return typeof r[0]=="number"||r instanceof U?r=Q(r):r=O(r),r instanceof Re?(c=r.min,g=r.max):c=g=r,c.x>=this.min.x&&g.x<=this.max.x&&c.y>=this.min.y&&g.y<=this.max.y},intersects:function(r){r=O(r);var c=this.min,g=this.max,P=r.min,D=r.max,le=D.x>=c.x&&P.x<=g.x,je=D.y>=c.y&&P.y<=g.y;return le&&je},overlaps:function(r){r=O(r);var c=this.min,g=this.max,P=r.min,D=r.max,le=D.x>c.x&&P.x<g.x,je=D.y>c.y&&P.y<g.y;return le&&je},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var c=this.min,g=this.max,P=Math.abs(c.x-g.x)*r,D=Math.abs(c.y-g.y)*r;return O(Q(c.x-P,c.y-D),Q(g.x+P,g.y+D))},equals:function(r){return r?(r=O(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function O(r,c){return!r||r instanceof Re?r:new Re(r,c)}function J(r,c){if(r)for(var g=c?[r,c]:r,P=0,D=g.length;P<D;P++)this.extend(g[P])}J.prototype={extend:function(r){var c=this._southWest,g=this._northEast,P,D;if(r instanceof de)P=r,D=r;else if(r instanceof J){if(P=r._southWest,D=r._northEast,!P||!D)return this}else return r?this.extend(_e(r)||se(r)):this;return!c&&!g?(this._southWest=new de(P.lat,P.lng),this._northEast=new de(D.lat,D.lng)):(c.lat=Math.min(P.lat,c.lat),c.lng=Math.min(P.lng,c.lng),g.lat=Math.max(D.lat,g.lat),g.lng=Math.max(D.lng,g.lng)),this},pad:function(r){var c=this._southWest,g=this._northEast,P=Math.abs(c.lat-g.lat)*r,D=Math.abs(c.lng-g.lng)*r;return new J(new de(c.lat-P,c.lng-D),new de(g.lat+P,g.lng+D))},getCenter:function(){return new de((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new de(this.getNorth(),this.getWest())},getSouthEast:function(){return new de(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof de||"lat"in r?r=_e(r):r=se(r);var c=this._southWest,g=this._northEast,P,D;return r instanceof J?(P=r.getSouthWest(),D=r.getNorthEast()):P=D=r,P.lat>=c.lat&&D.lat<=g.lat&&P.lng>=c.lng&&D.lng<=g.lng},intersects:function(r){r=se(r);var c=this._southWest,g=this._northEast,P=r.getSouthWest(),D=r.getNorthEast(),le=D.lat>=c.lat&&P.lat<=g.lat,je=D.lng>=c.lng&&P.lng<=g.lng;return le&&je},overlaps:function(r){r=se(r);var c=this._southWest,g=this._northEast,P=r.getSouthWest(),D=r.getNorthEast(),le=D.lat>c.lat&&P.lat<g.lat,je=D.lng>c.lng&&P.lng<g.lng;return le&&je},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,c){return r?(r=se(r),this._southWest.equals(r.getSouthWest(),c)&&this._northEast.equals(r.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function se(r,c){return r instanceof J?r:new J(r,c)}function de(r,c,g){if(isNaN(r)||isNaN(c))throw new Error("Invalid LatLng object: ("+r+", "+c+")");this.lat=+r,this.lng=+c,g!==void 0&&(this.alt=+g)}de.prototype={equals:function(r,c){if(!r)return!1;r=_e(r);var g=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return g<=(c===void 0?1e-9:c)},toString:function(r){return"LatLng("+S(this.lat,r)+", "+S(this.lng,r)+")"},distanceTo:function(r){return we.distance(this,_e(r))},wrap:function(){return we.wrapLatLng(this)},toBounds:function(r){var c=180*r/40075017,g=c/Math.cos(Math.PI/180*this.lat);return se([this.lat-c,this.lng-g],[this.lat+c,this.lng+g])},clone:function(){return new de(this.lat,this.lng,this.alt)}};function _e(r,c,g){return r instanceof de?r:Y(r)&&typeof r[0]!="object"?r.length===3?new de(r[0],r[1],r[2]):r.length===2?new de(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new de(r.lat,"lng"in r?r.lng:r.lon,r.alt):c===void 0?null:new de(r,c,g)}var he={latLngToPoint:function(r,c){var g=this.projection.project(r),P=this.scale(c);return this.transformation._transform(g,P)},pointToLatLng:function(r,c){var g=this.scale(c),P=this.transformation.untransform(r,g);return this.projection.unproject(P)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var c=this.projection.bounds,g=this.scale(r),P=this.transformation.transform(c.min,g),D=this.transformation.transform(c.max,g);return new Re(P,D)},infinite:!1,wrapLatLng:function(r){var c=this.wrapLng?b(r.lng,this.wrapLng,!0):r.lng,g=this.wrapLat?b(r.lat,this.wrapLat,!0):r.lat,P=r.alt;return new de(g,c,P)},wrapLatLngBounds:function(r){var c=r.getCenter(),g=this.wrapLatLng(c),P=c.lat-g.lat,D=c.lng-g.lng;if(P===0&&D===0)return r;var le=r.getSouthWest(),je=r.getNorthEast(),ct=new de(le.lat-P,le.lng-D),vt=new de(je.lat-P,je.lng-D);return new J(ct,vt)}},we=o({},he,{wrapLng:[-180,180],R:6371e3,distance:function(r,c){var g=Math.PI/180,P=r.lat*g,D=c.lat*g,le=Math.sin((c.lat-r.lat)*g/2),je=Math.sin((c.lng-r.lng)*g/2),ct=le*le+Math.cos(P)*Math.cos(D)*je*je,vt=2*Math.atan2(Math.sqrt(ct),Math.sqrt(1-ct));return this.R*vt}}),Ee=6378137,Ve={R:Ee,MAX_LATITUDE:85.0511287798,project:function(r){var c=Math.PI/180,g=this.MAX_LATITUDE,P=Math.max(Math.min(g,r.lat),-g),D=Math.sin(P*c);return new U(this.R*r.lng*c,this.R*Math.log((1+D)/(1-D))/2)},unproject:function(r){var c=180/Math.PI;return new de((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*c,r.x*c/this.R)},bounds:function(){var r=Ee*Math.PI;return new Re([-r,-r],[r,r])}()};function tt(r,c,g,P){if(Y(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=c,this._c=g,this._d=P}tt.prototype={transform:function(r,c){return this._transform(r.clone(),c)},_transform:function(r,c){return c=c||1,r.x=c*(this._a*r.x+this._b),r.y=c*(this._c*r.y+this._d),r},untransform:function(r,c){return c=c||1,new U((r.x/c-this._b)/this._a,(r.y/c-this._d)/this._c)}};function ne(r,c,g,P){return new tt(r,c,g,P)}var fe=o({},we,{code:"EPSG:3857",projection:Ve,transformation:function(){var r=.5/(Math.PI*Ve.R);return ne(r,.5,-r,.5)}()}),De=o({},fe,{code:"EPSG:900913"});function Be(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function ce(r,c){var g="",P,D,le,je,ct,vt;for(P=0,le=r.length;P<le;P++){for(ct=r[P],D=0,je=ct.length;D<je;D++)vt=ct[D],g+=(D?"L":"M")+vt.x+" "+vt.y;g+=c?$t.svg?"z":"x":""}return g||"M0 0"}var Ge=document.documentElement.style,it="ActiveXObject"in window,Qe=it&&!document.addEventListener,lt="msLaunchUri"in navigator&&!("documentMode"in document),Oe=$n("webkit"),Pe=$n("android"),ot=$n("android 2")||$n("android 3"),_t=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ct=Pe&&$n("Google")&&_t<537&&!("AudioNode"in window),ze=!!window.opera,Ot=!lt&&$n("chrome"),Nt=$n("gecko")&&!Oe&&!ze&&!it,Ut=!Ot&&$n("safari"),Ht=$n("phantom"),Dt="OTransition"in Ge,Pn=navigator.platform.indexOf("Win")===0,en=it&&"transition"in Ge,Yn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ot,ln="MozPerspective"in Ge,xn=!window.L_DISABLE_3D&&(en||Yn||ln)&&!Dt&&!Ht,Xn=typeof orientation<"u"||$n("mobile"),qt=Xn&&Oe,Ei=Xn&&Yn,In=!window.PointerEvent&&window.MSPointerEvent,Lr=!!(window.PointerEvent||In),Dr="ontouchstart"in window||!!window.TouchEvent,qn=!window.L_NO_TOUCH&&(Dr||Lr),cn=Xn&&ze,Yt=Xn&&Nt,Jt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ur=function(){var r=!1;try{var c=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",w,c),window.removeEventListener("testPassiveEventSupport",w,c)}catch{}return r}(),Si=function(){return!!document.createElement("canvas").getContext}(),Mi=!!(document.createElementNS&&Be("svg").createSVGRect),on=!!Mi&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Qi=!Mi&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var c=r.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),fs=navigator.platform.indexOf("Mac")===0,li=navigator.platform.indexOf("Linux")===0;function $n(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var $t={ie:it,ielt9:Qe,edge:lt,webkit:Oe,android:Pe,android23:ot,androidStock:Ct,opera:ze,chrome:Ot,gecko:Nt,safari:Ut,phantom:Ht,opera12:Dt,win:Pn,ie3d:en,webkit3d:Yn,gecko3d:ln,any3d:xn,mobile:Xn,mobileWebkit:qt,mobileWebkit3d:Ei,msPointer:In,pointer:Lr,touch:qn,touchNative:Dr,mobileOpera:cn,mobileGecko:Yt,retina:Jt,passiveEvents:ur,canvas:Si,svg:Mi,vml:Qi,inlineSvg:on,mac:fs,linux:li},ui=$t.msPointer?"MSPointerDown":"pointerdown",yo=$t.msPointer?"MSPointerMove":"pointermove",es=$t.msPointer?"MSPointerUp":"pointerup",Ai=$t.msPointer?"MSPointerCancel":"pointercancel",yi={touchstart:ui,touchmove:yo,touchend:es,touchcancel:Ai},Bi={touchstart:Ll,touchmove:wo,touchend:wo,touchcancel:wo},Qr={},bi=!1;function ds(r,c,g){return c==="touchstart"&&Js(),Bi[c]?(g=Bi[c].bind(this,g),r.addEventListener(yi[c],g,!1),g):(console.warn("wrong event specified:",c),w)}function bo(r,c,g){if(!yi[c]){console.warn("wrong event specified:",c);return}r.removeEventListener(yi[c],g,!1)}function Go(r){Qr[r.pointerId]=r}function Ho(r){Qr[r.pointerId]&&(Qr[r.pointerId]=r)}function Bs(r){delete Qr[r.pointerId]}function Js(){bi||(document.addEventListener(ui,Go,!0),document.addEventListener(yo,Ho,!0),document.addEventListener(es,Bs,!0),document.addEventListener(Ai,Bs,!0),bi=!0)}function wo(r,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var g in Qr)c.touches.push(Qr[g]);c.changedTouches=[c],r(c)}}function Ll(r,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&mr(c),wo(r,c)}function Cl(r){var c={},g,P;for(P in r)g=r[P],c[P]=g&&g.bind?g.bind(r):g;return r=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var Wo=200;function Ha(r,c){r.addEventListener("dblclick",c);var g=0,P;function D(le){if(le.detail!==1){P=le.detail;return}if(!(le.pointerType==="mouse"||le.sourceCapabilities&&!le.sourceCapabilities.firesTouchEvents)){var je=Rs(le);if(!(je.some(function(vt){return vt instanceof HTMLLabelElement&&vt.attributes.for})&&!je.some(function(vt){return vt instanceof HTMLInputElement||vt instanceof HTMLSelectElement}))){var ct=Date.now();ct-g<=Wo?(P++,P===2&&c(Cl(le))):P=1,g=ct}}}return r.addEventListener("click",D),{dblclick:c,simDblclick:D}}function kl(r,c){r.removeEventListener("dblclick",c.dblclick),r.removeEventListener("click",c.simDblclick)}var xo=Zo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Lo=Zo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),_a=Lo==="webkitTransition"||Lo==="OTransition"?Lo+"End":"transitionend";function Wa(r){return typeof r=="string"?document.getElementById(r):r}function wi(r,c){var g=r.style[c]||r.currentStyle&&r.currentStyle[c];if((!g||g==="auto")&&document.defaultView){var P=document.defaultView.getComputedStyle(r,null);g=P?P[c]:null}return g==="auto"?null:g}function Rn(r,c,g){var P=document.createElement(r);return P.className=c||"",g&&g.appendChild(P),P}function _n(r){var c=r.parentNode;c&&c.removeChild(r)}function Ys(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function Ts(r){var c=r.parentNode;c&&c.lastChild!==r&&c.appendChild(r)}function ps(r){var c=r.parentNode;c&&c.firstChild!==r&&c.insertBefore(r,c.firstChild)}function Co(r,c){if(r.classList!==void 0)return r.classList.contains(c);var g=Or(r);return g.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(g)}function bn(r,c){if(r.classList!==void 0)for(var g=F(c),P=0,D=g.length;P<D;P++)r.classList.add(g[P]);else if(!Co(r,c)){var le=Or(r);Xs(r,(le?le+" ":"")+c)}}function zn(r,c){r.classList!==void 0?r.classList.remove(c):Xs(r,C((" "+Or(r)+" ").replace(" "+c+" "," ")))}function Xs(r,c){r.className.baseVal===void 0?r.className=c:r.className.baseVal=c}function Or(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function $r(r,c){"opacity"in r.style?r.style.opacity=c:"filter"in r.style&&Za(r,c)}function Za(r,c){var g=!1,P="DXImageTransform.Microsoft.Alpha";try{g=r.filters.item(P)}catch{if(c===1)return}c=Math.round(c*100),g?(g.Enabled=c!==100,g.Opacity=c):r.style.filter+=" progid:"+P+"(opacity="+c+")"}function Zo(r){for(var c=document.documentElement.style,g=0;g<r.length;g++)if(r[g]in c)return r[g];return!1}function ms(r,c,g){var P=c||new U(0,0);r.style[xo]=($t.ie3d?"translate("+P.x+"px,"+P.y+"px)":"translate3d("+P.x+"px,"+P.y+"px,0)")+(g?" scale("+g+")":"")}function cr(r,c){r._leaflet_pos=c,$t.any3d?ms(r,c):(r.style.left=c.x+"px",r.style.top=c.y+"px")}function gs(r){return r._leaflet_pos||new U(0,0)}var ko,Ns,ya;if("onselectstart"in document)ko=function(){yn(window,"selectstart",mr)},Ns=function(){Dn(window,"selectstart",mr)};else{var Qs=Zo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ko=function(){if(Qs){var r=document.documentElement.style;ya=r[Qs],r[Qs]="none"}},Ns=function(){Qs&&(document.documentElement.style[Qs]=ya,ya=void 0)}}function ba(){yn(window,"dragstart",mr)}function ts(){Dn(window,"dragstart",mr)}var Ds,eo;function Ko(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(Cr(),Ds=r,eo=r.style.outlineStyle,r.style.outlineStyle="none",yn(window,"keydown",Cr))}function Cr(){Ds&&(Ds.style.outlineStyle=eo,Ds=void 0,eo=void 0,Dn(window,"keydown",Cr))}function Ka(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function Jo(r){var c=r.getBoundingClientRect();return{x:c.width/r.offsetWidth||1,y:c.height/r.offsetHeight||1,boundingClientRect:c}}var gn={__proto__:null,TRANSFORM:xo,TRANSITION:Lo,TRANSITION_END:_a,get:Wa,getStyle:wi,create:Rn,remove:_n,empty:Ys,toFront:Ts,toBack:ps,hasClass:Co,addClass:bn,removeClass:zn,setClass:Xs,getClass:Or,setOpacity:$r,testProp:Zo,setTransform:ms,setPosition:cr,getPosition:gs,get disableTextSelection(){return ko},get enableTextSelection(){return Ns},disableImageDrag:ba,enableImageDrag:ts,preventOutline:Ko,restoreOutline:Cr,getSizedParentNode:Ka,getScale:Jo};function yn(r,c,g,P){if(c&&typeof c=="object")for(var D in c)to(r,D,c[D],g);else{c=F(c);for(var le=0,je=c.length;le<je;le++)to(r,c[le],g,P)}return this}var Ti="_leaflet_events";function Dn(r,c,g,P){if(arguments.length===1)wa(r),delete r[Ti];else if(c&&typeof c=="object")for(var D in c)Ni(r,D,c[D],g);else if(c=F(c),arguments.length===2)wa(r,function(ct){return ke(c,ct)!==-1});else for(var le=0,je=c.length;le<je;le++)Ni(r,c[le],g,P);return this}function wa(r,c){for(var g in r[Ti]){var P=g.split(/\d/)[0];(!c||c(P))&&Ni(r,P,null,null,g)}}var Yo={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function to(r,c,g,P){var D=c+m(g)+(P?"_"+m(P):"");if(r[Ti]&&r[Ti][D])return this;var le=function(ct){return g.call(P||r,ct||window.event)},je=le;!$t.touchNative&&$t.pointer&&c.indexOf("touch")===0?le=ds(r,c,le):$t.touch&&c==="dblclick"?le=Ha(r,le):"addEventListener"in r?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?r.addEventListener(Yo[c]||c,le,$t.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(le=function(ct){ct=ct||window.event,no(r,ct)&&je(ct)},r.addEventListener(Yo[c],le,!1)):r.addEventListener(c,je,!1):r.attachEvent("on"+c,le),r[Ti]=r[Ti]||{},r[Ti][D]=le}function Ni(r,c,g,P,D){D=D||c+m(g)+(P?"_"+m(P):"");var le=r[Ti]&&r[Ti][D];if(!le)return this;!$t.touchNative&&$t.pointer&&c.indexOf("touch")===0?bo(r,c,le):$t.touch&&c==="dblclick"?kl(r,le):"removeEventListener"in r?r.removeEventListener(Yo[c]||c,le,!1):r.detachEvent("on"+c,le),r[Ti][D]=null}function Os(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function xa(r){return to(r,"wheel",Os),this}function Po(r){return yn(r,"mousedown touchstart dblclick contextmenu",Os),r._leaflet_disable_click=!0,this}function mr(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function xi(r){return mr(r),Os(r),this}function Rs(r){if(r.composedPath)return r.composedPath();for(var c=[],g=r.target;g;)c.push(g),g=g.parentNode;return c}function Ja(r,c){if(!c)return new U(r.clientX,r.clientY);var g=Jo(c),P=g.boundingClientRect;return new U((r.clientX-P.left)/g.x-c.clientLeft,(r.clientY-P.top)/g.y-c.clientTop)}var Eo=$t.linux&&$t.chrome?window.devicePixelRatio:$t.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Xo(r){return $t.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/Eo:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function no(r,c){var g=c.relatedTarget;if(!g)return!0;try{for(;g&&g!==r;)g=g.parentNode}catch{return!1}return g!==r}var So={__proto__:null,on:yn,off:Dn,stopPropagation:Os,disableScrollPropagation:xa,disableClickPropagation:Po,preventDefault:mr,stop:xi,getPropagationPath:Rs,getMousePosition:Ja,getWheelDelta:Xo,isExternalTarget:no,addListener:yn,removeListener:Dn},La=me.extend({run:function(r,c,g,P){this.stop(),this._el=r,this._inProgress=!0,this._duration=g||.25,this._easeOutPower=1/Math.max(P||.5,.2),this._startPos=gs(r),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=V(this._animate,this),this._step()},_step:function(r){var c=+new Date-this._startTime,g=this._duration*1e3;c<g?this._runFrame(this._easeOut(c/g),r):(this._runFrame(1),this._complete())},_runFrame:function(r,c){var g=this._startPos.add(this._offset.multiplyBy(r));c&&g._round(),cr(this._el,g),this.fire("step")},_complete:function(){X(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),An=me.extend({options:{crs:fe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,c){c=R(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(_e(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Lo&&$t.any3d&&!$t.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),yn(this._proxy,_a,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,c,g){if(c=c===void 0?this._zoom:this._limitZoom(c),r=this._limitCenter(_e(r),c,this.options.maxBounds),g=g||{},this._stop(),this._loaded&&!g.reset&&g!==!0){g.animate!==void 0&&(g.zoom=o({animate:g.animate},g.zoom),g.pan=o({animate:g.animate,duration:g.duration},g.pan));var P=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,c,g.zoom):this._tryAnimatedPan(r,g.pan);if(P)return clearTimeout(this._sizeTimer),this}return this._resetView(r,c,g.pan&&g.pan.noMoveStart),this},setZoom:function(r,c){return this._loaded?this.setView(this.getCenter(),r,{zoom:c}):(this._zoom=r,this)},zoomIn:function(r,c){return r=r||($t.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,c)},zoomOut:function(r,c){return r=r||($t.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,c)},setZoomAround:function(r,c,g){var P=this.getZoomScale(c),D=this.getSize().divideBy(2),le=r instanceof U?r:this.latLngToContainerPoint(r),je=le.subtract(D).multiplyBy(1-1/P),ct=this.containerPointToLatLng(D.add(je));return this.setView(ct,c,{zoom:g})},_getBoundsCenterZoom:function(r,c){c=c||{},r=r.getBounds?r.getBounds():se(r);var g=Q(c.paddingTopLeft||c.padding||[0,0]),P=Q(c.paddingBottomRight||c.padding||[0,0]),D=this.getBoundsZoom(r,!1,g.add(P));if(D=typeof c.maxZoom=="number"?Math.min(c.maxZoom,D):D,D===1/0)return{center:r.getCenter(),zoom:D};var le=P.subtract(g).divideBy(2),je=this.project(r.getSouthWest(),D),ct=this.project(r.getNorthEast(),D),vt=this.unproject(je.add(ct).divideBy(2).add(le),D);return{center:vt,zoom:D}},fitBounds:function(r,c){if(r=se(r),!r.isValid())throw new Error("Bounds are not valid.");var g=this._getBoundsCenterZoom(r,c);return this.setView(g.center,g.zoom,c)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,c){return this.setView(r,this._zoom,{pan:c})},panBy:function(r,c){if(r=Q(r).round(),c=c||{},!r.x&&!r.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new La,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){bn(this._mapPane,"leaflet-pan-anim");var g=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,g,c.duration||.25,c.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,c,g){if(g=g||{},g.animate===!1||!$t.any3d)return this.setView(r,c,g);this._stop();var P=this.project(this.getCenter()),D=this.project(r),le=this.getSize(),je=this._zoom;r=_e(r),c=c===void 0?je:c;var ct=Math.max(le.x,le.y),vt=ct*this.getZoomScale(je,c),At=D.distanceTo(P)||1,Gt=1.42,rn=Gt*Gt;function En(Kn){var Zr=Kn?-1:1,Nu=Kn?vt:ct,ks=vt*vt-ct*ct+Zr*rn*rn*At*At,Xl=2*Nu*rn*At,Oo=ks/Xl,nl=Math.sqrt(Oo*Oo+1)-Oo,Ql=nl<1e-9?-18:Math.log(nl);return Ql}function ai(Kn){return(Math.exp(Kn)-Math.exp(-Kn))/2}function Mr(Kn){return(Math.exp(Kn)+Math.exp(-Kn))/2}function gi(Kn){return ai(Kn)/Mr(Kn)}var fr=En(0);function Cs(Kn){return ct*(Mr(fr)/Mr(fr+Gt*Kn))}function El(Kn){return ct*(Mr(fr)*gi(fr+Gt*Kn)-ai(fr))/rn}function ss(Kn){return 1-Math.pow(1-Kn,1.5)}var Ui=Date.now(),ki=(En(1)-fr)/Gt,Tu=g.duration?1e3*g.duration:1e3*ki*.8;function Sl(){var Kn=(Date.now()-Ui)/Tu,Zr=ss(Kn)*ki;Kn<=1?(this._flyToFrame=V(Sl,this),this._move(this.unproject(P.add(D.subtract(P).multiplyBy(El(Zr)/At)),je),this.getScaleZoom(ct/Cs(Zr),je),{flyTo:!0})):this._move(r,c)._moveEnd(!0)}return this._moveStart(!0,g.noMoveStart),Sl.call(this),this},flyToBounds:function(r,c){var g=this._getBoundsCenterZoom(r,c);return this.flyTo(g.center,g.zoom,c)},setMaxBounds:function(r){return r=se(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var c=this.options.minZoom;return this.options.minZoom=r,this._loaded&&c!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var c=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&c!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,c){this._enforcingBounds=!0;var g=this.getCenter(),P=this._limitCenter(g,this._zoom,se(r));return g.equals(P)||this.panTo(P,c),this._enforcingBounds=!1,this},panInside:function(r,c){c=c||{};var g=Q(c.paddingTopLeft||c.padding||[0,0]),P=Q(c.paddingBottomRight||c.padding||[0,0]),D=this.project(this.getCenter()),le=this.project(r),je=this.getPixelBounds(),ct=O([je.min.add(g),je.max.subtract(P)]),vt=ct.getSize();if(!ct.contains(le)){this._enforcingBounds=!0;var At=le.subtract(ct.getCenter()),Gt=ct.extend(le).getSize().subtract(vt);D.x+=At.x<0?-Gt.x:Gt.x,D.y+=At.y<0?-Gt.y:Gt.y,this.panTo(this.unproject(D),c),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=o({animate:!1,pan:!0},r===!0?{animate:!0}:r);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var g=this.getSize(),P=c.divideBy(2).round(),D=g.divideBy(2).round(),le=P.subtract(D);return!le.x&&!le.y?this:(r.animate&&r.pan?this.panBy(le):(r.pan&&this._rawPanBy(le),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:g}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=o({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=u(this._handleGeolocationResponse,this),g=u(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,g,r):navigator.geolocation.getCurrentPosition(c,g,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var c=r.code,g=r.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+g+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var c=r.coords.latitude,g=r.coords.longitude,P=new de(c,g),D=P.toBounds(r.coords.accuracy*2),le=this._locateOptions;if(le.setView){var je=this.getBoundsZoom(D);this.setView(P,le.maxZoom?Math.min(je,le.maxZoom):je)}var ct={latlng:P,bounds:D,timestamp:r.timestamp};for(var vt in r.coords)typeof r.coords[vt]=="number"&&(ct[vt]=r.coords[vt]);this.fire("locationfound",ct)}},addHandler:function(r,c){if(!c)return this;var g=this[r]=new c(this);return this._handlers.push(g),this.options[r]&&g.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),_n(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(X(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)_n(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,c){var g="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),P=Rn("div",g,c||this._mapPane);return r&&(this._panes[r]=P),P},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),c=this.unproject(r.getBottomLeft()),g=this.unproject(r.getTopRight());return new J(c,g)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,c,g){r=se(r),g=Q(g||[0,0]);var P=this.getZoom()||0,D=this.getMinZoom(),le=this.getMaxZoom(),je=r.getNorthWest(),ct=r.getSouthEast(),vt=this.getSize().subtract(g),At=O(this.project(ct,P),this.project(je,P)).getSize(),Gt=$t.any3d?this.options.zoomSnap:1,rn=vt.x/At.x,En=vt.y/At.y,ai=c?Math.max(rn,En):Math.min(rn,En);return P=this.getScaleZoom(ai,P),Gt&&(P=Math.round(P/(Gt/100))*(Gt/100),P=c?Math.ceil(P/Gt)*Gt:Math.floor(P/Gt)*Gt),Math.max(D,Math.min(le,P))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new U(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,c){var g=this._getTopLeftPoint(r,c);return new Re(g,g.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,c){var g=this.options.crs;return c=c===void 0?this._zoom:c,g.scale(r)/g.scale(c)},getScaleZoom:function(r,c){var g=this.options.crs;c=c===void 0?this._zoom:c;var P=g.zoom(r*g.scale(c));return isNaN(P)?1/0:P},project:function(r,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(_e(r),c)},unproject:function(r,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(Q(r),c)},layerPointToLatLng:function(r){var c=Q(r).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(r){var c=this.project(_e(r))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(_e(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(se(r))},distance:function(r,c){return this.options.crs.distance(_e(r),_e(c))},containerPointToLayerPoint:function(r){return Q(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return Q(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var c=this.containerPointToLayerPoint(Q(r));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(_e(r)))},mouseEventToContainerPoint:function(r){return Ja(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var c=this._container=Wa(r);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");yn(c,"scroll",this._onScroll,this),this._containerId=m(c)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&$t.any3d,bn(r,"leaflet-container"+($t.touch?" leaflet-touch":"")+($t.retina?" leaflet-retina":"")+($t.ielt9?" leaflet-oldie":"")+($t.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=wi(r,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),cr(this._mapPane,new U(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(bn(r.markerPane,"leaflet-zoom-hide"),bn(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,c,g){cr(this._mapPane,new U(0,0));var P=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var D=this._zoom!==c;this._moveStart(D,g)._move(r,c)._moveEnd(D),this.fire("viewreset"),P&&this.fire("load")},_moveStart:function(r,c){return r&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(r,c,g,P){c===void 0&&(c=this._zoom);var D=this._zoom!==c;return this._zoom=c,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),P?g&&g.pinch&&this.fire("zoom",g):((D||g&&g.pinch)&&this.fire("zoom",g),this.fire("move",g)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return X(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){cr(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[m(this._container)]=this;var c=r?Dn:yn;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),$t.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){X(this._resizeRequest),this._resizeRequest=V(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,c){for(var g=[],P,D=c==="mouseout"||c==="mouseover",le=r.target||r.srcElement,je=!1;le;){if(P=this._targets[m(le)],P&&(c==="click"||c==="preclick")&&this._draggableMoved(P)){je=!0;break}if(P&&P.listens(c,!0)&&(D&&!no(le,r)||(g.push(P),D))||le===this._container)break;le=le.parentNode}return!g.length&&!je&&!D&&this.listens(c,!0)&&(g=[this]),g},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var c=r.target||r.srcElement;if(!(!this._loaded||c._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(c))){var g=r.type;g==="mousedown"&&Ko(c),this._fireDOMEvent(r,g)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,c,g){if(r.type==="click"){var P=o({},r);P.type="preclick",this._fireDOMEvent(P,P.type,g)}var D=this._findEventTargets(r,c);if(g){for(var le=[],je=0;je<g.length;je++)g[je].listens(c,!0)&&le.push(g[je]);D=le.concat(D)}if(D.length){c==="contextmenu"&&mr(r);var ct=D[0],vt={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var At=ct.getLatLng&&(!ct._radius||ct._radius<=10);vt.containerPoint=At?this.latLngToContainerPoint(ct.getLatLng()):this.mouseEventToContainerPoint(r),vt.layerPoint=this.containerPointToLayerPoint(vt.containerPoint),vt.latlng=At?ct.getLatLng():this.layerPointToLatLng(vt.layerPoint)}for(je=0;je<D.length;je++)if(D[je].fire(c,vt,!0),vt.originalEvent._stopped||D[je].options.bubblingMouseEvents===!1&&ke(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,c=this._handlers.length;r<c;r++)this._handlers[r].disable()},whenReady:function(r,c){return this._loaded?r.call(c||this,{target:this}):this.on("load",r,c),this},_getMapPanePos:function(){return gs(this._mapPane)||new U(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,c){var g=r&&c!==void 0?this._getNewPixelOrigin(r,c):this.getPixelOrigin();return g.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,c){var g=this.getSize()._divideBy(2);return this.project(r,c)._subtract(g)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,c,g){var P=this._getNewPixelOrigin(g,c);return this.project(r,c)._subtract(P)},_latLngBoundsToNewLayerBounds:function(r,c,g){var P=this._getNewPixelOrigin(g,c);return O([this.project(r.getSouthWest(),c)._subtract(P),this.project(r.getNorthWest(),c)._subtract(P),this.project(r.getSouthEast(),c)._subtract(P),this.project(r.getNorthEast(),c)._subtract(P)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,c,g){if(!g)return r;var P=this.project(r,c),D=this.getSize().divideBy(2),le=new Re(P.subtract(D),P.add(D)),je=this._getBoundsOffset(le,g,c);return Math.abs(je.x)<=1&&Math.abs(je.y)<=1?r:this.unproject(P.add(je),c)},_limitOffset:function(r,c){if(!c)return r;var g=this.getPixelBounds(),P=new Re(g.min.add(r),g.max.add(r));return r.add(this._getBoundsOffset(P,c))},_getBoundsOffset:function(r,c,g){var P=O(this.project(c.getNorthEast(),g),this.project(c.getSouthWest(),g)),D=P.min.subtract(r.min),le=P.max.subtract(r.max),je=this._rebound(D.x,-le.x),ct=this._rebound(D.y,-le.y);return new U(je,ct)},_rebound:function(r,c){return r+c>0?Math.round(r-c)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(c))},_limitZoom:function(r){var c=this.getMinZoom(),g=this.getMaxZoom(),P=$t.any3d?this.options.zoomSnap:1;return P&&(r=Math.round(r/P)*P),Math.max(c,Math.min(g,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){zn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,c){var g=this._getCenterOffset(r)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(g)?!1:(this.panBy(g,c),!0)},_createAnimProxy:function(){var r=this._proxy=Rn("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(c){var g=xo,P=this._proxy.style[g];ms(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),P===this._proxy.style[g]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){_n(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),c=this.getZoom();ms(this._proxy,this.project(r,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,c,g){if(this._animatingZoom)return!0;if(g=g||{},!this._zoomAnimated||g.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var P=this.getZoomScale(c),D=this._getCenterOffset(r)._divideBy(1-1/P);return g.animate!==!0&&!this.getSize().contains(D)?!1:(V(function(){this._moveStart(!0,g.noMoveStart||!1)._animateZoom(r,c,!0)},this),!0)},_animateZoom:function(r,c,g,P){this._mapPane&&(g&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=c,bn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:c,noUpdate:P}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&zn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ca(r,c){return new An(r,c)}var sn=te.extend({options:{position:"topright"},initialize:function(r){R(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var c=this._map;return c&&c.removeControl(this),this.options.position=r,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var c=this._container=this.onAdd(r),g=this.getPosition(),P=r._controlCorners[g];return bn(c,"leaflet-control"),g.indexOf("bottom")!==-1?P.insertBefore(c,P.firstChild):P.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(_n(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),ei=function(r){return new sn(r)};An.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},c="leaflet-",g=this._controlContainer=Rn("div",c+"control-container",this._container);function P(D,le){var je=c+D+" "+c+le;r[D+le]=Rn("div",je,g)}P("top","left"),P("top","right"),P("bottom","left"),P("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)_n(this._controlCorners[r]);_n(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Mo=sn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,c,g,P){return g<P?-1:P<g?1:0}},initialize:function(r,c,g){R(this,g),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var P in r)this._addLayer(r[P],P);for(P in c)this._addLayer(c[P],P,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return sn.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,c){return this._addLayer(r,c),this._map?this._update():this},addOverlay:function(r,c){return this._addLayer(r,c,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var c=this._getLayer(m(r));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){bn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(bn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):zn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return zn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",c=this._container=Rn("div",r),g=this.options.collapsed;c.setAttribute("aria-haspopup",!0),Po(c),xa(c);var P=this._section=Rn("section",r+"-list");g&&(this._map.on("click",this.collapse,this),yn(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var D=this._layersLink=Rn("a",r+"-toggle",c);D.href="#",D.title="Layers",D.setAttribute("role","button"),yn(D,{keydown:function(le){le.keyCode===13&&this._expandSafely()},click:function(le){mr(le),this._expandSafely()}},this),g||this.expand(),this._baseLayersList=Rn("div",r+"-base",P),this._separator=Rn("div",r+"-separator",P),this._overlaysList=Rn("div",r+"-overlays",P),c.appendChild(P)},_getLayer:function(r){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&m(this._layers[c].layer)===r)return this._layers[c]},_addLayer:function(r,c,g){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:c,overlay:g}),this.options.sortLayers&&this._layers.sort(u(function(P,D){return this.options.sortFunction(P.layer,D.layer,P.name,D.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ys(this._baseLayersList),Ys(this._overlaysList),this._layerControlInputs=[];var r,c,g,P,D=0;for(g=0;g<this._layers.length;g++)P=this._layers[g],this._addItem(P),c=c||P.overlay,r=r||!P.overlay,D+=P.overlay?0:1;return this.options.hideSingleBase&&(r=r&&D>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=c&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var c=this._getLayer(m(r.target)),g=c.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;g&&this._map.fire(g,c)},_createRadioElement:function(r,c){var g='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(c?' checked="checked"':"")+"/>",P=document.createElement("div");return P.innerHTML=g,P.firstChild},_addItem:function(r){var c=document.createElement("label"),g=this._map.hasLayer(r.layer),P;r.overlay?(P=document.createElement("input"),P.type="checkbox",P.className="leaflet-control-layers-selector",P.defaultChecked=g):P=this._createRadioElement("leaflet-base-layers_"+m(this),g),this._layerControlInputs.push(P),P.layerId=m(r.layer),yn(P,"click",this._onInputClick,this);var D=document.createElement("span");D.innerHTML=" "+r.name;var le=document.createElement("span");c.appendChild(le),le.appendChild(P),le.appendChild(D);var je=r.overlay?this._overlaysList:this._baseLayersList;return je.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,c,g,P=[],D=[];this._handlingClick=!0;for(var le=r.length-1;le>=0;le--)c=r[le],g=this._getLayer(c.layerId).layer,c.checked?P.push(g):c.checked||D.push(g);for(le=0;le<D.length;le++)this._map.hasLayer(D[le])&&this._map.removeLayer(D[le]);for(le=0;le<P.length;le++)this._map.hasLayer(P[le])||this._map.addLayer(P[le]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,c,g,P=this._map.getZoom(),D=r.length-1;D>=0;D--)c=r[D],g=this._getLayer(c.layerId).layer,c.disabled=g.options.minZoom!==void 0&&P<g.options.minZoom||g.options.maxZoom!==void 0&&P>g.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,yn(r,"click",mr),this.expand();var c=this;setTimeout(function(){Dn(r,"click",mr),c._preventClick=!1})}}),ro=function(r,c,g){return new Mo(r,c,g)},ci=sn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var c="leaflet-control-zoom",g=Rn("div",c+" leaflet-bar"),P=this.options;return this._zoomInButton=this._createButton(P.zoomInText,P.zoomInTitle,c+"-in",g,this._zoomIn),this._zoomOutButton=this._createButton(P.zoomOutText,P.zoomOutTitle,c+"-out",g,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),g},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,c,g,P,D){var le=Rn("a",g,P);return le.innerHTML=r,le.href="#",le.title=c,le.setAttribute("role","button"),le.setAttribute("aria-label",c),Po(le),yn(le,"click",xi),yn(le,"click",D,this),yn(le,"click",this._refocusOnMap,this),le},_updateDisabled:function(){var r=this._map,c="leaflet-disabled";zn(this._zoomInButton,c),zn(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(bn(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(bn(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});An.mergeOptions({zoomControl:!0}),An.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ci,this.addControl(this.zoomControl))});var ka=function(r){return new ci(r)},vs=sn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var c="leaflet-control-scale",g=Rn("div",c),P=this.options;return this._addScales(P,c+"-line",g),r.on(P.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),g},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,c,g){r.metric&&(this._mScale=Rn("div",c,g)),r.imperial&&(this._iScale=Rn("div",c,g))},_update:function(){var r=this._map,c=r.getSize().y/2,g=r.distance(r.containerPointToLatLng([0,c]),r.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(g)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var c=this._getRoundNum(r),g=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,g,c/r)},_updateImperial:function(r){var c=r*3.2808399,g,P,D;c>5280?(g=c/5280,P=this._getRoundNum(g),this._updateScale(this._iScale,P+" mi",P/g)):(D=this._getRoundNum(c),this._updateScale(this._iScale,D+" ft",D/c))},_updateScale:function(r,c,g){r.style.width=Math.round(this.options.maxWidth*g)+"px",r.innerHTML=c},_getRoundNum:function(r){var c=Math.pow(10,(Math.floor(r)+"").length-1),g=r/c;return g=g>=10?10:g>=5?5:g>=3?3:g>=2?2:1,c*g}}),Qo=function(r){return new vs(r)},ea='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Di=sn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+($t.inlineSvg?ea+" ":"")+"Leaflet</a>"},initialize:function(r){R(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=Rn("div","leaflet-control-attribution"),Po(this._container);for(var c in r._layers)r._layers[c].getAttribution&&this.addAttribution(r._layers[c].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var c in this._attributions)this._attributions[c]&&r.push(c);var g=[];this.options.prefix&&g.push(this.options.prefix),r.length&&g.push(r.join(", ")),this._container.innerHTML=g.join(' <span aria-hidden="true">|</span> ')}}});An.mergeOptions({attributionControl:!0}),An.addInitHook(function(){this.options.attributionControl&&new Di().addTo(this)});var ta=function(r){return new Di(r)};sn.Layers=Mo,sn.Zoom=ci,sn.Scale=vs,sn.Attribution=Di,ei.layers=ro,ei.zoom=ka,ei.scale=Qo,ei.attribution=ta;var kr=te.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});kr.addTo=function(r,c){return r.addHandler(c,this),this};var Ya={Events:H},Ao=$t.touch?"touchstart mousedown":"mousedown",Oi=me.extend({options:{clickTolerance:3},initialize:function(r,c,g,P){R(this,P),this._element=r,this._dragStartTarget=c||r,this._preventOutline=g},enable:function(){this._enabled||(yn(this._dragStartTarget,Ao,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Oi._dragging===this&&this.finishDrag(!0),Dn(this._dragStartTarget,Ao,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!Co(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){Oi._dragging===this&&this.finishDrag();return}if(!(Oi._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(Oi._dragging=this,this._preventOutline&&Ko(this._element),ba(),ko(),!this._moving)){this.fire("down");var c=r.touches?r.touches[0]:r,g=Ka(this._element);this._startPoint=new U(c.clientX,c.clientY),this._startPos=gs(this._element),this._parentScale=Jo(g);var P=r.type==="mousedown";yn(document,P?"mousemove":"touchmove",this._onMove,this),yn(document,P?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var c=r.touches&&r.touches.length===1?r.touches[0]:r,g=new U(c.clientX,c.clientY)._subtract(this._startPoint);!g.x&&!g.y||Math.abs(g.x)+Math.abs(g.y)<this.options.clickTolerance||(g.x/=this._parentScale.x,g.y/=this._parentScale.y,mr(r),this._moved||(this.fire("dragstart"),this._moved=!0,bn(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),bn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(g),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),cr(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){zn(document.body,"leaflet-dragging"),this._lastTarget&&(zn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Dn(document,"mousemove touchmove",this._onMove,this),Dn(document,"mouseup touchend touchcancel",this._onUp,this),ts(),Ns();var c=this._moved&&this._moving;this._moving=!1,Oi._dragging=!1,c&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function na(r,c,g){var P,D=[1,4,2,8],le,je,ct,vt,At,Gt,rn,En;for(le=0,Gt=r.length;le<Gt;le++)r[le]._code=yt(r[le],c);for(ct=0;ct<4;ct++){for(rn=D[ct],P=[],le=0,Gt=r.length,je=Gt-1;le<Gt;je=le++)vt=r[le],At=r[je],vt._code&rn?At._code&rn||(En=rt(At,vt,rn,c,g),En._code=yt(En,c),P.push(En)):(At._code&rn&&(En=rt(At,vt,rn,c,g),En._code=yt(En,c),P.push(En)),P.push(vt));r=P}return r}function Pa(r,c){var g,P,D,le,je,ct,vt,At,Gt;if(!r||r.length===0)throw new Error("latlngs not passed");Zt(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var rn=_e([0,0]),En=se(r),ai=En.getNorthWest().distanceTo(En.getSouthWest())*En.getNorthEast().distanceTo(En.getNorthWest());ai<1700&&(rn=Ea(r));var Mr=r.length,gi=[];for(g=0;g<Mr;g++){var fr=_e(r[g]);gi.push(c.project(_e([fr.lat-rn.lat,fr.lng-rn.lng])))}for(ct=vt=At=0,g=0,P=Mr-1;g<Mr;P=g++)D=gi[g],le=gi[P],je=D.y*le.x-le.y*D.x,vt+=(D.x+le.x)*je,At+=(D.y+le.y)*je,ct+=je*3;ct===0?Gt=gi[0]:Gt=[vt/ct,At/ct];var Cs=c.unproject(Q(Gt));return _e([Cs.lat+rn.lat,Cs.lng+rn.lng])}function Ea(r){for(var c=0,g=0,P=0,D=0;D<r.length;D++){var le=_e(r[D]);c+=le.lat,g+=le.lng,P++}return _e([c/P,g/P])}var ra={__proto__:null,clipPolygon:na,polygonCenter:Pa,centroid:Ea};function io(r,c){if(!c||!r.length)return r.slice();var g=c*c;return r=Z(r,g),r=gr(r,g),r}function Bo(r,c,g){return Math.sqrt(Vt(r,c,g,!0))}function so(r,c,g){return Vt(r,c,g)}function gr(r,c){var g=r.length,P=typeof Uint8Array<"u"?Uint8Array:Array,D=new P(g);D[0]=D[g-1]=1,x(r,D,c,0,g-1);var le,je=[];for(le=0;le<g;le++)D[le]&&je.push(r[le]);return je}function x(r,c,g,P,D){var le=0,je,ct,vt;for(ct=P+1;ct<=D-1;ct++)vt=Vt(r[ct],r[P],r[D],!0),vt>le&&(je=ct,le=vt);le>g&&(c[je]=1,x(r,c,g,P,je),x(r,c,g,je,D))}function Z(r,c){for(var g=[r[0]],P=1,D=0,le=r.length;P<le;P++)Tt(r[P],r[D])>c&&(g.push(r[P]),D=P);return D<le-1&&g.push(r[le-1]),g}var Ae;function qe(r,c,g,P,D){var le=P?Ae:yt(r,g),je=yt(c,g),ct,vt,At;for(Ae=je;;){if(!(le|je))return[r,c];if(le&je)return!1;ct=le||je,vt=rt(r,c,ct,g,D),At=yt(vt,g),ct===le?(r=vt,le=At):(c=vt,je=At)}}function rt(r,c,g,P,D){var le=c.x-r.x,je=c.y-r.y,ct=P.min,vt=P.max,At,Gt;return g&8?(At=r.x+le*(vt.y-r.y)/je,Gt=vt.y):g&4?(At=r.x+le*(ct.y-r.y)/je,Gt=ct.y):g&2?(At=vt.x,Gt=r.y+je*(vt.x-r.x)/le):g&1&&(At=ct.x,Gt=r.y+je*(ct.x-r.x)/le),new U(At,Gt,D)}function yt(r,c){var g=0;return r.x<c.min.x?g|=1:r.x>c.max.x&&(g|=2),r.y<c.min.y?g|=4:r.y>c.max.y&&(g|=8),g}function Tt(r,c){var g=c.x-r.x,P=c.y-r.y;return g*g+P*P}function Vt(r,c,g,P){var D=c.x,le=c.y,je=g.x-D,ct=g.y-le,vt=je*je+ct*ct,At;return vt>0&&(At=((r.x-D)*je+(r.y-le)*ct)/vt,At>1?(D=g.x,le=g.y):At>0&&(D+=je*At,le+=ct*At)),je=r.x-D,ct=r.y-le,P?je*je+ct*ct:new U(D,le)}function Zt(r){return!Y(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function nn(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Zt(r)}function pn(r,c){var g,P,D,le,je,ct,vt,At;if(!r||r.length===0)throw new Error("latlngs not passed");Zt(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var Gt=_e([0,0]),rn=se(r),En=rn.getNorthWest().distanceTo(rn.getSouthWest())*rn.getNorthEast().distanceTo(rn.getNorthWest());En<1700&&(Gt=Ea(r));var ai=r.length,Mr=[];for(g=0;g<ai;g++){var gi=_e(r[g]);Mr.push(c.project(_e([gi.lat-Gt.lat,gi.lng-Gt.lng])))}for(g=0,P=0;g<ai-1;g++)P+=Mr[g].distanceTo(Mr[g+1])/2;if(P===0)At=Mr[0];else for(g=0,le=0;g<ai-1;g++)if(je=Mr[g],ct=Mr[g+1],D=je.distanceTo(ct),le+=D,le>P){vt=(le-P)/D,At=[ct.x-vt*(ct.x-je.x),ct.y-vt*(ct.y-je.y)];break}var fr=c.unproject(Q(At));return _e([fr.lat+Gt.lat,fr.lng+Gt.lng])}var Bn={__proto__:null,simplify:io,pointToSegmentDistance:Bo,closestPointOnSegment:so,clipSegment:qe,_getEdgeIntersection:rt,_getBitCode:yt,_sqClosestPointOnSegment:Vt,isFlat:Zt,_flat:nn,polylineCenter:pn},sr={project:function(r){return new U(r.lng,r.lat)},unproject:function(r){return new de(r.y,r.x)},bounds:new Re([-180,-90],[180,90])},Fn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Re([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var c=Math.PI/180,g=this.R,P=r.lat*c,D=this.R_MINOR/g,le=Math.sqrt(1-D*D),je=le*Math.sin(P),ct=Math.tan(Math.PI/4-P/2)/Math.pow((1-je)/(1+je),le/2);return P=-g*Math.log(Math.max(ct,1e-10)),new U(r.lng*c*g,P)},unproject:function(r){for(var c=180/Math.PI,g=this.R,P=this.R_MINOR/g,D=Math.sqrt(1-P*P),le=Math.exp(-r.y/g),je=Math.PI/2-2*Math.atan(le),ct=0,vt=.1,At;ct<15&&Math.abs(vt)>1e-7;ct++)At=D*Math.sin(je),At=Math.pow((1-At)/(1+At),D/2),vt=Math.PI/2-2*Math.atan(le*At)-je,je+=vt;return new de(je*c,r.x*c/g)}},Vn={__proto__:null,LonLat:sr,Mercator:Fn,SphericalMercator:Ve},Pr=o({},we,{code:"EPSG:3395",projection:Fn,transformation:function(){var r=.5/(Math.PI*Fn.R);return ne(r,.5,-r,.5)}()}),wr=o({},we,{code:"EPSG:4326",projection:sr,transformation:ne(1/180,1,-1/180,.5)}),Li=o({},he,{projection:sr,transformation:ne(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,c){var g=c.lng-r.lng,P=c.lat-r.lat;return Math.sqrt(g*g+P*P)},infinite:!0});he.Earth=we,he.EPSG3395=Pr,he.EPSG3857=fe,he.EPSG900913=De,he.EPSG4326=wr,he.Simple=Li;var Qn=me.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[m(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[m(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var c=r.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var g=this.getEvents();c.on(g,this),this.once("remove",function(){c.off(g,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});An.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var c=m(r);return this._layers[c]?this:(this._layers[c]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var c=m(r);return this._layers[c]?(this._loaded&&r.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return m(r)in this._layers},eachLayer:function(r,c){for(var g in this._layers)r.call(c,this._layers[g]);return this},_addLayers:function(r){r=r?Y(r)?r:[r]:[];for(var c=0,g=r.length;c<g;c++)this.addLayer(r[c])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[m(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var c=m(r);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,c=-1/0,g=this._getZoomSpan();for(var P in this._zoomBoundLayers){var D=this._zoomBoundLayers[P].options;r=D.minZoom===void 0?r:Math.min(r,D.minZoom),c=D.maxZoom===void 0?c:Math.max(c,D.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=r===1/0?void 0:r,g!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ti=Qn.extend({initialize:function(r,c){R(this,c),this._layers={};var g,P;if(r)for(g=0,P=r.length;g<P;g++)this.addLayer(r[g])},addLayer:function(r){var c=this.getLayerId(r);return this._layers[c]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var c=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(r){var c=typeof r=="number"?r:this.getLayerId(r);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var c=Array.prototype.slice.call(arguments,1),g,P;for(g in this._layers)P=this._layers[g],P[r]&&P[r].apply(P,c);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,c){for(var g in this._layers)r.call(c,this._layers[g]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return m(r)}}),Xa=function(r,c){return new ti(r,c)},ni=ti.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),ti.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),ti.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new J;for(var c in this._layers){var g=this._layers[c];r.extend(g.getBounds?g.getBounds():g.getLatLng())}return r}}),Sa=function(r,c){return new ni(r,c)},ns=te.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){R(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,c){var g=this._getIconUrl(r);if(!g){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var P=this._createImg(g,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(P,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(P.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),P},_setIconStyles:function(r,c){var g=this.options,P=g[c+"Size"];typeof P=="number"&&(P=[P,P]);var D=Q(P),le=Q(c==="shadow"&&g.shadowAnchor||g.iconAnchor||D&&D.divideBy(2,!0));r.className="leaflet-marker-"+c+" "+(g.className||""),le&&(r.style.marginLeft=-le.x+"px",r.style.marginTop=-le.y+"px"),D&&(r.style.width=D.x+"px",r.style.height=D.y+"px")},_createImg:function(r,c){return c=c||document.createElement("img"),c.src=r,c},_getIconUrl:function(r){return $t.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function Ma(r){return new ns(r)}var Is=ns.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof Is.imagePath!="string"&&(Is.imagePath=this._detectIconPath()),(this.options.imagePath||Is.imagePath)+ns.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var c=function(g,P,D){var le=P.exec(g);return le&&le[D]};return r=c(r,/^url\((['"])?(.+)\1\)$/,2),r&&c(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=Rn("div","leaflet-default-icon-path",document.body),c=wi(r,"background-image")||wi(r,"backgroundImage");if(document.body.removeChild(r),c=this._stripUrl(c),c)return c;var g=document.querySelector('link[href$="leaflet.css"]');return g?g.href.substring(0,g.href.length-11-1):""}}),Fs=kr.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new Oi(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),bn(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&zn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var c=this._marker,g=c._map,P=this._marker.options.autoPanSpeed,D=this._marker.options.autoPanPadding,le=gs(c._icon),je=g.getPixelBounds(),ct=g.getPixelOrigin(),vt=O(je.min._subtract(ct).add(D),je.max._subtract(ct).subtract(D));if(!vt.contains(le)){var At=Q((Math.max(vt.max.x,le.x)-vt.max.x)/(je.max.x-vt.max.x)-(Math.min(vt.min.x,le.x)-vt.min.x)/(je.min.x-vt.min.x),(Math.max(vt.max.y,le.y)-vt.max.y)/(je.max.y-vt.max.y)-(Math.min(vt.min.y,le.y)-vt.min.y)/(je.min.y-vt.min.y)).multiplyBy(P);g.panBy(At,{animate:!1}),this._draggable._newPos._add(At),this._draggable._startPos._add(At),cr(c._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=V(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(X(this._panRequest),this._panRequest=V(this._adjustPan.bind(this,r)))},_onDrag:function(r){var c=this._marker,g=c._shadow,P=gs(c._icon),D=c._map.layerPointToLatLng(P);g&&cr(g,P),c._latlng=D,r.latlng=D,r.oldLatLng=this._oldLatLng,c.fire("move",r).fire("drag",r)},_onDragEnd:function(r){X(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),xr=Qn.extend({options:{icon:new Is,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,c){R(this,c),this._latlng=_e(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var c=this._latlng;return this._latlng=_e(r),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),g=r.icon.createIcon(this._icon),P=!1;g!==this._icon&&(this._icon&&this._removeIcon(),P=!0,r.title&&(g.title=r.title),g.tagName==="IMG"&&(g.alt=r.alt||"")),bn(g,c),r.keyboard&&(g.tabIndex="0",g.setAttribute("role","button")),this._icon=g,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&yn(g,"focus",this._panOnFocus,this);var D=r.icon.createShadow(this._shadow),le=!1;D!==this._shadow&&(this._removeShadow(),le=!0),D&&(bn(D,c),D.alt=""),this._shadow=D,r.opacity<1&&this._updateOpacity(),P&&this.getPane().appendChild(this._icon),this._initInteraction(),D&&le&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Dn(this._icon,"focus",this._panOnFocus,this),_n(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&_n(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&cr(this._icon,r),this._shadow&&cr(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var c=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(bn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Fs)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Fs(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&$r(this._icon,r),this._shadow&&$r(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var c=this.options.icon.options,g=c.iconSize?Q(c.iconSize):Q(0,0),P=c.iconAnchor?Q(c.iconAnchor):Q(0,0);r.panInside(this._latlng,{paddingTopLeft:P,paddingBottomRight:g.subtract(P)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ia(r,c){return new xr(r,c)}var hi=Qn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return R(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ri=hi.extend({options:{fill:!0,radius:10},initialize:function(r,c){R(this,c),this._latlng=_e(r),this._radius=this.options.radius},setLatLng:function(r){var c=this._latlng;return this._latlng=_e(r),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var c=r&&r.radius||this._radius;return hi.prototype.setStyle.call(this,r),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,c=this._radiusY||r,g=this._clickTolerance(),P=[r+g,c+g];this._pxBounds=new Re(this._point.subtract(P),this._point.add(P))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function sa(r,c){return new ri(r,c)}var Vr=ri.extend({initialize:function(r,c,g){if(typeof c=="number"&&(c=o({},g,{radius:c})),R(this,c),this._latlng=_e(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new J(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:hi.prototype.setStyle,_project:function(){var r=this._latlng.lng,c=this._latlng.lat,g=this._map,P=g.options.crs;if(P.distance===we.distance){var D=Math.PI/180,le=this._mRadius/we.R/D,je=g.project([c+le,r]),ct=g.project([c-le,r]),vt=je.add(ct).divideBy(2),At=g.unproject(vt).lat,Gt=Math.acos((Math.cos(le*D)-Math.sin(c*D)*Math.sin(At*D))/(Math.cos(c*D)*Math.cos(At*D)))/D;(isNaN(Gt)||Gt===0)&&(Gt=le/Math.cos(Math.PI/180*c)),this._point=vt.subtract(g.getPixelOrigin()),this._radius=isNaN(Gt)?0:vt.x-g.project([At,r-Gt]).x,this._radiusY=vt.y-je.y}else{var rn=P.unproject(P.project(this._latlng).subtract([this._mRadius,0]));this._point=g.latLngToLayerPoint(this._latlng),this._radius=this._point.x-g.latLngToLayerPoint(rn).x}this._updateBounds()}});function js(r,c,g){return new Vr(r,c,g)}var Ci=hi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,c){R(this,c),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var c=1/0,g=null,P=Vt,D,le,je=0,ct=this._parts.length;je<ct;je++)for(var vt=this._parts[je],At=1,Gt=vt.length;At<Gt;At++){D=vt[At-1],le=vt[At];var rn=P(r,D,le,!0);rn<c&&(c=rn,g=P(r,D,le))}return g&&(g.distance=Math.sqrt(c)),g},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return pn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,c){return c=c||this._defaultShape(),r=_e(r),c.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new J,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return Zt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var c=[],g=Zt(r),P=0,D=r.length;P<D;P++)g?(c[P]=_e(r[P]),this._bounds.extend(c[P])):c[P]=this._convertLatLngs(r[P]);return c},_project:function(){var r=new Re;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),c=new U(r,r);this._rawPxBounds&&(this._pxBounds=new Re([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(r,c,g){var P=r[0]instanceof de,D=r.length,le,je;if(P){for(je=[],le=0;le<D;le++)je[le]=this._map.latLngToLayerPoint(r[le]),g.extend(je[le]);c.push(je)}else for(le=0;le<D;le++)this._projectLatlngs(r[le],c,g)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,g,P,D,le,je,ct,vt;for(g=0,D=0,le=this._rings.length;g<le;g++)for(vt=this._rings[g],P=0,je=vt.length;P<je-1;P++)ct=qe(vt[P],vt[P+1],r,P,!0),ct&&(c[D]=c[D]||[],c[D].push(ct[0]),(ct[1]!==vt[P+1]||P===je-2)&&(c[D].push(ct[1]),D++))}},_simplifyPoints:function(){for(var r=this._parts,c=this.options.smoothFactor,g=0,P=r.length;g<P;g++)r[g]=io(r[g],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,c){var g,P,D,le,je,ct,vt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(g=0,le=this._parts.length;g<le;g++)for(ct=this._parts[g],P=0,je=ct.length,D=je-1;P<je;D=P++)if(!(!c&&P===0)&&Bo(r,ct[D],ct[P])<=vt)return!0;return!1}});function Qa(r,c){return new Ci(r,c)}Ci._flat=nn;var Er=Ci.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Pa(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var c=Ci.prototype._convertLatLngs.call(this,r),g=c.length;return g>=2&&c[0]instanceof de&&c[0].equals(c[g-1])&&c.pop(),c},_setLatLngs:function(r){Ci.prototype._setLatLngs.call(this,r),Zt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Zt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,c=this.options.weight,g=new U(c,c);if(r=new Re(r.min.subtract(g),r.max.add(g)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var P=0,D=this._rings.length,le;P<D;P++)le=na(this._rings[P],r,!0),le.length&&this._parts.push(le)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var c=!1,g,P,D,le,je,ct,vt,At;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(le=0,vt=this._parts.length;le<vt;le++)for(g=this._parts[le],je=0,At=g.length,ct=At-1;je<At;ct=je++)P=g[je],D=g[ct],P.y>r.y!=D.y>r.y&&r.x<(D.x-P.x)*(r.y-P.y)/(D.y-P.y)+P.x&&(c=!c);return c||Ci.prototype._containsPoint.call(this,r,!0)}});function _s(r,c){return new Er(r,c)}var Ri=ni.extend({initialize:function(r,c){R(this,c),this._layers={},r&&this.addData(r)},addData:function(r){var c=Y(r)?r:r.features,g,P,D;if(c){for(g=0,P=c.length;g<P;g++)D=c[g],(D.geometries||D.geometry||D.features||D.coordinates)&&this.addData(D);return this}var le=this.options;if(le.filter&&!le.filter(r))return this;var je=To(r,le);return je?(je.feature=Ii(r),je.defaultOptions=je.options,this.resetStyle(je),le.onEachFeature&&le.onEachFeature(r,je),this.addLayer(je)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=o({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(c){this._setLayerStyle(c,r)},this)},_setLayerStyle:function(r,c){r.setStyle&&(typeof c=="function"&&(c=c(r.feature)),r.setStyle(c))}});function To(r,c){var g=r.type==="Feature"?r.geometry:r,P=g?g.coordinates:null,D=[],le=c&&c.pointToLayer,je=c&&c.coordsToLatLng||ys,ct,vt,At,Gt;if(!P&&!g)return null;switch(g.type){case"Point":return ct=je(P),zs(le,r,ct,c);case"MultiPoint":for(At=0,Gt=P.length;At<Gt;At++)ct=je(P[At]),D.push(zs(le,r,ct,c));return new ni(D);case"LineString":case"MultiLineString":return vt=Rr(P,g.type==="LineString"?0:1,je),new Ci(vt,c);case"Polygon":case"MultiPolygon":return vt=Rr(P,g.type==="Polygon"?1:2,je),new Er(vt,c);case"GeometryCollection":for(At=0,Gt=g.geometries.length;At<Gt;At++){var rn=To({geometry:g.geometries[At],type:"Feature",properties:r.properties},c);rn&&D.push(rn)}return new ni(D);case"FeatureCollection":for(At=0,Gt=g.features.length;At<Gt;At++){var En=To(g.features[At],c);En&&D.push(En)}return new ni(D);default:throw new Error("Invalid GeoJSON object.")}}function zs(r,c,g,P){return r?r(c,g):new xr(g,P&&P.markersInheritOptions&&P)}function ys(r){return new de(r[1],r[0],r[2])}function Rr(r,c,g){for(var P=[],D=0,le=r.length,je;D<le;D++)je=c?Rr(r[D],c-1,g):(g||ys)(r[D]),P.push(je);return P}function Br(r,c){return r=_e(r),r.alt!==void 0?[S(r.lng,c),S(r.lat,c),S(r.alt,c)]:[S(r.lng,c),S(r.lat,c)]}function rs(r,c,g,P){for(var D=[],le=0,je=r.length;le<je;le++)D.push(c?rs(r[le],Zt(r[le])?0:c-1,g,P):Br(r[le],P));return!c&&g&&D.length>0&&D.push(D[0].slice()),D}function fi(r,c){return r.feature?o({},r.feature,{geometry:c}):Ii(c)}function Ii(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var Us={toGeoJSON:function(r){return fi(this,{type:"Point",coordinates:Br(this.getLatLng(),r)})}};xr.include(Us),Vr.include(Us),ri.include(Us),Ci.include({toGeoJSON:function(r){var c=!Zt(this._latlngs),g=rs(this._latlngs,c?1:0,!1,r);return fi(this,{type:(c?"Multi":"")+"LineString",coordinates:g})}}),Er.include({toGeoJSON:function(r){var c=!Zt(this._latlngs),g=c&&!Zt(this._latlngs[0]),P=rs(this._latlngs,g?2:c?1:0,!0,r);return c||(P=[P]),fi(this,{type:(g?"Multi":"")+"Polygon",coordinates:P})}}),ti.include({toMultiPoint:function(r){var c=[];return this.eachLayer(function(g){c.push(g.toGeoJSON(r).geometry.coordinates)}),fi(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(r){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(r);var g=c==="GeometryCollection",P=[];return this.eachLayer(function(D){if(D.toGeoJSON){var le=D.toGeoJSON(r);if(g)P.push(le.geometry);else{var je=Ii(le);je.type==="FeatureCollection"?P.push.apply(P,je.features):P.push(je)}}}),g?fi(this,{geometries:P,type:"GeometryCollection"}):{type:"FeatureCollection",features:P}}});function Fi(r,c){return new Ri(r,c)}var hr=Fi,bs=Qn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,c,g){this._url=r,this._bounds=se(c),R(this,g)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(bn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){_n(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&Ts(this._image),this},bringToBack:function(){return this._map&&ps(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=se(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",c=this._image=r?this._url:Rn("img");if(bn(c,"leaflet-image-layer"),this._zoomAnimated&&bn(c,"leaflet-zoom-animated"),this.options.className&&bn(c,this.options.className),c.onselectstart=w,c.onmousemove=w,c.onload=u(this.fire,this,"load"),c.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(r){var c=this._map.getZoomScale(r.zoom),g=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;ms(this._image,g,c)},_reset:function(){var r=this._image,c=new Re(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),g=c.getSize();cr(r,c.min),r.style.width=g.x+"px",r.style.height=g.y+"px"},_updateOpacity:function(){$r(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),ii=function(r,c,g){return new bs(r,c,g)},Gr=bs.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",c=this._image=r?this._url:Rn("video");if(bn(c,"leaflet-image-layer"),this._zoomAnimated&&bn(c,"leaflet-zoom-animated"),this.options.className&&bn(c,this.options.className),c.onselectstart=w,c.onmousemove=w,c.onloadeddata=u(this.fire,this,"load"),r){for(var g=c.getElementsByTagName("source"),P=[],D=0;D<g.length;D++)P.push(g[D].src);this._url=g.length>0?P:[c.src];return}Y(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var le=0;le<this._url.length;le++){var je=Rn("source");je.src=this._url[le],c.appendChild(je)}}});function No(r,c,g){return new Gr(r,c,g)}var Aa=bs.extend({_initImage:function(){var r=this._image=this._url;bn(r,"leaflet-image-layer"),this._zoomAnimated&&bn(r,"leaflet-zoom-animated"),this.options.className&&bn(r,this.options.className),r.onselectstart=w,r.onmousemove=w}});function Ba(r,c,g){return new Aa(r,c,g)}var Hr=Qn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,c){r&&(r instanceof de||Y(r))?(this._latlng=_e(r),R(this,c)):(R(this,r),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&$r(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&$r(this._container,1),this.bringToFront(),this.options.interactive&&(bn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?($r(this._container,0),this._removeTimeout=setTimeout(u(_n,void 0,this._container),200)):_n(this._container),this.options.interactive&&(zn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=_e(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ts(this._container),this},bringToBack:function(){return this._map&&ps(this._container),this},_prepareOpen:function(r){var c=this._source;if(!c._map)return!1;if(c instanceof ni){c=null;var g=this._source._layers;for(var P in g)if(g[P]._map){c=g[P];break}if(!c)return!1;this._source=c}if(!r)if(c.getCenter)r=c.getCenter();else if(c.getLatLng)r=c.getLatLng();else if(c.getBounds)r=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")r.innerHTML=c;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),c=Q(this.options.offset),g=this._getAnchor();this._zoomAnimated?cr(this._container,r.add(g)):c=c.add(r).add(g);var P=this._containerBottom=-c.y,D=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=P+"px",this._container.style.left=D+"px"}},_getAnchor:function(){return[0,0]}});An.include({_initOverlay:function(r,c,g,P){var D=c;return D instanceof r||(D=new r(P).setContent(c)),g&&D.setLatLng(g),D}}),Qn.include({_initOverlay:function(r,c,g,P){var D=g;return D instanceof r?(R(D,P),D._source=this):(D=c&&!P?c:new r(P,this),D.setContent(g)),D}});var di=Hr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,Hr.prototype.openOn.call(this,r)},onAdd:function(r){Hr.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof hi||this._source.on("preclick",Os))},onRemove:function(r){Hr.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof hi||this._source.off("preclick",Os))},getEvents:function(){var r=Hr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",c=this._container=Rn("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),g=this._wrapper=Rn("div",r+"-content-wrapper",c);if(this._contentNode=Rn("div",r+"-content",g),Po(c),xa(this._contentNode),yn(c,"contextmenu",Os),this._tipContainer=Rn("div",r+"-tip-container",c),this._tip=Rn("div",r+"-tip",this._tipContainer),this.options.closeButton){var P=this._closeButton=Rn("a",r+"-close-button",c);P.setAttribute("role","button"),P.setAttribute("aria-label","Close popup"),P.href="#close",P.innerHTML='<span aria-hidden="true">&#215;</span>',yn(P,"click",function(D){mr(D),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,c=r.style;c.width="",c.whiteSpace="nowrap";var g=r.offsetWidth;g=Math.min(g,this.options.maxWidth),g=Math.max(g,this.options.minWidth),c.width=g+1+"px",c.whiteSpace="",c.height="";var P=r.offsetHeight,D=this.options.maxHeight,le="leaflet-popup-scrolled";D&&P>D?(c.height=D+"px",bn(r,le)):zn(r,le),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var c=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),g=this._getAnchor();cr(this._container,c.add(g))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,c=parseInt(wi(this._container,"marginBottom"),10)||0,g=this._container.offsetHeight+c,P=this._containerWidth,D=new U(this._containerLeft,-g-this._containerBottom);D._add(gs(this._container));var le=r.layerPointToContainerPoint(D),je=Q(this.options.autoPanPadding),ct=Q(this.options.autoPanPaddingTopLeft||je),vt=Q(this.options.autoPanPaddingBottomRight||je),At=r.getSize(),Gt=0,rn=0;le.x+P+vt.x>At.x&&(Gt=le.x+P-At.x+vt.x),le.x-Gt-ct.x<0&&(Gt=le.x-ct.x),le.y+g+vt.y>At.y&&(rn=le.y+g-At.y+vt.y),le.y-rn-ct.y<0&&(rn=le.y-ct.y),(Gt||rn)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([Gt,rn]))}},_getAnchor:function(){return Q(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),oo=function(r,c){return new di(r,c)};An.mergeOptions({closePopupOnClick:!0}),An.include({openPopup:function(r,c,g){return this._initOverlay(di,r,c,g).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),Qn.include({bindPopup:function(r,c){return this._popup=this._initOverlay(di,this._popup,r,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof ni||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){xi(r);var c=r.layer||r.target;if(this._popup._source===c&&!(c instanceof hi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=c,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var ws=Hr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){Hr.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){Hr.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=Hr.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",c=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Rn("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+m(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var c,g,P=this._map,D=this._container,le=P.latLngToContainerPoint(P.getCenter()),je=P.layerPointToContainerPoint(r),ct=this.options.direction,vt=D.offsetWidth,At=D.offsetHeight,Gt=Q(this.options.offset),rn=this._getAnchor();ct==="top"?(c=vt/2,g=At):ct==="bottom"?(c=vt/2,g=0):ct==="center"?(c=vt/2,g=At/2):ct==="right"?(c=0,g=At/2):ct==="left"?(c=vt,g=At/2):je.x<le.x?(ct="right",c=0,g=At/2):(ct="left",c=vt+(Gt.x+rn.x)*2,g=At/2),r=r.subtract(Q(c,g,!0)).add(Gt).add(rn),zn(D,"leaflet-tooltip-right"),zn(D,"leaflet-tooltip-left"),zn(D,"leaflet-tooltip-top"),zn(D,"leaflet-tooltip-bottom"),bn(D,"leaflet-tooltip-"+ct),cr(D,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&$r(this._container,r)},_animateZoom:function(r){var c=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(c)},_getAnchor:function(){return Q(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),oa=function(r,c){return new ws(r,c)};An.include({openTooltip:function(r,c,g){return this._initOverlay(ws,r,c,g).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),Qn.include({bindTooltip:function(r,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ws,this._tooltip,r,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var c=r?"off":"on",g={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?g.add=this._openTooltip:(g.mouseover=this._openTooltip,g.mouseout=this.closeTooltip,g.click=this._openTooltip,this._map?this._addFocusListeners():g.add=this._addFocusListeners),this._tooltip.options.sticky&&(g.mousemove=this._moveTooltip),this[c](g),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof ni||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var c=typeof r.getElement=="function"&&r.getElement();c&&(yn(c,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),yn(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var c=typeof r.getElement=="function"&&r.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var c=r.latlng,g,P;this._tooltip.options.sticky&&r.originalEvent&&(g=this._map.mouseEventToContainerPoint(r.originalEvent),P=this._map.containerPointToLayerPoint(g),c=this._map.layerPointToLatLng(P)),this._tooltip.setLatLng(c)}});var ao=ns.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var c=r&&r.tagName==="DIV"?r:document.createElement("div"),g=this.options;if(g.html instanceof Element?(Ys(c),c.appendChild(g.html)):c.innerHTML=g.html!==!1?g.html:"",g.bgPos){var P=Q(g.bgPos);c.style.backgroundPosition=-P.x+"px "+-P.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function lo(r){return new ao(r)}ns.Default=Is;var qs=Qn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:$t.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){R(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),_n(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ts(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ps(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof U?r:new U(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var c=this.getPane().children,g=-r(-1/0,1/0),P=0,D=c.length,le;P<D;P++)le=c[P].style.zIndex,c[P]!==this._container&&le&&(g=r(g,+le));isFinite(g)&&(this.options.zIndex=g+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!$t.ielt9){$r(this._container,this.options.opacity);var r=+new Date,c=!1,g=!1;for(var P in this._tiles){var D=this._tiles[P];if(!(!D.current||!D.loaded)){var le=Math.min(1,(r-D.loaded)/200);$r(D.el,le),le<1?c=!0:(D.active?g=!0:this._onOpaqueTile(D),D.active=!0)}}g&&!this._noPrune&&this._pruneTiles(),c&&(X(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this))}},_onOpaqueTile:w,_initContainer:function(){this._container||(this._container=Rn("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,c=this.options.maxZoom;if(r!==void 0){for(var g in this._levels)g=Number(g),this._levels[g].el.children.length||g===r?(this._levels[g].el.style.zIndex=c-Math.abs(r-g),this._onUpdateLevel(g)):(_n(this._levels[g].el),this._removeTilesAtZoom(g),this._onRemoveLevel(g),delete this._levels[g]);var P=this._levels[r],D=this._map;return P||(P=this._levels[r]={},P.el=Rn("div","leaflet-tile-container leaflet-zoom-animated",this._container),P.el.style.zIndex=c,P.origin=D.project(D.unproject(D.getPixelOrigin()),r).round(),P.zoom=r,this._setZoomTransform(P,D.getCenter(),D.getZoom()),w(P.el.offsetWidth),this._onCreateLevel(P)),this._level=P,P}},_onUpdateLevel:w,_onRemoveLevel:w,_onCreateLevel:w,_pruneTiles:function(){if(this._map){var r,c,g=this._map.getZoom();if(g>this.options.maxZoom||g<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)c=this._tiles[r],c.retain=c.current;for(r in this._tiles)if(c=this._tiles[r],c.current&&!c.active){var P=c.coords;this._retainParent(P.x,P.y,P.z,P.z-5)||this._retainChildren(P.x,P.y,P.z,P.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var c in this._tiles)this._tiles[c].coords.z===r&&this._removeTile(c)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)_n(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,c,g,P){var D=Math.floor(r/2),le=Math.floor(c/2),je=g-1,ct=new U(+D,+le);ct.z=+je;var vt=this._tileCoordsToKey(ct),At=this._tiles[vt];return At&&At.active?(At.retain=!0,!0):(At&&At.loaded&&(At.retain=!0),je>P?this._retainParent(D,le,je,P):!1)},_retainChildren:function(r,c,g,P){for(var D=2*r;D<2*r+2;D++)for(var le=2*c;le<2*c+2;le++){var je=new U(D,le);je.z=g+1;var ct=this._tileCoordsToKey(je),vt=this._tiles[ct];if(vt&&vt.active){vt.retain=!0;continue}else vt&&vt.loaded&&(vt.retain=!0);g+1<P&&this._retainChildren(D,le,g+1,P)}},_resetView:function(r){var c=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var c=this.options;return c.minNativeZoom!==void 0&&r<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<r?c.maxNativeZoom:r},_setView:function(r,c,g,P){var D=Math.round(c);this.options.maxZoom!==void 0&&D>this.options.maxZoom||this.options.minZoom!==void 0&&D<this.options.minZoom?D=void 0:D=this._clampZoom(D);var le=this.options.updateWhenZooming&&D!==this._tileZoom;(!P||le)&&(this._tileZoom=D,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),D!==void 0&&this._update(r),g||this._pruneTiles(),this._noPrune=!!g),this._setZoomTransforms(r,c)},_setZoomTransforms:function(r,c){for(var g in this._levels)this._setZoomTransform(this._levels[g],r,c)},_setZoomTransform:function(r,c,g){var P=this._map.getZoomScale(g,r.zoom),D=r.origin.multiplyBy(P).subtract(this._map._getNewPixelOrigin(c,g)).round();$t.any3d?ms(r.el,D,P):cr(r.el,D)},_resetGrid:function(){var r=this._map,c=r.options.crs,g=this._tileSize=this.getTileSize(),P=this._tileZoom,D=this._map.getPixelWorldBounds(this._tileZoom);D&&(this._globalTileRange=this._pxBoundsToTileRange(D)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,c.wrapLng[0]],P).x/g.x),Math.ceil(r.project([0,c.wrapLng[1]],P).x/g.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([c.wrapLat[0],0],P).y/g.x),Math.ceil(r.project([c.wrapLat[1],0],P).y/g.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var c=this._map,g=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),P=c.getZoomScale(g,this._tileZoom),D=c.project(r,this._tileZoom).floor(),le=c.getSize().divideBy(P*2);return new Re(D.subtract(le),D.add(le))},_update:function(r){var c=this._map;if(c){var g=this._clampZoom(c.getZoom());if(r===void 0&&(r=c.getCenter()),this._tileZoom!==void 0){var P=this._getTiledPixelBounds(r),D=this._pxBoundsToTileRange(P),le=D.getCenter(),je=[],ct=this.options.keepBuffer,vt=new Re(D.getBottomLeft().subtract([ct,-ct]),D.getTopRight().add([ct,-ct]));if(!(isFinite(D.min.x)&&isFinite(D.min.y)&&isFinite(D.max.x)&&isFinite(D.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var At in this._tiles){var Gt=this._tiles[At].coords;(Gt.z!==this._tileZoom||!vt.contains(new U(Gt.x,Gt.y)))&&(this._tiles[At].current=!1)}if(Math.abs(g-this._tileZoom)>1){this._setView(r,g);return}for(var rn=D.min.y;rn<=D.max.y;rn++)for(var En=D.min.x;En<=D.max.x;En++){var ai=new U(En,rn);if(ai.z=this._tileZoom,!!this._isValidTile(ai)){var Mr=this._tiles[this._tileCoordsToKey(ai)];Mr?Mr.current=!0:je.push(ai)}}if(je.sort(function(fr,Cs){return fr.distanceTo(le)-Cs.distanceTo(le)}),je.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var gi=document.createDocumentFragment();for(En=0;En<je.length;En++)this._addTile(je[En],gi);this._level.el.appendChild(gi)}}}},_isValidTile:function(r){var c=this._map.options.crs;if(!c.infinite){var g=this._globalTileRange;if(!c.wrapLng&&(r.x<g.min.x||r.x>g.max.x)||!c.wrapLat&&(r.y<g.min.y||r.y>g.max.y))return!1}if(!this.options.bounds)return!0;var P=this._tileCoordsToBounds(r);return se(this.options.bounds).overlaps(P)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var c=this._map,g=this.getTileSize(),P=r.scaleBy(g),D=P.add(g),le=c.unproject(P,r.z),je=c.unproject(D,r.z);return[le,je]},_tileCoordsToBounds:function(r){var c=this._tileCoordsToNwSe(r),g=new J(c[0],c[1]);return this.options.noWrap||(g=this._map.wrapLatLngBounds(g)),g},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var c=r.split(":"),g=new U(+c[0],+c[1]);return g.z=+c[2],g},_removeTile:function(r){var c=this._tiles[r];c&&(_n(c.el),delete this._tiles[r],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){bn(r,"leaflet-tile");var c=this.getTileSize();r.style.width=c.x+"px",r.style.height=c.y+"px",r.onselectstart=w,r.onmousemove=w,$t.ielt9&&this.options.opacity<1&&$r(r,this.options.opacity)},_addTile:function(r,c){var g=this._getTilePos(r),P=this._tileCoordsToKey(r),D=this.createTile(this._wrapCoords(r),u(this._tileReady,this,r));this._initTile(D),this.createTile.length<2&&V(u(this._tileReady,this,r,null,D)),cr(D,g),this._tiles[P]={el:D,coords:r,current:!0},c.appendChild(D),this.fire("tileloadstart",{tile:D,coords:r})},_tileReady:function(r,c,g){c&&this.fire("tileerror",{error:c,tile:g,coords:r});var P=this._tileCoordsToKey(r);g=this._tiles[P],g&&(g.loaded=+new Date,this._map._fadeAnimated?($r(g.el,0),X(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this)):(g.active=!0,this._pruneTiles()),c||(bn(g.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:g.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),$t.ielt9||!this._map._fadeAnimated?V(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var c=new U(this._wrapX?b(r.x,this._wrapX):r.x,this._wrapY?b(r.y,this._wrapY):r.y);return c.z=r.z,c},_pxBoundsToTileRange:function(r){var c=this.getTileSize();return new Re(r.min.unscaleBy(c).floor(),r.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function ji(r){return new qs(r)}var Ir=qs.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,c){this._url=r,c=R(this,c),c.detectRetina&&$t.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,c){return this._url===r&&c===void 0&&(c=!0),this._url=r,c||this.redraw(),this},createTile:function(r,c){var g=document.createElement("img");return yn(g,"load",u(this._tileOnLoad,this,c,g)),yn(g,"error",u(this._tileOnError,this,c,g)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(g.referrerPolicy=this.options.referrerPolicy),g.alt="",g.src=this.getTileUrl(r),g},getTileUrl:function(r){var c={r:$t.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var g=this._globalTileRange.max.y-r.y;this.options.tms&&(c.y=g),c["-y"]=g}return G(this._url,o(c,this.options))},_tileOnLoad:function(r,c){$t.ielt9?setTimeout(u(r,this,null,c),0):r(null,c)},_tileOnError:function(r,c,g){var P=this.options.errorTileUrl;P&&c.getAttribute("src")!==P&&(c.src=P),r(g,c)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,c=this.options.maxZoom,g=this.options.zoomReverse,P=this.options.zoomOffset;return g&&(r=c-r),r+P},_getSubdomain:function(r){var c=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var r,c;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(c=this._tiles[r].el,c.onload=w,c.onerror=w,!c.complete)){c.src=Ce;var g=this._tiles[r].coords;_n(c),delete this._tiles[r],this.fire("tileabort",{tile:c,coords:g})}},_removeTile:function(r){var c=this._tiles[r];if(c)return c.el.setAttribute("src",Ce),qs.prototype._removeTile.call(this,r)},_tileReady:function(r,c,g){if(!(!this._map||g&&g.getAttribute("src")===Ce))return qs.prototype._tileReady.call(this,r,c,g)}});function Zn(r,c){return new Ir(r,c)}var Gn=Ir.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,c){this._url=r;var g=o({},this.defaultWmsParams);for(var P in c)P in this.options||(g[P]=c[P]);c=R(this,c);var D=c.detectRetina&&$t.retina?2:1,le=this.getTileSize();g.width=le.x*D,g.height=le.y*D,this.wmsParams=g},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,Ir.prototype.onAdd.call(this,r)},getTileUrl:function(r){var c=this._tileCoordsToNwSe(r),g=this._crs,P=O(g.project(c[0]),g.project(c[1])),D=P.min,le=P.max,je=(this._wmsVersion>=1.3&&this._crs===wr?[D.y,D.x,le.y,le.x]:[D.x,D.y,le.x,le.y]).join(","),ct=Ir.prototype.getTileUrl.call(this,r);return ct+$(this.wmsParams,ct,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+je},setParams:function(r,c){return o(this.wmsParams,r),c||this.redraw(),this}});function vr(r,c){return new Gn(r,c)}Ir.WMS=Gn,Zn.wms=vr;var er=Qn.extend({options:{padding:.1},initialize:function(r){R(this,r),m(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),bn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,c){var g=this._map.getZoomScale(c,this._zoom),P=this._map.getSize().multiplyBy(.5+this.options.padding),D=this._map.project(this._center,c),le=P.multiplyBy(-g).add(D).subtract(this._map._getNewPixelOrigin(r,c));$t.any3d?ms(this._container,le,g):cr(this._container,le)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,c=this._map.getSize(),g=this._map.containerPointToLayerPoint(c.multiplyBy(-r)).round();this._bounds=new Re(g,g.add(c.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),is=er.extend({options:{tolerance:0},getEvents:function(){var r=er.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){er.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");yn(r,"mousemove",this._onMouseMove,this),yn(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),yn(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){X(this._redrawRequest),delete this._ctx,_n(this._container),Dn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var c in this._layers)r=this._layers[c],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){er.prototype._update.call(this);var r=this._bounds,c=this._container,g=r.getSize(),P=$t.retina?2:1;cr(c,r.min),c.width=P*g.x,c.height=P*g.y,c.style.width=g.x+"px",c.style.height=g.y+"px",$t.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){er.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[m(r)]=r;var c=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var c=r._order,g=c.next,P=c.prev;g?g.prev=P:this._drawLast=P,P?P.next=g:this._drawFirst=g,delete r._order,delete this._layers[m(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var c=r.options.dashArray.split(/[, ]+/),g=[],P,D;for(D=0;D<c.length;D++){if(P=Number(c[D]),isNaN(P))return;g.push(P)}r.options._dashArray=g}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||V(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var c=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Re,this._redrawBounds.extend(r._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(r._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var c=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,c=this._redrawBounds;if(this._ctx.save(),c){var g=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,g.x,g.y),this._ctx.clip()}this._drawing=!0;for(var P=this._drawFirst;P;P=P.next)r=P.layer,(!c||r._pxBounds&&r._pxBounds.intersects(c))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,c){if(this._drawing){var g,P,D,le,je=r._parts,ct=je.length,vt=this._ctx;if(ct){for(vt.beginPath(),g=0;g<ct;g++){for(P=0,D=je[g].length;P<D;P++)le=je[g][P],vt[P?"lineTo":"moveTo"](le.x,le.y);c&&vt.closePath()}this._fillStroke(vt,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var c=r._point,g=this._ctx,P=Math.max(Math.round(r._radius),1),D=(Math.max(Math.round(r._radiusY),1)||P)/P;D!==1&&(g.save(),g.scale(1,D)),g.beginPath(),g.arc(c.x,c.y/D,P,0,Math.PI*2,!1),D!==1&&g.restore(),this._fillStroke(g,r)}},_fillStroke:function(r,c){var g=c.options;g.fill&&(r.globalAlpha=g.fillOpacity,r.fillStyle=g.fillColor||g.color,r.fill(g.fillRule||"evenodd")),g.stroke&&g.weight!==0&&(r.setLineDash&&r.setLineDash(c.options&&c.options._dashArray||[]),r.globalAlpha=g.opacity,r.lineWidth=g.weight,r.strokeStyle=g.color,r.lineCap=g.lineCap,r.lineJoin=g.lineJoin,r.stroke())},_onClick:function(r){for(var c=this._map.mouseEventToLayerPoint(r),g,P,D=this._drawFirst;D;D=D.next)g=D.layer,g.options.interactive&&g._containsPoint(c)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(g))&&(P=g);this._fireEvent(P?[P]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,c)}},_handleMouseOut:function(r){var c=this._hoveredLayer;c&&(zn(this._container,"leaflet-interactive"),this._fireEvent([c],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,c){if(!this._mouseHoverThrottled){for(var g,P,D=this._drawFirst;D;D=D.next)g=D.layer,g.options.interactive&&g._containsPoint(c)&&(P=g);P!==this._hoveredLayer&&(this._handleMouseOut(r),P&&(bn(this._container,"leaflet-interactive"),this._fireEvent([P],r,"mouseover"),this._hoveredLayer=P)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,c,g){this._map._fireDOMEvent(c,g||c.type,r)},_bringToFront:function(r){var c=r._order;if(c){var g=c.next,P=c.prev;if(g)g.prev=P;else return;P?P.next=g:g&&(this._drawFirst=g),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(r)}},_bringToBack:function(r){var c=r._order;if(c){var g=c.next,P=c.prev;if(P)P.next=g;else return;g?g.prev=P:P&&(this._drawLast=P),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(r)}}});function uo(r){return $t.canvas?new is(r):null}var xs=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),el={_initContainer:function(){this._container=Rn("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(er.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var c=r._container=xs("shape");bn(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",r._path=xs("path"),c.appendChild(r._path),this._updateStyle(r),this._layers[m(r)]=r},_addPath:function(r){var c=r._container;this._container.appendChild(c),r.options.interactive&&r.addInteractiveTarget(c)},_removePath:function(r){var c=r._container;_n(c),r.removeInteractiveTarget(c),delete this._layers[m(r)]},_updateStyle:function(r){var c=r._stroke,g=r._fill,P=r.options,D=r._container;D.stroked=!!P.stroke,D.filled=!!P.fill,P.stroke?(c||(c=r._stroke=xs("stroke")),D.appendChild(c),c.weight=P.weight+"px",c.color=P.color,c.opacity=P.opacity,P.dashArray?c.dashStyle=Y(P.dashArray)?P.dashArray.join(" "):P.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=P.lineCap.replace("butt","flat"),c.joinstyle=P.lineJoin):c&&(D.removeChild(c),r._stroke=null),P.fill?(g||(g=r._fill=xs("fill")),D.appendChild(g),g.color=P.fillColor||P.color,g.opacity=P.fillOpacity):g&&(D.removeChild(g),r._fill=null)},_updateCircle:function(r){var c=r._point.round(),g=Math.round(r._radius),P=Math.round(r._radiusY||g);this._setPath(r,r._empty()?"M0 0":"AL "+c.x+","+c.y+" "+g+","+P+" 0,"+65535*360)},_setPath:function(r,c){r._path.v=c},_bringToFront:function(r){Ts(r._container)},_bringToBack:function(r){ps(r._container)}},co=$t.vml?xs:Be,Sr=er.extend({_initContainer:function(){this._container=co("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=co("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){_n(this._container),Dn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){er.prototype._update.call(this);var r=this._bounds,c=r.getSize(),g=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,g.setAttribute("width",c.x),g.setAttribute("height",c.y)),cr(g,r.min),g.setAttribute("viewBox",[r.min.x,r.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(r){var c=r._path=co("path");r.options.className&&bn(c,r.options.className),r.options.interactive&&bn(c,"leaflet-interactive"),this._updateStyle(r),this._layers[m(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){_n(r._path),r.removeInteractiveTarget(r._path),delete this._layers[m(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var c=r._path,g=r.options;c&&(g.stroke?(c.setAttribute("stroke",g.color),c.setAttribute("stroke-opacity",g.opacity),c.setAttribute("stroke-width",g.weight),c.setAttribute("stroke-linecap",g.lineCap),c.setAttribute("stroke-linejoin",g.lineJoin),g.dashArray?c.setAttribute("stroke-dasharray",g.dashArray):c.removeAttribute("stroke-dasharray"),g.dashOffset?c.setAttribute("stroke-dashoffset",g.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),g.fill?(c.setAttribute("fill",g.fillColor||g.color),c.setAttribute("fill-opacity",g.fillOpacity),c.setAttribute("fill-rule",g.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(r,c){this._setPath(r,ce(r._parts,c))},_updateCircle:function(r){var c=r._point,g=Math.max(Math.round(r._radius),1),P=Math.max(Math.round(r._radiusY),1)||g,D="a"+g+","+P+" 0 1,0 ",le=r._empty()?"M0 0":"M"+(c.x-g)+","+c.y+D+g*2+",0 "+D+-g*2+",0 ";this._setPath(r,le)},_setPath:function(r,c){r._path.setAttribute("d",c)},_bringToFront:function(r){Ts(r._path)},_bringToBack:function(r){ps(r._path)}});$t.vml&&Sr.include(el);function tr(r){return $t.svg||$t.vml?new Sr(r):null}An.include({getRenderer:function(r){var c=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var c=this._paneRenderers[r];return c===void 0&&(c=this._createRenderer({pane:r}),this._paneRenderers[r]=c),c},_createRenderer:function(r){return this.options.preferCanvas&&uo(r)||tr(r)}});var pi=Er.extend({initialize:function(r,c){Er.prototype.initialize.call(this,this._boundsToLatLngs(r),c)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=se(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function mi(r,c){return new pi(r,c)}Sr.create=co,Sr.pointsToPath=ce,Ri.geometryToLayer=To,Ri.coordsToLatLng=ys,Ri.coordsToLatLngs=Rr,Ri.latLngToCoords=Br,Ri.latLngsToCoords=rs,Ri.getFeature=fi,Ri.asFeature=Ii,An.mergeOptions({boxZoom:!0});var hn=kr.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){yn(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Dn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){_n(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ko(),ba(),this._startPoint=this._map.mouseEventToContainerPoint(r),yn(document,{contextmenu:xi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=Rn("div","leaflet-zoom-box",this._container),bn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var c=new Re(this._point,this._startPoint),g=c.getSize();cr(this._box,c.min),this._box.style.width=g.x+"px",this._box.style.height=g.y+"px"},_finish:function(){this._moved&&(_n(this._box),zn(this._container,"leaflet-crosshair")),Ns(),ts(),Dn(document,{contextmenu:xi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var c=new J(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});An.addInitHook("addHandler","boxZoom",hn),An.mergeOptions({doubleClickZoom:!0});var tl=kr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var c=this._map,g=c.getZoom(),P=c.options.zoomDelta,D=r.originalEvent.shiftKey?g-P:g+P;c.options.doubleClickZoom==="center"?c.setZoom(D):c.setZoomAround(r.containerPoint,D)}});An.addInitHook("addHandler","doubleClickZoom",tl),An.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Do=kr.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new Oi(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}bn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){zn(this._map._container,"leaflet-grab"),zn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=se(this._map.options.maxBounds);this._offsetLimit=O(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var c=this._lastTime=+new Date,g=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(g),this._times.push(c),this._prunePositions(c)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,c){return r-(r-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;r.x<c.min.x&&(r.x=this._viscousLimit(r.x,c.min.x)),r.y<c.min.y&&(r.y=this._viscousLimit(r.y,c.min.y)),r.x>c.max.x&&(r.x=this._viscousLimit(r.x,c.max.x)),r.y>c.max.y&&(r.y=this._viscousLimit(r.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,c=Math.round(r/2),g=this._initialWorldOffset,P=this._draggable._newPos.x,D=(P-c+g)%r+c-g,le=(P+c+g)%r-c-g,je=Math.abs(D+g)<Math.abs(le+g)?D:le;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=je},_onDragEnd:function(r){var c=this._map,g=c.options,P=!g.inertia||r.noInertia||this._times.length<2;if(c.fire("dragend",r),P)c.fire("moveend");else{this._prunePositions(+new Date);var D=this._lastPos.subtract(this._positions[0]),le=(this._lastTime-this._times[0])/1e3,je=g.easeLinearity,ct=D.multiplyBy(je/le),vt=ct.distanceTo([0,0]),At=Math.min(g.inertiaMaxSpeed,vt),Gt=ct.multiplyBy(At/vt),rn=At/(g.inertiaDeceleration*je),En=Gt.multiplyBy(-rn/2).round();!En.x&&!En.y?c.fire("moveend"):(En=c._limitOffset(En,c.options.maxBounds),V(function(){c.panBy(En,{duration:rn,easeLinearity:je,noMoveStart:!0,animate:!0})}))}}});An.addInitHook("addHandler","dragging",Do),An.mergeOptions({keyboard:!0,keyboardPanDelta:80});var zi=kr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),yn(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Dn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,c=document.documentElement,g=r.scrollTop||c.scrollTop,P=r.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(P,g)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var c=this._panKeys={},g=this.keyCodes,P,D;for(P=0,D=g.left.length;P<D;P++)c[g.left[P]]=[-1*r,0];for(P=0,D=g.right.length;P<D;P++)c[g.right[P]]=[r,0];for(P=0,D=g.down.length;P<D;P++)c[g.down[P]]=[0,r];for(P=0,D=g.up.length;P<D;P++)c[g.up[P]]=[0,-1*r]},_setZoomDelta:function(r){var c=this._zoomKeys={},g=this.keyCodes,P,D;for(P=0,D=g.zoomIn.length;P<D;P++)c[g.zoomIn[P]]=r;for(P=0,D=g.zoomOut.length;P<D;P++)c[g.zoomOut[P]]=-r},_addHooks:function(){yn(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Dn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var c=r.keyCode,g=this._map,P;if(c in this._panKeys){if(!g._panAnim||!g._panAnim._inProgress)if(P=this._panKeys[c],r.shiftKey&&(P=Q(P).multiplyBy(3)),g.options.maxBounds&&(P=g._limitOffset(Q(P),g.options.maxBounds)),g.options.worldCopyJump){var D=g.wrapLatLng(g.unproject(g.project(g.getCenter()).add(P)));g.panTo(D)}else g.panBy(P)}else if(c in this._zoomKeys)g.setZoom(g.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&g._popup&&g._popup.options.closeOnEscapeKey)g.closePopup();else return;xi(r)}}});An.addInitHook("addHandler","keyboard",zi),An.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Wr=kr.extend({addHooks:function(){yn(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Dn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var c=Xo(r),g=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var P=Math.max(g-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),P),xi(r)},_performZoom:function(){var r=this._map,c=r.getZoom(),g=this._map.options.zoomSnap||0;r._stop();var P=this._delta/(this._map.options.wheelPxPerZoomLevel*4),D=4*Math.log(2/(1+Math.exp(-Math.abs(P))))/Math.LN2,le=g?Math.ceil(D/g)*g:D,je=r._limitZoom(c+(this._delta>0?le:-le))-c;this._delta=0,this._startTime=null,je&&(r.options.scrollWheelZoom==="center"?r.setZoom(c+je):r.setZoomAround(this._lastMousePos,c+je))}});An.addInitHook("addHandler","scrollWheelZoom",Wr);var Pl=600;An.mergeOptions({tapHold:$t.touchNative&&$t.safari&&$t.mobile,tapTolerance:15});var si=kr.extend({addHooks:function(){yn(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Dn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var c=r.touches[0];this._startPos=this._newPos=new U(c.clientX,c.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(yn(document,"touchend",mr),yn(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),Pl),yn(document,"touchend touchcancel contextmenu",this._cancel,this),yn(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){Dn(document,"touchend",mr),Dn(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),Dn(document,"touchend touchcancel contextmenu",this._cancel,this),Dn(document,"touchmove",this._onMove,this)},_onMove:function(r){var c=r.touches[0];this._newPos=new U(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,c){var g=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});g._simulated=!0,c.target.dispatchEvent(g)}});An.addInitHook("addHandler","tapHold",si),An.mergeOptions({touchZoom:$t.touch,bounceAtZoomLimits:!0});var oi=kr.extend({addHooks:function(){bn(this._map._container,"leaflet-touch-zoom"),yn(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){zn(this._map._container,"leaflet-touch-zoom"),Dn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var c=this._map;if(!(!r.touches||r.touches.length!==2||c._animatingZoom||this._zooming)){var g=c.mouseEventToContainerPoint(r.touches[0]),P=c.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(g.add(P)._divideBy(2))),this._startDist=g.distanceTo(P),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),yn(document,"touchmove",this._onTouchMove,this),yn(document,"touchend touchcancel",this._onTouchEnd,this),mr(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var c=this._map,g=c.mouseEventToContainerPoint(r.touches[0]),P=c.mouseEventToContainerPoint(r.touches[1]),D=g.distanceTo(P)/this._startDist;if(this._zoom=c.getScaleZoom(D,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&D<1||this._zoom>c.getMaxZoom()&&D>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,D===1)return}else{var le=g._add(P)._divideBy(2)._subtract(this._centerPoint);if(D===1&&le.x===0&&le.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(le),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),X(this._animRequest);var je=u(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=V(je,this,!0),mr(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,X(this._animRequest),Dn(document,"touchmove",this._onTouchMove,this),Dn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});An.addInitHook("addHandler","touchZoom",oi),An.BoxZoom=hn,An.DoubleClickZoom=tl,An.Drag=Do,An.Keyboard=zi,An.ScrollWheelZoom=Wr,An.TapHold=si,An.TouchZoom=oi,n.Bounds=Re,n.Browser=$t,n.CRS=he,n.Canvas=is,n.Circle=Vr,n.CircleMarker=ri,n.Class=te,n.Control=sn,n.DivIcon=ao,n.DivOverlay=Hr,n.DomEvent=So,n.DomUtil=gn,n.Draggable=Oi,n.Evented=me,n.FeatureGroup=ni,n.GeoJSON=Ri,n.GridLayer=qs,n.Handler=kr,n.Icon=ns,n.ImageOverlay=bs,n.LatLng=de,n.LatLngBounds=J,n.Layer=Qn,n.LayerGroup=ti,n.LineUtil=Bn,n.Map=An,n.Marker=xr,n.Mixin=Ya,n.Path=hi,n.Point=U,n.PolyUtil=ra,n.Polygon=Er,n.Polyline=Ci,n.Popup=di,n.PosAnimation=La,n.Projection=Vn,n.Rectangle=pi,n.Renderer=er,n.SVG=Sr,n.SVGOverlay=Aa,n.TileLayer=Ir,n.Tooltip=ws,n.Transformation=tt,n.Util=N,n.VideoOverlay=Gr,n.bind=u,n.bounds=O,n.canvas=uo,n.circle=js,n.circleMarker=sa,n.control=ei,n.divIcon=lo,n.extend=o,n.featureGroup=Sa,n.geoJSON=Fi,n.geoJson=hr,n.gridLayer=ji,n.icon=Ma,n.imageOverlay=ii,n.latLng=_e,n.latLngBounds=se,n.layerGroup=Xa,n.map=Ca,n.marker=ia,n.point=Q,n.polygon=_s,n.polyline=Qa,n.popup=oo,n.rectangle=mi,n.setOptions=R,n.stamp=m,n.svg=tr,n.svgOverlay=Ba,n.tileLayer=Zn,n.tooltip=oa,n.transformation=ne,n.version=i,n.videoOverlay=No;var Ls=window.L;n.noConflict=function(){return window.L=Ls,this},window.L=n})})(Xf,Xf.exports);var Yr=Xf.exports;const wt=Wg(Yr);var v0={exports:{}};(function(e,t){(function(n,i){i(t)})(po,function(n){var i=typeof window<"u"?window:typeof po<"u"?po:typeof self<"u"?self:{};function o(_,b){return _(b={exports:{}},b.exports),b.exports}var a=o(function(_,b){(function(w){const S={escape:function(W){return W.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:C,mimeType:function(W){return W=C(W).toLowerCase(),function(){var H="application/font-woff",me="image/jpeg";return{woff:H,woff2:H,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:me,jpeg:me,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[W]||""},dataAsUrl:function(W,H){return`data:${H};base64,`+W},isDataUrl:function(W){return W.search(/^(data:)/)!==-1},canvasToBlob:function(W){return W.toBlob?new Promise(function(me){W.toBlob(me)}):(H=W,new Promise(function(me){const U=ie(H.toDataURL().split(",")[1]);var I=U.length;const Q=new Uint8Array(I);for(let Re=0;Re<I;Re++)Q[Re]=U.charCodeAt(Re);me(new Blob([Q],{type:"image/png"}))}));var H},resolveUrl:function(W,H){const me=document.implementation.createHTMLDocument(),U=me.createElement("base"),I=(me.head.appendChild(U),me.createElement("a"));return me.body.appendChild(I),U.href=H,I.href=W,I.href},getAndEncode:function(W){let H=Ce.impl.urlCache.find(function(me){return me.url===W});return H||(H={url:W,promise:null},Ce.impl.urlCache.push(H)),H.promise===null&&(Ce.impl.options.cacheBust&&(W+=(/\?/.test(W)?"&":"?")+new Date().getTime()),H.promise=new Promise(function(me){const U=Ce.impl.options.httpTimeout,I=new XMLHttpRequest;let Q;var Re;function O(J){console.error(J),me("")}I.onreadystatechange=function(){if(I.readyState===4)if(I.status!==200)Q?me(Q):O(`cannot fetch resource: ${W}, status: `+I.status);else{const J=new FileReader;J.onloadend=function(){var se=J.result.split(/,/)[1];me(se)},J.readAsDataURL(I.response)}},I.ontimeout=function(){Q?me(Q):O(`timeout of ${U}ms occured while fetching resource: `+W)},I.responseType="blob",I.timeout=U,Ce.impl.options.useCredentials&&(I.withCredentials=!0),I.open("GET",W,!0),I.send(),Ce.impl.options.imagePlaceholder&&(Re=Ce.impl.options.imagePlaceholder.split(/,/))&&Re[1]&&(Q=Re[1])})),H.promise},uid:function(){let W=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+W++}}(),delay:function(W){return function(H){return new Promise(function(me){setTimeout(function(){me(H)},W)})}},asArray:function(W){const H=[],me=W.length;for(let U=0;U<me;U++)H.push(W[U]);return H},escapeXhtml:function(W){return W.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(W){return W!=="data:,"?new Promise(function(H,me){const U=new Image;Ce.impl.options.useCredentials&&(U.crossOrigin="use-credentials"),U.onload=function(){H(U)},U.onerror=me,U.src=W}):Promise.resolve()},width:function(W){var H=F(W,"border-left-width"),me=F(W,"border-right-width");return W.scrollWidth+H+me},height:function(W){var H=F(W,"border-top-width"),me=F(W,"border-bottom-width");return W.scrollHeight+H+me}};function C(W){return(W=/\.([^\.\/]*?)(\?|$)/g.exec(W))?W[1]:""}function F(W,H){const me=be(W).getPropertyValue(H);return parseFloat(me.replace("px",""))}const R=function(){const W=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(I,Q,Re){return H(I)?Promise.resolve(I).then(me).then(function(O){let J=Promise.resolve(I);return O.forEach(function(se){J=J.then(function(de){return U(de,se,Q,Re)})}),J}):Promise.resolve(I)},shouldProcess:H,impl:{readUrls:me,inline:U}};function H(I){return I.search(W)!==-1}function me(I){const Q=[];for(var Re;(Re=W.exec(I))!==null;)Q.push(Re[1]);return Q.filter(function(O){return!S.isDataUrl(O)})}function U(I,Q,Re,O){return Promise.resolve(Q).then(function(J){return Re?S.resolveUrl(J,Re):J}).then(O||S.getAndEncode).then(function(J){return S.dataAsUrl(J,S.mimeType(Q))}).then(function(J){return I.replace((se=Q,new RegExp(`(url\\(['"]?)(${S.escape(se)})(['"]?\\))`,"g")),`$1${J}$3`);var se})}}(),$={resolveAll:function(){return j().then(function(W){return Promise.all(W.map(function(H){return H.resolve()}))}).then(function(W){return W.join(`
`)})},impl:{readAll:j}};function j(){return Promise.resolve(S.asArray(document.styleSheets)).then(function(H){const me=[];return H.forEach(function(U){if(Object.getPrototypeOf(U).hasOwnProperty("cssRules"))try{S.asArray(U.cssRules||[]).forEach(me.push.bind(me))}catch(I){console.log("Error while reading CSS rules from "+U.href,I.toString())}}),me}).then(function(H){return H.filter(function(me){return me.type===CSSRule.FONT_FACE_RULE}).filter(function(me){return R.shouldProcess(me.style.getPropertyValue("src"))})}).then(function(H){return H.map(W)});function W(H){return{resolve:function(){var me=(H.parentStyleSheet||{}).href;return R.inlineAll(H.cssText,me)},src:function(){return H.style.getPropertyValue("src")}}}}const G={inlineAll:function W(H){return H instanceof Element?function(me){const U=me.style.getPropertyValue("background");return U?R.inlineAll(U).then(function(I){me.style.setProperty("background",I,U)}).then(function(){return me}):Promise.resolve(me)}(H).then(function(){return H instanceof HTMLImageElement?Y(H).inline():Promise.all(S.asArray(H.childNodes).map(function(me){return W(me)}))}):Promise.resolve(H)},impl:{newImage:Y}};function Y(W){return{inline:function(H){return S.isDataUrl(W.src)?Promise.resolve():Promise.resolve(W.src).then(H||S.getAndEncode).then(function(me){return S.dataAsUrl(me,S.mimeType(W.src))}).then(function(me){return new Promise(function(U){W.onload=U,W.onerror=U,W.src=me})})}}}const ke={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},Ce={toSvg:re,toPng:function(W,H){return(H=H||{}).raster=!0,Ie(W,H).then(function(me){return me.toDataURL()})},toJpeg:function(W,H){return(H=H||{}).raster=!0,Ie(W,H).then(function(me){return me.toDataURL("image/jpeg",H.quality||1)})},toBlob:function(W,H){return(H=H||{}).raster=!0,Ie(W,H).then(S.canvasToBlob)},toPixelData:function(W,H){return(H=H||{}).raster=!0,Ie(W,H).then(function(me){return me.getContext("2d").getImageData(0,0,S.width(W),S.height(W)).data})},toCanvas:function(W,H){return(H=H||{}).raster=!0,Ie(W,H||{})},impl:{fontFaces:$,images:G,util:S,inliner:R,urlCache:[],options:{}}},be=(_.exports=Ce,w.getComputedStyle||window.getComputedStyle),ie=w.atob||window.atob;function re(W,H){var me=H=H||{};return me.imagePlaceholder===void 0?Ce.impl.options.imagePlaceholder=ke.imagePlaceholder:Ce.impl.options.imagePlaceholder=me.imagePlaceholder,me.cacheBust===void 0?Ce.impl.options.cacheBust=ke.cacheBust:Ce.impl.options.cacheBust=me.cacheBust,me.useCredentials===void 0?Ce.impl.options.useCredentials=ke.useCredentials:Ce.impl.options.useCredentials=me.useCredentials,Promise.resolve(W).then(function(U){return function I(Q,Re,O,J,se=null){return O||!Re||Re(Q)?Promise.resolve(Q).then(function(de){return de instanceof HTMLCanvasElement?S.makeImage(de.toDataURL()):de.nodeName==="IFRAME"?html2canvas(de.contentDocument.body).then(_e=>_e.toDataURL()).then(S.makeImage):de.cloneNode(!1)}).then(function(de){return function(_e,he){const we=_e.childNodes;return we.length===0?Promise.resolve(he):function(Ee,Ve){const tt=be(_e);let ne=Promise.resolve();return Ve.forEach(function(fe){ne=ne.then(function(){return I(fe,Re,!1,J,tt)}).then(function(De){De&&Ee.appendChild(De)})}),ne}(he,S.asArray(we)).then(function(){return he})}(Q,de)}).then(function(de){return function(_e,he,we){return he instanceof Element?Promise.resolve().then(function(){(function(Ee,Ve){const tt=be(Ee);tt.cssText?(Ve.style.cssText=tt.cssText,function(ne,fe){fe.font=ne.font,fe.fontFamily=ne.fontFamily,fe.fontFeatureSettings=ne.fontFeatureSettings,fe.fontKerning=ne.fontKerning,fe.fontSize=ne.fontSize,fe.fontStretch=ne.fontStretch,fe.fontStyle=ne.fontStyle,fe.fontVariant=ne.fontVariant,fe.fontVariantCaps=ne.fontVariantCaps,fe.fontVariantEastAsian=ne.fontVariantEastAsian,fe.fontVariantLigatures=ne.fontVariantLigatures,fe.fontVariantNumeric=ne.fontVariantNumeric,fe.fontVariationSettings=ne.fontVariationSettings,fe.fontWeight=ne.fontWeight}(tt,Ve.style)):(we?function(ne,fe,De,Be){const ce=De.style,Ge=ne.style;for(var it of fe){var Qe=fe.getPropertyValue(it),lt=Ge.getPropertyValue(it),Oe=(Ge.setProperty(it,Be?"initial":"unset"),fe.getPropertyValue(it));Oe!==Qe?ce.setProperty(it,Qe):ce.removeProperty(it),Ge.setProperty(it,lt)}}(Ee,tt,Ve,O):function(ne,fe,De){const Be=function(Ge){if(te[Ge])return te[Ge];N||((N=document.createElement("iframe")).style.visibility="hidden",N.style.position="fixed",document.body.appendChild(N),N.contentWindow.document.write('<!DOCTYPE html><meta charset="UTF-8"><title>sandbox</title><body>'));const it=document.createElement(Ge),Qe=(N.contentWindow.document.body.appendChild(it),it.textContent=".",N.contentWindow.getComputedStyle(it)),lt={};return S.asArray(Qe).forEach(function(Oe){lt[Oe]=Oe==="width"||Oe==="height"?"auto":Qe.getPropertyValue(Oe)}),N.contentWindow.document.body.removeChild(it),te[Ge]=lt}(De.tagName),ce=De.style;S.asArray(ne).forEach(function(Ge){var it=ne.getPropertyValue(Ge);(it!==Be[Ge]||fe&&it!==fe.getPropertyValue(Ge))&&ce.setProperty(Ge,it,ne.getPropertyPriority(Ge))})}(tt,se,Ve),O&&(["inset-block","inset-block-start","inset-block-end"].forEach(ne=>Ve.style.removeProperty(ne)),["left","right","top","bottom"].forEach(ne=>{Ve.style.getPropertyValue(ne)&&Ve.style.setProperty(ne,"0px")})))})(_e,he)}).then(function(){[":before",":after"].forEach(function(Ee){(function(Ve){const tt=be(_e,Ve),ne=tt.getPropertyValue("content");if(ne!==""&&ne!=="none"){const fe=S.uid(),De=he.getAttribute("class"),Be=(De&&he.setAttribute("class",De+" "+fe),document.createElement("style"));Be.appendChild(function(){const ce=`.${fe}:`+Ve,Ge=(tt.cssText?function(){return`${tt.cssText} content: ${tt.getPropertyValue("content")};`}:function(){return S.asArray(tt).map(function(it){return it+": "+tt.getPropertyValue(it)+(tt.getPropertyPriority(it)?" !important":"")}).join("; ")+";"})();return document.createTextNode(ce+`{${Ge}}`)}()),he.appendChild(Be)}})(Ee)})}).then(function(){_e instanceof HTMLTextAreaElement&&(he.innerHTML=_e.value),_e instanceof HTMLInputElement&&he.setAttribute("value",_e.value)}).then(function(){he instanceof SVGElement&&(he.setAttribute("xmlns","http://www.w3.org/2000/svg"),he instanceof SVGRectElement&&["width","height"].forEach(function(Ee){const Ve=he.getAttribute(Ee);Ve&&he.style.setProperty(Ee,Ve)}))}).then(function(){return he}):he}(Q,de,J)}):Promise.resolve()}(U,H.filter,!0,!H.raster)}).then(Je).then(V).then(function(U){H.bgcolor&&(U.style.backgroundColor=H.bgcolor),H.width&&(U.style.width=H.width+"px"),H.height&&(U.style.height=H.height+"px"),H.style&&Object.keys(H.style).forEach(function(Q){U.style[Q]=H.style[Q]});let I=null;return typeof H.onclone=="function"&&(I=H.onclone(U)),Promise.resolve(I).then(function(){return U})}).then(function(U){return U=U,I=H.width||S.width(W),Q=H.height||S.height(W),Promise.resolve(U).then(function(Re){return Re.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(Re)}).then(S.escapeXhtml).then(function(Re){return`<foreignObject x="0" y="0" width="100%" height="100%">${Re}</foreignObject>`}).then(function(Re){return`<svg xmlns="http://www.w3.org/2000/svg" width="${I}" height="${Q}">${Re}</svg>`}).then(function(Re){return"data:image/svg+xml;charset=utf-8,"+Re});var I,Q}).then(function(U){return Ce.impl.urlCache=[],U})}function Ie(W,H){return re(W,H).then(S.makeImage).then(S.delay(0)).then(function(me){var U=typeof H.scale!="number"?1:H.scale;const I=function(Re,O){const J=document.createElement("canvas");if(J.width=(H.width||S.width(Re))*O,J.height=(H.height||S.height(Re))*O,H.bgcolor){const se=J.getContext("2d");se.fillStyle=H.bgcolor,se.fillRect(0,0,J.width,J.height)}return J}(W,U),Q=I.getContext("2d");return Q.mozImageSmoothingEnabled=!1,Q.msImageSmoothingEnabled=!1,Q.imageSmoothingEnabled=!1,me&&(Q.scale(U,U),Q.drawImage(me,0,0)),N&&(document.body.removeChild(N),N=null,X&&clearTimeout(X),X=setTimeout(()=>{X=null,te={}},2e4)),I})}function Je(W){return $.resolveAll().then(function(H){const me=document.createElement("style");return W.appendChild(me),me.appendChild(document.createTextNode(H)),W})}function V(W){return G.inlineAll(W).then(function(){return W})}let X=null,N=null,te={}})(i)}),u=o(function(_,b){(function(){function w($,j,G){var Y=new XMLHttpRequest;Y.open("GET",$),Y.responseType="blob",Y.onload=function(){R(Y.response,j,G)},Y.onerror=function(){console.error("could not download file")},Y.send()}function S($){var j=new XMLHttpRequest;j.open("HEAD",$,!1);try{j.send()}catch{}return 200<=j.status&&299>=j.status}function C($){try{$.dispatchEvent(new MouseEvent("click"))}catch{var j=document.createEvent("MouseEvents");j.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),$.dispatchEvent(j)}}var F=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof i=="object"&&i.global===i?i:void 0,R=F.saveAs||(typeof window!="object"||window!==F?function(){}:"download"in HTMLAnchorElement.prototype?function($,j,G){var Y=F.URL||F.webkitURL,ke=document.createElement("a");j=j||$.name||"download",ke.download=j,ke.rel="noopener",typeof $=="string"?(ke.href=$,ke.origin===location.origin?C(ke):S(ke.href)?w($,j,G):C(ke,ke.target="_blank")):(ke.href=Y.createObjectURL($),setTimeout(function(){Y.revokeObjectURL(ke.href)},4e4),setTimeout(function(){C(ke)},0))}:"msSaveOrOpenBlob"in navigator?function($,j,G){if(j=j||$.name||"download",typeof $!="string")navigator.msSaveOrOpenBlob(function(ke,Ce){return Ce===void 0?Ce={autoBom:!1}:typeof Ce!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),Ce={autoBom:!Ce}),Ce.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(ke.type)?new Blob(["\uFEFF",ke],{type:ke.type}):ke}($,G),j);else if(S($))w($,j,G);else{var Y=document.createElement("a");Y.href=$,Y.target="_blank",setTimeout(function(){C(Y)})}}:function($,j,G,Y){if((Y=Y||open("","_blank"))&&(Y.document.title=Y.document.body.innerText="downloading..."),typeof $=="string")return w($,j,G);var ke=$.type==="application/octet-stream",Ce=/constructor/i.test(F.HTMLElement)||F.safari,be=/CriOS\/[\d]+/.test(navigator.userAgent);if((be||ke&&Ce)&&typeof FileReader=="object"){var ie=new FileReader;ie.onloadend=function(){var Je=ie.result;Je=be?Je:Je.replace(/^data:[^;]*;/,"data:attachment/file;"),Y?Y.location.href=Je:location=Je,Y=null},ie.readAsDataURL($)}else{var re=F.URL||F.webkitURL,Ie=re.createObjectURL($);Y?Y.location=Ie:location.href=Ie,Y=null,setTimeout(function(){re.revokeObjectURL(Ie)},4e4)}});F.saveAs=R.saveAs=R,_.exports=R})()}),d=L.Control.extend({options:{cropImageByInnerWH:!0,hidden:!1,domtoimageOptions:{},position:"topleft",screenName:"screen",iconUrl:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+",hideElementsWithSelectors:[".leaflet-control-container"],onCropBorderSize:2,caption:null,captionFontSize:15,captionFont:"Arial",captionColor:"black",captionBgColor:"white",captionOffset:5,mimeType:"image/png",debugMode:!1,preventDownload:!1,onPixelDataFail:function(_){var b=_.node,w=_.error;return console.warn("Map node is very big "+b.scrollWidth+"x"+b.scrollHeight),console.warn(`Add function: SimpleMapScreenshoter({
              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {
                 // Solutions:
                 // decrease size of map
                 // or decrease zoom level
                 // or remove elements with big distanses
                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap
                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)
              }
            })`),Promise.reject(w)}},onAdd:function(){return this._container=L.DomUtil.create("div","leaflet-control-simpleMapScreenshoter"),this._link=null,this._screenState={status:1,promise:null},this.options.hidden===!1&&this._addScreenBtn(),this._onUserStartInteractWithMap=this._onUserStartInteractWithMap.bind(this),this._onUserEndInteractWithMap=this._onUserEndInteractWithMap.bind(this),this._map.on("zoomstart",this._onUserStartInteractWithMap),this._map.on("move",this._onUserStartInteractWithMap),this._map.on("zoomend",this._onUserEndInteractWithMap),this._map.on("moveend",this._onUserEndInteractWithMap),this._container},takeScreen:function(){var _=this,b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"blob",w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},S={};for(var C in this.options)w.hasOwnProperty(C)?S[C]=w[C]:S[C]=this.options[C];return this._screenState.status===2?this._screenState.promise:(this._map.fire("simpleMapScreenshoter.takeScreen"),this._screenState.status=2,this._setElementsVisible(!1),this._screenState.promise=this._waitEndOfInteractions().then(function(){return _._getPixelData(S)}).then(function(F){return _._setElementsVisible(!0),_._toCanvas(F,S)}).then(function(F){return b==="image"?_._canvasToImage(F,S):b==="canvas"?F:_._canvasToBlob(F,S)}).then(function(F){return _._screenState.status=1,_._map.fire("simpleMapScreenshoter.done"),F}).catch(function(F){return _._setElementsVisible(!0),_._screenState.status=1,_._map.fire("simpleMapScreenshoter.error",{e:F}),Promise.reject(F)}),this._screenState.promise)},_setElementsVisible:function(){var _=this,b=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.hideElementsWithSelectors.forEach(function(w){var S=_._map._container.querySelectorAll(w),C=!0,F=!1,R=void 0;try{for(var $,j=S[Symbol.iterator]();!(C=($=j.next()).done);C=!0)$.value.style.opacity=b===!1?0:1}catch(G){F=!0,R=G}finally{try{!C&&j.return&&j.return()}finally{if(F)throw R}}})},_canvasToImage:function(_,b){var w=b.mimeType,S=_.toDataURL(w);return S.indexOf("base64")===-1?Promise.reject(new Error("Base64 image generation error")):Promise.resolve(S)},_canvasToBlob:function(_,b){var w=b.mimeType;return new Promise(function(S,C){_.toBlob(function(F){S(F)},w)})},_toCanvas:function(_,b){var w=b.captionOffset,S=b.caption,C=b.captionFontSize,F=b.captionFont,R=b.captionColor,$=b.captionBgColor,j=this._node,G=j.screenHeight,Y=j.screenWidth,ke=document.createElement("canvas");ke.width=Y,ke.height=G;for(var Ce=ke.getContext("2d"),be=Ce.createImageData(Y,G),ie=0;ie<_.length;++ie)be.data[ie]=_[ie];Ce.putImageData(be,0,0),be=null;var re=document.createElement("canvas"),Ie=re.getContext("2d"),Je=0,V=0,X=G,N=Y;if(this.options.cropImageByInnerWH===!0){for(var te=[],W=0,H=0;H<G;++H){W=0;for(var me=0;me<Y;++me)_[4*H*Y+4*me+4]===0&&W++;W===Y&&te.push(H)}var U=this._getMinAndMaxOnValuesBreak(te);Je=U.min;for(var I=Y,Q=U.max,Re=[],O=0,J=V;J<I;++J){O=0;for(var se=0;se<G;++se)_[4*se*Y+4*J+4]===0&&O++;O===G&&Re.push(J)}var de=this._getMinAndMaxOnValuesBreak(Re);V=de.min,I=de.max,(V===0&&I===0||I===null)&&(I=Y),(Je===0&&Q===0||Q===null)&&(Q=G),this.options.debugMode===!0&&(console.log("emptyYLine",te),console.log("minMaxY",U),console.log("emptyXLine",Re),console.log("minMaxX",de),console.log("debugX",{}),console.log("debugY",{})),Je===0&&Q===G&&V===0&&I===Y||(Je+=this.options.onCropBorderSize,Q-=this.options.onCropBorderSize,V+=this.options.onCropBorderSize,I-=this.options.onCropBorderSize),X=Q-Je,N=I-V,re.width=N,re.height=X}else re.width=N,re.height=X;var _e=null;return S&&(_e=typeof S=="function"?S.call(this):S),_e!==null&&(re.height=re.height+(w+C+w),Ie.beginPath(),Ie.rect(0,0,re.width,re.height),Ie.fillStyle=$,Ie.fill(),Ie.save()),Ie.drawImage(ke,V,Je,N,X,0,0,N,X),_e!==null&&(Ie.font=C+"px "+F,Ie.fillStyle=R,Ie.fillText(_e,w,X+w+C)),Promise.resolve(re)},_getMinAndMaxOnValuesBreak:function(_){for(var b=0,w=0,S=!1,C=1;C<_.length;C++){if(_[C]-1!==_[C-1]){w=_[C],S=!0;break}b=_[C]}return S===!1&&_[0]>1?(b=0,w=_[0]):S===!1&&(b=_[_.length-1]||0,w=null),{min:b,max:w}},_getPixelData:function(_){var b=this,w=_.domtoimageOptions,S=w===void 0?{}:w;return this._getPixelDataOfNormalMap(S).catch(function(C){return console.warn("May be map size very big on that zoom level, we have error:",C.toString()),console.warn("You can manually hide map elements with large distances between them for fix that warn"),b._getPixelDataOfBigMap(S)})},_getPixelDataOfNormalMap:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=this._map.getContainer();return this._node={node:b,screenHeight:b.scrollHeight,screenWidth:b.scrollWidth},a.toPixelData(b,_)},_getPixelDataOfBigMap:function(){var _=this,b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},w=this._map.getContainer(),S=this._map.getPane("mapPane");S.style.width=2*w.clientWidth+"px",S.style.height=2*w.clientHeight+"px",S.style.overflow="hidden";var C=function(){S.style.width="initial",S.style.height="initial",S.style.overflow="initial"};return this._node={node:w,screenHeight:w.scrollHeight,screenWidth:w.scrollWidth},a.toPixelData(w,b).then(function(F){return C(),F}).catch(function(F){return C(),w.scrollHeight>=4e3||w.scrollWidth>=4e3?_.options.onPixelDataFail({plugin:_,node:w,mapPane:S,error:F,domtoimageOptions:b}):Promise.reject(F)})},_addScreenBtn:function(){this._link=L.DomUtil.create("a","leaflet-control-simpleMapScreenshoter-btn",this._container),this._addCss(),L.DomEvent.addListener(this._link,"click",this._onScreenBtn,this),L.DomEvent.disableClickPropagation(this._link)},_addCss:function(){var _=`
    .leaflet-control-simpleMapScreenshoter{
       border: 2px solid rgba(0,0,0,0.2);
       background-clip: padding-box;
    }
    .leaflet-control-simpleMapScreenshoter a{
       background-color: #fff;
       border-bottom: 1px solid #ccc;
       width: 30px;
       height: 30px;
       line-height: 30px;
       display: block;
       text-align: center;
       text-decoration: none;
       color: black;
       overflow: hidden;
       border-radius: 2px;
       background-image: url('`+this.options.iconUrl+`');
       background-position: 46% 41%;
       background-repeat: no-repeat;
       background-size: 63%;
    }
    .leaflet-control-simpleMapScreenshoter a:hover{
       cursor: pointer;
    }
    `,b=document.head||document.getElementsByTagName("head")[0],w=document.createElement("style");w.appendChild(document.createTextNode(_)),b.appendChild(w)},_onScreenBtn:function(){var _=this;this._map.fire("simpleMapScreenshoter.click"),this.options.preventDownload||this.takeScreen().then(function(b){var w=typeof _.options.screenName=="function"?_.options.screenName.call(_):_.options.screenName;u.saveAs(b,w+".png")}).catch(function(b){_._map.fire("simpleMapScreenshoter.error",{e:b})})},_onUserStartInteractWithMap:function(){this._interaction=!0},_onUserEndInteractWithMap:function(){this._interaction=!1},_waitEndOfInteractions:function(){var _=this;return new Promise(function(b){var w=setInterval(function(){_._interaction||(b(),clearInterval(w))},100)})}}),m=(L.Control.SimpleMapScreenshoter=d,L.simpleMapScreenshoter=function(_){return new L.Control.SimpleMapScreenshoter(_)},d);n.default=m,n.SimpleMapScreenshoter=d,Object.defineProperty(n,"__esModule",{value:!0})})})(v0,v0.exports);const p3={class:"drawing-tools"},m3={class:"mb-4"},g3={class:"grid grid-cols-2 gap-2"},v3=["onClick"],_3={class:"text-sm"},y3={key:0,class:"space-y-2"},b3={class:"border rounded overflow-hidden"},w3={class:"p-3 space-y-3"},x3={class:"grid grid-cols-6 gap-2"},L3=["onClick"],C3={class:"space-y-2"},k3={class:"flex items-center gap-2"},P3={class:"flex items-center gap-2"},E3=["value"],S3={key:0,class:"flex items-center gap-2"},M3={class:"border rounded overflow-hidden mt-4"},A3={class:"p-3 space-y-2 text-sm"},B3={key:0},T3={key:0,class:"space-y-1"},N3={class:"flex justify-between"},D3={class:"font-medium"},O3={class:"flex justify-between"},R3={class:"font-medium"},I3={class:"flex justify-between"},F3={class:"font-medium"},j3={class:"flex justify-between"},z3={class:"font-medium"},U3={key:1,class:"space-y-1"},q3={class:"flex justify-between"},$3={class:"font-medium"},V3={class:"flex justify-between"},G3={class:"font-medium"},H3={class:"flex justify-between"},W3={class:"font-medium"},Z3={class:"flex justify-between"},K3={class:"font-medium"},J3={key:2,class:"space-y-1"},Y3={class:"flex justify-between"},X3={class:"font-medium"},Q3={class:"flex justify-between"},ew={class:"font-medium"},tw={class:"flex justify-between"},nw={class:"font-medium"},rw={class:"flex justify-between"},iw={class:"font-medium"},sw={class:"flex justify-between"},ow={class:"font-medium"},aw={key:3,class:"space-y-1"},lw={class:"flex justify-between"},uw={class:"font-medium"},cw={class:"flex justify-between"},hw={class:"font-medium"},fw={key:4,class:"space-y-1"},dw={class:"flex justify-between"},pw={class:"font-medium"},mw={class:"flex justify-between"},gw={class:"font-medium"},vw={key:5,class:"space-y-1"},_w={class:"flex justify-between"},yw={class:"font-medium"},bw={class:"flex justify-between"},ww={class:"font-medium"},xw={class:"flex justify-between"},Lw={class:"font-medium"},Cw={class:"flex justify-between"},kw={class:"font-medium"},Pw={key:1,class:"text-gray-500 text-center"},Ew=Ms({__name:"DrawingTools",props:{currentTool:{},selectedShape:{}},emits:["tool-change","style-update","delete-shape"],setup(e,{emit:t}){const n=e,i=t,o=It(null);Yi(()=>n.selectedShape,be=>{console.log("[DrawingTools] Changement de forme slectionne",{newShape:be,properties:be==null?void 0:be.properties}),be?o.value={...be.properties}:o.value=null},{deep:!0,immediate:!0}),Yi(()=>o.value,(be,ie)=>{console.log("[DrawingTools] Changement dtect dans localProperties",{newProperties:be,oldProperties:ie,selectedShape:n.selectedShape})},{deep:!0}),Yi(()=>{var be;return(be=n.selectedShape)==null?void 0:be.properties},be=>{console.log("[DrawingTools] Changement dtect directement dans les proprits de la forme",be),be&&n.selectedShape&&(o.value={...be})},{deep:!0,immediate:!0});const a=[{type:"Circle",label:"Cercle"},{type:"Semicircle",label:"Demi-cercle"},{type:"Rectangle",label:"Rectangle"},{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"TextRectangle",label:"Texte"},{type:"delete",label:"Supprimer"}],u=["#2563EB","#DC2626","#059669","#D97706","#7C3AED","#DB2777"],d=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointill"},{value:"dashdot",label:"Tiret-point"}],m=It("#3B82F6"),_=It(.2),b=It("#2563EB"),w=It(2),S=It("solid"),C=It({style:!1,properties:!1}),F=Nn(()=>{var ie,re;const be=(re=(ie=n.selectedShape)==null?void 0:ie.properties)==null?void 0:re.type;return console.log("[DrawingTools] Calcul de showFillOptions",{shapeType:be,selectedShape:n.selectedShape}),be?["Circle","Rectangle","Polygon","Semicircle"].includes(be):!1}),R=be=>{C.value[be]=!C.value[be]},$=be=>{switch(be){case"dashed":return"10,10";case"dotted":return"2,5";case"dashdot":return"10,5,2,5";default:return""}},j=be=>{b.value=be,F.value&&(m.value=be),G({strokeColor:be,fillColor:F.value?be:void 0})},G=be=>{const ie={...be};be.strokeStyle&&(ie.dashArray=$(be.strokeStyle)),be.fillOpacity!==void 0&&(ie.fillOpacity=parseFloat(be.fillOpacity)),be.strokeOpacity!==void 0&&(ie.strokeOpacity=parseFloat(be.strokeOpacity)),be.strokeWidth!==void 0&&(ie.weight=parseInt(be.strokeWidth)),be.strokeColor&&(ie.color=be.strokeColor),i("style-update",ie)},Y=be=>be?be>=1e3?`${(be/1e3).toFixed(2)} km`:`${be.toFixed(2)} m`:"0 m",ke=be=>be?`${(be/1e4).toFixed(2)} ha`:"0 ha",Ce=be=>be?`${((be%360+360)%360).toFixed(1)}`:"0";return(be,ie)=>(ut(),dt("div",p3,[B("div",m3,[B("div",g3,[(ut(!0),dt(Sn,null,Wn(a.filter(re=>re.type!=="delete"),re=>(ut(),dt("button",{key:re.type,class:Ji(["flex items-center justify-center p-2 rounded border",{"bg-blue-50 border-blue-200":be.currentTool===re.type,"hover:bg-gray-50 border-gray-200":be.currentTool!==re.type}]),onClick:Ie=>be.$emit("tool-change",re.type)},[B("span",_3,kt(re.label),1)],10,v3))),128))]),be.selectedShape?(ut(),dt("button",{key:0,class:Ji(["w-full mt-2 flex items-center justify-center p-2 rounded border border-red-500 bg-red-50 hover:bg-red-100 text-red-700 transition-colors duration-200",{"bg-red-100 border-red-600":be.currentTool==="delete"}]),onClick:ie[0]||(ie[0]=re=>be.$emit("delete-shape"))},ie[13]||(ie[13]=[B("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),B("span",{class:"text-sm font-medium"},"Supprimer la forme",-1)]),2)):un("",!0)]),be.selectedShape&&o.value?(ut(),dt("div",y3,[B("div",b3,[B("button",{class:"w-full px-3 py-2 flex justify-between items-center bg-gray-50 hover:bg-gray-100",onClick:ie[1]||(ie[1]=re=>R("style"))},[ie[15]||(ie[15]=B("span",{class:"font-medium"},"Style",-1)),(ut(),dt("svg",{class:Ji(["w-5 h-5 transform transition-transform",{"rotate-180":!C.value.style}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ie[14]||(ie[14]=[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),jn(B("div",w3,[B("div",x3,[(ut(),dt(Sn,null,Wn(u,re=>B("button",{key:re,class:"w-6 h-6 rounded-full border hover:scale-110 transition-transform",style:xh({backgroundColor:re}),onClick:Ie=>j(re)},null,12,L3)),64))]),B("div",C3,[B("div",k3,[ie[16]||(ie[16]=B("span",{class:"text-xs text-gray-500"},"Contour",-1)),jn(B("input",{type:"color","onUpdate:modelValue":ie[2]||(ie[2]=re=>b.value=re),class:"w-6 h-6",onChange:ie[3]||(ie[3]=re=>G({strokeColor:b.value})),title:"Couleur du contour"},null,544),[[Ar,b.value]]),jn(B("input",{type:"range","onUpdate:modelValue":ie[4]||(ie[4]=re=>w.value=re),min:"1",max:"10",class:"flex-1",onChange:ie[5]||(ie[5]=re=>G({strokeWidth:w.value})),title:"paisseur du contour"},null,544),[[Ar,w.value]])]),B("div",P3,[ie[17]||(ie[17]=B("span",{class:"text-xs text-gray-500"},"Style",-1)),jn(B("select",{"onUpdate:modelValue":ie[6]||(ie[6]=re=>S.value=re),class:"flex-1 text-sm border rounded px-1 py-0.5",onChange:ie[7]||(ie[7]=re=>G({strokeStyle:S.value}))},[(ut(),dt(Sn,null,Wn(d,re=>B("option",{key:re.value,value:re.value},kt(re.label),9,E3)),64))],544),[[Hs,S.value]])]),F.value?(ut(),dt("div",S3,[ie[18]||(ie[18]=B("span",{class:"text-xs text-gray-500"},"Remplissage",-1)),jn(B("input",{type:"color","onUpdate:modelValue":ie[8]||(ie[8]=re=>m.value=re),class:"w-6 h-6",onChange:ie[9]||(ie[9]=re=>G({fillColor:m.value})),title:"Couleur de remplissage"},null,544),[[Ar,m.value]]),jn(B("input",{type:"range","onUpdate:modelValue":ie[10]||(ie[10]=re=>_.value=re),min:"0",max:"1",step:"0.1",class:"flex-1",onChange:ie[11]||(ie[11]=re=>G({fillOpacity:_.value})),title:"Opacit du remplissage"},null,544),[[Ar,_.value]])])):un("",!0)])],512),[[vp,!C.value.style]])]),B("div",M3,[B("button",{class:"w-full px-3 py-2 flex justify-between items-center bg-gray-50 hover:bg-gray-100",onClick:ie[12]||(ie[12]=re=>R("properties"))},[ie[20]||(ie[20]=B("span",{class:"font-medium"},"Proprits",-1)),(ut(),dt("svg",{class:Ji(["w-5 h-5 transform transition-transform",{"rotate-180":!C.value.properties}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ie[19]||(ie[19]=[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),jn(B("div",A3,[o.value?(ut(),dt("div",B3,[o.value.type==="Circle"?(ut(),dt("div",T3,[B("div",N3,[ie[21]||(ie[21]=B("span",{class:"text-gray-600"},"Rayon :",-1)),B("span",D3,kt(Y(o.value.radius||0)),1)]),B("div",O3,[ie[22]||(ie[22]=B("span",{class:"text-gray-600"},"Diamtre :",-1)),B("span",R3,kt(Y(o.value.diameter||0)),1)]),B("div",I3,[ie[23]||(ie[23]=B("span",{class:"text-gray-600"},"Surface :",-1)),B("span",F3,kt(ke(o.value.area||0)),1)]),B("div",j3,[ie[24]||(ie[24]=B("span",{class:"text-gray-600"},"Primtre :",-1)),B("span",z3,kt(Y(o.value.perimeter||0)),1)])])):o.value.type==="Rectangle"?(ut(),dt("div",U3,[B("div",q3,[ie[25]||(ie[25]=B("span",{class:"text-gray-600"},"Largeur :",-1)),B("span",$3,kt(Y(o.value.width||0)),1)]),B("div",V3,[ie[26]||(ie[26]=B("span",{class:"text-gray-600"},"Hauteur :",-1)),B("span",G3,kt(Y(o.value.height||0)),1)]),B("div",H3,[ie[27]||(ie[27]=B("span",{class:"text-gray-600"},"Surface :",-1)),B("span",W3,kt(ke(o.value.area||0)),1)]),B("div",Z3,[ie[28]||(ie[28]=B("span",{class:"text-gray-600"},"Primtre :",-1)),B("span",K3,kt(Y(o.value.perimeter||0)),1)])])):o.value.type==="Semicircle"?(ut(),dt("div",J3,[B("div",Y3,[ie[29]||(ie[29]=B("span",{class:"text-gray-600"},"Rayon :",-1)),B("span",X3,kt(Y(o.value.radius||0)),1)]),B("div",Q3,[ie[30]||(ie[30]=B("span",{class:"text-gray-600"},"Surface :",-1)),B("span",ew,kt(ke(o.value.area||0)),1)]),B("div",tw,[ie[31]||(ie[31]=B("span",{class:"text-gray-600"},"Primtre :",-1)),B("span",nw,kt(Y(o.value.perimeter||0)),1)]),B("div",rw,[ie[32]||(ie[32]=B("span",{class:"text-gray-600"},"Longueur d'arc :",-1)),B("span",iw,kt(Y(o.value.arcLength||0)),1)]),B("div",sw,[ie[33]||(ie[33]=B("span",{class:"text-gray-600"},"Angle d'ouverture :",-1)),B("span",ow,kt(Ce(o.value.openingAngle||0)),1)])])):o.value.type==="Line"?(ut(),dt("div",aw,[B("div",lw,[ie[34]||(ie[34]=B("span",{class:"text-gray-600"},"Longueur :",-1)),B("span",uw,kt(Y(o.value.length||0)),1)]),B("div",cw,[ie[35]||(ie[35]=B("span",{class:"text-gray-600"},"Surface d'influence :",-1)),B("span",hw,kt(ke(o.value.surfaceInfluence||0)),1)])])):o.value.type==="Polygon"?(ut(),dt("div",fw,[B("div",dw,[ie[36]||(ie[36]=B("span",{class:"text-gray-600"},"Surface :",-1)),B("span",pw,kt(ke(o.value.area||0)),1)]),B("div",mw,[ie[37]||(ie[37]=B("span",{class:"text-gray-600"},"Primtre :",-1)),B("span",gw,kt(Y(o.value.perimeter||0)),1)])])):o.value.type==="TextRectangle"?(ut(),dt("div",vw,[B("div",_w,[ie[38]||(ie[38]=B("span",{class:"text-gray-600"},"Largeur :",-1)),B("span",yw,kt(Y(o.value.width||0)),1)]),B("div",bw,[ie[39]||(ie[39]=B("span",{class:"text-gray-600"},"Hauteur :",-1)),B("span",ww,kt(Y(o.value.height||0)),1)]),B("div",xw,[ie[40]||(ie[40]=B("span",{class:"text-gray-600"},"Surface :",-1)),B("span",Lw,kt(ke(o.value.area||0)),1)]),B("div",Cw,[ie[41]||(ie[41]=B("span",{class:"text-gray-600"},"Rotation :",-1)),B("span",kw,kt(Ce(o.value.rotation||0)),1)])])):un("",!0)])):(ut(),dt("div",Pw," Aucune proprit disponible "))],512),[[vp,!C.value.properties]])])])):un("",!0)]))}}),Sw=Xg(Ew,[["__scopeId","data-v-09225d16"]]);(()=>{var jt,an;var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,o=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,u=(s,l)=>()=>(l||s((l={exports:{}}).exports,l),l.exports),d=(s,l,h,p)=>{if(l&&typeof l=="object"||typeof l=="function")for(let v of i(l))!a.call(s,v)&&v!==h&&t(s,v,{get:()=>l[v],enumerable:!(p=n(l,v))||p.enumerable});return s},m=(s,l,h)=>(h=s!=null?e(o(s)):{},d(l||!s||!s.__esModule?t(h,"default",{value:s,enumerable:!0}):h,s)),_=u((s,l)=>{function h(){this.__data__=[],this.size=0}l.exports=h}),b=u((s,l)=>{function h(p,v){return p===v||p!==p&&v!==v}l.exports=h}),w=u((s,l)=>{var h=b();function p(v,k){for(var M=v.length;M--;)if(h(v[M][0],k))return M;return-1}l.exports=p}),S=u((s,l)=>{var h=w(),p=Array.prototype,v=p.splice;function k(M){var A=this.__data__,z=h(A,M);if(z<0)return!1;var ee=A.length-1;return z==ee?A.pop():v.call(A,z,1),--this.size,!0}l.exports=k}),C=u((s,l)=>{var h=w();function p(v){var k=this.__data__,M=h(k,v);return M<0?void 0:k[M][1]}l.exports=p}),F=u((s,l)=>{var h=w();function p(v){return h(this.__data__,v)>-1}l.exports=p}),R=u((s,l)=>{var h=w();function p(v,k){var M=this.__data__,A=h(M,v);return A<0?(++this.size,M.push([v,k])):M[A][1]=k,this}l.exports=p}),$=u((s,l)=>{var h=_(),p=S(),v=C(),k=F(),M=R();function A(z){var ee=-1,Ne=z==null?0:z.length;for(this.clear();++ee<Ne;){var Me=z[ee];this.set(Me[0],Me[1])}}A.prototype.clear=h,A.prototype.delete=p,A.prototype.get=v,A.prototype.has=k,A.prototype.set=M,l.exports=A}),j=u((s,l)=>{var h=$();function p(){this.__data__=new h,this.size=0}l.exports=p}),G=u((s,l)=>{function h(p){var v=this.__data__,k=v.delete(p);return this.size=v.size,k}l.exports=h}),Y=u((s,l)=>{function h(p){return this.__data__.get(p)}l.exports=h}),ke=u((s,l)=>{function h(p){return this.__data__.has(p)}l.exports=h}),Ce=u((s,l)=>{var h=typeof po=="object"&&po&&po.Object===Object&&po;l.exports=h}),be=u((s,l)=>{var h=Ce(),p=typeof self=="object"&&self&&self.Object===Object&&self,v=h||p||Function("return this")();l.exports=v}),ie=u((s,l)=>{var h=be(),p=h.Symbol;l.exports=p}),re=u((s,l)=>{var h=ie(),p=Object.prototype,v=p.hasOwnProperty,k=p.toString,M=h?h.toStringTag:void 0;function A(z){var ee=v.call(z,M),Ne=z[M];try{z[M]=void 0;var Me=!0}catch{}var Ye=k.call(z);return Me&&(ee?z[M]=Ne:delete z[M]),Ye}l.exports=A}),Ie=u((s,l)=>{var h=Object.prototype,p=h.toString;function v(k){return p.call(k)}l.exports=v}),Je=u((s,l)=>{var h=ie(),p=re(),v=Ie(),k="[object Null]",M="[object Undefined]",A=h?h.toStringTag:void 0;function z(ee){return ee==null?ee===void 0?M:k:A&&A in Object(ee)?p(ee):v(ee)}l.exports=z}),V=u((s,l)=>{function h(p){var v=typeof p;return p!=null&&(v=="object"||v=="function")}l.exports=h}),X=u((s,l)=>{var h=Je(),p=V(),v="[object AsyncFunction]",k="[object Function]",M="[object GeneratorFunction]",A="[object Proxy]";function z(ee){if(!p(ee))return!1;var Ne=h(ee);return Ne==k||Ne==M||Ne==v||Ne==A}l.exports=z}),N=u((s,l)=>{var h=be(),p=h["__core-js_shared__"];l.exports=p}),te=u((s,l)=>{var h=N(),p=function(){var k=/[^.]+$/.exec(h&&h.keys&&h.keys.IE_PROTO||"");return k?"Symbol(src)_1."+k:""}();function v(k){return!!p&&p in k}l.exports=v}),W=u((s,l)=>{var h=Function.prototype,p=h.toString;function v(k){if(k!=null){try{return p.call(k)}catch{}try{return k+""}catch{}}return""}l.exports=v}),H=u((s,l)=>{var h=X(),p=te(),v=V(),k=W(),M=/[\\^$.*+?()[\]{}|]/g,A=/^\[object .+?Constructor\]$/,z=Function.prototype,ee=Object.prototype,Ne=z.toString,Me=ee.hasOwnProperty,Ye=RegExp("^"+Ne.call(Me).replace(M,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ht(Et){if(!v(Et)||p(Et))return!1;var Rt=h(Et)?Ye:A;return Rt.test(k(Et))}l.exports=ht}),me=u((s,l)=>{function h(p,v){return p==null?void 0:p[v]}l.exports=h}),U=u((s,l)=>{var h=H(),p=me();function v(k,M){var A=p(k,M);return h(A)?A:void 0}l.exports=v}),I=u((s,l)=>{var h=U(),p=be(),v=h(p,"Map");l.exports=v}),Q=u((s,l)=>{var h=U(),p=h(Object,"create");l.exports=p}),Re=u((s,l)=>{var h=Q();function p(){this.__data__=h?h(null):{},this.size=0}l.exports=p}),O=u((s,l)=>{function h(p){var v=this.has(p)&&delete this.__data__[p];return this.size-=v?1:0,v}l.exports=h}),J=u((s,l)=>{var h=Q(),p="__lodash_hash_undefined__",v=Object.prototype,k=v.hasOwnProperty;function M(A){var z=this.__data__;if(h){var ee=z[A];return ee===p?void 0:ee}return k.call(z,A)?z[A]:void 0}l.exports=M}),se=u((s,l)=>{var h=Q(),p=Object.prototype,v=p.hasOwnProperty;function k(M){var A=this.__data__;return h?A[M]!==void 0:v.call(A,M)}l.exports=k}),de=u((s,l)=>{var h=Q(),p="__lodash_hash_undefined__";function v(k,M){var A=this.__data__;return this.size+=this.has(k)?0:1,A[k]=h&&M===void 0?p:M,this}l.exports=v}),_e=u((s,l)=>{var h=Re(),p=O(),v=J(),k=se(),M=de();function A(z){var ee=-1,Ne=z==null?0:z.length;for(this.clear();++ee<Ne;){var Me=z[ee];this.set(Me[0],Me[1])}}A.prototype.clear=h,A.prototype.delete=p,A.prototype.get=v,A.prototype.has=k,A.prototype.set=M,l.exports=A}),he=u((s,l)=>{var h=_e(),p=$(),v=I();function k(){this.size=0,this.__data__={hash:new h,map:new(v||p),string:new h}}l.exports=k}),we=u((s,l)=>{function h(p){var v=typeof p;return v=="string"||v=="number"||v=="symbol"||v=="boolean"?p!=="__proto__":p===null}l.exports=h}),Ee=u((s,l)=>{var h=we();function p(v,k){var M=v.__data__;return h(k)?M[typeof k=="string"?"string":"hash"]:M.map}l.exports=p}),Ve=u((s,l)=>{var h=Ee();function p(v){var k=h(this,v).delete(v);return this.size-=k?1:0,k}l.exports=p}),tt=u((s,l)=>{var h=Ee();function p(v){return h(this,v).get(v)}l.exports=p}),ne=u((s,l)=>{var h=Ee();function p(v){return h(this,v).has(v)}l.exports=p}),fe=u((s,l)=>{var h=Ee();function p(v,k){var M=h(this,v),A=M.size;return M.set(v,k),this.size+=M.size==A?0:1,this}l.exports=p}),De=u((s,l)=>{var h=he(),p=Ve(),v=tt(),k=ne(),M=fe();function A(z){var ee=-1,Ne=z==null?0:z.length;for(this.clear();++ee<Ne;){var Me=z[ee];this.set(Me[0],Me[1])}}A.prototype.clear=h,A.prototype.delete=p,A.prototype.get=v,A.prototype.has=k,A.prototype.set=M,l.exports=A}),Be=u((s,l)=>{var h=$(),p=I(),v=De(),k=200;function M(A,z){var ee=this.__data__;if(ee instanceof h){var Ne=ee.__data__;if(!p||Ne.length<k-1)return Ne.push([A,z]),this.size=++ee.size,this;ee=this.__data__=new v(Ne)}return ee.set(A,z),this.size=ee.size,this}l.exports=M}),ce=u((s,l)=>{var h=$(),p=j(),v=G(),k=Y(),M=ke(),A=Be();function z(ee){var Ne=this.__data__=new h(ee);this.size=Ne.size}z.prototype.clear=p,z.prototype.delete=v,z.prototype.get=k,z.prototype.has=M,z.prototype.set=A,l.exports=z}),Ge=u((s,l)=>{var h=U(),p=function(){try{var v=h(Object,"defineProperty");return v({},"",{}),v}catch{}}();l.exports=p}),it=u((s,l)=>{var h=Ge();function p(v,k,M){k=="__proto__"&&h?h(v,k,{configurable:!0,enumerable:!0,value:M,writable:!0}):v[k]=M}l.exports=p}),Qe=u((s,l)=>{var h=it(),p=b();function v(k,M,A){(A!==void 0&&!p(k[M],A)||A===void 0&&!(M in k))&&h(k,M,A)}l.exports=v}),lt=u((s,l)=>{function h(p){return function(v,k,M){for(var A=-1,z=Object(v),ee=M(v),Ne=ee.length;Ne--;){var Me=ee[p?Ne:++A];if(k(z[Me],Me,z)===!1)break}return v}}l.exports=h}),Oe=u((s,l)=>{var h=lt(),p=h();l.exports=p}),Pe=u((s,l)=>{var h=be(),p=typeof s=="object"&&s&&!s.nodeType&&s,v=p&&typeof l=="object"&&l&&!l.nodeType&&l,k=v&&v.exports===p,M=k?h.Buffer:void 0,A=M?M.allocUnsafe:void 0;function z(ee,Ne){if(Ne)return ee.slice();var Me=ee.length,Ye=A?A(Me):new ee.constructor(Me);return ee.copy(Ye),Ye}l.exports=z}),ot=u((s,l)=>{var h=be(),p=h.Uint8Array;l.exports=p}),_t=u((s,l)=>{var h=ot();function p(v){var k=new v.constructor(v.byteLength);return new h(k).set(new h(v)),k}l.exports=p}),Ct=u((s,l)=>{var h=_t();function p(v,k){var M=k?h(v.buffer):v.buffer;return new v.constructor(M,v.byteOffset,v.length)}l.exports=p}),ze=u((s,l)=>{function h(p,v){var k=-1,M=p.length;for(v||(v=Array(M));++k<M;)v[k]=p[k];return v}l.exports=h}),Ot=u((s,l)=>{var h=V(),p=Object.create,v=function(){function k(){}return function(M){if(!h(M))return{};if(p)return p(M);k.prototype=M;var A=new k;return k.prototype=void 0,A}}();l.exports=v}),Nt=u((s,l)=>{function h(p,v){return function(k){return p(v(k))}}l.exports=h}),Ut=u((s,l)=>{var h=Nt(),p=h(Object.getPrototypeOf,Object);l.exports=p}),Ht=u((s,l)=>{var h=Object.prototype;function p(v){var k=v&&v.constructor,M=typeof k=="function"&&k.prototype||h;return v===M}l.exports=p}),Dt=u((s,l)=>{var h=Ot(),p=Ut(),v=Ht();function k(M){return typeof M.constructor=="function"&&!v(M)?h(p(M)):{}}l.exports=k}),Pn=u((s,l)=>{function h(p){return p!=null&&typeof p=="object"}l.exports=h}),en=u((s,l)=>{var h=Je(),p=Pn(),v="[object Arguments]";function k(M){return p(M)&&h(M)==v}l.exports=k}),Yn=u((s,l)=>{var h=en(),p=Pn(),v=Object.prototype,k=v.hasOwnProperty,M=v.propertyIsEnumerable,A=h(function(){return arguments}())?h:function(z){return p(z)&&k.call(z,"callee")&&!M.call(z,"callee")};l.exports=A}),ln=u((s,l)=>{var h=Array.isArray;l.exports=h}),xn=u((s,l)=>{var h=9007199254740991;function p(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=h}l.exports=p}),Xn=u((s,l)=>{var h=X(),p=xn();function v(k){return k!=null&&p(k.length)&&!h(k)}l.exports=v}),qt=u((s,l)=>{var h=Xn(),p=Pn();function v(k){return p(k)&&h(k)}l.exports=v}),Ei=u((s,l)=>{function h(){return!1}l.exports=h}),In=u((s,l)=>{var h=be(),p=Ei(),v=typeof s=="object"&&s&&!s.nodeType&&s,k=v&&typeof l=="object"&&l&&!l.nodeType&&l,M=k&&k.exports===v,A=M?h.Buffer:void 0,z=A?A.isBuffer:void 0,ee=z||p;l.exports=ee}),Lr=u((s,l)=>{var h=Je(),p=Ut(),v=Pn(),k="[object Object]",M=Function.prototype,A=Object.prototype,z=M.toString,ee=A.hasOwnProperty,Ne=z.call(Object);function Me(Ye){if(!v(Ye)||h(Ye)!=k)return!1;var ht=p(Ye);if(ht===null)return!0;var Et=ee.call(ht,"constructor")&&ht.constructor;return typeof Et=="function"&&Et instanceof Et&&z.call(Et)==Ne}l.exports=Me}),Dr=u((s,l)=>{var h=Je(),p=xn(),v=Pn(),k="[object Arguments]",M="[object Array]",A="[object Boolean]",z="[object Date]",ee="[object Error]",Ne="[object Function]",Me="[object Map]",Ye="[object Number]",ht="[object Object]",Et="[object RegExp]",Rt="[object Set]",Ft="[object String]",fn="[object WeakMap]",Te="[object ArrayBuffer]",Fe="[object DataView]",We="[object Float32Array]",gt="[object Float64Array]",et="[object Int8Array]",ft="[object Int16Array]",q="[object Int32Array]",oe="[object Uint8Array]",ye="[object Uint8ClampedArray]",ve="[object Uint16Array]",xe="[object Uint32Array]",Le={};Le[We]=Le[gt]=Le[et]=Le[ft]=Le[q]=Le[oe]=Le[ye]=Le[ve]=Le[xe]=!0,Le[k]=Le[M]=Le[Te]=Le[A]=Le[Fe]=Le[z]=Le[ee]=Le[Ne]=Le[Me]=Le[Ye]=Le[ht]=Le[Et]=Le[Rt]=Le[Ft]=Le[fn]=!1;function $e(Ue){return v(Ue)&&p(Ue.length)&&!!Le[h(Ue)]}l.exports=$e}),qn=u((s,l)=>{function h(p){return function(v){return p(v)}}l.exports=h}),cn=u((s,l)=>{var h=Ce(),p=typeof s=="object"&&s&&!s.nodeType&&s,v=p&&typeof l=="object"&&l&&!l.nodeType&&l,k=v&&v.exports===p,M=k&&h.process,A=function(){try{var z=v&&v.require&&v.require("util").types;return z||M&&M.binding&&M.binding("util")}catch{}}();l.exports=A}),Yt=u((s,l)=>{var h=Dr(),p=qn(),v=cn(),k=v&&v.isTypedArray,M=k?p(k):h;l.exports=M}),Jt=u((s,l)=>{function h(p,v){if(!(v==="constructor"&&typeof p[v]=="function")&&v!="__proto__")return p[v]}l.exports=h}),ur=u((s,l)=>{var h=it(),p=b(),v=Object.prototype,k=v.hasOwnProperty;function M(A,z,ee){var Ne=A[z];(!(k.call(A,z)&&p(Ne,ee))||ee===void 0&&!(z in A))&&h(A,z,ee)}l.exports=M}),Si=u((s,l)=>{var h=ur(),p=it();function v(k,M,A,z){var ee=!A;A||(A={});for(var Ne=-1,Me=M.length;++Ne<Me;){var Ye=M[Ne],ht=z?z(A[Ye],k[Ye],Ye,A,k):void 0;ht===void 0&&(ht=k[Ye]),ee?p(A,Ye,ht):h(A,Ye,ht)}return A}l.exports=v}),Mi=u((s,l)=>{function h(p,v){for(var k=-1,M=Array(p);++k<p;)M[k]=v(k);return M}l.exports=h}),on=u((s,l)=>{var h=9007199254740991,p=/^(?:0|[1-9]\d*)$/;function v(k,M){var A=typeof k;return M=M??h,!!M&&(A=="number"||A!="symbol"&&p.test(k))&&k>-1&&k%1==0&&k<M}l.exports=v}),Qi=u((s,l)=>{var h=Mi(),p=Yn(),v=ln(),k=In(),M=on(),A=Yt(),z=Object.prototype,ee=z.hasOwnProperty;function Ne(Me,Ye){var ht=v(Me),Et=!ht&&p(Me),Rt=!ht&&!Et&&k(Me),Ft=!ht&&!Et&&!Rt&&A(Me),fn=ht||Et||Rt||Ft,Te=fn?h(Me.length,String):[],Fe=Te.length;for(var We in Me)(Ye||ee.call(Me,We))&&!(fn&&(We=="length"||Rt&&(We=="offset"||We=="parent")||Ft&&(We=="buffer"||We=="byteLength"||We=="byteOffset")||M(We,Fe)))&&Te.push(We);return Te}l.exports=Ne}),fs=u((s,l)=>{function h(p){var v=[];if(p!=null)for(var k in Object(p))v.push(k);return v}l.exports=h}),li=u((s,l)=>{var h=V(),p=Ht(),v=fs(),k=Object.prototype,M=k.hasOwnProperty;function A(z){if(!h(z))return v(z);var ee=p(z),Ne=[];for(var Me in z)Me=="constructor"&&(ee||!M.call(z,Me))||Ne.push(Me);return Ne}l.exports=A}),$n=u((s,l)=>{var h=Qi(),p=li(),v=Xn();function k(M){return v(M)?h(M,!0):p(M)}l.exports=k}),$t=u((s,l)=>{var h=Si(),p=$n();function v(k){return h(k,p(k))}l.exports=v}),ui=u((s,l)=>{var h=Qe(),p=Pe(),v=Ct(),k=ze(),M=Dt(),A=Yn(),z=ln(),ee=qt(),Ne=In(),Me=X(),Ye=V(),ht=Lr(),Et=Yt(),Rt=Jt(),Ft=$t();function fn(Te,Fe,We,gt,et,ft,q){var oe=Rt(Te,We),ye=Rt(Fe,We),ve=q.get(ye);if(ve){h(Te,We,ve);return}var xe=ft?ft(oe,ye,We+"",Te,Fe,q):void 0,Le=xe===void 0;if(Le){var $e=z(ye),Ue=!$e&&Ne(ye),Ze=!$e&&!Ue&&Et(ye);xe=ye,$e||Ue||Ze?z(oe)?xe=oe:ee(oe)?xe=k(oe):Ue?(Le=!1,xe=p(ye,!0)):Ze?(Le=!1,xe=v(ye,!0)):xe=[]:ht(ye)||A(ye)?(xe=oe,A(oe)?xe=Ft(oe):(!Ye(oe)||Me(oe))&&(xe=M(ye))):Le=!1}Le&&(q.set(ye,xe),et(xe,ye,gt,ft,q),q.delete(ye)),h(Te,We,xe)}l.exports=fn}),yo=u((s,l)=>{var h=ce(),p=Qe(),v=Oe(),k=ui(),M=V(),A=$n(),z=Jt();function ee(Ne,Me,Ye,ht,Et){Ne!==Me&&v(Me,function(Rt,Ft){if(Et||(Et=new h),M(Rt))k(Ne,Me,Ft,Ye,ee,ht,Et);else{var fn=ht?ht(z(Ne,Ft),Rt,Ft+"",Ne,Me,Et):void 0;fn===void 0&&(fn=Rt),p(Ne,Ft,fn)}},A)}l.exports=ee}),es=u((s,l)=>{function h(p){return p}l.exports=h}),Ai=u((s,l)=>{function h(p,v,k){switch(k.length){case 0:return p.call(v);case 1:return p.call(v,k[0]);case 2:return p.call(v,k[0],k[1]);case 3:return p.call(v,k[0],k[1],k[2])}return p.apply(v,k)}l.exports=h}),yi=u((s,l)=>{var h=Ai(),p=Math.max;function v(k,M,A){return M=p(M===void 0?k.length-1:M,0),function(){for(var z=arguments,ee=-1,Ne=p(z.length-M,0),Me=Array(Ne);++ee<Ne;)Me[ee]=z[M+ee];ee=-1;for(var Ye=Array(M+1);++ee<M;)Ye[ee]=z[ee];return Ye[M]=A(Me),h(k,this,Ye)}}l.exports=v}),Bi=u((s,l)=>{function h(p){return function(){return p}}l.exports=h}),Qr=u((s,l)=>{var h=Bi(),p=Ge(),v=es(),k=p?function(M,A){return p(M,"toString",{configurable:!0,enumerable:!1,value:h(A),writable:!0})}:v;l.exports=k}),bi=u((s,l)=>{var h=800,p=16,v=Date.now;function k(M){var A=0,z=0;return function(){var ee=v(),Ne=p-(ee-z);if(z=ee,Ne>0){if(++A>=h)return arguments[0]}else A=0;return M.apply(void 0,arguments)}}l.exports=k}),ds=u((s,l)=>{var h=Qr(),p=bi(),v=p(h);l.exports=v}),bo=u((s,l)=>{var h=es(),p=yi(),v=ds();function k(M,A){return v(p(M,A,h),M+"")}l.exports=k}),Go=u((s,l)=>{var h=b(),p=Xn(),v=on(),k=V();function M(A,z,ee){if(!k(ee))return!1;var Ne=typeof z;return(Ne=="number"?p(ee)&&v(z,ee.length):Ne=="string"&&z in ee)?h(ee[z],A):!1}l.exports=M}),Ho=u((s,l)=>{var h=bo(),p=Go();function v(k){return h(function(M,A){var z=-1,ee=A.length,Ne=ee>1?A[ee-1]:void 0,Me=ee>2?A[2]:void 0;for(Ne=k.length>3&&typeof Ne=="function"?(ee--,Ne):void 0,Me&&p(A[0],A[1],Me)&&(Ne=ee<3?void 0:Ne,ee=1),M=Object(M);++z<ee;){var Ye=A[z];Ye&&k(M,Ye,z,Ne)}return M})}l.exports=v}),Bs=u((s,l)=>{var h=yo(),p=Ho(),v=p(function(k,M,A){h(k,M,A)});l.exports=v}),Js=u((s,l)=>{var h=Je(),p=Pn(),v="[object Symbol]";function k(M){return typeof M=="symbol"||p(M)&&h(M)==v}l.exports=k}),wo=u((s,l)=>{var h=ln(),p=Js(),v=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,k=/^\w*$/;function M(A,z){if(h(A))return!1;var ee=typeof A;return ee=="number"||ee=="symbol"||ee=="boolean"||A==null||p(A)?!0:k.test(A)||!v.test(A)||z!=null&&A in Object(z)}l.exports=M}),Ll=u((s,l)=>{var h=De(),p="Expected a function";function v(k,M){if(typeof k!="function"||M!=null&&typeof M!="function")throw new TypeError(p);var A=function(){var z=arguments,ee=M?M.apply(this,z):z[0],Ne=A.cache;if(Ne.has(ee))return Ne.get(ee);var Me=k.apply(this,z);return A.cache=Ne.set(ee,Me)||Ne,Me};return A.cache=new(v.Cache||h),A}v.Cache=h,l.exports=v}),Cl=u((s,l)=>{var h=Ll(),p=500;function v(k){var M=h(k,function(z){return A.size===p&&A.clear(),z}),A=M.cache;return M}l.exports=v}),Wo=u((s,l)=>{var h=Cl(),p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,v=/\\(\\)?/g,k=h(function(M){var A=[];return M.charCodeAt(0)===46&&A.push(""),M.replace(p,function(z,ee,Ne,Me){A.push(Ne?Me.replace(v,"$1"):ee||z)}),A});l.exports=k}),Ha=u((s,l)=>{function h(p,v){for(var k=-1,M=p==null?0:p.length,A=Array(M);++k<M;)A[k]=v(p[k],k,p);return A}l.exports=h}),kl=u((s,l)=>{var h=ie(),p=Ha(),v=ln(),k=Js(),M=h?h.prototype:void 0,A=M?M.toString:void 0;function z(ee){if(typeof ee=="string")return ee;if(v(ee))return p(ee,z)+"";if(k(ee))return A?A.call(ee):"";var Ne=ee+"";return Ne=="0"&&1/ee==-1/0?"-0":Ne}l.exports=z}),xo=u((s,l)=>{var h=kl();function p(v){return v==null?"":h(v)}l.exports=p}),Lo=u((s,l)=>{var h=ln(),p=wo(),v=Wo(),k=xo();function M(A,z){return h(A)?A:p(A,z)?[A]:v(k(A))}l.exports=M}),_a=u((s,l)=>{var h=Js();function p(v){if(typeof v=="string"||h(v))return v;var k=v+"";return k=="0"&&1/v==-1/0?"-0":k}l.exports=p}),Wa=u((s,l)=>{var h=Lo(),p=_a();function v(k,M){M=h(M,k);for(var A=0,z=M.length;k!=null&&A<z;)k=k[p(M[A++])];return A&&A==z?k:void 0}l.exports=v}),wi=u((s,l)=>{var h=Wa();function p(v,k,M){var A=v==null?void 0:h(v,k);return A===void 0?M:A}l.exports=p}),Rn=u((s,l)=>{(function(h,p){typeof s=="object"&&typeof l<"u"?l.exports=p():(h=h||self).RBush=p()})(s,function(){function h(Te,Fe,We,gt,et){(function ft(q,oe,ye,ve,xe){for(;ve>ye;){if(ve-ye>600){var Le=ve-ye+1,$e=oe-ye+1,Ue=Math.log(Le),Ze=.5*Math.exp(2*Ue/3),at=.5*Math.sqrt(Ue*Ze*(Le-Ze)/Le)*($e-Le/2<0?-1:1),st=Math.max(ye,Math.floor(oe-$e*Ze/Le+at)),Mt=Math.min(ve,Math.floor(oe+(Le-$e)*Ze/Le+at));ft(q,oe,st,Mt,xe)}var Wt=q[oe],Xt=ye,tn=ve;for(p(q,ye,oe),xe(q[ve],Wt)>0&&p(q,ye,ve);Xt<tn;){for(p(q,Xt,tn),Xt++,tn--;xe(q[Xt],Wt)<0;)Xt++;for(;xe(q[tn],Wt)>0;)tn--}xe(q[ye],Wt)===0?p(q,ye,tn):p(q,++tn,ve),tn<=oe&&(ye=tn+1),oe<=tn&&(ve=tn-1)}})(Te,Fe,We||0,gt||Te.length-1,et||v)}function p(Te,Fe,We){var gt=Te[Fe];Te[Fe]=Te[We],Te[We]=gt}function v(Te,Fe){return Te<Fe?-1:Te>Fe?1:0}var k=function(Te){Te===void 0&&(Te=9),this._maxEntries=Math.max(4,Te),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function M(Te,Fe,We){if(!We)return Fe.indexOf(Te);for(var gt=0;gt<Fe.length;gt++)if(We(Te,Fe[gt]))return gt;return-1}function A(Te,Fe){z(Te,0,Te.children.length,Fe,Te)}function z(Te,Fe,We,gt,et){et||(et=Ft(null)),et.minX=1/0,et.minY=1/0,et.maxX=-1/0,et.maxY=-1/0;for(var ft=Fe;ft<We;ft++){var q=Te.children[ft];ee(et,Te.leaf?gt(q):q)}return et}function ee(Te,Fe){return Te.minX=Math.min(Te.minX,Fe.minX),Te.minY=Math.min(Te.minY,Fe.minY),Te.maxX=Math.max(Te.maxX,Fe.maxX),Te.maxY=Math.max(Te.maxY,Fe.maxY),Te}function Ne(Te,Fe){return Te.minX-Fe.minX}function Me(Te,Fe){return Te.minY-Fe.minY}function Ye(Te){return(Te.maxX-Te.minX)*(Te.maxY-Te.minY)}function ht(Te){return Te.maxX-Te.minX+(Te.maxY-Te.minY)}function Et(Te,Fe){return Te.minX<=Fe.minX&&Te.minY<=Fe.minY&&Fe.maxX<=Te.maxX&&Fe.maxY<=Te.maxY}function Rt(Te,Fe){return Fe.minX<=Te.maxX&&Fe.minY<=Te.maxY&&Fe.maxX>=Te.minX&&Fe.maxY>=Te.minY}function Ft(Te){return{children:Te,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function fn(Te,Fe,We,gt,et){for(var ft=[Fe,We];ft.length;)if(!((We=ft.pop())-(Fe=ft.pop())<=gt)){var q=Fe+Math.ceil((We-Fe)/gt/2)*gt;h(Te,q,Fe,We,et),ft.push(Fe,q,q,We)}}return k.prototype.all=function(){return this._all(this.data,[])},k.prototype.search=function(Te){var Fe=this.data,We=[];if(!Rt(Te,Fe))return We;for(var gt=this.toBBox,et=[];Fe;){for(var ft=0;ft<Fe.children.length;ft++){var q=Fe.children[ft],oe=Fe.leaf?gt(q):q;Rt(Te,oe)&&(Fe.leaf?We.push(q):Et(Te,oe)?this._all(q,We):et.push(q))}Fe=et.pop()}return We},k.prototype.collides=function(Te){var Fe=this.data;if(!Rt(Te,Fe))return!1;for(var We=[];Fe;){for(var gt=0;gt<Fe.children.length;gt++){var et=Fe.children[gt],ft=Fe.leaf?this.toBBox(et):et;if(Rt(Te,ft)){if(Fe.leaf||Et(Te,ft))return!0;We.push(et)}}Fe=We.pop()}return!1},k.prototype.load=function(Te){if(!Te||!Te.length)return this;if(Te.length<this._minEntries){for(var Fe=0;Fe<Te.length;Fe++)this.insert(Te[Fe]);return this}var We=this._build(Te.slice(),0,Te.length-1,0);if(this.data.children.length)if(this.data.height===We.height)this._splitRoot(this.data,We);else{if(this.data.height<We.height){var gt=this.data;this.data=We,We=gt}this._insert(We,this.data.height-We.height-1,!0)}else this.data=We;return this},k.prototype.insert=function(Te){return Te&&this._insert(Te,this.data.height-1),this},k.prototype.clear=function(){return this.data=Ft([]),this},k.prototype.remove=function(Te,Fe){if(!Te)return this;for(var We,gt,et,ft=this.data,q=this.toBBox(Te),oe=[],ye=[];ft||oe.length;){if(ft||(ft=oe.pop(),gt=oe[oe.length-1],We=ye.pop(),et=!0),ft.leaf){var ve=M(Te,ft.children,Fe);if(ve!==-1)return ft.children.splice(ve,1),oe.push(ft),this._condense(oe),this}et||ft.leaf||!Et(ft,q)?gt?(We++,ft=gt.children[We],et=!1):ft=null:(oe.push(ft),ye.push(We),We=0,gt=ft,ft=ft.children[0])}return this},k.prototype.toBBox=function(Te){return Te},k.prototype.compareMinX=function(Te,Fe){return Te.minX-Fe.minX},k.prototype.compareMinY=function(Te,Fe){return Te.minY-Fe.minY},k.prototype.toJSON=function(){return this.data},k.prototype.fromJSON=function(Te){return this.data=Te,this},k.prototype._all=function(Te,Fe){for(var We=[];Te;)Te.leaf?Fe.push.apply(Fe,Te.children):We.push.apply(We,Te.children),Te=We.pop();return Fe},k.prototype._build=function(Te,Fe,We,gt){var et,ft=We-Fe+1,q=this._maxEntries;if(ft<=q)return A(et=Ft(Te.slice(Fe,We+1)),this.toBBox),et;gt||(gt=Math.ceil(Math.log(ft)/Math.log(q)),q=Math.ceil(ft/Math.pow(q,gt-1))),(et=Ft([])).leaf=!1,et.height=gt;var oe=Math.ceil(ft/q),ye=oe*Math.ceil(Math.sqrt(q));fn(Te,Fe,We,ye,this.compareMinX);for(var ve=Fe;ve<=We;ve+=ye){var xe=Math.min(ve+ye-1,We);fn(Te,ve,xe,oe,this.compareMinY);for(var Le=ve;Le<=xe;Le+=oe){var $e=Math.min(Le+oe-1,xe);et.children.push(this._build(Te,Le,$e,gt-1))}}return A(et,this.toBBox),et},k.prototype._chooseSubtree=function(Te,Fe,We,gt){for(;gt.push(Fe),!Fe.leaf&&gt.length-1!==We;){for(var et=1/0,ft=1/0,q=void 0,oe=0;oe<Fe.children.length;oe++){var ye=Fe.children[oe],ve=Ye(ye),xe=(Le=Te,$e=ye,(Math.max($e.maxX,Le.maxX)-Math.min($e.minX,Le.minX))*(Math.max($e.maxY,Le.maxY)-Math.min($e.minY,Le.minY))-ve);xe<ft?(ft=xe,et=ve<et?ve:et,q=ye):xe===ft&&ve<et&&(et=ve,q=ye)}Fe=q||Fe.children[0]}var Le,$e;return Fe},k.prototype._insert=function(Te,Fe,We){var gt=We?Te:this.toBBox(Te),et=[],ft=this._chooseSubtree(gt,this.data,Fe,et);for(ft.children.push(Te),ee(ft,gt);Fe>=0&&et[Fe].children.length>this._maxEntries;)this._split(et,Fe),Fe--;this._adjustParentBBoxes(gt,et,Fe)},k.prototype._split=function(Te,Fe){var We=Te[Fe],gt=We.children.length,et=this._minEntries;this._chooseSplitAxis(We,et,gt);var ft=this._chooseSplitIndex(We,et,gt),q=Ft(We.children.splice(ft,We.children.length-ft));q.height=We.height,q.leaf=We.leaf,A(We,this.toBBox),A(q,this.toBBox),Fe?Te[Fe-1].children.push(q):this._splitRoot(We,q)},k.prototype._splitRoot=function(Te,Fe){this.data=Ft([Te,Fe]),this.data.height=Te.height+1,this.data.leaf=!1,A(this.data,this.toBBox)},k.prototype._chooseSplitIndex=function(Te,Fe,We){for(var gt,et,ft,q,oe,ye,ve,xe=1/0,Le=1/0,$e=Fe;$e<=We-Fe;$e++){var Ue=z(Te,0,$e,this.toBBox),Ze=z(Te,$e,We,this.toBBox),at=(et=Ue,ft=Ze,q=void 0,oe=void 0,ye=void 0,ve=void 0,q=Math.max(et.minX,ft.minX),oe=Math.max(et.minY,ft.minY),ye=Math.min(et.maxX,ft.maxX),ve=Math.min(et.maxY,ft.maxY),Math.max(0,ye-q)*Math.max(0,ve-oe)),st=Ye(Ue)+Ye(Ze);at<xe?(xe=at,gt=$e,Le=st<Le?st:Le):at===xe&&st<Le&&(Le=st,gt=$e)}return gt||We-Fe},k.prototype._chooseSplitAxis=function(Te,Fe,We){var gt=Te.leaf?this.compareMinX:Ne,et=Te.leaf?this.compareMinY:Me;this._allDistMargin(Te,Fe,We,gt)<this._allDistMargin(Te,Fe,We,et)&&Te.children.sort(gt)},k.prototype._allDistMargin=function(Te,Fe,We,gt){Te.children.sort(gt);for(var et=this.toBBox,ft=z(Te,0,Fe,et),q=z(Te,We-Fe,We,et),oe=ht(ft)+ht(q),ye=Fe;ye<We-Fe;ye++){var ve=Te.children[ye];ee(ft,Te.leaf?et(ve):ve),oe+=ht(ft)}for(var xe=We-Fe-1;xe>=Fe;xe--){var Le=Te.children[xe];ee(q,Te.leaf?et(Le):Le),oe+=ht(q)}return oe},k.prototype._adjustParentBBoxes=function(Te,Fe,We){for(var gt=We;gt>=0;gt--)ee(Fe[gt],Te)},k.prototype._condense=function(Te){for(var Fe=Te.length-1,We=void 0;Fe>=0;Fe--)Te[Fe].children.length===0?Fe>0?(We=Te[Fe-1].children).splice(We.indexOf(Te[Fe]),1):this.clear():A(Te[Fe],this.toBBox)},k})}),_n=u(s=>{Object.defineProperty(s,"__esModule",{value:!0}),s.earthRadius=63710088e-1,s.factors={centimeters:s.earthRadius*100,centimetres:s.earthRadius*100,degrees:s.earthRadius/111325,feet:s.earthRadius*3.28084,inches:s.earthRadius*39.37,kilometers:s.earthRadius/1e3,kilometres:s.earthRadius/1e3,meters:s.earthRadius,metres:s.earthRadius,miles:s.earthRadius/1609.344,millimeters:s.earthRadius*1e3,millimetres:s.earthRadius*1e3,nauticalmiles:s.earthRadius/1852,radians:1,yards:s.earthRadius*1.0936},s.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/s.earthRadius,yards:1.0936133},s.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function l(ve,xe,Le){Le===void 0&&(Le={});var $e={type:"Feature"};return(Le.id===0||Le.id)&&($e.id=Le.id),Le.bbox&&($e.bbox=Le.bbox),$e.properties=xe||{},$e.geometry=ve,$e}s.feature=l;function h(ve,xe,Le){switch(ve){case"Point":return p(xe).geometry;case"LineString":return A(xe).geometry;case"Polygon":return k(xe).geometry;case"MultiPoint":return Me(xe).geometry;case"MultiLineString":return Ne(xe).geometry;case"MultiPolygon":return Ye(xe).geometry;default:throw new Error(ve+" is invalid")}}s.geometry=h;function p(ve,xe,Le){if(Le===void 0&&(Le={}),!ve)throw new Error("coordinates is required");if(!Array.isArray(ve))throw new Error("coordinates must be an Array");if(ve.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ft(ve[0])||!ft(ve[1]))throw new Error("coordinates must contain numbers");var $e={type:"Point",coordinates:ve};return l($e,xe,Le)}s.point=p;function v(ve,xe,Le){return Le===void 0&&(Le={}),ee(ve.map(function($e){return p($e,xe)}),Le)}s.points=v;function k(ve,xe,Le){Le===void 0&&(Le={});for(var $e=0,Ue=ve;$e<Ue.length;$e++){var Ze=Ue[$e];if(Ze.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var at=0;at<Ze[Ze.length-1].length;at++)if(Ze[Ze.length-1][at]!==Ze[0][at])throw new Error("First and last Position are not equivalent.")}var st={type:"Polygon",coordinates:ve};return l(st,xe,Le)}s.polygon=k;function M(ve,xe,Le){return Le===void 0&&(Le={}),ee(ve.map(function($e){return k($e,xe)}),Le)}s.polygons=M;function A(ve,xe,Le){if(Le===void 0&&(Le={}),ve.length<2)throw new Error("coordinates must be an array of two or more positions");var $e={type:"LineString",coordinates:ve};return l($e,xe,Le)}s.lineString=A;function z(ve,xe,Le){return Le===void 0&&(Le={}),ee(ve.map(function($e){return A($e,xe)}),Le)}s.lineStrings=z;function ee(ve,xe){xe===void 0&&(xe={});var Le={type:"FeatureCollection"};return xe.id&&(Le.id=xe.id),xe.bbox&&(Le.bbox=xe.bbox),Le.features=ve,Le}s.featureCollection=ee;function Ne(ve,xe,Le){Le===void 0&&(Le={});var $e={type:"MultiLineString",coordinates:ve};return l($e,xe,Le)}s.multiLineString=Ne;function Me(ve,xe,Le){Le===void 0&&(Le={});var $e={type:"MultiPoint",coordinates:ve};return l($e,xe,Le)}s.multiPoint=Me;function Ye(ve,xe,Le){Le===void 0&&(Le={});var $e={type:"MultiPolygon",coordinates:ve};return l($e,xe,Le)}s.multiPolygon=Ye;function ht(ve,xe,Le){Le===void 0&&(Le={});var $e={type:"GeometryCollection",geometries:ve};return l($e,xe,Le)}s.geometryCollection=ht;function Et(ve,xe){if(xe===void 0&&(xe=0),xe&&!(xe>=0))throw new Error("precision must be a positive number");var Le=Math.pow(10,xe||0);return Math.round(ve*Le)/Le}s.round=Et;function Rt(ve,xe){xe===void 0&&(xe="kilometers");var Le=s.factors[xe];if(!Le)throw new Error(xe+" units is invalid");return ve*Le}s.radiansToLength=Rt;function Ft(ve,xe){xe===void 0&&(xe="kilometers");var Le=s.factors[xe];if(!Le)throw new Error(xe+" units is invalid");return ve/Le}s.lengthToRadians=Ft;function fn(ve,xe){return Fe(Ft(ve,xe))}s.lengthToDegrees=fn;function Te(ve){var xe=ve%360;return xe<0&&(xe+=360),xe}s.bearingToAzimuth=Te;function Fe(ve){var xe=ve%(2*Math.PI);return xe*180/Math.PI}s.radiansToDegrees=Fe;function We(ve){var xe=ve%360;return xe*Math.PI/180}s.degreesToRadians=We;function gt(ve,xe,Le){if(xe===void 0&&(xe="kilometers"),Le===void 0&&(Le="kilometers"),!(ve>=0))throw new Error("length must be a positive number");return Rt(Ft(ve,xe),Le)}s.convertLength=gt;function et(ve,xe,Le){if(xe===void 0&&(xe="meters"),Le===void 0&&(Le="kilometers"),!(ve>=0))throw new Error("area must be a positive number");var $e=s.areaFactors[xe];if(!$e)throw new Error("invalid original units");var Ue=s.areaFactors[Le];if(!Ue)throw new Error("invalid final units");return ve/$e*Ue}s.convertArea=et;function ft(ve){return!isNaN(ve)&&ve!==null&&!Array.isArray(ve)}s.isNumber=ft;function q(ve){return!!ve&&ve.constructor===Object}s.isObject=q;function oe(ve){if(!ve)throw new Error("bbox is required");if(!Array.isArray(ve))throw new Error("bbox must be an Array");if(ve.length!==4&&ve.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");ve.forEach(function(xe){if(!ft(xe))throw new Error("bbox must only contain numbers")})}s.validateBBox=oe;function ye(ve){if(!ve)throw new Error("id is required");if(["string","number"].indexOf(typeof ve)===-1)throw new Error("id must be a number or a string")}s.validateId=ye}),Ys=u(s=>{Object.defineProperty(s,"__esModule",{value:!0});var l=_n();function h(Fe,We,gt){if(Fe!==null)for(var et,ft,q,oe,ye,ve,xe,Le=0,$e=0,Ue,Ze=Fe.type,at=Ze==="FeatureCollection",st=Ze==="Feature",Mt=at?Fe.features.length:1,Wt=0;Wt<Mt;Wt++){xe=at?Fe.features[Wt].geometry:st?Fe.geometry:Fe,Ue=xe?xe.type==="GeometryCollection":!1,ye=Ue?xe.geometries.length:1;for(var Xt=0;Xt<ye;Xt++){var tn=0,Un=0;if(oe=Ue?xe.geometries[Xt]:xe,oe!==null){ve=oe.coordinates;var Hn=oe.type;switch(Le=gt&&(Hn==="Polygon"||Hn==="MultiPolygon")?1:0,Hn){case null:break;case"Point":if(We(ve,$e,Wt,tn,Un)===!1)return!1;$e++,tn++;break;case"LineString":case"MultiPoint":for(et=0;et<ve.length;et++){if(We(ve[et],$e,Wt,tn,Un)===!1)return!1;$e++,Hn==="MultiPoint"&&tn++}Hn==="LineString"&&tn++;break;case"Polygon":case"MultiLineString":for(et=0;et<ve.length;et++){for(ft=0;ft<ve[et].length-Le;ft++){if(We(ve[et][ft],$e,Wt,tn,Un)===!1)return!1;$e++}Hn==="MultiLineString"&&tn++,Hn==="Polygon"&&Un++}Hn==="Polygon"&&tn++;break;case"MultiPolygon":for(et=0;et<ve.length;et++){for(Un=0,ft=0;ft<ve[et].length;ft++){for(q=0;q<ve[et][ft].length-Le;q++){if(We(ve[et][ft][q],$e,Wt,tn,Un)===!1)return!1;$e++}Un++}tn++}break;case"GeometryCollection":for(et=0;et<oe.geometries.length;et++)if(h(oe.geometries[et],We,gt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function p(Fe,We,gt,et){var ft=gt;return h(Fe,function(q,oe,ye,ve,xe){oe===0&&gt===void 0?ft=q:ft=We(ft,q,oe,ye,ve,xe)},et),ft}function v(Fe,We){var gt;switch(Fe.type){case"FeatureCollection":for(gt=0;gt<Fe.features.length&&We(Fe.features[gt].properties,gt)!==!1;gt++);break;case"Feature":We(Fe.properties,0);break}}function k(Fe,We,gt){var et=gt;return v(Fe,function(ft,q){q===0&&gt===void 0?et=ft:et=We(et,ft,q)}),et}function M(Fe,We){if(Fe.type==="Feature")We(Fe,0);else if(Fe.type==="FeatureCollection")for(var gt=0;gt<Fe.features.length&&We(Fe.features[gt],gt)!==!1;gt++);}function A(Fe,We,gt){var et=gt;return M(Fe,function(ft,q){q===0&&gt===void 0?et=ft:et=We(et,ft,q)}),et}function z(Fe){var We=[];return h(Fe,function(gt){We.push(gt)}),We}function ee(Fe,We){var gt,et,ft,q,oe,ye,ve,xe,Le,$e,Ue=0,Ze=Fe.type==="FeatureCollection",at=Fe.type==="Feature",st=Ze?Fe.features.length:1;for(gt=0;gt<st;gt++){for(ye=Ze?Fe.features[gt].geometry:at?Fe.geometry:Fe,xe=Ze?Fe.features[gt].properties:at?Fe.properties:{},Le=Ze?Fe.features[gt].bbox:at?Fe.bbox:void 0,$e=Ze?Fe.features[gt].id:at?Fe.id:void 0,ve=ye?ye.type==="GeometryCollection":!1,oe=ve?ye.geometries.length:1,ft=0;ft<oe;ft++){if(q=ve?ye.geometries[ft]:ye,q===null){if(We(null,Ue,xe,Le,$e)===!1)return!1;continue}switch(q.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(We(q,Ue,xe,Le,$e)===!1)return!1;break}case"GeometryCollection":{for(et=0;et<q.geometries.length;et++)if(We(q.geometries[et],Ue,xe,Le,$e)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}Ue++}}function Ne(Fe,We,gt){var et=gt;return ee(Fe,function(ft,q,oe,ye,ve){q===0&&gt===void 0?et=ft:et=We(et,ft,q,oe,ye,ve)}),et}function Me(Fe,We){ee(Fe,function(gt,et,ft,q,oe){var ye=gt===null?null:gt.type;switch(ye){case null:case"Point":case"LineString":case"Polygon":return We(l.feature(gt,ft,{bbox:q,id:oe}),et,0)===!1?!1:void 0}var ve;switch(ye){case"MultiPoint":ve="Point";break;case"MultiLineString":ve="LineString";break;case"MultiPolygon":ve="Polygon";break}for(var xe=0;xe<gt.coordinates.length;xe++){var Le=gt.coordinates[xe],$e={type:ve,coordinates:Le};if(We(l.feature($e,ft),et,xe)===!1)return!1}})}function Ye(Fe,We,gt){var et=gt;return Me(Fe,function(ft,q,oe){q===0&&oe===0&&gt===void 0?et=ft:et=We(et,ft,q,oe)}),et}function ht(Fe,We){Me(Fe,function(gt,et,ft){var q=0;if(gt.geometry){var oe=gt.geometry.type;if(!(oe==="Point"||oe==="MultiPoint")){var ye,ve=0,xe=0,Le=0;if(h(gt,function($e,Ue,Ze,at,st){if(ye===void 0||et>ve||at>xe||st>Le){ye=$e,ve=et,xe=at,Le=st,q=0;return}var Mt=l.lineString([ye,$e],gt.properties);if(We(Mt,et,ft,st,q)===!1)return!1;q++,ye=$e})===!1)return!1}}})}function Et(Fe,We,gt){var et=gt,ft=!1;return ht(Fe,function(q,oe,ye,ve,xe){ft===!1&&gt===void 0?et=q:et=We(et,q,oe,ye,ve,xe),ft=!0}),et}function Rt(Fe,We){if(!Fe)throw new Error("geojson is required");Me(Fe,function(gt,et,ft){if(gt.geometry!==null){var q=gt.geometry.type,oe=gt.geometry.coordinates;switch(q){case"LineString":if(We(gt,et,ft,0,0)===!1)return!1;break;case"Polygon":for(var ye=0;ye<oe.length;ye++)if(We(l.lineString(oe[ye],gt.properties),et,ft,ye)===!1)return!1;break}}})}function Ft(Fe,We,gt){var et=gt;return Rt(Fe,function(ft,q,oe,ye){q===0&&gt===void 0?et=ft:et=We(et,ft,q,oe,ye)}),et}function fn(Fe,We){if(We=We||{},!l.isObject(We))throw new Error("options is invalid");var gt=We.featureIndex||0,et=We.multiFeatureIndex||0,ft=We.geometryIndex||0,q=We.segmentIndex||0,oe=We.properties,ye;switch(Fe.type){case"FeatureCollection":gt<0&&(gt=Fe.features.length+gt),oe=oe||Fe.features[gt].properties,ye=Fe.features[gt].geometry;break;case"Feature":oe=oe||Fe.properties,ye=Fe.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":ye=Fe;break;default:throw new Error("geojson is invalid")}if(ye===null)return null;var ve=ye.coordinates;switch(ye.type){case"Point":case"MultiPoint":return null;case"LineString":return q<0&&(q=ve.length+q-1),l.lineString([ve[q],ve[q+1]],oe,We);case"Polygon":return ft<0&&(ft=ve.length+ft),q<0&&(q=ve[ft].length+q-1),l.lineString([ve[ft][q],ve[ft][q+1]],oe,We);case"MultiLineString":return et<0&&(et=ve.length+et),q<0&&(q=ve[et].length+q-1),l.lineString([ve[et][q],ve[et][q+1]],oe,We);case"MultiPolygon":return et<0&&(et=ve.length+et),ft<0&&(ft=ve[et].length+ft),q<0&&(q=ve[et][ft].length-q-1),l.lineString([ve[et][ft][q],ve[et][ft][q+1]],oe,We)}throw new Error("geojson is invalid")}function Te(Fe,We){if(We=We||{},!l.isObject(We))throw new Error("options is invalid");var gt=We.featureIndex||0,et=We.multiFeatureIndex||0,ft=We.geometryIndex||0,q=We.coordIndex||0,oe=We.properties,ye;switch(Fe.type){case"FeatureCollection":gt<0&&(gt=Fe.features.length+gt),oe=oe||Fe.features[gt].properties,ye=Fe.features[gt].geometry;break;case"Feature":oe=oe||Fe.properties,ye=Fe.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":ye=Fe;break;default:throw new Error("geojson is invalid")}if(ye===null)return null;var ve=ye.coordinates;switch(ye.type){case"Point":return l.point(ve,oe,We);case"MultiPoint":return et<0&&(et=ve.length+et),l.point(ve[et],oe,We);case"LineString":return q<0&&(q=ve.length+q),l.point(ve[q],oe,We);case"Polygon":return ft<0&&(ft=ve.length+ft),q<0&&(q=ve[ft].length+q),l.point(ve[ft][q],oe,We);case"MultiLineString":return et<0&&(et=ve.length+et),q<0&&(q=ve[et].length+q),l.point(ve[et][q],oe,We);case"MultiPolygon":return et<0&&(et=ve.length+et),ft<0&&(ft=ve[et].length+ft),q<0&&(q=ve[et][ft].length-q),l.point(ve[et][ft][q],oe,We)}throw new Error("geojson is invalid")}s.coordAll=z,s.coordEach=h,s.coordReduce=p,s.featureEach=M,s.featureReduce=A,s.findPoint=Te,s.findSegment=fn,s.flattenEach=Me,s.flattenReduce=Ye,s.geomEach=ee,s.geomReduce=Ne,s.lineEach=Rt,s.lineReduce=Ft,s.propEach=v,s.propReduce=k,s.segmentEach=ht,s.segmentReduce=Et}),Ts=u(s=>{Object.defineProperty(s,"__esModule",{value:!0});var l=Ys();function h(p){var v=[1/0,1/0,-1/0,-1/0];return l.coordEach(p,function(k){v[0]>k[0]&&(v[0]=k[0]),v[1]>k[1]&&(v[1]=k[1]),v[2]<k[0]&&(v[2]=k[0]),v[3]<k[1]&&(v[3]=k[1])}),v}h.default=h,s.default=h}),ps=u((s,l)=>{var h=Rn(),p=_n(),v=Ys(),k=Ts().default,M=v.featureEach;v.coordEach,p.polygon;var A=p.featureCollection;function z(ee){var Ne=new h(ee);return Ne.insert=function(Me){if(Me.type!=="Feature")throw new Error("invalid feature");return Me.bbox=Me.bbox?Me.bbox:k(Me),h.prototype.insert.call(this,Me)},Ne.load=function(Me){var Ye=[];return Array.isArray(Me)?Me.forEach(function(ht){if(ht.type!=="Feature")throw new Error("invalid features");ht.bbox=ht.bbox?ht.bbox:k(ht),Ye.push(ht)}):M(Me,function(ht){if(ht.type!=="Feature")throw new Error("invalid features");ht.bbox=ht.bbox?ht.bbox:k(ht),Ye.push(ht)}),h.prototype.load.call(this,Ye)},Ne.remove=function(Me,Ye){if(Me.type!=="Feature")throw new Error("invalid feature");return Me.bbox=Me.bbox?Me.bbox:k(Me),h.prototype.remove.call(this,Me,Ye)},Ne.clear=function(){return h.prototype.clear.call(this)},Ne.search=function(Me){var Ye=h.prototype.search.call(this,this.toBBox(Me));return A(Ye)},Ne.collides=function(Me){return h.prototype.collides.call(this,this.toBBox(Me))},Ne.all=function(){var Me=h.prototype.all.call(this);return A(Me)},Ne.toJSON=function(){return h.prototype.toJSON.call(this)},Ne.fromJSON=function(Me){return h.prototype.fromJSON.call(this,Me)},Ne.toBBox=function(Me){var Ye;if(Me.bbox)Ye=Me.bbox;else if(Array.isArray(Me)&&Me.length===4)Ye=Me;else if(Array.isArray(Me)&&Me.length===6)Ye=[Me[0],Me[1],Me[3],Me[4]];else if(Me.type==="Feature")Ye=k(Me);else if(Me.type==="FeatureCollection")Ye=k(Me);else throw new Error("invalid geojson");return{minX:Ye[0],minY:Ye[1],maxX:Ye[2],maxY:Ye[3]}},Ne}l.exports=z,l.exports.default=z});Array.prototype.findIndex=Array.prototype.findIndex||function(s){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof s!="function")throw new TypeError("callback must be a function");for(var l=Object(this),h=l.length>>>0,p=arguments[1],v=0;v<h;v++)if(s.call(p,l[v],v,l))return v;return-1},Array.prototype.find=Array.prototype.find||function(s){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof s!="function")throw new TypeError("callback must be a function");for(var l=Object(this),h=l.length>>>0,p=arguments[1],v=0;v<h;v++){var k=l[v];if(s.call(p,k,v,l))return k}},typeof Object.assign!="function"&&(Object.assign=function(s){if(s==null)throw new TypeError("Cannot convert undefined or null to object");s=Object(s);for(var l=1;l<arguments.length;l++){var h=arguments[l];if(h!=null)for(var p in h)Object.prototype.hasOwnProperty.call(h,p)&&(s[p]=h[p])}return s}),function(s){s.forEach(function(l){l.hasOwnProperty("remove")||Object.defineProperty(l,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(s,l){if(this==null)throw new TypeError('"this" is null or not defined');var h=Object(this),p=h.length>>>0;if(p===0)return!1;var v=l|0,k=Math.max(v>=0?v:p-Math.abs(v),0);function M(A,z){return A===z||typeof A=="number"&&typeof z=="number"&&isNaN(A)&&isNaN(z)}for(;k<p;){if(M(h[k],s))return!0;k++}return!1}});var Co={version:"2.18.3"},bn=m(Bs()),zn={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},Xs={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex lschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer lschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Lnge",segmentLength:"Segment Lnge",area:"Flche",radius:"Radius",perimeter:"Umfang",height:"Hhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},Or={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},$r={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},Za={tooltips:{placeMarker:"Adaug un punct",firstVertex:"Apas aici pentru a aduga primul Vertex",continueLine:"Apas aici pentru a continua desenul",finishLine:"Apas pe orice obiect pentru a finisa desenul",finishPoly:"Apas pe primul obiect pentru a finisa",finishRect:"Apas pentru a finisa",startCircle:"Apas pentru a desena un cerc",finishCircle:"Apas pentru a finisa un cerc",placeCircleMarker:"Adaug un punct"},actions:{finish:"Termin",cancel:"Anuleaz",removeLastVertex:"terge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaug o bulin",drawPolyButton:"Deseneaz un poligon",drawLineButton:"Deseneaz o linie",drawCircleButton:"Deseneaz un cerc",drawRectButton:"Deseneaz un dreptunghi",editButton:"Editeaz straturile",dragButton:"Mut straturile",cutButton:"Taie straturile",deleteButton:"terge straturile",drawCircleMarkerButton:"Deseneaz marcatorul cercului",snappingButton:"Fixai marcatorul glisat pe alte straturi i vrfuri",pinningButton:"Fixai vrfurile partajate mpreun",rotateButton:"Rotii stratul"}},Zo={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:"     ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" "}},ms={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vrtice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del crculo",finishCircle:"Presiona para finalizar el crculo",placeCircleMarker:"Presiona para colocar un marcador de crculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar ltimo vrtice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polgono",drawLineButton:"Dibujar Lnea",drawCircleButton:"Dibujar Crculo",drawRectButton:"Dibujar Rectngulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Crculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vrtices",pinningButton:"Fijar juntos los vrtices compartidos",rotateButton:"Rotar capa"}},cr={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beindigen",finishPoly:"Klik op het eerst punt om te beindigen",finishRect:"Klik om te beindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},gs={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer  dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"diter des calques",dragButton:"Dplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"pingler ensemble les sommets partags",rotateButton:"Tourner des calques"}},ko={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},Ns={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},ya={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vrtice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do crculo",finishCircle:"Clique para finalizar o crculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover ltimo vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},Qs={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vrtice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do crculo",finishCircle:"Clique para terminar o crculo",placeCircleMarker:"Clique para colocar marcador de crculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover ltimo Vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},ba={tooltips:{placeMarker:"Kliknij, aby umieci znacznik",firstVertex:"Kliknij, aby umieci pierwszy wierzchoek",continueLine:"Kliknij, aby kontynuowa rysowanie",finishLine:"Kliknij dowolny istniejcy znacznik, aby zakoczy",finishPoly:"Kliknij pierwszy znacznik, aby zakoczy",finishRect:"Kliknij, aby zakoczy",startCircle:"Kliknij, aby umieci rodek okrgu",finishCircle:"Kliknij, aby zakoczy okrg",placeCircleMarker:"Kliknij, aby umieci znacznik okrgu",placeText:"Kliknij, aby umieci tekst"},actions:{finish:"Zakocz",cancel:"Anuluj",removeLastVertex:"Usu ostatni wierzchoek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokt",drawLineButton:"Rysuj lini",drawCircleButton:"Rysuj okrg",drawRectButton:"Rysuj prostokt",editButton:"Edytuj warstwy",dragButton:"Przecignij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usu warstwy",drawCircleMarkerButton:"Rysuj znacznik okrgy",snappingButton:"Przycignij przenoszony znacznik do innych warstw i wierzchokw",pinningButton:"Przypnij wsplne wierzchoki razem",rotateButton:"Obr warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne ledzenie linii"},measurements:{totalLength:"Dugo",segmentLength:"Dugo odcinka",area:"Obszar",radius:"Promie",perimeter:"Obwd",height:"Wysoko",width:"Szeroko",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},ts={tooltips:{placeMarker:"Klicka fr att placera markr",firstVertex:"Klicka fr att placera frsta hrnet",continueLine:"Klicka fr att fortstta rita",finishLine:"Klicka p en existerande punkt fr att slutfra",finishPoly:"Klicka p den frsta punkten fr att slutfra",finishRect:"Klicka fr att slutfra",startCircle:"Klicka fr att placera cirkelns centrum",finishCircle:"Klicka fr att slutfra cirkeln",placeCircleMarker:"Klicka fr att placera cirkelmarkr"},actions:{finish:"Slutfr",cancel:"Avbryt",removeLastVertex:"Ta bort sista hrnet"},buttonTitles:{drawMarkerButton:"Rita Markr",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkr",snappingButton:"Snpp dra markren till andra lager och hrn",pinningButton:"Fst delade hrn tillsammans",rotateButton:"Rotera lagret"}},Ds={tooltips:{placeMarker:"     ",firstVertex:"       ",continueLine:"      ",finishLine:"        ",finishPoly:"       ",finishRect:"    ",startCircle:"      ",finishCircle:"      ",placeCircleMarker:"      "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"        ",pinningButton:"   ",rotateButton:"  "}},eo={tooltips:{placeMarker:"Kattintson a jell elhelyezshez",firstVertex:"Kattintson az els pont elhelyezshez",continueLine:"Kattintson a kvetkez pont elhelyezshez",finishLine:"A befejezshez kattintson egy meglv pontra",finishPoly:"A befejezshez kattintson az els pontra",finishRect:"Kattintson a befejezshez",startCircle:"Kattintson a kr kzppontjnak elhelyezshez",finishCircle:"Kattintson a kr befejezshez",placeCircleMarker:"Kattintson a krjell elhelyezshez"},actions:{finish:"Befejezs",cancel:"Mgse",removeLastVertex:"Utols pont eltvoltsa"},buttonTitles:{drawMarkerButton:"Jell rajzolsa",drawPolyButton:"Poligon rajzolsa",drawLineButton:"Vonal rajzolsa",drawCircleButton:"Kr rajzolsa",drawRectButton:"Ngyzet rajzolsa",editButton:"Elemek szerkesztse",dragButton:"Elemek mozgatsa",cutButton:"Elemek vgsa",deleteButton:"Elemek trlse",drawCircleMarkerButton:"Kr jell rajzolsa",snappingButton:"Kapcsolja a jelltt msik elemhez vagy ponthoz",pinningButton:"Kzs pontok sszektse",rotateButton:"Flia elforgatsa"}},Ko={tooltips:{placeMarker:"Tryk for at placere en markr",firstVertex:"Tryk for at placere det frste punkt",continueLine:"Tryk for at fortstte linjen",finishLine:"Tryk p et eksisterende punkt for at afslutte",finishPoly:"Tryk p det frste punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkr"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markr",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Trk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkr",snappingButton:"Fastgr trukket markr til andre elementer",pinningButton:"Sammenlg delte elementer",rotateButton:"Roter laget"}},Cr={tooltips:{placeMarker:"Klikk for  plassere punkt",firstVertex:"Klikk for  plassere frste punkt",continueLine:"Klikk for  tegne videre",finishLine:"Klikk p et eksisterende punkt for  fullfre",finishPoly:"Klikk frste punkt for  fullfre",finishRect:"Klikk for  fullfre",startCircle:"Klikk for  sette sirkel midtpunkt",finishCircle:"Klikk for  fullfre sirkel",placeCircleMarker:"Klikk for  plassere sirkel",placeText:"Klikk for  plassere tekst"},actions:{finish:"Fullfr",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotr objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalr objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Omrde",radius:"Radius",perimeter:"Omriss",height:"Hyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkr"}},Ka={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"   ",finishLine:"      ",finishPoly:"     ",finishRect:"  ",startCircle:"    ",finishCircle:"    ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"      ",rotateButton:" ",drawTextButton:" ",scaleButton:"",autoTracingButton:" "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},Jo={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:" -    ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"'   ",rotateButton:" "}},gn={tooltips:{placeMarker:"areti yerletirmek iin tklayn",firstVertex:"lk tepe noktasn yerletirmek iin tklayn",continueLine:"izime devam etmek iin tklayn",finishLine:"Bitirmek iin mevcut herhangi bir iaretiyi tklayn",finishPoly:"Bitirmek iin ilk iaretiyi tklayn",finishRect:"Bitirmek iin tklayn",startCircle:"Daire merkezine yerletirmek iin tklayn",finishCircle:"Daireyi bitirmek iin tklayn",placeCircleMarker:"Daire iaretisi yerletirmek iin tklayn"},actions:{finish:"Bitir",cancel:"ptal",removeLastVertex:"Son keyi kaldr"},buttonTitles:{drawMarkerButton:"izim aretisi",drawPolyButton:"okgenler iz",drawLineButton:"oklu izgi iz",drawCircleButton:"ember iz",drawRectButton:"Dikdrtgen iz",editButton:"Katmanlar dzenle",dragButton:"Katmanlar srkle",cutButton:"Katmanlar kes",deleteButton:"Katmanlar kaldr",drawCircleMarkerButton:"Daire iaretisi iz",snappingButton:"Srklenen iaretiyi dier katmanlara ve kelere yaptr",pinningButton:"Paylalan keleri birbirine sabitle",rotateButton:"Katman dndr"}},yn={tooltips:{placeMarker:"Kliknutm vytvote znaku",firstVertex:"Kliknutm vytvote prvn objekt",continueLine:"Kliknutm pokraujte v kreslen",finishLine:"Kliknut na libovolnou existujc znaku pro dokonen",finishPoly:"Vyberte prvn bod pro dokonen",finishRect:"Kliknte pro dokonen",startCircle:"Kliknutm pidejte sted kruhu",finishCircle:",   ",placeCircleMarker:"Kliknutm nastavte polomr"},actions:{finish:"Dokonit",cancel:"Zruit",removeLastVertex:"Zruit posledn akci"},buttonTitles:{drawMarkerButton:"Pidat znaku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit kivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdlnk",editButton:"Upravit vrstvu",dragButton:"Peneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Pidat kruhovou znaku",snappingButton:"Navzat tanou znaku k dalm vrstvm a vrcholm",pinningButton:"Spojit spolen body dohromady",rotateButton:"Otote vrstvu"}},Ti={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:"",placeText:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:"",drawTextButton:""}},Dn={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtmist",finishLine:"Klikkaa olemassa olevaa merkki lopettaaksesi",finishPoly:"Klikkaa ensimmist merkki lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrn keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrn",placeCircleMarker:"Klikkaa asettaaksesi ympyrmerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirr merkkej",drawPolyButton:"Piirr monikulmioita",drawLineButton:"Piirr viivoja",drawCircleButton:"Piirr ympyr",drawRectButton:"Piirr neliskulmioita",editButton:"Muokkaa",dragButton:"Siirr",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirr ympyrmerkki",snappingButton:"Kiinnit siirrettv merkki toisiin muotoihin",pinningButton:"Kiinnit jaetut muodot yhteen",rotateButton:"Knn",drawTextButton:"Piirr teksti"}},wa={tooltips:{placeMarker:"  ",firstVertex:"   ",continueLine:"  ",finishLine:"   ",finishPoly:"   ",finishRect:" ",startCircle:"    ",finishCircle:"  ",placeCircleMarker:"   ",placeText:"  "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" ",drawTextButton:" "}},Yo={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"    ",finishLine:"    ",finishPoly:"    ",finishRect:"  ",startCircle:"    ",finishCircle:"   ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:" ",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:"  ",cutButton:"  ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"     ",pinningButton:"   ",rotateButton:" ",drawTextButton:" ",scaleButton:"  ",autoTracingButton:"  "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},to=Qs,Ni={en:zn,de:Xs,it:Or,id:$r,ro:Za,ru:Zo,es:ms,nl:cr,fr:gs,pt:to,pt_br:ya,pt_pt:Qs,zh:ko,zh_tw:Ns,pl:ba,sv:ts,el:Ds,hu:eo,da:Ko,no:Cr,fa:Ka,ua:Jo,tr:gn,cz:yn,ja:Ti,fi:Dn,ko:wa,ky:Yo},Os={_globalEditModeEnabled:!1,enableGlobalEditMode(s){let l={...s};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(h=>{this._isRelevantForEdit(h)&&h.pm.enable(l)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(s=>{s.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(s=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(s)},handleLayerAdditionInGlobalEditMode(){let s=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let l in s){let h=s[l];this._isRelevantForEdit(h)&&h.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:s}){this._addedLayersEdit[L.stamp(s)]=s},_isRelevantForEdit(s){return s.pm&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.allowEditing}},xa=Os,Po={_globalDragModeEnabled:!1,enableGlobalDragMode(){let s=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},s.forEach(l=>{this._isRelevantForDrag(l)&&l.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let s=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,s.forEach(l=>{l.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let s=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let l in s){let h=s[l];this._isRelevantForDrag(h)&&h.pm.enableLayerDrag()}},_layerAddedDrag({layer:s}){this._addedLayersDrag[L.stamp(s)]=s},_isRelevantForDrag(s){return s.pm&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.draggable}},mr=Po,xi={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(s=>{this._isRelevantForRemoval(s)&&(s.pm.enabled()&&s.pm.disable(),s.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(s=>{s.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(s){let l=s.target;this._isRelevantForRemoval(l)&&!l.pm.dragging()&&(l.removeFrom(this.map.pm._getContainingLayer()),l.remove(),l instanceof L.LayerGroup?(this._fireRemoveLayerGroup(l),this._fireRemoveLayerGroup(this.map,l)):(l.pm._fireRemove(l),l.pm._fireRemove(this.map,l)))},_isRelevantForRemoval(s){return s.pm&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let s=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let l in s){let h=s[l];this._isRelevantForRemoval(h)&&(h.pm.enabled()&&h.pm.disable(),h.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:s}){this._addedLayersRemoval[L.stamp(s)]=s}},Rs=xi,Ja={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(s=>s instanceof L.Polyline).forEach(s=>{this._isRelevantForRotate(s)&&s.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(s=>s instanceof L.Polyline).forEach(s=>{s.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(s){return s.pm&&s instanceof L.Polyline&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let s=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let l in s){let h=s[l];this._isRelevantForRemoval(h)&&h.pm.enableRotate()}},_layerAddedRotate({layer:s}){this._addedLayersRotate[L.stamp(s)]=s}},Eo=Ja,Xo=m(Bs()),no={_fireDrawStart(s="Draw",l={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},s,l)},_fireDrawEnd(s="Draw",l={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},s,l)},_fireCreate(s,l="Draw",h={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:s,layer:s},l,h)},_fireCenterPlaced(s="Draw",l={}){let h=s==="Draw"?this._layer:void 0,p=s!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:h,layer:p,latlng:this._layer.getLatLng()},s,l)},_fireCut(s,l,h,p="Draw",v={}){this.__fire(s,"pm:cut",{shape:this._shape,layer:l,originalLayer:h},p,v)},_fireEdit(s=this._layer,l="Edit",h={}){this.__fire(s,"pm:edit",{layer:this._layer,shape:this.getShape()},l,h)},_fireEnable(s="Edit",l={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},s,l)},_fireDisable(s="Edit",l={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},s,l)},_fireUpdate(s="Edit",l={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},s,l)},_fireMarkerDragStart(s,l=void 0,h="Edit",p={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:s,shape:this.getShape(),indexPath:l},h,p)},_fireMarkerDrag(s,l=void 0,h="Edit",p={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:s,shape:this.getShape(),indexPath:l},h,p)},_fireMarkerDragEnd(s,l=void 0,h=void 0,p="Edit",v={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:s,shape:this.getShape(),indexPath:l,intersectionReset:h},p,v)},_fireDragStart(s="Edit",l={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},s,l)},_fireDrag(s,l="Edit",h={}){this.__fire(this._layer,"pm:drag",{...s,shape:this.getShape()},l,h)},_fireDragEnd(s="Edit",l={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},s,l)},_fireDragEnable(s="Edit",l={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},s,l)},_fireDragDisable(s="Edit",l={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},s,l)},_fireRemove(s,l=s,h="Edit",p={}){this.__fire(s,"pm:remove",{layer:l,shape:this.getShape()},h,p)},_fireVertexAdded(s,l,h,p="Edit",v={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:s,indexPath:l,latlng:h,shape:this.getShape()},p,v)},_fireVertexRemoved(s,l,h="Edit",p={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:s,indexPath:l,shape:this.getShape()},h,p)},_fireVertexClick(s,l,h="Edit",p={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:s,indexPath:l,shape:this.getShape()},h,p)},_fireIntersect(s,l=this._layer,h="Edit",p={}){this.__fire(l,"pm:intersect",{layer:this._layer,intersection:s,shape:this.getShape()},h,p)},_fireLayerReset(s,l,h="Edit",p={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:s,indexPath:l,shape:this.getShape()},h,p)},_fireChange(s,l="Edit",h={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:s,shape:this.getShape()},l,h)},_fireTextChange(s,l="Edit",h={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:s,shape:this.getShape()},l,h)},_fireTextFocus(s="Edit",l={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},s,l)},_fireTextBlur(s="Edit",l={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},s,l)},_fireSnapDrag(s,l,h="Snapping",p={}){this.__fire(s,"pm:snapdrag",l,h,p)},_fireSnap(s,l,h="Snapping",p={}){this.__fire(s,"pm:snap",l,h,p)},_fireUnsnap(s,l,h="Snapping",p={}){this.__fire(s,"pm:unsnap",l,h,p)},_fireRotationEnable(s,l,h="Rotation",p={}){this.__fire(s,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},h,p)},_fireRotationDisable(s,l="Rotation",h={}){this.__fire(s,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},l,h)},_fireRotationStart(s,l,h="Rotation",p={}){this.__fire(s,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:l},h,p)},_fireRotation(s,l,h,p=this._rotationLayer,v="Rotation",k={}){this.__fire(s,"pm:rotate",{layer:p,helpLayer:this._layer,startAngle:this._startAngle,angle:p.pm.getAngle(),angleDiff:l,oldLatLngs:h,newLatLngs:p.getLatLngs()},v,k)},_fireRotationEnd(s,l,h,p="Rotation",v={}){this.__fire(s,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:l,angle:this._rotationLayer.pm.getAngle(),originLatLngs:h,newLatLngs:this._rotationLayer.getLatLngs()},p,v)},_fireActionClick(s,l,h,p="Toolbar",v={}){this.__fire(this._map,"pm:actionclick",{text:s.text,action:s,btnName:l,button:h},p,v)},_fireButtonClick(s,l,h="Toolbar",p={}){this.__fire(this._map,"pm:buttonclick",{btnName:s,button:l},h,p)},_fireLangChange(s,l,h,p,v="Global",k={}){this.__fire(this.map,"pm:langchange",{oldLang:s,activeLang:l,fallback:h,translations:p},v,k)},_fireGlobalDragModeToggled(s,l="Global",h={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:s,map:this.map},l,h)},_fireGlobalEditModeToggled(s,l="Global",h={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:s,map:this.map},l,h)},_fireGlobalRemovalModeToggled(s,l="Global",h={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:s,map:this.map},l,h)},_fireGlobalCutModeToggled(s="Global",l={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},s,l)},_fireGlobalDrawModeToggled(s="Global",l={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},s,l)},_fireGlobalRotateModeToggled(s="Global",l={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},s,l)},_fireRemoveLayerGroup(s,l=s,h="Edit",p={}){this.__fire(s,"pm:remove",{layer:l,shape:void 0},h,p)},_fireKeyeventEvent(s,l,h,p="Global",v={}){this.__fire(this.map,"pm:keyevent",{event:s,eventType:l,focusOn:h},p,v)},__fire(s,l,h,p,v={}){h=(0,Xo.default)(h,v,{source:p}),L.PM.Utils._fireEvent(s,l,h)}},So=no,La=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(s){this.map=s,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),s.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(s){let l="document";this.map.getContainer().contains(s.target)&&(l="map");let h={event:s,eventType:s.type,focusOn:l};this._lastEvents[s.type]=h,this._lastEvents.current=h,this.map.pm._fireKeyeventEvent(s,s.type,l)},_onBlur(s){s.altKey=!1;let l={event:s,eventType:s.type,focusOn:"document"};this._lastEvents[s.type]=l,this._lastEvents.current=l},getLastKeyEvent(s="current"){return this._lastEvents[s]},isShiftKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.shiftKey},isAltKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.altKey},isCtrlKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.ctrlKey},isMetaKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.metaKey},getPressedKey(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.key}}),An=La,Ca=m(wi());function sn(s){let l=L.PM.activeLang;return(0,Ca.default)(Ni[l],s)||(0,Ca.default)(Ni.en,s)||s}function ei(s){for(let l=0;l<s.length;l+=1){let h=s[l];if(Array.isArray(h)){if(ei(h))return!0}else if(h!=null&&h!=="")return!0}return!1}function Mo(s){return s.reduce((l,h)=>{if(h.length!==0){let p=Array.isArray(h)?Mo(h):h;Array.isArray(p)?p.length!==0&&l.push(p):l.push(p)}return l},[])}function ro(s,l,h){let p={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:v,b:k,f:M}=p,A=s.lng,z=s.lat,ee=h,Ne=Math.PI,Me=l*Ne/180,Ye=Math.sin(Me),ht=Math.cos(Me),Et=(1-M)*Math.tan(z*Ne/180),Rt=1/Math.sqrt(1+Et*Et),Ft=Et*Rt,fn=Math.atan2(Et,ht),Te=Rt*Ye,Fe=1-Te*Te,We=Fe*(v*v-k*k)/(k*k),gt=1+We/16384*(4096+We*(-768+We*(320-175*We))),et=We/1024*(256+We*(-128+We*(74-47*We))),ft=ee/(k*gt),q=2*Math.PI,oe,ye,ve;for(;Math.abs(ft-q)>1e-12;){oe=Math.cos(2*fn+ft),ye=Math.sin(ft),ve=Math.cos(ft);let Mt=et*ye*(oe+et/4*(ve*(-1+2*oe*oe)-et/6*oe*(-3+4*ye*ye)*(-3+4*oe*oe)));q=ft,ft=ee/(k*gt)+Mt}let xe=Ft*ye-Rt*ve*ht,Le=Math.atan2(Ft*ve+Rt*ye*ht,(1-M)*Math.sqrt(Te*Te+xe*xe)),$e=Math.atan2(ye*Ye,Rt*ve-Ft*ye*ht),Ue=M/16*Fe*(4+M*(4-3*Fe)),Ze=$e-(1-Ue)*M*Te*(ft+Ue*ye*(oe+Ue*ve*(-1+2*oe*oe))),at=A+Ze*180/Ne,st=Le*180/Ne;return L.latLng(at,st)}function ci(s,l,h,p,v=!0){let k,M,A,z=[];for(let ee=0;ee<h;ee+=1){if(v)k=ee*360/h+p,M=ro(s,k,l),A=L.latLng(M.lng,M.lat);else{let Ne=s.lat+Math.cos(2*ee*Math.PI/h)*l,Me=s.lng+Math.sin(2*ee*Math.PI/h)*l;A=L.latLng(Ne,Me)}z.push(A)}return z}function ka(s,l,h){l=(l+360)%360;let p=Math.PI/180,v=180/Math.PI,{R:k}=L.CRS.Earth,M=s.lng*p,A=s.lat*p,z=l*p,ee=Math.sin(A),Ne=Math.cos(A),Me=Math.cos(h/k),Ye=Math.sin(h/k),ht=Math.asin(ee*Me+Ne*Ye*Math.cos(z)),Et=M+Math.atan2(Math.sin(z)*Ye*Ne,Me-ee*Math.sin(ht));Et*=v;let Rt=Et-360,Ft=Et<-180?Et+360:Et;return Et=Et>180?Rt:Ft,L.latLng([ht*v,Et])}function vs(s,l,h){let p=s.latLngToContainerPoint(l),v=s.latLngToContainerPoint(h),k=Math.atan2(v.y-p.y,v.x-p.x)*180/Math.PI+90;return k+=k<0?360:0,k}function Qo(s,l,h,p){let v=vs(s,l,h);return ka(l,v,p)}function ea(s,l,h="asc"){if(!l||Object.keys(l).length===0)return(z,ee)=>z-ee;let p=Object.keys(l),v,k=p.length-1,M={};for(;k>=0;)v=p[k],M[v.toLowerCase()]=l[v],k-=1;function A(z){if(z instanceof L.Marker)return"Marker";if(z instanceof L.Circle)return"Circle";if(z instanceof L.CircleMarker)return"CircleMarker";if(z instanceof L.Rectangle)return"Rectangle";if(z instanceof L.Polygon)return"Polygon";if(z instanceof L.Polyline)return"Line"}return(z,ee)=>{let Ne,Me;if(Ne=A(z.layer).toLowerCase(),Me=A(ee.layer).toLowerCase(),!Ne||!Me)return 0;let Ye=Ne in M?M[Ne]:Number.MAX_SAFE_INTEGER,ht=Me in M?M[Me]:Number.MAX_SAFE_INTEGER,Et=0;return Ye<ht?Et=-1:Ye>ht&&(Et=1),h==="desc"?Et*-1:Et}}function Di(s,l=s.getLatLngs()){return s instanceof L.Polygon?L.polygon(l).getLatLngs():L.polyline(l).getLatLngs()}function ta(s,l){var h,p,v,k;if((p=(h=l.options.crs)==null?void 0:h.projection)!=null&&p.MAX_LATITUDE){let M=(k=(v=l.options.crs)==null?void 0:v.projection)==null?void 0:k.MAX_LATITUDE;s.lat=Math.max(Math.min(M,s.lat),-M)}return s}function kr(s){return s.options.renderer||s._map&&(s._map._getPaneRenderer(s.options.pane)||s._map.options.renderer||s._map._renderer)||s._renderer}var Ya=L.Class.extend({includes:[xa,mr,Rs,Eo,So],initialize(s){this.map=s,this.Draw=new L.PM.Draw(s),this.Toolbar=new L.PM.Toolbar(s),this.Keyboard=An(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(s)},setLang(s="en",l,h="en"){if(s=s.trim().toLowerCase(),!/^[a-z]{2}$/.test(s)){let v=s.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(v){let k=[`${v[1]}_${v[2]}`,`${v[1]}`];for(let M of k)if(Ni[M]){s=M;break}}}let p=L.PM.activeLang;l&&(Ni[s]=(0,bn.default)(Ni[h],l)),L.PM.activeLang=s,this.map.pm.Toolbar.reinit(),this._fireLangChange(p,s,h,Ni[s])},addControls(s){this.Toolbar.addControls(s)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(s="Polygon",l){s==="Poly"&&(s="Polygon"),this.Draw.enable(s,l)},disableDraw(s="Polygon"){s==="Poly"&&(s="Polygon"),this.Draw.disable(s)},setPathOptions(s,l={}){let h=l.ignoreShapes||[],p=l.merge||!1;this.map.pm.Draw.shapes.forEach(v=>{h.indexOf(v)===-1&&this.map.pm.Draw[v].setPathOptions(s,p)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(s){let l=(0,bn.default)(this.globalOptions,s);l.editable&&(l.resizeableCircleMarker=l.editable,delete l.editable);let h=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!l.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),h=!0);let p=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!l.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),p=!0),this.map.pm.Draw.shapes.forEach(v=>{this.map.pm.Draw[v].setOptions(l)}),h&&this.map.pm.Draw.CircleMarker.enable(),p&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(v=>{v.pm.setOptions(l)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=l,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(s=>{s.pm.enabled()&&s.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(s){return this.Draw.Cut.enable(s)},toggleGlobalCutMode(s){return this.Draw.Cut.toggle(s)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(s=!1){let l=L.PM.Utils.findLayers(this.map);if(!s)return l;let h=L.featureGroup();return h._pmTempLayer=!0,l.forEach(p=>{h.addLayer(p)}),h},getGeomanDrawLayers(s=!1){let l=L.PM.Utils.findLayers(this.map).filter(p=>p._drawnByGeoman===!0);if(!s)return l;let h=L.featureGroup();return h._pmTempLayer=!0,l.forEach(p=>{h.addLayer(p)}),h},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(s){this._touchEventCounter===0&&(L.DomEvent.on(s,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(s,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(s){this._touchEventCounter===1&&(L.DomEvent.off(s,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(s,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(s){kr(this.map)._onMouseMove(this._createMouseEvent("mousemove",s))},_canvasTouchClick(s){let l="";s.type==="touchstart"||s.type==="pointerdown"?l="mousedown":(s.type==="touchend"||s.type==="pointerup"||s.type==="touchcancel"||s.type==="pointercancel")&&(l="mouseup"),l&&kr(this.map)._onClick(this._createMouseEvent(l,s))},_createMouseEvent(s,l){let h,p=l.touches[0]||l.changedTouches[0];try{h=new MouseEvent(s,{bubbles:l.bubbles,cancelable:l.cancelable,view:l.view,detail:p.detail,screenX:p.screenX,screenY:p.screenY,clientX:p.clientX,clientY:p.clientY,ctrlKey:l.ctrlKey,altKey:l.altKey,shiftKey:l.shiftKey,metaKey:l.metaKey,button:l.button,relatedTarget:l.relatedTarget})}catch{h=document.createEvent("MouseEvents"),h.initMouseEvent(s,l.bubbles,l.cancelable,l.view,p.detail,p.screenX,p.screenY,p.clientX,p.clientY,l.ctrlKey,l.altKey,l.shiftKey,l.metaKey,l.button,l.relatedTarget)}return h}}),Ao=Ya,Oi=L.Control.extend({includes:[So],options:{position:"topleft",disableByOtherButtons:!0},initialize(s){this._button=L.Util.extend({},this.options,s)},onAdd(s){return this._map=s,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let s=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),s?s.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(s){return typeof s=="boolean"?this._button.toggleStatus=s:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(s){s&&s.preventDefault(),!this._button.disabled&&(this._button.onClick(s,{button:this,event:s}),this._clicked(s),this._button.afterClick(s,{button:this,event:s}))},_makeButton(s){let l=this.options.position.indexOf("right")>-1?"pos-right":"",h=L.DomUtil.create("div",`button-container  ${l}`,this._container);s.title&&h.setAttribute("title",s.title);let p=L.DomUtil.create("a","leaflet-buttons-control-button",h);p.setAttribute("role","button"),p.setAttribute("tabindex","0"),p.href="#";let v=L.DomUtil.create("div",`leaflet-pm-actions-container ${l}`,h),k=s.actions,M={cancel:{text:sn("actions.cancel"),title:sn("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:sn("actions.finish"),title:sn("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:sn("actions.removeLastVertex"),title:sn("actions.removeLastVertex"),onClick(){this._map.pm.Draw[s.jsClass]._removeLastVertex()}},finish:{text:sn("actions.finish"),title:sn("actions.finish"),onClick(z){this._map.pm.Draw[s.jsClass]._finishShape(z)}}};s._preparedActions=k.map(z=>{let ee=typeof z=="string"?z:z.name,Ne;if(M[ee])Ne=M[ee];else if(z.text)Ne=z;else return Ne;let Me=L.DomUtil.create("a",`leaflet-pm-action ${l} action-${ee}`,v);if(Me.setAttribute("role","button"),Me.setAttribute("tabindex","0"),Me.href="#",Ne.title&&(Me.title=Ne.title),Me.innerHTML=Ne.text,L.DomEvent.disableClickPropagation(Me),L.DomEvent.on(Me,"click",L.DomEvent.stop),Ne._node=Me,!s.disabled&&Ne.onClick){let Ye=ht=>{ht.preventDefault();let Et="",{buttons:Rt}=this._map.pm.Toolbar;for(let Ft in Rt)if(Rt[Ft]._button===s){Et=Ft;break}this._fireActionClick(Ne,Et,s)};L.DomEvent.addListener(Me,"click",Ye,this),L.DomEvent.addListener(Me,"click",Ne.onClick,this),L.DomEvent.addListener(Me,"click",()=>this._updateActiveAction(s))}return Ne}),this._updateActiveAction(s),s.toggleStatus&&L.DomUtil.addClass(h,"active");let A=L.DomUtil.create("div","control-icon",p);return s.iconUrl&&A.setAttribute("src",s.iconUrl),s.className&&L.DomUtil.addClass(A,s.className),L.DomEvent.disableClickPropagation(p),L.DomEvent.on(p,"click",L.DomEvent.stop),s.disabled||(L.DomEvent.addListener(p,"click",this._onBtnClick,this),L.DomEvent.addListener(p,"click",this._triggerClick,this)),s.disabled&&(L.DomUtil.addClass(p,"pm-disabled"),p.setAttribute("aria-disabled","true")),h},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let s="",{buttons:l}=this._map.pm.Toolbar;for(let h in l)if(l[h]._button===this._button){s=h;break}this._fireButtonClick(s,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let s="pm-disabled",l=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(l,s),l.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(l,s),l.setAttribute("aria-disabled","false"))},_updateActiveAction(s){var l;(l=s._preparedActions)==null||l.forEach(h=>{h!=null&&h._node&&(h.isActive&&h.isActive.call(this)?L.DomUtil.addClass(h._node,"active-action"):L.DomUtil.removeClass(h._node,"active-action"))})}}),na=Oi;L.Control.PMButton=na;var Pa=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(s){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(s)},reinit(){let s=this.isVisible;this.removeControls(),this._defineButtons(),s&&this.addControls()},init(s){this.map=s,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(s){let l=`${s}Container`;return this[l]||(this[l]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${s} leaflet-bar leaflet-control`)),this[l]},getButtons(){return this.buttons},addControls(s=this.options){typeof s.editPolygon<"u"&&(s.editMode=s.editPolygon),typeof s.deleteLayer<"u"&&(s.removalMode=s.deleteLayer),L.Util.setOptions(this,s),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let s=this.getButtons(),l={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let h in s){let p=s[h];L.Util.setOptions(p,{className:l.geomanIcons[h]})}},removeControls(){let s=this.getButtons();for(let l in s)s[l].remove();this.isVisible=!1},toggleControls(s=this.options){this.isVisible?this.removeControls():this.addControls(s)},_addButton(s,l){return this.buttons[s]=l,this.options[s]=!!this.options[s]||!1,this.buttons[s]},triggerClickOnToggledButtons(s){for(let l in this.buttons){let h=this.buttons[l];h._button.disableByOtherButtons&&h!==s&&h.toggled()&&h._triggerClick()}},toggleButton(s,l,h=!0){s==="editPolygon"&&(s="editMode"),s==="deleteLayer"&&(s="removalMode");let p=s;return h&&this.triggerClickOnToggledButtons(this.buttons[p]),this.buttons[p]?this.buttons[p].toggle(l):!1},_defineButtons(){let s={className:"control-icon leaflet-pm-icon-marker",title:sn("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(Ye,ht)=>{this.map.pm.Draw[ht.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},l={title:sn("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(Ye,ht)=>{this.map.pm.Draw[ht.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},h={className:"control-icon leaflet-pm-icon-polyline",title:sn("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(Ye,ht)=>{this.map.pm.Draw[ht.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},p={title:sn("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(Ye,ht)=>{this.map.pm.Draw[ht.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},v={title:sn("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(Ye,ht)=>{this.map.pm.Draw[ht.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},k={title:sn("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(Ye,ht)=>{this.map.pm.Draw[ht.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},M={title:sn("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},A={title:sn("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},z={title:sn("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(Ye,ht)=>{this.map.pm.Draw[ht.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},ee={title:sn("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Ne={title:sn("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Me={className:"control-icon leaflet-pm-icon-text",title:sn("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(Ye,ht)=>{this.map.pm.Draw[ht.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(s)),this._addButton("drawPolyline",new L.Control.PMButton(h)),this._addButton("drawRectangle",new L.Control.PMButton(k)),this._addButton("drawPolygon",new L.Control.PMButton(l)),this._addButton("drawCircle",new L.Control.PMButton(p)),this._addButton("drawCircleMarker",new L.Control.PMButton(v)),this._addButton("drawText",new L.Control.PMButton(Me)),this._addButton("editMode",new L.Control.PMButton(M)),this._addButton("dragMode",new L.Control.PMButton(A)),this._addButton("cutPolygon",new L.Control.PMButton(z)),this._addButton("removalMode",new L.Control.PMButton(ee)),this._addButton("rotateMode",new L.Control.PMButton(Ne))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let s=this.getButtons(),l=[];this.options.drawControls===!1&&(l=l.concat(Object.keys(s).filter(h=>!s[h]._button.tool))),this.options.editControls===!1&&(l=l.concat(Object.keys(s).filter(h=>s[h]._button.tool==="edit"))),this.options.optionsControls===!1&&(l=l.concat(Object.keys(s).filter(h=>s[h]._button.tool==="options"))),this.options.customControls===!1&&(l=l.concat(Object.keys(s).filter(h=>s[h]._button.tool==="custom")));for(let h in s)if(this.options[h]&&l.indexOf(h)===-1){let p=s[h]._button.tool;p||(p="draw"),s[h].setPosition(this._getBtnPosition(p)),s[h].addTo(this.map)}},_getBtnPosition(s){return this.options.positions&&this.options.positions[s]?this.options.positions[s]:this.options.position},setBlockPosition(s,l){this.options.positions[s]=l,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(s,l){if(l)typeof l!="object"&&(l={name:l});else throw new TypeError("Button has no name");let h=this._btnNameMapping(s);if(!l.name)throw new TypeError("Button has no name");if(this.buttons[l.name])throw new TypeError("Button with this name already exists");let p=this.map.pm.Draw.createNewDrawInstance(l.name,h);l={...this.buttons[h]._button,...l};let v=this.createCustomControl(l);return{drawInstance:p,control:v}},createCustomControl(s){if(!s.name)throw new TypeError("Button has no name");if(this.buttons[s.name])throw new TypeError("Button with this name already exists");s.onClick||(s.onClick=()=>{}),s.afterClick||(s.afterClick=()=>{}),s.toggle!==!1&&(s.toggle=!0),s.block&&(s.block=s.block.toLowerCase()),(!s.block||s.block==="draw")&&(s.block=""),s.className?s.className.indexOf("control-icon")===-1&&(s.className=`control-icon ${s.className}`):s.className="control-icon";let l={tool:s.block,className:s.className,title:s.title||"",jsClass:s.name,onClick:s.onClick,afterClick:s.afterClick,doToggle:s.toggle,toggleStatus:!1,disableOtherButtons:s.disableOtherButtons??!0,disableByOtherButtons:s.disableByOtherButtons??!0,cssToggle:s.toggle,position:this.options.position,actions:s.actions||[],disabled:!!s.disabled};this.options[s.name]!==!1&&(this.options[s.name]=!0);let h=this._addButton(s.name,new L.Control.PMButton(l));return this.changeControlOrder(),h},controlExists(s){return!!this.getButton(s)},getButton(s){return this.getButtons()[s]},getButtonsInBlock(s){let l={};if(s)for(let h in this.getButtons()){let p=this.getButtons()[h];(p._button.tool===s||s==="draw"&&!p._button.tool)&&(l[h]=p)}return l},changeControlOrder(s=[]){let l=this._shapeMapping(),h=[];s.forEach(k=>{l[k]?h.push(l[k]):h.push(k)});let p=this.getButtons(),v={};h.forEach(k=>{p[k]&&(v[k]=p[k])}),Object.keys(p).filter(k=>!p[k]._button.tool||p[k]._button.tool==="draw").forEach(k=>{h.indexOf(k)===-1&&(v[k]=p[k])}),Object.keys(p).filter(k=>p[k]._button.tool==="edit").forEach(k=>{h.indexOf(k)===-1&&(v[k]=p[k])}),Object.keys(p).filter(k=>p[k]._button.tool==="options").forEach(k=>{h.indexOf(k)===-1&&(v[k]=p[k])}),Object.keys(p).filter(k=>p[k]._button.tool==="custom").forEach(k=>{h.indexOf(k)===-1&&(v[k]=p[k])}),Object.keys(p).forEach(k=>{h.indexOf(k)===-1&&(v[k]=p[k])}),this.map.pm.Toolbar.buttons=v,this._showHideButtons()},getControlOrder(){let s=this.getButtons(),l=[];for(let h in s)l.push(h);return l},changeActionsOfControl(s,l){let h=this._btnNameMapping(s);if(!h)throw new TypeError("No name passed");if(!l)throw new TypeError("No actions passed");if(!this.buttons[h])throw new TypeError("Button with this name not exists");this.buttons[h]._button.actions=l,this.changeControlOrder()},setButtonDisabled(s,l){let h=this._btnNameMapping(s);l?this.buttons[h].disable():this.buttons[h].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(s){let l=this._shapeMapping();return l[s]?l[s]:s}}),Ea=Pa,ra=m(Bs()),io={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(s){s.forEach(l=>{if(Array.isArray(l)){this._assignEvents(l);return}l.off("drag",this._handleSnapping,this),l.on("drag",this._handleSnapping,this),l.off("dragend",this._cleanupSnapping,this),l.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(s){if(s){let l=s.target;l._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(l=>{l.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(s){var A,z,ee;let l=s.target;if(l._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((A=s==null?void 0:s.originalEvent)==null?void 0:A.altKey)||((ee=(z=this._map)==null?void 0:z.pm)==null?void 0:ee.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let h=this._calcClosestLayer(l.getLatLng(),this._snapList);if(Object.keys(h).length===0)return!1;let p=h.layer instanceof L.Marker||h.layer instanceof L.CircleMarker||!this.options.snapSegment,v;p?v=h.latlng:v=this._checkPrioritiySnapping(h);let k=this.options.snapDistance,M={marker:l,shape:this._shape,snapLatLng:v,segment:h.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:h.layer,distance:h.distance};if(this._fireSnapDrag(M.marker,M),this._fireSnapDrag(this._layer,M),h.distance<k){l._orgLatLng=l.getLatLng(),l.setLatLng(v),l._snapped=!0,l._snapInfo=M;let Ne=()=>{this._snapLatLng=v,this._fireSnap(l,M),this._fireSnap(this._layer,M)},Me=this._snapLatLng||{},Ye=v||{};(Me.lat!==Ye.lat||Me.lng!==Ye.lng)&&Ne()}else this._snapLatLng&&(this._unsnap(M),l._snapped=!1,l._snapInfo=void 0,this._fireUnsnap(M.marker,M),this._fireUnsnap(this._layer,M));return!0},_createSnapList(){let s=[],l=[],h=this._map;h.off("layerremove",this._handleSnapLayerRemoval,this),h.on("layerremove",this._handleSnapLayerRemoval,this),h.eachLayer(p=>{if((p instanceof L.Polyline||p instanceof L.Marker||p instanceof L.CircleMarker||p instanceof L.ImageOverlay)&&p.options.snapIgnore!==!0){if(p.options.snapIgnore===void 0&&(!L.PM.optIn&&p.options.pmIgnore===!0||L.PM.optIn&&p.options.pmIgnore!==!1))return;(p instanceof L.Circle||p instanceof L.CircleMarker)&&p.pm&&p.pm._hiddenPolyCircle?s.push(p.pm._hiddenPolyCircle):p instanceof L.ImageOverlay&&(p=L.rectangle(p.getBounds())),s.push(p);let v=L.polyline([],{color:"red",pmIgnore:!0});v._pmTempLayer=!0,l.push(v),(p instanceof L.Circle||p instanceof L.CircleMarker)&&l.push(v)}}),s=s.filter(p=>this._layer!==p),s=s.filter(p=>p._latlng||p._latlngs&&ei(p._latlngs)),s=s.filter(p=>!p._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let p=L.polyline([],{color:"red",pmIgnore:!0});p._pmTempLayer=!0,l.push(p)}),this._snapList=s.concat(this._otherSnapLayers)):this._snapList=s,this.debugIndicatorLines=l},_handleSnapLayerRemoval({layer:s}){if(!s._leaflet_id)return;let l=this._snapList.findIndex(h=>h._leaflet_id===s._leaflet_id);l>-1&&this._snapList.splice(l,1)},_calcClosestLayer(s,l){return this._calcClosestLayers(s,l,1)[0]},_calcClosestLayers(s,l,h=1){let p=[],v={};l.forEach((M,A)=>{var ee;if(M._parentCopy&&M._parentCopy===this._layer||((ee=M.getLatLngs)==null?void 0:ee.call(M).flat(5).length)<2)return;let z=this._calcLayerDistances(s,M);if(z.distance=Math.floor(z.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[A]){let Ne=L.polyline([],{color:"red",pmIgnore:!0});Ne._pmTempLayer=!0,this.debugIndicatorLines[A]=Ne}this.debugIndicatorLines[A].setLatLngs([s,z.latlng])}h===1&&(v.distance===void 0||z.distance-5<=v.distance)?(z.distance+5<v.distance&&(p=[]),v=z,v.layer=M,p.push(v)):h!==1&&(v={},v=z,v.layer=M,p.push(v))}),h!==1&&(p=p.sort((M,A)=>M.distance-A.distance)),h===-1&&(h=p.length);let k=this._getClosestLayerByPriority(p,h);return L.Util.isArray(k)?k:[k]},_calcLayerDistances(s,l){let h=this._map,p=l instanceof L.Marker||l instanceof L.CircleMarker,v=l instanceof L.Polygon,k=s;if(p){let M=l.getLatLng();return{latlng:{...M},distance:this._getDistance(h,M,k)}}return this._calcLatLngDistances(k,l.getLatLngs(),h,v)},_calcLatLngDistances(s,l,h,p=!1){let v,k,M,A=z=>{z.forEach((ee,Ne)=>{if(Array.isArray(ee)){A(ee);return}if(this.options.snapSegment){let Me=ee,Ye;p?Ye=Ne+1===z.length?0:Ne+1:Ye=Ne+1===z.length?void 0:Ne+1;let ht=z[Ye];if(ht){let Et=this._getDistanceToSegment(h,s,Me,ht);(k===void 0||Et<k)&&(k=Et,M=[Me,ht])}}else{let Me=this._getDistance(h,s,ee);(k===void 0||Me<k)&&(k=Me,v=ee)}})};return A(l),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(h,s,M[0],M[1])},segment:M,distance:k}:{latlng:v,distance:k}},_getClosestLayerByPriority(s,l=1){s=s.sort((M,A)=>M._leaflet_id-A._leaflet_id);let h=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],p=this._map.pm.globalOptions.snappingOrder||[],v=0,k={};return p.concat(h).forEach(M=>{k[M]||(v+=1,k[M]=v)}),s.sort(ea("instanceofShape",k)),l===1?s[0]||{}:s.slice(0,l)},_checkPrioritiySnapping(s){let l=this._map,h=s.segment[0],p=s.segment[1],v=s.latlng,k=v;if(this.options.snapVertex){let M=this._getDistance(l,h,v),A=this._getDistance(l,p,v),z=M<A?h:p,ee=M<A?M:A;if(this.options.snapMiddle){let Me=L.PM.Utils.calcMiddleLatLng(l,h,p),Ye=this._getDistance(l,Me,v);Ye<M&&Ye<A&&(z=Me,ee=Ye)}let Ne=this.options.snapDistance;ee<Ne&&(k=z)}return{...k}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(s,l,h,p){let v=s.getMaxZoom();v===1/0&&(v=s.getZoom());let k=s.project(l,v),M=s.project(h,v),A=s.project(p,v),z=L.LineUtil.closestPointOnSegment(k,M,A);return s.unproject(z,v)},_getDistanceToSegment(s,l,h,p){let v=s.latLngToContainerPoint(l),k=s.latLngToContainerPoint(h),M=s.latLngToContainerPoint(p);return L.LineUtil.pointToSegmentDistance(v,k,M)},_getDistance(s,l,h){return s.latLngToContainerPoint(l).distanceTo(s.latLngToContainerPoint(h))}},Bo=io,so=L.Class.extend({includes:[Bo,So],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(s){L.Util.setOptions(this,s),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(s){let l=new L.Icon.Default;l.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=l,this._map=s,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(h=>{this[h]=new L.PM.Draw[h](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(s,l=!1){l?this.options.pathOptions=(0,ra.default)(this.options.pathOptions,s):this.options.pathOptions=s},getShapes(){return this.shapes},getShape(){return this._shape},enable(s,l){if(!s)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[s].enable(l)},disable(){this.shapes.forEach(s=>{this[s].disable()})},addControls(){this.shapes.forEach(s=>{this[s].addButton()})},getActiveShape(){let s;return this.shapes.forEach(l=>{this[l]._enabled&&(s=l)}),s},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let s=[];this._map.eachLayer(l=>{(l instanceof L.Polyline||l instanceof L.Marker||l instanceof L.Circle||l instanceof L.CircleMarker||l instanceof L.ImageOverlay)&&(l._pmTempLayer||s.push(l))}),this._enabled?s.forEach(l=>{L.PM.Utils.disablePopup(l)}):s.forEach(l=>{L.PM.Utils.enablePopup(l)})},createNewDrawInstance(s,l){let h=this._getShapeFromBtnName(l);if(this[s])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[h])throw new TypeError(`There is no class L.PM.Draw.${h}`);return this[s]=new L.PM.Draw[h](this._map),this[s].toolbarButtonName=s,this[s]._shape=s,this.shapes.push(s),this[l]&&this[s].setOptions(this[l].options),this[s].setOptions(this[s].options),this[s]},_getShapeFromBtnName(s){let l={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return l[s]?l[s]:this[s]?this[s]._shape:s},_finishLayer(s){s.pm&&(s.pm.setOptions(this.options),s.pm._shape=this._shape,s.pm._map=this._map),this._addDrawnLayerProp(s)},_addDrawnLayerProp(s){s._drawnByGeoman=!0},_setPane(s,l){l==="layerPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":l==="vertexPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":l==="markerPane"&&(s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),gr=so;gr.Marker=gr.extend({initialize(s){this._map=s,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(s){L.Util.setOptions(this,s),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(sn("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(l=>{this.isRelevantMarker(l)&&l.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},isRelevantMarker(s){return s instanceof L.Marker&&s.pm&&!s._pmTempLayer&&!s.pm._initTextMarker},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let l=s;l.target=this._hintMarker,this._handleSnapping(l)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(s){if(!s.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let l=this._hintMarker.getLatLng(),h=new L.Marker(l,this.options.markerStyle);this._setPane(h,"markerPane"),this._finishLayer(h),h.pm||(h.options.draggable=!1),h.addTo(this._map.pm._getContainingLayer()),h.pm&&this.options.markerEditable?h.pm.enable():h.dragging&&h.dragging.disable(),this._fireCreate(h),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var s,l;(s=this.options.markerStyle)!=null&&s.icon&&((l=this._hintMarker)==null||l.setIcon(this.options.markerStyle.icon))}});var x=63710088e-1,Z={centimeters:x*100,centimetres:x*100,degrees:x/111325,feet:x*3.28084,inches:x*39.37,kilometers:x/1e3,kilometres:x/1e3,meters:x,metres:x,miles:x/1609.344,millimeters:x*1e3,millimetres:x*1e3,nauticalmiles:x/1852,radians:1,yards:x*1.0936};function Ae(s,l,h){h===void 0&&(h={});var p={type:"Feature"};return(h.id===0||h.id)&&(p.id=h.id),h.bbox&&(p.bbox=h.bbox),p.properties=l||{},p.geometry=s,p}function qe(s,l,h){if(h===void 0&&(h={}),!s)throw new Error("coordinates is required");if(!Array.isArray(s))throw new Error("coordinates must be an Array");if(s.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!pn(s[0])||!pn(s[1]))throw new Error("coordinates must contain numbers");var p={type:"Point",coordinates:s};return Ae(p,l,h)}function rt(s,l,h){if(h===void 0&&(h={}),s.length<2)throw new Error("coordinates must be an array of two or more positions");var p={type:"LineString",coordinates:s};return Ae(p,l,h)}function yt(s,l){l===void 0&&(l={});var h={type:"FeatureCollection"};return l.id&&(h.id=l.id),l.bbox&&(h.bbox=l.bbox),h.features=s,h}function Tt(s,l){l===void 0&&(l="kilometers");var h=Z[l];if(!h)throw new Error(l+" units is invalid");return s*h}function Vt(s,l){l===void 0&&(l="kilometers");var h=Z[l];if(!h)throw new Error(l+" units is invalid");return s/h}function Zt(s){var l=s%(2*Math.PI);return l*180/Math.PI}function nn(s){var l=s%360;return l*Math.PI/180}function pn(s){return!isNaN(s)&&s!==null&&!Array.isArray(s)}function Bn(s){var l,h,p={type:"FeatureCollection",features:[]};if(s.type==="Feature"?h=s.geometry:h=s,h.type==="LineString")l=[h.coordinates];else if(h.type==="MultiLineString")l=h.coordinates;else if(h.type==="MultiPolygon")l=[].concat.apply([],h.coordinates);else if(h.type==="Polygon")l=h.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return l.forEach(function(v){l.forEach(function(k){for(var M=0;M<v.length-1;M++)for(var A=M;A<k.length-1;A++)if(!(v===k&&(Math.abs(M-A)===1||M===0&&A===v.length-2&&v[M][0]===v[v.length-1][0]&&v[M][1]===v[v.length-1][1]))){var z=sr(v[M][0],v[M][1],v[M+1][0],v[M+1][1],k[A][0],k[A][1],k[A+1][0],k[A+1][1]);z&&p.features.push(qe([z[0],z[1]]))}})}),p}function sr(s,l,h,p,v,k,M,A){var z,ee,Ne,Me,Ye,ht={x:null,y:null,onLine1:!1,onLine2:!1};return z=(A-k)*(h-s)-(M-v)*(p-l),z===0?ht.x!==null&&ht.y!==null?ht:!1:(ee=l-k,Ne=s-v,Me=(M-v)*ee-(A-k)*Ne,Ye=(h-s)*ee-(p-l)*Ne,ee=Me/z,Ne=Ye/z,ht.x=s+ee*(h-s),ht.y=l+ee*(p-l),ee>=0&&ee<=1&&(ht.onLine1=!0),Ne>=0&&Ne<=1&&(ht.onLine2=!0),ht.onLine1&&ht.onLine2?[ht.x,ht.y]:!1)}gr.Line=gr.extend({initialize(s){this._map=s,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(s){L.Util.setOptions(this,s),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(sn("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_syncHintLine(){let s=this._layer.getLatLngs();if(s.length>0){let l=s[s.length-1];this._hintline.setLatLngs([l,this._hintMarker.getLatLng()])}},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let h=s;h.target=this._hintMarker,this._handleSnapping(h)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let l=this._layer._defaultShape().slice();l.push(this._hintMarker.getLatLng()),this._change(l)},hasSelfIntersection(){return Bn(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(s,l){let h=L.polyline(this._layer.getLatLngs());s&&(l||(l=this._hintMarker.getLatLng()),h.addLatLng(l));let p=Bn(h.toGeoJSON(15));this._doesSelfIntersect=p.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(p,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(s){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,s.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let l=this._hintMarker.getLatLng(),h=this._layer.getLatLngs(),p=h[h.length-1];if(l.equals(h[0])||h.length>0&&l.equals(p)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:l,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(l);let v=this._createMarker(l);this._setTooltipText(),this._setHintLineAfterNewVertex(l),this._fireVertexAdded(v,void 0,l,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(s)},_setHintLineAfterNewVertex(s){this._hintline.setLatLngs([s,s])},_removeLastVertex(){let s=this._markers;if(s.length<=1){this.disable();return}let l=this._layer.getLatLngs(),h=s[s.length-1],{indexPath:p}=L.PM.Utils.findDeepMarkerIndex(s,h);s.pop(),this._layerGroup.removeLayer(h);let v=s[s.length-1],k=l.indexOf(v.getLatLng());l=l.slice(0,k+1),this._layer.setLatLngs(l),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(h,p,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let s=this._layer.getLatLngs();if(s.length<=1)return;let l=L.polyline(s,this.options.pathOptions);this._setPane(l,"layerPane"),this._finishLayer(l),l.addTo(this._map.pm._getContainingLayer()),this._fireCreate(l),this.options.snappable&&this._cleanupSnapping();let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))},_createMarker(s){let l=new L.Marker(s,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(l,"vertexPane"),l._pmTempLayer=!0,this._layerGroup.addLayer(l),this._markers.push(l),l.on("click",this._finishShape,this),l},_setTooltipText(){let{length:s}=this._layer.getLatLngs().flat(),l="";s<=1?l=sn("tooltips.continueLine"):l=sn("tooltips.finishLine"),this._hintMarker.setTooltipContent(l)},_change(s){this._fireChange(s,"Draw")},setStyle(){var s,l;(s=this._layer)==null||s.setStyle(this.options.templineStyle),(l=this._hintline)==null||l.setStyle(this.options.hintlineStyle)}}),gr.Polygon=gr.Line.extend({initialize(s){this._map=s,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(s){L.PM.Draw.Line.prototype.enable.call(this,s),this._layer.pm._shape="Polygon"},_createMarker(s){let l=new L.Marker(s,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(l,"vertexPane"),l._pmTempLayer=!0,this._layerGroup.addLayer(l),this._markers.push(l),this._layer.getLatLngs().flat().length===1?(l.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(l)-1,this.options.snappable&&this._cleanupSnapping()):l.on("click",()=>1),l},_setTooltipText(){let{length:s}=this._layer.getLatLngs().flat(),l="";s<=2?l=sn("tooltips.continueLine"):l=sn("tooltips.finishPoly"),this._hintMarker.setTooltipContent(l)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let s=this._layer.getLatLngs();if(s.length<=2)return;let l=L.polygon(s,this.options.pathOptions);this._setPane(l,"layerPane"),this._finishLayer(l),l.addTo(this._map.pm._getContainingLayer()),this._fireCreate(l),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))}}),gr.Rectangle=gr.extend({initialize(s){this._map=s,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(s){if(L.Util.setOptions(this,s),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(sn("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let l=0;l<2;l+=1){let h=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(h,"vertexPane"),h._pmTempLayer=!0,this._layerGroup.addLayer(h),this._styleMarkers.push(h)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_placeStartingMarkers(s){this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let l=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(l),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(h=>{L.DomUtil.addClass(h._icon,"visible"),h.setLatLng(l)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(sn("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let s=this._startMarker.getLatLng();s&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([s,s]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let h=s;h.target=this._hintMarker,this._handleSnapping(h)}let l=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(l,"Draw")},_syncRectangleSize(){let s=ta(this._startMarker.getLatLng(),this._map),l=ta(this._hintMarker.getLatLng(),this._map),h=L.PM.Utils._getRotatedRectangle(s,l,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(h),this.options.cursorMarker&&this._styleMarkers){let p=[];h.forEach(v=>{!v.equals(s,1e-8)&&!v.equals(l,1e-8)&&p.push(v)}),p.forEach((v,k)=>{try{this._styleMarkers[k].setLatLng(v)}catch{}})}},_findCorners(){let s=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(s[0],s[2],this.options.rectangleAngle||0,this._map)},_finishShape(s){this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let l=this._hintMarker.getLatLng(),h=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||h.equals(l))return;let p=L.rectangle([h,l],this.options.pathOptions);if(this.options.rectangleAngle){let k=L.PM.Utils._getRotatedRectangle(h,l,this.options.rectangleAngle||0,this._map);p.setLatLngs(k),p.pm&&p.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(p,"layerPane"),this._finishLayer(p),p.addTo(this._map.pm._getContainingLayer()),this._fireCreate(p);let v=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(v))},setStyle(){var s;(s=this._layer)==null||s.setStyle(this.options.pathOptions)}}),gr.CircleMarker=gr.extend({initialize(s){this._map=s,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(s){if(L.Util.setOptions(this,s),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let l={};L.extend(l,this.options.templineStyle),l.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),l),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(sn("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(sn("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.disable()})},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_placeCenterMarker(s){this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let l=this._hintMarker.getLatLng();this._centerMarker.setLatLng(l),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let s=this._centerMarker.getLatLng();s&&(this._layer.setLatLng(s),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(sn("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let s=this._centerMarker.getLatLng(),l=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([s,l])},_syncCircleRadius(){let s=this._centerMarker.getLatLng(),l=this._hintMarker.getLatLng(),h=this._distanceCalculation(s,l);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(h)},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let h=s;h.target=this._hintMarker,this._handleSnapping(h)}this._handleHintMarkerSnapping();let l=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(l,"Draw")},isRelevantMarker(s){return s instanceof L.CircleMarker&&!(s instanceof L.Circle)&&s.pm&&!s._pmTempLayer},_createMarker(s){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!s.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let l=this._hintMarker.getLatLng(),h=new this._BaseCircleClass(l,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(h,"layerPane"),this._finishLayer(h),h.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(h),this._fireCreate(h),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(s){s.pm&&this.options.markerEditable&&s.pm.enable()},_finishShape(s){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let l=this._centerMarker.getLatLng(),h=this._defaultRadius;if(this.options[this._editableOption]){let M=this._hintMarker.getLatLng();h=this._distanceCalculation(l,M),this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?h=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(h=this.options[this._maxRadiusOption])}let p={...this.options.pathOptions,radius:h},v=new this._BaseCircleClass(l,p);this._setPane(v,"layerPane"),this._finishLayer(v),v.addTo(this._map.pm._getContainingLayer()),v.pm&&v.pm._updateHiddenPolyCircle(),this._fireCreate(v);let k=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(k))},_getNewDestinationOfHintMarker(){let s=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return s;let l=this._centerMarker.getLatLng(),h=this._distanceCalculation(l,s);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?s=Qo(this._map,l,s,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(s=Qo(this._map,l,s,this._getMaxDistanceInMeter()))}return s},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let s=this._centerMarker.getLatLng(),l=this._hintMarker.getLatLng(),h=this._distanceCalculation(s,l);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var l,h;let s={};L.extend(s,this.options.templineStyle),this.options[this._editableOption]&&(s.radius=0),(l=this._layer)==null||l.setStyle(s),(h=this._hintline)==null||h.setStyle(this.options.hintlineStyle)},_distanceCalculation(s,l){return this._map.project(s).distanceTo(this._map.project(l))}}),gr.Circle=gr.CircleMarker.extend({initialize(s){this._map=s,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(s,l){return this._map.distance(s,l)}});function Fn(s){if(!s)throw new Error("coord is required");if(!Array.isArray(s)){if(s.type==="Feature"&&s.geometry!==null&&s.geometry.type==="Point")return s.geometry.coordinates;if(s.type==="Point")return s.coordinates}if(Array.isArray(s)&&s.length>=2&&!Array.isArray(s[0])&&!Array.isArray(s[1]))return s;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Vn(s){if(Array.isArray(s))return s;if(s.type==="Feature"){if(s.geometry!==null)return s.geometry.coordinates}else if(s.coordinates)return s.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Pr(s){return s.type==="Feature"?s.geometry:s}function wr(s,l){return s.type==="FeatureCollection"?"FeatureCollection":s.type==="GeometryCollection"?"GeometryCollection":s.type==="Feature"&&s.geometry!==null?s.geometry.type:s.type}function Li(s,l,h){if(s!==null)for(var p,v,k,M,A,z,ee,Ne=0,Me=0,Ye,ht=s.type,Et=ht==="FeatureCollection",Rt=ht==="Feature",Ft=Et?s.features.length:1,fn=0;fn<Ft;fn++){ee=Et?s.features[fn].geometry:Rt?s.geometry:s,Ye=ee?ee.type==="GeometryCollection":!1,A=Ye?ee.geometries.length:1;for(var Te=0;Te<A;Te++){var Fe=0,We=0;if(M=Ye?ee.geometries[Te]:ee,M!==null){z=M.coordinates;var gt=M.type;switch(Ne=0,gt){case null:break;case"Point":if(l(z,Me,fn,Fe,We)===!1)return!1;Me++,Fe++;break;case"LineString":case"MultiPoint":for(p=0;p<z.length;p++){if(l(z[p],Me,fn,Fe,We)===!1)return!1;Me++,gt==="MultiPoint"&&Fe++}gt==="LineString"&&Fe++;break;case"Polygon":case"MultiLineString":for(p=0;p<z.length;p++){for(v=0;v<z[p].length-Ne;v++){if(l(z[p][v],Me,fn,Fe,We)===!1)return!1;Me++}gt==="MultiLineString"&&Fe++,gt==="Polygon"&&We++}gt==="Polygon"&&Fe++;break;case"MultiPolygon":for(p=0;p<z.length;p++){for(We=0,v=0;v<z[p].length;v++){for(k=0;k<z[p][v].length-Ne;k++){if(l(z[p][v][k],Me,fn,Fe,We)===!1)return!1;Me++}We++}Fe++}break;case"GeometryCollection":for(p=0;p<M.geometries.length;p++)if(Li(M.geometries[p],l)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Qn(s,l){if(s.type==="Feature")l(s,0);else if(s.type==="FeatureCollection")for(var h=0;h<s.features.length&&l(s.features[h],h)!==!1;h++);}function ti(s,l,h){var p=h;return Qn(s,function(v,k){k===0&&h===void 0?p=v:p=l(p,v,k)}),p}function Xa(s,l){var h,p,v,k,M,A,z,ee,Ne,Me,Ye=0,ht=s.type==="FeatureCollection",Et=s.type==="Feature",Rt=ht?s.features.length:1;for(h=0;h<Rt;h++){for(A=ht?s.features[h].geometry:Et?s.geometry:s,ee=ht?s.features[h].properties:Et?s.properties:{},Ne=ht?s.features[h].bbox:Et?s.bbox:void 0,Me=ht?s.features[h].id:Et?s.id:void 0,z=A?A.type==="GeometryCollection":!1,M=z?A.geometries.length:1,v=0;v<M;v++){if(k=z?A.geometries[v]:A,k===null){if(l(null,Ye,ee,Ne,Me)===!1)return!1;continue}switch(k.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(l(k,Ye,ee,Ne,Me)===!1)return!1;break}case"GeometryCollection":{for(p=0;p<k.geometries.length;p++)if(l(k.geometries[p],Ye,ee,Ne,Me)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}Ye++}}function ni(s,l){Xa(s,function(h,p,v,k,M){var A=h===null?null:h.type;switch(A){case null:case"Point":case"LineString":case"Polygon":return l(Ae(h,v,{bbox:k,id:M}),p,0)===!1?!1:void 0}var z;switch(A){case"MultiPoint":z="Point";break;case"MultiLineString":z="LineString";break;case"MultiPolygon":z="Polygon";break}for(var ee=0;ee<h.coordinates.length;ee++){var Ne=h.coordinates[ee],Me={type:z,coordinates:Ne};if(l(Ae(Me,v),p,ee)===!1)return!1}})}function Sa(s){if(!s)throw new Error("geojson is required");var l=[];return ni(s,function(h){ns(h,l)}),yt(l)}function ns(s,l){var h=[],p=s.geometry;if(p!==null){switch(p.type){case"Polygon":h=Vn(p);break;case"LineString":h=[Vn(p)]}h.forEach(function(v){var k=Ma(v,s.properties);k.forEach(function(M){M.id=l.length,l.push(M)})})}}function Ma(s,l){var h=[];return s.reduce(function(p,v){var k=rt([p,v],l);return k.bbox=Is(p,v),h.push(k),v}),h}function Is(s,l){var h=s[0],p=s[1],v=l[0],k=l[1],M=h<v?h:v,A=p<k?p:k,z=h>v?h:v,ee=p>k?p:k;return[M,A,z,ee]}var Fs=Sa,xr=m(ps(),1);function ia(s,l){var h={},p=[];if(s.type==="LineString"&&(s=Ae(s)),l.type==="LineString"&&(l=Ae(l)),s.type==="Feature"&&l.type==="Feature"&&s.geometry!==null&&l.geometry!==null&&s.geometry.type==="LineString"&&l.geometry.type==="LineString"&&s.geometry.coordinates.length===2&&l.geometry.coordinates.length===2){var v=hi(s,l);return v&&p.push(v),yt(p)}var k=(0,xr.default)();return k.load(Fs(l)),Qn(Fs(s),function(M){Qn(k.search(M),function(A){var z=hi(M,A);if(z){var ee=Vn(z).join(",");h[ee]||(h[ee]=!0,p.push(z))}})}),yt(p)}function hi(s,l){var h=Vn(s),p=Vn(l);if(h.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(p.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var v=h[0][0],k=h[0][1],M=h[1][0],A=h[1][1],z=p[0][0],ee=p[0][1],Ne=p[1][0],Me=p[1][1],Ye=(Me-ee)*(M-v)-(Ne-z)*(A-k),ht=(Ne-z)*(k-ee)-(Me-ee)*(v-z),Et=(M-v)*(k-ee)-(A-k)*(v-z);if(Ye===0)return null;var Rt=ht/Ye,Ft=Et/Ye;if(Rt>=0&&Rt<=1&&Ft>=0&&Ft<=1){var fn=v+Rt*(M-v),Te=k+Rt*(A-k);return qe([fn,Te])}return null}var ri=ia,sa=m(ps(),1);function Vr(s,l,h){h===void 0&&(h={});var p=Fn(s),v=Fn(l),k=nn(v[1]-p[1]),M=nn(v[0]-p[0]),A=nn(p[1]),z=nn(v[1]),ee=Math.pow(Math.sin(k/2),2)+Math.pow(Math.sin(M/2),2)*Math.cos(A)*Math.cos(z);return Tt(2*Math.atan2(Math.sqrt(ee),Math.sqrt(1-ee)),h.units)}var js=Vr;function Ci(s){var l=s[0],h=s[1],p=s[2],v=s[3],k=js(s.slice(0,2),[p,h]),M=js(s.slice(0,2),[l,v]);if(k>=M){var A=(h+v)/2;return[l,A-(p-l)/2,p,A+(p-l)/2]}else{var z=(l+p)/2;return[z-(v-h)/2,h,z+(v-h)/2,v]}}var Qa=Ci;function Er(s){var l=[1/0,1/0,-1/0,-1/0];return Li(s,function(h){l[0]>h[0]&&(l[0]=h[0]),l[1]>h[1]&&(l[1]=h[1]),l[2]<h[0]&&(l[2]=h[0]),l[3]<h[1]&&(l[3]=h[1])}),l}Er.default=Er;var _s=Er;function Ri(s,l){l===void 0&&(l={});var h=l.precision,p=l.coordinates,v=l.mutate;if(h=h==null||isNaN(h)?6:h,p=p==null||isNaN(p)?3:p,!s)throw new Error("<geojson> is required");if(typeof h!="number")throw new Error("<precision> must be a number");if(typeof p!="number")throw new Error("<coordinates> must be a number");(v===!1||v===void 0)&&(s=JSON.parse(JSON.stringify(s)));var k=Math.pow(10,h);return Li(s,function(M){To(M,k,p)}),s}function To(s,l,h){s.length>h&&s.splice(h,s.length);for(var p=0;p<s.length;p++)s[p]=Math.round(s[p]*l)/l;return s}var zs=Ri;function ys(s,l,h){if(h===void 0&&(h={}),h.final===!0)return Rr(s,l);var p=Fn(s),v=Fn(l),k=nn(p[0]),M=nn(v[0]),A=nn(p[1]),z=nn(v[1]),ee=Math.sin(M-k)*Math.cos(z),Ne=Math.cos(A)*Math.sin(z)-Math.sin(A)*Math.cos(z)*Math.cos(M-k);return Zt(Math.atan2(ee,Ne))}function Rr(s,l){var h=ys(l,s);return h=(h+180)%360,h}function Br(s,l,h,p){p===void 0&&(p={});var v=Fn(s),k=nn(v[0]),M=nn(v[1]),A=nn(h),z=Vt(l,p.units),ee=Math.asin(Math.sin(M)*Math.cos(z)+Math.cos(M)*Math.sin(z)*Math.cos(A)),Ne=k+Math.atan2(Math.sin(A)*Math.sin(z)*Math.cos(M),Math.cos(z)-Math.sin(M)*Math.sin(ee)),Me=Zt(Ne),Ye=Zt(ee);return qe([Me,Ye],p.properties)}function rs(s,l,h){h===void 0&&(h={});var p=qe([1/0,1/0],{dist:1/0}),v=0;return ni(s,function(k){for(var M=Vn(k),A=0;A<M.length-1;A++){var z=qe(M[A]);z.properties.dist=js(l,z,h);var ee=qe(M[A+1]);ee.properties.dist=js(l,ee,h);var Ne=js(z,ee,h),Me=Math.max(z.properties.dist,ee.properties.dist),Ye=ys(z,ee),ht=Br(l,Me,Ye+90,h),Et=Br(l,Me,Ye-90,h),Rt=ri(rt([ht.geometry.coordinates,Et.geometry.coordinates]),rt([z.geometry.coordinates,ee.geometry.coordinates])),Ft=null;Rt.features.length>0&&(Ft=Rt.features[0],Ft.properties.dist=js(l,Ft,h),Ft.properties.location=v+js(z,Ft,h)),z.properties.dist<p.properties.dist&&(p=z,p.properties.index=A,p.properties.location=v),ee.properties.dist<p.properties.dist&&(p=ee,p.properties.index=A+1,p.properties.location=v+Ne),Ft&&Ft.properties.dist<p.properties.dist&&(p=Ft,p.properties.index=A),v+=Ne}}),p}var fi=rs;function Ii(s,l){if(!s)throw new Error("line is required");if(!l)throw new Error("splitter is required");var h=wr(s),p=wr(l);if(h!=="LineString")throw new Error("line must be LineString");if(p==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(p==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var v=zs(l,{precision:7});switch(p){case"Point":return Fi(s,v);case"MultiPoint":return Us(s,v);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Us(s,ri(s,v))}}function Us(s,l){var h=[],p=(0,sa.default)();return ni(l,function(v){if(h.forEach(function(A,z){A.id=z}),!h.length)h=Fi(s,v).features,h.forEach(function(A){A.bbox||(A.bbox=Qa(_s(A)))}),p.load(yt(h));else{var k=p.search(v);if(k.features.length){var M=hr(v,k);h=h.filter(function(A){return A.id!==M.id}),p.remove(M),Qn(Fi(M,v),function(A){h.push(A),p.insert(A)})}}}),yt(h)}function Fi(s,l){var h=[],p=Vn(s)[0],v=Vn(s)[s.geometry.coordinates.length-1];if(bs(p,Fn(l))||bs(v,Fn(l)))return yt([s]);var k=(0,sa.default)(),M=Fs(s);k.load(M);var A=k.search(l);if(!A.features.length)return yt([s]);var z=hr(l,A),ee=[p],Ne=ti(M,function(Me,Ye,ht){var Et=Vn(Ye)[1],Rt=Fn(l);return ht===z.id?(Me.push(Rt),h.push(rt(Me)),bs(Rt,Et)?[Rt]:[Rt,Et]):(Me.push(Et),Me)},ee);return Ne.length>1&&h.push(rt(Ne)),yt(h)}function hr(s,l){if(!l.features.length)throw new Error("lines must contain features");if(l.features.length===1)return l.features[0];var h,p=1/0;return Qn(l,function(v){var k=fi(v,s),M=k.properties.dist;M<p&&(h=v,p=M)}),h}function bs(s,l){return s[0]===l[0]&&s[1]===l[1]}var ii=Ii;function Gr(s,l,h){if(h===void 0&&(h={}),!s)throw new Error("point is required");if(!l)throw new Error("polygon is required");var p=Fn(s),v=Pr(l),k=v.type,M=l.bbox,A=v.coordinates;if(M&&Aa(p,M)===!1)return!1;k==="Polygon"&&(A=[A]);for(var z=!1,ee=0;ee<A.length&&!z;ee++)if(No(p,A[ee][0],h.ignoreBoundary)){for(var Ne=!1,Me=1;Me<A[ee].length&&!Ne;)No(p,A[ee][Me],!h.ignoreBoundary)&&(Ne=!0),Me++;Ne||(z=!0)}return z}function No(s,l,h){var p=!1;l[0][0]===l[l.length-1][0]&&l[0][1]===l[l.length-1][1]&&(l=l.slice(0,l.length-1));for(var v=0,k=l.length-1;v<l.length;k=v++){var M=l[v][0],A=l[v][1],z=l[k][0],ee=l[k][1],Ne=s[1]*(M-z)+A*(z-s[0])+ee*(s[0]-M)===0&&(M-s[0])*(z-s[0])<=0&&(A-s[1])*(ee-s[1])<=0;if(Ne)return!h;var Me=A>s[1]!=ee>s[1]&&s[0]<(z-M)*(s[1]-A)/(ee-A)+M;Me&&(p=!p)}return p}function Aa(s,l){return l[0]<=s[0]&&l[1]<=s[1]&&l[2]>=s[0]&&l[3]>=s[1]}function Ba(s,l,h){h===void 0&&(h={});for(var p=Fn(s),v=Vn(l),k=0;k<v.length-1;k++){var M=!1;if(h.ignoreEndVertices&&(k===0&&(M="start"),k===v.length-2&&(M="end"),k===0&&k+1===v.length-1&&(M="both")),Hr(v[k],v[k+1],p,M,typeof h.epsilon>"u"?null:h.epsilon))return!0}return!1}function Hr(s,l,h,p,v){var k=h[0],M=h[1],A=s[0],z=s[1],ee=l[0],Ne=l[1],Me=h[0]-A,Ye=h[1]-z,ht=ee-A,Et=Ne-z,Rt=Me*Et-Ye*ht;if(v!==null){if(Math.abs(Rt)>v)return!1}else if(Rt!==0)return!1;if(p){if(p==="start")return Math.abs(ht)>=Math.abs(Et)?ht>0?A<k&&k<=ee:ee<=k&&k<A:Et>0?z<M&&M<=Ne:Ne<=M&&M<z;if(p==="end")return Math.abs(ht)>=Math.abs(Et)?ht>0?A<=k&&k<ee:ee<k&&k<=A:Et>0?z<=M&&M<Ne:Ne<M&&M<=z;if(p==="both")return Math.abs(ht)>=Math.abs(Et)?ht>0?A<k&&k<ee:ee<k&&k<A:Et>0?z<M&&M<Ne:Ne<M&&M<z}else return Math.abs(ht)>=Math.abs(Et)?ht>0?A<=k&&k<=ee:ee<=k&&k<=A:Et>0?z<=M&&M<=Ne:Ne<=M&&M<=z;return!1}var di=Ba;function oo(s,l){var h=Pr(s),p=Pr(l),v=h.type,k=p.type,M=h.coordinates,A=p.coordinates;switch(v){case"Point":switch(k){case"Point":return Gn(M,A);default:throw new Error("feature2 "+k+" geometry not supported")}case"MultiPoint":switch(k){case"Point":return ws(h,p);case"MultiPoint":return oa(h,p);default:throw new Error("feature2 "+k+" geometry not supported")}case"LineString":switch(k){case"Point":return di(p,h,{ignoreEndVertices:!0});case"LineString":return qs(h,p);case"MultiPoint":return ao(h,p);default:throw new Error("feature2 "+k+" geometry not supported")}case"Polygon":switch(k){case"Point":return Gr(p,h,{ignoreBoundary:!0});case"LineString":return ji(h,p);case"Polygon":return Ir(h,p);case"MultiPoint":return lo(h,p);default:throw new Error("feature2 "+k+" geometry not supported")}default:throw new Error("feature1 "+v+" geometry not supported")}}function ws(s,l){var h,p=!1;for(h=0;h<s.coordinates.length;h++)if(Gn(s.coordinates[h],l.coordinates)){p=!0;break}return p}function oa(s,l){for(var h=0,p=l.coordinates;h<p.length;h++){for(var v=p[h],k=!1,M=0,A=s.coordinates;M<A.length;M++){var z=A[M];if(Gn(v,z)){k=!0;break}}if(!k)return!1}return!0}function ao(s,l){for(var h=!1,p=0,v=l.coordinates;p<v.length;p++){var k=v[p];if(di(k,s,{ignoreEndVertices:!0})&&(h=!0),!di(k,s))return!1}return!!h}function lo(s,l){for(var h=0,p=l.coordinates;h<p.length;h++){var v=p[h];if(!Gr(v,s,{ignoreBoundary:!0}))return!1}return!0}function qs(s,l){for(var h=!1,p=0,v=l.coordinates;p<v.length;p++){var k=v[p];if(di({type:"Point",coordinates:k},s,{ignoreEndVertices:!0})&&(h=!0),!di({type:"Point",coordinates:k},s,{ignoreEndVertices:!1}))return!1}return h}function ji(s,l){var h=!1,p=0,v=_s(s),k=_s(l);if(!Zn(v,k))return!1;for(p;p<l.coordinates.length-1;p++){var M=vr(l.coordinates[p],l.coordinates[p+1]);if(Gr({type:"Point",coordinates:M},s,{ignoreBoundary:!0})){h=!0;break}}return h}function Ir(s,l){if(s.type==="Feature"&&s.geometry===null||l.type==="Feature"&&l.geometry===null)return!1;var h=_s(s),p=_s(l);if(!Zn(h,p))return!1;for(var v=Pr(l).coordinates,k=0,M=v;k<M.length;k++)for(var A=M[k],z=0,ee=A;z<ee.length;z++){var Ne=ee[z];if(!Gr(Ne,s))return!1}return!0}function Zn(s,l){return!(s[0]>l[0]||s[2]<l[2]||s[1]>l[1]||s[3]<l[3])}function Gn(s,l){return s[0]===l[0]&&s[1]===l[1]}function vr(s,l){return[(s[0]+l[0])/2,(s[1]+l[1])/2]}var er=m(wi()),is=s=>()=>s,uo=s=>{let l=s?(h,p)=>p.minus(h).abs().isLessThanOrEqualTo(s):is(!1);return(h,p)=>l(h,p)?0:h.comparedTo(p)};function xs(s){let l=s?(h,p,v,k,M)=>h.exponentiatedBy(2).isLessThanOrEqualTo(k.minus(p).exponentiatedBy(2).plus(M.minus(v).exponentiatedBy(2)).times(s)):is(!1);return(h,p,v)=>{let k=h.x,M=h.y,A=v.x,z=v.y,ee=M.minus(z).times(p.x.minus(A)).minus(k.minus(A).times(p.y.minus(z)));return l(ee,k,M,A,z)?0:ee.comparedTo(0)}}var el=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,co=Math.ceil,Sr=Math.floor,tr="[BigNumber Error] ",pi=tr+"Number primitive has more than 15 significant digits: ",mi=1e14,hn=14,tl=9007199254740991,Do=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],zi=1e7,Wr=1e9;function Pl(s){var l,h,p,v=Te.prototype={constructor:Te,toString:null,valueOf:null},k=new Te(1),M=20,A=4,z=-7,ee=21,Ne=-1e7,Me=1e7,Ye=!1,ht=1,Et=0,Rt={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},Ft="0123456789abcdefghijklmnopqrstuvwxyz",fn=!0;function Te(q,oe){var ye,ve,xe,Le,$e,Ue,Ze,at,st=this;if(!(st instanceof Te))return new Te(q,oe);if(oe==null){if(q&&q._isBigNumber===!0){st.s=q.s,!q.c||q.e>Me?st.c=st.e=null:q.e<Ne?st.c=[st.e=0]:(st.e=q.e,st.c=q.c.slice());return}if((Ue=typeof q=="number")&&q*0==0){if(st.s=1/q<0?(q=-q,-1):1,q===~~q){for(Le=0,$e=q;$e>=10;$e/=10,Le++);Le>Me?st.c=st.e=null:(st.e=Le,st.c=[q]);return}at=String(q)}else{if(!el.test(at=String(q)))return p(st,at,Ue);st.s=at.charCodeAt(0)==45?(at=at.slice(1),-1):1}(Le=at.indexOf("."))>-1&&(at=at.replace(".","")),($e=at.search(/e/i))>0?(Le<0&&(Le=$e),Le+=+at.slice($e+1),at=at.substring(0,$e)):Le<0&&(Le=at.length)}else{if(r(oe,2,Ft.length,"Base"),oe==10&&fn)return st=new Te(q),et(st,M+st.e+1,A);if(at=String(q),Ue=typeof q=="number"){if(q*0!=0)return p(st,at,Ue,oe);if(st.s=1/q<0?(at=at.slice(1),-1):1,Te.DEBUG&&at.replace(/^0\.0*|\./,"").length>15)throw Error(pi+q)}else st.s=at.charCodeAt(0)===45?(at=at.slice(1),-1):1;for(ye=Ft.slice(0,oe),Le=$e=0,Ze=at.length;$e<Ze;$e++)if(ye.indexOf(ve=at.charAt($e))<0){if(ve=="."){if($e>Le){Le=Ze;continue}}else if(!xe&&(at==at.toUpperCase()&&(at=at.toLowerCase())||at==at.toLowerCase()&&(at=at.toUpperCase()))){xe=!0,$e=-1,Le=0;continue}return p(st,String(q),Ue,oe)}Ue=!1,at=h(at,oe,10,st.s),(Le=at.indexOf("."))>-1?at=at.replace(".",""):Le=at.length}for($e=0;at.charCodeAt($e)===48;$e++);for(Ze=at.length;at.charCodeAt(--Ze)===48;);if(at=at.slice($e,++Ze)){if(Ze-=$e,Ue&&Te.DEBUG&&Ze>15&&(q>tl||q!==Sr(q)))throw Error(pi+st.s*q);if((Le=Le-$e-1)>Me)st.c=st.e=null;else if(Le<Ne)st.c=[st.e=0];else{if(st.e=Le,st.c=[],$e=(Le+1)%hn,Le<0&&($e+=hn),$e<Ze){for($e&&st.c.push(+at.slice(0,$e)),Ze-=hn;$e<Ze;)st.c.push(+at.slice($e,$e+=hn));$e=hn-(at=at.slice($e)).length}else $e-=Ze;for(;$e--;at+="0");st.c.push(+at)}}else st.c=[st.e=0]}Te.clone=Pl,Te.ROUND_UP=0,Te.ROUND_DOWN=1,Te.ROUND_CEIL=2,Te.ROUND_FLOOR=3,Te.ROUND_HALF_UP=4,Te.ROUND_HALF_DOWN=5,Te.ROUND_HALF_EVEN=6,Te.ROUND_HALF_CEIL=7,Te.ROUND_HALF_FLOOR=8,Te.EUCLID=9,Te.config=Te.set=function(q){var oe,ye;if(q!=null)if(typeof q=="object"){if(q.hasOwnProperty(oe="DECIMAL_PLACES")&&(ye=q[oe],r(ye,0,Wr,oe),M=ye),q.hasOwnProperty(oe="ROUNDING_MODE")&&(ye=q[oe],r(ye,0,8,oe),A=ye),q.hasOwnProperty(oe="EXPONENTIAL_AT")&&(ye=q[oe],ye&&ye.pop?(r(ye[0],-1e9,0,oe),r(ye[1],0,Wr,oe),z=ye[0],ee=ye[1]):(r(ye,-1e9,Wr,oe),z=-(ee=ye<0?-ye:ye))),q.hasOwnProperty(oe="RANGE"))if(ye=q[oe],ye&&ye.pop)r(ye[0],-1e9,-1,oe),r(ye[1],1,Wr,oe),Ne=ye[0],Me=ye[1];else if(r(ye,-1e9,Wr,oe),ye)Ne=-(Me=ye<0?-ye:ye);else throw Error(tr+oe+" cannot be zero: "+ye);if(q.hasOwnProperty(oe="CRYPTO"))if(ye=q[oe],ye===!!ye)if(ye)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))Ye=ye;else throw Ye=!ye,Error(tr+"crypto unavailable");else Ye=ye;else throw Error(tr+oe+" not true or false: "+ye);if(q.hasOwnProperty(oe="MODULO_MODE")&&(ye=q[oe],r(ye,0,9,oe),ht=ye),q.hasOwnProperty(oe="POW_PRECISION")&&(ye=q[oe],r(ye,0,Wr,oe),Et=ye),q.hasOwnProperty(oe="FORMAT"))if(ye=q[oe],typeof ye=="object")Rt=ye;else throw Error(tr+oe+" not an object: "+ye);if(q.hasOwnProperty(oe="ALPHABET"))if(ye=q[oe],typeof ye=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(ye))fn=ye.slice(0,10)=="0123456789",Ft=ye;else throw Error(tr+oe+" invalid: "+ye)}else throw Error(tr+"Object expected: "+q);return{DECIMAL_PLACES:M,ROUNDING_MODE:A,EXPONENTIAL_AT:[z,ee],RANGE:[Ne,Me],CRYPTO:Ye,MODULO_MODE:ht,POW_PRECISION:Et,FORMAT:Rt,ALPHABET:Ft}},Te.isBigNumber=function(q){if(!q||q._isBigNumber!==!0)return!1;if(!Te.DEBUG)return!0;var oe,ye,ve=q.c,xe=q.e,Le=q.s;e:if({}.toString.call(ve)=="[object Array]"){if((Le===1||Le===-1)&&xe>=-1e9&&xe<=Wr&&xe===Sr(xe)){if(ve[0]===0){if(xe===0&&ve.length===1)return!0;break e}if(oe=(xe+1)%hn,oe<1&&(oe+=hn),String(ve[0]).length==oe){for(oe=0;oe<ve.length;oe++)if(ye=ve[oe],ye<0||ye>=mi||ye!==Sr(ye))break e;if(ye!==0)return!0}}}else if(ve===null&&xe===null&&(Le===null||Le===1||Le===-1))return!0;throw Error(tr+"Invalid BigNumber: "+q)},Te.maximum=Te.max=function(){return We(arguments,-1)},Te.minimum=Te.min=function(){return We(arguments,1)},Te.random=function(){var q=9007199254740992,oe=Math.random()*q&2097151?function(){return Sr(Math.random()*q)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(ye){var ve,xe,Le,$e,Ue,Ze=0,at=[],st=new Te(k);if(ye==null?ye=M:r(ye,0,Wr),$e=co(ye/hn),Ye)if(crypto.getRandomValues){for(ve=crypto.getRandomValues(new Uint32Array($e*=2));Ze<$e;)Ue=ve[Ze]*131072+(ve[Ze+1]>>>11),Ue>=9e15?(xe=crypto.getRandomValues(new Uint32Array(2)),ve[Ze]=xe[0],ve[Ze+1]=xe[1]):(at.push(Ue%1e14),Ze+=2);Ze=$e/2}else if(crypto.randomBytes){for(ve=crypto.randomBytes($e*=7);Ze<$e;)Ue=(ve[Ze]&31)*281474976710656+ve[Ze+1]*1099511627776+ve[Ze+2]*4294967296+ve[Ze+3]*16777216+(ve[Ze+4]<<16)+(ve[Ze+5]<<8)+ve[Ze+6],Ue>=9e15?crypto.randomBytes(7).copy(ve,Ze):(at.push(Ue%1e14),Ze+=7);Ze=$e/7}else throw Ye=!1,Error(tr+"crypto unavailable");if(!Ye)for(;Ze<$e;)Ue=oe(),Ue<9e15&&(at[Ze++]=Ue%1e14);for($e=at[--Ze],ye%=hn,$e&&ye&&(Ue=Do[hn-ye],at[Ze]=Sr($e/Ue)*Ue);at[Ze]===0;at.pop(),Ze--);if(Ze<0)at=[Le=0];else{for(Le=-1;at[0]===0;at.splice(0,1),Le-=hn);for(Ze=1,Ue=at[0];Ue>=10;Ue/=10,Ze++);Ze<hn&&(Le-=hn-Ze)}return st.e=Le,st.c=at,st}}(),Te.sum=function(){for(var q=1,oe=arguments,ye=new Te(oe[0]);q<oe.length;)ye=ye.plus(oe[q++]);return ye},h=function(){var q="0123456789";function oe(ye,ve,xe,Le){for(var $e,Ue=[0],Ze,at=0,st=ye.length;at<st;){for(Ze=Ue.length;Ze--;Ue[Ze]*=ve);for(Ue[0]+=Le.indexOf(ye.charAt(at++)),$e=0;$e<Ue.length;$e++)Ue[$e]>xe-1&&(Ue[$e+1]==null&&(Ue[$e+1]=0),Ue[$e+1]+=Ue[$e]/xe|0,Ue[$e]%=xe)}return Ue.reverse()}return function(ye,ve,xe,Le,$e){var Ue,Ze,at,st,Mt,Wt,Xt,tn,Un=ye.indexOf("."),Hn=M,On=A;for(Un>=0&&(st=Et,Et=0,ye=ye.replace(".",""),tn=new Te(ve),Wt=tn.pow(ye.length-Un),Et=st,tn.c=oe(P(oi(Wt.c),Wt.e,"0"),10,xe,q),tn.e=tn.c.length),Xt=oe(ye,ve,xe,$e?(Ue=Ft,q):(Ue=q,Ft)),at=st=Xt.length;Xt[--st]==0;Xt.pop());if(!Xt[0])return Ue.charAt(0);if(Un<0?--at:(Wt.c=Xt,Wt.e=at,Wt.s=Le,Wt=l(Wt,tn,Hn,On,xe),Xt=Wt.c,Mt=Wt.r,at=Wt.e),Ze=at+Hn+1,Un=Xt[Ze],st=xe/2,Mt=Mt||Ze<0||Xt[Ze+1]!=null,Mt=On<4?(Un!=null||Mt)&&(On==0||On==(Wt.s<0?3:2)):Un>st||Un==st&&(On==4||Mt||On==6&&Xt[Ze-1]&1||On==(Wt.s<0?8:7)),Ze<1||!Xt[0])ye=Mt?P(Ue.charAt(1),-Hn,Ue.charAt(0)):Ue.charAt(0);else{if(Xt.length=Ze,Mt)for(--xe;++Xt[--Ze]>xe;)Xt[Ze]=0,Ze||(++at,Xt=[1].concat(Xt));for(st=Xt.length;!Xt[--st];);for(Un=0,ye="";Un<=st;ye+=Ue.charAt(Xt[Un++]));ye=P(ye,at,Ue.charAt(0))}return ye}}(),l=function(){function q(ve,xe,Le){var $e,Ue,Ze,at,st=0,Mt=ve.length,Wt=xe%zi,Xt=xe/zi|0;for(ve=ve.slice();Mt--;)Ze=ve[Mt]%zi,at=ve[Mt]/zi|0,$e=Xt*Ze+at*Wt,Ue=Wt*Ze+$e%zi*zi+st,st=(Ue/Le|0)+($e/zi|0)+Xt*at,ve[Mt]=Ue%Le;return st&&(ve=[st].concat(ve)),ve}function oe(ve,xe,Le,$e){var Ue,Ze;if(Le!=$e)Ze=Le>$e?1:-1;else for(Ue=Ze=0;Ue<Le;Ue++)if(ve[Ue]!=xe[Ue]){Ze=ve[Ue]>xe[Ue]?1:-1;break}return Ze}function ye(ve,xe,Le,$e){for(var Ue=0;Le--;)ve[Le]-=Ue,Ue=ve[Le]<xe[Le]?1:0,ve[Le]=Ue*$e+ve[Le]-xe[Le];for(;!ve[0]&&ve.length>1;ve.splice(0,1));}return function(ve,xe,Le,$e,Ue){var Ze,at,st,Mt,Wt,Xt,tn,Un,Hn,On,nr,vi,il,ho,Ou,fo,Bl,os=ve.s==xe.s?1:-1,Kr=ve.c,_r=xe.c;if(!Kr||!Kr[0]||!_r||!_r[0])return new Te(!ve.s||!xe.s||(Kr?_r&&Kr[0]==_r[0]:!_r)?NaN:Kr&&Kr[0]==0||!_r?os*0:os/0);for(Un=new Te(os),Hn=Un.c=[],at=ve.e-xe.e,os=Le+at+1,Ue||(Ue=mi,at=si(ve.e/hn)-si(xe.e/hn),os=os/hn|0),st=0;_r[st]==(Kr[st]||0);st++);if(_r[st]>(Kr[st]||0)&&at--,os<0)Hn.push(1),Mt=!0;else{for(ho=Kr.length,fo=_r.length,st=0,os+=2,Wt=Sr(Ue/(_r[0]+1)),Wt>1&&(_r=q(_r,Wt,Ue),Kr=q(Kr,Wt,Ue),fo=_r.length,ho=Kr.length),il=fo,On=Kr.slice(0,fo),nr=On.length;nr<fo;On[nr++]=0);Bl=_r.slice(),Bl=[0].concat(Bl),Ou=_r[0],_r[1]>=Ue/2&&Ou++;do{if(Wt=0,Ze=oe(_r,On,fo,nr),Ze<0){if(vi=On[0],fo!=nr&&(vi=vi*Ue+(On[1]||0)),Wt=Sr(vi/Ou),Wt>1)for(Wt>=Ue&&(Wt=Ue-1),Xt=q(_r,Wt,Ue),tn=Xt.length,nr=On.length;oe(Xt,On,tn,nr)==1;)Wt--,ye(Xt,fo<tn?Bl:_r,tn,Ue),tn=Xt.length,Ze=1;else Wt==0&&(Ze=Wt=1),Xt=_r.slice(),tn=Xt.length;if(tn<nr&&(Xt=[0].concat(Xt)),ye(On,Xt,nr,Ue),nr=On.length,Ze==-1)for(;oe(_r,On,fo,nr)<1;)Wt++,ye(On,fo<nr?Bl:_r,nr,Ue),nr=On.length}else Ze===0&&(Wt++,On=[0]);Hn[st++]=Wt,On[0]?On[nr++]=Kr[il]||0:(On=[Kr[il]],nr=1)}while((il++<ho||On[0]!=null)&&os--);Mt=On[0]!=null,Hn[0]||Hn.splice(0,1)}if(Ue==mi){for(st=1,os=Hn[0];os>=10;os/=10,st++);et(Un,Le+(Un.e=st+at*hn-1)+1,$e,Mt)}else Un.e=at,Un.r=+Mt;return Un}}();function Fe(q,oe,ye,ve){var xe,Le,$e,Ue,Ze;if(ye==null?ye=A:r(ye,0,8),!q.c)return q.toString();if(xe=q.c[0],$e=q.e,oe==null)Ze=oi(q.c),Ze=ve==1||ve==2&&($e<=z||$e>=ee)?g(Ze,$e):P(Ze,$e,"0");else if(q=et(new Te(q),oe,ye),Le=q.e,Ze=oi(q.c),Ue=Ze.length,ve==1||ve==2&&(oe<=Le||Le<=z)){for(;Ue<oe;Ze+="0",Ue++);Ze=g(Ze,Le)}else if(oe-=$e,Ze=P(Ze,Le,"0"),Le+1>Ue){if(--oe>0)for(Ze+=".";oe--;Ze+="0");}else if(oe+=Le-Ue,oe>0)for(Le+1==Ue&&(Ze+=".");oe--;Ze+="0");return q.s<0&&xe?"-"+Ze:Ze}function We(q,oe){for(var ye,ve,xe=1,Le=new Te(q[0]);xe<q.length;xe++)ve=new Te(q[xe]),(!ve.s||(ye=Ls(Le,ve))===oe||ye===0&&Le.s===oe)&&(Le=ve);return Le}function gt(q,oe,ye){for(var ve=1,xe=oe.length;!oe[--xe];oe.pop());for(xe=oe[0];xe>=10;xe/=10,ve++);return(ye=ve+ye*hn-1)>Me?q.c=q.e=null:ye<Ne?q.c=[q.e=0]:(q.e=ye,q.c=oe),q}p=function(){var q=/^(-?)0([xbo])(?=\w[\w.]*$)/i,oe=/^([^.]+)\.$/,ye=/^\.([^.]+)$/,ve=/^-?(Infinity|NaN)$/,xe=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(Le,$e,Ue,Ze){var at,st=Ue?$e:$e.replace(xe,"");if(ve.test(st))Le.s=isNaN(st)?null:st<0?-1:1;else{if(!Ue&&(st=st.replace(q,function(Mt,Wt,Xt){return at=(Xt=Xt.toLowerCase())=="x"?16:Xt=="b"?2:8,!Ze||Ze==at?Wt:Mt}),Ze&&(at=Ze,st=st.replace(oe,"$1").replace(ye,"0.$1")),$e!=st))return new Te(st,at);if(Te.DEBUG)throw Error(tr+"Not a"+(Ze?" base "+Ze:"")+" number: "+$e);Le.s=null}Le.c=Le.e=null}}();function et(q,oe,ye,ve){var xe,Le,$e,Ue,Ze,at,st,Mt=q.c,Wt=Do;if(Mt){e:{for(xe=1,Ue=Mt[0];Ue>=10;Ue/=10,xe++);if(Le=oe-xe,Le<0)Le+=hn,$e=oe,Ze=Mt[at=0],st=Sr(Ze/Wt[xe-$e-1]%10);else if(at=co((Le+1)/hn),at>=Mt.length)if(ve){for(;Mt.length<=at;Mt.push(0));Ze=st=0,xe=1,Le%=hn,$e=Le-hn+1}else break e;else{for(Ze=Ue=Mt[at],xe=1;Ue>=10;Ue/=10,xe++);Le%=hn,$e=Le-hn+xe,st=$e<0?0:Sr(Ze/Wt[xe-$e-1]%10)}if(ve=ve||oe<0||Mt[at+1]!=null||($e<0?Ze:Ze%Wt[xe-$e-1]),ve=ye<4?(st||ve)&&(ye==0||ye==(q.s<0?3:2)):st>5||st==5&&(ye==4||ve||ye==6&&(Le>0?$e>0?Ze/Wt[xe-$e]:0:Mt[at-1])%10&1||ye==(q.s<0?8:7)),oe<1||!Mt[0])return Mt.length=0,ve?(oe-=q.e+1,Mt[0]=Wt[(hn-oe%hn)%hn],q.e=-oe||0):Mt[0]=q.e=0,q;if(Le==0?(Mt.length=at,Ue=1,at--):(Mt.length=at+1,Ue=Wt[hn-Le],Mt[at]=$e>0?Sr(Ze/Wt[xe-$e]%Wt[$e])*Ue:0),ve)for(;;)if(at==0){for(Le=1,$e=Mt[0];$e>=10;$e/=10,Le++);for($e=Mt[0]+=Ue,Ue=1;$e>=10;$e/=10,Ue++);Le!=Ue&&(q.e++,Mt[0]==mi&&(Mt[0]=1));break}else{if(Mt[at]+=Ue,Mt[at]!=mi)break;Mt[at--]=0,Ue=1}for(Le=Mt.length;Mt[--Le]===0;Mt.pop());}q.e>Me?q.c=q.e=null:q.e<Ne&&(q.c=[q.e=0])}return q}function ft(q){var oe,ye=q.e;return ye===null?q.toString():(oe=oi(q.c),oe=ye<=z||ye>=ee?g(oe,ye):P(oe,ye,"0"),q.s<0?"-"+oe:oe)}return v.absoluteValue=v.abs=function(){var q=new Te(this);return q.s<0&&(q.s=1),q},v.comparedTo=function(q,oe){return Ls(this,new Te(q,oe))},v.decimalPlaces=v.dp=function(q,oe){var ye,ve,xe,Le=this;if(q!=null)return r(q,0,Wr),oe==null?oe=A:r(oe,0,8),et(new Te(Le),q+Le.e+1,oe);if(!(ye=Le.c))return null;if(ve=((xe=ye.length-1)-si(this.e/hn))*hn,xe=ye[xe])for(;xe%10==0;xe/=10,ve--);return ve<0&&(ve=0),ve},v.dividedBy=v.div=function(q,oe){return l(this,new Te(q,oe),M,A)},v.dividedToIntegerBy=v.idiv=function(q,oe){return l(this,new Te(q,oe),0,1)},v.exponentiatedBy=v.pow=function(q,oe){var ye,ve,xe,Le,$e,Ue,Ze,at,st,Mt=this;if(q=new Te(q),q.c&&!q.isInteger())throw Error(tr+"Exponent not an integer: "+ft(q));if(oe!=null&&(oe=new Te(oe)),Ue=q.e>14,!Mt.c||!Mt.c[0]||Mt.c[0]==1&&!Mt.e&&Mt.c.length==1||!q.c||!q.c[0])return st=new Te(Math.pow(+ft(Mt),Ue?q.s*(2-c(q)):+ft(q))),oe?st.mod(oe):st;if(Ze=q.s<0,oe){if(oe.c?!oe.c[0]:!oe.s)return new Te(NaN);ve=!Ze&&Mt.isInteger()&&oe.isInteger(),ve&&(Mt=Mt.mod(oe))}else{if(q.e>9&&(Mt.e>0||Mt.e<-1||(Mt.e==0?Mt.c[0]>1||Ue&&Mt.c[1]>=24e7:Mt.c[0]<8e13||Ue&&Mt.c[0]<=9999975e7)))return Le=Mt.s<0&&c(q)?-0:0,Mt.e>-1&&(Le=1/Le),new Te(Ze?1/Le:Le);Et&&(Le=co(Et/hn+2))}for(Ue?(ye=new Te(.5),Ze&&(q.s=1),at=c(q)):(xe=Math.abs(+ft(q)),at=xe%2),st=new Te(k);;){if(at){if(st=st.times(Mt),!st.c)break;Le?st.c.length>Le&&(st.c.length=Le):ve&&(st=st.mod(oe))}if(xe){if(xe=Sr(xe/2),xe===0)break;at=xe%2}else if(q=q.times(ye),et(q,q.e+1,1),q.e>14)at=c(q);else{if(xe=+ft(q),xe===0)break;at=xe%2}Mt=Mt.times(Mt),Le?Mt.c&&Mt.c.length>Le&&(Mt.c.length=Le):ve&&(Mt=Mt.mod(oe))}return ve?st:(Ze&&(st=k.div(st)),oe?st.mod(oe):Le?et(st,Et,A,$e):st)},v.integerValue=function(q){var oe=new Te(this);return q==null?q=A:r(q,0,8),et(oe,oe.e+1,q)},v.isEqualTo=v.eq=function(q,oe){return Ls(this,new Te(q,oe))===0},v.isFinite=function(){return!!this.c},v.isGreaterThan=v.gt=function(q,oe){return Ls(this,new Te(q,oe))>0},v.isGreaterThanOrEqualTo=v.gte=function(q,oe){return(oe=Ls(this,new Te(q,oe)))===1||oe===0},v.isInteger=function(){return!!this.c&&si(this.e/hn)>this.c.length-2},v.isLessThan=v.lt=function(q,oe){return Ls(this,new Te(q,oe))<0},v.isLessThanOrEqualTo=v.lte=function(q,oe){return(oe=Ls(this,new Te(q,oe)))===-1||oe===0},v.isNaN=function(){return!this.s},v.isNegative=function(){return this.s<0},v.isPositive=function(){return this.s>0},v.isZero=function(){return!!this.c&&this.c[0]==0},v.minus=function(q,oe){var ye,ve,xe,Le,$e=this,Ue=$e.s;if(q=new Te(q,oe),oe=q.s,!Ue||!oe)return new Te(NaN);if(Ue!=oe)return q.s=-oe,$e.plus(q);var Ze=$e.e/hn,at=q.e/hn,st=$e.c,Mt=q.c;if(!Ze||!at){if(!st||!Mt)return st?(q.s=-oe,q):new Te(Mt?$e:NaN);if(!st[0]||!Mt[0])return Mt[0]?(q.s=-oe,q):new Te(st[0]?$e:A==3?-0:0)}if(Ze=si(Ze),at=si(at),st=st.slice(),Ue=Ze-at){for((Le=Ue<0)?(Ue=-Ue,xe=st):(at=Ze,xe=Mt),xe.reverse(),oe=Ue;oe--;xe.push(0));xe.reverse()}else for(ve=(Le=(Ue=st.length)<(oe=Mt.length))?Ue:oe,Ue=oe=0;oe<ve;oe++)if(st[oe]!=Mt[oe]){Le=st[oe]<Mt[oe];break}if(Le&&(xe=st,st=Mt,Mt=xe,q.s=-q.s),oe=(ve=Mt.length)-(ye=st.length),oe>0)for(;oe--;st[ye++]=0);for(oe=mi-1;ve>Ue;){if(st[--ve]<Mt[ve]){for(ye=ve;ye&&!st[--ye];st[ye]=oe);--st[ye],st[ve]+=mi}st[ve]-=Mt[ve]}for(;st[0]==0;st.splice(0,1),--at);return st[0]?gt(q,st,at):(q.s=A==3?-1:1,q.c=[q.e=0],q)},v.modulo=v.mod=function(q,oe){var ye,ve,xe=this;return q=new Te(q,oe),!xe.c||!q.s||q.c&&!q.c[0]?new Te(NaN):!q.c||xe.c&&!xe.c[0]?new Te(xe):(ht==9?(ve=q.s,q.s=1,ye=l(xe,q,0,3),q.s=ve,ye.s*=ve):ye=l(xe,q,0,ht),q=xe.minus(ye.times(q)),!q.c[0]&&ht==1&&(q.s=xe.s),q)},v.multipliedBy=v.times=function(q,oe){var ye,ve,xe,Le,$e,Ue,Ze,at,st,Mt,Wt,Xt,tn,Un,Hn,On=this,nr=On.c,vi=(q=new Te(q,oe)).c;if(!nr||!vi||!nr[0]||!vi[0])return!On.s||!q.s||nr&&!nr[0]&&!vi||vi&&!vi[0]&&!nr?q.c=q.e=q.s=null:(q.s*=On.s,!nr||!vi?q.c=q.e=null:(q.c=[0],q.e=0)),q;for(ve=si(On.e/hn)+si(q.e/hn),q.s*=On.s,Ze=nr.length,Mt=vi.length,Ze<Mt&&(tn=nr,nr=vi,vi=tn,xe=Ze,Ze=Mt,Mt=xe),xe=Ze+Mt,tn=[];xe--;tn.push(0));for(Un=mi,Hn=zi,xe=Mt;--xe>=0;){for(ye=0,Wt=vi[xe]%Hn,Xt=vi[xe]/Hn|0,$e=Ze,Le=xe+$e;Le>xe;)at=nr[--$e]%Hn,st=nr[$e]/Hn|0,Ue=Xt*at+st*Wt,at=Wt*at+Ue%Hn*Hn+tn[Le]+ye,ye=(at/Un|0)+(Ue/Hn|0)+Xt*st,tn[Le--]=at%Un;tn[Le]=ye}return ye?++ve:tn.splice(0,1),gt(q,tn,ve)},v.negated=function(){var q=new Te(this);return q.s=-q.s||null,q},v.plus=function(q,oe){var ye,ve=this,xe=ve.s;if(q=new Te(q,oe),oe=q.s,!xe||!oe)return new Te(NaN);if(xe!=oe)return q.s=-oe,ve.minus(q);var Le=ve.e/hn,$e=q.e/hn,Ue=ve.c,Ze=q.c;if(!Le||!$e){if(!Ue||!Ze)return new Te(xe/0);if(!Ue[0]||!Ze[0])return Ze[0]?q:new Te(Ue[0]?ve:xe*0)}if(Le=si(Le),$e=si($e),Ue=Ue.slice(),xe=Le-$e){for(xe>0?($e=Le,ye=Ze):(xe=-xe,ye=Ue),ye.reverse();xe--;ye.push(0));ye.reverse()}for(xe=Ue.length,oe=Ze.length,xe-oe<0&&(ye=Ze,Ze=Ue,Ue=ye,oe=xe),xe=0;oe;)xe=(Ue[--oe]=Ue[oe]+Ze[oe]+xe)/mi|0,Ue[oe]=mi===Ue[oe]?0:Ue[oe]%mi;return xe&&(Ue=[xe].concat(Ue),++$e),gt(q,Ue,$e)},v.precision=v.sd=function(q,oe){var ye,ve,xe,Le=this;if(q!=null&&q!==!!q)return r(q,1,Wr),oe==null?oe=A:r(oe,0,8),et(new Te(Le),q,oe);if(!(ye=Le.c))return null;if(xe=ye.length-1,ve=xe*hn+1,xe=ye[xe]){for(;xe%10==0;xe/=10,ve--);for(xe=ye[0];xe>=10;xe/=10,ve++);}return q&&Le.e+1>ve&&(ve=Le.e+1),ve},v.shiftedBy=function(q){return r(q,-9007199254740991,tl),this.times("1e"+q)},v.squareRoot=v.sqrt=function(){var q,oe,ye,ve,xe,Le=this,$e=Le.c,Ue=Le.s,Ze=Le.e,at=M+4,st=new Te("0.5");if(Ue!==1||!$e||!$e[0])return new Te(!Ue||Ue<0&&(!$e||$e[0])?NaN:$e?Le:1/0);if(Ue=Math.sqrt(+ft(Le)),Ue==0||Ue==1/0?(oe=oi($e),(oe.length+Ze)%2==0&&(oe+="0"),Ue=Math.sqrt(+oe),Ze=si((Ze+1)/2)-(Ze<0||Ze%2),Ue==1/0?oe="5e"+Ze:(oe=Ue.toExponential(),oe=oe.slice(0,oe.indexOf("e")+1)+Ze),ye=new Te(oe)):ye=new Te(Ue+""),ye.c[0]){for(Ze=ye.e,Ue=Ze+at,Ue<3&&(Ue=0);;)if(xe=ye,ye=st.times(xe.plus(l(Le,xe,at,1))),oi(xe.c).slice(0,Ue)===(oe=oi(ye.c)).slice(0,Ue))if(ye.e<Ze&&--Ue,oe=oe.slice(Ue-3,Ue+1),oe=="9999"||!ve&&oe=="4999"){if(!ve&&(et(xe,xe.e+M+2,0),xe.times(xe).eq(Le))){ye=xe;break}at+=4,Ue+=4,ve=1}else{(!+oe||!+oe.slice(1)&&oe.charAt(0)=="5")&&(et(ye,ye.e+M+2,1),q=!ye.times(ye).eq(Le));break}}return et(ye,ye.e+M+1,A,q)},v.toExponential=function(q,oe){return q!=null&&(r(q,0,Wr),q++),Fe(this,q,oe,1)},v.toFixed=function(q,oe){return q!=null&&(r(q,0,Wr),q=q+this.e+1),Fe(this,q,oe)},v.toFormat=function(q,oe,ye){var ve,xe=this;if(ye==null)q!=null&&oe&&typeof oe=="object"?(ye=oe,oe=null):q&&typeof q=="object"?(ye=q,q=oe=null):ye=Rt;else if(typeof ye!="object")throw Error(tr+"Argument not an object: "+ye);if(ve=xe.toFixed(q,oe),xe.c){var Le,$e=ve.split("."),Ue=+ye.groupSize,Ze=+ye.secondaryGroupSize,at=ye.groupSeparator||"",st=$e[0],Mt=$e[1],Wt=xe.s<0,Xt=Wt?st.slice(1):st,tn=Xt.length;if(Ze&&(Le=Ue,Ue=Ze,Ze=Le,tn-=Le),Ue>0&&tn>0){for(Le=tn%Ue||Ue,st=Xt.substr(0,Le);Le<tn;Le+=Ue)st+=at+Xt.substr(Le,Ue);Ze>0&&(st+=at+Xt.slice(Le)),Wt&&(st="-"+st)}ve=Mt?st+(ye.decimalSeparator||"")+((Ze=+ye.fractionGroupSize)?Mt.replace(new RegExp("\\d{"+Ze+"}\\B","g"),"$&"+(ye.fractionGroupSeparator||"")):Mt):st}return(ye.prefix||"")+ve+(ye.suffix||"")},v.toFraction=function(q){var oe,ye,ve,xe,Le,$e,Ue,Ze,at,st,Mt,Wt,Xt=this,tn=Xt.c;if(q!=null&&(Ue=new Te(q),!Ue.isInteger()&&(Ue.c||Ue.s!==1)||Ue.lt(k)))throw Error(tr+"Argument "+(Ue.isInteger()?"out of range: ":"not an integer: ")+ft(Ue));if(!tn)return new Te(Xt);for(oe=new Te(k),at=ye=new Te(k),ve=Ze=new Te(k),Wt=oi(tn),Le=oe.e=Wt.length-Xt.e-1,oe.c[0]=Do[($e=Le%hn)<0?hn+$e:$e],q=!q||Ue.comparedTo(oe)>0?Le>0?oe:at:Ue,$e=Me,Me=1/0,Ue=new Te(Wt),Ze.c[0]=0;st=l(Ue,oe,0,1),xe=ye.plus(st.times(ve)),xe.comparedTo(q)!=1;)ye=ve,ve=xe,at=Ze.plus(st.times(xe=at)),Ze=xe,oe=Ue.minus(st.times(xe=oe)),Ue=xe;return xe=l(q.minus(ye),ve,0,1),Ze=Ze.plus(xe.times(at)),ye=ye.plus(xe.times(ve)),Ze.s=at.s=Xt.s,Le=Le*2,Mt=l(at,ve,Le,A).minus(Xt).abs().comparedTo(l(Ze,ye,Le,A).minus(Xt).abs())<1?[at,ve]:[Ze,ye],Me=$e,Mt},v.toNumber=function(){return+ft(this)},v.toPrecision=function(q,oe){return q!=null&&r(q,1,Wr),Fe(this,q,oe,2)},v.toString=function(q){var oe,ye=this,ve=ye.s,xe=ye.e;return xe===null?ve?(oe="Infinity",ve<0&&(oe="-"+oe)):oe="NaN":(q==null?oe=xe<=z||xe>=ee?g(oi(ye.c),xe):P(oi(ye.c),xe,"0"):q===10&&fn?(ye=et(new Te(ye),M+xe+1,A),oe=P(oi(ye.c),ye.e,"0")):(r(q,2,Ft.length,"Base"),oe=h(P(oi(ye.c),xe,"0"),10,q,ve,!0)),ve<0&&ye.c[0]&&(oe="-"+oe)),oe},v.valueOf=v.toJSON=function(){return ft(this)},v._isBigNumber=!0,v[Symbol.toStringTag]="BigNumber",v[Symbol.for("nodejs.util.inspect.custom")]=v.valueOf,s!=null&&Te.set(s),Te}function si(s){var l=s|0;return s>0||s===l?l:l-1}function oi(s){for(var l,h,p=1,v=s.length,k=s[0]+"";p<v;){for(l=s[p++]+"",h=hn-l.length;h--;l="0"+l);k+=l}for(v=k.length;k.charCodeAt(--v)===48;);return k.slice(0,v+1||1)}function Ls(s,l){var h,p,v=s.c,k=l.c,M=s.s,A=l.s,z=s.e,ee=l.e;if(!M||!A)return null;if(h=v&&!v[0],p=k&&!k[0],h||p)return h?p?0:-A:M;if(M!=A)return M;if(h=M<0,p=z==ee,!v||!k)return p?0:!v^h?1:-1;if(!p)return z>ee^h?1:-1;for(A=(z=v.length)<(ee=k.length)?z:ee,M=0;M<A;M++)if(v[M]!=k[M])return v[M]>k[M]^h?1:-1;return z==ee?0:z>ee^h?1:-1}function r(s,l,h,p){if(s<l||s>h||s!==Sr(s))throw Error(tr+(p||"Argument")+(typeof s=="number"?s<l||s>h?" out of range: ":" not an integer: ":" not a primitive number: ")+String(s))}function c(s){var l=s.c.length-1;return si(s.e/hn)==l&&s.c[l]%2!=0}function g(s,l){return(s.length>1?s.charAt(0)+"."+s.slice(1):s)+(l<0?"e":"e+")+l}function P(s,l,h){var p,v;if(l<0){for(v=h+".";++l;v+=h);s=v+s}else if(p=s.length,++l>p){for(v=h,l-=p;--l;v+=h);s+=v}else l<p&&(s=s.slice(0,l)+"."+s.slice(l));return s}var D=Pl(),le=D,je=class{constructor(s){zt(this,"key");zt(this,"left",null);zt(this,"right",null);this.key=s}},ct=class extends je{constructor(s){super(s)}},vt=class{constructor(){zt(this,"size",0);zt(this,"modificationCount",0);zt(this,"splayCount",0)}splay(s){let l=this.root;if(l==null)return this.compare(s,s),-1;let h=null,p=null,v=null,k=null,M=l,A=this.compare,z;for(;;)if(z=A(M.key,s),z>0){let ee=M.left;if(ee==null||(z=A(ee.key,s),z>0&&(M.left=ee.right,ee.right=M,M=ee,ee=M.left,ee==null)))break;h==null?p=M:h.left=M,h=M,M=ee}else if(z<0){let ee=M.right;if(ee==null||(z=A(ee.key,s),z<0&&(M.right=ee.left,ee.left=M,M=ee,ee=M.right,ee==null)))break;v==null?k=M:v.right=M,v=M,M=ee}else break;return v!=null&&(v.right=M.left,M.left=k),h!=null&&(h.left=M.right,M.right=p),this.root!==M&&(this.root=M,this.splayCount++),z}splayMin(s){let l=s,h=l.left;for(;h!=null;){let p=h;l.left=p.right,p.right=l,l=p,h=l.left}return l}splayMax(s){let l=s,h=l.right;for(;h!=null;){let p=h;l.right=p.left,p.left=l,l=p,h=l.right}return l}_delete(s){if(this.root==null||this.splay(s)!=0)return null;let l=this.root,h=l,p=l.left;if(this.size--,p==null)this.root=l.right;else{let v=l.right;l=this.splayMax(p),l.right=v,this.root=l}return this.modificationCount++,h}addNewRoot(s,l){this.size++,this.modificationCount++;let h=this.root;if(h==null){this.root=s;return}l<0?(s.left=h,s.right=h.right,h.right=null):(s.right=h,s.left=h.left,h.left=null),this.root=s}_first(){let s=this.root;return s==null?null:(this.root=this.splayMin(s),this.root)}_last(){let s=this.root;return s==null?null:(this.root=this.splayMax(s),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(s){return this.validKey(s)&&this.splay(s)==0}defaultCompare(){return(s,l)=>s<l?-1:s>l?1:0}wrap(){return{getRoot:()=>this.root,setRoot:s=>{this.root=s},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:s=>{this.splayCount=s},splay:s=>this.splay(s),has:s=>this.has(s)}}},At=class Zu extends vt{constructor(h,p){super();zt(this,"root",null);zt(this,"compare");zt(this,"validKey");zt(this,jt,"[object Set]");this.compare=h??this.defaultCompare(),this.validKey=p??(v=>v!=null&&v!=null)}delete(h){return this.validKey(h)?this._delete(h)!=null:!1}deleteAll(h){for(let p of h)this.delete(p)}forEach(h){let p=this[Symbol.iterator](),v;for(;v=p.next(),!v.done;)h(v.value,v.value,this)}add(h){let p=this.splay(h);return p!=0&&this.addNewRoot(new ct(h),p),this}addAndReturn(h){let p=this.splay(h);return p!=0&&this.addNewRoot(new ct(h),p),this.root.key}addAll(h){for(let p of h)this.add(p)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(h){if(h==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(h)<0)return this.root.key;let p=this.root.left;if(p==null)return null;let v=p.right;for(;v!=null;)p=v,v=p.right;return p.key}firstAfter(h){if(h==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(h)>0)return this.root.key;let p=this.root.right;if(p==null)return null;let v=p.left;for(;v!=null;)p=v,v=p.left;return p.key}retainAll(h){let p=new Zu(this.compare,this.validKey),v=this.modificationCount;for(let k of h){if(v!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(k)&&this.splay(k)==0&&p.add(this.root.key)}p.size!=this.size&&(this.root=p.root,this.size=p.size,this.modificationCount++)}lookup(h){return!this.validKey(h)||this.splay(h)!=0?null:this.root.key}intersection(h){let p=new Zu(this.compare,this.validKey);for(let v of this)h.has(v)&&p.add(v);return p}difference(h){let p=new Zu(this.compare,this.validKey);for(let v of this)h.has(v)||p.add(v);return p}union(h){let p=this.clone();return p.addAll(h),p}clone(){let h=new Zu(this.compare,this.validKey);return h.size=this.size,h.root=this.copyNode(this.root),h}copyNode(h){if(h==null)return null;function p(k,M){let A,z;do{if(A=k.left,z=k.right,A!=null){let ee=new ct(A.key);M.left=ee,p(A,ee)}if(z!=null){let ee=new ct(z.key);M.right=ee,k=z,M=ee}}while(z!=null)}let v=new ct(h.key);return p(h,v),v}toSet(){return this.clone()}entries(){return new En(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(an=Symbol.iterator,jt=Symbol.toStringTag,an)](){return new rn(this.wrap())}},Gt=class{constructor(s){zt(this,"tree");zt(this,"path",new Array);zt(this,"modificationCount",null);zt(this,"splayCount");this.tree=s,this.splayCount=s.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let s=this.path[this.path.length-1];return this.getValue(s)}rebuildPath(s){this.path.splice(0,this.path.length),this.tree.splay(s),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(s){for(;s!=null;)this.path.push(s),s=s.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let h=this.tree.getRoot();for(;h!=null;)this.path.push(h),h=h.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let s=this.path[this.path.length-1],l=s.right;if(l!=null){for(;l!=null;)this.path.push(l),l=l.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===s;)s=this.path.pop();return this.path.length>0}},rn=class extends Gt{getValue(s){return s.key}},En=class extends Gt{getValue(s){return[s.key,s.key]}},ai=s=>s,Mr=s=>{if(s){let l=new At(uo(s)),h=new At(uo(s)),p=(k,M)=>M.addAndReturn(k),v=k=>({x:p(k.x,l),y:p(k.y,h)});return v({x:new le(0),y:new le(0)}),v}return ai},gi=s=>({set:l=>{fr=gi(l)},reset:()=>gi(s),compare:uo(s),snap:Mr(s),orient:xs(s)}),fr=gi(),Cs=(s,l)=>s.ll.x.isLessThanOrEqualTo(l.x)&&l.x.isLessThanOrEqualTo(s.ur.x)&&s.ll.y.isLessThanOrEqualTo(l.y)&&l.y.isLessThanOrEqualTo(s.ur.y),El=(s,l)=>{if(l.ur.x.isLessThan(s.ll.x)||s.ur.x.isLessThan(l.ll.x)||l.ur.y.isLessThan(s.ll.y)||s.ur.y.isLessThan(l.ll.y))return null;let h=s.ll.x.isLessThan(l.ll.x)?l.ll.x:s.ll.x,p=s.ur.x.isLessThan(l.ur.x)?s.ur.x:l.ur.x,v=s.ll.y.isLessThan(l.ll.y)?l.ll.y:s.ll.y,k=s.ur.y.isLessThan(l.ur.y)?s.ur.y:l.ur.y;return{ll:{x:h,y:v},ur:{x:p,y:k}}},ss=(s,l)=>s.x.times(l.y).minus(s.y.times(l.x)),Ui=(s,l)=>s.x.times(l.x).plus(s.y.times(l.y)),ki=s=>Ui(s,s).sqrt(),Tu=(s,l,h)=>{let p={x:l.x.minus(s.x),y:l.y.minus(s.y)},v={x:h.x.minus(s.x),y:h.y.minus(s.y)};return ss(v,p).div(ki(v)).div(ki(p))},Sl=(s,l,h)=>{let p={x:l.x.minus(s.x),y:l.y.minus(s.y)},v={x:h.x.minus(s.x),y:h.y.minus(s.y)};return Ui(v,p).div(ki(v)).div(ki(p))},Kn=(s,l,h)=>l.y.isZero()?null:{x:s.x.plus(l.x.div(l.y).times(h.minus(s.y))),y:h},Zr=(s,l,h)=>l.x.isZero()?null:{x:h,y:s.y.plus(l.y.div(l.x).times(h.minus(s.x)))},Nu=(s,l,h,p)=>{if(l.x.isZero())return Zr(h,p,s.x);if(p.x.isZero())return Zr(s,l,h.x);if(l.y.isZero())return Kn(h,p,s.y);if(p.y.isZero())return Kn(s,l,h.y);let v=ss(l,p);if(v.isZero())return null;let k={x:h.x.minus(s.x),y:h.y.minus(s.y)},M=ss(k,l).div(v),A=ss(k,p).div(v),z=s.x.plus(A.times(l.x)),ee=h.x.plus(M.times(p.x)),Ne=s.y.plus(A.times(l.y)),Me=h.y.plus(M.times(p.y)),Ye=z.plus(ee).div(2),ht=Ne.plus(Me).div(2);return{x:Ye,y:ht}},ks=class Qg{constructor(l,h){zt(this,"point");zt(this,"isLeft");zt(this,"segment");zt(this,"otherSE");zt(this,"consumedBy");l.events===void 0?l.events=[this]:l.events.push(this),this.point=l,this.isLeft=h}static compare(l,h){let p=Qg.comparePoints(l.point,h.point);return p!==0?p:(l.point!==h.point&&l.link(h),l.isLeft!==h.isLeft?l.isLeft?1:-1:Oo.compare(l.segment,h.segment))}static comparePoints(l,h){return l.x.isLessThan(h.x)?-1:l.x.isGreaterThan(h.x)?1:l.y.isLessThan(h.y)?-1:l.y.isGreaterThan(h.y)?1:0}link(l){if(l.point===this.point)throw new Error("Tried to link already linked events");let h=l.point.events;for(let p=0,v=h.length;p<v;p++){let k=h[p];this.point.events.push(k),k.point=this.point}this.checkForConsuming()}checkForConsuming(){let l=this.point.events.length;for(let h=0;h<l;h++){let p=this.point.events[h];if(p.segment.consumedBy===void 0)for(let v=h+1;v<l;v++){let k=this.point.events[v];k.consumedBy===void 0&&p.otherSE.point.events===k.otherSE.point.events&&p.segment.consume(k.segment)}}}getAvailableLinkedEvents(){let l=[];for(let h=0,p=this.point.events.length;h<p;h++){let v=this.point.events[h];v!==this&&!v.segment.ringOut&&v.segment.isInResult()&&l.push(v)}return l}getLeftmostComparator(l){let h=new Map,p=v=>{let k=v.otherSE;h.set(v,{sine:Tu(this.point,l.point,k.point),cosine:Sl(this.point,l.point,k.point)})};return(v,k)=>{h.has(v)||p(v),h.has(k)||p(k);let{sine:M,cosine:A}=h.get(v),{sine:z,cosine:ee}=h.get(k);return M.isGreaterThanOrEqualTo(0)&&z.isGreaterThanOrEqualTo(0)?A.isLessThan(ee)?1:A.isGreaterThan(ee)?-1:0:M.isLessThan(0)&&z.isLessThan(0)?A.isLessThan(ee)?-1:A.isGreaterThan(ee)?1:0:z.isLessThan(M)?-1:z.isGreaterThan(M)?1:0}}},Xl=0,Oo=class Kc{constructor(l,h,p,v){zt(this,"id");zt(this,"leftSE");zt(this,"rightSE");zt(this,"rings");zt(this,"windings");zt(this,"ringOut");zt(this,"consumedBy");zt(this,"prev");zt(this,"_prevInResult");zt(this,"_beforeState");zt(this,"_afterState");zt(this,"_isInResult");this.id=++Xl,this.leftSE=l,l.segment=this,l.otherSE=h,this.rightSE=h,h.segment=this,h.otherSE=l,this.rings=p,this.windings=v}static compare(l,h){let p=l.leftSE.point.x,v=h.leftSE.point.x,k=l.rightSE.point.x,M=h.rightSE.point.x;if(M.isLessThan(p))return 1;if(k.isLessThan(v))return-1;let A=l.leftSE.point.y,z=h.leftSE.point.y,ee=l.rightSE.point.y,Ne=h.rightSE.point.y;if(p.isLessThan(v)){if(z.isLessThan(A)&&z.isLessThan(ee))return 1;if(z.isGreaterThan(A)&&z.isGreaterThan(ee))return-1;let Me=l.comparePoint(h.leftSE.point);if(Me<0)return 1;if(Me>0)return-1;let Ye=h.comparePoint(l.rightSE.point);return Ye!==0?Ye:-1}if(p.isGreaterThan(v)){if(A.isLessThan(z)&&A.isLessThan(Ne))return-1;if(A.isGreaterThan(z)&&A.isGreaterThan(Ne))return 1;let Me=h.comparePoint(l.leftSE.point);if(Me!==0)return Me;let Ye=l.comparePoint(h.rightSE.point);return Ye<0?1:Ye>0?-1:1}if(A.isLessThan(z))return-1;if(A.isGreaterThan(z))return 1;if(k.isLessThan(M)){let Me=h.comparePoint(l.rightSE.point);if(Me!==0)return Me}if(k.isGreaterThan(M)){let Me=l.comparePoint(h.rightSE.point);if(Me<0)return 1;if(Me>0)return-1}if(!k.eq(M)){let Me=ee.minus(A),Ye=k.minus(p),ht=Ne.minus(z),Et=M.minus(v);if(Me.isGreaterThan(Ye)&&ht.isLessThan(Et))return 1;if(Me.isLessThan(Ye)&&ht.isGreaterThan(Et))return-1}return k.isGreaterThan(M)?1:k.isLessThan(M)||ee.isLessThan(Ne)?-1:ee.isGreaterThan(Ne)?1:l.id<h.id?-1:l.id>h.id?1:0}static fromRing(l,h,p){let v,k,M,A=ks.comparePoints(l,h);if(A<0)v=l,k=h,M=1;else if(A>0)v=h,k=l,M=-1;else throw new Error(`Tried to create degenerate segment at [${l.x}, ${l.y}]`);let z=new ks(v,!0),ee=new ks(k,!1);return new Kc(z,ee,[p],[M])}replaceRightSE(l){this.rightSE=l,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let l=this.leftSE.point.y,h=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:l.isLessThan(h)?l:h},ur:{x:this.rightSE.point.x,y:l.isGreaterThan(h)?l:h}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(l){return l.x.eq(this.leftSE.point.x)&&l.y.eq(this.leftSE.point.y)||l.x.eq(this.rightSE.point.x)&&l.y.eq(this.rightSE.point.y)}comparePoint(l){return fr.orient(this.leftSE.point,l,this.rightSE.point)}getIntersection(l){let h=this.bbox(),p=l.bbox(),v=El(h,p);if(v===null)return null;let k=this.leftSE.point,M=this.rightSE.point,A=l.leftSE.point,z=l.rightSE.point,ee=Cs(h,A)&&this.comparePoint(A)===0,Ne=Cs(p,k)&&l.comparePoint(k)===0,Me=Cs(h,z)&&this.comparePoint(z)===0,Ye=Cs(p,M)&&l.comparePoint(M)===0;if(Ne&&ee)return Ye&&!Me?M:!Ye&&Me?z:null;if(Ne)return Me&&k.x.eq(z.x)&&k.y.eq(z.y)?null:k;if(ee)return Ye&&M.x.eq(A.x)&&M.y.eq(A.y)?null:A;if(Ye&&Me)return null;if(Ye)return M;if(Me)return z;let ht=Nu(k,this.vector(),A,l.vector());return ht===null||!Cs(v,ht)?null:fr.snap(ht)}split(l){let h=[],p=l.events!==void 0,v=new ks(l,!0),k=new ks(l,!1),M=this.rightSE;this.replaceRightSE(k),h.push(k),h.push(v);let A=new Kc(v,M,this.rings.slice(),this.windings.slice());return ks.comparePoints(A.leftSE.point,A.rightSE.point)>0&&A.swapEvents(),ks.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),p&&(v.checkForConsuming(),k.checkForConsuming()),h}swapEvents(){let l=this.rightSE;this.rightSE=this.leftSE,this.leftSE=l,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let h=0,p=this.windings.length;h<p;h++)this.windings[h]*=-1}consume(l){let h=this,p=l;for(;h.consumedBy;)h=h.consumedBy;for(;p.consumedBy;)p=p.consumedBy;let v=Kc.compare(h,p);if(v!==0){if(v>0){let k=h;h=p,p=k}if(h.prev===p){let k=h;h=p,p=k}for(let k=0,M=p.rings.length;k<M;k++){let A=p.rings[k],z=p.windings[k],ee=h.rings.indexOf(A);ee===-1?(h.rings.push(A),h.windings.push(z)):h.windings[ee]+=z}p.rings=null,p.windings=null,p.consumedBy=h,p.leftSE.consumedBy=h.leftSE,p.rightSE.consumedBy=h.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let l=this.prev.consumedBy||this.prev;this._beforeState=l.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let l=this.beforeState();this._afterState={rings:l.rings.slice(0),windings:l.windings.slice(0),multiPolys:[]};let h=this._afterState.rings,p=this._afterState.windings,v=this._afterState.multiPolys;for(let A=0,z=this.rings.length;A<z;A++){let ee=this.rings[A],Ne=this.windings[A],Me=h.indexOf(ee);Me===-1?(h.push(ee),p.push(Ne)):p[Me]+=Ne}let k=[],M=[];for(let A=0,z=h.length;A<z;A++){if(p[A]===0)continue;let ee=h[A],Ne=ee.poly;if(M.indexOf(Ne)===-1)if(ee.isExterior)k.push(Ne);else{M.indexOf(Ne)===-1&&M.push(Ne);let Me=k.indexOf(ee.poly);Me!==-1&&k.splice(Me,1)}}for(let A=0,z=k.length;A<z;A++){let ee=k[A].multiPoly;v.indexOf(ee)===-1&&v.push(ee)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let l=this.beforeState().multiPolys,h=this.afterState().multiPolys;switch(tu.type){case"union":{let p=l.length===0,v=h.length===0;this._isInResult=p!==v;break}case"intersection":{let p,v;l.length<h.length?(p=l.length,v=h.length):(p=h.length,v=l.length),this._isInResult=v===tu.numMultiPolys&&p<v;break}case"xor":{let p=Math.abs(l.length-h.length);this._isInResult=p%2===1;break}case"difference":{let p=v=>v.length===1&&v[0].isSubject;this._isInResult=p(l)!==p(h);break}}return this._isInResult}},nl=class{constructor(s,l,h){zt(this,"poly");zt(this,"isExterior");zt(this,"segments");zt(this,"bbox");if(!Array.isArray(s)||s.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=l,this.isExterior=h,this.segments=[],typeof s[0][0]!="number"||typeof s[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let p=fr.snap({x:new le(s[0][0]),y:new le(s[0][1])});this.bbox={ll:{x:p.x,y:p.y},ur:{x:p.x,y:p.y}};let v=p;for(let k=1,M=s.length;k<M;k++){if(typeof s[k][0]!="number"||typeof s[k][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let A=fr.snap({x:new le(s[k][0]),y:new le(s[k][1])});A.x.eq(v.x)&&A.y.eq(v.y)||(this.segments.push(Oo.fromRing(v,A,this)),A.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=A.x),A.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=A.y),A.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=A.x),A.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=A.y),v=A)}(!p.x.eq(v.x)||!p.y.eq(v.y))&&this.segments.push(Oo.fromRing(v,p,this))}getSweepEvents(){let s=[];for(let l=0,h=this.segments.length;l<h;l++){let p=this.segments[l];s.push(p.leftSE),s.push(p.rightSE)}return s}},Ql=class{constructor(s,l){zt(this,"multiPoly");zt(this,"exteriorRing");zt(this,"interiorRings");zt(this,"bbox");if(!Array.isArray(s))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new nl(s[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let h=1,p=s.length;h<p;h++){let v=new nl(s[h],this,!1);v.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=v.bbox.ll.x),v.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=v.bbox.ll.y),v.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=v.bbox.ur.x),v.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=v.bbox.ur.y),this.interiorRings.push(v)}this.multiPoly=l}getSweepEvents(){let s=this.exteriorRing.getSweepEvents();for(let l=0,h=this.interiorRings.length;l<h;l++){let p=this.interiorRings[l].getSweepEvents();for(let v=0,k=p.length;v<k;v++)s.push(p[v])}return s}},xc=class{constructor(s,l){zt(this,"isSubject");zt(this,"polys");zt(this,"bbox");if(!Array.isArray(s))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof s[0][0][0]=="number"&&(s=[s])}catch{}this.polys=[],this.bbox={ll:{x:new le(Number.POSITIVE_INFINITY),y:new le(Number.POSITIVE_INFINITY)},ur:{x:new le(Number.NEGATIVE_INFINITY),y:new le(Number.NEGATIVE_INFINITY)}};for(let h=0,p=s.length;h<p;h++){let v=new Ql(s[h],this);v.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=v.bbox.ll.x),v.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=v.bbox.ll.y),v.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=v.bbox.ur.x),v.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=v.bbox.ur.y),this.polys.push(v)}this.isSubject=l}getSweepEvents(){let s=[];for(let l=0,h=this.polys.length;l<h;l++){let p=this.polys[l].getSweepEvents();for(let v=0,k=p.length;v<k;v++)s.push(p[v])}return s}},eu=class Qf{constructor(l){zt(this,"events");zt(this,"poly");zt(this,"_isExteriorRing");zt(this,"_enclosingRing");this.events=l;for(let h=0,p=l.length;h<p;h++)l[h].segment.ringOut=this;this.poly=null}static factory(l){let h=[];for(let p=0,v=l.length;p<v;p++){let k=l[p];if(!k.isInResult()||k.ringOut)continue;let M=null,A=k.leftSE,z=k.rightSE,ee=[A],Ne=A.point,Me=[];for(;M=A,A=z,ee.push(A),A.point!==Ne;)for(;;){let Ye=A.getAvailableLinkedEvents();if(Ye.length===0){let Rt=ee[0].point,Ft=ee[ee.length-1].point;throw new Error(`Unable to complete output ring starting at [${Rt.x}, ${Rt.y}]. Last matching segment found ends at [${Ft.x}, ${Ft.y}].`)}if(Ye.length===1){z=Ye[0].otherSE;break}let ht=null;for(let Rt=0,Ft=Me.length;Rt<Ft;Rt++)if(Me[Rt].point===A.point){ht=Rt;break}if(ht!==null){let Rt=Me.splice(ht)[0],Ft=ee.splice(Rt.index);Ft.unshift(Ft[0].otherSE),h.push(new Qf(Ft.reverse()));continue}Me.push({index:ee.length,point:A.point});let Et=A.getLeftmostComparator(M);z=Ye.sort(Et)[0].otherSE;break}h.push(new Qf(ee))}return h}getGeom(){let l=this.events[0].point,h=[l];for(let ee=1,Ne=this.events.length-1;ee<Ne;ee++){let Me=this.events[ee].point,Ye=this.events[ee+1].point;fr.orient(Me,l,Ye)!==0&&(h.push(Me),l=Me)}if(h.length===1)return null;let p=h[0],v=h[1];fr.orient(p,l,v)===0&&h.shift(),h.push(h[0]);let k=this.isExteriorRing()?1:-1,M=this.isExteriorRing()?0:h.length-1,A=this.isExteriorRing()?h.length:-1,z=[];for(let ee=M;ee!=A;ee+=k)z.push([h[ee].x.toNumber(),h[ee].y.toNumber()]);return z}isExteriorRing(){if(this._isExteriorRing===void 0){let l=this.enclosingRing();this._isExteriorRing=l?!l.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var v,k;let l=this.events[0];for(let M=1,A=this.events.length;M<A;M++){let z=this.events[M];ks.compare(l,z)>0&&(l=z)}let h=l.segment.prevInResult(),p=h?h.prevInResult():null;for(;;){if(!h)return null;if(!p)return h.ringOut;if(p.ringOut!==h.ringOut)return((v=p.ringOut)==null?void 0:v.enclosingRing())!==h.ringOut?h.ringOut:(k=h.ringOut)==null?void 0:k.enclosingRing();h=p.prevInResult(),p=h?h.prevInResult():null}}},Ml=class{constructor(s){zt(this,"exteriorRing");zt(this,"interiorRings");this.exteriorRing=s,s.poly=this,this.interiorRings=[]}addInterior(s){this.interiorRings.push(s),s.poly=this}getGeom(){let s=this.exteriorRing.getGeom();if(s===null)return null;let l=[s];for(let h=0,p=this.interiorRings.length;h<p;h++){let v=this.interiorRings[h].getGeom();v!==null&&l.push(v)}return l}},Al=class{constructor(s){zt(this,"rings");zt(this,"polys");this.rings=s,this.polys=this._composePolys(s)}getGeom(){let s=[];for(let l=0,h=this.polys.length;l<h;l++){let p=this.polys[l].getGeom();p!==null&&s.push(p)}return s}_composePolys(s){var h;let l=[];for(let p=0,v=s.length;p<v;p++){let k=s[p];if(!k.poly)if(k.isExteriorRing())l.push(new Ml(k));else{let M=k.enclosingRing();M!=null&&M.poly||l.push(new Ml(M)),(h=M==null?void 0:M.poly)==null||h.addInterior(k)}}return l}},Du=class{constructor(s,l=Oo.compare){zt(this,"queue");zt(this,"tree");zt(this,"segments");this.queue=s,this.tree=new At(l),this.segments=[]}process(s){let l=s.segment,h=[];if(s.consumedBy)return s.isLeft?this.queue.delete(s.otherSE):this.tree.delete(l),h;s.isLeft&&this.tree.add(l);let p=l,v=l;do p=this.tree.lastBefore(p);while(p!=null&&p.consumedBy!=null);do v=this.tree.firstAfter(v);while(v!=null&&v.consumedBy!=null);if(s.isLeft){let k=null;if(p){let A=p.getIntersection(l);if(A!==null&&(l.isAnEndpoint(A)||(k=A),!p.isAnEndpoint(A))){let z=this._splitSafely(p,A);for(let ee=0,Ne=z.length;ee<Ne;ee++)h.push(z[ee])}}let M=null;if(v){let A=v.getIntersection(l);if(A!==null&&(l.isAnEndpoint(A)||(M=A),!v.isAnEndpoint(A))){let z=this._splitSafely(v,A);for(let ee=0,Ne=z.length;ee<Ne;ee++)h.push(z[ee])}}if(k!==null||M!==null){let A=null;k===null?A=M:M===null?A=k:A=ks.comparePoints(k,M)<=0?k:M,this.queue.delete(l.rightSE),h.push(l.rightSE);let z=l.split(A);for(let ee=0,Ne=z.length;ee<Ne;ee++)h.push(z[ee])}h.length>0?(this.tree.delete(l),h.push(s)):(this.segments.push(l),l.prev=p)}else{if(p&&v){let k=p.getIntersection(v);if(k!==null){if(!p.isAnEndpoint(k)){let M=this._splitSafely(p,k);for(let A=0,z=M.length;A<z;A++)h.push(M[A])}if(!v.isAnEndpoint(k)){let M=this._splitSafely(v,k);for(let A=0,z=M.length;A<z;A++)h.push(M[A])}}}this.tree.delete(l)}return h}_splitSafely(s,l){this.tree.delete(s);let h=s.rightSE;this.queue.delete(h);let p=s.split(l);return p.push(h),s.consumedBy===void 0&&this.tree.add(s),p}},Vh=class{constructor(){zt(this,"type");zt(this,"numMultiPolys")}run(s,l,h){rl.type=s;let p=[new xc(l,!0)];for(let z=0,ee=h.length;z<ee;z++)p.push(new xc(h[z],!1));if(rl.numMultiPolys=p.length,rl.type==="difference"){let z=p[0],ee=1;for(;ee<p.length;)El(p[ee].bbox,z.bbox)!==null?ee++:p.splice(ee,1)}if(rl.type==="intersection")for(let z=0,ee=p.length;z<ee;z++){let Ne=p[z];for(let Me=z+1,Ye=p.length;Me<Ye;Me++)if(El(Ne.bbox,p[Me].bbox)===null)return[]}let v=new At(ks.compare);for(let z=0,ee=p.length;z<ee;z++){let Ne=p[z].getSweepEvents();for(let Me=0,Ye=Ne.length;Me<Ye;Me++)v.add(Ne[Me])}let k=new Du(v),M=null;for(v.size!=0&&(M=v.first(),v.delete(M));M;){let z=k.process(M);for(let ee=0,Ne=z.length;ee<Ne;ee++){let Me=z[ee];Me.consumedBy===void 0&&v.add(Me)}v.size!=0?(M=v.first(),v.delete(M)):M=null}fr.reset();let A=eu.factory(k.segments);return new Al(A).getGeom()}},rl=new Vh,tu=rl,Gh=(s,...l)=>tu.run("intersection",s,l),Hh=(s,...l)=>tu.run("difference",s,l);fr.set;function nu(s){let l={type:"Feature"};return l.geometry=s,l}function ru(s){return s.type==="Feature"?s.geometry:s}function Lc(s){return s&&s.geometry&&s.geometry.coordinates?s.geometry.coordinates:s}function Cc(s){return nu({type:"LineString",coordinates:s})}function iu(s){return nu({type:"MultiLineString",coordinates:s})}function kc(s){return nu({type:"Polygon",coordinates:s})}function Pc(s){return nu({type:"MultiPolygon",coordinates:s})}function Ec(s,l){let h=ru(s),p=ru(l),v=Gh(h.coordinates,p.coordinates);return v.length===0?null:v.length===1?kc(v[0]):Pc(v)}function f(s,l){let h=ru(s),p=ru(l),v=Hh(h.coordinates,p.coordinates);return v.length===0?null:v.length===1?kc(v[0]):Pc(v)}function y(s){return Array.isArray(s)?1+y(s[0]):-1}function E(s){s instanceof L.Polyline&&(s=s.toGeoJSON(15));let l=Lc(s),h=y(l),p=[];return h>1?l.forEach(v=>{p.push(Cc(v))}):p.push(s),p}function T(s){let l=[];return s.eachLayer(h=>{l.push(Lc(h.toGeoJSON(15)))}),iu(l)}gr.Cut=gr.Polygon.extend({initialize(s){this._map=s,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let s=this._layer.getLatLngs();if(s.length<=2)return;let l=L.polygon(s,this.options.pathOptions);l._latlngInfos=this._layer._latlngInfo,this.cut(l),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:p,originalLayer:v})=>{this._fireCut(v,p,v),this._fireCut(this._map,p,v),v.pm._fireEdit()}),this._editedLayers=[];let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))},cut(s){let l=this._map._layers,h=s._latlngInfos||[];Object.keys(l).map(p=>l[p]).filter(p=>p.pm).filter(p=>!p._pmTempLayer).filter(p=>!L.PM.optIn&&!p.options.pmIgnore||L.PM.optIn&&p.options.pmIgnore===!1).filter(p=>p instanceof L.Polyline).filter(p=>p!==s).filter(p=>p.pm.options.allowCutting).filter(p=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(p)>-1:!0).filter(p=>!this._layerGroup.hasLayer(p)).filter(p=>{try{let v=!!ri(s.toGeoJSON(15),p.toGeoJSON(15)).features.length>0;return v||p instanceof L.Polyline&&!(p instanceof L.Polygon)?v:!!Ec(s.toGeoJSON(15),p.toGeoJSON(15))}catch{return p instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(p=>{let v;if(p instanceof L.Polygon){v=L.polygon(p.getLatLngs());let z=v.getLatLngs();h.forEach(ee=>{if(ee&&ee.snapInfo){let{latlng:Ne}=ee,Me=this._calcClosestLayer(Ne,[v]);if(Me&&Me.segment&&Me.distance<this.options.snapDistance){let{segment:Ye}=Me;if(Ye&&Ye.length===2){let{indexPath:ht,parentPath:Et,newIndex:Rt}=L.PM.Utils._getIndexFromSegment(z,Ye);(ht.length>1?(0,er.default)(z,Et):z).splice(Rt,0,Ne)}}}})}else v=p;let k=this._cutLayer(s,v),M=L.geoJSON(k,p.options);M.getLayers().length===1&&([M]=M.getLayers()),this._setPane(M,"layerPane");let A=M.addTo(this._map.pm._getContainingLayer());if(A.pm.enable(p.pm.options),A.pm.disable(),p._pmTempLayer=!0,s._pmTempLayer=!0,p.remove(),p.removeFrom(this._map.pm._getContainingLayer()),s.remove(),s.removeFrom(this._map.pm._getContainingLayer()),A.getLayers&&A.getLayers().length===0&&this._map.pm.removeLayer({target:A}),A instanceof L.LayerGroup?(A.eachLayer(z=>{this._addDrawnLayerProp(z)}),this._addDrawnLayerProp(A)):this._addDrawnLayerProp(A),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let z=this.options.layersToCut.indexOf(p);z>-1&&this.options.layersToCut.splice(z,1)}this._editedLayers.push({layer:A,originalLayer:p})})},_cutLayer(s,l){let h=L.geoJSON(),p;if(l instanceof L.Polygon)p=f(l.toGeoJSON(15),s.toGeoJSON(15));else{let v=E(l);v.forEach(k=>{let M=ii(k,s.toGeoJSON(15)),A;M&&M.features.length>0?A=L.geoJSON(M):A=L.geoJSON(k),A.getLayers().forEach(z=>{oo(s.toGeoJSON(15),z.toGeoJSON(15))||z.addTo(h)})}),v.length>1?p=T(h):p=h.toGeoJSON(15)}return p},_change:L.Util.falseFn}),gr.Text=gr.extend({initialize(s){this._map=s,this._shape="Text",this.toolbarButtonName="drawText"},enable(s){L.Util.setOptions(this,s),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(sn("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var s;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(s=this._hintMarker)==null||s.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let l=s;l.target=this._hintMarker,this._handleSnapping(l)}},_createMarker(s){var v,k,M,A;if(!s.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let l=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(v=this.options.textOptions)==null?void 0:v.className){let z=this.options.textOptions.className.split(" ");this.textArea.classList.add(...z)}let h=this._createTextIcon(this.textArea),p=new L.Marker(l,{textMarker:!0,_textMarkerOverPM:!0,icon:h});if(this._setPane(p,"markerPane"),this._finishLayer(p),p.pm||(p.options.draggable=!1),p.addTo(this._map.pm._getContainingLayer()),p.pm){p.pm.textArea=this.textArea,L.setOptions(p.pm,{removeIfEmpty:((k=this.options.textOptions)==null?void 0:k.removeIfEmpty)??!0});let z=((M=this.options.textOptions)==null?void 0:M.focusAfterDraw)??!0;p.pm._createTextMarker(z),(A=this.options.textOptions)!=null&&A.text&&p.pm.setText(this.options.textOptions.text)}this._fireCreate(p),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(s){this.enable(),this._hintMarker.setLatLng(s.latlng)},_createTextArea(){let s=document.createElement("textarea");return s.readOnly=!0,s.classList.add("pm-textarea","pm-disabled"),s},_createTextIcon(s){return L.divIcon({className:"pm-text-marker",html:s})}});var K={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,kr(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let s=this._getDOMElem();s&&(kr(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(s)):L.DomEvent.on(s,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,kr(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let s=this._getDOMElem();s&&(kr(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(s)):L.DomEvent.off(s,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(s){let l=s.touches?s.touches[0]:s,h={originalEvent:l,target:this._layer};return h.containerPoint=this._map.mouseEventToContainerPoint(l),h.latlng=this._map.containerPointToLatLng(h.containerPoint),this._dragMixinOnMouseDown(h),!1},_simulateMouseMoveEvent(s){let l=s.touches?s.touches[0]:s,h={originalEvent:l,target:this._layer};return h.containerPoint=this._map.mouseEventToContainerPoint(l),h.latlng=this._map.containerPointToLatLng(h.containerPoint),this._dragMixinOnMouseMove(h),!1},_simulateMouseUpEvent(s){let l={originalEvent:s.touches?s.touches[0]:s,target:this._layer};return s.type.indexOf("touch")===-1&&(l.containerPoint=this._map.mouseEventToContainerPoint(s),l.latlng=this._map.containerPointToLatLng(l.containerPoint)),this._dragMixinOnMouseUp(l),!1},_dragMixinOnMouseDown(s){if(s.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(s);let l=s._fromLayerSync,h=this._syncLayers("_dragMixinOnMouseDown",s);if(this._layer instanceof L.Marker&&(this.options.snappable&&!l&&!h?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let p="resizeableCircleMarker";this._layer instanceof L.Circle&&(p="resizeableCircle"),this.options.snappable&&!l&&!h?this._layer.pm.options[p]||this._initSnappableMarkersDrag():this._layer.pm.options[p]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=s.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(s){this._overwriteEventIfItComesFromMarker(s);let l=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",s),this._dragging||(this._dragging=!0,L.DomUtil.addClass(l,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=s.latlng),this._onLayerDrag(s),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(s){let l=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",s),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,l&&L.DomUtil.removeClass(l,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(s){let{latlng:l}=s,h={lat:l.lat-this._tempDragCoord.lat,lng:l.lng-this._tempDragCoord.lng},p=v=>v.map(k=>{if(Array.isArray(k))return p(k);let M={lat:k.lat+h.lat,lng:k.lng+h.lng};return(k.alt||k.alt===0)&&(M.alt=k.alt),M});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let v=p([this._layer.getLatLng()]);this._layer.setLatLng(v[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let v=this._layer.getLatLng();this._layer._snapped&&(v=this._layer._orgLatLng);let k=p([v]);this._layer.setLatLng(k[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let v=p([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(v),this._fireChange(this._layer.getBounds(),"Edit")}else{let v=p(this._layer.getLatLngs());this._layer.setLatLngs(v),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=l,s.layer=this._layer,this._fireDrag(s)},addDraggingClass(){let s=this._getDOMElem();s&&L.DomUtil.addClass(s,"leaflet-pm-draggable")},removeDraggingClass(){let s=this._getDOMElem();s&&L.DomUtil.removeClass(s,"leaflet-pm-draggable")},_getDOMElem(){let s=null;return this._layer._path?s=this._layer._path:this._layer._renderer&&this._layer._renderer._container?s=this._layer._renderer._container:this._layer._image?s=this._layer._image:this._layer._icon&&(s=this._layer._icon),s},_overwriteEventIfItComesFromMarker(s){s.target.getLatLng&&(!s.target._radius||s.target._radius<=10)&&(s.containerPoint=this._map.mouseEventToContainerPoint(s.originalEvent),s.latlng=this._map.containerPointToLatLng(s.containerPoint))},_syncLayers(s,l){if(this.enabled())return!1;if(!l._fromLayerSync&&this._layer===l.target&&this.options.syncLayersOnDrag){l._fromLayerSync=!0;let h=[];if(L.Util.isArray(this.options.syncLayersOnDrag))h=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(p=>{p instanceof L.LayerGroup&&(h=h.concat(p.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let p in this._parentLayerGroup){let v=this._parentLayerGroup[p];v.pm&&(h=v.pm.getLayers(!0))}return L.Util.isArray(h)&&h.length>0&&(h=h.filter(p=>!!p.pm).filter(p=>!!p.pm.options.draggable),h.forEach(p=>{p!==this._layer&&p.pm[s]&&(p._snapped=!1,p.pm[s](l))})),h.length>0}return!1},_stopDOMImageDrag(s){return s.preventDefault(),!1}},ae=K,ue=m(wi());function pe(s,l,h,p){return h.unproject(l.transform(h.project(s,p)),p)}function ge(s,l,h){let p=h.getMaxZoom();if(p===1/0&&(p=h.getZoom()),L.Util.isArray(s)){let v=[];return s.forEach(k=>{v.push(ge(k,l,h))}),v}return s instanceof L.LatLng?pe(s,l,h,p):null}function Se(s,l){l instanceof L.Layer&&(l=l.getLatLng());let h=s.getMaxZoom();return h===1/0&&(h=s.getZoom()),s.project(l,h)}function He(s,l){let h=s.getMaxZoom();return h===1/0&&(h=s.getZoom()),s.unproject(l,h)}var pt={_onRotateStart(s){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Se(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Se(this._map,s.target.getLatLng()),this._initialRotateLatLng=Di(this._layer),this._startAngle=this.getAngle();let l=Di(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,l),this._fireRotationStart(this._map,l)},_onRotate(s){let l=Se(this._map,s.target.getLatLng()),h=this._rotationStartPoint,p=this._rotationOriginPoint,v=Math.atan2(l.y-p.y,l.x-p.x)-Math.atan2(h.y-p.y,h.x-p.x);this._layer.setLatLngs(this._rotateLayer(v,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let k=this;function M(Ne,Me=[],Ye=-1){if(Ye>-1&&Me.push(Ye),L.Util.isArray(Ne[0]))Ne.forEach((ht,Et)=>M(ht,Me.slice(),Et));else{let ht=Me.length>0?(0,ue.default)(k._markers,Me):k._markers[0];Ne.forEach((Et,Rt)=>{ht[Rt].setLatLng(Et)})}}M(this._layer.getLatLngs());let A=Di(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(v,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let z=v*180/Math.PI;z=z<0?z+360:z;let ee=z+this._startAngle;this._setAngle(ee),this._rotationLayer.pm._setAngle(ee),this._fireRotation(this._rotationLayer,z,A),this._fireRotation(this._map,z,A),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let s=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let l=Di(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Di(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,s,l),this._fireRotationEnd(this._map,s,l),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(s,l,h,p,v){let k=Se(v,h);return this._matrix=p.clone().rotate(s,k).flip(),ge(l,this._matrix,v)},_setAngle(s){s=s<0?s+360:s,this._angle=s%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let s=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),l=s.getCenter();return s.removeFrom(this._layer._map),l},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(vs(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let s={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),s),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Di(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(s){let l=this.getAngle(),h=this._layer.getLatLngs(),p=s*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(p,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+s),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(p,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let v=this.getAngle()-l;v=v<0?v+360:v,this._startAngle=l,this._fireRotation(this._layer,v,h,this._layer),this._fireRotation(this._map||this._layer._map,v,h,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(s){let l=s-this.getAngle();this.rotateLayer(l)},getAngle(){return this._angle||0},setInitAngle(s){this._setAngle(s)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(s){this._rotationCenter=s,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(s)}},mt=pt,nt=L.Class.extend({includes:[ae,Bo,mt,So],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(s){L.Util.setOptions(this,s)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(s,l){l==="layerPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":l==="vertexPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":l==="markerPane"&&(s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(s,l){let h=l.target,p={layer:this._layer,marker:h,event:l},v="";return s==="move"?v="moveVertexValidation":s==="add"?v="addVertexValidation":s==="remove"&&(v="removeVertexValidation"),this.options[v]&&typeof this.options[v]=="function"&&!this.options[v](p)?(s==="move"&&(h._cancelDragEventChain=h.getLatLng()),!1):(h._cancelDragEventChain=null,!0)},_vertexValidationDrag(s){return s._cancelDragEventChain?(s._latlng=s._cancelDragEventChain,s.update(),!1):!0},_vertexValidationDragEnd(s){return s._cancelDragEventChain?(s._cancelDragEventChain=null,!1):!0}}),Lt=nt;Lt.LayerGroup=L.Class.extend({initialize(s){this._layerGroup=s,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(p=>this._initLayer(p));let l=p=>{if(p.layer._pmTempLayer)return;this._layers=this.getLayers();let v=this._layers.filter(k=>!k.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in k.pm._parentLayerGroup));v.forEach(k=>{this._initLayer(k)}),v.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(l,100,this),this),this._layerGroup.on("layerremove",p=>{this._removeLayerFromGroup(p.target)},this);let h=p=>{p.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(h,100,this),this)},enable(s,l=[]){l.length===0&&(this._layers=this.getLayers()),this._options=s,this._layers.forEach(h=>{h instanceof L.LayerGroup?l.indexOf(h._leaflet_id)===-1&&(l.push(h._leaflet_id),h.pm.enable(s,l)):h.pm.enable(s)})},disable(s=[]){s.length===0&&(this._layers=this.getLayers()),this._layers.forEach(l=>{l instanceof L.LayerGroup?s.indexOf(l._leaflet_id)===-1&&(s.push(l._leaflet_id),l.pm.disable(s)):l.pm.disable()})},enabled(s=[]){return s.length===0&&(this._layers=this.getLayers()),!!this._layers.find(l=>l instanceof L.LayerGroup?s.indexOf(l._leaflet_id)===-1?(s.push(l._leaflet_id),l.pm.enabled(s)):!1:l.pm.enabled())},toggleEdit(s,l=[]){l.length===0&&(this._layers=this.getLayers()),this._options=s,this._layers.forEach(h=>{h instanceof L.LayerGroup?l.indexOf(h._leaflet_id)===-1&&(l.push(h._leaflet_id),h.pm.toggleEdit(s,l)):h.pm.toggleEdit(s)})},_initLayer(s){let l=L.Util.stamp(this._layerGroup);s.pm._parentLayerGroup||(s.pm._parentLayerGroup={}),s.pm._parentLayerGroup[l]=this._layerGroup},_removeLayerFromGroup(s){if(s.pm&&s.pm._layerGroup){let l=L.Util.stamp(this._layerGroup);delete s.pm._layerGroup[l]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(s=>s.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var s;return this._map||((s=this._layers.find(l=>!!l._map))==null?void 0:s._map)||null},getLayers(s=!1,l=!0,h=!0,p=[]){let v=[];return s?this._layerGroup.getLayers().forEach(k=>{v.push(k),k instanceof L.LayerGroup&&p.indexOf(k._leaflet_id)===-1&&(p.push(k._leaflet_id),v=v.concat(k.pm.getLayers(!0,!0,!0,p)))}):v=this._layerGroup.getLayers(),h&&(v=v.filter(k=>!(k instanceof L.LayerGroup))),l&&(v=v.filter(k=>!!k.pm),v=v.filter(k=>!k._pmTempLayer),v=v.filter(k=>!L.PM.optIn&&!k.options.pmIgnore||L.PM.optIn&&k.options.pmIgnore===!1)),v},setOptions(s,l=[]){l.length===0&&(this._layers=this.getLayers()),this.options=s,this._layers.forEach(h=>{h.pm&&(h instanceof L.LayerGroup?l.indexOf(h._leaflet_id)===-1&&(l.push(h._leaflet_id),h.pm.setOptions(s,l)):h.pm.setOptions(s))})}}),Lt.Marker=Lt.extend({_shape:"Marker",initialize(s){this._layer=s,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(s={draggable:!0}){if(L.Util.setOptions(this,s),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(s){let l=s.target;l.remove(),this._fireRemove(l),this._fireRemove(this._map,l)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let s=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,s.off("pm:drag",this._handleSnapping,this),s.on("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.on("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this),s.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let s=this._layer;s.off("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this)}});var bt=m(wi()),Ke={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let s=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=s.filter((l,h,p)=>p.indexOf(l)===h)},_removeFromCache(s){let l=this.markerCache.indexOf(s);l>-1&&this.markerCache.splice(l,1)},renderLimits(s){this.markerCache.forEach(l=>{s.includes(l)?this._markerGroup.addLayer(l):this._markerGroup.removeLayer(l)})},applyLimitFilters({latlng:s={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let l=[...this._filterClosestMarkers(s)];this.renderLimits(l)},_filterClosestMarkers(s){let l=[...this.markerCache],h=this.options.limitMarkersToCount;return h===-1?l:(l.sort((p,v)=>{let k=p._latlng.distanceTo(s),M=v._latlng.distanceTo(s);return k-M}),l.filter((p,v)=>h>-1?v<h:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(s){this._preventRenderMarkers=!!s}},Xe=Ke;Lt.Line=Lt.extend({includes:[Xe],_shape:"Line",initialize(s){this._layer=s,this._enabled=!1},enable(s){if(L.Util.setOptions(this,s),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let s=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(s,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(s){return this.enabled()?this.disable():this.enable(s),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let s=this._map,l=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(s),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let h=p=>{if(Array.isArray(p[0]))return p.map(h,this);let v=p.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&p.map((k,M)=>{let A=this.isPolygon()?(M+1)%p.length:M+1;return this._createMiddleMarker(v[M],v[A])}),v};this._markers=h(l),this.filterMarkerGroup(),s.addLayer(this._markerGroup)},_createMarker(s){let l=new L.Marker(s,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(l,"vertexPane"),l._pmTempLayer=!0,this.options.rotate?(l.on("dragstart",this._onRotateStart,this),l.on("drag",this._onRotate,this),l.on("dragend",this._onRotateEnd,this)):(l.on("click",this._onVertexClick,this),l.on("dragstart",this._onMarkerDragStart,this),l.on("move",this._onMarkerDrag,this),l.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||l.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(l),l},_createMiddleMarker(s,l){if(!s||!l)return!1;let h=L.PM.Utils.calcMiddleLatLng(this._map,s.getLatLng(),l.getLatLng()),p=this._createMarker(h),v=L.divIcon({className:"marker-icon marker-icon-middle"});return p.setIcon(v),p.leftM=s,p.rightM=l,s._middleMarkerNext=p,l._middleMarkerPrev=p,p.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),p.on("movestart",this._onMiddleMarkerMoveStart,this),p},_onMiddleMarkerClick(s){let l=s.target;if(!this._vertexValidation("add",s))return;let h=L.divIcon({className:"marker-icon"});l.setIcon(h),this._addMarker(l,l.leftM,l.rightM)},_onMiddleMarkerMoveStart(s){let l=s.target;if(l.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",s)){l.on("move",this._onMiddleMarkerMovePrevent,this);return}l._dragging=!0,this._addMarker(l,l.leftM,l.rightM)},_onMiddleMarkerMovePrevent(s){let l=s.target;this._vertexValidationDrag(l)},_onMiddleMarkerMoveEnd(s){let l=s.target;if(l.off("move",this._onMiddleMarkerMovePrevent,this),l.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(l))return;let h=L.divIcon({className:"marker-icon"});l.setIcon(h),setTimeout(()=>{delete l._dragging},100)},_addMarker(s,l,h){s.off("movestart",this._onMiddleMarkerMoveStart,this),s.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let p=s.getLatLng(),v=this._layer._latlngs;delete s.leftM,delete s.rightM;let{indexPath:k,index:M,parentPath:A}=L.PM.Utils.findDeepMarkerIndex(this._markers,l),z=k.length>1?(0,bt.default)(v,A):v,ee=k.length>1?(0,bt.default)(this._markers,A):this._markers;z.splice(M+1,0,p),ee.splice(M+1,0,s),this._layer.setLatLngs(v),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(l,s),this._createMiddleMarker(s,h)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(s,L.PM.Utils.findDeepMarkerIndex(this._markers,s).indexPath,p),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return Bn(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(s){let l=this._layer,h,p;if(this.options.allowSelfIntersection?h=!1:(p=Bn(this._layer.toGeoJSON(15)),h=p.features.length>0),h){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return h;s?this._flashLayer():(l.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(p)}else l.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return h},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(s,l){s.forEach(h=>{Array.isArray(h)?this._updateDisabledMarkerStyle(h,l):h._icon&&(l&&!this._checkMarkerAllowedToDrag(h)?L.DomUtil.addClass(h._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(h._icon,"vertexmarker-disabled"))})},_removeMarker(s){let l=s.target;if(!this._vertexValidation("remove",s))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=Di(this._layer,this._layer.getLatLngs()));let h=this._layer.getLatLngs(),{indexPath:p,index:v,parentPath:k}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);if(!p)return;let M=p.length>1?(0,bt.default)(h,k):h,A=p.length>1?(0,bt.default)(this._markers,k):this._markers,z=k[k.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!z&&(M.length<=2||this.isPolygon()&&M.length<=3)){this._flashLayer();return}M.splice(v,1),this._layer.setLatLngs(h),this.isPolygon()&&M.length<=2&&M.splice(0,M.length);let ee=!1;if(M.length<=1&&(M.splice(0,M.length),k.length>1&&p.length>1&&(h=Mo(h)),this._layer.setLatLngs(h),this._initMarkers(),ee=!0),ei(h)||this._layer.remove(),h=Mo(h),this._layer.setLatLngs(h),this._markers=Mo(this._markers),!ee&&(A=p.length>1?(0,bt.default)(this._markers,k):this._markers,l._middleMarkerPrev&&(this._markerGroup.removeLayer(l._middleMarkerPrev),this._removeFromCache(l._middleMarkerPrev)),l._middleMarkerNext&&(this._markerGroup.removeLayer(l._middleMarkerNext),this._removeFromCache(l._middleMarkerNext)),this._markerGroup.removeLayer(l),this._removeFromCache(l),A)){let Ne,Me;if(this.isPolygon()?(Ne=(v+1)%A.length,Me=(v+(A.length-1))%A.length):(Me=v-1<0?void 0:v-1,Ne=v+1>=A.length?void 0:v+1),Ne!==Me){let Ye=A[Me],ht=A[Ne];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(Ye,ht)}A.splice(v,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(l,p),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(s){let l=this._layer.getLatLngs(),h=s.getLatLng(),{indexPath:p,index:v,parentPath:k}=L.PM.Utils.findDeepMarkerIndex(this._markers,s);(p.length>1?(0,bt.default)(l,k):l).splice(v,1,h),this._layer.setLatLngs(l)},_getNeighborMarkers(s){let{indexPath:l,index:h,parentPath:p}=L.PM.Utils.findDeepMarkerIndex(this._markers,s),v=l.length>1?(0,bt.default)(this._markers,p):this._markers,k=(h+1)%v.length,M=(h+(v.length-1))%v.length,A=v[M],z=v[k];return{prevMarker:A,nextMarker:z}},_checkMarkerAllowedToDrag(s){let{prevMarker:l,nextMarker:h}=this._getNeighborMarkers(s),p=L.polyline([l.getLatLng(),s.getLatLng()]),v=L.polyline([s.getLatLng(),h.getLatLng()]),k=ri(this._layer.toGeoJSON(15),p.toGeoJSON(15)).features.length,M=ri(this._layer.toGeoJSON(15),v.toGeoJSON(15)).features.length;return s.getLatLng()===this._markers[0][0].getLatLng()?M+=1:s.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(k+=1),!(k<=2&&M<=2)},_onMarkerDragStart(s){let l=s.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",s))return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireMarkerDragStart(s,h),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Di(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(l):this._markerAllowedToDrag=null},_onMarkerDrag(s){let l=s.target;if(!this._vertexValidationDrag(l))return;let{indexPath:h,index:p,parentPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);if(!h)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(l);let k=h.length>1?(0,bt.default)(this._markers,v):this._markers,M=(p+1)%k.length,A=(p+(k.length-1))%k.length,z=l.getLatLng(),ee=k[A].getLatLng(),Ne=k[M].getLatLng();if(l._middleMarkerNext){let Me=L.PM.Utils.calcMiddleLatLng(this._map,z,Ne);l._middleMarkerNext.setLatLng(Me)}if(l._middleMarkerPrev){let Me=L.PM.Utils.calcMiddleLatLng(this._map,z,ee);l._middleMarkerPrev.setLatLng(Me)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(s,h),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(s){let l=s.target;if(!this._vertexValidationDragEnd(l))return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l),p=!this.options.allowSelfIntersection&&this.hasSelfIntersection();p&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(p=!1);let v=!this.options.allowSelfIntersection&&p;if(this._fireMarkerDragEnd(s,h,v),v){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(s,h);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(s){let l=s.target;if(l._dragging)return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireVertexClick(s,h)}}),Lt.Polygon=Lt.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(s){let{prevMarker:l,nextMarker:h}=this._getNeighborMarkers(s),p=L.polyline([l.getLatLng(),s.getLatLng()]),v=L.polyline([s.getLatLng(),h.getLatLng()]),k=ri(this._layer.toGeoJSON(15),p.toGeoJSON(15)).features.length,M=ri(this._layer.toGeoJSON(15),v.toGeoJSON(15)).features.length;return!(k<=2&&M<=2)}}),Lt.Rectangle=Lt.Polygon.extend({_shape:"Rectangle",_initMarkers(){let s=this._map,l=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,s.addLayer(this._markerGroup),this._markers=[],this._markers[0]=l.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((h,p)=>{let v=this._cornerMarkers.find(k=>k._index===p);v&&v.setLatLng(h)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(s,l){let h=new L.Marker(s,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._origLatLng=s,h._index=l,h._pmTempLayer=!0,h.on("click",this._onVertexClick,this),this._markerGroup.addLayer(h),h},_addMarkerEvents(){this._markers[0].forEach(s=>{s.on("dragstart",this._onMarkerDragStart,this),s.on("drag",this._onMarkerDrag,this),s.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||s.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(s){if(!this._vertexValidation("move",s))return;let l=s.target,h=this._cornerMarkers;l._oppositeCornerLatLng=h.find(v=>v._index===(l._index+2)%4).getLatLng(),l._snapped=!1;let{indexPath:p}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireMarkerDragStart(s,p)},_onMarkerDrag(s){let l=s.target;if(!this._vertexValidationDrag(l)||l._index===void 0)return;this._adjustRectangleForMarkerMove(l);let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireMarkerDrag(s,h),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(s){let l=s.target;if(!this._vertexValidationDragEnd(l))return;this._cornerMarkers.forEach(p=>{delete p._oppositeCornerLatLng});let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireMarkerDragEnd(s,h),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(s){L.extend(s._origLatLng,s._latlng);let l=L.PM.Utils._getRotatedRectangle(s.getLatLng(),s._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(l),this._adjustAllMarkers(s),this._layer.redraw()},_adjustAllMarkers(s){let l=this._layer.getLatLngs()[0];if(l&&l.length!==4&&l.length>0)l.forEach((h,p)=>{this._cornerMarkers[p].setLatLng(h)}),this._cornerMarkers.slice(l.length).forEach(h=>{h.setLatLng(l[0])});else if(!l||!l.length)console.error("The layer has no LatLngs");else{let h=l.findIndex(p=>s.getLatLng().equals(p));h>-1?(this._cornerMarkers[(s._index+1)%4].setLatLng(l[(h+1)%4]),this._cornerMarkers[(s._index+2)%4].setLatLng(l[(h+2)%4]),this._cornerMarkers[(s._index+3)%4].setLatLng(l[(h+3)%4])):this._cornerMarkers.forEach(p=>{p.setLatLng(l[p._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(vs(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let s=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(s[0],s[2],this.getAngle(),this._map||this)}}),Lt.CircleMarker=Lt.extend({_shape:"CircleMarker",initialize(s){this._layer=s,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(s={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,s),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let s=this._map;this._helperLayers&&(this._helperLayers.removeFrom(s),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(s);let l=this._layer.getLatLng(),h=this._layer._radius,p=this._getLatLngOnCircle(l,h);this._centerMarker=this._createCenterMarker(l),this._outerMarker=this._createOuterMarker(p),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(s,l){let h=this._map.project(s),p=L.point(h.x+l,h.y);return this._map.unproject(p)},_createHintLine(s,l){let h=s.getLatLng(),p=l.getLatLng();this._hintline=L.polyline([h,p],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(s){let l=this._createMarker(s);return this.options.draggable?(L.DomUtil.addClass(l._icon,"leaflet-pm-draggable"),l.on("move",this._moveCircle,this)):l.dragging.disable(),l},_createOuterMarker(s){let l=this._createMarker(s);return l.on("drag",this._resizeCircle,this),l},_createMarker(s){let l=new L.Marker(s,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(l,"vertexPane"),l._origLatLng=s,l._pmTempLayer=!0,l.on("dragstart",this._onMarkerDragStart,this),l.on("drag",this._onMarkerDrag,this),l.on("dragend",this._onMarkerDragEnd,this),l.on("click",this._onVertexClick,this),this._helperLayers.addLayer(l),l},_moveCircle(s){if(s.target._cancelDragEventChain)return;let l=this._centerMarker.getLatLng();this._layer.setLatLng(l);let h=this._layer._radius,p=this._getLatLngOnCircle(l,h);this._outerMarker._latlng=p,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let s=this._layer.getLatLng(),l=this._layer._radius,h=this._getLatLngOnCircle(s,l);this._outerMarker.setLatLng(h),this._centerMarker.setLatLng(s),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let s=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng(),h=this._distanceCalculation(s,l);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(h),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let s=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng();this._hintline.setLatLngs([s,l])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(s){this._vertexValidation("move",s)&&this._fireMarkerDragStart(s)},_onMarkerDrag(s){let l=s.target;l instanceof L.Marker&&!this._vertexValidationDrag(l)||this._fireMarkerDrag(s)},_onMarkerDragEnd(s){this._extedingMarkerDragEnd();let l=s.target;this._vertexValidationDragEnd(l)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(s))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let s=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,s.off("pm:drag",this._handleSnapping,this),s.on("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.on("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this),s.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let s=this._layer;s.off("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let s=this._layer._map||this._map;if(s){let l=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),s,this._layer.getLatLng()),h=L.circle(this._layer.getLatLng(),this._layer.options);h.setRadius(l);let p=s&&s.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(h,200,!p).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(h,200,!p),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let s=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng(),h=this._distanceCalculation(s,l);return this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?l=Qo(this._map,s,l,this._getMinDistanceInMeter(s)):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(l=Qo(this._map,s,l,this._getMaxDistanceInMeter(s))),l},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let s=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng(),h=this._distanceCalculation(s,l);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(s,l){return this._map.project(s).distanceTo(this._map.project(l))},_getMinDistanceInMeter(s){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,s)},_getMaxDistanceInMeter(s){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,s)},_onVertexClick(s){s.target._dragging||this._fireVertexClick(s,void 0)}}),Lt.Circle=Lt.CircleMarker.extend({_shape:"Circle",initialize(s){this._layer=s,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(s){L.PM.Edit.CircleMarker.prototype.enable.call(this,s||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let s=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(s,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let s=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!s).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!s),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(s,l){return this._map.distance(s,l)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(s){s.target._dragging||this._fireVertexClick(s,void 0)}}),Lt.ImageOverlay=Lt.extend({_shape:"ImageOverlay",initialize(s){this._layer=s,this._enabled=!1},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},enabled(){return this._enabled},enable(s={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,s),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let s=this._layer.getBounds(),l=s.getNorthWest(),h=s.getNorthEast(),p=s.getSouthEast(),v=s.getSouthWest();return[l,h,p,v]}}),Lt.Text=Lt.extend({_shape:"Text",initialize(s){this._layer=s,this._enabled=!1},enable(s){if(L.Util.setOptions(this,s),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let s=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),s.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let s=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,s.off("pm:drag",this._handleSnapping,this),s.on("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.on("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this),s.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let s=this._layer;s.off("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let s=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,l=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${s}px`,this.textArea.style.width=`${l}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(s){s.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(s={}){let l=this._hasFocus;this._hasFocus=s.type==="focus",!l!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(s){s&&(this.textArea.value=s),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let l=this.options.className.split(" ");this.textArea.classList.add(...l)}let s=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(s),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(s=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),s===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(s){s.preventDefault()}});var Pt=function(s,l,h,p,v,k){this._matrix=[s,l,h,p,v,k]};Pt.init=()=>new L.PM.Matrix(1,0,0,1,0,0),Pt.prototype={transform(s){return this._transform(s.clone())},_transform(s){let l=this._matrix,{x:h,y:p}=s;return s.x=l[0]*h+l[1]*p+l[4],s.y=l[2]*h+l[3]*p+l[5],s},untransform(s){let l=this._matrix;return new L.Point((s.x/l[0]-l[4])/l[0],(s.y/l[2]-l[5])/l[2])},clone(){let s=this._matrix;return new L.PM.Matrix(s[0],s[1],s[2],s[3],s[4],s[5])},translate(s){if(s===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let l,h;return typeof s=="number"?(l=s,h=s):(l=s.x,h=s.y),this._add(1,0,0,1,l,h)},scale(s,l){if(s===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let h,p;return l=l||L.point(0,0),typeof s=="number"?(h=s,p=s):(h=s.x,p=s.y),this._add(h,0,0,p,l.x,l.y)._add(1,0,0,1,-l.x,-l.y)},rotate(s,l){let h=Math.cos(s),p=Math.sin(s);return l=l||new L.Point(0,0),this._add(h,p,-p,h,l.x,l.y)._add(1,0,0,1,-l.x,-l.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(s,l,h,p,v,k){let M=[[],[],[]],A=this._matrix,z=[[A[0],A[2],A[4]],[A[1],A[3],A[5]],[0,0,1]],ee=[[s,h,v],[l,p,k],[0,0,1]],Ne;s&&s instanceof L.PM.Matrix&&(A=s._matrix,ee=[[A[0],A[2],A[4]],[A[1],A[3],A[5]],[0,0,1]]);for(let Me=0;Me<3;Me+=1)for(let Ye=0;Ye<3;Ye+=1){Ne=0;for(let ht=0;ht<3;ht+=1)Ne+=z[Me][ht]*ee[ht][Ye];M[Me][Ye]=Ne}return this._matrix=[M[0][0],M[1][0],M[0][1],M[1][1],M[0][2],M[1][2]],this}};var Bt=Pt,St={calcMiddleLatLng(s,l,h){let p=s.project(l),v=s.project(h);return s.unproject(p._add(v)._divideBy(2))},findLayers(s){let l=[];return s.eachLayer(h=>{(h instanceof L.Polyline||h instanceof L.Marker||h instanceof L.Circle||h instanceof L.CircleMarker||h instanceof L.ImageOverlay)&&l.push(h)}),l=l.filter(h=>!!h.pm),l=l.filter(h=>!h._pmTempLayer),l=l.filter(h=>!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1),l},circleToPolygon(s,l=60,h=!0){let p=s.getLatLng(),v=s.getRadius(),k=ci(p,v,l,0,h),M=[];for(let A=0;A<k.length;A+=1){let z=[k[A].lat,k[A].lng];M.push(z)}return L.polygon(M,s.options)},disablePopup(s){s.getPopup()&&(s._tempPopupCopy=s.getPopup(),s.unbindPopup())},enablePopup(s){s._tempPopupCopy&&(s.bindPopup(s._tempPopupCopy),delete s._tempPopupCopy)},_fireEvent(s,l,h,p=!1){s.fire(l,h,p);let{groups:v}=this.getAllParentGroups(s);v.forEach(k=>{k.fire(l,h,p)})},getAllParentGroups(s){let l=[],h=[],p=v=>{for(let k in v._eventParents)if(l.indexOf(k)===-1){l.push(k);let M=v._eventParents[k];h.push(M),p(M)}};return!s._pmLastGroupFetch||!s._pmLastGroupFetch.time||new Date().getTime()-s._pmLastGroupFetch.time>1e3?(p(s),s._pmLastGroupFetch={time:new Date().getTime(),groups:h,groupIds:l},{groupIds:l,groups:h}):{groups:s._pmLastGroupFetch.groups,groupIds:s._pmLastGroupFetch.groupIds}},createGeodesicPolygon:ci,getTranslation:sn,findDeepCoordIndex(s,l,h=!0){let p,v=M=>(A,z)=>{let ee=M.concat(z);if(h){if(A.lat&&A.lat===l.lat&&A.lng===l.lng)return p=ee,!0}else if(A.lat&&L.latLng(A).equals(l))return p=ee,!0;return Array.isArray(A)&&A.some(v(ee))};s.some(v([]));let k={};return p&&(k={indexPath:p,index:p[p.length-1],parentPath:p.slice(0,p.length-1)}),k},findDeepMarkerIndex(s,l){let h,p=k=>(M,A)=>{let z=k.concat(A);return M._leaflet_id===l._leaflet_id?(h=z,!0):Array.isArray(M)&&M.some(p(z))};s.some(p([]));let v={};return h&&(v={indexPath:h,index:h[h.length-1],parentPath:h.slice(0,h.length-1)}),v},_getIndexFromSegment(s,l){if(l&&l.length===2){let h=this.findDeepCoordIndex(s,l[0]),p=this.findDeepCoordIndex(s,l[1]),v=Math.max(h.index,p.index);return(h.index===0||p.index===0)&&v!==1&&(v+=1),{indexA:h,indexB:p,newIndex:v,indexPath:h.indexPath,parentPath:h.parentPath}}return null},_getRotatedRectangle(s,l,h,p){let v=Se(p,s),k=Se(p,l),M=h*Math.PI/180,A=Math.cos(M),z=Math.sin(M),ee=(k.x-v.x)*A+(k.y-v.y)*z,Ne=(k.y-v.y)*A-(k.x-v.x)*z,Me=ee*A+v.x,Ye=ee*z+v.y,ht=-Ne*z+v.x,Et=Ne*A+v.y,Rt=He(p,v),Ft=He(p,{x:Me,y:Ye}),fn=He(p,k),Te=He(p,{x:ht,y:Et});return[Rt,Ft,fn,Te]},pxRadiusToMeterRadius(s,l,h){let p=l.project(h),v=L.point(p.x+s,p.y);return l.distance(l.unproject(v),h)}},Kt=St;L.PM=L.PM||{version:Co.version,Map:Ao,Toolbar:Ea,Draw:gr,Edit:Lt,Utils:Kt,Matrix:Bt,activeLang:"en",optIn:!1,initialize(s){this.addInitHooks(s)},setOptIn(s){this.optIn=!!s},addInitHooks(){function s(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(s);function l(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(l);function h(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(h);function p(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(p);function v(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(v);function k(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(k);function M(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(M);function A(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(A);function z(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(z)},reInitLayer(s){s instanceof L.LayerGroup&&s.eachLayer(l=>{this.reInitLayer(l)}),s.pm||L.PM.optIn&&s.options.pmIgnore!==!1||s.options.pmIgnore||(s instanceof L.Map?s.pm=new L.PM.Map(s):s instanceof L.Marker?s.options.textMarker?(s.pm=new L.PM.Edit.Text(s),s.pm._initTextMarker(),s.pm._createTextMarker(!1)):s.pm=new L.PM.Edit.Marker(s):s instanceof L.Circle?s.pm=new L.PM.Edit.Circle(s):s instanceof L.CircleMarker?s.pm=new L.PM.Edit.CircleMarker(s):s instanceof L.Rectangle?s.pm=new L.PM.Edit.Rectangle(s):s instanceof L.Polygon?s.pm=new L.PM.Edit.Polygon(s):s instanceof L.Polyline?s.pm=new L.PM.Edit.Line(s):s instanceof L.LayerGroup?s.pm=new L.PM.Edit.LayerGroup(s):s instanceof L.ImageOverlay&&(s.pm=new L.PM.Edit.ImageOverlay(s)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(s){let l=this._map.mouseEventToLayerPoint(s),h,p;for(let v=this._drawFirst;v;v=v.next)h=v.layer,h.options.interactive&&h._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(h))&&(p=h);p&&(L.DomEvent.fakeStop(s),this._fireEvent([p],s))}}),L.PM.initialize()})();class Ol extends wt.Polygon{constructor(n,i,o=0,a=180,u={}){super([[]],{...u,pmIgnore:!1,interactive:!0,className:"leaflet-semicircle"});zt(this,"center");zt(this,"radius");zt(this,"startAngle");zt(this,"stopAngle");zt(this,"numPoints");zt(this,"properties");zt(this,"pm");zt(this,"getRadius",()=>this.radius);zt(this,"getStartAngle",()=>this.startAngle);zt(this,"getStopAngle",()=>this.stopAngle);this.center=n,this.radius=i,this.startAngle=this.normalizeAngle(o),this.stopAngle=this.normalizeAngle(a),this.numPoints=64,this.properties={type:"Semicircle",radius:this.radius,startAngle:this.startAngle,stopAngle:this.stopAngle,style:{...u,startAngle:this.startAngle,stopAngle:this.stopAngle}},this.on("pm:enable",()=>{var d;this.pm&&(this.pm._layers=[],this.pm._markers=[],(d=this.pm._markerGroup)==null||d.clearLayers())}),this.on("pm:vertexadded",()=>{var d;this.pm&&((d=this.pm._markerGroup)==null||d.clearLayers())}),this.on("add",()=>{this._map&&(this.updateGeometry(),this.pm&&this.pm.enable({allowSelfIntersection:!1,preventMarkerRemoval:!0}))}),this.updateProperties()}normalizeAngle(n){return(n%360+360)%360}calculateArcPoints(){if(!this._map)return[];const n=[],i=this.getOpeningAngle();n.push(this.center);for(let o=0;o<=this.numPoints;o++){const u=(this.startAngle+i*o/this.numPoints)*Math.PI/180,d=this.radius*Math.cos(u),_=this.radius*Math.sin(u)/111319.9,b=d/(111319.9*Math.cos(this.center.lat*Math.PI/180)),w=wt.latLng(this.center.lat+_,this.center.lng+b);n.push(w)}return n.push(this.center),n}setRadius(n){return n<=0?this:(this.radius=n,this.properties.radius=n,this.updateGeometry(),this.updateProperties(),this)}setAngles(n,i){const o=this.normalizeAngle(n),a=this.normalizeAngle(i),u=this.getOpeningAngle();let d=(a-o+360)%360;const m=45;return Math.abs(d-u)>m&&(d>u?d=u+m:d=u-m),d=Math.max(5,Math.min(355,d)),this.startAngle=o,this.stopAngle=(o+d)%360,this.properties.startAngle=this.startAngle,this.properties.stopAngle=this.stopAngle,this.properties.openingAngle=d,this.properties.style.startAngle=this.startAngle,this.properties.style.stopAngle=this.stopAngle,this.updateGeometry(),this}setOpeningAngle(n){return n<5||n>355?this:(this.stopAngle=(this.startAngle+n)%360,this.properties.openingAngle=n,this.updateGeometry(),this.updateProperties(),this)}setCenter(n){return!n.lat||!n.lng?this:(this.center=n,this.updateGeometry(),this.updateProperties(),this)}getCenter(){return this.center}getOpeningAngle(){return(this.stopAngle-this.startAngle+360)%360}calculatePointOnArc(n){const i=n*Math.PI/180;return wt.latLng(this.center.lat+this.radius/111319.9*Math.sin(i),this.center.lng+this.radius/(111319.9*Math.cos(this.center.lat*Math.PI/180))*Math.cos(i))}calculateMidpointPosition(){const n=this.getOpeningAngle(),i=(this.startAngle+n/2)%360;return this.calculatePointOnArc(i)}calculateAngleToPoint(n){return Math.atan2(n.lat-this.center.lat,n.lng-this.center.lng)*180/Math.PI}createControlPoints(n,i){const o=[],a=this.calculatePointOnArc(this.startAngle),u=this.calculatePointOnArc(this.stopAngle),d=this.calculateMidpointPosition(),m=this.createControlPoint(n,this.center,"#059669"),_=this.createControlPoint(n,a,"#DC2626"),b=this.createControlPoint(n,u,"#DC2626"),w=this.createControlPoint(n,d,"#2563EB");o.push(m,_,b,w),i(o)}createControlPoint(n,i,o){return wt.circleMarker(i,{radius:6,color:o,fillColor:o,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0}).addTo(n)}updateProperties(){const n=this.getOpeningAngle(),i=Math.PI*Math.pow(this.radius,2)*n/360,o=2*Math.PI*this.radius*n/360,a=o+2*this.radius;this.properties.area=i,this.properties.arcLength=o,this.properties.perimeter=a,this.properties.openingAngle=n,this.properties.surfaceInterieure=i,this.properties.surfaceExterieure=i,this.properties.diameter=this.radius*2,this.properties.center=this.center,this.fire("properties:updated",{shape:this,properties:this.properties})}updateGeometry(){if(!this._map)return;const n=this.calculateArcPoints();n.length>0&&(this.setLatLngs([n]),this.updateProperties())}toGeoJSON(){const n=super.toGeoJSON();return{...n,properties:{...n.properties,type:"Semicircle",radius:this.radius,startAngle:this.startAngle,stopAngle:this.stopAngle,openingAngle:this.getOpeningAngle()}}}}class Vu extends wt.Circle{constructor(n,i){const o=i.radius||10;super(n,o,i);zt(this,"properties");this.properties={type:"Circle",style:i||{}},this.updateProperties(),this.on("add",()=>{console.log("Circle added to map, updating properties"),this.updateProperties()})}updateProperties(){var o;const n=this.getRadius(),i=this.getLatLng();this.properties={...this.properties,radius:n,diameter:n*2,area:Math.PI*Math.pow(n,2),perimeter:2*Math.PI*n,center:i,surfaceInterieure:Math.PI*Math.pow(n,2),surfaceExterieure:Math.PI*Math.pow(n,2),style:{...this.options,color:this.options.color||"#3388ff",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#3388ff",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||""}},this.fire("properties:updated",{shape:this,properties:this.properties})}setRadius(n){return super.setRadius(n),this.updateProperties(),this}setLatLng(n){return super.setLatLng(n),this.updateProperties(),this}calculatePointOnCircle(n){const i=this.getLatLng(),o=this.getRadius(),a=n*Math.PI/180;return wt.latLng(i.lat+o/111319.9*Math.sin(a),i.lng+o/(111319.9*Math.cos(i.lat*Math.PI/180))*Math.cos(a))}getCardinalPoints(){return[0,45,90,135,180,225,270,315].map(n=>this.calculatePointOnCircle(n))}calculateAngleFromPoint(n){const i=this.getLatLng(),o=n.lng-i.lng,a=n.lat-i.lat;let u=Math.atan2(a,o)*180/Math.PI;return u<0&&(u+=360),u}resizeFromControlPoint(n){const o=this.getLatLng().distanceTo(n);o>0&&super.setRadius(o)}}var Ps=63710088e-1,Mw={centimeters:Ps*100,centimetres:Ps*100,degrees:Ps/111325,feet:Ps*3.28084,inches:Ps*39.37,kilometers:Ps/1e3,kilometres:Ps/1e3,meters:Ps,metres:Ps,miles:Ps/1609.344,millimeters:Ps*1e3,millimetres:Ps*1e3,nauticalmiles:Ps/1852,radians:1,yards:Ps*1.0936};function dh(e,t,n){n===void 0&&(n={});var i={type:"Feature"};return(n.id===0||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=t||{},i.geometry=e,i}function ph(e,t,n){n===void 0&&(n={});for(var i=0,o=e;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var u=0;u<a[a.length-1].length;u++)if(a[a.length-1][u]!==a[0][u])throw new Error("First and last Position are not equivalent.")}var d={type:"Polygon",coordinates:e};return dh(d,t,n)}function Su(e,t,n){if(n===void 0&&(n={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var i={type:"LineString",coordinates:e};return dh(i,t,n)}function Aw(e,t){t===void 0&&(t="kilometers");var n=Mw[t];if(!n)throw new Error(t+" units is invalid");return e*n}function Rc(e){var t=e%360;return t*Math.PI/180}function e1(e,t,n){if(e!==null)for(var i,o,a,u,d,m,_,b=0,w=0,S,C=e.type,F=C==="FeatureCollection",R=C==="Feature",$=F?e.features.length:1,j=0;j<$;j++){_=F?e.features[j].geometry:R?e.geometry:e,S=_?_.type==="GeometryCollection":!1,d=S?_.geometries.length:1;for(var G=0;G<d;G++){var Y=0,ke=0;if(u=S?_.geometries[G]:_,u!==null){m=u.coordinates;var Ce=u.type;switch(b=0,Ce){case null:break;case"Point":if(t(m,w,j,Y,ke)===!1)return!1;w++,Y++;break;case"LineString":case"MultiPoint":for(i=0;i<m.length;i++){if(t(m[i],w,j,Y,ke)===!1)return!1;w++,Ce==="MultiPoint"&&Y++}Ce==="LineString"&&Y++;break;case"Polygon":case"MultiLineString":for(i=0;i<m.length;i++){for(o=0;o<m[i].length-b;o++){if(t(m[i][o],w,j,Y,ke)===!1)return!1;w++}Ce==="MultiLineString"&&Y++,Ce==="Polygon"&&ke++}Ce==="Polygon"&&Y++;break;case"MultiPolygon":for(i=0;i<m.length;i++){for(ke=0,o=0;o<m[i].length;o++){for(a=0;a<m[i][o].length-b;a++){if(t(m[i][o][a],w,j,Y,ke)===!1)return!1;w++}ke++}Y++}break;case"GeometryCollection":for(i=0;i<u.geometries.length;i++)if(e1(u.geometries[i],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function t1(e,t){var n,i,o,a,u,d,m,_,b,w,S=0,C=e.type==="FeatureCollection",F=e.type==="Feature",R=C?e.features.length:1;for(n=0;n<R;n++){for(d=C?e.features[n].geometry:F?e.geometry:e,_=C?e.features[n].properties:F?e.properties:{},b=C?e.features[n].bbox:F?e.bbox:void 0,w=C?e.features[n].id:F?e.id:void 0,m=d?d.type==="GeometryCollection":!1,u=m?d.geometries.length:1,o=0;o<u;o++){if(a=m?d.geometries[o]:d,a===null){if(t(null,S,_,b,w)===!1)return!1;continue}switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(a,S,_,b,w)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<a.geometries.length;i++)if(t(a.geometries[i],S,_,b,w)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}S++}}function Bw(e,t,n){var i=n;return t1(e,function(o,a,u,d,m){i=t(i,o,a,u,d,m)}),i}function Tw(e,t){t1(e,function(n,i,o,a,u){var d=n===null?null:n.type;switch(d){case null:case"Point":case"LineString":case"Polygon":return t(dh(n,o,{bbox:a,id:u}),i,0)===!1?!1:void 0}var m;switch(d){case"MultiPoint":m="Point";break;case"MultiLineString":m="LineString";break;case"MultiPolygon":m="Polygon";break}for(var _=0;_<n.coordinates.length;_++){var b=n.coordinates[_],w={type:m,coordinates:b};if(t(dh(w,o),i,_)===!1)return!1}})}function Nw(e,t){Tw(e,function(n,i,o){var a=0;if(n.geometry){var u=n.geometry.type;if(!(u==="Point"||u==="MultiPoint")){var d,m=0,_=0,b=0;if(e1(n,function(w,S,C,F,R){if(d===void 0||i>m||F>_||R>b){d=w,m=i,_=F,b=R,a=0;return}var $=Su([d,w],n.properties);if(t($,i,o,R,a)===!1)return!1;a++,d=w})===!1)return!1}}})}function Dw(e,t,n){var i=n,o=!1;return Nw(e,function(a,u,d,m,_){o===!1&&n===void 0?i=a:i=t(i,a,u,d,m,_),o=!0}),i}function _0(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function qa(e,t,n){n===void 0&&(n={});var i=_0(e),o=_0(t),a=Rc(o[1]-i[1]),u=Rc(o[0]-i[0]),d=Rc(i[1]),m=Rc(o[1]),_=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(d)*Math.cos(m);return Aw(2*Math.atan2(Math.sqrt(_),Math.sqrt(1-_)),n.units)}var y0=6378137;function ed(e){return Bw(e,function(t,n){return t+Ow(n)},0)}function Ow(e){var t=0,n;switch(e.type){case"Polygon":return b0(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)t+=b0(e.coordinates[n]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function b0(e){var t=0;if(e&&e.length>0){t+=Math.abs(w0(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(w0(e[n]))}return t}function w0(e){var t,n,i,o,a,u,d,m=0,_=e.length;if(_>2){for(d=0;d<_;d++)d===_-2?(o=_-2,a=_-1,u=0):d===_-1?(o=_-1,a=0,u=1):(o=d,a=d+1,u=d+2),t=e[o],n=e[a],i=e[u],m+=(yf(i[0])-yf(t[0]))*Math.sin(yf(n[1]));m=m*y0*y0/2}return m}function yf(e){return e*Math.PI/180}function dc(e,t){return t===void 0&&(t={}),Dw(e,function(n,i){var o=i.geometry.coordinates;return n+qa(o[0],o[1],t)},0)}class Oa extends wt.Rectangle{constructor(n,i={}){super(n,{...i,pmIgnore:!1,interactive:!0});zt(this,"properties");this.properties={type:"Rectangle",style:i||{}},this.updateProperties(),this.on("add",()=>{console.log("Rectangle added to map, updating properties"),this.updateProperties()})}updateProperties(){var d;const n=this.getBounds(),i=n.getNorthEast(),o=n.getSouthWest(),a=qa([o.lng,o.lat],[i.lng,o.lat],{units:"meters"}),u=qa([o.lng,o.lat],[o.lng,i.lat],{units:"meters"});this.properties={...this.properties,width:a,height:u,area:a*u,perimeter:2*(a+u),center:n.getCenter(),corners:{northEast:i,northWest:n.getNorthWest(),southEast:n.getSouthEast(),southWest:o},bounds:n,surfaceInterieure:a*u,surfaceExterieure:a*u,style:{...this.options,color:this.options.color||"#3388ff",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#3388ff",fillOpacity:this.options.fillOpacity||.2,dashArray:((d=this.options)==null?void 0:d.dashArray)||""}},this.fire("properties:updated",{shape:this,properties:this.properties})}setBounds(n){return super.setBounds(n),this.updateProperties(),this}getMidPoints(){const n=this.getBounds(),i=n.getNorthWest(),o=n.getNorthEast(),a=n.getSouthEast(),u=n.getSouthWest();return[wt.latLng((i.lat+o.lat)/2,(i.lng+o.lng)/2),wt.latLng((o.lat+a.lat)/2,(o.lng+a.lng)/2),wt.latLng((u.lat+a.lat)/2,(u.lng+a.lng)/2),wt.latLng((i.lat+u.lat)/2,(i.lng+u.lng)/2)]}getDimensions(){const n=this.getBounds(),i=n.getNorthEast(),o=n.getSouthWest(),a=qa([o.lng,o.lat],[i.lng,o.lat],{units:"meters"}),u=qa([o.lng,o.lat],[o.lng,i.lat],{units:"meters"});return{width:a,height:u}}resizeFromCorner(n,i){const o=this.getBounds(),a=[o.getNorthWest(),o.getNorthEast(),o.getSouthEast(),o.getSouthWest()],u=(n+2)%4,d=a[u],m=wt.latLngBounds(d,i);wt.Rectangle.prototype.setBounds.call(this,m)}resizeFromSide(n,i){const o=this.getBounds(),a=o.getNorthWest(),u=o.getSouthEast(),d=o.getSouthWest();let m;switch(n){case 0:m=wt.latLngBounds(wt.latLng(i.lat,a.lng),wt.latLng(d.lat,u.lng));break;case 1:m=wt.latLngBounds(wt.latLng(a.lat,a.lng),wt.latLng(u.lat,i.lng));break;case 2:m=wt.latLngBounds(wt.latLng(a.lat,a.lng),wt.latLng(i.lat,u.lng));break;case 3:m=wt.latLngBounds(wt.latLng(a.lat,i.lng),wt.latLng(u.lat,u.lng));break}m&&(wt.Rectangle.prototype.setBounds.call(this,m),this.updateProperties())}moveFromCenter(n){const i=this.getBounds(),o=i.getCenter(),a=n.lng-o.lng,u=n.lat-o.lat,d=i.getNorthWest(),m=i.getSouthEast(),_=wt.latLng(d.lat+u,d.lng+a),b=wt.latLng(m.lat+u,m.lng+a);wt.Rectangle.prototype.setBounds.call(this,wt.latLngBounds(_,b))}}function Rw(e,t,n={}){const i={type:"Feature"};return(n.id===0||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=t||{},i.geometry=e,i}function Iw(e,t,n={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!x0(e[0])||!x0(e[1]))throw new Error("coordinates must contain numbers");return Rw({type:"Point",coordinates:e},t,n)}function x0(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function n1(e,t,n){if(e!==null)for(var i,o,a,u,d,m,_,b=0,w=0,S,C=e.type,F=C==="FeatureCollection",R=C==="Feature",$=F?e.features.length:1,j=0;j<$;j++){_=F?e.features[j].geometry:R?e.geometry:e,S=_?_.type==="GeometryCollection":!1,d=S?_.geometries.length:1;for(var G=0;G<d;G++){var Y=0,ke=0;if(u=S?_.geometries[G]:_,u!==null){m=u.coordinates;var Ce=u.type;switch(b=Ce==="Polygon"||Ce==="MultiPolygon"?1:0,Ce){case null:break;case"Point":if(t(m,w,j,Y,ke)===!1)return!1;w++,Y++;break;case"LineString":case"MultiPoint":for(i=0;i<m.length;i++){if(t(m[i],w,j,Y,ke)===!1)return!1;w++,Ce==="MultiPoint"&&Y++}Ce==="LineString"&&Y++;break;case"Polygon":case"MultiLineString":for(i=0;i<m.length;i++){for(o=0;o<m[i].length-b;o++){if(t(m[i][o],w,j,Y,ke)===!1)return!1;w++}Ce==="MultiLineString"&&Y++,Ce==="Polygon"&&ke++}Ce==="Polygon"&&Y++;break;case"MultiPolygon":for(i=0;i<m.length;i++){for(ke=0,o=0;o<m[i].length;o++){for(a=0;a<m[i][o].length-b;a++){if(t(m[i][o][a],w,j,Y,ke)===!1)return!1;w++}ke++}Y++}break;case"GeometryCollection":for(i=0;i<u.geometries.length;i++)if(n1(u.geometries[i],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Fw(e,t={}){let n=0,i=0,o=0;return n1(e,function(a){n+=a[0],i+=a[1],o++}),Iw([n/o,i/o],t.properties)}var L0=Fw;class jw extends wt.Polygon{constructor(n,i={}){super(n,{...i,pmIgnore:!1,interactive:!0});zt(this,"properties");this.properties={type:"Polygon",style:i||{}},this.updateProperties(),this.on("add",()=>{console.log("Polygon added to map, updating properties"),this.updateProperties()})}updateProperties(){var o;const n=this.getLatLngs()[0];if(!n||n.length<3){console.warn("Polygon has less than 3 points, cannot calculate properties");return}const i=n.map(a=>[a.lng,a.lat]);i.push(i[0]);try{const a=ph([i]),u=ed(a),d=dc(Su([...i]),{units:"meters"}),m=L0(a),_=wt.latLng(m.geometry.coordinates[1],m.geometry.coordinates[0]);this.properties={...this.properties,area:u,perimeter:d,center:_,vertices:n.length,surfaceInterieure:u,surfaceExterieure:u,style:{...this.options,color:this.options.color||"#3388ff",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#3388ff",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||""}},this.fire("properties:updated",{shape:this,properties:this.properties})}catch(a){console.error("Failed to calculate polygon properties",a)}}setLatLngs(n){return super.setLatLngs(n),this.updateProperties(),this}getMidPoints(){const n=this.getLatLngs()[0],i=[];if(n.length<2)return i;for(let o=0;o<n.length;o++){const a=n[o],u=n[(o+1)%n.length];i.push(wt.latLng((a.lat+u.lat)/2,(a.lng+u.lng)/2))}return i}moveVertex(n,i){const o=this.getLatLngs()[0];n>=0&&n<o.length&&(o[n]=i,wt.Polygon.prototype.setLatLngs.call(this,[o]))}addVertex(n,i){const o=this.getLatLngs()[0];n>=0&&n<o.length&&(o.splice((n+1)%o.length,0,i),wt.Polygon.prototype.setLatLngs.call(this,[o]))}move(n){const o=this.getLatLngs()[0].map(a=>wt.latLng(a.lat+n.lat,a.lng+n.lng));return wt.Polygon.prototype.setLatLngs.call(this,[o]),this}getCenter(){const n=this.getLatLngs()[0];if(!n||n.length===0)return new wt.LatLng(0,0);try{const i=n.map(u=>[u.lng,u.lat]);i.push(i[0]);const o=ph([i]),a=L0(o);return wt.latLng(a.geometry.coordinates[1],a.geometry.coordinates[0])}catch(i){console.warn("Erreur lors du calcul du centrode avec turf.js, utilisation de la mthode simple",i);const o=n.reduce((u,d)=>u+d.lat,0)/n.length,a=n.reduce((u,d)=>u+d.lng,0)/n.length;return new wt.LatLng(o,a)}}getSegmentLengths(){const n=this.getLatLngs()[0],i=[];if(n.length<2)return i;for(let o=0;o<n.length;o++){const a=n[o],u=n[(o+1)%n.length];i.push(a.distanceTo(u))}return i}}class bf extends jw{constructor(n,i="Double-cliquez pour diter",o={}){const a=n instanceof wt.LatLngBounds?n:wt.latLngBounds(n),u=[a.getSouthWest(),a.getSouthEast(),a.getNorthEast(),a.getNorthWest()];super(u,{...o,pmIgnore:!1,interactive:!0,className:"leaflet-text-rectangle"});zt(this,"properties");zt(this,"originalLatLngs",[]);zt(this,"_textContainer",null);zt(this,"enforceRectangularShape",()=>{const n=this.getLatLngs()[0];if(n.length!==4){console.warn("TextRectangle must have exactly 4 points"),this.setLatLngs([this.originalLatLngs]);return}const i=this.getBounds(),o=i.getSouthWest(),a=wt.latLng(i.getSouth(),i.getEast()),u=i.getNorthEast(),d=wt.latLng(i.getNorth(),i.getWest()),m=[o,a,u,d];m.some((b,w)=>{const S=n[w];return Math.abs(b.lat-S.lat)>1e-6||Math.abs(b.lng-S.lng)>1e-6})&&(wt.Polygon.prototype.setLatLngs.call(this,[m]),this.originalLatLngs=m.slice(),this.updateTextPosition(),this.updateProperties())});zt(this,"onMarkerDragEnd",n=>{const o=n.marker.getLatLng(),a=this.getLatLngs()[0];let u=1/0,d=0;a.forEach((m,_)=>{const b=o.distanceTo(m);b<u&&(u=b,d=_)}),d%2===0?this.resizeFromCorner(d,o):this.resizeFromSide(d,o)});this.originalLatLngs=u.slice(),this.properties={type:"TextRectangle",text:i,width:0,height:0,area:0,rotation:0,style:{...o,textColor:"#000000",fontSize:"14px",backgroundColor:"#FFFFFF"}},this._textContainer=document.createElement("div"),this._textContainer.className="text-container",this._textContainer.style.position="absolute",this._textContainer.style.transform="translate(-50%, -50%)",this._textContainer.style.pointerEvents="auto",this._textContainer.style.cursor="text",this._textContainer.style.padding="2px 5px",this._textContainer.style.borderRadius="3px",this._textContainer.style.backgroundColor=this.properties.style.backgroundColor||"#FFFFFF",this._textContainer.style.color=this.properties.style.textColor||"#000000",this._textContainer.style.fontSize=this.properties.style.fontSize||"14px",this._textContainer.innerText=i,this._textContainer.addEventListener("dblclick",d=>{if(d.stopPropagation(),!this._textContainer)return;this._textContainer.contentEditable="true",this._textContainer.focus(),this._textContainer.classList.add("editing");const m=()=>{if(!this._textContainer)return;this._textContainer.contentEditable="false",this._textContainer.classList.remove("editing");const b=this._textContainer.innerText.trim();b&&(this.properties.text=b,this.setText(b)),this._textContainer.removeEventListener("blur",m),this._textContainer.removeEventListener("keydown",_)},_=b=>{b.key==="Enter"&&!b.shiftKey&&(b.preventDefault(),m())};this._textContainer.addEventListener("blur",m),this._textContainer.addEventListener("keydown",_)}),this.on("pm:vertexremoved",this.enforceRectangularShape),this.on("pm:vertexadded",this.enforceRectangularShape),this.on("pm:dragend",this.enforceRectangularShape),this.on("pm:markerdragend",this.onMarkerDragEnd),this.on("move",this.updateTextPosition),this.on("drag",this.updateTextPosition),this.updateProperties()}onAdd(n){return super.onAdd(n),this._textContainer&&this._map&&(this._map.getPanes().overlayPane.appendChild(this._textContainer),this.updateTextPosition()),this}onRemove(n){return this._textContainer&&this._textContainer.parentElement&&this._textContainer.parentElement.removeChild(this._textContainer),super.onRemove(n),this}updateTextPosition(){if(!this._textContainer||!this._map)return;const n=this.getCenter(),i=this._map.latLngToLayerPoint(n);this._textContainer.style.left=`${i.x}px`,this._textContainer.style.top=`${i.y}px`}setText(n){this.properties.text=n,this._textContainer&&(this._textContainer.innerText=n)}setTextStyle(n){this.properties.style={...this.properties.style,...n},this._textContainer&&(n.textColor&&(this._textContainer.style.color=n.textColor),n.fontSize&&(this._textContainer.style.fontSize=n.fontSize),n.backgroundColor&&(this._textContainer.style.backgroundColor=n.backgroundColor))}setLatLngs(n){return super.setLatLngs(n),this.enforceRectangularShape(),this.updateTextPosition(),this}updateProperties(){const n=this.getLatLngs()[0];if(n.length!==4){console.warn("TextRectangle doit avoir exactement 4 points");return}const i=n[0],o=n[1],a=n[3],u=qa([i.lng,i.lat],[o.lng,o.lat],{units:"meters"}),d=qa([i.lng,i.lat],[a.lng,a.lat],{units:"meters"}),m=u*d,_=o.lng-i.lng,b=o.lat-i.lat;let w=Math.atan2(b,_)*(180/Math.PI);w=(w+360)%360,this.properties.width=u,this.properties.height=d,this.properties.area=m,this.properties.rotation=w,this.properties.center=this.getCenter(),this.fire("properties:updated",{shape:this,properties:this.properties})}resizeFromCorner(n,i){const o=this.getLatLngs()[0];if(o.length!==4)return;const a=(n+1)%4,u=(n+3)%4;o[n]=i,n===0||n===2?(o[a]=wt.latLng(o[a].lat,i.lng),o[u]=wt.latLng(i.lat,o[u].lng)):(o[a]=wt.latLng(i.lat,o[a].lng),o[u]=wt.latLng(o[u].lat,i.lng)),wt.Polygon.prototype.setLatLngs.call(this,[o]),this.updateTextPosition()}resizeFromSide(n,i){const o=this.getLatLngs()[0];o.length===4&&(n===0||n===2?(o[n].lat=i.lat,o[(n+1)%4].lat=i.lat):(o[n].lng=i.lng,o[(n+1)%4].lng=i.lng),wt.Polygon.prototype.setLatLngs.call(this,[o]),this.updateTextPosition())}moveFromCenter(n){const i=this.getCenter(),o=n.lat-i.lat,a=n.lng-i.lng,d=this.getLatLngs()[0].map(m=>wt.latLng(m.lat+o,m.lng+a));wt.Polygon.prototype.setLatLngs.call(this,[d]),this.updateTextPosition()}getMidPoints(){return super.getMidPoints()}}var $s=63710088e-1,r1={centimeters:$s*100,centimetres:$s*100,degrees:360/(2*Math.PI),feet:$s*3.28084,inches:$s*39.37,kilometers:$s/1e3,kilometres:$s/1e3,meters:$s,metres:$s,miles:$s/1609.344,millimeters:$s*1e3,millimetres:$s*1e3,nauticalmiles:$s/1852,radians:1,yards:$s*1.0936};function zw(e,t,n={}){const i={type:"Feature"};return(n.id===0||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=t||{},i.geometry=e,i}function td(e,t,n={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!C0(e[0])||!C0(e[1]))throw new Error("coordinates must contain numbers");return zw({type:"Point",coordinates:e},t,n)}function Uw(e,t="kilometers"){const n=r1[t];if(!n)throw new Error(t+" units is invalid");return e*n}function qw(e,t="kilometers"){const n=r1[t];if(!n)throw new Error(t+" units is invalid");return e/n}function nd(e){return e%(2*Math.PI)*180/Math.PI}function jo(e){return e%360*Math.PI/180}function C0(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function pc(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function $w(e){return e.type==="Feature"?e.geometry:e}function i1(e,t,n={}){if(n.final===!0)return Vw(e,t);const i=pc(e),o=pc(t),a=jo(i[0]),u=jo(o[0]),d=jo(i[1]),m=jo(o[1]),_=Math.sin(u-a)*Math.cos(m),b=Math.cos(d)*Math.sin(m)-Math.sin(d)*Math.cos(m)*Math.cos(u-a);return nd(Math.atan2(_,b))}function Vw(e,t){let n=i1(t,e);return n=(n+180)%360,n}function Gw(e,t,n,i={}){const o=pc(e),a=jo(o[0]),u=jo(o[1]),d=jo(n),m=qw(t,i.units),_=Math.asin(Math.sin(u)*Math.cos(m)+Math.cos(u)*Math.sin(m)*Math.cos(d)),b=a+Math.atan2(Math.sin(d)*Math.sin(m)*Math.cos(u),Math.cos(m)-Math.sin(u)*Math.sin(_)),w=nd(b),S=nd(_);return td([w,S],i.properties)}function Hw(e,t,n={}){var i=pc(e),o=pc(t),a=jo(o[1]-i[1]),u=jo(o[0]-i[0]),d=jo(i[1]),m=jo(o[1]),_=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(d)*Math.cos(m);return Uw(2*Math.atan2(Math.sqrt(_),Math.sqrt(1-_)),n.units)}function Ww(e,t,n={}){const o=$w(e).coordinates;let a=0;for(let u=0;u<o.length&&!(t>=a&&u===o.length-1);u++)if(a>=t){const d=t-a;if(d){const m=i1(o[u],o[u-1])-180;return Gw(o[u],d,m,n)}else return td(o[u])}else a+=Hw(o[u],o[u+1],n);return td(o[o.length-1])}var k0=Ww;class Jr extends wt.Polyline{constructor(n,i={}){super(n,{...i,pmIgnore:!1,interactive:!0});zt(this,"properties");zt(this,"_isMovingVertex",!1);zt(this,"_centerLatLng",null);zt(this,"_hideCenterPoint",!1);this.properties={type:"Line",style:i||{}},this.updateProperties(),this.on("add",()=>{console.log("Line added to map, updating properties"),this.updateProperties()})}shouldHideCenterPoint(){return this._hideCenterPoint}updateProperties(){var o;if(performance.mark("updateProperties-start"),this._isMovingVertex){performance.mark("updateProperties-end"),performance.measure("updateProperties-skipped","updateProperties-start","updateProperties-end");return}const n=this.getLatLngs();if(!n||n.length<2){console.warn("Line has less than 2 points, cannot calculate properties"),performance.mark("updateProperties-end"),performance.measure("updateProperties-invalid","updateProperties-start","updateProperties-end");return}const i=n.map(a=>[a.lng,a.lat]);try{const a=Su(i),u=dc(a,{units:"meters"});let d;if(n.length===2)d=wt.latLng((n[0].lat+n[1].lat)/2,(n[0].lng+n[1].lng)/2);else{const _=k0(a,u/2,{units:"meters"});d=wt.latLng(_.geometry.coordinates[1],_.geometry.coordinates[0])}this._centerLatLng=d;const m=10;this.properties={...this.properties,length:u,center:d,vertices:n.length,surfaceInfluence:u*m,dimensions:{width:m},style:{...this.options,color:this.options.color||"#3388ff",weight:this.options.weight||3,opacity:this.options.opacity||1,dashArray:((o=this.options)==null?void 0:o.dashArray)||""}},this.fire("properties:updated",{shape:this,properties:this.properties})}catch(a){console.error("Failed to calculate line properties",a)}performance.mark("updateProperties-end"),performance.measure("updateProperties","updateProperties-start","updateProperties-end")}setLatLngs(n){return super.setLatLngs(n),this._isMovingVertex||this.updateProperties(),this}moveVertex(n,i){performance.mark("moveVertex-start");const o=this.getLatLngs();n>=0&&n<o.length&&(o[n]=i,wt.Polyline.prototype.setLatLngs.call(this,o)),performance.mark("moveVertex-end"),performance.measure("moveVertex","moveVertex-start","moveVertex-end")}startVertexMove(){this._isMovingVertex=!0,this._hideCenterPoint=!0}endVertexMove(){this._isMovingVertex=!1,this._hideCenterPoint=!1,this.updateProperties()}addVertex(n,i){const o=this.getLatLngs();n>=0&&n<o.length-1&&(o.splice(n+1,0,i),wt.Polyline.prototype.setLatLngs.call(this,o),this.updateProperties())}move(n){const o=this.getLatLngs().map(a=>wt.latLng(a.lat+n.lat,a.lng+n.lng));return wt.Polyline.prototype.setLatLngs.call(this,o),this._centerLatLng&&(this._centerLatLng=wt.latLng(this._centerLatLng.lat+n.lat,this._centerLatLng.lng+n.lng)),this.fire("move"),this}getCenter(){if(performance.mark("getCenter-start"),this._isMovingVertex&&this._centerLatLng)return performance.mark("getCenter-end"),performance.measure("getCenter-cached","getCenter-start","getCenter-end"),this._centerLatLng;const n=this.getLatLngs();if(n.length<2)return performance.mark("getCenter-end"),performance.measure("getCenter-simple","getCenter-start","getCenter-end"),n[0]||new wt.LatLng(0,0);try{const i=n.map(m=>[m.lng,m.lat]),o=Su(i),a=dc(o,{units:"meters"}),u=k0(o,a/2,{units:"meters"}),d=wt.latLng(u.geometry.coordinates[1],u.geometry.coordinates[0]);return this._centerLatLng=d,performance.mark("getCenter-end"),performance.measure("getCenter-turf","getCenter-start","getCenter-end"),d}catch(i){console.warn("Error calculating line center with turf.js, using simple method",i);const o=n.reduce((d,m)=>d+m.lat,0)/n.length,a=n.reduce((d,m)=>d+m.lng,0)/n.length,u=new wt.LatLng(o,a);return this._centerLatLng=u,performance.mark("getCenter-end"),performance.measure("getCenter-fallback","getCenter-start","getCenter-end"),u}}getMidPoints(){const n=this.getLatLngs(),i=[];if(n.length<2)return i;for(let o=0;o<n.length-1;o++){const a=n[o],u=n[o+1];i.push(wt.latLng((a.lat+u.lat)/2,(a.lng+u.lng)/2))}return i}getSegmentLengths(){const n=this.getLatLngs(),i=[];if(n.length<2)return i;for(let o=0;o<n.length-1;o++){const a=n[o],u=n[o+1];i.push(a.distanceTo(u))}return i}getLengthToVertex(n){const i=this.getLatLngs();let o=0;if(n<=0||i.length<2)return 0;for(let a=0;a<Math.min(n,i.length-1);a++)o+=i[a].distanceTo(i[a+1]);return o}}class Zw{constructor(){zt(this,"measures",{});zt(this,"isActive",!1);zt(this,"iterationCount",0)}start(){this.isActive=!0,this.measures={},this.iterationCount=0,console.log("Performance monitoring started");const t=new PerformanceObserver(n=>{for(const i of n.getEntries())i.entryType==="measure"&&(this.measures[i.name]||(this.measures[i.name]=[]),this.measures[i.name].push(i.duration))});return t.observe({entryTypes:["measure"]}),t}stop(t){return this.isActive=!1,t&&t.disconnect(),console.log("Performance monitoring stopped"),this.generateReport()}iteration(){this.isActive&&this.iterationCount++}generateReport(){const t={iterations:this.iterationCount,measures:{}};for(const[n,i]of Object.entries(this.measures)){if(i.length===0)continue;const o=i.reduce((m,_)=>m+_,0),a=o/i.length,u=Math.min(...i),d=Math.max(...i);t.measures[n]={count:i.length,average:a.toFixed(2),min:u.toFixed(2),max:d.toFixed(2),total:o.toFixed(2)}}return console.table(t.measures),t}clearMarks(){performance.clearMarks(),performance.clearMeasures()}}const lu=new Zw,mh=(e,t)=>{if(!e||typeof e!="string"||!e.startsWith("#"))return`rgba(0, 0, 0, ${t})`;const n=parseInt(e.slice(1,3),16),i=parseInt(e.slice(3,5),16),o=parseInt(e.slice(5,7),16);return`rgba(${n}, ${i}, ${o}, ${t})`},P0=(e,t)=>{e.style.fontSize=t.fontSize,e.style.color=t.color,e.style.backgroundColor=mh(t.backgroundColor,t.backgroundOpacity),t.hasBorder?e.style.border=`${t.borderWidth} solid ${mh(t.borderColor,t.borderOpacity)}`:e.style.border="none",e.style.padding=t.padding,e.style.borderRadius=t.borderRadius},as=e=>{document.querySelectorAll(".drawing-help-message").forEach(i=>i.remove());const n=wt.DomUtil.create("div","drawing-help-message");return n.innerHTML=e,n.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(n),n};function E0(e,t,n){const i=156543.03392*Math.cos(t*Math.PI/180)/Math.pow(2,n);return e/i}const Tn=(e,t="m",n="")=>{let i,o;return t==="m"?e>=1e4?(i=(e/1e4).toFixed(2),o="ha"):(i=e.toFixed(2),o="m"):t==="m"?e>=1e3?(i=(e/1e3).toFixed(2),o="km"):(i=e.toFixed(2),o="m"):(i=e.toFixed(2),o=t),n?`${n}: ${i} ${o}`:`${i} ${o}`},wf=e=>`${((e%360+360)%360).toFixed(1)}`,Kw=e=>({...e,clientX:e.clientX,clientY:e.clientY,button:e.button||0,buttons:e.buttons||0,altKey:e.altKey||!1}),Jw=(e,t)=>{let n;return function(...i){window.clearTimeout(n),n=window.setTimeout(()=>e.apply(this,i),t)}};function Yw(){const e=It(null),t=It(null),n=It(null),i=It(null),o=It(""),a=It(null),u=It(!1),d=(N,te="Double-cliquez pour diter")=>{const W={fontSize:"14px",color:"#000000",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderWidth:"1px",borderOpacity:1,padding:"5px 10px",borderRadius:"3px",hasBorder:!0,rotation:0,physicalSize:2},H=(he,we)=>{var ne;const Ee=((ne=e.value)==null?void 0:ne.getZoom())||14,Ve=N.lat,tt=E0(we.physicalSize,Ve,Ee);return`<div class="text-container" style="width:${tt}px;height:${tt}px;transform:rotate(${we.rotation}deg)">
        <div class="text-annotation" style="font-size:${tt*.2}px;color:${we.color};background-color:${mh(we.backgroundColor,we.backgroundOpacity)};border:${we.hasBorder?we.borderWidth+" solid "+mh(we.borderColor,we.borderOpacity):"none"};padding:${we.padding};border-radius:${we.borderRadius}">${he}</div>
        <div class="text-controls"><div class="control-button rotate"></div><div class="control-button move"></div></div>
      </div>`},me=()=>{if(!e.value)return;const he=I.getIcon(),we={html:H(I.properties.text,I.properties.style),className:he.options.className};I.setIcon(wt.divIcon(we))},U=wt.divIcon({html:H(te,W),className:"text-container",iconSize:[40,40],iconAnchor:[20,20]}),I=wt.marker(N,{icon:U,draggable:!1,pmIgnore:!0});I.properties={type:"text",text:te,style:{...W}},e.value&&(e.value.on("zoomend",me),I.on("remove",()=>{var he;(he=e.value)==null||he.off("zoomend",me)})),me();let Q=!1,Re=!1,O=0,J=0;const se=he=>{if(!e.value)return;const we=he.target;if(we.classList.contains("rotate")){Q=!0;const Ee=I.getLatLng(),Ve=e.value.mouseEventToLatLng(he);O=Math.atan2(Ve.lat-Ee.lat,Ve.lng-Ee.lng)*180/Math.PI,J=I.properties.style.rotation||0}else we.classList.contains("move")&&(Re=!0);document.addEventListener("mousemove",de),document.addEventListener("mouseup",_e)},de=he=>{if(!(!Re||!e.value)){if(Q){const we=I.getLatLng(),Ee=e.value.mouseEventToLatLng(he),Ve=Math.atan2(Ee.lat-we.lat,Ee.lng-we.lng)*180/Math.PI,tt=(J+(Ve-O))%360;I.properties.style.rotation=tt;const ne=I.getIcon(),fe={html:H(I.properties.text,I.properties.style),className:ne.options.className};I.setIcon(wt.divIcon(fe))}else if(Re){const we=Kw(he),Ee=e.value.mouseEventToLatLng(we);I.setLatLng(Ee)}}},_e=()=>{Q=!1,Re=!1,document.removeEventListener("mousemove",de),document.removeEventListener("mouseup",_e)};return I.on("add",()=>{const he=I.getElement();he&&he.querySelectorAll(".control-button").forEach(Ee=>{Ee.addEventListener("mousedown",se)})}),I.on("remove",()=>{const he=I.getElement();he&&he.querySelectorAll(".control-button").forEach(Ee=>{Ee.removeEventListener("mousedown",se)})}),I.on("dblclick",he=>{var fe;wt.DomEvent.stopPropagation(he);const we=(fe=I.getElement())==null?void 0:fe.querySelector(".text-annotation");if(!we)return;we.contentEditable="true",we.focus(),we.classList.add("editing");const Ee=window.getSelection(),Ve=document.createRange();Ve.selectNodeContents(we),Ee==null||Ee.removeAllRanges(),Ee==null||Ee.addRange(Ve);const tt=()=>{we.contentEditable="false",we.classList.remove("editing");const De=we.innerText.trim();if(De){I.properties.text=De;const Be=I.getIcon(),ce={html:H(De,I.properties.style),className:Be.options.className};I.setIcon(wt.divIcon(ce))}we.removeEventListener("blur",tt),we.removeEventListener("keydown",ne)},ne=De=>{De.key==="Enter"&&!De.shiftKey&&(De.preventDefault(),tt())};we.addEventListener("blur",tt),we.addEventListener("keydown",ne)}),I},m=(N,te)=>{const W=wt.DomUtil.create("div","measure-tooltip");if(W.innerHTML=te,W.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(W),e.value){const H=e.value.latLngToContainerPoint(N);W.style.left=`${H.x+10}px`,W.style.top=`${H.y-25}px`}return W},_=(N,te,W)=>{N.on("mouseover",()=>{const H=m(N.getLatLng(),W());N.measureDiv=H}),N.on("mousemove",H=>{if(N.measureDiv&&e.value){const me=e.value.latLngToContainerPoint(H.latlng);N.measureDiv.style.left=`${me.x+10}px`,N.measureDiv.style.top=`${me.y-25}px`}}),N.on("mouseout",()=>{N.measureDiv&&(N.measureDiv.remove(),N.measureDiv=void 0)})};let b=[];const w=()=>{b.forEach(N=>{N&&N.remove&&("measureDiv"in N&&N.measureDiv&&(N.measureDiv.remove(),N.measureDiv=void 0),n.value&&n.value.removeLayer(N),N.remove())}),b=[],document.querySelectorAll(".measure-tooltip").forEach(N=>{N.remove()})},S=(N,te="#2563EB")=>{const W=wt.circleMarker(N,{radius:6,color:te,fillColor:te,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return n.value&&n.value.addLayer(W),W},C=(N,te)=>{var H,me,U,I,Q,Re;console.log("=== CALCULATING SHAPE PROPERTIES START ==="),console.log("Input layer:",{type:te,instanceof:{Circle:N instanceof wt.Circle,Rectangle:N instanceof wt.Rectangle,Polygon:N instanceof wt.Polygon,Polyline:N instanceof wt.Polyline,CircleArc:N instanceof Ol,TextRectangle:N instanceof bf},options:N.options});const W={type:te,style:N.options||{}};try{if(N instanceof bf)return N.properties;if(N instanceof wt.Circle){const O=N.getRadius(),J=N.getLatLng();W.radius=O,W.diameter=O*2,W.area=Math.PI*Math.pow(O,2),W.perimeter=2*Math.PI*O,W.center=J,W.surfaceInterieure=W.area,W.surfaceExterieure=W.area,console.log("Circle properties calculated:",W)}else if(N instanceof Ol){const O=N.getRadius(),J=N.getCenter(),se=N.getStartAngle(),de=N.getStopAngle(),_e=N.getOpeningAngle();W.radius=O,W.diameter=O*2,W.area=Math.PI*Math.pow(O,2)*_e/360,W.arcLength=2*Math.PI*O*_e/360,W.perimeter=W.arcLength+2*O,W.center=J,W.startAngle=se,W.stopAngle=de,W.openingAngle=_e,W.surfaceInterieure=W.area,W.surfaceExterieure=W.area,console.log("CircleArc properties calculated:",W)}else if(N instanceof wt.Rectangle){const O=N.getBounds(),J=O.getNorthEast(),se=O.getSouthWest(),de=qa([se.lng,se.lat],[J.lng,se.lat],{units:"meters"}),_e=qa([se.lng,se.lat],[se.lng,J.lat],{units:"meters"});W.width=de,W.height=_e,W.area=de*_e,W.perimeter=2*(de+_e),W.surfaceInterieure=W.area,W.surfaceExterieure=W.area,W.dimensions={width:de,height:_e},console.log("Rectangle properties calculated:",W)}else if(N instanceof wt.Polygon){const J=N.getLatLngs()[0].map(de=>[de.lng,de.lat]);J.push(J[0]);const se=ph([J]);W.area=ed(se),W.perimeter=dc(Su([...J]),{units:"meters"}),W.surfaceInterieure=W.area,W.surfaceExterieure=W.area,console.log("Polygon properties calculated:",W)}else if(N instanceof wt.Polyline&&!(N instanceof wt.Polygon))if(N instanceof Jr)N.updateProperties(),Object.assign(W,{...N.properties,type:"Line"}),console.log("Line (custom class) properties calculated:",W);else{const J=N.getLatLngs().map(_e=>[_e.lng,_e.lat]),se=Su(J);W.length=dc(se,{units:"meters"});const de=10;W.surfaceInfluence=W.length*de,W.dimensions={width:de},console.log("Polyline properties calculated:",W)}W.style={...W.style,color:((H=N.options)==null?void 0:H.color)||"#3388ff",weight:((me=N.options)==null?void 0:me.weight)||3,opacity:((U=N.options)==null?void 0:U.opacity)||1,fillColor:((I=N.options)==null?void 0:I.fillColor)||"#3388ff",fillOpacity:((Q=N.options)==null?void 0:Q.fillOpacity)||.2,dashArray:((Re=N.options)==null?void 0:Re.dashArray)||""}}catch(O){console.error("Error calculating shape properties:",O)}return console.log("=== CALCULATING SHAPE PROPERTIES END ==="),console.log("Final properties:",W),W},F=(N,te=2)=>{var I;if(!e.value){console.warn("Map is not available for text size update");return}const W=e.value.getZoom(),H=N.getLatLng().lat,me=E0(te,H,W),U=(I=N.getElement())==null?void 0:I.querySelector(".text-annotation");U&&(N.properties.style.fontSize=`${me}px`,N.properties.physicalWidth=te,N.properties.physicalHeight=te,P0(U,N.properties.style))},R=(N,te,W)=>{const H=wt.map(N).setView(te,W);e.value=H,wt.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors"}).addTo(H);const me=new wt.FeatureGroup;return me.addTo(H),t.value=me,n.value=wt.featureGroup().addTo(H),i.value=wt.featureGroup().addTo(H),H.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:me,snapLayers:[me,i.value],templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),H.on("pm:drawstart",U=>{u.value=!0,U.shape==="Circle"&&o.value==="Semicircle"&&(H.getContainer().style.cursor="crosshair")}),H.on("pm:drawend",()=>{u.value=!1,H.getContainer().style.cursor="",a.value&&as("Cliquez sur la forme pour afficher les points de contrle")}),H.on("pm:create",async U=>{var Re,O,J,se,de,_e,he,we,Ee;const I=U.layer;(Re=t.value)==null||Re.addLayer(I);let Q="unknown";if(I instanceof wt.Circle?Q=o.value==="Semicircle"?"Semicircle":"Circle":I instanceof wt.Rectangle?Q="Rectangle":I instanceof wt.Polygon?Q="Polygon":I instanceof wt.Polyline&&!(I instanceof wt.Polygon)&&(Q="Line"),I.properties=C(I,Q),a.value=I,I.on("mouseover",()=>{console.log("[mouseover] Survol de la forme",{type:Q,isSelected:a.value===I}),(!a.value||a.value!==I)&&X(I)}),I.on("mouseout",()=>{var Ve;console.log("[mouseout] Sortie de la forme",{type:Q,isSelected:a.value===I}),(!a.value||a.value!==I)&&((Ve=i.value)==null||Ve.clearLayers())}),Q==="Semicircle"){const Ve=I.getLatLng(),tt=I.getRadius();(O=t.value)==null||O.removeLayer(I);const ne=new Ol(Ve,tt);ne.properties=C(ne,"Semicircle"),(J=t.value)==null||J.addLayer(ne),a.value=ne,V(ne)}else if(Q==="Circle"){(se=t.value)==null||se.removeLayer(I);const Ve=new Vu(I.getLatLng(),{...I.options,radius:I.getRadius()});Ve.updateProperties(),(de=t.value)==null||de.addLayer(Ve),a.value=Ve,ie(Ve)}else if(Q==="Rectangle"){(_e=t.value)==null||_e.removeLayer(I);const Ve=new Oa(I.getBounds(),{...I.options});Ve.updateProperties(),(he=t.value)==null||he.addLayer(Ve),a.value=Ve,re(Ve)}else if(I instanceof wt.Polygon)Je(I);else if(I instanceof Jr)Ie(I);else if(I instanceof wt.Polyline&&!(I instanceof wt.Polygon)){const Ve=I.getLatLngs(),tt=new Jr(Ve,{...I.options});tt.updateProperties(),(we=t.value)==null||we.removeLayer(I),(Ee=t.value)==null||Ee.addLayer(tt),a.value=tt,Ie(tt)}as("Cliquez sur la forme pour afficher les points de contrle")}),me.on("click",U=>{var Q,Re,O,J,se,de,_e,he;wt.DomEvent.stopPropagation(U);const I=U.layer;if(console.log("[featureGroup click] Slection de forme",{type:(Q=I.properties)==null?void 0:Q.type,previouslySelected:a.value===I}),(Re=i.value)==null||Re.clearLayers(),w(),(O=document.querySelector(".drawing-help-message"))==null||O.remove(),a.value=I,I instanceof Ol||((J=I.properties)==null?void 0:J.type)==="Semicircle")V(I);else if(I instanceof Vu)ie(I);else if(I instanceof wt.Circle){const we=new Vu(I.getLatLng(),{...I.options,radius:I.getRadius()});we.updateProperties(),(se=t.value)==null||se.removeLayer(I),(de=t.value)==null||de.addLayer(we),a.value=we,ie(we)}else if(I instanceof Oa)re(I);else if(I instanceof wt.Rectangle){const we=new Oa(I.getBounds(),{...I.options});we.updateProperties(),(_e=t.value)==null||_e.removeLayer(I),(he=t.value)==null||he.addLayer(we),a.value=we,re(we)}else I instanceof wt.Polygon?Je(I):(I instanceof Jr||I instanceof wt.Polyline&&!(I instanceof wt.Polygon))&&Ie(I)}),H.on("pm:edit",U=>{var Q,Re,O;console.log("[pm:edit] Dbut",{layer:U.layer,currentProperties:U.layer.properties});const I=U.layer;if(I){const J=((Q=I.properties)==null?void 0:Q.type)||"unknown";if(Ce(I,J),console.log("[pm:edit] Aprs updateLayerProperties",{updatedProperties:I.properties,selectedShape:a.value}),J==="Semicircle")V(I);else if(I instanceof Vu)ie(I);else if(I instanceof Oa)re(I);else if(I instanceof wt.Rectangle){const se=new Oa(I.getBounds(),{...I.options});se.updateProperties(),(Re=t.value)==null||Re.removeLayer(I),(O=t.value)==null||O.addLayer(se),a.value=se,re(se)}else I instanceof wt.Polygon?Je(I):I instanceof Jr?(I.updateProperties(),Ce(I,"Line"),Ie(I)):I instanceof wt.Polyline&&Ie(I)}}),H.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(U=>U.remove()),as("Dplacez la forme  l'endroit souhait")}),H.on("pm:dragend",U=>{var Q,Re,O;console.log("[pm:dragend] Dbut",{layer:U.layer,currentProperties:U.layer.properties});const I=U.layer;if(I){const J=((Q=I.properties)==null?void 0:Q.type)||"unknown";if(I instanceof wt.Rectangle&&!(I instanceof Oa)){const se=new Oa(I.getBounds(),{...I.options});se.updateProperties(),(Re=t.value)==null||Re.removeLayer(I),(O=t.value)==null||O.addLayer(se),a.value=se,re(se)}else I instanceof Jr?(I.updateProperties(),Ce(I,"Line"),Ie(I)):Ce(I,J);console.log("[pm:dragend] Aprs updateLayerProperties",{updatedProperties:I.properties,selectedShape:a.value})}setTimeout(()=>{as("Cliquez sur la forme pour afficher les points de contrle")},100)}),H.on("pm:remove",()=>{var U;(U=document.querySelector(".drawing-help-message"))==null||U.remove()}),H.on("pm:select",U=>{var Q;const I=U.layer;document.querySelectorAll(".drawing-help-message").forEach(Re=>Re.remove()),I instanceof Ol||((Q=I.properties)==null?void 0:Q.type)==="Semicircle"?as(`Points de contrle : <span style="color: #059669"></span> Ajuster le rayon, <span style="color: #2563EB"></span> et <span style="color: #DC2626"></span> Modifier l'ouverture du demi-cercle`):as("Utilisez les points de contrle pour modifier la forme")}),H.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(U=>U.remove())}),H},$=()=>{if(!e.value||!t.value)return;const N=t.value.getBounds();N.isValid()&&e.value.fitBounds(N,{padding:[50,50],maxZoom:19})},j=N=>{if(e.value){console.log("=== SETTING DRAWING TOOL START ==="),console.log("Current tool:",o.value),console.log("New tool:",N),document.querySelectorAll(".drawing-help-message").forEach(te=>te.remove());try{console.log("Disabling all modes...");const te=e.value.pm;te.globalEditModeEnabled()&&te.disableGlobalEditMode(),te.globalDragModeEnabled()&&te.disableGlobalDragMode(),te.globalRemovalModeEnabled()&&te.disableGlobalRemovalMode(),te.disableDraw(),w()}catch(te){console.error("Error disabling modes:",te)}if(o.value=N,console.log("Tool set to:",o.value),!N){console.log("No tool selected, clearing control points"),w();return}setTimeout(()=>{var te,W,H,me,U,I,Q,Re;try{switch(console.log("Enabling tool:",N),N){case"Circle":as("Cliquez et maintenez pour dessiner un cercle, relchez pour terminer"),(te=e.value)==null||te.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Semicircle":as("Cliquez et maintenez pour dessiner un demi-cercle, relchez pour terminer"),(W=e.value)==null||W.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Rectangle":as("Cliquez et maintenez pour dessiner un rectangle, relchez pour terminer"),(H=e.value)==null||H.pm.enableDraw("Rectangle",{finishOn:"mouseup"});break;case"Polygon":as("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(me=e.value)==null||me.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Line":as("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(U=e.value)==null||U.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Text":if(as("Cliquez pour ajouter du texte, double-cliquez pour diter"),e.value){const O=J=>{if(!e.value||!t.value)return;const se=d(J.latlng);t.value.addLayer(se),a.value=se,e.value.off("click",O),j("")};e.value.on("click",O)}break;case"drag":as("Cliquez et maintenez une forme pour la dplacer"),(I=e.value)==null||I.pm.enableGlobalDragMode();break;case"delete":as("Cliquez sur une forme pour la supprimer"),(Q=e.value)==null||Q.pm.enableGlobalRemovalMode();break;case"TextRectangle":as("Cliquez et maintenez pour dessiner un rectangle avec texte, relchez pour terminer"),(Re=e.value)==null||Re.pm.enableDraw("Rectangle",{finishOn:"mouseup",continueDrawing:!1}),e.value.once("pm:create",O=>{var de,_e;const J=O.layer;(de=t.value)==null||de.removeLayer(J);const se=new bf(J.getBounds(),"Double-cliquez pour diter",{color:"#3388ff",weight:2,fillColor:"#3388ff",fillOpacity:.2});(_e=t.value)==null||_e.addLayer(se),a.value=se});break}console.log("Tool enabled successfully")}catch(O){console.error("Error enabling tool:",O)}},100),console.log("=== SETTING DRAWING TOOL END ===")}},G=N=>{var W;if(!a.value)return;const te=a.value;if(te.properties=te.properties||{},te.properties.style=te.properties.style||{},te.properties.style={...te.properties.style,...N},te.properties.type==="text"){const H=te.properties._textLayer,me=(W=H==null?void 0:H.getElement())==null?void 0:W.querySelector(".text-annotation");me&&P0(me,te.properties.style);const U={color:N.borderColor||te.properties.style.borderColor,weight:parseInt(N.borderWidth||te.properties.style.borderWidth),opacity:N.borderOpacity??te.properties.style.borderOpacity};"setStyle"in te&&te.setStyle(U)}else{const H={};N.fillColor&&(H.fillColor=N.fillColor),N.fillOpacity!==void 0&&(H.fillOpacity=N.fillOpacity),N.strokeColor&&(H.color=N.strokeColor),N.strokeOpacity!==void 0&&(H.opacity=N.strokeOpacity),N.strokeWidth!==void 0&&(H.weight=N.strokeWidth),N.dashArray&&(H.dashArray=N.dashArray),"setStyle"in te&&te.setStyle(H)}},Y=N=>{if(!a.value)return;const te=a.value;te.properties={...te.properties,...N},N.radius&&te instanceof wt.Circle&&te.setRadius(N.radius)},ke=N=>{console.log("[forceShapeUpdate] Dbut",{currentProperties:N.properties,selectedShapeRef:a.value}),a.value=null,Gs(()=>{a.value=N,console.log("[forceShapeUpdate] Aprs mise  jour",{selectedShape:a.value,properties:a.value.properties})})},Ce=(N,te)=>{console.log("[updateLayerProperties] Dbut",{layer:N,shapeType:te,currentProperties:N.properties}),Jw((H,me)=>{const U=C(H,me);console.log("[updateLayerProperties] Nouvelles proprits calcules",{newProperties:U}),H.properties={...U},ke(H),H.fire("properties:updated",{shape:H,properties:H.properties}),console.log("[updateLayerProperties] Fin",{finalProperties:H.properties,selectedShape:a.value})},100)(N,te)},be=(N,te)=>wt.latLng((N.lat+te.lat)/2,(N.lng+te.lng)/2),ie=N=>{if(!e.value||!t.value)return;w();const te=N.getLatLng(),W=N.getRadius(),H=S(te,"#059669");b.push(H),_(H,N,()=>[Tn(W,"m","Rayon"),Tn(W*2,"m","Diamtre"),Tn(Math.PI*Math.pow(W,2),"m","Surface")].join("<br>"));const me=[],U=[0,45,90,135,180,225,270,315];U.forEach(I=>{const Q=N.calculatePointOnCircle(I),Re=S(Q,"#2563EB");me.push(Re),b.push(Re),_(Re,N,()=>Tn(W,"m","Rayon")),Re.on("mousedown",O=>{if(!e.value)return;wt.DomEvent.stopPropagation(O),e.value.dragging.disable();let J=!0;const se=_e=>{J&&(N.resizeFromControlPoint(_e.latlng),me.forEach((he,we)=>{const Ee=N.calculatePointOnCircle(U[we]);he.setLatLng(Ee)}),H.setLatLng(N.getLatLng()),Re.measureDiv&&(Re.measureDiv.innerHTML=Tn(N.getRadius(),"m","Rayon")))},de=()=>{J=!1,e.value&&(e.value.off("mousemove",se),document.removeEventListener("mouseup",de),e.value.dragging.enable(),N.updateProperties(),a.value=null,Gs(()=>{a.value=N,console.log("Circle resize complete, final properties:",N.properties)}),Ce(N,"Circle"))};e.value.on("mousemove",se),document.addEventListener("mouseup",de)})}),H.on("mousedown",I=>{if(!e.value)return;wt.DomEvent.stopPropagation(I),e.value.dragging.disable();let Q=!0;const Re=N.getLatLng(),O=I.latlng,J=de=>{if(!Q)return;const _e=de.latlng.lng-O.lng,he=de.latlng.lat-O.lat,we=wt.latLng(Re.lat+he,Re.lng+_e);wt.Circle.prototype.setLatLng.call(N,we),H.setLatLng(we),me.forEach((Ee,Ve)=>{const tt=N.calculatePointOnCircle(U[Ve]);Ee.setLatLng(tt)}),H.measureDiv&&(H.measureDiv.innerHTML=[Tn(N.getRadius(),"m","Rayon"),Tn(N.getRadius()*2,"m","Diamtre"),Tn(Math.PI*Math.pow(N.getRadius(),2),"m","Surface")].join("<br>"))},se=()=>{Q=!1,e.value&&(e.value.off("mousemove",J),document.removeEventListener("mouseup",se),e.value.dragging.enable(),N.updateProperties(),a.value=null,Gs(()=>{a.value=N}),Ce(N,"Circle"))};e.value.on("mousemove",J),document.addEventListener("mouseup",se)}),N.on("circle:resized",I=>{console.log("Circle resized event received:",I),Ce(N,"Circle")}),a.value=N},re=N=>{if(!e.value||!t.value)return;if(!(N instanceof Oa)){console.warn("La couche n'est pas une instance de Rectangle");return}const te=N;w();const W=te.getBounds(),H=W.getCenter(),me=[W.getNorthWest(),W.getNorthEast(),W.getSouthEast(),W.getSouthWest()],U=S(H,"#059669");b.push(U),_(U,te,()=>{const{width:O,height:J}=te.getDimensions(),se=O*J;return[Tn(O,"m","Largeur"),Tn(J,"m","Hauteur"),Tn(se,"m","Surface")].join("<br>")});const I=[];me.forEach((O,J)=>{const se=S(O,"#DC2626");I.push(se),b.push(se),_(se,te,()=>{const{width:de,height:_e}=te.getDimensions();return[Tn(de,"m","Largeur"),Tn(_e,"m","Hauteur")].join("<br>")}),se.on("mousedown",de=>{if(!e.value)return;wt.DomEvent.stopPropagation(de),e.value.dragging.disable();const _e=we=>{te.resizeFromCorner(J,we.latlng);const Ee=te.getBounds(),Ve=[Ee.getNorthWest(),Ee.getNorthEast(),Ee.getSouthEast(),Ee.getSouthWest()];se.setLatLng(we.latlng),U.setLatLng(Ee.getCenter()),I.forEach((ne,fe)=>{fe!==J&&ne.setLatLng(Ve[fe])});const tt=te.getMidPoints();Q.forEach((ne,fe)=>{ne.setLatLng(tt[fe]);const{width:De,height:Be}=te.getDimensions(),ce=fe%2===0?De:Be;ne.measureDiv&&(ne.measureDiv.innerHTML=[Tn(ce,"m","Longueur du ct"),Tn(ce/2,"m","Distance au coin")].join("<br>"))})},he=()=>{e.value&&(e.value.off("mousemove",_e),document.removeEventListener("mouseup",he),e.value.dragging.enable(),te.updateProperties(),a.value=null,Gs(()=>{a.value=te}))};e.value.on("mousemove",_e),document.addEventListener("mouseup",he)})});const Q=[];te.getMidPoints().forEach((O,J)=>{const se=S(O,"#2563EB");Q.push(se),b.push(se),_(se,te,()=>{const{width:de,height:_e}=te.getDimensions(),he=J%2===0?de:_e;return[Tn(he,"m","Longueur du ct"),Tn(he/2,"m","Distance au coin")].join("<br>")}),se.on("mousedown",de=>{wt.DomEvent.stopPropagation(de),e.value.dragging.disable();const _e=we=>{const Ee=e.value.mouseEventToLatLng(we.originalEvent),Ve=te.getBounds(),tt=Ve.getNorthWest(),ne=Ve.getSouthEast();let fe;if(J%2===0){const Ge=(tt.lng+ne.lng)/2;fe=wt.latLng(Ee.lat,Ge)}else{const Ge=(tt.lat+ne.lat)/2;fe=wt.latLng(Ge,Ee.lng)}te.resizeFromSide(J,fe);const De=te.getBounds(),Be=[De.getNorthWest(),De.getNorthEast(),De.getSouthEast(),De.getSouthWest()];U.setLatLng(De.getCenter()),I.forEach((Ge,it)=>{Ge.setLatLng(Be[it])});const ce=te.getMidPoints();Q.forEach((Ge,it)=>{Ge.setLatLng(ce[it]);const{width:Qe,height:lt}=te.getDimensions(),Oe=it%2===0?Qe:lt;Ge.measureDiv&&(Ge.measureDiv.innerHTML=[Tn(Oe,"m","Longueur du ct"),Tn(Oe/2,"m","Distance au coin")].join("<br>"))})},he=()=>{e.value.dragging.enable(),e.value.off("mousemove",_e),document.removeEventListener("mouseup",he),te.updateProperties(),a.value=null,Gs(()=>{a.value=te})};e.value.on("mousemove",_e),document.addEventListener("mouseup",he)})}),U.on("mousedown",O=>{if(!e.value)return;wt.DomEvent.stopPropagation(O),e.value.dragging.disable();let J=!0;const se=_e=>{if(!J)return;te.moveFromCenter(_e.latlng),U.setLatLng(_e.latlng);const he=te.getBounds(),we=[he.getNorthWest(),he.getNorthEast(),he.getSouthEast(),he.getSouthWest()];I.forEach((Ve,tt)=>{Ve.setLatLng(we[tt])});const Ee=te.getMidPoints();if(Q.forEach((Ve,tt)=>{Ve.setLatLng(Ee[tt])}),U.measureDiv){const{width:Ve,height:tt}=te.getDimensions(),ne=Ve*tt;U.measureDiv.innerHTML=[Tn(Ve,"m","Largeur"),Tn(tt,"m","Hauteur"),Tn(ne,"m","Surface")].join("<br>")}},de=()=>{J=!1,e.value&&(e.value.off("mousemove",se),document.removeEventListener("mouseup",de),e.value.dragging.enable(),te.updateProperties(),a.value=null,Gs(()=>{a.value=te,console.log("Rectangle move complete, final properties:",te.properties)}))};e.value.on("mousemove",se),document.addEventListener("mouseup",de)})},Ie=N=>{if(performance.mark("updateLineControlPoints-start"),!e.value||!t.value)return;w();const te=N.getLatLngs();if(N instanceof Jr){performance.mark("getCenter-start");const H=N.getCenter();performance.mark("getCenter-end"),performance.measure("getCenter-in-updateLineControlPoints","getCenter-start","getCenter-end");const me=S(H,"#059669");N.shouldHideCenterPoint()&&me.setStyle({opacity:0,fillOpacity:0}),n.value.addLayer(me),b.push(me),_(me,N,()=>{const U=N.properties.length||0;return Tn(U,"m","Longueur totale")}),me.on("mousedown",U=>{if(!e.value)return;wt.DomEvent.stopPropagation(U),e.value.dragging.disable();const I=lu.start();N instanceof Jr&&(N.startVertexMove(),b.forEach(de=>{de.options&&de.options.color==="#059669"&&de.setStyle({opacity:0,fillOpacity:0})}));let Q=!0;const Re=U.latlng,O=[...N.getLatLngs()];b.forEach((de,_e)=>{_e>0&&de.setStyle({opacity:0,fillOpacity:0})});const J=de=>{if(!Q)return;lu.iteration();const _e=de.latlng.lng-Re.lng,he=de.latlng.lat-Re.lat,we=O.map(Ee=>wt.latLng(Ee.lat+he,Ee.lng+_e));wt.Polyline.prototype.setLatLngs.call(N,we),me.setLatLng(de.latlng)},se=()=>{if(Q=!1,!!e.value){if(e.value.off("mousemove",J),document.removeEventListener("mouseup",se),e.value.dragging.enable(),N instanceof Jr){N.endVertexMove();const de=N.getCenter();b.forEach(_e=>{_e.options&&_e.options.color==="#059669"&&(_e.setLatLng(de),_e.setStyle({opacity:1,fillOpacity:1}))}),Ce(N,"Line")}else Ce(N,"Line");lu.stop(I),a.value=null,Gs(()=>{a.value=N})}};e.value.on("mousemove",J),document.addEventListener("mouseup",se)})}te.forEach((H,me)=>{const U=S(H,"#DC2626");b.push(U),_(U,N,()=>{let I=0,Q=0;return N instanceof Jr?(I=N.properties.length||0,Q=N.getLengthToVertex(me)):(I=te.reduce((Re,O,J)=>J===0?0:Re+O.distanceTo(te[J-1]),0),Q=te.slice(0,me+1).reduce((Re,O,J)=>J===0?0:Re+O.distanceTo(te[J-1]),0)),[Tn(Q,"m","Distance depuis le dbut"),Tn(I,"m","Longueur totale")].join("<br>")}),U.on("mousedown",I=>{if(!e.value)return;wt.DomEvent.stopPropagation(I),e.value.dragging.disable();const Q=lu.start();N instanceof Jr&&(N.startVertexMove(),b.forEach(se=>{se.options&&se.options.color==="#059669"&&se.setStyle({opacity:0,fillOpacity:0})}));let Re=!0;const O=se=>{Re&&(lu.iteration(),N instanceof Jr?N.moveVertex(me,se.latlng):(te[me]=se.latlng,N.setLatLngs(te)),U.setLatLng(se.latlng),W())},J=()=>{if(Re=!1,!!e.value){if(e.value.off("mousemove",O),document.removeEventListener("mouseup",J),e.value.dragging.enable(),N instanceof Jr){N.endVertexMove();const se=N.getCenter();b.forEach(de=>{de.options&&de.options.color==="#059669"&&(de.setLatLng(se),de.setStyle({opacity:1,fillOpacity:1}))}),Ce(N,"Line")}else Ce(N,"Line");lu.stop(Q),a.value=null,Gs(()=>{a.value=N})}};e.value.on("mousemove",O),document.addEventListener("mouseup",J)})});const W=()=>{performance.mark("updateMidPoints-start");const H=N.getLatLngs(),me=N instanceof Jr?H.length+1:H.length;b.slice(me).forEach(I=>{var Q;I&&typeof I.remove=="function"&&((Q=n.value)==null||Q.removeLayer(I))}),b=b.slice(0,me),(N instanceof Jr?N.getMidPoints():Array.from({length:H.length-1},(I,Q)=>{const Re=H[Q],O=H[Q+1];return wt.latLng((Re.lat+O.lat)/2,(Re.lng+O.lng)/2)})).forEach((I,Q)=>{const Re=S(I,"#2563EB");b.push(Re),_(Re,N,()=>{let O=0,J=0,se=0;if(N instanceof Jr)O=N.getSegmentLengths()[Q],J=N.properties.length||0,se=N.getLengthToVertex(Q)+O/2;else{const de=H[Q],_e=H[Q+1];O=de.distanceTo(_e),J=H.reduce((he,we,Ee)=>Ee===0?0:he+we.distanceTo(H[Ee-1]),0),se=H.slice(0,Q+1).reduce((he,we,Ee)=>Ee===0?0:he+we.distanceTo(H[Ee-1]),0)+O/2}return[Tn(O,"m","Longueur du segment"),Tn(O/2,"m","Demi-segment"),Tn(se,"m","Distance depuis le dbut"),Tn(J,"m","Longueur totale")].join("<br>")}),Re.on("mousedown",O=>{if(!e.value)return;wt.DomEvent.stopPropagation(O),e.value.dragging.disable();let J=!0;const se=_e=>{if(J){if(N instanceof Jr)N.addVertex(Q,_e.latlng);else{const he=H.slice();he.splice(Q+1,0,_e.latlng),N.setLatLngs(he)}Ie(N),J=!1}},de=()=>{J=!1,e.value&&(e.value.off("mousemove",se),document.removeEventListener("mouseup",de),e.value.dragging.enable(),N instanceof Jr&&(N.updateProperties(),Ce(N,"Line")),a.value=null,Gs(()=>{a.value=N}))};e.value.on("mousemove",se),document.addEventListener("mouseup",de)})}),performance.mark("updateMidPoints-end"),performance.measure("updateMidPoints","updateMidPoints-start","updateMidPoints-end")};W(),performance.mark("updateLineControlPoints-end"),performance.measure("updateLineControlPoints","updateLineControlPoints-start","updateLineControlPoints-end")},Je=N=>{if(!e.value||!t.value)return;w();const te=N.getLatLngs()[0],W=te.map(Q=>[Q.lng,Q.lat]);W.push(W[0]);const H=ph([W]),me=ed(H),U=te.reduce((Q,Re,O)=>{const J=te[(O+1)%te.length];return Q+Re.distanceTo(J)},0);te.forEach((Q,Re)=>{const O=S(Q,"#DC2626");b.push(O),_(O,N,()=>{const J=te[(Re-1+te.length)%te.length],se=te[(Re+1)%te.length],de=Q.distanceTo(J),_e=Q.distanceTo(se);return[Tn(de,"m","Distance au point prcdent"),Tn(_e,"m","Distance au point suivant"),Tn(U,"m","Primtre total"),Tn(me,"m","Surface")].join("<br>")}),O.on("mousedown",J=>{if(wt.DomEvent.stopPropagation(J),!e.value)return;e.value.dragging.disable();let se=!0;const de=he=>{se&&(wt.DomEvent.stopPropagation(he),te[Re]=he.latlng,N.setLatLngs([te]),O.setLatLng(he.latlng),I())},_e=()=>{se=!1,e.value&&(e.value.off("mousemove",de),document.removeEventListener("mouseup",_e),e.value.dragging.enable())};e.value.on("mousemove",de),document.addEventListener("mouseup",_e)})});const I=()=>{const Q=N.getLatLngs()[0];b.slice(Q.length).forEach(Re=>{t.value&&t.value.removeLayer(Re)}),b=b.slice(0,Q.length);for(let Re=0;Re<Q.length;Re++){const O=Q[(Re+1)%Q.length],J=be(Q[Re],O),se=S(J,"#2563EB");b.push(se),_(se,N,()=>{const de=Q[Re].distanceTo(O);return[Tn(de,"m","Longueur du segment"),Tn(U,"m","Primtre total"),Tn(me,"m","Surface")].join("<br>")}),se.on("mousedown",de=>{if(!e.value)return;wt.DomEvent.stopPropagation(de),e.value.dragging.disable();let _e=!0;const he=Ee=>{_e&&(Q.splice((Re+1)%Q.length,0,Ee.latlng),N.setLatLngs([Q]),Je(N),_e=!1)},we=()=>{_e=!1,e.value&&(e.value.off("mousemove",he),document.removeEventListener("mouseup",we),e.value.dragging.enable())};e.value.on("mousemove",he),document.addEventListener("mouseup",we)})}};I()},V=N=>{if(!e.value||!t.value)return;w();const te=N.getCenter(),W=N.getRadius(),H=N.getStartAngle(),me=N.getStopAngle(),U=N.getOpeningAngle(),I=N.calculatePointOnArc(H),Q=N.calculatePointOnArc(me),Re=S(I,"#DC2626"),O=S(Q,"#DC2626");b.push(Re,O),_(Re,N,()=>`Angle d'ouverture: ${wf(U)}`),_(O,N,()=>`Angle d'ouverture: ${wf(U)}`);const J=S(te,"#059669");if(b.push(J),_(J,N,()=>{const se=N.properties.area||0;return[Tn(W,"m","Rayon"),Tn(se,"m","Surface"),`Angle: ${wf(U)}`].join("<br>")}),U>5){const se=N.calculateMidpointPosition(),de=S(se,"#2563EB");b.push(de),_(de,N,()=>Tn(N.getRadius(),"m","Rayon")),de.on("mousedown",_e=>{if(!e.value)return;wt.DomEvent.stopPropagation(_e),e.value.dragging.disable();let he=!0;const we=Ve=>{if(!he)return;const tt=te.distanceTo(Ve.latlng);N.setRadius(tt);const ne=N.calculatePointOnArc(H),fe=N.calculatePointOnArc(me),De=N.calculateMidpointPosition();if(Re.setLatLng(ne),O.setLatLng(fe),de.setLatLng(De),a.value=N,de){const Be=de.measureDiv;Be&&(Be.innerHTML=Tn(tt,"m","Rayon"))}},Ee=()=>{he=!1,e.value&&(e.value.off("mousemove",we),document.removeEventListener("mouseup",Ee),e.value.dragging.enable())};e.value.on("mousemove",we),document.addEventListener("mouseup",Ee)})}[Re,O].forEach((se,de)=>{se.on("mousedown",_e=>{if(!e.value)return;wt.DomEvent.stopPropagation(_e),e.value.dragging.disable();let he=!0;const we=b.find(tt=>{var ne;return((ne=tt.options)==null?void 0:ne.color)==="#2563EB"}),Ee=tt=>{if(!he||!e.value)return;const ne=Math.atan2(tt.latlng.lat-te.lat,tt.latlng.lng-te.lng)*180/Math.PI;de===0?N.setAngles(ne,N.getStopAngle()):N.setAngles(N.getStartAngle(),ne);const fe=N.getStartAngle(),De=N.getStopAngle(),Be=N.getOpeningAngle(),ce=N.calculatePointOnArc(fe),Ge=N.calculatePointOnArc(De);if(Re.setLatLng(ce),O.setLatLng(Ge),we&&Be>5){const it=N.calculateMidpointPosition();we.setLatLng(it),we.setStyle({opacity:1,fillOpacity:1})}else we&&we.setStyle({opacity:0,fillOpacity:0});a.value=N},Ve=()=>{he=!1,e.value&&(e.value.off("mousemove",Ee),document.removeEventListener("mouseup",Ve),e.value.dragging.enable(),V(N))};e.value.on("mousemove",Ee),document.addEventListener("mouseup",Ve)})}),J.on("mousedown",se=>{if(!e.value)return;wt.DomEvent.stopPropagation(se),e.value.dragging.disable();let de=!0;const _e=we=>{if(!de)return;N.setCenter(we.latlng),J.setLatLng(we.latlng);const Ee=N.getStartAngle(),Ve=N.getStopAngle(),tt=N.getOpeningAngle(),ne=N.calculatePointOnArc(Ee),fe=N.calculatePointOnArc(Ve);Re.setLatLng(ne),O.setLatLng(fe);const De=b.find(Be=>{var ce;return((ce=Be.options)==null?void 0:ce.color)==="#2563EB"});if(De&&tt>5){const Be=N.calculateMidpointPosition();De.setLatLng(Be),De.setStyle({opacity:1,fillOpacity:1})}else De&&De.setStyle({opacity:0,fillOpacity:0});a.value=N},he=()=>{de=!1,e.value&&(e.value.off("mousemove",_e),document.removeEventListener("mouseup",he),e.value.dragging.enable())};e.value.on("mousemove",_e),document.addEventListener("mouseup",he)})},X=N=>{var te;if(!(!e.value||!i.value)){if(console.log("[generateTempControlPoints] Gnration des points temporaires pour",{layerType:N.constructor.name,properties:N.properties}),i.value.clearLayers(),N instanceof Vu){const W=N.getLatLng(),H=S(W,"#059669");i.value.addLayer(H),N.getCardinalPoints().forEach(me=>{const U=S(me,"#2563EB");i.value.addLayer(U)})}else if(N instanceof wt.Circle){const W=N.getLatLng(),H=N.getRadius(),me=S(W,"#059669");i.value.addLayer(me),[0,45,90,135,180,225,270,315].forEach(U=>{const I=U*Math.PI/180,Q=wt.latLng(W.lat+H/111319.9*Math.sin(I),W.lng+H/(111319.9*Math.cos(W.lat*Math.PI/180))*Math.cos(I)),Re=S(Q,"#2563EB");i.value.addLayer(Re)})}else if(N instanceof Oa){const W=N,H=W.getBounds(),me=H.getCenter(),U=[H.getNorthWest(),H.getNorthEast(),H.getSouthEast(),H.getSouthWest()],I=S(me,"#059669");i.value.addLayer(I),U.forEach(Q=>{const Re=S(Q,"#DC2626");i.value.addLayer(Re)}),W.getMidPoints().forEach(Q=>{const Re=S(Q,"#2563EB");i.value.addLayer(Re)})}else if(N instanceof Ol||((te=N.properties)==null?void 0:te.type)==="Semicircle"){const W=N,H=S(W.getCenter(),"#059669");i.value.addLayer(H);const me=W.calculatePointOnArc(W.getStartAngle()),U=W.calculatePointOnArc(W.getStopAngle()),I=S(me,"#DC2626"),Q=S(U,"#DC2626");if(i.value.addLayer(I),i.value.addLayer(Q),W.getOpeningAngle()>5){const Re=W.calculateMidpointPosition(),O=S(Re,"#2563EB");i.value.addLayer(O)}}else if(N instanceof wt.Polyline){const W=N.getLatLngs();if(N instanceof Jr){const H=N.getCenter(),me=S(H,"#059669");N.shouldHideCenterPoint()&&me.setStyle({opacity:0,fillOpacity:0}),i.value.addLayer(me)}if(W.forEach(H=>{const me=S(H,"#DC2626");i.value.addLayer(me)}),N instanceof Jr)N.getMidPoints().forEach(H=>{const me=S(H,"#2563EB");i.value.addLayer(me)});else for(let H=0;H<W.length-1;H++){const me=be(W[H],W[H+1]),U=S(me,"#2563EB");i.value.addLayer(U)}}else if(N instanceof wt.Polygon){const W=N.getLatLngs()[0];W.forEach(H=>{const me=S(H,"#DC2626");i.value.addLayer(me)});for(let H=0;H<W.length;H++){const me=W[(H+1)%W.length],U=be(W[H],me),I=S(U,"#2563EB");i.value.addLayer(I)}}console.log("[generateTempControlPoints] Points temporaires gnrs",{count:i.value.getLayers().length})}};return Ph(()=>{e.value&&(e.value.remove(),e.value=null)}),{map:e,featureGroup:t,controlPointsGroup:n,tempControlPointsGroup:i,currentTool:o,selectedShape:a,isDrawing:u,initMap:R,setDrawingTool:j,updateShapeStyle:G,updateShapeProperties:Y,updateTextFixedSize:F,adjustView:$,clearActiveControlPoints:w}}function Xw(){const e=It(null),t=It(""),n=It("Ville"),i={Ville:Yr.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19}),Satellite:Yr.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:" Esri",maxZoom:19}),Cadastre:Yr.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{attribution:"Cadastre - Carte  IGN/Geoportail",maxZoom:19})};return{map:e,searchQuery:t,currentBaseMap:n,baseMaps:i,initMap:d=>{e.value=d,Yr.control.layers(i).addTo(d),i[n.value].addTo(d)},searchLocation:async()=>{if(!(!e.value||!t.value))try{const m=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(t.value)}`)).json();if(m&&m.length>0){const{lat:_,lon:b}=m[0];e.value.setView([_,b],13)}}catch(d){console.error("Erreur lors de la recherche de localisation:",d)}},changeBaseMap:d=>{!e.value||!i[d]||(Object.values(i).forEach(m=>{var _;(_=e.value)!=null&&_.hasLayer(m)&&e.value.removeLayer(m)}),i[d].addTo(e.value),n.value=d)}}}const zh=Td("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[]}),getters:{getPlanById:e=>t=>e.plans.find(n=>n.id===t),hasUnsavedChanges:e=>e.unsavedChanges,getCurrentPlanHistory:e=>e.planHistory},actions:{async fetchPlans(){var t,n;const e=hs();this.loading=!0;try{let i="/plans/";e.isDealer?i+="?concessionnaire="+((t=e.user)==null?void 0:t.id):e.isClient&&(i+="?utilisateur="+((n=e.user)==null?void 0:n.id));const o=await wn.get(i);this.plans=o.data}catch(i){throw this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1}},async fetchPlansWithDetails(){var t,n;const e=hs();this.loading=!0;try{let i="/plans/";const o={include_details:!0};e.isDealer?o.concessionnaire=(t=e.user)==null?void 0:t.id:e.isClient&&(o.utilisateur=(n=e.user)==null?void 0:n.id);const a=await wn.get(i,{params:o});return this.plans=a.data,a}catch(i){throw this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1}},async createPlan(e){this.loading=!0;try{console.log("Creating plan with data:",e);const t=await wn.post("/plans/",e);return console.log("Plan creation response:",t.data),this.plans.push(t.data),t.data}catch(t){const n=t instanceof Error?t.message:String(t);throw console.error("Error creating plan:",n),this.error="Erreur lors de la cration du plan",t}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(e){var t,n;if(this.unsavedChanges){this.loading=!0;try{const i=await wn.patch(`/plans/${e}/`,{...this.currentPlan,version:((t=this.currentPlan)==null?void 0:t.version)||1}),o=this.plans.findIndex(a=>a.id===e);return o!==-1&&(this.plans[o]=i.data),((n=this.currentPlan)==null?void 0:n.id)===e&&(this.currentPlan=i.data),this.unsavedChanges=!1,i.data}catch(i){throw this.error="Erreur lors de la sauvegarde du plan",i}finally{this.loading=!1}}},async updatePlanDetails(e,t){var n;try{const i=await wn.patch(`/plans/${e}/`,t),o=this.plans.findIndex(a=>a.id===e);return o!==-1&&(this.plans[o]={...this.plans[o],...i.data}),((n=this.currentPlan)==null?void 0:n.id)===e&&(this.currentPlan={...this.currentPlan,...i.data}),i.data}catch(i){throw console.error("Erreur lors de la mise  jour du plan:",i),i}},async fetchPlanHistory(e){this.loading=!0;try{const t=await wn.get(`/plans/${e}/historique/`);return this.planHistory=t.data,t.data}catch(t){throw this.error="Erreur lors de la rcupration de l'historique",t}finally{this.loading=!1}},async restorePlanVersion(e,t){var n;this.loading=!0;try{const i=await wn.post(`/plans/${e}/restaurer/`,{version_id:t});((n=this.currentPlan)==null?void 0:n.id)===e&&(this.currentPlan=i.data);const o=this.plans.findIndex(a=>a.id===e);return o!==-1&&(this.plans[o]=i.data),i.data}catch(i){throw this.error="Erreur lors de la restauration de la version",i}finally{this.loading=!1}},setCurrentPlan(e){this.currentPlan=e,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.stopAutoSave()},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(e){var t;this.loading=!0;try{await wn.delete(`/plans/${e}/`),this.plans=this.plans.filter(n=>n.id!==e),((t=this.currentPlan)==null?void 0:t.id)===e&&this.clearCurrentPlan()}catch(n){throw this.error="Erreur lors de la suppression du plan",n}finally{this.loading=!1}}}}),s1=Td("drawing",{state:()=>({currentPlanId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null}),getters:{hasUnsavedChanges:e=>e.unsavedChanges,getCurrentElements:e=>e.elements,getSelectedElement:e=>e.selectedElement,getCurrentTool:e=>e.currentTool,getCurrentStyle:e=>e.currentStyle,getLastUsedType:e=>e.lastUsedType},actions:{setCurrentPlan(e){this.currentPlanId=e,e===null&&this.clearElements()},clearCurrentPlan(){this.currentPlanId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1},addElement(e){!e.type_forme&&this.lastUsedType&&(e.type_forme=this.lastUsedType),this.elements.push(e),this.unsavedChanges=!0},updateElement(e){const t=this.elements.findIndex(n=>n.id===e.id);if(t!==-1){const n=this.elements[t].type_forme;this.elements[t]={...e,type_forme:n},this.unsavedChanges=!0}},removeElement(e){const t=this.elements.findIndex(n=>n.id===e);t!==-1&&(this.elements.splice(t,1),this.unsavedChanges=!0)},selectElement(e){this.selectedElement=e},setCurrentTool(e){this.currentTool=e,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(e)&&(this.lastUsedType=e)},setCurrentStyle(e){this.currentStyle={...this.currentStyle,...e}},async loadPlanElements(e){var t;this.loading=!0;try{const i=(await wn.get(`/plans/${e}/`)).data;this.elements=i.formes.map(o=>({...o,type_forme:o.type_forme})),this.currentPlanId=e,this.unsavedChanges=!1,i.preferences&&(i.preferences.currentTool&&this.setCurrentTool(i.preferences.currentTool),i.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...i.preferences.currentStyle}),i.preferences.lastUsedType&&(this.lastUsedType=i.preferences.lastUsedType)),(t=this.selectedElement)!=null&&t.type_forme&&this.setCurrentTool(this.selectedElement.type_forme)}catch(n){throw console.error("Erreur lors du chargement des lments:",n),this.error="Erreur lors du chargement des lments du plan",n}finally{this.loading=!1}},async saveToPlan(e){zh(),this.loading=!0;try{const t=e||this.currentPlanId;if(!t)throw new Error("Aucun plan slectionn pour la sauvegarde");const n=this.elements.map(o=>({...o,type_forme:o.type_forme||this.lastUsedType})),i=await wn.post(`/plans/${t}/save_with_elements/`,{formes:n,connexions:[],annotations:[],preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}});return this.elements=i.data.formes.map(o=>({...o,type_forme:o.type_forme})),this.unsavedChanges=!1,i.data}catch(t){throw console.error("Erreur lors de la sauvegarde:",t),this.error="Erreur lors de la sauvegarde du plan",t}finally{this.loading=!1}}}}),Qw={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},ex={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4"},tx={key:0,class:"mb-4"},nx={key:0,class:"animate-pulse"},rx=["value"],ix={key:1,class:"mb-4"},sx={key:0,class:"animate-pulse"},ox=["disabled"],ax={value:null},lx=["value"],ux={class:"mb-4"},cx={class:"mb-6"},hx={class:"flex justify-end space-x-3"},fx=["disabled"],dx={key:0},px={key:1},o1=Ms({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","dealerSelected","clientSelected"],setup(e,{expose:t,emit:n}){const i=e,o=n,a=hs(),u=zh();It(!1);const d=It(!1),m=It(null),_=It([]),b=It([]),w=It(null),S=It(null),C=It(!1),F=It(!1),R=It({nom:"",description:"",concessionnaire:null,client:null}),$=Nn(()=>{var ie,re;return((ie=a.user)==null?void 0:ie.user_type)==="admin"?R.value.nom.trim()&&R.value.concessionnaire&&R.value.client:((re=a.user)==null?void 0:re.user_type)==="dealer"?R.value.nom.trim()&&R.value.client:R.value.nom.trim()});Yi(()=>R.value.concessionnaire,async ie=>{if(i.modelValue)if(console.log("[NewPlanModal] Concessionnaire changed:",ie),ie){const re=_.value.find(Ie=>Ie.id===ie);re&&await Y(re)}else b.value=[],w.value=null,S.value=null,R.value.client=null}),Yi(()=>i.modelValue,ie=>{var re,Ie;ie?((re=a.user)==null?void 0:re.user_type)==="admin"?j():((Ie=a.user)==null?void 0:Ie.user_type)==="dealer"&&G(a.user.id):(R.value={nom:"",description:"",concessionnaire:null,client:null},w.value=null,S.value=null,b.value=[],_.value=[],m.value=null)}),Nn(()=>{var ie;return((ie=a.user)==null?void 0:ie.user_type)==="admin"?w.value?b.value:[]:b.value});async function j(){console.log("[NewPlanModal] Loading dealers..."),C.value=!0;try{const ie=await wn.get("/users/",{params:{role:"CONCESSIONNAIRE"}});console.log("[NewPlanModal] Dealers loaded:",ie.data),_.value=ie.data}catch(ie){console.error("[NewPlanModal] Error loading dealers:",ie)}finally{C.value=!1}}async function G(ie){console.log("[NewPlanModal] Loading clients for dealer:",ie),F.value=!0;try{const re=await wn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:ie}});console.log("[NewPlanModal] Clients loaded:",re.data),b.value=Array.isArray(re.data)?re.data:[re.data]}catch(re){console.error("[NewPlanModal] Error loading clients:",re),b.value=[]}finally{F.value=!1}}async function Y(ie){if(i.modelValue){console.log("[NewPlanModal] Selecting dealer:",ie),w.value=ie,R.value.concessionnaire=ie.id,F.value=!0;try{const re=await wn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:ie.id}});console.log("[NewPlanModal] Clients loaded:",re.data),b.value=Array.isArray(re.data)?re.data:[re.data]}catch(re){console.error("[NewPlanModal] Error loading clients:",re),b.value=[]}finally{F.value=!1}}}function ke(ie){i.modelValue&&(console.log("[NewPlanModal] Client selected:",ie),S.value=ie,R.value.client=ie.id,o("clientSelected",ie))}function Ce(){o("update:modelValue",!1),R.value={nom:"",description:"",concessionnaire:null,client:null},w.value=null,S.value=null,b.value=[],m.value=null}async function be(){var ie,re,Ie,Je,V;m.value=null,d.value=!0;try{const X={nom:R.value.nom.trim(),description:R.value.description.trim()};((ie=a.user)==null?void 0:ie.user_type)==="admin"?(X.concessionnaire=R.value.concessionnaire,X.client=R.value.client):((re=a.user)==null?void 0:re.user_type)==="dealer"?(X.concessionnaire=a.user.id,X.client=R.value.client):((Ie=a.user)==null?void 0:Ie.user_type)==="client"&&(X.client=a.user.id);const N=await u.createPlan(X);o("created",N.id),Ce()}catch(X){console.error("[NewPlanModal] Error creating plan:",X),m.value=((V=(Je=X.response)==null?void 0:Je.data)==null?void 0:V.detail)||X.message||"Une erreur est survenue lors de la cration du plan"}finally{d.value=!1}}return t({dealers:_,dealerClients:b,selectedDealer:w,selectedClient:S,loadDealers:j,loadDealerClients:G,selectDealer:Y,selectClient:ke}),(ie,re)=>{var Ie,Je;return ie.modelValue?(ut(),dt("div",Qw,[B("div",ex,[B("div",{class:"flex justify-between items-center mb-4"},[re[5]||(re[5]=B("h2",{class:"text-xl font-semibold text-gray-900"},"Crer un nouveau plan",-1)),B("button",{onClick:Ce,class:"text-gray-400 hover:text-gray-500"},re[4]||(re[4]=[B("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),Cn(a).isAdmin?(ut(),dt("div",tx,[re[8]||(re[8]=B("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Concessionnaire",-1)),C.value?(ut(),dt("div",nx,re[6]||(re[6]=[B("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):jn((ut(),dt("select",{key:1,"onUpdate:modelValue":re[0]||(re[0]=V=>R.value.concessionnaire=V),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[re[7]||(re[7]=B("option",{value:null},"Slectionnez un concessionnaire",-1)),(ut(!0),dt(Sn,null,Wn(_.value,V=>(ut(),dt("option",{key:V.id,value:V.id},kt(V.first_name)+" "+kt(V.last_name)+" ("+kt(V.company_name)+") ",9,rx))),128))],512)),[[Hs,R.value.concessionnaire]])])):un("",!0),((Ie=Cn(a).user)==null?void 0:Ie.user_type)==="admin"||((Je=Cn(a).user)==null?void 0:Je.user_type)==="dealer"?(ut(),dt("div",ix,[re[10]||(re[10]=B("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Client",-1)),F.value?(ut(),dt("div",sx,re[9]||(re[9]=[B("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):jn((ut(),dt("select",{key:1,"onUpdate:modelValue":re[1]||(re[1]=V=>R.value.client=V),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!b.value.length},[B("option",ax,kt(b.value.length?"Slectionnez un client":"Aucun client disponible"),1),(ut(!0),dt(Sn,null,Wn(b.value,V=>(ut(),dt("option",{key:V.id,value:V.id},kt(V.first_name)+" "+kt(V.last_name)+" ("+kt(V.company_name)+") ",9,lx))),128))],8,ox)),[[Hs,R.value.client]])])):un("",!0),B("div",ux,[re[11]||(re[11]=B("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),jn(B("input",{"onUpdate:modelValue":re[2]||(re[2]=V=>R.value.nom=V),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[Ar,R.value.nom]])]),B("div",cx,[re[12]||(re[12]=B("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),jn(B("textarea",{"onUpdate:modelValue":re[3]||(re[3]=V=>R.value.description=V),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[Ar,R.value.description]])]),B("div",hx,[B("button",{onClick:Ce,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),B("button",{onClick:be,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!$.value||d.value},[d.value?(ut(),dt("span",dx,"Cration en cours...")):(ut(),dt("span",px,"Crer le plan"))],8,fx)])])])):un("",!0)}}});function or(e){"@babel/helpers - typeof";return or=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},or(e)}var Ki=Uint8Array,Zs=Uint16Array,Fd=Int32Array,Uh=new Ki([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),qh=new Ki([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),rd=new Ki([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a1=function(e,t){for(var n=new Zs(31),i=0;i<31;++i)n[i]=t+=1<<e[i-1];for(var o=new Fd(n[30]),i=1;i<30;++i)for(var a=n[i];a<n[i+1];++a)o[a]=a-n[i]<<5|i;return{b:n,r:o}},l1=a1(Uh,2),u1=l1.b,id=l1.r;u1[28]=258,id[258]=28;var c1=a1(qh,0),mx=c1.b,S0=c1.r,sd=new Zs(32768);for(var br=0;br<32768;++br){var ul=(br&43690)>>1|(br&21845)<<1;ul=(ul&52428)>>2|(ul&13107)<<2,ul=(ul&61680)>>4|(ul&3855)<<4,sd[br]=((ul&65280)>>8|(ul&255)<<8)>>1}var pa=function(e,t,n){for(var i=e.length,o=0,a=new Zs(t);o<i;++o)e[o]&&++a[e[o]-1];var u=new Zs(t);for(o=1;o<t;++o)u[o]=u[o-1]+a[o-1]<<1;var d;if(n){d=new Zs(1<<t);var m=15-t;for(o=0;o<i;++o)if(e[o])for(var _=o<<4|e[o],b=t-e[o],w=u[e[o]-1]++<<b,S=w|(1<<b)-1;w<=S;++w)d[sd[w]>>m]=_}else for(d=new Zs(i),o=0;o<i;++o)e[o]&&(d[o]=sd[u[e[o]-1]++]>>15-e[o]);return d},yl=new Ki(288);for(var br=0;br<144;++br)yl[br]=8;for(var br=144;br<256;++br)yl[br]=9;for(var br=256;br<280;++br)yl[br]=7;for(var br=280;br<288;++br)yl[br]=8;var mc=new Ki(32);for(var br=0;br<32;++br)mc[br]=5;var gx=pa(yl,9,0),vx=pa(yl,9,1),_x=pa(mc,5,0),yx=pa(mc,5,1),xf=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},Ro=function(e,t,n){var i=t/8|0;return(e[i]|e[i+1]<<8)>>(t&7)&n},Lf=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},jd=function(e){return(e+7)/8|0},h1=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new Ki(e.subarray(t,n))},bx=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Fo=function(e,t,n){var i=new Error(t||bx[e]);if(i.code=e,Error.captureStackTrace&&Error.captureStackTrace(i,Fo),!n)throw i;return i},wx=function(e,t,n,i){var o=e.length,a=0;if(!o||t.f&&!t.l)return n||new Ki(0);var u=!n,d=u||t.i!=2,m=t.i;u&&(n=new Ki(o*3));var _=function(tt){var ne=n.length;if(tt>ne){var fe=new Ki(Math.max(ne*2,tt));fe.set(n),n=fe}},b=t.f||0,w=t.p||0,S=t.b||0,C=t.l,F=t.d,R=t.m,$=t.n,j=o*8;do{if(!C){b=Ro(e,w,1);var G=Ro(e,w+1,3);if(w+=3,G)if(G==1)C=vx,F=yx,R=9,$=5;else if(G==2){var be=Ro(e,w,31)+257,ie=Ro(e,w+10,15)+4,re=be+Ro(e,w+5,31)+1;w+=14;for(var Ie=new Ki(re),Je=new Ki(19),V=0;V<ie;++V)Je[rd[V]]=Ro(e,w+V*3,7);w+=ie*3;for(var X=xf(Je),N=(1<<X)-1,te=pa(Je,X,1),V=0;V<re;){var W=te[Ro(e,w,N)];w+=W&15;var Y=W>>4;if(Y<16)Ie[V++]=Y;else{var H=0,me=0;for(Y==16?(me=3+Ro(e,w,3),w+=2,H=Ie[V-1]):Y==17?(me=3+Ro(e,w,7),w+=3):Y==18&&(me=11+Ro(e,w,127),w+=7);me--;)Ie[V++]=H}}var U=Ie.subarray(0,be),I=Ie.subarray(be);R=xf(U),$=xf(I),C=pa(U,R,1),F=pa(I,$,1)}else Fo(1);else{var Y=jd(w)+4,ke=e[Y-4]|e[Y-3]<<8,Ce=Y+ke;if(Ce>o){m&&Fo(0);break}d&&_(S+ke),n.set(e.subarray(Y,Ce),S),t.b=S+=ke,t.p=w=Ce*8,t.f=b;continue}if(w>j){m&&Fo(0);break}}d&&_(S+131072);for(var Q=(1<<R)-1,Re=(1<<$)-1,O=w;;O=w){var H=C[Lf(e,w)&Q],J=H>>4;if(w+=H&15,w>j){m&&Fo(0);break}if(H||Fo(2),J<256)n[S++]=J;else if(J==256){O=w,C=null;break}else{var se=J-254;if(J>264){var V=J-257,de=Uh[V];se=Ro(e,w,(1<<de)-1)+u1[V],w+=de}var _e=F[Lf(e,w)&Re],he=_e>>4;_e||Fo(3),w+=_e&15;var I=mx[he];if(he>3){var de=qh[he];I+=Lf(e,w)&(1<<de)-1,w+=de}if(w>j){m&&Fo(0);break}d&&_(S+131072);var we=S+se;if(S<I){var Ee=a-I,Ve=Math.min(I,we);for(Ee+S<0&&Fo(3);S<Ve;++S)n[S]=i[Ee+S]}for(;S<we;++S)n[S]=n[S-I]}}t.l=C,t.p=O,t.b=S,t.f=b,C&&(b=1,t.m=R,t.d=F,t.n=$)}while(!b);return S!=n.length&&u?h1(n,0,S):n.subarray(0,S)},Ra=function(e,t,n){n<<=t&7;var i=t/8|0;e[i]|=n,e[i+1]|=n>>8},Gu=function(e,t,n){n<<=t&7;var i=t/8|0;e[i]|=n,e[i+1]|=n>>8,e[i+2]|=n>>16},Cf=function(e,t){for(var n=[],i=0;i<e.length;++i)e[i]&&n.push({s:i,f:e[i]});var o=n.length,a=n.slice();if(!o)return{t:d1,l:0};if(o==1){var u=new Ki(n[0].s+1);return u[n[0].s]=1,{t:u,l:1}}n.sort(function(Ce,be){return Ce.f-be.f}),n.push({s:-1,f:25001});var d=n[0],m=n[1],_=0,b=1,w=2;for(n[0]={s:-1,f:d.f+m.f,l:d,r:m};b!=o-1;)d=n[n[_].f<n[w].f?_++:w++],m=n[_!=b&&n[_].f<n[w].f?_++:w++],n[b++]={s:-1,f:d.f+m.f,l:d,r:m};for(var S=a[0].s,i=1;i<o;++i)a[i].s>S&&(S=a[i].s);var C=new Zs(S+1),F=od(n[b-1],C,0);if(F>t){var i=0,R=0,$=F-t,j=1<<$;for(a.sort(function(be,ie){return C[ie.s]-C[be.s]||be.f-ie.f});i<o;++i){var G=a[i].s;if(C[G]>t)R+=j-(1<<F-C[G]),C[G]=t;else break}for(R>>=$;R>0;){var Y=a[i].s;C[Y]<t?R-=1<<t-C[Y]++-1:++i}for(;i>=0&&R;--i){var ke=a[i].s;C[ke]==t&&(--C[ke],++R)}F=t}return{t:new Ki(C),l:F}},od=function(e,t,n){return e.s==-1?Math.max(od(e.l,t,n+1),od(e.r,t,n+1)):t[e.s]=n},M0=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Zs(++t),i=0,o=e[0],a=1,u=function(m){n[i++]=m},d=1;d<=t;++d)if(e[d]==o&&d!=t)++a;else{if(!o&&a>2){for(;a>138;a-=138)u(32754);a>2&&(u(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(u(o),--a;a>6;a-=6)u(8304);a>2&&(u(a-3<<5|8208),a=0)}for(;a--;)u(o);a=1,o=e[d]}return{c:n.subarray(0,i),n:t}},Hu=function(e,t){for(var n=0,i=0;i<t.length;++i)n+=e[i]*t[i];return n},f1=function(e,t,n){var i=n.length,o=jd(t+2);e[o]=i&255,e[o+1]=i>>8,e[o+2]=e[o]^255,e[o+3]=e[o+1]^255;for(var a=0;a<i;++a)e[o+a+4]=n[a];return(o+4+i)*8},A0=function(e,t,n,i,o,a,u,d,m,_,b){Ra(t,b++,n),++o[256];for(var w=Cf(o,15),S=w.t,C=w.l,F=Cf(a,15),R=F.t,$=F.l,j=M0(S),G=j.c,Y=j.n,ke=M0(R),Ce=ke.c,be=ke.n,ie=new Zs(19),re=0;re<G.length;++re)++ie[G[re]&31];for(var re=0;re<Ce.length;++re)++ie[Ce[re]&31];for(var Ie=Cf(ie,7),Je=Ie.t,V=Ie.l,X=19;X>4&&!Je[rd[X-1]];--X);var N=_+5<<3,te=Hu(o,yl)+Hu(a,mc)+u,W=Hu(o,S)+Hu(a,R)+u+14+3*X+Hu(ie,Je)+2*ie[16]+3*ie[17]+7*ie[18];if(m>=0&&N<=te&&N<=W)return f1(t,b,e.subarray(m,m+_));var H,me,U,I;if(Ra(t,b,1+(W<te)),b+=2,W<te){H=pa(S,C,0),me=S,U=pa(R,$,0),I=R;var Q=pa(Je,V,0);Ra(t,b,Y-257),Ra(t,b+5,be-1),Ra(t,b+10,X-4),b+=14;for(var re=0;re<X;++re)Ra(t,b+3*re,Je[rd[re]]);b+=3*X;for(var Re=[G,Ce],O=0;O<2;++O)for(var J=Re[O],re=0;re<J.length;++re){var se=J[re]&31;Ra(t,b,Q[se]),b+=Je[se],se>15&&(Ra(t,b,J[re]>>5&127),b+=J[re]>>12)}}else H=gx,me=yl,U=_x,I=mc;for(var re=0;re<d;++re){var de=i[re];if(de>255){var se=de>>18&31;Gu(t,b,H[se+257]),b+=me[se+257],se>7&&(Ra(t,b,de>>23&31),b+=Uh[se]);var _e=de&31;Gu(t,b,U[_e]),b+=I[_e],_e>3&&(Gu(t,b,de>>5&8191),b+=qh[_e])}else Gu(t,b,H[de]),b+=me[de]}return Gu(t,b,H[256]),b+me[256]},xx=new Fd([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),d1=new Ki(0),Lx=function(e,t,n,i,o,a){var u=a.z||e.length,d=new Ki(i+u+5*(1+Math.ceil(u/7e3))+o),m=d.subarray(i,d.length-o),_=a.l,b=(a.r||0)&7;if(t){b&&(m[0]=a.r>>3);for(var w=xx[t-1],S=w>>13,C=w&8191,F=(1<<n)-1,R=a.p||new Zs(32768),$=a.h||new Zs(F+1),j=Math.ceil(n/3),G=2*j,Y=function(De){return(e[De]^e[De+1]<<j^e[De+2]<<G)&F},ke=new Fd(25e3),Ce=new Zs(288),be=new Zs(32),ie=0,re=0,Ie=a.i||0,Je=0,V=a.w||0,X=0;Ie+2<u;++Ie){var N=Y(Ie),te=Ie&32767,W=$[N];if(R[te]=W,$[N]=te,V<=Ie){var H=u-Ie;if((ie>7e3||Je>24576)&&(H>423||!_)){b=A0(e,m,0,ke,Ce,be,re,Je,X,Ie-X,b),Je=ie=re=0,X=Ie;for(var me=0;me<286;++me)Ce[me]=0;for(var me=0;me<30;++me)be[me]=0}var U=2,I=0,Q=C,Re=te-W&32767;if(H>2&&N==Y(Ie-Re))for(var O=Math.min(S,H)-1,J=Math.min(32767,Ie),se=Math.min(258,H);Re<=J&&--Q&&te!=W;){if(e[Ie+U]==e[Ie+U-Re]){for(var de=0;de<se&&e[Ie+de]==e[Ie+de-Re];++de);if(de>U){if(U=de,I=Re,de>O)break;for(var _e=Math.min(Re,de-2),he=0,me=0;me<_e;++me){var we=Ie-Re+me&32767,Ee=R[we],Ve=we-Ee&32767;Ve>he&&(he=Ve,W=we)}}}te=W,W=R[te],Re+=te-W&32767}if(I){ke[Je++]=268435456|id[U]<<18|S0[I];var tt=id[U]&31,ne=S0[I]&31;re+=Uh[tt]+qh[ne],++Ce[257+tt],++be[ne],V=Ie+U,++ie}else ke[Je++]=e[Ie],++Ce[e[Ie]]}}for(Ie=Math.max(Ie,V);Ie<u;++Ie)ke[Je++]=e[Ie],++Ce[e[Ie]];b=A0(e,m,_,ke,Ce,be,re,Je,X,Ie-X,b),_||(a.r=b&7|m[b/8|0]<<3,b-=7,a.h=$,a.p=R,a.i=Ie,a.w=V)}else{for(var Ie=a.w||0;Ie<u+_;Ie+=65535){var fe=Ie+65535;fe>=u&&(m[b/8|0]=_,fe=u),b=f1(m,b+1,e.subarray(Ie,fe))}a.i=u}return h1(d,0,i+jd(b)+o)},p1=function(){var e=1,t=0;return{p:function(n){for(var i=e,o=t,a=n.length|0,u=0;u!=a;){for(var d=Math.min(u+2655,a);u<d;++u)o+=i+=n[u];i=(i&65535)+15*(i>>16),o=(o&65535)+15*(o>>16)}e=i,t=o},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},Cx=function(e,t,n,i,o){if(!o&&(o={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),u=new Ki(a.length+e.length);u.set(a),u.set(e,a.length),e=u,o.w=a.length}return Lx(e,t.level==null?6:t.level,t.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,i,o)},m1=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},kx=function(e,t){var n=t.level,i=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=i<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var o=p1();o.p(t.dictionary),m1(e,2,o.d())}},Px=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Fo(6,"invalid zlib data"),(e[1]>>5&1)==1&&Fo(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function ad(e,t){t||(t={});var n=p1();n.p(e);var i=Cx(e,t,t.dictionary?6:2,4);return kx(i,t),m1(i,i.length-4,n.d()),i}function Ex(e,t){return wx(e.subarray(Px(e),-4),{i:2},t,t)}var Sx=typeof TextDecoder<"u"&&new TextDecoder,Mx=0;try{Sx.decode(d1,{stream:!0}),Mx=1}catch{}var vn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function kf(){vn.console&&typeof vn.console.log=="function"&&vn.console.log.apply(vn.console,arguments)}var ar={log:kf,warn:function(e){vn.console&&(typeof vn.console.warn=="function"?vn.console.warn.apply(vn.console,arguments):kf.call(null,arguments))},error:function(e){vn.console&&(typeof vn.console.error=="function"?vn.console.error.apply(vn.console,arguments):kf(e))}};function Pf(e,t,n){var i=new XMLHttpRequest;i.open("GET",e),i.responseType="blob",i.onload=function(){Rl(i.response,t,n)},i.onerror=function(){ar.error("could not download file")},i.send()}function B0(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Ic(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var ic,ld,Rl=vn.saveAs||((typeof window>"u"?"undefined":or(window))!=="object"||window!==vn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var i=vn.URL||vn.webkitURL,o=document.createElement("a");t=t||e.name||"download",o.download=t,o.rel="noopener",typeof e=="string"?(o.href=e,o.origin!==location.origin?B0(o.href)?Pf(e,t,n):Ic(o,o.target="_blank"):Ic(o)):(o.href=i.createObjectURL(e),setTimeout(function(){i.revokeObjectURL(o.href)},4e4),setTimeout(function(){Ic(o)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(B0(e))Pf(e,t,n);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout(function(){Ic(i)})}else navigator.msSaveOrOpenBlob(function(o,a){return a===void 0?a={autoBom:!1}:or(a)!=="object"&&(ar.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}(e,n),t)}:function(e,t,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof e=="string")return Pf(e,t,n);var o=e.type==="application/octet-stream",a=/constructor/i.test(vn.HTMLElement)||vn.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||o&&a)&&(typeof FileReader>"u"?"undefined":or(FileReader))==="object"){var d=new FileReader;d.onloadend=function(){var b=d.result;b=u?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=b:location=b,i=null},d.readAsDataURL(e)}else{var m=vn.URL||vn.webkitURL,_=m.createObjectURL(e);i?i.location=_:location.href=_,i=null,setTimeout(function(){m.revokeObjectURL(_)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function g1(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(d){return[parseInt(d[1]),parseInt(d[2]),parseInt(d[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(d){return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(d){return[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]}}],i=0;i<n.length;i++){var o=n[i].re,a=n[i].process,u=o.exec(e);u&&(t=a(u),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var d=this.r.toString(16),m=this.g.toString(16),_=this.b.toString(16);return d.length==1&&(d="0"+d),m.length==1&&(m="0"+m),_.length==1&&(_="0"+_),"#"+d+m+_}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Ef(e,t){var n=e[0],i=e[1],o=e[2],a=e[3];n=qi(n,i,o,a,t[0],7,-680876936),a=qi(a,n,i,o,t[1],12,-389564586),o=qi(o,a,n,i,t[2],17,606105819),i=qi(i,o,a,n,t[3],22,-1044525330),n=qi(n,i,o,a,t[4],7,-176418897),a=qi(a,n,i,o,t[5],12,1200080426),o=qi(o,a,n,i,t[6],17,-1473231341),i=qi(i,o,a,n,t[7],22,-45705983),n=qi(n,i,o,a,t[8],7,1770035416),a=qi(a,n,i,o,t[9],12,-1958414417),o=qi(o,a,n,i,t[10],17,-42063),i=qi(i,o,a,n,t[11],22,-1990404162),n=qi(n,i,o,a,t[12],7,1804603682),a=qi(a,n,i,o,t[13],12,-40341101),o=qi(o,a,n,i,t[14],17,-1502002290),n=$i(n,i=qi(i,o,a,n,t[15],22,1236535329),o,a,t[1],5,-165796510),a=$i(a,n,i,o,t[6],9,-1069501632),o=$i(o,a,n,i,t[11],14,643717713),i=$i(i,o,a,n,t[0],20,-373897302),n=$i(n,i,o,a,t[5],5,-701558691),a=$i(a,n,i,o,t[10],9,38016083),o=$i(o,a,n,i,t[15],14,-660478335),i=$i(i,o,a,n,t[4],20,-405537848),n=$i(n,i,o,a,t[9],5,568446438),a=$i(a,n,i,o,t[14],9,-1019803690),o=$i(o,a,n,i,t[3],14,-187363961),i=$i(i,o,a,n,t[8],20,1163531501),n=$i(n,i,o,a,t[13],5,-1444681467),a=$i(a,n,i,o,t[2],9,-51403784),o=$i(o,a,n,i,t[7],14,1735328473),n=Vi(n,i=$i(i,o,a,n,t[12],20,-1926607734),o,a,t[5],4,-378558),a=Vi(a,n,i,o,t[8],11,-2022574463),o=Vi(o,a,n,i,t[11],16,1839030562),i=Vi(i,o,a,n,t[14],23,-35309556),n=Vi(n,i,o,a,t[1],4,-1530992060),a=Vi(a,n,i,o,t[4],11,1272893353),o=Vi(o,a,n,i,t[7],16,-155497632),i=Vi(i,o,a,n,t[10],23,-1094730640),n=Vi(n,i,o,a,t[13],4,681279174),a=Vi(a,n,i,o,t[0],11,-358537222),o=Vi(o,a,n,i,t[3],16,-722521979),i=Vi(i,o,a,n,t[6],23,76029189),n=Vi(n,i,o,a,t[9],4,-640364487),a=Vi(a,n,i,o,t[12],11,-421815835),o=Vi(o,a,n,i,t[15],16,530742520),n=Gi(n,i=Vi(i,o,a,n,t[2],23,-995338651),o,a,t[0],6,-198630844),a=Gi(a,n,i,o,t[7],10,1126891415),o=Gi(o,a,n,i,t[14],15,-1416354905),i=Gi(i,o,a,n,t[5],21,-57434055),n=Gi(n,i,o,a,t[12],6,1700485571),a=Gi(a,n,i,o,t[3],10,-1894986606),o=Gi(o,a,n,i,t[10],15,-1051523),i=Gi(i,o,a,n,t[1],21,-2054922799),n=Gi(n,i,o,a,t[8],6,1873313359),a=Gi(a,n,i,o,t[15],10,-30611744),o=Gi(o,a,n,i,t[6],15,-1560198380),i=Gi(i,o,a,n,t[13],21,1309151649),n=Gi(n,i,o,a,t[4],6,-145523070),a=Gi(a,n,i,o,t[11],10,-1120210379),o=Gi(o,a,n,i,t[2],15,718787259),i=Gi(i,o,a,n,t[9],21,-343485551),e[0]=ml(n,e[0]),e[1]=ml(i,e[1]),e[2]=ml(o,e[2]),e[3]=ml(a,e[3])}function $h(e,t,n,i,o,a){return t=ml(ml(t,e),ml(i,a)),ml(t<<o|t>>>32-o,n)}function qi(e,t,n,i,o,a,u){return $h(t&n|~t&i,e,t,o,a,u)}function $i(e,t,n,i,o,a,u){return $h(t&i|n&~i,e,t,o,a,u)}function Vi(e,t,n,i,o,a,u){return $h(t^n^i,e,t,o,a,u)}function Gi(e,t,n,i,o,a,u){return $h(n^(t|~i),e,t,o,a,u)}function v1(e){var t,n=e.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Ef(i,Ax(e.substring(t-64,t)));e=e.substring(t-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)o[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(Ef(i,o),t=0;t<16;t++)o[t]=0;return o[14]=8*n,Ef(i,o),i}function Ax(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}ic=vn.atob.bind(vn),ld=vn.btoa.bind(vn);var T0="0123456789abcdef".split("");function Bx(e){for(var t="",n=0;n<4;n++)t+=T0[e>>8*n+4&15]+T0[e>>8*n&15];return t}function Tx(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function ud(e){return v1(e).map(Tx).join("")}var Nx=function(e){for(var t=0;t<e.length;t++)e[t]=Bx(e[t]);return e.join("")}(v1("hello"))!="5d41402abc4b2a76b9719d911017c592";function ml(e,t){if(Nx){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function cd(e,t){var n,i,o,a;if(e!==n){for(var u=(o=e,a=1+(256/e.length>>0),new Array(a+1).join(o)),d=[],m=0;m<256;m++)d[m]=m;var _=0;for(m=0;m<256;m++){var b=d[m];_=(_+b+u.charCodeAt(m))%256,d[m]=d[_],d[_]=b}n=e,i=d}else d=i;var w=t.length,S=0,C=0,F="";for(m=0;m<w;m++)C=(C+(b=d[S=(S+1)%256]))%256,d[S]=d[C],d[C]=b,u=d[(d[S]+d[C])%256],F+=String.fromCharCode(t.charCodeAt(m)^u);return F}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var N0={print:4,modify:8,copy:16,"annot-forms":32};function pu(e,t,n,i){this.v=1,this.r=2;var o=192;e.forEach(function(d){if(N0.perm!==void 0)throw new Error("Invalid permission: "+d);o+=N0[d]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(t+this.padding).substr(0,32),u=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,u),this.P=-(1+(255^o)),this.encryptionKey=ud(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=cd(this.encryptionKey,this.padding)}function mu(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,i=0;i<n;i++){var o=e.charCodeAt(i);o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?t+="#"+("0"+o.toString(16)).slice(-2):t+=e[i]}return t}function D0(e){if(or(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,i,o){if(o=o||!1,typeof n!="string"||typeof i!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var a=Math.random().toString(35);return t[n][a]=[i,!!o],a},this.unsubscribe=function(n){for(var i in t)if(t[i][n])return delete t[i][n],Object.keys(t[i]).length===0&&delete t[i],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var i=Array.prototype.slice.call(arguments,1),o=[];for(var a in t[n]){var u=t[n][a];try{u[0].apply(e,i)}catch(d){vn.console&&ar.error("jsPDF PubSub Error",d.message,d)}u[1]&&o.push(a)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function gh(e){if(!(this instanceof gh))return new gh(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function _1(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Fl(e,t,n,i,o){if(!(this instanceof Fl))return new Fl(e,t,n,i,o);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,_1.call(this,i,o)}function gu(e,t,n,i,o){if(!(this instanceof gu))return new gu(e,t,n,i,o);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,_1.call(this,i,o)}function mn(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],o=arguments[2],a=arguments[3],u=[],d=1,m=16,_="S",b=null;or(e=e||{})==="object"&&(n=e.orientation,i=e.unit||i,o=e.format||o,a=e.compress||e.compressPdf||a,(b=e.encryption||null)!==null&&(b.userPassword=b.userPassword||"",b.ownerPassword=b.ownerPassword||"",b.userPermissions=b.userPermissions||[]),d=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(m=e.floatPrecision),_=e.defaultPathOperation||"S"),u=e.filters||(a===!0?["FlateEncode"]:u),i=i||"mm",n=(""+(n||"P")).toLowerCase();var w=e.putOnlyUsedFonts||!1,S={},C={internal:{},__private__:{}};C.__private__.PubSub=D0;var F="1.3",R=C.__private__.getPdfVersion=function(){return F};C.__private__.setPdfVersion=function(x){F=x};var $={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};C.__private__.getPageFormats=function(){return $};var j=C.__private__.getPageFormat=function(x){return $[x]};o=o||"a4";var G={COMPAT:"compat",ADVANCED:"advanced"},Y=G.COMPAT;function ke(){this.saveGraphicsState(),ce(new on(Dt,0,0,-Dt,0,so()*Dt).toString()+" cm"),this.setFontSize(this.getFontSize()/Dt),_="n",Y=G.ADVANCED}function Ce(){this.restoreGraphicsState(),_="S",Y=G.COMPAT}var be=C.__private__.combineFontStyleAndFontWeight=function(x,Z){if(x=="bold"&&Z=="normal"||x=="bold"&&Z==400||x=="normal"&&Z=="italic"||x=="bold"&&Z=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Z&&(x=Z==400||Z==="normal"?x==="italic"?"italic":"normal":Z!=700&&Z!=="bold"||x!=="normal"?(Z==700?"bold":Z)+""+x:"bold"),x};C.advancedAPI=function(x){var Z=Y===G.COMPAT;return Z&&ke.call(this),typeof x!="function"||(x(this),Z&&Ce.call(this)),this},C.compatAPI=function(x){var Z=Y===G.ADVANCED;return Z&&Ce.call(this),typeof x!="function"||(x(this),Z&&ke.call(this)),this},C.isAdvancedAPI=function(){return Y===G.ADVANCED};var ie,re=function(x){if(Y!==G.ADVANCED)throw new Error(x+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Ie=C.roundToPrecision=C.__private__.roundToPrecision=function(x,Z){var Ae=t||Z;if(isNaN(x)||isNaN(Ae))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return x.toFixed(Ae).replace(/0+$/,"")};ie=C.hpf=C.__private__.hpf=typeof m=="number"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return Ie(x,m)}:m==="smart"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return Ie(x,x>-1&&x<1?16:5)}:function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return Ie(x,16)};var Je=C.f2=C.__private__.f2=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f2");return Ie(x,2)},V=C.__private__.f3=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f3");return Ie(x,3)},X=C.scale=C.__private__.scale=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.scale");return Y===G.COMPAT?x*Dt:Y===G.ADVANCED?x:void 0},N=function(x){return Y===G.COMPAT?so()-x:Y===G.ADVANCED?x:void 0},te=function(x){return X(N(x))};C.__private__.setPrecision=C.setPrecision=function(x){typeof parseInt(x,10)=="number"&&(t=parseInt(x,10))};var W,H="00000000000000000000000000000000",me=C.__private__.getFileId=function(){return H},U=C.__private__.setFileId=function(x){return H=x!==void 0&&/^[a-fA-F0-9]{32}$/.test(x)?x.toUpperCase():H.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),b!==null&&(Cr=new pu(b.userPermissions,b.userPassword,b.ownerPassword,H)),H};C.setFileId=function(x){return U(x),this},C.getFileId=function(){return me()};var I=C.__private__.convertDateToPDFDate=function(x){var Z=x.getTimezoneOffset(),Ae=Z<0?"+":"-",qe=Math.floor(Math.abs(Z/60)),rt=Math.abs(Z%60),yt=[Ae,se(qe),"'",se(rt),"'"].join("");return["D:",x.getFullYear(),se(x.getMonth()+1),se(x.getDate()),se(x.getHours()),se(x.getMinutes()),se(x.getSeconds()),yt].join("")},Q=C.__private__.convertPDFDateToDate=function(x){var Z=parseInt(x.substr(2,4),10),Ae=parseInt(x.substr(6,2),10)-1,qe=parseInt(x.substr(8,2),10),rt=parseInt(x.substr(10,2),10),yt=parseInt(x.substr(12,2),10),Tt=parseInt(x.substr(14,2),10);return new Date(Z,Ae,qe,rt,yt,Tt,0)},Re=C.__private__.setCreationDate=function(x){var Z;if(x===void 0&&(x=new Date),x instanceof Date)Z=I(x);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(x))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Z=x}return W=Z},O=C.__private__.getCreationDate=function(x){var Z=W;return x==="jsDate"&&(Z=Q(W)),Z};C.setCreationDate=function(x){return Re(x),this},C.getCreationDate=function(x){return O(x)};var J,se=C.__private__.padd2=function(x){return("0"+parseInt(x)).slice(-2)},de=C.__private__.padd2Hex=function(x){return("00"+(x=x.toString())).substr(x.length)},_e=0,he=[],we=[],Ee=0,Ve=[],tt=[],ne=!1,fe=we,De=function(){_e=0,Ee=0,we=[],he=[],Ve=[],es=$t(),Ai=$t()};C.__private__.setCustomOutputDestination=function(x){ne=!0,fe=x};var Be=function(x){ne||(fe=x)};C.__private__.resetCustomOutputDestination=function(){ne=!1,fe=we};var ce=C.__private__.out=function(x){return x=x.toString(),Ee+=x.length+1,fe.push(x),fe},Ge=C.__private__.write=function(x){return ce(arguments.length===1?x.toString():Array.prototype.join.call(arguments," "))},it=C.__private__.getArrayBuffer=function(x){for(var Z=x.length,Ae=new ArrayBuffer(Z),qe=new Uint8Array(Ae);Z--;)qe[Z]=x.charCodeAt(Z);return Ae},Qe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];C.__private__.getStandardFonts=function(){return Qe};var lt=e.fontSize||16;C.__private__.setFontSize=C.setFontSize=function(x){return lt=Y===G.ADVANCED?x/Dt:x,this};var Oe,Pe=C.__private__.getFontSize=C.getFontSize=function(){return Y===G.COMPAT?lt:lt*Dt},ot=e.R2L||!1;C.__private__.setR2L=C.setR2L=function(x){return ot=x,this},C.__private__.getR2L=C.getR2L=function(){return ot};var _t,Ct=C.__private__.setZoomMode=function(x){var Z=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(x))Oe=x;else if(isNaN(x)){if(Z.indexOf(x)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+x+'" is not recognized.');Oe=x}else Oe=parseInt(x,10)};C.__private__.getZoomMode=function(){return Oe};var ze,Ot=C.__private__.setPageMode=function(x){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(x)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+x+'" is not recognized.');_t=x};C.__private__.getPageMode=function(){return _t};var Nt=C.__private__.setLayoutMode=function(x){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(x)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+x+'" is not recognized.');ze=x};C.__private__.getLayoutMode=function(){return ze},C.__private__.setDisplayMode=C.setDisplayMode=function(x,Z,Ae){return Ct(x),Nt(Z),Ot(Ae),this};var Ut={title:"",subject:"",author:"",keywords:"",creator:""};C.__private__.getDocumentProperty=function(x){if(Object.keys(Ut).indexOf(x)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ut[x]},C.__private__.getDocumentProperties=function(){return Ut},C.__private__.setDocumentProperties=C.setProperties=C.setDocumentProperties=function(x){for(var Z in Ut)Ut.hasOwnProperty(Z)&&x[Z]&&(Ut[Z]=x[Z]);return this},C.__private__.setDocumentProperty=function(x,Z){if(Object.keys(Ut).indexOf(x)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ut[x]=Z};var Ht,Dt,Pn,en,Yn,ln={},xn={},Xn=[],qt={},Ei={},In={},Lr={},Dr=null,qn=0,cn=[],Yt=new D0(C),Jt=e.hotfixes||[],ur={},Si={},Mi=[],on=function x(Z,Ae,qe,rt,yt,Tt){if(!(this instanceof x))return new x(Z,Ae,qe,rt,yt,Tt);isNaN(Z)&&(Z=1),isNaN(Ae)&&(Ae=0),isNaN(qe)&&(qe=0),isNaN(rt)&&(rt=1),isNaN(yt)&&(yt=0),isNaN(Tt)&&(Tt=0),this._matrix=[Z,Ae,qe,rt,yt,Tt]};Object.defineProperty(on.prototype,"sx",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(on.prototype,"shy",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(on.prototype,"shx",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(on.prototype,"sy",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(on.prototype,"tx",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(on.prototype,"ty",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(on.prototype,"a",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(on.prototype,"b",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(on.prototype,"c",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(on.prototype,"d",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(on.prototype,"e",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(on.prototype,"f",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(on.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(on.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(on.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(on.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),on.prototype.join=function(x){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ie).join(x)},on.prototype.multiply=function(x){var Z=x.sx*this.sx+x.shy*this.shx,Ae=x.sx*this.shy+x.shy*this.sy,qe=x.shx*this.sx+x.sy*this.shx,rt=x.shx*this.shy+x.sy*this.sy,yt=x.tx*this.sx+x.ty*this.shx+this.tx,Tt=x.tx*this.shy+x.ty*this.sy+this.ty;return new on(Z,Ae,qe,rt,yt,Tt)},on.prototype.decompose=function(){var x=this.sx,Z=this.shy,Ae=this.shx,qe=this.sy,rt=this.tx,yt=this.ty,Tt=Math.sqrt(x*x+Z*Z),Vt=(x/=Tt)*Ae+(Z/=Tt)*qe;Ae-=x*Vt,qe-=Z*Vt;var Zt=Math.sqrt(Ae*Ae+qe*qe);return Vt/=Zt,x*(qe/=Zt)<Z*(Ae/=Zt)&&(x=-x,Z=-Z,Vt=-Vt,Tt=-Tt),{scale:new on(Tt,0,0,Zt,0,0),translate:new on(1,0,0,1,rt,yt),rotate:new on(x,Z,-Z,x,0,0),skew:new on(1,0,Vt,1,0,0)}},on.prototype.toString=function(x){return this.join(" ")},on.prototype.inversed=function(){var x=this.sx,Z=this.shy,Ae=this.shx,qe=this.sy,rt=this.tx,yt=this.ty,Tt=1/(x*qe-Z*Ae),Vt=qe*Tt,Zt=-Z*Tt,nn=-Ae*Tt,pn=x*Tt;return new on(Vt,Zt,nn,pn,-Vt*rt-nn*yt,-Zt*rt-pn*yt)},on.prototype.applyToPoint=function(x){var Z=x.x*this.sx+x.y*this.shx+this.tx,Ae=x.x*this.shy+x.y*this.sy+this.ty;return new Ao(Z,Ae)},on.prototype.applyToRectangle=function(x){var Z=this.applyToPoint(x),Ae=this.applyToPoint(new Ao(x.x+x.w,x.y+x.h));return new Oi(Z.x,Z.y,Ae.x-Z.x,Ae.y-Z.y)},on.prototype.clone=function(){var x=this.sx,Z=this.shy,Ae=this.shx,qe=this.sy,rt=this.tx,yt=this.ty;return new on(x,Z,Ae,qe,rt,yt)},C.Matrix=on;var Qi=C.matrixMult=function(x,Z){return Z.multiply(x)},fs=new on(1,0,0,1,0,0);C.unitMatrix=C.identityMatrix=fs;var li=function(x,Z){if(!Ei[x]){var Ae=(Z instanceof Fl?"Sh":"P")+(Object.keys(qt).length+1).toString(10);Z.id=Ae,Ei[x]=Ae,qt[Ae]=Z,Yt.publish("addPattern",Z)}};C.ShadingPattern=Fl,C.TilingPattern=gu,C.addShadingPattern=function(x,Z){return re("addShadingPattern()"),li(x,Z),this},C.beginTilingPattern=function(x){re("beginTilingPattern()"),Pa(x.boundingBox[0],x.boundingBox[1],x.boundingBox[2]-x.boundingBox[0],x.boundingBox[3]-x.boundingBox[1],x.matrix)},C.endTilingPattern=function(x,Z){re("endTilingPattern()"),Z.stream=tt[J].join(`
`),li(x,Z),Yt.publish("endTilingPattern",Z),Mi.pop().restore()};var $n=C.__private__.newObject=function(){var x=$t();return ui(x,!0),x},$t=C.__private__.newObjectDeferred=function(){return _e++,he[_e]=function(){return Ee},_e},ui=function(x,Z){return Z=typeof Z=="boolean"&&Z,he[x]=Ee,Z&&ce(x+" 0 obj"),x},yo=C.__private__.newAdditionalObject=function(){var x={objId:$t(),content:""};return Ve.push(x),x},es=$t(),Ai=$t(),yi=C.__private__.decodeColorString=function(x){var Z=x.split(" ");if(Z.length!==2||Z[1]!=="g"&&Z[1]!=="G")Z.length===5&&(Z[4]==="k"||Z[4]==="K")&&(Z=[(1-Z[0])*(1-Z[3]),(1-Z[1])*(1-Z[3]),(1-Z[2])*(1-Z[3]),"r"]);else{var Ae=parseFloat(Z[0]);Z=[Ae,Ae,Ae,"r"]}for(var qe="#",rt=0;rt<3;rt++)qe+=("0"+Math.floor(255*parseFloat(Z[rt])).toString(16)).slice(-2);return qe},Bi=C.__private__.encodeColorString=function(x){var Z;typeof x=="string"&&(x={ch1:x});var Ae=x.ch1,qe=x.ch2,rt=x.ch3,yt=x.ch4,Tt=x.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ae=="string"&&Ae.charAt(0)!=="#"){var Vt=new g1(Ae);if(Vt.ok)Ae=Vt.toHex();else if(!/^\d*\.?\d*$/.test(Ae))throw new Error('Invalid color "'+Ae+'" passed to jsPDF.encodeColorString.')}if(typeof Ae=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ae)&&(Ae="#"+Ae[1]+Ae[1]+Ae[2]+Ae[2]+Ae[3]+Ae[3]),typeof Ae=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ae)){var Zt=parseInt(Ae.substr(1),16);Ae=Zt>>16&255,qe=Zt>>8&255,rt=255&Zt}if(qe===void 0||yt===void 0&&Ae===qe&&qe===rt)if(typeof Ae=="string")Z=Ae+" "+Tt[0];else switch(x.precision){case 2:Z=Je(Ae/255)+" "+Tt[0];break;case 3:default:Z=V(Ae/255)+" "+Tt[0]}else if(yt===void 0||or(yt)==="object"){if(yt&&!isNaN(yt.a)&&yt.a===0)return Z=["1.","1.","1.",Tt[1]].join(" ");if(typeof Ae=="string")Z=[Ae,qe,rt,Tt[1]].join(" ");else switch(x.precision){case 2:Z=[Je(Ae/255),Je(qe/255),Je(rt/255),Tt[1]].join(" ");break;default:case 3:Z=[V(Ae/255),V(qe/255),V(rt/255),Tt[1]].join(" ")}}else if(typeof Ae=="string")Z=[Ae,qe,rt,yt,Tt[2]].join(" ");else switch(x.precision){case 2:Z=[Je(Ae),Je(qe),Je(rt),Je(yt),Tt[2]].join(" ");break;case 3:default:Z=[V(Ae),V(qe),V(rt),V(yt),Tt[2]].join(" ")}return Z},Qr=C.__private__.getFilters=function(){return u},bi=C.__private__.putStream=function(x){var Z=(x=x||{}).data||"",Ae=x.filters||Qr(),qe=x.alreadyAppliedFilters||[],rt=x.addLength1||!1,yt=Z.length,Tt=x.objectId,Vt=function(Pr){return Pr};if(b!==null&&Tt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");b!==null&&(Vt=Cr.encryptor(Tt,0));var Zt={};Ae===!0&&(Ae=["FlateEncode"]);var nn=x.additionalKeyValues||[],pn=(Zt=mn.API.processDataByFilters!==void 0?mn.API.processDataByFilters(Z,Ae):{data:Z,reverseChain:[]}).reverseChain+(Array.isArray(qe)?qe.join(" "):qe.toString());if(Zt.data.length!==0&&(nn.push({key:"Length",value:Zt.data.length}),rt===!0&&nn.push({key:"Length1",value:yt})),pn.length!=0)if(pn.split("/").length-1==1)nn.push({key:"Filter",value:pn});else{nn.push({key:"Filter",value:"["+pn+"]"});for(var Bn=0;Bn<nn.length;Bn+=1)if(nn[Bn].key==="DecodeParms"){for(var sr=[],Fn=0;Fn<Zt.reverseChain.split("/").length-1;Fn+=1)sr.push("null");sr.push(nn[Bn].value),nn[Bn].value="["+sr.join(" ")+"]"}}ce("<<");for(var Vn=0;Vn<nn.length;Vn++)ce("/"+nn[Vn].key+" "+nn[Vn].value);ce(">>"),Zt.data.length!==0&&(ce("stream"),ce(Vt(Zt.data)),ce("endstream"))},ds=C.__private__.putPage=function(x){var Z=x.number,Ae=x.data,qe=x.objId,rt=x.contentsObjId;ui(qe,!0),ce("<</Type /Page"),ce("/Parent "+x.rootDictionaryObjId+" 0 R"),ce("/Resources "+x.resourceDictionaryObjId+" 0 R"),ce("/MediaBox ["+parseFloat(ie(x.mediaBox.bottomLeftX))+" "+parseFloat(ie(x.mediaBox.bottomLeftY))+" "+ie(x.mediaBox.topRightX)+" "+ie(x.mediaBox.topRightY)+"]"),x.cropBox!==null&&ce("/CropBox ["+ie(x.cropBox.bottomLeftX)+" "+ie(x.cropBox.bottomLeftY)+" "+ie(x.cropBox.topRightX)+" "+ie(x.cropBox.topRightY)+"]"),x.bleedBox!==null&&ce("/BleedBox ["+ie(x.bleedBox.bottomLeftX)+" "+ie(x.bleedBox.bottomLeftY)+" "+ie(x.bleedBox.topRightX)+" "+ie(x.bleedBox.topRightY)+"]"),x.trimBox!==null&&ce("/TrimBox ["+ie(x.trimBox.bottomLeftX)+" "+ie(x.trimBox.bottomLeftY)+" "+ie(x.trimBox.topRightX)+" "+ie(x.trimBox.topRightY)+"]"),x.artBox!==null&&ce("/ArtBox ["+ie(x.artBox.bottomLeftX)+" "+ie(x.artBox.bottomLeftY)+" "+ie(x.artBox.topRightX)+" "+ie(x.artBox.topRightY)+"]"),typeof x.userUnit=="number"&&x.userUnit!==1&&ce("/UserUnit "+x.userUnit),Yt.publish("putPage",{objId:qe,pageContext:cn[Z],pageNumber:Z,page:Ae}),ce("/Contents "+rt+" 0 R"),ce(">>"),ce("endobj");var yt=Ae.join(`
`);return Y===G.ADVANCED&&(yt+=`
Q`),ui(rt,!0),bi({data:yt,filters:Qr(),objectId:rt}),ce("endobj"),qe},bo=C.__private__.putPages=function(){var x,Z,Ae=[];for(x=1;x<=qn;x++)cn[x].objId=$t(),cn[x].contentsObjId=$t();for(x=1;x<=qn;x++)Ae.push(ds({number:x,data:tt[x],objId:cn[x].objId,contentsObjId:cn[x].contentsObjId,mediaBox:cn[x].mediaBox,cropBox:cn[x].cropBox,bleedBox:cn[x].bleedBox,trimBox:cn[x].trimBox,artBox:cn[x].artBox,userUnit:cn[x].userUnit,rootDictionaryObjId:es,resourceDictionaryObjId:Ai}));ui(es,!0),ce("<</Type /Pages");var qe="/Kids [";for(Z=0;Z<qn;Z++)qe+=Ae[Z]+" 0 R ";ce(qe+"]"),ce("/Count "+qn),ce(">>"),ce("endobj"),Yt.publish("postPutPages")},Go=function(x){Yt.publish("putFont",{font:x,out:ce,newObject:$n,putStream:bi}),x.isAlreadyPutted!==!0&&(x.objectNumber=$n(),ce("<<"),ce("/Type /Font"),ce("/BaseFont /"+mu(x.postScriptName)),ce("/Subtype /Type1"),typeof x.encoding=="string"&&ce("/Encoding /"+x.encoding),ce("/FirstChar 32"),ce("/LastChar 255"),ce(">>"),ce("endobj"))},Ho=function(){for(var x in ln)ln.hasOwnProperty(x)&&(w===!1||w===!0&&S.hasOwnProperty(x))&&Go(ln[x])},Bs=function(x){x.objectNumber=$n();var Z=[];Z.push({key:"Type",value:"/XObject"}),Z.push({key:"Subtype",value:"/Form"}),Z.push({key:"BBox",value:"["+[ie(x.x),ie(x.y),ie(x.x+x.width),ie(x.y+x.height)].join(" ")+"]"}),Z.push({key:"Matrix",value:"["+x.matrix.toString()+"]"});var Ae=x.pages[1].join(`
`);bi({data:Ae,additionalKeyValues:Z,objectId:x.objectNumber}),ce("endobj")},Js=function(){for(var x in ur)ur.hasOwnProperty(x)&&Bs(ur[x])},wo=function(x,Z){var Ae,qe=[],rt=1/(Z-1);for(Ae=0;Ae<1;Ae+=rt)qe.push(Ae);if(qe.push(1),x[0].offset!=0){var yt={offset:0,color:x[0].color};x.unshift(yt)}if(x[x.length-1].offset!=1){var Tt={offset:1,color:x[x.length-1].color};x.push(Tt)}for(var Vt="",Zt=0,nn=0;nn<qe.length;nn++){for(Ae=qe[nn];Ae>x[Zt+1].offset;)Zt++;var pn=x[Zt].offset,Bn=(Ae-pn)/(x[Zt+1].offset-pn),sr=x[Zt].color,Fn=x[Zt+1].color;Vt+=de(Math.round((1-Bn)*sr[0]+Bn*Fn[0]).toString(16))+de(Math.round((1-Bn)*sr[1]+Bn*Fn[1]).toString(16))+de(Math.round((1-Bn)*sr[2]+Bn*Fn[2]).toString(16))}return Vt.trim()},Ll=function(x,Z){Z||(Z=21);var Ae=$n(),qe=wo(x.colors,Z),rt=[];rt.push({key:"FunctionType",value:"0"}),rt.push({key:"Domain",value:"[0.0 1.0]"}),rt.push({key:"Size",value:"["+Z+"]"}),rt.push({key:"BitsPerSample",value:"8"}),rt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),rt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),bi({data:qe,additionalKeyValues:rt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ae}),ce("endobj"),x.objectNumber=$n(),ce("<< /ShadingType "+x.type),ce("/ColorSpace /DeviceRGB");var yt="/Coords ["+ie(parseFloat(x.coords[0]))+" "+ie(parseFloat(x.coords[1]))+" ";x.type===2?yt+=ie(parseFloat(x.coords[2]))+" "+ie(parseFloat(x.coords[3])):yt+=ie(parseFloat(x.coords[2]))+" "+ie(parseFloat(x.coords[3]))+" "+ie(parseFloat(x.coords[4]))+" "+ie(parseFloat(x.coords[5])),ce(yt+="]"),x.matrix&&ce("/Matrix ["+x.matrix.toString()+"]"),ce("/Function "+Ae+" 0 R"),ce("/Extend [true true]"),ce(">>"),ce("endobj")},Cl=function(x,Z){var Ae=$t(),qe=$n();Z.push({resourcesOid:Ae,objectOid:qe}),x.objectNumber=qe;var rt=[];rt.push({key:"Type",value:"/Pattern"}),rt.push({key:"PatternType",value:"1"}),rt.push({key:"PaintType",value:"1"}),rt.push({key:"TilingType",value:"1"}),rt.push({key:"BBox",value:"["+x.boundingBox.map(ie).join(" ")+"]"}),rt.push({key:"XStep",value:ie(x.xStep)}),rt.push({key:"YStep",value:ie(x.yStep)}),rt.push({key:"Resources",value:Ae+" 0 R"}),x.matrix&&rt.push({key:"Matrix",value:"["+x.matrix.toString()+"]"}),bi({data:x.stream,additionalKeyValues:rt,objectId:x.objectNumber}),ce("endobj")},Wo=function(x){var Z;for(Z in qt)qt.hasOwnProperty(Z)&&(qt[Z]instanceof Fl?Ll(qt[Z]):qt[Z]instanceof gu&&Cl(qt[Z],x))},Ha=function(x){for(var Z in x.objectNumber=$n(),ce("<<"),x)switch(Z){case"opacity":ce("/ca "+Je(x[Z]));break;case"stroke-opacity":ce("/CA "+Je(x[Z]))}ce(">>"),ce("endobj")},kl=function(){var x;for(x in In)In.hasOwnProperty(x)&&Ha(In[x])},xo=function(){for(var x in ce("/XObject <<"),ur)ur.hasOwnProperty(x)&&ur[x].objectNumber>=0&&ce("/"+x+" "+ur[x].objectNumber+" 0 R");Yt.publish("putXobjectDict"),ce(">>")},Lo=function(){Cr.oid=$n(),ce("<<"),ce("/Filter /Standard"),ce("/V "+Cr.v),ce("/R "+Cr.r),ce("/U <"+Cr.toHexString(Cr.U)+">"),ce("/O <"+Cr.toHexString(Cr.O)+">"),ce("/P "+Cr.P),ce(">>"),ce("endobj")},_a=function(){for(var x in ce("/Font <<"),ln)ln.hasOwnProperty(x)&&(w===!1||w===!0&&S.hasOwnProperty(x))&&ce("/"+x+" "+ln[x].objectNumber+" 0 R");ce(">>")},Wa=function(){if(Object.keys(qt).length>0){for(var x in ce("/Shading <<"),qt)qt.hasOwnProperty(x)&&qt[x]instanceof Fl&&qt[x].objectNumber>=0&&ce("/"+x+" "+qt[x].objectNumber+" 0 R");Yt.publish("putShadingPatternDict"),ce(">>")}},wi=function(x){if(Object.keys(qt).length>0){for(var Z in ce("/Pattern <<"),qt)qt.hasOwnProperty(Z)&&qt[Z]instanceof C.TilingPattern&&qt[Z].objectNumber>=0&&qt[Z].objectNumber<x&&ce("/"+Z+" "+qt[Z].objectNumber+" 0 R");Yt.publish("putTilingPatternDict"),ce(">>")}},Rn=function(){if(Object.keys(In).length>0){var x;for(x in ce("/ExtGState <<"),In)In.hasOwnProperty(x)&&In[x].objectNumber>=0&&ce("/"+x+" "+In[x].objectNumber+" 0 R");Yt.publish("putGStateDict"),ce(">>")}},_n=function(x){ui(x.resourcesOid,!0),ce("<<"),ce("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),_a(),Wa(),wi(x.objectOid),Rn(),xo(),ce(">>"),ce("endobj")},Ys=function(){var x=[];Ho(),kl(),Js(),Wo(x),Yt.publish("putResources"),x.forEach(_n),_n({resourcesOid:Ai,objectOid:Number.MAX_SAFE_INTEGER}),Yt.publish("postPutResources")},Ts=function(){Yt.publish("putAdditionalObjects");for(var x=0;x<Ve.length;x++){var Z=Ve[x];ui(Z.objId,!0),ce(Z.content),ce("endobj")}Yt.publish("postPutAdditionalObjects")},ps=function(x){xn[x.fontName]=xn[x.fontName]||{},xn[x.fontName][x.fontStyle]=x.id},Co=function(x,Z,Ae,qe,rt){var yt={id:"F"+(Object.keys(ln).length+1).toString(10),postScriptName:x,fontName:Z,fontStyle:Ae,encoding:qe,isStandardFont:rt||!1,metadata:{}};return Yt.publish("addFont",{font:yt,instance:this}),ln[yt.id]=yt,ps(yt),yt.id},bn=function(x){for(var Z=0,Ae=Qe.length;Z<Ae;Z++){var qe=Co.call(this,x[Z][0],x[Z][1],x[Z][2],Qe[Z][3],!0);w===!1&&(S[qe]=!0);var rt=x[Z][0].split("-");ps({id:qe,fontName:rt[0],fontStyle:rt[1]||""})}Yt.publish("addFonts",{fonts:ln,dictionary:xn})},zn=function(x){return x.foo=function(){try{return x.apply(this,arguments)}catch(qe){var Z=qe.stack||"";~Z.indexOf(" at ")&&(Z=Z.split(" at ")[1]);var Ae="Error in function "+Z.split(`
`)[0].split("<")[0]+": "+qe.message;if(!vn.console)throw new Error(Ae);vn.console.error(Ae,qe),vn.alert&&alert(Ae)}},x.foo.bar=x,x.foo},Xs=function(x,Z){var Ae,qe,rt,yt,Tt,Vt,Zt,nn,pn;if(rt=(Z=Z||{}).sourceEncoding||"Unicode",Tt=Z.outputEncoding,(Z.autoencode||Tt)&&ln[Ht].metadata&&ln[Ht].metadata[rt]&&ln[Ht].metadata[rt].encoding&&(yt=ln[Ht].metadata[rt].encoding,!Tt&&ln[Ht].encoding&&(Tt=ln[Ht].encoding),!Tt&&yt.codePages&&(Tt=yt.codePages[0]),typeof Tt=="string"&&(Tt=yt[Tt]),Tt)){for(Zt=!1,Vt=[],Ae=0,qe=x.length;Ae<qe;Ae++)(nn=Tt[x.charCodeAt(Ae)])?Vt.push(String.fromCharCode(nn)):Vt.push(x[Ae]),Vt[Ae].charCodeAt(0)>>8&&(Zt=!0);x=Vt.join("")}for(Ae=x.length;Zt===void 0&&Ae!==0;)x.charCodeAt(Ae-1)>>8&&(Zt=!0),Ae--;if(!Zt)return x;for(Vt=Z.noBOM?[]:[254,255],Ae=0,qe=x.length;Ae<qe;Ae++){if((pn=(nn=x.charCodeAt(Ae))>>8)>>8)throw new Error("Character at position "+Ae+" of string '"+x+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Vt.push(pn),Vt.push(nn-(pn<<8))}return String.fromCharCode.apply(void 0,Vt)},Or=C.__private__.pdfEscape=C.pdfEscape=function(x,Z){return Xs(x,Z).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},$r=C.__private__.beginPage=function(x){tt[++qn]=[],cn[qn]={objId:0,contentsObjId:0,userUnit:Number(d),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(x[0]),topRightY:Number(x[1])}},ms(qn),Be(tt[J])},Za=function(x,Z){var Ae,qe,rt;switch(n=Z||n,typeof x=="string"&&(Ae=j(x.toLowerCase()),Array.isArray(Ae)&&(qe=Ae[0],rt=Ae[1])),Array.isArray(x)&&(qe=x[0]*Dt,rt=x[1]*Dt),isNaN(qe)&&(qe=o[0],rt=o[1]),(qe>14400||rt>14400)&&(ar.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),qe=Math.min(14400,qe),rt=Math.min(14400,rt)),o=[qe,rt],n.substr(0,1)){case"l":rt>qe&&(o=[rt,qe]);break;case"p":qe>rt&&(o=[rt,qe])}$r(o),So(Xo),ce(ci),ta!==0&&ce(ta+" J"),kr!==0&&ce(kr+" j"),Yt.publish("addPage",{pageNumber:qn})},Zo=function(x){x>0&&x<=qn&&(tt.splice(x,1),cn.splice(x,1),qn--,J>qn&&(J=qn),this.setPage(J))},ms=function(x){x>0&&x<=qn&&(J=x)},cr=C.__private__.getNumberOfPages=C.getNumberOfPages=function(){return tt.length-1},gs=function(x,Z,Ae){var qe,rt=void 0;return Ae=Ae||{},x=x!==void 0?x:ln[Ht].fontName,Z=Z!==void 0?Z:ln[Ht].fontStyle,qe=x.toLowerCase(),xn[qe]!==void 0&&xn[qe][Z]!==void 0?rt=xn[qe][Z]:xn[x]!==void 0&&xn[x][Z]!==void 0?rt=xn[x][Z]:Ae.disableWarning===!1&&ar.warn("Unable to look up font label for font '"+x+"', '"+Z+"'. Refer to getFontList() for available fonts."),rt||Ae.noFallback||(rt=xn.times[Z])==null&&(rt=xn.times.normal),rt},ko=C.__private__.putInfo=function(){var x=$n(),Z=function(qe){return qe};for(var Ae in b!==null&&(Z=Cr.encryptor(x,0)),ce("<<"),ce("/Producer ("+Or(Z("jsPDF "+mn.version))+")"),Ut)Ut.hasOwnProperty(Ae)&&Ut[Ae]&&ce("/"+Ae.substr(0,1).toUpperCase()+Ae.substr(1)+" ("+Or(Z(Ut[Ae]))+")");ce("/CreationDate ("+Or(Z(W))+")"),ce(">>"),ce("endobj")},Ns=C.__private__.putCatalog=function(x){var Z=(x=x||{}).rootDictionaryObjId||es;switch($n(),ce("<<"),ce("/Type /Catalog"),ce("/Pages "+Z+" 0 R"),Oe||(Oe="fullwidth"),Oe){case"fullwidth":ce("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ce("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ce("/OpenAction [3 0 R /Fit]");break;case"original":ce("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ae=""+Oe;Ae.substr(Ae.length-1)==="%"&&(Oe=parseInt(Oe)/100),typeof Oe=="number"&&ce("/OpenAction [3 0 R /XYZ null null "+Je(Oe)+"]")}switch(ze||(ze="continuous"),ze){case"continuous":ce("/PageLayout /OneColumn");break;case"single":ce("/PageLayout /SinglePage");break;case"two":case"twoleft":ce("/PageLayout /TwoColumnLeft");break;case"tworight":ce("/PageLayout /TwoColumnRight")}_t&&ce("/PageMode /"+_t),Yt.publish("putCatalog"),ce(">>"),ce("endobj")},ya=C.__private__.putTrailer=function(){ce("trailer"),ce("<<"),ce("/Size "+(_e+1)),ce("/Root "+_e+" 0 R"),ce("/Info "+(_e-1)+" 0 R"),b!==null&&ce("/Encrypt "+Cr.oid+" 0 R"),ce("/ID [ <"+H+"> <"+H+"> ]"),ce(">>")},Qs=C.__private__.putHeader=function(){ce("%PDF-"+F),ce("%")},ba=C.__private__.putXRef=function(){var x="0000000000";ce("xref"),ce("0 "+(_e+1)),ce("0000000000 65535 f ");for(var Z=1;Z<=_e;Z++)typeof he[Z]=="function"?ce((x+he[Z]()).slice(-10)+" 00000 n "):he[Z]!==void 0?ce((x+he[Z]).slice(-10)+" 00000 n "):ce("0000000000 00000 n ")},ts=C.__private__.buildDocument=function(){De(),Be(we),Yt.publish("buildDocument"),Qs(),bo(),Ts(),Ys(),b!==null&&Lo(),ko(),Ns();var x=Ee;return ba(),ya(),ce("startxref"),ce(""+x),ce("%%EOF"),Be(tt[J]),we.join(`
`)},Ds=C.__private__.getBlob=function(x){return new Blob([it(x)],{type:"application/pdf"})},eo=C.output=C.__private__.output=zn(function(x,Z){switch(typeof(Z=Z||{})=="string"?Z={filename:Z}:Z.filename=Z.filename||"generated.pdf",x){case void 0:return ts();case"save":C.save(Z.filename);break;case"arraybuffer":return it(ts());case"blob":return Ds(ts());case"bloburi":case"bloburl":if(vn.URL!==void 0&&typeof vn.URL.createObjectURL=="function")return vn.URL&&vn.URL.createObjectURL(Ds(ts()))||void 0;ar.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ae="",qe=ts();try{Ae=ld(qe)}catch{Ae=ld(unescape(encodeURIComponent(qe)))}return"data:application/pdf;filename="+Z.filename+";base64,"+Ae;case"pdfobjectnewwindow":if(Object.prototype.toString.call(vn)==="[object Window]"){var rt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",yt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Z.pdfObjectUrl&&(rt=Z.pdfObjectUrl,yt="");var Tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+rt+'"'+yt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Z)+");<\/script></body></html>",Vt=vn.open();return Vt!==null&&Vt.document.write(Tt),Vt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(vn)==="[object Window]"){var Zt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Z.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Z.filename+'" width="500px" height="400px" /></body></html>',nn=vn.open();if(nn!==null){nn.document.write(Zt);var pn=this;nn.document.documentElement.querySelector("#pdfViewer").onload=function(){nn.document.title=Z.filename,nn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(pn.output("bloburl"))}}return nn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(vn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Bn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Z)+'"></iframe></body></html>',sr=vn.open();if(sr!==null&&(sr.document.write(Bn),sr.document.title=Z.filename),sr||typeof safari>"u")return sr;break;case"datauri":case"dataurl":return vn.document.location.href=this.output("datauristring",Z);default:return null}}),Ko=function(x){return Array.isArray(Jt)===!0&&Jt.indexOf(x)>-1};switch(i){case"pt":Dt=1;break;case"mm":Dt=72/25.4;break;case"cm":Dt=72/2.54;break;case"in":Dt=72;break;case"px":Dt=Ko("px_scaling")==1?.75:96/72;break;case"pc":case"em":Dt=12;break;case"ex":Dt=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);Dt=i}var Cr=null;Re(),U();var Ka=function(x){return b!==null?Cr.encryptor(x,0):function(Z){return Z}},Jo=C.__private__.getPageInfo=C.getPageInfo=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:cn[x].objId,pageNumber:x,pageContext:cn[x]}},gn=C.__private__.getPageInfoByObjId=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Z in cn)if(cn[Z].objId===x)break;return Jo(Z)},yn=C.__private__.getCurrentPageInfo=C.getCurrentPageInfo=function(){return{objId:cn[J].objId,pageNumber:J,pageContext:cn[J]}};C.addPage=function(){return Za.apply(this,arguments),this},C.setPage=function(){return ms.apply(this,arguments),Be.call(this,tt[J]),this},C.insertPage=function(x){return this.addPage(),this.movePage(J,x),this},C.movePage=function(x,Z){var Ae,qe;if(x>Z){Ae=tt[x],qe=cn[x];for(var rt=x;rt>Z;rt--)tt[rt]=tt[rt-1],cn[rt]=cn[rt-1];tt[Z]=Ae,cn[Z]=qe,this.setPage(Z)}else if(x<Z){Ae=tt[x],qe=cn[x];for(var yt=x;yt<Z;yt++)tt[yt]=tt[yt+1],cn[yt]=cn[yt+1];tt[Z]=Ae,cn[Z]=qe,this.setPage(Z)}return this},C.deletePage=function(){return Zo.apply(this,arguments),this},C.__private__.text=C.text=function(x,Z,Ae,qe,rt){var yt,Tt,Vt,Zt,nn,pn,Bn,sr,Fn,Vn=(qe=qe||{}).scope||this;if(typeof x=="number"&&typeof Z=="number"&&(typeof Ae=="string"||Array.isArray(Ae))){var Pr=Ae;Ae=Z,Z=x,x=Pr}if(arguments[3]instanceof on?(re("The transform parameter of text() with a Matrix value"),Fn=rt):(Vt=arguments[4],Zt=arguments[5],or(Bn=arguments[3])==="object"&&Bn!==null||(typeof Vt=="string"&&(Zt=Vt,Vt=null),typeof Bn=="string"&&(Zt=Bn,Bn=null),typeof Bn=="number"&&(Vt=Bn,Bn=null),qe={flags:Bn,angle:Vt,align:Zt})),isNaN(Z)||isNaN(Ae)||x==null)throw new Error("Invalid arguments passed to jsPDF.text");if(x.length===0)return Vn;var wr="",Li=!1,Qn=typeof qe.lineHeightFactor=="number"?qe.lineHeightFactor:Eo,ti=Vn.internal.scaleFactor;function Xa(Zn){return Zn=Zn.split("	").join(Array(qe.TabLen||9).join(" ")),Or(Zn,Bn)}function ni(Zn){for(var Gn,vr=Zn.concat(),er=[],is=vr.length;is--;)typeof(Gn=vr.shift())=="string"?er.push(Gn):Array.isArray(Zn)&&(Gn.length===1||Gn[1]===void 0&&Gn[2]===void 0)?er.push(Gn[0]):er.push([Gn[0],Gn[1],Gn[2]]);return er}function Sa(Zn,Gn){var vr;if(typeof Zn=="string")vr=Gn(Zn)[0];else if(Array.isArray(Zn)){for(var er,is,uo=Zn.concat(),xs=[],el=uo.length;el--;)typeof(er=uo.shift())=="string"?xs.push(Gn(er)[0]):Array.isArray(er)&&typeof er[0]=="string"&&(is=Gn(er[0],er[1],er[2]),xs.push([is[0],is[1],is[2]]));vr=xs}return vr}var ns=!1,Ma=!0;if(typeof x=="string")ns=!0;else if(Array.isArray(x)){var Is=x.concat();Tt=[];for(var Fs,xr=Is.length;xr--;)(typeof(Fs=Is.shift())!="string"||Array.isArray(Fs)&&typeof Fs[0]!="string")&&(Ma=!1);ns=Ma}if(ns===!1)throw new Error('Type of text must be string or Array. "'+x+'" is not recognized.');typeof x=="string"&&(x=x.match(/[\r?\n]/)?x.split(/\r\n|\r|\n/g):[x]);var ia=lt/Vn.internal.scaleFactor,hi=ia*(Qn-1);switch(qe.baseline){case"bottom":Ae-=hi;break;case"top":Ae+=ia-hi;break;case"hanging":Ae+=ia-2*hi;break;case"middle":Ae+=ia/2-hi}if((pn=qe.maxWidth||0)>0&&(typeof x=="string"?x=Vn.splitTextToSize(x,pn):Object.prototype.toString.call(x)==="[object Array]"&&(x=x.reduce(function(Zn,Gn){return Zn.concat(Vn.splitTextToSize(Gn,pn))},[]))),yt={text:x,x:Z,y:Ae,options:qe,mutex:{pdfEscape:Or,activeFontKey:Ht,fonts:ln,activeFontSize:lt}},Yt.publish("preProcessText",yt),x=yt.text,Vt=(qe=yt.options).angle,!(Fn instanceof on)&&Vt&&typeof Vt=="number"){Vt*=Math.PI/180,qe.rotationDirection===0&&(Vt=-Vt),Y===G.ADVANCED&&(Vt=-Vt);var ri=Math.cos(Vt),sa=Math.sin(Vt);Fn=new on(ri,sa,-sa,ri,0,0)}else Vt&&Vt instanceof on&&(Fn=Vt);Y!==G.ADVANCED||Fn||(Fn=fs),(nn=qe.charSpace||ea)!==void 0&&(wr+=ie(X(nn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(sr=qe.horizontalScale)!==void 0&&(wr+=ie(100*sr)+` Tz
`),qe.lang;var Vr=-1,js=qe.renderingMode!==void 0?qe.renderingMode:qe.stroke,Ci=Vn.internal.getCurrentPageInfo().pageContext;switch(js){case 0:case!1:case"fill":Vr=0;break;case 1:case!0:case"stroke":Vr=1;break;case 2:case"fillThenStroke":Vr=2;break;case 3:case"invisible":Vr=3;break;case 4:case"fillAndAddForClipping":Vr=4;break;case 5:case"strokeAndAddPathForClipping":Vr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Vr=6;break;case 7:case"addToPathForClipping":Vr=7}var Qa=Ci.usedRenderingMode!==void 0?Ci.usedRenderingMode:-1;Vr!==-1?wr+=Vr+` Tr
`:Qa!==-1&&(wr+=`0 Tr
`),Vr!==-1&&(Ci.usedRenderingMode=Vr),Zt=qe.align||"left";var Er,_s=lt*Qn,Ri=Vn.internal.pageSize.getWidth(),To=ln[Ht];nn=qe.charSpace||ea,pn=qe.maxWidth||0,Bn=Object.assign({autoencode:!0,noBOM:!0},qe.flags);var zs=[],ys=function(Zn){return Vn.getStringUnitWidth(Zn,{font:To,charSpace:nn,fontSize:lt,doKerning:!1})*lt/ti};if(Object.prototype.toString.call(x)==="[object Array]"){var Rr;Tt=ni(x),Zt!=="left"&&(Er=Tt.map(ys));var Br,rs=0;if(Zt==="right"){Z-=Er[0],x=[],xr=Tt.length;for(var fi=0;fi<xr;fi++)fi===0?(Br=sn(Z),Rr=ei(Ae)):(Br=X(rs-Er[fi]),Rr=-_s),x.push([Tt[fi],Br,Rr]),rs=Er[fi]}else if(Zt==="center"){Z-=Er[0]/2,x=[],xr=Tt.length;for(var Ii=0;Ii<xr;Ii++)Ii===0?(Br=sn(Z),Rr=ei(Ae)):(Br=X((rs-Er[Ii])/2),Rr=-_s),x.push([Tt[Ii],Br,Rr]),rs=Er[Ii]}else if(Zt==="left"){x=[],xr=Tt.length;for(var Us=0;Us<xr;Us++)x.push(Tt[Us])}else if(Zt==="justify"&&To.encoding==="Identity-H"){x=[],xr=Tt.length,pn=pn!==0?pn:Ri;for(var Fi=0,hr=0;hr<xr;hr++)if(Rr=hr===0?ei(Ae):-_s,Br=hr===0?sn(Z):Fi,hr<xr-1){var bs=X((pn-Er[hr])/(Tt[hr].split(" ").length-1)),ii=Tt[hr].split(" ");x.push([ii[0]+" ",Br,Rr]),Fi=0;for(var Gr=1;Gr<ii.length;Gr++){var No=(ys(ii[Gr-1]+" "+ii[Gr])-ys(ii[Gr]))*ti+bs;Gr==ii.length-1?x.push([ii[Gr],No,0]):x.push([ii[Gr]+" ",No,0]),Fi-=No}}else x.push([Tt[hr],Br,Rr]);x.push(["",Fi,0])}else{if(Zt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(x=[],xr=Tt.length,pn=pn!==0?pn:Ri,hr=0;hr<xr;hr++)Rr=hr===0?ei(Ae):-_s,Br=hr===0?sn(Z):0,hr<xr-1?zs.push(ie(X((pn-Er[hr])/(Tt[hr].split(" ").length-1)))):zs.push(0),x.push([Tt[hr],Br,Rr])}}var Aa=typeof qe.R2L=="boolean"?qe.R2L:ot;Aa===!0&&(x=Sa(x,function(Zn,Gn,vr){return[Zn.split("").reverse().join(""),Gn,vr]})),yt={text:x,x:Z,y:Ae,options:qe,mutex:{pdfEscape:Or,activeFontKey:Ht,fonts:ln,activeFontSize:lt}},Yt.publish("postProcessText",yt),x=yt.text,Li=yt.mutex.isHex||!1;var Ba=ln[Ht].encoding;Ba!=="WinAnsiEncoding"&&Ba!=="StandardEncoding"||(x=Sa(x,function(Zn,Gn,vr){return[Xa(Zn),Gn,vr]})),Tt=ni(x),x=[];for(var Hr,di,oo,ws=0,oa=1,ao=Array.isArray(Tt[0])?oa:ws,lo="",qs=function(Zn,Gn,vr){var er="";return vr instanceof on?(vr=typeof qe.angle=="number"?Qi(vr,new on(1,0,0,1,Zn,Gn)):Qi(new on(1,0,0,1,Zn,Gn),vr),Y===G.ADVANCED&&(vr=Qi(new on(1,0,0,-1,0,0),vr)),er=vr.join(" ")+` Tm
`):er=ie(Zn)+" "+ie(Gn)+` Td
`,er},ji=0;ji<Tt.length;ji++){switch(lo="",ao){case oa:oo=(Li?"<":"(")+Tt[ji][0]+(Li?">":")"),Hr=parseFloat(Tt[ji][1]),di=parseFloat(Tt[ji][2]);break;case ws:oo=(Li?"<":"(")+Tt[ji]+(Li?">":")"),Hr=sn(Z),di=ei(Ae)}zs!==void 0&&zs[ji]!==void 0&&(lo=zs[ji]+` Tw
`),ji===0?x.push(lo+qs(Hr,di,Fn)+oo):ao===ws?x.push(lo+oo):ao===oa&&x.push(lo+qs(Hr,di,Fn)+oo)}x=ao===ws?x.join(` Tj
T* `):x.join(` Tj
`),x+=` Tj
`;var Ir=`BT
/`;return Ir+=Ht+" "+lt+` Tf
`,Ir+=ie(lt*Qn)+` TL
`,Ir+=vs+`
`,Ir+=wr,Ir+=x,ce(Ir+="ET"),S[Ht]=!0,Vn};var Ti=C.__private__.clip=C.clip=function(x){return ce(x==="evenodd"?"W*":"W"),this};C.clipEvenOdd=function(){return Ti("evenodd")},C.__private__.discardPath=C.discardPath=function(){return ce("n"),this};var Dn=C.__private__.isValidStyle=function(x){var Z=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(x)!==-1&&(Z=!0),Z};C.__private__.setDefaultPathOperation=C.setDefaultPathOperation=function(x){return Dn(x)&&(_=x),this};var wa=C.__private__.getStyle=C.getStyle=function(x){var Z=_;switch(x){case"D":case"S":Z="S";break;case"F":Z="f";break;case"FD":case"DF":Z="B";break;case"f":case"f*":case"B":case"B*":Z=x}return Z},Yo=C.close=function(){return ce("h"),this};C.stroke=function(){return ce("S"),this},C.fill=function(x){return to("f",x),this},C.fillEvenOdd=function(x){return to("f*",x),this},C.fillStroke=function(x){return to("B",x),this},C.fillStrokeEvenOdd=function(x){return to("B*",x),this};var to=function(x,Z){or(Z)==="object"?xa(Z,x):ce(x)},Ni=function(x){x===null||Y===G.ADVANCED&&x===void 0||(x=wa(x),ce(x))};function Os(x,Z,Ae,qe,rt){var yt=new gu(Z||this.boundingBox,Ae||this.xStep,qe||this.yStep,this.gState,rt||this.matrix);yt.stream=this.stream;var Tt=x+"$$"+this.cloneIndex+++"$$";return li(Tt,yt),yt}var xa=function(x,Z){var Ae=Ei[x.key],qe=qt[Ae];if(qe instanceof Fl)ce("q"),ce(Po(Z)),qe.gState&&C.setGState(qe.gState),ce(x.matrix.toString()+" cm"),ce("/"+Ae+" sh"),ce("Q");else if(qe instanceof gu){var rt=new on(1,0,0,-1,0,so());x.matrix&&(rt=rt.multiply(x.matrix||fs),Ae=Os.call(qe,x.key,x.boundingBox,x.xStep,x.yStep,rt).id),ce("q"),ce("/Pattern cs"),ce("/"+Ae+" scn"),qe.gState&&C.setGState(qe.gState),ce(Z),ce("Q")}},Po=function(x){switch(x){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},mr=C.moveTo=function(x,Z){return ce(ie(X(x))+" "+ie(te(Z))+" m"),this},xi=C.lineTo=function(x,Z){return ce(ie(X(x))+" "+ie(te(Z))+" l"),this},Rs=C.curveTo=function(x,Z,Ae,qe,rt,yt){return ce([ie(X(x)),ie(te(Z)),ie(X(Ae)),ie(te(qe)),ie(X(rt)),ie(te(yt)),"c"].join(" ")),this};C.__private__.line=C.line=function(x,Z,Ae,qe,rt){if(isNaN(x)||isNaN(Z)||isNaN(Ae)||isNaN(qe)||!Dn(rt))throw new Error("Invalid arguments passed to jsPDF.line");return Y===G.COMPAT?this.lines([[Ae-x,qe-Z]],x,Z,[1,1],rt||"S"):this.lines([[Ae-x,qe-Z]],x,Z,[1,1]).stroke()},C.__private__.lines=C.lines=function(x,Z,Ae,qe,rt,yt){var Tt,Vt,Zt,nn,pn,Bn,sr,Fn,Vn,Pr,wr,Li;if(typeof x=="number"&&(Li=Ae,Ae=Z,Z=x,x=Li),qe=qe||[1,1],yt=yt||!1,isNaN(Z)||isNaN(Ae)||!Array.isArray(x)||!Array.isArray(qe)||!Dn(rt)||typeof yt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(mr(Z,Ae),Tt=qe[0],Vt=qe[1],nn=x.length,Pr=Z,wr=Ae,Zt=0;Zt<nn;Zt++)(pn=x[Zt]).length===2?(Pr=pn[0]*Tt+Pr,wr=pn[1]*Vt+wr,xi(Pr,wr)):(Bn=pn[0]*Tt+Pr,sr=pn[1]*Vt+wr,Fn=pn[2]*Tt+Pr,Vn=pn[3]*Vt+wr,Pr=pn[4]*Tt+Pr,wr=pn[5]*Vt+wr,Rs(Bn,sr,Fn,Vn,Pr,wr));return yt&&Yo(),Ni(rt),this},C.path=function(x){for(var Z=0;Z<x.length;Z++){var Ae=x[Z],qe=Ae.c;switch(Ae.op){case"m":mr(qe[0],qe[1]);break;case"l":xi(qe[0],qe[1]);break;case"c":Rs.apply(this,qe);break;case"h":Yo()}}return this},C.__private__.rect=C.rect=function(x,Z,Ae,qe,rt){if(isNaN(x)||isNaN(Z)||isNaN(Ae)||isNaN(qe)||!Dn(rt))throw new Error("Invalid arguments passed to jsPDF.rect");return Y===G.COMPAT&&(qe=-qe),ce([ie(X(x)),ie(te(Z)),ie(X(Ae)),ie(X(qe)),"re"].join(" ")),Ni(rt),this},C.__private__.triangle=C.triangle=function(x,Z,Ae,qe,rt,yt,Tt){if(isNaN(x)||isNaN(Z)||isNaN(Ae)||isNaN(qe)||isNaN(rt)||isNaN(yt)||!Dn(Tt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ae-x,qe-Z],[rt-Ae,yt-qe],[x-rt,Z-yt]],x,Z,[1,1],Tt,!0),this},C.__private__.roundedRect=C.roundedRect=function(x,Z,Ae,qe,rt,yt,Tt){if(isNaN(x)||isNaN(Z)||isNaN(Ae)||isNaN(qe)||isNaN(rt)||isNaN(yt)||!Dn(Tt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Vt=4/3*(Math.SQRT2-1);return rt=Math.min(rt,.5*Ae),yt=Math.min(yt,.5*qe),this.lines([[Ae-2*rt,0],[rt*Vt,0,rt,yt-yt*Vt,rt,yt],[0,qe-2*yt],[0,yt*Vt,-rt*Vt,yt,-rt,yt],[2*rt-Ae,0],[-rt*Vt,0,-rt,-yt*Vt,-rt,-yt],[0,2*yt-qe],[0,-yt*Vt,rt*Vt,-yt,rt,-yt]],x+rt,Z,[1,1],Tt,!0),this},C.__private__.ellipse=C.ellipse=function(x,Z,Ae,qe,rt){if(isNaN(x)||isNaN(Z)||isNaN(Ae)||isNaN(qe)||!Dn(rt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var yt=4/3*(Math.SQRT2-1)*Ae,Tt=4/3*(Math.SQRT2-1)*qe;return mr(x+Ae,Z),Rs(x+Ae,Z-Tt,x+yt,Z-qe,x,Z-qe),Rs(x-yt,Z-qe,x-Ae,Z-Tt,x-Ae,Z),Rs(x-Ae,Z+Tt,x-yt,Z+qe,x,Z+qe),Rs(x+yt,Z+qe,x+Ae,Z+Tt,x+Ae,Z),Ni(rt),this},C.__private__.circle=C.circle=function(x,Z,Ae,qe){if(isNaN(x)||isNaN(Z)||isNaN(Ae)||!Dn(qe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(x,Z,Ae,Ae,qe)},C.setFont=function(x,Z,Ae){return Ae&&(Z=be(Z,Ae)),Ht=gs(x,Z,{disableWarning:!1}),this};var Ja=C.__private__.getFont=C.getFont=function(){return ln[gs.apply(C,arguments)]};C.__private__.getFontList=C.getFontList=function(){var x,Z,Ae={};for(x in xn)if(xn.hasOwnProperty(x))for(Z in Ae[x]=[],xn[x])xn[x].hasOwnProperty(Z)&&Ae[x].push(Z);return Ae},C.addFont=function(x,Z,Ae,qe,rt){var yt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&yt.indexOf(arguments[3])!==-1?rt=arguments[3]:arguments[3]&&yt.indexOf(arguments[3])==-1&&(Ae=be(Ae,qe)),rt=rt||"Identity-H",Co.call(this,x,Z,Ae,rt)};var Eo,Xo=e.lineWidth||.200025,no=C.__private__.getLineWidth=C.getLineWidth=function(){return Xo},So=C.__private__.setLineWidth=C.setLineWidth=function(x){return Xo=x,ce(ie(X(x))+" w"),this};C.__private__.setLineDash=mn.API.setLineDash=mn.API.setLineDashPattern=function(x,Z){if(x=x||[],Z=Z||0,isNaN(Z)||!Array.isArray(x))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return x=x.map(function(Ae){return ie(X(Ae))}).join(" "),Z=ie(X(Z)),ce("["+x+"] "+Z+" d"),this};var La=C.__private__.getLineHeight=C.getLineHeight=function(){return lt*Eo};C.__private__.getLineHeight=C.getLineHeight=function(){return lt*Eo};var An=C.__private__.setLineHeightFactor=C.setLineHeightFactor=function(x){return typeof(x=x||1.15)=="number"&&(Eo=x),this},Ca=C.__private__.getLineHeightFactor=C.getLineHeightFactor=function(){return Eo};An(e.lineHeight);var sn=C.__private__.getHorizontalCoordinate=function(x){return X(x)},ei=C.__private__.getVerticalCoordinate=function(x){return Y===G.ADVANCED?x:cn[J].mediaBox.topRightY-cn[J].mediaBox.bottomLeftY-X(x)},Mo=C.__private__.getHorizontalCoordinateString=C.getHorizontalCoordinateString=function(x){return ie(sn(x))},ro=C.__private__.getVerticalCoordinateString=C.getVerticalCoordinateString=function(x){return ie(ei(x))},ci=e.strokeColor||"0 G";C.__private__.getStrokeColor=C.getDrawColor=function(){return yi(ci)},C.__private__.setStrokeColor=C.setDrawColor=function(x,Z,Ae,qe){return ci=Bi({ch1:x,ch2:Z,ch3:Ae,ch4:qe,pdfColorType:"draw",precision:2}),ce(ci),this};var ka=e.fillColor||"0 g";C.__private__.getFillColor=C.getFillColor=function(){return yi(ka)},C.__private__.setFillColor=C.setFillColor=function(x,Z,Ae,qe){return ka=Bi({ch1:x,ch2:Z,ch3:Ae,ch4:qe,pdfColorType:"fill",precision:2}),ce(ka),this};var vs=e.textColor||"0 g",Qo=C.__private__.getTextColor=C.getTextColor=function(){return yi(vs)};C.__private__.setTextColor=C.setTextColor=function(x,Z,Ae,qe){return vs=Bi({ch1:x,ch2:Z,ch3:Ae,ch4:qe,pdfColorType:"text",precision:3}),this};var ea=e.charSpace,Di=C.__private__.getCharSpace=C.getCharSpace=function(){return parseFloat(ea||0)};C.__private__.setCharSpace=C.setCharSpace=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ea=x,this};var ta=0;C.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},C.__private__.setLineCap=C.setLineCap=function(x){var Z=C.CapJoinStyles[x];if(Z===void 0)throw new Error("Line cap style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ta=Z,ce(Z+" J"),this};var kr=0;C.__private__.setLineJoin=C.setLineJoin=function(x){var Z=C.CapJoinStyles[x];if(Z===void 0)throw new Error("Line join style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return kr=Z,ce(Z+" j"),this},C.__private__.setLineMiterLimit=C.__private__.setMiterLimit=C.setLineMiterLimit=C.setMiterLimit=function(x){if(x=x||0,isNaN(x))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ce(ie(X(x))+" M"),this},C.GState=gh,C.setGState=function(x){(x=typeof x=="string"?In[Lr[x]]:Ya(null,x)).equals(Dr)||(ce("/"+x.id+" gs"),Dr=x)};var Ya=function(x,Z){if(!x||!Lr[x]){var Ae=!1;for(var qe in In)if(In.hasOwnProperty(qe)&&In[qe].equals(Z)){Ae=!0;break}if(Ae)Z=In[qe];else{var rt="GS"+(Object.keys(In).length+1).toString(10);In[rt]=Z,Z.id=rt}return x&&(Lr[x]=Z.id),Yt.publish("addGState",Z),Z}};C.addGState=function(x,Z){return Ya(x,Z),this},C.saveGraphicsState=function(){return ce("q"),Xn.push({key:Ht,size:lt,color:vs}),this},C.restoreGraphicsState=function(){ce("Q");var x=Xn.pop();return Ht=x.key,lt=x.size,vs=x.color,Dr=null,this},C.setCurrentTransformationMatrix=function(x){return ce(x.toString()+" cm"),this},C.comment=function(x){return ce("#"+x),this};var Ao=function(x,Z){var Ae=x||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ae},set:function(yt){isNaN(yt)||(Ae=parseFloat(yt))}});var qe=Z||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return qe},set:function(yt){isNaN(yt)||(qe=parseFloat(yt))}});var rt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return rt},set:function(yt){rt=yt.toString()}}),this},Oi=function(x,Z,Ae,qe){Ao.call(this,x,Z),this.type="rect";var rt=Ae||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return rt},set:function(Tt){isNaN(Tt)||(rt=parseFloat(Tt))}});var yt=qe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return yt},set:function(Tt){isNaN(Tt)||(yt=parseFloat(Tt))}}),this},na=function(){this.page=qn,this.currentPage=J,this.pages=tt.slice(0),this.pagesContext=cn.slice(0),this.x=Pn,this.y=en,this.matrix=Yn,this.width=io(J),this.height=so(J),this.outputDestination=fe,this.id="",this.objectNumber=-1};na.prototype.restore=function(){qn=this.page,J=this.currentPage,cn=this.pagesContext,tt=this.pages,Pn=this.x,en=this.y,Yn=this.matrix,Bo(J,this.width),gr(J,this.height),fe=this.outputDestination};var Pa=function(x,Z,Ae,qe,rt){Mi.push(new na),qn=J=0,tt=[],Pn=x,en=Z,Yn=rt,$r([Ae,qe])},Ea=function(x){if(Si[x])Mi.pop().restore();else{var Z=new na,Ae="Xo"+(Object.keys(ur).length+1).toString(10);Z.id=Ae,Si[x]=Ae,ur[Ae]=Z,Yt.publish("addFormObject",Z),Mi.pop().restore()}};for(var ra in C.beginFormObject=function(x,Z,Ae,qe,rt){return Pa(x,Z,Ae,qe,rt),this},C.endFormObject=function(x){return Ea(x),this},C.doFormObject=function(x,Z){var Ae=ur[Si[x]];return ce("q"),ce(Z.toString()+" cm"),ce("/"+Ae.id+" Do"),ce("Q"),this},C.getFormObject=function(x){var Z=ur[Si[x]];return{x:Z.x,y:Z.y,width:Z.width,height:Z.height,matrix:Z.matrix}},C.save=function(x,Z){return x=x||"generated.pdf",(Z=Z||{}).returnPromise=Z.returnPromise||!1,Z.returnPromise===!1?(Rl(Ds(ts()),x),typeof Rl.unload=="function"&&vn.setTimeout&&setTimeout(Rl.unload,911),this):new Promise(function(Ae,qe){try{var rt=Rl(Ds(ts()),x);typeof Rl.unload=="function"&&vn.setTimeout&&setTimeout(Rl.unload,911),Ae(rt)}catch(yt){qe(yt.message)}})},mn.API)mn.API.hasOwnProperty(ra)&&(ra==="events"&&mn.API.events.length?function(x,Z){var Ae,qe,rt;for(rt=Z.length-1;rt!==-1;rt--)Ae=Z[rt][0],qe=Z[rt][1],x.subscribe.apply(x,[Ae].concat(typeof qe=="function"?[qe]:qe))}(Yt,mn.API.events):C[ra]=mn.API[ra]);var io=C.getPageWidth=function(x){return(cn[x=x||J].mediaBox.topRightX-cn[x].mediaBox.bottomLeftX)/Dt},Bo=C.setPageWidth=function(x,Z){cn[x].mediaBox.topRightX=Z*Dt+cn[x].mediaBox.bottomLeftX},so=C.getPageHeight=function(x){return(cn[x=x||J].mediaBox.topRightY-cn[x].mediaBox.bottomLeftY)/Dt},gr=C.setPageHeight=function(x,Z){cn[x].mediaBox.topRightY=Z*Dt+cn[x].mediaBox.bottomLeftY};return C.internal={pdfEscape:Or,getStyle:wa,getFont:Ja,getFontSize:Pe,getCharSpace:Di,getTextColor:Qo,getLineHeight:La,getLineHeightFactor:Ca,getLineWidth:no,write:Ge,getHorizontalCoordinate:sn,getVerticalCoordinate:ei,getCoordinateString:Mo,getVerticalCoordinateString:ro,collections:{},newObject:$n,newAdditionalObject:yo,newObjectDeferred:$t,newObjectDeferredBegin:ui,getFilters:Qr,putStream:bi,events:Yt,scaleFactor:Dt,pageSize:{getWidth:function(){return io(J)},setWidth:function(x){Bo(J,x)},getHeight:function(){return so(J)},setHeight:function(x){gr(J,x)}},encryptionOptions:b,encryption:Cr,getEncryptor:Ka,output:eo,getNumberOfPages:cr,pages:tt,out:ce,f2:Je,f3:V,getPageInfo:Jo,getPageInfoByObjId:gn,getCurrentPageInfo:yn,getPDFVersion:R,Point:Ao,Rectangle:Oi,Matrix:on,hasHotfix:Ko},Object.defineProperty(C.internal.pageSize,"width",{get:function(){return io(J)},set:function(x){Bo(J,x)},enumerable:!0,configurable:!0}),Object.defineProperty(C.internal.pageSize,"height",{get:function(){return so(J)},set:function(x){gr(J,x)},enumerable:!0,configurable:!0}),bn.call(C,Qe),Ht="F1",Za(o,n),Yt.publish("initialized"),C}pu.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},pu.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},pu.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},pu.prototype.processOwnerPassword=function(e,t){return cd(ud(t).substr(0,5),e)},pu.prototype.encryptor=function(e,t){var n=ud(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(i){return cd(n,i)}},gh.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||or(e)!==or(this))return!1;var i=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;i++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&i--;return i===0},mn.API={events:[]},mn.version="3.0.0";var Tr=mn.API,zd=1,Yl=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},uu=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ln=function(e){return e.toFixed(2)},cl=function(e){return e.toFixed(5)};Tr.__acroform__={};var As=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},O0=function(e){return e*zd},ua=function(e){var t=new b1,n=Qt.internal.getHeight(e)||0,i=Qt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Ln(i)),Number(Ln(n))],t},Dx=Tr.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},Ox=Tr.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},Rx=Tr.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Fr=Tr.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Rx(e,t-1)},jr=Tr.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Dx(e,t-1)},zr=Tr.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Ox(e,t-1)},Ix=Tr.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,i=t.internal.getVerticalCoordinate,o=e[0],a=e[1],u=e[2],d=e[3],m={};return m.lowerLeft_X=n(o)||0,m.lowerLeft_Y=i(a+d)||0,m.upperRight_X=n(o+u)||0,m.upperRight_Y=i(a)||0,[Number(Ln(m.lowerLeft_X)),Number(Ln(m.lowerLeft_Y)),Number(Ln(m.upperRight_X)),Number(Ln(m.upperRight_Y))]},Fx=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,i=hd(e,n),o=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+o+" "+Ln(i.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC");var a=ua(e);return a.scope=e.scope,a.stream=t.join(`
`),a}},hd=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,i={text:"",fontSize:""},o=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");o=e.multiline?o.map(function(V){return V.split(`
`)}):o.map(function(V){return[V]});var a=n,u=Qt.internal.getHeight(e)||0;u=u<0?-u:u;var d=Qt.internal.getWidth(e)||0;d=d<0?-d:d;var m=function(V,X,N){if(V+1<o.length){var te=X+" "+o[V+1][0];return Fc(te,e,N).width<=d-4}return!1};a++;e:for(;a>0;){t="",a--;var _,b,w=Fc("3",e,a).height,S=e.multiline?u-a:(u-w)/2,C=S+=2,F=0,R=0,$=0;if(a<=0){t=`(...) Tj
`,t+="% Width of Text: "+Fc(t,e,a=12).width+", FieldWidth:"+d+`
`;break}for(var j="",G=0,Y=0;Y<o.length;Y++)if(o.hasOwnProperty(Y)){var ke=!1;if(o[Y].length!==1&&$!==o[Y].length-1){if((w+2)*(G+2)+2>u)continue e;j+=o[Y][$],ke=!0,R=Y,Y--}else{j=(j+=o[Y][$]+" ").substr(j.length-1)==" "?j.substr(0,j.length-1):j;var Ce=parseInt(Y),be=m(Ce,j,a),ie=Y>=o.length-1;if(be&&!ie){j+=" ",$=0;continue}if(be||ie){if(ie)R=Ce;else if(e.multiline&&(w+2)*(G+2)+2>u)continue e}else{if(!e.multiline||(w+2)*(G+2)+2>u)continue e;R=Ce}}for(var re="",Ie=F;Ie<=R;Ie++){var Je=o[Ie];if(e.multiline){if(Ie===R){re+=Je[$]+" ",$=($+1)%Je.length;continue}if(Ie===F){re+=Je[Je.length-1]+" ";continue}}re+=Je[0]+" "}switch(re=re.substr(re.length-1)==" "?re.substr(0,re.length-1):re,b=Fc(re,e,a).width,e.textAlign){case"right":_=d-b-2;break;case"center":_=(d-b)/2;break;case"left":default:_=2}t+=Ln(_)+" "+Ln(C)+` Td
`,t+="("+Yl(re)+`) Tj
`,t+=-Ln(_)+` 0 Td
`,C=-(a+2),b=0,F=ke?R:R+1,G++,j=""}break}return i.text=t,i.fontSize=a,i},Fc=function(e,t,n){var i=t.scope.internal.getFont(t.fontName,t.fontStyle),o=t.scope.getStringUnitWidth(e,{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:o}},jx={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},zx=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(i){return i.type===n.type&&i.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},Ux=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var i=n,o=e[n];t.internal.newObjectDeferredBegin(o.objId,!0),or(o)==="object"&&typeof o.putStream=="function"&&o.putStream(),delete e[i]}},qx=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if($o.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(jx)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");zd=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new w1,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];a.objId=void 0,a.hasAnnotation&&zx(a,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(i,o){var a=!i;for(var u in i||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(u)){var d=i[u],m=[],_=d.Rect;if(d.Rect&&(d.Rect=Ix(d.Rect,o)),o.internal.newObjectDeferredBegin(d.objId,!0),d.DA=Qt.createDefaultAppearanceStream(d),or(d)==="object"&&typeof d.getKeyValueListForStream=="function"&&(m=d.getKeyValueListForStream()),d.Rect=_,d.hasAppearanceStream&&!d.appearanceStreamContent){var b=Fx(d);m.push({key:"AP",value:"<</N "+b+">>"}),o.internal.acroformPlugin.xForms.push(b)}if(d.appearanceStreamContent){var w="";for(var S in d.appearanceStreamContent)if(d.appearanceStreamContent.hasOwnProperty(S)){var C=d.appearanceStreamContent[S];if(w+="/"+S+" ",w+="<<",Object.keys(C).length>=1||Array.isArray(C)){for(var u in C)if(C.hasOwnProperty(u)){var F=C[u];typeof F=="function"&&(F=F.call(o,d)),w+="/"+u+" "+F+" ",o.internal.acroformPlugin.xForms.indexOf(F)>=0||o.internal.acroformPlugin.xForms.push(F)}}else typeof(F=C)=="function"&&(F=F.call(o,d)),w+="/"+u+" "+F,o.internal.acroformPlugin.xForms.indexOf(F)>=0||o.internal.acroformPlugin.xForms.push(F);w+=">>"}m.push({key:"AP",value:`<<
`+w+">>"})}o.internal.putStream({additionalKeyValues:m,objectId:d.objId}),o.internal.out("endobj")}a&&Ux(o.internal.acroformPlugin.xForms,o)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},y1=Tr.__acroform__.arrayToPdfArray=function(e,t,n){var i=function(u){return u};if(Array.isArray(e)){for(var o="[",a=0;a<e.length;a++)switch(a!==0&&(o+=" "),or(e[a])){case"boolean":case"number":case"object":o+=e[a].toString();break;case"string":e[a].substr(0,1)!=="/"?(t!==void 0&&n&&(i=n.internal.getEncryptor(t)),o+="("+Yl(i(e[a].toString()))+")"):o+=e[a].toString()}return o+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Sf=function(e,t,n){var i=function(o){return o};return t!==void 0&&n&&(i=n.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Yl(i(e))+")"},fa=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};fa.prototype.toString=function(){return this.objId+" 0 R"},fa.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},fa.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var i=t[n],o=this[i];o&&(Array.isArray(o)?e.push({key:i,value:y1(o,this.objId,this.scope)}):o instanceof fa?(o.scope=this.scope,e.push({key:i,value:o.objId+" 0 R"})):typeof o!="function"&&e.push({key:i,value:o}))}return e};var b1=function(){fa.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};As(b1,fa);var w1=function(){fa.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(i){return i};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Yl(n(e))+")"}},set:function(n){e=n}})};As(w1,fa);var $o=function e(){fa.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute F supplied.');t=j}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Fr(t,3)},set:function(j){j?this.F=jr(t,3):this.F=zr(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute Ff supplied.');n=j}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(j){i=j!==void 0?j:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(j){i[0]=j}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(j){i[1]=j}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(j){i[2]=j}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(j){i[3]=j}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(j){switch(j){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=j;break;default:throw new Error('Invalid value "'+j+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof vh)return;a="FieldObject"+e.FieldNum++}var j=function(G){return G};return this.scope&&(j=this.scope.internal.getEncryptor(this.objId)),"("+Yl(j(a))+")"},set:function(j){a=j.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(j){a=j}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(j){u=j}});var d="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return d},set:function(j){d=j}});var m=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return m},set:function(j){m=j}});var _=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return _===void 0?50/zd:_},set:function(j){_=j}});var b="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return b},set:function(j){b=j}});var w="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!w||this instanceof vh||this instanceof Gl))return Sf(w,this.objId,this.scope)},set:function(j){j=j.toString(),w=j}});var S=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(S)return this instanceof _i?S:Sf(S,this.objId,this.scope)},set:function(j){j=j.toString(),S=this instanceof _i?j:j.substr(0,1)==="("?uu(j.substr(1,j.length-2)):uu(j)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof _i?uu(S.substr(1,S.length-1)):S},set:function(j){j=j.toString(),S=this instanceof _i?"/"+j:j}});var C=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(C)return C},set:function(j){this.V=j}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(C)return this instanceof _i?C:Sf(C,this.objId,this.scope)},set:function(j){j=j.toString(),C=this instanceof _i?j:j.substr(0,1)==="("?uu(j.substr(1,j.length-2)):uu(j)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof _i?uu(C.substr(1,C.length-1)):C},set:function(j){j=j.toString(),C=this instanceof _i?"/"+j:j}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var F,R=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return R},set:function(j){j=!!j,R=j}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(F)return F},set:function(j){F=j}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,1)},set:function(j){j?this.Ff=jr(this.Ff,1):this.Ff=zr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,2)},set:function(j){j?this.Ff=jr(this.Ff,2):this.Ff=zr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,3)},set:function(j){j?this.Ff=jr(this.Ff,3):this.Ff=zr(this.Ff,3)}});var $=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if($!==null)return $},set:function(j){if([0,1,2].indexOf(j)===-1)throw new Error('Invalid value "'+j+'" for attribute Q supplied.');$=j}}),Object.defineProperty(this,"textAlign",{get:function(){var j;switch($){case 0:default:j="left";break;case 1:j="center";break;case 2:j="right"}return j},configurable:!0,enumerable:!0,set:function(j){switch(j){case"right":case 2:$=2;break;case"center":case 1:$=1;break;case"left":case 0:default:$=0}}})};As($o,fa);var bu=function(){$o.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return y1(t,this.objId,this.scope)},set:function(n){var i,o;o=[],typeof(i=n)=="string"&&(o=function(a,u,d){d||(d=1);for(var m,_=[];m=u.exec(a);)_.push(m[d]);return _}(i,/\((.*?)\)/g)),t=o}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,i){for(i=i||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,18)},set:function(n){n?this.Ff=jr(this.Ff,18):this.Ff=zr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=jr(this.Ff,19):this.Ff=zr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,20)},set:function(n){n?(this.Ff=jr(this.Ff,20),t.sort()):this.Ff=zr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,22)},set:function(n){n?this.Ff=jr(this.Ff,22):this.Ff=zr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,23)},set:function(n){n?this.Ff=jr(this.Ff,23):this.Ff=zr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,27)},set:function(n){n?this.Ff=jr(this.Ff,27):this.Ff=zr(this.Ff,27)}}),this.hasAppearanceStream=!1};As(bu,$o);var wu=function(){bu.call(this),this.fontName="helvetica",this.combo=!1};As(wu,bu);var xu=function(){wu.call(this),this.combo=!0};As(xu,wu);var Jc=function(){xu.call(this),this.edit=!0};As(Jc,xu);var _i=function(){$o.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,15)},set:function(n){n?this.Ff=jr(this.Ff,15):this.Ff=zr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,16)},set:function(n){n?this.Ff=jr(this.Ff,16):this.Ff=zr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,17)},set:function(n){n?this.Ff=jr(this.Ff,17):this.Ff=zr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,26)},set:function(n){n?this.Ff=jr(this.Ff,26):this.Ff=zr(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(a){return a};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var i,o=[];for(i in o.push("<<"),t)o.push("/"+i+" ("+Yl(n(t[i]))+")");return o.push(">>"),o.join(`
`)}},set:function(n){or(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};As(_i,$o);var Yc=function(){_i.call(this),this.pushButton=!0};As(Yc,_i);var Lu=function(){_i.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};As(Lu,_i);var vh=function(){var e,t;$o.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(o){e=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(o){t=o}});var n,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(d){return d};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var a,u=[];for(a in u.push("<<"),i)u.push("/"+a+" ("+Yl(o(i[a]))+")");return u.push(">>"),u.join(`
`)},set:function(o){or(o)==="object"&&(i=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(o){typeof o=="string"&&(i.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(o){n="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Qt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};As(vh,$o),Lu.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},Lu.prototype.createOption=function(e){var t=new vh;return t.Parent=this,t.optionName=e,this.Kids.push(t),$x.call(this.scope,t),t};var Xc=function(){_i.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Qt.CheckBox.createAppearanceStream()};As(Xc,_i);var Gl=function(){$o.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,13)},set:function(t){t?this.Ff=jr(this.Ff,13):this.Ff=zr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,21)},set:function(t){t?this.Ff=jr(this.Ff,21):this.Ff=zr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,23)},set:function(t){t?this.Ff=jr(this.Ff,23):this.Ff=zr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,24)},set:function(t){t?this.Ff=jr(this.Ff,24):this.Ff=zr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,25)},set:function(t){t?this.Ff=jr(this.Ff,25):this.Ff=zr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,26)},set:function(t){t?this.Ff=jr(this.Ff,26):this.Ff=zr(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};As(Gl,$o);var Qc=function(){Gl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,14)},set:function(e){e?this.Ff=jr(this.Ff,14):this.Ff=zr(this.Ff,14)}}),this.password=!0};As(Qc,Gl);var Qt={CheckBox:{createAppearanceStream:function(){return{N:{On:Qt.CheckBox.YesNormal},D:{On:Qt.CheckBox.YesPushDown,Off:Qt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=ua(e);t.scope=e.scope;var n=[],i=e.scope.internal.getFont(e.fontName,e.fontStyle).id,o=e.scope.__private__.encodeColorString(e.color),a=hd(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+Ln(Qt.internal.getWidth(e))+" "+Ln(Qt.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+i+" "+Ln(a.fontSize)+" Tf "+o),n.push("BT"),n.push(a.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=ua(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),o=[],a=Qt.internal.getHeight(e),u=Qt.internal.getWidth(e),d=hd(e,e.caption);return o.push("1 g"),o.push("0 0 "+Ln(u)+" "+Ln(a)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+Ln(u-1)+" "+Ln(a-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+n+" "+Ln(d.fontSize)+" Tf "+i),o.push(d.text),o.push("ET"),o.push("Q"),t.stream=o.join(`
`),t},OffPushDown:function(e){var t=ua(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Ln(Qt.internal.getWidth(e))+" "+Ln(Qt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Qt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Qt.RadioButton.Circle.YesNormal,t.D[e]=Qt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=ua(e);t.scope=e.scope;var n=[],i=Qt.internal.getWidth(e)<=Qt.internal.getHeight(e)?Qt.internal.getWidth(e)/4:Qt.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var o=Qt.internal.Bezier_C,a=Number((i*o).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+cl(Qt.internal.getWidth(e)/2)+" "+cl(Qt.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),n.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),n.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),n.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=ua(e);t.scope=e.scope;var n=[],i=Qt.internal.getWidth(e)<=Qt.internal.getHeight(e)?Qt.internal.getWidth(e)/4:Qt.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var o=Number((2*i).toFixed(5)),a=Number((o*Qt.internal.Bezier_C).toFixed(5)),u=Number((i*Qt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+cl(Qt.internal.getWidth(e)/2)+" "+cl(Qt.internal.getHeight(e)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+a+" "+a+" "+o+" 0 "+o+" c"),n.push("-"+a+" "+o+" -"+o+" "+a+" -"+o+" 0 c"),n.push("-"+o+" -"+a+" -"+a+" -"+o+" 0 -"+o+" c"),n.push(a+" -"+o+" "+o+" -"+a+" "+o+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+cl(Qt.internal.getWidth(e)/2)+" "+cl(Qt.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+u+" "+u+" "+i+" 0 "+i+" c"),n.push("-"+u+" "+i+" -"+i+" "+u+" -"+i+" 0 c"),n.push("-"+i+" -"+u+" -"+u+" -"+i+" 0 -"+i+" c"),n.push(u+" -"+i+" "+i+" -"+u+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=ua(e);t.scope=e.scope;var n=[],i=Qt.internal.getWidth(e)<=Qt.internal.getHeight(e)?Qt.internal.getWidth(e)/4:Qt.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var o=Number((2*i).toFixed(5)),a=Number((o*Qt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+cl(Qt.internal.getWidth(e)/2)+" "+cl(Qt.internal.getHeight(e)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+a+" "+a+" "+o+" 0 "+o+" c"),n.push("-"+a+" "+o+" -"+o+" "+a+" -"+o+" 0 c"),n.push("-"+o+" -"+a+" -"+a+" -"+o+" 0 -"+o+" c"),n.push(a+" -"+o+" "+o+" -"+a+" "+o+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Qt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Qt.RadioButton.Cross.YesNormal,t.D[e]=Qt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=ua(e);t.scope=e.scope;var n=[],i=Qt.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+Ln(Qt.internal.getWidth(e)-2)+" "+Ln(Qt.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Ln(i.x1.x)+" "+Ln(i.x1.y)+" m"),n.push(Ln(i.x2.x)+" "+Ln(i.x2.y)+" l"),n.push(Ln(i.x4.x)+" "+Ln(i.x4.y)+" m"),n.push(Ln(i.x3.x)+" "+Ln(i.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=ua(e);t.scope=e.scope;var n=Qt.internal.calculateCross(e),i=[];return i.push("0.749023 g"),i.push("0 0 "+Ln(Qt.internal.getWidth(e))+" "+Ln(Qt.internal.getHeight(e))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+Ln(Qt.internal.getWidth(e)-2)+" "+Ln(Qt.internal.getHeight(e)-2)+" re"),i.push("W"),i.push("n"),i.push(Ln(n.x1.x)+" "+Ln(n.x1.y)+" m"),i.push(Ln(n.x2.x)+" "+Ln(n.x2.y)+" l"),i.push(Ln(n.x4.x)+" "+Ln(n.x4.y)+" m"),i.push(Ln(n.x3.x)+" "+Ln(n.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=ua(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Ln(Qt.internal.getWidth(e))+" "+Ln(Qt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};Qt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Qt.internal.getWidth(e),n=Qt.internal.getHeight(e),i=Math.min(t,n);return{x1:{x:(t-i)/2,y:(n-i)/2+i},x2:{x:(t-i)/2+i,y:(n-i)/2},x3:{x:(t-i)/2,y:(n-i)/2},x4:{x:(t-i)/2+i,y:(n-i)/2+i}}}},Qt.internal.getWidth=function(e){var t=0;return or(e)==="object"&&(t=O0(e.Rect[2])),t},Qt.internal.getHeight=function(e){var t=0;return or(e)==="object"&&(t=O0(e.Rect[3])),t};var $x=Tr.addField=function(e){if(qx(this,e),!(e instanceof $o))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Tr.AcroFormChoiceField=bu,Tr.AcroFormListBox=wu,Tr.AcroFormComboBox=xu,Tr.AcroFormEditBox=Jc,Tr.AcroFormButton=_i,Tr.AcroFormPushButton=Yc,Tr.AcroFormRadioButton=Lu,Tr.AcroFormCheckBox=Xc,Tr.AcroFormTextField=Gl,Tr.AcroFormPasswordField=Qc,Tr.AcroFormAppearance=Qt,Tr.AcroForm={ChoiceField:bu,ListBox:wu,ComboBox:xu,EditBox:Jc,Button:_i,PushButton:Yc,RadioButton:Lu,CheckBox:Xc,TextField:Gl,PasswordField:Qc,Appearance:Qt},mn.AcroForm={ChoiceField:bu,ListBox:wu,ComboBox:xu,EditBox:Jc,Button:_i,PushButton:Yc,RadioButton:Lu,CheckBox:Xc,TextField:Gl,PasswordField:Qc,Appearance:Qt};mn.AcroForm;function x1(e){return e.reduce(function(t,n,i){return t[n]=i,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=e.__addimage__.getImageFileTypeByImageData=function(V,X){var N,te,W,H,me,U=t;if((X=X||t)==="RGBA"||V.data!==void 0&&V.data instanceof Uint8ClampedArray&&"height"in V&&"width"in V)return"RGBA";if(be(V))for(me in n)for(W=n[me],N=0;N<W.length;N+=1){for(H=!0,te=0;te<W[N].length;te+=1)if(W[N][te]!==void 0&&W[N][te]!==V[te]){H=!1;break}if(H===!0){U=me;break}}else for(me in n)for(W=n[me],N=0;N<W.length;N+=1){for(H=!0,te=0;te<W[N].length;te+=1)if(W[N][te]!==void 0&&W[N][te]!==V.charCodeAt(te)){H=!1;break}if(H===!0){U=me;break}}return U===t&&X!==t&&(U=X),U},o=function V(X){for(var N=this.internal.write,te=this.internal.putStream,W=(0,this.internal.getFilters)();W.indexOf("FlateEncode")!==-1;)W.splice(W.indexOf("FlateEncode"),1);X.objectId=this.internal.newObject();var H=[];if(H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Image"}),H.push({key:"Width",value:X.width}),H.push({key:"Height",value:X.height}),X.colorSpace===$.INDEXED?H.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(X.palette.length/3-1)+" "+("sMask"in X&&X.sMask!==void 0?X.objectId+2:X.objectId+1)+" 0 R]"}):(H.push({key:"ColorSpace",value:"/"+X.colorSpace}),X.colorSpace===$.DEVICE_CMYK&&H.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),H.push({key:"BitsPerComponent",value:X.bitsPerComponent}),"decodeParameters"in X&&X.decodeParameters!==void 0&&H.push({key:"DecodeParms",value:"<<"+X.decodeParameters+">>"}),"transparency"in X&&Array.isArray(X.transparency)){for(var me="",U=0,I=X.transparency.length;U<I;U++)me+=X.transparency[U]+" "+X.transparency[U]+" ";H.push({key:"Mask",value:"["+me+"]"})}X.sMask!==void 0&&H.push({key:"SMask",value:X.objectId+1+" 0 R"});var Q=X.filter!==void 0?["/"+X.filter]:void 0;if(te({data:X.data,additionalKeyValues:H,alreadyAppliedFilters:Q,objectId:X.objectId}),N("endobj"),"sMask"in X&&X.sMask!==void 0){var Re="/Predictor "+X.predictor+" /Colors 1 /BitsPerComponent "+X.bitsPerComponent+" /Columns "+X.width,O={width:X.width,height:X.height,colorSpace:"DeviceGray",bitsPerComponent:X.bitsPerComponent,decodeParameters:Re,data:X.sMask};"filter"in X&&(O.filter=X.filter),V.call(this,O)}if(X.colorSpace===$.INDEXED){var J=this.internal.newObject();te({data:re(new Uint8Array(X.palette)),objectId:J}),N("endobj")}},a=function(){var V=this.internal.collections.addImage_images;for(var X in V)o.call(this,V[X])},u=function(){var V,X=this.internal.collections.addImage_images,N=this.internal.write;for(var te in X)N("/I"+(V=X[te]).index,V.objectId,"0","R")},d=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",u))},m=function(){var V=this.internal.collections.addImage_images;return d.call(this),V},_=function(){return Object.keys(this.internal.collections.addImage_images).length},b=function(V){return typeof e["process"+V.toUpperCase()]=="function"},w=function(V){return or(V)==="object"&&V.nodeType===1},S=function(V,X){if(V.nodeName==="IMG"&&V.hasAttribute("src")){var N=""+V.getAttribute("src");if(N.indexOf("data:image/")===0)return ic(unescape(N).split("base64,").pop());var te=e.loadFile(N,!0);if(te!==void 0)return te}if(V.nodeName==="CANVAS"){if(V.width===0||V.height===0)throw new Error("Given canvas must have data. Canvas width: "+V.width+", height: "+V.height);var W;switch(X){case"PNG":W="image/png";break;case"WEBP":W="image/webp";break;case"JPEG":case"JPG":default:W="image/jpeg"}return ic(V.toDataURL(W,1).split("base64,").pop())}},C=function(V){var X=this.internal.collections.addImage_images;if(X){for(var N in X)if(V===X[N].alias)return X[N]}},F=function(V,X,N){return V||X||(V=-96,X=-96),V<0&&(V=-1*N.width*72/V/this.internal.scaleFactor),X<0&&(X=-1*N.height*72/X/this.internal.scaleFactor),V===0&&(V=X*N.width/N.height),X===0&&(X=V*N.height/N.width),[V,X]},R=function(V,X,N,te,W,H){var me=F.call(this,N,te,W),U=this.internal.getCoordinateString,I=this.internal.getVerticalCoordinateString,Q=m.call(this);if(N=me[0],te=me[1],Q[W.index]=W,H){H*=Math.PI/180;var Re=Math.cos(H),O=Math.sin(H),J=function(de){return de.toFixed(4)},se=[J(Re),J(O),J(-1*O),J(Re),0,0,"cm"]}this.internal.write("q"),H?(this.internal.write([1,"0","0",1,U(V),I(X+te),"cm"].join(" ")),this.internal.write(se.join(" ")),this.internal.write([U(N),"0","0",U(te),"0","0","cm"].join(" "))):this.internal.write([U(N),"0","0",U(te),U(V),I(X+te),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+W.index+" Do"),this.internal.write("Q")},$=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var j=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},G=e.__addimage__.sHashCode=function(V){var X,N,te=0;if(typeof V=="string")for(N=V.length,X=0;X<N;X++)te=(te<<5)-te+V.charCodeAt(X),te|=0;else if(be(V))for(N=V.byteLength/2,X=0;X<N;X++)te=(te<<5)-te+V[X],te|=0;return te},Y=e.__addimage__.validateStringAsBase64=function(V){(V=V||"").toString().trim();var X=!0;return V.length===0&&(X=!1),V.length%4!=0&&(X=!1),/^[A-Za-z0-9+/]+$/.test(V.substr(0,V.length-2))===!1&&(X=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(V.substr(-2))===!1&&(X=!1),X},ke=e.__addimage__.extractImageFromDataUrl=function(V){var X=(V=V||"").split("base64,"),N=null;if(X.length===2){var te=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(X[0]);Array.isArray(te)&&(N={mimeType:te[1],charset:te[2],data:X[1]})}return N},Ce=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(V){return Ce()&&V instanceof ArrayBuffer};var be=e.__addimage__.isArrayBufferView=function(V){return Ce()&&typeof Uint32Array<"u"&&(V instanceof Int8Array||V instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&V instanceof Uint8ClampedArray||V instanceof Int16Array||V instanceof Uint16Array||V instanceof Int32Array||V instanceof Uint32Array||V instanceof Float32Array||V instanceof Float64Array)},ie=e.__addimage__.binaryStringToUint8Array=function(V){for(var X=V.length,N=new Uint8Array(X),te=0;te<X;te++)N[te]=V.charCodeAt(te);return N},re=e.__addimage__.arrayBufferToBinaryString=function(V){for(var X="",N=be(V)?V:new Uint8Array(V),te=0;te<N.length;te+=8192)X+=String.fromCharCode.apply(null,N.subarray(te,te+8192));return X};e.addImage=function(){var V,X,N,te,W,H,me,U,I;if(typeof arguments[1]=="number"?(X=t,N=arguments[1],te=arguments[2],W=arguments[3],H=arguments[4],me=arguments[5],U=arguments[6],I=arguments[7]):(X=arguments[1],N=arguments[2],te=arguments[3],W=arguments[4],H=arguments[5],me=arguments[6],U=arguments[7],I=arguments[8]),or(V=arguments[0])==="object"&&!w(V)&&"imageData"in V){var Q=V;V=Q.imageData,X=Q.format||X||t,N=Q.x||N||0,te=Q.y||te||0,W=Q.w||Q.width||W,H=Q.h||Q.height||H,me=Q.alias||me,U=Q.compression||U,I=Q.rotation||Q.angle||I}var Re=this.internal.getFilters();if(U===void 0&&Re.indexOf("FlateEncode")!==-1&&(U="SLOW"),isNaN(N)||isNaN(te))throw new Error("Invalid coordinates passed to jsPDF.addImage");d.call(this);var O=Ie.call(this,V,X,me,U);return R.call(this,N,te,W,H,O,I),this};var Ie=function(V,X,N,te){var W,H,me;if(typeof V=="string"&&i(V)===t){V=unescape(V);var U=Je(V,!1);(U!==""||(U=e.loadFile(V,!0))!==void 0)&&(V=U)}if(w(V)&&(V=S(V,X)),X=i(V,X),!b(X))throw new Error("addImage does not support files of type '"+X+"', please ensure that a plugin for '"+X+"' support is added.");if(((me=N)==null||me.length===0)&&(N=function(I){return typeof I=="string"||be(I)?G(I):be(I.data)?G(I.data):null}(V)),(W=C.call(this,N))||(Ce()&&(V instanceof Uint8Array||X==="RGBA"||(H=V,V=ie(V))),W=this["process"+X.toUpperCase()](V,_.call(this),N,function(I){return I&&typeof I=="string"&&(I=I.toUpperCase()),I in e.image_compression?I:j.NONE}(te),H)),!W)throw new Error("An unknown error occurred whilst processing the image.");return W},Je=e.__addimage__.convertBase64ToBinaryString=function(V,X){var N;X=typeof X!="boolean"||X;var te,W="";if(typeof V=="string"){te=(N=ke(V))!==null?N.data:V;try{W=ic(te)}catch(H){if(X)throw Y(te)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+H.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return W};e.getImageProperties=function(V){var X,N,te="";if(w(V)&&(V=S(V)),typeof V=="string"&&i(V)===t&&((te=Je(V,!1))===""&&(te=e.loadFile(V)||""),V=te),N=i(V),!b(N))throw new Error("addImage does not support files of type '"+N+"', please ensure that a plugin for '"+N+"' support is added.");if(!Ce()||V instanceof Uint8Array||(V=ie(V)),!(X=this["process"+N.toUpperCase()](V)))throw new Error("An unknown error occurred whilst processing the image");return X.fileType=N,X}})(mn.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};mn.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var i,o,a,u=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString,m=this.internal.getPageInfoByObjId(n.objId),_=n.pageContext.annotations,b=!1,w=0;w<_.length&&!b;w++)switch((i=_[w]).type){case"link":(t(i.options.url)||t(i.options.pageNumber))&&(b=!0);break;case"reference":case"text":case"freetext":b=!0}if(b!=0){this.internal.write("/Annots [");for(var S=0;S<_.length;S++){i=_[S];var C=this.internal.pdfEscape,F=this.internal.getEncryptor(n.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var R=this.internal.newAdditionalObject(),$=this.internal.newAdditionalObject(),j=this.internal.getEncryptor(R.objId),G=i.title||"Note";a="<</Type /Annot /Subtype /Text "+(o="/Rect ["+u(i.bounds.x)+" "+d(i.bounds.y+i.bounds.h)+" "+u(i.bounds.x+i.bounds.w)+" "+d(i.bounds.y)+"] ")+"/Contents ("+C(j(i.contents))+")",a+=" /Popup "+$.objId+" 0 R",a+=" /P "+m.objId+" 0 R",a+=" /T ("+C(j(G))+") >>",R.content=a;var Y=R.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+u(i.bounds.x+30)+" "+d(i.bounds.y+i.bounds.h)+" "+u(i.bounds.x+i.bounds.w+30)+" "+d(i.bounds.y)+"] ")+" /Parent "+Y,i.open&&(a+=" /Open true"),a+=" >>",$.content=a,this.internal.write(R.objId,"0 R",$.objId,"0 R");break;case"freetext":o="/Rect ["+u(i.bounds.x)+" "+d(i.bounds.y)+" "+u(i.bounds.x+i.bounds.w)+" "+d(i.bounds.y+i.bounds.h)+"] ";var ke=i.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+C(F(i.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+ke+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(i.options.name){var Ce=this.annotations._nameMap[i.options.name];i.options.pageNumber=Ce.page,i.options.top=Ce.y}else i.options.top||(i.options.top=0);if(o="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",a="",i.options.url)a="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+C(F(i.options.url))+") >>";else if(i.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,a+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var be=d(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),a+=" /XYZ "+i.options.left+" "+be+" "+i.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var i=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":i.pageContext.annotations.push(n)}},e.link=function(n,i,o,a,u){var d=this.internal.getCurrentPageInfo(),m=this.internal.getCoordinateString,_=this.internal.getVerticalCoordinateString;d.pageContext.annotations.push({finalBounds:{x:m(n),y:_(i),w:m(n+o),h:_(i+a)},options:u,type:"link"})},e.textWithLink=function(n,i,o,a){var u,d,m=this.getTextWidth(n),_=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){d=a.maxWidth;var b=this.splitTextToSize(n,d).length;u=Math.ceil(_*b)}else d=m,u=_;return this.text(n,i,o,a),o+=.2*_,a.align==="center"&&(i-=m/2),a.align==="right"&&(i-=m),this.link(i,o-_,d,u,a),m},e.getTextWidth=function(n){var i=this.internal.getFontSize();return this.getStringUnitWidth(n)*i/this.internal.scaleFactor}}(mn.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];e.__arabicParser__={};var a=e.__arabicParser__.isInArabicSubstitutionA=function(R){return t[R.charCodeAt(0)]!==void 0},u=e.__arabicParser__.isArabicLetter=function(R){return typeof R=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(R)},d=e.__arabicParser__.isArabicEndLetter=function(R){return u(R)&&a(R)&&t[R.charCodeAt(0)].length<=2},m=e.__arabicParser__.isArabicAlfLetter=function(R){return u(R)&&o.indexOf(R.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(R){return u(R)&&a(R)&&t[R.charCodeAt(0)].length>=1};var _=e.__arabicParser__.arabicLetterHasFinalForm=function(R){return u(R)&&a(R)&&t[R.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(R){return u(R)&&a(R)&&t[R.charCodeAt(0)].length>=3};var b=e.__arabicParser__.arabicLetterHasMedialForm=function(R){return u(R)&&a(R)&&t[R.charCodeAt(0)].length==4},w=e.__arabicParser__.resolveLigatures=function(R){var $=0,j=n,G="",Y=0;for($=0;$<R.length;$+=1)j[R.charCodeAt($)]!==void 0?(Y++,typeof(j=j[R.charCodeAt($)])=="number"&&(G+=String.fromCharCode(j),j=n,Y=0),$===R.length-1&&(j=n,G+=R.charAt($-(Y-1)),$-=Y-1,Y=0)):(j=n,G+=R.charAt($-Y),$-=Y,Y=0);return G};e.__arabicParser__.isArabicDiacritic=function(R){return R!==void 0&&i[R.charCodeAt(0)]!==void 0};var S=e.__arabicParser__.getCorrectForm=function(R,$,j){return u(R)?a(R)===!1?-1:!_(R)||!u($)&&!u(j)||!u(j)&&d($)||d(R)&&!u($)||d(R)&&m($)||d(R)&&d($)?0:b(R)&&u($)&&!d($)&&u(j)&&_(j)?3:d(R)||!u(j)?1:2:-1},C=function(R){var $=0,j=0,G=0,Y="",ke="",Ce="",be=(R=R||"").split("\\s+"),ie=[];for($=0;$<be.length;$+=1){for(ie.push(""),j=0;j<be[$].length;j+=1)Y=be[$][j],ke=be[$][j-1],Ce=be[$][j+1],u(Y)?(G=S(Y,ke,Ce),ie[$]+=G!==-1?String.fromCharCode(t[Y.charCodeAt(0)][G]):Y):ie[$]+=Y;ie[$]=w(ie[$])}return ie.join(" ")},F=e.__arabicParser__.processArabic=e.processArabic=function(){var R,$=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,j=[];if(Array.isArray($)){var G=0;for(j=[],G=0;G<$.length;G+=1)Array.isArray($[G])?j.push([C($[G][0]),$[G][1],$[G][2]]):j.push([C($[G])]);R=j}else R=C($);return typeof arguments[0]=="string"?R:(arguments[0].text=R,arguments[0])};e.events.push(["preProcessText",F])}(mn.API),mn.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(d){n=d}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(d){i=isNaN(d)||Number.isInteger(d)===!1||d<0?150:d,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(d){o=isNaN(d)||Number.isInteger(d)===!1||d<0?300:d,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(d){a=d}});var u={};Object.defineProperty(this,"style",{get:function(){return u},set:function(d){u=d}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,i){var o;if((n=n||"2d")!=="2d")return null;for(o in i)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=i[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(mn.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var m=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return m},set:function(R){m=R}});var _=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return _},set:function(R){_=R}});var b=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return b},set:function(R){b=R}});var w=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return w},set:function(R){w=R}});var S=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return S},set:function(R){S=R}});var C=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return C},set:function(R){C=R}});var F=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return F},set:function(R){F=R}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(m){return i.call(this),this.internal.__cell__.headerFunction=typeof m=="function"?m:void 0,this},e.getTextDimensions=function(m,_){i.call(this);var b=(_=_||{}).fontSize||this.getFontSize(),w=_.font||this.getFont(),S=_.scaleFactor||this.internal.scaleFactor,C=0,F=0,R=0,$=this;if(!Array.isArray(m)&&typeof m!="string"){if(typeof m!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");m=String(m)}var j=_.maxWidth;j>0?typeof m=="string"?m=this.splitTextToSize(m,j):Object.prototype.toString.call(m)==="[object Array]"&&(m=m.reduce(function(Y,ke){return Y.concat($.splitTextToSize(ke,j))},[])):m=Array.isArray(m)?m:[m];for(var G=0;G<m.length;G++)C<(R=this.getStringUnitWidth(m[G],{font:w})*b)&&(C=R);return C!==0&&(F=m.length),{w:C/=S,h:Math.max((F*b*this.getLineHeightFactor()-b*(this.getLineHeightFactor()-1))/S,0)}},e.cellAddPage=function(){i.call(this),this.addPage();var m=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new a(m.left,m.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var u=e.cell=function(){var m;m=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var _=this.internal.__cell__.lastCell,b=this.internal.__cell__.padding,w=this.internal.__cell__.margins||t,S=this.internal.__cell__.tableHeaderRow,C=this.internal.__cell__.printHeaders;return _.lineNumber!==void 0&&(_.lineNumber===m.lineNumber?(m.x=(_.x||0)+(_.width||0),m.y=_.y||0):_.y+_.height+m.height+w.bottom>this.getPageHeight()?(this.cellAddPage(),m.y=w.top,C&&S&&(this.printHeaderRow(m.lineNumber,!0),m.y+=S[0].height)):m.y=_.y+_.height||m.y),m.text[0]!==void 0&&(this.rect(m.x,m.y,m.width,m.height,n===!0?"FD":void 0),m.align==="right"?this.text(m.text,m.x+m.width-b,m.y+b,{align:"right",baseline:"top"}):m.align==="center"?this.text(m.text,m.x+m.width/2,m.y+b,{align:"center",baseline:"top",maxWidth:m.width-b-b}):this.text(m.text,m.x+b,m.y+b,{align:"left",baseline:"top",maxWidth:m.width-b-b})),this.internal.__cell__.lastCell=m,this};e.table=function(m,_,b,w,S){if(i.call(this),!b)throw new Error("No data for PDF table.");var C,F,R,$,j=[],G=[],Y=[],ke={},Ce={},be=[],ie=[],re=(S=S||{}).autoSize||!1,Ie=S.printHeaders!==!1,Je=S.css&&S.css["font-size"]!==void 0?16*S.css["font-size"]:S.fontSize||12,V=S.margins||Object.assign({width:this.getPageWidth()},t),X=typeof S.padding=="number"?S.padding:3,N=S.headerBackgroundColor||"#c8c8c8",te=S.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=Ie,this.internal.__cell__.margins=V,this.internal.__cell__.table_font_size=Je,this.internal.__cell__.padding=X,this.internal.__cell__.headerBackgroundColor=N,this.internal.__cell__.headerTextColor=te,this.setFontSize(Je),w==null)G=j=Object.keys(b[0]),Y=j.map(function(){return"left"});else if(Array.isArray(w)&&or(w[0])==="object")for(j=w.map(function(Q){return Q.name}),G=w.map(function(Q){return Q.prompt||Q.name||""}),Y=w.map(function(Q){return Q.align||"left"}),C=0;C<w.length;C+=1)Ce[w[C].name]=w[C].width*(19.049976/25.4);else Array.isArray(w)&&typeof w[0]=="string"&&(G=j=w,Y=j.map(function(){return"left"}));if(re||Array.isArray(w)&&typeof w[0]=="string")for(C=0;C<j.length;C+=1){for(ke[$=j[C]]=b.map(function(Q){return Q[$]}),this.setFont(void 0,"bold"),be.push(this.getTextDimensions(G[C],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),F=ke[$],this.setFont(void 0,"normal"),R=0;R<F.length;R+=1)be.push(this.getTextDimensions(F[R],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Ce[$]=Math.max.apply(null,be)+X+X,be=[]}if(Ie){var W={};for(C=0;C<j.length;C+=1)W[j[C]]={},W[j[C]].text=G[C],W[j[C]].align=Y[C];var H=d.call(this,W,Ce);ie=j.map(function(Q){return new a(m,_,Ce[Q],H,W[Q].text,void 0,W[Q].align)}),this.setTableHeaderRow(ie),this.printHeaderRow(1,!1)}var me=w.reduce(function(Q,Re){return Q[Re.name]=Re.align,Q},{});for(C=0;C<b.length;C+=1){"rowStart"in S&&S.rowStart instanceof Function&&S.rowStart({row:C,data:b[C]},this);var U=d.call(this,b[C],Ce);for(R=0;R<j.length;R+=1){var I=b[C][j[R]];"cellStart"in S&&S.cellStart instanceof Function&&S.cellStart({row:C,col:R,data:I},this),u.call(this,new a(m,_,Ce[j[R]],U,I,C+2,me[j[R]]))}}return this.internal.__cell__.table_x=m,this.internal.__cell__.table_y=_,this};var d=function(m,_){var b=this.internal.__cell__.padding,w=this.internal.__cell__.table_font_size,S=this.internal.scaleFactor;return Object.keys(m).map(function(C){var F=m[C];return this.splitTextToSize(F.hasOwnProperty("text")?F.text:F,_[C]-b-b)},this).map(function(C){return this.getLineHeightFactor()*C.length*w/S+b+b},this).reduce(function(C,F){return Math.max(C,F)},0)};e.setTableHeaderRow=function(m){i.call(this),this.internal.__cell__.tableHeaderRow=m},e.printHeaderRow=function(m,_){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var b;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var w=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(w[0],w[1],w[2],w[3],void 0,-1)}this.setFont(void 0,"bold");for(var S=[],C=0;C<this.internal.__cell__.tableHeaderRow.length;C+=1){b=this.internal.__cell__.tableHeaderRow[C].clone(),_&&(b.y=this.internal.__cell__.margins.top||0,S.push(b)),b.lineNumber=m;var F=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),u.call(this,b),this.setTextColor(F)}S.length>0&&this.setTableHeaderRow(S),this.setFont(void 0,"normal"),n=!1}}(mn.API);var L1={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},C1=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],fd=x1(C1),k1=[100,200,300,400,500,600,700,800,900],Vx=x1(k1);function dd(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(a){return L1[a=a||"normal"]?a:"normal"}(e.style),i=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(e.weight),o=function(a){return typeof fd[a=a||"normal"]=="number"?a:"normal"}(e.stretch);return{family:t,style:n,weight:i,stretch:o,src:e.src||[],ref:e.ref||{name:t,style:[o,n,i].join(" ")}}}function R0(e,t,n,i){var o;for(o=n;o>=0&&o<t.length;o+=i)if(e[t[o]])return e[t[o]];for(o=n;o>=0&&o<t.length;o-=i)if(e[t[o]])return e[t[o]]}var Gx={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},I0={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function F0(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function Hx(e,t,n){for(var i=(n=n||{}).defaultFontFamily||"times",o=Object.assign({},Gx,n.genericFontFamilies||{}),a=null,u=null,d=0;d<t.length;++d)if(o[(a=dd(t[d])).family]&&(a.family=o[a.family]),e.hasOwnProperty(a.family)){u=e[a.family];break}if(!(u=u||e[i]))throw new Error("Could not find a font-family for the rule '"+F0(a)+"' and default family '"+i+"'.");if(u=function(m,_){if(_[m])return _[m];var b=fd[m],w=b<=fd.normal?-1:1,S=R0(_,C1,b,w);if(!S)throw new Error("Could not find a matching font-stretch value for "+m);return S}(a.stretch,u),u=function(m,_){if(_[m])return _[m];for(var b=L1[m],w=0;w<b.length;++w)if(_[b[w]])return _[b[w]];throw new Error("Could not find a matching font-style for "+m)}(a.style,u),!(u=function(m,_){if(_[m])return _[m];if(m===400&&_[500])return _[500];if(m===500&&_[400])return _[400];var b=Vx[m],w=R0(_,k1,b,m<400?-1:1);if(!w)throw new Error("Could not find a matching font-weight for value "+m);return w}(a.weight,u)))throw new Error("Failed to resolve a font for the rule '"+F0(a)+"'.");return u}function j0(e){return e.trimLeft()}function Wx(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function Zx(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var jc,z0,U0,Mf=["times"];(function(e){var t,n,i,o,a,u,d,m,_,b=function(O){return O=O||{},this.isStrokeTransparent=O.isStrokeTransparent||!1,this.strokeOpacity=O.strokeOpacity||1,this.strokeStyle=O.strokeStyle||"#000000",this.fillStyle=O.fillStyle||"#000000",this.isFillTransparent=O.isFillTransparent||!1,this.fillOpacity=O.fillOpacity||1,this.font=O.font||"10px sans-serif",this.textBaseline=O.textBaseline||"alphabetic",this.textAlign=O.textAlign||"left",this.lineWidth=O.lineWidth||1,this.lineJoin=O.lineJoin||"miter",this.lineCap=O.lineCap||"butt",this.path=O.path||[],this.transform=O.transform!==void 0?O.transform.clone():new m,this.globalCompositeOperation=O.globalCompositeOperation||"normal",this.globalAlpha=O.globalAlpha||1,this.clip_path=O.clip_path||[],this.currentPoint=O.currentPoint||new u,this.miterLimit=O.miterLimit||10,this.lastPoint=O.lastPoint||new u,this.lineDashOffset=O.lineDashOffset||0,this.lineDash=O.lineDash||[],this.margin=O.margin||[0,0,0,0],this.prevPageLastElemOffset=O.prevPageLastElemOffset||0,this.ignoreClearRect=typeof O.ignoreClearRect!="boolean"||O.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new w(this),t=this.internal.f2,n=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,u=this.internal.Point,d=this.internal.Rectangle,m=this.internal.Matrix,_=new b}]);var w=function(O){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var J=O;Object.defineProperty(this,"pdf",{get:function(){return J}});var se=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return se},set:function(Be){se=!!Be}});var de=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return de},set:function(Be){de=!!Be}});var _e=0;Object.defineProperty(this,"posX",{get:function(){return _e},set:function(Be){isNaN(Be)||(_e=Be)}});var he=0;Object.defineProperty(this,"posY",{get:function(){return he},set:function(Be){isNaN(Be)||(he=Be)}}),Object.defineProperty(this,"margin",{get:function(){return _.margin},set:function(Be){var ce;typeof Be=="number"?ce=[Be,Be,Be,Be]:((ce=new Array(4))[0]=Be[0],ce[1]=Be.length>=2?Be[1]:ce[0],ce[2]=Be.length>=3?Be[2]:ce[0],ce[3]=Be.length>=4?Be[3]:ce[1]),_.margin=ce}});var we=!1;Object.defineProperty(this,"autoPaging",{get:function(){return we},set:function(Be){we=Be}});var Ee=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ee},set:function(Be){Ee=Be}});var Ve=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ve},set:function(Be){Ve=Be}}),Object.defineProperty(this,"ctx",{get:function(){return _},set:function(Be){Be instanceof b&&(_=Be)}}),Object.defineProperty(this,"path",{get:function(){return _.path},set:function(Be){_.path=Be}});var tt=[];Object.defineProperty(this,"ctxStack",{get:function(){return tt},set:function(Be){tt=Be}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Be){var ce;ce=S(Be),this.ctx.fillStyle=ce.style,this.ctx.isFillTransparent=ce.a===0,this.ctx.fillOpacity=ce.a,this.pdf.setFillColor(ce.r,ce.g,ce.b,{a:ce.a}),this.pdf.setTextColor(ce.r,ce.g,ce.b,{a:ce.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Be){var ce=S(Be);this.ctx.strokeStyle=ce.style,this.ctx.isStrokeTransparent=ce.a===0,this.ctx.strokeOpacity=ce.a,ce.a===0?this.pdf.setDrawColor(255,255,255):(ce.a,this.pdf.setDrawColor(ce.r,ce.g,ce.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Be){["butt","round","square"].indexOf(Be)!==-1&&(this.ctx.lineCap=Be,this.pdf.setLineCap(Be))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Be){isNaN(Be)||(this.ctx.lineWidth=Be,this.pdf.setLineWidth(Be))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Be){["bevel","round","miter"].indexOf(Be)!==-1&&(this.ctx.lineJoin=Be,this.pdf.setLineJoin(Be))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Be){isNaN(Be)||(this.ctx.miterLimit=Be,this.pdf.setMiterLimit(Be))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Be){this.ctx.textBaseline=Be}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Be){["right","end","center","left","start"].indexOf(Be)!==-1&&(this.ctx.textAlign=Be)}});var ne=null;function fe(Be,ce){if(ne===null){var Ge=function(it){var Qe=[];return Object.keys(it).forEach(function(lt){it[lt].forEach(function(Oe){var Pe=null;switch(Oe){case"bold":Pe={family:lt,weight:"bold"};break;case"italic":Pe={family:lt,style:"italic"};break;case"bolditalic":Pe={family:lt,weight:"bold",style:"italic"};break;case"":case"normal":Pe={family:lt}}Pe!==null&&(Pe.ref={name:lt,style:Oe},Qe.push(Pe))})}),Qe}(Be.getFontList());ne=function(it){for(var Qe={},lt=0;lt<it.length;++lt){var Oe=dd(it[lt]),Pe=Oe.family,ot=Oe.stretch,_t=Oe.style,Ct=Oe.weight;Qe[Pe]=Qe[Pe]||{},Qe[Pe][ot]=Qe[Pe][ot]||{},Qe[Pe][ot][_t]=Qe[Pe][ot][_t]||{},Qe[Pe][ot][_t][Ct]=Oe}return Qe}(Ge.concat(ce))}return ne}var De=null;Object.defineProperty(this,"fontFaces",{get:function(){return De},set:function(Be){ne=null,De=Be}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Be){var ce;if(this.ctx.font=Be,(ce=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Be))!==null){var Ge=ce[1],it=(ce[2],ce[3]),Qe=ce[4],lt=(ce[5],ce[6]),Oe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Qe)[2];Qe=Math.floor(Oe==="px"?parseFloat(Qe)*this.pdf.internal.scaleFactor:Oe==="em"?parseFloat(Qe)*this.pdf.getFontSize():parseFloat(Qe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Qe);var Pe=function(Ut){var Ht,Dt,Pn=[],en=Ut.trim();if(en==="")return Mf;if(en in I0)return[I0[en]];for(;en!=="";){switch(Dt=null,Ht=(en=j0(en)).charAt(0)){case'"':case"'":Dt=Wx(en.substring(1),Ht);break;default:Dt=Zx(en)}if(Dt===null||(Pn.push(Dt[0]),(en=j0(Dt[1]))!==""&&en.charAt(0)!==","))return Mf;en=en.replace(/^,/,"")}return Pn}(lt);if(this.fontFaces){var ot=Hx(fe(this.pdf,this.fontFaces),Pe.map(function(Ut){return{family:Ut,stretch:"normal",weight:it,style:Ge}}));this.pdf.setFont(ot.ref.name,ot.ref.style)}else{var _t="";(it==="bold"||parseInt(it,10)>=700||Ge==="bold")&&(_t="bold"),Ge==="italic"&&(_t+="italic"),_t.length===0&&(_t="normal");for(var Ct="",ze={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ot=0;Ot<Pe.length;Ot++){if(this.pdf.internal.getFont(Pe[Ot],_t,{noFallback:!0,disableWarning:!0})!==void 0){Ct=Pe[Ot];break}if(_t==="bolditalic"&&this.pdf.internal.getFont(Pe[Ot],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ct=Pe[Ot],_t="bold";else if(this.pdf.internal.getFont(Pe[Ot],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ct=Pe[Ot],_t="normal";break}}if(Ct===""){for(var Nt=0;Nt<Pe.length;Nt++)if(ze[Pe[Nt]]){Ct=ze[Pe[Nt]];break}}Ct=Ct===""?"Times":Ct,this.pdf.setFont(Ct,_t)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Be){this.ctx.globalCompositeOperation=Be}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Be){this.ctx.globalAlpha=Be}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Be){this.ctx.lineDashOffset=Be,Re.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Be){this.ctx.lineDash=Be,Re.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Be){this.ctx.ignoreClearRect=!!Be}})};w.prototype.setLineDash=function(O){this.lineDash=O},w.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},w.prototype.fill=function(){ke.call(this,"fill",!1)},w.prototype.stroke=function(){ke.call(this,"stroke",!1)},w.prototype.beginPath=function(){this.path=[{type:"begin"}]},w.prototype.moveTo=function(O,J){if(isNaN(O)||isNaN(J))throw ar.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var se=this.ctx.transform.applyToPoint(new u(O,J));this.path.push({type:"mt",x:se.x,y:se.y}),this.ctx.lastPoint=new u(O,J)},w.prototype.closePath=function(){var O=new u(0,0),J=0;for(J=this.path.length-1;J!==-1;J--)if(this.path[J].type==="begin"&&or(this.path[J+1])==="object"&&typeof this.path[J+1].x=="number"){O=new u(this.path[J+1].x,this.path[J+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new u(O.x,O.y)},w.prototype.lineTo=function(O,J){if(isNaN(O)||isNaN(J))throw ar.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var se=this.ctx.transform.applyToPoint(new u(O,J));this.path.push({type:"lt",x:se.x,y:se.y}),this.ctx.lastPoint=new u(se.x,se.y)},w.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),ke.call(this,null,!0)},w.prototype.quadraticCurveTo=function(O,J,se,de){if(isNaN(se)||isNaN(de)||isNaN(O)||isNaN(J))throw ar.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var _e=this.ctx.transform.applyToPoint(new u(se,de)),he=this.ctx.transform.applyToPoint(new u(O,J));this.path.push({type:"qct",x1:he.x,y1:he.y,x:_e.x,y:_e.y}),this.ctx.lastPoint=new u(_e.x,_e.y)},w.prototype.bezierCurveTo=function(O,J,se,de,_e,he){if(isNaN(_e)||isNaN(he)||isNaN(O)||isNaN(J)||isNaN(se)||isNaN(de))throw ar.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var we=this.ctx.transform.applyToPoint(new u(_e,he)),Ee=this.ctx.transform.applyToPoint(new u(O,J)),Ve=this.ctx.transform.applyToPoint(new u(se,de));this.path.push({type:"bct",x1:Ee.x,y1:Ee.y,x2:Ve.x,y2:Ve.y,x:we.x,y:we.y}),this.ctx.lastPoint=new u(we.x,we.y)},w.prototype.arc=function(O,J,se,de,_e,he){if(isNaN(O)||isNaN(J)||isNaN(se)||isNaN(de)||isNaN(_e))throw ar.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(he=!!he,!this.ctx.transform.isIdentity){var we=this.ctx.transform.applyToPoint(new u(O,J));O=we.x,J=we.y;var Ee=this.ctx.transform.applyToPoint(new u(0,se)),Ve=this.ctx.transform.applyToPoint(new u(0,0));se=Math.sqrt(Math.pow(Ee.x-Ve.x,2)+Math.pow(Ee.y-Ve.y,2))}Math.abs(_e-de)>=2*Math.PI&&(de=0,_e=2*Math.PI),this.path.push({type:"arc",x:O,y:J,radius:se,startAngle:de,endAngle:_e,counterclockwise:he})},w.prototype.arcTo=function(O,J,se,de,_e){throw new Error("arcTo not implemented.")},w.prototype.rect=function(O,J,se,de){if(isNaN(O)||isNaN(J)||isNaN(se)||isNaN(de))throw ar.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(O,J),this.lineTo(O+se,J),this.lineTo(O+se,J+de),this.lineTo(O,J+de),this.lineTo(O,J),this.lineTo(O+se,J),this.lineTo(O,J)},w.prototype.fillRect=function(O,J,se,de){if(isNaN(O)||isNaN(J)||isNaN(se)||isNaN(de))throw ar.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!C.call(this)){var _e={};this.lineCap!=="butt"&&(_e.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(_e.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(O,J,se,de),this.fill(),_e.hasOwnProperty("lineCap")&&(this.lineCap=_e.lineCap),_e.hasOwnProperty("lineJoin")&&(this.lineJoin=_e.lineJoin)}},w.prototype.strokeRect=function(O,J,se,de){if(isNaN(O)||isNaN(J)||isNaN(se)||isNaN(de))throw ar.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");F.call(this)||(this.beginPath(),this.rect(O,J,se,de),this.stroke())},w.prototype.clearRect=function(O,J,se,de){if(isNaN(O)||isNaN(J)||isNaN(se)||isNaN(de))throw ar.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(O,J,se,de))},w.prototype.save=function(O){O=typeof O!="boolean"||O;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,se=0;se<this.pdf.internal.getNumberOfPages();se++)this.pdf.setPage(se+1),this.pdf.internal.out("q");if(this.pdf.setPage(J),O){this.ctx.fontSize=this.pdf.internal.getFontSize();var de=new b(this.ctx);this.ctxStack.push(this.ctx),this.ctx=de}},w.prototype.restore=function(O){O=typeof O!="boolean"||O;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,se=0;se<this.pdf.internal.getNumberOfPages();se++)this.pdf.setPage(se+1),this.pdf.internal.out("Q");this.pdf.setPage(J),O&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},w.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var S=function(O){var J,se,de,_e;if(O.isCanvasGradient===!0&&(O=O.getColor()),!O)return{r:0,g:0,b:0,a:0,style:O};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(O))J=0,se=0,de=0,_e=0;else{var he=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(O);if(he!==null)J=parseInt(he[1]),se=parseInt(he[2]),de=parseInt(he[3]),_e=1;else if((he=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(O))!==null)J=parseInt(he[1]),se=parseInt(he[2]),de=parseInt(he[3]),_e=parseFloat(he[4]);else{if(_e=1,typeof O=="string"&&O.charAt(0)!=="#"){var we=new g1(O);O=we.ok?we.toHex():"#000000"}O.length===4?(J=O.substring(1,2),J+=J,se=O.substring(2,3),se+=se,de=O.substring(3,4),de+=de):(J=O.substring(1,3),se=O.substring(3,5),de=O.substring(5,7)),J=parseInt(J,16),se=parseInt(se,16),de=parseInt(de,16)}}return{r:J,g:se,b:de,a:_e,style:O}},C=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},F=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};w.prototype.fillText=function(O,J,se,de){if(isNaN(J)||isNaN(se)||typeof O!="string")throw ar.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(de=isNaN(de)?void 0:de,!C.call(this)){var _e=U(this.ctx.transform.rotation),he=this.ctx.transform.scaleX;X.call(this,{text:O,x:J,y:se,scale:he,angle:_e,align:this.textAlign,maxWidth:de})}},w.prototype.strokeText=function(O,J,se,de){if(isNaN(J)||isNaN(se)||typeof O!="string")throw ar.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!F.call(this)){de=isNaN(de)?void 0:de;var _e=U(this.ctx.transform.rotation),he=this.ctx.transform.scaleX;X.call(this,{text:O,x:J,y:se,scale:he,renderingMode:"stroke",angle:_e,align:this.textAlign,maxWidth:de})}},w.prototype.measureText=function(O){if(typeof O!="string")throw ar.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var J=this.pdf,se=this.pdf.internal.scaleFactor,de=J.internal.getFontSize(),_e=J.getStringUnitWidth(O)*de/J.internal.scaleFactor,he=function(we){var Ee=(we=we||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ee}}),this};return new he({width:_e*=Math.round(96*se/72*1e4)/1e4})},w.prototype.scale=function(O,J){if(isNaN(O)||isNaN(J))throw ar.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var se=new m(O,0,0,J,0,0);this.ctx.transform=this.ctx.transform.multiply(se)},w.prototype.rotate=function(O){if(isNaN(O))throw ar.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var J=new m(Math.cos(O),Math.sin(O),-Math.sin(O),Math.cos(O),0,0);this.ctx.transform=this.ctx.transform.multiply(J)},w.prototype.translate=function(O,J){if(isNaN(O)||isNaN(J))throw ar.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var se=new m(1,0,0,1,O,J);this.ctx.transform=this.ctx.transform.multiply(se)},w.prototype.transform=function(O,J,se,de,_e,he){if(isNaN(O)||isNaN(J)||isNaN(se)||isNaN(de)||isNaN(_e)||isNaN(he))throw ar.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var we=new m(O,J,se,de,_e,he);this.ctx.transform=this.ctx.transform.multiply(we)},w.prototype.setTransform=function(O,J,se,de,_e,he){O=isNaN(O)?1:O,J=isNaN(J)?0:J,se=isNaN(se)?0:se,de=isNaN(de)?1:de,_e=isNaN(_e)?0:_e,he=isNaN(he)?0:he,this.ctx.transform=new m(O,J,se,de,_e,he)};var R=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};w.prototype.drawImage=function(O,J,se,de,_e,he,we,Ee,Ve){var tt=this.pdf.getImageProperties(O),ne=1,fe=1,De=1,Be=1;de!==void 0&&Ee!==void 0&&(De=Ee/de,Be=Ve/_e,ne=tt.width/de*Ee/de,fe=tt.height/_e*Ve/_e),he===void 0&&(he=J,we=se,J=0,se=0),de!==void 0&&Ee===void 0&&(Ee=de,Ve=_e),de===void 0&&Ee===void 0&&(Ee=tt.width,Ve=tt.height);for(var ce,Ge=this.ctx.transform.decompose(),it=U(Ge.rotate.shx),Qe=new m,lt=(Qe=(Qe=(Qe=Qe.multiply(Ge.translate)).multiply(Ge.skew)).multiply(Ge.scale)).applyToRectangle(new d(he-J*De,we-se*Be,de*ne,_e*fe)),Oe=$.call(this,lt),Pe=[],ot=0;ot<Oe.length;ot+=1)Pe.indexOf(Oe[ot])===-1&&Pe.push(Oe[ot]);if(Y(Pe),this.autoPaging)for(var _t=Pe[0],Ct=Pe[Pe.length-1],ze=_t;ze<Ct+1;ze++){this.pdf.setPage(ze);var Ot=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Nt=ze===1?this.posY+this.margin[0]:this.margin[0],Ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ht=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Dt=ze===1?0:Ut+(ze-2)*Ht;if(this.ctx.clip_path.length!==0){var Pn=this.path;ce=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=G(ce,this.posX+this.margin[3],-Dt+Nt+this.ctx.prevPageLastElemOffset),Ce.call(this,"fill",!0),this.path=Pn}var en=JSON.parse(JSON.stringify(lt));en=G([en],this.posX+this.margin[3],-Dt+Nt+this.ctx.prevPageLastElemOffset)[0];var Yn=(ze>_t||ze<Ct)&&R.call(this);Yn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ot,Ht,null).clip().discardPath()),this.pdf.addImage(O,"JPEG",en.x,en.y,en.w,en.h,null,null,it),Yn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(O,"JPEG",lt.x,lt.y,lt.w,lt.h,null,null,it)};var $=function(O,J,se){var de=[];J=J||this.pdf.internal.pageSize.width,se=se||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var _e=this.posY+this.ctx.prevPageLastElemOffset;switch(O.type){default:case"mt":case"lt":de.push(Math.floor((O.y+_e)/se)+1);break;case"arc":de.push(Math.floor((O.y+_e-O.radius)/se)+1),de.push(Math.floor((O.y+_e+O.radius)/se)+1);break;case"qct":var he=I(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x,O.y);de.push(Math.floor((he.y+_e)/se)+1),de.push(Math.floor((he.y+he.h+_e)/se)+1);break;case"bct":var we=Q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x2,O.y2,O.x,O.y);de.push(Math.floor((we.y+_e)/se)+1),de.push(Math.floor((we.y+we.h+_e)/se)+1);break;case"rect":de.push(Math.floor((O.y+_e)/se)+1),de.push(Math.floor((O.y+O.h+_e)/se)+1)}for(var Ee=0;Ee<de.length;Ee+=1)for(;this.pdf.internal.getNumberOfPages()<de[Ee];)j.call(this);return de},j=function(){var O=this.fillStyle,J=this.strokeStyle,se=this.font,de=this.lineCap,_e=this.lineWidth,he=this.lineJoin;this.pdf.addPage(),this.fillStyle=O,this.strokeStyle=J,this.font=se,this.lineCap=de,this.lineWidth=_e,this.lineJoin=he},G=function(O,J,se){for(var de=0;de<O.length;de++)switch(O[de].type){case"bct":O[de].x2+=J,O[de].y2+=se;case"qct":O[de].x1+=J,O[de].y1+=se;case"mt":case"lt":case"arc":default:O[de].x+=J,O[de].y+=se}return O},Y=function(O){return O.sort(function(J,se){return J-se})},ke=function(O,J){for(var se,de,_e=this.fillStyle,he=this.strokeStyle,we=this.lineCap,Ee=this.lineWidth,Ve=Math.abs(Ee*this.ctx.transform.scaleX),tt=this.lineJoin,ne=JSON.parse(JSON.stringify(this.path)),fe=JSON.parse(JSON.stringify(this.path)),De=[],Be=0;Be<fe.length;Be++)if(fe[Be].x!==void 0)for(var ce=$.call(this,fe[Be]),Ge=0;Ge<ce.length;Ge+=1)De.indexOf(ce[Ge])===-1&&De.push(ce[Ge]);for(var it=0;it<De.length;it++)for(;this.pdf.internal.getNumberOfPages()<De[it];)j.call(this);if(Y(De),this.autoPaging)for(var Qe=De[0],lt=De[De.length-1],Oe=Qe;Oe<lt+1;Oe++){this.pdf.setPage(Oe),this.fillStyle=_e,this.strokeStyle=he,this.lineCap=we,this.lineWidth=Ve,this.lineJoin=tt;var Pe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ot=Oe===1?this.posY+this.margin[0]:this.margin[0],_t=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ct=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ze=Oe===1?0:_t+(Oe-2)*Ct;if(this.ctx.clip_path.length!==0){var Ot=this.path;se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=G(se,this.posX+this.margin[3],-ze+ot+this.ctx.prevPageLastElemOffset),Ce.call(this,O,!0),this.path=Ot}if(de=JSON.parse(JSON.stringify(ne)),this.path=G(de,this.posX+this.margin[3],-ze+ot+this.ctx.prevPageLastElemOffset),J===!1||Oe===0){var Nt=(Oe>Qe||Oe<lt)&&R.call(this);Nt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Pe,Ct,null).clip().discardPath()),Ce.call(this,O,J),Nt&&this.pdf.restoreGraphicsState()}this.lineWidth=Ee}else this.lineWidth=Ve,Ce.call(this,O,J),this.lineWidth=Ee;this.path=ne},Ce=function(O,J){if((O!=="stroke"||J||!F.call(this))&&(O==="stroke"||J||!C.call(this))){for(var se,de,_e=[],he=this.path,we=0;we<he.length;we++){var Ee=he[we];switch(Ee.type){case"begin":_e.push({begin:!0});break;case"close":_e.push({close:!0});break;case"mt":_e.push({start:Ee,deltas:[],abs:[]});break;case"lt":var Ve=_e.length;if(he[we-1]&&!isNaN(he[we-1].x)&&(se=[Ee.x-he[we-1].x,Ee.y-he[we-1].y],Ve>0)){for(;Ve>=0;Ve--)if(_e[Ve-1].close!==!0&&_e[Ve-1].begin!==!0){_e[Ve-1].deltas.push(se),_e[Ve-1].abs.push(Ee);break}}break;case"bct":se=[Ee.x1-he[we-1].x,Ee.y1-he[we-1].y,Ee.x2-he[we-1].x,Ee.y2-he[we-1].y,Ee.x-he[we-1].x,Ee.y-he[we-1].y],_e[_e.length-1].deltas.push(se);break;case"qct":var tt=he[we-1].x+2/3*(Ee.x1-he[we-1].x),ne=he[we-1].y+2/3*(Ee.y1-he[we-1].y),fe=Ee.x+2/3*(Ee.x1-Ee.x),De=Ee.y+2/3*(Ee.y1-Ee.y),Be=Ee.x,ce=Ee.y;se=[tt-he[we-1].x,ne-he[we-1].y,fe-he[we-1].x,De-he[we-1].y,Be-he[we-1].x,ce-he[we-1].y],_e[_e.length-1].deltas.push(se);break;case"arc":_e.push({deltas:[],abs:[],arc:!0}),Array.isArray(_e[_e.length-1].abs)&&_e[_e.length-1].abs.push(Ee)}}de=J?null:O==="stroke"?"stroke":"fill";for(var Ge=!1,it=0;it<_e.length;it++)if(_e[it].arc)for(var Qe=_e[it].abs,lt=0;lt<Qe.length;lt++){var Oe=Qe[lt];Oe.type==="arc"?re.call(this,Oe.x,Oe.y,Oe.radius,Oe.startAngle,Oe.endAngle,Oe.counterclockwise,void 0,J,!Ge):N.call(this,Oe.x,Oe.y),Ge=!0}else if(_e[it].close===!0)this.pdf.internal.out("h"),Ge=!1;else if(_e[it].begin!==!0){var Pe=_e[it].start.x,ot=_e[it].start.y;te.call(this,_e[it].deltas,Pe,ot),Ge=!0}de&&Ie.call(this,de),J&&Je.call(this)}},be=function(O){var J=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,se=J*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return O-se;case"top":return O+J-se;case"hanging":return O+J-2*se;case"middle":return O+J/2-se;case"ideographic":return O;case"alphabetic":default:return O}},ie=function(O){return O+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};w.prototype.createLinearGradient=function(){var O=function(){};return O.colorStops=[],O.addColorStop=function(J,se){this.colorStops.push([J,se])},O.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},O.isCanvasGradient=!0,O},w.prototype.createPattern=function(){return this.createLinearGradient()},w.prototype.createRadialGradient=function(){return this.createLinearGradient()};var re=function(O,J,se,de,_e,he,we,Ee,Ve){for(var tt=H.call(this,se,de,_e,he),ne=0;ne<tt.length;ne++){var fe=tt[ne];ne===0&&(Ve?V.call(this,fe.x1+O,fe.y1+J):N.call(this,fe.x1+O,fe.y1+J)),W.call(this,O,J,fe.x2,fe.y2,fe.x3,fe.y3,fe.x4,fe.y4)}Ee?Je.call(this):Ie.call(this,we)},Ie=function(O){switch(O){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Je=function(){this.pdf.clip(),this.pdf.discardPath()},V=function(O,J){this.pdf.internal.out(n(O)+" "+i(J)+" m")},X=function(O){var J;switch(O.align){case"right":case"end":J="right";break;case"center":J="center";break;case"left":case"start":default:J="left"}var se=this.pdf.getTextDimensions(O.text),de=be.call(this,O.y),_e=ie.call(this,de)-se.h,he=this.ctx.transform.applyToPoint(new u(O.x,de)),we=this.ctx.transform.decompose(),Ee=new m;Ee=(Ee=(Ee=Ee.multiply(we.translate)).multiply(we.skew)).multiply(we.scale);for(var Ve,tt,ne,fe=this.ctx.transform.applyToRectangle(new d(O.x,de,se.w,se.h)),De=Ee.applyToRectangle(new d(O.x,_e,se.w,se.h)),Be=$.call(this,De),ce=[],Ge=0;Ge<Be.length;Ge+=1)ce.indexOf(Be[Ge])===-1&&ce.push(Be[Ge]);if(Y(ce),this.autoPaging)for(var it=ce[0],Qe=ce[ce.length-1],lt=it;lt<Qe+1;lt++){this.pdf.setPage(lt);var Oe=lt===1?this.posY+this.margin[0]:this.margin[0],Pe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ot=this.pdf.internal.pageSize.height-this.margin[2],_t=ot-this.margin[0],Ct=this.pdf.internal.pageSize.width-this.margin[1],ze=Ct-this.margin[3],Ot=lt===1?0:Pe+(lt-2)*_t;if(this.ctx.clip_path.length!==0){var Nt=this.path;Ve=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=G(Ve,this.posX+this.margin[3],-1*Ot+Oe),Ce.call(this,"fill",!0),this.path=Nt}var Ut=G([JSON.parse(JSON.stringify(De))],this.posX+this.margin[3],-Ot+Oe+this.ctx.prevPageLastElemOffset)[0];O.scale>=.01&&(tt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(tt*O.scale),ne=this.lineWidth,this.lineWidth=ne*O.scale);var Ht=this.autoPaging!=="text";if(Ht||Ut.y+Ut.h<=ot){if(Ht||Ut.y>=Oe&&Ut.x<=Ct){var Dt=Ht?O.text:this.pdf.splitTextToSize(O.text,O.maxWidth||Ct-Ut.x)[0],Pn=G([JSON.parse(JSON.stringify(fe))],this.posX+this.margin[3],-Ot+Oe+this.ctx.prevPageLastElemOffset)[0],en=Ht&&(lt>it||lt<Qe)&&R.call(this);en&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ze,_t,null).clip().discardPath()),this.pdf.text(Dt,Pn.x,Pn.y,{angle:O.angle,align:J,renderingMode:O.renderingMode}),en&&this.pdf.restoreGraphicsState()}}else Ut.y<ot&&(this.ctx.prevPageLastElemOffset+=ot-Ut.y);O.scale>=.01&&(this.pdf.setFontSize(tt),this.lineWidth=ne)}else O.scale>=.01&&(tt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(tt*O.scale),ne=this.lineWidth,this.lineWidth=ne*O.scale),this.pdf.text(O.text,he.x+this.posX,he.y+this.posY,{angle:O.angle,align:J,renderingMode:O.renderingMode,maxWidth:O.maxWidth}),O.scale>=.01&&(this.pdf.setFontSize(tt),this.lineWidth=ne)},N=function(O,J,se,de){se=se||0,de=de||0,this.pdf.internal.out(n(O+se)+" "+i(J+de)+" l")},te=function(O,J,se){return this.pdf.lines(O,J,se,null,null)},W=function(O,J,se,de,_e,he,we,Ee){this.pdf.internal.out([t(o(se+O)),t(a(de+J)),t(o(_e+O)),t(a(he+J)),t(o(we+O)),t(a(Ee+J)),"c"].join(" "))},H=function(O,J,se,de){for(var _e=2*Math.PI,he=Math.PI/2;J>se;)J-=_e;var we=Math.abs(se-J);we<_e&&de&&(we=_e-we);for(var Ee=[],Ve=de?-1:1,tt=J;we>1e-5;){var ne=tt+Ve*Math.min(we,he);Ee.push(me.call(this,O,tt,ne)),we-=Math.abs(ne-tt),tt=ne}return Ee},me=function(O,J,se){var de=(se-J)/2,_e=O*Math.cos(de),he=O*Math.sin(de),we=_e,Ee=-he,Ve=we*we+Ee*Ee,tt=Ve+we*_e+Ee*he,ne=4/3*(Math.sqrt(2*Ve*tt)-tt)/(we*he-Ee*_e),fe=we-ne*Ee,De=Ee+ne*we,Be=fe,ce=-De,Ge=de+J,it=Math.cos(Ge),Qe=Math.sin(Ge);return{x1:O*Math.cos(J),y1:O*Math.sin(J),x2:fe*it-De*Qe,y2:fe*Qe+De*it,x3:Be*it-ce*Qe,y3:Be*Qe+ce*it,x4:O*Math.cos(se),y4:O*Math.sin(se)}},U=function(O){return 180*O/Math.PI},I=function(O,J,se,de,_e,he){var we=O+.5*(se-O),Ee=J+.5*(de-J),Ve=_e+.5*(se-_e),tt=he+.5*(de-he),ne=Math.min(O,_e,we,Ve),fe=Math.max(O,_e,we,Ve),De=Math.min(J,he,Ee,tt),Be=Math.max(J,he,Ee,tt);return new d(ne,De,fe-ne,Be-De)},Q=function(O,J,se,de,_e,he,we,Ee){var Ve,tt,ne,fe,De,Be,ce,Ge,it,Qe,lt,Oe,Pe,ot,_t=se-O,Ct=de-J,ze=_e-se,Ot=he-de,Nt=we-_e,Ut=Ee-he;for(tt=0;tt<41;tt++)it=(ce=(ne=O+(Ve=tt/40)*_t)+Ve*((De=se+Ve*ze)-ne))+Ve*(De+Ve*(_e+Ve*Nt-De)-ce),Qe=(Ge=(fe=J+Ve*Ct)+Ve*((Be=de+Ve*Ot)-fe))+Ve*(Be+Ve*(he+Ve*Ut-Be)-Ge),tt==0?(lt=it,Oe=Qe,Pe=it,ot=Qe):(lt=Math.min(lt,it),Oe=Math.min(Oe,Qe),Pe=Math.max(Pe,it),ot=Math.max(ot,Qe));return new d(Math.round(lt),Math.round(Oe),Math.round(Pe-lt),Math.round(ot-Oe))},Re=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var O,J,se=(O=this.ctx.lineDash,J=this.ctx.lineDashOffset,JSON.stringify({lineDash:O,lineDashOffset:J}));this.prevLineDash!==se&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=se)}}})(mn.API),function(e){var t=function(a){var u,d,m,_,b,w,S,C,F,R;for(d=[],m=0,_=(a+=u="\0\0\0\0".slice(a.length%4||4)).length;_>m;m+=4)(b=(a.charCodeAt(m)<<24)+(a.charCodeAt(m+1)<<16)+(a.charCodeAt(m+2)<<8)+a.charCodeAt(m+3))!==0?(w=(b=((b=((b=((b=(b-(R=b%85))/85)-(F=b%85))/85)-(C=b%85))/85)-(S=b%85))/85)%85,d.push(w+33,S+33,C+33,F+33,R+33)):d.push(122);return function($,j){for(var G=j;G>0;G--)$.pop()}(d,u.length),String.fromCharCode.apply(String,d)+"~>"},n=function(a){var u,d,m,_,b,w=String,S="length",C=255,F="charCodeAt",R="slice",$="replace";for(a[R](-2),a=a[R](0,-2)[$](/\s/g,"")[$]("z","!!!!!"),m=[],_=0,b=(a+=u="uuuuu"[R](a[S]%5||5))[S];b>_;_+=5)d=52200625*(a[F](_)-33)+614125*(a[F](_+1)-33)+7225*(a[F](_+2)-33)+85*(a[F](_+3)-33)+(a[F](_+4)-33),m.push(C&d>>24,C&d>>16,C&d>>8,C&d);return function(j,G){for(var Y=G;Y>0;Y--)j.pop()}(m,u[S]),w.fromCharCode.apply(w,m)},i=function(a){var u=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),u.test(a)===!1)return"";for(var d="",m=0;m<a.length;m+=2)d+=String.fromCharCode("0x"+(a[m]+a[m+1]));return d},o=function(a){for(var u=new Uint8Array(a.length),d=a.length;d--;)u[d]=a.charCodeAt(d);return a=(u=ad(u)).reduce(function(m,_){return m+String.fromCharCode(_)},"")};e.processDataByFilters=function(a,u){var d=0,m=a||"",_=[];for(typeof(u=u||[])=="string"&&(u=[u]),d=0;d<u.length;d+=1)switch(u[d]){case"ASCII85Decode":case"/ASCII85Decode":m=n(m),_.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":m=t(m),_.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":m=i(m),_.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":m=m.split("").map(function(b){return("0"+b.charCodeAt().toString(16)).slice(-2)}).join("")+">",_.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":m=o(m),_.push("/FlateDecode");break;default:throw new Error('The filter: "'+u[d]+'" is not implemented')}return{data:m,reverseChain:_.reverse().join(" ")}}}(mn.API),function(e){e.loadFile=function(t,n,i){return function(o,a,u){a=a!==!1,u=typeof u=="function"?u:function(){};var d=void 0;try{d=function(m,_,b){var w=new XMLHttpRequest,S=0,C=function(F){var R=F.length,$=[],j=String.fromCharCode;for(S=0;S<R;S+=1)$.push(j(255&F.charCodeAt(S)));return $.join("")};if(w.open("GET",m,!_),w.overrideMimeType("text/plain; charset=x-user-defined"),_===!1&&(w.onload=function(){w.status===200?b(C(this.responseText)):b(void 0)}),w.send(null),_&&w.status===200)return C(w.responseText)}(o,a,u)}catch{}return d}(t,n,i)},e.loadImageFile=e.loadFile}(mn.API),function(e){function t(){return(vn.html2canvas?Promise.resolve(vn.html2canvas):Ul(()=>import("./html2canvas.esm.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load html2canvas: "+u))}).then(function(u){return u.default?u.default:u})}function n(){return(vn.DOMPurify?Promise.resolve(vn.DOMPurify):Ul(()=>import("./purify.es.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load dompurify: "+u))}).then(function(u){return u.default?u.default:u})}var i=function(u){var d=or(u);return d==="undefined"?"undefined":d==="string"||u instanceof String?"string":d==="number"||u instanceof Number?"number":d==="function"||u instanceof Function?"function":u&&u.constructor===Array?"array":u&&u.nodeType===1?"element":d==="object"?"object":"unknown"},o=function(u,d){var m=document.createElement(u);for(var _ in d.className&&(m.className=d.className),d.innerHTML&&d.dompurify&&(m.innerHTML=d.dompurify.sanitize(d.innerHTML)),d.style)m.style[_]=d.style[_];return m},a=function u(d){var m=Object.assign(u.convert(Promise.resolve()),JSON.parse(JSON.stringify(u.template))),_=u.convert(Promise.resolve(),m);return _=(_=_.setProgress(1,u,1,[u])).set(d)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(u,d){return u.__proto__=d||a.prototype,u},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(u,d){return this.then(function(){switch(d=d||function(m){switch(i(m)){case"string":return"string";case"element":return m.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(u)){case"string":return this.then(n).then(function(m){return this.set({src:o("div",{innerHTML:u,dompurify:m})})});case"element":return this.set({src:u});case"canvas":return this.set({canvas:u});case"img":return this.set({img:u});default:return this.error("Unknown source type.")}})},a.prototype.to=function(u){switch(u){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var u={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},d=function m(_,b){for(var w=_.nodeType===3?document.createTextNode(_.nodeValue):_.cloneNode(!1),S=_.firstChild;S;S=S.nextSibling)b!==!0&&S.nodeType===1&&S.nodeName==="SCRIPT"||w.appendChild(m(S,b));return _.nodeType===1&&(_.nodeName==="CANVAS"?(w.width=_.width,w.height=_.height,w.getContext("2d").drawImage(_,0,0)):_.nodeName!=="TEXTAREA"&&_.nodeName!=="SELECT"||(w.value=_.value),w.addEventListener("load",function(){w.scrollTop=_.scrollTop,w.scrollLeft=_.scrollLeft},!0)),w}(this.prop.src,this.opt.html2canvas.javascriptEnabled);d.tagName==="BODY"&&(u.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:u}),this.prop.container.appendChild(d),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(t).then(function(d){var m=Object.assign({},this.opt.html2canvas);return delete m.onrendered,d(this.prop.container,m)}).then(function(d){(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(t).then(function(d){var m=this.opt.jsPDF,_=this.opt.fontFaces,b=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,w=Object.assign({async:!0,allowTaint:!0,scale:b,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete w.onrendered,m.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,m.context2d.posX=this.opt.x,m.context2d.posY=this.opt.y,m.context2d.margin=this.opt.margin,m.context2d.fontFaces=_,_)for(var S=0;S<_.length;++S){var C=_[S],F=C.src.find(function(R){return R.format==="truetype"});F&&m.addFont(F.url,C.ref.name,C.ref.style)}return w.windowHeight=w.windowHeight||0,w.windowHeight=w.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):w.windowHeight,m.context2d.save(!0),d(this.prop.container,w)}).then(function(d){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var u=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=u})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(u,d,m){return(m=m||"pdf").toLowerCase()==="img"||m.toLowerCase()==="image"?this.outputImg(u,d):this.outputPdf(u,d)},a.prototype.outputPdf=function(u,d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(u,d)})},a.prototype.outputImg=function(u){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(u){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+u+'" is not supported.'}})},a.prototype.save=function(u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(u?{filename:u}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(u){if(i(u)!=="object")return this;var d=Object.keys(u||{}).map(function(m){if(m in a.template.prop)return function(){this.prop[m]=u[m]};switch(m){case"margin":return this.setMargin.bind(this,u.margin);case"jsPDF":return function(){return this.opt.jsPDF=u.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,u.pageSize);default:return function(){this.opt[m]=u[m]}}},this);return this.then(function(){return this.thenList(d)})},a.prototype.get=function(u,d){return this.then(function(){var m=u in a.template.prop?this.prop[u]:this.opt[u];return d?d(m):m})},a.prototype.setMargin=function(u){return this.then(function(){switch(i(u)){case"number":u=[u,u,u,u];case"array":if(u.length===2&&(u=[u[0],u[1],u[0],u[1]]),u.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=u}).then(this.setPageSize)},a.prototype.setPageSize=function(u){function d(m,_){return Math.floor(m*_/72*96)}return this.then(function(){(u=u||mn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(u.inner={width:u.width-this.opt.margin[1]-this.opt.margin[3],height:u.height-this.opt.margin[0]-this.opt.margin[2]},u.inner.px={width:d(u.inner.width,u.k),height:d(u.inner.height,u.k)},u.inner.ratio=u.inner.height/u.inner.width),this.prop.pageSize=u})},a.prototype.setProgress=function(u,d,m,_){return u!=null&&(this.progress.val=u),d!=null&&(this.progress.state=d),m!=null&&(this.progress.n=m),_!=null&&(this.progress.stack=_),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(u,d,m,_){return this.setProgress(u?this.progress.val+u:null,d||null,m?this.progress.n+m:null,_?this.progress.stack.concat(_):null)},a.prototype.then=function(u,d){var m=this;return this.thenCore(u,d,function(_,b){return m.updateProgress(null,null,1,[_]),Promise.prototype.then.call(this,function(w){return m.updateProgress(null,_),w}).then(_,b).then(function(w){return m.updateProgress(1),w})})},a.prototype.thenCore=function(u,d,m){m=m||Promise.prototype.then,u&&(u=u.bind(this)),d&&(d=d.bind(this));var _=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),b=m.call(_,u,d);return a.convert(b,this.__proto__)},a.prototype.thenExternal=function(u,d){return Promise.prototype.then.call(this,u,d)},a.prototype.thenList=function(u){var d=this;return u.forEach(function(m){d=d.thenCore(m)}),d},a.prototype.catch=function(u){u&&(u=u.bind(this));var d=Promise.prototype.catch.call(this,u);return a.convert(d,this)},a.prototype.catchExternal=function(u){return Promise.prototype.catch.call(this,u)},a.prototype.error=function(u){return this.then(function(){throw new Error(u)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,mn.getPageSize=function(u,d,m){if(or(u)==="object"){var _=u;u=_.orientation,d=_.unit||d,m=_.format||m}d=d||"mm",m=m||"a4",u=(""+(u||"P")).toLowerCase();var b,w=(""+m).toLowerCase(),S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(d){case"pt":b=1;break;case"mm":b=72/25.4;break;case"cm":b=72/2.54;break;case"in":b=72;break;case"px":b=.75;break;case"pc":case"em":b=12;break;case"ex":b=6;break;default:throw"Invalid unit: "+d}var C,F=0,R=0;if(S.hasOwnProperty(w))F=S[w][1]/b,R=S[w][0]/b;else try{F=m[1],R=m[0]}catch{throw new Error("Invalid format: "+m)}if(u==="p"||u==="portrait")u="p",R>F&&(C=R,R=F,F=C);else{if(u!=="l"&&u!=="landscape")throw"Invalid orientation: "+u;u="l",F>R&&(C=R,R=F,F=C)}return{width:R,height:F,unit:d,k:b,orientation:u}},e.html=function(u,d){(d=d||{}).callback=d.callback||function(){},d.html2canvas=d.html2canvas||{},d.html2canvas.canvas=d.html2canvas.canvas||this.canvas,d.jsPDF=d.jsPDF||this,d.fontFaces=d.fontFaces?d.fontFaces.map(dd):null;var m=new a(d);return d.worker?m:m.from(u).doCallback()}}(mn.API),mn.API.addJS=function(e){return U0=e,this.internal.events.subscribe("postPutResources",function(){jc=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(jc+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),z0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+U0+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){jc!==void 0&&z0!==void 0&&this.internal.out("/Names <</JavaScript "+jc+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=n.outline.render().split(/\r\n/),a=0;a<o.length;a++){var u=o[a],d=i.exec(u);if(d!=null){var m=d[1];n.internal.newObjectDeferredBegin(m,!1)}n.internal.write(u)}if(this.outline.createNamedDestinations){var _=this.internal.pages.length,b=[];for(a=0;a<_;a++){var w=n.internal.newObject();b.push(w);var S=n.internal.getPageInfo(a+1);n.internal.write("<< /D["+S.objId+" 0 R /XYZ null null null]>> endobj")}var C=n.internal.newObject();for(n.internal.write("<< /Names [ "),a=0;a<b.length;a++)n.internal.write("(page_"+(a+1)+")"+b[a]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+C+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(i,o,a){var u={title:o,options:a,children:[]};return i==null&&(i=this.root),i.children.push(u),u},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(i){i.id=n.internal.newObjectDeferred();for(var o=0;o<i.children.length;o++)this.genIds_r(i.children[o])},n.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},n.outline.renderItems=function(i){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<i.children.length;a++){var u=i.children[a];this.objStart(u),this.line("/Title "+this.makeString(u.title)),this.line("/Parent "+this.makeRef(i)),a>0&&this.line("/Prev "+this.makeRef(i.children[a-1])),a<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[a+1])),u.children.length>0&&(this.line("/First "+this.makeRef(u.children[0])),this.line("/Last "+this.makeRef(u.children[u.children.length-1])));var d=this.count=this.count_r({count:0},u);if(d>0&&this.line("/Count "+d),u.options&&u.options.pageNumber){var m=n.internal.getPageInfo(u.options.pageNumber);this.line("/Dest ["+m.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var _=0;_<i.children.length;_++)this.renderItems(i.children[_])},n.outline.line=function(i){this.ctx.val+=i+`\r
`},n.outline.makeRef=function(i){return i.id+" 0 R"},n.outline.makeString=function(i){return"("+n.internal.pdfEscape(i)+")"},n.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(i,o){for(var a=0;a<o.children.length;a++)i.count++,this.count_r(i,o.children[a]);return i.count}}])}(mn.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,i,o,a,u,d){var m,_=this.decode.DCT_DECODE,b=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=u||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(m=function(w){for(var S,C=256*w.charCodeAt(4)+w.charCodeAt(5),F=w.length,R={width:0,height:0,numcomponents:1},$=4;$<F;$+=2){if($+=C,t.indexOf(w.charCodeAt($+1))!==-1){S=256*w.charCodeAt($+5)+w.charCodeAt($+6),R={width:256*w.charCodeAt($+7)+w.charCodeAt($+8),height:S,numcomponents:w.charCodeAt($+9)};break}C=256*w.charCodeAt($+2)+w.charCodeAt($+3)}return R}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:d=this.color_spaces.DEVICE_GRAY;break;case 4:d=this.color_spaces.DEVICE_CMYK;break;case 3:d=this.color_spaces.DEVICE_RGB}b={data:n,width:m.width,height:m.height,colorSpace:d,bitsPerComponent:8,filter:_,index:i,alias:o}}return b}}(mn.API);var cu,zc,q0,$0,V0,Kx=function(){var e,t,n;function i(a){var u,d,m,_,b,w,S,C,F,R,$,j,G,Y;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},w=null;;){switch(u=this.readUInt32(),F=(function(){var ke,Ce;for(Ce=[],ke=0;ke<4;++ke)Ce.push(String.fromCharCode(this.data[this.pos++]));return Ce}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(u);break;case"fcTL":w&&this.animation.frames.push(w),this.pos+=4,w={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},b=this.readUInt16(),_=this.readUInt16()||100,w.delay=1e3*b/_,w.disposeOp=this.data[this.pos++],w.blendOp=this.data[this.pos++],w.data=[];break;case"IDAT":case"fdAT":for(F==="fdAT"&&(this.pos+=4,u-=4),a=(w!=null?w.data:void 0)||this.imgData,j=0;0<=u?j<u:j>u;0<=u?++j:--j)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(m=this.palette.length/3,this.transparency.indexed=this.read(u),this.transparency.indexed.length>m)throw new Error("More transparent colors than palette size");if((R=m-this.transparency.indexed.length)>0)for(G=0;0<=R?G<R:G>R;0<=R?++G:--G)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(u)[0];break;case 2:this.transparency.rgb=this.read(u)}break;case"tEXt":S=($=this.read(u)).indexOf(0),C=String.fromCharCode.apply(String,$.slice(0,S)),this.text[C]=String.fromCharCode.apply(String,$.slice(S+1));break;case"IEND":return w&&this.animation.frames.push(w),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(Y=this.colorType)===4||Y===6,d=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*d,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=u}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(a){var u,d;for(d=[],u=0;0<=a?u<a:u>a;0<=a?++u:--u)d.push(this.data[this.pos++]);return d},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(a){var u=this.pixelBitlength/8,d=new Uint8Array(this.width*this.height*u),m=0,_=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function b(w,S,C,F){var R,$,j,G,Y,ke,Ce,be,ie,re,Ie,Je,V,X,N,te,W,H,me,U,I,Q=Math.ceil((_.width-w)/C),Re=Math.ceil((_.height-S)/F),O=_.width==Q&&_.height==Re;for(X=u*Q,Je=O?d:new Uint8Array(X*Re),ke=a.length,V=0,$=0;V<Re&&m<ke;){switch(a[m++]){case 0:for(G=W=0;W<X;G=W+=1)Je[$++]=a[m++];break;case 1:for(G=H=0;H<X;G=H+=1)R=a[m++],Y=G<u?0:Je[$-u],Je[$++]=(R+Y)%256;break;case 2:for(G=me=0;me<X;G=me+=1)R=a[m++],j=(G-G%u)/u,N=V&&Je[(V-1)*X+j*u+G%u],Je[$++]=(N+R)%256;break;case 3:for(G=U=0;U<X;G=U+=1)R=a[m++],j=(G-G%u)/u,Y=G<u?0:Je[$-u],N=V&&Je[(V-1)*X+j*u+G%u],Je[$++]=(R+Math.floor((Y+N)/2))%256;break;case 4:for(G=I=0;I<X;G=I+=1)R=a[m++],j=(G-G%u)/u,Y=G<u?0:Je[$-u],V===0?N=te=0:(N=Je[(V-1)*X+j*u+G%u],te=j&&Je[(V-1)*X+(j-1)*u+G%u]),Ce=Y+N-te,be=Math.abs(Ce-Y),re=Math.abs(Ce-N),Ie=Math.abs(Ce-te),ie=be<=re&&be<=Ie?Y:re<=Ie?N:te,Je[$++]=(R+ie)%256;break;default:throw new Error("Invalid filter algorithm: "+a[m-1])}if(!O){var J=((S+V*F)*_.width+w)*u,se=V*X;for(G=0;G<Q;G+=1){for(var de=0;de<u;de+=1)d[J++]=Je[se++];J+=(C-1)*u}}V++}}return a=Ex(a),_.interlaceMethod==1?(b(0,0,8,8),b(4,0,8,8),b(0,4,4,8),b(2,0,4,4),b(0,2,2,4),b(1,0,2,2),b(0,1,1,2)):b(0,0,1,1),d},i.prototype.decodePalette=function(){var a,u,d,m,_,b,w,S,C;for(d=this.palette,b=this.transparency.indexed||[],_=new Uint8Array((b.length||0)+d.length),m=0,a=0,u=w=0,S=d.length;w<S;u=w+=3)_[m++]=d[u],_[m++]=d[u+1],_[m++]=d[u+2],_[m++]=(C=b[a++])!=null?C:255;return _},i.prototype.copyToImageData=function(a,u){var d,m,_,b,w,S,C,F,R,$,j;if(m=this.colors,R=null,d=this.hasAlphaChannel,this.palette.length&&(R=(j=this._decodedPalette)!=null?j:this._decodedPalette=this.decodePalette(),m=4,d=!0),F=(_=a.data||a).length,w=R||u,b=S=0,m===1)for(;b<F;)C=R?4*u[b/4]:S,$=w[C++],_[b++]=$,_[b++]=$,_[b++]=$,_[b++]=d?w[C++]:255,S=C;else for(;b<F;)C=R?4*u[b/4]:S,_[b++]=w[C++],_[b++]=w[C++],_[b++]=w[C++],_[b++]=d?w[C++]:255,S=C},i.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var o=function(){if(Object.prototype.toString.call(vn)==="[object Window]"){try{t=vn.document.createElement("canvas"),n=t.getContext("2d")}catch{return!1}return!0}return!1};return o(),e=function(a){var u;if(o()===!0)return n.width=a.width,n.height=a.height,n.clearRect(0,0,a.width,a.height),n.putImageData(a,0,0),(u=new Image).src=t.toDataURL(),u;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(a){var u,d,m,_,b,w,S,C;if(this.animation){for(C=[],d=b=0,w=(S=this.animation.frames).length;b<w;d=++b)u=S[d],m=a.createImageData(u.width,u.height),_=this.decodePixels(new Uint8Array(u.data)),this.copyToImageData(m,_),u.imageData=m,C.push(u.image=e(m));return C}},i.prototype.renderFrame=function(a,u){var d,m,_;return d=(m=this.animation.frames)[u],_=m[u-1],u===0&&a.clearRect(0,0,this.width,this.height),(_!=null?_.disposeOp:void 0)===1?a.clearRect(_.xOffset,_.yOffset,_.width,_.height):(_!=null?_.disposeOp:void 0)===2&&a.putImageData(_.imageData,_.xOffset,_.yOffset),d.blendOp===0&&a.clearRect(d.xOffset,d.yOffset,d.width,d.height),a.drawImage(d.image,d.xOffset,d.yOffset)},i.prototype.animate=function(a){var u,d,m,_,b,w,S=this;return d=0,w=this.animation,_=w.numFrames,m=w.frames,b=w.numPlays,(u=function(){var C,F;if(C=d++%_,F=m[C],S.renderFrame(a,C),_>1&&d/_<b)return S.animation._timeout=setTimeout(u,F.delay)})()},i.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},i.prototype.render=function(a){var u,d;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,u=a.getContext("2d"),this.animation?(this.decodeFrames(u),this.animate(u)):(d=u.createImageData(this.width,this.height),this.copyToImageData(d,this.decodePixels()),u.putImageData(d,0,0))},i}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Jx(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,i=e[t++]|e[t++]<<8,o=e[t++],a=o>>7,u=1<<(7&o)+1;e[t++],e[t++];var d=null,m=null;a&&(d=t,m=u,t+=3*u);var _=!0,b=[],w=0,S=null,C=0,F=null;for(this.width=n,this.height=i;_&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,F=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((V=e[t++])>=0))throw Error("Invalid block size");if(V===0)break;t+=V}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var R=e[t++];w=e[t++]|e[t++]<<8,S=e[t++],!(1&R)&&(S=null),C=R>>2&7,t++;break;case 254:for(;;){if(!((V=e[t++])>=0))throw Error("Invalid block size");if(V===0)break;t+=V}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var $=e[t++]|e[t++]<<8,j=e[t++]|e[t++]<<8,G=e[t++]|e[t++]<<8,Y=e[t++]|e[t++]<<8,ke=e[t++],Ce=ke>>6&1,be=1<<(7&ke)+1,ie=d,re=m,Ie=!1;ke>>7&&(Ie=!0,ie=t,re=be,t+=3*be);var Je=t;for(t++;;){var V;if(!((V=e[t++])>=0))throw Error("Invalid block size");if(V===0)break;t+=V}b.push({x:$,y:j,width:G,height:Y,has_local_palette:Ie,palette_offset:ie,palette_size:re,data_offset:Je,data_length:t-Je,transparent_index:S,interlaced:!!Ce,delay:w,disposal:C});break;case 59:_=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return b.length},this.loopCount=function(){return F},this.frameInfo=function(X){if(X<0||X>=b.length)throw new Error("Frame index out of range.");return b[X]},this.decodeAndBlitFrameBGRA=function(X,N){var te=this.frameInfo(X),W=te.width*te.height,H=new Uint8Array(W);G0(e,te.data_offset,H,W);var me=te.palette_offset,U=te.transparent_index;U===null&&(U=256);var I=te.width,Q=n-I,Re=I,O=4*(te.y*n+te.x),J=4*((te.y+te.height)*n+te.x),se=O,de=4*Q;te.interlaced===!0&&(de+=4*n*7);for(var _e=8,he=0,we=H.length;he<we;++he){var Ee=H[he];if(Re===0&&(Re=I,(se+=de)>=J&&(de=4*Q+4*n*(_e-1),se=O+(I+Q)*(_e<<1),_e>>=1)),Ee===U)se+=4;else{var Ve=e[me+3*Ee],tt=e[me+3*Ee+1],ne=e[me+3*Ee+2];N[se++]=ne,N[se++]=tt,N[se++]=Ve,N[se++]=255}--Re}},this.decodeAndBlitFrameRGBA=function(X,N){var te=this.frameInfo(X),W=te.width*te.height,H=new Uint8Array(W);G0(e,te.data_offset,H,W);var me=te.palette_offset,U=te.transparent_index;U===null&&(U=256);var I=te.width,Q=n-I,Re=I,O=4*(te.y*n+te.x),J=4*((te.y+te.height)*n+te.x),se=O,de=4*Q;te.interlaced===!0&&(de+=4*n*7);for(var _e=8,he=0,we=H.length;he<we;++he){var Ee=H[he];if(Re===0&&(Re=I,(se+=de)>=J&&(de=4*Q+4*n*(_e-1),se=O+(I+Q)*(_e<<1),_e>>=1)),Ee===U)se+=4;else{var Ve=e[me+3*Ee],tt=e[me+3*Ee+1],ne=e[me+3*Ee+2];N[se++]=Ve,N[se++]=tt,N[se++]=ne,N[se++]=255}--Re}}}function G0(e,t,n,i){for(var o=e[t++],a=1<<o,u=a+1,d=u+1,m=o+1,_=(1<<m)-1,b=0,w=0,S=0,C=e[t++],F=new Int32Array(4096),R=null;;){for(;b<16&&C!==0;)w|=e[t++]<<b,b+=8,C===1?C=e[t++]:--C;if(b<m)break;var $=w&_;if(w>>=m,b-=m,$!==a){if($===u)break;for(var j=$<d?$:R,G=0,Y=j;Y>a;)Y=F[Y]>>8,++G;var ke=Y;if(S+G+(j!==$?1:0)>i)return void ar.log("Warning, gif stream longer than expected.");n[S++]=ke;var Ce=S+=G;for(j!==$&&(n[S++]=ke),Y=j;G--;)Y=F[Y],n[--Ce]=255&Y,Y>>=8;R!==null&&d<4096&&(F[d++]=R<<8|ke,d>=_+1&&m<12&&(++m,_=_<<1|1)),R=$}else d=u+1,_=(1<<(m=o+1))-1,R=null}return S!==i&&ar.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Af(e){var t,n,i,o,a,u=Math.floor,d=new Array(64),m=new Array(64),_=new Array(64),b=new Array(64),w=new Array(65535),S=new Array(65535),C=new Array(64),F=new Array(64),R=[],$=0,j=7,G=new Array(64),Y=new Array(64),ke=new Array(64),Ce=new Array(256),be=new Array(2048),ie=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],re=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Ie=[0,1,2,3,4,5,6,7,8,9,10,11],Je=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],V=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],X=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],N=[0,1,2,3,4,5,6,7,8,9,10,11],te=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],W=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function H(O,J){for(var se=0,de=0,_e=new Array,he=1;he<=16;he++){for(var we=1;we<=O[he];we++)_e[J[de]]=[],_e[J[de]][0]=se,_e[J[de]][1]=he,de++,se++;se*=2}return _e}function me(O){for(var J=O[0],se=O[1]-1;se>=0;)J&1<<se&&($|=1<<j),se--,--j<0&&($==255?(U(255),U(0)):U($),j=7,$=0)}function U(O){R.push(O)}function I(O){U(O>>8&255),U(255&O)}function Q(O,J,se,de,_e){for(var he,we=_e[0],Ee=_e[240],Ve=function(Qe,lt){var Oe,Pe,ot,_t,Ct,ze,Ot,Nt,Ut,Ht,Dt=0;for(Ut=0;Ut<8;++Ut){Oe=Qe[Dt],Pe=Qe[Dt+1],ot=Qe[Dt+2],_t=Qe[Dt+3],Ct=Qe[Dt+4],ze=Qe[Dt+5],Ot=Qe[Dt+6];var Pn=Oe+(Nt=Qe[Dt+7]),en=Oe-Nt,Yn=Pe+Ot,ln=Pe-Ot,xn=ot+ze,Xn=ot-ze,qt=_t+Ct,Ei=_t-Ct,In=Pn+qt,Lr=Pn-qt,Dr=Yn+xn,qn=Yn-xn;Qe[Dt]=In+Dr,Qe[Dt+4]=In-Dr;var cn=.707106781*(qn+Lr);Qe[Dt+2]=Lr+cn,Qe[Dt+6]=Lr-cn;var Yt=.382683433*((In=Ei+Xn)-(qn=ln+en)),Jt=.5411961*In+Yt,ur=1.306562965*qn+Yt,Si=.707106781*(Dr=Xn+ln),Mi=en+Si,on=en-Si;Qe[Dt+5]=on+Jt,Qe[Dt+3]=on-Jt,Qe[Dt+1]=Mi+ur,Qe[Dt+7]=Mi-ur,Dt+=8}for(Dt=0,Ut=0;Ut<8;++Ut){Oe=Qe[Dt],Pe=Qe[Dt+8],ot=Qe[Dt+16],_t=Qe[Dt+24],Ct=Qe[Dt+32],ze=Qe[Dt+40],Ot=Qe[Dt+48];var Qi=Oe+(Nt=Qe[Dt+56]),fs=Oe-Nt,li=Pe+Ot,$n=Pe-Ot,$t=ot+ze,ui=ot-ze,yo=_t+Ct,es=_t-Ct,Ai=Qi+yo,yi=Qi-yo,Bi=li+$t,Qr=li-$t;Qe[Dt]=Ai+Bi,Qe[Dt+32]=Ai-Bi;var bi=.707106781*(Qr+yi);Qe[Dt+16]=yi+bi,Qe[Dt+48]=yi-bi;var ds=.382683433*((Ai=es+ui)-(Qr=$n+fs)),bo=.5411961*Ai+ds,Go=1.306562965*Qr+ds,Ho=.707106781*(Bi=ui+$n),Bs=fs+Ho,Js=fs-Ho;Qe[Dt+40]=Js+bo,Qe[Dt+24]=Js-bo,Qe[Dt+8]=Bs+Go,Qe[Dt+56]=Bs-Go,Dt++}for(Ut=0;Ut<64;++Ut)Ht=Qe[Ut]*lt[Ut],C[Ut]=Ht>0?Ht+.5|0:Ht-.5|0;return C}(O,J),tt=0;tt<64;++tt)F[ie[tt]]=Ve[tt];var ne=F[0]-se;se=F[0],ne==0?me(de[0]):(me(de[S[he=32767+ne]]),me(w[he]));for(var fe=63;fe>0&&F[fe]==0;)fe--;if(fe==0)return me(we),se;for(var De,Be=1;Be<=fe;){for(var ce=Be;F[Be]==0&&Be<=fe;)++Be;var Ge=Be-ce;if(Ge>=16){De=Ge>>4;for(var it=1;it<=De;++it)me(Ee);Ge&=15}he=32767+F[Be],me(_e[(Ge<<4)+S[he]]),me(w[he]),Be++}return fe!=63&&me(we),se}function Re(O){O=Math.min(Math.max(O,1),100),a!=O&&(function(J){for(var se=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],de=0;de<64;de++){var _e=u((se[de]*J+50)/100);_e=Math.min(Math.max(_e,1),255),d[ie[de]]=_e}for(var he=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],we=0;we<64;we++){var Ee=u((he[we]*J+50)/100);Ee=Math.min(Math.max(Ee,1),255),m[ie[we]]=Ee}for(var Ve=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],tt=0,ne=0;ne<8;ne++)for(var fe=0;fe<8;fe++)_[tt]=1/(d[ie[tt]]*Ve[ne]*Ve[fe]*8),b[tt]=1/(m[ie[tt]]*Ve[ne]*Ve[fe]*8),tt++}(O<50?Math.floor(5e3/O):Math.floor(200-2*O)),a=O)}this.encode=function(O,J){J&&Re(J),R=new Array,$=0,j=7,I(65496),I(65504),I(16),U(74),U(70),U(73),U(70),U(0),U(1),U(1),U(0),I(1),I(1),U(0),U(0),function(){I(65499),I(132),U(0);for(var Pe=0;Pe<64;Pe++)U(d[Pe]);U(1);for(var ot=0;ot<64;ot++)U(m[ot])}(),function(Pe,ot){I(65472),I(17),U(8),I(ot),I(Pe),U(3),U(1),U(17),U(0),U(2),U(17),U(1),U(3),U(17),U(1)}(O.width,O.height),function(){I(65476),I(418),U(0);for(var Pe=0;Pe<16;Pe++)U(re[Pe+1]);for(var ot=0;ot<=11;ot++)U(Ie[ot]);U(16);for(var _t=0;_t<16;_t++)U(Je[_t+1]);for(var Ct=0;Ct<=161;Ct++)U(V[Ct]);U(1);for(var ze=0;ze<16;ze++)U(X[ze+1]);for(var Ot=0;Ot<=11;Ot++)U(N[Ot]);U(17);for(var Nt=0;Nt<16;Nt++)U(te[Nt+1]);for(var Ut=0;Ut<=161;Ut++)U(W[Ut])}(),I(65498),I(12),U(3),U(1),U(0),U(2),U(17),U(3),U(17),U(0),U(63),U(0);var se=0,de=0,_e=0;$=0,j=7,this.encode.displayName="_encode_";for(var he,we,Ee,Ve,tt,ne,fe,De,Be,ce=O.data,Ge=O.width,it=O.height,Qe=4*Ge,lt=0;lt<it;){for(he=0;he<Qe;){for(tt=Qe*lt+he,fe=-1,De=0,Be=0;Be<64;Be++)ne=tt+(De=Be>>3)*Qe+(fe=4*(7&Be)),lt+De>=it&&(ne-=Qe*(lt+1+De-it)),he+fe>=Qe&&(ne-=he+fe-Qe+4),we=ce[ne++],Ee=ce[ne++],Ve=ce[ne++],G[Be]=(be[we]+be[Ee+256>>0]+be[Ve+512>>0]>>16)-128,Y[Be]=(be[we+768>>0]+be[Ee+1024>>0]+be[Ve+1280>>0]>>16)-128,ke[Be]=(be[we+1280>>0]+be[Ee+1536>>0]+be[Ve+1792>>0]>>16)-128;se=Q(G,_,se,t,i),de=Q(Y,b,de,n,o),_e=Q(ke,b,_e,n,o),he+=32}lt+=8}if(j>=0){var Oe=[];Oe[1]=j+1,Oe[0]=(1<<j+1)-1,me(Oe)}return I(65497),new Uint8Array(R)},e=e||50,function(){for(var O=String.fromCharCode,J=0;J<256;J++)Ce[J]=O(J)}(),t=H(re,Ie),n=H(X,N),i=H(Je,V),o=H(te,W),function(){for(var O=1,J=2,se=1;se<=15;se++){for(var de=O;de<J;de++)S[32767+de]=se,w[32767+de]=[],w[32767+de][1]=se,w[32767+de][0]=de;for(var _e=-(J-1);_e<=-O;_e++)S[32767+_e]=se,w[32767+_e]=[],w[32767+_e][1]=se,w[32767+_e][0]=J-1+_e;O<<=1,J<<=1}}(),function(){for(var O=0;O<256;O++)be[O]=19595*O,be[O+256>>0]=38470*O,be[O+512>>0]=7471*O+32768,be[O+768>>0]=-11059*O,be[O+1024>>0]=-21709*O,be[O+1280>>0]=32768*O+8421375,be[O+1536>>0]=-27439*O,be[O+1792>>0]=-5329*O}(),Re(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Io(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function H0(e){function t(re){if(!re)throw Error("assert :P")}function n(re,Ie,Je){for(var V=0;4>V;V++)if(re[Ie+V]!=Je.charCodeAt(V))return!0;return!1}function i(re,Ie,Je,V,X){for(var N=0;N<X;N++)re[Ie+N]=Je[V+N]}function o(re,Ie,Je,V){for(var X=0;X<V;X++)re[Ie+X]=Je}function a(re){return new Int32Array(re)}function u(re,Ie){for(var Je=[],V=0;V<re;V++)Je.push(new Ie);return Je}function d(re,Ie){var Je=[];return function V(X,N,te){for(var W=te[N],H=0;H<W&&(X.push(te.length>N+1?[]:new Ie),!(te.length<N+1));H++)V(X[H],N+1,te)}(Je,0,re),Je}var m=function(){var re=this;function Ie(f,y){for(var E=1<<y-1>>>0;f&E;)E>>>=1;return E?(f&E-1)+E:f}function Je(f,y,E,T,K){t(!(T%E));do f[y+(T-=E)]=K;while(0<T)}function V(f,y,E,T,K){if(t(2328>=K),512>=K)var ae=a(512);else if((ae=a(K))==null)return 0;return function(ue,pe,ge,Se,He,pt){var mt,nt,Lt=pe,bt=1<<ge,Ke=a(16),Xe=a(16);for(t(He!=0),t(Se!=null),t(ue!=null),t(0<ge),nt=0;nt<He;++nt){if(15<Se[nt])return 0;++Ke[Se[nt]]}if(Ke[0]==He)return 0;for(Xe[1]=0,mt=1;15>mt;++mt){if(Ke[mt]>1<<mt)return 0;Xe[mt+1]=Xe[mt]+Ke[mt]}for(nt=0;nt<He;++nt)mt=Se[nt],0<Se[nt]&&(pt[Xe[mt]++]=nt);if(Xe[15]==1)return(Se=new X).g=0,Se.value=pt[0],Je(ue,Lt,1,bt,Se),bt;var Pt,Bt=-1,St=bt-1,Kt=0,jt=1,an=1,s=1<<ge;for(nt=0,mt=1,He=2;mt<=ge;++mt,He<<=1){if(jt+=an<<=1,0>(an-=Ke[mt]))return 0;for(;0<Ke[mt];--Ke[mt])(Se=new X).g=mt,Se.value=pt[nt++],Je(ue,Lt+Kt,He,s,Se),Kt=Ie(Kt,mt)}for(mt=ge+1,He=2;15>=mt;++mt,He<<=1){if(jt+=an<<=1,0>(an-=Ke[mt]))return 0;for(;0<Ke[mt];--Ke[mt]){if(Se=new X,(Kt&St)!=Bt){for(Lt+=s,Pt=1<<(Bt=mt)-ge;15>Bt&&!(0>=(Pt-=Ke[Bt]));)++Bt,Pt<<=1;bt+=s=1<<(Pt=Bt-ge),ue[pe+(Bt=Kt&St)].g=Pt+ge,ue[pe+Bt].value=Lt-pe-Bt}Se.g=mt-ge,Se.value=pt[nt++],Je(ue,Lt+(Kt>>ge),He,s,Se),Kt=Ie(Kt,mt)}}return jt!=2*Xe[15]-1?0:bt}(f,y,E,T,K,ae)}function X(){this.value=this.g=0}function N(){this.value=this.g=0}function te(){this.G=u(5,X),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=u(xr,N)}function W(f,y,E,T){t(f!=null),t(y!=null),t(2147483648>T),f.Ca=254,f.I=0,f.b=-8,f.Ka=0,f.oa=y,f.pa=E,f.Jd=y,f.Yc=E+T,f.Zc=4<=T?E+T-4+1:E,he(f)}function H(f,y){for(var E=0;0<y--;)E|=Ee(f,128)<<y;return E}function me(f,y){var E=H(f,y);return we(f)?-E:E}function U(f,y,E,T){var K,ae=0;for(t(f!=null),t(y!=null),t(4294967288>T),f.Sb=T,f.Ra=0,f.u=0,f.h=0,4<T&&(T=4),K=0;K<T;++K)ae+=y[E+K]<<8*K;f.Ra=ae,f.bb=T,f.oa=y,f.pa=E}function I(f){for(;8<=f.u&&f.bb<f.Sb;)f.Ra>>>=8,f.Ra+=f.oa[f.pa+f.bb]<<ri-8>>>0,++f.bb,f.u-=8;se(f)&&(f.h=1,f.u=0)}function Q(f,y){if(t(0<=y),!f.h&&y<=hi){var E=J(f)&ia[y];return f.u+=y,I(f),E}return f.h=1,f.u=0}function Re(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function O(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function J(f){return f.Ra>>>(f.u&ri-1)>>>0}function se(f){return t(f.bb<=f.Sb),f.h||f.bb==f.Sb&&f.u>ri}function de(f,y){f.u=y,f.h=se(f)}function _e(f){f.u>=sa&&(t(f.u>=sa),I(f))}function he(f){t(f!=null&&f.oa!=null),f.pa<f.Zc?(f.I=(f.oa[f.pa++]|f.I<<8)>>>0,f.b+=8):(t(f!=null&&f.oa!=null),f.pa<f.Yc?(f.b+=8,f.I=f.oa[f.pa++]|f.I<<8):f.Ka?f.b=0:(f.I<<=8,f.b+=8,f.Ka=1))}function we(f){return H(f,1)}function Ee(f,y){var E=f.Ca;0>f.b&&he(f);var T=f.b,K=E*y>>>8,ae=(f.I>>>T>K)+0;for(ae?(E-=K,f.I-=K+1<<T>>>0):E=K+1,T=E,K=0;256<=T;)K+=8,T>>=8;return T=7^K+Vr[T],f.b-=T,f.Ca=(E<<T)-1,ae}function Ve(f,y,E){f[y+0]=E>>24&255,f[y+1]=E>>16&255,f[y+2]=E>>8&255,f[y+3]=E>>0&255}function tt(f,y){return f[y+0]<<0|f[y+1]<<8}function ne(f,y){return tt(f,y)|f[y+2]<<16}function fe(f,y){return tt(f,y)|tt(f,y+2)<<16}function De(f,y){var E=1<<y;return t(f!=null),t(0<y),f.X=a(E),f.X==null?0:(f.Mb=32-y,f.Xa=y,1)}function Be(f,y){t(f!=null),t(y!=null),t(f.Xa==y.Xa),i(y.X,0,f.X,0,1<<y.Xa)}function ce(){this.X=[],this.Xa=this.Mb=0}function Ge(f,y,E,T){t(E!=null),t(T!=null);var K=E[0],ae=T[0];return K==0&&(K=(f*ae+y/2)/y),ae==0&&(ae=(y*K+f/2)/f),0>=K||0>=ae?0:(E[0]=K,T[0]=ae,1)}function it(f,y){return f+(1<<y)-1>>>y}function Qe(f,y){return((4278255360&f)+(4278255360&y)>>>0&4278255360)+((16711935&f)+(16711935&y)>>>0&16711935)>>>0}function lt(f,y){re[y]=function(E,T,K,ae,ue,pe,ge){var Se;for(Se=0;Se<ue;++Se){var He=re[f](pe[ge+Se-1],K,ae+Se);pe[ge+Se]=Qe(E[T+Se],He)}}}function Oe(){this.ud=this.hd=this.jd=0}function Pe(f,y){return((4278124286&(f^y))>>>1)+(f&y)>>>0}function ot(f){return 0<=f&&256>f?f:0>f?0:255<f?255:void 0}function _t(f,y){return ot(f+(f-y+.5>>1))}function Ct(f,y,E){return Math.abs(y-E)-Math.abs(f-E)}function ze(f,y,E,T,K,ae,ue){for(T=ae[ue-1],E=0;E<K;++E)ae[ue+E]=T=Qe(f[y+E],T)}function Ot(f,y,E,T,K){var ae;for(ae=0;ae<E;++ae){var ue=f[y+ae],pe=ue>>8&255,ge=16711935&(ge=(ge=16711935&ue)+((pe<<16)+pe));T[K+ae]=(4278255360&ue)+ge>>>0}}function Nt(f,y){y.jd=f>>0&255,y.hd=f>>8&255,y.ud=f>>16&255}function Ut(f,y,E,T,K,ae){var ue;for(ue=0;ue<T;++ue){var pe=y[E+ue],ge=pe>>>8,Se=pe,He=255&(He=(He=pe>>>16)+((f.jd<<24>>24)*(ge<<24>>24)>>>5));Se=255&(Se=(Se=Se+((f.hd<<24>>24)*(ge<<24>>24)>>>5))+((f.ud<<24>>24)*(He<<24>>24)>>>5)),K[ae+ue]=(4278255360&pe)+(He<<16)+Se}}function Ht(f,y,E,T,K){re[y]=function(ae,ue,pe,ge,Se,He,pt,mt,nt){for(ge=pt;ge<mt;++ge)for(pt=0;pt<nt;++pt)Se[He++]=K(pe[T(ae[ue++])])},re[f]=function(ae,ue,pe,ge,Se,He,pt){var mt=8>>ae.b,nt=ae.Ea,Lt=ae.K[0],bt=ae.w;if(8>mt)for(ae=(1<<ae.b)-1,bt=(1<<mt)-1;ue<pe;++ue){var Ke,Xe=0;for(Ke=0;Ke<nt;++Ke)Ke&ae||(Xe=T(ge[Se++])),He[pt++]=K(Lt[Xe&bt]),Xe>>=mt}else re["VP8LMapColor"+E](ge,Se,Lt,bt,He,pt,ue,pe,nt)}}function Dt(f,y,E,T,K){for(E=y+E;y<E;){var ae=f[y++];T[K++]=ae>>16&255,T[K++]=ae>>8&255,T[K++]=ae>>0&255}}function Pn(f,y,E,T,K){for(E=y+E;y<E;){var ae=f[y++];T[K++]=ae>>16&255,T[K++]=ae>>8&255,T[K++]=ae>>0&255,T[K++]=ae>>24&255}}function en(f,y,E,T,K){for(E=y+E;y<E;){var ae=(ue=f[y++])>>16&240|ue>>12&15,ue=ue>>0&240|ue>>28&15;T[K++]=ae,T[K++]=ue}}function Yn(f,y,E,T,K){for(E=y+E;y<E;){var ae=(ue=f[y++])>>16&248|ue>>13&7,ue=ue>>5&224|ue>>3&31;T[K++]=ae,T[K++]=ue}}function ln(f,y,E,T,K){for(E=y+E;y<E;){var ae=f[y++];T[K++]=ae>>0&255,T[K++]=ae>>8&255,T[K++]=ae>>16&255}}function xn(f,y,E,T,K,ae){if(ae==0)for(E=y+E;y<E;)Ve(T,((ae=f[y++])[0]>>24|ae[1]>>8&65280|ae[2]<<8&16711680|ae[3]<<24)>>>0),K+=32;else i(T,K,f,y,E)}function Xn(f,y){re[y][0]=re[f+"0"],re[y][1]=re[f+"1"],re[y][2]=re[f+"2"],re[y][3]=re[f+"3"],re[y][4]=re[f+"4"],re[y][5]=re[f+"5"],re[y][6]=re[f+"6"],re[y][7]=re[f+"7"],re[y][8]=re[f+"8"],re[y][9]=re[f+"9"],re[y][10]=re[f+"10"],re[y][11]=re[f+"11"],re[y][12]=re[f+"12"],re[y][13]=re[f+"13"],re[y][14]=re[f+"0"],re[y][15]=re[f+"0"]}function qt(f){return f==si||f==oi||f==Ls||f==r}function Ei(){this.eb=[],this.size=this.A=this.fb=0}function In(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Lr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ei,this.f.kb=new In,this.sd=null}function Dr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function qn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function cn(f){return alert("todo:WebPSamplerProcessPlane"),f.T}function Yt(f,y){var E=f.T,T=y.ba.f.RGBA,K=T.eb,ae=T.fb+f.ka*T.A,ue=Zr[y.ba.S],pe=f.y,ge=f.O,Se=f.f,He=f.N,pt=f.ea,mt=f.W,nt=y.cc,Lt=y.dc,bt=y.Mc,Ke=y.Nc,Xe=f.ka,Pt=f.ka+f.T,Bt=f.U,St=Bt+1>>1;for(Xe==0?ue(pe,ge,null,null,Se,He,pt,mt,Se,He,pt,mt,K,ae,null,null,Bt):(ue(y.ec,y.fc,pe,ge,nt,Lt,bt,Ke,Se,He,pt,mt,K,ae-T.A,K,ae,Bt),++E);Xe+2<Pt;Xe+=2)nt=Se,Lt=He,bt=pt,Ke=mt,He+=f.Rc,mt+=f.Rc,ae+=2*T.A,ue(pe,(ge+=2*f.fa)-f.fa,pe,ge,nt,Lt,bt,Ke,Se,He,pt,mt,K,ae-T.A,K,ae,Bt);return ge+=f.fa,f.j+Pt<f.o?(i(y.ec,y.fc,pe,ge,Bt),i(y.cc,y.dc,Se,He,St),i(y.Mc,y.Nc,pt,mt,St),E--):1&Pt||ue(pe,ge,null,null,Se,He,pt,mt,Se,He,pt,mt,K,ae+T.A,null,null,Bt),E}function Jt(f,y,E){var T=f.F,K=[f.J];if(T!=null){var ae=f.U,ue=y.ba.S,pe=ue==zi||ue==Ls;y=y.ba.f.RGBA;var ge=[0],Se=f.ka;ge[0]=f.T,f.Kb&&(Se==0?--ge[0]:(--Se,K[0]-=f.width),f.j+f.ka+f.T==f.o&&(ge[0]=f.o-f.j-Se));var He=y.eb;Se=y.fb+Se*y.A,f=Gn(T,K[0],f.width,ae,ge,He,Se+(pe?0:3),y.A),t(E==ge),f&&qt(ue)&&Ir(He,Se,pe,ae,ge,y.A)}return 0}function ur(f){var y=f.ma,E=y.ba.S,T=11>E,K=E==hn||E==Do||E==zi||E==Wr||E==12||qt(E);if(y.memory=null,y.Ib=null,y.Jb=null,y.Nd=null,!Ma(y.Oa,f,K?11:12))return 0;if(K&&qt(E)&&Tt(),f.da)alert("todo:use_scaling");else{if(T){if(y.Ib=cn,f.Kb){if(E=f.U+1>>1,y.memory=a(f.U+2*E),y.memory==null)return 0;y.ec=y.memory,y.fc=0,y.cc=y.ec,y.dc=y.fc+f.U,y.Mc=y.cc,y.Nc=y.dc+E,y.Ib=Yt,Tt()}}else alert("todo:EmitYUV");K&&(y.Jb=Jt,T&&rt())}if(T&&!rl){for(f=0;256>f;++f)tu[f]=89858*(f-128)+Ml>>eu,nu[f]=-22014*(f-128)+Ml,Hh[f]=-45773*(f-128),Gh[f]=113618*(f-128)+Ml>>eu;for(f=Al;f<Du;++f)y=76283*(f-16)+Ml>>eu,ru[f-Al]=Qn(y,255),Lc[f-Al]=Qn(y+8>>4,15);rl=1}return 1}function Si(f){var y=f.ma,E=f.U,T=f.T;return t(!(1&f.ka)),0>=E||0>=T?0:(E=y.Ib(f,y),y.Jb!=null&&y.Jb(f,y,E),y.Dc+=E,1)}function Mi(f){f.ma.memory=null}function on(f,y,E,T){return Q(f,8)!=47?0:(y[0]=Q(f,14)+1,E[0]=Q(f,14)+1,T[0]=Q(f,1),Q(f,3)!=0?0:!f.h)}function Qi(f,y){if(4>f)return f+1;var E=f-2>>1;return(2+(1&f)<<E)+Q(y,E)+1}function fs(f,y){return 120<y?y-120:1<=(E=((E=je[y-1])>>4)*f+(8-(15&E)))?E:1;var E}function li(f,y,E){var T=J(E),K=f[y+=255&T].g-8;return 0<K&&(de(E,E.u+8),T=J(E),y+=f[y].value,y+=T&(1<<K)-1),de(E,E.u+f[y].g),f[y].value}function $n(f,y,E){return E.g+=f.g,E.value+=f.value<<y>>>0,t(8>=E.g),f.g}function $t(f,y,E){var T=f.xc;return t((y=T==0?0:f.vc[f.md*(E>>T)+(y>>T)])<f.Wb),f.Ya[y]}function ui(f,y,E,T){var K=f.ab,ae=f.c*y,ue=f.C;y=ue+y;var pe=E,ge=T;for(T=f.Ta,E=f.Ua;0<K--;){var Se=f.gc[K],He=ue,pt=y,mt=pe,nt=ge,Lt=(ge=T,pe=E,Se.Ea);switch(t(He<pt),t(pt<=Se.nc),Se.hc){case 2:Qa(mt,nt,(pt-He)*Lt,ge,pe);break;case 0:var bt=He,Ke=pt,Xe=ge,Pt=pe,Bt=(s=Se).Ea;bt==0&&(js(mt,nt,null,null,1,Xe,Pt),ze(mt,nt+1,0,0,Bt-1,Xe,Pt+1),nt+=Bt,Pt+=Bt,++bt);for(var St=1<<s.b,Kt=St-1,jt=it(Bt,s.b),an=s.K,s=s.w+(bt>>s.b)*jt;bt<Ke;){var l=an,h=s,p=1;for(Ci(mt,nt,Xe,Pt-Bt,1,Xe,Pt);p<Bt;){var v=(p&~Kt)+St;v>Bt&&(v=Bt),(0,zs[l[h++]>>8&15])(mt,nt+ +p,Xe,Pt+p-Bt,v-p,Xe,Pt+p),p=v}nt+=Bt,Pt+=Bt,++bt&Kt||(s+=jt)}pt!=Se.nc&&i(ge,pe-Lt,ge,pe+(pt-He-1)*Lt,Lt);break;case 1:for(Lt=mt,Ke=nt,Bt=(mt=Se.Ea)-(Pt=mt&~(Xe=(nt=1<<Se.b)-1)),bt=it(mt,Se.b),St=Se.K,Se=Se.w+(He>>Se.b)*bt;He<pt;){for(Kt=St,jt=Se,an=new Oe,s=Ke+Pt,l=Ke+mt;Ke<s;)Nt(Kt[jt++],an),ys(an,Lt,Ke,nt,ge,pe),Ke+=nt,pe+=nt;Ke<l&&(Nt(Kt[jt++],an),ys(an,Lt,Ke,Bt,ge,pe),Ke+=Bt,pe+=Bt),++He&Xe||(Se+=bt)}break;case 3:if(mt==ge&&nt==pe&&0<Se.b){for(Ke=ge,mt=Lt=pe+(pt-He)*Lt-(Pt=(pt-He)*it(Se.Ea,Se.b)),nt=ge,Xe=pe,bt=[],Pt=(Bt=Pt)-1;0<=Pt;--Pt)bt[Pt]=nt[Xe+Pt];for(Pt=Bt-1;0<=Pt;--Pt)Ke[mt+Pt]=bt[Pt];Er(Se,He,pt,ge,Lt,ge,pe)}else Er(Se,He,pt,mt,nt,ge,pe)}pe=T,ge=E}ge!=E&&i(T,E,pe,ge,ae)}function yo(f,y){var E=f.V,T=f.Ba+f.c*f.C,K=y-f.C;if(t(y<=f.l.o),t(16>=K),0<K){var ae=f.l,ue=f.Ta,pe=f.Ua,ge=ae.width;if(ui(f,K,E,T),K=pe=[pe],t((E=f.C)<(T=y)),t(ae.v<ae.va),T>ae.o&&(T=ae.o),E<ae.j){var Se=ae.j-E;E=ae.j,K[0]+=Se*ge}if(E>=T?E=0:(K[0]+=4*ae.v,ae.ka=E-ae.j,ae.U=ae.va-ae.v,ae.T=T-E,E=1),E){if(pe=pe[0],11>(E=f.ca).S){var He=E.f.RGBA,pt=(T=E.S,K=ae.U,ae=ae.T,Se=He.eb,He.A),mt=ae;for(He=He.fb+f.Ma*He.A;0<mt--;){var nt=ue,Lt=pe,bt=K,Ke=Se,Xe=He;switch(T){case mi:Rr(nt,Lt,bt,Ke,Xe);break;case hn:Br(nt,Lt,bt,Ke,Xe);break;case si:Br(nt,Lt,bt,Ke,Xe),Ir(Ke,Xe,0,bt,1,0);break;case tl:Ii(nt,Lt,bt,Ke,Xe);break;case Do:xn(nt,Lt,bt,Ke,Xe,1);break;case oi:xn(nt,Lt,bt,Ke,Xe,1),Ir(Ke,Xe,0,bt,1,0);break;case zi:xn(nt,Lt,bt,Ke,Xe,0);break;case Ls:xn(nt,Lt,bt,Ke,Xe,0),Ir(Ke,Xe,1,bt,1,0);break;case Wr:rs(nt,Lt,bt,Ke,Xe);break;case r:rs(nt,Lt,bt,Ke,Xe),Zn(Ke,Xe,bt,1,0);break;case Pl:fi(nt,Lt,bt,Ke,Xe);break;default:t(0)}pe+=ge,He+=pt}f.Ma+=ae}else alert("todo:EmitRescaledRowsYUVA");t(f.Ma<=E.height)}}f.C=y,t(f.C<=f.i)}function es(f){var y;if(0<f.ua)return 0;for(y=0;y<f.Wb;++y){var E=f.Ya[y].G,T=f.Ya[y].H;if(0<E[1][T[1]+0].g||0<E[2][T[2]+0].g||0<E[3][T[3]+0].g)return 0}return 1}function Ai(f,y,E,T,K,ae){if(f.Z!=0){var ue=f.qd,pe=f.rd;for(t(Kn[f.Z]!=null);y<E;++y)Kn[f.Z](ue,pe,T,K,T,K,ae),ue=T,pe=K,K+=ae;f.qd=ue,f.rd=pe}}function yi(f,y){var E=f.l.ma,T=E.Z==0||E.Z==1?f.l.j:f.C;if(T=f.C<T?T:f.C,t(y<=f.l.o),y>T){var K=f.l.width,ae=E.ca,ue=E.tb+K*T,pe=f.V,ge=f.Ba+f.c*T,Se=f.gc;t(f.ab==1),t(Se[0].hc==3),Ri(Se[0],T,y,pe,ge,ae,ue),Ai(E,T,y,ae,ue,K)}f.C=f.Ma=y}function Bi(f,y,E,T,K,ae,ue){var pe=f.$/T,ge=f.$%T,Se=f.m,He=f.s,pt=E+f.$,mt=pt;K=E+T*K;var nt=E+T*ae,Lt=280+He.ua,bt=f.Pb?pe:16777216,Ke=0<He.ua?He.Wa:null,Xe=He.wc,Pt=pt<nt?$t(He,ge,pe):null;t(f.C<ae),t(nt<=K);var Bt=!1;e:for(;;){for(;Bt||pt<nt;){var St=0;if(pe>=bt){var Kt=pt-E;t((bt=f).Pb),bt.wd=bt.m,bt.xd=Kt,0<bt.s.ua&&Be(bt.s.Wa,bt.s.vb),bt=pe+vt}if(ge&Xe||(Pt=$t(He,ge,pe)),t(Pt!=null),Pt.Qb&&(y[pt]=Pt.qb,Bt=!0),!Bt)if(_e(Se),Pt.jc){St=Se,Kt=y;var jt=pt,an=Pt.pd[J(St)&xr-1];t(Pt.jc),256>an.g?(de(St,St.u+an.g),Kt[jt]=an.value,St=0):(de(St,St.u+an.g-256),t(256<=an.value),St=an.value),St==0&&(Bt=!0)}else St=li(Pt.G[0],Pt.H[0],Se);if(Se.h)break;if(Bt||256>St){if(!Bt)if(Pt.nd)y[pt]=(Pt.qb|St<<8)>>>0;else{if(_e(Se),Bt=li(Pt.G[1],Pt.H[1],Se),_e(Se),Kt=li(Pt.G[2],Pt.H[2],Se),jt=li(Pt.G[3],Pt.H[3],Se),Se.h)break;y[pt]=(jt<<24|Bt<<16|St<<8|Kt)>>>0}if(Bt=!1,++pt,++ge>=T&&(ge=0,++pe,ue!=null&&pe<=ae&&!(pe%16)&&ue(f,pe),Ke!=null))for(;mt<pt;)St=y[mt++],Ke.X[(506832829*St&4294967295)>>>Ke.Mb]=St}else if(280>St){if(St=Qi(St-256,Se),Kt=li(Pt.G[4],Pt.H[4],Se),_e(Se),Kt=fs(T,Kt=Qi(Kt,Se)),Se.h)break;if(pt-E<Kt||K-pt<St)break e;for(jt=0;jt<St;++jt)y[pt+jt]=y[pt+jt-Kt];for(pt+=St,ge+=St;ge>=T;)ge-=T,++pe,ue!=null&&pe<=ae&&!(pe%16)&&ue(f,pe);if(t(pt<=K),ge&Xe&&(Pt=$t(He,ge,pe)),Ke!=null)for(;mt<pt;)St=y[mt++],Ke.X[(506832829*St&4294967295)>>>Ke.Mb]=St}else{if(!(St<Lt))break e;for(Bt=St-280,t(Ke!=null);mt<pt;)St=y[mt++],Ke.X[(506832829*St&4294967295)>>>Ke.Mb]=St;St=pt,t(!(Bt>>>(Kt=Ke).Xa)),y[St]=Kt.X[Bt],Bt=!0}Bt||t(Se.h==se(Se))}if(f.Pb&&Se.h&&pt<K)t(f.m.h),f.a=5,f.m=f.wd,f.$=f.xd,0<f.s.ua&&Be(f.s.vb,f.s.Wa);else{if(Se.h)break e;ue!=null&&ue(f,pe>ae?ae:pe),f.a=0,f.$=pt-E}return 1}return f.a=3,0}function Qr(f){t(f!=null),f.vc=null,f.yc=null,f.Ya=null;var y=f.Wa;y!=null&&(y.X=null),f.vb=null,t(f!=null)}function bi(){var f=new Ea;return f==null?null:(f.a=0,f.xb=Sl,Xn("Predictor","VP8LPredictors"),Xn("Predictor","VP8LPredictors_C"),Xn("PredictorAdd","VP8LPredictorsAdd"),Xn("PredictorAdd","VP8LPredictorsAdd_C"),Qa=Ot,ys=Ut,Rr=Dt,Br=Pn,rs=en,fi=Yn,Ii=ln,re.VP8LMapColor32b=_s,re.VP8LMapColor8b=To,f)}function ds(f,y,E,T,K){var ae=1,ue=[f],pe=[y],ge=T.m,Se=T.s,He=null,pt=0;e:for(;;){if(E)for(;ae&&Q(ge,1);){var mt=ue,nt=pe,Lt=T,bt=1,Ke=Lt.m,Xe=Lt.gc[Lt.ab],Pt=Q(Ke,2);if(Lt.Oc&1<<Pt)ae=0;else{switch(Lt.Oc|=1<<Pt,Xe.hc=Pt,Xe.Ea=mt[0],Xe.nc=nt[0],Xe.K=[null],++Lt.ab,t(4>=Lt.ab),Pt){case 0:case 1:Xe.b=Q(Ke,3)+2,bt=ds(it(Xe.Ea,Xe.b),it(Xe.nc,Xe.b),0,Lt,Xe.K),Xe.K=Xe.K[0];break;case 3:var Bt,St=Q(Ke,8)+1,Kt=16<St?0:4<St?1:2<St?2:3;if(mt[0]=it(Xe.Ea,Kt),Xe.b=Kt,Bt=bt=ds(St,1,0,Lt,Xe.K)){var jt,an=St,s=Xe,l=1<<(8>>s.b),h=a(l);if(h==null)Bt=0;else{var p=s.K[0],v=s.w;for(h[0]=s.K[0][0],jt=1;jt<1*an;++jt)h[jt]=Qe(p[v+jt],h[jt-1]);for(;jt<4*l;++jt)h[jt]=0;s.K[0]=null,s.K[0]=h,Bt=1}}bt=Bt;break;case 2:break;default:t(0)}ae=bt}}if(ue=ue[0],pe=pe[0],ae&&Q(ge,1)&&!(ae=1<=(pt=Q(ge,4))&&11>=pt)){T.a=3;break e}var k;if(k=ae)t:{var M,A,z,ee=T,Ne=ue,Me=pe,Ye=pt,ht=E,Et=ee.m,Rt=ee.s,Ft=[null],fn=1,Te=0,Fe=ct[Ye];n:for(;;){if(ht&&Q(Et,1)){var We=Q(Et,3)+2,gt=it(Ne,We),et=it(Me,We),ft=gt*et;if(!ds(gt,et,0,ee,Ft))break n;for(Ft=Ft[0],Rt.xc=We,M=0;M<ft;++M){var q=Ft[M]>>8&65535;Ft[M]=q,q>=fn&&(fn=q+1)}}if(Et.h)break n;for(A=0;5>A;++A){var oe=P[A];!A&&0<Ye&&(oe+=1<<Ye),Te<oe&&(Te=oe)}var ye=u(fn*Fe,X),ve=fn,xe=u(ve,te);if(xe==null)var Le=null;else t(65536>=ve),Le=xe;var $e=a(Te);if(Le==null||$e==null||ye==null){ee.a=1;break n}var Ue=ye;for(M=z=0;M<fn;++M){var Ze=Le[M],at=Ze.G,st=Ze.H,Mt=0,Wt=1,Xt=0;for(A=0;5>A;++A){oe=P[A],at[A]=Ue,st[A]=z,!A&&0<Ye&&(oe+=1<<Ye);i:{var tn,Un=oe,Hn=ee,On=$e,nr=Ue,vi=z,il=0,ho=Hn.m,Ou=Q(ho,1);if(o(On,0,0,Un),Ou){var fo=Q(ho,1)+1,Bl=Q(ho,1),os=Q(ho,Bl==0?1:8);On[os]=1,fo==2&&(On[os=Q(ho,8)]=1);var Kr=1}else{var _r=a(19),qd=Q(ho,4)+4;if(19<qd){Hn.a=3;var Sc=0;break i}for(tn=0;tn<qd;++tn)_r[le[tn]]=Q(ho,3);var Wh=void 0,Ru=void 0,$d=Hn,T1=_r,Mc=Un,Vd=On,Zh=0,sl=$d.m,Gd=8,Hd=u(128,X);r:for(;V(Hd,0,7,T1,19);){if(Q(sl,1)){var N1=2+2*Q(sl,3);if((Wh=2+Q(sl,N1))>Mc)break r}else Wh=Mc;for(Ru=0;Ru<Mc&&Wh--;){_e(sl);var Wd=Hd[0+(127&J(sl))];de(sl,sl.u+Wd.g);var su=Wd.value;if(16>su)Vd[Ru++]=su,su!=0&&(Gd=su);else{var D1=su==16,Zd=su-16,O1=g[Zd],Kd=Q(sl,c[Zd])+O1;if(Ru+Kd>Mc)break r;for(var R1=D1?Gd:0;0<Kd--;)Vd[Ru++]=R1}}Zh=1;break r}Zh||($d.a=3),Kr=Zh}(Kr=Kr&&!ho.h)&&(il=V(nr,vi,8,On,Un)),Kr&&il!=0?Sc=il:(Hn.a=3,Sc=0)}if(Sc==0)break n;if(Wt&&D[A]==1&&(Wt=Ue[z].g==0),Mt+=Ue[z].g,z+=Sc,3>=A){var Iu,Kh=$e[0];for(Iu=1;Iu<oe;++Iu)$e[Iu]>Kh&&(Kh=$e[Iu]);Xt+=Kh}}if(Ze.nd=Wt,Ze.Qb=0,Wt&&(Ze.qb=(at[3][st[3]+0].value<<24|at[1][st[1]+0].value<<16|at[2][st[2]+0].value)>>>0,Mt==0&&256>at[0][st[0]+0].value&&(Ze.Qb=1,Ze.qb+=at[0][st[0]+0].value<<8)),Ze.jc=!Ze.Qb&&6>Xt,Ze.jc){var Ac,Ta=Ze;for(Ac=0;Ac<xr;++Ac){var ol=Ac,al=Ta.pd[ol],Bc=Ta.G[0][Ta.H[0]+ol];256<=Bc.value?(al.g=Bc.g+256,al.value=Bc.value):(al.g=0,al.value=0,ol>>=$n(Bc,8,al),ol>>=$n(Ta.G[1][Ta.H[1]+ol],16,al),ol>>=$n(Ta.G[2][Ta.H[2]+ol],0,al),$n(Ta.G[3][Ta.H[3]+ol],24,al))}}}Rt.vc=Ft,Rt.Wb=fn,Rt.Ya=Le,Rt.yc=ye,k=1;break t}k=0}if(!(ae=k)){T.a=3;break e}if(0<pt){if(Se.ua=1<<pt,!De(Se.Wa,pt)){T.a=1,ae=0;break e}}else Se.ua=0;var Jh=T,Jd=ue,I1=pe,Yh=Jh.s,Xh=Yh.xc;if(Jh.c=Jd,Jh.i=I1,Yh.md=it(Jd,Xh),Yh.wc=Xh==0?-1:(1<<Xh)-1,E){T.xb=Tu;break e}if((He=a(ue*pe))==null){T.a=1,ae=0;break e}ae=(ae=Bi(T,He,0,ue,pe,pe,null))&&!ge.h;break e}return ae?(K!=null?K[0]=He:(t(He==null),t(E)),T.$=0,E||Qr(Se)):Qr(Se),ae}function bo(f,y){var E=f.c*f.i,T=E+y+16*y;return t(f.c<=y),f.V=a(T),f.V==null?(f.Ta=null,f.Ua=0,f.a=1,0):(f.Ta=f.V,f.Ua=f.Ba+E+y,1)}function Go(f,y){var E=f.C,T=y-E,K=f.V,ae=f.Ba+f.c*E;for(t(y<=f.l.o);0<T;){var ue=16<T?16:T,pe=f.l.ma,ge=f.l.width,Se=ge*ue,He=pe.ca,pt=pe.tb+ge*E,mt=f.Ta,nt=f.Ua;ui(f,ue,K,ae),vr(mt,nt,He,pt,Se),Ai(pe,E,E+ue,He,pt,ge),T-=ue,K+=ue*f.c,E+=ue}t(E==y),f.C=f.Ma=y}function Ho(){this.ub=this.yd=this.td=this.Rb=0}function Bs(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Js(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function wo(){this.Yb=function(){var f=[];return function y(E,T,K){for(var ae=K[T],ue=0;ue<ae&&(E.push(K.length>T+1?[]:0),!(K.length<T+1));ue++)y(E[ue],T+1,K)}(f,0,[3,11]),f}()}function Ll(){this.jb=a(3),this.Wc=d([4,8],wo),this.Xc=d([4,17],wo)}function Cl(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Wo(){this.ld=this.La=this.dd=this.tc=0}function Ha(){this.Na=this.la=0}function kl(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function xo(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Lo(){this.uc=this.M=this.Nb=0,this.wa=Array(new Wo),this.Y=0,this.ya=Array(new xo),this.aa=0,this.l=new wi}function _a(){this.y=a(16),this.f=a(8),this.ea=a(8)}function Wa(){this.cb=this.a=0,this.sc="",this.m=new Re,this.Od=new Ho,this.Kc=new Bs,this.ed=new Cl,this.Qa=new Js,this.Ic=this.$c=this.Aa=0,this.D=new Lo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=u(8,Re),this.ia=0,this.pb=u(4,kl),this.Pa=new Ll,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new _a),this.Hd=0,this.rb=Array(new Ha),this.sb=0,this.wa=Array(new Wo),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new xo),this.L=this.aa=0,this.gd=d([4,2],Wo),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function wi(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Rn(){var f=new Wa;return f!=null&&(f.a=0,f.sc="OK",f.cb=0,f.Xb=0,rn||(rn=ps)),f}function _n(f,y,E){return f.a==0&&(f.a=y,f.sc=E,f.cb=0),0}function Ys(f,y,E){return 3<=E&&f[y+0]==157&&f[y+1]==1&&f[y+2]==42}function Ts(f,y){if(f==null)return 0;if(f.a=0,f.sc="OK",y==null)return _n(f,2,"null VP8Io passed to VP8GetHeaders()");var E=y.data,T=y.w,K=y.ha;if(4>K)return _n(f,7,"Truncated header.");var ae=E[T+0]|E[T+1]<<8|E[T+2]<<16,ue=f.Od;if(ue.Rb=!(1&ae),ue.td=ae>>1&7,ue.yd=ae>>4&1,ue.ub=ae>>5,3<ue.td)return _n(f,3,"Incorrect keyframe parameters.");if(!ue.yd)return _n(f,4,"Frame not displayable.");T+=3,K-=3;var pe=f.Kc;if(ue.Rb){if(7>K)return _n(f,7,"cannot parse picture header");if(!Ys(E,T,K))return _n(f,3,"Bad code word");pe.c=16383&(E[T+4]<<8|E[T+3]),pe.Td=E[T+4]>>6,pe.i=16383&(E[T+6]<<8|E[T+5]),pe.Ud=E[T+6]>>6,T+=7,K-=7,f.za=pe.c+15>>4,f.Ub=pe.i+15>>4,y.width=pe.c,y.height=pe.i,y.Da=0,y.j=0,y.v=0,y.va=y.width,y.o=y.height,y.da=0,y.ib=y.width,y.hb=y.height,y.U=y.width,y.T=y.height,o((ae=f.Pa).jb,0,255,ae.jb.length),t((ae=f.Qa)!=null),ae.Cb=0,ae.Bb=0,ae.Fb=1,o(ae.Zb,0,0,ae.Zb.length),o(ae.Lb,0,0,ae.Lb)}if(ue.ub>K)return _n(f,7,"bad partition length");W(ae=f.m,E,T,ue.ub),T+=ue.ub,K-=ue.ub,ue.Rb&&(pe.Ld=we(ae),pe.Kd=we(ae)),pe=f.Qa;var ge,Se=f.Pa;if(t(ae!=null),t(pe!=null),pe.Cb=we(ae),pe.Cb){if(pe.Bb=we(ae),we(ae)){for(pe.Fb=we(ae),ge=0;4>ge;++ge)pe.Zb[ge]=we(ae)?me(ae,7):0;for(ge=0;4>ge;++ge)pe.Lb[ge]=we(ae)?me(ae,6):0}if(pe.Bb)for(ge=0;3>ge;++ge)Se.jb[ge]=we(ae)?H(ae,8):255}else pe.Bb=0;if(ae.Ka)return _n(f,3,"cannot parse segment header");if((pe=f.ed).zd=we(ae),pe.Tb=H(ae,6),pe.wb=H(ae,3),pe.Pc=we(ae),pe.Pc&&we(ae)){for(Se=0;4>Se;++Se)we(ae)&&(pe.vd[Se]=me(ae,6));for(Se=0;4>Se;++Se)we(ae)&&(pe.od[Se]=me(ae,6))}if(f.L=pe.Tb==0?0:pe.zd?1:2,ae.Ka)return _n(f,3,"cannot parse filter header");var He=K;if(K=ge=T,T=ge+He,pe=He,f.Xb=(1<<H(f.m,2))-1,He<3*(Se=f.Xb))E=7;else{for(ge+=3*Se,pe-=3*Se,He=0;He<Se;++He){var pt=E[K+0]|E[K+1]<<8|E[K+2]<<16;pt>pe&&(pt=pe),W(f.Jc[+He],E,ge,pt),ge+=pt,pe-=pt,K+=3}W(f.Jc[+Se],E,ge,pe),E=ge<T?0:5}if(E!=0)return _n(f,E,"cannot parse partitions");for(E=H(ge=f.m,7),K=we(ge)?me(ge,4):0,T=we(ge)?me(ge,4):0,pe=we(ge)?me(ge,4):0,Se=we(ge)?me(ge,4):0,ge=we(ge)?me(ge,4):0,He=f.Qa,pt=0;4>pt;++pt){if(He.Cb){var mt=He.Zb[pt];He.Fb||(mt+=E)}else{if(0<pt){f.pb[pt]=f.pb[0];continue}mt=E}var nt=f.pb[pt];nt.Sc[0]=At[Qn(mt+K,127)],nt.Sc[1]=Gt[Qn(mt+0,127)],nt.Eb[0]=2*At[Qn(mt+T,127)],nt.Eb[1]=101581*Gt[Qn(mt+pe,127)]>>16,8>nt.Eb[1]&&(nt.Eb[1]=8),nt.Qc[0]=At[Qn(mt+Se,117)],nt.Qc[1]=Gt[Qn(mt+ge,127)],nt.lc=mt+ge}if(!ue.Rb)return _n(f,4,"Not a key frame.");for(we(ae),ue=f.Pa,E=0;4>E;++E){for(K=0;8>K;++K)for(T=0;3>T;++T)for(pe=0;11>pe;++pe)Se=Ee(ae,Cs[E][K][T][pe])?H(ae,8):gi[E][K][T][pe],ue.Wc[E][K].Yb[T][pe]=Se;for(K=0;17>K;++K)ue.Xc[E][K]=ue.Wc[E][El[K]]}return f.kc=we(ae),f.kc&&(f.Bd=H(ae,8)),f.cb=1}function ps(f,y,E,T,K,ae,ue){var pe=y[K].Yb[E];for(E=0;16>K;++K){if(!Ee(f,pe[E+0]))return K;for(;!Ee(f,pe[E+1]);)if(pe=y[++K].Yb[0],E=0,K==16)return 16;var ge=y[K+1].Yb;if(Ee(f,pe[E+2])){var Se=f,He=0;if(Ee(Se,(mt=pe)[(pt=E)+3]))if(Ee(Se,mt[pt+6])){for(pe=0,pt=2*(He=Ee(Se,mt[pt+8]))+(mt=Ee(Se,mt[pt+9+He])),He=0,mt=En[pt];mt[pe];++pe)He+=He+Ee(Se,mt[pe]);He+=3+(8<<pt)}else Ee(Se,mt[pt+7])?(He=7+2*Ee(Se,165),He+=Ee(Se,145)):He=5+Ee(Se,159);else He=Ee(Se,mt[pt+4])?3+Ee(Se,mt[pt+5]):2;pe=ge[2]}else He=1,pe=ge[1];ge=ue+ai[K],0>(Se=f).b&&he(Se);var pt,mt=Se.b,nt=(pt=Se.Ca>>1)-(Se.I>>mt)>>31;--Se.b,Se.Ca+=nt,Se.Ca|=1,Se.I-=(pt+1&nt)<<mt,ae[ge]=((He^nt)-nt)*T[(0<K)+0]}return 16}function Co(f){var y=f.rb[f.sb-1];y.la=0,y.Na=0,o(f.zc,0,0,f.zc.length),f.ja=0}function bn(f,y){if(f==null)return 0;if(y==null)return _n(f,2,"NULL VP8Io parameter in VP8Decode().");if(!f.cb&&!Ts(f,y))return 0;if(t(f.cb),y.ac==null||y.ac(y)){y.ob&&(f.L=0);var E=iu[f.L];if(f.L==2?(f.yb=0,f.zb=0):(f.yb=y.v-E>>4,f.zb=y.j-E>>4,0>f.yb&&(f.yb=0),0>f.zb&&(f.zb=0)),f.Va=y.o+15+E>>4,f.Hb=y.va+15+E>>4,f.Hb>f.za&&(f.Hb=f.za),f.Va>f.Ub&&(f.Va=f.Ub),0<f.L){var T=f.ed;for(E=0;4>E;++E){var K;if(f.Qa.Cb){var ae=f.Qa.Lb[E];f.Qa.Fb||(ae+=T.Tb)}else ae=T.Tb;for(K=0;1>=K;++K){var ue=f.gd[E][K],pe=ae;if(T.Pc&&(pe+=T.vd[0],K&&(pe+=T.od[0])),0<(pe=0>pe?0:63<pe?63:pe)){var ge=pe;0<T.wb&&(ge=4<T.wb?ge>>2:ge>>1)>9-T.wb&&(ge=9-T.wb),1>ge&&(ge=1),ue.dd=ge,ue.tc=2*pe+ge,ue.ld=40<=pe?2:15<=pe?1:0}else ue.tc=0;ue.La=K}}}E=0}else _n(f,6,"Frame setup failed"),E=f.a;if(E=E==0){if(E){f.$c=0,0<f.Aa||(f.Ic=Pc);e:{E=f.Ic,T=4*(ge=f.za);var Se=32*ge,He=ge+1,pt=0<f.L?ge*(0<f.Aa?2:1):0,mt=(f.Aa==2?2:1)*ge;if((ue=T+832+(K=3*(16*E+iu[f.L])/2*Se)+(ae=f.Fa!=null&&0<f.Fa.length?f.Kc.c*f.Kc.i:0))!=ue)E=0;else{if(ue>f.Vb){if(f.Vb=0,f.Ec=a(ue),f.Fc=0,f.Ec==null){E=_n(f,1,"no memory during frame initialization.");break e}f.Vb=ue}ue=f.Ec,pe=f.Fc,f.Ac=ue,f.Bc=pe,pe+=T,f.Gd=u(Se,_a),f.Hd=0,f.rb=u(He+1,Ha),f.sb=1,f.wa=pt?u(pt,Wo):null,f.Y=0,f.D.Nb=0,f.D.wa=f.wa,f.D.Y=f.Y,0<f.Aa&&(f.D.Y+=ge),t(!0),f.oc=ue,f.pc=pe,pe+=832,f.ya=u(mt,xo),f.aa=0,f.D.ya=f.ya,f.D.aa=f.aa,f.Aa==2&&(f.D.aa+=ge),f.R=16*ge,f.B=8*ge,ge=(Se=iu[f.L])*f.R,Se=Se/2*f.B,f.sa=ue,f.ta=pe+ge,f.qa=f.sa,f.ra=f.ta+16*E*f.R+Se,f.Ha=f.qa,f.Ia=f.ra+8*E*f.B+Se,f.$c=0,pe+=K,f.mb=ae?ue:null,f.nb=ae?pe:null,t(pe+ae<=f.Fc+f.Vb),Co(f),o(f.Ac,f.Bc,0,T),E=1}}if(E){if(y.ka=0,y.y=f.sa,y.O=f.ta,y.f=f.qa,y.N=f.ra,y.ea=f.Ha,y.Vd=f.Ia,y.fa=f.R,y.Rc=f.B,y.F=null,y.J=0,!el){for(E=-255;255>=E;++E)er[255+E]=0>E?-E:E;for(E=-1020;1020>=E;++E)is[1020+E]=-128>E?-128:127<E?127:E;for(E=-112;112>=E;++E)uo[112+E]=-16>E?-16:15<E?15:E;for(E=-255;510>=E;++E)xs[255+E]=0>E?0:255<E?255:E;el=1}Us=ko,Fi=Zo,bs=ms,ii=cr,Gr=gs,hr=Za,No=ka,Aa=vs,Ba=Di,Hr=ta,di=Qo,oo=ea,ws=kr,oa=Ya,ao=Ca,lo=sn,qs=ei,ji=Mo,Ui[0]=Dn,Ui[1]=ya,Ui[2]=yn,Ui[3]=Ti,Ui[4]=wa,Ui[5]=to,Ui[6]=Yo,Ui[7]=Ni,Ui[8]=xa,Ui[9]=Os,ss[0]=Ko,ss[1]=ba,ss[2]=ts,ss[3]=Ds,ss[4]=Cr,ss[5]=Ka,ss[6]=Jo,ki[0]=Rs,ki[1]=Qs,ki[2]=Po,ki[3]=mr,ki[4]=Eo,ki[5]=Ja,ki[6]=Xo,E=1}else E=0}E&&(E=function(nt,Lt){for(nt.M=0;nt.M<nt.Va;++nt.M){var bt,Ke=nt.Jc[nt.M&nt.Xb],Xe=nt.m,Pt=nt;for(bt=0;bt<Pt.za;++bt){var Bt=Xe,St=Pt,Kt=St.Ac,jt=St.Bc+4*bt,an=St.zc,s=St.ya[St.aa+bt];if(St.Qa.Bb?s.$b=Ee(Bt,St.Pa.jb[0])?2+Ee(Bt,St.Pa.jb[2]):Ee(Bt,St.Pa.jb[1]):s.$b=0,St.kc&&(s.Ad=Ee(Bt,St.Bd)),s.Za=!Ee(Bt,145)+0,s.Za){var l=s.Ob,h=0;for(St=0;4>St;++St){var p,v=an[0+St];for(p=0;4>p;++p){v=fr[Kt[jt+p]][v];for(var k=Mr[Ee(Bt,v[0])];0<k;)k=Mr[2*k+Ee(Bt,v[k])];v=-k,Kt[jt+p]=v}i(l,h,Kt,jt,4),h+=4,an[0+St]=v}}else v=Ee(Bt,156)?Ee(Bt,128)?1:3:Ee(Bt,163)?2:0,s.Ob[0]=v,o(Kt,jt,v,4),o(an,0,v,4);s.Dd=Ee(Bt,142)?Ee(Bt,114)?Ee(Bt,183)?1:3:2:0}if(Pt.m.Ka)return _n(nt,7,"Premature end-of-partition0 encountered.");for(;nt.ja<nt.za;++nt.ja){if(Pt=Ke,Bt=(Xe=nt).rb[Xe.sb-1],Kt=Xe.rb[Xe.sb+Xe.ja],bt=Xe.ya[Xe.aa+Xe.ja],jt=Xe.kc?bt.Ad:0)Bt.la=Kt.la=0,bt.Za||(Bt.Na=Kt.Na=0),bt.Hc=0,bt.Gc=0,bt.ia=0;else{var M,A;if(Bt=Kt,Kt=Pt,jt=Xe.Pa.Xc,an=Xe.ya[Xe.aa+Xe.ja],s=Xe.pb[an.$b],St=an.ad,l=0,h=Xe.rb[Xe.sb-1],v=p=0,o(St,l,0,384),an.Za)var z=0,ee=jt[3];else{k=a(16);var Ne=Bt.Na+h.Na;if(Ne=rn(Kt,jt[1],Ne,s.Eb,0,k,0),Bt.Na=h.Na=(0<Ne)+0,1<Ne)Us(k,0,St,l);else{var Me=k[0]+3>>3;for(k=0;256>k;k+=16)St[l+k]=Me}z=1,ee=jt[0]}var Ye=15&Bt.la,ht=15&h.la;for(k=0;4>k;++k){var Et=1&ht;for(Me=A=0;4>Me;++Me)Ye=Ye>>1|(Et=(Ne=rn(Kt,ee,Ne=Et+(1&Ye),s.Sc,z,St,l))>z)<<7,A=A<<2|(3<Ne?3:1<Ne?2:St[l+0]!=0),l+=16;Ye>>=4,ht=ht>>1|Et<<7,p=(p<<8|A)>>>0}for(ee=Ye,z=ht>>4,M=0;4>M;M+=2){for(A=0,Ye=Bt.la>>4+M,ht=h.la>>4+M,k=0;2>k;++k){for(Et=1&ht,Me=0;2>Me;++Me)Ne=Et+(1&Ye),Ye=Ye>>1|(Et=0<(Ne=rn(Kt,jt[2],Ne,s.Qc,0,St,l)))<<3,A=A<<2|(3<Ne?3:1<Ne?2:St[l+0]!=0),l+=16;Ye>>=2,ht=ht>>1|Et<<5}v|=A<<4*M,ee|=Ye<<4<<M,z|=(240&ht)<<M}Bt.la=ee,h.la=z,an.Hc=p,an.Gc=v,an.ia=43690&v?0:s.ia,jt=!(p|v)}if(0<Xe.L&&(Xe.wa[Xe.Y+Xe.ja]=Xe.gd[bt.$b][bt.Za],Xe.wa[Xe.Y+Xe.ja].La|=!jt),Pt.Ka)return _n(nt,7,"Premature end-of-file encountered.")}if(Co(nt),Xe=Lt,Pt=1,bt=(Ke=nt).D,Bt=0<Ke.L&&Ke.M>=Ke.zb&&Ke.M<=Ke.Va,Ke.Aa==0)e:{if(bt.M=Ke.M,bt.uc=Bt,Sa(Ke,bt),Pt=1,bt=(A=Ke.D).Nb,Bt=(v=iu[Ke.L])*Ke.R,Kt=v/2*Ke.B,k=16*bt*Ke.R,Me=8*bt*Ke.B,jt=Ke.sa,an=Ke.ta-Bt+k,s=Ke.qa,St=Ke.ra-Kt+Me,l=Ke.Ha,h=Ke.Ia-Kt+Me,ht=(Ye=A.M)==0,p=Ye>=Ke.Va-1,Ke.Aa==2&&Sa(Ke,A),A.uc)for(Et=(Ne=Ke).D.M,t(Ne.D.uc),A=Ne.yb;A<Ne.Hb;++A){z=A,ee=Et;var Rt=(Ft=(oe=Ne).D).Nb;M=oe.R;var Ft=Ft.wa[Ft.Y+z],fn=oe.sa,Te=oe.ta+16*Rt*M+16*z,Fe=Ft.dd,We=Ft.tc;if(We!=0)if(t(3<=We),oe.L==1)0<z&&lo(fn,Te,M,We+4),Ft.La&&ji(fn,Te,M,We),0<ee&&ao(fn,Te,M,We+4),Ft.La&&qs(fn,Te,M,We);else{var gt=oe.B,et=oe.qa,ft=oe.ra+8*Rt*gt+8*z,q=oe.Ha,oe=oe.Ia+8*Rt*gt+8*z;Rt=Ft.ld,0<z&&(Aa(fn,Te,M,We+4,Fe,Rt),Hr(et,ft,q,oe,gt,We+4,Fe,Rt)),Ft.La&&(oo(fn,Te,M,We,Fe,Rt),oa(et,ft,q,oe,gt,We,Fe,Rt)),0<ee&&(No(fn,Te,M,We+4,Fe,Rt),Ba(et,ft,q,oe,gt,We+4,Fe,Rt)),Ft.La&&(di(fn,Te,M,We,Fe,Rt),ws(et,ft,q,oe,gt,We,Fe,Rt))}}if(Ke.ia&&alert("todo:DitherRow"),Xe.put!=null){if(A=16*Ye,Ye=16*(Ye+1),ht?(Xe.y=Ke.sa,Xe.O=Ke.ta+k,Xe.f=Ke.qa,Xe.N=Ke.ra+Me,Xe.ea=Ke.Ha,Xe.W=Ke.Ia+Me):(A-=v,Xe.y=jt,Xe.O=an,Xe.f=s,Xe.N=St,Xe.ea=l,Xe.W=h),p||(Ye-=v),Ye>Xe.o&&(Ye=Xe.o),Xe.F=null,Xe.J=null,Ke.Fa!=null&&0<Ke.Fa.length&&A<Ye&&(Xe.J=gr(Ke,Xe,A,Ye-A),Xe.F=Ke.mb,Xe.F==null&&Xe.F.length==0)){Pt=_n(Ke,3,"Could not decode alpha data.");break e}A<Xe.j&&(v=Xe.j-A,A=Xe.j,t(!(1&v)),Xe.O+=Ke.R*v,Xe.N+=Ke.B*(v>>1),Xe.W+=Ke.B*(v>>1),Xe.F!=null&&(Xe.J+=Xe.width*v)),A<Ye&&(Xe.O+=Xe.v,Xe.N+=Xe.v>>1,Xe.W+=Xe.v>>1,Xe.F!=null&&(Xe.J+=Xe.v),Xe.ka=A-Xe.j,Xe.U=Xe.va-Xe.v,Xe.T=Ye-A,Pt=Xe.put(Xe))}bt+1!=Ke.Ic||p||(i(Ke.sa,Ke.ta-Bt,jt,an+16*Ke.R,Bt),i(Ke.qa,Ke.ra-Kt,s,St+8*Ke.B,Kt),i(Ke.Ha,Ke.Ia-Kt,l,h+8*Ke.B,Kt))}if(!Pt)return _n(nt,6,"Output aborted.")}return 1}(f,y)),y.bc!=null&&y.bc(y),E&=1}return E?(f.cb=0,E):0}function zn(f,y,E,T,K){K=f[y+E+32*T]+(K>>3),f[y+E+32*T]=-256&K?0>K?0:255:K}function Xs(f,y,E,T,K,ae){zn(f,y,0,E,T+K),zn(f,y,1,E,T+ae),zn(f,y,2,E,T-ae),zn(f,y,3,E,T-K)}function Or(f){return(20091*f>>16)+f}function $r(f,y,E,T){var K,ae=0,ue=a(16);for(K=0;4>K;++K){var pe=f[y+0]+f[y+8],ge=f[y+0]-f[y+8],Se=(35468*f[y+4]>>16)-Or(f[y+12]),He=Or(f[y+4])+(35468*f[y+12]>>16);ue[ae+0]=pe+He,ue[ae+1]=ge+Se,ue[ae+2]=ge-Se,ue[ae+3]=pe-He,ae+=4,y++}for(K=ae=0;4>K;++K)pe=(f=ue[ae+0]+4)+ue[ae+8],ge=f-ue[ae+8],Se=(35468*ue[ae+4]>>16)-Or(ue[ae+12]),zn(E,T,0,0,pe+(He=Or(ue[ae+4])+(35468*ue[ae+12]>>16))),zn(E,T,1,0,ge+Se),zn(E,T,2,0,ge-Se),zn(E,T,3,0,pe-He),ae++,T+=32}function Za(f,y,E,T){var K=f[y+0]+4,ae=35468*f[y+4]>>16,ue=Or(f[y+4]),pe=35468*f[y+1]>>16;Xs(E,T,0,K+ue,f=Or(f[y+1]),pe),Xs(E,T,1,K+ae,f,pe),Xs(E,T,2,K-ae,f,pe),Xs(E,T,3,K-ue,f,pe)}function Zo(f,y,E,T,K){$r(f,y,E,T),K&&$r(f,y+16,E,T+4)}function ms(f,y,E,T){Fi(f,y+0,E,T,1),Fi(f,y+32,E,T+128,1)}function cr(f,y,E,T){var K;for(f=f[y+0]+4,K=0;4>K;++K)for(y=0;4>y;++y)zn(E,T,y,K,f)}function gs(f,y,E,T){f[y+0]&&ii(f,y+0,E,T),f[y+16]&&ii(f,y+16,E,T+4),f[y+32]&&ii(f,y+32,E,T+128),f[y+48]&&ii(f,y+48,E,T+128+4)}function ko(f,y,E,T){var K,ae=a(16);for(K=0;4>K;++K){var ue=f[y+0+K]+f[y+12+K],pe=f[y+4+K]+f[y+8+K],ge=f[y+4+K]-f[y+8+K],Se=f[y+0+K]-f[y+12+K];ae[0+K]=ue+pe,ae[8+K]=ue-pe,ae[4+K]=Se+ge,ae[12+K]=Se-ge}for(K=0;4>K;++K)ue=(f=ae[0+4*K]+3)+ae[3+4*K],pe=ae[1+4*K]+ae[2+4*K],ge=ae[1+4*K]-ae[2+4*K],Se=f-ae[3+4*K],E[T+0]=ue+pe>>3,E[T+16]=Se+ge>>3,E[T+32]=ue-pe>>3,E[T+48]=Se-ge>>3,T+=64}function Ns(f,y,E){var T,K=y-32,ae=tr,ue=255-f[K-1];for(T=0;T<E;++T){var pe,ge=ae,Se=ue+f[y-1];for(pe=0;pe<E;++pe)f[y+pe]=ge[Se+f[K+pe]];y+=32}}function ya(f,y){Ns(f,y,4)}function Qs(f,y){Ns(f,y,8)}function ba(f,y){Ns(f,y,16)}function ts(f,y){var E;for(E=0;16>E;++E)i(f,y+32*E,f,y-32,16)}function Ds(f,y){var E;for(E=16;0<E;--E)o(f,y,f[y-1],16),y+=32}function eo(f,y,E){var T;for(T=0;16>T;++T)o(y,E+32*T,f,16)}function Ko(f,y){var E,T=16;for(E=0;16>E;++E)T+=f[y-1+32*E]+f[y+E-32];eo(T>>5,f,y)}function Cr(f,y){var E,T=8;for(E=0;16>E;++E)T+=f[y-1+32*E];eo(T>>4,f,y)}function Ka(f,y){var E,T=8;for(E=0;16>E;++E)T+=f[y+E-32];eo(T>>4,f,y)}function Jo(f,y){eo(128,f,y)}function gn(f,y,E){return f+2*y+E+2>>2}function yn(f,y){var E,T=y-32;for(T=new Uint8Array([gn(f[T-1],f[T+0],f[T+1]),gn(f[T+0],f[T+1],f[T+2]),gn(f[T+1],f[T+2],f[T+3]),gn(f[T+2],f[T+3],f[T+4])]),E=0;4>E;++E)i(f,y+32*E,T,0,T.length)}function Ti(f,y){var E=f[y-1],T=f[y-1+32],K=f[y-1+64],ae=f[y-1+96];Ve(f,y+0,16843009*gn(f[y-1-32],E,T)),Ve(f,y+32,16843009*gn(E,T,K)),Ve(f,y+64,16843009*gn(T,K,ae)),Ve(f,y+96,16843009*gn(K,ae,ae))}function Dn(f,y){var E,T=4;for(E=0;4>E;++E)T+=f[y+E-32]+f[y-1+32*E];for(T>>=3,E=0;4>E;++E)o(f,y+32*E,T,4)}function wa(f,y){var E=f[y-1+0],T=f[y-1+32],K=f[y-1+64],ae=f[y-1-32],ue=f[y+0-32],pe=f[y+1-32],ge=f[y+2-32],Se=f[y+3-32];f[y+0+96]=gn(T,K,f[y-1+96]),f[y+1+96]=f[y+0+64]=gn(E,T,K),f[y+2+96]=f[y+1+64]=f[y+0+32]=gn(ae,E,T),f[y+3+96]=f[y+2+64]=f[y+1+32]=f[y+0+0]=gn(ue,ae,E),f[y+3+64]=f[y+2+32]=f[y+1+0]=gn(pe,ue,ae),f[y+3+32]=f[y+2+0]=gn(ge,pe,ue),f[y+3+0]=gn(Se,ge,pe)}function Yo(f,y){var E=f[y+1-32],T=f[y+2-32],K=f[y+3-32],ae=f[y+4-32],ue=f[y+5-32],pe=f[y+6-32],ge=f[y+7-32];f[y+0+0]=gn(f[y+0-32],E,T),f[y+1+0]=f[y+0+32]=gn(E,T,K),f[y+2+0]=f[y+1+32]=f[y+0+64]=gn(T,K,ae),f[y+3+0]=f[y+2+32]=f[y+1+64]=f[y+0+96]=gn(K,ae,ue),f[y+3+32]=f[y+2+64]=f[y+1+96]=gn(ae,ue,pe),f[y+3+64]=f[y+2+96]=gn(ue,pe,ge),f[y+3+96]=gn(pe,ge,ge)}function to(f,y){var E=f[y-1+0],T=f[y-1+32],K=f[y-1+64],ae=f[y-1-32],ue=f[y+0-32],pe=f[y+1-32],ge=f[y+2-32],Se=f[y+3-32];f[y+0+0]=f[y+1+64]=ae+ue+1>>1,f[y+1+0]=f[y+2+64]=ue+pe+1>>1,f[y+2+0]=f[y+3+64]=pe+ge+1>>1,f[y+3+0]=ge+Se+1>>1,f[y+0+96]=gn(K,T,E),f[y+0+64]=gn(T,E,ae),f[y+0+32]=f[y+1+96]=gn(E,ae,ue),f[y+1+32]=f[y+2+96]=gn(ae,ue,pe),f[y+2+32]=f[y+3+96]=gn(ue,pe,ge),f[y+3+32]=gn(pe,ge,Se)}function Ni(f,y){var E=f[y+0-32],T=f[y+1-32],K=f[y+2-32],ae=f[y+3-32],ue=f[y+4-32],pe=f[y+5-32],ge=f[y+6-32],Se=f[y+7-32];f[y+0+0]=E+T+1>>1,f[y+1+0]=f[y+0+64]=T+K+1>>1,f[y+2+0]=f[y+1+64]=K+ae+1>>1,f[y+3+0]=f[y+2+64]=ae+ue+1>>1,f[y+0+32]=gn(E,T,K),f[y+1+32]=f[y+0+96]=gn(T,K,ae),f[y+2+32]=f[y+1+96]=gn(K,ae,ue),f[y+3+32]=f[y+2+96]=gn(ae,ue,pe),f[y+3+64]=gn(ue,pe,ge),f[y+3+96]=gn(pe,ge,Se)}function Os(f,y){var E=f[y-1+0],T=f[y-1+32],K=f[y-1+64],ae=f[y-1+96];f[y+0+0]=E+T+1>>1,f[y+2+0]=f[y+0+32]=T+K+1>>1,f[y+2+32]=f[y+0+64]=K+ae+1>>1,f[y+1+0]=gn(E,T,K),f[y+3+0]=f[y+1+32]=gn(T,K,ae),f[y+3+32]=f[y+1+64]=gn(K,ae,ae),f[y+3+64]=f[y+2+64]=f[y+0+96]=f[y+1+96]=f[y+2+96]=f[y+3+96]=ae}function xa(f,y){var E=f[y-1+0],T=f[y-1+32],K=f[y-1+64],ae=f[y-1+96],ue=f[y-1-32],pe=f[y+0-32],ge=f[y+1-32],Se=f[y+2-32];f[y+0+0]=f[y+2+32]=E+ue+1>>1,f[y+0+32]=f[y+2+64]=T+E+1>>1,f[y+0+64]=f[y+2+96]=K+T+1>>1,f[y+0+96]=ae+K+1>>1,f[y+3+0]=gn(pe,ge,Se),f[y+2+0]=gn(ue,pe,ge),f[y+1+0]=f[y+3+32]=gn(E,ue,pe),f[y+1+32]=f[y+3+64]=gn(T,E,ue),f[y+1+64]=f[y+3+96]=gn(K,T,E),f[y+1+96]=gn(ae,K,T)}function Po(f,y){var E;for(E=0;8>E;++E)i(f,y+32*E,f,y-32,8)}function mr(f,y){var E;for(E=0;8>E;++E)o(f,y,f[y-1],8),y+=32}function xi(f,y,E){var T;for(T=0;8>T;++T)o(y,E+32*T,f,8)}function Rs(f,y){var E,T=8;for(E=0;8>E;++E)T+=f[y+E-32]+f[y-1+32*E];xi(T>>4,f,y)}function Ja(f,y){var E,T=4;for(E=0;8>E;++E)T+=f[y+E-32];xi(T>>3,f,y)}function Eo(f,y){var E,T=4;for(E=0;8>E;++E)T+=f[y-1+32*E];xi(T>>3,f,y)}function Xo(f,y){xi(128,f,y)}function no(f,y,E){var T=f[y-E],K=f[y+0],ae=3*(K-T)+co[1020+f[y-2*E]-f[y+E]],ue=Sr[112+(ae+4>>3)];f[y-E]=tr[255+T+Sr[112+(ae+3>>3)]],f[y+0]=tr[255+K-ue]}function So(f,y,E,T){var K=f[y+0],ae=f[y+E];return pi[255+f[y-2*E]-f[y-E]]>T||pi[255+ae-K]>T}function La(f,y,E,T){return 4*pi[255+f[y-E]-f[y+0]]+pi[255+f[y-2*E]-f[y+E]]<=T}function An(f,y,E,T,K){var ae=f[y-3*E],ue=f[y-2*E],pe=f[y-E],ge=f[y+0],Se=f[y+E],He=f[y+2*E],pt=f[y+3*E];return 4*pi[255+pe-ge]+pi[255+ue-Se]>T?0:pi[255+f[y-4*E]-ae]<=K&&pi[255+ae-ue]<=K&&pi[255+ue-pe]<=K&&pi[255+pt-He]<=K&&pi[255+He-Se]<=K&&pi[255+Se-ge]<=K}function Ca(f,y,E,T){var K=2*T+1;for(T=0;16>T;++T)La(f,y+T,E,K)&&no(f,y+T,E)}function sn(f,y,E,T){var K=2*T+1;for(T=0;16>T;++T)La(f,y+T*E,1,K)&&no(f,y+T*E,1)}function ei(f,y,E,T){var K;for(K=3;0<K;--K)Ca(f,y+=4*E,E,T)}function Mo(f,y,E,T){var K;for(K=3;0<K;--K)sn(f,y+=4,E,T)}function ro(f,y,E,T,K,ae,ue,pe){for(ae=2*ae+1;0<K--;){if(An(f,y,E,ae,ue))if(So(f,y,E,pe))no(f,y,E);else{var ge=f,Se=y,He=E,pt=ge[Se-2*He],mt=ge[Se-He],nt=ge[Se+0],Lt=ge[Se+He],bt=ge[Se+2*He],Ke=27*(Pt=co[1020+3*(nt-mt)+co[1020+pt-Lt]])+63>>7,Xe=18*Pt+63>>7,Pt=9*Pt+63>>7;ge[Se-3*He]=tr[255+ge[Se-3*He]+Pt],ge[Se-2*He]=tr[255+pt+Xe],ge[Se-He]=tr[255+mt+Ke],ge[Se+0]=tr[255+nt-Ke],ge[Se+He]=tr[255+Lt-Xe],ge[Se+2*He]=tr[255+bt-Pt]}y+=T}}function ci(f,y,E,T,K,ae,ue,pe){for(ae=2*ae+1;0<K--;){if(An(f,y,E,ae,ue))if(So(f,y,E,pe))no(f,y,E);else{var ge=f,Se=y,He=E,pt=ge[Se-He],mt=ge[Se+0],nt=ge[Se+He],Lt=Sr[112+((bt=3*(mt-pt))+4>>3)],bt=Sr[112+(bt+3>>3)],Ke=Lt+1>>1;ge[Se-2*He]=tr[255+ge[Se-2*He]+Ke],ge[Se-He]=tr[255+pt+bt],ge[Se+0]=tr[255+mt-Lt],ge[Se+He]=tr[255+nt-Ke]}y+=T}}function ka(f,y,E,T,K,ae){ro(f,y,E,1,16,T,K,ae)}function vs(f,y,E,T,K,ae){ro(f,y,1,E,16,T,K,ae)}function Qo(f,y,E,T,K,ae){var ue;for(ue=3;0<ue;--ue)ci(f,y+=4*E,E,1,16,T,K,ae)}function ea(f,y,E,T,K,ae){var ue;for(ue=3;0<ue;--ue)ci(f,y+=4,1,E,16,T,K,ae)}function Di(f,y,E,T,K,ae,ue,pe){ro(f,y,K,1,8,ae,ue,pe),ro(E,T,K,1,8,ae,ue,pe)}function ta(f,y,E,T,K,ae,ue,pe){ro(f,y,1,K,8,ae,ue,pe),ro(E,T,1,K,8,ae,ue,pe)}function kr(f,y,E,T,K,ae,ue,pe){ci(f,y+4*K,K,1,8,ae,ue,pe),ci(E,T+4*K,K,1,8,ae,ue,pe)}function Ya(f,y,E,T,K,ae,ue,pe){ci(f,y+4,1,K,8,ae,ue,pe),ci(E,T+4,1,K,8,ae,ue,pe)}function Ao(){this.ba=new Lr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new qn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Oi(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function na(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Pa(){this.ua=0,this.Wa=new ce,this.vb=new ce,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new te,this.yc=new X}function Ea(){this.xb=this.a=0,this.l=new wi,this.ca=new Lr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new O,this.Pb=0,this.wd=new O,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Pa,this.ab=0,this.gc=u(4,na),this.Oc=0}function ra(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new wi,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function io(f,y,E,T,K,ae,ue){for(f=f==null?0:f[y+0],y=0;y<ue;++y)K[ae+y]=f+E[T+y]&255,f=K[ae+y]}function Bo(f,y,E,T,K,ae,ue){var pe;if(f==null)io(null,null,E,T,K,ae,ue);else for(pe=0;pe<ue;++pe)K[ae+pe]=f[y+pe]+E[T+pe]&255}function so(f,y,E,T,K,ae,ue){if(f==null)io(null,null,E,T,K,ae,ue);else{var pe,ge=f[y+0],Se=ge,He=ge;for(pe=0;pe<ue;++pe)Se=He+(ge=f[y+pe])-Se,He=E[T+pe]+(-256&Se?0>Se?0:255:Se)&255,Se=ge,K[ae+pe]=He}}function gr(f,y,E,T){var K=y.width,ae=y.o;if(t(f!=null&&y!=null),0>E||0>=T||E+T>ae)return null;if(!f.Cc){if(f.ga==null){var ue;if(f.ga=new ra,(ue=f.ga==null)||(ue=y.width*y.o,t(f.Gb.length==0),f.Gb=a(ue),f.Uc=0,f.Gb==null?ue=0:(f.mb=f.Gb,f.nb=f.Uc,f.rc=null,ue=1),ue=!ue),!ue){ue=f.ga;var pe=f.Fa,ge=f.P,Se=f.qc,He=f.mb,pt=f.nb,mt=ge+1,nt=Se-1,Lt=ue.l;if(t(pe!=null&&He!=null&&y!=null),Kn[0]=null,Kn[1]=io,Kn[2]=Bo,Kn[3]=so,ue.ca=He,ue.tb=pt,ue.c=y.width,ue.i=y.height,t(0<ue.c&&0<ue.i),1>=Se)y=0;else if(ue.$a=pe[ge+0]>>0&3,ue.Z=pe[ge+0]>>2&3,ue.Lc=pe[ge+0]>>4&3,ge=pe[ge+0]>>6&3,0>ue.$a||1<ue.$a||4<=ue.Z||1<ue.Lc||ge)y=0;else if(Lt.put=Si,Lt.ac=ur,Lt.bc=Mi,Lt.ma=ue,Lt.width=y.width,Lt.height=y.height,Lt.Da=y.Da,Lt.v=y.v,Lt.va=y.va,Lt.j=y.j,Lt.o=y.o,ue.$a)e:{t(ue.$a==1),y=bi();t:for(;;){if(y==null){y=0;break e}if(t(ue!=null),ue.mc=y,y.c=ue.c,y.i=ue.i,y.l=ue.l,y.l.ma=ue,y.l.width=ue.c,y.l.height=ue.i,y.a=0,U(y.m,pe,mt,nt),!ds(ue.c,ue.i,1,y,null)||(y.ab==1&&y.gc[0].hc==3&&es(y.s)?(ue.ic=1,pe=y.c*y.i,y.Ta=null,y.Ua=0,y.V=a(pe),y.Ba=0,y.V==null?(y.a=1,y=0):y=1):(ue.ic=0,y=bo(y,ue.c)),!y))break t;y=1;break e}ue.mc=null,y=0}else y=nt>=ue.c*ue.i;ue=!y}if(ue)return null;f.ga.Lc!=1?f.Ga=0:T=ae-E}t(f.ga!=null),t(E+T<=ae);e:{if(y=(pe=f.ga).c,ae=pe.l.o,pe.$a==0){if(mt=f.rc,nt=f.Vc,Lt=f.Fa,ge=f.P+1+E*y,Se=f.mb,He=f.nb+E*y,t(ge<=f.P+f.qc),pe.Z!=0)for(t(Kn[pe.Z]!=null),ue=0;ue<T;++ue)Kn[pe.Z](mt,nt,Lt,ge,Se,He,y),mt=Se,nt=He,He+=y,ge+=y;else for(ue=0;ue<T;++ue)i(Se,He,Lt,ge,y),mt=Se,nt=He,He+=y,ge+=y;f.rc=mt,f.Vc=nt}else{if(t(pe.mc!=null),y=E+T,t((ue=pe.mc)!=null),t(y<=ue.i),ue.C>=y)y=1;else if(pe.ic||rt(),pe.ic){pe=ue.V,mt=ue.Ba,nt=ue.c;var bt=ue.i,Ke=(Lt=1,ge=ue.$/nt,Se=ue.$%nt,He=ue.m,pt=ue.s,ue.$),Xe=nt*bt,Pt=nt*y,Bt=pt.wc,St=Ke<Pt?$t(pt,Se,ge):null;t(Ke<=Xe),t(y<=bt),t(es(pt));t:for(;;){for(;!He.h&&Ke<Pt;){if(Se&Bt||(St=$t(pt,Se,ge)),t(St!=null),_e(He),256>(bt=li(St.G[0],St.H[0],He)))pe[mt+Ke]=bt,++Ke,++Se>=nt&&(Se=0,++ge<=y&&!(ge%16)&&yi(ue,ge));else{if(!(280>bt)){Lt=0;break t}bt=Qi(bt-256,He);var Kt,jt=li(St.G[4],St.H[4],He);if(_e(He),!(Ke>=(jt=fs(nt,jt=Qi(jt,He)))&&Xe-Ke>=bt)){Lt=0;break t}for(Kt=0;Kt<bt;++Kt)pe[mt+Ke+Kt]=pe[mt+Ke+Kt-jt];for(Ke+=bt,Se+=bt;Se>=nt;)Se-=nt,++ge<=y&&!(ge%16)&&yi(ue,ge);Ke<Pt&&Se&Bt&&(St=$t(pt,Se,ge))}t(He.h==se(He))}yi(ue,ge>y?y:ge);break t}!Lt||He.h&&Ke<Xe?(Lt=0,ue.a=He.h?5:3):ue.$=Ke,y=Lt}else y=Bi(ue,ue.V,ue.Ba,ue.c,ue.i,y,Go);if(!y){T=0;break e}}E+T>=ae&&(f.Cc=1),T=1}if(!T)return null;if(f.Cc&&((T=f.ga)!=null&&(T.mc=null),f.ga=null,0<f.Ga))return alert("todo:WebPDequantizeLevels"),null}return f.nb+E*K}function x(f,y,E,T,K,ae){for(;0<K--;){var ue,pe=f,ge=y+(E?1:0),Se=f,He=y+(E?0:3);for(ue=0;ue<T;++ue){var pt=Se[He+4*ue];pt!=255&&(pt*=32897,pe[ge+4*ue+0]=pe[ge+4*ue+0]*pt>>23,pe[ge+4*ue+1]=pe[ge+4*ue+1]*pt>>23,pe[ge+4*ue+2]=pe[ge+4*ue+2]*pt>>23)}y+=ae}}function Z(f,y,E,T,K){for(;0<T--;){var ae;for(ae=0;ae<E;++ae){var ue=f[y+2*ae+0],pe=15&(Se=f[y+2*ae+1]),ge=4369*pe,Se=(240&Se|Se>>4)*ge>>16;f[y+2*ae+0]=(240&ue|ue>>4)*ge>>16&240|(15&ue|ue<<4)*ge>>16>>4&15,f[y+2*ae+1]=240&Se|pe}y+=K}}function Ae(f,y,E,T,K,ae,ue,pe){var ge,Se,He=255;for(Se=0;Se<K;++Se){for(ge=0;ge<T;++ge){var pt=f[y+ge];ae[ue+4*ge]=pt,He&=pt}y+=E,ue+=pe}return He!=255}function qe(f,y,E,T,K){var ae;for(ae=0;ae<K;++ae)E[T+ae]=f[y+ae]>>8}function rt(){Ir=x,Zn=Z,Gn=Ae,vr=qe}function yt(f,y,E){re[f]=function(T,K,ae,ue,pe,ge,Se,He,pt,mt,nt,Lt,bt,Ke,Xe,Pt,Bt){var St,Kt=Bt-1>>1,jt=pe[ge+0]|Se[He+0]<<16,an=pt[mt+0]|nt[Lt+0]<<16;t(T!=null);var s=3*jt+an+131074>>2;for(y(T[K+0],255&s,s>>16,bt,Ke),ae!=null&&(s=3*an+jt+131074>>2,y(ae[ue+0],255&s,s>>16,Xe,Pt)),St=1;St<=Kt;++St){var l=pe[ge+St]|Se[He+St]<<16,h=pt[mt+St]|nt[Lt+St]<<16,p=jt+l+an+h+524296,v=p+2*(l+an)>>3;s=v+jt>>1,jt=(p=p+2*(jt+h)>>3)+l>>1,y(T[K+2*St-1],255&s,s>>16,bt,Ke+(2*St-1)*E),y(T[K+2*St-0],255&jt,jt>>16,bt,Ke+(2*St-0)*E),ae!=null&&(s=p+an>>1,jt=v+h>>1,y(ae[ue+2*St-1],255&s,s>>16,Xe,Pt+(2*St-1)*E),y(ae[ue+2*St+0],255&jt,jt>>16,Xe,Pt+(2*St+0)*E)),jt=l,an=h}1&Bt||(s=3*jt+an+131074>>2,y(T[K+Bt-1],255&s,s>>16,bt,Ke+(Bt-1)*E),ae!=null&&(s=3*an+jt+131074>>2,y(ae[ue+Bt-1],255&s,s>>16,Xe,Pt+(Bt-1)*E)))}}function Tt(){Zr[mi]=Nu,Zr[hn]=Xl,Zr[tl]=ks,Zr[Do]=Oo,Zr[zi]=nl,Zr[Wr]=Ql,Zr[Pl]=xc,Zr[si]=Xl,Zr[oi]=Oo,Zr[Ls]=nl,Zr[r]=Ql}function Vt(f){return f&-16384?0>f?0:255:f>>Vh}function Zt(f,y){return Vt((19077*f>>8)+(26149*y>>8)-14234)}function nn(f,y,E){return Vt((19077*f>>8)-(6419*y>>8)-(13320*E>>8)+8708)}function pn(f,y){return Vt((19077*f>>8)+(33050*y>>8)-17685)}function Bn(f,y,E,T,K){T[K+0]=Zt(f,E),T[K+1]=nn(f,y,E),T[K+2]=pn(f,y)}function sr(f,y,E,T,K){T[K+0]=pn(f,y),T[K+1]=nn(f,y,E),T[K+2]=Zt(f,E)}function Fn(f,y,E,T,K){var ae=nn(f,y,E);y=ae<<3&224|pn(f,y)>>3,T[K+0]=248&Zt(f,E)|ae>>5,T[K+1]=y}function Vn(f,y,E,T,K){var ae=240&pn(f,y)|15;T[K+0]=240&Zt(f,E)|nn(f,y,E)>>4,T[K+1]=ae}function Pr(f,y,E,T,K){T[K+0]=255,Bn(f,y,E,T,K+1)}function wr(f,y,E,T,K){sr(f,y,E,T,K),T[K+3]=255}function Li(f,y,E,T,K){Bn(f,y,E,T,K),T[K+3]=255}function Qn(f,y){return 0>f?0:f>y?y:f}function ti(f,y,E){re[f]=function(T,K,ae,ue,pe,ge,Se,He,pt){for(var mt=He+(-2&pt)*E;He!=mt;)y(T[K+0],ae[ue+0],pe[ge+0],Se,He),y(T[K+1],ae[ue+0],pe[ge+0],Se,He+E),K+=2,++ue,++ge,He+=2*E;1&pt&&y(T[K+0],ae[ue+0],pe[ge+0],Se,He)}}function Xa(f,y,E){return E==0?f==0?y==0?6:5:y==0?4:0:E}function ni(f,y,E,T,K){switch(f>>>30){case 3:Fi(y,E,T,K,0);break;case 2:hr(y,E,T,K);break;case 1:ii(y,E,T,K)}}function Sa(f,y){var E,T,K=y.M,ae=y.Nb,ue=f.oc,pe=f.pc+40,ge=f.oc,Se=f.pc+584,He=f.oc,pt=f.pc+600;for(E=0;16>E;++E)ue[pe+32*E-1]=129;for(E=0;8>E;++E)ge[Se+32*E-1]=129,He[pt+32*E-1]=129;for(0<K?ue[pe-1-32]=ge[Se-1-32]=He[pt-1-32]=129:(o(ue,pe-32-1,127,21),o(ge,Se-32-1,127,9),o(He,pt-32-1,127,9)),T=0;T<f.za;++T){var mt=y.ya[y.aa+T];if(0<T){for(E=-1;16>E;++E)i(ue,pe+32*E-4,ue,pe+32*E+12,4);for(E=-1;8>E;++E)i(ge,Se+32*E-4,ge,Se+32*E+4,4),i(He,pt+32*E-4,He,pt+32*E+4,4)}var nt=f.Gd,Lt=f.Hd+T,bt=mt.ad,Ke=mt.Hc;if(0<K&&(i(ue,pe-32,nt[Lt].y,0,16),i(ge,Se-32,nt[Lt].f,0,8),i(He,pt-32,nt[Lt].ea,0,8)),mt.Za){var Xe=ue,Pt=pe-32+16;for(0<K&&(T>=f.za-1?o(Xe,Pt,nt[Lt].y[15],4):i(Xe,Pt,nt[Lt+1].y,0,4)),E=0;4>E;E++)Xe[Pt+128+E]=Xe[Pt+256+E]=Xe[Pt+384+E]=Xe[Pt+0+E];for(E=0;16>E;++E,Ke<<=2)Xe=ue,Pt=pe+Cc[E],Ui[mt.Ob[E]](Xe,Pt),ni(Ke,bt,16*+E,Xe,Pt)}else if(Xe=Xa(T,K,mt.Ob[0]),ss[Xe](ue,pe),Ke!=0)for(E=0;16>E;++E,Ke<<=2)ni(Ke,bt,16*+E,ue,pe+Cc[E]);for(E=mt.Gc,Xe=Xa(T,K,mt.Dd),ki[Xe](ge,Se),ki[Xe](He,pt),Ke=bt,Xe=ge,Pt=Se,255&(mt=E>>0)&&(170&mt?bs(Ke,256,Xe,Pt):Gr(Ke,256,Xe,Pt)),mt=He,Ke=pt,255&(E>>=8)&&(170&E?bs(bt,320,mt,Ke):Gr(bt,320,mt,Ke)),K<f.Ub-1&&(i(nt[Lt].y,0,ue,pe+480,16),i(nt[Lt].f,0,ge,Se+224,8),i(nt[Lt].ea,0,He,pt+224,8)),E=8*ae*f.B,nt=f.sa,Lt=f.ta+16*T+16*ae*f.R,bt=f.qa,mt=f.ra+8*T+E,Ke=f.Ha,Xe=f.Ia+8*T+E,E=0;16>E;++E)i(nt,Lt+E*f.R,ue,pe+32*E,16);for(E=0;8>E;++E)i(bt,mt+E*f.B,ge,Se+32*E,8),i(Ke,Xe+E*f.B,He,pt+32*E,8)}}function ns(f,y,E,T,K,ae,ue,pe,ge){var Se=[0],He=[0],pt=0,mt=ge!=null?ge.kd:0,nt=ge??new Oi;if(f==null||12>E)return 7;nt.data=f,nt.w=y,nt.ha=E,y=[y],E=[E],nt.gb=[nt.gb];e:{var Lt=y,bt=E,Ke=nt.gb;if(t(f!=null),t(bt!=null),t(Ke!=null),Ke[0]=0,12<=bt[0]&&!n(f,Lt[0],"RIFF")){if(n(f,Lt[0]+8,"WEBP")){Ke=3;break e}var Xe=fe(f,Lt[0]+4);if(12>Xe||4294967286<Xe){Ke=3;break e}if(mt&&Xe>bt[0]-8){Ke=7;break e}Ke[0]=Xe,Lt[0]+=12,bt[0]-=12}Ke=0}if(Ke!=0)return Ke;for(Xe=0<nt.gb[0],E=E[0];;){e:{var Pt=f;bt=y,Ke=E;var Bt=Se,St=He,Kt=Lt=[0];if((s=pt=[pt])[0]=0,8>Ke[0])Ke=7;else{if(!n(Pt,bt[0],"VP8X")){if(fe(Pt,bt[0]+4)!=10){Ke=3;break e}if(18>Ke[0]){Ke=7;break e}var jt=fe(Pt,bt[0]+8),an=1+ne(Pt,bt[0]+12);if(2147483648<=an*(Pt=1+ne(Pt,bt[0]+15))){Ke=3;break e}Kt!=null&&(Kt[0]=jt),Bt!=null&&(Bt[0]=an),St!=null&&(St[0]=Pt),bt[0]+=18,Ke[0]-=18,s[0]=1}Ke=0}}if(pt=pt[0],Lt=Lt[0],Ke!=0)return Ke;if(bt=!!(2&Lt),!Xe&&pt)return 3;if(ae!=null&&(ae[0]=!!(16&Lt)),ue!=null&&(ue[0]=bt),pe!=null&&(pe[0]=0),ue=Se[0],Lt=He[0],pt&&bt&&ge==null){Ke=0;break}if(4>E){Ke=7;break}if(Xe&&pt||!Xe&&!pt&&!n(f,y[0],"ALPH")){E=[E],nt.na=[nt.na],nt.P=[nt.P],nt.Sa=[nt.Sa];e:{jt=f,Ke=y,Xe=E;var s=nt.gb;Bt=nt.na,St=nt.P,Kt=nt.Sa,an=22,t(jt!=null),t(Xe!=null),Pt=Ke[0];var l=Xe[0];for(t(Bt!=null),t(Kt!=null),Bt[0]=null,St[0]=null,Kt[0]=0;;){if(Ke[0]=Pt,Xe[0]=l,8>l){Ke=7;break e}var h=fe(jt,Pt+4);if(4294967286<h){Ke=3;break e}var p=8+h+1&-2;if(an+=p,0<s&&an>s){Ke=3;break e}if(!n(jt,Pt,"VP8 ")||!n(jt,Pt,"VP8L")){Ke=0;break e}if(l[0]<p){Ke=7;break e}n(jt,Pt,"ALPH")||(Bt[0]=jt,St[0]=Pt+8,Kt[0]=h),Pt+=p,l-=p}}if(E=E[0],nt.na=nt.na[0],nt.P=nt.P[0],nt.Sa=nt.Sa[0],Ke!=0)break}E=[E],nt.Ja=[nt.Ja],nt.xa=[nt.xa];e:if(s=f,Ke=y,Xe=E,Bt=nt.gb[0],St=nt.Ja,Kt=nt.xa,jt=Ke[0],Pt=!n(s,jt,"VP8 "),an=!n(s,jt,"VP8L"),t(s!=null),t(Xe!=null),t(St!=null),t(Kt!=null),8>Xe[0])Ke=7;else{if(Pt||an){if(s=fe(s,jt+4),12<=Bt&&s>Bt-12){Ke=3;break e}if(mt&&s>Xe[0]-8){Ke=7;break e}St[0]=s,Ke[0]+=8,Xe[0]-=8,Kt[0]=an}else Kt[0]=5<=Xe[0]&&s[jt+0]==47&&!(s[jt+4]>>5),St[0]=Xe[0];Ke=0}if(E=E[0],nt.Ja=nt.Ja[0],nt.xa=nt.xa[0],y=y[0],Ke!=0)break;if(4294967286<nt.Ja)return 3;if(pe==null||bt||(pe[0]=nt.xa?2:1),ue=[ue],Lt=[Lt],nt.xa){if(5>E){Ke=7;break}pe=ue,mt=Lt,bt=ae,f==null||5>E?f=0:5<=E&&f[y+0]==47&&!(f[y+4]>>5)?(Xe=[0],s=[0],Bt=[0],U(St=new O,f,y,E),on(St,Xe,s,Bt)?(pe!=null&&(pe[0]=Xe[0]),mt!=null&&(mt[0]=s[0]),bt!=null&&(bt[0]=Bt[0]),f=1):f=0):f=0}else{if(10>E){Ke=7;break}pe=Lt,f==null||10>E||!Ys(f,y+3,E-3)?f=0:(mt=f[y+0]|f[y+1]<<8|f[y+2]<<16,bt=16383&(f[y+7]<<8|f[y+6]),f=16383&(f[y+9]<<8|f[y+8]),1&mt||3<(mt>>1&7)||!(mt>>4&1)||mt>>5>=nt.Ja||!bt||!f?f=0:(ue&&(ue[0]=bt),pe&&(pe[0]=f),f=1))}if(!f||(ue=ue[0],Lt=Lt[0],pt&&(Se[0]!=ue||He[0]!=Lt)))return 3;ge!=null&&(ge[0]=nt,ge.offset=y-ge.w,t(4294967286>y-ge.w),t(ge.offset==ge.ha-E));break}return Ke==0||Ke==7&&pt&&ge==null?(ae!=null&&(ae[0]|=nt.na!=null&&0<nt.na.length),T!=null&&(T[0]=ue),K!=null&&(K[0]=Lt),0):Ke}function Ma(f,y,E){var T=y.width,K=y.height,ae=0,ue=0,pe=T,ge=K;if(y.Da=f!=null&&0<f.Da,y.Da&&(pe=f.cd,ge=f.bd,ae=f.v,ue=f.j,11>E||(ae&=-2,ue&=-2),0>ae||0>ue||0>=pe||0>=ge||ae+pe>T||ue+ge>K))return 0;if(y.v=ae,y.j=ue,y.va=ae+pe,y.o=ue+ge,y.U=pe,y.T=ge,y.da=f!=null&&0<f.da,y.da){if(!Ge(pe,ge,E=[f.ib],ae=[f.hb]))return 0;y.ib=E[0],y.hb=ae[0]}return y.ob=f!=null&&f.ob,y.Kb=f==null||!f.Sd,y.da&&(y.ob=y.ib<3*T/4&&y.hb<3*K/4,y.Kb=0),1}function Is(f){if(f==null)return 2;if(11>f.S){var y=f.f.RGBA;y.fb+=(f.height-1)*y.A,y.A=-y.A}else y=f.f.kb,f=f.height,y.O+=(f-1)*y.fa,y.fa=-y.fa,y.N+=(f-1>>1)*y.Ab,y.Ab=-y.Ab,y.W+=(f-1>>1)*y.Db,y.Db=-y.Db,y.F!=null&&(y.J+=(f-1)*y.lb,y.lb=-y.lb);return 0}function Fs(f,y,E,T){if(T==null||0>=f||0>=y)return 2;if(E!=null){if(E.Da){var K=E.cd,ae=E.bd,ue=-2&E.v,pe=-2&E.j;if(0>ue||0>pe||0>=K||0>=ae||ue+K>f||pe+ae>y)return 2;f=K,y=ae}if(E.da){if(!Ge(f,y,K=[E.ib],ae=[E.hb]))return 2;f=K[0],y=ae[0]}}T.width=f,T.height=y;e:{var ge=T.width,Se=T.height;if(f=T.S,0>=ge||0>=Se||!(f>=mi&&13>f))f=2;else{if(0>=T.Rd&&T.sd==null){ue=ae=K=y=0;var He=(pe=ge*Ec[f])*Se;if(11>f||(ae=(Se+1)/2*(y=(ge+1)/2),f==12&&(ue=(K=ge)*Se)),(Se=a(He+2*ae+ue))==null){f=1;break e}T.sd=Se,11>f?((ge=T.f.RGBA).eb=Se,ge.fb=0,ge.A=pe,ge.size=He):((ge=T.f.kb).y=Se,ge.O=0,ge.fa=pe,ge.Fd=He,ge.f=Se,ge.N=0+He,ge.Ab=y,ge.Cd=ae,ge.ea=Se,ge.W=0+He+ae,ge.Db=y,ge.Ed=ae,f==12&&(ge.F=Se,ge.J=0+He+2*ae),ge.Tc=ue,ge.lb=K)}if(y=1,K=T.S,ae=T.width,ue=T.height,K>=mi&&13>K)if(11>K)f=T.f.RGBA,y&=(pe=Math.abs(f.A))*(ue-1)+ae<=f.size,y&=pe>=ae*Ec[K],y&=f.eb!=null;else{f=T.f.kb,pe=(ae+1)/2,He=(ue+1)/2,ge=Math.abs(f.fa),Se=Math.abs(f.Ab);var pt=Math.abs(f.Db),mt=Math.abs(f.lb),nt=mt*(ue-1)+ae;y&=ge*(ue-1)+ae<=f.Fd,y&=Se*(He-1)+pe<=f.Cd,y=(y&=pt*(He-1)+pe<=f.Ed)&ge>=ae&Se>=pe&pt>=pe,y&=f.y!=null,y&=f.f!=null,y&=f.ea!=null,K==12&&(y&=mt>=ae,y&=nt<=f.Tc,y&=f.F!=null)}else y=0;f=y?0:2}}return f!=0||E!=null&&E.fd&&(f=Is(T)),f}var xr=64,ia=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],hi=24,ri=32,sa=8,Vr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];lt("Predictor0","PredictorAdd0"),re.Predictor0=function(){return 4278190080},re.Predictor1=function(f){return f},re.Predictor2=function(f,y,E){return y[E+0]},re.Predictor3=function(f,y,E){return y[E+1]},re.Predictor4=function(f,y,E){return y[E-1]},re.Predictor5=function(f,y,E){return Pe(Pe(f,y[E+1]),y[E+0])},re.Predictor6=function(f,y,E){return Pe(f,y[E-1])},re.Predictor7=function(f,y,E){return Pe(f,y[E+0])},re.Predictor8=function(f,y,E){return Pe(y[E-1],y[E+0])},re.Predictor9=function(f,y,E){return Pe(y[E+0],y[E+1])},re.Predictor10=function(f,y,E){return Pe(Pe(f,y[E-1]),Pe(y[E+0],y[E+1]))},re.Predictor11=function(f,y,E){var T=y[E+0];return 0>=Ct(T>>24&255,f>>24&255,(y=y[E-1])>>24&255)+Ct(T>>16&255,f>>16&255,y>>16&255)+Ct(T>>8&255,f>>8&255,y>>8&255)+Ct(255&T,255&f,255&y)?T:f},re.Predictor12=function(f,y,E){var T=y[E+0];return(ot((f>>24&255)+(T>>24&255)-((y=y[E-1])>>24&255))<<24|ot((f>>16&255)+(T>>16&255)-(y>>16&255))<<16|ot((f>>8&255)+(T>>8&255)-(y>>8&255))<<8|ot((255&f)+(255&T)-(255&y)))>>>0},re.Predictor13=function(f,y,E){var T=y[E-1];return(_t((f=Pe(f,y[E+0]))>>24&255,T>>24&255)<<24|_t(f>>16&255,T>>16&255)<<16|_t(f>>8&255,T>>8&255)<<8|_t(f>>0&255,T>>0&255))>>>0};var js=re.PredictorAdd0;re.PredictorAdd1=ze,lt("Predictor2","PredictorAdd2"),lt("Predictor3","PredictorAdd3"),lt("Predictor4","PredictorAdd4"),lt("Predictor5","PredictorAdd5"),lt("Predictor6","PredictorAdd6"),lt("Predictor7","PredictorAdd7"),lt("Predictor8","PredictorAdd8"),lt("Predictor9","PredictorAdd9"),lt("Predictor10","PredictorAdd10"),lt("Predictor11","PredictorAdd11"),lt("Predictor12","PredictorAdd12"),lt("Predictor13","PredictorAdd13");var Ci=re.PredictorAdd2;Ht("ColorIndexInverseTransform","MapARGB","32b",function(f){return f>>8&255},function(f){return f}),Ht("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(f){return f},function(f){return f>>8&255});var Qa,Er=re.ColorIndexInverseTransform,_s=re.MapARGB,Ri=re.VP8LColorIndexInverseTransformAlpha,To=re.MapAlpha,zs=re.VP8LPredictorsAdd=[];zs.length=16,(re.VP8LPredictors=[]).length=16,(re.VP8LPredictorsAdd_C=[]).length=16,(re.VP8LPredictors_C=[]).length=16;var ys,Rr,Br,rs,fi,Ii,Us,Fi,hr,bs,ii,Gr,No,Aa,Ba,Hr,di,oo,ws,oa,ao,lo,qs,ji,Ir,Zn,Gn,vr,er=a(511),is=a(2041),uo=a(225),xs=a(767),el=0,co=is,Sr=uo,tr=xs,pi=er,mi=0,hn=1,tl=2,Do=3,zi=4,Wr=5,Pl=6,si=7,oi=8,Ls=9,r=10,c=[2,3,7],g=[3,3,11],P=[280,256,256,256,40],D=[0,1,1,1,0],le=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],je=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ct=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],vt=8,At=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Gt=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],rn=null,En=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ai=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Mr=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],gi=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],fr=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Cs=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],El=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ss=[],Ui=[],ki=[],Tu=1,Sl=2,Kn=[],Zr=[];yt("UpsampleRgbLinePair",Bn,3),yt("UpsampleBgrLinePair",sr,3),yt("UpsampleRgbaLinePair",Li,4),yt("UpsampleBgraLinePair",wr,4),yt("UpsampleArgbLinePair",Pr,4),yt("UpsampleRgba4444LinePair",Vn,2),yt("UpsampleRgb565LinePair",Fn,2);var Nu=re.UpsampleRgbLinePair,ks=re.UpsampleBgrLinePair,Xl=re.UpsampleRgbaLinePair,Oo=re.UpsampleBgraLinePair,nl=re.UpsampleArgbLinePair,Ql=re.UpsampleRgba4444LinePair,xc=re.UpsampleRgb565LinePair,eu=16,Ml=1<<eu-1,Al=-227,Du=482,Vh=6,rl=0,tu=a(256),Gh=a(256),Hh=a(256),nu=a(256),ru=a(Du-Al),Lc=a(Du-Al);ti("YuvToRgbRow",Bn,3),ti("YuvToBgrRow",sr,3),ti("YuvToRgbaRow",Li,4),ti("YuvToBgraRow",wr,4),ti("YuvToArgbRow",Pr,4),ti("YuvToRgba4444Row",Vn,2),ti("YuvToRgb565Row",Fn,2);var Cc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],iu=[0,2,8],kc=[8,7,6,4,4,2,2,2,1,1,1,1],Pc=1;this.WebPDecodeRGBA=function(f,y,E,T,K){var ae=hn,ue=new Ao,pe=new Lr;ue.ba=pe,pe.S=ae,pe.width=[pe.width],pe.height=[pe.height];var ge=pe.width,Se=pe.height,He=new Dr;if(He==null||f==null)var pt=2;else t(He!=null),pt=ns(f,y,E,He.width,He.height,He.Pd,He.Qd,He.format,null);if(pt!=0?ge=0:(ge!=null&&(ge[0]=He.width[0]),Se!=null&&(Se[0]=He.height[0]),ge=1),ge){pe.width=pe.width[0],pe.height=pe.height[0],T!=null&&(T[0]=pe.width),K!=null&&(K[0]=pe.height);e:{if(T=new wi,(K=new Oi).data=f,K.w=y,K.ha=E,K.kd=1,y=[0],t(K!=null),((f=ns(K.data,K.w,K.ha,null,null,null,y,null,K))==0||f==7)&&y[0]&&(f=4),(y=f)==0){if(t(ue!=null),T.data=K.data,T.w=K.w+K.offset,T.ha=K.ha-K.offset,T.put=Si,T.ac=ur,T.bc=Mi,T.ma=ue,K.xa){if((f=bi())==null){ue=1;break e}if(function(mt,nt){var Lt=[0],bt=[0],Ke=[0];t:for(;;){if(mt==null)return 0;if(nt==null)return mt.a=2,0;if(mt.l=nt,mt.a=0,U(mt.m,nt.data,nt.w,nt.ha),!on(mt.m,Lt,bt,Ke)){mt.a=3;break t}if(mt.xb=Sl,nt.width=Lt[0],nt.height=bt[0],!ds(Lt[0],bt[0],1,mt,null))break t;return 1}return t(mt.a!=0),0}(f,T)){if(T=(y=Fs(T.width,T.height,ue.Oa,ue.ba))==0){t:{T=f;n:for(;;){if(T==null){T=0;break t}if(t(T.s.yc!=null),t(T.s.Ya!=null),t(0<T.s.Wb),t((E=T.l)!=null),t((K=E.ma)!=null),T.xb!=0){if(T.ca=K.ba,T.tb=K.tb,t(T.ca!=null),!Ma(K.Oa,E,Do)){T.a=2;break n}if(!bo(T,E.width)||E.da)break n;if((E.da||qt(T.ca.S))&&rt(),11>T.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),T.ca.f.kb.F!=null&&rt()),T.Pb&&0<T.s.ua&&T.s.vb.X==null&&!De(T.s.vb,T.s.Wa.Xa)){T.a=1;break n}T.xb=0}if(!Bi(T,T.V,T.Ba,T.c,T.i,E.o,yo))break n;K.Dc=T.Ma,T=1;break t}t(T.a!=0),T=0}T=!T}T&&(y=f.a)}else y=f.a}else{if((f=new Rn)==null){ue=1;break e}if(f.Fa=K.na,f.P=K.P,f.qc=K.Sa,Ts(f,T)){if((y=Fs(T.width,T.height,ue.Oa,ue.ba))==0){if(f.Aa=0,E=ue.Oa,t((K=f)!=null),E!=null){if(0<(ge=0>(ge=E.Md)?0:100<ge?255:255*ge/100)){for(Se=He=0;4>Se;++Se)12>(pt=K.pb[Se]).lc&&(pt.ia=ge*kc[0>pt.lc?0:pt.lc]>>3),He|=pt.ia;He&&(alert("todo:VP8InitRandom"),K.ia=1)}K.Ga=E.Id,100<K.Ga?K.Ga=100:0>K.Ga&&(K.Ga=0)}bn(f,T)||(y=f.a)}}else y=f.a}y==0&&ue.Oa!=null&&ue.Oa.fd&&(y=Is(ue.ba))}ue=y}ae=ue!=0?null:11>ae?pe.f.RGBA.eb:pe.f.kb.y}else ae=null;return ae};var Ec=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function _(re,Ie){for(var Je="",V=0;V<4;V++)Je+=String.fromCharCode(re[Ie++]);return Je}function b(re,Ie){return(re[Ie+0]<<0|re[Ie+1]<<8|re[Ie+2]<<16)>>>0}function w(re,Ie){return(re[Ie+0]<<0|re[Ie+1]<<8|re[Ie+2]<<16|re[Ie+3]<<24)>>>0}new m;var S=[0],C=[0],F=[],R=new m,$=e,j=function(re,Ie){var Je={},V=0,X=!1,N=0,te=0;if(Je.frames=[],!function(J,se,de,_e){for(var he=0;he<_e;he++)if(J[se+he]!=de.charCodeAt(he))return!0;return!1}(re,Ie,"RIFF",4)){var W,H;for(w(re,Ie+=4),Ie+=8;Ie<re.length;){var me=_(re,Ie),U=w(re,Ie+=4);Ie+=4;var I=U+(1&U);switch(me){case"VP8 ":case"VP8L":Je.frames[V]===void 0&&(Je.frames[V]={}),(O=Je.frames[V]).src_off=X?te:Ie-8,O.src_size=N+U+8,V++,X&&(X=!1,N=0,te=0);break;case"VP8X":(O=Je.header={}).feature_flags=re[Ie];var Q=Ie+4;O.canvas_width=1+b(re,Q),Q+=3,O.canvas_height=1+b(re,Q),Q+=3;break;case"ALPH":X=!0,N=I+8,te=Ie-8;break;case"ANIM":(O=Je.header).bgcolor=w(re,Ie),Q=Ie+4,O.loop_count=(W=re)[(H=Q)+0]<<0|W[H+1]<<8,Q+=2;break;case"ANMF":var Re,O;(O=Je.frames[V]={}).offset_x=2*b(re,Ie),Ie+=3,O.offset_y=2*b(re,Ie),Ie+=3,O.width=1+b(re,Ie),Ie+=3,O.height=1+b(re,Ie),Ie+=3,O.duration=b(re,Ie),Ie+=3,Re=re[Ie++],O.dispose=1&Re,O.blend=Re>>1&1}me!="ANMF"&&(Ie+=I)}return Je}}($,0);j.response=$,j.rgbaoutput=!0,j.dataurl=!1;var G=j.header?j.header:null,Y=j.frames?j.frames:null;if(G){G.loop_counter=G.loop_count,S=[G.canvas_height],C=[G.canvas_width];for(var ke=0;ke<Y.length&&Y[ke].blend!=0;ke++);}var Ce=Y[0],be=R.WebPDecodeRGBA($,Ce.src_off,Ce.src_size,C,S);Ce.rgba=be,Ce.imgwidth=C[0],Ce.imgheight=S[0];for(var ie=0;ie<C[0]*S[0]*4;ie++)F[ie]=be[ie];return this.width=C,this.height=S,this.data=F,this}(function(e){var t=function(){return typeof ad=="function"},n=function(S,C,F,R){var $=4,j=u;switch(R){case e.image_compression.FAST:$=1,j=a;break;case e.image_compression.MEDIUM:$=6,j=d;break;case e.image_compression.SLOW:$=9,j=m}S=i(S,C,F,j);var G=ad(S,{level:$});return e.__addimage__.arrayBufferToBinaryString(G)},i=function(S,C,F,R){for(var $,j,G,Y=S.length/C,ke=new Uint8Array(S.length+Y),Ce=b(),be=0;be<Y;be+=1){if(G=be*C,$=S.subarray(G,G+C),R)ke.set(R($,F,j),G+be);else{for(var ie,re=Ce.length,Ie=[];ie<re;ie+=1)Ie[ie]=Ce[ie]($,F,j);var Je=w(Ie.concat());ke.set(Ie[Je],G+be)}j=$}return ke},o=function(S){var C=Array.apply([],S);return C.unshift(0),C},a=function(S,C){var F,R=[],$=S.length;R[0]=1;for(var j=0;j<$;j+=1)F=S[j-C]||0,R[j+1]=S[j]-F+256&255;return R},u=function(S,C,F){var R,$=[],j=S.length;$[0]=2;for(var G=0;G<j;G+=1)R=F&&F[G]||0,$[G+1]=S[G]-R+256&255;return $},d=function(S,C,F){var R,$,j=[],G=S.length;j[0]=3;for(var Y=0;Y<G;Y+=1)R=S[Y-C]||0,$=F&&F[Y]||0,j[Y+1]=S[Y]+256-(R+$>>>1)&255;return j},m=function(S,C,F){var R,$,j,G,Y=[],ke=S.length;Y[0]=4;for(var Ce=0;Ce<ke;Ce+=1)R=S[Ce-C]||0,$=F&&F[Ce]||0,j=F&&F[Ce-C]||0,G=_(R,$,j),Y[Ce+1]=S[Ce]-G+256&255;return Y},_=function(S,C,F){if(S===C&&C===F)return S;var R=Math.abs(C-F),$=Math.abs(S-F),j=Math.abs(S+C-F-F);return R<=$&&R<=j?S:$<=j?C:F},b=function(){return[o,a,u,d,m]},w=function(S){var C=S.map(function(F){return F.reduce(function(R,$){return R+Math.abs($)},0)});return C.indexOf(Math.min.apply(null,C))};e.processPNG=function(S,C,F,R){var $,j,G,Y,ke,Ce,be,ie,re,Ie,Je,V,X,N,te,W=this.decode.FLATE_DECODE,H="";if(this.__addimage__.isArrayBuffer(S)&&(S=new Uint8Array(S)),this.__addimage__.isArrayBufferView(S)){if(S=(G=new Kx(S)).imgData,j=G.bits,$=G.colorSpace,ke=G.colors,[4,6].indexOf(G.colorType)!==-1){if(G.bits===8){re=(ie=G.pixelBitlength==32?new Uint32Array(G.decodePixels().buffer):G.pixelBitlength==16?new Uint16Array(G.decodePixels().buffer):new Uint8Array(G.decodePixels().buffer)).length,Je=new Uint8Array(re*G.colors),Ie=new Uint8Array(re);var me,U=G.pixelBitlength-G.bits;for(N=0,te=0;N<re;N++){for(X=ie[N],me=0;me<U;)Je[te++]=X>>>me&255,me+=G.bits;Ie[N]=X>>>me&255}}if(G.bits===16){re=(ie=new Uint32Array(G.decodePixels().buffer)).length,Je=new Uint8Array(re*(32/G.pixelBitlength)*G.colors),Ie=new Uint8Array(re*(32/G.pixelBitlength)),V=G.colors>1,N=0,te=0;for(var I=0;N<re;)X=ie[N++],Je[te++]=X>>>0&255,V&&(Je[te++]=X>>>16&255,X=ie[N++],Je[te++]=X>>>0&255),Ie[I++]=X>>>16&255;j=8}R!==e.image_compression.NONE&&t()?(S=n(Je,G.width*G.colors,G.colors,R),be=n(Ie,G.width,1,R)):(S=Je,be=Ie,W=void 0)}if(G.colorType===3&&($=this.color_spaces.INDEXED,Ce=G.palette,G.transparency.indexed)){var Q=G.transparency.indexed,Re=0;for(N=0,re=Q.length;N<re;++N)Re+=Q[N];if((Re/=255)===re-1&&Q.indexOf(0)!==-1)Y=[Q.indexOf(0)];else if(Re!==re){for(ie=G.decodePixels(),Ie=new Uint8Array(ie.length),N=0,re=ie.length;N<re;N++)Ie[N]=Q[ie[N]];be=n(Ie,G.width,1)}}var O=function(J){var se;switch(J){case e.image_compression.FAST:se=11;break;case e.image_compression.MEDIUM:se=13;break;case e.image_compression.SLOW:se=14;break;default:se=12}return se}(R);return W===this.decode.FLATE_DECODE&&(H="/Predictor "+O+" "),H+="/Colors "+ke+" /BitsPerComponent "+j+" /Columns "+G.width,(this.__addimage__.isArrayBuffer(S)||this.__addimage__.isArrayBufferView(S))&&(S=this.__addimage__.arrayBufferToBinaryString(S)),(be&&this.__addimage__.isArrayBuffer(be)||this.__addimage__.isArrayBufferView(be))&&(be=this.__addimage__.arrayBufferToBinaryString(be)),{alias:F,data:S,index:C,filter:W,decodeParameters:H,transparency:Y,palette:Ce,sMask:be,predictor:O,width:G.width,height:G.height,bitsPerComponent:j,colorSpace:$}}}})(mn.API),function(e){e.processGIF89A=function(t,n,i,o){var a=new Jx(t),u=a.width,d=a.height,m=[];a.decodeAndBlitFrameRGBA(0,m);var _={data:m,width:u,height:d},b=new Af(100).encode(_,100);return e.processJPEG.call(this,b,n,i,o)},e.processGIF87A=e.processGIF89A}(mn.API),Io.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:o,green:i,blue:n,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Io.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){ar.log("bit decode error:"+n)}},Io.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,o=0;o<t;o++)for(var a=this.datav.getUint8(this.pos++,!0),u=i*this.width*4+8*o*4,d=0;d<8&&8*o+d<this.width;d++){var m=this.palette[a>>7-d&1];this.data[u+4*d]=m.blue,this.data[u+4*d+1]=m.green,this.data[u+4*d+2]=m.red,this.data[u+4*d+3]=255}n!==0&&(this.pos+=4-n)}},Io.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,o=0;o<e;o++){var a=this.datav.getUint8(this.pos++,!0),u=i*this.width*4+2*o*4,d=a>>4,m=15&a,_=this.palette[d];if(this.data[u]=_.blue,this.data[u+1]=_.green,this.data[u+2]=_.red,this.data[u+3]=255,2*o+1>=this.width)break;_=this.palette[m],this.data[u+4]=_.blue,this.data[u+4+1]=_.green,this.data[u+4+2]=_.red,this.data[u+4+3]=255}t!==0&&(this.pos+=4-t)}},Io.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var o=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+4*i;if(o<this.palette.length){var u=this.palette[o];this.data[a]=u.red,this.data[a+1]=u.green,this.data[a+2]=u.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}e!==0&&(this.pos+=4-e)}},Io.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(a&t)/t*255|0,d=(a>>5&t)/t*255|0,m=(a>>10&t)/t*255|0,_=a>>15?255:0,b=i*this.width*4+4*o;this.data[b]=m,this.data[b+1]=d,this.data[b+2]=u,this.data[b+3]=_}this.pos+=e}},Io.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var o=this.bottom_up?i:this.height-1-i,a=0;a<this.width;a++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var d=(u&t)/t*255|0,m=(u>>5&n)/n*255|0,_=(u>>11)/t*255|0,b=o*this.width*4+4*a;this.data[b]=_,this.data[b+1]=m,this.data[b+2]=d,this.data[b+3]=255}this.pos+=e}},Io.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),u=t*this.width*4+4*n;this.data[u]=a,this.data[u+1]=o,this.data[u+2]=i,this.data[u+3]=255}this.pos+=this.width%4}},Io.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),d=t*this.width*4+4*n;this.data[d]=a,this.data[d+1]=o,this.data[d+2]=i,this.data[d+3]=u}},Io.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,i,o){var a=new Io(t,!1),u=a.width,d=a.height,m={data:a.getData(),width:u,height:d},_=new Af(100).encode(m,100);return e.processJPEG.call(this,_,n,i,o)}}(mn.API),H0.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,i,o){var a=new H0(t),u=a.width,d=a.height,m={data:a.getData(),width:u,height:d},_=new Af(100).encode(m,100);return e.processJPEG.call(this,_,n,i,o)}}(mn.API),mn.API.processRGBA=function(e,t,n){for(var i=e.data,o=i.length,a=new Uint8Array(o/4*3),u=new Uint8Array(o/4),d=0,m=0,_=0;_<o;_+=4){var b=i[_],w=i[_+1],S=i[_+2],C=i[_+3];a[d++]=b,a[d++]=w,a[d++]=S,u[m++]=C}var F=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(u),data:F,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},mn.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},cu=mn.API,zc=cu.getCharWidthsArray=function(e,t){var n,i,o=(t=t||{}).font||this.internal.getFont(),a=t.fontSize||this.internal.getFontSize(),u=t.charSpace||this.internal.getCharSpace(),d=t.widths?t.widths:o.metadata.Unicode.widths,m=d.fof?d.fof:1,_=t.kerning?t.kerning:o.metadata.Unicode.kerning,b=_.fof?_.fof:1,w=t.doKerning!==!1,S=0,C=e.length,F=0,R=d[0]||m,$=[];for(n=0;n<C;n++)i=e.charCodeAt(n),typeof o.metadata.widthOfString=="function"?$.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(i))+u*(1e3/a)||0)/1e3):(S=w&&or(_[i])==="object"&&!isNaN(parseInt(_[i][F],10))?_[i][F]/b:0,$.push((d[i]||R)/m+S)),F=i;return $},q0=cu.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),i=t.font||this.internal.getFont(),o=t.charSpace||this.internal.getCharSpace();return cu.processArabic&&(e=cu.processArabic(e)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(e,n,o)/n:zc.apply(this,arguments).reduce(function(a,u){return a+u},0)},$0=function(e,t,n,i){for(var o=[],a=0,u=e.length,d=0;a!==u&&d+t[a]<n;)d+=t[a],a++;o.push(e.slice(0,a));var m=a;for(d=0;a!==u;)d+t[a]>i&&(o.push(e.slice(m,a)),d=0,m=a),d+=t[a],a++;return m!==a&&o.push(e.slice(m,a)),o},V0=function(e,t,n){n||(n={});var i,o,a,u,d,m,_,b=[],w=[b],S=n.textIndent||0,C=0,F=0,R=e.split(" "),$=zc.apply(this,[" ",n])[0];if(m=n.lineIndent===-1?R[0].length+2:n.lineIndent||0){var j=Array(m).join(" "),G=[];R.map(function(ke){(ke=ke.split(/\s*\n/)).length>1?G=G.concat(ke.map(function(Ce,be){return(be&&Ce.length?`
`:"")+Ce})):G.push(ke[0])}),R=G,m=q0.apply(this,[j,n])}for(a=0,u=R.length;a<u;a++){var Y=0;if(i=R[a],m&&i[0]==`
`&&(i=i.substr(1),Y=1),S+C+(F=(o=zc.apply(this,[i,n])).reduce(function(ke,Ce){return ke+Ce},0))>t||Y){if(F>t){for(d=$0.apply(this,[i,o,t-(S+C),t]),b.push(d.shift()),b=[d.pop()];d.length;)w.push([d.shift()]);F=o.slice(i.length-(b[0]?b[0].length:0)).reduce(function(ke,Ce){return ke+Ce},0)}else b=[i];w.push(b),S=F+m,C=$}else b.push(i),S+=C+F,C=$}return _=m?function(ke,Ce){return(Ce?j:"")+ke.join(" ")}:function(ke){return ke.join(" ")},w.map(_)},cu.splitTextToSize=function(e,t,n){var i,o=(n=n||{}).fontSize||this.internal.getFontSize(),a=(function(b){if(b.widths&&b.kerning)return{widths:b.widths,kerning:b.kerning};var w=this.internal.getFont(b.fontName,b.fontStyle);return w.metadata.Unicode?{widths:w.metadata.Unicode.widths||{0:1},kerning:w.metadata.Unicode.kerning||{}}:{font:w.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);i=Array.isArray(e)?e:String(e).split(/\r?\n/);var u=1*this.internal.scaleFactor*t/o;a.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/o:0,a.lineIndent=n.lineIndent;var d,m,_=[];for(d=0,m=i.length;d<m;d++)_=_.concat(V0.apply(this,[i[d],u,a]));return _},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},i={},o=0;o<t.length;o++)n[t[o]]="0123456789abcdef"[o],i["0123456789abcdef"[o]]=t[o];var a=function(w){return"0x"+parseInt(w,10).toString(16)},u=e.__fontmetrics__.compress=function(w){var S,C,F,R,$=["{"];for(var j in w){if(S=w[j],isNaN(parseInt(j,10))?C="'"+j+"'":(j=parseInt(j,10),C=(C=a(j).slice(2)).slice(0,-1)+i[C.slice(-1)]),typeof S=="number")S<0?(F=a(S).slice(3),R="-"):(F=a(S).slice(2),R=""),F=R+F.slice(0,-1)+i[F.slice(-1)];else{if(or(S)!=="object")throw new Error("Don't know what to do with value type "+or(S)+".");F=u(S)}$.push(C+F)}return $.push("}"),$.join("")},d=e.__fontmetrics__.uncompress=function(w){if(typeof w!="string")throw new Error("Invalid argument passed to uncompress.");for(var S,C,F,R,$={},j=1,G=$,Y=[],ke="",Ce="",be=w.length-1,ie=1;ie<be;ie+=1)(R=w[ie])=="'"?S?(F=S.join(""),S=void 0):S=[]:S?S.push(R):R=="{"?(Y.push([G,F]),G={},F=void 0):R=="}"?((C=Y.pop())[0][C[1]]=G,F=void 0,G=C[0]):R=="-"?j=-1:F===void 0?n.hasOwnProperty(R)?(ke+=n[R],F=parseInt(ke,16)*j,j=1,ke=""):ke+=R:n.hasOwnProperty(R)?(Ce+=n[R],G[F]=parseInt(Ce,16)*j,j=1,F=void 0,Ce=""):Ce+=R;return $},m={codePages:["WinAnsiEncoding"],WinAnsiEncoding:d("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},_={Unicode:{Courier:m,"Courier-Bold":m,"Courier-BoldOblique":m,"Courier-Oblique":m,Helvetica:m,"Helvetica-Bold":m,"Helvetica-BoldOblique":m,"Helvetica-Oblique":m,"Times-Roman":m,"Times-Bold":m,"Times-BoldItalic":m,"Times-Italic":m}},b={Unicode:{"Courier-Oblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":d("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":d("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:d("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:d("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":d("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":d("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(w){var S=w.font,C=b.Unicode[S.postScriptName];C&&(S.metadata.Unicode={},S.metadata.Unicode.widths=C.widths,S.metadata.Unicode.kerning=C.kerning);var F=_.Unicode[S.postScriptName];F&&(S.metadata.Unicode.encoding=F,S.encoding=F.codePages[0])}])}(mn.API),function(e){var t=function(n){for(var i=n.length,o=new Uint8Array(i),a=0;a<i;a++)o[a]=n.charCodeAt(a);return o};e.API.events.push(["addFont",function(n){var i=void 0,o=n.font,a=n.instance;if(!o.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(i=a.existsFileInVFS(o.postScriptName)===!1?a.loadFile(o.postScriptName):a.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(u,d){d=/^\x00\x01\x00\x00/.test(d)?t(d):t(ic(d)),u.metadata=e.API.TTFFont.open(d),u.metadata.Unicode=u.metadata.Unicode||{encoding:{},kerning:{},widths:[]},u.metadata.glyIdsUsed=[0]})(o,i)}}])}(mn),function(e){function t(){return(vn.canvg?Promise.resolve(vn.canvg):Ul(()=>import("./index.es.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}mn.API.addSvgAsImage=function(n,i,o,a,u,d,m,_){if(isNaN(i)||isNaN(o))throw ar.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(u))throw ar.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var b=document.createElement("canvas");b.width=a,b.height=u;var w=b.getContext("2d");w.fillStyle="#fff",w.fillRect(0,0,b.width,b.height);var S={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},C=this;return t().then(function(F){return F.fromString(w,n,S)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(F){return F.render(S)}).then(function(){C.addImage(b.toDataURL("image/jpeg",1),i,o,a,u,m,_)})}}(),mn.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var o=0;o<this.internal.pages[i].length;o++)this.internal.pages[i][o]=this.internal.pages[i][o].replace(t,n);return this},mn.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var i,o,a,u={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},d=Object.keys(u),m=[],_=0,b=0,w=0;function S(F,R){var $,j=!1;for($=0;$<F.length;$+=1)F[$]===R&&(j=!0);return j}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(u)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var C=d.length;for(w=0;w<C;w+=1)n[d[w]].value=n[d[w]].defaultValue,n[d[w]].explicitSet=!1}if(or(e)==="object"){for(o in e)if(a=e[o],S(d,o)&&a!==void 0){if(n[o].type==="boolean"&&typeof a=="boolean")n[o].value=a;else if(n[o].type==="name"&&S(n[o].valueSet,a))n[o].value=a;else if(n[o].type==="integer"&&Number.isInteger(a))n[o].value=a;else if(n[o].type==="array"){for(_=0;_<a.length;_+=1)if(i=!0,a[_].length===1&&typeof a[_][0]=="number")m.push(String(a[_]-1));else if(a[_].length>1){for(b=0;b<a[_].length;b+=1)typeof a[_][b]!="number"&&(i=!1);i===!0&&m.push([a[_][0]-1,a[_][1]-1].join(" "))}n[o].value="["+m.join(" ")+"]"}else n[o].value=n[o].defaultValue;n[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var F,R=[];for(F in n)n[F].explicitSet===!0&&(n[F].type==="name"?R.push("/"+F+" /"+n[F].value):R.push("/"+F+" "+n[F].value));R.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+R.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(i)),u=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),d=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),m=unescape(encodeURIComponent("</x:xmpmeta>")),_=a.length+u.length+d.length+o.length+m.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+_+" >>"),this.internal.write("stream"),this.internal.write(o+a+u+d+m),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(i,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(mn.API),function(e){var t=e.API,n=t.pdfEscape16=function(a,u){for(var d,m=u.metadata.Unicode.widths,_=["","0","00","000","0000"],b=[""],w=0,S=a.length;w<S;++w){if(d=u.metadata.characterToGlyph(a.charCodeAt(w)),u.metadata.glyIdsUsed.push(d),u.metadata.toUnicode[d]=a.charCodeAt(w),m.indexOf(d)==-1&&(m.push(d),m.push([parseInt(u.metadata.widthOfGlyph(d),10)])),d=="0")return b.join("");d=d.toString(16),b.push(_[4-d.length],d)}return b.join("")},i=function(a){var u,d,m,_,b,w,S;for(b=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,m=[],w=0,S=(d=Object.keys(a).sort(function(C,F){return C-F})).length;w<S;w++)u=d[w],m.length>=100&&(b+=`
`+m.length+` beginbfchar
`+m.join(`
`)+`
endbfchar`,m=[]),a[u]!==void 0&&a[u]!==null&&typeof a[u].toString=="function"&&(_=("0000"+a[u].toString(16)).slice(-4),u=("0000"+(+u).toString(16)).slice(-4),m.push("<"+u+"><"+_+">"));return m.length&&(b+=`
`+m.length+` beginbfchar
`+m.join(`
`)+`
endbfchar
`),b+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(a){(function(u){var d=u.font,m=u.out,_=u.newObject,b=u.putStream;if(d.metadata instanceof e.API.TTFFont&&d.encoding==="Identity-H"){for(var w=d.metadata.Unicode.widths,S=d.metadata.subset.encode(d.metadata.glyIdsUsed,1),C="",F=0;F<S.length;F++)C+=String.fromCharCode(S[F]);var R=_();b({data:C,addLength1:!0,objectId:R}),m("endobj");var $=_();b({data:i(d.metadata.toUnicode),addLength1:!0,objectId:$}),m("endobj");var j=_();m("<<"),m("/Type /FontDescriptor"),m("/FontName /"+mu(d.fontName)),m("/FontFile2 "+R+" 0 R"),m("/FontBBox "+e.API.PDFObject.convert(d.metadata.bbox)),m("/Flags "+d.metadata.flags),m("/StemV "+d.metadata.stemV),m("/ItalicAngle "+d.metadata.italicAngle),m("/Ascent "+d.metadata.ascender),m("/Descent "+d.metadata.decender),m("/CapHeight "+d.metadata.capHeight),m(">>"),m("endobj");var G=_();m("<<"),m("/Type /Font"),m("/BaseFont /"+mu(d.fontName)),m("/FontDescriptor "+j+" 0 R"),m("/W "+e.API.PDFObject.convert(w)),m("/CIDToGIDMap /Identity"),m("/DW 1000"),m("/Subtype /CIDFontType2"),m("/CIDSystemInfo"),m("<<"),m("/Supplement 0"),m("/Registry (Adobe)"),m("/Ordering ("+d.encoding+")"),m(">>"),m(">>"),m("endobj"),d.objectNumber=_(),m("<<"),m("/Type /Font"),m("/Subtype /Type0"),m("/ToUnicode "+$+" 0 R"),m("/BaseFont /"+mu(d.fontName)),m("/Encoding /"+d.encoding),m("/DescendantFonts ["+G+" 0 R]"),m(">>"),m("endobj"),d.isAlreadyPutted=!0}})(a)}]),t.events.push(["putFont",function(a){(function(u){var d=u.font,m=u.out,_=u.newObject,b=u.putStream;if(d.metadata instanceof e.API.TTFFont&&d.encoding==="WinAnsiEncoding"){for(var w=d.metadata.rawData,S="",C=0;C<w.length;C++)S+=String.fromCharCode(w[C]);var F=_();b({data:S,addLength1:!0,objectId:F}),m("endobj");var R=_();b({data:i(d.metadata.toUnicode),addLength1:!0,objectId:R}),m("endobj");var $=_();m("<<"),m("/Descent "+d.metadata.decender),m("/CapHeight "+d.metadata.capHeight),m("/StemV "+d.metadata.stemV),m("/Type /FontDescriptor"),m("/FontFile2 "+F+" 0 R"),m("/Flags 96"),m("/FontBBox "+e.API.PDFObject.convert(d.metadata.bbox)),m("/FontName /"+mu(d.fontName)),m("/ItalicAngle "+d.metadata.italicAngle),m("/Ascent "+d.metadata.ascender),m(">>"),m("endobj"),d.objectNumber=_();for(var j=0;j<d.metadata.hmtx.widths.length;j++)d.metadata.hmtx.widths[j]=parseInt(d.metadata.hmtx.widths[j]*(1e3/d.metadata.head.unitsPerEm));m("<</Subtype/TrueType/Type/Font/ToUnicode "+R+" 0 R/BaseFont/"+mu(d.fontName)+"/FontDescriptor "+$+" 0 R/Encoding/"+d.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(d.metadata.hmtx.widths)+">>"),m("endobj"),d.isAlreadyPutted=!0}})(a)}]);var o=function(a){var u,d=a.text||"",m=a.x,_=a.y,b=a.options||{},w=a.mutex||{},S=w.pdfEscape,C=w.activeFontKey,F=w.fonts,R=C,$="",j=0,G="",Y=F[R].encoding;if(F[R].encoding!=="Identity-H")return{text:d,x:m,y:_,options:b,mutex:w};for(G=d,R=C,Array.isArray(d)&&(G=d[0]),j=0;j<G.length;j+=1)F[R].metadata.hasOwnProperty("cmap")&&(u=F[R].metadata.cmap.unicode.codeMap[G[j].charCodeAt(0)]),u||G[j].charCodeAt(0)<256&&F[R].metadata.hasOwnProperty("Unicode")?$+=G[j]:$+="";var ke="";return parseInt(R.slice(1))<14||Y==="WinAnsiEncoding"?ke=S($,R).split("").map(function(Ce){return Ce.charCodeAt(0).toString(16)}).join(""):Y==="Identity-H"&&(ke=n($,F[R])),w.isHex=!0,{text:ke,x:m,y:_,options:b,mutex:w}};t.events.push(["postProcessText",function(a){var u=a.text||"",d=[],m={text:u,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(u)){var _=0;for(_=0;_<u.length;_+=1)Array.isArray(u[_])&&u[_].length===3?d.push([o(Object.assign({},m,{text:u[_][0]})).text,u[_][1],u[_][2]]):d.push(o(Object.assign({},m,{text:u[_]})).text);a.text=d}else a.text=o(Object.assign({},m,{text:u})).text}])}(mn),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,i){return t.call(this),this.internal.vFS[n]=i,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(mn.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(i){var o,a,u,d,m,_,b,w=t,S=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],C=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],F={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},R={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},$=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],j=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),G=!1,Y=0;this.__bidiEngine__={};var ke=function(V){var X=V.charCodeAt(),N=X>>8,te=R[N];return te!==void 0?w[256*te+(255&X)]:N===252||N===253?"AL":j.test(N)?"L":N===8?"R":"N"},Ce=function(V){for(var X,N=0;N<V.length;N++){if((X=ke(V.charAt(N)))==="L")return!1;if(X==="R")return!0}return!1},be=function(V,X,N,te){var W,H,me,U,I=X[te];switch(I){case"L":case"R":G=!1;break;case"N":case"AN":break;case"EN":G&&(I="AN");break;case"AL":G=!0,I="R";break;case"WS":I="N";break;case"CS":te<1||te+1>=X.length||(W=N[te-1])!=="EN"&&W!=="AN"||(H=X[te+1])!=="EN"&&H!=="AN"?I="N":G&&(H="AN"),I=H===W?H:"N";break;case"ES":I=(W=te>0?N[te-1]:"B")==="EN"&&te+1<X.length&&X[te+1]==="EN"?"EN":"N";break;case"ET":if(te>0&&N[te-1]==="EN"){I="EN";break}if(G){I="N";break}for(me=te+1,U=X.length;me<U&&X[me]==="ET";)me++;I=me<U&&X[me]==="EN"?"EN":"N";break;case"NSM":if(u&&!d){for(U=X.length,me=te+1;me<U&&X[me]==="NSM";)me++;if(me<U){var Q=V[te],Re=Q>=1425&&Q<=2303||Q===64286;if(W=X[me],Re&&(W==="R"||W==="AL")){I="R";break}}}I=te<1||(W=X[te-1])==="B"?"N":N[te-1];break;case"B":G=!1,o=!0,I=Y;break;case"S":a=!0,I="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":G=!1;break;case"BN":I="N"}return I},ie=function(V,X,N){var te=V.split("");return N&&re(te,N,{hiLevel:Y}),te.reverse(),X&&X.reverse(),te.join("")},re=function(V,X,N){var te,W,H,me,U,I=-1,Q=V.length,Re=0,O=[],J=Y?C:S,se=[];for(G=!1,o=!1,a=!1,W=0;W<Q;W++)se[W]=ke(V[W]);for(H=0;H<Q;H++){if(U=Re,O[H]=be(V,se,O,H),te=240&(Re=J[U][F[O[H]]]),Re&=15,X[H]=me=J[Re][5],te>0)if(te===16){for(W=I;W<H;W++)X[W]=1;I=-1}else I=-1;if(J[Re][6])I===-1&&(I=H);else if(I>-1){for(W=I;W<H;W++)X[W]=me;I=-1}se[H]==="B"&&(X[H]=0),N.hiLevel|=me}a&&function(de,_e,he){for(var we=0;we<he;we++)if(de[we]==="S"){_e[we]=Y;for(var Ee=we-1;Ee>=0&&de[Ee]==="WS";Ee--)_e[Ee]=Y}}(se,X,Q)},Ie=function(V,X,N,te,W){if(!(W.hiLevel<V)){if(V===1&&Y===1&&!o)return X.reverse(),void(N&&N.reverse());for(var H,me,U,I,Q=X.length,Re=0;Re<Q;){if(te[Re]>=V){for(U=Re+1;U<Q&&te[U]>=V;)U++;for(I=Re,me=U-1;I<me;I++,me--)H=X[I],X[I]=X[me],X[me]=H,N&&(H=N[I],N[I]=N[me],N[me]=H);Re=U}Re++}}},Je=function(V,X,N){var te=V.split(""),W={hiLevel:Y};return N||(N=[]),re(te,N,W),function(H,me,U){if(U.hiLevel!==0&&b)for(var I,Q=0;Q<H.length;Q++)me[Q]===1&&(I=$.indexOf(H[Q]))>=0&&(H[Q]=$[I+1])}(te,N,W),Ie(2,te,X,N,W),Ie(1,te,X,N,W),te.join("")};return this.__bidiEngine__.doBidiReorder=function(V,X,N){if(function(W,H){if(H)for(var me=0;me<W.length;me++)H[me]=me;d===void 0&&(d=Ce(W)),_===void 0&&(_=Ce(W))}(V,X),u||!m||_)if(u&&m&&d^_)Y=d?1:0,V=ie(V,X,N);else if(!u&&m&&_)Y=d?1:0,V=Je(V,X,N),V=ie(V,X);else if(!u||d||m||_){if(u&&!m&&d^_)V=ie(V,X),d?(Y=0,V=Je(V,X,N)):(Y=1,V=Je(V,X,N),V=ie(V,X));else if(u&&d&&!m&&_)Y=1,V=Je(V,X,N),V=ie(V,X);else if(!u&&!m&&d^_){var te=b;d?(Y=1,V=Je(V,X,N),Y=0,b=!1,V=Je(V,X,N),b=te):(Y=0,V=Je(V,X,N),V=ie(V,X),Y=1,b=!1,V=Je(V,X,N),b=te,V=ie(V,X))}}else Y=0,V=Je(V,X,N);else Y=d?1:0,V=Je(V,X,N);return V},this.__bidiEngine__.setOptions=function(V){V&&(u=V.isInputVisual,m=V.isOutputVisual,d=V.isInputRtl,_=V.isOutputRtl,b=V.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(i){var o=i.text,a=(i.x,i.y,i.options||{}),u=(i.mutex,a.lang,[]);if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,n.setOptions(a),Object.prototype.toString.call(o)==="[object Array]"){var d=0;for(u=[],d=0;d<o.length;d+=1)Object.prototype.toString.call(o[d])==="[object Array]"?u.push([n.doBidiReorder(o[d][0]),o[d][1],o[d][2]]):u.push([n.doBidiReorder(o[d])]);i.text=u}else i.text=n.doBidiReorder(o);n.setOptions({isInputVisual:!0})}])}(mn),mn.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new bl(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new hL(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new Yx(this.contents),this.head=new Qx(this),this.name=new iL(this),this.cmap=new P1(this),this.toUnicode={},this.hhea=new eL(this),this.maxp=new sL(this),this.hmtx=new oL(this),this.post=new nL(this),this.os2=new tL(this),this.loca=new cL(this),this.glyf=new aL(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,i,o,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var u,d,m,_;for(_=[],u=0,d=(m=this.bbox).length;u<d;u++)t=m[u],_.push(Math.round(t*this.scaleFactor));return _}).call(this),this.stemV=0,this.post.exists?(i=255&(o=this.post.italic_angle),32768&(n=o>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,i){var o,a,u,d;for(u=0,a=0,d=(t=""+t).length;0<=d?a<d:a>d;a=0<=d?++a:--a)o=t.charCodeAt(a),u+=this.widthOfGlyph(this.characterToGlyph(o))+i*(1e3/n)||0;return u*(n/1e3)},e.prototype.lineHeight=function(t,n){var i;return n==null&&(n=!1),i=n?this.lineGap:0,(this.ascender+i-this.decender)/1e3*t},e}();var Vo,bl=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,i;for(i=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)i[n]=String.fromCharCode(this.readByte());return i.join("")},e.prototype.writeString=function(t){var n,i,o;for(o=[],n=0,i=t.length;0<=i?n<i:n>i;n=0<=i?++n:--n)o.push(this.writeByte(t.charCodeAt(n)));return o},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,i,o,a,u,d,m;return t=this.readByte(),n=this.readByte(),i=this.readByte(),o=this.readByte(),a=this.readByte(),u=this.readByte(),d=this.readByte(),m=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^i)+4294967296*(255^o)+16777216*(255^a)+65536*(255^u)+256*(255^d)+(255^m)+1):72057594037927940*t+281474976710656*n+1099511627776*i+4294967296*o+16777216*a+65536*u+256*d+m},e.prototype.writeLongLong=function(t){var n,i;return n=Math.floor(t/4294967296),i=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,i;for(n=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)n.push(this.readByte());return n},e.prototype.write=function(t){var n,i,o,a;for(a=[],i=0,o=t.length;i<o;i++)n=t[i],a.push(this.writeByte(n));return a},e}(),Yx=function(){var e;function t(n){var i,o,a;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},o=0,a=this.tableCount;0<=a?o<a:o>a;o=0<=a?++o:--o)i={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[i.tag]=i}return t.prototype.encode=function(n){var i,o,a,u,d,m,_,b,w,S,C,F,R;for(R in C=Object.keys(n).length,m=Math.log(2),w=16*Math.floor(Math.log(C)/m),u=Math.floor(w/m),b=16*C-w,(o=new bl).writeInt(this.scalarType),o.writeShort(C),o.writeShort(w),o.writeShort(u),o.writeShort(b),a=16*C,_=o.pos+a,d=null,F=[],n)for(S=n[R],o.writeString(R),o.writeInt(e(S)),o.writeInt(_),o.writeInt(S.length),F=F.concat(S),R==="head"&&(d=_),_+=S.length;_%4;)F.push(0),_++;return o.write(F),i=2981146554-e(o.data),o.pos=d+8,o.writeUInt32(i),o.data},e=function(n){var i,o,a,u;for(n=E1.call(n);n.length%4;)n.push(0);for(a=new bl(n),o=0,i=0,u=n.length;i<u;i=i+=4)o+=a.readUInt32();return 4294967295&o},t}(),Xx={}.hasOwnProperty,va=function(e,t){for(var n in t)Xx.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};Vo=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var Qx=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return va(t,Vo),t.prototype.tag="head",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},t.prototype.encode=function(n){var i;return(i=new bl).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(n),i.writeShort(this.glyphDataFormat),i.data},t}(),W0=function(){function e(t,n){var i,o,a,u,d,m,_,b,w,S,C,F,R,$,j,G,Y;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),w=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(m=0;m<256;++m)this.codeMap[m]=t.readByte();break;case 4:for(C=t.readUInt16(),S=C/2,t.pos+=6,a=function(){var ke,Ce;for(Ce=[],m=ke=0;0<=S?ke<S:ke>S;m=0<=S?++ke:--ke)Ce.push(t.readUInt16());return Ce}(),t.pos+=2,R=function(){var ke,Ce;for(Ce=[],m=ke=0;0<=S?ke<S:ke>S;m=0<=S?++ke:--ke)Ce.push(t.readUInt16());return Ce}(),_=function(){var ke,Ce;for(Ce=[],m=ke=0;0<=S?ke<S:ke>S;m=0<=S?++ke:--ke)Ce.push(t.readUInt16());return Ce}(),b=function(){var ke,Ce;for(Ce=[],m=ke=0;0<=S?ke<S:ke>S;m=0<=S?++ke:--ke)Ce.push(t.readUInt16());return Ce}(),o=(this.length-t.pos+this.offset)/2,d=function(){var ke,Ce;for(Ce=[],m=ke=0;0<=o?ke<o:ke>o;m=0<=o?++ke:--ke)Ce.push(t.readUInt16());return Ce}(),m=j=0,Y=a.length;j<Y;m=++j)for($=a[m],i=G=F=R[m];F<=$?G<=$:G>=$;i=F<=$?++G:--G)b[m]===0?u=i+_[m]:(u=d[b[m]/2+(i-F)-(S-m)]||0)!==0&&(u+=_[m]),this.codeMap[i]=65535&u}t.pos=w}return e.encode=function(t,n){var i,o,a,u,d,m,_,b,w,S,C,F,R,$,j,G,Y,ke,Ce,be,ie,re,Ie,Je,V,X,N,te,W,H,me,U,I,Q,Re,O,J,se,de,_e,he,we,Ee,Ve,tt,ne;switch(te=new bl,u=Object.keys(t).sort(function(fe,De){return fe-De}),n){case"macroman":for(R=0,$=function(){var fe=[];for(F=0;F<256;++F)fe.push(0);return fe}(),G={0:0},a={},W=0,I=u.length;W<I;W++)G[Ee=t[o=u[W]]]==null&&(G[Ee]=++R),a[o]={old:t[o],new:G[t[o]]},$[o]=G[t[o]];return te.writeUInt16(1),te.writeUInt16(0),te.writeUInt32(12),te.writeUInt16(0),te.writeUInt16(262),te.writeUInt16(0),te.write($),{charMap:a,subtable:te.data,maxGlyphID:R+1};case"unicode":for(X=[],w=[],Y=0,G={},i={},j=_=null,H=0,Q=u.length;H<Q;H++)G[Ce=t[o=u[H]]]==null&&(G[Ce]=++Y),i[o]={old:Ce,new:G[Ce]},d=G[Ce]-o,j!=null&&d===_||(j&&w.push(j),X.push(o),_=d),j=o;for(j&&w.push(j),w.push(65535),X.push(65535),Je=2*(Ie=X.length),re=2*Math.pow(Math.log(Ie)/Math.LN2,2),S=Math.log(re/2)/Math.LN2,ie=2*Ie-re,m=[],be=[],C=[],F=me=0,Re=X.length;me<Re;F=++me){if(V=X[F],b=w[F],V===65535){m.push(0),be.push(0);break}if(V-(N=i[V].new)>=32768)for(m.push(0),be.push(2*(C.length+Ie-F)),o=U=V;V<=b?U<=b:U>=b;o=V<=b?++U:--U)C.push(i[o].new);else m.push(N-V),be.push(0)}for(te.writeUInt16(3),te.writeUInt16(1),te.writeUInt32(12),te.writeUInt16(4),te.writeUInt16(16+8*Ie+2*C.length),te.writeUInt16(0),te.writeUInt16(Je),te.writeUInt16(re),te.writeUInt16(S),te.writeUInt16(ie),he=0,O=w.length;he<O;he++)o=w[he],te.writeUInt16(o);for(te.writeUInt16(0),we=0,J=X.length;we<J;we++)o=X[we],te.writeUInt16(o);for(Ve=0,se=m.length;Ve<se;Ve++)d=m[Ve],te.writeUInt16(d);for(tt=0,de=be.length;tt<de;tt++)ke=be[tt],te.writeUInt16(ke);for(ne=0,_e=C.length;ne<_e;ne++)R=C[ne],te.writeUInt16(R);return{charMap:i,subtable:te.data,maxGlyphID:Y+1}}},e}(),P1=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return va(t,Vo),t.prototype.tag="cmap",t.prototype.parse=function(n){var i,o,a;for(n.pos=this.offset,this.version=n.readUInt16(),a=n.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)i=new W0(n,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},t.encode=function(n,i){var o,a;return i==null&&(i="macroman"),o=W0.encode(n,i),(a=new bl).writeUInt16(0),a.writeUInt16(1),o.table=a.data.concat(o.subtable),o},t}(),eL=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return va(t,Vo),t.prototype.tag="hhea",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},t}(),tL=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return va(t,Vo),t.prototype.tag="OS/2",t.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var i,o;for(o=[],i=0;i<10;++i)o.push(n.readByte());return o}(),this.charRange=function(){var i,o;for(o=[],i=0;i<4;++i)o.push(n.readInt());return o}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var i,o;for(o=[],i=0;i<2;i=++i)o.push(n.readInt());return o}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},t}(),nL=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return va(t,Vo),t.prototype.tag="post",t.prototype.parse=function(n){var i,o,a;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var u;for(o=n.readUInt16(),this.glyphNameIndex=[],u=0;0<=o?u<o:u>o;u=0<=o?++u:--u)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],a=[];n.pos<this.offset+this.length;)i=n.readByte(),a.push(this.names.push(n.readString(i)));return a;case 151552:return o=n.readUInt16(),this.offsets=n.read(o);case 196608:break;case 262144:return this.map=(function(){var d,m,_;for(_=[],u=d=0,m=this.file.maxp.numGlyphs;0<=m?d<m:d>m;u=0<=m?++d:--d)_.push(n.readUInt32());return _}).call(this)}},t}(),rL=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},iL=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return va(t,Vo),t.prototype.tag="name",t.prototype.parse=function(n){var i,o,a,u,d,m,_,b,w,S,C;for(n.pos=this.offset,n.readShort(),i=n.readShort(),m=n.readShort(),o=[],u=0;0<=i?u<i:u>i;u=0<=i?++u:--u)o.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+m+n.readShort()});for(_={},u=w=0,S=o.length;w<S;u=++w)a=o[u],n.pos=a.offset,b=n.readString(a.length),d=new rL(b,a),_[C=a.nameID]==null&&(_[C]=[]),_[a.nameID].push(d);this.strings=_,this.copyright=_[0],this.fontFamily=_[1],this.fontSubfamily=_[2],this.uniqueSubfamily=_[3],this.fontName=_[4],this.version=_[5];try{this.postscriptName=_[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=_[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=_[7],this.manufacturer=_[8],this.designer=_[9],this.description=_[10],this.vendorUrl=_[11],this.designerUrl=_[12],this.license=_[13],this.licenseUrl=_[14],this.preferredFamily=_[15],this.preferredSubfamily=_[17],this.compatibleFull=_[18],this.sampleText=_[19]},t}(),sL=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return va(t,Vo),t.prototype.tag="maxp",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},t}(),oL=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return va(t,Vo),t.prototype.tag="hmtx",t.prototype.parse=function(n){var i,o,a,u,d,m,_;for(n.pos=this.offset,this.metrics=[],i=0,m=this.file.hhea.numberOfMetrics;0<=m?i<m:i>m;i=0<=m?++i:--i)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var b,w;for(w=[],i=b=0;0<=a?b<a:b>a;i=0<=a?++b:--b)w.push(n.readInt16());return w}(),this.widths=(function(){var b,w,S,C;for(C=[],b=0,w=(S=this.metrics).length;b<w;b++)u=S[b],C.push(u.advance);return C}).call(this),o=this.widths[this.widths.length-1],_=[],i=d=0;0<=a?d<a:d>a;i=0<=a?++d:--d)_.push(this.widths.push(o));return _},t.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},t}(),E1=[].slice,aL=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return va(t,Vo),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(n){var i,o,a,u,d,m,_,b,w,S;return n in this.cache?this.cache[n]:(u=this.file.loca,i=this.file.contents,o=u.indexOf(n),(a=u.lengthOf(n))===0?this.cache[n]=null:(i.pos=this.offset+o,d=(m=new bl(i.read(a))).readShort(),b=m.readShort(),S=m.readShort(),_=m.readShort(),w=m.readShort(),this.cache[n]=d===-1?new uL(m,b,S,_,w):new lL(m,d,b,S,_,w),this.cache[n]))},t.prototype.encode=function(n,i,o){var a,u,d,m,_;for(d=[],u=[],m=0,_=i.length;m<_;m++)a=n[i[m]],u.push(d.length),a&&(d=d.concat(a.encode(o)));return u.push(d.length),{table:d,offsets:u}},t}(),lL=function(){function e(t,n,i,o,a,u){this.raw=t,this.numberOfContours=n,this.xMin=i,this.yMin=o,this.xMax=a,this.yMax=u,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),uL=function(){function e(t,n,i,o,a){var u,d;for(this.raw=t,this.xMin=n,this.yMin=i,this.xMax=o,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],u=this.raw;d=u.readShort(),this.glyphOffsets.push(u.pos),this.glyphIDs.push(u.readUInt16()),32&d;)u.pos+=1&d?4:2,128&d?u.pos+=8:64&d?u.pos+=4:8&d&&(u.pos+=2)}return e.prototype.encode=function(){var t,n,i;for(n=new bl(E1.call(this.raw.data)),t=0,i=this.glyphIDs.length;t<i;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),cL=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return va(t,Vo),t.prototype.tag="loca",t.prototype.parse=function(n){var i,o;return n.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var a,u;for(u=[],o=0,a=this.length;o<a;o+=2)u.push(2*n.readUInt16());return u}).call(this):(function(){var a,u;for(u=[],o=0,a=this.length;o<a;o+=4)u.push(n.readUInt32());return u}).call(this)},t.prototype.indexOf=function(n){return this.offsets[n]},t.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},t.prototype.encode=function(n,i){for(var o=new Uint32Array(this.offsets.length),a=0,u=0,d=0;d<o.length;++d)if(o[d]=a,u<i.length&&i[u]==d){++u,o[d]=a;var m=this.offsets[d],_=this.offsets[d+1]-m;_>0&&(a+=_)}for(var b=new Array(4*o.length),w=0;w<o.length;++w)b[4*w+3]=255&o[w],b[4*w+2]=(65280&o[w])>>8,b[4*w+1]=(16711680&o[w])>>16,b[4*w]=(4278190080&o[w])>>24;return b},t}(),hL=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,i,o,a;for(n in o=this.font.cmap.tables[0].codeMap,t={},a=this.subset)i=a[n],t[n]=o[i];return t},e.prototype.glyphsFor=function(t){var n,i,o,a,u,d,m;for(o={},u=0,d=t.length;u<d;u++)o[a=t[u]]=this.font.glyf.glyphFor(a);for(a in n=[],o)(i=o[a])!=null&&i.compound&&n.push.apply(n,i.glyphIDs);if(n.length>0)for(a in m=this.glyphsFor(n))i=m[a],o[a]=i;return o},e.prototype.encode=function(t,n){var i,o,a,u,d,m,_,b,w,S,C,F,R,$,j;for(o in i=P1.encode(this.generateCmap(),"unicode"),u=this.glyphsFor(t),C={0:0},j=i.charMap)C[(m=j[o]).old]=m.new;for(F in S=i.maxGlyphID,u)F in C||(C[F]=S++);return b=function(G){var Y,ke;for(Y in ke={},G)ke[G[Y]]=Y;return ke}(C),w=Object.keys(b).sort(function(G,Y){return G-Y}),R=function(){var G,Y,ke;for(ke=[],G=0,Y=w.length;G<Y;G++)d=w[G],ke.push(b[d]);return ke}(),a=this.font.glyf.encode(u,R,C),_=this.font.loca.encode(a.offsets,R),$={cmap:this.font.cmap.raw(),glyf:a.table,loca:_,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&($["OS/2"]=this.font.os2.raw()),this.font.directory.encode($)},e}();mn.API.PDFObject=function(){var e;function t(){}return e=function(n,i){return(Array(i+1).join("0")+n).slice(-i)},t.convert=function(n){var i,o,a,u;if(Array.isArray(n))return"["+function(){var d,m,_;for(_=[],d=0,m=n.length;d<m;d++)i=n[d],_.push(t.convert(i));return _}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(o in a=["<<"],n)u=n[o],a.push("/"+o+" "+t.convert(u));return a.push(">>"),a.join(`
`)}return""+n},t}();const fL={class:"h-full flex"},dL={class:"flex-1 relative"},pL={key:0,class:"absolute inset-0 bg-black/30 backdrop-blur-sm z-[2000] flex items-center justify-center"},mL={key:1,class:"absolute inset-0 flex items-center justify-center bg-gray-50 z-[1000]"},gL={class:"text-center max-w-lg mx-auto p-8"},vL={class:"space-y-4"},_L={key:2,class:"absolute bottom-6 left-6 z-[1000]"},yL={class:"bg-white rounded-lg shadow-lg p-3 mb-3"},bL={class:"grid grid-cols-3 gap-2"},wL=["onClick"],xL={class:"bg-white rounded-lg shadow-lg p-3 space-y-2"},LL={class:"flex flex-col mb-2"},CL={class:"text-xl font-bold text-gray-800 mb-1"},kL={key:0,class:"text-sm text-gray-500"},PL={class:"grid grid-cols-1 gap-2"},EL=["disabled"],SL={key:0,class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ML={key:1,class:"animate-spin h-5 w-5 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},AL={key:0,class:"text-xs text-gray-500 mt-2"},BL={key:3,class:"fixed bottom-6 right-6 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg shadow-lg z-[2000] flex items-center transform transition-all duration-300 ease-in-out",role:"alert"},TL={key:4,class:"drawing-tools-container absolute top-4 right-4 z-[1000]"},NL={key:5,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},DL={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4"},OL={class:"flex justify-between items-center mb-4"},RL={key:0,class:"space-y-4"},IL={key:0,class:"space-y-2"},FL={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},jL=["onClick"],zL={class:"font-medium text-gray-900"},UL={key:1,class:"space-y-2"},qL={class:"flex items-center mb-4"},$L={class:"text-sm text-gray-600"},VL={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},GL=["onClick"],HL={class:"font-medium text-gray-900"},WL={key:2,class:"space-y-2"},ZL={class:"flex items-center mb-4"},KL={class:"text-sm text-gray-600"},JL={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},YL=["onClick"],XL={class:"font-medium text-gray-900"},QL={class:"text-sm text-gray-500"},eC={class:"text-xs text-gray-400 mt-1"},tC={key:1,class:"space-y-4"},nC={key:0,class:"space-y-2"},rC={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},iC=["onClick"],sC={class:"font-medium text-gray-900"},oC={key:1,class:"space-y-2"},aC={class:"flex items-center mb-4"},lC={class:"text-sm text-gray-600"},uC={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},cC=["onClick"],hC={class:"font-medium text-gray-900"},fC={class:"text-sm text-gray-500"},dC={class:"text-xs text-gray-400 mt-1"},pC={key:2,class:"max-h-96 overflow-y-auto"},mC={key:0,class:"text-center py-8"},gC={key:1,class:"space-y-2"},vC=["onClick"],_C={class:"font-medium text-gray-900"},yC={class:"text-sm text-gray-500"},bC={class:"text-xs text-gray-400 mt-1"},Z0=Ms({__name:"MapView",setup(e){const t=It(null),n=zh(),i=s1(),o=It([]),{currentTool:a,selectedShape:u,map:d,initMap:m,setDrawingTool:_,updateShapeStyle:b,updateShapeProperties:w,featureGroup:S,adjustView:C,clearActiveControlPoints:F}=Yw(),{initMap:R,baseMaps:$,currentBaseMap:j,changeBaseMap:G}=Xw(),Y=It(!1),ke=It(!1),Ce=It(null),be=It(!1),ie=It(!1),re=hs(),Ie=It([]),Je=It([]),V=It([]),X=It(null),N=It(null),te=It(!1),W=It(!1),H=It(!1),me=It(null),U=Nn(()=>{var Oe,Pe,ot;if(console.log("[MapView][filteredClients] Computing with:",{userType:(Oe=re.user)==null?void 0:Oe.user_type,selectedDealer:X.value,dealerClients:Je.value}),((Pe=re.user)==null?void 0:Pe.user_type)==="admin"){const _t=X.value?Je.value:[];return console.log("[MapView][filteredClients] Admin clients:",_t),_t}else if(((ot=re.user)==null?void 0:ot.user_type)==="dealer")return console.log("[MapView][filteredClients] Dealer clients:",Je.value),Je.value;return console.log("[MapView][filteredClients] No clients returned"),[]}),I=Nn(()=>{var Oe;return u.value?{type:((Oe=u.value.properties)==null?void 0:Oe.type)||"unknown",properties:u.value.properties||{},layer:u.value}:null});function Q(Oe){const Pe=Oe.getCenter(),ot=Oe.getZoom(),_t={lat:Pe.lat,lng:Pe.lng,zoom:ot};document.cookie=`mapState=${JSON.stringify(_t)};max-age=2592000;path=/`}function Re(){const Pe=document.cookie.split(";").find(ot=>ot.trim().startsWith("mapState="));if(Pe)try{return JSON.parse(Pe.split("=")[1])}catch(ot){return console.error("Erreur lors de la lecture du cookie de position:",ot),null}return null}$a(async()=>{var Ct,ze;console.log("[onMounted] Starting initialization..."),await n.fetchPlans();const Oe=Re(),Pe=Oe?[Oe.lat,Oe.lng]:[46.603354,1.888334],ot=(Oe==null?void 0:Oe.zoom)??6;if(t.value&&!d.value){const Ot=m(t.value,Pe,ot);Ot.pm.setLang("fr"),Ot.pm.addControls({rotateMode:!1}),Yr.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles  Esri  Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",maxZoom:19}).addTo(Ot),R(Ot),Ot.on("moveend",()=>{Q(Ot)}),window.addEventListener("map-set-location",Nt=>{if(Ot&&Nt.detail){const{lat:Ut,lng:Ht,zoom:Dt}=Nt.detail;Ot.flyTo([Ut,Ht],Dt,{duration:1.5,easeLinearity:.25})}})}const _t=localStorage.getItem("lastPlanId");if(_t)try{await O(parseInt(_t))}catch(Ot){console.error("Error loading last plan:",Ot)}((Ct=re.user)==null?void 0:Ct.user_type)==="admin"&&(console.log("[onMounted] Loading dealers for admin..."),await we()),((ze=re.user)==null?void 0:ze.user_type)==="dealer"&&(console.log("[onMounted] Loading clients for dealer..."),await Ee())}),Yi(()=>i.hasUnsavedChanges,Oe=>{Oe&&Ce.value&&n.markUnsavedChanges()}),Yi(d,async Oe=>{Oe&&n.currentPlan&&(ce(),await i.loadPlanElements(n.currentPlan.id),await O(n.currentPlan.id))}),Yi(()=>n.currentPlan,async Oe=>{Oe?(Ce.value=Oe,n.setCurrentPlan(Oe),i.setCurrentPlan(Oe.id)):(Ce.value=null,ce())},{immediate:!0}),Md(()=>{d.value&&d.value.off("moveend")});async function O(Oe){try{ce(),await i.loadPlanElements(Oe);const Pe=n.getPlanById(Oe);Pe&&(Ce.value=Pe,n.setCurrentPlan(Pe),i.setCurrentPlan(Pe.id),localStorage.setItem("lastPlanId",Pe.id.toString()),d.value&&S.value&&i.getCurrentElements.forEach(ot=>{var Ot;if(!S.value||!ot.data)return;let _t=null;const{style:Ct={},...ze}=ot.data;switch(ot.type_forme){case"CERCLE":{const Nt=ze;Nt.center&&Nt.radius&&(_t=Yr.circle([Nt.center[1],Nt.center[0]],{...Ct,radius:Nt.radius}));break}case"RECTANGLE":{const Nt=ze;Nt.bounds&&(_t=Yr.rectangle([[Nt.bounds.southWest[1],Nt.bounds.southWest[0]],[Nt.bounds.northEast[1],Nt.bounds.northEast[0]]],Ct));break}case"DEMI_CERCLE":{const Nt=ze;Nt.center&&Nt.radius&&(_t=new Ol(Yr.latLng(Nt.center[1],Nt.center[0]),Nt.radius,Nt.startAngle,Nt.endAngle,Ct));break}case"LIGNE":{const Nt=ze;if(Nt.points){const Ut=Nt.points.map(Ht=>Yr.latLng(Ht[1],Ht[0]));_t=Yr.polyline(Ut,Ct)}break}case"TEXTE":{const Nt=ze;if(Nt.position&&Nt.content){const Ut=Yr.divIcon({html:`<div class="text-annotation" style="font-size: ${Ct.fontSize||"14px"}">${Nt.content}</div>`,className:"text-container"});_t=Yr.marker([Nt.position[1],Nt.position[0]],{icon:Ut,...Ct})}break}}_t&&(_t.properties={type:ot.type_forme,style:Ct,...ze},(Ot=S.value)==null||Ot.addLayer(_t),o.value.push({id:ot.id,type:ot.type_forme,layer:_t,properties:_t.properties}),ze.rotation&&typeof _t.setRotation=="function"&&_t.setRotation(ze.rotation))})),ke.value=!1}catch(Pe){console.error("Erreur lors du chargement du plan:",Pe)}}async function J(){if(!Ce.value||!S.value){console.warn("Aucun plan actif ou groupe de formes  sauvegarder");return}be.value=!0;try{const Oe=[];S.value.eachLayer(Pe=>{var ze,Ot,Nt,Ut,Ht,Dt,Pn,en;const ot={style:{color:((ze=Pe.options)==null?void 0:ze.color)||"#3388ff",fillColor:((Ot=Pe.options)==null?void 0:Ot.fillColor)||"#3388ff",fillOpacity:((Nt=Pe.options)==null?void 0:Nt.fillOpacity)||.2,weight:((Ut=Pe.options)==null?void 0:Ut.weight)||3,opacity:((Ht=Pe.options)==null?void 0:Ht.opacity)||1}};let _t,Ct;if(Pe instanceof Yr.Circle)_t="CERCLE",Ct={...ot,center:[Pe.getLatLng().lng,Pe.getLatLng().lat],radius:Pe.getRadius()};else if(Pe instanceof Yr.Rectangle){_t="RECTANGLE";const Yn=Pe.getBounds();Ct={...ot,bounds:{southWest:[Yn.getSouthWest().lng,Yn.getSouthWest().lat],northEast:[Yn.getNorthEast().lng,Yn.getNorthEast().lat]}}}else if(((Dt=Pe.properties)==null?void 0:Dt.type)==="Semicircle")_t="DEMI_CERCLE",Ct={...ot,center:[Pe.getLatLng().lng,Pe.getLatLng().lat],radius:Pe.getRadius(),startAngle:Pe.properties.style.startAngle||0,endAngle:Pe.properties.style.stopAngle||180};else if(Pe instanceof Yr.Polyline&&!(Pe instanceof Yr.Polygon)){_t="LIGNE";const Yn=Pe.getLatLngs();Ct={...ot,points:Yn.map(ln=>[ln.lng,ln.lat])}}else((Pn=Pe.properties)==null?void 0:Pn.type)==="text"&&(_t="TEXTE",Ct={...ot,position:[Pe.getLatLng().lng,Pe.getLatLng().lat],content:Pe.properties.text,style:{...Pe.properties.style,fontSize:Pe.properties.style.fontSize}});_t&&Ct&&Oe.push({id:Pe.id,type_forme:_t,data:{...Ct,rotation:((en=Pe.properties)==null?void 0:en.rotation)||0}})}),i.elements=Oe,await i.saveToPlan(Ce.value.id),ie.value=!0,setTimeout(()=>{ie.value=!1},3e3)}catch(Oe){console.error("Erreur lors de la sauvegarde du plan:",Oe)}finally{be.value=!1}}Ph(()=>{re.user||Be(),n.clearCurrentPlan(),i.clearCurrentPlan()});function se(Oe){w(Oe)}function de(Oe){try{const Pe=new Date(Oe);return isNaN(Pe.getTime())?(console.error("Date invalide reue:",Oe),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(Pe)}catch(Pe){return console.error("Erreur lors du formatage de la date:",Pe),"Date invalide"}}const _e=()=>{C()},he=()=>{u.value&&S.value&&(_(""),S.value.removeLayer(u.value),u.value=null)};async function we(){te.value=!0;try{const Oe=await wn.get("/users/",{params:{role:"CONCESSIONNAIRE"}});Ie.value=Oe.data}catch(Oe){console.error("Erreur lors du chargement des concessionnaires:",Oe)}finally{te.value=!1}}async function Ee(){var Oe;console.log("[loadDealerClients] Starting..."),console.log("[loadDealerClients] authStore.user:",re.user),W.value=!0;try{const Pe=(Oe=re.user)==null?void 0:Oe.id;if(console.log("[loadDealerClients] Using dealerId:",Pe),!Pe){console.error("[loadDealerClients] No dealer ID available");return}const ot=await wn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:Pe}});console.log("[loadDealerClients] Response:",ot.data),Array.isArray(ot.data)?Je.value=ot.data:ot.data?Je.value=[ot.data]:Je.value=[],console.log("[loadDealerClients] Processed clients:",Je.value)}catch(Pe){console.error("[loadDealerClients] Error:",Pe),Je.value=[]}finally{W.value=!1}}async function Ve(Oe){if(console.log("[MapView][selectClient] Starting with client:",Oe),console.log("[MapView][selectClient] Current state:",{selectedDealer:X.value,selectedClient:N.value,newPlanModalRef:!!me.value}),me.value){console.log("[MapView][selectClient] Using NewPlanModal ref"),me.value.selectClient(Oe),N.value=Oe,console.log("[MapView][selectClient] Updated selectedClient:",N.value),H.value=!0;try{const Pe={client:Oe.id};X.value&&(Pe.concessionnaire=X.value.id);const ot=await wn.get("/plans/",{params:Pe});console.log("[MapView][selectClient] Loaded client plans:",ot.data),V.value=ot.data}catch(Pe){console.error("[MapView][selectClient] Error loading client plans:",Pe),V.value=[]}finally{H.value=!1}}else console.warn("[MapView][selectClient] NewPlanModal ref is not available")}function tt(){X.value=null,N.value=null,Je.value=[],V.value=[]}function ne(){N.value=null,V.value=[]}async function fe(Oe){const Pe=await n.getPlanById(Oe);Pe&&(Ce.value=Pe,n.setCurrentPlan(Pe),i.setCurrentPlan(Pe.id),Y.value=!1)}async function De(Oe){try{me.value?(await me.value.selectDealer(Oe),X.value=Oe,Je.value=me.value.dealerClients):console.warn("[MapView][selectDealer] NewPlanModal ref is not available")}catch(Pe){console.error("[MapView][selectDealer] Error:",Pe)}}Yi(X,async Oe=>{var Pe;if(Oe&&((Pe=re.user)==null?void 0:Pe.user_type)==="admin"){W.value=!0;try{const ot=await wn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:Oe.id}});Je.value=Array.isArray(ot.data)?ot.data:[ot.data]}catch(ot){console.error("[MapView][watch selectedDealer] Error loading clients:",ot),Je.value=[]}finally{W.value=!1}}});function Be(){localStorage.removeItem("lastPlanId")}function ce(){S.value&&S.value.clearLayers(),o.value=[]}function Ge(Oe,Pe="m"){return Pe==="m"?`${(Oe/1e4).toFixed(2)} ha`:Pe==="m"?Oe>=1e3?`${(Oe/1e3).toFixed(2)} km`:`${Oe.toFixed(2)} m`:`${Oe.toFixed(2)} ${Pe}`}const it=It(!1);function Qe(Oe){return{Circle:"Cercle",Rectangle:"Rectangle",Semicircle:"Demi-cercle",Line:"Ligne",Polygon:"Polygone",Text:"Texte"}[Oe]||Oe}async function lt(){var Oe,Pe,ot;if(!Ce.value||!d.value||!S.value){console.log("[generateSynthesis] Conditions initiales non remplies");return}try{console.log("[generateSynthesis] Dbut de la gnration"),it.value=!0;const _t=Ce.value.concessionnaire_details,Ct=Ce.value.client_details;u.value&&(F(),u.value=null);const ze=new mn("l","mm","a4"),Ot=ze.internal.pageSize.getWidth(),Nt=ze.internal.pageSize.getHeight(),Ut=new Image;Ut.src=_f,await new Promise(en=>{Ut.onload=()=>en(),Ut.onerror=()=>en()}),ze.addImage(Ut,"JPEG",(Ot-60)/2,20,60,60),ze.setFontSize(24),ze.setTextColor(0),ze.text(Ce.value.nom||"Sans titre",Ot/2,100,{align:"center"});let Ht=120;if(ze.setFontSize(14),_t&&(ze.setFont("helvetica","bold"),ze.text("Concessionnaire:",20,Ht),ze.setFont("helvetica","normal"),ze.text(`${_t.first_name} ${_t.last_name}${_t.company_name?` (${_t.company_name})`:""}`,20,Ht+8),Ht+=25),Ct&&(ze.setFont("helvetica","bold"),ze.text("Client:",20,Ht),ze.setFont("helvetica","normal"),ze.text(`${Ct.first_name} ${Ct.last_name}${Ct.company_name?` (${Ct.company_name})`:""}`,20,Ht+8),Ht+=25),Ce.value.description){ze.setFont("helvetica","bold"),ze.text("Description:",20,Ht),ze.setFont("helvetica","normal");const en=ze.splitTextToSize(Ce.value.description,150);ze.text(en,20,Ht+8),Ht+=10*en.length+15}ze.setFontSize(10),ze.setTextColor(100),ze.text(`Date de cration: ${de(Ce.value.date_creation)}`,20,Nt-20),ze.text(`Dernire modification: ${de(Ce.value.date_modification)}`,Ot-20,Nt-20,{align:"right"});const Dt=[];S.value.eachLayer(en=>Dt.push(en)),console.log(`[generateSynthesis] Nombre de formes  traiter: ${Dt.length}`);const Pn=Yr.simpleMapScreenshoter({hideElementsWithSelectors:[".leaflet-control-container",".leaflet-pm-toolbar",".leaflet-grid-layer",".leaflet-grid-label"],preventDownload:!0}).addTo(d.value);await new Promise(en=>setTimeout(en,3e3));for(let en=0;en<Dt.length;en++){ze.addPage();const Yn=30;ze.addImage(_f,"JPEG",Ot-Yn-10,10,Yn,30),ze.setFontSize(8),ze.setTextColor(100);let xn=25;_t&&(ze.text(`Concessionnaire: ${_t.first_name} ${_t.last_name}${_t.company_name?` (${_t.company_name})`:""}`,20,xn),xn+=10),Ct&&ze.text(`Client: ${Ct.first_name} ${Ct.last_name}${Ct.company_name?` (${Ct.company_name})`:""}`,20,xn),ze.setDrawColor(200,200,200),ze.setLineWidth(.5),ze.line(20,45,Ot-20,45);const Xn=Dt[en],qt=Xn.properties;qt&&(ze.setTextColor(0),ze.setFontSize(16),ze.setFont("helvetica","bold"),ze.text(Qe(qt.type),20,60));const Ei=((Oe=Xn.getBounds)==null?void 0:Oe.call(Xn))||((Pe=Xn.getLatLng)==null?void 0:Pe.call(Xn));Ei&&d.value.fitBounds(Ei instanceof Yr.LatLng?Yr.latLngBounds([Ei]):Ei,{padding:[50,50]}),await new Promise(In=>setTimeout(In,2e3)),d.value.invalidateSize(),await new Promise(In=>{const Lr=()=>{var Yt;const Dr=(Yt=d.value)==null?void 0:Yt.getContainer();if(!Dr){In();return}const qn=Dr.querySelectorAll(".leaflet-tile-loaded");Dr.querySelectorAll(".leaflet-tile-loading").length===0&&qn.length>0?In():setTimeout(Lr,100)};Lr()});try{const In=await Pn.takeScreen("image"),Lr=await new Promise((Yt,Jt)=>{const ur=new Image;ur.onload=()=>Yt(ur),ur.onerror=Si=>Jt(Si),ur.src=In}),Dr=Ot*.6-30;let qn=Lr.height*Dr/Lr.width;qn>Nt*.9&&(qn=Nt*.9);const cn=Math.max(80,(Nt-qn)/2);if(ze.addImage(Lr,"PNG",20,cn,Dr,qn),qt){const Yt=Ot*.6+10;let Jt=70;ze.setFontSize(12),ze.setFont("helvetica","normal"),qt.type==="Circle"?(ze.text(`Rayon: ${Ge(qt.radius)}`,Yt,Jt),Jt+=10,ze.text(`Diamtre: ${Ge(qt.radius*2)}`,Yt,Jt),Jt+=10,ze.text(`Surface: ${Ge(qt.area,"m")}`,Yt,Jt),Jt+=10,ze.text(`Primtre: ${Ge(qt.perimeter)}`,Yt,Jt),Jt+=10,qt.surfaceInterieure&&(ze.text(`Surface intrieure: ${Ge(qt.surfaceInterieure,"m")}`,Yt,Jt),Jt+=10),qt.surfaceExterieure&&(ze.text(`Surface extrieure: ${Ge(qt.surfaceExterieure,"m")}`,Yt,Jt),Jt+=10)):qt.type==="Rectangle"?(ze.text(`Largeur: ${Ge(qt.width)}`,Yt,Jt),Jt+=10,ze.text(`Hauteur: ${Ge(qt.height)}`,Yt,Jt),Jt+=10,ze.text(`Surface: ${Ge(qt.area,"m")}`,Yt,Jt),Jt+=10,ze.text(`Primtre: ${Ge(qt.perimeter)}`,Yt,Jt),Jt+=10,qt.surfaceInterieure&&(ze.text(`Surface intrieure: ${Ge(qt.surfaceInterieure,"m")}`,Yt,Jt),Jt+=10),qt.surfaceExterieure&&(ze.text(`Surface extrieure: ${Ge(qt.surfaceExterieure,"m")}`,Yt,Jt),Jt+=10)):qt.type==="Line"?(ze.text(`Longueur: ${Ge(qt.length)}`,Yt,Jt),Jt+=10,(ot=qt.dimensions)!=null&&ot.width&&(ze.text(`Largeur d'influence: ${Ge(qt.dimensions.width)}`,Yt,Jt),Jt+=10),qt.surfaceInfluence&&(ze.text(`Surface d'influence: ${Ge(qt.surfaceInfluence,"m")}`,Yt,Jt),Jt+=10)):qt.type==="Polygon"?(ze.text(`Surface: ${Ge(qt.area,"m")}`,Yt,Jt),Jt+=10,ze.text(`Primtre: ${Ge(qt.perimeter)}`,Yt,Jt),Jt+=10,qt.surfaceInterieure&&(ze.text(`Surface intrieure: ${Ge(qt.surfaceInterieure,"m")}`,Yt,Jt),Jt+=10),qt.surfaceExterieure&&(ze.text(`Surface extrieure: ${Ge(qt.surfaceExterieure,"m")}`,Yt,Jt),Jt+=10)):qt.type==="Semicircle"&&(ze.text(`Rayon: ${Ge(qt.radius)}`,Yt,Jt),Jt+=10,ze.text(`Diamtre: ${Ge(qt.radius*2)}`,Yt,Jt),Jt+=10,ze.text(`Surface: ${Ge(qt.area,"m")}`,Yt,Jt),Jt+=10,ze.text(`Primtre: ${Ge(qt.perimeter)}`,Yt,Jt),Jt+=10,ze.text(`Longueur d'arc: ${Ge(qt.arcLength)}`,Yt,Jt),Jt+=10,ze.text(`Angle d'ouverture: ${qt.openingAngle.toFixed(1)}`,Yt,Jt),Jt+=10,qt.surfaceInterieure&&(ze.text(`Surface intrieure: ${Ge(qt.surfaceInterieure,"m")}`,Yt,Jt),Jt+=10),qt.surfaceExterieure&&(ze.text(`Surface extrieure: ${Ge(qt.surfaceExterieure,"m")}`,Yt,Jt),Jt+=10))}}catch(In){console.error(`[generateSynthesis] Erreur capture forme ${en+1}:`,In)}}d.value.removeControl(Pn),console.log("[generateSynthesis] Gnration du PDF termine"),ze.save(`synthese_${Ce.value.nom}.pdf`)}catch(_t){console.error("[generateSynthesis] Erreur:",_t)}finally{it.value=!1}}return(Oe,Pe)=>{var ot,_t,Ct;return ut(),dt("div",fL,[B("div",dL,[it.value?(ut(),dt("div",pL,Pe[8]||(Pe[8]=[fp('<div class="bg-white/90 rounded-2xl p-8 max-w-md shadow-2xl border border-gray-100"><div class="flex flex-col items-center"><div class="relative w-24 h-24 mb-6"><div class="absolute inset-0 border-4 border-primary-200 rounded-full"></div><div class="absolute inset-0 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"></div><div class="absolute inset-2 border-2 border-primary-400/30 rounded-full animate-pulse"></div><div class="absolute inset-0 flex items-center justify-center"><svg class="w-8 h-8 text-primary-600 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div><h3 class="text-xl font-semibold text-gray-900 mb-2"> Gnration de la synthse </h3><div class="space-y-2 text-center"><p class="text-primary-600 font-medium"> Capture des formes en cours... </p><p class="text-sm text-gray-500"> Nous optimisons la qualit de vos captures pour un rendu parfait </p></div></div></div>',1)]))):un("",!0),Ce.value?un("",!0):(ut(),dt("div",mL,[B("div",gL,[Pe[11]||(Pe[11]=fp('<div class="relative w-48 h-48 mx-auto mb-12 rounded-full bg-gradient-to-br from-primary-100 to-primary-50 p-8 shadow-lg ring-4 ring-white"><img src="'+_f+'" alt="IrrigationDesign Logo" class="w-full h-full object-contain filter drop-shadow-md"><div class="absolute inset-0 rounded-full bg-gradient-to-t from-transparent to-white/10 pointer-events-none"></div></div><h1 class="text-3xl font-bold text-gray-900 mb-4">Bienvenue sur IrrigationDesign</h1><p class="text-gray-600 mb-8">Pour commencer  dessiner, vous devez d&#39;abord crer un nouveau plan ou charger un plan existant.</p>',3)),B("div",vL,[B("button",{onClick:Pe[0]||(Pe[0]=ze=>Y.value=!0),class:"w-full flex items-center justify-center px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Pe[9]||(Pe[9]=[B("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),yr(" Crer un nouveau plan ")])),B("button",{onClick:Pe[1]||(Pe[1]=ze=>ke.value=!0),class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Pe[10]||(Pe[10]=[B("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),yr(" Charger un plan existant ")]))])])])),B("div",{ref_key:"mapContainer",ref:t,class:"absolute inset-0 w-full h-full"},null,512),Ce.value&&!it.value?(ut(),dt("div",_L,[B("div",yL,[Pe[12]||(Pe[12]=B("h2",{class:"text-sm font-semibold text-gray-700 mb-2"},"Type de carte",-1)),B("div",bL,[(ut(!0),dt(Sn,null,Wn(Object.keys(Cn($)),ze=>(ut(),dt("button",{key:ze,onClick:Ot=>Cn(G)(ze),class:Ji(["px-3 py-2 text-sm rounded-md transition-colors duration-200",{"bg-primary-600 text-white":Cn(j)===ze,"bg-gray-100 text-gray-700 hover:bg-gray-200":Cn(j)!==ze}])},kt(ze),11,wL))),128))])]),B("div",xL,[B("div",LL,[B("h1",CL,kt(((ot=Ce.value)==null?void 0:ot.nom)||"Aucun plan charg"),1),(_t=Ce.value)!=null&&_t.description?(ut(),dt("span",kL,kt(Ce.value.description),1)):un("",!0)]),B("div",PL,[B("button",{onClick:Pe[2]||(Pe[2]=ze=>Y.value=!0),class:"flex items-center px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Pe[13]||(Pe[13]=[B("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),yr(" Nouveau plan ")])),B("button",{onClick:Pe[3]||(Pe[3]=ze=>ke.value=!0),class:"flex items-center px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Pe[14]||(Pe[14]=[B("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),yr(" Charger un plan ")])),Ce.value?(ut(),dt("button",{key:0,onClick:J,class:"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors duration-200",disabled:be.value},[be.value?(ut(),dt("svg",ML,Pe[16]||(Pe[16]=[B("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),B("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(ut(),dt("svg",SL,Pe[15]||(Pe[15]=[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"},null,-1)]))),yr(" "+kt(be.value?"Sauvegarde...":"Enregistrer"),1)],8,EL)):un("",!0),B("button",{onClick:_e,class:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors duration-200"},Pe[17]||(Pe[17]=[B("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1),yr(" Ajuster la vue ")])),B("button",{onClick:lt,class:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-colors duration-200"},Pe[18]||(Pe[18]=[B("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),yr(" Gnrer synthse ")]))]),(Ct=Ce.value)!=null&&Ct.date_modification?(ut(),dt("div",AL," Dernire sauvegarde : "+kt(de(Ce.value.date_modification)),1)):un("",!0)])])):un("",!0),ie.value?(ut(),dt("div",BL,Pe[19]||(Pe[19]=[B("svg",{class:"w-5 h-5 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),B("span",{class:"font-medium"},"Plan sauvegard avec succs",-1)]))):un("",!0),Ce.value&&!it.value?(ut(),dt("div",TL,[Nr(Sw,{"current-tool":Cn(a),"selected-shape":I.value,onToolChange:Cn(_),onStyleUpdate:Cn(b),onPropertiesUpdate:se,onDeleteShape:he},null,8,["current-tool","selected-shape","onToolChange","onStyleUpdate"])])):un("",!0),Nr(o1,{ref_key:"newPlanModalRef",ref:me,modelValue:Y.value,"onUpdate:modelValue":Pe[4]||(Pe[4]=ze=>Y.value=ze),onCreated:fe,onDealerSelected:Pe[5]||(Pe[5]=ze=>X.value=ze),onClientSelected:Pe[6]||(Pe[6]=ze=>N.value=ze)},null,8,["modelValue"]),ke.value?(ut(),dt("div",NL,[B("div",DL,[B("div",OL,[Pe[21]||(Pe[21]=B("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),B("button",{onClick:Pe[7]||(Pe[7]=ze=>ke.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},Pe[20]||(Pe[20]=[B("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),Cn(re).isAdmin?(ut(),dt("div",RL,[X.value?N.value?(ut(),dt("div",WL,[B("div",ZL,[B("button",{onClick:ne,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Pe[30]||(Pe[30]=[B("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),yr(" Retour  la liste des clients ")])),Pe[31]||(Pe[31]=B("span",{class:"mx-2 text-gray-400"},"|",-1)),B("span",KL,kt(N.value.first_name)+" "+kt(N.value.last_name)+" ("+kt(N.value.company_name)+") ",1)]),Pe[33]||(Pe[33]=B("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),B("div",JL,[H.value?(ut(),dt(Sn,{key:0},Wn(3,ze=>B("div",{key:ze,class:"animate-pulse"},Pe[32]||(Pe[32]=[B("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[B("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),B("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),B("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(ut(!0),dt(Sn,{key:1},Wn(V.value,ze=>(ut(),dt("button",{key:ze.id,onClick:Ot=>O(ze.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[B("div",XL,kt(ze.nom),1),B("div",QL,kt(ze.description),1),B("div",eC," Modifi le "+kt(de(ze.date_modification)),1)],8,YL))),128))])])):(ut(),dt("div",UL,[B("div",qL,[B("button",{onClick:tt,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Pe[25]||(Pe[25]=[B("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),yr(" Retour  la liste des concessionnaires ")])),Pe[26]||(Pe[26]=B("span",{class:"mx-2 text-gray-400"},"|",-1)),B("span",$L,kt(X.value.first_name)+" "+kt(X.value.last_name)+" ("+kt(X.value.company_name)+") ",1)]),Pe[29]||(Pe[29]=B("h3",{class:"font-medium text-gray-700"},"Slectionnez un client",-1)),B("div",VL,[W.value?(ut(),dt(Sn,{key:0},Wn(3,ze=>B("div",{key:ze,class:"animate-pulse"},Pe[27]||(Pe[27]=[B("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[B("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),B("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(ut(!0),dt(Sn,{key:1},Wn(U.value,ze=>(ut(),dt("button",{key:ze.id,onClick:Ot=>Ve(ze),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[B("div",null,[B("div",HL,kt(ze.first_name)+" "+kt(ze.last_name)+" ("+kt(ze.company_name)+")",1)]),Pe[28]||(Pe[28]=B("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,GL))),128))])])):(ut(),dt("div",IL,[Pe[24]||(Pe[24]=B("h3",{class:"font-medium text-gray-700"},"Slectionnez un concessionnaire",-1)),B("div",FL,[te.value?(ut(),dt(Sn,{key:0},Wn(3,ze=>B("div",{key:ze,class:"animate-pulse"},Pe[22]||(Pe[22]=[B("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[B("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),B("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(ut(!0),dt(Sn,{key:1},Wn(Ie.value,ze=>(ut(),dt("button",{key:ze.id,onClick:Ot=>De(ze),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[B("div",null,[B("div",zL,kt(ze.first_name)+" "+kt(ze.last_name)+" ("+kt(ze.company_name)+")",1)]),Pe[23]||(Pe[23]=B("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,jL))),128))])]))])):Cn(re).isDealer?(ut(),dt("div",tC,[N.value?(ut(),dt("div",oC,[B("div",aC,[B("button",{onClick:ne,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Pe[37]||(Pe[37]=[B("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),yr(" Retour  la liste des clients ")])),Pe[38]||(Pe[38]=B("span",{class:"mx-2 text-gray-400"},"|",-1)),B("span",lC,kt(N.value.first_name)+" "+kt(N.value.last_name),1)]),Pe[40]||(Pe[40]=B("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),B("div",uC,[H.value?(ut(),dt(Sn,{key:0},Wn(3,ze=>B("div",{key:ze,class:"animate-pulse"},Pe[39]||(Pe[39]=[B("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[B("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),B("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),B("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(ut(!0),dt(Sn,{key:1},Wn(V.value,ze=>(ut(),dt("button",{key:ze.id,onClick:Ot=>O(ze.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[B("div",hC,kt(ze.nom),1),B("div",fC,kt(ze.description),1),B("div",dC," Modifi le "+kt(de(ze.date_modification)),1)],8,cC))),128))])])):(ut(),dt("div",nC,[Pe[36]||(Pe[36]=B("h3",{class:"font-medium text-gray-700"},"Slectionnez un client",-1)),B("div",rC,[W.value?(ut(),dt(Sn,{key:0},Wn(3,ze=>B("div",{key:ze,class:"animate-pulse"},Pe[34]||(Pe[34]=[B("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[B("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),B("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(ut(!0),dt(Sn,{key:1},Wn(U.value,ze=>(ut(),dt("button",{key:ze.id,onClick:Ot=>Ve(ze),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[B("div",null,[B("div",sC,kt(ze.first_name)+" "+kt(ze.last_name)+" ("+kt(ze.company_name)+")",1)]),Pe[35]||(Pe[35]=B("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,iC))),128))])]))])):(ut(),dt("div",pC,[Cn(n).plans.length===0?(ut(),dt("div",mC,Pe[41]||(Pe[41]=[B("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(ut(),dt("div",gC,[(ut(!0),dt(Sn,null,Wn(Cn(n).plans,ze=>(ut(),dt("button",{key:ze.id,onClick:Ot=>O(ze.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[B("div",_C,kt(ze.nom),1),B("div",yC,kt(ze.description),1),B("div",bC," Modifi le "+kt(de(ze.date_modification)),1)],8,vC))),128))]))]))])])):un("",!0)])])}}}),wC={class:"fixed inset-0 z-50 overflow-y-auto"},xC={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},LC={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},CC={class:"mt-3 text-center sm:mt-0 sm:text-left"},kC={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},PC={class:"mt-4"},EC={class:"grid grid-cols-2 gap-4"},SC=["disabled"],MC={key:0,class:"mt-1 text-sm text-gray-500"},AC={class:"grid grid-cols-2 gap-4"},BC={key:0},TC=["disabled"],NC=["value"],DC={key:1},OC=["disabled"],RC=["value"],IC={key:0},FC={class:"grid grid-cols-2 gap-4"},jC={key:1,class:"rounded-md bg-red-50 p-4"},zC={class:"flex"},UC={class:"ml-3"},qC={class:"text-sm font-medium text-red-800"},$C={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense"},VC=["disabled"],GC={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},S1=Ms({__name:"UserFormModal",props:{user:{type:Object,default:null},dealers:{type:Array,default:()=>[]},isAdmin:{type:Boolean,required:!0},currentDealer:{type:String,default:""}},emits:["close","save"],setup(e,{emit:t}){var F,R,$,j,G,Y,ke;const n=e,i=t,o=hs(),a=It(!1),u=It(null),d=Nn(()=>{var Ce;return n.isAdmin?n.user?n.user.id!==((Ce=o.user)==null?void 0:Ce.id):!0:!1}),m=Nn(()=>n.isAdmin?[{value:"ADMIN",label:"Administrateur"},{value:"CONCESSIONNAIRE",label:"Concessionnaire"},{value:"UTILISATEUR",label:"Client"}]:[{value:"UTILISATEUR",label:"Client"}]),_=Nn(()=>n.isAdmin?w.role==="UTILISATEUR":!0),b=Nn(()=>n.dealers.filter(Ce=>Ce.role==="CONCESSIONNAIRE")),w=Va({first_name:((F=n.user)==null?void 0:F.first_name)||"",last_name:((R=n.user)==null?void 0:R.last_name)||"",email:(($=n.user)==null?void 0:$.email)||"",username:((j=n.user)==null?void 0:j.username)||"",company_name:((G=n.user)==null?void 0:G.company_name)||"",role:((Y=n.user)==null?void 0:Y.role)||(n.isAdmin?"":"UTILISATEUR"),dealer:((ke=n.user)==null?void 0:ke.concessionnaire)||n.currentDealer,password:"",password_confirm:""}),S=()=>{if(!w.first_name||!w.last_name)return u.value="Le prnom et le nom sont requis",!1;if(!w.email)return u.value="L'email est requis",!1;if(!w.username)return u.value="Le nom d'utilisateur est requis",!1;if(!n.user){if(!w.password)return u.value="Le mot de passe est requis",!1;if(w.password!==w.password_confirm)return u.value="Les mots de passe ne correspondent pas",!1}return w.role==="UTILISATEUR"&&!w.dealer?(u.value="Un concessionnaire doit tre slectionn pour un client",!1):!0},C=async()=>{var Ce;if(u.value=null,!!S()){a.value=!0;try{const be={...w};(Ce=n.user)!=null&&Ce.id&&(be.id=n.user.id,delete be.password,delete be.password_confirm),be.role==="UTILISATEUR"&&be.dealer&&(be.concessionnaire=be.dealer),delete be.dealer,await i("save",be),i("close")}catch(be){console.error("Erreur formulaire:",be),u.value=be.message,a.value=!1}}};return(Ce,be)=>(ut(),dt("div",wC,[B("div",xC,[be[24]||(be[24]=B("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[B("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),be[25]||(be[25]=B("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"",-1)),B("div",LC,[B("div",null,[B("div",CC,[B("h3",kC,kt(e.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),B("div",PC,[B("form",{onSubmit:Ah(C,["prevent"]),class:"space-y-4"},[B("div",EC,[B("div",null,[be[10]||(be[10]=B("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prnom",-1)),jn(B("input",{type:"text",id:"first_name","onUpdate:modelValue":be[0]||(be[0]=ie=>w.first_name=ie),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Ar,w.first_name]])]),B("div",null,[be[11]||(be[11]=B("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),jn(B("input",{type:"text",id:"last_name","onUpdate:modelValue":be[1]||(be[1]=ie=>w.last_name=ie),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Ar,w.last_name]])])]),B("div",null,[be[12]||(be[12]=B("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),jn(B("input",{type:"email",id:"email","onUpdate:modelValue":be[2]||(be[2]=ie=>w.email=ie),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Ar,w.email]])]),B("div",null,[be[13]||(be[13]=B("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),jn(B("input",{type:"text",id:"username","onUpdate:modelValue":be[3]||(be[3]=ie=>w.username=ie),required:"",disabled:!!n.user,class:Ji(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",{"bg-gray-100":!!n.user}])},null,10,SC),[[Ar,w.username]]),n.user?(ut(),dt("p",MC," Le nom d'utilisateur ne peut pas tre modifi aprs la cration. ")):un("",!0)]),B("div",null,[be[14]||(be[14]=B("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Nom de l'entreprise",-1)),jn(B("input",{type:"text",id:"company_name","onUpdate:modelValue":be[4]||(be[4]=ie=>w.company_name=ie),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Ar,w.company_name]])]),B("div",AC,[n.isAdmin?(ut(),dt("div",BC,[be[16]||(be[16]=B("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Rle",-1)),jn(B("select",{id:"role","onUpdate:modelValue":be[5]||(be[5]=ie=>w.role=ie),required:"",disabled:!d.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[be[15]||(be[15]=B("option",{value:""},"Slectionner un rle",-1)),(ut(!0),dt(Sn,null,Wn(m.value,ie=>(ut(),dt("option",{key:ie.value,value:ie.value},kt(ie.label),9,NC))),128))],8,TC),[[Hs,w.role]])])):un("",!0),_.value?(ut(),dt("div",DC,[be[18]||(be[18]=B("label",{for:"dealer",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),jn(B("select",{id:"dealer","onUpdate:modelValue":be[6]||(be[6]=ie=>w.dealer=ie),required:"",disabled:!n.isAdmin,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[be[17]||(be[17]=B("option",{value:""},"Slectionner un concessionnaire",-1)),(ut(!0),dt(Sn,null,Wn(b.value,ie=>(ut(),dt("option",{key:ie.id,value:ie.id},kt(Cn(zl)(ie)),9,RC))),128))],8,OC),[[Hs,w.dealer]])])):un("",!0)]),e.user?un("",!0):(ut(),dt("div",IC,[B("div",FC,[B("div",null,[be[19]||(be[19]=B("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),jn(B("input",{type:"password",id:"password","onUpdate:modelValue":be[7]||(be[7]=ie=>w.password=ie),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Ar,w.password]])]),B("div",null,[be[20]||(be[20]=B("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),jn(B("input",{type:"password",id:"password_confirm","onUpdate:modelValue":be[8]||(be[8]=ie=>w.password_confirm=ie),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Ar,w.password_confirm]])])]),be[21]||(be[21]=B("p",{class:"mt-1 text-sm text-gray-500"}," L'utilisateur devra changer son mot de passe  sa premire connexion. ",-1))])),u.value?(ut(),dt("div",jC,[B("div",zC,[be[22]||(be[22]=B("div",{class:"flex-shrink-0"},[B("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),B("div",UC,[B("h3",qC,kt(u.value),1)])])])):un("",!0),B("div",$C,[B("button",{type:"submit",disabled:a.value,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:col-start-2 sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},[a.value?(ut(),dt("svg",GC,be[23]||(be[23]=[B("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),B("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):un("",!0),yr(" "+kt(a.value?"Enregistrement...":"Enregistrer"),1)],8,VC),B("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:col-start-1 sm:text-sm",onClick:be[9]||(be[9]=ie=>Ce.$emit("close"))}," Annuler ")])],32)])])])])])]))}}),HC={class:"fixed inset-0 z-50 overflow-y-auto"},WC={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},ZC={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},KC={class:"sm:flex sm:items-start"},JC={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},YC={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},XC={class:"mt-2"},QC={class:"text-sm text-gray-500"},e6={class:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},M1=Ms({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(e){return(t,n)=>(ut(),dt("div",HC,[B("div",WC,[n[3]||(n[3]=B("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[B("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),n[4]||(n[4]=B("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"",-1)),B("div",ZC,[B("div",KC,[n[2]||(n[2]=B("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[B("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),B("div",JC,[B("h3",YC,kt(e.title),1),B("div",XC,[B("p",QC,kt(e.message),1)])])]),B("div",e6,[B("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:n[0]||(n[0]=i=>t.$emit("confirm"))}," Confirmer "),B("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:w-auto sm:text-sm",onClick:n[1]||(n[1]=i=>t.$emit("cancel"))}," Annuler ")])])])]))}}),t6={class:"h-full bg-gray-50"},n6={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},r6={class:"flex justify-between items-center mb-8"},i6={class:"text-3xl font-extrabold text-gray-900"},s6={class:"bg-white shadow rounded-lg mb-6 p-4"},o6={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},a6={key:0},l6=["placeholder"],u6={key:1},c6=["value"],h6={class:"bg-white shadow rounded-lg"},f6={class:"overflow-x-auto"},d6={class:"min-w-full divide-y divide-gray-200"},p6={class:"bg-gray-50"},m6={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},g6={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},v6={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},_6={class:"bg-white divide-y divide-gray-200"},y6={class:"px-6 py-4 whitespace-nowrap"},b6={class:"flex items-center"},w6={class:"flex-shrink-0 h-10 w-10"},x6={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},L6={class:"text-primary-600 font-medium"},C6={class:"ml-4"},k6={class:"text-sm font-medium text-gray-900"},P6={class:"text-sm text-gray-500"},E6={class:"px-6 py-4 whitespace-nowrap"},S6={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},M6={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},A6={class:"px-6 py-4 whitespace-nowrap"},B6={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},T6=["onClick"],N6=["onClick"],D6=Ms({__name:"UserListView",setup(e){const t=hs(),n=It([]),i=It([]),o=It(!1),a=It(!1),u=It(null),d=It(null),m=Va({role:"",search:"",dealer:""}),_=Nn(()=>t.isAdmin),b=Nn(()=>t.isDealer),w=Nn(()=>n.value.filter(V=>V.role==="CONCESSIONNAIRE")),S=Nn(()=>{var X;console.log("Computing filtered users..."),console.log("Current users:",n.value),console.log("Is admin:",_.value),console.log("Is dealer:",b.value),console.log("Current filters:",m);let V=n.value;if(b.value&&(console.log("Filtering for dealer:",(X=t.user)==null?void 0:X.id),V=V.filter(N=>{var te;return N.role==="UTILISATEUR"&&N.dealer===((te=t.user)==null?void 0:te.id)}),console.log("Filtered users for dealer:",V)),_.value&&(m.role&&(V=V.filter(N=>N.role===m.role),console.log("Filtered by role:",V)),m.dealer&&(V=V.filter(N=>String(N.dealer)===String(m.dealer)),console.log("Filtered by dealer:",V))),m.search){const N=m.search.toLowerCase();V=V.filter(te=>te.username.toLowerCase().includes(N)||te.email.toLowerCase().includes(N)||te.first_name.toLowerCase().includes(N)||te.last_name.toLowerCase().includes(N)||te.company_name&&te.company_name.toLowerCase().includes(N)),console.log("Filtered by search:",V)}return console.log("Final filtered users:",V),V});$a(async()=>{await C(),_.value&&await F()});async function C(){try{console.log("Fetching users...");const V=await wn.get("/users/");console.log("Users API response:",V.data),n.value=V.data,console.log("Users after assignment:",n.value)}catch(V){console.error("Erreur lors de la rcupration des utilisateurs:",V)}}async function F(){try{const V=await wn.get("/users/",{params:{role:"CONCESSIONNAIRE"}});i.value=V.data}catch(V){console.error("Erreur lors de la rcupration des concessionnaires:",V)}}function R(){u.value=null,o.value=!0}function $(V){u.value={...V},o.value=!0}function j(){o.value=!1,u.value=null}async function G(V){var X;try{let N;const te=!!V.id,W={...V};return delete W.dealer_name,delete W.full_name,delete W.user_type,delete W.permissions,te?N=await wn.patch(`/users/${V.id}/`,W):N=await wn.post("/users/",W),await C(),j(),N.data}catch(N){const te=((X=N.response)==null?void 0:X.data)||{};let W="";throw typeof te=="object"&&(W=Object.entries(te).map(([H,me])=>Array.isArray(me)?me[0]:me).filter(H=>H).join(`
`)),W||(W="Une erreur est survenue lors de la sauvegarde"),new Error(W)}}function Y(V){d.value=V,a.value=!0}async function ke(){if(d.value)try{await wn.delete(`/users/${d.value.id}/`),await C(),a.value=!1,d.value=null}catch(V){throw console.error("Erreur lors de la suppression de l'utilisateur:",V),V}}function Ce(V,X){return`${(V==null?void 0:V.charAt(0))||""}${(X==null?void 0:X.charAt(0))||""}`.toUpperCase()}const be={ADMIN:"Admin",CONCESSIONNAIRE:"Concessionnaire",UTILISATEUR:"Client"};function ie(V){return be[V]||V}function re(V){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function Ie(V){return V?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}function Je(V){var X;return _.value?!0:b.value?V.role==="UTILISATEUR"&&V.dealer===((X=t.user)==null?void 0:X.id):!1}return(V,X)=>{var N,te;return ut(),dt("div",t6,[B("div",n6,[B("div",r6,[B("h1",i6,kt(_.value?"Gestion des utilisateurs":"Mes clients"),1),B("button",{onClick:R,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[X[4]||(X[4]=B("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),yr(" "+kt(_.value?"Nouvel utilisateur":"Nouveau client"),1)])]),B("div",s6,[B("div",o6,[_.value?(ut(),dt("div",a6,[X[6]||(X[6]=B("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rle",-1)),jn(B("select",{id:"role-filter","onUpdate:modelValue":X[0]||(X[0]=W=>m.role=W),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},X[5]||(X[5]=[B("option",{value:""},"Tous les rles",-1),B("option",{value:"ADMIN"},"Admin",-1),B("option",{value:"CONCESSIONNAIRE"},"Concessionnaire",-1),B("option",{value:"UTILISATEUR"},"Client",-1)]),512),[[Hs,m.role]])])):un("",!0),B("div",null,[X[7]||(X[7]=B("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),jn(B("input",{type:"text",id:"search","onUpdate:modelValue":X[1]||(X[1]=W=>m.search=W),placeholder:_.value?"Nom, email...":"Rechercher un client...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,8,l6),[[Ar,m.search]])]),_.value?(ut(),dt("div",u6,[X[9]||(X[9]=B("label",{for:"dealer-filter",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),jn(B("select",{id:"dealer-filter","onUpdate:modelValue":X[2]||(X[2]=W=>m.dealer=W),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[X[8]||(X[8]=B("option",{value:""},"Tous les concessionnaires",-1)),(ut(!0),dt(Sn,null,Wn(w.value,W=>(ut(),dt("option",{key:W.id,value:W.id},kt(W.company_name||`${W.first_name} ${W.last_name}`),9,c6))),128))],512),[[Hs,m.dealer]])])):un("",!0)])]),B("div",h6,[B("div",f6,[B("table",d6,[B("thead",p6,[B("tr",null,[B("th",m6,kt(_.value?"Utilisateur":"Client"),1),_.value?(ut(),dt("th",g6," Rle ")):un("",!0),X[10]||(X[10]=B("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),_.value?(ut(),dt("th",v6," Concessionnaire ")):un("",!0),X[11]||(X[11]=B("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),X[12]||(X[12]=B("th",{scope:"col",class:"relative px-6 py-3"},[B("span",{class:"sr-only"},"Actions")],-1))])]),B("tbody",_6,[(ut(!0),dt(Sn,null,Wn(S.value,W=>(ut(),dt("tr",{key:W.id},[B("td",y6,[B("div",b6,[B("div",w6,[B("div",x6,[B("span",L6,kt(Ce(W.first_name,W.last_name)),1)])]),B("div",C6,[B("div",k6,kt(Cn(zl)(W)),1),B("div",P6,kt(W.username),1)])])]),B("td",E6,[B("span",{class:Ji(re(W.role))},kt(ie(W.role)),3)]),B("td",S6,kt(W.email),1),B("td",M6,kt(W.dealer_name||"-"),1),B("td",A6,[B("span",{class:Ji(Ie(W.is_active))},kt(W.is_active?"Actif":"Inactif"),3)]),B("td",B6,[B("button",{onClick:H=>$(W),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,T6),Je(W)?(ut(),dt("button",{key:0,onClick:H=>Y(W),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,N6)):un("",!0)])]))),128))])])])])]),o.value?(ut(),Ua(S1,{key:0,user:u.value,dealers:i.value,"is-admin":_.value,"current-dealer":(te=(N=Cn(t).user)==null?void 0:N.id)==null?void 0:te.toString(),onClose:j,onSave:G},null,8,["user","dealers","is-admin","current-dealer"])):un("",!0),a.value?(ut(),Ua(M1,{key:1,title:"Supprimer l'utilisateur",message:"tes-vous sr de vouloir supprimer cet utilisateur ? Cette action est irrversible.",onConfirm:ke,onCancel:X[3]||(X[3]=W=>a.value=!1)})):un("",!0)])}}}),O6={class:"h-full bg-gray-50"},R6={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},I6={class:"sm:flex sm:items-center"},F6={class:"sm:flex-auto"},j6={class:"text-2xl font-semibold text-gray-900"},z6={class:"mt-2 text-sm text-gray-700"},U6={key:0,class:"mt-8"},q6={class:"mb-6"},$6=["value"],V6={key:0,class:"mb-6"},G6=["value"],H6={key:1,class:"mt-8"},W6={class:"mb-6"},Z6=["value"],K6={class:"mt-8"},J6={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 rounded-lg"},Y6={class:"overflow-x-auto"},X6={class:"min-w-full divide-y divide-gray-300"},Q6={class:"bg-gray-50"},ek={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"},tk={class:"ml-2 flex-none rounded"},nk={key:0,scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},rk={key:1,scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},ik={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},sk={class:"ml-2 flex-none rounded"},ok={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},ak={class:"ml-2 flex-none rounded"},lk={class:"divide-y divide-gray-200 bg-white"},uk={key:0},ck={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},hk={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},fk={key:0,class:"px-3 py-4 text-sm text-gray-900"},dk={key:0,class:"flex items-center"},pk={class:"h-8 w-8 flex-shrink-0"},mk={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},gk={class:"text-primary-700 font-medium text-sm"},vk={class:"ml-3"},_k={class:"font-medium"},yk={key:1,class:"text-gray-500"},bk={key:1,class:"px-3 py-4 text-sm text-gray-900"},wk={key:0,class:"flex items-center"},xk={class:"h-8 w-8 flex-shrink-0"},Lk={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},Ck={class:"text-primary-700 font-medium text-sm"},kk={class:"ml-3"},Pk={class:"font-medium"},Ek={key:1,class:"text-gray-500"},Sk={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},Mk={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},Ak={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},Bk=["onClick"],Tk=["onClick"],Nk=["onClick"],Dk={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},Ok={class:"bg-white rounded-lg p-6 max-w-md w-full"},Rk={class:"flex justify-between items-center mb-4"},Ik={key:0,class:"space-y-4"},Fk=["value"],jk=["value"],zk={key:1,class:"mt-4 bg-red-50 p-4 rounded-md"},Uk={class:"flex"},qk={class:"ml-3"},$k={class:"text-sm font-medium text-red-800"},Vk={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},Gk=["disabled"],Hk={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Wk=Ms({__name:"PlansView",setup(e){const t=wc(),n=zh(),i=hs(),o=s1(),a=It([]),u=It([]),d=It([]),m=It(!1),_=It(!1),b=It({nom:"",description:"",client:null}),w=It({id:0,nom:"",description:"",concessionnaire:null,client:null}),S=It(!1),C=It(null),F=It(null),R=It(null),$=It("date_modification"),j=It("desc"),G=Nn(()=>F.value?d.value.filter(U=>U.concessionnaire===F.value):d.value),Y=Nn(()=>{let U=a.value;return i.isAdmin?F.value&&(U=U.filter(I=>I.concessionnaire===F.value),R.value&&(U=U.filter(I=>I.client===R.value))):i.isDealer&&(U=U.filter(I=>{var Q;return I.concessionnaire===((Q=i.user)==null?void 0:Q.id)}),R.value&&(U=U.filter(I=>I.client===R.value))),[...U].sort((I,Q)=>{if($.value==="nom")return j.value==="asc"?I.nom.localeCompare(Q.nom):Q.nom.localeCompare(I.nom);{const Re=new Date(I[$.value]).getTime(),O=new Date(Q[$.value]).getTime();return j.value==="asc"?Re-O:O-Re}})});Nn(()=>a.value.filter(U=>{var I;return U.createur.id===((I=i.user)==null?void 0:I.id)})),Nn(()=>a.value.filter(U=>{var I,Q,Re;return i.isAdmin?U.createur.id!==((I=i.user)==null?void 0:I.id):i.isDealer?U.concessionnaire===((Q=i.user)==null?void 0:Q.id):U.client===((Re=i.user)==null?void 0:Re.id)}));const ke=Nn(()=>i.isAdmin?{title:"Tous les plans",description:"Liste complte des plans",plans:a.value}:i.isDealer?{title:"Plans des clients",description:"Plans o vous tes assign comme concessionnaire",plans:a.value.filter(U=>{var I;return U.concessionnaire===((I=i.user)==null?void 0:I.id)})}:{title:"Mes plans",description:"Plans qui vous sont assigns ou que vous avez crs",plans:a.value.filter(U=>{var I,Q;return U.client===((I=i.user)==null?void 0:I.id)||U.createur.id===((Q=i.user)==null?void 0:Q.id)})});$a(async()=>{var U;await Ce(),i.isAdmin?await be():i.isDealer&&await N(((U=i.user)==null?void 0:U.id)||0)});async function Ce(){try{const U=await n.fetchPlansWithDetails();a.value=U.data}catch(U){console.error("Erreur lors du chargement des plans:",U)}}async function be(){try{const[U,I]=await Promise.all([wn.get("/users/",{params:{role:"CONCESSIONNAIRE"}}),wn.get("/users/",{params:{role:"UTILISATEUR"}})]);u.value=U.data,d.value=I.data}catch(U){console.error("Erreur lors du chargement des dealers et clients:",U)}}function ie(){m.value=!0,b.value={nom:"",description:"",client:null}}async function re(U){try{n.setCurrentPlan(U),await o.loadPlanElements(U.id),t.push("/")}catch(I){console.error("Erreur lors du chargement du plan:",I),alert("Une erreur est survenue lors du chargement du plan")}}async function Ie(U){var I;if(U!=null&&U.id&&confirm("tes-vous sr de vouloir supprimer ce plan ?"))try{await n.deletePlan(U.id),await Ce(),((I=n.currentPlan)==null?void 0:I.id)===U.id&&n.clearCurrentPlan()}catch(Q){console.error("Erreur lors de la suppression du plan:",Q),alert("Une erreur est survenue lors de la suppression du plan")}}function Je(U){return new Date(U).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function V(U){return U?(U.first_name.charAt(0)+U.last_name.charAt(0)).toUpperCase():""}function X(U){w.value={id:U.id,nom:U.nom,description:U.description,concessionnaire:U.concessionnaire||null,client:U.client||null},U.concessionnaire&&N(U.concessionnaire),_.value=!0}async function N(U){try{const I=await wn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:U}});d.value=I.data}catch(I){console.error("Erreur lors du chargement des clients:",I),d.value=[]}}async function te(){var U,I,Q,Re,O;C.value=null,S.value=!0;try{if(!w.value.nom.trim())throw new Error("Le nom du plan est requis");if(w.value.client&&!w.value.concessionnaire)throw new Error("Un concessionnaire doit tre slectionn pour assigner un client");await n.updatePlanDetails(w.value.id,{nom:w.value.nom.trim(),description:w.value.description.trim(),concessionnaire:w.value.concessionnaire,client:w.value.client})&&(_.value=!1,await Ce())}catch(J){if(console.error("Erreur lors de la mise  jour du plan:",J),(I=(U=J.response)==null?void 0:U.data)!=null&&I.detail)C.value=J.response.data.detail;else if((Re=(Q=J.response)==null?void 0:Q.data)!=null&&Re.non_field_errors)C.value=J.response.data.non_field_errors[0];else if((O=J.response)!=null&&O.data){const se=Object.entries(J.response.data).map(([de,_e])=>`${de}: ${Array.isArray(_e)?_e[0]:_e}`);C.value=se.join(`
`)}else C.value=J.message||"Une erreur est survenue lors de la mise  jour du plan"}finally{S.value=!1}}Yi(()=>w.value.concessionnaire,async U=>{U?await N(U):(d.value=[],w.value.client=null)});function W(U){const I=i.user;return I?I.user_type==="admin"?!0:I.user_type==="dealer"?U.concessionnaire===I.id:U.client===I.id||U.createur.id===I.id:!1}Nn(()=>{const U=new Map;return a.value.forEach(I=>{I.createur&&U.set(I.createur.id,I.createur),I.concessionnaire_details&&U.set(I.concessionnaire_details.id,I.concessionnaire_details),I.client_details&&U.set(I.client_details.id,I.client_details)}),U});async function H(U){await Ce(),t.push("/")}function me(U){$.value===U?j.value=j.value==="asc"?"desc":"asc":($.value=U,j.value="desc")}return(U,I)=>(ut(),dt("div",O6,[B("div",R6,[B("div",I6,[B("div",F6,[B("h1",j6,kt(ke.value.title),1),B("p",z6,kt(ke.value.description),1)]),B("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[B("button",{onClick:ie,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),Cn(i).isAdmin?(ut(),dt("div",U6,[B("div",q6,[I[14]||(I[14]=B("label",{for:"dealer-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par concessionnaire",-1)),jn(B("select",{id:"dealer-filter","onUpdate:modelValue":I[0]||(I[0]=Q=>F.value=Q),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[I[13]||(I[13]=B("option",{value:null},"Tous les concessionnaires",-1)),(ut(!0),dt(Sn,null,Wn(u.value,Q=>(ut(),dt("option",{key:Q.id,value:Q.id},kt(Q.first_name)+" "+kt(Q.last_name)+" ("+kt(Q.company_name)+") ",9,$6))),128))],512),[[Hs,F.value]])]),F.value?(ut(),dt("div",V6,[I[16]||(I[16]=B("label",{for:"client-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par client",-1)),jn(B("select",{id:"client-filter","onUpdate:modelValue":I[1]||(I[1]=Q=>R.value=Q),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[I[15]||(I[15]=B("option",{value:null},"Tous les clients",-1)),(ut(!0),dt(Sn,null,Wn(G.value,Q=>(ut(),dt("option",{key:Q.id,value:Q.id},kt(Q.first_name)+" "+kt(Q.last_name)+" ("+kt(Q.company_name)+") ",9,G6))),128))],512),[[Hs,R.value]])])):un("",!0)])):Cn(i).isDealer?(ut(),dt("div",H6,[B("div",W6,[I[18]||(I[18]=B("label",{for:"client-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par client",-1)),jn(B("select",{id:"client-filter","onUpdate:modelValue":I[2]||(I[2]=Q=>R.value=Q),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[I[17]||(I[17]=B("option",{value:null},"Tous les clients",-1)),(ut(!0),dt(Sn,null,Wn(d.value,Q=>(ut(),dt("option",{key:Q.id,value:Q.id},kt(Q.first_name)+" "+kt(Q.last_name)+" ("+kt(Q.company_name)+") ",9,Z6))),128))],512),[[Hs,R.value]])])])):un("",!0),B("div",K6,[B("div",J6,[B("div",Y6,[B("table",X6,[B("thead",Q6,[B("tr",null,[B("th",ek,[B("button",{onClick:I[3]||(I[3]=Q=>me("nom")),class:"group inline-flex items-center"},[I[20]||(I[20]=yr(" Nom ")),B("span",tk,[(ut(),dt("svg",{class:Ji(["h-5 w-5",{"text-gray-900":$.value==="nom","text-gray-400":$.value!=="nom","rotate-180":$.value==="nom"&&j.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},I[19]||(I[19]=[B("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),I[25]||(I[25]=B("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),Cn(i).isDealer?un("",!0):(ut(),dt("th",nk," Concessionnaire ")),Cn(i).isClient?un("",!0):(ut(),dt("th",rk," Client ")),B("th",ik,[B("button",{onClick:I[4]||(I[4]=Q=>me("date_creation")),class:"group inline-flex items-center"},[I[22]||(I[22]=yr(" Cr le ")),B("span",sk,[(ut(),dt("svg",{class:Ji(["h-5 w-5",{"text-gray-900":$.value==="date_creation","text-gray-400":$.value!=="date_creation","rotate-180":$.value==="date_creation"&&j.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},I[21]||(I[21]=[B("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),B("th",ok,[B("button",{onClick:I[5]||(I[5]=Q=>me("date_modification")),class:"group inline-flex items-center"},[I[24]||(I[24]=yr(" Modifi le ")),B("span",ak,[(ut(),dt("svg",{class:Ji(["h-5 w-5",{"text-gray-900":$.value==="date_modification","text-gray-400":$.value!=="date_modification","rotate-180":$.value==="date_modification"&&j.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},I[23]||(I[23]=[B("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),I[26]||(I[26]=B("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[B("span",{class:"sr-only"},"Actions")],-1))])]),B("tbody",lk,[Y.value.length===0?(ut(),dt("tr",uk,I[27]||(I[27]=[B("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun plan disponible ",-1)]))):un("",!0),(ut(!0),dt(Sn,null,Wn(Y.value,Q=>(ut(),dt("tr",{key:Q.id,class:"hover:bg-gray-50"},[B("td",ck,kt(Q.nom),1),B("td",hk,kt(Q.description||"-"),1),Cn(i).isDealer?un("",!0):(ut(),dt("td",fk,[Q.concessionnaire_details?(ut(),dt("div",dk,[B("div",pk,[B("div",mk,[B("span",gk,kt(V(Q.concessionnaire_details)),1)])]),B("div",vk,[B("div",_k,kt(Cn(zl)(Q.concessionnaire_details)),1)])])):(ut(),dt("div",yk,"-"))])),Cn(i).isClient?un("",!0):(ut(),dt("td",bk,[Q.client_details?(ut(),dt("div",wk,[B("div",xk,[B("div",Lk,[B("span",Ck,kt(V(Q.client_details)),1)])]),B("div",kk,[B("div",Pk,kt(Cn(zl)(Q.client_details)),1)])])):(ut(),dt("div",Ek,"-"))])),B("td",Sk,kt(Je(Q.date_creation)),1),B("td",Mk,kt(Je(Q.date_modification)),1),B("td",Ak,[B("button",{onClick:Re=>re(Q),class:"text-primary-600 hover:text-primary-900 mr-4"}," Ouvrir ",8,Bk),B("button",{onClick:Re=>X(Q),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,Tk),W(Q)?(ut(),dt("button",{key:0,onClick:Re=>Ie(Q),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,Nk)):un("",!0)])]))),128))])])])])]),Nr(o1,{modelValue:m.value,"onUpdate:modelValue":I[6]||(I[6]=Q=>m.value=Q),dealers:u.value,clients:d.value,onCreated:H},null,8,["modelValue","dealers","clients"]),_.value?(ut(),dt("div",Dk,[B("div",Ok,[B("div",Rk,[I[29]||(I[29]=B("h2",{class:"text-xl font-semibold text-gray-900"},"Modifier le plan",-1)),B("button",{onClick:I[7]||(I[7]=Q=>_.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},I[28]||(I[28]=[B("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),B("form",{onSubmit:Ah(te,["prevent"]),class:"space-y-4"},[B("div",null,[I[30]||(I[30]=B("label",{for:"edit-nom",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),jn(B("input",{type:"text",id:"edit-nom","onUpdate:modelValue":I[8]||(I[8]=Q=>w.value.nom=Q),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",required:""},null,512),[[Ar,w.value.nom]])]),B("div",null,[I[31]||(I[31]=B("label",{for:"edit-description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),jn(B("textarea",{id:"edit-description","onUpdate:modelValue":I[9]||(I[9]=Q=>w.value.description=Q),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[Ar,w.value.description]])]),Cn(i).isAdmin?(ut(),dt("div",Ik,[B("div",null,[I[33]||(I[33]=B("label",{for:"edit-concessionnaire",class:"block text-sm font-medium text-gray-700"}," Concessionnaire ",-1)),jn(B("select",{id:"edit-concessionnaire","onUpdate:modelValue":I[10]||(I[10]=Q=>w.value.concessionnaire=Q),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[I[32]||(I[32]=B("option",{value:null},"Aucun",-1)),(ut(!0),dt(Sn,null,Wn(u.value,Q=>(ut(),dt("option",{key:Q.id,value:Q.id},kt(Cn(zl)(Q)),9,Fk))),128))],512),[[Hs,w.value.concessionnaire]])]),B("div",null,[I[35]||(I[35]=B("label",{for:"edit-client",class:"block text-sm font-medium text-gray-700"}," Client ",-1)),jn(B("select",{id:"edit-client","onUpdate:modelValue":I[11]||(I[11]=Q=>w.value.client=Q),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[I[34]||(I[34]=B("option",{value:null},"Aucun",-1)),(ut(!0),dt(Sn,null,Wn(G.value,Q=>(ut(),dt("option",{key:Q.id,value:Q.id},kt(Cn(zl)(Q)),9,jk))),128))],512),[[Hs,w.value.client]])])])):un("",!0),C.value?(ut(),dt("div",zk,[B("div",Uk,[I[36]||(I[36]=B("div",{class:"flex-shrink-0"},[B("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),B("div",qk,[B("p",$k,kt(C.value),1)])])])):un("",!0),B("div",Vk,[B("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:I[12]||(I[12]=Q=>_.value=!1)}," Annuler "),B("button",{type:"submit",disabled:S.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm disabled:opacity-50"},[S.value?(ut(),dt("svg",Hk,I[37]||(I[37]=[B("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),B("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):un("",!0),yr(" "+kt(S.value?"Enregistrement...":"Enregistrer"),1)],8,Gk)])],32)])])):un("",!0)])]))}}),Zk={class:"h-full bg-gray-50"},Kk={class:"container mx-auto px-4 py-8"},Jk={class:"sm:flex sm:items-center"},Yk={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},Xk={class:"mt-8"},Qk={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 rounded-lg"},eP={class:"overflow-x-auto"},tP={class:"min-w-full divide-y divide-gray-300"},nP={class:"divide-y divide-gray-200 bg-white"},rP={key:0,class:"animate-pulse"},iP={key:1},sP={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-6"},oP={class:"flex items-center"},aP={class:"h-10 w-10 flex-shrink-0"},lP={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},uP={class:"text-primary-600 font-medium"},cP={class:"ml-4"},hP={class:"font-medium text-gray-900"},fP={class:"text-gray-500"},dP={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},pP={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},mP={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},gP={class:"flex items-center"},vP={class:"font-medium"},_P={class:"text-gray-400 ml-1"},yP={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},bP=["onClick"],wP=["onClick"],xP=Ms({__name:"ClientListView",setup(e){wc();const t=hs(),n=It([]),i=It(!0),o=It(!1),a=It(!1),u=It(null),d=It(null);$a(async()=>{await m()});async function m(){var R;try{const $=await wn.get("/users/",{params:{dealer:(R=t.user)==null?void 0:R.id,role:"UTILISATEUR",include_plans:!0}});n.value=$.data}catch($){console.error("Error fetching clients:",$)}finally{i.value=!1}}function _(R,$){return`${(R==null?void 0:R.charAt(0))||""}${($==null?void 0:$.charAt(0))||""}`.toUpperCase()}function b(R){u.value=R,o.value=!0}function w(){o.value=!1,u.value=null}async function S(R){var $;try{const j=!!R.id,G=j?`/users/${R.id}/`:"/users/",Y=j?"patch":"post";R.role="UTILISATEUR",R.concessionnaire=($=t.user)==null?void 0:$.id,await wn[Y](G,R),await m(),w()}catch(j){throw console.error("Erreur lors de la sauvegarde du client:",j),j}}function C(R){d.value=R,a.value=!0}async function F(){if(d.value)try{await wn.delete(`/users/${d.value.id}/`),await m(),a.value=!1,d.value=null}catch(R){throw console.error("Erreur lors de la suppression du client:",R),R}}return(R,$)=>{var j,G;return ut(),dt("div",Zk,[B("div",Kk,[B("div",Jk,[$[3]||($[3]=B("div",{class:"sm:flex-auto"},[B("h1",{class:"text-2xl font-semibold text-gray-900"},"Clients"),B("p",{class:"mt-2 text-sm text-gray-700"}," Liste de vos clients et leurs plans associs ")],-1)),B("div",Yk,[B("button",{onClick:$[0]||($[0]=Y=>o.value=!0),class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"},$[2]||($[2]=[B("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1),yr(" Ajouter un client ")]))])]),B("div",Xk,[B("div",Qk,[B("div",eP,[B("table",tP,[$[6]||($[6]=B("thead",{class:"bg-gray-50"},[B("tr",null,[B("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," Client "),B("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Email "),B("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise "),B("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Nombre de plans "),B("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[B("span",{class:"sr-only"},"Actions")])])],-1)),B("tbody",nP,[i.value?(ut(),dt("tr",rP,$[4]||($[4]=[B("td",{colspan:"5",class:"py-4 px-6"},[B("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):n.value.length===0?(ut(),dt("tr",iP,$[5]||($[5]=[B("td",{colspan:"5",class:"py-4 px-6 text-center text-gray-500"}," Aucun client trouv ",-1)]))):un("",!0),(ut(!0),dt(Sn,null,Wn(n.value,Y=>(ut(),dt("tr",{key:Y.id,class:"hover:bg-gray-50"},[B("td",sP,[B("div",oP,[B("div",aP,[B("div",lP,[B("span",uP,kt(_(Y.first_name,Y.last_name)),1)])]),B("div",cP,[B("div",hP,kt(Cn(zl)(Y)),1),B("div",fP,kt(Y.username),1)])])]),B("td",dP,kt(Y.email),1),B("td",pP,kt(Y.company_name||"-"),1),B("td",mP,[B("div",gP,[B("span",vP,kt(Y.plans_count||0),1),B("span",_P,"plan"+kt((Y.plans_count||0)>1?"s":""),1)])]),B("td",yP,[B("button",{onClick:ke=>b(Y),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,bP),B("button",{onClick:ke=>C(Y),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,wP)])]))),128))])])])])]),o.value?(ut(),Ua(S1,{key:0,user:u.value||{},dealers:[{...Cn(t).user,role:"CONCESSIONNAIRE"}],"is-admin":!1,"current-dealer":(G=(j=Cn(t).user)==null?void 0:j.id)==null?void 0:G.toString(),onClose:w,onSave:S},null,8,["user","dealers","current-dealer"])):un("",!0),a.value?(ut(),Ua(M1,{key:1,title:"Supprimer le client",message:"tes-vous sr de vouloir supprimer ce client ? Cette action est irrversible.",onConfirm:F,onCancel:$[1]||($[1]=Y=>a.value=!1)})):un("",!0)])])}}}),A1=W5({history:C5("/"),routes:[{path:"/",name:"home",component:Z0,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/plans",name:"plans",component:Wk,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/users",name:"users",component:D6,meta:{requiresAuth:!0,allowedRoles:["admin"]}},{path:"/clients",name:"clients",component:xP,meta:{requiresAuth:!0,allowedRoles:["dealer"]}},{path:"/profile",name:"profile",component:()=>Ul(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/login",name:"login",component:d3,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>Ul(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>Ul(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:Zb,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/map",name:"map",component:Z0,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>Ul(()=>import("./NotFoundView.js"),[])}]});A1.beforeEach(async(e,t,n)=>{var d,m;const i=hs();if(console.log("Route:",e.path,"Auth state:",{initialized:i.initialized,isAuthenticated:i.isAuthenticated,user:i.user}),!i.initialized)try{await i.initialize(window.INITIAL_STATE)}catch(_){console.error("Error initializing auth store:",_)}const o=i.isAuthenticated,a=(d=i.user)==null?void 0:d.must_change_password,u=(m=i.user)==null?void 0:m.user_type;if(e.meta.requiresAuth&&!o){n("/login");return}if(o&&a&&e.name!=="changePassword"){n({name:"changePassword"});return}if(e.name==="changePassword"&&!a){n({name:"home"});return}if(e.meta.allowedRoles&&u&&!e.meta.allowedRoles.includes(u)){n({name:"home"});return}if(e.meta.requiresGuest&&o){n({name:"home"});return}n()});const Ud=ly(Pb),B1=hy();Ud.use(B1);Ud.use(A1);const LP=hs(B1);window.INITIAL_STATE&&LP.initialize(window.INITIAL_STATE);Ud.mount("#app");export{or as _,Va as a,B as b,dt as c,Ms as d,un as e,jn as f,ut as g,fp as h,yr as i,Nr as j,Il as k,Vv as l,$P as m,Ji as n,$a as o,wc as p,po as q,It as r,Wg as s,kt as t,hs as u,Ar as v,Ah as w};
