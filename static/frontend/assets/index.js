var NC=Object.defineProperty;var OC=(e,t,n)=>t in e?NC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var oe=(e,t,n)=>OC(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Pg(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const hn={},Qu=[],eo=()=>{},RC=()=>!1,tp=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ig=e=>e.startsWith("onUpdate:"),Vr=Object.assign,Tg=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},BC=Object.prototype.hasOwnProperty,rn=(e,t)=>BC.call(e,t),ge=Array.isArray,tl=e=>nh(e)==="[object Map]",ep=e=>nh(e)==="[object Set]",wm=e=>nh(e)==="[object Date]",Me=e=>typeof e=="function",Jn=e=>typeof e=="string",ro=e=>typeof e=="symbol",yn=e=>e!==null&&typeof e=="object",d0=e=>(yn(e)||Me(e))&&Me(e.then)&&Me(e.catch),g0=Object.prototype.toString,nh=e=>g0.call(e),FC=e=>nh(e).slice(8,-1),m0=e=>nh(e)==="[object Object]",Ag=e=>Jn(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,bc=Pg(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),np=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},zC=/-(\w)/g,da=np(e=>e.replace(zC,(t,n)=>n?n.toUpperCase():"")),GC=/\B([A-Z])/g,pu=np(e=>e.replace(GC,"-$1").toLowerCase()),_0=np(e=>e.charAt(0).toUpperCase()+e.slice(1)),Pd=np(e=>e?`on${_0(e)}`:""),ua=(e,t)=>!Object.is(e,t),ff=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},y0=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},Mf=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Sm;const rp=()=>Sm||(Sm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function rl(e){if(ge(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=Jn(r)?qC(r):rl(r);if(i)for(const o in i)t[o]=i[o]}return t}else if(Jn(e)||yn(e))return e}const UC=/;(?![^(]*\))/g,VC=/:([^]+)/,jC=/\/\*[^]*?\*\//g;function qC(e){const t={};return e.replace(jC,"").split(UC).forEach(n=>{if(n){const r=n.split(VC);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function la(e){let t="";if(Jn(e))t=e;else if(ge(e))for(let n=0;n<e.length;n++){const r=la(e[n]);r&&(t+=r+" ")}else if(yn(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const HC="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ZC=Pg(HC);function v0(e){return!!e||e===""}function KC(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=ip(e[r],t[r]);return n}function ip(e,t){if(e===t)return!0;let n=wm(e),r=wm(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=ro(e),r=ro(t),n||r)return e===t;if(n=ge(e),r=ge(t),n||r)return n&&r?KC(e,t):!1;if(n=yn(e),r=yn(t),n||r){if(!n||!r)return!1;const i=Object.keys(e).length,o=Object.keys(t).length;if(i!==o)return!1;for(const u in e){const f=e.hasOwnProperty(u),d=t.hasOwnProperty(u);if(f&&!d||!f&&d||!ip(e[u],t[u]))return!1}}return String(e)===String(t)}function XC(e,t){return e.findIndex(n=>ip(n,t))}const C0=e=>!!(e&&e.__v_isRef===!0),_e=e=>Jn(e)?e:e==null?"":ge(e)||yn(e)&&(e.toString===g0||!Me(e.toString))?C0(e)?_e(e.value):JSON.stringify(e,E0,2):String(e),E0=(e,t)=>C0(t)?E0(e,t.value):tl(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i],o)=>(n[Id(r,o)+" =>"]=i,n),{})}:ep(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Id(n))}:ro(t)?Id(t):yn(t)&&!ge(t)&&!m0(t)?String(t):t,Id=(e,t="")=>{var n;return ro(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ti;class L0{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ti,!t&&ti&&(this.index=(ti.scopes||(ti.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=ti;try{return ti=this,t()}finally{ti=n}}}on(){ti=this}off(){ti=this.parent}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function x0(e){return new L0(e)}function b0(){return ti}function WC(e,t=!1){ti&&ti.cleanups.push(e)}let gn;const Td=new WeakSet;class w0{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ti&&ti.active&&ti.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Td.has(this)&&(Td.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||M0(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Mm(this),P0(this);const t=gn,n=Cs;gn=this,Cs=!0;try{return this.fn()}finally{I0(this),gn=t,Cs=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Ng(t);this.deps=this.depsTail=void 0,Mm(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Td.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Qd(this)&&this.run()}get dirty(){return Qd(this)}}let S0=0,wc,Sc;function M0(e,t=!1){if(e.flags|=8,t){e.next=Sc,Sc=e;return}e.next=wc,wc=e}function kg(){S0++}function Dg(){if(--S0>0)return;if(Sc){let t=Sc;for(Sc=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;wc;){let t=wc;for(wc=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function P0(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function I0(e){let t,n=e.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),Ng(r),YC(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}e.deps=t,e.depsTail=n}function Qd(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(T0(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function T0(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Nc))return;e.globalVersion=Nc;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!Qd(e)){e.flags&=-3;return}const n=gn,r=Cs;gn=e,Cs=!0;try{P0(e);const i=e.fn(e._value);(t.version===0||ua(i,e._value))&&(e._value=i,t.version++)}catch(i){throw t.version++,i}finally{gn=n,Cs=r,I0(e),e.flags&=-3}}function Ng(e,t=!1){const{dep:n,prevSub:r,nextSub:i}=e;if(r&&(r.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let o=n.computed.deps;o;o=o.nextDep)Ng(o,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function YC(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Cs=!0;const A0=[];function ba(){A0.push(Cs),Cs=!1}function wa(){const e=A0.pop();Cs=e===void 0?!0:e}function Mm(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=gn;gn=void 0;try{t()}finally{gn=n}}}let Nc=0;class JC{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Og{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!gn||!Cs||gn===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==gn)n=this.activeLink=new JC(gn,this),gn.deps?(n.prevDep=gn.depsTail,gn.depsTail.nextDep=n,gn.depsTail=n):gn.deps=gn.depsTail=n,k0(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=gn.depsTail,n.nextDep=void 0,gn.depsTail.nextDep=n,gn.depsTail=n,gn.deps===n&&(gn.deps=r)}return n}trigger(t){this.version++,Nc++,this.notify(t)}notify(t){kg();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Dg()}}}function k0(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)k0(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Pf=new WeakMap,Ka=Symbol(""),tg=Symbol(""),Oc=Symbol("");function Br(e,t,n){if(Cs&&gn){let r=Pf.get(e);r||Pf.set(e,r=new Map);let i=r.get(n);i||(r.set(n,i=new Og),i.map=r,i.key=n),i.track()}}function Po(e,t,n,r,i,o){const u=Pf.get(e);if(!u){Nc++;return}const f=d=>{d&&d.trigger()};if(kg(),t==="clear")u.forEach(f);else{const d=ge(e),_=d&&Ag(n);if(d&&n==="length"){const y=Number(r);u.forEach((E,S)=>{(S==="length"||S===Oc||!ro(S)&&S>=y)&&f(E)})}else switch((n!==void 0||u.has(void 0))&&f(u.get(n)),_&&f(u.get(Oc)),t){case"add":d?_&&f(u.get("length")):(f(u.get(Ka)),tl(e)&&f(u.get(tg)));break;case"delete":d||(f(u.get(Ka)),tl(e)&&f(u.get(tg)));break;case"set":tl(e)&&f(u.get(Ka));break}}Dg()}function $C(e,t){const n=Pf.get(e);return n&&n.get(t)}function Xu(e){const t=We(e);return t===e?t:(Br(t,"iterate",Oc),$i(e)?t:t.map(Fr))}function sp(e){return Br(e=We(e),"iterate",Oc),e}const QC={__proto__:null,[Symbol.iterator](){return Ad(this,Symbol.iterator,Fr)},concat(...e){return Xu(this).concat(...e.map(t=>ge(t)?Xu(t):t))},entries(){return Ad(this,"entries",e=>(e[1]=Fr(e[1]),e))},every(e,t){return wo(this,"every",e,t,void 0,arguments)},filter(e,t){return wo(this,"filter",e,t,n=>n.map(Fr),arguments)},find(e,t){return wo(this,"find",e,t,Fr,arguments)},findIndex(e,t){return wo(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return wo(this,"findLast",e,t,Fr,arguments)},findLastIndex(e,t){return wo(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return wo(this,"forEach",e,t,void 0,arguments)},includes(...e){return kd(this,"includes",e)},indexOf(...e){return kd(this,"indexOf",e)},join(e){return Xu(this).join(e)},lastIndexOf(...e){return kd(this,"lastIndexOf",e)},map(e,t){return wo(this,"map",e,t,void 0,arguments)},pop(){return dc(this,"pop")},push(...e){return dc(this,"push",e)},reduce(e,...t){return Pm(this,"reduce",e,t)},reduceRight(e,...t){return Pm(this,"reduceRight",e,t)},shift(){return dc(this,"shift")},some(e,t){return wo(this,"some",e,t,void 0,arguments)},splice(...e){return dc(this,"splice",e)},toReversed(){return Xu(this).toReversed()},toSorted(e){return Xu(this).toSorted(e)},toSpliced(...e){return Xu(this).toSpliced(...e)},unshift(...e){return dc(this,"unshift",e)},values(){return Ad(this,"values",Fr)}};function Ad(e,t,n){const r=sp(e),i=r[t]();return r!==e&&!$i(e)&&(i._next=i.next,i.next=()=>{const o=i._next();return o.value&&(o.value=n(o.value)),o}),i}const tE=Array.prototype;function wo(e,t,n,r,i,o){const u=sp(e),f=u!==e&&!$i(e),d=u[t];if(d!==tE[t]){const E=d.apply(e,o);return f?Fr(E):E}let _=n;u!==e&&(f?_=function(E,S){return n.call(this,Fr(E),S,e)}:n.length>2&&(_=function(E,S){return n.call(this,E,S,e)}));const y=d.call(u,_,r);return f&&i?i(y):y}function Pm(e,t,n,r){const i=sp(e);let o=n;return i!==e&&($i(e)?n.length>3&&(o=function(u,f,d){return n.call(this,u,f,d,e)}):o=function(u,f,d){return n.call(this,u,Fr(f),d,e)}),i[t](o,...r)}function kd(e,t,n){const r=We(e);Br(r,"iterate",Oc);const i=r[t](...n);return(i===-1||i===!1)&&Fg(n[0])?(n[0]=We(n[0]),r[t](...n)):i}function dc(e,t,n=[]){ba(),kg();const r=We(e)[t].apply(e,n);return Dg(),wa(),r}const eE=Pg("__proto__,__v_isRef,__isVue"),D0=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ro));function nE(e){ro(e)||(e=String(e));const t=We(this);return Br(t,"has",e),t.hasOwnProperty(e)}class N0{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return o;if(n==="__v_raw")return r===(i?o?fE:F0:o?B0:R0).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const u=ge(t);if(!i){let d;if(u&&(d=QC[n]))return d;if(n==="hasOwnProperty")return nE}const f=Reflect.get(t,n,Gn(t)?t:r);return(ro(n)?D0.has(n):eE(n))||(i||Br(t,"get",n),o)?f:Gn(f)?u&&Ag(n)?f:f.value:yn(f)?i?G0(f):rh(f):f}}class O0 extends N0{constructor(t=!1){super(!1,t)}set(t,n,r,i){let o=t[n];if(!this._isShallow){const d=Ya(o);if(!$i(r)&&!Ya(r)&&(o=We(o),r=We(r)),!ge(t)&&Gn(o)&&!Gn(r))return d?!1:(o.value=r,!0)}const u=ge(t)&&Ag(n)?Number(n)<t.length:rn(t,n),f=Reflect.set(t,n,r,Gn(t)?t:i);return t===We(i)&&(u?ua(r,o)&&Po(t,"set",n,r):Po(t,"add",n,r)),f}deleteProperty(t,n){const r=rn(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&r&&Po(t,"delete",n,void 0),i}has(t,n){const r=Reflect.has(t,n);return(!ro(n)||!D0.has(n))&&Br(t,"has",n),r}ownKeys(t){return Br(t,"iterate",ge(t)?"length":Ka),Reflect.ownKeys(t)}}class rE extends N0{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const iE=new O0,sE=new rE,oE=new O0(!0);const eg=e=>e,tf=e=>Reflect.getPrototypeOf(e);function aE(e,t,n){return function(...r){const i=this.__v_raw,o=We(i),u=tl(o),f=e==="entries"||e===Symbol.iterator&&u,d=e==="keys"&&u,_=i[e](...r),y=n?eg:t?ng:Fr;return!t&&Br(o,"iterate",d?tg:Ka),{next(){const{value:E,done:S}=_.next();return S?{value:E,done:S}:{value:f?[y(E[0]),y(E[1])]:y(E),done:S}},[Symbol.iterator](){return this}}}}function ef(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function uE(e,t){const n={get(i){const o=this.__v_raw,u=We(o),f=We(i);e||(ua(i,f)&&Br(u,"get",i),Br(u,"get",f));const{has:d}=tf(u),_=t?eg:e?ng:Fr;if(d.call(u,i))return _(o.get(i));if(d.call(u,f))return _(o.get(f));o!==u&&o.get(i)},get size(){const i=this.__v_raw;return!e&&Br(We(i),"iterate",Ka),Reflect.get(i,"size",i)},has(i){const o=this.__v_raw,u=We(o),f=We(i);return e||(ua(i,f)&&Br(u,"has",i),Br(u,"has",f)),i===f?o.has(i):o.has(i)||o.has(f)},forEach(i,o){const u=this,f=u.__v_raw,d=We(f),_=t?eg:e?ng:Fr;return!e&&Br(d,"iterate",Ka),f.forEach((y,E)=>i.call(o,_(y),_(E),u))}};return Vr(n,e?{add:ef("add"),set:ef("set"),delete:ef("delete"),clear:ef("clear")}:{add(i){!t&&!$i(i)&&!Ya(i)&&(i=We(i));const o=We(this);return tf(o).has.call(o,i)||(o.add(i),Po(o,"add",i,i)),this},set(i,o){!t&&!$i(o)&&!Ya(o)&&(o=We(o));const u=We(this),{has:f,get:d}=tf(u);let _=f.call(u,i);_||(i=We(i),_=f.call(u,i));const y=d.call(u,i);return u.set(i,o),_?ua(o,y)&&Po(u,"set",i,o):Po(u,"add",i,o),this},delete(i){const o=We(this),{has:u,get:f}=tf(o);let d=u.call(o,i);d||(i=We(i),d=u.call(o,i)),f&&f.call(o,i);const _=o.delete(i);return d&&Po(o,"delete",i,void 0),_},clear(){const i=We(this),o=i.size!==0,u=i.clear();return o&&Po(i,"clear",void 0,void 0),u}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=aE(i,e,t)}),n}function Rg(e,t){const n=uE(e,t);return(r,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(rn(n,i)&&i in r?n:r,i,o)}const lE={get:Rg(!1,!1)},cE={get:Rg(!1,!0)},hE={get:Rg(!0,!1)};const R0=new WeakMap,B0=new WeakMap,F0=new WeakMap,fE=new WeakMap;function pE(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function dE(e){return e.__v_skip||!Object.isExtensible(e)?0:pE(FC(e))}function rh(e){return Ya(e)?e:Bg(e,!1,iE,lE,R0)}function z0(e){return Bg(e,!1,oE,cE,B0)}function G0(e){return Bg(e,!0,sE,hE,F0)}function Bg(e,t,n,r,i){if(!yn(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=i.get(e);if(o)return o;const u=dE(e);if(u===0)return e;const f=new Proxy(e,u===2?r:n);return i.set(e,f),f}function ca(e){return Ya(e)?ca(e.__v_raw):!!(e&&e.__v_isReactive)}function Ya(e){return!!(e&&e.__v_isReadonly)}function $i(e){return!!(e&&e.__v_isShallow)}function Fg(e){return e?!!e.__v_raw:!1}function We(e){const t=e&&e.__v_raw;return t?We(t):e}function zg(e){return!rn(e,"__v_skip")&&Object.isExtensible(e)&&y0(e,"__v_skip",!0),e}const Fr=e=>yn(e)?rh(e):e,ng=e=>yn(e)?G0(e):e;function Gn(e){return e?e.__v_isRef===!0:!1}function zn(e){return U0(e,!1)}function gE(e){return U0(e,!0)}function U0(e,t){return Gn(e)?e:new mE(e,t)}class mE{constructor(t,n){this.dep=new Og,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:We(t),this._value=n?t:Fr(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||$i(t)||Ya(t);t=r?t:We(t),ua(t,n)&&(this._rawValue=t,this._value=r?t:Fr(t),this.dep.trigger())}}function Qs(e){return Gn(e)?e.value:e}const _E={get:(e,t,n)=>t==="__v_raw"?e:Qs(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return Gn(i)&&!Gn(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function V0(e){return ca(e)?e:new Proxy(e,_E)}function yE(e){const t=ge(e)?new Array(e.length):{};for(const n in e)t[n]=CE(e,n);return t}class vE{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return $C(We(this._object),this._key)}}function CE(e,t,n){const r=e[t];return Gn(r)?r:new vE(e,t,n)}class EE{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Og(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Nc-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&gn!==this)return M0(this,!0),!0}get value(){const t=this.dep.track();return T0(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function LE(e,t,n=!1){let r,i;return Me(e)?r=e:(r=e.get,i=e.set),new EE(r,i,n)}const nf={},If=new WeakMap;let qa;function xE(e,t=!1,n=qa){if(n){let r=If.get(n);r||If.set(n,r=[]),r.push(e)}}function bE(e,t,n=hn){const{immediate:r,deep:i,once:o,scheduler:u,augmentJob:f,call:d}=n,_=gt=>i?gt:$i(gt)||i===!1||i===0?Io(gt,1):Io(gt);let y,E,S,T,I=!1,z=!1;if(Gn(e)?(E=()=>e.value,I=$i(e)):ca(e)?(E=()=>_(e),I=!0):ge(e)?(z=!0,I=e.some(gt=>ca(gt)||$i(gt)),E=()=>e.map(gt=>{if(Gn(gt))return gt.value;if(ca(gt))return _(gt);if(Me(gt))return d?d(gt,2):gt()})):Me(e)?t?E=d?()=>d(e,2):e:E=()=>{if(S){ba();try{S()}finally{wa()}}const gt=qa;qa=y;try{return d?d(e,3,[T]):e(T)}finally{qa=gt}}:E=eo,t&&i){const gt=E,xt=i===!0?1/0:i;E=()=>Io(gt(),xt)}const G=b0(),W=()=>{y.stop(),G&&G.active&&Tg(G.effects,y)};if(o&&t){const gt=t;t=(...xt)=>{gt(...xt),W()}}let Q=z?new Array(e.length).fill(nf):nf;const rt=gt=>{if(!(!(y.flags&1)||!y.dirty&&!gt))if(t){const xt=y.run();if(i||I||(z?xt.some((bt,Dt)=>ua(bt,Q[Dt])):ua(xt,Q))){S&&S();const bt=qa;qa=y;try{const Dt=[xt,Q===nf?void 0:z&&Q[0]===nf?[]:Q,T];d?d(t,3,Dt):t(...Dt),Q=xt}finally{qa=bt}}}else y.run()};return f&&f(rt),y=new w0(E),y.scheduler=u?()=>u(rt,!1):rt,T=gt=>xE(gt,!1,y),S=y.onStop=()=>{const gt=If.get(y);if(gt){if(d)d(gt,4);else for(const xt of gt)xt();If.delete(y)}},t?r?rt(!0):Q=y.run():u?u(rt.bind(null,!0),!0):y.run(),W.pause=y.pause.bind(y),W.resume=y.resume.bind(y),W.stop=W,W}function Io(e,t=1/0,n){if(t<=0||!yn(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Gn(e))Io(e.value,t,n);else if(ge(e))for(let r=0;r<e.length;r++)Io(e[r],t,n);else if(ep(e)||tl(e))e.forEach(r=>{Io(r,t,n)});else if(m0(e)){for(const r in e)Io(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Io(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ih(e,t,n,r){try{return r?e(...r):e()}catch(i){op(i,t,n)}}function io(e,t,n,r){if(Me(e)){const i=ih(e,t,n,r);return i&&d0(i)&&i.catch(o=>{op(o,t,n)}),i}if(ge(e)){const i=[];for(let o=0;o<e.length;o++)i.push(io(e[o],t,n,r));return i}}function op(e,t,n,r=!0){const i=t?t.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:u}=t&&t.appContext.config||hn;if(t){let f=t.parent;const d=t.proxy,_=`https://vuejs.org/error-reference/#runtime-${n}`;for(;f;){const y=f.ec;if(y){for(let E=0;E<y.length;E++)if(y[E](e,d,_)===!1)return}f=f.parent}if(o){ba(),ih(o,null,10,[e,d,_]),wa();return}}wE(e,n,i,r,u)}function wE(e,t,n,r=!0,i=!1){if(i)throw e;console.error(e)}const ei=[];let Xs=-1;const el=[];let sa=null,Yu=0;const j0=Promise.resolve();let Tf=null;function ap(e){const t=Tf||j0;return e?t.then(this?e.bind(this):e):t}function SE(e){let t=Xs+1,n=ei.length;for(;t<n;){const r=t+n>>>1,i=ei[r],o=Rc(i);o<e||o===e&&i.flags&2?t=r+1:n=r}return t}function Gg(e){if(!(e.flags&1)){const t=Rc(e),n=ei[ei.length-1];!n||!(e.flags&2)&&t>=Rc(n)?ei.push(e):ei.splice(SE(t),0,e),e.flags|=1,q0()}}function q0(){Tf||(Tf=j0.then(Z0))}function ME(e){ge(e)?el.push(...e):sa&&e.id===-1?sa.splice(Yu+1,0,e):e.flags&1||(el.push(e),e.flags|=1),q0()}function Im(e,t,n=Xs+1){for(;n<ei.length;n++){const r=ei[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;ei.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function H0(e){if(el.length){const t=[...new Set(el)].sort((n,r)=>Rc(n)-Rc(r));if(el.length=0,sa){sa.push(...t);return}for(sa=t,Yu=0;Yu<sa.length;Yu++){const n=sa[Yu];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}sa=null,Yu=0}}const Rc=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Z0(e){try{for(Xs=0;Xs<ei.length;Xs++){const t=ei[Xs];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ih(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Xs<ei.length;Xs++){const t=ei[Xs];t&&(t.flags&=-2)}Xs=-1,ei.length=0,H0(),Tf=null,(ei.length||el.length)&&Z0()}}let wi=null,K0=null;function Af(e){const t=wi;return wi=e,K0=e&&e.type.__scopeId||null,t}function pf(e,t=wi,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&Fm(-1);const o=Af(t);let u;try{u=e(...i)}finally{Af(o),r._d&&Fm(1)}return u};return r._n=!0,r._c=!0,r._d=!0,r}function Cc(e,t){if(wi===null)return e;const n=hp(wi),r=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[o,u,f,d=hn]=t[i];o&&(Me(o)&&(o={mounted:o,updated:o}),o.deep&&Io(u),r.push({dir:o,instance:n,value:u,oldValue:void 0,arg:f,modifiers:d}))}return e}function Va(e,t,n,r){const i=e.dirs,o=t&&t.dirs;for(let u=0;u<i.length;u++){const f=i[u];o&&(f.oldValue=o[u].value);let d=f.dir[r];d&&(ba(),io(d,n,8,[e.el,f,e,t]),wa())}}const PE=Symbol("_vte"),IE=e=>e.__isTeleport;function Ug(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Ug(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function du(e,t){return Me(e)?Vr({name:e.name},t,{setup:e}):e}function X0(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function kf(e,t,n,r,i=!1){if(ge(e)){e.forEach((I,z)=>kf(I,t&&(ge(t)?t[z]:t),n,r,i));return}if(Mc(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&kf(e,t,n,r.component.subTree);return}const o=r.shapeFlag&4?hp(r.component):r.el,u=i?null:o,{i:f,r:d}=e,_=t&&t.r,y=f.refs===hn?f.refs={}:f.refs,E=f.setupState,S=We(E),T=E===hn?()=>!1:I=>rn(S,I);if(_!=null&&_!==d&&(Jn(_)?(y[_]=null,T(_)&&(E[_]=null)):Gn(_)&&(_.value=null)),Me(d))ih(d,f,12,[u,y]);else{const I=Jn(d),z=Gn(d);if(I||z){const G=()=>{if(e.f){const W=I?T(d)?E[d]:y[d]:d.value;i?ge(W)&&Tg(W,o):ge(W)?W.includes(o)||W.push(o):I?(y[d]=[o],T(d)&&(E[d]=y[d])):(d.value=[o],e.k&&(y[e.k]=d.value))}else I?(y[d]=u,T(d)&&(E[d]=u)):z&&(d.value=u,e.k&&(y[e.k]=u))};u?(G.id=-1,bi(G,n)):G()}}}rp().requestIdleCallback;rp().cancelIdleCallback;const Mc=e=>!!e.type.__asyncLoader,W0=e=>e.type.__isKeepAlive;function TE(e,t){Y0(e,"a",t)}function AE(e,t){Y0(e,"da",t)}function Y0(e,t,n=zr){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(up(t,r,n),n){let i=n.parent;for(;i&&i.parent;)W0(i.parent.vnode)&&kE(r,t,n,i),i=i.parent}}function kE(e,t,n,r){const i=up(t,e,r,!0);jg(()=>{Tg(r[t],i)},n)}function up(e,t,n=zr,r=!1){if(n){const i=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...u)=>{ba();const f=sh(n),d=io(t,n,e,u);return f(),wa(),d});return r?i.unshift(o):i.push(o),o}}const jo=e=>(t,n=zr)=>{(!Fc||e==="sp")&&up(e,(...r)=>t(...r),n)},DE=jo("bm"),Vg=jo("m"),NE=jo("bu"),OE=jo("u"),RE=jo("bum"),jg=jo("um"),BE=jo("sp"),FE=jo("rtg"),zE=jo("rtc");function GE(e,t=zr){up("ec",e,t)}const UE=Symbol.for("v-ndc");function vs(e,t,n,r){let i;const o=n,u=ge(e);if(u||Jn(e)){const f=u&&ca(e);let d=!1;f&&(d=!$i(e),e=sp(e)),i=new Array(e.length);for(let _=0,y=e.length;_<y;_++)i[_]=t(d?Fr(e[_]):e[_],_,void 0,o)}else if(typeof e=="number"){i=new Array(e);for(let f=0;f<e;f++)i[f]=t(f+1,f,void 0,o)}else if(yn(e))if(e[Symbol.iterator])i=Array.from(e,(f,d)=>t(f,d,void 0,o));else{const f=Object.keys(e);i=new Array(f.length);for(let d=0,_=f.length;d<_;d++){const y=f[d];i[d]=t(e[y],y,d,o)}}else i=[];return i}const rg=e=>e?_y(e)?hp(e):rg(e.parent):null,Pc=Vr(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>rg(e.parent),$root:e=>rg(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>$0(e),$forceUpdate:e=>e.f||(e.f=()=>{Gg(e.update)}),$nextTick:e=>e.n||(e.n=ap.bind(e.proxy)),$watch:e=>lL.bind(e)}),Dd=(e,t)=>e!==hn&&!e.__isScriptSetup&&rn(e,t),VE={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:o,accessCache:u,type:f,appContext:d}=e;let _;if(t[0]!=="$"){const T=u[t];if(T!==void 0)switch(T){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return o[t]}else{if(Dd(r,t))return u[t]=1,r[t];if(i!==hn&&rn(i,t))return u[t]=2,i[t];if((_=e.propsOptions[0])&&rn(_,t))return u[t]=3,o[t];if(n!==hn&&rn(n,t))return u[t]=4,n[t];ig&&(u[t]=0)}}const y=Pc[t];let E,S;if(y)return t==="$attrs"&&Br(e.attrs,"get",""),y(e);if((E=f.__cssModules)&&(E=E[t]))return E;if(n!==hn&&rn(n,t))return u[t]=4,n[t];if(S=d.config.globalProperties,rn(S,t))return S[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:o}=e;return Dd(i,t)?(i[t]=n,!0):r!==hn&&rn(r,t)?(r[t]=n,!0):rn(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:o}},u){let f;return!!n[u]||e!==hn&&rn(e,u)||Dd(t,u)||(f=o[0])&&rn(f,u)||rn(r,u)||rn(Pc,u)||rn(i.config.globalProperties,u)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:rn(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Tm(e){return ge(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let ig=!0;function jE(e){const t=$0(e),n=e.proxy,r=e.ctx;ig=!1,t.beforeCreate&&Am(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:u,watch:f,provide:d,inject:_,created:y,beforeMount:E,mounted:S,beforeUpdate:T,updated:I,activated:z,deactivated:G,beforeDestroy:W,beforeUnmount:Q,destroyed:rt,unmounted:gt,render:xt,renderTracked:bt,renderTriggered:Dt,errorCaptured:Nt,serverPrefetch:Ot,expose:te,inheritAttrs:Ht,components:ee,directives:Ae,filters:Bt}=t;if(_&&qE(_,r,null),u)for(const Zt in u){const Rt=u[Zt];Me(Rt)&&(r[Zt]=Rt.bind(n))}if(i){const Zt=i.call(n,n);yn(Zt)&&(e.data=rh(Zt))}if(ig=!0,o)for(const Zt in o){const Rt=o[Zt],tn=Me(Rt)?Rt.bind(n,n):Me(Rt.get)?Rt.get.bind(n,n):eo,Wt=!Me(Rt)&&Me(Rt.set)?Rt.set.bind(n):eo,de=mn({get:tn,set:Wt});Object.defineProperty(r,Zt,{enumerable:!0,configurable:!0,get:()=>de.value,set:Pe=>de.value=Pe})}if(f)for(const Zt in f)J0(f[Zt],r,n,Zt);if(d){const Zt=Me(d)?d.call(n):d;Reflect.ownKeys(Zt).forEach(Rt=>{df(Rt,Zt[Rt])})}y&&Am(y,e,"c");function jt(Zt,Rt){ge(Rt)?Rt.forEach(tn=>Zt(tn.bind(n))):Rt&&Zt(Rt.bind(n))}if(jt(DE,E),jt(Vg,S),jt(NE,T),jt(OE,I),jt(TE,z),jt(AE,G),jt(GE,Nt),jt(zE,bt),jt(FE,Dt),jt(RE,Q),jt(jg,gt),jt(BE,Ot),ge(te))if(te.length){const Zt=e.exposed||(e.exposed={});te.forEach(Rt=>{Object.defineProperty(Zt,Rt,{get:()=>n[Rt],set:tn=>n[Rt]=tn})})}else e.exposed||(e.exposed={});xt&&e.render===eo&&(e.render=xt),Ht!=null&&(e.inheritAttrs=Ht),ee&&(e.components=ee),Ae&&(e.directives=Ae),Ot&&X0(e)}function qE(e,t,n=eo){ge(e)&&(e=sg(e));for(const r in e){const i=e[r];let o;yn(i)?"default"in i?o=Es(i.from||r,i.default,!0):o=Es(i.from||r):o=Es(i),Gn(o)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:u=>o.value=u}):t[r]=o}}function Am(e,t,n){io(ge(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function J0(e,t,n,r){let i=r.includes(".")?fy(n,r):()=>n[r];if(Jn(e)){const o=t[e];Me(o)&&ha(i,o)}else if(Me(e))ha(i,e.bind(n));else if(yn(e))if(ge(e))e.forEach(o=>J0(o,t,n,r));else{const o=Me(e.handler)?e.handler.bind(n):t[e.handler];Me(o)&&ha(i,o,e)}}function $0(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:u}}=e.appContext,f=o.get(t);let d;return f?d=f:!i.length&&!n&&!r?d=t:(d={},i.length&&i.forEach(_=>Df(d,_,u,!0)),Df(d,t,u)),yn(t)&&o.set(t,d),d}function Df(e,t,n,r=!1){const{mixins:i,extends:o}=t;o&&Df(e,o,n,!0),i&&i.forEach(u=>Df(e,u,n,!0));for(const u in t)if(!(r&&u==="expose")){const f=HE[u]||n&&n[u];e[u]=f?f(e[u],t[u]):t[u]}return e}const HE={data:km,props:Dm,emits:Dm,methods:Ec,computed:Ec,beforeCreate:$r,created:$r,beforeMount:$r,mounted:$r,beforeUpdate:$r,updated:$r,beforeDestroy:$r,beforeUnmount:$r,destroyed:$r,unmounted:$r,activated:$r,deactivated:$r,errorCaptured:$r,serverPrefetch:$r,components:Ec,directives:Ec,watch:KE,provide:km,inject:ZE};function km(e,t){return t?e?function(){return Vr(Me(e)?e.call(this,this):e,Me(t)?t.call(this,this):t)}:t:e}function ZE(e,t){return Ec(sg(e),sg(t))}function sg(e){if(ge(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function $r(e,t){return e?[...new Set([].concat(e,t))]:t}function Ec(e,t){return e?Vr(Object.create(null),e,t):t}function Dm(e,t){return e?ge(e)&&ge(t)?[...new Set([...e,...t])]:Vr(Object.create(null),Tm(e),Tm(t??{})):t}function KE(e,t){if(!e)return t;if(!t)return e;const n=Vr(Object.create(null),e);for(const r in t)n[r]=$r(e[r],t[r]);return n}function Q0(){return{app:null,config:{isNativeTag:RC,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let XE=0;function WE(e,t){return function(r,i=null){Me(r)||(r=Vr({},r)),i!=null&&!yn(i)&&(i=null);const o=Q0(),u=new WeakSet,f=[];let d=!1;const _=o.app={_uid:XE++,_component:r,_props:i,_container:null,_context:o,_instance:null,version:TL,get config(){return o.config},set config(y){},use(y,...E){return u.has(y)||(y&&Me(y.install)?(u.add(y),y.install(_,...E)):Me(y)&&(u.add(y),y(_,...E))),_},mixin(y){return o.mixins.includes(y)||o.mixins.push(y),_},component(y,E){return E?(o.components[y]=E,_):o.components[y]},directive(y,E){return E?(o.directives[y]=E,_):o.directives[y]},mount(y,E,S){if(!d){const T=_._ceVNode||pr(r,i);return T.appContext=o,S===!0?S="svg":S===!1&&(S=void 0),e(T,y,S),d=!0,_._container=y,y.__vue_app__=_,hp(T.component)}},onUnmount(y){f.push(y)},unmount(){d&&(io(f,_._instance,16),e(null,_._container),delete _._container.__vue_app__)},provide(y,E){return o.provides[y]=E,_},runWithContext(y){const E=Xa;Xa=_;try{return y()}finally{Xa=E}}};return _}}let Xa=null;function df(e,t){if(zr){let n=zr.provides;const r=zr.parent&&zr.parent.provides;r===n&&(n=zr.provides=Object.create(r)),n[e]=t}}function Es(e,t,n=!1){const r=zr||wi;if(r||Xa){const i=Xa?Xa._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&Me(t)?t.call(r&&r.proxy):t}}function YE(){return!!(zr||wi||Xa)}const ty={},ey=()=>Object.create(ty),ny=e=>Object.getPrototypeOf(e)===ty;function JE(e,t,n,r=!1){const i={},o=ey();e.propsDefaults=Object.create(null),ry(e,t,i,o);for(const u in e.propsOptions[0])u in i||(i[u]=void 0);n?e.props=r?i:z0(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function $E(e,t,n,r){const{props:i,attrs:o,vnode:{patchFlag:u}}=e,f=We(i),[d]=e.propsOptions;let _=!1;if((r||u>0)&&!(u&16)){if(u&8){const y=e.vnode.dynamicProps;for(let E=0;E<y.length;E++){let S=y[E];if(lp(e.emitsOptions,S))continue;const T=t[S];if(d)if(rn(o,S))T!==o[S]&&(o[S]=T,_=!0);else{const I=da(S);i[I]=og(d,f,I,T,e,!1)}else T!==o[S]&&(o[S]=T,_=!0)}}}else{ry(e,t,i,o)&&(_=!0);let y;for(const E in f)(!t||!rn(t,E)&&((y=pu(E))===E||!rn(t,y)))&&(d?n&&(n[E]!==void 0||n[y]!==void 0)&&(i[E]=og(d,f,E,void 0,e,!0)):delete i[E]);if(o!==f)for(const E in o)(!t||!rn(t,E))&&(delete o[E],_=!0)}_&&Po(e.attrs,"set","")}function ry(e,t,n,r){const[i,o]=e.propsOptions;let u=!1,f;if(t)for(let d in t){if(bc(d))continue;const _=t[d];let y;i&&rn(i,y=da(d))?!o||!o.includes(y)?n[y]=_:(f||(f={}))[y]=_:lp(e.emitsOptions,d)||(!(d in r)||_!==r[d])&&(r[d]=_,u=!0)}if(o){const d=We(n),_=f||hn;for(let y=0;y<o.length;y++){const E=o[y];n[E]=og(i,d,E,_[E],e,!rn(_,E))}}return u}function og(e,t,n,r,i,o){const u=e[n];if(u!=null){const f=rn(u,"default");if(f&&r===void 0){const d=u.default;if(u.type!==Function&&!u.skipFactory&&Me(d)){const{propsDefaults:_}=i;if(n in _)r=_[n];else{const y=sh(i);r=_[n]=d.call(null,t),y()}}else r=d;i.ce&&i.ce._setProp(n,r)}u[0]&&(o&&!f?r=!1:u[1]&&(r===""||r===pu(n))&&(r=!0))}return r}const QE=new WeakMap;function iy(e,t,n=!1){const r=n?QE:t.propsCache,i=r.get(e);if(i)return i;const o=e.props,u={},f=[];let d=!1;if(!Me(e)){const y=E=>{d=!0;const[S,T]=iy(E,t,!0);Vr(u,S),T&&f.push(...T)};!n&&t.mixins.length&&t.mixins.forEach(y),e.extends&&y(e.extends),e.mixins&&e.mixins.forEach(y)}if(!o&&!d)return yn(e)&&r.set(e,Qu),Qu;if(ge(o))for(let y=0;y<o.length;y++){const E=da(o[y]);Nm(E)&&(u[E]=hn)}else if(o)for(const y in o){const E=da(y);if(Nm(E)){const S=o[y],T=u[E]=ge(S)||Me(S)?{type:S}:Vr({},S),I=T.type;let z=!1,G=!0;if(ge(I))for(let W=0;W<I.length;++W){const Q=I[W],rt=Me(Q)&&Q.name;if(rt==="Boolean"){z=!0;break}else rt==="String"&&(G=!1)}else z=Me(I)&&I.name==="Boolean";T[0]=z,T[1]=G,(z||rn(T,"default"))&&f.push(E)}}const _=[u,f];return yn(e)&&r.set(e,_),_}function Nm(e){return e[0]!=="$"&&!bc(e)}const sy=e=>e[0]==="_"||e==="$stable",qg=e=>ge(e)?e.map($s):[$s(e)],tL=(e,t,n)=>{if(t._n)return t;const r=pf((...i)=>qg(t(...i)),n);return r._c=!1,r},oy=(e,t,n)=>{const r=e._ctx;for(const i in e){if(sy(i))continue;const o=e[i];if(Me(o))t[i]=tL(i,o,r);else if(o!=null){const u=qg(o);t[i]=()=>u}}},ay=(e,t)=>{const n=qg(t);e.slots.default=()=>n},uy=(e,t,n)=>{for(const r in t)(n||r!=="_")&&(e[r]=t[r])},eL=(e,t,n)=>{const r=e.slots=ey();if(e.vnode.shapeFlag&32){const i=t._;i?(uy(r,t,n),n&&y0(r,"_",i,!0)):oy(t,r)}else t&&ay(e,t)},nL=(e,t,n)=>{const{vnode:r,slots:i}=e;let o=!0,u=hn;if(r.shapeFlag&32){const f=t._;f?n&&f===1?o=!1:uy(i,t,n):(o=!t.$stable,oy(t,i)),u=t}else t&&(ay(e,t),u={default:1});if(o)for(const f in i)!sy(f)&&u[f]==null&&delete i[f]},bi=mL;function rL(e){return iL(e)}function iL(e,t){const n=rp();n.__VUE__=!0;const{insert:r,remove:i,patchProp:o,createElement:u,createText:f,createComment:d,setText:_,setElementText:y,parentNode:E,nextSibling:S,setScopeId:T=eo,insertStaticContent:I}=e,z=(F,V,et,_t=null,Et=null,yt=null,Pt=void 0,At=null,It=!!V.dynamicChildren)=>{if(F===V)return;F&&!gc(F,V)&&(_t=Lt(F),Pe(F,Et,yt,!0),F=null),V.patchFlag===-2&&(It=!1,V.dynamicChildren=null);const{type:wt,ref:Kt,shapeFlag:Ut}=V;switch(wt){case cp:G(F,V,et,_t);break;case Ja:W(F,V,et,_t);break;case gf:F==null&&Q(V,et,_t,Pt);break;case sn:ee(F,V,et,_t,Et,yt,Pt,At,It);break;default:Ut&1?xt(F,V,et,_t,Et,yt,Pt,At,It):Ut&6?Ae(F,V,et,_t,Et,yt,Pt,At,It):(Ut&64||Ut&128)&&wt.process(F,V,et,_t,Et,yt,Pt,At,It,J)}Kt!=null&&Et&&kf(Kt,F&&F.ref,yt,V||F,!V)},G=(F,V,et,_t)=>{if(F==null)r(V.el=f(V.children),et,_t);else{const Et=V.el=F.el;V.children!==F.children&&_(Et,V.children)}},W=(F,V,et,_t)=>{F==null?r(V.el=d(V.children||""),et,_t):V.el=F.el},Q=(F,V,et,_t)=>{[F.el,F.anchor]=I(F.children,V,et,_t,F.el,F.anchor)},rt=({el:F,anchor:V},et,_t)=>{let Et;for(;F&&F!==V;)Et=S(F),r(F,et,_t),F=Et;r(V,et,_t)},gt=({el:F,anchor:V})=>{let et;for(;F&&F!==V;)et=S(F),i(F),F=et;i(V)},xt=(F,V,et,_t,Et,yt,Pt,At,It)=>{V.type==="svg"?Pt="svg":V.type==="math"&&(Pt="mathml"),F==null?bt(V,et,_t,Et,yt,Pt,At,It):Ot(F,V,Et,yt,Pt,At,It)},bt=(F,V,et,_t,Et,yt,Pt,At)=>{let It,wt;const{props:Kt,shapeFlag:Ut,transition:ne,dirs:he}=F;if(It=F.el=u(F.type,yt,Kt&&Kt.is,Kt),Ut&8?y(It,F.children):Ut&16&&Nt(F.children,It,null,_t,Et,Nd(F,yt),Pt,At),he&&Va(F,null,_t,"created"),Dt(It,F,F.scopeId,Pt,_t),Kt){for(const Je in Kt)Je!=="value"&&!bc(Je)&&o(It,Je,null,Kt[Je],yt,_t);"value"in Kt&&o(It,"value",null,Kt.value,yt),(wt=Kt.onVnodeBeforeMount)&&qs(wt,_t,F)}he&&Va(F,null,_t,"beforeMount");const ke=sL(Et,ne);ke&&ne.beforeEnter(It),r(It,V,et),((wt=Kt&&Kt.onVnodeMounted)||ke||he)&&bi(()=>{wt&&qs(wt,_t,F),ke&&ne.enter(It),he&&Va(F,null,_t,"mounted")},Et)},Dt=(F,V,et,_t,Et)=>{if(et&&T(F,et),_t)for(let yt=0;yt<_t.length;yt++)T(F,_t[yt]);if(Et){let yt=Et.subTree;if(V===yt||dy(yt.type)&&(yt.ssContent===V||yt.ssFallback===V)){const Pt=Et.vnode;Dt(F,Pt,Pt.scopeId,Pt.slotScopeIds,Et.parent)}}},Nt=(F,V,et,_t,Et,yt,Pt,At,It=0)=>{for(let wt=It;wt<F.length;wt++){const Kt=F[wt]=At?oa(F[wt]):$s(F[wt]);z(null,Kt,V,et,_t,Et,yt,Pt,At)}},Ot=(F,V,et,_t,Et,yt,Pt)=>{const At=V.el=F.el;let{patchFlag:It,dynamicChildren:wt,dirs:Kt}=V;It|=F.patchFlag&16;const Ut=F.props||hn,ne=V.props||hn;let he;if(et&&ja(et,!1),(he=ne.onVnodeBeforeUpdate)&&qs(he,et,V,F),Kt&&Va(V,F,et,"beforeUpdate"),et&&ja(et,!0),(Ut.innerHTML&&ne.innerHTML==null||Ut.textContent&&ne.textContent==null)&&y(At,""),wt?te(F.dynamicChildren,wt,At,et,_t,Nd(V,Et),yt):Pt||Rt(F,V,At,null,et,_t,Nd(V,Et),yt,!1),It>0){if(It&16)Ht(At,Ut,ne,et,Et);else if(It&2&&Ut.class!==ne.class&&o(At,"class",null,ne.class,Et),It&4&&o(At,"style",Ut.style,ne.style,Et),It&8){const ke=V.dynamicProps;for(let Je=0;Je<ke.length;Je++){const qe=ke[Je],ur=Ut[qe],qn=ne[qe];(qn!==ur||qe==="value")&&o(At,qe,ur,qn,Et,et)}}It&1&&F.children!==V.children&&y(At,V.children)}else!Pt&&wt==null&&Ht(At,Ut,ne,et,Et);((he=ne.onVnodeUpdated)||Kt)&&bi(()=>{he&&qs(he,et,V,F),Kt&&Va(V,F,et,"updated")},_t)},te=(F,V,et,_t,Et,yt,Pt)=>{for(let At=0;At<V.length;At++){const It=F[At],wt=V[At],Kt=It.el&&(It.type===sn||!gc(It,wt)||It.shapeFlag&70)?E(It.el):et;z(It,wt,Kt,null,_t,Et,yt,Pt,!0)}},Ht=(F,V,et,_t,Et)=>{if(V!==et){if(V!==hn)for(const yt in V)!bc(yt)&&!(yt in et)&&o(F,yt,V[yt],null,Et,_t);for(const yt in et){if(bc(yt))continue;const Pt=et[yt],At=V[yt];Pt!==At&&yt!=="value"&&o(F,yt,At,Pt,Et,_t)}"value"in et&&o(F,"value",V.value,et.value,Et)}},ee=(F,V,et,_t,Et,yt,Pt,At,It)=>{const wt=V.el=F?F.el:f(""),Kt=V.anchor=F?F.anchor:f("");let{patchFlag:Ut,dynamicChildren:ne,slotScopeIds:he}=V;he&&(At=At?At.concat(he):he),F==null?(r(wt,et,_t),r(Kt,et,_t),Nt(V.children||[],et,Kt,Et,yt,Pt,At,It)):Ut>0&&Ut&64&&ne&&F.dynamicChildren?(te(F.dynamicChildren,ne,et,Et,yt,Pt,At),(V.key!=null||Et&&V===Et.subTree)&&ly(F,V,!0)):Rt(F,V,et,Kt,Et,yt,Pt,At,It)},Ae=(F,V,et,_t,Et,yt,Pt,At,It)=>{V.slotScopeIds=At,F==null?V.shapeFlag&512?Et.ctx.activate(V,et,_t,Pt,It):Bt(V,et,_t,Et,yt,Pt,It):le(F,V,It)},Bt=(F,V,et,_t,Et,yt,Pt)=>{const At=F.component=bL(F,_t,Et);if(W0(F)&&(At.ctx.renderer=J),wL(At,!1,Pt),At.asyncDep){if(Et&&Et.registerDep(At,jt,Pt),!F.el){const It=At.subTree=pr(Ja);W(null,It,V,et)}}else jt(At,F,V,et,Et,yt,Pt)},le=(F,V,et)=>{const _t=V.component=F.component;if(dL(F,V,et))if(_t.asyncDep&&!_t.asyncResolved){Zt(_t,V,et);return}else _t.next=V,_t.update();else V.el=F.el,_t.vnode=V},jt=(F,V,et,_t,Et,yt,Pt)=>{const At=()=>{if(F.isMounted){let{next:Ut,bu:ne,u:he,parent:ke,vnode:Je}=F;{const er=cy(F);if(er){Ut&&(Ut.el=Je.el,Zt(F,Ut,Pt)),er.asyncDep.then(()=>{F.isUnmounted||At()});return}}let qe=Ut,ur;ja(F,!1),Ut?(Ut.el=Je.el,Zt(F,Ut,Pt)):Ut=Je,ne&&ff(ne),(ur=Ut.props&&Ut.props.onVnodeBeforeUpdate)&&qs(ur,ke,Ut,Je),ja(F,!0);const qn=Rm(F),Kr=F.subTree;F.subTree=qn,z(Kr,qn,E(Kr.el),Lt(Kr),F,Et,yt),Ut.el=qn.el,qe===null&&gL(F,qn.el),he&&bi(he,Et),(ur=Ut.props&&Ut.props.onVnodeUpdated)&&bi(()=>qs(ur,ke,Ut,Je),Et)}else{let Ut;const{el:ne,props:he}=V,{bm:ke,m:Je,parent:qe,root:ur,type:qn}=F,Kr=Mc(V);ja(F,!1),ke&&ff(ke),!Kr&&(Ut=he&&he.onVnodeBeforeMount)&&qs(Ut,qe,V),ja(F,!0);{ur.ce&&ur.ce._injectChildStyle(qn);const er=F.subTree=Rm(F);z(null,er,et,_t,F,Et,yt),V.el=er.el}if(Je&&bi(Je,Et),!Kr&&(Ut=he&&he.onVnodeMounted)){const er=V;bi(()=>qs(Ut,qe,er),Et)}(V.shapeFlag&256||qe&&Mc(qe.vnode)&&qe.vnode.shapeFlag&256)&&F.a&&bi(F.a,Et),F.isMounted=!0,V=et=_t=null}};F.scope.on();const It=F.effect=new w0(At);F.scope.off();const wt=F.update=It.run.bind(It),Kt=F.job=It.runIfDirty.bind(It);Kt.i=F,Kt.id=F.uid,It.scheduler=()=>Gg(Kt),ja(F,!0),wt()},Zt=(F,V,et)=>{V.component=F;const _t=F.vnode.props;F.vnode=V,F.next=null,$E(F,V.props,_t,et),nL(F,V.children,et),ba(),Im(F),wa()},Rt=(F,V,et,_t,Et,yt,Pt,At,It=!1)=>{const wt=F&&F.children,Kt=F?F.shapeFlag:0,Ut=V.children,{patchFlag:ne,shapeFlag:he}=V;if(ne>0){if(ne&128){Wt(wt,Ut,et,_t,Et,yt,Pt,At,It);return}else if(ne&256){tn(wt,Ut,et,_t,Et,yt,Pt,At,It);return}}he&8?(Kt&16&&ce(wt,Et,yt),Ut!==wt&&y(et,Ut)):Kt&16?he&16?Wt(wt,Ut,et,_t,Et,yt,Pt,At,It):ce(wt,Et,yt,!0):(Kt&8&&y(et,""),he&16&&Nt(Ut,et,_t,Et,yt,Pt,At,It))},tn=(F,V,et,_t,Et,yt,Pt,At,It)=>{F=F||Qu,V=V||Qu;const wt=F.length,Kt=V.length,Ut=Math.min(wt,Kt);let ne;for(ne=0;ne<Ut;ne++){const he=V[ne]=It?oa(V[ne]):$s(V[ne]);z(F[ne],he,et,null,Et,yt,Pt,At,It)}wt>Kt?ce(F,Et,yt,!0,!1,Ut):Nt(V,et,_t,Et,yt,Pt,At,It,Ut)},Wt=(F,V,et,_t,Et,yt,Pt,At,It)=>{let wt=0;const Kt=V.length;let Ut=F.length-1,ne=Kt-1;for(;wt<=Ut&&wt<=ne;){const he=F[wt],ke=V[wt]=It?oa(V[wt]):$s(V[wt]);if(gc(he,ke))z(he,ke,et,null,Et,yt,Pt,At,It);else break;wt++}for(;wt<=Ut&&wt<=ne;){const he=F[Ut],ke=V[ne]=It?oa(V[ne]):$s(V[ne]);if(gc(he,ke))z(he,ke,et,null,Et,yt,Pt,At,It);else break;Ut--,ne--}if(wt>Ut){if(wt<=ne){const he=ne+1,ke=he<Kt?V[he].el:_t;for(;wt<=ne;)z(null,V[wt]=It?oa(V[wt]):$s(V[wt]),et,ke,Et,yt,Pt,At,It),wt++}}else if(wt>ne)for(;wt<=Ut;)Pe(F[wt],Et,yt,!0),wt++;else{const he=wt,ke=wt,Je=new Map;for(wt=ke;wt<=ne;wt++){const Rn=V[wt]=It?oa(V[wt]):$s(V[wt]);Rn.key!=null&&Je.set(Rn.key,wt)}let qe,ur=0;const qn=ne-ke+1;let Kr=!1,er=0;const Rs=new Array(qn);for(wt=0;wt<qn;wt++)Rs[wt]=0;for(wt=he;wt<=Ut;wt++){const Rn=F[wt];if(ur>=qn){Pe(Rn,Et,yt,!0);continue}let Xr;if(Rn.key!=null)Xr=Je.get(Rn.key);else for(qe=ke;qe<=ne;qe++)if(Rs[qe-ke]===0&&gc(Rn,V[qe])){Xr=qe;break}Xr===void 0?Pe(Rn,Et,yt,!0):(Rs[Xr-ke]=wt+1,Xr>=er?er=Xr:Kr=!0,z(Rn,V[Xr],et,null,Et,yt,Pt,At,It),ur++)}const po=Kr?oL(Rs):Qu;for(qe=po.length-1,wt=qn-1;wt>=0;wt--){const Rn=ke+wt,Xr=V[Rn],zi=Rn+1<Kt?V[Rn+1].el:_t;Rs[wt]===0?z(null,Xr,et,zi,Et,yt,Pt,At,It):Kr&&(qe<0||wt!==po[qe]?de(Xr,et,zi,2):qe--)}}},de=(F,V,et,_t,Et=null)=>{const{el:yt,type:Pt,transition:At,children:It,shapeFlag:wt}=F;if(wt&6){de(F.component.subTree,V,et,_t);return}if(wt&128){F.suspense.move(V,et,_t);return}if(wt&64){Pt.move(F,V,et,J);return}if(Pt===sn){r(yt,V,et);for(let Ut=0;Ut<It.length;Ut++)de(It[Ut],V,et,_t);r(F.anchor,V,et);return}if(Pt===gf){rt(F,V,et);return}if(_t!==2&&wt&1&&At)if(_t===0)At.beforeEnter(yt),r(yt,V,et),bi(()=>At.enter(yt),Et);else{const{leave:Ut,delayLeave:ne,afterLeave:he}=At,ke=()=>r(yt,V,et),Je=()=>{Ut(yt,()=>{ke(),he&&he()})};ne?ne(yt,ke,Je):Je()}else r(yt,V,et)},Pe=(F,V,et,_t=!1,Et=!1)=>{const{type:yt,props:Pt,ref:At,children:It,dynamicChildren:wt,shapeFlag:Kt,patchFlag:Ut,dirs:ne,cacheIndex:he}=F;if(Ut===-2&&(Et=!1),At!=null&&kf(At,null,et,F,!0),he!=null&&(V.renderCache[he]=void 0),Kt&256){V.ctx.deactivate(F);return}const ke=Kt&1&&ne,Je=!Mc(F);let qe;if(Je&&(qe=Pt&&Pt.onVnodeBeforeUnmount)&&qs(qe,V,F),Kt&6)ve(F.component,et,_t);else{if(Kt&128){F.suspense.unmount(et,_t);return}ke&&Va(F,null,V,"beforeUnmount"),Kt&64?F.type.remove(F,V,et,J,_t):wt&&!wt.hasOnce&&(yt!==sn||Ut>0&&Ut&64)?ce(wt,V,et,!1,!0):(yt===sn&&Ut&384||!Et&&Kt&16)&&ce(It,V,et),_t&&Ue(F)}(Je&&(qe=Pt&&Pt.onVnodeUnmounted)||ke)&&bi(()=>{qe&&qs(qe,V,F),ke&&Va(F,null,V,"unmounted")},et)},Ue=F=>{const{type:V,el:et,anchor:_t,transition:Et}=F;if(V===sn){Oe(et,_t);return}if(V===gf){gt(F);return}const yt=()=>{i(et),Et&&!Et.persisted&&Et.afterLeave&&Et.afterLeave()};if(F.shapeFlag&1&&Et&&!Et.persisted){const{leave:Pt,delayLeave:At}=Et,It=()=>Pt(et,yt);At?At(F.el,yt,It):It()}else yt()},Oe=(F,V)=>{let et;for(;F!==V;)et=S(F),i(F),F=et;i(V)},ve=(F,V,et)=>{const{bum:_t,scope:Et,job:yt,subTree:Pt,um:At,m:It,a:wt}=F;Om(It),Om(wt),_t&&ff(_t),Et.stop(),yt&&(yt.flags|=8,Pe(Pt,F,V,et)),At&&bi(At,V),bi(()=>{F.isUnmounted=!0},V),V&&V.pendingBranch&&!V.isUnmounted&&F.asyncDep&&!F.asyncResolved&&F.suspenseId===V.pendingId&&(V.deps--,V.deps===0&&V.resolve())},ce=(F,V,et,_t=!1,Et=!1,yt=0)=>{for(let Pt=yt;Pt<F.length;Pt++)Pe(F[Pt],V,et,_t,Et)},Lt=F=>{if(F.shapeFlag&6)return Lt(F.component.subTree);if(F.shapeFlag&128)return F.suspense.next();const V=S(F.anchor||F.el),et=V&&V[PE];return et?S(et):V};let Y=!1;const $=(F,V,et)=>{F==null?V._vnode&&Pe(V._vnode,null,null,!0):z(V._vnode||null,F,V,null,null,null,et),V._vnode=F,Y||(Y=!0,Im(),H0(),Y=!1)},J={p:z,um:Pe,m:de,r:Ue,mt:Bt,mc:Nt,pc:Rt,pbc:te,n:Lt,o:e};return{render:$,hydrate:void 0,createApp:WE($)}}function Nd({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function ja({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function sL(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function ly(e,t,n=!1){const r=e.children,i=t.children;if(ge(r)&&ge(i))for(let o=0;o<r.length;o++){const u=r[o];let f=i[o];f.shapeFlag&1&&!f.dynamicChildren&&((f.patchFlag<=0||f.patchFlag===32)&&(f=i[o]=oa(i[o]),f.el=u.el),!n&&f.patchFlag!==-2&&ly(u,f)),f.type===cp&&(f.el=u.el)}}function oL(e){const t=e.slice(),n=[0];let r,i,o,u,f;const d=e.length;for(r=0;r<d;r++){const _=e[r];if(_!==0){if(i=n[n.length-1],e[i]<_){t[r]=i,n.push(r);continue}for(o=0,u=n.length-1;o<u;)f=o+u>>1,e[n[f]]<_?o=f+1:u=f;_<e[n[o]]&&(o>0&&(t[r]=n[o-1]),n[o]=r)}}for(o=n.length,u=n[o-1];o-- >0;)n[o]=u,u=t[u];return n}function cy(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:cy(t)}function Om(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const aL=Symbol.for("v-scx"),uL=()=>Es(aL);function ha(e,t,n){return hy(e,t,n)}function hy(e,t,n=hn){const{immediate:r,deep:i,flush:o,once:u}=n,f=Vr({},n),d=t&&r||!t&&o!=="post";let _;if(Fc){if(o==="sync"){const T=uL();_=T.__watcherHandles||(T.__watcherHandles=[])}else if(!d){const T=()=>{};return T.stop=eo,T.resume=eo,T.pause=eo,T}}const y=zr;f.call=(T,I,z)=>io(T,y,I,z);let E=!1;o==="post"?f.scheduler=T=>{bi(T,y&&y.suspense)}:o!=="sync"&&(E=!0,f.scheduler=(T,I)=>{I?T():Gg(T)}),f.augmentJob=T=>{t&&(T.flags|=4),E&&(T.flags|=2,y&&(T.id=y.uid,T.i=y))};const S=bE(e,t,f);return Fc&&(_?_.push(S):d&&S()),S}function lL(e,t,n){const r=this.proxy,i=Jn(e)?e.includes(".")?fy(r,e):()=>r[e]:e.bind(r,r);let o;Me(t)?o=t:(o=t.handler,n=t);const u=sh(this),f=hy(i,o.bind(r),n);return u(),f}function fy(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}const cL=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${da(t)}Modifiers`]||e[`${pu(t)}Modifiers`];function hL(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||hn;let i=n;const o=t.startsWith("update:"),u=o&&cL(r,t.slice(7));u&&(u.trim&&(i=n.map(y=>Jn(y)?y.trim():y)),u.number&&(i=n.map(Mf)));let f,d=r[f=Pd(t)]||r[f=Pd(da(t))];!d&&o&&(d=r[f=Pd(pu(t))]),d&&io(d,e,6,i);const _=r[f+"Once"];if(_){if(!e.emitted)e.emitted={};else if(e.emitted[f])return;e.emitted[f]=!0,io(_,e,6,i)}}function py(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const o=e.emits;let u={},f=!1;if(!Me(e)){const d=_=>{const y=py(_,t,!0);y&&(f=!0,Vr(u,y))};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}return!o&&!f?(yn(e)&&r.set(e,null),null):(ge(o)?o.forEach(d=>u[d]=null):Vr(u,o),yn(e)&&r.set(e,u),u)}function lp(e,t){return!e||!tp(t)?!1:(t=t.slice(2).replace(/Once$/,""),rn(e,t[0].toLowerCase()+t.slice(1))||rn(e,pu(t))||rn(e,t))}function Rm(e){const{type:t,vnode:n,proxy:r,withProxy:i,propsOptions:[o],slots:u,attrs:f,emit:d,render:_,renderCache:y,props:E,data:S,setupState:T,ctx:I,inheritAttrs:z}=e,G=Af(e);let W,Q;try{if(n.shapeFlag&4){const gt=i||r,xt=gt;W=$s(_.call(xt,gt,y,E,T,S,I)),Q=f}else{const gt=t;W=$s(gt.length>1?gt(E,{attrs:f,slots:u,emit:d}):gt(E,null)),Q=t.props?f:fL(f)}}catch(gt){Ic.length=0,op(gt,e,1),W=pr(Ja)}let rt=W;if(Q&&z!==!1){const gt=Object.keys(Q),{shapeFlag:xt}=rt;gt.length&&xt&7&&(o&&gt.some(Ig)&&(Q=pL(Q,o)),rt=il(rt,Q,!1,!0))}return n.dirs&&(rt=il(rt,null,!1,!0),rt.dirs=rt.dirs?rt.dirs.concat(n.dirs):n.dirs),n.transition&&Ug(rt,n.transition),W=rt,Af(G),W}const fL=e=>{let t;for(const n in e)(n==="class"||n==="style"||tp(n))&&((t||(t={}))[n]=e[n]);return t},pL=(e,t)=>{const n={};for(const r in e)(!Ig(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function dL(e,t,n){const{props:r,children:i,component:o}=e,{props:u,children:f,patchFlag:d}=t,_=o.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&d>=0){if(d&1024)return!0;if(d&16)return r?Bm(r,u,_):!!u;if(d&8){const y=t.dynamicProps;for(let E=0;E<y.length;E++){const S=y[E];if(u[S]!==r[S]&&!lp(_,S))return!0}}}else return(i||f)&&(!f||!f.$stable)?!0:r===u?!1:r?u?Bm(r,u,_):!0:!!u;return!1}function Bm(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(t[o]!==e[o]&&!lp(n,o))return!0}return!1}function gL({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const dy=e=>e.__isSuspense;function mL(e,t){t&&t.pendingBranch?ge(e)?t.effects.push(...e):t.effects.push(e):ME(e)}const sn=Symbol.for("v-fgt"),cp=Symbol.for("v-txt"),Ja=Symbol.for("v-cmt"),gf=Symbol.for("v-stc"),Ic=[];let Si=null;function Ee(e=!1){Ic.push(Si=e?null:[])}function _L(){Ic.pop(),Si=Ic[Ic.length-1]||null}let Bc=1;function Fm(e,t=!1){Bc+=e,e<0&&Si&&t&&(Si.hasOnce=!0)}function gy(e){return e.dynamicChildren=Bc>0?Si||Qu:null,_L(),Bc>0&&Si&&Si.push(e),e}function Ie(e,t,n,r,i,o){return gy(vt(e,t,n,r,i,o,!0))}function Nf(e,t,n,r,i){return gy(pr(e,t,n,r,i,!0))}function Of(e){return e?e.__v_isVNode===!0:!1}function gc(e,t){return e.type===t.type&&e.key===t.key}const my=({key:e})=>e??null,mf=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Jn(e)||Gn(e)||Me(e)?{i:wi,r:e,k:t,f:!!n}:e:null);function vt(e,t=null,n=null,r=0,i=null,o=e===sn?0:1,u=!1,f=!1){const d={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&my(t),ref:t&&mf(t),scopeId:K0,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:wi};return f?(Hg(d,n),o&128&&e.normalize(d)):n&&(d.shapeFlag|=Jn(n)?8:16),Bc>0&&!u&&Si&&(d.patchFlag>0||o&6)&&d.patchFlag!==32&&Si.push(d),d}const pr=yL;function yL(e,t=null,n=null,r=0,i=null,o=!1){if((!e||e===UE)&&(e=Ja),Of(e)){const f=il(e,t,!0);return n&&Hg(f,n),Bc>0&&!o&&Si&&(f.shapeFlag&6?Si[Si.indexOf(e)]=f:Si.push(f)),f.patchFlag=-2,f}if(IL(e)&&(e=e.__vccOpts),t){t=vL(t);let{class:f,style:d}=t;f&&!Jn(f)&&(t.class=la(f)),yn(d)&&(Fg(d)&&!ge(d)&&(d=Vr({},d)),t.style=rl(d))}const u=Jn(e)?1:dy(e)?128:IE(e)?64:yn(e)?4:Me(e)?2:0;return vt(e,t,n,r,i,u,o,!0)}function vL(e){return e?Fg(e)||ny(e)?Vr({},e):e:null}function il(e,t,n=!1,r=!1){const{props:i,ref:o,patchFlag:u,children:f,transition:d}=e,_=t?EL(i||{},t):i,y={__v_isVNode:!0,__v_skip:!0,type:e.type,props:_,key:_&&my(_),ref:t&&t.ref?n&&o?ge(o)?o.concat(mf(t)):[o,mf(t)]:mf(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:f,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==sn?u===-1?16:u|16:u,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:d,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&il(e.ssContent),ssFallback:e.ssFallback&&il(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return d&&r&&Ug(y,d.clone(y)),y}function Tc(e=" ",t=0){return pr(cp,null,e,t)}function CL(e,t){const n=pr(gf,null,e);return n.staticCount=t,n}function Zn(e="",t=!1){return t?(Ee(),Nf(Ja,null,e)):pr(Ja,null,e)}function $s(e){return e==null||typeof e=="boolean"?pr(Ja):ge(e)?pr(sn,null,e.slice()):Of(e)?oa(e):pr(cp,null,String(e))}function oa(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:il(e)}function Hg(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(ge(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),Hg(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!ny(t)?t._ctx=wi:i===3&&wi&&(wi.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Me(t)?(t={default:t,_ctx:wi},n=32):(t=String(t),r&64?(n=16,t=[Tc(t)]):n=8);e.children=t,e.shapeFlag|=n}function EL(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=la([t.class,r.class]));else if(i==="style")t.style=rl([t.style,r.style]);else if(tp(i)){const o=t[i],u=r[i];u&&o!==u&&!(ge(o)&&o.includes(u))&&(t[i]=o?[].concat(o,u):u)}else i!==""&&(t[i]=r[i])}return t}function qs(e,t,n,r=null){io(e,t,7,[n,r])}const LL=Q0();let xL=0;function bL(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||LL,o={uid:xL++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new L0(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:iy(r,i),emitsOptions:py(r,i),emit:null,emitted:null,propsDefaults:hn,inheritAttrs:r.inheritAttrs,ctx:hn,data:hn,props:hn,attrs:hn,slots:hn,refs:hn,setupState:hn,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=hL.bind(null,o),e.ce&&e.ce(o),o}let zr=null,Rf,ag;{const e=rp(),t=(n,r)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(r),o=>{i.length>1?i.forEach(u=>u(o)):i[0](o)}};Rf=t("__VUE_INSTANCE_SETTERS__",n=>zr=n),ag=t("__VUE_SSR_SETTERS__",n=>Fc=n)}const sh=e=>{const t=zr;return Rf(e),e.scope.on(),()=>{e.scope.off(),Rf(t)}},zm=()=>{zr&&zr.scope.off(),Rf(null)};function _y(e){return e.vnode.shapeFlag&4}let Fc=!1;function wL(e,t=!1,n=!1){t&&ag(t);const{props:r,children:i}=e.vnode,o=_y(e);JE(e,r,o,t),eL(e,i,n);const u=o?SL(e,t):void 0;return t&&ag(!1),u}function SL(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,VE);const{setup:r}=n;if(r){ba();const i=e.setupContext=r.length>1?PL(e):null,o=sh(e),u=ih(r,e,0,[e.props,i]),f=d0(u);if(wa(),o(),(f||e.sp)&&!Mc(e)&&X0(e),f){if(u.then(zm,zm),t)return u.then(d=>{Gm(e,d)}).catch(d=>{op(d,e,0)});e.asyncDep=u}else Gm(e,u)}else yy(e)}function Gm(e,t,n){Me(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:yn(t)&&(e.setupState=V0(t)),yy(e)}function yy(e,t,n){const r=e.type;e.render||(e.render=r.render||eo);{const i=sh(e);ba();try{jE(e)}finally{wa(),i()}}}const ML={get(e,t){return Br(e,"get",""),e[t]}};function PL(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,ML),slots:e.slots,emit:e.emit,expose:t}}function hp(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(V0(zg(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Pc)return Pc[n](e)},has(t,n){return n in t||n in Pc}})):e.proxy}function IL(e){return Me(e)&&"__vccOpts"in e}const mn=(e,t)=>LE(e,t,Fc);function vy(e,t,n){const r=arguments.length;return r===2?yn(t)&&!ge(t)?Of(t)?pr(e,null,[t]):pr(e,t):pr(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Of(n)&&(n=[n]),pr(e,t,n))}const TL="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ug;const Um=typeof window<"u"&&window.trustedTypes;if(Um)try{ug=Um.createPolicy("vue",{createHTML:e=>e})}catch{}const Cy=ug?e=>ug.createHTML(e):e=>e,AL="http://www.w3.org/2000/svg",kL="http://www.w3.org/1998/Math/MathML",Mo=typeof document<"u"?document:null,Vm=Mo&&Mo.createElement("template"),DL={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t==="svg"?Mo.createElementNS(AL,e):t==="mathml"?Mo.createElementNS(kL,e):n?Mo.createElement(e,{is:n}):Mo.createElement(e);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>Mo.createTextNode(e),createComment:e=>Mo.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Mo.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,o){const u=n?n.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===o||!(i=i.nextSibling)););else{Vm.innerHTML=Cy(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const f=Vm.content;if(r==="svg"||r==="mathml"){const d=f.firstChild;for(;d.firstChild;)f.appendChild(d.firstChild);f.removeChild(d)}t.insertBefore(f,n)}return[u?u.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},NL=Symbol("_vtc");function OL(e,t,n){const r=e[NL];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const jm=Symbol("_vod"),RL=Symbol("_vsh"),BL=Symbol(""),FL=/(^|;)\s*display\s*:/;function zL(e,t,n){const r=e.style,i=Jn(n);let o=!1;if(n&&!i){if(t)if(Jn(t))for(const u of t.split(";")){const f=u.slice(0,u.indexOf(":")).trim();n[f]==null&&_f(r,f,"")}else for(const u in t)n[u]==null&&_f(r,u,"");for(const u in n)u==="display"&&(o=!0),_f(r,u,n[u])}else if(i){if(t!==n){const u=r[BL];u&&(n+=";"+u),r.cssText=n,o=FL.test(n)}}else t&&e.removeAttribute("style");jm in e&&(e[jm]=o?r.display:"",e[RL]&&(r.display="none"))}const qm=/\s*!important$/;function _f(e,t,n){if(ge(n))n.forEach(r=>_f(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=GL(e,t);qm.test(n)?e.setProperty(pu(r),n.replace(qm,""),"important"):e[r]=n}}const Hm=["Webkit","Moz","ms"],Od={};function GL(e,t){const n=Od[t];if(n)return n;let r=da(t);if(r!=="filter"&&r in e)return Od[t]=r;r=_0(r);for(let i=0;i<Hm.length;i++){const o=Hm[i]+r;if(o in e)return Od[t]=o}return t}const Zm="http://www.w3.org/1999/xlink";function Km(e,t,n,r,i,o=ZC(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Zm,t.slice(6,t.length)):e.setAttributeNS(Zm,t,n):n==null||o&&!v0(n)?e.removeAttribute(t):e.setAttribute(t,o?"":ro(n)?String(n):n)}function Xm(e,t,n,r,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Cy(n):n);return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const f=o==="OPTION"?e.getAttribute("value")||"":e.value,d=n==null?e.type==="checkbox"?"on":"":String(n);(f!==d||!("_value"in e))&&(e.value=d),n==null&&e.removeAttribute(t),e._value=n;return}let u=!1;if(n===""||n==null){const f=typeof e[t];f==="boolean"?n=v0(n):n==null&&f==="string"?(n="",u=!0):f==="number"&&(n=0,u=!0)}try{e[t]=n}catch{}u&&e.removeAttribute(i||t)}function Ha(e,t,n,r){e.addEventListener(t,n,r)}function UL(e,t,n,r){e.removeEventListener(t,n,r)}const Wm=Symbol("_vei");function VL(e,t,n,r,i=null){const o=e[Wm]||(e[Wm]={}),u=o[t];if(r&&u)u.value=r;else{const[f,d]=jL(t);if(r){const _=o[t]=ZL(r,i);Ha(e,f,_,d)}else u&&(UL(e,f,u,d),o[t]=void 0)}}const Ym=/(?:Once|Passive|Capture)$/;function jL(e){let t;if(Ym.test(e)){t={};let r;for(;r=e.match(Ym);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):pu(e.slice(2)),t]}let Rd=0;const qL=Promise.resolve(),HL=()=>Rd||(qL.then(()=>Rd=0),Rd=Date.now());function ZL(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;io(KL(r,n.value),t,5,[r])};return n.value=e,n.attached=HL(),n}function KL(e,t){if(ge(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const Jm=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,XL=(e,t,n,r,i,o)=>{const u=i==="svg";t==="class"?OL(e,r,u):t==="style"?zL(e,n,r):tp(t)?Ig(t)||VL(e,t,n,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):WL(e,t,r,u))?(Xm(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Km(e,t,r,u,o,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Jn(r))?Xm(e,da(t),r,o,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Km(e,t,r,u))};function WL(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&Jm(t)&&Me(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Jm(t)&&Jn(n)?!1:t in e}const Bf=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ge(t)?n=>ff(t,n):t};function YL(e){e.target.composing=!0}function $m(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const nl=Symbol("_assign"),yf={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e[nl]=Bf(i);const o=r||i.props&&i.props.type==="number";Ha(e,t?"change":"input",u=>{if(u.target.composing)return;let f=e.value;n&&(f=f.trim()),o&&(f=Mf(f)),e[nl](f)}),n&&Ha(e,"change",()=>{e.value=e.value.trim()}),t||(Ha(e,"compositionstart",YL),Ha(e,"compositionend",$m),Ha(e,"change",$m))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:i,number:o}},u){if(e[nl]=Bf(u),e.composing)return;const f=(o||e.type==="number")&&!/^0\d/.test(e.value)?Mf(e.value):e.value,d=t??"";f!==d&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||i&&e.value.trim()===d)||(e.value=d))}},JL={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const i=ep(t);Ha(e,"change",()=>{const o=Array.prototype.filter.call(e.options,u=>u.selected).map(u=>n?Mf(Ff(u)):Ff(u));e[nl](e.multiple?i?new Set(o):o:o[0]),e._assigning=!0,ap(()=>{e._assigning=!1})}),e[nl]=Bf(r)},mounted(e,{value:t}){Qm(e,t)},beforeUpdate(e,t,n){e[nl]=Bf(n)},updated(e,{value:t}){e._assigning||Qm(e,t)}};function Qm(e,t){const n=e.multiple,r=ge(t);if(!(n&&!r&&!ep(t))){for(let i=0,o=e.options.length;i<o;i++){const u=e.options[i],f=Ff(u);if(n)if(r){const d=typeof f;d==="string"||d==="number"?u.selected=t.some(_=>String(_)===String(f)):u.selected=XC(t,f)>-1}else u.selected=t.has(f);else if(ip(Ff(u),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Ff(e){return"_value"in e?e._value:e.value}const $L=["ctrl","shift","alt","meta"],QL={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>$L.some(n=>e[`${n}Key`]&&!t.includes(n))},tx=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(i,...o)=>{for(let u=0;u<t.length;u++){const f=QL[t[u]];if(f&&f(i,t))return}return e(i,...o)})},ex=Vr({patchProp:XL},DL);let t_;function nx(){return t_||(t_=rL(ex))}const rx=(...e)=>{const t=nx().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=sx(r);if(!i)return;const o=t._component;!Me(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const u=n(i,!1,ix(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),u},t};function ix(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function sx(e){return Jn(e)?document.querySelector(e):e}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Ey;const fp=e=>Ey=e,Ly=Symbol();function lg(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Ac;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Ac||(Ac={}));function ox(){const e=x0(!0),t=e.run(()=>zn({}));let n=[],r=[];const i=zg({install(o){fp(i),i._a=o,o.provide(Ly,i),o.config.globalProperties.$pinia=i,r.forEach(u=>n.push(u)),r=[]},use(o){return this._a?n.push(o):r.push(o),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}const xy=()=>{};function e_(e,t,n,r=xy){e.push(t);const i=()=>{const o=e.indexOf(t);o>-1&&(e.splice(o,1),r())};return!n&&b0()&&WC(i),i}function Wu(e,...t){e.slice().forEach(n=>{n(...t)})}const ax=e=>e(),n_=Symbol(),Bd=Symbol();function cg(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,r)=>e.set(r,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],i=e[n];lg(i)&&lg(r)&&e.hasOwnProperty(n)&&!Gn(r)&&!ca(r)?e[n]=cg(i,r):e[n]=r}return e}const ux=Symbol();function lx(e){return!lg(e)||!e.hasOwnProperty(ux)}const{assign:ia}=Object;function cx(e){return!!(Gn(e)&&e.effect)}function hx(e,t,n,r){const{state:i,actions:o,getters:u}=t,f=n.state.value[e];let d;function _(){f||(n.state.value[e]=i?i():{});const y=yE(n.state.value[e]);return ia(y,o,Object.keys(u||{}).reduce((E,S)=>(E[S]=zg(mn(()=>{fp(n);const T=n._s.get(e);return u[S].call(T,T)})),E),{}))}return d=by(e,_,t,n,r,!0),d}function by(e,t,n={},r,i,o){let u;const f=ia({actions:{}},n),d={deep:!0};let _,y,E=[],S=[],T;const I=r.state.value[e];!o&&!I&&(r.state.value[e]={}),zn({});let z;function G(Nt){let Ot;_=y=!1,typeof Nt=="function"?(Nt(r.state.value[e]),Ot={type:Ac.patchFunction,storeId:e,events:T}):(cg(r.state.value[e],Nt),Ot={type:Ac.patchObject,payload:Nt,storeId:e,events:T});const te=z=Symbol();ap().then(()=>{z===te&&(_=!0)}),y=!0,Wu(E,Ot,r.state.value[e])}const W=o?function(){const{state:Ot}=n,te=Ot?Ot():{};this.$patch(Ht=>{ia(Ht,te)})}:xy;function Q(){u.stop(),E=[],S=[],r._s.delete(e)}const rt=(Nt,Ot="")=>{if(n_ in Nt)return Nt[Bd]=Ot,Nt;const te=function(){fp(r);const Ht=Array.from(arguments),ee=[],Ae=[];function Bt(Zt){ee.push(Zt)}function le(Zt){Ae.push(Zt)}Wu(S,{args:Ht,name:te[Bd],store:xt,after:Bt,onError:le});let jt;try{jt=Nt.apply(this&&this.$id===e?this:xt,Ht)}catch(Zt){throw Wu(Ae,Zt),Zt}return jt instanceof Promise?jt.then(Zt=>(Wu(ee,Zt),Zt)).catch(Zt=>(Wu(Ae,Zt),Promise.reject(Zt))):(Wu(ee,jt),jt)};return te[n_]=!0,te[Bd]=Ot,te},gt={_p:r,$id:e,$onAction:e_.bind(null,S),$patch:G,$reset:W,$subscribe(Nt,Ot={}){const te=e_(E,Nt,Ot.detached,()=>Ht()),Ht=u.run(()=>ha(()=>r.state.value[e],ee=>{(Ot.flush==="sync"?y:_)&&Nt({storeId:e,type:Ac.direct,events:T},ee)},ia({},d,Ot)));return te},$dispose:Q},xt=rh(gt);r._s.set(e,xt);const Dt=(r._a&&r._a.runWithContext||ax)(()=>r._e.run(()=>(u=x0()).run(()=>t({action:rt}))));for(const Nt in Dt){const Ot=Dt[Nt];if(Gn(Ot)&&!cx(Ot)||ca(Ot))o||(I&&lx(Ot)&&(Gn(Ot)?Ot.value=I[Nt]:cg(Ot,I[Nt])),r.state.value[e][Nt]=Ot);else if(typeof Ot=="function"){const te=rt(Ot,Nt);Dt[Nt]=te,f.actions[Nt]=Ot}}return ia(xt,Dt),ia(We(xt),Dt),Object.defineProperty(xt,"$state",{get:()=>r.state.value[e],set:Nt=>{G(Ot=>{ia(Ot,Nt)})}}),r._p.forEach(Nt=>{ia(xt,u.run(()=>Nt({store:xt,app:r._a,pinia:r,options:f})))}),I&&o&&n.hydrate&&n.hydrate(xt.$state,I),_=!0,y=!0,xt}/*! #__NO_SIDE_EFFECTS__ */function wy(e,t,n){let r,i;const o=typeof t=="function";typeof e=="string"?(r=e,i=o?n:t):(i=e,r=e.id);function u(f,d){const _=YE();return f=f||(_?Es(Ly,null):null),f&&fp(f),f=Ey,f._s.has(r)||(o?by(r,t,i,f):hx(r,i,f)),f._s.get(r)}return u.$id=r,u}/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Ju=typeof document<"u";function Sy(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function fx(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Sy(e.default)}const nn=Object.assign;function Fd(e,t){const n={};for(const r in t){const i=t[r];n[r]=bs(i)?i.map(e):e(i)}return n}const kc=()=>{},bs=Array.isArray,My=/#/g,px=/&/g,dx=/\//g,gx=/=/g,mx=/\?/g,Py=/\+/g,_x=/%5B/g,yx=/%5D/g,Iy=/%5E/g,vx=/%60/g,Ty=/%7B/g,Cx=/%7C/g,Ay=/%7D/g,Ex=/%20/g;function Zg(e){return encodeURI(""+e).replace(Cx,"|").replace(_x,"[").replace(yx,"]")}function Lx(e){return Zg(e).replace(Ty,"{").replace(Ay,"}").replace(Iy,"^")}function hg(e){return Zg(e).replace(Py,"%2B").replace(Ex,"+").replace(My,"%23").replace(px,"%26").replace(vx,"`").replace(Ty,"{").replace(Ay,"}").replace(Iy,"^")}function xx(e){return hg(e).replace(gx,"%3D")}function bx(e){return Zg(e).replace(My,"%23").replace(mx,"%3F")}function wx(e){return e==null?"":bx(e).replace(dx,"%2F")}function zc(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const Sx=/\/$/,Mx=e=>e.replace(Sx,"");function zd(e,t,n="/"){let r,i={},o="",u="";const f=t.indexOf("#");let d=t.indexOf("?");return f<d&&f>=0&&(d=-1),d>-1&&(r=t.slice(0,d),o=t.slice(d+1,f>-1?f:t.length),i=e(o)),f>-1&&(r=r||t.slice(0,f),u=t.slice(f,t.length)),r=Ax(r??t,n),{fullPath:r+(o&&"?")+o+u,path:r,query:i,hash:zc(u)}}function Px(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function r_(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Ix(e,t,n){const r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&sl(t.matched[r],n.matched[i])&&ky(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function sl(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function ky(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Tx(e[n],t[n]))return!1;return!0}function Tx(e,t){return bs(e)?i_(e,t):bs(t)?i_(t,e):e===t}function i_(e,t){return bs(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function Ax(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let o=n.length-1,u,f;for(u=0;u<r.length;u++)if(f=r[u],f!==".")if(f==="..")o>1&&o--;else break;return n.slice(0,o).join("/")+"/"+r.slice(u).join("/")}const ea={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Gc;(function(e){e.pop="pop",e.push="push"})(Gc||(Gc={}));var Dc;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Dc||(Dc={}));function kx(e){if(!e)if(Ju){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Mx(e)}const Dx=/^[^#]+#/;function Nx(e,t){return e.replace(Dx,"#")+t}function Ox(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const pp=()=>({left:window.scrollX,top:window.scrollY});function Rx(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=Ox(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function s_(e,t){return(history.state?history.state.position-t:-1)+e}const fg=new Map;function Bx(e,t){fg.set(e,t)}function Fx(e){const t=fg.get(e);return fg.delete(e),t}let zx=()=>location.protocol+"//"+location.host;function Dy(e,t){const{pathname:n,search:r,hash:i}=t,o=e.indexOf("#");if(o>-1){let f=i.includes(e.slice(o))?e.slice(o).length:1,d=i.slice(f);return d[0]!=="/"&&(d="/"+d),r_(d,"")}return r_(n,e)+r+i}function Gx(e,t,n,r){let i=[],o=[],u=null;const f=({state:S})=>{const T=Dy(e,location),I=n.value,z=t.value;let G=0;if(S){if(n.value=T,t.value=S,u&&u===I){u=null;return}G=z?S.position-z.position:0}else r(T);i.forEach(W=>{W(n.value,I,{delta:G,type:Gc.pop,direction:G?G>0?Dc.forward:Dc.back:Dc.unknown})})};function d(){u=n.value}function _(S){i.push(S);const T=()=>{const I=i.indexOf(S);I>-1&&i.splice(I,1)};return o.push(T),T}function y(){const{history:S}=window;S.state&&S.replaceState(nn({},S.state,{scroll:pp()}),"")}function E(){for(const S of o)S();o=[],window.removeEventListener("popstate",f),window.removeEventListener("beforeunload",y)}return window.addEventListener("popstate",f),window.addEventListener("beforeunload",y,{passive:!0}),{pauseListeners:d,listen:_,destroy:E}}function o_(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?pp():null}}function Ux(e){const{history:t,location:n}=window,r={value:Dy(e,n)},i={value:t.state};i.value||o(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(d,_,y){const E=e.indexOf("#"),S=E>-1?(n.host&&document.querySelector("base")?e:e.slice(E))+d:zx()+e+d;try{t[y?"replaceState":"pushState"](_,"",S),i.value=_}catch(T){console.error(T),n[y?"replace":"assign"](S)}}function u(d,_){const y=nn({},t.state,o_(i.value.back,d,i.value.forward,!0),_,{position:i.value.position});o(d,y,!0),r.value=d}function f(d,_){const y=nn({},i.value,t.state,{forward:d,scroll:pp()});o(y.current,y,!0);const E=nn({},o_(r.value,d,null),{position:y.position+1},_);o(d,E,!1),r.value=d}return{location:r,state:i,push:f,replace:u}}function Vx(e){e=kx(e);const t=Ux(e),n=Gx(e,t.state,t.location,t.replace);function r(o,u=!0){u||n.pauseListeners(),history.go(o)}const i=nn({location:"",base:e,go:r,createHref:Nx.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function jx(e){return typeof e=="string"||e&&typeof e=="object"}function Ny(e){return typeof e=="string"||typeof e=="symbol"}const Oy=Symbol("");var a_;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(a_||(a_={}));function ol(e,t){return nn(new Error,{type:e,[Oy]:!0},t)}function So(e,t){return e instanceof Error&&Oy in e&&(t==null||!!(e.type&t))}const u_="[^/]+?",qx={sensitive:!1,strict:!1,start:!0,end:!0},Hx=/[.+*?^${}()[\]/\\]/g;function Zx(e,t){const n=nn({},qx,t),r=[];let i=n.start?"^":"";const o=[];for(const _ of e){const y=_.length?[]:[90];n.strict&&!_.length&&(i+="/");for(let E=0;E<_.length;E++){const S=_[E];let T=40+(n.sensitive?.25:0);if(S.type===0)E||(i+="/"),i+=S.value.replace(Hx,"\\$&"),T+=40;else if(S.type===1){const{value:I,repeatable:z,optional:G,regexp:W}=S;o.push({name:I,repeatable:z,optional:G});const Q=W||u_;if(Q!==u_){T+=10;try{new RegExp(`(${Q})`)}catch(gt){throw new Error(`Invalid custom RegExp for param "${I}" (${Q}): `+gt.message)}}let rt=z?`((?:${Q})(?:/(?:${Q}))*)`:`(${Q})`;E||(rt=G&&_.length<2?`(?:/${rt})`:"/"+rt),G&&(rt+="?"),i+=rt,T+=20,G&&(T+=-8),z&&(T+=-20),Q===".*"&&(T+=-50)}y.push(T)}r.push(y)}if(n.strict&&n.end){const _=r.length-1;r[_][r[_].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const u=new RegExp(i,n.sensitive?"":"i");function f(_){const y=_.match(u),E={};if(!y)return null;for(let S=1;S<y.length;S++){const T=y[S]||"",I=o[S-1];E[I.name]=T&&I.repeatable?T.split("/"):T}return E}function d(_){let y="",E=!1;for(const S of e){(!E||!y.endsWith("/"))&&(y+="/"),E=!1;for(const T of S)if(T.type===0)y+=T.value;else if(T.type===1){const{value:I,repeatable:z,optional:G}=T,W=I in _?_[I]:"";if(bs(W)&&!z)throw new Error(`Provided param "${I}" is an array but it is not repeatable (* or + modifiers)`);const Q=bs(W)?W.join("/"):W;if(!Q)if(G)S.length<2&&(y.endsWith("/")?y=y.slice(0,-1):E=!0);else throw new Error(`Missing required param "${I}"`);y+=Q}}return y||"/"}return{re:u,score:r,keys:o,parse:f,stringify:d}}function Kx(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Ry(e,t){let n=0;const r=e.score,i=t.score;for(;n<r.length&&n<i.length;){const o=Kx(r[n],i[n]);if(o)return o;n++}if(Math.abs(i.length-r.length)===1){if(l_(r))return 1;if(l_(i))return-1}return i.length-r.length}function l_(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Xx={type:0,value:""},Wx=/[a-zA-Z0-9_]/;function Yx(e){if(!e)return[[]];if(e==="/")return[[Xx]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(T){throw new Error(`ERR (${n})/"${_}": ${T}`)}let n=0,r=n;const i=[];let o;function u(){o&&i.push(o),o=[]}let f=0,d,_="",y="";function E(){_&&(n===0?o.push({type:0,value:_}):n===1||n===2||n===3?(o.length>1&&(d==="*"||d==="+")&&t(`A repeatable param (${_}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:_,regexp:y,repeatable:d==="*"||d==="+",optional:d==="*"||d==="?"})):t("Invalid state to consume buffer"),_="")}function S(){_+=d}for(;f<e.length;){if(d=e[f++],d==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:d==="/"?(_&&E(),u()):d===":"?(E(),n=1):S();break;case 4:S(),n=r;break;case 1:d==="("?n=2:Wx.test(d)?S():(E(),n=0,d!=="*"&&d!=="?"&&d!=="+"&&f--);break;case 2:d===")"?y[y.length-1]=="\\"?y=y.slice(0,-1)+d:n=3:y+=d;break;case 3:E(),n=0,d!=="*"&&d!=="?"&&d!=="+"&&f--,y="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${_}"`),E(),u(),i}function Jx(e,t,n){const r=Zx(Yx(e.path),n),i=nn(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function $x(e,t){const n=[],r=new Map;t=p_({strict:!1,end:!0,sensitive:!1},t);function i(E){return r.get(E)}function o(E,S,T){const I=!T,z=h_(E);z.aliasOf=T&&T.record;const G=p_(t,E),W=[z];if("alias"in E){const gt=typeof E.alias=="string"?[E.alias]:E.alias;for(const xt of gt)W.push(h_(nn({},z,{components:T?T.record.components:z.components,path:xt,aliasOf:T?T.record:z})))}let Q,rt;for(const gt of W){const{path:xt}=gt;if(S&&xt[0]!=="/"){const bt=S.record.path,Dt=bt[bt.length-1]==="/"?"":"/";gt.path=S.record.path+(xt&&Dt+xt)}if(Q=Jx(gt,S,G),T?T.alias.push(Q):(rt=rt||Q,rt!==Q&&rt.alias.push(Q),I&&E.name&&!f_(Q)&&u(E.name)),By(Q)&&d(Q),z.children){const bt=z.children;for(let Dt=0;Dt<bt.length;Dt++)o(bt[Dt],Q,T&&T.children[Dt])}T=T||Q}return rt?()=>{u(rt)}:kc}function u(E){if(Ny(E)){const S=r.get(E);S&&(r.delete(E),n.splice(n.indexOf(S),1),S.children.forEach(u),S.alias.forEach(u))}else{const S=n.indexOf(E);S>-1&&(n.splice(S,1),E.record.name&&r.delete(E.record.name),E.children.forEach(u),E.alias.forEach(u))}}function f(){return n}function d(E){const S=eb(E,n);n.splice(S,0,E),E.record.name&&!f_(E)&&r.set(E.record.name,E)}function _(E,S){let T,I={},z,G;if("name"in E&&E.name){if(T=r.get(E.name),!T)throw ol(1,{location:E});G=T.record.name,I=nn(c_(S.params,T.keys.filter(rt=>!rt.optional).concat(T.parent?T.parent.keys.filter(rt=>rt.optional):[]).map(rt=>rt.name)),E.params&&c_(E.params,T.keys.map(rt=>rt.name))),z=T.stringify(I)}else if(E.path!=null)z=E.path,T=n.find(rt=>rt.re.test(z)),T&&(I=T.parse(z),G=T.record.name);else{if(T=S.name?r.get(S.name):n.find(rt=>rt.re.test(S.path)),!T)throw ol(1,{location:E,currentLocation:S});G=T.record.name,I=nn({},S.params,E.params),z=T.stringify(I)}const W=[];let Q=T;for(;Q;)W.unshift(Q.record),Q=Q.parent;return{name:G,path:z,params:I,matched:W,meta:tb(W)}}e.forEach(E=>o(E));function y(){n.length=0,r.clear()}return{addRoute:o,resolve:_,removeRoute:u,clearRoutes:y,getRoutes:f,getRecordMatcher:i}}function c_(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function h_(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Qx(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Qx(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function f_(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function tb(e){return e.reduce((t,n)=>nn(t,n.meta),{})}function p_(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function eb(e,t){let n=0,r=t.length;for(;n!==r;){const o=n+r>>1;Ry(e,t[o])<0?r=o:n=o+1}const i=nb(e);return i&&(r=t.lastIndexOf(i,r-1)),r}function nb(e){let t=e;for(;t=t.parent;)if(By(t)&&Ry(e,t)===0)return t}function By({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function rb(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<r.length;++i){const o=r[i].replace(Py," "),u=o.indexOf("="),f=zc(u<0?o:o.slice(0,u)),d=u<0?null:zc(o.slice(u+1));if(f in t){let _=t[f];bs(_)||(_=t[f]=[_]),_.push(d)}else t[f]=d}return t}function d_(e){let t="";for(let n in e){const r=e[n];if(n=xx(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(bs(r)?r.map(o=>o&&hg(o)):[r&&hg(r)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+n,o!=null&&(t+="="+o))})}return t}function ib(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=bs(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return t}const sb=Symbol(""),g_=Symbol(""),dp=Symbol(""),Fy=Symbol(""),pg=Symbol("");function mc(){let e=[];function t(r){return e.push(r),()=>{const i=e.indexOf(r);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function aa(e,t,n,r,i,o=u=>u()){const u=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((f,d)=>{const _=S=>{S===!1?d(ol(4,{from:n,to:t})):S instanceof Error?d(S):jx(S)?d(ol(2,{from:t,to:S})):(u&&r.enterCallbacks[i]===u&&typeof S=="function"&&u.push(S),f())},y=o(()=>e.call(r&&r.instances[i],t,n,_));let E=Promise.resolve(y);e.length<3&&(E=E.then(_)),E.catch(S=>d(S))})}function Gd(e,t,n,r,i=o=>o()){const o=[];for(const u of e)for(const f in u.components){let d=u.components[f];if(!(t!=="beforeRouteEnter"&&!u.instances[f]))if(Sy(d)){const y=(d.__vccOpts||d)[t];y&&o.push(aa(y,n,r,u,f,i))}else{let _=d();o.push(()=>_.then(y=>{if(!y)throw new Error(`Couldn't resolve component "${f}" at "${u.path}"`);const E=fx(y)?y.default:y;u.mods[f]=y,u.components[f]=E;const T=(E.__vccOpts||E)[t];return T&&aa(T,n,r,u,f,i)()}))}}return o}function m_(e){const t=Es(dp),n=Es(Fy),r=mn(()=>{const d=Qs(e.to);return t.resolve(d)}),i=mn(()=>{const{matched:d}=r.value,{length:_}=d,y=d[_-1],E=n.matched;if(!y||!E.length)return-1;const S=E.findIndex(sl.bind(null,y));if(S>-1)return S;const T=__(d[_-2]);return _>1&&__(y)===T&&E[E.length-1].path!==T?E.findIndex(sl.bind(null,d[_-2])):S}),o=mn(()=>i.value>-1&&lb(n.params,r.value.params)),u=mn(()=>i.value>-1&&i.value===n.matched.length-1&&ky(n.params,r.value.params));function f(d={}){if(ub(d)){const _=t[Qs(e.replace)?"replace":"push"](Qs(e.to)).catch(kc);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>_),_}return Promise.resolve()}return{route:r,href:mn(()=>r.value.href),isActive:o,isExactActive:u,navigate:f}}function ob(e){return e.length===1?e[0]:e}const ab=du({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:m_,setup(e,{slots:t}){const n=rh(m_(e)),{options:r}=Es(dp),i=mn(()=>({[y_(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[y_(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const o=t.default&&ob(t.default(n));return e.custom?o:vy("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},o)}}}),vf=ab;function ub(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function lb(e,t){for(const n in t){const r=t[n],i=e[n];if(typeof r=="string"){if(r!==i)return!1}else if(!bs(i)||i.length!==r.length||r.some((o,u)=>o!==i[u]))return!1}return!0}function __(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const y_=(e,t,n)=>e??t??n,cb=du({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=Es(pg),i=mn(()=>e.route||r.value),o=Es(g_,0),u=mn(()=>{let _=Qs(o);const{matched:y}=i.value;let E;for(;(E=y[_])&&!E.components;)_++;return _}),f=mn(()=>i.value.matched[u.value]);df(g_,mn(()=>u.value+1)),df(sb,f),df(pg,i);const d=zn();return ha(()=>[d.value,f.value,e.name],([_,y,E],[S,T,I])=>{y&&(y.instances[E]=_,T&&T!==y&&_&&_===S&&(y.leaveGuards.size||(y.leaveGuards=T.leaveGuards),y.updateGuards.size||(y.updateGuards=T.updateGuards))),_&&y&&(!T||!sl(y,T)||!S)&&(y.enterCallbacks[E]||[]).forEach(z=>z(_))},{flush:"post"}),()=>{const _=i.value,y=e.name,E=f.value,S=E&&E.components[y];if(!S)return v_(n.default,{Component:S,route:_});const T=E.props[y],I=T?T===!0?_.params:typeof T=="function"?T(_):T:null,G=vy(S,nn({},I,t,{onVnodeUnmounted:W=>{W.component.isUnmounted&&(E.instances[y]=null)},ref:d}));return v_(n.default,{Component:G,route:_})||G}}});function v_(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const zy=cb;function hb(e){const t=$x(e.routes,e),n=e.parseQuery||rb,r=e.stringifyQuery||d_,i=e.history,o=mc(),u=mc(),f=mc(),d=gE(ea);let _=ea;Ju&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const y=Fd.bind(null,Lt=>""+Lt),E=Fd.bind(null,wx),S=Fd.bind(null,zc);function T(Lt,Y){let $,J;return Ny(Lt)?($=t.getRecordMatcher(Lt),J=Y):J=Lt,t.addRoute(J,$)}function I(Lt){const Y=t.getRecordMatcher(Lt);Y&&t.removeRoute(Y)}function z(){return t.getRoutes().map(Lt=>Lt.record)}function G(Lt){return!!t.getRecordMatcher(Lt)}function W(Lt,Y){if(Y=nn({},Y||d.value),typeof Lt=="string"){const et=zd(n,Lt,Y.path),_t=t.resolve({path:et.path},Y),Et=i.createHref(et.fullPath);return nn(et,_t,{params:S(_t.params),hash:zc(et.hash),redirectedFrom:void 0,href:Et})}let $;if(Lt.path!=null)$=nn({},Lt,{path:zd(n,Lt.path,Y.path).path});else{const et=nn({},Lt.params);for(const _t in et)et[_t]==null&&delete et[_t];$=nn({},Lt,{params:E(et)}),Y.params=E(Y.params)}const J=t.resolve($,Y),zt=Lt.hash||"";J.params=y(S(J.params));const F=Px(r,nn({},Lt,{hash:Lx(zt),path:J.path})),V=i.createHref(F);return nn({fullPath:F,hash:zt,query:r===d_?ib(Lt.query):Lt.query||{}},J,{redirectedFrom:void 0,href:V})}function Q(Lt){return typeof Lt=="string"?zd(n,Lt,d.value.path):nn({},Lt)}function rt(Lt,Y){if(_!==Lt)return ol(8,{from:Y,to:Lt})}function gt(Lt){return Dt(Lt)}function xt(Lt){return gt(nn(Q(Lt),{replace:!0}))}function bt(Lt){const Y=Lt.matched[Lt.matched.length-1];if(Y&&Y.redirect){const{redirect:$}=Y;let J=typeof $=="function"?$(Lt):$;return typeof J=="string"&&(J=J.includes("?")||J.includes("#")?J=Q(J):{path:J},J.params={}),nn({query:Lt.query,hash:Lt.hash,params:J.path!=null?{}:Lt.params},J)}}function Dt(Lt,Y){const $=_=W(Lt),J=d.value,zt=Lt.state,F=Lt.force,V=Lt.replace===!0,et=bt($);if(et)return Dt(nn(Q(et),{state:typeof et=="object"?nn({},zt,et.state):zt,force:F,replace:V}),Y||$);const _t=$;_t.redirectedFrom=Y;let Et;return!F&&Ix(r,J,$)&&(Et=ol(16,{to:_t,from:J}),de(J,J,!0,!1)),(Et?Promise.resolve(Et):te(_t,J)).catch(yt=>So(yt)?So(yt,2)?yt:Wt(yt):Rt(yt,_t,J)).then(yt=>{if(yt){if(So(yt,2))return Dt(nn({replace:V},Q(yt.to),{state:typeof yt.to=="object"?nn({},zt,yt.to.state):zt,force:F}),Y||_t)}else yt=ee(_t,J,!0,V,zt);return Ht(_t,J,yt),yt})}function Nt(Lt,Y){const $=rt(Lt,Y);return $?Promise.reject($):Promise.resolve()}function Ot(Lt){const Y=Oe.values().next().value;return Y&&typeof Y.runWithContext=="function"?Y.runWithContext(Lt):Lt()}function te(Lt,Y){let $;const[J,zt,F]=fb(Lt,Y);$=Gd(J.reverse(),"beforeRouteLeave",Lt,Y);for(const et of J)et.leaveGuards.forEach(_t=>{$.push(aa(_t,Lt,Y))});const V=Nt.bind(null,Lt,Y);return $.push(V),ce($).then(()=>{$=[];for(const et of o.list())$.push(aa(et,Lt,Y));return $.push(V),ce($)}).then(()=>{$=Gd(zt,"beforeRouteUpdate",Lt,Y);for(const et of zt)et.updateGuards.forEach(_t=>{$.push(aa(_t,Lt,Y))});return $.push(V),ce($)}).then(()=>{$=[];for(const et of F)if(et.beforeEnter)if(bs(et.beforeEnter))for(const _t of et.beforeEnter)$.push(aa(_t,Lt,Y));else $.push(aa(et.beforeEnter,Lt,Y));return $.push(V),ce($)}).then(()=>(Lt.matched.forEach(et=>et.enterCallbacks={}),$=Gd(F,"beforeRouteEnter",Lt,Y,Ot),$.push(V),ce($))).then(()=>{$=[];for(const et of u.list())$.push(aa(et,Lt,Y));return $.push(V),ce($)}).catch(et=>So(et,8)?et:Promise.reject(et))}function Ht(Lt,Y,$){f.list().forEach(J=>Ot(()=>J(Lt,Y,$)))}function ee(Lt,Y,$,J,zt){const F=rt(Lt,Y);if(F)return F;const V=Y===ea,et=Ju?history.state:{};$&&(J||V?i.replace(Lt.fullPath,nn({scroll:V&&et&&et.scroll},zt)):i.push(Lt.fullPath,zt)),d.value=Lt,de(Lt,Y,$,V),Wt()}let Ae;function Bt(){Ae||(Ae=i.listen((Lt,Y,$)=>{if(!ve.listening)return;const J=W(Lt),zt=bt(J);if(zt){Dt(nn(zt,{replace:!0,force:!0}),J).catch(kc);return}_=J;const F=d.value;Ju&&Bx(s_(F.fullPath,$.delta),pp()),te(J,F).catch(V=>So(V,12)?V:So(V,2)?(Dt(nn(Q(V.to),{force:!0}),J).then(et=>{So(et,20)&&!$.delta&&$.type===Gc.pop&&i.go(-1,!1)}).catch(kc),Promise.reject()):($.delta&&i.go(-$.delta,!1),Rt(V,J,F))).then(V=>{V=V||ee(J,F,!1),V&&($.delta&&!So(V,8)?i.go(-$.delta,!1):$.type===Gc.pop&&So(V,20)&&i.go(-1,!1)),Ht(J,F,V)}).catch(kc)}))}let le=mc(),jt=mc(),Zt;function Rt(Lt,Y,$){Wt(Lt);const J=jt.list();return J.length?J.forEach(zt=>zt(Lt,Y,$)):console.error(Lt),Promise.reject(Lt)}function tn(){return Zt&&d.value!==ea?Promise.resolve():new Promise((Lt,Y)=>{le.add([Lt,Y])})}function Wt(Lt){return Zt||(Zt=!Lt,Bt(),le.list().forEach(([Y,$])=>Lt?$(Lt):Y()),le.reset()),Lt}function de(Lt,Y,$,J){const{scrollBehavior:zt}=e;if(!Ju||!zt)return Promise.resolve();const F=!$&&Fx(s_(Lt.fullPath,0))||(J||!$)&&history.state&&history.state.scroll||null;return ap().then(()=>zt(Lt,Y,F)).then(V=>V&&Rx(V)).catch(V=>Rt(V,Lt,Y))}const Pe=Lt=>i.go(Lt);let Ue;const Oe=new Set,ve={currentRoute:d,listening:!0,addRoute:T,removeRoute:I,clearRoutes:t.clearRoutes,hasRoute:G,getRoutes:z,resolve:W,options:e,push:gt,replace:xt,go:Pe,back:()=>Pe(-1),forward:()=>Pe(1),beforeEach:o.add,beforeResolve:u.add,afterEach:f.add,onError:jt.add,isReady:tn,install(Lt){const Y=this;Lt.component("RouterLink",vf),Lt.component("RouterView",zy),Lt.config.globalProperties.$router=Y,Object.defineProperty(Lt.config.globalProperties,"$route",{enumerable:!0,get:()=>Qs(d)}),Ju&&!Ue&&d.value===ea&&(Ue=!0,gt(i.location).catch(zt=>{}));const $={};for(const zt in ea)Object.defineProperty($,zt,{get:()=>d.value[zt],enumerable:!0});Lt.provide(dp,Y),Lt.provide(Fy,z0($)),Lt.provide(pg,d);const J=Lt.unmount;Oe.add(Lt),Lt.unmount=function(){Oe.delete(Lt),Oe.size<1&&(_=ea,Ae&&Ae(),Ae=null,d.value=ea,Ue=!1,Zt=!1),J()}}};function ce(Lt){return Lt.reduce((Y,$)=>Y.then(()=>Ot($)),Promise.resolve())}return ve}function fb(e,t){const n=[],r=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let u=0;u<o;u++){const f=t.matched[u];f&&(e.matched.find(_=>sl(_,f))?r.push(f):n.push(f));const d=e.matched[u];d&&(t.matched.find(_=>sl(_,d))||i.push(d))}return[n,r,i]}function pb(){return Es(dp)}function Gy(e,t){return function(){return e.apply(t,arguments)}}const{toString:db}=Object.prototype,{getPrototypeOf:Kg}=Object,gp=(e=>t=>{const n=db.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ns=e=>(e=e.toLowerCase(),t=>gp(t)===e),mp=e=>t=>typeof t===e,{isArray:Pl}=Array,Uc=mp("undefined");function gb(e){return e!==null&&!Uc(e)&&e.constructor!==null&&!Uc(e.constructor)&&Mi(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Uy=Ns("ArrayBuffer");function mb(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Uy(e.buffer),t}const _b=mp("string"),Mi=mp("function"),Vy=mp("number"),_p=e=>e!==null&&typeof e=="object",yb=e=>e===!0||e===!1,Cf=e=>{if(gp(e)!=="object")return!1;const t=Kg(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},vb=Ns("Date"),Cb=Ns("File"),Eb=Ns("Blob"),Lb=Ns("FileList"),xb=e=>_p(e)&&Mi(e.pipe),bb=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Mi(e.append)&&((t=gp(e))==="formdata"||t==="object"&&Mi(e.toString)&&e.toString()==="[object FormData]"))},wb=Ns("URLSearchParams"),[Sb,Mb,Pb,Ib]=["ReadableStream","Request","Response","Headers"].map(Ns),Tb=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function oh(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),Pl(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const o=n?Object.getOwnPropertyNames(e):Object.keys(e),u=o.length;let f;for(r=0;r<u;r++)f=o[r],t.call(null,e[f],f,e)}}function jy(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const Za=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,qy=e=>!Uc(e)&&e!==Za;function dg(){const{caseless:e}=qy(this)&&this||{},t={},n=(r,i)=>{const o=e&&jy(t,i)||i;Cf(t[o])&&Cf(r)?t[o]=dg(t[o],r):Cf(r)?t[o]=dg({},r):Pl(r)?t[o]=r.slice():t[o]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&oh(arguments[r],n);return t}const Ab=(e,t,n,{allOwnKeys:r}={})=>(oh(t,(i,o)=>{n&&Mi(i)?e[o]=Gy(i,n):e[o]=i},{allOwnKeys:r}),e),kb=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Db=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Nb=(e,t,n,r)=>{let i,o,u;const f={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)u=i[o],(!r||r(u,e,t))&&!f[u]&&(t[u]=e[u],f[u]=!0);e=n!==!1&&Kg(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Ob=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},Rb=e=>{if(!e)return null;if(Pl(e))return e;let t=e.length;if(!Vy(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Bb=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Kg(Uint8Array)),Fb=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=r.next())&&!i.done;){const o=i.value;t.call(e,o[0],o[1])}},zb=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},Gb=Ns("HTMLFormElement"),Ub=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),C_=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Vb=Ns("RegExp"),Hy=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};oh(n,(i,o)=>{let u;(u=t(i,o,e))!==!1&&(r[o]=u||i)}),Object.defineProperties(e,r)},jb=e=>{Hy(e,(t,n)=>{if(Mi(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Mi(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},qb=(e,t)=>{const n={},r=i=>{i.forEach(o=>{n[o]=!0})};return Pl(e)?r(e):r(String(e).split(t)),n},Hb=()=>{},Zb=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,Ud="abcdefghijklmnopqrstuvwxyz",E_="0123456789",Zy={DIGIT:E_,ALPHA:Ud,ALPHA_DIGIT:Ud+Ud.toUpperCase()+E_},Kb=(e=16,t=Zy.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function Xb(e){return!!(e&&Mi(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Wb=e=>{const t=new Array(10),n=(r,i)=>{if(_p(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[i]=r;const o=Pl(r)?[]:{};return oh(r,(u,f)=>{const d=n(u,i+1);!Uc(d)&&(o[f]=d)}),t[i]=void 0,o}}return r};return n(e,0)},Yb=Ns("AsyncFunction"),Jb=e=>e&&(_p(e)||Mi(e))&&Mi(e.then)&&Mi(e.catch),Ky=((e,t)=>e?setImmediate:t?((n,r)=>(Za.addEventListener("message",({source:i,data:o})=>{i===Za&&o===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Za.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Mi(Za.postMessage)),$b=typeof queueMicrotask<"u"?queueMicrotask.bind(Za):typeof process<"u"&&process.nextTick||Ky,Ct={isArray:Pl,isArrayBuffer:Uy,isBuffer:gb,isFormData:bb,isArrayBufferView:mb,isString:_b,isNumber:Vy,isBoolean:yb,isObject:_p,isPlainObject:Cf,isReadableStream:Sb,isRequest:Mb,isResponse:Pb,isHeaders:Ib,isUndefined:Uc,isDate:vb,isFile:Cb,isBlob:Eb,isRegExp:Vb,isFunction:Mi,isStream:xb,isURLSearchParams:wb,isTypedArray:Bb,isFileList:Lb,forEach:oh,merge:dg,extend:Ab,trim:Tb,stripBOM:kb,inherits:Db,toFlatObject:Nb,kindOf:gp,kindOfTest:Ns,endsWith:Ob,toArray:Rb,forEachEntry:Fb,matchAll:zb,isHTMLForm:Gb,hasOwnProperty:C_,hasOwnProp:C_,reduceDescriptors:Hy,freezeMethods:jb,toObjectSet:qb,toCamelCase:Ub,noop:Hb,toFiniteNumber:Zb,findKey:jy,global:Za,isContextDefined:qy,ALPHABET:Zy,generateString:Kb,isSpecCompliantForm:Xb,toJSONObject:Wb,isAsyncFn:Yb,isThenable:Jb,setImmediate:Ky,asap:$b};function Se(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Ct.inherits(Se,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ct.toJSONObject(this.config),code:this.code,status:this.status}}});const Xy=Se.prototype,Wy={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Wy[e]={value:e}});Object.defineProperties(Se,Wy);Object.defineProperty(Xy,"isAxiosError",{value:!0});Se.from=(e,t,n,r,i,o)=>{const u=Object.create(Xy);return Ct.toFlatObject(e,u,function(d){return d!==Error.prototype},f=>f!=="isAxiosError"),Se.call(u,e.message,t,n,r,i),u.cause=e,u.name=e.name,o&&Object.assign(u,o),u};const Qb=null;function gg(e){return Ct.isPlainObject(e)||Ct.isArray(e)}function Yy(e){return Ct.endsWith(e,"[]")?e.slice(0,-2):e}function L_(e,t,n){return e?e.concat(t).map(function(i,o){return i=Yy(i),!n&&o?"["+i+"]":i}).join(n?".":""):t}function t1(e){return Ct.isArray(e)&&!e.some(gg)}const e1=Ct.toFlatObject(Ct,{},null,function(t){return/^is[A-Z]/.test(t)});function yp(e,t,n){if(!Ct.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Ct.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(z,G){return!Ct.isUndefined(G[z])});const r=n.metaTokens,i=n.visitor||y,o=n.dots,u=n.indexes,d=(n.Blob||typeof Blob<"u"&&Blob)&&Ct.isSpecCompliantForm(t);if(!Ct.isFunction(i))throw new TypeError("visitor must be a function");function _(I){if(I===null)return"";if(Ct.isDate(I))return I.toISOString();if(!d&&Ct.isBlob(I))throw new Se("Blob is not supported. Use a Buffer instead.");return Ct.isArrayBuffer(I)||Ct.isTypedArray(I)?d&&typeof Blob=="function"?new Blob([I]):Buffer.from(I):I}function y(I,z,G){let W=I;if(I&&!G&&typeof I=="object"){if(Ct.endsWith(z,"{}"))z=r?z:z.slice(0,-2),I=JSON.stringify(I);else if(Ct.isArray(I)&&t1(I)||(Ct.isFileList(I)||Ct.endsWith(z,"[]"))&&(W=Ct.toArray(I)))return z=Yy(z),W.forEach(function(rt,gt){!(Ct.isUndefined(rt)||rt===null)&&t.append(u===!0?L_([z],gt,o):u===null?z:z+"[]",_(rt))}),!1}return gg(I)?!0:(t.append(L_(G,z,o),_(I)),!1)}const E=[],S=Object.assign(e1,{defaultVisitor:y,convertValue:_,isVisitable:gg});function T(I,z){if(!Ct.isUndefined(I)){if(E.indexOf(I)!==-1)throw Error("Circular reference detected in "+z.join("."));E.push(I),Ct.forEach(I,function(W,Q){(!(Ct.isUndefined(W)||W===null)&&i.call(t,W,Ct.isString(Q)?Q.trim():Q,z,S))===!0&&T(W,z?z.concat(Q):[Q])}),E.pop()}}if(!Ct.isObject(e))throw new TypeError("data must be an object");return T(e),t}function x_(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Xg(e,t){this._pairs=[],e&&yp(e,this,t)}const Jy=Xg.prototype;Jy.append=function(t,n){this._pairs.push([t,n])};Jy.toString=function(t){const n=t?function(r){return t.call(this,r,x_)}:x_;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function n1(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function $y(e,t,n){if(!t)return e;const r=n&&n.encode||n1;Ct.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let o;if(i?o=i(t,n):o=Ct.isURLSearchParams(t)?t.toString():new Xg(t,n).toString(r),o){const u=e.indexOf("#");u!==-1&&(e=e.slice(0,u)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class b_{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Ct.forEach(this.handlers,function(r){r!==null&&t(r)})}}const Qy={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},r1=typeof URLSearchParams<"u"?URLSearchParams:Xg,i1=typeof FormData<"u"?FormData:null,s1=typeof Blob<"u"?Blob:null,o1={isBrowser:!0,classes:{URLSearchParams:r1,FormData:i1,Blob:s1},protocols:["http","https","file","blob","url","data"]},Wg=typeof window<"u"&&typeof document<"u",mg=typeof navigator=="object"&&navigator||void 0,a1=Wg&&(!mg||["ReactNative","NativeScript","NS"].indexOf(mg.product)<0),u1=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",l1=Wg&&window.location.href||"http://localhost",c1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Wg,hasStandardBrowserEnv:a1,hasStandardBrowserWebWorkerEnv:u1,navigator:mg,origin:l1},Symbol.toStringTag,{value:"Module"})),Gr={...c1,...o1};function h1(e,t){return yp(e,new Gr.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,o){return Gr.isNode&&Ct.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function f1(e){return Ct.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function p1(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}function tv(e){function t(n,r,i,o){let u=n[o++];if(u==="__proto__")return!0;const f=Number.isFinite(+u),d=o>=n.length;return u=!u&&Ct.isArray(i)?i.length:u,d?(Ct.hasOwnProp(i,u)?i[u]=[i[u],r]:i[u]=r,!f):((!i[u]||!Ct.isObject(i[u]))&&(i[u]=[]),t(n,r,i[u],o)&&Ct.isArray(i[u])&&(i[u]=p1(i[u])),!f)}if(Ct.isFormData(e)&&Ct.isFunction(e.entries)){const n={};return Ct.forEachEntry(e,(r,i)=>{t(f1(r),i,n,0)}),n}return null}function d1(e,t,n){if(Ct.isString(e))try{return(t||JSON.parse)(e),Ct.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const ah={transitional:Qy,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,o=Ct.isObject(t);if(o&&Ct.isHTMLForm(t)&&(t=new FormData(t)),Ct.isFormData(t))return i?JSON.stringify(tv(t)):t;if(Ct.isArrayBuffer(t)||Ct.isBuffer(t)||Ct.isStream(t)||Ct.isFile(t)||Ct.isBlob(t)||Ct.isReadableStream(t))return t;if(Ct.isArrayBufferView(t))return t.buffer;if(Ct.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let f;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return h1(t,this.formSerializer).toString();if((f=Ct.isFileList(t))||r.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return yp(f?{"files[]":t}:t,d&&new d,this.formSerializer)}}return o||i?(n.setContentType("application/json",!1),d1(t)):t}],transformResponse:[function(t){const n=this.transitional||ah.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Ct.isResponse(t)||Ct.isReadableStream(t))return t;if(t&&Ct.isString(t)&&(r&&!this.responseType||i)){const u=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(f){if(u)throw f.name==="SyntaxError"?Se.from(f,Se.ERR_BAD_RESPONSE,this,null,this.response):f}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Gr.classes.FormData,Blob:Gr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ct.forEach(["delete","get","head","post","put","patch"],e=>{ah.headers[e]={}});const g1=Ct.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),m1=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(u){i=u.indexOf(":"),n=u.substring(0,i).trim().toLowerCase(),r=u.substring(i+1).trim(),!(!n||t[n]&&g1[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},w_=Symbol("internals");function _c(e){return e&&String(e).trim().toLowerCase()}function Ef(e){return e===!1||e==null?e:Ct.isArray(e)?e.map(Ef):String(e)}function _1(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const y1=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Vd(e,t,n,r,i){if(Ct.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!Ct.isString(t)){if(Ct.isString(r))return t.indexOf(r)!==-1;if(Ct.isRegExp(r))return r.test(t)}}function v1(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function C1(e,t){const n=Ct.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,o,u){return this[r].call(this,t,i,o,u)},configurable:!0})})}let fi=class{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function o(f,d,_){const y=_c(d);if(!y)throw new Error("header name must be a non-empty string");const E=Ct.findKey(i,y);(!E||i[E]===void 0||_===!0||_===void 0&&i[E]!==!1)&&(i[E||d]=Ef(f))}const u=(f,d)=>Ct.forEach(f,(_,y)=>o(_,y,d));if(Ct.isPlainObject(t)||t instanceof this.constructor)u(t,n);else if(Ct.isString(t)&&(t=t.trim())&&!y1(t))u(m1(t),n);else if(Ct.isHeaders(t))for(const[f,d]of t.entries())o(d,f,r);else t!=null&&o(n,t,r);return this}get(t,n){if(t=_c(t),t){const r=Ct.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return _1(i);if(Ct.isFunction(n))return n.call(this,i,r);if(Ct.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=_c(t),t){const r=Ct.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Vd(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function o(u){if(u=_c(u),u){const f=Ct.findKey(r,u);f&&(!n||Vd(r,r[f],f,n))&&(delete r[f],i=!0)}}return Ct.isArray(t)?t.forEach(o):o(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const o=n[r];(!t||Vd(this,this[o],o,t,!0))&&(delete this[o],i=!0)}return i}normalize(t){const n=this,r={};return Ct.forEach(this,(i,o)=>{const u=Ct.findKey(r,o);if(u){n[u]=Ef(i),delete n[o];return}const f=t?v1(o):String(o).trim();f!==o&&delete n[o],n[f]=Ef(i),r[f]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Ct.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&Ct.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[w_]=this[w_]={accessors:{}}).accessors,i=this.prototype;function o(u){const f=_c(u);r[f]||(C1(i,u),r[f]=!0)}return Ct.isArray(t)?t.forEach(o):o(t),this}};fi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ct.reduceDescriptors(fi.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});Ct.freezeMethods(fi);function jd(e,t){const n=this||ah,r=t||n,i=fi.from(r.headers);let o=r.data;return Ct.forEach(e,function(f){o=f.call(n,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function ev(e){return!!(e&&e.__CANCEL__)}function Il(e,t,n){Se.call(this,e??"canceled",Se.ERR_CANCELED,t,n),this.name="CanceledError"}Ct.inherits(Il,Se,{__CANCEL__:!0});function nv(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new Se("Request failed with status code "+n.status,[Se.ERR_BAD_REQUEST,Se.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function E1(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function L1(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,o=0,u;return t=t!==void 0?t:1e3,function(d){const _=Date.now(),y=r[o];u||(u=_),n[i]=d,r[i]=_;let E=o,S=0;for(;E!==i;)S+=n[E++],E=E%e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),_-u<t)return;const T=y&&_-y;return T?Math.round(S*1e3/T):void 0}}function x1(e,t){let n=0,r=1e3/t,i,o;const u=(_,y=Date.now())=>{n=y,i=null,o&&(clearTimeout(o),o=null),e.apply(null,_)};return[(..._)=>{const y=Date.now(),E=y-n;E>=r?u(_,y):(i=_,o||(o=setTimeout(()=>{o=null,u(i)},r-E)))},()=>i&&u(i)]}const zf=(e,t,n=3)=>{let r=0;const i=L1(50,250);return x1(o=>{const u=o.loaded,f=o.lengthComputable?o.total:void 0,d=u-r,_=i(d),y=u<=f;r=u;const E={loaded:u,total:f,progress:f?u/f:void 0,bytes:d,rate:_||void 0,estimated:_&&f&&y?(f-u)/_:void 0,event:o,lengthComputable:f!=null,[t?"download":"upload"]:!0};e(E)},n)},S_=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},M_=e=>(...t)=>Ct.asap(()=>e(...t)),b1=Gr.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Gr.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Gr.origin),Gr.navigator&&/(msie|trident)/i.test(Gr.navigator.userAgent)):()=>!0,w1=Gr.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const u=[e+"="+encodeURIComponent(t)];Ct.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),Ct.isString(r)&&u.push("path="+r),Ct.isString(i)&&u.push("domain="+i),o===!0&&u.push("secure"),document.cookie=u.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function S1(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function M1(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function rv(e,t){return e&&!S1(t)?M1(e,t):t}const P_=e=>e instanceof fi?{...e}:e;function $a(e,t){t=t||{};const n={};function r(_,y,E,S){return Ct.isPlainObject(_)&&Ct.isPlainObject(y)?Ct.merge.call({caseless:S},_,y):Ct.isPlainObject(y)?Ct.merge({},y):Ct.isArray(y)?y.slice():y}function i(_,y,E,S){if(Ct.isUndefined(y)){if(!Ct.isUndefined(_))return r(void 0,_,E,S)}else return r(_,y,E,S)}function o(_,y){if(!Ct.isUndefined(y))return r(void 0,y)}function u(_,y){if(Ct.isUndefined(y)){if(!Ct.isUndefined(_))return r(void 0,_)}else return r(void 0,y)}function f(_,y,E){if(E in t)return r(_,y);if(E in e)return r(void 0,_)}const d={url:o,method:o,data:o,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:f,headers:(_,y,E)=>i(P_(_),P_(y),E,!0)};return Ct.forEach(Object.keys(Object.assign({},e,t)),function(y){const E=d[y]||i,S=E(e[y],t[y],y);Ct.isUndefined(S)&&E!==f||(n[y]=S)}),n}const iv=e=>{const t=$a({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:o,headers:u,auth:f}=t;t.headers=u=fi.from(u),t.url=$y(rv(t.baseURL,t.url),e.params,e.paramsSerializer),f&&u.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):"")));let d;if(Ct.isFormData(n)){if(Gr.hasStandardBrowserEnv||Gr.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if((d=u.getContentType())!==!1){const[_,...y]=d?d.split(";").map(E=>E.trim()).filter(Boolean):[];u.setContentType([_||"multipart/form-data",...y].join("; "))}}if(Gr.hasStandardBrowserEnv&&(r&&Ct.isFunction(r)&&(r=r(t)),r||r!==!1&&b1(t.url))){const _=i&&o&&w1.read(o);_&&u.set(i,_)}return t},P1=typeof XMLHttpRequest<"u",I1=P1&&function(e){return new Promise(function(n,r){const i=iv(e);let o=i.data;const u=fi.from(i.headers).normalize();let{responseType:f,onUploadProgress:d,onDownloadProgress:_}=i,y,E,S,T,I;function z(){T&&T(),I&&I(),i.cancelToken&&i.cancelToken.unsubscribe(y),i.signal&&i.signal.removeEventListener("abort",y)}let G=new XMLHttpRequest;G.open(i.method.toUpperCase(),i.url,!0),G.timeout=i.timeout;function W(){if(!G)return;const rt=fi.from("getAllResponseHeaders"in G&&G.getAllResponseHeaders()),xt={data:!f||f==="text"||f==="json"?G.responseText:G.response,status:G.status,statusText:G.statusText,headers:rt,config:e,request:G};nv(function(Dt){n(Dt),z()},function(Dt){r(Dt),z()},xt),G=null}"onloadend"in G?G.onloadend=W:G.onreadystatechange=function(){!G||G.readyState!==4||G.status===0&&!(G.responseURL&&G.responseURL.indexOf("file:")===0)||setTimeout(W)},G.onabort=function(){G&&(r(new Se("Request aborted",Se.ECONNABORTED,e,G)),G=null)},G.onerror=function(){r(new Se("Network Error",Se.ERR_NETWORK,e,G)),G=null},G.ontimeout=function(){let gt=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const xt=i.transitional||Qy;i.timeoutErrorMessage&&(gt=i.timeoutErrorMessage),r(new Se(gt,xt.clarifyTimeoutError?Se.ETIMEDOUT:Se.ECONNABORTED,e,G)),G=null},o===void 0&&u.setContentType(null),"setRequestHeader"in G&&Ct.forEach(u.toJSON(),function(gt,xt){G.setRequestHeader(xt,gt)}),Ct.isUndefined(i.withCredentials)||(G.withCredentials=!!i.withCredentials),f&&f!=="json"&&(G.responseType=i.responseType),_&&([S,I]=zf(_,!0),G.addEventListener("progress",S)),d&&G.upload&&([E,T]=zf(d),G.upload.addEventListener("progress",E),G.upload.addEventListener("loadend",T)),(i.cancelToken||i.signal)&&(y=rt=>{G&&(r(!rt||rt.type?new Il(null,e,G):rt),G.abort(),G=null)},i.cancelToken&&i.cancelToken.subscribe(y),i.signal&&(i.signal.aborted?y():i.signal.addEventListener("abort",y)));const Q=E1(i.url);if(Q&&Gr.protocols.indexOf(Q)===-1){r(new Se("Unsupported protocol "+Q+":",Se.ERR_BAD_REQUEST,e));return}G.send(o||null)})},T1=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,i;const o=function(_){if(!i){i=!0,f();const y=_ instanceof Error?_:this.reason;r.abort(y instanceof Se?y:new Il(y instanceof Error?y.message:y))}};let u=t&&setTimeout(()=>{u=null,o(new Se(`timeout ${t} of ms exceeded`,Se.ETIMEDOUT))},t);const f=()=>{e&&(u&&clearTimeout(u),u=null,e.forEach(_=>{_.unsubscribe?_.unsubscribe(o):_.removeEventListener("abort",o)}),e=null)};e.forEach(_=>_.addEventListener("abort",o));const{signal:d}=r;return d.unsubscribe=()=>Ct.asap(f),d}},A1=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},k1=async function*(e,t){for await(const n of D1(e))yield*A1(n,t)},D1=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},I_=(e,t,n,r)=>{const i=k1(e,t);let o=0,u,f=d=>{u||(u=!0,r&&r(d))};return new ReadableStream({async pull(d){try{const{done:_,value:y}=await i.next();if(_){f(),d.close();return}let E=y.byteLength;if(n){let S=o+=E;n(S)}d.enqueue(new Uint8Array(y))}catch(_){throw f(_),_}},cancel(d){return f(d),i.return()}},{highWaterMark:2})},vp=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",sv=vp&&typeof ReadableStream=="function",N1=vp&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),ov=(e,...t)=>{try{return!!e(...t)}catch{return!1}},O1=sv&&ov(()=>{let e=!1;const t=new Request(Gr.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),T_=64*1024,_g=sv&&ov(()=>Ct.isReadableStream(new Response("").body)),Gf={stream:_g&&(e=>e.body)};vp&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Gf[t]&&(Gf[t]=Ct.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new Se(`Response type '${t}' is not supported`,Se.ERR_NOT_SUPPORT,r)})})})(new Response);const R1=async e=>{if(e==null)return 0;if(Ct.isBlob(e))return e.size;if(Ct.isSpecCompliantForm(e))return(await new Request(Gr.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Ct.isArrayBufferView(e)||Ct.isArrayBuffer(e))return e.byteLength;if(Ct.isURLSearchParams(e)&&(e=e+""),Ct.isString(e))return(await N1(e)).byteLength},B1=async(e,t)=>{const n=Ct.toFiniteNumber(e.getContentLength());return n??R1(t)},F1=vp&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:o,timeout:u,onDownloadProgress:f,onUploadProgress:d,responseType:_,headers:y,withCredentials:E="same-origin",fetchOptions:S}=iv(e);_=_?(_+"").toLowerCase():"text";let T=T1([i,o&&o.toAbortSignal()],u),I;const z=T&&T.unsubscribe&&(()=>{T.unsubscribe()});let G;try{if(d&&O1&&n!=="get"&&n!=="head"&&(G=await B1(y,r))!==0){let xt=new Request(t,{method:"POST",body:r,duplex:"half"}),bt;if(Ct.isFormData(r)&&(bt=xt.headers.get("content-type"))&&y.setContentType(bt),xt.body){const[Dt,Nt]=S_(G,zf(M_(d)));r=I_(xt.body,T_,Dt,Nt)}}Ct.isString(E)||(E=E?"include":"omit");const W="credentials"in Request.prototype;I=new Request(t,{...S,signal:T,method:n.toUpperCase(),headers:y.normalize().toJSON(),body:r,duplex:"half",credentials:W?E:void 0});let Q=await fetch(I);const rt=_g&&(_==="stream"||_==="response");if(_g&&(f||rt&&z)){const xt={};["status","statusText","headers"].forEach(Ot=>{xt[Ot]=Q[Ot]});const bt=Ct.toFiniteNumber(Q.headers.get("content-length")),[Dt,Nt]=f&&S_(bt,zf(M_(f),!0))||[];Q=new Response(I_(Q.body,T_,Dt,()=>{Nt&&Nt(),z&&z()}),xt)}_=_||"text";let gt=await Gf[Ct.findKey(Gf,_)||"text"](Q,e);return!rt&&z&&z(),await new Promise((xt,bt)=>{nv(xt,bt,{data:gt,headers:fi.from(Q.headers),status:Q.status,statusText:Q.statusText,config:e,request:I})})}catch(W){throw z&&z(),W&&W.name==="TypeError"&&/fetch/i.test(W.message)?Object.assign(new Se("Network Error",Se.ERR_NETWORK,e,I),{cause:W.cause||W}):Se.from(W,W&&W.code,e,I)}}),yg={http:Qb,xhr:I1,fetch:F1};Ct.forEach(yg,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const A_=e=>`- ${e}`,z1=e=>Ct.isFunction(e)||e===null||e===!1,av={getAdapter:e=>{e=Ct.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){n=e[o];let u;if(r=n,!z1(n)&&(r=yg[(u=String(n)).toLowerCase()],r===void 0))throw new Se(`Unknown adapter '${u}'`);if(r)break;i[u||"#"+o]=r}if(!r){const o=Object.entries(i).map(([f,d])=>`adapter ${f} `+(d===!1?"is not supported by the environment":"is not available in the build"));let u=t?o.length>1?`since :
`+o.map(A_).join(`
`):" "+A_(o[0]):"as no adapter specified";throw new Se("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return r},adapters:yg};function qd(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Il(null,e)}function k_(e){return qd(e),e.headers=fi.from(e.headers),e.data=jd.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),av.getAdapter(e.adapter||ah.adapter)(e).then(function(r){return qd(e),r.data=jd.call(e,e.transformResponse,r),r.headers=fi.from(r.headers),r},function(r){return ev(r)||(qd(e),r&&r.response&&(r.response.data=jd.call(e,e.transformResponse,r.response),r.response.headers=fi.from(r.response.headers))),Promise.reject(r)})}const uv="1.7.9",Cp={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Cp[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const D_={};Cp.transitional=function(t,n,r){function i(o,u){return"[Axios v"+uv+"] Transitional option '"+o+"'"+u+(r?". "+r:"")}return(o,u,f)=>{if(t===!1)throw new Se(i(u," has been removed"+(n?" in "+n:"")),Se.ERR_DEPRECATED);return n&&!D_[u]&&(D_[u]=!0,console.warn(i(u," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,u,f):!0}};Cp.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function G1(e,t,n){if(typeof e!="object")throw new Se("options must be an object",Se.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],u=t[o];if(u){const f=e[o],d=f===void 0||u(f,o,e);if(d!==!0)throw new Se("option "+o+" must be "+d,Se.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Se("Unknown option "+o,Se.ERR_BAD_OPTION)}}const Lf={assertOptions:G1,validators:Cp},Hs=Lf.validators;let Wa=class{constructor(t){this.defaults=t,this.interceptors={request:new b_,response:new b_}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=$a(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:o}=n;r!==void 0&&Lf.assertOptions(r,{silentJSONParsing:Hs.transitional(Hs.boolean),forcedJSONParsing:Hs.transitional(Hs.boolean),clarifyTimeoutError:Hs.transitional(Hs.boolean)},!1),i!=null&&(Ct.isFunction(i)?n.paramsSerializer={serialize:i}:Lf.assertOptions(i,{encode:Hs.function,serialize:Hs.function},!0)),Lf.assertOptions(n,{baseUrl:Hs.spelling("baseURL"),withXsrfToken:Hs.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let u=o&&Ct.merge(o.common,o[n.method]);o&&Ct.forEach(["delete","get","head","post","put","patch","common"],I=>{delete o[I]}),n.headers=fi.concat(u,o);const f=[];let d=!0;this.interceptors.request.forEach(function(z){typeof z.runWhen=="function"&&z.runWhen(n)===!1||(d=d&&z.synchronous,f.unshift(z.fulfilled,z.rejected))});const _=[];this.interceptors.response.forEach(function(z){_.push(z.fulfilled,z.rejected)});let y,E=0,S;if(!d){const I=[k_.bind(this),void 0];for(I.unshift.apply(I,f),I.push.apply(I,_),S=I.length,y=Promise.resolve(n);E<S;)y=y.then(I[E++],I[E++]);return y}S=f.length;let T=n;for(E=0;E<S;){const I=f[E++],z=f[E++];try{T=I(T)}catch(G){z.call(this,G);break}}try{y=k_.call(this,T)}catch(I){return Promise.reject(I)}for(E=0,S=_.length;E<S;)y=y.then(_[E++],_[E++]);return y}getUri(t){t=$a(this.defaults,t);const n=rv(t.baseURL,t.url);return $y(n,t.params,t.paramsSerializer)}};Ct.forEach(["delete","get","head","options"],function(t){Wa.prototype[t]=function(n,r){return this.request($a(r||{},{method:t,url:n,data:(r||{}).data}))}});Ct.forEach(["post","put","patch"],function(t){function n(r){return function(o,u,f){return this.request($a(f||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:u}))}}Wa.prototype[t]=n(),Wa.prototype[t+"Form"]=n(!0)});let U1=class lv{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const u=new Promise(f=>{r.subscribe(f),o=f}).then(i);return u.cancel=function(){r.unsubscribe(o)},u},t(function(o,u,f){r.reason||(r.reason=new Il(o,u,f),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new lv(function(i){t=i}),cancel:t}}};function V1(e){return function(n){return e.apply(null,n)}}function j1(e){return Ct.isObject(e)&&e.isAxiosError===!0}const vg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(vg).forEach(([e,t])=>{vg[t]=e});function cv(e){const t=new Wa(e),n=Gy(Wa.prototype.request,t);return Ct.extend(n,Wa.prototype,t,{allOwnKeys:!0}),Ct.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return cv($a(e,i))},n}const Ze=cv(ah);Ze.Axios=Wa;Ze.CanceledError=Il;Ze.CancelToken=U1;Ze.isCancel=ev;Ze.VERSION=uv;Ze.toFormData=yp;Ze.AxiosError=Se;Ze.Cancel=Ze.CanceledError;Ze.all=function(t){return Promise.all(t)};Ze.spread=V1;Ze.isAxiosError=j1;Ze.mergeConfig=$a;Ze.AxiosHeaders=fi;Ze.formToJSON=e=>tv(Ct.isHTMLForm(e)?new FormData(e):e);Ze.getAdapter=av.getAdapter;Ze.HttpStatusCode=vg;Ze.default=Ze;const{Axios:UM,AxiosError:VM,CanceledError:jM,isCancel:qM,CancelToken:HM,VERSION:ZM,all:KM,Cancel:XM,isAxiosError:WM,spread:YM,toFormData:JM,AxiosHeaders:$M,HttpStatusCode:QM,formToJSON:tP,getAdapter:eP,mergeConfig:nP}=Ze,hv=wy("auth",{state:()=>({user:null,token:localStorage.getItem("token"),isAuthenticated:!1,mustChangePassword:!1}),getters:{isAdmin:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="admin"},isDealer:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="dealer"},isClient:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="client"},currentUser:e=>e.user,hasDealer:e=>{var t;return!!((t=e.user)!=null&&t.dealer)}},actions:{async login(e,t){try{const n=await Ze.post("/api/token/",{username:e,password:t}),{access:r,refresh:i}=n.data;return localStorage.setItem("token",r),localStorage.setItem("refresh_token",i),this.token=r,await this.fetchUserProfile(),this.isAuthenticated=!0,!0}catch(n){throw console.error("Login error:",n),n}},async checkAuth(){try{const e=localStorage.getItem("access_token");return e?(Ze.defaults.headers.common.Authorization=`Bearer ${e}`,await this.fetchUserProfile(),this.isAuthenticated=!0,!0):(this.isAuthenticated=!1,!1)}catch(e){throw this.isAuthenticated=!1,localStorage.removeItem("access_token"),e}},async fetchUserProfile(){try{const e=await Ze.get("/api/users/me/");this.user=e.data,this.mustChangePassword=e.data.must_change_password}catch(e){throw console.error("Error fetching user profile:",e),e}},async changePassword(e,t){try{const n=await Ze.post("/api/auth/change-password/",{old_password:e,new_password:t});return this.user={...this.user,must_change_password:!1},n.data}catch(n){throw n}},async logout(){localStorage.removeItem("token"),localStorage.removeItem("refresh_token"),this.user=null,this.token=null,this.isAuthenticated=!1},async refreshToken(){try{const e=localStorage.getItem("refresh_token");if(!e)throw new Error("No refresh token");const t=await Ze.post("/api/token/refresh/",{refresh:e}),{access:n}=t.data;return localStorage.setItem("token",n),this.token=n,n}catch(e){throw console.error("Error refreshing token:",e),await this.logout(),e}},async fetchConcessionnaires(){this.loading=!0;try{const e=await Ze.get("/api/utilisateurs/",{params:{role:"CONCESSIONNAIRE"}});this.concessionnaires=e.data}catch(e){throw this.error="Erreur lors de la récupération des concessionnaires",e}finally{this.loading=!1}},async setConcessionnaire(e,t){this.loading=!0;try{await Ze.patch(`/api/utilisateurs/${e}/`,{concessionnaire:t}),this.user&&this.user.id===e&&(this.user.dealer=t)}catch(n){throw this.error="Erreur lors de la mise à jour du concessionnaire",n}finally{this.loading=!1}},async createUser(e){this.loading=!0;try{return(await Ze.post("/api/utilisateurs/",e)).data}catch(t){throw this.error="Erreur lors de la création de l'utilisateur",t}finally{this.loading=!1}},async updateUserRole(e,t){this.loading=!0;try{const n=await Ze.patch(`/api/utilisateurs/${e}/`,{role:t});return this.user&&this.user.id===e&&(this.user.user_type=t),n.data}catch(n){throw this.error="Erreur lors de la mise à jour du rôle",n}finally{this.loading=!1}},checkAccess(e){return this.user?e.includes(this.user.user_type):!1}}});var To=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function q1(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var pv=q1,H1=typeof To=="object"&&To&&To.Object===Object&&To,Z1=H1,K1=Z1,X1=typeof self=="object"&&self&&self.Object===Object&&self,W1=K1||X1||Function("return this")(),dv=W1,Y1=dv,J1=function(){return Y1.Date.now()},$1=J1,Q1=/\s/;function tw(e){for(var t=e.length;t--&&Q1.test(e.charAt(t)););return t}var ew=tw,nw=ew,rw=/^\s+/;function iw(e){return e&&e.slice(0,nw(e)+1).replace(rw,"")}var sw=iw,ow=dv,aw=ow.Symbol,gv=aw,N_=gv,mv=Object.prototype,uw=mv.hasOwnProperty,lw=mv.toString,yc=N_?N_.toStringTag:void 0;function cw(e){var t=uw.call(e,yc),n=e[yc];try{e[yc]=void 0;var r=!0}catch{}var i=lw.call(e);return r&&(t?e[yc]=n:delete e[yc]),i}var hw=cw,fw=Object.prototype,pw=fw.toString;function dw(e){return pw.call(e)}var gw=dw,O_=gv,mw=hw,_w=gw,yw="[object Null]",vw="[object Undefined]",R_=O_?O_.toStringTag:void 0;function Cw(e){return e==null?e===void 0?vw:yw:R_&&R_ in Object(e)?mw(e):_w(e)}var Ew=Cw;function Lw(e){return e!=null&&typeof e=="object"}var xw=Lw,bw=Ew,ww=xw,Sw="[object Symbol]";function Mw(e){return typeof e=="symbol"||ww(e)&&bw(e)==Sw}var Pw=Mw,Iw=sw,B_=pv,Tw=Pw,F_=NaN,Aw=/^[-+]0x[0-9a-f]+$/i,kw=/^0b[01]+$/i,Dw=/^0o[0-7]+$/i,Nw=parseInt;function Ow(e){if(typeof e=="number")return e;if(Tw(e))return F_;if(B_(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=B_(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Iw(e);var n=kw.test(e);return n||Dw.test(e)?Nw(e.slice(2),n?2:8):Aw.test(e)?F_:+e}var Rw=Ow,Bw=pv,Hd=$1,z_=Rw,Fw="Expected a function",zw=Math.max,Gw=Math.min;function Uw(e,t,n){var r,i,o,u,f,d,_=0,y=!1,E=!1,S=!0;if(typeof e!="function")throw new TypeError(Fw);t=z_(t)||0,Bw(n)&&(y=!!n.leading,E="maxWait"in n,o=E?zw(z_(n.maxWait)||0,t):o,S="trailing"in n?!!n.trailing:S);function T(bt){var Dt=r,Nt=i;return r=i=void 0,_=bt,u=e.apply(Nt,Dt),u}function I(bt){return _=bt,f=setTimeout(W,t),y?T(bt):u}function z(bt){var Dt=bt-d,Nt=bt-_,Ot=t-Dt;return E?Gw(Ot,o-Nt):Ot}function G(bt){var Dt=bt-d,Nt=bt-_;return d===void 0||Dt>=t||Dt<0||E&&Nt>=o}function W(){var bt=Hd();if(G(bt))return Q(bt);f=setTimeout(W,z(bt))}function Q(bt){return f=void 0,S&&r?T(bt):(r=i=void 0,u)}function rt(){f!==void 0&&clearTimeout(f),_=0,r=d=i=f=void 0}function gt(){return f===void 0?u:Q(Hd())}function xt(){var bt=Hd(),Dt=G(bt);if(r=arguments,i=this,d=bt,Dt){if(f===void 0)return I(d);if(E)return clearTimeout(f),f=setTimeout(W,t),T(d)}return f===void 0&&(f=setTimeout(W,t)),u}return xt.cancel=rt,xt.flush=gt,xt}var Vw=Uw;const jw=fv(Vw),qw={class:"relative"},Hw={key:0,class:"absolute w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto z-[1001]"},Zw=["onClick"],Kw=du({__name:"SearchBar",emits:["select-location"],setup(e,{emit:t}){const n=zn(""),r=zn([]),i=t,o=jw(async d=>{if(d.length<3){r.value=[];return}try{const y=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(d)}`)).json();r.value=y}catch(_){console.error("Erreur lors de la recherche d'adresse:",_),r.value=[]}},300);function u(){o(n.value)}function f(d){n.value=d.display_name,r.value=[],i("select-location",{lat:parseFloat(d.lat),lng:parseFloat(d.lon)})}return(d,_)=>(Ee(),Ie("div",qw,[Cc(vt("input",{"onUpdate:modelValue":_[0]||(_[0]=y=>n.value=y),onInput:u,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[yf,n.value]]),r.value.length>0?(Ee(),Ie("div",Hw,[(Ee(!0),Ie(sn,null,vs(r.value,y=>(Ee(),Ie("div",{key:y.place_id,onClick:E=>f(y),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},_e(y.display_name),9,Zw))),128))])):Zn("",!0)]))}}),Yg=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},Xw=Yg(Kw,[["__scopeId","data-v-4cda7c14"]]),Ww={class:"h-full"},Yw={key:0,class:"bg-white shadow-sm fixed top-0 left-0 right-0 z-50"},Jw={class:"mx-auto px-4 sm:px-6 lg:px-8"},$w={class:"flex h-16 items-center justify-between"},Qw={class:"flex items-center space-x-8"},t4={class:"hidden md:flex space-x-6"},e4={class:"flex-1 max-w-2xl mx-8"},n4={class:"flex items-center space-x-4"},r4={class:"relative"},i4={class:"flex flex-col items-end"},s4={class:"text-sm font-medium text-gray-700"},o4={class:"text-xs text-gray-500"},a4=["src"],u4={key:0,class:"absolute right-0 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},l4=du({__name:"App",setup(e){const t=pb(),n=hv(),r=zn(!1),i=mn(()=>{var I;return((I=n.user)==null?void 0:I.username)||""}),o=mn(()=>{var I;return((I=n.user)==null?void 0:I.user_type)||""}),u=mn(()=>{var I;return((I=n.user)==null?void 0:I.user_type)==="admin"}),f=zn(""),d=mn(()=>n.isAuthenticated),_=[{name:"Carte",to:"/"},{name:"Projets",to:"/projects"}],y=mn(()=>d.value?u.value?[..._,{name:"Utilisateurs",to:"/users"}]:_:[]),E=mn(()=>d.value?[{name:"Mon profil",to:"/profile"},{name:"Paramètres",to:"/settings"}]:[]);async function S(){try{await n.logout(),t.push("/login")}catch(I){console.error("Erreur lors de la déconnexion:",I)}}function T(I){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:I.lat,lng:I.lng,zoom:16}}))}return Vg(async()=>{if(localStorage.getItem("access_token"))try{await n.checkAuth()}catch{t.push("/login")}}),(I,z)=>(Ee(),Ie("div",Ww,[d.value?(Ee(),Ie("header",Yw,[vt("nav",Jw,[vt("div",$w,[vt("div",Qw,[pr(Qs(vf),{to:"/",class:"text-xl font-semibold text-primary-600"},{default:pf(()=>z[2]||(z[2]=[Tc(" IrrigationDesign ")])),_:1}),vt("div",t4,[(Ee(!0),Ie(sn,null,vs(y.value,G=>(Ee(),Nf(Qs(vf),{key:G.name,to:G.to,class:la(["text-sm font-medium transition-colors duration-200",[I.$route.path===G.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:pf(()=>[Tc(_e(G.name),1)]),_:2},1032,["to","class"]))),128))])]),vt("div",e4,[pr(Xw,{onSelectLocation:T})]),vt("div",n4,[z[3]||(z[3]=vt("button",{class:"p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},[vt("span",{class:"sr-only"},"Voir les notifications"),vt("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[vt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})])],-1)),vt("div",r4,[vt("button",{onClick:z[0]||(z[0]=G=>r.value=!r.value),class:"flex items-center space-x-3 focus:outline-none"},[vt("div",i4,[vt("span",s4,_e(i.value),1),vt("span",o4,_e(o.value),1)]),vt("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:f.value||"https://ui-avatars.com/api/?name="+encodeURIComponent(i.value),alt:""},null,8,a4)]),r.value?(Ee(),Ie("div",u4,[(Ee(!0),Ie(sn,null,vs(E.value,G=>(Ee(),Nf(Qs(vf),{key:G.name,to:G.to,class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:z[1]||(z[1]=W=>r.value=!1)},{default:pf(()=>[Tc(_e(G.name),1)]),_:2},1032,["to"]))),128)),vt("button",{onClick:S,class:"block w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-gray-50"}," Déconnexion ")])):Zn("",!0)])])])])])):Zn("",!0),vt("main",{class:la({"pt-16":d.value,"h-full":!d.value,"h-[calc(100%-4rem)]":d.value})},[pr(Qs(zy))],2)]))}}),c4=wy("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[]}),getters:{getPlanById:e=>t=>e.plans.find(n=>n.id===t),hasUnsavedChanges:e=>e.unsavedChanges,getCurrentPlanHistory:e=>e.planHistory},actions:{async fetchPlans(){var t,n;const e=hv();this.loading=!0;try{let r="/api/plans/";e.isConcessionnaire?r+="?concessionnaire="+((t=e.user)==null?void 0:t.id):e.isUtilisateur&&(r+="?utilisateur="+((n=e.user)==null?void 0:n.id));const i=await Ze.get(r);this.plans=i.data}catch(r){throw this.error="Erreur lors du chargement des plans",r}finally{this.loading=!1}},async createPlan(e){this.loading=!0;try{const t=await Ze.post("/api/plans/",e);return this.plans.push(t.data),t.data}catch(t){throw this.error="Erreur lors de la création du plan",t}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(e){var t,n;if(this.unsavedChanges){this.loading=!0;try{const r=await Ze.patch(`/api/plans/${e}/`,{...this.currentPlan,version:((t=this.currentPlan)==null?void 0:t.version)||1}),i=this.plans.findIndex(o=>o.id===e);return i!==-1&&(this.plans[i]=r.data),((n=this.currentPlan)==null?void 0:n.id)===e&&(this.currentPlan=r.data),this.unsavedChanges=!1,r.data}catch(r){throw this.error="Erreur lors de la sauvegarde du plan",r}finally{this.loading=!1}}},async fetchPlanHistory(e){this.loading=!0;try{const t=await Ze.get(`/api/plans/${e}/historique/`);return this.planHistory=t.data,t.data}catch(t){throw this.error="Erreur lors de la récupération de l'historique",t}finally{this.loading=!1}},async restorePlanVersion(e,t){var n;this.loading=!0;try{const r=await Ze.post(`/api/plans/${e}/restaurer/`,{version_id:t});((n=this.currentPlan)==null?void 0:n.id)===e&&(this.currentPlan=r.data);const i=this.plans.findIndex(o=>o.id===e);return i!==-1&&(this.plans[i]=r.data),r.data}catch(r){throw this.error="Erreur lors de la restauration de la version",r}finally{this.loading=!1}},setCurrentPlan(e){this.currentPlan=e,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.stopAutoSave()},markUnsavedChanges(){this.unsavedChanges=!0}}});var rf={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var G_;function _v(){return G_||(G_=1,function(e,t){(function(n,r){r(t)})(To,function(n){var r="1.9.4";function i(s){var c,g,v,w;for(g=1,v=arguments.length;g<v;g++){w=arguments[g];for(c in w)s[c]=w[c]}return s}var o=Object.create||function(){function s(){}return function(c){return s.prototype=c,new s}}();function u(s,c){var g=Array.prototype.slice;if(s.bind)return s.bind.apply(s,g.call(arguments,1));var v=g.call(arguments,2);return function(){return s.apply(c,v.length?v.concat(g.call(arguments)):arguments)}}var f=0;function d(s){return"_leaflet_id"in s||(s._leaflet_id=++f),s._leaflet_id}function _(s,c,g){var v,w,k,H;return H=function(){v=!1,w&&(k.apply(g,w),w=!1)},k=function(){v?w=arguments:(s.apply(g,arguments),setTimeout(H,c),v=!0)},k}function y(s,c,g){var v=c[1],w=c[0],k=v-w;return s===v&&g?s:((s-w)%k+k)%k+w}function E(){return!1}function S(s,c){if(c===!1)return s;var g=Math.pow(10,c===void 0?6:c);return Math.round(s*g)/g}function T(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function I(s){return T(s).split(/\s+/)}function z(s,c){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var g in c)s.options[g]=c[g];return s.options}function G(s,c,g){var v=[];for(var w in s)v.push(encodeURIComponent(g?w.toUpperCase():w)+"="+encodeURIComponent(s[w]));return(!c||c.indexOf("?")===-1?"?":"&")+v.join("&")}var W=/\{ *([\w_ -]+) *\}/g;function Q(s,c){return s.replace(W,function(g,v){var w=c[v];if(w===void 0)throw new Error("No value provided for variable "+g);return typeof w=="function"&&(w=w(c)),w})}var rt=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function gt(s,c){for(var g=0;g<s.length;g++)if(s[g]===c)return g;return-1}var xt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function bt(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var Dt=0;function Nt(s){var c=+new Date,g=Math.max(0,16-(c-Dt));return Dt=c+g,window.setTimeout(s,g)}var Ot=window.requestAnimationFrame||bt("RequestAnimationFrame")||Nt,te=window.cancelAnimationFrame||bt("CancelAnimationFrame")||bt("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function Ht(s,c,g){if(g&&Ot===Nt)s.call(c);else return Ot.call(window,u(s,c))}function ee(s){s&&te.call(window,s)}var Ae={__proto__:null,extend:i,create:o,bind:u,get lastId(){return f},stamp:d,throttle:_,wrapNum:y,falseFn:E,formatNum:S,trim:T,splitWords:I,setOptions:z,getParamString:G,template:Q,isArray:rt,indexOf:gt,emptyImageUrl:xt,requestFn:Ot,cancelFn:te,requestAnimFrame:Ht,cancelAnimFrame:ee};function Bt(){}Bt.extend=function(s){var c=function(){z(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},g=c.__super__=this.prototype,v=o(g);v.constructor=c,c.prototype=v;for(var w in this)Object.prototype.hasOwnProperty.call(this,w)&&w!=="prototype"&&w!=="__super__"&&(c[w]=this[w]);return s.statics&&i(c,s.statics),s.includes&&(le(s.includes),i.apply(null,[v].concat(s.includes))),i(v,s),delete v.statics,delete v.includes,v.options&&(v.options=g.options?o(g.options):{},i(v.options,s.options)),v._initHooks=[],v.callInitHooks=function(){if(!this._initHooksCalled){g.callInitHooks&&g.callInitHooks.call(this),this._initHooksCalled=!0;for(var k=0,H=v._initHooks.length;k<H;k++)v._initHooks[k].call(this)}},c},Bt.include=function(s){var c=this.prototype.options;return i(this.prototype,s),s.options&&(this.prototype.options=c,this.mergeOptions(s.options)),this},Bt.mergeOptions=function(s){return i(this.prototype.options,s),this},Bt.addInitHook=function(s){var c=Array.prototype.slice.call(arguments,1),g=typeof s=="function"?s:function(){this[s].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(g),this};function le(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=rt(s)?s:[s];for(var c=0;c<s.length;c++)s[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var jt={on:function(s,c,g){if(typeof s=="object")for(var v in s)this._on(v,s[v],c);else{s=I(s);for(var w=0,k=s.length;w<k;w++)this._on(s[w],c,g)}return this},off:function(s,c,g){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var v in s)this._off(v,s[v],c);else{s=I(s);for(var w=arguments.length===1,k=0,H=s.length;k<H;k++)w?this._off(s[k]):this._off(s[k],c,g)}return this},_on:function(s,c,g,v){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(s,c,g)===!1){g===this&&(g=void 0);var w={fn:c,ctx:g};v&&(w.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(w)}},_off:function(s,c,g){var v,w,k;if(this._events&&(v=this._events[s],!!v)){if(arguments.length===1){if(this._firingCount)for(w=0,k=v.length;w<k;w++)v[w].fn=E;delete this._events[s];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var H=this._listens(s,c,g);if(H!==!1){var ot=v[H];this._firingCount&&(ot.fn=E,this._events[s]=v=v.slice()),v.splice(H,1)}}},fire:function(s,c,g){if(!this.listens(s,g))return this;var v=i({},c,{type:s,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var w=this._events[s];if(w){this._firingCount=this._firingCount+1||1;for(var k=0,H=w.length;k<H;k++){var ot=w[k],mt=ot.fn;ot.once&&this.off(s,mt,ot.ctx),mt.call(ot.ctx||this,v)}this._firingCount--}}return g&&this._propagateEvent(v),this},listens:function(s,c,g,v){typeof s!="string"&&console.warn('"string" type argument expected');var w=c;typeof c!="function"&&(v=!!c,w=void 0,g=void 0);var k=this._events&&this._events[s];if(k&&k.length&&this._listens(s,w,g)!==!1)return!0;if(v){for(var H in this._eventParents)if(this._eventParents[H].listens(s,c,g,v))return!0}return!1},_listens:function(s,c,g){if(!this._events)return!1;var v=this._events[s]||[];if(!c)return!!v.length;g===this&&(g=void 0);for(var w=0,k=v.length;w<k;w++)if(v[w].fn===c&&v[w].ctx===g)return w;return!1},once:function(s,c,g){if(typeof s=="object")for(var v in s)this._on(v,s[v],c,!0);else{s=I(s);for(var w=0,k=s.length;w<k;w++)this._on(s[w],c,g,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[d(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[d(s)],this},_propagateEvent:function(s){for(var c in this._eventParents)this._eventParents[c].fire(s.type,i({layer:s.target,propagatedFrom:s.target},s),!0)}};jt.addEventListener=jt.on,jt.removeEventListener=jt.clearAllEventListeners=jt.off,jt.addOneTimeEventListener=jt.once,jt.fireEvent=jt.fire,jt.hasEventListeners=jt.listens;var Zt=Bt.extend(jt);function Rt(s,c,g){this.x=g?Math.round(s):s,this.y=g?Math.round(c):c}var tn=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};Rt.prototype={clone:function(){return new Rt(this.x,this.y)},add:function(s){return this.clone()._add(Wt(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(Wt(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new Rt(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new Rt(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=tn(this.x),this.y=tn(this.y),this},distanceTo:function(s){s=Wt(s);var c=s.x-this.x,g=s.y-this.y;return Math.sqrt(c*c+g*g)},equals:function(s){return s=Wt(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=Wt(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+S(this.x)+", "+S(this.y)+")"}};function Wt(s,c,g){return s instanceof Rt?s:rt(s)?new Rt(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new Rt(s.x,s.y):new Rt(s,c,g)}function de(s,c){if(s)for(var g=c?[s,c]:s,v=0,w=g.length;v<w;v++)this.extend(g[v])}de.prototype={extend:function(s){var c,g;if(!s)return this;if(s instanceof Rt||typeof s[0]=="number"||"x"in s)c=g=Wt(s);else if(s=Pe(s),c=s.min,g=s.max,!c||!g)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=g.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(g.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(g.y,this.max.y)),this},getCenter:function(s){return Wt((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return Wt(this.min.x,this.max.y)},getTopRight:function(){return Wt(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var c,g;return typeof s[0]=="number"||s instanceof Rt?s=Wt(s):s=Pe(s),s instanceof de?(c=s.min,g=s.max):c=g=s,c.x>=this.min.x&&g.x<=this.max.x&&c.y>=this.min.y&&g.y<=this.max.y},intersects:function(s){s=Pe(s);var c=this.min,g=this.max,v=s.min,w=s.max,k=w.x>=c.x&&v.x<=g.x,H=w.y>=c.y&&v.y<=g.y;return k&&H},overlaps:function(s){s=Pe(s);var c=this.min,g=this.max,v=s.min,w=s.max,k=w.x>c.x&&v.x<g.x,H=w.y>c.y&&v.y<g.y;return k&&H},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var c=this.min,g=this.max,v=Math.abs(c.x-g.x)*s,w=Math.abs(c.y-g.y)*s;return Pe(Wt(c.x-v,c.y-w),Wt(g.x+v,g.y+w))},equals:function(s){return s?(s=Pe(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function Pe(s,c){return!s||s instanceof de?s:new de(s,c)}function Ue(s,c){if(s)for(var g=c?[s,c]:s,v=0,w=g.length;v<w;v++)this.extend(g[v])}Ue.prototype={extend:function(s){var c=this._southWest,g=this._northEast,v,w;if(s instanceof ve)v=s,w=s;else if(s instanceof Ue){if(v=s._southWest,w=s._northEast,!v||!w)return this}else return s?this.extend(ce(s)||Oe(s)):this;return!c&&!g?(this._southWest=new ve(v.lat,v.lng),this._northEast=new ve(w.lat,w.lng)):(c.lat=Math.min(v.lat,c.lat),c.lng=Math.min(v.lng,c.lng),g.lat=Math.max(w.lat,g.lat),g.lng=Math.max(w.lng,g.lng)),this},pad:function(s){var c=this._southWest,g=this._northEast,v=Math.abs(c.lat-g.lat)*s,w=Math.abs(c.lng-g.lng)*s;return new Ue(new ve(c.lat-v,c.lng-w),new ve(g.lat+v,g.lng+w))},getCenter:function(){return new ve((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ve(this.getNorth(),this.getWest())},getSouthEast:function(){return new ve(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof ve||"lat"in s?s=ce(s):s=Oe(s);var c=this._southWest,g=this._northEast,v,w;return s instanceof Ue?(v=s.getSouthWest(),w=s.getNorthEast()):v=w=s,v.lat>=c.lat&&w.lat<=g.lat&&v.lng>=c.lng&&w.lng<=g.lng},intersects:function(s){s=Oe(s);var c=this._southWest,g=this._northEast,v=s.getSouthWest(),w=s.getNorthEast(),k=w.lat>=c.lat&&v.lat<=g.lat,H=w.lng>=c.lng&&v.lng<=g.lng;return k&&H},overlaps:function(s){s=Oe(s);var c=this._southWest,g=this._northEast,v=s.getSouthWest(),w=s.getNorthEast(),k=w.lat>c.lat&&v.lat<g.lat,H=w.lng>c.lng&&v.lng<g.lng;return k&&H},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,c){return s?(s=Oe(s),this._southWest.equals(s.getSouthWest(),c)&&this._northEast.equals(s.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Oe(s,c){return s instanceof Ue?s:new Ue(s,c)}function ve(s,c,g){if(isNaN(s)||isNaN(c))throw new Error("Invalid LatLng object: ("+s+", "+c+")");this.lat=+s,this.lng=+c,g!==void 0&&(this.alt=+g)}ve.prototype={equals:function(s,c){if(!s)return!1;s=ce(s);var g=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return g<=(c===void 0?1e-9:c)},toString:function(s){return"LatLng("+S(this.lat,s)+", "+S(this.lng,s)+")"},distanceTo:function(s){return Y.distance(this,ce(s))},wrap:function(){return Y.wrapLatLng(this)},toBounds:function(s){var c=180*s/40075017,g=c/Math.cos(Math.PI/180*this.lat);return Oe([this.lat-c,this.lng-g],[this.lat+c,this.lng+g])},clone:function(){return new ve(this.lat,this.lng,this.alt)}};function ce(s,c,g){return s instanceof ve?s:rt(s)&&typeof s[0]!="object"?s.length===3?new ve(s[0],s[1],s[2]):s.length===2?new ve(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new ve(s.lat,"lng"in s?s.lng:s.lon,s.alt):c===void 0?null:new ve(s,c,g)}var Lt={latLngToPoint:function(s,c){var g=this.projection.project(s),v=this.scale(c);return this.transformation._transform(g,v)},pointToLatLng:function(s,c){var g=this.scale(c),v=this.transformation.untransform(s,g);return this.projection.unproject(v)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var c=this.projection.bounds,g=this.scale(s),v=this.transformation.transform(c.min,g),w=this.transformation.transform(c.max,g);return new de(v,w)},infinite:!1,wrapLatLng:function(s){var c=this.wrapLng?y(s.lng,this.wrapLng,!0):s.lng,g=this.wrapLat?y(s.lat,this.wrapLat,!0):s.lat,v=s.alt;return new ve(g,c,v)},wrapLatLngBounds:function(s){var c=s.getCenter(),g=this.wrapLatLng(c),v=c.lat-g.lat,w=c.lng-g.lng;if(v===0&&w===0)return s;var k=s.getSouthWest(),H=s.getNorthEast(),ot=new ve(k.lat-v,k.lng-w),mt=new ve(H.lat-v,H.lng-w);return new Ue(ot,mt)}},Y=i({},Lt,{wrapLng:[-180,180],R:6371e3,distance:function(s,c){var g=Math.PI/180,v=s.lat*g,w=c.lat*g,k=Math.sin((c.lat-s.lat)*g/2),H=Math.sin((c.lng-s.lng)*g/2),ot=k*k+Math.cos(v)*Math.cos(w)*H*H,mt=2*Math.atan2(Math.sqrt(ot),Math.sqrt(1-ot));return this.R*mt}}),$=6378137,J={R:$,MAX_LATITUDE:85.0511287798,project:function(s){var c=Math.PI/180,g=this.MAX_LATITUDE,v=Math.max(Math.min(g,s.lat),-g),w=Math.sin(v*c);return new Rt(this.R*s.lng*c,this.R*Math.log((1+w)/(1-w))/2)},unproject:function(s){var c=180/Math.PI;return new ve((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*c,s.x*c/this.R)},bounds:function(){var s=$*Math.PI;return new de([-s,-s],[s,s])}()};function zt(s,c,g,v){if(rt(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=c,this._c=g,this._d=v}zt.prototype={transform:function(s,c){return this._transform(s.clone(),c)},_transform:function(s,c){return c=c||1,s.x=c*(this._a*s.x+this._b),s.y=c*(this._c*s.y+this._d),s},untransform:function(s,c){return c=c||1,new Rt((s.x/c-this._b)/this._a,(s.y/c-this._d)/this._c)}};function F(s,c,g,v){return new zt(s,c,g,v)}var V=i({},Y,{code:"EPSG:3857",projection:J,transformation:function(){var s=.5/(Math.PI*J.R);return F(s,.5,-s,.5)}()}),et=i({},V,{code:"EPSG:900913"});function _t(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Et(s,c){var g="",v,w,k,H,ot,mt;for(v=0,k=s.length;v<k;v++){for(ot=s[v],w=0,H=ot.length;w<H;w++)mt=ot[w],g+=(w?"L":"M")+mt.x+" "+mt.y;g+=c?re.svg?"z":"x":""}return g||"M0 0"}var yt=document.documentElement.style,Pt="ActiveXObject"in window,At=Pt&&!document.addEventListener,It="msLaunchUri"in navigator&&!("documentMode"in document),wt=Ei("webkit"),Kt=Ei("android"),Ut=Ei("android 2")||Ei("android 3"),ne=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),he=Kt&&Ei("Google")&&ne<537&&!("AudioNode"in window),ke=!!window.opera,Je=!It&&Ei("chrome"),qe=Ei("gecko")&&!wt&&!ke&&!Pt,ur=!Je&&Ei("safari"),qn=Ei("phantom"),Kr="OTransition"in yt,er=navigator.platform.indexOf("Win")===0,Rs=Pt&&"transition"in yt,po="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ut,Rn="MozPerspective"in yt,Xr=!window.L_DISABLE_3D&&(Rs||po||Rn)&&!Kr&&!qn,zi=typeof orientation<"u"||Ei("mobile"),Np=zi&&wt,Op=zi&&po,Ol=!window.PointerEvent&&window.MSPointerEvent,gh=!!(window.PointerEvent||Ol),mh="ontouchstart"in window||!!window.TouchEvent,Rp=!window.L_NO_TOUCH&&(mh||gh),Bp=zi&&ke,_h=zi&&qe,yh=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Fp=function(){var s=!1;try{var c=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",E,c),window.removeEventListener("testPassiveEventSupport",E,c)}catch{}return s}(),zp=function(){return!!document.createElement("canvas").getContext}(),Rl=!!(document.createElementNS&&_t("svg").createSVGRect),vh=!!Rl&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Gp=!Rl&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var c=s.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),Up=navigator.platform.indexOf("Mac")===0,Vp=navigator.platform.indexOf("Linux")===0;function Ei(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var re={ie:Pt,ielt9:At,edge:It,webkit:wt,android:Kt,android23:Ut,androidStock:he,opera:ke,chrome:Je,gecko:qe,safari:ur,phantom:qn,opera12:Kr,win:er,ie3d:Rs,webkit3d:po,gecko3d:Rn,any3d:Xr,mobile:zi,mobileWebkit:Np,mobileWebkit3d:Op,msPointer:Ol,pointer:gh,touch:Rp,touchNative:mh,mobileOpera:Bp,mobileGecko:_h,retina:yh,passiveEvents:Fp,canvas:zp,svg:Rl,vml:Gp,inlineSvg:vh,mac:Up,linux:Vp},Ch=re.msPointer?"MSPointerDown":"pointerdown",Eh=re.msPointer?"MSPointerMove":"pointermove",Bl=re.msPointer?"MSPointerUp":"pointerup",Lh=re.msPointer?"MSPointerCancel":"pointercancel",Fl={touchstart:Ch,touchmove:Eh,touchend:Bl,touchcancel:Lh},xh={touchstart:Kp,touchmove:Eu,touchend:Eu,touchcancel:Eu},qo={},bh=!1;function jp(s,c,g){return c==="touchstart"&&zl(),xh[c]?(g=xh[c].bind(this,g),s.addEventListener(Fl[c],g,!1),g):(console.warn("wrong event specified:",c),E)}function qp(s,c,g){if(!Fl[c]){console.warn("wrong event specified:",c);return}s.removeEventListener(Fl[c],g,!1)}function Hp(s){qo[s.pointerId]=s}function Zp(s){qo[s.pointerId]&&(qo[s.pointerId]=s)}function Cu(s){delete qo[s.pointerId]}function zl(){bh||(document.addEventListener(Ch,Hp,!0),document.addEventListener(Eh,Zp,!0),document.addEventListener(Bl,Cu,!0),document.addEventListener(Lh,Cu,!0),bh=!0)}function Eu(s,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var g in qo)c.touches.push(qo[g]);c.changedTouches=[c],s(c)}}function Kp(s,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&nr(c),Eu(s,c)}function Xp(s){var c={},g,v;for(v in s)g=s[v],c[v]=g&&g.bind?g.bind(s):g;return s=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var Wp=200;function Yp(s,c){s.addEventListener("dblclick",c);var g=0,v;function w(k){if(k.detail!==1){v=k.detail;return}if(!(k.pointerType==="mouse"||k.sourceCapabilities&&!k.sourceCapabilities.firesTouchEvents)){var H=Ih(k);if(!(H.some(function(mt){return mt instanceof HTMLLabelElement&&mt.attributes.for})&&!H.some(function(mt){return mt instanceof HTMLInputElement||mt instanceof HTMLSelectElement}))){var ot=Date.now();ot-g<=Wp?(v++,v===2&&c(Xp(k))):v=1,g=ot}}}return s.addEventListener("click",w),{dblclick:c,simDblclick:w}}function Jp(s,c){s.removeEventListener("dblclick",c.dblclick),s.removeEventListener("click",c.simDblclick)}var Gl=xu(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Pa=xu(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),wh=Pa==="webkitTransition"||Pa==="OTransition"?Pa+"End":"transitionend";function Sh(s){return typeof s=="string"?document.getElementById(s):s}function Bs(s,c){var g=s.style[c]||s.currentStyle&&s.currentStyle[c];if((!g||g==="auto")&&document.defaultView){var v=document.defaultView.getComputedStyle(s,null);g=v?v[c]:null}return g==="auto"?null:g}function He(s,c,g){var v=document.createElement(s);return v.className=c||"",g&&g.appendChild(v),v}function dn(s){var c=s.parentNode;c&&c.removeChild(s)}function Ia(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Ho(s){var c=s.parentNode;c&&c.lastChild!==s&&c.appendChild(s)}function go(s){var c=s.parentNode;c&&c.firstChild!==s&&c.insertBefore(s,c.firstChild)}function Ul(s,c){if(s.classList!==void 0)return s.classList.contains(c);var g=Lu(s);return g.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(g)}function we(s,c){if(s.classList!==void 0)for(var g=I(c),v=0,w=g.length;v<w;v++)s.classList.add(g[v]);else if(!Ul(s,c)){var k=Lu(s);Vl(s,(k?k+" ":"")+c)}}function In(s,c){s.classList!==void 0?s.classList.remove(c):Vl(s,T((" "+Lu(s)+" ").replace(" "+c+" "," ")))}function Vl(s,c){s.className.baseVal===void 0?s.className=c:s.className.baseVal=c}function Lu(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function li(s,c){"opacity"in s.style?s.style.opacity=c:"filter"in s.style&&$p(s,c)}function $p(s,c){var g=!1,v="DXImageTransform.Microsoft.Alpha";try{g=s.filters.item(v)}catch{if(c===1)return}c=Math.round(c*100),g?(g.Enabled=c!==100,g.Opacity=c):s.style.filter+=" progid:"+v+"(opacity="+c+")"}function xu(s){for(var c=document.documentElement.style,g=0;g<s.length;g++)if(s[g]in c)return s[g];return!1}function mo(s,c,g){var v=c||new Rt(0,0);s.style[Gl]=(re.ie3d?"translate("+v.x+"px,"+v.y+"px)":"translate3d("+v.x+"px,"+v.y+"px,0)")+(g?" scale("+g+")":"")}function Bn(s,c){s._leaflet_pos=c,re.any3d?mo(s,c):(s.style.left=c.x+"px",s.style.top=c.y+"px")}function _o(s){return s._leaflet_pos||new Rt(0,0)}var Ta,Aa,jl;if("onselectstart"in document)Ta=function(){Le(window,"selectstart",nr)},Aa=function(){an(window,"selectstart",nr)};else{var Zo=xu(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ta=function(){if(Zo){var s=document.documentElement.style;jl=s[Zo],s[Zo]="none"}},Aa=function(){Zo&&(document.documentElement.style[Zo]=jl,jl=void 0)}}function ql(){Le(window,"dragstart",nr)}function Hl(){an(window,"dragstart",nr)}var bu,Zl;function Kl(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(wu(),bu=s,Zl=s.style.outlineStyle,s.style.outlineStyle="none",Le(window,"keydown",wu))}function wu(){bu&&(bu.style.outlineStyle=Zl,bu=void 0,Zl=void 0,an(window,"keydown",wu))}function Mh(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Xl(s){var c=s.getBoundingClientRect();return{x:c.width/s.offsetWidth||1,y:c.height/s.offsetHeight||1,boundingClientRect:c}}var Qp={__proto__:null,TRANSFORM:Gl,TRANSITION:Pa,TRANSITION_END:wh,get:Sh,getStyle:Bs,create:He,remove:dn,empty:Ia,toFront:Ho,toBack:go,hasClass:Ul,addClass:we,removeClass:In,setClass:Vl,getClass:Lu,setOpacity:li,testProp:xu,setTransform:mo,setPosition:Bn,getPosition:_o,get disableTextSelection(){return Ta},get enableTextSelection(){return Aa},disableImageDrag:ql,enableImageDrag:Hl,preventOutline:Kl,restoreOutline:wu,getSizedParentNode:Mh,getScale:Xl};function Le(s,c,g,v){if(c&&typeof c=="object")for(var w in c)Yl(s,w,c[w],g);else{c=I(c);for(var k=0,H=c.length;k<H;k++)Yl(s,c[k],g,v)}return this}var Gi="_leaflet_events";function an(s,c,g,v){if(arguments.length===1)Ph(s),delete s[Gi];else if(c&&typeof c=="object")for(var w in c)Fs(s,w,c[w],g);else if(c=I(c),arguments.length===2)Ph(s,function(ot){return gt(c,ot)!==-1});else for(var k=0,H=c.length;k<H;k++)Fs(s,c[k],g,v);return this}function Ph(s,c){for(var g in s[Gi]){var v=g.split(/\d/)[0];(!c||c(v))&&Fs(s,v,null,null,g)}}var Wl={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Yl(s,c,g,v){var w=c+d(g)+(v?"_"+d(v):"");if(s[Gi]&&s[Gi][w])return this;var k=function(ot){return g.call(v||s,ot||window.event)},H=k;!re.touchNative&&re.pointer&&c.indexOf("touch")===0?k=jp(s,c,k):re.touch&&c==="dblclick"?k=Yp(s,k):"addEventListener"in s?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?s.addEventListener(Wl[c]||c,k,re.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(k=function(ot){ot=ot||window.event,$l(s,ot)&&H(ot)},s.addEventListener(Wl[c],k,!1)):s.addEventListener(c,H,!1):s.attachEvent("on"+c,k),s[Gi]=s[Gi]||{},s[Gi][w]=k}function Fs(s,c,g,v,w){w=w||c+d(g)+(v?"_"+d(v):"");var k=s[Gi]&&s[Gi][w];if(!k)return this;!re.touchNative&&re.pointer&&c.indexOf("touch")===0?qp(s,c,k):re.touch&&c==="dblclick"?Jp(s,k):"removeEventListener"in s?s.removeEventListener(Wl[c]||c,k,!1):s.detachEvent("on"+c,k),s[Gi][w]=null}function yo(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Jl(s){return Yl(s,"wheel",yo),this}function ka(s){return Le(s,"mousedown touchstart dblclick contextmenu",yo),s._leaflet_disable_click=!0,this}function nr(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function vo(s){return nr(s),yo(s),this}function Ih(s){if(s.composedPath)return s.composedPath();for(var c=[],g=s.target;g;)c.push(g),g=g.parentNode;return c}function Th(s,c){if(!c)return new Rt(s.clientX,s.clientY);var g=Xl(c),v=g.boundingClientRect;return new Rt((s.clientX-v.left)/g.x-c.clientLeft,(s.clientY-v.top)/g.y-c.clientTop)}var td=re.linux&&re.chrome?window.devicePixelRatio:re.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ah(s){return re.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/td:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function $l(s,c){var g=c.relatedTarget;if(!g)return!0;try{for(;g&&g!==s;)g=g.parentNode}catch{return!1}return g!==s}var Su={__proto__:null,on:Le,off:an,stopPropagation:yo,disableScrollPropagation:Jl,disableClickPropagation:ka,preventDefault:nr,stop:vo,getPropagationPath:Ih,getMousePosition:Th,getWheelDelta:Ah,isExternalTarget:$l,addListener:Le,removeListener:an},kh=Zt.extend({run:function(s,c,g,v){this.stop(),this._el=s,this._inProgress=!0,this._duration=g||.25,this._easeOutPower=1/Math.max(v||.5,.2),this._startPos=_o(s),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Ht(this._animate,this),this._step()},_step:function(s){var c=+new Date-this._startTime,g=this._duration*1e3;c<g?this._runFrame(this._easeOut(c/g),s):(this._runFrame(1),this._complete())},_runFrame:function(s,c){var g=this._startPos.add(this._offset.multiplyBy(s));c&&g._round(),Bn(this._el,g),this.fire("step")},_complete:function(){ee(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Ge=Zt.extend({options:{crs:V,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,c){c=z(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(ce(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Pa&&re.any3d&&!re.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Le(this._proxy,wh,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,c,g){if(c=c===void 0?this._zoom:this._limitZoom(c),s=this._limitCenter(ce(s),c,this.options.maxBounds),g=g||{},this._stop(),this._loaded&&!g.reset&&g!==!0){g.animate!==void 0&&(g.zoom=i({animate:g.animate},g.zoom),g.pan=i({animate:g.animate,duration:g.duration},g.pan));var v=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,c,g.zoom):this._tryAnimatedPan(s,g.pan);if(v)return clearTimeout(this._sizeTimer),this}return this._resetView(s,c,g.pan&&g.pan.noMoveStart),this},setZoom:function(s,c){return this._loaded?this.setView(this.getCenter(),s,{zoom:c}):(this._zoom=s,this)},zoomIn:function(s,c){return s=s||(re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,c)},zoomOut:function(s,c){return s=s||(re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,c)},setZoomAround:function(s,c,g){var v=this.getZoomScale(c),w=this.getSize().divideBy(2),k=s instanceof Rt?s:this.latLngToContainerPoint(s),H=k.subtract(w).multiplyBy(1-1/v),ot=this.containerPointToLatLng(w.add(H));return this.setView(ot,c,{zoom:g})},_getBoundsCenterZoom:function(s,c){c=c||{},s=s.getBounds?s.getBounds():Oe(s);var g=Wt(c.paddingTopLeft||c.padding||[0,0]),v=Wt(c.paddingBottomRight||c.padding||[0,0]),w=this.getBoundsZoom(s,!1,g.add(v));if(w=typeof c.maxZoom=="number"?Math.min(c.maxZoom,w):w,w===1/0)return{center:s.getCenter(),zoom:w};var k=v.subtract(g).divideBy(2),H=this.project(s.getSouthWest(),w),ot=this.project(s.getNorthEast(),w),mt=this.unproject(H.add(ot).divideBy(2).add(k),w);return{center:mt,zoom:w}},fitBounds:function(s,c){if(s=Oe(s),!s.isValid())throw new Error("Bounds are not valid.");var g=this._getBoundsCenterZoom(s,c);return this.setView(g.center,g.zoom,c)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,c){return this.setView(s,this._zoom,{pan:c})},panBy:function(s,c){if(s=Wt(s).round(),c=c||{},!s.x&&!s.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new kh,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){we(this._mapPane,"leaflet-pan-anim");var g=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,g,c.duration||.25,c.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,c,g){if(g=g||{},g.animate===!1||!re.any3d)return this.setView(s,c,g);this._stop();var v=this.project(this.getCenter()),w=this.project(s),k=this.getSize(),H=this._zoom;s=ce(s),c=c===void 0?H:c;var ot=Math.max(k.x,k.y),mt=ot*this.getZoomScale(H,c),Mt=w.distanceTo(v)||1,qt=1.42,fe=qt*qt;function De(Tn){var Ua=Tn?-1:1,Ld=Tn?mt:ot,Zi=mt*mt-ot*ot+Ua*fe*fe*Mt*Mt,xd=2*Ld*fe*Mt,Qo=Zi/xd,hc=Math.sqrt(Qo*Qo+1)-Qo,bd=hc<1e-9?-18:Math.log(hc);return bd}function wr(Tn){return(Math.exp(Tn)-Math.exp(-Tn))/2}function Hn(Tn){return(Math.exp(Tn)+Math.exp(-Tn))/2}function Nr(Tn){return wr(Tn)/Hn(Tn)}var bn=De(0);function Hi(Tn){return ot*(Hn(bn)/Hn(bn+qt*Tn))}function cc(Tn){return ot*(Hn(bn)*Nr(bn+qt*Tn)-wr(bn))/fe}function Zu(Tn){return 1-Math.pow(1-Tn,1.5)}var Kh=Date.now(),Ga=(De(1)-bn)/qt,Ed=g.duration?1e3*g.duration:1e3*Ga*.8;function Xh(){var Tn=(Date.now()-Kh)/Ed,Ua=Zu(Tn)*Ga;Tn<=1?(this._flyToFrame=Ht(Xh,this),this._move(this.unproject(v.add(w.subtract(v).multiplyBy(cc(Ua)/Mt)),H),this.getScaleZoom(ot/Hi(Ua),H),{flyTo:!0})):this._move(s,c)._moveEnd(!0)}return this._moveStart(!0,g.noMoveStart),Xh.call(this),this},flyToBounds:function(s,c){var g=this._getBoundsCenterZoom(s,c);return this.flyTo(g.center,g.zoom,c)},setMaxBounds:function(s){return s=Oe(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var c=this.options.minZoom;return this.options.minZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var c=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,c){this._enforcingBounds=!0;var g=this.getCenter(),v=this._limitCenter(g,this._zoom,Oe(s));return g.equals(v)||this.panTo(v,c),this._enforcingBounds=!1,this},panInside:function(s,c){c=c||{};var g=Wt(c.paddingTopLeft||c.padding||[0,0]),v=Wt(c.paddingBottomRight||c.padding||[0,0]),w=this.project(this.getCenter()),k=this.project(s),H=this.getPixelBounds(),ot=Pe([H.min.add(g),H.max.subtract(v)]),mt=ot.getSize();if(!ot.contains(k)){this._enforcingBounds=!0;var Mt=k.subtract(ot.getCenter()),qt=ot.extend(k).getSize().subtract(mt);w.x+=Mt.x<0?-qt.x:qt.x,w.y+=Mt.y<0?-qt.y:qt.y,this.panTo(this.unproject(w),c),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=i({animate:!1,pan:!0},s===!0?{animate:!0}:s);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var g=this.getSize(),v=c.divideBy(2).round(),w=g.divideBy(2).round(),k=v.subtract(w);return!k.x&&!k.y?this:(s.animate&&s.pan?this.panBy(k):(s.pan&&this._rawPanBy(k),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:g}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=i({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=u(this._handleGeolocationResponse,this),g=u(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,g,s):navigator.geolocation.getCurrentPosition(c,g,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var c=s.code,g=s.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+g+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var c=s.coords.latitude,g=s.coords.longitude,v=new ve(c,g),w=v.toBounds(s.coords.accuracy*2),k=this._locateOptions;if(k.setView){var H=this.getBoundsZoom(w);this.setView(v,k.maxZoom?Math.min(H,k.maxZoom):H)}var ot={latlng:v,bounds:w,timestamp:s.timestamp};for(var mt in s.coords)typeof s.coords[mt]=="number"&&(ot[mt]=s.coords[mt]);this.fire("locationfound",ot)}},addHandler:function(s,c){if(!c)return this;var g=this[s]=new c(this);return this._handlers.push(g),this.options[s]&&g.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),dn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ee(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)dn(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,c){var g="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),v=He("div",g,c||this._mapPane);return s&&(this._panes[s]=v),v},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),c=this.unproject(s.getBottomLeft()),g=this.unproject(s.getTopRight());return new Ue(c,g)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,c,g){s=Oe(s),g=Wt(g||[0,0]);var v=this.getZoom()||0,w=this.getMinZoom(),k=this.getMaxZoom(),H=s.getNorthWest(),ot=s.getSouthEast(),mt=this.getSize().subtract(g),Mt=Pe(this.project(ot,v),this.project(H,v)).getSize(),qt=re.any3d?this.options.zoomSnap:1,fe=mt.x/Mt.x,De=mt.y/Mt.y,wr=c?Math.max(fe,De):Math.min(fe,De);return v=this.getScaleZoom(wr,v),qt&&(v=Math.round(v/(qt/100))*(qt/100),v=c?Math.ceil(v/qt)*qt:Math.floor(v/qt)*qt),Math.max(w,Math.min(k,v))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Rt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,c){var g=this._getTopLeftPoint(s,c);return new de(g,g.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,c){var g=this.options.crs;return c=c===void 0?this._zoom:c,g.scale(s)/g.scale(c)},getScaleZoom:function(s,c){var g=this.options.crs;c=c===void 0?this._zoom:c;var v=g.zoom(s*g.scale(c));return isNaN(v)?1/0:v},project:function(s,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(ce(s),c)},unproject:function(s,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(Wt(s),c)},layerPointToLatLng:function(s){var c=Wt(s).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(s){var c=this.project(ce(s))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ce(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Oe(s))},distance:function(s,c){return this.options.crs.distance(ce(s),ce(c))},containerPointToLayerPoint:function(s){return Wt(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return Wt(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var c=this.containerPointToLayerPoint(Wt(s));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ce(s)))},mouseEventToContainerPoint:function(s){return Th(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var c=this._container=Sh(s);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Le(c,"scroll",this._onScroll,this),this._containerId=d(c)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&re.any3d,we(s,"leaflet-container"+(re.touch?" leaflet-touch":"")+(re.retina?" leaflet-retina":"")+(re.ielt9?" leaflet-oldie":"")+(re.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=Bs(s,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Bn(this._mapPane,new Rt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(we(s.markerPane,"leaflet-zoom-hide"),we(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,c,g){Bn(this._mapPane,new Rt(0,0));var v=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var w=this._zoom!==c;this._moveStart(w,g)._move(s,c)._moveEnd(w),this.fire("viewreset"),v&&this.fire("load")},_moveStart:function(s,c){return s&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(s,c,g,v){c===void 0&&(c=this._zoom);var w=this._zoom!==c;return this._zoom=c,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),v?g&&g.pinch&&this.fire("zoom",g):((w||g&&g.pinch)&&this.fire("zoom",g),this.fire("move",g)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ee(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){Bn(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[d(this._container)]=this;var c=s?an:Le;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),re.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ee(this._resizeRequest),this._resizeRequest=Ht(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,c){for(var g=[],v,w=c==="mouseout"||c==="mouseover",k=s.target||s.srcElement,H=!1;k;){if(v=this._targets[d(k)],v&&(c==="click"||c==="preclick")&&this._draggableMoved(v)){H=!0;break}if(v&&v.listens(c,!0)&&(w&&!$l(k,s)||(g.push(v),w))||k===this._container)break;k=k.parentNode}return!g.length&&!H&&!w&&this.listens(c,!0)&&(g=[this]),g},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var c=s.target||s.srcElement;if(!(!this._loaded||c._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(c))){var g=s.type;g==="mousedown"&&Kl(c),this._fireDOMEvent(s,g)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,c,g){if(s.type==="click"){var v=i({},s);v.type="preclick",this._fireDOMEvent(v,v.type,g)}var w=this._findEventTargets(s,c);if(g){for(var k=[],H=0;H<g.length;H++)g[H].listens(c,!0)&&k.push(g[H]);w=k.concat(w)}if(w.length){c==="contextmenu"&&nr(s);var ot=w[0],mt={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Mt=ot.getLatLng&&(!ot._radius||ot._radius<=10);mt.containerPoint=Mt?this.latLngToContainerPoint(ot.getLatLng()):this.mouseEventToContainerPoint(s),mt.layerPoint=this.containerPointToLayerPoint(mt.containerPoint),mt.latlng=Mt?ot.getLatLng():this.layerPointToLatLng(mt.layerPoint)}for(H=0;H<w.length;H++)if(w[H].fire(c,mt,!0),mt.originalEvent._stopped||w[H].options.bubblingMouseEvents===!1&&gt(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,c=this._handlers.length;s<c;s++)this._handlers[s].disable()},whenReady:function(s,c){return this._loaded?s.call(c||this,{target:this}):this.on("load",s,c),this},_getMapPanePos:function(){return _o(this._mapPane)||new Rt(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,c){var g=s&&c!==void 0?this._getNewPixelOrigin(s,c):this.getPixelOrigin();return g.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,c){var g=this.getSize()._divideBy(2);return this.project(s,c)._subtract(g)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,c,g){var v=this._getNewPixelOrigin(g,c);return this.project(s,c)._subtract(v)},_latLngBoundsToNewLayerBounds:function(s,c,g){var v=this._getNewPixelOrigin(g,c);return Pe([this.project(s.getSouthWest(),c)._subtract(v),this.project(s.getNorthWest(),c)._subtract(v),this.project(s.getSouthEast(),c)._subtract(v),this.project(s.getNorthEast(),c)._subtract(v)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,c,g){if(!g)return s;var v=this.project(s,c),w=this.getSize().divideBy(2),k=new de(v.subtract(w),v.add(w)),H=this._getBoundsOffset(k,g,c);return Math.abs(H.x)<=1&&Math.abs(H.y)<=1?s:this.unproject(v.add(H),c)},_limitOffset:function(s,c){if(!c)return s;var g=this.getPixelBounds(),v=new de(g.min.add(s),g.max.add(s));return s.add(this._getBoundsOffset(v,c))},_getBoundsOffset:function(s,c,g){var v=Pe(this.project(c.getNorthEast(),g),this.project(c.getSouthWest(),g)),w=v.min.subtract(s.min),k=v.max.subtract(s.max),H=this._rebound(w.x,-k.x),ot=this._rebound(w.y,-k.y);return new Rt(H,ot)},_rebound:function(s,c){return s+c>0?Math.round(s-c)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(c))},_limitZoom:function(s){var c=this.getMinZoom(),g=this.getMaxZoom(),v=re.any3d?this.options.zoomSnap:1;return v&&(s=Math.round(s/v)*v),Math.max(c,Math.min(g,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){In(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,c){var g=this._getCenterOffset(s)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(g)?!1:(this.panBy(g,c),!0)},_createAnimProxy:function(){var s=this._proxy=He("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(c){var g=Gl,v=this._proxy.style[g];mo(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),v===this._proxy.style[g]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){dn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),c=this.getZoom();mo(this._proxy,this.project(s,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,c,g){if(this._animatingZoom)return!0;if(g=g||{},!this._zoomAnimated||g.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var v=this.getZoomScale(c),w=this._getCenterOffset(s)._divideBy(1-1/v);return g.animate!==!0&&!this.getSize().contains(w)?!1:(Ht(function(){this._moveStart(!0,g.noMoveStart||!1)._animateZoom(s,c,!0)},this),!0)},_animateZoom:function(s,c,g,v){this._mapPane&&(g&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=c,we(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:c,noUpdate:v}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&In(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Dh(s,c){return new Ge(s,c)}var Ce=Bt.extend({options:{position:"topright"},initialize:function(s){z(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var c=this._map;return c&&c.removeControl(this),this.options.position=s,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var c=this._container=this.onAdd(s),g=this.getPosition(),v=s._controlCorners[g];return we(c,"leaflet-control"),g.indexOf("bottom")!==-1?v.insertBefore(c,v.firstChild):v.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(dn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),Co=function(s){return new Ce(s)};Ge.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},c="leaflet-",g=this._controlContainer=He("div",c+"control-container",this._container);function v(w,k){var H=c+w+" "+c+k;s[w+k]=He("div",H,g)}v("top","left"),v("top","right"),v("bottom","left"),v("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)dn(this._controlCorners[s]);dn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Da=Ce.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,c,g,v){return g<v?-1:v<g?1:0}},initialize:function(s,c,g){z(this,g),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var v in s)this._addLayer(s[v],v);for(v in c)this._addLayer(c[v],v,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return Ce.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,c){return this._addLayer(s,c),this._map?this._update():this},addOverlay:function(s,c){return this._addLayer(s,c,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var c=this._getLayer(d(s));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){we(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(we(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):In(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return In(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",c=this._container=He("div",s),g=this.options.collapsed;c.setAttribute("aria-haspopup",!0),ka(c),Jl(c);var v=this._section=He("section",s+"-list");g&&(this._map.on("click",this.collapse,this),Le(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var w=this._layersLink=He("a",s+"-toggle",c);w.href="#",w.title="Layers",w.setAttribute("role","button"),Le(w,{keydown:function(k){k.keyCode===13&&this._expandSafely()},click:function(k){nr(k),this._expandSafely()}},this),g||this.expand(),this._baseLayersList=He("div",s+"-base",v),this._separator=He("div",s+"-separator",v),this._overlaysList=He("div",s+"-overlays",v),c.appendChild(v)},_getLayer:function(s){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&d(this._layers[c].layer)===s)return this._layers[c]},_addLayer:function(s,c,g){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:c,overlay:g}),this.options.sortLayers&&this._layers.sort(u(function(v,w){return this.options.sortFunction(v.layer,w.layer,v.name,w.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ia(this._baseLayersList),Ia(this._overlaysList),this._layerControlInputs=[];var s,c,g,v,w=0;for(g=0;g<this._layers.length;g++)v=this._layers[g],this._addItem(v),c=c||v.overlay,s=s||!v.overlay,w+=v.overlay?0:1;return this.options.hideSingleBase&&(s=s&&w>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=c&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var c=this._getLayer(d(s.target)),g=c.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;g&&this._map.fire(g,c)},_createRadioElement:function(s,c){var g='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(c?' checked="checked"':"")+"/>",v=document.createElement("div");return v.innerHTML=g,v.firstChild},_addItem:function(s){var c=document.createElement("label"),g=this._map.hasLayer(s.layer),v;s.overlay?(v=document.createElement("input"),v.type="checkbox",v.className="leaflet-control-layers-selector",v.defaultChecked=g):v=this._createRadioElement("leaflet-base-layers_"+d(this),g),this._layerControlInputs.push(v),v.layerId=d(s.layer),Le(v,"click",this._onInputClick,this);var w=document.createElement("span");w.innerHTML=" "+s.name;var k=document.createElement("span");c.appendChild(k),k.appendChild(v),k.appendChild(w);var H=s.overlay?this._overlaysList:this._baseLayersList;return H.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,c,g,v=[],w=[];this._handlingClick=!0;for(var k=s.length-1;k>=0;k--)c=s[k],g=this._getLayer(c.layerId).layer,c.checked?v.push(g):c.checked||w.push(g);for(k=0;k<w.length;k++)this._map.hasLayer(w[k])&&this._map.removeLayer(w[k]);for(k=0;k<v.length;k++)this._map.hasLayer(v[k])||this._map.addLayer(v[k]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,c,g,v=this._map.getZoom(),w=s.length-1;w>=0;w--)c=s[w],g=this._getLayer(c.layerId).layer,c.disabled=g.options.minZoom!==void 0&&v<g.options.minZoom||g.options.maxZoom!==void 0&&v>g.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,Le(s,"click",nr),this.expand();var c=this;setTimeout(function(){an(s,"click",nr),c._preventClick=!1})}}),ed=function(s,c,g){return new Da(s,c,g)},Mu=Ce.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var c="leaflet-control-zoom",g=He("div",c+" leaflet-bar"),v=this.options;return this._zoomInButton=this._createButton(v.zoomInText,v.zoomInTitle,c+"-in",g,this._zoomIn),this._zoomOutButton=this._createButton(v.zoomOutText,v.zoomOutTitle,c+"-out",g,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),g},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,c,g,v,w){var k=He("a",g,v);return k.innerHTML=s,k.href="#",k.title=c,k.setAttribute("role","button"),k.setAttribute("aria-label",c),ka(k),Le(k,"click",vo),Le(k,"click",w,this),Le(k,"click",this._refocusOnMap,this),k},_updateDisabled:function(){var s=this._map,c="leaflet-disabled";In(this._zoomInButton,c),In(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(we(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(we(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ge.mergeOptions({zoomControl:!0}),Ge.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Mu,this.addControl(this.zoomControl))});var nd=function(s){return new Mu(s)},Pu=Ce.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var c="leaflet-control-scale",g=He("div",c),v=this.options;return this._addScales(v,c+"-line",g),s.on(v.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),g},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,c,g){s.metric&&(this._mScale=He("div",c,g)),s.imperial&&(this._iScale=He("div",c,g))},_update:function(){var s=this._map,c=s.getSize().y/2,g=s.distance(s.containerPointToLatLng([0,c]),s.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(g)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var c=this._getRoundNum(s),g=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,g,c/s)},_updateImperial:function(s){var c=s*3.2808399,g,v,w;c>5280?(g=c/5280,v=this._getRoundNum(g),this._updateScale(this._iScale,v+" mi",v/g)):(w=this._getRoundNum(c),this._updateScale(this._iScale,w+" ft",w/c))},_updateScale:function(s,c,g){s.style.width=Math.round(this.options.maxWidth*g)+"px",s.innerHTML=c},_getRoundNum:function(s){var c=Math.pow(10,(Math.floor(s)+"").length-1),g=s/c;return g=g>=10?10:g>=5?5:g>=3?3:g>=2?2:1,c*g}}),Iu=function(s){return new Pu(s)},rd='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ui=Ce.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(re.inlineSvg?rd+" ":"")+"Leaflet</a>"},initialize:function(s){z(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=He("div","leaflet-control-attribution"),ka(this._container);for(var c in s._layers)s._layers[c].getAttribution&&this.addAttribution(s._layers[c].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var c in this._attributions)this._attributions[c]&&s.push(c);var g=[];this.options.prefix&&g.push(this.options.prefix),s.length&&g.push(s.join(", ")),this._container.innerHTML=g.join(' <span aria-hidden="true">|</span> ')}}});Ge.mergeOptions({attributionControl:!0}),Ge.addInitHook(function(){this.options.attributionControl&&new Ui().addTo(this)});var Nh=function(s){return new Ui(s)};Ce.Layers=Da,Ce.Zoom=Mu,Ce.Scale=Pu,Ce.Attribution=Ui,Co.layers=ed,Co.zoom=nd,Co.scale=Iu,Co.attribution=Nh;var Lr=Bt.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Lr.addTo=function(s,c){return s.addHandler(c,this),this};var id={Events:jt},Oh=re.touch?"touchstart mousedown":"mousedown",zs=Zt.extend({options:{clickTolerance:3},initialize:function(s,c,g,v){z(this,v),this._element=s,this._dragStartTarget=c||s,this._preventOutline=g},enable:function(){this._enabled||(Le(this._dragStartTarget,Oh,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(zs._dragging===this&&this.finishDrag(!0),an(this._dragStartTarget,Oh,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Ul(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){zs._dragging===this&&this.finishDrag();return}if(!(zs._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(zs._dragging=this,this._preventOutline&&Kl(this._element),ql(),Ta(),!this._moving)){this.fire("down");var c=s.touches?s.touches[0]:s,g=Mh(this._element);this._startPoint=new Rt(c.clientX,c.clientY),this._startPos=_o(this._element),this._parentScale=Xl(g);var v=s.type==="mousedown";Le(document,v?"mousemove":"touchmove",this._onMove,this),Le(document,v?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var c=s.touches&&s.touches.length===1?s.touches[0]:s,g=new Rt(c.clientX,c.clientY)._subtract(this._startPoint);!g.x&&!g.y||Math.abs(g.x)+Math.abs(g.y)<this.options.clickTolerance||(g.x/=this._parentScale.x,g.y/=this._parentScale.y,nr(s),this._moved||(this.fire("dragstart"),this._moved=!0,we(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),we(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(g),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),Bn(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){In(document.body,"leaflet-dragging"),this._lastTarget&&(In(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),an(document,"mousemove touchmove",this._onMove,this),an(document,"mouseup touchend touchcancel",this._onUp,this),Hl(),Aa();var c=this._moved&&this._moving;this._moving=!1,zs._dragging=!1,c&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Rh(s,c,g){var v,w=[1,4,2,8],k,H,ot,mt,Mt,qt,fe,De;for(k=0,qt=s.length;k<qt;k++)s[k]._code=Ar(s[k],c);for(ot=0;ot<4;ot++){for(fe=w[ot],v=[],k=0,qt=s.length,H=qt-1;k<qt;H=k++)mt=s[k],Mt=s[H],mt._code&fe?Mt._code&fe||(De=Gs(Mt,mt,fe,c,g),De._code=Ar(De,c),v.push(De)):(Mt._code&fe&&(De=Gs(Mt,mt,fe,c,g),De._code=Ar(De,c),v.push(De)),v.push(mt));s=v}return s}function Bh(s,c){var g,v,w,k,H,ot,mt,Mt,qt;if(!s||s.length===0)throw new Error("latlngs not passed");kr(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var fe=ce([0,0]),De=Oe(s),wr=De.getNorthWest().distanceTo(De.getSouthWest())*De.getNorthEast().distanceTo(De.getNorthWest());wr<1700&&(fe=Ql(s));var Hn=s.length,Nr=[];for(g=0;g<Hn;g++){var bn=ce(s[g]);Nr.push(c.project(ce([bn.lat-fe.lat,bn.lng-fe.lng])))}for(ot=mt=Mt=0,g=0,v=Hn-1;g<Hn;v=g++)w=Nr[g],k=Nr[v],H=w.y*k.x-k.y*w.x,mt+=(w.x+k.x)*H,Mt+=(w.y+k.y)*H,ot+=H*3;ot===0?qt=Nr[0]:qt=[mt/ot,Mt/ot];var Hi=c.unproject(Wt(qt));return ce([Hi.lat+fe.lat,Hi.lng+fe.lng])}function Ql(s){for(var c=0,g=0,v=0,w=0;w<s.length;w++){var k=ce(s[w]);c+=k.lat,g+=k.lng,v++}return ce([c/v,g/v])}var sd={__proto__:null,clipPolygon:Rh,polygonCenter:Bh,centroid:Ql};function Fh(s,c){if(!c||!s.length)return s.slice();var g=c*c;return s=zh(s,g),s=rr(s,g),s}function tc(s,c,g){return Math.sqrt(Na(s,c,g,!0))}function od(s,c,g){return Na(s,c,g)}function rr(s,c){var g=s.length,v=typeof Uint8Array<"u"?Uint8Array:Array,w=new v(g);w[0]=w[g-1]=1,lr(s,w,c,0,g-1);var k,H=[];for(k=0;k<g;k++)w[k]&&H.push(s[k]);return H}function lr(s,c,g,v,w){var k=0,H,ot,mt;for(ot=v+1;ot<=w-1;ot++)mt=Na(s[ot],s[v],s[w],!0),mt>k&&(H=ot,k=mt);k>g&&(c[H]=1,lr(s,c,g,v,H),lr(s,c,g,H,w))}function zh(s,c){for(var g=[s[0]],v=1,w=0,k=s.length;v<k;v++)ad(s[v],s[w])>c&&(g.push(s[v]),w=v);return w<k-1&&g.push(s[k-1]),g}var Eo;function Lo(s,c,g,v,w){var k=v?Eo:Ar(s,g),H=Ar(c,g),ot,mt,Mt;for(Eo=H;;){if(!(k|H))return[s,c];if(k&H)return!1;ot=k||H,mt=Gs(s,c,ot,g,w),Mt=Ar(mt,g),ot===k?(s=mt,k=Mt):(c=mt,H=Mt)}}function Gs(s,c,g,v,w){var k=c.x-s.x,H=c.y-s.y,ot=v.min,mt=v.max,Mt,qt;return g&8?(Mt=s.x+k*(mt.y-s.y)/H,qt=mt.y):g&4?(Mt=s.x+k*(ot.y-s.y)/H,qt=ot.y):g&2?(Mt=mt.x,qt=s.y+H*(mt.x-s.x)/k):g&1&&(Mt=ot.x,qt=s.y+H*(ot.x-s.x)/k),new Rt(Mt,qt,w)}function Ar(s,c){var g=0;return s.x<c.min.x?g|=1:s.x>c.max.x&&(g|=2),s.y<c.min.y?g|=4:s.y>c.max.y&&(g|=8),g}function ad(s,c){var g=c.x-s.x,v=c.y-s.y;return g*g+v*v}function Na(s,c,g,v){var w=c.x,k=c.y,H=g.x-w,ot=g.y-k,mt=H*H+ot*ot,Mt;return mt>0&&(Mt=((s.x-w)*H+(s.y-k)*ot)/mt,Mt>1?(w=g.x,k=g.y):Mt>0&&(w+=H*Mt,k+=ot*Mt)),H=s.x-w,ot=s.y-k,v?H*H+ot*ot:new Rt(w,k)}function kr(s){return!rt(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function ci(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),kr(s)}function ec(s,c){var g,v,w,k,H,ot,mt,Mt;if(!s||s.length===0)throw new Error("latlngs not passed");kr(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var qt=ce([0,0]),fe=Oe(s),De=fe.getNorthWest().distanceTo(fe.getSouthWest())*fe.getNorthEast().distanceTo(fe.getNorthWest());De<1700&&(qt=Ql(s));var wr=s.length,Hn=[];for(g=0;g<wr;g++){var Nr=ce(s[g]);Hn.push(c.project(ce([Nr.lat-qt.lat,Nr.lng-qt.lng])))}for(g=0,v=0;g<wr-1;g++)v+=Hn[g].distanceTo(Hn[g+1])/2;if(v===0)Mt=Hn[0];else for(g=0,k=0;g<wr-1;g++)if(H=Hn[g],ot=Hn[g+1],w=H.distanceTo(ot),k+=w,k>v){mt=(k-v)/w,Mt=[ot.x-mt*(ot.x-H.x),ot.y-mt*(ot.y-H.y)];break}var bn=c.unproject(Wt(Mt));return ce([bn.lat+qt.lat,bn.lng+qt.lng])}var Tu={__proto__:null,simplify:Fh,pointToSegmentDistance:tc,closestPointOnSegment:od,clipSegment:Lo,_getEdgeIntersection:Gs,_getBitCode:Ar,_sqClosestPointOnSegment:Na,isFlat:kr,_flat:ci,polylineCenter:ec},nc={project:function(s){return new Rt(s.lng,s.lat)},unproject:function(s){return new ve(s.y,s.x)},bounds:new de([-180,-90],[180,90])},hi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new de([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var c=Math.PI/180,g=this.R,v=s.lat*c,w=this.R_MINOR/g,k=Math.sqrt(1-w*w),H=k*Math.sin(v),ot=Math.tan(Math.PI/4-v/2)/Math.pow((1-H)/(1+H),k/2);return v=-g*Math.log(Math.max(ot,1e-10)),new Rt(s.lng*c*g,v)},unproject:function(s){for(var c=180/Math.PI,g=this.R,v=this.R_MINOR/g,w=Math.sqrt(1-v*v),k=Math.exp(-s.y/g),H=Math.PI/2-2*Math.atan(k),ot=0,mt=.1,Mt;ot<15&&Math.abs(mt)>1e-7;ot++)Mt=w*Math.sin(H),Mt=Math.pow((1-Mt)/(1+Mt),w/2),mt=Math.PI/2-2*Math.atan(k*Mt)-H,H+=mt;return new ve(H*c,s.x*c/g)}},Vi={__proto__:null,LonLat:nc,Mercator:hi,SphericalMercator:J},Au=i({},Y,{code:"EPSG:3395",projection:hi,transformation:function(){var s=.5/(Math.PI*hi.R);return F(s,.5,-s,.5)}()}),rc=i({},Y,{code:"EPSG:4326",projection:nc,transformation:F(1/180,1,-1/180,.5)}),ic=i({},Lt,{projection:nc,transformation:F(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,c){var g=c.lng-s.lng,v=c.lat-s.lat;return Math.sqrt(g*g+v*v)},infinite:!0});Lt.Earth=Y,Lt.EPSG3395=Au,Lt.EPSG3857=V,Lt.EPSG900913=et,Lt.EPSG4326=rc,Lt.Simple=ic;var xr=Zt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[d(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[d(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var c=s.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var g=this.getEvents();c.on(g,this),this.once("remove",function(){c.off(g,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});Ge.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var c=d(s);return this._layers[c]?this:(this._layers[c]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var c=d(s);return this._layers[c]?(this._loaded&&s.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return d(s)in this._layers},eachLayer:function(s,c){for(var g in this._layers)s.call(c,this._layers[g]);return this},_addLayers:function(s){s=s?rt(s)?s:[s]:[];for(var c=0,g=s.length;c<g;c++)this.addLayer(s[c])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[d(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var c=d(s);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,c=-1/0,g=this._getZoomSpan();for(var v in this._zoomBoundLayers){var w=this._zoomBoundLayers[v].options;s=w.minZoom===void 0?s:Math.min(s,w.minZoom),c=w.maxZoom===void 0?c:Math.max(c,w.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=s===1/0?void 0:s,g!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ko=xr.extend({initialize:function(s,c){z(this,c),this._layers={};var g,v;if(s)for(g=0,v=s.length;g<v;g++)this.addLayer(s[g])},addLayer:function(s){var c=this.getLayerId(s);return this._layers[c]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var c=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(s){var c=typeof s=="number"?s:this.getLayerId(s);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var c=Array.prototype.slice.call(arguments,1),g,v;for(g in this._layers)v=this._layers[g],v[s]&&v[s].apply(v,c);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,c){for(var g in this._layers)s.call(c,this._layers[g]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return d(s)}}),ud=function(s,c){return new Ko(s,c)},Li=Ko.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Ko.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Ko.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Ue;for(var c in this._layers){var g=this._layers[c];s.extend(g.getBounds?g.getBounds():g.getLatLng())}return s}}),ld=function(s,c){return new Li(s,c)},Xo=Bt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){z(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,c){var g=this._getIconUrl(s);if(!g){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var v=this._createImg(g,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(v,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),v},_setIconStyles:function(s,c){var g=this.options,v=g[c+"Size"];typeof v=="number"&&(v=[v,v]);var w=Wt(v),k=Wt(c==="shadow"&&g.shadowAnchor||g.iconAnchor||w&&w.divideBy(2,!0));s.className="leaflet-marker-"+c+" "+(g.className||""),k&&(s.style.marginLeft=-k.x+"px",s.style.marginTop=-k.y+"px"),w&&(s.style.width=w.x+"px",s.style.height=w.y+"px")},_createImg:function(s,c){return c=c||document.createElement("img"),c.src=s,c},_getIconUrl:function(s){return re.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function cd(s){return new Xo(s)}var Oa=Xo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Oa.imagePath!="string"&&(Oa.imagePath=this._detectIconPath()),(this.options.imagePath||Oa.imagePath)+Xo.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var c=function(g,v,w){var k=v.exec(g);return k&&k[w]};return s=c(s,/^url\((['"])?(.+)\1\)$/,2),s&&c(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=He("div","leaflet-default-icon-path",document.body),c=Bs(s,"background-image")||Bs(s,"backgroundImage");if(document.body.removeChild(s),c=this._stripUrl(c),c)return c;var g=document.querySelector('link[href$="leaflet.css"]');return g?g.href.substring(0,g.href.length-11-1):""}}),ku=Lr.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new zs(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),we(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&In(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var c=this._marker,g=c._map,v=this._marker.options.autoPanSpeed,w=this._marker.options.autoPanPadding,k=_o(c._icon),H=g.getPixelBounds(),ot=g.getPixelOrigin(),mt=Pe(H.min._subtract(ot).add(w),H.max._subtract(ot).subtract(w));if(!mt.contains(k)){var Mt=Wt((Math.max(mt.max.x,k.x)-mt.max.x)/(H.max.x-mt.max.x)-(Math.min(mt.min.x,k.x)-mt.min.x)/(H.min.x-mt.min.x),(Math.max(mt.max.y,k.y)-mt.max.y)/(H.max.y-mt.max.y)-(Math.min(mt.min.y,k.y)-mt.min.y)/(H.min.y-mt.min.y)).multiplyBy(v);g.panBy(Mt,{animate:!1}),this._draggable._newPos._add(Mt),this._draggable._startPos._add(Mt),Bn(c._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=Ht(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(ee(this._panRequest),this._panRequest=Ht(this._adjustPan.bind(this,s)))},_onDrag:function(s){var c=this._marker,g=c._shadow,v=_o(c._icon),w=c._map.layerPointToLatLng(v);g&&Bn(g,v),c._latlng=w,s.latlng=w,s.oldLatLng=this._oldLatLng,c.fire("move",s).fire("drag",s)},_onDragEnd:function(s){ee(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Du=xr.extend({options:{icon:new Oa,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,c){z(this,c),this._latlng=ce(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var c=this._latlng;return this._latlng=ce(s),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),g=s.icon.createIcon(this._icon),v=!1;g!==this._icon&&(this._icon&&this._removeIcon(),v=!0,s.title&&(g.title=s.title),g.tagName==="IMG"&&(g.alt=s.alt||"")),we(g,c),s.keyboard&&(g.tabIndex="0",g.setAttribute("role","button")),this._icon=g,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Le(g,"focus",this._panOnFocus,this);var w=s.icon.createShadow(this._shadow),k=!1;w!==this._shadow&&(this._removeShadow(),k=!0),w&&(we(w,c),w.alt=""),this._shadow=w,s.opacity<1&&this._updateOpacity(),v&&this.getPane().appendChild(this._icon),this._initInteraction(),w&&k&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&an(this._icon,"focus",this._panOnFocus,this),dn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&dn(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&Bn(this._icon,s),this._shadow&&Bn(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(we(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ku)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ku(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&li(this._icon,s),this._shadow&&li(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var c=this.options.icon.options,g=c.iconSize?Wt(c.iconSize):Wt(0,0),v=c.iconAnchor?Wt(c.iconAnchor):Wt(0,0);s.panInside(this._latlng,{paddingTopLeft:v,paddingBottomRight:g.subtract(v)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function hd(s,c){return new Du(s,c)}var ps=xr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return z(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ji=ps.extend({options:{fill:!0,radius:10},initialize:function(s,c){z(this,c),this._latlng=ce(s),this._radius=this.options.radius},setLatLng:function(s){var c=this._latlng;return this._latlng=ce(s),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var c=s&&s.radius||this._radius;return ps.prototype.setStyle.call(this,s),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,c=this._radiusY||s,g=this._clickTolerance(),v=[s+g,c+g];this._pxBounds=new de(this._point.subtract(v),this._point.add(v))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Gh(s,c){return new ji(s,c)}var sc=ji.extend({initialize:function(s,c,g){if(typeof c=="number"&&(c=i({},g,{radius:c})),z(this,c),this._latlng=ce(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Ue(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:ps.prototype.setStyle,_project:function(){var s=this._latlng.lng,c=this._latlng.lat,g=this._map,v=g.options.crs;if(v.distance===Y.distance){var w=Math.PI/180,k=this._mRadius/Y.R/w,H=g.project([c+k,s]),ot=g.project([c-k,s]),mt=H.add(ot).divideBy(2),Mt=g.unproject(mt).lat,qt=Math.acos((Math.cos(k*w)-Math.sin(c*w)*Math.sin(Mt*w))/(Math.cos(c*w)*Math.cos(Mt*w)))/w;(isNaN(qt)||qt===0)&&(qt=k/Math.cos(Math.PI/180*c)),this._point=mt.subtract(g.getPixelOrigin()),this._radius=isNaN(qt)?0:mt.x-g.project([Mt,s-qt]).x,this._radiusY=mt.y-H.y}else{var fe=v.unproject(v.project(this._latlng).subtract([this._mRadius,0]));this._point=g.latLngToLayerPoint(this._latlng),this._radius=this._point.x-g.latLngToLayerPoint(fe).x}this._updateBounds()}});function xo(s,c,g){return new sc(s,c,g)}var ds=ps.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,c){z(this,c),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var c=1/0,g=null,v=Na,w,k,H=0,ot=this._parts.length;H<ot;H++)for(var mt=this._parts[H],Mt=1,qt=mt.length;Mt<qt;Mt++){w=mt[Mt-1],k=mt[Mt];var fe=v(s,w,k,!0);fe<c&&(c=fe,g=v(s,w,k))}return g&&(g.distance=Math.sqrt(c)),g},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ec(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,c){return c=c||this._defaultShape(),s=ce(s),c.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Ue,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return kr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var c=[],g=kr(s),v=0,w=s.length;v<w;v++)g?(c[v]=ce(s[v]),this._bounds.extend(c[v])):c[v]=this._convertLatLngs(s[v]);return c},_project:function(){var s=new de;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),c=new Rt(s,s);this._rawPxBounds&&(this._pxBounds=new de([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(s,c,g){var v=s[0]instanceof ve,w=s.length,k,H;if(v){for(H=[],k=0;k<w;k++)H[k]=this._map.latLngToLayerPoint(s[k]),g.extend(H[k]);c.push(H)}else for(k=0;k<w;k++)this._projectLatlngs(s[k],c,g)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,g,v,w,k,H,ot,mt;for(g=0,w=0,k=this._rings.length;g<k;g++)for(mt=this._rings[g],v=0,H=mt.length;v<H-1;v++)ot=Lo(mt[v],mt[v+1],s,v,!0),ot&&(c[w]=c[w]||[],c[w].push(ot[0]),(ot[1]!==mt[v+1]||v===H-2)&&(c[w].push(ot[1]),w++))}},_simplifyPoints:function(){for(var s=this._parts,c=this.options.smoothFactor,g=0,v=s.length;g<v;g++)s[g]=Fh(s[g],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,c){var g,v,w,k,H,ot,mt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(g=0,k=this._parts.length;g<k;g++)for(ot=this._parts[g],v=0,H=ot.length,w=H-1;v<H;w=v++)if(!(!c&&v===0)&&tc(s,ot[w],ot[v])<=mt)return!0;return!1}});function fd(s,c){return new ds(s,c)}ds._flat=ci;var Us=ds.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Bh(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var c=ds.prototype._convertLatLngs.call(this,s),g=c.length;return g>=2&&c[0]instanceof ve&&c[0].equals(c[g-1])&&c.pop(),c},_setLatLngs:function(s){ds.prototype._setLatLngs.call(this,s),kr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return kr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,c=this.options.weight,g=new Rt(c,c);if(s=new de(s.min.subtract(g),s.max.add(g)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var v=0,w=this._rings.length,k;v<w;v++)k=Rh(this._rings[v],s,!0),k.length&&this._parts.push(k)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var c=!1,g,v,w,k,H,ot,mt,Mt;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(k=0,mt=this._parts.length;k<mt;k++)for(g=this._parts[k],H=0,Mt=g.length,ot=Mt-1;H<Mt;ot=H++)v=g[H],w=g[ot],v.y>s.y!=w.y>s.y&&s.x<(w.x-v.x)*(s.y-v.y)/(w.y-v.y)+v.x&&(c=!c);return c||ds.prototype._containsPoint.call(this,s,!0)}});function Ra(s,c){return new Us(s,c)}var gs=Li.extend({initialize:function(s,c){z(this,c),this._layers={},s&&this.addData(s)},addData:function(s){var c=rt(s)?s:s.features,g,v,w;if(c){for(g=0,v=c.length;g<v;g++)w=c[g],(w.geometries||w.geometry||w.features||w.coordinates)&&this.addData(w);return this}var k=this.options;if(k.filter&&!k.filter(s))return this;var H=Nu(s,k);return H?(H.feature=zu(s),H.defaultOptions=H.options,this.resetStyle(H),k.onEachFeature&&k.onEachFeature(s,H),this.addLayer(H)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=i({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(c){this._setLayerStyle(c,s)},this)},_setLayerStyle:function(s,c){s.setStyle&&(typeof c=="function"&&(c=c(s.feature)),s.setStyle(c))}});function Nu(s,c){var g=s.type==="Feature"?s.geometry:s,v=g?g.coordinates:null,w=[],k=c&&c.pointToLayer,H=c&&c.coordsToLatLng||Ou,ot,mt,Mt,qt;if(!v&&!g)return null;switch(g.type){case"Point":return ot=H(v),Uh(k,s,ot,c);case"MultiPoint":for(Mt=0,qt=v.length;Mt<qt;Mt++)ot=H(v[Mt]),w.push(Uh(k,s,ot,c));return new Li(w);case"LineString":case"MultiLineString":return mt=Ru(v,g.type==="LineString"?0:1,H),new ds(mt,c);case"Polygon":case"MultiPolygon":return mt=Ru(v,g.type==="Polygon"?1:2,H),new Us(mt,c);case"GeometryCollection":for(Mt=0,qt=g.geometries.length;Mt<qt;Mt++){var fe=Nu({geometry:g.geometries[Mt],type:"Feature",properties:s.properties},c);fe&&w.push(fe)}return new Li(w);case"FeatureCollection":for(Mt=0,qt=g.features.length;Mt<qt;Mt++){var De=Nu(g.features[Mt],c);De&&w.push(De)}return new Li(w);default:throw new Error("Invalid GeoJSON object.")}}function Uh(s,c,g,v){return s?s(c,g):new Du(g,v&&v.markersInheritOptions&&v)}function Ou(s){return new ve(s[1],s[0],s[2])}function Ru(s,c,g){for(var v=[],w=0,k=s.length,H;w<k;w++)H=c?Ru(s[w],c-1,g):(g||Ou)(s[w]),v.push(H);return v}function Bu(s,c){return s=ce(s),s.alt!==void 0?[S(s.lng,c),S(s.lat,c),S(s.alt,c)]:[S(s.lng,c),S(s.lat,c)]}function Fu(s,c,g,v){for(var w=[],k=0,H=s.length;k<H;k++)w.push(c?Fu(s[k],kr(s[k])?0:c-1,g,v):Bu(s[k],v));return!c&&g&&w.length>0&&w.push(w[0].slice()),w}function Wo(s,c){return s.feature?i({},s.feature,{geometry:c}):zu(c)}function zu(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Gu={toGeoJSON:function(s){return Wo(this,{type:"Point",coordinates:Bu(this.getLatLng(),s)})}};Du.include(Gu),sc.include(Gu),ji.include(Gu),ds.include({toGeoJSON:function(s){var c=!kr(this._latlngs),g=Fu(this._latlngs,c?1:0,!1,s);return Wo(this,{type:(c?"Multi":"")+"LineString",coordinates:g})}}),Us.include({toGeoJSON:function(s){var c=!kr(this._latlngs),g=c&&!kr(this._latlngs[0]),v=Fu(this._latlngs,g?2:c?1:0,!0,s);return c||(v=[v]),Wo(this,{type:(g?"Multi":"")+"Polygon",coordinates:v})}}),Ko.include({toMultiPoint:function(s){var c=[];return this.eachLayer(function(g){c.push(g.toGeoJSON(s).geometry.coordinates)}),Wo(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(s){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(s);var g=c==="GeometryCollection",v=[];return this.eachLayer(function(w){if(w.toGeoJSON){var k=w.toGeoJSON(s);if(g)v.push(k.geometry);else{var H=zu(k);H.type==="FeatureCollection"?v.push.apply(v,H.features):v.push(H)}}}),g?Wo(this,{geometries:v,type:"GeometryCollection"}):{type:"FeatureCollection",features:v}}});function Uu(s,c){return new gs(s,c)}var Vh=Uu,Yo=xr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,c,g){this._url=s,this._bounds=Oe(c),z(this,g)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(we(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){dn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Ho(this._image),this},bringToBack:function(){return this._map&&go(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Oe(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",c=this._image=s?this._url:He("img");if(we(c,"leaflet-image-layer"),this._zoomAnimated&&we(c,"leaflet-zoom-animated"),this.options.className&&we(c,this.options.className),c.onselectstart=E,c.onmousemove=E,c.onload=u(this.fire,this,"load"),c.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(s){var c=this._map.getZoomScale(s.zoom),g=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;mo(this._image,g,c)},_reset:function(){var s=this._image,c=new de(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),g=c.getSize();Bn(s,c.min),s.style.width=g.x+"px",s.style.height=g.y+"px"},_updateOpacity:function(){li(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),pd=function(s,c,g){return new Yo(s,c,g)},Ba=Yo.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",c=this._image=s?this._url:He("video");if(we(c,"leaflet-image-layer"),this._zoomAnimated&&we(c,"leaflet-zoom-animated"),this.options.className&&we(c,this.options.className),c.onselectstart=E,c.onmousemove=E,c.onloadeddata=u(this.fire,this,"load"),s){for(var g=c.getElementsByTagName("source"),v=[],w=0;w<g.length;w++)v.push(g[w].src);this._url=g.length>0?v:[c.src];return}rt(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var k=0;k<this._url.length;k++){var H=He("source");H.src=this._url[k],c.appendChild(H)}}});function jh(s,c,g){return new Ba(s,c,g)}var qh=Yo.extend({_initImage:function(){var s=this._image=this._url;we(s,"leaflet-image-layer"),this._zoomAnimated&&we(s,"leaflet-zoom-animated"),this.options.className&&we(s,this.options.className),s.onselectstart=E,s.onmousemove=E}});function dd(s,c,g){return new qh(s,c,g)}var qi=xr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,c){s&&(s instanceof ve||rt(s))?(this._latlng=ce(s),z(this,c)):(z(this,s),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&li(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&li(this._container,1),this.bringToFront(),this.options.interactive&&(we(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(li(this._container,0),this._removeTimeout=setTimeout(u(dn,void 0,this._container),200)):dn(this._container),this.options.interactive&&(In(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ce(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ho(this._container),this},bringToBack:function(){return this._map&&go(this._container),this},_prepareOpen:function(s){var c=this._source;if(!c._map)return!1;if(c instanceof Li){c=null;var g=this._source._layers;for(var v in g)if(g[v]._map){c=g[v];break}if(!c)return!1;this._source=c}if(!s)if(c.getCenter)s=c.getCenter();else if(c.getLatLng)s=c.getLatLng();else if(c.getBounds)s=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")s.innerHTML=c;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),c=Wt(this.options.offset),g=this._getAnchor();this._zoomAnimated?Bn(this._container,s.add(g)):c=c.add(s).add(g);var v=this._containerBottom=-c.y,w=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=v+"px",this._container.style.left=w+"px"}},_getAnchor:function(){return[0,0]}});Ge.include({_initOverlay:function(s,c,g,v){var w=c;return w instanceof s||(w=new s(v).setContent(c)),g&&w.setLatLng(g),w}}),xr.include({_initOverlay:function(s,c,g,v){var w=g;return w instanceof s?(z(w,v),w._source=this):(w=c&&!v?c:new s(v,this),w.setContent(g)),w}});var Vs=qi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,qi.prototype.openOn.call(this,s)},onAdd:function(s){qi.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ps||this._source.on("preclick",yo))},onRemove:function(s){qi.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ps||this._source.off("preclick",yo))},getEvents:function(){var s=qi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",c=this._container=He("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),g=this._wrapper=He("div",s+"-content-wrapper",c);if(this._contentNode=He("div",s+"-content",g),ka(c),Jl(this._contentNode),Le(c,"contextmenu",yo),this._tipContainer=He("div",s+"-tip-container",c),this._tip=He("div",s+"-tip",this._tipContainer),this.options.closeButton){var v=this._closeButton=He("a",s+"-close-button",c);v.setAttribute("role","button"),v.setAttribute("aria-label","Close popup"),v.href="#close",v.innerHTML='<span aria-hidden="true">&#215;</span>',Le(v,"click",function(w){nr(w),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,c=s.style;c.width="",c.whiteSpace="nowrap";var g=s.offsetWidth;g=Math.min(g,this.options.maxWidth),g=Math.max(g,this.options.minWidth),c.width=g+1+"px",c.whiteSpace="",c.height="";var v=s.offsetHeight,w=this.options.maxHeight,k="leaflet-popup-scrolled";w&&v>w?(c.height=w+"px",we(s,k)):In(s,k),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),g=this._getAnchor();Bn(this._container,c.add(g))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,c=parseInt(Bs(this._container,"marginBottom"),10)||0,g=this._container.offsetHeight+c,v=this._containerWidth,w=new Rt(this._containerLeft,-g-this._containerBottom);w._add(_o(this._container));var k=s.layerPointToContainerPoint(w),H=Wt(this.options.autoPanPadding),ot=Wt(this.options.autoPanPaddingTopLeft||H),mt=Wt(this.options.autoPanPaddingBottomRight||H),Mt=s.getSize(),qt=0,fe=0;k.x+v+mt.x>Mt.x&&(qt=k.x+v-Mt.x+mt.x),k.x-qt-ot.x<0&&(qt=k.x-ot.x),k.y+g+mt.y>Mt.y&&(fe=k.y+g-Mt.y+mt.y),k.y-fe-ot.y<0&&(fe=k.y-ot.y),(qt||fe)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([qt,fe]))}},_getAnchor:function(){return Wt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),gd=function(s,c){return new Vs(s,c)};Ge.mergeOptions({closePopupOnClick:!0}),Ge.include({openPopup:function(s,c,g){return this._initOverlay(Vs,s,c,g).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),xr.include({bindPopup:function(s,c){return this._popup=this._initOverlay(Vs,this._popup,s,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Li||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){vo(s);var c=s.layer||s.target;if(this._popup._source===c&&!(c instanceof ps)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=c,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Vu=qi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){qi.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){qi.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=qi.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",c=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=He("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var c,g,v=this._map,w=this._container,k=v.latLngToContainerPoint(v.getCenter()),H=v.layerPointToContainerPoint(s),ot=this.options.direction,mt=w.offsetWidth,Mt=w.offsetHeight,qt=Wt(this.options.offset),fe=this._getAnchor();ot==="top"?(c=mt/2,g=Mt):ot==="bottom"?(c=mt/2,g=0):ot==="center"?(c=mt/2,g=Mt/2):ot==="right"?(c=0,g=Mt/2):ot==="left"?(c=mt,g=Mt/2):H.x<k.x?(ot="right",c=0,g=Mt/2):(ot="left",c=mt+(qt.x+fe.x)*2,g=Mt/2),s=s.subtract(Wt(c,g,!0)).add(qt).add(fe),In(w,"leaflet-tooltip-right"),In(w,"leaflet-tooltip-left"),In(w,"leaflet-tooltip-top"),In(w,"leaflet-tooltip-bottom"),we(w,"leaflet-tooltip-"+ot),Bn(w,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&li(this._container,s)},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(c)},_getAnchor:function(){return Wt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),md=function(s,c){return new Vu(s,c)};Ge.include({openTooltip:function(s,c,g){return this._initOverlay(Vu,s,c,g).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),xr.include({bindTooltip:function(s,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Vu,this._tooltip,s,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var c=s?"off":"on",g={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?g.add=this._openTooltip:(g.mouseover=this._openTooltip,g.mouseout=this.closeTooltip,g.click=this._openTooltip,this._map?this._addFocusListeners():g.add=this._addFocusListeners),this._tooltip.options.sticky&&(g.mousemove=this._moveTooltip),this[c](g),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Li||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var c=typeof s.getElement=="function"&&s.getElement();c&&(Le(c,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),Le(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var c=typeof s.getElement=="function"&&s.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var c=s.latlng,g,v;this._tooltip.options.sticky&&s.originalEvent&&(g=this._map.mouseEventToContainerPoint(s.originalEvent),v=this._map.containerPointToLayerPoint(g),c=this._map.layerPointToLatLng(v)),this._tooltip.setLatLng(c)}});var Hh=Xo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var c=s&&s.tagName==="DIV"?s:document.createElement("div"),g=this.options;if(g.html instanceof Element?(Ia(c),c.appendChild(g.html)):c.innerHTML=g.html!==!1?g.html:"",g.bgPos){var v=Wt(g.bgPos);c.style.backgroundPosition=-v.x+"px "+-v.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function _d(s){return new Hh(s)}Xo.Default=Oa;var Fa=xr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:re.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){z(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),dn(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ho(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(go(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof Rt?s:new Rt(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var c=this.getPane().children,g=-s(-1/0,1/0),v=0,w=c.length,k;v<w;v++)k=c[v].style.zIndex,c[v]!==this._container&&k&&(g=s(g,+k));isFinite(g)&&(this.options.zIndex=g+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!re.ielt9){li(this._container,this.options.opacity);var s=+new Date,c=!1,g=!1;for(var v in this._tiles){var w=this._tiles[v];if(!(!w.current||!w.loaded)){var k=Math.min(1,(s-w.loaded)/200);li(w.el,k),k<1?c=!0:(w.active?g=!0:this._onOpaqueTile(w),w.active=!0)}}g&&!this._noPrune&&this._pruneTiles(),c&&(ee(this._fadeFrame),this._fadeFrame=Ht(this._updateOpacity,this))}},_onOpaqueTile:E,_initContainer:function(){this._container||(this._container=He("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,c=this.options.maxZoom;if(s!==void 0){for(var g in this._levels)g=Number(g),this._levels[g].el.children.length||g===s?(this._levels[g].el.style.zIndex=c-Math.abs(s-g),this._onUpdateLevel(g)):(dn(this._levels[g].el),this._removeTilesAtZoom(g),this._onRemoveLevel(g),delete this._levels[g]);var v=this._levels[s],w=this._map;return v||(v=this._levels[s]={},v.el=He("div","leaflet-tile-container leaflet-zoom-animated",this._container),v.el.style.zIndex=c,v.origin=w.project(w.unproject(w.getPixelOrigin()),s).round(),v.zoom=s,this._setZoomTransform(v,w.getCenter(),w.getZoom()),E(v.el.offsetWidth),this._onCreateLevel(v)),this._level=v,v}},_onUpdateLevel:E,_onRemoveLevel:E,_onCreateLevel:E,_pruneTiles:function(){if(this._map){var s,c,g=this._map.getZoom();if(g>this.options.maxZoom||g<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)c=this._tiles[s],c.retain=c.current;for(s in this._tiles)if(c=this._tiles[s],c.current&&!c.active){var v=c.coords;this._retainParent(v.x,v.y,v.z,v.z-5)||this._retainChildren(v.x,v.y,v.z,v.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var c in this._tiles)this._tiles[c].coords.z===s&&this._removeTile(c)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)dn(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,c,g,v){var w=Math.floor(s/2),k=Math.floor(c/2),H=g-1,ot=new Rt(+w,+k);ot.z=+H;var mt=this._tileCoordsToKey(ot),Mt=this._tiles[mt];return Mt&&Mt.active?(Mt.retain=!0,!0):(Mt&&Mt.loaded&&(Mt.retain=!0),H>v?this._retainParent(w,k,H,v):!1)},_retainChildren:function(s,c,g,v){for(var w=2*s;w<2*s+2;w++)for(var k=2*c;k<2*c+2;k++){var H=new Rt(w,k);H.z=g+1;var ot=this._tileCoordsToKey(H),mt=this._tiles[ot];if(mt&&mt.active){mt.retain=!0;continue}else mt&&mt.loaded&&(mt.retain=!0);g+1<v&&this._retainChildren(w,k,g+1,v)}},_resetView:function(s){var c=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var c=this.options;return c.minNativeZoom!==void 0&&s<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<s?c.maxNativeZoom:s},_setView:function(s,c,g,v){var w=Math.round(c);this.options.maxZoom!==void 0&&w>this.options.maxZoom||this.options.minZoom!==void 0&&w<this.options.minZoom?w=void 0:w=this._clampZoom(w);var k=this.options.updateWhenZooming&&w!==this._tileZoom;(!v||k)&&(this._tileZoom=w,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),w!==void 0&&this._update(s),g||this._pruneTiles(),this._noPrune=!!g),this._setZoomTransforms(s,c)},_setZoomTransforms:function(s,c){for(var g in this._levels)this._setZoomTransform(this._levels[g],s,c)},_setZoomTransform:function(s,c,g){var v=this._map.getZoomScale(g,s.zoom),w=s.origin.multiplyBy(v).subtract(this._map._getNewPixelOrigin(c,g)).round();re.any3d?mo(s.el,w,v):Bn(s.el,w)},_resetGrid:function(){var s=this._map,c=s.options.crs,g=this._tileSize=this.getTileSize(),v=this._tileZoom,w=this._map.getPixelWorldBounds(this._tileZoom);w&&(this._globalTileRange=this._pxBoundsToTileRange(w)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,c.wrapLng[0]],v).x/g.x),Math.ceil(s.project([0,c.wrapLng[1]],v).x/g.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([c.wrapLat[0],0],v).y/g.x),Math.ceil(s.project([c.wrapLat[1],0],v).y/g.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var c=this._map,g=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),v=c.getZoomScale(g,this._tileZoom),w=c.project(s,this._tileZoom).floor(),k=c.getSize().divideBy(v*2);return new de(w.subtract(k),w.add(k))},_update:function(s){var c=this._map;if(c){var g=this._clampZoom(c.getZoom());if(s===void 0&&(s=c.getCenter()),this._tileZoom!==void 0){var v=this._getTiledPixelBounds(s),w=this._pxBoundsToTileRange(v),k=w.getCenter(),H=[],ot=this.options.keepBuffer,mt=new de(w.getBottomLeft().subtract([ot,-ot]),w.getTopRight().add([ot,-ot]));if(!(isFinite(w.min.x)&&isFinite(w.min.y)&&isFinite(w.max.x)&&isFinite(w.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Mt in this._tiles){var qt=this._tiles[Mt].coords;(qt.z!==this._tileZoom||!mt.contains(new Rt(qt.x,qt.y)))&&(this._tiles[Mt].current=!1)}if(Math.abs(g-this._tileZoom)>1){this._setView(s,g);return}for(var fe=w.min.y;fe<=w.max.y;fe++)for(var De=w.min.x;De<=w.max.x;De++){var wr=new Rt(De,fe);if(wr.z=this._tileZoom,!!this._isValidTile(wr)){var Hn=this._tiles[this._tileCoordsToKey(wr)];Hn?Hn.current=!0:H.push(wr)}}if(H.sort(function(bn,Hi){return bn.distanceTo(k)-Hi.distanceTo(k)}),H.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Nr=document.createDocumentFragment();for(De=0;De<H.length;De++)this._addTile(H[De],Nr);this._level.el.appendChild(Nr)}}}},_isValidTile:function(s){var c=this._map.options.crs;if(!c.infinite){var g=this._globalTileRange;if(!c.wrapLng&&(s.x<g.min.x||s.x>g.max.x)||!c.wrapLat&&(s.y<g.min.y||s.y>g.max.y))return!1}if(!this.options.bounds)return!0;var v=this._tileCoordsToBounds(s);return Oe(this.options.bounds).overlaps(v)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var c=this._map,g=this.getTileSize(),v=s.scaleBy(g),w=v.add(g),k=c.unproject(v,s.z),H=c.unproject(w,s.z);return[k,H]},_tileCoordsToBounds:function(s){var c=this._tileCoordsToNwSe(s),g=new Ue(c[0],c[1]);return this.options.noWrap||(g=this._map.wrapLatLngBounds(g)),g},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var c=s.split(":"),g=new Rt(+c[0],+c[1]);return g.z=+c[2],g},_removeTile:function(s){var c=this._tiles[s];c&&(dn(c.el),delete this._tiles[s],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){we(s,"leaflet-tile");var c=this.getTileSize();s.style.width=c.x+"px",s.style.height=c.y+"px",s.onselectstart=E,s.onmousemove=E,re.ielt9&&this.options.opacity<1&&li(s,this.options.opacity)},_addTile:function(s,c){var g=this._getTilePos(s),v=this._tileCoordsToKey(s),w=this.createTile(this._wrapCoords(s),u(this._tileReady,this,s));this._initTile(w),this.createTile.length<2&&Ht(u(this._tileReady,this,s,null,w)),Bn(w,g),this._tiles[v]={el:w,coords:s,current:!0},c.appendChild(w),this.fire("tileloadstart",{tile:w,coords:s})},_tileReady:function(s,c,g){c&&this.fire("tileerror",{error:c,tile:g,coords:s});var v=this._tileCoordsToKey(s);g=this._tiles[v],g&&(g.loaded=+new Date,this._map._fadeAnimated?(li(g.el,0),ee(this._fadeFrame),this._fadeFrame=Ht(this._updateOpacity,this)):(g.active=!0,this._pruneTiles()),c||(we(g.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:g.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),re.ielt9||!this._map._fadeAnimated?Ht(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var c=new Rt(this._wrapX?y(s.x,this._wrapX):s.x,this._wrapY?y(s.y,this._wrapY):s.y);return c.z=s.z,c},_pxBoundsToTileRange:function(s){var c=this.getTileSize();return new de(s.min.unscaleBy(c).floor(),s.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function yd(s){return new Fa(s)}var Jo=Fa.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,c){this._url=s,c=z(this,c),c.detectRetina&&re.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,c){return this._url===s&&c===void 0&&(c=!0),this._url=s,c||this.redraw(),this},createTile:function(s,c){var g=document.createElement("img");return Le(g,"load",u(this._tileOnLoad,this,c,g)),Le(g,"error",u(this._tileOnError,this,c,g)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(g.referrerPolicy=this.options.referrerPolicy),g.alt="",g.src=this.getTileUrl(s),g},getTileUrl:function(s){var c={r:re.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var g=this._globalTileRange.max.y-s.y;this.options.tms&&(c.y=g),c["-y"]=g}return Q(this._url,i(c,this.options))},_tileOnLoad:function(s,c){re.ielt9?setTimeout(u(s,this,null,c),0):s(null,c)},_tileOnError:function(s,c,g){var v=this.options.errorTileUrl;v&&c.getAttribute("src")!==v&&(c.src=v),s(g,c)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,c=this.options.maxZoom,g=this.options.zoomReverse,v=this.options.zoomOffset;return g&&(s=c-s),s+v},_getSubdomain:function(s){var c=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var s,c;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(c=this._tiles[s].el,c.onload=E,c.onerror=E,!c.complete)){c.src=xt;var g=this._tiles[s].coords;dn(c),delete this._tiles[s],this.fire("tileabort",{tile:c,coords:g})}},_removeTile:function(s){var c=this._tiles[s];if(c)return c.el.setAttribute("src",xt),Fa.prototype._removeTile.call(this,s)},_tileReady:function(s,c,g){if(!(!this._map||g&&g.getAttribute("src")===xt))return Fa.prototype._tileReady.call(this,s,c,g)}});function oc(s,c){return new Jo(s,c)}var ju=Jo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,c){this._url=s;var g=i({},this.defaultWmsParams);for(var v in c)v in this.options||(g[v]=c[v]);c=z(this,c);var w=c.detectRetina&&re.retina?2:1,k=this.getTileSize();g.width=k.x*w,g.height=k.y*w,this.wmsParams=g},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,Jo.prototype.onAdd.call(this,s)},getTileUrl:function(s){var c=this._tileCoordsToNwSe(s),g=this._crs,v=Pe(g.project(c[0]),g.project(c[1])),w=v.min,k=v.max,H=(this._wmsVersion>=1.3&&this._crs===rc?[w.y,w.x,k.y,k.x]:[w.x,w.y,k.x,k.y]).join(","),ot=Jo.prototype.getTileUrl.call(this,s);return ot+G(this.wmsParams,ot,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+H},setParams:function(s,c){return i(this.wmsParams,s),c||this.redraw(),this}});function vd(s,c){return new ju(s,c)}Jo.WMS=ju,oc.wms=vd;var ms=xr.extend({options:{padding:.1},initialize:function(s){z(this,s),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),we(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,c){var g=this._map.getZoomScale(c,this._zoom),v=this._map.getSize().multiplyBy(.5+this.options.padding),w=this._map.project(this._center,c),k=v.multiplyBy(-g).add(w).subtract(this._map._getNewPixelOrigin(s,c));re.any3d?mo(this._container,k,g):Bn(this._container,k)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,c=this._map.getSize(),g=this._map.containerPointToLayerPoint(c.multiplyBy(-s)).round();this._bounds=new de(g,g.add(c.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ac=ms.extend({options:{tolerance:0},getEvents:function(){var s=ms.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ms.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");Le(s,"mousemove",this._onMouseMove,this),Le(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Le(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){ee(this._redrawRequest),delete this._ctx,dn(this._container),an(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var c in this._layers)s=this._layers[c],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ms.prototype._update.call(this);var s=this._bounds,c=this._container,g=s.getSize(),v=re.retina?2:1;Bn(c,s.min),c.width=v*g.x,c.height=v*g.y,c.style.width=g.x+"px",c.style.height=g.y+"px",re.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){ms.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[d(s)]=s;var c=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var c=s._order,g=c.next,v=c.prev;g?g.prev=v:this._drawLast=v,v?v.next=g:this._drawFirst=g,delete s._order,delete this._layers[d(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var c=s.options.dashArray.split(/[, ]+/),g=[],v,w;for(w=0;w<c.length;w++){if(v=Number(c[w]),isNaN(v))return;g.push(v)}s.options._dashArray=g}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||Ht(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var c=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new de,this._redrawBounds.extend(s._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(s._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var c=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,c=this._redrawBounds;if(this._ctx.save(),c){var g=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,g.x,g.y),this._ctx.clip()}this._drawing=!0;for(var v=this._drawFirst;v;v=v.next)s=v.layer,(!c||s._pxBounds&&s._pxBounds.intersects(c))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,c){if(this._drawing){var g,v,w,k,H=s._parts,ot=H.length,mt=this._ctx;if(ot){for(mt.beginPath(),g=0;g<ot;g++){for(v=0,w=H[g].length;v<w;v++)k=H[g][v],mt[v?"lineTo":"moveTo"](k.x,k.y);c&&mt.closePath()}this._fillStroke(mt,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var c=s._point,g=this._ctx,v=Math.max(Math.round(s._radius),1),w=(Math.max(Math.round(s._radiusY),1)||v)/v;w!==1&&(g.save(),g.scale(1,w)),g.beginPath(),g.arc(c.x,c.y/w,v,0,Math.PI*2,!1),w!==1&&g.restore(),this._fillStroke(g,s)}},_fillStroke:function(s,c){var g=c.options;g.fill&&(s.globalAlpha=g.fillOpacity,s.fillStyle=g.fillColor||g.color,s.fill(g.fillRule||"evenodd")),g.stroke&&g.weight!==0&&(s.setLineDash&&s.setLineDash(c.options&&c.options._dashArray||[]),s.globalAlpha=g.opacity,s.lineWidth=g.weight,s.strokeStyle=g.color,s.lineCap=g.lineCap,s.lineJoin=g.lineJoin,s.stroke())},_onClick:function(s){for(var c=this._map.mouseEventToLayerPoint(s),g,v,w=this._drawFirst;w;w=w.next)g=w.layer,g.options.interactive&&g._containsPoint(c)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(g))&&(v=g);this._fireEvent(v?[v]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,c)}},_handleMouseOut:function(s){var c=this._hoveredLayer;c&&(In(this._container,"leaflet-interactive"),this._fireEvent([c],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,c){if(!this._mouseHoverThrottled){for(var g,v,w=this._drawFirst;w;w=w.next)g=w.layer,g.options.interactive&&g._containsPoint(c)&&(v=g);v!==this._hoveredLayer&&(this._handleMouseOut(s),v&&(we(this._container,"leaflet-interactive"),this._fireEvent([v],s,"mouseover"),this._hoveredLayer=v)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,c,g){this._map._fireDOMEvent(c,g||c.type,s)},_bringToFront:function(s){var c=s._order;if(c){var g=c.next,v=c.prev;if(g)g.prev=v;else return;v?v.next=g:g&&(this._drawFirst=g),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(s)}},_bringToBack:function(s){var c=s._order;if(c){var g=c.next,v=c.prev;if(v)v.next=g;else return;g?g.prev=v:v&&(this._drawLast=v),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(s)}}});function qu(s){return re.canvas?new ac(s):null}var za=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Cd={_initContainer:function(){this._container=He("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ms.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var c=s._container=za("shape");we(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",s._path=za("path"),c.appendChild(s._path),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){var c=s._container;this._container.appendChild(c),s.options.interactive&&s.addInteractiveTarget(c)},_removePath:function(s){var c=s._container;dn(c),s.removeInteractiveTarget(c),delete this._layers[d(s)]},_updateStyle:function(s){var c=s._stroke,g=s._fill,v=s.options,w=s._container;w.stroked=!!v.stroke,w.filled=!!v.fill,v.stroke?(c||(c=s._stroke=za("stroke")),w.appendChild(c),c.weight=v.weight+"px",c.color=v.color,c.opacity=v.opacity,v.dashArray?c.dashStyle=rt(v.dashArray)?v.dashArray.join(" "):v.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=v.lineCap.replace("butt","flat"),c.joinstyle=v.lineJoin):c&&(w.removeChild(c),s._stroke=null),v.fill?(g||(g=s._fill=za("fill")),w.appendChild(g),g.color=v.fillColor||v.color,g.opacity=v.fillOpacity):g&&(w.removeChild(g),s._fill=null)},_updateCircle:function(s){var c=s._point.round(),g=Math.round(s._radius),v=Math.round(s._radiusY||g);this._setPath(s,s._empty()?"M0 0":"AL "+c.x+","+c.y+" "+g+","+v+" 0,"+65535*360)},_setPath:function(s,c){s._path.v=c},_bringToFront:function(s){Ho(s._container)},_bringToBack:function(s){go(s._container)}},$o=re.vml?za:_t,cr=ms.extend({_initContainer:function(){this._container=$o("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=$o("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){dn(this._container),an(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ms.prototype._update.call(this);var s=this._bounds,c=s.getSize(),g=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,g.setAttribute("width",c.x),g.setAttribute("height",c.y)),Bn(g,s.min),g.setAttribute("viewBox",[s.min.x,s.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(s){var c=s._path=$o("path");s.options.className&&we(c,s.options.className),s.options.interactive&&we(c,"leaflet-interactive"),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){dn(s._path),s.removeInteractiveTarget(s._path),delete this._layers[d(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var c=s._path,g=s.options;c&&(g.stroke?(c.setAttribute("stroke",g.color),c.setAttribute("stroke-opacity",g.opacity),c.setAttribute("stroke-width",g.weight),c.setAttribute("stroke-linecap",g.lineCap),c.setAttribute("stroke-linejoin",g.lineJoin),g.dashArray?c.setAttribute("stroke-dasharray",g.dashArray):c.removeAttribute("stroke-dasharray"),g.dashOffset?c.setAttribute("stroke-dashoffset",g.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),g.fill?(c.setAttribute("fill",g.fillColor||g.color),c.setAttribute("fill-opacity",g.fillOpacity),c.setAttribute("fill-rule",g.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(s,c){this._setPath(s,Et(s._parts,c))},_updateCircle:function(s){var c=s._point,g=Math.max(Math.round(s._radius),1),v=Math.max(Math.round(s._radiusY),1)||g,w="a"+g+","+v+" 0 1,0 ",k=s._empty()?"M0 0":"M"+(c.x-g)+","+c.y+w+g*2+",0 "+w+-g*2+",0 ";this._setPath(s,k)},_setPath:function(s,c){s._path.setAttribute("d",c)},_bringToFront:function(s){Ho(s._path)},_bringToBack:function(s){go(s._path)}});re.vml&&cr.include(Cd);function br(s){return re.svg||re.vml?new cr(s):null}Ge.include({getRenderer:function(s){var c=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var c=this._paneRenderers[s];return c===void 0&&(c=this._createRenderer({pane:s}),this._paneRenderers[s]=c),c},_createRenderer:function(s){return this.options.preferCanvas&&qu(s)||br(s)}});var uc=Us.extend({initialize:function(s,c){Us.prototype.initialize.call(this,this._boundsToLatLngs(s),c)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Oe(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function xi(s,c){return new uc(s,c)}cr.create=$o,cr.pointsToPath=Et,gs.geometryToLayer=Nu,gs.coordsToLatLng=Ou,gs.coordsToLatLngs=Ru,gs.latLngToCoords=Bu,gs.latLngsToCoords=Fu,gs.getFeature=Wo,gs.asFeature=zu,Ge.mergeOptions({boxZoom:!0});var ye=Lr.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){Le(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){an(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){dn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ta(),ql(),this._startPoint=this._map.mouseEventToContainerPoint(s),Le(document,{contextmenu:vo,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=He("div","leaflet-zoom-box",this._container),we(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var c=new de(this._point,this._startPoint),g=c.getSize();Bn(this._box,c.min),this._box.style.width=g.x+"px",this._box.style.height=g.y+"px"},_finish:function(){this._moved&&(dn(this._box),In(this._container,"leaflet-crosshair")),Aa(),Hl(),an(document,{contextmenu:vo,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var c=new Ue(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ge.addInitHook("addHandler","boxZoom",ye),Ge.mergeOptions({doubleClickZoom:!0});var lc=Lr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var c=this._map,g=c.getZoom(),v=c.options.zoomDelta,w=s.originalEvent.shiftKey?g-v:g+v;c.options.doubleClickZoom==="center"?c.setZoom(w):c.setZoomAround(s.containerPoint,w)}});Ge.addInitHook("addHandler","doubleClickZoom",lc),Ge.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Hu=Lr.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new zs(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}we(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){In(this._map._container,"leaflet-grab"),In(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=Oe(this._map.options.maxBounds);this._offsetLimit=Pe(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var c=this._lastTime=+new Date,g=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(g),this._times.push(c),this._prunePositions(c)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,c){return s-(s-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;s.x<c.min.x&&(s.x=this._viscousLimit(s.x,c.min.x)),s.y<c.min.y&&(s.y=this._viscousLimit(s.y,c.min.y)),s.x>c.max.x&&(s.x=this._viscousLimit(s.x,c.max.x)),s.y>c.max.y&&(s.y=this._viscousLimit(s.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,c=Math.round(s/2),g=this._initialWorldOffset,v=this._draggable._newPos.x,w=(v-c+g)%s+c-g,k=(v+c+g)%s-c-g,H=Math.abs(w+g)<Math.abs(k+g)?w:k;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=H},_onDragEnd:function(s){var c=this._map,g=c.options,v=!g.inertia||s.noInertia||this._times.length<2;if(c.fire("dragend",s),v)c.fire("moveend");else{this._prunePositions(+new Date);var w=this._lastPos.subtract(this._positions[0]),k=(this._lastTime-this._times[0])/1e3,H=g.easeLinearity,ot=w.multiplyBy(H/k),mt=ot.distanceTo([0,0]),Mt=Math.min(g.inertiaMaxSpeed,mt),qt=ot.multiplyBy(Mt/mt),fe=Mt/(g.inertiaDeceleration*H),De=qt.multiplyBy(-fe/2).round();!De.x&&!De.y?c.fire("moveend"):(De=c._limitOffset(De,c.options.maxBounds),Ht(function(){c.panBy(De,{duration:fe,easeLinearity:H,noMoveStart:!0,animate:!0})}))}}});Ge.addInitHook("addHandler","dragging",Hu),Ge.mergeOptions({keyboard:!0,keyboardPanDelta:80});var _s=Lr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),Le(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),an(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,c=document.documentElement,g=s.scrollTop||c.scrollTop,v=s.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(v,g)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var c=this._panKeys={},g=this.keyCodes,v,w;for(v=0,w=g.left.length;v<w;v++)c[g.left[v]]=[-1*s,0];for(v=0,w=g.right.length;v<w;v++)c[g.right[v]]=[s,0];for(v=0,w=g.down.length;v<w;v++)c[g.down[v]]=[0,s];for(v=0,w=g.up.length;v<w;v++)c[g.up[v]]=[0,-1*s]},_setZoomDelta:function(s){var c=this._zoomKeys={},g=this.keyCodes,v,w;for(v=0,w=g.zoomIn.length;v<w;v++)c[g.zoomIn[v]]=s;for(v=0,w=g.zoomOut.length;v<w;v++)c[g.zoomOut[v]]=-s},_addHooks:function(){Le(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){an(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var c=s.keyCode,g=this._map,v;if(c in this._panKeys){if(!g._panAnim||!g._panAnim._inProgress)if(v=this._panKeys[c],s.shiftKey&&(v=Wt(v).multiplyBy(3)),g.options.maxBounds&&(v=g._limitOffset(Wt(v),g.options.maxBounds)),g.options.worldCopyJump){var w=g.wrapLatLng(g.unproject(g.project(g.getCenter()).add(v)));g.panTo(w)}else g.panBy(v)}else if(c in this._zoomKeys)g.setZoom(g.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&g._popup&&g._popup.options.closeOnEscapeKey)g.closePopup();else return;vo(s)}}});Ge.addInitHook("addHandler","keyboard",_s),Ge.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Dr=Lr.extend({addHooks:function(){Le(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){an(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var c=Ah(s),g=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var v=Math.max(g-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),v),vo(s)},_performZoom:function(){var s=this._map,c=s.getZoom(),g=this._map.options.zoomSnap||0;s._stop();var v=this._delta/(this._map.options.wheelPxPerZoomLevel*4),w=4*Math.log(2/(1+Math.exp(-Math.abs(v))))/Math.LN2,k=g?Math.ceil(w/g)*g:w,H=s._limitZoom(c+(this._delta>0?k:-k))-c;this._delta=0,this._startTime=null,H&&(s.options.scrollWheelZoom==="center"?s.setZoom(c+H):s.setZoomAround(this._lastMousePos,c+H))}});Ge.addInitHook("addHandler","scrollWheelZoom",Dr);var Zh=600;Ge.mergeOptions({tapHold:re.touchNative&&re.safari&&re.mobile,tapTolerance:15});var Wr=Lr.extend({addHooks:function(){Le(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){an(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var c=s.touches[0];this._startPos=this._newPos=new Rt(c.clientX,c.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(Le(document,"touchend",nr),Le(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),Zh),Le(document,"touchend touchcancel contextmenu",this._cancel,this),Le(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){an(document,"touchend",nr),an(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),an(document,"touchend touchcancel contextmenu",this._cancel,this),an(document,"touchmove",this._onMove,this)},_onMove:function(s){var c=s.touches[0];this._newPos=new Rt(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,c){var g=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});g._simulated=!0,c.target.dispatchEvent(g)}});Ge.addInitHook("addHandler","tapHold",Wr),Ge.mergeOptions({touchZoom:re.touch,bounceAtZoomLimits:!0});var Yr=Lr.extend({addHooks:function(){we(this._map._container,"leaflet-touch-zoom"),Le(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){In(this._map._container,"leaflet-touch-zoom"),an(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var c=this._map;if(!(!s.touches||s.touches.length!==2||c._animatingZoom||this._zooming)){var g=c.mouseEventToContainerPoint(s.touches[0]),v=c.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(g.add(v)._divideBy(2))),this._startDist=g.distanceTo(v),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),Le(document,"touchmove",this._onTouchMove,this),Le(document,"touchend touchcancel",this._onTouchEnd,this),nr(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var c=this._map,g=c.mouseEventToContainerPoint(s.touches[0]),v=c.mouseEventToContainerPoint(s.touches[1]),w=g.distanceTo(v)/this._startDist;if(this._zoom=c.getScaleZoom(w,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&w<1||this._zoom>c.getMaxZoom()&&w>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,w===1)return}else{var k=g._add(v)._divideBy(2)._subtract(this._centerPoint);if(w===1&&k.x===0&&k.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(k),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),ee(this._animRequest);var H=u(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Ht(H,this,!0),nr(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ee(this._animRequest),an(document,"touchmove",this._onTouchMove,this),an(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ge.addInitHook("addHandler","touchZoom",Yr),Ge.BoxZoom=ye,Ge.DoubleClickZoom=lc,Ge.Drag=Hu,Ge.Keyboard=_s,Ge.ScrollWheelZoom=Dr,Ge.TapHold=Wr,Ge.TouchZoom=Yr,n.Bounds=de,n.Browser=re,n.CRS=Lt,n.Canvas=ac,n.Circle=sc,n.CircleMarker=ji,n.Class=Bt,n.Control=Ce,n.DivIcon=Hh,n.DivOverlay=qi,n.DomEvent=Su,n.DomUtil=Qp,n.Draggable=zs,n.Evented=Zt,n.FeatureGroup=Li,n.GeoJSON=gs,n.GridLayer=Fa,n.Handler=Lr,n.Icon=Xo,n.ImageOverlay=Yo,n.LatLng=ve,n.LatLngBounds=Ue,n.Layer=xr,n.LayerGroup=Ko,n.LineUtil=Tu,n.Map=Ge,n.Marker=Du,n.Mixin=id,n.Path=ps,n.Point=Rt,n.PolyUtil=sd,n.Polygon=Us,n.Polyline=ds,n.Popup=Vs,n.PosAnimation=kh,n.Projection=Vi,n.Rectangle=uc,n.Renderer=ms,n.SVG=cr,n.SVGOverlay=qh,n.TileLayer=Jo,n.Tooltip=Vu,n.Transformation=zt,n.Util=Ae,n.VideoOverlay=Ba,n.bind=u,n.bounds=Pe,n.canvas=qu,n.circle=xo,n.circleMarker=Gh,n.control=Co,n.divIcon=_d,n.extend=i,n.featureGroup=ld,n.geoJSON=Uu,n.geoJson=Vh,n.gridLayer=yd,n.icon=cd,n.imageOverlay=pd,n.latLng=ce,n.latLngBounds=Oe,n.layerGroup=ud,n.map=Dh,n.marker=hd,n.point=Wt,n.polygon=Ra,n.polyline=fd,n.popup=gd,n.rectangle=xi,n.setOptions=z,n.stamp=d,n.svg=br,n.svgOverlay=dd,n.tileLayer=oc,n.tooltip=md,n.transformation=F,n.version=r,n.videoOverlay=jh;var bo=window.L;n.noConflict=function(){return window.L=bo,this},window.L=n})}(rf,rf.exports)),rf.exports}var h4=_v();const Rr=fv(h4);(()=>{var xm,bm;var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,u=(a,l)=>()=>(l||a((l={exports:{}}).exports,l),l.exports),f=(a,l,h,p)=>{if(l&&typeof l=="object"||typeof l=="function")for(let m of r(l))!o.call(a,m)&&m!==h&&t(a,m,{get:()=>l[m],enumerable:!(p=n(l,m))||p.enumerable});return a},d=(a,l,h)=>(h=a!=null?e(i(a)):{},f(l||!a||!a.__esModule?t(h,"default",{value:a,enumerable:!0}):h,a)),_=u((a,l)=>{function h(){this.__data__=[],this.size=0}l.exports=h}),y=u((a,l)=>{function h(p,m){return p===m||p!==p&&m!==m}l.exports=h}),E=u((a,l)=>{var h=y();function p(m,C){for(var x=m.length;x--;)if(h(m[x][0],C))return x;return-1}l.exports=p}),S=u((a,l)=>{var h=E(),p=Array.prototype,m=p.splice;function C(x){var b=this.__data__,M=h(b,x);if(M<0)return!1;var A=b.length-1;return M==A?b.pop():m.call(b,M,1),--this.size,!0}l.exports=C}),T=u((a,l)=>{var h=E();function p(m){var C=this.__data__,x=h(C,m);return x<0?void 0:C[x][1]}l.exports=p}),I=u((a,l)=>{var h=E();function p(m){return h(this.__data__,m)>-1}l.exports=p}),z=u((a,l)=>{var h=E();function p(m,C){var x=this.__data__,b=h(x,m);return b<0?(++this.size,x.push([m,C])):x[b][1]=C,this}l.exports=p}),G=u((a,l)=>{var h=_(),p=S(),m=T(),C=I(),x=z();function b(M){var A=-1,q=M==null?0:M.length;for(this.clear();++A<q;){var U=M[A];this.set(U[0],U[1])}}b.prototype.clear=h,b.prototype.delete=p,b.prototype.get=m,b.prototype.has=C,b.prototype.set=x,l.exports=b}),W=u((a,l)=>{var h=G();function p(){this.__data__=new h,this.size=0}l.exports=p}),Q=u((a,l)=>{function h(p){var m=this.__data__,C=m.delete(p);return this.size=m.size,C}l.exports=h}),rt=u((a,l)=>{function h(p){return this.__data__.get(p)}l.exports=h}),gt=u((a,l)=>{function h(p){return this.__data__.has(p)}l.exports=h}),xt=u((a,l)=>{var h=typeof To=="object"&&To&&To.Object===Object&&To;l.exports=h}),bt=u((a,l)=>{var h=xt(),p=typeof self=="object"&&self&&self.Object===Object&&self,m=h||p||Function("return this")();l.exports=m}),Dt=u((a,l)=>{var h=bt(),p=h.Symbol;l.exports=p}),Nt=u((a,l)=>{var h=Dt(),p=Object.prototype,m=p.hasOwnProperty,C=p.toString,x=h?h.toStringTag:void 0;function b(M){var A=m.call(M,x),q=M[x];try{M[x]=void 0;var U=!0}catch{}var ct=C.call(M);return U&&(A?M[x]=q:delete M[x]),ct}l.exports=b}),Ot=u((a,l)=>{var h=Object.prototype,p=h.toString;function m(C){return p.call(C)}l.exports=m}),te=u((a,l)=>{var h=Dt(),p=Nt(),m=Ot(),C="[object Null]",x="[object Undefined]",b=h?h.toStringTag:void 0;function M(A){return A==null?A===void 0?x:C:b&&b in Object(A)?p(A):m(A)}l.exports=M}),Ht=u((a,l)=>{function h(p){var m=typeof p;return p!=null&&(m=="object"||m=="function")}l.exports=h}),ee=u((a,l)=>{var h=te(),p=Ht(),m="[object AsyncFunction]",C="[object Function]",x="[object GeneratorFunction]",b="[object Proxy]";function M(A){if(!p(A))return!1;var q=h(A);return q==C||q==x||q==m||q==b}l.exports=M}),Ae=u((a,l)=>{var h=bt(),p=h["__core-js_shared__"];l.exports=p}),Bt=u((a,l)=>{var h=Ae(),p=function(){var C=/[^.]+$/.exec(h&&h.keys&&h.keys.IE_PROTO||"");return C?"Symbol(src)_1."+C:""}();function m(C){return!!p&&p in C}l.exports=m}),le=u((a,l)=>{var h=Function.prototype,p=h.toString;function m(C){if(C!=null){try{return p.call(C)}catch{}try{return C+""}catch{}}return""}l.exports=m}),jt=u((a,l)=>{var h=ee(),p=Bt(),m=Ht(),C=le(),x=/[\\^$.*+?()[\]{}|]/g,b=/^\[object .+?Constructor\]$/,M=Function.prototype,A=Object.prototype,q=M.toString,U=A.hasOwnProperty,ct=RegExp("^"+q.call(U).replace(x,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ft(Tt){if(!m(Tt)||p(Tt))return!1;var Vt=h(Tt)?ct:b;return Vt.test(C(Tt))}l.exports=ft}),Zt=u((a,l)=>{function h(p,m){return p==null?void 0:p[m]}l.exports=h}),Rt=u((a,l)=>{var h=jt(),p=Zt();function m(C,x){var b=p(C,x);return h(b)?b:void 0}l.exports=m}),tn=u((a,l)=>{var h=Rt(),p=bt(),m=h(p,"Map");l.exports=m}),Wt=u((a,l)=>{var h=Rt(),p=h(Object,"create");l.exports=p}),de=u((a,l)=>{var h=Wt();function p(){this.__data__=h?h(null):{},this.size=0}l.exports=p}),Pe=u((a,l)=>{function h(p){var m=this.has(p)&&delete this.__data__[p];return this.size-=m?1:0,m}l.exports=h}),Ue=u((a,l)=>{var h=Wt(),p="__lodash_hash_undefined__",m=Object.prototype,C=m.hasOwnProperty;function x(b){var M=this.__data__;if(h){var A=M[b];return A===p?void 0:A}return C.call(M,b)?M[b]:void 0}l.exports=x}),Oe=u((a,l)=>{var h=Wt(),p=Object.prototype,m=p.hasOwnProperty;function C(x){var b=this.__data__;return h?b[x]!==void 0:m.call(b,x)}l.exports=C}),ve=u((a,l)=>{var h=Wt(),p="__lodash_hash_undefined__";function m(C,x){var b=this.__data__;return this.size+=this.has(C)?0:1,b[C]=h&&x===void 0?p:x,this}l.exports=m}),ce=u((a,l)=>{var h=de(),p=Pe(),m=Ue(),C=Oe(),x=ve();function b(M){var A=-1,q=M==null?0:M.length;for(this.clear();++A<q;){var U=M[A];this.set(U[0],U[1])}}b.prototype.clear=h,b.prototype.delete=p,b.prototype.get=m,b.prototype.has=C,b.prototype.set=x,l.exports=b}),Lt=u((a,l)=>{var h=ce(),p=G(),m=tn();function C(){this.size=0,this.__data__={hash:new h,map:new(m||p),string:new h}}l.exports=C}),Y=u((a,l)=>{function h(p){var m=typeof p;return m=="string"||m=="number"||m=="symbol"||m=="boolean"?p!=="__proto__":p===null}l.exports=h}),$=u((a,l)=>{var h=Y();function p(m,C){var x=m.__data__;return h(C)?x[typeof C=="string"?"string":"hash"]:x.map}l.exports=p}),J=u((a,l)=>{var h=$();function p(m){var C=h(this,m).delete(m);return this.size-=C?1:0,C}l.exports=p}),zt=u((a,l)=>{var h=$();function p(m){return h(this,m).get(m)}l.exports=p}),F=u((a,l)=>{var h=$();function p(m){return h(this,m).has(m)}l.exports=p}),V=u((a,l)=>{var h=$();function p(m,C){var x=h(this,m),b=x.size;return x.set(m,C),this.size+=x.size==b?0:1,this}l.exports=p}),et=u((a,l)=>{var h=Lt(),p=J(),m=zt(),C=F(),x=V();function b(M){var A=-1,q=M==null?0:M.length;for(this.clear();++A<q;){var U=M[A];this.set(U[0],U[1])}}b.prototype.clear=h,b.prototype.delete=p,b.prototype.get=m,b.prototype.has=C,b.prototype.set=x,l.exports=b}),_t=u((a,l)=>{var h=G(),p=tn(),m=et(),C=200;function x(b,M){var A=this.__data__;if(A instanceof h){var q=A.__data__;if(!p||q.length<C-1)return q.push([b,M]),this.size=++A.size,this;A=this.__data__=new m(q)}return A.set(b,M),this.size=A.size,this}l.exports=x}),Et=u((a,l)=>{var h=G(),p=W(),m=Q(),C=rt(),x=gt(),b=_t();function M(A){var q=this.__data__=new h(A);this.size=q.size}M.prototype.clear=p,M.prototype.delete=m,M.prototype.get=C,M.prototype.has=x,M.prototype.set=b,l.exports=M}),yt=u((a,l)=>{var h=Rt(),p=function(){try{var m=h(Object,"defineProperty");return m({},"",{}),m}catch{}}();l.exports=p}),Pt=u((a,l)=>{var h=yt();function p(m,C,x){C=="__proto__"&&h?h(m,C,{configurable:!0,enumerable:!0,value:x,writable:!0}):m[C]=x}l.exports=p}),At=u((a,l)=>{var h=Pt(),p=y();function m(C,x,b){(b!==void 0&&!p(C[x],b)||b===void 0&&!(x in C))&&h(C,x,b)}l.exports=m}),It=u((a,l)=>{function h(p){return function(m,C,x){for(var b=-1,M=Object(m),A=x(m),q=A.length;q--;){var U=A[p?q:++b];if(C(M[U],U,M)===!1)break}return m}}l.exports=h}),wt=u((a,l)=>{var h=It(),p=h();l.exports=p}),Kt=u((a,l)=>{var h=bt(),p=typeof a=="object"&&a&&!a.nodeType&&a,m=p&&typeof l=="object"&&l&&!l.nodeType&&l,C=m&&m.exports===p,x=C?h.Buffer:void 0,b=x?x.allocUnsafe:void 0;function M(A,q){if(q)return A.slice();var U=A.length,ct=b?b(U):new A.constructor(U);return A.copy(ct),ct}l.exports=M}),Ut=u((a,l)=>{var h=bt(),p=h.Uint8Array;l.exports=p}),ne=u((a,l)=>{var h=Ut();function p(m){var C=new m.constructor(m.byteLength);return new h(C).set(new h(m)),C}l.exports=p}),he=u((a,l)=>{var h=ne();function p(m,C){var x=C?h(m.buffer):m.buffer;return new m.constructor(x,m.byteOffset,m.length)}l.exports=p}),ke=u((a,l)=>{function h(p,m){var C=-1,x=p.length;for(m||(m=Array(x));++C<x;)m[C]=p[C];return m}l.exports=h}),Je=u((a,l)=>{var h=Ht(),p=Object.create,m=function(){function C(){}return function(x){if(!h(x))return{};if(p)return p(x);C.prototype=x;var b=new C;return C.prototype=void 0,b}}();l.exports=m}),qe=u((a,l)=>{function h(p,m){return function(C){return p(m(C))}}l.exports=h}),ur=u((a,l)=>{var h=qe(),p=h(Object.getPrototypeOf,Object);l.exports=p}),qn=u((a,l)=>{var h=Object.prototype;function p(m){var C=m&&m.constructor,x=typeof C=="function"&&C.prototype||h;return m===x}l.exports=p}),Kr=u((a,l)=>{var h=Je(),p=ur(),m=qn();function C(x){return typeof x.constructor=="function"&&!m(x)?h(p(x)):{}}l.exports=C}),er=u((a,l)=>{function h(p){return p!=null&&typeof p=="object"}l.exports=h}),Rs=u((a,l)=>{var h=te(),p=er(),m="[object Arguments]";function C(x){return p(x)&&h(x)==m}l.exports=C}),po=u((a,l)=>{var h=Rs(),p=er(),m=Object.prototype,C=m.hasOwnProperty,x=m.propertyIsEnumerable,b=h(function(){return arguments}())?h:function(M){return p(M)&&C.call(M,"callee")&&!x.call(M,"callee")};l.exports=b}),Rn=u((a,l)=>{var h=Array.isArray;l.exports=h}),Xr=u((a,l)=>{var h=9007199254740991;function p(m){return typeof m=="number"&&m>-1&&m%1==0&&m<=h}l.exports=p}),zi=u((a,l)=>{var h=ee(),p=Xr();function m(C){return C!=null&&p(C.length)&&!h(C)}l.exports=m}),Np=u((a,l)=>{var h=zi(),p=er();function m(C){return p(C)&&h(C)}l.exports=m}),Op=u((a,l)=>{function h(){return!1}l.exports=h}),Ol=u((a,l)=>{var h=bt(),p=Op(),m=typeof a=="object"&&a&&!a.nodeType&&a,C=m&&typeof l=="object"&&l&&!l.nodeType&&l,x=C&&C.exports===m,b=x?h.Buffer:void 0,M=b?b.isBuffer:void 0,A=M||p;l.exports=A}),gh=u((a,l)=>{var h=te(),p=ur(),m=er(),C="[object Object]",x=Function.prototype,b=Object.prototype,M=x.toString,A=b.hasOwnProperty,q=M.call(Object);function U(ct){if(!m(ct)||h(ct)!=C)return!1;var ft=p(ct);if(ft===null)return!0;var Tt=A.call(ft,"constructor")&&ft.constructor;return typeof Tt=="function"&&Tt instanceof Tt&&M.call(Tt)==q}l.exports=U}),mh=u((a,l)=>{var h=te(),p=Xr(),m=er(),C="[object Arguments]",x="[object Array]",b="[object Boolean]",M="[object Date]",A="[object Error]",q="[object Function]",U="[object Map]",ct="[object Number]",ft="[object Object]",Tt="[object RegExp]",Vt="[object Set]",Yt="[object String]",Ve="[object WeakMap]",j="[object ArrayBuffer]",Z="[object DataView]",nt="[object Float32Array]",pt="[object Float64Array]",st="[object Int8Array]",ht="[object Int16Array]",P="[object Int32Array]",D="[object Uint8Array]",O="[object Uint8ClampedArray]",N="[object Uint16Array]",R="[object Uint32Array]",B={};B[nt]=B[pt]=B[st]=B[ht]=B[P]=B[D]=B[O]=B[N]=B[R]=!0,B[C]=B[x]=B[j]=B[b]=B[Z]=B[M]=B[A]=B[q]=B[U]=B[ct]=B[ft]=B[Tt]=B[Vt]=B[Yt]=B[Ve]=!1;function X(K){return m(K)&&p(K.length)&&!!B[h(K)]}l.exports=X}),Rp=u((a,l)=>{function h(p){return function(m){return p(m)}}l.exports=h}),Bp=u((a,l)=>{var h=xt(),p=typeof a=="object"&&a&&!a.nodeType&&a,m=p&&typeof l=="object"&&l&&!l.nodeType&&l,C=m&&m.exports===p,x=C&&h.process,b=function(){try{var M=m&&m.require&&m.require("util").types;return M||x&&x.binding&&x.binding("util")}catch{}}();l.exports=b}),_h=u((a,l)=>{var h=mh(),p=Rp(),m=Bp(),C=m&&m.isTypedArray,x=C?p(C):h;l.exports=x}),yh=u((a,l)=>{function h(p,m){if(!(m==="constructor"&&typeof p[m]=="function")&&m!="__proto__")return p[m]}l.exports=h}),Fp=u((a,l)=>{var h=Pt(),p=y(),m=Object.prototype,C=m.hasOwnProperty;function x(b,M,A){var q=b[M];(!(C.call(b,M)&&p(q,A))||A===void 0&&!(M in b))&&h(b,M,A)}l.exports=x}),zp=u((a,l)=>{var h=Fp(),p=Pt();function m(C,x,b,M){var A=!b;b||(b={});for(var q=-1,U=x.length;++q<U;){var ct=x[q],ft=M?M(b[ct],C[ct],ct,b,C):void 0;ft===void 0&&(ft=C[ct]),A?p(b,ct,ft):h(b,ct,ft)}return b}l.exports=m}),Rl=u((a,l)=>{function h(p,m){for(var C=-1,x=Array(p);++C<p;)x[C]=m(C);return x}l.exports=h}),vh=u((a,l)=>{var h=9007199254740991,p=/^(?:0|[1-9]\d*)$/;function m(C,x){var b=typeof C;return x=x??h,!!x&&(b=="number"||b!="symbol"&&p.test(C))&&C>-1&&C%1==0&&C<x}l.exports=m}),Gp=u((a,l)=>{var h=Rl(),p=po(),m=Rn(),C=Ol(),x=vh(),b=_h(),M=Object.prototype,A=M.hasOwnProperty;function q(U,ct){var ft=m(U),Tt=!ft&&p(U),Vt=!ft&&!Tt&&C(U),Yt=!ft&&!Tt&&!Vt&&b(U),Ve=ft||Tt||Vt||Yt,j=Ve?h(U.length,String):[],Z=j.length;for(var nt in U)(ct||A.call(U,nt))&&!(Ve&&(nt=="length"||Vt&&(nt=="offset"||nt=="parent")||Yt&&(nt=="buffer"||nt=="byteLength"||nt=="byteOffset")||x(nt,Z)))&&j.push(nt);return j}l.exports=q}),Up=u((a,l)=>{function h(p){var m=[];if(p!=null)for(var C in Object(p))m.push(C);return m}l.exports=h}),Vp=u((a,l)=>{var h=Ht(),p=qn(),m=Up(),C=Object.prototype,x=C.hasOwnProperty;function b(M){if(!h(M))return m(M);var A=p(M),q=[];for(var U in M)U=="constructor"&&(A||!x.call(M,U))||q.push(U);return q}l.exports=b}),Ei=u((a,l)=>{var h=Gp(),p=Vp(),m=zi();function C(x){return m(x)?h(x,!0):p(x)}l.exports=C}),re=u((a,l)=>{var h=zp(),p=Ei();function m(C){return h(C,p(C))}l.exports=m}),Ch=u((a,l)=>{var h=At(),p=Kt(),m=he(),C=ke(),x=Kr(),b=po(),M=Rn(),A=Np(),q=Ol(),U=ee(),ct=Ht(),ft=gh(),Tt=_h(),Vt=yh(),Yt=re();function Ve(j,Z,nt,pt,st,ht,P){var D=Vt(j,nt),O=Vt(Z,nt),N=P.get(O);if(N){h(j,nt,N);return}var R=ht?ht(D,O,nt+"",j,Z,P):void 0,B=R===void 0;if(B){var X=M(O),K=!X&&q(O),tt=!X&&!K&&Tt(O);R=O,X||K||tt?M(D)?R=D:A(D)?R=C(D):K?(B=!1,R=p(O,!0)):tt?(B=!1,R=m(O,!0)):R=[]:ft(O)||b(O)?(R=D,b(D)?R=Yt(D):(!ct(D)||U(D))&&(R=x(O))):B=!1}B&&(P.set(O,R),st(R,O,pt,ht,P),P.delete(O)),h(j,nt,R)}l.exports=Ve}),Eh=u((a,l)=>{var h=Et(),p=At(),m=wt(),C=Ch(),x=Ht(),b=Ei(),M=yh();function A(q,U,ct,ft,Tt){q!==U&&m(U,function(Vt,Yt){if(Tt||(Tt=new h),x(Vt))C(q,U,Yt,ct,A,ft,Tt);else{var Ve=ft?ft(M(q,Yt),Vt,Yt+"",q,U,Tt):void 0;Ve===void 0&&(Ve=Vt),p(q,Yt,Ve)}},b)}l.exports=A}),Bl=u((a,l)=>{function h(p){return p}l.exports=h}),Lh=u((a,l)=>{function h(p,m,C){switch(C.length){case 0:return p.call(m);case 1:return p.call(m,C[0]);case 2:return p.call(m,C[0],C[1]);case 3:return p.call(m,C[0],C[1],C[2])}return p.apply(m,C)}l.exports=h}),Fl=u((a,l)=>{var h=Lh(),p=Math.max;function m(C,x,b){return x=p(x===void 0?C.length-1:x,0),function(){for(var M=arguments,A=-1,q=p(M.length-x,0),U=Array(q);++A<q;)U[A]=M[x+A];A=-1;for(var ct=Array(x+1);++A<x;)ct[A]=M[A];return ct[x]=b(U),h(C,this,ct)}}l.exports=m}),xh=u((a,l)=>{function h(p){return function(){return p}}l.exports=h}),qo=u((a,l)=>{var h=xh(),p=yt(),m=Bl(),C=p?function(x,b){return p(x,"toString",{configurable:!0,enumerable:!1,value:h(b),writable:!0})}:m;l.exports=C}),bh=u((a,l)=>{var h=800,p=16,m=Date.now;function C(x){var b=0,M=0;return function(){var A=m(),q=p-(A-M);if(M=A,q>0){if(++b>=h)return arguments[0]}else b=0;return x.apply(void 0,arguments)}}l.exports=C}),jp=u((a,l)=>{var h=qo(),p=bh(),m=p(h);l.exports=m}),qp=u((a,l)=>{var h=Bl(),p=Fl(),m=jp();function C(x,b){return m(p(x,b,h),x+"")}l.exports=C}),Hp=u((a,l)=>{var h=y(),p=zi(),m=vh(),C=Ht();function x(b,M,A){if(!C(A))return!1;var q=typeof M;return(q=="number"?p(A)&&m(M,A.length):q=="string"&&M in A)?h(A[M],b):!1}l.exports=x}),Zp=u((a,l)=>{var h=qp(),p=Hp();function m(C){return h(function(x,b){var M=-1,A=b.length,q=A>1?b[A-1]:void 0,U=A>2?b[2]:void 0;for(q=C.length>3&&typeof q=="function"?(A--,q):void 0,U&&p(b[0],b[1],U)&&(q=A<3?void 0:q,A=1),x=Object(x);++M<A;){var ct=b[M];ct&&C(x,ct,M,q)}return x})}l.exports=m}),Cu=u((a,l)=>{var h=Eh(),p=Zp(),m=p(function(C,x,b){h(C,x,b)});l.exports=m}),zl=u((a,l)=>{var h=te(),p=er(),m="[object Symbol]";function C(x){return typeof x=="symbol"||p(x)&&h(x)==m}l.exports=C}),Eu=u((a,l)=>{var h=Rn(),p=zl(),m=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,C=/^\w*$/;function x(b,M){if(h(b))return!1;var A=typeof b;return A=="number"||A=="symbol"||A=="boolean"||b==null||p(b)?!0:C.test(b)||!m.test(b)||M!=null&&b in Object(M)}l.exports=x}),Kp=u((a,l)=>{var h=et(),p="Expected a function";function m(C,x){if(typeof C!="function"||x!=null&&typeof x!="function")throw new TypeError(p);var b=function(){var M=arguments,A=x?x.apply(this,M):M[0],q=b.cache;if(q.has(A))return q.get(A);var U=C.apply(this,M);return b.cache=q.set(A,U)||q,U};return b.cache=new(m.Cache||h),b}m.Cache=h,l.exports=m}),Xp=u((a,l)=>{var h=Kp(),p=500;function m(C){var x=h(C,function(M){return b.size===p&&b.clear(),M}),b=x.cache;return x}l.exports=m}),Wp=u((a,l)=>{var h=Xp(),p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,m=/\\(\\)?/g,C=h(function(x){var b=[];return x.charCodeAt(0)===46&&b.push(""),x.replace(p,function(M,A,q,U){b.push(q?U.replace(m,"$1"):A||M)}),b});l.exports=C}),Yp=u((a,l)=>{function h(p,m){for(var C=-1,x=p==null?0:p.length,b=Array(x);++C<x;)b[C]=m(p[C],C,p);return b}l.exports=h}),Jp=u((a,l)=>{var h=Dt(),p=Yp(),m=Rn(),C=zl(),x=h?h.prototype:void 0,b=x?x.toString:void 0;function M(A){if(typeof A=="string")return A;if(m(A))return p(A,M)+"";if(C(A))return b?b.call(A):"";var q=A+"";return q=="0"&&1/A==-1/0?"-0":q}l.exports=M}),Gl=u((a,l)=>{var h=Jp();function p(m){return m==null?"":h(m)}l.exports=p}),Pa=u((a,l)=>{var h=Rn(),p=Eu(),m=Wp(),C=Gl();function x(b,M){return h(b)?b:p(b,M)?[b]:m(C(b))}l.exports=x}),wh=u((a,l)=>{var h=zl();function p(m){if(typeof m=="string"||h(m))return m;var C=m+"";return C=="0"&&1/m==-1/0?"-0":C}l.exports=p}),Sh=u((a,l)=>{var h=Pa(),p=wh();function m(C,x){x=h(x,C);for(var b=0,M=x.length;C!=null&&b<M;)C=C[p(x[b++])];return b&&b==M?C:void 0}l.exports=m}),Bs=u((a,l)=>{var h=Sh();function p(m,C,x){var b=m==null?void 0:h(m,C);return b===void 0?x:b}l.exports=p}),He=u((a,l)=>{(function(h,p){typeof a=="object"&&typeof l<"u"?l.exports=p():(h=h||self).RBush=p()})(a,function(){function h(j,Z,nt,pt,st){(function ht(P,D,O,N,R){for(;N>O;){if(N-O>600){var B=N-O+1,X=D-O+1,K=Math.log(B),tt=.5*Math.exp(2*K/3),ut=.5*Math.sqrt(K*tt*(B-tt)/B)*(X-B/2<0?-1:1),at=Math.max(O,Math.floor(D-X*tt/B+ut)),St=Math.min(N,Math.floor(D+(B-X)*tt/B+ut));ht(P,D,at,St,R)}var Xt=P[D],Qt=O,ae=N;for(p(P,O,D),R(P[N],Xt)>0&&p(P,O,N);Qt<ae;){for(p(P,Qt,ae),Qt++,ae--;R(P[Qt],Xt)<0;)Qt++;for(;R(P[ae],Xt)>0;)ae--}R(P[O],Xt)===0?p(P,O,ae):p(P,++ae,N),ae<=D&&(O=ae+1),D<=ae&&(N=ae-1)}})(j,Z,nt||0,pt||j.length-1,st||m)}function p(j,Z,nt){var pt=j[Z];j[Z]=j[nt],j[nt]=pt}function m(j,Z){return j<Z?-1:j>Z?1:0}var C=function(j){j===void 0&&(j=9),this._maxEntries=Math.max(4,j),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function x(j,Z,nt){if(!nt)return Z.indexOf(j);for(var pt=0;pt<Z.length;pt++)if(nt(j,Z[pt]))return pt;return-1}function b(j,Z){M(j,0,j.children.length,Z,j)}function M(j,Z,nt,pt,st){st||(st=Yt(null)),st.minX=1/0,st.minY=1/0,st.maxX=-1/0,st.maxY=-1/0;for(var ht=Z;ht<nt;ht++){var P=j.children[ht];A(st,j.leaf?pt(P):P)}return st}function A(j,Z){return j.minX=Math.min(j.minX,Z.minX),j.minY=Math.min(j.minY,Z.minY),j.maxX=Math.max(j.maxX,Z.maxX),j.maxY=Math.max(j.maxY,Z.maxY),j}function q(j,Z){return j.minX-Z.minX}function U(j,Z){return j.minY-Z.minY}function ct(j){return(j.maxX-j.minX)*(j.maxY-j.minY)}function ft(j){return j.maxX-j.minX+(j.maxY-j.minY)}function Tt(j,Z){return j.minX<=Z.minX&&j.minY<=Z.minY&&Z.maxX<=j.maxX&&Z.maxY<=j.maxY}function Vt(j,Z){return Z.minX<=j.maxX&&Z.minY<=j.maxY&&Z.maxX>=j.minX&&Z.maxY>=j.minY}function Yt(j){return{children:j,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ve(j,Z,nt,pt,st){for(var ht=[Z,nt];ht.length;)if(!((nt=ht.pop())-(Z=ht.pop())<=pt)){var P=Z+Math.ceil((nt-Z)/pt/2)*pt;h(j,P,Z,nt,st),ht.push(Z,P,P,nt)}}return C.prototype.all=function(){return this._all(this.data,[])},C.prototype.search=function(j){var Z=this.data,nt=[];if(!Vt(j,Z))return nt;for(var pt=this.toBBox,st=[];Z;){for(var ht=0;ht<Z.children.length;ht++){var P=Z.children[ht],D=Z.leaf?pt(P):P;Vt(j,D)&&(Z.leaf?nt.push(P):Tt(j,D)?this._all(P,nt):st.push(P))}Z=st.pop()}return nt},C.prototype.collides=function(j){var Z=this.data;if(!Vt(j,Z))return!1;for(var nt=[];Z;){for(var pt=0;pt<Z.children.length;pt++){var st=Z.children[pt],ht=Z.leaf?this.toBBox(st):st;if(Vt(j,ht)){if(Z.leaf||Tt(j,ht))return!0;nt.push(st)}}Z=nt.pop()}return!1},C.prototype.load=function(j){if(!j||!j.length)return this;if(j.length<this._minEntries){for(var Z=0;Z<j.length;Z++)this.insert(j[Z]);return this}var nt=this._build(j.slice(),0,j.length-1,0);if(this.data.children.length)if(this.data.height===nt.height)this._splitRoot(this.data,nt);else{if(this.data.height<nt.height){var pt=this.data;this.data=nt,nt=pt}this._insert(nt,this.data.height-nt.height-1,!0)}else this.data=nt;return this},C.prototype.insert=function(j){return j&&this._insert(j,this.data.height-1),this},C.prototype.clear=function(){return this.data=Yt([]),this},C.prototype.remove=function(j,Z){if(!j)return this;for(var nt,pt,st,ht=this.data,P=this.toBBox(j),D=[],O=[];ht||D.length;){if(ht||(ht=D.pop(),pt=D[D.length-1],nt=O.pop(),st=!0),ht.leaf){var N=x(j,ht.children,Z);if(N!==-1)return ht.children.splice(N,1),D.push(ht),this._condense(D),this}st||ht.leaf||!Tt(ht,P)?pt?(nt++,ht=pt.children[nt],st=!1):ht=null:(D.push(ht),O.push(nt),nt=0,pt=ht,ht=ht.children[0])}return this},C.prototype.toBBox=function(j){return j},C.prototype.compareMinX=function(j,Z){return j.minX-Z.minX},C.prototype.compareMinY=function(j,Z){return j.minY-Z.minY},C.prototype.toJSON=function(){return this.data},C.prototype.fromJSON=function(j){return this.data=j,this},C.prototype._all=function(j,Z){for(var nt=[];j;)j.leaf?Z.push.apply(Z,j.children):nt.push.apply(nt,j.children),j=nt.pop();return Z},C.prototype._build=function(j,Z,nt,pt){var st,ht=nt-Z+1,P=this._maxEntries;if(ht<=P)return b(st=Yt(j.slice(Z,nt+1)),this.toBBox),st;pt||(pt=Math.ceil(Math.log(ht)/Math.log(P)),P=Math.ceil(ht/Math.pow(P,pt-1))),(st=Yt([])).leaf=!1,st.height=pt;var D=Math.ceil(ht/P),O=D*Math.ceil(Math.sqrt(P));Ve(j,Z,nt,O,this.compareMinX);for(var N=Z;N<=nt;N+=O){var R=Math.min(N+O-1,nt);Ve(j,N,R,D,this.compareMinY);for(var B=N;B<=R;B+=D){var X=Math.min(B+D-1,R);st.children.push(this._build(j,B,X,pt-1))}}return b(st,this.toBBox),st},C.prototype._chooseSubtree=function(j,Z,nt,pt){for(;pt.push(Z),!Z.leaf&&pt.length-1!==nt;){for(var st=1/0,ht=1/0,P=void 0,D=0;D<Z.children.length;D++){var O=Z.children[D],N=ct(O),R=(B=j,X=O,(Math.max(X.maxX,B.maxX)-Math.min(X.minX,B.minX))*(Math.max(X.maxY,B.maxY)-Math.min(X.minY,B.minY))-N);R<ht?(ht=R,st=N<st?N:st,P=O):R===ht&&N<st&&(st=N,P=O)}Z=P||Z.children[0]}var B,X;return Z},C.prototype._insert=function(j,Z,nt){var pt=nt?j:this.toBBox(j),st=[],ht=this._chooseSubtree(pt,this.data,Z,st);for(ht.children.push(j),A(ht,pt);Z>=0&&st[Z].children.length>this._maxEntries;)this._split(st,Z),Z--;this._adjustParentBBoxes(pt,st,Z)},C.prototype._split=function(j,Z){var nt=j[Z],pt=nt.children.length,st=this._minEntries;this._chooseSplitAxis(nt,st,pt);var ht=this._chooseSplitIndex(nt,st,pt),P=Yt(nt.children.splice(ht,nt.children.length-ht));P.height=nt.height,P.leaf=nt.leaf,b(nt,this.toBBox),b(P,this.toBBox),Z?j[Z-1].children.push(P):this._splitRoot(nt,P)},C.prototype._splitRoot=function(j,Z){this.data=Yt([j,Z]),this.data.height=j.height+1,this.data.leaf=!1,b(this.data,this.toBBox)},C.prototype._chooseSplitIndex=function(j,Z,nt){for(var pt,st,ht,P,D,O,N,R=1/0,B=1/0,X=Z;X<=nt-Z;X++){var K=M(j,0,X,this.toBBox),tt=M(j,X,nt,this.toBBox),ut=(st=K,ht=tt,P=void 0,D=void 0,O=void 0,N=void 0,P=Math.max(st.minX,ht.minX),D=Math.max(st.minY,ht.minY),O=Math.min(st.maxX,ht.maxX),N=Math.min(st.maxY,ht.maxY),Math.max(0,O-P)*Math.max(0,N-D)),at=ct(K)+ct(tt);ut<R?(R=ut,pt=X,B=at<B?at:B):ut===R&&at<B&&(B=at,pt=X)}return pt||nt-Z},C.prototype._chooseSplitAxis=function(j,Z,nt){var pt=j.leaf?this.compareMinX:q,st=j.leaf?this.compareMinY:U;this._allDistMargin(j,Z,nt,pt)<this._allDistMargin(j,Z,nt,st)&&j.children.sort(pt)},C.prototype._allDistMargin=function(j,Z,nt,pt){j.children.sort(pt);for(var st=this.toBBox,ht=M(j,0,Z,st),P=M(j,nt-Z,nt,st),D=ft(ht)+ft(P),O=Z;O<nt-Z;O++){var N=j.children[O];A(ht,j.leaf?st(N):N),D+=ft(ht)}for(var R=nt-Z-1;R>=Z;R--){var B=j.children[R];A(P,j.leaf?st(B):B),D+=ft(P)}return D},C.prototype._adjustParentBBoxes=function(j,Z,nt){for(var pt=nt;pt>=0;pt--)A(Z[pt],j)},C.prototype._condense=function(j){for(var Z=j.length-1,nt=void 0;Z>=0;Z--)j[Z].children.length===0?Z>0?(nt=j[Z-1].children).splice(nt.indexOf(j[Z]),1):this.clear():b(j[Z],this.toBBox)},C})}),dn=u(a=>{Object.defineProperty(a,"__esModule",{value:!0}),a.earthRadius=63710088e-1,a.factors={centimeters:a.earthRadius*100,centimetres:a.earthRadius*100,degrees:a.earthRadius/111325,feet:a.earthRadius*3.28084,inches:a.earthRadius*39.37,kilometers:a.earthRadius/1e3,kilometres:a.earthRadius/1e3,meters:a.earthRadius,metres:a.earthRadius,miles:a.earthRadius/1609.344,millimeters:a.earthRadius*1e3,millimetres:a.earthRadius*1e3,nauticalmiles:a.earthRadius/1852,radians:1,yards:a.earthRadius*1.0936},a.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/a.earthRadius,yards:1.0936133},a.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function l(N,R,B){B===void 0&&(B={});var X={type:"Feature"};return(B.id===0||B.id)&&(X.id=B.id),B.bbox&&(X.bbox=B.bbox),X.properties=R||{},X.geometry=N,X}a.feature=l;function h(N,R,B){switch(N){case"Point":return p(R).geometry;case"LineString":return b(R).geometry;case"Polygon":return C(R).geometry;case"MultiPoint":return U(R).geometry;case"MultiLineString":return q(R).geometry;case"MultiPolygon":return ct(R).geometry;default:throw new Error(N+" is invalid")}}a.geometry=h;function p(N,R,B){if(B===void 0&&(B={}),!N)throw new Error("coordinates is required");if(!Array.isArray(N))throw new Error("coordinates must be an Array");if(N.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ht(N[0])||!ht(N[1]))throw new Error("coordinates must contain numbers");var X={type:"Point",coordinates:N};return l(X,R,B)}a.point=p;function m(N,R,B){return B===void 0&&(B={}),A(N.map(function(X){return p(X,R)}),B)}a.points=m;function C(N,R,B){B===void 0&&(B={});for(var X=0,K=N;X<K.length;X++){var tt=K[X];if(tt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var ut=0;ut<tt[tt.length-1].length;ut++)if(tt[tt.length-1][ut]!==tt[0][ut])throw new Error("First and last Position are not equivalent.")}var at={type:"Polygon",coordinates:N};return l(at,R,B)}a.polygon=C;function x(N,R,B){return B===void 0&&(B={}),A(N.map(function(X){return C(X,R)}),B)}a.polygons=x;function b(N,R,B){if(B===void 0&&(B={}),N.length<2)throw new Error("coordinates must be an array of two or more positions");var X={type:"LineString",coordinates:N};return l(X,R,B)}a.lineString=b;function M(N,R,B){return B===void 0&&(B={}),A(N.map(function(X){return b(X,R)}),B)}a.lineStrings=M;function A(N,R){R===void 0&&(R={});var B={type:"FeatureCollection"};return R.id&&(B.id=R.id),R.bbox&&(B.bbox=R.bbox),B.features=N,B}a.featureCollection=A;function q(N,R,B){B===void 0&&(B={});var X={type:"MultiLineString",coordinates:N};return l(X,R,B)}a.multiLineString=q;function U(N,R,B){B===void 0&&(B={});var X={type:"MultiPoint",coordinates:N};return l(X,R,B)}a.multiPoint=U;function ct(N,R,B){B===void 0&&(B={});var X={type:"MultiPolygon",coordinates:N};return l(X,R,B)}a.multiPolygon=ct;function ft(N,R,B){B===void 0&&(B={});var X={type:"GeometryCollection",geometries:N};return l(X,R,B)}a.geometryCollection=ft;function Tt(N,R){if(R===void 0&&(R=0),R&&!(R>=0))throw new Error("precision must be a positive number");var B=Math.pow(10,R||0);return Math.round(N*B)/B}a.round=Tt;function Vt(N,R){R===void 0&&(R="kilometers");var B=a.factors[R];if(!B)throw new Error(R+" units is invalid");return N*B}a.radiansToLength=Vt;function Yt(N,R){R===void 0&&(R="kilometers");var B=a.factors[R];if(!B)throw new Error(R+" units is invalid");return N/B}a.lengthToRadians=Yt;function Ve(N,R){return Z(Yt(N,R))}a.lengthToDegrees=Ve;function j(N){var R=N%360;return R<0&&(R+=360),R}a.bearingToAzimuth=j;function Z(N){var R=N%(2*Math.PI);return R*180/Math.PI}a.radiansToDegrees=Z;function nt(N){var R=N%360;return R*Math.PI/180}a.degreesToRadians=nt;function pt(N,R,B){if(R===void 0&&(R="kilometers"),B===void 0&&(B="kilometers"),!(N>=0))throw new Error("length must be a positive number");return Vt(Yt(N,R),B)}a.convertLength=pt;function st(N,R,B){if(R===void 0&&(R="meters"),B===void 0&&(B="kilometers"),!(N>=0))throw new Error("area must be a positive number");var X=a.areaFactors[R];if(!X)throw new Error("invalid original units");var K=a.areaFactors[B];if(!K)throw new Error("invalid final units");return N/X*K}a.convertArea=st;function ht(N){return!isNaN(N)&&N!==null&&!Array.isArray(N)}a.isNumber=ht;function P(N){return!!N&&N.constructor===Object}a.isObject=P;function D(N){if(!N)throw new Error("bbox is required");if(!Array.isArray(N))throw new Error("bbox must be an Array");if(N.length!==4&&N.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");N.forEach(function(R){if(!ht(R))throw new Error("bbox must only contain numbers")})}a.validateBBox=D;function O(N){if(!N)throw new Error("id is required");if(["string","number"].indexOf(typeof N)===-1)throw new Error("id must be a number or a string")}a.validateId=O}),Ia=u(a=>{Object.defineProperty(a,"__esModule",{value:!0});var l=dn();function h(Z,nt,pt){if(Z!==null)for(var st,ht,P,D,O,N,R,B=0,X=0,K,tt=Z.type,ut=tt==="FeatureCollection",at=tt==="Feature",St=ut?Z.features.length:1,Xt=0;Xt<St;Xt++){R=ut?Z.features[Xt].geometry:at?Z.geometry:Z,K=R?R.type==="GeometryCollection":!1,O=K?R.geometries.length:1;for(var Qt=0;Qt<O;Qt++){var ae=0,en=0;if(D=K?R.geometries[Qt]:R,D!==null){N=D.coordinates;var un=D.type;switch(B=pt&&(un==="Polygon"||un==="MultiPolygon")?1:0,un){case null:break;case"Point":if(nt(N,X,Xt,ae,en)===!1)return!1;X++,ae++;break;case"LineString":case"MultiPoint":for(st=0;st<N.length;st++){if(nt(N[st],X,Xt,ae,en)===!1)return!1;X++,un==="MultiPoint"&&ae++}un==="LineString"&&ae++;break;case"Polygon":case"MultiLineString":for(st=0;st<N.length;st++){for(ht=0;ht<N[st].length-B;ht++){if(nt(N[st][ht],X,Xt,ae,en)===!1)return!1;X++}un==="MultiLineString"&&ae++,un==="Polygon"&&en++}un==="Polygon"&&ae++;break;case"MultiPolygon":for(st=0;st<N.length;st++){for(en=0,ht=0;ht<N[st].length;ht++){for(P=0;P<N[st][ht].length-B;P++){if(nt(N[st][ht][P],X,Xt,ae,en)===!1)return!1;X++}en++}ae++}break;case"GeometryCollection":for(st=0;st<D.geometries.length;st++)if(h(D.geometries[st],nt,pt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function p(Z,nt,pt,st){var ht=pt;return h(Z,function(P,D,O,N,R){D===0&&pt===void 0?ht=P:ht=nt(ht,P,D,O,N,R)},st),ht}function m(Z,nt){var pt;switch(Z.type){case"FeatureCollection":for(pt=0;pt<Z.features.length&&nt(Z.features[pt].properties,pt)!==!1;pt++);break;case"Feature":nt(Z.properties,0);break}}function C(Z,nt,pt){var st=pt;return m(Z,function(ht,P){P===0&&pt===void 0?st=ht:st=nt(st,ht,P)}),st}function x(Z,nt){if(Z.type==="Feature")nt(Z,0);else if(Z.type==="FeatureCollection")for(var pt=0;pt<Z.features.length&&nt(Z.features[pt],pt)!==!1;pt++);}function b(Z,nt,pt){var st=pt;return x(Z,function(ht,P){P===0&&pt===void 0?st=ht:st=nt(st,ht,P)}),st}function M(Z){var nt=[];return h(Z,function(pt){nt.push(pt)}),nt}function A(Z,nt){var pt,st,ht,P,D,O,N,R,B,X,K=0,tt=Z.type==="FeatureCollection",ut=Z.type==="Feature",at=tt?Z.features.length:1;for(pt=0;pt<at;pt++){for(O=tt?Z.features[pt].geometry:ut?Z.geometry:Z,R=tt?Z.features[pt].properties:ut?Z.properties:{},B=tt?Z.features[pt].bbox:ut?Z.bbox:void 0,X=tt?Z.features[pt].id:ut?Z.id:void 0,N=O?O.type==="GeometryCollection":!1,D=N?O.geometries.length:1,ht=0;ht<D;ht++){if(P=N?O.geometries[ht]:O,P===null){if(nt(null,K,R,B,X)===!1)return!1;continue}switch(P.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(nt(P,K,R,B,X)===!1)return!1;break}case"GeometryCollection":{for(st=0;st<P.geometries.length;st++)if(nt(P.geometries[st],K,R,B,X)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}K++}}function q(Z,nt,pt){var st=pt;return A(Z,function(ht,P,D,O,N){P===0&&pt===void 0?st=ht:st=nt(st,ht,P,D,O,N)}),st}function U(Z,nt){A(Z,function(pt,st,ht,P,D){var O=pt===null?null:pt.type;switch(O){case null:case"Point":case"LineString":case"Polygon":return nt(l.feature(pt,ht,{bbox:P,id:D}),st,0)===!1?!1:void 0}var N;switch(O){case"MultiPoint":N="Point";break;case"MultiLineString":N="LineString";break;case"MultiPolygon":N="Polygon";break}for(var R=0;R<pt.coordinates.length;R++){var B=pt.coordinates[R],X={type:N,coordinates:B};if(nt(l.feature(X,ht),st,R)===!1)return!1}})}function ct(Z,nt,pt){var st=pt;return U(Z,function(ht,P,D){P===0&&D===0&&pt===void 0?st=ht:st=nt(st,ht,P,D)}),st}function ft(Z,nt){U(Z,function(pt,st,ht){var P=0;if(pt.geometry){var D=pt.geometry.type;if(!(D==="Point"||D==="MultiPoint")){var O,N=0,R=0,B=0;if(h(pt,function(X,K,tt,ut,at){if(O===void 0||st>N||ut>R||at>B){O=X,N=st,R=ut,B=at,P=0;return}var St=l.lineString([O,X],pt.properties);if(nt(St,st,ht,at,P)===!1)return!1;P++,O=X})===!1)return!1}}})}function Tt(Z,nt,pt){var st=pt,ht=!1;return ft(Z,function(P,D,O,N,R){ht===!1&&pt===void 0?st=P:st=nt(st,P,D,O,N,R),ht=!0}),st}function Vt(Z,nt){if(!Z)throw new Error("geojson is required");U(Z,function(pt,st,ht){if(pt.geometry!==null){var P=pt.geometry.type,D=pt.geometry.coordinates;switch(P){case"LineString":if(nt(pt,st,ht,0,0)===!1)return!1;break;case"Polygon":for(var O=0;O<D.length;O++)if(nt(l.lineString(D[O],pt.properties),st,ht,O)===!1)return!1;break}}})}function Yt(Z,nt,pt){var st=pt;return Vt(Z,function(ht,P,D,O){P===0&&pt===void 0?st=ht:st=nt(st,ht,P,D,O)}),st}function Ve(Z,nt){if(nt=nt||{},!l.isObject(nt))throw new Error("options is invalid");var pt=nt.featureIndex||0,st=nt.multiFeatureIndex||0,ht=nt.geometryIndex||0,P=nt.segmentIndex||0,D=nt.properties,O;switch(Z.type){case"FeatureCollection":pt<0&&(pt=Z.features.length+pt),D=D||Z.features[pt].properties,O=Z.features[pt].geometry;break;case"Feature":D=D||Z.properties,O=Z.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":O=Z;break;default:throw new Error("geojson is invalid")}if(O===null)return null;var N=O.coordinates;switch(O.type){case"Point":case"MultiPoint":return null;case"LineString":return P<0&&(P=N.length+P-1),l.lineString([N[P],N[P+1]],D,nt);case"Polygon":return ht<0&&(ht=N.length+ht),P<0&&(P=N[ht].length+P-1),l.lineString([N[ht][P],N[ht][P+1]],D,nt);case"MultiLineString":return st<0&&(st=N.length+st),P<0&&(P=N[st].length+P-1),l.lineString([N[st][P],N[st][P+1]],D,nt);case"MultiPolygon":return st<0&&(st=N.length+st),ht<0&&(ht=N[st].length+ht),P<0&&(P=N[st][ht].length-P-1),l.lineString([N[st][ht][P],N[st][ht][P+1]],D,nt)}throw new Error("geojson is invalid")}function j(Z,nt){if(nt=nt||{},!l.isObject(nt))throw new Error("options is invalid");var pt=nt.featureIndex||0,st=nt.multiFeatureIndex||0,ht=nt.geometryIndex||0,P=nt.coordIndex||0,D=nt.properties,O;switch(Z.type){case"FeatureCollection":pt<0&&(pt=Z.features.length+pt),D=D||Z.features[pt].properties,O=Z.features[pt].geometry;break;case"Feature":D=D||Z.properties,O=Z.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":O=Z;break;default:throw new Error("geojson is invalid")}if(O===null)return null;var N=O.coordinates;switch(O.type){case"Point":return l.point(N,D,nt);case"MultiPoint":return st<0&&(st=N.length+st),l.point(N[st],D,nt);case"LineString":return P<0&&(P=N.length+P),l.point(N[P],D,nt);case"Polygon":return ht<0&&(ht=N.length+ht),P<0&&(P=N[ht].length+P),l.point(N[ht][P],D,nt);case"MultiLineString":return st<0&&(st=N.length+st),P<0&&(P=N[st].length+P),l.point(N[st][P],D,nt);case"MultiPolygon":return st<0&&(st=N.length+st),ht<0&&(ht=N[st].length+ht),P<0&&(P=N[st][ht].length-P),l.point(N[st][ht][P],D,nt)}throw new Error("geojson is invalid")}a.coordAll=M,a.coordEach=h,a.coordReduce=p,a.featureEach=x,a.featureReduce=b,a.findPoint=j,a.findSegment=Ve,a.flattenEach=U,a.flattenReduce=ct,a.geomEach=A,a.geomReduce=q,a.lineEach=Vt,a.lineReduce=Yt,a.propEach=m,a.propReduce=C,a.segmentEach=ft,a.segmentReduce=Tt}),Ho=u(a=>{Object.defineProperty(a,"__esModule",{value:!0});var l=Ia();function h(p){var m=[1/0,1/0,-1/0,-1/0];return l.coordEach(p,function(C){m[0]>C[0]&&(m[0]=C[0]),m[1]>C[1]&&(m[1]=C[1]),m[2]<C[0]&&(m[2]=C[0]),m[3]<C[1]&&(m[3]=C[1])}),m}h.default=h,a.default=h}),go=u((a,l)=>{var h=He(),p=dn(),m=Ia(),C=Ho().default,x=m.featureEach;m.coordEach,p.polygon;var b=p.featureCollection;function M(A){var q=new h(A);return q.insert=function(U){if(U.type!=="Feature")throw new Error("invalid feature");return U.bbox=U.bbox?U.bbox:C(U),h.prototype.insert.call(this,U)},q.load=function(U){var ct=[];return Array.isArray(U)?U.forEach(function(ft){if(ft.type!=="Feature")throw new Error("invalid features");ft.bbox=ft.bbox?ft.bbox:C(ft),ct.push(ft)}):x(U,function(ft){if(ft.type!=="Feature")throw new Error("invalid features");ft.bbox=ft.bbox?ft.bbox:C(ft),ct.push(ft)}),h.prototype.load.call(this,ct)},q.remove=function(U,ct){if(U.type!=="Feature")throw new Error("invalid feature");return U.bbox=U.bbox?U.bbox:C(U),h.prototype.remove.call(this,U,ct)},q.clear=function(){return h.prototype.clear.call(this)},q.search=function(U){var ct=h.prototype.search.call(this,this.toBBox(U));return b(ct)},q.collides=function(U){return h.prototype.collides.call(this,this.toBBox(U))},q.all=function(){var U=h.prototype.all.call(this);return b(U)},q.toJSON=function(){return h.prototype.toJSON.call(this)},q.fromJSON=function(U){return h.prototype.fromJSON.call(this,U)},q.toBBox=function(U){var ct;if(U.bbox)ct=U.bbox;else if(Array.isArray(U)&&U.length===4)ct=U;else if(Array.isArray(U)&&U.length===6)ct=[U[0],U[1],U[3],U[4]];else if(U.type==="Feature")ct=C(U);else if(U.type==="FeatureCollection")ct=C(U);else throw new Error("invalid geojson");return{minX:ct[0],minY:ct[1],maxX:ct[2],maxY:ct[3]}},q}l.exports=M,l.exports.default=M});Array.prototype.findIndex=Array.prototype.findIndex||function(a){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof a!="function")throw new TypeError("callback must be a function");for(var l=Object(this),h=l.length>>>0,p=arguments[1],m=0;m<h;m++)if(a.call(p,l[m],m,l))return m;return-1},Array.prototype.find=Array.prototype.find||function(a){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof a!="function")throw new TypeError("callback must be a function");for(var l=Object(this),h=l.length>>>0,p=arguments[1],m=0;m<h;m++){var C=l[m];if(a.call(p,C,m,l))return C}},typeof Object.assign!="function"&&(Object.assign=function(a){if(a==null)throw new TypeError("Cannot convert undefined or null to object");a=Object(a);for(var l=1;l<arguments.length;l++){var h=arguments[l];if(h!=null)for(var p in h)Object.prototype.hasOwnProperty.call(h,p)&&(a[p]=h[p])}return a}),function(a){a.forEach(function(l){l.hasOwnProperty("remove")||Object.defineProperty(l,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(a,l){if(this==null)throw new TypeError('"this" is null or not defined');var h=Object(this),p=h.length>>>0;if(p===0)return!1;var m=l|0,C=Math.max(m>=0?m:p-Math.abs(m),0);function x(b,M){return b===M||typeof b=="number"&&typeof M=="number"&&isNaN(b)&&isNaN(M)}for(;C<p;){if(x(h[C],a))return!0;C++}return!1}});var Ul={version:"2.18.3"},we=d(Cu()),In={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},Vl={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex löschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer löschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknüpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Länge",segmentLength:"Segment Länge",area:"Fläche",radius:"Radius",perimeter:"Umfang",height:"Höhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},Lu={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},li={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},$p={tooltips:{placeMarker:"Adaugă un punct",firstVertex:"Apasă aici pentru a adăuga primul Vertex",continueLine:"Apasă aici pentru a continua desenul",finishLine:"Apasă pe orice obiect pentru a finisa desenul",finishPoly:"Apasă pe primul obiect pentru a finisa",finishRect:"Apasă pentru a finisa",startCircle:"Apasă pentru a desena un cerc",finishCircle:"Apasă pentru a finisa un cerc",placeCircleMarker:"Adaugă un punct"},actions:{finish:"Termină",cancel:"Anulează",removeLastVertex:"Șterge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaugă o bulină",drawPolyButton:"Desenează un poligon",drawLineButton:"Desenează o linie",drawCircleButton:"Desenează un cerc",drawRectButton:"Desenează un dreptunghi",editButton:"Editează straturile",dragButton:"Mută straturile",cutButton:"Taie straturile",deleteButton:"Șterge straturile",drawCircleMarkerButton:"Desenează marcatorul cercului",snappingButton:"Fixați marcatorul glisat pe alte straturi și vârfuri",pinningButton:"Fixați vârfurile partajate împreună",rotateButton:"Rotiți stratul"}},xu={tooltips:{placeMarker:"Нажмите, чтобы нанести маркер",firstVertex:"Нажмите, чтобы нанести первый объект",continueLine:"Нажмите, чтобы продолжить рисование",finishLine:"Нажмите любой существующий маркер для завершения",finishPoly:"Выберите первую точку, чтобы закончить",finishRect:"Нажмите, чтобы закончить",startCircle:"Нажмите, чтобы добавить центр круга",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Нажмите, чтобы нанести круговой маркер"},actions:{finish:"Завершить",cancel:"Отменить",removeLastVertex:"Отменить последнее действие"},buttonTitles:{drawMarkerButton:"Добавить маркер",drawPolyButton:"Рисовать полигон",drawLineButton:"Рисовать кривую",drawCircleButton:"Рисовать круг",drawRectButton:"Рисовать прямоугольник",editButton:"Редактировать слой",dragButton:"Перенести слой",cutButton:"Вырезать слой",deleteButton:"Удалить слой",drawCircleMarkerButton:"Добавить круговой маркер",snappingButton:"Привязать перетаскиваемый маркер к другим слоям и вершинам",pinningButton:"Связать общие точки вместе",rotateButton:"Поворот слоя"}},mo={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vértice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del círculo",finishCircle:"Presiona para finalizar el círculo",placeCircleMarker:"Presiona para colocar un marcador de círculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar último vértice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polígono",drawLineButton:"Dibujar Línea",drawCircleButton:"Dibujar Círculo",drawRectButton:"Dibujar Rectángulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Círculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vértices",pinningButton:"Fijar juntos los vértices compartidos",rotateButton:"Rotar capa"}},Bn={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beëindigen",finishPoly:"Klik op het eerst punt om te beëindigen",finishRect:"Klik om te beëindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beëindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},_o={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer à dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"Éditer des calques",dragButton:"Déplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"Épingler ensemble les sommets partagés",rotateButton:"Tourner des calques"}},Ta={tooltips:{placeMarker:"单击放置标记",firstVertex:"单击放置首个顶点",continueLine:"单击继续绘制",finishLine:"单击任何存在的标记以完成",finishPoly:"单击第一个标记以完成",finishRect:"单击完成",startCircle:"单击放置圆心",finishCircle:"单击完成圆形",placeCircleMarker:"点击放置圆形标记"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最后的顶点"},buttonTitles:{drawMarkerButton:"绘制标记",drawPolyButton:"绘制多边形",drawLineButton:"绘制线段",drawCircleButton:"绘制圆形",drawRectButton:"绘制长方形",editButton:"编辑图层",dragButton:"拖拽图层",cutButton:"剪切图层",deleteButton:"删除图层",drawCircleMarkerButton:"画圆圈标记",snappingButton:"将拖动的标记捕捉到其他图层和顶点",pinningButton:"将共享顶点固定在一起",rotateButton:"旋转图层"}},Aa={tooltips:{placeMarker:"單擊放置標記",firstVertex:"單擊放置第一個頂點",continueLine:"單擊繼續繪製",finishLine:"單擊任何存在的標記以完成",finishPoly:"單擊第一個標記以完成",finishRect:"單擊完成",startCircle:"單擊放置圓心",finishCircle:"單擊完成圓形",placeCircleMarker:"點擊放置圓形標記"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最後一個頂點"},buttonTitles:{drawMarkerButton:"放置標記",drawPolyButton:"繪製多邊形",drawLineButton:"繪製線段",drawCircleButton:"繪製圓形",drawRectButton:"繪製方形",editButton:"編輯圖形",dragButton:"移動圖形",cutButton:"裁切圖形",deleteButton:"刪除圖形",drawCircleMarkerButton:"畫圓圈標記",snappingButton:"將拖動的標記對齊到其他圖層和頂點",pinningButton:"將共享頂點固定在一起",rotateButton:"旋轉圖形"}},jl={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vértice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do círculo",finishCircle:"Clique para finalizar o círculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover último vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},Zo={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vértice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do círculo",finishCircle:"Clique para terminar o círculo",placeCircleMarker:"Clique para colocar marcador de círculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover Último Vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},ql={tooltips:{placeMarker:"Kliknij, aby umieścić znacznik",firstVertex:"Kliknij, aby umieścić pierwszy wierzchołek",continueLine:"Kliknij, aby kontynuować rysowanie",finishLine:"Kliknij dowolny istniejący znacznik, aby zakończyć",finishPoly:"Kliknij pierwszy znacznik, aby zakończyć",finishRect:"Kliknij, aby zakończyć",startCircle:"Kliknij, aby umieścić środek okręgu",finishCircle:"Kliknij, aby zakończyć okrąg",placeCircleMarker:"Kliknij, aby umieścić znacznik okręgu",placeText:"Kliknij, aby umieścić tekst"},actions:{finish:"Zakończ",cancel:"Anuluj",removeLastVertex:"Usuń ostatni wierzchołek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokąt",drawLineButton:"Rysuj linię",drawCircleButton:"Rysuj okrąg",drawRectButton:"Rysuj prostokąt",editButton:"Edytuj warstwy",dragButton:"Przeciągnij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usuń warstwy",drawCircleMarkerButton:"Rysuj znacznik okrągły",snappingButton:"Przyciągnij przenoszony znacznik do innych warstw i wierzchołków",pinningButton:"Przypnij wspólne wierzchołki razem",rotateButton:"Obróć warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne śledzenie linii"},measurements:{totalLength:"Długość",segmentLength:"Długość odcinka",area:"Obszar",radius:"Promień",perimeter:"Obwód",height:"Wysokość",width:"Szerokość",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},Hl={tooltips:{placeMarker:"Klicka för att placera markör",firstVertex:"Klicka för att placera första hörnet",continueLine:"Klicka för att fortsätta rita",finishLine:"Klicka på en existerande punkt för att slutföra",finishPoly:"Klicka på den första punkten för att slutföra",finishRect:"Klicka för att slutföra",startCircle:"Klicka för att placera cirkelns centrum",finishCircle:"Klicka för att slutföra cirkeln",placeCircleMarker:"Klicka för att placera cirkelmarkör"},actions:{finish:"Slutför",cancel:"Avbryt",removeLastVertex:"Ta bort sista hörnet"},buttonTitles:{drawMarkerButton:"Rita Markör",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkör",snappingButton:"Snäpp dra markören till andra lager och hörn",pinningButton:"Fäst delade hörn tillsammans",rotateButton:"Rotera lagret"}},bu={tooltips:{placeMarker:"Κάντε κλικ για να τοποθετήσετε Δείκτη",firstVertex:"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο",continueLine:"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε",finishLine:"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί",finishPoly:"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε",finishRect:"Κάντε κλικ για να τελειώσετε",startCircle:"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου",finishCircle:"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο",placeCircleMarker:"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},actions:{finish:"Τέλος",cancel:"Ακύρωση",removeLastVertex:"Κατάργηση τελευταίου σημείου"},buttonTitles:{drawMarkerButton:"Σχεδίαση Δείκτη",drawPolyButton:"Σχεδίαση Πολυγώνου",drawLineButton:"Σχεδίαση Γραμμής",drawCircleButton:"Σχεδίαση Κύκλου",drawRectButton:"Σχεδίαση Ορθογωνίου",editButton:"Επεξεργασία Επιπέδων",dragButton:"Μεταφορά Επιπέδων",cutButton:"Αποκοπή Επιπέδων",deleteButton:"Κατάργηση Επιπέδων",drawCircleMarkerButton:"Σχεδίαση Κυκλικού Δείκτη",snappingButton:"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές",pinningButton:"Περικοπή κοινών κορυφών μαζί",rotateButton:"Περιστρέψτε το στρώμα"}},Zl={tooltips:{placeMarker:"Kattintson a jelölő elhelyezéséhez",firstVertex:"Kattintson az első pont elhelyezéséhez",continueLine:"Kattintson a következő pont elhelyezéséhez",finishLine:"A befejezéshez kattintson egy meglévő pontra",finishPoly:"A befejezéshez kattintson az első pontra",finishRect:"Kattintson a befejezéshez",startCircle:"Kattintson a kör középpontjának elhelyezéséhez",finishCircle:"Kattintson a kör befejezéséhez",placeCircleMarker:"Kattintson a körjelölő elhelyezéséhez"},actions:{finish:"Befejezés",cancel:"Mégse",removeLastVertex:"Utolsó pont eltávolítása"},buttonTitles:{drawMarkerButton:"Jelölő rajzolása",drawPolyButton:"Poligon rajzolása",drawLineButton:"Vonal rajzolása",drawCircleButton:"Kör rajzolása",drawRectButton:"Négyzet rajzolása",editButton:"Elemek szerkesztése",dragButton:"Elemek mozgatása",cutButton:"Elemek vágása",deleteButton:"Elemek törlése",drawCircleMarkerButton:"Kör jelölő rajzolása",snappingButton:"Kapcsolja a jelöltőt másik elemhez vagy ponthoz",pinningButton:"Közös pontok összekötése",rotateButton:"Fólia elforgatása"}},Kl={tooltips:{placeMarker:"Tryk for at placere en markør",firstVertex:"Tryk for at placere det første punkt",continueLine:"Tryk for at fortsætte linjen",finishLine:"Tryk på et eksisterende punkt for at afslutte",finishPoly:"Tryk på det første punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkør"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markør",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Træk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkør",snappingButton:"Fastgør trukket markør til andre elementer",pinningButton:"Sammenlæg delte elementer",rotateButton:"Roter laget"}},wu={tooltips:{placeMarker:"Klikk for å plassere punkt",firstVertex:"Klikk for å plassere første punkt",continueLine:"Klikk for å tegne videre",finishLine:"Klikk på et eksisterende punkt for å fullføre",finishPoly:"Klikk første punkt for å fullføre",finishRect:"Klikk for å fullføre",startCircle:"Klikk for å sette sirkel midtpunkt",finishCircle:"Klikk for å fullføre sirkel",placeCircleMarker:"Klikk for å plassere sirkel",placeText:"Klikk for å plassere tekst"},actions:{finish:"Fullfør",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotér objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalér objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Område",radius:"Radius",perimeter:"Omriss",height:"Høyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkør"}},Mh={tooltips:{placeMarker:"کلیک برای جانمایی نشان",firstVertex:"کلیک برای رسم اولین رأس",continueLine:"کلیک برای ادامه رسم",finishLine:"کلیک روی هر نشان موجود برای پایان",finishPoly:"کلیک روی اولین نشان برای پایان",finishRect:"کلیک برای پایان",startCircle:"کلیک برای رسم مرکز دایره",finishCircle:"کلیک برای پایان رسم دایره",placeCircleMarker:"کلیک برای رسم نشان دایره",placeText:"کلیک برای نوشتن متن"},actions:{finish:"پایان",cancel:"لفو",removeLastVertex:"حذف آخرین رأس"},buttonTitles:{drawMarkerButton:"درج نشان",drawPolyButton:"رسم چندضلعی",drawLineButton:"رسم خط",drawCircleButton:"رسم دایره",drawRectButton:"رسم چهارضلعی",editButton:"ویرایش لایه‌ها",dragButton:"جابجایی لایه‌ها",cutButton:"برش لایه‌ها",deleteButton:"حذف لایه‌ها",drawCircleMarkerButton:"رسم نشان دایره",snappingButton:"نشانگر را به لایه‌ها و رئوس دیگر بکشید",pinningButton:"رئوس مشترک را با هم پین کنید",rotateButton:"چرخش لایه",drawTextButton:"رسم متن",scaleButton:"مقیاس‌گذاری",autoTracingButton:"ردیاب خودکار"},measurements:{totalLength:"طول",segmentLength:"طول بخش",area:"ناحیه",radius:"شعاع",perimeter:"محیط",height:"ارتفاع",width:"عرض",coordinates:"موقعیت",coordinatesMarker:"موقعیت نشان"}},Xl={tooltips:{placeMarker:"Натисніть, щоб нанести маркер",firstVertex:"Натисніть, щоб нанести першу вершину",continueLine:"Натисніть, щоб продовжити малювати",finishLine:"Натисніть будь-який існуючий маркер для завершення",finishPoly:"Виберіть перший маркер, щоб завершити",finishRect:"Натисніть, щоб завершити",startCircle:"Натисніть, щоб додати центр кола",finishCircle:"Натисніть, щоб завершити коло",placeCircleMarker:"Натисніть, щоб нанести круговий маркер"},actions:{finish:"Завершити",cancel:"Відмінити",removeLastVertex:"Видалити попередню вершину"},buttonTitles:{drawMarkerButton:"Малювати маркер",drawPolyButton:"Малювати полігон",drawLineButton:"Малювати криву",drawCircleButton:"Малювати коло",drawRectButton:"Малювати прямокутник",editButton:"Редагувати шари",dragButton:"Перенести шари",cutButton:"Вирізати шари",deleteButton:"Видалити шари",drawCircleMarkerButton:"Малювати круговий маркер",snappingButton:"Прив’язати перетягнутий маркер до інших шарів та вершин",pinningButton:"Зв'язати спільні вершини разом",rotateButton:"Повернути шар"}},Qp={tooltips:{placeMarker:"İşaretçi yerleştirmek için tıklayın",firstVertex:"İlk tepe noktasını yerleştirmek için tıklayın",continueLine:"Çizime devam etmek için tıklayın",finishLine:"Bitirmek için mevcut herhangi bir işaretçiyi tıklayın",finishPoly:"Bitirmek için ilk işaretçiyi tıklayın",finishRect:"Bitirmek için tıklayın",startCircle:"Daire merkezine yerleştirmek için tıklayın",finishCircle:"Daireyi bitirmek için tıklayın",placeCircleMarker:"Daire işaretçisi yerleştirmek için tıklayın"},actions:{finish:"Bitir",cancel:"İptal",removeLastVertex:"Son köşeyi kaldır"},buttonTitles:{drawMarkerButton:"Çizim İşaretçisi",drawPolyButton:"Çokgenler çiz",drawLineButton:"Çoklu çizgi çiz",drawCircleButton:"Çember çiz",drawRectButton:"Dikdörtgen çiz",editButton:"Katmanları düzenle",dragButton:"Katmanları sürükle",cutButton:"Katmanları kes",deleteButton:"Katmanları kaldır",drawCircleMarkerButton:"Daire işaretçisi çiz",snappingButton:"Sürüklenen işaretçiyi diğer katmanlara ve köşelere yapıştır",pinningButton:"Paylaşılan köşeleri birbirine sabitle",rotateButton:"Katmanı döndür"}},Le={tooltips:{placeMarker:"Kliknutím vytvoříte značku",firstVertex:"Kliknutím vytvoříte první objekt",continueLine:"Kliknutím pokračujte v kreslení",finishLine:"Kliknutí na libovolnou existující značku pro dokončení",finishPoly:"Vyberte první bod pro dokončení",finishRect:"Klikněte pro dokončení",startCircle:"Kliknutím přidejte střed kruhu",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Kliknutím nastavte poloměr"},actions:{finish:"Dokončit",cancel:"Zrušit",removeLastVertex:"Zrušit poslední akci"},buttonTitles:{drawMarkerButton:"Přidat značku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit křivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdélník",editButton:"Upravit vrstvu",dragButton:"Přeneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Přidat kruhovou značku",snappingButton:"Navázat tažnou značku k dalším vrstvám a vrcholům",pinningButton:"Spojit společné body dohromady",rotateButton:"Otočte vrstvu"}},Gi={tooltips:{placeMarker:"クリックしてマーカーを配置",firstVertex:"クリックして最初の頂点を配置",continueLine:"クリックして描画を続ける",finishLine:"任意のマーカーをクリックして終了",finishPoly:"最初のマーカーをクリックして終了",finishRect:"クリックして終了",startCircle:"クリックして円の中心を配置",finishCircle:"クリックして円の描画を終了",placeCircleMarker:"クリックして円マーカーを配置",placeText:"クリックしてテキストを配置"},actions:{finish:"終了",cancel:"キャンセル",removeLastVertex:"最後の頂点を削除"},buttonTitles:{drawMarkerButton:"マーカーを描画",drawPolyButton:"ポリゴンを描画",drawLineButton:"折れ線を描画",drawCircleButton:"円を描画",drawRectButton:"矩形を描画",editButton:"レイヤーを編集",dragButton:"レイヤーをドラッグ",cutButton:"レイヤーを切り取り",deleteButton:"レイヤーを削除",drawCircleMarkerButton:"円マーカーを描画",snappingButton:"ドラッグしたマーカーを他のレイヤーや頂点にスナップする",pinningButton:"共有する頂点を同時に動かす",rotateButton:"レイヤーを回転",drawTextButton:"テキストを描画"}},an={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmäisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtämistä",finishLine:"Klikkaa olemassa olevaa merkkiä lopettaaksesi",finishPoly:"Klikkaa ensimmäistä merkkiä lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrän keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrän",placeCircleMarker:"Klikkaa asettaaksesi ympyrämerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirrä merkkejä",drawPolyButton:"Piirrä monikulmioita",drawLineButton:"Piirrä viivoja",drawCircleButton:"Piirrä ympyrä",drawRectButton:"Piirrä neliskulmioita",editButton:"Muokkaa",dragButton:"Siirrä",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirrä ympyrämerkki",snappingButton:"Kiinnitä siirrettävä merkki toisiin muotoihin",pinningButton:"Kiinnitä jaetut muodot yhteen",rotateButton:"Käännä",drawTextButton:"Piirrä tekstiä"}},Ph={tooltips:{placeMarker:"마커 위치를 클릭하세요",firstVertex:"첫번째 꼭지점 위치을 클릭하세요",continueLine:"계속 그리려면 클릭하세요",finishLine:"끝내려면 기존 마커를 클릭하세요",finishPoly:"끝내려면 처음 마커를 클릭하세요",finishRect:"끝내려면 클릭하세요",startCircle:"원의 중심이 될 위치를 클릭하세요",finishCircle:"원을 끝내려면 클릭하세요",placeCircleMarker:"원 마커 위치를 클릭하세요",placeText:"텍스트 위치를 클릭하세요"},actions:{finish:"끝내기",cancel:"취소",removeLastVertex:"마지막 꼭지점 제거"},buttonTitles:{drawMarkerButton:"마커 그리기",drawPolyButton:"다각형 그리기",drawLineButton:"다각선 그리기",drawCircleButton:"원 그리기",drawRectButton:"직사각형 그리기",editButton:"레이어 편집하기",dragButton:"레이어 끌기",cutButton:"레이어 자르기",deleteButton:"레이어 제거하기",drawCircleMarkerButton:"원 마커 그리기",snappingButton:"잡아끈 마커를 다른 레이어 및 꼭지점에 들러붙게 하기",pinningButton:"공유 꼭지점을 함께 찍기",rotateButton:"레이어 회전하기",drawTextButton:"텍스트 그리기"}},Wl={tooltips:{placeMarker:"Маркерди жайгаштыруу үчүн басыңыз",firstVertex:"Биринчи чокуну жайгаштырууну үчүн басыңыз",continueLine:"Сүрөт тартууну улантуу үчүн басыңыз",finishLine:"Аяктоо үчүн учурдагы маркерди басыңыз",finishPoly:"Бүтүрүү үчүн биринчи маркерди басыңыз",finishRect:"Бүтүрүү үчүн басыңыз",startCircle:"Айлананын борборун жайгаштырууну үчүн басыңыз",finishCircle:"Айлананы бүтүрүү үчүн басыңыз",placeCircleMarker:"Тегерек маркерди жайгаштыруу үчүн басыңыз",placeText:"Текстти жайгаштыруу үчүн басыңыз"},actions:{finish:"Аягы",cancel:"Жок кылуу",removeLastVertex:"Акыркы чокуну өчүрүү"},buttonTitles:{drawMarkerButton:"Маркерди чизуу",drawPolyButton:"Полигон чизуу",drawLineButton:"Полилиния чизуу",drawCircleButton:"Дайынды чизуу",drawRectButton:"Прямоугольник чизуу",editButton:"Слоопту түзөтүү",dragButton:"Слоопту карап сүйлөү",cutButton:"Слооптун башын кесүү",deleteButton:"Слооптун өчүрүү",drawCircleMarkerButton:"Дайынды маркерди чизуу",snappingButton:"Башка слооптордун жана вертекстердин арасына чекилдөө",pinningButton:"Бөлүшкөн вертекстерди бирге тутуштуруу",rotateButton:"Слооптун өзгөртүү",drawTextButton:"Текст чизуу",scaleButton:"Слооптун өлчөмүн өзгөртүү",autoTracingButton:"Автоматтык тизмеги чизуу"},measurements:{totalLength:"Узундук",segmentLength:"Сегмент узундугу",area:"Аймак",radius:"Радиус",perimeter:"Периметр",height:"Диаметр",width:"Кенчилик",coordinates:"Координаттар",coordinatesMarker:"Маркердин координаттары"}},Yl=Zo,Fs={en:In,de:Vl,it:Lu,id:li,ro:$p,ru:xu,es:mo,nl:Bn,fr:_o,pt:Yl,pt_br:jl,pt_pt:Zo,zh:Ta,zh_tw:Aa,pl:ql,sv:Hl,el:bu,hu:Zl,da:Kl,no:wu,fa:Mh,ua:Xl,tr:Qp,cz:Le,ja:Gi,fi:an,ko:Ph,ky:Wl},yo={_globalEditModeEnabled:!1,enableGlobalEditMode(a){let l={...a};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(h=>{this._isRelevantForEdit(h)&&h.pm.enable(l)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(a=>{a.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(a=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(a)},handleLayerAdditionInGlobalEditMode(){let a=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let l in a){let h=a[l];this._isRelevantForEdit(h)&&h.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:a}){this._addedLayersEdit[L.stamp(a)]=a},_isRelevantForEdit(a){return a.pm&&!(a instanceof L.LayerGroup)&&(!L.PM.optIn&&!a.options.pmIgnore||L.PM.optIn&&a.options.pmIgnore===!1)&&!a._pmTempLayer&&a.pm.options.allowEditing}},Jl=yo,ka={_globalDragModeEnabled:!1,enableGlobalDragMode(){let a=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},a.forEach(l=>{this._isRelevantForDrag(l)&&l.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let a=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,a.forEach(l=>{l.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let a=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let l in a){let h=a[l];this._isRelevantForDrag(h)&&h.pm.enableLayerDrag()}},_layerAddedDrag({layer:a}){this._addedLayersDrag[L.stamp(a)]=a},_isRelevantForDrag(a){return a.pm&&!(a instanceof L.LayerGroup)&&(!L.PM.optIn&&!a.options.pmIgnore||L.PM.optIn&&a.options.pmIgnore===!1)&&!a._pmTempLayer&&a.pm.options.draggable}},nr=ka,vo={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(a=>{this._isRelevantForRemoval(a)&&(a.pm.enabled()&&a.pm.disable(),a.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(a=>{a.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(a){let l=a.target;this._isRelevantForRemoval(l)&&!l.pm.dragging()&&(l.removeFrom(this.map.pm._getContainingLayer()),l.remove(),l instanceof L.LayerGroup?(this._fireRemoveLayerGroup(l),this._fireRemoveLayerGroup(this.map,l)):(l.pm._fireRemove(l),l.pm._fireRemove(this.map,l)))},_isRelevantForRemoval(a){return a.pm&&!(a instanceof L.LayerGroup)&&(!L.PM.optIn&&!a.options.pmIgnore||L.PM.optIn&&a.options.pmIgnore===!1)&&!a._pmTempLayer&&a.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let a=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let l in a){let h=a[l];this._isRelevantForRemoval(h)&&(h.pm.enabled()&&h.pm.disable(),h.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:a}){this._addedLayersRemoval[L.stamp(a)]=a}},Ih=vo,Th={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(a=>a instanceof L.Polyline).forEach(a=>{this._isRelevantForRotate(a)&&a.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(a=>a instanceof L.Polyline).forEach(a=>{a.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(a){return a.pm&&a instanceof L.Polyline&&!(a instanceof L.LayerGroup)&&(!L.PM.optIn&&!a.options.pmIgnore||L.PM.optIn&&a.options.pmIgnore===!1)&&!a._pmTempLayer&&a.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let a=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let l in a){let h=a[l];this._isRelevantForRemoval(h)&&h.pm.enableRotate()}},_layerAddedRotate({layer:a}){this._addedLayersRotate[L.stamp(a)]=a}},td=Th,Ah=d(Cu()),$l={_fireDrawStart(a="Draw",l={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},a,l)},_fireDrawEnd(a="Draw",l={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},a,l)},_fireCreate(a,l="Draw",h={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:a,layer:a},l,h)},_fireCenterPlaced(a="Draw",l={}){let h=a==="Draw"?this._layer:void 0,p=a!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:h,layer:p,latlng:this._layer.getLatLng()},a,l)},_fireCut(a,l,h,p="Draw",m={}){this.__fire(a,"pm:cut",{shape:this._shape,layer:l,originalLayer:h},p,m)},_fireEdit(a=this._layer,l="Edit",h={}){this.__fire(a,"pm:edit",{layer:this._layer,shape:this.getShape()},l,h)},_fireEnable(a="Edit",l={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},a,l)},_fireDisable(a="Edit",l={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},a,l)},_fireUpdate(a="Edit",l={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},a,l)},_fireMarkerDragStart(a,l=void 0,h="Edit",p={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:a,shape:this.getShape(),indexPath:l},h,p)},_fireMarkerDrag(a,l=void 0,h="Edit",p={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:a,shape:this.getShape(),indexPath:l},h,p)},_fireMarkerDragEnd(a,l=void 0,h=void 0,p="Edit",m={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:a,shape:this.getShape(),indexPath:l,intersectionReset:h},p,m)},_fireDragStart(a="Edit",l={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},a,l)},_fireDrag(a,l="Edit",h={}){this.__fire(this._layer,"pm:drag",{...a,shape:this.getShape()},l,h)},_fireDragEnd(a="Edit",l={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},a,l)},_fireDragEnable(a="Edit",l={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},a,l)},_fireDragDisable(a="Edit",l={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},a,l)},_fireRemove(a,l=a,h="Edit",p={}){this.__fire(a,"pm:remove",{layer:l,shape:this.getShape()},h,p)},_fireVertexAdded(a,l,h,p="Edit",m={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:a,indexPath:l,latlng:h,shape:this.getShape()},p,m)},_fireVertexRemoved(a,l,h="Edit",p={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:a,indexPath:l,shape:this.getShape()},h,p)},_fireVertexClick(a,l,h="Edit",p={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:a,indexPath:l,shape:this.getShape()},h,p)},_fireIntersect(a,l=this._layer,h="Edit",p={}){this.__fire(l,"pm:intersect",{layer:this._layer,intersection:a,shape:this.getShape()},h,p)},_fireLayerReset(a,l,h="Edit",p={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:a,indexPath:l,shape:this.getShape()},h,p)},_fireChange(a,l="Edit",h={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:a,shape:this.getShape()},l,h)},_fireTextChange(a,l="Edit",h={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:a,shape:this.getShape()},l,h)},_fireTextFocus(a="Edit",l={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},a,l)},_fireTextBlur(a="Edit",l={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},a,l)},_fireSnapDrag(a,l,h="Snapping",p={}){this.__fire(a,"pm:snapdrag",l,h,p)},_fireSnap(a,l,h="Snapping",p={}){this.__fire(a,"pm:snap",l,h,p)},_fireUnsnap(a,l,h="Snapping",p={}){this.__fire(a,"pm:unsnap",l,h,p)},_fireRotationEnable(a,l,h="Rotation",p={}){this.__fire(a,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},h,p)},_fireRotationDisable(a,l="Rotation",h={}){this.__fire(a,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},l,h)},_fireRotationStart(a,l,h="Rotation",p={}){this.__fire(a,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:l},h,p)},_fireRotation(a,l,h,p=this._rotationLayer,m="Rotation",C={}){this.__fire(a,"pm:rotate",{layer:p,helpLayer:this._layer,startAngle:this._startAngle,angle:p.pm.getAngle(),angleDiff:l,oldLatLngs:h,newLatLngs:p.getLatLngs()},m,C)},_fireRotationEnd(a,l,h,p="Rotation",m={}){this.__fire(a,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:l,angle:this._rotationLayer.pm.getAngle(),originLatLngs:h,newLatLngs:this._rotationLayer.getLatLngs()},p,m)},_fireActionClick(a,l,h,p="Toolbar",m={}){this.__fire(this._map,"pm:actionclick",{text:a.text,action:a,btnName:l,button:h},p,m)},_fireButtonClick(a,l,h="Toolbar",p={}){this.__fire(this._map,"pm:buttonclick",{btnName:a,button:l},h,p)},_fireLangChange(a,l,h,p,m="Global",C={}){this.__fire(this.map,"pm:langchange",{oldLang:a,activeLang:l,fallback:h,translations:p},m,C)},_fireGlobalDragModeToggled(a,l="Global",h={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:a,map:this.map},l,h)},_fireGlobalEditModeToggled(a,l="Global",h={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:a,map:this.map},l,h)},_fireGlobalRemovalModeToggled(a,l="Global",h={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:a,map:this.map},l,h)},_fireGlobalCutModeToggled(a="Global",l={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},a,l)},_fireGlobalDrawModeToggled(a="Global",l={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},a,l)},_fireGlobalRotateModeToggled(a="Global",l={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},a,l)},_fireRemoveLayerGroup(a,l=a,h="Edit",p={}){this.__fire(a,"pm:remove",{layer:l,shape:void 0},h,p)},_fireKeyeventEvent(a,l,h,p="Global",m={}){this.__fire(this.map,"pm:keyevent",{event:a,eventType:l,focusOn:h},p,m)},__fire(a,l,h,p,m={}){h=(0,Ah.default)(h,m,{source:p}),L.PM.Utils._fireEvent(a,l,h)}},Su=$l,kh=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(a){this.map=a,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),a.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(a){let l="document";this.map.getContainer().contains(a.target)&&(l="map");let h={event:a,eventType:a.type,focusOn:l};this._lastEvents[a.type]=h,this._lastEvents.current=h,this.map.pm._fireKeyeventEvent(a,a.type,l)},_onBlur(a){a.altKey=!1;let l={event:a,eventType:a.type,focusOn:"document"};this._lastEvents[a.type]=l,this._lastEvents.current=l},getLastKeyEvent(a="current"){return this._lastEvents[a]},isShiftKeyPressed(){var a;return(a=this._lastEvents.current)==null?void 0:a.event.shiftKey},isAltKeyPressed(){var a;return(a=this._lastEvents.current)==null?void 0:a.event.altKey},isCtrlKeyPressed(){var a;return(a=this._lastEvents.current)==null?void 0:a.event.ctrlKey},isMetaKeyPressed(){var a;return(a=this._lastEvents.current)==null?void 0:a.event.metaKey},getPressedKey(){var a;return(a=this._lastEvents.current)==null?void 0:a.event.key}}),Ge=kh,Dh=d(Bs());function Ce(a){let l=L.PM.activeLang;return(0,Dh.default)(Fs[l],a)||(0,Dh.default)(Fs.en,a)||a}function Co(a){for(let l=0;l<a.length;l+=1){let h=a[l];if(Array.isArray(h)){if(Co(h))return!0}else if(h!=null&&h!=="")return!0}return!1}function Da(a){return a.reduce((l,h)=>{if(h.length!==0){let p=Array.isArray(h)?Da(h):h;Array.isArray(p)?p.length!==0&&l.push(p):l.push(p)}return l},[])}function ed(a,l,h){let p={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:m,b:C,f:x}=p,b=a.lng,M=a.lat,A=h,q=Math.PI,U=l*q/180,ct=Math.sin(U),ft=Math.cos(U),Tt=(1-x)*Math.tan(M*q/180),Vt=1/Math.sqrt(1+Tt*Tt),Yt=Tt*Vt,Ve=Math.atan2(Tt,ft),j=Vt*ct,Z=1-j*j,nt=Z*(m*m-C*C)/(C*C),pt=1+nt/16384*(4096+nt*(-768+nt*(320-175*nt))),st=nt/1024*(256+nt*(-128+nt*(74-47*nt))),ht=A/(C*pt),P=2*Math.PI,D,O,N;for(;Math.abs(ht-P)>1e-12;){D=Math.cos(2*Ve+ht),O=Math.sin(ht),N=Math.cos(ht);let St=st*O*(D+st/4*(N*(-1+2*D*D)-st/6*D*(-3+4*O*O)*(-3+4*D*D)));P=ht,ht=A/(C*pt)+St}let R=Yt*O-Vt*N*ft,B=Math.atan2(Yt*N+Vt*O*ft,(1-x)*Math.sqrt(j*j+R*R)),X=Math.atan2(O*ct,Vt*N-Yt*O*ft),K=x/16*Z*(4+x*(4-3*Z)),tt=X-(1-K)*x*j*(ht+K*O*(D+K*N*(-1+2*D*D))),ut=b+tt*180/q,at=B*180/q;return L.latLng(ut,at)}function Mu(a,l,h,p,m=!0){let C,x,b,M=[];for(let A=0;A<h;A+=1){if(m)C=A*360/h+p,x=ed(a,C,l),b=L.latLng(x.lng,x.lat);else{let q=a.lat+Math.cos(2*A*Math.PI/h)*l,U=a.lng+Math.sin(2*A*Math.PI/h)*l;b=L.latLng(q,U)}M.push(b)}return M}function nd(a,l,h){l=(l+360)%360;let p=Math.PI/180,m=180/Math.PI,{R:C}=L.CRS.Earth,x=a.lng*p,b=a.lat*p,M=l*p,A=Math.sin(b),q=Math.cos(b),U=Math.cos(h/C),ct=Math.sin(h/C),ft=Math.asin(A*U+q*ct*Math.cos(M)),Tt=x+Math.atan2(Math.sin(M)*ct*q,U-A*Math.sin(ft));Tt*=m;let Vt=Tt-360,Yt=Tt<-180?Tt+360:Tt;return Tt=Tt>180?Vt:Yt,L.latLng([ft*m,Tt])}function Pu(a,l,h){let p=a.latLngToContainerPoint(l),m=a.latLngToContainerPoint(h),C=Math.atan2(m.y-p.y,m.x-p.x)*180/Math.PI+90;return C+=C<0?360:0,C}function Iu(a,l,h,p){let m=Pu(a,l,h);return nd(l,m,p)}function rd(a,l,h="asc"){if(!l||Object.keys(l).length===0)return(M,A)=>M-A;let p=Object.keys(l),m,C=p.length-1,x={};for(;C>=0;)m=p[C],x[m.toLowerCase()]=l[m],C-=1;function b(M){if(M instanceof L.Marker)return"Marker";if(M instanceof L.Circle)return"Circle";if(M instanceof L.CircleMarker)return"CircleMarker";if(M instanceof L.Rectangle)return"Rectangle";if(M instanceof L.Polygon)return"Polygon";if(M instanceof L.Polyline)return"Line"}return(M,A)=>{let q,U;if(q=b(M.layer).toLowerCase(),U=b(A.layer).toLowerCase(),!q||!U)return 0;let ct=q in x?x[q]:Number.MAX_SAFE_INTEGER,ft=U in x?x[U]:Number.MAX_SAFE_INTEGER,Tt=0;return ct<ft?Tt=-1:ct>ft&&(Tt=1),h==="desc"?Tt*-1:Tt}}function Ui(a,l=a.getLatLngs()){return a instanceof L.Polygon?L.polygon(l).getLatLngs():L.polyline(l).getLatLngs()}function Nh(a,l){var h,p,m,C;if((p=(h=l.options.crs)==null?void 0:h.projection)!=null&&p.MAX_LATITUDE){let x=(C=(m=l.options.crs)==null?void 0:m.projection)==null?void 0:C.MAX_LATITUDE;a.lat=Math.max(Math.min(x,a.lat),-x)}return a}function Lr(a){return a.options.renderer||a._map&&(a._map._getPaneRenderer(a.options.pane)||a._map.options.renderer||a._map._renderer)||a._renderer}var id=L.Class.extend({includes:[Jl,nr,Ih,td,Su],initialize(a){this.map=a,this.Draw=new L.PM.Draw(a),this.Toolbar=new L.PM.Toolbar(a),this.Keyboard=Ge(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(a)},setLang(a="en",l,h="en"){if(a=a.trim().toLowerCase(),!/^[a-z]{2}$/.test(a)){let m=a.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(m){let C=[`${m[1]}_${m[2]}`,`${m[1]}`];for(let x of C)if(Fs[x]){a=x;break}}}let p=L.PM.activeLang;l&&(Fs[a]=(0,we.default)(Fs[h],l)),L.PM.activeLang=a,this.map.pm.Toolbar.reinit(),this._fireLangChange(p,a,h,Fs[a])},addControls(a){this.Toolbar.addControls(a)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(a="Polygon",l){a==="Poly"&&(a="Polygon"),this.Draw.enable(a,l)},disableDraw(a="Polygon"){a==="Poly"&&(a="Polygon"),this.Draw.disable(a)},setPathOptions(a,l={}){let h=l.ignoreShapes||[],p=l.merge||!1;this.map.pm.Draw.shapes.forEach(m=>{h.indexOf(m)===-1&&this.map.pm.Draw[m].setPathOptions(a,p)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(a){let l=(0,we.default)(this.globalOptions,a);l.editable&&(l.resizeableCircleMarker=l.editable,delete l.editable);let h=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!l.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),h=!0);let p=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!l.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),p=!0),this.map.pm.Draw.shapes.forEach(m=>{this.map.pm.Draw[m].setOptions(l)}),h&&this.map.pm.Draw.CircleMarker.enable(),p&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(m=>{m.pm.setOptions(l)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=l,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(a=>{a.pm.enabled()&&a.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(a){return this.Draw.Cut.enable(a)},toggleGlobalCutMode(a){return this.Draw.Cut.toggle(a)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(a=!1){let l=L.PM.Utils.findLayers(this.map);if(!a)return l;let h=L.featureGroup();return h._pmTempLayer=!0,l.forEach(p=>{h.addLayer(p)}),h},getGeomanDrawLayers(a=!1){let l=L.PM.Utils.findLayers(this.map).filter(p=>p._drawnByGeoman===!0);if(!a)return l;let h=L.featureGroup();return h._pmTempLayer=!0,l.forEach(p=>{h.addLayer(p)}),h},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(a){this._touchEventCounter===0&&(L.DomEvent.on(a,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(a,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(a){this._touchEventCounter===1&&(L.DomEvent.off(a,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(a,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(a){Lr(this.map)._onMouseMove(this._createMouseEvent("mousemove",a))},_canvasTouchClick(a){let l="";a.type==="touchstart"||a.type==="pointerdown"?l="mousedown":(a.type==="touchend"||a.type==="pointerup"||a.type==="touchcancel"||a.type==="pointercancel")&&(l="mouseup"),l&&Lr(this.map)._onClick(this._createMouseEvent(l,a))},_createMouseEvent(a,l){let h,p=l.touches[0]||l.changedTouches[0];try{h=new MouseEvent(a,{bubbles:l.bubbles,cancelable:l.cancelable,view:l.view,detail:p.detail,screenX:p.screenX,screenY:p.screenY,clientX:p.clientX,clientY:p.clientY,ctrlKey:l.ctrlKey,altKey:l.altKey,shiftKey:l.shiftKey,metaKey:l.metaKey,button:l.button,relatedTarget:l.relatedTarget})}catch{h=document.createEvent("MouseEvents"),h.initMouseEvent(a,l.bubbles,l.cancelable,l.view,p.detail,p.screenX,p.screenY,p.clientX,p.clientY,l.ctrlKey,l.altKey,l.shiftKey,l.metaKey,l.button,l.relatedTarget)}return h}}),Oh=id,zs=L.Control.extend({includes:[Su],options:{position:"topleft",disableByOtherButtons:!0},initialize(a){this._button=L.Util.extend({},this.options,a)},onAdd(a){return this._map=a,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let a=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),a?a.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(a){return typeof a=="boolean"?this._button.toggleStatus=a:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(a){a&&a.preventDefault(),!this._button.disabled&&(this._button.onClick(a,{button:this,event:a}),this._clicked(a),this._button.afterClick(a,{button:this,event:a}))},_makeButton(a){let l=this.options.position.indexOf("right")>-1?"pos-right":"",h=L.DomUtil.create("div",`button-container  ${l}`,this._container);a.title&&h.setAttribute("title",a.title);let p=L.DomUtil.create("a","leaflet-buttons-control-button",h);p.setAttribute("role","button"),p.setAttribute("tabindex","0"),p.href="#";let m=L.DomUtil.create("div",`leaflet-pm-actions-container ${l}`,h),C=a.actions,x={cancel:{text:Ce("actions.cancel"),title:Ce("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:Ce("actions.finish"),title:Ce("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:Ce("actions.removeLastVertex"),title:Ce("actions.removeLastVertex"),onClick(){this._map.pm.Draw[a.jsClass]._removeLastVertex()}},finish:{text:Ce("actions.finish"),title:Ce("actions.finish"),onClick(M){this._map.pm.Draw[a.jsClass]._finishShape(M)}}};a._preparedActions=C.map(M=>{let A=typeof M=="string"?M:M.name,q;if(x[A])q=x[A];else if(M.text)q=M;else return q;let U=L.DomUtil.create("a",`leaflet-pm-action ${l} action-${A}`,m);if(U.setAttribute("role","button"),U.setAttribute("tabindex","0"),U.href="#",q.title&&(U.title=q.title),U.innerHTML=q.text,L.DomEvent.disableClickPropagation(U),L.DomEvent.on(U,"click",L.DomEvent.stop),q._node=U,!a.disabled&&q.onClick){let ct=ft=>{ft.preventDefault();let Tt="",{buttons:Vt}=this._map.pm.Toolbar;for(let Yt in Vt)if(Vt[Yt]._button===a){Tt=Yt;break}this._fireActionClick(q,Tt,a)};L.DomEvent.addListener(U,"click",ct,this),L.DomEvent.addListener(U,"click",q.onClick,this),L.DomEvent.addListener(U,"click",()=>this._updateActiveAction(a))}return q}),this._updateActiveAction(a),a.toggleStatus&&L.DomUtil.addClass(h,"active");let b=L.DomUtil.create("div","control-icon",p);return a.iconUrl&&b.setAttribute("src",a.iconUrl),a.className&&L.DomUtil.addClass(b,a.className),L.DomEvent.disableClickPropagation(p),L.DomEvent.on(p,"click",L.DomEvent.stop),a.disabled||(L.DomEvent.addListener(p,"click",this._onBtnClick,this),L.DomEvent.addListener(p,"click",this._triggerClick,this)),a.disabled&&(L.DomUtil.addClass(p,"pm-disabled"),p.setAttribute("aria-disabled","true")),h},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let a="",{buttons:l}=this._map.pm.Toolbar;for(let h in l)if(l[h]._button===this._button){a=h;break}this._fireButtonClick(a,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let a="pm-disabled",l=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(l,a),l.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(l,a),l.setAttribute("aria-disabled","false"))},_updateActiveAction(a){var l;(l=a._preparedActions)==null||l.forEach(h=>{h!=null&&h._node&&(h.isActive&&h.isActive.call(this)?L.DomUtil.addClass(h._node,"active-action"):L.DomUtil.removeClass(h._node,"active-action"))})}}),Rh=zs;L.Control.PMButton=Rh;var Bh=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(a){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(a)},reinit(){let a=this.isVisible;this.removeControls(),this._defineButtons(),a&&this.addControls()},init(a){this.map=a,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(a){let l=`${a}Container`;return this[l]||(this[l]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${a} leaflet-bar leaflet-control`)),this[l]},getButtons(){return this.buttons},addControls(a=this.options){typeof a.editPolygon<"u"&&(a.editMode=a.editPolygon),typeof a.deleteLayer<"u"&&(a.removalMode=a.deleteLayer),L.Util.setOptions(this,a),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let a=this.getButtons(),l={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let h in a){let p=a[h];L.Util.setOptions(p,{className:l.geomanIcons[h]})}},removeControls(){let a=this.getButtons();for(let l in a)a[l].remove();this.isVisible=!1},toggleControls(a=this.options){this.isVisible?this.removeControls():this.addControls(a)},_addButton(a,l){return this.buttons[a]=l,this.options[a]=!!this.options[a]||!1,this.buttons[a]},triggerClickOnToggledButtons(a){for(let l in this.buttons){let h=this.buttons[l];h._button.disableByOtherButtons&&h!==a&&h.toggled()&&h._triggerClick()}},toggleButton(a,l,h=!0){a==="editPolygon"&&(a="editMode"),a==="deleteLayer"&&(a="removalMode");let p=a;return h&&this.triggerClickOnToggledButtons(this.buttons[p]),this.buttons[p]?this.buttons[p].toggle(l):!1},_defineButtons(){let a={className:"control-icon leaflet-pm-icon-marker",title:Ce("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(ct,ft)=>{this.map.pm.Draw[ft.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},l={title:Ce("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(ct,ft)=>{this.map.pm.Draw[ft.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},h={className:"control-icon leaflet-pm-icon-polyline",title:Ce("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(ct,ft)=>{this.map.pm.Draw[ft.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},p={title:Ce("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(ct,ft)=>{this.map.pm.Draw[ft.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},m={title:Ce("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(ct,ft)=>{this.map.pm.Draw[ft.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},C={title:Ce("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(ct,ft)=>{this.map.pm.Draw[ft.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},x={title:Ce("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},b={title:Ce("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},M={title:Ce("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(ct,ft)=>{this.map.pm.Draw[ft.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},A={title:Ce("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},q={title:Ce("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},U={className:"control-icon leaflet-pm-icon-text",title:Ce("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(ct,ft)=>{this.map.pm.Draw[ft.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(a)),this._addButton("drawPolyline",new L.Control.PMButton(h)),this._addButton("drawRectangle",new L.Control.PMButton(C)),this._addButton("drawPolygon",new L.Control.PMButton(l)),this._addButton("drawCircle",new L.Control.PMButton(p)),this._addButton("drawCircleMarker",new L.Control.PMButton(m)),this._addButton("drawText",new L.Control.PMButton(U)),this._addButton("editMode",new L.Control.PMButton(x)),this._addButton("dragMode",new L.Control.PMButton(b)),this._addButton("cutPolygon",new L.Control.PMButton(M)),this._addButton("removalMode",new L.Control.PMButton(A)),this._addButton("rotateMode",new L.Control.PMButton(q))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let a=this.getButtons(),l=[];this.options.drawControls===!1&&(l=l.concat(Object.keys(a).filter(h=>!a[h]._button.tool))),this.options.editControls===!1&&(l=l.concat(Object.keys(a).filter(h=>a[h]._button.tool==="edit"))),this.options.optionsControls===!1&&(l=l.concat(Object.keys(a).filter(h=>a[h]._button.tool==="options"))),this.options.customControls===!1&&(l=l.concat(Object.keys(a).filter(h=>a[h]._button.tool==="custom")));for(let h in a)if(this.options[h]&&l.indexOf(h)===-1){let p=a[h]._button.tool;p||(p="draw"),a[h].setPosition(this._getBtnPosition(p)),a[h].addTo(this.map)}},_getBtnPosition(a){return this.options.positions&&this.options.positions[a]?this.options.positions[a]:this.options.position},setBlockPosition(a,l){this.options.positions[a]=l,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(a,l){if(l)typeof l!="object"&&(l={name:l});else throw new TypeError("Button has no name");let h=this._btnNameMapping(a);if(!l.name)throw new TypeError("Button has no name");if(this.buttons[l.name])throw new TypeError("Button with this name already exists");let p=this.map.pm.Draw.createNewDrawInstance(l.name,h);l={...this.buttons[h]._button,...l};let m=this.createCustomControl(l);return{drawInstance:p,control:m}},createCustomControl(a){if(!a.name)throw new TypeError("Button has no name");if(this.buttons[a.name])throw new TypeError("Button with this name already exists");a.onClick||(a.onClick=()=>{}),a.afterClick||(a.afterClick=()=>{}),a.toggle!==!1&&(a.toggle=!0),a.block&&(a.block=a.block.toLowerCase()),(!a.block||a.block==="draw")&&(a.block=""),a.className?a.className.indexOf("control-icon")===-1&&(a.className=`control-icon ${a.className}`):a.className="control-icon";let l={tool:a.block,className:a.className,title:a.title||"",jsClass:a.name,onClick:a.onClick,afterClick:a.afterClick,doToggle:a.toggle,toggleStatus:!1,disableOtherButtons:a.disableOtherButtons??!0,disableByOtherButtons:a.disableByOtherButtons??!0,cssToggle:a.toggle,position:this.options.position,actions:a.actions||[],disabled:!!a.disabled};this.options[a.name]!==!1&&(this.options[a.name]=!0);let h=this._addButton(a.name,new L.Control.PMButton(l));return this.changeControlOrder(),h},controlExists(a){return!!this.getButton(a)},getButton(a){return this.getButtons()[a]},getButtonsInBlock(a){let l={};if(a)for(let h in this.getButtons()){let p=this.getButtons()[h];(p._button.tool===a||a==="draw"&&!p._button.tool)&&(l[h]=p)}return l},changeControlOrder(a=[]){let l=this._shapeMapping(),h=[];a.forEach(C=>{l[C]?h.push(l[C]):h.push(C)});let p=this.getButtons(),m={};h.forEach(C=>{p[C]&&(m[C]=p[C])}),Object.keys(p).filter(C=>!p[C]._button.tool||p[C]._button.tool==="draw").forEach(C=>{h.indexOf(C)===-1&&(m[C]=p[C])}),Object.keys(p).filter(C=>p[C]._button.tool==="edit").forEach(C=>{h.indexOf(C)===-1&&(m[C]=p[C])}),Object.keys(p).filter(C=>p[C]._button.tool==="options").forEach(C=>{h.indexOf(C)===-1&&(m[C]=p[C])}),Object.keys(p).filter(C=>p[C]._button.tool==="custom").forEach(C=>{h.indexOf(C)===-1&&(m[C]=p[C])}),Object.keys(p).forEach(C=>{h.indexOf(C)===-1&&(m[C]=p[C])}),this.map.pm.Toolbar.buttons=m,this._showHideButtons()},getControlOrder(){let a=this.getButtons(),l=[];for(let h in a)l.push(h);return l},changeActionsOfControl(a,l){let h=this._btnNameMapping(a);if(!h)throw new TypeError("No name passed");if(!l)throw new TypeError("No actions passed");if(!this.buttons[h])throw new TypeError("Button with this name not exists");this.buttons[h]._button.actions=l,this.changeControlOrder()},setButtonDisabled(a,l){let h=this._btnNameMapping(a);l?this.buttons[h].disable():this.buttons[h].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(a){let l=this._shapeMapping();return l[a]?l[a]:a}}),Ql=Bh,sd=d(Cu()),Fh={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(a){a.forEach(l=>{if(Array.isArray(l)){this._assignEvents(l);return}l.off("drag",this._handleSnapping,this),l.on("drag",this._handleSnapping,this),l.off("dragend",this._cleanupSnapping,this),l.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(a){if(a){let l=a.target;l._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(l=>{l.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(a){var b,M,A;let l=a.target;if(l._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((b=a==null?void 0:a.originalEvent)==null?void 0:b.altKey)||((A=(M=this._map)==null?void 0:M.pm)==null?void 0:A.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let h=this._calcClosestLayer(l.getLatLng(),this._snapList);if(Object.keys(h).length===0)return!1;let p=h.layer instanceof L.Marker||h.layer instanceof L.CircleMarker||!this.options.snapSegment,m;p?m=h.latlng:m=this._checkPrioritiySnapping(h);let C=this.options.snapDistance,x={marker:l,shape:this._shape,snapLatLng:m,segment:h.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:h.layer,distance:h.distance};if(this._fireSnapDrag(x.marker,x),this._fireSnapDrag(this._layer,x),h.distance<C){l._orgLatLng=l.getLatLng(),l.setLatLng(m),l._snapped=!0,l._snapInfo=x;let q=()=>{this._snapLatLng=m,this._fireSnap(l,x),this._fireSnap(this._layer,x)},U=this._snapLatLng||{},ct=m||{};(U.lat!==ct.lat||U.lng!==ct.lng)&&q()}else this._snapLatLng&&(this._unsnap(x),l._snapped=!1,l._snapInfo=void 0,this._fireUnsnap(x.marker,x),this._fireUnsnap(this._layer,x));return!0},_createSnapList(){let a=[],l=[],h=this._map;h.off("layerremove",this._handleSnapLayerRemoval,this),h.on("layerremove",this._handleSnapLayerRemoval,this),h.eachLayer(p=>{if((p instanceof L.Polyline||p instanceof L.Marker||p instanceof L.CircleMarker||p instanceof L.ImageOverlay)&&p.options.snapIgnore!==!0){if(p.options.snapIgnore===void 0&&(!L.PM.optIn&&p.options.pmIgnore===!0||L.PM.optIn&&p.options.pmIgnore!==!1))return;(p instanceof L.Circle||p instanceof L.CircleMarker)&&p.pm&&p.pm._hiddenPolyCircle?a.push(p.pm._hiddenPolyCircle):p instanceof L.ImageOverlay&&(p=L.rectangle(p.getBounds())),a.push(p);let m=L.polyline([],{color:"red",pmIgnore:!0});m._pmTempLayer=!0,l.push(m),(p instanceof L.Circle||p instanceof L.CircleMarker)&&l.push(m)}}),a=a.filter(p=>this._layer!==p),a=a.filter(p=>p._latlng||p._latlngs&&Co(p._latlngs)),a=a.filter(p=>!p._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let p=L.polyline([],{color:"red",pmIgnore:!0});p._pmTempLayer=!0,l.push(p)}),this._snapList=a.concat(this._otherSnapLayers)):this._snapList=a,this.debugIndicatorLines=l},_handleSnapLayerRemoval({layer:a}){if(!a._leaflet_id)return;let l=this._snapList.findIndex(h=>h._leaflet_id===a._leaflet_id);l>-1&&this._snapList.splice(l,1)},_calcClosestLayer(a,l){return this._calcClosestLayers(a,l,1)[0]},_calcClosestLayers(a,l,h=1){let p=[],m={};l.forEach((x,b)=>{var A;if(x._parentCopy&&x._parentCopy===this._layer||((A=x.getLatLngs)==null?void 0:A.call(x).flat(5).length)<2)return;let M=this._calcLayerDistances(a,x);if(M.distance=Math.floor(M.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[b]){let q=L.polyline([],{color:"red",pmIgnore:!0});q._pmTempLayer=!0,this.debugIndicatorLines[b]=q}this.debugIndicatorLines[b].setLatLngs([a,M.latlng])}h===1&&(m.distance===void 0||M.distance-5<=m.distance)?(M.distance+5<m.distance&&(p=[]),m=M,m.layer=x,p.push(m)):h!==1&&(m={},m=M,m.layer=x,p.push(m))}),h!==1&&(p=p.sort((x,b)=>x.distance-b.distance)),h===-1&&(h=p.length);let C=this._getClosestLayerByPriority(p,h);return L.Util.isArray(C)?C:[C]},_calcLayerDistances(a,l){let h=this._map,p=l instanceof L.Marker||l instanceof L.CircleMarker,m=l instanceof L.Polygon,C=a;if(p){let x=l.getLatLng();return{latlng:{...x},distance:this._getDistance(h,x,C)}}return this._calcLatLngDistances(C,l.getLatLngs(),h,m)},_calcLatLngDistances(a,l,h,p=!1){let m,C,x,b=M=>{M.forEach((A,q)=>{if(Array.isArray(A)){b(A);return}if(this.options.snapSegment){let U=A,ct;p?ct=q+1===M.length?0:q+1:ct=q+1===M.length?void 0:q+1;let ft=M[ct];if(ft){let Tt=this._getDistanceToSegment(h,a,U,ft);(C===void 0||Tt<C)&&(C=Tt,x=[U,ft])}}else{let U=this._getDistance(h,a,A);(C===void 0||U<C)&&(C=U,m=A)}})};return b(l),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(h,a,x[0],x[1])},segment:x,distance:C}:{latlng:m,distance:C}},_getClosestLayerByPriority(a,l=1){a=a.sort((x,b)=>x._leaflet_id-b._leaflet_id);let h=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],p=this._map.pm.globalOptions.snappingOrder||[],m=0,C={};return p.concat(h).forEach(x=>{C[x]||(m+=1,C[x]=m)}),a.sort(rd("instanceofShape",C)),l===1?a[0]||{}:a.slice(0,l)},_checkPrioritiySnapping(a){let l=this._map,h=a.segment[0],p=a.segment[1],m=a.latlng,C=m;if(this.options.snapVertex){let x=this._getDistance(l,h,m),b=this._getDistance(l,p,m),M=x<b?h:p,A=x<b?x:b;if(this.options.snapMiddle){let U=L.PM.Utils.calcMiddleLatLng(l,h,p),ct=this._getDistance(l,U,m);ct<x&&ct<b&&(M=U,A=ct)}let q=this.options.snapDistance;A<q&&(C=M)}return{...C}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(a,l,h,p){let m=a.getMaxZoom();m===1/0&&(m=a.getZoom());let C=a.project(l,m),x=a.project(h,m),b=a.project(p,m),M=L.LineUtil.closestPointOnSegment(C,x,b);return a.unproject(M,m)},_getDistanceToSegment(a,l,h,p){let m=a.latLngToContainerPoint(l),C=a.latLngToContainerPoint(h),x=a.latLngToContainerPoint(p);return L.LineUtil.pointToSegmentDistance(m,C,x)},_getDistance(a,l,h){return a.latLngToContainerPoint(l).distanceTo(a.latLngToContainerPoint(h))}},tc=Fh,od=L.Class.extend({includes:[tc,Su],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(a){L.Util.setOptions(this,a),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(a){let l=new L.Icon.Default;l.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=l,this._map=a,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(h=>{this[h]=new L.PM.Draw[h](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(a,l=!1){l?this.options.pathOptions=(0,sd.default)(this.options.pathOptions,a):this.options.pathOptions=a},getShapes(){return this.shapes},getShape(){return this._shape},enable(a,l){if(!a)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[a].enable(l)},disable(){this.shapes.forEach(a=>{this[a].disable()})},addControls(){this.shapes.forEach(a=>{this[a].addButton()})},getActiveShape(){let a;return this.shapes.forEach(l=>{this[l]._enabled&&(a=l)}),a},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let a=[];this._map.eachLayer(l=>{(l instanceof L.Polyline||l instanceof L.Marker||l instanceof L.Circle||l instanceof L.CircleMarker||l instanceof L.ImageOverlay)&&(l._pmTempLayer||a.push(l))}),this._enabled?a.forEach(l=>{L.PM.Utils.disablePopup(l)}):a.forEach(l=>{L.PM.Utils.enablePopup(l)})},createNewDrawInstance(a,l){let h=this._getShapeFromBtnName(l);if(this[a])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[h])throw new TypeError(`There is no class L.PM.Draw.${h}`);return this[a]=new L.PM.Draw[h](this._map),this[a].toolbarButtonName=a,this[a]._shape=a,this.shapes.push(a),this[l]&&this[a].setOptions(this[l].options),this[a].setOptions(this[a].options),this[a]},_getShapeFromBtnName(a){let l={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return l[a]?l[a]:this[a]?this[a]._shape:a},_finishLayer(a){a.pm&&(a.pm.setOptions(this.options),a.pm._shape=this._shape,a.pm._map=this._map),this._addDrawnLayerProp(a)},_addDrawnLayerProp(a){a._drawnByGeoman=!0},_setPane(a,l){l==="layerPane"?a.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":l==="vertexPane"?a.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":l==="markerPane"&&(a.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),rr=od;rr.Marker=rr.extend({initialize(a){this._map=a,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(a){L.Util.setOptions(this,a),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(Ce("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(l=>{this.isRelevantMarker(l)&&l.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(a=>{this.isRelevantMarker(a)&&a.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(a){this.enabled()?this.disable():this.enable(a)},isRelevantMarker(a){return a instanceof L.Marker&&a.pm&&!a._pmTempLayer&&!a.pm._initTextMarker},_syncHintMarker(a){if(this._hintMarker.setLatLng(a.latlng),this.options.snappable){let l=a;l.target=this._hintMarker,this._handleSnapping(l)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(a){if(!a.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(a.latlng);let l=this._hintMarker.getLatLng(),h=new L.Marker(l,this.options.markerStyle);this._setPane(h,"markerPane"),this._finishLayer(h),h.pm||(h.options.draggable=!1),h.addTo(this._map.pm._getContainingLayer()),h.pm&&this.options.markerEditable?h.pm.enable():h.dragging&&h.dragging.disable(),this._fireCreate(h),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var a,l;(a=this.options.markerStyle)!=null&&a.icon&&((l=this._hintMarker)==null||l.setIcon(this.options.markerStyle.icon))}});var lr=63710088e-1,zh={centimeters:lr*100,centimetres:lr*100,degrees:lr/111325,feet:lr*3.28084,inches:lr*39.37,kilometers:lr/1e3,kilometres:lr/1e3,meters:lr,metres:lr,miles:lr/1609.344,millimeters:lr*1e3,millimetres:lr*1e3,nauticalmiles:lr/1852,radians:1,yards:lr*1.0936};function Eo(a,l,h){h===void 0&&(h={});var p={type:"Feature"};return(h.id===0||h.id)&&(p.id=h.id),h.bbox&&(p.bbox=h.bbox),p.properties=l||{},p.geometry=a,p}function Lo(a,l,h){if(h===void 0&&(h={}),!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ec(a[0])||!ec(a[1]))throw new Error("coordinates must contain numbers");var p={type:"Point",coordinates:a};return Eo(p,l,h)}function Gs(a,l,h){if(h===void 0&&(h={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");var p={type:"LineString",coordinates:a};return Eo(p,l,h)}function Ar(a,l){l===void 0&&(l={});var h={type:"FeatureCollection"};return l.id&&(h.id=l.id),l.bbox&&(h.bbox=l.bbox),h.features=a,h}function ad(a,l){l===void 0&&(l="kilometers");var h=zh[l];if(!h)throw new Error(l+" units is invalid");return a*h}function Na(a,l){l===void 0&&(l="kilometers");var h=zh[l];if(!h)throw new Error(l+" units is invalid");return a/h}function kr(a){var l=a%(2*Math.PI);return l*180/Math.PI}function ci(a){var l=a%360;return l*Math.PI/180}function ec(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)}function Tu(a){var l,h,p={type:"FeatureCollection",features:[]};if(a.type==="Feature"?h=a.geometry:h=a,h.type==="LineString")l=[h.coordinates];else if(h.type==="MultiLineString")l=h.coordinates;else if(h.type==="MultiPolygon")l=[].concat.apply([],h.coordinates);else if(h.type==="Polygon")l=h.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return l.forEach(function(m){l.forEach(function(C){for(var x=0;x<m.length-1;x++)for(var b=x;b<C.length-1;b++)if(!(m===C&&(Math.abs(x-b)===1||x===0&&b===m.length-2&&m[x][0]===m[m.length-1][0]&&m[x][1]===m[m.length-1][1]))){var M=nc(m[x][0],m[x][1],m[x+1][0],m[x+1][1],C[b][0],C[b][1],C[b+1][0],C[b+1][1]);M&&p.features.push(Lo([M[0],M[1]]))}})}),p}function nc(a,l,h,p,m,C,x,b){var M,A,q,U,ct,ft={x:null,y:null,onLine1:!1,onLine2:!1};return M=(b-C)*(h-a)-(x-m)*(p-l),M===0?ft.x!==null&&ft.y!==null?ft:!1:(A=l-C,q=a-m,U=(x-m)*A-(b-C)*q,ct=(h-a)*A-(p-l)*q,A=U/M,q=ct/M,ft.x=a+A*(h-a),ft.y=l+A*(p-l),A>=0&&A<=1&&(ft.onLine1=!0),q>=0&&q<=1&&(ft.onLine2=!0),ft.onLine1&&ft.onLine2?[ft.x,ft.y]:!1)}rr.Line=rr.extend({initialize(a){this._map=a,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(a){L.Util.setOptions(this,a),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Ce("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(a){this.enabled()?this.disable():this.enable(a)},_syncHintLine(){let a=this._layer.getLatLngs();if(a.length>0){let l=a[a.length-1];this._hintline.setLatLngs([l,this._hintMarker.getLatLng()])}},_syncHintMarker(a){if(this._hintMarker.setLatLng(a.latlng),this.options.snappable){let h=a;h.target=this._hintMarker,this._handleSnapping(h)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let l=this._layer._defaultShape().slice();l.push(this._hintMarker.getLatLng()),this._change(l)},hasSelfIntersection(){return Tu(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(a,l){let h=L.polyline(this._layer.getLatLngs());a&&(l||(l=this._hintMarker.getLatLng()),h.addLatLng(l));let p=Tu(h.toGeoJSON(15));this._doesSelfIntersect=p.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(p,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(a){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,a.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(a.latlng);let l=this._hintMarker.getLatLng(),h=this._layer.getLatLngs(),p=h[h.length-1];if(l.equals(h[0])||h.length>0&&l.equals(p)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:l,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(l);let m=this._createMarker(l);this._setTooltipText(),this._setHintLineAfterNewVertex(l),this._fireVertexAdded(m,void 0,l,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(a)},_setHintLineAfterNewVertex(a){this._hintline.setLatLngs([a,a])},_removeLastVertex(){let a=this._markers;if(a.length<=1){this.disable();return}let l=this._layer.getLatLngs(),h=a[a.length-1],{indexPath:p}=L.PM.Utils.findDeepMarkerIndex(a,h);a.pop(),this._layerGroup.removeLayer(h);let m=a[a.length-1],C=l.indexOf(m.getLatLng());l=l.slice(0,C+1),this._layer.setLatLngs(l),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(h,p,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let a=this._layer.getLatLngs();if(a.length<=1)return;let l=L.polyline(a,this.options.pathOptions);this._setPane(l,"layerPane"),this._finishLayer(l),l.addTo(this._map.pm._getContainingLayer()),this._fireCreate(l),this.options.snappable&&this._cleanupSnapping();let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))},_createMarker(a){let l=new L.Marker(a,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(l,"vertexPane"),l._pmTempLayer=!0,this._layerGroup.addLayer(l),this._markers.push(l),l.on("click",this._finishShape,this),l},_setTooltipText(){let{length:a}=this._layer.getLatLngs().flat(),l="";a<=1?l=Ce("tooltips.continueLine"):l=Ce("tooltips.finishLine"),this._hintMarker.setTooltipContent(l)},_change(a){this._fireChange(a,"Draw")},setStyle(){var a,l;(a=this._layer)==null||a.setStyle(this.options.templineStyle),(l=this._hintline)==null||l.setStyle(this.options.hintlineStyle)}}),rr.Polygon=rr.Line.extend({initialize(a){this._map=a,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(a){L.PM.Draw.Line.prototype.enable.call(this,a),this._layer.pm._shape="Polygon"},_createMarker(a){let l=new L.Marker(a,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(l,"vertexPane"),l._pmTempLayer=!0,this._layerGroup.addLayer(l),this._markers.push(l),this._layer.getLatLngs().flat().length===1?(l.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(l)-1,this.options.snappable&&this._cleanupSnapping()):l.on("click",()=>1),l},_setTooltipText(){let{length:a}=this._layer.getLatLngs().flat(),l="";a<=2?l=Ce("tooltips.continueLine"):l=Ce("tooltips.finishPoly"),this._hintMarker.setTooltipContent(l)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let a=this._layer.getLatLngs();if(a.length<=2)return;let l=L.polygon(a,this.options.pathOptions);this._setPane(l,"layerPane"),this._finishLayer(l),l.addTo(this._map.pm._getContainingLayer()),this._fireCreate(l),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))}}),rr.Rectangle=rr.extend({initialize(a){this._map=a,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(a){if(L.Util.setOptions(this,a),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Ce("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let l=0;l<2;l+=1){let h=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(h,"vertexPane"),h._pmTempLayer=!0,this._layerGroup.addLayer(h),this._styleMarkers.push(h)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(a){this.enabled()?this.disable():this.enable(a)},_placeStartingMarkers(a){this._hintMarker._snapped||this._hintMarker.setLatLng(a.latlng);let l=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(l),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(h=>{L.DomUtil.addClass(h._icon,"visible"),h.setLatLng(l)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(Ce("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let a=this._startMarker.getLatLng();a&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([a,a]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(a){if(this._hintMarker.setLatLng(a.latlng),this.options.snappable){let h=a;h.target=this._hintMarker,this._handleSnapping(h)}let l=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(l,"Draw")},_syncRectangleSize(){let a=Nh(this._startMarker.getLatLng(),this._map),l=Nh(this._hintMarker.getLatLng(),this._map),h=L.PM.Utils._getRotatedRectangle(a,l,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(h),this.options.cursorMarker&&this._styleMarkers){let p=[];h.forEach(m=>{!m.equals(a,1e-8)&&!m.equals(l,1e-8)&&p.push(m)}),p.forEach((m,C)=>{try{this._styleMarkers[C].setLatLng(m)}catch{}})}},_findCorners(){let a=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(a[0],a[2],this.options.rectangleAngle||0,this._map)},_finishShape(a){this._hintMarker._snapped||this._hintMarker.setLatLng(a.latlng);let l=this._hintMarker.getLatLng(),h=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||h.equals(l))return;let p=L.rectangle([h,l],this.options.pathOptions);if(this.options.rectangleAngle){let C=L.PM.Utils._getRotatedRectangle(h,l,this.options.rectangleAngle||0,this._map);p.setLatLngs(C),p.pm&&p.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(p,"layerPane"),this._finishLayer(p),p.addTo(this._map.pm._getContainingLayer()),this._fireCreate(p);let m=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(m))},setStyle(){var a;(a=this._layer)==null||a.setStyle(this.options.pathOptions)}}),rr.CircleMarker=rr.extend({initialize(a){this._map=a,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(a){if(L.Util.setOptions(this,a),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let l={};L.extend(l,this.options.templineStyle),l.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),l),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Ce("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(Ce("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(a=>{this.isRelevantMarker(a)&&a.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(a=>{this.isRelevantMarker(a)&&a.pm.disable()})},enabled(){return this._enabled},toggle(a){this.enabled()?this.disable():this.enable(a)},_placeCenterMarker(a){this._hintMarker._snapped||this._hintMarker.setLatLng(a.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let l=this._hintMarker.getLatLng();this._centerMarker.setLatLng(l),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let a=this._centerMarker.getLatLng();a&&(this._layer.setLatLng(a),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(Ce("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let a=this._centerMarker.getLatLng(),l=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([a,l])},_syncCircleRadius(){let a=this._centerMarker.getLatLng(),l=this._hintMarker.getLatLng(),h=this._distanceCalculation(a,l);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(h)},_syncHintMarker(a){if(this._hintMarker.setLatLng(a.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let h=a;h.target=this._hintMarker,this._handleSnapping(h)}this._handleHintMarkerSnapping();let l=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(l,"Draw")},isRelevantMarker(a){return a instanceof L.CircleMarker&&!(a instanceof L.Circle)&&a.pm&&!a._pmTempLayer},_createMarker(a){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!a.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(a.latlng);let l=this._hintMarker.getLatLng(),h=new this._BaseCircleClass(l,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(h,"layerPane"),this._finishLayer(h),h.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(h),this._fireCreate(h),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(a){a.pm&&this.options.markerEditable&&a.pm.enable()},_finishShape(a){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(a.latlng);let l=this._centerMarker.getLatLng(),h=this._defaultRadius;if(this.options[this._editableOption]){let x=this._hintMarker.getLatLng();h=this._distanceCalculation(l,x),this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?h=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(h=this.options[this._maxRadiusOption])}let p={...this.options.pathOptions,radius:h},m=new this._BaseCircleClass(l,p);this._setPane(m,"layerPane"),this._finishLayer(m),m.addTo(this._map.pm._getContainingLayer()),m.pm&&m.pm._updateHiddenPolyCircle(),this._fireCreate(m);let C=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(C))},_getNewDestinationOfHintMarker(){let a=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return a;let l=this._centerMarker.getLatLng(),h=this._distanceCalculation(l,a);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?a=Iu(this._map,l,a,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(a=Iu(this._map,l,a,this._getMaxDistanceInMeter()))}return a},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let a=this._centerMarker.getLatLng(),l=this._hintMarker.getLatLng(),h=this._distanceCalculation(a,l);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var l,h;let a={};L.extend(a,this.options.templineStyle),this.options[this._editableOption]&&(a.radius=0),(l=this._layer)==null||l.setStyle(a),(h=this._hintline)==null||h.setStyle(this.options.hintlineStyle)},_distanceCalculation(a,l){return this._map.project(a).distanceTo(this._map.project(l))}}),rr.Circle=rr.CircleMarker.extend({initialize(a){this._map=a,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(a,l){return this._map.distance(a,l)}});function hi(a){if(!a)throw new Error("coord is required");if(!Array.isArray(a)){if(a.type==="Feature"&&a.geometry!==null&&a.geometry.type==="Point")return a.geometry.coordinates;if(a.type==="Point")return a.coordinates}if(Array.isArray(a)&&a.length>=2&&!Array.isArray(a[0])&&!Array.isArray(a[1]))return a;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Vi(a){if(Array.isArray(a))return a;if(a.type==="Feature"){if(a.geometry!==null)return a.geometry.coordinates}else if(a.coordinates)return a.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Au(a){return a.type==="Feature"?a.geometry:a}function rc(a,l){return a.type==="FeatureCollection"?"FeatureCollection":a.type==="GeometryCollection"?"GeometryCollection":a.type==="Feature"&&a.geometry!==null?a.geometry.type:a.type}function ic(a,l,h){if(a!==null)for(var p,m,C,x,b,M,A,q=0,U=0,ct,ft=a.type,Tt=ft==="FeatureCollection",Vt=ft==="Feature",Yt=Tt?a.features.length:1,Ve=0;Ve<Yt;Ve++){A=Tt?a.features[Ve].geometry:Vt?a.geometry:a,ct=A?A.type==="GeometryCollection":!1,b=ct?A.geometries.length:1;for(var j=0;j<b;j++){var Z=0,nt=0;if(x=ct?A.geometries[j]:A,x!==null){M=x.coordinates;var pt=x.type;switch(q=0,pt){case null:break;case"Point":if(l(M,U,Ve,Z,nt)===!1)return!1;U++,Z++;break;case"LineString":case"MultiPoint":for(p=0;p<M.length;p++){if(l(M[p],U,Ve,Z,nt)===!1)return!1;U++,pt==="MultiPoint"&&Z++}pt==="LineString"&&Z++;break;case"Polygon":case"MultiLineString":for(p=0;p<M.length;p++){for(m=0;m<M[p].length-q;m++){if(l(M[p][m],U,Ve,Z,nt)===!1)return!1;U++}pt==="MultiLineString"&&Z++,pt==="Polygon"&&nt++}pt==="Polygon"&&Z++;break;case"MultiPolygon":for(p=0;p<M.length;p++){for(nt=0,m=0;m<M[p].length;m++){for(C=0;C<M[p][m].length-q;C++){if(l(M[p][m][C],U,Ve,Z,nt)===!1)return!1;U++}nt++}Z++}break;case"GeometryCollection":for(p=0;p<x.geometries.length;p++)if(ic(x.geometries[p],l)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function xr(a,l){if(a.type==="Feature")l(a,0);else if(a.type==="FeatureCollection")for(var h=0;h<a.features.length&&l(a.features[h],h)!==!1;h++);}function Ko(a,l,h){var p=h;return xr(a,function(m,C){C===0&&h===void 0?p=m:p=l(p,m,C)}),p}function ud(a,l){var h,p,m,C,x,b,M,A,q,U,ct=0,ft=a.type==="FeatureCollection",Tt=a.type==="Feature",Vt=ft?a.features.length:1;for(h=0;h<Vt;h++){for(b=ft?a.features[h].geometry:Tt?a.geometry:a,A=ft?a.features[h].properties:Tt?a.properties:{},q=ft?a.features[h].bbox:Tt?a.bbox:void 0,U=ft?a.features[h].id:Tt?a.id:void 0,M=b?b.type==="GeometryCollection":!1,x=M?b.geometries.length:1,m=0;m<x;m++){if(C=M?b.geometries[m]:b,C===null){if(l(null,ct,A,q,U)===!1)return!1;continue}switch(C.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(l(C,ct,A,q,U)===!1)return!1;break}case"GeometryCollection":{for(p=0;p<C.geometries.length;p++)if(l(C.geometries[p],ct,A,q,U)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}ct++}}function Li(a,l){ud(a,function(h,p,m,C,x){var b=h===null?null:h.type;switch(b){case null:case"Point":case"LineString":case"Polygon":return l(Eo(h,m,{bbox:C,id:x}),p,0)===!1?!1:void 0}var M;switch(b){case"MultiPoint":M="Point";break;case"MultiLineString":M="LineString";break;case"MultiPolygon":M="Polygon";break}for(var A=0;A<h.coordinates.length;A++){var q=h.coordinates[A],U={type:M,coordinates:q};if(l(Eo(U,m),p,A)===!1)return!1}})}function ld(a){if(!a)throw new Error("geojson is required");var l=[];return Li(a,function(h){Xo(h,l)}),Ar(l)}function Xo(a,l){var h=[],p=a.geometry;if(p!==null){switch(p.type){case"Polygon":h=Vi(p);break;case"LineString":h=[Vi(p)]}h.forEach(function(m){var C=cd(m,a.properties);C.forEach(function(x){x.id=l.length,l.push(x)})})}}function cd(a,l){var h=[];return a.reduce(function(p,m){var C=Gs([p,m],l);return C.bbox=Oa(p,m),h.push(C),m}),h}function Oa(a,l){var h=a[0],p=a[1],m=l[0],C=l[1],x=h<m?h:m,b=p<C?p:C,M=h>m?h:m,A=p>C?p:C;return[x,b,M,A]}var ku=ld,Du=d(go(),1);function hd(a,l){var h={},p=[];if(a.type==="LineString"&&(a=Eo(a)),l.type==="LineString"&&(l=Eo(l)),a.type==="Feature"&&l.type==="Feature"&&a.geometry!==null&&l.geometry!==null&&a.geometry.type==="LineString"&&l.geometry.type==="LineString"&&a.geometry.coordinates.length===2&&l.geometry.coordinates.length===2){var m=ps(a,l);return m&&p.push(m),Ar(p)}var C=(0,Du.default)();return C.load(ku(l)),xr(ku(a),function(x){xr(C.search(x),function(b){var M=ps(x,b);if(M){var A=Vi(M).join(",");h[A]||(h[A]=!0,p.push(M))}})}),Ar(p)}function ps(a,l){var h=Vi(a),p=Vi(l);if(h.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(p.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var m=h[0][0],C=h[0][1],x=h[1][0],b=h[1][1],M=p[0][0],A=p[0][1],q=p[1][0],U=p[1][1],ct=(U-A)*(x-m)-(q-M)*(b-C),ft=(q-M)*(C-A)-(U-A)*(m-M),Tt=(x-m)*(C-A)-(b-C)*(m-M);if(ct===0)return null;var Vt=ft/ct,Yt=Tt/ct;if(Vt>=0&&Vt<=1&&Yt>=0&&Yt<=1){var Ve=m+Vt*(x-m),j=C+Vt*(b-C);return Lo([Ve,j])}return null}var ji=hd,Gh=d(go(),1);function sc(a,l,h){h===void 0&&(h={});var p=hi(a),m=hi(l),C=ci(m[1]-p[1]),x=ci(m[0]-p[0]),b=ci(p[1]),M=ci(m[1]),A=Math.pow(Math.sin(C/2),2)+Math.pow(Math.sin(x/2),2)*Math.cos(b)*Math.cos(M);return ad(2*Math.atan2(Math.sqrt(A),Math.sqrt(1-A)),h.units)}var xo=sc;function ds(a){var l=a[0],h=a[1],p=a[2],m=a[3],C=xo(a.slice(0,2),[p,h]),x=xo(a.slice(0,2),[l,m]);if(C>=x){var b=(h+m)/2;return[l,b-(p-l)/2,p,b+(p-l)/2]}else{var M=(l+p)/2;return[M-(m-h)/2,h,M+(m-h)/2,m]}}var fd=ds;function Us(a){var l=[1/0,1/0,-1/0,-1/0];return ic(a,function(h){l[0]>h[0]&&(l[0]=h[0]),l[1]>h[1]&&(l[1]=h[1]),l[2]<h[0]&&(l[2]=h[0]),l[3]<h[1]&&(l[3]=h[1])}),l}Us.default=Us;var Ra=Us;function gs(a,l){l===void 0&&(l={});var h=l.precision,p=l.coordinates,m=l.mutate;if(h=h==null||isNaN(h)?6:h,p=p==null||isNaN(p)?3:p,!a)throw new Error("<geojson> is required");if(typeof h!="number")throw new Error("<precision> must be a number");if(typeof p!="number")throw new Error("<coordinates> must be a number");(m===!1||m===void 0)&&(a=JSON.parse(JSON.stringify(a)));var C=Math.pow(10,h);return ic(a,function(x){Nu(x,C,p)}),a}function Nu(a,l,h){a.length>h&&a.splice(h,a.length);for(var p=0;p<a.length;p++)a[p]=Math.round(a[p]*l)/l;return a}var Uh=gs;function Ou(a,l,h){if(h===void 0&&(h={}),h.final===!0)return Ru(a,l);var p=hi(a),m=hi(l),C=ci(p[0]),x=ci(m[0]),b=ci(p[1]),M=ci(m[1]),A=Math.sin(x-C)*Math.cos(M),q=Math.cos(b)*Math.sin(M)-Math.sin(b)*Math.cos(M)*Math.cos(x-C);return kr(Math.atan2(A,q))}function Ru(a,l){var h=Ou(l,a);return h=(h+180)%360,h}function Bu(a,l,h,p){p===void 0&&(p={});var m=hi(a),C=ci(m[0]),x=ci(m[1]),b=ci(h),M=Na(l,p.units),A=Math.asin(Math.sin(x)*Math.cos(M)+Math.cos(x)*Math.sin(M)*Math.cos(b)),q=C+Math.atan2(Math.sin(b)*Math.sin(M)*Math.cos(x),Math.cos(M)-Math.sin(x)*Math.sin(A)),U=kr(q),ct=kr(A);return Lo([U,ct],p.properties)}function Fu(a,l,h){h===void 0&&(h={});var p=Lo([1/0,1/0],{dist:1/0}),m=0;return Li(a,function(C){for(var x=Vi(C),b=0;b<x.length-1;b++){var M=Lo(x[b]);M.properties.dist=xo(l,M,h);var A=Lo(x[b+1]);A.properties.dist=xo(l,A,h);var q=xo(M,A,h),U=Math.max(M.properties.dist,A.properties.dist),ct=Ou(M,A),ft=Bu(l,U,ct+90,h),Tt=Bu(l,U,ct-90,h),Vt=ji(Gs([ft.geometry.coordinates,Tt.geometry.coordinates]),Gs([M.geometry.coordinates,A.geometry.coordinates])),Yt=null;Vt.features.length>0&&(Yt=Vt.features[0],Yt.properties.dist=xo(l,Yt,h),Yt.properties.location=m+xo(M,Yt,h)),M.properties.dist<p.properties.dist&&(p=M,p.properties.index=b,p.properties.location=m),A.properties.dist<p.properties.dist&&(p=A,p.properties.index=b+1,p.properties.location=m+q),Yt&&Yt.properties.dist<p.properties.dist&&(p=Yt,p.properties.index=b),m+=q}}),p}var Wo=Fu;function zu(a,l){if(!a)throw new Error("line is required");if(!l)throw new Error("splitter is required");var h=rc(a),p=rc(l);if(h!=="LineString")throw new Error("line must be LineString");if(p==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(p==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var m=Uh(l,{precision:7});switch(p){case"Point":return Uu(a,m);case"MultiPoint":return Gu(a,m);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Gu(a,ji(a,m))}}function Gu(a,l){var h=[],p=(0,Gh.default)();return Li(l,function(m){if(h.forEach(function(b,M){b.id=M}),!h.length)h=Uu(a,m).features,h.forEach(function(b){b.bbox||(b.bbox=fd(Ra(b)))}),p.load(Ar(h));else{var C=p.search(m);if(C.features.length){var x=Vh(m,C);h=h.filter(function(b){return b.id!==x.id}),p.remove(x),xr(Uu(x,m),function(b){h.push(b),p.insert(b)})}}}),Ar(h)}function Uu(a,l){var h=[],p=Vi(a)[0],m=Vi(a)[a.geometry.coordinates.length-1];if(Yo(p,hi(l))||Yo(m,hi(l)))return Ar([a]);var C=(0,Gh.default)(),x=ku(a);C.load(x);var b=C.search(l);if(!b.features.length)return Ar([a]);var M=Vh(l,b),A=[p],q=Ko(x,function(U,ct,ft){var Tt=Vi(ct)[1],Vt=hi(l);return ft===M.id?(U.push(Vt),h.push(Gs(U)),Yo(Vt,Tt)?[Vt]:[Vt,Tt]):(U.push(Tt),U)},A);return q.length>1&&h.push(Gs(q)),Ar(h)}function Vh(a,l){if(!l.features.length)throw new Error("lines must contain features");if(l.features.length===1)return l.features[0];var h,p=1/0;return xr(l,function(m){var C=Wo(m,a),x=C.properties.dist;x<p&&(h=m,p=x)}),h}function Yo(a,l){return a[0]===l[0]&&a[1]===l[1]}var pd=zu;function Ba(a,l,h){if(h===void 0&&(h={}),!a)throw new Error("point is required");if(!l)throw new Error("polygon is required");var p=hi(a),m=Au(l),C=m.type,x=l.bbox,b=m.coordinates;if(x&&qh(p,x)===!1)return!1;C==="Polygon"&&(b=[b]);for(var M=!1,A=0;A<b.length&&!M;A++)if(jh(p,b[A][0],h.ignoreBoundary)){for(var q=!1,U=1;U<b[A].length&&!q;)jh(p,b[A][U],!h.ignoreBoundary)&&(q=!0),U++;q||(M=!0)}return M}function jh(a,l,h){var p=!1;l[0][0]===l[l.length-1][0]&&l[0][1]===l[l.length-1][1]&&(l=l.slice(0,l.length-1));for(var m=0,C=l.length-1;m<l.length;C=m++){var x=l[m][0],b=l[m][1],M=l[C][0],A=l[C][1],q=a[1]*(x-M)+b*(M-a[0])+A*(a[0]-x)===0&&(x-a[0])*(M-a[0])<=0&&(b-a[1])*(A-a[1])<=0;if(q)return!h;var U=b>a[1]!=A>a[1]&&a[0]<(M-x)*(a[1]-b)/(A-b)+x;U&&(p=!p)}return p}function qh(a,l){return l[0]<=a[0]&&l[1]<=a[1]&&l[2]>=a[0]&&l[3]>=a[1]}function dd(a,l,h){h===void 0&&(h={});for(var p=hi(a),m=Vi(l),C=0;C<m.length-1;C++){var x=!1;if(h.ignoreEndVertices&&(C===0&&(x="start"),C===m.length-2&&(x="end"),C===0&&C+1===m.length-1&&(x="both")),qi(m[C],m[C+1],p,x,typeof h.epsilon>"u"?null:h.epsilon))return!0}return!1}function qi(a,l,h,p,m){var C=h[0],x=h[1],b=a[0],M=a[1],A=l[0],q=l[1],U=h[0]-b,ct=h[1]-M,ft=A-b,Tt=q-M,Vt=U*Tt-ct*ft;if(m!==null){if(Math.abs(Vt)>m)return!1}else if(Vt!==0)return!1;if(p){if(p==="start")return Math.abs(ft)>=Math.abs(Tt)?ft>0?b<C&&C<=A:A<=C&&C<b:Tt>0?M<x&&x<=q:q<=x&&x<M;if(p==="end")return Math.abs(ft)>=Math.abs(Tt)?ft>0?b<=C&&C<A:A<C&&C<=b:Tt>0?M<=x&&x<q:q<x&&x<=M;if(p==="both")return Math.abs(ft)>=Math.abs(Tt)?ft>0?b<C&&C<A:A<C&&C<b:Tt>0?M<x&&x<q:q<x&&x<M}else return Math.abs(ft)>=Math.abs(Tt)?ft>0?b<=C&&C<=A:A<=C&&C<=b:Tt>0?M<=x&&x<=q:q<=x&&x<=M;return!1}var Vs=dd;function gd(a,l){var h=Au(a),p=Au(l),m=h.type,C=p.type,x=h.coordinates,b=p.coordinates;switch(m){case"Point":switch(C){case"Point":return ju(x,b);default:throw new Error("feature2 "+C+" geometry not supported")}case"MultiPoint":switch(C){case"Point":return Vu(h,p);case"MultiPoint":return md(h,p);default:throw new Error("feature2 "+C+" geometry not supported")}case"LineString":switch(C){case"Point":return Vs(p,h,{ignoreEndVertices:!0});case"LineString":return Fa(h,p);case"MultiPoint":return Hh(h,p);default:throw new Error("feature2 "+C+" geometry not supported")}case"Polygon":switch(C){case"Point":return Ba(p,h,{ignoreBoundary:!0});case"LineString":return yd(h,p);case"Polygon":return Jo(h,p);case"MultiPoint":return _d(h,p);default:throw new Error("feature2 "+C+" geometry not supported")}default:throw new Error("feature1 "+m+" geometry not supported")}}function Vu(a,l){var h,p=!1;for(h=0;h<a.coordinates.length;h++)if(ju(a.coordinates[h],l.coordinates)){p=!0;break}return p}function md(a,l){for(var h=0,p=l.coordinates;h<p.length;h++){for(var m=p[h],C=!1,x=0,b=a.coordinates;x<b.length;x++){var M=b[x];if(ju(m,M)){C=!0;break}}if(!C)return!1}return!0}function Hh(a,l){for(var h=!1,p=0,m=l.coordinates;p<m.length;p++){var C=m[p];if(Vs(C,a,{ignoreEndVertices:!0})&&(h=!0),!Vs(C,a))return!1}return!!h}function _d(a,l){for(var h=0,p=l.coordinates;h<p.length;h++){var m=p[h];if(!Ba(m,a,{ignoreBoundary:!0}))return!1}return!0}function Fa(a,l){for(var h=!1,p=0,m=l.coordinates;p<m.length;p++){var C=m[p];if(Vs({type:"Point",coordinates:C},a,{ignoreEndVertices:!0})&&(h=!0),!Vs({type:"Point",coordinates:C},a,{ignoreEndVertices:!1}))return!1}return h}function yd(a,l){var h=!1,p=0,m=Ra(a),C=Ra(l);if(!oc(m,C))return!1;for(p;p<l.coordinates.length-1;p++){var x=vd(l.coordinates[p],l.coordinates[p+1]);if(Ba({type:"Point",coordinates:x},a,{ignoreBoundary:!0})){h=!0;break}}return h}function Jo(a,l){if(a.type==="Feature"&&a.geometry===null||l.type==="Feature"&&l.geometry===null)return!1;var h=Ra(a),p=Ra(l);if(!oc(h,p))return!1;for(var m=Au(l).coordinates,C=0,x=m;C<x.length;C++)for(var b=x[C],M=0,A=b;M<A.length;M++){var q=A[M];if(!Ba(q,a))return!1}return!0}function oc(a,l){return!(a[0]>l[0]||a[2]<l[2]||a[1]>l[1]||a[3]<l[3])}function ju(a,l){return a[0]===l[0]&&a[1]===l[1]}function vd(a,l){return[(a[0]+l[0])/2,(a[1]+l[1])/2]}var ms=d(Bs()),ac=a=>()=>a,qu=a=>{let l=a?(h,p)=>p.minus(h).abs().isLessThanOrEqualTo(a):ac(!1);return(h,p)=>l(h,p)?0:h.comparedTo(p)};function za(a){let l=a?(h,p,m,C,x)=>h.exponentiatedBy(2).isLessThanOrEqualTo(C.minus(p).exponentiatedBy(2).plus(x.minus(m).exponentiatedBy(2)).times(a)):ac(!1);return(h,p,m)=>{let C=h.x,x=h.y,b=m.x,M=m.y,A=x.minus(M).times(p.x.minus(b)).minus(C.minus(b).times(p.y.minus(M)));return l(A,C,x,b,M)?0:A.comparedTo(0)}}var Cd=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,$o=Math.ceil,cr=Math.floor,br="[BigNumber Error] ",uc=br+"Number primitive has more than 15 significant digits: ",xi=1e14,ye=14,lc=9007199254740991,Hu=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],_s=1e7,Dr=1e9;function Zh(a){var l,h,p,m=j.prototype={constructor:j,toString:null,valueOf:null},C=new j(1),x=20,b=4,M=-7,A=21,q=-1e7,U=1e7,ct=!1,ft=1,Tt=0,Vt={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},Yt="0123456789abcdefghijklmnopqrstuvwxyz",Ve=!0;function j(P,D){var O,N,R,B,X,K,tt,ut,at=this;if(!(at instanceof j))return new j(P,D);if(D==null){if(P&&P._isBigNumber===!0){at.s=P.s,!P.c||P.e>U?at.c=at.e=null:P.e<q?at.c=[at.e=0]:(at.e=P.e,at.c=P.c.slice());return}if((K=typeof P=="number")&&P*0==0){if(at.s=1/P<0?(P=-P,-1):1,P===~~P){for(B=0,X=P;X>=10;X/=10,B++);B>U?at.c=at.e=null:(at.e=B,at.c=[P]);return}ut=String(P)}else{if(!Cd.test(ut=String(P)))return p(at,ut,K);at.s=ut.charCodeAt(0)==45?(ut=ut.slice(1),-1):1}(B=ut.indexOf("."))>-1&&(ut=ut.replace(".","")),(X=ut.search(/e/i))>0?(B<0&&(B=X),B+=+ut.slice(X+1),ut=ut.substring(0,X)):B<0&&(B=ut.length)}else{if(s(D,2,Yt.length,"Base"),D==10&&Ve)return at=new j(P),st(at,x+at.e+1,b);if(ut=String(P),K=typeof P=="number"){if(P*0!=0)return p(at,ut,K,D);if(at.s=1/P<0?(ut=ut.slice(1),-1):1,j.DEBUG&&ut.replace(/^0\.0*|\./,"").length>15)throw Error(uc+P)}else at.s=ut.charCodeAt(0)===45?(ut=ut.slice(1),-1):1;for(O=Yt.slice(0,D),B=X=0,tt=ut.length;X<tt;X++)if(O.indexOf(N=ut.charAt(X))<0){if(N=="."){if(X>B){B=tt;continue}}else if(!R&&(ut==ut.toUpperCase()&&(ut=ut.toLowerCase())||ut==ut.toLowerCase()&&(ut=ut.toUpperCase()))){R=!0,X=-1,B=0;continue}return p(at,String(P),K,D)}K=!1,ut=h(ut,D,10,at.s),(B=ut.indexOf("."))>-1?ut=ut.replace(".",""):B=ut.length}for(X=0;ut.charCodeAt(X)===48;X++);for(tt=ut.length;ut.charCodeAt(--tt)===48;);if(ut=ut.slice(X,++tt)){if(tt-=X,K&&j.DEBUG&&tt>15&&(P>lc||P!==cr(P)))throw Error(uc+at.s*P);if((B=B-X-1)>U)at.c=at.e=null;else if(B<q)at.c=[at.e=0];else{if(at.e=B,at.c=[],X=(B+1)%ye,B<0&&(X+=ye),X<tt){for(X&&at.c.push(+ut.slice(0,X)),tt-=ye;X<tt;)at.c.push(+ut.slice(X,X+=ye));X=ye-(ut=ut.slice(X)).length}else X-=tt;for(;X--;ut+="0");at.c.push(+ut)}}else at.c=[at.e=0]}j.clone=Zh,j.ROUND_UP=0,j.ROUND_DOWN=1,j.ROUND_CEIL=2,j.ROUND_FLOOR=3,j.ROUND_HALF_UP=4,j.ROUND_HALF_DOWN=5,j.ROUND_HALF_EVEN=6,j.ROUND_HALF_CEIL=7,j.ROUND_HALF_FLOOR=8,j.EUCLID=9,j.config=j.set=function(P){var D,O;if(P!=null)if(typeof P=="object"){if(P.hasOwnProperty(D="DECIMAL_PLACES")&&(O=P[D],s(O,0,Dr,D),x=O),P.hasOwnProperty(D="ROUNDING_MODE")&&(O=P[D],s(O,0,8,D),b=O),P.hasOwnProperty(D="EXPONENTIAL_AT")&&(O=P[D],O&&O.pop?(s(O[0],-1e9,0,D),s(O[1],0,Dr,D),M=O[0],A=O[1]):(s(O,-1e9,Dr,D),M=-(A=O<0?-O:O))),P.hasOwnProperty(D="RANGE"))if(O=P[D],O&&O.pop)s(O[0],-1e9,-1,D),s(O[1],1,Dr,D),q=O[0],U=O[1];else if(s(O,-1e9,Dr,D),O)q=-(U=O<0?-O:O);else throw Error(br+D+" cannot be zero: "+O);if(P.hasOwnProperty(D="CRYPTO"))if(O=P[D],O===!!O)if(O)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))ct=O;else throw ct=!O,Error(br+"crypto unavailable");else ct=O;else throw Error(br+D+" not true or false: "+O);if(P.hasOwnProperty(D="MODULO_MODE")&&(O=P[D],s(O,0,9,D),ft=O),P.hasOwnProperty(D="POW_PRECISION")&&(O=P[D],s(O,0,Dr,D),Tt=O),P.hasOwnProperty(D="FORMAT"))if(O=P[D],typeof O=="object")Vt=O;else throw Error(br+D+" not an object: "+O);if(P.hasOwnProperty(D="ALPHABET"))if(O=P[D],typeof O=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(O))Ve=O.slice(0,10)=="0123456789",Yt=O;else throw Error(br+D+" invalid: "+O)}else throw Error(br+"Object expected: "+P);return{DECIMAL_PLACES:x,ROUNDING_MODE:b,EXPONENTIAL_AT:[M,A],RANGE:[q,U],CRYPTO:ct,MODULO_MODE:ft,POW_PRECISION:Tt,FORMAT:Vt,ALPHABET:Yt}},j.isBigNumber=function(P){if(!P||P._isBigNumber!==!0)return!1;if(!j.DEBUG)return!0;var D,O,N=P.c,R=P.e,B=P.s;t:if({}.toString.call(N)=="[object Array]"){if((B===1||B===-1)&&R>=-1e9&&R<=Dr&&R===cr(R)){if(N[0]===0){if(R===0&&N.length===1)return!0;break t}if(D=(R+1)%ye,D<1&&(D+=ye),String(N[0]).length==D){for(D=0;D<N.length;D++)if(O=N[D],O<0||O>=xi||O!==cr(O))break t;if(O!==0)return!0}}}else if(N===null&&R===null&&(B===null||B===1||B===-1))return!0;throw Error(br+"Invalid BigNumber: "+P)},j.maximum=j.max=function(){return nt(arguments,-1)},j.minimum=j.min=function(){return nt(arguments,1)},j.random=function(){var P=9007199254740992,D=Math.random()*P&2097151?function(){return cr(Math.random()*P)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(O){var N,R,B,X,K,tt=0,ut=[],at=new j(C);if(O==null?O=x:s(O,0,Dr),X=$o(O/ye),ct)if(crypto.getRandomValues){for(N=crypto.getRandomValues(new Uint32Array(X*=2));tt<X;)K=N[tt]*131072+(N[tt+1]>>>11),K>=9e15?(R=crypto.getRandomValues(new Uint32Array(2)),N[tt]=R[0],N[tt+1]=R[1]):(ut.push(K%1e14),tt+=2);tt=X/2}else if(crypto.randomBytes){for(N=crypto.randomBytes(X*=7);tt<X;)K=(N[tt]&31)*281474976710656+N[tt+1]*1099511627776+N[tt+2]*4294967296+N[tt+3]*16777216+(N[tt+4]<<16)+(N[tt+5]<<8)+N[tt+6],K>=9e15?crypto.randomBytes(7).copy(N,tt):(ut.push(K%1e14),tt+=7);tt=X/7}else throw ct=!1,Error(br+"crypto unavailable");if(!ct)for(;tt<X;)K=D(),K<9e15&&(ut[tt++]=K%1e14);for(X=ut[--tt],O%=ye,X&&O&&(K=Hu[ye-O],ut[tt]=cr(X/K)*K);ut[tt]===0;ut.pop(),tt--);if(tt<0)ut=[B=0];else{for(B=-1;ut[0]===0;ut.splice(0,1),B-=ye);for(tt=1,K=ut[0];K>=10;K/=10,tt++);tt<ye&&(B-=ye-tt)}return at.e=B,at.c=ut,at}}(),j.sum=function(){for(var P=1,D=arguments,O=new j(D[0]);P<D.length;)O=O.plus(D[P++]);return O},h=function(){var P="0123456789";function D(O,N,R,B){for(var X,K=[0],tt,ut=0,at=O.length;ut<at;){for(tt=K.length;tt--;K[tt]*=N);for(K[0]+=B.indexOf(O.charAt(ut++)),X=0;X<K.length;X++)K[X]>R-1&&(K[X+1]==null&&(K[X+1]=0),K[X+1]+=K[X]/R|0,K[X]%=R)}return K.reverse()}return function(O,N,R,B,X){var K,tt,ut,at,St,Xt,Qt,ae,en=O.indexOf("."),un=x,Ke=b;for(en>=0&&(at=Tt,Tt=0,O=O.replace(".",""),ae=new j(N),Xt=ae.pow(O.length-en),Tt=at,ae.c=D(v(Yr(Xt.c),Xt.e,"0"),10,R,P),ae.e=ae.c.length),Qt=D(O,N,R,X?(K=Yt,P):(K=P,Yt)),ut=at=Qt.length;Qt[--at]==0;Qt.pop());if(!Qt[0])return K.charAt(0);if(en<0?--ut:(Xt.c=Qt,Xt.e=ut,Xt.s=B,Xt=l(Xt,ae,un,Ke,R),Qt=Xt.c,St=Xt.r,ut=Xt.e),tt=ut+un+1,en=Qt[tt],at=R/2,St=St||tt<0||Qt[tt+1]!=null,St=Ke<4?(en!=null||St)&&(Ke==0||Ke==(Xt.s<0?3:2)):en>at||en==at&&(Ke==4||St||Ke==6&&Qt[tt-1]&1||Ke==(Xt.s<0?8:7)),tt<1||!Qt[0])O=St?v(K.charAt(1),-un,K.charAt(0)):K.charAt(0);else{if(Qt.length=tt,St)for(--R;++Qt[--tt]>R;)Qt[tt]=0,tt||(++ut,Qt=[1].concat(Qt));for(at=Qt.length;!Qt[--at];);for(en=0,O="";en<=at;O+=K.charAt(Qt[en++]));O=v(O,ut,K.charAt(0))}return O}}(),l=function(){function P(N,R,B){var X,K,tt,ut,at=0,St=N.length,Xt=R%_s,Qt=R/_s|0;for(N=N.slice();St--;)tt=N[St]%_s,ut=N[St]/_s|0,X=Qt*tt+ut*Xt,K=Xt*tt+X%_s*_s+at,at=(K/B|0)+(X/_s|0)+Qt*ut,N[St]=K%B;return at&&(N=[at].concat(N)),N}function D(N,R,B,X){var K,tt;if(B!=X)tt=B>X?1:-1;else for(K=tt=0;K<B;K++)if(N[K]!=R[K]){tt=N[K]>R[K]?1:-1;break}return tt}function O(N,R,B,X){for(var K=0;B--;)N[B]-=K,K=N[B]<R[B]?1:0,N[B]=K*X+N[B]-R[B];for(;!N[0]&&N.length>1;N.splice(0,1));}return function(N,R,B,X,K){var tt,ut,at,St,Xt,Qt,ae,en,un,Ke,ln,Or,Qh,Sd,Md,js,pc,Ki=N.s==R.s?1:-1,Jr=N.c,Fn=R.c;if(!Jr||!Jr[0]||!Fn||!Fn[0])return new j(!N.s||!R.s||(Jr?Fn&&Jr[0]==Fn[0]:!Fn)?NaN:Jr&&Jr[0]==0||!Fn?Ki*0:Ki/0);for(en=new j(Ki),un=en.c=[],ut=N.e-R.e,Ki=B+ut+1,K||(K=xi,ut=Wr(N.e/ye)-Wr(R.e/ye),Ki=Ki/ye|0),at=0;Fn[at]==(Jr[at]||0);at++);if(Fn[at]>(Jr[at]||0)&&ut--,Ki<0)un.push(1),St=!0;else{for(Sd=Jr.length,js=Fn.length,at=0,Ki+=2,Xt=cr(K/(Fn[0]+1)),Xt>1&&(Fn=P(Fn,Xt,K),Jr=P(Jr,Xt,K),js=Fn.length,Sd=Jr.length),Qh=js,Ke=Jr.slice(0,js),ln=Ke.length;ln<js;Ke[ln++]=0);pc=Fn.slice(),pc=[0].concat(pc),Md=Fn[0],Fn[1]>=K/2&&Md++;do{if(Xt=0,tt=D(Fn,Ke,js,ln),tt<0){if(Or=Ke[0],js!=ln&&(Or=Or*K+(Ke[1]||0)),Xt=cr(Or/Md),Xt>1)for(Xt>=K&&(Xt=K-1),Qt=P(Fn,Xt,K),ae=Qt.length,ln=Ke.length;D(Qt,Ke,ae,ln)==1;)Xt--,O(Qt,js<ae?pc:Fn,ae,K),ae=Qt.length,tt=1;else Xt==0&&(tt=Xt=1),Qt=Fn.slice(),ae=Qt.length;if(ae<ln&&(Qt=[0].concat(Qt)),O(Ke,Qt,ln,K),ln=Ke.length,tt==-1)for(;D(Fn,Ke,js,ln)<1;)Xt++,O(Ke,js<ln?pc:Fn,ln,K),ln=Ke.length}else tt===0&&(Xt++,Ke=[0]);un[at++]=Xt,Ke[0]?Ke[ln++]=Jr[Qh]||0:(Ke=[Jr[Qh]],ln=1)}while((Qh++<Sd||Ke[0]!=null)&&Ki--);St=Ke[0]!=null,un[0]||un.splice(0,1)}if(K==xi){for(at=1,Ki=un[0];Ki>=10;Ki/=10,at++);st(en,B+(en.e=at+ut*ye-1)+1,X,St)}else en.e=ut,en.r=+St;return en}}();function Z(P,D,O,N){var R,B,X,K,tt;if(O==null?O=b:s(O,0,8),!P.c)return P.toString();if(R=P.c[0],X=P.e,D==null)tt=Yr(P.c),tt=N==1||N==2&&(X<=M||X>=A)?g(tt,X):v(tt,X,"0");else if(P=st(new j(P),D,O),B=P.e,tt=Yr(P.c),K=tt.length,N==1||N==2&&(D<=B||B<=M)){for(;K<D;tt+="0",K++);tt=g(tt,B)}else if(D-=X,tt=v(tt,B,"0"),B+1>K){if(--D>0)for(tt+=".";D--;tt+="0");}else if(D+=B-K,D>0)for(B+1==K&&(tt+=".");D--;tt+="0");return P.s<0&&R?"-"+tt:tt}function nt(P,D){for(var O,N,R=1,B=new j(P[0]);R<P.length;R++)N=new j(P[R]),(!N.s||(O=bo(B,N))===D||O===0&&B.s===D)&&(B=N);return B}function pt(P,D,O){for(var N=1,R=D.length;!D[--R];D.pop());for(R=D[0];R>=10;R/=10,N++);return(O=N+O*ye-1)>U?P.c=P.e=null:O<q?P.c=[P.e=0]:(P.e=O,P.c=D),P}p=function(){var P=/^(-?)0([xbo])(?=\w[\w.]*$)/i,D=/^([^.]+)\.$/,O=/^\.([^.]+)$/,N=/^-?(Infinity|NaN)$/,R=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(B,X,K,tt){var ut,at=K?X:X.replace(R,"");if(N.test(at))B.s=isNaN(at)?null:at<0?-1:1;else{if(!K&&(at=at.replace(P,function(St,Xt,Qt){return ut=(Qt=Qt.toLowerCase())=="x"?16:Qt=="b"?2:8,!tt||tt==ut?Xt:St}),tt&&(ut=tt,at=at.replace(D,"$1").replace(O,"0.$1")),X!=at))return new j(at,ut);if(j.DEBUG)throw Error(br+"Not a"+(tt?" base "+tt:"")+" number: "+X);B.s=null}B.c=B.e=null}}();function st(P,D,O,N){var R,B,X,K,tt,ut,at,St=P.c,Xt=Hu;if(St){t:{for(R=1,K=St[0];K>=10;K/=10,R++);if(B=D-R,B<0)B+=ye,X=D,tt=St[ut=0],at=cr(tt/Xt[R-X-1]%10);else if(ut=$o((B+1)/ye),ut>=St.length)if(N){for(;St.length<=ut;St.push(0));tt=at=0,R=1,B%=ye,X=B-ye+1}else break t;else{for(tt=K=St[ut],R=1;K>=10;K/=10,R++);B%=ye,X=B-ye+R,at=X<0?0:cr(tt/Xt[R-X-1]%10)}if(N=N||D<0||St[ut+1]!=null||(X<0?tt:tt%Xt[R-X-1]),N=O<4?(at||N)&&(O==0||O==(P.s<0?3:2)):at>5||at==5&&(O==4||N||O==6&&(B>0?X>0?tt/Xt[R-X]:0:St[ut-1])%10&1||O==(P.s<0?8:7)),D<1||!St[0])return St.length=0,N?(D-=P.e+1,St[0]=Xt[(ye-D%ye)%ye],P.e=-D||0):St[0]=P.e=0,P;if(B==0?(St.length=ut,K=1,ut--):(St.length=ut+1,K=Xt[ye-B],St[ut]=X>0?cr(tt/Xt[R-X]%Xt[X])*K:0),N)for(;;)if(ut==0){for(B=1,X=St[0];X>=10;X/=10,B++);for(X=St[0]+=K,K=1;X>=10;X/=10,K++);B!=K&&(P.e++,St[0]==xi&&(St[0]=1));break}else{if(St[ut]+=K,St[ut]!=xi)break;St[ut--]=0,K=1}for(B=St.length;St[--B]===0;St.pop());}P.e>U?P.c=P.e=null:P.e<q&&(P.c=[P.e=0])}return P}function ht(P){var D,O=P.e;return O===null?P.toString():(D=Yr(P.c),D=O<=M||O>=A?g(D,O):v(D,O,"0"),P.s<0?"-"+D:D)}return m.absoluteValue=m.abs=function(){var P=new j(this);return P.s<0&&(P.s=1),P},m.comparedTo=function(P,D){return bo(this,new j(P,D))},m.decimalPlaces=m.dp=function(P,D){var O,N,R,B=this;if(P!=null)return s(P,0,Dr),D==null?D=b:s(D,0,8),st(new j(B),P+B.e+1,D);if(!(O=B.c))return null;if(N=((R=O.length-1)-Wr(this.e/ye))*ye,R=O[R])for(;R%10==0;R/=10,N--);return N<0&&(N=0),N},m.dividedBy=m.div=function(P,D){return l(this,new j(P,D),x,b)},m.dividedToIntegerBy=m.idiv=function(P,D){return l(this,new j(P,D),0,1)},m.exponentiatedBy=m.pow=function(P,D){var O,N,R,B,X,K,tt,ut,at,St=this;if(P=new j(P),P.c&&!P.isInteger())throw Error(br+"Exponent not an integer: "+ht(P));if(D!=null&&(D=new j(D)),K=P.e>14,!St.c||!St.c[0]||St.c[0]==1&&!St.e&&St.c.length==1||!P.c||!P.c[0])return at=new j(Math.pow(+ht(St),K?P.s*(2-c(P)):+ht(P))),D?at.mod(D):at;if(tt=P.s<0,D){if(D.c?!D.c[0]:!D.s)return new j(NaN);N=!tt&&St.isInteger()&&D.isInteger(),N&&(St=St.mod(D))}else{if(P.e>9&&(St.e>0||St.e<-1||(St.e==0?St.c[0]>1||K&&St.c[1]>=24e7:St.c[0]<8e13||K&&St.c[0]<=9999975e7)))return B=St.s<0&&c(P)?-0:0,St.e>-1&&(B=1/B),new j(tt?1/B:B);Tt&&(B=$o(Tt/ye+2))}for(K?(O=new j(.5),tt&&(P.s=1),ut=c(P)):(R=Math.abs(+ht(P)),ut=R%2),at=new j(C);;){if(ut){if(at=at.times(St),!at.c)break;B?at.c.length>B&&(at.c.length=B):N&&(at=at.mod(D))}if(R){if(R=cr(R/2),R===0)break;ut=R%2}else if(P=P.times(O),st(P,P.e+1,1),P.e>14)ut=c(P);else{if(R=+ht(P),R===0)break;ut=R%2}St=St.times(St),B?St.c&&St.c.length>B&&(St.c.length=B):N&&(St=St.mod(D))}return N?at:(tt&&(at=C.div(at)),D?at.mod(D):B?st(at,Tt,b,X):at)},m.integerValue=function(P){var D=new j(this);return P==null?P=b:s(P,0,8),st(D,D.e+1,P)},m.isEqualTo=m.eq=function(P,D){return bo(this,new j(P,D))===0},m.isFinite=function(){return!!this.c},m.isGreaterThan=m.gt=function(P,D){return bo(this,new j(P,D))>0},m.isGreaterThanOrEqualTo=m.gte=function(P,D){return(D=bo(this,new j(P,D)))===1||D===0},m.isInteger=function(){return!!this.c&&Wr(this.e/ye)>this.c.length-2},m.isLessThan=m.lt=function(P,D){return bo(this,new j(P,D))<0},m.isLessThanOrEqualTo=m.lte=function(P,D){return(D=bo(this,new j(P,D)))===-1||D===0},m.isNaN=function(){return!this.s},m.isNegative=function(){return this.s<0},m.isPositive=function(){return this.s>0},m.isZero=function(){return!!this.c&&this.c[0]==0},m.minus=function(P,D){var O,N,R,B,X=this,K=X.s;if(P=new j(P,D),D=P.s,!K||!D)return new j(NaN);if(K!=D)return P.s=-D,X.plus(P);var tt=X.e/ye,ut=P.e/ye,at=X.c,St=P.c;if(!tt||!ut){if(!at||!St)return at?(P.s=-D,P):new j(St?X:NaN);if(!at[0]||!St[0])return St[0]?(P.s=-D,P):new j(at[0]?X:b==3?-0:0)}if(tt=Wr(tt),ut=Wr(ut),at=at.slice(),K=tt-ut){for((B=K<0)?(K=-K,R=at):(ut=tt,R=St),R.reverse(),D=K;D--;R.push(0));R.reverse()}else for(N=(B=(K=at.length)<(D=St.length))?K:D,K=D=0;D<N;D++)if(at[D]!=St[D]){B=at[D]<St[D];break}if(B&&(R=at,at=St,St=R,P.s=-P.s),D=(N=St.length)-(O=at.length),D>0)for(;D--;at[O++]=0);for(D=xi-1;N>K;){if(at[--N]<St[N]){for(O=N;O&&!at[--O];at[O]=D);--at[O],at[N]+=xi}at[N]-=St[N]}for(;at[0]==0;at.splice(0,1),--ut);return at[0]?pt(P,at,ut):(P.s=b==3?-1:1,P.c=[P.e=0],P)},m.modulo=m.mod=function(P,D){var O,N,R=this;return P=new j(P,D),!R.c||!P.s||P.c&&!P.c[0]?new j(NaN):!P.c||R.c&&!R.c[0]?new j(R):(ft==9?(N=P.s,P.s=1,O=l(R,P,0,3),P.s=N,O.s*=N):O=l(R,P,0,ft),P=R.minus(O.times(P)),!P.c[0]&&ft==1&&(P.s=R.s),P)},m.multipliedBy=m.times=function(P,D){var O,N,R,B,X,K,tt,ut,at,St,Xt,Qt,ae,en,un,Ke=this,ln=Ke.c,Or=(P=new j(P,D)).c;if(!ln||!Or||!ln[0]||!Or[0])return!Ke.s||!P.s||ln&&!ln[0]&&!Or||Or&&!Or[0]&&!ln?P.c=P.e=P.s=null:(P.s*=Ke.s,!ln||!Or?P.c=P.e=null:(P.c=[0],P.e=0)),P;for(N=Wr(Ke.e/ye)+Wr(P.e/ye),P.s*=Ke.s,tt=ln.length,St=Or.length,tt<St&&(ae=ln,ln=Or,Or=ae,R=tt,tt=St,St=R),R=tt+St,ae=[];R--;ae.push(0));for(en=xi,un=_s,R=St;--R>=0;){for(O=0,Xt=Or[R]%un,Qt=Or[R]/un|0,X=tt,B=R+X;B>R;)ut=ln[--X]%un,at=ln[X]/un|0,K=Qt*ut+at*Xt,ut=Xt*ut+K%un*un+ae[B]+O,O=(ut/en|0)+(K/un|0)+Qt*at,ae[B--]=ut%en;ae[B]=O}return O?++N:ae.splice(0,1),pt(P,ae,N)},m.negated=function(){var P=new j(this);return P.s=-P.s||null,P},m.plus=function(P,D){var O,N=this,R=N.s;if(P=new j(P,D),D=P.s,!R||!D)return new j(NaN);if(R!=D)return P.s=-D,N.minus(P);var B=N.e/ye,X=P.e/ye,K=N.c,tt=P.c;if(!B||!X){if(!K||!tt)return new j(R/0);if(!K[0]||!tt[0])return tt[0]?P:new j(K[0]?N:R*0)}if(B=Wr(B),X=Wr(X),K=K.slice(),R=B-X){for(R>0?(X=B,O=tt):(R=-R,O=K),O.reverse();R--;O.push(0));O.reverse()}for(R=K.length,D=tt.length,R-D<0&&(O=tt,tt=K,K=O,D=R),R=0;D;)R=(K[--D]=K[D]+tt[D]+R)/xi|0,K[D]=xi===K[D]?0:K[D]%xi;return R&&(K=[R].concat(K),++X),pt(P,K,X)},m.precision=m.sd=function(P,D){var O,N,R,B=this;if(P!=null&&P!==!!P)return s(P,1,Dr),D==null?D=b:s(D,0,8),st(new j(B),P,D);if(!(O=B.c))return null;if(R=O.length-1,N=R*ye+1,R=O[R]){for(;R%10==0;R/=10,N--);for(R=O[0];R>=10;R/=10,N++);}return P&&B.e+1>N&&(N=B.e+1),N},m.shiftedBy=function(P){return s(P,-9007199254740991,lc),this.times("1e"+P)},m.squareRoot=m.sqrt=function(){var P,D,O,N,R,B=this,X=B.c,K=B.s,tt=B.e,ut=x+4,at=new j("0.5");if(K!==1||!X||!X[0])return new j(!K||K<0&&(!X||X[0])?NaN:X?B:1/0);if(K=Math.sqrt(+ht(B)),K==0||K==1/0?(D=Yr(X),(D.length+tt)%2==0&&(D+="0"),K=Math.sqrt(+D),tt=Wr((tt+1)/2)-(tt<0||tt%2),K==1/0?D="5e"+tt:(D=K.toExponential(),D=D.slice(0,D.indexOf("e")+1)+tt),O=new j(D)):O=new j(K+""),O.c[0]){for(tt=O.e,K=tt+ut,K<3&&(K=0);;)if(R=O,O=at.times(R.plus(l(B,R,ut,1))),Yr(R.c).slice(0,K)===(D=Yr(O.c)).slice(0,K))if(O.e<tt&&--K,D=D.slice(K-3,K+1),D=="9999"||!N&&D=="4999"){if(!N&&(st(R,R.e+x+2,0),R.times(R).eq(B))){O=R;break}ut+=4,K+=4,N=1}else{(!+D||!+D.slice(1)&&D.charAt(0)=="5")&&(st(O,O.e+x+2,1),P=!O.times(O).eq(B));break}}return st(O,O.e+x+1,b,P)},m.toExponential=function(P,D){return P!=null&&(s(P,0,Dr),P++),Z(this,P,D,1)},m.toFixed=function(P,D){return P!=null&&(s(P,0,Dr),P=P+this.e+1),Z(this,P,D)},m.toFormat=function(P,D,O){var N,R=this;if(O==null)P!=null&&D&&typeof D=="object"?(O=D,D=null):P&&typeof P=="object"?(O=P,P=D=null):O=Vt;else if(typeof O!="object")throw Error(br+"Argument not an object: "+O);if(N=R.toFixed(P,D),R.c){var B,X=N.split("."),K=+O.groupSize,tt=+O.secondaryGroupSize,ut=O.groupSeparator||"",at=X[0],St=X[1],Xt=R.s<0,Qt=Xt?at.slice(1):at,ae=Qt.length;if(tt&&(B=K,K=tt,tt=B,ae-=B),K>0&&ae>0){for(B=ae%K||K,at=Qt.substr(0,B);B<ae;B+=K)at+=ut+Qt.substr(B,K);tt>0&&(at+=ut+Qt.slice(B)),Xt&&(at="-"+at)}N=St?at+(O.decimalSeparator||"")+((tt=+O.fractionGroupSize)?St.replace(new RegExp("\\d{"+tt+"}\\B","g"),"$&"+(O.fractionGroupSeparator||"")):St):at}return(O.prefix||"")+N+(O.suffix||"")},m.toFraction=function(P){var D,O,N,R,B,X,K,tt,ut,at,St,Xt,Qt=this,ae=Qt.c;if(P!=null&&(K=new j(P),!K.isInteger()&&(K.c||K.s!==1)||K.lt(C)))throw Error(br+"Argument "+(K.isInteger()?"out of range: ":"not an integer: ")+ht(K));if(!ae)return new j(Qt);for(D=new j(C),ut=O=new j(C),N=tt=new j(C),Xt=Yr(ae),B=D.e=Xt.length-Qt.e-1,D.c[0]=Hu[(X=B%ye)<0?ye+X:X],P=!P||K.comparedTo(D)>0?B>0?D:ut:K,X=U,U=1/0,K=new j(Xt),tt.c[0]=0;at=l(K,D,0,1),R=O.plus(at.times(N)),R.comparedTo(P)!=1;)O=N,N=R,ut=tt.plus(at.times(R=ut)),tt=R,D=K.minus(at.times(R=D)),K=R;return R=l(P.minus(O),N,0,1),tt=tt.plus(R.times(ut)),O=O.plus(R.times(N)),tt.s=ut.s=Qt.s,B=B*2,St=l(ut,N,B,b).minus(Qt).abs().comparedTo(l(tt,O,B,b).minus(Qt).abs())<1?[ut,N]:[tt,O],U=X,St},m.toNumber=function(){return+ht(this)},m.toPrecision=function(P,D){return P!=null&&s(P,1,Dr),Z(this,P,D,2)},m.toString=function(P){var D,O=this,N=O.s,R=O.e;return R===null?N?(D="Infinity",N<0&&(D="-"+D)):D="NaN":(P==null?D=R<=M||R>=A?g(Yr(O.c),R):v(Yr(O.c),R,"0"):P===10&&Ve?(O=st(new j(O),x+R+1,b),D=v(Yr(O.c),O.e,"0")):(s(P,2,Yt.length,"Base"),D=h(v(Yr(O.c),R,"0"),10,P,N,!0)),N<0&&O.c[0]&&(D="-"+D)),D},m.valueOf=m.toJSON=function(){return ht(this)},m._isBigNumber=!0,m[Symbol.toStringTag]="BigNumber",m[Symbol.for("nodejs.util.inspect.custom")]=m.valueOf,a!=null&&j.set(a),j}function Wr(a){var l=a|0;return a>0||a===l?l:l-1}function Yr(a){for(var l,h,p=1,m=a.length,C=a[0]+"";p<m;){for(l=a[p++]+"",h=ye-l.length;h--;l="0"+l);C+=l}for(m=C.length;C.charCodeAt(--m)===48;);return C.slice(0,m+1||1)}function bo(a,l){var h,p,m=a.c,C=l.c,x=a.s,b=l.s,M=a.e,A=l.e;if(!x||!b)return null;if(h=m&&!m[0],p=C&&!C[0],h||p)return h?p?0:-b:x;if(x!=b)return x;if(h=x<0,p=M==A,!m||!C)return p?0:!m^h?1:-1;if(!p)return M>A^h?1:-1;for(b=(M=m.length)<(A=C.length)?M:A,x=0;x<b;x++)if(m[x]!=C[x])return m[x]>C[x]^h?1:-1;return M==A?0:M>A^h?1:-1}function s(a,l,h,p){if(a<l||a>h||a!==cr(a))throw Error(br+(p||"Argument")+(typeof a=="number"?a<l||a>h?" out of range: ":" not an integer: ":" not a primitive number: ")+String(a))}function c(a){var l=a.c.length-1;return Wr(a.e/ye)==l&&a.c[l]%2!=0}function g(a,l){return(a.length>1?a.charAt(0)+"."+a.slice(1):a)+(l<0?"e":"e+")+l}function v(a,l,h){var p,m;if(l<0){for(m=h+".";++l;m+=h);a=m+a}else if(p=a.length,++l>p){for(m=h,l-=p;--l;m+=h);a+=m}else l<p&&(a=a.slice(0,l)+"."+a.slice(l));return a}var w=Zh(),k=w,H=class{constructor(a){oe(this,"key");oe(this,"left",null);oe(this,"right",null);this.key=a}},ot=class extends H{constructor(a){super(a)}},mt=class{constructor(){oe(this,"size",0);oe(this,"modificationCount",0);oe(this,"splayCount",0)}splay(a){let l=this.root;if(l==null)return this.compare(a,a),-1;let h=null,p=null,m=null,C=null,x=l,b=this.compare,M;for(;;)if(M=b(x.key,a),M>0){let A=x.left;if(A==null||(M=b(A.key,a),M>0&&(x.left=A.right,A.right=x,x=A,A=x.left,A==null)))break;h==null?p=x:h.left=x,h=x,x=A}else if(M<0){let A=x.right;if(A==null||(M=b(A.key,a),M<0&&(x.right=A.left,A.left=x,x=A,A=x.right,A==null)))break;m==null?C=x:m.right=x,m=x,x=A}else break;return m!=null&&(m.right=x.left,x.left=C),h!=null&&(h.left=x.right,x.right=p),this.root!==x&&(this.root=x,this.splayCount++),M}splayMin(a){let l=a,h=l.left;for(;h!=null;){let p=h;l.left=p.right,p.right=l,l=p,h=l.left}return l}splayMax(a){let l=a,h=l.right;for(;h!=null;){let p=h;l.right=p.left,p.left=l,l=p,h=l.right}return l}_delete(a){if(this.root==null||this.splay(a)!=0)return null;let l=this.root,h=l,p=l.left;if(this.size--,p==null)this.root=l.right;else{let m=l.right;l=this.splayMax(p),l.right=m,this.root=l}return this.modificationCount++,h}addNewRoot(a,l){this.size++,this.modificationCount++;let h=this.root;if(h==null){this.root=a;return}l<0?(a.left=h,a.right=h.right,h.right=null):(a.right=h,a.left=h.left,h.left=null),this.root=a}_first(){let a=this.root;return a==null?null:(this.root=this.splayMin(a),this.root)}_last(){let a=this.root;return a==null?null:(this.root=this.splayMax(a),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(a){return this.validKey(a)&&this.splay(a)==0}defaultCompare(){return(a,l)=>a<l?-1:a>l?1:0}wrap(){return{getRoot:()=>this.root,setRoot:a=>{this.root=a},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:a=>{this.splayCount=a},splay:a=>this.splay(a),has:a=>this.has(a)}}},Mt=class Lc extends mt{constructor(h,p){super();oe(this,"root",null);oe(this,"compare");oe(this,"validKey");oe(this,xm,"[object Set]");this.compare=h??this.defaultCompare(),this.validKey=p??(m=>m!=null&&m!=null)}delete(h){return this.validKey(h)?this._delete(h)!=null:!1}deleteAll(h){for(let p of h)this.delete(p)}forEach(h){let p=this[Symbol.iterator](),m;for(;m=p.next(),!m.done;)h(m.value,m.value,this)}add(h){let p=this.splay(h);return p!=0&&this.addNewRoot(new ot(h),p),this}addAndReturn(h){let p=this.splay(h);return p!=0&&this.addNewRoot(new ot(h),p),this.root.key}addAll(h){for(let p of h)this.add(p)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(h){if(h==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(h)<0)return this.root.key;let p=this.root.left;if(p==null)return null;let m=p.right;for(;m!=null;)p=m,m=p.right;return p.key}firstAfter(h){if(h==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(h)>0)return this.root.key;let p=this.root.right;if(p==null)return null;let m=p.left;for(;m!=null;)p=m,m=p.left;return p.key}retainAll(h){let p=new Lc(this.compare,this.validKey),m=this.modificationCount;for(let C of h){if(m!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(C)&&this.splay(C)==0&&p.add(this.root.key)}p.size!=this.size&&(this.root=p.root,this.size=p.size,this.modificationCount++)}lookup(h){return!this.validKey(h)||this.splay(h)!=0?null:this.root.key}intersection(h){let p=new Lc(this.compare,this.validKey);for(let m of this)h.has(m)&&p.add(m);return p}difference(h){let p=new Lc(this.compare,this.validKey);for(let m of this)h.has(m)||p.add(m);return p}union(h){let p=this.clone();return p.addAll(h),p}clone(){let h=new Lc(this.compare,this.validKey);return h.size=this.size,h.root=this.copyNode(this.root),h}copyNode(h){if(h==null)return null;function p(C,x){let b,M;do{if(b=C.left,M=C.right,b!=null){let A=new ot(b.key);x.left=A,p(b,A)}if(M!=null){let A=new ot(M.key);x.right=A,C=M,x=A}}while(M!=null)}let m=new ot(h.key);return p(h,m),m}toSet(){return this.clone()}entries(){return new De(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(bm=Symbol.iterator,xm=Symbol.toStringTag,bm)](){return new fe(this.wrap())}},qt=class{constructor(a){oe(this,"tree");oe(this,"path",new Array);oe(this,"modificationCount",null);oe(this,"splayCount");this.tree=a,this.splayCount=a.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let a=this.path[this.path.length-1];return this.getValue(a)}rebuildPath(a){this.path.splice(0,this.path.length),this.tree.splay(a),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(a){for(;a!=null;)this.path.push(a),a=a.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let h=this.tree.getRoot();for(;h!=null;)this.path.push(h),h=h.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let a=this.path[this.path.length-1],l=a.right;if(l!=null){for(;l!=null;)this.path.push(l),l=l.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===a;)a=this.path.pop();return this.path.length>0}},fe=class extends qt{getValue(a){return a.key}},De=class extends qt{getValue(a){return[a.key,a.key]}},wr=a=>a,Hn=a=>{if(a){let l=new Mt(qu(a)),h=new Mt(qu(a)),p=(C,x)=>x.addAndReturn(C),m=C=>({x:p(C.x,l),y:p(C.y,h)});return m({x:new k(0),y:new k(0)}),m}return wr},Nr=a=>({set:l=>{bn=Nr(l)},reset:()=>Nr(a),compare:qu(a),snap:Hn(a),orient:za(a)}),bn=Nr(),Hi=(a,l)=>a.ll.x.isLessThanOrEqualTo(l.x)&&l.x.isLessThanOrEqualTo(a.ur.x)&&a.ll.y.isLessThanOrEqualTo(l.y)&&l.y.isLessThanOrEqualTo(a.ur.y),cc=(a,l)=>{if(l.ur.x.isLessThan(a.ll.x)||a.ur.x.isLessThan(l.ll.x)||l.ur.y.isLessThan(a.ll.y)||a.ur.y.isLessThan(l.ll.y))return null;let h=a.ll.x.isLessThan(l.ll.x)?l.ll.x:a.ll.x,p=a.ur.x.isLessThan(l.ur.x)?a.ur.x:l.ur.x,m=a.ll.y.isLessThan(l.ll.y)?l.ll.y:a.ll.y,C=a.ur.y.isLessThan(l.ur.y)?a.ur.y:l.ur.y;return{ll:{x:h,y:m},ur:{x:p,y:C}}},Zu=(a,l)=>a.x.times(l.y).minus(a.y.times(l.x)),Kh=(a,l)=>a.x.times(l.x).plus(a.y.times(l.y)),Ga=a=>Kh(a,a).sqrt(),Ed=(a,l,h)=>{let p={x:l.x.minus(a.x),y:l.y.minus(a.y)},m={x:h.x.minus(a.x),y:h.y.minus(a.y)};return Zu(m,p).div(Ga(m)).div(Ga(p))},Xh=(a,l,h)=>{let p={x:l.x.minus(a.x),y:l.y.minus(a.y)},m={x:h.x.minus(a.x),y:h.y.minus(a.y)};return Kh(m,p).div(Ga(m)).div(Ga(p))},Tn=(a,l,h)=>l.y.isZero()?null:{x:a.x.plus(l.x.div(l.y).times(h.minus(a.y))),y:h},Ua=(a,l,h)=>l.x.isZero()?null:{x:h,y:a.y.plus(l.y.div(l.x).times(h.minus(a.x)))},Ld=(a,l,h,p)=>{if(l.x.isZero())return Ua(h,p,a.x);if(p.x.isZero())return Ua(a,l,h.x);if(l.y.isZero())return Tn(h,p,a.y);if(p.y.isZero())return Tn(a,l,h.y);let m=Zu(l,p);if(m.isZero())return null;let C={x:h.x.minus(a.x),y:h.y.minus(a.y)},x=Zu(C,l).div(m),b=Zu(C,p).div(m),M=a.x.plus(b.times(l.x)),A=h.x.plus(x.times(p.x)),q=a.y.plus(b.times(l.y)),U=h.y.plus(x.times(p.y)),ct=M.plus(A).div(2),ft=q.plus(U).div(2);return{x:ct,y:ft}},Zi=class yv{constructor(l,h){oe(this,"point");oe(this,"isLeft");oe(this,"segment");oe(this,"otherSE");oe(this,"consumedBy");l.events===void 0?l.events=[this]:l.events.push(this),this.point=l,this.isLeft=h}static compare(l,h){let p=yv.comparePoints(l.point,h.point);return p!==0?p:(l.point!==h.point&&l.link(h),l.isLeft!==h.isLeft?l.isLeft?1:-1:Qo.compare(l.segment,h.segment))}static comparePoints(l,h){return l.x.isLessThan(h.x)?-1:l.x.isGreaterThan(h.x)?1:l.y.isLessThan(h.y)?-1:l.y.isGreaterThan(h.y)?1:0}link(l){if(l.point===this.point)throw new Error("Tried to link already linked events");let h=l.point.events;for(let p=0,m=h.length;p<m;p++){let C=h[p];this.point.events.push(C),C.point=this.point}this.checkForConsuming()}checkForConsuming(){let l=this.point.events.length;for(let h=0;h<l;h++){let p=this.point.events[h];if(p.segment.consumedBy===void 0)for(let m=h+1;m<l;m++){let C=this.point.events[m];C.consumedBy===void 0&&p.otherSE.point.events===C.otherSE.point.events&&p.segment.consume(C.segment)}}}getAvailableLinkedEvents(){let l=[];for(let h=0,p=this.point.events.length;h<p;h++){let m=this.point.events[h];m!==this&&!m.segment.ringOut&&m.segment.isInResult()&&l.push(m)}return l}getLeftmostComparator(l){let h=new Map,p=m=>{let C=m.otherSE;h.set(m,{sine:Ed(this.point,l.point,C.point),cosine:Xh(this.point,l.point,C.point)})};return(m,C)=>{h.has(m)||p(m),h.has(C)||p(C);let{sine:x,cosine:b}=h.get(m),{sine:M,cosine:A}=h.get(C);return x.isGreaterThanOrEqualTo(0)&&M.isGreaterThanOrEqualTo(0)?b.isLessThan(A)?1:b.isGreaterThan(A)?-1:0:x.isLessThan(0)&&M.isLessThan(0)?b.isLessThan(A)?-1:b.isGreaterThan(A)?1:0:M.isLessThan(x)?-1:M.isGreaterThan(x)?1:0}}},xd=0,Qo=class xf{constructor(l,h,p,m){oe(this,"id");oe(this,"leftSE");oe(this,"rightSE");oe(this,"rings");oe(this,"windings");oe(this,"ringOut");oe(this,"consumedBy");oe(this,"prev");oe(this,"_prevInResult");oe(this,"_beforeState");oe(this,"_afterState");oe(this,"_isInResult");this.id=++xd,this.leftSE=l,l.segment=this,l.otherSE=h,this.rightSE=h,h.segment=this,h.otherSE=l,this.rings=p,this.windings=m}static compare(l,h){let p=l.leftSE.point.x,m=h.leftSE.point.x,C=l.rightSE.point.x,x=h.rightSE.point.x;if(x.isLessThan(p))return 1;if(C.isLessThan(m))return-1;let b=l.leftSE.point.y,M=h.leftSE.point.y,A=l.rightSE.point.y,q=h.rightSE.point.y;if(p.isLessThan(m)){if(M.isLessThan(b)&&M.isLessThan(A))return 1;if(M.isGreaterThan(b)&&M.isGreaterThan(A))return-1;let U=l.comparePoint(h.leftSE.point);if(U<0)return 1;if(U>0)return-1;let ct=h.comparePoint(l.rightSE.point);return ct!==0?ct:-1}if(p.isGreaterThan(m)){if(b.isLessThan(M)&&b.isLessThan(q))return-1;if(b.isGreaterThan(M)&&b.isGreaterThan(q))return 1;let U=h.comparePoint(l.leftSE.point);if(U!==0)return U;let ct=l.comparePoint(h.rightSE.point);return ct<0?1:ct>0?-1:1}if(b.isLessThan(M))return-1;if(b.isGreaterThan(M))return 1;if(C.isLessThan(x)){let U=h.comparePoint(l.rightSE.point);if(U!==0)return U}if(C.isGreaterThan(x)){let U=l.comparePoint(h.rightSE.point);if(U<0)return 1;if(U>0)return-1}if(!C.eq(x)){let U=A.minus(b),ct=C.minus(p),ft=q.minus(M),Tt=x.minus(m);if(U.isGreaterThan(ct)&&ft.isLessThan(Tt))return 1;if(U.isLessThan(ct)&&ft.isGreaterThan(Tt))return-1}return C.isGreaterThan(x)?1:C.isLessThan(x)||A.isLessThan(q)?-1:A.isGreaterThan(q)?1:l.id<h.id?-1:l.id>h.id?1:0}static fromRing(l,h,p){let m,C,x,b=Zi.comparePoints(l,h);if(b<0)m=l,C=h,x=1;else if(b>0)m=h,C=l,x=-1;else throw new Error(`Tried to create degenerate segment at [${l.x}, ${l.y}]`);let M=new Zi(m,!0),A=new Zi(C,!1);return new xf(M,A,[p],[x])}replaceRightSE(l){this.rightSE=l,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let l=this.leftSE.point.y,h=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:l.isLessThan(h)?l:h},ur:{x:this.rightSE.point.x,y:l.isGreaterThan(h)?l:h}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(l){return l.x.eq(this.leftSE.point.x)&&l.y.eq(this.leftSE.point.y)||l.x.eq(this.rightSE.point.x)&&l.y.eq(this.rightSE.point.y)}comparePoint(l){return bn.orient(this.leftSE.point,l,this.rightSE.point)}getIntersection(l){let h=this.bbox(),p=l.bbox(),m=cc(h,p);if(m===null)return null;let C=this.leftSE.point,x=this.rightSE.point,b=l.leftSE.point,M=l.rightSE.point,A=Hi(h,b)&&this.comparePoint(b)===0,q=Hi(p,C)&&l.comparePoint(C)===0,U=Hi(h,M)&&this.comparePoint(M)===0,ct=Hi(p,x)&&l.comparePoint(x)===0;if(q&&A)return ct&&!U?x:!ct&&U?M:null;if(q)return U&&C.x.eq(M.x)&&C.y.eq(M.y)?null:C;if(A)return ct&&x.x.eq(b.x)&&x.y.eq(b.y)?null:b;if(ct&&U)return null;if(ct)return x;if(U)return M;let ft=Ld(C,this.vector(),b,l.vector());return ft===null||!Hi(m,ft)?null:bn.snap(ft)}split(l){let h=[],p=l.events!==void 0,m=new Zi(l,!0),C=new Zi(l,!1),x=this.rightSE;this.replaceRightSE(C),h.push(C),h.push(m);let b=new xf(m,x,this.rings.slice(),this.windings.slice());return Zi.comparePoints(b.leftSE.point,b.rightSE.point)>0&&b.swapEvents(),Zi.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),p&&(m.checkForConsuming(),C.checkForConsuming()),h}swapEvents(){let l=this.rightSE;this.rightSE=this.leftSE,this.leftSE=l,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let h=0,p=this.windings.length;h<p;h++)this.windings[h]*=-1}consume(l){let h=this,p=l;for(;h.consumedBy;)h=h.consumedBy;for(;p.consumedBy;)p=p.consumedBy;let m=xf.compare(h,p);if(m!==0){if(m>0){let C=h;h=p,p=C}if(h.prev===p){let C=h;h=p,p=C}for(let C=0,x=p.rings.length;C<x;C++){let b=p.rings[C],M=p.windings[C],A=h.rings.indexOf(b);A===-1?(h.rings.push(b),h.windings.push(M)):h.windings[A]+=M}p.rings=null,p.windings=null,p.consumedBy=h,p.leftSE.consumedBy=h.leftSE,p.rightSE.consumedBy=h.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let l=this.prev.consumedBy||this.prev;this._beforeState=l.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let l=this.beforeState();this._afterState={rings:l.rings.slice(0),windings:l.windings.slice(0),multiPolys:[]};let h=this._afterState.rings,p=this._afterState.windings,m=this._afterState.multiPolys;for(let b=0,M=this.rings.length;b<M;b++){let A=this.rings[b],q=this.windings[b],U=h.indexOf(A);U===-1?(h.push(A),p.push(q)):p[U]+=q}let C=[],x=[];for(let b=0,M=h.length;b<M;b++){if(p[b]===0)continue;let A=h[b],q=A.poly;if(x.indexOf(q)===-1)if(A.isExterior)C.push(q);else{x.indexOf(q)===-1&&x.push(q);let U=C.indexOf(A.poly);U!==-1&&C.splice(U,1)}}for(let b=0,M=C.length;b<M;b++){let A=C[b].multiPoly;m.indexOf(A)===-1&&m.push(A)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let l=this.beforeState().multiPolys,h=this.afterState().multiPolys;switch(Wh.type){case"union":{let p=l.length===0,m=h.length===0;this._isInResult=p!==m;break}case"intersection":{let p,m;l.length<h.length?(p=l.length,m=h.length):(p=h.length,m=l.length),this._isInResult=m===Wh.numMultiPolys&&p<m;break}case"xor":{let p=Math.abs(l.length-h.length);this._isInResult=p%2===1;break}case"difference":{let p=m=>m.length===1&&m[0].isSubject;this._isInResult=p(l)!==p(h);break}}return this._isInResult}},hc=class{constructor(a,l,h){oe(this,"poly");oe(this,"isExterior");oe(this,"segments");oe(this,"bbox");if(!Array.isArray(a)||a.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=l,this.isExterior=h,this.segments=[],typeof a[0][0]!="number"||typeof a[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let p=bn.snap({x:new k(a[0][0]),y:new k(a[0][1])});this.bbox={ll:{x:p.x,y:p.y},ur:{x:p.x,y:p.y}};let m=p;for(let C=1,x=a.length;C<x;C++){if(typeof a[C][0]!="number"||typeof a[C][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let b=bn.snap({x:new k(a[C][0]),y:new k(a[C][1])});b.x.eq(m.x)&&b.y.eq(m.y)||(this.segments.push(Qo.fromRing(m,b,this)),b.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=b.x),b.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=b.y),b.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=b.x),b.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=b.y),m=b)}(!p.x.eq(m.x)||!p.y.eq(m.y))&&this.segments.push(Qo.fromRing(m,p,this))}getSweepEvents(){let a=[];for(let l=0,h=this.segments.length;l<h;l++){let p=this.segments[l];a.push(p.leftSE),a.push(p.rightSE)}return a}},bd=class{constructor(a,l){oe(this,"multiPoly");oe(this,"exteriorRing");oe(this,"interiorRings");oe(this,"bbox");if(!Array.isArray(a))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new hc(a[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let h=1,p=a.length;h<p;h++){let m=new hc(a[h],this,!1);m.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=m.bbox.ll.x),m.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=m.bbox.ll.y),m.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=m.bbox.ur.x),m.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=m.bbox.ur.y),this.interiorRings.push(m)}this.multiPoly=l}getSweepEvents(){let a=this.exteriorRing.getSweepEvents();for(let l=0,h=this.interiorRings.length;l<h;l++){let p=this.interiorRings[l].getSweepEvents();for(let m=0,C=p.length;m<C;m++)a.push(p[m])}return a}},mm=class{constructor(a,l){oe(this,"isSubject");oe(this,"polys");oe(this,"bbox");if(!Array.isArray(a))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof a[0][0][0]=="number"&&(a=[a])}catch{}this.polys=[],this.bbox={ll:{x:new k(Number.POSITIVE_INFINITY),y:new k(Number.POSITIVE_INFINITY)},ur:{x:new k(Number.NEGATIVE_INFINITY),y:new k(Number.NEGATIVE_INFINITY)}};for(let h=0,p=a.length;h<p;h++){let m=new bd(a[h],this);m.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=m.bbox.ll.x),m.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=m.bbox.ll.y),m.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=m.bbox.ur.x),m.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=m.bbox.ur.y),this.polys.push(m)}this.isSubject=l}getSweepEvents(){let a=[];for(let l=0,h=this.polys.length;l<h;l++){let p=this.polys[l].getSweepEvents();for(let m=0,C=p.length;m<C;m++)a.push(p[m])}return a}},cC=class Cg{constructor(l){oe(this,"events");oe(this,"poly");oe(this,"_isExteriorRing");oe(this,"_enclosingRing");this.events=l;for(let h=0,p=l.length;h<p;h++)l[h].segment.ringOut=this;this.poly=null}static factory(l){let h=[];for(let p=0,m=l.length;p<m;p++){let C=l[p];if(!C.isInResult()||C.ringOut)continue;let x=null,b=C.leftSE,M=C.rightSE,A=[b],q=b.point,U=[];for(;x=b,b=M,A.push(b),b.point!==q;)for(;;){let ct=b.getAvailableLinkedEvents();if(ct.length===0){let Vt=A[0].point,Yt=A[A.length-1].point;throw new Error(`Unable to complete output ring starting at [${Vt.x}, ${Vt.y}]. Last matching segment found ends at [${Yt.x}, ${Yt.y}].`)}if(ct.length===1){M=ct[0].otherSE;break}let ft=null;for(let Vt=0,Yt=U.length;Vt<Yt;Vt++)if(U[Vt].point===b.point){ft=Vt;break}if(ft!==null){let Vt=U.splice(ft)[0],Yt=A.splice(Vt.index);Yt.unshift(Yt[0].otherSE),h.push(new Cg(Yt.reverse()));continue}U.push({index:A.length,point:b.point});let Tt=b.getLeftmostComparator(x);M=ct.sort(Tt)[0].otherSE;break}h.push(new Cg(A))}return h}getGeom(){let l=this.events[0].point,h=[l];for(let A=1,q=this.events.length-1;A<q;A++){let U=this.events[A].point,ct=this.events[A+1].point;bn.orient(U,l,ct)!==0&&(h.push(U),l=U)}if(h.length===1)return null;let p=h[0],m=h[1];bn.orient(p,l,m)===0&&h.shift(),h.push(h[0]);let C=this.isExteriorRing()?1:-1,x=this.isExteriorRing()?0:h.length-1,b=this.isExteriorRing()?h.length:-1,M=[];for(let A=x;A!=b;A+=C)M.push([h[A].x.toNumber(),h[A].y.toNumber()]);return M}isExteriorRing(){if(this._isExteriorRing===void 0){let l=this.enclosingRing();this._isExteriorRing=l?!l.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var m,C;let l=this.events[0];for(let x=1,b=this.events.length;x<b;x++){let M=this.events[x];Zi.compare(l,M)>0&&(l=M)}let h=l.segment.prevInResult(),p=h?h.prevInResult():null;for(;;){if(!h)return null;if(!p)return h.ringOut;if(p.ringOut!==h.ringOut)return((m=p.ringOut)==null?void 0:m.enclosingRing())!==h.ringOut?h.ringOut:(C=h.ringOut)==null?void 0:C.enclosingRing();h=p.prevInResult(),p=h?h.prevInResult():null}}},_m=class{constructor(a){oe(this,"exteriorRing");oe(this,"interiorRings");this.exteriorRing=a,a.poly=this,this.interiorRings=[]}addInterior(a){this.interiorRings.push(a),a.poly=this}getGeom(){let a=this.exteriorRing.getGeom();if(a===null)return null;let l=[a];for(let h=0,p=this.interiorRings.length;h<p;h++){let m=this.interiorRings[h].getGeom();m!==null&&l.push(m)}return l}},hC=class{constructor(a){oe(this,"rings");oe(this,"polys");this.rings=a,this.polys=this._composePolys(a)}getGeom(){let a=[];for(let l=0,h=this.polys.length;l<h;l++){let p=this.polys[l].getGeom();p!==null&&a.push(p)}return a}_composePolys(a){var h;let l=[];for(let p=0,m=a.length;p<m;p++){let C=a[p];if(!C.poly)if(C.isExteriorRing())l.push(new _m(C));else{let x=C.enclosingRing();x!=null&&x.poly||l.push(new _m(x)),(h=x==null?void 0:x.poly)==null||h.addInterior(C)}}return l}},fC=class{constructor(a,l=Qo.compare){oe(this,"queue");oe(this,"tree");oe(this,"segments");this.queue=a,this.tree=new Mt(l),this.segments=[]}process(a){let l=a.segment,h=[];if(a.consumedBy)return a.isLeft?this.queue.delete(a.otherSE):this.tree.delete(l),h;a.isLeft&&this.tree.add(l);let p=l,m=l;do p=this.tree.lastBefore(p);while(p!=null&&p.consumedBy!=null);do m=this.tree.firstAfter(m);while(m!=null&&m.consumedBy!=null);if(a.isLeft){let C=null;if(p){let b=p.getIntersection(l);if(b!==null&&(l.isAnEndpoint(b)||(C=b),!p.isAnEndpoint(b))){let M=this._splitSafely(p,b);for(let A=0,q=M.length;A<q;A++)h.push(M[A])}}let x=null;if(m){let b=m.getIntersection(l);if(b!==null&&(l.isAnEndpoint(b)||(x=b),!m.isAnEndpoint(b))){let M=this._splitSafely(m,b);for(let A=0,q=M.length;A<q;A++)h.push(M[A])}}if(C!==null||x!==null){let b=null;C===null?b=x:x===null?b=C:b=Zi.comparePoints(C,x)<=0?C:x,this.queue.delete(l.rightSE),h.push(l.rightSE);let M=l.split(b);for(let A=0,q=M.length;A<q;A++)h.push(M[A])}h.length>0?(this.tree.delete(l),h.push(a)):(this.segments.push(l),l.prev=p)}else{if(p&&m){let C=p.getIntersection(m);if(C!==null){if(!p.isAnEndpoint(C)){let x=this._splitSafely(p,C);for(let b=0,M=x.length;b<M;b++)h.push(x[b])}if(!m.isAnEndpoint(C)){let x=this._splitSafely(m,C);for(let b=0,M=x.length;b<M;b++)h.push(x[b])}}}this.tree.delete(l)}return h}_splitSafely(a,l){this.tree.delete(a);let h=a.rightSE;this.queue.delete(h);let p=a.split(l);return p.push(h),a.consumedBy===void 0&&this.tree.add(a),p}},pC=class{constructor(){oe(this,"type");oe(this,"numMultiPolys")}run(a,l,h){fc.type=a;let p=[new mm(l,!0)];for(let M=0,A=h.length;M<A;M++)p.push(new mm(h[M],!1));if(fc.numMultiPolys=p.length,fc.type==="difference"){let M=p[0],A=1;for(;A<p.length;)cc(p[A].bbox,M.bbox)!==null?A++:p.splice(A,1)}if(fc.type==="intersection")for(let M=0,A=p.length;M<A;M++){let q=p[M];for(let U=M+1,ct=p.length;U<ct;U++)if(cc(q.bbox,p[U].bbox)===null)return[]}let m=new Mt(Zi.compare);for(let M=0,A=p.length;M<A;M++){let q=p[M].getSweepEvents();for(let U=0,ct=q.length;U<ct;U++)m.add(q[U])}let C=new fC(m),x=null;for(m.size!=0&&(x=m.first(),m.delete(x));x;){let M=C.process(x);for(let A=0,q=M.length;A<q;A++){let U=M[A];U.consumedBy===void 0&&m.add(U)}m.size!=0?(x=m.first(),m.delete(x)):x=null}bn.reset();let b=cC.factory(C.segments);return new hC(b).getGeom()}},fc=new pC,Wh=fc,dC=(a,...l)=>Wh.run("intersection",a,l),gC=(a,...l)=>Wh.run("difference",a,l);bn.set;function Yh(a){let l={type:"Feature"};return l.geometry=a,l}function Jh(a){return a.type==="Feature"?a.geometry:a}function ym(a){return a&&a.geometry&&a.geometry.coordinates?a.geometry.coordinates:a}function mC(a){return Yh({type:"LineString",coordinates:a})}function _C(a){return Yh({type:"MultiLineString",coordinates:a})}function vm(a){return Yh({type:"Polygon",coordinates:a})}function Cm(a){return Yh({type:"MultiPolygon",coordinates:a})}function yC(a,l){let h=Jh(a),p=Jh(l),m=dC(h.coordinates,p.coordinates);return m.length===0?null:m.length===1?vm(m[0]):Cm(m)}function vC(a,l){let h=Jh(a),p=Jh(l),m=gC(h.coordinates,p.coordinates);return m.length===0?null:m.length===1?vm(m[0]):Cm(m)}function Em(a){return Array.isArray(a)?1+Em(a[0]):-1}function CC(a){a instanceof L.Polyline&&(a=a.toGeoJSON(15));let l=ym(a),h=Em(l),p=[];return h>1?l.forEach(m=>{p.push(mC(m))}):p.push(a),p}function EC(a){let l=[];return a.eachLayer(h=>{l.push(ym(h.toGeoJSON(15)))}),_C(l)}rr.Cut=rr.Polygon.extend({initialize(a){this._map=a,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let a=this._layer.getLatLngs();if(a.length<=2)return;let l=L.polygon(a,this.options.pathOptions);l._latlngInfos=this._layer._latlngInfo,this.cut(l),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:p,originalLayer:m})=>{this._fireCut(m,p,m),this._fireCut(this._map,p,m),m.pm._fireEdit()}),this._editedLayers=[];let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))},cut(a){let l=this._map._layers,h=a._latlngInfos||[];Object.keys(l).map(p=>l[p]).filter(p=>p.pm).filter(p=>!p._pmTempLayer).filter(p=>!L.PM.optIn&&!p.options.pmIgnore||L.PM.optIn&&p.options.pmIgnore===!1).filter(p=>p instanceof L.Polyline).filter(p=>p!==a).filter(p=>p.pm.options.allowCutting).filter(p=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(p)>-1:!0).filter(p=>!this._layerGroup.hasLayer(p)).filter(p=>{try{let m=!!ji(a.toGeoJSON(15),p.toGeoJSON(15)).features.length>0;return m||p instanceof L.Polyline&&!(p instanceof L.Polygon)?m:!!yC(a.toGeoJSON(15),p.toGeoJSON(15))}catch{return p instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(p=>{let m;if(p instanceof L.Polygon){m=L.polygon(p.getLatLngs());let M=m.getLatLngs();h.forEach(A=>{if(A&&A.snapInfo){let{latlng:q}=A,U=this._calcClosestLayer(q,[m]);if(U&&U.segment&&U.distance<this.options.snapDistance){let{segment:ct}=U;if(ct&&ct.length===2){let{indexPath:ft,parentPath:Tt,newIndex:Vt}=L.PM.Utils._getIndexFromSegment(M,ct);(ft.length>1?(0,ms.default)(M,Tt):M).splice(Vt,0,q)}}}})}else m=p;let C=this._cutLayer(a,m),x=L.geoJSON(C,p.options);x.getLayers().length===1&&([x]=x.getLayers()),this._setPane(x,"layerPane");let b=x.addTo(this._map.pm._getContainingLayer());if(b.pm.enable(p.pm.options),b.pm.disable(),p._pmTempLayer=!0,a._pmTempLayer=!0,p.remove(),p.removeFrom(this._map.pm._getContainingLayer()),a.remove(),a.removeFrom(this._map.pm._getContainingLayer()),b.getLayers&&b.getLayers().length===0&&this._map.pm.removeLayer({target:b}),b instanceof L.LayerGroup?(b.eachLayer(M=>{this._addDrawnLayerProp(M)}),this._addDrawnLayerProp(b)):this._addDrawnLayerProp(b),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let M=this.options.layersToCut.indexOf(p);M>-1&&this.options.layersToCut.splice(M,1)}this._editedLayers.push({layer:b,originalLayer:p})})},_cutLayer(a,l){let h=L.geoJSON(),p;if(l instanceof L.Polygon)p=vC(l.toGeoJSON(15),a.toGeoJSON(15));else{let m=CC(l);m.forEach(C=>{let x=pd(C,a.toGeoJSON(15)),b;x&&x.features.length>0?b=L.geoJSON(x):b=L.geoJSON(C),b.getLayers().forEach(M=>{gd(a.toGeoJSON(15),M.toGeoJSON(15))||M.addTo(h)})}),m.length>1?p=EC(h):p=h.toGeoJSON(15)}return p},_change:L.Util.falseFn}),rr.Text=rr.extend({initialize(a){this._map=a,this._shape="Text",this.toolbarButtonName="drawText"},enable(a){L.Util.setOptions(this,a),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Ce("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var a;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(a=this._hintMarker)==null||a.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(a){this.enabled()?this.disable():this.enable(a)},_syncHintMarker(a){if(this._hintMarker.setLatLng(a.latlng),this.options.snappable){let l=a;l.target=this._hintMarker,this._handleSnapping(l)}},_createMarker(a){var m,C,x,b;if(!a.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(a.latlng);let l=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(m=this.options.textOptions)==null?void 0:m.className){let M=this.options.textOptions.className.split(" ");this.textArea.classList.add(...M)}let h=this._createTextIcon(this.textArea),p=new L.Marker(l,{textMarker:!0,_textMarkerOverPM:!0,icon:h});if(this._setPane(p,"markerPane"),this._finishLayer(p),p.pm||(p.options.draggable=!1),p.addTo(this._map.pm._getContainingLayer()),p.pm){p.pm.textArea=this.textArea,L.setOptions(p.pm,{removeIfEmpty:((C=this.options.textOptions)==null?void 0:C.removeIfEmpty)??!0});let M=((x=this.options.textOptions)==null?void 0:x.focusAfterDraw)??!0;p.pm._createTextMarker(M),(b=this.options.textOptions)!=null&&b.text&&p.pm.setText(this.options.textOptions.text)}this._fireCreate(p),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(a){this.enable(),this._hintMarker.setLatLng(a.latlng)},_createTextArea(){let a=document.createElement("textarea");return a.readOnly=!0,a.classList.add("pm-textarea","pm-disabled"),a},_createTextIcon(a){return L.divIcon({className:"pm-text-marker",html:a})}});var LC={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,Lr(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let a=this._getDOMElem();a&&(Lr(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(a)):L.DomEvent.on(a,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,Lr(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let a=this._getDOMElem();a&&(Lr(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(a)):L.DomEvent.off(a,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(a){let l=a.touches?a.touches[0]:a,h={originalEvent:l,target:this._layer};return h.containerPoint=this._map.mouseEventToContainerPoint(l),h.latlng=this._map.containerPointToLatLng(h.containerPoint),this._dragMixinOnMouseDown(h),!1},_simulateMouseMoveEvent(a){let l=a.touches?a.touches[0]:a,h={originalEvent:l,target:this._layer};return h.containerPoint=this._map.mouseEventToContainerPoint(l),h.latlng=this._map.containerPointToLatLng(h.containerPoint),this._dragMixinOnMouseMove(h),!1},_simulateMouseUpEvent(a){let l={originalEvent:a.touches?a.touches[0]:a,target:this._layer};return a.type.indexOf("touch")===-1&&(l.containerPoint=this._map.mouseEventToContainerPoint(a),l.latlng=this._map.containerPointToLatLng(l.containerPoint)),this._dragMixinOnMouseUp(l),!1},_dragMixinOnMouseDown(a){if(a.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(a);let l=a._fromLayerSync,h=this._syncLayers("_dragMixinOnMouseDown",a);if(this._layer instanceof L.Marker&&(this.options.snappable&&!l&&!h?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let p="resizeableCircleMarker";this._layer instanceof L.Circle&&(p="resizeableCircle"),this.options.snappable&&!l&&!h?this._layer.pm.options[p]||this._initSnappableMarkersDrag():this._layer.pm.options[p]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=a.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(a){this._overwriteEventIfItComesFromMarker(a);let l=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",a),this._dragging||(this._dragging=!0,L.DomUtil.addClass(l,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=a.latlng),this._onLayerDrag(a),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(a){let l=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",a),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,l&&L.DomUtil.removeClass(l,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(a){let{latlng:l}=a,h={lat:l.lat-this._tempDragCoord.lat,lng:l.lng-this._tempDragCoord.lng},p=m=>m.map(C=>{if(Array.isArray(C))return p(C);let x={lat:C.lat+h.lat,lng:C.lng+h.lng};return(C.alt||C.alt===0)&&(x.alt=C.alt),x});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let m=p([this._layer.getLatLng()]);this._layer.setLatLng(m[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let m=this._layer.getLatLng();this._layer._snapped&&(m=this._layer._orgLatLng);let C=p([m]);this._layer.setLatLng(C[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let m=p([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(m),this._fireChange(this._layer.getBounds(),"Edit")}else{let m=p(this._layer.getLatLngs());this._layer.setLatLngs(m),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=l,a.layer=this._layer,this._fireDrag(a)},addDraggingClass(){let a=this._getDOMElem();a&&L.DomUtil.addClass(a,"leaflet-pm-draggable")},removeDraggingClass(){let a=this._getDOMElem();a&&L.DomUtil.removeClass(a,"leaflet-pm-draggable")},_getDOMElem(){let a=null;return this._layer._path?a=this._layer._path:this._layer._renderer&&this._layer._renderer._container?a=this._layer._renderer._container:this._layer._image?a=this._layer._image:this._layer._icon&&(a=this._layer._icon),a},_overwriteEventIfItComesFromMarker(a){a.target.getLatLng&&(!a.target._radius||a.target._radius<=10)&&(a.containerPoint=this._map.mouseEventToContainerPoint(a.originalEvent),a.latlng=this._map.containerPointToLatLng(a.containerPoint))},_syncLayers(a,l){if(this.enabled())return!1;if(!l._fromLayerSync&&this._layer===l.target&&this.options.syncLayersOnDrag){l._fromLayerSync=!0;let h=[];if(L.Util.isArray(this.options.syncLayersOnDrag))h=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(p=>{p instanceof L.LayerGroup&&(h=h.concat(p.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let p in this._parentLayerGroup){let m=this._parentLayerGroup[p];m.pm&&(h=m.pm.getLayers(!0))}return L.Util.isArray(h)&&h.length>0&&(h=h.filter(p=>!!p.pm).filter(p=>!!p.pm.options.draggable),h.forEach(p=>{p!==this._layer&&p.pm[a]&&(p._snapped=!1,p.pm[a](l))})),h.length>0}return!1},_stopDOMImageDrag(a){return a.preventDefault(),!1}},xC=LC,bC=d(Bs());function wC(a,l,h,p){return h.unproject(l.transform(h.project(a,p)),p)}function Lm(a,l,h){let p=h.getMaxZoom();if(p===1/0&&(p=h.getZoom()),L.Util.isArray(a)){let m=[];return a.forEach(C=>{m.push(Lm(C,l,h))}),m}return a instanceof L.LatLng?wC(a,l,h,p):null}function Ku(a,l){l instanceof L.Layer&&(l=l.getLatLng());let h=a.getMaxZoom();return h===1/0&&(h=a.getZoom()),a.project(l,h)}function $h(a,l){let h=a.getMaxZoom();return h===1/0&&(h=a.getZoom()),a.unproject(l,h)}var SC={_onRotateStart(a){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Ku(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Ku(this._map,a.target.getLatLng()),this._initialRotateLatLng=Ui(this._layer),this._startAngle=this.getAngle();let l=Ui(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,l),this._fireRotationStart(this._map,l)},_onRotate(a){let l=Ku(this._map,a.target.getLatLng()),h=this._rotationStartPoint,p=this._rotationOriginPoint,m=Math.atan2(l.y-p.y,l.x-p.x)-Math.atan2(h.y-p.y,h.x-p.x);this._layer.setLatLngs(this._rotateLayer(m,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let C=this;function x(q,U=[],ct=-1){if(ct>-1&&U.push(ct),L.Util.isArray(q[0]))q.forEach((ft,Tt)=>x(ft,U.slice(),Tt));else{let ft=U.length>0?(0,bC.default)(C._markers,U):C._markers[0];q.forEach((Tt,Vt)=>{ft[Vt].setLatLng(Tt)})}}x(this._layer.getLatLngs());let b=Ui(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(m,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let M=m*180/Math.PI;M=M<0?M+360:M;let A=M+this._startAngle;this._setAngle(A),this._rotationLayer.pm._setAngle(A),this._fireRotation(this._rotationLayer,M,b),this._fireRotation(this._map,M,b),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let a=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let l=Ui(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Ui(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,a,l),this._fireRotationEnd(this._map,a,l),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(a,l,h,p,m){let C=Ku(m,h);return this._matrix=p.clone().rotate(a,C).flip(),Lm(l,this._matrix,m)},_setAngle(a){a=a<0?a+360:a,this._angle=a%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let a=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),l=a.getCenter();return a.removeFrom(this._layer._map),l},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(Pu(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let a={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),a),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Ui(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(a){let l=this.getAngle(),h=this._layer.getLatLngs(),p=a*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(p,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+a),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(p,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let m=this.getAngle()-l;m=m<0?m+360:m,this._startAngle=l,this._fireRotation(this._layer,m,h,this._layer),this._fireRotation(this._map||this._layer._map,m,h,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(a){let l=a-this.getAngle();this.rotateLayer(l)},getAngle(){return this._angle||0},setInitAngle(a){this._setAngle(a)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(a){this._rotationCenter=a,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(a)}},MC=SC,PC=L.Class.extend({includes:[xC,tc,MC,Su],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(a){L.Util.setOptions(this,a)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(a,l){l==="layerPane"?a.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":l==="vertexPane"?a.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":l==="markerPane"&&(a.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(a,l){let h=l.target,p={layer:this._layer,marker:h,event:l},m="";return a==="move"?m="moveVertexValidation":a==="add"?m="addVertexValidation":a==="remove"&&(m="removeVertexValidation"),this.options[m]&&typeof this.options[m]=="function"&&!this.options[m](p)?(a==="move"&&(h._cancelDragEventChain=h.getLatLng()),!1):(h._cancelDragEventChain=null,!0)},_vertexValidationDrag(a){return a._cancelDragEventChain?(a._latlng=a._cancelDragEventChain,a.update(),!1):!0},_vertexValidationDragEnd(a){return a._cancelDragEventChain?(a._cancelDragEventChain=null,!1):!0}}),hr=PC;hr.LayerGroup=L.Class.extend({initialize(a){this._layerGroup=a,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(p=>this._initLayer(p));let l=p=>{if(p.layer._pmTempLayer)return;this._layers=this.getLayers();let m=this._layers.filter(C=>!C.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in C.pm._parentLayerGroup));m.forEach(C=>{this._initLayer(C)}),m.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(l,100,this),this),this._layerGroup.on("layerremove",p=>{this._removeLayerFromGroup(p.target)},this);let h=p=>{p.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(h,100,this),this)},enable(a,l=[]){l.length===0&&(this._layers=this.getLayers()),this._options=a,this._layers.forEach(h=>{h instanceof L.LayerGroup?l.indexOf(h._leaflet_id)===-1&&(l.push(h._leaflet_id),h.pm.enable(a,l)):h.pm.enable(a)})},disable(a=[]){a.length===0&&(this._layers=this.getLayers()),this._layers.forEach(l=>{l instanceof L.LayerGroup?a.indexOf(l._leaflet_id)===-1&&(a.push(l._leaflet_id),l.pm.disable(a)):l.pm.disable()})},enabled(a=[]){return a.length===0&&(this._layers=this.getLayers()),!!this._layers.find(l=>l instanceof L.LayerGroup?a.indexOf(l._leaflet_id)===-1?(a.push(l._leaflet_id),l.pm.enabled(a)):!1:l.pm.enabled())},toggleEdit(a,l=[]){l.length===0&&(this._layers=this.getLayers()),this._options=a,this._layers.forEach(h=>{h instanceof L.LayerGroup?l.indexOf(h._leaflet_id)===-1&&(l.push(h._leaflet_id),h.pm.toggleEdit(a,l)):h.pm.toggleEdit(a)})},_initLayer(a){let l=L.Util.stamp(this._layerGroup);a.pm._parentLayerGroup||(a.pm._parentLayerGroup={}),a.pm._parentLayerGroup[l]=this._layerGroup},_removeLayerFromGroup(a){if(a.pm&&a.pm._layerGroup){let l=L.Util.stamp(this._layerGroup);delete a.pm._layerGroup[l]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(a=>a.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var a;return this._map||((a=this._layers.find(l=>!!l._map))==null?void 0:a._map)||null},getLayers(a=!1,l=!0,h=!0,p=[]){let m=[];return a?this._layerGroup.getLayers().forEach(C=>{m.push(C),C instanceof L.LayerGroup&&p.indexOf(C._leaflet_id)===-1&&(p.push(C._leaflet_id),m=m.concat(C.pm.getLayers(!0,!0,!0,p)))}):m=this._layerGroup.getLayers(),h&&(m=m.filter(C=>!(C instanceof L.LayerGroup))),l&&(m=m.filter(C=>!!C.pm),m=m.filter(C=>!C._pmTempLayer),m=m.filter(C=>!L.PM.optIn&&!C.options.pmIgnore||L.PM.optIn&&C.options.pmIgnore===!1)),m},setOptions(a,l=[]){l.length===0&&(this._layers=this.getLayers()),this.options=a,this._layers.forEach(h=>{h.pm&&(h instanceof L.LayerGroup?l.indexOf(h._leaflet_id)===-1&&(l.push(h._leaflet_id),h.pm.setOptions(a,l)):h.pm.setOptions(a))})}}),hr.Marker=hr.extend({_shape:"Marker",initialize(a){this._layer=a,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(a={draggable:!0}){if(L.Util.setOptions(this,a),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(a){this.enabled()?this.disable():this.enable(a)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(a){let l=a.target;l.remove(),this._fireRemove(l),this._fireRemove(this._map,l)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let a=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,a.off("pm:drag",this._handleSnapping,this),a.on("pm:drag",this._handleSnapping,this),a.off("pm:dragend",this._cleanupSnapping,this),a.on("pm:dragend",this._cleanupSnapping,this),a.off("pm:dragstart",this._unsnap,this),a.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let a=this._layer;a.off("pm:drag",this._handleSnapping,this),a.off("pm:dragend",this._cleanupSnapping,this),a.off("pm:dragstart",this._unsnap,this)}});var ta=d(Bs()),IC={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let a=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=a.filter((l,h,p)=>p.indexOf(l)===h)},_removeFromCache(a){let l=this.markerCache.indexOf(a);l>-1&&this.markerCache.splice(l,1)},renderLimits(a){this.markerCache.forEach(l=>{a.includes(l)?this._markerGroup.addLayer(l):this._markerGroup.removeLayer(l)})},applyLimitFilters({latlng:a={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let l=[...this._filterClosestMarkers(a)];this.renderLimits(l)},_filterClosestMarkers(a){let l=[...this.markerCache],h=this.options.limitMarkersToCount;return h===-1?l:(l.sort((p,m)=>{let C=p._latlng.distanceTo(a),x=m._latlng.distanceTo(a);return C-x}),l.filter((p,m)=>h>-1?m<h:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(a){this._preventRenderMarkers=!!a}},TC=IC;hr.Line=hr.extend({includes:[TC],_shape:"Line",initialize(a){this._layer=a,this._enabled=!1},enable(a){if(L.Util.setOptions(this,a),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let a=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(a,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(a){return this.enabled()?this.disable():this.enable(a),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let a=this._map,l=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(a),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let h=p=>{if(Array.isArray(p[0]))return p.map(h,this);let m=p.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&p.map((C,x)=>{let b=this.isPolygon()?(x+1)%p.length:x+1;return this._createMiddleMarker(m[x],m[b])}),m};this._markers=h(l),this.filterMarkerGroup(),a.addLayer(this._markerGroup)},_createMarker(a){let l=new L.Marker(a,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(l,"vertexPane"),l._pmTempLayer=!0,this.options.rotate?(l.on("dragstart",this._onRotateStart,this),l.on("drag",this._onRotate,this),l.on("dragend",this._onRotateEnd,this)):(l.on("click",this._onVertexClick,this),l.on("dragstart",this._onMarkerDragStart,this),l.on("move",this._onMarkerDrag,this),l.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||l.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(l),l},_createMiddleMarker(a,l){if(!a||!l)return!1;let h=L.PM.Utils.calcMiddleLatLng(this._map,a.getLatLng(),l.getLatLng()),p=this._createMarker(h),m=L.divIcon({className:"marker-icon marker-icon-middle"});return p.setIcon(m),p.leftM=a,p.rightM=l,a._middleMarkerNext=p,l._middleMarkerPrev=p,p.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),p.on("movestart",this._onMiddleMarkerMoveStart,this),p},_onMiddleMarkerClick(a){let l=a.target;if(!this._vertexValidation("add",a))return;let h=L.divIcon({className:"marker-icon"});l.setIcon(h),this._addMarker(l,l.leftM,l.rightM)},_onMiddleMarkerMoveStart(a){let l=a.target;if(l.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",a)){l.on("move",this._onMiddleMarkerMovePrevent,this);return}l._dragging=!0,this._addMarker(l,l.leftM,l.rightM)},_onMiddleMarkerMovePrevent(a){let l=a.target;this._vertexValidationDrag(l)},_onMiddleMarkerMoveEnd(a){let l=a.target;if(l.off("move",this._onMiddleMarkerMovePrevent,this),l.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(l))return;let h=L.divIcon({className:"marker-icon"});l.setIcon(h),setTimeout(()=>{delete l._dragging},100)},_addMarker(a,l,h){a.off("movestart",this._onMiddleMarkerMoveStart,this),a.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let p=a.getLatLng(),m=this._layer._latlngs;delete a.leftM,delete a.rightM;let{indexPath:C,index:x,parentPath:b}=L.PM.Utils.findDeepMarkerIndex(this._markers,l),M=C.length>1?(0,ta.default)(m,b):m,A=C.length>1?(0,ta.default)(this._markers,b):this._markers;M.splice(x+1,0,p),A.splice(x+1,0,a),this._layer.setLatLngs(m),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(l,a),this._createMiddleMarker(a,h)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(a,L.PM.Utils.findDeepMarkerIndex(this._markers,a).indexPath,p),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return Tu(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(a){let l=this._layer,h,p;if(this.options.allowSelfIntersection?h=!1:(p=Tu(this._layer.toGeoJSON(15)),h=p.features.length>0),h){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return h;a?this._flashLayer():(l.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(p)}else l.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return h},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(a,l){a.forEach(h=>{Array.isArray(h)?this._updateDisabledMarkerStyle(h,l):h._icon&&(l&&!this._checkMarkerAllowedToDrag(h)?L.DomUtil.addClass(h._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(h._icon,"vertexmarker-disabled"))})},_removeMarker(a){let l=a.target;if(!this._vertexValidation("remove",a))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=Ui(this._layer,this._layer.getLatLngs()));let h=this._layer.getLatLngs(),{indexPath:p,index:m,parentPath:C}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);if(!p)return;let x=p.length>1?(0,ta.default)(h,C):h,b=p.length>1?(0,ta.default)(this._markers,C):this._markers,M=C[C.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!M&&(x.length<=2||this.isPolygon()&&x.length<=3)){this._flashLayer();return}x.splice(m,1),this._layer.setLatLngs(h),this.isPolygon()&&x.length<=2&&x.splice(0,x.length);let A=!1;if(x.length<=1&&(x.splice(0,x.length),C.length>1&&p.length>1&&(h=Da(h)),this._layer.setLatLngs(h),this._initMarkers(),A=!0),Co(h)||this._layer.remove(),h=Da(h),this._layer.setLatLngs(h),this._markers=Da(this._markers),!A&&(b=p.length>1?(0,ta.default)(this._markers,C):this._markers,l._middleMarkerPrev&&(this._markerGroup.removeLayer(l._middleMarkerPrev),this._removeFromCache(l._middleMarkerPrev)),l._middleMarkerNext&&(this._markerGroup.removeLayer(l._middleMarkerNext),this._removeFromCache(l._middleMarkerNext)),this._markerGroup.removeLayer(l),this._removeFromCache(l),b)){let q,U;if(this.isPolygon()?(q=(m+1)%b.length,U=(m+(b.length-1))%b.length):(U=m-1<0?void 0:m-1,q=m+1>=b.length?void 0:m+1),q!==U){let ct=b[U],ft=b[q];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(ct,ft)}b.splice(m,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(l,p),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(a){let l=this._layer.getLatLngs(),h=a.getLatLng(),{indexPath:p,index:m,parentPath:C}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);(p.length>1?(0,ta.default)(l,C):l).splice(m,1,h),this._layer.setLatLngs(l)},_getNeighborMarkers(a){let{indexPath:l,index:h,parentPath:p}=L.PM.Utils.findDeepMarkerIndex(this._markers,a),m=l.length>1?(0,ta.default)(this._markers,p):this._markers,C=(h+1)%m.length,x=(h+(m.length-1))%m.length,b=m[x],M=m[C];return{prevMarker:b,nextMarker:M}},_checkMarkerAllowedToDrag(a){let{prevMarker:l,nextMarker:h}=this._getNeighborMarkers(a),p=L.polyline([l.getLatLng(),a.getLatLng()]),m=L.polyline([a.getLatLng(),h.getLatLng()]),C=ji(this._layer.toGeoJSON(15),p.toGeoJSON(15)).features.length,x=ji(this._layer.toGeoJSON(15),m.toGeoJSON(15)).features.length;return a.getLatLng()===this._markers[0][0].getLatLng()?x+=1:a.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(C+=1),!(C<=2&&x<=2)},_onMarkerDragStart(a){let l=a.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",a))return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireMarkerDragStart(a,h),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Ui(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(l):this._markerAllowedToDrag=null},_onMarkerDrag(a){let l=a.target;if(!this._vertexValidationDrag(l))return;let{indexPath:h,index:p,parentPath:m}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);if(!h)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(l);let C=h.length>1?(0,ta.default)(this._markers,m):this._markers,x=(p+1)%C.length,b=(p+(C.length-1))%C.length,M=l.getLatLng(),A=C[b].getLatLng(),q=C[x].getLatLng();if(l._middleMarkerNext){let U=L.PM.Utils.calcMiddleLatLng(this._map,M,q);l._middleMarkerNext.setLatLng(U)}if(l._middleMarkerPrev){let U=L.PM.Utils.calcMiddleLatLng(this._map,M,A);l._middleMarkerPrev.setLatLng(U)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(a,h),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(a){let l=a.target;if(!this._vertexValidationDragEnd(l))return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l),p=!this.options.allowSelfIntersection&&this.hasSelfIntersection();p&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(p=!1);let m=!this.options.allowSelfIntersection&&p;if(this._fireMarkerDragEnd(a,h,m),m){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(a,h);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(a){let l=a.target;if(l._dragging)return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireVertexClick(a,h)}}),hr.Polygon=hr.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(a){let{prevMarker:l,nextMarker:h}=this._getNeighborMarkers(a),p=L.polyline([l.getLatLng(),a.getLatLng()]),m=L.polyline([a.getLatLng(),h.getLatLng()]),C=ji(this._layer.toGeoJSON(15),p.toGeoJSON(15)).features.length,x=ji(this._layer.toGeoJSON(15),m.toGeoJSON(15)).features.length;return!(C<=2&&x<=2)}}),hr.Rectangle=hr.Polygon.extend({_shape:"Rectangle",_initMarkers(){let a=this._map,l=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,a.addLayer(this._markerGroup),this._markers=[],this._markers[0]=l.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((h,p)=>{let m=this._cornerMarkers.find(C=>C._index===p);m&&m.setLatLng(h)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(a,l){let h=new L.Marker(a,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._origLatLng=a,h._index=l,h._pmTempLayer=!0,h.on("click",this._onVertexClick,this),this._markerGroup.addLayer(h),h},_addMarkerEvents(){this._markers[0].forEach(a=>{a.on("dragstart",this._onMarkerDragStart,this),a.on("drag",this._onMarkerDrag,this),a.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||a.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(a){if(!this._vertexValidation("move",a))return;let l=a.target,h=this._cornerMarkers;l._oppositeCornerLatLng=h.find(m=>m._index===(l._index+2)%4).getLatLng(),l._snapped=!1;let{indexPath:p}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireMarkerDragStart(a,p)},_onMarkerDrag(a){let l=a.target;if(!this._vertexValidationDrag(l)||l._index===void 0)return;this._adjustRectangleForMarkerMove(l);let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireMarkerDrag(a,h),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(a){let l=a.target;if(!this._vertexValidationDragEnd(l))return;this._cornerMarkers.forEach(p=>{delete p._oppositeCornerLatLng});let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireMarkerDragEnd(a,h),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(a){L.extend(a._origLatLng,a._latlng);let l=L.PM.Utils._getRotatedRectangle(a.getLatLng(),a._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(l),this._adjustAllMarkers(a),this._layer.redraw()},_adjustAllMarkers(a){let l=this._layer.getLatLngs()[0];if(l&&l.length!==4&&l.length>0)l.forEach((h,p)=>{this._cornerMarkers[p].setLatLng(h)}),this._cornerMarkers.slice(l.length).forEach(h=>{h.setLatLng(l[0])});else if(!l||!l.length)console.error("The layer has no LatLngs");else{let h=l.findIndex(p=>a.getLatLng().equals(p));h>-1?(this._cornerMarkers[(a._index+1)%4].setLatLng(l[(h+1)%4]),this._cornerMarkers[(a._index+2)%4].setLatLng(l[(h+2)%4]),this._cornerMarkers[(a._index+3)%4].setLatLng(l[(h+3)%4])):this._cornerMarkers.forEach(p=>{p.setLatLng(l[p._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(Pu(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let a=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(a[0],a[2],this.getAngle(),this._map||this)}}),hr.CircleMarker=hr.extend({_shape:"CircleMarker",initialize(a){this._layer=a,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(a={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,a),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(a){this.enabled()?this.disable():this.enable(a)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let a=this._map;this._helperLayers&&(this._helperLayers.removeFrom(a),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(a);let l=this._layer.getLatLng(),h=this._layer._radius,p=this._getLatLngOnCircle(l,h);this._centerMarker=this._createCenterMarker(l),this._outerMarker=this._createOuterMarker(p),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(a,l){let h=this._map.project(a),p=L.point(h.x+l,h.y);return this._map.unproject(p)},_createHintLine(a,l){let h=a.getLatLng(),p=l.getLatLng();this._hintline=L.polyline([h,p],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(a){let l=this._createMarker(a);return this.options.draggable?(L.DomUtil.addClass(l._icon,"leaflet-pm-draggable"),l.on("move",this._moveCircle,this)):l.dragging.disable(),l},_createOuterMarker(a){let l=this._createMarker(a);return l.on("drag",this._resizeCircle,this),l},_createMarker(a){let l=new L.Marker(a,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(l,"vertexPane"),l._origLatLng=a,l._pmTempLayer=!0,l.on("dragstart",this._onMarkerDragStart,this),l.on("drag",this._onMarkerDrag,this),l.on("dragend",this._onMarkerDragEnd,this),l.on("click",this._onVertexClick,this),this._helperLayers.addLayer(l),l},_moveCircle(a){if(a.target._cancelDragEventChain)return;let l=this._centerMarker.getLatLng();this._layer.setLatLng(l);let h=this._layer._radius,p=this._getLatLngOnCircle(l,h);this._outerMarker._latlng=p,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let a=this._layer.getLatLng(),l=this._layer._radius,h=this._getLatLngOnCircle(a,l);this._outerMarker.setLatLng(h),this._centerMarker.setLatLng(a),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let a=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng(),h=this._distanceCalculation(a,l);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(h),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let a=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng();this._hintline.setLatLngs([a,l])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(a){this._vertexValidation("move",a)&&this._fireMarkerDragStart(a)},_onMarkerDrag(a){let l=a.target;l instanceof L.Marker&&!this._vertexValidationDrag(l)||this._fireMarkerDrag(a)},_onMarkerDragEnd(a){this._extedingMarkerDragEnd();let l=a.target;this._vertexValidationDragEnd(l)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(a))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let a=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,a.off("pm:drag",this._handleSnapping,this),a.on("pm:drag",this._handleSnapping,this),a.off("pm:dragend",this._cleanupSnapping,this),a.on("pm:dragend",this._cleanupSnapping,this),a.off("pm:dragstart",this._unsnap,this),a.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let a=this._layer;a.off("pm:drag",this._handleSnapping,this),a.off("pm:dragend",this._cleanupSnapping,this),a.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let a=this._layer._map||this._map;if(a){let l=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),a,this._layer.getLatLng()),h=L.circle(this._layer.getLatLng(),this._layer.options);h.setRadius(l);let p=a&&a.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(h,200,!p).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(h,200,!p),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let a=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng(),h=this._distanceCalculation(a,l);return this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?l=Iu(this._map,a,l,this._getMinDistanceInMeter(a)):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(l=Iu(this._map,a,l,this._getMaxDistanceInMeter(a))),l},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let a=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng(),h=this._distanceCalculation(a,l);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(a,l){return this._map.project(a).distanceTo(this._map.project(l))},_getMinDistanceInMeter(a){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,a)},_getMaxDistanceInMeter(a){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,a)},_onVertexClick(a){a.target._dragging||this._fireVertexClick(a,void 0)}}),hr.Circle=hr.CircleMarker.extend({_shape:"Circle",initialize(a){this._layer=a,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(a){L.PM.Edit.CircleMarker.prototype.enable.call(this,a||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let a=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(a,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let a=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!a).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!a),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(a,l){return this._map.distance(a,l)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(a){a.target._dragging||this._fireVertexClick(a,void 0)}}),hr.ImageOverlay=hr.extend({_shape:"ImageOverlay",initialize(a){this._layer=a,this._enabled=!1},toggleEdit(a){this.enabled()?this.disable():this.enable(a)},enabled(){return this._enabled},enable(a={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,a),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let a=this._layer.getBounds(),l=a.getNorthWest(),h=a.getNorthEast(),p=a.getSouthEast(),m=a.getSouthWest();return[l,h,p,m]}}),hr.Text=hr.extend({_shape:"Text",initialize(a){this._layer=a,this._enabled=!1},enable(a){if(L.Util.setOptions(this,a),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let a=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),a.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(a){this.enabled()?this.disable():this.enable(a)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let a=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,a.off("pm:drag",this._handleSnapping,this),a.on("pm:drag",this._handleSnapping,this),a.off("pm:dragend",this._cleanupSnapping,this),a.on("pm:dragend",this._cleanupSnapping,this),a.off("pm:dragstart",this._unsnap,this),a.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let a=this._layer;a.off("pm:drag",this._handleSnapping,this),a.off("pm:dragend",this._cleanupSnapping,this),a.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let a=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,l=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${a}px`,this.textArea.style.width=`${l}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(a){a.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(a={}){let l=this._hasFocus;this._hasFocus=a.type==="focus",!l!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(a){a&&(this.textArea.value=a),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let l=this.options.className.split(" ");this.textArea.classList.add(...l)}let a=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(a),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(a=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),a===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(a){a.preventDefault()}});var wd=function(a,l,h,p,m,C){this._matrix=[a,l,h,p,m,C]};wd.init=()=>new L.PM.Matrix(1,0,0,1,0,0),wd.prototype={transform(a){return this._transform(a.clone())},_transform(a){let l=this._matrix,{x:h,y:p}=a;return a.x=l[0]*h+l[1]*p+l[4],a.y=l[2]*h+l[3]*p+l[5],a},untransform(a){let l=this._matrix;return new L.Point((a.x/l[0]-l[4])/l[0],(a.y/l[2]-l[5])/l[2])},clone(){let a=this._matrix;return new L.PM.Matrix(a[0],a[1],a[2],a[3],a[4],a[5])},translate(a){if(a===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let l,h;return typeof a=="number"?(l=a,h=a):(l=a.x,h=a.y),this._add(1,0,0,1,l,h)},scale(a,l){if(a===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let h,p;return l=l||L.point(0,0),typeof a=="number"?(h=a,p=a):(h=a.x,p=a.y),this._add(h,0,0,p,l.x,l.y)._add(1,0,0,1,-l.x,-l.y)},rotate(a,l){let h=Math.cos(a),p=Math.sin(a);return l=l||new L.Point(0,0),this._add(h,p,-p,h,l.x,l.y)._add(1,0,0,1,-l.x,-l.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(a,l,h,p,m,C){let x=[[],[],[]],b=this._matrix,M=[[b[0],b[2],b[4]],[b[1],b[3],b[5]],[0,0,1]],A=[[a,h,m],[l,p,C],[0,0,1]],q;a&&a instanceof L.PM.Matrix&&(b=a._matrix,A=[[b[0],b[2],b[4]],[b[1],b[3],b[5]],[0,0,1]]);for(let U=0;U<3;U+=1)for(let ct=0;ct<3;ct+=1){q=0;for(let ft=0;ft<3;ft+=1)q+=M[U][ft]*A[ft][ct];x[U][ct]=q}return this._matrix=[x[0][0],x[1][0],x[0][1],x[1][1],x[0][2],x[1][2]],this}};var AC=wd,kC={calcMiddleLatLng(a,l,h){let p=a.project(l),m=a.project(h);return a.unproject(p._add(m)._divideBy(2))},findLayers(a){let l=[];return a.eachLayer(h=>{(h instanceof L.Polyline||h instanceof L.Marker||h instanceof L.Circle||h instanceof L.CircleMarker||h instanceof L.ImageOverlay)&&l.push(h)}),l=l.filter(h=>!!h.pm),l=l.filter(h=>!h._pmTempLayer),l=l.filter(h=>!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1),l},circleToPolygon(a,l=60,h=!0){let p=a.getLatLng(),m=a.getRadius(),C=Mu(p,m,l,0,h),x=[];for(let b=0;b<C.length;b+=1){let M=[C[b].lat,C[b].lng];x.push(M)}return L.polygon(x,a.options)},disablePopup(a){a.getPopup()&&(a._tempPopupCopy=a.getPopup(),a.unbindPopup())},enablePopup(a){a._tempPopupCopy&&(a.bindPopup(a._tempPopupCopy),delete a._tempPopupCopy)},_fireEvent(a,l,h,p=!1){a.fire(l,h,p);let{groups:m}=this.getAllParentGroups(a);m.forEach(C=>{C.fire(l,h,p)})},getAllParentGroups(a){let l=[],h=[],p=m=>{for(let C in m._eventParents)if(l.indexOf(C)===-1){l.push(C);let x=m._eventParents[C];h.push(x),p(x)}};return!a._pmLastGroupFetch||!a._pmLastGroupFetch.time||new Date().getTime()-a._pmLastGroupFetch.time>1e3?(p(a),a._pmLastGroupFetch={time:new Date().getTime(),groups:h,groupIds:l},{groupIds:l,groups:h}):{groups:a._pmLastGroupFetch.groups,groupIds:a._pmLastGroupFetch.groupIds}},createGeodesicPolygon:Mu,getTranslation:Ce,findDeepCoordIndex(a,l,h=!0){let p,m=x=>(b,M)=>{let A=x.concat(M);if(h){if(b.lat&&b.lat===l.lat&&b.lng===l.lng)return p=A,!0}else if(b.lat&&L.latLng(b).equals(l))return p=A,!0;return Array.isArray(b)&&b.some(m(A))};a.some(m([]));let C={};return p&&(C={indexPath:p,index:p[p.length-1],parentPath:p.slice(0,p.length-1)}),C},findDeepMarkerIndex(a,l){let h,p=C=>(x,b)=>{let M=C.concat(b);return x._leaflet_id===l._leaflet_id?(h=M,!0):Array.isArray(x)&&x.some(p(M))};a.some(p([]));let m={};return h&&(m={indexPath:h,index:h[h.length-1],parentPath:h.slice(0,h.length-1)}),m},_getIndexFromSegment(a,l){if(l&&l.length===2){let h=this.findDeepCoordIndex(a,l[0]),p=this.findDeepCoordIndex(a,l[1]),m=Math.max(h.index,p.index);return(h.index===0||p.index===0)&&m!==1&&(m+=1),{indexA:h,indexB:p,newIndex:m,indexPath:h.indexPath,parentPath:h.parentPath}}return null},_getRotatedRectangle(a,l,h,p){let m=Ku(p,a),C=Ku(p,l),x=h*Math.PI/180,b=Math.cos(x),M=Math.sin(x),A=(C.x-m.x)*b+(C.y-m.y)*M,q=(C.y-m.y)*b-(C.x-m.x)*M,U=A*b+m.x,ct=A*M+m.y,ft=-q*M+m.x,Tt=q*b+m.y,Vt=$h(p,m),Yt=$h(p,{x:U,y:ct}),Ve=$h(p,C),j=$h(p,{x:ft,y:Tt});return[Vt,Yt,Ve,j]},pxRadiusToMeterRadius(a,l,h){let p=l.project(h),m=L.point(p.x+a,p.y);return l.distance(l.unproject(m),h)}},DC=kC;L.PM=L.PM||{version:Ul.version,Map:Oh,Toolbar:Ql,Draw:rr,Edit:hr,Utils:DC,Matrix:AC,activeLang:"en",optIn:!1,initialize(a){this.addInitHooks(a)},setOptIn(a){this.optIn=!!a},addInitHooks(){function a(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(a);function l(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(l);function h(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(h);function p(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(p);function m(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(m);function C(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(C);function x(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(x);function b(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(b);function M(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(M)},reInitLayer(a){a instanceof L.LayerGroup&&a.eachLayer(l=>{this.reInitLayer(l)}),a.pm||L.PM.optIn&&a.options.pmIgnore!==!1||a.options.pmIgnore||(a instanceof L.Map?a.pm=new L.PM.Map(a):a instanceof L.Marker?a.options.textMarker?(a.pm=new L.PM.Edit.Text(a),a.pm._initTextMarker(),a.pm._createTextMarker(!1)):a.pm=new L.PM.Edit.Marker(a):a instanceof L.Circle?a.pm=new L.PM.Edit.Circle(a):a instanceof L.CircleMarker?a.pm=new L.PM.Edit.CircleMarker(a):a instanceof L.Rectangle?a.pm=new L.PM.Edit.Rectangle(a):a instanceof L.Polygon?a.pm=new L.PM.Edit.Polygon(a):a instanceof L.Polyline?a.pm=new L.PM.Edit.Line(a):a instanceof L.LayerGroup?a.pm=new L.PM.Edit.LayerGroup(a):a instanceof L.ImageOverlay&&(a.pm=new L.PM.Edit.ImageOverlay(a)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(a){let l=this._map.mouseEventToLayerPoint(a),h,p;for(let m=this._drawFirst;m;m=m.next)h=m.layer,h.options.interactive&&h._containsPoint(l)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(h))&&(p=h);p&&(L.DomEvent.fakeStop(a),this._fireEvent([p],a))}}),L.PM.initialize()})();function f4(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var p4={exports:{}};(function(e){(function(t){if(typeof f4<"u")e.exports=t(_v());else{if(typeof window.L>"u")throw"Leaflet must be loaded first";t(window.L)}})(function(t){var n=Math.PI/180;function r(d){return(d-90)*n}function i(d,_,y){return d.add(t.point(Math.cos(_),Math.sin(_)).multiplyBy(y))}t.Point.prototype.rotated=function(d,_){return i(this,d,_)};var o={options:{startAngle:0,stopAngle:359.9999},startAngle:function(){return this.options.startAngle<this.options.stopAngle?r(this.options.startAngle):r(this.options.stopAngle)},stopAngle:function(){return this.options.startAngle<this.options.stopAngle?r(this.options.stopAngle):r(this.options.startAngle)},setStartAngle:function(d){return this.options.startAngle=d,this.redraw()},setStopAngle:function(d){return this.options.stopAngle=d,this.redraw()},setDirection:function(d,_){return _===void 0&&(_=10),this.options.startAngle=d-_/2,this.options.stopAngle=d+_/2,this.redraw()},getDirection:function(){return this.stopAngle()-(this.stopAngle()-this.startAngle())/2},isSemicircle:function(){var d=this.options.startAngle,_=this.options.stopAngle;return!(d===0&&_>359)&&d!==_},_containsPoint:function(d){function _(T){for(;T<=-Math.PI;)T+=2*Math.PI;for(;T>Math.PI;)T-=2*Math.PI;return T}var y=Math.atan2(d.y-this._point.y,d.x-this._point.x),E=_(this.startAngle()),S=_(this.stopAngle());return S<=E&&(S+=2*Math.PI),y<=E&&(y+=2*Math.PI),E<y&&y<=S&&d.distanceTo(this._point)<=this._radius+this._clickTolerance()}};t.SemiCircle=t.Circle.extend(o),t.SemiCircleMarker=t.CircleMarker.extend(o),t.semiCircle=function(d,_){return new t.SemiCircle(d,_)},t.semiCircleMarker=function(d,_){return new t.SemiCircleMarker(d,_)};var u=t.SVG.prototype._updateCircle,f=t.Canvas.prototype._updateCircle;t.SVG.include({_updateCircle:function(d){if(!(d instanceof t.SemiCircle||d instanceof t.SemiCircleMarker)||!d.isSemicircle())return u.call(this,d);if(d._empty())return this._setPath(d,"M0 0");var _=d._map.latLngToLayerPoint(d._latlng),y=d._radius,E=Math.round(d._radiusY||y),S=_.rotated(d.startAngle(),y),T=_.rotated(d.stopAngle(),y),I=d.options.stopAngle-d.options.startAngle>=180?"1":"0",z="M"+_.x+","+_.y+"L"+S.x+","+S.y+"A "+y+","+E+",0,"+I+",1,"+T.x+","+T.y+" z";this._setPath(d,z)}}),t.Canvas.include({_updateCircle:function(d){if(!(d instanceof t.SemiCircle||d instanceof t.SemiCircleMarker)||!d.isSemicircle())return f.call(this,d);if(!(!this._drawing||d._empty())){var _=d._point,y=this._ctx,E=d._radius,S=(d._radiusY||E)/E,T=_.rotated(d.startAngle(),E);S!==1&&(y.save(),y.scale(1,S)),y.beginPath(),y.moveTo(_.x,_.y),y.lineTo(T.x,T.y),y.arc(_.x,_.y,E,d.startAngle(),d.stopAngle()),y.lineTo(_.x,_.y),S!==1&&y.restore(),this._fillStroke(y,d)}}})})})(p4);var Qr=63710088e-1,vv={centimeters:Qr*100,centimetres:Qr*100,degrees:Qr/111325,feet:Qr*3.28084,inches:Qr*39.37,kilometers:Qr/1e3,kilometres:Qr/1e3,meters:Qr,metres:Qr,miles:Qr/1609.344,millimeters:Qr*1e3,millimetres:Qr*1e3,nauticalmiles:Qr/1852,radians:1,yards:Qr*1.0936};function Qa(e,t,n){n===void 0&&(n={});var r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function bf(e,t,n){if(n===void 0&&(n={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!U_(e[0])||!U_(e[1]))throw new Error("coordinates must contain numbers");var r={type:"Point",coordinates:e};return Qa(r,t,n)}function d4(e,t,n){n===void 0&&(n={});for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var u=0;u<o[o.length-1].length;u++)if(o[o.length-1][u]!==o[0][u])throw new Error("First and last Position are not equivalent.")}var f={type:"Polygon",coordinates:e};return Qa(f,t,n)}function Uf(e,t,n){if(n===void 0&&(n={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var r={type:"LineString",coordinates:e};return Qa(r,t,n)}function Vf(e,t){t===void 0&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function g4(e,t,n){n===void 0&&(n={});var r={type:"MultiLineString",coordinates:e};return Qa(r,t,n)}function Cv(e,t){t===void 0&&(t="kilometers");var n=vv[t];if(!n)throw new Error(t+" units is invalid");return e*n}function m4(e,t){t===void 0&&(t="kilometers");var n=vv[t];if(!n)throw new Error(t+" units is invalid");return e/n}function sf(e){var t=e%360;return t*Math.PI/180}function U_(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function Jg(e,t,n){if(e!==null)for(var r,i,o,u,f,d,_,y=0,E=0,S,T=e.type,I=T==="FeatureCollection",z=T==="Feature",G=I?e.features.length:1,W=0;W<G;W++){_=I?e.features[W].geometry:z?e.geometry:e,S=_?_.type==="GeometryCollection":!1,f=S?_.geometries.length:1;for(var Q=0;Q<f;Q++){var rt=0,gt=0;if(u=S?_.geometries[Q]:_,u!==null){d=u.coordinates;var xt=u.type;switch(y=0,xt){case null:break;case"Point":if(t(d,E,W,rt,gt)===!1)return!1;E++,rt++;break;case"LineString":case"MultiPoint":for(r=0;r<d.length;r++){if(t(d[r],E,W,rt,gt)===!1)return!1;E++,xt==="MultiPoint"&&rt++}xt==="LineString"&&rt++;break;case"Polygon":case"MultiLineString":for(r=0;r<d.length;r++){for(i=0;i<d[r].length-y;i++){if(t(d[r][i],E,W,rt,gt)===!1)return!1;E++}xt==="MultiLineString"&&rt++,xt==="Polygon"&&gt++}xt==="Polygon"&&rt++;break;case"MultiPolygon":for(r=0;r<d.length;r++){for(gt=0,i=0;i<d[r].length;i++){for(o=0;o<d[r][i].length-y;o++){if(t(d[r][i][o],E,W,rt,gt)===!1)return!1;E++}gt++}rt++}break;case"GeometryCollection":for(r=0;r<u.geometries.length;r++)if(Jg(u.geometries[r],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function V_(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var n=0;n<e.features.length&&t(e.features[n],n)!==!1;n++);}function Ep(e,t){var n,r,i,o,u,f,d,_,y,E,S=0,T=e.type==="FeatureCollection",I=e.type==="Feature",z=T?e.features.length:1;for(n=0;n<z;n++){for(f=T?e.features[n].geometry:I?e.geometry:e,_=T?e.features[n].properties:I?e.properties:{},y=T?e.features[n].bbox:I?e.bbox:void 0,E=T?e.features[n].id:I?e.id:void 0,d=f?f.type==="GeometryCollection":!1,u=d?f.geometries.length:1,i=0;i<u;i++){if(o=d?f.geometries[i]:f,o===null){if(t(null,S,_,y,E)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(o,S,_,y,E)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<o.geometries.length;r++)if(t(o.geometries[r],S,_,y,E)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}S++}}function _4(e,t,n){var r=n;return Ep(e,function(i,o,u,f,d){r=t(r,i,o,u,f,d)}),r}function y4(e,t){Ep(e,function(n,r,i,o,u){var f=n===null?null:n.type;switch(f){case null:case"Point":case"LineString":case"Polygon":return t(Qa(n,i,{bbox:o,id:u}),r,0)===!1?!1:void 0}var d;switch(f){case"MultiPoint":d="Point";break;case"MultiLineString":d="LineString";break;case"MultiPolygon":d="Polygon";break}for(var _=0;_<n.coordinates.length;_++){var y=n.coordinates[_],E={type:d,coordinates:y};if(t(Qa(E,i),r,_)===!1)return!1}})}function v4(e,t){y4(e,function(n,r,i){var o=0;if(n.geometry){var u=n.geometry.type;if(!(u==="Point"||u==="MultiPoint")){var f,d=0,_=0,y=0;if(Jg(n,function(E,S,T,I,z){if(f===void 0||r>d||I>_||z>y){f=E,d=r,_=I,y=z,o=0;return}var G=Uf([f,E],n.properties);if(t(G,r,i,z,o)===!1)return!1;o++,f=E})===!1)return!1}}})}function C4(e,t,n){var r=n,i=!1;return v4(e,function(o,u,f,d,_){i===!1&&n===void 0?r=o:r=t(r,o,u,f,d,_),i=!0}),r}function jf(e){var t=[1/0,1/0,-1/0,-1/0];return Jg(e,function(n){t[0]>n[0]&&(t[0]=n[0]),t[1]>n[1]&&(t[1]=n[1]),t[2]<n[0]&&(t[2]=n[0]),t[3]<n[1]&&(t[3]=n[1])}),t}jf.default=jf;function j_(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function $g(e){return e.type==="Feature"?e.geometry:e}function Eg(e,t,n){n===void 0&&(n={});var r=j_(e),i=j_(t),o=sf(i[1]-r[1]),u=sf(i[0]-r[0]),f=sf(r[1]),d=sf(i[1]),_=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(f)*Math.cos(d);return Cv(2*Math.atan2(Math.sqrt(_),Math.sqrt(1-_)),n.units)}function E4(e,t){t===void 0&&(t={});var n=Number(e[0]),r=Number(e[1]),i=Number(e[2]),o=Number(e[3]);if(e.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var u=[n,r],f=[n,o],d=[i,o],_=[i,r];return d4([[u,_,d,f,u]],t.properties,{bbox:e,id:t.id})}function L4(e,t){t===void 0&&(t={});var n=jf(e),r=(n[0]+n[2])/2,i=(n[1]+n[3])/2;return bf([r,i],t.properties,t)}var q_=6378137;function Zd(e){return _4(e,function(t,n){return t+x4(n)},0)}function x4(e){var t=0,n;switch(e.type){case"Polygon":return H_(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)t+=H_(e.coordinates[n]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function H_(e){var t=0;if(e&&e.length>0){t+=Math.abs(Z_(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(Z_(e[n]))}return t}function Z_(e){var t,n,r,i,o,u,f,d=0,_=e.length;if(_>2){for(f=0;f<_;f++)f===_-2?(i=_-2,o=_-1,u=0):f===_-1?(i=_-1,o=0,u=1):(i=f,o=f+1,u=f+2),t=e[i],n=e[o],r=e[u],d+=(Kd(r[0])-Kd(t[0]))*Math.sin(Kd(n[1]));d=d*q_*q_/2}return d}function Kd(e){return e*Math.PI/180}function Xd(e,t){return t===void 0&&(t={}),C4(e,function(n,r){var i=r.geometry.coordinates;return n+Eg(i[0],i[1],t)},0)}function b4(e,t){t===void 0&&(t={});var n=$g(e);switch(!t.properties&&e.type==="Feature"&&(t.properties=e.properties),n.type){case"Polygon":return w4(n,t);case"MultiPolygon":return S4(n,t);default:throw new Error("invalid poly")}}function w4(e,t){t===void 0&&(t={});var n=$g(e),r=n.coordinates,i=t.properties?t.properties:e.type==="Feature"?e.properties:{};return Ev(r,i)}function S4(e,t){t===void 0&&(t={});var n=$g(e),r=n.coordinates,i=t.properties?t.properties:e.type==="Feature"?e.properties:{},o=[];return r.forEach(function(u){o.push(Ev(u,i))}),Vf(o)}function Ev(e,t){return e.length>1?g4(e,t):Uf(e[0],t)}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(this===void 0||this===null)throw new TypeError(this+" is not an object");var n=Object(this),r=Math.max(Math.min(n.length,9007199254740991),0)||0,i=1 in arguments&&parseInt(Number(arguments[1]),10)||0;i=i<0?Math.max(r+i,0):Math.min(i,r);var o=2 in arguments&&arguments[2]!==void 0?parseInt(Number(arguments[2]),10)||0:r;for(o=o<0?Math.max(r+arguments[2],0):Math.min(o,r);i<o;)n[i]=t,++i;return n},writable:!0});Number.isFinite=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)};Number.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};Number.parseFloat=Number.parseFloat||parseFloat;Number.isNaN=Number.isNaN||function(e){return e!==e};Math.trunc=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};var tu=function(){};tu.prototype.interfaces_=function(){return[]};tu.prototype.getClass=function(){return tu};tu.prototype.equalsWithTolerance=function(t,n,r){return Math.abs(t-n)<=r};var cn=function(e){function t(n){e.call(this,n),this.name="IllegalArgumentException",this.message=n,this.stack=new e().stack}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),ue=function(){},Lv={MAX_VALUE:{configurable:!0}};ue.isNaN=function(t){return Number.isNaN(t)};ue.doubleToLongBits=function(t){return t};ue.longBitsToDouble=function(t){return t};ue.isInfinite=function(t){return!Number.isFinite(t)};Lv.MAX_VALUE.get=function(){return Number.MAX_VALUE};Object.defineProperties(ue,Lv);var vi=function(){},Lp=function(){},al=function(){};function Ci(){}var it=function e(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)this.x=0,this.y=0,this.z=e.NULL_ORDINATE;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.z=t.z}else arguments.length===2?(this.x=arguments[0],this.y=arguments[1],this.z=e.NULL_ORDINATE):arguments.length===3&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},gu={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};it.prototype.setOrdinate=function(t,n){switch(t){case it.X:this.x=n;break;case it.Y:this.y=n;break;case it.Z:this.z=n;break;default:throw new cn("Invalid ordinate index: "+t)}};it.prototype.equals2D=function(){if(arguments.length===1){var t=arguments[0];return!(this.x!==t.x||this.y!==t.y)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return!(!tu.equalsWithTolerance(this.x,n.x,r)||!tu.equalsWithTolerance(this.y,n.y,r))}};it.prototype.getOrdinate=function(t){switch(t){case it.X:return this.x;case it.Y:return this.y;case it.Z:return this.z}throw new cn("Invalid ordinate index: "+t)};it.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||ue.isNaN(this.z))&&ue.isNaN(t.z)};it.prototype.equals=function(t){return t instanceof it?this.equals2D(t):!1};it.prototype.equalInZ=function(t,n){return tu.equalsWithTolerance(this.z,t.z,n)};it.prototype.compareTo=function(t){var n=t;return this.x<n.x?-1:this.x>n.x?1:this.y<n.y?-1:this.y>n.y?1:0};it.prototype.clone=function(){};it.prototype.copy=function(){return new it(this)};it.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};it.prototype.distance3D=function(t){var n=this.x-t.x,r=this.y-t.y,i=this.z-t.z;return Math.sqrt(n*n+r*r+i*i)};it.prototype.distance=function(t){var n=this.x-t.x,r=this.y-t.y;return Math.sqrt(n*n+r*r)};it.prototype.hashCode=function(){var t=17;return t=37*t+it.hashCode(this.x),t=37*t+it.hashCode(this.y),t};it.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z};it.prototype.interfaces_=function(){return[vi,Lp,Ci]};it.prototype.getClass=function(){return it};it.hashCode=function(){if(arguments.length===1){var t=arguments[0],n=ue.doubleToLongBits(t);return Math.trunc((n^n)>>>32)}};gu.DimensionalComparator.get=function(){return Ao};gu.serialVersionUID.get=function(){return 6683108902428367e3};gu.NULL_ORDINATE.get=function(){return ue.NaN};gu.X.get=function(){return 0};gu.Y.get=function(){return 1};gu.Z.get=function(){return 2};Object.defineProperties(it,gu);var Ao=function(t){if(this._dimensionsToTest=2,arguments.length!==0){if(arguments.length===1){var n=arguments[0];if(n!==2&&n!==3)throw new cn("only 2 or 3 dimensions may be specified");this._dimensionsToTest=n}}};Ao.prototype.compare=function(t,n){var r=t,i=n,o=Ao.compare(r.x,i.x);if(o!==0)return o;var u=Ao.compare(r.y,i.y);if(u!==0)return u;if(this._dimensionsToTest<=2)return 0;var f=Ao.compare(r.z,i.z);return f};Ao.prototype.interfaces_=function(){return[al]};Ao.prototype.getClass=function(){return Ao};Ao.compare=function(t,n){return t<n?-1:t>n?1:ue.isNaN(t)?ue.isNaN(n)?0:-1:ue.isNaN(n)?1:0};var ul=function(){};ul.prototype.create=function(){};ul.prototype.interfaces_=function(){return[]};ul.prototype.getClass=function(){return ul};var lt=function(){},uh={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};lt.prototype.interfaces_=function(){return[]};lt.prototype.getClass=function(){return lt};lt.toLocationSymbol=function(t){switch(t){case lt.EXTERIOR:return"e";case lt.BOUNDARY:return"b";case lt.INTERIOR:return"i";case lt.NONE:return"-"}throw new cn("Unknown location value: "+t)};uh.INTERIOR.get=function(){return 0};uh.BOUNDARY.get=function(){return 1};uh.EXTERIOR.get=function(){return 2};uh.NONE.get=function(){return-1};Object.defineProperties(lt,uh);var se=function(e,t){return e.interfaces_&&e.interfaces_().indexOf(t)>-1},ii=function(){},xv={LOG_10:{configurable:!0}};ii.prototype.interfaces_=function(){return[]};ii.prototype.getClass=function(){return ii};ii.log10=function(t){var n=Math.log(t);return ue.isInfinite(n)||ue.isNaN(n)?n:n/ii.LOG_10};ii.min=function(t,n,r,i){var o=t;return n<o&&(o=n),r<o&&(o=r),i<o&&(o=i),o};ii.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],n=arguments[1],r=arguments[2];return t<n?n:t>r?r:t}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1],u=arguments[2];return i<o?o:i>u?u:i}};ii.wrap=function(t,n){return t<0?n- -t%n:t%n};ii.max=function(){if(arguments.length===3){var t=arguments[0],n=arguments[1],r=arguments[2],i=t;return n>i&&(i=n),r>i&&(i=r),i}else if(arguments.length===4){var o=arguments[0],u=arguments[1],f=arguments[2],d=arguments[3],_=o;return u>_&&(_=u),f>_&&(_=f),d>_&&(_=d),_}};ii.average=function(t,n){return(t+n)/2};xv.LOG_10.get=function(){return Math.log(10)};Object.defineProperties(ii,xv);var hs=function(t){this.str=t};hs.prototype.append=function(t){this.str+=t};hs.prototype.setCharAt=function(t,n){this.str=this.str.substr(0,t)+n+this.str.substr(t+1)};hs.prototype.toString=function(t){return this.str};var es=function(t){this.value=t};es.prototype.intValue=function(){return this.value};es.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0};es.isNaN=function(t){return Number.isNaN(t)};var Vc=function(){};Vc.isWhitespace=function(t){return t<=32&&t>=0||t===127};Vc.toUpperCase=function(t){return t.toUpperCase()};var dt=function e(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}else if(typeof arguments[0]=="string"){var r=arguments[0];e.call(this,e.parse(r))}}else if(arguments.length===2){var i=arguments[0],o=arguments[1];this.init(i,o)}},Bi={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};dt.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo};dt.prototype.extractSignificantDigits=function(t,n){var r=this.abs(),i=dt.magnitude(r._hi),o=dt.TEN.pow(i);r=r.divide(o),r.gt(dt.TEN)?(r=r.divide(dt.TEN),i+=1):r.lt(dt.ONE)&&(r=r.multiply(dt.TEN),i-=1);for(var u=i+1,f=new hs,d=dt.MAX_PRINT_DIGITS-1,_=0;_<=d;_++){t&&_===u&&f.append(".");var y=Math.trunc(r._hi);if(y<0)break;var E=!1,S=0;y>9?(E=!0,S="9"):S="0"+y,f.append(S),r=r.subtract(dt.valueOf(y)).multiply(dt.TEN),E&&r.selfAdd(dt.TEN);var T=!0,I=dt.magnitude(r._hi);if(I<0&&Math.abs(I)>=d-_&&(T=!1),!T)break}return n[0]=i,f.toString()};dt.prototype.sqr=function(){return this.multiply(this)};dt.prototype.doubleValue=function(){return this._hi+this._lo};dt.prototype.subtract=function(){if(arguments[0]instanceof dt){var t=arguments[0];return this.add(t.negate())}else if(typeof arguments[0]=="number"){var n=arguments[0];return this.add(-n)}};dt.prototype.equals=function(){if(arguments.length===1){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}};dt.prototype.isZero=function(){return this._hi===0&&this._lo===0};dt.prototype.selfSubtract=function(){if(arguments[0]instanceof dt){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}else if(typeof arguments[0]=="number"){var n=arguments[0];return this.isNaN()?this:this.selfAdd(-n,0)}};dt.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null};dt.prototype.min=function(t){return this.le(t)?this:t};dt.prototype.selfDivide=function(){if(arguments.length===1){if(arguments[0]instanceof dt){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}else if(typeof arguments[0]=="number"){var n=arguments[0];return this.selfDivide(n,0)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1],o=null,u=null,f=null,d=null,_=null,y=null,E=null,S=null;return _=this._hi/r,y=dt.SPLIT*_,o=y-_,S=dt.SPLIT*r,o=y-o,u=_-o,f=S-r,E=_*r,f=S-f,d=r-f,S=o*f-E+o*d+u*f+u*d,y=(this._hi-E-S+this._lo-_*i)/r,S=_+y,this._hi=S,this._lo=_-S+y,this}};dt.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"};dt.prototype.divide=function(){if(arguments[0]instanceof dt){var t=arguments[0],n=null,r=null,i=null,o=null,u=null,f=null,d=null,_=null;u=this._hi/t._hi,f=dt.SPLIT*u,n=f-u,_=dt.SPLIT*t._hi,n=f-n,r=u-n,i=_-t._hi,d=u*t._hi,i=_-i,o=t._hi-i,_=n*i-d+n*o+r*i+r*o,f=(this._hi-d-_+this._lo-u*t._lo)/t._hi,_=u+f;var y=_,E=u-_+f;return new dt(y,E)}else if(typeof arguments[0]=="number"){var S=arguments[0];return ue.isNaN(S)?dt.createNaN():dt.copy(this).selfDivide(S,0)}};dt.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo};dt.prototype.pow=function(t){if(t===0)return dt.valueOf(1);var n=new dt(this),r=dt.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2===1&&r.selfMultiply(n),i/=2,i>0&&(n=n.sqr());else r=n;return t<0?r.reciprocal():r};dt.prototype.ceil=function(){if(this.isNaN())return dt.NaN;var t=Math.ceil(this._hi),n=0;return t===this._hi&&(n=Math.ceil(this._lo)),new dt(t,n)};dt.prototype.compareTo=function(t){var n=t;return this._hi<n._hi?-1:this._hi>n._hi?1:this._lo<n._lo?-1:this._lo>n._lo?1:0};dt.prototype.rint=function(){if(this.isNaN())return this;var t=this.add(.5);return t.floor()};dt.prototype.setValue=function(){if(arguments[0]instanceof dt){var t=arguments[0];return this.init(t),this}else if(typeof arguments[0]=="number"){var n=arguments[0];return this.init(n),this}};dt.prototype.max=function(t){return this.ge(t)?this:t};dt.prototype.sqrt=function(){if(this.isZero())return dt.valueOf(0);if(this.isNegative())return dt.NaN;var t=1/Math.sqrt(this._hi),n=this._hi*t,r=dt.valueOf(n),i=this.subtract(r.sqr()),o=i._hi*(t*.5);return r.add(o)};dt.prototype.selfAdd=function(){if(arguments.length===1){if(arguments[0]instanceof dt){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}else if(typeof arguments[0]=="number"){var n=arguments[0],r=null,i=null,o=null,u=null,f=null,d=null;return o=this._hi+n,f=o-this._hi,u=o-f,u=n-f+(this._hi-u),d=u+this._lo,r=o+d,i=d+(o-r),this._hi=r+i,this._lo=i+(r-this._hi),this}}else if(arguments.length===2){var _=arguments[0],y=arguments[1],E=null,S=null,T=null,I=null,z=null,G=null,W=null,Q=null;z=this._hi+_,T=this._lo+y,W=z-this._hi,Q=T-this._lo,G=z-W,I=T-Q,G=_-W+(this._hi-G),I=y-Q+(this._lo-I),W=G+T,E=z+W,S=W+(z-E),W=I+S;var rt=E+W,gt=W+(E-rt);return this._hi=rt,this._lo=gt,this}};dt.prototype.selfMultiply=function(){if(arguments.length===1){if(arguments[0]instanceof dt){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}else if(typeof arguments[0]=="number"){var n=arguments[0];return this.selfMultiply(n,0)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1],o=null,u=null,f=null,d=null,_=null,y=null;_=dt.SPLIT*this._hi,o=_-this._hi,y=dt.SPLIT*r,o=_-o,u=this._hi-o,f=y-r,_=this._hi*r,f=y-f,d=r-f,y=o*f-_+o*d+u*f+u*d+(this._hi*i+this._lo*r);var E=_+y;o=_-E;var S=y+o;return this._hi=E,this._lo=S,this}};dt.prototype.selfSqr=function(){return this.selfMultiply(this)};dt.prototype.floor=function(){if(this.isNaN())return dt.NaN;var t=Math.floor(this._hi),n=0;return t===this._hi&&(n=Math.floor(this._lo)),new dt(t,n)};dt.prototype.negate=function(){return this.isNaN()?this:new dt(-this._hi,-this._lo)};dt.prototype.clone=function(){};dt.prototype.multiply=function(){if(arguments[0]instanceof dt){var t=arguments[0];return t.isNaN()?dt.createNaN():dt.copy(this).selfMultiply(t)}else if(typeof arguments[0]=="number"){var n=arguments[0];return ue.isNaN(n)?dt.createNaN():dt.copy(this).selfMultiply(n,0)}};dt.prototype.isNaN=function(){return ue.isNaN(this._hi)};dt.prototype.intValue=function(){return Math.trunc(this._hi)};dt.prototype.toString=function(){var t=dt.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()};dt.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(t!==null)return t;var n=new Array(1).fill(null),r=this.extractSignificantDigits(!0,n),i=n[0]+1,o=r;if(r.charAt(0)===".")o="0"+r;else if(i<0)o="0."+dt.stringOfChar("0",-i)+r;else if(r.indexOf(".")===-1){var u=i-r.length,f=dt.stringOfChar("0",u);o=r+f+".0"}return this.isNegative()?"-"+o:o};dt.prototype.reciprocal=function(){var t=null,n=null,r=null,i=null,o=null,u=null,f=null,d=null;o=1/this._hi,u=dt.SPLIT*o,t=u-o,d=dt.SPLIT*this._hi,t=u-t,n=o-t,r=d-this._hi,f=o*this._hi,r=d-r,i=this._hi-r,d=t*r-f+t*i+n*r+n*i,u=(1-f-d-o*this._lo)/this._hi;var _=o+u,y=o-_+u;return new dt(_,y)};dt.prototype.toSciNotation=function(){if(this.isZero())return dt.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(t!==null)return t;var n=new Array(1).fill(null),r=this.extractSignificantDigits(!1,n),i=dt.SCI_NOT_EXPONENT_CHAR+n[0];if(r.charAt(0)==="0")throw new Error("Found leading zero: "+r);var o="";r.length>1&&(o=r.substring(1));var u=r.charAt(0)+"."+o;return this.isNegative()?"-"+u+i:u+i};dt.prototype.abs=function(){return this.isNaN()?dt.NaN:this.isNegative()?this.negate():new dt(this)};dt.prototype.isPositive=function(){return(this._hi>0||this._hi===0)&&this._lo>0};dt.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo};dt.prototype.add=function(){if(arguments[0]instanceof dt){var t=arguments[0];return dt.copy(this).selfAdd(t)}else if(typeof arguments[0]=="number"){var n=arguments[0];return dt.copy(this).selfAdd(n)}};dt.prototype.init=function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof dt){var n=arguments[0];this._hi=n._hi,this._lo=n._lo}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this._hi=r,this._lo=i}};dt.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo};dt.prototype.isNegative=function(){return(this._hi<0||this._hi===0)&&this._lo<0};dt.prototype.trunc=function(){return this.isNaN()?dt.NaN:this.isPositive()?this.floor():this.ceil()};dt.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0};dt.prototype.interfaces_=function(){return[Ci,vi,Lp]};dt.prototype.getClass=function(){return dt};dt.sqr=function(t){return dt.valueOf(t).selfMultiply(t)};dt.valueOf=function(){if(typeof arguments[0]=="string"){var t=arguments[0];return dt.parse(t)}else if(typeof arguments[0]=="number"){var n=arguments[0];return new dt(n)}};dt.sqrt=function(t){return dt.valueOf(t).sqrt()};dt.parse=function(t){for(var n=0,r=t.length;Vc.isWhitespace(t.charAt(n));)n++;var i=!1;if(n<r){var o=t.charAt(n);(o==="-"||o==="+")&&(n++,o==="-"&&(i=!0))}for(var u=new dt,f=0,d=0,_=0;!(n>=r);){var y=t.charAt(n);if(n++,Vc.isDigit(y)){var E=y-"0";u.selfMultiply(dt.TEN),u.selfAdd(E),f++;continue}if(y==="."){d=f;continue}if(y==="e"||y==="E"){var S=t.substring(n);try{_=es.parseInt(S)}catch(W){throw W instanceof Error?new Error("Invalid exponent "+S+" in string "+t):W}finally{}break}throw new Error("Unexpected character '"+y+"' at position "+n+" in string "+t)}var T=u,I=f-d-_;if(I===0)T=u;else if(I>0){var z=dt.TEN.pow(I);T=u.divide(z)}else if(I<0){var G=dt.TEN.pow(-I);T=u.multiply(G)}return i?T.negate():T};dt.createNaN=function(){return new dt(ue.NaN,ue.NaN)};dt.copy=function(t){return new dt(t)};dt.magnitude=function(t){var n=Math.abs(t),r=Math.log(n)/Math.log(10),i=Math.trunc(Math.floor(r)),o=Math.pow(10,i);return o*10<=n&&(i+=1),i};dt.stringOfChar=function(t,n){for(var r=new hs,i=0;i<n;i++)r.append(t);return r.toString()};Bi.PI.get=function(){return new dt(3.141592653589793,12246467991473532e-32)};Bi.TWO_PI.get=function(){return new dt(6.283185307179586,24492935982947064e-32)};Bi.PI_2.get=function(){return new dt(1.5707963267948966,6123233995736766e-32)};Bi.E.get=function(){return new dt(2.718281828459045,14456468917292502e-32)};Bi.NaN.get=function(){return new dt(ue.NaN,ue.NaN)};Bi.EPS.get=function(){return 123259516440783e-46};Bi.SPLIT.get=function(){return 134217729};Bi.MAX_PRINT_DIGITS.get=function(){return 32};Bi.TEN.get=function(){return dt.valueOf(10)};Bi.ONE.get=function(){return dt.valueOf(1)};Bi.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"};Bi.SCI_NOT_ZERO.get=function(){return"0.0E0"};Object.defineProperties(dt,Bi);var Mr=function(){},bv={DP_SAFE_EPSILON:{configurable:!0}};Mr.prototype.interfaces_=function(){return[]};Mr.prototype.getClass=function(){return Mr};Mr.orientationIndex=function(t,n,r){var i=Mr.orientationIndexFilter(t,n,r);if(i<=1)return i;var o=dt.valueOf(n.x).selfAdd(-t.x),u=dt.valueOf(n.y).selfAdd(-t.y),f=dt.valueOf(r.x).selfAdd(-n.x),d=dt.valueOf(r.y).selfAdd(-n.y);return o.selfMultiply(d).selfSubtract(u.selfMultiply(f)).signum()};Mr.signOfDet2x2=function(t,n,r,i){var o=t.multiply(i).selfSubtract(n.multiply(r));return o.signum()};Mr.intersection=function(t,n,r,i){var o=dt.valueOf(i.y).selfSubtract(r.y).selfMultiply(dt.valueOf(n.x).selfSubtract(t.x)),u=dt.valueOf(i.x).selfSubtract(r.x).selfMultiply(dt.valueOf(n.y).selfSubtract(t.y)),f=o.subtract(u),d=dt.valueOf(i.x).selfSubtract(r.x).selfMultiply(dt.valueOf(t.y).selfSubtract(r.y)),_=dt.valueOf(i.y).selfSubtract(r.y).selfMultiply(dt.valueOf(t.x).selfSubtract(r.x)),y=d.subtract(_),E=y.selfDivide(f).doubleValue(),S=dt.valueOf(t.x).selfAdd(dt.valueOf(n.x).selfSubtract(t.x).selfMultiply(E)).doubleValue(),T=dt.valueOf(n.x).selfSubtract(t.x).selfMultiply(dt.valueOf(t.y).selfSubtract(r.y)),I=dt.valueOf(n.y).selfSubtract(t.y).selfMultiply(dt.valueOf(t.x).selfSubtract(r.x)),z=T.subtract(I),G=z.selfDivide(f).doubleValue(),W=dt.valueOf(r.y).selfAdd(dt.valueOf(i.y).selfSubtract(r.y).selfMultiply(G)).doubleValue();return new it(S,W)};Mr.orientationIndexFilter=function(t,n,r){var i=null,o=(t.x-r.x)*(n.y-r.y),u=(t.y-r.y)*(n.x-r.x),f=o-u;if(o>0){if(u<=0)return Mr.signum(f);i=o+u}else if(o<0){if(u>=0)return Mr.signum(f);i=-o-u}else return Mr.signum(f);var d=Mr.DP_SAFE_EPSILON*i;return f>=d||-f>=d?Mr.signum(f):2};Mr.signum=function(t){return t>0?1:t<0?-1:0};bv.DP_SAFE_EPSILON.get=function(){return 1e-15};Object.defineProperties(Mr,bv);var Ne=function(){},lh={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};lh.X.get=function(){return 0};lh.Y.get=function(){return 1};lh.Z.get=function(){return 2};lh.M.get=function(){return 3};Ne.prototype.setOrdinate=function(t,n,r){};Ne.prototype.size=function(){};Ne.prototype.getOrdinate=function(t,n){};Ne.prototype.getCoordinate=function(){};Ne.prototype.getCoordinateCopy=function(t){};Ne.prototype.getDimension=function(){};Ne.prototype.getX=function(t){};Ne.prototype.clone=function(){};Ne.prototype.expandEnvelope=function(t){};Ne.prototype.copy=function(){};Ne.prototype.getY=function(t){};Ne.prototype.toCoordinateArray=function(){};Ne.prototype.interfaces_=function(){return[Lp]};Ne.prototype.getClass=function(){return Ne};Object.defineProperties(Ne,lh);var wv=function(){},Tl=function(e){function t(){e.call(this,"Projective point not representable on the Cartesian plane.")}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(wv),Yn=function(){};Yn.arraycopy=function(t,n,r,i,o){for(var u=0,f=n;f<n+o;f++)r[i+u]=t[f],u++};Yn.getProperty=function(t){return{"line.separator":`
`}[t]};var Pi=function e(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof e&&arguments[1]instanceof e){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof it&&arguments[1]instanceof it){var u=arguments[0],f=arguments[1];this.x=u.y-f.y,this.y=f.x-u.x,this.w=u.x*f.y-f.x*u.y}}else if(arguments.length===3){var d=arguments[0],_=arguments[1],y=arguments[2];this.x=d,this.y=_,this.w=y}else if(arguments.length===4){var E=arguments[0],S=arguments[1],T=arguments[2],I=arguments[3],z=E.y-S.y,G=S.x-E.x,W=E.x*S.y-S.x*E.y,Q=T.y-I.y,rt=I.x-T.x,gt=T.x*I.y-I.x*T.y;this.x=G*gt-rt*W,this.y=Q*W-z*gt,this.w=z*rt-Q*G}};Pi.prototype.getY=function(){var t=this.y/this.w;if(ue.isNaN(t)||ue.isInfinite(t))throw new Tl;return t};Pi.prototype.getX=function(){var t=this.x/this.w;if(ue.isNaN(t)||ue.isInfinite(t))throw new Tl;return t};Pi.prototype.getCoordinate=function(){var t=new it;return t.x=this.getX(),t.y=this.getY(),t};Pi.prototype.interfaces_=function(){return[]};Pi.prototype.getClass=function(){return Pi};Pi.intersection=function(t,n,r,i){var o=t.y-n.y,u=n.x-t.x,f=t.x*n.y-n.x*t.y,d=r.y-i.y,_=i.x-r.x,y=r.x*i.y-i.x*r.y,E=u*y-_*f,S=d*f-o*y,T=o*_-d*u,I=E/T,z=S/T;if(ue.isNaN(I)||ue.isInfinite(I)||ue.isNaN(z)||ue.isInfinite(z))throw new Tl;return new it(I,z)};var Jt=function e(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof it){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(arguments.length===4){var o=arguments[0],u=arguments[1],f=arguments[2],d=arguments[3];this.init(o,u,f,d)}},Sv={serialVersionUID:{configurable:!0}};Jt.prototype.getArea=function(){return this.getWidth()*this.getHeight()};Jt.prototype.equals=function(t){if(!(t instanceof Jt))return!1;var n=t;return this.isNull()?n.isNull():this._maxx===n.getMaxX()&&this._maxy===n.getMaxY()&&this._minx===n.getMinX()&&this._miny===n.getMinY()};Jt.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Jt;var n=this._minx>t._minx?this._minx:t._minx,r=this._miny>t._miny?this._miny:t._miny,i=this._maxx<t._maxx?this._maxx:t._maxx,o=this._maxy<t._maxy?this._maxy:t._maxy;return new Jt(n,i,r,o)};Jt.prototype.isNull=function(){return this._maxx<this._minx};Jt.prototype.getMaxX=function(){return this._maxx};Jt.prototype.covers=function(){if(arguments.length===1){if(arguments[0]instanceof it){var t=arguments[0];return this.covers(t.x,t.y)}else if(arguments[0]instanceof Jt){var n=arguments[0];return this.isNull()||n.isNull()?!1:n.getMinX()>=this._minx&&n.getMaxX()<=this._maxx&&n.getMinY()>=this._miny&&n.getMaxY()<=this._maxy}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isNull()?!1:r>=this._minx&&r<=this._maxx&&i>=this._miny&&i<=this._maxy}};Jt.prototype.intersects=function(){if(arguments.length===1){if(arguments[0]instanceof Jt){var t=arguments[0];return this.isNull()||t.isNull()?!1:!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}else if(arguments[0]instanceof it){var n=arguments[0];return this.intersects(n.x,n.y)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isNull()?!1:!(r>this._maxx||r<this._minx||i>this._maxy||i<this._miny)}};Jt.prototype.getMinY=function(){return this._miny};Jt.prototype.getMinX=function(){return this._minx};Jt.prototype.expandToInclude=function(){if(arguments.length===1){if(arguments[0]instanceof it){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Jt){var n=arguments[0];if(n.isNull())return null;this.isNull()?(this._minx=n.getMinX(),this._maxx=n.getMaxX(),this._miny=n.getMinY(),this._maxy=n.getMaxY()):(n._minx<this._minx&&(this._minx=n._minx),n._maxx>this._maxx&&(this._maxx=n._maxx),n._miny<this._miny&&(this._miny=n._miny),n._maxy>this._maxy&&(this._maxy=n._maxy))}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.isNull()?(this._minx=r,this._maxx=r,this._miny=i,this._maxy=i):(r<this._minx&&(this._minx=r),r>this._maxx&&(this._maxx=r),i<this._miny&&(this._miny=i),i>this._maxy&&(this._maxy=i))}};Jt.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),n=this.getHeight();return t<n?t:n};Jt.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx};Jt.prototype.compareTo=function(t){var n=t;return this.isNull()?n.isNull()?0:-1:n.isNull()?1:this._minx<n._minx?-1:this._minx>n._minx?1:this._miny<n._miny?-1:this._miny>n._miny?1:this._maxx<n._maxx?-1:this._maxx>n._maxx?1:this._maxy<n._maxy?-1:this._maxy>n._maxy?1:0};Jt.prototype.translate=function(t,n){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+n,this.getMaxY()+n)};Jt.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"};Jt.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1};Jt.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny};Jt.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),n=this.getHeight();return t>n?t:n};Jt.prototype.expandBy=function(){if(arguments.length===1){var t=arguments[0];this.expandBy(t,t)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];if(this.isNull())return null;this._minx-=n,this._maxx+=n,this._miny-=r,this._maxy+=r,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}};Jt.prototype.contains=function(){if(arguments.length===1){if(arguments[0]instanceof Jt){var t=arguments[0];return this.covers(t)}else if(arguments[0]instanceof it){var n=arguments[0];return this.covers(n)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.covers(r,i)}};Jt.prototype.centre=function(){return this.isNull()?null:new it((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)};Jt.prototype.init=function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof it){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Jt){var n=arguments[0];this._minx=n._minx,this._maxx=n._maxx,this._miny=n._miny,this._maxy=n._maxy}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(arguments.length===4){var o=arguments[0],u=arguments[1],f=arguments[2],d=arguments[3];o<u?(this._minx=o,this._maxx=u):(this._minx=u,this._maxx=o),f<d?(this._miny=f,this._maxy=d):(this._miny=d,this._maxy=f)}};Jt.prototype.getMaxY=function(){return this._maxy};Jt.prototype.distance=function(t){if(this.intersects(t))return 0;var n=0;this._maxx<t._minx?n=t._minx-this._maxx:this._minx>t._maxx&&(n=this._minx-t._maxx);var r=0;return this._maxy<t._miny?r=t._miny-this._maxy:this._miny>t._maxy&&(r=this._miny-t._maxy),n===0?r:r===0?n:Math.sqrt(n*n+r*r)};Jt.prototype.hashCode=function(){var t=17;return t=37*t+it.hashCode(this._minx),t=37*t+it.hashCode(this._maxx),t=37*t+it.hashCode(this._miny),t=37*t+it.hashCode(this._maxy),t};Jt.prototype.interfaces_=function(){return[vi,Ci]};Jt.prototype.getClass=function(){return Jt};Jt.intersects=function(){if(arguments.length===3){var t=arguments[0],n=arguments[1],r=arguments[2];return r.x>=(t.x<n.x?t.x:n.x)&&r.x<=(t.x>n.x?t.x:n.x)&&r.y>=(t.y<n.y?t.y:n.y)&&r.y<=(t.y>n.y?t.y:n.y)}else if(arguments.length===4){var i=arguments[0],o=arguments[1],u=arguments[2],f=arguments[3],d=Math.min(u.x,f.x),_=Math.max(u.x,f.x),y=Math.min(i.x,o.x),E=Math.max(i.x,o.x);return!(y>_||E<d||(d=Math.min(u.y,f.y),_=Math.max(u.y,f.y),y=Math.min(i.y,o.y),E=Math.max(i.y,o.y),y>_)||E<d)}};Sv.serialVersionUID.get=function(){return 5873921885273102e3};Object.defineProperties(Jt,Sv);var Xi={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},xp=function(t){this.geometryFactory=t||new xe};xp.prototype.read=function(t){var n,r,i;t=t.replace(/[\n\r]/g," ");var o=Xi.typeStr.exec(t);if(t.search("EMPTY")!==-1&&(o=Xi.emptyTypeStr.exec(t),o[2]=void 0),o&&(r=o[1].toLowerCase(),i=o[2],$u[r]&&(n=$u[r].apply(this,[i]))),n===void 0)throw new Error("Could not parse WKT "+t);return n};xp.prototype.write=function(t){return this.extractGeometry(t)};xp.prototype.extractGeometry=function(t){var n=t.getGeometryType().toLowerCase();if(!Ws[n])return null;var r=n.toUpperCase(),i;return t.isEmpty()?i=r+" EMPTY":i=r+"("+Ws[n].apply(this,[t])+")",i};var Ws={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Ws.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var n=this,r=[],i=0,o=t._geometries.length;i<o;++i)r.push("("+Ws.point.apply(n,[t._geometries[i]])+")");return r.join(",")},linestring:function(t){for(var n=this,r=[],i=0,o=t._points._coordinates.length;i<o;++i)r.push(Ws.coordinate.apply(n,[t._points._coordinates[i]]));return r.join(",")},linearring:function(t){for(var n=this,r=[],i=0,o=t._points._coordinates.length;i<o;++i)r.push(Ws.coordinate.apply(n,[t._points._coordinates[i]]));return r.join(",")},multilinestring:function(t){for(var n=this,r=[],i=0,o=t._geometries.length;i<o;++i)r.push("("+Ws.linestring.apply(n,[t._geometries[i]])+")");return r.join(",")},polygon:function(t){var n=this,r=[];r.push("("+Ws.linestring.apply(this,[t._shell])+")");for(var i=0,o=t._holes.length;i<o;++i)r.push("("+Ws.linestring.apply(n,[t._holes[i]])+")");return r.join(",")},multipolygon:function(t){for(var n=this,r=[],i=0,o=t._geometries.length;i<o;++i)r.push("("+Ws.polygon.apply(n,[t._geometries[i]])+")");return r.join(",")},geometrycollection:function(t){for(var n=this,r=[],i=0,o=t._geometries.length;i<o;++i)r.push(n.extractGeometry(t._geometries[i]));return r.join(",")}},$u={point:function(t){if(t===void 0)return this.geometryFactory.createPoint();var n=t.trim().split(Xi.spaces);return this.geometryFactory.createPoint(new it(Number.parseFloat(n[0]),Number.parseFloat(n[1])))},multipoint:function(t){var n=this;if(t===void 0)return this.geometryFactory.createMultiPoint();for(var r,i=t.trim().split(","),o=[],u=0,f=i.length;u<f;++u)r=i[u].replace(Xi.trimParens,"$1"),o.push($u.point.apply(n,[r]));return this.geometryFactory.createMultiPoint(o)},linestring:function(t){if(t===void 0)return this.geometryFactory.createLineString();for(var n=t.trim().split(","),r=[],i,o=0,u=n.length;o<u;++o)i=n[o].trim().split(Xi.spaces),r.push(new it(Number.parseFloat(i[0]),Number.parseFloat(i[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(t===void 0)return this.geometryFactory.createLinearRing();for(var n=t.trim().split(","),r=[],i,o=0,u=n.length;o<u;++o)i=n[o].trim().split(Xi.spaces),r.push(new it(Number.parseFloat(i[0]),Number.parseFloat(i[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){var n=this;if(t===void 0)return this.geometryFactory.createMultiLineString();for(var r,i=t.trim().split(Xi.parenComma),o=[],u=0,f=i.length;u<f;++u)r=i[u].replace(Xi.trimParens,"$1"),o.push($u.linestring.apply(n,[r]));return this.geometryFactory.createMultiLineString(o)},polygon:function(t){var n=this;if(t===void 0)return this.geometryFactory.createPolygon();for(var r,i,o,u=t.trim().split(Xi.parenComma),f,d=[],_=0,y=u.length;_<y;++_)r=u[_].replace(Xi.trimParens,"$1"),i=$u.linestring.apply(n,[r]),o=n.geometryFactory.createLinearRing(i._points),_===0?f=o:d.push(o);return this.geometryFactory.createPolygon(f,d)},multipolygon:function(t){var n=this;if(t===void 0)return this.geometryFactory.createMultiPolygon();for(var r,i=t.trim().split(Xi.doubleParenComma),o=[],u=0,f=i.length;u<f;++u)r=i[u].replace(Xi.trimParens,"$1"),o.push($u.polygon.apply(n,[r]));return this.geometryFactory.createMultiPolygon(o)},geometrycollection:function(t){var n=this;if(t===void 0)return this.geometryFactory.createGeometryCollection();t=t.replace(/,\s*([A-Za-z])/g,"|$1");for(var r=t.trim().split("|"),i=[],o=0,u=r.length;o<u;++o)i.push(n.read(r[o]));return this.geometryFactory.createGeometryCollection(i)}},Ti=function(t){this.parser=new xp(t)};Ti.prototype.write=function(t){return this.parser.write(t)};Ti.toLineString=function(t,n){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+n.x+" "+n.y+" )"};var so=function(e){function t(n){e.call(this,n),this.name="RuntimeException",this.message=n,this.stack=new e().stack}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),qf=function(e){function t(){if(e.call(this),arguments.length===0)e.call(this);else if(arguments.length===1){var n=arguments[0];e.call(this,n)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(so),me=function(){};me.prototype.interfaces_=function(){return[]};me.prototype.getClass=function(){return me};me.shouldNeverReachHere=function(){if(arguments.length===0)me.shouldNeverReachHere(null);else if(arguments.length===1){var t=arguments[0];throw new qf("Should never reach here"+(t!==null?": "+t:""))}};me.isTrue=function(){var t,n;if(arguments.length===1)t=arguments[0],me.isTrue(t,null);else if(arguments.length===2&&(t=arguments[0],n=arguments[1],!t))throw n===null?new qf:new qf(n)};me.equals=function(){var t,n,r;if(arguments.length===2)t=arguments[0],n=arguments[1],me.equals(t,n,null);else if(arguments.length===3&&(t=arguments[0],n=arguments[1],r=arguments[2],!n.equals(t)))throw new qf("Expected "+t+" but encountered "+n+(r!==null?": "+r:""))};var fn=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new it,this._intPt[1]=new it,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},mu={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};fn.prototype.getIndexAlongSegment=function(t,n){return this.computeIntLineIndex(),this._intLineIndex[t][n]};fn.prototype.getTopologySummary=function(){var t=new hs;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()};fn.prototype.computeIntersection=function(t,n,r,i){this._inputLines[0][0]=t,this._inputLines[0][1]=n,this._inputLines[1][0]=r,this._inputLines[1][1]=i,this._result=this.computeIntersect(t,n,r,i)};fn.prototype.getIntersectionNum=function(){return this._result};fn.prototype.computeIntLineIndex=function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var t=arguments[0],n=this.getEdgeDistance(t,0),r=this.getEdgeDistance(t,1);n>r?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}};fn.prototype.isProper=function(){return this.hasIntersection()&&this._isProper};fn.prototype.setPrecisionModel=function(t){this._precisionModel=t};fn.prototype.isInteriorIntersection=function(){var t=this;if(arguments.length===0)return!!(this.isInteriorIntersection(0)||this.isInteriorIntersection(1));if(arguments.length===1){for(var n=arguments[0],r=0;r<this._result;r++)if(!(t._intPt[r].equals2D(t._inputLines[n][0])||t._intPt[r].equals2D(t._inputLines[n][1])))return!0;return!1}};fn.prototype.getIntersection=function(t){return this._intPt[t]};fn.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper};fn.prototype.hasIntersection=function(){return this._result!==fn.NO_INTERSECTION};fn.prototype.getEdgeDistance=function(t,n){var r=fn.computeEdgeDistance(this._intPt[n],this._inputLines[t][0],this._inputLines[t][1]);return r};fn.prototype.isCollinear=function(){return this._result===fn.COLLINEAR_INTERSECTION};fn.prototype.toString=function(){return Ti.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Ti.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()};fn.prototype.getEndpoint=function(t,n){return this._inputLines[t][n]};fn.prototype.isIntersection=function(t){for(var n=this,r=0;r<this._result;r++)if(n._intPt[r].equals2D(t))return!0;return!1};fn.prototype.getIntersectionAlongSegment=function(t,n){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][n]]};fn.prototype.interfaces_=function(){return[]};fn.prototype.getClass=function(){return fn};fn.computeEdgeDistance=function(t,n,r){var i=Math.abs(r.x-n.x),o=Math.abs(r.y-n.y),u=-1;if(t.equals(n))u=0;else if(t.equals(r))i>o?u=i:u=o;else{var f=Math.abs(t.x-n.x),d=Math.abs(t.y-n.y);i>o?u=f:u=d,u===0&&!t.equals(n)&&(u=Math.max(f,d))}return me.isTrue(!(u===0&&!t.equals(n)),"Bad distance calculation"),u};fn.nonRobustComputeEdgeDistance=function(t,n,r){var i=t.x-n.x,o=t.y-n.y,u=Math.sqrt(i*i+o*o);return me.isTrue(!(u===0&&!t.equals(n)),"Invalid distance calculation"),u};mu.DONT_INTERSECT.get=function(){return 0};mu.DO_INTERSECT.get=function(){return 1};mu.COLLINEAR.get=function(){return 2};mu.NO_INTERSECTION.get=function(){return 0};mu.POINT_INTERSECTION.get=function(){return 1};mu.COLLINEAR_INTERSECTION.get=function(){return 2};Object.defineProperties(fn,mu);var Sa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isInSegmentEnvelopes=function(r){var i=new Jt(this._inputLines[0][0],this._inputLines[0][1]),o=new Jt(this._inputLines[1][0],this._inputLines[1][1]);return i.contains(r)&&o.contains(r)},t.prototype.computeIntersection=function(){if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];if(this._isProper=!1,Jt.intersects(i,o,r)&&Gt.orientationIndex(i,o,r)===0&&Gt.orientationIndex(o,i,r)===0)return this._isProper=!0,(r.equals(i)||r.equals(o))&&(this._isProper=!1),this._result=e.POINT_INTERSECTION,null;this._result=e.NO_INTERSECTION}else return e.prototype.computeIntersection.apply(this,arguments)},t.prototype.normalizeToMinimum=function(r,i,o,u,f){f.x=this.smallestInAbsValue(r.x,i.x,o.x,u.x),f.y=this.smallestInAbsValue(r.y,i.y,o.y,u.y),r.x-=f.x,r.y-=f.y,i.x-=f.x,i.y-=f.y,o.x-=f.x,o.y-=f.y,u.x-=f.x,u.y-=f.y},t.prototype.safeHCoordinateIntersection=function(r,i,o,u){var f=null;try{f=Pi.intersection(r,i,o,u)}catch(d){if(d instanceof Tl)f=t.nearestEndpoint(r,i,o,u);else throw d}finally{}return f},t.prototype.intersection=function(r,i,o,u){var f=this.intersectionWithNormalization(r,i,o,u);return this.isInSegmentEnvelopes(f)||(f=new it(t.nearestEndpoint(r,i,o,u))),this._precisionModel!==null&&this._precisionModel.makePrecise(f),f},t.prototype.smallestInAbsValue=function(r,i,o,u){var f=r,d=Math.abs(f);return Math.abs(i)<d&&(f=i,d=Math.abs(i)),Math.abs(o)<d&&(f=o,d=Math.abs(o)),Math.abs(u)<d&&(f=u),f},t.prototype.checkDD=function(r,i,o,u,f){var d=Mr.intersection(r,i,o,u),_=this.isInSegmentEnvelopes(d);Yn.out.println("DD in env = "+_+"  --------------------- "+d),f.distance(d)>1e-4&&Yn.out.println("Distance = "+f.distance(d))},t.prototype.intersectionWithNormalization=function(r,i,o,u){var f=new it(r),d=new it(i),_=new it(o),y=new it(u),E=new it;this.normalizeToEnvCentre(f,d,_,y,E);var S=this.safeHCoordinateIntersection(f,d,_,y);return S.x+=E.x,S.y+=E.y,S},t.prototype.computeCollinearIntersection=function(r,i,o,u){var f=Jt.intersects(r,i,o),d=Jt.intersects(r,i,u),_=Jt.intersects(o,u,r),y=Jt.intersects(o,u,i);return f&&d?(this._intPt[0]=o,this._intPt[1]=u,e.COLLINEAR_INTERSECTION):_&&y?(this._intPt[0]=r,this._intPt[1]=i,e.COLLINEAR_INTERSECTION):f&&_?(this._intPt[0]=o,this._intPt[1]=r,o.equals(r)&&!d&&!y?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):f&&y?(this._intPt[0]=o,this._intPt[1]=i,o.equals(i)&&!d&&!_?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):d&&_?(this._intPt[0]=u,this._intPt[1]=r,u.equals(r)&&!f&&!y?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):d&&y?(this._intPt[0]=u,this._intPt[1]=i,u.equals(i)&&!f&&!_?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):e.NO_INTERSECTION},t.prototype.normalizeToEnvCentre=function(r,i,o,u,f){var d=r.x<i.x?r.x:i.x,_=r.y<i.y?r.y:i.y,y=r.x>i.x?r.x:i.x,E=r.y>i.y?r.y:i.y,S=o.x<u.x?o.x:u.x,T=o.y<u.y?o.y:u.y,I=o.x>u.x?o.x:u.x,z=o.y>u.y?o.y:u.y,G=d>S?d:S,W=y<I?y:I,Q=_>T?_:T,rt=E<z?E:z,gt=(G+W)/2,xt=(Q+rt)/2;f.x=gt,f.y=xt,r.x-=f.x,r.y-=f.y,i.x-=f.x,i.y-=f.y,o.x-=f.x,o.y-=f.y,u.x-=f.x,u.y-=f.y},t.prototype.computeIntersect=function(r,i,o,u){if(this._isProper=!1,!Jt.intersects(r,i,o,u))return e.NO_INTERSECTION;var f=Gt.orientationIndex(r,i,o),d=Gt.orientationIndex(r,i,u);if(f>0&&d>0||f<0&&d<0)return e.NO_INTERSECTION;var _=Gt.orientationIndex(o,u,r),y=Gt.orientationIndex(o,u,i);if(_>0&&y>0||_<0&&y<0)return e.NO_INTERSECTION;var E=f===0&&d===0&&_===0&&y===0;return E?this.computeCollinearIntersection(r,i,o,u):(f===0||d===0||_===0||y===0?(this._isProper=!1,r.equals2D(o)||r.equals2D(u)?this._intPt[0]=r:i.equals2D(o)||i.equals2D(u)?this._intPt[0]=i:f===0?this._intPt[0]=new it(o):d===0?this._intPt[0]=new it(u):_===0?this._intPt[0]=new it(r):y===0&&(this._intPt[0]=new it(i))):(this._isProper=!0,this._intPt[0]=this.intersection(r,i,o,u)),e.POINT_INTERSECTION)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.nearestEndpoint=function(r,i,o,u){var f=r,d=Gt.distancePointLine(r,o,u),_=Gt.distancePointLine(i,o,u);return _<d&&(d=_,f=i),_=Gt.distancePointLine(o,r,i),_<d&&(d=_,f=o),_=Gt.distancePointLine(u,r,i),_<d&&(d=_,f=u),f},t}(fn),eu=function(){};eu.prototype.interfaces_=function(){return[]};eu.prototype.getClass=function(){return eu};eu.orientationIndex=function(t,n,r){var i=n.x-t.x,o=n.y-t.y,u=r.x-n.x,f=r.y-n.y;return eu.signOfDet2x2(i,o,u,f)};eu.signOfDet2x2=function(t,n,r,i){var o=null,u=null,f=null;if(o=1,t===0||i===0)return n===0||r===0?0:n>0?r>0?-o:o:r>0?o:-o;if(n===0||r===0)return i>0?t>0?o:-o:t>0?-o:o;if(n>0?i>0?n<=i||(o=-o,u=t,t=r,r=u,u=n,n=i,i=u):n<=-i?(o=-o,r=-r,i=-i):(u=t,t=-r,r=u,u=n,n=-i,i=u):i>0?-n<=i?(o=-o,t=-t,n=-n):(u=-t,t=r,r=u,u=-n,n=i,i=u):n>=i?(t=-t,n=-n,r=-r,i=-i):(o=-o,u=-t,t=-r,r=u,u=-n,n=-i,i=u),t>0)if(r>0){if(!(t<=r))return o}else return o;else{if(r>0)return-o;if(t>=r)o=-o,t=-t,r=-r;else return-o}for(;;){if(f=Math.floor(r/t),r=r-f*t,i=i-f*n,i<0)return-o;if(i>n)return o;if(t>r+r){if(n<i+i)return o}else{if(n>i+i)return-o;r=t-r,i=n-i,o=-o}if(i===0)return r===0?0:-o;if(r===0||(f=Math.floor(t/r),t=t-f*r,n=n-f*i,n<0))return o;if(n>i)return-o;if(r>t+t){if(i<n+n)return-o}else{if(i>n+n)return o;t=r-t,n=i-n,o=-o}if(n===0)return t===0?0:o;if(t===0)return-o}};var Qi=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};Qi.prototype.countSegment=function(t,n){if(t.x<this._p.x&&n.x<this._p.x)return null;if(this._p.x===n.x&&this._p.y===n.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&n.y===this._p.y){var r=t.x,i=n.x;return r>i&&(r=n.x,i=t.x),this._p.x>=r&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&n.y<=this._p.y||n.y>this._p.y&&t.y<=this._p.y){var o=t.x-this._p.x,u=t.y-this._p.y,f=n.x-this._p.x,d=n.y-this._p.y,_=eu.signOfDet2x2(o,u,f,d);if(_===0)return this._isPointOnSegment=!0,null;d<u&&(_=-_),_>0&&this._crossingCount++}};Qi.prototype.isPointInPolygon=function(){return this.getLocation()!==lt.EXTERIOR};Qi.prototype.getLocation=function(){return this._isPointOnSegment?lt.BOUNDARY:this._crossingCount%2===1?lt.INTERIOR:lt.EXTERIOR};Qi.prototype.isOnSegment=function(){return this._isPointOnSegment};Qi.prototype.interfaces_=function(){return[]};Qi.prototype.getClass=function(){return Qi};Qi.locatePointInRing=function(){if(arguments[0]instanceof it&&se(arguments[1],Ne)){for(var t=arguments[0],n=arguments[1],r=new Qi(t),i=new it,o=new it,u=1;u<n.size();u++)if(n.getCoordinate(u,i),n.getCoordinate(u-1,o),r.countSegment(i,o),r.isOnSegment())return r.getLocation();return r.getLocation()}else if(arguments[0]instanceof it&&arguments[1]instanceof Array){for(var f=arguments[0],d=arguments[1],_=new Qi(f),y=1;y<d.length;y++){var E=d[y],S=d[y-1];if(_.countSegment(E,S),_.isOnSegment())return _.getLocation()}return _.getLocation()}};var Gt=function(){},_u={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Gt.prototype.interfaces_=function(){return[]};Gt.prototype.getClass=function(){return Gt};Gt.orientationIndex=function(t,n,r){return Mr.orientationIndex(t,n,r)};Gt.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var n=0,r=t[0].x,i=1;i<t.length-1;i++){var o=t[i].x-r,u=t[i+1].y,f=t[i-1].y;n+=o*(f-u)}return n/2}else if(se(arguments[0],Ne)){var d=arguments[0],_=d.size();if(_<3)return 0;var y=new it,E=new it,S=new it;d.getCoordinate(0,E),d.getCoordinate(1,S);var T=E.x;S.x-=T;for(var I=0,z=1;z<_-1;z++)y.y=E.y,E.x=S.x,E.y=S.y,d.getCoordinate(z+1,S),S.x-=T,I+=E.x*(y.y-S.y);return I/2}};Gt.distanceLineLine=function(t,n,r,i){if(t.equals(n))return Gt.distancePointLine(t,r,i);if(r.equals(i))return Gt.distancePointLine(i,t,n);var o=!1;if(!Jt.intersects(t,n,r,i))o=!0;else{var u=(n.x-t.x)*(i.y-r.y)-(n.y-t.y)*(i.x-r.x);if(u===0)o=!0;else{var f=(t.y-r.y)*(i.x-r.x)-(t.x-r.x)*(i.y-r.y),d=(t.y-r.y)*(n.x-t.x)-(t.x-r.x)*(n.y-t.y),_=d/u,y=f/u;(y<0||y>1||_<0||_>1)&&(o=!0)}}return o?ii.min(Gt.distancePointLine(t,r,i),Gt.distancePointLine(n,r,i),Gt.distancePointLine(r,t,n),Gt.distancePointLine(i,t,n)):0};Gt.isPointInRing=function(t,n){return Gt.locatePointInRing(t,n)!==lt.EXTERIOR};Gt.computeLength=function(t){var n=t.size();if(n<=1)return 0;var r=0,i=new it;t.getCoordinate(0,i);for(var o=i.x,u=i.y,f=1;f<n;f++){t.getCoordinate(f,i);var d=i.x,_=i.y,y=d-o,E=_-u;r+=Math.sqrt(y*y+E*E),o=d,u=_}return r};Gt.isCCW=function(t){var n=t.length-1;if(n<3)throw new cn("Ring has fewer than 4 points, so orientation cannot be determined");for(var r=t[0],i=0,o=1;o<=n;o++){var u=t[o];u.y>r.y&&(r=u,i=o)}var f=i;do f=f-1,f<0&&(f=n);while(t[f].equals2D(r)&&f!==i);var d=i;do d=(d+1)%n;while(t[d].equals2D(r)&&d!==i);var _=t[f],y=t[d];if(_.equals2D(r)||y.equals2D(r)||_.equals2D(y))return!1;var E=Gt.computeOrientation(_,r,y),S=!1;return E===0?S=_.x>y.x:S=E>0,S};Gt.locatePointInRing=function(t,n){return Qi.locatePointInRing(t,n)};Gt.distancePointLinePerpendicular=function(t,n,r){var i=(r.x-n.x)*(r.x-n.x)+(r.y-n.y)*(r.y-n.y),o=((n.y-t.y)*(r.x-n.x)-(n.x-t.x)*(r.y-n.y))/i;return Math.abs(o)*Math.sqrt(i)};Gt.computeOrientation=function(t,n,r){return Gt.orientationIndex(t,n,r)};Gt.distancePointLine=function(){if(arguments.length===2){var t=arguments[0],n=arguments[1];if(n.length===0)throw new cn("Line array must contain at least one vertex");for(var r=t.distance(n[0]),i=0;i<n.length-1;i++){var o=Gt.distancePointLine(t,n[i],n[i+1]);o<r&&(r=o)}return r}else if(arguments.length===3){var u=arguments[0],f=arguments[1],d=arguments[2];if(f.x===d.x&&f.y===d.y)return u.distance(f);var _=(d.x-f.x)*(d.x-f.x)+(d.y-f.y)*(d.y-f.y),y=((u.x-f.x)*(d.x-f.x)+(u.y-f.y)*(d.y-f.y))/_;if(y<=0)return u.distance(f);if(y>=1)return u.distance(d);var E=((f.y-u.y)*(d.x-f.x)-(f.x-u.x)*(d.y-f.y))/_;return Math.abs(E)*Math.sqrt(_)}};Gt.isOnLine=function(t,n){for(var r=new Sa,i=1;i<n.length;i++){var o=n[i-1],u=n[i];if(r.computeIntersection(t,o,u),r.hasIntersection())return!0}return!1};_u.CLOCKWISE.get=function(){return-1};_u.RIGHT.get=function(){return Gt.CLOCKWISE};_u.COUNTERCLOCKWISE.get=function(){return 1};_u.LEFT.get=function(){return Gt.COUNTERCLOCKWISE};_u.COLLINEAR.get=function(){return 0};_u.STRAIGHT.get=function(){return Gt.COLLINEAR};Object.defineProperties(Gt,_u);var oo=function(){};oo.prototype.filter=function(t){};oo.prototype.interfaces_=function(){return[]};oo.prototype.getClass=function(){return oo};var ie=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},Os={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};ie.prototype.isGeometryCollection=function(){return this.getSortIndex()===ie.SORTINDEX_GEOMETRYCOLLECTION};ie.prototype.getFactory=function(){return this._factory};ie.prototype.getGeometryN=function(t){return this};ie.prototype.getArea=function(){return 0};ie.prototype.isRectangle=function(){return!1};ie.prototype.equals=function(){if(arguments[0]instanceof ie){var t=arguments[0];return t===null?!1:this.equalsTopo(t)}else if(arguments[0]instanceof Object){var n=arguments[0];if(!(n instanceof ie))return!1;var r=n;return this.equalsExact(r)}};ie.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)};ie.prototype.geometryChanged=function(){this.apply(ie.geometryChangedFilter)};ie.prototype.geometryChangedAction=function(){this._envelope=null};ie.prototype.equalsNorm=function(t){return t===null?!1:this.norm().equalsExact(t.norm())};ie.prototype.getLength=function(){return 0};ie.prototype.getNumGeometries=function(){return 1};ie.prototype.compareTo=function(){if(arguments.length===1){var t=arguments[0],n=t;return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(t)}else if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.getSortIndex()!==r.getSortIndex()?this.getSortIndex()-r.getSortIndex():this.isEmpty()&&r.isEmpty()?0:this.isEmpty()?-1:r.isEmpty()?1:this.compareToSameClass(r,i)}};ie.prototype.getUserData=function(){return this._userData};ie.prototype.getSRID=function(){return this._SRID};ie.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())};ie.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===ie.SORTINDEX_GEOMETRYCOLLECTION)throw new cn("This method does not support GeometryCollection arguments")};ie.prototype.equal=function(t,n,r){return r===0?t.equals(n):t.distance(n)<=r};ie.prototype.norm=function(){var t=this.copy();return t.normalize(),t};ie.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()};ie.prototype.getEnvelopeInternal=function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new Jt(this._envelope)};ie.prototype.setSRID=function(t){this._SRID=t};ie.prototype.setUserData=function(t){this._userData=t};ie.prototype.compare=function(t,n){for(var r=t.iterator(),i=n.iterator();r.hasNext()&&i.hasNext();){var o=r.next(),u=i.next(),f=o.compareTo(u);if(f!==0)return f}return r.hasNext()?1:i.hasNext()?-1:0};ie.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()};ie.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ie.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ie.SORTINDEX_MULTIPOINT||this.getSortIndex()===ie.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ie.SORTINDEX_MULTIPOLYGON};ie.prototype.interfaces_=function(){return[Lp,vi,Ci]};ie.prototype.getClass=function(){return ie};ie.hasNonEmptyElements=function(t){for(var n=0;n<t.length;n++)if(!t[n].isEmpty())return!0;return!1};ie.hasNullElements=function(t){for(var n=0;n<t.length;n++)if(t[n]===null)return!0;return!1};Os.serialVersionUID.get=function(){return 8763622679187377e3};Os.SORTINDEX_POINT.get=function(){return 0};Os.SORTINDEX_MULTIPOINT.get=function(){return 1};Os.SORTINDEX_LINESTRING.get=function(){return 2};Os.SORTINDEX_LINEARRING.get=function(){return 3};Os.SORTINDEX_MULTILINESTRING.get=function(){return 4};Os.SORTINDEX_POLYGON.get=function(){return 5};Os.SORTINDEX_MULTIPOLYGON.get=function(){return 6};Os.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7};Os.geometryChangedFilter.get=function(){return Qg};Object.defineProperties(ie,Os);var Qg=function(){};Qg.interfaces_=function(){return[oo]};Qg.filter=function(t){t.geometryChangedAction()};var ws=function(){};ws.prototype.filter=function(t){};ws.prototype.interfaces_=function(){return[]};ws.prototype.getClass=function(){return ws};var mi=function(){},ho={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};mi.prototype.isInBoundary=function(t){};mi.prototype.interfaces_=function(){return[]};mi.prototype.getClass=function(){return mi};ho.Mod2BoundaryNodeRule.get=function(){return ll};ho.EndPointBoundaryNodeRule.get=function(){return cl};ho.MultiValentEndPointBoundaryNodeRule.get=function(){return hl};ho.MonoValentEndPointBoundaryNodeRule.get=function(){return fl};ho.MOD2_BOUNDARY_RULE.get=function(){return new ll};ho.ENDPOINT_BOUNDARY_RULE.get=function(){return new cl};ho.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new hl};ho.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new fl};ho.OGC_SFS_BOUNDARY_RULE.get=function(){return mi.MOD2_BOUNDARY_RULE};Object.defineProperties(mi,ho);var ll=function(){};ll.prototype.isInBoundary=function(t){return t%2===1};ll.prototype.interfaces_=function(){return[mi]};ll.prototype.getClass=function(){return ll};var cl=function(){};cl.prototype.isInBoundary=function(t){return t>0};cl.prototype.interfaces_=function(){return[mi]};cl.prototype.getClass=function(){return cl};var hl=function(){};hl.prototype.isInBoundary=function(t){return t>1};hl.prototype.interfaces_=function(){return[mi]};hl.prototype.getClass=function(){return hl};var fl=function(){};fl.prototype.isInBoundary=function(t){return t===1};fl.prototype.interfaces_=function(){return[mi]};fl.prototype.getClass=function(){return fl};var An=function(){};An.prototype.add=function(){};An.prototype.addAll=function(){};An.prototype.isEmpty=function(){};An.prototype.iterator=function(){};An.prototype.size=function(){};An.prototype.toArray=function(){};An.prototype.remove=function(){};function tm(e){this.message=e||""}tm.prototype=new Error;tm.prototype.name="IndexOutOfBoundsException";var Al=function(){};Al.prototype.hasNext=function(){};Al.prototype.next=function(){};Al.prototype.remove=function(){};var Ii=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(){},t.prototype.set=function(){},t.prototype.isEmpty=function(){},t}(An);function kl(e){this.message=e||""}kl.prototype=new Error;kl.prototype.name="NoSuchElementException";var Ft=function(e){function t(){e.call(this),this.array_=[],arguments[0]instanceof An&&this.addAll(arguments[0])}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.ensureCapacity=function(){},t.prototype.interfaces_=function(){return[e,An]},t.prototype.add=function(r){return arguments.length===1?this.array_.push(r):this.array_.splice(arguments[0],arguments[1]),!0},t.prototype.clear=function(){this.array_=[]},t.prototype.addAll=function(r){for(var i=this,o=r.iterator();o.hasNext();)i.add(o.next());return!0},t.prototype.set=function(r,i){var o=this.array_[r];return this.array_[r]=i,o},t.prototype.iterator=function(){return new M4(this)},t.prototype.get=function(r){if(r<0||r>=this.size())throw new tm;return this.array_[r]},t.prototype.isEmpty=function(){return this.array_.length===0},t.prototype.size=function(){return this.array_.length},t.prototype.toArray=function(){for(var r=this,i=[],o=0,u=this.array_.length;o<u;o++)i.push(r.array_[o]);return i},t.prototype.remove=function(r){for(var i=this,o=!1,u=0,f=this.array_.length;u<f;u++)if(i.array_[u]===r){i.array_.splice(u,1),o=!0;break}return o},t}(Ii),M4=function(e){function t(n){e.call(this),this.arrayList_=n,this.position_=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new kl;return this.arrayList_.get(this.position_++)},t.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},t.prototype.set=function(r){return this.arrayList_.set(this.position_-1,r)},t.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},t}(Al),ch=function(e){function t(){if(e.call(this),arguments.length!==0){if(arguments.length===1){var r=arguments[0];this.ensureCapacity(r.length),this.add(r,!0)}else if(arguments.length===2){var i=arguments[0],o=arguments[1];this.ensureCapacity(i.length),this.add(i,o)}}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},t.prototype.getCoordinate=function(i){return this.get(i)},t.prototype.addAll=function(){var i=this;if(arguments.length===2){for(var o=arguments[0],u=arguments[1],f=!1,d=o.iterator();d.hasNext();)i.add(d.next(),u),f=!0;return f}else return e.prototype.addAll.apply(this,arguments)},t.prototype.clone=function(){for(var i=this,o=e.prototype.clone.call(this),u=0;u<this.size();u++)o.add(u,i.get(u).copy());return o},t.prototype.toCoordinateArray=function(){return this.toArray(t.coordArrayType)},t.prototype.add=function(){var i=this;if(arguments.length===1){var o=arguments[0];e.prototype.add.call(this,o)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var u=arguments[0],f=arguments[1];return this.add(u,f,!0),!0}else if(arguments[0]instanceof it&&typeof arguments[1]=="boolean"){var d=arguments[0],_=arguments[1];if(!_&&this.size()>=1){var y=this.get(this.size()-1);if(y.equals2D(d))return null}e.prototype.add.call(this,d)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var E=arguments[0],S=arguments[1];return this.add(E,S),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var T=arguments[0],I=arguments[1],z=arguments[2];if(z)for(var G=0;G<T.length;G++)i.add(T[G],I);else for(var W=T.length-1;W>=0;W--)i.add(T[W],I);return!0}else if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof it){var Q=arguments[0],rt=arguments[1],gt=arguments[2];if(!gt){var xt=this.size();if(xt>0){if(Q>0){var bt=this.get(Q-1);if(bt.equals2D(rt))return null}if(Q<xt){var Dt=this.get(Q);if(Dt.equals2D(rt))return null}}}e.prototype.add.call(this,Q,rt)}}else if(arguments.length===4){var Nt=arguments[0],Ot=arguments[1],te=arguments[2],Ht=arguments[3],ee=1;te>Ht&&(ee=-1);for(var Ae=te;Ae!==Ht;Ae+=ee)i.add(Nt[Ae],Ot);return!0}},t.prototype.closeRing=function(){this.size()>0&&this.add(new it(this.get(0)),!1)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},Object.defineProperties(t,n),t}(Ft),be=function(){},bp={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};bp.ForwardComparator.get=function(){return jc};bp.BidirectionalComparator.get=function(){return pl};bp.coordArrayType.get=function(){return new Array(0).fill(null)};be.prototype.interfaces_=function(){return[]};be.prototype.getClass=function(){return be};be.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))};be.ptNotInList=function(t,n){for(var r=0;r<t.length;r++){var i=t[r];if(be.indexOf(i,n)<0)return i}return null};be.scroll=function(t,n){var r=be.indexOf(n,t);if(r<0)return null;var i=new Array(t.length).fill(null);Yn.arraycopy(t,r,i,0,t.length-r),Yn.arraycopy(t,0,i,t.length-r,r),Yn.arraycopy(i,0,t,0,t.length)};be.equals=function(){if(arguments.length===2){var t=arguments[0],n=arguments[1];if(t===n)return!0;if(t===null||n===null||t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(!t[r].equals(n[r]))return!1;return!0}else if(arguments.length===3){var i=arguments[0],o=arguments[1],u=arguments[2];if(i===o)return!0;if(i===null||o===null||i.length!==o.length)return!1;for(var f=0;f<i.length;f++)if(u.compare(i[f],o[f])!==0)return!1;return!0}};be.intersection=function(t,n){for(var r=new ch,i=0;i<t.length;i++)n.intersects(t[i])&&r.add(t[i],!0);return r.toCoordinateArray()};be.hasRepeatedPoints=function(t){for(var n=1;n<t.length;n++)if(t[n-1].equals(t[n]))return!0;return!1};be.removeRepeatedPoints=function(t){if(!be.hasRepeatedPoints(t))return t;var n=new ch(t,!1);return n.toCoordinateArray()};be.reverse=function(t){for(var n=t.length-1,r=Math.trunc(n/2),i=0;i<=r;i++){var o=t[i];t[i]=t[n-i],t[n-i]=o}};be.removeNull=function(t){for(var n=0,r=0;r<t.length;r++)t[r]!==null&&n++;var i=new Array(n).fill(null);if(n===0)return i;for(var o=0,u=0;u<t.length;u++)t[u]!==null&&(i[o++]=t[u]);return i};be.copyDeep=function(){if(arguments.length===1){for(var t=arguments[0],n=new Array(t.length).fill(null),r=0;r<t.length;r++)n[r]=new it(t[r]);return n}else if(arguments.length===5)for(var i=arguments[0],o=arguments[1],u=arguments[2],f=arguments[3],d=arguments[4],_=0;_<d;_++)u[f+_]=new it(i[o+_])};be.isEqualReversed=function(t,n){for(var r=0;r<t.length;r++){var i=t[r],o=n[t.length-r-1];if(i.compareTo(o)!==0)return!1}return!0};be.envelope=function(t){for(var n=new Jt,r=0;r<t.length;r++)n.expandToInclude(t[r]);return n};be.toCoordinateArray=function(t){return t.toArray(be.coordArrayType)};be.atLeastNCoordinatesOrNothing=function(t,n){return n.length>=t?n:[]};be.indexOf=function(t,n){for(var r=0;r<n.length;r++)if(t.equals(n[r]))return r;return-1};be.increasingDirection=function(t){for(var n=0;n<Math.trunc(t.length/2);n++){var r=t.length-1-n,i=t[n].compareTo(t[r]);if(i!==0)return i}return 1};be.compare=function(t,n){for(var r=0;r<t.length&&r<n.length;){var i=t[r].compareTo(n[r]);if(i!==0)return i;r++}return r<n.length?-1:r<t.length?1:0};be.minCoordinate=function(t){for(var n=null,r=0;r<t.length;r++)(n===null||n.compareTo(t[r])>0)&&(n=t[r]);return n};be.extract=function(t,n,r){n=ii.clamp(n,0,t.length),r=ii.clamp(r,-1,t.length);var i=r-n+1;r<0&&(i=0),n>=t.length&&(i=0),r<n&&(i=0);var o=new Array(i).fill(null);if(i===0)return o;for(var u=0,f=n;f<=r;f++)o[u++]=t[f];return o};Object.defineProperties(be,bp);var jc=function(){};jc.prototype.compare=function(t,n){var r=t,i=n;return be.compare(r,i)};jc.prototype.interfaces_=function(){return[al]};jc.prototype.getClass=function(){return jc};var pl=function(){};pl.prototype.compare=function(t,n){var r=t,i=n;if(r.length<i.length)return-1;if(r.length>i.length)return 1;if(r.length===0)return 0;var o=be.compare(r,i),u=be.isEqualReversed(r,i);return u?0:o};pl.prototype.OLDcompare=function(t,n){var r=t,i=n;if(r.length<i.length)return-1;if(r.length>i.length)return 1;if(r.length===0)return 0;for(var o=be.increasingDirection(r),u=be.increasingDirection(i),f=o>0?0:r.length-1,d=u>0?0:r.length-1,_=0;_<r.length;_++){var y=r[f].compareTo(i[d]);if(y!==0)return y;f+=o,d+=u}return 0};pl.prototype.interfaces_=function(){return[al]};pl.prototype.getClass=function(){return pl};var yu=function(){};yu.prototype.get=function(){};yu.prototype.put=function(){};yu.prototype.size=function(){};yu.prototype.values=function(){};yu.prototype.entrySet=function(){};var P4=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(yu);function hh(e){this.message=e||""}hh.prototype=new Error;hh.prototype.name="OperationNotSupported";function wp(){}wp.prototype=new An;wp.prototype.contains=function(){};var em=function(e){function t(){e.call(this),this.array_=[],arguments[0]instanceof An&&this.addAll(arguments[0])}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.contains=function(r){for(var i=this,o=0,u=this.array_.length;o<u;o++){var f=i.array_[o];if(f===r)return!0}return!1},t.prototype.add=function(r){return this.contains(r)?!1:(this.array_.push(r),!0)},t.prototype.addAll=function(r){for(var i=this,o=r.iterator();o.hasNext();)i.add(o.next());return!0},t.prototype.remove=function(r){throw new Error},t.prototype.size=function(){return this.array_.length},t.prototype.isEmpty=function(){return this.array_.length===0},t.prototype.toArray=function(){for(var r=this,i=[],o=0,u=this.array_.length;o<u;o++)i.push(r.array_[o]);return i},t.prototype.iterator=function(){return new I4(this)},t}(wp),I4=function(e){function t(n){e.call(this),this.hashSet_=n,this.position_=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new kl;return this.hashSet_.array_[this.position_++]},t.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},t.prototype.remove=function(){throw new hh},t}(Al),Js=0,na=1;function K_(e){return e===null?Js:e.color}function $e(e){return e===null?null:e.parent}function Zs(e,t){e!==null&&(e.color=t)}function Wd(e){return e===null?null:e.left}function X_(e){return e===null?null:e.right}function sr(){this.root_=null,this.size_=0}sr.prototype=new P4;sr.prototype.get=function(e){for(var t=this.root_;t!==null;){var n=e.compareTo(t.key);if(n<0)t=t.left;else if(n>0)t=t.right;else return t.value}return null};sr.prototype.put=function(e,t){if(this.root_===null)return this.root_={key:e,value:t,left:null,right:null,parent:null,color:Js,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n=this.root_,r,i;do if(r=n,i=e.compareTo(n.key),i<0)n=n.left;else if(i>0)n=n.right;else{var o=n.value;return n.value=t,o}while(n!==null);var u={key:e,left:null,right:null,value:t,parent:r,color:Js,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?r.left=u:r.right=u,this.fixAfterInsertion(u),this.size_++,null};sr.prototype.fixAfterInsertion=function(e){var t=this;for(e.color=na;e!=null&&e!==this.root_&&e.parent.color===na;)if($e(e)===Wd($e($e(e)))){var n=X_($e($e(e)));K_(n)===na?(Zs($e(e),Js),Zs(n,Js),Zs($e($e(e)),na),e=$e($e(e))):(e===X_($e(e))&&(e=$e(e),t.rotateLeft(e)),Zs($e(e),Js),Zs($e($e(e)),na),t.rotateRight($e($e(e))))}else{var r=Wd($e($e(e)));K_(r)===na?(Zs($e(e),Js),Zs(r,Js),Zs($e($e(e)),na),e=$e($e(e))):(e===Wd($e(e))&&(e=$e(e),t.rotateRight(e)),Zs($e(e),Js),Zs($e($e(e)),na),t.rotateLeft($e($e(e))))}this.root_.color=Js};sr.prototype.values=function(){var e=new Ft,t=this.getFirstEntry();if(t!==null)for(e.add(t.value);(t=sr.successor(t))!==null;)e.add(t.value);return e};sr.prototype.entrySet=function(){var e=new em,t=this.getFirstEntry();if(t!==null)for(e.add(t);(t=sr.successor(t))!==null;)e.add(t);return e};sr.prototype.rotateLeft=function(e){if(e!=null){var t=e.right;e.right=t.left,t.left!=null&&(t.left.parent=e),t.parent=e.parent,e.parent===null?this.root_=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}};sr.prototype.rotateRight=function(e){if(e!=null){var t=e.left;e.left=t.right,t.right!=null&&(t.right.parent=e),t.parent=e.parent,e.parent===null?this.root_=t:e.parent.right===e?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}};sr.prototype.getFirstEntry=function(){var e=this.root_;if(e!=null)for(;e.left!=null;)e=e.left;return e};sr.successor=function(e){if(e===null)return null;if(e.right!==null){for(var t=e.right;t.left!==null;)t=t.left;return t}else{for(var n=e.parent,r=e;n!==null&&r===n.right;)r=n,n=n.parent;return n}};sr.prototype.size=function(){return this.size_};var qc=function(){};qc.prototype.interfaces_=function(){return[]};qc.prototype.getClass=function(){return qc};function Mv(){}Mv.prototype=new wp;function ns(){this.array_=[],arguments[0]instanceof An&&this.addAll(arguments[0])}ns.prototype=new Mv;ns.prototype.contains=function(e){for(var t=this,n=0,r=this.array_.length;n<r;n++){var i=t.array_[n];if(i.compareTo(e)===0)return!0}return!1};ns.prototype.add=function(e){var t=this;if(this.contains(e))return!1;for(var n=0,r=this.array_.length;n<r;n++){var i=t.array_[n];if(i.compareTo(e)===1)return t.array_.splice(n,0,e),!0}return this.array_.push(e),!0};ns.prototype.addAll=function(e){for(var t=this,n=e.iterator();n.hasNext();)t.add(n.next());return!0};ns.prototype.remove=function(e){throw new hh};ns.prototype.size=function(){return this.array_.length};ns.prototype.isEmpty=function(){return this.array_.length===0};ns.prototype.toArray=function(){for(var e=this,t=[],n=0,r=this.array_.length;n<r;n++)t.push(e.array_[n]);return t};ns.prototype.iterator=function(){return new Sp(this)};var Sp=function(e){this.treeSet_=e,this.position_=0};Sp.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new kl;return this.treeSet_.array_[this.position_++]};Sp.prototype.hasNext=function(){return this.position_<this.treeSet_.size()};Sp.prototype.remove=function(){throw new hh};var fa=function(){};fa.sort=function(){var t=arguments[0],n,r,i,o;if(arguments.length===1)o=function(f,d){return f.compareTo(d)},t.sort(o);else if(arguments.length===2)i=arguments[1],o=function(f,d){return i.compare(f,d)},t.sort(o);else if(arguments.length===3){r=t.slice(arguments[1],arguments[2]),r.sort();var u=t.slice(0,arguments[1]).concat(r,t.slice(arguments[2],t.length));for(t.splice(0,t.length),n=0;n<u.length;n++)t.push(u[n])}else if(arguments.length===4)for(r=t.slice(arguments[1],arguments[2]),i=arguments[3],o=function(f,d){return i.compare(f,d)},r.sort(o),u=t.slice(0,arguments[1]).concat(r,t.slice(arguments[2],t.length)),t.splice(0,t.length),n=0;n<u.length;n++)t.push(u[n])};fa.asList=function(t){for(var n=new Ft,r=0,i=t.length;r<i;r++)n.add(t[r]);return n};var Re=function(){},Fi={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Fi.P.get=function(){return 0};Fi.L.get=function(){return 1};Fi.A.get=function(){return 2};Fi.FALSE.get=function(){return-1};Fi.TRUE.get=function(){return-2};Fi.DONTCARE.get=function(){return-3};Fi.SYM_FALSE.get=function(){return"F"};Fi.SYM_TRUE.get=function(){return"T"};Fi.SYM_DONTCARE.get=function(){return"*"};Fi.SYM_P.get=function(){return"0"};Fi.SYM_L.get=function(){return"1"};Fi.SYM_A.get=function(){return"2"};Re.prototype.interfaces_=function(){return[]};Re.prototype.getClass=function(){return Re};Re.toDimensionSymbol=function(t){switch(t){case Re.FALSE:return Re.SYM_FALSE;case Re.TRUE:return Re.SYM_TRUE;case Re.DONTCARE:return Re.SYM_DONTCARE;case Re.P:return Re.SYM_P;case Re.L:return Re.SYM_L;case Re.A:return Re.SYM_A}throw new cn("Unknown dimension value: "+t)};Re.toDimensionValue=function(t){switch(Vc.toUpperCase(t)){case Re.SYM_FALSE:return Re.FALSE;case Re.SYM_TRUE:return Re.TRUE;case Re.SYM_DONTCARE:return Re.DONTCARE;case Re.SYM_P:return Re.P;case Re.SYM_L:return Re.L;case Re.SYM_A:return Re.A}throw new cn("Unknown dimension symbol: "+t)};Object.defineProperties(Re,Fi);var rs=function(){};rs.prototype.filter=function(t){};rs.prototype.interfaces_=function(){return[]};rs.prototype.getClass=function(){return rs};var Ai=function(){};Ai.prototype.filter=function(t,n){};Ai.prototype.isDone=function(){};Ai.prototype.isGeometryChanged=function(){};Ai.prototype.interfaces_=function(){return[]};Ai.prototype.getClass=function(){return Ai};var yr=function(e){function t(r,i){if(e.call(this,i),this._geometries=r||[],e.hasNullElements(this._geometries))throw new cn("geometries must not contain null elements")}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){for(var i=this,o=new Jt,u=0;u<this._geometries.length;u++)o.expandToInclude(i._geometries[u].getEnvelopeInternal());return o},t.prototype.getGeometryN=function(i){return this._geometries[i]},t.prototype.getSortIndex=function(){return e.SORTINDEX_GEOMETRYCOLLECTION},t.prototype.getCoordinates=function(){for(var i=this,o=new Array(this.getNumPoints()).fill(null),u=-1,f=0;f<this._geometries.length;f++)for(var d=i._geometries[f].getCoordinates(),_=0;_<d.length;_++)u++,o[u]=d[_];return o},t.prototype.getArea=function(){for(var i=this,o=0,u=0;u<this._geometries.length;u++)o+=i._geometries[u].getArea();return o},t.prototype.equalsExact=function(){var i=this;if(arguments.length===2){var o=arguments[0],u=arguments[1];if(!this.isEquivalentClass(o))return!1;var f=o;if(this._geometries.length!==f._geometries.length)return!1;for(var d=0;d<this._geometries.length;d++)if(!i._geometries[d].equalsExact(f._geometries[d],u))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var i=this,o=0;o<this._geometries.length;o++)i._geometries[o].normalize();fa.sort(this._geometries)},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},t.prototype.getBoundaryDimension=function(){for(var i=this,o=Re.FALSE,u=0;u<this._geometries.length;u++)o=Math.max(o,i._geometries[u].getBoundaryDimension());return o},t.prototype.getDimension=function(){for(var i=this,o=Re.FALSE,u=0;u<this._geometries.length;u++)o=Math.max(o,i._geometries[u].getDimension());return o},t.prototype.getLength=function(){for(var i=this,o=0,u=0;u<this._geometries.length;u++)o+=i._geometries[u].getLength();return o},t.prototype.getNumPoints=function(){for(var i=this,o=0,u=0;u<this._geometries.length;u++)o+=i._geometries[u].getNumPoints();return o},t.prototype.getNumGeometries=function(){return this._geometries.length},t.prototype.reverse=function(){for(var i=this,o=this._geometries.length,u=new Array(o).fill(null),f=0;f<this._geometries.length;f++)u[f]=i._geometries[f].reverse();return this.getFactory().createGeometryCollection(u)},t.prototype.compareToSameClass=function(){var i=this;if(arguments.length===1){var o=arguments[0],u=new ns(fa.asList(this._geometries)),f=new ns(fa.asList(o._geometries));return this.compare(u,f)}else if(arguments.length===2){for(var d=arguments[0],_=arguments[1],y=d,E=this.getNumGeometries(),S=y.getNumGeometries(),T=0;T<E&&T<S;){var I=i.getGeometryN(T),z=y.getGeometryN(T),G=I.compareToSameClass(z,_);if(G!==0)return G;T++}return T<E?1:T<S?-1:0}},t.prototype.apply=function(){var i=this;if(se(arguments[0],ws))for(var o=arguments[0],u=0;u<this._geometries.length;u++)i._geometries[u].apply(o);else if(se(arguments[0],Ai)){var f=arguments[0];if(this._geometries.length===0)return null;for(var d=0;d<this._geometries.length&&(i._geometries[d].apply(f),!f.isDone());d++);f.isGeometryChanged()&&this.geometryChanged()}else if(se(arguments[0],rs)){var _=arguments[0];_.filter(this);for(var y=0;y<this._geometries.length;y++)i._geometries[y].apply(_)}else if(se(arguments[0],oo)){var E=arguments[0];E.filter(this);for(var S=0;S<this._geometries.length;S++)i._geometries[S].apply(E)}},t.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),me.shouldNeverReachHere(),null},t.prototype.clone=function(){var i=this,o=e.prototype.clone.call(this);o._geometries=new Array(this._geometries.length).fill(null);for(var u=0;u<this._geometries.length;u++)o._geometries[u]=i._geometries[u].clone();return o},t.prototype.getGeometryType=function(){return"GeometryCollection"},t.prototype.copy=function(){for(var i=this,o=new Array(this._geometries.length).fill(null),u=0;u<o.length;u++)o[u]=i._geometries[u].copy();return new t(o,this._factory)},t.prototype.isEmpty=function(){for(var i=this,o=0;o<this._geometries.length;o++)if(!i._geometries[o].isEmpty())return!1;return!0},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-5694727726395021e3},Object.defineProperties(t,n),t}(ie),ga=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return ie.SORTINDEX_MULTILINESTRING},t.prototype.equalsExact=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return this.isEquivalentClass(i)?e.prototype.equalsExact.call(this,i,o):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?Re.FALSE:0},t.prototype.isClosed=function(){var i=this;if(this.isEmpty())return!1;for(var o=0;o<this._geometries.length;o++)if(!i._geometries[o].isClosed())return!1;return!0},t.prototype.getDimension=function(){return 1},t.prototype.reverse=function(){for(var i=this,o=this._geometries.length,u=new Array(o).fill(null),f=0;f<this._geometries.length;f++)u[o-1-f]=i._geometries[f].reverse();return this.getFactory().createMultiLineString(u)},t.prototype.getBoundary=function(){return new pi(this).getBoundary()},t.prototype.getGeometryType=function(){return"MultiLineString"},t.prototype.copy=function(){for(var i=this,o=new Array(this._geometries.length).fill(null),u=0;u<o.length;u++)o[u]=i._geometries[u].copy();return new t(o,this._factory)},t.prototype.interfaces_=function(){return[qc]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 8166665132445434e3},Object.defineProperties(t,n),t}(yr),pi=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,arguments.length===1){var t=arguments[0],n=mi.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=n}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this._geom=r,this._geomFact=r.getFactory(),this._bnRule=i}};pi.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var n=this.computeBoundaryCoordinates(t);return n.length===1?this._geomFact.createPoint(n[0]):this._geomFact.createMultiPointFromCoords(n)};pi.prototype.getBoundary=function(){return this._geom instanceof _n?this.boundaryLineString(this._geom):this._geom instanceof ga?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()};pi.prototype.boundaryLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();if(t.isClosed()){var n=this._bnRule.isInBoundary(2);return n?t.getStartPoint():this._geomFact.createMultiPoint()}return this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])};pi.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()};pi.prototype.computeBoundaryCoordinates=function(t){var n=this,r=new Ft;this._endpointMap=new sr;for(var i=0;i<t.getNumGeometries();i++){var o=t.getGeometryN(i);o.getNumPoints()!==0&&(n.addEndpoint(o.getCoordinateN(0)),n.addEndpoint(o.getCoordinateN(o.getNumPoints()-1)))}for(var u=this._endpointMap.entrySet().iterator();u.hasNext();){var f=u.next(),d=f.getValue(),_=d.count;n._bnRule.isInBoundary(_)&&r.add(f.getKey())}return be.toCoordinateArray(r)};pi.prototype.addEndpoint=function(t){var n=this._endpointMap.get(t);n===null&&(n=new Hf,this._endpointMap.put(t,n)),n.count++};pi.prototype.interfaces_=function(){return[]};pi.prototype.getClass=function(){return pi};pi.getBoundary=function(){if(arguments.length===1){var t=arguments[0],n=new pi(t);return n.getBoundary()}else if(arguments.length===2){var r=arguments[0],i=arguments[1],o=new pi(r,i);return o.getBoundary()}};var Hf=function(){this.count=null};Hf.prototype.interfaces_=function(){return[]};Hf.prototype.getClass=function(){return Hf};function T4(){}function A4(){}var k4=function(){};function D4(){}function N4(){}function O4(){}var di=function(){},nm={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};di.prototype.interfaces_=function(){return[]};di.prototype.getClass=function(){return di};di.chars=function(t,n){for(var r=new Array(n).fill(null),i=0;i<n;i++)r[i]=t;return String(r)};di.getStackTrace=function(){if(arguments.length===1){var t=arguments[0],n=new D4,r=new T4;return t.printStackTrace(r),n.toString()}else if(arguments.length===2){var i=arguments[0],o=arguments[1],u="";new A4(di.getStackTrace(i));for(var f=new O4,d=0;d<o;d++)try{u+=f.readLine()+di.NEWLINE}catch(_){if(_ instanceof N4)me.shouldNeverReachHere();else throw _}finally{}return u}};di.split=function(t,n){for(var r=n.length,i=new Ft,o=""+t,u=o.indexOf(n);u>=0;){var f=o.substring(0,u);i.add(f),o=o.substring(u+r),u=o.indexOf(n)}o.length>0&&i.add(o);for(var d=new Array(i.size()).fill(null),_=0;_<d.length;_++)d[_]=i.get(_);return d};di.toString=function(){if(arguments.length===1){var t=arguments[0];return di.SIMPLE_ORDINATE_FORMAT.format(t)}};di.spaces=function(t){return di.chars(" ",t)};nm.NEWLINE.get=function(){return Yn.getProperty("line.separator")};nm.SIMPLE_ORDINATE_FORMAT.get=function(){return new k4};Object.defineProperties(di,nm);var Ln=function(){};Ln.prototype.interfaces_=function(){return[]};Ln.prototype.getClass=function(){return Ln};Ln.copyCoord=function(t,n,r,i){for(var o=Math.min(t.getDimension(),r.getDimension()),u=0;u<o;u++)r.setOrdinate(i,u,t.getOrdinate(n,u))};Ln.isRing=function(t){var n=t.size();return n===0?!0:n<=3?!1:t.getOrdinate(0,Ne.X)===t.getOrdinate(n-1,Ne.X)&&t.getOrdinate(0,Ne.Y)===t.getOrdinate(n-1,Ne.Y)};Ln.isEqual=function(t,n){var r=t.size(),i=n.size();if(r!==i)return!1;for(var o=Math.min(t.getDimension(),n.getDimension()),u=0;u<r;u++)for(var f=0;f<o;f++){var d=t.getOrdinate(u,f),_=n.getOrdinate(u,f);if(t.getOrdinate(u,f)!==n.getOrdinate(u,f)&&!(ue.isNaN(d)&&ue.isNaN(_)))return!1}return!0};Ln.extend=function(t,n,r){var i=t.create(r,n.getDimension()),o=n.size();if(Ln.copy(n,0,i,0,o),o>0)for(var u=o;u<r;u++)Ln.copy(n,o-1,i,u,1);return i};Ln.reverse=function(t){for(var n=t.size()-1,r=Math.trunc(n/2),i=0;i<=r;i++)Ln.swap(t,i,n-i)};Ln.swap=function(t,n,r){if(n===r)return null;for(var i=0;i<t.getDimension();i++){var o=t.getOrdinate(n,i);t.setOrdinate(n,i,t.getOrdinate(r,i)),t.setOrdinate(r,i,o)}};Ln.copy=function(t,n,r,i,o){for(var u=0;u<o;u++)Ln.copyCoord(t,n+u,r,i+u)};Ln.toString=function(){if(arguments.length===1){var t=arguments[0],n=t.size();if(n===0)return"()";var r=t.getDimension(),i=new hs;i.append("(");for(var o=0;o<n;o++){o>0&&i.append(" ");for(var u=0;u<r;u++)u>0&&i.append(","),i.append(di.toString(t.getOrdinate(o,u)))}return i.append(")"),i.toString()}};Ln.ensureValidRing=function(t,n){var r=n.size();if(r===0)return n;if(r<=3)return Ln.createClosedRing(t,n,4);var i=n.getOrdinate(0,Ne.X)===n.getOrdinate(r-1,Ne.X)&&n.getOrdinate(0,Ne.Y)===n.getOrdinate(r-1,Ne.Y);return i?n:Ln.createClosedRing(t,n,r+1)};Ln.createClosedRing=function(t,n,r){var i=t.create(r,n.getDimension()),o=n.size();Ln.copy(n,0,i,0,o);for(var u=o;u<r;u++)Ln.copy(n,0,i,u,1);return i};var _n=function(e){function t(r,i){e.call(this,i),this._points=null,this.init(r)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Jt:this._points.expandEnvelope(new Jt)},t.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},t.prototype.getSortIndex=function(){return e.SORTINDEX_LINESTRING},t.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},t.prototype.equalsExact=function(){var i=this;if(arguments.length===2){var o=arguments[0],u=arguments[1];if(!this.isEquivalentClass(o))return!1;var f=o;if(this._points.size()!==f._points.size())return!1;for(var d=0;d<this._points.size();d++)if(!i.equal(i._points.getCoordinate(d),f._points.getCoordinate(d),u))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var i=this,o=0;o<Math.trunc(this._points.size()/2);o++){var u=i._points.size()-1-o;if(!i._points.getCoordinate(o).equals(i._points.getCoordinate(u)))return i._points.getCoordinate(o).compareTo(i._points.getCoordinate(u))>0&&Ln.reverse(i._points),null}},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?Re.FALSE:0},t.prototype.isClosed=function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},t.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},t.prototype.getDimension=function(){return 1},t.prototype.getLength=function(){return Gt.computeLength(this._points)},t.prototype.getNumPoints=function(){return this._points.size()},t.prototype.reverse=function(){var i=this._points.copy();Ln.reverse(i);var o=this.getFactory().createLineString(i);return o},t.prototype.compareToSameClass=function(){var i=this;if(arguments.length===1){for(var o=arguments[0],u=o,f=0,d=0;f<this._points.size()&&d<u._points.size();){var _=i._points.getCoordinate(f).compareTo(u._points.getCoordinate(d));if(_!==0)return _;f++,d++}return f<this._points.size()?1:d<u._points.size()?-1:0}else if(arguments.length===2){var y=arguments[0],E=arguments[1],S=y;return E.compare(this._points,S._points)}},t.prototype.apply=function(){var i=this;if(se(arguments[0],ws))for(var o=arguments[0],u=0;u<this._points.size();u++)o.filter(i._points.getCoordinate(u));else if(se(arguments[0],Ai)){var f=arguments[0];if(this._points.size()===0)return null;for(var d=0;d<this._points.size()&&(f.filter(i._points,d),!f.isDone());d++);f.isGeometryChanged()&&this.geometryChanged()}else if(se(arguments[0],rs)){var _=arguments[0];_.filter(this)}else if(se(arguments[0],oo)){var y=arguments[0];y.filter(this)}},t.prototype.getBoundary=function(){return new pi(this).getBoundary()},t.prototype.isEquivalentClass=function(i){return i instanceof t},t.prototype.clone=function(){var i=e.prototype.clone.call(this);return i._points=this._points.clone(),i},t.prototype.getCoordinateN=function(i){return this._points.getCoordinate(i)},t.prototype.getGeometryType=function(){return"LineString"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._points},t.prototype.isEmpty=function(){return this._points.size()===0},t.prototype.init=function(i){if(i===null&&(i=this.getFactory().getCoordinateSequenceFactory().create([])),i.size()===1)throw new cn("Invalid number of points in LineString (found "+i.size()+" - must be 0 or >= 2)");this._points=i},t.prototype.isCoordinate=function(i){for(var o=this,u=0;u<this._points.size();u++)if(o._points.getCoordinate(u).equals(i))return!0;return!1},t.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},t.prototype.getPointN=function(i){return this.getFactory().createPoint(this._points.getCoordinate(i))},t.prototype.interfaces_=function(){return[qc]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(t,n),t}(ie),Hc=function(){};Hc.prototype.interfaces_=function(){return[]};Hc.prototype.getClass=function(){return Hc};var jr=function(e){function t(r,i){e.call(this,i),this._coordinates=r||null,this.init(this._coordinates)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Jt;var i=new Jt;return i.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),i},t.prototype.getSortIndex=function(){return e.SORTINDEX_POINT},t.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},t.prototype.equalsExact=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return this.isEquivalentClass(i)?this.isEmpty()&&i.isEmpty()?!0:this.isEmpty()!==i.isEmpty()?!1:this.equal(i.getCoordinate(),this.getCoordinate(),o):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){},t.prototype.getCoordinate=function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null},t.prototype.getBoundaryDimension=function(){return Re.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getNumPoints=function(){return this.isEmpty()?0:1},t.prototype.reverse=function(){return this.copy()},t.prototype.getX=function(){if(this.getCoordinate()===null)throw new Error("getX called on empty Point");return this.getCoordinate().x},t.prototype.compareToSameClass=function(){if(arguments.length===1){var i=arguments[0],o=i;return this.getCoordinate().compareTo(o.getCoordinate())}else if(arguments.length===2){var u=arguments[0],f=arguments[1],d=u;return f.compare(this._coordinates,d._coordinates)}},t.prototype.apply=function(){if(se(arguments[0],ws)){var i=arguments[0];if(this.isEmpty())return null;i.filter(this.getCoordinate())}else if(se(arguments[0],Ai)){var o=arguments[0];if(this.isEmpty())return null;o.filter(this._coordinates,0),o.isGeometryChanged()&&this.geometryChanged()}else if(se(arguments[0],rs)){var u=arguments[0];u.filter(this)}else if(se(arguments[0],oo)){var f=arguments[0];f.filter(this)}},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.clone=function(){var i=e.prototype.clone.call(this);return i._coordinates=this._coordinates.clone(),i},t.prototype.getGeometryType=function(){return"Point"},t.prototype.copy=function(){return new t(this._coordinates.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._coordinates},t.prototype.getY=function(){if(this.getCoordinate()===null)throw new Error("getY called on empty Point");return this.getCoordinate().y},t.prototype.isEmpty=function(){return this._coordinates.size()===0},t.prototype.init=function(i){i===null&&(i=this.getFactory().getCoordinateSequenceFactory().create([])),me.isTrue(i.size()<=1),this._coordinates=i},t.prototype.isSimple=function(){return!0},t.prototype.interfaces_=function(){return[Hc]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 4902022702746615e3},Object.defineProperties(t,n),t}(ie),No=function(){};No.prototype.interfaces_=function(){return[]};No.prototype.getClass=function(){return No};var On=function(e){function t(r,i,o){if(e.call(this,o),this._shell=null,this._holes=null,r===null&&(r=this.getFactory().createLinearRing()),i===null&&(i=[]),e.hasNullElements(i))throw new cn("holes must not contain null elements");if(r.isEmpty()&&e.hasNonEmptyElements(i))throw new cn("shell is empty but holes are not");this._shell=r,this._holes=i}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},t.prototype.getSortIndex=function(){return e.SORTINDEX_POLYGON},t.prototype.getCoordinates=function(){var i=this;if(this.isEmpty())return[];for(var o=new Array(this.getNumPoints()).fill(null),u=-1,f=this._shell.getCoordinates(),d=0;d<f.length;d++)u++,o[u]=f[d];for(var _=0;_<this._holes.length;_++)for(var y=i._holes[_].getCoordinates(),E=0;E<y.length;E++)u++,o[u]=y[E];return o},t.prototype.getArea=function(){var i=this,o=0;o+=Math.abs(Gt.signedArea(this._shell.getCoordinateSequence()));for(var u=0;u<this._holes.length;u++)o-=Math.abs(Gt.signedArea(i._holes[u].getCoordinateSequence()));return o},t.prototype.isRectangle=function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var i=this._shell.getCoordinateSequence(),o=this.getEnvelopeInternal(),u=0;u<5;u++){var f=i.getX(u);if(!(f===o.getMinX()||f===o.getMaxX()))return!1;var d=i.getY(u);if(!(d===o.getMinY()||d===o.getMaxY()))return!1}for(var _=i.getX(0),y=i.getY(0),E=1;E<=4;E++){var S=i.getX(E),T=i.getY(E),I=S!==_,z=T!==y;if(I===z)return!1;_=S,y=T}return!0},t.prototype.equalsExact=function(){var i=this;if(arguments.length===2){var o=arguments[0],u=arguments[1];if(!this.isEquivalentClass(o))return!1;var f=o,d=this._shell,_=f._shell;if(!d.equalsExact(_,u)||this._holes.length!==f._holes.length)return!1;for(var y=0;y<this._holes.length;y++)if(!i._holes[y].equalsExact(f._holes[y],u))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){var i=this;if(arguments.length===0){this.normalize(this._shell,!0);for(var o=0;o<this._holes.length;o++)i.normalize(i._holes[o],!1);fa.sort(this._holes)}else if(arguments.length===2){var u=arguments[0],f=arguments[1];if(u.isEmpty())return null;var d=new Array(u.getCoordinates().length-1).fill(null);Yn.arraycopy(u.getCoordinates(),0,d,0,d.length);var _=be.minCoordinate(u.getCoordinates());be.scroll(d,_),Yn.arraycopy(d,0,u.getCoordinates(),0,d.length),u.getCoordinates()[d.length]=d[0],Gt.isCCW(u.getCoordinates())===f&&be.reverse(u.getCoordinates())}},t.prototype.getCoordinate=function(){return this._shell.getCoordinate()},t.prototype.getNumInteriorRing=function(){return this._holes.length},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.getLength=function(){var i=this,o=0;o+=this._shell.getLength();for(var u=0;u<this._holes.length;u++)o+=i._holes[u].getLength();return o},t.prototype.getNumPoints=function(){for(var i=this,o=this._shell.getNumPoints(),u=0;u<this._holes.length;u++)o+=i._holes[u].getNumPoints();return o},t.prototype.reverse=function(){var i=this,o=this.copy();o._shell=this._shell.copy().reverse(),o._holes=new Array(this._holes.length).fill(null);for(var u=0;u<this._holes.length;u++)o._holes[u]=i._holes[u].copy().reverse();return o},t.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},t.prototype.compareToSameClass=function(){var i=this;if(arguments.length===1){var o=arguments[0],u=this._shell,f=o._shell;return u.compareToSameClass(f)}else if(arguments.length===2){var d=arguments[0],_=arguments[1],y=d,E=this._shell,S=y._shell,T=E.compareToSameClass(S,_);if(T!==0)return T;for(var I=this.getNumInteriorRing(),z=y.getNumInteriorRing(),G=0;G<I&&G<z;){var W=i.getInteriorRingN(G),Q=y.getInteriorRingN(G),rt=W.compareToSameClass(Q,_);if(rt!==0)return rt;G++}return G<I?1:G<z?-1:0}},t.prototype.apply=function(i){var o=this;if(se(i,ws)){this._shell.apply(i);for(var u=0;u<this._holes.length;u++)o._holes[u].apply(i)}else if(se(i,Ai)){if(this._shell.apply(i),!i.isDone())for(var f=0;f<this._holes.length&&(o._holes[f].apply(i),!i.isDone());f++);i.isGeometryChanged()&&this.geometryChanged()}else if(se(i,rs))i.filter(this);else if(se(i,oo)){i.filter(this),this._shell.apply(i);for(var d=0;d<this._holes.length;d++)o._holes[d].apply(i)}},t.prototype.getBoundary=function(){var i=this;if(this.isEmpty())return this.getFactory().createMultiLineString();var o=new Array(this._holes.length+1).fill(null);o[0]=this._shell;for(var u=0;u<this._holes.length;u++)o[u+1]=i._holes[u];return o.length<=1?this.getFactory().createLinearRing(o[0].getCoordinateSequence()):this.getFactory().createMultiLineString(o)},t.prototype.clone=function(){var i=this,o=e.prototype.clone.call(this);o._shell=this._shell.clone(),o._holes=new Array(this._holes.length).fill(null);for(var u=0;u<this._holes.length;u++)o._holes[u]=i._holes[u].clone();return o},t.prototype.getGeometryType=function(){return"Polygon"},t.prototype.copy=function(){for(var i=this,o=this._shell.copy(),u=new Array(this._holes.length).fill(null),f=0;f<u.length;f++)u[f]=i._holes[f].copy();return new t(o,u,this._factory)},t.prototype.getExteriorRing=function(){return this._shell},t.prototype.isEmpty=function(){return this._shell.isEmpty()},t.prototype.getInteriorRingN=function(i){return this._holes[i]},t.prototype.interfaces_=function(){return[No]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(t,n),t}(ie),dl=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return ie.SORTINDEX_MULTIPOINT},t.prototype.isValid=function(){return!0},t.prototype.equalsExact=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return this.isEquivalentClass(i)?e.prototype.equalsExact.call(this,i,o):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getCoordinate=function(){if(arguments.length===1){var i=arguments[0];return this._geometries[i].getCoordinate()}else return e.prototype.getCoordinate.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return Re.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.getGeometryType=function(){return"MultiPoint"},t.prototype.copy=function(){for(var i=this,o=new Array(this._geometries.length).fill(null),u=0;u<o.length;u++)o[u]=i._geometries[u].copy();return new t(o,this._factory)},t.prototype.interfaces_=function(){return[Hc]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-8048474874175356e3},Object.defineProperties(t,n),t}(yr),Ss=function(e){function t(r,i){r instanceof it&&i instanceof xe&&(r=i.getCoordinateSequenceFactory().create(r)),e.call(this,r,i),this.validateConstruction()}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return ie.SORTINDEX_LINEARRING},t.prototype.getBoundaryDimension=function(){return Re.FALSE},t.prototype.isClosed=function(){return this.isEmpty()?!0:e.prototype.isClosed.call(this)},t.prototype.reverse=function(){var i=this._points.copy();Ln.reverse(i);var o=this.getFactory().createLinearRing(i);return o},t.prototype.validateConstruction=function(){if(!this.isEmpty()&&!e.prototype.isClosed.call(this))throw new cn("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new cn("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},t.prototype.getGeometryType=function(){return"LinearRing"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(t,n),t}(_n),Ls=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return ie.SORTINDEX_MULTIPOLYGON},t.prototype.equalsExact=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return this.isEquivalentClass(i)?e.prototype.equalsExact.call(this,i,o):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.reverse=function(){for(var i=this,o=this._geometries.length,u=new Array(o).fill(null),f=0;f<this._geometries.length;f++)u[f]=i._geometries[f].reverse();return this.getFactory().createMultiPolygon(u)},t.prototype.getBoundary=function(){var i=this;if(this.isEmpty())return this.getFactory().createMultiLineString();for(var o=new Ft,u=0;u<this._geometries.length;u++)for(var f=i._geometries[u],d=f.getBoundary(),_=0;_<d.getNumGeometries();_++)o.add(d.getGeometryN(_));var y=new Array(o.size()).fill(null);return this.getFactory().createMultiLineString(o.toArray(y))},t.prototype.getGeometryType=function(){return"MultiPolygon"},t.prototype.copy=function(){for(var i=this,o=new Array(this._geometries.length).fill(null),u=0;u<o.length;u++)o[u]=i._geometries[u].copy();return new t(o,this._factory)},t.prototype.interfaces_=function(){return[No]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(t,n),t}(yr),_i=function(t){this._factory=t||null,this._isUserDataCopied=!1},Mp={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};_i.prototype.setCopyUserData=function(t){this._isUserDataCopied=t};_i.prototype.edit=function(t,n){if(t===null)return null;var r=this.editInternal(t,n);return this._isUserDataCopied&&r.setUserData(t.getUserData()),r};_i.prototype.editInternal=function(t,n){return this._factory===null&&(this._factory=t.getFactory()),t instanceof yr?this.editGeometryCollection(t,n):t instanceof On?this.editPolygon(t,n):t instanceof jr?n.edit(t,this._factory):t instanceof _n?n.edit(t,this._factory):(me.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)};_i.prototype.editGeometryCollection=function(t,n){for(var r=this,i=n.edit(t,this._factory),o=new Ft,u=0;u<i.getNumGeometries();u++){var f=r.edit(i.getGeometryN(u),n);f===null||f.isEmpty()||o.add(f)}return i.getClass()===dl?this._factory.createMultiPoint(o.toArray([])):i.getClass()===ga?this._factory.createMultiLineString(o.toArray([])):i.getClass()===Ls?this._factory.createMultiPolygon(o.toArray([])):this._factory.createGeometryCollection(o.toArray([]))};_i.prototype.editPolygon=function(t,n){var r=this,i=n.edit(t,this._factory);if(i===null&&(i=this._factory.createPolygon(null)),i.isEmpty())return i;var o=this.edit(i.getExteriorRing(),n);if(o===null||o.isEmpty())return this._factory.createPolygon();for(var u=new Ft,f=0;f<i.getNumInteriorRing();f++){var d=r.edit(i.getInteriorRingN(f),n);d===null||d.isEmpty()||u.add(d)}return this._factory.createPolygon(o,u.toArray([]))};_i.prototype.interfaces_=function(){return[]};_i.prototype.getClass=function(){return _i};_i.GeometryEditorOperation=function(){};Mp.NoOpGeometryOperation.get=function(){return Zc};Mp.CoordinateOperation.get=function(){return Kc};Mp.CoordinateSequenceOperation.get=function(){return Xc};Object.defineProperties(_i,Mp);var Zc=function(){};Zc.prototype.edit=function(t,n){return t};Zc.prototype.interfaces_=function(){return[_i.GeometryEditorOperation]};Zc.prototype.getClass=function(){return Zc};var Kc=function(){};Kc.prototype.edit=function(t,n){var r=this.editCoordinates(t.getCoordinates(),t);return r===null?t:t instanceof Ss?n.createLinearRing(r):t instanceof _n?n.createLineString(r):t instanceof jr?r.length>0?n.createPoint(r[0]):n.createPoint():t};Kc.prototype.interfaces_=function(){return[_i.GeometryEditorOperation]};Kc.prototype.getClass=function(){return Kc};var Xc=function(){};Xc.prototype.edit=function(t,n){return t instanceof Ss?n.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof _n?n.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof jr?n.createPoint(this.edit(t.getCoordinateSequence(),t)):t};Xc.prototype.interfaces_=function(){return[_i.GeometryEditorOperation]};Xc.prototype.getClass=function(){return Xc};var Cn=function(){var t=this;if(this._dimension=3,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var n=arguments[0];this._coordinates=new Array(n).fill(null);for(var r=0;r<n;r++)t._coordinates[r]=new it}else if(se(arguments[0],Ne)){var i=arguments[0];if(i===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=i.getDimension(),this._coordinates=new Array(i.size()).fill(null);for(var o=0;o<this._coordinates.length;o++)t._coordinates[o]=i.getCoordinateCopy(o)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var u=arguments[0],f=arguments[1];this._coordinates=u,this._dimension=f,u===null&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var d=arguments[0],_=arguments[1];this._coordinates=new Array(d).fill(null),this._dimension=_;for(var y=0;y<d;y++)t._coordinates[y]=new it}}},Pv={serialVersionUID:{configurable:!0}};Cn.prototype.setOrdinate=function(t,n,r){switch(n){case Ne.X:this._coordinates[t].x=r;break;case Ne.Y:this._coordinates[t].y=r;break;case Ne.Z:this._coordinates[t].z=r;break;default:throw new cn("invalid ordinateIndex")}};Cn.prototype.size=function(){return this._coordinates.length};Cn.prototype.getOrdinate=function(t,n){switch(n){case Ne.X:return this._coordinates[t].x;case Ne.Y:return this._coordinates[t].y;case Ne.Z:return this._coordinates[t].z}return ue.NaN};Cn.prototype.getCoordinate=function(){if(arguments.length===1){var t=arguments[0];return this._coordinates[t]}else if(arguments.length===2){var n=arguments[0],r=arguments[1];r.x=this._coordinates[n].x,r.y=this._coordinates[n].y,r.z=this._coordinates[n].z}};Cn.prototype.getCoordinateCopy=function(t){return new it(this._coordinates[t])};Cn.prototype.getDimension=function(){return this._dimension};Cn.prototype.getX=function(t){return this._coordinates[t].x};Cn.prototype.clone=function(){for(var t=this,n=new Array(this.size()).fill(null),r=0;r<this._coordinates.length;r++)n[r]=t._coordinates[r].clone();return new Cn(n,this._dimension)};Cn.prototype.expandEnvelope=function(t){for(var n=this,r=0;r<this._coordinates.length;r++)t.expandToInclude(n._coordinates[r]);return t};Cn.prototype.copy=function(){for(var t=this,n=new Array(this.size()).fill(null),r=0;r<this._coordinates.length;r++)n[r]=t._coordinates[r].copy();return new Cn(n,this._dimension)};Cn.prototype.toString=function(){var t=this;if(this._coordinates.length>0){var n=new hs(17*this._coordinates.length);n.append("("),n.append(this._coordinates[0]);for(var r=1;r<this._coordinates.length;r++)n.append(", "),n.append(t._coordinates[r]);return n.append(")"),n.toString()}else return"()"};Cn.prototype.getY=function(t){return this._coordinates[t].y};Cn.prototype.toCoordinateArray=function(){return this._coordinates};Cn.prototype.interfaces_=function(){return[Ne,Ci]};Cn.prototype.getClass=function(){return Cn};Pv.serialVersionUID.get=function(){return-0xcb44a778db18e00};Object.defineProperties(Cn,Pv);var Ms=function(){},rm={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Ms.prototype.readResolve=function(){return Ms.instance()};Ms.prototype.create=function(){if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return new Cn(t)}else if(se(arguments[0],Ne)){var n=arguments[0];return new Cn(n)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];return i>3&&(i=3),i<2?new Cn(r):new Cn(r,i)}};Ms.prototype.interfaces_=function(){return[ul,Ci]};Ms.prototype.getClass=function(){return Ms};Ms.instance=function(){return Ms.instanceObject};rm.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00};rm.instanceObject.get=function(){return new Ms};Object.defineProperties(Ms,rm);var Iv=function(e){function t(){e.call(this),this.map_=new Map}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(r){return this.map_.get(r)||null},t.prototype.put=function(r,i){return this.map_.set(r,i),i},t.prototype.values=function(){for(var r=new Ft,i=this.map_.values(),o=i.next();!o.done;)r.add(o.value),o=i.next();return r},t.prototype.entrySet=function(){var r=new em;return this.map_.entries().forEach(function(i){return r.add(i)}),r},t.prototype.size=function(){return this.map_.size()},t}(yu),Fe=function e(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=e.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof is){var t=arguments[0];this._modelType=t,t===e.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var n=arguments[0];this._modelType=e.FIXED,this.setScale(n)}else if(arguments[0]instanceof e){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}}},im={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Fe.prototype.equals=function(t){if(!(t instanceof Fe))return!1;var n=t;return this._modelType===n._modelType&&this._scale===n._scale};Fe.prototype.compareTo=function(t){var n=t,r=this.getMaximumSignificantDigits(),i=n.getMaximumSignificantDigits();return new es(r).compareTo(new es(i))};Fe.prototype.getScale=function(){return this._scale};Fe.prototype.isFloating=function(){return this._modelType===Fe.FLOATING||this._modelType===Fe.FLOATING_SINGLE};Fe.prototype.getType=function(){return this._modelType};Fe.prototype.toString=function(){var t="UNKNOWN";return this._modelType===Fe.FLOATING?t="Floating":this._modelType===Fe.FLOATING_SINGLE?t="Floating-Single":this._modelType===Fe.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t};Fe.prototype.makePrecise=function(){if(typeof arguments[0]=="number"){var t=arguments[0];if(ue.isNaN(t))return t;if(this._modelType===Fe.FLOATING_SINGLE){var n=t;return n}return this._modelType===Fe.FIXED?Math.round(t*this._scale)/this._scale:t}else if(arguments[0]instanceof it){var r=arguments[0];if(this._modelType===Fe.FLOATING)return null;r.x=this.makePrecise(r.x),r.y=this.makePrecise(r.y)}};Fe.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===Fe.FLOATING?t=16:this._modelType===Fe.FLOATING_SINGLE?t=6:this._modelType===Fe.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t};Fe.prototype.setScale=function(t){this._scale=Math.abs(t)};Fe.prototype.interfaces_=function(){return[Ci,vi]};Fe.prototype.getClass=function(){return Fe};Fe.mostPrecise=function(t,n){return t.compareTo(n)>=0?t:n};im.serialVersionUID.get=function(){return 7777263578777804e3};im.maximumPreciseValue.get=function(){return 9007199254740992};Object.defineProperties(Fe,im);var is=function e(t){this._name=t||null,e.nameToTypeMap.put(t,this)},sm={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};is.prototype.readResolve=function(){return is.nameToTypeMap.get(this._name)};is.prototype.toString=function(){return this._name};is.prototype.interfaces_=function(){return[Ci]};is.prototype.getClass=function(){return is};sm.serialVersionUID.get=function(){return-552860263173159e4};sm.nameToTypeMap.get=function(){return new Iv};Object.defineProperties(is,sm);Fe.Type=is;Fe.FIXED=new is("FIXED");Fe.FLOATING=new is("FLOATING");Fe.FLOATING_SINGLE=new is("FLOATING SINGLE");var xe=function e(){this._precisionModel=new Fe,this._SRID=0,this._coordinateSequenceFactory=e.getDefaultCoordinateSequenceFactory(),arguments.length===0||(arguments.length===1?se(arguments[0],ul)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Fe&&(this._precisionModel=arguments[0]):arguments.length===2?(this._precisionModel=arguments[0],this._SRID=arguments[1]):arguments.length===3&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Tv={serialVersionUID:{configurable:!0}};xe.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new it(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new it(t.getMinX(),t.getMinY()),new it(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new it(t.getMinX(),t.getMinY()),new it(t.getMinX(),t.getMaxY()),new it(t.getMaxX(),t.getMaxY()),new it(t.getMaxX(),t.getMinY()),new it(t.getMinX(),t.getMinY())]),null)};xe.prototype.createLineString=function(t){if(t){if(t instanceof Array)return new _n(this.getCoordinateSequenceFactory().create(t),this);if(se(t,Ne))return new _n(t,this)}else return new _n(this.getCoordinateSequenceFactory().create([]),this)};xe.prototype.createMultiLineString=function(){if(arguments.length===0)return new ga(null,this);if(arguments.length===1){var t=arguments[0];return new ga(t,this)}};xe.prototype.buildGeometry=function(t){for(var n=null,r=!1,i=!1,o=t.iterator();o.hasNext();){var u=o.next(),f=u.getClass();n===null&&(n=f),f!==n&&(r=!0),u.isGeometryCollectionOrDerived()&&(i=!0)}if(n===null)return this.createGeometryCollection();if(r||i)return this.createGeometryCollection(xe.toGeometryArray(t));var d=t.iterator().next(),_=t.size()>1;if(_){if(d instanceof On)return this.createMultiPolygon(xe.toPolygonArray(t));if(d instanceof _n)return this.createMultiLineString(xe.toLineStringArray(t));if(d instanceof jr)return this.createMultiPoint(xe.toPointArray(t));me.shouldNeverReachHere("Unhandled class: "+d.getClass().getName())}return d};xe.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(t!==null?this.getCoordinateSequenceFactory().create(t):null)};xe.prototype.createPoint=function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof it){var t=arguments[0];return this.createPoint(t!==null?this.getCoordinateSequenceFactory().create([t]):null)}else if(se(arguments[0],Ne)){var n=arguments[0];return new jr(n,this)}}};xe.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory};xe.prototype.createPolygon=function(){if(arguments.length===0)return new On(null,null,this);if(arguments.length===1){if(se(arguments[0],Ne)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}else if(arguments[0]instanceof Array){var n=arguments[0];return this.createPolygon(this.createLinearRing(n))}else if(arguments[0]instanceof Ss){var r=arguments[0];return this.createPolygon(r,null)}}else if(arguments.length===2){var i=arguments[0],o=arguments[1];return new On(i,o,this)}};xe.prototype.getSRID=function(){return this._SRID};xe.prototype.createGeometryCollection=function(){if(arguments.length===0)return new yr(null,this);if(arguments.length===1){var t=arguments[0];return new yr(t,this)}};xe.prototype.createGeometry=function(t){var n=new _i(this);return n.edit(t,{edit:function(){if(arguments.length===2){var r=arguments[0];return this._coordinateSequenceFactory.create(r)}}})};xe.prototype.getPrecisionModel=function(){return this._precisionModel};xe.prototype.createLinearRing=function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(t!==null?this.getCoordinateSequenceFactory().create(t):null)}else if(se(arguments[0],Ne)){var n=arguments[0];return new Ss(n,this)}}};xe.prototype.createMultiPolygon=function(){if(arguments.length===0)return new Ls(null,this);if(arguments.length===1){var t=arguments[0];return new Ls(t,this)}};xe.prototype.createMultiPoint=function(){var t=this;if(arguments.length===0)return new dl(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var n=arguments[0];return new dl(n,this)}else if(arguments[0]instanceof Array){var r=arguments[0];return this.createMultiPoint(r!==null?this.getCoordinateSequenceFactory().create(r):null)}else if(se(arguments[0],Ne)){var i=arguments[0];if(i===null)return this.createMultiPoint(new Array(0).fill(null));for(var o=new Array(i.size()).fill(null),u=0;u<i.size();u++){var f=t.getCoordinateSequenceFactory().create(1,i.getDimension());Ln.copy(i,u,f,0,1),o[u]=t.createPoint(f)}return this.createMultiPoint(o)}}};xe.prototype.interfaces_=function(){return[Ci]};xe.prototype.getClass=function(){return xe};xe.toMultiPolygonArray=function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)};xe.toGeometryArray=function(t){if(t===null)return null;var n=new Array(t.size()).fill(null);return t.toArray(n)};xe.getDefaultCoordinateSequenceFactory=function(){return Ms.instance()};xe.toMultiLineStringArray=function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)};xe.toLineStringArray=function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)};xe.toMultiPointArray=function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)};xe.toLinearRingArray=function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)};xe.toPointArray=function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)};xe.toPolygonArray=function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)};xe.createPointFromInternalCoord=function(t,n){return n.getPrecisionModel().makePrecise(t),n.getFactory().createPoint(t)};Tv.serialVersionUID.get=function(){return-6820524753094096e3};Object.defineProperties(xe,Tv);var R4=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Pp=function(t){this.geometryFactory=t||new xe};Pp.prototype.read=function(t){var n;typeof t=="string"?n=JSON.parse(t):n=t;var r=n.type;if(!Yi[r])throw new Error("Unknown GeoJSON type: "+n.type);return R4.indexOf(r)!==-1?Yi[r].apply(this,[n.coordinates]):r==="GeometryCollection"?Yi[r].apply(this,[n.geometries]):Yi[r].apply(this,[n])};Pp.prototype.write=function(t){var n=t.getGeometryType();if(!Ys[n])throw new Error("Geometry is not supported");return Ys[n].apply(this,[t])};var Yi={Feature:function(e){var t={};for(var n in e)t[n]=e[n];if(e.geometry){var r=e.geometry.type;if(!Yi[r])throw new Error("Unknown GeoJSON type: "+e.type);t.geometry=this.read(e.geometry)}return e.bbox&&(t.bbox=Yi.bbox.apply(this,[e.bbox])),t},FeatureCollection:function(e){var t=this,n={};if(e.features){n.features=[];for(var r=0;r<e.features.length;++r)n.features.push(t.read(e.features[r]))}return e.bbox&&(n.bbox=this.parse.bbox.apply(this,[e.bbox])),n},coordinates:function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];t.push(new it(r[0],r[1]))}return t},bbox:function(e){return this.geometryFactory.createLinearRing([new it(e[0],e[1]),new it(e[2],e[1]),new it(e[2],e[3]),new it(e[0],e[3]),new it(e[0],e[1])])},Point:function(e){var t=new it(e[0],e[1]);return this.geometryFactory.createPoint(t)},MultiPoint:function(e){for(var t=this,n=[],r=0;r<e.length;++r)n.push(Yi.Point.apply(t,[e[r]]));return this.geometryFactory.createMultiPoint(n)},LineString:function(e){var t=Yi.coordinates.apply(this,[e]);return this.geometryFactory.createLineString(t)},MultiLineString:function(e){for(var t=this,n=[],r=0;r<e.length;++r)n.push(Yi.LineString.apply(t,[e[r]]));return this.geometryFactory.createMultiLineString(n)},Polygon:function(e){for(var t=this,n=Yi.coordinates.apply(this,[e[0]]),r=this.geometryFactory.createLinearRing(n),i=[],o=1;o<e.length;++o){var u=e[o],f=Yi.coordinates.apply(t,[u]),d=t.geometryFactory.createLinearRing(f);i.push(d)}return this.geometryFactory.createPolygon(r,i)},MultiPolygon:function(e){for(var t=this,n=[],r=0;r<e.length;++r){var i=e[r];n.push(Yi.Polygon.apply(t,[i]))}return this.geometryFactory.createMultiPolygon(n)},GeometryCollection:function(e){for(var t=this,n=[],r=0;r<e.length;++r){var i=e[r];n.push(t.read(i))}return this.geometryFactory.createGeometryCollection(n)}},Ys={coordinate:function(e){return[e.x,e.y]},Point:function(e){var t=Ys.coordinate.apply(this,[e.getCoordinate()]);return{type:"Point",coordinates:t}},MultiPoint:function(e){for(var t=this,n=[],r=0;r<e._geometries.length;++r){var i=e._geometries[r],o=Ys.Point.apply(t,[i]);n.push(o.coordinates)}return{type:"MultiPoint",coordinates:n}},LineString:function(e){for(var t=this,n=[],r=e.getCoordinates(),i=0;i<r.length;++i){var o=r[i];n.push(Ys.coordinate.apply(t,[o]))}return{type:"LineString",coordinates:n}},MultiLineString:function(e){for(var t=this,n=[],r=0;r<e._geometries.length;++r){var i=e._geometries[r],o=Ys.LineString.apply(t,[i]);n.push(o.coordinates)}return{type:"MultiLineString",coordinates:n}},Polygon:function(e){var t=this,n=[],r=Ys.LineString.apply(this,[e._shell]);n.push(r.coordinates);for(var i=0;i<e._holes.length;++i){var o=e._holes[i],u=Ys.LineString.apply(t,[o]);n.push(u.coordinates)}return{type:"Polygon",coordinates:n}},MultiPolygon:function(e){for(var t=this,n=[],r=0;r<e._geometries.length;++r){var i=e._geometries[r],o=Ys.Polygon.apply(t,[i]);n.push(o.coordinates)}return{type:"MultiPolygon",coordinates:n}},GeometryCollection:function(e){for(var t=this,n=[],r=0;r<e._geometries.length;++r){var i=e._geometries[r],o=i.getGeometryType();n.push(Ys[o].apply(t,[i]))}return{type:"GeometryCollection",geometries:n}}},om=function(t){this.geometryFactory=t||new xe,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Pp(this.geometryFactory)};om.prototype.read=function(t){var n=this.parser.read(t);return this.precisionModel.getType()===Fe.FIXED&&this.reducePrecision(n),n};om.prototype.reducePrecision=function(t){var n=this,r,i;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(r=0,i=t.points.length;r<i;r++)n.precisionModel.makePrecise(t.points[r]);else if(t.geometries)for(r=0,i=t.geometries.length;r<i;r++)n.reducePrecision(t.geometries[r])};var Av=function(){this.parser=new Pp(this.geometryFactory)};Av.prototype.write=function(t){return this.parser.write(t)};var kt=function(){},Ip={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};kt.prototype.interfaces_=function(){return[]};kt.prototype.getClass=function(){return kt};kt.opposite=function(t){return t===kt.LEFT?kt.RIGHT:t===kt.RIGHT?kt.LEFT:t};Ip.ON.get=function(){return 0};Ip.LEFT.get=function(){return 1};Ip.RIGHT.get=function(){return 2};Object.defineProperties(kt,Ip);function Tp(e){this.message=e||""}Tp.prototype=new Error;Tp.prototype.name="EmptyStackException";function fs(){this.array_=[]}fs.prototype=new Ii;fs.prototype.add=function(e){return this.array_.push(e),!0};fs.prototype.get=function(e){if(e<0||e>=this.size())throw new Error;return this.array_[e]};fs.prototype.push=function(e){return this.array_.push(e),e};fs.prototype.pop=function(e){if(this.array_.length===0)throw new Tp;return this.array_.pop()};fs.prototype.peek=function(){if(this.array_.length===0)throw new Tp;return this.array_[this.array_.length-1]};fs.prototype.empty=function(){return this.array_.length===0};fs.prototype.isEmpty=function(){return this.empty()};fs.prototype.search=function(e){return this.array_.indexOf(e)};fs.prototype.size=function(){return this.array_.length};fs.prototype.toArray=function(){for(var e=this,t=[],n=0,r=this.array_.length;n<r;n++)t.push(e.array_[n]);return t};var ss=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};ss.prototype.getCoordinate=function(){return this._minCoord};ss.prototype.getRightmostSide=function(t,n){var r=this.getRightmostSideOfSegment(t,n);return r<0&&(r=this.getRightmostSideOfSegment(t,n-1)),r<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),r};ss.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();me.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var n=t[this._minIndex-1],r=t[this._minIndex+1],i=Gt.computeOrientation(this._minCoord,r,n),o=!1;(n.y<this._minCoord.y&&r.y<this._minCoord.y&&i===Gt.COUNTERCLOCKWISE||n.y>this._minCoord.y&&r.y>this._minCoord.y&&i===Gt.CLOCKWISE)&&(o=!0),o&&(this._minIndex=this._minIndex-1)};ss.prototype.getRightmostSideOfSegment=function(t,n){var r=t.getEdge(),i=r.getCoordinates();if(n<0||n+1>=i.length||i[n].y===i[n+1].y)return-1;var o=kt.LEFT;return i[n].y<i[n+1].y&&(o=kt.RIGHT),o};ss.prototype.getEdge=function(){return this._orientedDe};ss.prototype.checkForRightmostCoordinate=function(t){for(var n=this,r=t.getEdge().getCoordinates(),i=0;i<r.length-1;i++)(n._minCoord===null||r[i].x>n._minCoord.x)&&(n._minDe=t,n._minIndex=i,n._minCoord=r[i])};ss.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode(),n=t.getEdges();this._minDe=n.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)};ss.prototype.findEdge=function(t){for(var n=this,r=t.iterator();r.hasNext();){var i=r.next();i.isForward()&&n.checkForRightmostCoordinate(i)}me.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe;var o=this.getRightmostSide(this._minDe,this._minIndex);o===kt.LEFT&&(this._orientedDe=this._minDe.getSym())};ss.prototype.interfaces_=function(){return[]};ss.prototype.getClass=function(){return ss};var ao=function(e){function t(n,r){e.call(this,t.msgWithCoord(n,r)),this.pt=r?new it(r):null,this.name="TopologyException"}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getCoordinate=function(){return this.pt},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.msgWithCoord=function(r,i){return i?r:r+" [ "+i+" ]"},t}(so),Ap=function(){this.array_=[]};Ap.prototype.addLast=function(t){this.array_.push(t)};Ap.prototype.removeFirst=function(){return this.array_.shift()};Ap.prototype.isEmpty=function(){return this.array_.length===0};var vr=function(){this._finder=null,this._dirEdgeList=new Ft,this._nodes=new Ft,this._rightMostCoord=null,this._env=null,this._finder=new ss};vr.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var n=t.next();n.setVisited(!1)}};vr.prototype.getRightmostCoordinate=function(){return this._rightMostCoord};vr.prototype.computeNodeDepth=function(t){for(var n=this,r=null,i=t.getEdges().iterator();i.hasNext();){var o=i.next();if(o.isVisited()||o.getSym().isVisited()){r=o;break}}if(r===null)throw new ao("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(r);for(var u=t.getEdges().iterator();u.hasNext();){var f=u.next();f.setVisited(!0),n.copySymDepths(f)}};vr.prototype.computeDepth=function(t){this.clearVisitedEdges();var n=this._finder.getEdge();n.setEdgeDepths(kt.RIGHT,t),this.copySymDepths(n),this.computeDepths(n)};vr.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()};vr.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var n=t.next();n.getDepth(kt.RIGHT)>=1&&n.getDepth(kt.LEFT)<=0&&!n.isInteriorAreaEdge()&&n.setInResult(!0)}};vr.prototype.computeDepths=function(t){var n=this,r=new em,i=new Ap,o=t.getNode();for(i.addLast(o),r.add(o),t.setVisited(!0);!i.isEmpty();){var u=i.removeFirst();r.add(u),n.computeNodeDepth(u);for(var f=u.getEdges().iterator();f.hasNext();){var d=f.next(),_=d.getSym();if(!_.isVisited()){var y=_.getNode();r.contains(y)||(i.addLast(y),r.add(y))}}}};vr.prototype.compareTo=function(t){var n=t;return this._rightMostCoord.x<n._rightMostCoord.x?-1:this._rightMostCoord.x>n._rightMostCoord.x?1:0};vr.prototype.getEnvelope=function(){if(this._env===null){for(var t=new Jt,n=this._dirEdgeList.iterator();n.hasNext();)for(var r=n.next(),i=r.getEdge().getCoordinates(),o=0;o<i.length-1;o++)t.expandToInclude(i[o]);this._env=t}return this._env};vr.prototype.addReachable=function(t){var n=this,r=new fs;for(r.add(t);!r.empty();){var i=r.pop();n.add(i,r)}};vr.prototype.copySymDepths=function(t){var n=t.getSym();n.setDepth(kt.LEFT,t.getDepth(kt.RIGHT)),n.setDepth(kt.RIGHT,t.getDepth(kt.LEFT))};vr.prototype.add=function(t,n){var r=this;t.setVisited(!0),this._nodes.add(t);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();r._dirEdgeList.add(o);var u=o.getSym(),f=u.getNode();f.isVisited()||n.push(f)}};vr.prototype.getNodes=function(){return this._nodes};vr.prototype.getDirectedEdges=function(){return this._dirEdgeList};vr.prototype.interfaces_=function(){return[vi]};vr.prototype.getClass=function(){return vr};var Qe=function e(){var t=this;if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var n=arguments[0];this.init(n.length)}else if(Number.isInteger(arguments[0])){var r=arguments[0];this.init(1),this.location[kt.ON]=r}else if(arguments[0]instanceof e){var i=arguments[0];if(this.init(i.location.length),i!==null)for(var o=0;o<this.location.length;o++)t.location[o]=i.location[o]}}else if(arguments.length===3){var u=arguments[0],f=arguments[1],d=arguments[2];this.init(3),this.location[kt.ON]=u,this.location[kt.LEFT]=f,this.location[kt.RIGHT]=d}};Qe.prototype.setAllLocations=function(t){for(var n=this,r=0;r<this.location.length;r++)n.location[r]=t};Qe.prototype.isNull=function(){for(var t=this,n=0;n<this.location.length;n++)if(t.location[n]!==lt.NONE)return!1;return!0};Qe.prototype.setAllLocationsIfNull=function(t){for(var n=this,r=0;r<this.location.length;r++)n.location[r]===lt.NONE&&(n.location[r]=t)};Qe.prototype.isLine=function(){return this.location.length===1};Qe.prototype.merge=function(t){var n=this;if(t.location.length>this.location.length){var r=new Array(3).fill(null);r[kt.ON]=this.location[kt.ON],r[kt.LEFT]=lt.NONE,r[kt.RIGHT]=lt.NONE,this.location=r}for(var i=0;i<this.location.length;i++)n.location[i]===lt.NONE&&i<t.location.length&&(n.location[i]=t.location[i])};Qe.prototype.getLocations=function(){return this.location};Qe.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[kt.LEFT];this.location[kt.LEFT]=this.location[kt.RIGHT],this.location[kt.RIGHT]=t};Qe.prototype.toString=function(){var t=new hs;return this.location.length>1&&t.append(lt.toLocationSymbol(this.location[kt.LEFT])),t.append(lt.toLocationSymbol(this.location[kt.ON])),this.location.length>1&&t.append(lt.toLocationSymbol(this.location[kt.RIGHT])),t.toString()};Qe.prototype.setLocations=function(t,n,r){this.location[kt.ON]=t,this.location[kt.LEFT]=n,this.location[kt.RIGHT]=r};Qe.prototype.get=function(t){return t<this.location.length?this.location[t]:lt.NONE};Qe.prototype.isArea=function(){return this.location.length>1};Qe.prototype.isAnyNull=function(){for(var t=this,n=0;n<this.location.length;n++)if(t.location[n]===lt.NONE)return!0;return!1};Qe.prototype.setLocation=function(){if(arguments.length===1){var t=arguments[0];this.setLocation(kt.ON,t)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.location[n]=r}};Qe.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(lt.NONE)};Qe.prototype.isEqualOnSide=function(t,n){return this.location[n]===t.location[n]};Qe.prototype.allPositionsEqual=function(t){for(var n=this,r=0;r<this.location.length;r++)if(n.location[r]!==t)return!1;return!0};Qe.prototype.interfaces_=function(){return[]};Qe.prototype.getClass=function(){return Qe};var je=function e(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new Qe(t),this.elt[1]=new Qe(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.elt[0]=new Qe(n.elt[0]),this.elt[1]=new Qe(n.elt[1])}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.elt[0]=new Qe(lt.NONE),this.elt[1]=new Qe(lt.NONE),this.elt[r].setLocation(i)}else if(arguments.length===3){var o=arguments[0],u=arguments[1],f=arguments[2];this.elt[0]=new Qe(o,u,f),this.elt[1]=new Qe(o,u,f)}else if(arguments.length===4){var d=arguments[0],_=arguments[1],y=arguments[2],E=arguments[3];this.elt[0]=new Qe(lt.NONE,lt.NONE,lt.NONE),this.elt[1]=new Qe(lt.NONE,lt.NONE,lt.NONE),this.elt[d].setLocations(_,y,E)}};je.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t};je.prototype.setAllLocations=function(t,n){this.elt[t].setAllLocations(n)};je.prototype.isNull=function(t){return this.elt[t].isNull()};je.prototype.setAllLocationsIfNull=function(){if(arguments.length===1){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.elt[n].setAllLocationsIfNull(r)}};je.prototype.isLine=function(t){return this.elt[t].isLine()};je.prototype.merge=function(t){for(var n=this,r=0;r<2;r++)n.elt[r]===null&&t.elt[r]!==null?n.elt[r]=new Qe(t.elt[r]):n.elt[r].merge(t.elt[r])};je.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()};je.prototype.getLocation=function(){if(arguments.length===1){var t=arguments[0];return this.elt[t].get(kt.ON)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.elt[n].get(r)}};je.prototype.toString=function(){var t=new hs;return this.elt[0]!==null&&(t.append("A:"),t.append(this.elt[0].toString())),this.elt[1]!==null&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()};je.prototype.isArea=function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var t=arguments[0];return this.elt[t].isArea()}};je.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()};je.prototype.setLocation=function(){if(arguments.length===2){var t=arguments[0],n=arguments[1];this.elt[t].setLocation(kt.ON,n)}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this.elt[r].setLocation(i,o)}};je.prototype.isEqualOnSide=function(t,n){return this.elt[0].isEqualOnSide(t.elt[0],n)&&this.elt[1].isEqualOnSide(t.elt[1],n)};je.prototype.allPositionsEqual=function(t,n){return this.elt[t].allPositionsEqual(n)};je.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Qe(this.elt[t].location[0]))};je.prototype.interfaces_=function(){return[]};je.prototype.getClass=function(){return je};je.toLineLabel=function(t){for(var n=new je(lt.NONE),r=0;r<2;r++)n.setLocation(r,t.getLocation(r));return n};var Pn=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Ft,this._pts=new Ft,this._label=new je(lt.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Ft,this._geometryFactory=null;var t=arguments[0],n=arguments[1];this._geometryFactory=n,this.computePoints(t),this.computeRing()};Pn.prototype.computeRing=function(){var t=this;if(this._ring!==null)return null;for(var n=new Array(this._pts.size()).fill(null),r=0;r<this._pts.size();r++)n[r]=t._pts.get(r);this._ring=this._geometryFactory.createLinearRing(n),this._isHole=Gt.isCCW(this._ring.getCoordinates())};Pn.prototype.isIsolated=function(){return this._label.getGeometryCount()===1};Pn.prototype.computePoints=function(t){var n=this;this._startDe=t;var r=t,i=!0;do{if(r===null)throw new ao("Found null DirectedEdge");if(r.getEdgeRing()===n)throw new ao("Directed Edge visited twice during ring-building at "+r.getCoordinate());n._edges.add(r);var o=r.getLabel();me.isTrue(o.isArea()),n.mergeLabel(o),n.addPoints(r.getEdge(),r.isForward(),i),i=!1,n.setEdgeRing(r,n),r=n.getNext(r)}while(r!==this._startDe)};Pn.prototype.getLinearRing=function(){return this._ring};Pn.prototype.getCoordinate=function(t){return this._pts.get(t)};Pn.prototype.computeMaxNodeDegree=function(){var t=this;this._maxNodeDegree=0;var n=this._startDe;do{var r=n.getNode(),i=r.getEdges().getOutgoingDegree(t);i>t._maxNodeDegree&&(t._maxNodeDegree=i),n=t.getNext(n)}while(n!==this._startDe);this._maxNodeDegree*=2};Pn.prototype.addPoints=function(t,n,r){var i=this,o=t.getCoordinates();if(n){var u=1;r&&(u=0);for(var f=u;f<o.length;f++)i._pts.add(o[f])}else{var d=o.length-2;r&&(d=o.length-1);for(var _=d;_>=0;_--)i._pts.add(o[_])}};Pn.prototype.isHole=function(){return this._isHole};Pn.prototype.setInResult=function(){var t=this._startDe;do t.getEdge().setInResult(!0),t=t.getNext();while(t!==this._startDe)};Pn.prototype.containsPoint=function(t){var n=this.getLinearRing(),r=n.getEnvelopeInternal();if(!r.contains(t)||!Gt.isPointInRing(t,n.getCoordinates()))return!1;for(var i=this._holes.iterator();i.hasNext();){var o=i.next();if(o.containsPoint(t))return!1}return!0};Pn.prototype.addHole=function(t){this._holes.add(t)};Pn.prototype.isShell=function(){return this._shell===null};Pn.prototype.getLabel=function(){return this._label};Pn.prototype.getEdges=function(){return this._edges};Pn.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree};Pn.prototype.getShell=function(){return this._shell};Pn.prototype.mergeLabel=function(){if(arguments.length===1){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=n.getLocation(r,kt.RIGHT);if(i===lt.NONE)return null;if(this._label.getLocation(r)===lt.NONE)return this._label.setLocation(r,i),null}};Pn.prototype.setShell=function(t){this._shell=t,t!==null&&t.addHole(this)};Pn.prototype.toPolygon=function(t){for(var n=this,r=new Array(this._holes.size()).fill(null),i=0;i<this._holes.size();i++)r[i]=n._holes.get(i).getLinearRing();var o=t.createPolygon(this.getLinearRing(),r);return o};Pn.prototype.interfaces_=function(){return[]};Pn.prototype.getClass=function(){return Pn};var B4=function(e){function t(){var n=arguments[0],r=arguments[1];e.call(this,n,r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setEdgeRing=function(r,i){r.setMinEdgeRing(i)},t.prototype.getNext=function(r){return r.getNextMin()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Pn),F4=function(e){function t(){var n=arguments[0],r=arguments[1];e.call(this,n,r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.buildMinimalRings=function(){var r=this,i=new Ft,o=this._startDe;do{if(o.getMinEdgeRing()===null){var u=new B4(o,r._geometryFactory);i.add(u)}o=o.getNext()}while(o!==this._startDe);return i},t.prototype.setEdgeRing=function(r,i){r.setEdgeRing(i)},t.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var r=this,i=this._startDe;do{var o=i.getNode();o.getEdges().linkMinimalDirectedEdges(r),i=i.getNext()}while(i!==this._startDe)},t.prototype.getNext=function(r){return r.getNext()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Pn),si=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this._label=t}}};si.prototype.setVisited=function(t){this._isVisited=t};si.prototype.setInResult=function(t){this._isInResult=t};si.prototype.isCovered=function(){return this._isCovered};si.prototype.isCoveredSet=function(){return this._isCoveredSet};si.prototype.setLabel=function(t){this._label=t};si.prototype.getLabel=function(){return this._label};si.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0};si.prototype.updateIM=function(t){me.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)};si.prototype.isInResult=function(){return this._isInResult};si.prototype.isVisited=function(){return this._isVisited};si.prototype.interfaces_=function(){return[]};si.prototype.getClass=function(){return si};var kp=function(e){function t(){e.call(this),this._coord=null,this._edges=null;var n=arguments[0],r=arguments[1];this._coord=n,this._edges=r,this._label=new je(0,lt.NONE)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isIncidentEdgeInResult=function(){for(var r=this.getEdges().getEdges().iterator();r.hasNext();){var i=r.next();if(i.getEdge().isInResult())return!0}return!1},t.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},t.prototype.getCoordinate=function(){return this._coord},t.prototype.print=function(r){r.println("node "+this._coord+" lbl: "+this._label)},t.prototype.computeIM=function(r){},t.prototype.computeMergedLocation=function(r,i){var o=lt.NONE;if(o=this._label.getLocation(i),!r.isNull(i)){var u=r.getLocation(i);o!==lt.BOUNDARY&&(o=u)}return o},t.prototype.setLabel=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];this._label===null?this._label=new je(r,i):this._label.setLocation(r,i)}else return e.prototype.setLabel.apply(this,arguments)},t.prototype.getEdges=function(){return this._edges},t.prototype.mergeLabel=function(){var r=this;if(arguments[0]instanceof t){var i=arguments[0];this.mergeLabel(i._label)}else if(arguments[0]instanceof je)for(var o=arguments[0],u=0;u<2;u++){var f=r.computeMergedLocation(o,u),d=r._label.getLocation(u);d===lt.NONE&&r._label.setLocation(u,f)}},t.prototype.add=function(r){this._edges.insert(r),r.setNode(this)},t.prototype.setLabelBoundary=function(r){if(this._label===null)return null;var i=lt.NONE;this._label!==null&&(i=this._label.getLocation(r));var o=null;switch(i){case lt.BOUNDARY:o=lt.INTERIOR;break;case lt.INTERIOR:o=lt.BOUNDARY;break;default:o=lt.BOUNDARY;break}this._label.setLocation(r,o)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(si),os=function(){this.nodeMap=new sr,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};os.prototype.find=function(t){return this.nodeMap.get(t)};os.prototype.addNode=function(){if(arguments[0]instanceof it){var t=arguments[0],n=this.nodeMap.get(t);return n===null&&(n=this.nodeFact.createNode(t),this.nodeMap.put(t,n)),n}else if(arguments[0]instanceof kp){var r=arguments[0],i=this.nodeMap.get(r.getCoordinate());return i===null?(this.nodeMap.put(r.getCoordinate(),r),r):(i.mergeLabel(r),i)}};os.prototype.print=function(t){for(var n=this.iterator();n.hasNext();){var r=n.next();r.print(t)}};os.prototype.iterator=function(){return this.nodeMap.values().iterator()};os.prototype.values=function(){return this.nodeMap.values()};os.prototype.getBoundaryNodes=function(t){for(var n=new Ft,r=this.iterator();r.hasNext();){var i=r.next();i.getLabel().getLocation(t)===lt.BOUNDARY&&n.add(i)}return n};os.prototype.add=function(t){var n=t.getCoordinate(),r=this.addNode(n);r.add(t)};os.prototype.interfaces_=function(){return[]};os.prototype.getClass=function(){return os};var Xe=function(){},fh={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Xe.prototype.interfaces_=function(){return[]};Xe.prototype.getClass=function(){return Xe};Xe.isNorthern=function(t){return t===Xe.NE||t===Xe.NW};Xe.isOpposite=function(t,n){if(t===n)return!1;var r=(t-n+4)%4;return r===2};Xe.commonHalfPlane=function(t,n){if(t===n)return t;var r=(t-n+4)%4;if(r===2)return-1;var i=t<n?t:n,o=t>n?t:n;return i===0&&o===3?3:i};Xe.isInHalfPlane=function(t,n){return n===Xe.SE?t===Xe.SE||t===Xe.SW:t===n||t===n+1};Xe.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],n=arguments[1];if(t===0&&n===0)throw new cn("Cannot compute the quadrant for point ( "+t+", "+n+" )");return t>=0?n>=0?Xe.NE:Xe.SE:n>=0?Xe.NW:Xe.SW}else if(arguments[0]instanceof it&&arguments[1]instanceof it){var r=arguments[0],i=arguments[1];if(i.x===r.x&&i.y===r.y)throw new cn("Cannot compute the quadrant for two identical points "+r);return i.x>=r.x?i.y>=r.y?Xe.NE:Xe.SE:i.y>=r.y?Xe.NW:Xe.SW}};fh.NE.get=function(){return 0};fh.NW.get=function(){return 1};fh.SW.get=function(){return 2};fh.SE.get=function(){return 3};Object.defineProperties(Xe,fh);var or=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var t=arguments[0];this._edge=t}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2],o=null;this._edge=n,this.init(r,i),this._label=o}else if(arguments.length===4){var u=arguments[0],f=arguments[1],d=arguments[2],_=arguments[3];this._edge=u,this.init(f,d),this._label=_}};or.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:Gt.computeOrientation(t._p0,t._p1,this._p1)};or.prototype.getDy=function(){return this._dy};or.prototype.getCoordinate=function(){return this._p0};or.prototype.setNode=function(t){this._node=t};or.prototype.print=function(t){var n=Math.atan2(this._dy,this._dx),r=this.getClass().getName(),i=r.lastIndexOf("."),o=r.substring(i+1);t.print("  "+o+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+n+"   "+this._label)};or.prototype.compareTo=function(t){var n=t;return this.compareDirection(n)};or.prototype.getDirectedCoordinate=function(){return this._p1};or.prototype.getDx=function(){return this._dx};or.prototype.getLabel=function(){return this._label};or.prototype.getEdge=function(){return this._edge};or.prototype.getQuadrant=function(){return this._quadrant};or.prototype.getNode=function(){return this._node};or.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);return"  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label};or.prototype.computeLabel=function(t){};or.prototype.init=function(t,n){this._p0=t,this._p1=n,this._dx=n.x-t.x,this._dy=n.y-t.y,this._quadrant=Xe.quadrant(this._dx,this._dy),me.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")};or.prototype.interfaces_=function(){return[vi]};or.prototype.getClass=function(){return or};var Lg=function(e){function t(){var n=arguments[0],r=arguments[1];if(e.call(this,n),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=r,r)this.init(n.getCoordinate(0),n.getCoordinate(1));else{var i=n.getNumPoints()-1;this.init(n.getCoordinate(i),n.getCoordinate(i-1))}this.computeDirectedLabel()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getNextMin=function(){return this._nextMin},t.prototype.getDepth=function(r){return this._depth[r]},t.prototype.setVisited=function(r){this._isVisited=r},t.prototype.computeDirectedLabel=function(){this._label=new je(this._edge.getLabel()),this._isForward||this._label.flip()},t.prototype.getNext=function(){return this._next},t.prototype.setDepth=function(r,i){if(this._depth[r]!==-999&&this._depth[r]!==i)throw new ao("assigned depths do not match",this.getCoordinate());this._depth[r]=i},t.prototype.isInteriorAreaEdge=function(){for(var r=this,i=!0,o=0;o<2;o++)r._label.isArea(o)&&r._label.getLocation(o,kt.LEFT)===lt.INTERIOR&&r._label.getLocation(o,kt.RIGHT)===lt.INTERIOR||(i=!1);return i},t.prototype.setNextMin=function(r){this._nextMin=r},t.prototype.print=function(r){e.prototype.print.call(this,r),r.print(" "+this._depth[kt.LEFT]+"/"+this._depth[kt.RIGHT]),r.print(" ("+this.getDepthDelta()+")"),this._isInResult&&r.print(" inResult")},t.prototype.setMinEdgeRing=function(r){this._minEdgeRing=r},t.prototype.isLineEdge=function(){var r=this._label.isLine(0)||this._label.isLine(1),i=!this._label.isArea(0)||this._label.allPositionsEqual(0,lt.EXTERIOR),o=!this._label.isArea(1)||this._label.allPositionsEqual(1,lt.EXTERIOR);return r&&i&&o},t.prototype.setEdgeRing=function(r){this._edgeRing=r},t.prototype.getMinEdgeRing=function(){return this._minEdgeRing},t.prototype.getDepthDelta=function(){var r=this._edge.getDepthDelta();return this._isForward||(r=-r),r},t.prototype.setInResult=function(r){this._isInResult=r},t.prototype.getSym=function(){return this._sym},t.prototype.isForward=function(){return this._isForward},t.prototype.getEdge=function(){return this._edge},t.prototype.printEdge=function(r){this.print(r),r.print(" "),this._isForward?this._edge.print(r):this._edge.printReverse(r)},t.prototype.setSym=function(r){this._sym=r},t.prototype.setVisitedEdge=function(r){this.setVisited(r),this._sym.setVisited(r)},t.prototype.setEdgeDepths=function(r,i){var o=this.getEdge().getDepthDelta();this._isForward||(o=-o);var u=1;r===kt.LEFT&&(u=-1);var f=kt.opposite(r),d=o*u,_=i+d;this.setDepth(r,i),this.setDepth(f,_)},t.prototype.getEdgeRing=function(){return this._edgeRing},t.prototype.isInResult=function(){return this._isInResult},t.prototype.setNext=function(r){this._next=r},t.prototype.isVisited=function(){return this._isVisited},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.depthFactor=function(r,i){return r===lt.EXTERIOR&&i===lt.INTERIOR?1:r===lt.INTERIOR&&i===lt.EXTERIOR?-1:0},t}(or),gl=function(){};gl.prototype.createNode=function(t){return new kp(t,null)};gl.prototype.interfaces_=function(){return[]};gl.prototype.getClass=function(){return gl};var pn=function(){if(this._edges=new Ft,this._nodes=null,this._edgeEndList=new Ft,arguments.length===0)this._nodes=new os(new gl);else if(arguments.length===1){var t=arguments[0];this._nodes=new os(t)}};pn.prototype.printEdges=function(t){var n=this;t.println("Edges:");for(var r=0;r<this._edges.size();r++){t.println("edge "+r+":");var i=n._edges.get(r);i.print(t),i.eiList.print(t)}};pn.prototype.find=function(t){return this._nodes.find(t)};pn.prototype.addNode=function(){if(arguments[0]instanceof kp){var t=arguments[0];return this._nodes.addNode(t)}else if(arguments[0]instanceof it){var n=arguments[0];return this._nodes.addNode(n)}};pn.prototype.getNodeIterator=function(){return this._nodes.iterator()};pn.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();){var n=t.next();n.getEdges().linkResultDirectedEdges()}};pn.prototype.debugPrintln=function(t){Yn.out.println(t)};pn.prototype.isBoundaryNode=function(t,n){var r=this._nodes.find(n);if(r===null)return!1;var i=r.getLabel();return i!==null&&i.getLocation(t)===lt.BOUNDARY};pn.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();){var n=t.next();n.getEdges().linkAllDirectedEdges()}};pn.prototype.matchInSameDirection=function(t,n,r,i){return t.equals(r)?Gt.computeOrientation(t,n,i)===Gt.COLLINEAR&&Xe.quadrant(t,n)===Xe.quadrant(r,i):!1};pn.prototype.getEdgeEnds=function(){return this._edgeEndList};pn.prototype.debugPrint=function(t){Yn.out.print(t)};pn.prototype.getEdgeIterator=function(){return this._edges.iterator()};pn.prototype.findEdgeInSameDirection=function(t,n){for(var r=this,i=0;i<this._edges.size();i++){var o=r._edges.get(i),u=o.getCoordinates();if(r.matchInSameDirection(t,n,u[0],u[1])||r.matchInSameDirection(t,n,u[u.length-1],u[u.length-2]))return o}return null};pn.prototype.insertEdge=function(t){this._edges.add(t)};pn.prototype.findEdgeEnd=function(t){for(var n=this.getEdgeEnds().iterator();n.hasNext();){var r=n.next();if(r.getEdge()===t)return r}return null};pn.prototype.addEdges=function(t){for(var n=this,r=t.iterator();r.hasNext();){var i=r.next();n._edges.add(i);var o=new Lg(i,!0),u=new Lg(i,!1);o.setSym(u),u.setSym(o),n.add(o),n.add(u)}};pn.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)};pn.prototype.getNodes=function(){return this._nodes.values()};pn.prototype.findEdge=function(t,n){for(var r=this,i=0;i<this._edges.size();i++){var o=r._edges.get(i),u=o.getCoordinates();if(t.equals(u[0])&&n.equals(u[1]))return o}return null};pn.prototype.interfaces_=function(){return[]};pn.prototype.getClass=function(){return pn};pn.linkResultDirectedEdges=function(t){for(var n=t.iterator();n.hasNext();){var r=n.next();r.getEdges().linkResultDirectedEdges()}};var qr=function(){this._geometryFactory=null,this._shellList=new Ft;var t=arguments[0];this._geometryFactory=t};qr.prototype.sortShellsAndHoles=function(t,n,r){for(var i=t.iterator();i.hasNext();){var o=i.next();o.isHole()?r.add(o):n.add(o)}};qr.prototype.computePolygons=function(t){for(var n=this,r=new Ft,i=t.iterator();i.hasNext();){var o=i.next(),u=o.toPolygon(n._geometryFactory);r.add(u)}return r};qr.prototype.placeFreeHoles=function(t,n){for(var r=this,i=n.iterator();i.hasNext();){var o=i.next();if(o.getShell()===null){var u=r.findEdgeRingContaining(o,t);if(u===null)throw new ao("unable to assign hole to a shell",o.getCoordinate(0));o.setShell(u)}}};qr.prototype.buildMinimalEdgeRings=function(t,n,r){for(var i=this,o=new Ft,u=t.iterator();u.hasNext();){var f=u.next();if(f.getMaxNodeDegree()>2){f.linkDirectedEdgesForMinimalEdgeRings();var d=f.buildMinimalRings(),_=i.findShell(d);_!==null?(i.placePolygonHoles(_,d),n.add(_)):r.addAll(d)}else o.add(f)}return o};qr.prototype.containsPoint=function(t){for(var n=this._shellList.iterator();n.hasNext();){var r=n.next();if(r.containsPoint(t))return!0}return!1};qr.prototype.buildMaximalEdgeRings=function(t){for(var n=this,r=new Ft,i=t.iterator();i.hasNext();){var o=i.next();if(o.isInResult()&&o.getLabel().isArea()&&o.getEdgeRing()===null){var u=new F4(o,n._geometryFactory);r.add(u),u.setInResult()}}return r};qr.prototype.placePolygonHoles=function(t,n){for(var r=n.iterator();r.hasNext();){var i=r.next();i.isHole()&&i.setShell(t)}};qr.prototype.getPolygons=function(){var t=this.computePolygons(this._shellList);return t};qr.prototype.findEdgeRingContaining=function(t,n){for(var r=t.getLinearRing(),i=r.getEnvelopeInternal(),o=r.getCoordinateN(0),u=null,f=null,d=n.iterator();d.hasNext();){var _=d.next(),y=_.getLinearRing(),E=y.getEnvelopeInternal();u!==null&&(f=u.getLinearRing().getEnvelopeInternal());var S=!1;E.contains(i)&&Gt.isPointInRing(o,y.getCoordinates())&&(S=!0),S&&(u===null||f.contains(E))&&(u=_)}return u};qr.prototype.findShell=function(t){for(var n=0,r=null,i=t.iterator();i.hasNext();){var o=i.next();o.isHole()||(r=o,n++)}return me.isTrue(n<=1,"found two shells in MinimalEdgeRing list"),r};qr.prototype.add=function(){if(arguments.length===1){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(arguments.length===2){var n=arguments[0],r=arguments[1];pn.linkResultDirectedEdges(r);var i=this.buildMaximalEdgeRings(n),o=new Ft,u=this.buildMinimalEdgeRings(i,this._shellList,o);this.sortShellsAndHoles(u,this._shellList,o),this.placeFreeHoles(this._shellList,o)}};qr.prototype.interfaces_=function(){return[]};qr.prototype.getClass=function(){return qr};var ml=function(){};ml.prototype.getBounds=function(){};ml.prototype.interfaces_=function(){return[]};ml.prototype.getClass=function(){return ml};var ki=function(){this._bounds=null,this._item=null;var t=arguments[0],n=arguments[1];this._bounds=t,this._item=n};ki.prototype.getItem=function(){return this._item};ki.prototype.getBounds=function(){return this._bounds};ki.prototype.interfaces_=function(){return[ml,Ci]};ki.prototype.getClass=function(){return ki};var uo=function(){this._size=null,this._items=null,this._size=0,this._items=new Ft,this._items.add(null)};uo.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t};uo.prototype.size=function(){return this._size};uo.prototype.reorder=function(t){for(var n=this,r=null,i=this._items.get(t);t*2<=this._size&&(r=t*2,r!==n._size&&n._items.get(r+1).compareTo(n._items.get(r))<0&&r++,n._items.get(r).compareTo(i)<0);t=r)n._items.set(t,n._items.get(r));this._items.set(t,i)};uo.prototype.clear=function(){this._size=0,this._items.clear()};uo.prototype.isEmpty=function(){return this._size===0};uo.prototype.add=function(t){var n=this;this._items.add(null),this._size+=1;var r=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(r/2)))<0;r/=2)n._items.set(r,n._items.get(Math.trunc(r/2)));this._items.set(r,t)};uo.prototype.interfaces_=function(){return[]};uo.prototype.getClass=function(){return uo};var Oo=function(){};Oo.prototype.visitItem=function(t){};Oo.prototype.interfaces_=function(){return[]};Oo.prototype.getClass=function(){return Oo};var nu=function(){};nu.prototype.insert=function(t,n){};nu.prototype.remove=function(t,n){};nu.prototype.query=function(){};nu.prototype.interfaces_=function(){return[]};nu.prototype.getClass=function(){return nu};var Nn=function(){if(this._childBoundables=new Ft,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this._level=t}}},kv={serialVersionUID:{configurable:!0}};Nn.prototype.getLevel=function(){return this._level};Nn.prototype.size=function(){return this._childBoundables.size()};Nn.prototype.getChildBoundables=function(){return this._childBoundables};Nn.prototype.addChildBoundable=function(t){me.isTrue(this._bounds===null),this._childBoundables.add(t)};Nn.prototype.isEmpty=function(){return this._childBoundables.isEmpty()};Nn.prototype.getBounds=function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds};Nn.prototype.interfaces_=function(){return[ml,Ci]};Nn.prototype.getClass=function(){return Nn};kv.serialVersionUID.get=function(){return 6493722185909574e3};Object.defineProperties(Nn,kv);var Di=function(){};Di.reverseOrder=function(){return{compare:function(n,r){return r.compareTo(n)}}};Di.min=function(t){return Di.sort(t),t.get(0)};Di.sort=function(t,n){var r=t.toArray();n?fa.sort(r,n):fa.sort(r);for(var i=t.iterator(),o=0,u=r.length;o<u;o++)i.next(),i.set(r[o])};Di.singletonList=function(t){var n=new Ft;return n.add(t),n};var Sn=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],n=arguments[1],r=arguments[2];this._boundable1=t,this._boundable2=n,this._itemDistance=r,this._distance=this.distance()};Sn.prototype.expandToQueue=function(t,n){var r=Sn.isComposite(this._boundable1),i=Sn.isComposite(this._boundable2);if(r&&i)return Sn.area(this._boundable1)>Sn.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,n),null):(this.expand(this._boundable2,this._boundable1,t,n),null);if(r)return this.expand(this._boundable1,this._boundable2,t,n),null;if(i)return this.expand(this._boundable2,this._boundable1,t,n),null;throw new cn("neither boundable is composite")};Sn.prototype.isLeaves=function(){return!(Sn.isComposite(this._boundable1)||Sn.isComposite(this._boundable2))};Sn.prototype.compareTo=function(t){var n=t;return this._distance<n._distance?-1:this._distance>n._distance?1:0};Sn.prototype.expand=function(t,n,r,i){for(var o=this,u=t.getChildBoundables(),f=u.iterator();f.hasNext();){var d=f.next(),_=new Sn(d,n,o._itemDistance);_.getDistance()<i&&r.add(_)}};Sn.prototype.getBoundable=function(t){return t===0?this._boundable1:this._boundable2};Sn.prototype.getDistance=function(){return this._distance};Sn.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())};Sn.prototype.interfaces_=function(){return[vi]};Sn.prototype.getClass=function(){return Sn};Sn.area=function(t){return t.getBounds().getArea()};Sn.isComposite=function(t){return t instanceof Nn};var Un=function e(){if(this._root=null,this._built=!1,this._itemBoundables=new Ft,this._nodeCapacity=null,arguments.length===0){var t=e.DEFAULT_NODE_CAPACITY;this._nodeCapacity=t}else if(arguments.length===1){var n=arguments[0];me.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},Dp={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Un.prototype.getNodeCapacity=function(){return this._nodeCapacity};Un.prototype.lastNode=function(t){return t.get(t.size()-1)};Un.prototype.size=function(){var t=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var n=arguments[0],r=0,i=n.getChildBoundables().iterator();i.hasNext();){var o=i.next();o instanceof Nn?r+=t.size(o):o instanceof ki&&(r+=1)}return r}};Un.prototype.removeItem=function(t,n){for(var r=null,i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next();o instanceof ki&&o.getItem()===n&&(r=o)}return r!==null?(t.getChildBoundables().remove(r),!0):!1};Un.prototype.itemsTree=function(){var t=this;if(arguments.length===0){this.build();var n=this.itemsTree(this._root);return n===null?new Ft:n}else if(arguments.length===1){for(var r=arguments[0],i=new Ft,o=r.getChildBoundables().iterator();o.hasNext();){var u=o.next();if(u instanceof Nn){var f=t.itemsTree(u);f!==null&&i.add(f)}else u instanceof ki?i.add(u.getItem()):me.shouldNeverReachHere()}return i.size()<=0?null:i}};Un.prototype.insert=function(t,n){me.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new ki(t,n))};Un.prototype.boundablesAtLevel=function(){var t=this;if(arguments.length===1){var n=arguments[0],r=new Ft;return this.boundablesAtLevel(n,this._root,r),r}else if(arguments.length===3){var i=arguments[0],o=arguments[1],u=arguments[2];if(me.isTrue(i>-2),o.getLevel()===i)return u.add(o),null;for(var f=o.getChildBoundables().iterator();f.hasNext();){var d=f.next();d instanceof Nn?t.boundablesAtLevel(i,d,u):(me.isTrue(d instanceof ki),i===-1&&u.add(d))}return null}};Un.prototype.query=function(){var t=this;if(arguments.length===1){var n=arguments[0];this.build();var r=new Ft;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r),r}else if(arguments.length===2){var i=arguments[0],o=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),i)&&this.query(i,this._root,o)}else if(arguments.length===3){if(se(arguments[2],Oo)&&arguments[0]instanceof Object&&arguments[1]instanceof Nn)for(var u=arguments[0],f=arguments[1],d=arguments[2],_=f.getChildBoundables(),y=0;y<_.size();y++){var E=_.get(y);t.getIntersectsOp().intersects(E.getBounds(),u)&&(E instanceof Nn?t.query(u,E,d):E instanceof ki?d.visitItem(E.getItem()):me.shouldNeverReachHere())}else if(se(arguments[2],Ii)&&arguments[0]instanceof Object&&arguments[1]instanceof Nn)for(var S=arguments[0],T=arguments[1],I=arguments[2],z=T.getChildBoundables(),G=0;G<z.size();G++){var W=z.get(G);t.getIntersectsOp().intersects(W.getBounds(),S)&&(W instanceof Nn?t.query(S,W,I):W instanceof ki?I.add(W.getItem()):me.shouldNeverReachHere())}}};Un.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0};Un.prototype.getRoot=function(){return this.build(),this._root};Un.prototype.remove=function(){var t=this;if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.build(),this.getIntersectsOp().intersects(this._root.getBounds(),n)?this.remove(n,this._root,r):!1}else if(arguments.length===3){var i=arguments[0],o=arguments[1],u=arguments[2],f=this.removeItem(o,u);if(f)return!0;for(var d=null,_=o.getChildBoundables().iterator();_.hasNext();){var y=_.next();if(t.getIntersectsOp().intersects(y.getBounds(),i)&&y instanceof Nn&&(f=t.remove(i,y,u),f)){d=y;break}}return d!==null&&d.getChildBoundables().isEmpty()&&o.getChildBoundables().remove(d),f}};Un.prototype.createHigherLevels=function(t,n){me.isTrue(!t.isEmpty());var r=this.createParentBoundables(t,n+1);return r.size()===1?r.get(0):this.createHigherLevels(r,n+1)};Un.prototype.depth=function(){var t=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var n=arguments[0],r=0,i=n.getChildBoundables().iterator();i.hasNext();){var o=i.next();if(o instanceof Nn){var u=t.depth(o);u>r&&(r=u)}}return r+1}};Un.prototype.createParentBoundables=function(t,n){var r=this;me.isTrue(!t.isEmpty());var i=new Ft;i.add(this.createNode(n));var o=new Ft(t);Di.sort(o,this.getComparator());for(var u=o.iterator();u.hasNext();){var f=u.next();r.lastNode(i).getChildBoundables().size()===r.getNodeCapacity()&&i.add(r.createNode(n)),r.lastNode(i).addChildBoundable(f)}return i};Un.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()};Un.prototype.interfaces_=function(){return[Ci]};Un.prototype.getClass=function(){return Un};Un.compareDoubles=function(t,n){return t>n?1:t<n?-1:0};Dp.IntersectsOp.get=function(){return z4};Dp.serialVersionUID.get=function(){return-3886435814360241e3};Dp.DEFAULT_NODE_CAPACITY.get=function(){return 10};Object.defineProperties(Un,Dp);var z4=function(){},_l=function(){};_l.prototype.distance=function(t,n){};_l.prototype.interfaces_=function(){return[]};_l.prototype.getClass=function(){return _l};var Dv=function(e){function t(r){r=r||t.DEFAULT_NODE_CAPACITY,e.call(this,r)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return t.prototype.createParentBoundablesFromVerticalSlices=function(i,o){var u=this;me.isTrue(i.length>0);for(var f=new Ft,d=0;d<i.length;d++)f.addAll(u.createParentBoundablesFromVerticalSlice(i[d],o));return f},t.prototype.createNode=function(i){return new W_(i)},t.prototype.size=function(){return arguments.length===0?e.prototype.size.call(this):e.prototype.size.apply(this,arguments)},t.prototype.insert=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];if(i.isNull())return null;e.prototype.insert.call(this,i,o)}else return e.prototype.insert.apply(this,arguments)},t.prototype.getIntersectsOp=function(){return t.intersectsOp},t.prototype.verticalSlices=function(i,o){for(var u=Math.trunc(Math.ceil(i.size()/o)),f=new Array(o).fill(null),d=i.iterator(),_=0;_<o;_++){f[_]=new Ft;for(var y=0;d.hasNext()&&y<u;){var E=d.next();f[_].add(E),y++}}return f},t.prototype.query=function(){if(arguments.length===1){var i=arguments[0];return e.prototype.query.call(this,i)}else if(arguments.length===2){var o=arguments[0],u=arguments[1];e.prototype.query.call(this,o,u)}else if(arguments.length===3){if(se(arguments[2],Oo)&&arguments[0]instanceof Object&&arguments[1]instanceof Nn){var f=arguments[0],d=arguments[1],_=arguments[2];e.prototype.query.call(this,f,d,_)}else if(se(arguments[2],Ii)&&arguments[0]instanceof Object&&arguments[1]instanceof Nn){var y=arguments[0],E=arguments[1],S=arguments[2];e.prototype.query.call(this,y,E,S)}}},t.prototype.getComparator=function(){return t.yComparator},t.prototype.createParentBoundablesFromVerticalSlice=function(i,o){return e.prototype.createParentBoundables.call(this,i,o)},t.prototype.remove=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return e.prototype.remove.call(this,i,o)}else return e.prototype.remove.apply(this,arguments)},t.prototype.depth=function(){return arguments.length===0?e.prototype.depth.call(this):e.prototype.depth.apply(this,arguments)},t.prototype.createParentBoundables=function(i,o){me.isTrue(!i.isEmpty());var u=Math.trunc(Math.ceil(i.size()/this.getNodeCapacity())),f=new Ft(i);Di.sort(f,t.xComparator);var d=this.verticalSlices(f,Math.trunc(Math.ceil(Math.sqrt(u))));return this.createParentBoundablesFromVerticalSlices(d,o)},t.prototype.nearestNeighbour=function(){if(arguments.length===1){if(se(arguments[0],_l)){var i=arguments[0],o=new Sn(this.getRoot(),this.getRoot(),i);return this.nearestNeighbour(o)}else if(arguments[0]instanceof Sn){var u=arguments[0];return this.nearestNeighbour(u,ue.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof t&&se(arguments[1],_l)){var f=arguments[0],d=arguments[1],_=new Sn(this.getRoot(),f.getRoot(),d);return this.nearestNeighbour(_)}else if(arguments[0]instanceof Sn&&typeof arguments[1]=="number"){var y=arguments[0],E=arguments[1],S=E,T=null,I=new uo;for(I.add(y);!I.isEmpty()&&S>0;){var z=I.poll(),G=z.getDistance();if(G>=S)break;z.isLeaves()?(S=G,T=z):z.expandToQueue(I,S)}return[T.getBoundable(0).getItem(),T.getBoundable(1).getItem()]}}else if(arguments.length===3){var W=arguments[0],Q=arguments[1],rt=arguments[2],gt=new ki(W,Q),xt=new Sn(this.getRoot(),gt,rt);return this.nearestNeighbour(xt)[0]}},t.prototype.interfaces_=function(){return[nu,Ci]},t.prototype.getClass=function(){return t},t.centreX=function(i){return t.avg(i.getMinX(),i.getMaxX())},t.avg=function(i,o){return(i+o)/2},t.centreY=function(i){return t.avg(i.getMinY(),i.getMaxY())},n.STRtreeNode.get=function(){return W_},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[al]},compare:function(r,i){return e.compareDoubles(t.centreX(r.getBounds()),t.centreX(i.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[al]},compare:function(r,i){return e.compareDoubles(t.centreY(r.getBounds()),t.centreY(i.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[e.IntersectsOp]},intersects:function(r,i){return r.intersects(i)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(t,n),t}(Un),W_=function(e){function t(){var n=arguments[0];e.call(this,n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.computeBounds=function(){for(var r=null,i=this.getChildBoundables().iterator();i.hasNext();){var o=i.next();r===null?r=new Jt(o.getBounds()):r.expandToInclude(o.getBounds())}return r},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Nn),Sr=function(){};Sr.prototype.interfaces_=function(){return[]};Sr.prototype.getClass=function(){return Sr};Sr.relativeSign=function(t,n){return t<n?-1:t>n?1:0};Sr.compare=function(t,n,r){if(n.equals2D(r))return 0;var i=Sr.relativeSign(n.x,r.x),o=Sr.relativeSign(n.y,r.y);switch(t){case 0:return Sr.compareValue(i,o);case 1:return Sr.compareValue(o,i);case 2:return Sr.compareValue(o,-i);case 3:return Sr.compareValue(-i,o);case 4:return Sr.compareValue(-i,-o);case 5:return Sr.compareValue(-o,-i);case 6:return Sr.compareValue(-o,i);case 7:return Sr.compareValue(i,-o)}return me.shouldNeverReachHere("invalid octant value"),0};Sr.compareValue=function(t,n){return t<0?-1:t>0?1:n<0?-1:n>0?1:0};var Ro=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this._segString=t,this.coord=new it(n),this.segmentIndex=r,this._segmentOctant=i,this._isInterior=!n.equals2D(t.getCoordinate(r))};Ro.prototype.getCoordinate=function(){return this.coord};Ro.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)};Ro.prototype.compareTo=function(t){var n=t;return this.segmentIndex<n.segmentIndex?-1:this.segmentIndex>n.segmentIndex?1:this.coord.equals2D(n.coord)?0:Sr.compare(this._segmentOctant,this.coord,n.coord)};Ro.prototype.isEndPoint=function(t){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===t};Ro.prototype.isInterior=function(){return this._isInterior};Ro.prototype.interfaces_=function(){return[vi]};Ro.prototype.getClass=function(){return Ro};var Cr=function(){this._nodeMap=new sr,this._edge=null;var t=arguments[0];this._edge=t};Cr.prototype.getSplitCoordinates=function(){var t=this,n=new ch;this.addEndpoints();for(var r=this.iterator(),i=r.next();r.hasNext();){var o=r.next();t.addEdgeCoordinates(i,o,n),i=o}return n.toCoordinateArray()};Cr.prototype.addCollapsedNodes=function(){var t=this,n=new Ft;this.findCollapsesFromInsertedNodes(n),this.findCollapsesFromExistingVertices(n);for(var r=n.iterator();r.hasNext();){var i=r.next().intValue();t.add(t._edge.getCoordinate(i),i)}};Cr.prototype.print=function(t){t.println("Intersections:");for(var n=this.iterator();n.hasNext();){var r=n.next();r.print(t)}};Cr.prototype.findCollapsesFromExistingVertices=function(t){for(var n=this,r=0;r<this._edge.size()-2;r++){var i=n._edge.getCoordinate(r),o=n._edge.getCoordinate(r+2);i.equals2D(o)&&t.add(new es(r+1))}};Cr.prototype.addEdgeCoordinates=function(t,n,r){var i=this,o=this._edge.getCoordinate(n.segmentIndex),u=n.isInterior()||!n.coord.equals2D(o);r.add(new it(t.coord),!1);for(var f=t.segmentIndex+1;f<=n.segmentIndex;f++)r.add(i._edge.getCoordinate(f));u&&r.add(new it(n.coord))};Cr.prototype.iterator=function(){return this._nodeMap.values().iterator()};Cr.prototype.addSplitEdges=function(t){var n=this;this.addEndpoints(),this.addCollapsedNodes();for(var r=this.iterator(),i=r.next();r.hasNext();){var o=r.next(),u=n.createSplitEdge(i,o);t.add(u),i=o}};Cr.prototype.findCollapseIndex=function(t,n,r){if(!t.coord.equals2D(n.coord))return!1;var i=n.segmentIndex-t.segmentIndex;return n.isInterior()||i--,i===1?(r[0]=t.segmentIndex+1,!0):!1};Cr.prototype.findCollapsesFromInsertedNodes=function(t){for(var n=this,r=new Array(1).fill(null),i=this.iterator(),o=i.next();i.hasNext();){var u=i.next(),f=n.findCollapseIndex(o,u,r);f&&t.add(new es(r[0])),o=u}};Cr.prototype.getEdge=function(){return this._edge};Cr.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)};Cr.prototype.createSplitEdge=function(t,n){var r=this,i=n.segmentIndex-t.segmentIndex+2,o=this._edge.getCoordinate(n.segmentIndex),u=n.isInterior()||!n.coord.equals2D(o);u||i--;var f=new Array(i).fill(null),d=0;f[d++]=new it(t.coord);for(var _=t.segmentIndex+1;_<=n.segmentIndex;_++)f[d++]=r._edge.getCoordinate(_);return u&&(f[d]=new it(n.coord)),new xn(f,this._edge.getData())};Cr.prototype.add=function(t,n){var r=new Ro(this._edge,t,n,this._edge.getSegmentOctant(n)),i=this._nodeMap.get(r);return i!==null?(me.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this._nodeMap.put(r,r),r)};Cr.prototype.checkSplitEdgesCorrectness=function(t){var n=this._edge.getCoordinates(),r=t.get(0),i=r.getCoordinate(0);if(!i.equals2D(n[0]))throw new so("bad split edge start point at "+i);var o=t.get(t.size()-1),u=o.getCoordinates(),f=u[u.length-1];if(!f.equals2D(n[n.length-1]))throw new so("bad split edge end point at "+f)};Cr.prototype.interfaces_=function(){return[]};Cr.prototype.getClass=function(){return Cr};var ru=function(){};ru.prototype.interfaces_=function(){return[]};ru.prototype.getClass=function(){return ru};ru.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],n=arguments[1];if(t===0&&n===0)throw new cn("Cannot compute the octant for point ( "+t+", "+n+" )");var r=Math.abs(t),i=Math.abs(n);return t>=0?n>=0?r>=i?0:1:r>=i?7:6:n>=0?r>=i?3:2:r>=i?4:5}else if(arguments[0]instanceof it&&arguments[1]instanceof it){var o=arguments[0],u=arguments[1],f=u.x-o.x,d=u.y-o.y;if(f===0&&d===0)throw new cn("Cannot compute the octant for two identical points "+o);return ru.octant(f,d)}};var Ps=function(){};Ps.prototype.getCoordinates=function(){};Ps.prototype.size=function(){};Ps.prototype.getCoordinate=function(t){};Ps.prototype.isClosed=function(){};Ps.prototype.setData=function(t){};Ps.prototype.getData=function(){};Ps.prototype.interfaces_=function(){return[]};Ps.prototype.getClass=function(){return Ps};var Wc=function(){};Wc.prototype.addIntersection=function(t,n){};Wc.prototype.interfaces_=function(){return[Ps]};Wc.prototype.getClass=function(){return Wc};var xn=function(){this._nodeList=new Cr(this),this._pts=null,this._data=null;var t=arguments[0],n=arguments[1];this._pts=t,this._data=n};xn.prototype.getCoordinates=function(){return this._pts};xn.prototype.size=function(){return this._pts.length};xn.prototype.getCoordinate=function(t){return this._pts[t]};xn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};xn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))};xn.prototype.setData=function(t){this._data=t};xn.prototype.safeOctant=function(t,n){return t.equals2D(n)?0:ru.octant(t,n)};xn.prototype.getData=function(){return this._data};xn.prototype.addIntersection=function(){if(arguments.length===2){var t=arguments[0],n=arguments[1];this.addIntersectionNode(t,n)}else if(arguments.length===4){var r=arguments[0],i=arguments[1],o=arguments[3],u=new it(r.getIntersection(o));this.addIntersection(u,i)}};xn.prototype.toString=function(){return Ti.toLineString(new Cn(this._pts))};xn.prototype.getNodeList=function(){return this._nodeList};xn.prototype.addIntersectionNode=function(t,n){var r=n,i=r+1;if(i<this._pts.length){var o=this._pts[i];t.equals2D(o)&&(r=i)}var u=this._nodeList.add(t,r);return u};xn.prototype.addIntersections=function(t,n,r){for(var i=this,o=0;o<t.getIntersectionNum();o++)i.addIntersection(t,n,r,o)};xn.prototype.interfaces_=function(){return[Wc]};xn.prototype.getClass=function(){return xn};xn.getNodedSubstrings=function(){if(arguments.length===1){var t=arguments[0],n=new Ft;return xn.getNodedSubstrings(t,n),n}else if(arguments.length===2)for(var r=arguments[0],i=arguments[1],o=r.iterator();o.hasNext();){var u=o.next();u.getNodeList().addSplitEdges(i)}};var $t=function(){if(this.p0=null,this.p1=null,arguments.length===0)this.p0=new it,this.p1=new it;else if(arguments.length===1){var t=arguments[0];this.p0=new it(t.p0),this.p1=new it(t.p1)}else if(arguments.length===2)this.p0=arguments[0],this.p1=arguments[1];else if(arguments.length===4){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this.p0=new it(n,r),this.p1=new it(i,o)}},Nv={serialVersionUID:{configurable:!0}};$t.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)};$t.prototype.orientationIndex=function(){if(arguments[0]instanceof $t){var t=arguments[0],n=Gt.orientationIndex(this.p0,this.p1,t.p0),r=Gt.orientationIndex(this.p0,this.p1,t.p1);return n>=0&&r>=0||n<=0&&r<=0?Math.max(n,r):0}else if(arguments[0]instanceof it){var i=arguments[0];return Gt.orientationIndex(this.p0,this.p1,i)}};$t.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])};$t.prototype.isVertical=function(){return this.p0.x===this.p1.x};$t.prototype.equals=function(t){if(!(t instanceof $t))return!1;var n=t;return this.p0.equals(n.p0)&&this.p1.equals(n.p1)};$t.prototype.intersection=function(t){var n=new Sa;return n.computeIntersection(this.p0,this.p1,t.p0,t.p1),n.hasIntersection()?n.getIntersection(0):null};$t.prototype.project=function(){if(arguments[0]instanceof it){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new it(t);var n=this.projectionFactor(t),r=new it;return r.x=this.p0.x+n*(this.p1.x-this.p0.x),r.y=this.p0.y+n*(this.p1.y-this.p0.y),r}else if(arguments[0]instanceof $t){var i=arguments[0],o=this.projectionFactor(i.p0),u=this.projectionFactor(i.p1);if(o>=1&&u>=1||o<=0&&u<=0)return null;var f=this.project(i.p0);o<0&&(f=this.p0),o>1&&(f=this.p1);var d=this.project(i.p1);return u<0&&(d=this.p0),u>1&&(d=this.p1),new $t(f,d)}};$t.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()};$t.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)};$t.prototype.getCoordinate=function(t){return t===0?this.p0:this.p1};$t.prototype.distancePerpendicular=function(t){return Gt.distancePointLinePerpendicular(t,this.p0,this.p1)};$t.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)};$t.prototype.midPoint=function(){return $t.midPoint(this.p0,this.p1)};$t.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var n=this.p1.x-this.p0.x,r=this.p1.y-this.p0.y,i=n*n+r*r;if(i<=0)return ue.NaN;var o=((t.x-this.p0.x)*n+(t.y-this.p0.y)*r)/i;return o};$t.prototype.closestPoints=function(t){var n=this.intersection(t);if(n!==null)return[n,n];var r=new Array(2).fill(null),i=ue.MAX_VALUE,o=null,u=this.closestPoint(t.p0);i=u.distance(t.p0),r[0]=u,r[1]=t.p0;var f=this.closestPoint(t.p1);o=f.distance(t.p1),o<i&&(i=o,r[0]=f,r[1]=t.p1);var d=t.closestPoint(this.p0);o=d.distance(this.p0),o<i&&(i=o,r[0]=this.p0,r[1]=d);var _=t.closestPoint(this.p1);return o=_.distance(this.p1),o<i&&(i=o,r[0]=this.p1,r[1]=_),r};$t.prototype.closestPoint=function(t){var n=this.projectionFactor(t);if(n>0&&n<1)return this.project(t);var r=this.p0.distance(t),i=this.p1.distance(t);return r<i?this.p0:this.p1};$t.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)};$t.prototype.getLength=function(){return this.p0.distance(this.p1)};$t.prototype.compareTo=function(t){var n=t,r=this.p0.compareTo(n.p0);return r!==0?r:this.p1.compareTo(n.p1)};$t.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t};$t.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)};$t.prototype.lineIntersection=function(t){try{var n=Pi.intersection(this.p0,this.p1,t.p0,t.p1);return n}catch(r){if(!(r instanceof Tl))throw r}finally{}return null};$t.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)};$t.prototype.pointAlongOffset=function(t,n){var r=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),o=this.p1.x-this.p0.x,u=this.p1.y-this.p0.y,f=Math.sqrt(o*o+u*u),d=0,_=0;if(n!==0){if(f<=0)throw new Error("Cannot compute offset from zero-length line segment");d=n*o/f,_=n*u/f}var y=r-_,E=i+d,S=new it(y,E);return S};$t.prototype.setCoordinates=function(){if(arguments.length===1){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.p0.x=n.x,this.p0.y=n.y,this.p1.x=r.x,this.p1.y=r.y}};$t.prototype.segmentFraction=function(t){var n=this.projectionFactor(t);return n<0?n=0:(n>1||ue.isNaN(n))&&(n=1),n};$t.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"};$t.prototype.isHorizontal=function(){return this.p0.y===this.p1.y};$t.prototype.distance=function(){if(arguments[0]instanceof $t){var t=arguments[0];return Gt.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}else if(arguments[0]instanceof it){var n=arguments[0];return Gt.distancePointLine(n,this.p0,this.p1)}};$t.prototype.pointAlong=function(t){var n=new it;return n.x=this.p0.x+t*(this.p1.x-this.p0.x),n.y=this.p0.y+t*(this.p1.y-this.p0.y),n};$t.prototype.hashCode=function(){var t=ue.doubleToLongBits(this.p0.x);t^=ue.doubleToLongBits(this.p0.y)*31;var n=Math.trunc(t)^Math.trunc(t>>32),r=ue.doubleToLongBits(this.p1.x);r^=ue.doubleToLongBits(this.p1.y)*31;var i=Math.trunc(r)^Math.trunc(r>>32);return n^i};$t.prototype.interfaces_=function(){return[vi,Ci]};$t.prototype.getClass=function(){return $t};$t.midPoint=function(t,n){return new it((t.x+n.x)/2,(t.y+n.y)/2)};Nv.serialVersionUID.get=function(){return 0x2d2172135f411c00};Object.defineProperties($t,Nv);var Yc=function(){this.tempEnv1=new Jt,this.tempEnv2=new Jt,this._overlapSeg1=new $t,this._overlapSeg2=new $t};Yc.prototype.overlap=function(){if(arguments.length!==2){if(arguments.length===4){var t=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];t.getLineSegment(n,this._overlapSeg1),r.getLineSegment(i,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}};Yc.prototype.interfaces_=function(){return[]};Yc.prototype.getClass=function(){return Yc};var Hr=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this._pts=t,this._start=n,this._end=r,this._context=i};Hr.prototype.getLineSegment=function(t,n){n.p0=this._pts[t],n.p1=this._pts[t+1]};Hr.prototype.computeSelect=function(t,n,r,i){var o=this._pts[n],u=this._pts[r];if(i.tempEnv1.init(o,u),r-n===1)return i.select(this,n),null;if(!t.intersects(i.tempEnv1))return null;var f=Math.trunc((n+r)/2);n<f&&this.computeSelect(t,n,f,i),f<r&&this.computeSelect(t,f,r,i)};Hr.prototype.getCoordinates=function(){for(var t=this,n=new Array(this._end-this._start+1).fill(null),r=0,i=this._start;i<=this._end;i++)n[r++]=t._pts[i];return n};Hr.prototype.computeOverlaps=function(t,n){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,n)};Hr.prototype.setId=function(t){this._id=t};Hr.prototype.select=function(t,n){this.computeSelect(t,this._start,this._end,n)};Hr.prototype.getEnvelope=function(){if(this._env===null){var t=this._pts[this._start],n=this._pts[this._end];this._env=new Jt(t,n)}return this._env};Hr.prototype.getEndIndex=function(){return this._end};Hr.prototype.getStartIndex=function(){return this._start};Hr.prototype.getContext=function(){return this._context};Hr.prototype.getId=function(){return this._id};Hr.prototype.computeOverlapsInternal=function(t,n,r,i,o,u){var f=this._pts[t],d=this._pts[n],_=r._pts[i],y=r._pts[o];if(n-t===1&&o-i===1)return u.overlap(this,t,r,i),null;if(u.tempEnv1.init(f,d),u.tempEnv2.init(_,y),!u.tempEnv1.intersects(u.tempEnv2))return null;var E=Math.trunc((t+n)/2),S=Math.trunc((i+o)/2);t<E&&(i<S&&this.computeOverlapsInternal(t,E,r,i,S,u),S<o&&this.computeOverlapsInternal(t,E,r,S,o,u)),E<n&&(i<S&&this.computeOverlapsInternal(E,n,r,i,S,u),S<o&&this.computeOverlapsInternal(E,n,r,S,o,u))};Hr.prototype.interfaces_=function(){return[]};Hr.prototype.getClass=function(){return Hr};var ts=function(){};ts.prototype.interfaces_=function(){return[]};ts.prototype.getClass=function(){return ts};ts.getChainStartIndices=function(t){var n=0,r=new Ft;r.add(new es(n));do{var i=ts.findChainEnd(t,n);r.add(new es(i)),n=i}while(n<t.length-1);var o=ts.toIntArray(r);return o};ts.findChainEnd=function(t,n){for(var r=n;r<t.length-1&&t[r].equals2D(t[r+1]);)r++;if(r>=t.length-1)return t.length-1;for(var i=Xe.quadrant(t[r],t[r+1]),o=n+1;o<t.length;){if(!t[o-1].equals2D(t[o])){var u=Xe.quadrant(t[o-1],t[o]);if(u!==i)break}o++}return o-1};ts.getChains=function(){if(arguments.length===1){var t=arguments[0];return ts.getChains(t,null)}else if(arguments.length===2){for(var n=arguments[0],r=arguments[1],i=new Ft,o=ts.getChainStartIndices(n),u=0;u<o.length-1;u++){var f=new Hr(n,o[u],o[u+1],r);i.add(f)}return i}};ts.toIntArray=function(t){for(var n=new Array(t.size()).fill(null),r=0;r<n.length;r++)n[r]=t.get(r).intValue();return n};var ma=function(){};ma.prototype.computeNodes=function(t){};ma.prototype.getNodedSubstrings=function(){};ma.prototype.interfaces_=function(){return[]};ma.prototype.getClass=function(){return ma};var Jc=function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setSegmentIntersector(t)}}};Jc.prototype.setSegmentIntersector=function(t){this._segInt=t};Jc.prototype.interfaces_=function(){return[ma]};Jc.prototype.getClass=function(){return Jc};var am=function(e){function t(r){r?e.call(this,r):e.call(this),this._monoChains=new Ft,this._index=new Dv,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={SegmentOverlapAction:{configurable:!0}};return t.prototype.getMonotoneChains=function(){return this._monoChains},t.prototype.getNodedSubstrings=function(){return xn.getNodedSubstrings(this._nodedSegStrings)},t.prototype.getIndex=function(){return this._index},t.prototype.add=function(i){for(var o=this,u=ts.getChains(i.getCoordinates(),i),f=u.iterator();f.hasNext();){var d=f.next();d.setId(o._idCounter++),o._index.insert(d.getEnvelope(),d),o._monoChains.add(d)}},t.prototype.computeNodes=function(i){var o=this;this._nodedSegStrings=i;for(var u=i.iterator();u.hasNext();)o.add(u.next());this.intersectChains()},t.prototype.intersectChains=function(){for(var i=this,o=new Y_(this._segInt),u=this._monoChains.iterator();u.hasNext();)for(var f=u.next(),d=i._index.query(f.getEnvelope()),_=d.iterator();_.hasNext();){var y=_.next();if(y.getId()>f.getId()&&(f.computeOverlaps(y,o),i._nOverlaps++),i._segInt.isDone())return null}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.SegmentOverlapAction.get=function(){return Y_},Object.defineProperties(t,n),t}(Jc),Y_=function(e){function t(){e.call(this),this._si=null;var n=arguments[0];this._si=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.overlap=function(){if(arguments.length===4){var r=arguments[0],i=arguments[1],o=arguments[2],u=arguments[3],f=r.getContext(),d=o.getContext();this._si.processIntersections(f,i,d,u)}else return e.prototype.overlap.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Yc),Be=function e(){if(this._quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=e.CAP_ROUND,this._joinStyle=e.JOIN_ROUND,this._mitreLimit=e.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=e.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setQuadrantSegments(t)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(arguments.length===4){var i=arguments[0],o=arguments[1],u=arguments[2],f=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(u),this.setMitreLimit(f)}}},fo={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Be.prototype.getEndCapStyle=function(){return this._endCapStyle};Be.prototype.isSingleSided=function(){return this._isSingleSided};Be.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,this._quadrantSegments===0&&(this._joinStyle=Be.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Be.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Be.JOIN_ROUND&&(this._quadrantSegments=Be.DEFAULT_QUADRANT_SEGMENTS)};Be.prototype.getJoinStyle=function(){return this._joinStyle};Be.prototype.setJoinStyle=function(t){this._joinStyle=t};Be.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t};Be.prototype.getSimplifyFactor=function(){return this._simplifyFactor};Be.prototype.getQuadrantSegments=function(){return this._quadrantSegments};Be.prototype.setEndCapStyle=function(t){this._endCapStyle=t};Be.prototype.getMitreLimit=function(){return this._mitreLimit};Be.prototype.setMitreLimit=function(t){this._mitreLimit=t};Be.prototype.setSingleSided=function(t){this._isSingleSided=t};Be.prototype.interfaces_=function(){return[]};Be.prototype.getClass=function(){return Be};Be.bufferDistanceError=function(t){var n=Math.PI/2/t;return 1-Math.cos(n/2)};fo.CAP_ROUND.get=function(){return 1};fo.CAP_FLAT.get=function(){return 2};fo.CAP_SQUARE.get=function(){return 3};fo.JOIN_ROUND.get=function(){return 1};fo.JOIN_MITRE.get=function(){return 2};fo.JOIN_BEVEL.get=function(){return 3};fo.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8};fo.DEFAULT_MITRE_LIMIT.get=function(){return 5};fo.DEFAULT_SIMPLIFY_FACTOR.get=function(){return .01};Object.defineProperties(Be,fo);var vn=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Gt.COUNTERCLOCKWISE,this._inputLine=t||null},ph={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};vn.prototype.isDeletable=function(t,n,r,i){var o=this._inputLine[t],u=this._inputLine[n],f=this._inputLine[r];return!this.isConcave(o,u,f)||!this.isShallow(o,u,f,i)?!1:this.isShallowSampled(o,u,t,r,i)};vn.prototype.deleteShallowConcavities=function(){for(var t=this,n=1,r=this.findNextNonDeletedIndex(n),i=this.findNextNonDeletedIndex(r),o=!1;i<this._inputLine.length;){var u=!1;t.isDeletable(n,r,i,t._distanceTol)&&(t._isDeleted[r]=vn.DELETE,u=!0,o=!0),u?n=i:n=r,r=t.findNextNonDeletedIndex(n),i=t.findNextNonDeletedIndex(r)}return o};vn.prototype.isShallowConcavity=function(t,n,r,i){var o=Gt.computeOrientation(t,n,r),u=o===this._angleOrientation;if(!u)return!1;var f=Gt.distancePointLine(n,t,r);return f<i};vn.prototype.isShallowSampled=function(t,n,r,i,o){var u=this,f=Math.trunc((i-r)/vn.NUM_PTS_TO_CHECK);f<=0&&(f=1);for(var d=r;d<i;d+=f)if(!u.isShallow(t,n,u._inputLine[d],o))return!1;return!0};vn.prototype.isConcave=function(t,n,r){var i=Gt.computeOrientation(t,n,r),o=i===this._angleOrientation;return o};vn.prototype.simplify=function(t){var n=this;this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=Gt.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var r=!1;do r=n.deleteShallowConcavities();while(r);return this.collapseLine()};vn.prototype.findNextNonDeletedIndex=function(t){for(var n=t+1;n<this._inputLine.length&&this._isDeleted[n]===vn.DELETE;)n++;return n};vn.prototype.isShallow=function(t,n,r,i){var o=Gt.distancePointLine(n,t,r);return o<i};vn.prototype.collapseLine=function(){for(var t=this,n=new ch,r=0;r<this._inputLine.length;r++)t._isDeleted[r]!==vn.DELETE&&n.add(t._inputLine[r]);return n.toCoordinateArray()};vn.prototype.interfaces_=function(){return[]};vn.prototype.getClass=function(){return vn};vn.simplify=function(t,n){var r=new vn(t);return r.simplify(n)};ph.INIT.get=function(){return 0};ph.DELETE.get=function(){return 1};ph.KEEP.get=function(){return 1};ph.NUM_PTS_TO_CHECK.get=function(){return 10};Object.defineProperties(vn,ph);var oi=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Ft},Ov={COORDINATE_ARRAY_TYPE:{configurable:!0}};oi.prototype.getCoordinates=function(){var t=this._ptList.toArray(oi.COORDINATE_ARRAY_TYPE);return t};oi.prototype.setPrecisionModel=function(t){this._precisionModel=t};oi.prototype.addPt=function(t){var n=new it(t);if(this._precisionModel.makePrecise(n),this.isRedundant(n))return null;this._ptList.add(n)};oi.prototype.revere=function(){};oi.prototype.addPts=function(t,n){var r=this;if(n)for(var i=0;i<t.length;i++)r.addPt(t[i]);else for(var o=t.length-1;o>=0;o--)r.addPt(t[o])};oi.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var n=this._ptList.get(this._ptList.size()-1),r=t.distance(n);return r<this._minimimVertexDistance};oi.prototype.toString=function(){var t=new xe,n=t.createLineString(this.getCoordinates());return n.toString()};oi.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new it(this._ptList.get(0)),n=this._ptList.get(this._ptList.size()-1);if(t.equals(n))return null;this._ptList.add(t)};oi.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t};oi.prototype.interfaces_=function(){return[]};oi.prototype.getClass=function(){return oi};Ov.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)};Object.defineProperties(oi,Ov);var Te=function(){},vu={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Te.prototype.interfaces_=function(){return[]};Te.prototype.getClass=function(){return Te};Te.toDegrees=function(t){return t*180/Math.PI};Te.normalize=function(t){for(;t>Math.PI;)t-=Te.PI_TIMES_2;for(;t<=-Math.PI;)t+=Te.PI_TIMES_2;return t};Te.angle=function(){if(arguments.length===1){var t=arguments[0];return Math.atan2(t.y,t.x)}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=r.x-n.x,o=r.y-n.y;return Math.atan2(o,i)}};Te.isAcute=function(t,n,r){var i=t.x-n.x,o=t.y-n.y,u=r.x-n.x,f=r.y-n.y,d=i*u+o*f;return d>0};Te.isObtuse=function(t,n,r){var i=t.x-n.x,o=t.y-n.y,u=r.x-n.x,f=r.y-n.y,d=i*u+o*f;return d<0};Te.interiorAngle=function(t,n,r){var i=Te.angle(n,t),o=Te.angle(n,r);return Math.abs(o-i)};Te.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Te.PI_TIMES_2;t>=Te.PI_TIMES_2&&(t=0)}else{for(;t>=Te.PI_TIMES_2;)t-=Te.PI_TIMES_2;t<0&&(t=0)}return t};Te.angleBetween=function(t,n,r){var i=Te.angle(n,t),o=Te.angle(n,r);return Te.diff(i,o)};Te.diff=function(t,n){var r=null;return t<n?r=n-t:r=t-n,r>Math.PI&&(r=2*Math.PI-r),r};Te.toRadians=function(t){return t*Math.PI/180};Te.getTurn=function(t,n){var r=Math.sin(n-t);return r>0?Te.COUNTERCLOCKWISE:r<0?Te.CLOCKWISE:Te.NONE};Te.angleBetweenOriented=function(t,n,r){var i=Te.angle(n,t),o=Te.angle(n,r),u=o-i;return u<=-Math.PI?u+Te.PI_TIMES_2:u>Math.PI?u-Te.PI_TIMES_2:u};vu.PI_TIMES_2.get=function(){return 2*Math.PI};vu.PI_OVER_2.get=function(){return Math.PI/2};vu.PI_OVER_4.get=function(){return Math.PI/4};vu.COUNTERCLOCKWISE.get=function(){return Gt.COUNTERCLOCKWISE};vu.CLOCKWISE.get=function(){return Gt.CLOCKWISE};vu.NONE.get=function(){return Gt.COLLINEAR};Object.defineProperties(Te,vu);var on=function e(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new $t,this._seg1=new $t,this._offset0=new $t,this._offset1=new $t,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=t,this._bufParams=n,this._li=new Sa,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Be.JOIN_ROUND&&(this._closingSegLengthFactor=e.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},dh={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};on.prototype.addNextSegment=function(t,n){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var r=Gt.computeOrientation(this._s0,this._s1,this._s2),i=r===Gt.CLOCKWISE&&this._side===kt.LEFT||r===Gt.COUNTERCLOCKWISE&&this._side===kt.RIGHT;r===0?this.addCollinear(n):i?this.addOutsideTurn(r,n):this.addInsideTurn(r,n)};on.prototype.addLineEndCap=function(t,n){var r=new $t(t,n),i=new $t;this.computeOffsetSegment(r,kt.LEFT,this._distance,i);var o=new $t;this.computeOffsetSegment(r,kt.RIGHT,this._distance,o);var u=n.x-t.x,f=n.y-t.y,d=Math.atan2(f,u);switch(this._bufParams.getEndCapStyle()){case Be.CAP_ROUND:this._segList.addPt(i.p1),this.addFilletArc(n,d+Math.PI/2,d-Math.PI/2,Gt.CLOCKWISE,this._distance),this._segList.addPt(o.p1);break;case Be.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(o.p1);break;case Be.CAP_SQUARE:var _=new it;_.x=Math.abs(this._distance)*Math.cos(d),_.y=Math.abs(this._distance)*Math.sin(d);var y=new it(i.p1.x+_.x,i.p1.y+_.y),E=new it(o.p1.x+_.x,o.p1.y+_.y);this._segList.addPt(y),this._segList.addPt(E);break}};on.prototype.getCoordinates=function(){var t=this._segList.getCoordinates();return t};on.prototype.addMitreJoin=function(t,n,r,i){var o=!0,u=null;try{u=Pi.intersection(n.p0,n.p1,r.p0,r.p1);var f=i<=0?1:u.distance(t)/Math.abs(i);f>this._bufParams.getMitreLimit()&&(o=!1)}catch(d){if(d instanceof Tl)u=new it(0,0),o=!1;else throw d}finally{}o?this._segList.addPt(u):this.addLimitedMitreJoin(n,r,i,this._bufParams.getMitreLimit())};on.prototype.addFilletCorner=function(t,n,r,i,o){var u=n.x-t.x,f=n.y-t.y,d=Math.atan2(f,u),_=r.x-t.x,y=r.y-t.y,E=Math.atan2(y,_);i===Gt.CLOCKWISE?d<=E&&(d+=2*Math.PI):d>=E&&(d-=2*Math.PI),this._segList.addPt(n),this.addFilletArc(t,d,E,i,o),this._segList.addPt(r)};on.prototype.addOutsideTurn=function(t,n){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*on.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Be.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Be.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(n&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))};on.prototype.createSquare=function(t){this._segList.addPt(new it(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new it(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new it(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new it(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()};on.prototype.addSegments=function(t,n){this._segList.addPts(t,n)};on.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)};on.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)};on.prototype.initSideSegments=function(t,n,r){this._s1=t,this._s2=n,this._side=r,this._seg1.setCoordinates(t,n),this.computeOffsetSegment(this._seg1,r,this._distance,this._offset1)};on.prototype.addLimitedMitreJoin=function(t,n,r,i){var o=this._seg0.p1,u=Te.angle(o,this._seg0.p0),f=Te.angleBetweenOriented(this._seg0.p0,o,this._seg1.p1),d=f/2,_=Te.normalize(u+d),y=Te.normalize(_+Math.PI),E=i*r,S=E*Math.abs(Math.sin(d)),T=r-S,I=o.x+E*Math.cos(y),z=o.y+E*Math.sin(y),G=new it(I,z),W=new $t(o,G),Q=W.pointAlongOffset(1,T),rt=W.pointAlongOffset(1,-T);this._side===kt.LEFT?(this._segList.addPt(Q),this._segList.addPt(rt)):(this._segList.addPt(rt),this._segList.addPt(Q))};on.prototype.computeOffsetSegment=function(t,n,r,i){var o=n===kt.LEFT?1:-1,u=t.p1.x-t.p0.x,f=t.p1.y-t.p0.y,d=Math.sqrt(u*u+f*f),_=o*r*u/d,y=o*r*f/d;i.p0.x=t.p0.x-y,i.p0.y=t.p0.y+_,i.p1.x=t.p1.x-y,i.p1.y=t.p1.y+_};on.prototype.addFilletArc=function(t,n,r,i,o){var u=this,f=i===Gt.CLOCKWISE?-1:1,d=Math.abs(n-r),_=Math.trunc(d/this._filletAngleQuantum+.5);if(_<1)return null;for(var y=0,E=d/_,S=y,T=new it;S<d;){var I=n+f*S;T.x=t.x+o*Math.cos(I),T.y=t.y+o*Math.sin(I),u._segList.addPt(T),S+=E}};on.prototype.addInsideTurn=function(t,n){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*on.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var r=new it((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r);var i=new it((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}};on.prototype.createCircle=function(t){var n=new it(t.x+this._distance,t.y);this._segList.addPt(n),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()};on.prototype.addBevelJoin=function(t,n){this._segList.addPt(t.p1),this._segList.addPt(n.p0)};on.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new oi,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*on.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)};on.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2);var n=this._li.getIntersectionNum();n>=2&&(this._bufParams.getJoinStyle()===Be.JOIN_BEVEL||this._bufParams.getJoinStyle()===Be.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Gt.CLOCKWISE,this._distance))};on.prototype.closeRing=function(){this._segList.closeRing()};on.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle};on.prototype.interfaces_=function(){return[]};on.prototype.getClass=function(){return on};dh.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return .001};dh.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return .001};dh.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6};dh.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80};Object.defineProperties(on,dh);var Pr=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],n=arguments[1];this._precisionModel=t,this._bufParams=n};Pr.prototype.getOffsetCurve=function(t,n){if(this._distance=n,n===0)return null;var r=n<0,i=Math.abs(n),o=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],o):this.computeOffsetCurve(t,r,o);var u=o.getCoordinates();return r&&be.reverse(u),u};Pr.prototype.computeSingleSidedBufferCurve=function(t,n,r){var i=this.simplifyTolerance(this._distance);if(n){r.addSegments(t,!0);var o=vn.simplify(t,-i),u=o.length-1;r.initSideSegments(o[u],o[u-1],kt.LEFT),r.addFirstSegment();for(var f=u-2;f>=0;f--)r.addNextSegment(o[f],!0)}else{r.addSegments(t,!1);var d=vn.simplify(t,i),_=d.length-1;r.initSideSegments(d[0],d[1],kt.LEFT),r.addFirstSegment();for(var y=2;y<=_;y++)r.addNextSegment(d[y],!0)}r.addLastSegment(),r.closeRing()};Pr.prototype.computeRingBufferCurve=function(t,n,r){var i=this.simplifyTolerance(this._distance);n===kt.RIGHT&&(i=-i);var o=vn.simplify(t,i),u=o.length-1;r.initSideSegments(o[u-1],o[0],n);for(var f=1;f<=u;f++){var d=f!==1;r.addNextSegment(o[f],d)}r.closeRing()};Pr.prototype.computeLineBufferCurve=function(t,n){var r=this.simplifyTolerance(this._distance),i=vn.simplify(t,r),o=i.length-1;n.initSideSegments(i[0],i[1],kt.LEFT);for(var u=2;u<=o;u++)n.addNextSegment(i[u],!0);n.addLastSegment(),n.addLineEndCap(i[o-1],i[o]);var f=vn.simplify(t,-r),d=f.length-1;n.initSideSegments(f[d],f[d-1],kt.LEFT);for(var _=d-2;_>=0;_--)n.addNextSegment(f[_],!0);n.addLastSegment(),n.addLineEndCap(f[1],f[0]),n.closeRing()};Pr.prototype.computePointCurve=function(t,n){switch(this._bufParams.getEndCapStyle()){case Be.CAP_ROUND:n.createCircle(t);break;case Be.CAP_SQUARE:n.createSquare(t);break}};Pr.prototype.getLineCurve=function(t,n){if(this._distance=n,n<0&&!this._bufParams.isSingleSided()||n===0)return null;var r=Math.abs(n),i=this.getSegGen(r);if(t.length<=1)this.computePointCurve(t[0],i);else if(this._bufParams.isSingleSided()){var o=n<0;this.computeSingleSidedBufferCurve(t,o,i)}else this.computeLineBufferCurve(t,i);var u=i.getCoordinates();return u};Pr.prototype.getBufferParameters=function(){return this._bufParams};Pr.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()};Pr.prototype.getRingCurve=function(t,n,r){if(this._distance=r,t.length<=2)return this.getLineCurve(t,r);if(r===0)return Pr.copyCoordinates(t);var i=this.getSegGen(r);return this.computeRingBufferCurve(t,n,i),i.getCoordinates()};Pr.prototype.computeOffsetCurve=function(t,n,r){var i=this.simplifyTolerance(this._distance);if(n){var o=vn.simplify(t,-i),u=o.length-1;r.initSideSegments(o[u],o[u-1],kt.LEFT),r.addFirstSegment();for(var f=u-2;f>=0;f--)r.addNextSegment(o[f],!0)}else{var d=vn.simplify(t,i),_=d.length-1;r.initSideSegments(d[0],d[1],kt.LEFT),r.addFirstSegment();for(var y=2;y<=_;y++)r.addNextSegment(d[y],!0)}r.addLastSegment()};Pr.prototype.getSegGen=function(t){return new on(this._precisionModel,this._bufParams,t)};Pr.prototype.interfaces_=function(){return[]};Pr.prototype.getClass=function(){return Pr};Pr.copyCoordinates=function(t){for(var n=new Array(t.length).fill(null),r=0;r<n.length;r++)n[r]=new it(t[r]);return n};var iu=function(){this._subgraphs=null,this._seg=new $t,this._cga=new Gt;var t=arguments[0];this._subgraphs=t},Rv={DepthSegment:{configurable:!0}};iu.prototype.findStabbedSegments=function(){var t=this;if(arguments.length===1){for(var n=arguments[0],r=new Ft,i=this._subgraphs.iterator();i.hasNext();){var o=i.next(),u=o.getEnvelope();n.y<u.getMinY()||n.y>u.getMaxY()||t.findStabbedSegments(n,o.getDirectedEdges(),r)}return r}else if(arguments.length===3){if(se(arguments[2],Ii)&&arguments[0]instanceof it&&arguments[1]instanceof Lg)for(var f=arguments[0],d=arguments[1],_=arguments[2],y=d.getEdge().getCoordinates(),E=0;E<y.length-1;E++){t._seg.p0=y[E],t._seg.p1=y[E+1],t._seg.p0.y>t._seg.p1.y&&t._seg.reverse();var S=Math.max(t._seg.p0.x,t._seg.p1.x);if(!(S<f.x)&&!t._seg.isHorizontal()&&!(f.y<t._seg.p0.y||f.y>t._seg.p1.y)&&Gt.computeOrientation(t._seg.p0,t._seg.p1,f)!==Gt.RIGHT){var T=d.getDepth(kt.LEFT);t._seg.p0.equals(y[E])||(T=d.getDepth(kt.RIGHT));var I=new _a(t._seg,T);_.add(I)}}else if(se(arguments[2],Ii)&&arguments[0]instanceof it&&se(arguments[1],Ii))for(var z=arguments[0],G=arguments[1],W=arguments[2],Q=G.iterator();Q.hasNext();){var rt=Q.next();rt.isForward()&&t.findStabbedSegments(z,rt,W)}}};iu.prototype.getDepth=function(t){var n=this.findStabbedSegments(t);if(n.size()===0)return 0;var r=Di.min(n);return r._leftDepth};iu.prototype.interfaces_=function(){return[]};iu.prototype.getClass=function(){return iu};Rv.DepthSegment.get=function(){return _a};Object.defineProperties(iu,Rv);var _a=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],n=arguments[1];this._upwardSeg=new $t(t),this._leftDepth=n};_a.prototype.compareTo=function(t){var n=t;if(this._upwardSeg.minX()>=n._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=n._upwardSeg.minX())return-1;var r=this._upwardSeg.orientationIndex(n._upwardSeg);return r!==0||(r=-1*n._upwardSeg.orientationIndex(this._upwardSeg),r!==0)?r:this._upwardSeg.compareTo(n._upwardSeg)};_a.prototype.compareX=function(t,n){var r=t.p0.compareTo(n.p0);return r!==0?r:t.p1.compareTo(n.p1)};_a.prototype.toString=function(){return this._upwardSeg.toString()};_a.prototype.interfaces_=function(){return[vi]};_a.prototype.getClass=function(){return _a};var ze=function(t,n,r){this.p0=t||null,this.p1=n||null,this.p2=r||null};ze.prototype.area=function(){return ze.area(this.p0,this.p1,this.p2)};ze.prototype.signedArea=function(){return ze.signedArea(this.p0,this.p1,this.p2)};ze.prototype.interpolateZ=function(t){if(t===null)throw new cn("Supplied point is null.");return ze.interpolateZ(t,this.p0,this.p1,this.p2)};ze.prototype.longestSideLength=function(){return ze.longestSideLength(this.p0,this.p1,this.p2)};ze.prototype.isAcute=function(){return ze.isAcute(this.p0,this.p1,this.p2)};ze.prototype.circumcentre=function(){return ze.circumcentre(this.p0,this.p1,this.p2)};ze.prototype.area3D=function(){return ze.area3D(this.p0,this.p1,this.p2)};ze.prototype.centroid=function(){return ze.centroid(this.p0,this.p1,this.p2)};ze.prototype.inCentre=function(){return ze.inCentre(this.p0,this.p1,this.p2)};ze.prototype.interfaces_=function(){return[]};ze.prototype.getClass=function(){return ze};ze.area=function(t,n,r){return Math.abs(((r.x-t.x)*(n.y-t.y)-(n.x-t.x)*(r.y-t.y))/2)};ze.signedArea=function(t,n,r){return((r.x-t.x)*(n.y-t.y)-(n.x-t.x)*(r.y-t.y))/2};ze.det=function(t,n,r,i){return t*i-n*r};ze.interpolateZ=function(t,n,r,i){var o=n.x,u=n.y,f=r.x-o,d=i.x-o,_=r.y-u,y=i.y-u,E=f*y-d*_,S=t.x-o,T=t.y-u,I=(y*S-d*T)/E,z=(-_*S+f*T)/E,G=n.z+I*(r.z-n.z)+z*(i.z-n.z);return G};ze.longestSideLength=function(t,n,r){var i=t.distance(n),o=n.distance(r),u=r.distance(t),f=i;return o>f&&(f=o),u>f&&(f=u),f};ze.isAcute=function(t,n,r){return!(!Te.isAcute(t,n,r)||!Te.isAcute(n,r,t)||!Te.isAcute(r,t,n))};ze.circumcentre=function(t,n,r){var i=r.x,o=r.y,u=t.x-i,f=t.y-o,d=n.x-i,_=n.y-o,y=2*ze.det(u,f,d,_),E=ze.det(f,u*u+f*f,_,d*d+_*_),S=ze.det(u,u*u+f*f,d,d*d+_*_),T=i-E/y,I=o+S/y;return new it(T,I)};ze.perpendicularBisector=function(t,n){var r=n.x-t.x,i=n.y-t.y,o=new Pi(t.x+r/2,t.y+i/2,1),u=new Pi(t.x-i+r/2,t.y+r+i/2,1);return new Pi(o,u)};ze.angleBisector=function(t,n,r){var i=n.distance(t),o=n.distance(r),u=i/(i+o),f=r.x-t.x,d=r.y-t.y,_=new it(t.x+u*f,t.y+u*d);return _};ze.area3D=function(t,n,r){var i=n.x-t.x,o=n.y-t.y,u=n.z-t.z,f=r.x-t.x,d=r.y-t.y,_=r.z-t.z,y=o*_-u*d,E=u*f-i*_,S=i*d-o*f,T=y*y+E*E+S*S,I=Math.sqrt(T)/2;return I};ze.centroid=function(t,n,r){var i=(t.x+n.x+r.x)/3,o=(t.y+n.y+r.y)/3;return new it(i,o)};ze.inCentre=function(t,n,r){var i=n.distance(r),o=t.distance(r),u=t.distance(n),f=i+o+u,d=(i*t.x+o*n.x+u*r.x)/f,_=(i*t.y+o*n.y+u*r.y)/f;return new it(d,_)};var yi=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Ft;var t=arguments[0],n=arguments[1],r=arguments[2];this._inputGeom=t,this._distance=n,this._curveBuilder=r};yi.prototype.addPoint=function(t){if(this._distance<=0)return null;var n=t.getCoordinates(),r=this._curveBuilder.getLineCurve(n,this._distance);this.addCurve(r,lt.EXTERIOR,lt.INTERIOR)};yi.prototype.addPolygon=function(t){var n=this,r=this._distance,i=kt.LEFT;this._distance<0&&(r=-this._distance,i=kt.RIGHT);var o=t.getExteriorRing(),u=be.removeRepeatedPoints(o.getCoordinates());if(this._distance<0&&this.isErodedCompletely(o,this._distance)||this._distance<=0&&u.length<3)return null;this.addPolygonRing(u,r,i,lt.EXTERIOR,lt.INTERIOR);for(var f=0;f<t.getNumInteriorRing();f++){var d=t.getInteriorRingN(f),_=be.removeRepeatedPoints(d.getCoordinates());n._distance>0&&n.isErodedCompletely(d,-n._distance)||n.addPolygonRing(_,r,kt.opposite(i),lt.INTERIOR,lt.EXTERIOR)}};yi.prototype.isTriangleErodedCompletely=function(t,n){var r=new ze(t[0],t[1],t[2]),i=r.inCentre(),o=Gt.distancePointLine(i,r.p0,r.p1);return o<Math.abs(n)};yi.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var n=be.removeRepeatedPoints(t.getCoordinates()),r=this._curveBuilder.getLineCurve(n,this._distance);this.addCurve(r,lt.EXTERIOR,lt.INTERIOR)};yi.prototype.addCurve=function(t,n,r){if(t===null||t.length<2)return null;var i=new xn(t,new je(0,lt.BOUNDARY,n,r));this._curveList.add(i)};yi.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList};yi.prototype.addPolygonRing=function(t,n,r,i,o){if(n===0&&t.length<Ss.MINIMUM_VALID_SIZE)return null;var u=i,f=o;t.length>=Ss.MINIMUM_VALID_SIZE&&Gt.isCCW(t)&&(u=o,f=i,r=kt.opposite(r));var d=this._curveBuilder.getRingCurve(t,r,n);this.addCurve(d,u,f)};yi.prototype.add=function(t){if(t.isEmpty())return null;t instanceof On?this.addPolygon(t):t instanceof _n?this.addLineString(t):t instanceof jr?this.addPoint(t):t instanceof dl?this.addCollection(t):t instanceof ga?this.addCollection(t):t instanceof Ls?this.addCollection(t):t instanceof yr&&this.addCollection(t)};yi.prototype.isErodedCompletely=function(t,n){var r=t.getCoordinates();if(r.length<4)return n<0;if(r.length===4)return this.isTriangleErodedCompletely(r,n);var i=t.getEnvelopeInternal(),o=Math.min(i.getHeight(),i.getWidth());return n<0&&2*Math.abs(n)>o};yi.prototype.addCollection=function(t){for(var n=this,r=0;r<t.getNumGeometries();r++){var i=t.getGeometryN(r);n.add(i)}};yi.prototype.interfaces_=function(){return[]};yi.prototype.getClass=function(){return yi};var yl=function(){};yl.prototype.locate=function(t){};yl.prototype.interfaces_=function(){return[]};yl.prototype.getClass=function(){return yl};var xs=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};xs.prototype.next=function(){if(this._atStart)return this._atStart=!1,xs.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new kl;var t=this._parent.getGeometryN(this._index++);return t instanceof yr?(this._subcollectionIterator=new xs(t),this._subcollectionIterator.next()):t};xs.prototype.remove=function(){throw new Error(this.getClass().getName())};xs.prototype.hasNext=function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)};xs.prototype.interfaces_=function(){return[Al]};xs.prototype.getClass=function(){return xs};xs.isAtomic=function(t){return!(t instanceof yr)};var ri=function(){this._geom=null;var t=arguments[0];this._geom=t};ri.prototype.locate=function(t){return ri.locate(t,this._geom)};ri.prototype.interfaces_=function(){return[yl]};ri.prototype.getClass=function(){return ri};ri.isPointInRing=function(t,n){return n.getEnvelopeInternal().intersects(t)?Gt.isPointInRing(t,n.getCoordinates()):!1};ri.containsPointInPolygon=function(t,n){if(n.isEmpty())return!1;var r=n.getExteriorRing();if(!ri.isPointInRing(t,r))return!1;for(var i=0;i<n.getNumInteriorRing();i++){var o=n.getInteriorRingN(i);if(ri.isPointInRing(t,o))return!1}return!0};ri.containsPoint=function(t,n){if(n instanceof On)return ri.containsPointInPolygon(t,n);if(n instanceof yr)for(var r=new xs(n);r.hasNext();){var i=r.next();if(i!==n&&ri.containsPoint(t,i))return!0}return!1};ri.locate=function(t,n){return n.isEmpty()?lt.EXTERIOR:ri.containsPoint(t,n)?lt.INTERIOR:lt.EXTERIOR};var ar=function(){this._edgeMap=new sr,this._edgeList=null,this._ptInAreaLocation=[lt.NONE,lt.NONE]};ar.prototype.getNextCW=function(t){this.getEdges();var n=this._edgeList.indexOf(t),r=n-1;return n===0&&(r=this._edgeList.size()-1),this._edgeList.get(r)};ar.prototype.propagateSideLabels=function(t){for(var n=lt.NONE,r=this.iterator();r.hasNext();){var i=r.next(),o=i.getLabel();o.isArea(t)&&o.getLocation(t,kt.LEFT)!==lt.NONE&&(n=o.getLocation(t,kt.LEFT))}if(n===lt.NONE)return null;for(var u=n,f=this.iterator();f.hasNext();){var d=f.next(),_=d.getLabel();if(_.getLocation(t,kt.ON)===lt.NONE&&_.setLocation(t,kt.ON,u),_.isArea(t)){var y=_.getLocation(t,kt.LEFT),E=_.getLocation(t,kt.RIGHT);if(E!==lt.NONE){if(E!==u)throw new ao("side location conflict",d.getCoordinate());y===lt.NONE&&me.shouldNeverReachHere("found single null side (at "+d.getCoordinate()+")"),u=y}else me.isTrue(_.getLocation(t,kt.LEFT)===lt.NONE,"found single null side"),_.setLocation(t,kt.RIGHT,u),_.setLocation(t,kt.LEFT,u)}}};ar.prototype.getCoordinate=function(){var t=this.iterator();if(!t.hasNext())return null;var n=t.next();return n.getCoordinate()};ar.prototype.print=function(t){Yn.out.println("EdgeEndStar:   "+this.getCoordinate());for(var n=this.iterator();n.hasNext();){var r=n.next();r.print(t)}};ar.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)};ar.prototype.checkAreaLabelsConsistent=function(t){var n=this.getEdges();if(n.size()<=0)return!0;var r=n.size()-1,i=n.get(r).getLabel(),o=i.getLocation(t,kt.LEFT);me.isTrue(o!==lt.NONE,"Found unlabelled area edge");for(var u=o,f=this.iterator();f.hasNext();){var d=f.next(),_=d.getLabel();me.isTrue(_.isArea(t),"Found non-area edge");var y=_.getLocation(t,kt.LEFT),E=_.getLocation(t,kt.RIGHT);if(y===E||E!==u)return!1;u=y}return!0};ar.prototype.findIndex=function(t){var n=this;this.iterator();for(var r=0;r<this._edgeList.size();r++){var i=n._edgeList.get(r);if(i===t)return r}return-1};ar.prototype.iterator=function(){return this.getEdges().iterator()};ar.prototype.getEdges=function(){return this._edgeList===null&&(this._edgeList=new Ft(this._edgeMap.values())),this._edgeList};ar.prototype.getLocation=function(t,n,r){return this._ptInAreaLocation[t]===lt.NONE&&(this._ptInAreaLocation[t]=ri.locate(n,r[t].getGeometry())),this._ptInAreaLocation[t]};ar.prototype.toString=function(){var t=new hs;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append(`
`);for(var n=this.iterator();n.hasNext();){var r=n.next();t.append(r),t.append(`
`)}return t.toString()};ar.prototype.computeEdgeEndLabels=function(t){for(var n=this.iterator();n.hasNext();){var r=n.next();r.computeLabel(t)}};ar.prototype.computeLabelling=function(t){var n=this;this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var r=[!1,!1],i=this.iterator();i.hasNext();)for(var o=i.next(),u=o.getLabel(),f=0;f<2;f++)u.isLine(f)&&u.getLocation(f)===lt.BOUNDARY&&(r[f]=!0);for(var d=this.iterator();d.hasNext();)for(var _=d.next(),y=_.getLabel(),E=0;E<2;E++)if(y.isAnyNull(E)){var S=lt.NONE;if(r[E])S=lt.EXTERIOR;else{var T=_.getCoordinate();S=n.getLocation(E,T,t)}y.setAllLocationsIfNull(E,S)}};ar.prototype.getDegree=function(){return this._edgeMap.size()};ar.prototype.insertEdgeEnd=function(t,n){this._edgeMap.put(t,n),this._edgeList=null};ar.prototype.interfaces_=function(){return[]};ar.prototype.getClass=function(){return ar};var G4=function(e){function t(){e.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.linkResultDirectedEdges=function(){var r=this;this.getResultAreaEdges();for(var i=null,o=null,u=this._SCANNING_FOR_INCOMING,f=0;f<this._resultAreaEdgeList.size();f++){var d=r._resultAreaEdgeList.get(f),_=d.getSym();if(d.getLabel().isArea())switch(i===null&&d.isInResult()&&(i=d),u){case r._SCANNING_FOR_INCOMING:if(!_.isInResult())continue;o=_,u=r._LINKING_TO_OUTGOING;break;case r._LINKING_TO_OUTGOING:if(!d.isInResult())continue;o.setNext(d),u=r._SCANNING_FOR_INCOMING;break}}if(u===this._LINKING_TO_OUTGOING){if(i===null)throw new ao("no outgoing dirEdge found",this.getCoordinate());me.isTrue(i.isInResult(),"unable to link last incoming dirEdge"),o.setNext(i)}},t.prototype.insert=function(r){var i=r;this.insertEdgeEnd(i,i)},t.prototype.getRightmostEdge=function(){var r=this.getEdges(),i=r.size();if(i<1)return null;var o=r.get(0);if(i===1)return o;var u=r.get(i-1),f=o.getQuadrant(),d=u.getQuadrant();return Xe.isNorthern(f)&&Xe.isNorthern(d)?o:!Xe.isNorthern(f)&&!Xe.isNorthern(d)?u:o.getDy()!==0?o:u.getDy()!==0?u:(me.shouldNeverReachHere("found two horizontal edges incident on node"),null)},t.prototype.print=function(r){Yn.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var i=this.iterator();i.hasNext();){var o=i.next();r.print("out "),o.print(r),r.println(),r.print("in "),o.getSym().print(r),r.println()}},t.prototype.getResultAreaEdges=function(){var r=this;if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Ft;for(var i=this.iterator();i.hasNext();){var o=i.next();(o.isInResult()||o.getSym().isInResult())&&r._resultAreaEdgeList.add(o)}return this._resultAreaEdgeList},t.prototype.updateLabelling=function(r){for(var i=this.iterator();i.hasNext();){var o=i.next(),u=o.getLabel();u.setAllLocationsIfNull(0,r.getLocation(0)),u.setAllLocationsIfNull(1,r.getLocation(1))}},t.prototype.linkAllDirectedEdges=function(){var r=this;this.getEdges();for(var i=null,o=null,u=this._edgeList.size()-1;u>=0;u--){var f=r._edgeList.get(u),d=f.getSym();o===null&&(o=d),i!==null&&d.setNext(i),i=f}o.setNext(i)},t.prototype.computeDepths=function(){var r=this;if(arguments.length===1){var i=arguments[0],o=this.findIndex(i),u=i.getDepth(kt.LEFT),f=i.getDepth(kt.RIGHT),d=this.computeDepths(o+1,this._edgeList.size(),u),_=this.computeDepths(0,o,d);if(_!==f)throw new ao("depth mismatch at "+i.getCoordinate())}else if(arguments.length===3){for(var y=arguments[0],E=arguments[1],S=arguments[2],T=S,I=y;I<E;I++){var z=r._edgeList.get(I);z.setEdgeDepths(kt.RIGHT,T),T=z.getDepth(kt.LEFT)}return T}},t.prototype.mergeSymLabels=function(){for(var r=this.iterator();r.hasNext();){var i=r.next(),o=i.getLabel();o.merge(i.getSym().getLabel())}},t.prototype.linkMinimalDirectedEdges=function(r){for(var i=this,o=null,u=null,f=this._SCANNING_FOR_INCOMING,d=this._resultAreaEdgeList.size()-1;d>=0;d--){var _=i._resultAreaEdgeList.get(d),y=_.getSym();switch(o===null&&_.getEdgeRing()===r&&(o=_),f){case i._SCANNING_FOR_INCOMING:if(y.getEdgeRing()!==r)continue;u=y,f=i._LINKING_TO_OUTGOING;break;case i._LINKING_TO_OUTGOING:if(_.getEdgeRing()!==r)continue;u.setNextMin(_),f=i._SCANNING_FOR_INCOMING;break}}f===this._LINKING_TO_OUTGOING&&(me.isTrue(o!==null,"found null for first outgoing dirEdge"),me.isTrue(o.getEdgeRing()===r,"unable to link last incoming dirEdge"),u.setNextMin(o))},t.prototype.getOutgoingDegree=function(){if(arguments.length===0){for(var r=0,i=this.iterator();i.hasNext();){var o=i.next();o.isInResult()&&r++}return r}else if(arguments.length===1){for(var u=arguments[0],f=0,d=this.iterator();d.hasNext();){var _=d.next();_.getEdgeRing()===u&&f++}return f}},t.prototype.getLabel=function(){return this._label},t.prototype.findCoveredLineEdges=function(){for(var r=lt.NONE,i=this.iterator();i.hasNext();){var o=i.next(),u=o.getSym();if(!o.isLineEdge()){if(o.isInResult()){r=lt.INTERIOR;break}if(u.isInResult()){r=lt.EXTERIOR;break}}}if(r===lt.NONE)return null;for(var f=r,d=this.iterator();d.hasNext();){var _=d.next(),y=_.getSym();_.isLineEdge()?_.getEdge().setCovered(f===lt.INTERIOR):(_.isInResult()&&(f=lt.EXTERIOR),y.isInResult()&&(f=lt.INTERIOR))}},t.prototype.computeLabelling=function(r){var i=this;e.prototype.computeLabelling.call(this,r),this._label=new je(lt.NONE);for(var o=this.iterator();o.hasNext();)for(var u=o.next(),f=u.getEdge(),d=f.getLabel(),_=0;_<2;_++){var y=d.getLocation(_);(y===lt.INTERIOR||y===lt.BOUNDARY)&&i._label.setLocation(_,lt.INTERIOR)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(ar),Bv=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createNode=function(r){return new kp(r,new G4)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(gl),Bo=function e(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=e.orientation(t)};Bo.prototype.compareTo=function(t){var n=t,r=Bo.compareOriented(this._pts,this._orientation,n._pts,n._orientation);return r};Bo.prototype.interfaces_=function(){return[vi]};Bo.prototype.getClass=function(){return Bo};Bo.orientation=function(t){return be.increasingDirection(t)===1};Bo.compareOriented=function(t,n,r,i){for(var o=n?1:-1,u=i?1:-1,f=n?t.length:-1,d=i?r.length:-1,_=n?0:t.length-1,y=i?0:r.length-1;;){var E=t[_].compareTo(r[y]);if(E!==0)return E;_+=o,y+=u;var S=_===f,T=y===d;if(S&&!T)return-1;if(!S&&T)return 1;if(S&&T)return 0}};var Ni=function(){this._edges=new Ft,this._ocaMap=new sr};Ni.prototype.print=function(t){var n=this;t.print("MULTILINESTRING ( ");for(var r=0;r<this._edges.size();r++){var i=n._edges.get(r);r>0&&t.print(","),t.print("(");for(var o=i.getCoordinates(),u=0;u<o.length;u++)u>0&&t.print(","),t.print(o[u].x+" "+o[u].y);t.println(")")}t.print(")  ")};Ni.prototype.addAll=function(t){for(var n=this,r=t.iterator();r.hasNext();)n.add(r.next())};Ni.prototype.findEdgeIndex=function(t){for(var n=this,r=0;r<this._edges.size();r++)if(n._edges.get(r).equals(t))return r;return-1};Ni.prototype.iterator=function(){return this._edges.iterator()};Ni.prototype.getEdges=function(){return this._edges};Ni.prototype.get=function(t){return this._edges.get(t)};Ni.prototype.findEqualEdge=function(t){var n=new Bo(t.getCoordinates()),r=this._ocaMap.get(n);return r};Ni.prototype.add=function(t){this._edges.add(t);var n=new Bo(t.getCoordinates());this._ocaMap.put(n,t)};Ni.prototype.interfaces_=function(){return[]};Ni.prototype.getClass=function(){return Ni};var ya=function(){};ya.prototype.processIntersections=function(t,n,r,i){};ya.prototype.isDone=function(){};ya.prototype.interfaces_=function(){return[]};ya.prototype.getClass=function(){return ya};var ai=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};ai.prototype.isTrivialIntersection=function(t,n,r,i){if(t===r&&this._li.getIntersectionNum()===1){if(ai.isAdjacentSegments(n,i))return!0;if(t.isClosed()){var o=t.size()-1;if(n===0&&i===o||i===0&&n===o)return!0}}return!1};ai.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};ai.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};ai.prototype.getLineIntersector=function(){return this._li};ai.prototype.hasProperIntersection=function(){return this._hasProper};ai.prototype.processIntersections=function(t,n,r,i){if(t===r&&n===i)return null;this.numTests++;var o=t.getCoordinates()[n],u=t.getCoordinates()[n+1],f=r.getCoordinates()[i],d=r.getCoordinates()[i+1];this._li.computeIntersection(o,u,f,d),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,n,r,i)||(this._hasIntersection=!0,t.addIntersections(this._li,n,0),r.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))};ai.prototype.hasIntersection=function(){return this._hasIntersection};ai.prototype.isDone=function(){return!1};ai.prototype.hasInteriorIntersection=function(){return this._hasInterior};ai.prototype.interfaces_=function(){return[ya]};ai.prototype.getClass=function(){return ai};ai.isAdjacentSegments=function(t,n){return Math.abs(t-n)===1};var as=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],n=arguments[1],r=arguments[2];this.coord=new it(t),this.segmentIndex=n,this.dist=r};as.prototype.getSegmentIndex=function(){return this.segmentIndex};as.prototype.getCoordinate=function(){return this.coord};as.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)};as.prototype.compareTo=function(t){var n=t;return this.compare(n.segmentIndex,n.dist)};as.prototype.isEndPoint=function(t){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===t};as.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist};as.prototype.getDistance=function(){return this.dist};as.prototype.compare=function(t,n){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<n?-1:this.dist>n?1:0};as.prototype.interfaces_=function(){return[vi]};as.prototype.getClass=function(){return as};var Is=function(){this._nodeMap=new sr,this.edge=null;var t=arguments[0];this.edge=t};Is.prototype.print=function(t){t.println("Intersections:");for(var n=this.iterator();n.hasNext();){var r=n.next();r.print(t)}};Is.prototype.iterator=function(){return this._nodeMap.values().iterator()};Is.prototype.addSplitEdges=function(t){var n=this;this.addEndpoints();for(var r=this.iterator(),i=r.next();r.hasNext();){var o=r.next(),u=n.createSplitEdge(i,o);t.add(u),i=o}};Is.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)};Is.prototype.createSplitEdge=function(t,n){var r=this,i=n.segmentIndex-t.segmentIndex+2,o=this.edge.pts[n.segmentIndex],u=n.dist>0||!n.coord.equals2D(o);u||i--;var f=new Array(i).fill(null),d=0;f[d++]=new it(t.coord);for(var _=t.segmentIndex+1;_<=n.segmentIndex;_++)f[d++]=r.edge.pts[_];return u&&(f[d]=n.coord),new Zf(f,new je(this.edge._label))};Is.prototype.add=function(t,n,r){var i=new as(t,n,r),o=this._nodeMap.get(i);return o!==null?o:(this._nodeMap.put(i,i),i)};Is.prototype.isIntersection=function(t){for(var n=this.iterator();n.hasNext();){var r=n.next();if(r.coord.equals(t))return!0}return!1};Is.prototype.interfaces_=function(){return[]};Is.prototype.getClass=function(){return Is};var va=function(){};va.prototype.getChainStartIndices=function(t){var n=this,r=0,i=new Ft;i.add(new es(r));do{var o=n.findChainEnd(t,r);i.add(new es(o)),r=o}while(r<t.length-1);var u=va.toIntArray(i);return u};va.prototype.findChainEnd=function(t,n){for(var r=Xe.quadrant(t[n],t[n+1]),i=n+1;i<t.length;){var o=Xe.quadrant(t[i-1],t[i]);if(o!==r)break;i++}return i-1};va.prototype.interfaces_=function(){return[]};va.prototype.getClass=function(){return va};va.toIntArray=function(t){for(var n=new Array(t.size()).fill(null),r=0;r<n.length;r++)n[r]=t.get(r).intValue();return n};var lo=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Jt,this.env2=new Jt;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var n=new va;this.startIndex=n.getChainStartIndices(this.pts)};lo.prototype.getCoordinates=function(){return this.pts};lo.prototype.getMaxX=function(t){var n=this.pts[this.startIndex[t]].x,r=this.pts[this.startIndex[t+1]].x;return n>r?n:r};lo.prototype.getMinX=function(t){var n=this.pts[this.startIndex[t]].x,r=this.pts[this.startIndex[t+1]].x;return n<r?n:r};lo.prototype.computeIntersectsForChain=function(){if(arguments.length===4){var t=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],n,n.startIndex[r],n.startIndex[r+1],i)}else if(arguments.length===6){var o=arguments[0],u=arguments[1],f=arguments[2],d=arguments[3],_=arguments[4],y=arguments[5],E=this.pts[o],S=this.pts[u],T=f.pts[d],I=f.pts[_];if(u-o===1&&_-d===1)return y.addIntersections(this.e,o,f.e,d),null;if(this.env1.init(E,S),this.env2.init(T,I),!this.env1.intersects(this.env2))return null;var z=Math.trunc((o+u)/2),G=Math.trunc((d+_)/2);o<z&&(d<G&&this.computeIntersectsForChain(o,z,f,d,G,y),G<_&&this.computeIntersectsForChain(o,z,f,G,_,y)),z<u&&(d<G&&this.computeIntersectsForChain(z,u,f,d,G,y),G<_&&this.computeIntersectsForChain(z,u,f,G,_,y))}};lo.prototype.getStartIndexes=function(){return this.startIndex};lo.prototype.computeIntersects=function(t,n){for(var r=this,i=0;i<this.startIndex.length-1;i++)for(var o=0;o<t.startIndex.length-1;o++)r.computeIntersectsForChain(i,t,o,n)};lo.prototype.interfaces_=function(){return[]};lo.prototype.getClass=function(){return lo};var Wn=function e(){var t=this;this._depth=Array(2).fill().map(function(){return Array(3)});for(var n=0;n<2;n++)for(var r=0;r<3;r++)t._depth[n][r]=e.NULL_VALUE},Fv={NULL_VALUE:{configurable:!0}};Wn.prototype.getDepth=function(t,n){return this._depth[t][n]};Wn.prototype.setDepth=function(t,n,r){this._depth[t][n]=r};Wn.prototype.isNull=function(){var t=this;if(arguments.length===0){for(var n=0;n<2;n++)for(var r=0;r<3;r++)if(t._depth[n][r]!==Wn.NULL_VALUE)return!1;return!0}else if(arguments.length===1){var i=arguments[0];return this._depth[i][1]===Wn.NULL_VALUE}else if(arguments.length===2){var o=arguments[0],u=arguments[1];return this._depth[o][u]===Wn.NULL_VALUE}};Wn.prototype.normalize=function(){for(var t=this,n=0;n<2;n++)if(!t.isNull(n)){var r=t._depth[n][1];t._depth[n][2]<r&&(r=t._depth[n][2]),r<0&&(r=0);for(var i=1;i<3;i++){var o=0;t._depth[n][i]>r&&(o=1),t._depth[n][i]=o}}};Wn.prototype.getDelta=function(t){return this._depth[t][kt.RIGHT]-this._depth[t][kt.LEFT]};Wn.prototype.getLocation=function(t,n){return this._depth[t][n]<=0?lt.EXTERIOR:lt.INTERIOR};Wn.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]};Wn.prototype.add=function(){var t=this;if(arguments.length===1)for(var n=arguments[0],r=0;r<2;r++)for(var i=1;i<3;i++){var o=n.getLocation(r,i);(o===lt.EXTERIOR||o===lt.INTERIOR)&&(t.isNull(r,i)?t._depth[r][i]=Wn.depthAtLocation(o):t._depth[r][i]+=Wn.depthAtLocation(o))}else if(arguments.length===3){var u=arguments[0],f=arguments[1],d=arguments[2];d===lt.INTERIOR&&this._depth[u][f]++}};Wn.prototype.interfaces_=function(){return[]};Wn.prototype.getClass=function(){return Wn};Wn.depthAtLocation=function(t){return t===lt.EXTERIOR?0:t===lt.INTERIOR?1:Wn.NULL_VALUE};Fv.NULL_VALUE.get=function(){return-1};Object.defineProperties(Wn,Fv);var Zf=function(e){function t(){if(e.call(this),this.pts=null,this._env=null,this.eiList=new Is(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Wn,this._depthDelta=0,arguments.length===1){var n=arguments[0];t.call(this,n,null)}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDepth=function(){return this._depth},t.prototype.getCollapsedEdge=function(){var r=new Array(2).fill(null);r[0]=this.pts[0],r[1]=this.pts[1];var i=new t(r,je.toLineLabel(this._label));return i},t.prototype.isIsolated=function(){return this._isIsolated},t.prototype.getCoordinates=function(){return this.pts},t.prototype.setIsolated=function(r){this._isIsolated=r},t.prototype.setName=function(r){this._name=r},t.prototype.equals=function(r){var i=this;if(!(r instanceof t))return!1;var o=r;if(this.pts.length!==o.pts.length)return!1;for(var u=!0,f=!0,d=this.pts.length,_=0;_<this.pts.length;_++)if(i.pts[_].equals2D(o.pts[_])||(u=!1),i.pts[_].equals2D(o.pts[--d])||(f=!1),!u&&!f)return!1;return!0},t.prototype.getCoordinate=function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var r=arguments[0];return this.pts[r]}},t.prototype.print=function(r){var i=this;r.print("edge "+this._name+": "),r.print("LINESTRING (");for(var o=0;o<this.pts.length;o++)o>0&&r.print(","),r.print(i.pts[o].x+" "+i.pts[o].y);r.print(")  "+this._label+" "+this._depthDelta)},t.prototype.computeIM=function(r){t.updateIM(this._label,r)},t.prototype.isCollapsed=function(){return!this._label.isArea()||this.pts.length!==3?!1:!!this.pts[0].equals(this.pts[2])},t.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},t.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},t.prototype.getDepthDelta=function(){return this._depthDelta},t.prototype.getNumPoints=function(){return this.pts.length},t.prototype.printReverse=function(r){var i=this;r.print("edge "+this._name+": ");for(var o=this.pts.length-1;o>=0;o--)r.print(i.pts[o]+" ");r.println("")},t.prototype.getMonotoneChainEdge=function(){return this._mce===null&&(this._mce=new lo(this)),this._mce},t.prototype.getEnvelope=function(){var r=this;if(this._env===null){this._env=new Jt;for(var i=0;i<this.pts.length;i++)r._env.expandToInclude(r.pts[i])}return this._env},t.prototype.addIntersection=function(r,i,o,u){var f=new it(r.getIntersection(u)),d=i,_=r.getEdgeDistance(o,u),y=d+1;if(y<this.pts.length){var E=this.pts[y];f.equals2D(E)&&(d=y,_=0)}this.eiList.add(f,d,_)},t.prototype.toString=function(){var r=this,i=new hs;i.append("edge "+this._name+": "),i.append("LINESTRING (");for(var o=0;o<this.pts.length;o++)o>0&&i.append(","),i.append(r.pts[o].x+" "+r.pts[o].y);return i.append(")  "+this._label+" "+this._depthDelta),i.toString()},t.prototype.isPointwiseEqual=function(r){var i=this;if(this.pts.length!==r.pts.length)return!1;for(var o=0;o<this.pts.length;o++)if(!i.pts[o].equals2D(r.pts[o]))return!1;return!0},t.prototype.setDepthDelta=function(r){this._depthDelta=r},t.prototype.getEdgeIntersectionList=function(){return this.eiList},t.prototype.addIntersections=function(r,i,o){for(var u=this,f=0;f<r.getIntersectionNum();f++)u.addIntersection(r,i,o,f)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.updateIM=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];i.setAtLeastIfValid(r.getLocation(0,kt.ON),r.getLocation(1,kt.ON),1),r.isArea()&&(i.setAtLeastIfValid(r.getLocation(0,kt.LEFT),r.getLocation(1,kt.LEFT),2),i.setAtLeastIfValid(r.getLocation(0,kt.RIGHT),r.getLocation(1,kt.RIGHT),2))}else return e.prototype.updateIM.apply(this,arguments)},t}(si),_r=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Ni,this._bufParams=t||null};_r.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t};_r.prototype.insertUniqueEdge=function(t){var n=this._edgeList.findEqualEdge(t);if(n!==null){var r=n.getLabel(),i=t.getLabel();n.isPointwiseEqual(t)||(i=new je(t.getLabel()),i.flip()),r.merge(i);var o=_r.depthDelta(i),u=n.getDepthDelta(),f=u+o;n.setDepthDelta(f)}else this._edgeList.add(t),t.setDepthDelta(_r.depthDelta(t.getLabel()))};_r.prototype.buildSubgraphs=function(t,n){for(var r=new Ft,i=t.iterator();i.hasNext();){var o=i.next(),u=o.getRightmostCoordinate(),f=new iu(r),d=f.getDepth(u);o.computeDepth(d),o.findResultEdges(),r.add(o),n.add(o.getDirectedEdges(),o.getNodes())}};_r.prototype.createSubgraphs=function(t){for(var n=new Ft,r=t.getNodes().iterator();r.hasNext();){var i=r.next();if(!i.isVisited()){var o=new vr;o.create(i),n.add(o)}}return Di.sort(n,Di.reverseOrder()),n};_r.prototype.createEmptyResultGeometry=function(){var t=this._geomFact.createPolygon();return t};_r.prototype.getNoder=function(t){if(this._workingNoder!==null)return this._workingNoder;var n=new am,r=new Sa;return r.setPrecisionModel(t),n.setSegmentIntersector(new ai(r)),n};_r.prototype.buffer=function(t,n){var r=this._workingPrecisionModel;r===null&&(r=t.getPrecisionModel()),this._geomFact=t.getFactory();var i=new Pr(r,this._bufParams),o=new yi(t,n,i),u=o.getCurves();if(u.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(u,r),this._graph=new pn(new Bv),this._graph.addEdges(this._edgeList.getEdges());var f=this.createSubgraphs(this._graph),d=new qr(this._geomFact);this.buildSubgraphs(f,d);var _=d.getPolygons();if(_.size()<=0)return this.createEmptyResultGeometry();var y=this._geomFact.buildGeometry(_);return y};_r.prototype.computeNodedEdges=function(t,n){var r=this,i=this.getNoder(n);i.computeNodes(t);for(var o=i.getNodedSubstrings(),u=o.iterator();u.hasNext();){var f=u.next(),d=f.getCoordinates();if(!(d.length===2&&d[0].equals2D(d[1]))){var _=f.getData(),y=new Zf(f.getCoordinates(),new je(_));r.insertUniqueEdge(y)}}};_r.prototype.setNoder=function(t){this._workingNoder=t};_r.prototype.interfaces_=function(){return[]};_r.prototype.getClass=function(){return _r};_r.depthDelta=function(t){var n=t.getLocation(0,kt.LEFT),r=t.getLocation(0,kt.RIGHT);return n===lt.INTERIOR&&r===lt.EXTERIOR?1:n===lt.EXTERIOR&&r===lt.INTERIOR?-1:0};_r.convertSegStrings=function(t){for(var n=new xe,r=new Ft;t.hasNext();){var i=t.next(),o=n.createLineString(i.getCoordinates());r.add(o)}return n.buildGeometry(r)};var Fo=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var t=arguments[0],n=arguments[1];this._noder=t,this._scaleFactor=n,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(arguments.length===4){var r=arguments[0],i=arguments[1],o=arguments[2],u=arguments[3];this._noder=r,this._scaleFactor=i,this._offsetX=o,this._offsetY=u,this._isScaled=!this.isIntegerPrecision()}};Fo.prototype.rescale=function(){var t=this;if(se(arguments[0],An))for(var n=arguments[0],r=n.iterator();r.hasNext();){var i=r.next();t.rescale(i.getCoordinates())}else if(arguments[0]instanceof Array){for(var o=arguments[0],u=0;u<o.length;u++)o[u].x=o[u].x/t._scaleFactor+t._offsetX,o[u].y=o[u].y/t._scaleFactor+t._offsetY;o.length===2&&o[0].equals2D(o[1])&&Yn.out.println(o)}};Fo.prototype.scale=function(){var t=this;if(se(arguments[0],An)){for(var n=arguments[0],r=new Ft,i=n.iterator();i.hasNext();){var o=i.next();r.add(new xn(t.scale(o.getCoordinates()),o.getData()))}return r}else if(arguments[0]instanceof Array){for(var u=arguments[0],f=new Array(u.length).fill(null),d=0;d<u.length;d++)f[d]=new it(Math.round((u[d].x-t._offsetX)*t._scaleFactor),Math.round((u[d].y-t._offsetY)*t._scaleFactor),u[d].z);var _=be.removeRepeatedPoints(f);return _}};Fo.prototype.isIntegerPrecision=function(){return this._scaleFactor===1};Fo.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t};Fo.prototype.computeNodes=function(t){var n=t;this._isScaled&&(n=this.scale(t)),this._noder.computeNodes(n)};Fo.prototype.interfaces_=function(){return[ma]};Fo.prototype.getClass=function(){return Fo};var us=function(){this._li=new Sa,this._segStrings=null;var t=arguments[0];this._segStrings=t},zv={fact:{configurable:!0}};us.prototype.checkEndPtVertexIntersections=function(){var t=this;if(arguments.length===0)for(var n=this._segStrings.iterator();n.hasNext();){var r=n.next(),i=r.getCoordinates();t.checkEndPtVertexIntersections(i[0],t._segStrings),t.checkEndPtVertexIntersections(i[i.length-1],t._segStrings)}else if(arguments.length===2){for(var o=arguments[0],u=arguments[1],f=u.iterator();f.hasNext();)for(var d=f.next(),_=d.getCoordinates(),y=1;y<_.length-1;y++)if(_[y].equals(o))throw new so("found endpt/interior pt intersection at index "+y+" :pt "+o)}};us.prototype.checkInteriorIntersections=function(){var t=this;if(arguments.length===0)for(var n=this._segStrings.iterator();n.hasNext();)for(var r=n.next(),i=this._segStrings.iterator();i.hasNext();){var o=i.next();t.checkInteriorIntersections(r,o)}else if(arguments.length===2)for(var u=arguments[0],f=arguments[1],d=u.getCoordinates(),_=f.getCoordinates(),y=0;y<d.length-1;y++)for(var E=0;E<_.length-1;E++)t.checkInteriorIntersections(u,y,f,E);else if(arguments.length===4){var S=arguments[0],T=arguments[1],I=arguments[2],z=arguments[3];if(S===I&&T===z)return null;var G=S.getCoordinates()[T],W=S.getCoordinates()[T+1],Q=I.getCoordinates()[z],rt=I.getCoordinates()[z+1];if(this._li.computeIntersection(G,W,Q,rt),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,G,W)||this.hasInteriorIntersection(this._li,Q,rt)))throw new so("found non-noded intersection at "+G+"-"+W+" and "+Q+"-"+rt)}};us.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()};us.prototype.checkCollapses=function(){var t=this;if(arguments.length===0)for(var n=this._segStrings.iterator();n.hasNext();){var r=n.next();t.checkCollapses(r)}else if(arguments.length===1)for(var i=arguments[0],o=i.getCoordinates(),u=0;u<o.length-2;u++)t.checkCollapse(o[u],o[u+1],o[u+2])};us.prototype.hasInteriorIntersection=function(t,n,r){for(var i=0;i<t.getIntersectionNum();i++){var o=t.getIntersection(i);if(!(o.equals(n)||o.equals(r)))return!0}return!1};us.prototype.checkCollapse=function(t,n,r){if(t.equals(r))throw new so("found non-noded collapse at "+us.fact.createLineString([t,n,r]))};us.prototype.interfaces_=function(){return[]};us.prototype.getClass=function(){return us};zv.fact.get=function(){return new xe};Object.defineProperties(us,zv);var Ir=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],n=arguments[1],r=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=n,this._li=r,n<=0)throw new cn("Scale factor must be non-zero");n!==1&&(this._pt=new it(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new it,this._p1Scaled=new it),this.initCorners(this._pt)},Gv={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};Ir.prototype.intersectsScaled=function(t,n){var r=Math.min(t.x,n.x),i=Math.max(t.x,n.x),o=Math.min(t.y,n.y),u=Math.max(t.y,n.y),f=this._maxx<r||this._minx>i||this._maxy<o||this._miny>u;if(f)return!1;var d=this.intersectsToleranceSquare(t,n);return me.isTrue(!(f&&d),"Found bad envelope test"),d};Ir.prototype.initCorners=function(t){var n=.5;this._minx=t.x-n,this._maxx=t.x+n,this._miny=t.y-n,this._maxy=t.y+n,this._corner[0]=new it(this._maxx,this._maxy),this._corner[1]=new it(this._minx,this._maxy),this._corner[2]=new it(this._minx,this._miny),this._corner[3]=new it(this._maxx,this._miny)};Ir.prototype.intersects=function(t,n){return this._scaleFactor===1?this.intersectsScaled(t,n):(this.copyScaled(t,this._p0Scaled),this.copyScaled(n,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))};Ir.prototype.scale=function(t){return Math.round(t*this._scaleFactor)};Ir.prototype.getCoordinate=function(){return this._originalPt};Ir.prototype.copyScaled=function(t,n){n.x=this.scale(t.x),n.y=this.scale(t.y)};Ir.prototype.getSafeEnvelope=function(){if(this._safeEnv===null){var t=Ir.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Jt(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv};Ir.prototype.intersectsPixelClosure=function(t,n){return this._li.computeIntersection(t,n,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,n,this._corner[1],this._corner[2]),this._li.hasIntersection())||(this._li.computeIntersection(t,n,this._corner[2],this._corner[3]),this._li.hasIntersection())||(this._li.computeIntersection(t,n,this._corner[3],this._corner[0]),this._li.hasIntersection()))};Ir.prototype.intersectsToleranceSquare=function(t,n){var r=!1,i=!1;return this._li.computeIntersection(t,n,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,n,this._corner[1],this._corner[2]),this._li.isProper())||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,n,this._corner[2],this._corner[3]),this._li.isProper())||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,n,this._corner[3],this._corner[0]),this._li.isProper())||r&&i||t.equals(this._pt)||n.equals(this._pt))};Ir.prototype.addSnappedNode=function(t,n){var r=t.getCoordinate(n),i=t.getCoordinate(n+1);return this.intersects(r,i)?(t.addIntersection(this.getCoordinate(),n),!0):!1};Ir.prototype.interfaces_=function(){return[]};Ir.prototype.getClass=function(){return Ir};Gv.SAFE_ENV_EXPANSION_FACTOR.get=function(){return .75};Object.defineProperties(Ir,Gv);var $c=function(){this.tempEnv1=new Jt,this.selectedSegment=new $t};$c.prototype.select=function(){if(arguments.length!==1){if(arguments.length===2){var t=arguments[0],n=arguments[1];t.getLineSegment(n,this.selectedSegment),this.select(this.selectedSegment)}}};$c.prototype.interfaces_=function(){return[]};$c.prototype.getClass=function(){return $c};var vl=function(){this._index=null;var t=arguments[0];this._index=t},Uv={HotPixelSnapAction:{configurable:!0}};vl.prototype.snap=function(){if(arguments.length===1){var t=arguments[0];return this.snap(t,null,-1)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2],o=n.getSafeEnvelope(),u=new Vv(n,r,i);return this._index.query(o,{interfaces_:function(){return[Oo]},visitItem:function(f){var d=f;d.select(o,u)}}),u.isNodeAdded()}};vl.prototype.interfaces_=function(){return[]};vl.prototype.getClass=function(){return vl};Uv.HotPixelSnapAction.get=function(){return Vv};Object.defineProperties(vl,Uv);var Vv=function(e){function t(){e.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var n=arguments[0],r=arguments[1],i=arguments[2];this._hotPixel=n,this._parentEdge=r,this._hotPixelVertexIndex=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isNodeAdded=function(){return this._isNodeAdded},t.prototype.select=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1],o=r.getContext();if(this._parentEdge!==null&&o===this._parentEdge&&i===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(o,i)}else return e.prototype.select.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}($c),su=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new Ft};su.prototype.processIntersections=function(t,n,r,i){var o=this;if(t===r&&n===i)return null;var u=t.getCoordinates()[n],f=t.getCoordinates()[n+1],d=r.getCoordinates()[i],_=r.getCoordinates()[i+1];if(this._li.computeIntersection(u,f,d,_),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var y=0;y<this._li.getIntersectionNum();y++)o._interiorIntersections.add(o._li.getIntersection(y));t.addIntersections(this._li,n,0),r.addIntersections(this._li,i,1)}};su.prototype.isDone=function(){return!1};su.prototype.getInteriorIntersections=function(){return this._interiorIntersections};su.prototype.interfaces_=function(){return[ya]};su.prototype.getClass=function(){return su};var Ts=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new Sa,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};Ts.prototype.checkCorrectness=function(t){var n=xn.getNodedSubstrings(t),r=new us(n);try{r.checkValid()}catch(i){if(i instanceof wv)i.printStackTrace();else throw i}finally{}};Ts.prototype.getNodedSubstrings=function(){return xn.getNodedSubstrings(this._nodedSegStrings)};Ts.prototype.snapRound=function(t,n){var r=this.findInteriorIntersections(t,n);this.computeIntersectionSnaps(r),this.computeVertexSnaps(t)};Ts.prototype.findInteriorIntersections=function(t,n){var r=new su(n);return this._noder.setSegmentIntersector(r),this._noder.computeNodes(t),r.getInteriorIntersections()};Ts.prototype.computeVertexSnaps=function(){var t=this;if(se(arguments[0],An))for(var n=arguments[0],r=n.iterator();r.hasNext();){var i=r.next();t.computeVertexSnaps(i)}else if(arguments[0]instanceof xn)for(var o=arguments[0],u=o.getCoordinates(),f=0;f<u.length;f++){var d=new Ir(u[f],t._scaleFactor,t._li),_=t._pointSnapper.snap(d,o,f);_&&o.addIntersection(u[f],f)}};Ts.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new am,this._pointSnapper=new vl(this._noder.getIndex()),this.snapRound(t,this._li)};Ts.prototype.computeIntersectionSnaps=function(t){for(var n=this,r=t.iterator();r.hasNext();){var i=r.next(),o=new Ir(i,n._scaleFactor,n._li);n._pointSnapper.snap(o)}};Ts.prototype.interfaces_=function(){return[ma]};Ts.prototype.getClass=function(){return Ts};var Xn=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Be,this._resultGeometry=null,this._saveException=null,arguments.length===1){var t=arguments[0];this._argGeom=t}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this._argGeom=n,this._bufParams=r}},Dl={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Xn.prototype.bufferFixedPrecision=function(t){var n=new Fo(new Ts(new Fe(1)),t.getScale()),r=new _r(this._bufParams);r.setWorkingPrecisionModel(t),r.setNoder(n),this._resultGeometry=r.buffer(this._argGeom,this._distance)};Xn.prototype.bufferReducedPrecision=function(){var t=this;if(arguments.length===0){for(var n=Xn.MAX_PRECISION_DIGITS;n>=0;n--){try{t.bufferReducedPrecision(n)}catch(u){if(u instanceof ao)t._saveException=u;else throw u}finally{}if(t._resultGeometry!==null)return null}throw this._saveException}else if(arguments.length===1){var r=arguments[0],i=Xn.precisionScaleFactor(this._argGeom,this._distance,r),o=new Fe(i);this.bufferFixedPrecision(o)}};Xn.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===Fe.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()};Xn.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)};Xn.prototype.bufferOriginalPrecision=function(){try{var t=new _r(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(n){if(n instanceof so)this._saveException=n;else throw n}finally{}};Xn.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry};Xn.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)};Xn.prototype.interfaces_=function(){return[]};Xn.prototype.getClass=function(){return Xn};Xn.bufferOp=function(){if(arguments.length===2){var t=arguments[0],n=arguments[1],r=new Xn(t),i=r.getResultGeometry(n);return i}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ie&&typeof arguments[1]=="number"){var o=arguments[0],u=arguments[1],f=arguments[2],d=new Xn(o);d.setQuadrantSegments(f);var _=d.getResultGeometry(u);return _}else if(arguments[2]instanceof Be&&arguments[0]instanceof ie&&typeof arguments[1]=="number"){var y=arguments[0],E=arguments[1],S=arguments[2],T=new Xn(y,S),I=T.getResultGeometry(E);return I}}else if(arguments.length===4){var z=arguments[0],G=arguments[1],W=arguments[2],Q=arguments[3],rt=new Xn(z);rt.setQuadrantSegments(W),rt.setEndCapStyle(Q);var gt=rt.getResultGeometry(G);return gt}};Xn.precisionScaleFactor=function(t,n,r){var i=t.getEnvelopeInternal(),o=ii.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY())),u=n>0?n:0,f=o+2*u,d=Math.trunc(Math.log(f)/Math.log(10)+1),_=r-d,y=Math.pow(10,_);return y};Dl.CAP_ROUND.get=function(){return Be.CAP_ROUND};Dl.CAP_BUTT.get=function(){return Be.CAP_FLAT};Dl.CAP_FLAT.get=function(){return Be.CAP_FLAT};Dl.CAP_SQUARE.get=function(){return Be.CAP_SQUARE};Dl.MAX_PRECISION_DIGITS.get=function(){return 12};Object.defineProperties(Xn,Dl);var dr=function(){this._pt=[new it,new it],this._distance=ue.NaN,this._isNull=!0};dr.prototype.getCoordinates=function(){return this._pt};dr.prototype.getCoordinate=function(t){return this._pt[t]};dr.prototype.setMinimum=function(){if(arguments.length===1){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(arguments.length===2){var n=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(n,r),null;var i=n.distance(r);i<this._distance&&this.initialize(n,r,i)}};dr.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var t=arguments[0],n=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(n),this._distance=t.distance(n),this._isNull=!1}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._pt[0].setCoordinate(r),this._pt[1].setCoordinate(i),this._distance=o,this._isNull=!1}};dr.prototype.getDistance=function(){return this._distance};dr.prototype.setMaximum=function(){if(arguments.length===1){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(arguments.length===2){var n=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(n,r),null;var i=n.distance(r);i>this._distance&&this.initialize(n,r,i)}};dr.prototype.interfaces_=function(){return[]};dr.prototype.getClass=function(){return dr};var ys=function(){};ys.prototype.interfaces_=function(){return[]};ys.prototype.getClass=function(){return ys};ys.computeDistance=function(){if(arguments[2]instanceof dr&&arguments[0]instanceof _n&&arguments[1]instanceof it)for(var t=arguments[0],n=arguments[1],r=arguments[2],i=t.getCoordinates(),o=new $t,u=0;u<i.length-1;u++){o.setCoordinates(i[u],i[u+1]);var f=o.closestPoint(n);r.setMinimum(f,n)}else if(arguments[2]instanceof dr&&arguments[0]instanceof On&&arguments[1]instanceof it){var d=arguments[0],_=arguments[1],y=arguments[2];ys.computeDistance(d.getExteriorRing(),_,y);for(var E=0;E<d.getNumInteriorRing();E++)ys.computeDistance(d.getInteriorRingN(E),_,y)}else if(arguments[2]instanceof dr&&arguments[0]instanceof ie&&arguments[1]instanceof it){var S=arguments[0],T=arguments[1],I=arguments[2];if(S instanceof _n)ys.computeDistance(S,T,I);else if(S instanceof On)ys.computeDistance(S,T,I);else if(S instanceof yr)for(var z=S,G=0;G<z.getNumGeometries();G++){var W=z.getGeometryN(G);ys.computeDistance(W,T,I)}else I.setMinimum(S.getCoordinate(),T)}else if(arguments[2]instanceof dr&&arguments[0]instanceof $t&&arguments[1]instanceof it){var Q=arguments[0],rt=arguments[1],gt=arguments[2],xt=Q.closestPoint(rt);gt.setMinimum(xt,rt)}};var Ca=function(t){this._maxPtDist=new dr,this._inputGeom=t||null},um={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Ca.prototype.computeMaxMidpointDistance=function(t){var n=new zo(this._inputGeom);t.apply(n),this._maxPtDist.setMaximum(n.getMaxPointDistance())};Ca.prototype.computeMaxVertexDistance=function(t){var n=new ou(this._inputGeom);t.apply(n),this._maxPtDist.setMaximum(n.getMaxPointDistance())};Ca.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()};Ca.prototype.getDistancePoints=function(){return this._maxPtDist};Ca.prototype.interfaces_=function(){return[]};Ca.prototype.getClass=function(){return Ca};um.MaxPointDistanceFilter.get=function(){return ou};um.MaxMidpointDistanceFilter.get=function(){return zo};Object.defineProperties(Ca,um);var ou=function(t){this._maxPtDist=new dr,this._minPtDist=new dr,this._geom=t||null};ou.prototype.filter=function(t){this._minPtDist.initialize(),ys.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};ou.prototype.getMaxPointDistance=function(){return this._maxPtDist};ou.prototype.interfaces_=function(){return[ws]};ou.prototype.getClass=function(){return ou};var zo=function(t){this._maxPtDist=new dr,this._minPtDist=new dr,this._geom=t||null};zo.prototype.filter=function(t,n){if(n===0)return null;var r=t.getCoordinate(n-1),i=t.getCoordinate(n),o=new it((r.x+i.x)/2,(r.y+i.y)/2);this._minPtDist.initialize(),ys.computeDistance(this._geom,o,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};zo.prototype.isDone=function(){return!1};zo.prototype.isGeometryChanged=function(){return!1};zo.prototype.getMaxPointDistance=function(){return this._maxPtDist};zo.prototype.interfaces_=function(){return[Ai]};zo.prototype.getClass=function(){return zo};var no=function(t){this._comps=t||null};no.prototype.filter=function(t){t instanceof On&&this._comps.add(t)};no.prototype.interfaces_=function(){return[rs]};no.prototype.getClass=function(){return no};no.getPolygons=function(){if(arguments.length===1){var t=arguments[0];return no.getPolygons(t,new Ft)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return n instanceof On?r.add(n):n instanceof yr&&n.apply(new no(r)),r}};var Kn=function(){if(this._lines=null,this._isForcedToLineString=!1,arguments.length===1){var t=arguments[0];this._lines=t}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this._lines=n,this._isForcedToLineString=r}};Kn.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof Ss){var n=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(n),null}t instanceof _n&&this._lines.add(t)};Kn.prototype.setForceToLineString=function(t){this._isForcedToLineString=t};Kn.prototype.interfaces_=function(){return[oo]};Kn.prototype.getClass=function(){return Kn};Kn.getGeometry=function(){if(arguments.length===1){var t=arguments[0];return t.getFactory().buildGeometry(Kn.getLines(t))}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return n.getFactory().buildGeometry(Kn.getLines(n,r))}};Kn.getLines=function(){if(arguments.length===1){var t=arguments[0];return Kn.getLines(t,!1)}else if(arguments.length===2){if(se(arguments[0],An)&&se(arguments[1],An)){for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){var o=i.next();Kn.getLines(o,r)}return r}else if(arguments[0]instanceof ie&&typeof arguments[1]=="boolean"){var u=arguments[0],f=arguments[1],d=new Ft;return u.apply(new Kn(d,f)),d}else if(arguments[0]instanceof ie&&se(arguments[1],An)){var _=arguments[0],y=arguments[1];return _ instanceof _n?y.add(_):_.apply(new Kn(y)),y}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&se(arguments[0],An)&&se(arguments[1],An)){for(var E=arguments[0],S=arguments[1],T=arguments[2],I=E.iterator();I.hasNext();){var z=I.next();Kn.getLines(z,S,T)}return S}else if(typeof arguments[2]=="boolean"&&arguments[0]instanceof ie&&se(arguments[1],An)){var G=arguments[0],W=arguments[1],Q=arguments[2];return G.apply(new Kn(W,Q)),W}}};var Oi=function(){if(this._boundaryRule=mi.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];if(t===null)throw new cn("Rule must be non-null");this._boundaryRule=t}}};Oi.prototype.locateInternal=function(){var t=this;if(arguments[0]instanceof it&&arguments[1]instanceof On){var n=arguments[0],r=arguments[1];if(r.isEmpty())return lt.EXTERIOR;var i=r.getExteriorRing(),o=this.locateInPolygonRing(n,i);if(o===lt.EXTERIOR)return lt.EXTERIOR;if(o===lt.BOUNDARY)return lt.BOUNDARY;for(var u=0;u<r.getNumInteriorRing();u++){var f=r.getInteriorRingN(u),d=t.locateInPolygonRing(n,f);if(d===lt.INTERIOR)return lt.EXTERIOR;if(d===lt.BOUNDARY)return lt.BOUNDARY}return lt.INTERIOR}else if(arguments[0]instanceof it&&arguments[1]instanceof _n){var _=arguments[0],y=arguments[1];if(!y.getEnvelopeInternal().intersects(_))return lt.EXTERIOR;var E=y.getCoordinates();return!y.isClosed()&&(_.equals(E[0])||_.equals(E[E.length-1]))?lt.BOUNDARY:Gt.isOnLine(_,E)?lt.INTERIOR:lt.EXTERIOR}else if(arguments[0]instanceof it&&arguments[1]instanceof jr){var S=arguments[0],T=arguments[1],I=T.getCoordinate();return I.equals2D(S)?lt.INTERIOR:lt.EXTERIOR}};Oi.prototype.locateInPolygonRing=function(t,n){return n.getEnvelopeInternal().intersects(t)?Gt.locatePointInRing(t,n.getCoordinates()):lt.EXTERIOR};Oi.prototype.intersects=function(t,n){return this.locate(t,n)!==lt.EXTERIOR};Oi.prototype.updateLocationInfo=function(t){t===lt.INTERIOR&&(this._isIn=!0),t===lt.BOUNDARY&&this._numBoundaries++};Oi.prototype.computeLocation=function(t,n){var r=this;if(n instanceof jr&&this.updateLocationInfo(this.locateInternal(t,n)),n instanceof _n)this.updateLocationInfo(this.locateInternal(t,n));else if(n instanceof On)this.updateLocationInfo(this.locateInternal(t,n));else if(n instanceof ga)for(var i=n,o=0;o<i.getNumGeometries();o++){var u=i.getGeometryN(o);r.updateLocationInfo(r.locateInternal(t,u))}else if(n instanceof Ls)for(var f=n,d=0;d<f.getNumGeometries();d++){var _=f.getGeometryN(d);r.updateLocationInfo(r.locateInternal(t,_))}else if(n instanceof yr)for(var y=new xs(n);y.hasNext();){var E=y.next();E!==n&&r.computeLocation(t,E)}};Oi.prototype.locate=function(t,n){return n.isEmpty()?lt.EXTERIOR:n instanceof _n?this.locateInternal(t,n):n instanceof On?this.locateInternal(t,n):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,n),this._boundaryRule.isInBoundary(this._numBoundaries)?lt.BOUNDARY:this._numBoundaries>0||this._isIn?lt.INTERIOR:lt.EXTERIOR)};Oi.prototype.interfaces_=function(){return[]};Oi.prototype.getClass=function(){return Oi};var gr=function e(){if(this._component=null,this._segIndex=null,this._pt=null,arguments.length===2){var t=arguments[0],n=arguments[1];e.call(this,t,e.INSIDE_AREA,n)}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._component=r,this._segIndex=i,this._pt=o}},jv={INSIDE_AREA:{configurable:!0}};gr.prototype.isInsideArea=function(){return this._segIndex===gr.INSIDE_AREA};gr.prototype.getCoordinate=function(){return this._pt};gr.prototype.getGeometryComponent=function(){return this._component};gr.prototype.getSegmentIndex=function(){return this._segIndex};gr.prototype.interfaces_=function(){return[]};gr.prototype.getClass=function(){return gr};jv.INSIDE_AREA.get=function(){return-1};Object.defineProperties(gr,jv);var ko=function(t){this._pts=t||null};ko.prototype.filter=function(t){t instanceof jr&&this._pts.add(t)};ko.prototype.interfaces_=function(){return[rs]};ko.prototype.getClass=function(){return ko};ko.getPoints=function(){if(arguments.length===1){var t=arguments[0];return t instanceof jr?Di.singletonList(t):ko.getPoints(t,new Ft)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return n instanceof jr?r.add(n):n instanceof yr&&n.apply(new ko(r)),r}};var au=function(){this._locations=null;var t=arguments[0];this._locations=t};au.prototype.filter=function(t){(t instanceof jr||t instanceof _n||t instanceof On)&&this._locations.add(new gr(t,0,t.getCoordinate()))};au.prototype.interfaces_=function(){return[rs]};au.prototype.getClass=function(){return au};au.getLocations=function(t){var n=new Ft;return t.apply(new au(n)),n};var $n=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Oi,this._minDistanceLocation=null,this._minDistance=ue.MAX_VALUE,arguments.length===2){var t=arguments[0],n=arguments[1];this._geom=[t,n],this._terminateDistance=0}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=r,this._geom[1]=i,this._terminateDistance=o}};$n.prototype.computeContainmentDistance=function(){var t=this;if(arguments.length===0){var n=new Array(2).fill(null);if(this.computeContainmentDistance(0,n),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,n)}else if(arguments.length===2){var r=arguments[0],i=arguments[1],o=1-r,u=no.getPolygons(this._geom[r]);if(u.size()>0){var f=au.getLocations(this._geom[o]);if(this.computeContainmentDistance(f,u,i),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[o]=i[0],this._minDistanceLocation[r]=i[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&se(arguments[0],Ii)&&se(arguments[1],Ii)){for(var d=arguments[0],_=arguments[1],y=arguments[2],E=0;E<d.size();E++)for(var S=d.get(E),T=0;T<_.size();T++)if(t.computeContainmentDistance(S,_.get(T),y),t._minDistance<=t._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof gr&&arguments[1]instanceof On){var I=arguments[0],z=arguments[1],G=arguments[2],W=I.getCoordinate();if(lt.EXTERIOR!==this._ptLocator.locate(W,z))return this._minDistance=0,G[0]=I,G[1]=new gr(z,W),null}}};$n.prototype.computeMinDistanceLinesPoints=function(t,n,r){for(var i=this,o=0;o<t.size();o++)for(var u=t.get(o),f=0;f<n.size();f++){var d=n.get(f);if(i.computeMinDistance(u,d,r),i._minDistance<=i._terminateDistance)return null}};$n.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),n=Kn.getLines(this._geom[0]),r=Kn.getLines(this._geom[1]),i=ko.getPoints(this._geom[0]),o=ko.getPoints(this._geom[1]);if(this.computeMinDistanceLines(n,r,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance||(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,o,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance)||(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(r,i,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance))return null;t[0]=null,t[1]=null,this.computeMinDistancePoints(i,o,t),this.updateMinDistance(t,!1)};$n.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation};$n.prototype.updateMinDistance=function(t,n){if(t[0]===null)return null;n?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])};$n.prototype.nearestPoints=function(){this.computeMinDistance();var t=[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()];return t};$n.prototype.computeMinDistance=function(){var t=this;if(arguments.length===0){if(this._minDistanceLocation!==null||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof _n&&arguments[1]instanceof jr){var n=arguments[0],r=arguments[1],i=arguments[2];if(n.getEnvelopeInternal().distance(r.getEnvelopeInternal())>this._minDistance)return null;for(var o=n.getCoordinates(),u=r.getCoordinate(),f=0;f<o.length-1;f++){var d=Gt.distancePointLine(u,o[f],o[f+1]);if(d<t._minDistance){t._minDistance=d;var _=new $t(o[f],o[f+1]),y=_.closestPoint(u);i[0]=new gr(n,f,y),i[1]=new gr(r,0,u)}if(t._minDistance<=t._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof _n&&arguments[1]instanceof _n){var E=arguments[0],S=arguments[1],T=arguments[2];if(E.getEnvelopeInternal().distance(S.getEnvelopeInternal())>this._minDistance)return null;for(var I=E.getCoordinates(),z=S.getCoordinates(),G=0;G<I.length-1;G++)for(var W=0;W<z.length-1;W++){var Q=Gt.distanceLineLine(I[G],I[G+1],z[W],z[W+1]);if(Q<t._minDistance){t._minDistance=Q;var rt=new $t(I[G],I[G+1]),gt=new $t(z[W],z[W+1]),xt=rt.closestPoints(gt);T[0]=new gr(E,G,xt[0]),T[1]=new gr(S,W,xt[1])}if(t._minDistance<=t._terminateDistance)return null}}}};$n.prototype.computeMinDistancePoints=function(t,n,r){for(var i=this,o=0;o<t.size();o++)for(var u=t.get(o),f=0;f<n.size();f++){var d=n.get(f),_=u.getCoordinate().distance(d.getCoordinate());if(_<i._minDistance&&(i._minDistance=_,r[0]=new gr(u,0,u.getCoordinate()),r[1]=new gr(d,0,d.getCoordinate())),i._minDistance<=i._terminateDistance)return null}};$n.prototype.distance=function(){if(this._geom[0]===null||this._geom[1]===null)throw new cn("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)};$n.prototype.computeMinDistanceLines=function(t,n,r){for(var i=this,o=0;o<t.size();o++)for(var u=t.get(o),f=0;f<n.size();f++){var d=n.get(f);if(i.computeMinDistance(u,d,r),i._minDistance<=i._terminateDistance)return null}};$n.prototype.interfaces_=function(){return[]};$n.prototype.getClass=function(){return $n};$n.distance=function(t,n){var r=new $n(t,n);return r.distance()};$n.isWithinDistance=function(t,n,r){var i=new $n(t,n,r);return i.distance()<=r};$n.nearestPoints=function(t,n){var r=new $n(t,n);return r.nearestPoints()};var ir=function(){this._pt=[new it,new it],this._distance=ue.NaN,this._isNull=!0};ir.prototype.getCoordinates=function(){return this._pt};ir.prototype.getCoordinate=function(t){return this._pt[t]};ir.prototype.setMinimum=function(){if(arguments.length===1){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(arguments.length===2){var n=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(n,r),null;var i=n.distance(r);i<this._distance&&this.initialize(n,r,i)}};ir.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var t=arguments[0],n=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(n),this._distance=t.distance(n),this._isNull=!1}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._pt[0].setCoordinate(r),this._pt[1].setCoordinate(i),this._distance=o,this._isNull=!1}};ir.prototype.toString=function(){return Ti.toLineString(this._pt[0],this._pt[1])};ir.prototype.getDistance=function(){return this._distance};ir.prototype.setMaximum=function(){if(arguments.length===1){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(arguments.length===2){var n=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(n,r),null;var i=n.distance(r);i>this._distance&&this.initialize(n,r,i)}};ir.prototype.interfaces_=function(){return[]};ir.prototype.getClass=function(){return ir};var Ji=function(){};Ji.prototype.interfaces_=function(){return[]};Ji.prototype.getClass=function(){return Ji};Ji.computeDistance=function(){if(arguments[2]instanceof ir&&arguments[0]instanceof _n&&arguments[1]instanceof it)for(var t=arguments[0],n=arguments[1],r=arguments[2],i=new $t,o=t.getCoordinates(),u=0;u<o.length-1;u++){i.setCoordinates(o[u],o[u+1]);var f=i.closestPoint(n);r.setMinimum(f,n)}else if(arguments[2]instanceof ir&&arguments[0]instanceof On&&arguments[1]instanceof it){var d=arguments[0],_=arguments[1],y=arguments[2];Ji.computeDistance(d.getExteriorRing(),_,y);for(var E=0;E<d.getNumInteriorRing();E++)Ji.computeDistance(d.getInteriorRingN(E),_,y)}else if(arguments[2]instanceof ir&&arguments[0]instanceof ie&&arguments[1]instanceof it){var S=arguments[0],T=arguments[1],I=arguments[2];if(S instanceof _n)Ji.computeDistance(S,T,I);else if(S instanceof On)Ji.computeDistance(S,T,I);else if(S instanceof yr)for(var z=S,G=0;G<z.getNumGeometries();G++){var W=z.getGeometryN(G);Ji.computeDistance(W,T,I)}else I.setMinimum(S.getCoordinate(),T)}else if(arguments[2]instanceof ir&&arguments[0]instanceof $t&&arguments[1]instanceof it){var Q=arguments[0],rt=arguments[1],gt=arguments[2],xt=Q.closestPoint(rt);gt.setMinimum(xt,rt)}};var gi=function(){this._g0=null,this._g1=null,this._ptDist=new ir,this._densifyFrac=0;var t=arguments[0],n=arguments[1];this._g0=t,this._g1=n},lm={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};gi.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()};gi.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new cn("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t};gi.prototype.compute=function(t,n){this.computeOrientedDistance(t,n,this._ptDist),this.computeOrientedDistance(n,t,this._ptDist)};gi.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()};gi.prototype.computeOrientedDistance=function(t,n,r){var i=new uu(n);if(t.apply(i),r.setMaximum(i.getMaxPointDistance()),this._densifyFrac>0){var o=new Go(n,this._densifyFrac);t.apply(o),r.setMaximum(o.getMaxPointDistance())}};gi.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()};gi.prototype.interfaces_=function(){return[]};gi.prototype.getClass=function(){return gi};gi.distance=function(){if(arguments.length===2){var t=arguments[0],n=arguments[1],r=new gi(t,n);return r.distance()}else if(arguments.length===3){var i=arguments[0],o=arguments[1],u=arguments[2],f=new gi(i,o);return f.setDensifyFraction(u),f.distance()}};lm.MaxPointDistanceFilter.get=function(){return uu};lm.MaxDensifiedByFractionDistanceFilter.get=function(){return Go};Object.defineProperties(gi,lm);var uu=function(){this._maxPtDist=new ir,this._minPtDist=new ir,this._euclideanDist=new Ji,this._geom=null;var t=arguments[0];this._geom=t};uu.prototype.filter=function(t){this._minPtDist.initialize(),Ji.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};uu.prototype.getMaxPointDistance=function(){return this._maxPtDist};uu.prototype.interfaces_=function(){return[ws]};uu.prototype.getClass=function(){return uu};var Go=function(){this._maxPtDist=new ir,this._minPtDist=new ir,this._geom=null,this._numSubSegs=0;var t=arguments[0],n=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/n))};Go.prototype.filter=function(t,n){var r=this;if(n===0)return null;for(var i=t.getCoordinate(n-1),o=t.getCoordinate(n),u=(o.x-i.x)/this._numSubSegs,f=(o.y-i.y)/this._numSubSegs,d=0;d<this._numSubSegs;d++){var _=i.x+d*u,y=i.y+d*f,E=new it(_,y);r._minPtDist.initialize(),Ji.computeDistance(r._geom,E,r._minPtDist),r._maxPtDist.setMaximum(r._minPtDist)}};Go.prototype.isDone=function(){return!1};Go.prototype.isGeometryChanged=function(){return!1};Go.prototype.getMaxPointDistance=function(){return this._maxPtDist};Go.prototype.interfaces_=function(){return[Ai]};Go.prototype.getClass=function(){return Go};var Ur=function(t,n,r){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=n||null,this._result=r||null},cm={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Ur.prototype.checkMaximumDistance=function(t,n,r){var i=new gi(n,t);if(i.setDensifyFraction(.25),this._maxDistanceFound=i.orientedDistance(),this._maxDistanceFound>r){this._isValid=!1;var o=i.getCoordinates();this._errorLocation=o[1],this._errorIndicator=t.getFactory().createLineString(o),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Ti.toLineString(o[0],o[1])+")"}};Ur.prototype.isValid=function(){var t=Math.abs(this._bufDistance),n=Ur.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-n,this._maxValidDistance=t+n,this._input.isEmpty()||this._result.isEmpty()?!0:(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Ur.VERBOSE&&Yn.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)};Ur.prototype.checkNegativeValid=function(){if(!(this._input instanceof On||this._input instanceof Ls||this._input instanceof yr))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)};Ur.prototype.getErrorIndicator=function(){return this._errorIndicator};Ur.prototype.checkMinimumDistance=function(t,n,r){var i=new $n(t,n,r);if(this._minDistanceFound=i.distance(),this._minDistanceFound<r){this._isValid=!1;var o=i.nearestPoints();this._errorLocation=i.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(o),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Ti.toLineString(o[0],o[1])+" )"}};Ur.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)};Ur.prototype.getErrorLocation=function(){return this._errorLocation};Ur.prototype.getPolygonLines=function(t){for(var n=new Ft,r=new Kn(n),i=no.getPolygons(t),o=i.iterator();o.hasNext();){var u=o.next();u.apply(r)}return t.getFactory().buildGeometry(n)};Ur.prototype.getErrorMessage=function(){return this._errMsg};Ur.prototype.interfaces_=function(){return[]};Ur.prototype.getClass=function(){return Ur};cm.VERBOSE.get=function(){return!1};cm.MAX_DISTANCE_DIFF_FRAC.get=function(){return .012};Object.defineProperties(Ur,cm);var Qn=function(t,n,r){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=n||null,this._result=r||null},hm={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Qn.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid};Qn.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Qn.MAX_ENV_DIFF_FRAC;t===0&&(t=.001);var n=new Jt(this._input.getEnvelopeInternal());n.expandBy(this._distance);var r=new Jt(this._result.getEnvelopeInternal());r.expandBy(t),r.contains(n)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(r)),this.report("Envelope")};Qn.prototype.checkDistance=function(){var t=new Ur(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")};Qn.prototype.checkArea=function(){var t=this._input.getArea(),n=this._result.getArea();this._distance>0&&t>n&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<n&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")};Qn.prototype.checkPolygonal=function(){this._result instanceof On||this._result instanceof Ls||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")};Qn.prototype.getErrorIndicator=function(){return this._errorIndicator};Qn.prototype.getErrorLocation=function(){return this._errorLocation};Qn.prototype.checkExpectedEmpty=function(){if(this._input.getDimension()>=2||this._distance>0)return null;this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),this.report("ExpectedEmpty")};Qn.prototype.report=function(t){if(!Qn.VERBOSE)return null;Yn.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))};Qn.prototype.getErrorMessage=function(){return this._errorMsg};Qn.prototype.interfaces_=function(){return[]};Qn.prototype.getClass=function(){return Qn};Qn.isValidMsg=function(t,n,r){var i=new Qn(t,n,r);return i.isValid()?null:i.getErrorMessage()};Qn.isValid=function(t,n,r){var i=new Qn(t,n,r);return!!i.isValid()};hm.VERBOSE.get=function(){return!1};hm.MAX_ENV_DIFF_FRAC.get=function(){return .012};Object.defineProperties(Qn,hm);var ls=function(){this._pts=null,this._data=null;var t=arguments[0],n=arguments[1];this._pts=t,this._data=n};ls.prototype.getCoordinates=function(){return this._pts};ls.prototype.size=function(){return this._pts.length};ls.prototype.getCoordinate=function(t){return this._pts[t]};ls.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};ls.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:ru.octant(this.getCoordinate(t),this.getCoordinate(t+1))};ls.prototype.setData=function(t){this._data=t};ls.prototype.getData=function(){return this._data};ls.prototype.toString=function(){return Ti.toLineString(new Cn(this._pts))};ls.prototype.interfaces_=function(){return[Ps]};ls.prototype.getClass=function(){return ls};var Vn=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Ft,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};Vn.prototype.getInteriorIntersection=function(){return this._interiorIntersection};Vn.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t};Vn.prototype.getIntersectionSegments=function(){return this._intSegments};Vn.prototype.count=function(){return this._intersectionCount};Vn.prototype.getIntersections=function(){return this._intersections};Vn.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t};Vn.prototype.setKeepIntersections=function(t){this._keepIntersections=t};Vn.prototype.processIntersections=function(t,n,r,i){if(!this._findAllIntersections&&this.hasIntersection()||t===r&&n===i)return null;if(this._isCheckEndSegmentsOnly){var o=this.isEndSegment(t,n)||this.isEndSegment(r,i);if(!o)return null}var u=t.getCoordinates()[n],f=t.getCoordinates()[n+1],d=r.getCoordinates()[i],_=r.getCoordinates()[i+1];this._li.computeIntersection(u,f,d,_),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=u,this._intSegments[1]=f,this._intSegments[2]=d,this._intSegments[3]=_,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)};Vn.prototype.isEndSegment=function(t,n){return n===0||n>=t.size()-2};Vn.prototype.hasIntersection=function(){return this._interiorIntersection!==null};Vn.prototype.isDone=function(){return this._findAllIntersections?!1:this._interiorIntersection!==null};Vn.prototype.interfaces_=function(){return[ya]};Vn.prototype.getClass=function(){return Vn};Vn.createAllIntersectionsFinder=function(t){var n=new Vn(t);return n.setFindAllIntersections(!0),n};Vn.createAnyIntersectionFinder=function(t){return new Vn(t)};Vn.createIntersectionCounter=function(t){var n=new Vn(t);return n.setFindAllIntersections(!0),n.setKeepIntersections(!1),n};var Ri=function(){this._li=new Sa,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Ri.prototype.execute=function(){if(this._segInt!==null)return null;this.checkInteriorIntersections()};Ri.prototype.getIntersections=function(){return this._segInt.getIntersections()};Ri.prototype.isValid=function(){return this.execute(),this._isValid};Ri.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t};Ri.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Vn(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new am;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null};Ri.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new ao(this.getErrorMessage(),this._segInt.getInteriorIntersection())};Ri.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Ti.toLineString(t[0],t[1])+" and "+Ti.toLineString(t[2],t[3])};Ri.prototype.interfaces_=function(){return[]};Ri.prototype.getClass=function(){return Ri};Ri.computeIntersections=function(t){var n=new Ri(t);return n.setFindAllIntersections(!0),n.isValid(),n.getIntersections()};var Ea=function e(){this._nv=null;var t=arguments[0];this._nv=new Ri(e.toSegmentStrings(t))};Ea.prototype.checkValid=function(){this._nv.checkValid()};Ea.prototype.interfaces_=function(){return[]};Ea.prototype.getClass=function(){return Ea};Ea.toSegmentStrings=function(t){for(var n=new Ft,r=t.iterator();r.hasNext();){var i=r.next();n.add(new ls(i.getCoordinates(),i))}return n};Ea.checkValid=function(t){var n=new Ea(t);n.checkValid()};var lu=function(t){this._mapOp=t};lu.prototype.map=function(t){for(var n=this,r=new Ft,i=0;i<t.getNumGeometries();i++){var o=n._mapOp.map(t.getGeometryN(i));o.isEmpty()||r.add(o)}return t.getFactory().createGeometryCollection(xe.toGeometryArray(r))};lu.prototype.interfaces_=function(){return[]};lu.prototype.getClass=function(){return lu};lu.map=function(t,n){var r=new lu(n);return r.map(t)};var cs=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Ft,this._resultLineList=new Ft;var t=arguments[0],n=arguments[1],r=arguments[2];this._op=t,this._geometryFactory=n,this._ptLocator=r};cs.prototype.collectLines=function(t){for(var n=this,r=this._op.getGraph().getEdgeEnds().iterator();r.hasNext();){var i=r.next();n.collectLineEdge(i,t,n._lineEdgesList),n.collectBoundaryTouchEdge(i,t,n._lineEdgesList)}};cs.prototype.labelIsolatedLine=function(t,n){var r=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(n));t.getLabel().setLocation(n,r)};cs.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList};cs.prototype.collectLineEdge=function(t,n,r){var i=t.getLabel(),o=t.getEdge();t.isLineEdge()&&!t.isVisited()&&pe.isResultOfOp(i,n)&&!o.isCovered()&&(r.add(o),t.setVisitedEdge(!0))};cs.prototype.findCoveredLineEdges=function(){for(var t=this,n=this._op.getGraph().getNodes().iterator();n.hasNext();){var r=n.next();r.getEdges().findCoveredLineEdges()}for(var i=this._op.getGraph().getEdgeEnds().iterator();i.hasNext();){var o=i.next(),u=o.getEdge();if(o.isLineEdge()&&!u.isCoveredSet()){var f=t._op.isCoveredByA(o.getCoordinate());u.setCovered(f)}}};cs.prototype.labelIsolatedLines=function(t){for(var n=this,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getLabel();i.isIsolated()&&(o.isNull(0)?n.labelIsolatedLine(i,0):n.labelIsolatedLine(i,1))}};cs.prototype.buildLines=function(t){for(var n=this,r=this._lineEdgesList.iterator();r.hasNext();){var i=r.next(),o=n._geometryFactory.createLineString(i.getCoordinates());n._resultLineList.add(o),i.setInResult(!0)}};cs.prototype.collectBoundaryTouchEdge=function(t,n,r){var i=t.getLabel();if(t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult())return null;me.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),pe.isResultOfOp(i,n)&&n===pe.INTERSECTION&&(r.add(t.getEdge()),t.setVisitedEdge(!0))};cs.prototype.interfaces_=function(){return[]};cs.prototype.getClass=function(){return cs};var cu=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Ft;var t=arguments[0],n=arguments[1];this._op=t,this._geometryFactory=n};cu.prototype.filterCoveredNodeToPoint=function(t){var n=t.getCoordinate();if(!this._op.isCoveredByLA(n)){var r=this._geometryFactory.createPoint(n);this._resultPointList.add(r)}};cu.prototype.extractNonCoveredResultNodes=function(t){for(var n=this,r=this._op.getGraph().getNodes().iterator();r.hasNext();){var i=r.next();if(!i.isInResult()&&!i.isIncidentEdgeInResult()&&(i.getEdges().getDegree()===0||t===pe.INTERSECTION)){var o=i.getLabel();pe.isResultOfOp(o,t)&&n.filterCoveredNodeToPoint(i)}}};cu.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList};cu.prototype.interfaces_=function(){return[]};cu.prototype.getClass=function(){return cu};var Tr=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Tr.prototype.transformPoint=function(t,n){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))};Tr.prototype.transformPolygon=function(t,n){var r=this,i=!0,o=this.transformLinearRing(t.getExteriorRing(),t);(o===null||!(o instanceof Ss)||o.isEmpty())&&(i=!1);for(var u=new Ft,f=0;f<t.getNumInteriorRing();f++){var d=r.transformLinearRing(t.getInteriorRingN(f),t);d===null||d.isEmpty()||(d instanceof Ss||(i=!1),u.add(d))}if(i)return this._factory.createPolygon(o,u.toArray([]));var _=new Ft;return o!==null&&_.add(o),_.addAll(u),this._factory.buildGeometry(_)};Tr.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)};Tr.prototype.getInputGeometry=function(){return this._inputGeom};Tr.prototype.transformMultiLineString=function(t,n){for(var r=this,i=new Ft,o=0;o<t.getNumGeometries();o++){var u=r.transformLineString(t.getGeometryN(o),t);u!==null&&(u.isEmpty()||i.add(u))}return this._factory.buildGeometry(i)};Tr.prototype.transformCoordinates=function(t,n){return this.copy(t)};Tr.prototype.transformLineString=function(t,n){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))};Tr.prototype.transformMultiPoint=function(t,n){for(var r=this,i=new Ft,o=0;o<t.getNumGeometries();o++){var u=r.transformPoint(t.getGeometryN(o),t);u!==null&&(u.isEmpty()||i.add(u))}return this._factory.buildGeometry(i)};Tr.prototype.transformMultiPolygon=function(t,n){for(var r=this,i=new Ft,o=0;o<t.getNumGeometries();o++){var u=r.transformPolygon(t.getGeometryN(o),t);u!==null&&(u.isEmpty()||i.add(u))}return this._factory.buildGeometry(i)};Tr.prototype.copy=function(t){return t.copy()};Tr.prototype.transformGeometryCollection=function(t,n){for(var r=this,i=new Ft,o=0;o<t.getNumGeometries();o++){var u=r.transform(t.getGeometryN(o));u!==null&&(r._pruneEmptyGeometry&&u.isEmpty()||i.add(u))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(xe.toGeometryArray(i)):this._factory.buildGeometry(i)};Tr.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof jr)return this.transformPoint(t,null);if(t instanceof dl)return this.transformMultiPoint(t,null);if(t instanceof Ss)return this.transformLinearRing(t,null);if(t instanceof _n)return this.transformLineString(t,null);if(t instanceof ga)return this.transformMultiLineString(t,null);if(t instanceof On)return this.transformPolygon(t,null);if(t instanceof Ls)return this.transformMultiPolygon(t,null);if(t instanceof yr)return this.transformGeometryCollection(t,null);throw new cn("Unknown Geometry subtype: "+t.getClass().getName())};Tr.prototype.transformLinearRing=function(t,n){var r=this.transformCoordinates(t.getCoordinateSequence(),t);if(r===null)return this._factory.createLinearRing(null);var i=r.size();return i>0&&i<4&&!this._preserveType?this._factory.createLineString(r):this._factory.createLinearRing(r)};Tr.prototype.interfaces_=function(){return[]};Tr.prototype.getClass=function(){return Tr};var As=function e(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new $t,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof _n&&typeof arguments[1]=="number"){var t=arguments[0],n=arguments[1];e.call(this,t.getCoordinates(),n)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var r=arguments[0],i=arguments[1];this._srcPts=r,this._isClosed=e.isClosed(r),this._snapTolerance=i}};As.prototype.snapVertices=function(t,n){for(var r=this,i=this._isClosed?t.size()-1:t.size(),o=0;o<i;o++){var u=t.get(o),f=r.findSnapForVertex(u,n);f!==null&&(t.set(o,new it(f)),o===0&&r._isClosed&&t.set(t.size()-1,new it(f)))}};As.prototype.findSnapForVertex=function(t,n){for(var r=this,i=0;i<n.length;i++){if(t.equals2D(n[i]))return null;if(t.distance(n[i])<r._snapTolerance)return n[i]}return null};As.prototype.snapTo=function(t){var n=new ch(this._srcPts);this.snapVertices(n,t),this.snapSegments(n,t);var r=n.toCoordinateArray();return r};As.prototype.snapSegments=function(t,n){var r=this;if(n.length===0)return null;var i=n.length;n[0].equals2D(n[n.length-1])&&(i=n.length-1);for(var o=0;o<i;o++){var u=n[o],f=r.findSegmentIndexToSnap(u,t);f>=0&&t.add(f+1,new it(u),!1)}};As.prototype.findSegmentIndexToSnap=function(t,n){for(var r=this,i=ue.MAX_VALUE,o=-1,u=0;u<n.size()-1;u++){if(r._seg.p0=n.get(u),r._seg.p1=n.get(u+1),r._seg.p0.equals2D(t)||r._seg.p1.equals2D(t)){if(r._allowSnappingToSourceVertices)continue;return-1}var f=r._seg.distance(t);f<r._snapTolerance&&f<i&&(i=f,o=u)}return o};As.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t};As.prototype.interfaces_=function(){return[]};As.prototype.getClass=function(){return As};As.isClosed=function(t){return t.length<=1?!1:t[0].equals2D(t[t.length-1])};var En=function(t){this._srcGeom=t||null},qv={SNAP_PRECISION_FACTOR:{configurable:!0}};En.prototype.snapTo=function(t,n){var r=this.extractTargetCoordinates(t),i=new Hv(n,r);return i.transform(this._srcGeom)};En.prototype.snapToSelf=function(t,n){var r=this.extractTargetCoordinates(this._srcGeom),i=new Hv(t,r,!0),o=i.transform(this._srcGeom),u=o;return n&&se(u,No)&&(u=o.buffer(0)),u};En.prototype.computeSnapTolerance=function(t){var n=this.computeMinimumSegmentLength(t),r=n/10;return r};En.prototype.extractTargetCoordinates=function(t){for(var n=new ns,r=t.getCoordinates(),i=0;i<r.length;i++)n.add(r[i]);return n.toArray(new Array(0).fill(null))};En.prototype.computeMinimumSegmentLength=function(t){for(var n=ue.MAX_VALUE,r=0;r<t.length-1;r++){var i=t[r].distance(t[r+1]);i<n&&(n=i)}return n};En.prototype.interfaces_=function(){return[]};En.prototype.getClass=function(){return En};En.snap=function(t,n,r){var i=new Array(2).fill(null),o=new En(t);i[0]=o.snapTo(n,r);var u=new En(n);return i[1]=u.snapTo(i[0],r),i};En.computeOverlaySnapTolerance=function(){if(arguments.length===1){var t=arguments[0],n=En.computeSizeBasedSnapTolerance(t),r=t.getPrecisionModel();if(r.getType()===Fe.FIXED){var i=1/r.getScale()*2/1.415;i>n&&(n=i)}return n}else if(arguments.length===2){var o=arguments[0],u=arguments[1];return Math.min(En.computeOverlaySnapTolerance(o),En.computeOverlaySnapTolerance(u))}};En.computeSizeBasedSnapTolerance=function(t){var n=t.getEnvelopeInternal(),r=Math.min(n.getHeight(),n.getWidth()),i=r*En.SNAP_PRECISION_FACTOR;return i};En.snapToSelf=function(t,n,r){var i=new En(t);return i.snapToSelf(n,r)};qv.SNAP_PRECISION_FACTOR.get=function(){return 1e-9};Object.defineProperties(En,qv);var Hv=function(e){function t(n,r,i){e.call(this),this._snapTolerance=n||null,this._snapPts=r||null,this._isSelfSnap=i!==void 0?i:!1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.snapLine=function(r,i){var o=new As(r,this._snapTolerance);return o.setAllowSnappingToSourceVertices(this._isSelfSnap),o.snapTo(i)},t.prototype.transformCoordinates=function(r,i){var o=r.toCoordinateArray(),u=this.snapLine(o,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(u)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Tr),fr=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};fr.prototype.getCommon=function(){return ue.longBitsToDouble(this._commonBits)};fr.prototype.add=function(t){var n=ue.doubleToLongBits(t);if(this._isFirst)return this._commonBits=n,this._commonSignExp=fr.signExpBits(this._commonBits),this._isFirst=!1,null;var r=fr.signExpBits(n);if(r!==this._commonSignExp)return this._commonBits=0,null;this._commonMantissaBitsCount=fr.numCommonMostSigMantissaBits(this._commonBits,n),this._commonBits=fr.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))};fr.prototype.toString=function(){if(arguments.length===1){var t=arguments[0],n=ue.longBitsToDouble(t),r=ue.toBinaryString(t),i="0000000000000000000000000000000000000000000000000000000000000000"+r,o=i.substring(i.length-64),u=o.substring(0,1)+"  "+o.substring(1,12)+"(exp) "+o.substring(12)+" [ "+n+" ]";return u}};fr.prototype.interfaces_=function(){return[]};fr.prototype.getClass=function(){return fr};fr.getBit=function(t,n){var r=1<<n;return t&r?1:0};fr.signExpBits=function(t){return t>>52};fr.zeroLowerBits=function(t,n){var r=(1<<n)-1,i=~r,o=t&i;return o};fr.numCommonMostSigMantissaBits=function(t,n){for(var r=0,i=52;i>=0;i--){if(fr.getBit(t,i)!==fr.getBit(n,i))return r;r++}return 52};var Uo=function(){this._commonCoord=null,this._ccFilter=new hu},fm={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};Uo.prototype.addCommonBits=function(t){var n=new Vo(this._commonCoord);t.apply(n),t.geometryChanged()};Uo.prototype.removeCommonBits=function(t){if(this._commonCoord.x===0&&this._commonCoord.y===0)return t;var n=new it(this._commonCoord);n.x=-n.x,n.y=-n.y;var r=new Vo(n);return t.apply(r),t.geometryChanged(),t};Uo.prototype.getCommonCoordinate=function(){return this._commonCoord};Uo.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()};Uo.prototype.interfaces_=function(){return[]};Uo.prototype.getClass=function(){return Uo};fm.CommonCoordinateFilter.get=function(){return hu};fm.Translater.get=function(){return Vo};Object.defineProperties(Uo,fm);var hu=function(){this._commonBitsX=new fr,this._commonBitsY=new fr};hu.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)};hu.prototype.getCommonCoordinate=function(){return new it(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())};hu.prototype.interfaces_=function(){return[ws]};hu.prototype.getClass=function(){return hu};var Vo=function(){this.trans=null;var t=arguments[0];this.trans=t};Vo.prototype.filter=function(t,n){var r=t.getOrdinate(n,0)+this.trans.x,i=t.getOrdinate(n,1)+this.trans.y;t.setOrdinate(n,0,r),t.setOrdinate(n,1,i)};Vo.prototype.isDone=function(){return!1};Vo.prototype.isGeometryChanged=function(){return!0};Vo.prototype.interfaces_=function(){return[Ai]};Vo.prototype.getClass=function(){return Vo};var jn=function(t,n){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=n,this.computeSnapTolerance()};jn.prototype.selfSnap=function(t){var n=new En(t),r=n.snapTo(t,this._snapTolerance);return r};jn.prototype.removeCommonBits=function(t){this._cbr=new Uo,this._cbr.add(t[0]),this._cbr.add(t[1]);var n=new Array(2).fill(null);return n[0]=this._cbr.removeCommonBits(t[0].copy()),n[1]=this._cbr.removeCommonBits(t[1].copy()),n};jn.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t};jn.prototype.getResultGeometry=function(t){var n=this.snap(this._geom),r=pe.overlayOp(n[0],n[1],t);return this.prepareResult(r)};jn.prototype.checkValid=function(t){t.isValid()||Yn.out.println("Snapped geometry is invalid")};jn.prototype.computeSnapTolerance=function(){this._snapTolerance=En.computeOverlaySnapTolerance(this._geom[0],this._geom[1])};jn.prototype.snap=function(t){var n=this.removeCommonBits(t),r=En.snap(n[0],n[1],this._snapTolerance);return r};jn.prototype.interfaces_=function(){return[]};jn.prototype.getClass=function(){return jn};jn.overlayOp=function(t,n,r){var i=new jn(t,n);return i.getResultGeometry(r)};jn.union=function(t,n){return jn.overlayOp(t,n,pe.UNION)};jn.intersection=function(t,n){return jn.overlayOp(t,n,pe.INTERSECTION)};jn.symDifference=function(t,n){return jn.overlayOp(t,n,pe.SYMDIFFERENCE)};jn.difference=function(t,n){return jn.overlayOp(t,n,pe.DIFFERENCE)};var Er=function(t,n){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=n};Er.prototype.getResultGeometry=function(t){var n=null,r=!1,i=null;try{n=pe.overlayOp(this._geom[0],this._geom[1],t);var o=!0;o&&(r=!0)}catch(u){if(u instanceof so)i=u;else throw u}finally{}if(!r)try{n=jn.overlayOp(this._geom[0],this._geom[1],t)}catch(u){throw u instanceof so?i:u}finally{}return n};Er.prototype.interfaces_=function(){return[]};Er.prototype.getClass=function(){return Er};Er.overlayOp=function(t,n,r){var i=new Er(t,n);return i.getResultGeometry(r)};Er.union=function(t,n){return Er.overlayOp(t,n,pe.UNION)};Er.intersection=function(t,n){return Er.overlayOp(t,n,pe.INTERSECTION)};Er.symDifference=function(t,n){return Er.overlayOp(t,n,pe.SYMDIFFERENCE)};Er.difference=function(t,n){return Er.overlayOp(t,n,pe.DIFFERENCE)};var Qc=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],n=arguments[1];this.mce=t,this.chainIndex=n};Qc.prototype.computeIntersections=function(t,n){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,n)};Qc.prototype.interfaces_=function(){return[]};Qc.prototype.getClass=function(){return Qc};var Zr=function e(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,arguments.length===2){var t=arguments[0],n=arguments[1];this._eventType=e.DELETE,this._xValue=t,this._insertEvent=n}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=e.INSERT,this._label=r,this._xValue=i,this._obj=o}},pm={INSERT:{configurable:!0},DELETE:{configurable:!0}};Zr.prototype.isDelete=function(){return this._eventType===Zr.DELETE};Zr.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t};Zr.prototype.getObject=function(){return this._obj};Zr.prototype.compareTo=function(t){var n=t;return this._xValue<n._xValue?-1:this._xValue>n._xValue?1:this._eventType<n._eventType?-1:this._eventType>n._eventType?1:0};Zr.prototype.getInsertEvent=function(){return this._insertEvent};Zr.prototype.isInsert=function(){return this._eventType===Zr.INSERT};Zr.prototype.isSameLabel=function(t){return this._label===null?!1:this._label===t._label};Zr.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex};Zr.prototype.interfaces_=function(){return[vi]};Zr.prototype.getClass=function(){return Zr};pm.INSERT.get=function(){return 1};pm.DELETE.get=function(){return 2};Object.defineProperties(Zr,pm);var Kf=function(){};Kf.prototype.interfaces_=function(){return[]};Kf.prototype.getClass=function(){return Kf};var tr=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],n=arguments[1],r=arguments[2];this._li=t,this._includeProper=n,this._recordIsolated=r};tr.prototype.isTrivialIntersection=function(t,n,r,i){if(t===r&&this._li.getIntersectionNum()===1){if(tr.isAdjacentSegments(n,i))return!0;if(t.isClosed()){var o=t.getNumPoints()-1;if(n===0&&i===o||i===0&&n===o)return!0}}return!1};tr.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};tr.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t};tr.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};tr.prototype.isBoundaryPointInternal=function(t,n){for(var r=n.iterator();r.hasNext();){var i=r.next(),o=i.getCoordinate();if(t.isIntersection(o))return!0}return!1};tr.prototype.hasProperIntersection=function(){return this._hasProper};tr.prototype.hasIntersection=function(){return this._hasIntersection};tr.prototype.isDone=function(){return this._isDone};tr.prototype.isBoundaryPoint=function(t,n){return n===null?!1:!!(this.isBoundaryPointInternal(t,n[0])||this.isBoundaryPointInternal(t,n[1]))};tr.prototype.setBoundaryNodes=function(t,n){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=n};tr.prototype.addIntersections=function(t,n,r,i){if(t===r&&n===i)return null;this.numTests++;var o=t.getCoordinates()[n],u=t.getCoordinates()[n+1],f=r.getCoordinates()[i],d=r.getCoordinates()[i+1];this._li.computeIntersection(o,u,f,d),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),r.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,n,r,i)||(this._hasIntersection=!0,(this._includeProper||!this._li.isProper())&&(t.addIntersections(this._li,n,0),r.addIntersections(this._li,i,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))};tr.prototype.interfaces_=function(){return[]};tr.prototype.getClass=function(){return tr};tr.isAdjacentSegments=function(t,n){return Math.abs(t-n)===1};var U4=function(e){function t(){e.call(this),this.events=new Ft,this.nOverlaps=null}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.prepareEvents=function(){var r=this;Di.sort(this.events);for(var i=0;i<this.events.size();i++){var o=r.events.get(i);o.isDelete()&&o.getInsertEvent().setDeleteEventIndex(i)}},t.prototype.computeIntersections=function(){var r=this;if(arguments.length===1){var i=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var o=0;o<this.events.size();o++){var u=r.events.get(o);if(u.isInsert()&&r.processOverlaps(o,u.getDeleteEventIndex(),u,i),i.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof tr&&se(arguments[0],Ii)&&se(arguments[1],Ii)){var f=arguments[0],d=arguments[1],_=arguments[2];this.addEdges(f,f),this.addEdges(d,d),this.computeIntersections(_)}else if(typeof arguments[2]=="boolean"&&se(arguments[0],Ii)&&arguments[1]instanceof tr){var y=arguments[0],E=arguments[1],S=arguments[2];S?this.addEdges(y,null):this.addEdges(y),this.computeIntersections(E)}}},t.prototype.addEdge=function(r,i){for(var o=this,u=r.getMonotoneChainEdge(),f=u.getStartIndexes(),d=0;d<f.length-1;d++){var _=new Qc(u,d),y=new Zr(i,u.getMinX(d),_);o.events.add(y),o.events.add(new Zr(u.getMaxX(d),y))}},t.prototype.processOverlaps=function(r,i,o,u){for(var f=this,d=o.getObject(),_=r;_<i;_++){var y=f.events.get(_);if(y.isInsert()){var E=y.getObject();o.isSameLabel(y)||(d.computeIntersections(E,u),f.nOverlaps++)}}},t.prototype.addEdges=function(){var r=this;if(arguments.length===1)for(var i=arguments[0],o=i.iterator();o.hasNext();){var u=o.next();r.addEdge(u,u)}else if(arguments.length===2)for(var f=arguments[0],d=arguments[1],_=f.iterator();_.hasNext();){var y=_.next();r.addEdge(y,d)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Kf),ks=function(){this._min=ue.POSITIVE_INFINITY,this._max=ue.NEGATIVE_INFINITY},Zv={NodeComparator:{configurable:!0}};ks.prototype.getMin=function(){return this._min};ks.prototype.intersects=function(t,n){return!(this._min>n||this._max<t)};ks.prototype.getMax=function(){return this._max};ks.prototype.toString=function(){return Ti.toLineString(new it(this._min,0),new it(this._max,0))};ks.prototype.interfaces_=function(){return[]};ks.prototype.getClass=function(){return ks};Zv.NodeComparator.get=function(){return th};Object.defineProperties(ks,Zv);var th=function(){};th.prototype.compare=function(t,n){var r=t,i=n,o=(r._min+r._max)/2,u=(i._min+i._max)/2;return o<u?-1:o>u?1:0};th.prototype.interfaces_=function(){return[al]};th.prototype.getClass=function(){return th};var V4=function(e){function t(){e.call(this),this._item=null;var n=arguments[0],r=arguments[1],i=arguments[2];this._min=n,this._max=r,this._item=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.query=function(r,i,o){if(!this.intersects(r,i))return null;o.visitItem(this._item)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(ks),j4=function(e){function t(){e.call(this),this._node1=null,this._node2=null;var n=arguments[0],r=arguments[1];this._node1=n,this._node2=r,this.buildExtent(this._node1,this._node2)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.buildExtent=function(r,i){this._min=Math.min(r._min,i._min),this._max=Math.max(r._max,i._max)},t.prototype.query=function(r,i,o){if(!this.intersects(r,i))return null;this._node1!==null&&this._node1.query(r,i,o),this._node2!==null&&this._node2.query(r,i,o)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(ks),Ds=function(){this._leaves=new Ft,this._root=null,this._level=0};Ds.prototype.buildTree=function(){var t=this;Di.sort(this._leaves,new ks.NodeComparator);for(var n=this._leaves,r=null,i=new Ft;;){if(t.buildLevel(n,i),i.size()===1)return i.get(0);r=n,n=i,i=r}};Ds.prototype.insert=function(t,n,r){if(this._root!==null)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new V4(t,n,r))};Ds.prototype.query=function(t,n,r){this.init(),this._root.query(t,n,r)};Ds.prototype.buildRoot=function(){if(this._root!==null)return null;this._root=this.buildTree()};Ds.prototype.printNode=function(t){Yn.out.println(Ti.toLineString(new it(t._min,this._level),new it(t._max,this._level)))};Ds.prototype.init=function(){if(this._root!==null)return null;this.buildRoot()};Ds.prototype.buildLevel=function(t,n){this._level++,n.clear();for(var r=0;r<t.size();r+=2){var i=t.get(r),o=r+1<t.size()?t.get(r):null;if(o===null)n.add(i);else{var u=new j4(t.get(r),t.get(r+1));n.add(u)}}};Ds.prototype.interfaces_=function(){return[]};Ds.prototype.getClass=function(){return Ds};var Cl=function(){this._items=new Ft};Cl.prototype.visitItem=function(t){this._items.add(t)};Cl.prototype.getItems=function(){return this._items};Cl.prototype.interfaces_=function(){return[Oo]};Cl.prototype.getClass=function(){return Cl};var El=function(){this._index=null;var t=arguments[0];if(!se(t,No))throw new cn("Argument must be Polygonal");this._index=new La(t)},dm={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};El.prototype.locate=function(t){var n=new Qi(t),r=new Ll(n);return this._index.query(t.y,t.y,r),n.getLocation()};El.prototype.interfaces_=function(){return[yl]};El.prototype.getClass=function(){return El};dm.SegmentVisitor.get=function(){return Ll};dm.IntervalIndexedGeometry.get=function(){return La};Object.defineProperties(El,dm);var Ll=function(){this._counter=null;var t=arguments[0];this._counter=t};Ll.prototype.visitItem=function(t){var n=t;this._counter.countSegment(n.getCoordinate(0),n.getCoordinate(1))};Ll.prototype.interfaces_=function(){return[Oo]};Ll.prototype.getClass=function(){return Ll};var La=function(){this._index=new Ds;var t=arguments[0];this.init(t)};La.prototype.init=function(t){for(var n=this,r=Kn.getLines(t),i=r.iterator();i.hasNext();){var o=i.next(),u=o.getCoordinates();n.addLine(u)}};La.prototype.addLine=function(t){for(var n=this,r=1;r<t.length;r++){var i=new $t(t[r-1],t[r]),o=Math.min(i.p0.y,i.p1.y),u=Math.max(i.p0.y,i.p1.y);n._index.insert(o,u,i)}};La.prototype.query=function(){if(arguments.length===2){var t=arguments[0],n=arguments[1],r=new Cl;return this._index.query(t,n,r),r.getItems()}else if(arguments.length===3){var i=arguments[0],o=arguments[1],u=arguments[2];this._index.query(i,o,u)}};La.prototype.interfaces_=function(){return[]};La.prototype.getClass=function(){return La};var vc=function(e){function t(){if(e.call(this),this._parentGeom=null,this._lineEdgeMap=new Iv,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Oi,arguments.length===2){var n=arguments[0],r=arguments[1],i=mi.OGC_SFS_BOUNDARY_RULE;this._argIndex=n,this._parentGeom=r,this._boundaryNodeRule=i,r!==null&&this.add(r)}else if(arguments.length===3){var o=arguments[0],u=arguments[1],f=arguments[2];this._argIndex=o,this._parentGeom=u,this._boundaryNodeRule=f,u!==null&&this.add(u)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.insertBoundaryPoint=function(r,i){var o=this._nodes.addNode(i),u=o.getLabel(),f=1,d=lt.NONE;d=u.getLocation(r,kt.ON),d===lt.BOUNDARY&&f++;var _=t.determineBoundary(this._boundaryNodeRule,f);u.setLocation(r,_)},t.prototype.computeSelfNodes=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.computeSelfNodes(r,i,!1)}else if(arguments.length===3){var o=arguments[0],u=arguments[1],f=arguments[2],d=new tr(o,!0,!1);d.setIsDoneIfProperInt(f);var _=this.createEdgeSetIntersector(),y=this._parentGeom instanceof Ss||this._parentGeom instanceof On||this._parentGeom instanceof Ls,E=u||!y;return _.computeIntersections(this._edges,d,E),this.addSelfIntersectionNodes(this._argIndex),d}},t.prototype.computeSplitEdges=function(r){for(var i=this._edges.iterator();i.hasNext();){var o=i.next();o.eiList.addSplitEdges(r)}},t.prototype.computeEdgeIntersections=function(r,i,o){var u=new tr(i,o,!0);u.setBoundaryNodes(this.getBoundaryNodes(),r.getBoundaryNodes());var f=this.createEdgeSetIntersector();return f.computeIntersections(this._edges,r._edges,u),u},t.prototype.getGeometry=function(){return this._parentGeom},t.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},t.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},t.prototype.addPoint=function(){if(arguments[0]instanceof jr){var r=arguments[0],i=r.getCoordinate();this.insertPoint(this._argIndex,i,lt.INTERIOR)}else if(arguments[0]instanceof it){var o=arguments[0];this.insertPoint(this._argIndex,o,lt.INTERIOR)}},t.prototype.addPolygon=function(r){var i=this;this.addPolygonRing(r.getExteriorRing(),lt.EXTERIOR,lt.INTERIOR);for(var o=0;o<r.getNumInteriorRing();o++){var u=r.getInteriorRingN(o);i.addPolygonRing(u,lt.INTERIOR,lt.EXTERIOR)}},t.prototype.addEdge=function(r){this.insertEdge(r);var i=r.getCoordinates();this.insertPoint(this._argIndex,i[0],lt.BOUNDARY),this.insertPoint(this._argIndex,i[i.length-1],lt.BOUNDARY)},t.prototype.addLineString=function(r){var i=be.removeRepeatedPoints(r.getCoordinates());if(i.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=i[0],null;var o=new Zf(i,new je(this._argIndex,lt.INTERIOR));this._lineEdgeMap.put(r,o),this.insertEdge(o),me.isTrue(i.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,i[0]),this.insertBoundaryPoint(this._argIndex,i[i.length-1])},t.prototype.getInvalidPoint=function(){return this._invalidPoint},t.prototype.getBoundaryPoints=function(){for(var r=this.getBoundaryNodes(),i=new Array(r.size()).fill(null),o=0,u=r.iterator();u.hasNext();){var f=u.next();i[o++]=f.getCoordinate().copy()}return i},t.prototype.getBoundaryNodes=function(){return this._boundaryNodes===null&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},t.prototype.addSelfIntersectionNode=function(r,i,o){if(this.isBoundaryNode(r,i))return null;o===lt.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(r,i):this.insertPoint(r,i,o)},t.prototype.addPolygonRing=function(r,i,o){if(r.isEmpty())return null;var u=be.removeRepeatedPoints(r.getCoordinates());if(u.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=u[0],null;var f=i,d=o;Gt.isCCW(u)&&(f=o,d=i);var _=new Zf(u,new je(this._argIndex,lt.BOUNDARY,f,d));this._lineEdgeMap.put(r,_),this.insertEdge(_),this.insertPoint(this._argIndex,u[0],lt.BOUNDARY)},t.prototype.insertPoint=function(r,i,o){var u=this._nodes.addNode(i),f=u.getLabel();f===null?u._label=new je(r,o):f.setLocation(r,o)},t.prototype.createEdgeSetIntersector=function(){return new U4},t.prototype.addSelfIntersectionNodes=function(r){for(var i=this,o=this._edges.iterator();o.hasNext();)for(var u=o.next(),f=u.getLabel().getLocation(r),d=u.eiList.iterator();d.hasNext();){var _=d.next();i.addSelfIntersectionNode(r,_.coord,f)}},t.prototype.add=function(){if(arguments.length===1){var r=arguments[0];if(r.isEmpty())return null;if(r instanceof Ls&&(this._useBoundaryDeterminationRule=!1),r instanceof On)this.addPolygon(r);else if(r instanceof _n)this.addLineString(r);else if(r instanceof jr)this.addPoint(r);else if(r instanceof dl)this.addCollection(r);else if(r instanceof ga)this.addCollection(r);else if(r instanceof Ls)this.addCollection(r);else if(r instanceof yr)this.addCollection(r);else throw new Error(r.getClass().getName())}else return e.prototype.add.apply(this,arguments)},t.prototype.addCollection=function(r){for(var i=this,o=0;o<r.getNumGeometries();o++){var u=r.getGeometryN(o);i.add(u)}},t.prototype.locate=function(r){return se(this._parentGeom,No)&&this._parentGeom.getNumGeometries()>50?(this._areaPtLocator===null&&(this._areaPtLocator=new El(this._parentGeom)),this._areaPtLocator.locate(r)):this._ptLocator.locate(r,this._parentGeom)},t.prototype.findEdge=function(){if(arguments.length===1){var r=arguments[0];return this._lineEdgeMap.get(r)}else return e.prototype.findEdge.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.determineBoundary=function(r,i){return r.isInBoundary(i)?lt.BOUNDARY:lt.INTERIOR},t}(pn),xl=function(){if(this._li=new Sa,this._resultPrecisionModel=null,this._arg=null,arguments.length===1){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new vc(0,t)}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=mi.OGC_SFS_BOUNDARY_RULE;n.getPrecisionModel().compareTo(r.getPrecisionModel())>=0?this.setComputationPrecision(n.getPrecisionModel()):this.setComputationPrecision(r.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new vc(0,n,i),this._arg[1]=new vc(1,r,i)}else if(arguments.length===3){var o=arguments[0],u=arguments[1],f=arguments[2];o.getPrecisionModel().compareTo(u.getPrecisionModel())>=0?this.setComputationPrecision(o.getPrecisionModel()):this.setComputationPrecision(u.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new vc(0,o,f),this._arg[1]=new vc(1,u,f)}};xl.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()};xl.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)};xl.prototype.interfaces_=function(){return[]};xl.prototype.getClass=function(){return xl};var pa=function(){};pa.prototype.interfaces_=function(){return[]};pa.prototype.getClass=function(){return pa};pa.map=function(){if(arguments[0]instanceof ie&&se(arguments[1],pa.MapOp)){for(var t=arguments[0],n=arguments[1],r=new Ft,i=0;i<t.getNumGeometries();i++){var o=n.map(t.getGeometryN(i));o!==null&&r.add(o)}return t.getFactory().buildGeometry(r)}else if(se(arguments[0],An)&&se(arguments[1],pa.MapOp)){for(var u=arguments[0],f=arguments[1],d=new Ft,_=u.iterator();_.hasNext();){var y=_.next(),E=f.map(y);E!==null&&d.add(E)}return d}};pa.MapOp=function(){};var pe=function(e){function t(){var n=arguments[0],r=arguments[1];e.call(this,n,r),this._ptLocator=new Oi,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Ni,this._resultPolyList=new Ft,this._resultLineList=new Ft,this._resultPointList=new Ft,this._graph=new pn(new Bv),this._geomFact=n.getFactory()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.insertUniqueEdge=function(r){var i=this._edgeList.findEqualEdge(r);if(i!==null){var o=i.getLabel(),u=r.getLabel();i.isPointwiseEqual(r)||(u=new je(r.getLabel()),u.flip());var f=i.getDepth();f.isNull()&&f.add(o),f.add(u),o.merge(u)}else this._edgeList.add(r)},t.prototype.getGraph=function(){return this._graph},t.prototype.cancelDuplicateResultEdges=function(){for(var r=this._graph.getEdgeEnds().iterator();r.hasNext();){var i=r.next(),o=i.getSym();i.isInResult()&&o.isInResult()&&(i.setInResult(!1),o.setInResult(!1))}},t.prototype.isCoveredByLA=function(r){return!!(this.isCovered(r,this._resultLineList)||this.isCovered(r,this._resultPolyList))},t.prototype.computeGeometry=function(r,i,o,u){var f=new Ft;return f.addAll(r),f.addAll(i),f.addAll(o),f.isEmpty()?t.createEmptyResult(u,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(f)},t.prototype.mergeSymLabels=function(){for(var r=this._graph.getNodes().iterator();r.hasNext();){var i=r.next();i.getEdges().mergeSymLabels()}},t.prototype.isCovered=function(r,i){for(var o=this,u=i.iterator();u.hasNext();){var f=u.next(),d=o._ptLocator.locate(r,f);if(d!==lt.EXTERIOR)return!0}return!1},t.prototype.replaceCollapsedEdges=function(){for(var r=new Ft,i=this._edgeList.iterator();i.hasNext();){var o=i.next();o.isCollapsed()&&(i.remove(),r.add(o.getCollapsedEdge()))}this._edgeList.addAll(r)},t.prototype.updateNodeLabelling=function(){for(var r=this._graph.getNodes().iterator();r.hasNext();){var i=r.next(),o=i.getEdges().getLabel();i.getLabel().merge(o)}},t.prototype.getResultGeometry=function(r){return this.computeOverlay(r),this._resultGeom},t.prototype.insertUniqueEdges=function(r){for(var i=this,o=r.iterator();o.hasNext();){var u=o.next();i.insertUniqueEdge(u)}},t.prototype.computeOverlay=function(r){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var i=new Ft;this._arg[0].computeSplitEdges(i),this._arg[1].computeSplitEdges(i),this.insertUniqueEdges(i),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Ea.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(r),this.cancelDuplicateResultEdges();var o=new qr(this._geomFact);o.add(this._graph),this._resultPolyList=o.getPolygons();var u=new cs(this,this._geomFact,this._ptLocator);this._resultLineList=u.build(r);var f=new cu(this,this._geomFact,this._ptLocator);this._resultPointList=f.build(r),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,r)},t.prototype.labelIncompleteNode=function(r,i){var o=this._ptLocator.locate(r.getCoordinate(),this._arg[i].getGeometry());r.getLabel().setLocation(i,o)},t.prototype.copyPoints=function(r){for(var i=this,o=this._arg[r].getNodeIterator();o.hasNext();){var u=o.next(),f=i._graph.addNode(u.getCoordinate());f.setLabel(r,u.getLabel().getLocation(r))}},t.prototype.findResultAreaEdges=function(r){for(var i=this._graph.getEdgeEnds().iterator();i.hasNext();){var o=i.next(),u=o.getLabel();u.isArea()&&!o.isInteriorAreaEdge()&&t.isResultOfOp(u.getLocation(0,kt.RIGHT),u.getLocation(1,kt.RIGHT),r)&&o.setInResult(!0)}},t.prototype.computeLabelsFromDepths=function(){for(var r=this._edgeList.iterator();r.hasNext();){var i=r.next(),o=i.getLabel(),u=i.getDepth();if(!u.isNull()){u.normalize();for(var f=0;f<2;f++)!o.isNull(f)&&o.isArea()&&!u.isNull(f)&&(u.getDelta(f)===0?o.toLine(f):(me.isTrue(!u.isNull(f,kt.LEFT),"depth of LEFT side has not been initialized"),o.setLocation(f,kt.LEFT,u.getLocation(f,kt.LEFT)),me.isTrue(!u.isNull(f,kt.RIGHT),"depth of RIGHT side has not been initialized"),o.setLocation(f,kt.RIGHT,u.getLocation(f,kt.RIGHT))))}}},t.prototype.computeLabelling=function(){for(var r=this,i=this._graph.getNodes().iterator();i.hasNext();){var o=i.next();o.getEdges().computeLabelling(r._arg)}this.mergeSymLabels(),this.updateNodeLabelling()},t.prototype.labelIncompleteNodes=function(){for(var r=this,i=this._graph.getNodes().iterator();i.hasNext();){var o=i.next(),u=o.getLabel();o.isIsolated()&&(u.isNull(0)?r.labelIncompleteNode(o,0):r.labelIncompleteNode(o,1)),o.getEdges().updateLabelling(u)}},t.prototype.isCoveredByA=function(r){return!!this.isCovered(r,this._resultPolyList)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(xl);pe.overlayOp=function(e,t,n){var r=new pe(e,t),i=r.getResultGeometry(n);return i};pe.intersection=function(e,t){if(e.isEmpty()||t.isEmpty())return pe.createEmptyResult(pe.INTERSECTION,e,t,e.getFactory());if(e.isGeometryCollection()){var n=t;return lu.map(e,{interfaces_:function(){return[pa.MapOp]},map:function(r){return r.intersection(n)}})}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),Er.overlayOp(e,t,pe.INTERSECTION)};pe.symDifference=function(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return pe.createEmptyResult(pe.SYMDIFFERENCE,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),Er.overlayOp(e,t,pe.SYMDIFFERENCE)};pe.resultDimension=function(e,t,n){var r=t.getDimension(),i=n.getDimension(),o=-1;switch(e){case pe.INTERSECTION:o=Math.min(r,i);break;case pe.UNION:o=Math.max(r,i);break;case pe.DIFFERENCE:o=r;break;case pe.SYMDIFFERENCE:o=Math.max(r,i);break}return o};pe.createEmptyResult=function(e,t,n,r){var i=null;switch(pe.resultDimension(e,t,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon();break}return i};pe.difference=function(e,t){return e.isEmpty()?pe.createEmptyResult(pe.DIFFERENCE,e,t,e.getFactory()):t.isEmpty()?e.copy():(e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),Er.overlayOp(e,t,pe.DIFFERENCE))};pe.isResultOfOp=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=e.getLocation(0),r=e.getLocation(1);return pe.isResultOfOp(n,r,t)}else if(arguments.length===3){var i=arguments[0],o=arguments[1],u=arguments[2];switch(i===lt.BOUNDARY&&(i=lt.INTERIOR),o===lt.BOUNDARY&&(o=lt.INTERIOR),u){case pe.INTERSECTION:return i===lt.INTERIOR&&o===lt.INTERIOR;case pe.UNION:return i===lt.INTERIOR||o===lt.INTERIOR;case pe.DIFFERENCE:return i===lt.INTERIOR&&o!==lt.INTERIOR;case pe.SYMDIFFERENCE:return i===lt.INTERIOR&&o!==lt.INTERIOR||i!==lt.INTERIOR&&o===lt.INTERIOR}return!1}};pe.INTERSECTION=1;pe.UNION=2;pe.DIFFERENCE=3;pe.SYMDIFFERENCE=4;var Do=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Oi,this._seg=new $t;var t=arguments[0],n=arguments[1];this._g=t,this._boundaryDistanceTolerance=n,this._linework=this.extractLinework(t)};Do.prototype.isWithinToleranceOfBoundary=function(t){for(var n=this,r=0;r<this._linework.getNumGeometries();r++)for(var i=n._linework.getGeometryN(r),o=i.getCoordinateSequence(),u=0;u<o.size()-1;u++){o.getCoordinate(u,n._seg.p0),o.getCoordinate(u+1,n._seg.p1);var f=n._seg.distance(t);if(f<=n._boundaryDistanceTolerance)return!0}return!1};Do.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?lt.BOUNDARY:this._ptLocator.locate(t,this._g)};Do.prototype.extractLinework=function(t){var n=new bl;t.apply(n);var r=n.getLinework(),i=xe.toLineStringArray(r);return t.getFactory().createMultiLineString(i)};Do.prototype.interfaces_=function(){return[]};Do.prototype.getClass=function(){return Do};var bl=function(){this._linework=null,this._linework=new Ft};bl.prototype.getLinework=function(){return this._linework};bl.prototype.filter=function(t){var n=this;if(t instanceof On){var r=t;this._linework.add(r.getExteriorRing());for(var i=0;i<r.getNumInteriorRing();i++)n._linework.add(r.getInteriorRingN(i))}};bl.prototype.interfaces_=function(){return[rs]};bl.prototype.getClass=function(){return bl};var xa=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};xa.prototype.extractPoints=function(t,n,r){for(var i=this,o=t.getCoordinates(),u=0;u<o.length-1;u++)i.computeOffsetPoints(o[u],o[u+1],n,r)};xa.prototype.setSidesToGenerate=function(t,n){this._doLeft=t,this._doRight=n};xa.prototype.getPoints=function(t){for(var n=this,r=new Ft,i=Kn.getLines(this._g),o=i.iterator();o.hasNext();){var u=o.next();n.extractPoints(u,t,r)}return r};xa.prototype.computeOffsetPoints=function(t,n,r,i){var o=n.x-t.x,u=n.y-t.y,f=Math.sqrt(o*o+u*u),d=r*o/f,_=r*u/f,y=(n.x+t.x)/2,E=(n.y+t.y)/2;if(this._doLeft){var S=new it(y-_,E+d);i.add(S)}if(this._doRight){var T=new it(y+_,E-d);i.add(T)}};xa.prototype.interfaces_=function(){return[]};xa.prototype.getClass=function(){return xa};var ui=function e(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=e.TOLERANCE,this._testCoords=new Ft;var t=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=e.computeBoundaryDistanceTolerance(t,n),this._geom=[t,n,r],this._locFinder=[new Do(this._geom[0],this._boundaryDistanceTolerance),new Do(this._geom[1],this._boundaryDistanceTolerance),new Do(this._geom[2],this._boundaryDistanceTolerance)]},Kv={TOLERANCE:{configurable:!0}};ui.prototype.reportResult=function(t,n,r){Yn.out.println("Overlay result invalid - A:"+lt.toLocationSymbol(n[0])+" B:"+lt.toLocationSymbol(n[1])+" expected:"+(r?"i":"e")+" actual:"+lt.toLocationSymbol(n[2]))};ui.prototype.isValid=function(t){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var n=this.checkValid(t);return n};ui.prototype.checkValid=function(){var t=this;if(arguments.length===1){for(var n=arguments[0],r=0;r<this._testCoords.size();r++){var i=t._testCoords.get(r);if(!t.checkValid(n,i))return t._invalidLocation=i,!1}return!0}else if(arguments.length===2){var o=arguments[0],u=arguments[1];return this._location[0]=this._locFinder[0].getLocation(u),this._location[1]=this._locFinder[1].getLocation(u),this._location[2]=this._locFinder[2].getLocation(u),ui.hasLocation(this._location,lt.BOUNDARY)?!0:this.isValidResult(o,this._location)}};ui.prototype.addTestPts=function(t){var n=new xa(t);this._testCoords.addAll(n.getPoints(5*this._boundaryDistanceTolerance))};ui.prototype.isValidResult=function(t,n){var r=pe.isResultOfOp(n[0],n[1],t),i=n[2]===lt.INTERIOR,o=!(r^i);return o||this.reportResult(t,n,r),o};ui.prototype.getInvalidLocation=function(){return this._invalidLocation};ui.prototype.interfaces_=function(){return[]};ui.prototype.getClass=function(){return ui};ui.hasLocation=function(t,n){for(var r=0;r<3;r++)if(t[r]===n)return!0;return!1};ui.computeBoundaryDistanceTolerance=function(t,n){return Math.min(En.computeSizeBasedSnapTolerance(t),En.computeSizeBasedSnapTolerance(n))};ui.isValid=function(t,n,r,i){var o=new ui(t,n,i);return o.isValid(r)};Kv.TOLERANCE.get=function(){return 1e-6};Object.defineProperties(ui,Kv);var ni=function e(t){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=e.extractFactory(t),this._inputGeoms=t};ni.prototype.extractElements=function(t,n){var r=this;if(t===null)return null;for(var i=0;i<t.getNumGeometries();i++){var o=t.getGeometryN(i);r._skipEmpty&&o.isEmpty()||n.add(o)}};ni.prototype.combine=function(){for(var t=this,n=new Ft,r=this._inputGeoms.iterator();r.hasNext();){var i=r.next();t.extractElements(i,n)}return n.size()===0?this._geomFactory!==null?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(n)};ni.prototype.interfaces_=function(){return[]};ni.prototype.getClass=function(){return ni};ni.combine=function(){if(arguments.length===1){var t=arguments[0],n=new ni(t);return n.combine()}else if(arguments.length===2){var r=arguments[0],i=arguments[1],o=new ni(ni.createList(r,i));return o.combine()}else if(arguments.length===3){var u=arguments[0],f=arguments[1],d=arguments[2],_=new ni(ni.createList(u,f,d));return _.combine()}};ni.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()};ni.createList=function(){if(arguments.length===2){var t=arguments[0],n=arguments[1],r=new Ft;return r.add(t),r.add(n),r}else if(arguments.length===3){var i=arguments[0],o=arguments[1],u=arguments[2],f=new Ft;return f.add(i),f.add(o),f.add(u),f}};var Mn=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,this._inputPolys===null&&(this._inputPolys=new Ft)},Xv={STRTREE_NODE_CAPACITY:{configurable:!0}};Mn.prototype.reduceToGeometries=function(t){for(var n=this,r=new Ft,i=t.iterator();i.hasNext();){var o=i.next(),u=null;se(o,Ii)?u=n.unionTree(o):o instanceof ie&&(u=o),r.add(u)}return r};Mn.prototype.extractByEnvelope=function(t,n,r){for(var i=new Ft,o=0;o<n.getNumGeometries();o++){var u=n.getGeometryN(o);u.getEnvelopeInternal().intersects(t)?i.add(u):r.add(u)}return this._geomFactory.buildGeometry(i)};Mn.prototype.unionOptimized=function(t,n){var r=t.getEnvelopeInternal(),i=n.getEnvelopeInternal();if(!r.intersects(i)){var o=ni.combine(t,n);return o}if(t.getNumGeometries()<=1&&n.getNumGeometries()<=1)return this.unionActual(t,n);var u=r.intersection(i);return this.unionUsingEnvelopeIntersection(t,n,u)};Mn.prototype.union=function(){if(this._inputPolys===null)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new Dv(Mn.STRTREE_NODE_CAPACITY),n=this._inputPolys.iterator();n.hasNext();){var r=n.next();t.insert(r.getEnvelopeInternal(),r)}this._inputPolys=null;var i=t.itemsTree(),o=this.unionTree(i);return o};Mn.prototype.binaryUnion=function(){if(arguments.length===1){var t=arguments[0];return this.binaryUnion(t,0,t.size())}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];if(i-r<=1){var o=Mn.getGeometry(n,r);return this.unionSafe(o,null)}else{if(i-r===2)return this.unionSafe(Mn.getGeometry(n,r),Mn.getGeometry(n,r+1));var u=Math.trunc((i+r)/2),f=this.binaryUnion(n,r,u),d=this.binaryUnion(n,u,i);return this.unionSafe(f,d)}}};Mn.prototype.repeatedUnion=function(t){for(var n=null,r=t.iterator();r.hasNext();){var i=r.next();n===null?n=i.copy():n=n.union(i)}return n};Mn.prototype.unionSafe=function(t,n){return t===null&&n===null?null:t===null?n.copy():n===null?t.copy():this.unionOptimized(t,n)};Mn.prototype.unionActual=function(t,n){return Mn.restrictToPolygons(t.union(n))};Mn.prototype.unionTree=function(t){var n=this.reduceToGeometries(t),r=this.binaryUnion(n);return r};Mn.prototype.unionUsingEnvelopeIntersection=function(t,n,r){var i=new Ft,o=this.extractByEnvelope(r,t,i),u=this.extractByEnvelope(r,n,i),f=this.unionActual(o,u);i.add(f);var d=ni.combine(i);return d};Mn.prototype.bufferUnion=function(){if(arguments.length===1){var t=arguments[0],n=t.get(0).getFactory(),r=n.buildGeometry(t),i=r.buffer(0);return i}else if(arguments.length===2){var o=arguments[0],u=arguments[1],f=o.getFactory(),d=f.createGeometryCollection([o,u]),_=d.buffer(0);return _}};Mn.prototype.interfaces_=function(){return[]};Mn.prototype.getClass=function(){return Mn};Mn.restrictToPolygons=function(t){if(se(t,No))return t;var n=no.getPolygons(t);return n.size()===1?n.get(0):t.getFactory().createMultiPolygon(xe.toPolygonArray(n))};Mn.getGeometry=function(t,n){return n>=t.size()?null:t.get(n)};Mn.union=function(t){var n=new Mn(t);return n.union()};Xv.STRTREE_NODE_CAPACITY.get=function(){return 4};Object.defineProperties(Mn,Xv);var Xf=function(){};Xf.prototype.interfaces_=function(){return[]};Xf.prototype.getClass=function(){return Xf};Xf.union=function(t,n){if(t.isEmpty()||n.isEmpty()){if(t.isEmpty()&&n.isEmpty())return pe.createEmptyResult(pe.UNION,t,n,t.getFactory());if(t.isEmpty())return n.copy();if(n.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(n),Er.overlayOp(t,n,pe.UNION)};function Ma(){return new Wf}function Wf(){this.reset()}Wf.prototype={constructor:Wf,reset:function(){this.s=this.t=0},add:function(e){J_(of,e,this.t),J_(this,of.s,this.s),this.s?this.t+=of.t:this.s=of.t},valueOf:function(){return this.s}};var of=new Wf;function J_(e,t,n){var r=e.s=t+n,i=r-t,o=r-i;e.t=t-o+(n-i)}var wn=1e-6,Ye=Math.PI,to=Ye/2,$_=Ye/4,co=Ye*2,ra=180/Ye,Wi=Ye/180,mr=Math.abs,q4=Math.atan,wl=Math.atan2,kn=Math.cos,Dn=Math.sin,Nl=Math.sqrt;function Wv(e){return e>1?0:e<-1?Ye:Math.acos(e)}function fu(e){return e>1?to:e<-1?-to:Math.asin(e)}function xc(){}function Yf(e,t){e&&t0.hasOwnProperty(e.type)&&t0[e.type](e,t)}var Q_={Feature:function(e,t){Yf(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Yf(n[r].geometry,t)}},t0={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){xg(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)xg(n[r],t,0)},Polygon:function(e,t){e0(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e0(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Yf(n[r],t)}};function xg(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function e0(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)xg(e[n],t,1);t.polygonEnd()}function H4(e,t){e&&Q_.hasOwnProperty(e.type)?Q_[e.type](e,t):Yf(e,t)}Ma();Ma();function bg(e){return[wl(e[1],e[0]),fu(e[2])]}function Sl(e){var t=e[0],n=e[1],r=kn(n);return[r*kn(t),r*Dn(t),Dn(n)]}function af(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Jf(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Yd(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function uf(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function wg(e){var t=Nl(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}Ma();function Yv(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function Sg(e,t){return[e>Ye?e-co:e<-Ye?e+co:e,t]}Sg.invert=Sg;function Z4(e,t,n){return(e%=co)?t||n?Yv(r0(e),i0(t,n)):r0(e):t||n?i0(t,n):Sg}function n0(e){return function(t,n){return t+=e,[t>Ye?t-co:t<-Ye?t+co:t,n]}}function r0(e){var t=n0(e);return t.invert=n0(-e),t}function i0(e,t){var n=kn(e),r=Dn(e),i=kn(t),o=Dn(t);function u(f,d){var _=kn(d),y=kn(f)*_,E=Dn(f)*_,S=Dn(d),T=S*n+y*r;return[wl(E*i-T*o,y*n-S*r),fu(T*i+E*o)]}return u.invert=function(f,d){var _=kn(d),y=kn(f)*_,E=Dn(f)*_,S=Dn(d),T=S*i-E*o;return[wl(E*i+S*o,y*n+T*r),fu(T*n-y*r)]},u}function K4(e,t,n,r,i,o){if(n){var u=kn(t),f=Dn(t),d=r*n;i==null?(i=t+r*co,o=t-d/2):(i=s0(u,i),o=s0(u,o),(r>0?i<o:i>o)&&(i+=r*co));for(var _,y=i;r>0?y>o:y<o;y-=d)_=bg([u,-f*kn(y),-f*Dn(y)]),e.point(_[0],_[1])}}function s0(e,t){t=Sl(t),t[0]-=e,wg(t);var n=Wv(-t[1]);return((-t[2]<0?-n:n)+co-wn)%co}function Jv(){var e=[],t;return{point:function(n,r){t.push([n,r])},lineStart:function(){e.push(t=[])},lineEnd:xc,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function X4(e,t,n,r,i,o){var u=e[0],f=e[1],d=t[0],_=t[1],y=0,E=1,S=d-u,T=_-f,I;if(I=n-u,!(!S&&I>0)){if(I/=S,S<0){if(I<y)return;I<E&&(E=I)}else if(S>0){if(I>E)return;I>y&&(y=I)}if(I=i-u,!(!S&&I<0)){if(I/=S,S<0){if(I>E)return;I>y&&(y=I)}else if(S>0){if(I<y)return;I<E&&(E=I)}if(I=r-f,!(!T&&I>0)){if(I/=T,T<0){if(I<y)return;I<E&&(E=I)}else if(T>0){if(I>E)return;I>y&&(y=I)}if(I=o-f,!(!T&&I<0)){if(I/=T,T<0){if(I>E)return;I>y&&(y=I)}else if(T>0){if(I<y)return;I<E&&(E=I)}return y>0&&(e[0]=u+y*S,e[1]=f+y*T),E<1&&(t[0]=u+E*S,t[1]=f+E*T),!0}}}}}function wf(e,t){return mr(e[0]-t[0])<wn&&mr(e[1]-t[1])<wn}function lf(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function $v(e,t,n,r,i){var o=[],u=[],f,d;if(e.forEach(function(I){if(!((z=I.length-1)<=0)){var z,G=I[0],W=I[z],Q;if(wf(G,W)){for(i.lineStart(),f=0;f<z;++f)i.point((G=I[f])[0],G[1]);i.lineEnd();return}o.push(Q=new lf(G,I,null,!0)),u.push(Q.o=new lf(G,null,Q,!1)),o.push(Q=new lf(W,I,null,!1)),u.push(Q.o=new lf(W,null,Q,!0))}}),!!o.length){for(u.sort(t),o0(o),o0(u),f=0,d=u.length;f<d;++f)u[f].e=n=!n;for(var _=o[0],y,E;;){for(var S=_,T=!0;S.v;)if((S=S.n)===_)return;y=S.z,i.lineStart();do{if(S.v=S.o.v=!0,S.e){if(T)for(f=0,d=y.length;f<d;++f)i.point((E=y[f])[0],E[1]);else r(S.x,S.n.x,1,i);S=S.n}else{if(T)for(y=S.p.z,f=y.length-1;f>=0;--f)i.point((E=y[f])[0],E[1]);else r(S.x,S.p.x,-1,i);S=S.p}S=S.o,y=S.z,T=!T}while(!S.v);i.lineEnd()}}}function o0(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function Qv(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function W4(e){return e.length===1&&(e=Y4(e)),{left:function(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}}function Y4(e){return function(t,n){return Qv(e(t),n)}}W4(Qv);function tC(e){for(var t=e.length,n,r=-1,i=0,o,u;++r<t;)i+=e[r].length;for(o=new Array(i);--t>=0;)for(u=e[t],n=u.length;--n>=0;)o[--i]=u[n];return o}var cf=1e9,hf=-1e9;function J4(e,t,n,r){function i(_,y){return e<=_&&_<=n&&t<=y&&y<=r}function o(_,y,E,S){var T=0,I=0;if(_==null||(T=u(_,E))!==(I=u(y,E))||d(_,y)<0^E>0)do S.point(T===0||T===3?e:n,T>1?r:t);while((T=(T+E+4)%4)!==I);else S.point(y[0],y[1])}function u(_,y){return mr(_[0]-e)<wn?y>0?0:3:mr(_[0]-n)<wn?y>0?2:1:mr(_[1]-t)<wn?y>0?1:0:y>0?3:2}function f(_,y){return d(_.x,y.x)}function d(_,y){var E=u(_,1),S=u(y,1);return E!==S?E-S:E===0?y[1]-_[1]:E===1?_[0]-y[0]:E===2?_[1]-y[1]:y[0]-_[0]}return function(_){var y=_,E=Jv(),S,T,I,z,G,W,Q,rt,gt,xt,bt,Dt={point:Nt,lineStart:ee,lineEnd:Ae,polygonStart:te,polygonEnd:Ht};function Nt(le,jt){i(le,jt)&&y.point(le,jt)}function Ot(){for(var le=0,jt=0,Zt=T.length;jt<Zt;++jt)for(var Rt=T[jt],tn=1,Wt=Rt.length,de=Rt[0],Pe,Ue,Oe=de[0],ve=de[1];tn<Wt;++tn)Pe=Oe,Ue=ve,de=Rt[tn],Oe=de[0],ve=de[1],Ue<=r?ve>r&&(Oe-Pe)*(r-Ue)>(ve-Ue)*(e-Pe)&&++le:ve<=r&&(Oe-Pe)*(r-Ue)<(ve-Ue)*(e-Pe)&&--le;return le}function te(){y=E,S=[],T=[],bt=!0}function Ht(){var le=Ot(),jt=bt&&le,Zt=(S=tC(S)).length;(jt||Zt)&&(_.polygonStart(),jt&&(_.lineStart(),o(null,null,1,_),_.lineEnd()),Zt&&$v(S,f,le,o,_),_.polygonEnd()),y=_,S=T=I=null}function ee(){Dt.point=Bt,T&&T.push(I=[]),xt=!0,gt=!1,Q=rt=NaN}function Ae(){S&&(Bt(z,G),W&&gt&&E.rejoin(),S.push(E.result())),Dt.point=Nt,gt&&y.lineEnd()}function Bt(le,jt){var Zt=i(le,jt);if(T&&I.push([le,jt]),xt)z=le,G=jt,W=Zt,xt=!1,Zt&&(y.lineStart(),y.point(le,jt));else if(Zt&&gt)y.point(le,jt);else{var Rt=[Q=Math.max(hf,Math.min(cf,Q)),rt=Math.max(hf,Math.min(cf,rt))],tn=[le=Math.max(hf,Math.min(cf,le)),jt=Math.max(hf,Math.min(cf,jt))];X4(Rt,tn,e,t,n,r)?(gt||(y.lineStart(),y.point(Rt[0],Rt[1])),y.point(tn[0],tn[1]),Zt||y.lineEnd(),bt=!1):Zt&&(y.lineStart(),y.point(le,jt),bt=!1)}Q=le,rt=jt,gt=Zt}return Dt}}var Jd=Ma();function $4(e,t){var n=t[0],r=t[1],i=[Dn(n),-kn(n),0],o=0,u=0;Jd.reset();for(var f=0,d=e.length;f<d;++f)if(y=(_=e[f]).length)for(var _,y,E=_[y-1],S=E[0],T=E[1]/2+$_,I=Dn(T),z=kn(T),G=0;G<y;++G,S=Q,I=gt,z=xt,E=W){var W=_[G],Q=W[0],rt=W[1]/2+$_,gt=Dn(rt),xt=kn(rt),bt=Q-S,Dt=bt>=0?1:-1,Nt=Dt*bt,Ot=Nt>Ye,te=I*gt;if(Jd.add(wl(te*Dt*Dn(Nt),z*xt+te*kn(Nt))),o+=Ot?bt+Dt*co:bt,Ot^S>=n^Q>=n){var Ht=Jf(Sl(E),Sl(W));wg(Ht);var ee=Jf(i,Ht);wg(ee);var Ae=(Ot^bt>=0?-1:1)*fu(ee[2]);(r>Ae||r===Ae&&(Ht[0]||Ht[1]))&&(u+=Ot^bt>=0?1:-1)}}return(o<-1e-6||o<wn&&Jd<-1e-6)^u&1}Ma();function a0(e){return e}Ma();Ma();var Ml=1/0,$f=Ml,eh=-Ml,Qf=eh,u0={point:Q4,lineStart:xc,lineEnd:xc,polygonStart:xc,polygonEnd:xc,result:function(){var e=[[Ml,$f],[eh,Qf]];return eh=Qf=-($f=Ml=1/0),e}};function Q4(e,t){e<Ml&&(Ml=e),e>eh&&(eh=e),t<$f&&($f=t),t>Qf&&(Qf=t)}Ma();function eC(e,t,n,r){return function(i,o){var u=t(o),f=i.invert(r[0],r[1]),d=Jv(),_=t(d),y=!1,E,S,T,I={point:z,lineStart:W,lineEnd:Q,polygonStart:function(){I.point=rt,I.lineStart=gt,I.lineEnd=xt,S=[],E=[]},polygonEnd:function(){I.point=z,I.lineStart=W,I.lineEnd=Q,S=tC(S);var bt=$4(E,f);S.length?(y||(o.polygonStart(),y=!0),$v(S,eS,bt,n,o)):bt&&(y||(o.polygonStart(),y=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),y&&(o.polygonEnd(),y=!1),S=E=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function z(bt,Dt){var Nt=i(bt,Dt);e(bt=Nt[0],Dt=Nt[1])&&o.point(bt,Dt)}function G(bt,Dt){var Nt=i(bt,Dt);u.point(Nt[0],Nt[1])}function W(){I.point=G,u.lineStart()}function Q(){I.point=z,u.lineEnd()}function rt(bt,Dt){T.push([bt,Dt]);var Nt=i(bt,Dt);_.point(Nt[0],Nt[1])}function gt(){_.lineStart(),T=[]}function xt(){rt(T[0][0],T[0][1]),_.lineEnd();var bt=_.clean(),Dt=d.result(),Nt,Ot=Dt.length,te,Ht,ee;if(T.pop(),E.push(T),T=null,!!Ot){if(bt&1){if(Ht=Dt[0],(te=Ht.length-1)>0){for(y||(o.polygonStart(),y=!0),o.lineStart(),Nt=0;Nt<te;++Nt)o.point((ee=Ht[Nt])[0],ee[1]);o.lineEnd()}return}Ot>1&&bt&2&&Dt.push(Dt.pop().concat(Dt.shift())),S.push(Dt.filter(tS))}}return I}}function tS(e){return e.length>1}function eS(e,t){return((e=e.x)[0]<0?e[1]-to-wn:to-e[1])-((t=t.x)[0]<0?t[1]-to-wn:to-t[1])}const l0=eC(function(){return!0},nS,iS,[-Ye,-to]);function nS(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,u){var f=o>0?Ye:-Ye,d=mr(o-t);mr(d-Ye)<wn?(e.point(t,n=(n+u)/2>0?to:-to),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(f,n),e.point(o,n),i=0):r!==f&&d>=Ye&&(mr(t-r)<wn&&(t-=r*wn),mr(o-f)<wn&&(o-=f*wn),n=rS(t,n,o,u),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(f,n),i=0),e.point(t=o,n=u),r=f},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function rS(e,t,n,r){var i,o,u=Dn(e-n);return mr(u)>wn?q4((Dn(t)*(o=kn(r))*Dn(n)-Dn(r)*(i=kn(t))*Dn(e))/(i*o*u)):(t+r)/2}function iS(e,t,n,r){var i;if(e==null)i=n*to,r.point(-Ye,i),r.point(0,i),r.point(Ye,i),r.point(Ye,0),r.point(Ye,-i),r.point(0,-i),r.point(-Ye,-i),r.point(-Ye,0),r.point(-Ye,i);else if(mr(e[0]-t[0])>wn){var o=e[0]<t[0]?Ye:-Ye;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function sS(e,t){var n=kn(e),r=n>0,i=mr(n)>wn;function o(y,E,S,T){K4(T,e,t,S,y,E)}function u(y,E){return kn(y)*kn(E)>n}function f(y){var E,S,T,I,z;return{lineStart:function(){I=T=!1,z=1},point:function(G,W){var Q=[G,W],rt,gt=u(G,W),xt=r?gt?0:_(G,W):gt?_(G+(G<0?Ye:-Ye),W):0;if(!E&&(I=T=gt)&&y.lineStart(),gt!==T&&(rt=d(E,Q),(!rt||wf(E,rt)||wf(Q,rt))&&(Q[0]+=wn,Q[1]+=wn,gt=u(Q[0],Q[1]))),gt!==T)z=0,gt?(y.lineStart(),rt=d(Q,E),y.point(rt[0],rt[1])):(rt=d(E,Q),y.point(rt[0],rt[1]),y.lineEnd()),E=rt;else if(i&&E&&r^gt){var bt;!(xt&S)&&(bt=d(Q,E,!0))&&(z=0,r?(y.lineStart(),y.point(bt[0][0],bt[0][1]),y.point(bt[1][0],bt[1][1]),y.lineEnd()):(y.point(bt[1][0],bt[1][1]),y.lineEnd(),y.lineStart(),y.point(bt[0][0],bt[0][1])))}gt&&(!E||!wf(E,Q))&&y.point(Q[0],Q[1]),E=Q,T=gt,S=xt},lineEnd:function(){T&&y.lineEnd(),E=null},clean:function(){return z|(I&&T)<<1}}}function d(y,E,S){var T=Sl(y),I=Sl(E),z=[1,0,0],G=Jf(T,I),W=af(G,G),Q=G[0],rt=W-Q*Q;if(!rt)return!S&&y;var gt=n*W/rt,xt=-n*Q/rt,bt=Jf(z,G),Dt=uf(z,gt),Nt=uf(G,xt);Yd(Dt,Nt);var Ot=bt,te=af(Dt,Ot),Ht=af(Ot,Ot),ee=te*te-Ht*(af(Dt,Dt)-1);if(!(ee<0)){var Ae=Nl(ee),Bt=uf(Ot,(-te-Ae)/Ht);if(Yd(Bt,Dt),Bt=bg(Bt),!S)return Bt;var le=y[0],jt=E[0],Zt=y[1],Rt=E[1],tn;jt<le&&(tn=le,le=jt,jt=tn);var Wt=jt-le,de=mr(Wt-Ye)<wn,Pe=de||Wt<wn;if(!de&&Rt<Zt&&(tn=Zt,Zt=Rt,Rt=tn),Pe?de?Zt+Rt>0^Bt[1]<(mr(Bt[0]-le)<wn?Zt:Rt):Zt<=Bt[1]&&Bt[1]<=Rt:Wt>Ye^(le<=Bt[0]&&Bt[0]<=jt)){var Ue=uf(Ot,(-te+Ae)/Ht);return Yd(Ue,Dt),[Bt,bg(Ue)]}}}function _(y,E){var S=r?e:Ye-e,T=0;return y<-S?T|=1:y>S&&(T|=2),E<-S?T|=4:E>S&&(T|=8),T}return eC(u,f,o,r?[0,-e]:[-Ye,e-Ye])}function nC(e){return function(t){var n=new Mg;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Mg(){}Mg.prototype={constructor:Mg,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function rC(e,t,n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),o!=null&&e.clipExtent(null),H4(n,e.stream(u0));var u=u0.result(),f=Math.min(r/(u[1][0]-u[0][0]),i/(u[1][1]-u[0][1])),d=+t[0][0]+(r-f*(u[1][0]+u[0][0]))/2,_=+t[0][1]+(i-f*(u[1][1]+u[0][1]))/2;return o!=null&&e.clipExtent(o),e.scale(f*150).translate([d,_])}function oS(e,t,n){return rC(e,[[0,0],t],n)}var c0=16,aS=kn(30*Wi);function h0(e,t){return+t?lS(e,t):uS(e)}function uS(e){return nC({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function lS(e,t){function n(r,i,o,u,f,d,_,y,E,S,T,I,z,G){var W=_-r,Q=y-i,rt=W*W+Q*Q;if(rt>4*t&&z--){var gt=u+S,xt=f+T,bt=d+I,Dt=Nl(gt*gt+xt*xt+bt*bt),Nt=fu(bt/=Dt),Ot=mr(mr(bt)-1)<wn||mr(o-E)<wn?(o+E)/2:wl(xt,gt),te=e(Ot,Nt),Ht=te[0],ee=te[1],Ae=Ht-r,Bt=ee-i,le=Q*Ae-W*Bt;(le*le/rt>t||mr((W*Ae+Q*Bt)/rt-.5)>.3||u*S+f*T+d*I<aS)&&(n(r,i,o,u,f,d,Ht,ee,Ot,gt/=Dt,xt/=Dt,bt,z,G),G.point(Ht,ee),n(Ht,ee,Ot,gt,xt,bt,_,y,E,S,T,I,z,G))}}return function(r){var i,o,u,f,d,_,y,E,S,T,I,z,G={point:W,lineStart:Q,lineEnd:gt,polygonStart:function(){r.polygonStart(),G.lineStart=xt},polygonEnd:function(){r.polygonEnd(),G.lineStart=Q}};function W(Nt,Ot){Nt=e(Nt,Ot),r.point(Nt[0],Nt[1])}function Q(){E=NaN,G.point=rt,r.lineStart()}function rt(Nt,Ot){var te=Sl([Nt,Ot]),Ht=e(Nt,Ot);n(E,S,y,T,I,z,E=Ht[0],S=Ht[1],y=Nt,T=te[0],I=te[1],z=te[2],c0,r),r.point(E,S)}function gt(){G.point=W,r.lineEnd()}function xt(){Q(),G.point=bt,G.lineEnd=Dt}function bt(Nt,Ot){rt(i=Nt,Ot),o=E,u=S,f=T,d=I,_=z,G.point=rt}function Dt(){n(E,S,y,T,I,z,o,u,i,f,d,_,c0,r),G.lineEnd=gt,gt()}return G}}var cS=nC({point:function(e,t){this.stream.point(e*Wi,t*Wi)}});function hS(e){return fS(function(){return e})()}function fS(e){var t,n=150,r=480,i=250,o,u,f=0,d=0,_=0,y=0,E=0,S,T,I=null,z=l0,G=null,W,Q,rt,gt=a0,xt=.5,bt=h0(Ht,xt),Dt,Nt;function Ot(Bt){return Bt=T(Bt[0]*Wi,Bt[1]*Wi),[Bt[0]*n+o,u-Bt[1]*n]}function te(Bt){return Bt=T.invert((Bt[0]-o)/n,(u-Bt[1])/n),Bt&&[Bt[0]*ra,Bt[1]*ra]}function Ht(Bt,le){return Bt=t(Bt,le),[Bt[0]*n+o,u-Bt[1]*n]}Ot.stream=function(Bt){return Dt&&Nt===Bt?Dt:Dt=cS(z(S,bt(gt(Nt=Bt))))},Ot.clipAngle=function(Bt){return arguments.length?(z=+Bt?sS(I=Bt*Wi,6*Wi):(I=null,l0),Ae()):I*ra},Ot.clipExtent=function(Bt){return arguments.length?(gt=Bt==null?(G=W=Q=rt=null,a0):J4(G=+Bt[0][0],W=+Bt[0][1],Q=+Bt[1][0],rt=+Bt[1][1]),Ae()):G==null?null:[[G,W],[Q,rt]]},Ot.scale=function(Bt){return arguments.length?(n=+Bt,ee()):n},Ot.translate=function(Bt){return arguments.length?(r=+Bt[0],i=+Bt[1],ee()):[r,i]},Ot.center=function(Bt){return arguments.length?(f=Bt[0]%360*Wi,d=Bt[1]%360*Wi,ee()):[f*ra,d*ra]},Ot.rotate=function(Bt){return arguments.length?(_=Bt[0]%360*Wi,y=Bt[1]%360*Wi,E=Bt.length>2?Bt[2]%360*Wi:0,ee()):[_*ra,y*ra,E*ra]},Ot.precision=function(Bt){return arguments.length?(bt=h0(Ht,xt=Bt*Bt),Ae()):Nl(xt)},Ot.fitExtent=function(Bt,le){return rC(Ot,Bt,le)},Ot.fitSize=function(Bt,le){return oS(Ot,Bt,le)};function ee(){T=Yv(S=Z4(_,y,E),t);var Bt=t(f,d);return o=r-Bt[0]*n,u=i+Bt[1]*n,Ae()}function Ae(){return Dt=Nt=null,Ot}return function(){return t=e.apply(this,arguments),Ot.invert=t.invert&&te,ee()}}function iC(e){return function(t,n){var r=kn(t),i=kn(n),o=e(r*i);return[o*i*Dn(t),o*Dn(n)]}}function sC(e){return function(t,n){var r=Nl(t*t+n*n),i=e(r),o=Dn(i),u=kn(i);return[wl(t*o,r*u),fu(r&&n*o/r)]}}var pS=iC(function(e){return Nl(2/(1+e))});pS.invert=sC(function(e){return 2*fu(e/2)});var oC=iC(function(e){return(e=Wv(e))&&e/Dn(e)});oC.invert=sC(function(e){return e});function dS(){return hS(oC).scale(79.4188).clipAngle(180-.001)}function f0(e,t){return[e,t]}f0.invert=f0;function p0(e,t,n){n=n||{};var r=n.units||"kilometers",i=n.steps||8;if(!e)throw new Error("geojson is required");if(typeof n!="object")throw new Error("options must be an object");if(typeof i!="number")throw new Error("steps must be an number");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(e.type){case"GeometryCollection":return Ep(e,function(u){var f=Sf(u,t,r,i);f&&o.push(f)}),Vf(o);case"FeatureCollection":return V_(e,function(u){var f=Sf(u,t,r,i);f&&V_(f,function(d){d&&o.push(d)})}),Vf(o)}return Sf(e,t,r,i)}function Sf(e,t,n,r){var i=e.properties||{},o=e.type==="Feature"?e.geometry:e;if(o.type==="GeometryCollection"){var u=[];return Ep(e,function(z){var G=Sf(z,t,n,r);G&&u.push(G)}),Vf(u)}var f=gS(o),d={type:o.type,coordinates:uC(o.coordinates,f)},_=new om,y=_.read(d),E=Cv(m4(t,n),"meters"),S=Xn.bufferOp(y,E,r),T=new Av;if(S=T.write(S),!aC(S.coordinates)){var I={type:S.type,coordinates:lC(S.coordinates,f)};return Qa(I,i)}}function aC(e){return Array.isArray(e[0])?aC(e[0]):isNaN(e[0])}function uC(e,t){return typeof e[0]!="object"?t(e):e.map(function(n){return uC(n,t)})}function lC(e,t){return typeof e[0]!="object"?t.invert(e):e.map(function(n){return lC(n,t)})}function gS(e){var t=L4(e).geometry.coordinates,n=[-t[0],-t[1]];return dS().rotate(n).scale(Qr)}const mS={class:"elevation-profile"},_S=["width","height","viewBox"],yS={class:"grid"},vS=["x2","y1","y2"],CS=["x1","x2","y2"],ES=["d"],LS=["cx","cy","onMouseenter"],xS={class:"axes"},bS=["y2"],wS=["y"],SS=["y1","x2","y2"],MS=["x","y"],PS={class:"font-medium"},Ks=20,$d=40,IS=du({__name:"ElevationProfile",props:{points:{type:Array,required:!0},minElevation:{type:Number,required:!0},maxElevation:{type:Number,required:!0},width:{type:Number,default:400},height:{type:Number,default:200},units:{type:String,default:"metric"}},setup(e){const t=e,n=zn({show:!1,x:0,y:0,pointIndex:0,distance:0,elevation:0}),r=mn(()=>{const I=t.points[t.points.length-1].distance;return(t.width-$d-Ks)/I}),i=mn(()=>{const I=t.maxElevation-t.minElevation;return(t.height-2*Ks)/I}),o=mn(()=>t.points.map(I=>({x:I.distance*r.value+$d,y:t.height-Ks-(I.elevation-t.minElevation)*i.value}))),u=mn(()=>o.value.reduce((I,z,G)=>I+(G===0?"M":"L")+z.x+","+z.y,"")),f=mn(()=>{const z=Math.ceil((t.maxElevation-t.minElevation)/4),G=[];for(let W=0;W<5;W++){const Q=Math.min(t.minElevation+W*z,t.maxElevation);G.push({value:Q,y:t.height-Ks-(Q-t.minElevation)*i.value})}return G}),d=mn(()=>{const I=t.points[t.points.length-1].distance,z=4,G=Math.ceil(I/z),W=[];for(let Q=0;Q<=z;Q++){const rt=Q*G;rt<=I&&W.push({value:rt,x:rt*r.value+$d})}return W});function _(I,z){const G=z.target.getBoundingClientRect();n.value={show:!0,x:G.left+window.scrollX,y:G.top+window.scrollY,pointIndex:t.points.findIndex(W=>W===I.original),distance:I.original.distance,elevation:I.original.elevation}}function y(){n.value.show=!1}const E=mn(()=>({left:`${n.value.x}px`,top:`${n.value.y-70}px`}));function S(I){return t.units==="imperial"?`${(I*3.28084).toFixed(1)} ft`:`${I.toFixed(1)} m`}function T(I){return t.units==="imperial"?`${(I*3.28084).toFixed(1)} ft`:`${I.toFixed(1)} m`}return(I,z)=>(Ee(),Ie("div",mS,[(Ee(),Ie("svg",{width:e.width,height:e.height,viewBox:`0 0 ${e.width} ${e.height}`,class:"w-full h-full"},[vt("g",yS,[(Ee(!0),Ie(sn,null,vs(I.gridLines,G=>(Ee(),Ie("line",{key:"h"+G,x1:"0",x2:e.width,y1:G,y2:G,class:"stroke-gray-200","stroke-dasharray":"4,4"},null,8,vS))),128)),(Ee(),Ie(sn,null,vs(5,G=>vt("line",{key:"v"+G,x1:e.width/4*(G-1),x2:e.width/4*(G-1),y1:"0",y2:e.height,class:"stroke-gray-200","stroke-dasharray":"4,4"},null,8,CS)),64))]),vt("path",{d:u.value,fill:"none",class:"stroke-primary-500","stroke-width":"2"},null,8,ES),(Ee(!0),Ie(sn,null,vs(o.value,(G,W)=>(Ee(),Ie("g",{key:W},[vt("circle",{cx:G.x,cy:G.y,r:"3",class:"fill-primary-500",onMouseenter:Q=>_(G,Q),onMouseleave:y},null,40,LS)]))),128)),vt("g",xS,[vt("line",{x1:"0",y1:Ks,x2:"0",y2:e.height-Ks,stroke:"#666","stroke-width":"1"},null,8,bS),(Ee(!0),Ie(sn,null,vs(f.value,G=>(Ee(),Ie("text",{key:G.value,x:"-5",y:G.y,class:"text-xs fill-gray-500","text-anchor":"end","alignment-baseline":"middle"},_e(G.value)+"m ",9,wS))),128)),vt("line",{x1:"padding",y1:e.height-Ks,x2:e.width-Ks,y2:e.height-Ks,stroke:"#666","stroke-width":"1"},null,8,SS),(Ee(!0),Ie(sn,null,vs(d.value,G=>(Ee(),Ie("text",{key:G.value,x:G.x,y:e.height-Ks+15,class:"text-xs fill-gray-500","text-anchor":"middle"},_e(S(G.value)),9,MS))),128))])],8,_S)),n.value.show?(Ee(),Ie("div",{key:0,class:"absolute bg-white shadow-lg rounded-md p-2 text-sm pointer-events-none",style:rl(E.value)},[vt("p",PS,"Point "+_e(n.value.pointIndex+1),1),vt("p",null,"Distance : "+_e(S(n.value.distance)),1),vt("p",null,"Élévation : "+_e(T(n.value.elevation)),1)],4)):Zn("",!0)]))}}),TS=Yg(IS,[["__scopeId","data-v-3232e264"]]),AS={key:0,class:"shape-info-panel"},kS={class:"title"},DS={class:"info-content"},NS={class:"info-item"},OS={class:"value"},RS={class:"info-item"},BS={class:"value"},FS={class:"info-item"},zS={class:"value"},GS={class:"info-item"},US={class:"value"},VS={class:"info-item"},jS={class:"value"},qS={class:"info-item"},HS={class:"value"},ZS={class:"info-item"},KS={class:"value"},XS={class:"info-item"},WS={class:"value"},YS={class:"info-item"},JS={class:"value"},$S={class:"info-item"},QS={class:"value"},tM={class:"info-item"},eM={class:"value"},nM={key:0,class:"mt-4"},rM={key:2,class:"surface-section"},iM={class:"info-item"},sM={class:"value"},oM={class:"info-item"},aM={class:"value"},uM={class:"info-item"},lM={class:"value"},cM=du({__name:"ShapeInfo",props:{shape:{type:Object,default:null},units:{type:String,default:"metric"}},emits:["close","edit","delete"],setup(e,{emit:t}){const n=e,r=t;mn(()=>(console.log("Shape data:",n.shape),n.shape&&n.shape.type&&n.shape.properties&&(n.shape.properties.dimensions&&Object.keys(n.shape.properties.dimensions).length>0||n.shape.properties.length||n.shape.properties.surfaceInterieure)));function i(d){return{rectangle:"Rectangle",cercle:"Cercle","demi-cercle":"Demi-cercle",ligne:"Ligne"}[d.toLowerCase()]||"Forme"}function o(d){return!d&&d!==0?"0 m":`${d.toFixed(2)} m`}function u(d){return!d&&d!==0?"0 m²":`${d.toFixed(2)} m²`}function f(d){return!d&&d!==0?"0 %":`${d.toFixed(1)} %`}return(d,_)=>{var y,E,S,T,I,z,G,W,Q,rt;return e.shape?(Ee(),Ie("div",AS,[vt("h3",kS,[Tc(_e(i(e.shape.type))+" ",1),vt("button",{class:"close-button",onClick:_[0]||(_[0]=gt=>r("close"))},"X")]),vt("div",DS,[(y=e.shape.properties)!=null&&y.dimensions?(Ee(),Ie(sn,{key:0},[((E=e.shape.type)==null?void 0:E.toLowerCase())==="rectangle"?(Ee(),Ie(sn,{key:0},[vt("div",NS,[_[1]||(_[1]=vt("span",{class:"label"},"Largeur:",-1)),vt("span",OS,_e(o(e.shape.properties.dimensions.width)),1)]),vt("div",RS,[_[2]||(_[2]=vt("span",{class:"label"},"Longueur:",-1)),vt("span",BS,_e(o(e.shape.properties.dimensions.height)),1)])],64)):Zn("",!0),((S=e.shape.type)==null?void 0:S.toLowerCase())==="cercle"?(Ee(),Ie(sn,{key:1},[vt("div",FS,[_[3]||(_[3]=vt("span",{class:"label"},"Rayon:",-1)),vt("span",zS,_e(o(e.shape.properties.dimensions.radius)),1)]),vt("div",GS,[_[4]||(_[4]=vt("span",{class:"label"},"Diamètre:",-1)),vt("span",US,_e(o(e.shape.properties.dimensions.diameter)),1)])],64)):Zn("",!0),((T=e.shape.type)==null?void 0:T.toLowerCase())==="demi-cercle"?(Ee(),Ie(sn,{key:2},[vt("div",VS,[_[5]||(_[5]=vt("span",{class:"label"},"Rayon:",-1)),vt("span",jS,_e(o(e.shape.properties.dimensions.radius)),1)]),vt("div",qS,[_[6]||(_[6]=vt("span",{class:"label"},"Orientation:",-1)),vt("span",HS,_e(e.shape.properties.dimensions.orientation)+"°",1)])],64)):Zn("",!0)],64)):Zn("",!0),((I=e.shape.type)==null?void 0:I.toLowerCase())==="line"&&e.shape.properties?(Ee(),Ie(sn,{key:1},[vt("div",ZS,[_[7]||(_[7]=vt("span",{class:"label"},"Longueur totale:",-1)),vt("span",KS,_e(o(e.shape.properties.length)),1)]),vt("div",XS,[_[8]||(_[8]=vt("span",{class:"label"},"Largeur d'influence:",-1)),vt("span",WS,_e(o(((z=e.shape.properties.dimensions)==null?void 0:z.width)||0)),1)]),vt("div",YS,[_[9]||(_[9]=vt("span",{class:"label"},"Zone d'influence:",-1)),vt("span",JS,_e(u(e.shape.properties.surfaceInfluence)),1)]),vt("div",$S,[_[10]||(_[10]=vt("span",{class:"label"},"Dénivelé:",-1)),vt("span",QS,_e(o(((G=e.shape.properties.elevation)==null?void 0:G.difference)||0)),1)]),vt("div",tM,[_[11]||(_[11]=vt("span",{class:"label"},"Pente moyenne:",-1)),vt("span",eM,_e(f(((W=e.shape.properties.elevation)==null?void 0:W.slope)||0)),1)]),(Q=e.shape.properties.elevation)!=null&&Q.profile?(Ee(),Ie("div",nM,[_[12]||(_[12]=vt("h4",{class:"subtitle"},"Profil d'élévation",-1)),pr(TS,{points:e.shape.properties.elevation.profile,"min-elevation":e.shape.properties.elevation.minElevation,"max-elevation":e.shape.properties.elevation.maxElevation,width:250,height:150},null,8,["points","min-elevation","max-elevation"])])):Zn("",!0)],64)):Zn("",!0),(rt=e.shape.properties)!=null&&rt.surfaceInterieure?(Ee(),Ie("div",rM,[vt("div",iM,[_[13]||(_[13]=vt("span",{class:"label"},"Surface intérieure:",-1)),vt("span",sM,_e(u(e.shape.properties.surfaceInterieure)),1)]),vt("div",oM,[_[14]||(_[14]=vt("span",{class:"label"},"Surface extérieure:",-1)),vt("span",aM,_e(u(e.shape.properties.surfaceExterieure)),1)]),vt("div",uM,[_[15]||(_[15]=vt("span",{class:"label"},"Périmètre:",-1)),vt("span",lM,_e(o(e.shape.properties.perimetre)),1)])])):Zn("",!0)])])):Zn("",!0)}}}),hM=Yg(cM,[["__scopeId","data-v-3ef183eb"]]),fM={class:"h-full flex"},pM={class:"flex-1 relative"},dM={class:"w-80 bg-white shadow-lg flex flex-col"},gM={class:"p-4 border-b border-gray-200"},mM={class:"grid grid-cols-2 gap-2"},_M=["onClick"],yM={class:"p-4 border-b border-gray-200"},vM={class:"flex flex-wrap gap-2"},CM=["onClick","title"],EM={class:"relative"},LM={class:"flex items-center justify-between mb-2"},xM={class:"text-sm text-gray-500"},bM={class:"relative"},wM={class:"text-sm text-gray-500 text-right"},SM={class:"flex-1 p-4 overflow-y-auto"},MM={class:"space-y-2"},PM=["onClick"],IM={class:"flex items-center justify-between mb-2"},TM={class:"text-sm font-medium text-gray-700"},AM=["onClick"],kM={class:"space-y-1 text-sm text-gray-600"},DM={key:0},NM={key:0},OM={key:0},RM=du({__name:"MapView",setup(e){const t=[{value:"#3388ff",label:"Bleu"},{value:"#33c9ff",label:"Bleu clair"},{value:"#ff3333",label:"Rouge"},{value:"#ff8033",label:"Orange"},{value:"#33ff33",label:"Vert"},{value:"#ffff33",label:"Jaune"},{value:"#9933ff",label:"Violet"},{value:"#ff33ff",label:"Rose"}],n=zn(null),r=zn(null),i=zn(null);zn("");const o=zn("Rectangle"),u=zn([]),f=c4(),d=zn(null),_=zn(null),y=zn({color:"#3388ff",weight:3,opacity:.8,fillOpacity:.2}),E=zn(!1),S=zn("idle"),T=zn(null),I=zn({color:t[0].value,weight:3,opacity:.8,dashArray:"",radius:10,orientation:0,fixedRadius:!1,lineType:"straight"}),z={position:"topright",drawControls:!1,editControls:!1,cutControls:!1,dragMode:!1,removalMode:!1,drawText:!1,rotateMode:!0,oneBlock:!1,customControls:!1,optionsControls:!1,snappingOption:!0,snapDistance:20,tooltips:!0,rotateControlOptions:{rotateEnabled:!0}},G={OpenStreetMap:Rr.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors"}),Satellite:Rr.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"© Esri"}),Terrain:Rr.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{attribution:"© OpenTopoMap contributors"})};Vg(()=>{n.value&&(r.value=Rr.map(n.value,{layers:[G.Satellite]}).setView([48.8566,2.3522],13),Rr.control.layers(G).addTo(r.value),i.value=new Rr.FeatureGroup,r.value.addLayer(i.value),r.value.pm.addControls(z),r.value.on("pm:create",xt),r.value.on("pm:remove",Nt),r.value.on("pm:edit",Y=>{const $=Y.layer,J=bt($,$.shape||$.options.shape||"unknown");_.value&&$.id===_.value.id&&(_.value={..._.value,properties:J});const zt=u.value.findIndex(F=>F.layer===$);zt!==-1&&(u.value[zt].properties=J)}),window.addEventListener("map-set-location",Y=>{if(r.value&&Y.detail){const{lat:$,lng:J,zoom:zt}=Y.detail;r.value.setView([$,J],zt)}}),f.currentPlan&&Ae())});function W(Y){if(!r.value)return;E.value=!0,S.value="drawing",T.value=Y,r.value.getContainer().classList.add("drawing-mode"),r.value.pm.disableDraw(),le(),r.value.getContainer().style.cursor="crosshair";const $={templineStyle:{color:I.value.color,weight:I.value.weight,dashArray:I.value.dashArray},hintlineStyle:{color:I.value.color,weight:I.value.weight,dashArray:I.value.dashArray},pathOptions:{color:I.value.color,fillColor:I.value.color,fillOpacity:.2,weight:I.value.weight,dashArray:I.value.dashArray},tooltips:!0,snapDistance:20,finishOn:"contextmenu"},J={Rectangle:"Cliquez et glissez pour dessiner un rectangle",Cercle:"Cliquez et glissez pour définir le rayon du cercle",Ligne:"Cliquez pour commencer la ligne, double-cliquez pour terminer","Demi-cercle":"Cliquez pour placer le centre, glissez pour définir le rayon"};if(r.value&&J[Y]){const zt=document.createElement("div");zt.className="drawing-help-message",zt.textContent=J[Y],r.value.getContainer().appendChild(zt)}switch(Y){case"Rectangle":r.value.pm.enableDraw("Rectangle",$);break;case"Cercle":r.value.pm.enableDraw("Circle",$);break;case"Ligne":r.value.pm.enableDraw("Line",$);break;case"Demi-cercle":rt($);break}}let Q={mousedown:null,mousemove:null,mouseup:null};function rt(Y={}){if(!r.value)return;let $=null,J=null,zt=0,F=0,V=Rr.tooltip({permanent:!0,direction:"right",className:"drawing-tooltip"});const et=(_t,Et)=>{V.setLatLng(_t),V.setContent(Et)};r.value.once("click",_t=>{$=_t.latlng,zt=1,V.setLatLng(_t.latlng),V.setContent("Move mouse to set radius"),V.addTo(r.value),J=Rr.circle($,{radius:0,color:I.value.color,fillColor:I.value.color,fillOpacity:.2,weight:I.value.weight,dashArray:I.value.dashArray}).addTo(r.value);const Et=yt=>{zt===1&&(F=$.distanceTo(yt.latlng),J.setRadius(F),et(yt.latlng,"Click to set radius"))};r.value.on("mousemove",Et),r.value.once("click",yt=>{if(zt===1){F=$.distanceTo(yt.latlng),zt=2,r.value.off("mousemove",Et),J&&r.value.removeLayer(J),J=Rr.semiCircle($,{radius:F,color:I.value.color,fillColor:I.value.color,fillOpacity:.2,weight:I.value.weight,startAngle:0,stopAngle:180,dashArray:I.value.dashArray}).addTo(r.value),et(yt.latlng,"Move mouse to set orientation");const Pt=At=>{if(zt===2){const It=Math.atan2(At.latlng.lat-$.lat,At.latlng.lng-$.lng)*180/Math.PI;J.setStartAngle(It-90),J.setStopAngle(It+90),et(At.latlng,"Click to finish")}};r.value.on("mousemove",Pt),r.value.once("click",At=>{const It=Math.atan2(At.latlng.lat-$.lat,At.latlng.lng-$.lng)*180/Math.PI,wt=Rr.semiCircle($,{radius:F,color:I.value.color,fillColor:I.value.color,fillOpacity:.2,weight:I.value.weight,startAngle:It-90,stopAngle:It+90});r.value.removeLayer(J),r.value.removeLayer(V),r.value.off("mousemove",Pt),i.value.addLayer(wt),xt({layer:wt,shape:"semicircle"}),$=null,J=null,zt=0})}})})}async function gt(Y){try{const $=Y.map(F=>`${F.lat},${F.lng}`).join("|");return(await(await fetch("https://api.open-elevation.com/api/v1/lookup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({locations:Y.map(F=>({latitude:F.lat,longitude:F.lng}))})})).json()).results.map((F,V)=>({distance:V===0?0:Xd(Uf(Y.slice(0,V+1).map(et=>[et.lng,et.lat]))),elevation:F.elevation}))}catch($){return console.error("Erreur lors de la récupération du profil altimétrique:",$),[]}}async function xt(Y){var zt;const{layer:$,shape:J}=Y;if($)try{console.log("Creating shape:",J,"Layer:",$),ve($),console.log("Rotation support added to layer"),E.value=!1,S.value="idle",T.value=null,r.value&&r.value.getContainer().classList.remove("drawing-mode");const F={rectangle:"Rectangle",circle:"Cercle",semicircle:"Demi-cercle",line:"Ligne"},V=J.toLowerCase(),et=F[V]||J,_t=bt($,V);(zt=$.getElement())==null||zt.classList.add("shape-created"),setTimeout(()=>{var yt;(yt=$.getElement())==null||yt.classList.remove("shape-created")},1e3),$.on("click",()=>{if(console.log("Shape clicked, enabling editing"),r.value){i.value.eachLayer(Pt=>{Pt!==$&&Pt.pm.disable()}),$.pm.enable({allowSelfIntersection:!1,preventMarkerRemoval:!0,removeLayerOnEmpty:!1});const yt=u.value.find(Pt=>Pt.layer===$);yt&&Oe(yt)}}),i.value.addLayer($),f.currentPlan&&Dt($,V,_t);const Et={id:$.id||Date.now(),type:et,layer:$,properties:_t};if(u.value.push(Et),console.log("Shape added to shapes list:",Et),J.toLowerCase()==="line"){const yt=$.getLatLngs(),Pt=await gt(yt);if(Pt.length>0){const At=Pt.map(he=>he.elevation),It=Math.min(...At),wt=Math.max(...At),Kt=wt-It,Ut=Pt[Pt.length-1].distance,ne=Kt/Ut*100;_t.elevation={profile:Pt,difference:Kt,slope:ne,minElevation:It,maxElevation:wt},_.value={id:$.id||Date.now(),type:J,properties:_t,elevationProfile:Pt}}}Oe(Et)}catch(F){console.error("Error in handleShapeCreated:",F)}}function bt(Y,$){const J={type:$,surfaceInterieure:0,surfaceExterieure:0,perimetre:0,dimensions:{},elevation:{difference:0,slope:0}},zt=Y.toGeoJSON();switch($.toLowerCase()){case"rectangle":const F=jf(zt),V=E4(F);J.surfaceInterieure=Zd(V);const et=p0(V,1,{units:"meters"});J.surfaceExterieure=Zd(et),J.perimetre=Xd(b4(V),{units:"meters"});const _t=bf([F[0],F[1]]),Et=bf([F[2],F[1]]),yt=bf([F[0],F[3]]);J.dimensions={width:Eg(_t,Et,{units:"meters"}),height:Eg(_t,yt,{units:"meters"})};break;case"circle":const Pt=Y.getRadius();J.surfaceInterieure=Math.PI*Math.pow(Pt,2),J.surfaceExterieure=Math.PI*Math.pow(Pt+1,2),J.perimetre=2*Math.PI*Pt,J.dimensions={radius:Pt,diameter:Pt*2};break;case"semicircle":const At=Y.getRadius();J.surfaceInterieure=Math.PI*Math.pow(At,2)/2,J.surfaceExterieure=Math.PI*Math.pow(At+1,2)/2,J.perimetre=Math.PI*At+2*At,J.dimensions={radius:At,orientation:Y.options.startAngle+90};break;case"line":const It=Uf(Y.getLatLngs().map(Kt=>[Kt.lng,Kt.lat]));J.length=Xd(It,{units:"meters"});const wt=p0(It,1,{units:"meters"});if(J.surfaceInfluence=Zd(wt),J.dimensions={width:2},J.elevation={difference:0,slope:0},r.value){const Kt=Y.getLatLngs();if(Kt.length>=2){Kt[0],Kt[Kt.length-1];const Ut=J.length;J.elevation.difference=Ut*.02,J.elevation.slope=2}}break}return J}async function Dt(Y,$,J){try{const zt={plan_id:f.currentPlan.id,type_forme:$.toUpperCase(),geometrie:Y.toGeoJSON().geometry,proprietes:{...J,style:Y.options}},F=await f.createShape(zt);Y.id=F.data.id}catch(zt){console.error("Erreur lors de la sauvegarde de la forme:",zt),i.value.removeLayer(Y)}}function Nt(Y){const{layer:$}=Y;f.currentPlan&&Ot($)}function Ot(Y){const $=u.value.find(J=>J.id===Y);!$||!r.value||!i.value||(i.value.removeLayer($.layer),u.value=u.value.filter(J=>J.id!==Y))}function te(){!d.value||!r.value||(E.value=!1,S.value="idle",T.value=null,r.value.getContainer().classList.remove("drawing-mode"),le(),r.value.removeLayer(d.value.layer),d.value=null,r.value.pm.disableDraw())}function Ht(Y){return Y?`${Y.toFixed(2)} m²`:""}jg(()=>{r.value&&(window.removeEventListener("map-set-location",Y=>{if(r.value&&Y.detail){const{lat:$,lng:J,zoom:zt}=Y.detail;r.value.setView([$,J],zt)}}),r.value.remove())}),ha(o,Y=>{Y&&W(Y)});function ee(){var $;if(!r.value)return;const Y={templineStyle:{color:I.value.color,weight:I.value.weight,dashArray:I.value.dashArray},hintlineStyle:{color:I.value.color,weight:I.value.weight,dashArray:I.value.dashArray},pathOptions:{color:I.value.color,fillColor:I.value.color,fillOpacity:.2,weight:I.value.weight,dashArray:I.value.dashArray}};r.value.pm.setGlobalOptions({templineStyle:Y.templineStyle,hintlineStyle:Y.hintlineStyle,pathOptions:Y.pathOptions}),($=d.value)!=null&&$.layer&&d.value.layer.setStyle(Y.pathOptions)}async function Ae(){if(r.value)try{(await f.getShapes(f.currentPlan.id)).data.forEach($=>{const J=Rr.geoJSON($.geometrie,{style:$.proprietes.style}).addTo(r.value);u.value.push({id:$.id,type:$.type_forme,layer:J,surface:$.surface})})}catch(Y){console.error("Erreur lors du chargement des formes:",Y)}}function Bt(){}ha(S,(Y,$)=>{if(!r.value)return;const J=r.value.getContainer();switch(J.classList.remove(`state-${$}`),J.classList.add(`state-${Y}`),Y){case"drawing":J.style.cursor="crosshair";break;case"editing":J.style.cursor="pointer";break;default:J.style.cursor=""}});function le(){if(!r.value)return;r.value.dragging.enable(),r.value.getContainer().style.cursor="";const Y=r.value.getContainer().querySelector(".drawing-help-message");Y&&Y.remove(),Q.mousedown&&r.value.off("mousedown",Q.mousedown),Q.mousemove&&r.value.off("mousemove",Q.mousemove),Q.mouseup&&r.value.off("mouseup",Q.mouseup),Q={mousedown:null,mousemove:null,mouseup:null}}function jt(Y){return Y?`${Y.toFixed(2)} m`:""}zn({rectangle:0,circle:0,semicircle:0,line:0});function Zt(Y){const $={rectangle:"Rectangle",circle:"Cercle",semicircle:"Demi-cercle",line:"Ligne"},J=Y.type.toLowerCase();return $[J]||Y.type}function Rt(Y){return!Y&&Y!==0?"0 %":`${Y.toFixed(1)} %`}function tn(Y){if(Y.getCenter)return Y.getCenter();if(Y.getBounds)return Y.getBounds().getCenter();if(Y.getLatLng)return Y.getLatLng();if(Y.getLatLngs){const $=Y.getLatLngs(),J=Array.isArray($[0])?$[0]:$,zt=J.reduce((V,et)=>V+et.lat,0),F=J.reduce((V,et)=>V+et.lng,0);return Rr.latLng(zt/J.length,F/J.length)}return null}function Wt(Y,$){const zt=$/6378137*(180/Math.PI);return Rr.latLng(Y.lat+zt,Y.lng)}function de(Y,$){return Math.atan2($.lat-Y.lat,$.lng-Y.lng)*180/Math.PI}function Pe(Y,$){const J=u.value.find(zt=>zt.layer===Y);J&&J.properties&&(J.properties.rotation=$,_.value&&_.value.id===J.id&&(_.value.properties=J.properties))}function Ue(Y){if(!r.value||!Y)return console.warn("Map or layer not initialized"),null;Y._rotationControl&&(r.value.removeLayer(Y._rotationControl),delete Y._rotationControl);const $=tn(Y);if(!$)return console.warn("Cannot determine center of layer"),null;let J=50;if(Y.getRadius){const It=Y.getRadius(),wt=r.value.latLngToLayerPoint($),Kt=Wt($,It),Ut=r.value.latLngToLayerPoint(Kt);J=wt.distanceTo(Ut)}else if(Y.getBounds){const It=Y.getBounds(),wt=r.value.latLngToLayerPoint(It.getNorth());J=r.value.latLngToLayerPoint($).distanceTo(wt)}const zt=`rotation-control-${Date.now()}`,F=Rr.divIcon({className:`rotation-control ${zt}`,html:`<svg viewBox="0 0 24 24" width="24" height="24">
      <path fill="currentColor" d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"/>
    </svg>`,iconSize:[32,32],iconAnchor:[16,16]}),V=r.value.latLngToLayerPoint($).subtract([0,J+40]),et=r.value.layerPointToLatLng(V),_t=Rr.marker(et,{icon:F,draggable:!1,zIndexOffset:1e3,pmIgnore:!0,interactive:!0});let Et=!1,yt=0;function Pt(It){if(!Et)return;const Kt=de($,It.latlng)-yt,Ut=Math.round(Kt/5)*5;typeof Y.setRotation=="function"&&(Y.setRotation(Ut),Pe(Y,Ut))}function At(){Et=!1;const It=document.querySelector(`.${zt}`);It&&It.classList.remove("rotating"),r.value.off("mousemove",Pt),Y.pm&&Y.pm.enable({allowSelfIntersection:!1,preventMarkerRemoval:!0,removeLayerOnEmpty:!1})}return _t.on("click",It=>{if(Rr.DomEvent.stopPropagation(It),!Et){Y.pm&&Y.pm.disable(),Et=!0,yt=de($,_t.getLatLng());const wt=document.querySelector(`.${zt}`);wt&&wt.classList.add("rotating"),r.value.on("mousemove",Pt),r.value.once("click",At)}}),_t.addTo(r.value),Y._rotationControl=_t,_t}function Oe(Y){var $,J;if(!r.value){console.warn("Map not initialized");return}try{if(console.log("Selecting shape:",Y),_.value&&_.value.id!==Y.id){const F=($=u.value.find(V=>V.id===_.value.id))==null?void 0:$.layer;F&&(console.log("Disabling previous shape"),F.pm.disable(),F._rotationControl&&(console.log("Removing previous rotation control"),r.value.removeLayer(F._rotationControl),delete F._rotationControl))}_.value={id:Y.id,type:Y.type,properties:Y.properties,elevationProfile:(J=Y.properties.elevation)==null?void 0:J.profile},console.log("Selected shape info updated:",_.value);const zt=Y.layer;zt?(console.log("Enabling editing on selected shape"),u.value.forEach(F=>{F.layer!==zt&&F.layer.pm.disable()}),typeof zt.setRotation!="function"&&(console.log("Adding rotation support to layer"),ve(zt)),zt.pm.enable({allowSelfIntersection:!1,preventMarkerRemoval:!0,removeLayerOnEmpty:!1}),setTimeout(()=>{console.log("Creating rotation control"),Ue(zt)?(console.log("Rotation control created successfully"),zt.getBounds&&r.value.fitBounds(zt.getBounds(),{padding:[50,50]})):console.warn("Failed to create rotation control")},100)):console.warn("No layer found for selected shape")}catch(zt){console.error("Error in selectShape:",zt)}}function ve(Y){!Y||typeof Y.setRotation=="function"||(Y.setRotation=function($){if(r.value)try{const J=Y.getBounds?Y.getBounds().getCenter():Y.getLatLng?Y.getLatLng():null;if(!J)return;const zt=r.value.latLngToLayerPoint(J),F=Y.getLatLngs(),et=(Array.isArray(F[0])?F[0]:F).map(_t=>{const Et=r.value.latLngToLayerPoint(_t),yt=rotatePoint(Et,zt,$);return r.value.layerPointToLatLng(yt)});Array.isArray(F[0])?Y.setLatLngs([et]):Y.setLatLngs(et)}catch(J){console.error("Error rotating shape:",J)}})}ha(()=>I,Y=>{ee()},{deep:!0});function ce(Y){I.value.color=Y,ee()}function Lt(Y){return!Y&&Y!==0?"0°":`${Math.round(Y)}°`}return(Y,$)=>(Ee(),Ie("div",fM,[vt("div",pM,[vt("div",{ref_key:"mapContainer",ref:n,class:"h-full w-full"},null,512),_.value?(Ee(),Nf(hM,{key:0,shape:_.value},null,8,["shape"])):Zn("",!0)]),vt("div",dM,[$[13]||($[13]=vt("div",{class:"p-4 border-b border-gray-200"},[vt("h2",{class:"text-lg font-medium text-gray-900"},"Outils de dessin")],-1)),vt("div",gM,[$[4]||($[4]=vt("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Type de forme ",-1)),vt("div",mM,[(Ee(),Ie(sn,null,vs(["Rectangle","Cercle","Demi-cercle","Ligne"],J=>vt("button",{key:J,onClick:zt=>o.value=J,class:la(["px-3 py-2 rounded-md text-sm font-medium",[o.value===J?"bg-primary-100 text-primary-700 border-primary-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"]])},_e(J),11,_M)),64))])]),vt("div",yM,[$[10]||($[10]=vt("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Style",-1)),vt("div",null,[$[5]||($[5]=vt("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Couleur",-1)),vt("div",vM,[(Ee(),Ie(sn,null,vs(t,J=>vt("button",{key:J.value,onClick:zt=>ce(J.value),class:la(["w-8 h-8 rounded-full border-2 transition-all transform hover:scale-110",[I.value.color===J.value?"border-primary-500 scale-110":"border-transparent"]]),style:rl({backgroundColor:J.value}),title:J.label},null,14,CM)),64)),vt("div",EM,[Cc(vt("input",{type:"color","onUpdate:modelValue":$[0]||($[0]=J=>I.value.color=J),class:"w-8 h-8 rounded-full cursor-pointer"},null,512),[[yf,I.value.color]])])])]),vt("div",null,[$[7]||($[7]=vt("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Type de trait",-1)),Cc(vt("select",{"onUpdate:modelValue":$[1]||($[1]=J=>I.value.dashArray=J),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},$[6]||($[6]=[CL('<option value="">Trait continu</option><option value="5,5">Pointillé simple</option><option value="10,5">Pointillé long</option><option value="2,5">Pointillé court</option><option value="15,10,5,10">Pointillé mixte</option><option value="20,5,5,5">Trait-point</option>',6)]),512),[[JL,I.value.dashArray]])]),vt("div",null,[vt("div",LM,[$[8]||($[8]=vt("label",{class:"block text-sm font-medium text-gray-700"},"Épaisseur",-1)),vt("span",xM,_e(I.value.weight)+"px",1)]),vt("div",bM,[Cc(vt("input",{type:"range","onUpdate:modelValue":$[2]||($[2]=J=>I.value.weight=J),min:"1",max:"10",step:"0.5",class:"w-full accent-primary-600"},null,512),[[yf,I.value.weight]]),vt("div",{class:"mt-2 bg-current rounded-full",style:rl({height:I.value.weight+"px",strokeDasharray:I.value.dashArray})},null,4)])]),vt("div",null,[$[9]||($[9]=vt("label",{class:"block text-sm text-gray-600 mb-1"}," Opacité ",-1)),Cc(vt("input",{type:"range","onUpdate:modelValue":$[3]||($[3]=J=>y.value.opacity=J),min:"0",max:"1",step:"0.1",class:"w-full",onChange:ee},null,544),[[yf,y.value.opacity]]),vt("div",wM,_e(Math.round(y.value.opacity*100))+"% ",1)])]),vt("div",SM,[$[12]||($[12]=vt("h3",{class:"text-sm font-medium text-gray-700 mb-2"}," Formes dessinées ",-1)),vt("div",MM,[(Ee(!0),Ie(sn,null,vs(u.value,J=>{var zt,F,V,et,_t,Et,yt;return Ee(),Ie("div",{key:J.id,class:la(["p-3 bg-gray-50 rounded-md hover:bg-gray-100 transition-colors cursor-pointer",{"ring-2 ring-primary-500":((zt=_.value)==null?void 0:zt.id)===J.id}]),onClick:Pt=>Oe(J)},[vt("div",IM,[vt("span",TM,_e(Zt(J)),1),vt("button",{onClick:tx(Pt=>Ot(J.id),["stop"]),class:"text-red-600 hover:text-red-800"},$[11]||($[11]=[vt("span",{class:"sr-only"},"Supprimer",-1),vt("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[vt("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]),8,AM)]),vt("div",kM,[J.type.toLowerCase()==="rectangle"&&((F=J.properties)!=null&&F.dimensions)?(Ee(),Ie(sn,{key:0},[vt("div",null,"Largeur: "+_e(jt(J.properties.dimensions.width)),1),vt("div",null,"Longueur: "+_e(jt(J.properties.dimensions.height)),1),vt("div",null,"Surface: "+_e(Ht(J.properties.surfaceInterieure)),1),J.properties.rotation!==void 0?(Ee(),Ie("div",DM,"Rotation: "+_e(Lt(J.properties.rotation)),1)):Zn("",!0)],64)):Zn("",!0),J.type.toLowerCase()==="circle"&&((V=J.properties)!=null&&V.dimensions)?(Ee(),Ie(sn,{key:1},[vt("div",null,"Rayon: "+_e(jt(J.properties.dimensions.radius)),1),vt("div",null,"Diamètre: "+_e(jt(J.properties.dimensions.diameter)),1),vt("div",null,"Surface: "+_e(Ht(J.properties.surfaceInterieure)),1),J.properties.rotation!==void 0?(Ee(),Ie("div",NM,"Rotation: "+_e(Lt(J.properties.rotation)),1)):Zn("",!0)],64)):Zn("",!0),J.type.toLowerCase()==="semicircle"&&((et=J.properties)!=null&&et.dimensions)?(Ee(),Ie(sn,{key:2},[vt("div",null,"Rayon: "+_e(jt(J.properties.dimensions.radius)),1),vt("div",null,"Orientation: "+_e(Lt(J.properties.dimensions.orientation)),1),vt("div",null,"Surface: "+_e(Ht(J.properties.surfaceInterieure)),1),J.properties.rotation!==void 0?(Ee(),Ie("div",OM,"Rotation: "+_e(Lt(J.properties.rotation)),1)):Zn("",!0)],64)):Zn("",!0),J.type.toLowerCase()==="line"&&J.properties?(Ee(),Ie(sn,{key:3},[vt("div",null,"Longueur: "+_e(jt(J.properties.length)),1),vt("div",null,"Largeur d'influence: "+_e(jt(((_t=J.properties.dimensions)==null?void 0:_t.width)||0)),1),vt("div",null,"Zone d'influence: "+_e(Ht(J.properties.surfaceInfluence)),1),vt("div",null,"Dénivelé: "+_e(jt(((Et=J.properties.elevation)==null?void 0:Et.difference)||0)),1),vt("div",null,"Pente moyenne: "+_e(Rt(((yt=J.properties.elevation)==null?void 0:yt.slope)||0)),1)],64)):Zn("",!0)])],10,PM)}),128))])]),vt("div",{class:"p-4 border-t border-gray-200"},[vt("button",{onClick:te,class:"w-full mb-2 px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50"}," Annuler le dessin "),vt("button",{onClick:Bt,class:"w-full px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700"}," Sauvegarder le plan ")])])]))}}),BM=hb({history:Vx("/"),routes:[{path:"/",name:"home",component:RM}]}),gm=rx(l4);gm.use(ox());gm.use(BM);gm.mount("#app");
