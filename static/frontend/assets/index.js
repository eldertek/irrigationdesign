var hv=Object.defineProperty;var fv=(e,t,n)=>t in e?hv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var zt=(e,t,n)=>fv(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Md(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const ci={},Pu=[],va=()=>{},dv=()=>!1,Bh=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Bd=e=>e.startsWith("onUpdate:"),xr=Object.assign,Td=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},pv=Object.prototype.hasOwnProperty,ii=(e,t)=>pv.call(e,t),fn=Array.isArray,Su=e=>Sc(e)==="[object Map]",Iu=e=>Sc(e)==="[object Set]",pp=e=>Sc(e)==="[object Date]",En=e=>typeof e=="function",Gi=e=>typeof e=="string",ya=e=>typeof e=="symbol",hi=e=>e!==null&&typeof e=="object",ym=e=>(hi(e)||En(e))&&En(e.then)&&En(e.catch),bm=Object.prototype.toString,Sc=e=>bm.call(e),mv=e=>Sc(e).slice(8,-1),wm=e=>Sc(e)==="[object Object]",Nd=e=>Gi(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,rc=Md(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Th=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},gv=/-(\w)/g,bo=Th(e=>e.replace(gv,(t,n)=>n?n.toUpperCase():"")),vv=/\B([A-Z])/g,su=Th(e=>e.replace(vv,"-$1").toLowerCase()),Nh=Th(e=>e.charAt(0).toUpperCase()+e.slice(1)),pf=Th(e=>e?`on${Nh(e)}`:""),xl=(e,t)=>!Object.is(e,t),eh=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},xm=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},dh=e=>{const t=parseFloat(e);return isNaN(t)?e:t},_v=e=>{const t=Gi(e)?Number(e):NaN;return isNaN(t)?e:t};let mp;const Dh=()=>mp||(mp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Oh(e){if(fn(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],o=Gi(r)?xv(r):Oh(r);if(o)for(const a in o)t[a]=o[a]}return t}else if(Gi(e)||hi(e))return e}const yv=/;(?![^(]*\))/g,bv=/:([^]+)/,wv=/\/\*[^]*?\*\//g;function xv(e){const t={};return e.replace(wv,"").split(yv).forEach(n=>{if(n){const r=n.split(bv);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Ni(e){let t="";if(Gi(e))t=e;else if(fn(e))for(let n=0;n<e.length;n++){const r=Ni(e[n]);r&&(t+=r+" ")}else if(hi(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Lv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Cv=Md(Lv);function Lm(e){return!!e||e===""}function kv(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=nu(e[r],t[r]);return n}function nu(e,t){if(e===t)return!0;let n=pp(e),r=pp(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=ya(e),r=ya(t),n||r)return e===t;if(n=fn(e),r=fn(t),n||r)return n&&r?kv(e,t):!1;if(n=hi(e),r=hi(t),n||r){if(!n||!r)return!1;const o=Object.keys(e).length,a=Object.keys(t).length;if(o!==a)return!1;for(const u in e){const f=e.hasOwnProperty(u),m=t.hasOwnProperty(u);if(f&&!m||!f&&m||!nu(e[u],t[u]))return!1}}return String(e)===String(t)}function Dd(e,t){return e.findIndex(n=>nu(n,t))}const Cm=e=>!!(e&&e.__v_isRef===!0),kt=e=>Gi(e)?e:e==null?"":fn(e)||hi(e)&&(e.toString===bm||!En(e.toString))?Cm(e)?kt(e.value):JSON.stringify(e,km,2):String(e),km=(e,t)=>Cm(t)?km(e,t.value):Su(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,o],a)=>(n[mf(r,a)+" =>"]=o,n),{})}:Iu(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>mf(n))}:ya(t)?mf(t):hi(t)&&!fn(t)&&!wm(t)?String(t):t,mf=(e,t="")=>{var n;return ya(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ls;class Pm{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ls,!t&&ls&&(this.index=(ls.scopes||(ls.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=ls;try{return ls=this,t()}finally{ls=n}}}on(){ls=this}off(){ls=this.parent}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function Sm(e){return new Pm(e)}function Em(){return ls}function Pv(e,t=!1){ls&&ls.cleanups.push(e)}let gi;const gf=new WeakSet;class Am{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ls&&ls.active&&ls.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,gf.has(this)&&(gf.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Bm(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,gp(this),Tm(this);const t=gi,n=qo;gi=this,qo=!0;try{return this.fn()}finally{Nm(this),gi=t,qo=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Id(t);this.deps=this.depsTail=void 0,gp(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?gf.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Wf(this)&&this.run()}get dirty(){return Wf(this)}}let Mm=0,sc,oc;function Bm(e,t=!1){if(e.flags|=8,t){e.next=oc,oc=e;return}e.next=sc,sc=e}function Od(){Mm++}function Rd(){if(--Mm>0)return;if(oc){let t=oc;for(oc=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;sc;){let t=sc;for(sc=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function Tm(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Nm(e){let t,n=e.depsTail,r=n;for(;r;){const o=r.prevDep;r.version===-1?(r===n&&(n=o),Id(r),Sv(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=o}e.deps=t,e.depsTail=n}function Wf(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Dm(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Dm(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===pc))return;e.globalVersion=pc;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!Wf(e)){e.flags&=-3;return}const n=gi,r=qo;gi=e,qo=!0;try{Tm(e);const o=e.fn(e._value);(t.version===0||xl(o,e._value))&&(e._value=o,t.version++)}catch(o){throw t.version++,o}finally{gi=n,qo=r,Nm(e),e.flags&=-3}}function Id(e,t=!1){const{dep:n,prevSub:r,nextSub:o}=e;if(r&&(r.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let a=n.computed.deps;a;a=a.nextDep)Id(a,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Sv(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let qo=!0;const Om=[];function El(){Om.push(qo),qo=!1}function Al(){const e=Om.pop();qo=e===void 0?!0:e}function gp(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=gi;gi=void 0;try{t()}finally{gi=n}}}let pc=0;class Ev{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Fd{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!gi||!qo||gi===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==gi)n=this.activeLink=new Ev(gi,this),gi.deps?(n.prevDep=gi.depsTail,gi.depsTail.nextDep=n,gi.depsTail=n):gi.deps=gi.depsTail=n,Rm(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=gi.depsTail,n.nextDep=void 0,gi.depsTail.nextDep=n,gi.depsTail=n,gi.deps===n&&(gi.deps=r)}return n}trigger(t){this.version++,pc++,this.notify(t)}notify(t){Od();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Rd()}}}function Rm(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)Rm(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const ph=new WeakMap,Xl=Symbol(""),Zf=Symbol(""),mc=Symbol("");function Wr(e,t,n){if(qo&&gi){let r=ph.get(e);r||ph.set(e,r=new Map);let o=r.get(n);o||(r.set(n,o=new Fd),o.map=r,o.key=n),o.track()}}function $a(e,t,n,r,o,a){const u=ph.get(e);if(!u){pc++;return}const f=m=>{m&&m.trigger()};if(Od(),t==="clear")u.forEach(f);else{const m=fn(e),_=m&&Nd(n);if(m&&n==="length"){const w=Number(r);u.forEach((b,E)=>{(E==="length"||E===mc||!ya(E)&&E>=w)&&f(b)})}else switch((n!==void 0||u.has(void 0))&&f(u.get(n)),_&&f(u.get(mc)),t){case"add":m?_&&f(u.get("length")):(f(u.get(Xl)),Su(e)&&f(u.get(Zf)));break;case"delete":m||(f(u.get(Xl)),Su(e)&&f(u.get(Zf)));break;case"set":Su(e)&&f(u.get(Xl));break}}Rd()}function Av(e,t){const n=ph.get(e);return n&&n.get(t)}function mu(e){const t=Zn(e);return t===e?t:(Wr(t,"iterate",mc),vo(e)?t:t.map(Zr))}function Rh(e){return Wr(e=Zn(e),"iterate",mc),e}const Mv={__proto__:null,[Symbol.iterator](){return vf(this,Symbol.iterator,Zr)},concat(...e){return mu(this).concat(...e.map(t=>fn(t)?mu(t):t))},entries(){return vf(this,"entries",e=>(e[1]=Zr(e[1]),e))},every(e,t){return Ia(this,"every",e,t,void 0,arguments)},filter(e,t){return Ia(this,"filter",e,t,n=>n.map(Zr),arguments)},find(e,t){return Ia(this,"find",e,t,Zr,arguments)},findIndex(e,t){return Ia(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ia(this,"findLast",e,t,Zr,arguments)},findLastIndex(e,t){return Ia(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Ia(this,"forEach",e,t,void 0,arguments)},includes(...e){return _f(this,"includes",e)},indexOf(...e){return _f(this,"indexOf",e)},join(e){return mu(this).join(e)},lastIndexOf(...e){return _f(this,"lastIndexOf",e)},map(e,t){return Ia(this,"map",e,t,void 0,arguments)},pop(){return Gu(this,"pop")},push(...e){return Gu(this,"push",e)},reduce(e,...t){return vp(this,"reduce",e,t)},reduceRight(e,...t){return vp(this,"reduceRight",e,t)},shift(){return Gu(this,"shift")},some(e,t){return Ia(this,"some",e,t,void 0,arguments)},splice(...e){return Gu(this,"splice",e)},toReversed(){return mu(this).toReversed()},toSorted(e){return mu(this).toSorted(e)},toSpliced(...e){return mu(this).toSpliced(...e)},unshift(...e){return Gu(this,"unshift",e)},values(){return vf(this,"values",Zr)}};function vf(e,t,n){const r=Rh(e),o=r[t]();return r!==e&&!vo(e)&&(o._next=o.next,o.next=()=>{const a=o._next();return a.value&&(a.value=n(a.value)),a}),o}const Bv=Array.prototype;function Ia(e,t,n,r,o,a){const u=Rh(e),f=u!==e&&!vo(e),m=u[t];if(m!==Bv[t]){const b=m.apply(e,a);return f?Zr(b):b}let _=n;u!==e&&(f?_=function(b,E){return n.call(this,Zr(b),E,e)}:n.length>2&&(_=function(b,E){return n.call(this,b,E,e)}));const w=m.call(u,_,r);return f&&o?o(w):w}function vp(e,t,n,r){const o=Rh(e);let a=n;return o!==e&&(vo(e)?n.length>3&&(a=function(u,f,m){return n.call(this,u,f,m,e)}):a=function(u,f,m){return n.call(this,u,Zr(f),m,e)}),o[t](a,...r)}function _f(e,t,n){const r=Zn(e);Wr(r,"iterate",mc);const o=r[t](...n);return(o===-1||o===!1)&&Ud(n[0])?(n[0]=Zn(n[0]),r[t](...n)):o}function Gu(e,t,n=[]){El(),Od();const r=Zn(e)[t].apply(e,n);return Rd(),Al(),r}const Tv=Md("__proto__,__v_isRef,__isVue"),Im=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ya));function Nv(e){ya(e)||(e=String(e));const t=Zn(this);return Wr(t,"has",e),t.hasOwnProperty(e)}class Fm{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const o=this._isReadonly,a=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return a;if(n==="__v_raw")return r===(o?a?$v:qm:a?Um:zm).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const u=fn(t);if(!o){let m;if(u&&(m=Mv[n]))return m;if(n==="hasOwnProperty")return Nv}const f=Reflect.get(t,n,Hi(t)?t:r);return(ya(n)?Im.has(n):Tv(n))||(o||Wr(t,"get",n),a)?f:Hi(f)?u&&Nd(n)?f:f.value:hi(f)?o?Vm(f):Wa(f):f}}class jm extends Fm{constructor(t=!1){super(!1,t)}set(t,n,r,o){let a=t[n];if(!this._isShallow){const m=iu(a);if(!vo(r)&&!iu(r)&&(a=Zn(a),r=Zn(r)),!fn(t)&&Hi(a)&&!Hi(r))return m?!1:(a.value=r,!0)}const u=fn(t)&&Nd(n)?Number(n)<t.length:ii(t,n),f=Reflect.set(t,n,r,Hi(t)?t:o);return t===Zn(o)&&(u?xl(r,a)&&$a(t,"set",n,r):$a(t,"add",n,r)),f}deleteProperty(t,n){const r=ii(t,n);t[n];const o=Reflect.deleteProperty(t,n);return o&&r&&$a(t,"delete",n,void 0),o}has(t,n){const r=Reflect.has(t,n);return(!ya(n)||!Im.has(n))&&Wr(t,"has",n),r}ownKeys(t){return Wr(t,"iterate",fn(t)?"length":Xl),Reflect.ownKeys(t)}}class Dv extends Fm{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Ov=new jm,Rv=new Dv,Iv=new jm(!0);const Kf=e=>e,Vc=e=>Reflect.getPrototypeOf(e);function Fv(e,t,n){return function(...r){const o=this.__v_raw,a=Zn(o),u=Su(a),f=e==="entries"||e===Symbol.iterator&&u,m=e==="keys"&&u,_=o[e](...r),w=n?Kf:t?Jf:Zr;return!t&&Wr(a,"iterate",m?Zf:Xl),{next(){const{value:b,done:E}=_.next();return E?{value:b,done:E}:{value:f?[w(b[0]),w(b[1])]:w(b),done:E}},[Symbol.iterator](){return this}}}}function Hc(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function jv(e,t){const n={get(o){const a=this.__v_raw,u=Zn(a),f=Zn(o);e||(xl(o,f)&&Wr(u,"get",o),Wr(u,"get",f));const{has:m}=Vc(u),_=t?Kf:e?Jf:Zr;if(m.call(u,o))return _(a.get(o));if(m.call(u,f))return _(a.get(f));a!==u&&a.get(o)},get size(){const o=this.__v_raw;return!e&&Wr(Zn(o),"iterate",Xl),Reflect.get(o,"size",o)},has(o){const a=this.__v_raw,u=Zn(a),f=Zn(o);return e||(xl(o,f)&&Wr(u,"has",o),Wr(u,"has",f)),o===f?a.has(o):a.has(o)||a.has(f)},forEach(o,a){const u=this,f=u.__v_raw,m=Zn(f),_=t?Kf:e?Jf:Zr;return!e&&Wr(m,"iterate",Xl),f.forEach((w,b)=>o.call(a,_(w),_(b),u))}};return xr(n,e?{add:Hc("add"),set:Hc("set"),delete:Hc("delete"),clear:Hc("clear")}:{add(o){!t&&!vo(o)&&!iu(o)&&(o=Zn(o));const a=Zn(this);return Vc(a).has.call(a,o)||(a.add(o),$a(a,"add",o,o)),this},set(o,a){!t&&!vo(a)&&!iu(a)&&(a=Zn(a));const u=Zn(this),{has:f,get:m}=Vc(u);let _=f.call(u,o);_||(o=Zn(o),_=f.call(u,o));const w=m.call(u,o);return u.set(o,a),_?xl(a,w)&&$a(u,"set",o,a):$a(u,"add",o,a),this},delete(o){const a=Zn(this),{has:u,get:f}=Vc(a);let m=u.call(a,o);m||(o=Zn(o),m=u.call(a,o)),f&&f.call(a,o);const _=a.delete(o);return m&&$a(a,"delete",o,void 0),_},clear(){const o=Zn(this),a=o.size!==0,u=o.clear();return a&&$a(o,"clear",void 0,void 0),u}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=Fv(o,e,t)}),n}function jd(e,t){const n=jv(e,t);return(r,o,a)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?r:Reflect.get(ii(n,o)&&o in r?n:r,o,a)}const zv={get:jd(!1,!1)},Uv={get:jd(!1,!0)},qv={get:jd(!0,!1)};const zm=new WeakMap,Um=new WeakMap,qm=new WeakMap,$v=new WeakMap;function Vv(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Hv(e){return e.__v_skip||!Object.isExtensible(e)?0:Vv(mv(e))}function Wa(e){return iu(e)?e:zd(e,!1,Ov,zv,zm)}function $m(e){return zd(e,!1,Iv,Uv,Um)}function Vm(e){return zd(e,!0,Rv,qv,qm)}function zd(e,t,n,r,o){if(!hi(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=o.get(e);if(a)return a;const u=Hv(e);if(u===0)return e;const f=new Proxy(e,u===2?r:n);return o.set(e,f),f}function Ll(e){return iu(e)?Ll(e.__v_raw):!!(e&&e.__v_isReactive)}function iu(e){return!!(e&&e.__v_isReadonly)}function vo(e){return!!(e&&e.__v_isShallow)}function Ud(e){return e?!!e.__v_raw:!1}function Zn(e){const t=e&&e.__v_raw;return t?Zn(t):e}function qd(e){return!ii(e,"__v_skip")&&Object.isExtensible(e)&&xm(e,"__v_skip",!0),e}const Zr=e=>hi(e)?Wa(e):e,Jf=e=>hi(e)?Vm(e):e;function Hi(e){return e?e.__v_isRef===!0:!1}function It(e){return Hm(e,!1)}function Gv(e){return Hm(e,!0)}function Hm(e,t){return Hi(e)?e:new Wv(e,t)}class Wv{constructor(t,n){this.dep=new Fd,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Zn(t),this._value=n?t:Zr(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||vo(t)||iu(t);t=r?t:Zn(t),xl(t,n)&&(this._rawValue=t,this._value=r?t:Zr(t),this.dep.trigger())}}function Dn(e){return Hi(e)?e.value:e}const Zv={get:(e,t,n)=>t==="__v_raw"?e:Dn(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const o=e[t];return Hi(o)&&!Hi(n)?(o.value=n,!0):Reflect.set(e,t,n,r)}};function Gm(e){return Ll(e)?e:new Proxy(e,Zv)}function Kv(e){const t=fn(e)?new Array(e.length):{};for(const n in e)t[n]=Yv(e,n);return t}class Jv{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Av(Zn(this._object),this._key)}}function Yv(e,t,n){const r=e[t];return Hi(r)?r:new Jv(e,t,n)}class Xv{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Fd(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=pc-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&gi!==this)return Bm(this,!0),!0}get value(){const t=this.dep.track();return Dm(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Qv(e,t,n=!1){let r,o;return En(e)?r=e:(r=e.get,o=e.set),new Xv(r,o,n)}const Gc={},mh=new WeakMap;let $l;function e_(e,t=!1,n=$l){if(n){let r=mh.get(n);r||mh.set(n,r=[]),r.push(e)}}function t_(e,t,n=ci){const{immediate:r,deep:o,once:a,scheduler:u,augmentJob:f,call:m}=n,_=be=>o?be:vo(be)||o===!1||o===0?Va(be,1):Va(be);let w,b,E,x,F=!1,N=!1;if(Hi(e)?(b=()=>e.value,F=vo(e)):Ll(e)?(b=()=>_(e),F=!0):fn(e)?(N=!0,F=e.some(be=>Ll(be)||vo(be)),b=()=>e.map(be=>{if(Hi(be))return be.value;if(Ll(be))return _(be);if(En(be))return m?m(be,2):be()})):En(e)?t?b=m?()=>m(e,2):e:b=()=>{if(E){El();try{E()}finally{Al()}}const be=$l;$l=w;try{return m?m(e,3,[x]):e(x)}finally{$l=be}}:b=va,t&&o){const be=b,ye=o===!0?1/0:o;b=()=>Va(be(),ye)}const U=Em(),j=()=>{w.stop(),U&&U.active&&Td(U.effects,w)};if(a&&t){const be=t;t=(...ye)=>{be(...ye),j()}}let ne=N?new Array(e.length).fill(Gc):Gc;const ae=be=>{if(!(!(w.flags&1)||!w.dirty&&!be))if(t){const ye=w.run();if(o||F||(N?ye.some((Pe,Ce)=>xl(Pe,ne[Ce])):xl(ye,ne))){E&&E();const Pe=$l;$l=w;try{const Ce=[ye,ne===Gc?void 0:N&&ne[0]===Gc?[]:ne,x];m?m(t,3,Ce):t(...Ce),ne=ye}finally{$l=Pe}}}else w.run()};return f&&f(ae),w=new Am(b),w.scheduler=u?()=>u(ae,!1):ae,x=be=>e_(be,!1,w),E=w.onStop=()=>{const be=mh.get(w);if(be){if(m)m(be,4);else for(const ye of be)ye();mh.delete(w)}},t?r?ae(!0):ne=w.run():u?u(ae.bind(null,!0),!0):w.run(),j.pause=w.pause.bind(w),j.resume=w.resume.bind(w),j.stop=j,j}function Va(e,t=1/0,n){if(t<=0||!hi(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Hi(e))Va(e.value,t,n);else if(fn(e))for(let r=0;r<e.length;r++)Va(e[r],t,n);else if(Iu(e)||Su(e))e.forEach(r=>{Va(r,t,n)});else if(wm(e)){for(const r in e)Va(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Va(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ec(e,t,n,r){try{return r?e(...r):e()}catch(o){Ih(o,t,n)}}function $o(e,t,n,r){if(En(e)){const o=Ec(e,t,n,r);return o&&ym(o)&&o.catch(a=>{Ih(a,t,n)}),o}if(fn(e)){const o=[];for(let a=0;a<e.length;a++)o.push($o(e[a],t,n,r));return o}}function Ih(e,t,n,r=!0){const o=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:u}=t&&t.appContext.config||ci;if(t){let f=t.parent;const m=t.proxy,_=`https://vuejs.org/error-reference/#runtime-${n}`;for(;f;){const w=f.ec;if(w){for(let b=0;b<w.length;b++)if(w[b](e,m,_)===!1)return}f=f.parent}if(a){El(),Ec(a,null,10,[e,m,_]),Al();return}}n_(e,n,o,r,u)}function n_(e,t,n,r=!0,o=!1){if(o)throw e;console.error(e)}const us=[];let da=-1;const Eu=[];let gl=null,bu=0;const Wm=Promise.resolve();let gh=null;function as(e){const t=gh||Wm;return e?t.then(this?e.bind(this):e):t}function i_(e){let t=da+1,n=us.length;for(;t<n;){const r=t+n>>>1,o=us[r],a=gc(o);a<e||a===e&&o.flags&2?t=r+1:n=r}return t}function $d(e){if(!(e.flags&1)){const t=gc(e),n=us[us.length-1];!n||!(e.flags&2)&&t>=gc(n)?us.push(e):us.splice(i_(t),0,e),e.flags|=1,Zm()}}function Zm(){gh||(gh=Wm.then(Jm))}function r_(e){fn(e)?Eu.push(...e):gl&&e.id===-1?gl.splice(bu+1,0,e):e.flags&1||(Eu.push(e),e.flags|=1),Zm()}function _p(e,t,n=da+1){for(;n<us.length;n++){const r=us[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;us.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Km(e){if(Eu.length){const t=[...new Set(Eu)].sort((n,r)=>gc(n)-gc(r));if(Eu.length=0,gl){gl.push(...t);return}for(gl=t,bu=0;bu<gl.length;bu++){const n=gl[bu];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}gl=null,bu=0}}const gc=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Jm(e){try{for(da=0;da<us.length;da++){const t=us[da];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ec(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;da<us.length;da++){const t=us[da];t&&(t.flags&=-2)}da=-1,us.length=0,Km(),gh=null,(us.length||Eu.length)&&Jm()}}let hs=null,Ym=null;function vh(e){const t=hs;return hs=e,Ym=e&&e.type.__scopeId||null,t}function Ha(e,t=hs,n){if(!t||e._n)return e;const r=(...o)=>{r._d&&Ap(-1);const a=vh(t);let u;try{u=e(...o)}finally{vh(a),r._d&&Ap(1)}return u};return r._n=!0,r._c=!0,r._d=!0,r}function kn(e,t){if(hs===null)return e;const n=Vh(hs),r=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[a,u,f,m=ci]=t[o];a&&(En(a)&&(a={mounted:a,updated:a}),a.deep&&Va(u),r.push({dir:a,instance:n,value:u,oldValue:void 0,arg:f,modifiers:m}))}return e}function jl(e,t,n,r){const o=e.dirs,a=t&&t.dirs;for(let u=0;u<o.length;u++){const f=o[u];a&&(f.oldValue=a[u].value);let m=f.dir[r];m&&(El(),$o(m,n,8,[e.el,f,e,t]),Al())}}const s_=Symbol("_vte"),Xm=e=>e.__isTeleport,vl=Symbol("_leaveCb"),Wc=Symbol("_enterCb");function o_(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ba(()=>{e.isMounted=!0}),zh(()=>{e.isUnmounting=!0}),e}const mo=[Function,Array],Qm={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:mo,onEnter:mo,onAfterEnter:mo,onEnterCancelled:mo,onBeforeLeave:mo,onLeave:mo,onAfterLeave:mo,onLeaveCancelled:mo,onBeforeAppear:mo,onAppear:mo,onAfterAppear:mo,onAppearCancelled:mo},eg=e=>{const t=e.subTree;return t.component?eg(t.component):t},a_={name:"BaseTransition",props:Qm,setup(e,{slots:t}){const n=sy(),r=o_();return()=>{const o=t.default&&ig(t.default(),!0);if(!o||!o.length)return;const a=tg(o),u=Zn(e),{mode:f}=u;if(r.isLeaving)return yf(a);const m=yp(a);if(!m)return yf(a);let _=Yf(m,u,r,n,b=>_=b);m.type!==Bs&&vc(m,_);let w=n.subTree&&yp(n.subTree);if(w&&w.type!==Bs&&!Gl(m,w)&&eg(n).type!==Bs){let b=Yf(w,u,r,n);if(vc(w,b),f==="out-in"&&m.type!==Bs)return r.isLeaving=!0,b.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete b.afterLeave,w=void 0},yf(a);f==="in-out"&&m.type!==Bs?b.delayLeave=(E,x,F)=>{const N=ng(r,w);N[String(w.key)]=w,E[vl]=()=>{x(),E[vl]=void 0,delete _.delayedLeave,w=void 0},_.delayedLeave=()=>{F(),delete _.delayedLeave,w=void 0}}:w=void 0}else w&&(w=void 0);return a}}};function tg(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==Bs){t=n;break}}return t}const l_=a_;function ng(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function Yf(e,t,n,r,o){const{appear:a,mode:u,persisted:f=!1,onBeforeEnter:m,onEnter:_,onAfterEnter:w,onEnterCancelled:b,onBeforeLeave:E,onLeave:x,onAfterLeave:F,onLeaveCancelled:N,onBeforeAppear:U,onAppear:j,onAfterAppear:ne,onAppearCancelled:ae}=t,be=String(e.key),ye=ng(n,e),Pe=(Be,Ue)=>{Be&&$o(Be,r,9,Ue)},Ce=(Be,Ue)=>{const q=Ue[1];Pe(Be,Ue),fn(Be)?Be.every(H=>H.length<=1)&&q():Be.length<=1&&q()},de={mode:u,persisted:f,beforeEnter(Be){let Ue=m;if(!n.isMounted)if(a)Ue=U||m;else return;Be[vl]&&Be[vl](!0);const q=ye[be];q&&Gl(e,q)&&q.el[vl]&&q.el[vl](),Pe(Ue,[Be])},enter(Be){let Ue=_,q=w,H=b;if(!n.isMounted)if(a)Ue=j||_,q=ne||w,H=ae||b;else return;let Se=!1;const M=Be[Wc]=Y=>{Se||(Se=!0,Y?Pe(H,[Be]):Pe(q,[Be]),de.delayedLeave&&de.delayedLeave(),Be[Wc]=void 0)};Ue?Ce(Ue,[Be,M]):M()},leave(Be,Ue){const q=String(e.key);if(Be[Wc]&&Be[Wc](!0),n.isUnmounting)return Ue();Pe(E,[Be]);let H=!1;const Se=Be[vl]=M=>{H||(H=!0,Ue(),M?Pe(N,[Be]):Pe(F,[Be]),Be[vl]=void 0,ye[q]===e&&delete ye[q])};ye[q]=e,x?Ce(x,[Be,Se]):Se()},clone(Be){const Ue=Yf(Be,t,n,r,o);return o&&o(Ue),Ue}};return de}function yf(e){if(Fh(e))return e=Cl(e),e.children=null,e}function yp(e){if(!Fh(e))return Xm(e.type)&&e.children?tg(e.children):e;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&En(n.default))return n.default()}}function vc(e,t){e.shapeFlag&6&&e.component?(e.transition=t,vc(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function ig(e,t=!1,n){let r=[],o=0;for(let a=0;a<e.length;a++){let u=e[a];const f=n==null?u.key:String(n)+String(u.key!=null?u.key:a);u.type===gn?(u.patchFlag&128&&o++,r=r.concat(ig(u.children,t,f))):(t||u.type!==Bs)&&r.push(f!=null?Cl(u,{key:f}):u)}if(o>1)for(let a=0;a<r.length;a++)r[a].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function ps(e,t){return En(e)?xr({name:e.name},t,{setup:e}):e}function rg(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function _h(e,t,n,r,o=!1){if(fn(e)){e.forEach((F,N)=>_h(F,t&&(fn(t)?t[N]:t),n,r,o));return}if(ac(r)&&!o){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&_h(e,t,n,r.component.subTree);return}const a=r.shapeFlag&4?Vh(r.component):r.el,u=o?null:a,{i:f,r:m}=e,_=t&&t.r,w=f.refs===ci?f.refs={}:f.refs,b=f.setupState,E=Zn(b),x=b===ci?()=>!1:F=>ii(E,F);if(_!=null&&_!==m&&(Gi(_)?(w[_]=null,x(_)&&(b[_]=null)):Hi(_)&&(_.value=null)),En(m))Ec(m,f,12,[u,w]);else{const F=Gi(m),N=Hi(m);if(F||N){const U=()=>{if(e.f){const j=F?x(m)?b[m]:w[m]:m.value;o?fn(j)&&Td(j,a):fn(j)?j.includes(a)||j.push(a):F?(w[m]=[a],x(m)&&(b[m]=w[m])):(m.value=[a],e.k&&(w[e.k]=m.value))}else F?(w[m]=u,x(m)&&(b[m]=u)):N&&(m.value=u,e.k&&(w[e.k]=u))};u?(U.id=-1,Ws(U,n)):U()}}}Dh().requestIdleCallback;Dh().cancelIdleCallback;const ac=e=>!!e.type.__asyncLoader,Fh=e=>e.type.__isKeepAlive;function u_(e,t){sg(e,"a",t)}function c_(e,t){sg(e,"da",t)}function sg(e,t,n=wr){const r=e.__wdc||(e.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(jh(t,r,n),n){let o=n.parent;for(;o&&o.parent;)Fh(o.parent.vnode)&&h_(r,t,n,o),o=o.parent}}function h_(e,t,n,r){const o=jh(t,e,r,!0);Uh(()=>{Td(r[t],o)},n)}function jh(e,t,n=wr,r=!1){if(n){const o=n[e]||(n[e]=[]),a=t.__weh||(t.__weh=(...u)=>{El();const f=Ac(n),m=$o(t,n,e,u);return f(),Al(),m});return r?o.unshift(a):o.push(a),a}}const Za=e=>(t,n=wr)=>{(!yc||e==="sp")&&jh(e,(...r)=>t(...r),n)},f_=Za("bm"),ba=Za("m"),d_=Za("bu"),p_=Za("u"),zh=Za("bum"),Uh=Za("um"),m_=Za("sp"),g_=Za("rtg"),v_=Za("rtc");function __(e,t=wr){jh("ec",e,t)}const y_="components";function b_(e,t){return x_(y_,e,!0,t)||e}const w_=Symbol.for("v-ndc");function x_(e,t,n=!0,r=!1){const o=hs||wr;if(o){const a=o.type;{const f=cy(a,!1);if(f&&(f===t||f===bo(t)||f===Nh(bo(t))))return a}const u=bp(o[e]||a[e],t)||bp(o.appContext[e],t);return!u&&r?a:u}}function bp(e,t){return e&&(e[t]||e[bo(t)]||e[Nh(bo(t))])}function Un(e,t,n,r){let o;const a=n,u=fn(e);if(u||Gi(e)){const f=u&&Ll(e);let m=!1;f&&(m=!vo(e),e=Rh(e)),o=new Array(e.length);for(let _=0,w=e.length;_<w;_++)o[_]=t(m?Zr(e[_]):e[_],_,void 0,a)}else if(typeof e=="number"){o=new Array(e);for(let f=0;f<e;f++)o[f]=t(f+1,f,void 0,a)}else if(hi(e))if(e[Symbol.iterator])o=Array.from(e,(f,m)=>t(f,m,void 0,a));else{const f=Object.keys(e);o=new Array(f.length);for(let m=0,_=f.length;m<_;m++){const w=f[m];o[m]=t(e[w],w,m,a)}}else o=[];return o}const Xf=e=>e?Pg(e)?Vh(e):Xf(e.parent):null,lc=xr(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Xf(e.parent),$root:e=>Xf(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ag(e),$forceUpdate:e=>e.f||(e.f=()=>{$d(e.update)}),$nextTick:e=>e.n||(e.n=as.bind(e.proxy)),$watch:e=>V_.bind(e)}),bf=(e,t)=>e!==ci&&!e.__isScriptSetup&&ii(e,t),L_={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:o,props:a,accessCache:u,type:f,appContext:m}=e;let _;if(t[0]!=="$"){const x=u[t];if(x!==void 0)switch(x){case 1:return r[t];case 2:return o[t];case 4:return n[t];case 3:return a[t]}else{if(bf(r,t))return u[t]=1,r[t];if(o!==ci&&ii(o,t))return u[t]=2,o[t];if((_=e.propsOptions[0])&&ii(_,t))return u[t]=3,a[t];if(n!==ci&&ii(n,t))return u[t]=4,n[t];Qf&&(u[t]=0)}}const w=lc[t];let b,E;if(w)return t==="$attrs"&&Wr(e.attrs,"get",""),w(e);if((b=f.__cssModules)&&(b=b[t]))return b;if(n!==ci&&ii(n,t))return u[t]=4,n[t];if(E=m.config.globalProperties,ii(E,t))return E[t]},set({_:e},t,n){const{data:r,setupState:o,ctx:a}=e;return bf(o,t)?(o[t]=n,!0):r!==ci&&ii(r,t)?(r[t]=n,!0):ii(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:o,propsOptions:a}},u){let f;return!!n[u]||e!==ci&&ii(e,u)||bf(t,u)||(f=a[0])&&ii(f,u)||ii(r,u)||ii(lc,u)||ii(o.config.globalProperties,u)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:ii(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function wp(e){return fn(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Qf=!0;function C_(e){const t=ag(e),n=e.proxy,r=e.ctx;Qf=!1,t.beforeCreate&&xp(t.beforeCreate,e,"bc");const{data:o,computed:a,methods:u,watch:f,provide:m,inject:_,created:w,beforeMount:b,mounted:E,beforeUpdate:x,updated:F,activated:N,deactivated:U,beforeDestroy:j,beforeUnmount:ne,destroyed:ae,unmounted:be,render:ye,renderTracked:Pe,renderTriggered:Ce,errorCaptured:de,serverPrefetch:Be,expose:Ue,inheritAttrs:q,components:H,directives:Se,filters:M}=t;if(_&&k_(_,r,null),u)for(const re in u){const W=u[re];En(W)&&(r[re]=W.bind(n))}if(o){const re=o.call(n,n);hi(re)&&(e.data=Wa(re))}if(Qf=!0,a)for(const re in a){const W=a[re],Q=En(W)?W.bind(n,n):En(W.get)?W.get.bind(n,n):va,z=!En(W)&&En(W.set)?W.set.bind(n):va,Ie=Nn({get:Q,set:z});Object.defineProperty(r,re,{enumerable:!0,configurable:!0,get:()=>Ie.value,set:I=>Ie.value=I})}if(f)for(const re in f)og(f[re],r,n,re);if(m){const re=En(m)?m.call(n):m;Reflect.ownKeys(re).forEach(W=>{th(W,re[W])})}w&&xp(w,e,"c");function Z(re,W){fn(W)?W.forEach(Q=>re(Q.bind(n))):W&&re(W.bind(n))}if(Z(f_,b),Z(ba,E),Z(d_,x),Z(p_,F),Z(u_,N),Z(c_,U),Z(__,de),Z(v_,Pe),Z(g_,Ce),Z(zh,ne),Z(Uh,be),Z(m_,Be),fn(Ue))if(Ue.length){const re=e.exposed||(e.exposed={});Ue.forEach(W=>{Object.defineProperty(re,W,{get:()=>n[W],set:Q=>n[W]=Q})})}else e.exposed||(e.exposed={});ye&&e.render===va&&(e.render=ye),q!=null&&(e.inheritAttrs=q),H&&(e.components=H),Se&&(e.directives=Se),Be&&rg(e)}function k_(e,t,n=va){fn(e)&&(e=ed(e));for(const r in e){const o=e[r];let a;hi(o)?"default"in o?a=_o(o.from||r,o.default,!0):a=_o(o.from||r):a=_o(o),Hi(a)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:u=>a.value=u}):t[r]=a}}function xp(e,t,n){$o(fn(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function og(e,t,n,r){let o=r.includes(".")?wg(n,r):()=>n[r];if(Gi(e)){const a=t[e];En(a)&&fs(o,a)}else if(En(e))fs(o,e.bind(n));else if(hi(e))if(fn(e))e.forEach(a=>og(a,t,n,r));else{const a=En(e.handler)?e.handler.bind(n):t[e.handler];En(a)&&fs(o,a,e)}}function ag(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:o,optionsCache:a,config:{optionMergeStrategies:u}}=e.appContext,f=a.get(t);let m;return f?m=f:!o.length&&!n&&!r?m=t:(m={},o.length&&o.forEach(_=>yh(m,_,u,!0)),yh(m,t,u)),hi(t)&&a.set(t,m),m}function yh(e,t,n,r=!1){const{mixins:o,extends:a}=t;a&&yh(e,a,n,!0),o&&o.forEach(u=>yh(e,u,n,!0));for(const u in t)if(!(r&&u==="expose")){const f=P_[u]||n&&n[u];e[u]=f?f(e[u],t[u]):t[u]}return e}const P_={data:Lp,props:Cp,emits:Cp,methods:nc,computed:nc,beforeCreate:os,created:os,beforeMount:os,mounted:os,beforeUpdate:os,updated:os,beforeDestroy:os,beforeUnmount:os,destroyed:os,unmounted:os,activated:os,deactivated:os,errorCaptured:os,serverPrefetch:os,components:nc,directives:nc,watch:E_,provide:Lp,inject:S_};function Lp(e,t){return t?e?function(){return xr(En(e)?e.call(this,this):e,En(t)?t.call(this,this):t)}:t:e}function S_(e,t){return nc(ed(e),ed(t))}function ed(e){if(fn(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function os(e,t){return e?[...new Set([].concat(e,t))]:t}function nc(e,t){return e?xr(Object.create(null),e,t):t}function Cp(e,t){return e?fn(e)&&fn(t)?[...new Set([...e,...t])]:xr(Object.create(null),wp(e),wp(t??{})):t}function E_(e,t){if(!e)return t;if(!t)return e;const n=xr(Object.create(null),e);for(const r in t)n[r]=os(e[r],t[r]);return n}function lg(){return{app:null,config:{isNativeTag:dv,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let A_=0;function M_(e,t){return function(r,o=null){En(r)||(r=xr({},r)),o!=null&&!hi(o)&&(o=null);const a=lg(),u=new WeakSet,f=[];let m=!1;const _=a.app={_uid:A_++,_component:r,_props:o,_container:null,_context:a,_instance:null,version:fy,get config(){return a.config},set config(w){},use(w,...b){return u.has(w)||(w&&En(w.install)?(u.add(w),w.install(_,...b)):En(w)&&(u.add(w),w(_,...b))),_},mixin(w){return a.mixins.includes(w)||a.mixins.push(w),_},component(w,b){return b?(a.components[w]=b,_):a.components[w]},directive(w,b){return b?(a.directives[w]=b,_):a.directives[w]},mount(w,b,E){if(!m){const x=_._ceVNode||Pi(r,o);return x.appContext=a,E===!0?E="svg":E===!1&&(E=void 0),e(x,w,E),m=!0,_._container=w,w.__vue_app__=_,Vh(x.component)}},onUnmount(w){f.push(w)},unmount(){m&&($o(f,_._instance,16),e(null,_._container),delete _._container.__vue_app__)},provide(w,b){return a.provides[w]=b,_},runWithContext(w){const b=Ql;Ql=_;try{return w()}finally{Ql=b}}};return _}}let Ql=null;function th(e,t){if(wr){let n=wr.provides;const r=wr.parent&&wr.parent.provides;r===n&&(n=wr.provides=Object.create(r)),n[e]=t}}function _o(e,t,n=!1){const r=wr||hs;if(r||Ql){const o=Ql?Ql._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return n&&En(t)?t.call(r&&r.proxy):t}}function B_(){return!!(wr||hs||Ql)}const ug={},cg=()=>Object.create(ug),hg=e=>Object.getPrototypeOf(e)===ug;function T_(e,t,n,r=!1){const o={},a=cg();e.propsDefaults=Object.create(null),fg(e,t,o,a);for(const u in e.propsOptions[0])u in o||(o[u]=void 0);n?e.props=r?o:$m(o):e.type.props?e.props=o:e.props=a,e.attrs=a}function N_(e,t,n,r){const{props:o,attrs:a,vnode:{patchFlag:u}}=e,f=Zn(o),[m]=e.propsOptions;let _=!1;if((r||u>0)&&!(u&16)){if(u&8){const w=e.vnode.dynamicProps;for(let b=0;b<w.length;b++){let E=w[b];if(qh(e.emitsOptions,E))continue;const x=t[E];if(m)if(ii(a,E))x!==a[E]&&(a[E]=x,_=!0);else{const F=bo(E);o[F]=td(m,f,F,x,e,!1)}else x!==a[E]&&(a[E]=x,_=!0)}}}else{fg(e,t,o,a)&&(_=!0);let w;for(const b in f)(!t||!ii(t,b)&&((w=su(b))===b||!ii(t,w)))&&(m?n&&(n[b]!==void 0||n[w]!==void 0)&&(o[b]=td(m,f,b,void 0,e,!0)):delete o[b]);if(a!==f)for(const b in a)(!t||!ii(t,b))&&(delete a[b],_=!0)}_&&$a(e.attrs,"set","")}function fg(e,t,n,r){const[o,a]=e.propsOptions;let u=!1,f;if(t)for(let m in t){if(rc(m))continue;const _=t[m];let w;o&&ii(o,w=bo(m))?!a||!a.includes(w)?n[w]=_:(f||(f={}))[w]=_:qh(e.emitsOptions,m)||(!(m in r)||_!==r[m])&&(r[m]=_,u=!0)}if(a){const m=Zn(n),_=f||ci;for(let w=0;w<a.length;w++){const b=a[w];n[b]=td(o,m,b,_[b],e,!ii(_,b))}}return u}function td(e,t,n,r,o,a){const u=e[n];if(u!=null){const f=ii(u,"default");if(f&&r===void 0){const m=u.default;if(u.type!==Function&&!u.skipFactory&&En(m)){const{propsDefaults:_}=o;if(n in _)r=_[n];else{const w=Ac(o);r=_[n]=m.call(null,t),w()}}else r=m;o.ce&&o.ce._setProp(n,r)}u[0]&&(a&&!f?r=!1:u[1]&&(r===""||r===su(n))&&(r=!0))}return r}const D_=new WeakMap;function dg(e,t,n=!1){const r=n?D_:t.propsCache,o=r.get(e);if(o)return o;const a=e.props,u={},f=[];let m=!1;if(!En(e)){const w=b=>{m=!0;const[E,x]=dg(b,t,!0);xr(u,E),x&&f.push(...x)};!n&&t.mixins.length&&t.mixins.forEach(w),e.extends&&w(e.extends),e.mixins&&e.mixins.forEach(w)}if(!a&&!m)return hi(e)&&r.set(e,Pu),Pu;if(fn(a))for(let w=0;w<a.length;w++){const b=bo(a[w]);kp(b)&&(u[b]=ci)}else if(a)for(const w in a){const b=bo(w);if(kp(b)){const E=a[w],x=u[b]=fn(E)||En(E)?{type:E}:xr({},E),F=x.type;let N=!1,U=!0;if(fn(F))for(let j=0;j<F.length;++j){const ne=F[j],ae=En(ne)&&ne.name;if(ae==="Boolean"){N=!0;break}else ae==="String"&&(U=!1)}else N=En(F)&&F.name==="Boolean";x[0]=N,x[1]=U,(N||ii(x,"default"))&&f.push(b)}}const _=[u,f];return hi(e)&&r.set(e,_),_}function kp(e){return e[0]!=="$"&&!rc(e)}const pg=e=>e[0]==="_"||e==="$stable",Vd=e=>fn(e)?e.map(pa):[pa(e)],O_=(e,t,n)=>{if(t._n)return t;const r=Ha((...o)=>Vd(t(...o)),n);return r._c=!1,r},mg=(e,t,n)=>{const r=e._ctx;for(const o in e){if(pg(o))continue;const a=e[o];if(En(a))t[o]=O_(o,a,r);else if(a!=null){const u=Vd(a);t[o]=()=>u}}},gg=(e,t)=>{const n=Vd(t);e.slots.default=()=>n},vg=(e,t,n)=>{for(const r in t)(n||r!=="_")&&(e[r]=t[r])},R_=(e,t,n)=>{const r=e.slots=cg();if(e.vnode.shapeFlag&32){const o=t._;o?(vg(r,t,n),n&&xm(r,"_",o,!0)):mg(t,r)}else t&&gg(e,t)},I_=(e,t,n)=>{const{vnode:r,slots:o}=e;let a=!0,u=ci;if(r.shapeFlag&32){const f=t._;f?n&&f===1?a=!1:vg(o,t,n):(a=!t.$stable,mg(t,o)),u=t}else t&&(gg(e,t),u={default:1});if(a)for(const f in o)!pg(f)&&u[f]==null&&delete o[f]},Ws=Y_;function F_(e){return j_(e)}function j_(e,t){const n=Dh();n.__VUE__=!0;const{insert:r,remove:o,patchProp:a,createElement:u,createText:f,createComment:m,setText:_,setElementText:w,parentNode:b,nextSibling:E,setScopeId:x=va,insertStaticContent:F}=e,N=(X,se,Te,Ee=null,ie=null,We=null,et=void 0,Xe=null,De=!!se.dynamicChildren)=>{if(X===se)return;X&&!Gl(X,se)&&(Ee=le(X),I(X,ie,We,!0),X=null),se.patchFlag===-2&&(De=!1,se.dynamicChildren=null);const{type:ke,ref:lt,shapeFlag:ht}=se;switch(ke){case $h:U(X,se,Te,Ee);break;case Bs:j(X,se,Te,Ee);break;case nh:X==null&&ne(se,Te,Ee,et);break;case gn:H(X,se,Te,Ee,ie,We,et,Xe,De);break;default:ht&1?ye(X,se,Te,Ee,ie,We,et,Xe,De):ht&6?Se(X,se,Te,Ee,ie,We,et,Xe,De):(ht&64||ht&128)&&ke.process(X,se,Te,Ee,ie,We,et,Xe,De,je)}lt!=null&&ie&&_h(lt,X&&X.ref,We,se||X,!se)},U=(X,se,Te,Ee)=>{if(X==null)r(se.el=f(se.children),Te,Ee);else{const ie=se.el=X.el;se.children!==X.children&&_(ie,se.children)}},j=(X,se,Te,Ee)=>{X==null?r(se.el=m(se.children||""),Te,Ee):se.el=X.el},ne=(X,se,Te,Ee)=>{[X.el,X.anchor]=F(X.children,se,Te,Ee,X.el,X.anchor)},ae=({el:X,anchor:se},Te,Ee)=>{let ie;for(;X&&X!==se;)ie=E(X),r(X,Te,Ee),X=ie;r(se,Te,Ee)},be=({el:X,anchor:se})=>{let Te;for(;X&&X!==se;)Te=E(X),o(X),X=Te;o(se)},ye=(X,se,Te,Ee,ie,We,et,Xe,De)=>{se.type==="svg"?et="svg":se.type==="math"&&(et="mathml"),X==null?Pe(se,Te,Ee,ie,We,et,Xe,De):Be(X,se,ie,We,et,Xe,De)},Pe=(X,se,Te,Ee,ie,We,et,Xe)=>{let De,ke;const{props:lt,shapeFlag:ht,transition:it,dirs:Fe}=X;if(De=X.el=u(X.type,We,lt&&lt.is,lt),ht&8?w(De,X.children):ht&16&&de(X.children,De,null,Ee,ie,wf(X,We),et,Xe),Fe&&jl(X,null,Ee,"created"),Ce(De,X,X.scopeId,et,Ee),lt){for(const Ft in lt)Ft!=="value"&&!rc(Ft)&&a(De,Ft,null,lt[Ft],We,Ee);"value"in lt&&a(De,"value",null,lt.value,We),(ke=lt.onVnodeBeforeMount)&&ca(ke,Ee,X)}Fe&&jl(X,null,Ee,"beforeMount");const Pt=z_(ie,it);Pt&&it.beforeEnter(De),r(De,se,Te),((ke=lt&&lt.onVnodeMounted)||Pt||Fe)&&Ws(()=>{ke&&ca(ke,Ee,X),Pt&&it.enter(De),Fe&&jl(X,null,Ee,"mounted")},ie)},Ce=(X,se,Te,Ee,ie)=>{if(Te&&x(X,Te),Ee)for(let We=0;We<Ee.length;We++)x(X,Ee[We]);if(ie){let We=ie.subTree;if(se===We||Lg(We.type)&&(We.ssContent===se||We.ssFallback===se)){const et=ie.vnode;Ce(X,et,et.scopeId,et.slotScopeIds,ie.parent)}}},de=(X,se,Te,Ee,ie,We,et,Xe,De=0)=>{for(let ke=De;ke<X.length;ke++){const lt=X[ke]=Xe?_l(X[ke]):pa(X[ke]);N(null,lt,se,Te,Ee,ie,We,et,Xe)}},Be=(X,se,Te,Ee,ie,We,et)=>{const Xe=se.el=X.el;let{patchFlag:De,dynamicChildren:ke,dirs:lt}=se;De|=X.patchFlag&16;const ht=X.props||ci,it=se.props||ci;let Fe;if(Te&&zl(Te,!1),(Fe=it.onVnodeBeforeUpdate)&&ca(Fe,Te,se,X),lt&&jl(se,X,Te,"beforeUpdate"),Te&&zl(Te,!0),(ht.innerHTML&&it.innerHTML==null||ht.textContent&&it.textContent==null)&&w(Xe,""),ke?Ue(X.dynamicChildren,ke,Xe,Te,Ee,wf(se,ie),We):et||W(X,se,Xe,null,Te,Ee,wf(se,ie),We,!1),De>0){if(De&16)q(Xe,ht,it,Te,ie);else if(De&2&&ht.class!==it.class&&a(Xe,"class",null,it.class,ie),De&4&&a(Xe,"style",ht.style,it.style,ie),De&8){const Pt=se.dynamicProps;for(let Ft=0;Ft<Pt.length;Ft++){const Wt=Pt[Ft],Ut=ht[Wt],Xt=it[Wt];(Xt!==Ut||Wt==="value")&&a(Xe,Wt,Ut,Xt,ie,Te)}}De&1&&X.children!==se.children&&w(Xe,se.children)}else!et&&ke==null&&q(Xe,ht,it,Te,ie);((Fe=it.onVnodeUpdated)||lt)&&Ws(()=>{Fe&&ca(Fe,Te,se,X),lt&&jl(se,X,Te,"updated")},Ee)},Ue=(X,se,Te,Ee,ie,We,et)=>{for(let Xe=0;Xe<se.length;Xe++){const De=X[Xe],ke=se[Xe],lt=De.el&&(De.type===gn||!Gl(De,ke)||De.shapeFlag&70)?b(De.el):Te;N(De,ke,lt,null,Ee,ie,We,et,!0)}},q=(X,se,Te,Ee,ie)=>{if(se!==Te){if(se!==ci)for(const We in se)!rc(We)&&!(We in Te)&&a(X,We,se[We],null,ie,Ee);for(const We in Te){if(rc(We))continue;const et=Te[We],Xe=se[We];et!==Xe&&We!=="value"&&a(X,We,Xe,et,ie,Ee)}"value"in Te&&a(X,"value",se.value,Te.value,ie)}},H=(X,se,Te,Ee,ie,We,et,Xe,De)=>{const ke=se.el=X?X.el:f(""),lt=se.anchor=X?X.anchor:f("");let{patchFlag:ht,dynamicChildren:it,slotScopeIds:Fe}=se;Fe&&(Xe=Xe?Xe.concat(Fe):Fe),X==null?(r(ke,Te,Ee),r(lt,Te,Ee),de(se.children||[],Te,lt,ie,We,et,Xe,De)):ht>0&&ht&64&&it&&X.dynamicChildren?(Ue(X.dynamicChildren,it,Te,ie,We,et,Xe),(se.key!=null||ie&&se===ie.subTree)&&_g(X,se,!0)):W(X,se,Te,lt,ie,We,et,Xe,De)},Se=(X,se,Te,Ee,ie,We,et,Xe,De)=>{se.slotScopeIds=Xe,X==null?se.shapeFlag&512?ie.ctx.activate(se,Te,Ee,et,De):M(se,Te,Ee,ie,We,et,De):Y(X,se,De)},M=(X,se,Te,Ee,ie,We,et)=>{const Xe=X.component=ry(X,Ee,ie);if(Fh(X)&&(Xe.ctx.renderer=je),oy(Xe,!1,et),Xe.asyncDep){if(ie&&ie.registerDep(Xe,Z,et),!X.el){const De=Xe.subTree=Pi(Bs);j(null,De,se,Te)}}else Z(Xe,X,se,Te,ie,We,et)},Y=(X,se,Te)=>{const Ee=se.component=X.component;if(K_(X,se,Te))if(Ee.asyncDep&&!Ee.asyncResolved){re(Ee,se,Te);return}else Ee.next=se,Ee.update();else se.el=X.el,Ee.vnode=se},Z=(X,se,Te,Ee,ie,We,et)=>{const Xe=()=>{if(X.isMounted){let{next:ht,bu:it,u:Fe,parent:Pt,vnode:Ft}=X;{const on=yg(X);if(on){ht&&(ht.el=Ft.el,re(X,ht,et)),on.asyncDep.then(()=>{X.isUnmounted||Xe()});return}}let Wt=ht,Ut;zl(X,!1),ht?(ht.el=Ft.el,re(X,ht,et)):ht=Ft,it&&eh(it),(Ut=ht.props&&ht.props.onVnodeBeforeUpdate)&&ca(Ut,Pt,ht,Ft),zl(X,!0);const Xt=Sp(X),Rt=X.subTree;X.subTree=Xt,N(Rt,Xt,b(Rt.el),le(Rt),X,ie,We),ht.el=Xt.el,Wt===null&&J_(X,Xt.el),Fe&&Ws(Fe,ie),(Ut=ht.props&&ht.props.onVnodeUpdated)&&Ws(()=>ca(Ut,Pt,ht,Ft),ie)}else{let ht;const{el:it,props:Fe}=se,{bm:Pt,m:Ft,parent:Wt,root:Ut,type:Xt}=X,Rt=ac(se);zl(X,!1),Pt&&eh(Pt),!Rt&&(ht=Fe&&Fe.onVnodeBeforeMount)&&ca(ht,Wt,se),zl(X,!0);{Ut.ce&&Ut.ce._injectChildStyle(Xt);const on=X.subTree=Sp(X);N(null,on,Te,Ee,X,ie,We),se.el=on.el}if(Ft&&Ws(Ft,ie),!Rt&&(ht=Fe&&Fe.onVnodeMounted)){const on=se;Ws(()=>ca(ht,Wt,on),ie)}(se.shapeFlag&256||Wt&&ac(Wt.vnode)&&Wt.vnode.shapeFlag&256)&&X.a&&Ws(X.a,ie),X.isMounted=!0,se=Te=Ee=null}};X.scope.on();const De=X.effect=new Am(Xe);X.scope.off();const ke=X.update=De.run.bind(De),lt=X.job=De.runIfDirty.bind(De);lt.i=X,lt.id=X.uid,De.scheduler=()=>$d(lt),zl(X,!0),ke()},re=(X,se,Te)=>{se.component=X;const Ee=X.vnode.props;X.vnode=se,X.next=null,N_(X,se.props,Ee,Te),I_(X,se.children,Te),El(),_p(X),Al()},W=(X,se,Te,Ee,ie,We,et,Xe,De=!1)=>{const ke=X&&X.children,lt=X?X.shapeFlag:0,ht=se.children,{patchFlag:it,shapeFlag:Fe}=se;if(it>0){if(it&128){z(ke,ht,Te,Ee,ie,We,et,Xe,De);return}else if(it&256){Q(ke,ht,Te,Ee,ie,We,et,Xe,De);return}}Fe&8?(lt&16&&J(ke,ie,We),ht!==ke&&w(Te,ht)):lt&16?Fe&16?z(ke,ht,Te,Ee,ie,We,et,Xe,De):J(ke,ie,We,!0):(lt&8&&w(Te,""),Fe&16&&de(ht,Te,Ee,ie,We,et,Xe,De))},Q=(X,se,Te,Ee,ie,We,et,Xe,De)=>{X=X||Pu,se=se||Pu;const ke=X.length,lt=se.length,ht=Math.min(ke,lt);let it;for(it=0;it<ht;it++){const Fe=se[it]=De?_l(se[it]):pa(se[it]);N(X[it],Fe,Te,null,ie,We,et,Xe,De)}ke>lt?J(X,ie,We,!0,!1,ht):de(se,Te,Ee,ie,We,et,Xe,De,ht)},z=(X,se,Te,Ee,ie,We,et,Xe,De)=>{let ke=0;const lt=se.length;let ht=X.length-1,it=lt-1;for(;ke<=ht&&ke<=it;){const Fe=X[ke],Pt=se[ke]=De?_l(se[ke]):pa(se[ke]);if(Gl(Fe,Pt))N(Fe,Pt,Te,null,ie,We,et,Xe,De);else break;ke++}for(;ke<=ht&&ke<=it;){const Fe=X[ht],Pt=se[it]=De?_l(se[it]):pa(se[it]);if(Gl(Fe,Pt))N(Fe,Pt,Te,null,ie,We,et,Xe,De);else break;ht--,it--}if(ke>ht){if(ke<=it){const Fe=it+1,Pt=Fe<lt?se[Fe].el:Ee;for(;ke<=it;)N(null,se[ke]=De?_l(se[ke]):pa(se[ke]),Te,Pt,ie,We,et,Xe,De),ke++}}else if(ke>it)for(;ke<=ht;)I(X[ke],ie,We,!0),ke++;else{const Fe=ke,Pt=ke,Ft=new Map;for(ke=Pt;ke<=it;ke++){const Ct=se[ke]=De?_l(se[ke]):pa(se[ke]);Ct.key!=null&&Ft.set(Ct.key,ke)}let Wt,Ut=0;const Xt=it-Pt+1;let Rt=!1,on=0;const dn=new Array(Xt);for(ke=0;ke<Xt;ke++)dn[ke]=0;for(ke=Fe;ke<=ht;ke++){const Ct=X[ke];if(Ut>=Xt){I(Ct,ie,We,!0);continue}let nn;if(Ct.key!=null)nn=Ft.get(Ct.key);else for(Wt=Pt;Wt<=it;Wt++)if(dn[Wt-Pt]===0&&Gl(Ct,se[Wt])){nn=Wt;break}nn===void 0?I(Ct,ie,We,!0):(dn[nn-Pt]=ke+1,nn>=on?on=nn:Rt=!0,N(Ct,se[nn],Te,null,ie,We,et,Xe,De),Ut++)}const ai=Rt?U_(dn):Pu;for(Wt=ai.length-1,ke=Xt-1;ke>=0;ke--){const Ct=Pt+ke,nn=se[Ct],Vt=Ct+1<lt?se[Ct+1].el:Ee;dn[ke]===0?N(null,nn,Te,Vt,ie,We,et,Xe,De):Rt&&(Wt<0||ke!==ai[Wt]?Ie(nn,Te,Vt,2):Wt--)}}},Ie=(X,se,Te,Ee,ie=null)=>{const{el:We,type:et,transition:Xe,children:De,shapeFlag:ke}=X;if(ke&6){Ie(X.component.subTree,se,Te,Ee);return}if(ke&128){X.suspense.move(se,Te,Ee);return}if(ke&64){et.move(X,se,Te,je);return}if(et===gn){r(We,se,Te);for(let ht=0;ht<De.length;ht++)Ie(De[ht],se,Te,Ee);r(X.anchor,se,Te);return}if(et===nh){ae(X,se,Te);return}if(Ee!==2&&ke&1&&Xe)if(Ee===0)Xe.beforeEnter(We),r(We,se,Te),Ws(()=>Xe.enter(We),ie);else{const{leave:ht,delayLeave:it,afterLeave:Fe}=Xe,Pt=()=>r(We,se,Te),Ft=()=>{ht(We,()=>{Pt(),Fe&&Fe()})};it?it(We,Pt,Ft):Ft()}else r(We,se,Te)},I=(X,se,Te,Ee=!1,ie=!1)=>{const{type:We,props:et,ref:Xe,children:De,dynamicChildren:ke,shapeFlag:lt,patchFlag:ht,dirs:it,cacheIndex:Fe}=X;if(ht===-2&&(ie=!1),Xe!=null&&_h(Xe,null,Te,X,!0),Fe!=null&&(se.renderCache[Fe]=void 0),lt&256){se.ctx.deactivate(X);return}const Pt=lt&1&&it,Ft=!ac(X);let Wt;if(Ft&&(Wt=et&&et.onVnodeBeforeUnmount)&&ca(Wt,se,X),lt&6)D(X.component,Te,Ee);else{if(lt&128){X.suspense.unmount(Te,Ee);return}Pt&&jl(X,null,se,"beforeUnmount"),lt&64?X.type.remove(X,se,Te,je,Ee):ke&&!ke.hasOnce&&(We!==gn||ht>0&&ht&64)?J(ke,se,Te,!1,!0):(We===gn&&ht&384||!ie&&lt&16)&&J(De,se,Te),Ee&&G(X)}(Ft&&(Wt=et&&et.onVnodeUnmounted)||Pt)&&Ws(()=>{Wt&&ca(Wt,se,X),Pt&&jl(X,null,se,"unmounted")},Te)},G=X=>{const{type:se,el:Te,anchor:Ee,transition:ie}=X;if(se===gn){$(Te,Ee);return}if(se===nh){be(X);return}const We=()=>{o(Te),ie&&!ie.persisted&&ie.afterLeave&&ie.afterLeave()};if(X.shapeFlag&1&&ie&&!ie.persisted){const{leave:et,delayLeave:Xe}=ie,De=()=>et(Te,We);Xe?Xe(X.el,We,De):De()}else We()},$=(X,se)=>{let Te;for(;X!==se;)Te=E(X),o(X),X=Te;o(se)},D=(X,se,Te)=>{const{bum:Ee,scope:ie,job:We,subTree:et,um:Xe,m:De,a:ke}=X;Pp(De),Pp(ke),Ee&&eh(Ee),ie.stop(),We&&(We.flags|=8,I(et,X,se,Te)),Xe&&Ws(Xe,se),Ws(()=>{X.isUnmounted=!0},se),se&&se.pendingBranch&&!se.isUnmounted&&X.asyncDep&&!X.asyncResolved&&X.suspenseId===se.pendingId&&(se.deps--,se.deps===0&&se.resolve())},J=(X,se,Te,Ee=!1,ie=!1,We=0)=>{for(let et=We;et<X.length;et++)I(X[et],se,Te,Ee,ie)},le=X=>{if(X.shapeFlag&6)return le(X.component.subTree);if(X.shapeFlag&128)return X.suspense.next();const se=E(X.anchor||X.el),Te=se&&se[s_];return Te?E(Te):se};let ge=!1;const me=(X,se,Te)=>{X==null?se._vnode&&I(se._vnode,null,null,!0):N(se._vnode||null,X,se,null,null,null,Te),se._vnode=X,ge||(ge=!0,_p(),Km(),ge=!1)},je={p:N,um:I,m:Ie,r:G,mt:M,mc:de,pc:W,pbc:Ue,n:le,o:e};return{render:me,hydrate:void 0,createApp:M_(me)}}function wf({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function zl({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function z_(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function _g(e,t,n=!1){const r=e.children,o=t.children;if(fn(r)&&fn(o))for(let a=0;a<r.length;a++){const u=r[a];let f=o[a];f.shapeFlag&1&&!f.dynamicChildren&&((f.patchFlag<=0||f.patchFlag===32)&&(f=o[a]=_l(o[a]),f.el=u.el),!n&&f.patchFlag!==-2&&_g(u,f)),f.type===$h&&(f.el=u.el)}}function U_(e){const t=e.slice(),n=[0];let r,o,a,u,f;const m=e.length;for(r=0;r<m;r++){const _=e[r];if(_!==0){if(o=n[n.length-1],e[o]<_){t[r]=o,n.push(r);continue}for(a=0,u=n.length-1;a<u;)f=a+u>>1,e[n[f]]<_?a=f+1:u=f;_<e[n[a]]&&(a>0&&(t[r]=n[a-1]),n[a]=r)}}for(a=n.length,u=n[a-1];a-- >0;)n[a]=u,u=t[u];return n}function yg(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:yg(t)}function Pp(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const q_=Symbol.for("v-scx"),$_=()=>_o(q_);function fs(e,t,n){return bg(e,t,n)}function bg(e,t,n=ci){const{immediate:r,deep:o,flush:a,once:u}=n,f=xr({},n),m=t&&r||!t&&a!=="post";let _;if(yc){if(a==="sync"){const x=$_();_=x.__watcherHandles||(x.__watcherHandles=[])}else if(!m){const x=()=>{};return x.stop=va,x.resume=va,x.pause=va,x}}const w=wr;f.call=(x,F,N)=>$o(x,w,F,N);let b=!1;a==="post"?f.scheduler=x=>{Ws(x,w&&w.suspense)}:a!=="sync"&&(b=!0,f.scheduler=(x,F)=>{F?x():$d(x)}),f.augmentJob=x=>{t&&(x.flags|=4),b&&(x.flags|=2,w&&(x.id=w.uid,x.i=w))};const E=t_(e,t,f);return yc&&(_?_.push(E):m&&E()),E}function V_(e,t,n){const r=this.proxy,o=Gi(e)?e.includes(".")?wg(r,e):()=>r[e]:e.bind(r,r);let a;En(t)?a=t:(a=t.handler,n=t);const u=Ac(this),f=bg(o,a.bind(r),n);return u(),f}function wg(e,t){const n=t.split(".");return()=>{let r=e;for(let o=0;o<n.length&&r;o++)r=r[n[o]];return r}}const H_=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${bo(t)}Modifiers`]||e[`${su(t)}Modifiers`];function G_(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||ci;let o=n;const a=t.startsWith("update:"),u=a&&H_(r,t.slice(7));u&&(u.trim&&(o=n.map(w=>Gi(w)?w.trim():w)),u.number&&(o=n.map(dh)));let f,m=r[f=pf(t)]||r[f=pf(bo(t))];!m&&a&&(m=r[f=pf(su(t))]),m&&$o(m,e,6,o);const _=r[f+"Once"];if(_){if(!e.emitted)e.emitted={};else if(e.emitted[f])return;e.emitted[f]=!0,$o(_,e,6,o)}}function xg(e,t,n=!1){const r=t.emitsCache,o=r.get(e);if(o!==void 0)return o;const a=e.emits;let u={},f=!1;if(!En(e)){const m=_=>{const w=xg(_,t,!0);w&&(f=!0,xr(u,w))};!n&&t.mixins.length&&t.mixins.forEach(m),e.extends&&m(e.extends),e.mixins&&e.mixins.forEach(m)}return!a&&!f?(hi(e)&&r.set(e,null),null):(fn(a)?a.forEach(m=>u[m]=null):xr(u,a),hi(e)&&r.set(e,u),u)}function qh(e,t){return!e||!Bh(t)?!1:(t=t.slice(2).replace(/Once$/,""),ii(e,t[0].toLowerCase()+t.slice(1))||ii(e,su(t))||ii(e,t))}function Sp(e){const{type:t,vnode:n,proxy:r,withProxy:o,propsOptions:[a],slots:u,attrs:f,emit:m,render:_,renderCache:w,props:b,data:E,setupState:x,ctx:F,inheritAttrs:N}=e,U=vh(e);let j,ne;try{if(n.shapeFlag&4){const be=o||r,ye=be;j=pa(_.call(ye,be,w,b,x,E,F)),ne=f}else{const be=t;j=pa(be.length>1?be(b,{attrs:f,slots:u,emit:m}):be(b,null)),ne=t.props?f:W_(f)}}catch(be){uc.length=0,Ih(be,e,1),j=Pi(Bs)}let ae=j;if(ne&&N!==!1){const be=Object.keys(ne),{shapeFlag:ye}=ae;be.length&&ye&7&&(a&&be.some(Bd)&&(ne=Z_(ne,a)),ae=Cl(ae,ne,!1,!0))}return n.dirs&&(ae=Cl(ae,null,!1,!0),ae.dirs=ae.dirs?ae.dirs.concat(n.dirs):n.dirs),n.transition&&vc(ae,n.transition),j=ae,vh(U),j}const W_=e=>{let t;for(const n in e)(n==="class"||n==="style"||Bh(n))&&((t||(t={}))[n]=e[n]);return t},Z_=(e,t)=>{const n={};for(const r in e)(!Bd(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function K_(e,t,n){const{props:r,children:o,component:a}=e,{props:u,children:f,patchFlag:m}=t,_=a.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&m>=0){if(m&1024)return!0;if(m&16)return r?Ep(r,u,_):!!u;if(m&8){const w=t.dynamicProps;for(let b=0;b<w.length;b++){const E=w[b];if(u[E]!==r[E]&&!qh(_,E))return!0}}}else return(o||f)&&(!f||!f.$stable)?!0:r===u?!1:r?u?Ep(r,u,_):!0:!!u;return!1}function Ep(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let o=0;o<r.length;o++){const a=r[o];if(t[a]!==e[a]&&!qh(n,a))return!0}return!1}function J_({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const Lg=e=>e.__isSuspense;function Y_(e,t){t&&t.pendingBranch?fn(e)?t.effects.push(...e):t.effects.push(e):r_(e)}const gn=Symbol.for("v-fgt"),$h=Symbol.for("v-txt"),Bs=Symbol.for("v-cmt"),nh=Symbol.for("v-stc"),uc=[];let Zs=null;function nt(e=!1){uc.push(Zs=e?null:[])}function X_(){uc.pop(),Zs=uc[uc.length-1]||null}let _c=1;function Ap(e,t=!1){_c+=e,e<0&&Zs&&t&&(Zs.hasOnce=!0)}function Cg(e){return e.dynamicChildren=_c>0?Zs||Pu:null,X_(),_c>0&&Zs&&Zs.push(e),e}function at(e,t,n,r,o,a){return Cg(A(e,t,n,r,o,a,!0))}function ma(e,t,n,r,o){return Cg(Pi(e,t,n,r,o,!0))}function bh(e){return e?e.__v_isVNode===!0:!1}function Gl(e,t){return e.type===t.type&&e.key===t.key}const kg=({key:e})=>e??null,ih=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Gi(e)||Hi(e)||En(e)?{i:hs,r:e,k:t,f:!!n}:e:null);function A(e,t=null,n=null,r=0,o=null,a=e===gn?0:1,u=!1,f=!1){const m={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&kg(t),ref:t&&ih(t),scopeId:Ym,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:hs};return f?(Hd(m,n),a&128&&e.normalize(m)):n&&(m.shapeFlag|=Gi(n)?8:16),_c>0&&!u&&Zs&&(m.patchFlag>0||a&6)&&m.patchFlag!==32&&Zs.push(m),m}const Pi=Q_;function Q_(e,t=null,n=null,r=0,o=null,a=!1){if((!e||e===w_)&&(e=Bs),bh(e)){const f=Cl(e,t,!0);return n&&Hd(f,n),_c>0&&!a&&Zs&&(f.shapeFlag&6?Zs[Zs.indexOf(e)]=f:Zs.push(f)),f.patchFlag=-2,f}if(hy(e)&&(e=e.__vccOpts),t){t=ey(t);let{class:f,style:m}=t;f&&!Gi(f)&&(t.class=Ni(f)),hi(m)&&(Ud(m)&&!fn(m)&&(m=xr({},m)),t.style=Oh(m))}const u=Gi(e)?1:Lg(e)?128:Xm(e)?64:hi(e)?4:En(e)?2:0;return A(e,t,n,r,o,u,a,!0)}function ey(e){return e?Ud(e)||hg(e)?xr({},e):e:null}function Cl(e,t,n=!1,r=!1){const{props:o,ref:a,patchFlag:u,children:f,transition:m}=e,_=t?ty(o||{},t):o,w={__v_isVNode:!0,__v_skip:!0,type:e.type,props:_,key:_&&kg(_),ref:t&&t.ref?n&&a?fn(a)?a.concat(ih(t)):[a,ih(t)]:ih(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:f,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==gn?u===-1?16:u|16:u,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:m,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Cl(e.ssContent),ssFallback:e.ssFallback&&Cl(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return m&&r&&vc(w,m.clone(w)),w}function ki(e=" ",t=0){return Pi($h,null,e,t)}function Au(e,t){const n=Pi(nh,null,e);return n.staticCount=t,n}function tn(e="",t=!1){return t?(nt(),ma(Bs,null,e)):Pi(Bs,null,e)}function pa(e){return e==null||typeof e=="boolean"?Pi(Bs):fn(e)?Pi(gn,null,e.slice()):bh(e)?_l(e):Pi($h,null,String(e))}function _l(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Cl(e)}function Hd(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(fn(t))n=16;else if(typeof t=="object")if(r&65){const o=t.default;o&&(o._c&&(o._d=!1),Hd(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!hg(t)?t._ctx=hs:o===3&&hs&&(hs.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else En(t)?(t={default:t,_ctx:hs},n=32):(t=String(t),r&64?(n=16,t=[ki(t)]):n=8);e.children=t,e.shapeFlag|=n}function ty(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const o in r)if(o==="class")t.class!==r.class&&(t.class=Ni([t.class,r.class]));else if(o==="style")t.style=Oh([t.style,r.style]);else if(Bh(o)){const a=t[o],u=r[o];u&&a!==u&&!(fn(a)&&a.includes(u))&&(t[o]=a?[].concat(a,u):u)}else o!==""&&(t[o]=r[o])}return t}function ca(e,t,n,r=null){$o(e,t,7,[n,r])}const ny=lg();let iy=0;function ry(e,t,n){const r=e.type,o=(t?t.appContext:e.appContext)||ny,a={uid:iy++,vnode:e,type:r,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Pm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:dg(r,o),emitsOptions:xg(r,o),emit:null,emitted:null,propsDefaults:ci,inheritAttrs:r.inheritAttrs,ctx:ci,data:ci,props:ci,attrs:ci,slots:ci,refs:ci,setupState:ci,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=G_.bind(null,a),e.ce&&e.ce(a),a}let wr=null;const sy=()=>wr||hs;let wh,nd;{const e=Dh(),t=(n,r)=>{let o;return(o=e[n])||(o=e[n]=[]),o.push(r),a=>{o.length>1?o.forEach(u=>u(a)):o[0](a)}};wh=t("__VUE_INSTANCE_SETTERS__",n=>wr=n),nd=t("__VUE_SSR_SETTERS__",n=>yc=n)}const Ac=e=>{const t=wr;return wh(e),e.scope.on(),()=>{e.scope.off(),wh(t)}},Mp=()=>{wr&&wr.scope.off(),wh(null)};function Pg(e){return e.vnode.shapeFlag&4}let yc=!1;function oy(e,t=!1,n=!1){t&&nd(t);const{props:r,children:o}=e.vnode,a=Pg(e);T_(e,r,a,t),R_(e,o,n);const u=a?ay(e,t):void 0;return t&&nd(!1),u}function ay(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,L_);const{setup:r}=n;if(r){El();const o=e.setupContext=r.length>1?uy(e):null,a=Ac(e),u=Ec(r,e,0,[e.props,o]),f=ym(u);if(Al(),a(),(f||e.sp)&&!ac(e)&&rg(e),f){if(u.then(Mp,Mp),t)return u.then(m=>{Bp(e,m)}).catch(m=>{Ih(m,e,0)});e.asyncDep=u}else Bp(e,u)}else Sg(e)}function Bp(e,t,n){En(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:hi(t)&&(e.setupState=Gm(t)),Sg(e)}function Sg(e,t,n){const r=e.type;e.render||(e.render=r.render||va);{const o=Ac(e);El();try{C_(e)}finally{Al(),o()}}}const ly={get(e,t){return Wr(e,"get",""),e[t]}};function uy(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,ly),slots:e.slots,emit:e.emit,expose:t}}function Vh(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Gm(qd(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in lc)return lc[n](e)},has(t,n){return n in t||n in lc}})):e.proxy}function cy(e,t=!0){return En(e)?e.displayName||e.name:e.name||t&&e.__name}function hy(e){return En(e)&&"__vccOpts"in e}const Nn=(e,t)=>Qv(e,t,yc);function Gd(e,t,n){const r=arguments.length;return r===2?hi(t)&&!fn(t)?bh(t)?Pi(e,null,[t]):Pi(e,t):Pi(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&bh(n)&&(n=[n]),Pi(e,t,n))}const fy="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let id;const Tp=typeof window<"u"&&window.trustedTypes;if(Tp)try{id=Tp.createPolicy("vue",{createHTML:e=>e})}catch{}const Eg=id?e=>id.createHTML(e):e=>e,dy="http://www.w3.org/2000/svg",py="http://www.w3.org/1998/Math/MathML",qa=typeof document<"u"?document:null,Np=qa&&qa.createElement("template"),my={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const o=t==="svg"?qa.createElementNS(dy,e):t==="mathml"?qa.createElementNS(py,e):n?qa.createElement(e,{is:n}):qa.createElement(e);return e==="select"&&r&&r.multiple!=null&&o.setAttribute("multiple",r.multiple),o},createText:e=>qa.createTextNode(e),createComment:e=>qa.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>qa.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,o,a){const u=n?n.previousSibling:t.lastChild;if(o&&(o===a||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),!(o===a||!(o=o.nextSibling)););else{Np.innerHTML=Eg(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const f=Np.content;if(r==="svg"||r==="mathml"){const m=f.firstChild;for(;m.firstChild;)f.appendChild(m.firstChild);f.removeChild(m)}t.insertBefore(f,n)}return[u?u.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},hl="transition",Wu="animation",bc=Symbol("_vtc"),Ag={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},gy=xr({},Qm,Ag),vy=e=>(e.displayName="Transition",e.props=gy,e),Dp=vy((e,{slots:t})=>Gd(l_,_y(e),t)),Ul=(e,t=[])=>{fn(e)?e.forEach(n=>n(...t)):e&&e(...t)},Op=e=>e?fn(e)?e.some(t=>t.length>1):e.length>1:!1;function _y(e){const t={};for(const H in e)H in Ag||(t[H]=e[H]);if(e.css===!1)return t;const{name:n="v",type:r,duration:o,enterFromClass:a=`${n}-enter-from`,enterActiveClass:u=`${n}-enter-active`,enterToClass:f=`${n}-enter-to`,appearFromClass:m=a,appearActiveClass:_=u,appearToClass:w=f,leaveFromClass:b=`${n}-leave-from`,leaveActiveClass:E=`${n}-leave-active`,leaveToClass:x=`${n}-leave-to`}=e,F=yy(o),N=F&&F[0],U=F&&F[1],{onBeforeEnter:j,onEnter:ne,onEnterCancelled:ae,onLeave:be,onLeaveCancelled:ye,onBeforeAppear:Pe=j,onAppear:Ce=ne,onAppearCancelled:de=ae}=t,Be=(H,Se,M,Y)=>{H._enterCancelled=Y,ql(H,Se?w:f),ql(H,Se?_:u),M&&M()},Ue=(H,Se)=>{H._isLeaving=!1,ql(H,b),ql(H,x),ql(H,E),Se&&Se()},q=H=>(Se,M)=>{const Y=H?Ce:ne,Z=()=>Be(Se,H,M);Ul(Y,[Se,Z]),Rp(()=>{ql(Se,H?m:a),Fa(Se,H?w:f),Op(Y)||Ip(Se,r,N,Z)})};return xr(t,{onBeforeEnter(H){Ul(j,[H]),Fa(H,a),Fa(H,u)},onBeforeAppear(H){Ul(Pe,[H]),Fa(H,m),Fa(H,_)},onEnter:q(!1),onAppear:q(!0),onLeave(H,Se){H._isLeaving=!0;const M=()=>Ue(H,Se);Fa(H,b),H._enterCancelled?(Fa(H,E),zp()):(zp(),Fa(H,E)),Rp(()=>{H._isLeaving&&(ql(H,b),Fa(H,x),Op(be)||Ip(H,r,U,M))}),Ul(be,[H,M])},onEnterCancelled(H){Be(H,!1,void 0,!0),Ul(ae,[H])},onAppearCancelled(H){Be(H,!0,void 0,!0),Ul(de,[H])},onLeaveCancelled(H){Ue(H),Ul(ye,[H])}})}function yy(e){if(e==null)return null;if(hi(e))return[xf(e.enter),xf(e.leave)];{const t=xf(e);return[t,t]}}function xf(e){return _v(e)}function Fa(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[bc]||(e[bc]=new Set)).add(t)}function ql(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const n=e[bc];n&&(n.delete(t),n.size||(e[bc]=void 0))}function Rp(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let by=0;function Ip(e,t,n,r){const o=e._endId=++by,a=()=>{o===e._endId&&r()};if(n!=null)return setTimeout(a,n);const{type:u,timeout:f,propCount:m}=wy(e,t);if(!u)return r();const _=u+"end";let w=0;const b=()=>{e.removeEventListener(_,E),a()},E=x=>{x.target===e&&++w>=m&&b()};setTimeout(()=>{w<m&&b()},f+1),e.addEventListener(_,E)}function wy(e,t){const n=window.getComputedStyle(e),r=F=>(n[F]||"").split(", "),o=r(`${hl}Delay`),a=r(`${hl}Duration`),u=Fp(o,a),f=r(`${Wu}Delay`),m=r(`${Wu}Duration`),_=Fp(f,m);let w=null,b=0,E=0;t===hl?u>0&&(w=hl,b=u,E=a.length):t===Wu?_>0&&(w=Wu,b=_,E=m.length):(b=Math.max(u,_),w=b>0?u>_?hl:Wu:null,E=w?w===hl?a.length:m.length:0);const x=w===hl&&/\b(transform|all)(,|$)/.test(r(`${hl}Property`).toString());return{type:w,timeout:b,propCount:E,hasTransform:x}}function Fp(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,r)=>jp(n)+jp(e[r])))}function jp(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function zp(){return document.body.offsetHeight}function xy(e,t,n){const r=e[bc];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const xh=Symbol("_vod"),Mg=Symbol("_vsh"),Up={beforeMount(e,{value:t},{transition:n}){e[xh]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Zu(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),Zu(e,!0),r.enter(e)):r.leave(e,()=>{Zu(e,!1)}):Zu(e,t))},beforeUnmount(e,{value:t}){Zu(e,t)}};function Zu(e,t){e.style.display=t?e[xh]:"none",e[Mg]=!t}const Ly=Symbol(""),Cy=/(^|;)\s*display\s*:/;function ky(e,t,n){const r=e.style,o=Gi(n);let a=!1;if(n&&!o){if(t)if(Gi(t))for(const u of t.split(";")){const f=u.slice(0,u.indexOf(":")).trim();n[f]==null&&rh(r,f,"")}else for(const u in t)n[u]==null&&rh(r,u,"");for(const u in n)u==="display"&&(a=!0),rh(r,u,n[u])}else if(o){if(t!==n){const u=r[Ly];u&&(n+=";"+u),r.cssText=n,a=Cy.test(n)}}else t&&e.removeAttribute("style");xh in e&&(e[xh]=a?r.display:"",e[Mg]&&(r.display="none"))}const qp=/\s*!important$/;function rh(e,t,n){if(fn(n))n.forEach(r=>rh(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=Py(e,t);qp.test(n)?e.setProperty(su(r),n.replace(qp,""),"important"):e[r]=n}}const $p=["Webkit","Moz","ms"],Lf={};function Py(e,t){const n=Lf[t];if(n)return n;let r=bo(t);if(r!=="filter"&&r in e)return Lf[t]=r;r=Nh(r);for(let o=0;o<$p.length;o++){const a=$p[o]+r;if(a in e)return Lf[t]=a}return t}const Vp="http://www.w3.org/1999/xlink";function Hp(e,t,n,r,o,a=Cv(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Vp,t.slice(6,t.length)):e.setAttributeNS(Vp,t,n):n==null||a&&!Lm(n)?e.removeAttribute(t):e.setAttribute(t,a?"":ya(n)?String(n):n)}function Gp(e,t,n,r,o){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Eg(n):n);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const f=a==="OPTION"?e.getAttribute("value")||"":e.value,m=n==null?e.type==="checkbox"?"on":"":String(n);(f!==m||!("_value"in e))&&(e.value=m),n==null&&e.removeAttribute(t),e._value=n;return}let u=!1;if(n===""||n==null){const f=typeof e[t];f==="boolean"?n=Lm(n):n==null&&f==="string"?(n="",u=!0):f==="number"&&(n=0,u=!0)}try{e[t]=n}catch{}u&&e.removeAttribute(o||t)}function Ga(e,t,n,r){e.addEventListener(t,n,r)}function Sy(e,t,n,r){e.removeEventListener(t,n,r)}const Wp=Symbol("_vei");function Ey(e,t,n,r,o=null){const a=e[Wp]||(e[Wp]={}),u=a[t];if(r&&u)u.value=r;else{const[f,m]=Ay(t);if(r){const _=a[t]=Ty(r,o);Ga(e,f,_,m)}else u&&(Sy(e,f,u,m),a[t]=void 0)}}const Zp=/(?:Once|Passive|Capture)$/;function Ay(e){let t;if(Zp.test(e)){t={};let r;for(;r=e.match(Zp);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):su(e.slice(2)),t]}let Cf=0;const My=Promise.resolve(),By=()=>Cf||(My.then(()=>Cf=0),Cf=Date.now());function Ty(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;$o(Ny(r,n.value),t,5,[r])};return n.value=e,n.attached=By(),n}function Ny(e,t){if(fn(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>o=>!o._stopped&&r&&r(o))}else return t}const Kp=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Dy=(e,t,n,r,o,a)=>{const u=o==="svg";t==="class"?xy(e,r,u):t==="style"?ky(e,n,r):Bh(t)?Bd(t)||Ey(e,t,n,r,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Oy(e,t,r,u))?(Gp(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Hp(e,t,r,u,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Gi(r))?Gp(e,bo(t),r,a,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Hp(e,t,r,u))};function Oy(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&Kp(t)&&En(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return Kp(t)&&Gi(n)?!1:t in e}const kl=e=>{const t=e.props["onUpdate:modelValue"]||!1;return fn(t)?n=>eh(t,n):t};function Ry(e){e.target.composing=!0}function Jp(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const yo=Symbol("_assign"),ri={created(e,{modifiers:{lazy:t,trim:n,number:r}},o){e[yo]=kl(o);const a=r||o.props&&o.props.type==="number";Ga(e,t?"change":"input",u=>{if(u.target.composing)return;let f=e.value;n&&(f=f.trim()),a&&(f=dh(f)),e[yo](f)}),n&&Ga(e,"change",()=>{e.value=e.value.trim()}),t||(Ga(e,"compositionstart",Ry),Ga(e,"compositionend",Jp),Ga(e,"change",Jp))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:o,number:a}},u){if(e[yo]=kl(u),e.composing)return;const f=(a||e.type==="number")&&!/^0\d/.test(e.value)?dh(e.value):e.value,m=t??"";f!==m&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||o&&e.value.trim()===m)||(e.value=m))}},Wd={deep:!0,created(e,t,n){e[yo]=kl(n),Ga(e,"change",()=>{const r=e._modelValue,o=Du(e),a=e.checked,u=e[yo];if(fn(r)){const f=Dd(r,o),m=f!==-1;if(a&&!m)u(r.concat(o));else if(!a&&m){const _=[...r];_.splice(f,1),u(_)}}else if(Iu(r)){const f=new Set(r);a?f.add(o):f.delete(o),u(f)}else u(Bg(e,a))})},mounted:Yp,beforeUpdate(e,t,n){e[yo]=kl(n),Yp(e,t,n)}};function Yp(e,{value:t,oldValue:n},r){e._modelValue=t;let o;if(fn(t))o=Dd(t,r.props.value)>-1;else if(Iu(t))o=t.has(r.props.value);else{if(t===n)return;o=nu(t,Bg(e,!0))}e.checked!==o&&(e.checked=o)}const Iy={created(e,{value:t},n){e.checked=nu(t,n.props.value),e[yo]=kl(n),Ga(e,"change",()=>{e[yo](Du(e))})},beforeUpdate(e,{value:t,oldValue:n},r){e[yo]=kl(r),t!==n&&(e.checked=nu(t,r.props.value))}},cs={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const o=Iu(t);Ga(e,"change",()=>{const a=Array.prototype.filter.call(e.options,u=>u.selected).map(u=>n?dh(Du(u)):Du(u));e[yo](e.multiple?o?new Set(a):a:a[0]),e._assigning=!0,as(()=>{e._assigning=!1})}),e[yo]=kl(r)},mounted(e,{value:t}){Xp(e,t)},beforeUpdate(e,t,n){e[yo]=kl(n)},updated(e,{value:t}){e._assigning||Xp(e,t)}};function Xp(e,t){const n=e.multiple,r=fn(t);if(!(n&&!r&&!Iu(t))){for(let o=0,a=e.options.length;o<a;o++){const u=e.options[o],f=Du(u);if(n)if(r){const m=typeof f;m==="string"||m==="number"?u.selected=t.some(_=>String(_)===String(f)):u.selected=Dd(t,f)>-1}else u.selected=t.has(f);else if(nu(Du(u),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Du(e){return"_value"in e?e._value:e.value}function Bg(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Fy={created(e,t,n){Zc(e,t,n,null,"created")},mounted(e,t,n){Zc(e,t,n,null,"mounted")},beforeUpdate(e,t,n,r){Zc(e,t,n,r,"beforeUpdate")},updated(e,t,n,r){Zc(e,t,n,r,"updated")}};function jy(e,t){switch(e){case"SELECT":return cs;case"TEXTAREA":return ri;default:switch(t){case"checkbox":return Wd;case"radio":return Iy;default:return ri}}}function Zc(e,t,n,r,o){const u=jy(e.tagName,n.props&&n.props.type)[o];u&&u(e,t,n,r)}const zy=["ctrl","shift","alt","meta"],Uy={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>zy.some(n=>e[`${n}Key`]&&!t.includes(n))},Mc=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(o,...a)=>{for(let u=0;u<t.length;u++){const f=Uy[t[u]];if(f&&f(o,t))return}return e(o,...a)})},qy=xr({patchProp:Dy},my);let Qp;function $y(){return Qp||(Qp=F_(qy))}const Vy=(...e)=>{const t=$y().createApp(...e),{mount:n}=t;return t.mount=r=>{const o=Gy(r);if(!o)return;const a=t._component;!En(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const u=n(o,!1,Hy(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),u},t};function Hy(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Gy(e){return Gi(e)?document.querySelector(e):e}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Tg;const Hh=e=>Tg=e,Ng=Symbol();function rd(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var cc;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(cc||(cc={}));function Wy(){const e=Sm(!0),t=e.run(()=>It({}));let n=[],r=[];const o=qd({install(a){Hh(o),o._a=a,a.provide(Ng,o),a.config.globalProperties.$pinia=o,r.forEach(u=>n.push(u)),r=[]},use(a){return this._a?n.push(a):r.push(a),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return o}const Dg=()=>{};function e0(e,t,n,r=Dg){e.push(t);const o=()=>{const a=e.indexOf(t);a>-1&&(e.splice(a,1),r())};return!n&&Em()&&Pv(o),o}function gu(e,...t){e.slice().forEach(n=>{n(...t)})}const Zy=e=>e(),t0=Symbol(),kf=Symbol();function sd(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,r)=>e.set(r,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],o=e[n];rd(o)&&rd(r)&&e.hasOwnProperty(n)&&!Hi(r)&&!Ll(r)?e[n]=sd(o,r):e[n]=r}return e}const Ky=Symbol();function Jy(e){return!rd(e)||!e.hasOwnProperty(Ky)}const{assign:ml}=Object;function Yy(e){return!!(Hi(e)&&e.effect)}function Xy(e,t,n,r){const{state:o,actions:a,getters:u}=t,f=n.state.value[e];let m;function _(){f||(n.state.value[e]=o?o():{});const w=Kv(n.state.value[e]);return ml(w,a,Object.keys(u||{}).reduce((b,E)=>(b[E]=qd(Nn(()=>{Hh(n);const x=n._s.get(e);return u[E].call(x,x)})),b),{}))}return m=Og(e,_,t,n,r,!0),m}function Og(e,t,n={},r,o,a){let u;const f=ml({actions:{}},n),m={deep:!0};let _,w,b=[],E=[],x;const F=r.state.value[e];!a&&!F&&(r.state.value[e]={}),It({});let N;function U(de){let Be;_=w=!1,typeof de=="function"?(de(r.state.value[e]),Be={type:cc.patchFunction,storeId:e,events:x}):(sd(r.state.value[e],de),Be={type:cc.patchObject,payload:de,storeId:e,events:x});const Ue=N=Symbol();as().then(()=>{N===Ue&&(_=!0)}),w=!0,gu(b,Be,r.state.value[e])}const j=a?function(){const{state:Be}=n,Ue=Be?Be():{};this.$patch(q=>{ml(q,Ue)})}:Dg;function ne(){u.stop(),b=[],E=[],r._s.delete(e)}const ae=(de,Be="")=>{if(t0 in de)return de[kf]=Be,de;const Ue=function(){Hh(r);const q=Array.from(arguments),H=[],Se=[];function M(re){H.push(re)}function Y(re){Se.push(re)}gu(E,{args:q,name:Ue[kf],store:ye,after:M,onError:Y});let Z;try{Z=de.apply(this&&this.$id===e?this:ye,q)}catch(re){throw gu(Se,re),re}return Z instanceof Promise?Z.then(re=>(gu(H,re),re)).catch(re=>(gu(Se,re),Promise.reject(re))):(gu(H,Z),Z)};return Ue[t0]=!0,Ue[kf]=Be,Ue},be={_p:r,$id:e,$onAction:e0.bind(null,E),$patch:U,$reset:j,$subscribe(de,Be={}){const Ue=e0(b,de,Be.detached,()=>q()),q=u.run(()=>fs(()=>r.state.value[e],H=>{(Be.flush==="sync"?w:_)&&de({storeId:e,type:cc.direct,events:x},H)},ml({},m,Be)));return Ue},$dispose:ne},ye=Wa(be);r._s.set(e,ye);const Ce=(r._a&&r._a.runWithContext||Zy)(()=>r._e.run(()=>(u=Sm()).run(()=>t({action:ae}))));for(const de in Ce){const Be=Ce[de];if(Hi(Be)&&!Yy(Be)||Ll(Be))a||(F&&Jy(Be)&&(Hi(Be)?Be.value=F[de]:sd(Be,F[de])),r.state.value[e][de]=Be);else if(typeof Be=="function"){const Ue=ae(Be,de);Ce[de]=Ue,f.actions[de]=Be}}return ml(ye,Ce),ml(Zn(ye),Ce),Object.defineProperty(ye,"$state",{get:()=>r.state.value[e],set:de=>{U(Be=>{ml(Be,de)})}}),r._p.forEach(de=>{ml(ye,u.run(()=>de({store:ye,app:r._a,pinia:r,options:f})))}),F&&a&&n.hydrate&&n.hydrate(ye.$state,F),_=!0,w=!0,ye}/*! #__NO_SIDE_EFFECTS__ */function Zd(e,t,n){let r,o;const a=typeof t=="function";typeof e=="string"?(r=e,o=a?n:t):(o=e,r=e.id);function u(f,m){const _=B_();return f=f||(_?_o(Ng,null):null),f&&Hh(f),f=Tg,f._s.has(r)||(a?Og(r,t,o,f):Xy(r,o,f)),f._s.get(r)}return u.$id=r,u}function Rg(e,t){return function(){return e.apply(t,arguments)}}const{toString:Qy}=Object.prototype,{getPrototypeOf:Kd}=Object,Gh=(e=>t=>{const n=Qy.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ho=e=>(e=e.toLowerCase(),t=>Gh(t)===e),Wh=e=>t=>typeof t===e,{isArray:Fu}=Array,wc=Wh("undefined");function e2(e){return e!==null&&!wc(e)&&e.constructor!==null&&!wc(e.constructor)&&Js(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Ig=Ho("ArrayBuffer");function t2(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Ig(e.buffer),t}const n2=Wh("string"),Js=Wh("function"),Fg=Wh("number"),Zh=e=>e!==null&&typeof e=="object",i2=e=>e===!0||e===!1,sh=e=>{if(Gh(e)!=="object")return!1;const t=Kd(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},r2=Ho("Date"),s2=Ho("File"),o2=Ho("Blob"),a2=Ho("FileList"),l2=e=>Zh(e)&&Js(e.pipe),u2=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Js(e.append)&&((t=Gh(e))==="formdata"||t==="object"&&Js(e.toString)&&e.toString()==="[object FormData]"))},c2=Ho("URLSearchParams"),[h2,f2,d2,p2]=["ReadableStream","Request","Response","Headers"].map(Ho),m2=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Bc(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,o;if(typeof e!="object"&&(e=[e]),Fu(e))for(r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else{const a=n?Object.getOwnPropertyNames(e):Object.keys(e),u=a.length;let f;for(r=0;r<u;r++)f=a[r],t.call(null,e[f],f,e)}}function jg(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,o;for(;r-- >0;)if(o=n[r],t===o.toLowerCase())return o;return null}const Zl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,zg=e=>!wc(e)&&e!==Zl;function od(){const{caseless:e}=zg(this)&&this||{},t={},n=(r,o)=>{const a=e&&jg(t,o)||o;sh(t[a])&&sh(r)?t[a]=od(t[a],r):sh(r)?t[a]=od({},r):Fu(r)?t[a]=r.slice():t[a]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&Bc(arguments[r],n);return t}const g2=(e,t,n,{allOwnKeys:r}={})=>(Bc(t,(o,a)=>{n&&Js(o)?e[a]=Rg(o,n):e[a]=o},{allOwnKeys:r}),e),v2=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),_2=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},y2=(e,t,n,r)=>{let o,a,u;const f={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),a=o.length;a-- >0;)u=o[a],(!r||r(u,e,t))&&!f[u]&&(t[u]=e[u],f[u]=!0);e=n!==!1&&Kd(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},b2=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},w2=e=>{if(!e)return null;if(Fu(e))return e;let t=e.length;if(!Fg(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},x2=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Kd(Uint8Array)),L2=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=r.next())&&!o.done;){const a=o.value;t.call(e,a[0],a[1])}},C2=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},k2=Ho("HTMLFormElement"),P2=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,o){return r.toUpperCase()+o}),n0=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),S2=Ho("RegExp"),Ug=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Bc(n,(o,a)=>{let u;(u=t(o,a,e))!==!1&&(r[a]=u||o)}),Object.defineProperties(e,r)},E2=e=>{Ug(e,(t,n)=>{if(Js(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Js(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},A2=(e,t)=>{const n={},r=o=>{o.forEach(a=>{n[a]=!0})};return Fu(e)?r(e):r(String(e).split(t)),n},M2=()=>{},B2=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,Pf="abcdefghijklmnopqrstuvwxyz",i0="0123456789",qg={DIGIT:i0,ALPHA:Pf,ALPHA_DIGIT:Pf+Pf.toUpperCase()+i0},T2=(e=16,t=qg.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function N2(e){return!!(e&&Js(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const D2=e=>{const t=new Array(10),n=(r,o)=>{if(Zh(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[o]=r;const a=Fu(r)?[]:{};return Bc(r,(u,f)=>{const m=n(u,o+1);!wc(m)&&(a[f]=m)}),t[o]=void 0,a}}return r};return n(e,0)},O2=Ho("AsyncFunction"),R2=e=>e&&(Zh(e)||Js(e))&&Js(e.then)&&Js(e.catch),$g=((e,t)=>e?setImmediate:t?((n,r)=>(Zl.addEventListener("message",({source:o,data:a})=>{o===Zl&&a===n&&r.length&&r.shift()()},!1),o=>{r.push(o),Zl.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Js(Zl.postMessage)),I2=typeof queueMicrotask<"u"?queueMicrotask.bind(Zl):typeof process<"u"&&process.nextTick||$g,xt={isArray:Fu,isArrayBuffer:Ig,isBuffer:e2,isFormData:u2,isArrayBufferView:t2,isString:n2,isNumber:Fg,isBoolean:i2,isObject:Zh,isPlainObject:sh,isReadableStream:h2,isRequest:f2,isResponse:d2,isHeaders:p2,isUndefined:wc,isDate:r2,isFile:s2,isBlob:o2,isRegExp:S2,isFunction:Js,isStream:l2,isURLSearchParams:c2,isTypedArray:x2,isFileList:a2,forEach:Bc,merge:od,extend:g2,trim:m2,stripBOM:v2,inherits:_2,toFlatObject:y2,kindOf:Gh,kindOfTest:Ho,endsWith:b2,toArray:w2,forEachEntry:L2,matchAll:C2,isHTMLForm:k2,hasOwnProperty:n0,hasOwnProp:n0,reduceDescriptors:Ug,freezeMethods:E2,toObjectSet:A2,toCamelCase:P2,noop:M2,toFiniteNumber:B2,findKey:jg,global:Zl,isContextDefined:zg,ALPHABET:qg,generateString:T2,isSpecCompliantForm:N2,toJSONObject:D2,isAsyncFn:O2,isThenable:R2,setImmediate:$g,asap:I2};function Mn(e,t,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}xt.inherits(Mn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:xt.toJSONObject(this.config),code:this.code,status:this.status}}});const Vg=Mn.prototype,Hg={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Hg[e]={value:e}});Object.defineProperties(Mn,Hg);Object.defineProperty(Vg,"isAxiosError",{value:!0});Mn.from=(e,t,n,r,o,a)=>{const u=Object.create(Vg);return xt.toFlatObject(e,u,function(m){return m!==Error.prototype},f=>f!=="isAxiosError"),Mn.call(u,e.message,t,n,r,o),u.cause=e,u.name=e.name,a&&Object.assign(u,a),u};const F2=null;function ad(e){return xt.isPlainObject(e)||xt.isArray(e)}function Gg(e){return xt.endsWith(e,"[]")?e.slice(0,-2):e}function r0(e,t,n){return e?e.concat(t).map(function(o,a){return o=Gg(o),!n&&a?"["+o+"]":o}).join(n?".":""):t}function j2(e){return xt.isArray(e)&&!e.some(ad)}const z2=xt.toFlatObject(xt,{},null,function(t){return/^is[A-Z]/.test(t)});function Kh(e,t,n){if(!xt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=xt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,U){return!xt.isUndefined(U[N])});const r=n.metaTokens,o=n.visitor||w,a=n.dots,u=n.indexes,m=(n.Blob||typeof Blob<"u"&&Blob)&&xt.isSpecCompliantForm(t);if(!xt.isFunction(o))throw new TypeError("visitor must be a function");function _(F){if(F===null)return"";if(xt.isDate(F))return F.toISOString();if(!m&&xt.isBlob(F))throw new Mn("Blob is not supported. Use a Buffer instead.");return xt.isArrayBuffer(F)||xt.isTypedArray(F)?m&&typeof Blob=="function"?new Blob([F]):Buffer.from(F):F}function w(F,N,U){let j=F;if(F&&!U&&typeof F=="object"){if(xt.endsWith(N,"{}"))N=r?N:N.slice(0,-2),F=JSON.stringify(F);else if(xt.isArray(F)&&j2(F)||(xt.isFileList(F)||xt.endsWith(N,"[]"))&&(j=xt.toArray(F)))return N=Gg(N),j.forEach(function(ae,be){!(xt.isUndefined(ae)||ae===null)&&t.append(u===!0?r0([N],be,a):u===null?N:N+"[]",_(ae))}),!1}return ad(F)?!0:(t.append(r0(U,N,a),_(F)),!1)}const b=[],E=Object.assign(z2,{defaultVisitor:w,convertValue:_,isVisitable:ad});function x(F,N){if(!xt.isUndefined(F)){if(b.indexOf(F)!==-1)throw Error("Circular reference detected in "+N.join("."));b.push(F),xt.forEach(F,function(j,ne){(!(xt.isUndefined(j)||j===null)&&o.call(t,j,xt.isString(ne)?ne.trim():ne,N,E))===!0&&x(j,N?N.concat(ne):[ne])}),b.pop()}}if(!xt.isObject(e))throw new TypeError("data must be an object");return x(e),t}function s0(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Jd(e,t){this._pairs=[],e&&Kh(e,this,t)}const Wg=Jd.prototype;Wg.append=function(t,n){this._pairs.push([t,n])};Wg.toString=function(t){const n=t?function(r){return t.call(this,r,s0)}:s0;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function U2(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Zg(e,t,n){if(!t)return e;const r=n&&n.encode||U2;xt.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let a;if(o?a=o(t,n):a=xt.isURLSearchParams(t)?t.toString():new Jd(t,n).toString(r),a){const u=e.indexOf("#");u!==-1&&(e=e.slice(0,u)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class o0{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){xt.forEach(this.handlers,function(r){r!==null&&t(r)})}}const Kg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},q2=typeof URLSearchParams<"u"?URLSearchParams:Jd,$2=typeof FormData<"u"?FormData:null,V2=typeof Blob<"u"?Blob:null,H2={isBrowser:!0,classes:{URLSearchParams:q2,FormData:$2,Blob:V2},protocols:["http","https","file","blob","url","data"]},Yd=typeof window<"u"&&typeof document<"u",ld=typeof navigator=="object"&&navigator||void 0,G2=Yd&&(!ld||["ReactNative","NativeScript","NS"].indexOf(ld.product)<0),W2=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Z2=Yd&&window.location.href||"http://localhost",K2=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Yd,hasStandardBrowserEnv:G2,hasStandardBrowserWebWorkerEnv:W2,navigator:ld,origin:Z2},Symbol.toStringTag,{value:"Module"})),Kr={...K2,...H2};function J2(e,t){return Kh(e,new Kr.classes.URLSearchParams,Object.assign({visitor:function(n,r,o,a){return Kr.isNode&&xt.isBuffer(n)?(this.append(r,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}function Y2(e){return xt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function X2(e){const t={},n=Object.keys(e);let r;const o=n.length;let a;for(r=0;r<o;r++)a=n[r],t[a]=e[a];return t}function Jg(e){function t(n,r,o,a){let u=n[a++];if(u==="__proto__")return!0;const f=Number.isFinite(+u),m=a>=n.length;return u=!u&&xt.isArray(o)?o.length:u,m?(xt.hasOwnProp(o,u)?o[u]=[o[u],r]:o[u]=r,!f):((!o[u]||!xt.isObject(o[u]))&&(o[u]=[]),t(n,r,o[u],a)&&xt.isArray(o[u])&&(o[u]=X2(o[u])),!f)}if(xt.isFormData(e)&&xt.isFunction(e.entries)){const n={};return xt.forEachEntry(e,(r,o)=>{t(Y2(r),o,n,0)}),n}return null}function Q2(e,t,n){if(xt.isString(e))try{return(t||JSON.parse)(e),xt.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Tc={transitional:Kg,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",o=r.indexOf("application/json")>-1,a=xt.isObject(t);if(a&&xt.isHTMLForm(t)&&(t=new FormData(t)),xt.isFormData(t))return o?JSON.stringify(Jg(t)):t;if(xt.isArrayBuffer(t)||xt.isBuffer(t)||xt.isStream(t)||xt.isFile(t)||xt.isBlob(t)||xt.isReadableStream(t))return t;if(xt.isArrayBufferView(t))return t.buffer;if(xt.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let f;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return J2(t,this.formSerializer).toString();if((f=xt.isFileList(t))||r.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return Kh(f?{"files[]":t}:t,m&&new m,this.formSerializer)}}return a||o?(n.setContentType("application/json",!1),Q2(t)):t}],transformResponse:[function(t){const n=this.transitional||Tc.transitional,r=n&&n.forcedJSONParsing,o=this.responseType==="json";if(xt.isResponse(t)||xt.isReadableStream(t))return t;if(t&&xt.isString(t)&&(r&&!this.responseType||o)){const u=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(f){if(u)throw f.name==="SyntaxError"?Mn.from(f,Mn.ERR_BAD_RESPONSE,this,null,this.response):f}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Kr.classes.FormData,Blob:Kr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};xt.forEach(["delete","get","head","post","put","patch"],e=>{Tc.headers[e]={}});const e4=xt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),t4=e=>{const t={};let n,r,o;return e&&e.split(`
`).forEach(function(u){o=u.indexOf(":"),n=u.substring(0,o).trim().toLowerCase(),r=u.substring(o+1).trim(),!(!n||t[n]&&e4[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},a0=Symbol("internals");function Ku(e){return e&&String(e).trim().toLowerCase()}function oh(e){return e===!1||e==null?e:xt.isArray(e)?e.map(oh):String(e)}function n4(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const i4=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Sf(e,t,n,r,o){if(xt.isFunction(r))return r.call(this,t,n);if(o&&(t=n),!!xt.isString(t)){if(xt.isString(r))return t.indexOf(r)!==-1;if(xt.isRegExp(r))return r.test(t)}}function r4(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function s4(e,t){const n=xt.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(o,a,u){return this[r].call(this,t,o,a,u)},configurable:!0})})}let Ts=class{constructor(t){t&&this.set(t)}set(t,n,r){const o=this;function a(f,m,_){const w=Ku(m);if(!w)throw new Error("header name must be a non-empty string");const b=xt.findKey(o,w);(!b||o[b]===void 0||_===!0||_===void 0&&o[b]!==!1)&&(o[b||m]=oh(f))}const u=(f,m)=>xt.forEach(f,(_,w)=>a(_,w,m));if(xt.isPlainObject(t)||t instanceof this.constructor)u(t,n);else if(xt.isString(t)&&(t=t.trim())&&!i4(t))u(t4(t),n);else if(xt.isHeaders(t))for(const[f,m]of t.entries())a(m,f,r);else t!=null&&a(n,t,r);return this}get(t,n){if(t=Ku(t),t){const r=xt.findKey(this,t);if(r){const o=this[r];if(!n)return o;if(n===!0)return n4(o);if(xt.isFunction(n))return n.call(this,o,r);if(xt.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Ku(t),t){const r=xt.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Sf(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let o=!1;function a(u){if(u=Ku(u),u){const f=xt.findKey(r,u);f&&(!n||Sf(r,r[f],f,n))&&(delete r[f],o=!0)}}return xt.isArray(t)?t.forEach(a):a(t),o}clear(t){const n=Object.keys(this);let r=n.length,o=!1;for(;r--;){const a=n[r];(!t||Sf(this,this[a],a,t,!0))&&(delete this[a],o=!0)}return o}normalize(t){const n=this,r={};return xt.forEach(this,(o,a)=>{const u=xt.findKey(r,a);if(u){n[u]=oh(o),delete n[a];return}const f=t?r4(a):String(a).trim();f!==a&&delete n[a],n[f]=oh(o),r[f]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return xt.forEach(this,(r,o)=>{r!=null&&r!==!1&&(n[o]=t&&xt.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(o=>r.set(o)),r}static accessor(t){const r=(this[a0]=this[a0]={accessors:{}}).accessors,o=this.prototype;function a(u){const f=Ku(u);r[f]||(s4(o,u),r[f]=!0)}return xt.isArray(t)?t.forEach(a):a(t),this}};Ts.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);xt.reduceDescriptors(Ts.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});xt.freezeMethods(Ts);function Ef(e,t){const n=this||Tc,r=t||n,o=Ts.from(r.headers);let a=r.data;return xt.forEach(e,function(f){a=f.call(n,a,o.normalize(),t?t.status:void 0)}),o.normalize(),a}function Yg(e){return!!(e&&e.__CANCEL__)}function ju(e,t,n){Mn.call(this,e??"canceled",Mn.ERR_CANCELED,t,n),this.name="CanceledError"}xt.inherits(ju,Mn,{__CANCEL__:!0});function Xg(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new Mn("Request failed with status code "+n.status,[Mn.ERR_BAD_REQUEST,Mn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function o4(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function a4(e,t){e=e||10;const n=new Array(e),r=new Array(e);let o=0,a=0,u;return t=t!==void 0?t:1e3,function(m){const _=Date.now(),w=r[a];u||(u=_),n[o]=m,r[o]=_;let b=a,E=0;for(;b!==o;)E+=n[b++],b=b%e;if(o=(o+1)%e,o===a&&(a=(a+1)%e),_-u<t)return;const x=w&&_-w;return x?Math.round(E*1e3/x):void 0}}function l4(e,t){let n=0,r=1e3/t,o,a;const u=(_,w=Date.now())=>{n=w,o=null,a&&(clearTimeout(a),a=null),e.apply(null,_)};return[(..._)=>{const w=Date.now(),b=w-n;b>=r?u(_,w):(o=_,a||(a=setTimeout(()=>{a=null,u(o)},r-b)))},()=>o&&u(o)]}const Lh=(e,t,n=3)=>{let r=0;const o=a4(50,250);return l4(a=>{const u=a.loaded,f=a.lengthComputable?a.total:void 0,m=u-r,_=o(m),w=u<=f;r=u;const b={loaded:u,total:f,progress:f?u/f:void 0,bytes:m,rate:_||void 0,estimated:_&&f&&w?(f-u)/_:void 0,event:a,lengthComputable:f!=null,[t?"download":"upload"]:!0};e(b)},n)},l0=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},u0=e=>(...t)=>xt.asap(()=>e(...t)),u4=Kr.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Kr.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Kr.origin),Kr.navigator&&/(msie|trident)/i.test(Kr.navigator.userAgent)):()=>!0,c4=Kr.hasStandardBrowserEnv?{write(e,t,n,r,o,a){const u=[e+"="+encodeURIComponent(t)];xt.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),xt.isString(r)&&u.push("path="+r),xt.isString(o)&&u.push("domain="+o),a===!0&&u.push("secure"),document.cookie=u.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function h4(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function f4(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Qg(e,t){return e&&!h4(t)?f4(e,t):t}const c0=e=>e instanceof Ts?{...e}:e;function ru(e,t){t=t||{};const n={};function r(_,w,b,E){return xt.isPlainObject(_)&&xt.isPlainObject(w)?xt.merge.call({caseless:E},_,w):xt.isPlainObject(w)?xt.merge({},w):xt.isArray(w)?w.slice():w}function o(_,w,b,E){if(xt.isUndefined(w)){if(!xt.isUndefined(_))return r(void 0,_,b,E)}else return r(_,w,b,E)}function a(_,w){if(!xt.isUndefined(w))return r(void 0,w)}function u(_,w){if(xt.isUndefined(w)){if(!xt.isUndefined(_))return r(void 0,_)}else return r(void 0,w)}function f(_,w,b){if(b in t)return r(_,w);if(b in e)return r(void 0,_)}const m={url:a,method:a,data:a,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:f,headers:(_,w,b)=>o(c0(_),c0(w),b,!0)};return xt.forEach(Object.keys(Object.assign({},e,t)),function(w){const b=m[w]||o,E=b(e[w],t[w],w);xt.isUndefined(E)&&b!==f||(n[w]=E)}),n}const e1=e=>{const t=ru({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:a,headers:u,auth:f}=t;t.headers=u=Ts.from(u),t.url=Zg(Qg(t.baseURL,t.url),e.params,e.paramsSerializer),f&&u.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):"")));let m;if(xt.isFormData(n)){if(Kr.hasStandardBrowserEnv||Kr.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if((m=u.getContentType())!==!1){const[_,...w]=m?m.split(";").map(b=>b.trim()).filter(Boolean):[];u.setContentType([_||"multipart/form-data",...w].join("; "))}}if(Kr.hasStandardBrowserEnv&&(r&&xt.isFunction(r)&&(r=r(t)),r||r!==!1&&u4(t.url))){const _=o&&a&&c4.read(a);_&&u.set(o,_)}return t},d4=typeof XMLHttpRequest<"u",p4=d4&&function(e){return new Promise(function(n,r){const o=e1(e);let a=o.data;const u=Ts.from(o.headers).normalize();let{responseType:f,onUploadProgress:m,onDownloadProgress:_}=o,w,b,E,x,F;function N(){x&&x(),F&&F(),o.cancelToken&&o.cancelToken.unsubscribe(w),o.signal&&o.signal.removeEventListener("abort",w)}let U=new XMLHttpRequest;U.open(o.method.toUpperCase(),o.url,!0),U.timeout=o.timeout;function j(){if(!U)return;const ae=Ts.from("getAllResponseHeaders"in U&&U.getAllResponseHeaders()),ye={data:!f||f==="text"||f==="json"?U.responseText:U.response,status:U.status,statusText:U.statusText,headers:ae,config:e,request:U};Xg(function(Ce){n(Ce),N()},function(Ce){r(Ce),N()},ye),U=null}"onloadend"in U?U.onloadend=j:U.onreadystatechange=function(){!U||U.readyState!==4||U.status===0&&!(U.responseURL&&U.responseURL.indexOf("file:")===0)||setTimeout(j)},U.onabort=function(){U&&(r(new Mn("Request aborted",Mn.ECONNABORTED,e,U)),U=null)},U.onerror=function(){r(new Mn("Network Error",Mn.ERR_NETWORK,e,U)),U=null},U.ontimeout=function(){let be=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const ye=o.transitional||Kg;o.timeoutErrorMessage&&(be=o.timeoutErrorMessage),r(new Mn(be,ye.clarifyTimeoutError?Mn.ETIMEDOUT:Mn.ECONNABORTED,e,U)),U=null},a===void 0&&u.setContentType(null),"setRequestHeader"in U&&xt.forEach(u.toJSON(),function(be,ye){U.setRequestHeader(ye,be)}),xt.isUndefined(o.withCredentials)||(U.withCredentials=!!o.withCredentials),f&&f!=="json"&&(U.responseType=o.responseType),_&&([E,F]=Lh(_,!0),U.addEventListener("progress",E)),m&&U.upload&&([b,x]=Lh(m),U.upload.addEventListener("progress",b),U.upload.addEventListener("loadend",x)),(o.cancelToken||o.signal)&&(w=ae=>{U&&(r(!ae||ae.type?new ju(null,e,U):ae),U.abort(),U=null)},o.cancelToken&&o.cancelToken.subscribe(w),o.signal&&(o.signal.aborted?w():o.signal.addEventListener("abort",w)));const ne=o4(o.url);if(ne&&Kr.protocols.indexOf(ne)===-1){r(new Mn("Unsupported protocol "+ne+":",Mn.ERR_BAD_REQUEST,e));return}U.send(a||null)})},m4=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,o;const a=function(_){if(!o){o=!0,f();const w=_ instanceof Error?_:this.reason;r.abort(w instanceof Mn?w:new ju(w instanceof Error?w.message:w))}};let u=t&&setTimeout(()=>{u=null,a(new Mn(`timeout ${t} of ms exceeded`,Mn.ETIMEDOUT))},t);const f=()=>{e&&(u&&clearTimeout(u),u=null,e.forEach(_=>{_.unsubscribe?_.unsubscribe(a):_.removeEventListener("abort",a)}),e=null)};e.forEach(_=>_.addEventListener("abort",a));const{signal:m}=r;return m.unsubscribe=()=>xt.asap(f),m}},g4=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,o;for(;r<n;)o=r+t,yield e.slice(r,o),r=o},v4=async function*(e,t){for await(const n of _4(e))yield*g4(n,t)},_4=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},h0=(e,t,n,r)=>{const o=v4(e,t);let a=0,u,f=m=>{u||(u=!0,r&&r(m))};return new ReadableStream({async pull(m){try{const{done:_,value:w}=await o.next();if(_){f(),m.close();return}let b=w.byteLength;if(n){let E=a+=b;n(E)}m.enqueue(new Uint8Array(w))}catch(_){throw f(_),_}},cancel(m){return f(m),o.return()}},{highWaterMark:2})},Jh=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",t1=Jh&&typeof ReadableStream=="function",y4=Jh&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),n1=(e,...t)=>{try{return!!e(...t)}catch{return!1}},b4=t1&&n1(()=>{let e=!1;const t=new Request(Kr.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),f0=64*1024,ud=t1&&n1(()=>xt.isReadableStream(new Response("").body)),Ch={stream:ud&&(e=>e.body)};Jh&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Ch[t]&&(Ch[t]=xt.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new Mn(`Response type '${t}' is not supported`,Mn.ERR_NOT_SUPPORT,r)})})})(new Response);const w4=async e=>{if(e==null)return 0;if(xt.isBlob(e))return e.size;if(xt.isSpecCompliantForm(e))return(await new Request(Kr.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(xt.isArrayBufferView(e)||xt.isArrayBuffer(e))return e.byteLength;if(xt.isURLSearchParams(e)&&(e=e+""),xt.isString(e))return(await y4(e)).byteLength},x4=async(e,t)=>{const n=xt.toFiniteNumber(e.getContentLength());return n??w4(t)},L4=Jh&&(async e=>{let{url:t,method:n,data:r,signal:o,cancelToken:a,timeout:u,onDownloadProgress:f,onUploadProgress:m,responseType:_,headers:w,withCredentials:b="same-origin",fetchOptions:E}=e1(e);_=_?(_+"").toLowerCase():"text";let x=m4([o,a&&a.toAbortSignal()],u),F;const N=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let U;try{if(m&&b4&&n!=="get"&&n!=="head"&&(U=await x4(w,r))!==0){let ye=new Request(t,{method:"POST",body:r,duplex:"half"}),Pe;if(xt.isFormData(r)&&(Pe=ye.headers.get("content-type"))&&w.setContentType(Pe),ye.body){const[Ce,de]=l0(U,Lh(u0(m)));r=h0(ye.body,f0,Ce,de)}}xt.isString(b)||(b=b?"include":"omit");const j="credentials"in Request.prototype;F=new Request(t,{...E,signal:x,method:n.toUpperCase(),headers:w.normalize().toJSON(),body:r,duplex:"half",credentials:j?b:void 0});let ne=await fetch(F);const ae=ud&&(_==="stream"||_==="response");if(ud&&(f||ae&&N)){const ye={};["status","statusText","headers"].forEach(Be=>{ye[Be]=ne[Be]});const Pe=xt.toFiniteNumber(ne.headers.get("content-length")),[Ce,de]=f&&l0(Pe,Lh(u0(f),!0))||[];ne=new Response(h0(ne.body,f0,Ce,()=>{de&&de(),N&&N()}),ye)}_=_||"text";let be=await Ch[xt.findKey(Ch,_)||"text"](ne,e);return!ae&&N&&N(),await new Promise((ye,Pe)=>{Xg(ye,Pe,{data:be,headers:Ts.from(ne.headers),status:ne.status,statusText:ne.statusText,config:e,request:F})})}catch(j){throw N&&N(),j&&j.name==="TypeError"&&/fetch/i.test(j.message)?Object.assign(new Mn("Network Error",Mn.ERR_NETWORK,e,F),{cause:j.cause||j}):Mn.from(j,j&&j.code,e,F)}}),cd={http:F2,xhr:p4,fetch:L4};xt.forEach(cd,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const d0=e=>`- ${e}`,C4=e=>xt.isFunction(e)||e===null||e===!1,i1={getAdapter:e=>{e=xt.isArray(e)?e:[e];const{length:t}=e;let n,r;const o={};for(let a=0;a<t;a++){n=e[a];let u;if(r=n,!C4(n)&&(r=cd[(u=String(n)).toLowerCase()],r===void 0))throw new Mn(`Unknown adapter '${u}'`);if(r)break;o[u||"#"+a]=r}if(!r){const a=Object.entries(o).map(([f,m])=>`adapter ${f} `+(m===!1?"is not supported by the environment":"is not available in the build"));let u=t?a.length>1?`since :
`+a.map(d0).join(`
`):" "+d0(a[0]):"as no adapter specified";throw new Mn("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return r},adapters:cd};function Af(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ju(null,e)}function p0(e){return Af(e),e.headers=Ts.from(e.headers),e.data=Ef.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),i1.getAdapter(e.adapter||Tc.adapter)(e).then(function(r){return Af(e),r.data=Ef.call(e,e.transformResponse,r),r.headers=Ts.from(r.headers),r},function(r){return Yg(r)||(Af(e),r&&r.response&&(r.response.data=Ef.call(e,e.transformResponse,r.response),r.response.headers=Ts.from(r.response.headers))),Promise.reject(r)})}const r1="1.7.9",Yh={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Yh[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const m0={};Yh.transitional=function(t,n,r){function o(a,u){return"[Axios v"+r1+"] Transitional option '"+a+"'"+u+(r?". "+r:"")}return(a,u,f)=>{if(t===!1)throw new Mn(o(u," has been removed"+(n?" in "+n:"")),Mn.ERR_DEPRECATED);return n&&!m0[u]&&(m0[u]=!0,console.warn(o(u," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(a,u,f):!0}};Yh.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function k4(e,t,n){if(typeof e!="object")throw new Mn("options must be an object",Mn.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;for(;o-- >0;){const a=r[o],u=t[a];if(u){const f=e[a],m=f===void 0||u(f,a,e);if(m!==!0)throw new Mn("option "+a+" must be "+m,Mn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Mn("Unknown option "+a,Mn.ERR_BAD_OPTION)}}const ah={assertOptions:k4,validators:Yh},ha=ah.validators;let eu=class{constructor(t){this.defaults=t,this.interceptors={request:new o0,response:new o0}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const a=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=ru(this.defaults,n);const{transitional:r,paramsSerializer:o,headers:a}=n;r!==void 0&&ah.assertOptions(r,{silentJSONParsing:ha.transitional(ha.boolean),forcedJSONParsing:ha.transitional(ha.boolean),clarifyTimeoutError:ha.transitional(ha.boolean)},!1),o!=null&&(xt.isFunction(o)?n.paramsSerializer={serialize:o}:ah.assertOptions(o,{encode:ha.function,serialize:ha.function},!0)),ah.assertOptions(n,{baseUrl:ha.spelling("baseURL"),withXsrfToken:ha.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let u=a&&xt.merge(a.common,a[n.method]);a&&xt.forEach(["delete","get","head","post","put","patch","common"],F=>{delete a[F]}),n.headers=Ts.concat(u,a);const f=[];let m=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(n)===!1||(m=m&&N.synchronous,f.unshift(N.fulfilled,N.rejected))});const _=[];this.interceptors.response.forEach(function(N){_.push(N.fulfilled,N.rejected)});let w,b=0,E;if(!m){const F=[p0.bind(this),void 0];for(F.unshift.apply(F,f),F.push.apply(F,_),E=F.length,w=Promise.resolve(n);b<E;)w=w.then(F[b++],F[b++]);return w}E=f.length;let x=n;for(b=0;b<E;){const F=f[b++],N=f[b++];try{x=F(x)}catch(U){N.call(this,U);break}}try{w=p0.call(this,x)}catch(F){return Promise.reject(F)}for(b=0,E=_.length;b<E;)w=w.then(_[b++],_[b++]);return w}getUri(t){t=ru(this.defaults,t);const n=Qg(t.baseURL,t.url);return Zg(n,t.params,t.paramsSerializer)}};xt.forEach(["delete","get","head","options"],function(t){eu.prototype[t]=function(n,r){return this.request(ru(r||{},{method:t,url:n,data:(r||{}).data}))}});xt.forEach(["post","put","patch"],function(t){function n(r){return function(a,u,f){return this.request(ru(f||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:u}))}}eu.prototype[t]=n(),eu.prototype[t+"Form"]=n(!0)});let P4=class s1{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const r=this;this.promise.then(o=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](o);r._listeners=null}),this.promise.then=o=>{let a;const u=new Promise(f=>{r.subscribe(f),a=f}).then(o);return u.cancel=function(){r.unsubscribe(a)},u},t(function(a,u,f){r.reason||(r.reason=new ju(a,u,f),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new s1(function(o){t=o}),cancel:t}}};function S4(e){return function(n){return e.apply(null,n)}}function E4(e){return xt.isObject(e)&&e.isAxiosError===!0}const hd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(hd).forEach(([e,t])=>{hd[t]=e});function o1(e){const t=new eu(e),n=Rg(eu.prototype.request,t);return xt.extend(n,eu.prototype,t,{allOwnKeys:!0}),xt.extend(n,t,null,{allOwnKeys:!0}),n.create=function(o){return o1(ru(e,o))},n}const Wi=o1(Tc);Wi.Axios=eu;Wi.CanceledError=ju;Wi.CancelToken=P4;Wi.isCancel=Yg;Wi.VERSION=r1;Wi.toFormData=Kh;Wi.AxiosError=Mn;Wi.Cancel=Wi.CanceledError;Wi.all=function(t){return Promise.all(t)};Wi.spread=S4;Wi.isAxiosError=E4;Wi.mergeConfig=ru;Wi.AxiosHeaders=Ts;Wi.formToJSON=e=>Jg(xt.isHTMLForm(e)?new FormData(e):e);Wi.getAdapter=i1.getAdapter;Wi.HttpStatusCode=hd;Wi.default=Wi;const{Axios:CS,AxiosError:kS,CanceledError:PS,isCancel:SS,CancelToken:ES,VERSION:AS,all:MS,Cancel:BS,isAxiosError:TS,spread:NS,toFormData:DS,AxiosHeaders:OS,HttpStatusCode:RS,formToJSON:IS,getAdapter:FS,mergeConfig:jS}=Wi,Ln=Wi.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});function a1(e){var r;const n=`; ${document.cookie}`.split(`; ${e}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}Ln.interceptors.request.use(e=>{const t=a1("access_token");return t&&(e.headers.Authorization=`Bearer ${t}`),console.log("Request config:",{url:e.url,method:e.method,headers:e.headers,withCredentials:e.withCredentials}),e},e=>(console.error("Request interceptor error:",e),Promise.reject(e)));Ln.interceptors.response.use(e=>e,async e=>{var n;const t=e.config;if(((n=e.response)==null?void 0:n.status)===401&&!t._retry){t._retry=!0;try{await ds().refreshToken();const o=a1("access_token");if(o)return t.headers.Authorization=`Bearer ${o}`,Ln(t)}catch(r){console.error("Token refresh failed:",r),window.location.href="/login"}}return Promise.reject(e)});Ln.defaults.baseURL="/api";Ln.defaults.headers.common["Content-Type"]="application/json";Ln.defaults.withCredentials=!0;function kh(e){var r;const n=`; ${document.cookie}`.split(`; ${e}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}Ln.interceptors.request.use(e=>{const t=kh("access_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>(console.error("Request interceptor error:",e),Promise.reject(e)));Ln.interceptors.response.use(e=>e,async e=>{var r,o;const t=ds(),n=e.config;if(((r=e.response)==null?void 0:r.status)===401&&!n._retry&&!((o=n.url)!=null&&o.includes("/token/refresh/"))){n._retry=!0;try{if(!kh("access_token"))throw new Error("No token available");await t.refreshToken();const u=kh("access_token");if(u)return n.headers.Authorization=`Bearer ${u}`,Ln(n)}catch(a){console.error("Token refresh failed:",a),await t.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(e)});function A4(e,t,n=1){const r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);const o=`expires=${r.toUTCString()}`;document.cookie=`${e}=${t};${o};path=/;secure;samesite=Strict`}function Kl(e){if(!e)return"Non spcifi";const t=`${e.first_name} ${e.last_name.toUpperCase()}`;return e.company_name?`${t} (${e.company_name})`:t}const ds=Zd("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,concessionnaires:[]}),getters:{isAdmin:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="admin"},isDealer:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="dealer"},isClient:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="client"},currentUser:e=>e.user,hasDealer:e=>{var t;return!!((t=e.user)!=null&&t.dealer)}},actions:{async initialize(e){if(!e){const n=await this.restoreSession();return this.initialized=!0,n}if(e.isAuthenticated&&e.user)return this.user=e.user,this.isAuthenticated=!0,this.mustChangePassword=e.user.must_change_password||!1,this.initialized=!0,!0;const t=await this.restoreSession();return this.initialized=!0,t},async restoreSession(){try{if(!kh("access_token"))return this.isAuthenticated=!1,this.user=null,!1;const t=await Ln.post("/token/refresh/");return t.data.user?(this.user=t.data.user,this.isAuthenticated=!0,this.mustChangePassword=t.data.user.must_change_password||!1,!0):(await this.fetchUserProfile(),!0)}catch(e){return console.error("Failed to restore session:",e),this.isAuthenticated=!1,this.user=null,!1}},async login(e,t){var n,r,o;try{const a=await Ln.post("/token/",{username:e,password:t});if(!a.data.access)throw new Error("Token d'accs non reu");document.cookie=`access_token=${a.data.access}; path=/; secure; samesite=Strict`;const u=await this.fetchUserProfile();return this.user=u,this.isAuthenticated=!0,!0}catch(a){throw this.isAuthenticated=!1,this.user=null,((n=a.response)==null?void 0:n.status)===401?new Error("Identifiants incorrects"):(o=(r=a.response)==null?void 0:r.data)!=null&&o.detail?new Error(a.response.data.detail):a}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const e=await Ln.get("/users/me/");return this.user=e.data,this.isAuthenticated=!0,this.mustChangePassword=e.data.must_change_password||!1,e.data}catch(e){throw this.isAuthenticated=!1,this.user=null,e}},async changePassword(e,t){try{const n=await Ln.post("/users/change_password/",{old_password:e,password:t});return this.user={...this.user,must_change_password:!1},n.data}catch(n){throw console.error("Password change error:",n),n}},async refreshToken(){var e,t,n,r;try{const o=await Ln.post("/token/refresh/",{},{withCredentials:!0}),{access:a}=o.data;if(!a)throw new Error("No access token received");return A4("access_token",a,1),this.isAuthenticated=!0,a}catch(o){throw console.error("Error refreshing token:",{status:(e=o.response)==null?void 0:e.status,data:(t=o.response)==null?void 0:t.data}),(((n=o.response)==null?void 0:n.status)===401||((r=o.response)==null?void 0:r.status)===403)&&await this.logout(),o}},async fetchConcessionnaires(){this.loading=!0;try{const e=await Ln.get("/users/",{params:{role:"dealer"}});this.concessionnaires=e.data}catch(e){throw this.error="Erreur lors de la rcupration des concessionnaires",e}finally{this.loading=!1}},async setConcessionnaire(e,t){this.loading=!0;try{await Ln.patch(`/users/${e}/`,{concessionnaire:t}),this.user&&this.user.id===e&&(this.user.dealer=t)}catch(n){throw this.error="Erreur lors de la mise  jour du concessionnaire",n}finally{this.loading=!1}},async createUser(e){this.loading=!0;try{return(await Ln.post("/users/",e)).data}catch(t){throw this.error="Erreur lors de la cration de l'utilisateur",t}finally{this.loading=!1}},async updateUserRole(e,t){this.loading=!0;try{const n=await Ln.patch(`/users/${e}/`,{role:t});return this.user&&this.user.id===e&&(this.user.user_type=t),n.data}catch(n){throw this.error="Erreur lors de la mise  jour du rle",n}finally{this.loading=!1}},async updateUserEmail(e){var t;this.loading=!0;try{const n=await Ln.patch(`/users/${(t=this.user)==null?void 0:t.id}/`,{email:e});return this.user&&(this.user.email=e),n.data}catch(n){throw this.error="Erreur lors de la mise  jour de l'email",n}finally{this.loading=!1}},checkAccess(e){return this.user?e.includes(this.user.user_type):!1}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const wu=typeof document<"u";function l1(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function M4(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&l1(e.default)}const ni=Object.assign;function Mf(e,t){const n={};for(const r in t){const o=t[r];n[r]=Vo(o)?o.map(e):e(o)}return n}const hc=()=>{},Vo=Array.isArray,u1=/#/g,B4=/&/g,T4=/\//g,N4=/=/g,D4=/\?/g,c1=/\+/g,O4=/%5B/g,R4=/%5D/g,h1=/%5E/g,I4=/%60/g,f1=/%7B/g,F4=/%7C/g,d1=/%7D/g,j4=/%20/g;function Xd(e){return encodeURI(""+e).replace(F4,"|").replace(O4,"[").replace(R4,"]")}function z4(e){return Xd(e).replace(f1,"{").replace(d1,"}").replace(h1,"^")}function fd(e){return Xd(e).replace(c1,"%2B").replace(j4,"+").replace(u1,"%23").replace(B4,"%26").replace(I4,"`").replace(f1,"{").replace(d1,"}").replace(h1,"^")}function U4(e){return fd(e).replace(N4,"%3D")}function q4(e){return Xd(e).replace(u1,"%23").replace(D4,"%3F")}function $4(e){return e==null?"":q4(e).replace(T4,"%2F")}function xc(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const V4=/\/$/,H4=e=>e.replace(V4,"");function Bf(e,t,n="/"){let r,o={},a="",u="";const f=t.indexOf("#");let m=t.indexOf("?");return f<m&&f>=0&&(m=-1),m>-1&&(r=t.slice(0,m),a=t.slice(m+1,f>-1?f:t.length),o=e(a)),f>-1&&(r=r||t.slice(0,f),u=t.slice(f,t.length)),r=K4(r??t,n),{fullPath:r+(a&&"?")+a+u,path:r,query:o,hash:xc(u)}}function G4(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function g0(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function W4(e,t,n){const r=t.matched.length-1,o=n.matched.length-1;return r>-1&&r===o&&Ou(t.matched[r],n.matched[o])&&p1(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Ou(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function p1(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Z4(e[n],t[n]))return!1;return!0}function Z4(e,t){return Vo(e)?v0(e,t):Vo(t)?v0(t,e):e===t}function v0(e,t){return Vo(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function K4(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),o=r[r.length-1];(o===".."||o===".")&&r.push("");let a=n.length-1,u,f;for(u=0;u<r.length;u++)if(f=r[u],f!==".")if(f==="..")a>1&&a--;else break;return n.slice(0,a).join("/")+"/"+r.slice(u).join("/")}const fl={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Lc;(function(e){e.pop="pop",e.push="push"})(Lc||(Lc={}));var fc;(function(e){e.back="back",e.forward="forward",e.unknown=""})(fc||(fc={}));function J4(e){if(!e)if(wu){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),H4(e)}const Y4=/^[^#]+#/;function X4(e,t){return e.replace(Y4,"#")+t}function Q4(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const Xh=()=>({left:window.scrollX,top:window.scrollY});function e5(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;t=Q4(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function _0(e,t){return(history.state?history.state.position-t:-1)+e}const dd=new Map;function t5(e,t){dd.set(e,t)}function n5(e){const t=dd.get(e);return dd.delete(e),t}let i5=()=>location.protocol+"//"+location.host;function m1(e,t){const{pathname:n,search:r,hash:o}=t,a=e.indexOf("#");if(a>-1){let f=o.includes(e.slice(a))?e.slice(a).length:1,m=o.slice(f);return m[0]!=="/"&&(m="/"+m),g0(m,"")}return g0(n,e)+r+o}function r5(e,t,n,r){let o=[],a=[],u=null;const f=({state:E})=>{const x=m1(e,location),F=n.value,N=t.value;let U=0;if(E){if(n.value=x,t.value=E,u&&u===F){u=null;return}U=N?E.position-N.position:0}else r(x);o.forEach(j=>{j(n.value,F,{delta:U,type:Lc.pop,direction:U?U>0?fc.forward:fc.back:fc.unknown})})};function m(){u=n.value}function _(E){o.push(E);const x=()=>{const F=o.indexOf(E);F>-1&&o.splice(F,1)};return a.push(x),x}function w(){const{history:E}=window;E.state&&E.replaceState(ni({},E.state,{scroll:Xh()}),"")}function b(){for(const E of a)E();a=[],window.removeEventListener("popstate",f),window.removeEventListener("beforeunload",w)}return window.addEventListener("popstate",f),window.addEventListener("beforeunload",w,{passive:!0}),{pauseListeners:m,listen:_,destroy:b}}function y0(e,t,n,r=!1,o=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:o?Xh():null}}function s5(e){const{history:t,location:n}=window,r={value:m1(e,n)},o={value:t.state};o.value||a(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(m,_,w){const b=e.indexOf("#"),E=b>-1?(n.host&&document.querySelector("base")?e:e.slice(b))+m:i5()+e+m;try{t[w?"replaceState":"pushState"](_,"",E),o.value=_}catch(x){console.error(x),n[w?"replace":"assign"](E)}}function u(m,_){const w=ni({},t.state,y0(o.value.back,m,o.value.forward,!0),_,{position:o.value.position});a(m,w,!0),r.value=m}function f(m,_){const w=ni({},o.value,t.state,{forward:m,scroll:Xh()});a(w.current,w,!0);const b=ni({},y0(r.value,m,null),{position:w.position+1},_);a(m,b,!1),r.value=m}return{location:r,state:o,push:f,replace:u}}function o5(e){e=J4(e);const t=s5(e),n=r5(e,t.state,t.location,t.replace);function r(a,u=!0){u||n.pauseListeners(),history.go(a)}const o=ni({location:"",base:e,go:r,createHref:X4.bind(null,e)},t,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function a5(e){return typeof e=="string"||e&&typeof e=="object"}function g1(e){return typeof e=="string"||typeof e=="symbol"}const v1=Symbol("");var b0;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(b0||(b0={}));function Ru(e,t){return ni(new Error,{type:e,[v1]:!0},t)}function ja(e,t){return e instanceof Error&&v1 in e&&(t==null||!!(e.type&t))}const w0="[^/]+?",l5={sensitive:!1,strict:!1,start:!0,end:!0},u5=/[.+*?^${}()[\]/\\]/g;function c5(e,t){const n=ni({},l5,t),r=[];let o=n.start?"^":"";const a=[];for(const _ of e){const w=_.length?[]:[90];n.strict&&!_.length&&(o+="/");for(let b=0;b<_.length;b++){const E=_[b];let x=40+(n.sensitive?.25:0);if(E.type===0)b||(o+="/"),o+=E.value.replace(u5,"\\$&"),x+=40;else if(E.type===1){const{value:F,repeatable:N,optional:U,regexp:j}=E;a.push({name:F,repeatable:N,optional:U});const ne=j||w0;if(ne!==w0){x+=10;try{new RegExp(`(${ne})`)}catch(be){throw new Error(`Invalid custom RegExp for param "${F}" (${ne}): `+be.message)}}let ae=N?`((?:${ne})(?:/(?:${ne}))*)`:`(${ne})`;b||(ae=U&&_.length<2?`(?:/${ae})`:"/"+ae),U&&(ae+="?"),o+=ae,x+=20,U&&(x+=-8),N&&(x+=-20),ne===".*"&&(x+=-50)}w.push(x)}r.push(w)}if(n.strict&&n.end){const _=r.length-1;r[_][r[_].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const u=new RegExp(o,n.sensitive?"":"i");function f(_){const w=_.match(u),b={};if(!w)return null;for(let E=1;E<w.length;E++){const x=w[E]||"",F=a[E-1];b[F.name]=x&&F.repeatable?x.split("/"):x}return b}function m(_){let w="",b=!1;for(const E of e){(!b||!w.endsWith("/"))&&(w+="/"),b=!1;for(const x of E)if(x.type===0)w+=x.value;else if(x.type===1){const{value:F,repeatable:N,optional:U}=x,j=F in _?_[F]:"";if(Vo(j)&&!N)throw new Error(`Provided param "${F}" is an array but it is not repeatable (* or + modifiers)`);const ne=Vo(j)?j.join("/"):j;if(!ne)if(U)E.length<2&&(w.endsWith("/")?w=w.slice(0,-1):b=!0);else throw new Error(`Missing required param "${F}"`);w+=ne}}return w||"/"}return{re:u,score:r,keys:a,parse:f,stringify:m}}function h5(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function _1(e,t){let n=0;const r=e.score,o=t.score;for(;n<r.length&&n<o.length;){const a=h5(r[n],o[n]);if(a)return a;n++}if(Math.abs(o.length-r.length)===1){if(x0(r))return 1;if(x0(o))return-1}return o.length-r.length}function x0(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const f5={type:0,value:""},d5=/[a-zA-Z0-9_]/;function p5(e){if(!e)return[[]];if(e==="/")return[[f5]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(x){throw new Error(`ERR (${n})/"${_}": ${x}`)}let n=0,r=n;const o=[];let a;function u(){a&&o.push(a),a=[]}let f=0,m,_="",w="";function b(){_&&(n===0?a.push({type:0,value:_}):n===1||n===2||n===3?(a.length>1&&(m==="*"||m==="+")&&t(`A repeatable param (${_}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:_,regexp:w,repeatable:m==="*"||m==="+",optional:m==="*"||m==="?"})):t("Invalid state to consume buffer"),_="")}function E(){_+=m}for(;f<e.length;){if(m=e[f++],m==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:m==="/"?(_&&b(),u()):m===":"?(b(),n=1):E();break;case 4:E(),n=r;break;case 1:m==="("?n=2:d5.test(m)?E():(b(),n=0,m!=="*"&&m!=="?"&&m!=="+"&&f--);break;case 2:m===")"?w[w.length-1]=="\\"?w=w.slice(0,-1)+m:n=3:w+=m;break;case 3:b(),n=0,m!=="*"&&m!=="?"&&m!=="+"&&f--,w="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${_}"`),b(),u(),o}function m5(e,t,n){const r=c5(p5(e.path),n),o=ni(r,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function g5(e,t){const n=[],r=new Map;t=P0({strict:!1,end:!0,sensitive:!1},t);function o(b){return r.get(b)}function a(b,E,x){const F=!x,N=C0(b);N.aliasOf=x&&x.record;const U=P0(t,b),j=[N];if("alias"in b){const be=typeof b.alias=="string"?[b.alias]:b.alias;for(const ye of be)j.push(C0(ni({},N,{components:x?x.record.components:N.components,path:ye,aliasOf:x?x.record:N})))}let ne,ae;for(const be of j){const{path:ye}=be;if(E&&ye[0]!=="/"){const Pe=E.record.path,Ce=Pe[Pe.length-1]==="/"?"":"/";be.path=E.record.path+(ye&&Ce+ye)}if(ne=m5(be,E,U),x?x.alias.push(ne):(ae=ae||ne,ae!==ne&&ae.alias.push(ne),F&&b.name&&!k0(ne)&&u(b.name)),y1(ne)&&m(ne),N.children){const Pe=N.children;for(let Ce=0;Ce<Pe.length;Ce++)a(Pe[Ce],ne,x&&x.children[Ce])}x=x||ne}return ae?()=>{u(ae)}:hc}function u(b){if(g1(b)){const E=r.get(b);E&&(r.delete(b),n.splice(n.indexOf(E),1),E.children.forEach(u),E.alias.forEach(u))}else{const E=n.indexOf(b);E>-1&&(n.splice(E,1),b.record.name&&r.delete(b.record.name),b.children.forEach(u),b.alias.forEach(u))}}function f(){return n}function m(b){const E=y5(b,n);n.splice(E,0,b),b.record.name&&!k0(b)&&r.set(b.record.name,b)}function _(b,E){let x,F={},N,U;if("name"in b&&b.name){if(x=r.get(b.name),!x)throw Ru(1,{location:b});U=x.record.name,F=ni(L0(E.params,x.keys.filter(ae=>!ae.optional).concat(x.parent?x.parent.keys.filter(ae=>ae.optional):[]).map(ae=>ae.name)),b.params&&L0(b.params,x.keys.map(ae=>ae.name))),N=x.stringify(F)}else if(b.path!=null)N=b.path,x=n.find(ae=>ae.re.test(N)),x&&(F=x.parse(N),U=x.record.name);else{if(x=E.name?r.get(E.name):n.find(ae=>ae.re.test(E.path)),!x)throw Ru(1,{location:b,currentLocation:E});U=x.record.name,F=ni({},E.params,b.params),N=x.stringify(F)}const j=[];let ne=x;for(;ne;)j.unshift(ne.record),ne=ne.parent;return{name:U,path:N,params:F,matched:j,meta:_5(j)}}e.forEach(b=>a(b));function w(){n.length=0,r.clear()}return{addRoute:a,resolve:_,removeRoute:u,clearRoutes:w,getRoutes:f,getRecordMatcher:o}}function L0(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function C0(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:v5(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function v5(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function k0(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function _5(e){return e.reduce((t,n)=>ni(t,n.meta),{})}function P0(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function y5(e,t){let n=0,r=t.length;for(;n!==r;){const a=n+r>>1;_1(e,t[a])<0?r=a:n=a+1}const o=b5(e);return o&&(r=t.lastIndexOf(o,r-1)),r}function b5(e){let t=e;for(;t=t.parent;)if(y1(t)&&_1(e,t)===0)return t}function y1({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function w5(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let o=0;o<r.length;++o){const a=r[o].replace(c1," "),u=a.indexOf("="),f=xc(u<0?a:a.slice(0,u)),m=u<0?null:xc(a.slice(u+1));if(f in t){let _=t[f];Vo(_)||(_=t[f]=[_]),_.push(m)}else t[f]=m}return t}function S0(e){let t="";for(let n in e){const r=e[n];if(n=U4(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(Vo(r)?r.map(a=>a&&fd(a)):[r&&fd(r)]).forEach(a=>{a!==void 0&&(t+=(t.length?"&":"")+n,a!=null&&(t+="="+a))})}return t}function x5(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=Vo(r)?r.map(o=>o==null?null:""+o):r==null?r:""+r)}return t}const L5=Symbol(""),E0=Symbol(""),Qh=Symbol(""),Qd=Symbol(""),pd=Symbol("");function Ju(){let e=[];function t(r){return e.push(r),()=>{const o=e.indexOf(r);o>-1&&e.splice(o,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function yl(e,t,n,r,o,a=u=>u()){const u=r&&(r.enterCallbacks[o]=r.enterCallbacks[o]||[]);return()=>new Promise((f,m)=>{const _=E=>{E===!1?m(Ru(4,{from:n,to:t})):E instanceof Error?m(E):a5(E)?m(Ru(2,{from:t,to:E})):(u&&r.enterCallbacks[o]===u&&typeof E=="function"&&u.push(E),f())},w=a(()=>e.call(r&&r.instances[o],t,n,_));let b=Promise.resolve(w);e.length<3&&(b=b.then(_)),b.catch(E=>m(E))})}function Tf(e,t,n,r,o=a=>a()){const a=[];for(const u of e)for(const f in u.components){let m=u.components[f];if(!(t!=="beforeRouteEnter"&&!u.instances[f]))if(l1(m)){const w=(m.__vccOpts||m)[t];w&&a.push(yl(w,n,r,u,f,o))}else{let _=m();a.push(()=>_.then(w=>{if(!w)throw new Error(`Couldn't resolve component "${f}" at "${u.path}"`);const b=M4(w)?w.default:w;u.mods[f]=w,u.components[f]=b;const x=(b.__vccOpts||b)[t];return x&&yl(x,n,r,u,f,o)()}))}}return a}function A0(e){const t=_o(Qh),n=_o(Qd),r=Nn(()=>{const m=Dn(e.to);return t.resolve(m)}),o=Nn(()=>{const{matched:m}=r.value,{length:_}=m,w=m[_-1],b=n.matched;if(!w||!b.length)return-1;const E=b.findIndex(Ou.bind(null,w));if(E>-1)return E;const x=M0(m[_-2]);return _>1&&M0(w)===x&&b[b.length-1].path!==x?b.findIndex(Ou.bind(null,m[_-2])):E}),a=Nn(()=>o.value>-1&&S5(n.params,r.value.params)),u=Nn(()=>o.value>-1&&o.value===n.matched.length-1&&p1(n.params,r.value.params));function f(m={}){if(P5(m)){const _=t[Dn(e.replace)?"replace":"push"](Dn(e.to)).catch(hc);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>_),_}return Promise.resolve()}return{route:r,href:Nn(()=>r.value.href),isActive:a,isExactActive:u,navigate:f}}function C5(e){return e.length===1?e[0]:e}const k5=ps({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:A0,setup(e,{slots:t}){const n=Wa(A0(e)),{options:r}=_o(Qh),o=Nn(()=>({[B0(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[B0(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const a=t.default&&C5(t.default(n));return e.custom?a:Gd("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},a)}}}),xu=k5;function P5(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function S5(e,t){for(const n in t){const r=t[n],o=e[n];if(typeof r=="string"){if(r!==o)return!1}else if(!Vo(o)||o.length!==r.length||r.some((a,u)=>a!==o[u]))return!1}return!0}function M0(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const B0=(e,t,n)=>e??t??n,E5=ps({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=_o(pd),o=Nn(()=>e.route||r.value),a=_o(E0,0),u=Nn(()=>{let _=Dn(a);const{matched:w}=o.value;let b;for(;(b=w[_])&&!b.components;)_++;return _}),f=Nn(()=>o.value.matched[u.value]);th(E0,Nn(()=>u.value+1)),th(L5,f),th(pd,o);const m=It();return fs(()=>[m.value,f.value,e.name],([_,w,b],[E,x,F])=>{w&&(w.instances[b]=_,x&&x!==w&&_&&_===E&&(w.leaveGuards.size||(w.leaveGuards=x.leaveGuards),w.updateGuards.size||(w.updateGuards=x.updateGuards))),_&&w&&(!x||!Ou(w,x)||!E)&&(w.enterCallbacks[b]||[]).forEach(N=>N(_))},{flush:"post"}),()=>{const _=o.value,w=e.name,b=f.value,E=b&&b.components[w];if(!E)return T0(n.default,{Component:E,route:_});const x=b.props[w],F=x?x===!0?_.params:typeof x=="function"?x(_):x:null,U=Gd(E,ni({},F,t,{onVnodeUnmounted:j=>{j.component.isUnmounted&&(b.instances[w]=null)},ref:m}));return T0(n.default,{Component:U,route:_})||U}}});function T0(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const b1=E5;function A5(e){const t=g5(e.routes,e),n=e.parseQuery||w5,r=e.stringifyQuery||S0,o=e.history,a=Ju(),u=Ju(),f=Ju(),m=Gv(fl);let _=fl;wu&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const w=Mf.bind(null,le=>""+le),b=Mf.bind(null,$4),E=Mf.bind(null,xc);function x(le,ge){let me,je;return g1(le)?(me=t.getRecordMatcher(le),je=ge):je=le,t.addRoute(je,me)}function F(le){const ge=t.getRecordMatcher(le);ge&&t.removeRoute(ge)}function N(){return t.getRoutes().map(le=>le.record)}function U(le){return!!t.getRecordMatcher(le)}function j(le,ge){if(ge=ni({},ge||m.value),typeof le=="string"){const Te=Bf(n,le,ge.path),Ee=t.resolve({path:Te.path},ge),ie=o.createHref(Te.fullPath);return ni(Te,Ee,{params:E(Ee.params),hash:xc(Te.hash),redirectedFrom:void 0,href:ie})}let me;if(le.path!=null)me=ni({},le,{path:Bf(n,le.path,ge.path).path});else{const Te=ni({},le.params);for(const Ee in Te)Te[Ee]==null&&delete Te[Ee];me=ni({},le,{params:b(Te)}),ge.params=b(ge.params)}const je=t.resolve(me,ge),$e=le.hash||"";je.params=w(E(je.params));const X=G4(r,ni({},le,{hash:z4($e),path:je.path})),se=o.createHref(X);return ni({fullPath:X,hash:$e,query:r===S0?x5(le.query):le.query||{}},je,{redirectedFrom:void 0,href:se})}function ne(le){return typeof le=="string"?Bf(n,le,m.value.path):ni({},le)}function ae(le,ge){if(_!==le)return Ru(8,{from:ge,to:le})}function be(le){return Ce(le)}function ye(le){return be(ni(ne(le),{replace:!0}))}function Pe(le){const ge=le.matched[le.matched.length-1];if(ge&&ge.redirect){const{redirect:me}=ge;let je=typeof me=="function"?me(le):me;return typeof je=="string"&&(je=je.includes("?")||je.includes("#")?je=ne(je):{path:je},je.params={}),ni({query:le.query,hash:le.hash,params:je.path!=null?{}:le.params},je)}}function Ce(le,ge){const me=_=j(le),je=m.value,$e=le.state,X=le.force,se=le.replace===!0,Te=Pe(me);if(Te)return Ce(ni(ne(Te),{state:typeof Te=="object"?ni({},$e,Te.state):$e,force:X,replace:se}),ge||me);const Ee=me;Ee.redirectedFrom=ge;let ie;return!X&&W4(r,je,me)&&(ie=Ru(16,{to:Ee,from:je}),Ie(je,je,!0,!1)),(ie?Promise.resolve(ie):Ue(Ee,je)).catch(We=>ja(We)?ja(We,2)?We:z(We):W(We,Ee,je)).then(We=>{if(We){if(ja(We,2))return Ce(ni({replace:se},ne(We.to),{state:typeof We.to=="object"?ni({},$e,We.to.state):$e,force:X}),ge||Ee)}else We=H(Ee,je,!0,se,$e);return q(Ee,je,We),We})}function de(le,ge){const me=ae(le,ge);return me?Promise.reject(me):Promise.resolve()}function Be(le){const ge=$.values().next().value;return ge&&typeof ge.runWithContext=="function"?ge.runWithContext(le):le()}function Ue(le,ge){let me;const[je,$e,X]=M5(le,ge);me=Tf(je.reverse(),"beforeRouteLeave",le,ge);for(const Te of je)Te.leaveGuards.forEach(Ee=>{me.push(yl(Ee,le,ge))});const se=de.bind(null,le,ge);return me.push(se),J(me).then(()=>{me=[];for(const Te of a.list())me.push(yl(Te,le,ge));return me.push(se),J(me)}).then(()=>{me=Tf($e,"beforeRouteUpdate",le,ge);for(const Te of $e)Te.updateGuards.forEach(Ee=>{me.push(yl(Ee,le,ge))});return me.push(se),J(me)}).then(()=>{me=[];for(const Te of X)if(Te.beforeEnter)if(Vo(Te.beforeEnter))for(const Ee of Te.beforeEnter)me.push(yl(Ee,le,ge));else me.push(yl(Te.beforeEnter,le,ge));return me.push(se),J(me)}).then(()=>(le.matched.forEach(Te=>Te.enterCallbacks={}),me=Tf(X,"beforeRouteEnter",le,ge,Be),me.push(se),J(me))).then(()=>{me=[];for(const Te of u.list())me.push(yl(Te,le,ge));return me.push(se),J(me)}).catch(Te=>ja(Te,8)?Te:Promise.reject(Te))}function q(le,ge,me){f.list().forEach(je=>Be(()=>je(le,ge,me)))}function H(le,ge,me,je,$e){const X=ae(le,ge);if(X)return X;const se=ge===fl,Te=wu?history.state:{};me&&(je||se?o.replace(le.fullPath,ni({scroll:se&&Te&&Te.scroll},$e)):o.push(le.fullPath,$e)),m.value=le,Ie(le,ge,me,se),z()}let Se;function M(){Se||(Se=o.listen((le,ge,me)=>{if(!D.listening)return;const je=j(le),$e=Pe(je);if($e){Ce(ni($e,{replace:!0,force:!0}),je).catch(hc);return}_=je;const X=m.value;wu&&t5(_0(X.fullPath,me.delta),Xh()),Ue(je,X).catch(se=>ja(se,12)?se:ja(se,2)?(Ce(ni(ne(se.to),{force:!0}),je).then(Te=>{ja(Te,20)&&!me.delta&&me.type===Lc.pop&&o.go(-1,!1)}).catch(hc),Promise.reject()):(me.delta&&o.go(-me.delta,!1),W(se,je,X))).then(se=>{se=se||H(je,X,!1),se&&(me.delta&&!ja(se,8)?o.go(-me.delta,!1):me.type===Lc.pop&&ja(se,20)&&o.go(-1,!1)),q(je,X,se)}).catch(hc)}))}let Y=Ju(),Z=Ju(),re;function W(le,ge,me){z(le);const je=Z.list();return je.length?je.forEach($e=>$e(le,ge,me)):console.error(le),Promise.reject(le)}function Q(){return re&&m.value!==fl?Promise.resolve():new Promise((le,ge)=>{Y.add([le,ge])})}function z(le){return re||(re=!le,M(),Y.list().forEach(([ge,me])=>le?me(le):ge()),Y.reset()),le}function Ie(le,ge,me,je){const{scrollBehavior:$e}=e;if(!wu||!$e)return Promise.resolve();const X=!me&&n5(_0(le.fullPath,0))||(je||!me)&&history.state&&history.state.scroll||null;return as().then(()=>$e(le,ge,X)).then(se=>se&&e5(se)).catch(se=>W(se,le,ge))}const I=le=>o.go(le);let G;const $=new Set,D={currentRoute:m,listening:!0,addRoute:x,removeRoute:F,clearRoutes:t.clearRoutes,hasRoute:U,getRoutes:N,resolve:j,options:e,push:be,replace:ye,go:I,back:()=>I(-1),forward:()=>I(1),beforeEach:a.add,beforeResolve:u.add,afterEach:f.add,onError:Z.add,isReady:Q,install(le){const ge=this;le.component("RouterLink",xu),le.component("RouterView",b1),le.config.globalProperties.$router=ge,Object.defineProperty(le.config.globalProperties,"$route",{enumerable:!0,get:()=>Dn(m)}),wu&&!G&&m.value===fl&&(G=!0,be(o.location).catch($e=>{}));const me={};for(const $e in fl)Object.defineProperty(me,$e,{get:()=>m.value[$e],enumerable:!0});le.provide(Qh,ge),le.provide(Qd,$m(me)),le.provide(pd,m);const je=le.unmount;$.add(le),le.unmount=function(){$.delete(le),$.size<1&&(_=fl,Se&&Se(),Se=null,m.value=fl,G=!1,re=!1),je()}}};function J(le){return le.reduce((ge,me)=>ge.then(()=>Be(me)),Promise.resolve())}return D}function M5(e,t){const n=[],r=[],o=[],a=Math.max(t.matched.length,e.matched.length);for(let u=0;u<a;u++){const f=t.matched[u];f&&(e.matched.find(_=>Ou(_,f))?r.push(f):n.push(f));const m=e.matched[u];m&&(t.matched.find(_=>Ou(_,m))||o.push(m))}return[n,r,o]}function Nc(){return _o(Qh)}function zS(e){return _o(Qd)}var go=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function w1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function B5(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var x1=B5,T5=typeof go=="object"&&go&&go.Object===Object&&go,N5=T5,D5=N5,O5=typeof self=="object"&&self&&self.Object===Object&&self,R5=D5||O5||Function("return this")(),L1=R5,I5=L1,F5=function(){return I5.Date.now()},j5=F5,z5=/\s/;function U5(e){for(var t=e.length;t--&&z5.test(e.charAt(t)););return t}var q5=U5,$5=q5,V5=/^\s+/;function H5(e){return e&&e.slice(0,$5(e)+1).replace(V5,"")}var G5=H5,W5=L1,Z5=W5.Symbol,C1=Z5,N0=C1,k1=Object.prototype,K5=k1.hasOwnProperty,J5=k1.toString,Yu=N0?N0.toStringTag:void 0;function Y5(e){var t=K5.call(e,Yu),n=e[Yu];try{e[Yu]=void 0;var r=!0}catch{}var o=J5.call(e);return r&&(t?e[Yu]=n:delete e[Yu]),o}var X5=Y5,Q5=Object.prototype,eb=Q5.toString;function tb(e){return eb.call(e)}var nb=tb,D0=C1,ib=X5,rb=nb,sb="[object Null]",ob="[object Undefined]",O0=D0?D0.toStringTag:void 0;function ab(e){return e==null?e===void 0?ob:sb:O0&&O0 in Object(e)?ib(e):rb(e)}var lb=ab;function ub(e){return e!=null&&typeof e=="object"}var cb=ub,hb=lb,fb=cb,db="[object Symbol]";function pb(e){return typeof e=="symbol"||fb(e)&&hb(e)==db}var mb=pb,gb=G5,R0=x1,vb=mb,I0=NaN,_b=/^[-+]0x[0-9a-f]+$/i,yb=/^0b[01]+$/i,bb=/^0o[0-7]+$/i,wb=parseInt;function xb(e){if(typeof e=="number")return e;if(vb(e))return I0;if(R0(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=R0(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=gb(e);var n=yb.test(e);return n||bb.test(e)?wb(e.slice(2),n?2:8):_b.test(e)?I0:+e}var Lb=xb,Cb=x1,Nf=j5,F0=Lb,kb="Expected a function",Pb=Math.max,Sb=Math.min;function Eb(e,t,n){var r,o,a,u,f,m,_=0,w=!1,b=!1,E=!0;if(typeof e!="function")throw new TypeError(kb);t=F0(t)||0,Cb(n)&&(w=!!n.leading,b="maxWait"in n,a=b?Pb(F0(n.maxWait)||0,t):a,E="trailing"in n?!!n.trailing:E);function x(Pe){var Ce=r,de=o;return r=o=void 0,_=Pe,u=e.apply(de,Ce),u}function F(Pe){return _=Pe,f=setTimeout(j,t),w?x(Pe):u}function N(Pe){var Ce=Pe-m,de=Pe-_,Be=t-Ce;return b?Sb(Be,a-de):Be}function U(Pe){var Ce=Pe-m,de=Pe-_;return m===void 0||Ce>=t||Ce<0||b&&de>=a}function j(){var Pe=Nf();if(U(Pe))return ne(Pe);f=setTimeout(j,N(Pe))}function ne(Pe){return f=void 0,E&&r?x(Pe):(r=o=void 0,u)}function ae(){f!==void 0&&clearTimeout(f),_=0,r=m=o=f=void 0}function be(){return f===void 0?u:ne(Nf())}function ye(){var Pe=Nf(),Ce=U(Pe);if(r=arguments,o=this,m=Pe,Ce){if(f===void 0)return F(m);if(b)return clearTimeout(f),f=setTimeout(j,t),x(m)}return f===void 0&&(f=setTimeout(j,t)),u}return ye.cancel=ae,ye.flush=be,ye}var Ab=Eb;const Mb=w1(Ab),Bb={class:"relative w-full"},Tb={key:0,class:"absolute w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto z-[1001]"},Nb=["onClick"],Db=ps({__name:"SearchBar",emits:["select-location"],setup(e,{emit:t}){const n=It(""),r=It([]),o=t,a=Mb(async m=>{if(m.length<3){r.value=[];return}try{const w=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(m)}`)).json();r.value=w}catch(_){console.error("Erreur lors de la recherche d'adresse:",_),r.value=[]}},300);function u(){a(n.value)}function f(m){n.value=m.display_name,r.value=[],o("select-location",{lat:parseFloat(m.lat),lng:parseFloat(m.lon)})}return(m,_)=>(nt(),at("div",Bb,[kn(A("input",{"onUpdate:modelValue":_[0]||(_[0]=w=>n.value=w),onInput:u,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[ri,n.value]]),r.value.length>0?(nt(),at("div",Tb,[(nt(!0),at(gn,null,Un(r.value,w=>(nt(),at("div",{key:w.place_id,onClick:b=>f(w),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},kt(w.display_name),9,Nb))),128))])):tn("",!0)]))}}),ep=(e,t)=>{const n=e.__vccOpts||e;for(const[r,o]of t)n[r]=o;return n},j0=ep(Db,[["__scopeId","data-v-0102bcad"]]),Ob={class:"h-screen flex flex-col"},Rb={key:0,class:"bg-white shadow-sm z-[2000]"},Ib={class:"mx-auto px-4 sm:px-6 lg:px-8"},Fb={class:"flex h-16 items-center justify-between"},jb={class:"flex items-center space-x-8"},zb={class:"md:inline hidden"},Ub={key:0,class:"inline-flex items-center"},qb={key:1},$b={class:"md:hidden inline"},Vb={key:0,class:"inline-flex items-center"},Hb={key:1},Gb={class:"hidden md:flex space-x-6"},Wb={key:0,class:"hidden md:block flex-1 mx-8"},Zb={key:1,class:"flex-1"},Kb={class:"flex items-center space-x-2 md:space-x-4"},Jb={class:"flex md:hidden"},Yb={class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Xb={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},Qb={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},e3={class:"relative"},t3={class:"hidden md:flex flex-col items-end"},n3={class:"text-sm font-medium text-gray-700"},i3={key:0,class:"text-xs text-gray-500"},r3=["src","alt"],s3={key:0,class:"absolute right-0 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3000]"},o3={class:"md:hidden px-4 py-2 border-b border-gray-100"},a3={class:"text-sm font-medium text-gray-700"},l3={class:"text-xs text-gray-500"},u3={key:0,class:"md:hidden"},c3={class:"space-y-1 px-2 pb-3 pt-2"},h3={key:0,class:"px-4 py-3"},f3={class:"flex-1 overflow-auto"},d3={key:0,class:"fixed inset-0 bg-white z-[2001] flex flex-col items-center justify-center p-6 text-center"},p3=ps({__name:"App",setup(e){const t=Nc(),n=ds(),r=It(!1),o=It(!1),a=It(!1),u=It(!1);function f(){a.value=window.innerWidth<768}ba(()=>{f(),window.addEventListener("resize",f),new URLSearchParams(window.location.search).has("perf")&&(u.value=!0)}),zh(()=>{window.removeEventListener("resize",f)});async function m(){if(u.value)try{await PerformanceTracker.downloadReport()}catch(be){console.error("Erreur lors du tlchargement du rapport:",be)}}const _=Nn(()=>{const be=n.user;if(!be)return"";const ye=`${be.first_name} ${be.last_name.toUpperCase()}`;return be.company_name?`${ye} (${be.company_name})`:ye}),w=Nn(()=>{var ye;const be=(ye=n.user)==null?void 0:ye.user_type;switch(console.log("User type:",be),be){case"admin":return"Accs administrateur";case"dealer":return"Accs concessionnaire";case"client":return"Accs client";default:return""}}),b=Nn(()=>{var be;return((be=n.user)==null?void 0:be.user_type)==="admin"}),E=It(""),x=Nn(()=>n.isAuthenticated),F=[{name:"Carte",to:"/"},{name:"Plans",to:"/plans"}],N=Nn(()=>{var ye;if(!x.value)return[];const be=[...F];return b.value?be.push({name:"Utilisateurs",to:"/users"}):((ye=n.user)==null?void 0:ye.user_type)==="dealer"&&be.push({name:"Clients",to:"/clients"}),be}),U=Nn(()=>x.value?[{name:"Mon profil",to:"/profile"}]:[]);async function j(){try{await n.logout(),t.push("/login")}catch(be){console.error("Erreur lors de la dconnexion:",be)}}function ne(be){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:be.lat,lng:be.lng,zoom:16}}))}ba(async()=>{console.log("App mounted, checking auth...");try{localStorage.getItem("token")?(console.log("Token found, checking auth..."),await n.checkAuth(),await n.fetchUserProfile()):console.log("No token found")}catch(be){console.error("Auth check error:",be),t.push("/login")}});const ae=Nn(()=>{const be="IrrigationDesign";if(!x.value)return`${be} - Connexion`;const ye=t.currentRoute.value,Ce={home:"Carte",plans:"Plans",users:"Utilisateurs",profile:"Mon profil",selectDealer:"Slection du concessionnaire",changePassword:"Changement de mot de passe",map:"Carte"}[ye.name]||"";return Ce?`${be} - ${Ce}`:be});return fs(ae,be=>{document.title=be},{immediate:!0}),(be,ye)=>(nt(),at("div",Ob,[x.value?(nt(),at("header",Rb,[A("nav",Ib,[A("div",Fb,[A("div",jb,[Pi(Dn(xu),{to:"/",class:Ni(["text-xl font-semibold text-primary-600 truncate",{"cursor-download":u.value}]),onClick:ye[0]||(ye[0]=Mc(Pe=>u.value?m():be.$router.push("/"),["prevent"]))},{default:Ha(()=>[A("span",zb,[u.value?(nt(),at("span",Ub,ye[5]||(ye[5]=[ki(" IrrigationDesign "),A("span",{class:"ml-1 bg-red-100 text-red-800 text-xs px-1.5 py-0.5 rounded-full"},"PERF",-1)]))):(nt(),at("span",qb,"IrrigationDesign"))]),A("span",$b,[u.value?(nt(),at("span",Vb,ye[6]||(ye[6]=[ki(" ID "),A("span",{class:"ml-1 bg-red-100 text-red-800 text-xs px-1 py-0.5 rounded-full"},"PERF",-1)]))):(nt(),at("span",Hb,"ID"))])]),_:1},8,["class"]),A("div",Gb,[(nt(!0),at(gn,null,Un(N.value,Pe=>(nt(),ma(Dn(xu),{key:Pe.name,to:Pe.to,class:Ni(["text-sm font-medium transition-colors duration-200",[be.$route.path===Pe.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Ha(()=>[ki(kt(Pe.name),1)]),_:2},1032,["to","class"]))),128))])]),be.$route.path==="/"?(nt(),at("div",Wb,[Pi(j0,{onSelectLocation:ne})])):(nt(),at("div",Zb)),A("div",Kb,[A("div",Jb,[A("button",{onClick:ye[1]||(ye[1]=Pe=>o.value=!o.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500"},[ye[7]||(ye[7]=A("span",{class:"sr-only"},"Ouvrir le menu",-1)),(nt(),at("svg",Yb,[o.value?(nt(),at("path",Qb)):(nt(),at("path",Xb))]))])]),ye[8]||(ye[8]=A("button",{class:"hidden md:flex p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},[A("span",{class:"sr-only"},"Voir les notifications"),A("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})])],-1)),A("div",e3,[A("button",{onClick:ye[2]||(ye[2]=Pe=>r.value=!r.value),class:"flex items-center space-x-2 md:space-x-3 focus:outline-none"},[A("div",t3,[A("span",n3,kt(_.value),1),w.value?(nt(),at("span",i3,kt(w.value),1)):tn("",!0)]),A("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:E.value||"https://ui-avatars.com/api/?name="+encodeURIComponent(_.value),alt:_.value},null,8,r3)]),r.value?(nt(),at("div",s3,[A("div",o3,[A("div",a3,kt(_.value),1),A("div",l3,kt(w.value),1)]),(nt(!0),at(gn,null,Un(U.value,Pe=>(nt(),ma(Dn(xu),{key:Pe.name,to:Pe.to,class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:ye[3]||(ye[3]=Ce=>r.value=!1)},{default:Ha(()=>[ki(kt(Pe.name),1)]),_:2},1032,["to"]))),128)),A("button",{onClick:j,class:"block w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-gray-50"}," Dconnexion ")])):tn("",!0)])])]),o.value?(nt(),at("div",u3,[A("div",c3,[(nt(!0),at(gn,null,Un(N.value,Pe=>(nt(),ma(Dn(xu),{key:Pe.name,to:Pe.to,class:Ni(["block px-3 py-2 rounded-md text-base font-medium",[be.$route.path===Pe.to?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]]),onClick:ye[4]||(ye[4]=Ce=>o.value=!1)},{default:Ha(()=>[ki(kt(Pe.name),1)]),_:2},1032,["to","class"]))),128))]),be.$route.path==="/"?(nt(),at("div",h3,[Pi(j0,{onSelectLocation:ne})])):tn("",!0)])):tn("",!0)])])):tn("",!0),A("main",f3,[a.value&&be.$route.path==="/"?(nt(),at("div",d3,[ye[10]||(ye[10]=A("svg",{class:"w-24 h-24 text-primary-500 mb-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),ye[11]||(ye[11]=A("h2",{class:"text-2xl font-bold text-gray-900 mb-4"}," Version bureau recommande ",-1)),ye[12]||(ye[12]=A("p",{class:"text-gray-600 mb-8 max-w-md"}," Pour une meilleure exprience de conception d'irrigation, nous vous recommandons d'utiliser un cran plus large ou un ordinateur. ",-1)),Pi(Dn(xu),{to:"/plans",class:"inline-flex items-center px-4 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700"},{default:Ha(()=>ye[9]||(ye[9]=[ki(" Voir mes plans ")])),_:1})])):(nt(),ma(Dn(b1),{key:1}))])]))}}),m3="modulepreload",g3=function(e){return"/static/frontend/"+e},z0={},Jl=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));o=Promise.allSettled(n.map(m=>{if(m=g3(m),m in z0)return;z0[m]=!0;const _=m.endsWith(".css"),w=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${w}`))return;const b=document.createElement("link");if(b.rel=_?"stylesheet":m3,_||(b.as="script"),b.crossOrigin="",b.href=m,f&&b.setAttribute("nonce",f),document.head.appendChild(b),_)return new Promise((E,x)=>{b.addEventListener("load",E),b.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return o.then(u=>{for(const f of u||[])f.status==="rejected"&&a(f.reason);return t().catch(a)})},v3={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},_3={class:"max-w-md w-full space-y-8"},y3={class:"space-y-4"},b3={class:"mt-1"},w3={class:"mt-1"},x3={class:"mt-1"},L3={key:0,class:"rounded-md bg-red-50 p-4"},C3={class:"flex"},k3={class:"ml-3"},P3={class:"text-sm font-medium text-red-800"},S3={key:1,class:"rounded-md bg-yellow-50 p-4"},E3={class:"flex"},A3={class:"ml-3"},M3={class:"mt-2 text-sm text-yellow-700"},B3={class:"list-disc pl-5 space-y-1"},T3=["disabled"],N3={class:"absolute left-0 inset-y-0 flex items-center pl-3"},D3={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},O3={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},R3=ps({__name:"ChangePasswordForm",setup(e){const t=Nc(),n=ds(),r=Wa({oldPassword:"",newPassword:"",confirmPassword:""}),o=It(!1),a=It("");ba(()=>{var _,w;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:n.isAuthenticated,userId:(_=n.user)==null?void 0:_.id,mustChangePassword:(w=n.user)==null?void 0:w.must_change_password})});const u=Nn(()=>{const _=[];return r.newPassword&&r.newPassword.length<8&&_.push("Le nouveau mot de passe doit contenir au moins 8 caractres"),r.newPassword&&r.confirmPassword&&r.newPassword!==r.confirmPassword&&_.push("Les mots de passe ne correspondent pas"),_}),f=Nn(()=>r.oldPassword.length>0&&r.newPassword.length>=8&&r.newPassword===r.confirmPassword);async function m(){var _,w,b,E,x,F,N,U;if(!f.value){a.value="Veuillez corriger les erreurs avant de continuer";return}if(!((_=n.user)!=null&&_.id)){a.value="Erreur : utilisateur non identifi";return}o.value=!0,a.value="";try{console.log("Submitting password change..."),await n.changePassword(r.oldPassword,r.newPassword),console.log("Password changed successfully"),t.push("/")}catch(j){console.error("Password change failed:",j),(b=(w=j.response)==null?void 0:w.data)!=null&&b.detail?a.value=j.response.data.detail:(x=(E=j.response)==null?void 0:E.data)!=null&&x.old_password?a.value=j.response.data.old_password[0]:(N=(F=j.response)==null?void 0:F.data)!=null&&N.password?a.value=j.response.data.password[0]:((U=j.response)==null?void 0:U.status)===401?(a.value="Session expire, veuillez vous reconnecter",await n.logout(),t.push("/login")):a.value="Une erreur est survenue lors du changement de mot de passe"}finally{o.value=!1}}return(_,w)=>(nt(),at("div",v3,[A("div",_3,[w[12]||(w[12]=A("div",null,[A("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),A("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de scurit, vous devez changer votre mot de passe. ")],-1)),A("form",{class:"mt-8 space-y-6",onSubmit:Mc(m,["prevent"])},[A("div",y3,[A("div",null,[w[3]||(w[3]=A("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),A("div",b3,[kn(A("input",{id:"old-password","onUpdate:modelValue":w[0]||(w[0]=b=>r.oldPassword=b),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[ri,r.oldPassword]])])]),A("div",null,[w[4]||(w[4]=A("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),A("div",w3,[kn(A("input",{id:"new-password","onUpdate:modelValue":w[1]||(w[1]=b=>r.newPassword=b),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[ri,r.newPassword]])]),w[5]||(w[5]=A("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractres ",-1))]),A("div",null,[w[6]||(w[6]=A("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),A("div",x3,[kn(A("input",{id:"confirm-password","onUpdate:modelValue":w[2]||(w[2]=b=>r.confirmPassword=b),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[ri,r.confirmPassword]])])])]),a.value?(nt(),at("div",L3,[A("div",C3,[w[7]||(w[7]=A("div",{class:"flex-shrink-0"},[A("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[A("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),A("div",k3,[A("h3",P3,kt(a.value),1)])])])):tn("",!0),u.value.length>0?(nt(),at("div",S3,[A("div",E3,[w[9]||(w[9]=A("div",{class:"flex-shrink-0"},[A("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[A("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),A("div",A3,[w[8]||(w[8]=A("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),A("div",M3,[A("ul",B3,[(nt(!0),at(gn,null,Un(u.value,(b,E)=>(nt(),at("li",{key:E},kt(b),1))),128))])])])])])):tn("",!0),A("div",null,[A("button",{type:"submit",disabled:o.value||!f.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[A("span",N3,[o.value?(nt(),at("svg",O3,w[11]||(w[11]=[A("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),A("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(nt(),at("svg",D3,w[10]||(w[10]=[A("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),ki(" "+kt(o.value?"Modification en cours...":"Changer le mot de passe"),1)],8,T3)])],32)])]))}}),I3="/static/frontend/assets/logo.svg",F3={class:"min-h-screen bg-white from-blue-50 to-white flex flex-col justify-center py-12 sm:px-6 lg:px-8"},j3={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},z3={class:"bg-white py-8 px-6 shadow-lg rounded-md sm:px-10"},U3={key:0,class:"rounded-md bg-red-50 p-4"},q3={class:"flex"},$3={class:"ml-3"},V3={class:"text-sm font-medium text-red-800"},H3={class:"mt-1"},G3={class:"mt-1 relative"},W3=["type"],Z3={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},K3={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},J3={class:"flex items-center justify-between"},Y3={class:"flex items-center"},X3={class:"text-sm"},Q3=["disabled"],ew={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},tw=ps({__name:"LoginView",setup(e){const t=Nc(),n=ds(),r=It(!1),o=It(null),a=It(!1),u=Wa({username:"",password:"",rememberMe:!1});ba(()=>{var m;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE),(m=window.INITIAL_STATE)!=null&&m.isAuthenticated&&(console.log("User is authenticated, redirecting to home"),t.push("/"))});async function f(){var m,_,w,b,E,x;r.value=!0,o.value=null;try{if(!u.username||!u.password){o.value="Veuillez remplir tous les champs";return}await n.login(u.username,u.password),(m=n.user)!=null&&m.must_change_password?t.push("/change-password"):t.push("/")}catch(F){console.error("Login error:",F),o.value=((w=(_=F==null?void 0:F.response)==null?void 0:_.data)==null?void 0:w.detail)||((x=(E=(b=F==null?void 0:F.response)==null?void 0:b.data)==null?void 0:E.non_field_errors)==null?void 0:x[0])||(F==null?void 0:F.message)||"Erreur lors de la connexion"}finally{r.value=!1}}return(m,_)=>{const w=b_("router-link");return nt(),at("div",F3,[_[12]||(_[12]=A("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[A("img",{src:I3,alt:"IrrigationDesign Logo",class:"mx-auto h-40 w-auto transition-transform duration-300 hover:scale-110"}),A("h2",{class:"mt-2 text-center text-3xl font-bold text-gray-800"}," IrrigationDesign "),A("p",{class:"mt-2 text-center text-sm text-gray-600"}," Connectez-vous pour accder  votre espace ")],-1)),A("div",j3,[A("div",z3,[A("form",{class:"space-y-6",onSubmit:Mc(f,["prevent"])},[o.value?(nt(),at("div",U3,[A("div",q3,[_[4]||(_[4]=A("div",{class:"flex-shrink-0"},[A("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[A("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),A("div",$3,[A("h3",V3,kt(o.value),1)])])])):tn("",!0),A("div",null,[_[5]||(_[5]=A("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),A("div",H3,[kn(A("input",{id:"username","onUpdate:modelValue":_[0]||(_[0]=b=>u.username=b),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[ri,u.username]])])]),A("div",null,[_[8]||(_[8]=A("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),A("div",G3,[kn(A("input",{id:"password","onUpdate:modelValue":_[1]||(_[1]=b=>u.password=b),type:a.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,W3),[[Fy,u.password]]),A("button",{type:"button",onClick:_[2]||(_[2]=b=>a.value=!a.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[a.value?(nt(),at("svg",Z3,_[6]||(_[6]=[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(nt(),at("svg",K3,_[7]||(_[7]=[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),A("div",J3,[A("div",Y3,[kn(A("input",{id:"remember-me","onUpdate:modelValue":_[3]||(_[3]=b=>u.rememberMe=b),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[Wd,u.rememberMe]]),_[9]||(_[9]=A("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),A("div",X3,[Pi(w,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Ha(()=>_[10]||(_[10]=[ki(" Mot de passe oubli ? ")])),_:1})])]),A("div",null,[A("button",{type:"submit",disabled:r.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[r.value?(nt(),at("svg",ew,_[11]||(_[11]=[A("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),A("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):tn("",!0),ki(" "+kt(r.value?"Connexion en cours...":"Se connecter"),1)],8,Q3)])],32)])])])}}}),U0="/static/frontend/assets/logo.jpeg";var md={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,r){r(t)})(go,function(n){var r="1.9.4";function o(i){var c,g,P,R;for(g=1,P=arguments.length;g<P;g++){R=arguments[g];for(c in R)i[c]=R[c]}return i}var a=Object.create||function(){function i(){}return function(c){return i.prototype=c,new i}}();function u(i,c){var g=Array.prototype.slice;if(i.bind)return i.bind.apply(i,g.call(arguments,1));var P=g.call(arguments,2);return function(){return i.apply(c,P.length?P.concat(g.call(arguments)):arguments)}}var f=0;function m(i){return"_leaflet_id"in i||(i._leaflet_id=++f),i._leaflet_id}function _(i,c,g){var P,R,he,qe;return qe=function(){P=!1,R&&(he.apply(g,R),R=!1)},he=function(){P?R=arguments:(i.apply(g,arguments),setTimeout(qe,c),P=!0)},he}function w(i,c,g){var P=c[1],R=c[0],he=P-R;return i===P&&g?i:((i-R)%he+he)%he+R}function b(){return!1}function E(i,c){if(c===!1)return i;var g=Math.pow(10,c===void 0?6:c);return Math.round(i*g)/g}function x(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function F(i){return x(i).split(/\s+/)}function N(i,c){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?a(i.options):{});for(var g in c)i.options[g]=c[g];return i.options}function U(i,c,g){var P=[];for(var R in i)P.push(encodeURIComponent(g?R.toUpperCase():R)+"="+encodeURIComponent(i[R]));return(!c||c.indexOf("?")===-1?"?":"&")+P.join("&")}var j=/\{ *([\w_ -]+) *\}/g;function ne(i,c){return i.replace(j,function(g,P){var R=c[P];if(R===void 0)throw new Error("No value provided for variable "+g);return typeof R=="function"&&(R=R(c)),R})}var ae=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function be(i,c){for(var g=0;g<i.length;g++)if(i[g]===c)return g;return-1}var ye="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Pe(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var Ce=0;function de(i){var c=+new Date,g=Math.max(0,16-(c-Ce));return Ce=c+g,window.setTimeout(i,g)}var Be=window.requestAnimationFrame||Pe("RequestAnimationFrame")||de,Ue=window.cancelAnimationFrame||Pe("CancelAnimationFrame")||Pe("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function q(i,c,g){if(g&&Be===de)i.call(c);else return Be.call(window,u(i,c))}function H(i){i&&Ue.call(window,i)}var Se={__proto__:null,extend:o,create:a,bind:u,get lastId(){return f},stamp:m,throttle:_,wrapNum:w,falseFn:b,formatNum:E,trim:x,splitWords:F,setOptions:N,getParamString:U,template:ne,isArray:ae,indexOf:be,emptyImageUrl:ye,requestFn:Be,cancelFn:Ue,requestAnimFrame:q,cancelAnimFrame:H};function M(){}M.extend=function(i){var c=function(){N(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},g=c.__super__=this.prototype,P=a(g);P.constructor=c,c.prototype=P;for(var R in this)Object.prototype.hasOwnProperty.call(this,R)&&R!=="prototype"&&R!=="__super__"&&(c[R]=this[R]);return i.statics&&o(c,i.statics),i.includes&&(Y(i.includes),o.apply(null,[P].concat(i.includes))),o(P,i),delete P.statics,delete P.includes,P.options&&(P.options=g.options?a(g.options):{},o(P.options,i.options)),P._initHooks=[],P.callInitHooks=function(){if(!this._initHooksCalled){g.callInitHooks&&g.callInitHooks.call(this),this._initHooksCalled=!0;for(var he=0,qe=P._initHooks.length;he<qe;he++)P._initHooks[he].call(this)}},c},M.include=function(i){var c=this.prototype.options;return o(this.prototype,i),i.options&&(this.prototype.options=c,this.mergeOptions(i.options)),this},M.mergeOptions=function(i){return o(this.prototype.options,i),this},M.addInitHook=function(i){var c=Array.prototype.slice.call(arguments,1),g=typeof i=="function"?i:function(){this[i].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(g),this};function Y(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=ae(i)?i:[i];for(var c=0;c<i.length;c++)i[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Z={on:function(i,c,g){if(typeof i=="object")for(var P in i)this._on(P,i[P],c);else{i=F(i);for(var R=0,he=i.length;R<he;R++)this._on(i[R],c,g)}return this},off:function(i,c,g){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var P in i)this._off(P,i[P],c);else{i=F(i);for(var R=arguments.length===1,he=0,qe=i.length;he<qe;he++)R?this._off(i[he]):this._off(i[he],c,g)}return this},_on:function(i,c,g,P){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(i,c,g)===!1){g===this&&(g=void 0);var R={fn:c,ctx:g};P&&(R.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(R)}},_off:function(i,c,g){var P,R,he;if(this._events&&(P=this._events[i],!!P)){if(arguments.length===1){if(this._firingCount)for(R=0,he=P.length;R<he;R++)P[R].fn=b;delete this._events[i];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var qe=this._listens(i,c,g);if(qe!==!1){var ft=P[qe];this._firingCount&&(ft.fn=b,this._events[i]=P=P.slice()),P.splice(qe,1)}}},fire:function(i,c,g){if(!this.listens(i,g))return this;var P=o({},c,{type:i,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var R=this._events[i];if(R){this._firingCount=this._firingCount+1||1;for(var he=0,qe=R.length;he<qe;he++){var ft=R[he],_t=ft.fn;ft.once&&this.off(i,_t,ft.ctx),_t.call(ft.ctx||this,P)}this._firingCount--}}return g&&this._propagateEvent(P),this},listens:function(i,c,g,P){typeof i!="string"&&console.warn('"string" type argument expected');var R=c;typeof c!="function"&&(P=!!c,R=void 0,g=void 0);var he=this._events&&this._events[i];if(he&&he.length&&this._listens(i,R,g)!==!1)return!0;if(P){for(var qe in this._eventParents)if(this._eventParents[qe].listens(i,c,g,P))return!0}return!1},_listens:function(i,c,g){if(!this._events)return!1;var P=this._events[i]||[];if(!c)return!!P.length;g===this&&(g=void 0);for(var R=0,he=P.length;R<he;R++)if(P[R].fn===c&&P[R].ctx===g)return R;return!1},once:function(i,c,g){if(typeof i=="object")for(var P in i)this._on(P,i[P],c,!0);else{i=F(i);for(var R=0,he=i.length;R<he;R++)this._on(i[R],c,g,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[m(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[m(i)],this},_propagateEvent:function(i){for(var c in this._eventParents)this._eventParents[c].fire(i.type,o({layer:i.target,propagatedFrom:i.target},i),!0)}};Z.addEventListener=Z.on,Z.removeEventListener=Z.clearAllEventListeners=Z.off,Z.addOneTimeEventListener=Z.once,Z.fireEvent=Z.fire,Z.hasEventListeners=Z.listens;var re=M.extend(Z);function W(i,c,g){this.x=g?Math.round(i):i,this.y=g?Math.round(c):c}var Q=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};W.prototype={clone:function(){return new W(this.x,this.y)},add:function(i){return this.clone()._add(z(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(z(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new W(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new W(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Q(this.x),this.y=Q(this.y),this},distanceTo:function(i){i=z(i);var c=i.x-this.x,g=i.y-this.y;return Math.sqrt(c*c+g*g)},equals:function(i){return i=z(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=z(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+E(this.x)+", "+E(this.y)+")"}};function z(i,c,g){return i instanceof W?i:ae(i)?new W(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new W(i.x,i.y):new W(i,c,g)}function Ie(i,c){if(i)for(var g=c?[i,c]:i,P=0,R=g.length;P<R;P++)this.extend(g[P])}Ie.prototype={extend:function(i){var c,g;if(!i)return this;if(i instanceof W||typeof i[0]=="number"||"x"in i)c=g=z(i);else if(i=I(i),c=i.min,g=i.max,!c||!g)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=g.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(g.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(g.y,this.max.y)),this},getCenter:function(i){return z((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return z(this.min.x,this.max.y)},getTopRight:function(){return z(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var c,g;return typeof i[0]=="number"||i instanceof W?i=z(i):i=I(i),i instanceof Ie?(c=i.min,g=i.max):c=g=i,c.x>=this.min.x&&g.x<=this.max.x&&c.y>=this.min.y&&g.y<=this.max.y},intersects:function(i){i=I(i);var c=this.min,g=this.max,P=i.min,R=i.max,he=R.x>=c.x&&P.x<=g.x,qe=R.y>=c.y&&P.y<=g.y;return he&&qe},overlaps:function(i){i=I(i);var c=this.min,g=this.max,P=i.min,R=i.max,he=R.x>c.x&&P.x<g.x,qe=R.y>c.y&&P.y<g.y;return he&&qe},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var c=this.min,g=this.max,P=Math.abs(c.x-g.x)*i,R=Math.abs(c.y-g.y)*i;return I(z(c.x-P,c.y-R),z(g.x+P,g.y+R))},equals:function(i){return i?(i=I(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function I(i,c){return!i||i instanceof Ie?i:new Ie(i,c)}function G(i,c){if(i)for(var g=c?[i,c]:i,P=0,R=g.length;P<R;P++)this.extend(g[P])}G.prototype={extend:function(i){var c=this._southWest,g=this._northEast,P,R;if(i instanceof D)P=i,R=i;else if(i instanceof G){if(P=i._southWest,R=i._northEast,!P||!R)return this}else return i?this.extend(J(i)||$(i)):this;return!c&&!g?(this._southWest=new D(P.lat,P.lng),this._northEast=new D(R.lat,R.lng)):(c.lat=Math.min(P.lat,c.lat),c.lng=Math.min(P.lng,c.lng),g.lat=Math.max(R.lat,g.lat),g.lng=Math.max(R.lng,g.lng)),this},pad:function(i){var c=this._southWest,g=this._northEast,P=Math.abs(c.lat-g.lat)*i,R=Math.abs(c.lng-g.lng)*i;return new G(new D(c.lat-P,c.lng-R),new D(g.lat+P,g.lng+R))},getCenter:function(){return new D((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new D(this.getNorth(),this.getWest())},getSouthEast:function(){return new D(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof D||"lat"in i?i=J(i):i=$(i);var c=this._southWest,g=this._northEast,P,R;return i instanceof G?(P=i.getSouthWest(),R=i.getNorthEast()):P=R=i,P.lat>=c.lat&&R.lat<=g.lat&&P.lng>=c.lng&&R.lng<=g.lng},intersects:function(i){i=$(i);var c=this._southWest,g=this._northEast,P=i.getSouthWest(),R=i.getNorthEast(),he=R.lat>=c.lat&&P.lat<=g.lat,qe=R.lng>=c.lng&&P.lng<=g.lng;return he&&qe},overlaps:function(i){i=$(i);var c=this._southWest,g=this._northEast,P=i.getSouthWest(),R=i.getNorthEast(),he=R.lat>c.lat&&P.lat<g.lat,qe=R.lng>c.lng&&P.lng<g.lng;return he&&qe},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,c){return i?(i=$(i),this._southWest.equals(i.getSouthWest(),c)&&this._northEast.equals(i.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function $(i,c){return i instanceof G?i:new G(i,c)}function D(i,c,g){if(isNaN(i)||isNaN(c))throw new Error("Invalid LatLng object: ("+i+", "+c+")");this.lat=+i,this.lng=+c,g!==void 0&&(this.alt=+g)}D.prototype={equals:function(i,c){if(!i)return!1;i=J(i);var g=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return g<=(c===void 0?1e-9:c)},toString:function(i){return"LatLng("+E(this.lat,i)+", "+E(this.lng,i)+")"},distanceTo:function(i){return ge.distance(this,J(i))},wrap:function(){return ge.wrapLatLng(this)},toBounds:function(i){var c=180*i/40075017,g=c/Math.cos(Math.PI/180*this.lat);return $([this.lat-c,this.lng-g],[this.lat+c,this.lng+g])},clone:function(){return new D(this.lat,this.lng,this.alt)}};function J(i,c,g){return i instanceof D?i:ae(i)&&typeof i[0]!="object"?i.length===3?new D(i[0],i[1],i[2]):i.length===2?new D(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new D(i.lat,"lng"in i?i.lng:i.lon,i.alt):c===void 0?null:new D(i,c,g)}var le={latLngToPoint:function(i,c){var g=this.projection.project(i),P=this.scale(c);return this.transformation._transform(g,P)},pointToLatLng:function(i,c){var g=this.scale(c),P=this.transformation.untransform(i,g);return this.projection.unproject(P)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var c=this.projection.bounds,g=this.scale(i),P=this.transformation.transform(c.min,g),R=this.transformation.transform(c.max,g);return new Ie(P,R)},infinite:!1,wrapLatLng:function(i){var c=this.wrapLng?w(i.lng,this.wrapLng,!0):i.lng,g=this.wrapLat?w(i.lat,this.wrapLat,!0):i.lat,P=i.alt;return new D(g,c,P)},wrapLatLngBounds:function(i){var c=i.getCenter(),g=this.wrapLatLng(c),P=c.lat-g.lat,R=c.lng-g.lng;if(P===0&&R===0)return i;var he=i.getSouthWest(),qe=i.getNorthEast(),ft=new D(he.lat-P,he.lng-R),_t=new D(qe.lat-P,qe.lng-R);return new G(ft,_t)}},ge=o({},le,{wrapLng:[-180,180],R:6371e3,distance:function(i,c){var g=Math.PI/180,P=i.lat*g,R=c.lat*g,he=Math.sin((c.lat-i.lat)*g/2),qe=Math.sin((c.lng-i.lng)*g/2),ft=he*he+Math.cos(P)*Math.cos(R)*qe*qe,_t=2*Math.atan2(Math.sqrt(ft),Math.sqrt(1-ft));return this.R*_t}}),me=6378137,je={R:me,MAX_LATITUDE:85.0511287798,project:function(i){var c=Math.PI/180,g=this.MAX_LATITUDE,P=Math.max(Math.min(g,i.lat),-g),R=Math.sin(P*c);return new W(this.R*i.lng*c,this.R*Math.log((1+R)/(1-R))/2)},unproject:function(i){var c=180/Math.PI;return new D((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*c,i.x*c/this.R)},bounds:function(){var i=me*Math.PI;return new Ie([-i,-i],[i,i])}()};function $e(i,c,g,P){if(ae(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=c,this._c=g,this._d=P}$e.prototype={transform:function(i,c){return this._transform(i.clone(),c)},_transform:function(i,c){return c=c||1,i.x=c*(this._a*i.x+this._b),i.y=c*(this._c*i.y+this._d),i},untransform:function(i,c){return c=c||1,new W((i.x/c-this._b)/this._a,(i.y/c-this._d)/this._c)}};function X(i,c,g,P){return new $e(i,c,g,P)}var se=o({},ge,{code:"EPSG:3857",projection:je,transformation:function(){var i=.5/(Math.PI*je.R);return X(i,.5,-i,.5)}()}),Te=o({},se,{code:"EPSG:900913"});function Ee(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function ie(i,c){var g="",P,R,he,qe,ft,_t;for(P=0,he=i.length;P<he;P++){for(ft=i[P],R=0,qe=ft.length;R<qe;R++)_t=ft[R],g+=(R?"L":"M")+_t.x+" "+_t.y;g+=c?Ht.svg?"z":"x":""}return g||"M0 0"}var We=document.documentElement.style,et="ActiveXObject"in window,Xe=et&&!document.addEventListener,De="msLaunchUri"in navigator&&!("documentMode"in document),ke=Vn("webkit"),lt=Vn("android"),ht=Vn("android 2")||Vn("android 3"),it=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Fe=lt&&Vn("Google")&&it<537&&!("AudioNode"in window),Pt=!!window.opera,Ft=!De&&Vn("chrome"),Wt=Vn("gecko")&&!ke&&!Pt&&!et,Ut=!Ft&&Vn("safari"),Xt=Vn("phantom"),Rt="OTransition"in We,on=navigator.platform.indexOf("Win")===0,dn=et&&"transition"in We,ai="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ht,Ct="MozPerspective"in We,nn=!window.L_DISABLE_3D&&(dn||ai||Ct)&&!Rt&&!Xt,Vt=typeof orientation<"u"||Vn("mobile"),ln=Vt&&ke,li=Vt&&ai,In=!window.PointerEvent&&window.MSPointerEvent,fi=!!(window.PointerEvent||In),xi="ontouchstart"in window||!!window.TouchEvent,Kn=!window.L_NO_TOUCH&&(xi||fi),Tt=Vt&&Pt,Dt=Vt&&Wt,Di=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,qn=function(){var i=!1;try{var c=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",b,c),window.removeEventListener("testPassiveEventSupport",b,c)}catch{}return i}(),ms=function(){return!!document.createElement("canvas").getContext}(),Mr=!!(document.createElementNS&&Ee("svg").createSVGRect),cn=!!Mr&&function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Yr=!Mr&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var c=i.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),gs=navigator.platform.indexOf("Mac")===0,cr=navigator.platform.indexOf("Linux")===0;function Vn(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var Ht={ie:et,ielt9:Xe,edge:De,webkit:ke,android:lt,android23:ht,androidStock:Fe,opera:Pt,chrome:Ft,gecko:Wt,safari:Ut,phantom:Xt,opera12:Rt,win:on,ie3d:dn,webkit3d:ai,gecko3d:Ct,any3d:nn,mobile:Vt,mobileWebkit:ln,mobileWebkit3d:li,msPointer:In,pointer:fi,touch:Kn,touchNative:xi,mobileOpera:Tt,mobileGecko:Dt,retina:Di,passiveEvents:qn,canvas:ms,svg:Mr,vml:Yr,inlineSvg:cn,mac:gs,linux:cr},hr=Ht.msPointer?"MSPointerDown":"pointerdown",wo=Ht.msPointer?"MSPointerMove":"pointermove",Xr=Ht.msPointer?"MSPointerUp":"pointerup",Br=Ht.msPointer?"MSPointerCancel":"pointercancel",Lr={touchstart:hr,touchmove:wo,touchend:Xr,touchcancel:Br},Tr={touchstart:Ml,touchmove:Lo,touchend:Lo,touchcancel:Lo},tr={},Cr=!1;function vs(i,c,g){return c==="touchstart"&&Ys(),Tr[c]?(g=Tr[c].bind(this,g),i.addEventListener(Lr[c],g,!1),g):(console.warn("wrong event specified:",c),b)}function xo(i,c,g){if(!Lr[c]){console.warn("wrong event specified:",c);return}i.removeEventListener(Lr[c],g,!1)}function Zo(i){tr[i.pointerId]=i}function Ko(i){tr[i.pointerId]&&(tr[i.pointerId]=i)}function Ds(i){delete tr[i.pointerId]}function Ys(){Cr||(document.addEventListener(hr,Zo,!0),document.addEventListener(wo,Ko,!0),document.addEventListener(Xr,Ds,!0),document.addEventListener(Br,Ds,!0),Cr=!0)}function Lo(i,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var g in tr)c.touches.push(tr[g]);c.changedTouches=[c],i(c)}}function Ml(i,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&vi(c),Lo(i,c)}function Bl(i){var c={},g,P;for(P in i)g=i[P],c[P]=g&&g.bind?g.bind(i):g;return i=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var Jo=200;function Ka(i,c){i.addEventListener("dblclick",c);var g=0,P;function R(he){if(he.detail!==1){P=he.detail;return}if(!(he.pointerType==="mouse"||he.sourceCapabilities&&!he.sourceCapabilities.firesTouchEvents)){var qe=js(he);if(!(qe.some(function(_t){return _t instanceof HTMLLabelElement&&_t.attributes.for})&&!qe.some(function(_t){return _t instanceof HTMLInputElement||_t instanceof HTMLSelectElement}))){var ft=Date.now();ft-g<=Jo?(P++,P===2&&c(Bl(he))):P=1,g=ft}}}return i.addEventListener("click",R),{dblclick:c,simDblclick:R}}function Tl(i,c){i.removeEventListener("dblclick",c.dblclick),i.removeEventListener("click",c.simDblclick)}var Co=Yo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ko=Yo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),xa=ko==="webkitTransition"||ko==="OTransition"?ko+"End":"transitionend";function Ja(i){return typeof i=="string"?document.getElementById(i):i}function kr(i,c){var g=i.style[c]||i.currentStyle&&i.currentStyle[c];if((!g||g==="auto")&&document.defaultView){var P=document.defaultView.getComputedStyle(i,null);g=P?P[c]:null}return g==="auto"?null:g}function Fn(i,c,g){var P=document.createElement(i);return P.className=c||"",g&&g.appendChild(P),P}function wn(i){var c=i.parentNode;c&&c.removeChild(i)}function Xs(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Os(i){var c=i.parentNode;c&&c.lastChild!==i&&c.appendChild(i)}function _s(i){var c=i.parentNode;c&&c.firstChild!==i&&c.insertBefore(i,c.firstChild)}function Po(i,c){if(i.classList!==void 0)return i.classList.contains(c);var g=Fi(i);return g.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(g)}function Cn(i,c){if(i.classList!==void 0)for(var g=F(c),P=0,R=g.length;P<R;P++)i.classList.add(g[P]);else if(!Po(i,c)){var he=Fi(i);Qs(i,(he?he+" ":"")+c)}}function zn(i,c){i.classList!==void 0?i.classList.remove(c):Qs(i,x((" "+Fi(i)+" ").replace(" "+c+" "," ")))}function Qs(i,c){i.className.baseVal===void 0?i.className=c:i.className.baseVal=c}function Fi(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function Zi(i,c){"opacity"in i.style?i.style.opacity=c:"filter"in i.style&&Ya(i,c)}function Ya(i,c){var g=!1,P="DXImageTransform.Microsoft.Alpha";try{g=i.filters.item(P)}catch{if(c===1)return}c=Math.round(c*100),g?(g.Enabled=c!==100,g.Opacity=c):i.style.filter+=" progid:"+P+"(opacity="+c+")"}function Yo(i){for(var c=document.documentElement.style,g=0;g<i.length;g++)if(i[g]in c)return i[g];return!1}function ys(i,c,g){var P=c||new W(0,0);i.style[Co]=(Ht.ie3d?"translate("+P.x+"px,"+P.y+"px)":"translate3d("+P.x+"px,"+P.y+"px,0)")+(g?" scale("+g+")":"")}function di(i,c){i._leaflet_pos=c,Ht.any3d?ys(i,c):(i.style.left=c.x+"px",i.style.top=c.y+"px")}function bs(i){return i._leaflet_pos||new W(0,0)}var So,Rs,La;if("onselectstart"in document)So=function(){xn(window,"selectstart",vi)},Rs=function(){On(window,"selectstart",vi)};else{var eo=Yo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);So=function(){if(eo){var i=document.documentElement.style;La=i[eo],i[eo]="none"}},Rs=function(){eo&&(document.documentElement.style[eo]=La,La=void 0)}}function Ca(){xn(window,"dragstart",vi)}function Qr(){On(window,"dragstart",vi)}var Is,to;function Xo(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(Si(),Is=i,to=i.style.outlineStyle,i.style.outlineStyle="none",xn(window,"keydown",Si))}function Si(){Is&&(Is.style.outlineStyle=to,Is=void 0,to=void 0,On(window,"keydown",Si))}function Xa(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function Qo(i){var c=i.getBoundingClientRect();return{x:c.width/i.offsetWidth||1,y:c.height/i.offsetHeight||1,boundingClientRect:c}}var yn={__proto__:null,TRANSFORM:Co,TRANSITION:ko,TRANSITION_END:xa,get:Ja,getStyle:kr,create:Fn,remove:wn,empty:Xs,toFront:Os,toBack:_s,hasClass:Po,addClass:Cn,removeClass:zn,setClass:Qs,getClass:Fi,setOpacity:Zi,testProp:Yo,setTransform:ys,setPosition:di,getPosition:bs,get disableTextSelection(){return So},get enableTextSelection(){return Rs},disableImageDrag:Ca,enableImageDrag:Qr,preventOutline:Xo,restoreOutline:Si,getSizedParentNode:Xa,getScale:Qo};function xn(i,c,g,P){if(c&&typeof c=="object")for(var R in c)no(i,R,c[R],g);else{c=F(c);for(var he=0,qe=c.length;he<qe;he++)no(i,c[he],g,P)}return this}var Nr="_leaflet_events";function On(i,c,g,P){if(arguments.length===1)ka(i),delete i[Nr];else if(c&&typeof c=="object")for(var R in c)Dr(i,R,c[R],g);else if(c=F(c),arguments.length===2)ka(i,function(ft){return be(c,ft)!==-1});else for(var he=0,qe=c.length;he<qe;he++)Dr(i,c[he],g,P);return this}function ka(i,c){for(var g in i[Nr]){var P=g.split(/\d/)[0];(!c||c(P))&&Dr(i,P,null,null,g)}}var ea={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function no(i,c,g,P){var R=c+m(g)+(P?"_"+m(P):"");if(i[Nr]&&i[Nr][R])return this;var he=function(ft){return g.call(P||i,ft||window.event)},qe=he;!Ht.touchNative&&Ht.pointer&&c.indexOf("touch")===0?he=vs(i,c,he):Ht.touch&&c==="dblclick"?he=Ka(i,he):"addEventListener"in i?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?i.addEventListener(ea[c]||c,he,Ht.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(he=function(ft){ft=ft||window.event,io(i,ft)&&qe(ft)},i.addEventListener(ea[c],he,!1)):i.addEventListener(c,qe,!1):i.attachEvent("on"+c,he),i[Nr]=i[Nr]||{},i[Nr][R]=he}function Dr(i,c,g,P,R){R=R||c+m(g)+(P?"_"+m(P):"");var he=i[Nr]&&i[Nr][R];if(!he)return this;!Ht.touchNative&&Ht.pointer&&c.indexOf("touch")===0?xo(i,c,he):Ht.touch&&c==="dblclick"?Tl(i,he):"removeEventListener"in i?i.removeEventListener(ea[c]||c,he,!1):i.detachEvent("on"+c,he),i[Nr][R]=null}function Fs(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function Pa(i){return no(i,"wheel",Fs),this}function Eo(i){return xn(i,"mousedown touchstart dblclick contextmenu",Fs),i._leaflet_disable_click=!0,this}function vi(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function Pr(i){return vi(i),Fs(i),this}function js(i){if(i.composedPath)return i.composedPath();for(var c=[],g=i.target;g;)c.push(g),g=g.parentNode;return c}function Qa(i,c){if(!c)return new W(i.clientX,i.clientY);var g=Qo(c),P=g.boundingClientRect;return new W((i.clientX-P.left)/g.x-c.clientLeft,(i.clientY-P.top)/g.y-c.clientTop)}var Ao=Ht.linux&&Ht.chrome?window.devicePixelRatio:Ht.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ta(i){return Ht.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/Ao:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function io(i,c){var g=c.relatedTarget;if(!g)return!0;try{for(;g&&g!==i;)g=g.parentNode}catch{return!1}return g!==i}var Mo={__proto__:null,on:xn,off:On,stopPropagation:Fs,disableScrollPropagation:Pa,disableClickPropagation:Eo,preventDefault:vi,stop:Pr,getPropagationPath:js,getMousePosition:Qa,getWheelDelta:ta,isExternalTarget:io,addListener:xn,removeListener:On},Sa=re.extend({run:function(i,c,g,P){this.stop(),this._el=i,this._inProgress=!0,this._duration=g||.25,this._easeOutPower=1/Math.max(P||.5,.2),this._startPos=bs(i),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=q(this._animate,this),this._step()},_step:function(i){var c=+new Date-this._startTime,g=this._duration*1e3;c<g?this._runFrame(this._easeOut(c/g),i):(this._runFrame(1),this._complete())},_runFrame:function(i,c){var g=this._startPos.add(this._offset.multiplyBy(i));c&&g._round(),di(this._el,g),this.fire("step")},_complete:function(){H(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),Bn=re.extend({options:{crs:se,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,c){c=N(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(J(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ko&&Ht.any3d&&!Ht.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),xn(this._proxy,xa,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,c,g){if(c=c===void 0?this._zoom:this._limitZoom(c),i=this._limitCenter(J(i),c,this.options.maxBounds),g=g||{},this._stop(),this._loaded&&!g.reset&&g!==!0){g.animate!==void 0&&(g.zoom=o({animate:g.animate},g.zoom),g.pan=o({animate:g.animate,duration:g.duration},g.pan));var P=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,c,g.zoom):this._tryAnimatedPan(i,g.pan);if(P)return clearTimeout(this._sizeTimer),this}return this._resetView(i,c,g.pan&&g.pan.noMoveStart),this},setZoom:function(i,c){return this._loaded?this.setView(this.getCenter(),i,{zoom:c}):(this._zoom=i,this)},zoomIn:function(i,c){return i=i||(Ht.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,c)},zoomOut:function(i,c){return i=i||(Ht.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,c)},setZoomAround:function(i,c,g){var P=this.getZoomScale(c),R=this.getSize().divideBy(2),he=i instanceof W?i:this.latLngToContainerPoint(i),qe=he.subtract(R).multiplyBy(1-1/P),ft=this.containerPointToLatLng(R.add(qe));return this.setView(ft,c,{zoom:g})},_getBoundsCenterZoom:function(i,c){c=c||{},i=i.getBounds?i.getBounds():$(i);var g=z(c.paddingTopLeft||c.padding||[0,0]),P=z(c.paddingBottomRight||c.padding||[0,0]),R=this.getBoundsZoom(i,!1,g.add(P));if(R=typeof c.maxZoom=="number"?Math.min(c.maxZoom,R):R,R===1/0)return{center:i.getCenter(),zoom:R};var he=P.subtract(g).divideBy(2),qe=this.project(i.getSouthWest(),R),ft=this.project(i.getNorthEast(),R),_t=this.unproject(qe.add(ft).divideBy(2).add(he),R);return{center:_t,zoom:R}},fitBounds:function(i,c){if(i=$(i),!i.isValid())throw new Error("Bounds are not valid.");var g=this._getBoundsCenterZoom(i,c);return this.setView(g.center,g.zoom,c)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,c){return this.setView(i,this._zoom,{pan:c})},panBy:function(i,c){if(i=z(i).round(),c=c||{},!i.x&&!i.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Sa,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){Cn(this._mapPane,"leaflet-pan-anim");var g=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,g,c.duration||.25,c.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,c,g){if(g=g||{},g.animate===!1||!Ht.any3d)return this.setView(i,c,g);this._stop();var P=this.project(this.getCenter()),R=this.project(i),he=this.getSize(),qe=this._zoom;i=J(i),c=c===void 0?qe:c;var ft=Math.max(he.x,he.y),_t=ft*this.getZoomScale(qe,c),Bt=R.distanceTo(P)||1,Zt=1.42,an=Zt*Zt;function An(Yn){var Qi=Yn?-1:1,Uu=Yn?_t:ft,As=_t*_t-ft*ft+Qi*an*an*Bt*Bt,au=2*Uu*an*Bt,Io=As/au,sl=Math.sqrt(Io*Io+1)-Io,lu=sl<1e-9?-18:Math.log(sl);return lu}function ur(Yn){return(Math.exp(Yn)-Math.exp(-Yn))/2}function Ti(Yn){return(Math.exp(Yn)+Math.exp(-Yn))/2}function _r(Yn){return ur(Yn)/Ti(Yn)}var mi=An(0);function Es(Yn){return ft*(Ti(mi)/Ti(mi+Zt*Yn))}function Dl(Yn){return ft*(Ti(mi)*_r(mi+Zt*Yn)-ur(mi))/an}function is(Yn){return 1-Math.pow(1-Yn,1.5)}var qr=Date.now(),Ar=(An(1)-mi)/Zt,zu=g.duration?1e3*g.duration:1e3*Ar*.8;function Ol(){var Yn=(Date.now()-qr)/zu,Qi=is(Yn)*Ar;Yn<=1?(this._flyToFrame=q(Ol,this),this._move(this.unproject(P.add(R.subtract(P).multiplyBy(Dl(Qi)/Bt)),qe),this.getScaleZoom(ft/Es(Qi),qe),{flyTo:!0})):this._move(i,c)._moveEnd(!0)}return this._moveStart(!0,g.noMoveStart),Ol.call(this),this},flyToBounds:function(i,c){var g=this._getBoundsCenterZoom(i,c);return this.flyTo(g.center,g.zoom,c)},setMaxBounds:function(i){return i=$(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var c=this.options.minZoom;return this.options.minZoom=i,this._loaded&&c!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var c=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&c!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,c){this._enforcingBounds=!0;var g=this.getCenter(),P=this._limitCenter(g,this._zoom,$(i));return g.equals(P)||this.panTo(P,c),this._enforcingBounds=!1,this},panInside:function(i,c){c=c||{};var g=z(c.paddingTopLeft||c.padding||[0,0]),P=z(c.paddingBottomRight||c.padding||[0,0]),R=this.project(this.getCenter()),he=this.project(i),qe=this.getPixelBounds(),ft=I([qe.min.add(g),qe.max.subtract(P)]),_t=ft.getSize();if(!ft.contains(he)){this._enforcingBounds=!0;var Bt=he.subtract(ft.getCenter()),Zt=ft.extend(he).getSize().subtract(_t);R.x+=Bt.x<0?-Zt.x:Zt.x,R.y+=Bt.y<0?-Zt.y:Zt.y,this.panTo(this.unproject(R),c),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=o({animate:!1,pan:!0},i===!0?{animate:!0}:i);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var g=this.getSize(),P=c.divideBy(2).round(),R=g.divideBy(2).round(),he=P.subtract(R);return!he.x&&!he.y?this:(i.animate&&i.pan?this.panBy(he):(i.pan&&this._rawPanBy(he),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:g}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=o({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=u(this._handleGeolocationResponse,this),g=u(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,g,i):navigator.geolocation.getCurrentPosition(c,g,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var c=i.code,g=i.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+g+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var c=i.coords.latitude,g=i.coords.longitude,P=new D(c,g),R=P.toBounds(i.coords.accuracy*2),he=this._locateOptions;if(he.setView){var qe=this.getBoundsZoom(R);this.setView(P,he.maxZoom?Math.min(qe,he.maxZoom):qe)}var ft={latlng:P,bounds:R,timestamp:i.timestamp};for(var _t in i.coords)typeof i.coords[_t]=="number"&&(ft[_t]=i.coords[_t]);this.fire("locationfound",ft)}},addHandler:function(i,c){if(!c)return this;var g=this[i]=new c(this);return this._handlers.push(g),this.options[i]&&g.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),wn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(H(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)wn(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,c){var g="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),P=Fn("div",g,c||this._mapPane);return i&&(this._panes[i]=P),P},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),c=this.unproject(i.getBottomLeft()),g=this.unproject(i.getTopRight());return new G(c,g)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,c,g){i=$(i),g=z(g||[0,0]);var P=this.getZoom()||0,R=this.getMinZoom(),he=this.getMaxZoom(),qe=i.getNorthWest(),ft=i.getSouthEast(),_t=this.getSize().subtract(g),Bt=I(this.project(ft,P),this.project(qe,P)).getSize(),Zt=Ht.any3d?this.options.zoomSnap:1,an=_t.x/Bt.x,An=_t.y/Bt.y,ur=c?Math.max(an,An):Math.min(an,An);return P=this.getScaleZoom(ur,P),Zt&&(P=Math.round(P/(Zt/100))*(Zt/100),P=c?Math.ceil(P/Zt)*Zt:Math.floor(P/Zt)*Zt),Math.max(R,Math.min(he,P))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new W(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,c){var g=this._getTopLeftPoint(i,c);return new Ie(g,g.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,c){var g=this.options.crs;return c=c===void 0?this._zoom:c,g.scale(i)/g.scale(c)},getScaleZoom:function(i,c){var g=this.options.crs;c=c===void 0?this._zoom:c;var P=g.zoom(i*g.scale(c));return isNaN(P)?1/0:P},project:function(i,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(J(i),c)},unproject:function(i,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(z(i),c)},layerPointToLatLng:function(i){var c=z(i).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(i){var c=this.project(J(i))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(J(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds($(i))},distance:function(i,c){return this.options.crs.distance(J(i),J(c))},containerPointToLayerPoint:function(i){return z(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return z(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var c=this.containerPointToLayerPoint(z(i));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(J(i)))},mouseEventToContainerPoint:function(i){return Qa(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var c=this._container=Ja(i);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");xn(c,"scroll",this._onScroll,this),this._containerId=m(c)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ht.any3d,Cn(i,"leaflet-container"+(Ht.touch?" leaflet-touch":"")+(Ht.retina?" leaflet-retina":"")+(Ht.ielt9?" leaflet-oldie":"")+(Ht.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=kr(i,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),di(this._mapPane,new W(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Cn(i.markerPane,"leaflet-zoom-hide"),Cn(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,c,g){di(this._mapPane,new W(0,0));var P=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var R=this._zoom!==c;this._moveStart(R,g)._move(i,c)._moveEnd(R),this.fire("viewreset"),P&&this.fire("load")},_moveStart:function(i,c){return i&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(i,c,g,P){c===void 0&&(c=this._zoom);var R=this._zoom!==c;return this._zoom=c,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),P?g&&g.pinch&&this.fire("zoom",g):((R||g&&g.pinch)&&this.fire("zoom",g),this.fire("move",g)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return H(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){di(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[m(this._container)]=this;var c=i?On:xn;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),Ht.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){H(this._resizeRequest),this._resizeRequest=q(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,c){for(var g=[],P,R=c==="mouseout"||c==="mouseover",he=i.target||i.srcElement,qe=!1;he;){if(P=this._targets[m(he)],P&&(c==="click"||c==="preclick")&&this._draggableMoved(P)){qe=!0;break}if(P&&P.listens(c,!0)&&(R&&!io(he,i)||(g.push(P),R))||he===this._container)break;he=he.parentNode}return!g.length&&!qe&&!R&&this.listens(c,!0)&&(g=[this]),g},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var c=i.target||i.srcElement;if(!(!this._loaded||c._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(c))){var g=i.type;g==="mousedown"&&Xo(c),this._fireDOMEvent(i,g)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,c,g){if(i.type==="click"){var P=o({},i);P.type="preclick",this._fireDOMEvent(P,P.type,g)}var R=this._findEventTargets(i,c);if(g){for(var he=[],qe=0;qe<g.length;qe++)g[qe].listens(c,!0)&&he.push(g[qe]);R=he.concat(R)}if(R.length){c==="contextmenu"&&vi(i);var ft=R[0],_t={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var Bt=ft.getLatLng&&(!ft._radius||ft._radius<=10);_t.containerPoint=Bt?this.latLngToContainerPoint(ft.getLatLng()):this.mouseEventToContainerPoint(i),_t.layerPoint=this.containerPointToLayerPoint(_t.containerPoint),_t.latlng=Bt?ft.getLatLng():this.layerPointToLatLng(_t.layerPoint)}for(qe=0;qe<R.length;qe++)if(R[qe].fire(c,_t,!0),_t.originalEvent._stopped||R[qe].options.bubblingMouseEvents===!1&&be(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,c=this._handlers.length;i<c;i++)this._handlers[i].disable()},whenReady:function(i,c){return this._loaded?i.call(c||this,{target:this}):this.on("load",i,c),this},_getMapPanePos:function(){return bs(this._mapPane)||new W(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,c){var g=i&&c!==void 0?this._getNewPixelOrigin(i,c):this.getPixelOrigin();return g.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,c){var g=this.getSize()._divideBy(2);return this.project(i,c)._subtract(g)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,c,g){var P=this._getNewPixelOrigin(g,c);return this.project(i,c)._subtract(P)},_latLngBoundsToNewLayerBounds:function(i,c,g){var P=this._getNewPixelOrigin(g,c);return I([this.project(i.getSouthWest(),c)._subtract(P),this.project(i.getNorthWest(),c)._subtract(P),this.project(i.getSouthEast(),c)._subtract(P),this.project(i.getNorthEast(),c)._subtract(P)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,c,g){if(!g)return i;var P=this.project(i,c),R=this.getSize().divideBy(2),he=new Ie(P.subtract(R),P.add(R)),qe=this._getBoundsOffset(he,g,c);return Math.abs(qe.x)<=1&&Math.abs(qe.y)<=1?i:this.unproject(P.add(qe),c)},_limitOffset:function(i,c){if(!c)return i;var g=this.getPixelBounds(),P=new Ie(g.min.add(i),g.max.add(i));return i.add(this._getBoundsOffset(P,c))},_getBoundsOffset:function(i,c,g){var P=I(this.project(c.getNorthEast(),g),this.project(c.getSouthWest(),g)),R=P.min.subtract(i.min),he=P.max.subtract(i.max),qe=this._rebound(R.x,-he.x),ft=this._rebound(R.y,-he.y);return new W(qe,ft)},_rebound:function(i,c){return i+c>0?Math.round(i-c)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(c))},_limitZoom:function(i){var c=this.getMinZoom(),g=this.getMaxZoom(),P=Ht.any3d?this.options.zoomSnap:1;return P&&(i=Math.round(i/P)*P),Math.max(c,Math.min(g,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){zn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,c){var g=this._getCenterOffset(i)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(g)?!1:(this.panBy(g,c),!0)},_createAnimProxy:function(){var i=this._proxy=Fn("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(c){var g=Co,P=this._proxy.style[g];ys(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),P===this._proxy.style[g]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){wn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),c=this.getZoom();ys(this._proxy,this.project(i,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,c,g){if(this._animatingZoom)return!0;if(g=g||{},!this._zoomAnimated||g.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var P=this.getZoomScale(c),R=this._getCenterOffset(i)._divideBy(1-1/P);return g.animate!==!0&&!this.getSize().contains(R)?!1:(q(function(){this._moveStart(!0,g.noMoveStart||!1)._animateZoom(i,c,!0)},this),!0)},_animateZoom:function(i,c,g,P){this._mapPane&&(g&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=c,Cn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:c,noUpdate:P}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&zn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ea(i,c){return new Bn(i,c)}var un=M.extend({options:{position:"topright"},initialize:function(i){N(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var c=this._map;return c&&c.removeControl(this),this.options.position=i,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var c=this._container=this.onAdd(i),g=this.getPosition(),P=i._controlCorners[g];return Cn(c,"leaflet-control"),g.indexOf("bottom")!==-1?P.insertBefore(c,P.firstChild):P.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(wn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),nr=function(i){return new un(i)};Bn.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},c="leaflet-",g=this._controlContainer=Fn("div",c+"control-container",this._container);function P(R,he){var qe=c+R+" "+c+he;i[R+he]=Fn("div",qe,g)}P("top","left"),P("top","right"),P("bottom","left"),P("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)wn(this._controlCorners[i]);wn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Bo=un.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,c,g,P){return g<P?-1:P<g?1:0}},initialize:function(i,c,g){N(this,g),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var P in i)this._addLayer(i[P],P);for(P in c)this._addLayer(c[P],P,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return un.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,c){return this._addLayer(i,c),this._map?this._update():this},addOverlay:function(i,c){return this._addLayer(i,c,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var c=this._getLayer(m(i));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){Cn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(Cn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):zn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return zn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",c=this._container=Fn("div",i),g=this.options.collapsed;c.setAttribute("aria-haspopup",!0),Eo(c),Pa(c);var P=this._section=Fn("section",i+"-list");g&&(this._map.on("click",this.collapse,this),xn(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var R=this._layersLink=Fn("a",i+"-toggle",c);R.href="#",R.title="Layers",R.setAttribute("role","button"),xn(R,{keydown:function(he){he.keyCode===13&&this._expandSafely()},click:function(he){vi(he),this._expandSafely()}},this),g||this.expand(),this._baseLayersList=Fn("div",i+"-base",P),this._separator=Fn("div",i+"-separator",P),this._overlaysList=Fn("div",i+"-overlays",P),c.appendChild(P)},_getLayer:function(i){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&m(this._layers[c].layer)===i)return this._layers[c]},_addLayer:function(i,c,g){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:c,overlay:g}),this.options.sortLayers&&this._layers.sort(u(function(P,R){return this.options.sortFunction(P.layer,R.layer,P.name,R.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Xs(this._baseLayersList),Xs(this._overlaysList),this._layerControlInputs=[];var i,c,g,P,R=0;for(g=0;g<this._layers.length;g++)P=this._layers[g],this._addItem(P),c=c||P.overlay,i=i||!P.overlay,R+=P.overlay?0:1;return this.options.hideSingleBase&&(i=i&&R>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=c&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var c=this._getLayer(m(i.target)),g=c.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;g&&this._map.fire(g,c)},_createRadioElement:function(i,c){var g='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(c?' checked="checked"':"")+"/>",P=document.createElement("div");return P.innerHTML=g,P.firstChild},_addItem:function(i){var c=document.createElement("label"),g=this._map.hasLayer(i.layer),P;i.overlay?(P=document.createElement("input"),P.type="checkbox",P.className="leaflet-control-layers-selector",P.defaultChecked=g):P=this._createRadioElement("leaflet-base-layers_"+m(this),g),this._layerControlInputs.push(P),P.layerId=m(i.layer),xn(P,"click",this._onInputClick,this);var R=document.createElement("span");R.innerHTML=" "+i.name;var he=document.createElement("span");c.appendChild(he),he.appendChild(P),he.appendChild(R);var qe=i.overlay?this._overlaysList:this._baseLayersList;return qe.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,c,g,P=[],R=[];this._handlingClick=!0;for(var he=i.length-1;he>=0;he--)c=i[he],g=this._getLayer(c.layerId).layer,c.checked?P.push(g):c.checked||R.push(g);for(he=0;he<R.length;he++)this._map.hasLayer(R[he])&&this._map.removeLayer(R[he]);for(he=0;he<P.length;he++)this._map.hasLayer(P[he])||this._map.addLayer(P[he]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,c,g,P=this._map.getZoom(),R=i.length-1;R>=0;R--)c=i[R],g=this._getLayer(c.layerId).layer,c.disabled=g.options.minZoom!==void 0&&P<g.options.minZoom||g.options.maxZoom!==void 0&&P>g.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,xn(i,"click",vi),this.expand();var c=this;setTimeout(function(){On(i,"click",vi),c._preventClick=!1})}}),ro=function(i,c,g){return new Bo(i,c,g)},fr=un.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var c="leaflet-control-zoom",g=Fn("div",c+" leaflet-bar"),P=this.options;return this._zoomInButton=this._createButton(P.zoomInText,P.zoomInTitle,c+"-in",g,this._zoomIn),this._zoomOutButton=this._createButton(P.zoomOutText,P.zoomOutTitle,c+"-out",g,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),g},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,c,g,P,R){var he=Fn("a",g,P);return he.innerHTML=i,he.href="#",he.title=c,he.setAttribute("role","button"),he.setAttribute("aria-label",c),Eo(he),xn(he,"click",Pr),xn(he,"click",R,this),xn(he,"click",this._refocusOnMap,this),he},_updateDisabled:function(){var i=this._map,c="leaflet-disabled";zn(this._zoomInButton,c),zn(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(Cn(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(Cn(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});Bn.mergeOptions({zoomControl:!0}),Bn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new fr,this.addControl(this.zoomControl))});var Aa=function(i){return new fr(i)},ws=un.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var c="leaflet-control-scale",g=Fn("div",c),P=this.options;return this._addScales(P,c+"-line",g),i.on(P.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),g},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,c,g){i.metric&&(this._mScale=Fn("div",c,g)),i.imperial&&(this._iScale=Fn("div",c,g))},_update:function(){var i=this._map,c=i.getSize().y/2,g=i.distance(i.containerPointToLatLng([0,c]),i.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(g)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var c=this._getRoundNum(i),g=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,g,c/i)},_updateImperial:function(i){var c=i*3.2808399,g,P,R;c>5280?(g=c/5280,P=this._getRoundNum(g),this._updateScale(this._iScale,P+" mi",P/g)):(R=this._getRoundNum(c),this._updateScale(this._iScale,R+" ft",R/c))},_updateScale:function(i,c,g){i.style.width=Math.round(this.options.maxWidth*g)+"px",i.innerHTML=c},_getRoundNum:function(i){var c=Math.pow(10,(Math.floor(i)+"").length-1),g=i/c;return g=g>=10?10:g>=5?5:g>=3?3:g>=2?2:1,c*g}}),na=function(i){return new ws(i)},ia='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Or=un.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ht.inlineSvg?ia+" ":"")+"Leaflet</a>"},initialize:function(i){N(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=Fn("div","leaflet-control-attribution"),Eo(this._container);for(var c in i._layers)i._layers[c].getAttribution&&this.addAttribution(i._layers[c].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var c in this._attributions)this._attributions[c]&&i.push(c);var g=[];this.options.prefix&&g.push(this.options.prefix),i.length&&g.push(i.join(", ")),this._container.innerHTML=g.join(' <span aria-hidden="true">|</span> ')}}});Bn.mergeOptions({attributionControl:!0}),Bn.addInitHook(function(){this.options.attributionControl&&new Or().addTo(this)});var ra=function(i){return new Or(i)};un.Layers=Bo,un.Zoom=fr,un.Scale=ws,un.Attribution=Or,nr.layers=ro,nr.zoom=Aa,nr.scale=na,nr.attribution=ra;var Ei=M.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ei.addTo=function(i,c){return i.addHandler(c,this),this};var el={Events:Z},To=Ht.touch?"touchstart mousedown":"mousedown",Rr=re.extend({options:{clickTolerance:3},initialize:function(i,c,g,P){N(this,P),this._element=i,this._dragStartTarget=c||i,this._preventOutline=g},enable:function(){this._enabled||(xn(this._dragStartTarget,To,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Rr._dragging===this&&this.finishDrag(!0),On(this._dragStartTarget,To,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!Po(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){Rr._dragging===this&&this.finishDrag();return}if(!(Rr._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(Rr._dragging=this,this._preventOutline&&Xo(this._element),Ca(),So(),!this._moving)){this.fire("down");var c=i.touches?i.touches[0]:i,g=Xa(this._element);this._startPoint=new W(c.clientX,c.clientY),this._startPos=bs(this._element),this._parentScale=Qo(g);var P=i.type==="mousedown";xn(document,P?"mousemove":"touchmove",this._onMove,this),xn(document,P?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var c=i.touches&&i.touches.length===1?i.touches[0]:i,g=new W(c.clientX,c.clientY)._subtract(this._startPoint);!g.x&&!g.y||Math.abs(g.x)+Math.abs(g.y)<this.options.clickTolerance||(g.x/=this._parentScale.x,g.y/=this._parentScale.y,vi(i),this._moved||(this.fire("dragstart"),this._moved=!0,Cn(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Cn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(g),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),di(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){zn(document.body,"leaflet-dragging"),this._lastTarget&&(zn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),On(document,"mousemove touchmove",this._onMove,this),On(document,"mouseup touchend touchcancel",this._onUp,this),Qr(),Rs();var c=this._moved&&this._moving;this._moving=!1,Rr._dragging=!1,c&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function sa(i,c,g){var P,R=[1,4,2,8],he,qe,ft,_t,Bt,Zt,an,An;for(he=0,Zt=i.length;he<Zt;he++)i[he]._code=yt(i[he],c);for(ft=0;ft<4;ft++){for(an=R[ft],P=[],he=0,Zt=i.length,qe=Zt-1;he<Zt;qe=he++)_t=i[he],Bt=i[qe],_t._code&an?Bt._code&an||(An=ot(Bt,_t,an,c,g),An._code=yt(An,c),P.push(An)):(Bt._code&an&&(An=ot(Bt,_t,an,c,g),An._code=yt(An,c),P.push(An)),P.push(_t));i=P}return i}function Ma(i,c){var g,P,R,he,qe,ft,_t,Bt,Zt;if(!i||i.length===0)throw new Error("latlngs not passed");Jt(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var an=J([0,0]),An=$(i),ur=An.getNorthWest().distanceTo(An.getSouthWest())*An.getNorthEast().distanceTo(An.getNorthWest());ur<1700&&(an=Ba(i));var Ti=i.length,_r=[];for(g=0;g<Ti;g++){var mi=J(i[g]);_r.push(c.project(J([mi.lat-an.lat,mi.lng-an.lng])))}for(ft=_t=Bt=0,g=0,P=Ti-1;g<Ti;P=g++)R=_r[g],he=_r[P],qe=R.y*he.x-he.y*R.x,_t+=(R.x+he.x)*qe,Bt+=(R.y+he.y)*qe,ft+=qe*3;ft===0?Zt=_r[0]:Zt=[_t/ft,Bt/ft];var Es=c.unproject(z(Zt));return J([Es.lat+an.lat,Es.lng+an.lng])}function Ba(i){for(var c=0,g=0,P=0,R=0;R<i.length;R++){var he=J(i[R]);c+=he.lat,g+=he.lng,P++}return J([c/P,g/P])}var oa={__proto__:null,clipPolygon:sa,polygonCenter:Ma,centroid:Ba};function so(i,c){if(!c||!i.length)return i.slice();var g=c*c;return i=ee(i,g),i=_i(i,g),i}function No(i,c,g){return Math.sqrt(Gt(i,c,g,!0))}function oo(i,c,g){return Gt(i,c,g)}function _i(i,c){var g=i.length,P=typeof Uint8Array<"u"?Uint8Array:Array,R=new P(g);R[0]=R[g-1]=1,C(i,R,c,0,g-1);var he,qe=[];for(he=0;he<g;he++)R[he]&&qe.push(i[he]);return qe}function C(i,c,g,P,R){var he=0,qe,ft,_t;for(ft=P+1;ft<=R-1;ft++)_t=Gt(i[ft],i[P],i[R],!0),_t>he&&(qe=ft,he=_t);he>g&&(c[qe]=1,C(i,c,g,P,qe),C(i,c,g,qe,R))}function ee(i,c){for(var g=[i[0]],P=1,R=0,he=i.length;P<he;P++)Ot(i[P],i[R])>c&&(g.push(i[P]),R=P);return R<he-1&&g.push(i[he-1]),g}var Ne;function He(i,c,g,P,R){var he=P?Ne:yt(i,g),qe=yt(c,g),ft,_t,Bt;for(Ne=qe;;){if(!(he|qe))return[i,c];if(he&qe)return!1;ft=he||qe,_t=ot(i,c,ft,g,R),Bt=yt(_t,g),ft===he?(i=_t,he=Bt):(c=_t,qe=Bt)}}function ot(i,c,g,P,R){var he=c.x-i.x,qe=c.y-i.y,ft=P.min,_t=P.max,Bt,Zt;return g&8?(Bt=i.x+he*(_t.y-i.y)/qe,Zt=_t.y):g&4?(Bt=i.x+he*(ft.y-i.y)/qe,Zt=ft.y):g&2?(Bt=_t.x,Zt=i.y+qe*(_t.x-i.x)/he):g&1&&(Bt=ft.x,Zt=i.y+qe*(ft.x-i.x)/he),new W(Bt,Zt,R)}function yt(i,c){var g=0;return i.x<c.min.x?g|=1:i.x>c.max.x&&(g|=2),i.y<c.min.y?g|=4:i.y>c.max.y&&(g|=8),g}function Ot(i,c){var g=c.x-i.x,P=c.y-i.y;return g*g+P*P}function Gt(i,c,g,P){var R=c.x,he=c.y,qe=g.x-R,ft=g.y-he,_t=qe*qe+ft*ft,Bt;return _t>0&&(Bt=((i.x-R)*qe+(i.y-he)*ft)/_t,Bt>1?(R=g.x,he=g.y):Bt>0&&(R+=qe*Bt,he+=ft*Bt)),qe=i.x-R,ft=i.y-he,P?qe*qe+ft*ft:new W(R,he)}function Jt(i){return!ae(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function sn(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Jt(i)}function vn(i,c){var g,P,R,he,qe,ft,_t,Bt;if(!i||i.length===0)throw new Error("latlngs not passed");Jt(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var Zt=J([0,0]),an=$(i),An=an.getNorthWest().distanceTo(an.getSouthWest())*an.getNorthEast().distanceTo(an.getNorthWest());An<1700&&(Zt=Ba(i));var ur=i.length,Ti=[];for(g=0;g<ur;g++){var _r=J(i[g]);Ti.push(c.project(J([_r.lat-Zt.lat,_r.lng-Zt.lng])))}for(g=0,P=0;g<ur-1;g++)P+=Ti[g].distanceTo(Ti[g+1])/2;if(P===0)Bt=Ti[0];else for(g=0,he=0;g<ur-1;g++)if(qe=Ti[g],ft=Ti[g+1],R=qe.distanceTo(ft),he+=R,he>P){_t=(he-P)/R,Bt=[ft.x-_t*(ft.x-qe.x),ft.y-_t*(ft.y-qe.y)];break}var mi=c.unproject(z(Bt));return J([mi.lat+Zt.lat,mi.lng+Zt.lng])}var Tn={__proto__:null,simplify:so,pointToSegmentDistance:No,closestPointOnSegment:oo,clipSegment:He,_getEdgeIntersection:ot,_getBitCode:yt,_sqClosestPointOnSegment:Gt,isFlat:Jt,_flat:sn,polylineCenter:vn},si={project:function(i){return new W(i.lng,i.lat)},unproject:function(i){return new D(i.y,i.x)},bounds:new Ie([-180,-90],[180,90])},jn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Ie([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var c=Math.PI/180,g=this.R,P=i.lat*c,R=this.R_MINOR/g,he=Math.sqrt(1-R*R),qe=he*Math.sin(P),ft=Math.tan(Math.PI/4-P/2)/Math.pow((1-qe)/(1+qe),he/2);return P=-g*Math.log(Math.max(ft,1e-10)),new W(i.lng*c*g,P)},unproject:function(i){for(var c=180/Math.PI,g=this.R,P=this.R_MINOR/g,R=Math.sqrt(1-P*P),he=Math.exp(-i.y/g),qe=Math.PI/2-2*Math.atan(he),ft=0,_t=.1,Bt;ft<15&&Math.abs(_t)>1e-7;ft++)Bt=R*Math.sin(qe),Bt=Math.pow((1-Bt)/(1+Bt),R/2),_t=Math.PI/2-2*Math.atan(he*Bt)-qe,qe+=_t;return new D(qe*c,i.x*c/g)}},Hn={__proto__:null,LonLat:si,Mercator:jn,SphericalMercator:je},Ai=o({},ge,{code:"EPSG:3395",projection:jn,transformation:function(){var i=.5/(Math.PI*jn.R);return X(i,.5,-i,.5)}()}),Li=o({},ge,{code:"EPSG:4326",projection:si,transformation:X(1/180,1,-1/180,.5)}),Sr=o({},le,{projection:si,transformation:X(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,c){var g=c.lng-i.lng,P=c.lat-i.lat;return Math.sqrt(g*g+P*P)},infinite:!0});le.Earth=ge,le.EPSG3395=Ai,le.EPSG3857=se,le.EPSG900913=Te,le.EPSG4326=Li,le.Simple=Sr;var Xn=re.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[m(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[m(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var c=i.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var g=this.getEvents();c.on(g,this),this.once("remove",function(){c.off(g,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});Bn.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var c=m(i);return this._layers[c]?this:(this._layers[c]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var c=m(i);return this._layers[c]?(this._loaded&&i.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return m(i)in this._layers},eachLayer:function(i,c){for(var g in this._layers)i.call(c,this._layers[g]);return this},_addLayers:function(i){i=i?ae(i)?i:[i]:[];for(var c=0,g=i.length;c<g;c++)this.addLayer(i[c])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[m(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var c=m(i);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,c=-1/0,g=this._getZoomSpan();for(var P in this._zoomBoundLayers){var R=this._zoomBoundLayers[P].options;i=R.minZoom===void 0?i:Math.min(i,R.minZoom),c=R.maxZoom===void 0?c:Math.max(c,R.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=i===1/0?void 0:i,g!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ir=Xn.extend({initialize:function(i,c){N(this,c),this._layers={};var g,P;if(i)for(g=0,P=i.length;g<P;g++)this.addLayer(i[g])},addLayer:function(i){var c=this.getLayerId(i);return this._layers[c]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var c=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(i){var c=typeof i=="number"?i:this.getLayerId(i);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var c=Array.prototype.slice.call(arguments,1),g,P;for(g in this._layers)P=this._layers[g],P[i]&&P[i].apply(P,c);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,c){for(var g in this._layers)i.call(c,this._layers[g]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return m(i)}}),tl=function(i,c){return new ir(i,c)},rr=ir.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),ir.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),ir.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new G;for(var c in this._layers){var g=this._layers[c];i.extend(g.getBounds?g.getBounds():g.getLatLng())}return i}}),Ta=function(i,c){return new rr(i,c)},es=M.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){N(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,c){var g=this._getIconUrl(i);if(!g){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var P=this._createImg(g,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(P,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(P.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),P},_setIconStyles:function(i,c){var g=this.options,P=g[c+"Size"];typeof P=="number"&&(P=[P,P]);var R=z(P),he=z(c==="shadow"&&g.shadowAnchor||g.iconAnchor||R&&R.divideBy(2,!0));i.className="leaflet-marker-"+c+" "+(g.className||""),he&&(i.style.marginLeft=-he.x+"px",i.style.marginTop=-he.y+"px"),R&&(i.style.width=R.x+"px",i.style.height=R.y+"px")},_createImg:function(i,c){return c=c||document.createElement("img"),c.src=i,c},_getIconUrl:function(i){return Ht.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function Na(i){return new es(i)}var zs=es.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof zs.imagePath!="string"&&(zs.imagePath=this._detectIconPath()),(this.options.imagePath||zs.imagePath)+es.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var c=function(g,P,R){var he=P.exec(g);return he&&he[R]};return i=c(i,/^url\((['"])?(.+)\1\)$/,2),i&&c(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=Fn("div","leaflet-default-icon-path",document.body),c=kr(i,"background-image")||kr(i,"backgroundImage");if(document.body.removeChild(i),c=this._stripUrl(c),c)return c;var g=document.querySelector('link[href$="leaflet.css"]');return g?g.href.substring(0,g.href.length-11-1):""}}),Us=Ei.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new Rr(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Cn(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&zn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var c=this._marker,g=c._map,P=this._marker.options.autoPanSpeed,R=this._marker.options.autoPanPadding,he=bs(c._icon),qe=g.getPixelBounds(),ft=g.getPixelOrigin(),_t=I(qe.min._subtract(ft).add(R),qe.max._subtract(ft).subtract(R));if(!_t.contains(he)){var Bt=z((Math.max(_t.max.x,he.x)-_t.max.x)/(qe.max.x-_t.max.x)-(Math.min(_t.min.x,he.x)-_t.min.x)/(qe.min.x-_t.min.x),(Math.max(_t.max.y,he.y)-_t.max.y)/(qe.max.y-_t.max.y)-(Math.min(_t.min.y,he.y)-_t.min.y)/(qe.min.y-_t.min.y)).multiplyBy(P);g.panBy(Bt,{animate:!1}),this._draggable._newPos._add(Bt),this._draggable._startPos._add(Bt),di(c._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=q(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(H(this._panRequest),this._panRequest=q(this._adjustPan.bind(this,i)))},_onDrag:function(i){var c=this._marker,g=c._shadow,P=bs(c._icon),R=c._map.layerPointToLatLng(P);g&&di(g,P),c._latlng=R,i.latlng=R,i.oldLatLng=this._oldLatLng,c.fire("move",i).fire("drag",i)},_onDragEnd:function(i){H(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),Ci=Xn.extend({options:{icon:new zs,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,c){N(this,c),this._latlng=J(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var c=this._latlng;return this._latlng=J(i),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),g=i.icon.createIcon(this._icon),P=!1;g!==this._icon&&(this._icon&&this._removeIcon(),P=!0,i.title&&(g.title=i.title),g.tagName==="IMG"&&(g.alt=i.alt||"")),Cn(g,c),i.keyboard&&(g.tabIndex="0",g.setAttribute("role","button")),this._icon=g,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&xn(g,"focus",this._panOnFocus,this);var R=i.icon.createShadow(this._shadow),he=!1;R!==this._shadow&&(this._removeShadow(),he=!0),R&&(Cn(R,c),R.alt=""),this._shadow=R,i.opacity<1&&this._updateOpacity(),P&&this.getPane().appendChild(this._icon),this._initInteraction(),R&&he&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&On(this._icon,"focus",this._panOnFocus,this),wn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&wn(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&di(this._icon,i),this._shadow&&di(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var c=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(Cn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Us)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Us(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&Zi(this._icon,i),this._shadow&&Zi(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var c=this.options.icon.options,g=c.iconSize?z(c.iconSize):z(0,0),P=c.iconAnchor?z(c.iconAnchor):z(0,0);i.panInside(this._latlng,{paddingTopLeft:P,paddingBottomRight:g.subtract(P)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function aa(i,c){return new Ci(i,c)}var dr=Xn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return N(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),sr=dr.extend({options:{fill:!0,radius:10},initialize:function(i,c){N(this,c),this._latlng=J(i),this._radius=this.options.radius},setLatLng:function(i){var c=this._latlng;return this._latlng=J(i),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var c=i&&i.radius||this._radius;return dr.prototype.setStyle.call(this,i),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,c=this._radiusY||i,g=this._clickTolerance(),P=[i+g,c+g];this._pxBounds=new Ie(this._point.subtract(P),this._point.add(P))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function la(i,c){return new sr(i,c)}var Ki=sr.extend({initialize:function(i,c,g){if(typeof c=="number"&&(c=o({},g,{radius:c})),N(this,c),this._latlng=J(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new G(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:dr.prototype.setStyle,_project:function(){var i=this._latlng.lng,c=this._latlng.lat,g=this._map,P=g.options.crs;if(P.distance===ge.distance){var R=Math.PI/180,he=this._mRadius/ge.R/R,qe=g.project([c+he,i]),ft=g.project([c-he,i]),_t=qe.add(ft).divideBy(2),Bt=g.unproject(_t).lat,Zt=Math.acos((Math.cos(he*R)-Math.sin(c*R)*Math.sin(Bt*R))/(Math.cos(c*R)*Math.cos(Bt*R)))/R;(isNaN(Zt)||Zt===0)&&(Zt=he/Math.cos(Math.PI/180*c)),this._point=_t.subtract(g.getPixelOrigin()),this._radius=isNaN(Zt)?0:_t.x-g.project([Bt,i-Zt]).x,this._radiusY=_t.y-qe.y}else{var an=P.unproject(P.project(this._latlng).subtract([this._mRadius,0]));this._point=g.latLngToLayerPoint(this._latlng),this._radius=this._point.x-g.latLngToLayerPoint(an).x}this._updateBounds()}});function qs(i,c,g){return new Ki(i,c,g)}var Er=dr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,c){N(this,c),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var c=1/0,g=null,P=Gt,R,he,qe=0,ft=this._parts.length;qe<ft;qe++)for(var _t=this._parts[qe],Bt=1,Zt=_t.length;Bt<Zt;Bt++){R=_t[Bt-1],he=_t[Bt];var an=P(i,R,he,!0);an<c&&(c=an,g=P(i,R,he))}return g&&(g.distance=Math.sqrt(c)),g},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return vn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,c){return c=c||this._defaultShape(),i=J(i),c.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new G,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return Jt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var c=[],g=Jt(i),P=0,R=i.length;P<R;P++)g?(c[P]=J(i[P]),this._bounds.extend(c[P])):c[P]=this._convertLatLngs(i[P]);return c},_project:function(){var i=new Ie;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),c=new W(i,i);this._rawPxBounds&&(this._pxBounds=new Ie([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(i,c,g){var P=i[0]instanceof D,R=i.length,he,qe;if(P){for(qe=[],he=0;he<R;he++)qe[he]=this._map.latLngToLayerPoint(i[he]),g.extend(qe[he]);c.push(qe)}else for(he=0;he<R;he++)this._projectLatlngs(i[he],c,g)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,g,P,R,he,qe,ft,_t;for(g=0,R=0,he=this._rings.length;g<he;g++)for(_t=this._rings[g],P=0,qe=_t.length;P<qe-1;P++)ft=He(_t[P],_t[P+1],i,P,!0),ft&&(c[R]=c[R]||[],c[R].push(ft[0]),(ft[1]!==_t[P+1]||P===qe-2)&&(c[R].push(ft[1]),R++))}},_simplifyPoints:function(){for(var i=this._parts,c=this.options.smoothFactor,g=0,P=i.length;g<P;g++)i[g]=so(i[g],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,c){var g,P,R,he,qe,ft,_t=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(g=0,he=this._parts.length;g<he;g++)for(ft=this._parts[g],P=0,qe=ft.length,R=qe-1;P<qe;R=P++)if(!(!c&&P===0)&&No(i,ft[R],ft[P])<=_t)return!0;return!1}});function nl(i,c){return new Er(i,c)}Er._flat=sn;var Mi=Er.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ma(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var c=Er.prototype._convertLatLngs.call(this,i),g=c.length;return g>=2&&c[0]instanceof D&&c[0].equals(c[g-1])&&c.pop(),c},_setLatLngs:function(i){Er.prototype._setLatLngs.call(this,i),Jt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Jt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,c=this.options.weight,g=new W(c,c);if(i=new Ie(i.min.subtract(g),i.max.add(g)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var P=0,R=this._rings.length,he;P<R;P++)he=sa(this._rings[P],i,!0),he.length&&this._parts.push(he)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var c=!1,g,P,R,he,qe,ft,_t,Bt;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(he=0,_t=this._parts.length;he<_t;he++)for(g=this._parts[he],qe=0,Bt=g.length,ft=Bt-1;qe<Bt;ft=qe++)P=g[qe],R=g[ft],P.y>i.y!=R.y>i.y&&i.x<(R.x-P.x)*(i.y-P.y)/(R.y-P.y)+P.x&&(c=!c);return c||Er.prototype._containsPoint.call(this,i,!0)}});function xs(i,c){return new Mi(i,c)}var Ir=rr.extend({initialize:function(i,c){N(this,c),this._layers={},i&&this.addData(i)},addData:function(i){var c=ae(i)?i:i.features,g,P,R;if(c){for(g=0,P=c.length;g<P;g++)R=c[g],(R.geometries||R.geometry||R.features||R.coordinates)&&this.addData(R);return this}var he=this.options;if(he.filter&&!he.filter(i))return this;var qe=Do(i,he);return qe?(qe.feature=Fr(i),qe.defaultOptions=qe.options,this.resetStyle(qe),he.onEachFeature&&he.onEachFeature(i,qe),this.addLayer(qe)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=o({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(c){this._setLayerStyle(c,i)},this)},_setLayerStyle:function(i,c){i.setStyle&&(typeof c=="function"&&(c=c(i.feature)),i.setStyle(c))}});function Do(i,c){var g=i.type==="Feature"?i.geometry:i,P=g?g.coordinates:null,R=[],he=c&&c.pointToLayer,qe=c&&c.coordsToLatLng||Ls,ft,_t,Bt,Zt;if(!P&&!g)return null;switch(g.type){case"Point":return ft=qe(P),$s(he,i,ft,c);case"MultiPoint":for(Bt=0,Zt=P.length;Bt<Zt;Bt++)ft=qe(P[Bt]),R.push($s(he,i,ft,c));return new rr(R);case"LineString":case"MultiLineString":return _t=ji(P,g.type==="LineString"?0:1,qe),new Er(_t,c);case"Polygon":case"MultiPolygon":return _t=ji(P,g.type==="Polygon"?1:2,qe),new Mi(_t,c);case"GeometryCollection":for(Bt=0,Zt=g.geometries.length;Bt<Zt;Bt++){var an=Do({geometry:g.geometries[Bt],type:"Feature",properties:i.properties},c);an&&R.push(an)}return new rr(R);case"FeatureCollection":for(Bt=0,Zt=g.features.length;Bt<Zt;Bt++){var An=Do(g.features[Bt],c);An&&R.push(An)}return new rr(R);default:throw new Error("Invalid GeoJSON object.")}}function $s(i,c,g,P){return i?i(c,g):new Ci(g,P&&P.markersInheritOptions&&P)}function Ls(i){return new D(i[1],i[0],i[2])}function ji(i,c,g){for(var P=[],R=0,he=i.length,qe;R<he;R++)qe=c?ji(i[R],c-1,g):(g||Ls)(i[R]),P.push(qe);return P}function Oi(i,c){return i=J(i),i.alt!==void 0?[E(i.lng,c),E(i.lat,c),E(i.alt,c)]:[E(i.lng,c),E(i.lat,c)]}function ts(i,c,g,P){for(var R=[],he=0,qe=i.length;he<qe;he++)R.push(c?ts(i[he],Jt(i[he])?0:c-1,g,P):Oi(i[he],P));return!c&&g&&R.length>0&&R.push(R[0].slice()),R}function pr(i,c){return i.feature?o({},i.feature,{geometry:c}):Fr(c)}function Fr(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var Vs={toGeoJSON:function(i){return pr(this,{type:"Point",coordinates:Oi(this.getLatLng(),i)})}};Ci.include(Vs),Ki.include(Vs),sr.include(Vs),Er.include({toGeoJSON:function(i){var c=!Jt(this._latlngs),g=ts(this._latlngs,c?1:0,!1,i);return pr(this,{type:(c?"Multi":"")+"LineString",coordinates:g})}}),Mi.include({toGeoJSON:function(i){var c=!Jt(this._latlngs),g=c&&!Jt(this._latlngs[0]),P=ts(this._latlngs,g?2:c?1:0,!0,i);return c||(P=[P]),pr(this,{type:(g?"Multi":"")+"Polygon",coordinates:P})}}),ir.include({toMultiPoint:function(i){var c=[];return this.eachLayer(function(g){c.push(g.toGeoJSON(i).geometry.coordinates)}),pr(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(i){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(i);var g=c==="GeometryCollection",P=[];return this.eachLayer(function(R){if(R.toGeoJSON){var he=R.toGeoJSON(i);if(g)P.push(he.geometry);else{var qe=Fr(he);qe.type==="FeatureCollection"?P.push.apply(P,qe.features):P.push(qe)}}}),g?pr(this,{geometries:P,type:"GeometryCollection"}):{type:"FeatureCollection",features:P}}});function jr(i,c){return new Ir(i,c)}var pi=jr,Cs=Xn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,c,g){this._url=i,this._bounds=$(c),N(this,g)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Cn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){wn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Os(this._image),this},bringToBack:function(){return this._map&&_s(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=$(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",c=this._image=i?this._url:Fn("img");if(Cn(c,"leaflet-image-layer"),this._zoomAnimated&&Cn(c,"leaflet-zoom-animated"),this.options.className&&Cn(c,this.options.className),c.onselectstart=b,c.onmousemove=b,c.onload=u(this.fire,this,"load"),c.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(i){var c=this._map.getZoomScale(i.zoom),g=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;ys(this._image,g,c)},_reset:function(){var i=this._image,c=new Ie(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),g=c.getSize();di(i,c.min),i.style.width=g.x+"px",i.style.height=g.y+"px"},_updateOpacity:function(){Zi(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),or=function(i,c,g){return new Cs(i,c,g)},Ji=Cs.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",c=this._image=i?this._url:Fn("video");if(Cn(c,"leaflet-image-layer"),this._zoomAnimated&&Cn(c,"leaflet-zoom-animated"),this.options.className&&Cn(c,this.options.className),c.onselectstart=b,c.onmousemove=b,c.onloadeddata=u(this.fire,this,"load"),i){for(var g=c.getElementsByTagName("source"),P=[],R=0;R<g.length;R++)P.push(g[R].src);this._url=g.length>0?P:[c.src];return}ae(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var he=0;he<this._url.length;he++){var qe=Fn("source");qe.src=this._url[he],c.appendChild(qe)}}});function Oo(i,c,g){return new Ji(i,c,g)}var Da=Cs.extend({_initImage:function(){var i=this._image=this._url;Cn(i,"leaflet-image-layer"),this._zoomAnimated&&Cn(i,"leaflet-zoom-animated"),this.options.className&&Cn(i,this.options.className),i.onselectstart=b,i.onmousemove=b}});function Oa(i,c,g){return new Da(i,c,g)}var Yi=Xn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,c){i&&(i instanceof D||ae(i))?(this._latlng=J(i),N(this,c)):(N(this,i),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&Zi(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&Zi(this._container,1),this.bringToFront(),this.options.interactive&&(Cn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(Zi(this._container,0),this._removeTimeout=setTimeout(u(wn,void 0,this._container),200)):wn(this._container),this.options.interactive&&(zn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=J(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Os(this._container),this},bringToBack:function(){return this._map&&_s(this._container),this},_prepareOpen:function(i){var c=this._source;if(!c._map)return!1;if(c instanceof rr){c=null;var g=this._source._layers;for(var P in g)if(g[P]._map){c=g[P];break}if(!c)return!1;this._source=c}if(!i)if(c.getCenter)i=c.getCenter();else if(c.getLatLng)i=c.getLatLng();else if(c.getBounds)i=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")i.innerHTML=c;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),c=z(this.options.offset),g=this._getAnchor();this._zoomAnimated?di(this._container,i.add(g)):c=c.add(i).add(g);var P=this._containerBottom=-c.y,R=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=P+"px",this._container.style.left=R+"px"}},_getAnchor:function(){return[0,0]}});Bn.include({_initOverlay:function(i,c,g,P){var R=c;return R instanceof i||(R=new i(P).setContent(c)),g&&R.setLatLng(g),R}}),Xn.include({_initOverlay:function(i,c,g,P){var R=g;return R instanceof i?(N(R,P),R._source=this):(R=c&&!P?c:new i(P,this),R.setContent(g)),R}});var mr=Yi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,Yi.prototype.openOn.call(this,i)},onAdd:function(i){Yi.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof dr||this._source.on("preclick",Fs))},onRemove:function(i){Yi.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof dr||this._source.off("preclick",Fs))},getEvents:function(){var i=Yi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",c=this._container=Fn("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),g=this._wrapper=Fn("div",i+"-content-wrapper",c);if(this._contentNode=Fn("div",i+"-content",g),Eo(c),Pa(this._contentNode),xn(c,"contextmenu",Fs),this._tipContainer=Fn("div",i+"-tip-container",c),this._tip=Fn("div",i+"-tip",this._tipContainer),this.options.closeButton){var P=this._closeButton=Fn("a",i+"-close-button",c);P.setAttribute("role","button"),P.setAttribute("aria-label","Close popup"),P.href="#close",P.innerHTML='<span aria-hidden="true">&#215;</span>',xn(P,"click",function(R){vi(R),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,c=i.style;c.width="",c.whiteSpace="nowrap";var g=i.offsetWidth;g=Math.min(g,this.options.maxWidth),g=Math.max(g,this.options.minWidth),c.width=g+1+"px",c.whiteSpace="",c.height="";var P=i.offsetHeight,R=this.options.maxHeight,he="leaflet-popup-scrolled";R&&P>R?(c.height=R+"px",Cn(i,he)):zn(i,he),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var c=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),g=this._getAnchor();di(this._container,c.add(g))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,c=parseInt(kr(this._container,"marginBottom"),10)||0,g=this._container.offsetHeight+c,P=this._containerWidth,R=new W(this._containerLeft,-g-this._containerBottom);R._add(bs(this._container));var he=i.layerPointToContainerPoint(R),qe=z(this.options.autoPanPadding),ft=z(this.options.autoPanPaddingTopLeft||qe),_t=z(this.options.autoPanPaddingBottomRight||qe),Bt=i.getSize(),Zt=0,an=0;he.x+P+_t.x>Bt.x&&(Zt=he.x+P-Bt.x+_t.x),he.x-Zt-ft.x<0&&(Zt=he.x-ft.x),he.y+g+_t.y>Bt.y&&(an=he.y+g-Bt.y+_t.y),he.y-an-ft.y<0&&(an=he.y-ft.y),(Zt||an)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([Zt,an]))}},_getAnchor:function(){return z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ao=function(i,c){return new mr(i,c)};Bn.mergeOptions({closePopupOnClick:!0}),Bn.include({openPopup:function(i,c,g){return this._initOverlay(mr,i,c,g).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),Xn.include({bindPopup:function(i,c){return this._popup=this._initOverlay(mr,this._popup,i,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof rr||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){Pr(i);var c=i.layer||i.target;if(this._popup._source===c&&!(c instanceof dr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=c,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var ks=Yi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){Yi.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){Yi.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=Yi.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",c=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Fn("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+m(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var c,g,P=this._map,R=this._container,he=P.latLngToContainerPoint(P.getCenter()),qe=P.layerPointToContainerPoint(i),ft=this.options.direction,_t=R.offsetWidth,Bt=R.offsetHeight,Zt=z(this.options.offset),an=this._getAnchor();ft==="top"?(c=_t/2,g=Bt):ft==="bottom"?(c=_t/2,g=0):ft==="center"?(c=_t/2,g=Bt/2):ft==="right"?(c=0,g=Bt/2):ft==="left"?(c=_t,g=Bt/2):qe.x<he.x?(ft="right",c=0,g=Bt/2):(ft="left",c=_t+(Zt.x+an.x)*2,g=Bt/2),i=i.subtract(z(c,g,!0)).add(Zt).add(an),zn(R,"leaflet-tooltip-right"),zn(R,"leaflet-tooltip-left"),zn(R,"leaflet-tooltip-top"),zn(R,"leaflet-tooltip-bottom"),Cn(R,"leaflet-tooltip-"+ft),di(R,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&Zi(this._container,i)},_animateZoom:function(i){var c=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(c)},_getAnchor:function(){return z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ua=function(i,c){return new ks(i,c)};Bn.include({openTooltip:function(i,c,g){return this._initOverlay(ks,i,c,g).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),Xn.include({bindTooltip:function(i,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ks,this._tooltip,i,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var c=i?"off":"on",g={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?g.add=this._openTooltip:(g.mouseover=this._openTooltip,g.mouseout=this.closeTooltip,g.click=this._openTooltip,this._map?this._addFocusListeners():g.add=this._addFocusListeners),this._tooltip.options.sticky&&(g.mousemove=this._moveTooltip),this[c](g),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof rr||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var c=typeof i.getElement=="function"&&i.getElement();c&&(xn(c,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),xn(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var c=typeof i.getElement=="function"&&i.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var c=i.latlng,g,P;this._tooltip.options.sticky&&i.originalEvent&&(g=this._map.mouseEventToContainerPoint(i.originalEvent),P=this._map.containerPointToLayerPoint(g),c=this._map.layerPointToLatLng(P)),this._tooltip.setLatLng(c)}});var lo=es.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var c=i&&i.tagName==="DIV"?i:document.createElement("div"),g=this.options;if(g.html instanceof Element?(Xs(c),c.appendChild(g.html)):c.innerHTML=g.html!==!1?g.html:"",g.bgPos){var P=z(g.bgPos);c.style.backgroundPosition=-P.x+"px "+-P.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function uo(i){return new lo(i)}es.Default=zs;var Hs=Xn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ht.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){N(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),wn(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Os(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(_s(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof W?i:new W(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var c=this.getPane().children,g=-i(-1/0,1/0),P=0,R=c.length,he;P<R;P++)he=c[P].style.zIndex,c[P]!==this._container&&he&&(g=i(g,+he));isFinite(g)&&(this.options.zIndex=g+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ht.ielt9){Zi(this._container,this.options.opacity);var i=+new Date,c=!1,g=!1;for(var P in this._tiles){var R=this._tiles[P];if(!(!R.current||!R.loaded)){var he=Math.min(1,(i-R.loaded)/200);Zi(R.el,he),he<1?c=!0:(R.active?g=!0:this._onOpaqueTile(R),R.active=!0)}}g&&!this._noPrune&&this._pruneTiles(),c&&(H(this._fadeFrame),this._fadeFrame=q(this._updateOpacity,this))}},_onOpaqueTile:b,_initContainer:function(){this._container||(this._container=Fn("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,c=this.options.maxZoom;if(i!==void 0){for(var g in this._levels)g=Number(g),this._levels[g].el.children.length||g===i?(this._levels[g].el.style.zIndex=c-Math.abs(i-g),this._onUpdateLevel(g)):(wn(this._levels[g].el),this._removeTilesAtZoom(g),this._onRemoveLevel(g),delete this._levels[g]);var P=this._levels[i],R=this._map;return P||(P=this._levels[i]={},P.el=Fn("div","leaflet-tile-container leaflet-zoom-animated",this._container),P.el.style.zIndex=c,P.origin=R.project(R.unproject(R.getPixelOrigin()),i).round(),P.zoom=i,this._setZoomTransform(P,R.getCenter(),R.getZoom()),b(P.el.offsetWidth),this._onCreateLevel(P)),this._level=P,P}},_onUpdateLevel:b,_onRemoveLevel:b,_onCreateLevel:b,_pruneTiles:function(){if(this._map){var i,c,g=this._map.getZoom();if(g>this.options.maxZoom||g<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)c=this._tiles[i],c.retain=c.current;for(i in this._tiles)if(c=this._tiles[i],c.current&&!c.active){var P=c.coords;this._retainParent(P.x,P.y,P.z,P.z-5)||this._retainChildren(P.x,P.y,P.z,P.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var c in this._tiles)this._tiles[c].coords.z===i&&this._removeTile(c)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)wn(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,c,g,P){var R=Math.floor(i/2),he=Math.floor(c/2),qe=g-1,ft=new W(+R,+he);ft.z=+qe;var _t=this._tileCoordsToKey(ft),Bt=this._tiles[_t];return Bt&&Bt.active?(Bt.retain=!0,!0):(Bt&&Bt.loaded&&(Bt.retain=!0),qe>P?this._retainParent(R,he,qe,P):!1)},_retainChildren:function(i,c,g,P){for(var R=2*i;R<2*i+2;R++)for(var he=2*c;he<2*c+2;he++){var qe=new W(R,he);qe.z=g+1;var ft=this._tileCoordsToKey(qe),_t=this._tiles[ft];if(_t&&_t.active){_t.retain=!0;continue}else _t&&_t.loaded&&(_t.retain=!0);g+1<P&&this._retainChildren(R,he,g+1,P)}},_resetView:function(i){var c=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var c=this.options;return c.minNativeZoom!==void 0&&i<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<i?c.maxNativeZoom:i},_setView:function(i,c,g,P){var R=Math.round(c);this.options.maxZoom!==void 0&&R>this.options.maxZoom||this.options.minZoom!==void 0&&R<this.options.minZoom?R=void 0:R=this._clampZoom(R);var he=this.options.updateWhenZooming&&R!==this._tileZoom;(!P||he)&&(this._tileZoom=R,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),R!==void 0&&this._update(i),g||this._pruneTiles(),this._noPrune=!!g),this._setZoomTransforms(i,c)},_setZoomTransforms:function(i,c){for(var g in this._levels)this._setZoomTransform(this._levels[g],i,c)},_setZoomTransform:function(i,c,g){var P=this._map.getZoomScale(g,i.zoom),R=i.origin.multiplyBy(P).subtract(this._map._getNewPixelOrigin(c,g)).round();Ht.any3d?ys(i.el,R,P):di(i.el,R)},_resetGrid:function(){var i=this._map,c=i.options.crs,g=this._tileSize=this.getTileSize(),P=this._tileZoom,R=this._map.getPixelWorldBounds(this._tileZoom);R&&(this._globalTileRange=this._pxBoundsToTileRange(R)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,c.wrapLng[0]],P).x/g.x),Math.ceil(i.project([0,c.wrapLng[1]],P).x/g.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([c.wrapLat[0],0],P).y/g.x),Math.ceil(i.project([c.wrapLat[1],0],P).y/g.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var c=this._map,g=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),P=c.getZoomScale(g,this._tileZoom),R=c.project(i,this._tileZoom).floor(),he=c.getSize().divideBy(P*2);return new Ie(R.subtract(he),R.add(he))},_update:function(i){var c=this._map;if(c){var g=this._clampZoom(c.getZoom());if(i===void 0&&(i=c.getCenter()),this._tileZoom!==void 0){var P=this._getTiledPixelBounds(i),R=this._pxBoundsToTileRange(P),he=R.getCenter(),qe=[],ft=this.options.keepBuffer,_t=new Ie(R.getBottomLeft().subtract([ft,-ft]),R.getTopRight().add([ft,-ft]));if(!(isFinite(R.min.x)&&isFinite(R.min.y)&&isFinite(R.max.x)&&isFinite(R.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Bt in this._tiles){var Zt=this._tiles[Bt].coords;(Zt.z!==this._tileZoom||!_t.contains(new W(Zt.x,Zt.y)))&&(this._tiles[Bt].current=!1)}if(Math.abs(g-this._tileZoom)>1){this._setView(i,g);return}for(var an=R.min.y;an<=R.max.y;an++)for(var An=R.min.x;An<=R.max.x;An++){var ur=new W(An,an);if(ur.z=this._tileZoom,!!this._isValidTile(ur)){var Ti=this._tiles[this._tileCoordsToKey(ur)];Ti?Ti.current=!0:qe.push(ur)}}if(qe.sort(function(mi,Es){return mi.distanceTo(he)-Es.distanceTo(he)}),qe.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var _r=document.createDocumentFragment();for(An=0;An<qe.length;An++)this._addTile(qe[An],_r);this._level.el.appendChild(_r)}}}},_isValidTile:function(i){var c=this._map.options.crs;if(!c.infinite){var g=this._globalTileRange;if(!c.wrapLng&&(i.x<g.min.x||i.x>g.max.x)||!c.wrapLat&&(i.y<g.min.y||i.y>g.max.y))return!1}if(!this.options.bounds)return!0;var P=this._tileCoordsToBounds(i);return $(this.options.bounds).overlaps(P)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var c=this._map,g=this.getTileSize(),P=i.scaleBy(g),R=P.add(g),he=c.unproject(P,i.z),qe=c.unproject(R,i.z);return[he,qe]},_tileCoordsToBounds:function(i){var c=this._tileCoordsToNwSe(i),g=new G(c[0],c[1]);return this.options.noWrap||(g=this._map.wrapLatLngBounds(g)),g},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var c=i.split(":"),g=new W(+c[0],+c[1]);return g.z=+c[2],g},_removeTile:function(i){var c=this._tiles[i];c&&(wn(c.el),delete this._tiles[i],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){Cn(i,"leaflet-tile");var c=this.getTileSize();i.style.width=c.x+"px",i.style.height=c.y+"px",i.onselectstart=b,i.onmousemove=b,Ht.ielt9&&this.options.opacity<1&&Zi(i,this.options.opacity)},_addTile:function(i,c){var g=this._getTilePos(i),P=this._tileCoordsToKey(i),R=this.createTile(this._wrapCoords(i),u(this._tileReady,this,i));this._initTile(R),this.createTile.length<2&&q(u(this._tileReady,this,i,null,R)),di(R,g),this._tiles[P]={el:R,coords:i,current:!0},c.appendChild(R),this.fire("tileloadstart",{tile:R,coords:i})},_tileReady:function(i,c,g){c&&this.fire("tileerror",{error:c,tile:g,coords:i});var P=this._tileCoordsToKey(i);g=this._tiles[P],g&&(g.loaded=+new Date,this._map._fadeAnimated?(Zi(g.el,0),H(this._fadeFrame),this._fadeFrame=q(this._updateOpacity,this)):(g.active=!0,this._pruneTiles()),c||(Cn(g.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:g.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ht.ielt9||!this._map._fadeAnimated?q(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var c=new W(this._wrapX?w(i.x,this._wrapX):i.x,this._wrapY?w(i.y,this._wrapY):i.y);return c.z=i.z,c},_pxBoundsToTileRange:function(i){var c=this.getTileSize();return new Ie(i.min.unscaleBy(c).floor(),i.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function zr(i){return new Hs(i)}var zi=Hs.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,c){this._url=i,c=N(this,c),c.detectRetina&&Ht.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,c){return this._url===i&&c===void 0&&(c=!0),this._url=i,c||this.redraw(),this},createTile:function(i,c){var g=document.createElement("img");return xn(g,"load",u(this._tileOnLoad,this,c,g)),xn(g,"error",u(this._tileOnError,this,c,g)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(g.referrerPolicy=this.options.referrerPolicy),g.alt="",g.src=this.getTileUrl(i),g},getTileUrl:function(i){var c={r:Ht.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var g=this._globalTileRange.max.y-i.y;this.options.tms&&(c.y=g),c["-y"]=g}return ne(this._url,o(c,this.options))},_tileOnLoad:function(i,c){Ht.ielt9?setTimeout(u(i,this,null,c),0):i(null,c)},_tileOnError:function(i,c,g){var P=this.options.errorTileUrl;P&&c.getAttribute("src")!==P&&(c.src=P),i(g,c)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,c=this.options.maxZoom,g=this.options.zoomReverse,P=this.options.zoomOffset;return g&&(i=c-i),i+P},_getSubdomain:function(i){var c=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var i,c;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(c=this._tiles[i].el,c.onload=b,c.onerror=b,!c.complete)){c.src=ye;var g=this._tiles[i].coords;wn(c),delete this._tiles[i],this.fire("tileabort",{tile:c,coords:g})}},_removeTile:function(i){var c=this._tiles[i];if(c)return c.el.setAttribute("src",ye),Hs.prototype._removeTile.call(this,i)},_tileReady:function(i,c,g){if(!(!this._map||g&&g.getAttribute("src")===ye))return Hs.prototype._tileReady.call(this,i,c,g)}});function Jn(i,c){return new zi(i,c)}var Gn=zi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,c){this._url=i;var g=o({},this.defaultWmsParams);for(var P in c)P in this.options||(g[P]=c[P]);c=N(this,c);var R=c.detectRetina&&Ht.retina?2:1,he=this.getTileSize();g.width=he.x*R,g.height=he.y*R,this.wmsParams=g},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,zi.prototype.onAdd.call(this,i)},getTileUrl:function(i){var c=this._tileCoordsToNwSe(i),g=this._crs,P=I(g.project(c[0]),g.project(c[1])),R=P.min,he=P.max,qe=(this._wmsVersion>=1.3&&this._crs===Li?[R.y,R.x,he.y,he.x]:[R.x,R.y,he.x,he.y]).join(","),ft=zi.prototype.getTileUrl.call(this,i);return ft+U(this.wmsParams,ft,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+qe},setParams:function(i,c){return o(this.wmsParams,i),c||this.redraw(),this}});function yi(i,c){return new Gn(i,c)}zi.WMS=Gn,Jn.wms=yi;var Qn=Xn.extend({options:{padding:.1},initialize:function(i){N(this,i),m(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Cn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,c){var g=this._map.getZoomScale(c,this._zoom),P=this._map.getSize().multiplyBy(.5+this.options.padding),R=this._map.project(this._center,c),he=P.multiplyBy(-g).add(R).subtract(this._map._getNewPixelOrigin(i,c));Ht.any3d?ys(this._container,he,g):di(this._container,he)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,c=this._map.getSize(),g=this._map.containerPointToLayerPoint(c.multiplyBy(-i)).round();this._bounds=new Ie(g,g.add(c.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ns=Qn.extend({options:{tolerance:0},getEvents:function(){var i=Qn.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Qn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");xn(i,"mousemove",this._onMouseMove,this),xn(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),xn(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){H(this._redrawRequest),delete this._ctx,wn(this._container),On(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var c in this._layers)i=this._layers[c],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Qn.prototype._update.call(this);var i=this._bounds,c=this._container,g=i.getSize(),P=Ht.retina?2:1;di(c,i.min),c.width=P*g.x,c.height=P*g.y,c.style.width=g.x+"px",c.style.height=g.y+"px",Ht.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){Qn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[m(i)]=i;var c=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var c=i._order,g=c.next,P=c.prev;g?g.prev=P:this._drawLast=P,P?P.next=g:this._drawFirst=g,delete i._order,delete this._layers[m(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var c=i.options.dashArray.split(/[, ]+/),g=[],P,R;for(R=0;R<c.length;R++){if(P=Number(c[R]),isNaN(P))return;g.push(P)}i.options._dashArray=g}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||q(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var c=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Ie,this._redrawBounds.extend(i._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(i._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var c=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,c=this._redrawBounds;if(this._ctx.save(),c){var g=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,g.x,g.y),this._ctx.clip()}this._drawing=!0;for(var P=this._drawFirst;P;P=P.next)i=P.layer,(!c||i._pxBounds&&i._pxBounds.intersects(c))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,c){if(this._drawing){var g,P,R,he,qe=i._parts,ft=qe.length,_t=this._ctx;if(ft){for(_t.beginPath(),g=0;g<ft;g++){for(P=0,R=qe[g].length;P<R;P++)he=qe[g][P],_t[P?"lineTo":"moveTo"](he.x,he.y);c&&_t.closePath()}this._fillStroke(_t,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var c=i._point,g=this._ctx,P=Math.max(Math.round(i._radius),1),R=(Math.max(Math.round(i._radiusY),1)||P)/P;R!==1&&(g.save(),g.scale(1,R)),g.beginPath(),g.arc(c.x,c.y/R,P,0,Math.PI*2,!1),R!==1&&g.restore(),this._fillStroke(g,i)}},_fillStroke:function(i,c){var g=c.options;g.fill&&(i.globalAlpha=g.fillOpacity,i.fillStyle=g.fillColor||g.color,i.fill(g.fillRule||"evenodd")),g.stroke&&g.weight!==0&&(i.setLineDash&&i.setLineDash(c.options&&c.options._dashArray||[]),i.globalAlpha=g.opacity,i.lineWidth=g.weight,i.strokeStyle=g.color,i.lineCap=g.lineCap,i.lineJoin=g.lineJoin,i.stroke())},_onClick:function(i){for(var c=this._map.mouseEventToLayerPoint(i),g,P,R=this._drawFirst;R;R=R.next)g=R.layer,g.options.interactive&&g._containsPoint(c)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(g))&&(P=g);this._fireEvent(P?[P]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,c)}},_handleMouseOut:function(i){var c=this._hoveredLayer;c&&(zn(this._container,"leaflet-interactive"),this._fireEvent([c],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,c){if(!this._mouseHoverThrottled){for(var g,P,R=this._drawFirst;R;R=R.next)g=R.layer,g.options.interactive&&g._containsPoint(c)&&(P=g);P!==this._hoveredLayer&&(this._handleMouseOut(i),P&&(Cn(this._container,"leaflet-interactive"),this._fireEvent([P],i,"mouseover"),this._hoveredLayer=P)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,c,g){this._map._fireDOMEvent(c,g||c.type,i)},_bringToFront:function(i){var c=i._order;if(c){var g=c.next,P=c.prev;if(g)g.prev=P;else return;P?P.next=g:g&&(this._drawFirst=g),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(i)}},_bringToBack:function(i){var c=i._order;if(c){var g=c.next,P=c.prev;if(P)P.next=g;else return;g?g.prev=P:P&&(this._drawLast=P),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(i)}}});function co(i){return Ht.canvas?new ns(i):null}var Ps=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),il={_initContainer:function(){this._container=Fn("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Qn.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var c=i._container=Ps("shape");Cn(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",i._path=Ps("path"),c.appendChild(i._path),this._updateStyle(i),this._layers[m(i)]=i},_addPath:function(i){var c=i._container;this._container.appendChild(c),i.options.interactive&&i.addInteractiveTarget(c)},_removePath:function(i){var c=i._container;wn(c),i.removeInteractiveTarget(c),delete this._layers[m(i)]},_updateStyle:function(i){var c=i._stroke,g=i._fill,P=i.options,R=i._container;R.stroked=!!P.stroke,R.filled=!!P.fill,P.stroke?(c||(c=i._stroke=Ps("stroke")),R.appendChild(c),c.weight=P.weight+"px",c.color=P.color,c.opacity=P.opacity,P.dashArray?c.dashStyle=ae(P.dashArray)?P.dashArray.join(" "):P.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=P.lineCap.replace("butt","flat"),c.joinstyle=P.lineJoin):c&&(R.removeChild(c),i._stroke=null),P.fill?(g||(g=i._fill=Ps("fill")),R.appendChild(g),g.color=P.fillColor||P.color,g.opacity=P.fillOpacity):g&&(R.removeChild(g),i._fill=null)},_updateCircle:function(i){var c=i._point.round(),g=Math.round(i._radius),P=Math.round(i._radiusY||g);this._setPath(i,i._empty()?"M0 0":"AL "+c.x+","+c.y+" "+g+","+P+" 0,"+65535*360)},_setPath:function(i,c){i._path.v=c},_bringToFront:function(i){Os(i._container)},_bringToBack:function(i){_s(i._container)}},ho=Ht.vml?Ps:Ee,Bi=Qn.extend({_initContainer:function(){this._container=ho("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ho("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){wn(this._container),On(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Qn.prototype._update.call(this);var i=this._bounds,c=i.getSize(),g=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,g.setAttribute("width",c.x),g.setAttribute("height",c.y)),di(g,i.min),g.setAttribute("viewBox",[i.min.x,i.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(i){var c=i._path=ho("path");i.options.className&&Cn(c,i.options.className),i.options.interactive&&Cn(c,"leaflet-interactive"),this._updateStyle(i),this._layers[m(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){wn(i._path),i.removeInteractiveTarget(i._path),delete this._layers[m(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var c=i._path,g=i.options;c&&(g.stroke?(c.setAttribute("stroke",g.color),c.setAttribute("stroke-opacity",g.opacity),c.setAttribute("stroke-width",g.weight),c.setAttribute("stroke-linecap",g.lineCap),c.setAttribute("stroke-linejoin",g.lineJoin),g.dashArray?c.setAttribute("stroke-dasharray",g.dashArray):c.removeAttribute("stroke-dasharray"),g.dashOffset?c.setAttribute("stroke-dashoffset",g.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),g.fill?(c.setAttribute("fill",g.fillColor||g.color),c.setAttribute("fill-opacity",g.fillOpacity),c.setAttribute("fill-rule",g.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(i,c){this._setPath(i,ie(i._parts,c))},_updateCircle:function(i){var c=i._point,g=Math.max(Math.round(i._radius),1),P=Math.max(Math.round(i._radiusY),1)||g,R="a"+g+","+P+" 0 1,0 ",he=i._empty()?"M0 0":"M"+(c.x-g)+","+c.y+R+g*2+",0 "+R+-g*2+",0 ";this._setPath(i,he)},_setPath:function(i,c){i._path.setAttribute("d",c)},_bringToFront:function(i){Os(i._path)},_bringToBack:function(i){_s(i._path)}});Ht.vml&&Bi.include(il);function ei(i){return Ht.svg||Ht.vml?new Bi(i):null}Bn.include({getRenderer:function(i){var c=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var c=this._paneRenderers[i];return c===void 0&&(c=this._createRenderer({pane:i}),this._paneRenderers[i]=c),c},_createRenderer:function(i){return this.options.preferCanvas&&co(i)||ei(i)}});var gr=Mi.extend({initialize:function(i,c){Mi.prototype.initialize.call(this,this._boundsToLatLngs(i),c)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=$(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function vr(i,c){return new gr(i,c)}Bi.create=ho,Bi.pointsToPath=ie,Ir.geometryToLayer=Do,Ir.coordsToLatLng=Ls,Ir.coordsToLatLngs=ji,Ir.latLngToCoords=Oi,Ir.latLngsToCoords=ts,Ir.getFeature=pr,Ir.asFeature=Fr,Bn.mergeOptions({boxZoom:!0});var pn=Ei.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){xn(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){On(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){wn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),So(),Ca(),this._startPoint=this._map.mouseEventToContainerPoint(i),xn(document,{contextmenu:Pr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=Fn("div","leaflet-zoom-box",this._container),Cn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var c=new Ie(this._point,this._startPoint),g=c.getSize();di(this._box,c.min),this._box.style.width=g.x+"px",this._box.style.height=g.y+"px"},_finish:function(){this._moved&&(wn(this._box),zn(this._container,"leaflet-crosshair")),Rs(),Qr(),On(document,{contextmenu:Pr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var c=new G(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Bn.addInitHook("addHandler","boxZoom",pn),Bn.mergeOptions({doubleClickZoom:!0});var rl=Ei.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var c=this._map,g=c.getZoom(),P=c.options.zoomDelta,R=i.originalEvent.shiftKey?g-P:g+P;c.options.doubleClickZoom==="center"?c.setZoom(R):c.setZoomAround(i.containerPoint,R)}});Bn.addInitHook("addHandler","doubleClickZoom",rl),Bn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ro=Ei.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new Rr(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}Cn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){zn(this._map._container,"leaflet-grab"),zn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=$(this._map.options.maxBounds);this._offsetLimit=I(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var c=this._lastTime=+new Date,g=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(g),this._times.push(c),this._prunePositions(c)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,c){return i-(i-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;i.x<c.min.x&&(i.x=this._viscousLimit(i.x,c.min.x)),i.y<c.min.y&&(i.y=this._viscousLimit(i.y,c.min.y)),i.x>c.max.x&&(i.x=this._viscousLimit(i.x,c.max.x)),i.y>c.max.y&&(i.y=this._viscousLimit(i.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,c=Math.round(i/2),g=this._initialWorldOffset,P=this._draggable._newPos.x,R=(P-c+g)%i+c-g,he=(P+c+g)%i-c-g,qe=Math.abs(R+g)<Math.abs(he+g)?R:he;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=qe},_onDragEnd:function(i){var c=this._map,g=c.options,P=!g.inertia||i.noInertia||this._times.length<2;if(c.fire("dragend",i),P)c.fire("moveend");else{this._prunePositions(+new Date);var R=this._lastPos.subtract(this._positions[0]),he=(this._lastTime-this._times[0])/1e3,qe=g.easeLinearity,ft=R.multiplyBy(qe/he),_t=ft.distanceTo([0,0]),Bt=Math.min(g.inertiaMaxSpeed,_t),Zt=ft.multiplyBy(Bt/_t),an=Bt/(g.inertiaDeceleration*qe),An=Zt.multiplyBy(-an/2).round();!An.x&&!An.y?c.fire("moveend"):(An=c._limitOffset(An,c.options.maxBounds),q(function(){c.panBy(An,{duration:an,easeLinearity:qe,noMoveStart:!0,animate:!0})}))}}});Bn.addInitHook("addHandler","dragging",Ro),Bn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ur=Ei.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),xn(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),On(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,c=document.documentElement,g=i.scrollTop||c.scrollTop,P=i.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(P,g)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var c=this._panKeys={},g=this.keyCodes,P,R;for(P=0,R=g.left.length;P<R;P++)c[g.left[P]]=[-1*i,0];for(P=0,R=g.right.length;P<R;P++)c[g.right[P]]=[i,0];for(P=0,R=g.down.length;P<R;P++)c[g.down[P]]=[0,i];for(P=0,R=g.up.length;P<R;P++)c[g.up[P]]=[0,-1*i]},_setZoomDelta:function(i){var c=this._zoomKeys={},g=this.keyCodes,P,R;for(P=0,R=g.zoomIn.length;P<R;P++)c[g.zoomIn[P]]=i;for(P=0,R=g.zoomOut.length;P<R;P++)c[g.zoomOut[P]]=-i},_addHooks:function(){xn(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){On(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var c=i.keyCode,g=this._map,P;if(c in this._panKeys){if(!g._panAnim||!g._panAnim._inProgress)if(P=this._panKeys[c],i.shiftKey&&(P=z(P).multiplyBy(3)),g.options.maxBounds&&(P=g._limitOffset(z(P),g.options.maxBounds)),g.options.worldCopyJump){var R=g.wrapLatLng(g.unproject(g.project(g.getCenter()).add(P)));g.panTo(R)}else g.panBy(P)}else if(c in this._zoomKeys)g.setZoom(g.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&g._popup&&g._popup.options.closeOnEscapeKey)g.closePopup();else return;Pr(i)}}});Bn.addInitHook("addHandler","keyboard",Ur),Bn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Xi=Ei.extend({addHooks:function(){xn(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){On(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var c=ta(i),g=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var P=Math.max(g-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),P),Pr(i)},_performZoom:function(){var i=this._map,c=i.getZoom(),g=this._map.options.zoomSnap||0;i._stop();var P=this._delta/(this._map.options.wheelPxPerZoomLevel*4),R=4*Math.log(2/(1+Math.exp(-Math.abs(P))))/Math.LN2,he=g?Math.ceil(R/g)*g:R,qe=i._limitZoom(c+(this._delta>0?he:-he))-c;this._delta=0,this._startTime=null,qe&&(i.options.scrollWheelZoom==="center"?i.setZoom(c+qe):i.setZoomAround(this._lastMousePos,c+qe))}});Bn.addInitHook("addHandler","scrollWheelZoom",Xi);var Nl=600;Bn.mergeOptions({tapHold:Ht.touchNative&&Ht.safari&&Ht.mobile,tapTolerance:15});var ar=Ei.extend({addHooks:function(){xn(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){On(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var c=i.touches[0];this._startPos=this._newPos=new W(c.clientX,c.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(xn(document,"touchend",vi),xn(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),Nl),xn(document,"touchend touchcancel contextmenu",this._cancel,this),xn(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){On(document,"touchend",vi),On(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),On(document,"touchend touchcancel contextmenu",this._cancel,this),On(document,"touchmove",this._onMove,this)},_onMove:function(i){var c=i.touches[0];this._newPos=new W(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,c){var g=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});g._simulated=!0,c.target.dispatchEvent(g)}});Bn.addInitHook("addHandler","tapHold",ar),Bn.mergeOptions({touchZoom:Ht.touch,bounceAtZoomLimits:!0});var lr=Ei.extend({addHooks:function(){Cn(this._map._container,"leaflet-touch-zoom"),xn(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){zn(this._map._container,"leaflet-touch-zoom"),On(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var c=this._map;if(!(!i.touches||i.touches.length!==2||c._animatingZoom||this._zooming)){var g=c.mouseEventToContainerPoint(i.touches[0]),P=c.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(g.add(P)._divideBy(2))),this._startDist=g.distanceTo(P),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),xn(document,"touchmove",this._onTouchMove,this),xn(document,"touchend touchcancel",this._onTouchEnd,this),vi(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var c=this._map,g=c.mouseEventToContainerPoint(i.touches[0]),P=c.mouseEventToContainerPoint(i.touches[1]),R=g.distanceTo(P)/this._startDist;if(this._zoom=c.getScaleZoom(R,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&R<1||this._zoom>c.getMaxZoom()&&R>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,R===1)return}else{var he=g._add(P)._divideBy(2)._subtract(this._centerPoint);if(R===1&&he.x===0&&he.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(he),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),H(this._animRequest);var qe=u(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=q(qe,this,!0),vi(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,H(this._animRequest),On(document,"touchmove",this._onTouchMove,this),On(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Bn.addInitHook("addHandler","touchZoom",lr),Bn.BoxZoom=pn,Bn.DoubleClickZoom=rl,Bn.Drag=Ro,Bn.Keyboard=Ur,Bn.ScrollWheelZoom=Xi,Bn.TapHold=ar,Bn.TouchZoom=lr,n.Bounds=Ie,n.Browser=Ht,n.CRS=le,n.Canvas=ns,n.Circle=Ki,n.CircleMarker=sr,n.Class=M,n.Control=un,n.DivIcon=lo,n.DivOverlay=Yi,n.DomEvent=Mo,n.DomUtil=yn,n.Draggable=Rr,n.Evented=re,n.FeatureGroup=rr,n.GeoJSON=Ir,n.GridLayer=Hs,n.Handler=Ei,n.Icon=es,n.ImageOverlay=Cs,n.LatLng=D,n.LatLngBounds=G,n.Layer=Xn,n.LayerGroup=ir,n.LineUtil=Tn,n.Map=Bn,n.Marker=Ci,n.Mixin=el,n.Path=dr,n.Point=W,n.PolyUtil=oa,n.Polygon=Mi,n.Polyline=Er,n.Popup=mr,n.PosAnimation=Sa,n.Projection=Hn,n.Rectangle=gr,n.Renderer=Qn,n.SVG=Bi,n.SVGOverlay=Da,n.TileLayer=zi,n.Tooltip=ks,n.Transformation=$e,n.Util=Se,n.VideoOverlay=Ji,n.bind=u,n.bounds=I,n.canvas=co,n.circle=qs,n.circleMarker=la,n.control=nr,n.divIcon=uo,n.extend=o,n.featureGroup=Ta,n.geoJSON=jr,n.geoJson=pi,n.gridLayer=zr,n.icon=Na,n.imageOverlay=or,n.latLng=J,n.latLngBounds=$,n.layerGroup=tl,n.map=Ea,n.marker=aa,n.point=z,n.polygon=xs,n.polyline=nl,n.popup=ao,n.rectangle=vr,n.setOptions=N,n.stamp=m,n.svg=ei,n.svgOverlay=Oa,n.tileLayer=Jn,n.tooltip=ua,n.transformation=X,n.version=r,n.videoOverlay=Oo;var Ss=window.L;n.noConflict=function(){return window.L=Ss,this},window.L=n})})(md,md.exports);var Ri=md.exports;const wt=w1(Ri);var q0={exports:{}};(function(e,t){(function(n,r){r(t)})(go,function(n){var r=typeof window<"u"?window:typeof go<"u"?go:typeof self<"u"?self:{};function o(_,w){return _(w={exports:{}},w.exports),w.exports}var a=o(function(_,w){(function(b){const E={escape:function(Y){return Y.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:x,mimeType:function(Y){return Y=x(Y).toLowerCase(),function(){var Z="application/font-woff",re="image/jpeg";return{woff:Z,woff2:Z,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:re,jpeg:re,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[Y]||""},dataAsUrl:function(Y,Z){return`data:${Z};base64,`+Y},isDataUrl:function(Y){return Y.search(/^(data:)/)!==-1},canvasToBlob:function(Y){return Y.toBlob?new Promise(function(re){Y.toBlob(re)}):(Z=Y,new Promise(function(re){const W=Ce(Z.toDataURL().split(",")[1]);var Q=W.length;const z=new Uint8Array(Q);for(let Ie=0;Ie<Q;Ie++)z[Ie]=W.charCodeAt(Ie);re(new Blob([z],{type:"image/png"}))}));var Z},resolveUrl:function(Y,Z){const re=document.implementation.createHTMLDocument(),W=re.createElement("base"),Q=(re.head.appendChild(W),re.createElement("a"));return re.body.appendChild(Q),W.href=Z,Q.href=Y,Q.href},getAndEncode:function(Y){let Z=ye.impl.urlCache.find(function(re){return re.url===Y});return Z||(Z={url:Y,promise:null},ye.impl.urlCache.push(Z)),Z.promise===null&&(ye.impl.options.cacheBust&&(Y+=(/\?/.test(Y)?"&":"?")+new Date().getTime()),Z.promise=new Promise(function(re){const W=ye.impl.options.httpTimeout,Q=new XMLHttpRequest;let z;var Ie;function I(G){console.error(G),re("")}Q.onreadystatechange=function(){if(Q.readyState===4)if(Q.status!==200)z?re(z):I(`cannot fetch resource: ${Y}, status: `+Q.status);else{const G=new FileReader;G.onloadend=function(){var $=G.result.split(/,/)[1];re($)},G.readAsDataURL(Q.response)}},Q.ontimeout=function(){z?re(z):I(`timeout of ${W}ms occured while fetching resource: `+Y)},Q.responseType="blob",Q.timeout=W,ye.impl.options.useCredentials&&(Q.withCredentials=!0),Q.open("GET",Y,!0),Q.send(),ye.impl.options.imagePlaceholder&&(Ie=ye.impl.options.imagePlaceholder.split(/,/))&&Ie[1]&&(z=Ie[1])})),Z.promise},uid:function(){let Y=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+Y++}}(),delay:function(Y){return function(Z){return new Promise(function(re){setTimeout(function(){re(Z)},Y)})}},asArray:function(Y){const Z=[],re=Y.length;for(let W=0;W<re;W++)Z.push(Y[W]);return Z},escapeXhtml:function(Y){return Y.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(Y){return Y!=="data:,"?new Promise(function(Z,re){const W=new Image;ye.impl.options.useCredentials&&(W.crossOrigin="use-credentials"),W.onload=function(){Z(W)},W.onerror=re,W.src=Y}):Promise.resolve()},width:function(Y){var Z=F(Y,"border-left-width"),re=F(Y,"border-right-width");return Y.scrollWidth+Z+re},height:function(Y){var Z=F(Y,"border-top-width"),re=F(Y,"border-bottom-width");return Y.scrollHeight+Z+re}};function x(Y){return(Y=/\.([^\.\/]*?)(\?|$)/g.exec(Y))?Y[1]:""}function F(Y,Z){const re=Pe(Y).getPropertyValue(Z);return parseFloat(re.replace("px",""))}const N=function(){const Y=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(Q,z,Ie){return Z(Q)?Promise.resolve(Q).then(re).then(function(I){let G=Promise.resolve(Q);return I.forEach(function($){G=G.then(function(D){return W(D,$,z,Ie)})}),G}):Promise.resolve(Q)},shouldProcess:Z,impl:{readUrls:re,inline:W}};function Z(Q){return Q.search(Y)!==-1}function re(Q){const z=[];for(var Ie;(Ie=Y.exec(Q))!==null;)z.push(Ie[1]);return z.filter(function(I){return!E.isDataUrl(I)})}function W(Q,z,Ie,I){return Promise.resolve(z).then(function(G){return Ie?E.resolveUrl(G,Ie):G}).then(I||E.getAndEncode).then(function(G){return E.dataAsUrl(G,E.mimeType(z))}).then(function(G){return Q.replace(($=z,new RegExp(`(url\\(['"]?)(${E.escape($)})(['"]?\\))`,"g")),`$1${G}$3`);var $})}}(),U={resolveAll:function(){return j().then(function(Y){return Promise.all(Y.map(function(Z){return Z.resolve()}))}).then(function(Y){return Y.join(`
`)})},impl:{readAll:j}};function j(){return Promise.resolve(E.asArray(document.styleSheets)).then(function(Z){const re=[];return Z.forEach(function(W){if(Object.getPrototypeOf(W).hasOwnProperty("cssRules"))try{E.asArray(W.cssRules||[]).forEach(re.push.bind(re))}catch(Q){console.log("Error while reading CSS rules from "+W.href,Q.toString())}}),re}).then(function(Z){return Z.filter(function(re){return re.type===CSSRule.FONT_FACE_RULE}).filter(function(re){return N.shouldProcess(re.style.getPropertyValue("src"))})}).then(function(Z){return Z.map(Y)});function Y(Z){return{resolve:function(){var re=(Z.parentStyleSheet||{}).href;return N.inlineAll(Z.cssText,re)},src:function(){return Z.style.getPropertyValue("src")}}}}const ne={inlineAll:function Y(Z){return Z instanceof Element?function(re){const W=re.style.getPropertyValue("background");return W?N.inlineAll(W).then(function(Q){re.style.setProperty("background",Q,W)}).then(function(){return re}):Promise.resolve(re)}(Z).then(function(){return Z instanceof HTMLImageElement?ae(Z).inline():Promise.all(E.asArray(Z.childNodes).map(function(re){return Y(re)}))}):Promise.resolve(Z)},impl:{newImage:ae}};function ae(Y){return{inline:function(Z){return E.isDataUrl(Y.src)?Promise.resolve():Promise.resolve(Y.src).then(Z||E.getAndEncode).then(function(re){return E.dataAsUrl(re,E.mimeType(Y.src))}).then(function(re){return new Promise(function(W){Y.onload=W,Y.onerror=W,Y.src=re})})}}}const be={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},ye={toSvg:de,toPng:function(Y,Z){return(Z=Z||{}).raster=!0,Be(Y,Z).then(function(re){return re.toDataURL()})},toJpeg:function(Y,Z){return(Z=Z||{}).raster=!0,Be(Y,Z).then(function(re){return re.toDataURL("image/jpeg",Z.quality||1)})},toBlob:function(Y,Z){return(Z=Z||{}).raster=!0,Be(Y,Z).then(E.canvasToBlob)},toPixelData:function(Y,Z){return(Z=Z||{}).raster=!0,Be(Y,Z).then(function(re){return re.getContext("2d").getImageData(0,0,E.width(Y),E.height(Y)).data})},toCanvas:function(Y,Z){return(Z=Z||{}).raster=!0,Be(Y,Z||{})},impl:{fontFaces:U,images:ne,util:E,inliner:N,urlCache:[],options:{}}},Pe=(_.exports=ye,b.getComputedStyle||window.getComputedStyle),Ce=b.atob||window.atob;function de(Y,Z){var re=Z=Z||{};return re.imagePlaceholder===void 0?ye.impl.options.imagePlaceholder=be.imagePlaceholder:ye.impl.options.imagePlaceholder=re.imagePlaceholder,re.cacheBust===void 0?ye.impl.options.cacheBust=be.cacheBust:ye.impl.options.cacheBust=re.cacheBust,re.useCredentials===void 0?ye.impl.options.useCredentials=be.useCredentials:ye.impl.options.useCredentials=re.useCredentials,Promise.resolve(Y).then(function(W){return function Q(z,Ie,I,G,$=null){return I||!Ie||Ie(z)?Promise.resolve(z).then(function(D){return D instanceof HTMLCanvasElement?E.makeImage(D.toDataURL()):D.nodeName==="IFRAME"?html2canvas(D.contentDocument.body).then(J=>J.toDataURL()).then(E.makeImage):D.cloneNode(!1)}).then(function(D){return function(J,le){const ge=J.childNodes;return ge.length===0?Promise.resolve(le):function(me,je){const $e=Pe(J);let X=Promise.resolve();return je.forEach(function(se){X=X.then(function(){return Q(se,Ie,!1,G,$e)}).then(function(Te){Te&&me.appendChild(Te)})}),X}(le,E.asArray(ge)).then(function(){return le})}(z,D)}).then(function(D){return function(J,le,ge){return le instanceof Element?Promise.resolve().then(function(){(function(me,je){const $e=Pe(me);$e.cssText?(je.style.cssText=$e.cssText,function(X,se){se.font=X.font,se.fontFamily=X.fontFamily,se.fontFeatureSettings=X.fontFeatureSettings,se.fontKerning=X.fontKerning,se.fontSize=X.fontSize,se.fontStretch=X.fontStretch,se.fontStyle=X.fontStyle,se.fontVariant=X.fontVariant,se.fontVariantCaps=X.fontVariantCaps,se.fontVariantEastAsian=X.fontVariantEastAsian,se.fontVariantLigatures=X.fontVariantLigatures,se.fontVariantNumeric=X.fontVariantNumeric,se.fontVariationSettings=X.fontVariationSettings,se.fontWeight=X.fontWeight}($e,je.style)):(ge?function(X,se,Te,Ee){const ie=Te.style,We=X.style;for(var et of se){var Xe=se.getPropertyValue(et),De=We.getPropertyValue(et),ke=(We.setProperty(et,Ee?"initial":"unset"),se.getPropertyValue(et));ke!==Xe?ie.setProperty(et,Xe):ie.removeProperty(et),We.setProperty(et,De)}}(me,$e,je,I):function(X,se,Te){const Ee=function(We){if(M[We])return M[We];Se||((Se=document.createElement("iframe")).style.visibility="hidden",Se.style.position="fixed",document.body.appendChild(Se),Se.contentWindow.document.write('<!DOCTYPE html><meta charset="UTF-8"><title>sandbox</title><body>'));const et=document.createElement(We),Xe=(Se.contentWindow.document.body.appendChild(et),et.textContent=".",Se.contentWindow.getComputedStyle(et)),De={};return E.asArray(Xe).forEach(function(ke){De[ke]=ke==="width"||ke==="height"?"auto":Xe.getPropertyValue(ke)}),Se.contentWindow.document.body.removeChild(et),M[We]=De}(Te.tagName),ie=Te.style;E.asArray(X).forEach(function(We){var et=X.getPropertyValue(We);(et!==Ee[We]||se&&et!==se.getPropertyValue(We))&&ie.setProperty(We,et,X.getPropertyPriority(We))})}($e,$,je),I&&(["inset-block","inset-block-start","inset-block-end"].forEach(X=>je.style.removeProperty(X)),["left","right","top","bottom"].forEach(X=>{je.style.getPropertyValue(X)&&je.style.setProperty(X,"0px")})))})(J,le)}).then(function(){[":before",":after"].forEach(function(me){(function(je){const $e=Pe(J,je),X=$e.getPropertyValue("content");if(X!==""&&X!=="none"){const se=E.uid(),Te=le.getAttribute("class"),Ee=(Te&&le.setAttribute("class",Te+" "+se),document.createElement("style"));Ee.appendChild(function(){const ie=`.${se}:`+je,We=($e.cssText?function(){return`${$e.cssText} content: ${$e.getPropertyValue("content")};`}:function(){return E.asArray($e).map(function(et){return et+": "+$e.getPropertyValue(et)+($e.getPropertyPriority(et)?" !important":"")}).join("; ")+";"})();return document.createTextNode(ie+`{${We}}`)}()),le.appendChild(Ee)}})(me)})}).then(function(){J instanceof HTMLTextAreaElement&&(le.innerHTML=J.value),J instanceof HTMLInputElement&&le.setAttribute("value",J.value)}).then(function(){le instanceof SVGElement&&(le.setAttribute("xmlns","http://www.w3.org/2000/svg"),le instanceof SVGRectElement&&["width","height"].forEach(function(me){const je=le.getAttribute(me);je&&le.style.setProperty(me,je)}))}).then(function(){return le}):le}(z,D,G)}):Promise.resolve()}(W,Z.filter,!0,!Z.raster)}).then(Ue).then(q).then(function(W){Z.bgcolor&&(W.style.backgroundColor=Z.bgcolor),Z.width&&(W.style.width=Z.width+"px"),Z.height&&(W.style.height=Z.height+"px"),Z.style&&Object.keys(Z.style).forEach(function(z){W.style[z]=Z.style[z]});let Q=null;return typeof Z.onclone=="function"&&(Q=Z.onclone(W)),Promise.resolve(Q).then(function(){return W})}).then(function(W){return W=W,Q=Z.width||E.width(Y),z=Z.height||E.height(Y),Promise.resolve(W).then(function(Ie){return Ie.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(Ie)}).then(E.escapeXhtml).then(function(Ie){return`<foreignObject x="0" y="0" width="100%" height="100%">${Ie}</foreignObject>`}).then(function(Ie){return`<svg xmlns="http://www.w3.org/2000/svg" width="${Q}" height="${z}">${Ie}</svg>`}).then(function(Ie){return"data:image/svg+xml;charset=utf-8,"+Ie});var Q,z}).then(function(W){return ye.impl.urlCache=[],W})}function Be(Y,Z){return de(Y,Z).then(E.makeImage).then(E.delay(0)).then(function(re){var W=typeof Z.scale!="number"?1:Z.scale;const Q=function(Ie,I){const G=document.createElement("canvas");if(G.width=(Z.width||E.width(Ie))*I,G.height=(Z.height||E.height(Ie))*I,Z.bgcolor){const $=G.getContext("2d");$.fillStyle=Z.bgcolor,$.fillRect(0,0,G.width,G.height)}return G}(Y,W),z=Q.getContext("2d");return z.mozImageSmoothingEnabled=!1,z.msImageSmoothingEnabled=!1,z.imageSmoothingEnabled=!1,re&&(z.scale(W,W),z.drawImage(re,0,0)),Se&&(document.body.removeChild(Se),Se=null,H&&clearTimeout(H),H=setTimeout(()=>{H=null,M={}},2e4)),Q})}function Ue(Y){return U.resolveAll().then(function(Z){const re=document.createElement("style");return Y.appendChild(re),re.appendChild(document.createTextNode(Z)),Y})}function q(Y){return ne.inlineAll(Y).then(function(){return Y})}let H=null,Se=null,M={}})(r)}),u=o(function(_,w){(function(){function b(U,j,ne){var ae=new XMLHttpRequest;ae.open("GET",U),ae.responseType="blob",ae.onload=function(){N(ae.response,j,ne)},ae.onerror=function(){console.error("could not download file")},ae.send()}function E(U){var j=new XMLHttpRequest;j.open("HEAD",U,!1);try{j.send()}catch{}return 200<=j.status&&299>=j.status}function x(U){try{U.dispatchEvent(new MouseEvent("click"))}catch{var j=document.createEvent("MouseEvents");j.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),U.dispatchEvent(j)}}var F=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof r=="object"&&r.global===r?r:void 0,N=F.saveAs||(typeof window!="object"||window!==F?function(){}:"download"in HTMLAnchorElement.prototype?function(U,j,ne){var ae=F.URL||F.webkitURL,be=document.createElement("a");j=j||U.name||"download",be.download=j,be.rel="noopener",typeof U=="string"?(be.href=U,be.origin===location.origin?x(be):E(be.href)?b(U,j,ne):x(be,be.target="_blank")):(be.href=ae.createObjectURL(U),setTimeout(function(){ae.revokeObjectURL(be.href)},4e4),setTimeout(function(){x(be)},0))}:"msSaveOrOpenBlob"in navigator?function(U,j,ne){if(j=j||U.name||"download",typeof U!="string")navigator.msSaveOrOpenBlob(function(be,ye){return ye===void 0?ye={autoBom:!1}:typeof ye!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),ye={autoBom:!ye}),ye.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(be.type)?new Blob(["\uFEFF",be],{type:be.type}):be}(U,ne),j);else if(E(U))b(U,j,ne);else{var ae=document.createElement("a");ae.href=U,ae.target="_blank",setTimeout(function(){x(ae)})}}:function(U,j,ne,ae){if((ae=ae||open("","_blank"))&&(ae.document.title=ae.document.body.innerText="downloading..."),typeof U=="string")return b(U,j,ne);var be=U.type==="application/octet-stream",ye=/constructor/i.test(F.HTMLElement)||F.safari,Pe=/CriOS\/[\d]+/.test(navigator.userAgent);if((Pe||be&&ye)&&typeof FileReader=="object"){var Ce=new FileReader;Ce.onloadend=function(){var Ue=Ce.result;Ue=Pe?Ue:Ue.replace(/^data:[^;]*;/,"data:attachment/file;"),ae?ae.location.href=Ue:location=Ue,ae=null},Ce.readAsDataURL(U)}else{var de=F.URL||F.webkitURL,Be=de.createObjectURL(U);ae?ae.location=Be:location.href=Be,ae=null,setTimeout(function(){de.revokeObjectURL(Be)},4e4)}});F.saveAs=N.saveAs=N,_.exports=N})()}),f=L.Control.extend({options:{cropImageByInnerWH:!0,hidden:!1,domtoimageOptions:{},position:"topleft",screenName:"screen",iconUrl:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+",hideElementsWithSelectors:[".leaflet-control-container"],onCropBorderSize:2,caption:null,captionFontSize:15,captionFont:"Arial",captionColor:"black",captionBgColor:"white",captionOffset:5,mimeType:"image/png",debugMode:!1,preventDownload:!1,onPixelDataFail:function(_){var w=_.node,b=_.error;return console.warn("Map node is very big "+w.scrollWidth+"x"+w.scrollHeight),console.warn(`Add function: SimpleMapScreenshoter({
              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {
                 // Solutions:
                 // decrease size of map
                 // or decrease zoom level
                 // or remove elements with big distanses
                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap
                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)
              }
            })`),Promise.reject(b)}},onAdd:function(){return this._container=L.DomUtil.create("div","leaflet-control-simpleMapScreenshoter"),this._link=null,this._screenState={status:1,promise:null},this.options.hidden===!1&&this._addScreenBtn(),this._onUserStartInteractWithMap=this._onUserStartInteractWithMap.bind(this),this._onUserEndInteractWithMap=this._onUserEndInteractWithMap.bind(this),this._map.on("zoomstart",this._onUserStartInteractWithMap),this._map.on("move",this._onUserStartInteractWithMap),this._map.on("zoomend",this._onUserEndInteractWithMap),this._map.on("moveend",this._onUserEndInteractWithMap),this._container},takeScreen:function(){var _=this,w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"blob",b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E={};for(var x in this.options)b.hasOwnProperty(x)?E[x]=b[x]:E[x]=this.options[x];return this._screenState.status===2?this._screenState.promise:(this._map.fire("simpleMapScreenshoter.takeScreen"),this._screenState.status=2,this._setElementsVisible(!1),this._screenState.promise=this._waitEndOfInteractions().then(function(){return _._getPixelData(E)}).then(function(F){return _._setElementsVisible(!0),_._toCanvas(F,E)}).then(function(F){return w==="image"?_._canvasToImage(F,E):w==="canvas"?F:_._canvasToBlob(F,E)}).then(function(F){return _._screenState.status=1,_._map.fire("simpleMapScreenshoter.done"),F}).catch(function(F){return _._setElementsVisible(!0),_._screenState.status=1,_._map.fire("simpleMapScreenshoter.error",{e:F}),Promise.reject(F)}),this._screenState.promise)},_setElementsVisible:function(){var _=this,w=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.hideElementsWithSelectors.forEach(function(b){var E=_._map._container.querySelectorAll(b),x=!0,F=!1,N=void 0;try{for(var U,j=E[Symbol.iterator]();!(x=(U=j.next()).done);x=!0)U.value.style.opacity=w===!1?0:1}catch(ne){F=!0,N=ne}finally{try{!x&&j.return&&j.return()}finally{if(F)throw N}}})},_canvasToImage:function(_,w){var b=w.mimeType,E=_.toDataURL(b);return E.indexOf("base64")===-1?Promise.reject(new Error("Base64 image generation error")):Promise.resolve(E)},_canvasToBlob:function(_,w){var b=w.mimeType;return new Promise(function(E,x){_.toBlob(function(F){E(F)},b)})},_toCanvas:function(_,w){var b=w.captionOffset,E=w.caption,x=w.captionFontSize,F=w.captionFont,N=w.captionColor,U=w.captionBgColor,j=this._node,ne=j.screenHeight,ae=j.screenWidth,be=document.createElement("canvas");be.width=ae,be.height=ne;for(var ye=be.getContext("2d"),Pe=ye.createImageData(ae,ne),Ce=0;Ce<_.length;++Ce)Pe.data[Ce]=_[Ce];ye.putImageData(Pe,0,0),Pe=null;var de=document.createElement("canvas"),Be=de.getContext("2d"),Ue=0,q=0,H=ne,Se=ae;if(this.options.cropImageByInnerWH===!0){for(var M=[],Y=0,Z=0;Z<ne;++Z){Y=0;for(var re=0;re<ae;++re)_[4*Z*ae+4*re+4]===0&&Y++;Y===ae&&M.push(Z)}var W=this._getMinAndMaxOnValuesBreak(M);Ue=W.min;for(var Q=ae,z=W.max,Ie=[],I=0,G=q;G<Q;++G){I=0;for(var $=0;$<ne;++$)_[4*$*ae+4*G+4]===0&&I++;I===ne&&Ie.push(G)}var D=this._getMinAndMaxOnValuesBreak(Ie);q=D.min,Q=D.max,(q===0&&Q===0||Q===null)&&(Q=ae),(Ue===0&&z===0||z===null)&&(z=ne),this.options.debugMode===!0&&(console.log("emptyYLine",M),console.log("minMaxY",W),console.log("emptyXLine",Ie),console.log("minMaxX",D),console.log("debugX",{}),console.log("debugY",{})),Ue===0&&z===ne&&q===0&&Q===ae||(Ue+=this.options.onCropBorderSize,z-=this.options.onCropBorderSize,q+=this.options.onCropBorderSize,Q-=this.options.onCropBorderSize),H=z-Ue,Se=Q-q,de.width=Se,de.height=H}else de.width=Se,de.height=H;var J=null;return E&&(J=typeof E=="function"?E.call(this):E),J!==null&&(de.height=de.height+(b+x+b),Be.beginPath(),Be.rect(0,0,de.width,de.height),Be.fillStyle=U,Be.fill(),Be.save()),Be.drawImage(be,q,Ue,Se,H,0,0,Se,H),J!==null&&(Be.font=x+"px "+F,Be.fillStyle=N,Be.fillText(J,b,H+b+x)),Promise.resolve(de)},_getMinAndMaxOnValuesBreak:function(_){for(var w=0,b=0,E=!1,x=1;x<_.length;x++){if(_[x]-1!==_[x-1]){b=_[x],E=!0;break}w=_[x]}return E===!1&&_[0]>1?(w=0,b=_[0]):E===!1&&(w=_[_.length-1]||0,b=null),{min:w,max:b}},_getPixelData:function(_){var w=this,b=_.domtoimageOptions,E=b===void 0?{}:b;return this._getPixelDataOfNormalMap(E).catch(function(x){return console.warn("May be map size very big on that zoom level, we have error:",x.toString()),console.warn("You can manually hide map elements with large distances between them for fix that warn"),w._getPixelDataOfBigMap(E)})},_getPixelDataOfNormalMap:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},w=this._map.getContainer();return this._node={node:w,screenHeight:w.scrollHeight,screenWidth:w.scrollWidth},a.toPixelData(w,_)},_getPixelDataOfBigMap:function(){var _=this,w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=this._map.getContainer(),E=this._map.getPane("mapPane");E.style.width=2*b.clientWidth+"px",E.style.height=2*b.clientHeight+"px",E.style.overflow="hidden";var x=function(){E.style.width="initial",E.style.height="initial",E.style.overflow="initial"};return this._node={node:b,screenHeight:b.scrollHeight,screenWidth:b.scrollWidth},a.toPixelData(b,w).then(function(F){return x(),F}).catch(function(F){return x(),b.scrollHeight>=4e3||b.scrollWidth>=4e3?_.options.onPixelDataFail({plugin:_,node:b,mapPane:E,error:F,domtoimageOptions:w}):Promise.reject(F)})},_addScreenBtn:function(){this._link=L.DomUtil.create("a","leaflet-control-simpleMapScreenshoter-btn",this._container),this._addCss(),L.DomEvent.addListener(this._link,"click",this._onScreenBtn,this),L.DomEvent.disableClickPropagation(this._link)},_addCss:function(){var _=`
    .leaflet-control-simpleMapScreenshoter{
       border: 2px solid rgba(0,0,0,0.2);
       background-clip: padding-box;
    }
    .leaflet-control-simpleMapScreenshoter a{
       background-color: #fff;
       border-bottom: 1px solid #ccc;
       width: 30px;
       height: 30px;
       line-height: 30px;
       display: block;
       text-align: center;
       text-decoration: none;
       color: black;
       overflow: hidden;
       border-radius: 2px;
       background-image: url('`+this.options.iconUrl+`');
       background-position: 46% 41%;
       background-repeat: no-repeat;
       background-size: 63%;
    }
    .leaflet-control-simpleMapScreenshoter a:hover{
       cursor: pointer;
    }
    `,w=document.head||document.getElementsByTagName("head")[0],b=document.createElement("style");b.appendChild(document.createTextNode(_)),w.appendChild(b)},_onScreenBtn:function(){var _=this;this._map.fire("simpleMapScreenshoter.click"),this.options.preventDownload||this.takeScreen().then(function(w){var b=typeof _.options.screenName=="function"?_.options.screenName.call(_):_.options.screenName;u.saveAs(w,b+".png")}).catch(function(w){_._map.fire("simpleMapScreenshoter.error",{e:w})})},_onUserStartInteractWithMap:function(){this._interaction=!0},_onUserEndInteractWithMap:function(){this._interaction=!1},_waitEndOfInteractions:function(){var _=this;return new Promise(function(w){var b=setInterval(function(){_._interaction||(w(),clearInterval(b))},100)})}}),m=(L.Control.SimpleMapScreenshoter=f,L.simpleMapScreenshoter=function(_){return new L.Control.SimpleMapScreenshoter(_)},f);n.default=m,n.SimpleMapScreenshoter=f,Object.defineProperty(n,"__esModule",{value:!0})})})(q0,q0.exports);const nw={class:"drawing-tools-sidebar"},iw={class:"tools-section"},rw={class:"tools-grid"},sw=["onClick","title"],ow=["innerHTML"],aw={key:0,class:"properties-container"},lw={class:"sidebar-section"},uw={class:"section-content"},cw={class:"color-grid"},hw=["onClick","title"],fw={key:0,class:"style-controls"},dw={class:"control-row"},pw={class:"control-inputs"},mw={class:"control-row"},gw=["value"],vw={key:0,class:"control-row"},_w={class:"control-inputs"},yw={key:1,class:"text-controls"},bw={class:"control-row"},ww={class:"control-inputs"},xw={class:"control-row"},Lw={class:"control-inputs"},Cw={class:"control-row"},kw={class:"control-inputs"},Pw={class:"control-row"},Sw={class:"control-inputs"},Ew={class:"control-row"},Aw={class:"control-row"},Mw={class:"button-group"},Bw=["onClick","title"],Tw=["innerHTML"],Nw={class:"control-row"},Dw={class:"toggle-switch"},Ow=["title"],Rw={class:"sidebar-section"},Iw={class:"section-content"},Fw={key:0},jw={class:"properties-grid"},zw={class:"property-value"},Uw={class:"property-value"},qw={class:"property-value"},$w={class:"property-value"},Vw={class:"property-value"},Hw={class:"property-value"},Gw={class:"property-value"},Ww={class:"property-value"},Zw={class:"property-value"},Kw={class:"property-value"},Jw={class:"property-value"},Yw={class:"property-value"},Xw={class:"property-value"},Qw={class:"property-value"},ex={class:"property-value"},tx={class:"property-value col-span-2 truncate"},nx={key:1,class:"no-properties"},ix=ps({__name:"DrawingTools",props:{currentTool:{},selectedShape:{}},emits:["tool-change","style-update","delete-shape"],setup(e,{emit:t}){const n=e,r=t,o=It(null),a=($,D)=>{let J=null;return(...le)=>{J!==null&&clearTimeout(J),J=window.setTimeout(()=>{$(...le),J=null},D)}};let u=!1;const f=($,D)=>{if($===D)return!0;if($===null||D===null)return!1;if(typeof $!="object"||typeof D!="object")return $===D;const J=Object.keys($),le=Object.keys(D);if(J.length!==le.length)return!1;for(const ge of J)if(!le.includes(ge)||!f($[ge],D[ge]))return!1;return!0};fs(()=>n.selectedShape,($,D)=>{var J,le;if(!$){o.value=null;return}if(!(D&&$.properties&&D.properties&&f($.properties,D.properties)))if(console.log("[DrawingTools] Changement de forme slectionne",{newShape:$,properties:$==null?void 0:$.properties}),$){if(u=!0,o.value={...$.properties},((J=$.properties)==null?void 0:J.type)==="TextRectangle"){const ge=((le=$.properties)==null?void 0:le.style)||{};ae.value=ge.textColor||"#000000",be.value=ge.fontSize||"14px",ye.value=ge.backgroundColor||"#FFFFFF",Pe.value=ge.backgroundOpacity||1,Ce.value=ge.fontFamily||"Arial, sans-serif",de.value=ge.textAlign||"center",Be.value=ge.bold||!1,Ue.value=ge.italic||!1}u=!1}else o.value=null},{deep:!0,immediate:!0});const m=a(($,D)=>{u||console.log("[DrawingTools] Changement dtect dans localProperties",{newProperties:$,oldProperties:D,selectedShape:n.selectedShape})},300);fs(()=>o.value,($,D)=>{$&&D&&!f($,D)&&m($,D)},{deep:!0});const _=$=>({Circle:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10" /></svg>',Semicircle:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 12a10 10 0 0 1 20 0" /></svg>',Rectangle:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" /></svg>',Polygon:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 3l9 7-3 9H6l-3-9 9-7z" /></svg>',delete:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6" /><path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2" /><line x1="10" y1="11" x2="10" y2="17" /><line x1="14" y1="11" x2="14" y2="17" /></svg>',Line:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 19l18-14" /></svg>',TextRectangle:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" /><path d="M9 8h6m-3 0v8" /></svg>'})[$]||"",w=[{type:"Circle",label:"Cercle"},{type:"Semicircle",label:"Demi-cercle"},{type:"Rectangle",label:"Rectangle"},{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"TextRectangle",label:"Texte"},{type:"delete",label:"Supprimer"}],b=["#2563EB","#DC2626","#059669","#D97706","#7C3AED","#DB2777"],E=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointill"},{value:"dashdot",label:"Tiret-point"}],x=[{value:"left",label:"Align  gauche",icon:"&#8678;"},{value:"center",label:"Centr",icon:"&#8645;"},{value:"right",label:"Align  droite",icon:"&#8680;"}],F=It("#3B82F6"),N=It(.2),U=It("#2563EB"),j=It(2),ne=It("solid"),ae=It("#000000"),be=It("14px"),ye=It("#FFFFFF"),Pe=It(1),Ce=It("Arial, sans-serif"),de=It("center"),Be=It(!1),Ue=It(!1),q=It(!1),H=It({style:!1,properties:!1}),Se=Nn(()=>{var D,J;const $=(J=(D=n.selectedShape)==null?void 0:D.properties)==null?void 0:J.type;return console.log("[DrawingTools] Calcul de showFillOptions",{shapeType:$,selectedShape:n.selectedShape}),$?["Circle","Rectangle","Polygon","Semicircle"].includes($):!1}),M=$=>{H.value[$]=!H.value[$]},Y=$=>{switch($){case"dashed":return"10,10";case"dotted":return"2,5";case"dashdot":return"10,5,2,5";default:return""}},Z=$=>{var D,J;U.value=$,(Se.value||((D=o.value)==null?void 0:D.type)==="TextRectangle")&&(F.value=$),re({strokeColor:$,fillColor:Se.value||((J=o.value)==null?void 0:J.type)==="TextRectangle"?$:void 0})},re=$=>{const D={...$};$.strokeStyle&&(D.dashArray=Y($.strokeStyle)),$.fillOpacity!==void 0&&(D.fillOpacity=parseFloat($.fillOpacity)),$.strokeOpacity!==void 0&&(D.strokeOpacity=parseFloat($.strokeOpacity)),$.strokeWidth!==void 0&&(D.weight=parseInt($.strokeWidth)),$.strokeColor&&(D.color=$.strokeColor),r("style-update",D)},W=$=>{var D,J;((J=(D=n.selectedShape)==null?void 0:D.properties)==null?void 0:J.type)==="TextRectangle"&&r("style-update",{...$})},Q=()=>{Be.value=!Be.value,W({bold:Be.value})},z=()=>{Ue.value=!Ue.value,W({italic:Ue.value})},Ie=$=>$?$>=1e3?`${($/1e3).toFixed(2)} km`:`${$.toFixed(2)} m`:"0 m",I=$=>$?`${($/1e4).toFixed(2)} ha`:"0 ha",G=$=>$?`${(($%360+360)%360).toFixed(1)}`:"0";return($,D)=>(nt(),at("div",nw,[D[66]||(D[66]=A("div",{class:"sidebar-header"},[A("h3",{class:"sidebar-title"},"Outils")],-1)),A("div",iw,[A("div",rw,[(nt(!0),at(gn,null,Un(w.filter(J=>J.type!=="delete"),J=>(nt(),at("button",{key:J.type,class:Ni(["tool-button",{active:$.currentTool===J.type}]),onClick:le=>$.$emit("tool-change",J.type),title:J.label},[A("span",{class:"icon",innerHTML:_(J.type)},null,8,ow)],10,sw))),128))]),$.selectedShape?(nt(),at("button",{key:0,class:Ni(["delete-button",{active:$.currentTool==="delete"}]),onClick:D[0]||(D[0]=J=>$.$emit("delete-shape")),title:"Supprimer la forme"},D[33]||(D[33]=[A("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),2)):tn("",!0)]),D[67]||(D[67]=A("div",{class:"sidebar-divider"},null,-1)),$.selectedShape&&o.value?(nt(),at("div",aw,[A("div",lw,[A("button",{class:"section-header",onClick:D[1]||(D[1]=J=>M("style"))},[D[35]||(D[35]=A("span",{class:"section-title"},"Style",-1)),(nt(),at("svg",{class:Ni(["section-icon",{"rotate-180":!H.value.style}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},D[34]||(D[34]=[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),kn(A("div",uw,[A("div",cw,[(nt(),at(gn,null,Un(b,J=>A("button",{key:J,class:"color-button",style:Oh({backgroundColor:J}),onClick:le=>Z(J),title:J},null,12,hw)),64))]),o.value.type!=="TextRectangle"?(nt(),at("div",fw,[A("div",dw,[D[36]||(D[36]=A("span",{class:"control-label"},"Contour",-1)),A("div",pw,[kn(A("input",{type:"color","onUpdate:modelValue":D[2]||(D[2]=J=>U.value=J),class:"color-input",onChange:D[3]||(D[3]=J=>re({strokeColor:U.value})),title:"Couleur du contour"},null,544),[[ri,U.value]]),kn(A("input",{type:"range","onUpdate:modelValue":D[4]||(D[4]=J=>j.value=J),min:"1",max:"10",class:"range-input",onChange:D[5]||(D[5]=J=>re({strokeWidth:j.value})),title:"paisseur du contour"},null,544),[[ri,j.value]])])]),A("div",mw,[D[37]||(D[37]=A("span",{class:"control-label"},"Style",-1)),kn(A("select",{"onUpdate:modelValue":D[6]||(D[6]=J=>ne.value=J),class:"select-input",onChange:D[7]||(D[7]=J=>re({strokeStyle:ne.value}))},[(nt(),at(gn,null,Un(E,J=>A("option",{key:J.value,value:J.value},kt(J.label),9,gw)),64))],544),[[cs,ne.value]])]),Se.value?(nt(),at("div",vw,[D[38]||(D[38]=A("span",{class:"control-label"},"Remplir",-1)),A("div",_w,[kn(A("input",{type:"color","onUpdate:modelValue":D[8]||(D[8]=J=>F.value=J),class:"color-input",onChange:D[9]||(D[9]=J=>re({fillColor:F.value})),title:"Couleur de remplissage"},null,544),[[ri,F.value]]),kn(A("input",{type:"range","onUpdate:modelValue":D[10]||(D[10]=J=>N.value=J),min:"0",max:"1",step:"0.1",class:"range-input",onChange:D[11]||(D[11]=J=>re({fillOpacity:N.value})),title:"Opacit du remplissage"},null,544),[[ri,N.value]])])])):tn("",!0)])):tn("",!0),o.value.type==="TextRectangle"?(nt(),at("div",yw,[A("div",bw,[D[39]||(D[39]=A("span",{class:"control-label"},"Contour",-1)),A("div",ww,[kn(A("input",{type:"color","onUpdate:modelValue":D[12]||(D[12]=J=>U.value=J),class:"color-input",onChange:D[13]||(D[13]=J=>re({strokeColor:U.value})),title:"Couleur du contour"},null,544),[[ri,U.value]]),kn(A("input",{type:"range","onUpdate:modelValue":D[14]||(D[14]=J=>j.value=J),min:"1",max:"10",class:"range-input",onChange:D[15]||(D[15]=J=>re({strokeWidth:j.value})),title:"paisseur du contour"},null,544),[[ri,j.value]])])]),A("div",xw,[D[40]||(D[40]=A("span",{class:"control-label"},"Remplir",-1)),A("div",Lw,[kn(A("input",{type:"color","onUpdate:modelValue":D[16]||(D[16]=J=>F.value=J),class:"color-input",onChange:D[17]||(D[17]=J=>re({fillColor:F.value})),title:"Couleur de remplissage"},null,544),[[ri,F.value]]),kn(A("input",{type:"range","onUpdate:modelValue":D[18]||(D[18]=J=>N.value=J),min:"0",max:"1",step:"0.1",class:"range-input",onChange:D[19]||(D[19]=J=>re({fillOpacity:N.value})),title:"Opacit du remplissage"},null,544),[[ri,N.value]])])]),A("div",Cw,[D[42]||(D[42]=A("span",{class:"control-label"},"Texte",-1)),A("div",kw,[kn(A("input",{type:"color","onUpdate:modelValue":D[20]||(D[20]=J=>ae.value=J),class:"color-input",onChange:D[21]||(D[21]=J=>W({textColor:ae.value})),title:"Couleur du texte"},null,544),[[ri,ae.value]]),kn(A("select",{"onUpdate:modelValue":D[22]||(D[22]=J=>be.value=J),class:"select-input",onChange:D[23]||(D[23]=J=>W({fontSize:be.value}))},D[41]||(D[41]=[Au('<option value="10px" data-v-0640e4c0>10px</option><option value="12px" data-v-0640e4c0>12px</option><option value="14px" data-v-0640e4c0>14px</option><option value="16px" data-v-0640e4c0>16px</option><option value="18px" data-v-0640e4c0>18px</option><option value="20px" data-v-0640e4c0>20px</option><option value="24px" data-v-0640e4c0>24px</option>',7)]),544),[[cs,be.value]])])]),A("div",Pw,[D[43]||(D[43]=A("span",{class:"control-label"},"Fond",-1)),A("div",Sw,[kn(A("input",{type:"color","onUpdate:modelValue":D[24]||(D[24]=J=>ye.value=J),class:"color-input",onChange:D[25]||(D[25]=J=>W({backgroundColor:ye.value})),title:"Couleur de fond"},null,544),[[ri,ye.value]]),kn(A("input",{type:"range","onUpdate:modelValue":D[26]||(D[26]=J=>Pe.value=J),min:"0",max:"1",step:"0.1",class:"range-input",onChange:D[27]||(D[27]=J=>W({backgroundOpacity:Pe.value})),title:"Opacit du fond"},null,544),[[ri,Pe.value]])])]),A("div",Ew,[D[45]||(D[45]=A("span",{class:"control-label"},"Police",-1)),kn(A("select",{"onUpdate:modelValue":D[28]||(D[28]=J=>Ce.value=J),class:"select-input",onChange:D[29]||(D[29]=J=>W({fontFamily:Ce.value}))},D[44]||(D[44]=[Au('<option value="Arial, sans-serif" data-v-0640e4c0>Arial</option><option value="&#39;Times New Roman&#39;, serif" data-v-0640e4c0>Times</option><option value="&#39;Courier New&#39;, monospace" data-v-0640e4c0>Courier</option><option value="Georgia, serif" data-v-0640e4c0>Georgia</option><option value="Verdana, sans-serif" data-v-0640e4c0>Verdana</option>',5)]),544),[[cs,Ce.value]])]),A("div",Aw,[D[46]||(D[46]=A("span",{class:"control-label"},"Align.",-1)),A("div",Mw,[(nt(),at(gn,null,Un(x,J=>A("button",{key:J.value,class:Ni(["align-button",{active:de.value===J.value}]),onClick:le=>W({textAlign:J.value}),title:J.label},[A("span",{innerHTML:J.icon},null,8,Tw)],10,Bw)),64)),A("button",{class:Ni(["style-button",{active:Be.value}]),onClick:Q,title:"Gras"}," B ",2),A("button",{class:Ni(["style-button",{active:Ue.value}]),onClick:z,title:"Italique"}," I ",2)])]),A("div",Nw,[D[47]||(D[47]=A("span",{class:"control-label"},"chelle",-1)),A("div",Dw,[kn(A("input",{type:"checkbox",id:"text-scaling","onUpdate:modelValue":D[30]||(D[30]=J=>q.value=J),onChange:D[31]||(D[31]=J=>W({fixedPhysicalSize:q.value}))},null,544),[[Wd,q.value]]),A("label",{for:"text-scaling",class:"switch-label",title:q.value?"Taille fixe sur le terrain":"Taille fixe  l'cran"},kt(q.value?"Terrain":"cran"),9,Ow)])])])):tn("",!0)],512),[[Up,!H.value.style]])]),A("div",Rw,[A("button",{class:"section-header",onClick:D[32]||(D[32]=J=>M("properties"))},[D[49]||(D[49]=A("span",{class:"section-title"},"Proprits",-1)),(nt(),at("svg",{class:Ni(["section-icon",{"rotate-180":!H.value.properties}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},D[48]||(D[48]=[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),kn(A("div",Iw,[o.value?(nt(),at("div",Fw,[A("div",jw,[o.value.type==="Circle"?(nt(),at(gn,{key:0},[D[50]||(D[50]=A("span",{class:"property-label"},"Rayon :",-1)),A("span",zw,kt(Ie(o.value.radius||0)),1),D[51]||(D[51]=A("span",{class:"property-label"},"Surface :",-1)),A("span",Uw,kt(I(o.value.area||0)),1)],64)):o.value.type==="Rectangle"?(nt(),at(gn,{key:1},[D[52]||(D[52]=A("span",{class:"property-label"},"Largeur :",-1)),A("span",qw,kt(Ie(o.value.width||0)),1),D[53]||(D[53]=A("span",{class:"property-label"},"Hauteur :",-1)),A("span",$w,kt(Ie(o.value.height||0)),1),D[54]||(D[54]=A("span",{class:"property-label"},"Surface :",-1)),A("span",Vw,kt(I(o.value.area||0)),1)],64)):o.value.type==="Semicircle"?(nt(),at(gn,{key:2},[D[55]||(D[55]=A("span",{class:"property-label"},"Rayon :",-1)),A("span",Hw,kt(Ie(o.value.radius||0)),1),D[56]||(D[56]=A("span",{class:"property-label"},"Surface :",-1)),A("span",Gw,kt(I(o.value.area||0)),1),D[57]||(D[57]=A("span",{class:"property-label"},"Angle :",-1)),A("span",Ww,kt(G(o.value.openingAngle||0)),1)],64)):o.value.type==="Line"?(nt(),at(gn,{key:3},[D[58]||(D[58]=A("span",{class:"property-label"},"Longueur :",-1)),A("span",Zw,kt(Ie(o.value.length||0)),1)],64)):o.value.type==="Polygon"?(nt(),at(gn,{key:4},[D[59]||(D[59]=A("span",{class:"property-label"},"Surface :",-1)),A("span",Kw,kt(I(o.value.area||0)),1),D[60]||(D[60]=A("span",{class:"property-label"},"Primtre :",-1)),A("span",Jw,kt(Ie(o.value.perimeter||0)),1)],64)):o.value.type==="TextRectangle"?(nt(),at(gn,{key:5},[D[61]||(D[61]=A("span",{class:"property-label"},"Largeur :",-1)),A("span",Yw,kt(Ie(o.value.width||0)),1),D[62]||(D[62]=A("span",{class:"property-label"},"Hauteur :",-1)),A("span",Xw,kt(Ie(o.value.height||0)),1),D[63]||(D[63]=A("span",{class:"property-label"},"Surface :",-1)),A("span",Qw,kt(I(o.value.area||0)),1),D[64]||(D[64]=A("span",{class:"property-label"},"Rotation :",-1)),A("span",ex,kt(G(o.value.rotation||0)),1),D[65]||(D[65]=A("span",{class:"property-label col-span-2"},"Texte :",-1)),A("span",tx,kt(o.value.text||"Aucun texte"),1)],64)):tn("",!0)])])):(nt(),at("div",nx," Aucune proprit disponible "))],512),[[Up,!H.value.properties]])])])):tn("",!0)]))}}),rx=ep(ix,[["__scopeId","data-v-0640e4c0"]]),sx={class:"map-toolbar w-full"},ox={class:"hidden md:flex items-center space-x-2"},ax={class:"dropdown"},lx={class:"btn-toolbar dropdown-toggle"},ux={class:"dropdown-menu"},cx=["onClick"],hx={key:0,class:"border-l pl-2 flex-1"},fx={class:"flex items-center"},dx={class:"plan-info"},px={class:"plan-name"},mx={key:0,class:"plan-description"},gx={class:"border-l pl-2 ml-auto"},vx={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},_x={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},yx={key:"saving"},bx={key:"success",class:"save-success-text"},wx={key:"default"},xx={class:"md:hidden"},Lx={class:"flex justify-between items-center"},Cx={key:0,class:"truncate mx-2 text-sm font-medium"},kx={key:0,class:"mobile-menu mt-2 bg-white shadow-md rounded p-2 z-50"},Px={class:"flex flex-col space-y-2"},Sx={key:0,class:"flex flex-col pb-2 border-b"},Ex={class:"text-sm font-semibold text-gray-800"},Ax={key:0,class:"text-xs text-gray-600 mt-1"},Mx={class:"flex flex-col"},Bx={class:"grid grid-cols-2 gap-1"},Tx=["onClick"],Nx={key:0,class:"animate-spin h-3 w-3 mr-1 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Dx={key:1,class:"h-3 w-3 mr-1 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Ox={key:"saving"},Rx={key:"success",class:"save-success-text"},Ix={key:"default"},Fx=ps({__name:"MapToolbar",props:{lastSave:{},planName:{},planDescription:{},saveStatus:{}},emits:["change-map-type","create-new-plan","load-plan","save-plan","adjust-view","generate-summary"],setup(e,{emit:t}){const n=t,r=e,o=It("Ville"),a=It(!1),u={Ville:"Ville",Satellite:"Satellite",Cadastre:"Cadastre"},f=Nn(()=>r.lastSave?new Date(r.lastSave).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Jamais"),m=N=>{o.value=N,n("change-map-type",N),F()},_=()=>{n("create-new-plan"),F()},w=()=>{n("load-plan"),F()},b=()=>{n("save-plan"),F()},E=()=>{n("adjust-view"),F()},x=()=>{n("generate-summary"),F()},F=()=>{a.value=!1};return(N,U)=>(nt(),at("div",sx,[A("div",ox,[A("div",ax,[A("button",lx,[U[1]||(U[1]=A("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[A("path",{"fill-rule":"evenodd",d:"M12 1.586l-4 4V17h8V5.586l-4-4zM2 17V9.276l4-3.638V17H2zM2 8.162V3h4.5L12 8.5V17H6V5.638L2 8.162z","clip-rule":"evenodd"})],-1)),A("span",null,kt(u[o.value]),1)]),A("div",ux,[(nt(),at(gn,null,Un(u,(j,ne)=>A("button",{key:ne,class:Ni(["dropdown-item",{active:ne===o.value}]),onClick:ae=>m(ne)},kt(j),11,cx)),64))])]),N.planName?(nt(),at("div",hx,[A("div",fx,[A("div",dx,[A("h2",px,kt(N.planName),1),N.planDescription?(nt(),at("p",mx,kt(N.planDescription),1)):tn("",!0)])])])):tn("",!0),A("div",{class:"border-l pl-2"},[A("div",{class:"flex items-center space-x-1"},[A("button",{onClick:_,class:"btn-toolbar",title:"Nouveau plan"},U[2]||(U[2]=[A("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[A("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),A("span",{class:"hidden lg:inline ml-1"},"Nouveau",-1)])),A("button",{onClick:w,class:"btn-toolbar",title:"Charger un plan"},U[3]||(U[3]=[Au('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" data-v-bae949df><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" data-v-bae949df></path><path d="M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z" data-v-bae949df></path><path fill-rule="evenodd" d="M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z" clip-rule="evenodd" data-v-bae949df></path></svg><span class="hidden lg:inline ml-1" data-v-bae949df>Charger</span>',2)])),A("button",{onClick:b,class:"btn-toolbar",title:"Enregistrer le plan"},U[4]||(U[4]=[A("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[A("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1),A("span",{class:"hidden lg:inline ml-1"},"Enregistrer",-1)]))])]),A("div",{class:"border-l pl-2"},[A("div",{class:"flex items-center space-x-1"},[A("button",{onClick:E,class:"btn-toolbar",title:"Ajuster la vue"},U[5]||(U[5]=[A("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[A("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),A("span",{class:"hidden lg:inline ml-1"},"Ajuster",-1)])),A("button",{onClick:x,class:"btn-toolbar",title:"Gnrer une synthse"},U[6]||(U[6]=[A("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[A("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),A("span",{class:"hidden lg:inline ml-1"},"Synthse",-1)]))])]),A("div",gx,[A("div",{class:Ni(["text-xs hidden lg:flex items-center",{"text-gray-500":!N.saveStatus,"text-primary-600 font-medium":N.saveStatus==="success","text-blue-600 font-medium":N.saveStatus==="saving"}])},[N.saveStatus==="saving"?(nt(),at("svg",vx,U[7]||(U[7]=[A("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),A("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):tn("",!0),N.saveStatus==="success"?(nt(),at("svg",_x,U[8]||(U[8]=[A("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):tn("",!0),Pi(Dp,{name:"fade-slide",mode:"out-in"},{default:Ha(()=>[N.saveStatus==="saving"?(nt(),at("span",yx," Sauvegarde en cours... ")):N.saveStatus==="success"?(nt(),at("span",bx," Sauvegarde russie ! ")):(nt(),at("span",wx," Dernire modification : "+kt(f.value),1))]),_:1})],2)])]),A("div",xx,[A("div",Lx,[A("button",{onClick:U[0]||(U[0]=j=>a.value=!a.value),class:"p-1 rounded border"},U[9]||(U[9]=[A("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[A("path",{"fill-rule":"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1)])),N.planName?(nt(),at("div",Cx,kt(N.planName),1)):tn("",!0),A("div",{class:"flex space-x-1"},[A("button",{onClick:_,class:"p-1 rounded border bg-white"},U[10]||(U[10]=[A("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[A("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1)])),A("button",{onClick:b,class:"p-1 rounded border bg-white"},U[11]||(U[11]=[A("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[A("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1)])),A("button",{onClick:E,class:"p-1 rounded border bg-white"},U[12]||(U[12]=[A("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[A("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)]))])]),a.value?(nt(),at("div",kx,[A("div",Px,[N.planName?(nt(),at("div",Sx,[A("h3",Ex,kt(N.planName),1),N.planDescription?(nt(),at("p",Ax,kt(N.planDescription),1)):tn("",!0)])):tn("",!0),A("div",Mx,[U[13]||(U[13]=A("span",{class:"text-xs font-medium text-gray-500 mb-1"},"Type de carte",-1)),A("div",Bx,[(nt(),at(gn,null,Un(u,(j,ne)=>A("button",{key:ne,class:Ni(["px-2 py-1 text-xs rounded border",{"bg-blue-50 border-blue-200 text-blue-700":ne===o.value}]),onClick:ae=>m(ne)},kt(j),11,Tx)),64))])]),A("div",{class:"flex flex-col"},[U[16]||(U[16]=A("span",{class:"text-xs font-medium text-gray-500 mb-1"},"Outils de plan",-1)),A("div",{class:"grid grid-cols-2 gap-1"},[A("button",{onClick:w,class:"px-2 py-1 text-xs rounded border flex items-center justify-center"},U[14]||(U[14]=[A("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[A("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule":"evenodd"}),A("path",{d:"M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z"}),A("path",{"fill-rule":"evenodd",d:"M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),ki(" Charger ")])),A("button",{onClick:x,class:"px-2 py-1 text-xs rounded border flex items-center justify-center"},U[15]||(U[15]=[A("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[A("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),ki(" Synthse ")]))])]),A("div",{class:Ni(["text-xs text-center pt-1 border-t flex items-center justify-center space-x-1",{"text-gray-500":!N.saveStatus,"text-primary-600 font-medium":N.saveStatus==="success","text-blue-600 font-medium":N.saveStatus==="saving"}])},[N.saveStatus==="saving"?(nt(),at("svg",Nx,U[17]||(U[17]=[A("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),A("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):tn("",!0),N.saveStatus==="success"?(nt(),at("svg",Dx,U[18]||(U[18]=[A("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):tn("",!0),Pi(Dp,{name:"fade-slide",mode:"out-in"},{default:Ha(()=>[N.saveStatus==="saving"?(nt(),at("span",Ox," Sauvegarde en cours... ")):N.saveStatus==="success"?(nt(),at("span",Rx," Sauvegarde russie ! ")):(nt(),at("span",Ix," Dernire modification : "+kt(f.value),1))]),_:1})],2)])])):tn("",!0)])]))}}),jx=ep(Fx,[["__scopeId","data-v-bae949df"]]);(()=>{var $t,hn;var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,o=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,u=(s,l)=>()=>(l||s((l={exports:{}}).exports,l),l.exports),f=(s,l,h,p)=>{if(l&&typeof l=="object"||typeof l=="function")for(let v of r(l))!a.call(s,v)&&v!==h&&t(s,v,{get:()=>l[v],enumerable:!(p=n(l,v))||p.enumerable});return s},m=(s,l,h)=>(h=s!=null?e(o(s)):{},f(l||!s||!s.__esModule?t(h,"default",{value:s,enumerable:!0}):h,s)),_=u((s,l)=>{function h(){this.__data__=[],this.size=0}l.exports=h}),w=u((s,l)=>{function h(p,v){return p===v||p!==p&&v!==v}l.exports=h}),b=u((s,l)=>{var h=w();function p(v,k){for(var B=v.length;B--;)if(h(v[B][0],k))return B;return-1}l.exports=p}),E=u((s,l)=>{var h=b(),p=Array.prototype,v=p.splice;function k(B){var T=this.__data__,V=h(T,B);if(V<0)return!1;var oe=T.length-1;return V==oe?T.pop():v.call(T,V,1),--this.size,!0}l.exports=k}),x=u((s,l)=>{var h=b();function p(v){var k=this.__data__,B=h(k,v);return B<0?void 0:k[B][1]}l.exports=p}),F=u((s,l)=>{var h=b();function p(v){return h(this.__data__,v)>-1}l.exports=p}),N=u((s,l)=>{var h=b();function p(v,k){var B=this.__data__,T=h(B,v);return T<0?(++this.size,B.push([v,k])):B[T][1]=k,this}l.exports=p}),U=u((s,l)=>{var h=_(),p=E(),v=x(),k=F(),B=N();function T(V){var oe=-1,Re=V==null?0:V.length;for(this.clear();++oe<Re;){var Me=V[oe];this.set(Me[0],Me[1])}}T.prototype.clear=h,T.prototype.delete=p,T.prototype.get=v,T.prototype.has=k,T.prototype.set=B,l.exports=T}),j=u((s,l)=>{var h=U();function p(){this.__data__=new h,this.size=0}l.exports=p}),ne=u((s,l)=>{function h(p){var v=this.__data__,k=v.delete(p);return this.size=v.size,k}l.exports=h}),ae=u((s,l)=>{function h(p){return this.__data__.get(p)}l.exports=h}),be=u((s,l)=>{function h(p){return this.__data__.has(p)}l.exports=h}),ye=u((s,l)=>{var h=typeof go=="object"&&go&&go.Object===Object&&go;l.exports=h}),Pe=u((s,l)=>{var h=ye(),p=typeof self=="object"&&self&&self.Object===Object&&self,v=h||p||Function("return this")();l.exports=v}),Ce=u((s,l)=>{var h=Pe(),p=h.Symbol;l.exports=p}),de=u((s,l)=>{var h=Ce(),p=Object.prototype,v=p.hasOwnProperty,k=p.toString,B=h?h.toStringTag:void 0;function T(V){var oe=v.call(V,B),Re=V[B];try{V[B]=void 0;var Me=!0}catch{}var Qe=k.call(V);return Me&&(oe?V[B]=Re:delete V[B]),Qe}l.exports=T}),Be=u((s,l)=>{var h=Object.prototype,p=h.toString;function v(k){return p.call(k)}l.exports=v}),Ue=u((s,l)=>{var h=Ce(),p=de(),v=Be(),k="[object Null]",B="[object Undefined]",T=h?h.toStringTag:void 0;function V(oe){return oe==null?oe===void 0?B:k:T&&T in Object(oe)?p(oe):v(oe)}l.exports=V}),q=u((s,l)=>{function h(p){var v=typeof p;return p!=null&&(v=="object"||v=="function")}l.exports=h}),H=u((s,l)=>{var h=Ue(),p=q(),v="[object AsyncFunction]",k="[object Function]",B="[object GeneratorFunction]",T="[object Proxy]";function V(oe){if(!p(oe))return!1;var Re=h(oe);return Re==k||Re==B||Re==v||Re==T}l.exports=V}),Se=u((s,l)=>{var h=Pe(),p=h["__core-js_shared__"];l.exports=p}),M=u((s,l)=>{var h=Se(),p=function(){var k=/[^.]+$/.exec(h&&h.keys&&h.keys.IE_PROTO||"");return k?"Symbol(src)_1."+k:""}();function v(k){return!!p&&p in k}l.exports=v}),Y=u((s,l)=>{var h=Function.prototype,p=h.toString;function v(k){if(k!=null){try{return p.call(k)}catch{}try{return k+""}catch{}}return""}l.exports=v}),Z=u((s,l)=>{var h=H(),p=M(),v=q(),k=Y(),B=/[\\^$.*+?()[\]{}|]/g,T=/^\[object .+?Constructor\]$/,V=Function.prototype,oe=Object.prototype,Re=V.toString,Me=oe.hasOwnProperty,Qe=RegExp("^"+Re.call(Me).replace(B,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function dt(Et){if(!v(Et)||p(Et))return!1;var jt=h(Et)?Qe:T;return jt.test(k(Et))}l.exports=dt}),re=u((s,l)=>{function h(p,v){return p==null?void 0:p[v]}l.exports=h}),W=u((s,l)=>{var h=Z(),p=re();function v(k,B){var T=p(k,B);return h(T)?T:void 0}l.exports=v}),Q=u((s,l)=>{var h=W(),p=Pe(),v=h(p,"Map");l.exports=v}),z=u((s,l)=>{var h=W(),p=h(Object,"create");l.exports=p}),Ie=u((s,l)=>{var h=z();function p(){this.__data__=h?h(null):{},this.size=0}l.exports=p}),I=u((s,l)=>{function h(p){var v=this.has(p)&&delete this.__data__[p];return this.size-=v?1:0,v}l.exports=h}),G=u((s,l)=>{var h=z(),p="__lodash_hash_undefined__",v=Object.prototype,k=v.hasOwnProperty;function B(T){var V=this.__data__;if(h){var oe=V[T];return oe===p?void 0:oe}return k.call(V,T)?V[T]:void 0}l.exports=B}),$=u((s,l)=>{var h=z(),p=Object.prototype,v=p.hasOwnProperty;function k(B){var T=this.__data__;return h?T[B]!==void 0:v.call(T,B)}l.exports=k}),D=u((s,l)=>{var h=z(),p="__lodash_hash_undefined__";function v(k,B){var T=this.__data__;return this.size+=this.has(k)?0:1,T[k]=h&&B===void 0?p:B,this}l.exports=v}),J=u((s,l)=>{var h=Ie(),p=I(),v=G(),k=$(),B=D();function T(V){var oe=-1,Re=V==null?0:V.length;for(this.clear();++oe<Re;){var Me=V[oe];this.set(Me[0],Me[1])}}T.prototype.clear=h,T.prototype.delete=p,T.prototype.get=v,T.prototype.has=k,T.prototype.set=B,l.exports=T}),le=u((s,l)=>{var h=J(),p=U(),v=Q();function k(){this.size=0,this.__data__={hash:new h,map:new(v||p),string:new h}}l.exports=k}),ge=u((s,l)=>{function h(p){var v=typeof p;return v=="string"||v=="number"||v=="symbol"||v=="boolean"?p!=="__proto__":p===null}l.exports=h}),me=u((s,l)=>{var h=ge();function p(v,k){var B=v.__data__;return h(k)?B[typeof k=="string"?"string":"hash"]:B.map}l.exports=p}),je=u((s,l)=>{var h=me();function p(v){var k=h(this,v).delete(v);return this.size-=k?1:0,k}l.exports=p}),$e=u((s,l)=>{var h=me();function p(v){return h(this,v).get(v)}l.exports=p}),X=u((s,l)=>{var h=me();function p(v){return h(this,v).has(v)}l.exports=p}),se=u((s,l)=>{var h=me();function p(v,k){var B=h(this,v),T=B.size;return B.set(v,k),this.size+=B.size==T?0:1,this}l.exports=p}),Te=u((s,l)=>{var h=le(),p=je(),v=$e(),k=X(),B=se();function T(V){var oe=-1,Re=V==null?0:V.length;for(this.clear();++oe<Re;){var Me=V[oe];this.set(Me[0],Me[1])}}T.prototype.clear=h,T.prototype.delete=p,T.prototype.get=v,T.prototype.has=k,T.prototype.set=B,l.exports=T}),Ee=u((s,l)=>{var h=U(),p=Q(),v=Te(),k=200;function B(T,V){var oe=this.__data__;if(oe instanceof h){var Re=oe.__data__;if(!p||Re.length<k-1)return Re.push([T,V]),this.size=++oe.size,this;oe=this.__data__=new v(Re)}return oe.set(T,V),this.size=oe.size,this}l.exports=B}),ie=u((s,l)=>{var h=U(),p=j(),v=ne(),k=ae(),B=be(),T=Ee();function V(oe){var Re=this.__data__=new h(oe);this.size=Re.size}V.prototype.clear=p,V.prototype.delete=v,V.prototype.get=k,V.prototype.has=B,V.prototype.set=T,l.exports=V}),We=u((s,l)=>{var h=W(),p=function(){try{var v=h(Object,"defineProperty");return v({},"",{}),v}catch{}}();l.exports=p}),et=u((s,l)=>{var h=We();function p(v,k,B){k=="__proto__"&&h?h(v,k,{configurable:!0,enumerable:!0,value:B,writable:!0}):v[k]=B}l.exports=p}),Xe=u((s,l)=>{var h=et(),p=w();function v(k,B,T){(T!==void 0&&!p(k[B],T)||T===void 0&&!(B in k))&&h(k,B,T)}l.exports=v}),De=u((s,l)=>{function h(p){return function(v,k,B){for(var T=-1,V=Object(v),oe=B(v),Re=oe.length;Re--;){var Me=oe[p?Re:++T];if(k(V[Me],Me,V)===!1)break}return v}}l.exports=h}),ke=u((s,l)=>{var h=De(),p=h();l.exports=p}),lt=u((s,l)=>{var h=Pe(),p=typeof s=="object"&&s&&!s.nodeType&&s,v=p&&typeof l=="object"&&l&&!l.nodeType&&l,k=v&&v.exports===p,B=k?h.Buffer:void 0,T=B?B.allocUnsafe:void 0;function V(oe,Re){if(Re)return oe.slice();var Me=oe.length,Qe=T?T(Me):new oe.constructor(Me);return oe.copy(Qe),Qe}l.exports=V}),ht=u((s,l)=>{var h=Pe(),p=h.Uint8Array;l.exports=p}),it=u((s,l)=>{var h=ht();function p(v){var k=new v.constructor(v.byteLength);return new h(k).set(new h(v)),k}l.exports=p}),Fe=u((s,l)=>{var h=it();function p(v,k){var B=k?h(v.buffer):v.buffer;return new v.constructor(B,v.byteOffset,v.length)}l.exports=p}),Pt=u((s,l)=>{function h(p,v){var k=-1,B=p.length;for(v||(v=Array(B));++k<B;)v[k]=p[k];return v}l.exports=h}),Ft=u((s,l)=>{var h=q(),p=Object.create,v=function(){function k(){}return function(B){if(!h(B))return{};if(p)return p(B);k.prototype=B;var T=new k;return k.prototype=void 0,T}}();l.exports=v}),Wt=u((s,l)=>{function h(p,v){return function(k){return p(v(k))}}l.exports=h}),Ut=u((s,l)=>{var h=Wt(),p=h(Object.getPrototypeOf,Object);l.exports=p}),Xt=u((s,l)=>{var h=Object.prototype;function p(v){var k=v&&v.constructor,B=typeof k=="function"&&k.prototype||h;return v===B}l.exports=p}),Rt=u((s,l)=>{var h=Ft(),p=Ut(),v=Xt();function k(B){return typeof B.constructor=="function"&&!v(B)?h(p(B)):{}}l.exports=k}),on=u((s,l)=>{function h(p){return p!=null&&typeof p=="object"}l.exports=h}),dn=u((s,l)=>{var h=Ue(),p=on(),v="[object Arguments]";function k(B){return p(B)&&h(B)==v}l.exports=k}),ai=u((s,l)=>{var h=dn(),p=on(),v=Object.prototype,k=v.hasOwnProperty,B=v.propertyIsEnumerable,T=h(function(){return arguments}())?h:function(V){return p(V)&&k.call(V,"callee")&&!B.call(V,"callee")};l.exports=T}),Ct=u((s,l)=>{var h=Array.isArray;l.exports=h}),nn=u((s,l)=>{var h=9007199254740991;function p(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=h}l.exports=p}),Vt=u((s,l)=>{var h=H(),p=nn();function v(k){return k!=null&&p(k.length)&&!h(k)}l.exports=v}),ln=u((s,l)=>{var h=Vt(),p=on();function v(k){return p(k)&&h(k)}l.exports=v}),li=u((s,l)=>{function h(){return!1}l.exports=h}),In=u((s,l)=>{var h=Pe(),p=li(),v=typeof s=="object"&&s&&!s.nodeType&&s,k=v&&typeof l=="object"&&l&&!l.nodeType&&l,B=k&&k.exports===v,T=B?h.Buffer:void 0,V=T?T.isBuffer:void 0,oe=V||p;l.exports=oe}),fi=u((s,l)=>{var h=Ue(),p=Ut(),v=on(),k="[object Object]",B=Function.prototype,T=Object.prototype,V=B.toString,oe=T.hasOwnProperty,Re=V.call(Object);function Me(Qe){if(!v(Qe)||h(Qe)!=k)return!1;var dt=p(Qe);if(dt===null)return!0;var Et=oe.call(dt,"constructor")&&dt.constructor;return typeof Et=="function"&&Et instanceof Et&&V.call(Et)==Re}l.exports=Me}),xi=u((s,l)=>{var h=Ue(),p=nn(),v=on(),k="[object Arguments]",B="[object Array]",T="[object Boolean]",V="[object Date]",oe="[object Error]",Re="[object Function]",Me="[object Map]",Qe="[object Number]",dt="[object Object]",Et="[object RegExp]",jt="[object Set]",qt="[object String]",mn="[object WeakMap]",Oe="[object ArrayBuffer]",ze="[object DataView]",Ke="[object Float32Array]",vt="[object Float64Array]",rt="[object Int8Array]",pt="[object Int16Array]",K="[object Int32Array]",ue="[object Uint8Array]",we="[object Uint8ClampedArray]",_e="[object Uint16Array]",xe="[object Uint32Array]",Le={};Le[Ke]=Le[vt]=Le[rt]=Le[pt]=Le[K]=Le[ue]=Le[we]=Le[_e]=Le[xe]=!0,Le[k]=Le[B]=Le[Oe]=Le[T]=Le[ze]=Le[V]=Le[oe]=Le[Re]=Le[Me]=Le[Qe]=Le[dt]=Le[Et]=Le[jt]=Le[qt]=Le[mn]=!1;function Ge(Ve){return v(Ve)&&p(Ve.length)&&!!Le[h(Ve)]}l.exports=Ge}),Kn=u((s,l)=>{function h(p){return function(v){return p(v)}}l.exports=h}),Tt=u((s,l)=>{var h=ye(),p=typeof s=="object"&&s&&!s.nodeType&&s,v=p&&typeof l=="object"&&l&&!l.nodeType&&l,k=v&&v.exports===p,B=k&&h.process,T=function(){try{var V=v&&v.require&&v.require("util").types;return V||B&&B.binding&&B.binding("util")}catch{}}();l.exports=T}),Dt=u((s,l)=>{var h=xi(),p=Kn(),v=Tt(),k=v&&v.isTypedArray,B=k?p(k):h;l.exports=B}),Di=u((s,l)=>{function h(p,v){if(!(v==="constructor"&&typeof p[v]=="function")&&v!="__proto__")return p[v]}l.exports=h}),qn=u((s,l)=>{var h=et(),p=w(),v=Object.prototype,k=v.hasOwnProperty;function B(T,V,oe){var Re=T[V];(!(k.call(T,V)&&p(Re,oe))||oe===void 0&&!(V in T))&&h(T,V,oe)}l.exports=B}),ms=u((s,l)=>{var h=qn(),p=et();function v(k,B,T,V){var oe=!T;T||(T={});for(var Re=-1,Me=B.length;++Re<Me;){var Qe=B[Re],dt=V?V(T[Qe],k[Qe],Qe,T,k):void 0;dt===void 0&&(dt=k[Qe]),oe?p(T,Qe,dt):h(T,Qe,dt)}return T}l.exports=v}),Mr=u((s,l)=>{function h(p,v){for(var k=-1,B=Array(p);++k<p;)B[k]=v(k);return B}l.exports=h}),cn=u((s,l)=>{var h=9007199254740991,p=/^(?:0|[1-9]\d*)$/;function v(k,B){var T=typeof k;return B=B??h,!!B&&(T=="number"||T!="symbol"&&p.test(k))&&k>-1&&k%1==0&&k<B}l.exports=v}),Yr=u((s,l)=>{var h=Mr(),p=ai(),v=Ct(),k=In(),B=cn(),T=Dt(),V=Object.prototype,oe=V.hasOwnProperty;function Re(Me,Qe){var dt=v(Me),Et=!dt&&p(Me),jt=!dt&&!Et&&k(Me),qt=!dt&&!Et&&!jt&&T(Me),mn=dt||Et||jt||qt,Oe=mn?h(Me.length,String):[],ze=Oe.length;for(var Ke in Me)(Qe||oe.call(Me,Ke))&&!(mn&&(Ke=="length"||jt&&(Ke=="offset"||Ke=="parent")||qt&&(Ke=="buffer"||Ke=="byteLength"||Ke=="byteOffset")||B(Ke,ze)))&&Oe.push(Ke);return Oe}l.exports=Re}),gs=u((s,l)=>{function h(p){var v=[];if(p!=null)for(var k in Object(p))v.push(k);return v}l.exports=h}),cr=u((s,l)=>{var h=q(),p=Xt(),v=gs(),k=Object.prototype,B=k.hasOwnProperty;function T(V){if(!h(V))return v(V);var oe=p(V),Re=[];for(var Me in V)Me=="constructor"&&(oe||!B.call(V,Me))||Re.push(Me);return Re}l.exports=T}),Vn=u((s,l)=>{var h=Yr(),p=cr(),v=Vt();function k(B){return v(B)?h(B,!0):p(B)}l.exports=k}),Ht=u((s,l)=>{var h=ms(),p=Vn();function v(k){return h(k,p(k))}l.exports=v}),hr=u((s,l)=>{var h=Xe(),p=lt(),v=Fe(),k=Pt(),B=Rt(),T=ai(),V=Ct(),oe=ln(),Re=In(),Me=H(),Qe=q(),dt=fi(),Et=Dt(),jt=Di(),qt=Ht();function mn(Oe,ze,Ke,vt,rt,pt,K){var ue=jt(Oe,Ke),we=jt(ze,Ke),_e=K.get(we);if(_e){h(Oe,Ke,_e);return}var xe=pt?pt(ue,we,Ke+"",Oe,ze,K):void 0,Le=xe===void 0;if(Le){var Ge=V(we),Ve=!Ge&&Re(we),Je=!Ge&&!Ve&&Et(we);xe=we,Ge||Ve||Je?V(ue)?xe=ue:oe(ue)?xe=k(ue):Ve?(Le=!1,xe=p(we,!0)):Je?(Le=!1,xe=v(we,!0)):xe=[]:dt(we)||T(we)?(xe=ue,T(ue)?xe=qt(ue):(!Qe(ue)||Me(ue))&&(xe=B(we))):Le=!1}Le&&(K.set(we,xe),rt(xe,we,vt,pt,K),K.delete(we)),h(Oe,Ke,xe)}l.exports=mn}),wo=u((s,l)=>{var h=ie(),p=Xe(),v=ke(),k=hr(),B=q(),T=Vn(),V=Di();function oe(Re,Me,Qe,dt,Et){Re!==Me&&v(Me,function(jt,qt){if(Et||(Et=new h),B(jt))k(Re,Me,qt,Qe,oe,dt,Et);else{var mn=dt?dt(V(Re,qt),jt,qt+"",Re,Me,Et):void 0;mn===void 0&&(mn=jt),p(Re,qt,mn)}},T)}l.exports=oe}),Xr=u((s,l)=>{function h(p){return p}l.exports=h}),Br=u((s,l)=>{function h(p,v,k){switch(k.length){case 0:return p.call(v);case 1:return p.call(v,k[0]);case 2:return p.call(v,k[0],k[1]);case 3:return p.call(v,k[0],k[1],k[2])}return p.apply(v,k)}l.exports=h}),Lr=u((s,l)=>{var h=Br(),p=Math.max;function v(k,B,T){return B=p(B===void 0?k.length-1:B,0),function(){for(var V=arguments,oe=-1,Re=p(V.length-B,0),Me=Array(Re);++oe<Re;)Me[oe]=V[B+oe];oe=-1;for(var Qe=Array(B+1);++oe<B;)Qe[oe]=V[oe];return Qe[B]=T(Me),h(k,this,Qe)}}l.exports=v}),Tr=u((s,l)=>{function h(p){return function(){return p}}l.exports=h}),tr=u((s,l)=>{var h=Tr(),p=We(),v=Xr(),k=p?function(B,T){return p(B,"toString",{configurable:!0,enumerable:!1,value:h(T),writable:!0})}:v;l.exports=k}),Cr=u((s,l)=>{var h=800,p=16,v=Date.now;function k(B){var T=0,V=0;return function(){var oe=v(),Re=p-(oe-V);if(V=oe,Re>0){if(++T>=h)return arguments[0]}else T=0;return B.apply(void 0,arguments)}}l.exports=k}),vs=u((s,l)=>{var h=tr(),p=Cr(),v=p(h);l.exports=v}),xo=u((s,l)=>{var h=Xr(),p=Lr(),v=vs();function k(B,T){return v(p(B,T,h),B+"")}l.exports=k}),Zo=u((s,l)=>{var h=w(),p=Vt(),v=cn(),k=q();function B(T,V,oe){if(!k(oe))return!1;var Re=typeof V;return(Re=="number"?p(oe)&&v(V,oe.length):Re=="string"&&V in oe)?h(oe[V],T):!1}l.exports=B}),Ko=u((s,l)=>{var h=xo(),p=Zo();function v(k){return h(function(B,T){var V=-1,oe=T.length,Re=oe>1?T[oe-1]:void 0,Me=oe>2?T[2]:void 0;for(Re=k.length>3&&typeof Re=="function"?(oe--,Re):void 0,Me&&p(T[0],T[1],Me)&&(Re=oe<3?void 0:Re,oe=1),B=Object(B);++V<oe;){var Qe=T[V];Qe&&k(B,Qe,V,Re)}return B})}l.exports=v}),Ds=u((s,l)=>{var h=wo(),p=Ko(),v=p(function(k,B,T){h(k,B,T)});l.exports=v}),Ys=u((s,l)=>{var h=Ue(),p=on(),v="[object Symbol]";function k(B){return typeof B=="symbol"||p(B)&&h(B)==v}l.exports=k}),Lo=u((s,l)=>{var h=Ct(),p=Ys(),v=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,k=/^\w*$/;function B(T,V){if(h(T))return!1;var oe=typeof T;return oe=="number"||oe=="symbol"||oe=="boolean"||T==null||p(T)?!0:k.test(T)||!v.test(T)||V!=null&&T in Object(V)}l.exports=B}),Ml=u((s,l)=>{var h=Te(),p="Expected a function";function v(k,B){if(typeof k!="function"||B!=null&&typeof B!="function")throw new TypeError(p);var T=function(){var V=arguments,oe=B?B.apply(this,V):V[0],Re=T.cache;if(Re.has(oe))return Re.get(oe);var Me=k.apply(this,V);return T.cache=Re.set(oe,Me)||Re,Me};return T.cache=new(v.Cache||h),T}v.Cache=h,l.exports=v}),Bl=u((s,l)=>{var h=Ml(),p=500;function v(k){var B=h(k,function(V){return T.size===p&&T.clear(),V}),T=B.cache;return B}l.exports=v}),Jo=u((s,l)=>{var h=Bl(),p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,v=/\\(\\)?/g,k=h(function(B){var T=[];return B.charCodeAt(0)===46&&T.push(""),B.replace(p,function(V,oe,Re,Me){T.push(Re?Me.replace(v,"$1"):oe||V)}),T});l.exports=k}),Ka=u((s,l)=>{function h(p,v){for(var k=-1,B=p==null?0:p.length,T=Array(B);++k<B;)T[k]=v(p[k],k,p);return T}l.exports=h}),Tl=u((s,l)=>{var h=Ce(),p=Ka(),v=Ct(),k=Ys(),B=h?h.prototype:void 0,T=B?B.toString:void 0;function V(oe){if(typeof oe=="string")return oe;if(v(oe))return p(oe,V)+"";if(k(oe))return T?T.call(oe):"";var Re=oe+"";return Re=="0"&&1/oe==-1/0?"-0":Re}l.exports=V}),Co=u((s,l)=>{var h=Tl();function p(v){return v==null?"":h(v)}l.exports=p}),ko=u((s,l)=>{var h=Ct(),p=Lo(),v=Jo(),k=Co();function B(T,V){return h(T)?T:p(T,V)?[T]:v(k(T))}l.exports=B}),xa=u((s,l)=>{var h=Ys();function p(v){if(typeof v=="string"||h(v))return v;var k=v+"";return k=="0"&&1/v==-1/0?"-0":k}l.exports=p}),Ja=u((s,l)=>{var h=ko(),p=xa();function v(k,B){B=h(B,k);for(var T=0,V=B.length;k!=null&&T<V;)k=k[p(B[T++])];return T&&T==V?k:void 0}l.exports=v}),kr=u((s,l)=>{var h=Ja();function p(v,k,B){var T=v==null?void 0:h(v,k);return T===void 0?B:T}l.exports=p}),Fn=u((s,l)=>{(function(h,p){typeof s=="object"&&typeof l<"u"?l.exports=p():(h=h||self).RBush=p()})(s,function(){function h(Oe,ze,Ke,vt,rt){(function pt(K,ue,we,_e,xe){for(;_e>we;){if(_e-we>600){var Le=_e-we+1,Ge=ue-we+1,Ve=Math.log(Le),Je=.5*Math.exp(2*Ve/3),ct=.5*Math.sqrt(Ve*Je*(Le-Je)/Le)*(Ge-Le/2<0?-1:1),ut=Math.max(we,Math.floor(ue-Ge*Je/Le+ct)),Mt=Math.min(_e,Math.floor(ue+(Le-Ge)*Je/Le+ct));pt(K,ue,ut,Mt,xe)}var Kt=K[ue],Qt=we,rn=_e;for(p(K,we,ue),xe(K[_e],Kt)>0&&p(K,we,_e);Qt<rn;){for(p(K,Qt,rn),Qt++,rn--;xe(K[Qt],Kt)<0;)Qt++;for(;xe(K[rn],Kt)>0;)rn--}xe(K[we],Kt)===0?p(K,we,rn):p(K,++rn,_e),rn<=ue&&(we=rn+1),ue<=rn&&(_e=rn-1)}})(Oe,ze,Ke||0,vt||Oe.length-1,rt||v)}function p(Oe,ze,Ke){var vt=Oe[ze];Oe[ze]=Oe[Ke],Oe[Ke]=vt}function v(Oe,ze){return Oe<ze?-1:Oe>ze?1:0}var k=function(Oe){Oe===void 0&&(Oe=9),this._maxEntries=Math.max(4,Oe),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function B(Oe,ze,Ke){if(!Ke)return ze.indexOf(Oe);for(var vt=0;vt<ze.length;vt++)if(Ke(Oe,ze[vt]))return vt;return-1}function T(Oe,ze){V(Oe,0,Oe.children.length,ze,Oe)}function V(Oe,ze,Ke,vt,rt){rt||(rt=qt(null)),rt.minX=1/0,rt.minY=1/0,rt.maxX=-1/0,rt.maxY=-1/0;for(var pt=ze;pt<Ke;pt++){var K=Oe.children[pt];oe(rt,Oe.leaf?vt(K):K)}return rt}function oe(Oe,ze){return Oe.minX=Math.min(Oe.minX,ze.minX),Oe.minY=Math.min(Oe.minY,ze.minY),Oe.maxX=Math.max(Oe.maxX,ze.maxX),Oe.maxY=Math.max(Oe.maxY,ze.maxY),Oe}function Re(Oe,ze){return Oe.minX-ze.minX}function Me(Oe,ze){return Oe.minY-ze.minY}function Qe(Oe){return(Oe.maxX-Oe.minX)*(Oe.maxY-Oe.minY)}function dt(Oe){return Oe.maxX-Oe.minX+(Oe.maxY-Oe.minY)}function Et(Oe,ze){return Oe.minX<=ze.minX&&Oe.minY<=ze.minY&&ze.maxX<=Oe.maxX&&ze.maxY<=Oe.maxY}function jt(Oe,ze){return ze.minX<=Oe.maxX&&ze.minY<=Oe.maxY&&ze.maxX>=Oe.minX&&ze.maxY>=Oe.minY}function qt(Oe){return{children:Oe,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function mn(Oe,ze,Ke,vt,rt){for(var pt=[ze,Ke];pt.length;)if(!((Ke=pt.pop())-(ze=pt.pop())<=vt)){var K=ze+Math.ceil((Ke-ze)/vt/2)*vt;h(Oe,K,ze,Ke,rt),pt.push(ze,K,K,Ke)}}return k.prototype.all=function(){return this._all(this.data,[])},k.prototype.search=function(Oe){var ze=this.data,Ke=[];if(!jt(Oe,ze))return Ke;for(var vt=this.toBBox,rt=[];ze;){for(var pt=0;pt<ze.children.length;pt++){var K=ze.children[pt],ue=ze.leaf?vt(K):K;jt(Oe,ue)&&(ze.leaf?Ke.push(K):Et(Oe,ue)?this._all(K,Ke):rt.push(K))}ze=rt.pop()}return Ke},k.prototype.collides=function(Oe){var ze=this.data;if(!jt(Oe,ze))return!1;for(var Ke=[];ze;){for(var vt=0;vt<ze.children.length;vt++){var rt=ze.children[vt],pt=ze.leaf?this.toBBox(rt):rt;if(jt(Oe,pt)){if(ze.leaf||Et(Oe,pt))return!0;Ke.push(rt)}}ze=Ke.pop()}return!1},k.prototype.load=function(Oe){if(!Oe||!Oe.length)return this;if(Oe.length<this._minEntries){for(var ze=0;ze<Oe.length;ze++)this.insert(Oe[ze]);return this}var Ke=this._build(Oe.slice(),0,Oe.length-1,0);if(this.data.children.length)if(this.data.height===Ke.height)this._splitRoot(this.data,Ke);else{if(this.data.height<Ke.height){var vt=this.data;this.data=Ke,Ke=vt}this._insert(Ke,this.data.height-Ke.height-1,!0)}else this.data=Ke;return this},k.prototype.insert=function(Oe){return Oe&&this._insert(Oe,this.data.height-1),this},k.prototype.clear=function(){return this.data=qt([]),this},k.prototype.remove=function(Oe,ze){if(!Oe)return this;for(var Ke,vt,rt,pt=this.data,K=this.toBBox(Oe),ue=[],we=[];pt||ue.length;){if(pt||(pt=ue.pop(),vt=ue[ue.length-1],Ke=we.pop(),rt=!0),pt.leaf){var _e=B(Oe,pt.children,ze);if(_e!==-1)return pt.children.splice(_e,1),ue.push(pt),this._condense(ue),this}rt||pt.leaf||!Et(pt,K)?vt?(Ke++,pt=vt.children[Ke],rt=!1):pt=null:(ue.push(pt),we.push(Ke),Ke=0,vt=pt,pt=pt.children[0])}return this},k.prototype.toBBox=function(Oe){return Oe},k.prototype.compareMinX=function(Oe,ze){return Oe.minX-ze.minX},k.prototype.compareMinY=function(Oe,ze){return Oe.minY-ze.minY},k.prototype.toJSON=function(){return this.data},k.prototype.fromJSON=function(Oe){return this.data=Oe,this},k.prototype._all=function(Oe,ze){for(var Ke=[];Oe;)Oe.leaf?ze.push.apply(ze,Oe.children):Ke.push.apply(Ke,Oe.children),Oe=Ke.pop();return ze},k.prototype._build=function(Oe,ze,Ke,vt){var rt,pt=Ke-ze+1,K=this._maxEntries;if(pt<=K)return T(rt=qt(Oe.slice(ze,Ke+1)),this.toBBox),rt;vt||(vt=Math.ceil(Math.log(pt)/Math.log(K)),K=Math.ceil(pt/Math.pow(K,vt-1))),(rt=qt([])).leaf=!1,rt.height=vt;var ue=Math.ceil(pt/K),we=ue*Math.ceil(Math.sqrt(K));mn(Oe,ze,Ke,we,this.compareMinX);for(var _e=ze;_e<=Ke;_e+=we){var xe=Math.min(_e+we-1,Ke);mn(Oe,_e,xe,ue,this.compareMinY);for(var Le=_e;Le<=xe;Le+=ue){var Ge=Math.min(Le+ue-1,xe);rt.children.push(this._build(Oe,Le,Ge,vt-1))}}return T(rt,this.toBBox),rt},k.prototype._chooseSubtree=function(Oe,ze,Ke,vt){for(;vt.push(ze),!ze.leaf&&vt.length-1!==Ke;){for(var rt=1/0,pt=1/0,K=void 0,ue=0;ue<ze.children.length;ue++){var we=ze.children[ue],_e=Qe(we),xe=(Le=Oe,Ge=we,(Math.max(Ge.maxX,Le.maxX)-Math.min(Ge.minX,Le.minX))*(Math.max(Ge.maxY,Le.maxY)-Math.min(Ge.minY,Le.minY))-_e);xe<pt?(pt=xe,rt=_e<rt?_e:rt,K=we):xe===pt&&_e<rt&&(rt=_e,K=we)}ze=K||ze.children[0]}var Le,Ge;return ze},k.prototype._insert=function(Oe,ze,Ke){var vt=Ke?Oe:this.toBBox(Oe),rt=[],pt=this._chooseSubtree(vt,this.data,ze,rt);for(pt.children.push(Oe),oe(pt,vt);ze>=0&&rt[ze].children.length>this._maxEntries;)this._split(rt,ze),ze--;this._adjustParentBBoxes(vt,rt,ze)},k.prototype._split=function(Oe,ze){var Ke=Oe[ze],vt=Ke.children.length,rt=this._minEntries;this._chooseSplitAxis(Ke,rt,vt);var pt=this._chooseSplitIndex(Ke,rt,vt),K=qt(Ke.children.splice(pt,Ke.children.length-pt));K.height=Ke.height,K.leaf=Ke.leaf,T(Ke,this.toBBox),T(K,this.toBBox),ze?Oe[ze-1].children.push(K):this._splitRoot(Ke,K)},k.prototype._splitRoot=function(Oe,ze){this.data=qt([Oe,ze]),this.data.height=Oe.height+1,this.data.leaf=!1,T(this.data,this.toBBox)},k.prototype._chooseSplitIndex=function(Oe,ze,Ke){for(var vt,rt,pt,K,ue,we,_e,xe=1/0,Le=1/0,Ge=ze;Ge<=Ke-ze;Ge++){var Ve=V(Oe,0,Ge,this.toBBox),Je=V(Oe,Ge,Ke,this.toBBox),ct=(rt=Ve,pt=Je,K=void 0,ue=void 0,we=void 0,_e=void 0,K=Math.max(rt.minX,pt.minX),ue=Math.max(rt.minY,pt.minY),we=Math.min(rt.maxX,pt.maxX),_e=Math.min(rt.maxY,pt.maxY),Math.max(0,we-K)*Math.max(0,_e-ue)),ut=Qe(Ve)+Qe(Je);ct<xe?(xe=ct,vt=Ge,Le=ut<Le?ut:Le):ct===xe&&ut<Le&&(Le=ut,vt=Ge)}return vt||Ke-ze},k.prototype._chooseSplitAxis=function(Oe,ze,Ke){var vt=Oe.leaf?this.compareMinX:Re,rt=Oe.leaf?this.compareMinY:Me;this._allDistMargin(Oe,ze,Ke,vt)<this._allDistMargin(Oe,ze,Ke,rt)&&Oe.children.sort(vt)},k.prototype._allDistMargin=function(Oe,ze,Ke,vt){Oe.children.sort(vt);for(var rt=this.toBBox,pt=V(Oe,0,ze,rt),K=V(Oe,Ke-ze,Ke,rt),ue=dt(pt)+dt(K),we=ze;we<Ke-ze;we++){var _e=Oe.children[we];oe(pt,Oe.leaf?rt(_e):_e),ue+=dt(pt)}for(var xe=Ke-ze-1;xe>=ze;xe--){var Le=Oe.children[xe];oe(K,Oe.leaf?rt(Le):Le),ue+=dt(K)}return ue},k.prototype._adjustParentBBoxes=function(Oe,ze,Ke){for(var vt=Ke;vt>=0;vt--)oe(ze[vt],Oe)},k.prototype._condense=function(Oe){for(var ze=Oe.length-1,Ke=void 0;ze>=0;ze--)Oe[ze].children.length===0?ze>0?(Ke=Oe[ze-1].children).splice(Ke.indexOf(Oe[ze]),1):this.clear():T(Oe[ze],this.toBBox)},k})}),wn=u(s=>{Object.defineProperty(s,"__esModule",{value:!0}),s.earthRadius=63710088e-1,s.factors={centimeters:s.earthRadius*100,centimetres:s.earthRadius*100,degrees:s.earthRadius/111325,feet:s.earthRadius*3.28084,inches:s.earthRadius*39.37,kilometers:s.earthRadius/1e3,kilometres:s.earthRadius/1e3,meters:s.earthRadius,metres:s.earthRadius,miles:s.earthRadius/1609.344,millimeters:s.earthRadius*1e3,millimetres:s.earthRadius*1e3,nauticalmiles:s.earthRadius/1852,radians:1,yards:s.earthRadius*1.0936},s.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/s.earthRadius,yards:1.0936133},s.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function l(_e,xe,Le){Le===void 0&&(Le={});var Ge={type:"Feature"};return(Le.id===0||Le.id)&&(Ge.id=Le.id),Le.bbox&&(Ge.bbox=Le.bbox),Ge.properties=xe||{},Ge.geometry=_e,Ge}s.feature=l;function h(_e,xe,Le){switch(_e){case"Point":return p(xe).geometry;case"LineString":return T(xe).geometry;case"Polygon":return k(xe).geometry;case"MultiPoint":return Me(xe).geometry;case"MultiLineString":return Re(xe).geometry;case"MultiPolygon":return Qe(xe).geometry;default:throw new Error(_e+" is invalid")}}s.geometry=h;function p(_e,xe,Le){if(Le===void 0&&(Le={}),!_e)throw new Error("coordinates is required");if(!Array.isArray(_e))throw new Error("coordinates must be an Array");if(_e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!pt(_e[0])||!pt(_e[1]))throw new Error("coordinates must contain numbers");var Ge={type:"Point",coordinates:_e};return l(Ge,xe,Le)}s.point=p;function v(_e,xe,Le){return Le===void 0&&(Le={}),oe(_e.map(function(Ge){return p(Ge,xe)}),Le)}s.points=v;function k(_e,xe,Le){Le===void 0&&(Le={});for(var Ge=0,Ve=_e;Ge<Ve.length;Ge++){var Je=Ve[Ge];if(Je.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var ct=0;ct<Je[Je.length-1].length;ct++)if(Je[Je.length-1][ct]!==Je[0][ct])throw new Error("First and last Position are not equivalent.")}var ut={type:"Polygon",coordinates:_e};return l(ut,xe,Le)}s.polygon=k;function B(_e,xe,Le){return Le===void 0&&(Le={}),oe(_e.map(function(Ge){return k(Ge,xe)}),Le)}s.polygons=B;function T(_e,xe,Le){if(Le===void 0&&(Le={}),_e.length<2)throw new Error("coordinates must be an array of two or more positions");var Ge={type:"LineString",coordinates:_e};return l(Ge,xe,Le)}s.lineString=T;function V(_e,xe,Le){return Le===void 0&&(Le={}),oe(_e.map(function(Ge){return T(Ge,xe)}),Le)}s.lineStrings=V;function oe(_e,xe){xe===void 0&&(xe={});var Le={type:"FeatureCollection"};return xe.id&&(Le.id=xe.id),xe.bbox&&(Le.bbox=xe.bbox),Le.features=_e,Le}s.featureCollection=oe;function Re(_e,xe,Le){Le===void 0&&(Le={});var Ge={type:"MultiLineString",coordinates:_e};return l(Ge,xe,Le)}s.multiLineString=Re;function Me(_e,xe,Le){Le===void 0&&(Le={});var Ge={type:"MultiPoint",coordinates:_e};return l(Ge,xe,Le)}s.multiPoint=Me;function Qe(_e,xe,Le){Le===void 0&&(Le={});var Ge={type:"MultiPolygon",coordinates:_e};return l(Ge,xe,Le)}s.multiPolygon=Qe;function dt(_e,xe,Le){Le===void 0&&(Le={});var Ge={type:"GeometryCollection",geometries:_e};return l(Ge,xe,Le)}s.geometryCollection=dt;function Et(_e,xe){if(xe===void 0&&(xe=0),xe&&!(xe>=0))throw new Error("precision must be a positive number");var Le=Math.pow(10,xe||0);return Math.round(_e*Le)/Le}s.round=Et;function jt(_e,xe){xe===void 0&&(xe="kilometers");var Le=s.factors[xe];if(!Le)throw new Error(xe+" units is invalid");return _e*Le}s.radiansToLength=jt;function qt(_e,xe){xe===void 0&&(xe="kilometers");var Le=s.factors[xe];if(!Le)throw new Error(xe+" units is invalid");return _e/Le}s.lengthToRadians=qt;function mn(_e,xe){return ze(qt(_e,xe))}s.lengthToDegrees=mn;function Oe(_e){var xe=_e%360;return xe<0&&(xe+=360),xe}s.bearingToAzimuth=Oe;function ze(_e){var xe=_e%(2*Math.PI);return xe*180/Math.PI}s.radiansToDegrees=ze;function Ke(_e){var xe=_e%360;return xe*Math.PI/180}s.degreesToRadians=Ke;function vt(_e,xe,Le){if(xe===void 0&&(xe="kilometers"),Le===void 0&&(Le="kilometers"),!(_e>=0))throw new Error("length must be a positive number");return jt(qt(_e,xe),Le)}s.convertLength=vt;function rt(_e,xe,Le){if(xe===void 0&&(xe="meters"),Le===void 0&&(Le="kilometers"),!(_e>=0))throw new Error("area must be a positive number");var Ge=s.areaFactors[xe];if(!Ge)throw new Error("invalid original units");var Ve=s.areaFactors[Le];if(!Ve)throw new Error("invalid final units");return _e/Ge*Ve}s.convertArea=rt;function pt(_e){return!isNaN(_e)&&_e!==null&&!Array.isArray(_e)}s.isNumber=pt;function K(_e){return!!_e&&_e.constructor===Object}s.isObject=K;function ue(_e){if(!_e)throw new Error("bbox is required");if(!Array.isArray(_e))throw new Error("bbox must be an Array");if(_e.length!==4&&_e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");_e.forEach(function(xe){if(!pt(xe))throw new Error("bbox must only contain numbers")})}s.validateBBox=ue;function we(_e){if(!_e)throw new Error("id is required");if(["string","number"].indexOf(typeof _e)===-1)throw new Error("id must be a number or a string")}s.validateId=we}),Xs=u(s=>{Object.defineProperty(s,"__esModule",{value:!0});var l=wn();function h(ze,Ke,vt){if(ze!==null)for(var rt,pt,K,ue,we,_e,xe,Le=0,Ge=0,Ve,Je=ze.type,ct=Je==="FeatureCollection",ut=Je==="Feature",Mt=ct?ze.features.length:1,Kt=0;Kt<Mt;Kt++){xe=ct?ze.features[Kt].geometry:ut?ze.geometry:ze,Ve=xe?xe.type==="GeometryCollection":!1,we=Ve?xe.geometries.length:1;for(var Qt=0;Qt<we;Qt++){var rn=0,$n=0;if(ue=Ve?xe.geometries[Qt]:xe,ue!==null){_e=ue.coordinates;var Wn=ue.type;switch(Le=vt&&(Wn==="Polygon"||Wn==="MultiPolygon")?1:0,Wn){case null:break;case"Point":if(Ke(_e,Ge,Kt,rn,$n)===!1)return!1;Ge++,rn++;break;case"LineString":case"MultiPoint":for(rt=0;rt<_e.length;rt++){if(Ke(_e[rt],Ge,Kt,rn,$n)===!1)return!1;Ge++,Wn==="MultiPoint"&&rn++}Wn==="LineString"&&rn++;break;case"Polygon":case"MultiLineString":for(rt=0;rt<_e.length;rt++){for(pt=0;pt<_e[rt].length-Le;pt++){if(Ke(_e[rt][pt],Ge,Kt,rn,$n)===!1)return!1;Ge++}Wn==="MultiLineString"&&rn++,Wn==="Polygon"&&$n++}Wn==="Polygon"&&rn++;break;case"MultiPolygon":for(rt=0;rt<_e.length;rt++){for($n=0,pt=0;pt<_e[rt].length;pt++){for(K=0;K<_e[rt][pt].length-Le;K++){if(Ke(_e[rt][pt][K],Ge,Kt,rn,$n)===!1)return!1;Ge++}$n++}rn++}break;case"GeometryCollection":for(rt=0;rt<ue.geometries.length;rt++)if(h(ue.geometries[rt],Ke,vt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function p(ze,Ke,vt,rt){var pt=vt;return h(ze,function(K,ue,we,_e,xe){ue===0&&vt===void 0?pt=K:pt=Ke(pt,K,ue,we,_e,xe)},rt),pt}function v(ze,Ke){var vt;switch(ze.type){case"FeatureCollection":for(vt=0;vt<ze.features.length&&Ke(ze.features[vt].properties,vt)!==!1;vt++);break;case"Feature":Ke(ze.properties,0);break}}function k(ze,Ke,vt){var rt=vt;return v(ze,function(pt,K){K===0&&vt===void 0?rt=pt:rt=Ke(rt,pt,K)}),rt}function B(ze,Ke){if(ze.type==="Feature")Ke(ze,0);else if(ze.type==="FeatureCollection")for(var vt=0;vt<ze.features.length&&Ke(ze.features[vt],vt)!==!1;vt++);}function T(ze,Ke,vt){var rt=vt;return B(ze,function(pt,K){K===0&&vt===void 0?rt=pt:rt=Ke(rt,pt,K)}),rt}function V(ze){var Ke=[];return h(ze,function(vt){Ke.push(vt)}),Ke}function oe(ze,Ke){var vt,rt,pt,K,ue,we,_e,xe,Le,Ge,Ve=0,Je=ze.type==="FeatureCollection",ct=ze.type==="Feature",ut=Je?ze.features.length:1;for(vt=0;vt<ut;vt++){for(we=Je?ze.features[vt].geometry:ct?ze.geometry:ze,xe=Je?ze.features[vt].properties:ct?ze.properties:{},Le=Je?ze.features[vt].bbox:ct?ze.bbox:void 0,Ge=Je?ze.features[vt].id:ct?ze.id:void 0,_e=we?we.type==="GeometryCollection":!1,ue=_e?we.geometries.length:1,pt=0;pt<ue;pt++){if(K=_e?we.geometries[pt]:we,K===null){if(Ke(null,Ve,xe,Le,Ge)===!1)return!1;continue}switch(K.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(Ke(K,Ve,xe,Le,Ge)===!1)return!1;break}case"GeometryCollection":{for(rt=0;rt<K.geometries.length;rt++)if(Ke(K.geometries[rt],Ve,xe,Le,Ge)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}Ve++}}function Re(ze,Ke,vt){var rt=vt;return oe(ze,function(pt,K,ue,we,_e){K===0&&vt===void 0?rt=pt:rt=Ke(rt,pt,K,ue,we,_e)}),rt}function Me(ze,Ke){oe(ze,function(vt,rt,pt,K,ue){var we=vt===null?null:vt.type;switch(we){case null:case"Point":case"LineString":case"Polygon":return Ke(l.feature(vt,pt,{bbox:K,id:ue}),rt,0)===!1?!1:void 0}var _e;switch(we){case"MultiPoint":_e="Point";break;case"MultiLineString":_e="LineString";break;case"MultiPolygon":_e="Polygon";break}for(var xe=0;xe<vt.coordinates.length;xe++){var Le=vt.coordinates[xe],Ge={type:_e,coordinates:Le};if(Ke(l.feature(Ge,pt),rt,xe)===!1)return!1}})}function Qe(ze,Ke,vt){var rt=vt;return Me(ze,function(pt,K,ue){K===0&&ue===0&&vt===void 0?rt=pt:rt=Ke(rt,pt,K,ue)}),rt}function dt(ze,Ke){Me(ze,function(vt,rt,pt){var K=0;if(vt.geometry){var ue=vt.geometry.type;if(!(ue==="Point"||ue==="MultiPoint")){var we,_e=0,xe=0,Le=0;if(h(vt,function(Ge,Ve,Je,ct,ut){if(we===void 0||rt>_e||ct>xe||ut>Le){we=Ge,_e=rt,xe=ct,Le=ut,K=0;return}var Mt=l.lineString([we,Ge],vt.properties);if(Ke(Mt,rt,pt,ut,K)===!1)return!1;K++,we=Ge})===!1)return!1}}})}function Et(ze,Ke,vt){var rt=vt,pt=!1;return dt(ze,function(K,ue,we,_e,xe){pt===!1&&vt===void 0?rt=K:rt=Ke(rt,K,ue,we,_e,xe),pt=!0}),rt}function jt(ze,Ke){if(!ze)throw new Error("geojson is required");Me(ze,function(vt,rt,pt){if(vt.geometry!==null){var K=vt.geometry.type,ue=vt.geometry.coordinates;switch(K){case"LineString":if(Ke(vt,rt,pt,0,0)===!1)return!1;break;case"Polygon":for(var we=0;we<ue.length;we++)if(Ke(l.lineString(ue[we],vt.properties),rt,pt,we)===!1)return!1;break}}})}function qt(ze,Ke,vt){var rt=vt;return jt(ze,function(pt,K,ue,we){K===0&&vt===void 0?rt=pt:rt=Ke(rt,pt,K,ue,we)}),rt}function mn(ze,Ke){if(Ke=Ke||{},!l.isObject(Ke))throw new Error("options is invalid");var vt=Ke.featureIndex||0,rt=Ke.multiFeatureIndex||0,pt=Ke.geometryIndex||0,K=Ke.segmentIndex||0,ue=Ke.properties,we;switch(ze.type){case"FeatureCollection":vt<0&&(vt=ze.features.length+vt),ue=ue||ze.features[vt].properties,we=ze.features[vt].geometry;break;case"Feature":ue=ue||ze.properties,we=ze.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":we=ze;break;default:throw new Error("geojson is invalid")}if(we===null)return null;var _e=we.coordinates;switch(we.type){case"Point":case"MultiPoint":return null;case"LineString":return K<0&&(K=_e.length+K-1),l.lineString([_e[K],_e[K+1]],ue,Ke);case"Polygon":return pt<0&&(pt=_e.length+pt),K<0&&(K=_e[pt].length+K-1),l.lineString([_e[pt][K],_e[pt][K+1]],ue,Ke);case"MultiLineString":return rt<0&&(rt=_e.length+rt),K<0&&(K=_e[rt].length+K-1),l.lineString([_e[rt][K],_e[rt][K+1]],ue,Ke);case"MultiPolygon":return rt<0&&(rt=_e.length+rt),pt<0&&(pt=_e[rt].length+pt),K<0&&(K=_e[rt][pt].length-K-1),l.lineString([_e[rt][pt][K],_e[rt][pt][K+1]],ue,Ke)}throw new Error("geojson is invalid")}function Oe(ze,Ke){if(Ke=Ke||{},!l.isObject(Ke))throw new Error("options is invalid");var vt=Ke.featureIndex||0,rt=Ke.multiFeatureIndex||0,pt=Ke.geometryIndex||0,K=Ke.coordIndex||0,ue=Ke.properties,we;switch(ze.type){case"FeatureCollection":vt<0&&(vt=ze.features.length+vt),ue=ue||ze.features[vt].properties,we=ze.features[vt].geometry;break;case"Feature":ue=ue||ze.properties,we=ze.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":we=ze;break;default:throw new Error("geojson is invalid")}if(we===null)return null;var _e=we.coordinates;switch(we.type){case"Point":return l.point(_e,ue,Ke);case"MultiPoint":return rt<0&&(rt=_e.length+rt),l.point(_e[rt],ue,Ke);case"LineString":return K<0&&(K=_e.length+K),l.point(_e[K],ue,Ke);case"Polygon":return pt<0&&(pt=_e.length+pt),K<0&&(K=_e[pt].length+K),l.point(_e[pt][K],ue,Ke);case"MultiLineString":return rt<0&&(rt=_e.length+rt),K<0&&(K=_e[rt].length+K),l.point(_e[rt][K],ue,Ke);case"MultiPolygon":return rt<0&&(rt=_e.length+rt),pt<0&&(pt=_e[rt].length+pt),K<0&&(K=_e[rt][pt].length-K),l.point(_e[rt][pt][K],ue,Ke)}throw new Error("geojson is invalid")}s.coordAll=V,s.coordEach=h,s.coordReduce=p,s.featureEach=B,s.featureReduce=T,s.findPoint=Oe,s.findSegment=mn,s.flattenEach=Me,s.flattenReduce=Qe,s.geomEach=oe,s.geomReduce=Re,s.lineEach=jt,s.lineReduce=qt,s.propEach=v,s.propReduce=k,s.segmentEach=dt,s.segmentReduce=Et}),Os=u(s=>{Object.defineProperty(s,"__esModule",{value:!0});var l=Xs();function h(p){var v=[1/0,1/0,-1/0,-1/0];return l.coordEach(p,function(k){v[0]>k[0]&&(v[0]=k[0]),v[1]>k[1]&&(v[1]=k[1]),v[2]<k[0]&&(v[2]=k[0]),v[3]<k[1]&&(v[3]=k[1])}),v}h.default=h,s.default=h}),_s=u((s,l)=>{var h=Fn(),p=wn(),v=Xs(),k=Os().default,B=v.featureEach;v.coordEach,p.polygon;var T=p.featureCollection;function V(oe){var Re=new h(oe);return Re.insert=function(Me){if(Me.type!=="Feature")throw new Error("invalid feature");return Me.bbox=Me.bbox?Me.bbox:k(Me),h.prototype.insert.call(this,Me)},Re.load=function(Me){var Qe=[];return Array.isArray(Me)?Me.forEach(function(dt){if(dt.type!=="Feature")throw new Error("invalid features");dt.bbox=dt.bbox?dt.bbox:k(dt),Qe.push(dt)}):B(Me,function(dt){if(dt.type!=="Feature")throw new Error("invalid features");dt.bbox=dt.bbox?dt.bbox:k(dt),Qe.push(dt)}),h.prototype.load.call(this,Qe)},Re.remove=function(Me,Qe){if(Me.type!=="Feature")throw new Error("invalid feature");return Me.bbox=Me.bbox?Me.bbox:k(Me),h.prototype.remove.call(this,Me,Qe)},Re.clear=function(){return h.prototype.clear.call(this)},Re.search=function(Me){var Qe=h.prototype.search.call(this,this.toBBox(Me));return T(Qe)},Re.collides=function(Me){return h.prototype.collides.call(this,this.toBBox(Me))},Re.all=function(){var Me=h.prototype.all.call(this);return T(Me)},Re.toJSON=function(){return h.prototype.toJSON.call(this)},Re.fromJSON=function(Me){return h.prototype.fromJSON.call(this,Me)},Re.toBBox=function(Me){var Qe;if(Me.bbox)Qe=Me.bbox;else if(Array.isArray(Me)&&Me.length===4)Qe=Me;else if(Array.isArray(Me)&&Me.length===6)Qe=[Me[0],Me[1],Me[3],Me[4]];else if(Me.type==="Feature")Qe=k(Me);else if(Me.type==="FeatureCollection")Qe=k(Me);else throw new Error("invalid geojson");return{minX:Qe[0],minY:Qe[1],maxX:Qe[2],maxY:Qe[3]}},Re}l.exports=V,l.exports.default=V});Array.prototype.findIndex=Array.prototype.findIndex||function(s){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof s!="function")throw new TypeError("callback must be a function");for(var l=Object(this),h=l.length>>>0,p=arguments[1],v=0;v<h;v++)if(s.call(p,l[v],v,l))return v;return-1},Array.prototype.find=Array.prototype.find||function(s){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof s!="function")throw new TypeError("callback must be a function");for(var l=Object(this),h=l.length>>>0,p=arguments[1],v=0;v<h;v++){var k=l[v];if(s.call(p,k,v,l))return k}},typeof Object.assign!="function"&&(Object.assign=function(s){if(s==null)throw new TypeError("Cannot convert undefined or null to object");s=Object(s);for(var l=1;l<arguments.length;l++){var h=arguments[l];if(h!=null)for(var p in h)Object.prototype.hasOwnProperty.call(h,p)&&(s[p]=h[p])}return s}),function(s){s.forEach(function(l){l.hasOwnProperty("remove")||Object.defineProperty(l,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(s,l){if(this==null)throw new TypeError('"this" is null or not defined');var h=Object(this),p=h.length>>>0;if(p===0)return!1;var v=l|0,k=Math.max(v>=0?v:p-Math.abs(v),0);function B(T,V){return T===V||typeof T=="number"&&typeof V=="number"&&isNaN(T)&&isNaN(V)}for(;k<p;){if(B(h[k],s))return!0;k++}return!1}});var Po={version:"2.18.3"},Cn=m(Ds()),zn={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},Qs={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex lschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer lschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Lnge",segmentLength:"Segment Lnge",area:"Flche",radius:"Radius",perimeter:"Umfang",height:"Hhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},Fi={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},Zi={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},Ya={tooltips:{placeMarker:"Adaug un punct",firstVertex:"Apas aici pentru a aduga primul Vertex",continueLine:"Apas aici pentru a continua desenul",finishLine:"Apas pe orice obiect pentru a finisa desenul",finishPoly:"Apas pe primul obiect pentru a finisa",finishRect:"Apas pentru a finisa",startCircle:"Apas pentru a desena un cerc",finishCircle:"Apas pentru a finisa un cerc",placeCircleMarker:"Adaug un punct"},actions:{finish:"Termin",cancel:"Anuleaz",removeLastVertex:"terge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaug o bulin",drawPolyButton:"Deseneaz un poligon",drawLineButton:"Deseneaz o linie",drawCircleButton:"Deseneaz un cerc",drawRectButton:"Deseneaz un dreptunghi",editButton:"Editeaz straturile",dragButton:"Mut straturile",cutButton:"Taie straturile",deleteButton:"terge straturile",drawCircleMarkerButton:"Deseneaz marcatorul cercului",snappingButton:"Fixai marcatorul glisat pe alte straturi i vrfuri",pinningButton:"Fixai vrfurile partajate mpreun",rotateButton:"Rotii stratul"}},Yo={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:"     ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" "}},ys={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vrtice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del crculo",finishCircle:"Presiona para finalizar el crculo",placeCircleMarker:"Presiona para colocar un marcador de crculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar ltimo vrtice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polgono",drawLineButton:"Dibujar Lnea",drawCircleButton:"Dibujar Crculo",drawRectButton:"Dibujar Rectngulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Crculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vrtices",pinningButton:"Fijar juntos los vrtices compartidos",rotateButton:"Rotar capa"}},di={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beindigen",finishPoly:"Klik op het eerst punt om te beindigen",finishRect:"Klik om te beindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},bs={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer  dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"diter des calques",dragButton:"Dplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"pingler ensemble les sommets partags",rotateButton:"Tourner des calques"}},So={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},Rs={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},La={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vrtice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do crculo",finishCircle:"Clique para finalizar o crculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover ltimo vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},eo={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vrtice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do crculo",finishCircle:"Clique para terminar o crculo",placeCircleMarker:"Clique para colocar marcador de crculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover ltimo Vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},Ca={tooltips:{placeMarker:"Kliknij, aby umieci znacznik",firstVertex:"Kliknij, aby umieci pierwszy wierzchoek",continueLine:"Kliknij, aby kontynuowa rysowanie",finishLine:"Kliknij dowolny istniejcy znacznik, aby zakoczy",finishPoly:"Kliknij pierwszy znacznik, aby zakoczy",finishRect:"Kliknij, aby zakoczy",startCircle:"Kliknij, aby umieci rodek okrgu",finishCircle:"Kliknij, aby zakoczy okrg",placeCircleMarker:"Kliknij, aby umieci znacznik okrgu",placeText:"Kliknij, aby umieci tekst"},actions:{finish:"Zakocz",cancel:"Anuluj",removeLastVertex:"Usu ostatni wierzchoek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokt",drawLineButton:"Rysuj lini",drawCircleButton:"Rysuj okrg",drawRectButton:"Rysuj prostokt",editButton:"Edytuj warstwy",dragButton:"Przecignij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usu warstwy",drawCircleMarkerButton:"Rysuj znacznik okrgy",snappingButton:"Przycignij przenoszony znacznik do innych warstw i wierzchokw",pinningButton:"Przypnij wsplne wierzchoki razem",rotateButton:"Obr warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne ledzenie linii"},measurements:{totalLength:"Dugo",segmentLength:"Dugo odcinka",area:"Obszar",radius:"Promie",perimeter:"Obwd",height:"Wysoko",width:"Szeroko",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},Qr={tooltips:{placeMarker:"Klicka fr att placera markr",firstVertex:"Klicka fr att placera frsta hrnet",continueLine:"Klicka fr att fortstta rita",finishLine:"Klicka p en existerande punkt fr att slutfra",finishPoly:"Klicka p den frsta punkten fr att slutfra",finishRect:"Klicka fr att slutfra",startCircle:"Klicka fr att placera cirkelns centrum",finishCircle:"Klicka fr att slutfra cirkeln",placeCircleMarker:"Klicka fr att placera cirkelmarkr"},actions:{finish:"Slutfr",cancel:"Avbryt",removeLastVertex:"Ta bort sista hrnet"},buttonTitles:{drawMarkerButton:"Rita Markr",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkr",snappingButton:"Snpp dra markren till andra lager och hrn",pinningButton:"Fst delade hrn tillsammans",rotateButton:"Rotera lagret"}},Is={tooltips:{placeMarker:"     ",firstVertex:"       ",continueLine:"      ",finishLine:"        ",finishPoly:"       ",finishRect:"    ",startCircle:"      ",finishCircle:"      ",placeCircleMarker:"      "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"        ",pinningButton:"   ",rotateButton:"  "}},to={tooltips:{placeMarker:"Kattintson a jell elhelyezshez",firstVertex:"Kattintson az els pont elhelyezshez",continueLine:"Kattintson a kvetkez pont elhelyezshez",finishLine:"A befejezshez kattintson egy meglv pontra",finishPoly:"A befejezshez kattintson az els pontra",finishRect:"Kattintson a befejezshez",startCircle:"Kattintson a kr kzppontjnak elhelyezshez",finishCircle:"Kattintson a kr befejezshez",placeCircleMarker:"Kattintson a krjell elhelyezshez"},actions:{finish:"Befejezs",cancel:"Mgse",removeLastVertex:"Utols pont eltvoltsa"},buttonTitles:{drawMarkerButton:"Jell rajzolsa",drawPolyButton:"Poligon rajzolsa",drawLineButton:"Vonal rajzolsa",drawCircleButton:"Kr rajzolsa",drawRectButton:"Ngyzet rajzolsa",editButton:"Elemek szerkesztse",dragButton:"Elemek mozgatsa",cutButton:"Elemek vgsa",deleteButton:"Elemek trlse",drawCircleMarkerButton:"Kr jell rajzolsa",snappingButton:"Kapcsolja a jelltt msik elemhez vagy ponthoz",pinningButton:"Kzs pontok sszektse",rotateButton:"Flia elforgatsa"}},Xo={tooltips:{placeMarker:"Tryk for at placere en markr",firstVertex:"Tryk for at placere det frste punkt",continueLine:"Tryk for at fortstte linjen",finishLine:"Tryk p et eksisterende punkt for at afslutte",finishPoly:"Tryk p det frste punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkr"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markr",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Trk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkr",snappingButton:"Fastgr trukket markr til andre elementer",pinningButton:"Sammenlg delte elementer",rotateButton:"Roter laget"}},Si={tooltips:{placeMarker:"Klikk for  plassere punkt",firstVertex:"Klikk for  plassere frste punkt",continueLine:"Klikk for  tegne videre",finishLine:"Klikk p et eksisterende punkt for  fullfre",finishPoly:"Klikk frste punkt for  fullfre",finishRect:"Klikk for  fullfre",startCircle:"Klikk for  sette sirkel midtpunkt",finishCircle:"Klikk for  fullfre sirkel",placeCircleMarker:"Klikk for  plassere sirkel",placeText:"Klikk for  plassere tekst"},actions:{finish:"Fullfr",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotr objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalr objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Omrde",radius:"Radius",perimeter:"Omriss",height:"Hyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkr"}},Xa={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"   ",finishLine:"      ",finishPoly:"     ",finishRect:"  ",startCircle:"    ",finishCircle:"    ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"      ",rotateButton:" ",drawTextButton:" ",scaleButton:"",autoTracingButton:" "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},Qo={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:" -    ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"'   ",rotateButton:" "}},yn={tooltips:{placeMarker:"areti yerletirmek iin tklayn",firstVertex:"lk tepe noktasn yerletirmek iin tklayn",continueLine:"izime devam etmek iin tklayn",finishLine:"Bitirmek iin mevcut herhangi bir iaretiyi tklayn",finishPoly:"Bitirmek iin ilk iaretiyi tklayn",finishRect:"Bitirmek iin tklayn",startCircle:"Daire merkezine yerletirmek iin tklayn",finishCircle:"Daireyi bitirmek iin tklayn",placeCircleMarker:"Daire iaretisi yerletirmek iin tklayn"},actions:{finish:"Bitir",cancel:"ptal",removeLastVertex:"Son keyi kaldr"},buttonTitles:{drawMarkerButton:"izim aretisi",drawPolyButton:"okgenler iz",drawLineButton:"oklu izgi iz",drawCircleButton:"ember iz",drawRectButton:"Dikdrtgen iz",editButton:"Katmanlar dzenle",dragButton:"Katmanlar srkle",cutButton:"Katmanlar kes",deleteButton:"Katmanlar kaldr",drawCircleMarkerButton:"Daire iaretisi iz",snappingButton:"Srklenen iaretiyi dier katmanlara ve kelere yaptr",pinningButton:"Paylalan keleri birbirine sabitle",rotateButton:"Katman dndr"}},xn={tooltips:{placeMarker:"Kliknutm vytvote znaku",firstVertex:"Kliknutm vytvote prvn objekt",continueLine:"Kliknutm pokraujte v kreslen",finishLine:"Kliknut na libovolnou existujc znaku pro dokonen",finishPoly:"Vyberte prvn bod pro dokonen",finishRect:"Kliknte pro dokonen",startCircle:"Kliknutm pidejte sted kruhu",finishCircle:",   ",placeCircleMarker:"Kliknutm nastavte polomr"},actions:{finish:"Dokonit",cancel:"Zruit",removeLastVertex:"Zruit posledn akci"},buttonTitles:{drawMarkerButton:"Pidat znaku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit kivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdlnk",editButton:"Upravit vrstvu",dragButton:"Peneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Pidat kruhovou znaku",snappingButton:"Navzat tanou znaku k dalm vrstvm a vrcholm",pinningButton:"Spojit spolen body dohromady",rotateButton:"Otote vrstvu"}},Nr={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:"",placeText:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:"",drawTextButton:""}},On={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtmist",finishLine:"Klikkaa olemassa olevaa merkki lopettaaksesi",finishPoly:"Klikkaa ensimmist merkki lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrn keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrn",placeCircleMarker:"Klikkaa asettaaksesi ympyrmerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirr merkkej",drawPolyButton:"Piirr monikulmioita",drawLineButton:"Piirr viivoja",drawCircleButton:"Piirr ympyr",drawRectButton:"Piirr neliskulmioita",editButton:"Muokkaa",dragButton:"Siirr",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirr ympyrmerkki",snappingButton:"Kiinnit siirrettv merkki toisiin muotoihin",pinningButton:"Kiinnit jaetut muodot yhteen",rotateButton:"Knn",drawTextButton:"Piirr teksti"}},ka={tooltips:{placeMarker:"  ",firstVertex:"   ",continueLine:"  ",finishLine:"   ",finishPoly:"   ",finishRect:" ",startCircle:"    ",finishCircle:"  ",placeCircleMarker:"   ",placeText:"  "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" ",drawTextButton:" "}},ea={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"    ",finishLine:"    ",finishPoly:"    ",finishRect:"  ",startCircle:"    ",finishCircle:"   ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:" ",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:"  ",cutButton:"  ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"     ",pinningButton:"   ",rotateButton:" ",drawTextButton:" ",scaleButton:"  ",autoTracingButton:"  "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},no=eo,Dr={en:zn,de:Qs,it:Fi,id:Zi,ro:Ya,ru:Yo,es:ys,nl:di,fr:bs,pt:no,pt_br:La,pt_pt:eo,zh:So,zh_tw:Rs,pl:Ca,sv:Qr,el:Is,hu:to,da:Xo,no:Si,fa:Xa,ua:Qo,tr:yn,cz:xn,ja:Nr,fi:On,ko:ka,ky:ea},Fs={_globalEditModeEnabled:!1,enableGlobalEditMode(s){let l={...s};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(h=>{this._isRelevantForEdit(h)&&h.pm.enable(l)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(s=>{s.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(s=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(s)},handleLayerAdditionInGlobalEditMode(){let s=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let l in s){let h=s[l];this._isRelevantForEdit(h)&&h.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:s}){this._addedLayersEdit[L.stamp(s)]=s},_isRelevantForEdit(s){return s.pm&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.allowEditing}},Pa=Fs,Eo={_globalDragModeEnabled:!1,enableGlobalDragMode(){let s=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},s.forEach(l=>{this._isRelevantForDrag(l)&&l.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let s=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,s.forEach(l=>{l.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let s=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let l in s){let h=s[l];this._isRelevantForDrag(h)&&h.pm.enableLayerDrag()}},_layerAddedDrag({layer:s}){this._addedLayersDrag[L.stamp(s)]=s},_isRelevantForDrag(s){return s.pm&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.draggable}},vi=Eo,Pr={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(s=>{this._isRelevantForRemoval(s)&&(s.pm.enabled()&&s.pm.disable(),s.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(s=>{s.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(s){let l=s.target;this._isRelevantForRemoval(l)&&!l.pm.dragging()&&(l.removeFrom(this.map.pm._getContainingLayer()),l.remove(),l instanceof L.LayerGroup?(this._fireRemoveLayerGroup(l),this._fireRemoveLayerGroup(this.map,l)):(l.pm._fireRemove(l),l.pm._fireRemove(this.map,l)))},_isRelevantForRemoval(s){return s.pm&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let s=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let l in s){let h=s[l];this._isRelevantForRemoval(h)&&(h.pm.enabled()&&h.pm.disable(),h.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:s}){this._addedLayersRemoval[L.stamp(s)]=s}},js=Pr,Qa={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(s=>s instanceof L.Polyline).forEach(s=>{this._isRelevantForRotate(s)&&s.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(s=>s instanceof L.Polyline).forEach(s=>{s.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(s){return s.pm&&s instanceof L.Polyline&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let s=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let l in s){let h=s[l];this._isRelevantForRemoval(h)&&h.pm.enableRotate()}},_layerAddedRotate({layer:s}){this._addedLayersRotate[L.stamp(s)]=s}},Ao=Qa,ta=m(Ds()),io={_fireDrawStart(s="Draw",l={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},s,l)},_fireDrawEnd(s="Draw",l={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},s,l)},_fireCreate(s,l="Draw",h={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:s,layer:s},l,h)},_fireCenterPlaced(s="Draw",l={}){let h=s==="Draw"?this._layer:void 0,p=s!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:h,layer:p,latlng:this._layer.getLatLng()},s,l)},_fireCut(s,l,h,p="Draw",v={}){this.__fire(s,"pm:cut",{shape:this._shape,layer:l,originalLayer:h},p,v)},_fireEdit(s=this._layer,l="Edit",h={}){this.__fire(s,"pm:edit",{layer:this._layer,shape:this.getShape()},l,h)},_fireEnable(s="Edit",l={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},s,l)},_fireDisable(s="Edit",l={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},s,l)},_fireUpdate(s="Edit",l={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},s,l)},_fireMarkerDragStart(s,l=void 0,h="Edit",p={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:s,shape:this.getShape(),indexPath:l},h,p)},_fireMarkerDrag(s,l=void 0,h="Edit",p={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:s,shape:this.getShape(),indexPath:l},h,p)},_fireMarkerDragEnd(s,l=void 0,h=void 0,p="Edit",v={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:s,shape:this.getShape(),indexPath:l,intersectionReset:h},p,v)},_fireDragStart(s="Edit",l={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},s,l)},_fireDrag(s,l="Edit",h={}){this.__fire(this._layer,"pm:drag",{...s,shape:this.getShape()},l,h)},_fireDragEnd(s="Edit",l={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},s,l)},_fireDragEnable(s="Edit",l={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},s,l)},_fireDragDisable(s="Edit",l={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},s,l)},_fireRemove(s,l=s,h="Edit",p={}){this.__fire(s,"pm:remove",{layer:l,shape:this.getShape()},h,p)},_fireVertexAdded(s,l,h,p="Edit",v={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:s,indexPath:l,latlng:h,shape:this.getShape()},p,v)},_fireVertexRemoved(s,l,h="Edit",p={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:s,indexPath:l,shape:this.getShape()},h,p)},_fireVertexClick(s,l,h="Edit",p={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:s,indexPath:l,shape:this.getShape()},h,p)},_fireIntersect(s,l=this._layer,h="Edit",p={}){this.__fire(l,"pm:intersect",{layer:this._layer,intersection:s,shape:this.getShape()},h,p)},_fireLayerReset(s,l,h="Edit",p={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:s,indexPath:l,shape:this.getShape()},h,p)},_fireChange(s,l="Edit",h={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:s,shape:this.getShape()},l,h)},_fireTextChange(s,l="Edit",h={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:s,shape:this.getShape()},l,h)},_fireTextFocus(s="Edit",l={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},s,l)},_fireTextBlur(s="Edit",l={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},s,l)},_fireSnapDrag(s,l,h="Snapping",p={}){this.__fire(s,"pm:snapdrag",l,h,p)},_fireSnap(s,l,h="Snapping",p={}){this.__fire(s,"pm:snap",l,h,p)},_fireUnsnap(s,l,h="Snapping",p={}){this.__fire(s,"pm:unsnap",l,h,p)},_fireRotationEnable(s,l,h="Rotation",p={}){this.__fire(s,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},h,p)},_fireRotationDisable(s,l="Rotation",h={}){this.__fire(s,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},l,h)},_fireRotationStart(s,l,h="Rotation",p={}){this.__fire(s,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:l},h,p)},_fireRotation(s,l,h,p=this._rotationLayer,v="Rotation",k={}){this.__fire(s,"pm:rotate",{layer:p,helpLayer:this._layer,startAngle:this._startAngle,angle:p.pm.getAngle(),angleDiff:l,oldLatLngs:h,newLatLngs:p.getLatLngs()},v,k)},_fireRotationEnd(s,l,h,p="Rotation",v={}){this.__fire(s,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:l,angle:this._rotationLayer.pm.getAngle(),originLatLngs:h,newLatLngs:this._rotationLayer.getLatLngs()},p,v)},_fireActionClick(s,l,h,p="Toolbar",v={}){this.__fire(this._map,"pm:actionclick",{text:s.text,action:s,btnName:l,button:h},p,v)},_fireButtonClick(s,l,h="Toolbar",p={}){this.__fire(this._map,"pm:buttonclick",{btnName:s,button:l},h,p)},_fireLangChange(s,l,h,p,v="Global",k={}){this.__fire(this.map,"pm:langchange",{oldLang:s,activeLang:l,fallback:h,translations:p},v,k)},_fireGlobalDragModeToggled(s,l="Global",h={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:s,map:this.map},l,h)},_fireGlobalEditModeToggled(s,l="Global",h={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:s,map:this.map},l,h)},_fireGlobalRemovalModeToggled(s,l="Global",h={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:s,map:this.map},l,h)},_fireGlobalCutModeToggled(s="Global",l={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},s,l)},_fireGlobalDrawModeToggled(s="Global",l={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},s,l)},_fireGlobalRotateModeToggled(s="Global",l={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},s,l)},_fireRemoveLayerGroup(s,l=s,h="Edit",p={}){this.__fire(s,"pm:remove",{layer:l,shape:void 0},h,p)},_fireKeyeventEvent(s,l,h,p="Global",v={}){this.__fire(this.map,"pm:keyevent",{event:s,eventType:l,focusOn:h},p,v)},__fire(s,l,h,p,v={}){h=(0,ta.default)(h,v,{source:p}),L.PM.Utils._fireEvent(s,l,h)}},Mo=io,Sa=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(s){this.map=s,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),s.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(s){let l="document";this.map.getContainer().contains(s.target)&&(l="map");let h={event:s,eventType:s.type,focusOn:l};this._lastEvents[s.type]=h,this._lastEvents.current=h,this.map.pm._fireKeyeventEvent(s,s.type,l)},_onBlur(s){s.altKey=!1;let l={event:s,eventType:s.type,focusOn:"document"};this._lastEvents[s.type]=l,this._lastEvents.current=l},getLastKeyEvent(s="current"){return this._lastEvents[s]},isShiftKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.shiftKey},isAltKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.altKey},isCtrlKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.ctrlKey},isMetaKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.metaKey},getPressedKey(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.key}}),Bn=Sa,Ea=m(kr());function un(s){let l=L.PM.activeLang;return(0,Ea.default)(Dr[l],s)||(0,Ea.default)(Dr.en,s)||s}function nr(s){for(let l=0;l<s.length;l+=1){let h=s[l];if(Array.isArray(h)){if(nr(h))return!0}else if(h!=null&&h!=="")return!0}return!1}function Bo(s){return s.reduce((l,h)=>{if(h.length!==0){let p=Array.isArray(h)?Bo(h):h;Array.isArray(p)?p.length!==0&&l.push(p):l.push(p)}return l},[])}function ro(s,l,h){let p={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:v,b:k,f:B}=p,T=s.lng,V=s.lat,oe=h,Re=Math.PI,Me=l*Re/180,Qe=Math.sin(Me),dt=Math.cos(Me),Et=(1-B)*Math.tan(V*Re/180),jt=1/Math.sqrt(1+Et*Et),qt=Et*jt,mn=Math.atan2(Et,dt),Oe=jt*Qe,ze=1-Oe*Oe,Ke=ze*(v*v-k*k)/(k*k),vt=1+Ke/16384*(4096+Ke*(-768+Ke*(320-175*Ke))),rt=Ke/1024*(256+Ke*(-128+Ke*(74-47*Ke))),pt=oe/(k*vt),K=2*Math.PI,ue,we,_e;for(;Math.abs(pt-K)>1e-12;){ue=Math.cos(2*mn+pt),we=Math.sin(pt),_e=Math.cos(pt);let Mt=rt*we*(ue+rt/4*(_e*(-1+2*ue*ue)-rt/6*ue*(-3+4*we*we)*(-3+4*ue*ue)));K=pt,pt=oe/(k*vt)+Mt}let xe=qt*we-jt*_e*dt,Le=Math.atan2(qt*_e+jt*we*dt,(1-B)*Math.sqrt(Oe*Oe+xe*xe)),Ge=Math.atan2(we*Qe,jt*_e-qt*we*dt),Ve=B/16*ze*(4+B*(4-3*ze)),Je=Ge-(1-Ve)*B*Oe*(pt+Ve*we*(ue+Ve*_e*(-1+2*ue*ue))),ct=T+Je*180/Re,ut=Le*180/Re;return L.latLng(ct,ut)}function fr(s,l,h,p,v=!0){let k,B,T,V=[];for(let oe=0;oe<h;oe+=1){if(v)k=oe*360/h+p,B=ro(s,k,l),T=L.latLng(B.lng,B.lat);else{let Re=s.lat+Math.cos(2*oe*Math.PI/h)*l,Me=s.lng+Math.sin(2*oe*Math.PI/h)*l;T=L.latLng(Re,Me)}V.push(T)}return V}function Aa(s,l,h){l=(l+360)%360;let p=Math.PI/180,v=180/Math.PI,{R:k}=L.CRS.Earth,B=s.lng*p,T=s.lat*p,V=l*p,oe=Math.sin(T),Re=Math.cos(T),Me=Math.cos(h/k),Qe=Math.sin(h/k),dt=Math.asin(oe*Me+Re*Qe*Math.cos(V)),Et=B+Math.atan2(Math.sin(V)*Qe*Re,Me-oe*Math.sin(dt));Et*=v;let jt=Et-360,qt=Et<-180?Et+360:Et;return Et=Et>180?jt:qt,L.latLng([dt*v,Et])}function ws(s,l,h){let p=s.latLngToContainerPoint(l),v=s.latLngToContainerPoint(h),k=Math.atan2(v.y-p.y,v.x-p.x)*180/Math.PI+90;return k+=k<0?360:0,k}function na(s,l,h,p){let v=ws(s,l,h);return Aa(l,v,p)}function ia(s,l,h="asc"){if(!l||Object.keys(l).length===0)return(V,oe)=>V-oe;let p=Object.keys(l),v,k=p.length-1,B={};for(;k>=0;)v=p[k],B[v.toLowerCase()]=l[v],k-=1;function T(V){if(V instanceof L.Marker)return"Marker";if(V instanceof L.Circle)return"Circle";if(V instanceof L.CircleMarker)return"CircleMarker";if(V instanceof L.Rectangle)return"Rectangle";if(V instanceof L.Polygon)return"Polygon";if(V instanceof L.Polyline)return"Line"}return(V,oe)=>{let Re,Me;if(Re=T(V.layer).toLowerCase(),Me=T(oe.layer).toLowerCase(),!Re||!Me)return 0;let Qe=Re in B?B[Re]:Number.MAX_SAFE_INTEGER,dt=Me in B?B[Me]:Number.MAX_SAFE_INTEGER,Et=0;return Qe<dt?Et=-1:Qe>dt&&(Et=1),h==="desc"?Et*-1:Et}}function Or(s,l=s.getLatLngs()){return s instanceof L.Polygon?L.polygon(l).getLatLngs():L.polyline(l).getLatLngs()}function ra(s,l){var h,p,v,k;if((p=(h=l.options.crs)==null?void 0:h.projection)!=null&&p.MAX_LATITUDE){let B=(k=(v=l.options.crs)==null?void 0:v.projection)==null?void 0:k.MAX_LATITUDE;s.lat=Math.max(Math.min(B,s.lat),-B)}return s}function Ei(s){return s.options.renderer||s._map&&(s._map._getPaneRenderer(s.options.pane)||s._map.options.renderer||s._map._renderer)||s._renderer}var el=L.Class.extend({includes:[Pa,vi,js,Ao,Mo],initialize(s){this.map=s,this.Draw=new L.PM.Draw(s),this.Toolbar=new L.PM.Toolbar(s),this.Keyboard=Bn(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(s)},setLang(s="en",l,h="en"){if(s=s.trim().toLowerCase(),!/^[a-z]{2}$/.test(s)){let v=s.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(v){let k=[`${v[1]}_${v[2]}`,`${v[1]}`];for(let B of k)if(Dr[B]){s=B;break}}}let p=L.PM.activeLang;l&&(Dr[s]=(0,Cn.default)(Dr[h],l)),L.PM.activeLang=s,this.map.pm.Toolbar.reinit(),this._fireLangChange(p,s,h,Dr[s])},addControls(s){this.Toolbar.addControls(s)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(s="Polygon",l){s==="Poly"&&(s="Polygon"),this.Draw.enable(s,l)},disableDraw(s="Polygon"){s==="Poly"&&(s="Polygon"),this.Draw.disable(s)},setPathOptions(s,l={}){let h=l.ignoreShapes||[],p=l.merge||!1;this.map.pm.Draw.shapes.forEach(v=>{h.indexOf(v)===-1&&this.map.pm.Draw[v].setPathOptions(s,p)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(s){let l=(0,Cn.default)(this.globalOptions,s);l.editable&&(l.resizeableCircleMarker=l.editable,delete l.editable);let h=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!l.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),h=!0);let p=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!l.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),p=!0),this.map.pm.Draw.shapes.forEach(v=>{this.map.pm.Draw[v].setOptions(l)}),h&&this.map.pm.Draw.CircleMarker.enable(),p&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(v=>{v.pm.setOptions(l)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=l,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(s=>{s.pm.enabled()&&s.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(s){return this.Draw.Cut.enable(s)},toggleGlobalCutMode(s){return this.Draw.Cut.toggle(s)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(s=!1){let l=L.PM.Utils.findLayers(this.map);if(!s)return l;let h=L.featureGroup();return h._pmTempLayer=!0,l.forEach(p=>{h.addLayer(p)}),h},getGeomanDrawLayers(s=!1){let l=L.PM.Utils.findLayers(this.map).filter(p=>p._drawnByGeoman===!0);if(!s)return l;let h=L.featureGroup();return h._pmTempLayer=!0,l.forEach(p=>{h.addLayer(p)}),h},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(s){this._touchEventCounter===0&&(L.DomEvent.on(s,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(s,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(s){this._touchEventCounter===1&&(L.DomEvent.off(s,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(s,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(s){Ei(this.map)._onMouseMove(this._createMouseEvent("mousemove",s))},_canvasTouchClick(s){let l="";s.type==="touchstart"||s.type==="pointerdown"?l="mousedown":(s.type==="touchend"||s.type==="pointerup"||s.type==="touchcancel"||s.type==="pointercancel")&&(l="mouseup"),l&&Ei(this.map)._onClick(this._createMouseEvent(l,s))},_createMouseEvent(s,l){let h,p=l.touches[0]||l.changedTouches[0];try{h=new MouseEvent(s,{bubbles:l.bubbles,cancelable:l.cancelable,view:l.view,detail:p.detail,screenX:p.screenX,screenY:p.screenY,clientX:p.clientX,clientY:p.clientY,ctrlKey:l.ctrlKey,altKey:l.altKey,shiftKey:l.shiftKey,metaKey:l.metaKey,button:l.button,relatedTarget:l.relatedTarget})}catch{h=document.createEvent("MouseEvents"),h.initMouseEvent(s,l.bubbles,l.cancelable,l.view,p.detail,p.screenX,p.screenY,p.clientX,p.clientY,l.ctrlKey,l.altKey,l.shiftKey,l.metaKey,l.button,l.relatedTarget)}return h}}),To=el,Rr=L.Control.extend({includes:[Mo],options:{position:"topleft",disableByOtherButtons:!0},initialize(s){this._button=L.Util.extend({},this.options,s)},onAdd(s){return this._map=s,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let s=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),s?s.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(s){return typeof s=="boolean"?this._button.toggleStatus=s:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(s){s&&s.preventDefault(),!this._button.disabled&&(this._button.onClick(s,{button:this,event:s}),this._clicked(s),this._button.afterClick(s,{button:this,event:s}))},_makeButton(s){let l=this.options.position.indexOf("right")>-1?"pos-right":"",h=L.DomUtil.create("div",`button-container  ${l}`,this._container);s.title&&h.setAttribute("title",s.title);let p=L.DomUtil.create("a","leaflet-buttons-control-button",h);p.setAttribute("role","button"),p.setAttribute("tabindex","0"),p.href="#";let v=L.DomUtil.create("div",`leaflet-pm-actions-container ${l}`,h),k=s.actions,B={cancel:{text:un("actions.cancel"),title:un("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:un("actions.finish"),title:un("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:un("actions.removeLastVertex"),title:un("actions.removeLastVertex"),onClick(){this._map.pm.Draw[s.jsClass]._removeLastVertex()}},finish:{text:un("actions.finish"),title:un("actions.finish"),onClick(V){this._map.pm.Draw[s.jsClass]._finishShape(V)}}};s._preparedActions=k.map(V=>{let oe=typeof V=="string"?V:V.name,Re;if(B[oe])Re=B[oe];else if(V.text)Re=V;else return Re;let Me=L.DomUtil.create("a",`leaflet-pm-action ${l} action-${oe}`,v);if(Me.setAttribute("role","button"),Me.setAttribute("tabindex","0"),Me.href="#",Re.title&&(Me.title=Re.title),Me.innerHTML=Re.text,L.DomEvent.disableClickPropagation(Me),L.DomEvent.on(Me,"click",L.DomEvent.stop),Re._node=Me,!s.disabled&&Re.onClick){let Qe=dt=>{dt.preventDefault();let Et="",{buttons:jt}=this._map.pm.Toolbar;for(let qt in jt)if(jt[qt]._button===s){Et=qt;break}this._fireActionClick(Re,Et,s)};L.DomEvent.addListener(Me,"click",Qe,this),L.DomEvent.addListener(Me,"click",Re.onClick,this),L.DomEvent.addListener(Me,"click",()=>this._updateActiveAction(s))}return Re}),this._updateActiveAction(s),s.toggleStatus&&L.DomUtil.addClass(h,"active");let T=L.DomUtil.create("div","control-icon",p);return s.iconUrl&&T.setAttribute("src",s.iconUrl),s.className&&L.DomUtil.addClass(T,s.className),L.DomEvent.disableClickPropagation(p),L.DomEvent.on(p,"click",L.DomEvent.stop),s.disabled||(L.DomEvent.addListener(p,"click",this._onBtnClick,this),L.DomEvent.addListener(p,"click",this._triggerClick,this)),s.disabled&&(L.DomUtil.addClass(p,"pm-disabled"),p.setAttribute("aria-disabled","true")),h},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let s="",{buttons:l}=this._map.pm.Toolbar;for(let h in l)if(l[h]._button===this._button){s=h;break}this._fireButtonClick(s,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let s="pm-disabled",l=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(l,s),l.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(l,s),l.setAttribute("aria-disabled","false"))},_updateActiveAction(s){var l;(l=s._preparedActions)==null||l.forEach(h=>{h!=null&&h._node&&(h.isActive&&h.isActive.call(this)?L.DomUtil.addClass(h._node,"active-action"):L.DomUtil.removeClass(h._node,"active-action"))})}}),sa=Rr;L.Control.PMButton=sa;var Ma=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(s){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(s)},reinit(){let s=this.isVisible;this.removeControls(),this._defineButtons(),s&&this.addControls()},init(s){this.map=s,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(s){let l=`${s}Container`;return this[l]||(this[l]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${s} leaflet-bar leaflet-control`)),this[l]},getButtons(){return this.buttons},addControls(s=this.options){typeof s.editPolygon<"u"&&(s.editMode=s.editPolygon),typeof s.deleteLayer<"u"&&(s.removalMode=s.deleteLayer),L.Util.setOptions(this,s),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let s=this.getButtons(),l={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let h in s){let p=s[h];L.Util.setOptions(p,{className:l.geomanIcons[h]})}},removeControls(){let s=this.getButtons();for(let l in s)s[l].remove();this.isVisible=!1},toggleControls(s=this.options){this.isVisible?this.removeControls():this.addControls(s)},_addButton(s,l){return this.buttons[s]=l,this.options[s]=!!this.options[s]||!1,this.buttons[s]},triggerClickOnToggledButtons(s){for(let l in this.buttons){let h=this.buttons[l];h._button.disableByOtherButtons&&h!==s&&h.toggled()&&h._triggerClick()}},toggleButton(s,l,h=!0){s==="editPolygon"&&(s="editMode"),s==="deleteLayer"&&(s="removalMode");let p=s;return h&&this.triggerClickOnToggledButtons(this.buttons[p]),this.buttons[p]?this.buttons[p].toggle(l):!1},_defineButtons(){let s={className:"control-icon leaflet-pm-icon-marker",title:un("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(Qe,dt)=>{this.map.pm.Draw[dt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},l={title:un("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(Qe,dt)=>{this.map.pm.Draw[dt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},h={className:"control-icon leaflet-pm-icon-polyline",title:un("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(Qe,dt)=>{this.map.pm.Draw[dt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},p={title:un("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(Qe,dt)=>{this.map.pm.Draw[dt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},v={title:un("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(Qe,dt)=>{this.map.pm.Draw[dt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},k={title:un("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(Qe,dt)=>{this.map.pm.Draw[dt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},B={title:un("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},T={title:un("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},V={title:un("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(Qe,dt)=>{this.map.pm.Draw[dt.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},oe={title:un("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Re={title:un("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Me={className:"control-icon leaflet-pm-icon-text",title:un("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(Qe,dt)=>{this.map.pm.Draw[dt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(s)),this._addButton("drawPolyline",new L.Control.PMButton(h)),this._addButton("drawRectangle",new L.Control.PMButton(k)),this._addButton("drawPolygon",new L.Control.PMButton(l)),this._addButton("drawCircle",new L.Control.PMButton(p)),this._addButton("drawCircleMarker",new L.Control.PMButton(v)),this._addButton("drawText",new L.Control.PMButton(Me)),this._addButton("editMode",new L.Control.PMButton(B)),this._addButton("dragMode",new L.Control.PMButton(T)),this._addButton("cutPolygon",new L.Control.PMButton(V)),this._addButton("removalMode",new L.Control.PMButton(oe)),this._addButton("rotateMode",new L.Control.PMButton(Re))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let s=this.getButtons(),l=[];this.options.drawControls===!1&&(l=l.concat(Object.keys(s).filter(h=>!s[h]._button.tool))),this.options.editControls===!1&&(l=l.concat(Object.keys(s).filter(h=>s[h]._button.tool==="edit"))),this.options.optionsControls===!1&&(l=l.concat(Object.keys(s).filter(h=>s[h]._button.tool==="options"))),this.options.customControls===!1&&(l=l.concat(Object.keys(s).filter(h=>s[h]._button.tool==="custom")));for(let h in s)if(this.options[h]&&l.indexOf(h)===-1){let p=s[h]._button.tool;p||(p="draw"),s[h].setPosition(this._getBtnPosition(p)),s[h].addTo(this.map)}},_getBtnPosition(s){return this.options.positions&&this.options.positions[s]?this.options.positions[s]:this.options.position},setBlockPosition(s,l){this.options.positions[s]=l,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(s,l){if(l)typeof l!="object"&&(l={name:l});else throw new TypeError("Button has no name");let h=this._btnNameMapping(s);if(!l.name)throw new TypeError("Button has no name");if(this.buttons[l.name])throw new TypeError("Button with this name already exists");let p=this.map.pm.Draw.createNewDrawInstance(l.name,h);l={...this.buttons[h]._button,...l};let v=this.createCustomControl(l);return{drawInstance:p,control:v}},createCustomControl(s){if(!s.name)throw new TypeError("Button has no name");if(this.buttons[s.name])throw new TypeError("Button with this name already exists");s.onClick||(s.onClick=()=>{}),s.afterClick||(s.afterClick=()=>{}),s.toggle!==!1&&(s.toggle=!0),s.block&&(s.block=s.block.toLowerCase()),(!s.block||s.block==="draw")&&(s.block=""),s.className?s.className.indexOf("control-icon")===-1&&(s.className=`control-icon ${s.className}`):s.className="control-icon";let l={tool:s.block,className:s.className,title:s.title||"",jsClass:s.name,onClick:s.onClick,afterClick:s.afterClick,doToggle:s.toggle,toggleStatus:!1,disableOtherButtons:s.disableOtherButtons??!0,disableByOtherButtons:s.disableByOtherButtons??!0,cssToggle:s.toggle,position:this.options.position,actions:s.actions||[],disabled:!!s.disabled};this.options[s.name]!==!1&&(this.options[s.name]=!0);let h=this._addButton(s.name,new L.Control.PMButton(l));return this.changeControlOrder(),h},controlExists(s){return!!this.getButton(s)},getButton(s){return this.getButtons()[s]},getButtonsInBlock(s){let l={};if(s)for(let h in this.getButtons()){let p=this.getButtons()[h];(p._button.tool===s||s==="draw"&&!p._button.tool)&&(l[h]=p)}return l},changeControlOrder(s=[]){let l=this._shapeMapping(),h=[];s.forEach(k=>{l[k]?h.push(l[k]):h.push(k)});let p=this.getButtons(),v={};h.forEach(k=>{p[k]&&(v[k]=p[k])}),Object.keys(p).filter(k=>!p[k]._button.tool||p[k]._button.tool==="draw").forEach(k=>{h.indexOf(k)===-1&&(v[k]=p[k])}),Object.keys(p).filter(k=>p[k]._button.tool==="edit").forEach(k=>{h.indexOf(k)===-1&&(v[k]=p[k])}),Object.keys(p).filter(k=>p[k]._button.tool==="options").forEach(k=>{h.indexOf(k)===-1&&(v[k]=p[k])}),Object.keys(p).filter(k=>p[k]._button.tool==="custom").forEach(k=>{h.indexOf(k)===-1&&(v[k]=p[k])}),Object.keys(p).forEach(k=>{h.indexOf(k)===-1&&(v[k]=p[k])}),this.map.pm.Toolbar.buttons=v,this._showHideButtons()},getControlOrder(){let s=this.getButtons(),l=[];for(let h in s)l.push(h);return l},changeActionsOfControl(s,l){let h=this._btnNameMapping(s);if(!h)throw new TypeError("No name passed");if(!l)throw new TypeError("No actions passed");if(!this.buttons[h])throw new TypeError("Button with this name not exists");this.buttons[h]._button.actions=l,this.changeControlOrder()},setButtonDisabled(s,l){let h=this._btnNameMapping(s);l?this.buttons[h].disable():this.buttons[h].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(s){let l=this._shapeMapping();return l[s]?l[s]:s}}),Ba=Ma,oa=m(Ds()),so={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(s){s.forEach(l=>{if(Array.isArray(l)){this._assignEvents(l);return}l.off("drag",this._handleSnapping,this),l.on("drag",this._handleSnapping,this),l.off("dragend",this._cleanupSnapping,this),l.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(s){if(s){let l=s.target;l._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(l=>{l.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(s){var T,V,oe;let l=s.target;if(l._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((T=s==null?void 0:s.originalEvent)==null?void 0:T.altKey)||((oe=(V=this._map)==null?void 0:V.pm)==null?void 0:oe.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let h=this._calcClosestLayer(l.getLatLng(),this._snapList);if(Object.keys(h).length===0)return!1;let p=h.layer instanceof L.Marker||h.layer instanceof L.CircleMarker||!this.options.snapSegment,v;p?v=h.latlng:v=this._checkPrioritiySnapping(h);let k=this.options.snapDistance,B={marker:l,shape:this._shape,snapLatLng:v,segment:h.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:h.layer,distance:h.distance};if(this._fireSnapDrag(B.marker,B),this._fireSnapDrag(this._layer,B),h.distance<k){l._orgLatLng=l.getLatLng(),l.setLatLng(v),l._snapped=!0,l._snapInfo=B;let Re=()=>{this._snapLatLng=v,this._fireSnap(l,B),this._fireSnap(this._layer,B)},Me=this._snapLatLng||{},Qe=v||{};(Me.lat!==Qe.lat||Me.lng!==Qe.lng)&&Re()}else this._snapLatLng&&(this._unsnap(B),l._snapped=!1,l._snapInfo=void 0,this._fireUnsnap(B.marker,B),this._fireUnsnap(this._layer,B));return!0},_createSnapList(){let s=[],l=[],h=this._map;h.off("layerremove",this._handleSnapLayerRemoval,this),h.on("layerremove",this._handleSnapLayerRemoval,this),h.eachLayer(p=>{if((p instanceof L.Polyline||p instanceof L.Marker||p instanceof L.CircleMarker||p instanceof L.ImageOverlay)&&p.options.snapIgnore!==!0){if(p.options.snapIgnore===void 0&&(!L.PM.optIn&&p.options.pmIgnore===!0||L.PM.optIn&&p.options.pmIgnore!==!1))return;(p instanceof L.Circle||p instanceof L.CircleMarker)&&p.pm&&p.pm._hiddenPolyCircle?s.push(p.pm._hiddenPolyCircle):p instanceof L.ImageOverlay&&(p=L.rectangle(p.getBounds())),s.push(p);let v=L.polyline([],{color:"red",pmIgnore:!0});v._pmTempLayer=!0,l.push(v),(p instanceof L.Circle||p instanceof L.CircleMarker)&&l.push(v)}}),s=s.filter(p=>this._layer!==p),s=s.filter(p=>p._latlng||p._latlngs&&nr(p._latlngs)),s=s.filter(p=>!p._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let p=L.polyline([],{color:"red",pmIgnore:!0});p._pmTempLayer=!0,l.push(p)}),this._snapList=s.concat(this._otherSnapLayers)):this._snapList=s,this.debugIndicatorLines=l},_handleSnapLayerRemoval({layer:s}){if(!s._leaflet_id)return;let l=this._snapList.findIndex(h=>h._leaflet_id===s._leaflet_id);l>-1&&this._snapList.splice(l,1)},_calcClosestLayer(s,l){return this._calcClosestLayers(s,l,1)[0]},_calcClosestLayers(s,l,h=1){let p=[],v={};l.forEach((B,T)=>{var oe;if(B._parentCopy&&B._parentCopy===this._layer||((oe=B.getLatLngs)==null?void 0:oe.call(B).flat(5).length)<2)return;let V=this._calcLayerDistances(s,B);if(V.distance=Math.floor(V.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[T]){let Re=L.polyline([],{color:"red",pmIgnore:!0});Re._pmTempLayer=!0,this.debugIndicatorLines[T]=Re}this.debugIndicatorLines[T].setLatLngs([s,V.latlng])}h===1&&(v.distance===void 0||V.distance-5<=v.distance)?(V.distance+5<v.distance&&(p=[]),v=V,v.layer=B,p.push(v)):h!==1&&(v={},v=V,v.layer=B,p.push(v))}),h!==1&&(p=p.sort((B,T)=>B.distance-T.distance)),h===-1&&(h=p.length);let k=this._getClosestLayerByPriority(p,h);return L.Util.isArray(k)?k:[k]},_calcLayerDistances(s,l){let h=this._map,p=l instanceof L.Marker||l instanceof L.CircleMarker,v=l instanceof L.Polygon,k=s;if(p){let B=l.getLatLng();return{latlng:{...B},distance:this._getDistance(h,B,k)}}return this._calcLatLngDistances(k,l.getLatLngs(),h,v)},_calcLatLngDistances(s,l,h,p=!1){let v,k,B,T=V=>{V.forEach((oe,Re)=>{if(Array.isArray(oe)){T(oe);return}if(this.options.snapSegment){let Me=oe,Qe;p?Qe=Re+1===V.length?0:Re+1:Qe=Re+1===V.length?void 0:Re+1;let dt=V[Qe];if(dt){let Et=this._getDistanceToSegment(h,s,Me,dt);(k===void 0||Et<k)&&(k=Et,B=[Me,dt])}}else{let Me=this._getDistance(h,s,oe);(k===void 0||Me<k)&&(k=Me,v=oe)}})};return T(l),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(h,s,B[0],B[1])},segment:B,distance:k}:{latlng:v,distance:k}},_getClosestLayerByPriority(s,l=1){s=s.sort((B,T)=>B._leaflet_id-T._leaflet_id);let h=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],p=this._map.pm.globalOptions.snappingOrder||[],v=0,k={};return p.concat(h).forEach(B=>{k[B]||(v+=1,k[B]=v)}),s.sort(ia("instanceofShape",k)),l===1?s[0]||{}:s.slice(0,l)},_checkPrioritiySnapping(s){let l=this._map,h=s.segment[0],p=s.segment[1],v=s.latlng,k=v;if(this.options.snapVertex){let B=this._getDistance(l,h,v),T=this._getDistance(l,p,v),V=B<T?h:p,oe=B<T?B:T;if(this.options.snapMiddle){let Me=L.PM.Utils.calcMiddleLatLng(l,h,p),Qe=this._getDistance(l,Me,v);Qe<B&&Qe<T&&(V=Me,oe=Qe)}let Re=this.options.snapDistance;oe<Re&&(k=V)}return{...k}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(s,l,h,p){let v=s.getMaxZoom();v===1/0&&(v=s.getZoom());let k=s.project(l,v),B=s.project(h,v),T=s.project(p,v),V=L.LineUtil.closestPointOnSegment(k,B,T);return s.unproject(V,v)},_getDistanceToSegment(s,l,h,p){let v=s.latLngToContainerPoint(l),k=s.latLngToContainerPoint(h),B=s.latLngToContainerPoint(p);return L.LineUtil.pointToSegmentDistance(v,k,B)},_getDistance(s,l,h){return s.latLngToContainerPoint(l).distanceTo(s.latLngToContainerPoint(h))}},No=so,oo=L.Class.extend({includes:[No,Mo],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(s){L.Util.setOptions(this,s),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(s){let l=new L.Icon.Default;l.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=l,this._map=s,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(h=>{this[h]=new L.PM.Draw[h](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(s,l=!1){l?this.options.pathOptions=(0,oa.default)(this.options.pathOptions,s):this.options.pathOptions=s},getShapes(){return this.shapes},getShape(){return this._shape},enable(s,l){if(!s)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[s].enable(l)},disable(){this.shapes.forEach(s=>{this[s].disable()})},addControls(){this.shapes.forEach(s=>{this[s].addButton()})},getActiveShape(){let s;return this.shapes.forEach(l=>{this[l]._enabled&&(s=l)}),s},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let s=[];this._map.eachLayer(l=>{(l instanceof L.Polyline||l instanceof L.Marker||l instanceof L.Circle||l instanceof L.CircleMarker||l instanceof L.ImageOverlay)&&(l._pmTempLayer||s.push(l))}),this._enabled?s.forEach(l=>{L.PM.Utils.disablePopup(l)}):s.forEach(l=>{L.PM.Utils.enablePopup(l)})},createNewDrawInstance(s,l){let h=this._getShapeFromBtnName(l);if(this[s])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[h])throw new TypeError(`There is no class L.PM.Draw.${h}`);return this[s]=new L.PM.Draw[h](this._map),this[s].toolbarButtonName=s,this[s]._shape=s,this.shapes.push(s),this[l]&&this[s].setOptions(this[l].options),this[s].setOptions(this[s].options),this[s]},_getShapeFromBtnName(s){let l={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return l[s]?l[s]:this[s]?this[s]._shape:s},_finishLayer(s){s.pm&&(s.pm.setOptions(this.options),s.pm._shape=this._shape,s.pm._map=this._map),this._addDrawnLayerProp(s)},_addDrawnLayerProp(s){s._drawnByGeoman=!0},_setPane(s,l){l==="layerPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":l==="vertexPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":l==="markerPane"&&(s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),_i=oo;_i.Marker=_i.extend({initialize(s){this._map=s,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(s){L.Util.setOptions(this,s),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(un("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(l=>{this.isRelevantMarker(l)&&l.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},isRelevantMarker(s){return s instanceof L.Marker&&s.pm&&!s._pmTempLayer&&!s.pm._initTextMarker},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let l=s;l.target=this._hintMarker,this._handleSnapping(l)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(s){if(!s.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let l=this._hintMarker.getLatLng(),h=new L.Marker(l,this.options.markerStyle);this._setPane(h,"markerPane"),this._finishLayer(h),h.pm||(h.options.draggable=!1),h.addTo(this._map.pm._getContainingLayer()),h.pm&&this.options.markerEditable?h.pm.enable():h.dragging&&h.dragging.disable(),this._fireCreate(h),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var s,l;(s=this.options.markerStyle)!=null&&s.icon&&((l=this._hintMarker)==null||l.setIcon(this.options.markerStyle.icon))}});var C=63710088e-1,ee={centimeters:C*100,centimetres:C*100,degrees:C/111325,feet:C*3.28084,inches:C*39.37,kilometers:C/1e3,kilometres:C/1e3,meters:C,metres:C,miles:C/1609.344,millimeters:C*1e3,millimetres:C*1e3,nauticalmiles:C/1852,radians:1,yards:C*1.0936};function Ne(s,l,h){h===void 0&&(h={});var p={type:"Feature"};return(h.id===0||h.id)&&(p.id=h.id),h.bbox&&(p.bbox=h.bbox),p.properties=l||{},p.geometry=s,p}function He(s,l,h){if(h===void 0&&(h={}),!s)throw new Error("coordinates is required");if(!Array.isArray(s))throw new Error("coordinates must be an Array");if(s.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!vn(s[0])||!vn(s[1]))throw new Error("coordinates must contain numbers");var p={type:"Point",coordinates:s};return Ne(p,l,h)}function ot(s,l,h){if(h===void 0&&(h={}),s.length<2)throw new Error("coordinates must be an array of two or more positions");var p={type:"LineString",coordinates:s};return Ne(p,l,h)}function yt(s,l){l===void 0&&(l={});var h={type:"FeatureCollection"};return l.id&&(h.id=l.id),l.bbox&&(h.bbox=l.bbox),h.features=s,h}function Ot(s,l){l===void 0&&(l="kilometers");var h=ee[l];if(!h)throw new Error(l+" units is invalid");return s*h}function Gt(s,l){l===void 0&&(l="kilometers");var h=ee[l];if(!h)throw new Error(l+" units is invalid");return s/h}function Jt(s){var l=s%(2*Math.PI);return l*180/Math.PI}function sn(s){var l=s%360;return l*Math.PI/180}function vn(s){return!isNaN(s)&&s!==null&&!Array.isArray(s)}function Tn(s){var l,h,p={type:"FeatureCollection",features:[]};if(s.type==="Feature"?h=s.geometry:h=s,h.type==="LineString")l=[h.coordinates];else if(h.type==="MultiLineString")l=h.coordinates;else if(h.type==="MultiPolygon")l=[].concat.apply([],h.coordinates);else if(h.type==="Polygon")l=h.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return l.forEach(function(v){l.forEach(function(k){for(var B=0;B<v.length-1;B++)for(var T=B;T<k.length-1;T++)if(!(v===k&&(Math.abs(B-T)===1||B===0&&T===v.length-2&&v[B][0]===v[v.length-1][0]&&v[B][1]===v[v.length-1][1]))){var V=si(v[B][0],v[B][1],v[B+1][0],v[B+1][1],k[T][0],k[T][1],k[T+1][0],k[T+1][1]);V&&p.features.push(He([V[0],V[1]]))}})}),p}function si(s,l,h,p,v,k,B,T){var V,oe,Re,Me,Qe,dt={x:null,y:null,onLine1:!1,onLine2:!1};return V=(T-k)*(h-s)-(B-v)*(p-l),V===0?dt.x!==null&&dt.y!==null?dt:!1:(oe=l-k,Re=s-v,Me=(B-v)*oe-(T-k)*Re,Qe=(h-s)*oe-(p-l)*Re,oe=Me/V,Re=Qe/V,dt.x=s+oe*(h-s),dt.y=l+oe*(p-l),oe>=0&&oe<=1&&(dt.onLine1=!0),Re>=0&&Re<=1&&(dt.onLine2=!0),dt.onLine1&&dt.onLine2?[dt.x,dt.y]:!1)}_i.Line=_i.extend({initialize(s){this._map=s,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(s){L.Util.setOptions(this,s),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(un("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_syncHintLine(){let s=this._layer.getLatLngs();if(s.length>0){let l=s[s.length-1];this._hintline.setLatLngs([l,this._hintMarker.getLatLng()])}},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let h=s;h.target=this._hintMarker,this._handleSnapping(h)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let l=this._layer._defaultShape().slice();l.push(this._hintMarker.getLatLng()),this._change(l)},hasSelfIntersection(){return Tn(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(s,l){let h=L.polyline(this._layer.getLatLngs());s&&(l||(l=this._hintMarker.getLatLng()),h.addLatLng(l));let p=Tn(h.toGeoJSON(15));this._doesSelfIntersect=p.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(p,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(s){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,s.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let l=this._hintMarker.getLatLng(),h=this._layer.getLatLngs(),p=h[h.length-1];if(l.equals(h[0])||h.length>0&&l.equals(p)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:l,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(l);let v=this._createMarker(l);this._setTooltipText(),this._setHintLineAfterNewVertex(l),this._fireVertexAdded(v,void 0,l,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(s)},_setHintLineAfterNewVertex(s){this._hintline.setLatLngs([s,s])},_removeLastVertex(){let s=this._markers;if(s.length<=1){this.disable();return}let l=this._layer.getLatLngs(),h=s[s.length-1],{indexPath:p}=L.PM.Utils.findDeepMarkerIndex(s,h);s.pop(),this._layerGroup.removeLayer(h);let v=s[s.length-1],k=l.indexOf(v.getLatLng());l=l.slice(0,k+1),this._layer.setLatLngs(l),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(h,p,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let s=this._layer.getLatLngs();if(s.length<=1)return;let l=L.polyline(s,this.options.pathOptions);this._setPane(l,"layerPane"),this._finishLayer(l),l.addTo(this._map.pm._getContainingLayer()),this._fireCreate(l),this.options.snappable&&this._cleanupSnapping();let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))},_createMarker(s){let l=new L.Marker(s,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(l,"vertexPane"),l._pmTempLayer=!0,this._layerGroup.addLayer(l),this._markers.push(l),l.on("click",this._finishShape,this),l},_setTooltipText(){let{length:s}=this._layer.getLatLngs().flat(),l="";s<=1?l=un("tooltips.continueLine"):l=un("tooltips.finishLine"),this._hintMarker.setTooltipContent(l)},_change(s){this._fireChange(s,"Draw")},setStyle(){var s,l;(s=this._layer)==null||s.setStyle(this.options.templineStyle),(l=this._hintline)==null||l.setStyle(this.options.hintlineStyle)}}),_i.Polygon=_i.Line.extend({initialize(s){this._map=s,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(s){L.PM.Draw.Line.prototype.enable.call(this,s),this._layer.pm._shape="Polygon"},_createMarker(s){let l=new L.Marker(s,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(l,"vertexPane"),l._pmTempLayer=!0,this._layerGroup.addLayer(l),this._markers.push(l),this._layer.getLatLngs().flat().length===1?(l.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(l)-1,this.options.snappable&&this._cleanupSnapping()):l.on("click",()=>1),l},_setTooltipText(){let{length:s}=this._layer.getLatLngs().flat(),l="";s<=2?l=un("tooltips.continueLine"):l=un("tooltips.finishPoly"),this._hintMarker.setTooltipContent(l)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let s=this._layer.getLatLngs();if(s.length<=2)return;let l=L.polygon(s,this.options.pathOptions);this._setPane(l,"layerPane"),this._finishLayer(l),l.addTo(this._map.pm._getContainingLayer()),this._fireCreate(l),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))}}),_i.Rectangle=_i.extend({initialize(s){this._map=s,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(s){if(L.Util.setOptions(this,s),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(un("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let l=0;l<2;l+=1){let h=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(h,"vertexPane"),h._pmTempLayer=!0,this._layerGroup.addLayer(h),this._styleMarkers.push(h)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_placeStartingMarkers(s){this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let l=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(l),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(h=>{L.DomUtil.addClass(h._icon,"visible"),h.setLatLng(l)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(un("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let s=this._startMarker.getLatLng();s&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([s,s]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let h=s;h.target=this._hintMarker,this._handleSnapping(h)}let l=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(l,"Draw")},_syncRectangleSize(){let s=ra(this._startMarker.getLatLng(),this._map),l=ra(this._hintMarker.getLatLng(),this._map),h=L.PM.Utils._getRotatedRectangle(s,l,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(h),this.options.cursorMarker&&this._styleMarkers){let p=[];h.forEach(v=>{!v.equals(s,1e-8)&&!v.equals(l,1e-8)&&p.push(v)}),p.forEach((v,k)=>{try{this._styleMarkers[k].setLatLng(v)}catch{}})}},_findCorners(){let s=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(s[0],s[2],this.options.rectangleAngle||0,this._map)},_finishShape(s){this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let l=this._hintMarker.getLatLng(),h=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||h.equals(l))return;let p=L.rectangle([h,l],this.options.pathOptions);if(this.options.rectangleAngle){let k=L.PM.Utils._getRotatedRectangle(h,l,this.options.rectangleAngle||0,this._map);p.setLatLngs(k),p.pm&&p.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(p,"layerPane"),this._finishLayer(p),p.addTo(this._map.pm._getContainingLayer()),this._fireCreate(p);let v=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(v))},setStyle(){var s;(s=this._layer)==null||s.setStyle(this.options.pathOptions)}}),_i.CircleMarker=_i.extend({initialize(s){this._map=s,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(s){if(L.Util.setOptions(this,s),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let l={};L.extend(l,this.options.templineStyle),l.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),l),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(un("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(un("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.disable()})},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_placeCenterMarker(s){this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let l=this._hintMarker.getLatLng();this._centerMarker.setLatLng(l),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let s=this._centerMarker.getLatLng();s&&(this._layer.setLatLng(s),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(un("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let s=this._centerMarker.getLatLng(),l=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([s,l])},_syncCircleRadius(){let s=this._centerMarker.getLatLng(),l=this._hintMarker.getLatLng(),h=this._distanceCalculation(s,l);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(h)},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let h=s;h.target=this._hintMarker,this._handleSnapping(h)}this._handleHintMarkerSnapping();let l=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(l,"Draw")},isRelevantMarker(s){return s instanceof L.CircleMarker&&!(s instanceof L.Circle)&&s.pm&&!s._pmTempLayer},_createMarker(s){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!s.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let l=this._hintMarker.getLatLng(),h=new this._BaseCircleClass(l,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(h,"layerPane"),this._finishLayer(h),h.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(h),this._fireCreate(h),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(s){s.pm&&this.options.markerEditable&&s.pm.enable()},_finishShape(s){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let l=this._centerMarker.getLatLng(),h=this._defaultRadius;if(this.options[this._editableOption]){let B=this._hintMarker.getLatLng();h=this._distanceCalculation(l,B),this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?h=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(h=this.options[this._maxRadiusOption])}let p={...this.options.pathOptions,radius:h},v=new this._BaseCircleClass(l,p);this._setPane(v,"layerPane"),this._finishLayer(v),v.addTo(this._map.pm._getContainingLayer()),v.pm&&v.pm._updateHiddenPolyCircle(),this._fireCreate(v);let k=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(k))},_getNewDestinationOfHintMarker(){let s=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return s;let l=this._centerMarker.getLatLng(),h=this._distanceCalculation(l,s);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?s=na(this._map,l,s,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(s=na(this._map,l,s,this._getMaxDistanceInMeter()))}return s},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let s=this._centerMarker.getLatLng(),l=this._hintMarker.getLatLng(),h=this._distanceCalculation(s,l);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var l,h;let s={};L.extend(s,this.options.templineStyle),this.options[this._editableOption]&&(s.radius=0),(l=this._layer)==null||l.setStyle(s),(h=this._hintline)==null||h.setStyle(this.options.hintlineStyle)},_distanceCalculation(s,l){return this._map.project(s).distanceTo(this._map.project(l))}}),_i.Circle=_i.CircleMarker.extend({initialize(s){this._map=s,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(s,l){return this._map.distance(s,l)}});function jn(s){if(!s)throw new Error("coord is required");if(!Array.isArray(s)){if(s.type==="Feature"&&s.geometry!==null&&s.geometry.type==="Point")return s.geometry.coordinates;if(s.type==="Point")return s.coordinates}if(Array.isArray(s)&&s.length>=2&&!Array.isArray(s[0])&&!Array.isArray(s[1]))return s;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Hn(s){if(Array.isArray(s))return s;if(s.type==="Feature"){if(s.geometry!==null)return s.geometry.coordinates}else if(s.coordinates)return s.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Ai(s){return s.type==="Feature"?s.geometry:s}function Li(s,l){return s.type==="FeatureCollection"?"FeatureCollection":s.type==="GeometryCollection"?"GeometryCollection":s.type==="Feature"&&s.geometry!==null?s.geometry.type:s.type}function Sr(s,l,h){if(s!==null)for(var p,v,k,B,T,V,oe,Re=0,Me=0,Qe,dt=s.type,Et=dt==="FeatureCollection",jt=dt==="Feature",qt=Et?s.features.length:1,mn=0;mn<qt;mn++){oe=Et?s.features[mn].geometry:jt?s.geometry:s,Qe=oe?oe.type==="GeometryCollection":!1,T=Qe?oe.geometries.length:1;for(var Oe=0;Oe<T;Oe++){var ze=0,Ke=0;if(B=Qe?oe.geometries[Oe]:oe,B!==null){V=B.coordinates;var vt=B.type;switch(Re=0,vt){case null:break;case"Point":if(l(V,Me,mn,ze,Ke)===!1)return!1;Me++,ze++;break;case"LineString":case"MultiPoint":for(p=0;p<V.length;p++){if(l(V[p],Me,mn,ze,Ke)===!1)return!1;Me++,vt==="MultiPoint"&&ze++}vt==="LineString"&&ze++;break;case"Polygon":case"MultiLineString":for(p=0;p<V.length;p++){for(v=0;v<V[p].length-Re;v++){if(l(V[p][v],Me,mn,ze,Ke)===!1)return!1;Me++}vt==="MultiLineString"&&ze++,vt==="Polygon"&&Ke++}vt==="Polygon"&&ze++;break;case"MultiPolygon":for(p=0;p<V.length;p++){for(Ke=0,v=0;v<V[p].length;v++){for(k=0;k<V[p][v].length-Re;k++){if(l(V[p][v][k],Me,mn,ze,Ke)===!1)return!1;Me++}Ke++}ze++}break;case"GeometryCollection":for(p=0;p<B.geometries.length;p++)if(Sr(B.geometries[p],l)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Xn(s,l){if(s.type==="Feature")l(s,0);else if(s.type==="FeatureCollection")for(var h=0;h<s.features.length&&l(s.features[h],h)!==!1;h++);}function ir(s,l,h){var p=h;return Xn(s,function(v,k){k===0&&h===void 0?p=v:p=l(p,v,k)}),p}function tl(s,l){var h,p,v,k,B,T,V,oe,Re,Me,Qe=0,dt=s.type==="FeatureCollection",Et=s.type==="Feature",jt=dt?s.features.length:1;for(h=0;h<jt;h++){for(T=dt?s.features[h].geometry:Et?s.geometry:s,oe=dt?s.features[h].properties:Et?s.properties:{},Re=dt?s.features[h].bbox:Et?s.bbox:void 0,Me=dt?s.features[h].id:Et?s.id:void 0,V=T?T.type==="GeometryCollection":!1,B=V?T.geometries.length:1,v=0;v<B;v++){if(k=V?T.geometries[v]:T,k===null){if(l(null,Qe,oe,Re,Me)===!1)return!1;continue}switch(k.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(l(k,Qe,oe,Re,Me)===!1)return!1;break}case"GeometryCollection":{for(p=0;p<k.geometries.length;p++)if(l(k.geometries[p],Qe,oe,Re,Me)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}Qe++}}function rr(s,l){tl(s,function(h,p,v,k,B){var T=h===null?null:h.type;switch(T){case null:case"Point":case"LineString":case"Polygon":return l(Ne(h,v,{bbox:k,id:B}),p,0)===!1?!1:void 0}var V;switch(T){case"MultiPoint":V="Point";break;case"MultiLineString":V="LineString";break;case"MultiPolygon":V="Polygon";break}for(var oe=0;oe<h.coordinates.length;oe++){var Re=h.coordinates[oe],Me={type:V,coordinates:Re};if(l(Ne(Me,v),p,oe)===!1)return!1}})}function Ta(s){if(!s)throw new Error("geojson is required");var l=[];return rr(s,function(h){es(h,l)}),yt(l)}function es(s,l){var h=[],p=s.geometry;if(p!==null){switch(p.type){case"Polygon":h=Hn(p);break;case"LineString":h=[Hn(p)]}h.forEach(function(v){var k=Na(v,s.properties);k.forEach(function(B){B.id=l.length,l.push(B)})})}}function Na(s,l){var h=[];return s.reduce(function(p,v){var k=ot([p,v],l);return k.bbox=zs(p,v),h.push(k),v}),h}function zs(s,l){var h=s[0],p=s[1],v=l[0],k=l[1],B=h<v?h:v,T=p<k?p:k,V=h>v?h:v,oe=p>k?p:k;return[B,T,V,oe]}var Us=Ta,Ci=m(_s(),1);function aa(s,l){var h={},p=[];if(s.type==="LineString"&&(s=Ne(s)),l.type==="LineString"&&(l=Ne(l)),s.type==="Feature"&&l.type==="Feature"&&s.geometry!==null&&l.geometry!==null&&s.geometry.type==="LineString"&&l.geometry.type==="LineString"&&s.geometry.coordinates.length===2&&l.geometry.coordinates.length===2){var v=dr(s,l);return v&&p.push(v),yt(p)}var k=(0,Ci.default)();return k.load(Us(l)),Xn(Us(s),function(B){Xn(k.search(B),function(T){var V=dr(B,T);if(V){var oe=Hn(V).join(",");h[oe]||(h[oe]=!0,p.push(V))}})}),yt(p)}function dr(s,l){var h=Hn(s),p=Hn(l);if(h.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(p.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var v=h[0][0],k=h[0][1],B=h[1][0],T=h[1][1],V=p[0][0],oe=p[0][1],Re=p[1][0],Me=p[1][1],Qe=(Me-oe)*(B-v)-(Re-V)*(T-k),dt=(Re-V)*(k-oe)-(Me-oe)*(v-V),Et=(B-v)*(k-oe)-(T-k)*(v-V);if(Qe===0)return null;var jt=dt/Qe,qt=Et/Qe;if(jt>=0&&jt<=1&&qt>=0&&qt<=1){var mn=v+jt*(B-v),Oe=k+jt*(T-k);return He([mn,Oe])}return null}var sr=aa,la=m(_s(),1);function Ki(s,l,h){h===void 0&&(h={});var p=jn(s),v=jn(l),k=sn(v[1]-p[1]),B=sn(v[0]-p[0]),T=sn(p[1]),V=sn(v[1]),oe=Math.pow(Math.sin(k/2),2)+Math.pow(Math.sin(B/2),2)*Math.cos(T)*Math.cos(V);return Ot(2*Math.atan2(Math.sqrt(oe),Math.sqrt(1-oe)),h.units)}var qs=Ki;function Er(s){var l=s[0],h=s[1],p=s[2],v=s[3],k=qs(s.slice(0,2),[p,h]),B=qs(s.slice(0,2),[l,v]);if(k>=B){var T=(h+v)/2;return[l,T-(p-l)/2,p,T+(p-l)/2]}else{var V=(l+p)/2;return[V-(v-h)/2,h,V+(v-h)/2,v]}}var nl=Er;function Mi(s){var l=[1/0,1/0,-1/0,-1/0];return Sr(s,function(h){l[0]>h[0]&&(l[0]=h[0]),l[1]>h[1]&&(l[1]=h[1]),l[2]<h[0]&&(l[2]=h[0]),l[3]<h[1]&&(l[3]=h[1])}),l}Mi.default=Mi;var xs=Mi;function Ir(s,l){l===void 0&&(l={});var h=l.precision,p=l.coordinates,v=l.mutate;if(h=h==null||isNaN(h)?6:h,p=p==null||isNaN(p)?3:p,!s)throw new Error("<geojson> is required");if(typeof h!="number")throw new Error("<precision> must be a number");if(typeof p!="number")throw new Error("<coordinates> must be a number");(v===!1||v===void 0)&&(s=JSON.parse(JSON.stringify(s)));var k=Math.pow(10,h);return Sr(s,function(B){Do(B,k,p)}),s}function Do(s,l,h){s.length>h&&s.splice(h,s.length);for(var p=0;p<s.length;p++)s[p]=Math.round(s[p]*l)/l;return s}var $s=Ir;function Ls(s,l,h){if(h===void 0&&(h={}),h.final===!0)return ji(s,l);var p=jn(s),v=jn(l),k=sn(p[0]),B=sn(v[0]),T=sn(p[1]),V=sn(v[1]),oe=Math.sin(B-k)*Math.cos(V),Re=Math.cos(T)*Math.sin(V)-Math.sin(T)*Math.cos(V)*Math.cos(B-k);return Jt(Math.atan2(oe,Re))}function ji(s,l){var h=Ls(l,s);return h=(h+180)%360,h}function Oi(s,l,h,p){p===void 0&&(p={});var v=jn(s),k=sn(v[0]),B=sn(v[1]),T=sn(h),V=Gt(l,p.units),oe=Math.asin(Math.sin(B)*Math.cos(V)+Math.cos(B)*Math.sin(V)*Math.cos(T)),Re=k+Math.atan2(Math.sin(T)*Math.sin(V)*Math.cos(B),Math.cos(V)-Math.sin(B)*Math.sin(oe)),Me=Jt(Re),Qe=Jt(oe);return He([Me,Qe],p.properties)}function ts(s,l,h){h===void 0&&(h={});var p=He([1/0,1/0],{dist:1/0}),v=0;return rr(s,function(k){for(var B=Hn(k),T=0;T<B.length-1;T++){var V=He(B[T]);V.properties.dist=qs(l,V,h);var oe=He(B[T+1]);oe.properties.dist=qs(l,oe,h);var Re=qs(V,oe,h),Me=Math.max(V.properties.dist,oe.properties.dist),Qe=Ls(V,oe),dt=Oi(l,Me,Qe+90,h),Et=Oi(l,Me,Qe-90,h),jt=sr(ot([dt.geometry.coordinates,Et.geometry.coordinates]),ot([V.geometry.coordinates,oe.geometry.coordinates])),qt=null;jt.features.length>0&&(qt=jt.features[0],qt.properties.dist=qs(l,qt,h),qt.properties.location=v+qs(V,qt,h)),V.properties.dist<p.properties.dist&&(p=V,p.properties.index=T,p.properties.location=v),oe.properties.dist<p.properties.dist&&(p=oe,p.properties.index=T+1,p.properties.location=v+Re),qt&&qt.properties.dist<p.properties.dist&&(p=qt,p.properties.index=T),v+=Re}}),p}var pr=ts;function Fr(s,l){if(!s)throw new Error("line is required");if(!l)throw new Error("splitter is required");var h=Li(s),p=Li(l);if(h!=="LineString")throw new Error("line must be LineString");if(p==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(p==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var v=$s(l,{precision:7});switch(p){case"Point":return jr(s,v);case"MultiPoint":return Vs(s,v);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Vs(s,sr(s,v))}}function Vs(s,l){var h=[],p=(0,la.default)();return rr(l,function(v){if(h.forEach(function(T,V){T.id=V}),!h.length)h=jr(s,v).features,h.forEach(function(T){T.bbox||(T.bbox=nl(xs(T)))}),p.load(yt(h));else{var k=p.search(v);if(k.features.length){var B=pi(v,k);h=h.filter(function(T){return T.id!==B.id}),p.remove(B),Xn(jr(B,v),function(T){h.push(T),p.insert(T)})}}}),yt(h)}function jr(s,l){var h=[],p=Hn(s)[0],v=Hn(s)[s.geometry.coordinates.length-1];if(Cs(p,jn(l))||Cs(v,jn(l)))return yt([s]);var k=(0,la.default)(),B=Us(s);k.load(B);var T=k.search(l);if(!T.features.length)return yt([s]);var V=pi(l,T),oe=[p],Re=ir(B,function(Me,Qe,dt){var Et=Hn(Qe)[1],jt=jn(l);return dt===V.id?(Me.push(jt),h.push(ot(Me)),Cs(jt,Et)?[jt]:[jt,Et]):(Me.push(Et),Me)},oe);return Re.length>1&&h.push(ot(Re)),yt(h)}function pi(s,l){if(!l.features.length)throw new Error("lines must contain features");if(l.features.length===1)return l.features[0];var h,p=1/0;return Xn(l,function(v){var k=pr(v,s),B=k.properties.dist;B<p&&(h=v,p=B)}),h}function Cs(s,l){return s[0]===l[0]&&s[1]===l[1]}var or=Fr;function Ji(s,l,h){if(h===void 0&&(h={}),!s)throw new Error("point is required");if(!l)throw new Error("polygon is required");var p=jn(s),v=Ai(l),k=v.type,B=l.bbox,T=v.coordinates;if(B&&Da(p,B)===!1)return!1;k==="Polygon"&&(T=[T]);for(var V=!1,oe=0;oe<T.length&&!V;oe++)if(Oo(p,T[oe][0],h.ignoreBoundary)){for(var Re=!1,Me=1;Me<T[oe].length&&!Re;)Oo(p,T[oe][Me],!h.ignoreBoundary)&&(Re=!0),Me++;Re||(V=!0)}return V}function Oo(s,l,h){var p=!1;l[0][0]===l[l.length-1][0]&&l[0][1]===l[l.length-1][1]&&(l=l.slice(0,l.length-1));for(var v=0,k=l.length-1;v<l.length;k=v++){var B=l[v][0],T=l[v][1],V=l[k][0],oe=l[k][1],Re=s[1]*(B-V)+T*(V-s[0])+oe*(s[0]-B)===0&&(B-s[0])*(V-s[0])<=0&&(T-s[1])*(oe-s[1])<=0;if(Re)return!h;var Me=T>s[1]!=oe>s[1]&&s[0]<(V-B)*(s[1]-T)/(oe-T)+B;Me&&(p=!p)}return p}function Da(s,l){return l[0]<=s[0]&&l[1]<=s[1]&&l[2]>=s[0]&&l[3]>=s[1]}function Oa(s,l,h){h===void 0&&(h={});for(var p=jn(s),v=Hn(l),k=0;k<v.length-1;k++){var B=!1;if(h.ignoreEndVertices&&(k===0&&(B="start"),k===v.length-2&&(B="end"),k===0&&k+1===v.length-1&&(B="both")),Yi(v[k],v[k+1],p,B,typeof h.epsilon>"u"?null:h.epsilon))return!0}return!1}function Yi(s,l,h,p,v){var k=h[0],B=h[1],T=s[0],V=s[1],oe=l[0],Re=l[1],Me=h[0]-T,Qe=h[1]-V,dt=oe-T,Et=Re-V,jt=Me*Et-Qe*dt;if(v!==null){if(Math.abs(jt)>v)return!1}else if(jt!==0)return!1;if(p){if(p==="start")return Math.abs(dt)>=Math.abs(Et)?dt>0?T<k&&k<=oe:oe<=k&&k<T:Et>0?V<B&&B<=Re:Re<=B&&B<V;if(p==="end")return Math.abs(dt)>=Math.abs(Et)?dt>0?T<=k&&k<oe:oe<k&&k<=T:Et>0?V<=B&&B<Re:Re<B&&B<=V;if(p==="both")return Math.abs(dt)>=Math.abs(Et)?dt>0?T<k&&k<oe:oe<k&&k<T:Et>0?V<B&&B<Re:Re<B&&B<V}else return Math.abs(dt)>=Math.abs(Et)?dt>0?T<=k&&k<=oe:oe<=k&&k<=T:Et>0?V<=B&&B<=Re:Re<=B&&B<=V;return!1}var mr=Oa;function ao(s,l){var h=Ai(s),p=Ai(l),v=h.type,k=p.type,B=h.coordinates,T=p.coordinates;switch(v){case"Point":switch(k){case"Point":return Gn(B,T);default:throw new Error("feature2 "+k+" geometry not supported")}case"MultiPoint":switch(k){case"Point":return ks(h,p);case"MultiPoint":return ua(h,p);default:throw new Error("feature2 "+k+" geometry not supported")}case"LineString":switch(k){case"Point":return mr(p,h,{ignoreEndVertices:!0});case"LineString":return Hs(h,p);case"MultiPoint":return lo(h,p);default:throw new Error("feature2 "+k+" geometry not supported")}case"Polygon":switch(k){case"Point":return Ji(p,h,{ignoreBoundary:!0});case"LineString":return zr(h,p);case"Polygon":return zi(h,p);case"MultiPoint":return uo(h,p);default:throw new Error("feature2 "+k+" geometry not supported")}default:throw new Error("feature1 "+v+" geometry not supported")}}function ks(s,l){var h,p=!1;for(h=0;h<s.coordinates.length;h++)if(Gn(s.coordinates[h],l.coordinates)){p=!0;break}return p}function ua(s,l){for(var h=0,p=l.coordinates;h<p.length;h++){for(var v=p[h],k=!1,B=0,T=s.coordinates;B<T.length;B++){var V=T[B];if(Gn(v,V)){k=!0;break}}if(!k)return!1}return!0}function lo(s,l){for(var h=!1,p=0,v=l.coordinates;p<v.length;p++){var k=v[p];if(mr(k,s,{ignoreEndVertices:!0})&&(h=!0),!mr(k,s))return!1}return!!h}function uo(s,l){for(var h=0,p=l.coordinates;h<p.length;h++){var v=p[h];if(!Ji(v,s,{ignoreBoundary:!0}))return!1}return!0}function Hs(s,l){for(var h=!1,p=0,v=l.coordinates;p<v.length;p++){var k=v[p];if(mr({type:"Point",coordinates:k},s,{ignoreEndVertices:!0})&&(h=!0),!mr({type:"Point",coordinates:k},s,{ignoreEndVertices:!1}))return!1}return h}function zr(s,l){var h=!1,p=0,v=xs(s),k=xs(l);if(!Jn(v,k))return!1;for(p;p<l.coordinates.length-1;p++){var B=yi(l.coordinates[p],l.coordinates[p+1]);if(Ji({type:"Point",coordinates:B},s,{ignoreBoundary:!0})){h=!0;break}}return h}function zi(s,l){if(s.type==="Feature"&&s.geometry===null||l.type==="Feature"&&l.geometry===null)return!1;var h=xs(s),p=xs(l);if(!Jn(h,p))return!1;for(var v=Ai(l).coordinates,k=0,B=v;k<B.length;k++)for(var T=B[k],V=0,oe=T;V<oe.length;V++){var Re=oe[V];if(!Ji(Re,s))return!1}return!0}function Jn(s,l){return!(s[0]>l[0]||s[2]<l[2]||s[1]>l[1]||s[3]<l[3])}function Gn(s,l){return s[0]===l[0]&&s[1]===l[1]}function yi(s,l){return[(s[0]+l[0])/2,(s[1]+l[1])/2]}var Qn=m(kr()),ns=s=>()=>s,co=s=>{let l=s?(h,p)=>p.minus(h).abs().isLessThanOrEqualTo(s):ns(!1);return(h,p)=>l(h,p)?0:h.comparedTo(p)};function Ps(s){let l=s?(h,p,v,k,B)=>h.exponentiatedBy(2).isLessThanOrEqualTo(k.minus(p).exponentiatedBy(2).plus(B.minus(v).exponentiatedBy(2)).times(s)):ns(!1);return(h,p,v)=>{let k=h.x,B=h.y,T=v.x,V=v.y,oe=B.minus(V).times(p.x.minus(T)).minus(k.minus(T).times(p.y.minus(V)));return l(oe,k,B,T,V)?0:oe.comparedTo(0)}}var il=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,ho=Math.ceil,Bi=Math.floor,ei="[BigNumber Error] ",gr=ei+"Number primitive has more than 15 significant digits: ",vr=1e14,pn=14,rl=9007199254740991,Ro=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Ur=1e7,Xi=1e9;function Nl(s){var l,h,p,v=Oe.prototype={constructor:Oe,toString:null,valueOf:null},k=new Oe(1),B=20,T=4,V=-7,oe=21,Re=-1e7,Me=1e7,Qe=!1,dt=1,Et=0,jt={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},qt="0123456789abcdefghijklmnopqrstuvwxyz",mn=!0;function Oe(K,ue){var we,_e,xe,Le,Ge,Ve,Je,ct,ut=this;if(!(ut instanceof Oe))return new Oe(K,ue);if(ue==null){if(K&&K._isBigNumber===!0){ut.s=K.s,!K.c||K.e>Me?ut.c=ut.e=null:K.e<Re?ut.c=[ut.e=0]:(ut.e=K.e,ut.c=K.c.slice());return}if((Ve=typeof K=="number")&&K*0==0){if(ut.s=1/K<0?(K=-K,-1):1,K===~~K){for(Le=0,Ge=K;Ge>=10;Ge/=10,Le++);Le>Me?ut.c=ut.e=null:(ut.e=Le,ut.c=[K]);return}ct=String(K)}else{if(!il.test(ct=String(K)))return p(ut,ct,Ve);ut.s=ct.charCodeAt(0)==45?(ct=ct.slice(1),-1):1}(Le=ct.indexOf("."))>-1&&(ct=ct.replace(".","")),(Ge=ct.search(/e/i))>0?(Le<0&&(Le=Ge),Le+=+ct.slice(Ge+1),ct=ct.substring(0,Ge)):Le<0&&(Le=ct.length)}else{if(i(ue,2,qt.length,"Base"),ue==10&&mn)return ut=new Oe(K),rt(ut,B+ut.e+1,T);if(ct=String(K),Ve=typeof K=="number"){if(K*0!=0)return p(ut,ct,Ve,ue);if(ut.s=1/K<0?(ct=ct.slice(1),-1):1,Oe.DEBUG&&ct.replace(/^0\.0*|\./,"").length>15)throw Error(gr+K)}else ut.s=ct.charCodeAt(0)===45?(ct=ct.slice(1),-1):1;for(we=qt.slice(0,ue),Le=Ge=0,Je=ct.length;Ge<Je;Ge++)if(we.indexOf(_e=ct.charAt(Ge))<0){if(_e=="."){if(Ge>Le){Le=Je;continue}}else if(!xe&&(ct==ct.toUpperCase()&&(ct=ct.toLowerCase())||ct==ct.toLowerCase()&&(ct=ct.toUpperCase()))){xe=!0,Ge=-1,Le=0;continue}return p(ut,String(K),Ve,ue)}Ve=!1,ct=h(ct,ue,10,ut.s),(Le=ct.indexOf("."))>-1?ct=ct.replace(".",""):Le=ct.length}for(Ge=0;ct.charCodeAt(Ge)===48;Ge++);for(Je=ct.length;ct.charCodeAt(--Je)===48;);if(ct=ct.slice(Ge,++Je)){if(Je-=Ge,Ve&&Oe.DEBUG&&Je>15&&(K>rl||K!==Bi(K)))throw Error(gr+ut.s*K);if((Le=Le-Ge-1)>Me)ut.c=ut.e=null;else if(Le<Re)ut.c=[ut.e=0];else{if(ut.e=Le,ut.c=[],Ge=(Le+1)%pn,Le<0&&(Ge+=pn),Ge<Je){for(Ge&&ut.c.push(+ct.slice(0,Ge)),Je-=pn;Ge<Je;)ut.c.push(+ct.slice(Ge,Ge+=pn));Ge=pn-(ct=ct.slice(Ge)).length}else Ge-=Je;for(;Ge--;ct+="0");ut.c.push(+ct)}}else ut.c=[ut.e=0]}Oe.clone=Nl,Oe.ROUND_UP=0,Oe.ROUND_DOWN=1,Oe.ROUND_CEIL=2,Oe.ROUND_FLOOR=3,Oe.ROUND_HALF_UP=4,Oe.ROUND_HALF_DOWN=5,Oe.ROUND_HALF_EVEN=6,Oe.ROUND_HALF_CEIL=7,Oe.ROUND_HALF_FLOOR=8,Oe.EUCLID=9,Oe.config=Oe.set=function(K){var ue,we;if(K!=null)if(typeof K=="object"){if(K.hasOwnProperty(ue="DECIMAL_PLACES")&&(we=K[ue],i(we,0,Xi,ue),B=we),K.hasOwnProperty(ue="ROUNDING_MODE")&&(we=K[ue],i(we,0,8,ue),T=we),K.hasOwnProperty(ue="EXPONENTIAL_AT")&&(we=K[ue],we&&we.pop?(i(we[0],-1e9,0,ue),i(we[1],0,Xi,ue),V=we[0],oe=we[1]):(i(we,-1e9,Xi,ue),V=-(oe=we<0?-we:we))),K.hasOwnProperty(ue="RANGE"))if(we=K[ue],we&&we.pop)i(we[0],-1e9,-1,ue),i(we[1],1,Xi,ue),Re=we[0],Me=we[1];else if(i(we,-1e9,Xi,ue),we)Re=-(Me=we<0?-we:we);else throw Error(ei+ue+" cannot be zero: "+we);if(K.hasOwnProperty(ue="CRYPTO"))if(we=K[ue],we===!!we)if(we)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))Qe=we;else throw Qe=!we,Error(ei+"crypto unavailable");else Qe=we;else throw Error(ei+ue+" not true or false: "+we);if(K.hasOwnProperty(ue="MODULO_MODE")&&(we=K[ue],i(we,0,9,ue),dt=we),K.hasOwnProperty(ue="POW_PRECISION")&&(we=K[ue],i(we,0,Xi,ue),Et=we),K.hasOwnProperty(ue="FORMAT"))if(we=K[ue],typeof we=="object")jt=we;else throw Error(ei+ue+" not an object: "+we);if(K.hasOwnProperty(ue="ALPHABET"))if(we=K[ue],typeof we=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(we))mn=we.slice(0,10)=="0123456789",qt=we;else throw Error(ei+ue+" invalid: "+we)}else throw Error(ei+"Object expected: "+K);return{DECIMAL_PLACES:B,ROUNDING_MODE:T,EXPONENTIAL_AT:[V,oe],RANGE:[Re,Me],CRYPTO:Qe,MODULO_MODE:dt,POW_PRECISION:Et,FORMAT:jt,ALPHABET:qt}},Oe.isBigNumber=function(K){if(!K||K._isBigNumber!==!0)return!1;if(!Oe.DEBUG)return!0;var ue,we,_e=K.c,xe=K.e,Le=K.s;e:if({}.toString.call(_e)=="[object Array]"){if((Le===1||Le===-1)&&xe>=-1e9&&xe<=Xi&&xe===Bi(xe)){if(_e[0]===0){if(xe===0&&_e.length===1)return!0;break e}if(ue=(xe+1)%pn,ue<1&&(ue+=pn),String(_e[0]).length==ue){for(ue=0;ue<_e.length;ue++)if(we=_e[ue],we<0||we>=vr||we!==Bi(we))break e;if(we!==0)return!0}}}else if(_e===null&&xe===null&&(Le===null||Le===1||Le===-1))return!0;throw Error(ei+"Invalid BigNumber: "+K)},Oe.maximum=Oe.max=function(){return Ke(arguments,-1)},Oe.minimum=Oe.min=function(){return Ke(arguments,1)},Oe.random=function(){var K=9007199254740992,ue=Math.random()*K&2097151?function(){return Bi(Math.random()*K)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(we){var _e,xe,Le,Ge,Ve,Je=0,ct=[],ut=new Oe(k);if(we==null?we=B:i(we,0,Xi),Ge=ho(we/pn),Qe)if(crypto.getRandomValues){for(_e=crypto.getRandomValues(new Uint32Array(Ge*=2));Je<Ge;)Ve=_e[Je]*131072+(_e[Je+1]>>>11),Ve>=9e15?(xe=crypto.getRandomValues(new Uint32Array(2)),_e[Je]=xe[0],_e[Je+1]=xe[1]):(ct.push(Ve%1e14),Je+=2);Je=Ge/2}else if(crypto.randomBytes){for(_e=crypto.randomBytes(Ge*=7);Je<Ge;)Ve=(_e[Je]&31)*281474976710656+_e[Je+1]*1099511627776+_e[Je+2]*4294967296+_e[Je+3]*16777216+(_e[Je+4]<<16)+(_e[Je+5]<<8)+_e[Je+6],Ve>=9e15?crypto.randomBytes(7).copy(_e,Je):(ct.push(Ve%1e14),Je+=7);Je=Ge/7}else throw Qe=!1,Error(ei+"crypto unavailable");if(!Qe)for(;Je<Ge;)Ve=ue(),Ve<9e15&&(ct[Je++]=Ve%1e14);for(Ge=ct[--Je],we%=pn,Ge&&we&&(Ve=Ro[pn-we],ct[Je]=Bi(Ge/Ve)*Ve);ct[Je]===0;ct.pop(),Je--);if(Je<0)ct=[Le=0];else{for(Le=-1;ct[0]===0;ct.splice(0,1),Le-=pn);for(Je=1,Ve=ct[0];Ve>=10;Ve/=10,Je++);Je<pn&&(Le-=pn-Je)}return ut.e=Le,ut.c=ct,ut}}(),Oe.sum=function(){for(var K=1,ue=arguments,we=new Oe(ue[0]);K<ue.length;)we=we.plus(ue[K++]);return we},h=function(){var K="0123456789";function ue(we,_e,xe,Le){for(var Ge,Ve=[0],Je,ct=0,ut=we.length;ct<ut;){for(Je=Ve.length;Je--;Ve[Je]*=_e);for(Ve[0]+=Le.indexOf(we.charAt(ct++)),Ge=0;Ge<Ve.length;Ge++)Ve[Ge]>xe-1&&(Ve[Ge+1]==null&&(Ve[Ge+1]=0),Ve[Ge+1]+=Ve[Ge]/xe|0,Ve[Ge]%=xe)}return Ve.reverse()}return function(we,_e,xe,Le,Ge){var Ve,Je,ct,ut,Mt,Kt,Qt,rn,$n=we.indexOf("."),Wn=B,Rn=T;for($n>=0&&(ut=Et,Et=0,we=we.replace(".",""),rn=new Oe(_e),Kt=rn.pow(we.length-$n),Et=ut,rn.c=ue(P(lr(Kt.c),Kt.e,"0"),10,xe,K),rn.e=rn.c.length),Qt=ue(we,_e,xe,Ge?(Ve=qt,K):(Ve=K,qt)),ct=ut=Qt.length;Qt[--ut]==0;Qt.pop());if(!Qt[0])return Ve.charAt(0);if($n<0?--ct:(Kt.c=Qt,Kt.e=ct,Kt.s=Le,Kt=l(Kt,rn,Wn,Rn,xe),Qt=Kt.c,Mt=Kt.r,ct=Kt.e),Je=ct+Wn+1,$n=Qt[Je],ut=xe/2,Mt=Mt||Je<0||Qt[Je+1]!=null,Mt=Rn<4?($n!=null||Mt)&&(Rn==0||Rn==(Kt.s<0?3:2)):$n>ut||$n==ut&&(Rn==4||Mt||Rn==6&&Qt[Je-1]&1||Rn==(Kt.s<0?8:7)),Je<1||!Qt[0])we=Mt?P(Ve.charAt(1),-Wn,Ve.charAt(0)):Ve.charAt(0);else{if(Qt.length=Je,Mt)for(--xe;++Qt[--Je]>xe;)Qt[Je]=0,Je||(++ct,Qt=[1].concat(Qt));for(ut=Qt.length;!Qt[--ut];);for($n=0,we="";$n<=ut;we+=Ve.charAt(Qt[$n++]));we=P(we,ct,Ve.charAt(0))}return we}}(),l=function(){function K(_e,xe,Le){var Ge,Ve,Je,ct,ut=0,Mt=_e.length,Kt=xe%Ur,Qt=xe/Ur|0;for(_e=_e.slice();Mt--;)Je=_e[Mt]%Ur,ct=_e[Mt]/Ur|0,Ge=Qt*Je+ct*Kt,Ve=Kt*Je+Ge%Ur*Ur+ut,ut=(Ve/Le|0)+(Ge/Ur|0)+Qt*ct,_e[Mt]=Ve%Le;return ut&&(_e=[ut].concat(_e)),_e}function ue(_e,xe,Le,Ge){var Ve,Je;if(Le!=Ge)Je=Le>Ge?1:-1;else for(Ve=Je=0;Ve<Le;Ve++)if(_e[Ve]!=xe[Ve]){Je=_e[Ve]>xe[Ve]?1:-1;break}return Je}function we(_e,xe,Le,Ge){for(var Ve=0;Le--;)_e[Le]-=Ve,Ve=_e[Le]<xe[Le]?1:0,_e[Le]=Ve*Ge+_e[Le]-xe[Le];for(;!_e[0]&&_e.length>1;_e.splice(0,1));}return function(_e,xe,Le,Ge,Ve){var Je,ct,ut,Mt,Kt,Qt,rn,$n,Wn,Rn,ti,yr,al,fo,$u,po,Fl,rs=_e.s==xe.s?1:-1,er=_e.c,bi=xe.c;if(!er||!er[0]||!bi||!bi[0])return new Oe(!_e.s||!xe.s||(er?bi&&er[0]==bi[0]:!bi)?NaN:er&&er[0]==0||!bi?rs*0:rs/0);for($n=new Oe(rs),Wn=$n.c=[],ct=_e.e-xe.e,rs=Le+ct+1,Ve||(Ve=vr,ct=ar(_e.e/pn)-ar(xe.e/pn),rs=rs/pn|0),ut=0;bi[ut]==(er[ut]||0);ut++);if(bi[ut]>(er[ut]||0)&&ct--,rs<0)Wn.push(1),Mt=!0;else{for(fo=er.length,po=bi.length,ut=0,rs+=2,Kt=Bi(Ve/(bi[0]+1)),Kt>1&&(bi=K(bi,Kt,Ve),er=K(er,Kt,Ve),po=bi.length,fo=er.length),al=po,Rn=er.slice(0,po),ti=Rn.length;ti<po;Rn[ti++]=0);Fl=bi.slice(),Fl=[0].concat(Fl),$u=bi[0],bi[1]>=Ve/2&&$u++;do{if(Kt=0,Je=ue(bi,Rn,po,ti),Je<0){if(yr=Rn[0],po!=ti&&(yr=yr*Ve+(Rn[1]||0)),Kt=Bi(yr/$u),Kt>1)for(Kt>=Ve&&(Kt=Ve-1),Qt=K(bi,Kt,Ve),rn=Qt.length,ti=Rn.length;ue(Qt,Rn,rn,ti)==1;)Kt--,we(Qt,po<rn?Fl:bi,rn,Ve),rn=Qt.length,Je=1;else Kt==0&&(Je=Kt=1),Qt=bi.slice(),rn=Qt.length;if(rn<ti&&(Qt=[0].concat(Qt)),we(Rn,Qt,ti,Ve),ti=Rn.length,Je==-1)for(;ue(bi,Rn,po,ti)<1;)Kt++,we(Rn,po<ti?Fl:bi,ti,Ve),ti=Rn.length}else Je===0&&(Kt++,Rn=[0]);Wn[ut++]=Kt,Rn[0]?Rn[ti++]=er[al]||0:(Rn=[er[al]],ti=1)}while((al++<fo||Rn[0]!=null)&&rs--);Mt=Rn[0]!=null,Wn[0]||Wn.splice(0,1)}if(Ve==vr){for(ut=1,rs=Wn[0];rs>=10;rs/=10,ut++);rt($n,Le+($n.e=ut+ct*pn-1)+1,Ge,Mt)}else $n.e=ct,$n.r=+Mt;return $n}}();function ze(K,ue,we,_e){var xe,Le,Ge,Ve,Je;if(we==null?we=T:i(we,0,8),!K.c)return K.toString();if(xe=K.c[0],Ge=K.e,ue==null)Je=lr(K.c),Je=_e==1||_e==2&&(Ge<=V||Ge>=oe)?g(Je,Ge):P(Je,Ge,"0");else if(K=rt(new Oe(K),ue,we),Le=K.e,Je=lr(K.c),Ve=Je.length,_e==1||_e==2&&(ue<=Le||Le<=V)){for(;Ve<ue;Je+="0",Ve++);Je=g(Je,Le)}else if(ue-=Ge,Je=P(Je,Le,"0"),Le+1>Ve){if(--ue>0)for(Je+=".";ue--;Je+="0");}else if(ue+=Le-Ve,ue>0)for(Le+1==Ve&&(Je+=".");ue--;Je+="0");return K.s<0&&xe?"-"+Je:Je}function Ke(K,ue){for(var we,_e,xe=1,Le=new Oe(K[0]);xe<K.length;xe++)_e=new Oe(K[xe]),(!_e.s||(we=Ss(Le,_e))===ue||we===0&&Le.s===ue)&&(Le=_e);return Le}function vt(K,ue,we){for(var _e=1,xe=ue.length;!ue[--xe];ue.pop());for(xe=ue[0];xe>=10;xe/=10,_e++);return(we=_e+we*pn-1)>Me?K.c=K.e=null:we<Re?K.c=[K.e=0]:(K.e=we,K.c=ue),K}p=function(){var K=/^(-?)0([xbo])(?=\w[\w.]*$)/i,ue=/^([^.]+)\.$/,we=/^\.([^.]+)$/,_e=/^-?(Infinity|NaN)$/,xe=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(Le,Ge,Ve,Je){var ct,ut=Ve?Ge:Ge.replace(xe,"");if(_e.test(ut))Le.s=isNaN(ut)?null:ut<0?-1:1;else{if(!Ve&&(ut=ut.replace(K,function(Mt,Kt,Qt){return ct=(Qt=Qt.toLowerCase())=="x"?16:Qt=="b"?2:8,!Je||Je==ct?Kt:Mt}),Je&&(ct=Je,ut=ut.replace(ue,"$1").replace(we,"0.$1")),Ge!=ut))return new Oe(ut,ct);if(Oe.DEBUG)throw Error(ei+"Not a"+(Je?" base "+Je:"")+" number: "+Ge);Le.s=null}Le.c=Le.e=null}}();function rt(K,ue,we,_e){var xe,Le,Ge,Ve,Je,ct,ut,Mt=K.c,Kt=Ro;if(Mt){e:{for(xe=1,Ve=Mt[0];Ve>=10;Ve/=10,xe++);if(Le=ue-xe,Le<0)Le+=pn,Ge=ue,Je=Mt[ct=0],ut=Bi(Je/Kt[xe-Ge-1]%10);else if(ct=ho((Le+1)/pn),ct>=Mt.length)if(_e){for(;Mt.length<=ct;Mt.push(0));Je=ut=0,xe=1,Le%=pn,Ge=Le-pn+1}else break e;else{for(Je=Ve=Mt[ct],xe=1;Ve>=10;Ve/=10,xe++);Le%=pn,Ge=Le-pn+xe,ut=Ge<0?0:Bi(Je/Kt[xe-Ge-1]%10)}if(_e=_e||ue<0||Mt[ct+1]!=null||(Ge<0?Je:Je%Kt[xe-Ge-1]),_e=we<4?(ut||_e)&&(we==0||we==(K.s<0?3:2)):ut>5||ut==5&&(we==4||_e||we==6&&(Le>0?Ge>0?Je/Kt[xe-Ge]:0:Mt[ct-1])%10&1||we==(K.s<0?8:7)),ue<1||!Mt[0])return Mt.length=0,_e?(ue-=K.e+1,Mt[0]=Kt[(pn-ue%pn)%pn],K.e=-ue||0):Mt[0]=K.e=0,K;if(Le==0?(Mt.length=ct,Ve=1,ct--):(Mt.length=ct+1,Ve=Kt[pn-Le],Mt[ct]=Ge>0?Bi(Je/Kt[xe-Ge]%Kt[Ge])*Ve:0),_e)for(;;)if(ct==0){for(Le=1,Ge=Mt[0];Ge>=10;Ge/=10,Le++);for(Ge=Mt[0]+=Ve,Ve=1;Ge>=10;Ge/=10,Ve++);Le!=Ve&&(K.e++,Mt[0]==vr&&(Mt[0]=1));break}else{if(Mt[ct]+=Ve,Mt[ct]!=vr)break;Mt[ct--]=0,Ve=1}for(Le=Mt.length;Mt[--Le]===0;Mt.pop());}K.e>Me?K.c=K.e=null:K.e<Re&&(K.c=[K.e=0])}return K}function pt(K){var ue,we=K.e;return we===null?K.toString():(ue=lr(K.c),ue=we<=V||we>=oe?g(ue,we):P(ue,we,"0"),K.s<0?"-"+ue:ue)}return v.absoluteValue=v.abs=function(){var K=new Oe(this);return K.s<0&&(K.s=1),K},v.comparedTo=function(K,ue){return Ss(this,new Oe(K,ue))},v.decimalPlaces=v.dp=function(K,ue){var we,_e,xe,Le=this;if(K!=null)return i(K,0,Xi),ue==null?ue=T:i(ue,0,8),rt(new Oe(Le),K+Le.e+1,ue);if(!(we=Le.c))return null;if(_e=((xe=we.length-1)-ar(this.e/pn))*pn,xe=we[xe])for(;xe%10==0;xe/=10,_e--);return _e<0&&(_e=0),_e},v.dividedBy=v.div=function(K,ue){return l(this,new Oe(K,ue),B,T)},v.dividedToIntegerBy=v.idiv=function(K,ue){return l(this,new Oe(K,ue),0,1)},v.exponentiatedBy=v.pow=function(K,ue){var we,_e,xe,Le,Ge,Ve,Je,ct,ut,Mt=this;if(K=new Oe(K),K.c&&!K.isInteger())throw Error(ei+"Exponent not an integer: "+pt(K));if(ue!=null&&(ue=new Oe(ue)),Ve=K.e>14,!Mt.c||!Mt.c[0]||Mt.c[0]==1&&!Mt.e&&Mt.c.length==1||!K.c||!K.c[0])return ut=new Oe(Math.pow(+pt(Mt),Ve?K.s*(2-c(K)):+pt(K))),ue?ut.mod(ue):ut;if(Je=K.s<0,ue){if(ue.c?!ue.c[0]:!ue.s)return new Oe(NaN);_e=!Je&&Mt.isInteger()&&ue.isInteger(),_e&&(Mt=Mt.mod(ue))}else{if(K.e>9&&(Mt.e>0||Mt.e<-1||(Mt.e==0?Mt.c[0]>1||Ve&&Mt.c[1]>=24e7:Mt.c[0]<8e13||Ve&&Mt.c[0]<=9999975e7)))return Le=Mt.s<0&&c(K)?-0:0,Mt.e>-1&&(Le=1/Le),new Oe(Je?1/Le:Le);Et&&(Le=ho(Et/pn+2))}for(Ve?(we=new Oe(.5),Je&&(K.s=1),ct=c(K)):(xe=Math.abs(+pt(K)),ct=xe%2),ut=new Oe(k);;){if(ct){if(ut=ut.times(Mt),!ut.c)break;Le?ut.c.length>Le&&(ut.c.length=Le):_e&&(ut=ut.mod(ue))}if(xe){if(xe=Bi(xe/2),xe===0)break;ct=xe%2}else if(K=K.times(we),rt(K,K.e+1,1),K.e>14)ct=c(K);else{if(xe=+pt(K),xe===0)break;ct=xe%2}Mt=Mt.times(Mt),Le?Mt.c&&Mt.c.length>Le&&(Mt.c.length=Le):_e&&(Mt=Mt.mod(ue))}return _e?ut:(Je&&(ut=k.div(ut)),ue?ut.mod(ue):Le?rt(ut,Et,T,Ge):ut)},v.integerValue=function(K){var ue=new Oe(this);return K==null?K=T:i(K,0,8),rt(ue,ue.e+1,K)},v.isEqualTo=v.eq=function(K,ue){return Ss(this,new Oe(K,ue))===0},v.isFinite=function(){return!!this.c},v.isGreaterThan=v.gt=function(K,ue){return Ss(this,new Oe(K,ue))>0},v.isGreaterThanOrEqualTo=v.gte=function(K,ue){return(ue=Ss(this,new Oe(K,ue)))===1||ue===0},v.isInteger=function(){return!!this.c&&ar(this.e/pn)>this.c.length-2},v.isLessThan=v.lt=function(K,ue){return Ss(this,new Oe(K,ue))<0},v.isLessThanOrEqualTo=v.lte=function(K,ue){return(ue=Ss(this,new Oe(K,ue)))===-1||ue===0},v.isNaN=function(){return!this.s},v.isNegative=function(){return this.s<0},v.isPositive=function(){return this.s>0},v.isZero=function(){return!!this.c&&this.c[0]==0},v.minus=function(K,ue){var we,_e,xe,Le,Ge=this,Ve=Ge.s;if(K=new Oe(K,ue),ue=K.s,!Ve||!ue)return new Oe(NaN);if(Ve!=ue)return K.s=-ue,Ge.plus(K);var Je=Ge.e/pn,ct=K.e/pn,ut=Ge.c,Mt=K.c;if(!Je||!ct){if(!ut||!Mt)return ut?(K.s=-ue,K):new Oe(Mt?Ge:NaN);if(!ut[0]||!Mt[0])return Mt[0]?(K.s=-ue,K):new Oe(ut[0]?Ge:T==3?-0:0)}if(Je=ar(Je),ct=ar(ct),ut=ut.slice(),Ve=Je-ct){for((Le=Ve<0)?(Ve=-Ve,xe=ut):(ct=Je,xe=Mt),xe.reverse(),ue=Ve;ue--;xe.push(0));xe.reverse()}else for(_e=(Le=(Ve=ut.length)<(ue=Mt.length))?Ve:ue,Ve=ue=0;ue<_e;ue++)if(ut[ue]!=Mt[ue]){Le=ut[ue]<Mt[ue];break}if(Le&&(xe=ut,ut=Mt,Mt=xe,K.s=-K.s),ue=(_e=Mt.length)-(we=ut.length),ue>0)for(;ue--;ut[we++]=0);for(ue=vr-1;_e>Ve;){if(ut[--_e]<Mt[_e]){for(we=_e;we&&!ut[--we];ut[we]=ue);--ut[we],ut[_e]+=vr}ut[_e]-=Mt[_e]}for(;ut[0]==0;ut.splice(0,1),--ct);return ut[0]?vt(K,ut,ct):(K.s=T==3?-1:1,K.c=[K.e=0],K)},v.modulo=v.mod=function(K,ue){var we,_e,xe=this;return K=new Oe(K,ue),!xe.c||!K.s||K.c&&!K.c[0]?new Oe(NaN):!K.c||xe.c&&!xe.c[0]?new Oe(xe):(dt==9?(_e=K.s,K.s=1,we=l(xe,K,0,3),K.s=_e,we.s*=_e):we=l(xe,K,0,dt),K=xe.minus(we.times(K)),!K.c[0]&&dt==1&&(K.s=xe.s),K)},v.multipliedBy=v.times=function(K,ue){var we,_e,xe,Le,Ge,Ve,Je,ct,ut,Mt,Kt,Qt,rn,$n,Wn,Rn=this,ti=Rn.c,yr=(K=new Oe(K,ue)).c;if(!ti||!yr||!ti[0]||!yr[0])return!Rn.s||!K.s||ti&&!ti[0]&&!yr||yr&&!yr[0]&&!ti?K.c=K.e=K.s=null:(K.s*=Rn.s,!ti||!yr?K.c=K.e=null:(K.c=[0],K.e=0)),K;for(_e=ar(Rn.e/pn)+ar(K.e/pn),K.s*=Rn.s,Je=ti.length,Mt=yr.length,Je<Mt&&(rn=ti,ti=yr,yr=rn,xe=Je,Je=Mt,Mt=xe),xe=Je+Mt,rn=[];xe--;rn.push(0));for($n=vr,Wn=Ur,xe=Mt;--xe>=0;){for(we=0,Kt=yr[xe]%Wn,Qt=yr[xe]/Wn|0,Ge=Je,Le=xe+Ge;Le>xe;)ct=ti[--Ge]%Wn,ut=ti[Ge]/Wn|0,Ve=Qt*ct+ut*Kt,ct=Kt*ct+Ve%Wn*Wn+rn[Le]+we,we=(ct/$n|0)+(Ve/Wn|0)+Qt*ut,rn[Le--]=ct%$n;rn[Le]=we}return we?++_e:rn.splice(0,1),vt(K,rn,_e)},v.negated=function(){var K=new Oe(this);return K.s=-K.s||null,K},v.plus=function(K,ue){var we,_e=this,xe=_e.s;if(K=new Oe(K,ue),ue=K.s,!xe||!ue)return new Oe(NaN);if(xe!=ue)return K.s=-ue,_e.minus(K);var Le=_e.e/pn,Ge=K.e/pn,Ve=_e.c,Je=K.c;if(!Le||!Ge){if(!Ve||!Je)return new Oe(xe/0);if(!Ve[0]||!Je[0])return Je[0]?K:new Oe(Ve[0]?_e:xe*0)}if(Le=ar(Le),Ge=ar(Ge),Ve=Ve.slice(),xe=Le-Ge){for(xe>0?(Ge=Le,we=Je):(xe=-xe,we=Ve),we.reverse();xe--;we.push(0));we.reverse()}for(xe=Ve.length,ue=Je.length,xe-ue<0&&(we=Je,Je=Ve,Ve=we,ue=xe),xe=0;ue;)xe=(Ve[--ue]=Ve[ue]+Je[ue]+xe)/vr|0,Ve[ue]=vr===Ve[ue]?0:Ve[ue]%vr;return xe&&(Ve=[xe].concat(Ve),++Ge),vt(K,Ve,Ge)},v.precision=v.sd=function(K,ue){var we,_e,xe,Le=this;if(K!=null&&K!==!!K)return i(K,1,Xi),ue==null?ue=T:i(ue,0,8),rt(new Oe(Le),K,ue);if(!(we=Le.c))return null;if(xe=we.length-1,_e=xe*pn+1,xe=we[xe]){for(;xe%10==0;xe/=10,_e--);for(xe=we[0];xe>=10;xe/=10,_e++);}return K&&Le.e+1>_e&&(_e=Le.e+1),_e},v.shiftedBy=function(K){return i(K,-9007199254740991,rl),this.times("1e"+K)},v.squareRoot=v.sqrt=function(){var K,ue,we,_e,xe,Le=this,Ge=Le.c,Ve=Le.s,Je=Le.e,ct=B+4,ut=new Oe("0.5");if(Ve!==1||!Ge||!Ge[0])return new Oe(!Ve||Ve<0&&(!Ge||Ge[0])?NaN:Ge?Le:1/0);if(Ve=Math.sqrt(+pt(Le)),Ve==0||Ve==1/0?(ue=lr(Ge),(ue.length+Je)%2==0&&(ue+="0"),Ve=Math.sqrt(+ue),Je=ar((Je+1)/2)-(Je<0||Je%2),Ve==1/0?ue="5e"+Je:(ue=Ve.toExponential(),ue=ue.slice(0,ue.indexOf("e")+1)+Je),we=new Oe(ue)):we=new Oe(Ve+""),we.c[0]){for(Je=we.e,Ve=Je+ct,Ve<3&&(Ve=0);;)if(xe=we,we=ut.times(xe.plus(l(Le,xe,ct,1))),lr(xe.c).slice(0,Ve)===(ue=lr(we.c)).slice(0,Ve))if(we.e<Je&&--Ve,ue=ue.slice(Ve-3,Ve+1),ue=="9999"||!_e&&ue=="4999"){if(!_e&&(rt(xe,xe.e+B+2,0),xe.times(xe).eq(Le))){we=xe;break}ct+=4,Ve+=4,_e=1}else{(!+ue||!+ue.slice(1)&&ue.charAt(0)=="5")&&(rt(we,we.e+B+2,1),K=!we.times(we).eq(Le));break}}return rt(we,we.e+B+1,T,K)},v.toExponential=function(K,ue){return K!=null&&(i(K,0,Xi),K++),ze(this,K,ue,1)},v.toFixed=function(K,ue){return K!=null&&(i(K,0,Xi),K=K+this.e+1),ze(this,K,ue)},v.toFormat=function(K,ue,we){var _e,xe=this;if(we==null)K!=null&&ue&&typeof ue=="object"?(we=ue,ue=null):K&&typeof K=="object"?(we=K,K=ue=null):we=jt;else if(typeof we!="object")throw Error(ei+"Argument not an object: "+we);if(_e=xe.toFixed(K,ue),xe.c){var Le,Ge=_e.split("."),Ve=+we.groupSize,Je=+we.secondaryGroupSize,ct=we.groupSeparator||"",ut=Ge[0],Mt=Ge[1],Kt=xe.s<0,Qt=Kt?ut.slice(1):ut,rn=Qt.length;if(Je&&(Le=Ve,Ve=Je,Je=Le,rn-=Le),Ve>0&&rn>0){for(Le=rn%Ve||Ve,ut=Qt.substr(0,Le);Le<rn;Le+=Ve)ut+=ct+Qt.substr(Le,Ve);Je>0&&(ut+=ct+Qt.slice(Le)),Kt&&(ut="-"+ut)}_e=Mt?ut+(we.decimalSeparator||"")+((Je=+we.fractionGroupSize)?Mt.replace(new RegExp("\\d{"+Je+"}\\B","g"),"$&"+(we.fractionGroupSeparator||"")):Mt):ut}return(we.prefix||"")+_e+(we.suffix||"")},v.toFraction=function(K){var ue,we,_e,xe,Le,Ge,Ve,Je,ct,ut,Mt,Kt,Qt=this,rn=Qt.c;if(K!=null&&(Ve=new Oe(K),!Ve.isInteger()&&(Ve.c||Ve.s!==1)||Ve.lt(k)))throw Error(ei+"Argument "+(Ve.isInteger()?"out of range: ":"not an integer: ")+pt(Ve));if(!rn)return new Oe(Qt);for(ue=new Oe(k),ct=we=new Oe(k),_e=Je=new Oe(k),Kt=lr(rn),Le=ue.e=Kt.length-Qt.e-1,ue.c[0]=Ro[(Ge=Le%pn)<0?pn+Ge:Ge],K=!K||Ve.comparedTo(ue)>0?Le>0?ue:ct:Ve,Ge=Me,Me=1/0,Ve=new Oe(Kt),Je.c[0]=0;ut=l(Ve,ue,0,1),xe=we.plus(ut.times(_e)),xe.comparedTo(K)!=1;)we=_e,_e=xe,ct=Je.plus(ut.times(xe=ct)),Je=xe,ue=Ve.minus(ut.times(xe=ue)),Ve=xe;return xe=l(K.minus(we),_e,0,1),Je=Je.plus(xe.times(ct)),we=we.plus(xe.times(_e)),Je.s=ct.s=Qt.s,Le=Le*2,Mt=l(ct,_e,Le,T).minus(Qt).abs().comparedTo(l(Je,we,Le,T).minus(Qt).abs())<1?[ct,_e]:[Je,we],Me=Ge,Mt},v.toNumber=function(){return+pt(this)},v.toPrecision=function(K,ue){return K!=null&&i(K,1,Xi),ze(this,K,ue,2)},v.toString=function(K){var ue,we=this,_e=we.s,xe=we.e;return xe===null?_e?(ue="Infinity",_e<0&&(ue="-"+ue)):ue="NaN":(K==null?ue=xe<=V||xe>=oe?g(lr(we.c),xe):P(lr(we.c),xe,"0"):K===10&&mn?(we=rt(new Oe(we),B+xe+1,T),ue=P(lr(we.c),we.e,"0")):(i(K,2,qt.length,"Base"),ue=h(P(lr(we.c),xe,"0"),10,K,_e,!0)),_e<0&&we.c[0]&&(ue="-"+ue)),ue},v.valueOf=v.toJSON=function(){return pt(this)},v._isBigNumber=!0,v[Symbol.toStringTag]="BigNumber",v[Symbol.for("nodejs.util.inspect.custom")]=v.valueOf,s!=null&&Oe.set(s),Oe}function ar(s){var l=s|0;return s>0||s===l?l:l-1}function lr(s){for(var l,h,p=1,v=s.length,k=s[0]+"";p<v;){for(l=s[p++]+"",h=pn-l.length;h--;l="0"+l);k+=l}for(v=k.length;k.charCodeAt(--v)===48;);return k.slice(0,v+1||1)}function Ss(s,l){var h,p,v=s.c,k=l.c,B=s.s,T=l.s,V=s.e,oe=l.e;if(!B||!T)return null;if(h=v&&!v[0],p=k&&!k[0],h||p)return h?p?0:-T:B;if(B!=T)return B;if(h=B<0,p=V==oe,!v||!k)return p?0:!v^h?1:-1;if(!p)return V>oe^h?1:-1;for(T=(V=v.length)<(oe=k.length)?V:oe,B=0;B<T;B++)if(v[B]!=k[B])return v[B]>k[B]^h?1:-1;return V==oe?0:V>oe^h?1:-1}function i(s,l,h,p){if(s<l||s>h||s!==Bi(s))throw Error(ei+(p||"Argument")+(typeof s=="number"?s<l||s>h?" out of range: ":" not an integer: ":" not a primitive number: ")+String(s))}function c(s){var l=s.c.length-1;return ar(s.e/pn)==l&&s.c[l]%2!=0}function g(s,l){return(s.length>1?s.charAt(0)+"."+s.slice(1):s)+(l<0?"e":"e+")+l}function P(s,l,h){var p,v;if(l<0){for(v=h+".";++l;v+=h);s=v+s}else if(p=s.length,++l>p){for(v=h,l-=p;--l;v+=h);s+=v}else l<p&&(s=s.slice(0,l)+"."+s.slice(l));return s}var R=Nl(),he=R,qe=class{constructor(s){zt(this,"key");zt(this,"left",null);zt(this,"right",null);this.key=s}},ft=class extends qe{constructor(s){super(s)}},_t=class{constructor(){zt(this,"size",0);zt(this,"modificationCount",0);zt(this,"splayCount",0)}splay(s){let l=this.root;if(l==null)return this.compare(s,s),-1;let h=null,p=null,v=null,k=null,B=l,T=this.compare,V;for(;;)if(V=T(B.key,s),V>0){let oe=B.left;if(oe==null||(V=T(oe.key,s),V>0&&(B.left=oe.right,oe.right=B,B=oe,oe=B.left,oe==null)))break;h==null?p=B:h.left=B,h=B,B=oe}else if(V<0){let oe=B.right;if(oe==null||(V=T(oe.key,s),V<0&&(B.right=oe.left,oe.left=B,B=oe,oe=B.right,oe==null)))break;v==null?k=B:v.right=B,v=B,B=oe}else break;return v!=null&&(v.right=B.left,B.left=k),h!=null&&(h.left=B.right,B.right=p),this.root!==B&&(this.root=B,this.splayCount++),V}splayMin(s){let l=s,h=l.left;for(;h!=null;){let p=h;l.left=p.right,p.right=l,l=p,h=l.left}return l}splayMax(s){let l=s,h=l.right;for(;h!=null;){let p=h;l.right=p.left,p.left=l,l=p,h=l.right}return l}_delete(s){if(this.root==null||this.splay(s)!=0)return null;let l=this.root,h=l,p=l.left;if(this.size--,p==null)this.root=l.right;else{let v=l.right;l=this.splayMax(p),l.right=v,this.root=l}return this.modificationCount++,h}addNewRoot(s,l){this.size++,this.modificationCount++;let h=this.root;if(h==null){this.root=s;return}l<0?(s.left=h,s.right=h.right,h.right=null):(s.right=h,s.left=h.left,h.left=null),this.root=s}_first(){let s=this.root;return s==null?null:(this.root=this.splayMin(s),this.root)}_last(){let s=this.root;return s==null?null:(this.root=this.splayMax(s),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(s){return this.validKey(s)&&this.splay(s)==0}defaultCompare(){return(s,l)=>s<l?-1:s>l?1:0}wrap(){return{getRoot:()=>this.root,setRoot:s=>{this.root=s},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:s=>{this.splayCount=s},splay:s=>this.splay(s),has:s=>this.has(s)}}},Bt=class ic extends _t{constructor(h,p){super();zt(this,"root",null);zt(this,"compare");zt(this,"validKey");zt(this,$t,"[object Set]");this.compare=h??this.defaultCompare(),this.validKey=p??(v=>v!=null&&v!=null)}delete(h){return this.validKey(h)?this._delete(h)!=null:!1}deleteAll(h){for(let p of h)this.delete(p)}forEach(h){let p=this[Symbol.iterator](),v;for(;v=p.next(),!v.done;)h(v.value,v.value,this)}add(h){let p=this.splay(h);return p!=0&&this.addNewRoot(new ft(h),p),this}addAndReturn(h){let p=this.splay(h);return p!=0&&this.addNewRoot(new ft(h),p),this.root.key}addAll(h){for(let p of h)this.add(p)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(h){if(h==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(h)<0)return this.root.key;let p=this.root.left;if(p==null)return null;let v=p.right;for(;v!=null;)p=v,v=p.right;return p.key}firstAfter(h){if(h==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(h)>0)return this.root.key;let p=this.root.right;if(p==null)return null;let v=p.left;for(;v!=null;)p=v,v=p.left;return p.key}retainAll(h){let p=new ic(this.compare,this.validKey),v=this.modificationCount;for(let k of h){if(v!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(k)&&this.splay(k)==0&&p.add(this.root.key)}p.size!=this.size&&(this.root=p.root,this.size=p.size,this.modificationCount++)}lookup(h){return!this.validKey(h)||this.splay(h)!=0?null:this.root.key}intersection(h){let p=new ic(this.compare,this.validKey);for(let v of this)h.has(v)&&p.add(v);return p}difference(h){let p=new ic(this.compare,this.validKey);for(let v of this)h.has(v)||p.add(v);return p}union(h){let p=this.clone();return p.addAll(h),p}clone(){let h=new ic(this.compare,this.validKey);return h.size=this.size,h.root=this.copyNode(this.root),h}copyNode(h){if(h==null)return null;function p(k,B){let T,V;do{if(T=k.left,V=k.right,T!=null){let oe=new ft(T.key);B.left=oe,p(T,oe)}if(V!=null){let oe=new ft(V.key);B.right=oe,k=V,B=oe}}while(V!=null)}let v=new ft(h.key);return p(h,v),v}toSet(){return this.clone()}entries(){return new An(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(hn=Symbol.iterator,$t=Symbol.toStringTag,hn)](){return new an(this.wrap())}},Zt=class{constructor(s){zt(this,"tree");zt(this,"path",new Array);zt(this,"modificationCount",null);zt(this,"splayCount");this.tree=s,this.splayCount=s.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let s=this.path[this.path.length-1];return this.getValue(s)}rebuildPath(s){this.path.splice(0,this.path.length),this.tree.splay(s),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(s){for(;s!=null;)this.path.push(s),s=s.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let h=this.tree.getRoot();for(;h!=null;)this.path.push(h),h=h.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let s=this.path[this.path.length-1],l=s.right;if(l!=null){for(;l!=null;)this.path.push(l),l=l.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===s;)s=this.path.pop();return this.path.length>0}},an=class extends Zt{getValue(s){return s.key}},An=class extends Zt{getValue(s){return[s.key,s.key]}},ur=s=>s,Ti=s=>{if(s){let l=new Bt(co(s)),h=new Bt(co(s)),p=(k,B)=>B.addAndReturn(k),v=k=>({x:p(k.x,l),y:p(k.y,h)});return v({x:new he(0),y:new he(0)}),v}return ur},_r=s=>({set:l=>{mi=_r(l)},reset:()=>_r(s),compare:co(s),snap:Ti(s),orient:Ps(s)}),mi=_r(),Es=(s,l)=>s.ll.x.isLessThanOrEqualTo(l.x)&&l.x.isLessThanOrEqualTo(s.ur.x)&&s.ll.y.isLessThanOrEqualTo(l.y)&&l.y.isLessThanOrEqualTo(s.ur.y),Dl=(s,l)=>{if(l.ur.x.isLessThan(s.ll.x)||s.ur.x.isLessThan(l.ll.x)||l.ur.y.isLessThan(s.ll.y)||s.ur.y.isLessThan(l.ll.y))return null;let h=s.ll.x.isLessThan(l.ll.x)?l.ll.x:s.ll.x,p=s.ur.x.isLessThan(l.ur.x)?s.ur.x:l.ur.x,v=s.ll.y.isLessThan(l.ll.y)?l.ll.y:s.ll.y,k=s.ur.y.isLessThan(l.ur.y)?s.ur.y:l.ur.y;return{ll:{x:h,y:v},ur:{x:p,y:k}}},is=(s,l)=>s.x.times(l.y).minus(s.y.times(l.x)),qr=(s,l)=>s.x.times(l.x).plus(s.y.times(l.y)),Ar=s=>qr(s,s).sqrt(),zu=(s,l,h)=>{let p={x:l.x.minus(s.x),y:l.y.minus(s.y)},v={x:h.x.minus(s.x),y:h.y.minus(s.y)};return is(v,p).div(Ar(v)).div(Ar(p))},Ol=(s,l,h)=>{let p={x:l.x.minus(s.x),y:l.y.minus(s.y)},v={x:h.x.minus(s.x),y:h.y.minus(s.y)};return qr(v,p).div(Ar(v)).div(Ar(p))},Yn=(s,l,h)=>l.y.isZero()?null:{x:s.x.plus(l.x.div(l.y).times(h.minus(s.y))),y:h},Qi=(s,l,h)=>l.x.isZero()?null:{x:h,y:s.y.plus(l.y.div(l.x).times(h.minus(s.x)))},Uu=(s,l,h,p)=>{if(l.x.isZero())return Qi(h,p,s.x);if(p.x.isZero())return Qi(s,l,h.x);if(l.y.isZero())return Yn(h,p,s.y);if(p.y.isZero())return Yn(s,l,h.y);let v=is(l,p);if(v.isZero())return null;let k={x:h.x.minus(s.x),y:h.y.minus(s.y)},B=is(k,l).div(v),T=is(k,p).div(v),V=s.x.plus(T.times(l.x)),oe=h.x.plus(B.times(p.x)),Re=s.y.plus(T.times(l.y)),Me=h.y.plus(B.times(p.y)),Qe=V.plus(oe).div(2),dt=Re.plus(Me).div(2);return{x:Qe,y:dt}},As=class P1{constructor(l,h){zt(this,"point");zt(this,"isLeft");zt(this,"segment");zt(this,"otherSE");zt(this,"consumedBy");l.events===void 0?l.events=[this]:l.events.push(this),this.point=l,this.isLeft=h}static compare(l,h){let p=P1.comparePoints(l.point,h.point);return p!==0?p:(l.point!==h.point&&l.link(h),l.isLeft!==h.isLeft?l.isLeft?1:-1:Io.compare(l.segment,h.segment))}static comparePoints(l,h){return l.x.isLessThan(h.x)?-1:l.x.isGreaterThan(h.x)?1:l.y.isLessThan(h.y)?-1:l.y.isGreaterThan(h.y)?1:0}link(l){if(l.point===this.point)throw new Error("Tried to link already linked events");let h=l.point.events;for(let p=0,v=h.length;p<v;p++){let k=h[p];this.point.events.push(k),k.point=this.point}this.checkForConsuming()}checkForConsuming(){let l=this.point.events.length;for(let h=0;h<l;h++){let p=this.point.events[h];if(p.segment.consumedBy===void 0)for(let v=h+1;v<l;v++){let k=this.point.events[v];k.consumedBy===void 0&&p.otherSE.point.events===k.otherSE.point.events&&p.segment.consume(k.segment)}}}getAvailableLinkedEvents(){let l=[];for(let h=0,p=this.point.events.length;h<p;h++){let v=this.point.events[h];v!==this&&!v.segment.ringOut&&v.segment.isInResult()&&l.push(v)}return l}getLeftmostComparator(l){let h=new Map,p=v=>{let k=v.otherSE;h.set(v,{sine:zu(this.point,l.point,k.point),cosine:Ol(this.point,l.point,k.point)})};return(v,k)=>{h.has(v)||p(v),h.has(k)||p(k);let{sine:B,cosine:T}=h.get(v),{sine:V,cosine:oe}=h.get(k);return B.isGreaterThanOrEqualTo(0)&&V.isGreaterThanOrEqualTo(0)?T.isLessThan(oe)?1:T.isGreaterThan(oe)?-1:0:B.isLessThan(0)&&V.isLessThan(0)?T.isLessThan(oe)?-1:T.isGreaterThan(oe)?1:0:V.isLessThan(B)?-1:V.isGreaterThan(B)?1:0}}},au=0,Io=class lh{constructor(l,h,p,v){zt(this,"id");zt(this,"leftSE");zt(this,"rightSE");zt(this,"rings");zt(this,"windings");zt(this,"ringOut");zt(this,"consumedBy");zt(this,"prev");zt(this,"_prevInResult");zt(this,"_beforeState");zt(this,"_afterState");zt(this,"_isInResult");this.id=++au,this.leftSE=l,l.segment=this,l.otherSE=h,this.rightSE=h,h.segment=this,h.otherSE=l,this.rings=p,this.windings=v}static compare(l,h){let p=l.leftSE.point.x,v=h.leftSE.point.x,k=l.rightSE.point.x,B=h.rightSE.point.x;if(B.isLessThan(p))return 1;if(k.isLessThan(v))return-1;let T=l.leftSE.point.y,V=h.leftSE.point.y,oe=l.rightSE.point.y,Re=h.rightSE.point.y;if(p.isLessThan(v)){if(V.isLessThan(T)&&V.isLessThan(oe))return 1;if(V.isGreaterThan(T)&&V.isGreaterThan(oe))return-1;let Me=l.comparePoint(h.leftSE.point);if(Me<0)return 1;if(Me>0)return-1;let Qe=h.comparePoint(l.rightSE.point);return Qe!==0?Qe:-1}if(p.isGreaterThan(v)){if(T.isLessThan(V)&&T.isLessThan(Re))return-1;if(T.isGreaterThan(V)&&T.isGreaterThan(Re))return 1;let Me=h.comparePoint(l.leftSE.point);if(Me!==0)return Me;let Qe=l.comparePoint(h.rightSE.point);return Qe<0?1:Qe>0?-1:1}if(T.isLessThan(V))return-1;if(T.isGreaterThan(V))return 1;if(k.isLessThan(B)){let Me=h.comparePoint(l.rightSE.point);if(Me!==0)return Me}if(k.isGreaterThan(B)){let Me=l.comparePoint(h.rightSE.point);if(Me<0)return 1;if(Me>0)return-1}if(!k.eq(B)){let Me=oe.minus(T),Qe=k.minus(p),dt=Re.minus(V),Et=B.minus(v);if(Me.isGreaterThan(Qe)&&dt.isLessThan(Et))return 1;if(Me.isLessThan(Qe)&&dt.isGreaterThan(Et))return-1}return k.isGreaterThan(B)?1:k.isLessThan(B)||oe.isLessThan(Re)?-1:oe.isGreaterThan(Re)?1:l.id<h.id?-1:l.id>h.id?1:0}static fromRing(l,h,p){let v,k,B,T=As.comparePoints(l,h);if(T<0)v=l,k=h,B=1;else if(T>0)v=h,k=l,B=-1;else throw new Error(`Tried to create degenerate segment at [${l.x}, ${l.y}]`);let V=new As(v,!0),oe=new As(k,!1);return new lh(V,oe,[p],[B])}replaceRightSE(l){this.rightSE=l,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let l=this.leftSE.point.y,h=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:l.isLessThan(h)?l:h},ur:{x:this.rightSE.point.x,y:l.isGreaterThan(h)?l:h}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(l){return l.x.eq(this.leftSE.point.x)&&l.y.eq(this.leftSE.point.y)||l.x.eq(this.rightSE.point.x)&&l.y.eq(this.rightSE.point.y)}comparePoint(l){return mi.orient(this.leftSE.point,l,this.rightSE.point)}getIntersection(l){let h=this.bbox(),p=l.bbox(),v=Dl(h,p);if(v===null)return null;let k=this.leftSE.point,B=this.rightSE.point,T=l.leftSE.point,V=l.rightSE.point,oe=Es(h,T)&&this.comparePoint(T)===0,Re=Es(p,k)&&l.comparePoint(k)===0,Me=Es(h,V)&&this.comparePoint(V)===0,Qe=Es(p,B)&&l.comparePoint(B)===0;if(Re&&oe)return Qe&&!Me?B:!Qe&&Me?V:null;if(Re)return Me&&k.x.eq(V.x)&&k.y.eq(V.y)?null:k;if(oe)return Qe&&B.x.eq(T.x)&&B.y.eq(T.y)?null:T;if(Qe&&Me)return null;if(Qe)return B;if(Me)return V;let dt=Uu(k,this.vector(),T,l.vector());return dt===null||!Es(v,dt)?null:mi.snap(dt)}split(l){let h=[],p=l.events!==void 0,v=new As(l,!0),k=new As(l,!1),B=this.rightSE;this.replaceRightSE(k),h.push(k),h.push(v);let T=new lh(v,B,this.rings.slice(),this.windings.slice());return As.comparePoints(T.leftSE.point,T.rightSE.point)>0&&T.swapEvents(),As.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),p&&(v.checkForConsuming(),k.checkForConsuming()),h}swapEvents(){let l=this.rightSE;this.rightSE=this.leftSE,this.leftSE=l,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let h=0,p=this.windings.length;h<p;h++)this.windings[h]*=-1}consume(l){let h=this,p=l;for(;h.consumedBy;)h=h.consumedBy;for(;p.consumedBy;)p=p.consumedBy;let v=lh.compare(h,p);if(v!==0){if(v>0){let k=h;h=p,p=k}if(h.prev===p){let k=h;h=p,p=k}for(let k=0,B=p.rings.length;k<B;k++){let T=p.rings[k],V=p.windings[k],oe=h.rings.indexOf(T);oe===-1?(h.rings.push(T),h.windings.push(V)):h.windings[oe]+=V}p.rings=null,p.windings=null,p.consumedBy=h,p.leftSE.consumedBy=h.leftSE,p.rightSE.consumedBy=h.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let l=this.prev.consumedBy||this.prev;this._beforeState=l.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let l=this.beforeState();this._afterState={rings:l.rings.slice(0),windings:l.windings.slice(0),multiPolys:[]};let h=this._afterState.rings,p=this._afterState.windings,v=this._afterState.multiPolys;for(let T=0,V=this.rings.length;T<V;T++){let oe=this.rings[T],Re=this.windings[T],Me=h.indexOf(oe);Me===-1?(h.push(oe),p.push(Re)):p[Me]+=Re}let k=[],B=[];for(let T=0,V=h.length;T<V;T++){if(p[T]===0)continue;let oe=h[T],Re=oe.poly;if(B.indexOf(Re)===-1)if(oe.isExterior)k.push(Re);else{B.indexOf(Re)===-1&&B.push(Re);let Me=k.indexOf(oe.poly);Me!==-1&&k.splice(Me,1)}}for(let T=0,V=k.length;T<V;T++){let oe=k[T].multiPoly;v.indexOf(oe)===-1&&v.push(oe)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let l=this.beforeState().multiPolys,h=this.afterState().multiPolys;switch(cu.type){case"union":{let p=l.length===0,v=h.length===0;this._isInResult=p!==v;break}case"intersection":{let p,v;l.length<h.length?(p=l.length,v=h.length):(p=h.length,v=l.length),this._isInResult=v===cu.numMultiPolys&&p<v;break}case"xor":{let p=Math.abs(l.length-h.length);this._isInResult=p%2===1;break}case"difference":{let p=v=>v.length===1&&v[0].isSubject;this._isInResult=p(l)!==p(h);break}}return this._isInResult}},sl=class{constructor(s,l,h){zt(this,"poly");zt(this,"isExterior");zt(this,"segments");zt(this,"bbox");if(!Array.isArray(s)||s.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=l,this.isExterior=h,this.segments=[],typeof s[0][0]!="number"||typeof s[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let p=mi.snap({x:new he(s[0][0]),y:new he(s[0][1])});this.bbox={ll:{x:p.x,y:p.y},ur:{x:p.x,y:p.y}};let v=p;for(let k=1,B=s.length;k<B;k++){if(typeof s[k][0]!="number"||typeof s[k][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let T=mi.snap({x:new he(s[k][0]),y:new he(s[k][1])});T.x.eq(v.x)&&T.y.eq(v.y)||(this.segments.push(Io.fromRing(v,T,this)),T.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=T.x),T.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=T.y),T.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=T.x),T.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=T.y),v=T)}(!p.x.eq(v.x)||!p.y.eq(v.y))&&this.segments.push(Io.fromRing(v,p,this))}getSweepEvents(){let s=[];for(let l=0,h=this.segments.length;l<h;l++){let p=this.segments[l];s.push(p.leftSE),s.push(p.rightSE)}return s}},lu=class{constructor(s,l){zt(this,"multiPoly");zt(this,"exteriorRing");zt(this,"interiorRings");zt(this,"bbox");if(!Array.isArray(s))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new sl(s[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let h=1,p=s.length;h<p;h++){let v=new sl(s[h],this,!1);v.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=v.bbox.ll.x),v.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=v.bbox.ll.y),v.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=v.bbox.ur.x),v.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=v.bbox.ur.y),this.interiorRings.push(v)}this.multiPoly=l}getSweepEvents(){let s=this.exteriorRing.getSweepEvents();for(let l=0,h=this.interiorRings.length;l<h;l++){let p=this.interiorRings[l].getSweepEvents();for(let v=0,k=p.length;v<k;v++)s.push(p[v])}return s}},Dc=class{constructor(s,l){zt(this,"isSubject");zt(this,"polys");zt(this,"bbox");if(!Array.isArray(s))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof s[0][0][0]=="number"&&(s=[s])}catch{}this.polys=[],this.bbox={ll:{x:new he(Number.POSITIVE_INFINITY),y:new he(Number.POSITIVE_INFINITY)},ur:{x:new he(Number.NEGATIVE_INFINITY),y:new he(Number.NEGATIVE_INFINITY)}};for(let h=0,p=s.length;h<p;h++){let v=new lu(s[h],this);v.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=v.bbox.ll.x),v.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=v.bbox.ll.y),v.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=v.bbox.ur.x),v.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=v.bbox.ur.y),this.polys.push(v)}this.isSubject=l}getSweepEvents(){let s=[];for(let l=0,h=this.polys.length;l<h;l++){let p=this.polys[l].getSweepEvents();for(let v=0,k=p.length;v<k;v++)s.push(p[v])}return s}},uu=class gd{constructor(l){zt(this,"events");zt(this,"poly");zt(this,"_isExteriorRing");zt(this,"_enclosingRing");this.events=l;for(let h=0,p=l.length;h<p;h++)l[h].segment.ringOut=this;this.poly=null}static factory(l){let h=[];for(let p=0,v=l.length;p<v;p++){let k=l[p];if(!k.isInResult()||k.ringOut)continue;let B=null,T=k.leftSE,V=k.rightSE,oe=[T],Re=T.point,Me=[];for(;B=T,T=V,oe.push(T),T.point!==Re;)for(;;){let Qe=T.getAvailableLinkedEvents();if(Qe.length===0){let jt=oe[0].point,qt=oe[oe.length-1].point;throw new Error(`Unable to complete output ring starting at [${jt.x}, ${jt.y}]. Last matching segment found ends at [${qt.x}, ${qt.y}].`)}if(Qe.length===1){V=Qe[0].otherSE;break}let dt=null;for(let jt=0,qt=Me.length;jt<qt;jt++)if(Me[jt].point===T.point){dt=jt;break}if(dt!==null){let jt=Me.splice(dt)[0],qt=oe.splice(jt.index);qt.unshift(qt[0].otherSE),h.push(new gd(qt.reverse()));continue}Me.push({index:oe.length,point:T.point});let Et=T.getLeftmostComparator(B);V=Qe.sort(Et)[0].otherSE;break}h.push(new gd(oe))}return h}getGeom(){let l=this.events[0].point,h=[l];for(let oe=1,Re=this.events.length-1;oe<Re;oe++){let Me=this.events[oe].point,Qe=this.events[oe+1].point;mi.orient(Me,l,Qe)!==0&&(h.push(Me),l=Me)}if(h.length===1)return null;let p=h[0],v=h[1];mi.orient(p,l,v)===0&&h.shift(),h.push(h[0]);let k=this.isExteriorRing()?1:-1,B=this.isExteriorRing()?0:h.length-1,T=this.isExteriorRing()?h.length:-1,V=[];for(let oe=B;oe!=T;oe+=k)V.push([h[oe].x.toNumber(),h[oe].y.toNumber()]);return V}isExteriorRing(){if(this._isExteriorRing===void 0){let l=this.enclosingRing();this._isExteriorRing=l?!l.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var v,k;let l=this.events[0];for(let B=1,T=this.events.length;B<T;B++){let V=this.events[B];As.compare(l,V)>0&&(l=V)}let h=l.segment.prevInResult(),p=h?h.prevInResult():null;for(;;){if(!h)return null;if(!p)return h.ringOut;if(p.ringOut!==h.ringOut)return((v=p.ringOut)==null?void 0:v.enclosingRing())!==h.ringOut?h.ringOut:(k=h.ringOut)==null?void 0:k.enclosingRing();h=p.prevInResult(),p=h?h.prevInResult():null}}},Rl=class{constructor(s){zt(this,"exteriorRing");zt(this,"interiorRings");this.exteriorRing=s,s.poly=this,this.interiorRings=[]}addInterior(s){this.interiorRings.push(s),s.poly=this}getGeom(){let s=this.exteriorRing.getGeom();if(s===null)return null;let l=[s];for(let h=0,p=this.interiorRings.length;h<p;h++){let v=this.interiorRings[h].getGeom();v!==null&&l.push(v)}return l}},Il=class{constructor(s){zt(this,"rings");zt(this,"polys");this.rings=s,this.polys=this._composePolys(s)}getGeom(){let s=[];for(let l=0,h=this.polys.length;l<h;l++){let p=this.polys[l].getGeom();p!==null&&s.push(p)}return s}_composePolys(s){var h;let l=[];for(let p=0,v=s.length;p<v;p++){let k=s[p];if(!k.poly)if(k.isExteriorRing())l.push(new Rl(k));else{let B=k.enclosingRing();B!=null&&B.poly||l.push(new Rl(B)),(h=B==null?void 0:B.poly)==null||h.addInterior(k)}}return l}},qu=class{constructor(s,l=Io.compare){zt(this,"queue");zt(this,"tree");zt(this,"segments");this.queue=s,this.tree=new Bt(l),this.segments=[]}process(s){let l=s.segment,h=[];if(s.consumedBy)return s.isLeft?this.queue.delete(s.otherSE):this.tree.delete(l),h;s.isLeft&&this.tree.add(l);let p=l,v=l;do p=this.tree.lastBefore(p);while(p!=null&&p.consumedBy!=null);do v=this.tree.firstAfter(v);while(v!=null&&v.consumedBy!=null);if(s.isLeft){let k=null;if(p){let T=p.getIntersection(l);if(T!==null&&(l.isAnEndpoint(T)||(k=T),!p.isAnEndpoint(T))){let V=this._splitSafely(p,T);for(let oe=0,Re=V.length;oe<Re;oe++)h.push(V[oe])}}let B=null;if(v){let T=v.getIntersection(l);if(T!==null&&(l.isAnEndpoint(T)||(B=T),!v.isAnEndpoint(T))){let V=this._splitSafely(v,T);for(let oe=0,Re=V.length;oe<Re;oe++)h.push(V[oe])}}if(k!==null||B!==null){let T=null;k===null?T=B:B===null?T=k:T=As.comparePoints(k,B)<=0?k:B,this.queue.delete(l.rightSE),h.push(l.rightSE);let V=l.split(T);for(let oe=0,Re=V.length;oe<Re;oe++)h.push(V[oe])}h.length>0?(this.tree.delete(l),h.push(s)):(this.segments.push(l),l.prev=p)}else{if(p&&v){let k=p.getIntersection(v);if(k!==null){if(!p.isAnEndpoint(k)){let B=this._splitSafely(p,k);for(let T=0,V=B.length;T<V;T++)h.push(B[T])}if(!v.isAnEndpoint(k)){let B=this._splitSafely(v,k);for(let T=0,V=B.length;T<V;T++)h.push(B[T])}}}this.tree.delete(l)}return h}_splitSafely(s,l){this.tree.delete(s);let h=s.rightSE;this.queue.delete(h);let p=s.split(l);return p.push(h),s.consumedBy===void 0&&this.tree.add(s),p}},sf=class{constructor(){zt(this,"type");zt(this,"numMultiPolys")}run(s,l,h){ol.type=s;let p=[new Dc(l,!0)];for(let V=0,oe=h.length;V<oe;V++)p.push(new Dc(h[V],!1));if(ol.numMultiPolys=p.length,ol.type==="difference"){let V=p[0],oe=1;for(;oe<p.length;)Dl(p[oe].bbox,V.bbox)!==null?oe++:p.splice(oe,1)}if(ol.type==="intersection")for(let V=0,oe=p.length;V<oe;V++){let Re=p[V];for(let Me=V+1,Qe=p.length;Me<Qe;Me++)if(Dl(Re.bbox,p[Me].bbox)===null)return[]}let v=new Bt(As.compare);for(let V=0,oe=p.length;V<oe;V++){let Re=p[V].getSweepEvents();for(let Me=0,Qe=Re.length;Me<Qe;Me++)v.add(Re[Me])}let k=new qu(v),B=null;for(v.size!=0&&(B=v.first(),v.delete(B));B;){let V=k.process(B);for(let oe=0,Re=V.length;oe<Re;oe++){let Me=V[oe];Me.consumedBy===void 0&&v.add(Me)}v.size!=0?(B=v.first(),v.delete(B)):B=null}mi.reset();let T=uu.factory(k.segments);return new Il(T).getGeom()}},ol=new sf,cu=ol,of=(s,...l)=>cu.run("intersection",s,l),af=(s,...l)=>cu.run("difference",s,l);mi.set;function hu(s){let l={type:"Feature"};return l.geometry=s,l}function fu(s){return s.type==="Feature"?s.geometry:s}function Oc(s){return s&&s.geometry&&s.geometry.coordinates?s.geometry.coordinates:s}function Rc(s){return hu({type:"LineString",coordinates:s})}function du(s){return hu({type:"MultiLineString",coordinates:s})}function Ic(s){return hu({type:"Polygon",coordinates:s})}function Fc(s){return hu({type:"MultiPolygon",coordinates:s})}function jc(s,l){let h=fu(s),p=fu(l),v=of(h.coordinates,p.coordinates);return v.length===0?null:v.length===1?Ic(v[0]):Fc(v)}function d(s,l){let h=fu(s),p=fu(l),v=af(h.coordinates,p.coordinates);return v.length===0?null:v.length===1?Ic(v[0]):Fc(v)}function y(s){return Array.isArray(s)?1+y(s[0]):-1}function S(s){s instanceof L.Polyline&&(s=s.toGeoJSON(15));let l=Oc(s),h=y(l),p=[];return h>1?l.forEach(v=>{p.push(Rc(v))}):p.push(s),p}function O(s){let l=[];return s.eachLayer(h=>{l.push(Oc(h.toGeoJSON(15)))}),du(l)}_i.Cut=_i.Polygon.extend({initialize(s){this._map=s,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let s=this._layer.getLatLngs();if(s.length<=2)return;let l=L.polygon(s,this.options.pathOptions);l._latlngInfos=this._layer._latlngInfo,this.cut(l),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:p,originalLayer:v})=>{this._fireCut(v,p,v),this._fireCut(this._map,p,v),v.pm._fireEdit()}),this._editedLayers=[];let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))},cut(s){let l=this._map._layers,h=s._latlngInfos||[];Object.keys(l).map(p=>l[p]).filter(p=>p.pm).filter(p=>!p._pmTempLayer).filter(p=>!L.PM.optIn&&!p.options.pmIgnore||L.PM.optIn&&p.options.pmIgnore===!1).filter(p=>p instanceof L.Polyline).filter(p=>p!==s).filter(p=>p.pm.options.allowCutting).filter(p=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(p)>-1:!0).filter(p=>!this._layerGroup.hasLayer(p)).filter(p=>{try{let v=!!sr(s.toGeoJSON(15),p.toGeoJSON(15)).features.length>0;return v||p instanceof L.Polyline&&!(p instanceof L.Polygon)?v:!!jc(s.toGeoJSON(15),p.toGeoJSON(15))}catch{return p instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(p=>{let v;if(p instanceof L.Polygon){v=L.polygon(p.getLatLngs());let V=v.getLatLngs();h.forEach(oe=>{if(oe&&oe.snapInfo){let{latlng:Re}=oe,Me=this._calcClosestLayer(Re,[v]);if(Me&&Me.segment&&Me.distance<this.options.snapDistance){let{segment:Qe}=Me;if(Qe&&Qe.length===2){let{indexPath:dt,parentPath:Et,newIndex:jt}=L.PM.Utils._getIndexFromSegment(V,Qe);(dt.length>1?(0,Qn.default)(V,Et):V).splice(jt,0,Re)}}}})}else v=p;let k=this._cutLayer(s,v),B=L.geoJSON(k,p.options);B.getLayers().length===1&&([B]=B.getLayers()),this._setPane(B,"layerPane");let T=B.addTo(this._map.pm._getContainingLayer());if(T.pm.enable(p.pm.options),T.pm.disable(),p._pmTempLayer=!0,s._pmTempLayer=!0,p.remove(),p.removeFrom(this._map.pm._getContainingLayer()),s.remove(),s.removeFrom(this._map.pm._getContainingLayer()),T.getLayers&&T.getLayers().length===0&&this._map.pm.removeLayer({target:T}),T instanceof L.LayerGroup?(T.eachLayer(V=>{this._addDrawnLayerProp(V)}),this._addDrawnLayerProp(T)):this._addDrawnLayerProp(T),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let V=this.options.layersToCut.indexOf(p);V>-1&&this.options.layersToCut.splice(V,1)}this._editedLayers.push({layer:T,originalLayer:p})})},_cutLayer(s,l){let h=L.geoJSON(),p;if(l instanceof L.Polygon)p=d(l.toGeoJSON(15),s.toGeoJSON(15));else{let v=S(l);v.forEach(k=>{let B=or(k,s.toGeoJSON(15)),T;B&&B.features.length>0?T=L.geoJSON(B):T=L.geoJSON(k),T.getLayers().forEach(V=>{ao(s.toGeoJSON(15),V.toGeoJSON(15))||V.addTo(h)})}),v.length>1?p=O(h):p=h.toGeoJSON(15)}return p},_change:L.Util.falseFn}),_i.Text=_i.extend({initialize(s){this._map=s,this._shape="Text",this.toolbarButtonName="drawText"},enable(s){L.Util.setOptions(this,s),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(un("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var s;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(s=this._hintMarker)==null||s.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let l=s;l.target=this._hintMarker,this._handleSnapping(l)}},_createMarker(s){var v,k,B,T;if(!s.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let l=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(v=this.options.textOptions)==null?void 0:v.className){let V=this.options.textOptions.className.split(" ");this.textArea.classList.add(...V)}let h=this._createTextIcon(this.textArea),p=new L.Marker(l,{textMarker:!0,_textMarkerOverPM:!0,icon:h});if(this._setPane(p,"markerPane"),this._finishLayer(p),p.pm||(p.options.draggable=!1),p.addTo(this._map.pm._getContainingLayer()),p.pm){p.pm.textArea=this.textArea,L.setOptions(p.pm,{removeIfEmpty:((k=this.options.textOptions)==null?void 0:k.removeIfEmpty)??!0});let V=((B=this.options.textOptions)==null?void 0:B.focusAfterDraw)??!0;p.pm._createTextMarker(V),(T=this.options.textOptions)!=null&&T.text&&p.pm.setText(this.options.textOptions.text)}this._fireCreate(p),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(s){this.enable(),this._hintMarker.setLatLng(s.latlng)},_createTextArea(){let s=document.createElement("textarea");return s.readOnly=!0,s.classList.add("pm-textarea","pm-disabled"),s},_createTextIcon(s){return L.divIcon({className:"pm-text-marker",html:s})}});var te={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,Ei(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let s=this._getDOMElem();s&&(Ei(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(s)):L.DomEvent.on(s,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,Ei(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let s=this._getDOMElem();s&&(Ei(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(s)):L.DomEvent.off(s,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(s){let l=s.touches?s.touches[0]:s,h={originalEvent:l,target:this._layer};return h.containerPoint=this._map.mouseEventToContainerPoint(l),h.latlng=this._map.containerPointToLatLng(h.containerPoint),this._dragMixinOnMouseDown(h),!1},_simulateMouseMoveEvent(s){let l=s.touches?s.touches[0]:s,h={originalEvent:l,target:this._layer};return h.containerPoint=this._map.mouseEventToContainerPoint(l),h.latlng=this._map.containerPointToLatLng(h.containerPoint),this._dragMixinOnMouseMove(h),!1},_simulateMouseUpEvent(s){let l={originalEvent:s.touches?s.touches[0]:s,target:this._layer};return s.type.indexOf("touch")===-1&&(l.containerPoint=this._map.mouseEventToContainerPoint(s),l.latlng=this._map.containerPointToLatLng(l.containerPoint)),this._dragMixinOnMouseUp(l),!1},_dragMixinOnMouseDown(s){if(s.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(s);let l=s._fromLayerSync,h=this._syncLayers("_dragMixinOnMouseDown",s);if(this._layer instanceof L.Marker&&(this.options.snappable&&!l&&!h?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let p="resizeableCircleMarker";this._layer instanceof L.Circle&&(p="resizeableCircle"),this.options.snappable&&!l&&!h?this._layer.pm.options[p]||this._initSnappableMarkersDrag():this._layer.pm.options[p]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=s.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(s){this._overwriteEventIfItComesFromMarker(s);let l=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",s),this._dragging||(this._dragging=!0,L.DomUtil.addClass(l,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=s.latlng),this._onLayerDrag(s),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(s){let l=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",s),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,l&&L.DomUtil.removeClass(l,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(s){let{latlng:l}=s,h={lat:l.lat-this._tempDragCoord.lat,lng:l.lng-this._tempDragCoord.lng},p=v=>v.map(k=>{if(Array.isArray(k))return p(k);let B={lat:k.lat+h.lat,lng:k.lng+h.lng};return(k.alt||k.alt===0)&&(B.alt=k.alt),B});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let v=p([this._layer.getLatLng()]);this._layer.setLatLng(v[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let v=this._layer.getLatLng();this._layer._snapped&&(v=this._layer._orgLatLng);let k=p([v]);this._layer.setLatLng(k[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let v=p([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(v),this._fireChange(this._layer.getBounds(),"Edit")}else{let v=p(this._layer.getLatLngs());this._layer.setLatLngs(v),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=l,s.layer=this._layer,this._fireDrag(s)},addDraggingClass(){let s=this._getDOMElem();s&&L.DomUtil.addClass(s,"leaflet-pm-draggable")},removeDraggingClass(){let s=this._getDOMElem();s&&L.DomUtil.removeClass(s,"leaflet-pm-draggable")},_getDOMElem(){let s=null;return this._layer._path?s=this._layer._path:this._layer._renderer&&this._layer._renderer._container?s=this._layer._renderer._container:this._layer._image?s=this._layer._image:this._layer._icon&&(s=this._layer._icon),s},_overwriteEventIfItComesFromMarker(s){s.target.getLatLng&&(!s.target._radius||s.target._radius<=10)&&(s.containerPoint=this._map.mouseEventToContainerPoint(s.originalEvent),s.latlng=this._map.containerPointToLatLng(s.containerPoint))},_syncLayers(s,l){if(this.enabled())return!1;if(!l._fromLayerSync&&this._layer===l.target&&this.options.syncLayersOnDrag){l._fromLayerSync=!0;let h=[];if(L.Util.isArray(this.options.syncLayersOnDrag))h=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(p=>{p instanceof L.LayerGroup&&(h=h.concat(p.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let p in this._parentLayerGroup){let v=this._parentLayerGroup[p];v.pm&&(h=v.pm.getLayers(!0))}return L.Util.isArray(h)&&h.length>0&&(h=h.filter(p=>!!p.pm).filter(p=>!!p.pm.options.draggable),h.forEach(p=>{p!==this._layer&&p.pm[s]&&(p._snapped=!1,p.pm[s](l))})),h.length>0}return!1},_stopDOMImageDrag(s){return s.preventDefault(),!1}},ce=te,fe=m(kr());function pe(s,l,h,p){return h.unproject(l.transform(h.project(s,p)),p)}function ve(s,l,h){let p=h.getMaxZoom();if(p===1/0&&(p=h.getZoom()),L.Util.isArray(s)){let v=[];return s.forEach(k=>{v.push(ve(k,l,h))}),v}return s instanceof L.LatLng?pe(s,l,h,p):null}function Ae(s,l){l instanceof L.Layer&&(l=l.getLatLng());let h=s.getMaxZoom();return h===1/0&&(h=s.getZoom()),s.project(l,h)}function Ze(s,l){let h=s.getMaxZoom();return h===1/0&&(h=s.getZoom()),s.unproject(l,h)}var mt={_onRotateStart(s){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Ae(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Ae(this._map,s.target.getLatLng()),this._initialRotateLatLng=Or(this._layer),this._startAngle=this.getAngle();let l=Or(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,l),this._fireRotationStart(this._map,l)},_onRotate(s){let l=Ae(this._map,s.target.getLatLng()),h=this._rotationStartPoint,p=this._rotationOriginPoint,v=Math.atan2(l.y-p.y,l.x-p.x)-Math.atan2(h.y-p.y,h.x-p.x);this._layer.setLatLngs(this._rotateLayer(v,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let k=this;function B(Re,Me=[],Qe=-1){if(Qe>-1&&Me.push(Qe),L.Util.isArray(Re[0]))Re.forEach((dt,Et)=>B(dt,Me.slice(),Et));else{let dt=Me.length>0?(0,fe.default)(k._markers,Me):k._markers[0];Re.forEach((Et,jt)=>{dt[jt].setLatLng(Et)})}}B(this._layer.getLatLngs());let T=Or(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(v,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let V=v*180/Math.PI;V=V<0?V+360:V;let oe=V+this._startAngle;this._setAngle(oe),this._rotationLayer.pm._setAngle(oe),this._fireRotation(this._rotationLayer,V,T),this._fireRotation(this._map,V,T),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let s=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let l=Or(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Or(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,s,l),this._fireRotationEnd(this._map,s,l),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(s,l,h,p,v){let k=Ae(v,h);return this._matrix=p.clone().rotate(s,k).flip(),ve(l,this._matrix,v)},_setAngle(s){s=s<0?s+360:s,this._angle=s%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let s=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),l=s.getCenter();return s.removeFrom(this._layer._map),l},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(ws(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let s={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),s),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Or(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(s){let l=this.getAngle(),h=this._layer.getLatLngs(),p=s*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(p,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+s),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(p,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let v=this.getAngle()-l;v=v<0?v+360:v,this._startAngle=l,this._fireRotation(this._layer,v,h,this._layer),this._fireRotation(this._map||this._layer._map,v,h,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(s){let l=s-this.getAngle();this.rotateLayer(l)},getAngle(){return this._angle||0},setInitAngle(s){this._setAngle(s)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(s){this._rotationCenter=s,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(s)}},gt=mt,st=L.Class.extend({includes:[ce,No,gt,Mo],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(s){L.Util.setOptions(this,s)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(s,l){l==="layerPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":l==="vertexPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":l==="markerPane"&&(s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(s,l){let h=l.target,p={layer:this._layer,marker:h,event:l},v="";return s==="move"?v="moveVertexValidation":s==="add"?v="addVertexValidation":s==="remove"&&(v="removeVertexValidation"),this.options[v]&&typeof this.options[v]=="function"&&!this.options[v](p)?(s==="move"&&(h._cancelDragEventChain=h.getLatLng()),!1):(h._cancelDragEventChain=null,!0)},_vertexValidationDrag(s){return s._cancelDragEventChain?(s._latlng=s._cancelDragEventChain,s.update(),!1):!0},_vertexValidationDragEnd(s){return s._cancelDragEventChain?(s._cancelDragEventChain=null,!1):!0}}),Lt=st;Lt.LayerGroup=L.Class.extend({initialize(s){this._layerGroup=s,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(p=>this._initLayer(p));let l=p=>{if(p.layer._pmTempLayer)return;this._layers=this.getLayers();let v=this._layers.filter(k=>!k.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in k.pm._parentLayerGroup));v.forEach(k=>{this._initLayer(k)}),v.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(l,100,this),this),this._layerGroup.on("layerremove",p=>{this._removeLayerFromGroup(p.target)},this);let h=p=>{p.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(h,100,this),this)},enable(s,l=[]){l.length===0&&(this._layers=this.getLayers()),this._options=s,this._layers.forEach(h=>{h instanceof L.LayerGroup?l.indexOf(h._leaflet_id)===-1&&(l.push(h._leaflet_id),h.pm.enable(s,l)):h.pm.enable(s)})},disable(s=[]){s.length===0&&(this._layers=this.getLayers()),this._layers.forEach(l=>{l instanceof L.LayerGroup?s.indexOf(l._leaflet_id)===-1&&(s.push(l._leaflet_id),l.pm.disable(s)):l.pm.disable()})},enabled(s=[]){return s.length===0&&(this._layers=this.getLayers()),!!this._layers.find(l=>l instanceof L.LayerGroup?s.indexOf(l._leaflet_id)===-1?(s.push(l._leaflet_id),l.pm.enabled(s)):!1:l.pm.enabled())},toggleEdit(s,l=[]){l.length===0&&(this._layers=this.getLayers()),this._options=s,this._layers.forEach(h=>{h instanceof L.LayerGroup?l.indexOf(h._leaflet_id)===-1&&(l.push(h._leaflet_id),h.pm.toggleEdit(s,l)):h.pm.toggleEdit(s)})},_initLayer(s){let l=L.Util.stamp(this._layerGroup);s.pm._parentLayerGroup||(s.pm._parentLayerGroup={}),s.pm._parentLayerGroup[l]=this._layerGroup},_removeLayerFromGroup(s){if(s.pm&&s.pm._layerGroup){let l=L.Util.stamp(this._layerGroup);delete s.pm._layerGroup[l]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(s=>s.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var s;return this._map||((s=this._layers.find(l=>!!l._map))==null?void 0:s._map)||null},getLayers(s=!1,l=!0,h=!0,p=[]){let v=[];return s?this._layerGroup.getLayers().forEach(k=>{v.push(k),k instanceof L.LayerGroup&&p.indexOf(k._leaflet_id)===-1&&(p.push(k._leaflet_id),v=v.concat(k.pm.getLayers(!0,!0,!0,p)))}):v=this._layerGroup.getLayers(),h&&(v=v.filter(k=>!(k instanceof L.LayerGroup))),l&&(v=v.filter(k=>!!k.pm),v=v.filter(k=>!k._pmTempLayer),v=v.filter(k=>!L.PM.optIn&&!k.options.pmIgnore||L.PM.optIn&&k.options.pmIgnore===!1)),v},setOptions(s,l=[]){l.length===0&&(this._layers=this.getLayers()),this.options=s,this._layers.forEach(h=>{h.pm&&(h instanceof L.LayerGroup?l.indexOf(h._leaflet_id)===-1&&(l.push(h._leaflet_id),h.pm.setOptions(s,l)):h.pm.setOptions(s))})}}),Lt.Marker=Lt.extend({_shape:"Marker",initialize(s){this._layer=s,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(s={draggable:!0}){if(L.Util.setOptions(this,s),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(s){let l=s.target;l.remove(),this._fireRemove(l),this._fireRemove(this._map,l)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let s=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,s.off("pm:drag",this._handleSnapping,this),s.on("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.on("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this),s.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let s=this._layer;s.off("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this)}});var bt=m(kr()),Ye={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let s=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=s.filter((l,h,p)=>p.indexOf(l)===h)},_removeFromCache(s){let l=this.markerCache.indexOf(s);l>-1&&this.markerCache.splice(l,1)},renderLimits(s){this.markerCache.forEach(l=>{s.includes(l)?this._markerGroup.addLayer(l):this._markerGroup.removeLayer(l)})},applyLimitFilters({latlng:s={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let l=[...this._filterClosestMarkers(s)];this.renderLimits(l)},_filterClosestMarkers(s){let l=[...this.markerCache],h=this.options.limitMarkersToCount;return h===-1?l:(l.sort((p,v)=>{let k=p._latlng.distanceTo(s),B=v._latlng.distanceTo(s);return k-B}),l.filter((p,v)=>h>-1?v<h:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(s){this._preventRenderMarkers=!!s}},tt=Ye;Lt.Line=Lt.extend({includes:[tt],_shape:"Line",initialize(s){this._layer=s,this._enabled=!1},enable(s){if(L.Util.setOptions(this,s),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let s=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(s,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(s){return this.enabled()?this.disable():this.enable(s),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let s=this._map,l=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(s),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let h=p=>{if(Array.isArray(p[0]))return p.map(h,this);let v=p.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&p.map((k,B)=>{let T=this.isPolygon()?(B+1)%p.length:B+1;return this._createMiddleMarker(v[B],v[T])}),v};this._markers=h(l),this.filterMarkerGroup(),s.addLayer(this._markerGroup)},_createMarker(s){let l=new L.Marker(s,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(l,"vertexPane"),l._pmTempLayer=!0,this.options.rotate?(l.on("dragstart",this._onRotateStart,this),l.on("drag",this._onRotate,this),l.on("dragend",this._onRotateEnd,this)):(l.on("click",this._onVertexClick,this),l.on("dragstart",this._onMarkerDragStart,this),l.on("move",this._onMarkerDrag,this),l.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||l.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(l),l},_createMiddleMarker(s,l){if(!s||!l)return!1;let h=L.PM.Utils.calcMiddleLatLng(this._map,s.getLatLng(),l.getLatLng()),p=this._createMarker(h),v=L.divIcon({className:"marker-icon marker-icon-middle"});return p.setIcon(v),p.leftM=s,p.rightM=l,s._middleMarkerNext=p,l._middleMarkerPrev=p,p.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),p.on("movestart",this._onMiddleMarkerMoveStart,this),p},_onMiddleMarkerClick(s){let l=s.target;if(!this._vertexValidation("add",s))return;let h=L.divIcon({className:"marker-icon"});l.setIcon(h),this._addMarker(l,l.leftM,l.rightM)},_onMiddleMarkerMoveStart(s){let l=s.target;if(l.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",s)){l.on("move",this._onMiddleMarkerMovePrevent,this);return}l._dragging=!0,this._addMarker(l,l.leftM,l.rightM)},_onMiddleMarkerMovePrevent(s){let l=s.target;this._vertexValidationDrag(l)},_onMiddleMarkerMoveEnd(s){let l=s.target;if(l.off("move",this._onMiddleMarkerMovePrevent,this),l.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(l))return;let h=L.divIcon({className:"marker-icon"});l.setIcon(h),setTimeout(()=>{delete l._dragging},100)},_addMarker(s,l,h){s.off("movestart",this._onMiddleMarkerMoveStart,this),s.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let p=s.getLatLng(),v=this._layer._latlngs;delete s.leftM,delete s.rightM;let{indexPath:k,index:B,parentPath:T}=L.PM.Utils.findDeepMarkerIndex(this._markers,l),V=k.length>1?(0,bt.default)(v,T):v,oe=k.length>1?(0,bt.default)(this._markers,T):this._markers;V.splice(B+1,0,p),oe.splice(B+1,0,s),this._layer.setLatLngs(v),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(l,s),this._createMiddleMarker(s,h)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(s,L.PM.Utils.findDeepMarkerIndex(this._markers,s).indexPath,p),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return Tn(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(s){let l=this._layer,h,p;if(this.options.allowSelfIntersection?h=!1:(p=Tn(this._layer.toGeoJSON(15)),h=p.features.length>0),h){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return h;s?this._flashLayer():(l.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(p)}else l.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return h},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(s,l){s.forEach(h=>{Array.isArray(h)?this._updateDisabledMarkerStyle(h,l):h._icon&&(l&&!this._checkMarkerAllowedToDrag(h)?L.DomUtil.addClass(h._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(h._icon,"vertexmarker-disabled"))})},_removeMarker(s){let l=s.target;if(!this._vertexValidation("remove",s))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=Or(this._layer,this._layer.getLatLngs()));let h=this._layer.getLatLngs(),{indexPath:p,index:v,parentPath:k}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);if(!p)return;let B=p.length>1?(0,bt.default)(h,k):h,T=p.length>1?(0,bt.default)(this._markers,k):this._markers,V=k[k.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!V&&(B.length<=2||this.isPolygon()&&B.length<=3)){this._flashLayer();return}B.splice(v,1),this._layer.setLatLngs(h),this.isPolygon()&&B.length<=2&&B.splice(0,B.length);let oe=!1;if(B.length<=1&&(B.splice(0,B.length),k.length>1&&p.length>1&&(h=Bo(h)),this._layer.setLatLngs(h),this._initMarkers(),oe=!0),nr(h)||this._layer.remove(),h=Bo(h),this._layer.setLatLngs(h),this._markers=Bo(this._markers),!oe&&(T=p.length>1?(0,bt.default)(this._markers,k):this._markers,l._middleMarkerPrev&&(this._markerGroup.removeLayer(l._middleMarkerPrev),this._removeFromCache(l._middleMarkerPrev)),l._middleMarkerNext&&(this._markerGroup.removeLayer(l._middleMarkerNext),this._removeFromCache(l._middleMarkerNext)),this._markerGroup.removeLayer(l),this._removeFromCache(l),T)){let Re,Me;if(this.isPolygon()?(Re=(v+1)%T.length,Me=(v+(T.length-1))%T.length):(Me=v-1<0?void 0:v-1,Re=v+1>=T.length?void 0:v+1),Re!==Me){let Qe=T[Me],dt=T[Re];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(Qe,dt)}T.splice(v,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(l,p),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(s){let l=this._layer.getLatLngs(),h=s.getLatLng(),{indexPath:p,index:v,parentPath:k}=L.PM.Utils.findDeepMarkerIndex(this._markers,s);(p.length>1?(0,bt.default)(l,k):l).splice(v,1,h),this._layer.setLatLngs(l)},_getNeighborMarkers(s){let{indexPath:l,index:h,parentPath:p}=L.PM.Utils.findDeepMarkerIndex(this._markers,s),v=l.length>1?(0,bt.default)(this._markers,p):this._markers,k=(h+1)%v.length,B=(h+(v.length-1))%v.length,T=v[B],V=v[k];return{prevMarker:T,nextMarker:V}},_checkMarkerAllowedToDrag(s){let{prevMarker:l,nextMarker:h}=this._getNeighborMarkers(s),p=L.polyline([l.getLatLng(),s.getLatLng()]),v=L.polyline([s.getLatLng(),h.getLatLng()]),k=sr(this._layer.toGeoJSON(15),p.toGeoJSON(15)).features.length,B=sr(this._layer.toGeoJSON(15),v.toGeoJSON(15)).features.length;return s.getLatLng()===this._markers[0][0].getLatLng()?B+=1:s.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(k+=1),!(k<=2&&B<=2)},_onMarkerDragStart(s){let l=s.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",s))return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireMarkerDragStart(s,h),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Or(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(l):this._markerAllowedToDrag=null},_onMarkerDrag(s){let l=s.target;if(!this._vertexValidationDrag(l))return;let{indexPath:h,index:p,parentPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);if(!h)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(l);let k=h.length>1?(0,bt.default)(this._markers,v):this._markers,B=(p+1)%k.length,T=(p+(k.length-1))%k.length,V=l.getLatLng(),oe=k[T].getLatLng(),Re=k[B].getLatLng();if(l._middleMarkerNext){let Me=L.PM.Utils.calcMiddleLatLng(this._map,V,Re);l._middleMarkerNext.setLatLng(Me)}if(l._middleMarkerPrev){let Me=L.PM.Utils.calcMiddleLatLng(this._map,V,oe);l._middleMarkerPrev.setLatLng(Me)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(s,h),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(s){let l=s.target;if(!this._vertexValidationDragEnd(l))return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l),p=!this.options.allowSelfIntersection&&this.hasSelfIntersection();p&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(p=!1);let v=!this.options.allowSelfIntersection&&p;if(this._fireMarkerDragEnd(s,h,v),v){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(s,h);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(s){let l=s.target;if(l._dragging)return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireVertexClick(s,h)}}),Lt.Polygon=Lt.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(s){let{prevMarker:l,nextMarker:h}=this._getNeighborMarkers(s),p=L.polyline([l.getLatLng(),s.getLatLng()]),v=L.polyline([s.getLatLng(),h.getLatLng()]),k=sr(this._layer.toGeoJSON(15),p.toGeoJSON(15)).features.length,B=sr(this._layer.toGeoJSON(15),v.toGeoJSON(15)).features.length;return!(k<=2&&B<=2)}}),Lt.Rectangle=Lt.Polygon.extend({_shape:"Rectangle",_initMarkers(){let s=this._map,l=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,s.addLayer(this._markerGroup),this._markers=[],this._markers[0]=l.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((h,p)=>{let v=this._cornerMarkers.find(k=>k._index===p);v&&v.setLatLng(h)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(s,l){let h=new L.Marker(s,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._origLatLng=s,h._index=l,h._pmTempLayer=!0,h.on("click",this._onVertexClick,this),this._markerGroup.addLayer(h),h},_addMarkerEvents(){this._markers[0].forEach(s=>{s.on("dragstart",this._onMarkerDragStart,this),s.on("drag",this._onMarkerDrag,this),s.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||s.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(s){if(!this._vertexValidation("move",s))return;let l=s.target,h=this._cornerMarkers;l._oppositeCornerLatLng=h.find(v=>v._index===(l._index+2)%4).getLatLng(),l._snapped=!1;let{indexPath:p}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireMarkerDragStart(s,p)},_onMarkerDrag(s){let l=s.target;if(!this._vertexValidationDrag(l)||l._index===void 0)return;this._adjustRectangleForMarkerMove(l);let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireMarkerDrag(s,h),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(s){let l=s.target;if(!this._vertexValidationDragEnd(l))return;this._cornerMarkers.forEach(p=>{delete p._oppositeCornerLatLng});let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireMarkerDragEnd(s,h),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(s){L.extend(s._origLatLng,s._latlng);let l=L.PM.Utils._getRotatedRectangle(s.getLatLng(),s._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(l),this._adjustAllMarkers(s),this._layer.redraw()},_adjustAllMarkers(s){let l=this._layer.getLatLngs()[0];if(l&&l.length!==4&&l.length>0)l.forEach((h,p)=>{this._cornerMarkers[p].setLatLng(h)}),this._cornerMarkers.slice(l.length).forEach(h=>{h.setLatLng(l[0])});else if(!l||!l.length)console.error("The layer has no LatLngs");else{let h=l.findIndex(p=>s.getLatLng().equals(p));h>-1?(this._cornerMarkers[(s._index+1)%4].setLatLng(l[(h+1)%4]),this._cornerMarkers[(s._index+2)%4].setLatLng(l[(h+2)%4]),this._cornerMarkers[(s._index+3)%4].setLatLng(l[(h+3)%4])):this._cornerMarkers.forEach(p=>{p.setLatLng(l[p._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(ws(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let s=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(s[0],s[2],this.getAngle(),this._map||this)}}),Lt.CircleMarker=Lt.extend({_shape:"CircleMarker",initialize(s){this._layer=s,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(s={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,s),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let s=this._map;this._helperLayers&&(this._helperLayers.removeFrom(s),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(s);let l=this._layer.getLatLng(),h=this._layer._radius,p=this._getLatLngOnCircle(l,h);this._centerMarker=this._createCenterMarker(l),this._outerMarker=this._createOuterMarker(p),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(s,l){let h=this._map.project(s),p=L.point(h.x+l,h.y);return this._map.unproject(p)},_createHintLine(s,l){let h=s.getLatLng(),p=l.getLatLng();this._hintline=L.polyline([h,p],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(s){let l=this._createMarker(s);return this.options.draggable?(L.DomUtil.addClass(l._icon,"leaflet-pm-draggable"),l.on("move",this._moveCircle,this)):l.dragging.disable(),l},_createOuterMarker(s){let l=this._createMarker(s);return l.on("drag",this._resizeCircle,this),l},_createMarker(s){let l=new L.Marker(s,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(l,"vertexPane"),l._origLatLng=s,l._pmTempLayer=!0,l.on("dragstart",this._onMarkerDragStart,this),l.on("drag",this._onMarkerDrag,this),l.on("dragend",this._onMarkerDragEnd,this),l.on("click",this._onVertexClick,this),this._helperLayers.addLayer(l),l},_moveCircle(s){if(s.target._cancelDragEventChain)return;let l=this._centerMarker.getLatLng();this._layer.setLatLng(l);let h=this._layer._radius,p=this._getLatLngOnCircle(l,h);this._outerMarker._latlng=p,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let s=this._layer.getLatLng(),l=this._layer._radius,h=this._getLatLngOnCircle(s,l);this._outerMarker.setLatLng(h),this._centerMarker.setLatLng(s),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let s=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng(),h=this._distanceCalculation(s,l);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(h),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let s=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng();this._hintline.setLatLngs([s,l])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(s){this._vertexValidation("move",s)&&this._fireMarkerDragStart(s)},_onMarkerDrag(s){let l=s.target;l instanceof L.Marker&&!this._vertexValidationDrag(l)||this._fireMarkerDrag(s)},_onMarkerDragEnd(s){this._extedingMarkerDragEnd();let l=s.target;this._vertexValidationDragEnd(l)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(s))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let s=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,s.off("pm:drag",this._handleSnapping,this),s.on("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.on("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this),s.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let s=this._layer;s.off("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let s=this._layer._map||this._map;if(s){let l=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),s,this._layer.getLatLng()),h=L.circle(this._layer.getLatLng(),this._layer.options);h.setRadius(l);let p=s&&s.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(h,200,!p).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(h,200,!p),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let s=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng(),h=this._distanceCalculation(s,l);return this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?l=na(this._map,s,l,this._getMinDistanceInMeter(s)):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(l=na(this._map,s,l,this._getMaxDistanceInMeter(s))),l},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let s=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng(),h=this._distanceCalculation(s,l);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(s,l){return this._map.project(s).distanceTo(this._map.project(l))},_getMinDistanceInMeter(s){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,s)},_getMaxDistanceInMeter(s){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,s)},_onVertexClick(s){s.target._dragging||this._fireVertexClick(s,void 0)}}),Lt.Circle=Lt.CircleMarker.extend({_shape:"Circle",initialize(s){this._layer=s,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(s){L.PM.Edit.CircleMarker.prototype.enable.call(this,s||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let s=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(s,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let s=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!s).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!s),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(s,l){return this._map.distance(s,l)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(s){s.target._dragging||this._fireVertexClick(s,void 0)}}),Lt.ImageOverlay=Lt.extend({_shape:"ImageOverlay",initialize(s){this._layer=s,this._enabled=!1},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},enabled(){return this._enabled},enable(s={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,s),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let s=this._layer.getBounds(),l=s.getNorthWest(),h=s.getNorthEast(),p=s.getSouthEast(),v=s.getSouthWest();return[l,h,p,v]}}),Lt.Text=Lt.extend({_shape:"Text",initialize(s){this._layer=s,this._enabled=!1},enable(s){if(L.Util.setOptions(this,s),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let s=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),s.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let s=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,s.off("pm:drag",this._handleSnapping,this),s.on("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.on("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this),s.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let s=this._layer;s.off("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let s=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,l=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${s}px`,this.textArea.style.width=`${l}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(s){s.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(s={}){let l=this._hasFocus;this._hasFocus=s.type==="focus",!l!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(s){s&&(this.textArea.value=s),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let l=this.options.className.split(" ");this.textArea.classList.add(...l)}let s=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(s),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(s=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),s===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(s){s.preventDefault()}});var St=function(s,l,h,p,v,k){this._matrix=[s,l,h,p,v,k]};St.init=()=>new L.PM.Matrix(1,0,0,1,0,0),St.prototype={transform(s){return this._transform(s.clone())},_transform(s){let l=this._matrix,{x:h,y:p}=s;return s.x=l[0]*h+l[1]*p+l[4],s.y=l[2]*h+l[3]*p+l[5],s},untransform(s){let l=this._matrix;return new L.Point((s.x/l[0]-l[4])/l[0],(s.y/l[2]-l[5])/l[2])},clone(){let s=this._matrix;return new L.PM.Matrix(s[0],s[1],s[2],s[3],s[4],s[5])},translate(s){if(s===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let l,h;return typeof s=="number"?(l=s,h=s):(l=s.x,h=s.y),this._add(1,0,0,1,l,h)},scale(s,l){if(s===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let h,p;return l=l||L.point(0,0),typeof s=="number"?(h=s,p=s):(h=s.x,p=s.y),this._add(h,0,0,p,l.x,l.y)._add(1,0,0,1,-l.x,-l.y)},rotate(s,l){let h=Math.cos(s),p=Math.sin(s);return l=l||new L.Point(0,0),this._add(h,p,-p,h,l.x,l.y)._add(1,0,0,1,-l.x,-l.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(s,l,h,p,v,k){let B=[[],[],[]],T=this._matrix,V=[[T[0],T[2],T[4]],[T[1],T[3],T[5]],[0,0,1]],oe=[[s,h,v],[l,p,k],[0,0,1]],Re;s&&s instanceof L.PM.Matrix&&(T=s._matrix,oe=[[T[0],T[2],T[4]],[T[1],T[3],T[5]],[0,0,1]]);for(let Me=0;Me<3;Me+=1)for(let Qe=0;Qe<3;Qe+=1){Re=0;for(let dt=0;dt<3;dt+=1)Re+=V[Me][dt]*oe[dt][Qe];B[Me][Qe]=Re}return this._matrix=[B[0][0],B[1][0],B[0][1],B[1][1],B[0][2],B[1][2]],this}};var Nt=St,At={calcMiddleLatLng(s,l,h){let p=s.project(l),v=s.project(h);return s.unproject(p._add(v)._divideBy(2))},findLayers(s){let l=[];return s.eachLayer(h=>{(h instanceof L.Polyline||h instanceof L.Marker||h instanceof L.Circle||h instanceof L.CircleMarker||h instanceof L.ImageOverlay)&&l.push(h)}),l=l.filter(h=>!!h.pm),l=l.filter(h=>!h._pmTempLayer),l=l.filter(h=>!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1),l},circleToPolygon(s,l=60,h=!0){let p=s.getLatLng(),v=s.getRadius(),k=fr(p,v,l,0,h),B=[];for(let T=0;T<k.length;T+=1){let V=[k[T].lat,k[T].lng];B.push(V)}return L.polygon(B,s.options)},disablePopup(s){s.getPopup()&&(s._tempPopupCopy=s.getPopup(),s.unbindPopup())},enablePopup(s){s._tempPopupCopy&&(s.bindPopup(s._tempPopupCopy),delete s._tempPopupCopy)},_fireEvent(s,l,h,p=!1){s.fire(l,h,p);let{groups:v}=this.getAllParentGroups(s);v.forEach(k=>{k.fire(l,h,p)})},getAllParentGroups(s){let l=[],h=[],p=v=>{for(let k in v._eventParents)if(l.indexOf(k)===-1){l.push(k);let B=v._eventParents[k];h.push(B),p(B)}};return!s._pmLastGroupFetch||!s._pmLastGroupFetch.time||new Date().getTime()-s._pmLastGroupFetch.time>1e3?(p(s),s._pmLastGroupFetch={time:new Date().getTime(),groups:h,groupIds:l},{groupIds:l,groups:h}):{groups:s._pmLastGroupFetch.groups,groupIds:s._pmLastGroupFetch.groupIds}},createGeodesicPolygon:fr,getTranslation:un,findDeepCoordIndex(s,l,h=!0){let p,v=B=>(T,V)=>{let oe=B.concat(V);if(h){if(T.lat&&T.lat===l.lat&&T.lng===l.lng)return p=oe,!0}else if(T.lat&&L.latLng(T).equals(l))return p=oe,!0;return Array.isArray(T)&&T.some(v(oe))};s.some(v([]));let k={};return p&&(k={indexPath:p,index:p[p.length-1],parentPath:p.slice(0,p.length-1)}),k},findDeepMarkerIndex(s,l){let h,p=k=>(B,T)=>{let V=k.concat(T);return B._leaflet_id===l._leaflet_id?(h=V,!0):Array.isArray(B)&&B.some(p(V))};s.some(p([]));let v={};return h&&(v={indexPath:h,index:h[h.length-1],parentPath:h.slice(0,h.length-1)}),v},_getIndexFromSegment(s,l){if(l&&l.length===2){let h=this.findDeepCoordIndex(s,l[0]),p=this.findDeepCoordIndex(s,l[1]),v=Math.max(h.index,p.index);return(h.index===0||p.index===0)&&v!==1&&(v+=1),{indexA:h,indexB:p,newIndex:v,indexPath:h.indexPath,parentPath:h.parentPath}}return null},_getRotatedRectangle(s,l,h,p){let v=Ae(p,s),k=Ae(p,l),B=h*Math.PI/180,T=Math.cos(B),V=Math.sin(B),oe=(k.x-v.x)*T+(k.y-v.y)*V,Re=(k.y-v.y)*T-(k.x-v.x)*V,Me=oe*T+v.x,Qe=oe*V+v.y,dt=-Re*V+v.x,Et=Re*T+v.y,jt=Ze(p,v),qt=Ze(p,{x:Me,y:Qe}),mn=Ze(p,k),Oe=Ze(p,{x:dt,y:Et});return[jt,qt,mn,Oe]},pxRadiusToMeterRadius(s,l,h){let p=l.project(h),v=L.point(p.x+s,p.y);return l.distance(l.unproject(v),h)}},Yt=At;L.PM=L.PM||{version:Po.version,Map:To,Toolbar:Ba,Draw:_i,Edit:Lt,Utils:Yt,Matrix:Nt,activeLang:"en",optIn:!1,initialize(s){this.addInitHooks(s)},setOptIn(s){this.optIn=!!s},addInitHooks(){function s(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(s);function l(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(l);function h(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(h);function p(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(p);function v(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(v);function k(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(k);function B(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(B);function T(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(T);function V(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(V)},reInitLayer(s){s instanceof L.LayerGroup&&s.eachLayer(l=>{this.reInitLayer(l)}),s.pm||L.PM.optIn&&s.options.pmIgnore!==!1||s.options.pmIgnore||(s instanceof L.Map?s.pm=new L.PM.Map(s):s instanceof L.Marker?s.options.textMarker?(s.pm=new L.PM.Edit.Text(s),s.pm._initTextMarker(),s.pm._createTextMarker(!1)):s.pm=new L.PM.Edit.Marker(s):s instanceof L.Circle?s.pm=new L.PM.Edit.Circle(s):s instanceof L.CircleMarker?s.pm=new L.PM.Edit.CircleMarker(s):s instanceof L.Rectangle?s.pm=new L.PM.Edit.Rectangle(s):s instanceof L.Polygon?s.pm=new L.PM.Edit.Polygon(s):s instanceof L.Polyline?s.pm=new L.PM.Edit.Line(s):s instanceof L.LayerGroup?s.pm=new L.PM.Edit.LayerGroup(s):s instanceof L.ImageOverlay&&(s.pm=new L.PM.Edit.ImageOverlay(s)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(s){let l=this._map.mouseEventToLayerPoint(s),h,p;for(let v=this._drawFirst;v;v=v.next)h=v.layer,h.options.interactive&&h._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(h))&&(p=h);p&&(L.DomEvent.fakeStop(s),this._fireEvent([p],s))}}),L.PM.initialize()})();class Vl extends wt.Polygon{constructor(n,r,o=0,a=180,u={}){super([[]],{...u,pmIgnore:!1,interactive:!0,className:"leaflet-semicircle"});zt(this,"center");zt(this,"radius");zt(this,"startAngle");zt(this,"stopAngle");zt(this,"numPoints");zt(this,"properties");zt(this,"pm");zt(this,"getRadius",()=>this.radius);zt(this,"getStartAngle",()=>this.startAngle);zt(this,"getStopAngle",()=>this.stopAngle);this.center=n,this.radius=r,this.startAngle=this.normalizeAngle(o),this.stopAngle=this.normalizeAngle(a),this.numPoints=64,this.properties={type:"Semicircle",radius:this.radius,startAngle:this.startAngle,stopAngle:this.stopAngle,style:{...u,startAngle:this.startAngle,stopAngle:this.stopAngle}},this.on("pm:enable",()=>{var f;this.pm&&(this.pm._layers=[],this.pm._markers=[],(f=this.pm._markerGroup)==null||f.clearLayers())}),this.on("pm:vertexadded",()=>{var f;this.pm&&((f=this.pm._markerGroup)==null||f.clearLayers())}),this.on("add",()=>{this._map&&(this.updateGeometry(),this.pm&&this.pm.enable({allowSelfIntersection:!1,preventMarkerRemoval:!0}))}),this.updateProperties()}normalizeAngle(n){return(n%360+360)%360}calculateArcPoints(){if(!this._map)return[];const n=[],r=this.getOpeningAngle();n.push(this.center);for(let o=0;o<=this.numPoints;o++){const u=(this.startAngle+r*o/this.numPoints)*Math.PI/180,f=this.radius*Math.cos(u),_=this.radius*Math.sin(u)/111319.9,w=f/(111319.9*Math.cos(this.center.lat*Math.PI/180)),b=wt.latLng(this.center.lat+_,this.center.lng+w);n.push(b)}return n.push(this.center),n}setRadius(n){return n<=0?this:(this.radius=n,this.properties.radius=n,this.updateGeometry(),this.updateProperties(),this)}setAngles(n,r){const o=this.normalizeAngle(n),a=this.normalizeAngle(r),u=this.getOpeningAngle();let f=(a-o+360)%360;const m=45;return Math.abs(f-u)>m&&(f>u?f=u+m:f=u-m),f=Math.max(5,Math.min(355,f)),this.startAngle=o,this.stopAngle=(o+f)%360,this.properties.startAngle=this.startAngle,this.properties.stopAngle=this.stopAngle,this.properties.openingAngle=f,this.properties.style.startAngle=this.startAngle,this.properties.style.stopAngle=this.stopAngle,this.updateGeometry(),this}setOpeningAngle(n){return n<5||n>355?this:(this.stopAngle=(this.startAngle+n)%360,this.properties.openingAngle=n,this.updateGeometry(),this.updateProperties(),this)}setCenter(n){return!n.lat||!n.lng?this:(this.center=n,this.updateGeometry(),this.updateProperties(),this)}getCenter(){return this.center}getOpeningAngle(){return(this.stopAngle-this.startAngle+360)%360}calculatePointOnArc(n){const r=n*Math.PI/180;return wt.latLng(this.center.lat+this.radius/111319.9*Math.sin(r),this.center.lng+this.radius/(111319.9*Math.cos(this.center.lat*Math.PI/180))*Math.cos(r))}calculateMidpointPosition(){const n=this.getOpeningAngle(),r=(this.startAngle+n/2)%360;return this.calculatePointOnArc(r)}calculateAngleToPoint(n){return Math.atan2(n.lat-this.center.lat,n.lng-this.center.lng)*180/Math.PI}createControlPoints(n,r){const o=[],a=this.calculatePointOnArc(this.startAngle),u=this.calculatePointOnArc(this.stopAngle),f=this.calculateMidpointPosition(),m=this.createControlPoint(n,this.center,"#059669"),_=this.createControlPoint(n,a,"#DC2626"),w=this.createControlPoint(n,u,"#DC2626"),b=this.createControlPoint(n,f,"#2563EB");o.push(m,_,w,b),r(o)}createControlPoint(n,r,o){return wt.circleMarker(r,{radius:6,color:o,fillColor:o,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0}).addTo(n)}updateProperties(){const n=this.getOpeningAngle(),r=Math.PI*Math.pow(this.radius,2)*n/360,o=2*Math.PI*this.radius*n/360,a=o+2*this.radius;this.properties.area=r,this.properties.arcLength=o,this.properties.perimeter=a,this.properties.openingAngle=n,this.properties.surfaceInterieure=r,this.properties.surfaceExterieure=r,this.properties.diameter=this.radius*2,this.properties.center=this.center,this.fire("properties:updated",{shape:this,properties:this.properties})}updateGeometry(){if(!this._map)return;const n=this.calculateArcPoints();n.length>0&&(this.setLatLngs([n]),this.updateProperties())}toGeoJSON(){const n=super.toGeoJSON();return{...n,properties:{...n.properties,type:"Semicircle",radius:this.radius,startAngle:this.startAngle,stopAngle:this.stopAngle,openingAngle:this.getOpeningAngle()}}}}class Xu extends wt.Circle{constructor(n,r){const o=r.radius||10;super(n,o,r);zt(this,"properties");this.properties={type:"Circle",style:r||{}},this.updateProperties(),this.on("add",()=>{this.updateProperties()})}updateProperties(){var o;const n=this.getRadius(),r=this.getLatLng();this.properties={...this.properties,radius:n,diameter:n*2,area:Math.PI*Math.pow(n,2),perimeter:2*Math.PI*n,center:r,surfaceInterieure:Math.PI*Math.pow(n,2),surfaceExterieure:Math.PI*Math.pow(n,2),style:{...this.options,color:this.options.color||"#3388ff",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#3388ff",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||""}},this.fire("properties:updated",{shape:this,properties:this.properties})}setRadius(n){return super.setRadius(n),this.updateProperties(),this}setLatLng(n){return super.setLatLng(n),this.updateProperties(),this}calculatePointOnCircle(n){const r=this.getLatLng(),o=this.getRadius(),a=n*Math.PI/180;return wt.latLng(r.lat+o/111319.9*Math.sin(a),r.lng+o/(111319.9*Math.cos(r.lat*Math.PI/180))*Math.cos(a))}getCardinalPoints(){return[0,45,90,135,180,225,270,315].map(n=>this.calculatePointOnCircle(n))}calculateAngleFromPoint(n){const r=this.getLatLng(),o=n.lng-r.lng,a=n.lat-r.lat;let u=Math.atan2(a,o)*180/Math.PI;return u<0&&(u+=360),u}resizeFromControlPoint(n){const o=this.getLatLng().distanceTo(n);o>0&&super.setRadius(o)}}var Ms=63710088e-1,zx={centimeters:Ms*100,centimetres:Ms*100,degrees:Ms/111325,feet:Ms*3.28084,inches:Ms*39.37,kilometers:Ms/1e3,kilometres:Ms/1e3,meters:Ms,metres:Ms,miles:Ms/1609.344,millimeters:Ms*1e3,millimetres:Ms*1e3,nauticalmiles:Ms/1852,radians:1,yards:Ms*1.0936};function Ph(e,t,n){n===void 0&&(n={});var r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function vu(e,t,n){n===void 0&&(n={});for(var r=0,o=e;r<o.length;r++){var a=o[r];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var u=0;u<a[a.length-1].length;u++)if(a[a.length-1][u]!==a[0][u])throw new Error("First and last Position are not equivalent.")}var f={type:"Polygon",coordinates:e};return Ph(f,t,n)}function Cc(e,t,n){if(n===void 0&&(n={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var r={type:"LineString",coordinates:e};return Ph(r,t,n)}function Ux(e,t){t===void 0&&(t="kilometers");var n=zx[t];if(!n)throw new Error(t+" units is invalid");return e*n}function Kc(e){var t=e%360;return t*Math.PI/180}function S1(e,t,n){if(e!==null)for(var r,o,a,u,f,m,_,w=0,b=0,E,x=e.type,F=x==="FeatureCollection",N=x==="Feature",U=F?e.features.length:1,j=0;j<U;j++){_=F?e.features[j].geometry:N?e.geometry:e,E=_?_.type==="GeometryCollection":!1,f=E?_.geometries.length:1;for(var ne=0;ne<f;ne++){var ae=0,be=0;if(u=E?_.geometries[ne]:_,u!==null){m=u.coordinates;var ye=u.type;switch(w=0,ye){case null:break;case"Point":if(t(m,b,j,ae,be)===!1)return!1;b++,ae++;break;case"LineString":case"MultiPoint":for(r=0;r<m.length;r++){if(t(m[r],b,j,ae,be)===!1)return!1;b++,ye==="MultiPoint"&&ae++}ye==="LineString"&&ae++;break;case"Polygon":case"MultiLineString":for(r=0;r<m.length;r++){for(o=0;o<m[r].length-w;o++){if(t(m[r][o],b,j,ae,be)===!1)return!1;b++}ye==="MultiLineString"&&ae++,ye==="Polygon"&&be++}ye==="Polygon"&&ae++;break;case"MultiPolygon":for(r=0;r<m.length;r++){for(be=0,o=0;o<m[r].length;o++){for(a=0;a<m[r][o].length-w;a++){if(t(m[r][o][a],b,j,ae,be)===!1)return!1;b++}be++}ae++}break;case"GeometryCollection":for(r=0;r<u.geometries.length;r++)if(S1(u.geometries[r],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function E1(e,t){var n,r,o,a,u,f,m,_,w,b,E=0,x=e.type==="FeatureCollection",F=e.type==="Feature",N=x?e.features.length:1;for(n=0;n<N;n++){for(f=x?e.features[n].geometry:F?e.geometry:e,_=x?e.features[n].properties:F?e.properties:{},w=x?e.features[n].bbox:F?e.bbox:void 0,b=x?e.features[n].id:F?e.id:void 0,m=f?f.type==="GeometryCollection":!1,u=m?f.geometries.length:1,o=0;o<u;o++){if(a=m?f.geometries[o]:f,a===null){if(t(null,E,_,w,b)===!1)return!1;continue}switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(a,E,_,w,b)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<a.geometries.length;r++)if(t(a.geometries[r],E,_,w,b)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}E++}}function qx(e,t,n){var r=n;return E1(e,function(o,a,u,f,m){r=t(r,o,a,u,f,m)}),r}function $x(e,t){E1(e,function(n,r,o,a,u){var f=n===null?null:n.type;switch(f){case null:case"Point":case"LineString":case"Polygon":return t(Ph(n,o,{bbox:a,id:u}),r,0)===!1?!1:void 0}var m;switch(f){case"MultiPoint":m="Point";break;case"MultiLineString":m="LineString";break;case"MultiPolygon":m="Polygon";break}for(var _=0;_<n.coordinates.length;_++){var w=n.coordinates[_],b={type:m,coordinates:w};if(t(Ph(b,o),r,_)===!1)return!1}})}function Vx(e,t){$x(e,function(n,r,o){var a=0;if(n.geometry){var u=n.geometry.type;if(!(u==="Point"||u==="MultiPoint")){var f,m=0,_=0,w=0;if(S1(n,function(b,E,x,F,N){if(f===void 0||r>m||F>_||N>w){f=b,m=r,_=F,w=N,a=0;return}var U=Cc([f,b],n.properties);if(t(U,r,o,N,a)===!1)return!1;a++,f=b})===!1)return!1}}})}function Hx(e,t,n){var r=n,o=!1;return Vx(e,function(a,u,f,m,_){o===!1&&n===void 0?r=a:r=t(r,a,u,f,m,_),o=!0}),r}function $0(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Yl(e,t,n){n===void 0&&(n={});var r=$0(e),o=$0(t),a=Kc(o[1]-r[1]),u=Kc(o[0]-r[0]),f=Kc(r[1]),m=Kc(o[1]),_=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(f)*Math.cos(m);return Ux(2*Math.atan2(Math.sqrt(_),Math.sqrt(1-_)),n.units)}var V0=6378137;function Qu(e){return qx(e,function(t,n){return t+Gx(n)},0)}function Gx(e){var t=0,n;switch(e.type){case"Polygon":return H0(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)t+=H0(e.coordinates[n]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function H0(e){var t=0;if(e&&e.length>0){t+=Math.abs(G0(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(G0(e[n]))}return t}function G0(e){var t,n,r,o,a,u,f,m=0,_=e.length;if(_>2){for(f=0;f<_;f++)f===_-2?(o=_-2,a=_-1,u=0):f===_-1?(o=_-1,a=0,u=1):(o=f,a=f+1,u=f+2),t=e[o],n=e[a],r=e[u],m+=(Df(r[0])-Df(t[0]))*Math.sin(Df(n[1]));m=m*V0*V0/2}return m}function Df(e){return e*Math.PI/180}function Sh(e,t){return t===void 0&&(t={}),Hx(e,function(n,r){var o=r.geometry.coordinates;return n+Yl(o[0],o[1],t)},0)}class za extends wt.Rectangle{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});zt(this,"properties");this.properties={type:"Rectangle",style:r||{}},this.updateProperties(),this.on("add",()=>{this.updateProperties()})}updateProperties(){var f;const n=this.getBounds(),r=n.getNorthEast(),o=n.getSouthWest(),a=Yl([o.lng,o.lat],[r.lng,o.lat],{units:"meters"}),u=Yl([o.lng,o.lat],[o.lng,r.lat],{units:"meters"});this.properties={...this.properties,width:a,height:u,area:a*u,perimeter:2*(a+u),center:n.getCenter(),corners:{northEast:r,northWest:n.getNorthWest(),southEast:n.getSouthEast(),southWest:o},bounds:n,surfaceInterieure:a*u,surfaceExterieure:a*u,style:{...this.options,color:this.options.color||"#3388ff",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#3388ff",fillOpacity:this.options.fillOpacity||.2,dashArray:((f=this.options)==null?void 0:f.dashArray)||""}},this.fire("properties:updated",{shape:this,properties:this.properties})}setBounds(n){return super.setBounds(n),this.updateProperties(),this}getMidPoints(){const n=this.getBounds(),r=n.getNorthWest(),o=n.getNorthEast(),a=n.getSouthEast(),u=n.getSouthWest();return[wt.latLng((r.lat+o.lat)/2,(r.lng+o.lng)/2),wt.latLng((o.lat+a.lat)/2,(o.lng+a.lng)/2),wt.latLng((u.lat+a.lat)/2,(u.lng+a.lng)/2),wt.latLng((r.lat+u.lat)/2,(r.lng+u.lng)/2)]}getDimensions(){const n=this.getBounds(),r=n.getNorthEast(),o=n.getSouthWest(),a=Yl([o.lng,o.lat],[r.lng,o.lat],{units:"meters"}),u=Yl([o.lng,o.lat],[o.lng,r.lat],{units:"meters"});return{width:a,height:u}}resizeFromCorner(n,r){const o=this.getBounds(),a=[o.getNorthWest(),o.getNorthEast(),o.getSouthEast(),o.getSouthWest()],u=(n+2)%4,f=a[u],m=wt.latLngBounds(f,r);wt.Rectangle.prototype.setBounds.call(this,m)}resizeFromSide(n,r){const o=this.getBounds(),a=o.getNorthWest(),u=o.getSouthEast(),f=o.getSouthWest();let m;switch(n){case 0:m=wt.latLngBounds(wt.latLng(r.lat,a.lng),wt.latLng(f.lat,u.lng));break;case 1:m=wt.latLngBounds(wt.latLng(a.lat,a.lng),wt.latLng(u.lat,r.lng));break;case 2:m=wt.latLngBounds(wt.latLng(a.lat,a.lng),wt.latLng(r.lat,u.lng));break;case 3:m=wt.latLngBounds(wt.latLng(a.lat,r.lng),wt.latLng(u.lat,u.lng));break}m&&(wt.Rectangle.prototype.setBounds.call(this,m),this.updateProperties())}moveFromCenter(n){const r=this.getBounds(),o=r.getCenter(),a=n.lng-o.lng,u=n.lat-o.lat,f=r.getNorthWest(),m=r.getSouthEast(),_=wt.latLng(f.lat+u,f.lng+a),w=wt.latLng(m.lat+u,m.lng+a);wt.Rectangle.prototype.setBounds.call(this,wt.latLngBounds(_,w))}}class bl extends wt.Rectangle{constructor(n,r="Double-cliquez pour diter",o={}){const a=n instanceof wt.LatLngBounds?n:wt.latLngBounds(n);if(!a.isValid()){console.warn("[TextRectangle] Initialized with invalid bounds, using default bounds");const f=wt.latLng(0,0);a.extend(wt.latLng(f.lat+.001,f.lng+.001)),a.extend(wt.latLng(f.lat-.001,f.lng-.001))}const u={...o,pmIgnore:!1,interactive:!0,fill:!0,stroke:!0,className:"leaflet-text-rectangle"};super(a,u);zt(this,"properties");zt(this,"_textNode",null);zt(this,"_map",null);zt(this,"_isEditing",!1);zt(this,"_editableDiv",null);zt(this,"_originalText","");zt(this,"_fontScale",1);zt(this,"_onAdd",()=>{this.updateProperties(),this._textRedraw()});zt(this,"_onRemove",()=>{this._cleanupEditableDiv(),this._removeTextNode()});zt(this,"_updateTextPosition",()=>{this.updateProperties(),this._textRedraw()});zt(this,"_onDoubleClick",n=>{this._isEditing||(wt.DomEvent.stopPropagation(n),this._isEditing=!0,this._originalText=this.properties.text,this._removeTextNode(),this._createEditableDiv())});zt(this,"_onKeyDown",n=>{n.key==="Enter"&&n.ctrlKey?(n.preventDefault(),this._finishEditing()):n.key==="Escape"&&(n.preventDefault(),this._cancelEditing())});zt(this,"_finishEditing",()=>{if(this._editableDiv)try{const n=this._editableDiv.innerText.trim();this.setText(n||"Double-cliquez pour diter"),this._cleanupEditableDiv(),this._map&&!this._map.dragging.enabled()&&this._map.dragging.enable()}catch(n){console.error("[TextRectangle] Error finishing editing:",n)}});zt(this,"_cancelEditing",()=>{this.setText(this._originalText),this._cleanupEditableDiv(),this._map&&!this._map.dragging.enabled()&&this._map.dragging.enable()});zt(this,"_onZoomEnd",()=>{this._textRedraw()});this.properties={type:"TextRectangle",text:r,width:0,height:0,area:0,rotation:0,style:{color:u.color||"#3388ff",weight:u.weight||2,fillColor:u.fillColor||"#FFFFFF",fillOpacity:u.fillOpacity||.8,textColor:u.textColor||"#000000",fontSize:u.fontSize||"14px",fontFamily:u.fontFamily||"Arial, sans-serif",textAlign:u.textAlign||"center",bold:u.bold||!1,italic:u.italic||!1,fixedPhysicalSize:u.fixedPhysicalSize||!1}},this.on("add",this._onAdd),this.on("remove",this._onRemove),this.on("dblclick",this._onDoubleClick),this.on("dragend",this._updateTextPosition),this.on("pm:edit",this._updateTextPosition),this.on("pm:dragend",this._updateTextPosition),this.on("pm:markerdragend",this._updateTextPosition),this.on("pm:vertexadded",this._updateTextPosition),this.on("pm:vertexremoved",this._updateTextPosition),this.pm&&this.pm.enableLayerDrag()}onAdd(n){return this._map=n,super.onAdd(n),this._textRedraw(),this.updateProperties(),n.on("zoomend",this._onZoomEnd),this}onRemove(n){return n&&n.off("zoomend",this._onZoomEnd),this._cleanupEditableDiv(),this._removeTextNode(),this._map=null,super.onRemove(n),this}bringToFront(){return super.bringToFront(),this._textRedraw(),this}_update(){super._update(),this._textRedraw()}setText(n){n||(n="Double-cliquez pour diter"),this.properties.text=n,this._textRedraw(),this.fire("properties:updated",{shape:this,properties:this.properties})}setTextStyle(n){this.properties.style={...this.properties.style,...n};const r={};n.color&&(r.color=n.color),n.weight!==void 0&&(r.weight=n.weight),n.fillColor&&(r.fillColor=n.fillColor),n.fillOpacity!==void 0&&(r.fillOpacity=n.fillOpacity),Object.keys(r).length>0&&this.setStyle(r),this._textRedraw(),this.fire("properties:updated",{shape:this,properties:this.properties})}setRotation(n){this.properties.rotation=n,this._textRedraw(),this.fire("properties:updated",{shape:this,properties:this.properties})}getTextElement(){return this._textNode}updateProperties(){try{if(!this._map)return;const n=this.getBounds(),r=n.getSouthWest(),o=wt.latLng(n.getSouth(),n.getEast()),a=n.getNorthEast(),u=this._map.distance(r,o),f=this._map.distance(r,wt.latLng(n.getNorth(),n.getWest())),m=u*f;this.properties.width=u,this.properties.height=f,this.properties.area=m,this.properties.center=n.getCenter(),this.fire("properties:updated",{shape:this,properties:this.properties})}catch(n){console.error("[TextRectangle] Error updating properties:",n)}}setBounds(n){return super.setBounds(n),this._textRedraw(),this}_textRedraw(){const n=this.properties.text;if(!(!wt.Browser.svg||!this._map||!n||this._isEditing)){this._removeTextNode();try{const r=this._map.getRenderer(this);if(!r._container)return;const o=r._container,a="textbox-"+wt.Util.stamp(this);this._path&&this._path.setAttribute("id",a);const u=wt.SVG.create("text");u.setAttribute("class","leaflet-text-rectangle-text"),u.style.fill=this.properties.style.textColor||"#000000",u.style.fontFamily=this.properties.style.fontFamily||"Arial, sans-serif",u.style.fontWeight=this.properties.style.bold?"bold":"normal",u.style.fontStyle=this.properties.style.italic?"italic":"normal";const f=this.getBounds(),m=f.getNorthWest(),_=f.getSouthEast(),w=this._map.latLngToLayerPoint(m),b=this._map.latLngToLayerPoint(_),E=10,x=w.x+E,F=w.y+E,N=Math.max(10,b.x-w.x-E*2);if(u.setAttribute("x",x.toString()),u.setAttribute("y",F.toString()),u.setAttribute("text-anchor","start"),u.setAttribute("dominant-baseline","hanging"),this.properties.rotation!==0){const ye=this._map.latLngToLayerPoint(f.getCenter());u.setAttribute("transform",`rotate(${this.properties.rotation}, ${ye.x}, ${ye.y})`)}const U=this.properties.style.fontSize||"14px",j=parseInt(U.replace("px",""));let ne=j;if(this.properties.style.fixedPhysicalSize){const ye=f.getCenter(),Pe=this._map.getZoom(),Ce=this.properties.width;if(Ce>0){const Be=(b.x-w.x)/Ce;ne=Math.max(10,Math.min(48,j*Be*.2))}else{const de=40075016686e-3*Math.abs(Math.cos(ye.lat*Math.PI/180))/Math.pow(2,Pe+8);ne=Math.max(10,Math.min(48,j/de*2.5))}}else{const Ce=this._map.getZoom()-15;this._fontScale=Math.max(.5,Math.min(2.5,1+Ce*.15)),ne=j*this._fontScale}const ae=ne*1.2;n.replace(/ /g,"").split(/\n|\r\n?/).forEach((ye,Pe)=>{const Ce=wt.SVG.create("tspan");Ce.setAttribute("x",x.toString()),Ce.setAttribute("dy",Pe===0?"0":ae+"px"),Ce.style.fontSize=ne+"px";const de=this.properties.style.textAlign||"left";de==="center"?(Ce.setAttribute("x",((w.x+b.x)/2).toString()),Ce.setAttribute("text-anchor","middle")):de==="right"&&(Ce.setAttribute("x",(b.x-E).toString()),Ce.setAttribute("text-anchor","end")),Ce.textContent=ye,u.appendChild(Ce)}),this._textNode=u,o.appendChild(u)}catch(r){console.error("[TextRectangle] Error drawing text:",r)}}}_removeTextNode(){this._textNode&&this._textNode.parentNode&&(this._textNode.parentNode.removeChild(this._textNode),this._textNode=null)}_createEditableDiv(){if(this._map)try{const n=this.getBounds(),r=n.getNorthWest(),o=n.getSouthEast(),a=this._map.latLngToLayerPoint(r),u=this._map.latLngToLayerPoint(o),f=document.createElement("div");if(f.className="leaflet-text-rectangle-editor",f.style.position="absolute",f.style.left=a.x+"px",f.style.top=a.y+"px",f.style.width=u.x-a.x-20+"px",f.style.maxHeight=u.y-a.y-20+"px",f.style.padding="10px",f.style.backgroundColor=this.properties.style.backgroundColor||"#FFFFFF",f.style.color=this.properties.style.textColor||"#000000",f.style.fontSize=parseInt(this.properties.style.fontSize||"14px")*this._fontScale+"px",f.style.fontFamily=this.properties.style.fontFamily||"Arial, sans-serif",f.style.fontWeight=this.properties.style.bold?"bold":"normal",f.style.fontStyle=this.properties.style.italic?"italic":"normal",f.style.textAlign=this.properties.style.textAlign||"left",f.style.border="2px solid #3388ff",f.style.borderRadius="3px",f.style.boxShadow="0 0 10px rgba(0,0,0,0.2)",f.style.zIndex="1000",f.style.overflow="auto",f.style.whiteSpace="pre-wrap",f.style.wordBreak="break-word",f.contentEditable="true",this.properties.rotation!==0){const m=this._map.latLngToLayerPoint(n.getCenter()),_=(a.x+u.x)/2,w=(a.y+u.y)/2;f.style.transformOrigin=`${m.x-a.x+10}px ${m.y-a.y+10}px`,f.style.transform=`rotate(${this.properties.rotation}deg)`}f.innerText=this.properties.text,document.body.appendChild(f),this._editableDiv=f,f.focus(),f.addEventListener("keydown",this._onKeyDown),f.addEventListener("blur",this._finishEditing),this._map.dragging.enabled()&&this._map.dragging.disable()}catch(n){console.error("[TextRectangle] Error creating editable div:",n),this._isEditing=!1}}_cleanupEditableDiv(){this._editableDiv&&(this._editableDiv.removeEventListener("keydown",this._onKeyDown),this._editableDiv.removeEventListener("blur",this._finishEditing),this._editableDiv.parentNode&&this._editableDiv.parentNode.removeChild(this._editableDiv),this._editableDiv=null,this._isEditing=!1)}}var Gs=63710088e-1,A1={centimeters:Gs*100,centimetres:Gs*100,degrees:360/(2*Math.PI),feet:Gs*3.28084,inches:Gs*39.37,kilometers:Gs/1e3,kilometres:Gs/1e3,meters:Gs,metres:Gs,miles:Gs/1609.344,millimeters:Gs*1e3,millimetres:Gs*1e3,nauticalmiles:Gs/1852,radians:1,yards:Gs*1.0936};function Wx(e,t,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function vd(e,t,n={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!W0(e[0])||!W0(e[1]))throw new Error("coordinates must contain numbers");return Wx({type:"Point",coordinates:e},t,n)}function Zx(e,t="kilometers"){const n=A1[t];if(!n)throw new Error(t+" units is invalid");return e*n}function Kx(e,t="kilometers"){const n=A1[t];if(!n)throw new Error(t+" units is invalid");return e/n}function _d(e){return e%(2*Math.PI)*180/Math.PI}function Uo(e){return e%360*Math.PI/180}function W0(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function kc(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Jx(e){return e.type==="Feature"?e.geometry:e}function M1(e,t,n={}){if(n.final===!0)return Yx(e,t);const r=kc(e),o=kc(t),a=Uo(r[0]),u=Uo(o[0]),f=Uo(r[1]),m=Uo(o[1]),_=Math.sin(u-a)*Math.cos(m),w=Math.cos(f)*Math.sin(m)-Math.sin(f)*Math.cos(m)*Math.cos(u-a);return _d(Math.atan2(_,w))}function Yx(e,t){let n=M1(t,e);return n=(n+180)%360,n}function Xx(e,t,n,r={}){const o=kc(e),a=Uo(o[0]),u=Uo(o[1]),f=Uo(n),m=Kx(t,r.units),_=Math.asin(Math.sin(u)*Math.cos(m)+Math.cos(u)*Math.sin(m)*Math.cos(f)),w=a+Math.atan2(Math.sin(f)*Math.sin(m)*Math.cos(u),Math.cos(m)-Math.sin(u)*Math.sin(_)),b=_d(w),E=_d(_);return vd([b,E],r.properties)}function Qx(e,t,n={}){var r=kc(e),o=kc(t),a=Uo(o[1]-r[1]),u=Uo(o[0]-r[0]),f=Uo(r[1]),m=Uo(o[1]),_=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(f)*Math.cos(m);return Zx(2*Math.atan2(Math.sqrt(_),Math.sqrt(1-_)),n.units)}function eL(e,t,n={}){const o=Jx(e).coordinates;let a=0;for(let u=0;u<o.length&&!(t>=a&&u===o.length-1);u++)if(a>=t){const f=t-a;if(f){const m=M1(o[u],o[u-1])-180;return Xx(o[u],f,m,n)}else return vd(o[u])}else a+=Qx(o[u],o[u+1],n);return vd(o[o.length-1])}var Z0=eL;class Ui extends wt.Polyline{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});zt(this,"properties");zt(this,"cachedProperties",{});zt(this,"needsUpdate",!0);this.properties={type:"Line",style:r||{}},this.updateProperties(),this.on("add",()=>{this.updateProperties()})}updateProperties(){var o;const n=this.getLatLngs();if(!n||n.length<2){console.warn("Line has less than 2 points, cannot calculate properties");return}const r=n.map(a=>[a.lng,a.lat]);try{const a=Cc(r),u=Sh(a,{units:"meters"});let f;if(n.length===2)f=wt.latLng((n[0].lat+n[1].lat)/2,(n[0].lng+n[1].lng)/2);else{const _=Z0(a,u/2,{units:"meters"});f=wt.latLng(_.geometry.coordinates[1],_.geometry.coordinates[0])}const m=10;this.properties={...this.properties,length:u,center:f,vertices:n.length,surfaceInfluence:u*m,dimensions:{width:m},style:{...this.options,color:this.options.color||"#3388ff",weight:this.options.weight||3,opacity:this.options.opacity||1,dashArray:((o=this.options)==null?void 0:o.dashArray)||""}},this.cachedProperties.length=u,this.cachedProperties.center=f,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.needsUpdate=!1,this.fire("properties:updated",{shape:this,properties:this.properties})}catch(a){console.error("Failed to calculate line properties",a)}finally{}}invalidateCache(){this.needsUpdate=!0,this.cachedProperties={}}setLatLngs(n){return super.setLatLngs(n),this.invalidateCache(),this.updateProperties(),this}getMidPoints(){if(!this.needsUpdate&&this.cachedProperties.midPoints)return this.cachedProperties.midPoints;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let o=0;o<n.length-1;o++){const a=n[o],u=n[o+1];if(!a||!u){console.warn("Points invalides dtects pour le segment",o);continue}r.push(wt.latLng((a.lat+u.lat)/2,(a.lng+u.lng)/2))}return this.cachedProperties.midPoints=r,r}getMidPointAt(n){const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return null;const o=r[n],a=r[n+1];return!o||!a?(console.warn("Points invalides pour calcul du midpoint au segment",n),null):wt.latLng((o.lat+a.lat)/2,(o.lng+a.lng)/2)}moveVertex(n,r,o=!1){const a=this.getLatLngs();n>=0&&n<a.length&&(a[n]=r,wt.Polyline.prototype.setLatLngs.call(this,a),this.needsUpdate=!0,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.cachedProperties.center=void 0,this.cachedProperties.length=void 0,o&&this.updateProperties())}addVertex(n,r,o=!1){const a=this.getLatLngs();n>=0&&n<a.length-1&&(a.splice(n+1,0,r),wt.Polyline.prototype.setLatLngs.call(this,a),this.needsUpdate=!0,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.cachedProperties.center=void 0,this.cachedProperties.length=void 0,o&&this.updateProperties())}move(n,r=!0){const a=this.getLatLngs().map(u=>wt.latLng(u.lat+n.lat,u.lng+n.lng));return wt.Polyline.prototype.setLatLngs.call(this,a),this.fire("move"),this.needsUpdate=!0,this.cachedProperties.center=void 0,r&&this.updateProperties(),this}getCenter(){if(!this.needsUpdate&&this.cachedProperties.center)return this.cachedProperties.center;const n=this.getLatLngs();if(n.length<2)return n[0]||new wt.LatLng(0,0);try{const r=n.map(m=>[m.lng,m.lat]),o=Cc(r),a=Sh(o,{units:"meters"}),u=Z0(o,a/2,{units:"meters"}),f=wt.latLng(u.geometry.coordinates[1],u.geometry.coordinates[0]);return this.cachedProperties.center=f,f}catch(r){console.warn("Error calculating line center with turf.js, using simple method",r);const o=n.reduce((f,m)=>f+m.lat,0)/n.length,a=n.reduce((f,m)=>f+m.lng,0)/n.length,u=new wt.LatLng(o,a);return this.cachedProperties.center=u,u}}getSegmentLengths(){if(!this.needsUpdate&&this.cachedProperties.segmentLengths)return this.cachedProperties.segmentLengths;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let o=0;o<n.length-1;o++){const a=n[o],u=n[o+1];r.push(a.distanceTo(u))}return this.cachedProperties.segmentLengths=r,r}getSegmentLengthAt(n){const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return 0;const o=r[n],a=r[n+1];return o.distanceTo(a)}getLengthToVertex(n){const r=this.getLatLngs();let o=0;if(n<=0||r.length<2)return 0;for(let a=0;a<Math.min(n,r.length-1);a++)o+=r[a].distanceTo(r[a+1]);return o}getLength(){if(!this.needsUpdate&&this.cachedProperties.length)return this.cachedProperties.length;const n=this.getLatLngs();let r=0;for(let o=0;o<n.length-1;o++)r+=n[o].distanceTo(n[o+1]);return this.cachedProperties.length=r,r}}function tL(e,t,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function nL(e,t,n={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!K0(e[0])||!K0(e[1]))throw new Error("coordinates must contain numbers");return tL({type:"Point",coordinates:e},t,n)}function K0(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function B1(e,t,n){if(e!==null)for(var r,o,a,u,f,m,_,w=0,b=0,E,x=e.type,F=x==="FeatureCollection",N=x==="Feature",U=F?e.features.length:1,j=0;j<U;j++){_=F?e.features[j].geometry:N?e.geometry:e,E=_?_.type==="GeometryCollection":!1,f=E?_.geometries.length:1;for(var ne=0;ne<f;ne++){var ae=0,be=0;if(u=E?_.geometries[ne]:_,u!==null){m=u.coordinates;var ye=u.type;switch(w=ye==="Polygon"||ye==="MultiPolygon"?1:0,ye){case null:break;case"Point":if(t(m,b,j,ae,be)===!1)return!1;b++,ae++;break;case"LineString":case"MultiPoint":for(r=0;r<m.length;r++){if(t(m[r],b,j,ae,be)===!1)return!1;b++,ye==="MultiPoint"&&ae++}ye==="LineString"&&ae++;break;case"Polygon":case"MultiLineString":for(r=0;r<m.length;r++){for(o=0;o<m[r].length-w;o++){if(t(m[r][o],b,j,ae,be)===!1)return!1;b++}ye==="MultiLineString"&&ae++,ye==="Polygon"&&be++}ye==="Polygon"&&ae++;break;case"MultiPolygon":for(r=0;r<m.length;r++){for(be=0,o=0;o<m[r].length;o++){for(a=0;a<m[r][o].length-w;a++){if(t(m[r][o][a],b,j,ae,be)===!1)return!1;b++}be++}ae++}break;case"GeometryCollection":for(r=0;r<u.geometries.length;r++)if(B1(u.geometries[r],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function iL(e,t={}){let n=0,r=0,o=0;return B1(e,function(a){n+=a[0],r+=a[1],o++}),nL([n/o,r/o],t.properties)}var Of=iL;const Eh=(e,t)=>{if(!e||typeof e!="string"||!e.startsWith("#"))return`rgba(0, 0, 0, ${t})`;const n=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),o=parseInt(e.slice(5,7),16);return`rgba(${n}, ${r}, ${o}, ${t})`},J0=(e,t)=>{e.style.fontSize=t.fontSize,e.style.color=t.color,e.style.backgroundColor=Eh(t.backgroundColor,t.backgroundOpacity),t.hasBorder?e.style.border=`${t.borderWidth} solid ${Eh(t.borderColor,t.borderOpacity)}`:e.style.border="none",e.style.padding=t.padding,e.style.borderRadius=t.borderRadius},ss=e=>{document.querySelectorAll(".drawing-help-message").forEach(r=>r.remove());const n=wt.DomUtil.create("div","drawing-help-message");return n.innerHTML=e,n.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(n),n};function Y0(e,t,n){const r=156543.03392*Math.cos(t*Math.PI/180)/Math.pow(2,n);return e/r}const Pn=(e,t="m",n="")=>{let r,o;return t==="m"?e>=1e4?(r=(e/1e4).toFixed(2),o="ha"):(r=e.toFixed(2),o="m"):t==="m"?e>=1e3?(r=(e/1e3).toFixed(2),o="km"):(r=e.toFixed(2),o="m"):(r=e.toFixed(2),o=t),n?`${n}: ${r} ${o}`:`${r} ${o}`},Rf=e=>`${((e%360+360)%360).toFixed(1)}`,rL=e=>({...e,clientX:e.clientX,clientY:e.clientY,button:e.button||0,buttons:e.buttons||0,altKey:e.altKey||!1}),sL=(e,t)=>{let n;return function(...r){window.clearTimeout(n),n=window.setTimeout(()=>e.apply(this,r),t)}},If=(e,t)=>{let n=0;return function(...r){const o=Date.now();if(!(o-n<t))return n=o,e.apply(this,r)}};function oL(){const e=It(null),t=It(null),n=It(null),r=It(null),o=It(""),a=It(null),u=It(!1),f=(M,Y="Double-cliquez pour diter")=>{const Z={fontSize:"14px",color:"#000000",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderWidth:"1px",borderOpacity:1,padding:"5px 10px",borderRadius:"3px",hasBorder:!0,rotation:0,physicalSize:2},re=(ge,me)=>{var se;const je=((se=e.value)==null?void 0:se.getZoom())||14,$e=M.lat,X=Y0(me.physicalSize,$e,je);return`<div class="text-container" style="width:${X}px;height:${X}px;transform:rotate(${me.rotation}deg)">
        <div class="text-annotation" style="font-size:${X*.2}px;color:${me.color};background-color:${Eh(me.backgroundColor,me.backgroundOpacity)};border:${me.hasBorder?me.borderWidth+" solid "+Eh(me.borderColor,me.borderOpacity):"none"};padding:${me.padding};border-radius:${me.borderRadius}">${ge}</div>
        <div class="text-controls"><div class="control-button rotate"></div><div class="control-button move"></div></div>
      </div>`},W=()=>{if(!e.value)return;const ge=z.getIcon(),me={html:re(z.properties.text,z.properties.style),className:ge.options.className};z.setIcon(wt.divIcon(me))},Q=wt.divIcon({html:re(Y,Z),className:"text-container",iconSize:[40,40],iconAnchor:[20,20]}),z=wt.marker(M,{icon:Q,draggable:!1,pmIgnore:!0});z.properties={type:"text",text:Y,style:{...Z}},e.value&&(e.value.on("zoomend",W),z.on("remove",()=>{var ge;(ge=e.value)==null||ge.off("zoomend",W)})),W();let Ie=!1,I=!1,G=0,$=0;const D=ge=>{if(!e.value)return;const me=ge.target;if(me.classList.contains("rotate")){Ie=!0;const je=z.getLatLng(),$e=e.value.mouseEventToLatLng(ge);G=Math.atan2($e.lat-je.lat,$e.lng-je.lng)*180/Math.PI,$=z.properties.style.rotation||0}else me.classList.contains("move")&&(I=!0);document.addEventListener("mousemove",J),document.addEventListener("mouseup",le)},J=ge=>{if(!(!I||!e.value)){if(Ie){const me=z.getLatLng(),je=e.value.mouseEventToLatLng(ge),$e=Math.atan2(je.lat-me.lat,je.lng-me.lng)*180/Math.PI,X=($+($e-G))%360;z.properties.style.rotation=X;const se=z.getIcon(),Te={html:re(z.properties.text,z.properties.style),className:se.options.className};z.setIcon(wt.divIcon(Te))}else if(I){const me=rL(ge),je=e.value.mouseEventToLatLng(me);z.setLatLng(je)}}},le=()=>{Ie=!1,I=!1,document.removeEventListener("mousemove",J),document.removeEventListener("mouseup",le)};return z.on("add",()=>{const ge=z.getElement();ge&&ge.querySelectorAll(".control-button").forEach(je=>{je.addEventListener("mousedown",D)})}),z.on("remove",()=>{const ge=z.getElement();ge&&ge.querySelectorAll(".control-button").forEach(je=>{je.removeEventListener("mousedown",D)})}),z.on("dblclick",ge=>{var Te;wt.DomEvent.stopPropagation(ge);const me=(Te=z.getElement())==null?void 0:Te.querySelector(".text-annotation");if(!me)return;me.contentEditable="true",me.focus(),me.classList.add("editing");const je=window.getSelection(),$e=document.createRange();$e.selectNodeContents(me),je==null||je.removeAllRanges(),je==null||je.addRange($e);const X=()=>{me.contentEditable="false",me.classList.remove("editing");const Ee=me.innerText.trim();if(Ee){z.properties.text=Ee;const ie=z.getIcon(),We={html:re(Ee,z.properties.style),className:ie.options.className};z.setIcon(wt.divIcon(We))}me.removeEventListener("blur",X),me.removeEventListener("keydown",se)},se=Ee=>{Ee.key==="Enter"&&!Ee.shiftKey&&(Ee.preventDefault(),X())};me.addEventListener("blur",X),me.addEventListener("keydown",se)}),z},m=(M,Y)=>{const Z=wt.DomUtil.create("div","measure-tooltip");if(Z.innerHTML=Y,Z.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(Z),e.value){const re=e.value.latLngToContainerPoint(M);Z.style.left=`${re.x+10}px`,Z.style.top=`${re.y-25}px`}return Z},_=If((M,Y,Z)=>{if(M&&(M.innerHTML=Z,e.value)){const re=e.value.latLngToContainerPoint(Y);M.style.left=`${re.x+10}px`,M.style.top=`${re.y-25}px`}},100),w=(M,Y,Z)=>{M.on("mouseover",()=>{const re=m(M.getLatLng(),Z());M.measureDiv=re}),M.on("mousemove",re=>{M.measureDiv&&e.value&&_(M.measureDiv,re.latlng,Z())}),M.on("mouseout",()=>{M.measureDiv&&(M.measureDiv.remove(),M.measureDiv=void 0)})};let b=[];const E=()=>{b.forEach(M=>{M&&M.remove&&("measureDiv"in M&&M.measureDiv&&(M.measureDiv.remove(),M.measureDiv=void 0),n.value&&n.value.removeLayer(M),M.remove())}),b=[],document.querySelectorAll(".measure-tooltip").forEach(M=>{M.remove()})},x=(M,Y="#2563EB")=>{const Z=wt.circleMarker(M,{radius:6,color:Y,fillColor:Y,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return n.value&&n.value.addLayer(Z),Z},F=(M,Y)=>{var re,W,Q,z,Ie,I;console.log("Input layer:",{type:Y,instanceof:{Circle:M instanceof wt.Circle,Rectangle:M instanceof wt.Rectangle,Polygon:M instanceof wt.Polygon,Polyline:M instanceof wt.Polyline,CircleArc:M instanceof Vl,TextRectangle:M instanceof bl},options:M.options});const Z={type:Y,style:M.options||{}};try{if(M instanceof bl)return M.properties;if(M instanceof wt.Circle){const G=M.getRadius(),$=M.getLatLng();Z.radius=G,Z.diameter=G*2,Z.area=Math.PI*Math.pow(G,2),Z.perimeter=2*Math.PI*G,Z.center=$,Z.surfaceInterieure=Z.area,Z.surfaceExterieure=Z.area}else if(M instanceof Vl){const G=M.getRadius(),$=M.getCenter(),D=M.getStartAngle(),J=M.getStopAngle(),le=M.getOpeningAngle();Z.radius=G,Z.diameter=G*2,Z.area=Math.PI*Math.pow(G,2)*le/360,Z.arcLength=2*Math.PI*G*le/360,Z.perimeter=Z.arcLength+2*G,Z.center=$,Z.startAngle=D,Z.stopAngle=J,Z.openingAngle=le,Z.surfaceInterieure=Z.area,Z.surfaceExterieure=Z.area}else if(M instanceof wt.Rectangle){const G=M.getBounds(),$=G.getNorthEast(),D=G.getSouthWest(),J=Yl([D.lng,D.lat],[$.lng,D.lat],{units:"meters"}),le=Yl([D.lng,D.lat],[D.lng,$.lat],{units:"meters"});Z.width=J,Z.height=le,Z.area=J*le,Z.perimeter=2*(J+le),Z.surfaceInterieure=Z.area,Z.surfaceExterieure=Z.area,Z.dimensions={width:J,height:le}}else if(M instanceof wt.Polygon){const $=M.getLatLngs()[0].map(J=>[J.lng,J.lat]);$.push($[0]);const D=vu([$]);Z.area=Qu(D),Z.perimeter=Sh(Cc([...$]),{units:"meters"}),Z.surfaceInterieure=Z.area,Z.surfaceExterieure=Z.area}else if(M instanceof wt.Polyline&&!(M instanceof wt.Polygon))if(M instanceof Ui)M.updateProperties(),Object.assign(Z,{...M.properties,type:"Line"});else{const $=M.getLatLngs().map(le=>[le.lng,le.lat]),D=Cc($);Z.length=Sh(D,{units:"meters"});const J=10;Z.surfaceInfluence=Z.length*J,Z.dimensions={width:J}}Z.style={...Z.style,color:((re=M.options)==null?void 0:re.color)||"#3388ff",weight:((W=M.options)==null?void 0:W.weight)||3,opacity:((Q=M.options)==null?void 0:Q.opacity)||1,fillColor:((z=M.options)==null?void 0:z.fillColor)||"#3388ff",fillOpacity:((Ie=M.options)==null?void 0:Ie.fillOpacity)||.2,dashArray:((I=M.options)==null?void 0:I.dashArray)||""}}catch(G){console.error("Error calculating shape properties:",G)}return Z},N=(M,Y=2)=>{var z;if(!e.value){console.warn("Map is not available for text size update");return}const Z=e.value.getZoom(),re=M.getLatLng().lat,W=Y0(Y,re,Z),Q=(z=M.getElement())==null?void 0:z.querySelector(".text-annotation");Q&&(M.properties.style.fontSize=`${W}px`,M.properties.physicalWidth=Y,M.properties.physicalHeight=Y,J0(Q,M.properties.style))},U=(M,Y,Z)=>{const re=wt.map(M).setView(Y,Z);e.value=re,wt.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors"}).addTo(re);const W=new wt.FeatureGroup;return W.addTo(re),t.value=W,n.value=wt.featureGroup().addTo(re),r.value=wt.featureGroup().addTo(re),re.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:W,snapLayers:[W,r.value],templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),re.on("pm:drawstart",Q=>{u.value=!0,Q.shape==="Circle"&&o.value==="Semicircle"&&(re.getContainer().style.cursor="crosshair")}),re.on("pm:drawend",()=>{u.value=!1,re.getContainer().style.cursor="",a.value&&ss("Cliquez sur la forme pour afficher les points de contrle")}),re.on("pm:create",async Q=>{var I,G,$,D,J,le,ge,me,je;const z=Q.layer;(I=t.value)==null||I.addLayer(z);let Ie="unknown";if(z instanceof wt.Circle?Ie=o.value==="Semicircle"?"Semicircle":"Circle":z instanceof wt.Rectangle?Ie="Rectangle":z instanceof wt.Polygon?Ie="Polygon":z instanceof wt.Polyline&&!(z instanceof wt.Polygon)&&(Ie="Line"),z.properties=F(z,Ie),a.value=z,z.on("mouseover",()=>{console.log("[mouseover] Survol de la forme",{type:Ie,isSelected:a.value===z}),(!a.value||a.value!==z)&&Se(z)}),z.on("mouseout",()=>{var $e;console.log("[mouseout] Sortie de la forme",{type:Ie,isSelected:a.value===z}),(!a.value||a.value!==z)&&(($e=r.value)==null||$e.clearLayers())}),Ie==="Semicircle"){const $e=z.getLatLng(),X=z.getRadius();(G=t.value)==null||G.removeLayer(z);const se=new Vl($e,X);se.properties=F(se,"Semicircle"),($=t.value)==null||$.addLayer(se),a.value=se,H(se)}else if(Ie==="Circle"){(D=t.value)==null||D.removeLayer(z);const $e=new Xu(z.getLatLng(),{...z.options,radius:z.getRadius()});$e.updateProperties(),(J=t.value)==null||J.addLayer($e),a.value=$e,de($e)}else if(Ie==="Rectangle"){(le=t.value)==null||le.removeLayer(z);const $e=new za(z.getBounds(),{...z.options});$e.updateProperties(),(ge=t.value)==null||ge.addLayer($e),a.value=$e,Be($e)}else if(z instanceof wt.Polygon)q(z);else if(z instanceof Ui)Ue(z);else if(z instanceof wt.Polyline&&!(z instanceof wt.Polygon)){const $e=z.getLatLngs(),X=new Ui($e,{...z.options});X.updateProperties(),(me=t.value)==null||me.removeLayer(z),(je=t.value)==null||je.addLayer(X),a.value=X,Ue(X)}ss("Cliquez sur la forme pour afficher les points de contrle")}),W.on("click",Q=>{var Ie,I,G,$,D,J,le,ge;wt.DomEvent.stopPropagation(Q);const z=Q.layer;if(console.log("[featureGroup click] Slection de forme",{type:(Ie=z.properties)==null?void 0:Ie.type,previouslySelected:a.value===z}),(I=r.value)==null||I.clearLayers(),E(),(G=document.querySelector(".drawing-help-message"))==null||G.remove(),a.value=z,z instanceof bl){if(console.log("[featureGroup click] TextRectangle selected",{id:z._leaflet_id,bounds:z.getBounds(),hasTextContainer:!!z.getTextElement(),properties:z.properties}),ss("Double-cliquez sur le texte pour le modifier. Cliquez et glissez pour dplacer."),e.value&&e.value.pm)try{if(e.value.pm.globalEditModeEnabled()&&e.value.pm.disableGlobalEditMode(),t.value){const me=t.value.getLayers(),je=z.getBounds(),$e=me.filter(X=>{if(X===z||!(X instanceof wt.Rectangle)||X.properties&&X.properties.type==="TextRectangle")return!1;try{const se=X.getBounds(),Te=z.getBounds(),Ee=1e-8,ie=Math.abs(se.getNorth()-Te.getNorth())<Ee&&Math.abs(se.getSouth()-Te.getSouth())<Ee&&Math.abs(se.getEast()-Te.getEast())<Ee&&Math.abs(se.getWest()-Te.getWest())<Ee;return ie&&console.log("[TextRectangle] Found duplicate Rectangle:",{id:X._leaflet_id,bounds:se.toBBoxString()}),ie}catch(se){return console.error("[TextRectangle] Error comparing bounds:",se),!1}});$e.length>0&&(console.warn(`[TextRectangle] ALERT: ${$e.length} rectangles already exist with the same bounds!`),setTimeout(()=>{$e.forEach(X=>{try{t.value&&t.value.hasLayer(X)&&t.value.removeLayer(X)}catch(se){console.error("[TextRectangle] Error removing duplicate:",se)}})},100))}}catch(me){console.error("Error disabling edit mode:",me)}return}if(z instanceof Vl||(($=z.properties)==null?void 0:$.type)==="Semicircle")H(z);else if(z instanceof Xu)de(z);else if(z instanceof wt.Circle){const me=new Xu(z.getLatLng(),{...z.options,radius:z.getRadius()});me.updateProperties(),(D=t.value)==null||D.removeLayer(z),(J=t.value)==null||J.addLayer(me),a.value=me,de(me)}else if(z instanceof za)Be(z);else if(z instanceof wt.Rectangle){const me=new za(z.getBounds(),{...z.options});me.updateProperties(),(le=t.value)==null||le.removeLayer(z),(ge=t.value)==null||ge.addLayer(me),a.value=me,Be(me)}else z instanceof wt.Polygon?q(z):(z instanceof Ui||z instanceof wt.Polyline&&!(z instanceof wt.Polygon))&&Ue(z)}),re.on("pm:edit",Q=>{var Ie,I,G;console.log("[pm:edit] Dbut",{layer:Q.layer,currentProperties:Q.layer.properties});const z=Q.layer;if(z){const $=((Ie=z.properties)==null?void 0:Ie.type)||"unknown";if(Pe(z,$),console.log("[pm:edit] Aprs updateLayerProperties",{updatedProperties:z.properties,selectedShape:a.value}),$==="Semicircle")H(z);else if(z instanceof Xu)de(z);else if(z instanceof za)Be(z);else if(z instanceof wt.Rectangle){const D=new za(z.getBounds(),{...z.options});D.updateProperties(),(I=t.value)==null||I.removeLayer(z),(G=t.value)==null||G.addLayer(D),a.value=D,Be(D)}else z instanceof wt.Polygon?q(z):z instanceof Ui?(z.updateProperties(),Pe(z,"Line"),Ue(z)):z instanceof wt.Polyline&&Ue(z)}}),re.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(Q=>Q.remove()),ss("Dplacez la forme  l'endroit souhait")}),re.on("pm:dragend",Q=>{var Ie,I,G;console.log("[pm:dragend] Dbut",{layer:Q.layer,currentProperties:Q.layer.properties});const z=Q.layer;if(z){const $=((Ie=z.properties)==null?void 0:Ie.type)||"unknown";if(z instanceof wt.Rectangle&&!(z instanceof za)){const D=new za(z.getBounds(),{...z.options});D.updateProperties(),(I=t.value)==null||I.removeLayer(z),(G=t.value)==null||G.addLayer(D),a.value=D,Be(D)}else z instanceof Ui?(z.updateProperties(),Pe(z,"Line"),Ue(z)):Pe(z,$);console.log("[pm:dragend] Aprs updateLayerProperties",{updatedProperties:z.properties,selectedShape:a.value})}setTimeout(()=>{ss("Cliquez sur la forme pour afficher les points de contrle")},100)}),re.on("pm:remove",()=>{var Q;(Q=document.querySelector(".drawing-help-message"))==null||Q.remove()}),re.on("pm:select",Q=>{var Ie;const z=Q.layer;document.querySelectorAll(".drawing-help-message").forEach(I=>I.remove()),z instanceof Vl||((Ie=z.properties)==null?void 0:Ie.type)==="Semicircle"?ss(`Points de contrle : <span style="color: #059669"></span> Ajuster le rayon, <span style="color: #2563EB"></span> et <span style="color: #DC2626"></span> Modifier l'ouverture du demi-cercle`):ss("Utilisez les points de contrle pour modifier la forme")}),re.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(Q=>Q.remove())}),re},j=()=>{if(!e.value||!t.value)return;const M=t.value.getBounds();M.isValid()&&e.value.fitBounds(M,{padding:[50,50],maxZoom:19})},ne=M=>{if(e.value){document.querySelectorAll(".drawing-help-message").forEach(Y=>Y.remove());try{const Y=e.value.pm;Y.globalEditModeEnabled()&&Y.disableGlobalEditMode(),Y.globalRemovalModeEnabled()&&Y.disableGlobalRemovalMode(),Y.disableDraw(),E()}catch(Y){console.error("Error disabling modes:",Y)}if(o.value=M,!M){E();return}setTimeout(()=>{var Y,Z,re,W,Q,z,Ie,I;try{switch(M){case"Circle":ss("Cliquez et maintenez pour dessiner un cercle, relchez pour terminer"),(Y=e.value)==null||Y.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Semicircle":ss("Cliquez et maintenez pour dessiner un demi-cercle, relchez pour terminer"),(Z=e.value)==null||Z.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Rectangle":ss("Cliquez et maintenez pour dessiner un rectangle, relchez pour terminer"),(re=e.value)==null||re.pm.enableDraw("Rectangle",{finishOn:"mouseup"});break;case"Polygon":ss("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(W=e.value)==null||W.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Line":ss("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(Q=e.value)==null||Q.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Text":if(ss("Cliquez pour ajouter du texte, double-cliquez pour diter"),e.value){const G=$=>{if(!e.value||!t.value)return;const D=f($.latlng);t.value.addLayer(D),a.value=D,e.value.off("click",G),ne("")};e.value.on("click",G)}break;case"delete":ss("Cliquez sur une forme pour la supprimer"),(z=e.value)==null||z.pm.enableGlobalRemovalMode();break;case"TextRectangle":ss("Cliquez et maintenez pour dessiner un rectangle avec texte, relchez pour terminer"),(Ie=e.value)==null||Ie.pm.enableDraw("Rectangle",{finishOn:"mouseup",continueDrawing:!1}),(I=e.value)==null||I.on("pm:create",G=>{var $,D;if(G.shape==="Rectangle"&&G.layer){const J=G.layer.getBounds(),le=new bl(J,"Double-cliquez pour diter");le.properties={type:"TextRectangle",text:"Double-cliquez pour diter",width:0,height:0,area:0,rotation:0,style:{color:"#3B82F6",weight:2,fillColor:"#F9FAFB",fillOpacity:.8,textColor:"#000000",fontSize:"14px",fontFamily:"Arial, sans-serif",textAlign:"center"}},($=e.value)==null||$.removeLayer(G.layer),t.value&&(t.value.addLayer(le),a.value=le,le.updateProperties()),(D=e.value)==null||D.pm.disableDraw()}});break}}catch(G){console.error("Error enabling tool:",G)}},100)}},ae=M=>{var Z;if(!a.value)return;const Y=a.value;if(Y.properties=Y.properties||{},Y.properties.style=Y.properties.style||{},Y.properties.style={...Y.properties.style,...M},Y.properties.type==="text"){const re=Y.properties._textLayer,W=(Z=re==null?void 0:re.getElement())==null?void 0:Z.querySelector(".text-annotation");W&&J0(W,Y.properties.style);const Q={color:M.borderColor||Y.properties.style.borderColor,weight:parseInt(M.borderWidth||Y.properties.style.borderWidth),opacity:M.borderOpacity??Y.properties.style.borderOpacity};"setStyle"in Y&&Y.setStyle(Q)}else if(Y.properties.type==="TextRectangle"){if(Y instanceof bl){const re={};M.textColor!==void 0&&(re.textColor=M.textColor),M.fontSize!==void 0&&(re.fontSize=M.fontSize),M.fontFamily!==void 0&&(re.fontFamily=M.fontFamily),M.backgroundColor!==void 0&&(re.backgroundColor=M.backgroundColor),M.backgroundOpacity!==void 0&&(re.backgroundOpacity=M.backgroundOpacity),M.textAlign!==void 0&&(re.textAlign=M.textAlign),M.bold!==void 0&&(re.bold=M.bold),M.italic!==void 0&&(re.italic=M.italic),M.fillColor&&(re.fillColor=M.fillColor),M.fillOpacity!==void 0&&(re.fillOpacity=M.fillOpacity),M.strokeColor&&(re.color=M.strokeColor),M.color&&(re.color=M.color),M.strokeOpacity!==void 0&&(re.opacity=M.strokeOpacity),M.strokeWidth!==void 0&&(re.weight=M.strokeWidth),M.weight!==void 0&&(re.weight=M.weight),M.dashArray&&(re.dashArray=M.dashArray),Y.setTextStyle(re)}}else{const re={};M.fillColor&&(re.fillColor=M.fillColor),M.fillOpacity!==void 0&&(re.fillOpacity=M.fillOpacity),M.strokeColor&&(re.color=M.strokeColor),M.strokeOpacity!==void 0&&(re.opacity=M.strokeOpacity),M.strokeWidth!==void 0&&(re.weight=M.strokeWidth),M.dashArray&&(re.dashArray=M.dashArray),"setStyle"in Y&&Y.setStyle(re)}},be=M=>{if(!a.value)return;const Y=a.value;Y.properties={...Y.properties,...M},M.radius&&Y instanceof wt.Circle&&Y.setRadius(M.radius)},ye=M=>{console.log("[forceShapeUpdate] Dbut",{currentProperties:M.properties,selectedShapeRef:a.value}),a.value=null,as(()=>{a.value=M,console.log("[forceShapeUpdate] Aprs mise  jour",{selectedShape:a.value,properties:a.value.properties})})},Pe=(M,Y)=>{console.log("[updateLayerProperties] Dbut",{layer:M,shapeType:Y,currentProperties:M.properties}),sL((re,W)=>{const Q=F(re,W);console.log("[updateLayerProperties] Nouvelles proprits calcules",{newProperties:Q}),re.properties={...Q},ye(re),re.fire("properties:updated",{shape:re,properties:re.properties}),console.log("[updateLayerProperties] Fin",{finalProperties:re.properties,selectedShape:a.value})},100)(M,Y)},Ce=(M,Y)=>wt.latLng((M.lat+Y.lat)/2,(M.lng+Y.lng)/2),de=M=>{if(!e.value||!t.value)return;E();const Y=M.getLatLng(),Z=M.getRadius(),re=x(Y,"#059669");b.push(re),w(re,M,()=>[Pn(Z,"m","Rayon"),Pn(Z*2,"m","Diamtre"),Pn(Math.PI*Math.pow(Z,2),"m","Surface")].join("<br>"));const W=[],Q=[0,45,90,135,180,225,270,315];Q.forEach(z=>{const Ie=M.calculatePointOnCircle(z),I=x(Ie,"#2563EB");W.push(I),b.push(I),w(I,M,()=>Pn(Z,"m","Rayon")),I.on("mousedown",G=>{if(!e.value)return;wt.DomEvent.stopPropagation(G),e.value.dragging.disable();let $=!0;const D=le=>{$&&(M.resizeFromControlPoint(le.latlng),W.forEach((ge,me)=>{const je=M.calculatePointOnCircle(Q[me]);ge.setLatLng(je)}),re.setLatLng(M.getLatLng()),I.measureDiv&&(I.measureDiv.innerHTML=Pn(M.getRadius(),"m","Rayon")))},J=()=>{$=!1,e.value&&(e.value.off("mousemove",D),document.removeEventListener("mouseup",J),e.value.dragging.enable(),M.updateProperties(),a.value=null,as(()=>{a.value=M}),Pe(M,"Circle"))};e.value.on("mousemove",D),document.addEventListener("mouseup",J)})}),re.on("mousedown",z=>{if(!e.value)return;wt.DomEvent.stopPropagation(z),e.value.dragging.disable();let Ie=!0;const I=M.getLatLng(),G=z.latlng,$=J=>{if(!Ie)return;const le=J.latlng.lng-G.lng,ge=J.latlng.lat-G.lat,me=wt.latLng(I.lat+ge,I.lng+le);wt.Circle.prototype.setLatLng.call(M,me),re.setLatLng(me),W.forEach((je,$e)=>{const X=M.calculatePointOnCircle(Q[$e]);je.setLatLng(X)}),re.measureDiv&&(re.measureDiv.innerHTML=[Pn(M.getRadius(),"m","Rayon"),Pn(M.getRadius()*2,"m","Diamtre"),Pn(Math.PI*Math.pow(M.getRadius(),2),"m","Surface")].join("<br>"))},D=()=>{Ie=!1,e.value&&(e.value.off("mousemove",$),document.removeEventListener("mouseup",D),e.value.dragging.enable(),M.updateProperties(),a.value=null,as(()=>{a.value=M}),Pe(M,"Circle"))};e.value.on("mousemove",$),document.addEventListener("mouseup",D)}),M.on("circle:resized",()=>{Pe(M,"Circle")}),a.value=M},Be=M=>{if(!e.value||!t.value)return;if(!(M instanceof za)){console.warn("La couche n'est pas une instance de Rectangle");return}const Y=M;E();const Z=Y.getBounds(),re=Z.getCenter(),W=[Z.getNorthWest(),Z.getNorthEast(),Z.getSouthEast(),Z.getSouthWest()],Q=x(re,"#059669");b.push(Q),w(Q,Y,()=>{const{width:G,height:$}=Y.getDimensions(),D=G*$;return[Pn(G,"m","Largeur"),Pn($,"m","Hauteur"),Pn(D,"m","Surface")].join("<br>")});const z=[];W.forEach((G,$)=>{const D=x(G,"#DC2626");z.push(D),b.push(D),w(D,Y,()=>{const{width:J,height:le}=Y.getDimensions();return[Pn(J,"m","Largeur"),Pn(le,"m","Hauteur")].join("<br>")}),D.on("mousedown",J=>{if(!e.value)return;wt.DomEvent.stopPropagation(J),e.value.dragging.disable();const le=me=>{Y.resizeFromCorner($,me.latlng);const je=Y.getBounds(),$e=[je.getNorthWest(),je.getNorthEast(),je.getSouthEast(),je.getSouthWest()];D.setLatLng(me.latlng),Q.setLatLng(je.getCenter()),z.forEach((se,Te)=>{Te!==$&&se.setLatLng($e[Te])});const X=Y.getMidPoints();Ie.forEach((se,Te)=>{se.setLatLng(X[Te]);const{width:Ee,height:ie}=Y.getDimensions(),We=Te%2===0?Ee:ie;se.measureDiv&&(se.measureDiv.innerHTML=[Pn(We,"m","Longueur du ct"),Pn(We/2,"m","Distance au coin")].join("<br>"))})},ge=()=>{e.value&&(e.value.off("mousemove",le),document.removeEventListener("mouseup",ge),e.value.dragging.enable(),Y.updateProperties(),a.value=null,as(()=>{a.value=Y}))};e.value.on("mousemove",le),document.addEventListener("mouseup",ge)})});const Ie=[];Y.getMidPoints().forEach((G,$)=>{const D=x(G,"#2563EB");Ie.push(D),b.push(D),w(D,Y,()=>{const{width:J,height:le}=Y.getDimensions(),ge=$%2===0?J:le;return[Pn(ge,"m","Longueur du ct"),Pn(ge/2,"m","Distance au coin")].join("<br>")}),D.on("mousedown",J=>{wt.DomEvent.stopPropagation(J),e.value.dragging.disable();const le=me=>{const je=e.value.mouseEventToLatLng(me.originalEvent),$e=Y.getBounds(),X=$e.getNorthWest(),se=$e.getSouthEast();let Te;if($%2===0){const et=(X.lng+se.lng)/2;Te=wt.latLng(je.lat,et)}else{const et=(X.lat+se.lat)/2;Te=wt.latLng(et,je.lng)}Y.resizeFromSide($,Te);const Ee=Y.getBounds(),ie=[Ee.getNorthWest(),Ee.getNorthEast(),Ee.getSouthEast(),Ee.getSouthWest()];Q.setLatLng(Ee.getCenter()),z.forEach((et,Xe)=>{et.setLatLng(ie[Xe])});const We=Y.getMidPoints();Ie.forEach((et,Xe)=>{et.setLatLng(We[Xe]);const{width:De,height:ke}=Y.getDimensions(),lt=Xe%2===0?De:ke;et.measureDiv&&(et.measureDiv.innerHTML=[Pn(lt,"m","Longueur du ct"),Pn(lt/2,"m","Distance au coin")].join("<br>"))})},ge=()=>{e.value.dragging.enable(),e.value.off("mousemove",le),document.removeEventListener("mouseup",ge),Y.updateProperties(),a.value=null,as(()=>{a.value=Y})};e.value.on("mousemove",le),document.addEventListener("mouseup",ge)})}),Q.on("mousedown",G=>{if(!e.value)return;wt.DomEvent.stopPropagation(G),e.value.dragging.disable();let $=!0;const D=le=>{if(!$)return;Y.moveFromCenter(le.latlng),Q.setLatLng(le.latlng);const ge=Y.getBounds(),me=[ge.getNorthWest(),ge.getNorthEast(),ge.getSouthEast(),ge.getSouthWest()];z.forEach(($e,X)=>{$e.setLatLng(me[X])});const je=Y.getMidPoints();if(Ie.forEach(($e,X)=>{$e.setLatLng(je[X])}),Q.measureDiv){const{width:$e,height:X}=Y.getDimensions(),se=$e*X;Q.measureDiv.innerHTML=[Pn($e,"m","Largeur"),Pn(X,"m","Hauteur"),Pn(se,"m","Surface")].join("<br>")}},J=()=>{$=!1,e.value&&(e.value.off("mousemove",D),document.removeEventListener("mouseup",J),e.value.dragging.enable(),Y.updateProperties(),a.value=null,as(()=>{a.value=Y}))};e.value.on("mousemove",D),document.addEventListener("mouseup",J)})},Ue=M=>{if(!e.value||!t.value)return;E();const Y=M.getLatLngs();let Z=null;if(M instanceof Ui){const Q=M.getCenter();Z=x(Q,"#059669"),b.push(Z),w(Z,M,()=>{const z=M.getLength()||0;return Pn(z,"m","Longueur totale")}),Z.on("mousedown",z=>{if(!e.value)return;wt.DomEvent.stopPropagation(z),e.value.dragging.disable();let Ie=!0;const I=z.latlng,G=[...M.getLatLngs()];b.forEach((J,le)=>{le>0&&J.setStyle({opacity:0,fillOpacity:0})});const $=J=>{if(!Ie)return;const le=J.latlng.lng-I.lng,ge=J.latlng.lat-I.lat,me=G.map(je=>wt.latLng(je.lat+ge,je.lng+le));wt.Polyline.prototype.setLatLngs.call(M,me),Z==null||Z.setLatLng(J.latlng)},D=()=>{Ie=!1,e.value&&(e.value.off("mousemove",$),document.removeEventListener("mouseup",D),e.value.dragging.enable(),E(),Ue(M),M instanceof Ui&&(M.updateProperties(),Pe(M,"Line")),a.value=M)};e.value.on("mousemove",$),document.addEventListener("mouseup",D)})}Y.forEach((Q,z)=>{const Ie=x(Q,"#DC2626");b.push(Ie),w(Ie,M,()=>{let I=0,G=0;return M instanceof Ui?(I=M.getLength()||0,G=M.getLengthToVertex(z)):(I=Y.reduce(($,D,J)=>J===0?0:$+D.distanceTo(Y[J-1]),0),G=Y.slice(0,z+1).reduce(($,D,J)=>J===0?0:$+D.distanceTo(Y[J-1]),0)),[Pn(G,"m","Distance depuis le dbut"),Pn(I,"m","Longueur totale")].join("<br>")}),Ie.on("mousedown",I=>{if(!e.value)return;wt.DomEvent.stopPropagation(I),e.value.dragging.disable();let G=!0;Z&&(Z.setStyle({opacity:0,fillOpacity:0}),Z.measureDiv&&(Z.measureDiv.style.display="none"));const $=[];z>0&&$.push(z-1),z<Y.length-1&&$.push(z);const D=$.map(ge=>Y.length+ge),J=ge=>{G&&(M instanceof Ui?M.moveVertex(z,ge.latlng,!1):(Y[z]=ge.latlng,M.setLatLngs(Y)),Ie.setLatLng(ge.latlng),W($,D))},le=()=>{if(G=!1,!!e.value){if(e.value.off("mousemove",J),document.removeEventListener("mouseup",le),e.value.dragging.enable(),M instanceof Ui&&(M.updateProperties(),Pe(M,"Line")),Z&&M instanceof Ui){const ge=M.getCenter();Z.setLatLng(ge),Z.setStyle({opacity:1,fillOpacity:1}),Z.measureDiv&&(Z.measureDiv.style.display="")}a.value=null,as(()=>{a.value=M})}};e.value.on("mousemove",J),document.addEventListener("mouseup",le)})});const re=()=>{const Q=M.getLatLngs(),z=M instanceof Ui?Q.length+1:Q.length;b.slice(z).forEach(I=>{var G;I&&typeof I.remove=="function"&&((G=n.value)==null||G.removeLayer(I))}),b=b.slice(0,z),(M instanceof Ui?M.getMidPoints():Array.from({length:Q.length-1},(I,G)=>{const $=Q[G],D=Q[G+1];return wt.latLng(($.lat+D.lat)/2,($.lng+D.lng)/2)})).forEach((I,G)=>{const $=x(I,"#2563EB");b.push($),w($,M,()=>{let D=0,J=0,le=0;if(M instanceof Ui)D=M.getSegmentLengthAt(G),J=M.getLength()||0,le=M.getLengthToVertex(G)+D/2;else{const ge=Q[G],me=Q[G+1];D=ge.distanceTo(me),J=Q.reduce((je,$e,X)=>X===0?0:je+$e.distanceTo(Q[X-1]),0),le=Q.slice(0,G+1).reduce((je,$e,X)=>X===0?0:je+$e.distanceTo(Q[X-1]),0)+D/2}return[Pn(D,"m","Longueur du segment"),Pn(D/2,"m","Demi-segment"),Pn(le,"m","Distance depuis le dbut"),Pn(J,"m","Longueur totale")].join("<br>")}),$.on("mousedown",D=>{if(!e.value)return;wt.DomEvent.stopPropagation(D),e.value.dragging.disable();let J=!0;const le=G,ge=M.getLatLngs(),me=b.find(X=>X.options&&X.options.color==="#059669");me&&(me.setStyle({opacity:0,fillOpacity:0}),me.measureDiv&&(me.measureDiv.style.display="none"));const je=X=>{if(J){if(M instanceof Ui)M.addVertex(le,X.latlng,!1);else{const se=ge.slice();se.splice(le+1,0,X.latlng),M.setLatLngs(se)}E(),Ue(M),$e()}},$e=()=>{J=!1,e.value&&(e.value.off("mousemove",je),document.removeEventListener("mouseup",$e),e.value.dragging.enable(),M instanceof Ui&&(M.updateProperties(),Pe(M,"Line")),a.value=null,as(()=>{a.value=M}))};e.value.on("mousemove",je),document.addEventListener("mouseup",$e)})})},W=(Q,z)=>{const Ie=M.getLatLngs();Q.forEach((I,G)=>{if(I<0||I>=Ie.length-1)return;const $=z[G];if($>=0&&$<b.length){let D;if(M instanceof Ui){const le=M.getMidPointAt(I);if(!le)return;D=le}else{const le=Ie[I],ge=Ie[I+1];D=wt.latLng((le.lat+ge.lat)/2,(le.lng+ge.lng)/2)}const J=b[$];if(J&&J.setLatLng){J.setLatLng(D);const le=J;if(le.measureDiv){let ge=0,me=0,je=0;if(M instanceof Ui)ge=M.getSegmentLengthAt(I),me=M.getLength()||0,je=M.getLengthToVertex(I)+ge/2;else{const $e=Ie[I],X=Ie[I+1];ge=$e.distanceTo(X),me=0,je=0;for(let se=0;se<Ie.length-1;se++){const Te=Ie[se].distanceTo(Ie[se+1]);me+=Te,se<I?je+=Te:se===I&&(je+=Te/2)}}le.measureDiv.innerHTML=[Pn(ge,"m","Longueur du segment"),Pn(ge/2,"m","Demi-segment"),Pn(je,"m","Distance depuis le dbut"),Pn(me,"m","Longueur totale")].join("<br>")}}}})};re()},q=M=>{if(!e.value||!t.value)return;E();const Y=M.getLatLngs()[0],Z=Y.map(G=>[G.lng,G.lat]);Z.push(Z[0]);const re=vu([Z]),W=Qu(re),Q=Y.reduce((G,$,D)=>{const J=Y[(D+1)%Y.length];return G+$.distanceTo(J)},0);let z;if(typeof M.getCenter=="function")try{z=M.getCenter()}catch(G){console.warn("Erreur lors de la rcupration du centre du polygone via getCenter(), utilisation de la mthode alternative",G);const $=Of(re);z=wt.latLng($.geometry.coordinates[1],$.geometry.coordinates[0])}else{const G=Of(re);z=wt.latLng(G.geometry.coordinates[1],G.geometry.coordinates[0])}const Ie=x(z,"#059669");b.push(Ie),w(Ie,M,()=>[Pn(Q,"m","Primtre"),Pn(W,"m","Surface")].join("<br>")),Ie.on("mousedown",G=>{if(!e.value)return;wt.DomEvent.stopPropagation(G),e.value.dragging.disable();let $=!0;const D=G.latlng,J=[...Y];b.forEach((je,$e)=>{$e>0&&je.setStyle({opacity:0,fillOpacity:0})});const le=If(je=>{if(!$)return;const $e=je.latlng.lng-D.lng,X=je.latlng.lat-D.lat,se=J.map(Te=>wt.latLng(Te.lat+X,Te.lng+$e));wt.Polygon.prototype.setLatLngs.call(M,[se]),Ie.setLatLng(je.latlng)},16),ge=je=>{$&&le(je)},me=()=>{if($=!1,!!e.value){if(e.value.off("mousemove",ge),document.removeEventListener("mouseup",me),e.value.dragging.enable(),M.properties){const je=M.getLatLngs()[0],$e=je.map(se=>[se.lng,se.lat]);$e.push($e[0]);const X=vu([$e]);M.properties.area=Qu(X),M.properties.perimeter=je.reduce((se,Te,Ee)=>{const ie=je[(Ee+1)%je.length];return se+Te.distanceTo(ie)},0),M.properties.surfaceInterieure=M.properties.area,M.properties.surfaceExterieure=M.properties.area}E(),q(M),a.value=null,as(()=>{a.value=M})}};e.value.on("mousemove",ge),document.addEventListener("mouseup",me)}),Y.forEach((G,$)=>{const D=x(G,"#DC2626");b.push(D),w(D,M,()=>{const J=Y[($-1+Y.length)%Y.length],le=Y[($+1)%Y.length],ge=G.distanceTo(J),me=G.distanceTo(le);return[Pn(ge,"m","Distance au point prcdent"),Pn(me,"m","Distance au point suivant"),Pn(Q,"m","Primtre total"),Pn(W,"m","Surface")].join("<br>")}),D.on("mousedown",J=>{if(wt.DomEvent.stopPropagation(J),!e.value)return;e.value.dragging.disable();let le=!0;Ie&&(Ie.setStyle({opacity:0,fillOpacity:0}),Ie.measureDiv&&(Ie.measureDiv.style.display="none"));const ge=If($e=>{if(!le)return;Y[$]=$e.latlng,wt.Polygon.prototype.setLatLngs.call(M,[Y]),D.setLatLng($e.latlng);const X=b.slice(Y.length+1),se=($-1+Y.length)%Y.length,Te=X[se];if(Te){const ie=Y[se],We=Y[$],et=wt.latLng((ie.lat+We.lat)/2,(ie.lng+We.lng)/2);Te.setLatLng(et)}const Ee=X[$];if(Ee){const ie=Y[$],We=Y[($+1)%Y.length],et=wt.latLng((ie.lat+We.lat)/2,(ie.lng+We.lng)/2);Ee.setLatLng(et)}},16),me=$e=>{le&&ge($e)},je=()=>{if(le=!1,!!e.value){if(e.value.off("mousemove",me),document.removeEventListener("mouseup",je),e.value.dragging.enable(),M.properties){const $e=M.getLatLngs()[0].map(se=>[se.lng,se.lat]);$e.push($e[0]);const X=vu([$e]);M.properties.area=Qu(X),M.properties.perimeter=Y.reduce((se,Te,Ee)=>{const ie=Y[(Ee+1)%Y.length];return se+Te.distanceTo(ie)},0),M.properties.surfaceInterieure=M.properties.area,M.properties.surfaceExterieure=M.properties.area}E(),q(M),a.value=null,as(()=>{a.value=M})}};e.value.on("mousemove",me),document.addEventListener("mouseup",je)})}),(()=>{const G=M.getLatLngs()[0];b.slice(G.length+1).forEach(D=>{n.value&&n.value.removeLayer(D)}),b=b.slice(0,G.length+1);const $=new Array(G.length);for(let D=0;D<G.length;D++){const J=G[D],le=G[(D+1)%G.length];$[D]=Ce(J,le)}$.forEach((D,J)=>{const le=x(D,"#2563EB");b.push(le),w(le,M,()=>{const ge=G[J],me=G[(J+1)%G.length],je=ge.distanceTo(me);return[Pn(je,"m","Longueur du segment"),Pn(Q,"m","Primtre total"),Pn(W,"m","Surface")].join("<br>")}),le.on("mousedown",ge=>{if(!e.value)return;wt.DomEvent.stopPropagation(ge),e.value.dragging.disable();let me=!0;const je=J;Ie&&(Ie.setStyle({opacity:0,fillOpacity:0}),Ie.measureDiv&&(Ie.measureDiv.style.display="none"));const $e=[...M.getLatLngs()[0]];$e.splice((je+1)%$e.length,0,D),M.setLatLngs([$e]),E(),q(M);const X=je+1,se=1+X,Te=X<b.length-1?b[se]:null;if(Te){const Ee=We=>{if(!me)return;const et=M.getLatLngs()[0];et[X]=We.latlng,M.setLatLngs([et]),Te.setLatLng(We.latlng);const Xe=b.slice(1+et.length),De=(X-1+et.length)%et.length,ke=X;if(Xe[De]){const lt=et[De],ht=et[X],it=wt.latLng((lt.lat+ht.lat)/2,(lt.lng+ht.lng)/2);Xe[De].setLatLng(it)}if(Xe[ke]){const lt=et[X],ht=et[(X+1)%et.length],it=wt.latLng((lt.lat+ht.lat)/2,(lt.lng+ht.lng)/2);Xe[ke].setLatLng(it)}},ie=()=>{if(me=!1,!!e.value){if(e.value.off("mousemove",Ee),document.removeEventListener("mouseup",ie),e.value.dragging.enable(),M.properties){const We=M.getLatLngs()[0].map(Xe=>[Xe.lng,Xe.lat]);We.push(We[0]);const et=vu([We]);M.properties.area=Qu(et),M.properties.perimeter=M.getLatLngs()[0].reduce((Xe,De,ke,lt)=>{const ht=lt[(ke+1)%lt.length];return Xe+De.distanceTo(ht)},0)}E(),q(M),a.value=null,as(()=>{a.value=M})}};e.value.on("mousemove",Ee),document.addEventListener("mouseup",ie)}else e.value.dragging.enable(),E(),q(M)})})})()},H=M=>{if(!e.value||!t.value)return;E();const Y=M.getCenter(),Z=M.getRadius(),re=M.getStartAngle(),W=M.getStopAngle(),Q=M.getOpeningAngle(),z=M.calculatePointOnArc(re),Ie=M.calculatePointOnArc(W),I=x(z,"#DC2626"),G=x(Ie,"#DC2626");b.push(I,G),w(I,M,()=>`Angle d'ouverture: ${Rf(Q)}`),w(G,M,()=>`Angle d'ouverture: ${Rf(Q)}`);const $=x(Y,"#059669");if(b.push($),w($,M,()=>{const D=M.properties.area||0;return[Pn(Z,"m","Rayon"),Pn(D,"m","Surface"),`Angle: ${Rf(Q)}`].join("<br>")}),Q>5){const D=M.calculateMidpointPosition(),J=x(D,"#2563EB");b.push(J),w(J,M,()=>Pn(M.getRadius(),"m","Rayon")),J.on("mousedown",le=>{if(!e.value)return;wt.DomEvent.stopPropagation(le),e.value.dragging.disable();let ge=!0;const me=$e=>{if(!ge)return;const X=Y.distanceTo($e.latlng);M.setRadius(X);const se=M.calculatePointOnArc(re),Te=M.calculatePointOnArc(W),Ee=M.calculateMidpointPosition();if(I.setLatLng(se),G.setLatLng(Te),J.setLatLng(Ee),a.value=M,J){const ie=J.measureDiv;ie&&(ie.innerHTML=Pn(X,"m","Rayon"))}},je=()=>{ge=!1,e.value&&(e.value.off("mousemove",me),document.removeEventListener("mouseup",je),e.value.dragging.enable())};e.value.on("mousemove",me),document.addEventListener("mouseup",je)})}[I,G].forEach((D,J)=>{D.on("mousedown",le=>{if(!e.value)return;wt.DomEvent.stopPropagation(le),e.value.dragging.disable();let ge=!0;const me=b.find(X=>{var se;return((se=X.options)==null?void 0:se.color)==="#2563EB"}),je=X=>{if(!ge||!e.value)return;const se=Math.atan2(X.latlng.lat-Y.lat,X.latlng.lng-Y.lng)*180/Math.PI;J===0?M.setAngles(se,M.getStopAngle()):M.setAngles(M.getStartAngle(),se);const Te=M.getStartAngle(),Ee=M.getStopAngle(),ie=M.getOpeningAngle(),We=M.calculatePointOnArc(Te),et=M.calculatePointOnArc(Ee);if(I.setLatLng(We),G.setLatLng(et),me&&ie>5){const Xe=M.calculateMidpointPosition();me.setLatLng(Xe),me.setStyle({opacity:1,fillOpacity:1})}else me&&me.setStyle({opacity:0,fillOpacity:0});a.value=M},$e=()=>{ge=!1,e.value&&(e.value.off("mousemove",je),document.removeEventListener("mouseup",$e),e.value.dragging.enable(),H(M))};e.value.on("mousemove",je),document.addEventListener("mouseup",$e)})}),$.on("mousedown",D=>{if(!e.value)return;wt.DomEvent.stopPropagation(D),e.value.dragging.disable();let J=!0;const le=me=>{if(!J)return;M.setCenter(me.latlng),$.setLatLng(me.latlng);const je=M.getStartAngle(),$e=M.getStopAngle(),X=M.getOpeningAngle(),se=M.calculatePointOnArc(je),Te=M.calculatePointOnArc($e);I.setLatLng(se),G.setLatLng(Te);const Ee=b.find(ie=>{var We;return((We=ie.options)==null?void 0:We.color)==="#2563EB"});if(Ee&&X>5){const ie=M.calculateMidpointPosition();Ee.setLatLng(ie),Ee.setStyle({opacity:1,fillOpacity:1})}else Ee&&Ee.setStyle({opacity:0,fillOpacity:0});a.value=M},ge=()=>{J=!1,e.value&&(e.value.off("mousemove",le),document.removeEventListener("mouseup",ge),e.value.dragging.enable())};e.value.on("mousemove",le),document.addEventListener("mouseup",ge)})},Se=M=>{var Y;if(!(!e.value||!r.value)){if(console.log("[generateTempControlPoints] Gnration des points temporaires pour",{layerType:M.constructor.name,properties:M.properties}),r.value.clearLayers(),M instanceof bl){if(M.getCenter()){const Z=wt.circleMarker(M.getCenter(),{radius:0,className:"text-hint-marker",pmIgnore:!0});r.value.addLayer(Z)}return}if(M instanceof Xu){const Z=M.getLatLng(),re=x(Z,"#059669");r.value.addLayer(re),M.getCardinalPoints().forEach(W=>{const Q=x(W,"#2563EB");r.value.addLayer(Q)})}else if(M instanceof wt.Circle){const Z=M.getLatLng(),re=M.getRadius(),W=x(Z,"#059669");r.value.addLayer(W),[0,45,90,135,180,225,270,315].forEach(Q=>{const z=Q*Math.PI/180,Ie=wt.latLng(Z.lat+re/111319.9*Math.sin(z),Z.lng+re/(111319.9*Math.cos(Z.lat*Math.PI/180))*Math.cos(z)),I=x(Ie,"#2563EB");r.value.addLayer(I)})}else if(M instanceof za){const Z=M,re=Z.getBounds(),W=re.getCenter(),Q=[re.getNorthWest(),re.getNorthEast(),re.getSouthEast(),re.getSouthWest()],z=x(W,"#059669");r.value.addLayer(z),Q.forEach(Ie=>{const I=x(Ie,"#DC2626");r.value.addLayer(I)}),Z.getMidPoints().forEach(Ie=>{const I=x(Ie,"#2563EB");r.value.addLayer(I)})}else if(M instanceof Vl||((Y=M.properties)==null?void 0:Y.type)==="Semicircle"){const Z=M,re=x(Z.getCenter(),"#059669");r.value.addLayer(re);const W=Z.calculatePointOnArc(Z.getStartAngle()),Q=Z.calculatePointOnArc(Z.getStopAngle()),z=x(W,"#DC2626"),Ie=x(Q,"#DC2626");if(r.value.addLayer(z),r.value.addLayer(Ie),Z.getOpeningAngle()>5){const I=Z.calculateMidpointPosition(),G=x(I,"#2563EB");r.value.addLayer(G)}}else if(M instanceof wt.Polyline){const Z=M.getLatLngs();if(M instanceof Ui){const re=M.getCenter(),W=x(re,"#059669");r.value.addLayer(W)}if(Z.forEach(re=>{const W=x(re,"#DC2626");r.value.addLayer(W)}),M instanceof Ui)M.getMidPoints().forEach(re=>{const W=x(re,"#2563EB");r.value.addLayer(W)});else for(let re=0;re<Z.length-1;re++){const W=Ce(Z[re],Z[re+1]),Q=x(W,"#2563EB");r.value.addLayer(Q)}}else if(M instanceof wt.Polygon){const Z=M.getLatLngs()[0];let re;try{if(typeof M.getCenter=="function")re=M.getCenter();else{const W=Z.map(Ie=>[Ie.lng,Ie.lat]);W.push(W[0]);const Q=vu([W]),z=Of(Q);re=wt.latLng(z.geometry.coordinates[1],z.geometry.coordinates[0])}if(re&&typeof re.lat=="number"&&typeof re.lng=="number"&&!isNaN(re.lat)&&!isNaN(re.lng)){const W=x(re,"#059669");r.value.addLayer(W)}}catch(W){console.warn("Erreur lors du calcul du centre temporaire du polygone",W)}Z.forEach(W=>{const Q=x(W,"#DC2626");r.value.addLayer(Q)});for(let W=0;W<Z.length;W++){const Q=Z[(W+1)%Z.length],z=Ce(Z[W],Q),Ie=x(z,"#2563EB");r.value.addLayer(Ie)}}console.log("[generateTempControlPoints] Points temporaires gnrs",{count:r.value.getLayers().length})}};return Uh(()=>{e.value&&(e.value.remove(),e.value=null)}),{map:e,featureGroup:t,controlPointsGroup:n,tempControlPointsGroup:r,currentTool:o,selectedShape:a,isDrawing:u,initMap:U,setDrawingTool:ne,updateShapeStyle:ae,updateShapeProperties:be,updateTextFixedSize:N,adjustView:j,clearActiveControlPoints:E}}function aL(){const e=It(null),t=It(""),n=It("Ville"),r={Ville:Ri.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19}),Satellite:Ri.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:" Esri",maxZoom:19}),Cadastre:Ri.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{attribution:"Cadastre - Carte  IGN/Geoportail",maxZoom:19})};return{map:e,searchQuery:t,currentBaseMap:n,baseMaps:r,initMap:f=>{e.value=f,Ri.control.layers(r).addTo(f),r[n.value].addTo(f)},searchLocation:async()=>{if(!(!e.value||!t.value))try{const m=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(t.value)}`)).json();if(m&&m.length>0){const{lat:_,lon:w}=m[0];e.value.setView([_,w],13)}}catch(f){console.error("Erreur lors de la recherche de localisation:",f)}},changeBaseMap:f=>{!e.value||!r[f]||(Object.values(r).forEach(m=>{var _;(_=e.value)!=null&&_.hasLayer(m)&&e.value.removeLayer(m)}),r[f].addTo(e.value),n.value=f)}}}const ef=Zd("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[]}),getters:{getPlanById:e=>t=>e.plans.find(n=>n.id===t),hasUnsavedChanges:e=>e.unsavedChanges,getCurrentPlanHistory:e=>e.planHistory},actions:{async fetchPlans(){var t,n;const e=ds();this.loading=!0;try{let r="/plans/";e.isDealer?r+="?concessionnaire="+((t=e.user)==null?void 0:t.id):e.isClient&&(r+="?utilisateur="+((n=e.user)==null?void 0:n.id));const o=await Ln.get(r);this.plans=o.data}catch(r){throw this.error="Erreur lors du chargement des plans",r}finally{this.loading=!1}},async fetchPlansWithDetails(){var t,n;const e=ds();this.loading=!0;try{let r="/plans/";const o={include_details:!0};e.isDealer?o.concessionnaire=(t=e.user)==null?void 0:t.id:e.isClient&&(o.utilisateur=(n=e.user)==null?void 0:n.id);const a=await Ln.get(r,{params:o});return this.plans=a.data,a}catch(r){throw this.error="Erreur lors du chargement des plans",r}finally{this.loading=!1}},async createPlan(e){this.loading=!0;try{const t=await Ln.post("/plans/",e);return this.plans.push(t.data),t.data}catch(t){const n=t instanceof Error?t.message:String(t);throw console.error("Error creating plan:",n),this.error="Erreur lors de la cration du plan",t}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(e){var t,n;if(this.unsavedChanges){this.loading=!0;try{const r=await Ln.patch(`/plans/${e}/`,{...this.currentPlan,version:((t=this.currentPlan)==null?void 0:t.version)||1}),o=this.plans.findIndex(a=>a.id===e);return o!==-1&&(this.plans[o]=r.data),((n=this.currentPlan)==null?void 0:n.id)===e&&(this.currentPlan=r.data),this.unsavedChanges=!1,r.data}catch(r){throw this.error="Erreur lors de la sauvegarde du plan",r}finally{this.loading=!1}}},async updatePlanDetails(e,t){var n;try{const r=await Ln.patch(`/plans/${e}/`,t),o=this.plans.findIndex(a=>a.id===e);return o!==-1&&(this.plans[o]={...this.plans[o],...r.data}),((n=this.currentPlan)==null?void 0:n.id)===e&&(this.currentPlan={...this.currentPlan,...r.data}),r.data}catch(r){throw console.error("Erreur lors de la mise  jour du plan:",r),r}},async fetchPlanHistory(e){this.loading=!0;try{const t=await Ln.get(`/plans/${e}/historique/`);return this.planHistory=t.data,t.data}catch(t){throw this.error="Erreur lors de la rcupration de l'historique",t}finally{this.loading=!1}},async restorePlanVersion(e,t){var n;this.loading=!0;try{const r=await Ln.post(`/plans/${e}/restaurer/`,{version_id:t});((n=this.currentPlan)==null?void 0:n.id)===e&&(this.currentPlan=r.data);const o=this.plans.findIndex(a=>a.id===e);return o!==-1&&(this.plans[o]=r.data),r.data}catch(r){throw this.error="Erreur lors de la restauration de la version",r}finally{this.loading=!1}},setCurrentPlan(e){this.currentPlan=e,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.stopAutoSave()},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(e){var t;this.loading=!0;try{await Ln.delete(`/plans/${e}/`),this.plans=this.plans.filter(n=>n.id!==e),((t=this.currentPlan)==null?void 0:t.id)===e&&this.clearCurrentPlan()}catch(n){throw this.error="Erreur lors de la suppression du plan",n}finally{this.loading=!1}}}}),T1=Zd("drawing",{state:()=>({currentPlanId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null}),getters:{hasUnsavedChanges:e=>e.unsavedChanges,getCurrentElements:e=>e.elements,getSelectedElement:e=>e.selectedElement,getCurrentTool:e=>e.currentTool,getCurrentStyle:e=>e.currentStyle,getLastUsedType:e=>e.lastUsedType},actions:{setCurrentPlan(e){this.currentPlanId=e,e===null&&this.clearElements()},clearCurrentPlan(){this.currentPlanId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1},addElement(e){!e.type_forme&&this.lastUsedType&&(e.type_forme=this.lastUsedType),this.elements.push(e),this.unsavedChanges=!0},updateElement(e){const t=this.elements.findIndex(n=>n.id===e.id);if(t!==-1){const n=this.elements[t].type_forme;this.elements[t]={...e,type_forme:n},this.unsavedChanges=!0}},removeElement(e){const t=this.elements.findIndex(n=>n.id===e);t!==-1&&(this.elements.splice(t,1),this.unsavedChanges=!0)},selectElement(e){this.selectedElement=e},setCurrentTool(e){this.currentTool=e,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(e)&&(this.lastUsedType=e)},setCurrentStyle(e){this.currentStyle={...this.currentStyle,...e}},async loadPlanElements(e){var t;this.loading=!0;try{const r=(await Ln.get(`/plans/${e}/`)).data;return this.elements=r.formes.map(o=>({id:o.id,type_forme:o.type_forme,data:o.data||{}})),console.log(`Plan ${e} - Charg ${this.elements.length} lments`),this.currentPlanId=e,this.unsavedChanges=!1,r.preferences&&(r.preferences.currentTool&&this.setCurrentTool(r.preferences.currentTool),r.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...r.preferences.currentStyle}),r.preferences.lastUsedType&&(this.lastUsedType=r.preferences.lastUsedType)),(t=this.selectedElement)!=null&&t.type_forme&&this.setCurrentTool(this.selectedElement.type_forme),this.elements}catch(n){throw console.error("Erreur lors du chargement des lments:",n),this.error="Erreur lors du chargement des lments du plan",n}finally{this.loading=!1}},async saveToPlan(e,t){ef(),this.loading=!0;try{const n=e||this.currentPlanId;if(!n)throw new Error("Aucun plan slectionn pour la sauvegarde");const r=this.elements.map(u=>({...u,type_forme:u.type_forme||this.lastUsedType})),o=(t==null?void 0:t.elementsToDelete)||[];console.log("Store - Sauvegarde du plan:",{planId:n,elementsCount:r.length,elementsToDeleteCount:o.length});const a=await Ln.post(`/plans/${n}/save_with_elements/`,{formes:r,connexions:[],annotations:[],elementsToDelete:o,preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}});return this.elements=a.data.formes.map(u=>({...u,type_forme:u.type_forme})),this.unsavedChanges=!1,a.data}catch(n){throw console.error("Erreur lors de la sauvegarde:",n),this.error="Erreur lors de la sauvegarde du plan",n}finally{this.loading=!1}}}}),lL={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},uL={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4"},cL={key:0,class:"mb-4"},hL={key:0,class:"animate-pulse"},fL=["value"],dL={key:1,class:"mb-4"},pL={key:0,class:"animate-pulse"},mL=["disabled"],gL={value:null},vL=["value"],_L={class:"mb-4"},yL={class:"mb-6"},bL={class:"flex justify-end space-x-3"},wL=["disabled"],xL={key:0},LL={key:1},N1=ps({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","dealerSelected","clientSelected"],setup(e,{expose:t,emit:n}){const r=e,o=n,a=ds(),u=ef();It(!1);const f=It(!1),m=It(null),_=It([]),w=It([]),b=It(null),E=It(null),x=It(!1),F=It(!1),N=It({nom:"",description:"",concessionnaire:null,client:null}),U=Nn(()=>{var Ce,de;return((Ce=a.user)==null?void 0:Ce.user_type)==="admin"?N.value.nom.trim()&&N.value.concessionnaire&&N.value.client:((de=a.user)==null?void 0:de.user_type)==="dealer"?N.value.nom.trim()&&N.value.client:N.value.nom.trim()});fs(()=>N.value.concessionnaire,async Ce=>{if(r.modelValue)if(Ce){const de=_.value.find(Be=>Be.id===Ce);de&&await ae(de)}else w.value=[],b.value=null,E.value=null,N.value.client=null}),fs(()=>r.modelValue,Ce=>{var de,Be;Ce?((de=a.user)==null?void 0:de.user_type)==="admin"?j():((Be=a.user)==null?void 0:Be.user_type)==="dealer"&&ne(a.user.id):(N.value={nom:"",description:"",concessionnaire:null,client:null},b.value=null,E.value=null,w.value=[],_.value=[],m.value=null)}),Nn(()=>{var Ce;return((Ce=a.user)==null?void 0:Ce.user_type)==="admin"?b.value?w.value:[]:w.value});async function j(){x.value=!0;try{const Ce=await Ln.get("/users/",{params:{role:"CONCESSIONNAIRE"}});_.value=Ce.data}catch(Ce){console.error("[NewPlanModal] Error loading dealers:",Ce)}finally{x.value=!1}}async function ne(Ce){F.value=!0;try{const de=await Ln.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:Ce}});w.value=Array.isArray(de.data)?de.data:[de.data]}catch(de){console.error("[NewPlanModal] Error loading clients:",de),w.value=[]}finally{F.value=!1}}async function ae(Ce){if(r.modelValue){b.value=Ce,N.value.concessionnaire=Ce.id,F.value=!0;try{const de=await Ln.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:Ce.id}});w.value=Array.isArray(de.data)?de.data:[de.data]}catch(de){console.error("[NewPlanModal] Error loading clients:",de),w.value=[]}finally{F.value=!1}}}function be(Ce){r.modelValue&&(E.value=Ce,N.value.client=Ce.id,o("clientSelected",Ce))}function ye(){o("update:modelValue",!1),N.value={nom:"",description:"",concessionnaire:null,client:null},b.value=null,E.value=null,w.value=[],m.value=null}async function Pe(){var Ce,de,Be,Ue,q;m.value=null,f.value=!0;try{const H={nom:N.value.nom.trim(),description:N.value.description.trim()};((Ce=a.user)==null?void 0:Ce.user_type)==="admin"?(H.concessionnaire=N.value.concessionnaire,H.client=N.value.client):((de=a.user)==null?void 0:de.user_type)==="dealer"?(H.concessionnaire=a.user.id,H.client=N.value.client):((Be=a.user)==null?void 0:Be.user_type)==="client"&&(H.client=a.user.id);const Se=await u.createPlan(H);o("created",Se.id),ye()}catch(H){console.error("[NewPlanModal] Error creating plan:",H),m.value=((q=(Ue=H.response)==null?void 0:Ue.data)==null?void 0:q.detail)||H.message||"Une erreur est survenue lors de la cration du plan"}finally{f.value=!1}}return t({dealers:_,dealerClients:w,selectedDealer:b,selectedClient:E,loadDealers:j,loadDealerClients:ne,selectDealer:ae,selectClient:be}),(Ce,de)=>{var Be,Ue;return Ce.modelValue?(nt(),at("div",lL,[A("div",uL,[A("div",{class:"flex justify-between items-center mb-4"},[de[5]||(de[5]=A("h2",{class:"text-xl font-semibold text-gray-900"},"Crer un nouveau plan",-1)),A("button",{onClick:ye,class:"text-gray-400 hover:text-gray-500"},de[4]||(de[4]=[A("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),Dn(a).isAdmin?(nt(),at("div",cL,[de[8]||(de[8]=A("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Concessionnaire",-1)),x.value?(nt(),at("div",hL,de[6]||(de[6]=[A("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):kn((nt(),at("select",{key:1,"onUpdate:modelValue":de[0]||(de[0]=q=>N.value.concessionnaire=q),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[de[7]||(de[7]=A("option",{value:null},"Slectionnez un concessionnaire",-1)),(nt(!0),at(gn,null,Un(_.value,q=>(nt(),at("option",{key:q.id,value:q.id},kt(q.first_name)+" "+kt(q.last_name)+" ("+kt(q.company_name)+") ",9,fL))),128))],512)),[[cs,N.value.concessionnaire]])])):tn("",!0),((Be=Dn(a).user)==null?void 0:Be.user_type)==="admin"||((Ue=Dn(a).user)==null?void 0:Ue.user_type)==="dealer"?(nt(),at("div",dL,[de[10]||(de[10]=A("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Client",-1)),F.value?(nt(),at("div",pL,de[9]||(de[9]=[A("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):kn((nt(),at("select",{key:1,"onUpdate:modelValue":de[1]||(de[1]=q=>N.value.client=q),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!w.value.length},[A("option",gL,kt(w.value.length?"Slectionnez un client":"Aucun client disponible"),1),(nt(!0),at(gn,null,Un(w.value,q=>(nt(),at("option",{key:q.id,value:q.id},kt(q.first_name)+" "+kt(q.last_name)+" ("+kt(q.company_name)+") ",9,vL))),128))],8,mL)),[[cs,N.value.client]])])):tn("",!0),A("div",_L,[de[11]||(de[11]=A("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),kn(A("input",{"onUpdate:modelValue":de[2]||(de[2]=q=>N.value.nom=q),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[ri,N.value.nom]])]),A("div",yL,[de[12]||(de[12]=A("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),kn(A("textarea",{"onUpdate:modelValue":de[3]||(de[3]=q=>N.value.description=q),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[ri,N.value.description]])]),A("div",bL,[A("button",{onClick:ye,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),A("button",{onClick:Pe,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!U.value||f.value},[f.value?(nt(),at("span",xL,"Cration en cours...")):(nt(),at("span",LL,"Crer le plan"))],8,wL)])])])):tn("",!0)}}});function oi(e){"@babel/helpers - typeof";return oi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oi(e)}var Jr=Uint8Array,Ks=Uint16Array,tp=Int32Array,tf=new Jr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),nf=new Jr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),yd=new Jr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),D1=function(e,t){for(var n=new Ks(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var o=new tp(n[30]),r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)o[a]=a-n[r]<<5|r;return{b:n,r:o}},O1=D1(tf,2),R1=O1.b,bd=O1.r;R1[28]=258,bd[258]=28;var I1=D1(nf,0),CL=I1.b,X0=I1.r,wd=new Ks(32768);for(var wi=0;wi<32768;++wi){var dl=(wi&43690)>>1|(wi&21845)<<1;dl=(dl&52428)>>2|(dl&13107)<<2,dl=(dl&61680)>>4|(dl&3855)<<4,wd[wi]=((dl&65280)>>8|(dl&255)<<8)>>1}var _a=function(e,t,n){for(var r=e.length,o=0,a=new Ks(t);o<r;++o)e[o]&&++a[e[o]-1];var u=new Ks(t);for(o=1;o<t;++o)u[o]=u[o-1]+a[o-1]<<1;var f;if(n){f=new Ks(1<<t);var m=15-t;for(o=0;o<r;++o)if(e[o])for(var _=o<<4|e[o],w=t-e[o],b=u[e[o]-1]++<<w,E=b|(1<<w)-1;b<=E;++b)f[wd[b]>>m]=_}else for(f=new Ks(r),o=0;o<r;++o)e[o]&&(f[o]=wd[u[e[o]-1]++]>>15-e[o]);return f},Pl=new Jr(288);for(var wi=0;wi<144;++wi)Pl[wi]=8;for(var wi=144;wi<256;++wi)Pl[wi]=9;for(var wi=256;wi<280;++wi)Pl[wi]=7;for(var wi=280;wi<288;++wi)Pl[wi]=8;var Pc=new Jr(32);for(var wi=0;wi<32;++wi)Pc[wi]=5;var kL=_a(Pl,9,0),PL=_a(Pl,9,1),SL=_a(Pc,5,0),EL=_a(Pc,5,1),Ff=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},Fo=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},jf=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},np=function(e){return(e+7)/8|0},F1=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new Jr(e.subarray(t,n))},AL=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],zo=function(e,t,n){var r=new Error(t||AL[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,zo),!n)throw r;return r},ML=function(e,t,n,r){var o=e.length,a=0;if(!o||t.f&&!t.l)return n||new Jr(0);var u=!n,f=u||t.i!=2,m=t.i;u&&(n=new Jr(o*3));var _=function($e){var X=n.length;if($e>X){var se=new Jr(Math.max(X*2,$e));se.set(n),n=se}},w=t.f||0,b=t.p||0,E=t.b||0,x=t.l,F=t.d,N=t.m,U=t.n,j=o*8;do{if(!x){w=Fo(e,b,1);var ne=Fo(e,b+1,3);if(b+=3,ne)if(ne==1)x=PL,F=EL,N=9,U=5;else if(ne==2){var Pe=Fo(e,b,31)+257,Ce=Fo(e,b+10,15)+4,de=Pe+Fo(e,b+5,31)+1;b+=14;for(var Be=new Jr(de),Ue=new Jr(19),q=0;q<Ce;++q)Ue[yd[q]]=Fo(e,b+q*3,7);b+=Ce*3;for(var H=Ff(Ue),Se=(1<<H)-1,M=_a(Ue,H,1),q=0;q<de;){var Y=M[Fo(e,b,Se)];b+=Y&15;var ae=Y>>4;if(ae<16)Be[q++]=ae;else{var Z=0,re=0;for(ae==16?(re=3+Fo(e,b,3),b+=2,Z=Be[q-1]):ae==17?(re=3+Fo(e,b,7),b+=3):ae==18&&(re=11+Fo(e,b,127),b+=7);re--;)Be[q++]=Z}}var W=Be.subarray(0,Pe),Q=Be.subarray(Pe);N=Ff(W),U=Ff(Q),x=_a(W,N,1),F=_a(Q,U,1)}else zo(1);else{var ae=np(b)+4,be=e[ae-4]|e[ae-3]<<8,ye=ae+be;if(ye>o){m&&zo(0);break}f&&_(E+be),n.set(e.subarray(ae,ye),E),t.b=E+=be,t.p=b=ye*8,t.f=w;continue}if(b>j){m&&zo(0);break}}f&&_(E+131072);for(var z=(1<<N)-1,Ie=(1<<U)-1,I=b;;I=b){var Z=x[jf(e,b)&z],G=Z>>4;if(b+=Z&15,b>j){m&&zo(0);break}if(Z||zo(2),G<256)n[E++]=G;else if(G==256){I=b,x=null;break}else{var $=G-254;if(G>264){var q=G-257,D=tf[q];$=Fo(e,b,(1<<D)-1)+R1[q],b+=D}var J=F[jf(e,b)&Ie],le=J>>4;J||zo(3),b+=J&15;var Q=CL[le];if(le>3){var D=nf[le];Q+=jf(e,b)&(1<<D)-1,b+=D}if(b>j){m&&zo(0);break}f&&_(E+131072);var ge=E+$;if(E<Q){var me=a-Q,je=Math.min(Q,ge);for(me+E<0&&zo(3);E<je;++E)n[E]=r[me+E]}for(;E<ge;++E)n[E]=n[E-Q]}}t.l=x,t.p=I,t.b=E,t.f=w,x&&(w=1,t.m=N,t.d=F,t.n=U)}while(!w);return E!=n.length&&u?F1(n,0,E):n.subarray(0,E)},Ua=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},ec=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},zf=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var o=n.length,a=n.slice();if(!o)return{t:z1,l:0};if(o==1){var u=new Jr(n[0].s+1);return u[n[0].s]=1,{t:u,l:1}}n.sort(function(ye,Pe){return ye.f-Pe.f}),n.push({s:-1,f:25001});var f=n[0],m=n[1],_=0,w=1,b=2;for(n[0]={s:-1,f:f.f+m.f,l:f,r:m};w!=o-1;)f=n[n[_].f<n[b].f?_++:b++],m=n[_!=w&&n[_].f<n[b].f?_++:b++],n[w++]={s:-1,f:f.f+m.f,l:f,r:m};for(var E=a[0].s,r=1;r<o;++r)a[r].s>E&&(E=a[r].s);var x=new Ks(E+1),F=xd(n[w-1],x,0);if(F>t){var r=0,N=0,U=F-t,j=1<<U;for(a.sort(function(Pe,Ce){return x[Ce.s]-x[Pe.s]||Pe.f-Ce.f});r<o;++r){var ne=a[r].s;if(x[ne]>t)N+=j-(1<<F-x[ne]),x[ne]=t;else break}for(N>>=U;N>0;){var ae=a[r].s;x[ae]<t?N-=1<<t-x[ae]++-1:++r}for(;r>=0&&N;--r){var be=a[r].s;x[be]==t&&(--x[be],++N)}F=t}return{t:new Jr(x),l:F}},xd=function(e,t,n){return e.s==-1?Math.max(xd(e.l,t,n+1),xd(e.r,t,n+1)):t[e.s]=n},Q0=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Ks(++t),r=0,o=e[0],a=1,u=function(m){n[r++]=m},f=1;f<=t;++f)if(e[f]==o&&f!=t)++a;else{if(!o&&a>2){for(;a>138;a-=138)u(32754);a>2&&(u(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(u(o),--a;a>6;a-=6)u(8304);a>2&&(u(a-3<<5|8208),a=0)}for(;a--;)u(o);a=1,o=e[f]}return{c:n.subarray(0,r),n:t}},tc=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},j1=function(e,t,n){var r=n.length,o=np(t+2);e[o]=r&255,e[o+1]=r>>8,e[o+2]=e[o]^255,e[o+3]=e[o+1]^255;for(var a=0;a<r;++a)e[o+a+4]=n[a];return(o+4+r)*8},em=function(e,t,n,r,o,a,u,f,m,_,w){Ua(t,w++,n),++o[256];for(var b=zf(o,15),E=b.t,x=b.l,F=zf(a,15),N=F.t,U=F.l,j=Q0(E),ne=j.c,ae=j.n,be=Q0(N),ye=be.c,Pe=be.n,Ce=new Ks(19),de=0;de<ne.length;++de)++Ce[ne[de]&31];for(var de=0;de<ye.length;++de)++Ce[ye[de]&31];for(var Be=zf(Ce,7),Ue=Be.t,q=Be.l,H=19;H>4&&!Ue[yd[H-1]];--H);var Se=_+5<<3,M=tc(o,Pl)+tc(a,Pc)+u,Y=tc(o,E)+tc(a,N)+u+14+3*H+tc(Ce,Ue)+2*Ce[16]+3*Ce[17]+7*Ce[18];if(m>=0&&Se<=M&&Se<=Y)return j1(t,w,e.subarray(m,m+_));var Z,re,W,Q;if(Ua(t,w,1+(Y<M)),w+=2,Y<M){Z=_a(E,x,0),re=E,W=_a(N,U,0),Q=N;var z=_a(Ue,q,0);Ua(t,w,ae-257),Ua(t,w+5,Pe-1),Ua(t,w+10,H-4),w+=14;for(var de=0;de<H;++de)Ua(t,w+3*de,Ue[yd[de]]);w+=3*H;for(var Ie=[ne,ye],I=0;I<2;++I)for(var G=Ie[I],de=0;de<G.length;++de){var $=G[de]&31;Ua(t,w,z[$]),w+=Ue[$],$>15&&(Ua(t,w,G[de]>>5&127),w+=G[de]>>12)}}else Z=kL,re=Pl,W=SL,Q=Pc;for(var de=0;de<f;++de){var D=r[de];if(D>255){var $=D>>18&31;ec(t,w,Z[$+257]),w+=re[$+257],$>7&&(Ua(t,w,D>>23&31),w+=tf[$]);var J=D&31;ec(t,w,W[J]),w+=Q[J],J>3&&(ec(t,w,D>>5&8191),w+=nf[J])}else ec(t,w,Z[D]),w+=re[D]}return ec(t,w,Z[256]),w+re[256]},BL=new tp([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),z1=new Jr(0),TL=function(e,t,n,r,o,a){var u=a.z||e.length,f=new Jr(r+u+5*(1+Math.ceil(u/7e3))+o),m=f.subarray(r,f.length-o),_=a.l,w=(a.r||0)&7;if(t){w&&(m[0]=a.r>>3);for(var b=BL[t-1],E=b>>13,x=b&8191,F=(1<<n)-1,N=a.p||new Ks(32768),U=a.h||new Ks(F+1),j=Math.ceil(n/3),ne=2*j,ae=function(Te){return(e[Te]^e[Te+1]<<j^e[Te+2]<<ne)&F},be=new tp(25e3),ye=new Ks(288),Pe=new Ks(32),Ce=0,de=0,Be=a.i||0,Ue=0,q=a.w||0,H=0;Be+2<u;++Be){var Se=ae(Be),M=Be&32767,Y=U[Se];if(N[M]=Y,U[Se]=M,q<=Be){var Z=u-Be;if((Ce>7e3||Ue>24576)&&(Z>423||!_)){w=em(e,m,0,be,ye,Pe,de,Ue,H,Be-H,w),Ue=Ce=de=0,H=Be;for(var re=0;re<286;++re)ye[re]=0;for(var re=0;re<30;++re)Pe[re]=0}var W=2,Q=0,z=x,Ie=M-Y&32767;if(Z>2&&Se==ae(Be-Ie))for(var I=Math.min(E,Z)-1,G=Math.min(32767,Be),$=Math.min(258,Z);Ie<=G&&--z&&M!=Y;){if(e[Be+W]==e[Be+W-Ie]){for(var D=0;D<$&&e[Be+D]==e[Be+D-Ie];++D);if(D>W){if(W=D,Q=Ie,D>I)break;for(var J=Math.min(Ie,D-2),le=0,re=0;re<J;++re){var ge=Be-Ie+re&32767,me=N[ge],je=ge-me&32767;je>le&&(le=je,Y=ge)}}}M=Y,Y=N[M],Ie+=M-Y&32767}if(Q){be[Ue++]=268435456|bd[W]<<18|X0[Q];var $e=bd[W]&31,X=X0[Q]&31;de+=tf[$e]+nf[X],++ye[257+$e],++Pe[X],q=Be+W,++Ce}else be[Ue++]=e[Be],++ye[e[Be]]}}for(Be=Math.max(Be,q);Be<u;++Be)be[Ue++]=e[Be],++ye[e[Be]];w=em(e,m,_,be,ye,Pe,de,Ue,H,Be-H,w),_||(a.r=w&7|m[w/8|0]<<3,w-=7,a.h=U,a.p=N,a.i=Be,a.w=q)}else{for(var Be=a.w||0;Be<u+_;Be+=65535){var se=Be+65535;se>=u&&(m[w/8|0]=_,se=u),w=j1(m,w+1,e.subarray(Be,se))}a.i=u}return F1(f,0,r+np(w)+o)},U1=function(){var e=1,t=0;return{p:function(n){for(var r=e,o=t,a=n.length|0,u=0;u!=a;){for(var f=Math.min(u+2655,a);u<f;++u)o+=r+=n[u];r=(r&65535)+15*(r>>16),o=(o&65535)+15*(o>>16)}e=r,t=o},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},NL=function(e,t,n,r,o){if(!o&&(o={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),u=new Jr(a.length+e.length);u.set(a),u.set(e,a.length),e=u,o.w=a.length}return TL(e,t.level==null?6:t.level,t.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,r,o)},q1=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},DL=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var o=U1();o.p(t.dictionary),q1(e,2,o.d())}},OL=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&zo(6,"invalid zlib data"),(e[1]>>5&1)==1&&zo(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function Ld(e,t){t||(t={});var n=U1();n.p(e);var r=NL(e,t,t.dictionary?6:2,4);return DL(r,t),q1(r,r.length-4,n.d()),r}function RL(e,t){return ML(e.subarray(OL(e),-4),{i:2},t,t)}var IL=typeof TextDecoder<"u"&&new TextDecoder,FL=0;try{IL.decode(z1,{stream:!0}),FL=1}catch{}var bn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Uf(){bn.console&&typeof bn.console.log=="function"&&bn.console.log.apply(bn.console,arguments)}var ui={log:Uf,warn:function(e){bn.console&&(typeof bn.console.warn=="function"?bn.console.warn.apply(bn.console,arguments):Uf.call(null,arguments))},error:function(e){bn.console&&(typeof bn.console.error=="function"?bn.console.error.apply(bn.console,arguments):Uf(e))}};function qf(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){Hl(r.response,t,n)},r.onerror=function(){ui.error("could not download file")},r.send()}function tm(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Jc(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var dc,Cd,Hl=bn.saveAs||((typeof window>"u"?"undefined":oi(window))!=="object"||window!==bn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=bn.URL||bn.webkitURL,o=document.createElement("a");t=t||e.name||"download",o.download=t,o.rel="noopener",typeof e=="string"?(o.href=e,o.origin!==location.origin?tm(o.href)?qf(e,t,n):Jc(o,o.target="_blank"):Jc(o)):(o.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(o.href)},4e4),setTimeout(function(){Jc(o)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(tm(e))qf(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){Jc(r)})}else navigator.msSaveOrOpenBlob(function(o,a){return a===void 0?a={autoBom:!1}:oi(a)!=="object"&&(ui.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return qf(e,t,n);var o=e.type==="application/octet-stream",a=/constructor/i.test(bn.HTMLElement)||bn.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||o&&a)&&(typeof FileReader>"u"?"undefined":oi(FileReader))==="object"){var f=new FileReader;f.onloadend=function(){var w=f.result;w=u?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=w:location=w,r=null},f.readAsDataURL(e)}else{var m=bn.URL||bn.webkitURL,_=m.createObjectURL(e);r?r.location=_:location.href=_,r=null,setTimeout(function(){m.revokeObjectURL(_)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function $1(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(f){return[parseInt(f[1]),parseInt(f[2]),parseInt(f[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(f){return[parseInt(f[1],16),parseInt(f[2],16),parseInt(f[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(f){return[parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16),parseInt(f[3]+f[3],16)]}}],r=0;r<n.length;r++){var o=n[r].re,a=n[r].process,u=o.exec(e);u&&(t=a(u),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var f=this.r.toString(16),m=this.g.toString(16),_=this.b.toString(16);return f.length==1&&(f="0"+f),m.length==1&&(m="0"+m),_.length==1&&(_="0"+_),"#"+f+m+_}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function $f(e,t){var n=e[0],r=e[1],o=e[2],a=e[3];n=$r(n,r,o,a,t[0],7,-680876936),a=$r(a,n,r,o,t[1],12,-389564586),o=$r(o,a,n,r,t[2],17,606105819),r=$r(r,o,a,n,t[3],22,-1044525330),n=$r(n,r,o,a,t[4],7,-176418897),a=$r(a,n,r,o,t[5],12,1200080426),o=$r(o,a,n,r,t[6],17,-1473231341),r=$r(r,o,a,n,t[7],22,-45705983),n=$r(n,r,o,a,t[8],7,1770035416),a=$r(a,n,r,o,t[9],12,-1958414417),o=$r(o,a,n,r,t[10],17,-42063),r=$r(r,o,a,n,t[11],22,-1990404162),n=$r(n,r,o,a,t[12],7,1804603682),a=$r(a,n,r,o,t[13],12,-40341101),o=$r(o,a,n,r,t[14],17,-1502002290),n=Vr(n,r=$r(r,o,a,n,t[15],22,1236535329),o,a,t[1],5,-165796510),a=Vr(a,n,r,o,t[6],9,-1069501632),o=Vr(o,a,n,r,t[11],14,643717713),r=Vr(r,o,a,n,t[0],20,-373897302),n=Vr(n,r,o,a,t[5],5,-701558691),a=Vr(a,n,r,o,t[10],9,38016083),o=Vr(o,a,n,r,t[15],14,-660478335),r=Vr(r,o,a,n,t[4],20,-405537848),n=Vr(n,r,o,a,t[9],5,568446438),a=Vr(a,n,r,o,t[14],9,-1019803690),o=Vr(o,a,n,r,t[3],14,-187363961),r=Vr(r,o,a,n,t[8],20,1163531501),n=Vr(n,r,o,a,t[13],5,-1444681467),a=Vr(a,n,r,o,t[2],9,-51403784),o=Vr(o,a,n,r,t[7],14,1735328473),n=Hr(n,r=Vr(r,o,a,n,t[12],20,-1926607734),o,a,t[5],4,-378558),a=Hr(a,n,r,o,t[8],11,-2022574463),o=Hr(o,a,n,r,t[11],16,1839030562),r=Hr(r,o,a,n,t[14],23,-35309556),n=Hr(n,r,o,a,t[1],4,-1530992060),a=Hr(a,n,r,o,t[4],11,1272893353),o=Hr(o,a,n,r,t[7],16,-155497632),r=Hr(r,o,a,n,t[10],23,-1094730640),n=Hr(n,r,o,a,t[13],4,681279174),a=Hr(a,n,r,o,t[0],11,-358537222),o=Hr(o,a,n,r,t[3],16,-722521979),r=Hr(r,o,a,n,t[6],23,76029189),n=Hr(n,r,o,a,t[9],4,-640364487),a=Hr(a,n,r,o,t[12],11,-421815835),o=Hr(o,a,n,r,t[15],16,530742520),n=Gr(n,r=Hr(r,o,a,n,t[2],23,-995338651),o,a,t[0],6,-198630844),a=Gr(a,n,r,o,t[7],10,1126891415),o=Gr(o,a,n,r,t[14],15,-1416354905),r=Gr(r,o,a,n,t[5],21,-57434055),n=Gr(n,r,o,a,t[12],6,1700485571),a=Gr(a,n,r,o,t[3],10,-1894986606),o=Gr(o,a,n,r,t[10],15,-1051523),r=Gr(r,o,a,n,t[1],21,-2054922799),n=Gr(n,r,o,a,t[8],6,1873313359),a=Gr(a,n,r,o,t[15],10,-30611744),o=Gr(o,a,n,r,t[6],15,-1560198380),r=Gr(r,o,a,n,t[13],21,1309151649),n=Gr(n,r,o,a,t[4],6,-145523070),a=Gr(a,n,r,o,t[11],10,-1120210379),o=Gr(o,a,n,r,t[2],15,718787259),r=Gr(r,o,a,n,t[9],21,-343485551),e[0]=wl(n,e[0]),e[1]=wl(r,e[1]),e[2]=wl(o,e[2]),e[3]=wl(a,e[3])}function rf(e,t,n,r,o,a){return t=wl(wl(t,e),wl(r,a)),wl(t<<o|t>>>32-o,n)}function $r(e,t,n,r,o,a,u){return rf(t&n|~t&r,e,t,o,a,u)}function Vr(e,t,n,r,o,a,u){return rf(t&r|n&~r,e,t,o,a,u)}function Hr(e,t,n,r,o,a,u){return rf(t^n^r,e,t,o,a,u)}function Gr(e,t,n,r,o,a,u){return rf(n^(t|~r),e,t,o,a,u)}function V1(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)$f(r,jL(e.substring(t-64,t)));e=e.substring(t-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)o[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for($f(r,o),t=0;t<16;t++)o[t]=0;return o[14]=8*n,$f(r,o),r}function jL(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}dc=bn.atob.bind(bn),Cd=bn.btoa.bind(bn);var nm="0123456789abcdef".split("");function zL(e){for(var t="",n=0;n<4;n++)t+=nm[e>>8*n+4&15]+nm[e>>8*n&15];return t}function UL(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function kd(e){return V1(e).map(UL).join("")}var qL=function(e){for(var t=0;t<e.length;t++)e[t]=zL(e[t]);return e.join("")}(V1("hello"))!="5d41402abc4b2a76b9719d911017c592";function wl(e,t){if(qL){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Pd(e,t){var n,r,o,a;if(e!==n){for(var u=(o=e,a=1+(256/e.length>>0),new Array(a+1).join(o)),f=[],m=0;m<256;m++)f[m]=m;var _=0;for(m=0;m<256;m++){var w=f[m];_=(_+w+u.charCodeAt(m))%256,f[m]=f[_],f[_]=w}n=e,r=f}else f=r;var b=t.length,E=0,x=0,F="";for(m=0;m<b;m++)x=(x+(w=f[E=(E+1)%256]))%256,f[E]=f[x],f[x]=w,u=f[(f[E]+f[x])%256],F+=String.fromCharCode(t.charCodeAt(m)^u);return F}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var im={print:4,modify:8,copy:16,"annot-forms":32};function Lu(e,t,n,r){this.v=1,this.r=2;var o=192;e.forEach(function(f){if(im.perm!==void 0)throw new Error("Invalid permission: "+f);o+=im[f]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(t+this.padding).substr(0,32),u=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,u),this.P=-(1+(255^o)),this.encryptionKey=kd(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Pd(this.encryptionKey,this.padding)}function Cu(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var o=e.charCodeAt(r);o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?t+="#"+("0"+o.toString(16)).slice(-2):t+=e[r]}return t}function rm(e){if(oi(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,r,o){if(o=o||!1,typeof n!="string"||typeof r!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var a=Math.random().toString(35);return t[n][a]=[r,!!o],a},this.unsubscribe=function(n){for(var r in t)if(t[r][n])return delete t[r][n],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),o=[];for(var a in t[n]){var u=t[n][a];try{u[0].apply(e,r)}catch(f){bn.console&&ui.error("jsPDF PubSub Error",f.message,f)}u[1]&&o.push(a)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Ah(e){if(!(this instanceof Ah))return new Ah(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function H1(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Wl(e,t,n,r,o){if(!(this instanceof Wl))return new Wl(e,t,n,r,o);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,H1.call(this,r,o)}function ku(e,t,n,r,o){if(!(this instanceof ku))return new ku(e,t,n,r,o);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,H1.call(this,r,o)}function _n(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],o=arguments[2],a=arguments[3],u=[],f=1,m=16,_="S",w=null;oi(e=e||{})==="object"&&(n=e.orientation,r=e.unit||r,o=e.format||o,a=e.compress||e.compressPdf||a,(w=e.encryption||null)!==null&&(w.userPassword=w.userPassword||"",w.ownerPassword=w.ownerPassword||"",w.userPermissions=w.userPermissions||[]),f=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(m=e.floatPrecision),_=e.defaultPathOperation||"S"),u=e.filters||(a===!0?["FlateEncode"]:u),r=r||"mm",n=(""+(n||"P")).toLowerCase();var b=e.putOnlyUsedFonts||!1,E={},x={internal:{},__private__:{}};x.__private__.PubSub=rm;var F="1.3",N=x.__private__.getPdfVersion=function(){return F};x.__private__.setPdfVersion=function(C){F=C};var U={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return U};var j=x.__private__.getPageFormat=function(C){return U[C]};o=o||"a4";var ne={COMPAT:"compat",ADVANCED:"advanced"},ae=ne.COMPAT;function be(){this.saveGraphicsState(),ie(new cn(Rt,0,0,-Rt,0,oo()*Rt).toString()+" cm"),this.setFontSize(this.getFontSize()/Rt),_="n",ae=ne.ADVANCED}function ye(){this.restoreGraphicsState(),_="S",ae=ne.COMPAT}var Pe=x.__private__.combineFontStyleAndFontWeight=function(C,ee){if(C=="bold"&&ee=="normal"||C=="bold"&&ee==400||C=="normal"&&ee=="italic"||C=="bold"&&ee=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ee&&(C=ee==400||ee==="normal"?C==="italic"?"italic":"normal":ee!=700&&ee!=="bold"||C!=="normal"?(ee==700?"bold":ee)+""+C:"bold"),C};x.advancedAPI=function(C){var ee=ae===ne.COMPAT;return ee&&be.call(this),typeof C!="function"||(C(this),ee&&ye.call(this)),this},x.compatAPI=function(C){var ee=ae===ne.ADVANCED;return ee&&ye.call(this),typeof C!="function"||(C(this),ee&&be.call(this)),this},x.isAdvancedAPI=function(){return ae===ne.ADVANCED};var Ce,de=function(C){if(ae!==ne.ADVANCED)throw new Error(C+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Be=x.roundToPrecision=x.__private__.roundToPrecision=function(C,ee){var Ne=t||ee;if(isNaN(C)||isNaN(Ne))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return C.toFixed(Ne).replace(/0+$/,"")};Ce=x.hpf=x.__private__.hpf=typeof m=="number"?function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return Be(C,m)}:m==="smart"?function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return Be(C,C>-1&&C<1?16:5)}:function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return Be(C,16)};var Ue=x.f2=x.__private__.f2=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.f2");return Be(C,2)},q=x.__private__.f3=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.f3");return Be(C,3)},H=x.scale=x.__private__.scale=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.scale");return ae===ne.COMPAT?C*Rt:ae===ne.ADVANCED?C:void 0},Se=function(C){return ae===ne.COMPAT?oo()-C:ae===ne.ADVANCED?C:void 0},M=function(C){return H(Se(C))};x.__private__.setPrecision=x.setPrecision=function(C){typeof parseInt(C,10)=="number"&&(t=parseInt(C,10))};var Y,Z="00000000000000000000000000000000",re=x.__private__.getFileId=function(){return Z},W=x.__private__.setFileId=function(C){return Z=C!==void 0&&/^[a-fA-F0-9]{32}$/.test(C)?C.toUpperCase():Z.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),w!==null&&(Si=new Lu(w.userPermissions,w.userPassword,w.ownerPassword,Z)),Z};x.setFileId=function(C){return W(C),this},x.getFileId=function(){return re()};var Q=x.__private__.convertDateToPDFDate=function(C){var ee=C.getTimezoneOffset(),Ne=ee<0?"+":"-",He=Math.floor(Math.abs(ee/60)),ot=Math.abs(ee%60),yt=[Ne,$(He),"'",$(ot),"'"].join("");return["D:",C.getFullYear(),$(C.getMonth()+1),$(C.getDate()),$(C.getHours()),$(C.getMinutes()),$(C.getSeconds()),yt].join("")},z=x.__private__.convertPDFDateToDate=function(C){var ee=parseInt(C.substr(2,4),10),Ne=parseInt(C.substr(6,2),10)-1,He=parseInt(C.substr(8,2),10),ot=parseInt(C.substr(10,2),10),yt=parseInt(C.substr(12,2),10),Ot=parseInt(C.substr(14,2),10);return new Date(ee,Ne,He,ot,yt,Ot,0)},Ie=x.__private__.setCreationDate=function(C){var ee;if(C===void 0&&(C=new Date),C instanceof Date)ee=Q(C);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(C))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ee=C}return Y=ee},I=x.__private__.getCreationDate=function(C){var ee=Y;return C==="jsDate"&&(ee=z(Y)),ee};x.setCreationDate=function(C){return Ie(C),this},x.getCreationDate=function(C){return I(C)};var G,$=x.__private__.padd2=function(C){return("0"+parseInt(C)).slice(-2)},D=x.__private__.padd2Hex=function(C){return("00"+(C=C.toString())).substr(C.length)},J=0,le=[],ge=[],me=0,je=[],$e=[],X=!1,se=ge,Te=function(){J=0,me=0,ge=[],le=[],je=[],Xr=Ht(),Br=Ht()};x.__private__.setCustomOutputDestination=function(C){X=!0,se=C};var Ee=function(C){X||(se=C)};x.__private__.resetCustomOutputDestination=function(){X=!1,se=ge};var ie=x.__private__.out=function(C){return C=C.toString(),me+=C.length+1,se.push(C),se},We=x.__private__.write=function(C){return ie(arguments.length===1?C.toString():Array.prototype.join.call(arguments," "))},et=x.__private__.getArrayBuffer=function(C){for(var ee=C.length,Ne=new ArrayBuffer(ee),He=new Uint8Array(Ne);ee--;)He[ee]=C.charCodeAt(ee);return Ne},Xe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return Xe};var De=e.fontSize||16;x.__private__.setFontSize=x.setFontSize=function(C){return De=ae===ne.ADVANCED?C/Rt:C,this};var ke,lt=x.__private__.getFontSize=x.getFontSize=function(){return ae===ne.COMPAT?De:De*Rt},ht=e.R2L||!1;x.__private__.setR2L=x.setR2L=function(C){return ht=C,this},x.__private__.getR2L=x.getR2L=function(){return ht};var it,Fe=x.__private__.setZoomMode=function(C){var ee=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(C))ke=C;else if(isNaN(C)){if(ee.indexOf(C)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+C+'" is not recognized.');ke=C}else ke=parseInt(C,10)};x.__private__.getZoomMode=function(){return ke};var Pt,Ft=x.__private__.setPageMode=function(C){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(C)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+C+'" is not recognized.');it=C};x.__private__.getPageMode=function(){return it};var Wt=x.__private__.setLayoutMode=function(C){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(C)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+C+'" is not recognized.');Pt=C};x.__private__.getLayoutMode=function(){return Pt},x.__private__.setDisplayMode=x.setDisplayMode=function(C,ee,Ne){return Fe(C),Wt(ee),Ft(Ne),this};var Ut={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function(C){if(Object.keys(Ut).indexOf(C)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ut[C]},x.__private__.getDocumentProperties=function(){return Ut},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function(C){for(var ee in Ut)Ut.hasOwnProperty(ee)&&C[ee]&&(Ut[ee]=C[ee]);return this},x.__private__.setDocumentProperty=function(C,ee){if(Object.keys(Ut).indexOf(C)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ut[C]=ee};var Xt,Rt,on,dn,ai,Ct={},nn={},Vt=[],ln={},li={},In={},fi={},xi=null,Kn=0,Tt=[],Dt=new rm(x),Di=e.hotfixes||[],qn={},ms={},Mr=[],cn=function C(ee,Ne,He,ot,yt,Ot){if(!(this instanceof C))return new C(ee,Ne,He,ot,yt,Ot);isNaN(ee)&&(ee=1),isNaN(Ne)&&(Ne=0),isNaN(He)&&(He=0),isNaN(ot)&&(ot=1),isNaN(yt)&&(yt=0),isNaN(Ot)&&(Ot=0),this._matrix=[ee,Ne,He,ot,yt,Ot]};Object.defineProperty(cn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(C){this._matrix[0]=C}}),Object.defineProperty(cn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(C){this._matrix[1]=C}}),Object.defineProperty(cn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(C){this._matrix[2]=C}}),Object.defineProperty(cn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(C){this._matrix[3]=C}}),Object.defineProperty(cn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(C){this._matrix[4]=C}}),Object.defineProperty(cn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(C){this._matrix[5]=C}}),Object.defineProperty(cn.prototype,"a",{get:function(){return this._matrix[0]},set:function(C){this._matrix[0]=C}}),Object.defineProperty(cn.prototype,"b",{get:function(){return this._matrix[1]},set:function(C){this._matrix[1]=C}}),Object.defineProperty(cn.prototype,"c",{get:function(){return this._matrix[2]},set:function(C){this._matrix[2]=C}}),Object.defineProperty(cn.prototype,"d",{get:function(){return this._matrix[3]},set:function(C){this._matrix[3]=C}}),Object.defineProperty(cn.prototype,"e",{get:function(){return this._matrix[4]},set:function(C){this._matrix[4]=C}}),Object.defineProperty(cn.prototype,"f",{get:function(){return this._matrix[5]},set:function(C){this._matrix[5]=C}}),Object.defineProperty(cn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(cn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(cn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(cn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),cn.prototype.join=function(C){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Ce).join(C)},cn.prototype.multiply=function(C){var ee=C.sx*this.sx+C.shy*this.shx,Ne=C.sx*this.shy+C.shy*this.sy,He=C.shx*this.sx+C.sy*this.shx,ot=C.shx*this.shy+C.sy*this.sy,yt=C.tx*this.sx+C.ty*this.shx+this.tx,Ot=C.tx*this.shy+C.ty*this.sy+this.ty;return new cn(ee,Ne,He,ot,yt,Ot)},cn.prototype.decompose=function(){var C=this.sx,ee=this.shy,Ne=this.shx,He=this.sy,ot=this.tx,yt=this.ty,Ot=Math.sqrt(C*C+ee*ee),Gt=(C/=Ot)*Ne+(ee/=Ot)*He;Ne-=C*Gt,He-=ee*Gt;var Jt=Math.sqrt(Ne*Ne+He*He);return Gt/=Jt,C*(He/=Jt)<ee*(Ne/=Jt)&&(C=-C,ee=-ee,Gt=-Gt,Ot=-Ot),{scale:new cn(Ot,0,0,Jt,0,0),translate:new cn(1,0,0,1,ot,yt),rotate:new cn(C,ee,-ee,C,0,0),skew:new cn(1,0,Gt,1,0,0)}},cn.prototype.toString=function(C){return this.join(" ")},cn.prototype.inversed=function(){var C=this.sx,ee=this.shy,Ne=this.shx,He=this.sy,ot=this.tx,yt=this.ty,Ot=1/(C*He-ee*Ne),Gt=He*Ot,Jt=-ee*Ot,sn=-Ne*Ot,vn=C*Ot;return new cn(Gt,Jt,sn,vn,-Gt*ot-sn*yt,-Jt*ot-vn*yt)},cn.prototype.applyToPoint=function(C){var ee=C.x*this.sx+C.y*this.shx+this.tx,Ne=C.x*this.shy+C.y*this.sy+this.ty;return new To(ee,Ne)},cn.prototype.applyToRectangle=function(C){var ee=this.applyToPoint(C),Ne=this.applyToPoint(new To(C.x+C.w,C.y+C.h));return new Rr(ee.x,ee.y,Ne.x-ee.x,Ne.y-ee.y)},cn.prototype.clone=function(){var C=this.sx,ee=this.shy,Ne=this.shx,He=this.sy,ot=this.tx,yt=this.ty;return new cn(C,ee,Ne,He,ot,yt)},x.Matrix=cn;var Yr=x.matrixMult=function(C,ee){return ee.multiply(C)},gs=new cn(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=gs;var cr=function(C,ee){if(!li[C]){var Ne=(ee instanceof Wl?"Sh":"P")+(Object.keys(ln).length+1).toString(10);ee.id=Ne,li[C]=Ne,ln[Ne]=ee,Dt.publish("addPattern",ee)}};x.ShadingPattern=Wl,x.TilingPattern=ku,x.addShadingPattern=function(C,ee){return de("addShadingPattern()"),cr(C,ee),this},x.beginTilingPattern=function(C){de("beginTilingPattern()"),Ma(C.boundingBox[0],C.boundingBox[1],C.boundingBox[2]-C.boundingBox[0],C.boundingBox[3]-C.boundingBox[1],C.matrix)},x.endTilingPattern=function(C,ee){de("endTilingPattern()"),ee.stream=$e[G].join(`
`),cr(C,ee),Dt.publish("endTilingPattern",ee),Mr.pop().restore()};var Vn=x.__private__.newObject=function(){var C=Ht();return hr(C,!0),C},Ht=x.__private__.newObjectDeferred=function(){return J++,le[J]=function(){return me},J},hr=function(C,ee){return ee=typeof ee=="boolean"&&ee,le[C]=me,ee&&ie(C+" 0 obj"),C},wo=x.__private__.newAdditionalObject=function(){var C={objId:Ht(),content:""};return je.push(C),C},Xr=Ht(),Br=Ht(),Lr=x.__private__.decodeColorString=function(C){var ee=C.split(" ");if(ee.length!==2||ee[1]!=="g"&&ee[1]!=="G")ee.length===5&&(ee[4]==="k"||ee[4]==="K")&&(ee=[(1-ee[0])*(1-ee[3]),(1-ee[1])*(1-ee[3]),(1-ee[2])*(1-ee[3]),"r"]);else{var Ne=parseFloat(ee[0]);ee=[Ne,Ne,Ne,"r"]}for(var He="#",ot=0;ot<3;ot++)He+=("0"+Math.floor(255*parseFloat(ee[ot])).toString(16)).slice(-2);return He},Tr=x.__private__.encodeColorString=function(C){var ee;typeof C=="string"&&(C={ch1:C});var Ne=C.ch1,He=C.ch2,ot=C.ch3,yt=C.ch4,Ot=C.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ne=="string"&&Ne.charAt(0)!=="#"){var Gt=new $1(Ne);if(Gt.ok)Ne=Gt.toHex();else if(!/^\d*\.?\d*$/.test(Ne))throw new Error('Invalid color "'+Ne+'" passed to jsPDF.encodeColorString.')}if(typeof Ne=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ne)&&(Ne="#"+Ne[1]+Ne[1]+Ne[2]+Ne[2]+Ne[3]+Ne[3]),typeof Ne=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ne)){var Jt=parseInt(Ne.substr(1),16);Ne=Jt>>16&255,He=Jt>>8&255,ot=255&Jt}if(He===void 0||yt===void 0&&Ne===He&&He===ot)if(typeof Ne=="string")ee=Ne+" "+Ot[0];else switch(C.precision){case 2:ee=Ue(Ne/255)+" "+Ot[0];break;case 3:default:ee=q(Ne/255)+" "+Ot[0]}else if(yt===void 0||oi(yt)==="object"){if(yt&&!isNaN(yt.a)&&yt.a===0)return ee=["1.","1.","1.",Ot[1]].join(" ");if(typeof Ne=="string")ee=[Ne,He,ot,Ot[1]].join(" ");else switch(C.precision){case 2:ee=[Ue(Ne/255),Ue(He/255),Ue(ot/255),Ot[1]].join(" ");break;default:case 3:ee=[q(Ne/255),q(He/255),q(ot/255),Ot[1]].join(" ")}}else if(typeof Ne=="string")ee=[Ne,He,ot,yt,Ot[2]].join(" ");else switch(C.precision){case 2:ee=[Ue(Ne),Ue(He),Ue(ot),Ue(yt),Ot[2]].join(" ");break;case 3:default:ee=[q(Ne),q(He),q(ot),q(yt),Ot[2]].join(" ")}return ee},tr=x.__private__.getFilters=function(){return u},Cr=x.__private__.putStream=function(C){var ee=(C=C||{}).data||"",Ne=C.filters||tr(),He=C.alreadyAppliedFilters||[],ot=C.addLength1||!1,yt=ee.length,Ot=C.objectId,Gt=function(Ai){return Ai};if(w!==null&&Ot===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");w!==null&&(Gt=Si.encryptor(Ot,0));var Jt={};Ne===!0&&(Ne=["FlateEncode"]);var sn=C.additionalKeyValues||[],vn=(Jt=_n.API.processDataByFilters!==void 0?_n.API.processDataByFilters(ee,Ne):{data:ee,reverseChain:[]}).reverseChain+(Array.isArray(He)?He.join(" "):He.toString());if(Jt.data.length!==0&&(sn.push({key:"Length",value:Jt.data.length}),ot===!0&&sn.push({key:"Length1",value:yt})),vn.length!=0)if(vn.split("/").length-1==1)sn.push({key:"Filter",value:vn});else{sn.push({key:"Filter",value:"["+vn+"]"});for(var Tn=0;Tn<sn.length;Tn+=1)if(sn[Tn].key==="DecodeParms"){for(var si=[],jn=0;jn<Jt.reverseChain.split("/").length-1;jn+=1)si.push("null");si.push(sn[Tn].value),sn[Tn].value="["+si.join(" ")+"]"}}ie("<<");for(var Hn=0;Hn<sn.length;Hn++)ie("/"+sn[Hn].key+" "+sn[Hn].value);ie(">>"),Jt.data.length!==0&&(ie("stream"),ie(Gt(Jt.data)),ie("endstream"))},vs=x.__private__.putPage=function(C){var ee=C.number,Ne=C.data,He=C.objId,ot=C.contentsObjId;hr(He,!0),ie("<</Type /Page"),ie("/Parent "+C.rootDictionaryObjId+" 0 R"),ie("/Resources "+C.resourceDictionaryObjId+" 0 R"),ie("/MediaBox ["+parseFloat(Ce(C.mediaBox.bottomLeftX))+" "+parseFloat(Ce(C.mediaBox.bottomLeftY))+" "+Ce(C.mediaBox.topRightX)+" "+Ce(C.mediaBox.topRightY)+"]"),C.cropBox!==null&&ie("/CropBox ["+Ce(C.cropBox.bottomLeftX)+" "+Ce(C.cropBox.bottomLeftY)+" "+Ce(C.cropBox.topRightX)+" "+Ce(C.cropBox.topRightY)+"]"),C.bleedBox!==null&&ie("/BleedBox ["+Ce(C.bleedBox.bottomLeftX)+" "+Ce(C.bleedBox.bottomLeftY)+" "+Ce(C.bleedBox.topRightX)+" "+Ce(C.bleedBox.topRightY)+"]"),C.trimBox!==null&&ie("/TrimBox ["+Ce(C.trimBox.bottomLeftX)+" "+Ce(C.trimBox.bottomLeftY)+" "+Ce(C.trimBox.topRightX)+" "+Ce(C.trimBox.topRightY)+"]"),C.artBox!==null&&ie("/ArtBox ["+Ce(C.artBox.bottomLeftX)+" "+Ce(C.artBox.bottomLeftY)+" "+Ce(C.artBox.topRightX)+" "+Ce(C.artBox.topRightY)+"]"),typeof C.userUnit=="number"&&C.userUnit!==1&&ie("/UserUnit "+C.userUnit),Dt.publish("putPage",{objId:He,pageContext:Tt[ee],pageNumber:ee,page:Ne}),ie("/Contents "+ot+" 0 R"),ie(">>"),ie("endobj");var yt=Ne.join(`
`);return ae===ne.ADVANCED&&(yt+=`
Q`),hr(ot,!0),Cr({data:yt,filters:tr(),objectId:ot}),ie("endobj"),He},xo=x.__private__.putPages=function(){var C,ee,Ne=[];for(C=1;C<=Kn;C++)Tt[C].objId=Ht(),Tt[C].contentsObjId=Ht();for(C=1;C<=Kn;C++)Ne.push(vs({number:C,data:$e[C],objId:Tt[C].objId,contentsObjId:Tt[C].contentsObjId,mediaBox:Tt[C].mediaBox,cropBox:Tt[C].cropBox,bleedBox:Tt[C].bleedBox,trimBox:Tt[C].trimBox,artBox:Tt[C].artBox,userUnit:Tt[C].userUnit,rootDictionaryObjId:Xr,resourceDictionaryObjId:Br}));hr(Xr,!0),ie("<</Type /Pages");var He="/Kids [";for(ee=0;ee<Kn;ee++)He+=Ne[ee]+" 0 R ";ie(He+"]"),ie("/Count "+Kn),ie(">>"),ie("endobj"),Dt.publish("postPutPages")},Zo=function(C){Dt.publish("putFont",{font:C,out:ie,newObject:Vn,putStream:Cr}),C.isAlreadyPutted!==!0&&(C.objectNumber=Vn(),ie("<<"),ie("/Type /Font"),ie("/BaseFont /"+Cu(C.postScriptName)),ie("/Subtype /Type1"),typeof C.encoding=="string"&&ie("/Encoding /"+C.encoding),ie("/FirstChar 32"),ie("/LastChar 255"),ie(">>"),ie("endobj"))},Ko=function(){for(var C in Ct)Ct.hasOwnProperty(C)&&(b===!1||b===!0&&E.hasOwnProperty(C))&&Zo(Ct[C])},Ds=function(C){C.objectNumber=Vn();var ee=[];ee.push({key:"Type",value:"/XObject"}),ee.push({key:"Subtype",value:"/Form"}),ee.push({key:"BBox",value:"["+[Ce(C.x),Ce(C.y),Ce(C.x+C.width),Ce(C.y+C.height)].join(" ")+"]"}),ee.push({key:"Matrix",value:"["+C.matrix.toString()+"]"});var Ne=C.pages[1].join(`
`);Cr({data:Ne,additionalKeyValues:ee,objectId:C.objectNumber}),ie("endobj")},Ys=function(){for(var C in qn)qn.hasOwnProperty(C)&&Ds(qn[C])},Lo=function(C,ee){var Ne,He=[],ot=1/(ee-1);for(Ne=0;Ne<1;Ne+=ot)He.push(Ne);if(He.push(1),C[0].offset!=0){var yt={offset:0,color:C[0].color};C.unshift(yt)}if(C[C.length-1].offset!=1){var Ot={offset:1,color:C[C.length-1].color};C.push(Ot)}for(var Gt="",Jt=0,sn=0;sn<He.length;sn++){for(Ne=He[sn];Ne>C[Jt+1].offset;)Jt++;var vn=C[Jt].offset,Tn=(Ne-vn)/(C[Jt+1].offset-vn),si=C[Jt].color,jn=C[Jt+1].color;Gt+=D(Math.round((1-Tn)*si[0]+Tn*jn[0]).toString(16))+D(Math.round((1-Tn)*si[1]+Tn*jn[1]).toString(16))+D(Math.round((1-Tn)*si[2]+Tn*jn[2]).toString(16))}return Gt.trim()},Ml=function(C,ee){ee||(ee=21);var Ne=Vn(),He=Lo(C.colors,ee),ot=[];ot.push({key:"FunctionType",value:"0"}),ot.push({key:"Domain",value:"[0.0 1.0]"}),ot.push({key:"Size",value:"["+ee+"]"}),ot.push({key:"BitsPerSample",value:"8"}),ot.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ot.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Cr({data:He,additionalKeyValues:ot,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ne}),ie("endobj"),C.objectNumber=Vn(),ie("<< /ShadingType "+C.type),ie("/ColorSpace /DeviceRGB");var yt="/Coords ["+Ce(parseFloat(C.coords[0]))+" "+Ce(parseFloat(C.coords[1]))+" ";C.type===2?yt+=Ce(parseFloat(C.coords[2]))+" "+Ce(parseFloat(C.coords[3])):yt+=Ce(parseFloat(C.coords[2]))+" "+Ce(parseFloat(C.coords[3]))+" "+Ce(parseFloat(C.coords[4]))+" "+Ce(parseFloat(C.coords[5])),ie(yt+="]"),C.matrix&&ie("/Matrix ["+C.matrix.toString()+"]"),ie("/Function "+Ne+" 0 R"),ie("/Extend [true true]"),ie(">>"),ie("endobj")},Bl=function(C,ee){var Ne=Ht(),He=Vn();ee.push({resourcesOid:Ne,objectOid:He}),C.objectNumber=He;var ot=[];ot.push({key:"Type",value:"/Pattern"}),ot.push({key:"PatternType",value:"1"}),ot.push({key:"PaintType",value:"1"}),ot.push({key:"TilingType",value:"1"}),ot.push({key:"BBox",value:"["+C.boundingBox.map(Ce).join(" ")+"]"}),ot.push({key:"XStep",value:Ce(C.xStep)}),ot.push({key:"YStep",value:Ce(C.yStep)}),ot.push({key:"Resources",value:Ne+" 0 R"}),C.matrix&&ot.push({key:"Matrix",value:"["+C.matrix.toString()+"]"}),Cr({data:C.stream,additionalKeyValues:ot,objectId:C.objectNumber}),ie("endobj")},Jo=function(C){var ee;for(ee in ln)ln.hasOwnProperty(ee)&&(ln[ee]instanceof Wl?Ml(ln[ee]):ln[ee]instanceof ku&&Bl(ln[ee],C))},Ka=function(C){for(var ee in C.objectNumber=Vn(),ie("<<"),C)switch(ee){case"opacity":ie("/ca "+Ue(C[ee]));break;case"stroke-opacity":ie("/CA "+Ue(C[ee]))}ie(">>"),ie("endobj")},Tl=function(){var C;for(C in In)In.hasOwnProperty(C)&&Ka(In[C])},Co=function(){for(var C in ie("/XObject <<"),qn)qn.hasOwnProperty(C)&&qn[C].objectNumber>=0&&ie("/"+C+" "+qn[C].objectNumber+" 0 R");Dt.publish("putXobjectDict"),ie(">>")},ko=function(){Si.oid=Vn(),ie("<<"),ie("/Filter /Standard"),ie("/V "+Si.v),ie("/R "+Si.r),ie("/U <"+Si.toHexString(Si.U)+">"),ie("/O <"+Si.toHexString(Si.O)+">"),ie("/P "+Si.P),ie(">>"),ie("endobj")},xa=function(){for(var C in ie("/Font <<"),Ct)Ct.hasOwnProperty(C)&&(b===!1||b===!0&&E.hasOwnProperty(C))&&ie("/"+C+" "+Ct[C].objectNumber+" 0 R");ie(">>")},Ja=function(){if(Object.keys(ln).length>0){for(var C in ie("/Shading <<"),ln)ln.hasOwnProperty(C)&&ln[C]instanceof Wl&&ln[C].objectNumber>=0&&ie("/"+C+" "+ln[C].objectNumber+" 0 R");Dt.publish("putShadingPatternDict"),ie(">>")}},kr=function(C){if(Object.keys(ln).length>0){for(var ee in ie("/Pattern <<"),ln)ln.hasOwnProperty(ee)&&ln[ee]instanceof x.TilingPattern&&ln[ee].objectNumber>=0&&ln[ee].objectNumber<C&&ie("/"+ee+" "+ln[ee].objectNumber+" 0 R");Dt.publish("putTilingPatternDict"),ie(">>")}},Fn=function(){if(Object.keys(In).length>0){var C;for(C in ie("/ExtGState <<"),In)In.hasOwnProperty(C)&&In[C].objectNumber>=0&&ie("/"+C+" "+In[C].objectNumber+" 0 R");Dt.publish("putGStateDict"),ie(">>")}},wn=function(C){hr(C.resourcesOid,!0),ie("<<"),ie("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),xa(),Ja(),kr(C.objectOid),Fn(),Co(),ie(">>"),ie("endobj")},Xs=function(){var C=[];Ko(),Tl(),Ys(),Jo(C),Dt.publish("putResources"),C.forEach(wn),wn({resourcesOid:Br,objectOid:Number.MAX_SAFE_INTEGER}),Dt.publish("postPutResources")},Os=function(){Dt.publish("putAdditionalObjects");for(var C=0;C<je.length;C++){var ee=je[C];hr(ee.objId,!0),ie(ee.content),ie("endobj")}Dt.publish("postPutAdditionalObjects")},_s=function(C){nn[C.fontName]=nn[C.fontName]||{},nn[C.fontName][C.fontStyle]=C.id},Po=function(C,ee,Ne,He,ot){var yt={id:"F"+(Object.keys(Ct).length+1).toString(10),postScriptName:C,fontName:ee,fontStyle:Ne,encoding:He,isStandardFont:ot||!1,metadata:{}};return Dt.publish("addFont",{font:yt,instance:this}),Ct[yt.id]=yt,_s(yt),yt.id},Cn=function(C){for(var ee=0,Ne=Xe.length;ee<Ne;ee++){var He=Po.call(this,C[ee][0],C[ee][1],C[ee][2],Xe[ee][3],!0);b===!1&&(E[He]=!0);var ot=C[ee][0].split("-");_s({id:He,fontName:ot[0],fontStyle:ot[1]||""})}Dt.publish("addFonts",{fonts:Ct,dictionary:nn})},zn=function(C){return C.foo=function(){try{return C.apply(this,arguments)}catch(He){var ee=He.stack||"";~ee.indexOf(" at ")&&(ee=ee.split(" at ")[1]);var Ne="Error in function "+ee.split(`
`)[0].split("<")[0]+": "+He.message;if(!bn.console)throw new Error(Ne);bn.console.error(Ne,He),bn.alert&&alert(Ne)}},C.foo.bar=C,C.foo},Qs=function(C,ee){var Ne,He,ot,yt,Ot,Gt,Jt,sn,vn;if(ot=(ee=ee||{}).sourceEncoding||"Unicode",Ot=ee.outputEncoding,(ee.autoencode||Ot)&&Ct[Xt].metadata&&Ct[Xt].metadata[ot]&&Ct[Xt].metadata[ot].encoding&&(yt=Ct[Xt].metadata[ot].encoding,!Ot&&Ct[Xt].encoding&&(Ot=Ct[Xt].encoding),!Ot&&yt.codePages&&(Ot=yt.codePages[0]),typeof Ot=="string"&&(Ot=yt[Ot]),Ot)){for(Jt=!1,Gt=[],Ne=0,He=C.length;Ne<He;Ne++)(sn=Ot[C.charCodeAt(Ne)])?Gt.push(String.fromCharCode(sn)):Gt.push(C[Ne]),Gt[Ne].charCodeAt(0)>>8&&(Jt=!0);C=Gt.join("")}for(Ne=C.length;Jt===void 0&&Ne!==0;)C.charCodeAt(Ne-1)>>8&&(Jt=!0),Ne--;if(!Jt)return C;for(Gt=ee.noBOM?[]:[254,255],Ne=0,He=C.length;Ne<He;Ne++){if((vn=(sn=C.charCodeAt(Ne))>>8)>>8)throw new Error("Character at position "+Ne+" of string '"+C+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Gt.push(vn),Gt.push(sn-(vn<<8))}return String.fromCharCode.apply(void 0,Gt)},Fi=x.__private__.pdfEscape=x.pdfEscape=function(C,ee){return Qs(C,ee).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Zi=x.__private__.beginPage=function(C){$e[++Kn]=[],Tt[Kn]={objId:0,contentsObjId:0,userUnit:Number(f),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(C[0]),topRightY:Number(C[1])}},ys(Kn),Ee($e[G])},Ya=function(C,ee){var Ne,He,ot;switch(n=ee||n,typeof C=="string"&&(Ne=j(C.toLowerCase()),Array.isArray(Ne)&&(He=Ne[0],ot=Ne[1])),Array.isArray(C)&&(He=C[0]*Rt,ot=C[1]*Rt),isNaN(He)&&(He=o[0],ot=o[1]),(He>14400||ot>14400)&&(ui.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),He=Math.min(14400,He),ot=Math.min(14400,ot)),o=[He,ot],n.substr(0,1)){case"l":ot>He&&(o=[ot,He]);break;case"p":He>ot&&(o=[ot,He])}Zi(o),Mo(ta),ie(fr),ra!==0&&ie(ra+" J"),Ei!==0&&ie(Ei+" j"),Dt.publish("addPage",{pageNumber:Kn})},Yo=function(C){C>0&&C<=Kn&&($e.splice(C,1),Tt.splice(C,1),Kn--,G>Kn&&(G=Kn),this.setPage(G))},ys=function(C){C>0&&C<=Kn&&(G=C)},di=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return $e.length-1},bs=function(C,ee,Ne){var He,ot=void 0;return Ne=Ne||{},C=C!==void 0?C:Ct[Xt].fontName,ee=ee!==void 0?ee:Ct[Xt].fontStyle,He=C.toLowerCase(),nn[He]!==void 0&&nn[He][ee]!==void 0?ot=nn[He][ee]:nn[C]!==void 0&&nn[C][ee]!==void 0?ot=nn[C][ee]:Ne.disableWarning===!1&&ui.warn("Unable to look up font label for font '"+C+"', '"+ee+"'. Refer to getFontList() for available fonts."),ot||Ne.noFallback||(ot=nn.times[ee])==null&&(ot=nn.times.normal),ot},So=x.__private__.putInfo=function(){var C=Vn(),ee=function(He){return He};for(var Ne in w!==null&&(ee=Si.encryptor(C,0)),ie("<<"),ie("/Producer ("+Fi(ee("jsPDF "+_n.version))+")"),Ut)Ut.hasOwnProperty(Ne)&&Ut[Ne]&&ie("/"+Ne.substr(0,1).toUpperCase()+Ne.substr(1)+" ("+Fi(ee(Ut[Ne]))+")");ie("/CreationDate ("+Fi(ee(Y))+")"),ie(">>"),ie("endobj")},Rs=x.__private__.putCatalog=function(C){var ee=(C=C||{}).rootDictionaryObjId||Xr;switch(Vn(),ie("<<"),ie("/Type /Catalog"),ie("/Pages "+ee+" 0 R"),ke||(ke="fullwidth"),ke){case"fullwidth":ie("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ie("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ie("/OpenAction [3 0 R /Fit]");break;case"original":ie("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ne=""+ke;Ne.substr(Ne.length-1)==="%"&&(ke=parseInt(ke)/100),typeof ke=="number"&&ie("/OpenAction [3 0 R /XYZ null null "+Ue(ke)+"]")}switch(Pt||(Pt="continuous"),Pt){case"continuous":ie("/PageLayout /OneColumn");break;case"single":ie("/PageLayout /SinglePage");break;case"two":case"twoleft":ie("/PageLayout /TwoColumnLeft");break;case"tworight":ie("/PageLayout /TwoColumnRight")}it&&ie("/PageMode /"+it),Dt.publish("putCatalog"),ie(">>"),ie("endobj")},La=x.__private__.putTrailer=function(){ie("trailer"),ie("<<"),ie("/Size "+(J+1)),ie("/Root "+J+" 0 R"),ie("/Info "+(J-1)+" 0 R"),w!==null&&ie("/Encrypt "+Si.oid+" 0 R"),ie("/ID [ <"+Z+"> <"+Z+"> ]"),ie(">>")},eo=x.__private__.putHeader=function(){ie("%PDF-"+F),ie("%")},Ca=x.__private__.putXRef=function(){var C="0000000000";ie("xref"),ie("0 "+(J+1)),ie("0000000000 65535 f ");for(var ee=1;ee<=J;ee++)typeof le[ee]=="function"?ie((C+le[ee]()).slice(-10)+" 00000 n "):le[ee]!==void 0?ie((C+le[ee]).slice(-10)+" 00000 n "):ie("0000000000 00000 n ")},Qr=x.__private__.buildDocument=function(){Te(),Ee(ge),Dt.publish("buildDocument"),eo(),xo(),Os(),Xs(),w!==null&&ko(),So(),Rs();var C=me;return Ca(),La(),ie("startxref"),ie(""+C),ie("%%EOF"),Ee($e[G]),ge.join(`
`)},Is=x.__private__.getBlob=function(C){return new Blob([et(C)],{type:"application/pdf"})},to=x.output=x.__private__.output=zn(function(C,ee){switch(typeof(ee=ee||{})=="string"?ee={filename:ee}:ee.filename=ee.filename||"generated.pdf",C){case void 0:return Qr();case"save":x.save(ee.filename);break;case"arraybuffer":return et(Qr());case"blob":return Is(Qr());case"bloburi":case"bloburl":if(bn.URL!==void 0&&typeof bn.URL.createObjectURL=="function")return bn.URL&&bn.URL.createObjectURL(Is(Qr()))||void 0;ui.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ne="",He=Qr();try{Ne=Cd(He)}catch{Ne=Cd(unescape(encodeURIComponent(He)))}return"data:application/pdf;filename="+ee.filename+";base64,"+Ne;case"pdfobjectnewwindow":if(Object.prototype.toString.call(bn)==="[object Window]"){var ot="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",yt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ee.pdfObjectUrl&&(ot=ee.pdfObjectUrl,yt="");var Ot='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ot+'"'+yt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ee)+");<\/script></body></html>",Gt=bn.open();return Gt!==null&&Gt.document.write(Ot),Gt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(bn)==="[object Window]"){var Jt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ee.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ee.filename+'" width="500px" height="400px" /></body></html>',sn=bn.open();if(sn!==null){sn.document.write(Jt);var vn=this;sn.document.documentElement.querySelector("#pdfViewer").onload=function(){sn.document.title=ee.filename,sn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(vn.output("bloburl"))}}return sn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(bn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Tn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ee)+'"></iframe></body></html>',si=bn.open();if(si!==null&&(si.document.write(Tn),si.document.title=ee.filename),si||typeof safari>"u")return si;break;case"datauri":case"dataurl":return bn.document.location.href=this.output("datauristring",ee);default:return null}}),Xo=function(C){return Array.isArray(Di)===!0&&Di.indexOf(C)>-1};switch(r){case"pt":Rt=1;break;case"mm":Rt=72/25.4;break;case"cm":Rt=72/2.54;break;case"in":Rt=72;break;case"px":Rt=Xo("px_scaling")==1?.75:96/72;break;case"pc":case"em":Rt=12;break;case"ex":Rt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Rt=r}var Si=null;Ie(),W();var Xa=function(C){return w!==null?Si.encryptor(C,0):function(ee){return ee}},Qo=x.__private__.getPageInfo=x.getPageInfo=function(C){if(isNaN(C)||C%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Tt[C].objId,pageNumber:C,pageContext:Tt[C]}},yn=x.__private__.getPageInfoByObjId=function(C){if(isNaN(C)||C%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ee in Tt)if(Tt[ee].objId===C)break;return Qo(ee)},xn=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:Tt[G].objId,pageNumber:G,pageContext:Tt[G]}};x.addPage=function(){return Ya.apply(this,arguments),this},x.setPage=function(){return ys.apply(this,arguments),Ee.call(this,$e[G]),this},x.insertPage=function(C){return this.addPage(),this.movePage(G,C),this},x.movePage=function(C,ee){var Ne,He;if(C>ee){Ne=$e[C],He=Tt[C];for(var ot=C;ot>ee;ot--)$e[ot]=$e[ot-1],Tt[ot]=Tt[ot-1];$e[ee]=Ne,Tt[ee]=He,this.setPage(ee)}else if(C<ee){Ne=$e[C],He=Tt[C];for(var yt=C;yt<ee;yt++)$e[yt]=$e[yt+1],Tt[yt]=Tt[yt+1];$e[ee]=Ne,Tt[ee]=He,this.setPage(ee)}return this},x.deletePage=function(){return Yo.apply(this,arguments),this},x.__private__.text=x.text=function(C,ee,Ne,He,ot){var yt,Ot,Gt,Jt,sn,vn,Tn,si,jn,Hn=(He=He||{}).scope||this;if(typeof C=="number"&&typeof ee=="number"&&(typeof Ne=="string"||Array.isArray(Ne))){var Ai=Ne;Ne=ee,ee=C,C=Ai}if(arguments[3]instanceof cn?(de("The transform parameter of text() with a Matrix value"),jn=ot):(Gt=arguments[4],Jt=arguments[5],oi(Tn=arguments[3])==="object"&&Tn!==null||(typeof Gt=="string"&&(Jt=Gt,Gt=null),typeof Tn=="string"&&(Jt=Tn,Tn=null),typeof Tn=="number"&&(Gt=Tn,Tn=null),He={flags:Tn,angle:Gt,align:Jt})),isNaN(ee)||isNaN(Ne)||C==null)throw new Error("Invalid arguments passed to jsPDF.text");if(C.length===0)return Hn;var Li="",Sr=!1,Xn=typeof He.lineHeightFactor=="number"?He.lineHeightFactor:Ao,ir=Hn.internal.scaleFactor;function tl(Jn){return Jn=Jn.split("	").join(Array(He.TabLen||9).join(" ")),Fi(Jn,Tn)}function rr(Jn){for(var Gn,yi=Jn.concat(),Qn=[],ns=yi.length;ns--;)typeof(Gn=yi.shift())=="string"?Qn.push(Gn):Array.isArray(Jn)&&(Gn.length===1||Gn[1]===void 0&&Gn[2]===void 0)?Qn.push(Gn[0]):Qn.push([Gn[0],Gn[1],Gn[2]]);return Qn}function Ta(Jn,Gn){var yi;if(typeof Jn=="string")yi=Gn(Jn)[0];else if(Array.isArray(Jn)){for(var Qn,ns,co=Jn.concat(),Ps=[],il=co.length;il--;)typeof(Qn=co.shift())=="string"?Ps.push(Gn(Qn)[0]):Array.isArray(Qn)&&typeof Qn[0]=="string"&&(ns=Gn(Qn[0],Qn[1],Qn[2]),Ps.push([ns[0],ns[1],ns[2]]));yi=Ps}return yi}var es=!1,Na=!0;if(typeof C=="string")es=!0;else if(Array.isArray(C)){var zs=C.concat();Ot=[];for(var Us,Ci=zs.length;Ci--;)(typeof(Us=zs.shift())!="string"||Array.isArray(Us)&&typeof Us[0]!="string")&&(Na=!1);es=Na}if(es===!1)throw new Error('Type of text must be string or Array. "'+C+'" is not recognized.');typeof C=="string"&&(C=C.match(/[\r?\n]/)?C.split(/\r\n|\r|\n/g):[C]);var aa=De/Hn.internal.scaleFactor,dr=aa*(Xn-1);switch(He.baseline){case"bottom":Ne-=dr;break;case"top":Ne+=aa-dr;break;case"hanging":Ne+=aa-2*dr;break;case"middle":Ne+=aa/2-dr}if((vn=He.maxWidth||0)>0&&(typeof C=="string"?C=Hn.splitTextToSize(C,vn):Object.prototype.toString.call(C)==="[object Array]"&&(C=C.reduce(function(Jn,Gn){return Jn.concat(Hn.splitTextToSize(Gn,vn))},[]))),yt={text:C,x:ee,y:Ne,options:He,mutex:{pdfEscape:Fi,activeFontKey:Xt,fonts:Ct,activeFontSize:De}},Dt.publish("preProcessText",yt),C=yt.text,Gt=(He=yt.options).angle,!(jn instanceof cn)&&Gt&&typeof Gt=="number"){Gt*=Math.PI/180,He.rotationDirection===0&&(Gt=-Gt),ae===ne.ADVANCED&&(Gt=-Gt);var sr=Math.cos(Gt),la=Math.sin(Gt);jn=new cn(sr,la,-la,sr,0,0)}else Gt&&Gt instanceof cn&&(jn=Gt);ae!==ne.ADVANCED||jn||(jn=gs),(sn=He.charSpace||ia)!==void 0&&(Li+=Ce(H(sn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(si=He.horizontalScale)!==void 0&&(Li+=Ce(100*si)+` Tz
`),He.lang;var Ki=-1,qs=He.renderingMode!==void 0?He.renderingMode:He.stroke,Er=Hn.internal.getCurrentPageInfo().pageContext;switch(qs){case 0:case!1:case"fill":Ki=0;break;case 1:case!0:case"stroke":Ki=1;break;case 2:case"fillThenStroke":Ki=2;break;case 3:case"invisible":Ki=3;break;case 4:case"fillAndAddForClipping":Ki=4;break;case 5:case"strokeAndAddPathForClipping":Ki=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ki=6;break;case 7:case"addToPathForClipping":Ki=7}var nl=Er.usedRenderingMode!==void 0?Er.usedRenderingMode:-1;Ki!==-1?Li+=Ki+` Tr
`:nl!==-1&&(Li+=`0 Tr
`),Ki!==-1&&(Er.usedRenderingMode=Ki),Jt=He.align||"left";var Mi,xs=De*Xn,Ir=Hn.internal.pageSize.getWidth(),Do=Ct[Xt];sn=He.charSpace||ia,vn=He.maxWidth||0,Tn=Object.assign({autoencode:!0,noBOM:!0},He.flags);var $s=[],Ls=function(Jn){return Hn.getStringUnitWidth(Jn,{font:Do,charSpace:sn,fontSize:De,doKerning:!1})*De/ir};if(Object.prototype.toString.call(C)==="[object Array]"){var ji;Ot=rr(C),Jt!=="left"&&(Mi=Ot.map(Ls));var Oi,ts=0;if(Jt==="right"){ee-=Mi[0],C=[],Ci=Ot.length;for(var pr=0;pr<Ci;pr++)pr===0?(Oi=un(ee),ji=nr(Ne)):(Oi=H(ts-Mi[pr]),ji=-xs),C.push([Ot[pr],Oi,ji]),ts=Mi[pr]}else if(Jt==="center"){ee-=Mi[0]/2,C=[],Ci=Ot.length;for(var Fr=0;Fr<Ci;Fr++)Fr===0?(Oi=un(ee),ji=nr(Ne)):(Oi=H((ts-Mi[Fr])/2),ji=-xs),C.push([Ot[Fr],Oi,ji]),ts=Mi[Fr]}else if(Jt==="left"){C=[],Ci=Ot.length;for(var Vs=0;Vs<Ci;Vs++)C.push(Ot[Vs])}else if(Jt==="justify"&&Do.encoding==="Identity-H"){C=[],Ci=Ot.length,vn=vn!==0?vn:Ir;for(var jr=0,pi=0;pi<Ci;pi++)if(ji=pi===0?nr(Ne):-xs,Oi=pi===0?un(ee):jr,pi<Ci-1){var Cs=H((vn-Mi[pi])/(Ot[pi].split(" ").length-1)),or=Ot[pi].split(" ");C.push([or[0]+" ",Oi,ji]),jr=0;for(var Ji=1;Ji<or.length;Ji++){var Oo=(Ls(or[Ji-1]+" "+or[Ji])-Ls(or[Ji]))*ir+Cs;Ji==or.length-1?C.push([or[Ji],Oo,0]):C.push([or[Ji]+" ",Oo,0]),jr-=Oo}}else C.push([Ot[pi],Oi,ji]);C.push(["",jr,0])}else{if(Jt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(C=[],Ci=Ot.length,vn=vn!==0?vn:Ir,pi=0;pi<Ci;pi++)ji=pi===0?nr(Ne):-xs,Oi=pi===0?un(ee):0,pi<Ci-1?$s.push(Ce(H((vn-Mi[pi])/(Ot[pi].split(" ").length-1)))):$s.push(0),C.push([Ot[pi],Oi,ji])}}var Da=typeof He.R2L=="boolean"?He.R2L:ht;Da===!0&&(C=Ta(C,function(Jn,Gn,yi){return[Jn.split("").reverse().join(""),Gn,yi]})),yt={text:C,x:ee,y:Ne,options:He,mutex:{pdfEscape:Fi,activeFontKey:Xt,fonts:Ct,activeFontSize:De}},Dt.publish("postProcessText",yt),C=yt.text,Sr=yt.mutex.isHex||!1;var Oa=Ct[Xt].encoding;Oa!=="WinAnsiEncoding"&&Oa!=="StandardEncoding"||(C=Ta(C,function(Jn,Gn,yi){return[tl(Jn),Gn,yi]})),Ot=rr(C),C=[];for(var Yi,mr,ao,ks=0,ua=1,lo=Array.isArray(Ot[0])?ua:ks,uo="",Hs=function(Jn,Gn,yi){var Qn="";return yi instanceof cn?(yi=typeof He.angle=="number"?Yr(yi,new cn(1,0,0,1,Jn,Gn)):Yr(new cn(1,0,0,1,Jn,Gn),yi),ae===ne.ADVANCED&&(yi=Yr(new cn(1,0,0,-1,0,0),yi)),Qn=yi.join(" ")+` Tm
`):Qn=Ce(Jn)+" "+Ce(Gn)+` Td
`,Qn},zr=0;zr<Ot.length;zr++){switch(uo="",lo){case ua:ao=(Sr?"<":"(")+Ot[zr][0]+(Sr?">":")"),Yi=parseFloat(Ot[zr][1]),mr=parseFloat(Ot[zr][2]);break;case ks:ao=(Sr?"<":"(")+Ot[zr]+(Sr?">":")"),Yi=un(ee),mr=nr(Ne)}$s!==void 0&&$s[zr]!==void 0&&(uo=$s[zr]+` Tw
`),zr===0?C.push(uo+Hs(Yi,mr,jn)+ao):lo===ks?C.push(uo+ao):lo===ua&&C.push(uo+Hs(Yi,mr,jn)+ao)}C=lo===ks?C.join(` Tj
T* `):C.join(` Tj
`),C+=` Tj
`;var zi=`BT
/`;return zi+=Xt+" "+De+` Tf
`,zi+=Ce(De*Xn)+` TL
`,zi+=ws+`
`,zi+=Li,zi+=C,ie(zi+="ET"),E[Xt]=!0,Hn};var Nr=x.__private__.clip=x.clip=function(C){return ie(C==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return Nr("evenodd")},x.__private__.discardPath=x.discardPath=function(){return ie("n"),this};var On=x.__private__.isValidStyle=function(C){var ee=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(C)!==-1&&(ee=!0),ee};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function(C){return On(C)&&(_=C),this};var ka=x.__private__.getStyle=x.getStyle=function(C){var ee=_;switch(C){case"D":case"S":ee="S";break;case"F":ee="f";break;case"FD":case"DF":ee="B";break;case"f":case"f*":case"B":case"B*":ee=C}return ee},ea=x.close=function(){return ie("h"),this};x.stroke=function(){return ie("S"),this},x.fill=function(C){return no("f",C),this},x.fillEvenOdd=function(C){return no("f*",C),this},x.fillStroke=function(C){return no("B",C),this},x.fillStrokeEvenOdd=function(C){return no("B*",C),this};var no=function(C,ee){oi(ee)==="object"?Pa(ee,C):ie(C)},Dr=function(C){C===null||ae===ne.ADVANCED&&C===void 0||(C=ka(C),ie(C))};function Fs(C,ee,Ne,He,ot){var yt=new ku(ee||this.boundingBox,Ne||this.xStep,He||this.yStep,this.gState,ot||this.matrix);yt.stream=this.stream;var Ot=C+"$$"+this.cloneIndex+++"$$";return cr(Ot,yt),yt}var Pa=function(C,ee){var Ne=li[C.key],He=ln[Ne];if(He instanceof Wl)ie("q"),ie(Eo(ee)),He.gState&&x.setGState(He.gState),ie(C.matrix.toString()+" cm"),ie("/"+Ne+" sh"),ie("Q");else if(He instanceof ku){var ot=new cn(1,0,0,-1,0,oo());C.matrix&&(ot=ot.multiply(C.matrix||gs),Ne=Fs.call(He,C.key,C.boundingBox,C.xStep,C.yStep,ot).id),ie("q"),ie("/Pattern cs"),ie("/"+Ne+" scn"),He.gState&&x.setGState(He.gState),ie(ee),ie("Q")}},Eo=function(C){switch(C){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},vi=x.moveTo=function(C,ee){return ie(Ce(H(C))+" "+Ce(M(ee))+" m"),this},Pr=x.lineTo=function(C,ee){return ie(Ce(H(C))+" "+Ce(M(ee))+" l"),this},js=x.curveTo=function(C,ee,Ne,He,ot,yt){return ie([Ce(H(C)),Ce(M(ee)),Ce(H(Ne)),Ce(M(He)),Ce(H(ot)),Ce(M(yt)),"c"].join(" ")),this};x.__private__.line=x.line=function(C,ee,Ne,He,ot){if(isNaN(C)||isNaN(ee)||isNaN(Ne)||isNaN(He)||!On(ot))throw new Error("Invalid arguments passed to jsPDF.line");return ae===ne.COMPAT?this.lines([[Ne-C,He-ee]],C,ee,[1,1],ot||"S"):this.lines([[Ne-C,He-ee]],C,ee,[1,1]).stroke()},x.__private__.lines=x.lines=function(C,ee,Ne,He,ot,yt){var Ot,Gt,Jt,sn,vn,Tn,si,jn,Hn,Ai,Li,Sr;if(typeof C=="number"&&(Sr=Ne,Ne=ee,ee=C,C=Sr),He=He||[1,1],yt=yt||!1,isNaN(ee)||isNaN(Ne)||!Array.isArray(C)||!Array.isArray(He)||!On(ot)||typeof yt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(vi(ee,Ne),Ot=He[0],Gt=He[1],sn=C.length,Ai=ee,Li=Ne,Jt=0;Jt<sn;Jt++)(vn=C[Jt]).length===2?(Ai=vn[0]*Ot+Ai,Li=vn[1]*Gt+Li,Pr(Ai,Li)):(Tn=vn[0]*Ot+Ai,si=vn[1]*Gt+Li,jn=vn[2]*Ot+Ai,Hn=vn[3]*Gt+Li,Ai=vn[4]*Ot+Ai,Li=vn[5]*Gt+Li,js(Tn,si,jn,Hn,Ai,Li));return yt&&ea(),Dr(ot),this},x.path=function(C){for(var ee=0;ee<C.length;ee++){var Ne=C[ee],He=Ne.c;switch(Ne.op){case"m":vi(He[0],He[1]);break;case"l":Pr(He[0],He[1]);break;case"c":js.apply(this,He);break;case"h":ea()}}return this},x.__private__.rect=x.rect=function(C,ee,Ne,He,ot){if(isNaN(C)||isNaN(ee)||isNaN(Ne)||isNaN(He)||!On(ot))throw new Error("Invalid arguments passed to jsPDF.rect");return ae===ne.COMPAT&&(He=-He),ie([Ce(H(C)),Ce(M(ee)),Ce(H(Ne)),Ce(H(He)),"re"].join(" ")),Dr(ot),this},x.__private__.triangle=x.triangle=function(C,ee,Ne,He,ot,yt,Ot){if(isNaN(C)||isNaN(ee)||isNaN(Ne)||isNaN(He)||isNaN(ot)||isNaN(yt)||!On(Ot))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ne-C,He-ee],[ot-Ne,yt-He],[C-ot,ee-yt]],C,ee,[1,1],Ot,!0),this},x.__private__.roundedRect=x.roundedRect=function(C,ee,Ne,He,ot,yt,Ot){if(isNaN(C)||isNaN(ee)||isNaN(Ne)||isNaN(He)||isNaN(ot)||isNaN(yt)||!On(Ot))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Gt=4/3*(Math.SQRT2-1);return ot=Math.min(ot,.5*Ne),yt=Math.min(yt,.5*He),this.lines([[Ne-2*ot,0],[ot*Gt,0,ot,yt-yt*Gt,ot,yt],[0,He-2*yt],[0,yt*Gt,-ot*Gt,yt,-ot,yt],[2*ot-Ne,0],[-ot*Gt,0,-ot,-yt*Gt,-ot,-yt],[0,2*yt-He],[0,-yt*Gt,ot*Gt,-yt,ot,-yt]],C+ot,ee,[1,1],Ot,!0),this},x.__private__.ellipse=x.ellipse=function(C,ee,Ne,He,ot){if(isNaN(C)||isNaN(ee)||isNaN(Ne)||isNaN(He)||!On(ot))throw new Error("Invalid arguments passed to jsPDF.ellipse");var yt=4/3*(Math.SQRT2-1)*Ne,Ot=4/3*(Math.SQRT2-1)*He;return vi(C+Ne,ee),js(C+Ne,ee-Ot,C+yt,ee-He,C,ee-He),js(C-yt,ee-He,C-Ne,ee-Ot,C-Ne,ee),js(C-Ne,ee+Ot,C-yt,ee+He,C,ee+He),js(C+yt,ee+He,C+Ne,ee+Ot,C+Ne,ee),Dr(ot),this},x.__private__.circle=x.circle=function(C,ee,Ne,He){if(isNaN(C)||isNaN(ee)||isNaN(Ne)||!On(He))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(C,ee,Ne,Ne,He)},x.setFont=function(C,ee,Ne){return Ne&&(ee=Pe(ee,Ne)),Xt=bs(C,ee,{disableWarning:!1}),this};var Qa=x.__private__.getFont=x.getFont=function(){return Ct[bs.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var C,ee,Ne={};for(C in nn)if(nn.hasOwnProperty(C))for(ee in Ne[C]=[],nn[C])nn[C].hasOwnProperty(ee)&&Ne[C].push(ee);return Ne},x.addFont=function(C,ee,Ne,He,ot){var yt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&yt.indexOf(arguments[3])!==-1?ot=arguments[3]:arguments[3]&&yt.indexOf(arguments[3])==-1&&(Ne=Pe(Ne,He)),ot=ot||"Identity-H",Po.call(this,C,ee,Ne,ot)};var Ao,ta=e.lineWidth||.200025,io=x.__private__.getLineWidth=x.getLineWidth=function(){return ta},Mo=x.__private__.setLineWidth=x.setLineWidth=function(C){return ta=C,ie(Ce(H(C))+" w"),this};x.__private__.setLineDash=_n.API.setLineDash=_n.API.setLineDashPattern=function(C,ee){if(C=C||[],ee=ee||0,isNaN(ee)||!Array.isArray(C))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return C=C.map(function(Ne){return Ce(H(Ne))}).join(" "),ee=Ce(H(ee)),ie("["+C+"] "+ee+" d"),this};var Sa=x.__private__.getLineHeight=x.getLineHeight=function(){return De*Ao};x.__private__.getLineHeight=x.getLineHeight=function(){return De*Ao};var Bn=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function(C){return typeof(C=C||1.15)=="number"&&(Ao=C),this},Ea=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return Ao};Bn(e.lineHeight);var un=x.__private__.getHorizontalCoordinate=function(C){return H(C)},nr=x.__private__.getVerticalCoordinate=function(C){return ae===ne.ADVANCED?C:Tt[G].mediaBox.topRightY-Tt[G].mediaBox.bottomLeftY-H(C)},Bo=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function(C){return Ce(un(C))},ro=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function(C){return Ce(nr(C))},fr=e.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return Lr(fr)},x.__private__.setStrokeColor=x.setDrawColor=function(C,ee,Ne,He){return fr=Tr({ch1:C,ch2:ee,ch3:Ne,ch4:He,pdfColorType:"draw",precision:2}),ie(fr),this};var Aa=e.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return Lr(Aa)},x.__private__.setFillColor=x.setFillColor=function(C,ee,Ne,He){return Aa=Tr({ch1:C,ch2:ee,ch3:Ne,ch4:He,pdfColorType:"fill",precision:2}),ie(Aa),this};var ws=e.textColor||"0 g",na=x.__private__.getTextColor=x.getTextColor=function(){return Lr(ws)};x.__private__.setTextColor=x.setTextColor=function(C,ee,Ne,He){return ws=Tr({ch1:C,ch2:ee,ch3:Ne,ch4:He,pdfColorType:"text",precision:3}),this};var ia=e.charSpace,Or=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(ia||0)};x.__private__.setCharSpace=x.setCharSpace=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ia=C,this};var ra=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function(C){var ee=x.CapJoinStyles[C];if(ee===void 0)throw new Error("Line cap style of '"+C+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ra=ee,ie(ee+" J"),this};var Ei=0;x.__private__.setLineJoin=x.setLineJoin=function(C){var ee=x.CapJoinStyles[C];if(ee===void 0)throw new Error("Line join style of '"+C+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ei=ee,ie(ee+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function(C){if(C=C||0,isNaN(C))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ie(Ce(H(C))+" M"),this},x.GState=Ah,x.setGState=function(C){(C=typeof C=="string"?In[fi[C]]:el(null,C)).equals(xi)||(ie("/"+C.id+" gs"),xi=C)};var el=function(C,ee){if(!C||!fi[C]){var Ne=!1;for(var He in In)if(In.hasOwnProperty(He)&&In[He].equals(ee)){Ne=!0;break}if(Ne)ee=In[He];else{var ot="GS"+(Object.keys(In).length+1).toString(10);In[ot]=ee,ee.id=ot}return C&&(fi[C]=ee.id),Dt.publish("addGState",ee),ee}};x.addGState=function(C,ee){return el(C,ee),this},x.saveGraphicsState=function(){return ie("q"),Vt.push({key:Xt,size:De,color:ws}),this},x.restoreGraphicsState=function(){ie("Q");var C=Vt.pop();return Xt=C.key,De=C.size,ws=C.color,xi=null,this},x.setCurrentTransformationMatrix=function(C){return ie(C.toString()+" cm"),this},x.comment=function(C){return ie("#"+C),this};var To=function(C,ee){var Ne=C||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ne},set:function(yt){isNaN(yt)||(Ne=parseFloat(yt))}});var He=ee||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return He},set:function(yt){isNaN(yt)||(He=parseFloat(yt))}});var ot="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ot},set:function(yt){ot=yt.toString()}}),this},Rr=function(C,ee,Ne,He){To.call(this,C,ee),this.type="rect";var ot=Ne||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ot},set:function(Ot){isNaN(Ot)||(ot=parseFloat(Ot))}});var yt=He||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return yt},set:function(Ot){isNaN(Ot)||(yt=parseFloat(Ot))}}),this},sa=function(){this.page=Kn,this.currentPage=G,this.pages=$e.slice(0),this.pagesContext=Tt.slice(0),this.x=on,this.y=dn,this.matrix=ai,this.width=so(G),this.height=oo(G),this.outputDestination=se,this.id="",this.objectNumber=-1};sa.prototype.restore=function(){Kn=this.page,G=this.currentPage,Tt=this.pagesContext,$e=this.pages,on=this.x,dn=this.y,ai=this.matrix,No(G,this.width),_i(G,this.height),se=this.outputDestination};var Ma=function(C,ee,Ne,He,ot){Mr.push(new sa),Kn=G=0,$e=[],on=C,dn=ee,ai=ot,Zi([Ne,He])},Ba=function(C){if(ms[C])Mr.pop().restore();else{var ee=new sa,Ne="Xo"+(Object.keys(qn).length+1).toString(10);ee.id=Ne,ms[C]=Ne,qn[Ne]=ee,Dt.publish("addFormObject",ee),Mr.pop().restore()}};for(var oa in x.beginFormObject=function(C,ee,Ne,He,ot){return Ma(C,ee,Ne,He,ot),this},x.endFormObject=function(C){return Ba(C),this},x.doFormObject=function(C,ee){var Ne=qn[ms[C]];return ie("q"),ie(ee.toString()+" cm"),ie("/"+Ne.id+" Do"),ie("Q"),this},x.getFormObject=function(C){var ee=qn[ms[C]];return{x:ee.x,y:ee.y,width:ee.width,height:ee.height,matrix:ee.matrix}},x.save=function(C,ee){return C=C||"generated.pdf",(ee=ee||{}).returnPromise=ee.returnPromise||!1,ee.returnPromise===!1?(Hl(Is(Qr()),C),typeof Hl.unload=="function"&&bn.setTimeout&&setTimeout(Hl.unload,911),this):new Promise(function(Ne,He){try{var ot=Hl(Is(Qr()),C);typeof Hl.unload=="function"&&bn.setTimeout&&setTimeout(Hl.unload,911),Ne(ot)}catch(yt){He(yt.message)}})},_n.API)_n.API.hasOwnProperty(oa)&&(oa==="events"&&_n.API.events.length?function(C,ee){var Ne,He,ot;for(ot=ee.length-1;ot!==-1;ot--)Ne=ee[ot][0],He=ee[ot][1],C.subscribe.apply(C,[Ne].concat(typeof He=="function"?[He]:He))}(Dt,_n.API.events):x[oa]=_n.API[oa]);var so=x.getPageWidth=function(C){return(Tt[C=C||G].mediaBox.topRightX-Tt[C].mediaBox.bottomLeftX)/Rt},No=x.setPageWidth=function(C,ee){Tt[C].mediaBox.topRightX=ee*Rt+Tt[C].mediaBox.bottomLeftX},oo=x.getPageHeight=function(C){return(Tt[C=C||G].mediaBox.topRightY-Tt[C].mediaBox.bottomLeftY)/Rt},_i=x.setPageHeight=function(C,ee){Tt[C].mediaBox.topRightY=ee*Rt+Tt[C].mediaBox.bottomLeftY};return x.internal={pdfEscape:Fi,getStyle:ka,getFont:Qa,getFontSize:lt,getCharSpace:Or,getTextColor:na,getLineHeight:Sa,getLineHeightFactor:Ea,getLineWidth:io,write:We,getHorizontalCoordinate:un,getVerticalCoordinate:nr,getCoordinateString:Bo,getVerticalCoordinateString:ro,collections:{},newObject:Vn,newAdditionalObject:wo,newObjectDeferred:Ht,newObjectDeferredBegin:hr,getFilters:tr,putStream:Cr,events:Dt,scaleFactor:Rt,pageSize:{getWidth:function(){return so(G)},setWidth:function(C){No(G,C)},getHeight:function(){return oo(G)},setHeight:function(C){_i(G,C)}},encryptionOptions:w,encryption:Si,getEncryptor:Xa,output:to,getNumberOfPages:di,pages:$e,out:ie,f2:Ue,f3:q,getPageInfo:Qo,getPageInfoByObjId:yn,getCurrentPageInfo:xn,getPDFVersion:N,Point:To,Rectangle:Rr,Matrix:cn,hasHotfix:Xo},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return so(G)},set:function(C){No(G,C)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return oo(G)},set:function(C){_i(G,C)},enumerable:!0,configurable:!0}),Cn.call(x,Xe),Xt="F1",Ya(o,n),Dt.publish("initialized"),x}Lu.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Lu.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Lu.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},Lu.prototype.processOwnerPassword=function(e,t){return Pd(kd(t).substr(0,5),e)},Lu.prototype.encryptor=function(e,t){var n=kd(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return Pd(n,r)}},Ah.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||oi(e)!==oi(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return r===0},_n.API={events:[]},_n.version="3.0.0";var Ii=_n.API,ip=1,ou=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_u=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Sn=function(e){return e.toFixed(2)},pl=function(e){return e.toFixed(5)};Ii.__acroform__={};var Ns=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},sm=function(e){return e*ip},fa=function(e){var t=new W1,n=en.internal.getHeight(e)||0,r=en.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Sn(r)),Number(Sn(n))],t},$L=Ii.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},VL=Ii.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},HL=Ii.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},qi=Ii.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return HL(e,t-1)},$i=Ii.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return $L(e,t-1)},Vi=Ii.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return VL(e,t-1)},GL=Ii.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,o=e[0],a=e[1],u=e[2],f=e[3],m={};return m.lowerLeft_X=n(o)||0,m.lowerLeft_Y=r(a+f)||0,m.upperRight_X=n(o+u)||0,m.upperRight_Y=r(a)||0,[Number(Sn(m.lowerLeft_X)),Number(Sn(m.lowerLeft_Y)),Number(Sn(m.upperRight_X)),Number(Sn(m.upperRight_Y))]},WL=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=Sd(e,n),o=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+o+" "+Sn(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var a=fa(e);return a.scope=e.scope,a.stream=t.join(`
`),a}},Sd=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},o=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");o=e.multiline?o.map(function(q){return q.split(`
`)}):o.map(function(q){return[q]});var a=n,u=en.internal.getHeight(e)||0;u=u<0?-u:u;var f=en.internal.getWidth(e)||0;f=f<0?-f:f;var m=function(q,H,Se){if(q+1<o.length){var M=H+" "+o[q+1][0];return Yc(M,e,Se).width<=f-4}return!1};a++;e:for(;a>0;){t="",a--;var _,w,b=Yc("3",e,a).height,E=e.multiline?u-a:(u-b)/2,x=E+=2,F=0,N=0,U=0;if(a<=0){t=`(...) Tj
`,t+="% Width of Text: "+Yc(t,e,a=12).width+", FieldWidth:"+f+`
`;break}for(var j="",ne=0,ae=0;ae<o.length;ae++)if(o.hasOwnProperty(ae)){var be=!1;if(o[ae].length!==1&&U!==o[ae].length-1){if((b+2)*(ne+2)+2>u)continue e;j+=o[ae][U],be=!0,N=ae,ae--}else{j=(j+=o[ae][U]+" ").substr(j.length-1)==" "?j.substr(0,j.length-1):j;var ye=parseInt(ae),Pe=m(ye,j,a),Ce=ae>=o.length-1;if(Pe&&!Ce){j+=" ",U=0;continue}if(Pe||Ce){if(Ce)N=ye;else if(e.multiline&&(b+2)*(ne+2)+2>u)continue e}else{if(!e.multiline||(b+2)*(ne+2)+2>u)continue e;N=ye}}for(var de="",Be=F;Be<=N;Be++){var Ue=o[Be];if(e.multiline){if(Be===N){de+=Ue[U]+" ",U=(U+1)%Ue.length;continue}if(Be===F){de+=Ue[Ue.length-1]+" ";continue}}de+=Ue[0]+" "}switch(de=de.substr(de.length-1)==" "?de.substr(0,de.length-1):de,w=Yc(de,e,a).width,e.textAlign){case"right":_=f-w-2;break;case"center":_=(f-w)/2;break;case"left":default:_=2}t+=Sn(_)+" "+Sn(x)+` Td
`,t+="("+ou(de)+`) Tj
`,t+=-Sn(_)+` 0 Td
`,x=-(a+2),w=0,F=be?N:N+1,ne++,j=""}break}return r.text=t,r.fontSize=a,r},Yc=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),o=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:o}},ZL={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},KL=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},JL=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,o=e[n];t.internal.newObjectDeferredBegin(o.objId,!0),oi(o)==="object"&&typeof o.putStream=="function"&&o.putStream(),delete e[r]}},YL=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Go.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(ZL)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");ip=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new Z1,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];a.objId=void 0,a.hasAnnotation&&KL(a,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(r,o){var a=!r;for(var u in r||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(u)){var f=r[u],m=[],_=f.Rect;if(f.Rect&&(f.Rect=GL(f.Rect,o)),o.internal.newObjectDeferredBegin(f.objId,!0),f.DA=en.createDefaultAppearanceStream(f),oi(f)==="object"&&typeof f.getKeyValueListForStream=="function"&&(m=f.getKeyValueListForStream()),f.Rect=_,f.hasAppearanceStream&&!f.appearanceStreamContent){var w=WL(f);m.push({key:"AP",value:"<</N "+w+">>"}),o.internal.acroformPlugin.xForms.push(w)}if(f.appearanceStreamContent){var b="";for(var E in f.appearanceStreamContent)if(f.appearanceStreamContent.hasOwnProperty(E)){var x=f.appearanceStreamContent[E];if(b+="/"+E+" ",b+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var u in x)if(x.hasOwnProperty(u)){var F=x[u];typeof F=="function"&&(F=F.call(o,f)),b+="/"+u+" "+F+" ",o.internal.acroformPlugin.xForms.indexOf(F)>=0||o.internal.acroformPlugin.xForms.push(F)}}else typeof(F=x)=="function"&&(F=F.call(o,f)),b+="/"+u+" "+F,o.internal.acroformPlugin.xForms.indexOf(F)>=0||o.internal.acroformPlugin.xForms.push(F);b+=">>"}m.push({key:"AP",value:`<<
`+b+">>"})}o.internal.putStream({additionalKeyValues:m,objectId:f.objId}),o.internal.out("endobj")}a&&JL(o.internal.acroformPlugin.xForms,o)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},G1=Ii.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(u){return u};if(Array.isArray(e)){for(var o="[",a=0;a<e.length;a++)switch(a!==0&&(o+=" "),oi(e[a])){case"boolean":case"number":case"object":o+=e[a].toString();break;case"string":e[a].substr(0,1)!=="/"?(t!==void 0&&n&&(r=n.internal.getEncryptor(t)),o+="("+ou(r(e[a].toString()))+")"):o+=e[a].toString()}return o+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Vf=function(e,t,n){var r=function(o){return o};return t!==void 0&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),e="("+ou(r(e))+")"},ga=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ga.prototype.toString=function(){return this.objId+" 0 R"},ga.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},ga.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var r=t[n],o=this[r];o&&(Array.isArray(o)?e.push({key:r,value:G1(o,this.objId,this.scope)}):o instanceof ga?(o.scope=this.scope,e.push({key:r,value:o.objId+" 0 R"})):typeof o!="function"&&e.push({key:r,value:o}))}return e};var W1=function(){ga.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};Ns(W1,ga);var Z1=function(){ga.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+ou(n(e))+")"}},set:function(n){e=n}})};Ns(Z1,ga);var Go=function e(){ga.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute F supplied.');t=j}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!qi(t,3)},set:function(j){j?this.F=$i(t,3):this.F=Vi(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute Ff supplied.');n=j}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(j){r=j!==void 0?j:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(j){r[0]=j}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(j){r[1]=j}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(j){r[2]=j}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(j){r[3]=j}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(j){switch(j){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=j;break;default:throw new Error('Invalid value "'+j+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Mh)return;a="FieldObject"+e.FieldNum++}var j=function(ne){return ne};return this.scope&&(j=this.scope.internal.getEncryptor(this.objId)),"("+ou(j(a))+")"},set:function(j){a=j.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(j){a=j}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(j){u=j}});var f="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return f},set:function(j){f=j}});var m=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return m},set:function(j){m=j}});var _=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return _===void 0?50/ip:_},set:function(j){_=j}});var w="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return w},set:function(j){w=j}});var b="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!b||this instanceof Mh||this instanceof tu))return Vf(b,this.objId,this.scope)},set:function(j){j=j.toString(),b=j}});var E=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(E)return this instanceof br?E:Vf(E,this.objId,this.scope)},set:function(j){j=j.toString(),E=this instanceof br?j:j.substr(0,1)==="("?_u(j.substr(1,j.length-2)):_u(j)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof br?_u(E.substr(1,E.length-1)):E},set:function(j){j=j.toString(),E=this instanceof br?"/"+j:j}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(j){this.V=j}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof br?x:Vf(x,this.objId,this.scope)},set:function(j){j=j.toString(),x=this instanceof br?j:j.substr(0,1)==="("?_u(j.substr(1,j.length-2)):_u(j)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof br?_u(x.substr(1,x.length-1)):x},set:function(j){j=j.toString(),x=this instanceof br?"/"+j:j}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var F,N=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return N},set:function(j){j=!!j,N=j}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(F)return F},set:function(j){F=j}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,1)},set:function(j){j?this.Ff=$i(this.Ff,1):this.Ff=Vi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,2)},set:function(j){j?this.Ff=$i(this.Ff,2):this.Ff=Vi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,3)},set:function(j){j?this.Ff=$i(this.Ff,3):this.Ff=Vi(this.Ff,3)}});var U=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(U!==null)return U},set:function(j){if([0,1,2].indexOf(j)===-1)throw new Error('Invalid value "'+j+'" for attribute Q supplied.');U=j}}),Object.defineProperty(this,"textAlign",{get:function(){var j;switch(U){case 0:default:j="left";break;case 1:j="center";break;case 2:j="right"}return j},configurable:!0,enumerable:!0,set:function(j){switch(j){case"right":case 2:U=2;break;case"center":case 1:U=1;break;case"left":case 0:default:U=0}}})};Ns(Go,ga);var Mu=function(){Go.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return G1(t,this.objId,this.scope)},set:function(n){var r,o;o=[],typeof(r=n)=="string"&&(o=function(a,u,f){f||(f=1);for(var m,_=[];m=u.exec(a);)_.push(m[f]);return _}(r,/\((.*?)\)/g)),t=o}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,18)},set:function(n){n?this.Ff=$i(this.Ff,18):this.Ff=Vi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=$i(this.Ff,19):this.Ff=Vi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,20)},set:function(n){n?(this.Ff=$i(this.Ff,20),t.sort()):this.Ff=Vi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,22)},set:function(n){n?this.Ff=$i(this.Ff,22):this.Ff=Vi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,23)},set:function(n){n?this.Ff=$i(this.Ff,23):this.Ff=Vi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,27)},set:function(n){n?this.Ff=$i(this.Ff,27):this.Ff=Vi(this.Ff,27)}}),this.hasAppearanceStream=!1};Ns(Mu,Go);var Bu=function(){Mu.call(this),this.fontName="helvetica",this.combo=!1};Ns(Bu,Mu);var Tu=function(){Bu.call(this),this.combo=!0};Ns(Tu,Bu);var uh=function(){Tu.call(this),this.edit=!0};Ns(uh,Tu);var br=function(){Go.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,15)},set:function(n){n?this.Ff=$i(this.Ff,15):this.Ff=Vi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,16)},set:function(n){n?this.Ff=$i(this.Ff,16):this.Ff=Vi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,17)},set:function(n){n?this.Ff=$i(this.Ff,17):this.Ff=Vi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,26)},set:function(n){n?this.Ff=$i(this.Ff,26):this.Ff=Vi(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(a){return a};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,o=[];for(r in o.push("<<"),t)o.push("/"+r+" ("+ou(n(t[r]))+")");return o.push(">>"),o.join(`
`)}},set:function(n){oi(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};Ns(br,Go);var ch=function(){br.call(this),this.pushButton=!0};Ns(ch,br);var Nu=function(){br.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Ns(Nu,br);var Mh=function(){var e,t;Go.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(o){e=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(o){t=o}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(f){return f};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var a,u=[];for(a in u.push("<<"),r)u.push("/"+a+" ("+ou(o(r[a]))+")");return u.push(">>"),u.join(`
`)},set:function(o){oi(o)==="object"&&(r=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(o){typeof o=="string"&&(r.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(o){n="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=en.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ns(Mh,Go),Nu.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},Nu.prototype.createOption=function(e){var t=new Mh;return t.Parent=this,t.optionName=e,this.Kids.push(t),XL.call(this.scope,t),t};var hh=function(){br.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=en.CheckBox.createAppearanceStream()};Ns(hh,br);var tu=function(){Go.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,13)},set:function(t){t?this.Ff=$i(this.Ff,13):this.Ff=Vi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,21)},set:function(t){t?this.Ff=$i(this.Ff,21):this.Ff=Vi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,23)},set:function(t){t?this.Ff=$i(this.Ff,23):this.Ff=Vi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,24)},set:function(t){t?this.Ff=$i(this.Ff,24):this.Ff=Vi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,25)},set:function(t){t?this.Ff=$i(this.Ff,25):this.Ff=Vi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,26)},set:function(t){t?this.Ff=$i(this.Ff,26):this.Ff=Vi(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ns(tu,Go);var fh=function(){tu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,14)},set:function(e){e?this.Ff=$i(this.Ff,14):this.Ff=Vi(this.Ff,14)}}),this.password=!0};Ns(fh,tu);var en={CheckBox:{createAppearanceStream:function(){return{N:{On:en.CheckBox.YesNormal},D:{On:en.CheckBox.YesPushDown,Off:en.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=fa(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,o=e.scope.__private__.encodeColorString(e.color),a=Sd(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+Sn(en.internal.getWidth(e))+" "+Sn(en.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Sn(a.fontSize)+" Tf "+o),n.push("BT"),n.push(a.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=fa(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),o=[],a=en.internal.getHeight(e),u=en.internal.getWidth(e),f=Sd(e,e.caption);return o.push("1 g"),o.push("0 0 "+Sn(u)+" "+Sn(a)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+Sn(u-1)+" "+Sn(a-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+n+" "+Sn(f.fontSize)+" Tf "+r),o.push(f.text),o.push("ET"),o.push("Q"),t.stream=o.join(`
`),t},OffPushDown:function(e){var t=fa(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Sn(en.internal.getWidth(e))+" "+Sn(en.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:en.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=en.RadioButton.Circle.YesNormal,t.D[e]=en.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=fa(e);t.scope=e.scope;var n=[],r=en.internal.getWidth(e)<=en.internal.getHeight(e)?en.internal.getWidth(e)/4:en.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var o=en.internal.Bezier_C,a=Number((r*o).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+pl(en.internal.getWidth(e)/2)+" "+pl(en.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=fa(e);t.scope=e.scope;var n=[],r=en.internal.getWidth(e)<=en.internal.getHeight(e)?en.internal.getWidth(e)/4:en.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),a=Number((o*en.internal.Bezier_C).toFixed(5)),u=Number((r*en.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+pl(en.internal.getWidth(e)/2)+" "+pl(en.internal.getHeight(e)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+a+" "+a+" "+o+" 0 "+o+" c"),n.push("-"+a+" "+o+" -"+o+" "+a+" -"+o+" 0 c"),n.push("-"+o+" -"+a+" -"+a+" -"+o+" 0 -"+o+" c"),n.push(a+" -"+o+" "+o+" -"+a+" "+o+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+pl(en.internal.getWidth(e)/2)+" "+pl(en.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+u+" "+u+" "+r+" 0 "+r+" c"),n.push("-"+u+" "+r+" -"+r+" "+u+" -"+r+" 0 c"),n.push("-"+r+" -"+u+" -"+u+" -"+r+" 0 -"+r+" c"),n.push(u+" -"+r+" "+r+" -"+u+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=fa(e);t.scope=e.scope;var n=[],r=en.internal.getWidth(e)<=en.internal.getHeight(e)?en.internal.getWidth(e)/4:en.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),a=Number((o*en.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+pl(en.internal.getWidth(e)/2)+" "+pl(en.internal.getHeight(e)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+a+" "+a+" "+o+" 0 "+o+" c"),n.push("-"+a+" "+o+" -"+o+" "+a+" -"+o+" 0 c"),n.push("-"+o+" -"+a+" -"+a+" -"+o+" 0 -"+o+" c"),n.push(a+" -"+o+" "+o+" -"+a+" "+o+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:en.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=en.RadioButton.Cross.YesNormal,t.D[e]=en.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=fa(e);t.scope=e.scope;var n=[],r=en.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+Sn(en.internal.getWidth(e)-2)+" "+Sn(en.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Sn(r.x1.x)+" "+Sn(r.x1.y)+" m"),n.push(Sn(r.x2.x)+" "+Sn(r.x2.y)+" l"),n.push(Sn(r.x4.x)+" "+Sn(r.x4.y)+" m"),n.push(Sn(r.x3.x)+" "+Sn(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=fa(e);t.scope=e.scope;var n=en.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+Sn(en.internal.getWidth(e))+" "+Sn(en.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Sn(en.internal.getWidth(e)-2)+" "+Sn(en.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Sn(n.x1.x)+" "+Sn(n.x1.y)+" m"),r.push(Sn(n.x2.x)+" "+Sn(n.x2.y)+" l"),r.push(Sn(n.x4.x)+" "+Sn(n.x4.y)+" m"),r.push(Sn(n.x3.x)+" "+Sn(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=fa(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Sn(en.internal.getWidth(e))+" "+Sn(en.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};en.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=en.internal.getWidth(e),n=en.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},en.internal.getWidth=function(e){var t=0;return oi(e)==="object"&&(t=sm(e.Rect[2])),t},en.internal.getHeight=function(e){var t=0;return oi(e)==="object"&&(t=sm(e.Rect[3])),t};var XL=Ii.addField=function(e){if(YL(this,e),!(e instanceof Go))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Ii.AcroFormChoiceField=Mu,Ii.AcroFormListBox=Bu,Ii.AcroFormComboBox=Tu,Ii.AcroFormEditBox=uh,Ii.AcroFormButton=br,Ii.AcroFormPushButton=ch,Ii.AcroFormRadioButton=Nu,Ii.AcroFormCheckBox=hh,Ii.AcroFormTextField=tu,Ii.AcroFormPasswordField=fh,Ii.AcroFormAppearance=en,Ii.AcroForm={ChoiceField:Mu,ListBox:Bu,ComboBox:Tu,EditBox:uh,Button:br,PushButton:ch,RadioButton:Nu,CheckBox:hh,TextField:tu,PasswordField:fh,Appearance:en},_n.AcroForm={ChoiceField:Mu,ListBox:Bu,ComboBox:Tu,EditBox:uh,Button:br,PushButton:ch,RadioButton:Nu,CheckBox:hh,TextField:tu,PasswordField:fh,Appearance:en};_n.AcroForm;function K1(e){return e.reduce(function(t,n,r){return t[n]=r,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(q,H){var Se,M,Y,Z,re,W=t;if((H=H||t)==="RGBA"||q.data!==void 0&&q.data instanceof Uint8ClampedArray&&"height"in q&&"width"in q)return"RGBA";if(Pe(q))for(re in n)for(Y=n[re],Se=0;Se<Y.length;Se+=1){for(Z=!0,M=0;M<Y[Se].length;M+=1)if(Y[Se][M]!==void 0&&Y[Se][M]!==q[M]){Z=!1;break}if(Z===!0){W=re;break}}else for(re in n)for(Y=n[re],Se=0;Se<Y.length;Se+=1){for(Z=!0,M=0;M<Y[Se].length;M+=1)if(Y[Se][M]!==void 0&&Y[Se][M]!==q.charCodeAt(M)){Z=!1;break}if(Z===!0){W=re;break}}return W===t&&H!==t&&(W=H),W},o=function q(H){for(var Se=this.internal.write,M=this.internal.putStream,Y=(0,this.internal.getFilters)();Y.indexOf("FlateEncode")!==-1;)Y.splice(Y.indexOf("FlateEncode"),1);H.objectId=this.internal.newObject();var Z=[];if(Z.push({key:"Type",value:"/XObject"}),Z.push({key:"Subtype",value:"/Image"}),Z.push({key:"Width",value:H.width}),Z.push({key:"Height",value:H.height}),H.colorSpace===U.INDEXED?Z.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(H.palette.length/3-1)+" "+("sMask"in H&&H.sMask!==void 0?H.objectId+2:H.objectId+1)+" 0 R]"}):(Z.push({key:"ColorSpace",value:"/"+H.colorSpace}),H.colorSpace===U.DEVICE_CMYK&&Z.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Z.push({key:"BitsPerComponent",value:H.bitsPerComponent}),"decodeParameters"in H&&H.decodeParameters!==void 0&&Z.push({key:"DecodeParms",value:"<<"+H.decodeParameters+">>"}),"transparency"in H&&Array.isArray(H.transparency)){for(var re="",W=0,Q=H.transparency.length;W<Q;W++)re+=H.transparency[W]+" "+H.transparency[W]+" ";Z.push({key:"Mask",value:"["+re+"]"})}H.sMask!==void 0&&Z.push({key:"SMask",value:H.objectId+1+" 0 R"});var z=H.filter!==void 0?["/"+H.filter]:void 0;if(M({data:H.data,additionalKeyValues:Z,alreadyAppliedFilters:z,objectId:H.objectId}),Se("endobj"),"sMask"in H&&H.sMask!==void 0){var Ie="/Predictor "+H.predictor+" /Colors 1 /BitsPerComponent "+H.bitsPerComponent+" /Columns "+H.width,I={width:H.width,height:H.height,colorSpace:"DeviceGray",bitsPerComponent:H.bitsPerComponent,decodeParameters:Ie,data:H.sMask};"filter"in H&&(I.filter=H.filter),q.call(this,I)}if(H.colorSpace===U.INDEXED){var G=this.internal.newObject();M({data:de(new Uint8Array(H.palette)),objectId:G}),Se("endobj")}},a=function(){var q=this.internal.collections.addImage_images;for(var H in q)o.call(this,q[H])},u=function(){var q,H=this.internal.collections.addImage_images,Se=this.internal.write;for(var M in H)Se("/I"+(q=H[M]).index,q.objectId,"0","R")},f=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",u))},m=function(){var q=this.internal.collections.addImage_images;return f.call(this),q},_=function(){return Object.keys(this.internal.collections.addImage_images).length},w=function(q){return typeof e["process"+q.toUpperCase()]=="function"},b=function(q){return oi(q)==="object"&&q.nodeType===1},E=function(q,H){if(q.nodeName==="IMG"&&q.hasAttribute("src")){var Se=""+q.getAttribute("src");if(Se.indexOf("data:image/")===0)return dc(unescape(Se).split("base64,").pop());var M=e.loadFile(Se,!0);if(M!==void 0)return M}if(q.nodeName==="CANVAS"){if(q.width===0||q.height===0)throw new Error("Given canvas must have data. Canvas width: "+q.width+", height: "+q.height);var Y;switch(H){case"PNG":Y="image/png";break;case"WEBP":Y="image/webp";break;case"JPEG":case"JPG":default:Y="image/jpeg"}return dc(q.toDataURL(Y,1).split("base64,").pop())}},x=function(q){var H=this.internal.collections.addImage_images;if(H){for(var Se in H)if(q===H[Se].alias)return H[Se]}},F=function(q,H,Se){return q||H||(q=-96,H=-96),q<0&&(q=-1*Se.width*72/q/this.internal.scaleFactor),H<0&&(H=-1*Se.height*72/H/this.internal.scaleFactor),q===0&&(q=H*Se.width/Se.height),H===0&&(H=q*Se.height/Se.width),[q,H]},N=function(q,H,Se,M,Y,Z){var re=F.call(this,Se,M,Y),W=this.internal.getCoordinateString,Q=this.internal.getVerticalCoordinateString,z=m.call(this);if(Se=re[0],M=re[1],z[Y.index]=Y,Z){Z*=Math.PI/180;var Ie=Math.cos(Z),I=Math.sin(Z),G=function(D){return D.toFixed(4)},$=[G(Ie),G(I),G(-1*I),G(Ie),0,0,"cm"]}this.internal.write("q"),Z?(this.internal.write([1,"0","0",1,W(q),Q(H+M),"cm"].join(" ")),this.internal.write($.join(" ")),this.internal.write([W(Se),"0","0",W(M),"0","0","cm"].join(" "))):this.internal.write([W(Se),"0","0",W(M),W(q),Q(H+M),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Y.index+" Do"),this.internal.write("Q")},U=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var j=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},ne=e.__addimage__.sHashCode=function(q){var H,Se,M=0;if(typeof q=="string")for(Se=q.length,H=0;H<Se;H++)M=(M<<5)-M+q.charCodeAt(H),M|=0;else if(Pe(q))for(Se=q.byteLength/2,H=0;H<Se;H++)M=(M<<5)-M+q[H],M|=0;return M},ae=e.__addimage__.validateStringAsBase64=function(q){(q=q||"").toString().trim();var H=!0;return q.length===0&&(H=!1),q.length%4!=0&&(H=!1),/^[A-Za-z0-9+/]+$/.test(q.substr(0,q.length-2))===!1&&(H=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(q.substr(-2))===!1&&(H=!1),H},be=e.__addimage__.extractImageFromDataUrl=function(q){var H=(q=q||"").split("base64,"),Se=null;if(H.length===2){var M=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(H[0]);Array.isArray(M)&&(Se={mimeType:M[1],charset:M[2],data:H[1]})}return Se},ye=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(q){return ye()&&q instanceof ArrayBuffer};var Pe=e.__addimage__.isArrayBufferView=function(q){return ye()&&typeof Uint32Array<"u"&&(q instanceof Int8Array||q instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&q instanceof Uint8ClampedArray||q instanceof Int16Array||q instanceof Uint16Array||q instanceof Int32Array||q instanceof Uint32Array||q instanceof Float32Array||q instanceof Float64Array)},Ce=e.__addimage__.binaryStringToUint8Array=function(q){for(var H=q.length,Se=new Uint8Array(H),M=0;M<H;M++)Se[M]=q.charCodeAt(M);return Se},de=e.__addimage__.arrayBufferToBinaryString=function(q){for(var H="",Se=Pe(q)?q:new Uint8Array(q),M=0;M<Se.length;M+=8192)H+=String.fromCharCode.apply(null,Se.subarray(M,M+8192));return H};e.addImage=function(){var q,H,Se,M,Y,Z,re,W,Q;if(typeof arguments[1]=="number"?(H=t,Se=arguments[1],M=arguments[2],Y=arguments[3],Z=arguments[4],re=arguments[5],W=arguments[6],Q=arguments[7]):(H=arguments[1],Se=arguments[2],M=arguments[3],Y=arguments[4],Z=arguments[5],re=arguments[6],W=arguments[7],Q=arguments[8]),oi(q=arguments[0])==="object"&&!b(q)&&"imageData"in q){var z=q;q=z.imageData,H=z.format||H||t,Se=z.x||Se||0,M=z.y||M||0,Y=z.w||z.width||Y,Z=z.h||z.height||Z,re=z.alias||re,W=z.compression||W,Q=z.rotation||z.angle||Q}var Ie=this.internal.getFilters();if(W===void 0&&Ie.indexOf("FlateEncode")!==-1&&(W="SLOW"),isNaN(Se)||isNaN(M))throw new Error("Invalid coordinates passed to jsPDF.addImage");f.call(this);var I=Be.call(this,q,H,re,W);return N.call(this,Se,M,Y,Z,I,Q),this};var Be=function(q,H,Se,M){var Y,Z,re;if(typeof q=="string"&&r(q)===t){q=unescape(q);var W=Ue(q,!1);(W!==""||(W=e.loadFile(q,!0))!==void 0)&&(q=W)}if(b(q)&&(q=E(q,H)),H=r(q,H),!w(H))throw new Error("addImage does not support files of type '"+H+"', please ensure that a plugin for '"+H+"' support is added.");if(((re=Se)==null||re.length===0)&&(Se=function(Q){return typeof Q=="string"||Pe(Q)?ne(Q):Pe(Q.data)?ne(Q.data):null}(q)),(Y=x.call(this,Se))||(ye()&&(q instanceof Uint8Array||H==="RGBA"||(Z=q,q=Ce(q))),Y=this["process"+H.toUpperCase()](q,_.call(this),Se,function(Q){return Q&&typeof Q=="string"&&(Q=Q.toUpperCase()),Q in e.image_compression?Q:j.NONE}(M),Z)),!Y)throw new Error("An unknown error occurred whilst processing the image.");return Y},Ue=e.__addimage__.convertBase64ToBinaryString=function(q,H){var Se;H=typeof H!="boolean"||H;var M,Y="";if(typeof q=="string"){M=(Se=be(q))!==null?Se.data:q;try{Y=dc(M)}catch(Z){if(H)throw ae(M)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Z.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Y};e.getImageProperties=function(q){var H,Se,M="";if(b(q)&&(q=E(q)),typeof q=="string"&&r(q)===t&&((M=Ue(q,!1))===""&&(M=e.loadFile(q)||""),q=M),Se=r(q),!w(Se))throw new Error("addImage does not support files of type '"+Se+"', please ensure that a plugin for '"+Se+"' support is added.");if(!ye()||q instanceof Uint8Array||(q=Ce(q)),!(H=this["process"+Se.toUpperCase()](q)))throw new Error("An unknown error occurred whilst processing the image");return H.fileType=Se,H}})(_n.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};_n.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var r,o,a,u=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString,m=this.internal.getPageInfoByObjId(n.objId),_=n.pageContext.annotations,w=!1,b=0;b<_.length&&!w;b++)switch((r=_[b]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(w=!0);break;case"reference":case"text":case"freetext":w=!0}if(w!=0){this.internal.write("/Annots [");for(var E=0;E<_.length;E++){r=_[E];var x=this.internal.pdfEscape,F=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var N=this.internal.newAdditionalObject(),U=this.internal.newAdditionalObject(),j=this.internal.getEncryptor(N.objId),ne=r.title||"Note";a="<</Type /Annot /Subtype /Text "+(o="/Rect ["+u(r.bounds.x)+" "+f(r.bounds.y+r.bounds.h)+" "+u(r.bounds.x+r.bounds.w)+" "+f(r.bounds.y)+"] ")+"/Contents ("+x(j(r.contents))+")",a+=" /Popup "+U.objId+" 0 R",a+=" /P "+m.objId+" 0 R",a+=" /T ("+x(j(ne))+") >>",N.content=a;var ae=N.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+u(r.bounds.x+30)+" "+f(r.bounds.y+r.bounds.h)+" "+u(r.bounds.x+r.bounds.w+30)+" "+f(r.bounds.y)+"] ")+" /Parent "+ae,r.open&&(a+=" /Open true"),a+=" >>",U.content=a,this.internal.write(N.objId,"0 R",U.objId,"0 R");break;case"freetext":o="/Rect ["+u(r.bounds.x)+" "+f(r.bounds.y)+" "+u(r.bounds.x+r.bounds.w)+" "+f(r.bounds.y+r.bounds.h)+"] ";var be=r.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+x(F(r.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+be+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(r.options.name){var ye=this.annotations._nameMap[r.options.name];r.options.pageNumber=ye.page,r.options.top=ye.y}else r.options.top||(r.options.top=0);if(o="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",a="",r.options.url)a="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+x(F(r.options.url))+") >>";else if(r.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,a+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var Pe=f(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),a+=" /XYZ "+r.options.left+" "+Pe+" "+r.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},e.link=function(n,r,o,a,u){var f=this.internal.getCurrentPageInfo(),m=this.internal.getCoordinateString,_=this.internal.getVerticalCoordinateString;f.pageContext.annotations.push({finalBounds:{x:m(n),y:_(r),w:m(n+o),h:_(r+a)},options:u,type:"link"})},e.textWithLink=function(n,r,o,a){var u,f,m=this.getTextWidth(n),_=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){f=a.maxWidth;var w=this.splitTextToSize(n,f).length;u=Math.ceil(_*w)}else f=m,u=_;return this.text(n,r,o,a),o+=.2*_,a.align==="center"&&(r-=m/2),a.align==="right"&&(r-=m),this.link(r,o-_,f,u,a),m},e.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(_n.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];e.__arabicParser__={};var a=e.__arabicParser__.isInArabicSubstitutionA=function(N){return t[N.charCodeAt(0)]!==void 0},u=e.__arabicParser__.isArabicLetter=function(N){return typeof N=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(N)},f=e.__arabicParser__.isArabicEndLetter=function(N){return u(N)&&a(N)&&t[N.charCodeAt(0)].length<=2},m=e.__arabicParser__.isArabicAlfLetter=function(N){return u(N)&&o.indexOf(N.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(N){return u(N)&&a(N)&&t[N.charCodeAt(0)].length>=1};var _=e.__arabicParser__.arabicLetterHasFinalForm=function(N){return u(N)&&a(N)&&t[N.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(N){return u(N)&&a(N)&&t[N.charCodeAt(0)].length>=3};var w=e.__arabicParser__.arabicLetterHasMedialForm=function(N){return u(N)&&a(N)&&t[N.charCodeAt(0)].length==4},b=e.__arabicParser__.resolveLigatures=function(N){var U=0,j=n,ne="",ae=0;for(U=0;U<N.length;U+=1)j[N.charCodeAt(U)]!==void 0?(ae++,typeof(j=j[N.charCodeAt(U)])=="number"&&(ne+=String.fromCharCode(j),j=n,ae=0),U===N.length-1&&(j=n,ne+=N.charAt(U-(ae-1)),U-=ae-1,ae=0)):(j=n,ne+=N.charAt(U-ae),U-=ae,ae=0);return ne};e.__arabicParser__.isArabicDiacritic=function(N){return N!==void 0&&r[N.charCodeAt(0)]!==void 0};var E=e.__arabicParser__.getCorrectForm=function(N,U,j){return u(N)?a(N)===!1?-1:!_(N)||!u(U)&&!u(j)||!u(j)&&f(U)||f(N)&&!u(U)||f(N)&&m(U)||f(N)&&f(U)?0:w(N)&&u(U)&&!f(U)&&u(j)&&_(j)?3:f(N)||!u(j)?1:2:-1},x=function(N){var U=0,j=0,ne=0,ae="",be="",ye="",Pe=(N=N||"").split("\\s+"),Ce=[];for(U=0;U<Pe.length;U+=1){for(Ce.push(""),j=0;j<Pe[U].length;j+=1)ae=Pe[U][j],be=Pe[U][j-1],ye=Pe[U][j+1],u(ae)?(ne=E(ae,be,ye),Ce[U]+=ne!==-1?String.fromCharCode(t[ae.charCodeAt(0)][ne]):ae):Ce[U]+=ae;Ce[U]=b(Ce[U])}return Ce.join(" ")},F=e.__arabicParser__.processArabic=e.processArabic=function(){var N,U=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,j=[];if(Array.isArray(U)){var ne=0;for(j=[],ne=0;ne<U.length;ne+=1)Array.isArray(U[ne])?j.push([x(U[ne][0]),U[ne][1],U[ne][2]]):j.push([x(U[ne])]);N=j}else N=x(U);return typeof arguments[0]=="string"?N:(arguments[0].text=N,arguments[0])};e.events.push(["preProcessText",F])}(_n.API),_n.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(f){n=f}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(f){r=isNaN(f)||Number.isInteger(f)===!1||f<0?150:f,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(f){o=isNaN(f)||Number.isInteger(f)===!1||f<0?300:f,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(f){a=f}});var u={};Object.defineProperty(this,"style",{get:function(){return u},set:function(f){u=f}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,r){var o;if((n=n||"2d")!=="2d")return null;for(o in r)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=r[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(_n.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var m=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return m},set:function(N){m=N}});var _=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return _},set:function(N){_=N}});var w=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return w},set:function(N){w=N}});var b=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return b},set:function(N){b=N}});var E=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return E},set:function(N){E=N}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function(N){x=N}});var F=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return F},set:function(N){F=N}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(m){return r.call(this),this.internal.__cell__.headerFunction=typeof m=="function"?m:void 0,this},e.getTextDimensions=function(m,_){r.call(this);var w=(_=_||{}).fontSize||this.getFontSize(),b=_.font||this.getFont(),E=_.scaleFactor||this.internal.scaleFactor,x=0,F=0,N=0,U=this;if(!Array.isArray(m)&&typeof m!="string"){if(typeof m!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");m=String(m)}var j=_.maxWidth;j>0?typeof m=="string"?m=this.splitTextToSize(m,j):Object.prototype.toString.call(m)==="[object Array]"&&(m=m.reduce(function(ae,be){return ae.concat(U.splitTextToSize(be,j))},[])):m=Array.isArray(m)?m:[m];for(var ne=0;ne<m.length;ne++)x<(N=this.getStringUnitWidth(m[ne],{font:b})*w)&&(x=N);return x!==0&&(F=m.length),{w:x/=E,h:Math.max((F*w*this.getLineHeightFactor()-w*(this.getLineHeightFactor()-1))/E,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var m=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new a(m.left,m.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var u=e.cell=function(){var m;m=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var _=this.internal.__cell__.lastCell,w=this.internal.__cell__.padding,b=this.internal.__cell__.margins||t,E=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return _.lineNumber!==void 0&&(_.lineNumber===m.lineNumber?(m.x=(_.x||0)+(_.width||0),m.y=_.y||0):_.y+_.height+m.height+b.bottom>this.getPageHeight()?(this.cellAddPage(),m.y=b.top,x&&E&&(this.printHeaderRow(m.lineNumber,!0),m.y+=E[0].height)):m.y=_.y+_.height||m.y),m.text[0]!==void 0&&(this.rect(m.x,m.y,m.width,m.height,n===!0?"FD":void 0),m.align==="right"?this.text(m.text,m.x+m.width-w,m.y+w,{align:"right",baseline:"top"}):m.align==="center"?this.text(m.text,m.x+m.width/2,m.y+w,{align:"center",baseline:"top",maxWidth:m.width-w-w}):this.text(m.text,m.x+w,m.y+w,{align:"left",baseline:"top",maxWidth:m.width-w-w})),this.internal.__cell__.lastCell=m,this};e.table=function(m,_,w,b,E){if(r.call(this),!w)throw new Error("No data for PDF table.");var x,F,N,U,j=[],ne=[],ae=[],be={},ye={},Pe=[],Ce=[],de=(E=E||{}).autoSize||!1,Be=E.printHeaders!==!1,Ue=E.css&&E.css["font-size"]!==void 0?16*E.css["font-size"]:E.fontSize||12,q=E.margins||Object.assign({width:this.getPageWidth()},t),H=typeof E.padding=="number"?E.padding:3,Se=E.headerBackgroundColor||"#c8c8c8",M=E.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=Be,this.internal.__cell__.margins=q,this.internal.__cell__.table_font_size=Ue,this.internal.__cell__.padding=H,this.internal.__cell__.headerBackgroundColor=Se,this.internal.__cell__.headerTextColor=M,this.setFontSize(Ue),b==null)ne=j=Object.keys(w[0]),ae=j.map(function(){return"left"});else if(Array.isArray(b)&&oi(b[0])==="object")for(j=b.map(function(z){return z.name}),ne=b.map(function(z){return z.prompt||z.name||""}),ae=b.map(function(z){return z.align||"left"}),x=0;x<b.length;x+=1)ye[b[x].name]=b[x].width*(19.049976/25.4);else Array.isArray(b)&&typeof b[0]=="string"&&(ne=j=b,ae=j.map(function(){return"left"}));if(de||Array.isArray(b)&&typeof b[0]=="string")for(x=0;x<j.length;x+=1){for(be[U=j[x]]=w.map(function(z){return z[U]}),this.setFont(void 0,"bold"),Pe.push(this.getTextDimensions(ne[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),F=be[U],this.setFont(void 0,"normal"),N=0;N<F.length;N+=1)Pe.push(this.getTextDimensions(F[N],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ye[U]=Math.max.apply(null,Pe)+H+H,Pe=[]}if(Be){var Y={};for(x=0;x<j.length;x+=1)Y[j[x]]={},Y[j[x]].text=ne[x],Y[j[x]].align=ae[x];var Z=f.call(this,Y,ye);Ce=j.map(function(z){return new a(m,_,ye[z],Z,Y[z].text,void 0,Y[z].align)}),this.setTableHeaderRow(Ce),this.printHeaderRow(1,!1)}var re=b.reduce(function(z,Ie){return z[Ie.name]=Ie.align,z},{});for(x=0;x<w.length;x+=1){"rowStart"in E&&E.rowStart instanceof Function&&E.rowStart({row:x,data:w[x]},this);var W=f.call(this,w[x],ye);for(N=0;N<j.length;N+=1){var Q=w[x][j[N]];"cellStart"in E&&E.cellStart instanceof Function&&E.cellStart({row:x,col:N,data:Q},this),u.call(this,new a(m,_,ye[j[N]],W,Q,x+2,re[j[N]]))}}return this.internal.__cell__.table_x=m,this.internal.__cell__.table_y=_,this};var f=function(m,_){var w=this.internal.__cell__.padding,b=this.internal.__cell__.table_font_size,E=this.internal.scaleFactor;return Object.keys(m).map(function(x){var F=m[x];return this.splitTextToSize(F.hasOwnProperty("text")?F.text:F,_[x]-w-w)},this).map(function(x){return this.getLineHeightFactor()*x.length*b/E+w+w},this).reduce(function(x,F){return Math.max(x,F)},0)};e.setTableHeaderRow=function(m){r.call(this),this.internal.__cell__.tableHeaderRow=m},e.printHeaderRow=function(m,_){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var w;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var b=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(b[0],b[1],b[2],b[3],void 0,-1)}this.setFont(void 0,"bold");for(var E=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){w=this.internal.__cell__.tableHeaderRow[x].clone(),_&&(w.y=this.internal.__cell__.margins.top||0,E.push(w)),w.lineNumber=m;var F=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),u.call(this,w),this.setTextColor(F)}E.length>0&&this.setTableHeaderRow(E),this.setFont(void 0,"normal"),n=!1}}(_n.API);var J1={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Y1=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ed=K1(Y1),X1=[100,200,300,400,500,600,700,800,900],QL=K1(X1);function Ad(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(a){return J1[a=a||"normal"]?a:"normal"}(e.style),r=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(e.weight),o=function(a){return typeof Ed[a=a||"normal"]=="number"?a:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:o,src:e.src||[],ref:e.ref||{name:t,style:[o,n,r].join(" ")}}}function om(e,t,n,r){var o;for(o=n;o>=0&&o<t.length;o+=r)if(e[t[o]])return e[t[o]];for(o=n;o>=0&&o<t.length;o-=r)if(e[t[o]])return e[t[o]]}var eC={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},am={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function lm(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function tC(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",o=Object.assign({},eC,n.genericFontFamilies||{}),a=null,u=null,f=0;f<t.length;++f)if(o[(a=Ad(t[f])).family]&&(a.family=o[a.family]),e.hasOwnProperty(a.family)){u=e[a.family];break}if(!(u=u||e[r]))throw new Error("Could not find a font-family for the rule '"+lm(a)+"' and default family '"+r+"'.");if(u=function(m,_){if(_[m])return _[m];var w=Ed[m],b=w<=Ed.normal?-1:1,E=om(_,Y1,w,b);if(!E)throw new Error("Could not find a matching font-stretch value for "+m);return E}(a.stretch,u),u=function(m,_){if(_[m])return _[m];for(var w=J1[m],b=0;b<w.length;++b)if(_[w[b]])return _[w[b]];throw new Error("Could not find a matching font-style for "+m)}(a.style,u),!(u=function(m,_){if(_[m])return _[m];if(m===400&&_[500])return _[500];if(m===500&&_[400])return _[400];var w=QL[m],b=om(_,X1,w,m<400?-1:1);if(!b)throw new Error("Could not find a matching font-weight for value "+m);return b}(a.weight,u)))throw new Error("Failed to resolve a font for the rule '"+lm(a)+"'.");return u}function um(e){return e.trimLeft()}function nC(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function iC(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Xc,cm,hm,Hf=["times"];(function(e){var t,n,r,o,a,u,f,m,_,w=function(I){return I=I||{},this.isStrokeTransparent=I.isStrokeTransparent||!1,this.strokeOpacity=I.strokeOpacity||1,this.strokeStyle=I.strokeStyle||"#000000",this.fillStyle=I.fillStyle||"#000000",this.isFillTransparent=I.isFillTransparent||!1,this.fillOpacity=I.fillOpacity||1,this.font=I.font||"10px sans-serif",this.textBaseline=I.textBaseline||"alphabetic",this.textAlign=I.textAlign||"left",this.lineWidth=I.lineWidth||1,this.lineJoin=I.lineJoin||"miter",this.lineCap=I.lineCap||"butt",this.path=I.path||[],this.transform=I.transform!==void 0?I.transform.clone():new m,this.globalCompositeOperation=I.globalCompositeOperation||"normal",this.globalAlpha=I.globalAlpha||1,this.clip_path=I.clip_path||[],this.currentPoint=I.currentPoint||new u,this.miterLimit=I.miterLimit||10,this.lastPoint=I.lastPoint||new u,this.lineDashOffset=I.lineDashOffset||0,this.lineDash=I.lineDash||[],this.margin=I.margin||[0,0,0,0],this.prevPageLastElemOffset=I.prevPageLastElemOffset||0,this.ignoreClearRect=typeof I.ignoreClearRect!="boolean"||I.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new b(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,u=this.internal.Point,f=this.internal.Rectangle,m=this.internal.Matrix,_=new w}]);var b=function(I){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var G=I;Object.defineProperty(this,"pdf",{get:function(){return G}});var $=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return $},set:function(Ee){$=!!Ee}});var D=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return D},set:function(Ee){D=!!Ee}});var J=0;Object.defineProperty(this,"posX",{get:function(){return J},set:function(Ee){isNaN(Ee)||(J=Ee)}});var le=0;Object.defineProperty(this,"posY",{get:function(){return le},set:function(Ee){isNaN(Ee)||(le=Ee)}}),Object.defineProperty(this,"margin",{get:function(){return _.margin},set:function(Ee){var ie;typeof Ee=="number"?ie=[Ee,Ee,Ee,Ee]:((ie=new Array(4))[0]=Ee[0],ie[1]=Ee.length>=2?Ee[1]:ie[0],ie[2]=Ee.length>=3?Ee[2]:ie[0],ie[3]=Ee.length>=4?Ee[3]:ie[1]),_.margin=ie}});var ge=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ge},set:function(Ee){ge=Ee}});var me=0;Object.defineProperty(this,"lastBreak",{get:function(){return me},set:function(Ee){me=Ee}});var je=[];Object.defineProperty(this,"pageBreaks",{get:function(){return je},set:function(Ee){je=Ee}}),Object.defineProperty(this,"ctx",{get:function(){return _},set:function(Ee){Ee instanceof w&&(_=Ee)}}),Object.defineProperty(this,"path",{get:function(){return _.path},set:function(Ee){_.path=Ee}});var $e=[];Object.defineProperty(this,"ctxStack",{get:function(){return $e},set:function(Ee){$e=Ee}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ee){var ie;ie=E(Ee),this.ctx.fillStyle=ie.style,this.ctx.isFillTransparent=ie.a===0,this.ctx.fillOpacity=ie.a,this.pdf.setFillColor(ie.r,ie.g,ie.b,{a:ie.a}),this.pdf.setTextColor(ie.r,ie.g,ie.b,{a:ie.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ee){var ie=E(Ee);this.ctx.strokeStyle=ie.style,this.ctx.isStrokeTransparent=ie.a===0,this.ctx.strokeOpacity=ie.a,ie.a===0?this.pdf.setDrawColor(255,255,255):(ie.a,this.pdf.setDrawColor(ie.r,ie.g,ie.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ee){["butt","round","square"].indexOf(Ee)!==-1&&(this.ctx.lineCap=Ee,this.pdf.setLineCap(Ee))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ee){isNaN(Ee)||(this.ctx.lineWidth=Ee,this.pdf.setLineWidth(Ee))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ee){["bevel","round","miter"].indexOf(Ee)!==-1&&(this.ctx.lineJoin=Ee,this.pdf.setLineJoin(Ee))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ee){isNaN(Ee)||(this.ctx.miterLimit=Ee,this.pdf.setMiterLimit(Ee))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ee){this.ctx.textBaseline=Ee}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ee){["right","end","center","left","start"].indexOf(Ee)!==-1&&(this.ctx.textAlign=Ee)}});var X=null;function se(Ee,ie){if(X===null){var We=function(et){var Xe=[];return Object.keys(et).forEach(function(De){et[De].forEach(function(ke){var lt=null;switch(ke){case"bold":lt={family:De,weight:"bold"};break;case"italic":lt={family:De,style:"italic"};break;case"bolditalic":lt={family:De,weight:"bold",style:"italic"};break;case"":case"normal":lt={family:De}}lt!==null&&(lt.ref={name:De,style:ke},Xe.push(lt))})}),Xe}(Ee.getFontList());X=function(et){for(var Xe={},De=0;De<et.length;++De){var ke=Ad(et[De]),lt=ke.family,ht=ke.stretch,it=ke.style,Fe=ke.weight;Xe[lt]=Xe[lt]||{},Xe[lt][ht]=Xe[lt][ht]||{},Xe[lt][ht][it]=Xe[lt][ht][it]||{},Xe[lt][ht][it][Fe]=ke}return Xe}(We.concat(ie))}return X}var Te=null;Object.defineProperty(this,"fontFaces",{get:function(){return Te},set:function(Ee){X=null,Te=Ee}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ee){var ie;if(this.ctx.font=Ee,(ie=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ee))!==null){var We=ie[1],et=(ie[2],ie[3]),Xe=ie[4],De=(ie[5],ie[6]),ke=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Xe)[2];Xe=Math.floor(ke==="px"?parseFloat(Xe)*this.pdf.internal.scaleFactor:ke==="em"?parseFloat(Xe)*this.pdf.getFontSize():parseFloat(Xe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Xe);var lt=function(Ut){var Xt,Rt,on=[],dn=Ut.trim();if(dn==="")return Hf;if(dn in am)return[am[dn]];for(;dn!=="";){switch(Rt=null,Xt=(dn=um(dn)).charAt(0)){case'"':case"'":Rt=nC(dn.substring(1),Xt);break;default:Rt=iC(dn)}if(Rt===null||(on.push(Rt[0]),(dn=um(Rt[1]))!==""&&dn.charAt(0)!==","))return Hf;dn=dn.replace(/^,/,"")}return on}(De);if(this.fontFaces){var ht=tC(se(this.pdf,this.fontFaces),lt.map(function(Ut){return{family:Ut,stretch:"normal",weight:et,style:We}}));this.pdf.setFont(ht.ref.name,ht.ref.style)}else{var it="";(et==="bold"||parseInt(et,10)>=700||We==="bold")&&(it="bold"),We==="italic"&&(it+="italic"),it.length===0&&(it="normal");for(var Fe="",Pt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ft=0;Ft<lt.length;Ft++){if(this.pdf.internal.getFont(lt[Ft],it,{noFallback:!0,disableWarning:!0})!==void 0){Fe=lt[Ft];break}if(it==="bolditalic"&&this.pdf.internal.getFont(lt[Ft],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Fe=lt[Ft],it="bold";else if(this.pdf.internal.getFont(lt[Ft],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Fe=lt[Ft],it="normal";break}}if(Fe===""){for(var Wt=0;Wt<lt.length;Wt++)if(Pt[lt[Wt]]){Fe=Pt[lt[Wt]];break}}Fe=Fe===""?"Times":Fe,this.pdf.setFont(Fe,it)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ee){this.ctx.globalCompositeOperation=Ee}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ee){this.ctx.globalAlpha=Ee}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ee){this.ctx.lineDashOffset=Ee,Ie.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ee){this.ctx.lineDash=Ee,Ie.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ee){this.ctx.ignoreClearRect=!!Ee}})};b.prototype.setLineDash=function(I){this.lineDash=I},b.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},b.prototype.fill=function(){be.call(this,"fill",!1)},b.prototype.stroke=function(){be.call(this,"stroke",!1)},b.prototype.beginPath=function(){this.path=[{type:"begin"}]},b.prototype.moveTo=function(I,G){if(isNaN(I)||isNaN(G))throw ui.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var $=this.ctx.transform.applyToPoint(new u(I,G));this.path.push({type:"mt",x:$.x,y:$.y}),this.ctx.lastPoint=new u(I,G)},b.prototype.closePath=function(){var I=new u(0,0),G=0;for(G=this.path.length-1;G!==-1;G--)if(this.path[G].type==="begin"&&oi(this.path[G+1])==="object"&&typeof this.path[G+1].x=="number"){I=new u(this.path[G+1].x,this.path[G+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new u(I.x,I.y)},b.prototype.lineTo=function(I,G){if(isNaN(I)||isNaN(G))throw ui.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var $=this.ctx.transform.applyToPoint(new u(I,G));this.path.push({type:"lt",x:$.x,y:$.y}),this.ctx.lastPoint=new u($.x,$.y)},b.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),be.call(this,null,!0)},b.prototype.quadraticCurveTo=function(I,G,$,D){if(isNaN($)||isNaN(D)||isNaN(I)||isNaN(G))throw ui.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var J=this.ctx.transform.applyToPoint(new u($,D)),le=this.ctx.transform.applyToPoint(new u(I,G));this.path.push({type:"qct",x1:le.x,y1:le.y,x:J.x,y:J.y}),this.ctx.lastPoint=new u(J.x,J.y)},b.prototype.bezierCurveTo=function(I,G,$,D,J,le){if(isNaN(J)||isNaN(le)||isNaN(I)||isNaN(G)||isNaN($)||isNaN(D))throw ui.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ge=this.ctx.transform.applyToPoint(new u(J,le)),me=this.ctx.transform.applyToPoint(new u(I,G)),je=this.ctx.transform.applyToPoint(new u($,D));this.path.push({type:"bct",x1:me.x,y1:me.y,x2:je.x,y2:je.y,x:ge.x,y:ge.y}),this.ctx.lastPoint=new u(ge.x,ge.y)},b.prototype.arc=function(I,G,$,D,J,le){if(isNaN(I)||isNaN(G)||isNaN($)||isNaN(D)||isNaN(J))throw ui.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(le=!!le,!this.ctx.transform.isIdentity){var ge=this.ctx.transform.applyToPoint(new u(I,G));I=ge.x,G=ge.y;var me=this.ctx.transform.applyToPoint(new u(0,$)),je=this.ctx.transform.applyToPoint(new u(0,0));$=Math.sqrt(Math.pow(me.x-je.x,2)+Math.pow(me.y-je.y,2))}Math.abs(J-D)>=2*Math.PI&&(D=0,J=2*Math.PI),this.path.push({type:"arc",x:I,y:G,radius:$,startAngle:D,endAngle:J,counterclockwise:le})},b.prototype.arcTo=function(I,G,$,D,J){throw new Error("arcTo not implemented.")},b.prototype.rect=function(I,G,$,D){if(isNaN(I)||isNaN(G)||isNaN($)||isNaN(D))throw ui.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(I,G),this.lineTo(I+$,G),this.lineTo(I+$,G+D),this.lineTo(I,G+D),this.lineTo(I,G),this.lineTo(I+$,G),this.lineTo(I,G)},b.prototype.fillRect=function(I,G,$,D){if(isNaN(I)||isNaN(G)||isNaN($)||isNaN(D))throw ui.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var J={};this.lineCap!=="butt"&&(J.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(J.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(I,G,$,D),this.fill(),J.hasOwnProperty("lineCap")&&(this.lineCap=J.lineCap),J.hasOwnProperty("lineJoin")&&(this.lineJoin=J.lineJoin)}},b.prototype.strokeRect=function(I,G,$,D){if(isNaN(I)||isNaN(G)||isNaN($)||isNaN(D))throw ui.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");F.call(this)||(this.beginPath(),this.rect(I,G,$,D),this.stroke())},b.prototype.clearRect=function(I,G,$,D){if(isNaN(I)||isNaN(G)||isNaN($)||isNaN(D))throw ui.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(I,G,$,D))},b.prototype.save=function(I){I=typeof I!="boolean"||I;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,$=0;$<this.pdf.internal.getNumberOfPages();$++)this.pdf.setPage($+1),this.pdf.internal.out("q");if(this.pdf.setPage(G),I){this.ctx.fontSize=this.pdf.internal.getFontSize();var D=new w(this.ctx);this.ctxStack.push(this.ctx),this.ctx=D}},b.prototype.restore=function(I){I=typeof I!="boolean"||I;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,$=0;$<this.pdf.internal.getNumberOfPages();$++)this.pdf.setPage($+1),this.pdf.internal.out("Q");this.pdf.setPage(G),I&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},b.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var E=function(I){var G,$,D,J;if(I.isCanvasGradient===!0&&(I=I.getColor()),!I)return{r:0,g:0,b:0,a:0,style:I};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(I))G=0,$=0,D=0,J=0;else{var le=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(I);if(le!==null)G=parseInt(le[1]),$=parseInt(le[2]),D=parseInt(le[3]),J=1;else if((le=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(I))!==null)G=parseInt(le[1]),$=parseInt(le[2]),D=parseInt(le[3]),J=parseFloat(le[4]);else{if(J=1,typeof I=="string"&&I.charAt(0)!=="#"){var ge=new $1(I);I=ge.ok?ge.toHex():"#000000"}I.length===4?(G=I.substring(1,2),G+=G,$=I.substring(2,3),$+=$,D=I.substring(3,4),D+=D):(G=I.substring(1,3),$=I.substring(3,5),D=I.substring(5,7)),G=parseInt(G,16),$=parseInt($,16),D=parseInt(D,16)}}return{r:G,g:$,b:D,a:J,style:I}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},F=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};b.prototype.fillText=function(I,G,$,D){if(isNaN(G)||isNaN($)||typeof I!="string")throw ui.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(D=isNaN(D)?void 0:D,!x.call(this)){var J=W(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;H.call(this,{text:I,x:G,y:$,scale:le,angle:J,align:this.textAlign,maxWidth:D})}},b.prototype.strokeText=function(I,G,$,D){if(isNaN(G)||isNaN($)||typeof I!="string")throw ui.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!F.call(this)){D=isNaN(D)?void 0:D;var J=W(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;H.call(this,{text:I,x:G,y:$,scale:le,renderingMode:"stroke",angle:J,align:this.textAlign,maxWidth:D})}},b.prototype.measureText=function(I){if(typeof I!="string")throw ui.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var G=this.pdf,$=this.pdf.internal.scaleFactor,D=G.internal.getFontSize(),J=G.getStringUnitWidth(I)*D/G.internal.scaleFactor,le=function(ge){var me=(ge=ge||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return me}}),this};return new le({width:J*=Math.round(96*$/72*1e4)/1e4})},b.prototype.scale=function(I,G){if(isNaN(I)||isNaN(G))throw ui.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var $=new m(I,0,0,G,0,0);this.ctx.transform=this.ctx.transform.multiply($)},b.prototype.rotate=function(I){if(isNaN(I))throw ui.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var G=new m(Math.cos(I),Math.sin(I),-Math.sin(I),Math.cos(I),0,0);this.ctx.transform=this.ctx.transform.multiply(G)},b.prototype.translate=function(I,G){if(isNaN(I)||isNaN(G))throw ui.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var $=new m(1,0,0,1,I,G);this.ctx.transform=this.ctx.transform.multiply($)},b.prototype.transform=function(I,G,$,D,J,le){if(isNaN(I)||isNaN(G)||isNaN($)||isNaN(D)||isNaN(J)||isNaN(le))throw ui.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ge=new m(I,G,$,D,J,le);this.ctx.transform=this.ctx.transform.multiply(ge)},b.prototype.setTransform=function(I,G,$,D,J,le){I=isNaN(I)?1:I,G=isNaN(G)?0:G,$=isNaN($)?0:$,D=isNaN(D)?1:D,J=isNaN(J)?0:J,le=isNaN(le)?0:le,this.ctx.transform=new m(I,G,$,D,J,le)};var N=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};b.prototype.drawImage=function(I,G,$,D,J,le,ge,me,je){var $e=this.pdf.getImageProperties(I),X=1,se=1,Te=1,Ee=1;D!==void 0&&me!==void 0&&(Te=me/D,Ee=je/J,X=$e.width/D*me/D,se=$e.height/J*je/J),le===void 0&&(le=G,ge=$,G=0,$=0),D!==void 0&&me===void 0&&(me=D,je=J),D===void 0&&me===void 0&&(me=$e.width,je=$e.height);for(var ie,We=this.ctx.transform.decompose(),et=W(We.rotate.shx),Xe=new m,De=(Xe=(Xe=(Xe=Xe.multiply(We.translate)).multiply(We.skew)).multiply(We.scale)).applyToRectangle(new f(le-G*Te,ge-$*Ee,D*X,J*se)),ke=U.call(this,De),lt=[],ht=0;ht<ke.length;ht+=1)lt.indexOf(ke[ht])===-1&&lt.push(ke[ht]);if(ae(lt),this.autoPaging)for(var it=lt[0],Fe=lt[lt.length-1],Pt=it;Pt<Fe+1;Pt++){this.pdf.setPage(Pt);var Ft=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Wt=Pt===1?this.posY+this.margin[0]:this.margin[0],Ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Xt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Rt=Pt===1?0:Ut+(Pt-2)*Xt;if(this.ctx.clip_path.length!==0){var on=this.path;ie=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ne(ie,this.posX+this.margin[3],-Rt+Wt+this.ctx.prevPageLastElemOffset),ye.call(this,"fill",!0),this.path=on}var dn=JSON.parse(JSON.stringify(De));dn=ne([dn],this.posX+this.margin[3],-Rt+Wt+this.ctx.prevPageLastElemOffset)[0];var ai=(Pt>it||Pt<Fe)&&N.call(this);ai&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ft,Xt,null).clip().discardPath()),this.pdf.addImage(I,"JPEG",dn.x,dn.y,dn.w,dn.h,null,null,et),ai&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(I,"JPEG",De.x,De.y,De.w,De.h,null,null,et)};var U=function(I,G,$){var D=[];G=G||this.pdf.internal.pageSize.width,$=$||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var J=this.posY+this.ctx.prevPageLastElemOffset;switch(I.type){default:case"mt":case"lt":D.push(Math.floor((I.y+J)/$)+1);break;case"arc":D.push(Math.floor((I.y+J-I.radius)/$)+1),D.push(Math.floor((I.y+J+I.radius)/$)+1);break;case"qct":var le=Q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x,I.y);D.push(Math.floor((le.y+J)/$)+1),D.push(Math.floor((le.y+le.h+J)/$)+1);break;case"bct":var ge=z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x2,I.y2,I.x,I.y);D.push(Math.floor((ge.y+J)/$)+1),D.push(Math.floor((ge.y+ge.h+J)/$)+1);break;case"rect":D.push(Math.floor((I.y+J)/$)+1),D.push(Math.floor((I.y+I.h+J)/$)+1)}for(var me=0;me<D.length;me+=1)for(;this.pdf.internal.getNumberOfPages()<D[me];)j.call(this);return D},j=function(){var I=this.fillStyle,G=this.strokeStyle,$=this.font,D=this.lineCap,J=this.lineWidth,le=this.lineJoin;this.pdf.addPage(),this.fillStyle=I,this.strokeStyle=G,this.font=$,this.lineCap=D,this.lineWidth=J,this.lineJoin=le},ne=function(I,G,$){for(var D=0;D<I.length;D++)switch(I[D].type){case"bct":I[D].x2+=G,I[D].y2+=$;case"qct":I[D].x1+=G,I[D].y1+=$;case"mt":case"lt":case"arc":default:I[D].x+=G,I[D].y+=$}return I},ae=function(I){return I.sort(function(G,$){return G-$})},be=function(I,G){for(var $,D,J=this.fillStyle,le=this.strokeStyle,ge=this.lineCap,me=this.lineWidth,je=Math.abs(me*this.ctx.transform.scaleX),$e=this.lineJoin,X=JSON.parse(JSON.stringify(this.path)),se=JSON.parse(JSON.stringify(this.path)),Te=[],Ee=0;Ee<se.length;Ee++)if(se[Ee].x!==void 0)for(var ie=U.call(this,se[Ee]),We=0;We<ie.length;We+=1)Te.indexOf(ie[We])===-1&&Te.push(ie[We]);for(var et=0;et<Te.length;et++)for(;this.pdf.internal.getNumberOfPages()<Te[et];)j.call(this);if(ae(Te),this.autoPaging)for(var Xe=Te[0],De=Te[Te.length-1],ke=Xe;ke<De+1;ke++){this.pdf.setPage(ke),this.fillStyle=J,this.strokeStyle=le,this.lineCap=ge,this.lineWidth=je,this.lineJoin=$e;var lt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ht=ke===1?this.posY+this.margin[0]:this.margin[0],it=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Fe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Pt=ke===1?0:it+(ke-2)*Fe;if(this.ctx.clip_path.length!==0){var Ft=this.path;$=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ne($,this.posX+this.margin[3],-Pt+ht+this.ctx.prevPageLastElemOffset),ye.call(this,I,!0),this.path=Ft}if(D=JSON.parse(JSON.stringify(X)),this.path=ne(D,this.posX+this.margin[3],-Pt+ht+this.ctx.prevPageLastElemOffset),G===!1||ke===0){var Wt=(ke>Xe||ke<De)&&N.call(this);Wt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],lt,Fe,null).clip().discardPath()),ye.call(this,I,G),Wt&&this.pdf.restoreGraphicsState()}this.lineWidth=me}else this.lineWidth=je,ye.call(this,I,G),this.lineWidth=me;this.path=X},ye=function(I,G){if((I!=="stroke"||G||!F.call(this))&&(I==="stroke"||G||!x.call(this))){for(var $,D,J=[],le=this.path,ge=0;ge<le.length;ge++){var me=le[ge];switch(me.type){case"begin":J.push({begin:!0});break;case"close":J.push({close:!0});break;case"mt":J.push({start:me,deltas:[],abs:[]});break;case"lt":var je=J.length;if(le[ge-1]&&!isNaN(le[ge-1].x)&&($=[me.x-le[ge-1].x,me.y-le[ge-1].y],je>0)){for(;je>=0;je--)if(J[je-1].close!==!0&&J[je-1].begin!==!0){J[je-1].deltas.push($),J[je-1].abs.push(me);break}}break;case"bct":$=[me.x1-le[ge-1].x,me.y1-le[ge-1].y,me.x2-le[ge-1].x,me.y2-le[ge-1].y,me.x-le[ge-1].x,me.y-le[ge-1].y],J[J.length-1].deltas.push($);break;case"qct":var $e=le[ge-1].x+2/3*(me.x1-le[ge-1].x),X=le[ge-1].y+2/3*(me.y1-le[ge-1].y),se=me.x+2/3*(me.x1-me.x),Te=me.y+2/3*(me.y1-me.y),Ee=me.x,ie=me.y;$=[$e-le[ge-1].x,X-le[ge-1].y,se-le[ge-1].x,Te-le[ge-1].y,Ee-le[ge-1].x,ie-le[ge-1].y],J[J.length-1].deltas.push($);break;case"arc":J.push({deltas:[],abs:[],arc:!0}),Array.isArray(J[J.length-1].abs)&&J[J.length-1].abs.push(me)}}D=G?null:I==="stroke"?"stroke":"fill";for(var We=!1,et=0;et<J.length;et++)if(J[et].arc)for(var Xe=J[et].abs,De=0;De<Xe.length;De++){var ke=Xe[De];ke.type==="arc"?de.call(this,ke.x,ke.y,ke.radius,ke.startAngle,ke.endAngle,ke.counterclockwise,void 0,G,!We):Se.call(this,ke.x,ke.y),We=!0}else if(J[et].close===!0)this.pdf.internal.out("h"),We=!1;else if(J[et].begin!==!0){var lt=J[et].start.x,ht=J[et].start.y;M.call(this,J[et].deltas,lt,ht),We=!0}D&&Be.call(this,D),G&&Ue.call(this)}},Pe=function(I){var G=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,$=G*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return I-$;case"top":return I+G-$;case"hanging":return I+G-2*$;case"middle":return I+G/2-$;case"ideographic":return I;case"alphabetic":default:return I}},Ce=function(I){return I+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};b.prototype.createLinearGradient=function(){var I=function(){};return I.colorStops=[],I.addColorStop=function(G,$){this.colorStops.push([G,$])},I.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},I.isCanvasGradient=!0,I},b.prototype.createPattern=function(){return this.createLinearGradient()},b.prototype.createRadialGradient=function(){return this.createLinearGradient()};var de=function(I,G,$,D,J,le,ge,me,je){for(var $e=Z.call(this,$,D,J,le),X=0;X<$e.length;X++){var se=$e[X];X===0&&(je?q.call(this,se.x1+I,se.y1+G):Se.call(this,se.x1+I,se.y1+G)),Y.call(this,I,G,se.x2,se.y2,se.x3,se.y3,se.x4,se.y4)}me?Ue.call(this):Be.call(this,ge)},Be=function(I){switch(I){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Ue=function(){this.pdf.clip(),this.pdf.discardPath()},q=function(I,G){this.pdf.internal.out(n(I)+" "+r(G)+" m")},H=function(I){var G;switch(I.align){case"right":case"end":G="right";break;case"center":G="center";break;case"left":case"start":default:G="left"}var $=this.pdf.getTextDimensions(I.text),D=Pe.call(this,I.y),J=Ce.call(this,D)-$.h,le=this.ctx.transform.applyToPoint(new u(I.x,D)),ge=this.ctx.transform.decompose(),me=new m;me=(me=(me=me.multiply(ge.translate)).multiply(ge.skew)).multiply(ge.scale);for(var je,$e,X,se=this.ctx.transform.applyToRectangle(new f(I.x,D,$.w,$.h)),Te=me.applyToRectangle(new f(I.x,J,$.w,$.h)),Ee=U.call(this,Te),ie=[],We=0;We<Ee.length;We+=1)ie.indexOf(Ee[We])===-1&&ie.push(Ee[We]);if(ae(ie),this.autoPaging)for(var et=ie[0],Xe=ie[ie.length-1],De=et;De<Xe+1;De++){this.pdf.setPage(De);var ke=De===1?this.posY+this.margin[0]:this.margin[0],lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ht=this.pdf.internal.pageSize.height-this.margin[2],it=ht-this.margin[0],Fe=this.pdf.internal.pageSize.width-this.margin[1],Pt=Fe-this.margin[3],Ft=De===1?0:lt+(De-2)*it;if(this.ctx.clip_path.length!==0){var Wt=this.path;je=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ne(je,this.posX+this.margin[3],-1*Ft+ke),ye.call(this,"fill",!0),this.path=Wt}var Ut=ne([JSON.parse(JSON.stringify(Te))],this.posX+this.margin[3],-Ft+ke+this.ctx.prevPageLastElemOffset)[0];I.scale>=.01&&($e=this.pdf.internal.getFontSize(),this.pdf.setFontSize($e*I.scale),X=this.lineWidth,this.lineWidth=X*I.scale);var Xt=this.autoPaging!=="text";if(Xt||Ut.y+Ut.h<=ht){if(Xt||Ut.y>=ke&&Ut.x<=Fe){var Rt=Xt?I.text:this.pdf.splitTextToSize(I.text,I.maxWidth||Fe-Ut.x)[0],on=ne([JSON.parse(JSON.stringify(se))],this.posX+this.margin[3],-Ft+ke+this.ctx.prevPageLastElemOffset)[0],dn=Xt&&(De>et||De<Xe)&&N.call(this);dn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Pt,it,null).clip().discardPath()),this.pdf.text(Rt,on.x,on.y,{angle:I.angle,align:G,renderingMode:I.renderingMode}),dn&&this.pdf.restoreGraphicsState()}}else Ut.y<ht&&(this.ctx.prevPageLastElemOffset+=ht-Ut.y);I.scale>=.01&&(this.pdf.setFontSize($e),this.lineWidth=X)}else I.scale>=.01&&($e=this.pdf.internal.getFontSize(),this.pdf.setFontSize($e*I.scale),X=this.lineWidth,this.lineWidth=X*I.scale),this.pdf.text(I.text,le.x+this.posX,le.y+this.posY,{angle:I.angle,align:G,renderingMode:I.renderingMode,maxWidth:I.maxWidth}),I.scale>=.01&&(this.pdf.setFontSize($e),this.lineWidth=X)},Se=function(I,G,$,D){$=$||0,D=D||0,this.pdf.internal.out(n(I+$)+" "+r(G+D)+" l")},M=function(I,G,$){return this.pdf.lines(I,G,$,null,null)},Y=function(I,G,$,D,J,le,ge,me){this.pdf.internal.out([t(o($+I)),t(a(D+G)),t(o(J+I)),t(a(le+G)),t(o(ge+I)),t(a(me+G)),"c"].join(" "))},Z=function(I,G,$,D){for(var J=2*Math.PI,le=Math.PI/2;G>$;)G-=J;var ge=Math.abs($-G);ge<J&&D&&(ge=J-ge);for(var me=[],je=D?-1:1,$e=G;ge>1e-5;){var X=$e+je*Math.min(ge,le);me.push(re.call(this,I,$e,X)),ge-=Math.abs(X-$e),$e=X}return me},re=function(I,G,$){var D=($-G)/2,J=I*Math.cos(D),le=I*Math.sin(D),ge=J,me=-le,je=ge*ge+me*me,$e=je+ge*J+me*le,X=4/3*(Math.sqrt(2*je*$e)-$e)/(ge*le-me*J),se=ge-X*me,Te=me+X*ge,Ee=se,ie=-Te,We=D+G,et=Math.cos(We),Xe=Math.sin(We);return{x1:I*Math.cos(G),y1:I*Math.sin(G),x2:se*et-Te*Xe,y2:se*Xe+Te*et,x3:Ee*et-ie*Xe,y3:Ee*Xe+ie*et,x4:I*Math.cos($),y4:I*Math.sin($)}},W=function(I){return 180*I/Math.PI},Q=function(I,G,$,D,J,le){var ge=I+.5*($-I),me=G+.5*(D-G),je=J+.5*($-J),$e=le+.5*(D-le),X=Math.min(I,J,ge,je),se=Math.max(I,J,ge,je),Te=Math.min(G,le,me,$e),Ee=Math.max(G,le,me,$e);return new f(X,Te,se-X,Ee-Te)},z=function(I,G,$,D,J,le,ge,me){var je,$e,X,se,Te,Ee,ie,We,et,Xe,De,ke,lt,ht,it=$-I,Fe=D-G,Pt=J-$,Ft=le-D,Wt=ge-J,Ut=me-le;for($e=0;$e<41;$e++)et=(ie=(X=I+(je=$e/40)*it)+je*((Te=$+je*Pt)-X))+je*(Te+je*(J+je*Wt-Te)-ie),Xe=(We=(se=G+je*Fe)+je*((Ee=D+je*Ft)-se))+je*(Ee+je*(le+je*Ut-Ee)-We),$e==0?(De=et,ke=Xe,lt=et,ht=Xe):(De=Math.min(De,et),ke=Math.min(ke,Xe),lt=Math.max(lt,et),ht=Math.max(ht,Xe));return new f(Math.round(De),Math.round(ke),Math.round(lt-De),Math.round(ht-ke))},Ie=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var I,G,$=(I=this.ctx.lineDash,G=this.ctx.lineDashOffset,JSON.stringify({lineDash:I,lineDashOffset:G}));this.prevLineDash!==$&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=$)}}})(_n.API),function(e){var t=function(a){var u,f,m,_,w,b,E,x,F,N;for(f=[],m=0,_=(a+=u="\0\0\0\0".slice(a.length%4||4)).length;_>m;m+=4)(w=(a.charCodeAt(m)<<24)+(a.charCodeAt(m+1)<<16)+(a.charCodeAt(m+2)<<8)+a.charCodeAt(m+3))!==0?(b=(w=((w=((w=((w=(w-(N=w%85))/85)-(F=w%85))/85)-(x=w%85))/85)-(E=w%85))/85)%85,f.push(b+33,E+33,x+33,F+33,N+33)):f.push(122);return function(U,j){for(var ne=j;ne>0;ne--)U.pop()}(f,u.length),String.fromCharCode.apply(String,f)+"~>"},n=function(a){var u,f,m,_,w,b=String,E="length",x=255,F="charCodeAt",N="slice",U="replace";for(a[N](-2),a=a[N](0,-2)[U](/\s/g,"")[U]("z","!!!!!"),m=[],_=0,w=(a+=u="uuuuu"[N](a[E]%5||5))[E];w>_;_+=5)f=52200625*(a[F](_)-33)+614125*(a[F](_+1)-33)+7225*(a[F](_+2)-33)+85*(a[F](_+3)-33)+(a[F](_+4)-33),m.push(x&f>>24,x&f>>16,x&f>>8,x&f);return function(j,ne){for(var ae=ne;ae>0;ae--)j.pop()}(m,u[E]),b.fromCharCode.apply(b,m)},r=function(a){var u=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),u.test(a)===!1)return"";for(var f="",m=0;m<a.length;m+=2)f+=String.fromCharCode("0x"+(a[m]+a[m+1]));return f},o=function(a){for(var u=new Uint8Array(a.length),f=a.length;f--;)u[f]=a.charCodeAt(f);return a=(u=Ld(u)).reduce(function(m,_){return m+String.fromCharCode(_)},"")};e.processDataByFilters=function(a,u){var f=0,m=a||"",_=[];for(typeof(u=u||[])=="string"&&(u=[u]),f=0;f<u.length;f+=1)switch(u[f]){case"ASCII85Decode":case"/ASCII85Decode":m=n(m),_.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":m=t(m),_.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":m=r(m),_.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":m=m.split("").map(function(w){return("0"+w.charCodeAt().toString(16)).slice(-2)}).join("")+">",_.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":m=o(m),_.push("/FlateDecode");break;default:throw new Error('The filter: "'+u[f]+'" is not implemented')}return{data:m,reverseChain:_.reverse().join(" ")}}}(_n.API),function(e){e.loadFile=function(t,n,r){return function(o,a,u){a=a!==!1,u=typeof u=="function"?u:function(){};var f=void 0;try{f=function(m,_,w){var b=new XMLHttpRequest,E=0,x=function(F){var N=F.length,U=[],j=String.fromCharCode;for(E=0;E<N;E+=1)U.push(j(255&F.charCodeAt(E)));return U.join("")};if(b.open("GET",m,!_),b.overrideMimeType("text/plain; charset=x-user-defined"),_===!1&&(b.onload=function(){b.status===200?w(x(this.responseText)):w(void 0)}),b.send(null),_&&b.status===200)return x(b.responseText)}(o,a,u)}catch{}return f}(t,n,r)},e.loadImageFile=e.loadFile}(_n.API),function(e){function t(){return(bn.html2canvas?Promise.resolve(bn.html2canvas):Jl(()=>import("./html2canvas.esm.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load html2canvas: "+u))}).then(function(u){return u.default?u.default:u})}function n(){return(bn.DOMPurify?Promise.resolve(bn.DOMPurify):Jl(()=>import("./purify.es.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load dompurify: "+u))}).then(function(u){return u.default?u.default:u})}var r=function(u){var f=oi(u);return f==="undefined"?"undefined":f==="string"||u instanceof String?"string":f==="number"||u instanceof Number?"number":f==="function"||u instanceof Function?"function":u&&u.constructor===Array?"array":u&&u.nodeType===1?"element":f==="object"?"object":"unknown"},o=function(u,f){var m=document.createElement(u);for(var _ in f.className&&(m.className=f.className),f.innerHTML&&f.dompurify&&(m.innerHTML=f.dompurify.sanitize(f.innerHTML)),f.style)m.style[_]=f.style[_];return m},a=function u(f){var m=Object.assign(u.convert(Promise.resolve()),JSON.parse(JSON.stringify(u.template))),_=u.convert(Promise.resolve(),m);return _=(_=_.setProgress(1,u,1,[u])).set(f)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(u,f){return u.__proto__=f||a.prototype,u},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(u,f){return this.then(function(){switch(f=f||function(m){switch(r(m)){case"string":return"string";case"element":return m.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(u)){case"string":return this.then(n).then(function(m){return this.set({src:o("div",{innerHTML:u,dompurify:m})})});case"element":return this.set({src:u});case"canvas":return this.set({canvas:u});case"img":return this.set({img:u});default:return this.error("Unknown source type.")}})},a.prototype.to=function(u){switch(u){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var u={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},f=function m(_,w){for(var b=_.nodeType===3?document.createTextNode(_.nodeValue):_.cloneNode(!1),E=_.firstChild;E;E=E.nextSibling)w!==!0&&E.nodeType===1&&E.nodeName==="SCRIPT"||b.appendChild(m(E,w));return _.nodeType===1&&(_.nodeName==="CANVAS"?(b.width=_.width,b.height=_.height,b.getContext("2d").drawImage(_,0,0)):_.nodeName!=="TEXTAREA"&&_.nodeName!=="SELECT"||(b.value=_.value),b.addEventListener("load",function(){b.scrollTop=_.scrollTop,b.scrollLeft=_.scrollLeft},!0)),b}(this.prop.src,this.opt.html2canvas.javascriptEnabled);f.tagName==="BODY"&&(u.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:u}),this.prop.container.appendChild(f),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(t).then(function(f){var m=Object.assign({},this.opt.html2canvas);return delete m.onrendered,f(this.prop.container,m)}).then(function(f){(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(t).then(function(f){var m=this.opt.jsPDF,_=this.opt.fontFaces,w=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,b=Object.assign({async:!0,allowTaint:!0,scale:w,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete b.onrendered,m.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,m.context2d.posX=this.opt.x,m.context2d.posY=this.opt.y,m.context2d.margin=this.opt.margin,m.context2d.fontFaces=_,_)for(var E=0;E<_.length;++E){var x=_[E],F=x.src.find(function(N){return N.format==="truetype"});F&&m.addFont(F.url,x.ref.name,x.ref.style)}return b.windowHeight=b.windowHeight||0,b.windowHeight=b.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):b.windowHeight,m.context2d.save(!0),f(this.prop.container,b)}).then(function(f){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var u=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=u})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(u,f,m){return(m=m||"pdf").toLowerCase()==="img"||m.toLowerCase()==="image"?this.outputImg(u,f):this.outputPdf(u,f)},a.prototype.outputPdf=function(u,f){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(u,f)})},a.prototype.outputImg=function(u){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(u){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+u+'" is not supported.'}})},a.prototype.save=function(u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(u?{filename:u}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(u){if(r(u)!=="object")return this;var f=Object.keys(u||{}).map(function(m){if(m in a.template.prop)return function(){this.prop[m]=u[m]};switch(m){case"margin":return this.setMargin.bind(this,u.margin);case"jsPDF":return function(){return this.opt.jsPDF=u.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,u.pageSize);default:return function(){this.opt[m]=u[m]}}},this);return this.then(function(){return this.thenList(f)})},a.prototype.get=function(u,f){return this.then(function(){var m=u in a.template.prop?this.prop[u]:this.opt[u];return f?f(m):m})},a.prototype.setMargin=function(u){return this.then(function(){switch(r(u)){case"number":u=[u,u,u,u];case"array":if(u.length===2&&(u=[u[0],u[1],u[0],u[1]]),u.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=u}).then(this.setPageSize)},a.prototype.setPageSize=function(u){function f(m,_){return Math.floor(m*_/72*96)}return this.then(function(){(u=u||_n.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(u.inner={width:u.width-this.opt.margin[1]-this.opt.margin[3],height:u.height-this.opt.margin[0]-this.opt.margin[2]},u.inner.px={width:f(u.inner.width,u.k),height:f(u.inner.height,u.k)},u.inner.ratio=u.inner.height/u.inner.width),this.prop.pageSize=u})},a.prototype.setProgress=function(u,f,m,_){return u!=null&&(this.progress.val=u),f!=null&&(this.progress.state=f),m!=null&&(this.progress.n=m),_!=null&&(this.progress.stack=_),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(u,f,m,_){return this.setProgress(u?this.progress.val+u:null,f||null,m?this.progress.n+m:null,_?this.progress.stack.concat(_):null)},a.prototype.then=function(u,f){var m=this;return this.thenCore(u,f,function(_,w){return m.updateProgress(null,null,1,[_]),Promise.prototype.then.call(this,function(b){return m.updateProgress(null,_),b}).then(_,w).then(function(b){return m.updateProgress(1),b})})},a.prototype.thenCore=function(u,f,m){m=m||Promise.prototype.then,u&&(u=u.bind(this)),f&&(f=f.bind(this));var _=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),w=m.call(_,u,f);return a.convert(w,this.__proto__)},a.prototype.thenExternal=function(u,f){return Promise.prototype.then.call(this,u,f)},a.prototype.thenList=function(u){var f=this;return u.forEach(function(m){f=f.thenCore(m)}),f},a.prototype.catch=function(u){u&&(u=u.bind(this));var f=Promise.prototype.catch.call(this,u);return a.convert(f,this)},a.prototype.catchExternal=function(u){return Promise.prototype.catch.call(this,u)},a.prototype.error=function(u){return this.then(function(){throw new Error(u)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,_n.getPageSize=function(u,f,m){if(oi(u)==="object"){var _=u;u=_.orientation,f=_.unit||f,m=_.format||m}f=f||"mm",m=m||"a4",u=(""+(u||"P")).toLowerCase();var w,b=(""+m).toLowerCase(),E={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(f){case"pt":w=1;break;case"mm":w=72/25.4;break;case"cm":w=72/2.54;break;case"in":w=72;break;case"px":w=.75;break;case"pc":case"em":w=12;break;case"ex":w=6;break;default:throw"Invalid unit: "+f}var x,F=0,N=0;if(E.hasOwnProperty(b))F=E[b][1]/w,N=E[b][0]/w;else try{F=m[1],N=m[0]}catch{throw new Error("Invalid format: "+m)}if(u==="p"||u==="portrait")u="p",N>F&&(x=N,N=F,F=x);else{if(u!=="l"&&u!=="landscape")throw"Invalid orientation: "+u;u="l",F>N&&(x=N,N=F,F=x)}return{width:N,height:F,unit:f,k:w,orientation:u}},e.html=function(u,f){(f=f||{}).callback=f.callback||function(){},f.html2canvas=f.html2canvas||{},f.html2canvas.canvas=f.html2canvas.canvas||this.canvas,f.jsPDF=f.jsPDF||this,f.fontFaces=f.fontFaces?f.fontFaces.map(Ad):null;var m=new a(f);return f.worker?m:m.from(u).doCallback()}}(_n.API),_n.API.addJS=function(e){return hm=e,this.internal.events.subscribe("postPutResources",function(){Xc=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Xc+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),cm=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+hm+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Xc!==void 0&&cm!==void 0&&this.internal.out("/Names <</JavaScript "+Xc+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=n.outline.render().split(/\r\n/),a=0;a<o.length;a++){var u=o[a],f=r.exec(u);if(f!=null){var m=f[1];n.internal.newObjectDeferredBegin(m,!1)}n.internal.write(u)}if(this.outline.createNamedDestinations){var _=this.internal.pages.length,w=[];for(a=0;a<_;a++){var b=n.internal.newObject();w.push(b);var E=n.internal.getPageInfo(a+1);n.internal.write("<< /D["+E.objId+" 0 R /XYZ null null null]>> endobj")}var x=n.internal.newObject();for(n.internal.write("<< /Names [ "),a=0;a<w.length;a++)n.internal.write("(page_"+(a+1)+")"+w[a]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+x+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,o,a){var u={title:o,options:a,children:[]};return r==null&&(r=this.root),r.children.push(u),u},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var o=0;o<r.children.length;o++)this.genIds_r(r.children[o])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<r.children.length;a++){var u=r.children[a];this.objStart(u),this.line("/Title "+this.makeString(u.title)),this.line("/Parent "+this.makeRef(r)),a>0&&this.line("/Prev "+this.makeRef(r.children[a-1])),a<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[a+1])),u.children.length>0&&(this.line("/First "+this.makeRef(u.children[0])),this.line("/Last "+this.makeRef(u.children[u.children.length-1])));var f=this.count=this.count_r({count:0},u);if(f>0&&this.line("/Count "+f),u.options&&u.options.pageNumber){var m=n.internal.getPageInfo(u.options.pageNumber);this.line("/Dest ["+m.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var _=0;_<r.children.length;_++)this.renderItems(r.children[_])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,o){for(var a=0;a<o.children.length;a++)r.count++,this.count_r(r,o.children[a]);return r.count}}])}(_n.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,r,o,a,u,f){var m,_=this.decode.DCT_DECODE,w=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=u||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(m=function(b){for(var E,x=256*b.charCodeAt(4)+b.charCodeAt(5),F=b.length,N={width:0,height:0,numcomponents:1},U=4;U<F;U+=2){if(U+=x,t.indexOf(b.charCodeAt(U+1))!==-1){E=256*b.charCodeAt(U+5)+b.charCodeAt(U+6),N={width:256*b.charCodeAt(U+7)+b.charCodeAt(U+8),height:E,numcomponents:b.charCodeAt(U+9)};break}x=256*b.charCodeAt(U+2)+b.charCodeAt(U+3)}return N}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:f=this.color_spaces.DEVICE_GRAY;break;case 4:f=this.color_spaces.DEVICE_CMYK;break;case 3:f=this.color_spaces.DEVICE_RGB}w={data:n,width:m.width,height:m.height,colorSpace:f,bitsPerComponent:8,filter:_,index:r,alias:o}}return w}}(_n.API);var yu,Qc,fm,dm,pm,rC=function(){var e,t,n;function r(a){var u,f,m,_,w,b,E,x,F,N,U,j,ne,ae;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},b=null;;){switch(u=this.readUInt32(),F=(function(){var be,ye;for(ye=[],be=0;be<4;++be)ye.push(String.fromCharCode(this.data[this.pos++]));return ye}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(u);break;case"fcTL":b&&this.animation.frames.push(b),this.pos+=4,b={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},w=this.readUInt16(),_=this.readUInt16()||100,b.delay=1e3*w/_,b.disposeOp=this.data[this.pos++],b.blendOp=this.data[this.pos++],b.data=[];break;case"IDAT":case"fdAT":for(F==="fdAT"&&(this.pos+=4,u-=4),a=(b!=null?b.data:void 0)||this.imgData,j=0;0<=u?j<u:j>u;0<=u?++j:--j)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(m=this.palette.length/3,this.transparency.indexed=this.read(u),this.transparency.indexed.length>m)throw new Error("More transparent colors than palette size");if((N=m-this.transparency.indexed.length)>0)for(ne=0;0<=N?ne<N:ne>N;0<=N?++ne:--ne)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(u)[0];break;case 2:this.transparency.rgb=this.read(u)}break;case"tEXt":E=(U=this.read(u)).indexOf(0),x=String.fromCharCode.apply(String,U.slice(0,E)),this.text[x]=String.fromCharCode.apply(String,U.slice(E+1));break;case"IEND":return b&&this.animation.frames.push(b),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(ae=this.colorType)===4||ae===6,f=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*f,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=u}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(a){var u,f;for(f=[],u=0;0<=a?u<a:u>a;0<=a?++u:--u)f.push(this.data[this.pos++]);return f},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(a){var u=this.pixelBitlength/8,f=new Uint8Array(this.width*this.height*u),m=0,_=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function w(b,E,x,F){var N,U,j,ne,ae,be,ye,Pe,Ce,de,Be,Ue,q,H,Se,M,Y,Z,re,W,Q,z=Math.ceil((_.width-b)/x),Ie=Math.ceil((_.height-E)/F),I=_.width==z&&_.height==Ie;for(H=u*z,Ue=I?f:new Uint8Array(H*Ie),be=a.length,q=0,U=0;q<Ie&&m<be;){switch(a[m++]){case 0:for(ne=Y=0;Y<H;ne=Y+=1)Ue[U++]=a[m++];break;case 1:for(ne=Z=0;Z<H;ne=Z+=1)N=a[m++],ae=ne<u?0:Ue[U-u],Ue[U++]=(N+ae)%256;break;case 2:for(ne=re=0;re<H;ne=re+=1)N=a[m++],j=(ne-ne%u)/u,Se=q&&Ue[(q-1)*H+j*u+ne%u],Ue[U++]=(Se+N)%256;break;case 3:for(ne=W=0;W<H;ne=W+=1)N=a[m++],j=(ne-ne%u)/u,ae=ne<u?0:Ue[U-u],Se=q&&Ue[(q-1)*H+j*u+ne%u],Ue[U++]=(N+Math.floor((ae+Se)/2))%256;break;case 4:for(ne=Q=0;Q<H;ne=Q+=1)N=a[m++],j=(ne-ne%u)/u,ae=ne<u?0:Ue[U-u],q===0?Se=M=0:(Se=Ue[(q-1)*H+j*u+ne%u],M=j&&Ue[(q-1)*H+(j-1)*u+ne%u]),ye=ae+Se-M,Pe=Math.abs(ye-ae),de=Math.abs(ye-Se),Be=Math.abs(ye-M),Ce=Pe<=de&&Pe<=Be?ae:de<=Be?Se:M,Ue[U++]=(N+Ce)%256;break;default:throw new Error("Invalid filter algorithm: "+a[m-1])}if(!I){var G=((E+q*F)*_.width+b)*u,$=q*H;for(ne=0;ne<z;ne+=1){for(var D=0;D<u;D+=1)f[G++]=Ue[$++];G+=(x-1)*u}}q++}}return a=RL(a),_.interlaceMethod==1?(w(0,0,8,8),w(4,0,8,8),w(0,4,4,8),w(2,0,4,4),w(0,2,2,4),w(1,0,2,2),w(0,1,1,2)):w(0,0,1,1),f},r.prototype.decodePalette=function(){var a,u,f,m,_,w,b,E,x;for(f=this.palette,w=this.transparency.indexed||[],_=new Uint8Array((w.length||0)+f.length),m=0,a=0,u=b=0,E=f.length;b<E;u=b+=3)_[m++]=f[u],_[m++]=f[u+1],_[m++]=f[u+2],_[m++]=(x=w[a++])!=null?x:255;return _},r.prototype.copyToImageData=function(a,u){var f,m,_,w,b,E,x,F,N,U,j;if(m=this.colors,N=null,f=this.hasAlphaChannel,this.palette.length&&(N=(j=this._decodedPalette)!=null?j:this._decodedPalette=this.decodePalette(),m=4,f=!0),F=(_=a.data||a).length,b=N||u,w=E=0,m===1)for(;w<F;)x=N?4*u[w/4]:E,U=b[x++],_[w++]=U,_[w++]=U,_[w++]=U,_[w++]=f?b[x++]:255,E=x;else for(;w<F;)x=N?4*u[w/4]:E,_[w++]=b[x++],_[w++]=b[x++],_[w++]=b[x++],_[w++]=f?b[x++]:255,E=x},r.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var o=function(){if(Object.prototype.toString.call(bn)==="[object Window]"){try{t=bn.document.createElement("canvas"),n=t.getContext("2d")}catch{return!1}return!0}return!1};return o(),e=function(a){var u;if(o()===!0)return n.width=a.width,n.height=a.height,n.clearRect(0,0,a.width,a.height),n.putImageData(a,0,0),(u=new Image).src=t.toDataURL(),u;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(a){var u,f,m,_,w,b,E,x;if(this.animation){for(x=[],f=w=0,b=(E=this.animation.frames).length;w<b;f=++w)u=E[f],m=a.createImageData(u.width,u.height),_=this.decodePixels(new Uint8Array(u.data)),this.copyToImageData(m,_),u.imageData=m,x.push(u.image=e(m));return x}},r.prototype.renderFrame=function(a,u){var f,m,_;return f=(m=this.animation.frames)[u],_=m[u-1],u===0&&a.clearRect(0,0,this.width,this.height),(_!=null?_.disposeOp:void 0)===1?a.clearRect(_.xOffset,_.yOffset,_.width,_.height):(_!=null?_.disposeOp:void 0)===2&&a.putImageData(_.imageData,_.xOffset,_.yOffset),f.blendOp===0&&a.clearRect(f.xOffset,f.yOffset,f.width,f.height),a.drawImage(f.image,f.xOffset,f.yOffset)},r.prototype.animate=function(a){var u,f,m,_,w,b,E=this;return f=0,b=this.animation,_=b.numFrames,m=b.frames,w=b.numPlays,(u=function(){var x,F;if(x=f++%_,F=m[x],E.renderFrame(a,x),_>1&&f/_<w)return E.animation._timeout=setTimeout(u,F.delay)})()},r.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},r.prototype.render=function(a){var u,f;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,u=a.getContext("2d"),this.animation?(this.decodeFrames(u),this.animate(u)):(f=u.createImageData(this.width,this.height),this.copyToImageData(f,this.decodePixels()),u.putImageData(f,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function sC(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,o=e[t++],a=o>>7,u=1<<(7&o)+1;e[t++],e[t++];var f=null,m=null;a&&(f=t,m=u,t+=3*u);var _=!0,w=[],b=0,E=null,x=0,F=null;for(this.width=n,this.height=r;_&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,F=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((q=e[t++])>=0))throw Error("Invalid block size");if(q===0)break;t+=q}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var N=e[t++];b=e[t++]|e[t++]<<8,E=e[t++],!(1&N)&&(E=null),x=N>>2&7,t++;break;case 254:for(;;){if(!((q=e[t++])>=0))throw Error("Invalid block size");if(q===0)break;t+=q}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var U=e[t++]|e[t++]<<8,j=e[t++]|e[t++]<<8,ne=e[t++]|e[t++]<<8,ae=e[t++]|e[t++]<<8,be=e[t++],ye=be>>6&1,Pe=1<<(7&be)+1,Ce=f,de=m,Be=!1;be>>7&&(Be=!0,Ce=t,de=Pe,t+=3*Pe);var Ue=t;for(t++;;){var q;if(!((q=e[t++])>=0))throw Error("Invalid block size");if(q===0)break;t+=q}w.push({x:U,y:j,width:ne,height:ae,has_local_palette:Be,palette_offset:Ce,palette_size:de,data_offset:Ue,data_length:t-Ue,transparent_index:E,interlaced:!!ye,delay:b,disposal:x});break;case 59:_=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return w.length},this.loopCount=function(){return F},this.frameInfo=function(H){if(H<0||H>=w.length)throw new Error("Frame index out of range.");return w[H]},this.decodeAndBlitFrameBGRA=function(H,Se){var M=this.frameInfo(H),Y=M.width*M.height,Z=new Uint8Array(Y);mm(e,M.data_offset,Z,Y);var re=M.palette_offset,W=M.transparent_index;W===null&&(W=256);var Q=M.width,z=n-Q,Ie=Q,I=4*(M.y*n+M.x),G=4*((M.y+M.height)*n+M.x),$=I,D=4*z;M.interlaced===!0&&(D+=4*n*7);for(var J=8,le=0,ge=Z.length;le<ge;++le){var me=Z[le];if(Ie===0&&(Ie=Q,($+=D)>=G&&(D=4*z+4*n*(J-1),$=I+(Q+z)*(J<<1),J>>=1)),me===W)$+=4;else{var je=e[re+3*me],$e=e[re+3*me+1],X=e[re+3*me+2];Se[$++]=X,Se[$++]=$e,Se[$++]=je,Se[$++]=255}--Ie}},this.decodeAndBlitFrameRGBA=function(H,Se){var M=this.frameInfo(H),Y=M.width*M.height,Z=new Uint8Array(Y);mm(e,M.data_offset,Z,Y);var re=M.palette_offset,W=M.transparent_index;W===null&&(W=256);var Q=M.width,z=n-Q,Ie=Q,I=4*(M.y*n+M.x),G=4*((M.y+M.height)*n+M.x),$=I,D=4*z;M.interlaced===!0&&(D+=4*n*7);for(var J=8,le=0,ge=Z.length;le<ge;++le){var me=Z[le];if(Ie===0&&(Ie=Q,($+=D)>=G&&(D=4*z+4*n*(J-1),$=I+(Q+z)*(J<<1),J>>=1)),me===W)$+=4;else{var je=e[re+3*me],$e=e[re+3*me+1],X=e[re+3*me+2];Se[$++]=je,Se[$++]=$e,Se[$++]=X,Se[$++]=255}--Ie}}}function mm(e,t,n,r){for(var o=e[t++],a=1<<o,u=a+1,f=u+1,m=o+1,_=(1<<m)-1,w=0,b=0,E=0,x=e[t++],F=new Int32Array(4096),N=null;;){for(;w<16&&x!==0;)b|=e[t++]<<w,w+=8,x===1?x=e[t++]:--x;if(w<m)break;var U=b&_;if(b>>=m,w-=m,U!==a){if(U===u)break;for(var j=U<f?U:N,ne=0,ae=j;ae>a;)ae=F[ae]>>8,++ne;var be=ae;if(E+ne+(j!==U?1:0)>r)return void ui.log("Warning, gif stream longer than expected.");n[E++]=be;var ye=E+=ne;for(j!==U&&(n[E++]=be),ae=j;ne--;)ae=F[ae],n[--ye]=255&ae,ae>>=8;N!==null&&f<4096&&(F[f++]=N<<8|be,f>=_+1&&m<12&&(++m,_=_<<1|1)),N=U}else f=u+1,_=(1<<(m=o+1))-1,N=null}return E!==r&&ui.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Gf(e){var t,n,r,o,a,u=Math.floor,f=new Array(64),m=new Array(64),_=new Array(64),w=new Array(64),b=new Array(65535),E=new Array(65535),x=new Array(64),F=new Array(64),N=[],U=0,j=7,ne=new Array(64),ae=new Array(64),be=new Array(64),ye=new Array(256),Pe=new Array(2048),Ce=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],de=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Be=[0,1,2,3,4,5,6,7,8,9,10,11],Ue=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],q=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],H=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Se=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Y=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Z(I,G){for(var $=0,D=0,J=new Array,le=1;le<=16;le++){for(var ge=1;ge<=I[le];ge++)J[G[D]]=[],J[G[D]][0]=$,J[G[D]][1]=le,D++,$++;$*=2}return J}function re(I){for(var G=I[0],$=I[1]-1;$>=0;)G&1<<$&&(U|=1<<j),$--,--j<0&&(U==255?(W(255),W(0)):W(U),j=7,U=0)}function W(I){N.push(I)}function Q(I){W(I>>8&255),W(255&I)}function z(I,G,$,D,J){for(var le,ge=J[0],me=J[240],je=function(Xe,De){var ke,lt,ht,it,Fe,Pt,Ft,Wt,Ut,Xt,Rt=0;for(Ut=0;Ut<8;++Ut){ke=Xe[Rt],lt=Xe[Rt+1],ht=Xe[Rt+2],it=Xe[Rt+3],Fe=Xe[Rt+4],Pt=Xe[Rt+5],Ft=Xe[Rt+6];var on=ke+(Wt=Xe[Rt+7]),dn=ke-Wt,ai=lt+Ft,Ct=lt-Ft,nn=ht+Pt,Vt=ht-Pt,ln=it+Fe,li=it-Fe,In=on+ln,fi=on-ln,xi=ai+nn,Kn=ai-nn;Xe[Rt]=In+xi,Xe[Rt+4]=In-xi;var Tt=.707106781*(Kn+fi);Xe[Rt+2]=fi+Tt,Xe[Rt+6]=fi-Tt;var Dt=.382683433*((In=li+Vt)-(Kn=Ct+dn)),Di=.5411961*In+Dt,qn=1.306562965*Kn+Dt,ms=.707106781*(xi=Vt+Ct),Mr=dn+ms,cn=dn-ms;Xe[Rt+5]=cn+Di,Xe[Rt+3]=cn-Di,Xe[Rt+1]=Mr+qn,Xe[Rt+7]=Mr-qn,Rt+=8}for(Rt=0,Ut=0;Ut<8;++Ut){ke=Xe[Rt],lt=Xe[Rt+8],ht=Xe[Rt+16],it=Xe[Rt+24],Fe=Xe[Rt+32],Pt=Xe[Rt+40],Ft=Xe[Rt+48];var Yr=ke+(Wt=Xe[Rt+56]),gs=ke-Wt,cr=lt+Ft,Vn=lt-Ft,Ht=ht+Pt,hr=ht-Pt,wo=it+Fe,Xr=it-Fe,Br=Yr+wo,Lr=Yr-wo,Tr=cr+Ht,tr=cr-Ht;Xe[Rt]=Br+Tr,Xe[Rt+32]=Br-Tr;var Cr=.707106781*(tr+Lr);Xe[Rt+16]=Lr+Cr,Xe[Rt+48]=Lr-Cr;var vs=.382683433*((Br=Xr+hr)-(tr=Vn+gs)),xo=.5411961*Br+vs,Zo=1.306562965*tr+vs,Ko=.707106781*(Tr=hr+Vn),Ds=gs+Ko,Ys=gs-Ko;Xe[Rt+40]=Ys+xo,Xe[Rt+24]=Ys-xo,Xe[Rt+8]=Ds+Zo,Xe[Rt+56]=Ds-Zo,Rt++}for(Ut=0;Ut<64;++Ut)Xt=Xe[Ut]*De[Ut],x[Ut]=Xt>0?Xt+.5|0:Xt-.5|0;return x}(I,G),$e=0;$e<64;++$e)F[Ce[$e]]=je[$e];var X=F[0]-$;$=F[0],X==0?re(D[0]):(re(D[E[le=32767+X]]),re(b[le]));for(var se=63;se>0&&F[se]==0;)se--;if(se==0)return re(ge),$;for(var Te,Ee=1;Ee<=se;){for(var ie=Ee;F[Ee]==0&&Ee<=se;)++Ee;var We=Ee-ie;if(We>=16){Te=We>>4;for(var et=1;et<=Te;++et)re(me);We&=15}le=32767+F[Ee],re(J[(We<<4)+E[le]]),re(b[le]),Ee++}return se!=63&&re(ge),$}function Ie(I){I=Math.min(Math.max(I,1),100),a!=I&&(function(G){for(var $=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],D=0;D<64;D++){var J=u(($[D]*G+50)/100);J=Math.min(Math.max(J,1),255),f[Ce[D]]=J}for(var le=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ge=0;ge<64;ge++){var me=u((le[ge]*G+50)/100);me=Math.min(Math.max(me,1),255),m[Ce[ge]]=me}for(var je=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],$e=0,X=0;X<8;X++)for(var se=0;se<8;se++)_[$e]=1/(f[Ce[$e]]*je[X]*je[se]*8),w[$e]=1/(m[Ce[$e]]*je[X]*je[se]*8),$e++}(I<50?Math.floor(5e3/I):Math.floor(200-2*I)),a=I)}this.encode=function(I,G){G&&Ie(G),N=new Array,U=0,j=7,Q(65496),Q(65504),Q(16),W(74),W(70),W(73),W(70),W(0),W(1),W(1),W(0),Q(1),Q(1),W(0),W(0),function(){Q(65499),Q(132),W(0);for(var lt=0;lt<64;lt++)W(f[lt]);W(1);for(var ht=0;ht<64;ht++)W(m[ht])}(),function(lt,ht){Q(65472),Q(17),W(8),Q(ht),Q(lt),W(3),W(1),W(17),W(0),W(2),W(17),W(1),W(3),W(17),W(1)}(I.width,I.height),function(){Q(65476),Q(418),W(0);for(var lt=0;lt<16;lt++)W(de[lt+1]);for(var ht=0;ht<=11;ht++)W(Be[ht]);W(16);for(var it=0;it<16;it++)W(Ue[it+1]);for(var Fe=0;Fe<=161;Fe++)W(q[Fe]);W(1);for(var Pt=0;Pt<16;Pt++)W(H[Pt+1]);for(var Ft=0;Ft<=11;Ft++)W(Se[Ft]);W(17);for(var Wt=0;Wt<16;Wt++)W(M[Wt+1]);for(var Ut=0;Ut<=161;Ut++)W(Y[Ut])}(),Q(65498),Q(12),W(3),W(1),W(0),W(2),W(17),W(3),W(17),W(0),W(63),W(0);var $=0,D=0,J=0;U=0,j=7,this.encode.displayName="_encode_";for(var le,ge,me,je,$e,X,se,Te,Ee,ie=I.data,We=I.width,et=I.height,Xe=4*We,De=0;De<et;){for(le=0;le<Xe;){for($e=Xe*De+le,se=-1,Te=0,Ee=0;Ee<64;Ee++)X=$e+(Te=Ee>>3)*Xe+(se=4*(7&Ee)),De+Te>=et&&(X-=Xe*(De+1+Te-et)),le+se>=Xe&&(X-=le+se-Xe+4),ge=ie[X++],me=ie[X++],je=ie[X++],ne[Ee]=(Pe[ge]+Pe[me+256>>0]+Pe[je+512>>0]>>16)-128,ae[Ee]=(Pe[ge+768>>0]+Pe[me+1024>>0]+Pe[je+1280>>0]>>16)-128,be[Ee]=(Pe[ge+1280>>0]+Pe[me+1536>>0]+Pe[je+1792>>0]>>16)-128;$=z(ne,_,$,t,r),D=z(ae,w,D,n,o),J=z(be,w,J,n,o),le+=32}De+=8}if(j>=0){var ke=[];ke[1]=j+1,ke[0]=(1<<j+1)-1,re(ke)}return Q(65497),new Uint8Array(N)},e=e||50,function(){for(var I=String.fromCharCode,G=0;G<256;G++)ye[G]=I(G)}(),t=Z(de,Be),n=Z(H,Se),r=Z(Ue,q),o=Z(M,Y),function(){for(var I=1,G=2,$=1;$<=15;$++){for(var D=I;D<G;D++)E[32767+D]=$,b[32767+D]=[],b[32767+D][1]=$,b[32767+D][0]=D;for(var J=-(G-1);J<=-I;J++)E[32767+J]=$,b[32767+J]=[],b[32767+J][1]=$,b[32767+J][0]=G-1+J;I<<=1,G<<=1}}(),function(){for(var I=0;I<256;I++)Pe[I]=19595*I,Pe[I+256>>0]=38470*I,Pe[I+512>>0]=7471*I+32768,Pe[I+768>>0]=-11059*I,Pe[I+1024>>0]=-21709*I,Pe[I+1280>>0]=32768*I+8421375,Pe[I+1536>>0]=-27439*I,Pe[I+1792>>0]=-5329*I}(),Ie(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function jo(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function gm(e){function t(de){if(!de)throw Error("assert :P")}function n(de,Be,Ue){for(var q=0;4>q;q++)if(de[Be+q]!=Ue.charCodeAt(q))return!0;return!1}function r(de,Be,Ue,q,H){for(var Se=0;Se<H;Se++)de[Be+Se]=Ue[q+Se]}function o(de,Be,Ue,q){for(var H=0;H<q;H++)de[Be+H]=Ue}function a(de){return new Int32Array(de)}function u(de,Be){for(var Ue=[],q=0;q<de;q++)Ue.push(new Be);return Ue}function f(de,Be){var Ue=[];return function q(H,Se,M){for(var Y=M[Se],Z=0;Z<Y&&(H.push(M.length>Se+1?[]:new Be),!(M.length<Se+1));Z++)q(H[Z],Se+1,M)}(Ue,0,de),Ue}var m=function(){var de=this;function Be(d,y){for(var S=1<<y-1>>>0;d&S;)S>>>=1;return S?(d&S-1)+S:d}function Ue(d,y,S,O,te){t(!(O%S));do d[y+(O-=S)]=te;while(0<O)}function q(d,y,S,O,te){if(t(2328>=te),512>=te)var ce=a(512);else if((ce=a(te))==null)return 0;return function(fe,pe,ve,Ae,Ze,mt){var gt,st,Lt=pe,bt=1<<ve,Ye=a(16),tt=a(16);for(t(Ze!=0),t(Ae!=null),t(fe!=null),t(0<ve),st=0;st<Ze;++st){if(15<Ae[st])return 0;++Ye[Ae[st]]}if(Ye[0]==Ze)return 0;for(tt[1]=0,gt=1;15>gt;++gt){if(Ye[gt]>1<<gt)return 0;tt[gt+1]=tt[gt]+Ye[gt]}for(st=0;st<Ze;++st)gt=Ae[st],0<Ae[st]&&(mt[tt[gt]++]=st);if(tt[15]==1)return(Ae=new H).g=0,Ae.value=mt[0],Ue(fe,Lt,1,bt,Ae),bt;var St,Nt=-1,At=bt-1,Yt=0,$t=1,hn=1,s=1<<ve;for(st=0,gt=1,Ze=2;gt<=ve;++gt,Ze<<=1){if($t+=hn<<=1,0>(hn-=Ye[gt]))return 0;for(;0<Ye[gt];--Ye[gt])(Ae=new H).g=gt,Ae.value=mt[st++],Ue(fe,Lt+Yt,Ze,s,Ae),Yt=Be(Yt,gt)}for(gt=ve+1,Ze=2;15>=gt;++gt,Ze<<=1){if($t+=hn<<=1,0>(hn-=Ye[gt]))return 0;for(;0<Ye[gt];--Ye[gt]){if(Ae=new H,(Yt&At)!=Nt){for(Lt+=s,St=1<<(Nt=gt)-ve;15>Nt&&!(0>=(St-=Ye[Nt]));)++Nt,St<<=1;bt+=s=1<<(St=Nt-ve),fe[pe+(Nt=Yt&At)].g=St+ve,fe[pe+Nt].value=Lt-pe-Nt}Ae.g=gt-ve,Ae.value=mt[st++],Ue(fe,Lt+(Yt>>ve),Ze,s,Ae),Yt=Be(Yt,gt)}}return $t!=2*tt[15]-1?0:bt}(d,y,S,O,te,ce)}function H(){this.value=this.g=0}function Se(){this.value=this.g=0}function M(){this.G=u(5,H),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=u(Ci,Se)}function Y(d,y,S,O){t(d!=null),t(y!=null),t(2147483648>O),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=y,d.pa=S,d.Jd=y,d.Yc=S+O,d.Zc=4<=O?S+O-4+1:S,le(d)}function Z(d,y){for(var S=0;0<y--;)S|=me(d,128)<<y;return S}function re(d,y){var S=Z(d,y);return ge(d)?-S:S}function W(d,y,S,O){var te,ce=0;for(t(d!=null),t(y!=null),t(4294967288>O),d.Sb=O,d.Ra=0,d.u=0,d.h=0,4<O&&(O=4),te=0;te<O;++te)ce+=y[S+te]<<8*te;d.Ra=ce,d.bb=O,d.oa=y,d.pa=S}function Q(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<sr-8>>>0,++d.bb,d.u-=8;$(d)&&(d.h=1,d.u=0)}function z(d,y){if(t(0<=y),!d.h&&y<=dr){var S=G(d)&aa[y];return d.u+=y,Q(d),S}return d.h=1,d.u=0}function Ie(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function I(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function G(d){return d.Ra>>>(d.u&sr-1)>>>0}function $(d){return t(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>sr}function D(d,y){d.u=y,d.h=$(d)}function J(d){d.u>=la&&(t(d.u>=la),Q(d))}function le(d){t(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(t(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function ge(d){return Z(d,1)}function me(d,y){var S=d.Ca;0>d.b&&le(d);var O=d.b,te=S*y>>>8,ce=(d.I>>>O>te)+0;for(ce?(S-=te,d.I-=te+1<<O>>>0):S=te+1,O=S,te=0;256<=O;)te+=8,O>>=8;return O=7^te+Ki[O],d.b-=O,d.Ca=(S<<O)-1,ce}function je(d,y,S){d[y+0]=S>>24&255,d[y+1]=S>>16&255,d[y+2]=S>>8&255,d[y+3]=S>>0&255}function $e(d,y){return d[y+0]<<0|d[y+1]<<8}function X(d,y){return $e(d,y)|d[y+2]<<16}function se(d,y){return $e(d,y)|$e(d,y+2)<<16}function Te(d,y){var S=1<<y;return t(d!=null),t(0<y),d.X=a(S),d.X==null?0:(d.Mb=32-y,d.Xa=y,1)}function Ee(d,y){t(d!=null),t(y!=null),t(d.Xa==y.Xa),r(y.X,0,d.X,0,1<<y.Xa)}function ie(){this.X=[],this.Xa=this.Mb=0}function We(d,y,S,O){t(S!=null),t(O!=null);var te=S[0],ce=O[0];return te==0&&(te=(d*ce+y/2)/y),ce==0&&(ce=(y*te+d/2)/d),0>=te||0>=ce?0:(S[0]=te,O[0]=ce,1)}function et(d,y){return d+(1<<y)-1>>>y}function Xe(d,y){return((4278255360&d)+(4278255360&y)>>>0&4278255360)+((16711935&d)+(16711935&y)>>>0&16711935)>>>0}function De(d,y){de[y]=function(S,O,te,ce,fe,pe,ve){var Ae;for(Ae=0;Ae<fe;++Ae){var Ze=de[d](pe[ve+Ae-1],te,ce+Ae);pe[ve+Ae]=Xe(S[O+Ae],Ze)}}}function ke(){this.ud=this.hd=this.jd=0}function lt(d,y){return((4278124286&(d^y))>>>1)+(d&y)>>>0}function ht(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function it(d,y){return ht(d+(d-y+.5>>1))}function Fe(d,y,S){return Math.abs(y-S)-Math.abs(d-S)}function Pt(d,y,S,O,te,ce,fe){for(O=ce[fe-1],S=0;S<te;++S)ce[fe+S]=O=Xe(d[y+S],O)}function Ft(d,y,S,O,te){var ce;for(ce=0;ce<S;++ce){var fe=d[y+ce],pe=fe>>8&255,ve=16711935&(ve=(ve=16711935&fe)+((pe<<16)+pe));O[te+ce]=(4278255360&fe)+ve>>>0}}function Wt(d,y){y.jd=d>>0&255,y.hd=d>>8&255,y.ud=d>>16&255}function Ut(d,y,S,O,te,ce){var fe;for(fe=0;fe<O;++fe){var pe=y[S+fe],ve=pe>>>8,Ae=pe,Ze=255&(Ze=(Ze=pe>>>16)+((d.jd<<24>>24)*(ve<<24>>24)>>>5));Ae=255&(Ae=(Ae=Ae+((d.hd<<24>>24)*(ve<<24>>24)>>>5))+((d.ud<<24>>24)*(Ze<<24>>24)>>>5)),te[ce+fe]=(4278255360&pe)+(Ze<<16)+Ae}}function Xt(d,y,S,O,te){de[y]=function(ce,fe,pe,ve,Ae,Ze,mt,gt,st){for(ve=mt;ve<gt;++ve)for(mt=0;mt<st;++mt)Ae[Ze++]=te(pe[O(ce[fe++])])},de[d]=function(ce,fe,pe,ve,Ae,Ze,mt){var gt=8>>ce.b,st=ce.Ea,Lt=ce.K[0],bt=ce.w;if(8>gt)for(ce=(1<<ce.b)-1,bt=(1<<gt)-1;fe<pe;++fe){var Ye,tt=0;for(Ye=0;Ye<st;++Ye)Ye&ce||(tt=O(ve[Ae++])),Ze[mt++]=te(Lt[tt&bt]),tt>>=gt}else de["VP8LMapColor"+S](ve,Ae,Lt,bt,Ze,mt,fe,pe,st)}}function Rt(d,y,S,O,te){for(S=y+S;y<S;){var ce=d[y++];O[te++]=ce>>16&255,O[te++]=ce>>8&255,O[te++]=ce>>0&255}}function on(d,y,S,O,te){for(S=y+S;y<S;){var ce=d[y++];O[te++]=ce>>16&255,O[te++]=ce>>8&255,O[te++]=ce>>0&255,O[te++]=ce>>24&255}}function dn(d,y,S,O,te){for(S=y+S;y<S;){var ce=(fe=d[y++])>>16&240|fe>>12&15,fe=fe>>0&240|fe>>28&15;O[te++]=ce,O[te++]=fe}}function ai(d,y,S,O,te){for(S=y+S;y<S;){var ce=(fe=d[y++])>>16&248|fe>>13&7,fe=fe>>5&224|fe>>3&31;O[te++]=ce,O[te++]=fe}}function Ct(d,y,S,O,te){for(S=y+S;y<S;){var ce=d[y++];O[te++]=ce>>0&255,O[te++]=ce>>8&255,O[te++]=ce>>16&255}}function nn(d,y,S,O,te,ce){if(ce==0)for(S=y+S;y<S;)je(O,((ce=d[y++])[0]>>24|ce[1]>>8&65280|ce[2]<<8&16711680|ce[3]<<24)>>>0),te+=32;else r(O,te,d,y,S)}function Vt(d,y){de[y][0]=de[d+"0"],de[y][1]=de[d+"1"],de[y][2]=de[d+"2"],de[y][3]=de[d+"3"],de[y][4]=de[d+"4"],de[y][5]=de[d+"5"],de[y][6]=de[d+"6"],de[y][7]=de[d+"7"],de[y][8]=de[d+"8"],de[y][9]=de[d+"9"],de[y][10]=de[d+"10"],de[y][11]=de[d+"11"],de[y][12]=de[d+"12"],de[y][13]=de[d+"13"],de[y][14]=de[d+"0"],de[y][15]=de[d+"0"]}function ln(d){return d==ar||d==lr||d==Ss||d==i}function li(){this.eb=[],this.size=this.A=this.fb=0}function In(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function fi(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new li,this.f.kb=new In,this.sd=null}function xi(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Kn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Tt(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function Dt(d,y){var S=d.T,O=y.ba.f.RGBA,te=O.eb,ce=O.fb+d.ka*O.A,fe=Qi[y.ba.S],pe=d.y,ve=d.O,Ae=d.f,Ze=d.N,mt=d.ea,gt=d.W,st=y.cc,Lt=y.dc,bt=y.Mc,Ye=y.Nc,tt=d.ka,St=d.ka+d.T,Nt=d.U,At=Nt+1>>1;for(tt==0?fe(pe,ve,null,null,Ae,Ze,mt,gt,Ae,Ze,mt,gt,te,ce,null,null,Nt):(fe(y.ec,y.fc,pe,ve,st,Lt,bt,Ye,Ae,Ze,mt,gt,te,ce-O.A,te,ce,Nt),++S);tt+2<St;tt+=2)st=Ae,Lt=Ze,bt=mt,Ye=gt,Ze+=d.Rc,gt+=d.Rc,ce+=2*O.A,fe(pe,(ve+=2*d.fa)-d.fa,pe,ve,st,Lt,bt,Ye,Ae,Ze,mt,gt,te,ce-O.A,te,ce,Nt);return ve+=d.fa,d.j+St<d.o?(r(y.ec,y.fc,pe,ve,Nt),r(y.cc,y.dc,Ae,Ze,At),r(y.Mc,y.Nc,mt,gt,At),S--):1&St||fe(pe,ve,null,null,Ae,Ze,mt,gt,Ae,Ze,mt,gt,te,ce+O.A,null,null,Nt),S}function Di(d,y,S){var O=d.F,te=[d.J];if(O!=null){var ce=d.U,fe=y.ba.S,pe=fe==Ur||fe==Ss;y=y.ba.f.RGBA;var ve=[0],Ae=d.ka;ve[0]=d.T,d.Kb&&(Ae==0?--ve[0]:(--Ae,te[0]-=d.width),d.j+d.ka+d.T==d.o&&(ve[0]=d.o-d.j-Ae));var Ze=y.eb;Ae=y.fb+Ae*y.A,d=Gn(O,te[0],d.width,ce,ve,Ze,Ae+(pe?0:3),y.A),t(S==ve),d&&ln(fe)&&zi(Ze,Ae,pe,ce,ve,y.A)}return 0}function qn(d){var y=d.ma,S=y.ba.S,O=11>S,te=S==pn||S==Ro||S==Ur||S==Xi||S==12||ln(S);if(y.memory=null,y.Ib=null,y.Jb=null,y.Nd=null,!Na(y.Oa,d,te?11:12))return 0;if(te&&ln(S)&&Ot(),d.da)alert("todo:use_scaling");else{if(O){if(y.Ib=Tt,d.Kb){if(S=d.U+1>>1,y.memory=a(d.U+2*S),y.memory==null)return 0;y.ec=y.memory,y.fc=0,y.cc=y.ec,y.dc=y.fc+d.U,y.Mc=y.cc,y.Nc=y.dc+S,y.Ib=Dt,Ot()}}else alert("todo:EmitYUV");te&&(y.Jb=Di,O&&ot())}if(O&&!ol){for(d=0;256>d;++d)cu[d]=89858*(d-128)+Rl>>uu,hu[d]=-22014*(d-128)+Rl,af[d]=-45773*(d-128),of[d]=113618*(d-128)+Rl>>uu;for(d=Il;d<qu;++d)y=76283*(d-16)+Rl>>uu,fu[d-Il]=Xn(y,255),Oc[d-Il]=Xn(y+8>>4,15);ol=1}return 1}function ms(d){var y=d.ma,S=d.U,O=d.T;return t(!(1&d.ka)),0>=S||0>=O?0:(S=y.Ib(d,y),y.Jb!=null&&y.Jb(d,y,S),y.Dc+=S,1)}function Mr(d){d.ma.memory=null}function cn(d,y,S,O){return z(d,8)!=47?0:(y[0]=z(d,14)+1,S[0]=z(d,14)+1,O[0]=z(d,1),z(d,3)!=0?0:!d.h)}function Yr(d,y){if(4>d)return d+1;var S=d-2>>1;return(2+(1&d)<<S)+z(y,S)+1}function gs(d,y){return 120<y?y-120:1<=(S=((S=qe[y-1])>>4)*d+(8-(15&S)))?S:1;var S}function cr(d,y,S){var O=G(S),te=d[y+=255&O].g-8;return 0<te&&(D(S,S.u+8),O=G(S),y+=d[y].value,y+=O&(1<<te)-1),D(S,S.u+d[y].g),d[y].value}function Vn(d,y,S){return S.g+=d.g,S.value+=d.value<<y>>>0,t(8>=S.g),d.g}function Ht(d,y,S){var O=d.xc;return t((y=O==0?0:d.vc[d.md*(S>>O)+(y>>O)])<d.Wb),d.Ya[y]}function hr(d,y,S,O){var te=d.ab,ce=d.c*y,fe=d.C;y=fe+y;var pe=S,ve=O;for(O=d.Ta,S=d.Ua;0<te--;){var Ae=d.gc[te],Ze=fe,mt=y,gt=pe,st=ve,Lt=(ve=O,pe=S,Ae.Ea);switch(t(Ze<mt),t(mt<=Ae.nc),Ae.hc){case 2:nl(gt,st,(mt-Ze)*Lt,ve,pe);break;case 0:var bt=Ze,Ye=mt,tt=ve,St=pe,Nt=(s=Ae).Ea;bt==0&&(qs(gt,st,null,null,1,tt,St),Pt(gt,st+1,0,0,Nt-1,tt,St+1),st+=Nt,St+=Nt,++bt);for(var At=1<<s.b,Yt=At-1,$t=et(Nt,s.b),hn=s.K,s=s.w+(bt>>s.b)*$t;bt<Ye;){var l=hn,h=s,p=1;for(Er(gt,st,tt,St-Nt,1,tt,St);p<Nt;){var v=(p&~Yt)+At;v>Nt&&(v=Nt),(0,$s[l[h++]>>8&15])(gt,st+ +p,tt,St+p-Nt,v-p,tt,St+p),p=v}st+=Nt,St+=Nt,++bt&Yt||(s+=$t)}mt!=Ae.nc&&r(ve,pe-Lt,ve,pe+(mt-Ze-1)*Lt,Lt);break;case 1:for(Lt=gt,Ye=st,Nt=(gt=Ae.Ea)-(St=gt&~(tt=(st=1<<Ae.b)-1)),bt=et(gt,Ae.b),At=Ae.K,Ae=Ae.w+(Ze>>Ae.b)*bt;Ze<mt;){for(Yt=At,$t=Ae,hn=new ke,s=Ye+St,l=Ye+gt;Ye<s;)Wt(Yt[$t++],hn),Ls(hn,Lt,Ye,st,ve,pe),Ye+=st,pe+=st;Ye<l&&(Wt(Yt[$t++],hn),Ls(hn,Lt,Ye,Nt,ve,pe),Ye+=Nt,pe+=Nt),++Ze&tt||(Ae+=bt)}break;case 3:if(gt==ve&&st==pe&&0<Ae.b){for(Ye=ve,gt=Lt=pe+(mt-Ze)*Lt-(St=(mt-Ze)*et(Ae.Ea,Ae.b)),st=ve,tt=pe,bt=[],St=(Nt=St)-1;0<=St;--St)bt[St]=st[tt+St];for(St=Nt-1;0<=St;--St)Ye[gt+St]=bt[St];Mi(Ae,Ze,mt,ve,Lt,ve,pe)}else Mi(Ae,Ze,mt,gt,st,ve,pe)}pe=O,ve=S}ve!=S&&r(O,S,pe,ve,ce)}function wo(d,y){var S=d.V,O=d.Ba+d.c*d.C,te=y-d.C;if(t(y<=d.l.o),t(16>=te),0<te){var ce=d.l,fe=d.Ta,pe=d.Ua,ve=ce.width;if(hr(d,te,S,O),te=pe=[pe],t((S=d.C)<(O=y)),t(ce.v<ce.va),O>ce.o&&(O=ce.o),S<ce.j){var Ae=ce.j-S;S=ce.j,te[0]+=Ae*ve}if(S>=O?S=0:(te[0]+=4*ce.v,ce.ka=S-ce.j,ce.U=ce.va-ce.v,ce.T=O-S,S=1),S){if(pe=pe[0],11>(S=d.ca).S){var Ze=S.f.RGBA,mt=(O=S.S,te=ce.U,ce=ce.T,Ae=Ze.eb,Ze.A),gt=ce;for(Ze=Ze.fb+d.Ma*Ze.A;0<gt--;){var st=fe,Lt=pe,bt=te,Ye=Ae,tt=Ze;switch(O){case vr:ji(st,Lt,bt,Ye,tt);break;case pn:Oi(st,Lt,bt,Ye,tt);break;case ar:Oi(st,Lt,bt,Ye,tt),zi(Ye,tt,0,bt,1,0);break;case rl:Fr(st,Lt,bt,Ye,tt);break;case Ro:nn(st,Lt,bt,Ye,tt,1);break;case lr:nn(st,Lt,bt,Ye,tt,1),zi(Ye,tt,0,bt,1,0);break;case Ur:nn(st,Lt,bt,Ye,tt,0);break;case Ss:nn(st,Lt,bt,Ye,tt,0),zi(Ye,tt,1,bt,1,0);break;case Xi:ts(st,Lt,bt,Ye,tt);break;case i:ts(st,Lt,bt,Ye,tt),Jn(Ye,tt,bt,1,0);break;case Nl:pr(st,Lt,bt,Ye,tt);break;default:t(0)}pe+=ve,Ze+=mt}d.Ma+=ce}else alert("todo:EmitRescaledRowsYUVA");t(d.Ma<=S.height)}}d.C=y,t(d.C<=d.i)}function Xr(d){var y;if(0<d.ua)return 0;for(y=0;y<d.Wb;++y){var S=d.Ya[y].G,O=d.Ya[y].H;if(0<S[1][O[1]+0].g||0<S[2][O[2]+0].g||0<S[3][O[3]+0].g)return 0}return 1}function Br(d,y,S,O,te,ce){if(d.Z!=0){var fe=d.qd,pe=d.rd;for(t(Yn[d.Z]!=null);y<S;++y)Yn[d.Z](fe,pe,O,te,O,te,ce),fe=O,pe=te,te+=ce;d.qd=fe,d.rd=pe}}function Lr(d,y){var S=d.l.ma,O=S.Z==0||S.Z==1?d.l.j:d.C;if(O=d.C<O?O:d.C,t(y<=d.l.o),y>O){var te=d.l.width,ce=S.ca,fe=S.tb+te*O,pe=d.V,ve=d.Ba+d.c*O,Ae=d.gc;t(d.ab==1),t(Ae[0].hc==3),Ir(Ae[0],O,y,pe,ve,ce,fe),Br(S,O,y,ce,fe,te)}d.C=d.Ma=y}function Tr(d,y,S,O,te,ce,fe){var pe=d.$/O,ve=d.$%O,Ae=d.m,Ze=d.s,mt=S+d.$,gt=mt;te=S+O*te;var st=S+O*ce,Lt=280+Ze.ua,bt=d.Pb?pe:16777216,Ye=0<Ze.ua?Ze.Wa:null,tt=Ze.wc,St=mt<st?Ht(Ze,ve,pe):null;t(d.C<ce),t(st<=te);var Nt=!1;e:for(;;){for(;Nt||mt<st;){var At=0;if(pe>=bt){var Yt=mt-S;t((bt=d).Pb),bt.wd=bt.m,bt.xd=Yt,0<bt.s.ua&&Ee(bt.s.Wa,bt.s.vb),bt=pe+_t}if(ve&tt||(St=Ht(Ze,ve,pe)),t(St!=null),St.Qb&&(y[mt]=St.qb,Nt=!0),!Nt)if(J(Ae),St.jc){At=Ae,Yt=y;var $t=mt,hn=St.pd[G(At)&Ci-1];t(St.jc),256>hn.g?(D(At,At.u+hn.g),Yt[$t]=hn.value,At=0):(D(At,At.u+hn.g-256),t(256<=hn.value),At=hn.value),At==0&&(Nt=!0)}else At=cr(St.G[0],St.H[0],Ae);if(Ae.h)break;if(Nt||256>At){if(!Nt)if(St.nd)y[mt]=(St.qb|At<<8)>>>0;else{if(J(Ae),Nt=cr(St.G[1],St.H[1],Ae),J(Ae),Yt=cr(St.G[2],St.H[2],Ae),$t=cr(St.G[3],St.H[3],Ae),Ae.h)break;y[mt]=($t<<24|Nt<<16|At<<8|Yt)>>>0}if(Nt=!1,++mt,++ve>=O&&(ve=0,++pe,fe!=null&&pe<=ce&&!(pe%16)&&fe(d,pe),Ye!=null))for(;gt<mt;)At=y[gt++],Ye.X[(506832829*At&4294967295)>>>Ye.Mb]=At}else if(280>At){if(At=Yr(At-256,Ae),Yt=cr(St.G[4],St.H[4],Ae),J(Ae),Yt=gs(O,Yt=Yr(Yt,Ae)),Ae.h)break;if(mt-S<Yt||te-mt<At)break e;for($t=0;$t<At;++$t)y[mt+$t]=y[mt+$t-Yt];for(mt+=At,ve+=At;ve>=O;)ve-=O,++pe,fe!=null&&pe<=ce&&!(pe%16)&&fe(d,pe);if(t(mt<=te),ve&tt&&(St=Ht(Ze,ve,pe)),Ye!=null)for(;gt<mt;)At=y[gt++],Ye.X[(506832829*At&4294967295)>>>Ye.Mb]=At}else{if(!(At<Lt))break e;for(Nt=At-280,t(Ye!=null);gt<mt;)At=y[gt++],Ye.X[(506832829*At&4294967295)>>>Ye.Mb]=At;At=mt,t(!(Nt>>>(Yt=Ye).Xa)),y[At]=Yt.X[Nt],Nt=!0}Nt||t(Ae.h==$(Ae))}if(d.Pb&&Ae.h&&mt<te)t(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&Ee(d.s.vb,d.s.Wa);else{if(Ae.h)break e;fe!=null&&fe(d,pe>ce?ce:pe),d.a=0,d.$=mt-S}return 1}return d.a=3,0}function tr(d){t(d!=null),d.vc=null,d.yc=null,d.Ya=null;var y=d.Wa;y!=null&&(y.X=null),d.vb=null,t(d!=null)}function Cr(){var d=new Ba;return d==null?null:(d.a=0,d.xb=Ol,Vt("Predictor","VP8LPredictors"),Vt("Predictor","VP8LPredictors_C"),Vt("PredictorAdd","VP8LPredictorsAdd"),Vt("PredictorAdd","VP8LPredictorsAdd_C"),nl=Ft,Ls=Ut,ji=Rt,Oi=on,ts=dn,pr=ai,Fr=Ct,de.VP8LMapColor32b=xs,de.VP8LMapColor8b=Do,d)}function vs(d,y,S,O,te){var ce=1,fe=[d],pe=[y],ve=O.m,Ae=O.s,Ze=null,mt=0;e:for(;;){if(S)for(;ce&&z(ve,1);){var gt=fe,st=pe,Lt=O,bt=1,Ye=Lt.m,tt=Lt.gc[Lt.ab],St=z(Ye,2);if(Lt.Oc&1<<St)ce=0;else{switch(Lt.Oc|=1<<St,tt.hc=St,tt.Ea=gt[0],tt.nc=st[0],tt.K=[null],++Lt.ab,t(4>=Lt.ab),St){case 0:case 1:tt.b=z(Ye,3)+2,bt=vs(et(tt.Ea,tt.b),et(tt.nc,tt.b),0,Lt,tt.K),tt.K=tt.K[0];break;case 3:var Nt,At=z(Ye,8)+1,Yt=16<At?0:4<At?1:2<At?2:3;if(gt[0]=et(tt.Ea,Yt),tt.b=Yt,Nt=bt=vs(At,1,0,Lt,tt.K)){var $t,hn=At,s=tt,l=1<<(8>>s.b),h=a(l);if(h==null)Nt=0;else{var p=s.K[0],v=s.w;for(h[0]=s.K[0][0],$t=1;$t<1*hn;++$t)h[$t]=Xe(p[v+$t],h[$t-1]);for(;$t<4*l;++$t)h[$t]=0;s.K[0]=null,s.K[0]=h,Nt=1}}bt=Nt;break;case 2:break;default:t(0)}ce=bt}}if(fe=fe[0],pe=pe[0],ce&&z(ve,1)&&!(ce=1<=(mt=z(ve,4))&&11>=mt)){O.a=3;break e}var k;if(k=ce)t:{var B,T,V,oe=O,Re=fe,Me=pe,Qe=mt,dt=S,Et=oe.m,jt=oe.s,qt=[null],mn=1,Oe=0,ze=ft[Qe];n:for(;;){if(dt&&z(Et,1)){var Ke=z(Et,3)+2,vt=et(Re,Ke),rt=et(Me,Ke),pt=vt*rt;if(!vs(vt,rt,0,oe,qt))break n;for(qt=qt[0],jt.xc=Ke,B=0;B<pt;++B){var K=qt[B]>>8&65535;qt[B]=K,K>=mn&&(mn=K+1)}}if(Et.h)break n;for(T=0;5>T;++T){var ue=P[T];!T&&0<Qe&&(ue+=1<<Qe),Oe<ue&&(Oe=ue)}var we=u(mn*ze,H),_e=mn,xe=u(_e,M);if(xe==null)var Le=null;else t(65536>=_e),Le=xe;var Ge=a(Oe);if(Le==null||Ge==null||we==null){oe.a=1;break n}var Ve=we;for(B=V=0;B<mn;++B){var Je=Le[B],ct=Je.G,ut=Je.H,Mt=0,Kt=1,Qt=0;for(T=0;5>T;++T){ue=P[T],ct[T]=Ve,ut[T]=V,!T&&0<Qe&&(ue+=1<<Qe);r:{var rn,$n=ue,Wn=oe,Rn=Ge,ti=Ve,yr=V,al=0,fo=Wn.m,$u=z(fo,1);if(o(Rn,0,0,$n),$u){var po=z(fo,1)+1,Fl=z(fo,1),rs=z(fo,Fl==0?1:8);Rn[rs]=1,po==2&&(Rn[rs=z(fo,8)]=1);var er=1}else{var bi=a(19),sp=z(fo,4)+4;if(19<sp){Wn.a=3;var zc=0;break r}for(rn=0;rn<sp;++rn)bi[he[rn]]=z(fo,3);var lf=void 0,Vu=void 0,op=Wn,sv=bi,Uc=$n,ap=Rn,uf=0,ll=op.m,lp=8,up=u(128,H);i:for(;q(up,0,7,sv,19);){if(z(ll,1)){var ov=2+2*z(ll,3);if((lf=2+z(ll,ov))>Uc)break i}else lf=Uc;for(Vu=0;Vu<Uc&&lf--;){J(ll);var cp=up[0+(127&G(ll))];D(ll,ll.u+cp.g);var pu=cp.value;if(16>pu)ap[Vu++]=pu,pu!=0&&(lp=pu);else{var av=pu==16,hp=pu-16,lv=g[hp],fp=z(ll,c[hp])+lv;if(Vu+fp>Uc)break i;for(var uv=av?lp:0;0<fp--;)ap[Vu++]=uv}}uf=1;break i}uf||(op.a=3),er=uf}(er=er&&!fo.h)&&(al=q(ti,yr,8,Rn,$n)),er&&al!=0?zc=al:(Wn.a=3,zc=0)}if(zc==0)break n;if(Kt&&R[T]==1&&(Kt=Ve[V].g==0),Mt+=Ve[V].g,V+=zc,3>=T){var Hu,cf=Ge[0];for(Hu=1;Hu<ue;++Hu)Ge[Hu]>cf&&(cf=Ge[Hu]);Qt+=cf}}if(Je.nd=Kt,Je.Qb=0,Kt&&(Je.qb=(ct[3][ut[3]+0].value<<24|ct[1][ut[1]+0].value<<16|ct[2][ut[2]+0].value)>>>0,Mt==0&&256>ct[0][ut[0]+0].value&&(Je.Qb=1,Je.qb+=ct[0][ut[0]+0].value<<8)),Je.jc=!Je.Qb&&6>Qt,Je.jc){var qc,Ra=Je;for(qc=0;qc<Ci;++qc){var ul=qc,cl=Ra.pd[ul],$c=Ra.G[0][Ra.H[0]+ul];256<=$c.value?(cl.g=$c.g+256,cl.value=$c.value):(cl.g=0,cl.value=0,ul>>=Vn($c,8,cl),ul>>=Vn(Ra.G[1][Ra.H[1]+ul],16,cl),ul>>=Vn(Ra.G[2][Ra.H[2]+ul],0,cl),Vn(Ra.G[3][Ra.H[3]+ul],24,cl))}}}jt.vc=qt,jt.Wb=mn,jt.Ya=Le,jt.yc=we,k=1;break t}k=0}if(!(ce=k)){O.a=3;break e}if(0<mt){if(Ae.ua=1<<mt,!Te(Ae.Wa,mt)){O.a=1,ce=0;break e}}else Ae.ua=0;var hf=O,dp=fe,cv=pe,ff=hf.s,df=ff.xc;if(hf.c=dp,hf.i=cv,ff.md=et(dp,df),ff.wc=df==0?-1:(1<<df)-1,S){O.xb=zu;break e}if((Ze=a(fe*pe))==null){O.a=1,ce=0;break e}ce=(ce=Tr(O,Ze,0,fe,pe,pe,null))&&!ve.h;break e}return ce?(te!=null?te[0]=Ze:(t(Ze==null),t(S)),O.$=0,S||tr(Ae)):tr(Ae),ce}function xo(d,y){var S=d.c*d.i,O=S+y+16*y;return t(d.c<=y),d.V=a(O),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+S+y,1)}function Zo(d,y){var S=d.C,O=y-S,te=d.V,ce=d.Ba+d.c*S;for(t(y<=d.l.o);0<O;){var fe=16<O?16:O,pe=d.l.ma,ve=d.l.width,Ae=ve*fe,Ze=pe.ca,mt=pe.tb+ve*S,gt=d.Ta,st=d.Ua;hr(d,fe,te,ce),yi(gt,st,Ze,mt,Ae),Br(pe,S,S+fe,Ze,mt,ve),O-=fe,te+=fe*d.c,S+=fe}t(S==y),d.C=d.Ma=y}function Ko(){this.ub=this.yd=this.td=this.Rb=0}function Ds(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ys(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function Lo(){this.Yb=function(){var d=[];return function y(S,O,te){for(var ce=te[O],fe=0;fe<ce&&(S.push(te.length>O+1?[]:0),!(te.length<O+1));fe++)y(S[fe],O+1,te)}(d,0,[3,11]),d}()}function Ml(){this.jb=a(3),this.Wc=f([4,8],Lo),this.Xc=f([4,17],Lo)}function Bl(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Jo(){this.ld=this.La=this.dd=this.tc=0}function Ka(){this.Na=this.la=0}function Tl(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Co(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ko(){this.uc=this.M=this.Nb=0,this.wa=Array(new Jo),this.Y=0,this.ya=Array(new Co),this.aa=0,this.l=new kr}function xa(){this.y=a(16),this.f=a(8),this.ea=a(8)}function Ja(){this.cb=this.a=0,this.sc="",this.m=new Ie,this.Od=new Ko,this.Kc=new Ds,this.ed=new Bl,this.Qa=new Ys,this.Ic=this.$c=this.Aa=0,this.D=new ko,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=u(8,Ie),this.ia=0,this.pb=u(4,Tl),this.Pa=new Ml,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new xa),this.Hd=0,this.rb=Array(new Ka),this.sb=0,this.wa=Array(new Jo),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Co),this.L=this.aa=0,this.gd=f([4,2],Jo),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function kr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Fn(){var d=new Ja;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,an||(an=_s)),d}function wn(d,y,S){return d.a==0&&(d.a=y,d.sc=S,d.cb=0),0}function Xs(d,y,S){return 3<=S&&d[y+0]==157&&d[y+1]==1&&d[y+2]==42}function Os(d,y){if(d==null)return 0;if(d.a=0,d.sc="OK",y==null)return wn(d,2,"null VP8Io passed to VP8GetHeaders()");var S=y.data,O=y.w,te=y.ha;if(4>te)return wn(d,7,"Truncated header.");var ce=S[O+0]|S[O+1]<<8|S[O+2]<<16,fe=d.Od;if(fe.Rb=!(1&ce),fe.td=ce>>1&7,fe.yd=ce>>4&1,fe.ub=ce>>5,3<fe.td)return wn(d,3,"Incorrect keyframe parameters.");if(!fe.yd)return wn(d,4,"Frame not displayable.");O+=3,te-=3;var pe=d.Kc;if(fe.Rb){if(7>te)return wn(d,7,"cannot parse picture header");if(!Xs(S,O,te))return wn(d,3,"Bad code word");pe.c=16383&(S[O+4]<<8|S[O+3]),pe.Td=S[O+4]>>6,pe.i=16383&(S[O+6]<<8|S[O+5]),pe.Ud=S[O+6]>>6,O+=7,te-=7,d.za=pe.c+15>>4,d.Ub=pe.i+15>>4,y.width=pe.c,y.height=pe.i,y.Da=0,y.j=0,y.v=0,y.va=y.width,y.o=y.height,y.da=0,y.ib=y.width,y.hb=y.height,y.U=y.width,y.T=y.height,o((ce=d.Pa).jb,0,255,ce.jb.length),t((ce=d.Qa)!=null),ce.Cb=0,ce.Bb=0,ce.Fb=1,o(ce.Zb,0,0,ce.Zb.length),o(ce.Lb,0,0,ce.Lb)}if(fe.ub>te)return wn(d,7,"bad partition length");Y(ce=d.m,S,O,fe.ub),O+=fe.ub,te-=fe.ub,fe.Rb&&(pe.Ld=ge(ce),pe.Kd=ge(ce)),pe=d.Qa;var ve,Ae=d.Pa;if(t(ce!=null),t(pe!=null),pe.Cb=ge(ce),pe.Cb){if(pe.Bb=ge(ce),ge(ce)){for(pe.Fb=ge(ce),ve=0;4>ve;++ve)pe.Zb[ve]=ge(ce)?re(ce,7):0;for(ve=0;4>ve;++ve)pe.Lb[ve]=ge(ce)?re(ce,6):0}if(pe.Bb)for(ve=0;3>ve;++ve)Ae.jb[ve]=ge(ce)?Z(ce,8):255}else pe.Bb=0;if(ce.Ka)return wn(d,3,"cannot parse segment header");if((pe=d.ed).zd=ge(ce),pe.Tb=Z(ce,6),pe.wb=Z(ce,3),pe.Pc=ge(ce),pe.Pc&&ge(ce)){for(Ae=0;4>Ae;++Ae)ge(ce)&&(pe.vd[Ae]=re(ce,6));for(Ae=0;4>Ae;++Ae)ge(ce)&&(pe.od[Ae]=re(ce,6))}if(d.L=pe.Tb==0?0:pe.zd?1:2,ce.Ka)return wn(d,3,"cannot parse filter header");var Ze=te;if(te=ve=O,O=ve+Ze,pe=Ze,d.Xb=(1<<Z(d.m,2))-1,Ze<3*(Ae=d.Xb))S=7;else{for(ve+=3*Ae,pe-=3*Ae,Ze=0;Ze<Ae;++Ze){var mt=S[te+0]|S[te+1]<<8|S[te+2]<<16;mt>pe&&(mt=pe),Y(d.Jc[+Ze],S,ve,mt),ve+=mt,pe-=mt,te+=3}Y(d.Jc[+Ae],S,ve,pe),S=ve<O?0:5}if(S!=0)return wn(d,S,"cannot parse partitions");for(S=Z(ve=d.m,7),te=ge(ve)?re(ve,4):0,O=ge(ve)?re(ve,4):0,pe=ge(ve)?re(ve,4):0,Ae=ge(ve)?re(ve,4):0,ve=ge(ve)?re(ve,4):0,Ze=d.Qa,mt=0;4>mt;++mt){if(Ze.Cb){var gt=Ze.Zb[mt];Ze.Fb||(gt+=S)}else{if(0<mt){d.pb[mt]=d.pb[0];continue}gt=S}var st=d.pb[mt];st.Sc[0]=Bt[Xn(gt+te,127)],st.Sc[1]=Zt[Xn(gt+0,127)],st.Eb[0]=2*Bt[Xn(gt+O,127)],st.Eb[1]=101581*Zt[Xn(gt+pe,127)]>>16,8>st.Eb[1]&&(st.Eb[1]=8),st.Qc[0]=Bt[Xn(gt+Ae,117)],st.Qc[1]=Zt[Xn(gt+ve,127)],st.lc=gt+ve}if(!fe.Rb)return wn(d,4,"Not a key frame.");for(ge(ce),fe=d.Pa,S=0;4>S;++S){for(te=0;8>te;++te)for(O=0;3>O;++O)for(pe=0;11>pe;++pe)Ae=me(ce,Es[S][te][O][pe])?Z(ce,8):_r[S][te][O][pe],fe.Wc[S][te].Yb[O][pe]=Ae;for(te=0;17>te;++te)fe.Xc[S][te]=fe.Wc[S][Dl[te]]}return d.kc=ge(ce),d.kc&&(d.Bd=Z(ce,8)),d.cb=1}function _s(d,y,S,O,te,ce,fe){var pe=y[te].Yb[S];for(S=0;16>te;++te){if(!me(d,pe[S+0]))return te;for(;!me(d,pe[S+1]);)if(pe=y[++te].Yb[0],S=0,te==16)return 16;var ve=y[te+1].Yb;if(me(d,pe[S+2])){var Ae=d,Ze=0;if(me(Ae,(gt=pe)[(mt=S)+3]))if(me(Ae,gt[mt+6])){for(pe=0,mt=2*(Ze=me(Ae,gt[mt+8]))+(gt=me(Ae,gt[mt+9+Ze])),Ze=0,gt=An[mt];gt[pe];++pe)Ze+=Ze+me(Ae,gt[pe]);Ze+=3+(8<<mt)}else me(Ae,gt[mt+7])?(Ze=7+2*me(Ae,165),Ze+=me(Ae,145)):Ze=5+me(Ae,159);else Ze=me(Ae,gt[mt+4])?3+me(Ae,gt[mt+5]):2;pe=ve[2]}else Ze=1,pe=ve[1];ve=fe+ur[te],0>(Ae=d).b&&le(Ae);var mt,gt=Ae.b,st=(mt=Ae.Ca>>1)-(Ae.I>>gt)>>31;--Ae.b,Ae.Ca+=st,Ae.Ca|=1,Ae.I-=(mt+1&st)<<gt,ce[ve]=((Ze^st)-st)*O[(0<te)+0]}return 16}function Po(d){var y=d.rb[d.sb-1];y.la=0,y.Na=0,o(d.zc,0,0,d.zc.length),d.ja=0}function Cn(d,y){if(d==null)return 0;if(y==null)return wn(d,2,"NULL VP8Io parameter in VP8Decode().");if(!d.cb&&!Os(d,y))return 0;if(t(d.cb),y.ac==null||y.ac(y)){y.ob&&(d.L=0);var S=du[d.L];if(d.L==2?(d.yb=0,d.zb=0):(d.yb=y.v-S>>4,d.zb=y.j-S>>4,0>d.yb&&(d.yb=0),0>d.zb&&(d.zb=0)),d.Va=y.o+15+S>>4,d.Hb=y.va+15+S>>4,d.Hb>d.za&&(d.Hb=d.za),d.Va>d.Ub&&(d.Va=d.Ub),0<d.L){var O=d.ed;for(S=0;4>S;++S){var te;if(d.Qa.Cb){var ce=d.Qa.Lb[S];d.Qa.Fb||(ce+=O.Tb)}else ce=O.Tb;for(te=0;1>=te;++te){var fe=d.gd[S][te],pe=ce;if(O.Pc&&(pe+=O.vd[0],te&&(pe+=O.od[0])),0<(pe=0>pe?0:63<pe?63:pe)){var ve=pe;0<O.wb&&(ve=4<O.wb?ve>>2:ve>>1)>9-O.wb&&(ve=9-O.wb),1>ve&&(ve=1),fe.dd=ve,fe.tc=2*pe+ve,fe.ld=40<=pe?2:15<=pe?1:0}else fe.tc=0;fe.La=te}}}S=0}else wn(d,6,"Frame setup failed"),S=d.a;if(S=S==0){if(S){d.$c=0,0<d.Aa||(d.Ic=Fc);e:{S=d.Ic,O=4*(ve=d.za);var Ae=32*ve,Ze=ve+1,mt=0<d.L?ve*(0<d.Aa?2:1):0,gt=(d.Aa==2?2:1)*ve;if((fe=O+832+(te=3*(16*S+du[d.L])/2*Ae)+(ce=d.Fa!=null&&0<d.Fa.length?d.Kc.c*d.Kc.i:0))!=fe)S=0;else{if(fe>d.Vb){if(d.Vb=0,d.Ec=a(fe),d.Fc=0,d.Ec==null){S=wn(d,1,"no memory during frame initialization.");break e}d.Vb=fe}fe=d.Ec,pe=d.Fc,d.Ac=fe,d.Bc=pe,pe+=O,d.Gd=u(Ae,xa),d.Hd=0,d.rb=u(Ze+1,Ka),d.sb=1,d.wa=mt?u(mt,Jo):null,d.Y=0,d.D.Nb=0,d.D.wa=d.wa,d.D.Y=d.Y,0<d.Aa&&(d.D.Y+=ve),t(!0),d.oc=fe,d.pc=pe,pe+=832,d.ya=u(gt,Co),d.aa=0,d.D.ya=d.ya,d.D.aa=d.aa,d.Aa==2&&(d.D.aa+=ve),d.R=16*ve,d.B=8*ve,ve=(Ae=du[d.L])*d.R,Ae=Ae/2*d.B,d.sa=fe,d.ta=pe+ve,d.qa=d.sa,d.ra=d.ta+16*S*d.R+Ae,d.Ha=d.qa,d.Ia=d.ra+8*S*d.B+Ae,d.$c=0,pe+=te,d.mb=ce?fe:null,d.nb=ce?pe:null,t(pe+ce<=d.Fc+d.Vb),Po(d),o(d.Ac,d.Bc,0,O),S=1}}if(S){if(y.ka=0,y.y=d.sa,y.O=d.ta,y.f=d.qa,y.N=d.ra,y.ea=d.Ha,y.Vd=d.Ia,y.fa=d.R,y.Rc=d.B,y.F=null,y.J=0,!il){for(S=-255;255>=S;++S)Qn[255+S]=0>S?-S:S;for(S=-1020;1020>=S;++S)ns[1020+S]=-128>S?-128:127<S?127:S;for(S=-112;112>=S;++S)co[112+S]=-16>S?-16:15<S?15:S;for(S=-255;510>=S;++S)Ps[255+S]=0>S?0:255<S?255:S;il=1}Vs=So,jr=Yo,Cs=ys,or=di,Ji=bs,pi=Ya,Oo=Aa,Da=ws,Oa=Or,Yi=ra,mr=na,ao=ia,ks=Ei,ua=el,lo=Ea,uo=un,Hs=nr,zr=Bo,qr[0]=On,qr[1]=La,qr[2]=xn,qr[3]=Nr,qr[4]=ka,qr[5]=no,qr[6]=ea,qr[7]=Dr,qr[8]=Pa,qr[9]=Fs,is[0]=Xo,is[1]=Ca,is[2]=Qr,is[3]=Is,is[4]=Si,is[5]=Xa,is[6]=Qo,Ar[0]=js,Ar[1]=eo,Ar[2]=Eo,Ar[3]=vi,Ar[4]=Ao,Ar[5]=Qa,Ar[6]=ta,S=1}else S=0}S&&(S=function(st,Lt){for(st.M=0;st.M<st.Va;++st.M){var bt,Ye=st.Jc[st.M&st.Xb],tt=st.m,St=st;for(bt=0;bt<St.za;++bt){var Nt=tt,At=St,Yt=At.Ac,$t=At.Bc+4*bt,hn=At.zc,s=At.ya[At.aa+bt];if(At.Qa.Bb?s.$b=me(Nt,At.Pa.jb[0])?2+me(Nt,At.Pa.jb[2]):me(Nt,At.Pa.jb[1]):s.$b=0,At.kc&&(s.Ad=me(Nt,At.Bd)),s.Za=!me(Nt,145)+0,s.Za){var l=s.Ob,h=0;for(At=0;4>At;++At){var p,v=hn[0+At];for(p=0;4>p;++p){v=mi[Yt[$t+p]][v];for(var k=Ti[me(Nt,v[0])];0<k;)k=Ti[2*k+me(Nt,v[k])];v=-k,Yt[$t+p]=v}r(l,h,Yt,$t,4),h+=4,hn[0+At]=v}}else v=me(Nt,156)?me(Nt,128)?1:3:me(Nt,163)?2:0,s.Ob[0]=v,o(Yt,$t,v,4),o(hn,0,v,4);s.Dd=me(Nt,142)?me(Nt,114)?me(Nt,183)?1:3:2:0}if(St.m.Ka)return wn(st,7,"Premature end-of-partition0 encountered.");for(;st.ja<st.za;++st.ja){if(St=Ye,Nt=(tt=st).rb[tt.sb-1],Yt=tt.rb[tt.sb+tt.ja],bt=tt.ya[tt.aa+tt.ja],$t=tt.kc?bt.Ad:0)Nt.la=Yt.la=0,bt.Za||(Nt.Na=Yt.Na=0),bt.Hc=0,bt.Gc=0,bt.ia=0;else{var B,T;if(Nt=Yt,Yt=St,$t=tt.Pa.Xc,hn=tt.ya[tt.aa+tt.ja],s=tt.pb[hn.$b],At=hn.ad,l=0,h=tt.rb[tt.sb-1],v=p=0,o(At,l,0,384),hn.Za)var V=0,oe=$t[3];else{k=a(16);var Re=Nt.Na+h.Na;if(Re=an(Yt,$t[1],Re,s.Eb,0,k,0),Nt.Na=h.Na=(0<Re)+0,1<Re)Vs(k,0,At,l);else{var Me=k[0]+3>>3;for(k=0;256>k;k+=16)At[l+k]=Me}V=1,oe=$t[0]}var Qe=15&Nt.la,dt=15&h.la;for(k=0;4>k;++k){var Et=1&dt;for(Me=T=0;4>Me;++Me)Qe=Qe>>1|(Et=(Re=an(Yt,oe,Re=Et+(1&Qe),s.Sc,V,At,l))>V)<<7,T=T<<2|(3<Re?3:1<Re?2:At[l+0]!=0),l+=16;Qe>>=4,dt=dt>>1|Et<<7,p=(p<<8|T)>>>0}for(oe=Qe,V=dt>>4,B=0;4>B;B+=2){for(T=0,Qe=Nt.la>>4+B,dt=h.la>>4+B,k=0;2>k;++k){for(Et=1&dt,Me=0;2>Me;++Me)Re=Et+(1&Qe),Qe=Qe>>1|(Et=0<(Re=an(Yt,$t[2],Re,s.Qc,0,At,l)))<<3,T=T<<2|(3<Re?3:1<Re?2:At[l+0]!=0),l+=16;Qe>>=2,dt=dt>>1|Et<<5}v|=T<<4*B,oe|=Qe<<4<<B,V|=(240&dt)<<B}Nt.la=oe,h.la=V,hn.Hc=p,hn.Gc=v,hn.ia=43690&v?0:s.ia,$t=!(p|v)}if(0<tt.L&&(tt.wa[tt.Y+tt.ja]=tt.gd[bt.$b][bt.Za],tt.wa[tt.Y+tt.ja].La|=!$t),St.Ka)return wn(st,7,"Premature end-of-file encountered.")}if(Po(st),tt=Lt,St=1,bt=(Ye=st).D,Nt=0<Ye.L&&Ye.M>=Ye.zb&&Ye.M<=Ye.Va,Ye.Aa==0)e:{if(bt.M=Ye.M,bt.uc=Nt,Ta(Ye,bt),St=1,bt=(T=Ye.D).Nb,Nt=(v=du[Ye.L])*Ye.R,Yt=v/2*Ye.B,k=16*bt*Ye.R,Me=8*bt*Ye.B,$t=Ye.sa,hn=Ye.ta-Nt+k,s=Ye.qa,At=Ye.ra-Yt+Me,l=Ye.Ha,h=Ye.Ia-Yt+Me,dt=(Qe=T.M)==0,p=Qe>=Ye.Va-1,Ye.Aa==2&&Ta(Ye,T),T.uc)for(Et=(Re=Ye).D.M,t(Re.D.uc),T=Re.yb;T<Re.Hb;++T){V=T,oe=Et;var jt=(qt=(ue=Re).D).Nb;B=ue.R;var qt=qt.wa[qt.Y+V],mn=ue.sa,Oe=ue.ta+16*jt*B+16*V,ze=qt.dd,Ke=qt.tc;if(Ke!=0)if(t(3<=Ke),ue.L==1)0<V&&uo(mn,Oe,B,Ke+4),qt.La&&zr(mn,Oe,B,Ke),0<oe&&lo(mn,Oe,B,Ke+4),qt.La&&Hs(mn,Oe,B,Ke);else{var vt=ue.B,rt=ue.qa,pt=ue.ra+8*jt*vt+8*V,K=ue.Ha,ue=ue.Ia+8*jt*vt+8*V;jt=qt.ld,0<V&&(Da(mn,Oe,B,Ke+4,ze,jt),Yi(rt,pt,K,ue,vt,Ke+4,ze,jt)),qt.La&&(ao(mn,Oe,B,Ke,ze,jt),ua(rt,pt,K,ue,vt,Ke,ze,jt)),0<oe&&(Oo(mn,Oe,B,Ke+4,ze,jt),Oa(rt,pt,K,ue,vt,Ke+4,ze,jt)),qt.La&&(mr(mn,Oe,B,Ke,ze,jt),ks(rt,pt,K,ue,vt,Ke,ze,jt))}}if(Ye.ia&&alert("todo:DitherRow"),tt.put!=null){if(T=16*Qe,Qe=16*(Qe+1),dt?(tt.y=Ye.sa,tt.O=Ye.ta+k,tt.f=Ye.qa,tt.N=Ye.ra+Me,tt.ea=Ye.Ha,tt.W=Ye.Ia+Me):(T-=v,tt.y=$t,tt.O=hn,tt.f=s,tt.N=At,tt.ea=l,tt.W=h),p||(Qe-=v),Qe>tt.o&&(Qe=tt.o),tt.F=null,tt.J=null,Ye.Fa!=null&&0<Ye.Fa.length&&T<Qe&&(tt.J=_i(Ye,tt,T,Qe-T),tt.F=Ye.mb,tt.F==null&&tt.F.length==0)){St=wn(Ye,3,"Could not decode alpha data.");break e}T<tt.j&&(v=tt.j-T,T=tt.j,t(!(1&v)),tt.O+=Ye.R*v,tt.N+=Ye.B*(v>>1),tt.W+=Ye.B*(v>>1),tt.F!=null&&(tt.J+=tt.width*v)),T<Qe&&(tt.O+=tt.v,tt.N+=tt.v>>1,tt.W+=tt.v>>1,tt.F!=null&&(tt.J+=tt.v),tt.ka=T-tt.j,tt.U=tt.va-tt.v,tt.T=Qe-T,St=tt.put(tt))}bt+1!=Ye.Ic||p||(r(Ye.sa,Ye.ta-Nt,$t,hn+16*Ye.R,Nt),r(Ye.qa,Ye.ra-Yt,s,At+8*Ye.B,Yt),r(Ye.Ha,Ye.Ia-Yt,l,h+8*Ye.B,Yt))}if(!St)return wn(st,6,"Output aborted.")}return 1}(d,y)),y.bc!=null&&y.bc(y),S&=1}return S?(d.cb=0,S):0}function zn(d,y,S,O,te){te=d[y+S+32*O]+(te>>3),d[y+S+32*O]=-256&te?0>te?0:255:te}function Qs(d,y,S,O,te,ce){zn(d,y,0,S,O+te),zn(d,y,1,S,O+ce),zn(d,y,2,S,O-ce),zn(d,y,3,S,O-te)}function Fi(d){return(20091*d>>16)+d}function Zi(d,y,S,O){var te,ce=0,fe=a(16);for(te=0;4>te;++te){var pe=d[y+0]+d[y+8],ve=d[y+0]-d[y+8],Ae=(35468*d[y+4]>>16)-Fi(d[y+12]),Ze=Fi(d[y+4])+(35468*d[y+12]>>16);fe[ce+0]=pe+Ze,fe[ce+1]=ve+Ae,fe[ce+2]=ve-Ae,fe[ce+3]=pe-Ze,ce+=4,y++}for(te=ce=0;4>te;++te)pe=(d=fe[ce+0]+4)+fe[ce+8],ve=d-fe[ce+8],Ae=(35468*fe[ce+4]>>16)-Fi(fe[ce+12]),zn(S,O,0,0,pe+(Ze=Fi(fe[ce+4])+(35468*fe[ce+12]>>16))),zn(S,O,1,0,ve+Ae),zn(S,O,2,0,ve-Ae),zn(S,O,3,0,pe-Ze),ce++,O+=32}function Ya(d,y,S,O){var te=d[y+0]+4,ce=35468*d[y+4]>>16,fe=Fi(d[y+4]),pe=35468*d[y+1]>>16;Qs(S,O,0,te+fe,d=Fi(d[y+1]),pe),Qs(S,O,1,te+ce,d,pe),Qs(S,O,2,te-ce,d,pe),Qs(S,O,3,te-fe,d,pe)}function Yo(d,y,S,O,te){Zi(d,y,S,O),te&&Zi(d,y+16,S,O+4)}function ys(d,y,S,O){jr(d,y+0,S,O,1),jr(d,y+32,S,O+128,1)}function di(d,y,S,O){var te;for(d=d[y+0]+4,te=0;4>te;++te)for(y=0;4>y;++y)zn(S,O,y,te,d)}function bs(d,y,S,O){d[y+0]&&or(d,y+0,S,O),d[y+16]&&or(d,y+16,S,O+4),d[y+32]&&or(d,y+32,S,O+128),d[y+48]&&or(d,y+48,S,O+128+4)}function So(d,y,S,O){var te,ce=a(16);for(te=0;4>te;++te){var fe=d[y+0+te]+d[y+12+te],pe=d[y+4+te]+d[y+8+te],ve=d[y+4+te]-d[y+8+te],Ae=d[y+0+te]-d[y+12+te];ce[0+te]=fe+pe,ce[8+te]=fe-pe,ce[4+te]=Ae+ve,ce[12+te]=Ae-ve}for(te=0;4>te;++te)fe=(d=ce[0+4*te]+3)+ce[3+4*te],pe=ce[1+4*te]+ce[2+4*te],ve=ce[1+4*te]-ce[2+4*te],Ae=d-ce[3+4*te],S[O+0]=fe+pe>>3,S[O+16]=Ae+ve>>3,S[O+32]=fe-pe>>3,S[O+48]=Ae-ve>>3,O+=64}function Rs(d,y,S){var O,te=y-32,ce=ei,fe=255-d[te-1];for(O=0;O<S;++O){var pe,ve=ce,Ae=fe+d[y-1];for(pe=0;pe<S;++pe)d[y+pe]=ve[Ae+d[te+pe]];y+=32}}function La(d,y){Rs(d,y,4)}function eo(d,y){Rs(d,y,8)}function Ca(d,y){Rs(d,y,16)}function Qr(d,y){var S;for(S=0;16>S;++S)r(d,y+32*S,d,y-32,16)}function Is(d,y){var S;for(S=16;0<S;--S)o(d,y,d[y-1],16),y+=32}function to(d,y,S){var O;for(O=0;16>O;++O)o(y,S+32*O,d,16)}function Xo(d,y){var S,O=16;for(S=0;16>S;++S)O+=d[y-1+32*S]+d[y+S-32];to(O>>5,d,y)}function Si(d,y){var S,O=8;for(S=0;16>S;++S)O+=d[y-1+32*S];to(O>>4,d,y)}function Xa(d,y){var S,O=8;for(S=0;16>S;++S)O+=d[y+S-32];to(O>>4,d,y)}function Qo(d,y){to(128,d,y)}function yn(d,y,S){return d+2*y+S+2>>2}function xn(d,y){var S,O=y-32;for(O=new Uint8Array([yn(d[O-1],d[O+0],d[O+1]),yn(d[O+0],d[O+1],d[O+2]),yn(d[O+1],d[O+2],d[O+3]),yn(d[O+2],d[O+3],d[O+4])]),S=0;4>S;++S)r(d,y+32*S,O,0,O.length)}function Nr(d,y){var S=d[y-1],O=d[y-1+32],te=d[y-1+64],ce=d[y-1+96];je(d,y+0,16843009*yn(d[y-1-32],S,O)),je(d,y+32,16843009*yn(S,O,te)),je(d,y+64,16843009*yn(O,te,ce)),je(d,y+96,16843009*yn(te,ce,ce))}function On(d,y){var S,O=4;for(S=0;4>S;++S)O+=d[y+S-32]+d[y-1+32*S];for(O>>=3,S=0;4>S;++S)o(d,y+32*S,O,4)}function ka(d,y){var S=d[y-1+0],O=d[y-1+32],te=d[y-1+64],ce=d[y-1-32],fe=d[y+0-32],pe=d[y+1-32],ve=d[y+2-32],Ae=d[y+3-32];d[y+0+96]=yn(O,te,d[y-1+96]),d[y+1+96]=d[y+0+64]=yn(S,O,te),d[y+2+96]=d[y+1+64]=d[y+0+32]=yn(ce,S,O),d[y+3+96]=d[y+2+64]=d[y+1+32]=d[y+0+0]=yn(fe,ce,S),d[y+3+64]=d[y+2+32]=d[y+1+0]=yn(pe,fe,ce),d[y+3+32]=d[y+2+0]=yn(ve,pe,fe),d[y+3+0]=yn(Ae,ve,pe)}function ea(d,y){var S=d[y+1-32],O=d[y+2-32],te=d[y+3-32],ce=d[y+4-32],fe=d[y+5-32],pe=d[y+6-32],ve=d[y+7-32];d[y+0+0]=yn(d[y+0-32],S,O),d[y+1+0]=d[y+0+32]=yn(S,O,te),d[y+2+0]=d[y+1+32]=d[y+0+64]=yn(O,te,ce),d[y+3+0]=d[y+2+32]=d[y+1+64]=d[y+0+96]=yn(te,ce,fe),d[y+3+32]=d[y+2+64]=d[y+1+96]=yn(ce,fe,pe),d[y+3+64]=d[y+2+96]=yn(fe,pe,ve),d[y+3+96]=yn(pe,ve,ve)}function no(d,y){var S=d[y-1+0],O=d[y-1+32],te=d[y-1+64],ce=d[y-1-32],fe=d[y+0-32],pe=d[y+1-32],ve=d[y+2-32],Ae=d[y+3-32];d[y+0+0]=d[y+1+64]=ce+fe+1>>1,d[y+1+0]=d[y+2+64]=fe+pe+1>>1,d[y+2+0]=d[y+3+64]=pe+ve+1>>1,d[y+3+0]=ve+Ae+1>>1,d[y+0+96]=yn(te,O,S),d[y+0+64]=yn(O,S,ce),d[y+0+32]=d[y+1+96]=yn(S,ce,fe),d[y+1+32]=d[y+2+96]=yn(ce,fe,pe),d[y+2+32]=d[y+3+96]=yn(fe,pe,ve),d[y+3+32]=yn(pe,ve,Ae)}function Dr(d,y){var S=d[y+0-32],O=d[y+1-32],te=d[y+2-32],ce=d[y+3-32],fe=d[y+4-32],pe=d[y+5-32],ve=d[y+6-32],Ae=d[y+7-32];d[y+0+0]=S+O+1>>1,d[y+1+0]=d[y+0+64]=O+te+1>>1,d[y+2+0]=d[y+1+64]=te+ce+1>>1,d[y+3+0]=d[y+2+64]=ce+fe+1>>1,d[y+0+32]=yn(S,O,te),d[y+1+32]=d[y+0+96]=yn(O,te,ce),d[y+2+32]=d[y+1+96]=yn(te,ce,fe),d[y+3+32]=d[y+2+96]=yn(ce,fe,pe),d[y+3+64]=yn(fe,pe,ve),d[y+3+96]=yn(pe,ve,Ae)}function Fs(d,y){var S=d[y-1+0],O=d[y-1+32],te=d[y-1+64],ce=d[y-1+96];d[y+0+0]=S+O+1>>1,d[y+2+0]=d[y+0+32]=O+te+1>>1,d[y+2+32]=d[y+0+64]=te+ce+1>>1,d[y+1+0]=yn(S,O,te),d[y+3+0]=d[y+1+32]=yn(O,te,ce),d[y+3+32]=d[y+1+64]=yn(te,ce,ce),d[y+3+64]=d[y+2+64]=d[y+0+96]=d[y+1+96]=d[y+2+96]=d[y+3+96]=ce}function Pa(d,y){var S=d[y-1+0],O=d[y-1+32],te=d[y-1+64],ce=d[y-1+96],fe=d[y-1-32],pe=d[y+0-32],ve=d[y+1-32],Ae=d[y+2-32];d[y+0+0]=d[y+2+32]=S+fe+1>>1,d[y+0+32]=d[y+2+64]=O+S+1>>1,d[y+0+64]=d[y+2+96]=te+O+1>>1,d[y+0+96]=ce+te+1>>1,d[y+3+0]=yn(pe,ve,Ae),d[y+2+0]=yn(fe,pe,ve),d[y+1+0]=d[y+3+32]=yn(S,fe,pe),d[y+1+32]=d[y+3+64]=yn(O,S,fe),d[y+1+64]=d[y+3+96]=yn(te,O,S),d[y+1+96]=yn(ce,te,O)}function Eo(d,y){var S;for(S=0;8>S;++S)r(d,y+32*S,d,y-32,8)}function vi(d,y){var S;for(S=0;8>S;++S)o(d,y,d[y-1],8),y+=32}function Pr(d,y,S){var O;for(O=0;8>O;++O)o(y,S+32*O,d,8)}function js(d,y){var S,O=8;for(S=0;8>S;++S)O+=d[y+S-32]+d[y-1+32*S];Pr(O>>4,d,y)}function Qa(d,y){var S,O=4;for(S=0;8>S;++S)O+=d[y+S-32];Pr(O>>3,d,y)}function Ao(d,y){var S,O=4;for(S=0;8>S;++S)O+=d[y-1+32*S];Pr(O>>3,d,y)}function ta(d,y){Pr(128,d,y)}function io(d,y,S){var O=d[y-S],te=d[y+0],ce=3*(te-O)+ho[1020+d[y-2*S]-d[y+S]],fe=Bi[112+(ce+4>>3)];d[y-S]=ei[255+O+Bi[112+(ce+3>>3)]],d[y+0]=ei[255+te-fe]}function Mo(d,y,S,O){var te=d[y+0],ce=d[y+S];return gr[255+d[y-2*S]-d[y-S]]>O||gr[255+ce-te]>O}function Sa(d,y,S,O){return 4*gr[255+d[y-S]-d[y+0]]+gr[255+d[y-2*S]-d[y+S]]<=O}function Bn(d,y,S,O,te){var ce=d[y-3*S],fe=d[y-2*S],pe=d[y-S],ve=d[y+0],Ae=d[y+S],Ze=d[y+2*S],mt=d[y+3*S];return 4*gr[255+pe-ve]+gr[255+fe-Ae]>O?0:gr[255+d[y-4*S]-ce]<=te&&gr[255+ce-fe]<=te&&gr[255+fe-pe]<=te&&gr[255+mt-Ze]<=te&&gr[255+Ze-Ae]<=te&&gr[255+Ae-ve]<=te}function Ea(d,y,S,O){var te=2*O+1;for(O=0;16>O;++O)Sa(d,y+O,S,te)&&io(d,y+O,S)}function un(d,y,S,O){var te=2*O+1;for(O=0;16>O;++O)Sa(d,y+O*S,1,te)&&io(d,y+O*S,1)}function nr(d,y,S,O){var te;for(te=3;0<te;--te)Ea(d,y+=4*S,S,O)}function Bo(d,y,S,O){var te;for(te=3;0<te;--te)un(d,y+=4,S,O)}function ro(d,y,S,O,te,ce,fe,pe){for(ce=2*ce+1;0<te--;){if(Bn(d,y,S,ce,fe))if(Mo(d,y,S,pe))io(d,y,S);else{var ve=d,Ae=y,Ze=S,mt=ve[Ae-2*Ze],gt=ve[Ae-Ze],st=ve[Ae+0],Lt=ve[Ae+Ze],bt=ve[Ae+2*Ze],Ye=27*(St=ho[1020+3*(st-gt)+ho[1020+mt-Lt]])+63>>7,tt=18*St+63>>7,St=9*St+63>>7;ve[Ae-3*Ze]=ei[255+ve[Ae-3*Ze]+St],ve[Ae-2*Ze]=ei[255+mt+tt],ve[Ae-Ze]=ei[255+gt+Ye],ve[Ae+0]=ei[255+st-Ye],ve[Ae+Ze]=ei[255+Lt-tt],ve[Ae+2*Ze]=ei[255+bt-St]}y+=O}}function fr(d,y,S,O,te,ce,fe,pe){for(ce=2*ce+1;0<te--;){if(Bn(d,y,S,ce,fe))if(Mo(d,y,S,pe))io(d,y,S);else{var ve=d,Ae=y,Ze=S,mt=ve[Ae-Ze],gt=ve[Ae+0],st=ve[Ae+Ze],Lt=Bi[112+((bt=3*(gt-mt))+4>>3)],bt=Bi[112+(bt+3>>3)],Ye=Lt+1>>1;ve[Ae-2*Ze]=ei[255+ve[Ae-2*Ze]+Ye],ve[Ae-Ze]=ei[255+mt+bt],ve[Ae+0]=ei[255+gt-Lt],ve[Ae+Ze]=ei[255+st-Ye]}y+=O}}function Aa(d,y,S,O,te,ce){ro(d,y,S,1,16,O,te,ce)}function ws(d,y,S,O,te,ce){ro(d,y,1,S,16,O,te,ce)}function na(d,y,S,O,te,ce){var fe;for(fe=3;0<fe;--fe)fr(d,y+=4*S,S,1,16,O,te,ce)}function ia(d,y,S,O,te,ce){var fe;for(fe=3;0<fe;--fe)fr(d,y+=4,1,S,16,O,te,ce)}function Or(d,y,S,O,te,ce,fe,pe){ro(d,y,te,1,8,ce,fe,pe),ro(S,O,te,1,8,ce,fe,pe)}function ra(d,y,S,O,te,ce,fe,pe){ro(d,y,1,te,8,ce,fe,pe),ro(S,O,1,te,8,ce,fe,pe)}function Ei(d,y,S,O,te,ce,fe,pe){fr(d,y+4*te,te,1,8,ce,fe,pe),fr(S,O+4*te,te,1,8,ce,fe,pe)}function el(d,y,S,O,te,ce,fe,pe){fr(d,y+4,1,te,8,ce,fe,pe),fr(S,O+4,1,te,8,ce,fe,pe)}function To(){this.ba=new fi,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Kn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Rr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function sa(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ma(){this.ua=0,this.Wa=new ie,this.vb=new ie,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new M,this.yc=new H}function Ba(){this.xb=this.a=0,this.l=new kr,this.ca=new fi,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new I,this.Pb=0,this.wd=new I,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ma,this.ab=0,this.gc=u(4,sa),this.Oc=0}function oa(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new kr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function so(d,y,S,O,te,ce,fe){for(d=d==null?0:d[y+0],y=0;y<fe;++y)te[ce+y]=d+S[O+y]&255,d=te[ce+y]}function No(d,y,S,O,te,ce,fe){var pe;if(d==null)so(null,null,S,O,te,ce,fe);else for(pe=0;pe<fe;++pe)te[ce+pe]=d[y+pe]+S[O+pe]&255}function oo(d,y,S,O,te,ce,fe){if(d==null)so(null,null,S,O,te,ce,fe);else{var pe,ve=d[y+0],Ae=ve,Ze=ve;for(pe=0;pe<fe;++pe)Ae=Ze+(ve=d[y+pe])-Ae,Ze=S[O+pe]+(-256&Ae?0>Ae?0:255:Ae)&255,Ae=ve,te[ce+pe]=Ze}}function _i(d,y,S,O){var te=y.width,ce=y.o;if(t(d!=null&&y!=null),0>S||0>=O||S+O>ce)return null;if(!d.Cc){if(d.ga==null){var fe;if(d.ga=new oa,(fe=d.ga==null)||(fe=y.width*y.o,t(d.Gb.length==0),d.Gb=a(fe),d.Uc=0,d.Gb==null?fe=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,fe=1),fe=!fe),!fe){fe=d.ga;var pe=d.Fa,ve=d.P,Ae=d.qc,Ze=d.mb,mt=d.nb,gt=ve+1,st=Ae-1,Lt=fe.l;if(t(pe!=null&&Ze!=null&&y!=null),Yn[0]=null,Yn[1]=so,Yn[2]=No,Yn[3]=oo,fe.ca=Ze,fe.tb=mt,fe.c=y.width,fe.i=y.height,t(0<fe.c&&0<fe.i),1>=Ae)y=0;else if(fe.$a=pe[ve+0]>>0&3,fe.Z=pe[ve+0]>>2&3,fe.Lc=pe[ve+0]>>4&3,ve=pe[ve+0]>>6&3,0>fe.$a||1<fe.$a||4<=fe.Z||1<fe.Lc||ve)y=0;else if(Lt.put=ms,Lt.ac=qn,Lt.bc=Mr,Lt.ma=fe,Lt.width=y.width,Lt.height=y.height,Lt.Da=y.Da,Lt.v=y.v,Lt.va=y.va,Lt.j=y.j,Lt.o=y.o,fe.$a)e:{t(fe.$a==1),y=Cr();t:for(;;){if(y==null){y=0;break e}if(t(fe!=null),fe.mc=y,y.c=fe.c,y.i=fe.i,y.l=fe.l,y.l.ma=fe,y.l.width=fe.c,y.l.height=fe.i,y.a=0,W(y.m,pe,gt,st),!vs(fe.c,fe.i,1,y,null)||(y.ab==1&&y.gc[0].hc==3&&Xr(y.s)?(fe.ic=1,pe=y.c*y.i,y.Ta=null,y.Ua=0,y.V=a(pe),y.Ba=0,y.V==null?(y.a=1,y=0):y=1):(fe.ic=0,y=xo(y,fe.c)),!y))break t;y=1;break e}fe.mc=null,y=0}else y=st>=fe.c*fe.i;fe=!y}if(fe)return null;d.ga.Lc!=1?d.Ga=0:O=ce-S}t(d.ga!=null),t(S+O<=ce);e:{if(y=(pe=d.ga).c,ce=pe.l.o,pe.$a==0){if(gt=d.rc,st=d.Vc,Lt=d.Fa,ve=d.P+1+S*y,Ae=d.mb,Ze=d.nb+S*y,t(ve<=d.P+d.qc),pe.Z!=0)for(t(Yn[pe.Z]!=null),fe=0;fe<O;++fe)Yn[pe.Z](gt,st,Lt,ve,Ae,Ze,y),gt=Ae,st=Ze,Ze+=y,ve+=y;else for(fe=0;fe<O;++fe)r(Ae,Ze,Lt,ve,y),gt=Ae,st=Ze,Ze+=y,ve+=y;d.rc=gt,d.Vc=st}else{if(t(pe.mc!=null),y=S+O,t((fe=pe.mc)!=null),t(y<=fe.i),fe.C>=y)y=1;else if(pe.ic||ot(),pe.ic){pe=fe.V,gt=fe.Ba,st=fe.c;var bt=fe.i,Ye=(Lt=1,ve=fe.$/st,Ae=fe.$%st,Ze=fe.m,mt=fe.s,fe.$),tt=st*bt,St=st*y,Nt=mt.wc,At=Ye<St?Ht(mt,Ae,ve):null;t(Ye<=tt),t(y<=bt),t(Xr(mt));t:for(;;){for(;!Ze.h&&Ye<St;){if(Ae&Nt||(At=Ht(mt,Ae,ve)),t(At!=null),J(Ze),256>(bt=cr(At.G[0],At.H[0],Ze)))pe[gt+Ye]=bt,++Ye,++Ae>=st&&(Ae=0,++ve<=y&&!(ve%16)&&Lr(fe,ve));else{if(!(280>bt)){Lt=0;break t}bt=Yr(bt-256,Ze);var Yt,$t=cr(At.G[4],At.H[4],Ze);if(J(Ze),!(Ye>=($t=gs(st,$t=Yr($t,Ze)))&&tt-Ye>=bt)){Lt=0;break t}for(Yt=0;Yt<bt;++Yt)pe[gt+Ye+Yt]=pe[gt+Ye+Yt-$t];for(Ye+=bt,Ae+=bt;Ae>=st;)Ae-=st,++ve<=y&&!(ve%16)&&Lr(fe,ve);Ye<St&&Ae&Nt&&(At=Ht(mt,Ae,ve))}t(Ze.h==$(Ze))}Lr(fe,ve>y?y:ve);break t}!Lt||Ze.h&&Ye<tt?(Lt=0,fe.a=Ze.h?5:3):fe.$=Ye,y=Lt}else y=Tr(fe,fe.V,fe.Ba,fe.c,fe.i,y,Zo);if(!y){O=0;break e}}S+O>=ce&&(d.Cc=1),O=1}if(!O)return null;if(d.Cc&&((O=d.ga)!=null&&(O.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+S*te}function C(d,y,S,O,te,ce){for(;0<te--;){var fe,pe=d,ve=y+(S?1:0),Ae=d,Ze=y+(S?0:3);for(fe=0;fe<O;++fe){var mt=Ae[Ze+4*fe];mt!=255&&(mt*=32897,pe[ve+4*fe+0]=pe[ve+4*fe+0]*mt>>23,pe[ve+4*fe+1]=pe[ve+4*fe+1]*mt>>23,pe[ve+4*fe+2]=pe[ve+4*fe+2]*mt>>23)}y+=ce}}function ee(d,y,S,O,te){for(;0<O--;){var ce;for(ce=0;ce<S;++ce){var fe=d[y+2*ce+0],pe=15&(Ae=d[y+2*ce+1]),ve=4369*pe,Ae=(240&Ae|Ae>>4)*ve>>16;d[y+2*ce+0]=(240&fe|fe>>4)*ve>>16&240|(15&fe|fe<<4)*ve>>16>>4&15,d[y+2*ce+1]=240&Ae|pe}y+=te}}function Ne(d,y,S,O,te,ce,fe,pe){var ve,Ae,Ze=255;for(Ae=0;Ae<te;++Ae){for(ve=0;ve<O;++ve){var mt=d[y+ve];ce[fe+4*ve]=mt,Ze&=mt}y+=S,fe+=pe}return Ze!=255}function He(d,y,S,O,te){var ce;for(ce=0;ce<te;++ce)S[O+ce]=d[y+ce]>>8}function ot(){zi=C,Jn=ee,Gn=Ne,yi=He}function yt(d,y,S){de[d]=function(O,te,ce,fe,pe,ve,Ae,Ze,mt,gt,st,Lt,bt,Ye,tt,St,Nt){var At,Yt=Nt-1>>1,$t=pe[ve+0]|Ae[Ze+0]<<16,hn=mt[gt+0]|st[Lt+0]<<16;t(O!=null);var s=3*$t+hn+131074>>2;for(y(O[te+0],255&s,s>>16,bt,Ye),ce!=null&&(s=3*hn+$t+131074>>2,y(ce[fe+0],255&s,s>>16,tt,St)),At=1;At<=Yt;++At){var l=pe[ve+At]|Ae[Ze+At]<<16,h=mt[gt+At]|st[Lt+At]<<16,p=$t+l+hn+h+524296,v=p+2*(l+hn)>>3;s=v+$t>>1,$t=(p=p+2*($t+h)>>3)+l>>1,y(O[te+2*At-1],255&s,s>>16,bt,Ye+(2*At-1)*S),y(O[te+2*At-0],255&$t,$t>>16,bt,Ye+(2*At-0)*S),ce!=null&&(s=p+hn>>1,$t=v+h>>1,y(ce[fe+2*At-1],255&s,s>>16,tt,St+(2*At-1)*S),y(ce[fe+2*At+0],255&$t,$t>>16,tt,St+(2*At+0)*S)),$t=l,hn=h}1&Nt||(s=3*$t+hn+131074>>2,y(O[te+Nt-1],255&s,s>>16,bt,Ye+(Nt-1)*S),ce!=null&&(s=3*hn+$t+131074>>2,y(ce[fe+Nt-1],255&s,s>>16,tt,St+(Nt-1)*S)))}}function Ot(){Qi[vr]=Uu,Qi[pn]=au,Qi[rl]=As,Qi[Ro]=Io,Qi[Ur]=sl,Qi[Xi]=lu,Qi[Nl]=Dc,Qi[ar]=au,Qi[lr]=Io,Qi[Ss]=sl,Qi[i]=lu}function Gt(d){return d&-16384?0>d?0:255:d>>sf}function Jt(d,y){return Gt((19077*d>>8)+(26149*y>>8)-14234)}function sn(d,y,S){return Gt((19077*d>>8)-(6419*y>>8)-(13320*S>>8)+8708)}function vn(d,y){return Gt((19077*d>>8)+(33050*y>>8)-17685)}function Tn(d,y,S,O,te){O[te+0]=Jt(d,S),O[te+1]=sn(d,y,S),O[te+2]=vn(d,y)}function si(d,y,S,O,te){O[te+0]=vn(d,y),O[te+1]=sn(d,y,S),O[te+2]=Jt(d,S)}function jn(d,y,S,O,te){var ce=sn(d,y,S);y=ce<<3&224|vn(d,y)>>3,O[te+0]=248&Jt(d,S)|ce>>5,O[te+1]=y}function Hn(d,y,S,O,te){var ce=240&vn(d,y)|15;O[te+0]=240&Jt(d,S)|sn(d,y,S)>>4,O[te+1]=ce}function Ai(d,y,S,O,te){O[te+0]=255,Tn(d,y,S,O,te+1)}function Li(d,y,S,O,te){si(d,y,S,O,te),O[te+3]=255}function Sr(d,y,S,O,te){Tn(d,y,S,O,te),O[te+3]=255}function Xn(d,y){return 0>d?0:d>y?y:d}function ir(d,y,S){de[d]=function(O,te,ce,fe,pe,ve,Ae,Ze,mt){for(var gt=Ze+(-2&mt)*S;Ze!=gt;)y(O[te+0],ce[fe+0],pe[ve+0],Ae,Ze),y(O[te+1],ce[fe+0],pe[ve+0],Ae,Ze+S),te+=2,++fe,++ve,Ze+=2*S;1&mt&&y(O[te+0],ce[fe+0],pe[ve+0],Ae,Ze)}}function tl(d,y,S){return S==0?d==0?y==0?6:5:y==0?4:0:S}function rr(d,y,S,O,te){switch(d>>>30){case 3:jr(y,S,O,te,0);break;case 2:pi(y,S,O,te);break;case 1:or(y,S,O,te)}}function Ta(d,y){var S,O,te=y.M,ce=y.Nb,fe=d.oc,pe=d.pc+40,ve=d.oc,Ae=d.pc+584,Ze=d.oc,mt=d.pc+600;for(S=0;16>S;++S)fe[pe+32*S-1]=129;for(S=0;8>S;++S)ve[Ae+32*S-1]=129,Ze[mt+32*S-1]=129;for(0<te?fe[pe-1-32]=ve[Ae-1-32]=Ze[mt-1-32]=129:(o(fe,pe-32-1,127,21),o(ve,Ae-32-1,127,9),o(Ze,mt-32-1,127,9)),O=0;O<d.za;++O){var gt=y.ya[y.aa+O];if(0<O){for(S=-1;16>S;++S)r(fe,pe+32*S-4,fe,pe+32*S+12,4);for(S=-1;8>S;++S)r(ve,Ae+32*S-4,ve,Ae+32*S+4,4),r(Ze,mt+32*S-4,Ze,mt+32*S+4,4)}var st=d.Gd,Lt=d.Hd+O,bt=gt.ad,Ye=gt.Hc;if(0<te&&(r(fe,pe-32,st[Lt].y,0,16),r(ve,Ae-32,st[Lt].f,0,8),r(Ze,mt-32,st[Lt].ea,0,8)),gt.Za){var tt=fe,St=pe-32+16;for(0<te&&(O>=d.za-1?o(tt,St,st[Lt].y[15],4):r(tt,St,st[Lt+1].y,0,4)),S=0;4>S;S++)tt[St+128+S]=tt[St+256+S]=tt[St+384+S]=tt[St+0+S];for(S=0;16>S;++S,Ye<<=2)tt=fe,St=pe+Rc[S],qr[gt.Ob[S]](tt,St),rr(Ye,bt,16*+S,tt,St)}else if(tt=tl(O,te,gt.Ob[0]),is[tt](fe,pe),Ye!=0)for(S=0;16>S;++S,Ye<<=2)rr(Ye,bt,16*+S,fe,pe+Rc[S]);for(S=gt.Gc,tt=tl(O,te,gt.Dd),Ar[tt](ve,Ae),Ar[tt](Ze,mt),Ye=bt,tt=ve,St=Ae,255&(gt=S>>0)&&(170&gt?Cs(Ye,256,tt,St):Ji(Ye,256,tt,St)),gt=Ze,Ye=mt,255&(S>>=8)&&(170&S?Cs(bt,320,gt,Ye):Ji(bt,320,gt,Ye)),te<d.Ub-1&&(r(st[Lt].y,0,fe,pe+480,16),r(st[Lt].f,0,ve,Ae+224,8),r(st[Lt].ea,0,Ze,mt+224,8)),S=8*ce*d.B,st=d.sa,Lt=d.ta+16*O+16*ce*d.R,bt=d.qa,gt=d.ra+8*O+S,Ye=d.Ha,tt=d.Ia+8*O+S,S=0;16>S;++S)r(st,Lt+S*d.R,fe,pe+32*S,16);for(S=0;8>S;++S)r(bt,gt+S*d.B,ve,Ae+32*S,8),r(Ye,tt+S*d.B,Ze,mt+32*S,8)}}function es(d,y,S,O,te,ce,fe,pe,ve){var Ae=[0],Ze=[0],mt=0,gt=ve!=null?ve.kd:0,st=ve??new Rr;if(d==null||12>S)return 7;st.data=d,st.w=y,st.ha=S,y=[y],S=[S],st.gb=[st.gb];e:{var Lt=y,bt=S,Ye=st.gb;if(t(d!=null),t(bt!=null),t(Ye!=null),Ye[0]=0,12<=bt[0]&&!n(d,Lt[0],"RIFF")){if(n(d,Lt[0]+8,"WEBP")){Ye=3;break e}var tt=se(d,Lt[0]+4);if(12>tt||4294967286<tt){Ye=3;break e}if(gt&&tt>bt[0]-8){Ye=7;break e}Ye[0]=tt,Lt[0]+=12,bt[0]-=12}Ye=0}if(Ye!=0)return Ye;for(tt=0<st.gb[0],S=S[0];;){e:{var St=d;bt=y,Ye=S;var Nt=Ae,At=Ze,Yt=Lt=[0];if((s=mt=[mt])[0]=0,8>Ye[0])Ye=7;else{if(!n(St,bt[0],"VP8X")){if(se(St,bt[0]+4)!=10){Ye=3;break e}if(18>Ye[0]){Ye=7;break e}var $t=se(St,bt[0]+8),hn=1+X(St,bt[0]+12);if(2147483648<=hn*(St=1+X(St,bt[0]+15))){Ye=3;break e}Yt!=null&&(Yt[0]=$t),Nt!=null&&(Nt[0]=hn),At!=null&&(At[0]=St),bt[0]+=18,Ye[0]-=18,s[0]=1}Ye=0}}if(mt=mt[0],Lt=Lt[0],Ye!=0)return Ye;if(bt=!!(2&Lt),!tt&&mt)return 3;if(ce!=null&&(ce[0]=!!(16&Lt)),fe!=null&&(fe[0]=bt),pe!=null&&(pe[0]=0),fe=Ae[0],Lt=Ze[0],mt&&bt&&ve==null){Ye=0;break}if(4>S){Ye=7;break}if(tt&&mt||!tt&&!mt&&!n(d,y[0],"ALPH")){S=[S],st.na=[st.na],st.P=[st.P],st.Sa=[st.Sa];e:{$t=d,Ye=y,tt=S;var s=st.gb;Nt=st.na,At=st.P,Yt=st.Sa,hn=22,t($t!=null),t(tt!=null),St=Ye[0];var l=tt[0];for(t(Nt!=null),t(Yt!=null),Nt[0]=null,At[0]=null,Yt[0]=0;;){if(Ye[0]=St,tt[0]=l,8>l){Ye=7;break e}var h=se($t,St+4);if(4294967286<h){Ye=3;break e}var p=8+h+1&-2;if(hn+=p,0<s&&hn>s){Ye=3;break e}if(!n($t,St,"VP8 ")||!n($t,St,"VP8L")){Ye=0;break e}if(l[0]<p){Ye=7;break e}n($t,St,"ALPH")||(Nt[0]=$t,At[0]=St+8,Yt[0]=h),St+=p,l-=p}}if(S=S[0],st.na=st.na[0],st.P=st.P[0],st.Sa=st.Sa[0],Ye!=0)break}S=[S],st.Ja=[st.Ja],st.xa=[st.xa];e:if(s=d,Ye=y,tt=S,Nt=st.gb[0],At=st.Ja,Yt=st.xa,$t=Ye[0],St=!n(s,$t,"VP8 "),hn=!n(s,$t,"VP8L"),t(s!=null),t(tt!=null),t(At!=null),t(Yt!=null),8>tt[0])Ye=7;else{if(St||hn){if(s=se(s,$t+4),12<=Nt&&s>Nt-12){Ye=3;break e}if(gt&&s>tt[0]-8){Ye=7;break e}At[0]=s,Ye[0]+=8,tt[0]-=8,Yt[0]=hn}else Yt[0]=5<=tt[0]&&s[$t+0]==47&&!(s[$t+4]>>5),At[0]=tt[0];Ye=0}if(S=S[0],st.Ja=st.Ja[0],st.xa=st.xa[0],y=y[0],Ye!=0)break;if(4294967286<st.Ja)return 3;if(pe==null||bt||(pe[0]=st.xa?2:1),fe=[fe],Lt=[Lt],st.xa){if(5>S){Ye=7;break}pe=fe,gt=Lt,bt=ce,d==null||5>S?d=0:5<=S&&d[y+0]==47&&!(d[y+4]>>5)?(tt=[0],s=[0],Nt=[0],W(At=new I,d,y,S),cn(At,tt,s,Nt)?(pe!=null&&(pe[0]=tt[0]),gt!=null&&(gt[0]=s[0]),bt!=null&&(bt[0]=Nt[0]),d=1):d=0):d=0}else{if(10>S){Ye=7;break}pe=Lt,d==null||10>S||!Xs(d,y+3,S-3)?d=0:(gt=d[y+0]|d[y+1]<<8|d[y+2]<<16,bt=16383&(d[y+7]<<8|d[y+6]),d=16383&(d[y+9]<<8|d[y+8]),1&gt||3<(gt>>1&7)||!(gt>>4&1)||gt>>5>=st.Ja||!bt||!d?d=0:(fe&&(fe[0]=bt),pe&&(pe[0]=d),d=1))}if(!d||(fe=fe[0],Lt=Lt[0],mt&&(Ae[0]!=fe||Ze[0]!=Lt)))return 3;ve!=null&&(ve[0]=st,ve.offset=y-ve.w,t(4294967286>y-ve.w),t(ve.offset==ve.ha-S));break}return Ye==0||Ye==7&&mt&&ve==null?(ce!=null&&(ce[0]|=st.na!=null&&0<st.na.length),O!=null&&(O[0]=fe),te!=null&&(te[0]=Lt),0):Ye}function Na(d,y,S){var O=y.width,te=y.height,ce=0,fe=0,pe=O,ve=te;if(y.Da=d!=null&&0<d.Da,y.Da&&(pe=d.cd,ve=d.bd,ce=d.v,fe=d.j,11>S||(ce&=-2,fe&=-2),0>ce||0>fe||0>=pe||0>=ve||ce+pe>O||fe+ve>te))return 0;if(y.v=ce,y.j=fe,y.va=ce+pe,y.o=fe+ve,y.U=pe,y.T=ve,y.da=d!=null&&0<d.da,y.da){if(!We(pe,ve,S=[d.ib],ce=[d.hb]))return 0;y.ib=S[0],y.hb=ce[0]}return y.ob=d!=null&&d.ob,y.Kb=d==null||!d.Sd,y.da&&(y.ob=y.ib<3*O/4&&y.hb<3*te/4,y.Kb=0),1}function zs(d){if(d==null)return 2;if(11>d.S){var y=d.f.RGBA;y.fb+=(d.height-1)*y.A,y.A=-y.A}else y=d.f.kb,d=d.height,y.O+=(d-1)*y.fa,y.fa=-y.fa,y.N+=(d-1>>1)*y.Ab,y.Ab=-y.Ab,y.W+=(d-1>>1)*y.Db,y.Db=-y.Db,y.F!=null&&(y.J+=(d-1)*y.lb,y.lb=-y.lb);return 0}function Us(d,y,S,O){if(O==null||0>=d||0>=y)return 2;if(S!=null){if(S.Da){var te=S.cd,ce=S.bd,fe=-2&S.v,pe=-2&S.j;if(0>fe||0>pe||0>=te||0>=ce||fe+te>d||pe+ce>y)return 2;d=te,y=ce}if(S.da){if(!We(d,y,te=[S.ib],ce=[S.hb]))return 2;d=te[0],y=ce[0]}}O.width=d,O.height=y;e:{var ve=O.width,Ae=O.height;if(d=O.S,0>=ve||0>=Ae||!(d>=vr&&13>d))d=2;else{if(0>=O.Rd&&O.sd==null){fe=ce=te=y=0;var Ze=(pe=ve*jc[d])*Ae;if(11>d||(ce=(Ae+1)/2*(y=(ve+1)/2),d==12&&(fe=(te=ve)*Ae)),(Ae=a(Ze+2*ce+fe))==null){d=1;break e}O.sd=Ae,11>d?((ve=O.f.RGBA).eb=Ae,ve.fb=0,ve.A=pe,ve.size=Ze):((ve=O.f.kb).y=Ae,ve.O=0,ve.fa=pe,ve.Fd=Ze,ve.f=Ae,ve.N=0+Ze,ve.Ab=y,ve.Cd=ce,ve.ea=Ae,ve.W=0+Ze+ce,ve.Db=y,ve.Ed=ce,d==12&&(ve.F=Ae,ve.J=0+Ze+2*ce),ve.Tc=fe,ve.lb=te)}if(y=1,te=O.S,ce=O.width,fe=O.height,te>=vr&&13>te)if(11>te)d=O.f.RGBA,y&=(pe=Math.abs(d.A))*(fe-1)+ce<=d.size,y&=pe>=ce*jc[te],y&=d.eb!=null;else{d=O.f.kb,pe=(ce+1)/2,Ze=(fe+1)/2,ve=Math.abs(d.fa),Ae=Math.abs(d.Ab);var mt=Math.abs(d.Db),gt=Math.abs(d.lb),st=gt*(fe-1)+ce;y&=ve*(fe-1)+ce<=d.Fd,y&=Ae*(Ze-1)+pe<=d.Cd,y=(y&=mt*(Ze-1)+pe<=d.Ed)&ve>=ce&Ae>=pe&mt>=pe,y&=d.y!=null,y&=d.f!=null,y&=d.ea!=null,te==12&&(y&=gt>=ce,y&=st<=d.Tc,y&=d.F!=null)}else y=0;d=y?0:2}}return d!=0||S!=null&&S.fd&&(d=zs(O)),d}var Ci=64,aa=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],dr=24,sr=32,la=8,Ki=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];De("Predictor0","PredictorAdd0"),de.Predictor0=function(){return 4278190080},de.Predictor1=function(d){return d},de.Predictor2=function(d,y,S){return y[S+0]},de.Predictor3=function(d,y,S){return y[S+1]},de.Predictor4=function(d,y,S){return y[S-1]},de.Predictor5=function(d,y,S){return lt(lt(d,y[S+1]),y[S+0])},de.Predictor6=function(d,y,S){return lt(d,y[S-1])},de.Predictor7=function(d,y,S){return lt(d,y[S+0])},de.Predictor8=function(d,y,S){return lt(y[S-1],y[S+0])},de.Predictor9=function(d,y,S){return lt(y[S+0],y[S+1])},de.Predictor10=function(d,y,S){return lt(lt(d,y[S-1]),lt(y[S+0],y[S+1]))},de.Predictor11=function(d,y,S){var O=y[S+0];return 0>=Fe(O>>24&255,d>>24&255,(y=y[S-1])>>24&255)+Fe(O>>16&255,d>>16&255,y>>16&255)+Fe(O>>8&255,d>>8&255,y>>8&255)+Fe(255&O,255&d,255&y)?O:d},de.Predictor12=function(d,y,S){var O=y[S+0];return(ht((d>>24&255)+(O>>24&255)-((y=y[S-1])>>24&255))<<24|ht((d>>16&255)+(O>>16&255)-(y>>16&255))<<16|ht((d>>8&255)+(O>>8&255)-(y>>8&255))<<8|ht((255&d)+(255&O)-(255&y)))>>>0},de.Predictor13=function(d,y,S){var O=y[S-1];return(it((d=lt(d,y[S+0]))>>24&255,O>>24&255)<<24|it(d>>16&255,O>>16&255)<<16|it(d>>8&255,O>>8&255)<<8|it(d>>0&255,O>>0&255))>>>0};var qs=de.PredictorAdd0;de.PredictorAdd1=Pt,De("Predictor2","PredictorAdd2"),De("Predictor3","PredictorAdd3"),De("Predictor4","PredictorAdd4"),De("Predictor5","PredictorAdd5"),De("Predictor6","PredictorAdd6"),De("Predictor7","PredictorAdd7"),De("Predictor8","PredictorAdd8"),De("Predictor9","PredictorAdd9"),De("Predictor10","PredictorAdd10"),De("Predictor11","PredictorAdd11"),De("Predictor12","PredictorAdd12"),De("Predictor13","PredictorAdd13");var Er=de.PredictorAdd2;Xt("ColorIndexInverseTransform","MapARGB","32b",function(d){return d>>8&255},function(d){return d}),Xt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(d){return d},function(d){return d>>8&255});var nl,Mi=de.ColorIndexInverseTransform,xs=de.MapARGB,Ir=de.VP8LColorIndexInverseTransformAlpha,Do=de.MapAlpha,$s=de.VP8LPredictorsAdd=[];$s.length=16,(de.VP8LPredictors=[]).length=16,(de.VP8LPredictorsAdd_C=[]).length=16,(de.VP8LPredictors_C=[]).length=16;var Ls,ji,Oi,ts,pr,Fr,Vs,jr,pi,Cs,or,Ji,Oo,Da,Oa,Yi,mr,ao,ks,ua,lo,uo,Hs,zr,zi,Jn,Gn,yi,Qn=a(511),ns=a(2041),co=a(225),Ps=a(767),il=0,ho=ns,Bi=co,ei=Ps,gr=Qn,vr=0,pn=1,rl=2,Ro=3,Ur=4,Xi=5,Nl=6,ar=7,lr=8,Ss=9,i=10,c=[2,3,7],g=[3,3,11],P=[280,256,256,256,40],R=[0,1,1,1,0],he=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],qe=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ft=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],_t=8,Bt=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Zt=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],an=null,An=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ur=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Ti=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],_r=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],mi=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Es=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Dl=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],is=[],qr=[],Ar=[],zu=1,Ol=2,Yn=[],Qi=[];yt("UpsampleRgbLinePair",Tn,3),yt("UpsampleBgrLinePair",si,3),yt("UpsampleRgbaLinePair",Sr,4),yt("UpsampleBgraLinePair",Li,4),yt("UpsampleArgbLinePair",Ai,4),yt("UpsampleRgba4444LinePair",Hn,2),yt("UpsampleRgb565LinePair",jn,2);var Uu=de.UpsampleRgbLinePair,As=de.UpsampleBgrLinePair,au=de.UpsampleRgbaLinePair,Io=de.UpsampleBgraLinePair,sl=de.UpsampleArgbLinePair,lu=de.UpsampleRgba4444LinePair,Dc=de.UpsampleRgb565LinePair,uu=16,Rl=1<<uu-1,Il=-227,qu=482,sf=6,ol=0,cu=a(256),of=a(256),af=a(256),hu=a(256),fu=a(qu-Il),Oc=a(qu-Il);ir("YuvToRgbRow",Tn,3),ir("YuvToBgrRow",si,3),ir("YuvToRgbaRow",Sr,4),ir("YuvToBgraRow",Li,4),ir("YuvToArgbRow",Ai,4),ir("YuvToRgba4444Row",Hn,2),ir("YuvToRgb565Row",jn,2);var Rc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],du=[0,2,8],Ic=[8,7,6,4,4,2,2,2,1,1,1,1],Fc=1;this.WebPDecodeRGBA=function(d,y,S,O,te){var ce=pn,fe=new To,pe=new fi;fe.ba=pe,pe.S=ce,pe.width=[pe.width],pe.height=[pe.height];var ve=pe.width,Ae=pe.height,Ze=new xi;if(Ze==null||d==null)var mt=2;else t(Ze!=null),mt=es(d,y,S,Ze.width,Ze.height,Ze.Pd,Ze.Qd,Ze.format,null);if(mt!=0?ve=0:(ve!=null&&(ve[0]=Ze.width[0]),Ae!=null&&(Ae[0]=Ze.height[0]),ve=1),ve){pe.width=pe.width[0],pe.height=pe.height[0],O!=null&&(O[0]=pe.width),te!=null&&(te[0]=pe.height);e:{if(O=new kr,(te=new Rr).data=d,te.w=y,te.ha=S,te.kd=1,y=[0],t(te!=null),((d=es(te.data,te.w,te.ha,null,null,null,y,null,te))==0||d==7)&&y[0]&&(d=4),(y=d)==0){if(t(fe!=null),O.data=te.data,O.w=te.w+te.offset,O.ha=te.ha-te.offset,O.put=ms,O.ac=qn,O.bc=Mr,O.ma=fe,te.xa){if((d=Cr())==null){fe=1;break e}if(function(gt,st){var Lt=[0],bt=[0],Ye=[0];t:for(;;){if(gt==null)return 0;if(st==null)return gt.a=2,0;if(gt.l=st,gt.a=0,W(gt.m,st.data,st.w,st.ha),!cn(gt.m,Lt,bt,Ye)){gt.a=3;break t}if(gt.xb=Ol,st.width=Lt[0],st.height=bt[0],!vs(Lt[0],bt[0],1,gt,null))break t;return 1}return t(gt.a!=0),0}(d,O)){if(O=(y=Us(O.width,O.height,fe.Oa,fe.ba))==0){t:{O=d;n:for(;;){if(O==null){O=0;break t}if(t(O.s.yc!=null),t(O.s.Ya!=null),t(0<O.s.Wb),t((S=O.l)!=null),t((te=S.ma)!=null),O.xb!=0){if(O.ca=te.ba,O.tb=te.tb,t(O.ca!=null),!Na(te.Oa,S,Ro)){O.a=2;break n}if(!xo(O,S.width)||S.da)break n;if((S.da||ln(O.ca.S))&&ot(),11>O.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),O.ca.f.kb.F!=null&&ot()),O.Pb&&0<O.s.ua&&O.s.vb.X==null&&!Te(O.s.vb,O.s.Wa.Xa)){O.a=1;break n}O.xb=0}if(!Tr(O,O.V,O.Ba,O.c,O.i,S.o,wo))break n;te.Dc=O.Ma,O=1;break t}t(O.a!=0),O=0}O=!O}O&&(y=d.a)}else y=d.a}else{if((d=new Fn)==null){fe=1;break e}if(d.Fa=te.na,d.P=te.P,d.qc=te.Sa,Os(d,O)){if((y=Us(O.width,O.height,fe.Oa,fe.ba))==0){if(d.Aa=0,S=fe.Oa,t((te=d)!=null),S!=null){if(0<(ve=0>(ve=S.Md)?0:100<ve?255:255*ve/100)){for(Ae=Ze=0;4>Ae;++Ae)12>(mt=te.pb[Ae]).lc&&(mt.ia=ve*Ic[0>mt.lc?0:mt.lc]>>3),Ze|=mt.ia;Ze&&(alert("todo:VP8InitRandom"),te.ia=1)}te.Ga=S.Id,100<te.Ga?te.Ga=100:0>te.Ga&&(te.Ga=0)}Cn(d,O)||(y=d.a)}}else y=d.a}y==0&&fe.Oa!=null&&fe.Oa.fd&&(y=zs(fe.ba))}fe=y}ce=fe!=0?null:11>ce?pe.f.RGBA.eb:pe.f.kb.y}else ce=null;return ce};var jc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function _(de,Be){for(var Ue="",q=0;q<4;q++)Ue+=String.fromCharCode(de[Be++]);return Ue}function w(de,Be){return(de[Be+0]<<0|de[Be+1]<<8|de[Be+2]<<16)>>>0}function b(de,Be){return(de[Be+0]<<0|de[Be+1]<<8|de[Be+2]<<16|de[Be+3]<<24)>>>0}new m;var E=[0],x=[0],F=[],N=new m,U=e,j=function(de,Be){var Ue={},q=0,H=!1,Se=0,M=0;if(Ue.frames=[],!function(G,$,D,J){for(var le=0;le<J;le++)if(G[$+le]!=D.charCodeAt(le))return!0;return!1}(de,Be,"RIFF",4)){var Y,Z;for(b(de,Be+=4),Be+=8;Be<de.length;){var re=_(de,Be),W=b(de,Be+=4);Be+=4;var Q=W+(1&W);switch(re){case"VP8 ":case"VP8L":Ue.frames[q]===void 0&&(Ue.frames[q]={}),(I=Ue.frames[q]).src_off=H?M:Be-8,I.src_size=Se+W+8,q++,H&&(H=!1,Se=0,M=0);break;case"VP8X":(I=Ue.header={}).feature_flags=de[Be];var z=Be+4;I.canvas_width=1+w(de,z),z+=3,I.canvas_height=1+w(de,z),z+=3;break;case"ALPH":H=!0,Se=Q+8,M=Be-8;break;case"ANIM":(I=Ue.header).bgcolor=b(de,Be),z=Be+4,I.loop_count=(Y=de)[(Z=z)+0]<<0|Y[Z+1]<<8,z+=2;break;case"ANMF":var Ie,I;(I=Ue.frames[q]={}).offset_x=2*w(de,Be),Be+=3,I.offset_y=2*w(de,Be),Be+=3,I.width=1+w(de,Be),Be+=3,I.height=1+w(de,Be),Be+=3,I.duration=w(de,Be),Be+=3,Ie=de[Be++],I.dispose=1&Ie,I.blend=Ie>>1&1}re!="ANMF"&&(Be+=Q)}return Ue}}(U,0);j.response=U,j.rgbaoutput=!0,j.dataurl=!1;var ne=j.header?j.header:null,ae=j.frames?j.frames:null;if(ne){ne.loop_counter=ne.loop_count,E=[ne.canvas_height],x=[ne.canvas_width];for(var be=0;be<ae.length&&ae[be].blend!=0;be++);}var ye=ae[0],Pe=N.WebPDecodeRGBA(U,ye.src_off,ye.src_size,x,E);ye.rgba=Pe,ye.imgwidth=x[0],ye.imgheight=E[0];for(var Ce=0;Ce<x[0]*E[0]*4;Ce++)F[Ce]=Pe[Ce];return this.width=x,this.height=E,this.data=F,this}(function(e){var t=function(){return typeof Ld=="function"},n=function(E,x,F,N){var U=4,j=u;switch(N){case e.image_compression.FAST:U=1,j=a;break;case e.image_compression.MEDIUM:U=6,j=f;break;case e.image_compression.SLOW:U=9,j=m}E=r(E,x,F,j);var ne=Ld(E,{level:U});return e.__addimage__.arrayBufferToBinaryString(ne)},r=function(E,x,F,N){for(var U,j,ne,ae=E.length/x,be=new Uint8Array(E.length+ae),ye=w(),Pe=0;Pe<ae;Pe+=1){if(ne=Pe*x,U=E.subarray(ne,ne+x),N)be.set(N(U,F,j),ne+Pe);else{for(var Ce,de=ye.length,Be=[];Ce<de;Ce+=1)Be[Ce]=ye[Ce](U,F,j);var Ue=b(Be.concat());be.set(Be[Ue],ne+Pe)}j=U}return be},o=function(E){var x=Array.apply([],E);return x.unshift(0),x},a=function(E,x){var F,N=[],U=E.length;N[0]=1;for(var j=0;j<U;j+=1)F=E[j-x]||0,N[j+1]=E[j]-F+256&255;return N},u=function(E,x,F){var N,U=[],j=E.length;U[0]=2;for(var ne=0;ne<j;ne+=1)N=F&&F[ne]||0,U[ne+1]=E[ne]-N+256&255;return U},f=function(E,x,F){var N,U,j=[],ne=E.length;j[0]=3;for(var ae=0;ae<ne;ae+=1)N=E[ae-x]||0,U=F&&F[ae]||0,j[ae+1]=E[ae]+256-(N+U>>>1)&255;return j},m=function(E,x,F){var N,U,j,ne,ae=[],be=E.length;ae[0]=4;for(var ye=0;ye<be;ye+=1)N=E[ye-x]||0,U=F&&F[ye]||0,j=F&&F[ye-x]||0,ne=_(N,U,j),ae[ye+1]=E[ye]-ne+256&255;return ae},_=function(E,x,F){if(E===x&&x===F)return E;var N=Math.abs(x-F),U=Math.abs(E-F),j=Math.abs(E+x-F-F);return N<=U&&N<=j?E:U<=j?x:F},w=function(){return[o,a,u,f,m]},b=function(E){var x=E.map(function(F){return F.reduce(function(N,U){return N+Math.abs(U)},0)});return x.indexOf(Math.min.apply(null,x))};e.processPNG=function(E,x,F,N){var U,j,ne,ae,be,ye,Pe,Ce,de,Be,Ue,q,H,Se,M,Y=this.decode.FLATE_DECODE,Z="";if(this.__addimage__.isArrayBuffer(E)&&(E=new Uint8Array(E)),this.__addimage__.isArrayBufferView(E)){if(E=(ne=new rC(E)).imgData,j=ne.bits,U=ne.colorSpace,be=ne.colors,[4,6].indexOf(ne.colorType)!==-1){if(ne.bits===8){de=(Ce=ne.pixelBitlength==32?new Uint32Array(ne.decodePixels().buffer):ne.pixelBitlength==16?new Uint16Array(ne.decodePixels().buffer):new Uint8Array(ne.decodePixels().buffer)).length,Ue=new Uint8Array(de*ne.colors),Be=new Uint8Array(de);var re,W=ne.pixelBitlength-ne.bits;for(Se=0,M=0;Se<de;Se++){for(H=Ce[Se],re=0;re<W;)Ue[M++]=H>>>re&255,re+=ne.bits;Be[Se]=H>>>re&255}}if(ne.bits===16){de=(Ce=new Uint32Array(ne.decodePixels().buffer)).length,Ue=new Uint8Array(de*(32/ne.pixelBitlength)*ne.colors),Be=new Uint8Array(de*(32/ne.pixelBitlength)),q=ne.colors>1,Se=0,M=0;for(var Q=0;Se<de;)H=Ce[Se++],Ue[M++]=H>>>0&255,q&&(Ue[M++]=H>>>16&255,H=Ce[Se++],Ue[M++]=H>>>0&255),Be[Q++]=H>>>16&255;j=8}N!==e.image_compression.NONE&&t()?(E=n(Ue,ne.width*ne.colors,ne.colors,N),Pe=n(Be,ne.width,1,N)):(E=Ue,Pe=Be,Y=void 0)}if(ne.colorType===3&&(U=this.color_spaces.INDEXED,ye=ne.palette,ne.transparency.indexed)){var z=ne.transparency.indexed,Ie=0;for(Se=0,de=z.length;Se<de;++Se)Ie+=z[Se];if((Ie/=255)===de-1&&z.indexOf(0)!==-1)ae=[z.indexOf(0)];else if(Ie!==de){for(Ce=ne.decodePixels(),Be=new Uint8Array(Ce.length),Se=0,de=Ce.length;Se<de;Se++)Be[Se]=z[Ce[Se]];Pe=n(Be,ne.width,1)}}var I=function(G){var $;switch(G){case e.image_compression.FAST:$=11;break;case e.image_compression.MEDIUM:$=13;break;case e.image_compression.SLOW:$=14;break;default:$=12}return $}(N);return Y===this.decode.FLATE_DECODE&&(Z="/Predictor "+I+" "),Z+="/Colors "+be+" /BitsPerComponent "+j+" /Columns "+ne.width,(this.__addimage__.isArrayBuffer(E)||this.__addimage__.isArrayBufferView(E))&&(E=this.__addimage__.arrayBufferToBinaryString(E)),(Pe&&this.__addimage__.isArrayBuffer(Pe)||this.__addimage__.isArrayBufferView(Pe))&&(Pe=this.__addimage__.arrayBufferToBinaryString(Pe)),{alias:F,data:E,index:x,filter:Y,decodeParameters:Z,transparency:ae,palette:ye,sMask:Pe,predictor:I,width:ne.width,height:ne.height,bitsPerComponent:j,colorSpace:U}}}})(_n.API),function(e){e.processGIF89A=function(t,n,r,o){var a=new sC(t),u=a.width,f=a.height,m=[];a.decodeAndBlitFrameRGBA(0,m);var _={data:m,width:u,height:f},w=new Gf(100).encode(_,100);return e.processJPEG.call(this,w,n,r,o)},e.processGIF87A=e.processGIF89A}(_n.API),jo.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:o,green:r,blue:n,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},jo.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){ui.log("bit decode error:"+n)}},jo.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,o=0;o<t;o++)for(var a=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+8*o*4,f=0;f<8&&8*o+f<this.width;f++){var m=this.palette[a>>7-f&1];this.data[u+4*f]=m.blue,this.data[u+4*f+1]=m.green,this.data[u+4*f+2]=m.red,this.data[u+4*f+3]=255}n!==0&&(this.pos+=4-n)}},jo.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,o=0;o<e;o++){var a=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+2*o*4,f=a>>4,m=15&a,_=this.palette[f];if(this.data[u]=_.blue,this.data[u+1]=_.green,this.data[u+2]=_.red,this.data[u+3]=255,2*o+1>=this.width)break;_=this.palette[m],this.data[u+4]=_.blue,this.data[u+4+1]=_.green,this.data[u+4+2]=_.red,this.data[u+4+3]=255}t!==0&&(this.pos+=4-t)}},jo.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var o=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+4*r;if(o<this.palette.length){var u=this.palette[o];this.data[a]=u.red,this.data[a+1]=u.green,this.data[a+2]=u.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}e!==0&&(this.pos+=4-e)}},jo.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(a&t)/t*255|0,f=(a>>5&t)/t*255|0,m=(a>>10&t)/t*255|0,_=a>>15?255:0,w=r*this.width*4+4*o;this.data[w]=m,this.data[w+1]=f,this.data[w+2]=u,this.data[w+3]=_}this.pos+=e}},jo.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var o=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var f=(u&t)/t*255|0,m=(u>>5&n)/n*255|0,_=(u>>11)/t*255|0,w=o*this.width*4+4*a;this.data[w]=_,this.data[w+1]=m,this.data[w+2]=f,this.data[w+3]=255}this.pos+=e}},jo.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),u=t*this.width*4+4*n;this.data[u]=a,this.data[u+1]=o,this.data[u+2]=r,this.data[u+3]=255}this.pos+=this.width%4}},jo.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),f=t*this.width*4+4*n;this.data[f]=a,this.data[f+1]=o,this.data[f+2]=r,this.data[f+3]=u}},jo.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,o){var a=new jo(t,!1),u=a.width,f=a.height,m={data:a.getData(),width:u,height:f},_=new Gf(100).encode(m,100);return e.processJPEG.call(this,_,n,r,o)}}(_n.API),gm.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,o){var a=new gm(t),u=a.width,f=a.height,m={data:a.getData(),width:u,height:f},_=new Gf(100).encode(m,100);return e.processJPEG.call(this,_,n,r,o)}}(_n.API),_n.API.processRGBA=function(e,t,n){for(var r=e.data,o=r.length,a=new Uint8Array(o/4*3),u=new Uint8Array(o/4),f=0,m=0,_=0;_<o;_+=4){var w=r[_],b=r[_+1],E=r[_+2],x=r[_+3];a[f++]=w,a[f++]=b,a[f++]=E,u[m++]=x}var F=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(u),data:F,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},_n.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},yu=_n.API,Qc=yu.getCharWidthsArray=function(e,t){var n,r,o=(t=t||{}).font||this.internal.getFont(),a=t.fontSize||this.internal.getFontSize(),u=t.charSpace||this.internal.getCharSpace(),f=t.widths?t.widths:o.metadata.Unicode.widths,m=f.fof?f.fof:1,_=t.kerning?t.kerning:o.metadata.Unicode.kerning,w=_.fof?_.fof:1,b=t.doKerning!==!1,E=0,x=e.length,F=0,N=f[0]||m,U=[];for(n=0;n<x;n++)r=e.charCodeAt(n),typeof o.metadata.widthOfString=="function"?U.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(r))+u*(1e3/a)||0)/1e3):(E=b&&oi(_[r])==="object"&&!isNaN(parseInt(_[r][F],10))?_[r][F]/w:0,U.push((f[r]||N)/m+E)),F=r;return U},fm=yu.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),o=t.charSpace||this.internal.getCharSpace();return yu.processArabic&&(e=yu.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,n,o)/n:Qc.apply(this,arguments).reduce(function(a,u){return a+u},0)},dm=function(e,t,n,r){for(var o=[],a=0,u=e.length,f=0;a!==u&&f+t[a]<n;)f+=t[a],a++;o.push(e.slice(0,a));var m=a;for(f=0;a!==u;)f+t[a]>r&&(o.push(e.slice(m,a)),f=0,m=a),f+=t[a],a++;return m!==a&&o.push(e.slice(m,a)),o},pm=function(e,t,n){n||(n={});var r,o,a,u,f,m,_,w=[],b=[w],E=n.textIndent||0,x=0,F=0,N=e.split(" "),U=Qc.apply(this,[" ",n])[0];if(m=n.lineIndent===-1?N[0].length+2:n.lineIndent||0){var j=Array(m).join(" "),ne=[];N.map(function(be){(be=be.split(/\s*\n/)).length>1?ne=ne.concat(be.map(function(ye,Pe){return(Pe&&ye.length?`
`:"")+ye})):ne.push(be[0])}),N=ne,m=fm.apply(this,[j,n])}for(a=0,u=N.length;a<u;a++){var ae=0;if(r=N[a],m&&r[0]==`
`&&(r=r.substr(1),ae=1),E+x+(F=(o=Qc.apply(this,[r,n])).reduce(function(be,ye){return be+ye},0))>t||ae){if(F>t){for(f=dm.apply(this,[r,o,t-(E+x),t]),w.push(f.shift()),w=[f.pop()];f.length;)b.push([f.shift()]);F=o.slice(r.length-(w[0]?w[0].length:0)).reduce(function(be,ye){return be+ye},0)}else w=[r];b.push(w),E=F+m,x=U}else w.push(r),E+=x+F,x=U}return _=m?function(be,ye){return(ye?j:"")+be.join(" ")}:function(be){return be.join(" ")},b.map(_)},yu.splitTextToSize=function(e,t,n){var r,o=(n=n||{}).fontSize||this.internal.getFontSize(),a=(function(w){if(w.widths&&w.kerning)return{widths:w.widths,kerning:w.kerning};var b=this.internal.getFont(w.fontName,w.fontStyle);return b.metadata.Unicode?{widths:b.metadata.Unicode.widths||{0:1},kerning:b.metadata.Unicode.kerning||{}}:{font:b.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var u=1*this.internal.scaleFactor*t/o;a.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/o:0,a.lineIndent=n.lineIndent;var f,m,_=[];for(f=0,m=r.length;f<m;f++)_=_.concat(pm.apply(this,[r[f],u,a]));return _},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},r={},o=0;o<t.length;o++)n[t[o]]="0123456789abcdef"[o],r["0123456789abcdef"[o]]=t[o];var a=function(b){return"0x"+parseInt(b,10).toString(16)},u=e.__fontmetrics__.compress=function(b){var E,x,F,N,U=["{"];for(var j in b){if(E=b[j],isNaN(parseInt(j,10))?x="'"+j+"'":(j=parseInt(j,10),x=(x=a(j).slice(2)).slice(0,-1)+r[x.slice(-1)]),typeof E=="number")E<0?(F=a(E).slice(3),N="-"):(F=a(E).slice(2),N=""),F=N+F.slice(0,-1)+r[F.slice(-1)];else{if(oi(E)!=="object")throw new Error("Don't know what to do with value type "+oi(E)+".");F=u(E)}U.push(x+F)}return U.push("}"),U.join("")},f=e.__fontmetrics__.uncompress=function(b){if(typeof b!="string")throw new Error("Invalid argument passed to uncompress.");for(var E,x,F,N,U={},j=1,ne=U,ae=[],be="",ye="",Pe=b.length-1,Ce=1;Ce<Pe;Ce+=1)(N=b[Ce])=="'"?E?(F=E.join(""),E=void 0):E=[]:E?E.push(N):N=="{"?(ae.push([ne,F]),ne={},F=void 0):N=="}"?((x=ae.pop())[0][x[1]]=ne,F=void 0,ne=x[0]):N=="-"?j=-1:F===void 0?n.hasOwnProperty(N)?(be+=n[N],F=parseInt(be,16)*j,j=1,be=""):be+=N:n.hasOwnProperty(N)?(ye+=n[N],ne[F]=parseInt(ye,16)*j,j=1,F=void 0,ye=""):ye+=N;return U},m={codePages:["WinAnsiEncoding"],WinAnsiEncoding:f("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},_={Unicode:{Courier:m,"Courier-Bold":m,"Courier-BoldOblique":m,"Courier-Oblique":m,Helvetica:m,"Helvetica-Bold":m,"Helvetica-BoldOblique":m,"Helvetica-Oblique":m,"Times-Roman":m,"Times-Bold":m,"Times-BoldItalic":m,"Times-Italic":m}},w={Unicode:{"Courier-Oblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":f("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":f("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:f("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:f("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":f("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":f("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(b){var E=b.font,x=w.Unicode[E.postScriptName];x&&(E.metadata.Unicode={},E.metadata.Unicode.widths=x.widths,E.metadata.Unicode.kerning=x.kerning);var F=_.Unicode[E.postScriptName];F&&(E.metadata.Unicode.encoding=F,E.encoding=F.codePages[0])}])}(_n.API),function(e){var t=function(n){for(var r=n.length,o=new Uint8Array(r),a=0;a<r;a++)o[a]=n.charCodeAt(a);return o};e.API.events.push(["addFont",function(n){var r=void 0,o=n.font,a=n.instance;if(!o.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(r=a.existsFileInVFS(o.postScriptName)===!1?a.loadFile(o.postScriptName):a.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(u,f){f=/^\x00\x01\x00\x00/.test(f)?t(f):t(dc(f)),u.metadata=e.API.TTFFont.open(f),u.metadata.Unicode=u.metadata.Unicode||{encoding:{},kerning:{},widths:[]},u.metadata.glyIdsUsed=[0]})(o,r)}}])}(_n),function(e){function t(){return(bn.canvg?Promise.resolve(bn.canvg):Jl(()=>import("./index.es.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}_n.API.addSvgAsImage=function(n,r,o,a,u,f,m,_){if(isNaN(r)||isNaN(o))throw ui.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(u))throw ui.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var w=document.createElement("canvas");w.width=a,w.height=u;var b=w.getContext("2d");b.fillStyle="#fff",b.fillRect(0,0,w.width,w.height);var E={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},x=this;return t().then(function(F){return F.fromString(b,n,E)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(F){return F.render(E)}).then(function(){x.addImage(w.toDataURL("image/jpeg",1),r,o,a,u,m,_)})}}(),_n.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var o=0;o<this.internal.pages[r].length;o++)this.internal.pages[r][o]=this.internal.pages[r][o].replace(t,n);return this},_n.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,o,a,u={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},f=Object.keys(u),m=[],_=0,w=0,b=0;function E(F,N){var U,j=!1;for(U=0;U<F.length;U+=1)F[U]===N&&(j=!0);return j}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(u)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var x=f.length;for(b=0;b<x;b+=1)n[f[b]].value=n[f[b]].defaultValue,n[f[b]].explicitSet=!1}if(oi(e)==="object"){for(o in e)if(a=e[o],E(f,o)&&a!==void 0){if(n[o].type==="boolean"&&typeof a=="boolean")n[o].value=a;else if(n[o].type==="name"&&E(n[o].valueSet,a))n[o].value=a;else if(n[o].type==="integer"&&Number.isInteger(a))n[o].value=a;else if(n[o].type==="array"){for(_=0;_<a.length;_+=1)if(r=!0,a[_].length===1&&typeof a[_][0]=="number")m.push(String(a[_]-1));else if(a[_].length>1){for(w=0;w<a[_].length;w+=1)typeof a[_][w]!="number"&&(r=!1);r===!0&&m.push([a[_][0]-1,a[_][1]-1].join(" "))}n[o].value="["+m.join(" ")+"]"}else n[o].value=n[o].defaultValue;n[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var F,N=[];for(F in n)n[F].explicitSet===!0&&(n[F].type==="name"?N.push("/"+F+" /"+n[F].value):N.push("/"+F+" "+n[F].value));N.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+N.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(r)),u=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),f=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),m=unescape(encodeURIComponent("</x:xmpmeta>")),_=a.length+u.length+f.length+o.length+m.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+_+" >>"),this.internal.write("stream"),this.internal.write(o+a+u+f+m),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(_n.API),function(e){var t=e.API,n=t.pdfEscape16=function(a,u){for(var f,m=u.metadata.Unicode.widths,_=["","0","00","000","0000"],w=[""],b=0,E=a.length;b<E;++b){if(f=u.metadata.characterToGlyph(a.charCodeAt(b)),u.metadata.glyIdsUsed.push(f),u.metadata.toUnicode[f]=a.charCodeAt(b),m.indexOf(f)==-1&&(m.push(f),m.push([parseInt(u.metadata.widthOfGlyph(f),10)])),f=="0")return w.join("");f=f.toString(16),w.push(_[4-f.length],f)}return w.join("")},r=function(a){var u,f,m,_,w,b,E;for(w=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,m=[],b=0,E=(f=Object.keys(a).sort(function(x,F){return x-F})).length;b<E;b++)u=f[b],m.length>=100&&(w+=`
`+m.length+` beginbfchar
`+m.join(`
`)+`
endbfchar`,m=[]),a[u]!==void 0&&a[u]!==null&&typeof a[u].toString=="function"&&(_=("0000"+a[u].toString(16)).slice(-4),u=("0000"+(+u).toString(16)).slice(-4),m.push("<"+u+"><"+_+">"));return m.length&&(w+=`
`+m.length+` beginbfchar
`+m.join(`
`)+`
endbfchar
`),w+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(a){(function(u){var f=u.font,m=u.out,_=u.newObject,w=u.putStream;if(f.metadata instanceof e.API.TTFFont&&f.encoding==="Identity-H"){for(var b=f.metadata.Unicode.widths,E=f.metadata.subset.encode(f.metadata.glyIdsUsed,1),x="",F=0;F<E.length;F++)x+=String.fromCharCode(E[F]);var N=_();w({data:x,addLength1:!0,objectId:N}),m("endobj");var U=_();w({data:r(f.metadata.toUnicode),addLength1:!0,objectId:U}),m("endobj");var j=_();m("<<"),m("/Type /FontDescriptor"),m("/FontName /"+Cu(f.fontName)),m("/FontFile2 "+N+" 0 R"),m("/FontBBox "+e.API.PDFObject.convert(f.metadata.bbox)),m("/Flags "+f.metadata.flags),m("/StemV "+f.metadata.stemV),m("/ItalicAngle "+f.metadata.italicAngle),m("/Ascent "+f.metadata.ascender),m("/Descent "+f.metadata.decender),m("/CapHeight "+f.metadata.capHeight),m(">>"),m("endobj");var ne=_();m("<<"),m("/Type /Font"),m("/BaseFont /"+Cu(f.fontName)),m("/FontDescriptor "+j+" 0 R"),m("/W "+e.API.PDFObject.convert(b)),m("/CIDToGIDMap /Identity"),m("/DW 1000"),m("/Subtype /CIDFontType2"),m("/CIDSystemInfo"),m("<<"),m("/Supplement 0"),m("/Registry (Adobe)"),m("/Ordering ("+f.encoding+")"),m(">>"),m(">>"),m("endobj"),f.objectNumber=_(),m("<<"),m("/Type /Font"),m("/Subtype /Type0"),m("/ToUnicode "+U+" 0 R"),m("/BaseFont /"+Cu(f.fontName)),m("/Encoding /"+f.encoding),m("/DescendantFonts ["+ne+" 0 R]"),m(">>"),m("endobj"),f.isAlreadyPutted=!0}})(a)}]),t.events.push(["putFont",function(a){(function(u){var f=u.font,m=u.out,_=u.newObject,w=u.putStream;if(f.metadata instanceof e.API.TTFFont&&f.encoding==="WinAnsiEncoding"){for(var b=f.metadata.rawData,E="",x=0;x<b.length;x++)E+=String.fromCharCode(b[x]);var F=_();w({data:E,addLength1:!0,objectId:F}),m("endobj");var N=_();w({data:r(f.metadata.toUnicode),addLength1:!0,objectId:N}),m("endobj");var U=_();m("<<"),m("/Descent "+f.metadata.decender),m("/CapHeight "+f.metadata.capHeight),m("/StemV "+f.metadata.stemV),m("/Type /FontDescriptor"),m("/FontFile2 "+F+" 0 R"),m("/Flags 96"),m("/FontBBox "+e.API.PDFObject.convert(f.metadata.bbox)),m("/FontName /"+Cu(f.fontName)),m("/ItalicAngle "+f.metadata.italicAngle),m("/Ascent "+f.metadata.ascender),m(">>"),m("endobj"),f.objectNumber=_();for(var j=0;j<f.metadata.hmtx.widths.length;j++)f.metadata.hmtx.widths[j]=parseInt(f.metadata.hmtx.widths[j]*(1e3/f.metadata.head.unitsPerEm));m("<</Subtype/TrueType/Type/Font/ToUnicode "+N+" 0 R/BaseFont/"+Cu(f.fontName)+"/FontDescriptor "+U+" 0 R/Encoding/"+f.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(f.metadata.hmtx.widths)+">>"),m("endobj"),f.isAlreadyPutted=!0}})(a)}]);var o=function(a){var u,f=a.text||"",m=a.x,_=a.y,w=a.options||{},b=a.mutex||{},E=b.pdfEscape,x=b.activeFontKey,F=b.fonts,N=x,U="",j=0,ne="",ae=F[N].encoding;if(F[N].encoding!=="Identity-H")return{text:f,x:m,y:_,options:w,mutex:b};for(ne=f,N=x,Array.isArray(f)&&(ne=f[0]),j=0;j<ne.length;j+=1)F[N].metadata.hasOwnProperty("cmap")&&(u=F[N].metadata.cmap.unicode.codeMap[ne[j].charCodeAt(0)]),u||ne[j].charCodeAt(0)<256&&F[N].metadata.hasOwnProperty("Unicode")?U+=ne[j]:U+="";var be="";return parseInt(N.slice(1))<14||ae==="WinAnsiEncoding"?be=E(U,N).split("").map(function(ye){return ye.charCodeAt(0).toString(16)}).join(""):ae==="Identity-H"&&(be=n(U,F[N])),b.isHex=!0,{text:be,x:m,y:_,options:w,mutex:b}};t.events.push(["postProcessText",function(a){var u=a.text||"",f=[],m={text:u,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(u)){var _=0;for(_=0;_<u.length;_+=1)Array.isArray(u[_])&&u[_].length===3?f.push([o(Object.assign({},m,{text:u[_][0]})).text,u[_][1],u[_][2]]):f.push(o(Object.assign({},m,{text:u[_]})).text);a.text=f}else a.text=o(Object.assign({},m,{text:u})).text}])}(_n),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,r){return t.call(this),this.internal.vFS[n]=r,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(_n.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var o,a,u,f,m,_,w,b=t,E=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],F={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},N={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},U=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],j=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),ne=!1,ae=0;this.__bidiEngine__={};var be=function(q){var H=q.charCodeAt(),Se=H>>8,M=N[Se];return M!==void 0?b[256*M+(255&H)]:Se===252||Se===253?"AL":j.test(Se)?"L":Se===8?"R":"N"},ye=function(q){for(var H,Se=0;Se<q.length;Se++){if((H=be(q.charAt(Se)))==="L")return!1;if(H==="R")return!0}return!1},Pe=function(q,H,Se,M){var Y,Z,re,W,Q=H[M];switch(Q){case"L":case"R":ne=!1;break;case"N":case"AN":break;case"EN":ne&&(Q="AN");break;case"AL":ne=!0,Q="R";break;case"WS":Q="N";break;case"CS":M<1||M+1>=H.length||(Y=Se[M-1])!=="EN"&&Y!=="AN"||(Z=H[M+1])!=="EN"&&Z!=="AN"?Q="N":ne&&(Z="AN"),Q=Z===Y?Z:"N";break;case"ES":Q=(Y=M>0?Se[M-1]:"B")==="EN"&&M+1<H.length&&H[M+1]==="EN"?"EN":"N";break;case"ET":if(M>0&&Se[M-1]==="EN"){Q="EN";break}if(ne){Q="N";break}for(re=M+1,W=H.length;re<W&&H[re]==="ET";)re++;Q=re<W&&H[re]==="EN"?"EN":"N";break;case"NSM":if(u&&!f){for(W=H.length,re=M+1;re<W&&H[re]==="NSM";)re++;if(re<W){var z=q[M],Ie=z>=1425&&z<=2303||z===64286;if(Y=H[re],Ie&&(Y==="R"||Y==="AL")){Q="R";break}}}Q=M<1||(Y=H[M-1])==="B"?"N":Se[M-1];break;case"B":ne=!1,o=!0,Q=ae;break;case"S":a=!0,Q="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":ne=!1;break;case"BN":Q="N"}return Q},Ce=function(q,H,Se){var M=q.split("");return Se&&de(M,Se,{hiLevel:ae}),M.reverse(),H&&H.reverse(),M.join("")},de=function(q,H,Se){var M,Y,Z,re,W,Q=-1,z=q.length,Ie=0,I=[],G=ae?x:E,$=[];for(ne=!1,o=!1,a=!1,Y=0;Y<z;Y++)$[Y]=be(q[Y]);for(Z=0;Z<z;Z++){if(W=Ie,I[Z]=Pe(q,$,I,Z),M=240&(Ie=G[W][F[I[Z]]]),Ie&=15,H[Z]=re=G[Ie][5],M>0)if(M===16){for(Y=Q;Y<Z;Y++)H[Y]=1;Q=-1}else Q=-1;if(G[Ie][6])Q===-1&&(Q=Z);else if(Q>-1){for(Y=Q;Y<Z;Y++)H[Y]=re;Q=-1}$[Z]==="B"&&(H[Z]=0),Se.hiLevel|=re}a&&function(D,J,le){for(var ge=0;ge<le;ge++)if(D[ge]==="S"){J[ge]=ae;for(var me=ge-1;me>=0&&D[me]==="WS";me--)J[me]=ae}}($,H,z)},Be=function(q,H,Se,M,Y){if(!(Y.hiLevel<q)){if(q===1&&ae===1&&!o)return H.reverse(),void(Se&&Se.reverse());for(var Z,re,W,Q,z=H.length,Ie=0;Ie<z;){if(M[Ie]>=q){for(W=Ie+1;W<z&&M[W]>=q;)W++;for(Q=Ie,re=W-1;Q<re;Q++,re--)Z=H[Q],H[Q]=H[re],H[re]=Z,Se&&(Z=Se[Q],Se[Q]=Se[re],Se[re]=Z);Ie=W}Ie++}}},Ue=function(q,H,Se){var M=q.split(""),Y={hiLevel:ae};return Se||(Se=[]),de(M,Se,Y),function(Z,re,W){if(W.hiLevel!==0&&w)for(var Q,z=0;z<Z.length;z++)re[z]===1&&(Q=U.indexOf(Z[z]))>=0&&(Z[z]=U[Q+1])}(M,Se,Y),Be(2,M,H,Se,Y),Be(1,M,H,Se,Y),M.join("")};return this.__bidiEngine__.doBidiReorder=function(q,H,Se){if(function(Y,Z){if(Z)for(var re=0;re<Y.length;re++)Z[re]=re;f===void 0&&(f=ye(Y)),_===void 0&&(_=ye(Y))}(q,H),u||!m||_)if(u&&m&&f^_)ae=f?1:0,q=Ce(q,H,Se);else if(!u&&m&&_)ae=f?1:0,q=Ue(q,H,Se),q=Ce(q,H);else if(!u||f||m||_){if(u&&!m&&f^_)q=Ce(q,H),f?(ae=0,q=Ue(q,H,Se)):(ae=1,q=Ue(q,H,Se),q=Ce(q,H));else if(u&&f&&!m&&_)ae=1,q=Ue(q,H,Se),q=Ce(q,H);else if(!u&&!m&&f^_){var M=w;f?(ae=1,q=Ue(q,H,Se),ae=0,w=!1,q=Ue(q,H,Se),w=M):(ae=0,q=Ue(q,H,Se),q=Ce(q,H),ae=1,w=!1,q=Ue(q,H,Se),w=M,q=Ce(q,H))}}else ae=0,q=Ue(q,H,Se);else ae=f?1:0,q=Ue(q,H,Se);return q},this.__bidiEngine__.setOptions=function(q){q&&(u=q.isInputVisual,m=q.isOutputVisual,f=q.isInputRtl,_=q.isOutputRtl,w=q.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var o=r.text,a=(r.x,r.y,r.options||{}),u=(r.mutex,a.lang,[]);if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,n.setOptions(a),Object.prototype.toString.call(o)==="[object Array]"){var f=0;for(u=[],f=0;f<o.length;f+=1)Object.prototype.toString.call(o[f])==="[object Array]"?u.push([n.doBidiReorder(o[f][0]),o[f][1],o[f][2]]):u.push([n.doBidiReorder(o[f])]);r.text=u}else r.text=n.doBidiReorder(o);n.setOptions({isInputVisual:!0})}])}(_n),_n.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new Sl(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new bC(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new oC(this.contents),this.head=new lC(this),this.name=new dC(this),this.cmap=new Q1(this),this.toUnicode={},this.hhea=new uC(this),this.maxp=new pC(this),this.hmtx=new mC(this),this.post=new hC(this),this.os2=new cC(this),this.loca=new yC(this),this.glyf=new gC(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,r,o,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var u,f,m,_;for(_=[],u=0,f=(m=this.bbox).length;u<f;u++)t=m[u],_.push(Math.round(t*this.scaleFactor));return _}).call(this),this.stemV=0,this.post.exists?(r=255&(o=this.post.italic_angle),32768&(n=o>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,r){var o,a,u,f;for(u=0,a=0,f=(t=""+t).length;0<=f?a<f:a>f;a=0<=f?++a:--a)o=t.charCodeAt(a),u+=this.widthOfGlyph(this.characterToGlyph(o))+r*(1e3/n)||0;return u*(n/1e3)},e.prototype.lineHeight=function(t,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var Wo,Sl=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,r;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var n,r,o;for(o=[],n=0,r=t.length;0<=r?n<r:n>r;n=0<=r?++n:--n)o.push(this.writeByte(t.charCodeAt(n)));return o},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,r,o,a,u,f,m;return t=this.readByte(),n=this.readByte(),r=this.readByte(),o=this.readByte(),a=this.readByte(),u=this.readByte(),f=this.readByte(),m=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^o)+16777216*(255^a)+65536*(255^u)+256*(255^f)+(255^m)+1):72057594037927940*t+281474976710656*n+1099511627776*r+4294967296*o+16777216*a+65536*u+256*f+m},e.prototype.writeLongLong=function(t){var n,r;return n=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,r;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push(this.readByte());return n},e.prototype.write=function(t){var n,r,o,a;for(a=[],r=0,o=t.length;r<o;r++)n=t[r],a.push(this.writeByte(n));return a},e}(),oC=function(){var e;function t(n){var r,o,a;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},o=0,a=this.tableCount;0<=a?o<a:o>a;o=0<=a?++o:--o)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(n){var r,o,a,u,f,m,_,w,b,E,x,F,N;for(N in x=Object.keys(n).length,m=Math.log(2),b=16*Math.floor(Math.log(x)/m),u=Math.floor(b/m),w=16*x-b,(o=new Sl).writeInt(this.scalarType),o.writeShort(x),o.writeShort(b),o.writeShort(u),o.writeShort(w),a=16*x,_=o.pos+a,f=null,F=[],n)for(E=n[N],o.writeString(N),o.writeInt(e(E)),o.writeInt(_),o.writeInt(E.length),F=F.concat(E),N==="head"&&(f=_),_+=E.length;_%4;)F.push(0),_++;return o.write(F),r=2981146554-e(o.data),o.pos=f+8,o.writeUInt32(r),o.data},e=function(n){var r,o,a,u;for(n=ev.call(n);n.length%4;)n.push(0);for(a=new Sl(n),o=0,r=0,u=n.length;r<u;r=r+=4)o+=a.readUInt32();return 4294967295&o},t}(),aC={}.hasOwnProperty,wa=function(e,t){for(var n in t)aC.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};Wo=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var lC=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wa(t,Wo),t.prototype.tag="head",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},t.prototype.encode=function(n){var r;return(r=new Sl).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},t}(),vm=function(){function e(t,n){var r,o,a,u,f,m,_,w,b,E,x,F,N,U,j,ne,ae;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),b=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(m=0;m<256;++m)this.codeMap[m]=t.readByte();break;case 4:for(x=t.readUInt16(),E=x/2,t.pos+=6,a=function(){var be,ye;for(ye=[],m=be=0;0<=E?be<E:be>E;m=0<=E?++be:--be)ye.push(t.readUInt16());return ye}(),t.pos+=2,N=function(){var be,ye;for(ye=[],m=be=0;0<=E?be<E:be>E;m=0<=E?++be:--be)ye.push(t.readUInt16());return ye}(),_=function(){var be,ye;for(ye=[],m=be=0;0<=E?be<E:be>E;m=0<=E?++be:--be)ye.push(t.readUInt16());return ye}(),w=function(){var be,ye;for(ye=[],m=be=0;0<=E?be<E:be>E;m=0<=E?++be:--be)ye.push(t.readUInt16());return ye}(),o=(this.length-t.pos+this.offset)/2,f=function(){var be,ye;for(ye=[],m=be=0;0<=o?be<o:be>o;m=0<=o?++be:--be)ye.push(t.readUInt16());return ye}(),m=j=0,ae=a.length;j<ae;m=++j)for(U=a[m],r=ne=F=N[m];F<=U?ne<=U:ne>=U;r=F<=U?++ne:--ne)w[m]===0?u=r+_[m]:(u=f[w[m]/2+(r-F)-(E-m)]||0)!==0&&(u+=_[m]),this.codeMap[r]=65535&u}t.pos=b}return e.encode=function(t,n){var r,o,a,u,f,m,_,w,b,E,x,F,N,U,j,ne,ae,be,ye,Pe,Ce,de,Be,Ue,q,H,Se,M,Y,Z,re,W,Q,z,Ie,I,G,$,D,J,le,ge,me,je,$e,X;switch(M=new Sl,u=Object.keys(t).sort(function(se,Te){return se-Te}),n){case"macroman":for(N=0,U=function(){var se=[];for(F=0;F<256;++F)se.push(0);return se}(),ne={0:0},a={},Y=0,Q=u.length;Y<Q;Y++)ne[me=t[o=u[Y]]]==null&&(ne[me]=++N),a[o]={old:t[o],new:ne[t[o]]},U[o]=ne[t[o]];return M.writeUInt16(1),M.writeUInt16(0),M.writeUInt32(12),M.writeUInt16(0),M.writeUInt16(262),M.writeUInt16(0),M.write(U),{charMap:a,subtable:M.data,maxGlyphID:N+1};case"unicode":for(H=[],b=[],ae=0,ne={},r={},j=_=null,Z=0,z=u.length;Z<z;Z++)ne[ye=t[o=u[Z]]]==null&&(ne[ye]=++ae),r[o]={old:ye,new:ne[ye]},f=ne[ye]-o,j!=null&&f===_||(j&&b.push(j),H.push(o),_=f),j=o;for(j&&b.push(j),b.push(65535),H.push(65535),Ue=2*(Be=H.length),de=2*Math.pow(Math.log(Be)/Math.LN2,2),E=Math.log(de/2)/Math.LN2,Ce=2*Be-de,m=[],Pe=[],x=[],F=re=0,Ie=H.length;re<Ie;F=++re){if(q=H[F],w=b[F],q===65535){m.push(0),Pe.push(0);break}if(q-(Se=r[q].new)>=32768)for(m.push(0),Pe.push(2*(x.length+Be-F)),o=W=q;q<=w?W<=w:W>=w;o=q<=w?++W:--W)x.push(r[o].new);else m.push(Se-q),Pe.push(0)}for(M.writeUInt16(3),M.writeUInt16(1),M.writeUInt32(12),M.writeUInt16(4),M.writeUInt16(16+8*Be+2*x.length),M.writeUInt16(0),M.writeUInt16(Ue),M.writeUInt16(de),M.writeUInt16(E),M.writeUInt16(Ce),le=0,I=b.length;le<I;le++)o=b[le],M.writeUInt16(o);for(M.writeUInt16(0),ge=0,G=H.length;ge<G;ge++)o=H[ge],M.writeUInt16(o);for(je=0,$=m.length;je<$;je++)f=m[je],M.writeUInt16(f);for($e=0,D=Pe.length;$e<D;$e++)be=Pe[$e],M.writeUInt16(be);for(X=0,J=x.length;X<J;X++)N=x[X],M.writeUInt16(N);return{charMap:r,subtable:M.data,maxGlyphID:ae+1}}},e}(),Q1=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wa(t,Wo),t.prototype.tag="cmap",t.prototype.parse=function(n){var r,o,a;for(n.pos=this.offset,this.version=n.readUInt16(),a=n.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)r=new vm(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(n,r){var o,a;return r==null&&(r="macroman"),o=vm.encode(n,r),(a=new Sl).writeUInt16(0),a.writeUInt16(1),o.table=a.data.concat(o.subtable),o},t}(),uC=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wa(t,Wo),t.prototype.tag="hhea",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},t}(),cC=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wa(t,Wo),t.prototype.tag="OS/2",t.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,o;for(o=[],r=0;r<10;++r)o.push(n.readByte());return o}(),this.charRange=function(){var r,o;for(o=[],r=0;r<4;++r)o.push(n.readInt());return o}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,o;for(o=[],r=0;r<2;r=++r)o.push(n.readInt());return o}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},t}(),hC=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wa(t,Wo),t.prototype.tag="post",t.prototype.parse=function(n){var r,o,a;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var u;for(o=n.readUInt16(),this.glyphNameIndex=[],u=0;0<=o?u<o:u>o;u=0<=o?++u:--u)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],a=[];n.pos<this.offset+this.length;)r=n.readByte(),a.push(this.names.push(n.readString(r)));return a;case 151552:return o=n.readUInt16(),this.offsets=n.read(o);case 196608:break;case 262144:return this.map=(function(){var f,m,_;for(_=[],u=f=0,m=this.file.maxp.numGlyphs;0<=m?f<m:f>m;u=0<=m?++f:--f)_.push(n.readUInt32());return _}).call(this)}},t}(),fC=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},dC=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wa(t,Wo),t.prototype.tag="name",t.prototype.parse=function(n){var r,o,a,u,f,m,_,w,b,E,x;for(n.pos=this.offset,n.readShort(),r=n.readShort(),m=n.readShort(),o=[],u=0;0<=r?u<r:u>r;u=0<=r?++u:--u)o.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+m+n.readShort()});for(_={},u=b=0,E=o.length;b<E;u=++b)a=o[u],n.pos=a.offset,w=n.readString(a.length),f=new fC(w,a),_[x=a.nameID]==null&&(_[x]=[]),_[a.nameID].push(f);this.strings=_,this.copyright=_[0],this.fontFamily=_[1],this.fontSubfamily=_[2],this.uniqueSubfamily=_[3],this.fontName=_[4],this.version=_[5];try{this.postscriptName=_[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=_[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=_[7],this.manufacturer=_[8],this.designer=_[9],this.description=_[10],this.vendorUrl=_[11],this.designerUrl=_[12],this.license=_[13],this.licenseUrl=_[14],this.preferredFamily=_[15],this.preferredSubfamily=_[17],this.compatibleFull=_[18],this.sampleText=_[19]},t}(),pC=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wa(t,Wo),t.prototype.tag="maxp",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},t}(),mC=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wa(t,Wo),t.prototype.tag="hmtx",t.prototype.parse=function(n){var r,o,a,u,f,m,_;for(n.pos=this.offset,this.metrics=[],r=0,m=this.file.hhea.numberOfMetrics;0<=m?r<m:r>m;r=0<=m?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var w,b;for(b=[],r=w=0;0<=a?w<a:w>a;r=0<=a?++w:--w)b.push(n.readInt16());return b}(),this.widths=(function(){var w,b,E,x;for(x=[],w=0,b=(E=this.metrics).length;w<b;w++)u=E[w],x.push(u.advance);return x}).call(this),o=this.widths[this.widths.length-1],_=[],r=f=0;0<=a?f<a:f>a;r=0<=a?++f:--f)_.push(this.widths.push(o));return _},t.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},t}(),ev=[].slice,gC=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wa(t,Wo),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(n){var r,o,a,u,f,m,_,w,b,E;return n in this.cache?this.cache[n]:(u=this.file.loca,r=this.file.contents,o=u.indexOf(n),(a=u.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+o,f=(m=new Sl(r.read(a))).readShort(),w=m.readShort(),E=m.readShort(),_=m.readShort(),b=m.readShort(),this.cache[n]=f===-1?new _C(m,w,E,_,b):new vC(m,f,w,E,_,b),this.cache[n]))},t.prototype.encode=function(n,r,o){var a,u,f,m,_;for(f=[],u=[],m=0,_=r.length;m<_;m++)a=n[r[m]],u.push(f.length),a&&(f=f.concat(a.encode(o)));return u.push(f.length),{table:f,offsets:u}},t}(),vC=function(){function e(t,n,r,o,a,u){this.raw=t,this.numberOfContours=n,this.xMin=r,this.yMin=o,this.xMax=a,this.yMax=u,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),_C=function(){function e(t,n,r,o,a){var u,f;for(this.raw=t,this.xMin=n,this.yMin=r,this.xMax=o,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],u=this.raw;f=u.readShort(),this.glyphOffsets.push(u.pos),this.glyphIDs.push(u.readUInt16()),32&f;)u.pos+=1&f?4:2,128&f?u.pos+=8:64&f?u.pos+=4:8&f&&(u.pos+=2)}return e.prototype.encode=function(){var t,n,r;for(n=new Sl(ev.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),yC=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wa(t,Wo),t.prototype.tag="loca",t.prototype.parse=function(n){var r,o;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,u;for(u=[],o=0,a=this.length;o<a;o+=2)u.push(2*n.readUInt16());return u}).call(this):(function(){var a,u;for(u=[],o=0,a=this.length;o<a;o+=4)u.push(n.readUInt32());return u}).call(this)},t.prototype.indexOf=function(n){return this.offsets[n]},t.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},t.prototype.encode=function(n,r){for(var o=new Uint32Array(this.offsets.length),a=0,u=0,f=0;f<o.length;++f)if(o[f]=a,u<r.length&&r[u]==f){++u,o[f]=a;var m=this.offsets[f],_=this.offsets[f+1]-m;_>0&&(a+=_)}for(var w=new Array(4*o.length),b=0;b<o.length;++b)w[4*b+3]=255&o[b],w[4*b+2]=(65280&o[b])>>8,w[4*b+1]=(16711680&o[b])>>16,w[4*b]=(4278190080&o[b])>>24;return w},t}(),bC=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,r,o,a;for(n in o=this.font.cmap.tables[0].codeMap,t={},a=this.subset)r=a[n],t[n]=o[r];return t},e.prototype.glyphsFor=function(t){var n,r,o,a,u,f,m;for(o={},u=0,f=t.length;u<f;u++)o[a=t[u]]=this.font.glyf.glyphFor(a);for(a in n=[],o)(r=o[a])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(a in m=this.glyphsFor(n))r=m[a],o[a]=r;return o},e.prototype.encode=function(t,n){var r,o,a,u,f,m,_,w,b,E,x,F,N,U,j;for(o in r=Q1.encode(this.generateCmap(),"unicode"),u=this.glyphsFor(t),x={0:0},j=r.charMap)x[(m=j[o]).old]=m.new;for(F in E=r.maxGlyphID,u)F in x||(x[F]=E++);return w=function(ne){var ae,be;for(ae in be={},ne)be[ne[ae]]=ae;return be}(x),b=Object.keys(w).sort(function(ne,ae){return ne-ae}),N=function(){var ne,ae,be;for(be=[],ne=0,ae=b.length;ne<ae;ne++)f=b[ne],be.push(w[f]);return be}(),a=this.font.glyf.encode(u,N,x),_=this.font.loca.encode(a.offsets,N),U={cmap:this.font.cmap.raw(),glyf:a.table,loca:_,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(U["OS/2"]=this.font.os2.raw()),this.font.directory.encode(U)},e}();_n.API.PDFObject=function(){var e;function t(){}return e=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},t.convert=function(n){var r,o,a,u;if(Array.isArray(n))return"["+function(){var f,m,_;for(_=[],f=0,m=n.length;f<m;f++)r=n[f],_.push(t.convert(r));return _}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(o in a=["<<"],n)u=n[o],a.push("/"+o+" "+t.convert(u));return a.push(">>"),a.join(`
`)}return""+n},t}();const wC={class:"h-full flex"},xC={class:"flex-1 relative"},LC={key:0,class:"absolute inset-0 bg-black/30 backdrop-blur-sm z-[2000] flex items-center justify-center"},CC={key:1,class:"absolute inset-0 flex items-center justify-center bg-gray-50 z-[1000]"},kC={class:"text-center max-w-lg mx-auto p-8"},PC={class:"space-y-4"},SC={class:"relative h-full w-full overflow-hidden"},EC={key:0,class:"absolute top-0 left-0 right-0 z-[1000]"},AC={key:2,class:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 z-50"},MC={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},BC={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4"},TC={class:"flex justify-between items-center mb-4"},NC={key:0,class:"space-y-4"},DC={key:0,class:"space-y-2"},OC={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},RC=["onClick"],IC={class:"font-medium text-gray-900"},FC={key:1,class:"space-y-2"},jC={class:"flex items-center mb-4"},zC={class:"text-sm text-gray-600"},UC={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},qC=["onClick"],$C={class:"font-medium text-gray-900"},VC={key:2,class:"space-y-2"},HC={class:"flex items-center mb-4"},GC={class:"text-sm text-gray-600"},WC={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},ZC=["onClick"],KC={class:"font-medium text-gray-900"},JC={class:"text-sm text-gray-500"},YC={class:"text-xs text-gray-400 mt-1"},XC={key:1,class:"space-y-4"},QC={key:0,class:"space-y-2"},e6={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},t6=["onClick"],n6={class:"font-medium text-gray-900"},i6={key:1,class:"space-y-2"},r6={class:"flex items-center mb-4"},s6={class:"text-sm text-gray-600"},o6={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},a6=["onClick"],l6={class:"font-medium text-gray-900"},u6={class:"text-sm text-gray-500"},c6={class:"text-xs text-gray-400 mt-1"},h6={key:2,class:"max-h-96 overflow-y-auto"},f6={key:0,class:"text-center py-8"},d6={key:1,class:"space-y-2"},p6=["onClick"],m6={class:"font-medium text-gray-900"},g6={class:"text-sm text-gray-500"},v6={class:"text-xs text-gray-400 mt-1"},_m=ps({__name:"MapView",setup(e){const t=It(null),n=ef(),r=T1(),o=It([]),{currentTool:a,selectedShape:u,map:f,initMap:m,setDrawingTool:_,updateShapeStyle:w,updateShapeProperties:b,featureGroup:E,adjustView:x,clearActiveControlPoints:F}=oL(),{initMap:N,changeBaseMap:U}=aL(),j=It(!1),ne=It(!1),ae=It(null),be=It(!1),ye=It(null),Pe=ds(),Ce=It([]),de=It([]),Be=It([]),Ue=It(null),q=It(null),H=It(!1),Se=It(!1),M=It(!1),Y=It(null),Z=Nn(()=>{var De,ke,lt;return console.log("[MapView][filteredClients] Computing with:",{userType:(De=Pe.user)==null?void 0:De.user_type,selectedDealer:Ue.value,dealerClients:de.value}),((ke=Pe.user)==null?void 0:ke.user_type)==="admin"?Ue.value?de.value:[]:((lt=Pe.user)==null?void 0:lt.user_type)==="dealer"?de.value:[]}),re=Nn(()=>{var De;return u.value?{type:((De=u.value.properties)==null?void 0:De.type)||"unknown",properties:u.value.properties||{},layer:u.value}:null});function W(De){const ke=De.getCenter(),lt=De.getZoom(),ht={lat:ke.lat,lng:ke.lng,zoom:lt};document.cookie=`mapState=${JSON.stringify(ht)};max-age=2592000;path=/`}function Q(){const ke=document.cookie.split(";").find(lt=>lt.trim().startsWith("mapState="));if(ke)try{return JSON.parse(ke.split("=")[1])}catch(lt){return console.error("Erreur lors de la lecture du cookie de position:",lt),null}return null}function z(De,ke,lt){const ht=lt/2/111111,it=ke/2/(111111*Math.cos(De.lat*Math.PI/180));return Ri.latLngBounds(Ri.latLng(De.lat-ht,De.lng-it),Ri.latLng(De.lat+ht,De.lng+it))}ba(async()=>{var it,Fe;await n.fetchPlans();const De=Q(),ke=De?[De.lat,De.lng]:[46.603354,1.888334],lt=(De==null?void 0:De.zoom)??6;if(t.value&&!f.value){const Pt=m(t.value,ke,lt);Pt.pm.setLang("fr"),Pt.pm.addControls({rotateMode:!1}),N(Pt),Pt.on("moveend",()=>{W(Pt)}),window.addEventListener("map-set-location",Ft=>{if(Pt&&Ft.detail){const{lat:Wt,lng:Ut,zoom:Xt}=Ft.detail;Pt.flyTo([Wt,Ut],Xt,{duration:1.5,easeLinearity:.25})}})}const ht=localStorage.getItem("lastPlanId");if(ht)try{await Ie(parseInt(ht))}catch(Pt){console.error("Error loading last plan:",Pt)}((it=Pe.user)==null?void 0:it.user_type)==="admin"&&await le(),((Fe=Pe.user)==null?void 0:Fe.user_type)==="dealer"&&await ge()}),fs(()=>r.hasUnsavedChanges,De=>{De&&ae.value&&n.markUnsavedChanges()}),fs(f,async De=>{De&&n.currentPlan&&(Ee(),await r.loadPlanElements(n.currentPlan.id),await Ie(n.currentPlan.id))}),fs(()=>n.currentPlan,async De=>{De?(ae.value=De,n.setCurrentPlan(De),r.setCurrentPlan(De.id)):(ae.value=null,Ee())},{immediate:!0}),zh(()=>{f.value&&f.value.off("moveend")});async function Ie(De){var ke;try{if(Ee(),console.log(`Tentative de chargement du plan ${De}...`),!n.getPlanById(De))try{await Ln.get(`/plans/${De}/`)}catch(it){throw((ke=it.response)==null?void 0:ke.status)===404&&(console.warn(`Plan ${De} non trouv - Suppression de la rfrence du localStorage`),localStorage.removeItem("lastPlanId")),it}await r.loadPlanElements(De);const ht=n.getPlanById(De);ht?(ae.value=ht,n.setCurrentPlan(ht),r.setCurrentPlan(ht.id),localStorage.setItem("lastPlanId",ht.id.toString()),f.value&&E.value&&r.getCurrentElements.forEach(it=>{var Wt,Ut,Xt,Rt,on,dn,ai;if(!E.value||!it.data)return;let Fe=null;const{style:Pt={},...Ft}=it.data;switch(it.type_forme){case"CERCLE":{const Ct=Ft;Ct.center&&Ct.radius&&(Fe=Ri.circle([Ct.center[1],Ct.center[0]],{...Pt,radius:Ct.radius}));break}case"RECTANGLE":{const Ct=Ft;Ct.bounds&&(Fe=Ri.rectangle([[Ct.bounds.southWest[1],Ct.bounds.southWest[0]],[Ct.bounds.northEast[1],Ct.bounds.northEast[0]]],Pt));break}case"DEMI_CERCLE":{const Ct=Ft;if(Ct.center&&Ct.radius){Fe=new Vl(Ri.latLng(Ct.center[1],Ct.center[0]),Ct.radius,Ct.startAngle,Ct.endAngle,Pt),Fe.properties={type:"Semicircle",radius:Ct.radius,startAngle:Ct.startAngle,stopAngle:Ct.endAngle,style:Pt};const nn=Math.PI*Math.pow(Ct.radius,2)*((Ct.endAngle-Ct.startAngle)/360),Vt=2*Ct.radius+Math.PI*Ct.radius*((Ct.endAngle-Ct.startAngle)/180),ln=Math.PI*Ct.radius*((Ct.endAngle-Ct.startAngle)/180);Fe.properties.area=nn,Fe.properties.perimeter=Vt,Fe.properties.arcLength=ln,Fe.properties.openingAngle=Ct.endAngle-Ct.startAngle,console.log("[loadPlan] Demi-cercle restaur avec proprits:",Fe.properties)}break}case"LIGNE":{const Ct=Ft;if(Ct.points){const nn=Ct.points.map(ln=>Ri.latLng(ln[1],ln[0]));Fe=Ri.polyline(nn,Pt),Fe.properties={type:"Line",style:Pt};let Vt=0;for(let ln=1;ln<nn.length;ln++)Vt+=nn[ln].distanceTo(nn[ln-1]);if(Fe.properties.length=Vt,Ct.hasOwnProperty("dimensions")&&Ct.dimensions&&(Fe.properties.dimensions=Ct.dimensions,Ct.dimensions.width&&Vt)){const ln=Vt*Ct.dimensions.width;Fe.properties.surfaceInfluence=ln}console.log("[loadPlan] Ligne restaure avec proprits:",Fe.properties)}break}case"TEXTE":{const Ct=Ft;if(Ct.position&&Ct.content){console.log("[loadPlan] Chargement d'un lment texte avec donnes:",Ct);const nn=Ri.latLng(Ct.position[1],Ct.position[0]),Vt=Ct.width||100,ln=Ct.height||50;let li;Ct.bounds?li=Ri.latLngBounds([Ct.bounds.southWest[1],Ct.bounds.southWest[0]],[Ct.bounds.northEast[1],Ct.bounds.northEast[0]]):li=z(nn,Vt,ln),Fe=new bl(li,Ct.content,{...Pt,textColor:((Wt=Ct.style)==null?void 0:Wt.textColor)||"#000000",fontSize:((Ut=Ct.style)==null?void 0:Ut.fontSize)||"14px",fontFamily:((Xt=Ct.style)==null?void 0:Xt.fontFamily)||"Arial, sans-serif",textAlign:((Rt=Ct.style)==null?void 0:Rt.textAlign)||"center",backgroundColor:((on=Ct.style)==null?void 0:on.backgroundColor)||"#FFFFFF",backgroundOpacity:((dn=Ct.style)==null?void 0:dn.backgroundOpacity)!==void 0?Ct.style.backgroundOpacity:1}),Ct.rotation&&typeof Fe.setRotation=="function"&&Fe.setRotation(Ct.rotation),console.log("[loadPlan] TextRectangle cr avec succs:",Fe)}break}}Fe&&(Fe._dbId=it.id,Fe.properties?(Ft.rotation&&(Fe.properties.rotation=Ft.rotation),console.log(`[loadPlan] Proprits enrichies pour ${it.type_forme}:`,Fe.properties)):(Fe.properties={type:it.type_forme==="DEMI_CERCLE"?"Semicircle":it.type_forme,style:Pt,...Ft},console.log(`[loadPlan] Proprits initialises pour ${it.type_forme}:`,Fe.properties)),(ai=E.value)==null||ai.addLayer(Fe),o.value.push({id:it.id,type:it.type_forme,layer:Fe,properties:Fe.properties}),Ft.rotation&&typeof Fe.setRotation=="function"&&Fe.setRotation(Ft.rotation))}),console.log(`Plan ${De} charg avec succs avec ${r.getCurrentElements.length} formes`)):console.error(`Plan ${De} introuvable aprs chargement`),ne.value=!1}catch(lt){console.error("Erreur lors du chargement du plan:",lt)}}async function I(){if(!ae.value||!E.value){console.warn("Aucun plan actif ou groupe de formes  sauvegarder");return}be.value=!0,ye.value="saving";try{const De=[],ke=new Set(r.getCurrentElements.filter(it=>it.id!==void 0).map(it=>it.id)),lt=new Set;E.value.eachLayer(it=>{var Wt,Ut,Xt,Rt,on,dn,ai,Ct,nn,Vt,ln,li,In,fi,xi,Kn;const Fe={style:{color:((Wt=it.options)==null?void 0:Wt.color)||"#3388ff",fillColor:((Ut=it.options)==null?void 0:Ut.fillColor)||"#3388ff",fillOpacity:((Xt=it.options)==null?void 0:Xt.fillOpacity)||.2,weight:((Rt=it.options)==null?void 0:Rt.weight)||3,opacity:((on=it.options)==null?void 0:on.opacity)||1}};let Pt,Ft;if(it instanceof Ri.Circle)Pt="CERCLE",Ft={...Fe,center:[it.getLatLng().lng,it.getLatLng().lat],radius:it.getRadius()};else if(it instanceof Ri.Rectangle){Pt="RECTANGLE";const Tt=it.getBounds();Ft={...Fe,bounds:{southWest:[Tt.getSouthWest().lng,Tt.getSouthWest().lat],northEast:[Tt.getNorthEast().lng,Tt.getNorthEast().lat]}}}else if(((dn=it.properties)==null?void 0:dn.type)==="Semicircle"){Pt="DEMI_CERCLE";let Tt;typeof it.getLatLng=="function"?(Tt=it.getLatLng(),console.log("[savePlan] Demi-cercle - centre rcupr avec getLatLng",Tt)):it.getCenter&&typeof it.getCenter=="function"?(Tt=it.getCenter(),console.log("[savePlan] Demi-cercle - centre rcupr avec getCenter",Tt)):it._latlng?(Tt=it._latlng,console.log("[savePlan] Demi-cercle - centre rcupr via _latlng",Tt)):(console.warn("Impossible de rcuprer le centre du demi-cercle",it),Tt={lat:0,lng:0});const Dt=it.getRadius?it.getRadius():0;console.log("[savePlan] Demi-cercle - rayon:",Dt);const Di=((Ct=(ai=it.properties)==null?void 0:ai.style)==null?void 0:Ct.startAngle)||0,qn=((Vt=(nn=it.properties)==null?void 0:nn.style)==null?void 0:Vt.stopAngle)||180;console.log("[savePlan] Demi-cercle - angles:",{startAngle:Di,endAngle:qn}),Ft={...Fe,center:[Tt.lng,Tt.lat],radius:Dt,startAngle:Di,endAngle:qn},console.log("[savePlan] Donnes du demi-cercle prpares:",Ft)}else if(it instanceof Ri.Polyline&&!(it instanceof Ri.Polygon)){Pt="LIGNE";const Tt=it.getLatLngs();Ft={...Fe,points:Tt.map(Dt=>[Dt.lng,Dt.lat])}}else if(it instanceof bl||((ln=it.properties)==null?void 0:ln.type)==="TextRectangle"){Pt="TEXTE";const Tt=it,Dt=Tt.getBounds(),Di=((li=Tt.properties)==null?void 0:li.text)||"",qn={...((In=Tt.properties)==null?void 0:In.style)||{},...Tt.options||{}};Ft={...Fe,position:[Dt.getCenter().lng,Dt.getCenter().lat],content:Di,bounds:{southWest:[Dt.getSouthWest().lng,Dt.getSouthWest().lat],northEast:[Dt.getNorthEast().lng,Dt.getNorthEast().lat]},style:{...Fe.style,textColor:qn.textColor||"#000000",fontSize:qn.fontSize||"14px",fontFamily:qn.fontFamily||"Arial, sans-serif",textAlign:qn.textAlign||"center",backgroundColor:qn.backgroundColor||"#FFFFFF",backgroundOpacity:qn.backgroundOpacity!==void 0?qn.backgroundOpacity:1},rotation:((fi=it.properties)==null?void 0:fi.rotation)||0},console.log("[savePlan] Sauvegarde TextRectangle avec donnes:",Ft)}else((xi=it.properties)==null?void 0:xi.type)==="text"&&(Pt="TEXTE",Ft={...Fe,position:[it.getLatLng().lng,it.getLatLng().lat],content:it.properties.text,style:{...it.properties.style,fontSize:it.properties.style.fontSize}});if(Pt&&Ft){let Tt=it._elementId;it._dbId&&(Tt=it._dbId,typeof Tt=="number"&&lt.add(Tt)),De.push({id:Tt,type_forme:Pt,data:{...Ft,rotation:((Kn=it.properties)==null?void 0:Kn.rotation)||0}})}});const ht=Array.from(ke).filter(it=>!lt.has(it));console.log("Sauvegarde du plan:",{totalElements:De.length,elementsToDelete:ht.length,details:{elements:De,elementsToDelete:ht}}),r.elements=De,await r.saveToPlan(ae.value.id,{elementsToDelete:ht}),ye.value="success",setTimeout(()=>{ye.value=null},3e3)}catch(De){console.error("Erreur lors de la sauvegarde du plan:",De),ye.value=null}finally{be.value=!1}}Uh(()=>{Pe.user||Te(),n.clearCurrentPlan(),r.clearCurrentPlan()});function G(De){b(De)}function $(De){try{const ke=new Date(De);return isNaN(ke.getTime())?(console.error("Date invalide reue:",De),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(ke)}catch(ke){return console.error("Erreur lors du formatage de la date:",ke),"Date invalide"}}const D=()=>{E.value&&x()},J=()=>{u.value&&E.value&&(_(""),E.value.removeLayer(u.value),u.value=null)};async function le(){H.value=!0;try{const De=await Ln.get("/users/",{params:{role:"CONCESSIONNAIRE"}});Ce.value=De.data}catch(De){console.error("Erreur lors du chargement des concessionnaires:",De)}finally{H.value=!1}}async function ge(){var De;Se.value=!0;try{const ke=(De=Pe.user)==null?void 0:De.id;if(!ke){console.error("[loadDealerClients] No dealer ID available");return}const lt=await Ln.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:ke}});Array.isArray(lt.data)?de.value=lt.data:lt.data?de.value=[lt.data]:de.value=[]}catch(ke){console.error("[loadDealerClients] Error:",ke),de.value=[]}finally{Se.value=!1}}async function me(De){if(console.log("[MapView][selectClient] Current state:",{selectedDealer:Ue.value,selectedClient:q.value,newPlanModalRef:!!Y.value}),Y.value){Y.value.selectClient(De),q.value=De,M.value=!0;try{const ke={client:De.id};Ue.value&&(ke.concessionnaire=Ue.value.id);const lt=await Ln.get("/plans/",{params:ke});Be.value=lt.data}catch(ke){console.error("[MapView][selectClient] Error loading client plans:",ke),Be.value=[]}finally{M.value=!1}}else console.warn("[MapView][selectClient] NewPlanModal ref is not available")}function je(){Ue.value=null,q.value=null,de.value=[],Be.value=[]}function $e(){q.value=null,Be.value=[]}async function X(De){console.log(`onPlanCreated - Tentative de chargement du plan ${De}`),await n.fetchPlans();const ke=n.getPlanById(De);ke?(console.log(`Plan ${De} trouv, chargement en cours...`),localStorage.setItem("lastPlanId",De.toString()),ae.value=ke,n.setCurrentPlan(ke),r.setCurrentPlan(ke.id),j.value=!1,console.log(`Plan ${De} charg avec succs`)):console.error(`Plan ${De} introuvable aprs cration! Vrifiez les permissions.`)}async function se(De){try{Y.value?(await Y.value.selectDealer(De),Ue.value=De,de.value=Y.value.dealerClients):console.warn("[MapView][selectDealer] NewPlanModal ref is not available")}catch(ke){console.error("[MapView][selectDealer] Error:",ke)}}fs(Ue,async De=>{var ke;if(De&&((ke=Pe.user)==null?void 0:ke.user_type)==="admin"){Se.value=!0;try{const lt=await Ln.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:De.id}});de.value=Array.isArray(lt.data)?lt.data:[lt.data]}catch(lt){console.error("[MapView][watch selectedDealer] Error loading clients:",lt),de.value=[]}finally{Se.value=!1}}});function Te(){localStorage.removeItem("lastPlanId")}function Ee(){E.value&&E.value.clearLayers(),o.value=[]}function ie(De,ke="m"){return ke==="m"?`${(De/1e4).toFixed(2)} ha`:ke==="m"?De>=1e3?`${(De/1e3).toFixed(2)} km`:`${De.toFixed(2)} m`:`${De.toFixed(2)} ${ke}`}const We=It(!1);function et(De){return{Circle:"Cercle",Rectangle:"Rectangle",Semicircle:"Demi-cercle",Line:"Ligne",Polygon:"Polygone",TextRectangle:"Rectangle avec texte"}[De]||De}async function Xe(){var De,ke,lt;if(!(!ae.value||!f.value||!E.value))try{We.value=!0;const ht=ae.value.concessionnaire_details,it=ae.value.client_details;u.value&&(F(),u.value=null);const Fe=new _n("l","mm","a4"),Pt=Fe.internal.pageSize.getWidth(),Ft=Fe.internal.pageSize.getHeight(),Wt=new Image;Wt.src=U0,await new Promise(on=>{Wt.onload=()=>on(),Wt.onerror=()=>on()}),Fe.addImage(Wt,"JPEG",(Pt-60)/2,20,60,60),Fe.setFontSize(24),Fe.setTextColor(0),Fe.text(ae.value.nom||"Sans titre",Pt/2,100,{align:"center"});let Ut=120;if(Fe.setFontSize(14),ht&&(Fe.setFont("helvetica","bold"),Fe.text("Concessionnaire:",20,Ut),Fe.setFont("helvetica","normal"),Fe.text(`${ht.first_name} ${ht.last_name}${ht.company_name?` (${ht.company_name})`:""}`,20,Ut+8),Ut+=25),it&&(Fe.setFont("helvetica","bold"),Fe.text("Client:",20,Ut),Fe.setFont("helvetica","normal"),Fe.text(`${it.first_name} ${it.last_name}${it.company_name?` (${it.company_name})`:""}`,20,Ut+8),Ut+=25),ae.value.description){Fe.setFont("helvetica","bold"),Fe.text("Description:",20,Ut),Fe.setFont("helvetica","normal");const on=Fe.splitTextToSize(ae.value.description,150);Fe.text(on,20,Ut+8),Ut+=10*on.length+15}Fe.setFontSize(10),Fe.setTextColor(100),Fe.text(`Date de cration: ${$(ae.value.date_creation)}`,20,Ft-20),Fe.text(`Dernire modification: ${$(ae.value.date_modification)}`,Pt-20,Ft-20,{align:"right"});const Xt=[];E.value.eachLayer(on=>Xt.push(on));const Rt=Ri.simpleMapScreenshoter({hideElementsWithSelectors:[".leaflet-control-container",".leaflet-pm-toolbar",".leaflet-grid-layer",".leaflet-grid-label"],preventDownload:!0}).addTo(f.value);await new Promise(on=>setTimeout(on,3e3));for(let on=0;on<Xt.length;on++){Fe.addPage();const dn=30;Fe.addImage(Wt,"JPEG",Pt-dn-10,10,dn,30),Fe.setFontSize(8),Fe.setTextColor(100);let Ct=25;ht&&(Fe.text(`Concessionnaire: ${ht.first_name} ${ht.last_name}${ht.company_name?` (${ht.company_name})`:""}`,20,Ct),Ct+=10),it&&Fe.text(`Client: ${it.first_name} ${it.last_name}${it.company_name?` (${it.company_name})`:""}`,20,Ct),Fe.setDrawColor(200,200,200),Fe.setLineWidth(.5),Fe.line(20,45,Pt-20,45);const nn=Xt[on],Vt=nn.properties;Vt&&(Fe.setTextColor(0),Fe.setFontSize(16),Fe.setFont("helvetica","bold"),Fe.text(et(Vt.type),20,60));const ln=((De=nn.getBounds)==null?void 0:De.call(nn))||((ke=nn.getLatLng)==null?void 0:ke.call(nn));ln&&f.value.fitBounds(ln instanceof Ri.LatLng?Ri.latLngBounds([ln]):ln,{padding:[50,50]}),await new Promise(li=>setTimeout(li,2e3)),f.value.invalidateSize(),await new Promise(li=>{const In=()=>{var Tt;const fi=(Tt=f.value)==null?void 0:Tt.getContainer();if(!fi){li();return}const xi=fi.querySelectorAll(".leaflet-tile-loaded");fi.querySelectorAll(".leaflet-tile-loading").length===0&&xi.length>0?li():setTimeout(In,100)};In()});try{const li=await Rt.takeScreen("image"),In=await new Promise((Tt,Dt)=>{const Di=new Image;Di.onload=()=>Tt(Di),Di.onerror=qn=>Dt(qn),Di.src=li}),fi=Pt*.6-30;let xi=In.height*fi/In.width;xi>Ft*.9&&(xi=Ft*.9);const Kn=Math.max(80,(Ft-xi)/2);if(Fe.addImage(In,"PNG",20,Kn,fi,xi),Vt){const Tt=Pt*.6+10;let Dt=70;Fe.setFontSize(12),Fe.setFont("helvetica","normal"),Vt.type==="Circle"?(Fe.text(`Rayon: ${ie(Vt.radius)}`,Tt,Dt),Dt+=10,Fe.text(`Diamtre: ${ie(Vt.radius*2)}`,Tt,Dt),Dt+=10,Fe.text(`Surface: ${ie(Vt.area,"m")}`,Tt,Dt),Dt+=10,Fe.text(`Primtre: ${ie(Vt.perimeter)}`,Tt,Dt),Dt+=10,Vt.surfaceInterieure&&(Fe.text(`Surface intrieure: ${ie(Vt.surfaceInterieure,"m")}`,Tt,Dt),Dt+=10),Vt.surfaceExterieure&&(Fe.text(`Surface extrieure: ${ie(Vt.surfaceExterieure,"m")}`,Tt,Dt),Dt+=10)):Vt.type==="Rectangle"?(Fe.text(`Largeur: ${ie(Vt.width)}`,Tt,Dt),Dt+=10,Fe.text(`Hauteur: ${ie(Vt.height)}`,Tt,Dt),Dt+=10,Fe.text(`Surface: ${ie(Vt.area,"m")}`,Tt,Dt),Dt+=10,Fe.text(`Primtre: ${ie(Vt.perimeter)}`,Tt,Dt),Dt+=10,Vt.surfaceInterieure&&(Fe.text(`Surface intrieure: ${ie(Vt.surfaceInterieure,"m")}`,Tt,Dt),Dt+=10),Vt.surfaceExterieure&&(Fe.text(`Surface extrieure: ${ie(Vt.surfaceExterieure,"m")}`,Tt,Dt),Dt+=10)):Vt.type==="Line"?(Fe.text(`Longueur: ${ie(Vt.length)}`,Tt,Dt),Dt+=10,(lt=Vt.dimensions)!=null&&lt.width&&(Fe.text(`Largeur d'influence: ${ie(Vt.dimensions.width)}`,Tt,Dt),Dt+=10),Vt.surfaceInfluence&&(Fe.text(`Surface d'influence: ${ie(Vt.surfaceInfluence,"m")}`,Tt,Dt),Dt+=10)):Vt.type==="Polygon"?(Fe.text(`Surface: ${ie(Vt.area,"m")}`,Tt,Dt),Dt+=10,Fe.text(`Primtre: ${ie(Vt.perimeter)}`,Tt,Dt),Dt+=10,Vt.surfaceInterieure&&(Fe.text(`Surface intrieure: ${ie(Vt.surfaceInterieure,"m")}`,Tt,Dt),Dt+=10),Vt.surfaceExterieure&&(Fe.text(`Surface extrieure: ${ie(Vt.surfaceExterieure,"m")}`,Tt,Dt),Dt+=10)):Vt.type==="Semicircle"&&(Fe.text(`Rayon: ${ie(Vt.radius)}`,Tt,Dt),Dt+=10,Fe.text(`Diamtre: ${ie(Vt.radius*2)}`,Tt,Dt),Dt+=10,Fe.text(`Surface: ${ie(Vt.area,"m")}`,Tt,Dt),Dt+=10,Fe.text(`Primtre: ${ie(Vt.perimeter)}`,Tt,Dt),Dt+=10,Fe.text(`Longueur d'arc: ${ie(Vt.arcLength)}`,Tt,Dt),Dt+=10,Fe.text(`Angle d'ouverture: ${Vt.openingAngle.toFixed(1)}`,Tt,Dt),Dt+=10,Vt.surfaceInterieure&&(Fe.text(`Surface intrieure: ${ie(Vt.surfaceInterieure,"m")}`,Tt,Dt),Dt+=10),Vt.surfaceExterieure&&(Fe.text(`Surface extrieure: ${ie(Vt.surfaceExterieure,"m")}`,Tt,Dt),Dt+=10))}}catch(li){console.error(`[generateSynthesis] Erreur capture forme ${on+1}:`,li)}}f.value.removeControl(Rt),Fe.save(`synthese_${ae.value.nom}.pdf`)}catch(ht){console.error("[generateSynthesis] Erreur:",ht)}finally{We.value=!1}}return(De,ke)=>{var lt,ht,it;return nt(),at("div",wC,[A("div",xC,[We.value?(nt(),at("div",LC,ke[8]||(ke[8]=[Au('<div class="bg-white/90 rounded-2xl p-8 max-w-md shadow-2xl border border-gray-100"><div class="flex flex-col items-center"><div class="relative w-24 h-24 mb-6"><div class="absolute inset-0 border-4 border-primary-200 rounded-full"></div><div class="absolute inset-0 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"></div><div class="absolute inset-2 border-2 border-primary-400/30 rounded-full animate-pulse"></div><div class="absolute inset-0 flex items-center justify-center"><svg class="w-8 h-8 text-primary-600 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div><h3 class="text-xl font-semibold text-gray-900 mb-2"> Gnration de la synthse </h3><div class="space-y-2 text-center"><p class="text-primary-600 font-medium"> Capture des formes en cours... </p><p class="text-sm text-gray-500"> Nous optimisons la qualit de vos captures pour un rendu parfait </p></div></div></div>',1)]))):tn("",!0),ae.value?tn("",!0):(nt(),at("div",CC,[A("div",kC,[ke[11]||(ke[11]=Au('<div class="relative w-48 h-48 mx-auto mb-12 rounded-full bg-gradient-to-br from-primary-100 to-primary-50 p-8 shadow-lg ring-4 ring-white"><img src="'+U0+'" alt="IrrigationDesign Logo" class="w-full h-full object-contain filter drop-shadow-md"><div class="absolute inset-0 rounded-full bg-gradient-to-t from-transparent to-white/10 pointer-events-none"></div></div><h1 class="text-3xl font-bold text-gray-900 mb-4">Bienvenue sur IrrigationDesign</h1><p class="text-gray-600 mb-8">Pour commencer  dessiner, vous devez d&#39;abord crer un nouveau plan ou charger un plan existant.</p>',3)),A("div",PC,[A("button",{onClick:ke[0]||(ke[0]=Fe=>j.value=!0),class:"w-full flex items-center justify-center px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},ke[9]||(ke[9]=[A("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),ki(" Crer un nouveau plan ")])),A("button",{onClick:ke[1]||(ke[1]=Fe=>ne.value=!0),class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},ke[10]||(ke[10]=[A("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),ki(" Charger un plan existant ")]))])])])),A("div",SC,[A("div",{ref_key:"mapContainer",ref:t,class:"absolute inset-0 w-full h-full"},null,512),ae.value&&!We.value?(nt(),at("div",EC,[Pi(jx,{"last-save":(lt=ae.value)!=null&&lt.date_modification?new Date(ae.value.date_modification):void 0,"plan-name":(ht=ae.value)==null?void 0:ht.nom,"plan-description":(it=ae.value)==null?void 0:it.description,"save-status":ye.value,onChangeMapType:Dn(U),onCreateNewPlan:ke[2]||(ke[2]=Fe=>j.value=!0),onLoadPlan:ke[3]||(ke[3]=Fe=>ne.value=!0),onSavePlan:I,onAdjustView:D,onGenerateSummary:Xe},null,8,["last-save","plan-name","plan-description","save-status","onChangeMapType"])])):tn("",!0),ae.value&&!We.value?(nt(),ma(rx,{key:1,"current-tool":Dn(a),"selected-shape":re.value,onToolChange:Dn(_),onStyleUpdate:Dn(w),onPropertiesUpdate:G,onDeleteShape:J,class:"drawing-tools-wrapper"},null,8,["current-tool","selected-shape","onToolChange","onStyleUpdate"])):tn("",!0),We.value?(nt(),at("div",AC,ke[12]||(ke[12]=[Au('<div class="text-center"><div class="mb-4"><svg class="animate-spin h-10 w-10 mx-auto text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div><p class="text-lg font-medium text-gray-900">Gnration de la synthse en cours...</p><p class="text-sm text-gray-500 mt-2">Veuillez patienter pendant que nous analysons votre plan.</p></div>',1)]))):tn("",!0)]),Pi(N1,{ref_key:"newPlanModalRef",ref:Y,modelValue:j.value,"onUpdate:modelValue":ke[4]||(ke[4]=Fe=>j.value=Fe),onCreated:X,onDealerSelected:ke[5]||(ke[5]=Fe=>Ue.value=Fe),onClientSelected:ke[6]||(ke[6]=Fe=>q.value=Fe)},null,8,["modelValue"]),ne.value?(nt(),at("div",MC,[A("div",BC,[A("div",TC,[ke[14]||(ke[14]=A("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),A("button",{onClick:ke[7]||(ke[7]=Fe=>ne.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},ke[13]||(ke[13]=[A("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),Dn(Pe).isAdmin?(nt(),at("div",NC,[Ue.value?q.value?(nt(),at("div",VC,[A("div",HC,[A("button",{onClick:$e,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},ke[23]||(ke[23]=[A("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ki(" Retour  la liste des clients ")])),ke[24]||(ke[24]=A("span",{class:"mx-2 text-gray-400"},"|",-1)),A("span",GC,kt(q.value.first_name)+" "+kt(q.value.last_name)+" ("+kt(q.value.company_name)+") ",1)]),ke[26]||(ke[26]=A("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),A("div",WC,[M.value?(nt(),at(gn,{key:0},Un(3,Fe=>A("div",{key:Fe,class:"animate-pulse"},ke[25]||(ke[25]=[A("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[A("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),A("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),A("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(nt(!0),at(gn,{key:1},Un(Be.value,Fe=>(nt(),at("button",{key:Fe.id,onClick:Pt=>Ie(Fe.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[A("div",KC,kt(Fe.nom),1),A("div",JC,kt(Fe.description),1),A("div",YC," Modifi le "+kt($(Fe.date_modification)),1)],8,ZC))),128))])])):(nt(),at("div",FC,[A("div",jC,[A("button",{onClick:je,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},ke[18]||(ke[18]=[A("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ki(" Retour  la liste des concessionnaires ")])),ke[19]||(ke[19]=A("span",{class:"mx-2 text-gray-400"},"|",-1)),A("span",zC,kt(Ue.value.first_name)+" "+kt(Ue.value.last_name)+" ("+kt(Ue.value.company_name)+") ",1)]),ke[22]||(ke[22]=A("h3",{class:"font-medium text-gray-700"},"Slectionnez un client",-1)),A("div",UC,[Se.value?(nt(),at(gn,{key:0},Un(3,Fe=>A("div",{key:Fe,class:"animate-pulse"},ke[20]||(ke[20]=[A("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[A("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),A("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(nt(!0),at(gn,{key:1},Un(Z.value,Fe=>(nt(),at("button",{key:Fe.id,onClick:Pt=>me(Fe),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[A("div",null,[A("div",$C,kt(Fe.first_name)+" "+kt(Fe.last_name)+" ("+kt(Fe.company_name)+")",1)]),ke[21]||(ke[21]=A("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,qC))),128))])])):(nt(),at("div",DC,[ke[17]||(ke[17]=A("h3",{class:"font-medium text-gray-700"},"Slectionnez un concessionnaire",-1)),A("div",OC,[H.value?(nt(),at(gn,{key:0},Un(3,Fe=>A("div",{key:Fe,class:"animate-pulse"},ke[15]||(ke[15]=[A("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[A("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),A("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(nt(!0),at(gn,{key:1},Un(Ce.value,Fe=>(nt(),at("button",{key:Fe.id,onClick:Pt=>se(Fe),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[A("div",null,[A("div",IC,kt(Fe.first_name)+" "+kt(Fe.last_name)+" ("+kt(Fe.company_name)+")",1)]),ke[16]||(ke[16]=A("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,RC))),128))])]))])):Dn(Pe).isDealer?(nt(),at("div",XC,[q.value?(nt(),at("div",i6,[A("div",r6,[A("button",{onClick:$e,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},ke[30]||(ke[30]=[A("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ki(" Retour  la liste des clients ")])),ke[31]||(ke[31]=A("span",{class:"mx-2 text-gray-400"},"|",-1)),A("span",s6,kt(q.value.first_name)+" "+kt(q.value.last_name),1)]),ke[33]||(ke[33]=A("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),A("div",o6,[M.value?(nt(),at(gn,{key:0},Un(3,Fe=>A("div",{key:Fe,class:"animate-pulse"},ke[32]||(ke[32]=[A("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[A("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),A("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),A("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(nt(!0),at(gn,{key:1},Un(Be.value,Fe=>(nt(),at("button",{key:Fe.id,onClick:Pt=>Ie(Fe.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[A("div",l6,kt(Fe.nom),1),A("div",u6,kt(Fe.description),1),A("div",c6," Modifi le "+kt($(Fe.date_modification)),1)],8,a6))),128))])])):(nt(),at("div",QC,[ke[29]||(ke[29]=A("h3",{class:"font-medium text-gray-700"},"Slectionnez un client",-1)),A("div",e6,[Se.value?(nt(),at(gn,{key:0},Un(3,Fe=>A("div",{key:Fe,class:"animate-pulse"},ke[27]||(ke[27]=[A("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[A("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),A("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(nt(!0),at(gn,{key:1},Un(Z.value,Fe=>(nt(),at("button",{key:Fe.id,onClick:Pt=>me(Fe),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[A("div",null,[A("div",n6,kt(Fe.first_name)+" "+kt(Fe.last_name)+" ("+kt(Fe.company_name)+")",1)]),ke[28]||(ke[28]=A("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,t6))),128))])]))])):(nt(),at("div",h6,[Dn(n).plans.length===0?(nt(),at("div",f6,ke[34]||(ke[34]=[A("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(nt(),at("div",d6,[(nt(!0),at(gn,null,Un(Dn(n).plans,Fe=>(nt(),at("button",{key:Fe.id,onClick:Pt=>Ie(Fe.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[A("div",m6,kt(Fe.nom),1),A("div",g6,kt(Fe.description),1),A("div",v6," Modifi le "+kt($(Fe.date_modification)),1)],8,p6))),128))]))]))])])):tn("",!0)])])}}}),_6={class:"fixed inset-0 z-50 overflow-y-auto"},y6={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},b6={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},w6={class:"mt-3 text-center sm:mt-0 sm:text-left"},x6={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},L6={class:"mt-4"},C6={class:"grid grid-cols-2 gap-4"},k6=["disabled"],P6={key:0,class:"mt-1 text-sm text-gray-500"},S6={class:"grid grid-cols-2 gap-4"},E6={key:0},A6=["disabled"],M6=["value"],B6={key:1},T6=["disabled"],N6=["value"],D6={key:0},O6={class:"grid grid-cols-2 gap-4"},R6={key:1,class:"rounded-md bg-red-50 p-4"},I6={class:"flex"},F6={class:"ml-3"},j6={class:"text-sm font-medium text-red-800"},z6={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense"},U6=["disabled"],q6={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},tv=ps({__name:"UserFormModal",props:{user:{type:Object,default:null},dealers:{type:Array,default:()=>[]},isAdmin:{type:Boolean,required:!0},currentDealer:{type:String,default:""}},emits:["close","save"],setup(e,{emit:t}){var F,N,U,j,ne,ae,be;const n=e,r=t,o=ds(),a=It(!1),u=It(null),f=Nn(()=>{var ye;return n.isAdmin?n.user?n.user.id!==((ye=o.user)==null?void 0:ye.id):!0:!1}),m=Nn(()=>n.isAdmin?[{value:"ADMIN",label:"Administrateur"},{value:"CONCESSIONNAIRE",label:"Concessionnaire"},{value:"UTILISATEUR",label:"Client"}]:[{value:"UTILISATEUR",label:"Client"}]),_=Nn(()=>n.isAdmin?b.role==="UTILISATEUR":!0),w=Nn(()=>n.dealers.filter(ye=>ye.role==="CONCESSIONNAIRE")),b=Wa({first_name:((F=n.user)==null?void 0:F.first_name)||"",last_name:((N=n.user)==null?void 0:N.last_name)||"",email:((U=n.user)==null?void 0:U.email)||"",username:((j=n.user)==null?void 0:j.username)||"",company_name:((ne=n.user)==null?void 0:ne.company_name)||"",role:((ae=n.user)==null?void 0:ae.role)||(n.isAdmin?"":"UTILISATEUR"),dealer:((be=n.user)==null?void 0:be.concessionnaire)||n.currentDealer,password:"",password_confirm:""}),E=()=>{if(!b.first_name||!b.last_name)return u.value="Le prnom et le nom sont requis",!1;if(!b.email)return u.value="L'email est requis",!1;if(!b.username)return u.value="Le nom d'utilisateur est requis",!1;if(!n.user){if(!b.password)return u.value="Le mot de passe est requis",!1;if(b.password!==b.password_confirm)return u.value="Les mots de passe ne correspondent pas",!1}return b.role==="UTILISATEUR"&&!b.dealer?(u.value="Un concessionnaire doit tre slectionn pour un client",!1):!0},x=async()=>{var ye;if(u.value=null,!!E()){a.value=!0;try{const Pe={...b};(ye=n.user)!=null&&ye.id&&(Pe.id=n.user.id,delete Pe.password,delete Pe.password_confirm),Pe.role==="UTILISATEUR"&&Pe.dealer&&(Pe.concessionnaire=Pe.dealer),delete Pe.dealer,await r("save",Pe),r("close")}catch(Pe){console.error("Erreur formulaire:",Pe),u.value=Pe.message,a.value=!1}}};return(ye,Pe)=>(nt(),at("div",_6,[A("div",y6,[Pe[24]||(Pe[24]=A("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[A("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),Pe[25]||(Pe[25]=A("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"",-1)),A("div",b6,[A("div",null,[A("div",w6,[A("h3",x6,kt(e.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),A("div",L6,[A("form",{onSubmit:Mc(x,["prevent"]),class:"space-y-4"},[A("div",C6,[A("div",null,[Pe[10]||(Pe[10]=A("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prnom",-1)),kn(A("input",{type:"text",id:"first_name","onUpdate:modelValue":Pe[0]||(Pe[0]=Ce=>b.first_name=Ce),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[ri,b.first_name]])]),A("div",null,[Pe[11]||(Pe[11]=A("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),kn(A("input",{type:"text",id:"last_name","onUpdate:modelValue":Pe[1]||(Pe[1]=Ce=>b.last_name=Ce),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[ri,b.last_name]])])]),A("div",null,[Pe[12]||(Pe[12]=A("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),kn(A("input",{type:"email",id:"email","onUpdate:modelValue":Pe[2]||(Pe[2]=Ce=>b.email=Ce),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[ri,b.email]])]),A("div",null,[Pe[13]||(Pe[13]=A("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),kn(A("input",{type:"text",id:"username","onUpdate:modelValue":Pe[3]||(Pe[3]=Ce=>b.username=Ce),required:"",disabled:!!n.user,class:Ni(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",{"bg-gray-100":!!n.user}])},null,10,k6),[[ri,b.username]]),n.user?(nt(),at("p",P6," Le nom d'utilisateur ne peut pas tre modifi aprs la cration. ")):tn("",!0)]),A("div",null,[Pe[14]||(Pe[14]=A("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Nom de l'entreprise",-1)),kn(A("input",{type:"text",id:"company_name","onUpdate:modelValue":Pe[4]||(Pe[4]=Ce=>b.company_name=Ce),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[ri,b.company_name]])]),A("div",S6,[n.isAdmin?(nt(),at("div",E6,[Pe[16]||(Pe[16]=A("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Rle",-1)),kn(A("select",{id:"role","onUpdate:modelValue":Pe[5]||(Pe[5]=Ce=>b.role=Ce),required:"",disabled:!f.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Pe[15]||(Pe[15]=A("option",{value:""},"Slectionner un rle",-1)),(nt(!0),at(gn,null,Un(m.value,Ce=>(nt(),at("option",{key:Ce.value,value:Ce.value},kt(Ce.label),9,M6))),128))],8,A6),[[cs,b.role]])])):tn("",!0),_.value?(nt(),at("div",B6,[Pe[18]||(Pe[18]=A("label",{for:"dealer",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),kn(A("select",{id:"dealer","onUpdate:modelValue":Pe[6]||(Pe[6]=Ce=>b.dealer=Ce),required:"",disabled:!n.isAdmin,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Pe[17]||(Pe[17]=A("option",{value:""},"Slectionner un concessionnaire",-1)),(nt(!0),at(gn,null,Un(w.value,Ce=>(nt(),at("option",{key:Ce.id,value:Ce.id},kt(Dn(Kl)(Ce)),9,N6))),128))],8,T6),[[cs,b.dealer]])])):tn("",!0)]),e.user?tn("",!0):(nt(),at("div",D6,[A("div",O6,[A("div",null,[Pe[19]||(Pe[19]=A("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),kn(A("input",{type:"password",id:"password","onUpdate:modelValue":Pe[7]||(Pe[7]=Ce=>b.password=Ce),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[ri,b.password]])]),A("div",null,[Pe[20]||(Pe[20]=A("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),kn(A("input",{type:"password",id:"password_confirm","onUpdate:modelValue":Pe[8]||(Pe[8]=Ce=>b.password_confirm=Ce),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[ri,b.password_confirm]])])]),Pe[21]||(Pe[21]=A("p",{class:"mt-1 text-sm text-gray-500"}," L'utilisateur devra changer son mot de passe  sa premire connexion. ",-1))])),u.value?(nt(),at("div",R6,[A("div",I6,[Pe[22]||(Pe[22]=A("div",{class:"flex-shrink-0"},[A("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[A("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),A("div",F6,[A("h3",j6,kt(u.value),1)])])])):tn("",!0),A("div",z6,[A("button",{type:"submit",disabled:a.value,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:col-start-2 sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},[a.value?(nt(),at("svg",q6,Pe[23]||(Pe[23]=[A("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),A("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):tn("",!0),ki(" "+kt(a.value?"Enregistrement...":"Enregistrer"),1)],8,U6),A("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:col-start-1 sm:text-sm",onClick:Pe[9]||(Pe[9]=Ce=>ye.$emit("close"))}," Annuler ")])],32)])])])])])]))}}),$6={class:"fixed inset-0 z-50 overflow-y-auto"},V6={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},H6={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},G6={class:"sm:flex sm:items-start"},W6={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},Z6={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},K6={class:"mt-2"},J6={class:"text-sm text-gray-500"},Y6={class:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},nv=ps({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(e){return(t,n)=>(nt(),at("div",$6,[A("div",V6,[n[3]||(n[3]=A("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[A("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),n[4]||(n[4]=A("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"",-1)),A("div",H6,[A("div",G6,[n[2]||(n[2]=A("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[A("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),A("div",W6,[A("h3",Z6,kt(e.title),1),A("div",K6,[A("p",J6,kt(e.message),1)])])]),A("div",Y6,[A("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:n[0]||(n[0]=r=>t.$emit("confirm"))}," Confirmer "),A("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:w-auto sm:text-sm",onClick:n[1]||(n[1]=r=>t.$emit("cancel"))}," Annuler ")])])])]))}}),X6={class:"h-full bg-gray-50"},Q6={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ek={class:"flex justify-between items-center mb-8"},tk={class:"text-3xl font-extrabold text-gray-900"},nk={class:"bg-white shadow rounded-lg mb-6 p-4"},ik={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},rk={key:0},sk=["placeholder"],ok={key:1},ak=["value"],lk={class:"bg-white shadow rounded-lg"},uk={class:"overflow-x-auto"},ck={class:"min-w-full divide-y divide-gray-200"},hk={class:"bg-gray-50"},fk={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},dk={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},pk={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},mk={class:"bg-white divide-y divide-gray-200"},gk={class:"px-6 py-4 whitespace-nowrap"},vk={class:"flex items-center"},_k={class:"flex-shrink-0 h-10 w-10"},yk={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},bk={class:"text-primary-600 font-medium"},wk={class:"ml-4"},xk={class:"text-sm font-medium text-gray-900"},Lk={class:"text-sm text-gray-500"},Ck={class:"px-6 py-4 whitespace-nowrap"},kk={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Pk={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Sk={class:"px-6 py-4 whitespace-nowrap"},Ek={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Ak=["onClick"],Mk=["onClick"],Bk=ps({__name:"UserListView",setup(e){const t=ds(),n=It([]),r=It([]),o=It(!1),a=It(!1),u=It(null),f=It(null),m=Wa({role:"",search:"",dealer:""}),_=Nn(()=>t.isAdmin),w=Nn(()=>t.isDealer),b=Nn(()=>n.value.filter(q=>q.role==="CONCESSIONNAIRE")),E=Nn(()=>{var H;console.log("Computing filtered users..."),console.log("Current users:",n.value),console.log("Is admin:",_.value),console.log("Is dealer:",w.value),console.log("Current filters:",m);let q=n.value;if(w.value&&(console.log("Filtering for dealer:",(H=t.user)==null?void 0:H.id),q=q.filter(Se=>{var M;return Se.role==="UTILISATEUR"&&Se.dealer===((M=t.user)==null?void 0:M.id)}),console.log("Filtered users for dealer:",q)),_.value&&(m.role&&(q=q.filter(Se=>Se.role===m.role),console.log("Filtered by role:",q)),m.dealer&&(q=q.filter(Se=>String(Se.dealer)===String(m.dealer)),console.log("Filtered by dealer:",q))),m.search){const Se=m.search.toLowerCase();q=q.filter(M=>M.username.toLowerCase().includes(Se)||M.email.toLowerCase().includes(Se)||M.first_name.toLowerCase().includes(Se)||M.last_name.toLowerCase().includes(Se)||M.company_name&&M.company_name.toLowerCase().includes(Se)),console.log("Filtered by search:",q)}return console.log("Final filtered users:",q),q});ba(async()=>{await x(),_.value&&await F()});async function x(){try{console.log("Fetching users...");const q=await Ln.get("/users/");console.log("Users API response:",q.data),n.value=q.data,console.log("Users after assignment:",n.value)}catch(q){console.error("Erreur lors de la rcupration des utilisateurs:",q)}}async function F(){try{const q=await Ln.get("/users/",{params:{role:"CONCESSIONNAIRE"}});r.value=q.data}catch(q){console.error("Erreur lors de la rcupration des concessionnaires:",q)}}function N(){u.value=null,o.value=!0}function U(q){u.value={...q},o.value=!0}function j(){o.value=!1,u.value=null}async function ne(q){var H;try{let Se;const M=!!q.id,Y={...q};return delete Y.dealer_name,delete Y.full_name,delete Y.user_type,delete Y.permissions,M?Se=await Ln.patch(`/users/${q.id}/`,Y):Se=await Ln.post("/users/",Y),await x(),j(),Se.data}catch(Se){const M=((H=Se.response)==null?void 0:H.data)||{};let Y="";throw typeof M=="object"&&(Y=Object.entries(M).map(([Z,re])=>Array.isArray(re)?re[0]:re).filter(Z=>Z).join(`
`)),Y||(Y="Une erreur est survenue lors de la sauvegarde"),new Error(Y)}}function ae(q){f.value=q,a.value=!0}async function be(){if(f.value)try{await Ln.delete(`/users/${f.value.id}/`),await x(),a.value=!1,f.value=null}catch(q){throw console.error("Erreur lors de la suppression de l'utilisateur:",q),q}}function ye(q,H){return`${(q==null?void 0:q.charAt(0))||""}${(H==null?void 0:H.charAt(0))||""}`.toUpperCase()}const Pe={ADMIN:"Admin",CONCESSIONNAIRE:"Concessionnaire",UTILISATEUR:"Client"};function Ce(q){return Pe[q]||q}function de(q){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function Be(q){return q?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}function Ue(q){var H;return _.value?!0:w.value?q.role==="UTILISATEUR"&&q.dealer===((H=t.user)==null?void 0:H.id):!1}return(q,H)=>{var Se,M;return nt(),at("div",X6,[A("div",Q6,[A("div",ek,[A("h1",tk,kt(_.value?"Gestion des utilisateurs":"Mes clients"),1),A("button",{onClick:N,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[H[4]||(H[4]=A("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[A("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),ki(" "+kt(_.value?"Nouvel utilisateur":"Nouveau client"),1)])]),A("div",nk,[A("div",ik,[_.value?(nt(),at("div",rk,[H[6]||(H[6]=A("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rle",-1)),kn(A("select",{id:"role-filter","onUpdate:modelValue":H[0]||(H[0]=Y=>m.role=Y),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},H[5]||(H[5]=[A("option",{value:""},"Tous les rles",-1),A("option",{value:"ADMIN"},"Admin",-1),A("option",{value:"CONCESSIONNAIRE"},"Concessionnaire",-1),A("option",{value:"UTILISATEUR"},"Client",-1)]),512),[[cs,m.role]])])):tn("",!0),A("div",null,[H[7]||(H[7]=A("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),kn(A("input",{type:"text",id:"search","onUpdate:modelValue":H[1]||(H[1]=Y=>m.search=Y),placeholder:_.value?"Nom, email...":"Rechercher un client...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,8,sk),[[ri,m.search]])]),_.value?(nt(),at("div",ok,[H[9]||(H[9]=A("label",{for:"dealer-filter",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),kn(A("select",{id:"dealer-filter","onUpdate:modelValue":H[2]||(H[2]=Y=>m.dealer=Y),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[H[8]||(H[8]=A("option",{value:""},"Tous les concessionnaires",-1)),(nt(!0),at(gn,null,Un(b.value,Y=>(nt(),at("option",{key:Y.id,value:Y.id},kt(Y.company_name||`${Y.first_name} ${Y.last_name}`),9,ak))),128))],512),[[cs,m.dealer]])])):tn("",!0)])]),A("div",lk,[A("div",uk,[A("table",ck,[A("thead",hk,[A("tr",null,[A("th",fk,kt(_.value?"Utilisateur":"Client"),1),_.value?(nt(),at("th",dk," Rle ")):tn("",!0),H[10]||(H[10]=A("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),_.value?(nt(),at("th",pk," Concessionnaire ")):tn("",!0),H[11]||(H[11]=A("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),H[12]||(H[12]=A("th",{scope:"col",class:"relative px-6 py-3"},[A("span",{class:"sr-only"},"Actions")],-1))])]),A("tbody",mk,[(nt(!0),at(gn,null,Un(E.value,Y=>(nt(),at("tr",{key:Y.id},[A("td",gk,[A("div",vk,[A("div",_k,[A("div",yk,[A("span",bk,kt(ye(Y.first_name,Y.last_name)),1)])]),A("div",wk,[A("div",xk,kt(Dn(Kl)(Y)),1),A("div",Lk,kt(Y.username),1)])])]),A("td",Ck,[A("span",{class:Ni(de(Y.role))},kt(Ce(Y.role)),3)]),A("td",kk,kt(Y.email),1),A("td",Pk,kt(Y.dealer_name||"-"),1),A("td",Sk,[A("span",{class:Ni(Be(Y.is_active))},kt(Y.is_active?"Actif":"Inactif"),3)]),A("td",Ek,[A("button",{onClick:Z=>U(Y),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,Ak),Ue(Y)?(nt(),at("button",{key:0,onClick:Z=>ae(Y),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,Mk)):tn("",!0)])]))),128))])])])])]),o.value?(nt(),ma(tv,{key:0,user:u.value,dealers:r.value,"is-admin":_.value,"current-dealer":(M=(Se=Dn(t).user)==null?void 0:Se.id)==null?void 0:M.toString(),onClose:j,onSave:ne},null,8,["user","dealers","is-admin","current-dealer"])):tn("",!0),a.value?(nt(),ma(nv,{key:1,title:"Supprimer l'utilisateur",message:"tes-vous sr de vouloir supprimer cet utilisateur ? Cette action est irrversible.",onConfirm:be,onCancel:H[3]||(H[3]=Y=>a.value=!1)})):tn("",!0)])}}}),Tk={class:"h-full bg-gray-50"},Nk={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Dk={class:"sm:flex sm:items-center"},Ok={class:"sm:flex-auto"},Rk={class:"text-2xl font-semibold text-gray-900"},Ik={class:"mt-2 text-sm text-gray-700"},Fk={key:0,class:"mt-8"},jk={class:"mb-6"},zk=["value"],Uk={key:0,class:"mb-6"},qk=["value"],$k={key:1,class:"mt-8"},Vk={class:"mb-6"},Hk=["value"],Gk={class:"mt-8"},Wk={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 rounded-lg"},Zk={class:"overflow-x-auto"},Kk={class:"min-w-full divide-y divide-gray-300"},Jk={class:"bg-gray-50"},Yk={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"},Xk={class:"ml-2 flex-none rounded"},Qk={key:0,scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},eP={key:1,scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},tP={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},nP={class:"ml-2 flex-none rounded"},iP={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},rP={class:"ml-2 flex-none rounded"},sP={class:"divide-y divide-gray-200 bg-white"},oP={key:0},aP={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},lP={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},uP={key:0,class:"px-3 py-4 text-sm text-gray-900"},cP={key:0,class:"flex items-center"},hP={class:"h-8 w-8 flex-shrink-0"},fP={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},dP={class:"text-primary-700 font-medium text-sm"},pP={class:"ml-3"},mP={class:"font-medium"},gP={key:1,class:"text-gray-500"},vP={key:1,class:"px-3 py-4 text-sm text-gray-900"},_P={key:0,class:"flex items-center"},yP={class:"h-8 w-8 flex-shrink-0"},bP={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},wP={class:"text-primary-700 font-medium text-sm"},xP={class:"ml-3"},LP={class:"font-medium"},CP={key:1,class:"text-gray-500"},kP={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},PP={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},SP={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},EP=["onClick"],AP=["onClick"],MP=["onClick"],BP={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},TP={class:"bg-white rounded-lg p-6 max-w-md w-full"},NP={class:"flex justify-between items-center mb-4"},DP={key:0,class:"space-y-4"},OP=["value"],RP=["value"],IP={key:1,class:"mt-4 bg-red-50 p-4 rounded-md"},FP={class:"flex"},jP={class:"ml-3"},zP={class:"text-sm font-medium text-red-800"},UP={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},qP=["disabled"],$P={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},VP=ps({__name:"PlansView",setup(e){const t=Nc(),n=ef(),r=ds(),o=T1(),a=It([]),u=It([]),f=It([]),m=It(!1),_=It(!1),w=It({nom:"",description:"",client:null}),b=It({id:0,nom:"",description:"",concessionnaire:null,client:null}),E=It(!1),x=It(null),F=It(null),N=It(null),U=It("date_modification"),j=It("desc"),ne=Nn(()=>F.value?f.value.filter(W=>W.concessionnaire===F.value):f.value),ae=Nn(()=>{let W=a.value;return r.isAdmin?F.value&&(W=W.filter(Q=>Q.concessionnaire===F.value),N.value&&(W=W.filter(Q=>Q.client===N.value))):r.isDealer&&(W=W.filter(Q=>{var z;return Q.concessionnaire===((z=r.user)==null?void 0:z.id)}),N.value&&(W=W.filter(Q=>Q.client===N.value))),[...W].sort((Q,z)=>{if(U.value==="nom")return j.value==="asc"?Q.nom.localeCompare(z.nom):z.nom.localeCompare(Q.nom);{const Ie=new Date(Q[U.value]).getTime(),I=new Date(z[U.value]).getTime();return j.value==="asc"?Ie-I:I-Ie}})});Nn(()=>a.value.filter(W=>{var Q;return W.createur.id===((Q=r.user)==null?void 0:Q.id)})),Nn(()=>a.value.filter(W=>{var Q,z,Ie;return r.isAdmin?W.createur.id!==((Q=r.user)==null?void 0:Q.id):r.isDealer?W.concessionnaire===((z=r.user)==null?void 0:z.id):W.client===((Ie=r.user)==null?void 0:Ie.id)}));const be=Nn(()=>r.isAdmin?{title:"Tous les plans",description:"Liste complte des plans",plans:a.value}:r.isDealer?{title:"Plans des clients",description:"Plans o vous tes assign comme concessionnaire",plans:a.value.filter(W=>{var Q;return W.concessionnaire===((Q=r.user)==null?void 0:Q.id)})}:{title:"Mes plans",description:"Plans qui vous sont assigns ou que vous avez crs",plans:a.value.filter(W=>{var Q,z;return W.client===((Q=r.user)==null?void 0:Q.id)||W.createur.id===((z=r.user)==null?void 0:z.id)})});ba(async()=>{var W;await ye(),r.isAdmin?await Pe():r.isDealer&&await Se(((W=r.user)==null?void 0:W.id)||0)});async function ye(){try{const W=await n.fetchPlansWithDetails();a.value=W.data}catch(W){console.error("Erreur lors du chargement des plans:",W)}}async function Pe(){try{const[W,Q]=await Promise.all([Ln.get("/users/",{params:{role:"CONCESSIONNAIRE"}}),Ln.get("/users/",{params:{role:"UTILISATEUR"}})]);u.value=W.data,f.value=Q.data}catch(W){console.error("Erreur lors du chargement des dealers et clients:",W)}}function Ce(){m.value=!0,w.value={nom:"",description:"",client:null}}async function de(W){try{n.setCurrentPlan(W),await o.loadPlanElements(W.id),t.push("/")}catch(Q){console.error("Erreur lors du chargement du plan:",Q),alert("Une erreur est survenue lors du chargement du plan")}}async function Be(W){var Q;if(W!=null&&W.id&&confirm("tes-vous sr de vouloir supprimer ce plan ?"))try{await n.deletePlan(W.id),await ye(),((Q=n.currentPlan)==null?void 0:Q.id)===W.id&&n.clearCurrentPlan()}catch(z){console.error("Erreur lors de la suppression du plan:",z),alert("Une erreur est survenue lors de la suppression du plan")}}function Ue(W){return new Date(W).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function q(W){return W?(W.first_name.charAt(0)+W.last_name.charAt(0)).toUpperCase():""}function H(W){b.value={id:W.id,nom:W.nom,description:W.description,concessionnaire:W.concessionnaire||null,client:W.client||null},W.concessionnaire&&Se(W.concessionnaire),_.value=!0}async function Se(W){try{const Q=await Ln.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:W}});f.value=Q.data}catch(Q){console.error("Erreur lors du chargement des clients:",Q),f.value=[]}}async function M(){var W,Q,z,Ie,I;x.value=null,E.value=!0;try{if(!b.value.nom.trim())throw new Error("Le nom du plan est requis");if(b.value.client&&!b.value.concessionnaire)throw new Error("Un concessionnaire doit tre slectionn pour assigner un client");await n.updatePlanDetails(b.value.id,{nom:b.value.nom.trim(),description:b.value.description.trim(),concessionnaire:b.value.concessionnaire,client:b.value.client})&&(_.value=!1,await ye())}catch(G){if(console.error("Erreur lors de la mise  jour du plan:",G),(Q=(W=G.response)==null?void 0:W.data)!=null&&Q.detail)x.value=G.response.data.detail;else if((Ie=(z=G.response)==null?void 0:z.data)!=null&&Ie.non_field_errors)x.value=G.response.data.non_field_errors[0];else if((I=G.response)!=null&&I.data){const $=Object.entries(G.response.data).map(([D,J])=>`${D}: ${Array.isArray(J)?J[0]:J}`);x.value=$.join(`
`)}else x.value=G.message||"Une erreur est survenue lors de la mise  jour du plan"}finally{E.value=!1}}fs(()=>b.value.concessionnaire,async W=>{W?await Se(W):(f.value=[],b.value.client=null)});function Y(W){const Q=r.user;return Q?Q.user_type==="admin"?!0:Q.user_type==="dealer"?W.concessionnaire===Q.id:W.client===Q.id||W.createur.id===Q.id:!1}Nn(()=>{const W=new Map;return a.value.forEach(Q=>{Q.createur&&W.set(Q.createur.id,Q.createur),Q.concessionnaire_details&&W.set(Q.concessionnaire_details.id,Q.concessionnaire_details),Q.client_details&&W.set(Q.client_details.id,Q.client_details)}),W});async function Z(W){await ye(),localStorage.setItem("lastPlanId",W.toString()),console.log(`Plan ${W} cr et dfini comme plan actif`),t.push("/")}function re(W){U.value===W?j.value=j.value==="asc"?"desc":"asc":(U.value=W,j.value="desc")}return(W,Q)=>(nt(),at("div",Tk,[A("div",Nk,[A("div",Dk,[A("div",Ok,[A("h1",Rk,kt(be.value.title),1),A("p",Ik,kt(be.value.description),1)]),A("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[A("button",{onClick:Ce,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),Dn(r).isAdmin?(nt(),at("div",Fk,[A("div",jk,[Q[14]||(Q[14]=A("label",{for:"dealer-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par concessionnaire",-1)),kn(A("select",{id:"dealer-filter","onUpdate:modelValue":Q[0]||(Q[0]=z=>F.value=z),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Q[13]||(Q[13]=A("option",{value:null},"Tous les concessionnaires",-1)),(nt(!0),at(gn,null,Un(u.value,z=>(nt(),at("option",{key:z.id,value:z.id},kt(z.first_name)+" "+kt(z.last_name)+" ("+kt(z.company_name)+") ",9,zk))),128))],512),[[cs,F.value]])]),F.value?(nt(),at("div",Uk,[Q[16]||(Q[16]=A("label",{for:"client-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par client",-1)),kn(A("select",{id:"client-filter","onUpdate:modelValue":Q[1]||(Q[1]=z=>N.value=z),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Q[15]||(Q[15]=A("option",{value:null},"Tous les clients",-1)),(nt(!0),at(gn,null,Un(ne.value,z=>(nt(),at("option",{key:z.id,value:z.id},kt(z.first_name)+" "+kt(z.last_name)+" ("+kt(z.company_name)+") ",9,qk))),128))],512),[[cs,N.value]])])):tn("",!0)])):Dn(r).isDealer?(nt(),at("div",$k,[A("div",Vk,[Q[18]||(Q[18]=A("label",{for:"client-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par client",-1)),kn(A("select",{id:"client-filter","onUpdate:modelValue":Q[2]||(Q[2]=z=>N.value=z),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Q[17]||(Q[17]=A("option",{value:null},"Tous les clients",-1)),(nt(!0),at(gn,null,Un(f.value,z=>(nt(),at("option",{key:z.id,value:z.id},kt(z.first_name)+" "+kt(z.last_name)+" ("+kt(z.company_name)+") ",9,Hk))),128))],512),[[cs,N.value]])])])):tn("",!0),A("div",Gk,[A("div",Wk,[A("div",Zk,[A("table",Kk,[A("thead",Jk,[A("tr",null,[A("th",Yk,[A("button",{onClick:Q[3]||(Q[3]=z=>re("nom")),class:"group inline-flex items-center"},[Q[20]||(Q[20]=ki(" Nom ")),A("span",Xk,[(nt(),at("svg",{class:Ni(["h-5 w-5",{"text-gray-900":U.value==="nom","text-gray-400":U.value!=="nom","rotate-180":U.value==="nom"&&j.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},Q[19]||(Q[19]=[A("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),Q[25]||(Q[25]=A("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),Dn(r).isDealer?tn("",!0):(nt(),at("th",Qk," Concessionnaire ")),Dn(r).isClient?tn("",!0):(nt(),at("th",eP," Client ")),A("th",tP,[A("button",{onClick:Q[4]||(Q[4]=z=>re("date_creation")),class:"group inline-flex items-center"},[Q[22]||(Q[22]=ki(" Cr le ")),A("span",nP,[(nt(),at("svg",{class:Ni(["h-5 w-5",{"text-gray-900":U.value==="date_creation","text-gray-400":U.value!=="date_creation","rotate-180":U.value==="date_creation"&&j.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},Q[21]||(Q[21]=[A("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),A("th",iP,[A("button",{onClick:Q[5]||(Q[5]=z=>re("date_modification")),class:"group inline-flex items-center"},[Q[24]||(Q[24]=ki(" Modifi le ")),A("span",rP,[(nt(),at("svg",{class:Ni(["h-5 w-5",{"text-gray-900":U.value==="date_modification","text-gray-400":U.value!=="date_modification","rotate-180":U.value==="date_modification"&&j.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},Q[23]||(Q[23]=[A("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),Q[26]||(Q[26]=A("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[A("span",{class:"sr-only"},"Actions")],-1))])]),A("tbody",sP,[ae.value.length===0?(nt(),at("tr",oP,Q[27]||(Q[27]=[A("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun plan disponible ",-1)]))):tn("",!0),(nt(!0),at(gn,null,Un(ae.value,z=>(nt(),at("tr",{key:z.id,class:"hover:bg-gray-50"},[A("td",aP,kt(z.nom),1),A("td",lP,kt(z.description||"-"),1),Dn(r).isDealer?tn("",!0):(nt(),at("td",uP,[z.concessionnaire_details?(nt(),at("div",cP,[A("div",hP,[A("div",fP,[A("span",dP,kt(q(z.concessionnaire_details)),1)])]),A("div",pP,[A("div",mP,kt(Dn(Kl)(z.concessionnaire_details)),1)])])):(nt(),at("div",gP,"-"))])),Dn(r).isClient?tn("",!0):(nt(),at("td",vP,[z.client_details?(nt(),at("div",_P,[A("div",yP,[A("div",bP,[A("span",wP,kt(q(z.client_details)),1)])]),A("div",xP,[A("div",LP,kt(Dn(Kl)(z.client_details)),1)])])):(nt(),at("div",CP,"-"))])),A("td",kP,kt(Ue(z.date_creation)),1),A("td",PP,kt(Ue(z.date_modification)),1),A("td",SP,[A("button",{onClick:Ie=>de(z),class:"text-primary-600 hover:text-primary-900 mr-4"}," Ouvrir ",8,EP),A("button",{onClick:Ie=>H(z),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,AP),Y(z)?(nt(),at("button",{key:0,onClick:Ie=>Be(z),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,MP)):tn("",!0)])]))),128))])])])])]),Pi(N1,{modelValue:m.value,"onUpdate:modelValue":Q[6]||(Q[6]=z=>m.value=z),dealers:u.value,clients:f.value,onCreated:Z},null,8,["modelValue","dealers","clients"]),_.value?(nt(),at("div",BP,[A("div",TP,[A("div",NP,[Q[29]||(Q[29]=A("h2",{class:"text-xl font-semibold text-gray-900"},"Modifier le plan",-1)),A("button",{onClick:Q[7]||(Q[7]=z=>_.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},Q[28]||(Q[28]=[A("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),A("form",{onSubmit:Mc(M,["prevent"]),class:"space-y-4"},[A("div",null,[Q[30]||(Q[30]=A("label",{for:"edit-nom",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),kn(A("input",{type:"text",id:"edit-nom","onUpdate:modelValue":Q[8]||(Q[8]=z=>b.value.nom=z),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",required:""},null,512),[[ri,b.value.nom]])]),A("div",null,[Q[31]||(Q[31]=A("label",{for:"edit-description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),kn(A("textarea",{id:"edit-description","onUpdate:modelValue":Q[9]||(Q[9]=z=>b.value.description=z),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[ri,b.value.description]])]),Dn(r).isAdmin?(nt(),at("div",DP,[A("div",null,[Q[33]||(Q[33]=A("label",{for:"edit-concessionnaire",class:"block text-sm font-medium text-gray-700"}," Concessionnaire ",-1)),kn(A("select",{id:"edit-concessionnaire","onUpdate:modelValue":Q[10]||(Q[10]=z=>b.value.concessionnaire=z),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Q[32]||(Q[32]=A("option",{value:null},"Aucun",-1)),(nt(!0),at(gn,null,Un(u.value,z=>(nt(),at("option",{key:z.id,value:z.id},kt(Dn(Kl)(z)),9,OP))),128))],512),[[cs,b.value.concessionnaire]])]),A("div",null,[Q[35]||(Q[35]=A("label",{for:"edit-client",class:"block text-sm font-medium text-gray-700"}," Client ",-1)),kn(A("select",{id:"edit-client","onUpdate:modelValue":Q[11]||(Q[11]=z=>b.value.client=z),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Q[34]||(Q[34]=A("option",{value:null},"Aucun",-1)),(nt(!0),at(gn,null,Un(ne.value,z=>(nt(),at("option",{key:z.id,value:z.id},kt(Dn(Kl)(z)),9,RP))),128))],512),[[cs,b.value.client]])])])):tn("",!0),x.value?(nt(),at("div",IP,[A("div",FP,[Q[36]||(Q[36]=A("div",{class:"flex-shrink-0"},[A("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[A("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),A("div",jP,[A("p",zP,kt(x.value),1)])])])):tn("",!0),A("div",UP,[A("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:Q[12]||(Q[12]=z=>_.value=!1)}," Annuler "),A("button",{type:"submit",disabled:E.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm disabled:opacity-50"},[E.value?(nt(),at("svg",$P,Q[37]||(Q[37]=[A("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),A("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):tn("",!0),ki(" "+kt(E.value?"Enregistrement...":"Enregistrer"),1)],8,qP)])],32)])])):tn("",!0)])]))}}),HP={class:"h-full bg-gray-50"},GP={class:"container mx-auto px-4 py-8"},WP={class:"sm:flex sm:items-center"},ZP={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},KP={class:"mt-8"},JP={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 rounded-lg"},YP={class:"overflow-x-auto"},XP={class:"min-w-full divide-y divide-gray-300"},QP={class:"divide-y divide-gray-200 bg-white"},eS={key:0,class:"animate-pulse"},tS={key:1},nS={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-6"},iS={class:"flex items-center"},rS={class:"h-10 w-10 flex-shrink-0"},sS={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},oS={class:"text-primary-600 font-medium"},aS={class:"ml-4"},lS={class:"font-medium text-gray-900"},uS={class:"text-gray-500"},cS={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},hS={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},fS={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},dS={class:"flex items-center"},pS={class:"font-medium"},mS={class:"text-gray-400 ml-1"},gS={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},vS=["onClick"],_S=["onClick"],yS=ps({__name:"ClientListView",setup(e){Nc();const t=ds(),n=It([]),r=It(!0),o=It(!1),a=It(!1),u=It(null),f=It(null);ba(async()=>{await m()});async function m(){var N;try{const U=await Ln.get("/users/",{params:{dealer:(N=t.user)==null?void 0:N.id,role:"UTILISATEUR",include_plans:!0}});n.value=U.data}catch(U){console.error("Error fetching clients:",U)}finally{r.value=!1}}function _(N,U){return`${(N==null?void 0:N.charAt(0))||""}${(U==null?void 0:U.charAt(0))||""}`.toUpperCase()}function w(N){u.value=N,o.value=!0}function b(){o.value=!1,u.value=null}async function E(N){var U;try{const j=!!N.id,ne=j?`/users/${N.id}/`:"/users/",ae=j?"patch":"post";N.role="UTILISATEUR",N.concessionnaire=(U=t.user)==null?void 0:U.id,await Ln[ae](ne,N),await m(),b()}catch(j){throw console.error("Erreur lors de la sauvegarde du client:",j),j}}function x(N){f.value=N,a.value=!0}async function F(){if(f.value)try{await Ln.delete(`/users/${f.value.id}/`),await m(),a.value=!1,f.value=null}catch(N){throw console.error("Erreur lors de la suppression du client:",N),N}}return(N,U)=>{var j,ne;return nt(),at("div",HP,[A("div",GP,[A("div",WP,[U[3]||(U[3]=A("div",{class:"sm:flex-auto"},[A("h1",{class:"text-2xl font-semibold text-gray-900"},"Clients"),A("p",{class:"mt-2 text-sm text-gray-700"}," Liste de vos clients et leurs plans associs ")],-1)),A("div",ZP,[A("button",{onClick:U[0]||(U[0]=ae=>o.value=!0),class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"},U[2]||(U[2]=[A("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[A("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1),ki(" Ajouter un client ")]))])]),A("div",KP,[A("div",JP,[A("div",YP,[A("table",XP,[U[6]||(U[6]=A("thead",{class:"bg-gray-50"},[A("tr",null,[A("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," Client "),A("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Email "),A("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise "),A("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Nombre de plans "),A("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[A("span",{class:"sr-only"},"Actions")])])],-1)),A("tbody",QP,[r.value?(nt(),at("tr",eS,U[4]||(U[4]=[A("td",{colspan:"5",class:"py-4 px-6"},[A("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):n.value.length===0?(nt(),at("tr",tS,U[5]||(U[5]=[A("td",{colspan:"5",class:"py-4 px-6 text-center text-gray-500"}," Aucun client trouv ",-1)]))):tn("",!0),(nt(!0),at(gn,null,Un(n.value,ae=>(nt(),at("tr",{key:ae.id,class:"hover:bg-gray-50"},[A("td",nS,[A("div",iS,[A("div",rS,[A("div",sS,[A("span",oS,kt(_(ae.first_name,ae.last_name)),1)])]),A("div",aS,[A("div",lS,kt(Dn(Kl)(ae)),1),A("div",uS,kt(ae.username),1)])])]),A("td",cS,kt(ae.email),1),A("td",hS,kt(ae.company_name||"-"),1),A("td",fS,[A("div",dS,[A("span",pS,kt(ae.plans_count||0),1),A("span",mS,"plan"+kt((ae.plans_count||0)>1?"s":""),1)])]),A("td",gS,[A("button",{onClick:be=>w(ae),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,vS),A("button",{onClick:be=>x(ae),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,_S)])]))),128))])])])])]),o.value?(nt(),ma(tv,{key:0,user:u.value||{},dealers:[{...Dn(t).user,role:"CONCESSIONNAIRE"}],"is-admin":!1,"current-dealer":(ne=(j=Dn(t).user)==null?void 0:j.id)==null?void 0:ne.toString(),onClose:b,onSave:E},null,8,["user","dealers","current-dealer"])):tn("",!0),a.value?(nt(),ma(nv,{key:1,title:"Supprimer le client",message:"tes-vous sr de vouloir supprimer ce client ? Cette action est irrversible.",onConfirm:F,onCancel:U[1]||(U[1]=ae=>a.value=!1)})):tn("",!0)])])}}}),iv=A5({history:o5("/"),routes:[{path:"/",name:"home",component:_m,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/plans",name:"plans",component:VP,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/users",name:"users",component:Bk,meta:{requiresAuth:!0,allowedRoles:["admin"]}},{path:"/clients",name:"clients",component:yS,meta:{requiresAuth:!0,allowedRoles:["dealer"]}},{path:"/profile",name:"profile",component:()=>Jl(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/login",name:"login",component:tw,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>Jl(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>Jl(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:R3,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/map",name:"map",component:_m,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>Jl(()=>import("./NotFoundView.js"),[])}]});iv.beforeEach(async(e,t,n)=>{var f,m;const r=ds();if(console.log("Route:",e.path,"Auth state:",{initialized:r.initialized,isAuthenticated:r.isAuthenticated,user:r.user}),!r.initialized)try{await r.initialize(window.INITIAL_STATE)}catch(_){console.error("Error initializing auth store:",_)}const o=r.isAuthenticated,a=(f=r.user)==null?void 0:f.must_change_password,u=(m=r.user)==null?void 0:m.user_type;if(e.meta.requiresAuth&&!o){n("/login");return}if(o&&a&&e.name!=="changePassword"){n({name:"changePassword"});return}if(e.name==="changePassword"&&!a){n({name:"home"});return}if(e.meta.allowedRoles&&u&&!e.meta.allowedRoles.includes(u)){n({name:"home"});return}if(e.meta.requiresGuest&&o){n({name:"home"});return}n()});const rp=Vy(p3),rv=Wy();rp.use(rv);rp.use(iv);const bS=ds(rv);window.INITIAL_STATE&&bS.initialize(window.INITIAL_STATE);rp.mount("#app");export{oi as _,Wa as a,A as b,at as c,ps as d,tn as e,kn as f,nt as g,Au as h,ki as i,Pi as j,Ha as k,b_ as l,zS as m,Ni as n,ba as o,Nc as p,go as q,It as r,w1 as s,kt as t,ds as u,ri as v,Mc as w};
