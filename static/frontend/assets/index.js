var am=Object.defineProperty;var lm=(t,n,o)=>n in t?am(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o;var Jt=(t,n,o)=>lm(t,typeof n!="symbol"?n+"":n,o);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const p of f.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&l(p)}).observe(document,{childList:!0,subtree:!0});function o(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function l(c){if(c.ep)return;c.ep=!0;const f=o(c);fetch(c.href,f)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function wh(t){const n=Object.create(null);for(const o of t.split(","))n[o]=1;return o=>o in n}const Ue={},Es=[],Bn=()=>{},um=()=>!1,_l=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Lh=t=>t.startsWith("onUpdate:"),ki=Object.assign,Ch=(t,n)=>{const o=t.indexOf(n);o>-1&&t.splice(o,1)},hm=Object.prototype.hasOwnProperty,Oe=(t,n)=>hm.call(t,n),ae=Array.isArray,Ms=t=>Ko(t)==="[object Map]",Ds=t=>Ko(t)==="[object Set]",ic=t=>Ko(t)==="[object Date]",_e=t=>typeof t=="function",ii=t=>typeof t=="string",Sn=t=>typeof t=="symbol",Ve=t=>t!==null&&typeof t=="object",Md=t=>(Ve(t)||_e(t))&&_e(t.then)&&_e(t.catch),Pd=Object.prototype.toString,Ko=t=>Pd.call(t),cm=t=>Ko(t).slice(8,-1),Bd=t=>Ko(t)==="[object Object]",kh=t=>ii(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Co=wh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),yl=t=>{const n=Object.create(null);return o=>n[o]||(n[o]=t(o))},dm=/-(\w)/g,ln=yl(t=>t.replace(dm,(n,o)=>o?o.toUpperCase():"")),fm=/\B([A-Z])/g,qr=yl(t=>t.replace(fm,"-$1").toLowerCase()),vl=yl(t=>t.charAt(0).toUpperCase()+t.slice(1)),Du=yl(t=>t?`on${vl(t)}`:""),_r=(t,n)=>!Object.is(t,n),qa=(t,...n)=>{for(let o=0;o<t.length;o++)t[o](...n)},Sd=(t,n,o,l=!1)=>{Object.defineProperty(t,n,{configurable:!0,enumerable:!1,writable:l,value:o})},nl=t=>{const n=parseFloat(t);return isNaN(n)?t:n};let nc;const bl=()=>nc||(nc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function xl(t){if(ae(t)){const n={};for(let o=0;o<t.length;o++){const l=t[o],c=ii(l)?_m(l):xl(l);if(c)for(const f in c)n[f]=c[f]}return n}else if(ii(t)||Ve(t))return t}const pm=/;(?![^(]*\))/g,mm=/:([^]+)/,gm=/\/\*[^]*?\*\//g;function _m(t){const n={};return t.replace(gm,"").split(pm).forEach(o=>{if(o){const l=o.split(mm);l.length>1&&(n[l[0].trim()]=l[1].trim())}}),n}function vr(t){let n="";if(ii(t))n=t;else if(ae(t))for(let o=0;o<t.length;o++){const l=vr(t[o]);l&&(n+=l+" ")}else if(Ve(t))for(const o in t)t[o]&&(n+=o+" ");return n.trim()}const ym="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",vm=wh(ym);function Ad(t){return!!t||t===""}function bm(t,n){if(t.length!==n.length)return!1;let o=!0;for(let l=0;o&&l<t.length;l++)o=Wo(t[l],n[l]);return o}function Wo(t,n){if(t===n)return!0;let o=ic(t),l=ic(n);if(o||l)return o&&l?t.getTime()===n.getTime():!1;if(o=Sn(t),l=Sn(n),o||l)return t===n;if(o=ae(t),l=ae(n),o||l)return o&&l?bm(t,n):!1;if(o=Ve(t),l=Ve(n),o||l){if(!o||!l)return!1;const c=Object.keys(t).length,f=Object.keys(n).length;if(c!==f)return!1;for(const p in t){const v=t.hasOwnProperty(p),y=n.hasOwnProperty(p);if(v&&!y||!v&&y||!Wo(t[p],n[p]))return!1}}return String(t)===String(n)}function Eh(t,n){return t.findIndex(o=>Wo(o,n))}const Td=t=>!!(t&&t.__v_isRef===!0),Yt=t=>ii(t)?t:t==null?"":ae(t)||Ve(t)&&(t.toString===Pd||!_e(t.toString))?Td(t)?Yt(t.value):JSON.stringify(t,Dd,2):String(t),Dd=(t,n)=>Td(n)?Dd(t,n.value):Ms(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((o,[l,c],f)=>(o[Ru(l,f)+" =>"]=c,o),{})}:Ds(n)?{[`Set(${n.size})`]:[...n.values()].map(o=>Ru(o))}:Sn(n)?Ru(n):Ve(n)&&!ae(n)&&!Bd(n)?String(n):n,Ru=(t,n="")=>{var o;return Sn(t)?`Symbol(${(o=t.description)!=null?o:n})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ti;class Rd{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ti,!n&&Ti&&(this.index=(Ti.scopes||(Ti.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let n,o;if(this.scopes)for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].pause();for(n=0,o=this.effects.length;n<o;n++)this.effects[n].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let n,o;if(this.scopes)for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].resume();for(n=0,o=this.effects.length;n<o;n++)this.effects[n].resume()}}run(n){if(this._active){const o=Ti;try{return Ti=this,n()}finally{Ti=o}}}on(){Ti=this}off(){Ti=this.parent}stop(n){if(this._active){this._active=!1;let o,l;for(o=0,l=this.effects.length;o<l;o++)this.effects[o].stop();for(this.effects.length=0,o=0,l=this.cleanups.length;o<l;o++)this.cleanups[o]();if(this.cleanups.length=0,this.scopes){for(o=0,l=this.scopes.length;o<l;o++)this.scopes[o].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!n){const c=this.parent.scopes.pop();c&&c!==this&&(this.parent.scopes[this.index]=c,c.index=this.index)}this.parent=void 0}}}function Od(t){return new Rd(t)}function Id(){return Ti}function xm(t,n=!1){Ti&&Ti.cleanups.push(t)}let Ge;const Ou=new WeakSet;class Fd{constructor(n){this.fn=n,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ti&&Ti.active&&Ti.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ou.has(this)&&(Ou.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||zd(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,rc(this),jd(this);const n=Ge,o=pn;Ge=this,pn=!0;try{return this.fn()}finally{Ud(this),Ge=n,pn=o,this.flags&=-3}}stop(){if(this.flags&1){for(let n=this.deps;n;n=n.nextDep)Bh(n);this.deps=this.depsTail=void 0,rc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ou.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Qu(this)&&this.run()}get dirty(){return Qu(this)}}let Nd=0,ko,Eo;function zd(t,n=!1){if(t.flags|=8,n){t.next=Eo,Eo=t;return}t.next=ko,ko=t}function Mh(){Nd++}function Ph(){if(--Nd>0)return;if(Eo){let n=Eo;for(Eo=void 0;n;){const o=n.next;n.next=void 0,n.flags&=-9,n=o}}let t;for(;ko;){let n=ko;for(ko=void 0;n;){const o=n.next;if(n.next=void 0,n.flags&=-9,n.flags&1)try{n.trigger()}catch(l){t||(t=l)}n=o}}if(t)throw t}function jd(t){for(let n=t.deps;n;n=n.nextDep)n.version=-1,n.prevActiveLink=n.dep.activeLink,n.dep.activeLink=n}function Ud(t){let n,o=t.depsTail,l=o;for(;l;){const c=l.prevDep;l.version===-1?(l===o&&(o=c),Bh(l),wm(l)):n=l,l.dep.activeLink=l.prevActiveLink,l.prevActiveLink=void 0,l=c}t.deps=n,t.depsTail=o}function Qu(t){for(let n=t.deps;n;n=n.nextDep)if(n.dep.version!==n.version||n.dep.computed&&($d(n.dep.computed)||n.dep.version!==n.version))return!0;return!!t._dirty}function $d(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ro))return;t.globalVersion=Ro;const n=t.dep;if(t.flags|=2,n.version>0&&!t.isSSR&&t.deps&&!Qu(t)){t.flags&=-3;return}const o=Ge,l=pn;Ge=t,pn=!0;try{jd(t);const c=t.fn(t._value);(n.version===0||_r(c,t._value))&&(t._value=c,n.version++)}catch(c){throw n.version++,c}finally{Ge=o,pn=l,Ud(t),t.flags&=-3}}function Bh(t,n=!1){const{dep:o,prevSub:l,nextSub:c}=t;if(l&&(l.nextSub=c,t.prevSub=void 0),c&&(c.prevSub=l,t.nextSub=void 0),o.subs===t&&(o.subs=l,!l&&o.computed)){o.computed.flags&=-5;for(let f=o.computed.deps;f;f=f.nextDep)Bh(f,!0)}!n&&!--o.sc&&o.map&&o.map.delete(o.key)}function wm(t){const{prevDep:n,nextDep:o}=t;n&&(n.nextDep=o,t.prevDep=void 0),o&&(o.prevDep=n,t.nextDep=void 0)}let pn=!0;const Gd=[];function br(){Gd.push(pn),pn=!1}function xr(){const t=Gd.pop();pn=t===void 0?!0:t}function rc(t){const{cleanup:n}=t;if(t.cleanup=void 0,n){const o=Ge;Ge=void 0;try{n()}finally{Ge=o}}}let Ro=0;class Lm{constructor(n,o){this.sub=n,this.dep=o,this.version=o.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Sh{constructor(n){this.computed=n,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(n){if(!Ge||!pn||Ge===this.computed)return;let o=this.activeLink;if(o===void 0||o.sub!==Ge)o=this.activeLink=new Lm(Ge,this),Ge.deps?(o.prevDep=Ge.depsTail,Ge.depsTail.nextDep=o,Ge.depsTail=o):Ge.deps=Ge.depsTail=o,Vd(o);else if(o.version===-1&&(o.version=this.version,o.nextDep)){const l=o.nextDep;l.prevDep=o.prevDep,o.prevDep&&(o.prevDep.nextDep=l),o.prevDep=Ge.depsTail,o.nextDep=void 0,Ge.depsTail.nextDep=o,Ge.depsTail=o,Ge.deps===o&&(Ge.deps=l)}return o}trigger(n){this.version++,Ro++,this.notify(n)}notify(n){Mh();try{for(let o=this.subs;o;o=o.prevSub)o.sub.notify()&&o.sub.dep.notify()}finally{Ph()}}}function Vd(t){if(t.dep.sc++,t.sub.flags&4){const n=t.dep.computed;if(n&&!t.dep.subs){n.flags|=20;for(let l=n.deps;l;l=l.nextDep)Vd(l)}const o=t.dep.subs;o!==t&&(t.prevSub=o,o&&(o.nextSub=t)),t.dep.subs=t}}const rl=new WeakMap,Ur=Symbol(""),th=Symbol(""),Oo=Symbol("");function wi(t,n,o){if(pn&&Ge){let l=rl.get(t);l||rl.set(t,l=new Map);let c=l.get(o);c||(l.set(o,c=new Sh),c.map=l,c.key=o),c.track()}}function qn(t,n,o,l,c,f){const p=rl.get(t);if(!p){Ro++;return}const v=y=>{y&&y.trigger()};if(Mh(),n==="clear")p.forEach(v);else{const y=ae(t),M=y&&kh(o);if(y&&o==="length"){const w=Number(l);p.forEach((E,N)=>{(N==="length"||N===Oo||!Sn(N)&&N>=w)&&v(E)})}else switch((o!==void 0||p.has(void 0))&&v(p.get(o)),M&&v(p.get(Oo)),n){case"add":y?M&&v(p.get("length")):(v(p.get(Ur)),Ms(t)&&v(p.get(th)));break;case"delete":y||(v(p.get(Ur)),Ms(t)&&v(p.get(th)));break;case"set":Ms(t)&&v(p.get(Ur));break}}Ph()}function Cm(t,n){const o=rl.get(t);return o&&o.get(n)}function ws(t){const n=Ee(t);return n===t?n:(wi(n,"iterate",Oo),on(t)?n:n.map(Li))}function wl(t){return wi(t=Ee(t),"iterate",Oo),t}const km={__proto__:null,[Symbol.iterator](){return Iu(this,Symbol.iterator,Li)},concat(...t){return ws(this).concat(...t.map(n=>ae(n)?ws(n):n))},entries(){return Iu(this,"entries",t=>(t[1]=Li(t[1]),t))},every(t,n){return Vn(this,"every",t,n,void 0,arguments)},filter(t,n){return Vn(this,"filter",t,n,o=>o.map(Li),arguments)},find(t,n){return Vn(this,"find",t,n,Li,arguments)},findIndex(t,n){return Vn(this,"findIndex",t,n,void 0,arguments)},findLast(t,n){return Vn(this,"findLast",t,n,Li,arguments)},findLastIndex(t,n){return Vn(this,"findLastIndex",t,n,void 0,arguments)},forEach(t,n){return Vn(this,"forEach",t,n,void 0,arguments)},includes(...t){return Fu(this,"includes",t)},indexOf(...t){return Fu(this,"indexOf",t)},join(t){return ws(this).join(t)},lastIndexOf(...t){return Fu(this,"lastIndexOf",t)},map(t,n){return Vn(this,"map",t,n,void 0,arguments)},pop(){return go(this,"pop")},push(...t){return go(this,"push",t)},reduce(t,...n){return sc(this,"reduce",t,n)},reduceRight(t,...n){return sc(this,"reduceRight",t,n)},shift(){return go(this,"shift")},some(t,n){return Vn(this,"some",t,n,void 0,arguments)},splice(...t){return go(this,"splice",t)},toReversed(){return ws(this).toReversed()},toSorted(t){return ws(this).toSorted(t)},toSpliced(...t){return ws(this).toSpliced(...t)},unshift(...t){return go(this,"unshift",t)},values(){return Iu(this,"values",Li)}};function Iu(t,n,o){const l=wl(t),c=l[n]();return l!==t&&!on(t)&&(c._next=c.next,c.next=()=>{const f=c._next();return f.value&&(f.value=o(f.value)),f}),c}const Em=Array.prototype;function Vn(t,n,o,l,c,f){const p=wl(t),v=p!==t&&!on(t),y=p[n];if(y!==Em[n]){const E=y.apply(t,f);return v?Li(E):E}let M=o;p!==t&&(v?M=function(E,N){return o.call(this,Li(E),N,t)}:o.length>2&&(M=function(E,N){return o.call(this,E,N,t)}));const w=y.call(p,M,l);return v&&c?c(w):w}function sc(t,n,o,l){const c=wl(t);let f=o;return c!==t&&(on(t)?o.length>3&&(f=function(p,v,y){return o.call(this,p,v,y,t)}):f=function(p,v,y){return o.call(this,p,Li(v),y,t)}),c[n](f,...l)}function Fu(t,n,o){const l=Ee(t);wi(l,"iterate",Oo);const c=l[n](...o);return(c===-1||c===!1)&&Dh(o[0])?(o[0]=Ee(o[0]),l[n](...o)):c}function go(t,n,o=[]){br(),Mh();const l=Ee(t)[n].apply(t,o);return Ph(),xr(),l}const Mm=wh("__proto__,__v_isRef,__isVue"),Hd=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Sn));function Pm(t){Sn(t)||(t=String(t));const n=Ee(this);return wi(n,"has",t),n.hasOwnProperty(t)}class Zd{constructor(n=!1,o=!1){this._isReadonly=n,this._isShallow=o}get(n,o,l){if(o==="__v_skip")return n.__v_skip;const c=this._isReadonly,f=this._isShallow;if(o==="__v_isReactive")return!c;if(o==="__v_isReadonly")return c;if(o==="__v_isShallow")return f;if(o==="__v_raw")return l===(c?f?Nm:Jd:f?Wd:Kd).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(l)?n:void 0;const p=ae(n);if(!c){let y;if(p&&(y=km[o]))return y;if(o==="hasOwnProperty")return Pm}const v=Reflect.get(n,o,Qe(n)?n:l);return(Sn(o)?Hd.has(o):Mm(o))||(c||wi(n,"get",o),f)?v:Qe(v)?p&&kh(o)?v:v.value:Ve(v)?c?Yd(v):Yn(v):v}}class qd extends Zd{constructor(n=!1){super(!1,n)}set(n,o,l,c){let f=n[o];if(!this._isShallow){const y=Vr(f);if(!on(l)&&!Vr(l)&&(f=Ee(f),l=Ee(l)),!ae(n)&&Qe(f)&&!Qe(l))return y?!1:(f.value=l,!0)}const p=ae(n)&&kh(o)?Number(o)<n.length:Oe(n,o),v=Reflect.set(n,o,l,Qe(n)?n:c);return n===Ee(c)&&(p?_r(l,f)&&qn(n,"set",o,l):qn(n,"add",o,l)),v}deleteProperty(n,o){const l=Oe(n,o);n[o];const c=Reflect.deleteProperty(n,o);return c&&l&&qn(n,"delete",o,void 0),c}has(n,o){const l=Reflect.has(n,o);return(!Sn(o)||!Hd.has(o))&&wi(n,"has",o),l}ownKeys(n){return wi(n,"iterate",ae(n)?"length":Ur),Reflect.ownKeys(n)}}class Bm extends Zd{constructor(n=!1){super(!0,n)}set(n,o){return!0}deleteProperty(n,o){return!0}}const Sm=new qd,Am=new Bm,Tm=new qd(!0);const eh=t=>t,Ua=t=>Reflect.getPrototypeOf(t);function Dm(t,n,o){return function(...l){const c=this.__v_raw,f=Ee(c),p=Ms(f),v=t==="entries"||t===Symbol.iterator&&p,y=t==="keys"&&p,M=c[t](...l),w=o?eh:n?ih:Li;return!n&&wi(f,"iterate",y?th:Ur),{next(){const{value:E,done:N}=M.next();return N?{value:E,done:N}:{value:v?[w(E[0]),w(E[1])]:w(E),done:N}},[Symbol.iterator](){return this}}}}function $a(t){return function(...n){return t==="delete"?!1:t==="clear"?void 0:this}}function Rm(t,n){const o={get(c){const f=this.__v_raw,p=Ee(f),v=Ee(c);t||(_r(c,v)&&wi(p,"get",c),wi(p,"get",v));const{has:y}=Ua(p),M=n?eh:t?ih:Li;if(y.call(p,c))return M(f.get(c));if(y.call(p,v))return M(f.get(v));f!==p&&f.get(c)},get size(){const c=this.__v_raw;return!t&&wi(Ee(c),"iterate",Ur),Reflect.get(c,"size",c)},has(c){const f=this.__v_raw,p=Ee(f),v=Ee(c);return t||(_r(c,v)&&wi(p,"has",c),wi(p,"has",v)),c===v?f.has(c):f.has(c)||f.has(v)},forEach(c,f){const p=this,v=p.__v_raw,y=Ee(v),M=n?eh:t?ih:Li;return!t&&wi(y,"iterate",Ur),v.forEach((w,E)=>c.call(f,M(w),M(E),p))}};return ki(o,t?{add:$a("add"),set:$a("set"),delete:$a("delete"),clear:$a("clear")}:{add(c){!n&&!on(c)&&!Vr(c)&&(c=Ee(c));const f=Ee(this);return Ua(f).has.call(f,c)||(f.add(c),qn(f,"add",c,c)),this},set(c,f){!n&&!on(f)&&!Vr(f)&&(f=Ee(f));const p=Ee(this),{has:v,get:y}=Ua(p);let M=v.call(p,c);M||(c=Ee(c),M=v.call(p,c));const w=y.call(p,c);return p.set(c,f),M?_r(f,w)&&qn(p,"set",c,f):qn(p,"add",c,f),this},delete(c){const f=Ee(this),{has:p,get:v}=Ua(f);let y=p.call(f,c);y||(c=Ee(c),y=p.call(f,c)),v&&v.call(f,c);const M=f.delete(c);return y&&qn(f,"delete",c,void 0),M},clear(){const c=Ee(this),f=c.size!==0,p=c.clear();return f&&qn(c,"clear",void 0,void 0),p}}),["keys","values","entries",Symbol.iterator].forEach(c=>{o[c]=Dm(c,t,n)}),o}function Ah(t,n){const o=Rm(t,n);return(l,c,f)=>c==="__v_isReactive"?!t:c==="__v_isReadonly"?t:c==="__v_raw"?l:Reflect.get(Oe(o,c)&&c in l?o:l,c,f)}const Om={get:Ah(!1,!1)},Im={get:Ah(!1,!0)},Fm={get:Ah(!0,!1)};const Kd=new WeakMap,Wd=new WeakMap,Jd=new WeakMap,Nm=new WeakMap;function zm(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function jm(t){return t.__v_skip||!Object.isExtensible(t)?0:zm(cm(t))}function Yn(t){return Vr(t)?t:Th(t,!1,Sm,Om,Kd)}function Xd(t){return Th(t,!1,Tm,Im,Wd)}function Yd(t){return Th(t,!0,Am,Fm,Jd)}function Th(t,n,o,l,c){if(!Ve(t)||t.__v_raw&&!(n&&t.__v_isReactive))return t;const f=c.get(t);if(f)return f;const p=jm(t);if(p===0)return t;const v=new Proxy(t,p===2?l:o);return c.set(t,v),v}function yr(t){return Vr(t)?yr(t.__v_raw):!!(t&&t.__v_isReactive)}function Vr(t){return!!(t&&t.__v_isReadonly)}function on(t){return!!(t&&t.__v_isShallow)}function Dh(t){return t?!!t.__v_raw:!1}function Ee(t){const n=t&&t.__v_raw;return n?Ee(n):t}function Rh(t){return!Oe(t,"__v_skip")&&Object.isExtensible(t)&&Sd(t,"__v_skip",!0),t}const Li=t=>Ve(t)?Yn(t):t,ih=t=>Ve(t)?Yd(t):t;function Qe(t){return t?t.__v_isRef===!0:!1}function Xt(t){return Qd(t,!1)}function Um(t){return Qd(t,!0)}function Qd(t,n){return Qe(t)?t:new $m(t,n)}class $m{constructor(n,o){this.dep=new Sh,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=o?n:Ee(n),this._value=o?n:Li(n),this.__v_isShallow=o}get value(){return this.dep.track(),this._value}set value(n){const o=this._rawValue,l=this.__v_isShallow||on(n)||Vr(n);n=l?n:Ee(n),_r(n,o)&&(this._rawValue=n,this._value=l?n:Li(n),this.dep.trigger())}}function mi(t){return Qe(t)?t.value:t}const Gm={get:(t,n,o)=>n==="__v_raw"?t:mi(Reflect.get(t,n,o)),set:(t,n,o,l)=>{const c=t[n];return Qe(c)&&!Qe(o)?(c.value=o,!0):Reflect.set(t,n,o,l)}};function tf(t){return yr(t)?t:new Proxy(t,Gm)}function Vm(t){const n=ae(t)?new Array(t.length):{};for(const o in t)n[o]=Zm(t,o);return n}class Hm{constructor(n,o,l){this._object=n,this._key=o,this._defaultValue=l,this.__v_isRef=!0,this._value=void 0}get value(){const n=this._object[this._key];return this._value=n===void 0?this._defaultValue:n}set value(n){this._object[this._key]=n}get dep(){return Cm(Ee(this._object),this._key)}}function Zm(t,n,o){const l=t[n];return Qe(l)?l:new Hm(t,n,o)}class qm{constructor(n,o,l){this.fn=n,this.setter=o,this._value=void 0,this.dep=new Sh(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ro-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!o,this.isSSR=l}notify(){if(this.flags|=16,!(this.flags&8)&&Ge!==this)return zd(this,!0),!0}get value(){const n=this.dep.track();return $d(this),n&&(n.version=this.dep.version),this._value}set value(n){this.setter&&this.setter(n)}}function Km(t,n,o=!1){let l,c;return _e(t)?l=t:(l=t.get,c=t.set),new qm(l,c,o)}const Ga={},sl=new WeakMap;let zr;function Wm(t,n=!1,o=zr){if(o){let l=sl.get(o);l||sl.set(o,l=[]),l.push(t)}}function Jm(t,n,o=Ue){const{immediate:l,deep:c,once:f,scheduler:p,augmentJob:v,call:y}=o,M=yt=>c?yt:on(yt)||c===!1||c===0?Kn(yt,1):Kn(yt);let w,E,N,I,G=!1,K=!1;if(Qe(t)?(E=()=>t.value,G=on(t)):yr(t)?(E=()=>M(t),G=!0):ae(t)?(K=!0,G=t.some(yt=>yr(yt)||on(yt)),E=()=>t.map(yt=>{if(Qe(yt))return yt.value;if(yr(yt))return M(yt);if(_e(yt))return y?y(yt,2):yt()})):_e(t)?n?E=y?()=>y(t,2):t:E=()=>{if(N){br();try{N()}finally{xr()}}const yt=zr;zr=w;try{return y?y(t,3,[I]):t(I)}finally{zr=yt}}:E=Bn,n&&c){const yt=E,dt=c===!0?1/0:c;E=()=>Kn(yt(),dt)}const X=Id(),ut=()=>{w.stop(),X&&X.active&&Ch(X.effects,w)};if(f&&n){const yt=n;n=(...dt)=>{yt(...dt),ut()}}let ft=K?new Array(t.length).fill(Ga):Ga;const ht=yt=>{if(!(!(w.flags&1)||!w.dirty&&!yt))if(n){const dt=w.run();if(c||G||(K?dt.some((Mt,qt)=>_r(Mt,ft[qt])):_r(dt,ft))){N&&N();const Mt=zr;zr=w;try{const qt=[dt,ft===Ga?void 0:K&&ft[0]===Ga?[]:ft,I];y?y(n,3,qt):n(...qt),ft=dt}finally{zr=Mt}}}else w.run()};return v&&v(ht),w=new Fd(E),w.scheduler=p?()=>p(ht,!1):ht,I=yt=>Wm(yt,!1,w),N=w.onStop=()=>{const yt=sl.get(w);if(yt){if(y)y(yt,4);else for(const dt of yt)dt();sl.delete(w)}},n?l?ht(!0):ft=w.run():p?p(ht.bind(null,!0),!0):w.run(),ut.pause=w.pause.bind(w),ut.resume=w.resume.bind(w),ut.stop=ut,ut}function Kn(t,n=1/0,o){if(n<=0||!Ve(t)||t.__v_skip||(o=o||new Set,o.has(t)))return t;if(o.add(t),n--,Qe(t))Kn(t.value,n,o);else if(ae(t))for(let l=0;l<t.length;l++)Kn(t[l],n,o);else if(Ds(t)||Ms(t))t.forEach(l=>{Kn(l,n,o)});else if(Bd(t)){for(const l in t)Kn(t[l],n,o);for(const l of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,l)&&Kn(t[l],n,o)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Jo(t,n,o,l){try{return l?t(...l):t()}catch(c){Ll(c,n,o)}}function An(t,n,o,l){if(_e(t)){const c=Jo(t,n,o,l);return c&&Md(c)&&c.catch(f=>{Ll(f,n,o)}),c}if(ae(t)){const c=[];for(let f=0;f<t.length;f++)c.push(An(t[f],n,o,l));return c}}function Ll(t,n,o,l=!0){const c=n?n.vnode:null,{errorHandler:f,throwUnhandledErrorInProduction:p}=n&&n.appContext.config||Ue;if(n){let v=n.parent;const y=n.proxy,M=`https://vuejs.org/error-reference/#runtime-${o}`;for(;v;){const w=v.ec;if(w){for(let E=0;E<w.length;E++)if(w[E](t,y,M)===!1)return}v=v.parent}if(f){br(),Jo(f,null,10,[t,y,M]),xr();return}}Xm(t,o,c,l,p)}function Xm(t,n,o,l=!0,c=!1){if(c)throw t;console.error(t)}const Di=[];let Mn=-1;const Ps=[];let fr=null,Cs=0;const ef=Promise.resolve();let ol=null;function Cl(t){const n=ol||ef;return t?n.then(this?t.bind(this):t):n}function Ym(t){let n=Mn+1,o=Di.length;for(;n<o;){const l=n+o>>>1,c=Di[l],f=Io(c);f<t||f===t&&c.flags&2?n=l+1:o=l}return n}function Oh(t){if(!(t.flags&1)){const n=Io(t),o=Di[Di.length-1];!o||!(t.flags&2)&&n>=Io(o)?Di.push(t):Di.splice(Ym(n),0,t),t.flags|=1,nf()}}function nf(){ol||(ol=ef.then(sf))}function Qm(t){ae(t)?Ps.push(...t):fr&&t.id===-1?fr.splice(Cs+1,0,t):t.flags&1||(Ps.push(t),t.flags|=1),nf()}function oc(t,n,o=Mn+1){for(;o<Di.length;o++){const l=Di[o];if(l&&l.flags&2){if(t&&l.id!==t.uid)continue;Di.splice(o,1),o--,l.flags&4&&(l.flags&=-2),l(),l.flags&4||(l.flags&=-2)}}}function rf(t){if(Ps.length){const n=[...new Set(Ps)].sort((o,l)=>Io(o)-Io(l));if(Ps.length=0,fr){fr.push(...n);return}for(fr=n,Cs=0;Cs<fr.length;Cs++){const o=fr[Cs];o.flags&4&&(o.flags&=-2),o.flags&8||o(),o.flags&=-2}fr=null,Cs=0}}const Io=t=>t.id==null?t.flags&2?-1:1/0:t.id;function sf(t){try{for(Mn=0;Mn<Di.length;Mn++){const n=Di[Mn];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),Jo(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;Mn<Di.length;Mn++){const n=Di[Mn];n&&(n.flags&=-2)}Mn=-1,Di.length=0,rf(),ol=null,(Di.length||Ps.length)&&sf()}}let zi=null,of=null;function al(t){const n=zi;return zi=t,of=t&&t.type.__scopeId||null,n}function Mo(t,n=zi,o){if(!n||t._n)return t;const l=(...c)=>{l._d&&gc(-1);const f=al(n);let p;try{p=t(...c)}finally{al(f),l._d&&gc(1)}return p};return l._n=!0,l._c=!0,l._d=!0,l}function we(t,n){if(zi===null)return t;const o=Bl(zi),l=t.dirs||(t.dirs=[]);for(let c=0;c<n.length;c++){let[f,p,v,y=Ue]=n[c];f&&(_e(f)&&(f={mounted:f,updated:f}),f.deep&&Kn(p),l.push({dir:f,instance:o,value:p,oldValue:void 0,arg:v,modifiers:y}))}return t}function Fr(t,n,o,l){const c=t.dirs,f=n&&n.dirs;for(let p=0;p<c.length;p++){const v=c[p];f&&(v.oldValue=f[p].value);let y=v.dir[l];y&&(br(),An(y,o,8,[t.el,v,t,n]),xr())}}const t0=Symbol("_vte"),e0=t=>t.__isTeleport;function Ih(t,n){t.shapeFlag&6&&t.component?(t.transition=n,Ih(t.component.subTree,n)):t.shapeFlag&128?(t.ssContent.transition=n.clone(t.ssContent),t.ssFallback.transition=n.clone(t.ssFallback)):t.transition=n}/*! #__NO_SIDE_EFFECTS__ */function Wi(t,n){return _e(t)?ki({name:t.name},n,{setup:t}):t}function af(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function ll(t,n,o,l,c=!1){if(ae(t)){t.forEach((G,K)=>ll(G,n&&(ae(n)?n[K]:n),o,l,c));return}if(Po(l)&&!c){l.shapeFlag&512&&l.type.__asyncResolved&&l.component.subTree.component&&ll(t,n,o,l.component.subTree);return}const f=l.shapeFlag&4?Bl(l.component):l.el,p=c?null:f,{i:v,r:y}=t,M=n&&n.r,w=v.refs===Ue?v.refs={}:v.refs,E=v.setupState,N=Ee(E),I=E===Ue?()=>!1:G=>Oe(N,G);if(M!=null&&M!==y&&(ii(M)?(w[M]=null,I(M)&&(E[M]=null)):Qe(M)&&(M.value=null)),_e(y))Jo(y,v,12,[p,w]);else{const G=ii(y),K=Qe(y);if(G||K){const X=()=>{if(t.f){const ut=G?I(y)?E[y]:w[y]:y.value;c?ae(ut)&&Ch(ut,f):ae(ut)?ut.includes(f)||ut.push(f):G?(w[y]=[f],I(y)&&(E[y]=w[y])):(y.value=[f],t.k&&(w[t.k]=y.value))}else G?(w[y]=p,I(y)&&(E[y]=p)):K&&(y.value=p,t.k&&(w[t.k]=p))};p?(X.id=-1,Zi(X,o)):X()}}}bl().requestIdleCallback;bl().cancelIdleCallback;const Po=t=>!!t.type.__asyncLoader,lf=t=>t.type.__isKeepAlive;function i0(t,n){uf(t,"a",n)}function n0(t,n){uf(t,"da",n)}function uf(t,n,o=gi){const l=t.__wdc||(t.__wdc=()=>{let c=o;for(;c;){if(c.isDeactivated)return;c=c.parent}return t()});if(kl(n,l,o),o){let c=o.parent;for(;c&&c.parent;)lf(c.parent.vnode)&&r0(l,n,o,c),c=c.parent}}function r0(t,n,o,l){const c=kl(n,t,l,!0);El(()=>{Ch(l[n],c)},o)}function kl(t,n,o=gi,l=!1){if(o){const c=o[t]||(o[t]=[]),f=n.__weh||(n.__weh=(...p)=>{br();const v=Xo(o),y=An(n,o,t,p);return v(),xr(),y});return l?c.unshift(f):c.push(f),f}}const Qn=t=>(n,o=gi)=>{(!zo||t==="sp")&&kl(t,(...l)=>n(...l),o)},s0=Qn("bm"),wr=Qn("m"),o0=Qn("bu"),a0=Qn("u"),hf=Qn("bum"),El=Qn("um"),l0=Qn("sp"),u0=Qn("rtg"),h0=Qn("rtc");function c0(t,n=gi){kl("ec",t,n)}const d0="components";function f0(t,n){return m0(d0,t,!0,n)||t}const p0=Symbol.for("v-ndc");function m0(t,n,o=!0,l=!1){const c=zi||gi;if(c){const f=c.type;{const v=ig(f,!1);if(v&&(v===n||v===ln(n)||v===vl(ln(n))))return f}const p=ac(c[t]||f[t],n)||ac(c.appContext[t],n);return!p&&l?f:p}}function ac(t,n){return t&&(t[n]||t[ln(n)]||t[vl(ln(n))])}function ji(t,n,o,l){let c;const f=o,p=ae(t);if(p||ii(t)){const v=p&&yr(t);let y=!1;v&&(y=!on(t),t=wl(t)),c=new Array(t.length);for(let M=0,w=t.length;M<w;M++)c[M]=n(y?Li(t[M]):t[M],M,void 0,f)}else if(typeof t=="number"){c=new Array(t);for(let v=0;v<t;v++)c[v]=n(v+1,v,void 0,f)}else if(Ve(t))if(t[Symbol.iterator])c=Array.from(t,(v,y)=>n(v,y,void 0,f));else{const v=Object.keys(t);c=new Array(v.length);for(let y=0,M=v.length;y<M;y++){const w=v[y];c[y]=n(t[w],w,y,f)}}else c=[];return c}const nh=t=>t?Af(t)?Bl(t):nh(t.parent):null,Bo=ki(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>nh(t.parent),$root:t=>nh(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>df(t),$forceUpdate:t=>t.f||(t.f=()=>{Oh(t.update)}),$nextTick:t=>t.n||(t.n=Cl.bind(t.proxy)),$watch:t=>F0.bind(t)}),Nu=(t,n)=>t!==Ue&&!t.__isScriptSetup&&Oe(t,n),g0={get({_:t},n){if(n==="__v_skip")return!0;const{ctx:o,setupState:l,data:c,props:f,accessCache:p,type:v,appContext:y}=t;let M;if(n[0]!=="$"){const I=p[n];if(I!==void 0)switch(I){case 1:return l[n];case 2:return c[n];case 4:return o[n];case 3:return f[n]}else{if(Nu(l,n))return p[n]=1,l[n];if(c!==Ue&&Oe(c,n))return p[n]=2,c[n];if((M=t.propsOptions[0])&&Oe(M,n))return p[n]=3,f[n];if(o!==Ue&&Oe(o,n))return p[n]=4,o[n];rh&&(p[n]=0)}}const w=Bo[n];let E,N;if(w)return n==="$attrs"&&wi(t.attrs,"get",""),w(t);if((E=v.__cssModules)&&(E=E[n]))return E;if(o!==Ue&&Oe(o,n))return p[n]=4,o[n];if(N=y.config.globalProperties,Oe(N,n))return N[n]},set({_:t},n,o){const{data:l,setupState:c,ctx:f}=t;return Nu(c,n)?(c[n]=o,!0):l!==Ue&&Oe(l,n)?(l[n]=o,!0):Oe(t.props,n)||n[0]==="$"&&n.slice(1)in t?!1:(f[n]=o,!0)},has({_:{data:t,setupState:n,accessCache:o,ctx:l,appContext:c,propsOptions:f}},p){let v;return!!o[p]||t!==Ue&&Oe(t,p)||Nu(n,p)||(v=f[0])&&Oe(v,p)||Oe(l,p)||Oe(Bo,p)||Oe(c.config.globalProperties,p)},defineProperty(t,n,o){return o.get!=null?t._.accessCache[n]=0:Oe(o,"value")&&this.set(t,n,o.value,null),Reflect.defineProperty(t,n,o)}};function lc(t){return ae(t)?t.reduce((n,o)=>(n[o]=null,n),{}):t}let rh=!0;function _0(t){const n=df(t),o=t.proxy,l=t.ctx;rh=!1,n.beforeCreate&&uc(n.beforeCreate,t,"bc");const{data:c,computed:f,methods:p,watch:v,provide:y,inject:M,created:w,beforeMount:E,mounted:N,beforeUpdate:I,updated:G,activated:K,deactivated:X,beforeDestroy:ut,beforeUnmount:ft,destroyed:ht,unmounted:yt,render:dt,renderTracked:Mt,renderTriggered:qt,errorCaptured:Ut,serverPrefetch:Vt,expose:Pt,inheritAttrs:St,components:Qt,directives:ce,filters:Wt}=n;if(M&&y0(M,l,null),p)for(const bt in p){const pt=p[bt];_e(pt)&&(l[bt]=pt.bind(o))}if(c){const bt=c.call(o,o);Ve(bt)&&(t.data=Yn(bt))}if(rh=!0,f)for(const bt in f){const pt=f[bt],re=_e(pt)?pt.bind(o,o):_e(pt.get)?pt.get.bind(o,o):Bn,At=!_e(pt)&&_e(pt.set)?pt.set.bind(o):Bn,se=Ie({get:re,set:At});Object.defineProperty(l,bt,{enumerable:!0,configurable:!0,get:()=>se.value,set:xt=>se.value=xt})}if(v)for(const bt in v)cf(v[bt],l,o,bt);if(y){const bt=_e(y)?y.call(o):y;Reflect.ownKeys(bt).forEach(pt=>{Ka(pt,bt[pt])})}w&&uc(w,t,"c");function $(bt,pt){ae(pt)?pt.forEach(re=>bt(re.bind(o))):pt&&bt(pt.bind(o))}if($(s0,E),$(wr,N),$(o0,I),$(a0,G),$(i0,K),$(n0,X),$(c0,Ut),$(h0,Mt),$(u0,qt),$(hf,ft),$(El,yt),$(l0,Vt),ae(Pt))if(Pt.length){const bt=t.exposed||(t.exposed={});Pt.forEach(pt=>{Object.defineProperty(bt,pt,{get:()=>o[pt],set:re=>o[pt]=re})})}else t.exposed||(t.exposed={});dt&&t.render===Bn&&(t.render=dt),St!=null&&(t.inheritAttrs=St),Qt&&(t.components=Qt),ce&&(t.directives=ce),Vt&&af(t)}function y0(t,n,o=Bn){ae(t)&&(t=sh(t));for(const l in t){const c=t[l];let f;Ve(c)?"default"in c?f=an(c.from||l,c.default,!0):f=an(c.from||l):f=an(c),Qe(f)?Object.defineProperty(n,l,{enumerable:!0,configurable:!0,get:()=>f.value,set:p=>f.value=p}):n[l]=f}}function uc(t,n,o){An(ae(t)?t.map(l=>l.bind(n.proxy)):t.bind(n.proxy),n,o)}function cf(t,n,o,l){let c=l.includes(".")?Ef(o,l):()=>o[l];if(ii(t)){const f=n[t];_e(f)&&Jn(c,f)}else if(_e(t))Jn(c,t.bind(o));else if(Ve(t))if(ae(t))t.forEach(f=>cf(f,n,o,l));else{const f=_e(t.handler)?t.handler.bind(o):n[t.handler];_e(f)&&Jn(c,f,t)}}function df(t){const n=t.type,{mixins:o,extends:l}=n,{mixins:c,optionsCache:f,config:{optionMergeStrategies:p}}=t.appContext,v=f.get(n);let y;return v?y=v:!c.length&&!o&&!l?y=n:(y={},c.length&&c.forEach(M=>ul(y,M,p,!0)),ul(y,n,p)),Ve(n)&&f.set(n,y),y}function ul(t,n,o,l=!1){const{mixins:c,extends:f}=n;f&&ul(t,f,o,!0),c&&c.forEach(p=>ul(t,p,o,!0));for(const p in n)if(!(l&&p==="expose")){const v=v0[p]||o&&o[p];t[p]=v?v(t[p],n[p]):n[p]}return t}const v0={data:hc,props:cc,emits:cc,methods:wo,computed:wo,beforeCreate:Ai,created:Ai,beforeMount:Ai,mounted:Ai,beforeUpdate:Ai,updated:Ai,beforeDestroy:Ai,beforeUnmount:Ai,destroyed:Ai,unmounted:Ai,activated:Ai,deactivated:Ai,errorCaptured:Ai,serverPrefetch:Ai,components:wo,directives:wo,watch:x0,provide:hc,inject:b0};function hc(t,n){return n?t?function(){return ki(_e(t)?t.call(this,this):t,_e(n)?n.call(this,this):n)}:n:t}function b0(t,n){return wo(sh(t),sh(n))}function sh(t){if(ae(t)){const n={};for(let o=0;o<t.length;o++)n[t[o]]=t[o];return n}return t}function Ai(t,n){return t?[...new Set([].concat(t,n))]:n}function wo(t,n){return t?ki(Object.create(null),t,n):n}function cc(t,n){return t?ae(t)&&ae(n)?[...new Set([...t,...n])]:ki(Object.create(null),lc(t),lc(n??{})):n}function x0(t,n){if(!t)return n;if(!n)return t;const o=ki(Object.create(null),t);for(const l in n)o[l]=Ai(t[l],n[l]);return o}function ff(){return{app:null,config:{isNativeTag:um,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let w0=0;function L0(t,n){return function(l,c=null){_e(l)||(l=ki({},l)),c!=null&&!Ve(c)&&(c=null);const f=ff(),p=new WeakSet,v=[];let y=!1;const M=f.app={_uid:w0++,_component:l,_props:c,_container:null,_context:f,_instance:null,version:rg,get config(){return f.config},set config(w){},use(w,...E){return p.has(w)||(w&&_e(w.install)?(p.add(w),w.install(M,...E)):_e(w)&&(p.add(w),w(M,...E))),M},mixin(w){return f.mixins.includes(w)||f.mixins.push(w),M},component(w,E){return E?(f.components[w]=E,M):f.components[w]},directive(w,E){return E?(f.directives[w]=E,M):f.directives[w]},mount(w,E,N){if(!y){const I=M._ceVNode||oi(l,c);return I.appContext=f,N===!0?N="svg":N===!1&&(N=void 0),t(I,w,N),y=!0,M._container=w,w.__vue_app__=M,Bl(I.component)}},onUnmount(w){v.push(w)},unmount(){y&&(An(v,M._instance,16),t(null,M._container),delete M._container.__vue_app__)},provide(w,E){return f.provides[w]=E,M},runWithContext(w){const E=$r;$r=M;try{return w()}finally{$r=E}}};return M}}let $r=null;function Ka(t,n){if(gi){let o=gi.provides;const l=gi.parent&&gi.parent.provides;l===o&&(o=gi.provides=Object.create(l)),o[t]=n}}function an(t,n,o=!1){const l=gi||zi;if(l||$r){const c=$r?$r._context.provides:l?l.parent==null?l.vnode.appContext&&l.vnode.appContext.provides:l.parent.provides:void 0;if(c&&t in c)return c[t];if(arguments.length>1)return o&&_e(n)?n.call(l&&l.proxy):n}}function C0(){return!!(gi||zi||$r)}const pf={},mf=()=>Object.create(pf),gf=t=>Object.getPrototypeOf(t)===pf;function k0(t,n,o,l=!1){const c={},f=mf();t.propsDefaults=Object.create(null),_f(t,n,c,f);for(const p in t.propsOptions[0])p in c||(c[p]=void 0);o?t.props=l?c:Xd(c):t.type.props?t.props=c:t.props=f,t.attrs=f}function E0(t,n,o,l){const{props:c,attrs:f,vnode:{patchFlag:p}}=t,v=Ee(c),[y]=t.propsOptions;let M=!1;if((l||p>0)&&!(p&16)){if(p&8){const w=t.vnode.dynamicProps;for(let E=0;E<w.length;E++){let N=w[E];if(Ml(t.emitsOptions,N))continue;const I=n[N];if(y)if(Oe(f,N))I!==f[N]&&(f[N]=I,M=!0);else{const G=ln(N);c[G]=oh(y,v,G,I,t,!1)}else I!==f[N]&&(f[N]=I,M=!0)}}}else{_f(t,n,c,f)&&(M=!0);let w;for(const E in v)(!n||!Oe(n,E)&&((w=qr(E))===E||!Oe(n,w)))&&(y?o&&(o[E]!==void 0||o[w]!==void 0)&&(c[E]=oh(y,v,E,void 0,t,!0)):delete c[E]);if(f!==v)for(const E in f)(!n||!Oe(n,E))&&(delete f[E],M=!0)}M&&qn(t.attrs,"set","")}function _f(t,n,o,l){const[c,f]=t.propsOptions;let p=!1,v;if(n)for(let y in n){if(Co(y))continue;const M=n[y];let w;c&&Oe(c,w=ln(y))?!f||!f.includes(w)?o[w]=M:(v||(v={}))[w]=M:Ml(t.emitsOptions,y)||(!(y in l)||M!==l[y])&&(l[y]=M,p=!0)}if(f){const y=Ee(o),M=v||Ue;for(let w=0;w<f.length;w++){const E=f[w];o[E]=oh(c,y,E,M[E],t,!Oe(M,E))}}return p}function oh(t,n,o,l,c,f){const p=t[o];if(p!=null){const v=Oe(p,"default");if(v&&l===void 0){const y=p.default;if(p.type!==Function&&!p.skipFactory&&_e(y)){const{propsDefaults:M}=c;if(o in M)l=M[o];else{const w=Xo(c);l=M[o]=y.call(null,n),w()}}else l=y;c.ce&&c.ce._setProp(o,l)}p[0]&&(f&&!v?l=!1:p[1]&&(l===""||l===qr(o))&&(l=!0))}return l}const M0=new WeakMap;function yf(t,n,o=!1){const l=o?M0:n.propsCache,c=l.get(t);if(c)return c;const f=t.props,p={},v=[];let y=!1;if(!_e(t)){const w=E=>{y=!0;const[N,I]=yf(E,n,!0);ki(p,N),I&&v.push(...I)};!o&&n.mixins.length&&n.mixins.forEach(w),t.extends&&w(t.extends),t.mixins&&t.mixins.forEach(w)}if(!f&&!y)return Ve(t)&&l.set(t,Es),Es;if(ae(f))for(let w=0;w<f.length;w++){const E=ln(f[w]);dc(E)&&(p[E]=Ue)}else if(f)for(const w in f){const E=ln(w);if(dc(E)){const N=f[w],I=p[E]=ae(N)||_e(N)?{type:N}:ki({},N),G=I.type;let K=!1,X=!0;if(ae(G))for(let ut=0;ut<G.length;++ut){const ft=G[ut],ht=_e(ft)&&ft.name;if(ht==="Boolean"){K=!0;break}else ht==="String"&&(X=!1)}else K=_e(G)&&G.name==="Boolean";I[0]=K,I[1]=X,(K||Oe(I,"default"))&&v.push(E)}}const M=[p,v];return Ve(t)&&l.set(t,M),M}function dc(t){return t[0]!=="$"&&!Co(t)}const vf=t=>t[0]==="_"||t==="$stable",Fh=t=>ae(t)?t.map(Pn):[Pn(t)],P0=(t,n,o)=>{if(n._n)return n;const l=Mo((...c)=>Fh(n(...c)),o);return l._c=!1,l},bf=(t,n,o)=>{const l=t._ctx;for(const c in t){if(vf(c))continue;const f=t[c];if(_e(f))n[c]=P0(c,f,l);else if(f!=null){const p=Fh(f);n[c]=()=>p}}},xf=(t,n)=>{const o=Fh(n);t.slots.default=()=>o},wf=(t,n,o)=>{for(const l in n)(o||l!=="_")&&(t[l]=n[l])},B0=(t,n,o)=>{const l=t.slots=mf();if(t.vnode.shapeFlag&32){const c=n._;c?(wf(l,n,o),o&&Sd(l,"_",c,!0)):bf(n,l)}else n&&xf(t,n)},S0=(t,n,o)=>{const{vnode:l,slots:c}=t;let f=!0,p=Ue;if(l.shapeFlag&32){const v=n._;v?o&&v===1?f=!1:wf(c,n,o):(f=!n.$stable,bf(n,c)),p=n}else n&&(xf(t,n),p={default:1});if(f)for(const v in c)!vf(v)&&p[v]==null&&delete c[v]},Zi=V0;function A0(t){return T0(t)}function T0(t,n){const o=bl();o.__VUE__=!0;const{insert:l,remove:c,patchProp:f,createElement:p,createText:v,createComment:y,setText:M,setElementText:w,parentNode:E,nextSibling:N,setScopeId:I=Bn,insertStaticContent:G}=t,K=(j,V,tt,vt=null,wt=null,_t=null,Tt=void 0,Dt=null,Bt=!!V.dynamicChildren)=>{if(j===V)return;j&&!_o(j,V)&&(vt=mt(j),xt(j,wt,_t,!0),j=null),V.patchFlag===-2&&(Bt=!1,V.dynamicChildren=null);const{type:kt,ref:te,shapeFlag:zt}=V;switch(kt){case Pl:X(j,V,tt,vt);break;case Hr:ut(j,V,tt,vt);break;case Wa:j==null&&ft(V,tt,vt,Tt);break;case Ke:Qt(j,V,tt,vt,wt,_t,Tt,Dt,Bt);break;default:zt&1?dt(j,V,tt,vt,wt,_t,Tt,Dt,Bt):zt&6?ce(j,V,tt,vt,wt,_t,Tt,Dt,Bt):(zt&64||zt&128)&&kt.process(j,V,tt,vt,wt,_t,Tt,Dt,Bt,Ht)}te!=null&&wt&&ll(te,j&&j.ref,_t,V||j,!V)},X=(j,V,tt,vt)=>{if(j==null)l(V.el=v(V.children),tt,vt);else{const wt=V.el=j.el;V.children!==j.children&&M(wt,V.children)}},ut=(j,V,tt,vt)=>{j==null?l(V.el=y(V.children||""),tt,vt):V.el=j.el},ft=(j,V,tt,vt)=>{[j.el,j.anchor]=G(j.children,V,tt,vt,j.el,j.anchor)},ht=({el:j,anchor:V},tt,vt)=>{let wt;for(;j&&j!==V;)wt=N(j),l(j,tt,vt),j=wt;l(V,tt,vt)},yt=({el:j,anchor:V})=>{let tt;for(;j&&j!==V;)tt=N(j),c(j),j=tt;c(V)},dt=(j,V,tt,vt,wt,_t,Tt,Dt,Bt)=>{V.type==="svg"?Tt="svg":V.type==="math"&&(Tt="mathml"),j==null?Mt(V,tt,vt,wt,_t,Tt,Dt,Bt):Vt(j,V,wt,_t,Tt,Dt,Bt)},Mt=(j,V,tt,vt,wt,_t,Tt,Dt)=>{let Bt,kt;const{props:te,shapeFlag:zt,transition:ie,dirs:le}=j;if(Bt=j.el=p(j.type,_t,te&&te.is,te),zt&8?w(Bt,j.children):zt&16&&Ut(j.children,Bt,null,vt,wt,zu(j,_t),Tt,Dt),le&&Fr(j,null,vt,"created"),qt(Bt,j,j.scopeId,Tt,vt),te){for(const Se in te)Se!=="value"&&!Co(Se)&&f(Bt,Se,null,te[Se],_t,vt);"value"in te&&f(Bt,"value",null,te.value,_t),(kt=te.onVnodeBeforeMount)&&kn(kt,vt,j)}le&&Fr(j,null,vt,"beforeMount");const be=D0(wt,ie);be&&ie.beforeEnter(Bt),l(Bt,V,tt),((kt=te&&te.onVnodeMounted)||be||le)&&Zi(()=>{kt&&kn(kt,vt,j),be&&ie.enter(Bt),le&&Fr(j,null,vt,"mounted")},wt)},qt=(j,V,tt,vt,wt)=>{if(tt&&I(j,tt),vt)for(let _t=0;_t<vt.length;_t++)I(j,vt[_t]);if(wt){let _t=wt.subTree;if(V===_t||Pf(_t.type)&&(_t.ssContent===V||_t.ssFallback===V)){const Tt=wt.vnode;qt(j,Tt,Tt.scopeId,Tt.slotScopeIds,wt.parent)}}},Ut=(j,V,tt,vt,wt,_t,Tt,Dt,Bt=0)=>{for(let kt=Bt;kt<j.length;kt++){const te=j[kt]=Dt?pr(j[kt]):Pn(j[kt]);K(null,te,V,tt,vt,wt,_t,Tt,Dt)}},Vt=(j,V,tt,vt,wt,_t,Tt)=>{const Dt=V.el=j.el;let{patchFlag:Bt,dynamicChildren:kt,dirs:te}=V;Bt|=j.patchFlag&16;const zt=j.props||Ue,ie=V.props||Ue;let le;if(tt&&Nr(tt,!1),(le=ie.onVnodeBeforeUpdate)&&kn(le,tt,V,j),te&&Fr(V,j,tt,"beforeUpdate"),tt&&Nr(tt,!0),(zt.innerHTML&&ie.innerHTML==null||zt.textContent&&ie.textContent==null)&&w(Dt,""),kt?Pt(j.dynamicChildren,kt,Dt,tt,vt,zu(V,wt),_t):Tt||pt(j,V,Dt,null,tt,vt,zu(V,wt),_t,!1),Bt>0){if(Bt&16)St(Dt,zt,ie,tt,wt);else if(Bt&2&&zt.class!==ie.class&&f(Dt,"class",null,ie.class,wt),Bt&4&&f(Dt,"style",zt.style,ie.style,wt),Bt&8){const be=V.dynamicProps;for(let Se=0;Se<be.length;Se++){const Me=be[Se],ai=zt[Me],ti=ie[Me];(ti!==ai||Me==="value")&&f(Dt,Me,ai,ti,wt,tt)}}Bt&1&&j.children!==V.children&&w(Dt,V.children)}else!Tt&&kt==null&&St(Dt,zt,ie,tt,wt);((le=ie.onVnodeUpdated)||te)&&Zi(()=>{le&&kn(le,tt,V,j),te&&Fr(V,j,tt,"updated")},vt)},Pt=(j,V,tt,vt,wt,_t,Tt)=>{for(let Dt=0;Dt<V.length;Dt++){const Bt=j[Dt],kt=V[Dt],te=Bt.el&&(Bt.type===Ke||!_o(Bt,kt)||Bt.shapeFlag&70)?E(Bt.el):tt;K(Bt,kt,te,null,vt,wt,_t,Tt,!0)}},St=(j,V,tt,vt,wt)=>{if(V!==tt){if(V!==Ue)for(const _t in V)!Co(_t)&&!(_t in tt)&&f(j,_t,V[_t],null,wt,vt);for(const _t in tt){if(Co(_t))continue;const Tt=tt[_t],Dt=V[_t];Tt!==Dt&&_t!=="value"&&f(j,_t,Dt,Tt,wt,vt)}"value"in tt&&f(j,"value",V.value,tt.value,wt)}},Qt=(j,V,tt,vt,wt,_t,Tt,Dt,Bt)=>{const kt=V.el=j?j.el:v(""),te=V.anchor=j?j.anchor:v("");let{patchFlag:zt,dynamicChildren:ie,slotScopeIds:le}=V;le&&(Dt=Dt?Dt.concat(le):le),j==null?(l(kt,tt,vt),l(te,tt,vt),Ut(V.children||[],tt,te,wt,_t,Tt,Dt,Bt)):zt>0&&zt&64&&ie&&j.dynamicChildren?(Pt(j.dynamicChildren,ie,tt,wt,_t,Tt,Dt),(V.key!=null||wt&&V===wt.subTree)&&Lf(j,V,!0)):pt(j,V,tt,te,wt,_t,Tt,Dt,Bt)},ce=(j,V,tt,vt,wt,_t,Tt,Dt,Bt)=>{V.slotScopeIds=Dt,j==null?V.shapeFlag&512?wt.ctx.activate(V,tt,vt,Tt,Bt):Wt(V,tt,vt,wt,_t,Tt,Bt):ot(j,V,Bt)},Wt=(j,V,tt,vt,wt,_t,Tt)=>{const Dt=j.component=X0(j,vt,wt);if(lf(j)&&(Dt.ctx.renderer=Ht),Y0(Dt,!1,Tt),Dt.asyncDep){if(wt&&wt.registerDep(Dt,$,Tt),!j.el){const Bt=Dt.subTree=oi(Hr);ut(null,Bt,V,tt)}}else $(Dt,j,V,tt,wt,_t,Tt)},ot=(j,V,tt)=>{const vt=V.component=j.component;if($0(j,V,tt))if(vt.asyncDep&&!vt.asyncResolved){bt(vt,V,tt);return}else vt.next=V,vt.update();else V.el=j.el,vt.vnode=V},$=(j,V,tt,vt,wt,_t,Tt)=>{const Dt=()=>{if(j.isMounted){let{next:zt,bu:ie,u:le,parent:be,vnode:Se}=j;{const ni=Cf(j);if(ni){zt&&(zt.el=Se.el,bt(j,zt,Tt)),ni.asyncDep.then(()=>{j.isUnmounted||Dt()});return}}let Me=zt,ai;Nr(j,!1),zt?(zt.el=Se.el,bt(j,zt,Tt)):zt=Se,ie&&qa(ie),(ai=zt.props&&zt.props.onVnodeBeforeUpdate)&&kn(ai,be,zt,Se),Nr(j,!0);const ti=pc(j),Ei=j.subTree;j.subTree=ti,K(Ei,ti,E(Ei.el),mt(Ei),j,wt,_t),zt.el=ti.el,Me===null&&G0(j,ti.el),le&&Zi(le,wt),(ai=zt.props&&zt.props.onVnodeUpdated)&&Zi(()=>kn(ai,be,zt,Se),wt)}else{let zt;const{el:ie,props:le}=V,{bm:be,m:Se,parent:Me,root:ai,type:ti}=j,Ei=Po(V);Nr(j,!1),be&&qa(be),!Ei&&(zt=le&&le.onVnodeBeforeMount)&&kn(zt,Me,V),Nr(j,!0);{ai.ce&&ai.ce._injectChildStyle(ti);const ni=j.subTree=pc(j);K(null,ni,tt,vt,j,wt,_t),V.el=ni.el}if(Se&&Zi(Se,wt),!Ei&&(zt=le&&le.onVnodeMounted)){const ni=V;Zi(()=>kn(zt,Me,ni),wt)}(V.shapeFlag&256||Me&&Po(Me.vnode)&&Me.vnode.shapeFlag&256)&&j.a&&Zi(j.a,wt),j.isMounted=!0,V=tt=vt=null}};j.scope.on();const Bt=j.effect=new Fd(Dt);j.scope.off();const kt=j.update=Bt.run.bind(Bt),te=j.job=Bt.runIfDirty.bind(Bt);te.i=j,te.id=j.uid,Bt.scheduler=()=>Oh(te),Nr(j,!0),kt()},bt=(j,V,tt)=>{V.component=j;const vt=j.vnode.props;j.vnode=V,j.next=null,E0(j,V.props,vt,tt),S0(j,V.children,tt),br(),oc(j),xr()},pt=(j,V,tt,vt,wt,_t,Tt,Dt,Bt=!1)=>{const kt=j&&j.children,te=j?j.shapeFlag:0,zt=V.children,{patchFlag:ie,shapeFlag:le}=V;if(ie>0){if(ie&128){At(kt,zt,tt,vt,wt,_t,Tt,Dt,Bt);return}else if(ie&256){re(kt,zt,tt,vt,wt,_t,Tt,Dt,Bt);return}}le&8?(te&16&&$t(kt,wt,_t),zt!==kt&&w(tt,zt)):te&16?le&16?At(kt,zt,tt,vt,wt,_t,Tt,Dt,Bt):$t(kt,wt,_t,!0):(te&8&&w(tt,""),le&16&&Ut(zt,tt,vt,wt,_t,Tt,Dt,Bt))},re=(j,V,tt,vt,wt,_t,Tt,Dt,Bt)=>{j=j||Es,V=V||Es;const kt=j.length,te=V.length,zt=Math.min(kt,te);let ie;for(ie=0;ie<zt;ie++){const le=V[ie]=Bt?pr(V[ie]):Pn(V[ie]);K(j[ie],le,tt,null,wt,_t,Tt,Dt,Bt)}kt>te?$t(j,wt,_t,!0,!1,zt):Ut(V,tt,vt,wt,_t,Tt,Dt,Bt,zt)},At=(j,V,tt,vt,wt,_t,Tt,Dt,Bt)=>{let kt=0;const te=V.length;let zt=j.length-1,ie=te-1;for(;kt<=zt&&kt<=ie;){const le=j[kt],be=V[kt]=Bt?pr(V[kt]):Pn(V[kt]);if(_o(le,be))K(le,be,tt,null,wt,_t,Tt,Dt,Bt);else break;kt++}for(;kt<=zt&&kt<=ie;){const le=j[zt],be=V[ie]=Bt?pr(V[ie]):Pn(V[ie]);if(_o(le,be))K(le,be,tt,null,wt,_t,Tt,Dt,Bt);else break;zt--,ie--}if(kt>zt){if(kt<=ie){const le=ie+1,be=le<te?V[le].el:vt;for(;kt<=ie;)K(null,V[kt]=Bt?pr(V[kt]):Pn(V[kt]),tt,be,wt,_t,Tt,Dt,Bt),kt++}}else if(kt>ie)for(;kt<=zt;)xt(j[kt],wt,_t,!0),kt++;else{const le=kt,be=kt,Se=new Map;for(kt=be;kt<=ie;kt++){const Je=V[kt]=Bt?pr(V[kt]):Pn(V[kt]);Je.key!=null&&Se.set(Je.key,kt)}let Me,ai=0;const ti=ie-be+1;let Ei=!1,ni=0;const _n=new Array(ti);for(kt=0;kt<ti;kt++)_n[kt]=0;for(kt=le;kt<=zt;kt++){const Je=j[kt];if(ai>=ti){xt(Je,wt,_t,!0);continue}let Mi;if(Je.key!=null)Mi=Se.get(Je.key);else for(Me=be;Me<=ie;Me++)if(_n[Me-be]===0&&_o(Je,V[Me])){Mi=Me;break}Mi===void 0?xt(Je,wt,_t,!0):(_n[Mi-be]=kt+1,Mi>=ni?ni=Mi:Ei=!0,K(Je,V[Mi],tt,null,wt,_t,Tt,Dt,Bt),ai++)}const Dn=Ei?R0(_n):Es;for(Me=Dn.length-1,kt=ti-1;kt>=0;kt--){const Je=be+kt,Mi=V[Je],Ji=Je+1<te?V[Je+1].el:vt;_n[kt]===0?K(null,Mi,tt,Ji,wt,_t,Tt,Dt,Bt):Ei&&(Me<0||kt!==Dn[Me]?se(Mi,tt,Ji,2):Me--)}}},se=(j,V,tt,vt,wt=null)=>{const{el:_t,type:Tt,transition:Dt,children:Bt,shapeFlag:kt}=j;if(kt&6){se(j.component.subTree,V,tt,vt);return}if(kt&128){j.suspense.move(V,tt,vt);return}if(kt&64){Tt.move(j,V,tt,Ht);return}if(Tt===Ke){l(_t,V,tt);for(let zt=0;zt<Bt.length;zt++)se(Bt[zt],V,tt,vt);l(j.anchor,V,tt);return}if(Tt===Wa){ht(j,V,tt);return}if(vt!==2&&kt&1&&Dt)if(vt===0)Dt.beforeEnter(_t),l(_t,V,tt),Zi(()=>Dt.enter(_t),wt);else{const{leave:zt,delayLeave:ie,afterLeave:le}=Dt,be=()=>l(_t,V,tt),Se=()=>{zt(_t,()=>{be(),le&&le()})};ie?ie(_t,be,Se):Se()}else l(_t,V,tt)},xt=(j,V,tt,vt=!1,wt=!1)=>{const{type:_t,props:Tt,ref:Dt,children:Bt,dynamicChildren:kt,shapeFlag:te,patchFlag:zt,dirs:ie,cacheIndex:le}=j;if(zt===-2&&(wt=!1),Dt!=null&&ll(Dt,null,tt,j,!0),le!=null&&(V.renderCache[le]=void 0),te&256){V.ctx.deactivate(j);return}const be=te&1&&ie,Se=!Po(j);let Me;if(Se&&(Me=Tt&&Tt.onVnodeBeforeUnmount)&&kn(Me,V,j),te&6)he(j.component,tt,vt);else{if(te&128){j.suspense.unmount(tt,vt);return}be&&Fr(j,null,V,"beforeUnmount"),te&64?j.type.remove(j,V,tt,Ht,vt):kt&&!kt.hasOnce&&(_t!==Ke||zt>0&&zt&64)?$t(kt,V,tt,!1,!0):(_t===Ke&&zt&384||!wt&&te&16)&&$t(Bt,V,tt),vt&&ue(j)}(Se&&(Me=Tt&&Tt.onVnodeUnmounted)||be)&&Zi(()=>{Me&&kn(Me,V,j),be&&Fr(j,null,V,"unmounted")},tt)},ue=j=>{const{type:V,el:tt,anchor:vt,transition:wt}=j;if(V===Ke){pe(tt,vt);return}if(V===Wa){yt(j);return}const _t=()=>{c(tt),wt&&!wt.persisted&&wt.afterLeave&&wt.afterLeave()};if(j.shapeFlag&1&&wt&&!wt.persisted){const{leave:Tt,delayLeave:Dt}=wt,Bt=()=>Tt(tt,_t);Dt?Dt(j.el,_t,Bt):Bt()}else _t()},pe=(j,V)=>{let tt;for(;j!==V;)tt=N(j),c(j),j=tt;c(V)},he=(j,V,tt)=>{const{bum:vt,scope:wt,job:_t,subTree:Tt,um:Dt,m:Bt,a:kt}=j;fc(Bt),fc(kt),vt&&qa(vt),wt.stop(),_t&&(_t.flags|=8,xt(Tt,j,V,tt)),Dt&&Zi(Dt,V),Zi(()=>{j.isUnmounted=!0},V),V&&V.pendingBranch&&!V.isUnmounted&&j.asyncDep&&!j.asyncResolved&&j.suspenseId===V.pendingId&&(V.deps--,V.deps===0&&V.resolve())},$t=(j,V,tt,vt=!1,wt=!1,_t=0)=>{for(let Tt=_t;Tt<j.length;Tt++)xt(j[Tt],V,tt,vt,wt)},mt=j=>{if(j.shapeFlag&6)return mt(j.component.subTree);if(j.shapeFlag&128)return j.suspense.next();const V=N(j.anchor||j.el),tt=V&&V[t0];return tt?N(tt):V};let Rt=!1;const It=(j,V,tt)=>{j==null?V._vnode&&xt(V._vnode,null,null,!0):K(V._vnode||null,j,V,null,null,null,tt),V._vnode=j,Rt||(Rt=!0,oc(),rf(),Rt=!1)},Ht={p:K,um:xt,m:se,r:ue,mt:Wt,mc:Ut,pc:pt,pbc:Pt,n:mt,o:t};return{render:It,hydrate:void 0,createApp:L0(It)}}function zu({type:t,props:n},o){return o==="svg"&&t==="foreignObject"||o==="mathml"&&t==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:o}function Nr({effect:t,job:n},o){o?(t.flags|=32,n.flags|=4):(t.flags&=-33,n.flags&=-5)}function D0(t,n){return(!t||t&&!t.pendingBranch)&&n&&!n.persisted}function Lf(t,n,o=!1){const l=t.children,c=n.children;if(ae(l)&&ae(c))for(let f=0;f<l.length;f++){const p=l[f];let v=c[f];v.shapeFlag&1&&!v.dynamicChildren&&((v.patchFlag<=0||v.patchFlag===32)&&(v=c[f]=pr(c[f]),v.el=p.el),!o&&v.patchFlag!==-2&&Lf(p,v)),v.type===Pl&&(v.el=p.el)}}function R0(t){const n=t.slice(),o=[0];let l,c,f,p,v;const y=t.length;for(l=0;l<y;l++){const M=t[l];if(M!==0){if(c=o[o.length-1],t[c]<M){n[l]=c,o.push(l);continue}for(f=0,p=o.length-1;f<p;)v=f+p>>1,t[o[v]]<M?f=v+1:p=v;M<t[o[f]]&&(f>0&&(n[l]=o[f-1]),o[f]=l)}}for(f=o.length,p=o[f-1];f-- >0;)o[f]=p,p=n[p];return o}function Cf(t){const n=t.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:Cf(n)}function fc(t){if(t)for(let n=0;n<t.length;n++)t[n].flags|=8}const O0=Symbol.for("v-scx"),I0=()=>an(O0);function Jn(t,n,o){return kf(t,n,o)}function kf(t,n,o=Ue){const{immediate:l,deep:c,flush:f,once:p}=o,v=ki({},o),y=n&&l||!n&&f!=="post";let M;if(zo){if(f==="sync"){const I=I0();M=I.__watcherHandles||(I.__watcherHandles=[])}else if(!y){const I=()=>{};return I.stop=Bn,I.resume=Bn,I.pause=Bn,I}}const w=gi;v.call=(I,G,K)=>An(I,w,G,K);let E=!1;f==="post"?v.scheduler=I=>{Zi(I,w&&w.suspense)}:f!=="sync"&&(E=!0,v.scheduler=(I,G)=>{G?I():Oh(I)}),v.augmentJob=I=>{n&&(I.flags|=4),E&&(I.flags|=2,w&&(I.id=w.uid,I.i=w))};const N=Jm(t,n,v);return zo&&(M?M.push(N):y&&N()),N}function F0(t,n,o){const l=this.proxy,c=ii(t)?t.includes(".")?Ef(l,t):()=>l[t]:t.bind(l,l);let f;_e(n)?f=n:(f=n.handler,o=n);const p=Xo(this),v=kf(c,f.bind(l),o);return p(),v}function Ef(t,n){const o=n.split(".");return()=>{let l=t;for(let c=0;c<o.length&&l;c++)l=l[o[c]];return l}}const N0=(t,n)=>n==="modelValue"||n==="model-value"?t.modelModifiers:t[`${n}Modifiers`]||t[`${ln(n)}Modifiers`]||t[`${qr(n)}Modifiers`];function z0(t,n,...o){if(t.isUnmounted)return;const l=t.vnode.props||Ue;let c=o;const f=n.startsWith("update:"),p=f&&N0(l,n.slice(7));p&&(p.trim&&(c=o.map(w=>ii(w)?w.trim():w)),p.number&&(c=o.map(nl)));let v,y=l[v=Du(n)]||l[v=Du(ln(n))];!y&&f&&(y=l[v=Du(qr(n))]),y&&An(y,t,6,c);const M=l[v+"Once"];if(M){if(!t.emitted)t.emitted={};else if(t.emitted[v])return;t.emitted[v]=!0,An(M,t,6,c)}}function Mf(t,n,o=!1){const l=n.emitsCache,c=l.get(t);if(c!==void 0)return c;const f=t.emits;let p={},v=!1;if(!_e(t)){const y=M=>{const w=Mf(M,n,!0);w&&(v=!0,ki(p,w))};!o&&n.mixins.length&&n.mixins.forEach(y),t.extends&&y(t.extends),t.mixins&&t.mixins.forEach(y)}return!f&&!v?(Ve(t)&&l.set(t,null),null):(ae(f)?f.forEach(y=>p[y]=null):ki(p,f),Ve(t)&&l.set(t,p),p)}function Ml(t,n){return!t||!_l(n)?!1:(n=n.slice(2).replace(/Once$/,""),Oe(t,n[0].toLowerCase()+n.slice(1))||Oe(t,qr(n))||Oe(t,n))}function pc(t){const{type:n,vnode:o,proxy:l,withProxy:c,propsOptions:[f],slots:p,attrs:v,emit:y,render:M,renderCache:w,props:E,data:N,setupState:I,ctx:G,inheritAttrs:K}=t,X=al(t);let ut,ft;try{if(o.shapeFlag&4){const yt=c||l,dt=yt;ut=Pn(M.call(dt,yt,w,E,I,N,G)),ft=v}else{const yt=n;ut=Pn(yt.length>1?yt(E,{attrs:v,slots:p,emit:y}):yt(E,null)),ft=n.props?v:j0(v)}}catch(yt){So.length=0,Ll(yt,t,1),ut=oi(Hr)}let ht=ut;if(ft&&K!==!1){const yt=Object.keys(ft),{shapeFlag:dt}=ht;yt.length&&dt&7&&(f&&yt.some(Lh)&&(ft=U0(ft,f)),ht=Bs(ht,ft,!1,!0))}return o.dirs&&(ht=Bs(ht,null,!1,!0),ht.dirs=ht.dirs?ht.dirs.concat(o.dirs):o.dirs),o.transition&&Ih(ht,o.transition),ut=ht,al(X),ut}const j0=t=>{let n;for(const o in t)(o==="class"||o==="style"||_l(o))&&((n||(n={}))[o]=t[o]);return n},U0=(t,n)=>{const o={};for(const l in t)(!Lh(l)||!(l.slice(9)in n))&&(o[l]=t[l]);return o};function $0(t,n,o){const{props:l,children:c,component:f}=t,{props:p,children:v,patchFlag:y}=n,M=f.emitsOptions;if(n.dirs||n.transition)return!0;if(o&&y>=0){if(y&1024)return!0;if(y&16)return l?mc(l,p,M):!!p;if(y&8){const w=n.dynamicProps;for(let E=0;E<w.length;E++){const N=w[E];if(p[N]!==l[N]&&!Ml(M,N))return!0}}}else return(c||v)&&(!v||!v.$stable)?!0:l===p?!1:l?p?mc(l,p,M):!0:!!p;return!1}function mc(t,n,o){const l=Object.keys(n);if(l.length!==Object.keys(t).length)return!0;for(let c=0;c<l.length;c++){const f=l[c];if(n[f]!==t[f]&&!Ml(o,f))return!0}return!1}function G0({vnode:t,parent:n},o){for(;n;){const l=n.subTree;if(l.suspense&&l.suspense.activeBranch===t&&(l.el=t.el),l===t)(t=n.vnode).el=o,n=n.parent;else break}}const Pf=t=>t.__isSuspense;function V0(t,n){n&&n.pendingBranch?ae(t)?n.effects.push(...t):n.effects.push(t):Qm(t)}const Ke=Symbol.for("v-fgt"),Pl=Symbol.for("v-txt"),Hr=Symbol.for("v-cmt"),Wa=Symbol.for("v-stc"),So=[];let qi=null;function Ot(t=!1){So.push(qi=t?null:[])}function H0(){So.pop(),qi=So[So.length-1]||null}let Fo=1;function gc(t,n=!1){Fo+=t,t<0&&qi&&n&&(qi.hasOnce=!0)}function Bf(t){return t.dynamicChildren=Fo>0?qi||Es:null,H0(),Fo>0&&qi&&qi.push(t),t}function Ft(t,n,o,l,c,f){return Bf(B(t,n,o,l,c,f,!0))}function No(t,n,o,l,c){return Bf(oi(t,n,o,l,c,!0))}function hl(t){return t?t.__v_isVNode===!0:!1}function _o(t,n){return t.type===n.type&&t.key===n.key}const Sf=({key:t})=>t??null,Ja=({ref:t,ref_key:n,ref_for:o})=>(typeof t=="number"&&(t=""+t),t!=null?ii(t)||Qe(t)||_e(t)?{i:zi,r:t,k:n,f:!!o}:t:null);function B(t,n=null,o=null,l=0,c=null,f=t===Ke?0:1,p=!1,v=!1){const y={__v_isVNode:!0,__v_skip:!0,type:t,props:n,key:n&&Sf(n),ref:n&&Ja(n),scopeId:of,slotScopeIds:null,children:o,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:f,patchFlag:l,dynamicProps:c,dynamicChildren:null,appContext:null,ctx:zi};return v?(Nh(y,o),f&128&&t.normalize(y)):o&&(y.shapeFlag|=ii(o)?8:16),Fo>0&&!p&&qi&&(y.patchFlag>0||f&6)&&y.patchFlag!==32&&qi.push(y),y}const oi=Z0;function Z0(t,n=null,o=null,l=0,c=null,f=!1){if((!t||t===p0)&&(t=Hr),hl(t)){const v=Bs(t,n,!0);return o&&Nh(v,o),Fo>0&&!f&&qi&&(v.shapeFlag&6?qi[qi.indexOf(t)]=v:qi.push(v)),v.patchFlag=-2,v}if(ng(t)&&(t=t.__vccOpts),n){n=q0(n);let{class:v,style:y}=n;v&&!ii(v)&&(n.class=vr(v)),Ve(y)&&(Dh(y)&&!ae(y)&&(y=ki({},y)),n.style=xl(y))}const p=ii(t)?1:Pf(t)?128:e0(t)?64:Ve(t)?4:_e(t)?2:0;return B(t,n,o,l,c,p,f,!0)}function q0(t){return t?Dh(t)||gf(t)?ki({},t):t:null}function Bs(t,n,o=!1,l=!1){const{props:c,ref:f,patchFlag:p,children:v,transition:y}=t,M=n?K0(c||{},n):c,w={__v_isVNode:!0,__v_skip:!0,type:t.type,props:M,key:M&&Sf(M),ref:n&&n.ref?o&&f?ae(f)?f.concat(Ja(n)):[f,Ja(n)]:Ja(n):f,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:v,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:n&&t.type!==Ke?p===-1?16:p|16:p,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:y,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Bs(t.ssContent),ssFallback:t.ssFallback&&Bs(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return y&&l&&Ih(w,y.clone(w)),w}function Ui(t=" ",n=0){return oi(Pl,null,t,n)}function Z3(t,n){const o=oi(Wa,null,t);return o.staticCount=n,o}function ve(t="",n=!1){return n?(Ot(),No(Hr,null,t)):oi(Hr,null,t)}function Pn(t){return t==null||typeof t=="boolean"?oi(Hr):ae(t)?oi(Ke,null,t.slice()):hl(t)?pr(t):oi(Pl,null,String(t))}function pr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Bs(t)}function Nh(t,n){let o=0;const{shapeFlag:l}=t;if(n==null)n=null;else if(ae(n))o=16;else if(typeof n=="object")if(l&65){const c=n.default;c&&(c._c&&(c._d=!1),Nh(t,c()),c._c&&(c._d=!0));return}else{o=32;const c=n._;!c&&!gf(n)?n._ctx=zi:c===3&&zi&&(zi.slots._===1?n._=1:(n._=2,t.patchFlag|=1024))}else _e(n)?(n={default:n,_ctx:zi},o=32):(n=String(n),l&64?(o=16,n=[Ui(n)]):o=8);t.children=n,t.shapeFlag|=o}function K0(...t){const n={};for(let o=0;o<t.length;o++){const l=t[o];for(const c in l)if(c==="class")n.class!==l.class&&(n.class=vr([n.class,l.class]));else if(c==="style")n.style=xl([n.style,l.style]);else if(_l(c)){const f=n[c],p=l[c];p&&f!==p&&!(ae(f)&&f.includes(p))&&(n[c]=f?[].concat(f,p):p)}else c!==""&&(n[c]=l[c])}return n}function kn(t,n,o,l=null){An(t,n,7,[o,l])}const W0=ff();let J0=0;function X0(t,n,o){const l=t.type,c=(n?n.appContext:t.appContext)||W0,f={uid:J0++,vnode:t,type:l,parent:n,appContext:c,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Rd(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(c.provides),ids:n?n.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:yf(l,c),emitsOptions:Mf(l,c),emit:null,emitted:null,propsDefaults:Ue,inheritAttrs:l.inheritAttrs,ctx:Ue,data:Ue,props:Ue,attrs:Ue,slots:Ue,refs:Ue,setupState:Ue,setupContext:null,suspense:o,suspenseId:o?o.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return f.ctx={_:f},f.root=n?n.root:f,f.emit=z0.bind(null,f),t.ce&&t.ce(f),f}let gi=null,cl,ah;{const t=bl(),n=(o,l)=>{let c;return(c=t[o])||(c=t[o]=[]),c.push(l),f=>{c.length>1?c.forEach(p=>p(f)):c[0](f)}};cl=n("__VUE_INSTANCE_SETTERS__",o=>gi=o),ah=n("__VUE_SSR_SETTERS__",o=>zo=o)}const Xo=t=>{const n=gi;return cl(t),t.scope.on(),()=>{t.scope.off(),cl(n)}},_c=()=>{gi&&gi.scope.off(),cl(null)};function Af(t){return t.vnode.shapeFlag&4}let zo=!1;function Y0(t,n=!1,o=!1){n&&ah(n);const{props:l,children:c}=t.vnode,f=Af(t);k0(t,l,f,n),B0(t,c,o);const p=f?Q0(t,n):void 0;return n&&ah(!1),p}function Q0(t,n){const o=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,g0);const{setup:l}=o;if(l){br();const c=t.setupContext=l.length>1?eg(t):null,f=Xo(t),p=Jo(l,t,0,[t.props,c]),v=Md(p);if(xr(),f(),(v||t.sp)&&!Po(t)&&af(t),v){if(p.then(_c,_c),n)return p.then(y=>{yc(t,y)}).catch(y=>{Ll(y,t,0)});t.asyncDep=p}else yc(t,p)}else Tf(t)}function yc(t,n,o){_e(n)?t.type.__ssrInlineRender?t.ssrRender=n:t.render=n:Ve(n)&&(t.setupState=tf(n)),Tf(t)}function Tf(t,n,o){const l=t.type;t.render||(t.render=l.render||Bn);{const c=Xo(t);br();try{_0(t)}finally{xr(),c()}}}const tg={get(t,n){return wi(t,"get",""),t[n]}};function eg(t){const n=o=>{t.exposed=o||{}};return{attrs:new Proxy(t.attrs,tg),slots:t.slots,emit:t.emit,expose:n}}function Bl(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(tf(Rh(t.exposed)),{get(n,o){if(o in n)return n[o];if(o in Bo)return Bo[o](t)},has(n,o){return o in n||o in Bo}})):t.proxy}function ig(t,n=!0){return _e(t)?t.displayName||t.name:t.name||n&&t.__name}function ng(t){return _e(t)&&"__vccOpts"in t}const Ie=(t,n)=>Km(t,n,zo);function Df(t,n,o){const l=arguments.length;return l===2?Ve(n)&&!ae(n)?hl(n)?oi(t,null,[n]):oi(t,n):oi(t,null,n):(l>3?o=Array.prototype.slice.call(arguments,2):l===3&&hl(o)&&(o=[o]),oi(t,n,o))}const rg="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let lh;const vc=typeof window<"u"&&window.trustedTypes;if(vc)try{lh=vc.createPolicy("vue",{createHTML:t=>t})}catch{}const Rf=lh?t=>lh.createHTML(t):t=>t,sg="http://www.w3.org/2000/svg",og="http://www.w3.org/1998/Math/MathML",Zn=typeof document<"u"?document:null,bc=Zn&&Zn.createElement("template"),ag={insert:(t,n,o)=>{n.insertBefore(t,o||null)},remove:t=>{const n=t.parentNode;n&&n.removeChild(t)},createElement:(t,n,o,l)=>{const c=n==="svg"?Zn.createElementNS(sg,t):n==="mathml"?Zn.createElementNS(og,t):o?Zn.createElement(t,{is:o}):Zn.createElement(t);return t==="select"&&l&&l.multiple!=null&&c.setAttribute("multiple",l.multiple),c},createText:t=>Zn.createTextNode(t),createComment:t=>Zn.createComment(t),setText:(t,n)=>{t.nodeValue=n},setElementText:(t,n)=>{t.textContent=n},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Zn.querySelector(t),setScopeId(t,n){t.setAttribute(n,"")},insertStaticContent(t,n,o,l,c,f){const p=o?o.previousSibling:n.lastChild;if(c&&(c===f||c.nextSibling))for(;n.insertBefore(c.cloneNode(!0),o),!(c===f||!(c=c.nextSibling)););else{bc.innerHTML=Rf(l==="svg"?`<svg>${t}</svg>`:l==="mathml"?`<math>${t}</math>`:t);const v=bc.content;if(l==="svg"||l==="mathml"){const y=v.firstChild;for(;y.firstChild;)v.appendChild(y.firstChild);v.removeChild(y)}n.insertBefore(v,o)}return[p?p.nextSibling:n.firstChild,o?o.previousSibling:n.lastChild]}},lg=Symbol("_vtc");function ug(t,n,o){const l=t[lg];l&&(n=(n?[n,...l]:[...l]).join(" ")),n==null?t.removeAttribute("class"):o?t.setAttribute("class",n):t.className=n}const xc=Symbol("_vod"),hg=Symbol("_vsh"),cg=Symbol(""),dg=/(^|;)\s*display\s*:/;function fg(t,n,o){const l=t.style,c=ii(o);let f=!1;if(o&&!c){if(n)if(ii(n))for(const p of n.split(";")){const v=p.slice(0,p.indexOf(":")).trim();o[v]==null&&Xa(l,v,"")}else for(const p in n)o[p]==null&&Xa(l,p,"");for(const p in o)p==="display"&&(f=!0),Xa(l,p,o[p])}else if(c){if(n!==o){const p=l[cg];p&&(o+=";"+p),l.cssText=o,f=dg.test(o)}}else n&&t.removeAttribute("style");xc in t&&(t[xc]=f?l.display:"",t[hg]&&(l.display="none"))}const wc=/\s*!important$/;function Xa(t,n,o){if(ae(o))o.forEach(l=>Xa(t,n,l));else if(o==null&&(o=""),n.startsWith("--"))t.setProperty(n,o);else{const l=pg(t,n);wc.test(o)?t.setProperty(qr(l),o.replace(wc,""),"important"):t[l]=o}}const Lc=["Webkit","Moz","ms"],ju={};function pg(t,n){const o=ju[n];if(o)return o;let l=ln(n);if(l!=="filter"&&l in t)return ju[n]=l;l=vl(l);for(let c=0;c<Lc.length;c++){const f=Lc[c]+l;if(f in t)return ju[n]=f}return n}const Cc="http://www.w3.org/1999/xlink";function kc(t,n,o,l,c,f=vm(n)){l&&n.startsWith("xlink:")?o==null?t.removeAttributeNS(Cc,n.slice(6,n.length)):t.setAttributeNS(Cc,n,o):o==null||f&&!Ad(o)?t.removeAttribute(n):t.setAttribute(n,f?"":Sn(o)?String(o):o)}function Ec(t,n,o,l,c){if(n==="innerHTML"||n==="textContent"){o!=null&&(t[n]=n==="innerHTML"?Rf(o):o);return}const f=t.tagName;if(n==="value"&&f!=="PROGRESS"&&!f.includes("-")){const v=f==="OPTION"?t.getAttribute("value")||"":t.value,y=o==null?t.type==="checkbox"?"on":"":String(o);(v!==y||!("_value"in t))&&(t.value=y),o==null&&t.removeAttribute(n),t._value=o;return}let p=!1;if(o===""||o==null){const v=typeof t[n];v==="boolean"?o=Ad(o):o==null&&v==="string"?(o="",p=!0):v==="number"&&(o=0,p=!0)}try{t[n]=o}catch{}p&&t.removeAttribute(c||n)}function gr(t,n,o,l){t.addEventListener(n,o,l)}function mg(t,n,o,l){t.removeEventListener(n,o,l)}const Mc=Symbol("_vei");function gg(t,n,o,l,c=null){const f=t[Mc]||(t[Mc]={}),p=f[n];if(l&&p)p.value=l;else{const[v,y]=_g(n);if(l){const M=f[n]=bg(l,c);gr(t,v,M,y)}else p&&(mg(t,v,p,y),f[n]=void 0)}}const Pc=/(?:Once|Passive|Capture)$/;function _g(t){let n;if(Pc.test(t)){n={};let l;for(;l=t.match(Pc);)t=t.slice(0,t.length-l[0].length),n[l[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):qr(t.slice(2)),n]}let Uu=0;const yg=Promise.resolve(),vg=()=>Uu||(yg.then(()=>Uu=0),Uu=Date.now());function bg(t,n){const o=l=>{if(!l._vts)l._vts=Date.now();else if(l._vts<=o.attached)return;An(xg(l,o.value),n,5,[l])};return o.value=t,o.attached=vg(),o}function xg(t,n){if(ae(n)){const o=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{o.call(t),t._stopped=!0},n.map(l=>c=>!c._stopped&&l&&l(c))}else return n}const Bc=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,wg=(t,n,o,l,c,f)=>{const p=c==="svg";n==="class"?ug(t,l,p):n==="style"?fg(t,o,l):_l(n)?Lh(n)||gg(t,n,o,l,f):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):Lg(t,n,l,p))?(Ec(t,n,l),!t.tagName.includes("-")&&(n==="value"||n==="checked"||n==="selected")&&kc(t,n,l,p,f,n!=="value")):t._isVueCE&&(/[A-Z]/.test(n)||!ii(l))?Ec(t,ln(n),l,f,n):(n==="true-value"?t._trueValue=l:n==="false-value"&&(t._falseValue=l),kc(t,n,l,p))};function Lg(t,n,o,l){if(l)return!!(n==="innerHTML"||n==="textContent"||n in t&&Bc(n)&&_e(o));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&t.tagName==="INPUT"||n==="type"&&t.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const c=t.tagName;if(c==="IMG"||c==="VIDEO"||c==="CANVAS"||c==="SOURCE")return!1}return Bc(n)&&ii(o)?!1:n in t}const Ss=t=>{const n=t.props["onUpdate:modelValue"]||!1;return ae(n)?o=>qa(n,o):n};function Cg(t){t.target.composing=!0}function Sc(t){const n=t.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const Xn=Symbol("_assign"),Ae={created(t,{modifiers:{lazy:n,trim:o,number:l}},c){t[Xn]=Ss(c);const f=l||c.props&&c.props.type==="number";gr(t,n?"change":"input",p=>{if(p.target.composing)return;let v=t.value;o&&(v=v.trim()),f&&(v=nl(v)),t[Xn](v)}),o&&gr(t,"change",()=>{t.value=t.value.trim()}),n||(gr(t,"compositionstart",Cg),gr(t,"compositionend",Sc),gr(t,"change",Sc))},mounted(t,{value:n}){t.value=n??""},beforeUpdate(t,{value:n,oldValue:o,modifiers:{lazy:l,trim:c,number:f}},p){if(t[Xn]=Ss(p),t.composing)return;const v=(f||t.type==="number")&&!/^0\d/.test(t.value)?nl(t.value):t.value,y=n??"";v!==y&&(document.activeElement===t&&t.type!=="range"&&(l&&n===o||c&&t.value.trim()===y)||(t.value=y))}},kg={deep:!0,created(t,n,o){t[Xn]=Ss(o),gr(t,"change",()=>{const l=t._modelValue,c=Uo(t),f=t.checked,p=t[Xn];if(ae(l)){const v=Eh(l,c),y=v!==-1;if(f&&!y)p(l.concat(c));else if(!f&&y){const M=[...l];M.splice(v,1),p(M)}}else if(Ds(l)){const v=new Set(l);f?v.add(c):v.delete(c),p(v)}else p(Of(t,f))})},mounted:Ac,beforeUpdate(t,n,o){t[Xn]=Ss(o),Ac(t,n,o)}};function Ac(t,{value:n,oldValue:o},l){t._modelValue=n;let c;if(ae(n))c=Eh(n,l.props.value)>-1;else if(Ds(n))c=n.has(l.props.value);else{if(n===o)return;c=Wo(n,Of(t,!0))}t.checked!==c&&(t.checked=c)}const jo={deep:!0,created(t,{value:n,modifiers:{number:o}},l){const c=Ds(n);gr(t,"change",()=>{const f=Array.prototype.filter.call(t.options,p=>p.selected).map(p=>o?nl(Uo(p)):Uo(p));t[Xn](t.multiple?c?new Set(f):f:f[0]),t._assigning=!0,Cl(()=>{t._assigning=!1})}),t[Xn]=Ss(l)},mounted(t,{value:n}){Tc(t,n)},beforeUpdate(t,n,o){t[Xn]=Ss(o)},updated(t,{value:n}){t._assigning||Tc(t,n)}};function Tc(t,n){const o=t.multiple,l=ae(n);if(!(o&&!l&&!Ds(n))){for(let c=0,f=t.options.length;c<f;c++){const p=t.options[c],v=Uo(p);if(o)if(l){const y=typeof v;y==="string"||y==="number"?p.selected=n.some(M=>String(M)===String(v)):p.selected=Eh(n,v)>-1}else p.selected=n.has(v);else if(Wo(Uo(p),n)){t.selectedIndex!==c&&(t.selectedIndex=c);return}}!o&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Uo(t){return"_value"in t?t._value:t.value}function Of(t,n){const o=n?"_trueValue":"_falseValue";return o in t?t[o]:n}const Eg=["ctrl","shift","alt","meta"],Mg={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,n)=>Eg.some(o=>t[`${o}Key`]&&!n.includes(o))},Yo=(t,n)=>{const o=t._withMods||(t._withMods={}),l=n.join(".");return o[l]||(o[l]=(c,...f)=>{for(let p=0;p<n.length;p++){const v=Mg[n[p]];if(v&&v(c,n))return}return t(c,...f)})},Pg=ki({patchProp:wg},ag);let Dc;function Bg(){return Dc||(Dc=A0(Pg))}const Sg=(...t)=>{const n=Bg().createApp(...t),{mount:o}=n;return n.mount=l=>{const c=Tg(l);if(!c)return;const f=n._component;!_e(f)&&!f.render&&!f.template&&(f.template=c.innerHTML),c.nodeType===1&&(c.textContent="");const p=o(c,!1,Ag(c));return c instanceof Element&&(c.removeAttribute("v-cloak"),c.setAttribute("data-v-app","")),p},n};function Ag(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Tg(t){return ii(t)?document.querySelector(t):t}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let If;const Sl=t=>If=t,Ff=Symbol();function uh(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Ao;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Ao||(Ao={}));function Dg(){const t=Od(!0),n=t.run(()=>Xt({}));let o=[],l=[];const c=Rh({install(f){Sl(c),c._a=f,f.provide(Ff,c),f.config.globalProperties.$pinia=c,l.forEach(p=>o.push(p)),l=[]},use(f){return this._a?o.push(f):l.push(f),this},_p:o,_a:null,_e:t,_s:new Map,state:n});return c}const Nf=()=>{};function Rc(t,n,o,l=Nf){t.push(n);const c=()=>{const f=t.indexOf(n);f>-1&&(t.splice(f,1),l())};return!o&&Id()&&xm(c),c}function Ls(t,...n){t.slice().forEach(o=>{o(...n)})}const Rg=t=>t(),Oc=Symbol(),$u=Symbol();function hh(t,n){t instanceof Map&&n instanceof Map?n.forEach((o,l)=>t.set(l,o)):t instanceof Set&&n instanceof Set&&n.forEach(t.add,t);for(const o in n){if(!n.hasOwnProperty(o))continue;const l=n[o],c=t[o];uh(c)&&uh(l)&&t.hasOwnProperty(o)&&!Qe(l)&&!yr(l)?t[o]=hh(c,l):t[o]=l}return t}const Og=Symbol();function Ig(t){return!uh(t)||!t.hasOwnProperty(Og)}const{assign:dr}=Object;function Fg(t){return!!(Qe(t)&&t.effect)}function Ng(t,n,o,l){const{state:c,actions:f,getters:p}=n,v=o.state.value[t];let y;function M(){v||(o.state.value[t]=c?c():{});const w=Vm(o.state.value[t]);return dr(w,f,Object.keys(p||{}).reduce((E,N)=>(E[N]=Rh(Ie(()=>{Sl(o);const I=o._s.get(t);return p[N].call(I,I)})),E),{}))}return y=zf(t,M,n,o,l,!0),y}function zf(t,n,o={},l,c,f){let p;const v=dr({actions:{}},o),y={deep:!0};let M,w,E=[],N=[],I;const G=l.state.value[t];!f&&!G&&(l.state.value[t]={}),Xt({});let K;function X(Ut){let Vt;M=w=!1,typeof Ut=="function"?(Ut(l.state.value[t]),Vt={type:Ao.patchFunction,storeId:t,events:I}):(hh(l.state.value[t],Ut),Vt={type:Ao.patchObject,payload:Ut,storeId:t,events:I});const Pt=K=Symbol();Cl().then(()=>{K===Pt&&(M=!0)}),w=!0,Ls(E,Vt,l.state.value[t])}const ut=f?function(){const{state:Vt}=o,Pt=Vt?Vt():{};this.$patch(St=>{dr(St,Pt)})}:Nf;function ft(){p.stop(),E=[],N=[],l._s.delete(t)}const ht=(Ut,Vt="")=>{if(Oc in Ut)return Ut[$u]=Vt,Ut;const Pt=function(){Sl(l);const St=Array.from(arguments),Qt=[],ce=[];function Wt(bt){Qt.push(bt)}function ot(bt){ce.push(bt)}Ls(N,{args:St,name:Pt[$u],store:dt,after:Wt,onError:ot});let $;try{$=Ut.apply(this&&this.$id===t?this:dt,St)}catch(bt){throw Ls(ce,bt),bt}return $ instanceof Promise?$.then(bt=>(Ls(Qt,bt),bt)).catch(bt=>(Ls(ce,bt),Promise.reject(bt))):(Ls(Qt,$),$)};return Pt[Oc]=!0,Pt[$u]=Vt,Pt},yt={_p:l,$id:t,$onAction:Rc.bind(null,N),$patch:X,$reset:ut,$subscribe(Ut,Vt={}){const Pt=Rc(E,Ut,Vt.detached,()=>St()),St=p.run(()=>Jn(()=>l.state.value[t],Qt=>{(Vt.flush==="sync"?w:M)&&Ut({storeId:t,type:Ao.direct,events:I},Qt)},dr({},y,Vt)));return Pt},$dispose:ft},dt=Yn(yt);l._s.set(t,dt);const qt=(l._a&&l._a.runWithContext||Rg)(()=>l._e.run(()=>(p=Od()).run(()=>n({action:ht}))));for(const Ut in qt){const Vt=qt[Ut];if(Qe(Vt)&&!Fg(Vt)||yr(Vt))f||(G&&Ig(Vt)&&(Qe(Vt)?Vt.value=G[Ut]:hh(Vt,G[Ut])),l.state.value[t][Ut]=Vt);else if(typeof Vt=="function"){const Pt=ht(Vt,Ut);qt[Ut]=Pt,v.actions[Ut]=Vt}}return dr(dt,qt),dr(Ee(dt),qt),Object.defineProperty(dt,"$state",{get:()=>l.state.value[t],set:Ut=>{X(Vt=>{dr(Vt,Ut)})}}),l._p.forEach(Ut=>{dr(dt,p.run(()=>Ut({store:dt,app:l._a,pinia:l,options:v})))}),G&&f&&o.hydrate&&o.hydrate(dt.$state,G),M=!0,w=!0,dt}/*! #__NO_SIDE_EFFECTS__ */function zh(t,n,o){let l,c;const f=typeof n=="function";typeof t=="string"?(l=t,c=f?o:n):(c=t,l=t.id);function p(v,y){const M=C0();return v=v||(M?an(Ff,null):null),v&&Sl(v),v=If,v._s.has(l)||(f?zf(l,n,c,v):Ng(l,c,v)),v._s.get(l)}return p.$id=l,p}function jf(t,n){return function(){return t.apply(n,arguments)}}const{toString:zg}=Object.prototype,{getPrototypeOf:jh}=Object,Al=(t=>n=>{const o=zg.call(n);return t[o]||(t[o]=o.slice(8,-1).toLowerCase())})(Object.create(null)),gn=t=>(t=t.toLowerCase(),n=>Al(n)===t),Tl=t=>n=>typeof n===t,{isArray:Rs}=Array,$o=Tl("undefined");function jg(t){return t!==null&&!$o(t)&&t.constructor!==null&&!$o(t.constructor)&&Ki(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Uf=gn("ArrayBuffer");function Ug(t){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(t):n=t&&t.buffer&&Uf(t.buffer),n}const $g=Tl("string"),Ki=Tl("function"),$f=Tl("number"),Dl=t=>t!==null&&typeof t=="object",Gg=t=>t===!0||t===!1,Ya=t=>{if(Al(t)!=="object")return!1;const n=jh(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Vg=gn("Date"),Hg=gn("File"),Zg=gn("Blob"),qg=gn("FileList"),Kg=t=>Dl(t)&&Ki(t.pipe),Wg=t=>{let n;return t&&(typeof FormData=="function"&&t instanceof FormData||Ki(t.append)&&((n=Al(t))==="formdata"||n==="object"&&Ki(t.toString)&&t.toString()==="[object FormData]"))},Jg=gn("URLSearchParams"),[Xg,Yg,Qg,t_]=["ReadableStream","Request","Response","Headers"].map(gn),e_=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Qo(t,n,{allOwnKeys:o=!1}={}){if(t===null||typeof t>"u")return;let l,c;if(typeof t!="object"&&(t=[t]),Rs(t))for(l=0,c=t.length;l<c;l++)n.call(null,t[l],l,t);else{const f=o?Object.getOwnPropertyNames(t):Object.keys(t),p=f.length;let v;for(l=0;l<p;l++)v=f[l],n.call(null,t[v],v,t)}}function Gf(t,n){n=n.toLowerCase();const o=Object.keys(t);let l=o.length,c;for(;l-- >0;)if(c=o[l],n===c.toLowerCase())return c;return null}const jr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Vf=t=>!$o(t)&&t!==jr;function ch(){const{caseless:t}=Vf(this)&&this||{},n={},o=(l,c)=>{const f=t&&Gf(n,c)||c;Ya(n[f])&&Ya(l)?n[f]=ch(n[f],l):Ya(l)?n[f]=ch({},l):Rs(l)?n[f]=l.slice():n[f]=l};for(let l=0,c=arguments.length;l<c;l++)arguments[l]&&Qo(arguments[l],o);return n}const i_=(t,n,o,{allOwnKeys:l}={})=>(Qo(n,(c,f)=>{o&&Ki(c)?t[f]=jf(c,o):t[f]=c},{allOwnKeys:l}),t),n_=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),r_=(t,n,o,l)=>{t.prototype=Object.create(n.prototype,l),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:n.prototype}),o&&Object.assign(t.prototype,o)},s_=(t,n,o,l)=>{let c,f,p;const v={};if(n=n||{},t==null)return n;do{for(c=Object.getOwnPropertyNames(t),f=c.length;f-- >0;)p=c[f],(!l||l(p,t,n))&&!v[p]&&(n[p]=t[p],v[p]=!0);t=o!==!1&&jh(t)}while(t&&(!o||o(t,n))&&t!==Object.prototype);return n},o_=(t,n,o)=>{t=String(t),(o===void 0||o>t.length)&&(o=t.length),o-=n.length;const l=t.indexOf(n,o);return l!==-1&&l===o},a_=t=>{if(!t)return null;if(Rs(t))return t;let n=t.length;if(!$f(n))return null;const o=new Array(n);for(;n-- >0;)o[n]=t[n];return o},l_=(t=>n=>t&&n instanceof t)(typeof Uint8Array<"u"&&jh(Uint8Array)),u_=(t,n)=>{const l=(t&&t[Symbol.iterator]).call(t);let c;for(;(c=l.next())&&!c.done;){const f=c.value;n.call(t,f[0],f[1])}},h_=(t,n)=>{let o;const l=[];for(;(o=t.exec(n))!==null;)l.push(o);return l},c_=gn("HTMLFormElement"),d_=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(o,l,c){return l.toUpperCase()+c}),Ic=(({hasOwnProperty:t})=>(n,o)=>t.call(n,o))(Object.prototype),f_=gn("RegExp"),Hf=(t,n)=>{const o=Object.getOwnPropertyDescriptors(t),l={};Qo(o,(c,f)=>{let p;(p=n(c,f,t))!==!1&&(l[f]=p||c)}),Object.defineProperties(t,l)},p_=t=>{Hf(t,(n,o)=>{if(Ki(t)&&["arguments","caller","callee"].indexOf(o)!==-1)return!1;const l=t[o];if(Ki(l)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+o+"'")})}})},m_=(t,n)=>{const o={},l=c=>{c.forEach(f=>{o[f]=!0})};return Rs(t)?l(t):l(String(t).split(n)),o},g_=()=>{},__=(t,n)=>t!=null&&Number.isFinite(t=+t)?t:n,Gu="abcdefghijklmnopqrstuvwxyz",Fc="0123456789",Zf={DIGIT:Fc,ALPHA:Gu,ALPHA_DIGIT:Gu+Gu.toUpperCase()+Fc},y_=(t=16,n=Zf.ALPHA_DIGIT)=>{let o="";const{length:l}=n;for(;t--;)o+=n[Math.random()*l|0];return o};function v_(t){return!!(t&&Ki(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const b_=t=>{const n=new Array(10),o=(l,c)=>{if(Dl(l)){if(n.indexOf(l)>=0)return;if(!("toJSON"in l)){n[c]=l;const f=Rs(l)?[]:{};return Qo(l,(p,v)=>{const y=o(p,c+1);!$o(y)&&(f[v]=y)}),n[c]=void 0,f}}return l};return o(t,0)},x_=gn("AsyncFunction"),w_=t=>t&&(Dl(t)||Ki(t))&&Ki(t.then)&&Ki(t.catch),qf=((t,n)=>t?setImmediate:n?((o,l)=>(jr.addEventListener("message",({source:c,data:f})=>{c===jr&&f===o&&l.length&&l.shift()()},!1),c=>{l.push(c),jr.postMessage(o,"*")}))(`axios@${Math.random()}`,[]):o=>setTimeout(o))(typeof setImmediate=="function",Ki(jr.postMessage)),L_=typeof queueMicrotask<"u"?queueMicrotask.bind(jr):typeof process<"u"&&process.nextTick||qf,gt={isArray:Rs,isArrayBuffer:Uf,isBuffer:jg,isFormData:Wg,isArrayBufferView:Ug,isString:$g,isNumber:$f,isBoolean:Gg,isObject:Dl,isPlainObject:Ya,isReadableStream:Xg,isRequest:Yg,isResponse:Qg,isHeaders:t_,isUndefined:$o,isDate:Vg,isFile:Hg,isBlob:Zg,isRegExp:f_,isFunction:Ki,isStream:Kg,isURLSearchParams:Jg,isTypedArray:l_,isFileList:qg,forEach:Qo,merge:ch,extend:i_,trim:e_,stripBOM:n_,inherits:r_,toFlatObject:s_,kindOf:Al,kindOfTest:gn,endsWith:o_,toArray:a_,forEachEntry:u_,matchAll:h_,isHTMLForm:c_,hasOwnProperty:Ic,hasOwnProp:Ic,reduceDescriptors:Hf,freezeMethods:p_,toObjectSet:m_,toCamelCase:d_,noop:g_,toFiniteNumber:__,findKey:Gf,global:jr,isContextDefined:Vf,ALPHABET:Zf,generateString:y_,isSpecCompliantForm:v_,toJSONObject:b_,isAsyncFn:x_,isThenable:w_,setImmediate:qf,asap:L_};function ye(t,n,o,l,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",n&&(this.code=n),o&&(this.config=o),l&&(this.request=l),c&&(this.response=c,this.status=c.status?c.status:null)}gt.inherits(ye,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:gt.toJSONObject(this.config),code:this.code,status:this.status}}});const Kf=ye.prototype,Wf={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Wf[t]={value:t}});Object.defineProperties(ye,Wf);Object.defineProperty(Kf,"isAxiosError",{value:!0});ye.from=(t,n,o,l,c,f)=>{const p=Object.create(Kf);return gt.toFlatObject(t,p,function(y){return y!==Error.prototype},v=>v!=="isAxiosError"),ye.call(p,t.message,n,o,l,c),p.cause=t,p.name=t.name,f&&Object.assign(p,f),p};const C_=null;function dh(t){return gt.isPlainObject(t)||gt.isArray(t)}function Jf(t){return gt.endsWith(t,"[]")?t.slice(0,-2):t}function Nc(t,n,o){return t?t.concat(n).map(function(c,f){return c=Jf(c),!o&&f?"["+c+"]":c}).join(o?".":""):n}function k_(t){return gt.isArray(t)&&!t.some(dh)}const E_=gt.toFlatObject(gt,{},null,function(n){return/^is[A-Z]/.test(n)});function Rl(t,n,o){if(!gt.isObject(t))throw new TypeError("target must be an object");n=n||new FormData,o=gt.toFlatObject(o,{metaTokens:!0,dots:!1,indexes:!1},!1,function(K,X){return!gt.isUndefined(X[K])});const l=o.metaTokens,c=o.visitor||w,f=o.dots,p=o.indexes,y=(o.Blob||typeof Blob<"u"&&Blob)&&gt.isSpecCompliantForm(n);if(!gt.isFunction(c))throw new TypeError("visitor must be a function");function M(G){if(G===null)return"";if(gt.isDate(G))return G.toISOString();if(!y&&gt.isBlob(G))throw new ye("Blob is not supported. Use a Buffer instead.");return gt.isArrayBuffer(G)||gt.isTypedArray(G)?y&&typeof Blob=="function"?new Blob([G]):Buffer.from(G):G}function w(G,K,X){let ut=G;if(G&&!X&&typeof G=="object"){if(gt.endsWith(K,"{}"))K=l?K:K.slice(0,-2),G=JSON.stringify(G);else if(gt.isArray(G)&&k_(G)||(gt.isFileList(G)||gt.endsWith(K,"[]"))&&(ut=gt.toArray(G)))return K=Jf(K),ut.forEach(function(ht,yt){!(gt.isUndefined(ht)||ht===null)&&n.append(p===!0?Nc([K],yt,f):p===null?K:K+"[]",M(ht))}),!1}return dh(G)?!0:(n.append(Nc(X,K,f),M(G)),!1)}const E=[],N=Object.assign(E_,{defaultVisitor:w,convertValue:M,isVisitable:dh});function I(G,K){if(!gt.isUndefined(G)){if(E.indexOf(G)!==-1)throw Error("Circular reference detected in "+K.join("."));E.push(G),gt.forEach(G,function(ut,ft){(!(gt.isUndefined(ut)||ut===null)&&c.call(n,ut,gt.isString(ft)?ft.trim():ft,K,N))===!0&&I(ut,K?K.concat(ft):[ft])}),E.pop()}}if(!gt.isObject(t))throw new TypeError("data must be an object");return I(t),n}function zc(t){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(l){return n[l]})}function Uh(t,n){this._pairs=[],t&&Rl(t,this,n)}const Xf=Uh.prototype;Xf.append=function(n,o){this._pairs.push([n,o])};Xf.toString=function(n){const o=n?function(l){return n.call(this,l,zc)}:zc;return this._pairs.map(function(c){return o(c[0])+"="+o(c[1])},"").join("&")};function M_(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Yf(t,n,o){if(!n)return t;const l=o&&o.encode||M_;gt.isFunction(o)&&(o={serialize:o});const c=o&&o.serialize;let f;if(c?f=c(n,o):f=gt.isURLSearchParams(n)?n.toString():new Uh(n,o).toString(l),f){const p=t.indexOf("#");p!==-1&&(t=t.slice(0,p)),t+=(t.indexOf("?")===-1?"?":"&")+f}return t}class jc{constructor(){this.handlers=[]}use(n,o,l){return this.handlers.push({fulfilled:n,rejected:o,synchronous:l?l.synchronous:!1,runWhen:l?l.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){gt.forEach(this.handlers,function(l){l!==null&&n(l)})}}const Qf={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},P_=typeof URLSearchParams<"u"?URLSearchParams:Uh,B_=typeof FormData<"u"?FormData:null,S_=typeof Blob<"u"?Blob:null,A_={isBrowser:!0,classes:{URLSearchParams:P_,FormData:B_,Blob:S_},protocols:["http","https","file","blob","url","data"]},$h=typeof window<"u"&&typeof document<"u",fh=typeof navigator=="object"&&navigator||void 0,T_=$h&&(!fh||["ReactNative","NativeScript","NS"].indexOf(fh.product)<0),D_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",R_=$h&&window.location.href||"http://localhost",O_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:$h,hasStandardBrowserEnv:T_,hasStandardBrowserWebWorkerEnv:D_,navigator:fh,origin:R_},Symbol.toStringTag,{value:"Module"})),Ci={...O_,...A_};function I_(t,n){return Rl(t,new Ci.classes.URLSearchParams,Object.assign({visitor:function(o,l,c,f){return Ci.isNode&&gt.isBuffer(o)?(this.append(l,o.toString("base64")),!1):f.defaultVisitor.apply(this,arguments)}},n))}function F_(t){return gt.matchAll(/\w+|\[(\w*)]/g,t).map(n=>n[0]==="[]"?"":n[1]||n[0])}function N_(t){const n={},o=Object.keys(t);let l;const c=o.length;let f;for(l=0;l<c;l++)f=o[l],n[f]=t[f];return n}function tp(t){function n(o,l,c,f){let p=o[f++];if(p==="__proto__")return!0;const v=Number.isFinite(+p),y=f>=o.length;return p=!p&&gt.isArray(c)?c.length:p,y?(gt.hasOwnProp(c,p)?c[p]=[c[p],l]:c[p]=l,!v):((!c[p]||!gt.isObject(c[p]))&&(c[p]=[]),n(o,l,c[p],f)&&gt.isArray(c[p])&&(c[p]=N_(c[p])),!v)}if(gt.isFormData(t)&&gt.isFunction(t.entries)){const o={};return gt.forEachEntry(t,(l,c)=>{n(F_(l),c,o,0)}),o}return null}function z_(t,n,o){if(gt.isString(t))try{return(n||JSON.parse)(t),gt.trim(t)}catch(l){if(l.name!=="SyntaxError")throw l}return(o||JSON.stringify)(t)}const ta={transitional:Qf,adapter:["xhr","http","fetch"],transformRequest:[function(n,o){const l=o.getContentType()||"",c=l.indexOf("application/json")>-1,f=gt.isObject(n);if(f&&gt.isHTMLForm(n)&&(n=new FormData(n)),gt.isFormData(n))return c?JSON.stringify(tp(n)):n;if(gt.isArrayBuffer(n)||gt.isBuffer(n)||gt.isStream(n)||gt.isFile(n)||gt.isBlob(n)||gt.isReadableStream(n))return n;if(gt.isArrayBufferView(n))return n.buffer;if(gt.isURLSearchParams(n))return o.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let v;if(f){if(l.indexOf("application/x-www-form-urlencoded")>-1)return I_(n,this.formSerializer).toString();if((v=gt.isFileList(n))||l.indexOf("multipart/form-data")>-1){const y=this.env&&this.env.FormData;return Rl(v?{"files[]":n}:n,y&&new y,this.formSerializer)}}return f||c?(o.setContentType("application/json",!1),z_(n)):n}],transformResponse:[function(n){const o=this.transitional||ta.transitional,l=o&&o.forcedJSONParsing,c=this.responseType==="json";if(gt.isResponse(n)||gt.isReadableStream(n))return n;if(n&&gt.isString(n)&&(l&&!this.responseType||c)){const p=!(o&&o.silentJSONParsing)&&c;try{return JSON.parse(n)}catch(v){if(p)throw v.name==="SyntaxError"?ye.from(v,ye.ERR_BAD_RESPONSE,this,null,this.response):v}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ci.classes.FormData,Blob:Ci.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};gt.forEach(["delete","get","head","post","put","patch"],t=>{ta.headers[t]={}});const j_=gt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),U_=t=>{const n={};let o,l,c;return t&&t.split(`
`).forEach(function(p){c=p.indexOf(":"),o=p.substring(0,c).trim().toLowerCase(),l=p.substring(c+1).trim(),!(!o||n[o]&&j_[o])&&(o==="set-cookie"?n[o]?n[o].push(l):n[o]=[l]:n[o]=n[o]?n[o]+", "+l:l)}),n},Uc=Symbol("internals");function yo(t){return t&&String(t).trim().toLowerCase()}function Qa(t){return t===!1||t==null?t:gt.isArray(t)?t.map(Qa):String(t)}function $_(t){const n=Object.create(null),o=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let l;for(;l=o.exec(t);)n[l[1]]=l[2];return n}const G_=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Vu(t,n,o,l,c){if(gt.isFunction(l))return l.call(this,n,o);if(c&&(n=o),!!gt.isString(n)){if(gt.isString(l))return n.indexOf(l)!==-1;if(gt.isRegExp(l))return l.test(n)}}function V_(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,o,l)=>o.toUpperCase()+l)}function H_(t,n){const o=gt.toCamelCase(" "+n);["get","set","has"].forEach(l=>{Object.defineProperty(t,l+o,{value:function(c,f,p){return this[l].call(this,n,c,f,p)},configurable:!0})})}let $i=class{constructor(n){n&&this.set(n)}set(n,o,l){const c=this;function f(v,y,M){const w=yo(y);if(!w)throw new Error("header name must be a non-empty string");const E=gt.findKey(c,w);(!E||c[E]===void 0||M===!0||M===void 0&&c[E]!==!1)&&(c[E||y]=Qa(v))}const p=(v,y)=>gt.forEach(v,(M,w)=>f(M,w,y));if(gt.isPlainObject(n)||n instanceof this.constructor)p(n,o);else if(gt.isString(n)&&(n=n.trim())&&!G_(n))p(U_(n),o);else if(gt.isHeaders(n))for(const[v,y]of n.entries())f(y,v,l);else n!=null&&f(o,n,l);return this}get(n,o){if(n=yo(n),n){const l=gt.findKey(this,n);if(l){const c=this[l];if(!o)return c;if(o===!0)return $_(c);if(gt.isFunction(o))return o.call(this,c,l);if(gt.isRegExp(o))return o.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,o){if(n=yo(n),n){const l=gt.findKey(this,n);return!!(l&&this[l]!==void 0&&(!o||Vu(this,this[l],l,o)))}return!1}delete(n,o){const l=this;let c=!1;function f(p){if(p=yo(p),p){const v=gt.findKey(l,p);v&&(!o||Vu(l,l[v],v,o))&&(delete l[v],c=!0)}}return gt.isArray(n)?n.forEach(f):f(n),c}clear(n){const o=Object.keys(this);let l=o.length,c=!1;for(;l--;){const f=o[l];(!n||Vu(this,this[f],f,n,!0))&&(delete this[f],c=!0)}return c}normalize(n){const o=this,l={};return gt.forEach(this,(c,f)=>{const p=gt.findKey(l,f);if(p){o[p]=Qa(c),delete o[f];return}const v=n?V_(f):String(f).trim();v!==f&&delete o[f],o[v]=Qa(c),l[v]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const o=Object.create(null);return gt.forEach(this,(l,c)=>{l!=null&&l!==!1&&(o[c]=n&&gt.isArray(l)?l.join(", "):l)}),o}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,o])=>n+": "+o).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...o){const l=new this(n);return o.forEach(c=>l.set(c)),l}static accessor(n){const l=(this[Uc]=this[Uc]={accessors:{}}).accessors,c=this.prototype;function f(p){const v=yo(p);l[v]||(H_(c,p),l[v]=!0)}return gt.isArray(n)?n.forEach(f):f(n),this}};$i.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);gt.reduceDescriptors($i.prototype,({value:t},n)=>{let o=n[0].toUpperCase()+n.slice(1);return{get:()=>t,set(l){this[o]=l}}});gt.freezeMethods($i);function Hu(t,n){const o=this||ta,l=n||o,c=$i.from(l.headers);let f=l.data;return gt.forEach(t,function(v){f=v.call(o,f,c.normalize(),n?n.status:void 0)}),c.normalize(),f}function ep(t){return!!(t&&t.__CANCEL__)}function Os(t,n,o){ye.call(this,t??"canceled",ye.ERR_CANCELED,n,o),this.name="CanceledError"}gt.inherits(Os,ye,{__CANCEL__:!0});function ip(t,n,o){const l=o.config.validateStatus;!o.status||!l||l(o.status)?t(o):n(new ye("Request failed with status code "+o.status,[ye.ERR_BAD_REQUEST,ye.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o))}function Z_(t){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}function q_(t,n){t=t||10;const o=new Array(t),l=new Array(t);let c=0,f=0,p;return n=n!==void 0?n:1e3,function(y){const M=Date.now(),w=l[f];p||(p=M),o[c]=y,l[c]=M;let E=f,N=0;for(;E!==c;)N+=o[E++],E=E%t;if(c=(c+1)%t,c===f&&(f=(f+1)%t),M-p<n)return;const I=w&&M-w;return I?Math.round(N*1e3/I):void 0}}function K_(t,n){let o=0,l=1e3/n,c,f;const p=(M,w=Date.now())=>{o=w,c=null,f&&(clearTimeout(f),f=null),t.apply(null,M)};return[(...M)=>{const w=Date.now(),E=w-o;E>=l?p(M,w):(c=M,f||(f=setTimeout(()=>{f=null,p(c)},l-E)))},()=>c&&p(c)]}const dl=(t,n,o=3)=>{let l=0;const c=q_(50,250);return K_(f=>{const p=f.loaded,v=f.lengthComputable?f.total:void 0,y=p-l,M=c(y),w=p<=v;l=p;const E={loaded:p,total:v,progress:v?p/v:void 0,bytes:y,rate:M||void 0,estimated:M&&v&&w?(v-p)/M:void 0,event:f,lengthComputable:v!=null,[n?"download":"upload"]:!0};t(E)},o)},$c=(t,n)=>{const o=t!=null;return[l=>n[0]({lengthComputable:o,total:t,loaded:l}),n[1]]},Gc=t=>(...n)=>gt.asap(()=>t(...n)),W_=Ci.hasStandardBrowserEnv?((t,n)=>o=>(o=new URL(o,Ci.origin),t.protocol===o.protocol&&t.host===o.host&&(n||t.port===o.port)))(new URL(Ci.origin),Ci.navigator&&/(msie|trident)/i.test(Ci.navigator.userAgent)):()=>!0,J_=Ci.hasStandardBrowserEnv?{write(t,n,o,l,c,f){const p=[t+"="+encodeURIComponent(n)];gt.isNumber(o)&&p.push("expires="+new Date(o).toGMTString()),gt.isString(l)&&p.push("path="+l),gt.isString(c)&&p.push("domain="+c),f===!0&&p.push("secure"),document.cookie=p.join("; ")},read(t){const n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function X_(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Y_(t,n){return n?t.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):t}function np(t,n){return t&&!X_(n)?Y_(t,n):n}const Vc=t=>t instanceof $i?{...t}:t;function Zr(t,n){n=n||{};const o={};function l(M,w,E,N){return gt.isPlainObject(M)&&gt.isPlainObject(w)?gt.merge.call({caseless:N},M,w):gt.isPlainObject(w)?gt.merge({},w):gt.isArray(w)?w.slice():w}function c(M,w,E,N){if(gt.isUndefined(w)){if(!gt.isUndefined(M))return l(void 0,M,E,N)}else return l(M,w,E,N)}function f(M,w){if(!gt.isUndefined(w))return l(void 0,w)}function p(M,w){if(gt.isUndefined(w)){if(!gt.isUndefined(M))return l(void 0,M)}else return l(void 0,w)}function v(M,w,E){if(E in n)return l(M,w);if(E in t)return l(void 0,M)}const y={url:f,method:f,data:f,baseURL:p,transformRequest:p,transformResponse:p,paramsSerializer:p,timeout:p,timeoutMessage:p,withCredentials:p,withXSRFToken:p,adapter:p,responseType:p,xsrfCookieName:p,xsrfHeaderName:p,onUploadProgress:p,onDownloadProgress:p,decompress:p,maxContentLength:p,maxBodyLength:p,beforeRedirect:p,transport:p,httpAgent:p,httpsAgent:p,cancelToken:p,socketPath:p,responseEncoding:p,validateStatus:v,headers:(M,w,E)=>c(Vc(M),Vc(w),E,!0)};return gt.forEach(Object.keys(Object.assign({},t,n)),function(w){const E=y[w]||c,N=E(t[w],n[w],w);gt.isUndefined(N)&&E!==v||(o[w]=N)}),o}const rp=t=>{const n=Zr({},t);let{data:o,withXSRFToken:l,xsrfHeaderName:c,xsrfCookieName:f,headers:p,auth:v}=n;n.headers=p=$i.from(p),n.url=Yf(np(n.baseURL,n.url),t.params,t.paramsSerializer),v&&p.set("Authorization","Basic "+btoa((v.username||"")+":"+(v.password?unescape(encodeURIComponent(v.password)):"")));let y;if(gt.isFormData(o)){if(Ci.hasStandardBrowserEnv||Ci.hasStandardBrowserWebWorkerEnv)p.setContentType(void 0);else if((y=p.getContentType())!==!1){const[M,...w]=y?y.split(";").map(E=>E.trim()).filter(Boolean):[];p.setContentType([M||"multipart/form-data",...w].join("; "))}}if(Ci.hasStandardBrowserEnv&&(l&&gt.isFunction(l)&&(l=l(n)),l||l!==!1&&W_(n.url))){const M=c&&f&&J_.read(f);M&&p.set(c,M)}return n},Q_=typeof XMLHttpRequest<"u",ty=Q_&&function(t){return new Promise(function(o,l){const c=rp(t);let f=c.data;const p=$i.from(c.headers).normalize();let{responseType:v,onUploadProgress:y,onDownloadProgress:M}=c,w,E,N,I,G;function K(){I&&I(),G&&G(),c.cancelToken&&c.cancelToken.unsubscribe(w),c.signal&&c.signal.removeEventListener("abort",w)}let X=new XMLHttpRequest;X.open(c.method.toUpperCase(),c.url,!0),X.timeout=c.timeout;function ut(){if(!X)return;const ht=$i.from("getAllResponseHeaders"in X&&X.getAllResponseHeaders()),dt={data:!v||v==="text"||v==="json"?X.responseText:X.response,status:X.status,statusText:X.statusText,headers:ht,config:t,request:X};ip(function(qt){o(qt),K()},function(qt){l(qt),K()},dt),X=null}"onloadend"in X?X.onloadend=ut:X.onreadystatechange=function(){!X||X.readyState!==4||X.status===0&&!(X.responseURL&&X.responseURL.indexOf("file:")===0)||setTimeout(ut)},X.onabort=function(){X&&(l(new ye("Request aborted",ye.ECONNABORTED,t,X)),X=null)},X.onerror=function(){l(new ye("Network Error",ye.ERR_NETWORK,t,X)),X=null},X.ontimeout=function(){let yt=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded";const dt=c.transitional||Qf;c.timeoutErrorMessage&&(yt=c.timeoutErrorMessage),l(new ye(yt,dt.clarifyTimeoutError?ye.ETIMEDOUT:ye.ECONNABORTED,t,X)),X=null},f===void 0&&p.setContentType(null),"setRequestHeader"in X&&gt.forEach(p.toJSON(),function(yt,dt){X.setRequestHeader(dt,yt)}),gt.isUndefined(c.withCredentials)||(X.withCredentials=!!c.withCredentials),v&&v!=="json"&&(X.responseType=c.responseType),M&&([N,G]=dl(M,!0),X.addEventListener("progress",N)),y&&X.upload&&([E,I]=dl(y),X.upload.addEventListener("progress",E),X.upload.addEventListener("loadend",I)),(c.cancelToken||c.signal)&&(w=ht=>{X&&(l(!ht||ht.type?new Os(null,t,X):ht),X.abort(),X=null)},c.cancelToken&&c.cancelToken.subscribe(w),c.signal&&(c.signal.aborted?w():c.signal.addEventListener("abort",w)));const ft=Z_(c.url);if(ft&&Ci.protocols.indexOf(ft)===-1){l(new ye("Unsupported protocol "+ft+":",ye.ERR_BAD_REQUEST,t));return}X.send(f||null)})},ey=(t,n)=>{const{length:o}=t=t?t.filter(Boolean):[];if(n||o){let l=new AbortController,c;const f=function(M){if(!c){c=!0,v();const w=M instanceof Error?M:this.reason;l.abort(w instanceof ye?w:new Os(w instanceof Error?w.message:w))}};let p=n&&setTimeout(()=>{p=null,f(new ye(`timeout ${n} of ms exceeded`,ye.ETIMEDOUT))},n);const v=()=>{t&&(p&&clearTimeout(p),p=null,t.forEach(M=>{M.unsubscribe?M.unsubscribe(f):M.removeEventListener("abort",f)}),t=null)};t.forEach(M=>M.addEventListener("abort",f));const{signal:y}=l;return y.unsubscribe=()=>gt.asap(v),y}},iy=function*(t,n){let o=t.byteLength;if(o<n){yield t;return}let l=0,c;for(;l<o;)c=l+n,yield t.slice(l,c),l=c},ny=async function*(t,n){for await(const o of ry(t))yield*iy(o,n)},ry=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const n=t.getReader();try{for(;;){const{done:o,value:l}=await n.read();if(o)break;yield l}}finally{await n.cancel()}},Hc=(t,n,o,l)=>{const c=ny(t,n);let f=0,p,v=y=>{p||(p=!0,l&&l(y))};return new ReadableStream({async pull(y){try{const{done:M,value:w}=await c.next();if(M){v(),y.close();return}let E=w.byteLength;if(o){let N=f+=E;o(N)}y.enqueue(new Uint8Array(w))}catch(M){throw v(M),M}},cancel(y){return v(y),c.return()}},{highWaterMark:2})},Ol=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",sp=Ol&&typeof ReadableStream=="function",sy=Ol&&(typeof TextEncoder=="function"?(t=>n=>t.encode(n))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),op=(t,...n)=>{try{return!!t(...n)}catch{return!1}},oy=sp&&op(()=>{let t=!1;const n=new Request(Ci.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!n}),Zc=64*1024,ph=sp&&op(()=>gt.isReadableStream(new Response("").body)),fl={stream:ph&&(t=>t.body)};Ol&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(n=>{!fl[n]&&(fl[n]=gt.isFunction(t[n])?o=>o[n]():(o,l)=>{throw new ye(`Response type '${n}' is not supported`,ye.ERR_NOT_SUPPORT,l)})})})(new Response);const ay=async t=>{if(t==null)return 0;if(gt.isBlob(t))return t.size;if(gt.isSpecCompliantForm(t))return(await new Request(Ci.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(gt.isArrayBufferView(t)||gt.isArrayBuffer(t))return t.byteLength;if(gt.isURLSearchParams(t)&&(t=t+""),gt.isString(t))return(await sy(t)).byteLength},ly=async(t,n)=>{const o=gt.toFiniteNumber(t.getContentLength());return o??ay(n)},uy=Ol&&(async t=>{let{url:n,method:o,data:l,signal:c,cancelToken:f,timeout:p,onDownloadProgress:v,onUploadProgress:y,responseType:M,headers:w,withCredentials:E="same-origin",fetchOptions:N}=rp(t);M=M?(M+"").toLowerCase():"text";let I=ey([c,f&&f.toAbortSignal()],p),G;const K=I&&I.unsubscribe&&(()=>{I.unsubscribe()});let X;try{if(y&&oy&&o!=="get"&&o!=="head"&&(X=await ly(w,l))!==0){let dt=new Request(n,{method:"POST",body:l,duplex:"half"}),Mt;if(gt.isFormData(l)&&(Mt=dt.headers.get("content-type"))&&w.setContentType(Mt),dt.body){const[qt,Ut]=$c(X,dl(Gc(y)));l=Hc(dt.body,Zc,qt,Ut)}}gt.isString(E)||(E=E?"include":"omit");const ut="credentials"in Request.prototype;G=new Request(n,{...N,signal:I,method:o.toUpperCase(),headers:w.normalize().toJSON(),body:l,duplex:"half",credentials:ut?E:void 0});let ft=await fetch(G);const ht=ph&&(M==="stream"||M==="response");if(ph&&(v||ht&&K)){const dt={};["status","statusText","headers"].forEach(Vt=>{dt[Vt]=ft[Vt]});const Mt=gt.toFiniteNumber(ft.headers.get("content-length")),[qt,Ut]=v&&$c(Mt,dl(Gc(v),!0))||[];ft=new Response(Hc(ft.body,Zc,qt,()=>{Ut&&Ut(),K&&K()}),dt)}M=M||"text";let yt=await fl[gt.findKey(fl,M)||"text"](ft,t);return!ht&&K&&K(),await new Promise((dt,Mt)=>{ip(dt,Mt,{data:yt,headers:$i.from(ft.headers),status:ft.status,statusText:ft.statusText,config:t,request:G})})}catch(ut){throw K&&K(),ut&&ut.name==="TypeError"&&/fetch/i.test(ut.message)?Object.assign(new ye("Network Error",ye.ERR_NETWORK,t,G),{cause:ut.cause||ut}):ye.from(ut,ut&&ut.code,t,G)}}),mh={http:C_,xhr:ty,fetch:uy};gt.forEach(mh,(t,n)=>{if(t){try{Object.defineProperty(t,"name",{value:n})}catch{}Object.defineProperty(t,"adapterName",{value:n})}});const qc=t=>`- ${t}`,hy=t=>gt.isFunction(t)||t===null||t===!1,ap={getAdapter:t=>{t=gt.isArray(t)?t:[t];const{length:n}=t;let o,l;const c={};for(let f=0;f<n;f++){o=t[f];let p;if(l=o,!hy(o)&&(l=mh[(p=String(o)).toLowerCase()],l===void 0))throw new ye(`Unknown adapter '${p}'`);if(l)break;c[p||"#"+f]=l}if(!l){const f=Object.entries(c).map(([v,y])=>`adapter ${v} `+(y===!1?"is not supported by the environment":"is not available in the build"));let p=n?f.length>1?`since :
`+f.map(qc).join(`
`):" "+qc(f[0]):"as no adapter specified";throw new ye("There is no suitable adapter to dispatch the request "+p,"ERR_NOT_SUPPORT")}return l},adapters:mh};function Zu(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Os(null,t)}function Kc(t){return Zu(t),t.headers=$i.from(t.headers),t.data=Hu.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),ap.getAdapter(t.adapter||ta.adapter)(t).then(function(l){return Zu(t),l.data=Hu.call(t,t.transformResponse,l),l.headers=$i.from(l.headers),l},function(l){return ep(l)||(Zu(t),l&&l.response&&(l.response.data=Hu.call(t,t.transformResponse,l.response),l.response.headers=$i.from(l.response.headers))),Promise.reject(l)})}const lp="1.7.9",Il={};["object","boolean","number","function","string","symbol"].forEach((t,n)=>{Il[t]=function(l){return typeof l===t||"a"+(n<1?"n ":" ")+t}});const Wc={};Il.transitional=function(n,o,l){function c(f,p){return"[Axios v"+lp+"] Transitional option '"+f+"'"+p+(l?". "+l:"")}return(f,p,v)=>{if(n===!1)throw new ye(c(p," has been removed"+(o?" in "+o:"")),ye.ERR_DEPRECATED);return o&&!Wc[p]&&(Wc[p]=!0,console.warn(c(p," has been deprecated since v"+o+" and will be removed in the near future"))),n?n(f,p,v):!0}};Il.spelling=function(n){return(o,l)=>(console.warn(`${l} is likely a misspelling of ${n}`),!0)};function cy(t,n,o){if(typeof t!="object")throw new ye("options must be an object",ye.ERR_BAD_OPTION_VALUE);const l=Object.keys(t);let c=l.length;for(;c-- >0;){const f=l[c],p=n[f];if(p){const v=t[f],y=v===void 0||p(v,f,t);if(y!==!0)throw new ye("option "+f+" must be "+y,ye.ERR_BAD_OPTION_VALUE);continue}if(o!==!0)throw new ye("Unknown option "+f,ye.ERR_BAD_OPTION)}}const tl={assertOptions:cy,validators:Il},En=tl.validators;let Gr=class{constructor(n){this.defaults=n,this.interceptors={request:new jc,response:new jc}}async request(n,o){try{return await this._request(n,o)}catch(l){if(l instanceof Error){let c={};Error.captureStackTrace?Error.captureStackTrace(c):c=new Error;const f=c.stack?c.stack.replace(/^.+\n/,""):"";try{l.stack?f&&!String(l.stack).endsWith(f.replace(/^.+\n.+\n/,""))&&(l.stack+=`
`+f):l.stack=f}catch{}}throw l}}_request(n,o){typeof n=="string"?(o=o||{},o.url=n):o=n||{},o=Zr(this.defaults,o);const{transitional:l,paramsSerializer:c,headers:f}=o;l!==void 0&&tl.assertOptions(l,{silentJSONParsing:En.transitional(En.boolean),forcedJSONParsing:En.transitional(En.boolean),clarifyTimeoutError:En.transitional(En.boolean)},!1),c!=null&&(gt.isFunction(c)?o.paramsSerializer={serialize:c}:tl.assertOptions(c,{encode:En.function,serialize:En.function},!0)),tl.assertOptions(o,{baseUrl:En.spelling("baseURL"),withXsrfToken:En.spelling("withXSRFToken")},!0),o.method=(o.method||this.defaults.method||"get").toLowerCase();let p=f&&gt.merge(f.common,f[o.method]);f&&gt.forEach(["delete","get","head","post","put","patch","common"],G=>{delete f[G]}),o.headers=$i.concat(p,f);const v=[];let y=!0;this.interceptors.request.forEach(function(K){typeof K.runWhen=="function"&&K.runWhen(o)===!1||(y=y&&K.synchronous,v.unshift(K.fulfilled,K.rejected))});const M=[];this.interceptors.response.forEach(function(K){M.push(K.fulfilled,K.rejected)});let w,E=0,N;if(!y){const G=[Kc.bind(this),void 0];for(G.unshift.apply(G,v),G.push.apply(G,M),N=G.length,w=Promise.resolve(o);E<N;)w=w.then(G[E++],G[E++]);return w}N=v.length;let I=o;for(E=0;E<N;){const G=v[E++],K=v[E++];try{I=G(I)}catch(X){K.call(this,X);break}}try{w=Kc.call(this,I)}catch(G){return Promise.reject(G)}for(E=0,N=M.length;E<N;)w=w.then(M[E++],M[E++]);return w}getUri(n){n=Zr(this.defaults,n);const o=np(n.baseURL,n.url);return Yf(o,n.params,n.paramsSerializer)}};gt.forEach(["delete","get","head","options"],function(n){Gr.prototype[n]=function(o,l){return this.request(Zr(l||{},{method:n,url:o,data:(l||{}).data}))}});gt.forEach(["post","put","patch"],function(n){function o(l){return function(f,p,v){return this.request(Zr(v||{},{method:n,headers:l?{"Content-Type":"multipart/form-data"}:{},url:f,data:p}))}}Gr.prototype[n]=o(),Gr.prototype[n+"Form"]=o(!0)});let dy=class up{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let o;this.promise=new Promise(function(f){o=f});const l=this;this.promise.then(c=>{if(!l._listeners)return;let f=l._listeners.length;for(;f-- >0;)l._listeners[f](c);l._listeners=null}),this.promise.then=c=>{let f;const p=new Promise(v=>{l.subscribe(v),f=v}).then(c);return p.cancel=function(){l.unsubscribe(f)},p},n(function(f,p,v){l.reason||(l.reason=new Os(f,p,v),o(l.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const o=this._listeners.indexOf(n);o!==-1&&this._listeners.splice(o,1)}toAbortSignal(){const n=new AbortController,o=l=>{n.abort(l)};return this.subscribe(o),n.signal.unsubscribe=()=>this.unsubscribe(o),n.signal}static source(){let n;return{token:new up(function(c){n=c}),cancel:n}}};function fy(t){return function(o){return t.apply(null,o)}}function py(t){return gt.isObject(t)&&t.isAxiosError===!0}const gh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(gh).forEach(([t,n])=>{gh[n]=t});function hp(t){const n=new Gr(t),o=jf(Gr.prototype.request,n);return gt.extend(o,Gr.prototype,n,{allOwnKeys:!0}),gt.extend(o,n,null,{allOwnKeys:!0}),o.create=function(c){return hp(Zr(t,c))},o}const We=hp(ta);We.Axios=Gr;We.CanceledError=Os;We.CancelToken=dy;We.isCancel=ep;We.VERSION=lp;We.toFormData=Rl;We.AxiosError=ye;We.Cancel=We.CanceledError;We.all=function(n){return Promise.all(n)};We.spread=fy;We.isAxiosError=py;We.mergeConfig=Zr;We.AxiosHeaders=$i;We.formToJSON=t=>tp(gt.isHTMLForm(t)?new FormData(t):t);We.getAdapter=ap.getAdapter;We.HttpStatusCode=gh;We.default=We;const{Axios:W3,AxiosError:J3,CanceledError:X3,isCancel:Y3,CancelToken:Q3,VERSION:tw,all:ew,Cancel:iw,isAxiosError:nw,spread:rw,toFormData:sw,AxiosHeaders:ow,HttpStatusCode:aw,formToJSON:lw,getAdapter:uw,mergeConfig:hw}=We,Te=We.create({baseURL:"/api",headers:{"Content-Type":"application/json"},withCredentials:!0});function my(t){var l;const o=`; ${document.cookie}`.split(`; ${t}=`);return o.length===2&&((l=o.pop())==null?void 0:l.split(";").shift())||null}Te.interceptors.request.use(t=>{const n=my("access_token");return n&&(t.headers.Authorization=`Bearer ${n}`),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));Te.interceptors.response.use(t=>t,async t=>{var o,l,c,f;if(!t.config)return console.error("Erreur de configuration de la requête:",t),Promise.reject(t);const n=t.config;return(o=n.url)!=null&&o.includes("/token/")||(l=n.url)!=null&&l.includes("/login/")||(c=n.url)!=null&&c.includes("/register/")||((f=t.response)==null?void 0:f.status)===401&&!n._retry&&(n._retry=!0,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"),Promise.reject(t)});Te.defaults.baseURL="/api";Te.defaults.headers.common["Content-Type"]="application/json";Te.defaults.withCredentials=!0;function pl(t){var l;const o=`; ${document.cookie}`.split(`; ${t}=`);return o.length===2&&((l=o.pop())==null?void 0:l.split(";").shift())||null}Te.interceptors.request.use(t=>{const n=pl("access_token");return n&&(t.headers.Authorization=`Bearer ${n}`),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));Te.interceptors.response.use(t=>t,async t=>{var l,c;const n=Tn(),o=t.config;if(((l=t.response)==null?void 0:l.status)===401&&!o._retry&&!((c=o.url)!=null&&c.includes("/token/refresh/"))){o._retry=!0;try{if(!pl("access_token"))throw new Error("No token available");await n.refreshToken();const p=pl("access_token");if(p)return o.headers.Authorization=`Bearer ${p}`,Te(o)}catch(f){console.error("Token refresh failed:",f),await n.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(t)});function gy(t,n,o=1){const l=new Date;l.setTime(l.getTime()+o*24*60*60*1e3);const c=`expires=${l.toUTCString()}`;document.cookie=`${t}=${n};${c};path=/;secure;samesite=Strict`}const Tn=zh("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,concessionnaires:[]}),getters:{isAdmin:t=>{var n;return((n=t.user)==null?void 0:n.user_type)==="admin"},isDealer:t=>{var n;return((n=t.user)==null?void 0:n.user_type)==="dealer"},isClient:t=>{var n;return((n=t.user)==null?void 0:n.user_type)==="client"},currentUser:t=>t.user,hasDealer:t=>{var n;return!!((n=t.user)!=null&&n.dealer)}},actions:{async initialize(t){if(console.log("Initializing auth store with state:",t),!t){console.log("No initial state, attempting to restore session...");const o=await this.restoreSession();return this.initialized=!0,o}if(t.isAuthenticated&&t.user)return this.user=t.user,this.isAuthenticated=!0,this.mustChangePassword=t.user.must_change_password||!1,this.initialized=!0,!0;const n=await this.restoreSession();return this.initialized=!0,n},async restoreSession(){console.log("Attempting to restore session...");try{if(!pl("access_token"))return console.log("No token found, skipping session restore"),this.isAuthenticated=!1,this.user=null,!1;const n=await Te.post("/token/refresh/");return n.data.user?(this.user=n.data.user,this.isAuthenticated=!0,this.mustChangePassword=n.data.user.must_change_password||!1,console.log("Session restored successfully"),!0):(await this.fetchUserProfile(),!0)}catch(t){return console.error("Failed to restore session:",t),this.isAuthenticated=!1,this.user=null,!1}},async login(t,n){var o,l,c;try{const f=await Te.post("/token/",{username:t,password:n});if(!f.data.access)throw new Error("Token d'accès non reçu");document.cookie=`access_token=${f.data.access}; path=/; secure; samesite=Strict`;const p=await this.fetchUserProfile();return this.user=p,this.isAuthenticated=!0,!0}catch(f){throw this.isAuthenticated=!1,this.user=null,((o=f.response)==null?void 0:o.status)===401?new Error("Identifiants incorrects"):(c=(l=f.response)==null?void 0:l.data)!=null&&c.detail?new Error(f.response.data.detail):f}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const t=await Te.get("/users/me/");return this.user=t.data,this.isAuthenticated=!0,this.mustChangePassword=t.data.must_change_password||!1,t.data}catch(t){throw this.isAuthenticated=!1,this.user=null,t}},async changePassword(t,n){try{console.log("Attempting to change password...");const o=await Te.post("/users/change_password/",{old_password:t,password:n});return console.log("Password change response:",o.data),this.user={...this.user,must_change_password:!1},o.data}catch(o){throw console.error("Password change error:",o),o}},async refreshToken(){var t,n,o,l;try{console.log("Attempting to refresh token...");const c=await Te.post("/token/refresh/",{},{withCredentials:!0}),{access:f}=c.data;if(!f)throw new Error("No access token received");return console.log("Token refreshed successfully"),gy("access_token",f,1),this.isAuthenticated=!0,f}catch(c){throw console.error("Error refreshing token:",{status:(t=c.response)==null?void 0:t.status,data:(n=c.response)==null?void 0:n.data}),(((o=c.response)==null?void 0:o.status)===401||((l=c.response)==null?void 0:l.status)===403)&&(console.log("Token refresh failed with auth error, logging out"),await this.logout()),c}},async fetchConcessionnaires(){this.loading=!0;try{const t=await Te.get("/users/",{params:{role:"dealer"}});this.concessionnaires=t.data}catch(t){throw this.error="Erreur lors de la récupération des concessionnaires",t}finally{this.loading=!1}},async setConcessionnaire(t,n){this.loading=!0;try{await Te.patch(`/users/${t}/`,{concessionnaire:n}),this.user&&this.user.id===t&&(this.user.dealer=n)}catch(o){throw this.error="Erreur lors de la mise à jour du concessionnaire",o}finally{this.loading=!1}},async createUser(t){this.loading=!0;try{return(await Te.post("/users/",t)).data}catch(n){throw this.error="Erreur lors de la création de l'utilisateur",n}finally{this.loading=!1}},async updateUserRole(t,n){this.loading=!0;try{const o=await Te.patch(`/users/${t}/`,{role:n});return this.user&&this.user.id===t&&(this.user.user_type=n),o.data}catch(o){throw this.error="Erreur lors de la mise à jour du rôle",o}finally{this.loading=!1}},async updateUserEmail(t){var n;this.loading=!0;try{const o=await Te.patch(`/users/${(n=this.user)==null?void 0:n.id}/`,{email:t});return this.user&&(this.user.email=t),o.data}catch(o){throw this.error="Erreur lors de la mise à jour de l'email",o}finally{this.loading=!1}},checkAccess(t){return this.user?t.includes(this.user.user_type):!1}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const ks=typeof document<"u";function cp(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function _y(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&cp(t.default)}const Re=Object.assign;function qu(t,n){const o={};for(const l in n){const c=n[l];o[l]=mn(c)?c.map(t):t(c)}return o}const To=()=>{},mn=Array.isArray,dp=/#/g,yy=/&/g,vy=/\//g,by=/=/g,xy=/\?/g,fp=/\+/g,wy=/%5B/g,Ly=/%5D/g,pp=/%5E/g,Cy=/%60/g,mp=/%7B/g,ky=/%7C/g,gp=/%7D/g,Ey=/%20/g;function Gh(t){return encodeURI(""+t).replace(ky,"|").replace(wy,"[").replace(Ly,"]")}function My(t){return Gh(t).replace(mp,"{").replace(gp,"}").replace(pp,"^")}function _h(t){return Gh(t).replace(fp,"%2B").replace(Ey,"+").replace(dp,"%23").replace(yy,"%26").replace(Cy,"`").replace(mp,"{").replace(gp,"}").replace(pp,"^")}function Py(t){return _h(t).replace(by,"%3D")}function By(t){return Gh(t).replace(dp,"%23").replace(xy,"%3F")}function Sy(t){return t==null?"":By(t).replace(vy,"%2F")}function Go(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const Ay=/\/$/,Ty=t=>t.replace(Ay,"");function Ku(t,n,o="/"){let l,c={},f="",p="";const v=n.indexOf("#");let y=n.indexOf("?");return v<y&&v>=0&&(y=-1),y>-1&&(l=n.slice(0,y),f=n.slice(y+1,v>-1?v:n.length),c=t(f)),v>-1&&(l=l||n.slice(0,v),p=n.slice(v,n.length)),l=Iy(l??n,o),{fullPath:l+(f&&"?")+f+p,path:l,query:c,hash:Go(p)}}function Dy(t,n){const o=n.query?t(n.query):"";return n.path+(o&&"?")+o+(n.hash||"")}function Jc(t,n){return!n||!t.toLowerCase().startsWith(n.toLowerCase())?t:t.slice(n.length)||"/"}function Ry(t,n,o){const l=n.matched.length-1,c=o.matched.length-1;return l>-1&&l===c&&As(n.matched[l],o.matched[c])&&_p(n.params,o.params)&&t(n.query)===t(o.query)&&n.hash===o.hash}function As(t,n){return(t.aliasOf||t)===(n.aliasOf||n)}function _p(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const o in t)if(!Oy(t[o],n[o]))return!1;return!0}function Oy(t,n){return mn(t)?Xc(t,n):mn(n)?Xc(n,t):t===n}function Xc(t,n){return mn(n)?t.length===n.length&&t.every((o,l)=>o===n[l]):t.length===1&&t[0]===n}function Iy(t,n){if(t.startsWith("/"))return t;if(!t)return n;const o=n.split("/"),l=t.split("/"),c=l[l.length-1];(c===".."||c===".")&&l.push("");let f=o.length-1,p,v;for(p=0;p<l.length;p++)if(v=l[p],v!==".")if(v==="..")f>1&&f--;else break;return o.slice(0,f).join("/")+"/"+l.slice(p).join("/")}const cr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Vo;(function(t){t.pop="pop",t.push="push"})(Vo||(Vo={}));var Do;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Do||(Do={}));function Fy(t){if(!t)if(ks){const n=document.querySelector("base");t=n&&n.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Ty(t)}const Ny=/^[^#]+#/;function zy(t,n){return t.replace(Ny,"#")+n}function jy(t,n){const o=document.documentElement.getBoundingClientRect(),l=t.getBoundingClientRect();return{behavior:n.behavior,left:l.left-o.left-(n.left||0),top:l.top-o.top-(n.top||0)}}const Fl=()=>({left:window.scrollX,top:window.scrollY});function Uy(t){let n;if("el"in t){const o=t.el,l=typeof o=="string"&&o.startsWith("#"),c=typeof o=="string"?l?document.getElementById(o.slice(1)):document.querySelector(o):o;if(!c)return;n=jy(c,t)}else n=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.scrollX,n.top!=null?n.top:window.scrollY)}function Yc(t,n){return(history.state?history.state.position-n:-1)+t}const yh=new Map;function $y(t,n){yh.set(t,n)}function Gy(t){const n=yh.get(t);return yh.delete(t),n}let Vy=()=>location.protocol+"//"+location.host;function yp(t,n){const{pathname:o,search:l,hash:c}=n,f=t.indexOf("#");if(f>-1){let v=c.includes(t.slice(f))?t.slice(f).length:1,y=c.slice(v);return y[0]!=="/"&&(y="/"+y),Jc(y,"")}return Jc(o,t)+l+c}function Hy(t,n,o,l){let c=[],f=[],p=null;const v=({state:N})=>{const I=yp(t,location),G=o.value,K=n.value;let X=0;if(N){if(o.value=I,n.value=N,p&&p===G){p=null;return}X=K?N.position-K.position:0}else l(I);c.forEach(ut=>{ut(o.value,G,{delta:X,type:Vo.pop,direction:X?X>0?Do.forward:Do.back:Do.unknown})})};function y(){p=o.value}function M(N){c.push(N);const I=()=>{const G=c.indexOf(N);G>-1&&c.splice(G,1)};return f.push(I),I}function w(){const{history:N}=window;N.state&&N.replaceState(Re({},N.state,{scroll:Fl()}),"")}function E(){for(const N of f)N();f=[],window.removeEventListener("popstate",v),window.removeEventListener("beforeunload",w)}return window.addEventListener("popstate",v),window.addEventListener("beforeunload",w,{passive:!0}),{pauseListeners:y,listen:M,destroy:E}}function Qc(t,n,o,l=!1,c=!1){return{back:t,current:n,forward:o,replaced:l,position:window.history.length,scroll:c?Fl():null}}function Zy(t){const{history:n,location:o}=window,l={value:yp(t,o)},c={value:n.state};c.value||f(l.value,{back:null,current:l.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function f(y,M,w){const E=t.indexOf("#"),N=E>-1?(o.host&&document.querySelector("base")?t:t.slice(E))+y:Vy()+t+y;try{n[w?"replaceState":"pushState"](M,"",N),c.value=M}catch(I){console.error(I),o[w?"replace":"assign"](N)}}function p(y,M){const w=Re({},n.state,Qc(c.value.back,y,c.value.forward,!0),M,{position:c.value.position});f(y,w,!0),l.value=y}function v(y,M){const w=Re({},c.value,n.state,{forward:y,scroll:Fl()});f(w.current,w,!0);const E=Re({},Qc(l.value,y,null),{position:w.position+1},M);f(y,E,!1),l.value=y}return{location:l,state:c,push:v,replace:p}}function qy(t){t=Fy(t);const n=Zy(t),o=Hy(t,n.state,n.location,n.replace);function l(f,p=!0){p||o.pauseListeners(),history.go(f)}const c=Re({location:"",base:t,go:l,createHref:zy.bind(null,t)},n,o);return Object.defineProperty(c,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(c,"state",{enumerable:!0,get:()=>n.state.value}),c}function Ky(t){return typeof t=="string"||t&&typeof t=="object"}function vp(t){return typeof t=="string"||typeof t=="symbol"}const bp=Symbol("");var td;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(td||(td={}));function Ts(t,n){return Re(new Error,{type:t,[bp]:!0},n)}function Hn(t,n){return t instanceof Error&&bp in t&&(n==null||!!(t.type&n))}const ed="[^/]+?",Wy={sensitive:!1,strict:!1,start:!0,end:!0},Jy=/[.+*?^${}()[\]/\\]/g;function Xy(t,n){const o=Re({},Wy,n),l=[];let c=o.start?"^":"";const f=[];for(const M of t){const w=M.length?[]:[90];o.strict&&!M.length&&(c+="/");for(let E=0;E<M.length;E++){const N=M[E];let I=40+(o.sensitive?.25:0);if(N.type===0)E||(c+="/"),c+=N.value.replace(Jy,"\\$&"),I+=40;else if(N.type===1){const{value:G,repeatable:K,optional:X,regexp:ut}=N;f.push({name:G,repeatable:K,optional:X});const ft=ut||ed;if(ft!==ed){I+=10;try{new RegExp(`(${ft})`)}catch(yt){throw new Error(`Invalid custom RegExp for param "${G}" (${ft}): `+yt.message)}}let ht=K?`((?:${ft})(?:/(?:${ft}))*)`:`(${ft})`;E||(ht=X&&M.length<2?`(?:/${ht})`:"/"+ht),X&&(ht+="?"),c+=ht,I+=20,X&&(I+=-8),K&&(I+=-20),ft===".*"&&(I+=-50)}w.push(I)}l.push(w)}if(o.strict&&o.end){const M=l.length-1;l[M][l[M].length-1]+=.7000000000000001}o.strict||(c+="/?"),o.end?c+="$":o.strict&&!c.endsWith("/")&&(c+="(?:/|$)");const p=new RegExp(c,o.sensitive?"":"i");function v(M){const w=M.match(p),E={};if(!w)return null;for(let N=1;N<w.length;N++){const I=w[N]||"",G=f[N-1];E[G.name]=I&&G.repeatable?I.split("/"):I}return E}function y(M){let w="",E=!1;for(const N of t){(!E||!w.endsWith("/"))&&(w+="/"),E=!1;for(const I of N)if(I.type===0)w+=I.value;else if(I.type===1){const{value:G,repeatable:K,optional:X}=I,ut=G in M?M[G]:"";if(mn(ut)&&!K)throw new Error(`Provided param "${G}" is an array but it is not repeatable (* or + modifiers)`);const ft=mn(ut)?ut.join("/"):ut;if(!ft)if(X)N.length<2&&(w.endsWith("/")?w=w.slice(0,-1):E=!0);else throw new Error(`Missing required param "${G}"`);w+=ft}}return w||"/"}return{re:p,score:l,keys:f,parse:v,stringify:y}}function Yy(t,n){let o=0;for(;o<t.length&&o<n.length;){const l=n[o]-t[o];if(l)return l;o++}return t.length<n.length?t.length===1&&t[0]===80?-1:1:t.length>n.length?n.length===1&&n[0]===80?1:-1:0}function xp(t,n){let o=0;const l=t.score,c=n.score;for(;o<l.length&&o<c.length;){const f=Yy(l[o],c[o]);if(f)return f;o++}if(Math.abs(c.length-l.length)===1){if(id(l))return 1;if(id(c))return-1}return c.length-l.length}function id(t){const n=t[t.length-1];return t.length>0&&n[n.length-1]<0}const Qy={type:0,value:""},tv=/[a-zA-Z0-9_]/;function ev(t){if(!t)return[[]];if(t==="/")return[[Qy]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function n(I){throw new Error(`ERR (${o})/"${M}": ${I}`)}let o=0,l=o;const c=[];let f;function p(){f&&c.push(f),f=[]}let v=0,y,M="",w="";function E(){M&&(o===0?f.push({type:0,value:M}):o===1||o===2||o===3?(f.length>1&&(y==="*"||y==="+")&&n(`A repeatable param (${M}) must be alone in its segment. eg: '/:ids+.`),f.push({type:1,value:M,regexp:w,repeatable:y==="*"||y==="+",optional:y==="*"||y==="?"})):n("Invalid state to consume buffer"),M="")}function N(){M+=y}for(;v<t.length;){if(y=t[v++],y==="\\"&&o!==2){l=o,o=4;continue}switch(o){case 0:y==="/"?(M&&E(),p()):y===":"?(E(),o=1):N();break;case 4:N(),o=l;break;case 1:y==="("?o=2:tv.test(y)?N():(E(),o=0,y!=="*"&&y!=="?"&&y!=="+"&&v--);break;case 2:y===")"?w[w.length-1]=="\\"?w=w.slice(0,-1)+y:o=3:w+=y;break;case 3:E(),o=0,y!=="*"&&y!=="?"&&y!=="+"&&v--,w="";break;default:n("Unknown state");break}}return o===2&&n(`Unfinished custom RegExp for param "${M}"`),E(),p(),c}function iv(t,n,o){const l=Xy(ev(t.path),o),c=Re(l,{record:t,parent:n,children:[],alias:[]});return n&&!c.record.aliasOf==!n.record.aliasOf&&n.children.push(c),c}function nv(t,n){const o=[],l=new Map;n=od({strict:!1,end:!0,sensitive:!1},n);function c(E){return l.get(E)}function f(E,N,I){const G=!I,K=rd(E);K.aliasOf=I&&I.record;const X=od(n,E),ut=[K];if("alias"in E){const yt=typeof E.alias=="string"?[E.alias]:E.alias;for(const dt of yt)ut.push(rd(Re({},K,{components:I?I.record.components:K.components,path:dt,aliasOf:I?I.record:K})))}let ft,ht;for(const yt of ut){const{path:dt}=yt;if(N&&dt[0]!=="/"){const Mt=N.record.path,qt=Mt[Mt.length-1]==="/"?"":"/";yt.path=N.record.path+(dt&&qt+dt)}if(ft=iv(yt,N,X),I?I.alias.push(ft):(ht=ht||ft,ht!==ft&&ht.alias.push(ft),G&&E.name&&!sd(ft)&&p(E.name)),wp(ft)&&y(ft),K.children){const Mt=K.children;for(let qt=0;qt<Mt.length;qt++)f(Mt[qt],ft,I&&I.children[qt])}I=I||ft}return ht?()=>{p(ht)}:To}function p(E){if(vp(E)){const N=l.get(E);N&&(l.delete(E),o.splice(o.indexOf(N),1),N.children.forEach(p),N.alias.forEach(p))}else{const N=o.indexOf(E);N>-1&&(o.splice(N,1),E.record.name&&l.delete(E.record.name),E.children.forEach(p),E.alias.forEach(p))}}function v(){return o}function y(E){const N=ov(E,o);o.splice(N,0,E),E.record.name&&!sd(E)&&l.set(E.record.name,E)}function M(E,N){let I,G={},K,X;if("name"in E&&E.name){if(I=l.get(E.name),!I)throw Ts(1,{location:E});X=I.record.name,G=Re(nd(N.params,I.keys.filter(ht=>!ht.optional).concat(I.parent?I.parent.keys.filter(ht=>ht.optional):[]).map(ht=>ht.name)),E.params&&nd(E.params,I.keys.map(ht=>ht.name))),K=I.stringify(G)}else if(E.path!=null)K=E.path,I=o.find(ht=>ht.re.test(K)),I&&(G=I.parse(K),X=I.record.name);else{if(I=N.name?l.get(N.name):o.find(ht=>ht.re.test(N.path)),!I)throw Ts(1,{location:E,currentLocation:N});X=I.record.name,G=Re({},N.params,E.params),K=I.stringify(G)}const ut=[];let ft=I;for(;ft;)ut.unshift(ft.record),ft=ft.parent;return{name:X,path:K,params:G,matched:ut,meta:sv(ut)}}t.forEach(E=>f(E));function w(){o.length=0,l.clear()}return{addRoute:f,resolve:M,removeRoute:p,clearRoutes:w,getRoutes:v,getRecordMatcher:c}}function nd(t,n){const o={};for(const l of n)l in t&&(o[l]=t[l]);return o}function rd(t){const n={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:rv(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(n,"mods",{value:{}}),n}function rv(t){const n={},o=t.props||!1;if("component"in t)n.default=o;else for(const l in t.components)n[l]=typeof o=="object"?o[l]:o;return n}function sd(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function sv(t){return t.reduce((n,o)=>Re(n,o.meta),{})}function od(t,n){const o={};for(const l in t)o[l]=l in n?n[l]:t[l];return o}function ov(t,n){let o=0,l=n.length;for(;o!==l;){const f=o+l>>1;xp(t,n[f])<0?l=f:o=f+1}const c=av(t);return c&&(l=n.lastIndexOf(c,l-1)),l}function av(t){let n=t;for(;n=n.parent;)if(wp(n)&&xp(t,n)===0)return n}function wp({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function lv(t){const n={};if(t===""||t==="?")return n;const l=(t[0]==="?"?t.slice(1):t).split("&");for(let c=0;c<l.length;++c){const f=l[c].replace(fp," "),p=f.indexOf("="),v=Go(p<0?f:f.slice(0,p)),y=p<0?null:Go(f.slice(p+1));if(v in n){let M=n[v];mn(M)||(M=n[v]=[M]),M.push(y)}else n[v]=y}return n}function ad(t){let n="";for(let o in t){const l=t[o];if(o=Py(o),l==null){l!==void 0&&(n+=(n.length?"&":"")+o);continue}(mn(l)?l.map(f=>f&&_h(f)):[l&&_h(l)]).forEach(f=>{f!==void 0&&(n+=(n.length?"&":"")+o,f!=null&&(n+="="+f))})}return n}function uv(t){const n={};for(const o in t){const l=t[o];l!==void 0&&(n[o]=mn(l)?l.map(c=>c==null?null:""+c):l==null?l:""+l)}return n}const hv=Symbol(""),ld=Symbol(""),Nl=Symbol(""),Vh=Symbol(""),vh=Symbol("");function vo(){let t=[];function n(l){return t.push(l),()=>{const c=t.indexOf(l);c>-1&&t.splice(c,1)}}function o(){t=[]}return{add:n,list:()=>t.slice(),reset:o}}function mr(t,n,o,l,c,f=p=>p()){const p=l&&(l.enterCallbacks[c]=l.enterCallbacks[c]||[]);return()=>new Promise((v,y)=>{const M=N=>{N===!1?y(Ts(4,{from:o,to:n})):N instanceof Error?y(N):Ky(N)?y(Ts(2,{from:n,to:N})):(p&&l.enterCallbacks[c]===p&&typeof N=="function"&&p.push(N),v())},w=f(()=>t.call(l&&l.instances[c],n,o,M));let E=Promise.resolve(w);t.length<3&&(E=E.then(M)),E.catch(N=>y(N))})}function Wu(t,n,o,l,c=f=>f()){const f=[];for(const p of t)for(const v in p.components){let y=p.components[v];if(!(n!=="beforeRouteEnter"&&!p.instances[v]))if(cp(y)){const w=(y.__vccOpts||y)[n];w&&f.push(mr(w,o,l,p,v,c))}else{let M=y();f.push(()=>M.then(w=>{if(!w)throw new Error(`Couldn't resolve component "${v}" at "${p.path}"`);const E=_y(w)?w.default:w;p.mods[v]=w,p.components[v]=E;const I=(E.__vccOpts||E)[n];return I&&mr(I,o,l,p,v,c)()}))}}return f}function ud(t){const n=an(Nl),o=an(Vh),l=Ie(()=>{const y=mi(t.to);return n.resolve(y)}),c=Ie(()=>{const{matched:y}=l.value,{length:M}=y,w=y[M-1],E=o.matched;if(!w||!E.length)return-1;const N=E.findIndex(As.bind(null,w));if(N>-1)return N;const I=hd(y[M-2]);return M>1&&hd(w)===I&&E[E.length-1].path!==I?E.findIndex(As.bind(null,y[M-2])):N}),f=Ie(()=>c.value>-1&&pv(o.params,l.value.params)),p=Ie(()=>c.value>-1&&c.value===o.matched.length-1&&_p(o.params,l.value.params));function v(y={}){if(fv(y)){const M=n[mi(t.replace)?"replace":"push"](mi(t.to)).catch(To);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>M),M}return Promise.resolve()}return{route:l,href:Ie(()=>l.value.href),isActive:f,isExactActive:p,navigate:v}}function cv(t){return t.length===1?t[0]:t}const dv=Wi({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:ud,setup(t,{slots:n}){const o=Yn(ud(t)),{options:l}=an(Nl),c=Ie(()=>({[cd(t.activeClass,l.linkActiveClass,"router-link-active")]:o.isActive,[cd(t.exactActiveClass,l.linkExactActiveClass,"router-link-exact-active")]:o.isExactActive}));return()=>{const f=n.default&&cv(n.default(o));return t.custom?f:Df("a",{"aria-current":o.isExactActive?t.ariaCurrentValue:null,href:o.href,onClick:o.navigate,class:c.value},f)}}}),el=dv;function fv(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const n=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return t.preventDefault&&t.preventDefault(),!0}}function pv(t,n){for(const o in n){const l=n[o],c=t[o];if(typeof l=="string"){if(l!==c)return!1}else if(!mn(c)||c.length!==l.length||l.some((f,p)=>f!==c[p]))return!1}return!0}function hd(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const cd=(t,n,o)=>t??n??o,mv=Wi({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:n,slots:o}){const l=an(vh),c=Ie(()=>t.route||l.value),f=an(ld,0),p=Ie(()=>{let M=mi(f);const{matched:w}=c.value;let E;for(;(E=w[M])&&!E.components;)M++;return M}),v=Ie(()=>c.value.matched[p.value]);Ka(ld,Ie(()=>p.value+1)),Ka(hv,v),Ka(vh,c);const y=Xt();return Jn(()=>[y.value,v.value,t.name],([M,w,E],[N,I,G])=>{w&&(w.instances[E]=M,I&&I!==w&&M&&M===N&&(w.leaveGuards.size||(w.leaveGuards=I.leaveGuards),w.updateGuards.size||(w.updateGuards=I.updateGuards))),M&&w&&(!I||!As(w,I)||!N)&&(w.enterCallbacks[E]||[]).forEach(K=>K(M))},{flush:"post"}),()=>{const M=c.value,w=t.name,E=v.value,N=E&&E.components[w];if(!N)return dd(o.default,{Component:N,route:M});const I=E.props[w],G=I?I===!0?M.params:typeof I=="function"?I(M):I:null,X=Df(N,Re({},G,n,{onVnodeUnmounted:ut=>{ut.component.isUnmounted&&(E.instances[w]=null)},ref:y}));return dd(o.default,{Component:X,route:M})||X}}});function dd(t,n){if(!t)return null;const o=t(n);return o.length===1?o[0]:o}const Lp=mv;function gv(t){const n=nv(t.routes,t),o=t.parseQuery||lv,l=t.stringifyQuery||ad,c=t.history,f=vo(),p=vo(),v=vo(),y=Um(cr);let M=cr;ks&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const w=qu.bind(null,mt=>""+mt),E=qu.bind(null,Sy),N=qu.bind(null,Go);function I(mt,Rt){let It,Ht;return vp(mt)?(It=n.getRecordMatcher(mt),Ht=Rt):Ht=mt,n.addRoute(Ht,It)}function G(mt){const Rt=n.getRecordMatcher(mt);Rt&&n.removeRoute(Rt)}function K(){return n.getRoutes().map(mt=>mt.record)}function X(mt){return!!n.getRecordMatcher(mt)}function ut(mt,Rt){if(Rt=Re({},Rt||y.value),typeof mt=="string"){const tt=Ku(o,mt,Rt.path),vt=n.resolve({path:tt.path},Rt),wt=c.createHref(tt.fullPath);return Re(tt,vt,{params:N(vt.params),hash:Go(tt.hash),redirectedFrom:void 0,href:wt})}let It;if(mt.path!=null)It=Re({},mt,{path:Ku(o,mt.path,Rt.path).path});else{const tt=Re({},mt.params);for(const vt in tt)tt[vt]==null&&delete tt[vt];It=Re({},mt,{params:E(tt)}),Rt.params=E(Rt.params)}const Ht=n.resolve(It,Rt),Le=mt.hash||"";Ht.params=w(N(Ht.params));const j=Dy(l,Re({},mt,{hash:My(Le),path:Ht.path})),V=c.createHref(j);return Re({fullPath:j,hash:Le,query:l===ad?uv(mt.query):mt.query||{}},Ht,{redirectedFrom:void 0,href:V})}function ft(mt){return typeof mt=="string"?Ku(o,mt,y.value.path):Re({},mt)}function ht(mt,Rt){if(M!==mt)return Ts(8,{from:Rt,to:mt})}function yt(mt){return qt(mt)}function dt(mt){return yt(Re(ft(mt),{replace:!0}))}function Mt(mt){const Rt=mt.matched[mt.matched.length-1];if(Rt&&Rt.redirect){const{redirect:It}=Rt;let Ht=typeof It=="function"?It(mt):It;return typeof Ht=="string"&&(Ht=Ht.includes("?")||Ht.includes("#")?Ht=ft(Ht):{path:Ht},Ht.params={}),Re({query:mt.query,hash:mt.hash,params:Ht.path!=null?{}:mt.params},Ht)}}function qt(mt,Rt){const It=M=ut(mt),Ht=y.value,Le=mt.state,j=mt.force,V=mt.replace===!0,tt=Mt(It);if(tt)return qt(Re(ft(tt),{state:typeof tt=="object"?Re({},Le,tt.state):Le,force:j,replace:V}),Rt||It);const vt=It;vt.redirectedFrom=Rt;let wt;return!j&&Ry(l,Ht,It)&&(wt=Ts(16,{to:vt,from:Ht}),se(Ht,Ht,!0,!1)),(wt?Promise.resolve(wt):Pt(vt,Ht)).catch(_t=>Hn(_t)?Hn(_t,2)?_t:At(_t):pt(_t,vt,Ht)).then(_t=>{if(_t){if(Hn(_t,2))return qt(Re({replace:V},ft(_t.to),{state:typeof _t.to=="object"?Re({},Le,_t.to.state):Le,force:j}),Rt||vt)}else _t=Qt(vt,Ht,!0,V,Le);return St(vt,Ht,_t),_t})}function Ut(mt,Rt){const It=ht(mt,Rt);return It?Promise.reject(It):Promise.resolve()}function Vt(mt){const Rt=pe.values().next().value;return Rt&&typeof Rt.runWithContext=="function"?Rt.runWithContext(mt):mt()}function Pt(mt,Rt){let It;const[Ht,Le,j]=_v(mt,Rt);It=Wu(Ht.reverse(),"beforeRouteLeave",mt,Rt);for(const tt of Ht)tt.leaveGuards.forEach(vt=>{It.push(mr(vt,mt,Rt))});const V=Ut.bind(null,mt,Rt);return It.push(V),$t(It).then(()=>{It=[];for(const tt of f.list())It.push(mr(tt,mt,Rt));return It.push(V),$t(It)}).then(()=>{It=Wu(Le,"beforeRouteUpdate",mt,Rt);for(const tt of Le)tt.updateGuards.forEach(vt=>{It.push(mr(vt,mt,Rt))});return It.push(V),$t(It)}).then(()=>{It=[];for(const tt of j)if(tt.beforeEnter)if(mn(tt.beforeEnter))for(const vt of tt.beforeEnter)It.push(mr(vt,mt,Rt));else It.push(mr(tt.beforeEnter,mt,Rt));return It.push(V),$t(It)}).then(()=>(mt.matched.forEach(tt=>tt.enterCallbacks={}),It=Wu(j,"beforeRouteEnter",mt,Rt,Vt),It.push(V),$t(It))).then(()=>{It=[];for(const tt of p.list())It.push(mr(tt,mt,Rt));return It.push(V),$t(It)}).catch(tt=>Hn(tt,8)?tt:Promise.reject(tt))}function St(mt,Rt,It){v.list().forEach(Ht=>Vt(()=>Ht(mt,Rt,It)))}function Qt(mt,Rt,It,Ht,Le){const j=ht(mt,Rt);if(j)return j;const V=Rt===cr,tt=ks?history.state:{};It&&(Ht||V?c.replace(mt.fullPath,Re({scroll:V&&tt&&tt.scroll},Le)):c.push(mt.fullPath,Le)),y.value=mt,se(mt,Rt,It,V),At()}let ce;function Wt(){ce||(ce=c.listen((mt,Rt,It)=>{if(!he.listening)return;const Ht=ut(mt),Le=Mt(Ht);if(Le){qt(Re(Le,{replace:!0,force:!0}),Ht).catch(To);return}M=Ht;const j=y.value;ks&&$y(Yc(j.fullPath,It.delta),Fl()),Pt(Ht,j).catch(V=>Hn(V,12)?V:Hn(V,2)?(qt(Re(ft(V.to),{force:!0}),Ht).then(tt=>{Hn(tt,20)&&!It.delta&&It.type===Vo.pop&&c.go(-1,!1)}).catch(To),Promise.reject()):(It.delta&&c.go(-It.delta,!1),pt(V,Ht,j))).then(V=>{V=V||Qt(Ht,j,!1),V&&(It.delta&&!Hn(V,8)?c.go(-It.delta,!1):It.type===Vo.pop&&Hn(V,20)&&c.go(-1,!1)),St(Ht,j,V)}).catch(To)}))}let ot=vo(),$=vo(),bt;function pt(mt,Rt,It){At(mt);const Ht=$.list();return Ht.length?Ht.forEach(Le=>Le(mt,Rt,It)):console.error(mt),Promise.reject(mt)}function re(){return bt&&y.value!==cr?Promise.resolve():new Promise((mt,Rt)=>{ot.add([mt,Rt])})}function At(mt){return bt||(bt=!mt,Wt(),ot.list().forEach(([Rt,It])=>mt?It(mt):Rt()),ot.reset()),mt}function se(mt,Rt,It,Ht){const{scrollBehavior:Le}=t;if(!ks||!Le)return Promise.resolve();const j=!It&&Gy(Yc(mt.fullPath,0))||(Ht||!It)&&history.state&&history.state.scroll||null;return Cl().then(()=>Le(mt,Rt,j)).then(V=>V&&Uy(V)).catch(V=>pt(V,mt,Rt))}const xt=mt=>c.go(mt);let ue;const pe=new Set,he={currentRoute:y,listening:!0,addRoute:I,removeRoute:G,clearRoutes:n.clearRoutes,hasRoute:X,getRoutes:K,resolve:ut,options:t,push:yt,replace:dt,go:xt,back:()=>xt(-1),forward:()=>xt(1),beforeEach:f.add,beforeResolve:p.add,afterEach:v.add,onError:$.add,isReady:re,install(mt){const Rt=this;mt.component("RouterLink",el),mt.component("RouterView",Lp),mt.config.globalProperties.$router=Rt,Object.defineProperty(mt.config.globalProperties,"$route",{enumerable:!0,get:()=>mi(y)}),ks&&!ue&&y.value===cr&&(ue=!0,yt(c.location).catch(Le=>{}));const It={};for(const Le in cr)Object.defineProperty(It,Le,{get:()=>y.value[Le],enumerable:!0});mt.provide(Nl,Rt),mt.provide(Vh,Xd(It)),mt.provide(vh,y);const Ht=mt.unmount;pe.add(mt),mt.unmount=function(){pe.delete(mt),pe.size<1&&(M=cr,ce&&ce(),ce=null,y.value=cr,ue=!1,bt=!1),Ht()}}};function $t(mt){return mt.reduce((Rt,It)=>Rt.then(()=>Vt(It)),Promise.resolve())}return he}function _v(t,n){const o=[],l=[],c=[],f=Math.max(n.matched.length,t.matched.length);for(let p=0;p<f;p++){const v=n.matched[p];v&&(t.matched.find(M=>As(M,v))?l.push(v):o.push(v));const y=t.matched[p];y&&(n.matched.find(M=>As(M,y))||c.push(y))}return[o,l,c]}function ea(){return an(Nl)}function cw(t){return an(Vh)}var Wn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function yv(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}var kp=yv,vv=typeof Wn=="object"&&Wn&&Wn.Object===Object&&Wn,bv=vv,xv=bv,wv=typeof self=="object"&&self&&self.Object===Object&&self,Lv=xv||wv||Function("return this")(),Ep=Lv,Cv=Ep,kv=function(){return Cv.Date.now()},Ev=kv,Mv=/\s/;function Pv(t){for(var n=t.length;n--&&Mv.test(t.charAt(n)););return n}var Bv=Pv,Sv=Bv,Av=/^\s+/;function Tv(t){return t&&t.slice(0,Sv(t)+1).replace(Av,"")}var Dv=Tv,Rv=Ep,Ov=Rv.Symbol,Mp=Ov,fd=Mp,Pp=Object.prototype,Iv=Pp.hasOwnProperty,Fv=Pp.toString,bo=fd?fd.toStringTag:void 0;function Nv(t){var n=Iv.call(t,bo),o=t[bo];try{t[bo]=void 0;var l=!0}catch{}var c=Fv.call(t);return l&&(n?t[bo]=o:delete t[bo]),c}var zv=Nv,jv=Object.prototype,Uv=jv.toString;function $v(t){return Uv.call(t)}var Gv=$v,pd=Mp,Vv=zv,Hv=Gv,Zv="[object Null]",qv="[object Undefined]",md=pd?pd.toStringTag:void 0;function Kv(t){return t==null?t===void 0?qv:Zv:md&&md in Object(t)?Vv(t):Hv(t)}var Wv=Kv;function Jv(t){return t!=null&&typeof t=="object"}var Xv=Jv,Yv=Wv,Qv=Xv,t4="[object Symbol]";function e4(t){return typeof t=="symbol"||Qv(t)&&Yv(t)==t4}var i4=e4,n4=Dv,gd=kp,r4=i4,_d=NaN,s4=/^[-+]0x[0-9a-f]+$/i,o4=/^0b[01]+$/i,a4=/^0o[0-7]+$/i,l4=parseInt;function u4(t){if(typeof t=="number")return t;if(r4(t))return _d;if(gd(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=gd(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=n4(t);var o=o4.test(t);return o||a4.test(t)?l4(t.slice(2),o?2:8):s4.test(t)?_d:+t}var h4=u4,c4=kp,Ju=Ev,yd=h4,d4="Expected a function",f4=Math.max,p4=Math.min;function m4(t,n,o){var l,c,f,p,v,y,M=0,w=!1,E=!1,N=!0;if(typeof t!="function")throw new TypeError(d4);n=yd(n)||0,c4(o)&&(w=!!o.leading,E="maxWait"in o,f=E?f4(yd(o.maxWait)||0,n):f,N="trailing"in o?!!o.trailing:N);function I(Mt){var qt=l,Ut=c;return l=c=void 0,M=Mt,p=t.apply(Ut,qt),p}function G(Mt){return M=Mt,v=setTimeout(ut,n),w?I(Mt):p}function K(Mt){var qt=Mt-y,Ut=Mt-M,Vt=n-qt;return E?p4(Vt,f-Ut):Vt}function X(Mt){var qt=Mt-y,Ut=Mt-M;return y===void 0||qt>=n||qt<0||E&&Ut>=f}function ut(){var Mt=Ju();if(X(Mt))return ft(Mt);v=setTimeout(ut,K(Mt))}function ft(Mt){return v=void 0,N&&l?I(Mt):(l=c=void 0,p)}function ht(){v!==void 0&&clearTimeout(v),M=0,l=y=c=v=void 0}function yt(){return v===void 0?p:ft(Ju())}function dt(){var Mt=Ju(),qt=X(Mt);if(l=arguments,c=this,y=Mt,qt){if(v===void 0)return G(y);if(E)return clearTimeout(v),v=setTimeout(ut,n),I(y)}return v===void 0&&(v=setTimeout(ut,n)),p}return dt.cancel=ht,dt.flush=yt,dt}var g4=m4;const _4=Cp(g4),y4={class:"relative"},v4={key:0,class:"absolute w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto z-[1001]"},b4=["onClick"],x4=Wi({__name:"SearchBar",emits:["select-location"],setup(t,{emit:n}){const o=Xt(""),l=Xt([]),c=n,f=_4(async y=>{if(y.length<3){l.value=[];return}try{const w=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(y)}`)).json();l.value=w}catch(M){console.error("Erreur lors de la recherche d'adresse:",M),l.value=[]}},300);function p(){f(o.value)}function v(y){o.value=y.display_name,l.value=[],c("select-location",{lat:parseFloat(y.lat),lng:parseFloat(y.lon)})}return(y,M)=>(Ot(),Ft("div",y4,[we(B("input",{"onUpdate:modelValue":M[0]||(M[0]=w=>o.value=w),onInput:p,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[Ae,o.value]]),l.value.length>0?(Ot(),Ft("div",v4,[(Ot(!0),Ft(Ke,null,ji(l.value,w=>(Ot(),Ft("div",{key:w.place_id,onClick:E=>v(w),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},Yt(w.display_name),9,b4))),128))])):ve("",!0)]))}}),Bp=(t,n)=>{const o=t.__vccOpts||t;for(const[l,c]of n)o[l]=c;return o},w4=Bp(x4,[["__scopeId","data-v-4cda7c14"]]),L4={class:"h-screen flex flex-col overflow-hidden"},C4={key:0,class:"bg-white shadow-sm z-[2000]"},k4={class:"mx-auto px-4 sm:px-6 lg:px-8"},E4={class:"flex h-16 items-center justify-between"},M4={class:"flex items-center space-x-8"},P4={class:"hidden md:flex space-x-6"},B4={class:"flex-1 max-w-2xl mx-8"},S4={class:"flex items-center space-x-4"},A4={class:"relative"},T4={class:"flex flex-col items-end"},D4={class:"text-sm font-medium text-gray-700"},R4={key:0,class:"text-xs text-gray-500"},O4=["src","alt"],I4={key:0,class:"absolute right-0 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3000]"},F4={class:"flex-1 overflow-hidden"},N4=Wi({__name:"App",setup(t){const n=ea(),o=Tn(),l=Xt(!1),c=Ie(()=>{const K=o.user;return K!=null&&K.first_name&&(K!=null&&K.last_name)?`${K.first_name} ${K.last_name.toUpperCase()}`:(K==null?void 0:K.username)||""}),f=Ie(()=>{var X;const K=(X=o.user)==null?void 0:X.user_type;switch(console.log("User type:",K),K){case"admin":return"Accès administrateur";case"dealer":return"Accès concessionnaire";case"client":return"Accès client";default:return""}}),p=Ie(()=>{var K;return((K=o.user)==null?void 0:K.user_type)==="admin"}),v=Xt(""),y=Ie(()=>o.isAuthenticated),M=[{name:"Carte",to:"/"},{name:"Plans",to:"/plans"}],w=Ie(()=>{var X;if(!y.value)return[];const K=[...M];return p.value?K.push({name:"Utilisateurs",to:"/users"}):((X=o.user)==null?void 0:X.user_type)==="dealer"&&K.push({name:"Clients",to:"/clients"}),K}),E=Ie(()=>y.value?[{name:"Mon profil",to:"/profile"}]:[]);async function N(){try{await o.logout(),n.push("/login")}catch(K){console.error("Erreur lors de la déconnexion:",K)}}function I(K){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:K.lat,lng:K.lng,zoom:16}}))}wr(async()=>{console.log("App mounted, checking auth...");try{localStorage.getItem("token")?(console.log("Token found, checking auth..."),await o.checkAuth(),await o.fetchUserProfile()):console.log("No token found")}catch(K){console.error("Auth check error:",K),n.push("/login")}});const G=Ie(()=>{const K="IrrigationDesign";if(!y.value)return`${K} - Connexion`;const X=n.currentRoute.value,ft={home:"Carte",plans:"Plans",users:"Utilisateurs",profile:"Mon profil",selectDealer:"Sélection du concessionnaire",changePassword:"Changement de mot de passe",map:"Carte"}[X.name]||"";return ft?`${K} - ${ft}`:K});return Jn(G,K=>{document.title=K},{immediate:!0}),(K,X)=>(Ot(),Ft("div",L4,[y.value?(Ot(),Ft("header",C4,[B("nav",k4,[B("div",E4,[B("div",M4,[oi(mi(el),{to:"/",class:"text-xl font-semibold text-primary-600"},{default:Mo(()=>X[2]||(X[2]=[Ui(" IrrigationDesign ")])),_:1}),B("div",P4,[(Ot(!0),Ft(Ke,null,ji(w.value,ut=>(Ot(),No(mi(el),{key:ut.name,to:ut.to,class:vr(["text-sm font-medium transition-colors duration-200",[K.$route.path===ut.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Mo(()=>[Ui(Yt(ut.name),1)]),_:2},1032,["to","class"]))),128))])]),B("div",B4,[oi(w4,{onSelectLocation:I})]),B("div",S4,[X[3]||(X[3]=B("button",{class:"p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},[B("span",{class:"sr-only"},"Voir les notifications"),B("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})])],-1)),B("div",A4,[B("button",{onClick:X[0]||(X[0]=ut=>l.value=!l.value),class:"flex items-center space-x-3 focus:outline-none"},[B("div",T4,[B("span",D4,Yt(c.value),1),f.value?(Ot(),Ft("span",R4,Yt(f.value),1)):ve("",!0)]),B("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:v.value||"https://ui-avatars.com/api/?name="+encodeURIComponent(c.value),alt:c.value},null,8,O4)]),l.value?(Ot(),Ft("div",I4,[(Ot(!0),Ft(Ke,null,ji(E.value,ut=>(Ot(),No(mi(el),{key:ut.name,to:ut.to,class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:X[1]||(X[1]=ft=>l.value=!1)},{default:Mo(()=>[Ui(Yt(ut.name),1)]),_:2},1032,["to"]))),128)),B("button",{onClick:N,class:"block w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-gray-50"}," Déconnexion ")])):ve("",!0)])])])])])):ve("",!0),B("main",F4,[oi(mi(Lp))])]))}}),z4="modulepreload",j4=function(t){return"/"+t},vd={},Va=function(n,o,l){let c=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),v=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));c=Promise.allSettled(o.map(y=>{if(y=j4(y),y in vd)return;vd[y]=!0;const M=y.endsWith(".css"),w=M?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${w}`))return;const E=document.createElement("link");if(E.rel=M?"stylesheet":z4,M||(E.as="script"),E.crossOrigin="",E.href=y,v&&E.setAttribute("nonce",v),document.head.appendChild(E),M)return new Promise((N,I)=>{E.addEventListener("load",N),E.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${y}`)))})}))}function f(p){const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=p,window.dispatchEvent(v),!v.defaultPrevented)throw p}return c.then(p=>{for(const v of p||[])v.status==="rejected"&&f(v.reason);return n().catch(f)})},U4={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},$4={class:"max-w-md w-full space-y-8"},G4={class:"space-y-4"},V4={class:"mt-1"},H4={class:"mt-1"},Z4={class:"mt-1"},q4={key:0,class:"rounded-md bg-red-50 p-4"},K4={class:"flex"},W4={class:"ml-3"},J4={class:"text-sm font-medium text-red-800"},X4={key:1,class:"rounded-md bg-yellow-50 p-4"},Y4={class:"flex"},Q4={class:"ml-3"},tb={class:"mt-2 text-sm text-yellow-700"},eb={class:"list-disc pl-5 space-y-1"},ib=["disabled"],nb={class:"absolute left-0 inset-y-0 flex items-center pl-3"},rb={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},sb={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ob=Wi({__name:"ChangePasswordForm",setup(t){const n=ea(),o=Tn(),l=Yn({oldPassword:"",newPassword:"",confirmPassword:""}),c=Xt(!1),f=Xt("");wr(()=>{var M,w;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:o.isAuthenticated,userId:(M=o.user)==null?void 0:M.id,mustChangePassword:(w=o.user)==null?void 0:w.must_change_password})});const p=Ie(()=>{const M=[];return l.newPassword&&l.newPassword.length<8&&M.push("Le nouveau mot de passe doit contenir au moins 8 caractères"),l.newPassword&&l.confirmPassword&&l.newPassword!==l.confirmPassword&&M.push("Les mots de passe ne correspondent pas"),M}),v=Ie(()=>l.oldPassword.length>0&&l.newPassword.length>=8&&l.newPassword===l.confirmPassword);async function y(){var M,w,E,N,I,G,K,X;if(!v.value){f.value="Veuillez corriger les erreurs avant de continuer";return}if(!((M=o.user)!=null&&M.id)){f.value="Erreur : utilisateur non identifié";return}c.value=!0,f.value="";try{console.log("Submitting password change..."),await o.changePassword(l.oldPassword,l.newPassword),console.log("Password changed successfully"),n.push("/")}catch(ut){console.error("Password change failed:",ut),(E=(w=ut.response)==null?void 0:w.data)!=null&&E.detail?f.value=ut.response.data.detail:(I=(N=ut.response)==null?void 0:N.data)!=null&&I.old_password?f.value=ut.response.data.old_password[0]:(K=(G=ut.response)==null?void 0:G.data)!=null&&K.password?f.value=ut.response.data.password[0]:((X=ut.response)==null?void 0:X.status)===401?(f.value="Session expirée, veuillez vous reconnecter",await o.logout(),n.push("/login")):f.value="Une erreur est survenue lors du changement de mot de passe"}finally{c.value=!1}}return(M,w)=>(Ot(),Ft("div",U4,[B("div",$4,[w[12]||(w[12]=B("div",null,[B("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),B("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de sécurité, vous devez changer votre mot de passe. ")],-1)),B("form",{class:"mt-8 space-y-6",onSubmit:Yo(y,["prevent"])},[B("div",G4,[B("div",null,[w[3]||(w[3]=B("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),B("div",V4,[we(B("input",{id:"old-password","onUpdate:modelValue":w[0]||(w[0]=E=>l.oldPassword=E),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[Ae,l.oldPassword]])])]),B("div",null,[w[4]||(w[4]=B("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),B("div",H4,[we(B("input",{id:"new-password","onUpdate:modelValue":w[1]||(w[1]=E=>l.newPassword=E),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[Ae,l.newPassword]])]),w[5]||(w[5]=B("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractères ",-1))]),B("div",null,[w[6]||(w[6]=B("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),B("div",Z4,[we(B("input",{id:"confirm-password","onUpdate:modelValue":w[2]||(w[2]=E=>l.confirmPassword=E),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[Ae,l.confirmPassword]])])])]),f.value?(Ot(),Ft("div",q4,[B("div",K4,[w[7]||(w[7]=B("div",{class:"flex-shrink-0"},[B("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),B("div",W4,[B("h3",J4,Yt(f.value),1)])])])):ve("",!0),p.value.length>0?(Ot(),Ft("div",X4,[B("div",Y4,[w[9]||(w[9]=B("div",{class:"flex-shrink-0"},[B("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),B("div",Q4,[w[8]||(w[8]=B("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),B("div",tb,[B("ul",eb,[(Ot(!0),Ft(Ke,null,ji(p.value,(E,N)=>(Ot(),Ft("li",{key:N},Yt(E),1))),128))])])])])])):ve("",!0),B("div",null,[B("button",{type:"submit",disabled:c.value||!v.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[B("span",nb,[c.value?(Ot(),Ft("svg",sb,w[11]||(w[11]=[B("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),B("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Ot(),Ft("svg",rb,w[10]||(w[10]=[B("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),Ui(" "+Yt(c.value?"Modification en cours...":"Changer le mot de passe"),1)],8,ib)])],32)])]))}}),ab={class:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8"},lb={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},ub={class:"bg-white py-8 px-4 shadow-sm rounded-lg sm:px-10"},hb={key:0,class:"rounded-md bg-red-50 p-4"},cb={class:"flex"},db={class:"ml-3"},fb={class:"text-sm font-medium text-red-800"},pb={class:"mt-1"},mb={class:"mt-1"},gb={class:"flex items-center justify-between"},_b={class:"flex items-center"},yb={class:"text-sm"},vb=["disabled"],bb={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},xb=Wi({__name:"LoginView",setup(t){const n=ea(),o=Tn(),l=Xt(!1),c=Xt(null),f=Yn({username:"",password:"",rememberMe:!1});wr(()=>{var v;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE),(v=window.INITIAL_STATE)!=null&&v.isAuthenticated&&(console.log("User is authenticated, redirecting to home"),n.push("/"))});async function p(){var v,y,M,w,E,N;l.value=!0,c.value=null;try{if(!f.username||!f.password){c.value="Veuillez remplir tous les champs";return}await o.login(f.username,f.password),(v=o.user)!=null&&v.must_change_password?n.push("/change-password"):n.push("/")}catch(I){console.error("Login error:",I),c.value=((M=(y=I==null?void 0:I.response)==null?void 0:y.data)==null?void 0:M.detail)||((N=(E=(w=I==null?void 0:I.response)==null?void 0:w.data)==null?void 0:E.non_field_errors)==null?void 0:N[0])||(I==null?void 0:I.message)||"Erreur lors de la connexion"}finally{l.value=!1}}return(v,y)=>{const M=f0("router-link");return Ot(),Ft("div",ab,[y[9]||(y[9]=B("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[B("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," IrrigationDesign "),B("p",{class:"mt-2 text-center text-sm text-gray-600"}," Connectez-vous pour accéder à votre espace ")],-1)),B("div",lb,[B("div",ub,[B("form",{class:"space-y-6",onSubmit:Yo(p,["prevent"])},[c.value?(Ot(),Ft("div",hb,[B("div",cb,[y[3]||(y[3]=B("div",{class:"flex-shrink-0"},[B("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),B("div",db,[B("h3",fb,Yt(c.value),1)])])])):ve("",!0),B("div",null,[y[4]||(y[4]=B("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),B("div",pb,[we(B("input",{id:"username","onUpdate:modelValue":y[0]||(y[0]=w=>f.username=w),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[Ae,f.username]])])]),B("div",null,[y[5]||(y[5]=B("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),B("div",mb,[we(B("input",{id:"password","onUpdate:modelValue":y[1]||(y[1]=w=>f.password=w),name:"password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Mot de passe"},null,512),[[Ae,f.password]])])]),B("div",gb,[B("div",_b,[we(B("input",{id:"remember-me","onUpdate:modelValue":y[2]||(y[2]=w=>f.rememberMe=w),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[kg,f.rememberMe]]),y[6]||(y[6]=B("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),B("div",yb,[oi(M,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Mo(()=>y[7]||(y[7]=[Ui(" Mot de passe oublié ? ")])),_:1})])]),B("div",null,[B("button",{type:"submit",disabled:l.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[l.value?(Ot(),Ft("svg",bb,y[8]||(y[8]=[B("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),B("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):ve("",!0),Ui(" "+Yt(l.value?"Connexion en cours...":"Se connecter"),1)],8,vb)])],32)])])])}}});var bh={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,n){(function(o,l){l(n)})(Wn,function(o){var l="1.9.4";function c(e){var s,h,m,x;for(h=1,m=arguments.length;h<m;h++){x=arguments[h];for(s in x)e[s]=x[s]}return e}var f=Object.create||function(){function e(){}return function(s){return e.prototype=s,new e}}();function p(e,s){var h=Array.prototype.slice;if(e.bind)return e.bind.apply(e,h.call(arguments,1));var m=h.call(arguments,2);return function(){return e.apply(s,m.length?m.concat(h.call(arguments)):arguments)}}var v=0;function y(e){return"_leaflet_id"in e||(e._leaflet_id=++v),e._leaflet_id}function M(e,s,h){var m,x,S,H;return H=function(){m=!1,x&&(S.apply(h,x),x=!1)},S=function(){m?x=arguments:(e.apply(h,arguments),setTimeout(H,s),m=!0)},S}function w(e,s,h){var m=s[1],x=s[0],S=m-x;return e===m&&h?e:((e-x)%S+S)%S+x}function E(){return!1}function N(e,s){if(s===!1)return e;var h=Math.pow(10,s===void 0?6:s);return Math.round(e*h)/h}function I(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function G(e){return I(e).split(/\s+/)}function K(e,s){Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?f(e.options):{});for(var h in s)e.options[h]=s[h];return e.options}function X(e,s,h){var m=[];for(var x in e)m.push(encodeURIComponent(h?x.toUpperCase():x)+"="+encodeURIComponent(e[x]));return(!s||s.indexOf("?")===-1?"?":"&")+m.join("&")}var ut=/\{ *([\w_ -]+) *\}/g;function ft(e,s){return e.replace(ut,function(h,m){var x=s[m];if(x===void 0)throw new Error("No value provided for variable "+h);return typeof x=="function"&&(x=x(s)),x})}var ht=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function yt(e,s){for(var h=0;h<e.length;h++)if(e[h]===s)return h;return-1}var dt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Mt(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var qt=0;function Ut(e){var s=+new Date,h=Math.max(0,16-(s-qt));return qt=s+h,window.setTimeout(e,h)}var Vt=window.requestAnimationFrame||Mt("RequestAnimationFrame")||Ut,Pt=window.cancelAnimationFrame||Mt("CancelAnimationFrame")||Mt("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function St(e,s,h){if(h&&Vt===Ut)e.call(s);else return Vt.call(window,p(e,s))}function Qt(e){e&&Pt.call(window,e)}var ce={__proto__:null,extend:c,create:f,bind:p,get lastId(){return v},stamp:y,throttle:M,wrapNum:w,falseFn:E,formatNum:N,trim:I,splitWords:G,setOptions:K,getParamString:X,template:ft,isArray:ht,indexOf:yt,emptyImageUrl:dt,requestFn:Vt,cancelFn:Pt,requestAnimFrame:St,cancelAnimFrame:Qt};function Wt(){}Wt.extend=function(e){var s=function(){K(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=s.__super__=this.prototype,m=f(h);m.constructor=s,s.prototype=m;for(var x in this)Object.prototype.hasOwnProperty.call(this,x)&&x!=="prototype"&&x!=="__super__"&&(s[x]=this[x]);return e.statics&&c(s,e.statics),e.includes&&(ot(e.includes),c.apply(null,[m].concat(e.includes))),c(m,e),delete m.statics,delete m.includes,m.options&&(m.options=h.options?f(h.options):{},c(m.options,e.options)),m._initHooks=[],m.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var S=0,H=m._initHooks.length;S<H;S++)m._initHooks[S].call(this)}},s},Wt.include=function(e){var s=this.prototype.options;return c(this.prototype,e),e.options&&(this.prototype.options=s,this.mergeOptions(e.options)),this},Wt.mergeOptions=function(e){return c(this.prototype.options,e),this},Wt.addInitHook=function(e){var s=Array.prototype.slice.call(arguments,1),h=typeof e=="function"?e:function(){this[e].apply(this,s)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function ot(e){if(!(typeof L>"u"||!L||!L.Mixin)){e=ht(e)?e:[e];for(var s=0;s<e.length;s++)e[s]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var $={on:function(e,s,h){if(typeof e=="object")for(var m in e)this._on(m,e[m],s);else{e=G(e);for(var x=0,S=e.length;x<S;x++)this._on(e[x],s,h)}return this},off:function(e,s,h){if(!arguments.length)delete this._events;else if(typeof e=="object")for(var m in e)this._off(m,e[m],s);else{e=G(e);for(var x=arguments.length===1,S=0,H=e.length;S<H;S++)x?this._off(e[S]):this._off(e[S],s,h)}return this},_on:function(e,s,h,m){if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}if(this._listens(e,s,h)===!1){h===this&&(h=void 0);var x={fn:s,ctx:h};m&&(x.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(x)}},_off:function(e,s,h){var m,x,S;if(this._events&&(m=this._events[e],!!m)){if(arguments.length===1){if(this._firingCount)for(x=0,S=m.length;x<S;x++)m[x].fn=E;delete this._events[e];return}if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}var H=this._listens(e,s,h);if(H!==!1){var et=m[H];this._firingCount&&(et.fn=E,this._events[e]=m=m.slice()),m.splice(H,1)}}},fire:function(e,s,h){if(!this.listens(e,h))return this;var m=c({},s,{type:e,target:this,sourceTarget:s&&s.sourceTarget||this});if(this._events){var x=this._events[e];if(x){this._firingCount=this._firingCount+1||1;for(var S=0,H=x.length;S<H;S++){var et=x[S],ct=et.fn;et.once&&this.off(e,ct,et.ctx),ct.call(et.ctx||this,m)}this._firingCount--}}return h&&this._propagateEvent(m),this},listens:function(e,s,h,m){typeof e!="string"&&console.warn('"string" type argument expected');var x=s;typeof s!="function"&&(m=!!s,x=void 0,h=void 0);var S=this._events&&this._events[e];if(S&&S.length&&this._listens(e,x,h)!==!1)return!0;if(m){for(var H in this._eventParents)if(this._eventParents[H].listens(e,s,h,m))return!0}return!1},_listens:function(e,s,h){if(!this._events)return!1;var m=this._events[e]||[];if(!s)return!!m.length;h===this&&(h=void 0);for(var x=0,S=m.length;x<S;x++)if(m[x].fn===s&&m[x].ctx===h)return x;return!1},once:function(e,s,h){if(typeof e=="object")for(var m in e)this._on(m,e[m],s,!0);else{e=G(e);for(var x=0,S=e.length;x<S;x++)this._on(e[x],s,h,!0)}return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[y(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[y(e)],this},_propagateEvent:function(e){for(var s in this._eventParents)this._eventParents[s].fire(e.type,c({layer:e.target,propagatedFrom:e.target},e),!0)}};$.addEventListener=$.on,$.removeEventListener=$.clearAllEventListeners=$.off,$.addOneTimeEventListener=$.once,$.fireEvent=$.fire,$.hasEventListeners=$.listens;var bt=Wt.extend($);function pt(e,s,h){this.x=h?Math.round(e):e,this.y=h?Math.round(s):s}var re=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};pt.prototype={clone:function(){return new pt(this.x,this.y)},add:function(e){return this.clone()._add(At(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(At(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new pt(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new pt(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=re(this.x),this.y=re(this.y),this},distanceTo:function(e){e=At(e);var s=e.x-this.x,h=e.y-this.y;return Math.sqrt(s*s+h*h)},equals:function(e){return e=At(e),e.x===this.x&&e.y===this.y},contains:function(e){return e=At(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+N(this.x)+", "+N(this.y)+")"}};function At(e,s,h){return e instanceof pt?e:ht(e)?new pt(e[0],e[1]):e==null?e:typeof e=="object"&&"x"in e&&"y"in e?new pt(e.x,e.y):new pt(e,s,h)}function se(e,s){if(e)for(var h=s?[e,s]:e,m=0,x=h.length;m<x;m++)this.extend(h[m])}se.prototype={extend:function(e){var s,h;if(!e)return this;if(e instanceof pt||typeof e[0]=="number"||"x"in e)s=h=At(e);else if(e=xt(e),s=e.min,h=e.max,!s||!h)return this;return!this.min&&!this.max?(this.min=s.clone(),this.max=h.clone()):(this.min.x=Math.min(s.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(s.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(e){return At((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return At(this.min.x,this.max.y)},getTopRight:function(){return At(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var s,h;return typeof e[0]=="number"||e instanceof pt?e=At(e):e=xt(e),e instanceof se?(s=e.min,h=e.max):s=h=e,s.x>=this.min.x&&h.x<=this.max.x&&s.y>=this.min.y&&h.y<=this.max.y},intersects:function(e){e=xt(e);var s=this.min,h=this.max,m=e.min,x=e.max,S=x.x>=s.x&&m.x<=h.x,H=x.y>=s.y&&m.y<=h.y;return S&&H},overlaps:function(e){e=xt(e);var s=this.min,h=this.max,m=e.min,x=e.max,S=x.x>s.x&&m.x<h.x,H=x.y>s.y&&m.y<h.y;return S&&H},isValid:function(){return!!(this.min&&this.max)},pad:function(e){var s=this.min,h=this.max,m=Math.abs(s.x-h.x)*e,x=Math.abs(s.y-h.y)*e;return xt(At(s.x-m,s.y-x),At(h.x+m,h.y+x))},equals:function(e){return e?(e=xt(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight())):!1}};function xt(e,s){return!e||e instanceof se?e:new se(e,s)}function ue(e,s){if(e)for(var h=s?[e,s]:e,m=0,x=h.length;m<x;m++)this.extend(h[m])}ue.prototype={extend:function(e){var s=this._southWest,h=this._northEast,m,x;if(e instanceof he)m=e,x=e;else if(e instanceof ue){if(m=e._southWest,x=e._northEast,!m||!x)return this}else return e?this.extend($t(e)||pe(e)):this;return!s&&!h?(this._southWest=new he(m.lat,m.lng),this._northEast=new he(x.lat,x.lng)):(s.lat=Math.min(m.lat,s.lat),s.lng=Math.min(m.lng,s.lng),h.lat=Math.max(x.lat,h.lat),h.lng=Math.max(x.lng,h.lng)),this},pad:function(e){var s=this._southWest,h=this._northEast,m=Math.abs(s.lat-h.lat)*e,x=Math.abs(s.lng-h.lng)*e;return new ue(new he(s.lat-m,s.lng-x),new he(h.lat+m,h.lng+x))},getCenter:function(){return new he((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new he(this.getNorth(),this.getWest())},getSouthEast:function(){return new he(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){typeof e[0]=="number"||e instanceof he||"lat"in e?e=$t(e):e=pe(e);var s=this._southWest,h=this._northEast,m,x;return e instanceof ue?(m=e.getSouthWest(),x=e.getNorthEast()):m=x=e,m.lat>=s.lat&&x.lat<=h.lat&&m.lng>=s.lng&&x.lng<=h.lng},intersects:function(e){e=pe(e);var s=this._southWest,h=this._northEast,m=e.getSouthWest(),x=e.getNorthEast(),S=x.lat>=s.lat&&m.lat<=h.lat,H=x.lng>=s.lng&&m.lng<=h.lng;return S&&H},overlaps:function(e){e=pe(e);var s=this._southWest,h=this._northEast,m=e.getSouthWest(),x=e.getNorthEast(),S=x.lat>s.lat&&m.lat<h.lat,H=x.lng>s.lng&&m.lng<h.lng;return S&&H},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,s){return e?(e=pe(e),this._southWest.equals(e.getSouthWest(),s)&&this._northEast.equals(e.getNorthEast(),s)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function pe(e,s){return e instanceof ue?e:new ue(e,s)}function he(e,s,h){if(isNaN(e)||isNaN(s))throw new Error("Invalid LatLng object: ("+e+", "+s+")");this.lat=+e,this.lng=+s,h!==void 0&&(this.alt=+h)}he.prototype={equals:function(e,s){if(!e)return!1;e=$t(e);var h=Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng));return h<=(s===void 0?1e-9:s)},toString:function(e){return"LatLng("+N(this.lat,e)+", "+N(this.lng,e)+")"},distanceTo:function(e){return Rt.distance(this,$t(e))},wrap:function(){return Rt.wrapLatLng(this)},toBounds:function(e){var s=180*e/40075017,h=s/Math.cos(Math.PI/180*this.lat);return pe([this.lat-s,this.lng-h],[this.lat+s,this.lng+h])},clone:function(){return new he(this.lat,this.lng,this.alt)}};function $t(e,s,h){return e instanceof he?e:ht(e)&&typeof e[0]!="object"?e.length===3?new he(e[0],e[1],e[2]):e.length===2?new he(e[0],e[1]):null:e==null?e:typeof e=="object"&&"lat"in e?new he(e.lat,"lng"in e?e.lng:e.lon,e.alt):s===void 0?null:new he(e,s,h)}var mt={latLngToPoint:function(e,s){var h=this.projection.project(e),m=this.scale(s);return this.transformation._transform(h,m)},pointToLatLng:function(e,s){var h=this.scale(s),m=this.transformation.untransform(e,h);return this.projection.unproject(m)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var s=this.projection.bounds,h=this.scale(e),m=this.transformation.transform(s.min,h),x=this.transformation.transform(s.max,h);return new se(m,x)},infinite:!1,wrapLatLng:function(e){var s=this.wrapLng?w(e.lng,this.wrapLng,!0):e.lng,h=this.wrapLat?w(e.lat,this.wrapLat,!0):e.lat,m=e.alt;return new he(h,s,m)},wrapLatLngBounds:function(e){var s=e.getCenter(),h=this.wrapLatLng(s),m=s.lat-h.lat,x=s.lng-h.lng;if(m===0&&x===0)return e;var S=e.getSouthWest(),H=e.getNorthEast(),et=new he(S.lat-m,S.lng-x),ct=new he(H.lat-m,H.lng-x);return new ue(et,ct)}},Rt=c({},mt,{wrapLng:[-180,180],R:6371e3,distance:function(e,s){var h=Math.PI/180,m=e.lat*h,x=s.lat*h,S=Math.sin((s.lat-e.lat)*h/2),H=Math.sin((s.lng-e.lng)*h/2),et=S*S+Math.cos(m)*Math.cos(x)*H*H,ct=2*Math.atan2(Math.sqrt(et),Math.sqrt(1-et));return this.R*ct}}),It=6378137,Ht={R:It,MAX_LATITUDE:85.0511287798,project:function(e){var s=Math.PI/180,h=this.MAX_LATITUDE,m=Math.max(Math.min(h,e.lat),-h),x=Math.sin(m*s);return new pt(this.R*e.lng*s,this.R*Math.log((1+x)/(1-x))/2)},unproject:function(e){var s=180/Math.PI;return new he((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*s,e.x*s/this.R)},bounds:function(){var e=It*Math.PI;return new se([-e,-e],[e,e])}()};function Le(e,s,h,m){if(ht(e)){this._a=e[0],this._b=e[1],this._c=e[2],this._d=e[3];return}this._a=e,this._b=s,this._c=h,this._d=m}Le.prototype={transform:function(e,s){return this._transform(e.clone(),s)},_transform:function(e,s){return s=s||1,e.x=s*(this._a*e.x+this._b),e.y=s*(this._c*e.y+this._d),e},untransform:function(e,s){return s=s||1,new pt((e.x/s-this._b)/this._a,(e.y/s-this._d)/this._c)}};function j(e,s,h,m){return new Le(e,s,h,m)}var V=c({},Rt,{code:"EPSG:3857",projection:Ht,transformation:function(){var e=.5/(Math.PI*Ht.R);return j(e,.5,-e,.5)}()}),tt=c({},V,{code:"EPSG:900913"});function vt(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function wt(e,s){var h="",m,x,S,H,et,ct;for(m=0,S=e.length;m<S;m++){for(et=e[m],x=0,H=et.length;x<H;x++)ct=et[x],h+=(x?"L":"M")+ct.x+" "+ct.y;h+=s?ee.svg?"z":"x":""}return h||"M0 0"}var _t=document.documentElement.style,Tt="ActiveXObject"in window,Dt=Tt&&!document.addEventListener,Bt="msLaunchUri"in navigator&&!("documentMode"in document),kt=Gi("webkit"),te=Gi("android"),zt=Gi("android 2")||Gi("android 3"),ie=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),le=te&&Gi("Google")&&ie<537&&!("AudioNode"in window),be=!!window.opera,Se=!Bt&&Gi("chrome"),Me=Gi("gecko")&&!kt&&!be&&!Tt,ai=!Se&&Gi("safari"),ti=Gi("phantom"),Ei="OTransition"in _t,ni=navigator.platform.indexOf("Win")===0,_n=Tt&&"transition"in _t,Dn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!zt,Je="MozPerspective"in _t,Mi=!window.L_DISABLE_3D&&(_n||Dn||Je)&&!Ei&&!ti,Ji=typeof orientation<"u"||Gi("mobile"),zl=Ji&&kt,jl=Ji&&Dn,Is=!window.PointerEvent&&window.MSPointerEvent,ia=!!(window.PointerEvent||Is),na="ontouchstart"in window||!!window.TouchEvent,Ul=!window.L_NO_TOUCH&&(na||ia),$l=Ji&&be,ra=Ji&&Me,sa=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Gl=function(){var e=!1;try{var s=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",E,s),window.removeEventListener("testPassiveEventSupport",E,s)}catch{}return e}(),Vl=function(){return!!document.createElement("canvas").getContext}(),Fs=!!(document.createElementNS&&vt("svg").createSVGRect),oa=!!Fs&&function(){var e=document.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Hl=!Fs&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var s=e.firstChild;return s.style.behavior="url(#default#VML)",s&&typeof s.adj=="object"}catch{return!1}}(),Zl=navigator.platform.indexOf("Mac")===0,ql=navigator.platform.indexOf("Linux")===0;function Gi(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var ee={ie:Tt,ielt9:Dt,edge:Bt,webkit:kt,android:te,android23:zt,androidStock:le,opera:be,chrome:Se,gecko:Me,safari:ai,phantom:ti,opera12:Ei,win:ni,ie3d:_n,webkit3d:Dn,gecko3d:Je,any3d:Mi,mobile:Ji,mobileWebkit:zl,mobileWebkit3d:jl,msPointer:Is,pointer:ia,touch:Ul,touchNative:na,mobileOpera:$l,mobileGecko:ra,retina:sa,passiveEvents:Gl,canvas:Vl,svg:Fs,vml:Hl,inlineSvg:oa,mac:Zl,linux:ql},aa=ee.msPointer?"MSPointerDown":"pointerdown",la=ee.msPointer?"MSPointerMove":"pointermove",Ns=ee.msPointer?"MSPointerUp":"pointerup",ua=ee.msPointer?"MSPointerCancel":"pointercancel",zs={touchstart:aa,touchmove:la,touchend:Ns,touchcancel:ua},ha={touchstart:Yl,touchmove:Wr,touchend:Wr,touchcancel:Wr},tr={},ca=!1;function Kl(e,s,h){return s==="touchstart"&&js(),ha[s]?(h=ha[s].bind(this,h),e.addEventListener(zs[s],h,!1),h):(console.warn("wrong event specified:",s),E)}function Wl(e,s,h){if(!zs[s]){console.warn("wrong event specified:",s);return}e.removeEventListener(zs[s],h,!1)}function Jl(e){tr[e.pointerId]=e}function Xl(e){tr[e.pointerId]&&(tr[e.pointerId]=e)}function Kr(e){delete tr[e.pointerId]}function js(){ca||(document.addEventListener(aa,Jl,!0),document.addEventListener(la,Xl,!0),document.addEventListener(Ns,Kr,!0),document.addEventListener(ua,Kr,!0),ca=!0)}function Wr(e,s){if(s.pointerType!==(s.MSPOINTER_TYPE_MOUSE||"mouse")){s.touches=[];for(var h in tr)s.touches.push(tr[h]);s.changedTouches=[s],e(s)}}function Yl(e,s){s.MSPOINTER_TYPE_TOUCH&&s.pointerType===s.MSPOINTER_TYPE_TOUCH&&ri(s),Wr(e,s)}function Ql(e){var s={},h,m;for(m in e)h=e[m],s[m]=h&&h.bind?h.bind(e):h;return e=s,s.type="dblclick",s.detail=2,s.isTrusted=!1,s._simulated=!0,s}var tu=200;function eu(e,s){e.addEventListener("dblclick",s);var h=0,m;function x(S){if(S.detail!==1){m=S.detail;return}if(!(S.pointerType==="mouse"||S.sourceCapabilities&&!S.sourceCapabilities.firesTouchEvents)){var H=ga(S);if(!(H.some(function(ct){return ct instanceof HTMLLabelElement&&ct.attributes.for})&&!H.some(function(ct){return ct instanceof HTMLInputElement||ct instanceof HTMLSelectElement}))){var et=Date.now();et-h<=tu?(m++,m===2&&s(Ql(S))):m=1,h=et}}}return e.addEventListener("click",x),{dblclick:s,simDblclick:x}}function iu(e,s){e.removeEventListener("dblclick",s.dblclick),e.removeEventListener("click",s.simDblclick)}var Us=Xr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Lr=Xr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),da=Lr==="webkitTransition"||Lr==="OTransition"?Lr+"End":"transitionend";function fa(e){return typeof e=="string"?document.getElementById(e):e}function yn(e,s){var h=e.style[s]||e.currentStyle&&e.currentStyle[s];if((!h||h==="auto")&&document.defaultView){var m=document.defaultView.getComputedStyle(e,null);h=m?m[s]:null}return h==="auto"?null:h}function Pe(e,s,h){var m=document.createElement(e);return m.className=s||"",h&&h.appendChild(m),m}function $e(e){var s=e.parentNode;s&&s.removeChild(e)}function Cr(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function er(e){var s=e.parentNode;s&&s.lastChild!==e&&s.appendChild(e)}function Rn(e){var s=e.parentNode;s&&s.firstChild!==e&&s.insertBefore(e,s.firstChild)}function $s(e,s){if(e.classList!==void 0)return e.classList.contains(s);var h=Jr(e);return h.length>0&&new RegExp("(^|\\s)"+s+"(\\s|$)").test(h)}function ge(e,s){if(e.classList!==void 0)for(var h=G(s),m=0,x=h.length;m<x;m++)e.classList.add(h[m]);else if(!$s(e,s)){var S=Jr(e);Gs(e,(S?S+" ":"")+s)}}function Ze(e,s){e.classList!==void 0?e.classList.remove(s):Gs(e,I((" "+Jr(e)+" ").replace(" "+s+" "," ")))}function Gs(e,s){e.className.baseVal===void 0?e.className=s:e.className.baseVal=s}function Jr(e){return e.correspondingElement&&(e=e.correspondingElement),e.className.baseVal===void 0?e.className:e.className.baseVal}function Ri(e,s){"opacity"in e.style?e.style.opacity=s:"filter"in e.style&&nu(e,s)}function nu(e,s){var h=!1,m="DXImageTransform.Microsoft.Alpha";try{h=e.filters.item(m)}catch{if(s===1)return}s=Math.round(s*100),h?(h.Enabled=s!==100,h.Opacity=s):e.style.filter+=" progid:"+m+"(opacity="+s+")"}function Xr(e){for(var s=document.documentElement.style,h=0;h<e.length;h++)if(e[h]in s)return e[h];return!1}function On(e,s,h){var m=s||new pt(0,0);e.style[Us]=(ee.ie3d?"translate("+m.x+"px,"+m.y+"px)":"translate3d("+m.x+"px,"+m.y+"px,0)")+(h?" scale("+h+")":"")}function Xe(e,s){e._leaflet_pos=s,ee.any3d?On(e,s):(e.style.left=s.x+"px",e.style.top=s.y+"px")}function In(e){return e._leaflet_pos||new pt(0,0)}var kr,Er,Vs;if("onselectstart"in document)kr=function(){me(window,"selectstart",ri)},Er=function(){Fe(window,"selectstart",ri)};else{var ir=Xr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);kr=function(){if(ir){var e=document.documentElement.style;Vs=e[ir],e[ir]="none"}},Er=function(){ir&&(document.documentElement.style[ir]=Vs,Vs=void 0)}}function Hs(){me(window,"dragstart",ri)}function Zs(){Fe(window,"dragstart",ri)}var Yr,qs;function Ks(e){for(;e.tabIndex===-1;)e=e.parentNode;e.style&&(Qr(),Yr=e,qs=e.style.outlineStyle,e.style.outlineStyle="none",me(window,"keydown",Qr))}function Qr(){Yr&&(Yr.style.outlineStyle=qs,Yr=void 0,qs=void 0,Fe(window,"keydown",Qr))}function pa(e){do e=e.parentNode;while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function Ws(e){var s=e.getBoundingClientRect();return{x:s.width/e.offsetWidth||1,y:s.height/e.offsetHeight||1,boundingClientRect:s}}var ru={__proto__:null,TRANSFORM:Us,TRANSITION:Lr,TRANSITION_END:da,get:fa,getStyle:yn,create:Pe,remove:$e,empty:Cr,toFront:er,toBack:Rn,hasClass:$s,addClass:ge,removeClass:Ze,setClass:Gs,getClass:Jr,setOpacity:Ri,testProp:Xr,setTransform:On,setPosition:Xe,getPosition:In,get disableTextSelection(){return kr},get enableTextSelection(){return Er},disableImageDrag:Hs,enableImageDrag:Zs,preventOutline:Ks,restoreOutline:Qr,getSizedParentNode:pa,getScale:Ws};function me(e,s,h,m){if(s&&typeof s=="object")for(var x in s)Xs(e,x,s[x],h);else{s=G(s);for(var S=0,H=s.length;S<H;S++)Xs(e,s[S],h,m)}return this}var Xi="_leaflet_events";function Fe(e,s,h,m){if(arguments.length===1)ma(e),delete e[Xi];else if(s&&typeof s=="object")for(var x in s)vn(e,x,s[x],h);else if(s=G(s),arguments.length===2)ma(e,function(et){return yt(s,et)!==-1});else for(var S=0,H=s.length;S<H;S++)vn(e,s[S],h,m);return this}function ma(e,s){for(var h in e[Xi]){var m=h.split(/\d/)[0];(!s||s(m))&&vn(e,m,null,null,h)}}var Js={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Xs(e,s,h,m){var x=s+y(h)+(m?"_"+y(m):"");if(e[Xi]&&e[Xi][x])return this;var S=function(et){return h.call(m||e,et||window.event)},H=S;!ee.touchNative&&ee.pointer&&s.indexOf("touch")===0?S=Kl(e,s,S):ee.touch&&s==="dblclick"?S=eu(e,S):"addEventListener"in e?s==="touchstart"||s==="touchmove"||s==="wheel"||s==="mousewheel"?e.addEventListener(Js[s]||s,S,ee.passiveEvents?{passive:!1}:!1):s==="mouseenter"||s==="mouseleave"?(S=function(et){et=et||window.event,Qs(e,et)&&H(et)},e.addEventListener(Js[s],S,!1)):e.addEventListener(s,H,!1):e.attachEvent("on"+s,S),e[Xi]=e[Xi]||{},e[Xi][x]=S}function vn(e,s,h,m,x){x=x||s+y(h)+(m?"_"+y(m):"");var S=e[Xi]&&e[Xi][x];if(!S)return this;!ee.touchNative&&ee.pointer&&s.indexOf("touch")===0?Wl(e,s,S):ee.touch&&s==="dblclick"?iu(e,S):"removeEventListener"in e?e.removeEventListener(Js[s]||s,S,!1):e.detachEvent("on"+s,S),e[Xi][x]=null}function Fn(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function Ys(e){return Xs(e,"wheel",Fn),this}function Mr(e){return me(e,"mousedown touchstart dblclick contextmenu",Fn),e._leaflet_disable_click=!0,this}function ri(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function Nn(e){return ri(e),Fn(e),this}function ga(e){if(e.composedPath)return e.composedPath();for(var s=[],h=e.target;h;)s.push(h),h=h.parentNode;return s}function _a(e,s){if(!s)return new pt(e.clientX,e.clientY);var h=Ws(s),m=h.boundingClientRect;return new pt((e.clientX-m.left)/h.x-s.clientLeft,(e.clientY-m.top)/h.y-s.clientTop)}var su=ee.linux&&ee.chrome?window.devicePixelRatio:ee.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ya(e){return ee.edge?e.wheelDeltaY/2:e.deltaY&&e.deltaMode===0?-e.deltaY/su:e.deltaY&&e.deltaMode===1?-e.deltaY*20:e.deltaY&&e.deltaMode===2?-e.deltaY*60:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?-e.detail*20:e.detail?e.detail/-32765*60:0}function Qs(e,s){var h=s.relatedTarget;if(!h)return!0;try{for(;h&&h!==e;)h=h.parentNode}catch{return!1}return h!==e}var ts={__proto__:null,on:me,off:Fe,stopPropagation:Fn,disableScrollPropagation:Ys,disableClickPropagation:Mr,preventDefault:ri,stop:Nn,getPropagationPath:ga,getMousePosition:_a,getWheelDelta:ya,isExternalTarget:Qs,addListener:me,removeListener:Fe},va=bt.extend({run:function(e,s,h,m){this.stop(),this._el=e,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(m||.5,.2),this._startPos=In(e),this._offset=s.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=St(this._animate,this),this._step()},_step:function(e){var s=+new Date-this._startTime,h=this._duration*1e3;s<h?this._runFrame(this._easeOut(s/h),e):(this._runFrame(1),this._complete())},_runFrame:function(e,s){var h=this._startPos.add(this._offset.multiplyBy(e));s&&h._round(),Xe(this._el,h),this.fire("step")},_complete:function(){Qt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),Ce=bt.extend({options:{crs:V,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,s){s=K(this,s),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=p(this._onResize,this),this._initEvents(),s.maxBounds&&this.setMaxBounds(s.maxBounds),s.zoom!==void 0&&(this._zoom=this._limitZoom(s.zoom)),s.center&&s.zoom!==void 0&&this.setView($t(s.center),s.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Lr&&ee.any3d&&!ee.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),me(this._proxy,da,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,s,h){if(s=s===void 0?this._zoom:this._limitZoom(s),e=this._limitCenter($t(e),s,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=c({animate:h.animate},h.zoom),h.pan=c({animate:h.animate,duration:h.duration},h.pan));var m=this._zoom!==s?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,s,h.zoom):this._tryAnimatedPan(e,h.pan);if(m)return clearTimeout(this._sizeTimer),this}return this._resetView(e,s,h.pan&&h.pan.noMoveStart),this},setZoom:function(e,s){return this._loaded?this.setView(this.getCenter(),e,{zoom:s}):(this._zoom=e,this)},zoomIn:function(e,s){return e=e||(ee.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,s)},zoomOut:function(e,s){return e=e||(ee.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,s)},setZoomAround:function(e,s,h){var m=this.getZoomScale(s),x=this.getSize().divideBy(2),S=e instanceof pt?e:this.latLngToContainerPoint(e),H=S.subtract(x).multiplyBy(1-1/m),et=this.containerPointToLatLng(x.add(H));return this.setView(et,s,{zoom:h})},_getBoundsCenterZoom:function(e,s){s=s||{},e=e.getBounds?e.getBounds():pe(e);var h=At(s.paddingTopLeft||s.padding||[0,0]),m=At(s.paddingBottomRight||s.padding||[0,0]),x=this.getBoundsZoom(e,!1,h.add(m));if(x=typeof s.maxZoom=="number"?Math.min(s.maxZoom,x):x,x===1/0)return{center:e.getCenter(),zoom:x};var S=m.subtract(h).divideBy(2),H=this.project(e.getSouthWest(),x),et=this.project(e.getNorthEast(),x),ct=this.unproject(H.add(et).divideBy(2).add(S),x);return{center:ct,zoom:x}},fitBounds:function(e,s){if(e=pe(e),!e.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(e,s);return this.setView(h.center,h.zoom,s)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,s){return this.setView(e,this._zoom,{pan:s})},panBy:function(e,s){if(e=At(e).round(),s=s||{},!e.x&&!e.y)return this.fire("moveend");if(s.animate!==!0&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new va,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),s.noMoveStart||this.fire("movestart"),s.animate!==!1){ge(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,h,s.duration||.25,s.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,s,h){if(h=h||{},h.animate===!1||!ee.any3d)return this.setView(e,s,h);this._stop();var m=this.project(this.getCenter()),x=this.project(e),S=this.getSize(),H=this._zoom;e=$t(e),s=s===void 0?H:s;var et=Math.max(S.x,S.y),ct=et*this.getZoomScale(H,s),Ct=x.distanceTo(m)||1,jt=1.42,oe=jt*jt;function xe(qe){var Ir=qe?-1:1,Mu=qe?ct:et,rn=ct*ct-et*et+Ir*oe*oe*Ct*Ct,Pu=2*Mu*oe*Ct,ur=rn/Pu,fo=Math.sqrt(ur*ur+1)-ur,Bu=fo<1e-9?-18:Math.log(fo);return Bu}function pi(qe){return(Math.exp(qe)-Math.exp(-qe))/2}function ei(qe){return(Math.exp(qe)+Math.exp(-qe))/2}function bi(qe){return pi(qe)/ei(qe)}var He=xe(0);function nn(qe){return et*(ei(He)/ei(He+jt*qe))}function co(qe){return et*(ei(He)*bi(He+jt*qe)-pi(He))/oe}function bs(qe){return 1-Math.pow(1-qe,1.5)}var Ra=Date.now(),Or=(xe(1)-He)/jt,Eu=h.duration?1e3*h.duration:1e3*Or*.8;function Oa(){var qe=(Date.now()-Ra)/Eu,Ir=bs(qe)*Or;qe<=1?(this._flyToFrame=St(Oa,this),this._move(this.unproject(m.add(x.subtract(m).multiplyBy(co(Ir)/Ct)),H),this.getScaleZoom(et/nn(Ir),H),{flyTo:!0})):this._move(e,s)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),Oa.call(this),this},flyToBounds:function(e,s){var h=this._getBoundsCenterZoom(e,s);return this.flyTo(h.center,h.zoom,s)},setMaxBounds:function(e){return e=pe(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var s=this.options.minZoom;return this.options.minZoom=e,this._loaded&&s!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var s=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&s!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,s){this._enforcingBounds=!0;var h=this.getCenter(),m=this._limitCenter(h,this._zoom,pe(e));return h.equals(m)||this.panTo(m,s),this._enforcingBounds=!1,this},panInside:function(e,s){s=s||{};var h=At(s.paddingTopLeft||s.padding||[0,0]),m=At(s.paddingBottomRight||s.padding||[0,0]),x=this.project(this.getCenter()),S=this.project(e),H=this.getPixelBounds(),et=xt([H.min.add(h),H.max.subtract(m)]),ct=et.getSize();if(!et.contains(S)){this._enforcingBounds=!0;var Ct=S.subtract(et.getCenter()),jt=et.extend(S).getSize().subtract(ct);x.x+=Ct.x<0?-jt.x:jt.x,x.y+=Ct.y<0?-jt.y:jt.y,this.panTo(this.unproject(x),s),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=c({animate:!1,pan:!0},e===!0?{animate:!0}:e);var s=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),m=s.divideBy(2).round(),x=h.divideBy(2).round(),S=m.subtract(x);return!S.x&&!S.y?this:(e.animate&&e.pan?this.panBy(S):(e.pan&&this._rawPanBy(S),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(p(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:s,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=c({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var s=p(this._handleGeolocationResponse,this),h=p(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(s,h,e):navigator.geolocation.getCurrentPosition(s,h,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var s=e.code,h=e.message||(s===1?"permission denied":s===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:s,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var s=e.coords.latitude,h=e.coords.longitude,m=new he(s,h),x=m.toBounds(e.coords.accuracy*2),S=this._locateOptions;if(S.setView){var H=this.getBoundsZoom(x);this.setView(m,S.maxZoom?Math.min(H,S.maxZoom):H)}var et={latlng:m,bounds:x,timestamp:e.timestamp};for(var ct in e.coords)typeof e.coords[ct]=="number"&&(et[ct]=e.coords[ct]);this.fire("locationfound",et)}},addHandler:function(e,s){if(!s)return this;var h=this[e]=new s(this);return this._handlers.push(h),this.options[e]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),$e(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Qt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var e;for(e in this._layers)this._layers[e].remove();for(e in this._panes)$e(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,s){var h="leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),m=Pe("div",h,s||this._mapPane);return e&&(this._panes[e]=m),m},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),s=this.unproject(e.getBottomLeft()),h=this.unproject(e.getTopRight());return new ue(s,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,s,h){e=pe(e),h=At(h||[0,0]);var m=this.getZoom()||0,x=this.getMinZoom(),S=this.getMaxZoom(),H=e.getNorthWest(),et=e.getSouthEast(),ct=this.getSize().subtract(h),Ct=xt(this.project(et,m),this.project(H,m)).getSize(),jt=ee.any3d?this.options.zoomSnap:1,oe=ct.x/Ct.x,xe=ct.y/Ct.y,pi=s?Math.max(oe,xe):Math.min(oe,xe);return m=this.getScaleZoom(pi,m),jt&&(m=Math.round(m/(jt/100))*(jt/100),m=s?Math.ceil(m/jt)*jt:Math.floor(m/jt)*jt),Math.max(x,Math.min(S,m))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new pt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,s){var h=this._getTopLeftPoint(e,s);return new se(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(e===void 0?this.getZoom():e)},getPane:function(e){return typeof e=="string"?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,s){var h=this.options.crs;return s=s===void 0?this._zoom:s,h.scale(e)/h.scale(s)},getScaleZoom:function(e,s){var h=this.options.crs;s=s===void 0?this._zoom:s;var m=h.zoom(e*h.scale(s));return isNaN(m)?1/0:m},project:function(e,s){return s=s===void 0?this._zoom:s,this.options.crs.latLngToPoint($t(e),s)},unproject:function(e,s){return s=s===void 0?this._zoom:s,this.options.crs.pointToLatLng(At(e),s)},layerPointToLatLng:function(e){var s=At(e).add(this.getPixelOrigin());return this.unproject(s)},latLngToLayerPoint:function(e){var s=this.project($t(e))._round();return s._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng($t(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(pe(e))},distance:function(e,s){return this.options.crs.distance($t(e),$t(s))},containerPointToLayerPoint:function(e){return At(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return At(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var s=this.containerPointToLayerPoint(At(e));return this.layerPointToLatLng(s)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint($t(e)))},mouseEventToContainerPoint:function(e){return _a(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var s=this._container=fa(e);if(s){if(s._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");me(s,"scroll",this._onScroll,this),this._containerId=y(s)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&ee.any3d,ge(e,"leaflet-container"+(ee.touch?" leaflet-touch":"")+(ee.retina?" leaflet-retina":"")+(ee.ielt9?" leaflet-oldie":"")+(ee.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var s=yn(e,"position");s!=="absolute"&&s!=="relative"&&s!=="fixed"&&s!=="sticky"&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Xe(this._mapPane,new pt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ge(e.markerPane,"leaflet-zoom-hide"),ge(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,s,h){Xe(this._mapPane,new pt(0,0));var m=!this._loaded;this._loaded=!0,s=this._limitZoom(s),this.fire("viewprereset");var x=this._zoom!==s;this._moveStart(x,h)._move(e,s)._moveEnd(x),this.fire("viewreset"),m&&this.fire("load")},_moveStart:function(e,s){return e&&this.fire("zoomstart"),s||this.fire("movestart"),this},_move:function(e,s,h,m){s===void 0&&(s=this._zoom);var x=this._zoom!==s;return this._zoom=s,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),m?h&&h.pinch&&this.fire("zoom",h):((x||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Qt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){Xe(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[y(this._container)]=this;var s=e?Fe:me;s(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&s(window,"resize",this._onResize,this),ee.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Qt(this._resizeRequest),this._resizeRequest=St(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,s){for(var h=[],m,x=s==="mouseout"||s==="mouseover",S=e.target||e.srcElement,H=!1;S;){if(m=this._targets[y(S)],m&&(s==="click"||s==="preclick")&&this._draggableMoved(m)){H=!0;break}if(m&&m.listens(s,!0)&&(x&&!Qs(S,e)||(h.push(m),x))||S===this._container)break;S=S.parentNode}return!h.length&&!H&&!x&&this.listens(s,!0)&&(h=[this]),h},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var s=e.target||e.srcElement;if(!(!this._loaded||s._leaflet_disable_events||e.type==="click"&&this._isClickDisabled(s))){var h=e.type;h==="mousedown"&&Ks(s),this._fireDOMEvent(e,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,s,h){if(e.type==="click"){var m=c({},e);m.type="preclick",this._fireDOMEvent(m,m.type,h)}var x=this._findEventTargets(e,s);if(h){for(var S=[],H=0;H<h.length;H++)h[H].listens(s,!0)&&S.push(h[H]);x=S.concat(x)}if(x.length){s==="contextmenu"&&ri(e);var et=x[0],ct={originalEvent:e};if(e.type!=="keypress"&&e.type!=="keydown"&&e.type!=="keyup"){var Ct=et.getLatLng&&(!et._radius||et._radius<=10);ct.containerPoint=Ct?this.latLngToContainerPoint(et.getLatLng()):this.mouseEventToContainerPoint(e),ct.layerPoint=this.containerPointToLayerPoint(ct.containerPoint),ct.latlng=Ct?et.getLatLng():this.layerPointToLatLng(ct.layerPoint)}for(H=0;H<x.length;H++)if(x[H].fire(s,ct,!0),ct.originalEvent._stopped||x[H].options.bubblingMouseEvents===!1&&yt(this._mouseEvents,s)!==-1)return}},_draggableMoved:function(e){return e=e.dragging&&e.dragging.enabled()?e:this,e.dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,s=this._handlers.length;e<s;e++)this._handlers[e].disable()},whenReady:function(e,s){return this._loaded?e.call(s||this,{target:this}):this.on("load",e,s),this},_getMapPanePos:function(){return In(this._mapPane)||new pt(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,s){var h=e&&s!==void 0?this._getNewPixelOrigin(e,s):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,s){var h=this.getSize()._divideBy(2);return this.project(e,s)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,s,h){var m=this._getNewPixelOrigin(h,s);return this.project(e,s)._subtract(m)},_latLngBoundsToNewLayerBounds:function(e,s,h){var m=this._getNewPixelOrigin(h,s);return xt([this.project(e.getSouthWest(),s)._subtract(m),this.project(e.getNorthWest(),s)._subtract(m),this.project(e.getSouthEast(),s)._subtract(m),this.project(e.getNorthEast(),s)._subtract(m)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,s,h){if(!h)return e;var m=this.project(e,s),x=this.getSize().divideBy(2),S=new se(m.subtract(x),m.add(x)),H=this._getBoundsOffset(S,h,s);return Math.abs(H.x)<=1&&Math.abs(H.y)<=1?e:this.unproject(m.add(H),s)},_limitOffset:function(e,s){if(!s)return e;var h=this.getPixelBounds(),m=new se(h.min.add(e),h.max.add(e));return e.add(this._getBoundsOffset(m,s))},_getBoundsOffset:function(e,s,h){var m=xt(this.project(s.getNorthEast(),h),this.project(s.getSouthWest(),h)),x=m.min.subtract(e.min),S=m.max.subtract(e.max),H=this._rebound(x.x,-S.x),et=this._rebound(x.y,-S.y);return new pt(H,et)},_rebound:function(e,s){return e+s>0?Math.round(e-s)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(s))},_limitZoom:function(e){var s=this.getMinZoom(),h=this.getMaxZoom(),m=ee.any3d?this.options.zoomSnap:1;return m&&(e=Math.round(e/m)*m),Math.max(s,Math.min(h,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ze(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,s){var h=this._getCenterOffset(e)._trunc();return(s&&s.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,s),!0)},_createAnimProxy:function(){var e=this._proxy=Pe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(s){var h=Us,m=this._proxy.style[h];On(this._proxy,this.project(s.center,s.zoom),this.getZoomScale(s.zoom,1)),m===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){$e(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),s=this.getZoom();On(this._proxy,this.project(e,s),this.getZoomScale(s,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,s,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(s-this._zoom)>this.options.zoomAnimationThreshold)return!1;var m=this.getZoomScale(s),x=this._getCenterOffset(e)._divideBy(1-1/m);return h.animate!==!0&&!this.getSize().contains(x)?!1:(St(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(e,s,!0)},this),!0)},_animateZoom:function(e,s,h,m){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=s,ge(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:s,noUpdate:m}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(p(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ze(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ba(e,s){return new Ce(e,s)}var fe=Wt.extend({options:{position:"topright"},initialize:function(e){K(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var s=this._map;return s&&s.removeControl(this),this.options.position=e,s&&s.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var s=this._container=this.onAdd(e),h=this.getPosition(),m=e._controlCorners[h];return ge(s,"leaflet-control"),h.indexOf("bottom")!==-1?m.insertBefore(s,m.firstChild):m.appendChild(s),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?($e(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),zn=function(e){return new fe(e)};Ce.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},s="leaflet-",h=this._controlContainer=Pe("div",s+"control-container",this._container);function m(x,S){var H=s+x+" "+s+S;e[x+S]=Pe("div",H,h)}m("top","left"),m("top","right"),m("bottom","left"),m("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)$e(this._controlCorners[e]);$e(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Pr=fe.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,s,h,m){return h<m?-1:m<h?1:0}},initialize:function(e,s,h){K(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var m in e)this._addLayer(e[m],m);for(m in s)this._addLayer(s[m],m,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return fe.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,s){return this._addLayer(e,s),this._map?this._update():this},addOverlay:function(e,s){return this._addLayer(e,s,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var s=this._getLayer(y(e));return s&&this._layers.splice(this._layers.indexOf(s),1),this._map?this._update():this},expand:function(){ge(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(ge(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):Ze(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ze(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",s=this._container=Pe("div",e),h=this.options.collapsed;s.setAttribute("aria-haspopup",!0),Mr(s),Ys(s);var m=this._section=Pe("section",e+"-list");h&&(this._map.on("click",this.collapse,this),me(s,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var x=this._layersLink=Pe("a",e+"-toggle",s);x.href="#",x.title="Layers",x.setAttribute("role","button"),me(x,{keydown:function(S){S.keyCode===13&&this._expandSafely()},click:function(S){ri(S),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=Pe("div",e+"-base",m),this._separator=Pe("div",e+"-separator",m),this._overlaysList=Pe("div",e+"-overlays",m),s.appendChild(m)},_getLayer:function(e){for(var s=0;s<this._layers.length;s++)if(this._layers[s]&&y(this._layers[s].layer)===e)return this._layers[s]},_addLayer:function(e,s,h){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:s,overlay:h}),this.options.sortLayers&&this._layers.sort(p(function(m,x){return this.options.sortFunction(m.layer,x.layer,m.name,x.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Cr(this._baseLayersList),Cr(this._overlaysList),this._layerControlInputs=[];var e,s,h,m,x=0;for(h=0;h<this._layers.length;h++)m=this._layers[h],this._addItem(m),s=s||m.overlay,e=e||!m.overlay,x+=m.overlay?0:1;return this.options.hideSingleBase&&(e=e&&x>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=s&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var s=this._getLayer(y(e.target)),h=s.overlay?e.type==="add"?"overlayadd":"overlayremove":e.type==="add"?"baselayerchange":null;h&&this._map.fire(h,s)},_createRadioElement:function(e,s){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(s?' checked="checked"':"")+"/>",m=document.createElement("div");return m.innerHTML=h,m.firstChild},_addItem:function(e){var s=document.createElement("label"),h=this._map.hasLayer(e.layer),m;e.overlay?(m=document.createElement("input"),m.type="checkbox",m.className="leaflet-control-layers-selector",m.defaultChecked=h):m=this._createRadioElement("leaflet-base-layers_"+y(this),h),this._layerControlInputs.push(m),m.layerId=y(e.layer),me(m,"click",this._onInputClick,this);var x=document.createElement("span");x.innerHTML=" "+e.name;var S=document.createElement("span");s.appendChild(S),S.appendChild(m),S.appendChild(x);var H=e.overlay?this._overlaysList:this._baseLayersList;return H.appendChild(s),this._checkDisabledLayers(),s},_onInputClick:function(){if(!this._preventClick){var e=this._layerControlInputs,s,h,m=[],x=[];this._handlingClick=!0;for(var S=e.length-1;S>=0;S--)s=e[S],h=this._getLayer(s.layerId).layer,s.checked?m.push(h):s.checked||x.push(h);for(S=0;S<x.length;S++)this._map.hasLayer(x[S])&&this._map.removeLayer(x[S]);for(S=0;S<m.length;S++)this._map.hasLayer(m[S])||this._map.addLayer(m[S]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e=this._layerControlInputs,s,h,m=this._map.getZoom(),x=e.length-1;x>=0;x--)s=e[x],h=this._getLayer(s.layerId).layer,s.disabled=h.options.minZoom!==void 0&&m<h.options.minZoom||h.options.maxZoom!==void 0&&m>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,me(e,"click",ri),this.expand();var s=this;setTimeout(function(){Fe(e,"click",ri),s._preventClick=!1})}}),ou=function(e,s,h){return new Pr(e,s,h)},es=fe.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var s="leaflet-control-zoom",h=Pe("div",s+" leaflet-bar"),m=this.options;return this._zoomInButton=this._createButton(m.zoomInText,m.zoomInTitle,s+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(m.zoomOutText,m.zoomOutTitle,s+"-out",h,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,s,h,m,x){var S=Pe("a",h,m);return S.innerHTML=e,S.href="#",S.title=s,S.setAttribute("role","button"),S.setAttribute("aria-label",s),Mr(S),me(S,"click",Nn),me(S,"click",x,this),me(S,"click",this._refocusOnMap,this),S},_updateDisabled:function(){var e=this._map,s="leaflet-disabled";Ze(this._zoomInButton,s),Ze(this._zoomOutButton,s),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(ge(this._zoomOutButton,s),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(ge(this._zoomInButton,s),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ce.mergeOptions({zoomControl:!0}),Ce.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new es,this.addControl(this.zoomControl))});var au=function(e){return new es(e)},is=fe.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var s="leaflet-control-scale",h=Pe("div",s),m=this.options;return this._addScales(m,s+"-line",h),e.on(m.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),h},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,s,h){e.metric&&(this._mScale=Pe("div",s,h)),e.imperial&&(this._iScale=Pe("div",s,h))},_update:function(){var e=this._map,s=e.getSize().y/2,h=e.distance(e.containerPointToLatLng([0,s]),e.containerPointToLatLng([this.options.maxWidth,s]));this._updateScales(h)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var s=this._getRoundNum(e),h=s<1e3?s+" m":s/1e3+" km";this._updateScale(this._mScale,h,s/e)},_updateImperial:function(e){var s=e*3.2808399,h,m,x;s>5280?(h=s/5280,m=this._getRoundNum(h),this._updateScale(this._iScale,m+" mi",m/h)):(x=this._getRoundNum(s),this._updateScale(this._iScale,x+" ft",x/s))},_updateScale:function(e,s,h){e.style.width=Math.round(this.options.maxWidth*h)+"px",e.innerHTML=s},_getRoundNum:function(e){var s=Math.pow(10,(Math.floor(e)+"").length-1),h=e/s;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,s*h}}),ns=function(e){return new is(e)},lu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Yi=fe.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ee.inlineSvg?lu+" ":"")+"Leaflet</a>"},initialize:function(e){K(this,e),this._attributions={}},onAdd:function(e){e.attributionControl=this,this._container=Pe("div","leaflet-control-attribution"),Mr(this._container);for(var s in e._layers)e._layers[s].getAttribution&&this.addAttribution(e._layers[s].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",function(){this.removeAttribution(e.layer.getAttribution())},this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var s in this._attributions)this._attributions[s]&&e.push(s);var h=[];this.options.prefix&&h.push(this.options.prefix),e.length&&h.push(e.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});Ce.mergeOptions({attributionControl:!0}),Ce.addInitHook(function(){this.options.attributionControl&&new Yi().addTo(this)});var xa=function(e){return new Yi(e)};fe.Layers=Pr,fe.Zoom=es,fe.Scale=is,fe.Attribution=Yi,zn.layers=ou,zn.zoom=au,zn.scale=ns,zn.attribution=xa;var ci=Wt.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ci.addTo=function(e,s){return e.addHandler(s,this),this};var uu={Events:$},wa=ee.touch?"touchstart mousedown":"mousedown",bn=bt.extend({options:{clickTolerance:3},initialize:function(e,s,h,m){K(this,m),this._element=e,this._dragStartTarget=s||e,this._preventOutline=h},enable:function(){this._enabled||(me(this._dragStartTarget,wa,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(bn._dragging===this&&this.finishDrag(!0),Fe(this._dragStartTarget,wa,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!$s(this._element,"leaflet-zoom-anim"))){if(e.touches&&e.touches.length!==1){bn._dragging===this&&this.finishDrag();return}if(!(bn._dragging||e.shiftKey||e.which!==1&&e.button!==1&&!e.touches)&&(bn._dragging=this,this._preventOutline&&Ks(this._element),Hs(),kr(),!this._moving)){this.fire("down");var s=e.touches?e.touches[0]:e,h=pa(this._element);this._startPoint=new pt(s.clientX,s.clientY),this._startPos=In(this._element),this._parentScale=Ws(h);var m=e.type==="mousedown";me(document,m?"mousemove":"touchmove",this._onMove,this),me(document,m?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(e){if(this._enabled){if(e.touches&&e.touches.length>1){this._moved=!0;return}var s=e.touches&&e.touches.length===1?e.touches[0]:e,h=new pt(s.clientX,s.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,ri(e),this._moved||(this.fire("dragstart"),this._moved=!0,ge(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ge(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=e,this._updatePosition())}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),Xe(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){Ze(document.body,"leaflet-dragging"),this._lastTarget&&(Ze(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Fe(document,"mousemove touchmove",this._onMove,this),Fe(document,"mouseup touchend touchcancel",this._onUp,this),Zs(),Er();var s=this._moved&&this._moving;this._moving=!1,bn._dragging=!1,s&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function La(e,s,h){var m,x=[1,4,2,8],S,H,et,ct,Ct,jt,oe,xe;for(S=0,jt=e.length;S<jt;S++)e[S]._code=_i(e[S],s);for(et=0;et<4;et++){for(oe=x[et],m=[],S=0,jt=e.length,H=jt-1;S<jt;H=S++)ct=e[S],Ct=e[H],ct._code&oe?Ct._code&oe||(xe=xn(Ct,ct,oe,s,h),xe._code=_i(xe,s),m.push(xe)):(Ct._code&oe&&(xe=xn(Ct,ct,oe,s,h),xe._code=_i(xe,s),m.push(xe)),m.push(ct));e=m}return e}function Ca(e,s){var h,m,x,S,H,et,ct,Ct,jt;if(!e||e.length===0)throw new Error("latlngs not passed");yi(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var oe=$t([0,0]),xe=pe(e),pi=xe.getNorthWest().distanceTo(xe.getSouthWest())*xe.getNorthEast().distanceTo(xe.getNorthWest());pi<1700&&(oe=to(e));var ei=e.length,bi=[];for(h=0;h<ei;h++){var He=$t(e[h]);bi.push(s.project($t([He.lat-oe.lat,He.lng-oe.lng])))}for(et=ct=Ct=0,h=0,m=ei-1;h<ei;m=h++)x=bi[h],S=bi[m],H=x.y*S.x-S.y*x.x,ct+=(x.x+S.x)*H,Ct+=(x.y+S.y)*H,et+=H*3;et===0?jt=bi[0]:jt=[ct/et,Ct/et];var nn=s.unproject(At(jt));return $t([nn.lat+oe.lat,nn.lng+oe.lng])}function to(e){for(var s=0,h=0,m=0,x=0;x<e.length;x++){var S=$t(e[x]);s+=S.lat,h+=S.lng,m++}return $t([s/m,h/m])}var hu={__proto__:null,clipPolygon:La,polygonCenter:Ca,centroid:to};function ka(e,s){if(!s||!e.length)return e.slice();var h=s*s;return e=Ea(e,h),e=si(e,h),e}function eo(e,s,h){return Math.sqrt(Br(e,s,h,!0))}function cu(e,s,h){return Br(e,s,h)}function si(e,s){var h=e.length,m=typeof Uint8Array<"u"?Uint8Array:Array,x=new m(h);x[0]=x[h-1]=1,li(e,x,s,0,h-1);var S,H=[];for(S=0;S<h;S++)x[S]&&H.push(e[S]);return H}function li(e,s,h,m,x){var S=0,H,et,ct;for(et=m+1;et<=x-1;et++)ct=Br(e[et],e[m],e[x],!0),ct>S&&(H=et,S=ct);S>h&&(s[H]=1,li(e,s,h,m,H),li(e,s,h,H,x))}function Ea(e,s){for(var h=[e[0]],m=1,x=0,S=e.length;m<S;m++)du(e[m],e[x])>s&&(h.push(e[m]),x=m);return x<S-1&&h.push(e[S-1]),h}var jn;function Un(e,s,h,m,x){var S=m?jn:_i(e,h),H=_i(s,h),et,ct,Ct;for(jn=H;;){if(!(S|H))return[e,s];if(S&H)return!1;et=S||H,ct=xn(e,s,et,h,x),Ct=_i(ct,h),et===S?(e=ct,S=Ct):(s=ct,H=Ct)}}function xn(e,s,h,m,x){var S=s.x-e.x,H=s.y-e.y,et=m.min,ct=m.max,Ct,jt;return h&8?(Ct=e.x+S*(ct.y-e.y)/H,jt=ct.y):h&4?(Ct=e.x+S*(et.y-e.y)/H,jt=et.y):h&2?(Ct=ct.x,jt=e.y+H*(ct.x-e.x)/S):h&1&&(Ct=et.x,jt=e.y+H*(et.x-e.x)/S),new pt(Ct,jt,x)}function _i(e,s){var h=0;return e.x<s.min.x?h|=1:e.x>s.max.x&&(h|=2),e.y<s.min.y?h|=4:e.y>s.max.y&&(h|=8),h}function du(e,s){var h=s.x-e.x,m=s.y-e.y;return h*h+m*m}function Br(e,s,h,m){var x=s.x,S=s.y,H=h.x-x,et=h.y-S,ct=H*H+et*et,Ct;return ct>0&&(Ct=((e.x-x)*H+(e.y-S)*et)/ct,Ct>1?(x=h.x,S=h.y):Ct>0&&(x+=H*Ct,S+=et*Ct)),H=e.x-x,et=e.y-S,m?H*H+et*et:new pt(x,S)}function yi(e){return!ht(e[0])||typeof e[0][0]!="object"&&typeof e[0][0]<"u"}function Oi(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),yi(e)}function io(e,s){var h,m,x,S,H,et,ct,Ct;if(!e||e.length===0)throw new Error("latlngs not passed");yi(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var jt=$t([0,0]),oe=pe(e),xe=oe.getNorthWest().distanceTo(oe.getSouthWest())*oe.getNorthEast().distanceTo(oe.getNorthWest());xe<1700&&(jt=to(e));var pi=e.length,ei=[];for(h=0;h<pi;h++){var bi=$t(e[h]);ei.push(s.project($t([bi.lat-jt.lat,bi.lng-jt.lng])))}for(h=0,m=0;h<pi-1;h++)m+=ei[h].distanceTo(ei[h+1])/2;if(m===0)Ct=ei[0];else for(h=0,S=0;h<pi-1;h++)if(H=ei[h],et=ei[h+1],x=H.distanceTo(et),S+=x,S>m){ct=(S-m)/x,Ct=[et.x-ct*(et.x-H.x),et.y-ct*(et.y-H.y)];break}var He=s.unproject(At(Ct));return $t([He.lat+jt.lat,He.lng+jt.lng])}var rs={__proto__:null,simplify:ka,pointToSegmentDistance:eo,closestPointOnSegment:cu,clipSegment:Un,_getEdgeIntersection:xn,_getBitCode:_i,_sqClosestPointOnSegment:Br,isFlat:yi,_flat:Oi,polylineCenter:io},no={project:function(e){return new pt(e.lng,e.lat)},unproject:function(e){return new he(e.y,e.x)},bounds:new se([-180,-90],[180,90])},Ii={R:6378137,R_MINOR:6356752314245179e-9,bounds:new se([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(e){var s=Math.PI/180,h=this.R,m=e.lat*s,x=this.R_MINOR/h,S=Math.sqrt(1-x*x),H=S*Math.sin(m),et=Math.tan(Math.PI/4-m/2)/Math.pow((1-H)/(1+H),S/2);return m=-h*Math.log(Math.max(et,1e-10)),new pt(e.lng*s*h,m)},unproject:function(e){for(var s=180/Math.PI,h=this.R,m=this.R_MINOR/h,x=Math.sqrt(1-m*m),S=Math.exp(-e.y/h),H=Math.PI/2-2*Math.atan(S),et=0,ct=.1,Ct;et<15&&Math.abs(ct)>1e-7;et++)Ct=x*Math.sin(H),Ct=Math.pow((1-Ct)/(1+Ct),x/2),ct=Math.PI/2-2*Math.atan(S*Ct)-H,H+=ct;return new he(H*s,e.x*s/h)}},Qi={__proto__:null,LonLat:no,Mercator:Ii,SphericalMercator:Ht},ss=c({},Rt,{code:"EPSG:3395",projection:Ii,transformation:function(){var e=.5/(Math.PI*Ii.R);return j(e,.5,-e,.5)}()}),ro=c({},Rt,{code:"EPSG:4326",projection:no,transformation:j(1/180,1,-1/180,.5)}),so=c({},mt,{projection:no,transformation:j(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,s){var h=s.lng-e.lng,m=s.lat-e.lat;return Math.sqrt(h*h+m*m)},infinite:!0});mt.Earth=Rt,mt.EPSG3395=ss,mt.EPSG3857=V,mt.EPSG900913=tt,mt.EPSG4326=ro,mt.Simple=so;var di=bt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[y(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[y(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var s=e.target;if(s.hasLayer(this)){if(this._map=s,this._zoomAnimated=s._zoomAnimated,this.getEvents){var h=this.getEvents();s.on(h,this),this.once("remove",function(){s.off(h,this)},this)}this.onAdd(s),this.fire("add"),s.fire("layeradd",{layer:this})}}});Ce.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var s=y(e);return this._layers[s]?this:(this._layers[s]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e),this)},removeLayer:function(e){var s=y(e);return this._layers[s]?(this._loaded&&e.onRemove(this),delete this._layers[s],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return y(e)in this._layers},eachLayer:function(e,s){for(var h in this._layers)e.call(s,this._layers[h]);return this},_addLayers:function(e){e=e?ht(e)?e:[e]:[];for(var s=0,h=e.length;s<h;s++)this.addLayer(e[s])},_addZoomLimit:function(e){(!isNaN(e.options.maxZoom)||!isNaN(e.options.minZoom))&&(this._zoomBoundLayers[y(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var s=y(e);this._zoomBoundLayers[s]&&(delete this._zoomBoundLayers[s],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,s=-1/0,h=this._getZoomSpan();for(var m in this._zoomBoundLayers){var x=this._zoomBoundLayers[m].options;e=x.minZoom===void 0?e:Math.min(e,x.minZoom),s=x.maxZoom===void 0?s:Math.max(s,x.maxZoom)}this._layersMaxZoom=s===-1/0?void 0:s,this._layersMinZoom=e===1/0?void 0:e,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var nr=di.extend({initialize:function(e,s){K(this,s),this._layers={};var h,m;if(e)for(h=0,m=e.length;h<m;h++)this.addLayer(e[h])},addLayer:function(e){var s=this.getLayerId(e);return this._layers[s]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var s=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[s]&&this._map.removeLayer(this._layers[s]),delete this._layers[s],this},hasLayer:function(e){var s=typeof e=="number"?e:this.getLayerId(e);return s in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var s=Array.prototype.slice.call(arguments,1),h,m;for(h in this._layers)m=this._layers[h],m[e]&&m[e].apply(m,s);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,s){for(var h in this._layers)e.call(s,this._layers[h]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return y(e)}}),fu=function(e,s){return new nr(e,s)},Vi=nr.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),nr.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),nr.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new ue;for(var s in this._layers){var h=this._layers[s];e.extend(h.getBounds?h.getBounds():h.getLatLng())}return e}}),pu=function(e,s){return new Vi(e,s)},rr=Wt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){K(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,s){var h=this._getIconUrl(e);if(!h){if(e==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var m=this._createImg(h,s&&s.tagName==="IMG"?s:null);return this._setIconStyles(m,e),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),m},_setIconStyles:function(e,s){var h=this.options,m=h[s+"Size"];typeof m=="number"&&(m=[m,m]);var x=At(m),S=At(s==="shadow"&&h.shadowAnchor||h.iconAnchor||x&&x.divideBy(2,!0));e.className="leaflet-marker-"+s+" "+(h.className||""),S&&(e.style.marginLeft=-S.x+"px",e.style.marginTop=-S.y+"px"),x&&(e.style.width=x.x+"px",e.style.height=x.y+"px")},_createImg:function(e,s){return s=s||document.createElement("img"),s.src=e,s},_getIconUrl:function(e){return ee.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function mu(e){return new rr(e)}var Sr=rr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return typeof Sr.imagePath!="string"&&(Sr.imagePath=this._detectIconPath()),(this.options.imagePath||Sr.imagePath)+rr.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var s=function(h,m,x){var S=m.exec(h);return S&&S[x]};return e=s(e,/^url\((['"])?(.+)\1\)$/,2),e&&s(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=Pe("div","leaflet-default-icon-path",document.body),s=yn(e,"background-image")||yn(e,"backgroundImage");if(document.body.removeChild(e),s=this._stripUrl(s),s)return s;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),os=ci.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new bn(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ge(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ze(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var s=this._marker,h=s._map,m=this._marker.options.autoPanSpeed,x=this._marker.options.autoPanPadding,S=In(s._icon),H=h.getPixelBounds(),et=h.getPixelOrigin(),ct=xt(H.min._subtract(et).add(x),H.max._subtract(et).subtract(x));if(!ct.contains(S)){var Ct=At((Math.max(ct.max.x,S.x)-ct.max.x)/(H.max.x-ct.max.x)-(Math.min(ct.min.x,S.x)-ct.min.x)/(H.min.x-ct.min.x),(Math.max(ct.max.y,S.y)-ct.max.y)/(H.max.y-ct.max.y)-(Math.min(ct.min.y,S.y)-ct.min.y)/(H.min.y-ct.min.y)).multiplyBy(m);h.panBy(Ct,{animate:!1}),this._draggable._newPos._add(Ct),this._draggable._startPos._add(Ct),Xe(s._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=St(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(Qt(this._panRequest),this._panRequest=St(this._adjustPan.bind(this,e)))},_onDrag:function(e){var s=this._marker,h=s._shadow,m=In(s._icon),x=s._map.layerPointToLatLng(m);h&&Xe(h,m),s._latlng=x,e.latlng=x,e.oldLatLng=this._oldLatLng,s.fire("move",e).fire("drag",e)},_onDragEnd:function(e){Qt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),as=di.extend({options:{icon:new Sr,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,s){K(this,s),this._latlng=$t(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var s=this._latlng;return this._latlng=$t(e),this.update(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,s="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=e.icon.createIcon(this._icon),m=!1;h!==this._icon&&(this._icon&&this._removeIcon(),m=!0,e.title&&(h.title=e.title),h.tagName==="IMG"&&(h.alt=e.alt||"")),ge(h,s),e.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&me(h,"focus",this._panOnFocus,this);var x=e.icon.createShadow(this._shadow),S=!1;x!==this._shadow&&(this._removeShadow(),S=!0),x&&(ge(x,s),x.alt=""),this._shadow=x,e.opacity<1&&this._updateOpacity(),m&&this.getPane().appendChild(this._icon),this._initInteraction(),x&&S&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Fe(this._icon,"focus",this._panOnFocus,this),$e(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&$e(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&Xe(this._icon,e),this._shadow&&Xe(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var s=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(s)},_initInteraction:function(){if(this.options.interactive&&(ge(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),os)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new os(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&Ri(this._icon,e),this._shadow&&Ri(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var s=this.options.icon.options,h=s.iconSize?At(s.iconSize):At(0,0),m=s.iconAnchor?At(s.iconAnchor):At(0,0);e.panInside(this._latlng,{paddingTopLeft:m,paddingBottomRight:h.subtract(m)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function gu(e,s){return new as(e,s)}var un=di.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return K(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),tn=un.extend({options:{fill:!0,radius:10},initialize:function(e,s){K(this,s),this._latlng=$t(e),this._radius=this.options.radius},setLatLng:function(e){var s=this._latlng;return this._latlng=$t(e),this.redraw(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var s=e&&e.radius||this._radius;return un.prototype.setStyle.call(this,e),this.setRadius(s),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,s=this._radiusY||e,h=this._clickTolerance(),m=[e+h,s+h];this._pxBounds=new se(this._point.subtract(m),this._point.add(m))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ma(e,s){return new tn(e,s)}var oo=tn.extend({initialize:function(e,s,h){if(typeof s=="number"&&(s=c({},h,{radius:s})),K(this,s),this._latlng=$t(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new ue(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:un.prototype.setStyle,_project:function(){var e=this._latlng.lng,s=this._latlng.lat,h=this._map,m=h.options.crs;if(m.distance===Rt.distance){var x=Math.PI/180,S=this._mRadius/Rt.R/x,H=h.project([s+S,e]),et=h.project([s-S,e]),ct=H.add(et).divideBy(2),Ct=h.unproject(ct).lat,jt=Math.acos((Math.cos(S*x)-Math.sin(s*x)*Math.sin(Ct*x))/(Math.cos(s*x)*Math.cos(Ct*x)))/x;(isNaN(jt)||jt===0)&&(jt=S/Math.cos(Math.PI/180*s)),this._point=ct.subtract(h.getPixelOrigin()),this._radius=isNaN(jt)?0:ct.x-h.project([Ct,e-jt]).x,this._radiusY=ct.y-H.y}else{var oe=m.unproject(m.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(oe).x}this._updateBounds()}});function $n(e,s,h){return new oo(e,s,h)}var hn=un.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,s){K(this,s),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var s=1/0,h=null,m=Br,x,S,H=0,et=this._parts.length;H<et;H++)for(var ct=this._parts[H],Ct=1,jt=ct.length;Ct<jt;Ct++){x=ct[Ct-1],S=ct[Ct];var oe=m(e,x,S,!0);oe<s&&(s=oe,h=m(e,x,S))}return h&&(h.distance=Math.sqrt(s)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return io(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,s){return s=s||this._defaultShape(),e=$t(e),s.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new ue,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return yi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var s=[],h=yi(e),m=0,x=e.length;m<x;m++)h?(s[m]=$t(e[m]),this._bounds.extend(s[m])):s[m]=this._convertLatLngs(e[m]);return s},_project:function(){var e=new se;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),s=new pt(e,e);this._rawPxBounds&&(this._pxBounds=new se([this._rawPxBounds.min.subtract(s),this._rawPxBounds.max.add(s)]))},_projectLatlngs:function(e,s,h){var m=e[0]instanceof he,x=e.length,S,H;if(m){for(H=[],S=0;S<x;S++)H[S]=this._map.latLngToLayerPoint(e[S]),h.extend(H[S]);s.push(H)}else for(S=0;S<x;S++)this._projectLatlngs(e[S],s,h)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}var s=this._parts,h,m,x,S,H,et,ct;for(h=0,x=0,S=this._rings.length;h<S;h++)for(ct=this._rings[h],m=0,H=ct.length;m<H-1;m++)et=Un(ct[m],ct[m+1],e,m,!0),et&&(s[x]=s[x]||[],s[x].push(et[0]),(et[1]!==ct[m+1]||m===H-2)&&(s[x].push(et[1]),x++))}},_simplifyPoints:function(){for(var e=this._parts,s=this.options.smoothFactor,h=0,m=e.length;h<m;h++)e[h]=ka(e[h],s)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,s){var h,m,x,S,H,et,ct=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(h=0,S=this._parts.length;h<S;h++)for(et=this._parts[h],m=0,H=et.length,x=H-1;m<H;x=m++)if(!(!s&&m===0)&&eo(e,et[x],et[m])<=ct)return!0;return!1}});function _u(e,s){return new hn(e,s)}hn._flat=Oi;var wn=hn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ca(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var s=hn.prototype._convertLatLngs.call(this,e),h=s.length;return h>=2&&s[0]instanceof he&&s[0].equals(s[h-1])&&s.pop(),s},_setLatLngs:function(e){hn.prototype._setLatLngs.call(this,e),yi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return yi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,s=this.options.weight,h=new pt(s,s);if(e=new se(e.min.subtract(h),e.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}for(var m=0,x=this._rings.length,S;m<x;m++)S=La(this._rings[m],e,!0),S.length&&this._parts.push(S)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var s=!1,h,m,x,S,H,et,ct,Ct;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(S=0,ct=this._parts.length;S<ct;S++)for(h=this._parts[S],H=0,Ct=h.length,et=Ct-1;H<Ct;et=H++)m=h[H],x=h[et],m.y>e.y!=x.y>e.y&&e.x<(x.x-m.x)*(e.y-m.y)/(x.y-m.y)+m.x&&(s=!s);return s||hn.prototype._containsPoint.call(this,e,!0)}});function Ar(e,s){return new wn(e,s)}var cn=Vi.extend({initialize:function(e,s){K(this,s),this._layers={},e&&this.addData(e)},addData:function(e){var s=ht(e)?e:e.features,h,m,x;if(s){for(h=0,m=s.length;h<m;h++)x=s[h],(x.geometries||x.geometry||x.features||x.coordinates)&&this.addData(x);return this}var S=this.options;if(S.filter&&!S.filter(e))return this;var H=ls(e,S);return H?(H.feature=fs(e),H.defaultOptions=H.options,this.resetStyle(H),S.onEachFeature&&S.onEachFeature(e,H),this.addLayer(H)):this},resetStyle:function(e){return e===void 0?this.eachLayer(this.resetStyle,this):(e.options=c({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(s){this._setLayerStyle(s,e)},this)},_setLayerStyle:function(e,s){e.setStyle&&(typeof s=="function"&&(s=s(e.feature)),e.setStyle(s))}});function ls(e,s){var h=e.type==="Feature"?e.geometry:e,m=h?h.coordinates:null,x=[],S=s&&s.pointToLayer,H=s&&s.coordsToLatLng||us,et,ct,Ct,jt;if(!m&&!h)return null;switch(h.type){case"Point":return et=H(m),Pa(S,e,et,s);case"MultiPoint":for(Ct=0,jt=m.length;Ct<jt;Ct++)et=H(m[Ct]),x.push(Pa(S,e,et,s));return new Vi(x);case"LineString":case"MultiLineString":return ct=hs(m,h.type==="LineString"?0:1,H),new hn(ct,s);case"Polygon":case"MultiPolygon":return ct=hs(m,h.type==="Polygon"?1:2,H),new wn(ct,s);case"GeometryCollection":for(Ct=0,jt=h.geometries.length;Ct<jt;Ct++){var oe=ls({geometry:h.geometries[Ct],type:"Feature",properties:e.properties},s);oe&&x.push(oe)}return new Vi(x);case"FeatureCollection":for(Ct=0,jt=h.features.length;Ct<jt;Ct++){var xe=ls(h.features[Ct],s);xe&&x.push(xe)}return new Vi(x);default:throw new Error("Invalid GeoJSON object.")}}function Pa(e,s,h,m){return e?e(s,h):new as(h,m&&m.markersInheritOptions&&m)}function us(e){return new he(e[1],e[0],e[2])}function hs(e,s,h){for(var m=[],x=0,S=e.length,H;x<S;x++)H=s?hs(e[x],s-1,h):(h||us)(e[x]),m.push(H);return m}function cs(e,s){return e=$t(e),e.alt!==void 0?[N(e.lng,s),N(e.lat,s),N(e.alt,s)]:[N(e.lng,s),N(e.lat,s)]}function ds(e,s,h,m){for(var x=[],S=0,H=e.length;S<H;S++)x.push(s?ds(e[S],yi(e[S])?0:s-1,h,m):cs(e[S],m));return!s&&h&&x.length>0&&x.push(x[0].slice()),x}function sr(e,s){return e.feature?c({},e.feature,{geometry:s}):fs(s)}function fs(e){return e.type==="Feature"||e.type==="FeatureCollection"?e:{type:"Feature",properties:{},geometry:e}}var ps={toGeoJSON:function(e){return sr(this,{type:"Point",coordinates:cs(this.getLatLng(),e)})}};as.include(ps),oo.include(ps),tn.include(ps),hn.include({toGeoJSON:function(e){var s=!yi(this._latlngs),h=ds(this._latlngs,s?1:0,!1,e);return sr(this,{type:(s?"Multi":"")+"LineString",coordinates:h})}}),wn.include({toGeoJSON:function(e){var s=!yi(this._latlngs),h=s&&!yi(this._latlngs[0]),m=ds(this._latlngs,h?2:s?1:0,!0,e);return s||(m=[m]),sr(this,{type:(h?"Multi":"")+"Polygon",coordinates:m})}}),nr.include({toMultiPoint:function(e){var s=[];return this.eachLayer(function(h){s.push(h.toGeoJSON(e).geometry.coordinates)}),sr(this,{type:"MultiPoint",coordinates:s})},toGeoJSON:function(e){var s=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(s==="MultiPoint")return this.toMultiPoint(e);var h=s==="GeometryCollection",m=[];return this.eachLayer(function(x){if(x.toGeoJSON){var S=x.toGeoJSON(e);if(h)m.push(S.geometry);else{var H=fs(S);H.type==="FeatureCollection"?m.push.apply(m,H.features):m.push(H)}}}),h?sr(this,{geometries:m,type:"GeometryCollection"}):{type:"FeatureCollection",features:m}}});function ms(e,s){return new cn(e,s)}var Ba=ms,or=di.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,s,h){this._url=e,this._bounds=pe(s),K(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ge(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){$e(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&er(this._image),this},bringToBack:function(){return this._map&&Rn(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=pe(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e=this._url.tagName==="IMG",s=this._image=e?this._url:Pe("img");if(ge(s,"leaflet-image-layer"),this._zoomAnimated&&ge(s,"leaflet-zoom-animated"),this.options.className&&ge(s,this.options.className),s.onselectstart=E,s.onmousemove=E,s.onload=p(this.fire,this,"load"),s.onerror=p(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(s.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e){this._url=s.src;return}s.src=this._url,s.alt=this.options.alt},_animateZoom:function(e){var s=this._map.getZoomScale(e.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;On(this._image,h,s)},_reset:function(){var e=this._image,s=new se(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=s.getSize();Xe(e,s.min),e.style.width=h.x+"px",e.style.height=h.y+"px"},_updateOpacity:function(){Ri(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),yu=function(e,s,h){return new or(e,s,h)},Tr=or.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e=this._url.tagName==="VIDEO",s=this._image=e?this._url:Pe("video");if(ge(s,"leaflet-image-layer"),this._zoomAnimated&&ge(s,"leaflet-zoom-animated"),this.options.className&&ge(s,this.options.className),s.onselectstart=E,s.onmousemove=E,s.onloadeddata=p(this.fire,this,"load"),e){for(var h=s.getElementsByTagName("source"),m=[],x=0;x<h.length;x++)m.push(h[x].src);this._url=h.length>0?m:[s.src];return}ht(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(s.style,"objectFit")&&(s.style.objectFit="fill"),s.autoplay=!!this.options.autoplay,s.loop=!!this.options.loop,s.muted=!!this.options.muted,s.playsInline=!!this.options.playsInline;for(var S=0;S<this._url.length;S++){var H=Pe("source");H.src=this._url[S],s.appendChild(H)}}});function Sa(e,s,h){return new Tr(e,s,h)}var Aa=or.extend({_initImage:function(){var e=this._image=this._url;ge(e,"leaflet-image-layer"),this._zoomAnimated&&ge(e,"leaflet-zoom-animated"),this.options.className&&ge(e,this.options.className),e.onselectstart=E,e.onmousemove=E}});function vu(e,s,h){return new Aa(e,s,h)}var en=di.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,s){e&&(e instanceof he||ht(e))?(this._latlng=$t(e),K(this,s)):(K(this,e),this._source=s),this.options.content&&(this._content=this.options.content)},openOn:function(e){return e=arguments.length?e:this._source._map,e.hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&Ri(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&Ri(this._container,1),this.bringToFront(),this.options.interactive&&(ge(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(Ri(this._container,0),this._removeTimeout=setTimeout(p($e,void 0,this._container),200)):$e(this._container),this.options.interactive&&(Ze(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=$t(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&er(this._container),this},bringToBack:function(){return this._map&&Rn(this._container),this},_prepareOpen:function(e){var s=this._source;if(!s._map)return!1;if(s instanceof Vi){s=null;var h=this._source._layers;for(var m in h)if(h[m]._map){s=h[m];break}if(!s)return!1;this._source=s}if(!e)if(s.getCenter)e=s.getCenter();else if(s.getLatLng)e=s.getLatLng();else if(s.getBounds)e=s.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,s=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof s=="string")e.innerHTML=s;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(s)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),s=At(this.options.offset),h=this._getAnchor();this._zoomAnimated?Xe(this._container,e.add(h)):s=s.add(e).add(h);var m=this._containerBottom=-s.y,x=this._containerLeft=-Math.round(this._containerWidth/2)+s.x;this._container.style.bottom=m+"px",this._container.style.left=x+"px"}},_getAnchor:function(){return[0,0]}});Ce.include({_initOverlay:function(e,s,h,m){var x=s;return x instanceof e||(x=new e(m).setContent(s)),h&&x.setLatLng(h),x}}),di.include({_initOverlay:function(e,s,h,m){var x=h;return x instanceof e?(K(x,m),x._source=this):(x=s&&!m?s:new e(m,this),x.setContent(h)),x}});var Ln=en.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return e=arguments.length?e:this._source._map,!e.hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,en.prototype.openOn.call(this,e)},onAdd:function(e){en.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof un||this._source.on("preclick",Fn))},onRemove:function(e){en.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof un||this._source.off("preclick",Fn))},getEvents:function(){var e=en.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",s=this._container=Pe("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=Pe("div",e+"-content-wrapper",s);if(this._contentNode=Pe("div",e+"-content",h),Mr(s),Ys(this._contentNode),me(s,"contextmenu",Fn),this._tipContainer=Pe("div",e+"-tip-container",s),this._tip=Pe("div",e+"-tip",this._tipContainer),this.options.closeButton){var m=this._closeButton=Pe("a",e+"-close-button",s);m.setAttribute("role","button"),m.setAttribute("aria-label","Close popup"),m.href="#close",m.innerHTML='<span aria-hidden="true">&#215;</span>',me(m,"click",function(x){ri(x),this.close()},this)}},_updateLayout:function(){var e=this._contentNode,s=e.style;s.width="",s.whiteSpace="nowrap";var h=e.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),s.width=h+1+"px",s.whiteSpace="",s.height="";var m=e.offsetHeight,x=this.options.maxHeight,S="leaflet-popup-scrolled";x&&m>x?(s.height=x+"px",ge(e,S)):Ze(e,S),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var s=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),h=this._getAnchor();Xe(this._container,s.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var e=this._map,s=parseInt(yn(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+s,m=this._containerWidth,x=new pt(this._containerLeft,-h-this._containerBottom);x._add(In(this._container));var S=e.layerPointToContainerPoint(x),H=At(this.options.autoPanPadding),et=At(this.options.autoPanPaddingTopLeft||H),ct=At(this.options.autoPanPaddingBottomRight||H),Ct=e.getSize(),jt=0,oe=0;S.x+m+ct.x>Ct.x&&(jt=S.x+m-Ct.x+ct.x),S.x-jt-et.x<0&&(jt=S.x-et.x),S.y+h+ct.y>Ct.y&&(oe=S.y+h-Ct.y+ct.y),S.y-oe-et.y<0&&(oe=S.y-et.y),(jt||oe)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([jt,oe]))}},_getAnchor:function(){return At(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),bu=function(e,s){return new Ln(e,s)};Ce.mergeOptions({closePopupOnClick:!0}),Ce.include({openPopup:function(e,s,h){return this._initOverlay(Ln,e,s,h).openOn(this),this},closePopup:function(e){return e=arguments.length?e:this._popup,e&&e.close(),this}}),di.include({bindPopup:function(e,s){return this._popup=this._initOverlay(Ln,this._popup,e,s),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&(this instanceof Vi||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(!(!this._popup||!this._map)){Nn(e);var s=e.layer||e.target;if(this._popup._source===s&&!(s instanceof un)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng);return}this._popup._source=s,this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){e.originalEvent.keyCode===13&&this._openPopup(e)}});var gs=en.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){en.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){en.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=en.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip",s=e+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Pe("div",s),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+y(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var s,h,m=this._map,x=this._container,S=m.latLngToContainerPoint(m.getCenter()),H=m.layerPointToContainerPoint(e),et=this.options.direction,ct=x.offsetWidth,Ct=x.offsetHeight,jt=At(this.options.offset),oe=this._getAnchor();et==="top"?(s=ct/2,h=Ct):et==="bottom"?(s=ct/2,h=0):et==="center"?(s=ct/2,h=Ct/2):et==="right"?(s=0,h=Ct/2):et==="left"?(s=ct,h=Ct/2):H.x<S.x?(et="right",s=0,h=Ct/2):(et="left",s=ct+(jt.x+oe.x)*2,h=Ct/2),e=e.subtract(At(s,h,!0)).add(jt).add(oe),Ze(x,"leaflet-tooltip-right"),Ze(x,"leaflet-tooltip-left"),Ze(x,"leaflet-tooltip-top"),Ze(x,"leaflet-tooltip-bottom"),ge(x,"leaflet-tooltip-"+et),Xe(x,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&Ri(this._container,e)},_animateZoom:function(e){var s=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(s)},_getAnchor:function(){return At(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),xu=function(e,s){return new gs(e,s)};Ce.include({openTooltip:function(e,s,h){return this._initOverlay(gs,e,s,h).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),di.include({bindTooltip:function(e,s){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(gs,this._tooltip,e,s),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(!(!e&&this._tooltipHandlersAdded)){var s=e?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[s](h),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof Vi||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var s=typeof e.getElement=="function"&&e.getElement();s&&(me(s,"focus",function(){this._tooltip._source=e,this.openTooltip()},this),me(s,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var s=typeof e.getElement=="function"&&e.getElement();s&&s.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var s=this;this._map.once("moveend",function(){s._openOnceFlag=!1,s._openTooltip(e)});return}this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)}},_moveTooltip:function(e){var s=e.latlng,h,m;this._tooltip.options.sticky&&e.originalEvent&&(h=this._map.mouseEventToContainerPoint(e.originalEvent),m=this._map.containerPointToLayerPoint(h),s=this._map.layerPointToLatLng(m)),this._tooltip.setLatLng(s)}});var Ta=rr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var s=e&&e.tagName==="DIV"?e:document.createElement("div"),h=this.options;if(h.html instanceof Element?(Cr(s),s.appendChild(h.html)):s.innerHTML=h.html!==!1?h.html:"",h.bgPos){var m=At(h.bgPos);s.style.backgroundPosition=-m.x+"px "+-m.y+"px"}return this._setIconStyles(s,"icon"),s},createShadow:function(){return null}});function wu(e){return new Ta(e)}rr.Default=Sr;var Dr=di.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ee.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){K(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),$e(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(er(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Rn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=M(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof pt?e:new pt(e,e)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var s=this.getPane().children,h=-e(-1/0,1/0),m=0,x=s.length,S;m<x;m++)S=s[m].style.zIndex,s[m]!==this._container&&S&&(h=e(h,+S));isFinite(h)&&(this.options.zIndex=h+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ee.ielt9){Ri(this._container,this.options.opacity);var e=+new Date,s=!1,h=!1;for(var m in this._tiles){var x=this._tiles[m];if(!(!x.current||!x.loaded)){var S=Math.min(1,(e-x.loaded)/200);Ri(x.el,S),S<1?s=!0:(x.active?h=!0:this._onOpaqueTile(x),x.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),s&&(Qt(this._fadeFrame),this._fadeFrame=St(this._updateOpacity,this))}},_onOpaqueTile:E,_initContainer:function(){this._container||(this._container=Pe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,s=this.options.maxZoom;if(e!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===e?(this._levels[h].el.style.zIndex=s-Math.abs(e-h),this._onUpdateLevel(h)):($e(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var m=this._levels[e],x=this._map;return m||(m=this._levels[e]={},m.el=Pe("div","leaflet-tile-container leaflet-zoom-animated",this._container),m.el.style.zIndex=s,m.origin=x.project(x.unproject(x.getPixelOrigin()),e).round(),m.zoom=e,this._setZoomTransform(m,x.getCenter(),x.getZoom()),E(m.el.offsetWidth),this._onCreateLevel(m)),this._level=m,m}},_onUpdateLevel:E,_onRemoveLevel:E,_onCreateLevel:E,_pruneTiles:function(){if(this._map){var e,s,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(e in this._tiles)s=this._tiles[e],s.retain=s.current;for(e in this._tiles)if(s=this._tiles[e],s.current&&!s.active){var m=s.coords;this._retainParent(m.x,m.y,m.z,m.z-5)||this._retainChildren(m.x,m.y,m.z,m.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}},_removeTilesAtZoom:function(e){for(var s in this._tiles)this._tiles[s].coords.z===e&&this._removeTile(s)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)$e(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,s,h,m){var x=Math.floor(e/2),S=Math.floor(s/2),H=h-1,et=new pt(+x,+S);et.z=+H;var ct=this._tileCoordsToKey(et),Ct=this._tiles[ct];return Ct&&Ct.active?(Ct.retain=!0,!0):(Ct&&Ct.loaded&&(Ct.retain=!0),H>m?this._retainParent(x,S,H,m):!1)},_retainChildren:function(e,s,h,m){for(var x=2*e;x<2*e+2;x++)for(var S=2*s;S<2*s+2;S++){var H=new pt(x,S);H.z=h+1;var et=this._tileCoordsToKey(H),ct=this._tiles[et];if(ct&&ct.active){ct.retain=!0;continue}else ct&&ct.loaded&&(ct.retain=!0);h+1<m&&this._retainChildren(x,S,h+1,m)}},_resetView:function(e){var s=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),s,s)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var s=this.options;return s.minNativeZoom!==void 0&&e<s.minNativeZoom?s.minNativeZoom:s.maxNativeZoom!==void 0&&s.maxNativeZoom<e?s.maxNativeZoom:e},_setView:function(e,s,h,m){var x=Math.round(s);this.options.maxZoom!==void 0&&x>this.options.maxZoom||this.options.minZoom!==void 0&&x<this.options.minZoom?x=void 0:x=this._clampZoom(x);var S=this.options.updateWhenZooming&&x!==this._tileZoom;(!m||S)&&(this._tileZoom=x,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),x!==void 0&&this._update(e),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(e,s)},_setZoomTransforms:function(e,s){for(var h in this._levels)this._setZoomTransform(this._levels[h],e,s)},_setZoomTransform:function(e,s,h){var m=this._map.getZoomScale(h,e.zoom),x=e.origin.multiplyBy(m).subtract(this._map._getNewPixelOrigin(s,h)).round();ee.any3d?On(e.el,x,m):Xe(e.el,x)},_resetGrid:function(){var e=this._map,s=e.options.crs,h=this._tileSize=this.getTileSize(),m=this._tileZoom,x=this._map.getPixelWorldBounds(this._tileZoom);x&&(this._globalTileRange=this._pxBoundsToTileRange(x)),this._wrapX=s.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,s.wrapLng[0]],m).x/h.x),Math.ceil(e.project([0,s.wrapLng[1]],m).x/h.y)],this._wrapY=s.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([s.wrapLat[0],0],m).y/h.x),Math.ceil(e.project([s.wrapLat[1],0],m).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(e){var s=this._map,h=s._animatingZoom?Math.max(s._animateToZoom,s.getZoom()):s.getZoom(),m=s.getZoomScale(h,this._tileZoom),x=s.project(e,this._tileZoom).floor(),S=s.getSize().divideBy(m*2);return new se(x.subtract(S),x.add(S))},_update:function(e){var s=this._map;if(s){var h=this._clampZoom(s.getZoom());if(e===void 0&&(e=s.getCenter()),this._tileZoom!==void 0){var m=this._getTiledPixelBounds(e),x=this._pxBoundsToTileRange(m),S=x.getCenter(),H=[],et=this.options.keepBuffer,ct=new se(x.getBottomLeft().subtract([et,-et]),x.getTopRight().add([et,-et]));if(!(isFinite(x.min.x)&&isFinite(x.min.y)&&isFinite(x.max.x)&&isFinite(x.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ct in this._tiles){var jt=this._tiles[Ct].coords;(jt.z!==this._tileZoom||!ct.contains(new pt(jt.x,jt.y)))&&(this._tiles[Ct].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(e,h);return}for(var oe=x.min.y;oe<=x.max.y;oe++)for(var xe=x.min.x;xe<=x.max.x;xe++){var pi=new pt(xe,oe);if(pi.z=this._tileZoom,!!this._isValidTile(pi)){var ei=this._tiles[this._tileCoordsToKey(pi)];ei?ei.current=!0:H.push(pi)}}if(H.sort(function(He,nn){return He.distanceTo(S)-nn.distanceTo(S)}),H.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var bi=document.createDocumentFragment();for(xe=0;xe<H.length;xe++)this._addTile(H[xe],bi);this._level.el.appendChild(bi)}}}},_isValidTile:function(e){var s=this._map.options.crs;if(!s.infinite){var h=this._globalTileRange;if(!s.wrapLng&&(e.x<h.min.x||e.x>h.max.x)||!s.wrapLat&&(e.y<h.min.y||e.y>h.max.y))return!1}if(!this.options.bounds)return!0;var m=this._tileCoordsToBounds(e);return pe(this.options.bounds).overlaps(m)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var s=this._map,h=this.getTileSize(),m=e.scaleBy(h),x=m.add(h),S=s.unproject(m,e.z),H=s.unproject(x,e.z);return[S,H]},_tileCoordsToBounds:function(e){var s=this._tileCoordsToNwSe(e),h=new ue(s[0],s[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var s=e.split(":"),h=new pt(+s[0],+s[1]);return h.z=+s[2],h},_removeTile:function(e){var s=this._tiles[e];s&&($e(s.el),delete this._tiles[e],this.fire("tileunload",{tile:s.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){ge(e,"leaflet-tile");var s=this.getTileSize();e.style.width=s.x+"px",e.style.height=s.y+"px",e.onselectstart=E,e.onmousemove=E,ee.ielt9&&this.options.opacity<1&&Ri(e,this.options.opacity)},_addTile:function(e,s){var h=this._getTilePos(e),m=this._tileCoordsToKey(e),x=this.createTile(this._wrapCoords(e),p(this._tileReady,this,e));this._initTile(x),this.createTile.length<2&&St(p(this._tileReady,this,e,null,x)),Xe(x,h),this._tiles[m]={el:x,coords:e,current:!0},s.appendChild(x),this.fire("tileloadstart",{tile:x,coords:e})},_tileReady:function(e,s,h){s&&this.fire("tileerror",{error:s,tile:h,coords:e});var m=this._tileCoordsToKey(e);h=this._tiles[m],h&&(h.loaded=+new Date,this._map._fadeAnimated?(Ri(h.el,0),Qt(this._fadeFrame),this._fadeFrame=St(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),s||(ge(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ee.ielt9||!this._map._fadeAnimated?St(this._pruneTiles,this):setTimeout(p(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var s=new pt(this._wrapX?w(e.x,this._wrapX):e.x,this._wrapY?w(e.y,this._wrapY):e.y);return s.z=e.z,s},_pxBoundsToTileRange:function(e){var s=this.getTileSize();return new se(e.min.unscaleBy(s).floor(),e.max.unscaleBy(s).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function Lu(e){return new Dr(e)}var ar=Dr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,s){this._url=e,s=K(this,s),s.detectRetina&&ee.retina&&s.maxZoom>0?(s.tileSize=Math.floor(s.tileSize/2),s.zoomReverse?(s.zoomOffset--,s.minZoom=Math.min(s.maxZoom,s.minZoom+1)):(s.zoomOffset++,s.maxZoom=Math.max(s.minZoom,s.maxZoom-1)),s.minZoom=Math.max(0,s.minZoom)):s.zoomReverse?s.minZoom=Math.min(s.maxZoom,s.minZoom):s.maxZoom=Math.max(s.minZoom,s.maxZoom),typeof s.subdomains=="string"&&(s.subdomains=s.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,s){return this._url===e&&s===void 0&&(s=!0),this._url=e,s||this.redraw(),this},createTile:function(e,s){var h=document.createElement("img");return me(h,"load",p(this._tileOnLoad,this,s,h)),me(h,"error",p(this._tileOnError,this,s,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(e),h},getTileUrl:function(e){var s={r:ee.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-e.y;this.options.tms&&(s.y=h),s["-y"]=h}return ft(this._url,c(s,this.options))},_tileOnLoad:function(e,s){ee.ielt9?setTimeout(p(e,this,null,s),0):e(null,s)},_tileOnError:function(e,s,h){var m=this.options.errorTileUrl;m&&s.getAttribute("src")!==m&&(s.src=m),e(h,s)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,s=this.options.maxZoom,h=this.options.zoomReverse,m=this.options.zoomOffset;return h&&(e=s-e),e+m},_getSubdomain:function(e){var s=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[s]},_abortLoading:function(){var e,s;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&(s=this._tiles[e].el,s.onload=E,s.onerror=E,!s.complete)){s.src=dt;var h=this._tiles[e].coords;$e(s),delete this._tiles[e],this.fire("tileabort",{tile:s,coords:h})}},_removeTile:function(e){var s=this._tiles[e];if(s)return s.el.setAttribute("src",dt),Dr.prototype._removeTile.call(this,e)},_tileReady:function(e,s,h){if(!(!this._map||h&&h.getAttribute("src")===dt))return Dr.prototype._tileReady.call(this,e,s,h)}});function ao(e,s){return new ar(e,s)}var _s=ar.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,s){this._url=e;var h=c({},this.defaultWmsParams);for(var m in s)m in this.options||(h[m]=s[m]);s=K(this,s);var x=s.detectRetina&&ee.retina?2:1,S=this.getTileSize();h.width=S.x*x,h.height=S.y*x,this.wmsParams=h},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var s=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[s]=this._crs.code,ar.prototype.onAdd.call(this,e)},getTileUrl:function(e){var s=this._tileCoordsToNwSe(e),h=this._crs,m=xt(h.project(s[0]),h.project(s[1])),x=m.min,S=m.max,H=(this._wmsVersion>=1.3&&this._crs===ro?[x.y,x.x,S.y,S.x]:[x.x,x.y,S.x,S.y]).join(","),et=ar.prototype.getTileUrl.call(this,e);return et+X(this.wmsParams,et,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+H},setParams:function(e,s){return c(this.wmsParams,e),s||this.redraw(),this}});function Cu(e,s){return new _s(e,s)}ar.WMS=_s,ao.wms=Cu;var dn=di.extend({options:{padding:.1},initialize:function(e){K(this,e),y(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ge(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,s){var h=this._map.getZoomScale(s,this._zoom),m=this._map.getSize().multiplyBy(.5+this.options.padding),x=this._map.project(this._center,s),S=m.multiplyBy(-h).add(x).subtract(this._map._getNewPixelOrigin(e,s));ee.any3d?On(this._container,S,h):Xe(this._container,S)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var e in this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,s=this._map.getSize(),h=this._map.containerPointToLayerPoint(s.multiplyBy(-e)).round();this._bounds=new se(h,h.add(s.multiplyBy(1+e*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),lo=dn.extend({options:{tolerance:0},getEvents:function(){var e=dn.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){dn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");me(e,"mousemove",this._onMouseMove,this),me(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),me(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){Qt(this._redrawRequest),delete this._ctx,$e(this._container),Fe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var e;this._redrawBounds=null;for(var s in this._layers)e=this._layers[s],e._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){dn.prototype._update.call(this);var e=this._bounds,s=this._container,h=e.getSize(),m=ee.retina?2:1;Xe(s,e.min),s.width=m*h.x,s.height=m*h.y,s.style.width=h.x+"px",s.style.height=h.y+"px",ee.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){dn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[y(e)]=e;var s=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=s),this._drawLast=s,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var s=e._order,h=s.next,m=s.prev;h?h.prev=m:this._drawLast=m,m?m.next=h:this._drawFirst=h,delete e._order,delete this._layers[y(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if(typeof e.options.dashArray=="string"){var s=e.options.dashArray.split(/[, ]+/),h=[],m,x;for(x=0;x<s.length;x++){if(m=Number(s[x]),isNaN(m))return;h.push(m)}e.options._dashArray=h}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||St(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var s=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new se,this._redrawBounds.extend(e._pxBounds.min.subtract([s,s])),this._redrawBounds.extend(e._pxBounds.max.add([s,s]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var s=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,s.x,s.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,s=this._redrawBounds;if(this._ctx.save(),s){var h=s.getSize();this._ctx.beginPath(),this._ctx.rect(s.min.x,s.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var m=this._drawFirst;m;m=m.next)e=m.layer,(!s||e._pxBounds&&e._pxBounds.intersects(s))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,s){if(this._drawing){var h,m,x,S,H=e._parts,et=H.length,ct=this._ctx;if(et){for(ct.beginPath(),h=0;h<et;h++){for(m=0,x=H[h].length;m<x;m++)S=H[h][m],ct[m?"lineTo":"moveTo"](S.x,S.y);s&&ct.closePath()}this._fillStroke(ct,e)}}},_updateCircle:function(e){if(!(!this._drawing||e._empty())){var s=e._point,h=this._ctx,m=Math.max(Math.round(e._radius),1),x=(Math.max(Math.round(e._radiusY),1)||m)/m;x!==1&&(h.save(),h.scale(1,x)),h.beginPath(),h.arc(s.x,s.y/x,m,0,Math.PI*2,!1),x!==1&&h.restore(),this._fillStroke(h,e)}},_fillStroke:function(e,s){var h=s.options;h.fill&&(e.globalAlpha=h.fillOpacity,e.fillStyle=h.fillColor||h.color,e.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(e.setLineDash&&e.setLineDash(s.options&&s.options._dashArray||[]),e.globalAlpha=h.opacity,e.lineWidth=h.weight,e.strokeStyle=h.color,e.lineCap=h.lineCap,e.lineJoin=h.lineJoin,e.stroke())},_onClick:function(e){for(var s=this._map.mouseEventToLayerPoint(e),h,m,x=this._drawFirst;x;x=x.next)h=x.layer,h.options.interactive&&h._containsPoint(s)&&(!(e.type==="click"||e.type==="preclick")||!this._map._draggableMoved(h))&&(m=h);this._fireEvent(m?[m]:!1,e)},_onMouseMove:function(e){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var s=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,s)}},_handleMouseOut:function(e){var s=this._hoveredLayer;s&&(Ze(this._container,"leaflet-interactive"),this._fireEvent([s],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,s){if(!this._mouseHoverThrottled){for(var h,m,x=this._drawFirst;x;x=x.next)h=x.layer,h.options.interactive&&h._containsPoint(s)&&(m=h);m!==this._hoveredLayer&&(this._handleMouseOut(e),m&&(ge(this._container,"leaflet-interactive"),this._fireEvent([m],e,"mouseover"),this._hoveredLayer=m)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,e),this._mouseHoverThrottled=!0,setTimeout(p(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,s,h){this._map._fireDOMEvent(s,h||s.type,e)},_bringToFront:function(e){var s=e._order;if(s){var h=s.next,m=s.prev;if(h)h.prev=m;else return;m?m.next=h:h&&(this._drawFirst=h),s.prev=this._drawLast,this._drawLast.next=s,s.next=null,this._drawLast=s,this._requestRedraw(e)}},_bringToBack:function(e){var s=e._order;if(s){var h=s.next,m=s.prev;if(m)m.next=h;else return;h?h.prev=m:m&&(this._drawLast=m),s.prev=null,s.next=this._drawFirst,this._drawFirst.prev=s,this._drawFirst=s,this._requestRedraw(e)}}});function ys(e){return ee.canvas?new lo(e):null}var Rr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch{}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),ku={_initContainer:function(){this._container=Pe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(dn.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var s=e._container=Rr("shape");ge(s,"leaflet-vml-shape "+(this.options.className||"")),s.coordsize="1 1",e._path=Rr("path"),s.appendChild(e._path),this._updateStyle(e),this._layers[y(e)]=e},_addPath:function(e){var s=e._container;this._container.appendChild(s),e.options.interactive&&e.addInteractiveTarget(s)},_removePath:function(e){var s=e._container;$e(s),e.removeInteractiveTarget(s),delete this._layers[y(e)]},_updateStyle:function(e){var s=e._stroke,h=e._fill,m=e.options,x=e._container;x.stroked=!!m.stroke,x.filled=!!m.fill,m.stroke?(s||(s=e._stroke=Rr("stroke")),x.appendChild(s),s.weight=m.weight+"px",s.color=m.color,s.opacity=m.opacity,m.dashArray?s.dashStyle=ht(m.dashArray)?m.dashArray.join(" "):m.dashArray.replace(/( *, *)/g," "):s.dashStyle="",s.endcap=m.lineCap.replace("butt","flat"),s.joinstyle=m.lineJoin):s&&(x.removeChild(s),e._stroke=null),m.fill?(h||(h=e._fill=Rr("fill")),x.appendChild(h),h.color=m.fillColor||m.color,h.opacity=m.fillOpacity):h&&(x.removeChild(h),e._fill=null)},_updateCircle:function(e){var s=e._point.round(),h=Math.round(e._radius),m=Math.round(e._radiusY||h);this._setPath(e,e._empty()?"M0 0":"AL "+s.x+","+s.y+" "+h+","+m+" 0,"+65535*360)},_setPath:function(e,s){e._path.v=s},_bringToFront:function(e){er(e._container)},_bringToBack:function(e){Rn(e._container)}},lr=ee.vml?Rr:vt,ui=dn.extend({_initContainer:function(){this._container=lr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=lr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){$e(this._container),Fe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){dn.prototype._update.call(this);var e=this._bounds,s=e.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(s))&&(this._svgSize=s,h.setAttribute("width",s.x),h.setAttribute("height",s.y)),Xe(h,e.min),h.setAttribute("viewBox",[e.min.x,e.min.y,s.x,s.y].join(" ")),this.fire("update")}},_initPath:function(e){var s=e._path=lr("path");e.options.className&&ge(s,e.options.className),e.options.interactive&&ge(s,"leaflet-interactive"),this._updateStyle(e),this._layers[y(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){$e(e._path),e.removeInteractiveTarget(e._path),delete this._layers[y(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var s=e._path,h=e.options;s&&(h.stroke?(s.setAttribute("stroke",h.color),s.setAttribute("stroke-opacity",h.opacity),s.setAttribute("stroke-width",h.weight),s.setAttribute("stroke-linecap",h.lineCap),s.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?s.setAttribute("stroke-dasharray",h.dashArray):s.removeAttribute("stroke-dasharray"),h.dashOffset?s.setAttribute("stroke-dashoffset",h.dashOffset):s.removeAttribute("stroke-dashoffset")):s.setAttribute("stroke","none"),h.fill?(s.setAttribute("fill",h.fillColor||h.color),s.setAttribute("fill-opacity",h.fillOpacity),s.setAttribute("fill-rule",h.fillRule||"evenodd")):s.setAttribute("fill","none"))},_updatePoly:function(e,s){this._setPath(e,wt(e._parts,s))},_updateCircle:function(e){var s=e._point,h=Math.max(Math.round(e._radius),1),m=Math.max(Math.round(e._radiusY),1)||h,x="a"+h+","+m+" 0 1,0 ",S=e._empty()?"M0 0":"M"+(s.x-h)+","+s.y+x+h*2+",0 "+x+-h*2+",0 ";this._setPath(e,S)},_setPath:function(e,s){e._path.setAttribute("d",s)},_bringToFront:function(e){er(e._path)},_bringToBack:function(e){Rn(e._path)}});ee.vml&&ui.include(ku);function fi(e){return ee.svg||ee.vml?new ui(e):null}Ce.include({getRenderer:function(e){var s=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return s||(s=this._renderer=this._createRenderer()),this.hasLayer(s)||this.addLayer(s),s},_getPaneRenderer:function(e){if(e==="overlayPane"||e===void 0)return!1;var s=this._paneRenderers[e];return s===void 0&&(s=this._createRenderer({pane:e}),this._paneRenderers[e]=s),s},_createRenderer:function(e){return this.options.preferCanvas&&ys(e)||fi(e)}});var uo=wn.extend({initialize:function(e,s){wn.prototype.initialize.call(this,this._boundsToLatLngs(e),s)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=pe(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function Hi(e,s){return new uo(e,s)}ui.create=lr,ui.pointsToPath=wt,cn.geometryToLayer=ls,cn.coordsToLatLng=us,cn.coordsToLatLngs=hs,cn.latLngToCoords=cs,cn.latLngsToCoords=ds,cn.getFeature=sr,cn.asFeature=fs,Ce.mergeOptions({boxZoom:!0});var de=ci.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){me(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Fe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){$e(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||e.which!==1&&e.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),kr(),Hs(),this._startPoint=this._map.mouseEventToContainerPoint(e),me(document,{contextmenu:Nn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=Pe("div","leaflet-zoom-box",this._container),ge(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var s=new se(this._point,this._startPoint),h=s.getSize();Xe(this._box,s.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&($e(this._box),Ze(this._container,"leaflet-crosshair")),Er(),Zs(),Fe(document,{contextmenu:Nn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if(!(e.which!==1&&e.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(p(this._resetState,this),0);var s=new ue(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(s).fire("boxzoomend",{boxZoomBounds:s})}},_onKeyDown:function(e){e.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ce.addInitHook("addHandler","boxZoom",de),Ce.mergeOptions({doubleClickZoom:!0});var ho=ci.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var s=this._map,h=s.getZoom(),m=s.options.zoomDelta,x=e.originalEvent.shiftKey?h-m:h+m;s.options.doubleClickZoom==="center"?s.setZoom(x):s.setZoomAround(e.containerPoint,x)}});Ce.addInitHook("addHandler","doubleClickZoom",ho),Ce.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var vs=ci.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new bn(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}ge(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ze(this._map._container,"leaflet-grab"),Ze(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var s=pe(this._map.options.maxBounds);this._offsetLimit=xt(this._map.latLngToContainerPoint(s.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(s.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var s=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(s),this._prunePositions(s)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),s=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=s.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,s){return e-(e-s)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var e=this._draggable._newPos.subtract(this._draggable._startPos),s=this._offsetLimit;e.x<s.min.x&&(e.x=this._viscousLimit(e.x,s.min.x)),e.y<s.min.y&&(e.y=this._viscousLimit(e.y,s.min.y)),e.x>s.max.x&&(e.x=this._viscousLimit(e.x,s.max.x)),e.y>s.max.y&&(e.y=this._viscousLimit(e.y,s.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,s=Math.round(e/2),h=this._initialWorldOffset,m=this._draggable._newPos.x,x=(m-s+h)%e+s-h,S=(m+s+h)%e-s-h,H=Math.abs(x+h)<Math.abs(S+h)?x:S;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=H},_onDragEnd:function(e){var s=this._map,h=s.options,m=!h.inertia||e.noInertia||this._times.length<2;if(s.fire("dragend",e),m)s.fire("moveend");else{this._prunePositions(+new Date);var x=this._lastPos.subtract(this._positions[0]),S=(this._lastTime-this._times[0])/1e3,H=h.easeLinearity,et=x.multiplyBy(H/S),ct=et.distanceTo([0,0]),Ct=Math.min(h.inertiaMaxSpeed,ct),jt=et.multiplyBy(Ct/ct),oe=Ct/(h.inertiaDeceleration*H),xe=jt.multiplyBy(-oe/2).round();!xe.x&&!xe.y?s.fire("moveend"):(xe=s._limitOffset(xe,s.options.maxBounds),St(function(){s.panBy(xe,{duration:oe,easeLinearity:H,noMoveStart:!0,animate:!0})}))}}});Ce.addInitHook("addHandler","dragging",vs),Ce.mergeOptions({keyboard:!0,keyboardPanDelta:80});var fn=ci.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),me(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Fe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,s=document.documentElement,h=e.scrollTop||s.scrollTop,m=e.scrollLeft||s.scrollLeft;this._map._container.focus(),window.scrollTo(m,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var s=this._panKeys={},h=this.keyCodes,m,x;for(m=0,x=h.left.length;m<x;m++)s[h.left[m]]=[-1*e,0];for(m=0,x=h.right.length;m<x;m++)s[h.right[m]]=[e,0];for(m=0,x=h.down.length;m<x;m++)s[h.down[m]]=[0,e];for(m=0,x=h.up.length;m<x;m++)s[h.up[m]]=[0,-1*e]},_setZoomDelta:function(e){var s=this._zoomKeys={},h=this.keyCodes,m,x;for(m=0,x=h.zoomIn.length;m<x;m++)s[h.zoomIn[m]]=e;for(m=0,x=h.zoomOut.length;m<x;m++)s[h.zoomOut[m]]=-e},_addHooks:function(){me(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Fe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var s=e.keyCode,h=this._map,m;if(s in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(m=this._panKeys[s],e.shiftKey&&(m=At(m).multiplyBy(3)),h.options.maxBounds&&(m=h._limitOffset(At(m),h.options.maxBounds)),h.options.worldCopyJump){var x=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(m)));h.panTo(x)}else h.panBy(m)}else if(s in this._zoomKeys)h.setZoom(h.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[s]);else if(s===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;Nn(e)}}});Ce.addInitHook("addHandler","keyboard",fn),Ce.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var vi=ci.extend({addHooks:function(){me(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Fe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var s=ya(e),h=this._map.options.wheelDebounceTime;this._delta+=s,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var m=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(p(this._performZoom,this),m),Nn(e)},_performZoom:function(){var e=this._map,s=e.getZoom(),h=this._map.options.zoomSnap||0;e._stop();var m=this._delta/(this._map.options.wheelPxPerZoomLevel*4),x=4*Math.log(2/(1+Math.exp(-Math.abs(m))))/Math.LN2,S=h?Math.ceil(x/h)*h:x,H=e._limitZoom(s+(this._delta>0?S:-S))-s;this._delta=0,this._startTime=null,H&&(e.options.scrollWheelZoom==="center"?e.setZoom(s+H):e.setZoomAround(this._lastMousePos,s+H))}});Ce.addInitHook("addHandler","scrollWheelZoom",vi);var Da=600;Ce.mergeOptions({tapHold:ee.touchNative&&ee.safari&&ee.mobile,tapTolerance:15});var Pi=ci.extend({addHooks:function(){me(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Fe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),e.touches.length===1){var s=e.touches[0];this._startPos=this._newPos=new pt(s.clientX,s.clientY),this._holdTimeout=setTimeout(p(function(){this._cancel(),this._isTapValid()&&(me(document,"touchend",ri),me(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",s))},this),Da),me(document,"touchend touchcancel contextmenu",this._cancel,this),me(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){Fe(document,"touchend",ri),Fe(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),Fe(document,"touchend touchcancel contextmenu",this._cancel,this),Fe(document,"touchmove",this._onMove,this)},_onMove:function(e){var s=e.touches[0];this._newPos=new pt(s.clientX,s.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,s){var h=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:s.screenX,screenY:s.screenY,clientX:s.clientX,clientY:s.clientY});h._simulated=!0,s.target.dispatchEvent(h)}});Ce.addInitHook("addHandler","tapHold",Pi),Ce.mergeOptions({touchZoom:ee.touch,bounceAtZoomLimits:!0});var Bi=ci.extend({addHooks:function(){ge(this._map._container,"leaflet-touch-zoom"),me(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ze(this._map._container,"leaflet-touch-zoom"),Fe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var s=this._map;if(!(!e.touches||e.touches.length!==2||s._animatingZoom||this._zooming)){var h=s.mouseEventToContainerPoint(e.touches[0]),m=s.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=s.getSize()._divideBy(2),this._startLatLng=s.containerPointToLatLng(this._centerPoint),s.options.touchZoom!=="center"&&(this._pinchStartLatLng=s.containerPointToLatLng(h.add(m)._divideBy(2))),this._startDist=h.distanceTo(m),this._startZoom=s.getZoom(),this._moved=!1,this._zooming=!0,s._stop(),me(document,"touchmove",this._onTouchMove,this),me(document,"touchend touchcancel",this._onTouchEnd,this),ri(e)}},_onTouchMove:function(e){if(!(!e.touches||e.touches.length!==2||!this._zooming)){var s=this._map,h=s.mouseEventToContainerPoint(e.touches[0]),m=s.mouseEventToContainerPoint(e.touches[1]),x=h.distanceTo(m)/this._startDist;if(this._zoom=s.getScaleZoom(x,this._startZoom),!s.options.bounceAtZoomLimits&&(this._zoom<s.getMinZoom()&&x<1||this._zoom>s.getMaxZoom()&&x>1)&&(this._zoom=s._limitZoom(this._zoom)),s.options.touchZoom==="center"){if(this._center=this._startLatLng,x===1)return}else{var S=h._add(m)._divideBy(2)._subtract(this._centerPoint);if(x===1&&S.x===0&&S.y===0)return;this._center=s.unproject(s.project(this._pinchStartLatLng,this._zoom).subtract(S),this._zoom)}this._moved||(s._moveStart(!0,!1),this._moved=!0),Qt(this._animRequest);var H=p(s._move,s,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=St(H,this,!0),ri(e)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Qt(this._animRequest),Fe(document,"touchmove",this._onTouchMove,this),Fe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ce.addInitHook("addHandler","touchZoom",Bi),Ce.BoxZoom=de,Ce.DoubleClickZoom=ho,Ce.Drag=vs,Ce.Keyboard=fn,Ce.ScrollWheelZoom=vi,Ce.TapHold=Pi,Ce.TouchZoom=Bi,o.Bounds=se,o.Browser=ee,o.CRS=mt,o.Canvas=lo,o.Circle=oo,o.CircleMarker=tn,o.Class=Wt,o.Control=fe,o.DivIcon=Ta,o.DivOverlay=en,o.DomEvent=ts,o.DomUtil=ru,o.Draggable=bn,o.Evented=bt,o.FeatureGroup=Vi,o.GeoJSON=cn,o.GridLayer=Dr,o.Handler=ci,o.Icon=rr,o.ImageOverlay=or,o.LatLng=he,o.LatLngBounds=ue,o.Layer=di,o.LayerGroup=nr,o.LineUtil=rs,o.Map=Ce,o.Marker=as,o.Mixin=uu,o.Path=un,o.Point=pt,o.PolyUtil=hu,o.Polygon=wn,o.Polyline=hn,o.Popup=Ln,o.PosAnimation=va,o.Projection=Qi,o.Rectangle=uo,o.Renderer=dn,o.SVG=ui,o.SVGOverlay=Aa,o.TileLayer=ar,o.Tooltip=gs,o.Transformation=Le,o.Util=ce,o.VideoOverlay=Tr,o.bind=p,o.bounds=xt,o.canvas=ys,o.circle=$n,o.circleMarker=Ma,o.control=zn,o.divIcon=wu,o.extend=c,o.featureGroup=pu,o.geoJSON=ms,o.geoJson=Ba,o.gridLayer=Lu,o.icon=mu,o.imageOverlay=yu,o.latLng=$t,o.latLngBounds=pe,o.layerGroup=fu,o.map=ba,o.marker=gu,o.point=At,o.polygon=Ar,o.polyline=_u,o.popup=bu,o.rectangle=Hi,o.setOptions=K,o.stamp=y,o.svg=fi,o.svgOverlay=vu,o.tileLayer=ao,o.tooltip=xu,o.transformation=j,o.version=l,o.videoOverlay=Sa;var Gn=window.L;o.noConflict=function(){return window.L=Gn,this},window.L=o})})(bh,bh.exports);var Ni=bh.exports;const je=Cp(Ni);var Fi=63710088e-1,wb={centimeters:Fi*100,centimetres:Fi*100,degrees:Fi/111325,feet:Fi*3.28084,inches:Fi*39.37,kilometers:Fi/1e3,kilometres:Fi/1e3,meters:Fi,metres:Fi,miles:Fi/1609.344,millimeters:Fi*1e3,millimetres:Fi*1e3,nauticalmiles:Fi/1852,radians:1,yards:Fi*1.0936};function ml(t,n,o){o===void 0&&(o={});var l={type:"Feature"};return(o.id===0||o.id)&&(l.id=o.id),o.bbox&&(l.bbox=o.bbox),l.properties=n||{},l.geometry=t,l}function Sp(t,n,o){o===void 0&&(o={});for(var l=0,c=t;l<c.length;l++){var f=c[l];if(f.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var p=0;p<f[f.length-1].length;p++)if(f[f.length-1][p]!==f[0][p])throw new Error("First and last Position are not equivalent.")}var v={type:"Polygon",coordinates:t};return ml(v,n,o)}function Ho(t,n,o){if(o===void 0&&(o={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");var l={type:"LineString",coordinates:t};return ml(l,n,o)}function Lb(t,n){n===void 0&&(n="kilometers");var o=wb[n];if(!o)throw new Error(n+" units is invalid");return t*o}function Ha(t){var n=t%360;return n*Math.PI/180}function Ap(t,n,o){if(t!==null)for(var l,c,f,p,v,y,M,w=0,E=0,N,I=t.type,G=I==="FeatureCollection",K=I==="Feature",X=G?t.features.length:1,ut=0;ut<X;ut++){M=G?t.features[ut].geometry:K?t.geometry:t,N=M?M.type==="GeometryCollection":!1,v=N?M.geometries.length:1;for(var ft=0;ft<v;ft++){var ht=0,yt=0;if(p=N?M.geometries[ft]:M,p!==null){y=p.coordinates;var dt=p.type;switch(w=0,dt){case null:break;case"Point":if(n(y,E,ut,ht,yt)===!1)return!1;E++,ht++;break;case"LineString":case"MultiPoint":for(l=0;l<y.length;l++){if(n(y[l],E,ut,ht,yt)===!1)return!1;E++,dt==="MultiPoint"&&ht++}dt==="LineString"&&ht++;break;case"Polygon":case"MultiLineString":for(l=0;l<y.length;l++){for(c=0;c<y[l].length-w;c++){if(n(y[l][c],E,ut,ht,yt)===!1)return!1;E++}dt==="MultiLineString"&&ht++,dt==="Polygon"&&yt++}dt==="Polygon"&&ht++;break;case"MultiPolygon":for(l=0;l<y.length;l++){for(yt=0,c=0;c<y[l].length;c++){for(f=0;f<y[l][c].length-w;f++){if(n(y[l][c][f],E,ut,ht,yt)===!1)return!1;E++}yt++}ht++}break;case"GeometryCollection":for(l=0;l<p.geometries.length;l++)if(Ap(p.geometries[l],n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Tp(t,n){var o,l,c,f,p,v,y,M,w,E,N=0,I=t.type==="FeatureCollection",G=t.type==="Feature",K=I?t.features.length:1;for(o=0;o<K;o++){for(v=I?t.features[o].geometry:G?t.geometry:t,M=I?t.features[o].properties:G?t.properties:{},w=I?t.features[o].bbox:G?t.bbox:void 0,E=I?t.features[o].id:G?t.id:void 0,y=v?v.type==="GeometryCollection":!1,p=y?v.geometries.length:1,c=0;c<p;c++){if(f=y?v.geometries[c]:v,f===null){if(n(null,N,M,w,E)===!1)return!1;continue}switch(f.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(n(f,N,M,w,E)===!1)return!1;break}case"GeometryCollection":{for(l=0;l<f.geometries.length;l++)if(n(f.geometries[l],N,M,w,E)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}N++}}function Cb(t,n,o){var l=o;return Tp(t,function(c,f,p,v,y){l=n(l,c,f,p,v,y)}),l}function kb(t,n){Tp(t,function(o,l,c,f,p){var v=o===null?null:o.type;switch(v){case null:case"Point":case"LineString":case"Polygon":return n(ml(o,c,{bbox:f,id:p}),l,0)===!1?!1:void 0}var y;switch(v){case"MultiPoint":y="Point";break;case"MultiLineString":y="LineString";break;case"MultiPolygon":y="Polygon";break}for(var M=0;M<o.coordinates.length;M++){var w=o.coordinates[M],E={type:y,coordinates:w};if(n(ml(E,c),l,M)===!1)return!1}})}function Eb(t,n){kb(t,function(o,l,c){var f=0;if(o.geometry){var p=o.geometry.type;if(!(p==="Point"||p==="MultiPoint")){var v,y=0,M=0,w=0;if(Ap(o,function(E,N,I,G,K){if(v===void 0||l>y||G>M||K>w){v=E,y=l,M=G,w=K,f=0;return}var X=Ho([v,E],o.properties);if(n(X,l,c,K,f)===!1)return!1;f++,v=E})===!1)return!1}}})}function Mb(t,n,o){var l=o,c=!1;return Eb(t,function(f,p,v,y,M){c===!1&&o===void 0?l=f:l=n(l,f,p,v,y,M),c=!0}),l}function bd(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Zo(t,n,o){o===void 0&&(o={});var l=bd(t),c=bd(n),f=Ha(c[1]-l[1]),p=Ha(c[0]-l[0]),v=Ha(l[1]),y=Ha(c[1]),M=Math.pow(Math.sin(f/2),2)+Math.pow(Math.sin(p/2),2)*Math.cos(v)*Math.cos(y);return Lb(2*Math.atan2(Math.sqrt(M),Math.sqrt(1-M)),o.units)}var xd=6378137;function Dp(t){return Cb(t,function(n,o){return n+Pb(o)},0)}function Pb(t){var n=0,o;switch(t.type){case"Polygon":return wd(t.coordinates);case"MultiPolygon":for(o=0;o<t.coordinates.length;o++)n+=wd(t.coordinates[o]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function wd(t){var n=0;if(t&&t.length>0){n+=Math.abs(Ld(t[0]));for(var o=1;o<t.length;o++)n-=Math.abs(Ld(t[o]))}return n}function Ld(t){var n,o,l,c,f,p,v,y=0,M=t.length;if(M>2){for(v=0;v<M;v++)v===M-2?(c=M-2,f=M-1,p=0):v===M-1?(c=M-1,f=0,p=1):(c=v,f=v+1,p=v+2),n=t[c],o=t[f],l=t[p],y+=(Xu(l[0])-Xu(n[0]))*Math.sin(Xu(o[1]));y=y*xd*xd/2}return y}function Xu(t){return t*Math.PI/180}function gl(t,n){return n===void 0&&(n={}),Mb(t,function(o,l){var c=l.geometry.coordinates;return o+Zo(c[0],c[1],n)},0)}const Bb={class:"drawing-tools"},Sb={class:"mb-6"},Ab={class:"grid grid-cols-2 gap-2"},Tb=["onClick"],Db={class:"text-sm"},Rb={key:0,class:"mb-6"},Ob={class:"space-y-4"},Ib={class:"grid grid-cols-6 gap-2"},Fb=["onClick"],Nb={key:0},zb={class:"flex items-center space-x-2"},jb={class:"text-sm"},Ub={class:"flex items-center space-x-2"},$b={class:"text-sm"},Gb={class:"text-sm"},Vb=["value"],Hb={key:1},Zb={class:"mt-2 text-sm text-gray-600"},qb={key:2},Kb={key:3},Wb={class:"space-y-4"},Jb={class:"text-sm"},Xb={class:"flex items-center space-x-2"},Yb={class:"text-sm"},Qb={class:"flex items-center space-x-2"},t1={class:"text-sm"},e1={key:1,class:"mb-6"},i1={class:"space-y-2 text-sm"},n1={class:"font-medium"},r1={key:0},s1={key:1},o1={key:2},a1={key:3},l1={key:4},u1={key:5},h1=Wi({__name:"DrawingTools",props:{currentTool:{},selectedShape:{}},emits:["tool-change","style-update","properties-update"],setup(t,{emit:n}){const o=t,l=n,c=[{type:"Circle",label:"Cercle"},{type:"Semicircle",label:"Demi-cercle"},{type:"Rectangle",label:"Rectangle"},{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"Text",label:"Texte"}],f=["#2563EB","#DC2626","#059669","#D97706","#7C3AED","#DB2777"],p=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointillé"},{value:"dashdot",label:"Tiret-point"}],v=Xt("#3B82F6"),y=Xt(.2),M=Xt("#2563EB"),w=Xt(1),E=Xt(2),N=Xt("solid"),I=Xt(0),G=Xt(0),K=Ie(()=>{var ot,$;return($=(ot=o.selectedShape)==null?void 0:ot.properties)!=null&&$.type?["Circle","Semicircle","Rectangle","Polygon"].includes(o.selectedShape.properties.type):!1}),X=Xt(""),ut=Xt(14),ft=Xt("#FFFFFF"),ht=Xt(1),yt=Xt("#000000"),dt=Xt(1);Jn(()=>o.selectedShape,ot=>{var $,bt,pt,re,At,se,xt,ue,pe,he,$t,mt,Rt,It,Ht,Le,j,V,tt,vt;if(console.log("=== DRAWING TOOLS SHAPE UPDATE START ==="),console.log("Raw shape object:",Ee(ot)),console.log("Shape constructor:",($=ot==null?void 0:ot.constructor)==null?void 0:$.name),ot){if(!ot.properties||!ot.properties.type){console.warn("Invalid shape properties detected:",Ee(ot.properties));const wt=ot instanceof je.Circle?(bt=ot.options)!=null&&bt.isSemicircle?"semicircle":"circle":ot instanceof je.Rectangle?"rectangle":ot instanceof je.Polygon?"polygon":ot instanceof je.Polyline&&!(ot instanceof je.Polygon)?"line":"unknown";console.log("Detected shape type:",wt);const _t={type:wt,style:{color:((pt=ot.options)==null?void 0:pt.color)||"#3388ff",weight:((re=ot.options)==null?void 0:re.weight)||3,opacity:((At=ot.options)==null?void 0:At.opacity)||1,fillColor:((se=ot.options)==null?void 0:se.fillColor)||"#3388ff",fillOpacity:((xt=ot.options)==null?void 0:xt.fillOpacity)||.2,dashArray:((ue=ot.options)==null?void 0:ue.dashArray)||""}};if(ot instanceof je.Circle){const Tt=ot.getRadius();_t.radius=Tt,wt==="circle"?(_t.area=Math.PI*Math.pow(Tt,2),_t.perimeter=2*Math.PI*Tt):(_t.area=Math.PI*Math.pow(Tt,2)/2,_t.perimeter=Math.PI*Tt+2*Tt)}else if(ot instanceof je.Rectangle){const Tt=ot.getBounds(),Dt=Tt.getNorthEast(),Bt=Tt.getSouthWest(),kt=Zo([Bt.lng,Bt.lat],[Dt.lng,Bt.lat],{units:"meters"}),te=Zo([Bt.lng,Bt.lat],[Bt.lng,Dt.lat],{units:"meters"});_t.width=kt,_t.height=te,_t.area=kt*te,_t.perimeter=2*(kt+te)}else if(ot instanceof je.Polygon){const Dt=ot.getLatLngs()[0].map(kt=>[kt.lng,kt.lat]);Dt.push(Dt[0]);const Bt=Sp([Dt]);_t.area=Dp(Bt),_t.perimeter=gl(Ho([...Dt]),{units:"meters"})}else if(ot instanceof je.Polyline&&!(ot instanceof je.Polygon)){const Dt=ot.getLatLngs().map(kt=>[kt.lng,kt.lat]),Bt=Ho(Dt);_t.length=gl(Bt,{units:"meters"})}console.log("Created base properties:",_t),ot.properties=_t}console.log("Final shape properties:",Ee(ot.properties)),v.value=((pe=ot.properties.style)==null?void 0:pe.fillColor)||"#3B82F6",y.value=((he=ot.properties.style)==null?void 0:he.fillOpacity)||.2,M.value=(($t=ot.properties.style)==null?void 0:$t.color)||"#2563EB",w.value=((mt=ot.properties.style)==null?void 0:mt.opacity)||1,E.value=((Rt=ot.properties.style)==null?void 0:Rt.weight)||2,N.value=qt((It=ot.properties.style)==null?void 0:It.dashArray),I.value=ot.properties.radius||0,G.value=ot.properties.orientation||0,console.log("Updated UI controls:",{fillColor:v.value,fillOpacity:y.value,strokeColor:M.value,strokeOpacity:w.value,strokeWidth:E.value,strokeStyle:N.value,radius:I.value,startAngle:G.value}),ot&&((Ht=ot.properties)==null?void 0:Ht.type)==="text"&&(X.value=ot.properties.text||"",ut.value=((Le=ot.properties.style)==null?void 0:Le.fontSize)||14,ft.value=((j=ot.properties.style)==null?void 0:j.backgroundColor)||"#FFFFFF",ht.value=((V=ot.properties.style)==null?void 0:V.backgroundOpacity)||1,yt.value=((tt=ot.properties.style)==null?void 0:tt.borderColor)||"#000000",dt.value=((vt=ot.properties.style)==null?void 0:vt.borderOpacity)||1)}console.log("=== DRAWING TOOLS SHAPE UPDATE END ===")},{immediate:!0,deep:!0});const Mt=ot=>{switch(ot){case"dashed":return"10,10";case"dotted":return"2,5";case"dashdot":return"10,5,2,5";default:return""}},qt=ot=>{if(!ot)return"solid";switch(ot){case"10,10":return"dashed";case"2,5":return"dotted";case"10,5,2,5":return"dashdot";default:return"solid"}},Ut=ot=>{M.value=ot,K.value&&(v.value=ot),Vt({strokeColor:ot,fillColor:K.value?ot:void 0})},Vt=ot=>{l("style-update",{...ot,fillOpacity:ot.fillOpacity!==void 0?parseFloat(ot.fillOpacity):void 0,strokeOpacity:ot.strokeOpacity!==void 0?parseFloat(ot.strokeOpacity):void 0,strokeWidth:ot.strokeWidth!==void 0?parseInt(ot.strokeWidth):void 0})},Pt=ot=>{var $;if((($=o.selectedShape)==null?void 0:$.type)==="Semicircle"){const bt=ot.startAngle||G.value;l("properties-update",{...ot,orientation:bt,style:{startAngle:bt,stopAngle:bt+180}})}else l("properties-update",ot)},St=ot=>{const $={...ot,type:"text",style:{backgroundColor:ft.value,backgroundOpacity:ht.value,borderColor:yt.value,borderOpacity:dt.value,fontSize:`${ut.value}px`,text:X.value,padding:"5px 10px",borderRadius:"3px",fontWeight:"normal",color:"#000000"}},bt=`<div style="
    background-color: ${$.style.backgroundColor};
    border: 1px solid ${$.style.borderColor};
    padding: ${$.style.padding};
    border-radius: ${$.style.borderRadius};
    font-size: ${$.style.fontSize};
    font-weight: ${$.style.fontWeight};
    color: ${$.style.color};
    opacity: ${$.style.backgroundOpacity};"
  >${$.style.text}</div>`;if(o.selectedShape&&o.selectedShape.layer){const pt=je.divIcon({html:bt,className:""});o.selectedShape.layer.setIcon(pt)}l("properties-update",$)},Qt={circle:"Cercle",semicircle:"Demi-cercle",rectangle:"Rectangle",polygon:"Polygone",line:"Ligne",text:"Texte",unknown:"Inconnu"},ce=ot=>`${(ot/1e4).toFixed(2)} ha`,Wt=ot=>`${(ot/100).toFixed(2)} ha`;return(ot,$)=>{var bt,pt,re,At,se;return Ot(),Ft("div",Bb,[B("div",Sb,[$[28]||($[28]=B("h3",{class:"text-lg font-semibold mb-4"},"Outils de dessin",-1)),B("div",Ab,[(Ot(),Ft(Ke,null,ji(c,xt=>B("button",{key:xt.type,class:vr(["flex items-center justify-center p-2 rounded border",{"bg-blue-50 border-blue-200":ot.currentTool===xt.type,"hover:bg-gray-50 border-gray-200":ot.currentTool!==xt.type}]),onClick:ue=>ot.$emit("tool-change",xt.type)},[B("span",Db,Yt(xt.label),1)],10,Tb)),64))])]),ot.selectedShape?(Ot(),Ft("div",Rb,[$[41]||($[41]=B("h3",{class:"text-lg font-semibold mb-4"},"Style",-1)),B("div",Ob,[B("div",null,[$[29]||($[29]=B("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Couleurs prédéfinies ",-1)),B("div",Ib,[(Ot(),Ft(Ke,null,ji(f,xt=>B("button",{key:xt,class:"w-8 h-8 rounded-full border-2 border-gray-200",style:xl({backgroundColor:xt}),onClick:ue=>Ut(xt)},null,12,Fb)),64))])]),K.value?(Ot(),Ft("div",Nb,[$[30]||($[30]=B("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Couleur de remplissage ",-1)),B("div",zb,[we(B("input",{type:"color","onUpdate:modelValue":$[0]||($[0]=xt=>v.value=xt),class:"w-8 h-8 rounded border",onChange:$[1]||($[1]=xt=>Vt({fillColor:v.value}))},null,544),[[Ae,v.value]]),we(B("input",{type:"range","onUpdate:modelValue":$[2]||($[2]=xt=>y.value=xt),min:"0",max:"1",step:"0.1",class:"flex-1",onChange:$[3]||($[3]=xt=>Vt({fillOpacity:y.value}))},null,544),[[Ae,y.value]]),B("span",jb,Yt((y.value*100).toFixed(0))+"%",1)])])):ve("",!0),B("div",null,[$[31]||($[31]=B("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Couleur de bordure ",-1)),B("div",Ub,[we(B("input",{type:"color","onUpdate:modelValue":$[4]||($[4]=xt=>M.value=xt),class:"w-8 h-8 rounded border",onChange:$[5]||($[5]=xt=>Vt({strokeColor:M.value}))},null,544),[[Ae,M.value]]),we(B("input",{type:"range","onUpdate:modelValue":$[6]||($[6]=xt=>w.value=xt),min:"0",max:"1",step:"0.1",class:"flex-1",onChange:$[7]||($[7]=xt=>Vt({strokeOpacity:w.value}))},null,544),[[Ae,w.value]]),B("span",$b,Yt((w.value*100).toFixed(0))+"%",1)])]),B("div",null,[$[32]||($[32]=B("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Épaisseur de trait ",-1)),we(B("input",{type:"range","onUpdate:modelValue":$[8]||($[8]=xt=>E.value=xt),min:"1",max:"10",class:"w-full",onChange:$[9]||($[9]=xt=>Vt({strokeWidth:E.value}))},null,544),[[Ae,E.value]]),B("span",Gb,Yt(E.value)+"px",1)]),B("div",null,[$[33]||($[33]=B("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Type de trait ",-1)),we(B("select",{"onUpdate:modelValue":$[10]||($[10]=xt=>N.value=xt),class:"w-full px-2 py-1 rounded border",onChange:$[11]||($[11]=xt=>Vt({dashArray:Mt(N.value)}))},[(Ot(),Ft(Ke,null,ji(p,xt=>B("option",{key:xt.value,value:xt.value},Yt(xt.label),9,Vb)),64))],544),[[jo,N.value]])]),((bt=ot.selectedShape.properties)==null?void 0:bt.type)==="Circle"||((pt=ot.selectedShape.properties)==null?void 0:pt.type)==="Semicircle"?(Ot(),Ft("div",Hb,[$[35]||($[35]=B("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Rayon (m) ",-1)),we(B("input",{type:"number","onUpdate:modelValue":$[12]||($[12]=xt=>I.value=xt),min:"1",class:"w-full px-2 py-1 rounded border",onChange:$[13]||($[13]=xt=>Pt({radius:I.value}))},null,544),[[Ae,I.value]]),B("div",Zb,[Ui(" Diamètre: "+Yt((I.value*2).toFixed(1))+" m ",1),$[34]||($[34]=B("br",null,null,-1)),Ui(" Surface: "+Yt(ce(Math.PI*I.value*I.value)),1)])])):ve("",!0),((re=ot.selectedShape.properties)==null?void 0:re.type)==="Semicircle"?(Ot(),Ft("div",qb,[$[36]||($[36]=B("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Angle de départ (°) ",-1)),we(B("input",{type:"number","onUpdate:modelValue":$[14]||($[14]=xt=>G.value=xt),min:"0",max:"360",class:"w-full px-2 py-1 rounded border",onChange:$[15]||($[15]=xt=>Pt({startAngle:G.value}))},null,544),[[Ae,G.value]])])):ve("",!0),((At=ot.selectedShape.properties)==null?void 0:At.type)==="text"?(Ot(),Ft("div",Kb,[B("div",Wb,[B("div",null,[$[37]||($[37]=B("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Texte ",-1)),we(B("input",{type:"text","onUpdate:modelValue":$[16]||($[16]=xt=>X.value=xt),class:"w-full px-2 py-1 rounded border",onChange:$[17]||($[17]=xt=>St({text:X.value})),placeholder:"Entrez votre texte..."},null,544),[[Ae,X.value]])]),B("div",null,[$[38]||($[38]=B("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Taille de la police ",-1)),we(B("input",{type:"range","onUpdate:modelValue":$[18]||($[18]=xt=>ut.value=xt),min:"10",max:"32",class:"w-full",onChange:$[19]||($[19]=xt=>St({fontSize:ut.value}))},null,544),[[Ae,ut.value]]),B("span",Jb,Yt(ut.value)+"px",1)]),B("div",null,[$[39]||($[39]=B("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Couleur de fond ",-1)),B("div",Xb,[we(B("input",{type:"color","onUpdate:modelValue":$[20]||($[20]=xt=>ft.value=xt),class:"w-8 h-8 rounded border",onChange:$[21]||($[21]=xt=>St({backgroundColor:ft.value}))},null,544),[[Ae,ft.value]]),we(B("input",{type:"range","onUpdate:modelValue":$[22]||($[22]=xt=>ht.value=xt),min:"0",max:"1",step:"0.1",class:"flex-1",onChange:$[23]||($[23]=xt=>St({backgroundOpacity:ht.value}))},null,544),[[Ae,ht.value]]),B("span",Yb,Yt((ht.value*100).toFixed(0))+"%",1)])]),B("div",null,[$[40]||($[40]=B("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Couleur de bordure ",-1)),B("div",Qb,[we(B("input",{type:"color","onUpdate:modelValue":$[24]||($[24]=xt=>yt.value=xt),class:"w-8 h-8 rounded border",onChange:$[25]||($[25]=xt=>St({borderColor:yt.value}))},null,544),[[Ae,yt.value]]),we(B("input",{type:"range","onUpdate:modelValue":$[26]||($[26]=xt=>dt.value=xt),min:"0",max:"1",step:"0.1",class:"flex-1",onChange:$[27]||($[27]=xt=>St({borderOpacity:dt.value}))},null,544),[[Ae,dt.value]]),B("span",t1,Yt((dt.value*100).toFixed(0))+"%",1)])])])])):ve("",!0)])])):ve("",!0),(se=ot.selectedShape)!=null&&se.properties?(Ot(),Ft("div",e1,[$[42]||($[42]=B("h3",{class:"text-lg font-semibold mb-4"},"Propriétés",-1)),B("div",i1,[B("div",n1," Type: "+Yt(Qt[ot.selectedShape.properties.type]||"Non défini"),1),ot.selectedShape.properties.area?(Ot(),Ft("div",r1," Surface: "+Yt(ce(ot.selectedShape.properties.area)),1)):ve("",!0),ot.selectedShape.properties.length?(Ot(),Ft("div",s1," Longueur: "+Yt(Wt(ot.selectedShape.properties.length)),1)):ve("",!0),ot.selectedShape.properties.perimeter?(Ot(),Ft("div",o1," Périmètre: "+Yt(Wt(ot.selectedShape.properties.perimeter)),1)):ve("",!0),ot.selectedShape.properties.radius?(Ot(),Ft("div",a1," Rayon: "+Yt(Wt(ot.selectedShape.properties.radius)),1)):ve("",!0),ot.selectedShape.properties.width?(Ot(),Ft("div",l1," Largeur: "+Yt(Wt(ot.selectedShape.properties.width)),1)):ve("",!0),ot.selectedShape.properties.height?(Ot(),Ft("div",u1," Hauteur: "+Yt(Wt(ot.selectedShape.properties.height)),1)):ve("",!0)])])):ve("",!0)])}}}),c1=Bp(h1,[["__scopeId","data-v-c3c4cc1b"]]);(()=>{var tc,ec;var t=Object.create,n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,c=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,p=(i,r)=>()=>(r||i((r={exports:{}}).exports,r),r.exports),v=(i,r,a,u)=>{if(r&&typeof r=="object"||typeof r=="function")for(let d of l(r))!f.call(i,d)&&d!==a&&n(i,d,{get:()=>r[d],enumerable:!(u=o(r,d))||u.enumerable});return i},y=(i,r,a)=>(a=i!=null?t(c(i)):{},v(r||!i||!i.__esModule?n(a,"default",{value:i,enumerable:!0}):a,i)),M=p((i,r)=>{function a(){this.__data__=[],this.size=0}r.exports=a}),w=p((i,r)=>{function a(u,d){return u===d||u!==u&&d!==d}r.exports=a}),E=p((i,r)=>{var a=w();function u(d,g){for(var _=d.length;_--;)if(a(d[_][0],g))return _;return-1}r.exports=u}),N=p((i,r)=>{var a=E(),u=Array.prototype,d=u.splice;function g(_){var b=this.__data__,C=a(b,_);if(C<0)return!1;var P=b.length-1;return C==P?b.pop():d.call(b,C,1),--this.size,!0}r.exports=g}),I=p((i,r)=>{var a=E();function u(d){var g=this.__data__,_=a(g,d);return _<0?void 0:g[_][1]}r.exports=u}),G=p((i,r)=>{var a=E();function u(d){return a(this.__data__,d)>-1}r.exports=u}),K=p((i,r)=>{var a=E();function u(d,g){var _=this.__data__,b=a(_,d);return b<0?(++this.size,_.push([d,g])):_[b][1]=g,this}r.exports=u}),X=p((i,r)=>{var a=M(),u=N(),d=I(),g=G(),_=K();function b(C){var P=-1,U=C==null?0:C.length;for(this.clear();++P<U;){var F=C[P];this.set(F[0],F[1])}}b.prototype.clear=a,b.prototype.delete=u,b.prototype.get=d,b.prototype.has=g,b.prototype.set=_,r.exports=b}),ut=p((i,r)=>{var a=X();function u(){this.__data__=new a,this.size=0}r.exports=u}),ft=p((i,r)=>{function a(u){var d=this.__data__,g=d.delete(u);return this.size=d.size,g}r.exports=a}),ht=p((i,r)=>{function a(u){return this.__data__.get(u)}r.exports=a}),yt=p((i,r)=>{function a(u){return this.__data__.has(u)}r.exports=a}),dt=p((i,r)=>{var a=typeof Wn=="object"&&Wn&&Wn.Object===Object&&Wn;r.exports=a}),Mt=p((i,r)=>{var a=dt(),u=typeof self=="object"&&self&&self.Object===Object&&self,d=a||u||Function("return this")();r.exports=d}),qt=p((i,r)=>{var a=Mt(),u=a.Symbol;r.exports=u}),Ut=p((i,r)=>{var a=qt(),u=Object.prototype,d=u.hasOwnProperty,g=u.toString,_=a?a.toStringTag:void 0;function b(C){var P=d.call(C,_),U=C[_];try{C[_]=void 0;var F=!0}catch{}var rt=g.call(C);return F&&(P?C[_]=U:delete C[_]),rt}r.exports=b}),Vt=p((i,r)=>{var a=Object.prototype,u=a.toString;function d(g){return u.call(g)}r.exports=d}),Pt=p((i,r)=>{var a=qt(),u=Ut(),d=Vt(),g="[object Null]",_="[object Undefined]",b=a?a.toStringTag:void 0;function C(P){return P==null?P===void 0?_:g:b&&b in Object(P)?u(P):d(P)}r.exports=C}),St=p((i,r)=>{function a(u){var d=typeof u;return u!=null&&(d=="object"||d=="function")}r.exports=a}),Qt=p((i,r)=>{var a=Pt(),u=St(),d="[object AsyncFunction]",g="[object Function]",_="[object GeneratorFunction]",b="[object Proxy]";function C(P){if(!u(P))return!1;var U=a(P);return U==g||U==_||U==d||U==b}r.exports=C}),ce=p((i,r)=>{var a=Mt(),u=a["__core-js_shared__"];r.exports=u}),Wt=p((i,r)=>{var a=ce(),u=function(){var g=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}();function d(g){return!!u&&u in g}r.exports=d}),ot=p((i,r)=>{var a=Function.prototype,u=a.toString;function d(g){if(g!=null){try{return u.call(g)}catch{}try{return g+""}catch{}}return""}r.exports=d}),$=p((i,r)=>{var a=Qt(),u=Wt(),d=St(),g=ot(),_=/[\\^$.*+?()[\]{}|]/g,b=/^\[object .+?Constructor\]$/,C=Function.prototype,P=Object.prototype,U=C.toString,F=P.hasOwnProperty,rt=RegExp("^"+U.call(F).replace(_,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function at(Et){if(!d(Et)||u(Et))return!1;var Nt=a(Et)?rt:b;return Nt.test(g(Et))}r.exports=at}),bt=p((i,r)=>{function a(u,d){return u==null?void 0:u[d]}r.exports=a}),pt=p((i,r)=>{var a=$(),u=bt();function d(g,_){var b=u(g,_);return a(b)?b:void 0}r.exports=d}),re=p((i,r)=>{var a=pt(),u=Mt(),d=a(u,"Map");r.exports=d}),At=p((i,r)=>{var a=pt(),u=a(Object,"create");r.exports=u}),se=p((i,r)=>{var a=At();function u(){this.__data__=a?a(null):{},this.size=0}r.exports=u}),xt=p((i,r)=>{function a(u){var d=this.has(u)&&delete this.__data__[u];return this.size-=d?1:0,d}r.exports=a}),ue=p((i,r)=>{var a=At(),u="__lodash_hash_undefined__",d=Object.prototype,g=d.hasOwnProperty;function _(b){var C=this.__data__;if(a){var P=C[b];return P===u?void 0:P}return g.call(C,b)?C[b]:void 0}r.exports=_}),pe=p((i,r)=>{var a=At(),u=Object.prototype,d=u.hasOwnProperty;function g(_){var b=this.__data__;return a?b[_]!==void 0:d.call(b,_)}r.exports=g}),he=p((i,r)=>{var a=At(),u="__lodash_hash_undefined__";function d(g,_){var b=this.__data__;return this.size+=this.has(g)?0:1,b[g]=a&&_===void 0?u:_,this}r.exports=d}),$t=p((i,r)=>{var a=se(),u=xt(),d=ue(),g=pe(),_=he();function b(C){var P=-1,U=C==null?0:C.length;for(this.clear();++P<U;){var F=C[P];this.set(F[0],F[1])}}b.prototype.clear=a,b.prototype.delete=u,b.prototype.get=d,b.prototype.has=g,b.prototype.set=_,r.exports=b}),mt=p((i,r)=>{var a=$t(),u=X(),d=re();function g(){this.size=0,this.__data__={hash:new a,map:new(d||u),string:new a}}r.exports=g}),Rt=p((i,r)=>{function a(u){var d=typeof u;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?u!=="__proto__":u===null}r.exports=a}),It=p((i,r)=>{var a=Rt();function u(d,g){var _=d.__data__;return a(g)?_[typeof g=="string"?"string":"hash"]:_.map}r.exports=u}),Ht=p((i,r)=>{var a=It();function u(d){var g=a(this,d).delete(d);return this.size-=g?1:0,g}r.exports=u}),Le=p((i,r)=>{var a=It();function u(d){return a(this,d).get(d)}r.exports=u}),j=p((i,r)=>{var a=It();function u(d){return a(this,d).has(d)}r.exports=u}),V=p((i,r)=>{var a=It();function u(d,g){var _=a(this,d),b=_.size;return _.set(d,g),this.size+=_.size==b?0:1,this}r.exports=u}),tt=p((i,r)=>{var a=mt(),u=Ht(),d=Le(),g=j(),_=V();function b(C){var P=-1,U=C==null?0:C.length;for(this.clear();++P<U;){var F=C[P];this.set(F[0],F[1])}}b.prototype.clear=a,b.prototype.delete=u,b.prototype.get=d,b.prototype.has=g,b.prototype.set=_,r.exports=b}),vt=p((i,r)=>{var a=X(),u=re(),d=tt(),g=200;function _(b,C){var P=this.__data__;if(P instanceof a){var U=P.__data__;if(!u||U.length<g-1)return U.push([b,C]),this.size=++P.size,this;P=this.__data__=new d(U)}return P.set(b,C),this.size=P.size,this}r.exports=_}),wt=p((i,r)=>{var a=X(),u=ut(),d=ft(),g=ht(),_=yt(),b=vt();function C(P){var U=this.__data__=new a(P);this.size=U.size}C.prototype.clear=u,C.prototype.delete=d,C.prototype.get=g,C.prototype.has=_,C.prototype.set=b,r.exports=C}),_t=p((i,r)=>{var a=pt(),u=function(){try{var d=a(Object,"defineProperty");return d({},"",{}),d}catch{}}();r.exports=u}),Tt=p((i,r)=>{var a=_t();function u(d,g,_){g=="__proto__"&&a?a(d,g,{configurable:!0,enumerable:!0,value:_,writable:!0}):d[g]=_}r.exports=u}),Dt=p((i,r)=>{var a=Tt(),u=w();function d(g,_,b){(b!==void 0&&!u(g[_],b)||b===void 0&&!(_ in g))&&a(g,_,b)}r.exports=d}),Bt=p((i,r)=>{function a(u){return function(d,g,_){for(var b=-1,C=Object(d),P=_(d),U=P.length;U--;){var F=P[u?U:++b];if(g(C[F],F,C)===!1)break}return d}}r.exports=a}),kt=p((i,r)=>{var a=Bt(),u=a();r.exports=u}),te=p((i,r)=>{var a=Mt(),u=typeof i=="object"&&i&&!i.nodeType&&i,d=u&&typeof r=="object"&&r&&!r.nodeType&&r,g=d&&d.exports===u,_=g?a.Buffer:void 0,b=_?_.allocUnsafe:void 0;function C(P,U){if(U)return P.slice();var F=P.length,rt=b?b(F):new P.constructor(F);return P.copy(rt),rt}r.exports=C}),zt=p((i,r)=>{var a=Mt(),u=a.Uint8Array;r.exports=u}),ie=p((i,r)=>{var a=zt();function u(d){var g=new d.constructor(d.byteLength);return new a(g).set(new a(d)),g}r.exports=u}),le=p((i,r)=>{var a=ie();function u(d,g){var _=g?a(d.buffer):d.buffer;return new d.constructor(_,d.byteOffset,d.length)}r.exports=u}),be=p((i,r)=>{function a(u,d){var g=-1,_=u.length;for(d||(d=Array(_));++g<_;)d[g]=u[g];return d}r.exports=a}),Se=p((i,r)=>{var a=St(),u=Object.create,d=function(){function g(){}return function(_){if(!a(_))return{};if(u)return u(_);g.prototype=_;var b=new g;return g.prototype=void 0,b}}();r.exports=d}),Me=p((i,r)=>{function a(u,d){return function(g){return u(d(g))}}r.exports=a}),ai=p((i,r)=>{var a=Me(),u=a(Object.getPrototypeOf,Object);r.exports=u}),ti=p((i,r)=>{var a=Object.prototype;function u(d){var g=d&&d.constructor,_=typeof g=="function"&&g.prototype||a;return d===_}r.exports=u}),Ei=p((i,r)=>{var a=Se(),u=ai(),d=ti();function g(_){return typeof _.constructor=="function"&&!d(_)?a(u(_)):{}}r.exports=g}),ni=p((i,r)=>{function a(u){return u!=null&&typeof u=="object"}r.exports=a}),_n=p((i,r)=>{var a=Pt(),u=ni(),d="[object Arguments]";function g(_){return u(_)&&a(_)==d}r.exports=g}),Dn=p((i,r)=>{var a=_n(),u=ni(),d=Object.prototype,g=d.hasOwnProperty,_=d.propertyIsEnumerable,b=a(function(){return arguments}())?a:function(C){return u(C)&&g.call(C,"callee")&&!_.call(C,"callee")};r.exports=b}),Je=p((i,r)=>{var a=Array.isArray;r.exports=a}),Mi=p((i,r)=>{var a=9007199254740991;function u(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=a}r.exports=u}),Ji=p((i,r)=>{var a=Qt(),u=Mi();function d(g){return g!=null&&u(g.length)&&!a(g)}r.exports=d}),zl=p((i,r)=>{var a=Ji(),u=ni();function d(g){return u(g)&&a(g)}r.exports=d}),jl=p((i,r)=>{function a(){return!1}r.exports=a}),Is=p((i,r)=>{var a=Mt(),u=jl(),d=typeof i=="object"&&i&&!i.nodeType&&i,g=d&&typeof r=="object"&&r&&!r.nodeType&&r,_=g&&g.exports===d,b=_?a.Buffer:void 0,C=b?b.isBuffer:void 0,P=C||u;r.exports=P}),ia=p((i,r)=>{var a=Pt(),u=ai(),d=ni(),g="[object Object]",_=Function.prototype,b=Object.prototype,C=_.toString,P=b.hasOwnProperty,U=C.call(Object);function F(rt){if(!d(rt)||a(rt)!=g)return!1;var at=u(rt);if(at===null)return!0;var Et=P.call(at,"constructor")&&at.constructor;return typeof Et=="function"&&Et instanceof Et&&C.call(Et)==U}r.exports=F}),na=p((i,r)=>{var a=Pt(),u=Mi(),d=ni(),g="[object Arguments]",_="[object Array]",b="[object Boolean]",C="[object Date]",P="[object Error]",U="[object Function]",F="[object Map]",rt="[object Number]",at="[object Object]",Et="[object RegExp]",Nt="[object Set]",Zt="[object String]",ke="[object WeakMap]",z="[object ArrayBuffer]",Z="[object DataView]",Y="[object Float32Array]",lt="[object Float64Array]",Q="[object Int8Array]",st="[object Int16Array]",k="[object Int32Array]",A="[object Uint8Array]",D="[object Uint8ClampedArray]",T="[object Uint16Array]",R="[object Uint32Array]",O={};O[Y]=O[lt]=O[Q]=O[st]=O[k]=O[A]=O[D]=O[T]=O[R]=!0,O[g]=O[_]=O[z]=O[b]=O[Z]=O[C]=O[P]=O[U]=O[F]=O[rt]=O[at]=O[Et]=O[Nt]=O[Zt]=O[ke]=!1;function W(q){return d(q)&&u(q.length)&&!!O[a(q)]}r.exports=W}),Ul=p((i,r)=>{function a(u){return function(d){return u(d)}}r.exports=a}),$l=p((i,r)=>{var a=dt(),u=typeof i=="object"&&i&&!i.nodeType&&i,d=u&&typeof r=="object"&&r&&!r.nodeType&&r,g=d&&d.exports===u,_=g&&a.process,b=function(){try{var C=d&&d.require&&d.require("util").types;return C||_&&_.binding&&_.binding("util")}catch{}}();r.exports=b}),ra=p((i,r)=>{var a=na(),u=Ul(),d=$l(),g=d&&d.isTypedArray,_=g?u(g):a;r.exports=_}),sa=p((i,r)=>{function a(u,d){if(!(d==="constructor"&&typeof u[d]=="function")&&d!="__proto__")return u[d]}r.exports=a}),Gl=p((i,r)=>{var a=Tt(),u=w(),d=Object.prototype,g=d.hasOwnProperty;function _(b,C,P){var U=b[C];(!(g.call(b,C)&&u(U,P))||P===void 0&&!(C in b))&&a(b,C,P)}r.exports=_}),Vl=p((i,r)=>{var a=Gl(),u=Tt();function d(g,_,b,C){var P=!b;b||(b={});for(var U=-1,F=_.length;++U<F;){var rt=_[U],at=C?C(b[rt],g[rt],rt,b,g):void 0;at===void 0&&(at=g[rt]),P?u(b,rt,at):a(b,rt,at)}return b}r.exports=d}),Fs=p((i,r)=>{function a(u,d){for(var g=-1,_=Array(u);++g<u;)_[g]=d(g);return _}r.exports=a}),oa=p((i,r)=>{var a=9007199254740991,u=/^(?:0|[1-9]\d*)$/;function d(g,_){var b=typeof g;return _=_??a,!!_&&(b=="number"||b!="symbol"&&u.test(g))&&g>-1&&g%1==0&&g<_}r.exports=d}),Hl=p((i,r)=>{var a=Fs(),u=Dn(),d=Je(),g=Is(),_=oa(),b=ra(),C=Object.prototype,P=C.hasOwnProperty;function U(F,rt){var at=d(F),Et=!at&&u(F),Nt=!at&&!Et&&g(F),Zt=!at&&!Et&&!Nt&&b(F),ke=at||Et||Nt||Zt,z=ke?a(F.length,String):[],Z=z.length;for(var Y in F)(rt||P.call(F,Y))&&!(ke&&(Y=="length"||Nt&&(Y=="offset"||Y=="parent")||Zt&&(Y=="buffer"||Y=="byteLength"||Y=="byteOffset")||_(Y,Z)))&&z.push(Y);return z}r.exports=U}),Zl=p((i,r)=>{function a(u){var d=[];if(u!=null)for(var g in Object(u))d.push(g);return d}r.exports=a}),ql=p((i,r)=>{var a=St(),u=ti(),d=Zl(),g=Object.prototype,_=g.hasOwnProperty;function b(C){if(!a(C))return d(C);var P=u(C),U=[];for(var F in C)F=="constructor"&&(P||!_.call(C,F))||U.push(F);return U}r.exports=b}),Gi=p((i,r)=>{var a=Hl(),u=ql(),d=Ji();function g(_){return d(_)?a(_,!0):u(_)}r.exports=g}),ee=p((i,r)=>{var a=Vl(),u=Gi();function d(g){return a(g,u(g))}r.exports=d}),aa=p((i,r)=>{var a=Dt(),u=te(),d=le(),g=be(),_=Ei(),b=Dn(),C=Je(),P=zl(),U=Is(),F=Qt(),rt=St(),at=ia(),Et=ra(),Nt=sa(),Zt=ee();function ke(z,Z,Y,lt,Q,st,k){var A=Nt(z,Y),D=Nt(Z,Y),T=k.get(D);if(T){a(z,Y,T);return}var R=st?st(A,D,Y+"",z,Z,k):void 0,O=R===void 0;if(O){var W=C(D),q=!W&&U(D),J=!W&&!q&&Et(D);R=D,W||q||J?C(A)?R=A:P(A)?R=g(A):q?(O=!1,R=u(D,!0)):J?(O=!1,R=d(D,!0)):R=[]:at(D)||b(D)?(R=A,b(A)?R=Zt(A):(!rt(A)||F(A))&&(R=_(D))):O=!1}O&&(k.set(D,R),Q(R,D,lt,st,k),k.delete(D)),a(z,Y,R)}r.exports=ke}),la=p((i,r)=>{var a=wt(),u=Dt(),d=kt(),g=aa(),_=St(),b=Gi(),C=sa();function P(U,F,rt,at,Et){U!==F&&d(F,function(Nt,Zt){if(Et||(Et=new a),_(Nt))g(U,F,Zt,rt,P,at,Et);else{var ke=at?at(C(U,Zt),Nt,Zt+"",U,F,Et):void 0;ke===void 0&&(ke=Nt),u(U,Zt,ke)}},b)}r.exports=P}),Ns=p((i,r)=>{function a(u){return u}r.exports=a}),ua=p((i,r)=>{function a(u,d,g){switch(g.length){case 0:return u.call(d);case 1:return u.call(d,g[0]);case 2:return u.call(d,g[0],g[1]);case 3:return u.call(d,g[0],g[1],g[2])}return u.apply(d,g)}r.exports=a}),zs=p((i,r)=>{var a=ua(),u=Math.max;function d(g,_,b){return _=u(_===void 0?g.length-1:_,0),function(){for(var C=arguments,P=-1,U=u(C.length-_,0),F=Array(U);++P<U;)F[P]=C[_+P];P=-1;for(var rt=Array(_+1);++P<_;)rt[P]=C[P];return rt[_]=b(F),a(g,this,rt)}}r.exports=d}),ha=p((i,r)=>{function a(u){return function(){return u}}r.exports=a}),tr=p((i,r)=>{var a=ha(),u=_t(),d=Ns(),g=u?function(_,b){return u(_,"toString",{configurable:!0,enumerable:!1,value:a(b),writable:!0})}:d;r.exports=g}),ca=p((i,r)=>{var a=800,u=16,d=Date.now;function g(_){var b=0,C=0;return function(){var P=d(),U=u-(P-C);if(C=P,U>0){if(++b>=a)return arguments[0]}else b=0;return _.apply(void 0,arguments)}}r.exports=g}),Kl=p((i,r)=>{var a=tr(),u=ca(),d=u(a);r.exports=d}),Wl=p((i,r)=>{var a=Ns(),u=zs(),d=Kl();function g(_,b){return d(u(_,b,a),_+"")}r.exports=g}),Jl=p((i,r)=>{var a=w(),u=Ji(),d=oa(),g=St();function _(b,C,P){if(!g(P))return!1;var U=typeof C;return(U=="number"?u(P)&&d(C,P.length):U=="string"&&C in P)?a(P[C],b):!1}r.exports=_}),Xl=p((i,r)=>{var a=Wl(),u=Jl();function d(g){return a(function(_,b){var C=-1,P=b.length,U=P>1?b[P-1]:void 0,F=P>2?b[2]:void 0;for(U=g.length>3&&typeof U=="function"?(P--,U):void 0,F&&u(b[0],b[1],F)&&(U=P<3?void 0:U,P=1),_=Object(_);++C<P;){var rt=b[C];rt&&g(_,rt,C,U)}return _})}r.exports=d}),Kr=p((i,r)=>{var a=la(),u=Xl(),d=u(function(g,_,b){a(g,_,b)});r.exports=d}),js=p((i,r)=>{var a=Pt(),u=ni(),d="[object Symbol]";function g(_){return typeof _=="symbol"||u(_)&&a(_)==d}r.exports=g}),Wr=p((i,r)=>{var a=Je(),u=js(),d=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,g=/^\w*$/;function _(b,C){if(a(b))return!1;var P=typeof b;return P=="number"||P=="symbol"||P=="boolean"||b==null||u(b)?!0:g.test(b)||!d.test(b)||C!=null&&b in Object(C)}r.exports=_}),Yl=p((i,r)=>{var a=tt(),u="Expected a function";function d(g,_){if(typeof g!="function"||_!=null&&typeof _!="function")throw new TypeError(u);var b=function(){var C=arguments,P=_?_.apply(this,C):C[0],U=b.cache;if(U.has(P))return U.get(P);var F=g.apply(this,C);return b.cache=U.set(P,F)||U,F};return b.cache=new(d.Cache||a),b}d.Cache=a,r.exports=d}),Ql=p((i,r)=>{var a=Yl(),u=500;function d(g){var _=a(g,function(C){return b.size===u&&b.clear(),C}),b=_.cache;return _}r.exports=d}),tu=p((i,r)=>{var a=Ql(),u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,d=/\\(\\)?/g,g=a(function(_){var b=[];return _.charCodeAt(0)===46&&b.push(""),_.replace(u,function(C,P,U,F){b.push(U?F.replace(d,"$1"):P||C)}),b});r.exports=g}),eu=p((i,r)=>{function a(u,d){for(var g=-1,_=u==null?0:u.length,b=Array(_);++g<_;)b[g]=d(u[g],g,u);return b}r.exports=a}),iu=p((i,r)=>{var a=qt(),u=eu(),d=Je(),g=js(),_=a?a.prototype:void 0,b=_?_.toString:void 0;function C(P){if(typeof P=="string")return P;if(d(P))return u(P,C)+"";if(g(P))return b?b.call(P):"";var U=P+"";return U=="0"&&1/P==-1/0?"-0":U}r.exports=C}),Us=p((i,r)=>{var a=iu();function u(d){return d==null?"":a(d)}r.exports=u}),Lr=p((i,r)=>{var a=Je(),u=Wr(),d=tu(),g=Us();function _(b,C){return a(b)?b:u(b,C)?[b]:d(g(b))}r.exports=_}),da=p((i,r)=>{var a=js();function u(d){if(typeof d=="string"||a(d))return d;var g=d+"";return g=="0"&&1/d==-1/0?"-0":g}r.exports=u}),fa=p((i,r)=>{var a=Lr(),u=da();function d(g,_){_=a(_,g);for(var b=0,C=_.length;g!=null&&b<C;)g=g[u(_[b++])];return b&&b==C?g:void 0}r.exports=d}),yn=p((i,r)=>{var a=fa();function u(d,g,_){var b=d==null?void 0:a(d,g);return b===void 0?_:b}r.exports=u}),Pe=p((i,r)=>{(function(a,u){typeof i=="object"&&typeof r<"u"?r.exports=u():(a=a||self).RBush=u()})(i,function(){function a(z,Z,Y,lt,Q){(function st(k,A,D,T,R){for(;T>D;){if(T-D>600){var O=T-D+1,W=A-D+1,q=Math.log(O),J=.5*Math.exp(2*q/3),nt=.5*Math.sqrt(q*J*(O-J)/O)*(W-O/2<0?-1:1),it=Math.max(D,Math.floor(A-W*J/O+nt)),Lt=Math.min(T,Math.floor(A+(O-W)*J/O+nt));st(k,A,it,Lt,R)}var Gt=k[A],Kt=D,ne=T;for(u(k,D,A),R(k[T],Gt)>0&&u(k,D,T);Kt<ne;){for(u(k,Kt,ne),Kt++,ne--;R(k[Kt],Gt)<0;)Kt++;for(;R(k[ne],Gt)>0;)ne--}R(k[D],Gt)===0?u(k,D,ne):u(k,++ne,T),ne<=A&&(D=ne+1),A<=ne&&(T=ne-1)}})(z,Z,Y||0,lt||z.length-1,Q||d)}function u(z,Z,Y){var lt=z[Z];z[Z]=z[Y],z[Y]=lt}function d(z,Z){return z<Z?-1:z>Z?1:0}var g=function(z){z===void 0&&(z=9),this._maxEntries=Math.max(4,z),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function _(z,Z,Y){if(!Y)return Z.indexOf(z);for(var lt=0;lt<Z.length;lt++)if(Y(z,Z[lt]))return lt;return-1}function b(z,Z){C(z,0,z.children.length,Z,z)}function C(z,Z,Y,lt,Q){Q||(Q=Zt(null)),Q.minX=1/0,Q.minY=1/0,Q.maxX=-1/0,Q.maxY=-1/0;for(var st=Z;st<Y;st++){var k=z.children[st];P(Q,z.leaf?lt(k):k)}return Q}function P(z,Z){return z.minX=Math.min(z.minX,Z.minX),z.minY=Math.min(z.minY,Z.minY),z.maxX=Math.max(z.maxX,Z.maxX),z.maxY=Math.max(z.maxY,Z.maxY),z}function U(z,Z){return z.minX-Z.minX}function F(z,Z){return z.minY-Z.minY}function rt(z){return(z.maxX-z.minX)*(z.maxY-z.minY)}function at(z){return z.maxX-z.minX+(z.maxY-z.minY)}function Et(z,Z){return z.minX<=Z.minX&&z.minY<=Z.minY&&Z.maxX<=z.maxX&&Z.maxY<=z.maxY}function Nt(z,Z){return Z.minX<=z.maxX&&Z.minY<=z.maxY&&Z.maxX>=z.minX&&Z.maxY>=z.minY}function Zt(z){return{children:z,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function ke(z,Z,Y,lt,Q){for(var st=[Z,Y];st.length;)if(!((Y=st.pop())-(Z=st.pop())<=lt)){var k=Z+Math.ceil((Y-Z)/lt/2)*lt;a(z,k,Z,Y,Q),st.push(Z,k,k,Y)}}return g.prototype.all=function(){return this._all(this.data,[])},g.prototype.search=function(z){var Z=this.data,Y=[];if(!Nt(z,Z))return Y;for(var lt=this.toBBox,Q=[];Z;){for(var st=0;st<Z.children.length;st++){var k=Z.children[st],A=Z.leaf?lt(k):k;Nt(z,A)&&(Z.leaf?Y.push(k):Et(z,A)?this._all(k,Y):Q.push(k))}Z=Q.pop()}return Y},g.prototype.collides=function(z){var Z=this.data;if(!Nt(z,Z))return!1;for(var Y=[];Z;){for(var lt=0;lt<Z.children.length;lt++){var Q=Z.children[lt],st=Z.leaf?this.toBBox(Q):Q;if(Nt(z,st)){if(Z.leaf||Et(z,st))return!0;Y.push(Q)}}Z=Y.pop()}return!1},g.prototype.load=function(z){if(!z||!z.length)return this;if(z.length<this._minEntries){for(var Z=0;Z<z.length;Z++)this.insert(z[Z]);return this}var Y=this._build(z.slice(),0,z.length-1,0);if(this.data.children.length)if(this.data.height===Y.height)this._splitRoot(this.data,Y);else{if(this.data.height<Y.height){var lt=this.data;this.data=Y,Y=lt}this._insert(Y,this.data.height-Y.height-1,!0)}else this.data=Y;return this},g.prototype.insert=function(z){return z&&this._insert(z,this.data.height-1),this},g.prototype.clear=function(){return this.data=Zt([]),this},g.prototype.remove=function(z,Z){if(!z)return this;for(var Y,lt,Q,st=this.data,k=this.toBBox(z),A=[],D=[];st||A.length;){if(st||(st=A.pop(),lt=A[A.length-1],Y=D.pop(),Q=!0),st.leaf){var T=_(z,st.children,Z);if(T!==-1)return st.children.splice(T,1),A.push(st),this._condense(A),this}Q||st.leaf||!Et(st,k)?lt?(Y++,st=lt.children[Y],Q=!1):st=null:(A.push(st),D.push(Y),Y=0,lt=st,st=st.children[0])}return this},g.prototype.toBBox=function(z){return z},g.prototype.compareMinX=function(z,Z){return z.minX-Z.minX},g.prototype.compareMinY=function(z,Z){return z.minY-Z.minY},g.prototype.toJSON=function(){return this.data},g.prototype.fromJSON=function(z){return this.data=z,this},g.prototype._all=function(z,Z){for(var Y=[];z;)z.leaf?Z.push.apply(Z,z.children):Y.push.apply(Y,z.children),z=Y.pop();return Z},g.prototype._build=function(z,Z,Y,lt){var Q,st=Y-Z+1,k=this._maxEntries;if(st<=k)return b(Q=Zt(z.slice(Z,Y+1)),this.toBBox),Q;lt||(lt=Math.ceil(Math.log(st)/Math.log(k)),k=Math.ceil(st/Math.pow(k,lt-1))),(Q=Zt([])).leaf=!1,Q.height=lt;var A=Math.ceil(st/k),D=A*Math.ceil(Math.sqrt(k));ke(z,Z,Y,D,this.compareMinX);for(var T=Z;T<=Y;T+=D){var R=Math.min(T+D-1,Y);ke(z,T,R,A,this.compareMinY);for(var O=T;O<=R;O+=A){var W=Math.min(O+A-1,R);Q.children.push(this._build(z,O,W,lt-1))}}return b(Q,this.toBBox),Q},g.prototype._chooseSubtree=function(z,Z,Y,lt){for(;lt.push(Z),!Z.leaf&&lt.length-1!==Y;){for(var Q=1/0,st=1/0,k=void 0,A=0;A<Z.children.length;A++){var D=Z.children[A],T=rt(D),R=(O=z,W=D,(Math.max(W.maxX,O.maxX)-Math.min(W.minX,O.minX))*(Math.max(W.maxY,O.maxY)-Math.min(W.minY,O.minY))-T);R<st?(st=R,Q=T<Q?T:Q,k=D):R===st&&T<Q&&(Q=T,k=D)}Z=k||Z.children[0]}var O,W;return Z},g.prototype._insert=function(z,Z,Y){var lt=Y?z:this.toBBox(z),Q=[],st=this._chooseSubtree(lt,this.data,Z,Q);for(st.children.push(z),P(st,lt);Z>=0&&Q[Z].children.length>this._maxEntries;)this._split(Q,Z),Z--;this._adjustParentBBoxes(lt,Q,Z)},g.prototype._split=function(z,Z){var Y=z[Z],lt=Y.children.length,Q=this._minEntries;this._chooseSplitAxis(Y,Q,lt);var st=this._chooseSplitIndex(Y,Q,lt),k=Zt(Y.children.splice(st,Y.children.length-st));k.height=Y.height,k.leaf=Y.leaf,b(Y,this.toBBox),b(k,this.toBBox),Z?z[Z-1].children.push(k):this._splitRoot(Y,k)},g.prototype._splitRoot=function(z,Z){this.data=Zt([z,Z]),this.data.height=z.height+1,this.data.leaf=!1,b(this.data,this.toBBox)},g.prototype._chooseSplitIndex=function(z,Z,Y){for(var lt,Q,st,k,A,D,T,R=1/0,O=1/0,W=Z;W<=Y-Z;W++){var q=C(z,0,W,this.toBBox),J=C(z,W,Y,this.toBBox),nt=(Q=q,st=J,k=void 0,A=void 0,D=void 0,T=void 0,k=Math.max(Q.minX,st.minX),A=Math.max(Q.minY,st.minY),D=Math.min(Q.maxX,st.maxX),T=Math.min(Q.maxY,st.maxY),Math.max(0,D-k)*Math.max(0,T-A)),it=rt(q)+rt(J);nt<R?(R=nt,lt=W,O=it<O?it:O):nt===R&&it<O&&(O=it,lt=W)}return lt||Y-Z},g.prototype._chooseSplitAxis=function(z,Z,Y){var lt=z.leaf?this.compareMinX:U,Q=z.leaf?this.compareMinY:F;this._allDistMargin(z,Z,Y,lt)<this._allDistMargin(z,Z,Y,Q)&&z.children.sort(lt)},g.prototype._allDistMargin=function(z,Z,Y,lt){z.children.sort(lt);for(var Q=this.toBBox,st=C(z,0,Z,Q),k=C(z,Y-Z,Y,Q),A=at(st)+at(k),D=Z;D<Y-Z;D++){var T=z.children[D];P(st,z.leaf?Q(T):T),A+=at(st)}for(var R=Y-Z-1;R>=Z;R--){var O=z.children[R];P(k,z.leaf?Q(O):O),A+=at(k)}return A},g.prototype._adjustParentBBoxes=function(z,Z,Y){for(var lt=Y;lt>=0;lt--)P(Z[lt],z)},g.prototype._condense=function(z){for(var Z=z.length-1,Y=void 0;Z>=0;Z--)z[Z].children.length===0?Z>0?(Y=z[Z-1].children).splice(Y.indexOf(z[Z]),1):this.clear():b(z[Z],this.toBBox)},g})}),$e=p(i=>{Object.defineProperty(i,"__esModule",{value:!0}),i.earthRadius=63710088e-1,i.factors={centimeters:i.earthRadius*100,centimetres:i.earthRadius*100,degrees:i.earthRadius/111325,feet:i.earthRadius*3.28084,inches:i.earthRadius*39.37,kilometers:i.earthRadius/1e3,kilometres:i.earthRadius/1e3,meters:i.earthRadius,metres:i.earthRadius,miles:i.earthRadius/1609.344,millimeters:i.earthRadius*1e3,millimetres:i.earthRadius*1e3,nauticalmiles:i.earthRadius/1852,radians:1,yards:i.earthRadius*1.0936},i.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/i.earthRadius,yards:1.0936133},i.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function r(T,R,O){O===void 0&&(O={});var W={type:"Feature"};return(O.id===0||O.id)&&(W.id=O.id),O.bbox&&(W.bbox=O.bbox),W.properties=R||{},W.geometry=T,W}i.feature=r;function a(T,R,O){switch(T){case"Point":return u(R).geometry;case"LineString":return b(R).geometry;case"Polygon":return g(R).geometry;case"MultiPoint":return F(R).geometry;case"MultiLineString":return U(R).geometry;case"MultiPolygon":return rt(R).geometry;default:throw new Error(T+" is invalid")}}i.geometry=a;function u(T,R,O){if(O===void 0&&(O={}),!T)throw new Error("coordinates is required");if(!Array.isArray(T))throw new Error("coordinates must be an Array");if(T.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!st(T[0])||!st(T[1]))throw new Error("coordinates must contain numbers");var W={type:"Point",coordinates:T};return r(W,R,O)}i.point=u;function d(T,R,O){return O===void 0&&(O={}),P(T.map(function(W){return u(W,R)}),O)}i.points=d;function g(T,R,O){O===void 0&&(O={});for(var W=0,q=T;W<q.length;W++){var J=q[W];if(J.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var nt=0;nt<J[J.length-1].length;nt++)if(J[J.length-1][nt]!==J[0][nt])throw new Error("First and last Position are not equivalent.")}var it={type:"Polygon",coordinates:T};return r(it,R,O)}i.polygon=g;function _(T,R,O){return O===void 0&&(O={}),P(T.map(function(W){return g(W,R)}),O)}i.polygons=_;function b(T,R,O){if(O===void 0&&(O={}),T.length<2)throw new Error("coordinates must be an array of two or more positions");var W={type:"LineString",coordinates:T};return r(W,R,O)}i.lineString=b;function C(T,R,O){return O===void 0&&(O={}),P(T.map(function(W){return b(W,R)}),O)}i.lineStrings=C;function P(T,R){R===void 0&&(R={});var O={type:"FeatureCollection"};return R.id&&(O.id=R.id),R.bbox&&(O.bbox=R.bbox),O.features=T,O}i.featureCollection=P;function U(T,R,O){O===void 0&&(O={});var W={type:"MultiLineString",coordinates:T};return r(W,R,O)}i.multiLineString=U;function F(T,R,O){O===void 0&&(O={});var W={type:"MultiPoint",coordinates:T};return r(W,R,O)}i.multiPoint=F;function rt(T,R,O){O===void 0&&(O={});var W={type:"MultiPolygon",coordinates:T};return r(W,R,O)}i.multiPolygon=rt;function at(T,R,O){O===void 0&&(O={});var W={type:"GeometryCollection",geometries:T};return r(W,R,O)}i.geometryCollection=at;function Et(T,R){if(R===void 0&&(R=0),R&&!(R>=0))throw new Error("precision must be a positive number");var O=Math.pow(10,R||0);return Math.round(T*O)/O}i.round=Et;function Nt(T,R){R===void 0&&(R="kilometers");var O=i.factors[R];if(!O)throw new Error(R+" units is invalid");return T*O}i.radiansToLength=Nt;function Zt(T,R){R===void 0&&(R="kilometers");var O=i.factors[R];if(!O)throw new Error(R+" units is invalid");return T/O}i.lengthToRadians=Zt;function ke(T,R){return Z(Zt(T,R))}i.lengthToDegrees=ke;function z(T){var R=T%360;return R<0&&(R+=360),R}i.bearingToAzimuth=z;function Z(T){var R=T%(2*Math.PI);return R*180/Math.PI}i.radiansToDegrees=Z;function Y(T){var R=T%360;return R*Math.PI/180}i.degreesToRadians=Y;function lt(T,R,O){if(R===void 0&&(R="kilometers"),O===void 0&&(O="kilometers"),!(T>=0))throw new Error("length must be a positive number");return Nt(Zt(T,R),O)}i.convertLength=lt;function Q(T,R,O){if(R===void 0&&(R="meters"),O===void 0&&(O="kilometers"),!(T>=0))throw new Error("area must be a positive number");var W=i.areaFactors[R];if(!W)throw new Error("invalid original units");var q=i.areaFactors[O];if(!q)throw new Error("invalid final units");return T/W*q}i.convertArea=Q;function st(T){return!isNaN(T)&&T!==null&&!Array.isArray(T)}i.isNumber=st;function k(T){return!!T&&T.constructor===Object}i.isObject=k;function A(T){if(!T)throw new Error("bbox is required");if(!Array.isArray(T))throw new Error("bbox must be an Array");if(T.length!==4&&T.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");T.forEach(function(R){if(!st(R))throw new Error("bbox must only contain numbers")})}i.validateBBox=A;function D(T){if(!T)throw new Error("id is required");if(["string","number"].indexOf(typeof T)===-1)throw new Error("id must be a number or a string")}i.validateId=D}),Cr=p(i=>{Object.defineProperty(i,"__esModule",{value:!0});var r=$e();function a(Z,Y,lt){if(Z!==null)for(var Q,st,k,A,D,T,R,O=0,W=0,q,J=Z.type,nt=J==="FeatureCollection",it=J==="Feature",Lt=nt?Z.features.length:1,Gt=0;Gt<Lt;Gt++){R=nt?Z.features[Gt].geometry:it?Z.geometry:Z,q=R?R.type==="GeometryCollection":!1,D=q?R.geometries.length:1;for(var Kt=0;Kt<D;Kt++){var ne=0,De=0;if(A=q?R.geometries[Kt]:R,A!==null){T=A.coordinates;var Ne=A.type;switch(O=lt&&(Ne==="Polygon"||Ne==="MultiPolygon")?1:0,Ne){case null:break;case"Point":if(Y(T,W,Gt,ne,De)===!1)return!1;W++,ne++;break;case"LineString":case"MultiPoint":for(Q=0;Q<T.length;Q++){if(Y(T[Q],W,Gt,ne,De)===!1)return!1;W++,Ne==="MultiPoint"&&ne++}Ne==="LineString"&&ne++;break;case"Polygon":case"MultiLineString":for(Q=0;Q<T.length;Q++){for(st=0;st<T[Q].length-O;st++){if(Y(T[Q][st],W,Gt,ne,De)===!1)return!1;W++}Ne==="MultiLineString"&&ne++,Ne==="Polygon"&&De++}Ne==="Polygon"&&ne++;break;case"MultiPolygon":for(Q=0;Q<T.length;Q++){for(De=0,st=0;st<T[Q].length;st++){for(k=0;k<T[Q][st].length-O;k++){if(Y(T[Q][st][k],W,Gt,ne,De)===!1)return!1;W++}De++}ne++}break;case"GeometryCollection":for(Q=0;Q<A.geometries.length;Q++)if(a(A.geometries[Q],Y,lt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function u(Z,Y,lt,Q){var st=lt;return a(Z,function(k,A,D,T,R){A===0&&lt===void 0?st=k:st=Y(st,k,A,D,T,R)},Q),st}function d(Z,Y){var lt;switch(Z.type){case"FeatureCollection":for(lt=0;lt<Z.features.length&&Y(Z.features[lt].properties,lt)!==!1;lt++);break;case"Feature":Y(Z.properties,0);break}}function g(Z,Y,lt){var Q=lt;return d(Z,function(st,k){k===0&&lt===void 0?Q=st:Q=Y(Q,st,k)}),Q}function _(Z,Y){if(Z.type==="Feature")Y(Z,0);else if(Z.type==="FeatureCollection")for(var lt=0;lt<Z.features.length&&Y(Z.features[lt],lt)!==!1;lt++);}function b(Z,Y,lt){var Q=lt;return _(Z,function(st,k){k===0&&lt===void 0?Q=st:Q=Y(Q,st,k)}),Q}function C(Z){var Y=[];return a(Z,function(lt){Y.push(lt)}),Y}function P(Z,Y){var lt,Q,st,k,A,D,T,R,O,W,q=0,J=Z.type==="FeatureCollection",nt=Z.type==="Feature",it=J?Z.features.length:1;for(lt=0;lt<it;lt++){for(D=J?Z.features[lt].geometry:nt?Z.geometry:Z,R=J?Z.features[lt].properties:nt?Z.properties:{},O=J?Z.features[lt].bbox:nt?Z.bbox:void 0,W=J?Z.features[lt].id:nt?Z.id:void 0,T=D?D.type==="GeometryCollection":!1,A=T?D.geometries.length:1,st=0;st<A;st++){if(k=T?D.geometries[st]:D,k===null){if(Y(null,q,R,O,W)===!1)return!1;continue}switch(k.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(Y(k,q,R,O,W)===!1)return!1;break}case"GeometryCollection":{for(Q=0;Q<k.geometries.length;Q++)if(Y(k.geometries[Q],q,R,O,W)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}q++}}function U(Z,Y,lt){var Q=lt;return P(Z,function(st,k,A,D,T){k===0&&lt===void 0?Q=st:Q=Y(Q,st,k,A,D,T)}),Q}function F(Z,Y){P(Z,function(lt,Q,st,k,A){var D=lt===null?null:lt.type;switch(D){case null:case"Point":case"LineString":case"Polygon":return Y(r.feature(lt,st,{bbox:k,id:A}),Q,0)===!1?!1:void 0}var T;switch(D){case"MultiPoint":T="Point";break;case"MultiLineString":T="LineString";break;case"MultiPolygon":T="Polygon";break}for(var R=0;R<lt.coordinates.length;R++){var O=lt.coordinates[R],W={type:T,coordinates:O};if(Y(r.feature(W,st),Q,R)===!1)return!1}})}function rt(Z,Y,lt){var Q=lt;return F(Z,function(st,k,A){k===0&&A===0&&lt===void 0?Q=st:Q=Y(Q,st,k,A)}),Q}function at(Z,Y){F(Z,function(lt,Q,st){var k=0;if(lt.geometry){var A=lt.geometry.type;if(!(A==="Point"||A==="MultiPoint")){var D,T=0,R=0,O=0;if(a(lt,function(W,q,J,nt,it){if(D===void 0||Q>T||nt>R||it>O){D=W,T=Q,R=nt,O=it,k=0;return}var Lt=r.lineString([D,W],lt.properties);if(Y(Lt,Q,st,it,k)===!1)return!1;k++,D=W})===!1)return!1}}})}function Et(Z,Y,lt){var Q=lt,st=!1;return at(Z,function(k,A,D,T,R){st===!1&&lt===void 0?Q=k:Q=Y(Q,k,A,D,T,R),st=!0}),Q}function Nt(Z,Y){if(!Z)throw new Error("geojson is required");F(Z,function(lt,Q,st){if(lt.geometry!==null){var k=lt.geometry.type,A=lt.geometry.coordinates;switch(k){case"LineString":if(Y(lt,Q,st,0,0)===!1)return!1;break;case"Polygon":for(var D=0;D<A.length;D++)if(Y(r.lineString(A[D],lt.properties),Q,st,D)===!1)return!1;break}}})}function Zt(Z,Y,lt){var Q=lt;return Nt(Z,function(st,k,A,D){k===0&&lt===void 0?Q=st:Q=Y(Q,st,k,A,D)}),Q}function ke(Z,Y){if(Y=Y||{},!r.isObject(Y))throw new Error("options is invalid");var lt=Y.featureIndex||0,Q=Y.multiFeatureIndex||0,st=Y.geometryIndex||0,k=Y.segmentIndex||0,A=Y.properties,D;switch(Z.type){case"FeatureCollection":lt<0&&(lt=Z.features.length+lt),A=A||Z.features[lt].properties,D=Z.features[lt].geometry;break;case"Feature":A=A||Z.properties,D=Z.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":D=Z;break;default:throw new Error("geojson is invalid")}if(D===null)return null;var T=D.coordinates;switch(D.type){case"Point":case"MultiPoint":return null;case"LineString":return k<0&&(k=T.length+k-1),r.lineString([T[k],T[k+1]],A,Y);case"Polygon":return st<0&&(st=T.length+st),k<0&&(k=T[st].length+k-1),r.lineString([T[st][k],T[st][k+1]],A,Y);case"MultiLineString":return Q<0&&(Q=T.length+Q),k<0&&(k=T[Q].length+k-1),r.lineString([T[Q][k],T[Q][k+1]],A,Y);case"MultiPolygon":return Q<0&&(Q=T.length+Q),st<0&&(st=T[Q].length+st),k<0&&(k=T[Q][st].length-k-1),r.lineString([T[Q][st][k],T[Q][st][k+1]],A,Y)}throw new Error("geojson is invalid")}function z(Z,Y){if(Y=Y||{},!r.isObject(Y))throw new Error("options is invalid");var lt=Y.featureIndex||0,Q=Y.multiFeatureIndex||0,st=Y.geometryIndex||0,k=Y.coordIndex||0,A=Y.properties,D;switch(Z.type){case"FeatureCollection":lt<0&&(lt=Z.features.length+lt),A=A||Z.features[lt].properties,D=Z.features[lt].geometry;break;case"Feature":A=A||Z.properties,D=Z.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":D=Z;break;default:throw new Error("geojson is invalid")}if(D===null)return null;var T=D.coordinates;switch(D.type){case"Point":return r.point(T,A,Y);case"MultiPoint":return Q<0&&(Q=T.length+Q),r.point(T[Q],A,Y);case"LineString":return k<0&&(k=T.length+k),r.point(T[k],A,Y);case"Polygon":return st<0&&(st=T.length+st),k<0&&(k=T[st].length+k),r.point(T[st][k],A,Y);case"MultiLineString":return Q<0&&(Q=T.length+Q),k<0&&(k=T[Q].length+k),r.point(T[Q][k],A,Y);case"MultiPolygon":return Q<0&&(Q=T.length+Q),st<0&&(st=T[Q].length+st),k<0&&(k=T[Q][st].length-k),r.point(T[Q][st][k],A,Y)}throw new Error("geojson is invalid")}i.coordAll=C,i.coordEach=a,i.coordReduce=u,i.featureEach=_,i.featureReduce=b,i.findPoint=z,i.findSegment=ke,i.flattenEach=F,i.flattenReduce=rt,i.geomEach=P,i.geomReduce=U,i.lineEach=Nt,i.lineReduce=Zt,i.propEach=d,i.propReduce=g,i.segmentEach=at,i.segmentReduce=Et}),er=p(i=>{Object.defineProperty(i,"__esModule",{value:!0});var r=Cr();function a(u){var d=[1/0,1/0,-1/0,-1/0];return r.coordEach(u,function(g){d[0]>g[0]&&(d[0]=g[0]),d[1]>g[1]&&(d[1]=g[1]),d[2]<g[0]&&(d[2]=g[0]),d[3]<g[1]&&(d[3]=g[1])}),d}a.default=a,i.default=a}),Rn=p((i,r)=>{var a=Pe(),u=$e(),d=Cr(),g=er().default,_=d.featureEach;d.coordEach,u.polygon;var b=u.featureCollection;function C(P){var U=new a(P);return U.insert=function(F){if(F.type!=="Feature")throw new Error("invalid feature");return F.bbox=F.bbox?F.bbox:g(F),a.prototype.insert.call(this,F)},U.load=function(F){var rt=[];return Array.isArray(F)?F.forEach(function(at){if(at.type!=="Feature")throw new Error("invalid features");at.bbox=at.bbox?at.bbox:g(at),rt.push(at)}):_(F,function(at){if(at.type!=="Feature")throw new Error("invalid features");at.bbox=at.bbox?at.bbox:g(at),rt.push(at)}),a.prototype.load.call(this,rt)},U.remove=function(F,rt){if(F.type!=="Feature")throw new Error("invalid feature");return F.bbox=F.bbox?F.bbox:g(F),a.prototype.remove.call(this,F,rt)},U.clear=function(){return a.prototype.clear.call(this)},U.search=function(F){var rt=a.prototype.search.call(this,this.toBBox(F));return b(rt)},U.collides=function(F){return a.prototype.collides.call(this,this.toBBox(F))},U.all=function(){var F=a.prototype.all.call(this);return b(F)},U.toJSON=function(){return a.prototype.toJSON.call(this)},U.fromJSON=function(F){return a.prototype.fromJSON.call(this,F)},U.toBBox=function(F){var rt;if(F.bbox)rt=F.bbox;else if(Array.isArray(F)&&F.length===4)rt=F;else if(Array.isArray(F)&&F.length===6)rt=[F[0],F[1],F[3],F[4]];else if(F.type==="Feature")rt=g(F);else if(F.type==="FeatureCollection")rt=g(F);else throw new Error("invalid geojson");return{minX:rt[0],minY:rt[1],maxX:rt[2],maxY:rt[3]}},U}r.exports=C,r.exports.default=C});Array.prototype.findIndex=Array.prototype.findIndex||function(i){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof i!="function")throw new TypeError("callback must be a function");for(var r=Object(this),a=r.length>>>0,u=arguments[1],d=0;d<a;d++)if(i.call(u,r[d],d,r))return d;return-1},Array.prototype.find=Array.prototype.find||function(i){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof i!="function")throw new TypeError("callback must be a function");for(var r=Object(this),a=r.length>>>0,u=arguments[1],d=0;d<a;d++){var g=r[d];if(i.call(u,g,d,r))return g}},typeof Object.assign!="function"&&(Object.assign=function(i){if(i==null)throw new TypeError("Cannot convert undefined or null to object");i=Object(i);for(var r=1;r<arguments.length;r++){var a=arguments[r];if(a!=null)for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(i[u]=a[u])}return i}),function(i){i.forEach(function(r){r.hasOwnProperty("remove")||Object.defineProperty(r,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(i,r){if(this==null)throw new TypeError('"this" is null or not defined');var a=Object(this),u=a.length>>>0;if(u===0)return!1;var d=r|0,g=Math.max(d>=0?d:u-Math.abs(d),0);function _(b,C){return b===C||typeof b=="number"&&typeof C=="number"&&isNaN(b)&&isNaN(C)}for(;g<u;){if(_(a[g],i))return!0;g++}return!1}});var $s={version:"2.18.3"},ge=y(Kr()),Ze={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},Gs={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex löschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer löschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknüpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Länge",segmentLength:"Segment Länge",area:"Fläche",radius:"Radius",perimeter:"Umfang",height:"Höhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},Jr={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},Ri={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},nu={tooltips:{placeMarker:"Adaugă un punct",firstVertex:"Apasă aici pentru a adăuga primul Vertex",continueLine:"Apasă aici pentru a continua desenul",finishLine:"Apasă pe orice obiect pentru a finisa desenul",finishPoly:"Apasă pe primul obiect pentru a finisa",finishRect:"Apasă pentru a finisa",startCircle:"Apasă pentru a desena un cerc",finishCircle:"Apasă pentru a finisa un cerc",placeCircleMarker:"Adaugă un punct"},actions:{finish:"Termină",cancel:"Anulează",removeLastVertex:"Șterge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaugă o bulină",drawPolyButton:"Desenează un poligon",drawLineButton:"Desenează o linie",drawCircleButton:"Desenează un cerc",drawRectButton:"Desenează un dreptunghi",editButton:"Editează straturile",dragButton:"Mută straturile",cutButton:"Taie straturile",deleteButton:"Șterge straturile",drawCircleMarkerButton:"Desenează marcatorul cercului",snappingButton:"Fixați marcatorul glisat pe alte straturi și vârfuri",pinningButton:"Fixați vârfurile partajate împreună",rotateButton:"Rotiți stratul"}},Xr={tooltips:{placeMarker:"Нажмите, чтобы нанести маркер",firstVertex:"Нажмите, чтобы нанести первый объект",continueLine:"Нажмите, чтобы продолжить рисование",finishLine:"Нажмите любой существующий маркер для завершения",finishPoly:"Выберите первую точку, чтобы закончить",finishRect:"Нажмите, чтобы закончить",startCircle:"Нажмите, чтобы добавить центр круга",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Нажмите, чтобы нанести круговой маркер"},actions:{finish:"Завершить",cancel:"Отменить",removeLastVertex:"Отменить последнее действие"},buttonTitles:{drawMarkerButton:"Добавить маркер",drawPolyButton:"Рисовать полигон",drawLineButton:"Рисовать кривую",drawCircleButton:"Рисовать круг",drawRectButton:"Рисовать прямоугольник",editButton:"Редактировать слой",dragButton:"Перенести слой",cutButton:"Вырезать слой",deleteButton:"Удалить слой",drawCircleMarkerButton:"Добавить круговой маркер",snappingButton:"Привязать перетаскиваемый маркер к другим слоям и вершинам",pinningButton:"Связать общие точки вместе",rotateButton:"Поворот слоя"}},On={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vértice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del círculo",finishCircle:"Presiona para finalizar el círculo",placeCircleMarker:"Presiona para colocar un marcador de círculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar último vértice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polígono",drawLineButton:"Dibujar Línea",drawCircleButton:"Dibujar Círculo",drawRectButton:"Dibujar Rectángulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Círculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vértices",pinningButton:"Fijar juntos los vértices compartidos",rotateButton:"Rotar capa"}},Xe={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beëindigen",finishPoly:"Klik op het eerst punt om te beëindigen",finishRect:"Klik om te beëindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beëindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},In={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer à dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"Éditer des calques",dragButton:"Déplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"Épingler ensemble les sommets partagés",rotateButton:"Tourner des calques"}},kr={tooltips:{placeMarker:"单击放置标记",firstVertex:"单击放置首个顶点",continueLine:"单击继续绘制",finishLine:"单击任何存在的标记以完成",finishPoly:"单击第一个标记以完成",finishRect:"单击完成",startCircle:"单击放置圆心",finishCircle:"单击完成圆形",placeCircleMarker:"点击放置圆形标记"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最后的顶点"},buttonTitles:{drawMarkerButton:"绘制标记",drawPolyButton:"绘制多边形",drawLineButton:"绘制线段",drawCircleButton:"绘制圆形",drawRectButton:"绘制长方形",editButton:"编辑图层",dragButton:"拖拽图层",cutButton:"剪切图层",deleteButton:"删除图层",drawCircleMarkerButton:"画圆圈标记",snappingButton:"将拖动的标记捕捉到其他图层和顶点",pinningButton:"将共享顶点固定在一起",rotateButton:"旋转图层"}},Er={tooltips:{placeMarker:"單擊放置標記",firstVertex:"單擊放置第一個頂點",continueLine:"單擊繼續繪製",finishLine:"單擊任何存在的標記以完成",finishPoly:"單擊第一個標記以完成",finishRect:"單擊完成",startCircle:"單擊放置圓心",finishCircle:"單擊完成圓形",placeCircleMarker:"點擊放置圓形標記"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最後一個頂點"},buttonTitles:{drawMarkerButton:"放置標記",drawPolyButton:"繪製多邊形",drawLineButton:"繪製線段",drawCircleButton:"繪製圓形",drawRectButton:"繪製方形",editButton:"編輯圖形",dragButton:"移動圖形",cutButton:"裁切圖形",deleteButton:"刪除圖形",drawCircleMarkerButton:"畫圓圈標記",snappingButton:"將拖動的標記對齊到其他圖層和頂點",pinningButton:"將共享頂點固定在一起",rotateButton:"旋轉圖形"}},Vs={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vértice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do círculo",finishCircle:"Clique para finalizar o círculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover último vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},ir={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vértice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do círculo",finishCircle:"Clique para terminar o círculo",placeCircleMarker:"Clique para colocar marcador de círculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover Último Vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},Hs={tooltips:{placeMarker:"Kliknij, aby umieścić znacznik",firstVertex:"Kliknij, aby umieścić pierwszy wierzchołek",continueLine:"Kliknij, aby kontynuować rysowanie",finishLine:"Kliknij dowolny istniejący znacznik, aby zakończyć",finishPoly:"Kliknij pierwszy znacznik, aby zakończyć",finishRect:"Kliknij, aby zakończyć",startCircle:"Kliknij, aby umieścić środek okręgu",finishCircle:"Kliknij, aby zakończyć okrąg",placeCircleMarker:"Kliknij, aby umieścić znacznik okręgu",placeText:"Kliknij, aby umieścić tekst"},actions:{finish:"Zakończ",cancel:"Anuluj",removeLastVertex:"Usuń ostatni wierzchołek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokąt",drawLineButton:"Rysuj linię",drawCircleButton:"Rysuj okrąg",drawRectButton:"Rysuj prostokąt",editButton:"Edytuj warstwy",dragButton:"Przeciągnij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usuń warstwy",drawCircleMarkerButton:"Rysuj znacznik okrągły",snappingButton:"Przyciągnij przenoszony znacznik do innych warstw i wierzchołków",pinningButton:"Przypnij wspólne wierzchołki razem",rotateButton:"Obróć warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne śledzenie linii"},measurements:{totalLength:"Długość",segmentLength:"Długość odcinka",area:"Obszar",radius:"Promień",perimeter:"Obwód",height:"Wysokość",width:"Szerokość",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},Zs={tooltips:{placeMarker:"Klicka för att placera markör",firstVertex:"Klicka för att placera första hörnet",continueLine:"Klicka för att fortsätta rita",finishLine:"Klicka på en existerande punkt för att slutföra",finishPoly:"Klicka på den första punkten för att slutföra",finishRect:"Klicka för att slutföra",startCircle:"Klicka för att placera cirkelns centrum",finishCircle:"Klicka för att slutföra cirkeln",placeCircleMarker:"Klicka för att placera cirkelmarkör"},actions:{finish:"Slutför",cancel:"Avbryt",removeLastVertex:"Ta bort sista hörnet"},buttonTitles:{drawMarkerButton:"Rita Markör",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkör",snappingButton:"Snäpp dra markören till andra lager och hörn",pinningButton:"Fäst delade hörn tillsammans",rotateButton:"Rotera lagret"}},Yr={tooltips:{placeMarker:"Κάντε κλικ για να τοποθετήσετε Δείκτη",firstVertex:"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο",continueLine:"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε",finishLine:"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί",finishPoly:"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε",finishRect:"Κάντε κλικ για να τελειώσετε",startCircle:"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου",finishCircle:"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο",placeCircleMarker:"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},actions:{finish:"Τέλος",cancel:"Ακύρωση",removeLastVertex:"Κατάργηση τελευταίου σημείου"},buttonTitles:{drawMarkerButton:"Σχεδίαση Δείκτη",drawPolyButton:"Σχεδίαση Πολυγώνου",drawLineButton:"Σχεδίαση Γραμμής",drawCircleButton:"Σχεδίαση Κύκλου",drawRectButton:"Σχεδίαση Ορθογωνίου",editButton:"Επεξεργασία Επιπέδων",dragButton:"Μεταφορά Επιπέδων",cutButton:"Αποκοπή Επιπέδων",deleteButton:"Κατάργηση Επιπέδων",drawCircleMarkerButton:"Σχεδίαση Κυκλικού Δείκτη",snappingButton:"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές",pinningButton:"Περικοπή κοινών κορυφών μαζί",rotateButton:"Περιστρέψτε το στρώμα"}},qs={tooltips:{placeMarker:"Kattintson a jelölő elhelyezéséhez",firstVertex:"Kattintson az első pont elhelyezéséhez",continueLine:"Kattintson a következő pont elhelyezéséhez",finishLine:"A befejezéshez kattintson egy meglévő pontra",finishPoly:"A befejezéshez kattintson az első pontra",finishRect:"Kattintson a befejezéshez",startCircle:"Kattintson a kör középpontjának elhelyezéséhez",finishCircle:"Kattintson a kör befejezéséhez",placeCircleMarker:"Kattintson a körjelölő elhelyezéséhez"},actions:{finish:"Befejezés",cancel:"Mégse",removeLastVertex:"Utolsó pont eltávolítása"},buttonTitles:{drawMarkerButton:"Jelölő rajzolása",drawPolyButton:"Poligon rajzolása",drawLineButton:"Vonal rajzolása",drawCircleButton:"Kör rajzolása",drawRectButton:"Négyzet rajzolása",editButton:"Elemek szerkesztése",dragButton:"Elemek mozgatása",cutButton:"Elemek vágása",deleteButton:"Elemek törlése",drawCircleMarkerButton:"Kör jelölő rajzolása",snappingButton:"Kapcsolja a jelöltőt másik elemhez vagy ponthoz",pinningButton:"Közös pontok összekötése",rotateButton:"Fólia elforgatása"}},Ks={tooltips:{placeMarker:"Tryk for at placere en markør",firstVertex:"Tryk for at placere det første punkt",continueLine:"Tryk for at fortsætte linjen",finishLine:"Tryk på et eksisterende punkt for at afslutte",finishPoly:"Tryk på det første punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkør"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markør",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Træk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkør",snappingButton:"Fastgør trukket markør til andre elementer",pinningButton:"Sammenlæg delte elementer",rotateButton:"Roter laget"}},Qr={tooltips:{placeMarker:"Klikk for å plassere punkt",firstVertex:"Klikk for å plassere første punkt",continueLine:"Klikk for å tegne videre",finishLine:"Klikk på et eksisterende punkt for å fullføre",finishPoly:"Klikk første punkt for å fullføre",finishRect:"Klikk for å fullføre",startCircle:"Klikk for å sette sirkel midtpunkt",finishCircle:"Klikk for å fullføre sirkel",placeCircleMarker:"Klikk for å plassere sirkel",placeText:"Klikk for å plassere tekst"},actions:{finish:"Fullfør",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotér objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalér objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Område",radius:"Radius",perimeter:"Omriss",height:"Høyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkør"}},pa={tooltips:{placeMarker:"کلیک برای جانمایی نشان",firstVertex:"کلیک برای رسم اولین رأس",continueLine:"کلیک برای ادامه رسم",finishLine:"کلیک روی هر نشان موجود برای پایان",finishPoly:"کلیک روی اولین نشان برای پایان",finishRect:"کلیک برای پایان",startCircle:"کلیک برای رسم مرکز دایره",finishCircle:"کلیک برای پایان رسم دایره",placeCircleMarker:"کلیک برای رسم نشان دایره",placeText:"کلیک برای نوشتن متن"},actions:{finish:"پایان",cancel:"لفو",removeLastVertex:"حذف آخرین رأس"},buttonTitles:{drawMarkerButton:"درج نشان",drawPolyButton:"رسم چندضلعی",drawLineButton:"رسم خط",drawCircleButton:"رسم دایره",drawRectButton:"رسم چهارضلعی",editButton:"ویرایش لایه‌ها",dragButton:"جابجایی لایه‌ها",cutButton:"برش لایه‌ها",deleteButton:"حذف لایه‌ها",drawCircleMarkerButton:"رسم نشان دایره",snappingButton:"نشانگر را به لایه‌ها و رئوس دیگر بکشید",pinningButton:"رئوس مشترک را با هم پین کنید",rotateButton:"چرخش لایه",drawTextButton:"رسم متن",scaleButton:"مقیاس‌گذاری",autoTracingButton:"ردیاب خودکار"},measurements:{totalLength:"طول",segmentLength:"طول بخش",area:"ناحیه",radius:"شعاع",perimeter:"محیط",height:"ارتفاع",width:"عرض",coordinates:"موقعیت",coordinatesMarker:"موقعیت نشان"}},Ws={tooltips:{placeMarker:"Натисніть, щоб нанести маркер",firstVertex:"Натисніть, щоб нанести першу вершину",continueLine:"Натисніть, щоб продовжити малювати",finishLine:"Натисніть будь-який існуючий маркер для завершення",finishPoly:"Виберіть перший маркер, щоб завершити",finishRect:"Натисніть, щоб завершити",startCircle:"Натисніть, щоб додати центр кола",finishCircle:"Натисніть, щоб завершити коло",placeCircleMarker:"Натисніть, щоб нанести круговий маркер"},actions:{finish:"Завершити",cancel:"Відмінити",removeLastVertex:"Видалити попередню вершину"},buttonTitles:{drawMarkerButton:"Малювати маркер",drawPolyButton:"Малювати полігон",drawLineButton:"Малювати криву",drawCircleButton:"Малювати коло",drawRectButton:"Малювати прямокутник",editButton:"Редагувати шари",dragButton:"Перенести шари",cutButton:"Вирізати шари",deleteButton:"Видалити шари",drawCircleMarkerButton:"Малювати круговий маркер",snappingButton:"Прив’язати перетягнутий маркер до інших шарів та вершин",pinningButton:"Зв'язати спільні вершини разом",rotateButton:"Повернути шар"}},ru={tooltips:{placeMarker:"İşaretçi yerleştirmek için tıklayın",firstVertex:"İlk tepe noktasını yerleştirmek için tıklayın",continueLine:"Çizime devam etmek için tıklayın",finishLine:"Bitirmek için mevcut herhangi bir işaretçiyi tıklayın",finishPoly:"Bitirmek için ilk işaretçiyi tıklayın",finishRect:"Bitirmek için tıklayın",startCircle:"Daire merkezine yerleştirmek için tıklayın",finishCircle:"Daireyi bitirmek için tıklayın",placeCircleMarker:"Daire işaretçisi yerleştirmek için tıklayın"},actions:{finish:"Bitir",cancel:"İptal",removeLastVertex:"Son köşeyi kaldır"},buttonTitles:{drawMarkerButton:"Çizim İşaretçisi",drawPolyButton:"Çokgenler çiz",drawLineButton:"Çoklu çizgi çiz",drawCircleButton:"Çember çiz",drawRectButton:"Dikdörtgen çiz",editButton:"Katmanları düzenle",dragButton:"Katmanları sürükle",cutButton:"Katmanları kes",deleteButton:"Katmanları kaldır",drawCircleMarkerButton:"Daire işaretçisi çiz",snappingButton:"Sürüklenen işaretçiyi diğer katmanlara ve köşelere yapıştır",pinningButton:"Paylaşılan köşeleri birbirine sabitle",rotateButton:"Katmanı döndür"}},me={tooltips:{placeMarker:"Kliknutím vytvoříte značku",firstVertex:"Kliknutím vytvoříte první objekt",continueLine:"Kliknutím pokračujte v kreslení",finishLine:"Kliknutí na libovolnou existující značku pro dokončení",finishPoly:"Vyberte první bod pro dokončení",finishRect:"Klikněte pro dokončení",startCircle:"Kliknutím přidejte střed kruhu",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Kliknutím nastavte poloměr"},actions:{finish:"Dokončit",cancel:"Zrušit",removeLastVertex:"Zrušit poslední akci"},buttonTitles:{drawMarkerButton:"Přidat značku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit křivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdélník",editButton:"Upravit vrstvu",dragButton:"Přeneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Přidat kruhovou značku",snappingButton:"Navázat tažnou značku k dalším vrstvám a vrcholům",pinningButton:"Spojit společné body dohromady",rotateButton:"Otočte vrstvu"}},Xi={tooltips:{placeMarker:"クリックしてマーカーを配置",firstVertex:"クリックして最初の頂点を配置",continueLine:"クリックして描画を続ける",finishLine:"任意のマーカーをクリックして終了",finishPoly:"最初のマーカーをクリックして終了",finishRect:"クリックして終了",startCircle:"クリックして円の中心を配置",finishCircle:"クリックして円の描画を終了",placeCircleMarker:"クリックして円マーカーを配置",placeText:"クリックしてテキストを配置"},actions:{finish:"終了",cancel:"キャンセル",removeLastVertex:"最後の頂点を削除"},buttonTitles:{drawMarkerButton:"マーカーを描画",drawPolyButton:"ポリゴンを描画",drawLineButton:"折れ線を描画",drawCircleButton:"円を描画",drawRectButton:"矩形を描画",editButton:"レイヤーを編集",dragButton:"レイヤーをドラッグ",cutButton:"レイヤーを切り取り",deleteButton:"レイヤーを削除",drawCircleMarkerButton:"円マーカーを描画",snappingButton:"ドラッグしたマーカーを他のレイヤーや頂点にスナップする",pinningButton:"共有する頂点を同時に動かす",rotateButton:"レイヤーを回転",drawTextButton:"テキストを描画"}},Fe={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmäisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtämistä",finishLine:"Klikkaa olemassa olevaa merkkiä lopettaaksesi",finishPoly:"Klikkaa ensimmäistä merkkiä lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrän keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrän",placeCircleMarker:"Klikkaa asettaaksesi ympyrämerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirrä merkkejä",drawPolyButton:"Piirrä monikulmioita",drawLineButton:"Piirrä viivoja",drawCircleButton:"Piirrä ympyrä",drawRectButton:"Piirrä neliskulmioita",editButton:"Muokkaa",dragButton:"Siirrä",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirrä ympyrämerkki",snappingButton:"Kiinnitä siirrettävä merkki toisiin muotoihin",pinningButton:"Kiinnitä jaetut muodot yhteen",rotateButton:"Käännä",drawTextButton:"Piirrä tekstiä"}},ma={tooltips:{placeMarker:"마커 위치를 클릭하세요",firstVertex:"첫번째 꼭지점 위치을 클릭하세요",continueLine:"계속 그리려면 클릭하세요",finishLine:"끝내려면 기존 마커를 클릭하세요",finishPoly:"끝내려면 처음 마커를 클릭하세요",finishRect:"끝내려면 클릭하세요",startCircle:"원의 중심이 될 위치를 클릭하세요",finishCircle:"원을 끝내려면 클릭하세요",placeCircleMarker:"원 마커 위치를 클릭하세요",placeText:"텍스트 위치를 클릭하세요"},actions:{finish:"끝내기",cancel:"취소",removeLastVertex:"마지막 꼭지점 제거"},buttonTitles:{drawMarkerButton:"마커 그리기",drawPolyButton:"다각형 그리기",drawLineButton:"다각선 그리기",drawCircleButton:"원 그리기",drawRectButton:"직사각형 그리기",editButton:"레이어 편집하기",dragButton:"레이어 끌기",cutButton:"레이어 자르기",deleteButton:"레이어 제거하기",drawCircleMarkerButton:"원 마커 그리기",snappingButton:"잡아끈 마커를 다른 레이어 및 꼭지점에 들러붙게 하기",pinningButton:"공유 꼭지점을 함께 찍기",rotateButton:"레이어 회전하기",drawTextButton:"텍스트 그리기"}},Js={tooltips:{placeMarker:"Маркерди жайгаштыруу үчүн басыңыз",firstVertex:"Биринчи чокуну жайгаштырууну үчүн басыңыз",continueLine:"Сүрөт тартууну улантуу үчүн басыңыз",finishLine:"Аяктоо үчүн учурдагы маркерди басыңыз",finishPoly:"Бүтүрүү үчүн биринчи маркерди басыңыз",finishRect:"Бүтүрүү үчүн басыңыз",startCircle:"Айлананын борборун жайгаштырууну үчүн басыңыз",finishCircle:"Айлананы бүтүрүү үчүн басыңыз",placeCircleMarker:"Тегерек маркерди жайгаштыруу үчүн басыңыз",placeText:"Текстти жайгаштыруу үчүн басыңыз"},actions:{finish:"Аягы",cancel:"Жок кылуу",removeLastVertex:"Акыркы чокуну өчүрүү"},buttonTitles:{drawMarkerButton:"Маркерди чизуу",drawPolyButton:"Полигон чизуу",drawLineButton:"Полилиния чизуу",drawCircleButton:"Дайынды чизуу",drawRectButton:"Прямоугольник чизуу",editButton:"Слоопту түзөтүү",dragButton:"Слоопту карап сүйлөү",cutButton:"Слооптун башын кесүү",deleteButton:"Слооптун өчүрүү",drawCircleMarkerButton:"Дайынды маркерди чизуу",snappingButton:"Башка слооптордун жана вертекстердин арасына чекилдөө",pinningButton:"Бөлүшкөн вертекстерди бирге тутуштуруу",rotateButton:"Слооптун өзгөртүү",drawTextButton:"Текст чизуу",scaleButton:"Слооптун өлчөмүн өзгөртүү",autoTracingButton:"Автоматтык тизмеги чизуу"},measurements:{totalLength:"Узундук",segmentLength:"Сегмент узундугу",area:"Аймак",radius:"Радиус",perimeter:"Периметр",height:"Диаметр",width:"Кенчилик",coordinates:"Координаттар",coordinatesMarker:"Маркердин координаттары"}},Xs=ir,vn={en:Ze,de:Gs,it:Jr,id:Ri,ro:nu,ru:Xr,es:On,nl:Xe,fr:In,pt:Xs,pt_br:Vs,pt_pt:ir,zh:kr,zh_tw:Er,pl:Hs,sv:Zs,el:Yr,hu:qs,da:Ks,no:Qr,fa:pa,ua:Ws,tr:ru,cz:me,ja:Xi,fi:Fe,ko:ma,ky:Js},Fn={_globalEditModeEnabled:!1,enableGlobalEditMode(i){let r={...i};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(a=>{this._isRelevantForEdit(a)&&a.pm.enable(r)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(i=>{i.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(i=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(i)},handleLayerAdditionInGlobalEditMode(){let i=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let r in i){let a=i[r];this._isRelevantForEdit(a)&&a.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:i}){this._addedLayersEdit[L.stamp(i)]=i},_isRelevantForEdit(i){return i.pm&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.allowEditing}},Ys=Fn,Mr={_globalDragModeEnabled:!1,enableGlobalDragMode(){let i=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},i.forEach(r=>{this._isRelevantForDrag(r)&&r.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let i=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,i.forEach(r=>{r.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let i=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let r in i){let a=i[r];this._isRelevantForDrag(a)&&a.pm.enableLayerDrag()}},_layerAddedDrag({layer:i}){this._addedLayersDrag[L.stamp(i)]=i},_isRelevantForDrag(i){return i.pm&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.draggable}},ri=Mr,Nn={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(i=>{this._isRelevantForRemoval(i)&&(i.pm.enabled()&&i.pm.disable(),i.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(i=>{i.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(i){let r=i.target;this._isRelevantForRemoval(r)&&!r.pm.dragging()&&(r.removeFrom(this.map.pm._getContainingLayer()),r.remove(),r instanceof L.LayerGroup?(this._fireRemoveLayerGroup(r),this._fireRemoveLayerGroup(this.map,r)):(r.pm._fireRemove(r),r.pm._fireRemove(this.map,r)))},_isRelevantForRemoval(i){return i.pm&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let i=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let r in i){let a=i[r];this._isRelevantForRemoval(a)&&(a.pm.enabled()&&a.pm.disable(),a.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:i}){this._addedLayersRemoval[L.stamp(i)]=i}},ga=Nn,_a={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(i=>i instanceof L.Polyline).forEach(i=>{this._isRelevantForRotate(i)&&i.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(i=>i instanceof L.Polyline).forEach(i=>{i.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(i){return i.pm&&i instanceof L.Polyline&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let i=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let r in i){let a=i[r];this._isRelevantForRemoval(a)&&a.pm.enableRotate()}},_layerAddedRotate({layer:i}){this._addedLayersRotate[L.stamp(i)]=i}},su=_a,ya=y(Kr()),Qs={_fireDrawStart(i="Draw",r={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},i,r)},_fireDrawEnd(i="Draw",r={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},i,r)},_fireCreate(i,r="Draw",a={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:i,layer:i},r,a)},_fireCenterPlaced(i="Draw",r={}){let a=i==="Draw"?this._layer:void 0,u=i!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:a,layer:u,latlng:this._layer.getLatLng()},i,r)},_fireCut(i,r,a,u="Draw",d={}){this.__fire(i,"pm:cut",{shape:this._shape,layer:r,originalLayer:a},u,d)},_fireEdit(i=this._layer,r="Edit",a={}){this.__fire(i,"pm:edit",{layer:this._layer,shape:this.getShape()},r,a)},_fireEnable(i="Edit",r={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},i,r)},_fireDisable(i="Edit",r={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},i,r)},_fireUpdate(i="Edit",r={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},i,r)},_fireMarkerDragStart(i,r=void 0,a="Edit",u={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:i,shape:this.getShape(),indexPath:r},a,u)},_fireMarkerDrag(i,r=void 0,a="Edit",u={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:i,shape:this.getShape(),indexPath:r},a,u)},_fireMarkerDragEnd(i,r=void 0,a=void 0,u="Edit",d={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:i,shape:this.getShape(),indexPath:r,intersectionReset:a},u,d)},_fireDragStart(i="Edit",r={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},i,r)},_fireDrag(i,r="Edit",a={}){this.__fire(this._layer,"pm:drag",{...i,shape:this.getShape()},r,a)},_fireDragEnd(i="Edit",r={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},i,r)},_fireDragEnable(i="Edit",r={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},i,r)},_fireDragDisable(i="Edit",r={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},i,r)},_fireRemove(i,r=i,a="Edit",u={}){this.__fire(i,"pm:remove",{layer:r,shape:this.getShape()},a,u)},_fireVertexAdded(i,r,a,u="Edit",d={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:i,indexPath:r,latlng:a,shape:this.getShape()},u,d)},_fireVertexRemoved(i,r,a="Edit",u={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:i,indexPath:r,shape:this.getShape()},a,u)},_fireVertexClick(i,r,a="Edit",u={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:i,indexPath:r,shape:this.getShape()},a,u)},_fireIntersect(i,r=this._layer,a="Edit",u={}){this.__fire(r,"pm:intersect",{layer:this._layer,intersection:i,shape:this.getShape()},a,u)},_fireLayerReset(i,r,a="Edit",u={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:i,indexPath:r,shape:this.getShape()},a,u)},_fireChange(i,r="Edit",a={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:i,shape:this.getShape()},r,a)},_fireTextChange(i,r="Edit",a={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:i,shape:this.getShape()},r,a)},_fireTextFocus(i="Edit",r={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},i,r)},_fireTextBlur(i="Edit",r={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},i,r)},_fireSnapDrag(i,r,a="Snapping",u={}){this.__fire(i,"pm:snapdrag",r,a,u)},_fireSnap(i,r,a="Snapping",u={}){this.__fire(i,"pm:snap",r,a,u)},_fireUnsnap(i,r,a="Snapping",u={}){this.__fire(i,"pm:unsnap",r,a,u)},_fireRotationEnable(i,r,a="Rotation",u={}){this.__fire(i,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},a,u)},_fireRotationDisable(i,r="Rotation",a={}){this.__fire(i,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},r,a)},_fireRotationStart(i,r,a="Rotation",u={}){this.__fire(i,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:r},a,u)},_fireRotation(i,r,a,u=this._rotationLayer,d="Rotation",g={}){this.__fire(i,"pm:rotate",{layer:u,helpLayer:this._layer,startAngle:this._startAngle,angle:u.pm.getAngle(),angleDiff:r,oldLatLngs:a,newLatLngs:u.getLatLngs()},d,g)},_fireRotationEnd(i,r,a,u="Rotation",d={}){this.__fire(i,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:r,angle:this._rotationLayer.pm.getAngle(),originLatLngs:a,newLatLngs:this._rotationLayer.getLatLngs()},u,d)},_fireActionClick(i,r,a,u="Toolbar",d={}){this.__fire(this._map,"pm:actionclick",{text:i.text,action:i,btnName:r,button:a},u,d)},_fireButtonClick(i,r,a="Toolbar",u={}){this.__fire(this._map,"pm:buttonclick",{btnName:i,button:r},a,u)},_fireLangChange(i,r,a,u,d="Global",g={}){this.__fire(this.map,"pm:langchange",{oldLang:i,activeLang:r,fallback:a,translations:u},d,g)},_fireGlobalDragModeToggled(i,r="Global",a={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:i,map:this.map},r,a)},_fireGlobalEditModeToggled(i,r="Global",a={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:i,map:this.map},r,a)},_fireGlobalRemovalModeToggled(i,r="Global",a={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:i,map:this.map},r,a)},_fireGlobalCutModeToggled(i="Global",r={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},i,r)},_fireGlobalDrawModeToggled(i="Global",r={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},i,r)},_fireGlobalRotateModeToggled(i="Global",r={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},i,r)},_fireRemoveLayerGroup(i,r=i,a="Edit",u={}){this.__fire(i,"pm:remove",{layer:r,shape:void 0},a,u)},_fireKeyeventEvent(i,r,a,u="Global",d={}){this.__fire(this.map,"pm:keyevent",{event:i,eventType:r,focusOn:a},u,d)},__fire(i,r,a,u,d={}){a=(0,ya.default)(a,d,{source:u}),L.PM.Utils._fireEvent(i,r,a)}},ts=Qs,va=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(i){this.map=i,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),i.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(i){let r="document";this.map.getContainer().contains(i.target)&&(r="map");let a={event:i,eventType:i.type,focusOn:r};this._lastEvents[i.type]=a,this._lastEvents.current=a,this.map.pm._fireKeyeventEvent(i,i.type,r)},_onBlur(i){i.altKey=!1;let r={event:i,eventType:i.type,focusOn:"document"};this._lastEvents[i.type]=r,this._lastEvents.current=r},getLastKeyEvent(i="current"){return this._lastEvents[i]},isShiftKeyPressed(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.shiftKey},isAltKeyPressed(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.altKey},isCtrlKeyPressed(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.ctrlKey},isMetaKeyPressed(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.metaKey},getPressedKey(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.key}}),Ce=va,ba=y(yn());function fe(i){let r=L.PM.activeLang;return(0,ba.default)(vn[r],i)||(0,ba.default)(vn.en,i)||i}function zn(i){for(let r=0;r<i.length;r+=1){let a=i[r];if(Array.isArray(a)){if(zn(a))return!0}else if(a!=null&&a!=="")return!0}return!1}function Pr(i){return i.reduce((r,a)=>{if(a.length!==0){let u=Array.isArray(a)?Pr(a):a;Array.isArray(u)?u.length!==0&&r.push(u):r.push(u)}return r},[])}function ou(i,r,a){let u={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:d,b:g,f:_}=u,b=i.lng,C=i.lat,P=a,U=Math.PI,F=r*U/180,rt=Math.sin(F),at=Math.cos(F),Et=(1-_)*Math.tan(C*U/180),Nt=1/Math.sqrt(1+Et*Et),Zt=Et*Nt,ke=Math.atan2(Et,at),z=Nt*rt,Z=1-z*z,Y=Z*(d*d-g*g)/(g*g),lt=1+Y/16384*(4096+Y*(-768+Y*(320-175*Y))),Q=Y/1024*(256+Y*(-128+Y*(74-47*Y))),st=P/(g*lt),k=2*Math.PI,A,D,T;for(;Math.abs(st-k)>1e-12;){A=Math.cos(2*ke+st),D=Math.sin(st),T=Math.cos(st);let Lt=Q*D*(A+Q/4*(T*(-1+2*A*A)-Q/6*A*(-3+4*D*D)*(-3+4*A*A)));k=st,st=P/(g*lt)+Lt}let R=Zt*D-Nt*T*at,O=Math.atan2(Zt*T+Nt*D*at,(1-_)*Math.sqrt(z*z+R*R)),W=Math.atan2(D*rt,Nt*T-Zt*D*at),q=_/16*Z*(4+_*(4-3*Z)),J=W-(1-q)*_*z*(st+q*D*(A+q*T*(-1+2*A*A))),nt=b+J*180/U,it=O*180/U;return L.latLng(nt,it)}function es(i,r,a,u,d=!0){let g,_,b,C=[];for(let P=0;P<a;P+=1){if(d)g=P*360/a+u,_=ou(i,g,r),b=L.latLng(_.lng,_.lat);else{let U=i.lat+Math.cos(2*P*Math.PI/a)*r,F=i.lng+Math.sin(2*P*Math.PI/a)*r;b=L.latLng(U,F)}C.push(b)}return C}function au(i,r,a){r=(r+360)%360;let u=Math.PI/180,d=180/Math.PI,{R:g}=L.CRS.Earth,_=i.lng*u,b=i.lat*u,C=r*u,P=Math.sin(b),U=Math.cos(b),F=Math.cos(a/g),rt=Math.sin(a/g),at=Math.asin(P*F+U*rt*Math.cos(C)),Et=_+Math.atan2(Math.sin(C)*rt*U,F-P*Math.sin(at));Et*=d;let Nt=Et-360,Zt=Et<-180?Et+360:Et;return Et=Et>180?Nt:Zt,L.latLng([at*d,Et])}function is(i,r,a){let u=i.latLngToContainerPoint(r),d=i.latLngToContainerPoint(a),g=Math.atan2(d.y-u.y,d.x-u.x)*180/Math.PI+90;return g+=g<0?360:0,g}function ns(i,r,a,u){let d=is(i,r,a);return au(r,d,u)}function lu(i,r,a="asc"){if(!r||Object.keys(r).length===0)return(C,P)=>C-P;let u=Object.keys(r),d,g=u.length-1,_={};for(;g>=0;)d=u[g],_[d.toLowerCase()]=r[d],g-=1;function b(C){if(C instanceof L.Marker)return"Marker";if(C instanceof L.Circle)return"Circle";if(C instanceof L.CircleMarker)return"CircleMarker";if(C instanceof L.Rectangle)return"Rectangle";if(C instanceof L.Polygon)return"Polygon";if(C instanceof L.Polyline)return"Line"}return(C,P)=>{let U,F;if(U=b(C.layer).toLowerCase(),F=b(P.layer).toLowerCase(),!U||!F)return 0;let rt=U in _?_[U]:Number.MAX_SAFE_INTEGER,at=F in _?_[F]:Number.MAX_SAFE_INTEGER,Et=0;return rt<at?Et=-1:rt>at&&(Et=1),a==="desc"?Et*-1:Et}}function Yi(i,r=i.getLatLngs()){return i instanceof L.Polygon?L.polygon(r).getLatLngs():L.polyline(r).getLatLngs()}function xa(i,r){var a,u,d,g;if((u=(a=r.options.crs)==null?void 0:a.projection)!=null&&u.MAX_LATITUDE){let _=(g=(d=r.options.crs)==null?void 0:d.projection)==null?void 0:g.MAX_LATITUDE;i.lat=Math.max(Math.min(_,i.lat),-_)}return i}function ci(i){return i.options.renderer||i._map&&(i._map._getPaneRenderer(i.options.pane)||i._map.options.renderer||i._map._renderer)||i._renderer}var uu=L.Class.extend({includes:[Ys,ri,ga,su,ts],initialize(i){this.map=i,this.Draw=new L.PM.Draw(i),this.Toolbar=new L.PM.Toolbar(i),this.Keyboard=Ce(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(i)},setLang(i="en",r,a="en"){if(i=i.trim().toLowerCase(),!/^[a-z]{2}$/.test(i)){let d=i.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(d){let g=[`${d[1]}_${d[2]}`,`${d[1]}`];for(let _ of g)if(vn[_]){i=_;break}}}let u=L.PM.activeLang;r&&(vn[i]=(0,ge.default)(vn[a],r)),L.PM.activeLang=i,this.map.pm.Toolbar.reinit(),this._fireLangChange(u,i,a,vn[i])},addControls(i){this.Toolbar.addControls(i)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(i="Polygon",r){i==="Poly"&&(i="Polygon"),this.Draw.enable(i,r)},disableDraw(i="Polygon"){i==="Poly"&&(i="Polygon"),this.Draw.disable(i)},setPathOptions(i,r={}){let a=r.ignoreShapes||[],u=r.merge||!1;this.map.pm.Draw.shapes.forEach(d=>{a.indexOf(d)===-1&&this.map.pm.Draw[d].setPathOptions(i,u)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(i){let r=(0,ge.default)(this.globalOptions,i);r.editable&&(r.resizeableCircleMarker=r.editable,delete r.editable);let a=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!r.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),a=!0);let u=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!r.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),u=!0),this.map.pm.Draw.shapes.forEach(d=>{this.map.pm.Draw[d].setOptions(r)}),a&&this.map.pm.Draw.CircleMarker.enable(),u&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(d=>{d.pm.setOptions(r)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=r,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(i=>{i.pm.enabled()&&i.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(i){return this.Draw.Cut.enable(i)},toggleGlobalCutMode(i){return this.Draw.Cut.toggle(i)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(i=!1){let r=L.PM.Utils.findLayers(this.map);if(!i)return r;let a=L.featureGroup();return a._pmTempLayer=!0,r.forEach(u=>{a.addLayer(u)}),a},getGeomanDrawLayers(i=!1){let r=L.PM.Utils.findLayers(this.map).filter(u=>u._drawnByGeoman===!0);if(!i)return r;let a=L.featureGroup();return a._pmTempLayer=!0,r.forEach(u=>{a.addLayer(u)}),a},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(i){this._touchEventCounter===0&&(L.DomEvent.on(i,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(i,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(i){this._touchEventCounter===1&&(L.DomEvent.off(i,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(i,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(i){ci(this.map)._onMouseMove(this._createMouseEvent("mousemove",i))},_canvasTouchClick(i){let r="";i.type==="touchstart"||i.type==="pointerdown"?r="mousedown":(i.type==="touchend"||i.type==="pointerup"||i.type==="touchcancel"||i.type==="pointercancel")&&(r="mouseup"),r&&ci(this.map)._onClick(this._createMouseEvent(r,i))},_createMouseEvent(i,r){let a,u=r.touches[0]||r.changedTouches[0];try{a=new MouseEvent(i,{bubbles:r.bubbles,cancelable:r.cancelable,view:r.view,detail:u.detail,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY,ctrlKey:r.ctrlKey,altKey:r.altKey,shiftKey:r.shiftKey,metaKey:r.metaKey,button:r.button,relatedTarget:r.relatedTarget})}catch{a=document.createEvent("MouseEvents"),a.initMouseEvent(i,r.bubbles,r.cancelable,r.view,u.detail,u.screenX,u.screenY,u.clientX,u.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.button,r.relatedTarget)}return a}}),wa=uu,bn=L.Control.extend({includes:[ts],options:{position:"topleft",disableByOtherButtons:!0},initialize(i){this._button=L.Util.extend({},this.options,i)},onAdd(i){return this._map=i,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let i=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),i?i.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(i){return typeof i=="boolean"?this._button.toggleStatus=i:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(i){i&&i.preventDefault(),!this._button.disabled&&(this._button.onClick(i,{button:this,event:i}),this._clicked(i),this._button.afterClick(i,{button:this,event:i}))},_makeButton(i){let r=this.options.position.indexOf("right")>-1?"pos-right":"",a=L.DomUtil.create("div",`button-container  ${r}`,this._container);i.title&&a.setAttribute("title",i.title);let u=L.DomUtil.create("a","leaflet-buttons-control-button",a);u.setAttribute("role","button"),u.setAttribute("tabindex","0"),u.href="#";let d=L.DomUtil.create("div",`leaflet-pm-actions-container ${r}`,a),g=i.actions,_={cancel:{text:fe("actions.cancel"),title:fe("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:fe("actions.finish"),title:fe("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:fe("actions.removeLastVertex"),title:fe("actions.removeLastVertex"),onClick(){this._map.pm.Draw[i.jsClass]._removeLastVertex()}},finish:{text:fe("actions.finish"),title:fe("actions.finish"),onClick(C){this._map.pm.Draw[i.jsClass]._finishShape(C)}}};i._preparedActions=g.map(C=>{let P=typeof C=="string"?C:C.name,U;if(_[P])U=_[P];else if(C.text)U=C;else return U;let F=L.DomUtil.create("a",`leaflet-pm-action ${r} action-${P}`,d);if(F.setAttribute("role","button"),F.setAttribute("tabindex","0"),F.href="#",U.title&&(F.title=U.title),F.innerHTML=U.text,L.DomEvent.disableClickPropagation(F),L.DomEvent.on(F,"click",L.DomEvent.stop),U._node=F,!i.disabled&&U.onClick){let rt=at=>{at.preventDefault();let Et="",{buttons:Nt}=this._map.pm.Toolbar;for(let Zt in Nt)if(Nt[Zt]._button===i){Et=Zt;break}this._fireActionClick(U,Et,i)};L.DomEvent.addListener(F,"click",rt,this),L.DomEvent.addListener(F,"click",U.onClick,this),L.DomEvent.addListener(F,"click",()=>this._updateActiveAction(i))}return U}),this._updateActiveAction(i),i.toggleStatus&&L.DomUtil.addClass(a,"active");let b=L.DomUtil.create("div","control-icon",u);return i.iconUrl&&b.setAttribute("src",i.iconUrl),i.className&&L.DomUtil.addClass(b,i.className),L.DomEvent.disableClickPropagation(u),L.DomEvent.on(u,"click",L.DomEvent.stop),i.disabled||(L.DomEvent.addListener(u,"click",this._onBtnClick,this),L.DomEvent.addListener(u,"click",this._triggerClick,this)),i.disabled&&(L.DomUtil.addClass(u,"pm-disabled"),u.setAttribute("aria-disabled","true")),a},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let i="",{buttons:r}=this._map.pm.Toolbar;for(let a in r)if(r[a]._button===this._button){i=a;break}this._fireButtonClick(i,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let i="pm-disabled",r=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(r,i),r.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(r,i),r.setAttribute("aria-disabled","false"))},_updateActiveAction(i){var r;(r=i._preparedActions)==null||r.forEach(a=>{a!=null&&a._node&&(a.isActive&&a.isActive.call(this)?L.DomUtil.addClass(a._node,"active-action"):L.DomUtil.removeClass(a._node,"active-action"))})}}),La=bn;L.Control.PMButton=La;var Ca=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(i){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(i)},reinit(){let i=this.isVisible;this.removeControls(),this._defineButtons(),i&&this.addControls()},init(i){this.map=i,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(i){let r=`${i}Container`;return this[r]||(this[r]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${i} leaflet-bar leaflet-control`)),this[r]},getButtons(){return this.buttons},addControls(i=this.options){typeof i.editPolygon<"u"&&(i.editMode=i.editPolygon),typeof i.deleteLayer<"u"&&(i.removalMode=i.deleteLayer),L.Util.setOptions(this,i),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let i=this.getButtons(),r={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let a in i){let u=i[a];L.Util.setOptions(u,{className:r.geomanIcons[a]})}},removeControls(){let i=this.getButtons();for(let r in i)i[r].remove();this.isVisible=!1},toggleControls(i=this.options){this.isVisible?this.removeControls():this.addControls(i)},_addButton(i,r){return this.buttons[i]=r,this.options[i]=!!this.options[i]||!1,this.buttons[i]},triggerClickOnToggledButtons(i){for(let r in this.buttons){let a=this.buttons[r];a._button.disableByOtherButtons&&a!==i&&a.toggled()&&a._triggerClick()}},toggleButton(i,r,a=!0){i==="editPolygon"&&(i="editMode"),i==="deleteLayer"&&(i="removalMode");let u=i;return a&&this.triggerClickOnToggledButtons(this.buttons[u]),this.buttons[u]?this.buttons[u].toggle(r):!1},_defineButtons(){let i={className:"control-icon leaflet-pm-icon-marker",title:fe("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(rt,at)=>{this.map.pm.Draw[at.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},r={title:fe("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(rt,at)=>{this.map.pm.Draw[at.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},a={className:"control-icon leaflet-pm-icon-polyline",title:fe("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(rt,at)=>{this.map.pm.Draw[at.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},u={title:fe("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(rt,at)=>{this.map.pm.Draw[at.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},d={title:fe("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(rt,at)=>{this.map.pm.Draw[at.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},g={title:fe("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(rt,at)=>{this.map.pm.Draw[at.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},_={title:fe("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},b={title:fe("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},C={title:fe("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(rt,at)=>{this.map.pm.Draw[at.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},P={title:fe("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},U={title:fe("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},F={className:"control-icon leaflet-pm-icon-text",title:fe("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(rt,at)=>{this.map.pm.Draw[at.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(i)),this._addButton("drawPolyline",new L.Control.PMButton(a)),this._addButton("drawRectangle",new L.Control.PMButton(g)),this._addButton("drawPolygon",new L.Control.PMButton(r)),this._addButton("drawCircle",new L.Control.PMButton(u)),this._addButton("drawCircleMarker",new L.Control.PMButton(d)),this._addButton("drawText",new L.Control.PMButton(F)),this._addButton("editMode",new L.Control.PMButton(_)),this._addButton("dragMode",new L.Control.PMButton(b)),this._addButton("cutPolygon",new L.Control.PMButton(C)),this._addButton("removalMode",new L.Control.PMButton(P)),this._addButton("rotateMode",new L.Control.PMButton(U))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let i=this.getButtons(),r=[];this.options.drawControls===!1&&(r=r.concat(Object.keys(i).filter(a=>!i[a]._button.tool))),this.options.editControls===!1&&(r=r.concat(Object.keys(i).filter(a=>i[a]._button.tool==="edit"))),this.options.optionsControls===!1&&(r=r.concat(Object.keys(i).filter(a=>i[a]._button.tool==="options"))),this.options.customControls===!1&&(r=r.concat(Object.keys(i).filter(a=>i[a]._button.tool==="custom")));for(let a in i)if(this.options[a]&&r.indexOf(a)===-1){let u=i[a]._button.tool;u||(u="draw"),i[a].setPosition(this._getBtnPosition(u)),i[a].addTo(this.map)}},_getBtnPosition(i){return this.options.positions&&this.options.positions[i]?this.options.positions[i]:this.options.position},setBlockPosition(i,r){this.options.positions[i]=r,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(i,r){if(r)typeof r!="object"&&(r={name:r});else throw new TypeError("Button has no name");let a=this._btnNameMapping(i);if(!r.name)throw new TypeError("Button has no name");if(this.buttons[r.name])throw new TypeError("Button with this name already exists");let u=this.map.pm.Draw.createNewDrawInstance(r.name,a);r={...this.buttons[a]._button,...r};let d=this.createCustomControl(r);return{drawInstance:u,control:d}},createCustomControl(i){if(!i.name)throw new TypeError("Button has no name");if(this.buttons[i.name])throw new TypeError("Button with this name already exists");i.onClick||(i.onClick=()=>{}),i.afterClick||(i.afterClick=()=>{}),i.toggle!==!1&&(i.toggle=!0),i.block&&(i.block=i.block.toLowerCase()),(!i.block||i.block==="draw")&&(i.block=""),i.className?i.className.indexOf("control-icon")===-1&&(i.className=`control-icon ${i.className}`):i.className="control-icon";let r={tool:i.block,className:i.className,title:i.title||"",jsClass:i.name,onClick:i.onClick,afterClick:i.afterClick,doToggle:i.toggle,toggleStatus:!1,disableOtherButtons:i.disableOtherButtons??!0,disableByOtherButtons:i.disableByOtherButtons??!0,cssToggle:i.toggle,position:this.options.position,actions:i.actions||[],disabled:!!i.disabled};this.options[i.name]!==!1&&(this.options[i.name]=!0);let a=this._addButton(i.name,new L.Control.PMButton(r));return this.changeControlOrder(),a},controlExists(i){return!!this.getButton(i)},getButton(i){return this.getButtons()[i]},getButtonsInBlock(i){let r={};if(i)for(let a in this.getButtons()){let u=this.getButtons()[a];(u._button.tool===i||i==="draw"&&!u._button.tool)&&(r[a]=u)}return r},changeControlOrder(i=[]){let r=this._shapeMapping(),a=[];i.forEach(g=>{r[g]?a.push(r[g]):a.push(g)});let u=this.getButtons(),d={};a.forEach(g=>{u[g]&&(d[g]=u[g])}),Object.keys(u).filter(g=>!u[g]._button.tool||u[g]._button.tool==="draw").forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),Object.keys(u).filter(g=>u[g]._button.tool==="edit").forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),Object.keys(u).filter(g=>u[g]._button.tool==="options").forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),Object.keys(u).filter(g=>u[g]._button.tool==="custom").forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),Object.keys(u).forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),this.map.pm.Toolbar.buttons=d,this._showHideButtons()},getControlOrder(){let i=this.getButtons(),r=[];for(let a in i)r.push(a);return r},changeActionsOfControl(i,r){let a=this._btnNameMapping(i);if(!a)throw new TypeError("No name passed");if(!r)throw new TypeError("No actions passed");if(!this.buttons[a])throw new TypeError("Button with this name not exists");this.buttons[a]._button.actions=r,this.changeControlOrder()},setButtonDisabled(i,r){let a=this._btnNameMapping(i);r?this.buttons[a].disable():this.buttons[a].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(i){let r=this._shapeMapping();return r[i]?r[i]:i}}),to=Ca,hu=y(Kr()),ka={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(i){i.forEach(r=>{if(Array.isArray(r)){this._assignEvents(r);return}r.off("drag",this._handleSnapping,this),r.on("drag",this._handleSnapping,this),r.off("dragend",this._cleanupSnapping,this),r.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(i){if(i){let r=i.target;r._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(r=>{r.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(i){var b,C,P;let r=i.target;if(r._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((b=i==null?void 0:i.originalEvent)==null?void 0:b.altKey)||((P=(C=this._map)==null?void 0:C.pm)==null?void 0:P.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let a=this._calcClosestLayer(r.getLatLng(),this._snapList);if(Object.keys(a).length===0)return!1;let u=a.layer instanceof L.Marker||a.layer instanceof L.CircleMarker||!this.options.snapSegment,d;u?d=a.latlng:d=this._checkPrioritiySnapping(a);let g=this.options.snapDistance,_={marker:r,shape:this._shape,snapLatLng:d,segment:a.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:a.layer,distance:a.distance};if(this._fireSnapDrag(_.marker,_),this._fireSnapDrag(this._layer,_),a.distance<g){r._orgLatLng=r.getLatLng(),r.setLatLng(d),r._snapped=!0,r._snapInfo=_;let U=()=>{this._snapLatLng=d,this._fireSnap(r,_),this._fireSnap(this._layer,_)},F=this._snapLatLng||{},rt=d||{};(F.lat!==rt.lat||F.lng!==rt.lng)&&U()}else this._snapLatLng&&(this._unsnap(_),r._snapped=!1,r._snapInfo=void 0,this._fireUnsnap(_.marker,_),this._fireUnsnap(this._layer,_));return!0},_createSnapList(){let i=[],r=[],a=this._map;a.off("layerremove",this._handleSnapLayerRemoval,this),a.on("layerremove",this._handleSnapLayerRemoval,this),a.eachLayer(u=>{if((u instanceof L.Polyline||u instanceof L.Marker||u instanceof L.CircleMarker||u instanceof L.ImageOverlay)&&u.options.snapIgnore!==!0){if(u.options.snapIgnore===void 0&&(!L.PM.optIn&&u.options.pmIgnore===!0||L.PM.optIn&&u.options.pmIgnore!==!1))return;(u instanceof L.Circle||u instanceof L.CircleMarker)&&u.pm&&u.pm._hiddenPolyCircle?i.push(u.pm._hiddenPolyCircle):u instanceof L.ImageOverlay&&(u=L.rectangle(u.getBounds())),i.push(u);let d=L.polyline([],{color:"red",pmIgnore:!0});d._pmTempLayer=!0,r.push(d),(u instanceof L.Circle||u instanceof L.CircleMarker)&&r.push(d)}}),i=i.filter(u=>this._layer!==u),i=i.filter(u=>u._latlng||u._latlngs&&zn(u._latlngs)),i=i.filter(u=>!u._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let u=L.polyline([],{color:"red",pmIgnore:!0});u._pmTempLayer=!0,r.push(u)}),this._snapList=i.concat(this._otherSnapLayers)):this._snapList=i,this.debugIndicatorLines=r},_handleSnapLayerRemoval({layer:i}){if(!i._leaflet_id)return;let r=this._snapList.findIndex(a=>a._leaflet_id===i._leaflet_id);r>-1&&this._snapList.splice(r,1)},_calcClosestLayer(i,r){return this._calcClosestLayers(i,r,1)[0]},_calcClosestLayers(i,r,a=1){let u=[],d={};r.forEach((_,b)=>{var P;if(_._parentCopy&&_._parentCopy===this._layer||((P=_.getLatLngs)==null?void 0:P.call(_).flat(5).length)<2)return;let C=this._calcLayerDistances(i,_);if(C.distance=Math.floor(C.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[b]){let U=L.polyline([],{color:"red",pmIgnore:!0});U._pmTempLayer=!0,this.debugIndicatorLines[b]=U}this.debugIndicatorLines[b].setLatLngs([i,C.latlng])}a===1&&(d.distance===void 0||C.distance-5<=d.distance)?(C.distance+5<d.distance&&(u=[]),d=C,d.layer=_,u.push(d)):a!==1&&(d={},d=C,d.layer=_,u.push(d))}),a!==1&&(u=u.sort((_,b)=>_.distance-b.distance)),a===-1&&(a=u.length);let g=this._getClosestLayerByPriority(u,a);return L.Util.isArray(g)?g:[g]},_calcLayerDistances(i,r){let a=this._map,u=r instanceof L.Marker||r instanceof L.CircleMarker,d=r instanceof L.Polygon,g=i;if(u){let _=r.getLatLng();return{latlng:{..._},distance:this._getDistance(a,_,g)}}return this._calcLatLngDistances(g,r.getLatLngs(),a,d)},_calcLatLngDistances(i,r,a,u=!1){let d,g,_,b=C=>{C.forEach((P,U)=>{if(Array.isArray(P)){b(P);return}if(this.options.snapSegment){let F=P,rt;u?rt=U+1===C.length?0:U+1:rt=U+1===C.length?void 0:U+1;let at=C[rt];if(at){let Et=this._getDistanceToSegment(a,i,F,at);(g===void 0||Et<g)&&(g=Et,_=[F,at])}}else{let F=this._getDistance(a,i,P);(g===void 0||F<g)&&(g=F,d=P)}})};return b(r),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(a,i,_[0],_[1])},segment:_,distance:g}:{latlng:d,distance:g}},_getClosestLayerByPriority(i,r=1){i=i.sort((_,b)=>_._leaflet_id-b._leaflet_id);let a=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],u=this._map.pm.globalOptions.snappingOrder||[],d=0,g={};return u.concat(a).forEach(_=>{g[_]||(d+=1,g[_]=d)}),i.sort(lu("instanceofShape",g)),r===1?i[0]||{}:i.slice(0,r)},_checkPrioritiySnapping(i){let r=this._map,a=i.segment[0],u=i.segment[1],d=i.latlng,g=d;if(this.options.snapVertex){let _=this._getDistance(r,a,d),b=this._getDistance(r,u,d),C=_<b?a:u,P=_<b?_:b;if(this.options.snapMiddle){let F=L.PM.Utils.calcMiddleLatLng(r,a,u),rt=this._getDistance(r,F,d);rt<_&&rt<b&&(C=F,P=rt)}let U=this.options.snapDistance;P<U&&(g=C)}return{...g}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(i,r,a,u){let d=i.getMaxZoom();d===1/0&&(d=i.getZoom());let g=i.project(r,d),_=i.project(a,d),b=i.project(u,d),C=L.LineUtil.closestPointOnSegment(g,_,b);return i.unproject(C,d)},_getDistanceToSegment(i,r,a,u){let d=i.latLngToContainerPoint(r),g=i.latLngToContainerPoint(a),_=i.latLngToContainerPoint(u);return L.LineUtil.pointToSegmentDistance(d,g,_)},_getDistance(i,r,a){return i.latLngToContainerPoint(r).distanceTo(i.latLngToContainerPoint(a))}},eo=ka,cu=L.Class.extend({includes:[eo,ts],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(i){L.Util.setOptions(this,i),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(i){let r=new L.Icon.Default;r.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=r,this._map=i,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(a=>{this[a]=new L.PM.Draw[a](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(i,r=!1){r?this.options.pathOptions=(0,hu.default)(this.options.pathOptions,i):this.options.pathOptions=i},getShapes(){return this.shapes},getShape(){return this._shape},enable(i,r){if(!i)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[i].enable(r)},disable(){this.shapes.forEach(i=>{this[i].disable()})},addControls(){this.shapes.forEach(i=>{this[i].addButton()})},getActiveShape(){let i;return this.shapes.forEach(r=>{this[r]._enabled&&(i=r)}),i},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let i=[];this._map.eachLayer(r=>{(r instanceof L.Polyline||r instanceof L.Marker||r instanceof L.Circle||r instanceof L.CircleMarker||r instanceof L.ImageOverlay)&&(r._pmTempLayer||i.push(r))}),this._enabled?i.forEach(r=>{L.PM.Utils.disablePopup(r)}):i.forEach(r=>{L.PM.Utils.enablePopup(r)})},createNewDrawInstance(i,r){let a=this._getShapeFromBtnName(r);if(this[i])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[a])throw new TypeError(`There is no class L.PM.Draw.${a}`);return this[i]=new L.PM.Draw[a](this._map),this[i].toolbarButtonName=i,this[i]._shape=i,this.shapes.push(i),this[r]&&this[i].setOptions(this[r].options),this[i].setOptions(this[i].options),this[i]},_getShapeFromBtnName(i){let r={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return r[i]?r[i]:this[i]?this[i]._shape:i},_finishLayer(i){i.pm&&(i.pm.setOptions(this.options),i.pm._shape=this._shape,i.pm._map=this._map),this._addDrawnLayerProp(i)},_addDrawnLayerProp(i){i._drawnByGeoman=!0},_setPane(i,r){r==="layerPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":r==="vertexPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":r==="markerPane"&&(i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),si=cu;si.Marker=si.extend({initialize(i){this._map=i,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(i){L.Util.setOptions(this,i),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(fe("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(r=>{this.isRelevantMarker(r)&&r.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(i=>{this.isRelevantMarker(i)&&i.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},isRelevantMarker(i){return i instanceof L.Marker&&i.pm&&!i._pmTempLayer&&!i.pm._initTextMarker},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let r=i;r.target=this._hintMarker,this._handleSnapping(r)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(i){if(!i.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng(),a=new L.Marker(r,this.options.markerStyle);this._setPane(a,"markerPane"),this._finishLayer(a),a.pm||(a.options.draggable=!1),a.addTo(this._map.pm._getContainingLayer()),a.pm&&this.options.markerEditable?a.pm.enable():a.dragging&&a.dragging.disable(),this._fireCreate(a),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var i,r;(i=this.options.markerStyle)!=null&&i.icon&&((r=this._hintMarker)==null||r.setIcon(this.options.markerStyle.icon))}});var li=63710088e-1,Ea={centimeters:li*100,centimetres:li*100,degrees:li/111325,feet:li*3.28084,inches:li*39.37,kilometers:li/1e3,kilometres:li/1e3,meters:li,metres:li,miles:li/1609.344,millimeters:li*1e3,millimetres:li*1e3,nauticalmiles:li/1852,radians:1,yards:li*1.0936};function jn(i,r,a){a===void 0&&(a={});var u={type:"Feature"};return(a.id===0||a.id)&&(u.id=a.id),a.bbox&&(u.bbox=a.bbox),u.properties=r||{},u.geometry=i,u}function Un(i,r,a){if(a===void 0&&(a={}),!i)throw new Error("coordinates is required");if(!Array.isArray(i))throw new Error("coordinates must be an Array");if(i.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!io(i[0])||!io(i[1]))throw new Error("coordinates must contain numbers");var u={type:"Point",coordinates:i};return jn(u,r,a)}function xn(i,r,a){if(a===void 0&&(a={}),i.length<2)throw new Error("coordinates must be an array of two or more positions");var u={type:"LineString",coordinates:i};return jn(u,r,a)}function _i(i,r){r===void 0&&(r={});var a={type:"FeatureCollection"};return r.id&&(a.id=r.id),r.bbox&&(a.bbox=r.bbox),a.features=i,a}function du(i,r){r===void 0&&(r="kilometers");var a=Ea[r];if(!a)throw new Error(r+" units is invalid");return i*a}function Br(i,r){r===void 0&&(r="kilometers");var a=Ea[r];if(!a)throw new Error(r+" units is invalid");return i/a}function yi(i){var r=i%(2*Math.PI);return r*180/Math.PI}function Oi(i){var r=i%360;return r*Math.PI/180}function io(i){return!isNaN(i)&&i!==null&&!Array.isArray(i)}function rs(i){var r,a,u={type:"FeatureCollection",features:[]};if(i.type==="Feature"?a=i.geometry:a=i,a.type==="LineString")r=[a.coordinates];else if(a.type==="MultiLineString")r=a.coordinates;else if(a.type==="MultiPolygon")r=[].concat.apply([],a.coordinates);else if(a.type==="Polygon")r=a.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return r.forEach(function(d){r.forEach(function(g){for(var _=0;_<d.length-1;_++)for(var b=_;b<g.length-1;b++)if(!(d===g&&(Math.abs(_-b)===1||_===0&&b===d.length-2&&d[_][0]===d[d.length-1][0]&&d[_][1]===d[d.length-1][1]))){var C=no(d[_][0],d[_][1],d[_+1][0],d[_+1][1],g[b][0],g[b][1],g[b+1][0],g[b+1][1]);C&&u.features.push(Un([C[0],C[1]]))}})}),u}function no(i,r,a,u,d,g,_,b){var C,P,U,F,rt,at={x:null,y:null,onLine1:!1,onLine2:!1};return C=(b-g)*(a-i)-(_-d)*(u-r),C===0?at.x!==null&&at.y!==null?at:!1:(P=r-g,U=i-d,F=(_-d)*P-(b-g)*U,rt=(a-i)*P-(u-r)*U,P=F/C,U=rt/C,at.x=i+P*(a-i),at.y=r+P*(u-r),P>=0&&P<=1&&(at.onLine1=!0),U>=0&&U<=1&&(at.onLine2=!0),at.onLine1&&at.onLine2?[at.x,at.y]:!1)}si.Line=si.extend({initialize(i){this._map=i,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(i){L.Util.setOptions(this,i),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(fe("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_syncHintLine(){let i=this._layer.getLatLngs();if(i.length>0){let r=i[i.length-1];this._hintline.setLatLngs([r,this._hintMarker.getLatLng()])}},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let a=i;a.target=this._hintMarker,this._handleSnapping(a)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let r=this._layer._defaultShape().slice();r.push(this._hintMarker.getLatLng()),this._change(r)},hasSelfIntersection(){return rs(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(i,r){let a=L.polyline(this._layer.getLatLngs());i&&(r||(r=this._hintMarker.getLatLng()),a.addLatLng(r));let u=rs(a.toGeoJSON(15));this._doesSelfIntersect=u.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(u,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(i){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,i.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng(),a=this._layer.getLatLngs(),u=a[a.length-1];if(r.equals(a[0])||a.length>0&&r.equals(u)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:r,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(r);let d=this._createMarker(r);this._setTooltipText(),this._setHintLineAfterNewVertex(r),this._fireVertexAdded(d,void 0,r,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(i)},_setHintLineAfterNewVertex(i){this._hintline.setLatLngs([i,i])},_removeLastVertex(){let i=this._markers;if(i.length<=1){this.disable();return}let r=this._layer.getLatLngs(),a=i[i.length-1],{indexPath:u}=L.PM.Utils.findDeepMarkerIndex(i,a);i.pop(),this._layerGroup.removeLayer(a);let d=i[i.length-1],g=r.indexOf(d.getLatLng());r=r.slice(0,g+1),this._layer.setLatLngs(r),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(a,u,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let i=this._layer.getLatLngs();if(i.length<=1)return;let r=L.polyline(i,this.options.pathOptions);this._setPane(r,"layerPane"),this._finishLayer(r),r.addTo(this._map.pm._getContainingLayer()),this._fireCreate(r),this.options.snappable&&this._cleanupSnapping();let a=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(a))},_createMarker(i){let r=new L.Marker(i,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._pmTempLayer=!0,this._layerGroup.addLayer(r),this._markers.push(r),r.on("click",this._finishShape,this),r},_setTooltipText(){let{length:i}=this._layer.getLatLngs().flat(),r="";i<=1?r=fe("tooltips.continueLine"):r=fe("tooltips.finishLine"),this._hintMarker.setTooltipContent(r)},_change(i){this._fireChange(i,"Draw")},setStyle(){var i,r;(i=this._layer)==null||i.setStyle(this.options.templineStyle),(r=this._hintline)==null||r.setStyle(this.options.hintlineStyle)}}),si.Polygon=si.Line.extend({initialize(i){this._map=i,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(i){L.PM.Draw.Line.prototype.enable.call(this,i),this._layer.pm._shape="Polygon"},_createMarker(i){let r=new L.Marker(i,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._pmTempLayer=!0,this._layerGroup.addLayer(r),this._markers.push(r),this._layer.getLatLngs().flat().length===1?(r.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(r)-1,this.options.snappable&&this._cleanupSnapping()):r.on("click",()=>1),r},_setTooltipText(){let{length:i}=this._layer.getLatLngs().flat(),r="";i<=2?r=fe("tooltips.continueLine"):r=fe("tooltips.finishPoly"),this._hintMarker.setTooltipContent(r)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let i=this._layer.getLatLngs();if(i.length<=2)return;let r=L.polygon(i,this.options.pathOptions);this._setPane(r,"layerPane"),this._finishLayer(r),r.addTo(this._map.pm._getContainingLayer()),this._fireCreate(r),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let a=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(a))}}),si.Rectangle=si.extend({initialize(i){this._map=i,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(i){if(L.Util.setOptions(this,i),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(fe("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let r=0;r<2;r+=1){let a=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(a,"vertexPane"),a._pmTempLayer=!0,this._layerGroup.addLayer(a),this._styleMarkers.push(a)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_placeStartingMarkers(i){this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(r),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(a=>{L.DomUtil.addClass(a._icon,"visible"),a.setLatLng(r)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(fe("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let i=this._startMarker.getLatLng();i&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([i,i]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let a=i;a.target=this._hintMarker,this._handleSnapping(a)}let r=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(r,"Draw")},_syncRectangleSize(){let i=xa(this._startMarker.getLatLng(),this._map),r=xa(this._hintMarker.getLatLng(),this._map),a=L.PM.Utils._getRotatedRectangle(i,r,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(a),this.options.cursorMarker&&this._styleMarkers){let u=[];a.forEach(d=>{!d.equals(i,1e-8)&&!d.equals(r,1e-8)&&u.push(d)}),u.forEach((d,g)=>{try{this._styleMarkers[g].setLatLng(d)}catch{}})}},_findCorners(){let i=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(i[0],i[2],this.options.rectangleAngle||0,this._map)},_finishShape(i){this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng(),a=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||a.equals(r))return;let u=L.rectangle([a,r],this.options.pathOptions);if(this.options.rectangleAngle){let g=L.PM.Utils._getRotatedRectangle(a,r,this.options.rectangleAngle||0,this._map);u.setLatLngs(g),u.pm&&u.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(u,"layerPane"),this._finishLayer(u),u.addTo(this._map.pm._getContainingLayer()),this._fireCreate(u);let d=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(d))},setStyle(){var i;(i=this._layer)==null||i.setStyle(this.options.pathOptions)}}),si.CircleMarker=si.extend({initialize(i){this._map=i,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(i){if(L.Util.setOptions(this,i),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let r={};L.extend(r,this.options.templineStyle),r.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),r),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(fe("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(fe("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(i=>{this.isRelevantMarker(i)&&i.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(i=>{this.isRelevantMarker(i)&&i.pm.disable()})},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_placeCenterMarker(i){this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let r=this._hintMarker.getLatLng();this._centerMarker.setLatLng(r),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let i=this._centerMarker.getLatLng();i&&(this._layer.setLatLng(i),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(fe("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let i=this._centerMarker.getLatLng(),r=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([i,r])},_syncCircleRadius(){let i=this._centerMarker.getLatLng(),r=this._hintMarker.getLatLng(),a=this._distanceCalculation(i,r);this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(a)},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let a=i;a.target=this._hintMarker,this._handleSnapping(a)}this._handleHintMarkerSnapping();let r=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(r,"Draw")},isRelevantMarker(i){return i instanceof L.CircleMarker&&!(i instanceof L.Circle)&&i.pm&&!i._pmTempLayer},_createMarker(i){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!i.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng(),a=new this._BaseCircleClass(r,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(a,"layerPane"),this._finishLayer(a),a.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(a),this._fireCreate(a),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(i){i.pm&&this.options.markerEditable&&i.pm.enable()},_finishShape(i){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._centerMarker.getLatLng(),a=this._defaultRadius;if(this.options[this._editableOption]){let _=this._hintMarker.getLatLng();a=this._distanceCalculation(r,_),this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?a=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&(a=this.options[this._maxRadiusOption])}let u={...this.options.pathOptions,radius:a},d=new this._BaseCircleClass(r,u);this._setPane(d,"layerPane"),this._finishLayer(d),d.addTo(this._map.pm._getContainingLayer()),d.pm&&d.pm._updateHiddenPolyCircle(),this._fireCreate(d);let g=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(g))},_getNewDestinationOfHintMarker(){let i=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return i;let r=this._centerMarker.getLatLng(),a=this._distanceCalculation(r,i);this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?i=ns(this._map,r,i,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&(i=ns(this._map,r,i,this._getMaxDistanceInMeter()))}return i},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let i=this._centerMarker.getLatLng(),r=this._hintMarker.getLatLng(),a=this._distanceCalculation(i,r);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var r,a;let i={};L.extend(i,this.options.templineStyle),this.options[this._editableOption]&&(i.radius=0),(r=this._layer)==null||r.setStyle(i),(a=this._hintline)==null||a.setStyle(this.options.hintlineStyle)},_distanceCalculation(i,r){return this._map.project(i).distanceTo(this._map.project(r))}}),si.Circle=si.CircleMarker.extend({initialize(i){this._map=i,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(i,r){return this._map.distance(i,r)}});function Ii(i){if(!i)throw new Error("coord is required");if(!Array.isArray(i)){if(i.type==="Feature"&&i.geometry!==null&&i.geometry.type==="Point")return i.geometry.coordinates;if(i.type==="Point")return i.coordinates}if(Array.isArray(i)&&i.length>=2&&!Array.isArray(i[0])&&!Array.isArray(i[1]))return i;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Qi(i){if(Array.isArray(i))return i;if(i.type==="Feature"){if(i.geometry!==null)return i.geometry.coordinates}else if(i.coordinates)return i.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function ss(i){return i.type==="Feature"?i.geometry:i}function ro(i,r){return i.type==="FeatureCollection"?"FeatureCollection":i.type==="GeometryCollection"?"GeometryCollection":i.type==="Feature"&&i.geometry!==null?i.geometry.type:i.type}function so(i,r,a){if(i!==null)for(var u,d,g,_,b,C,P,U=0,F=0,rt,at=i.type,Et=at==="FeatureCollection",Nt=at==="Feature",Zt=Et?i.features.length:1,ke=0;ke<Zt;ke++){P=Et?i.features[ke].geometry:Nt?i.geometry:i,rt=P?P.type==="GeometryCollection":!1,b=rt?P.geometries.length:1;for(var z=0;z<b;z++){var Z=0,Y=0;if(_=rt?P.geometries[z]:P,_!==null){C=_.coordinates;var lt=_.type;switch(U=0,lt){case null:break;case"Point":if(r(C,F,ke,Z,Y)===!1)return!1;F++,Z++;break;case"LineString":case"MultiPoint":for(u=0;u<C.length;u++){if(r(C[u],F,ke,Z,Y)===!1)return!1;F++,lt==="MultiPoint"&&Z++}lt==="LineString"&&Z++;break;case"Polygon":case"MultiLineString":for(u=0;u<C.length;u++){for(d=0;d<C[u].length-U;d++){if(r(C[u][d],F,ke,Z,Y)===!1)return!1;F++}lt==="MultiLineString"&&Z++,lt==="Polygon"&&Y++}lt==="Polygon"&&Z++;break;case"MultiPolygon":for(u=0;u<C.length;u++){for(Y=0,d=0;d<C[u].length;d++){for(g=0;g<C[u][d].length-U;g++){if(r(C[u][d][g],F,ke,Z,Y)===!1)return!1;F++}Y++}Z++}break;case"GeometryCollection":for(u=0;u<_.geometries.length;u++)if(so(_.geometries[u],r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function di(i,r){if(i.type==="Feature")r(i,0);else if(i.type==="FeatureCollection")for(var a=0;a<i.features.length&&r(i.features[a],a)!==!1;a++);}function nr(i,r,a){var u=a;return di(i,function(d,g){g===0&&a===void 0?u=d:u=r(u,d,g)}),u}function fu(i,r){var a,u,d,g,_,b,C,P,U,F,rt=0,at=i.type==="FeatureCollection",Et=i.type==="Feature",Nt=at?i.features.length:1;for(a=0;a<Nt;a++){for(b=at?i.features[a].geometry:Et?i.geometry:i,P=at?i.features[a].properties:Et?i.properties:{},U=at?i.features[a].bbox:Et?i.bbox:void 0,F=at?i.features[a].id:Et?i.id:void 0,C=b?b.type==="GeometryCollection":!1,_=C?b.geometries.length:1,d=0;d<_;d++){if(g=C?b.geometries[d]:b,g===null){if(r(null,rt,P,U,F)===!1)return!1;continue}switch(g.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(r(g,rt,P,U,F)===!1)return!1;break}case"GeometryCollection":{for(u=0;u<g.geometries.length;u++)if(r(g.geometries[u],rt,P,U,F)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}rt++}}function Vi(i,r){fu(i,function(a,u,d,g,_){var b=a===null?null:a.type;switch(b){case null:case"Point":case"LineString":case"Polygon":return r(jn(a,d,{bbox:g,id:_}),u,0)===!1?!1:void 0}var C;switch(b){case"MultiPoint":C="Point";break;case"MultiLineString":C="LineString";break;case"MultiPolygon":C="Polygon";break}for(var P=0;P<a.coordinates.length;P++){var U=a.coordinates[P],F={type:C,coordinates:U};if(r(jn(F,d),u,P)===!1)return!1}})}function pu(i){if(!i)throw new Error("geojson is required");var r=[];return Vi(i,function(a){rr(a,r)}),_i(r)}function rr(i,r){var a=[],u=i.geometry;if(u!==null){switch(u.type){case"Polygon":a=Qi(u);break;case"LineString":a=[Qi(u)]}a.forEach(function(d){var g=mu(d,i.properties);g.forEach(function(_){_.id=r.length,r.push(_)})})}}function mu(i,r){var a=[];return i.reduce(function(u,d){var g=xn([u,d],r);return g.bbox=Sr(u,d),a.push(g),d}),a}function Sr(i,r){var a=i[0],u=i[1],d=r[0],g=r[1],_=a<d?a:d,b=u<g?u:g,C=a>d?a:d,P=u>g?u:g;return[_,b,C,P]}var os=pu,as=y(Rn(),1);function gu(i,r){var a={},u=[];if(i.type==="LineString"&&(i=jn(i)),r.type==="LineString"&&(r=jn(r)),i.type==="Feature"&&r.type==="Feature"&&i.geometry!==null&&r.geometry!==null&&i.geometry.type==="LineString"&&r.geometry.type==="LineString"&&i.geometry.coordinates.length===2&&r.geometry.coordinates.length===2){var d=un(i,r);return d&&u.push(d),_i(u)}var g=(0,as.default)();return g.load(os(r)),di(os(i),function(_){di(g.search(_),function(b){var C=un(_,b);if(C){var P=Qi(C).join(",");a[P]||(a[P]=!0,u.push(C))}})}),_i(u)}function un(i,r){var a=Qi(i),u=Qi(r);if(a.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(u.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var d=a[0][0],g=a[0][1],_=a[1][0],b=a[1][1],C=u[0][0],P=u[0][1],U=u[1][0],F=u[1][1],rt=(F-P)*(_-d)-(U-C)*(b-g),at=(U-C)*(g-P)-(F-P)*(d-C),Et=(_-d)*(g-P)-(b-g)*(d-C);if(rt===0)return null;var Nt=at/rt,Zt=Et/rt;if(Nt>=0&&Nt<=1&&Zt>=0&&Zt<=1){var ke=d+Nt*(_-d),z=g+Nt*(b-g);return Un([ke,z])}return null}var tn=gu,Ma=y(Rn(),1);function oo(i,r,a){a===void 0&&(a={});var u=Ii(i),d=Ii(r),g=Oi(d[1]-u[1]),_=Oi(d[0]-u[0]),b=Oi(u[1]),C=Oi(d[1]),P=Math.pow(Math.sin(g/2),2)+Math.pow(Math.sin(_/2),2)*Math.cos(b)*Math.cos(C);return du(2*Math.atan2(Math.sqrt(P),Math.sqrt(1-P)),a.units)}var $n=oo;function hn(i){var r=i[0],a=i[1],u=i[2],d=i[3],g=$n(i.slice(0,2),[u,a]),_=$n(i.slice(0,2),[r,d]);if(g>=_){var b=(a+d)/2;return[r,b-(u-r)/2,u,b+(u-r)/2]}else{var C=(r+u)/2;return[C-(d-a)/2,a,C+(d-a)/2,d]}}var _u=hn;function wn(i){var r=[1/0,1/0,-1/0,-1/0];return so(i,function(a){r[0]>a[0]&&(r[0]=a[0]),r[1]>a[1]&&(r[1]=a[1]),r[2]<a[0]&&(r[2]=a[0]),r[3]<a[1]&&(r[3]=a[1])}),r}wn.default=wn;var Ar=wn;function cn(i,r){r===void 0&&(r={});var a=r.precision,u=r.coordinates,d=r.mutate;if(a=a==null||isNaN(a)?6:a,u=u==null||isNaN(u)?3:u,!i)throw new Error("<geojson> is required");if(typeof a!="number")throw new Error("<precision> must be a number");if(typeof u!="number")throw new Error("<coordinates> must be a number");(d===!1||d===void 0)&&(i=JSON.parse(JSON.stringify(i)));var g=Math.pow(10,a);return so(i,function(_){ls(_,g,u)}),i}function ls(i,r,a){i.length>a&&i.splice(a,i.length);for(var u=0;u<i.length;u++)i[u]=Math.round(i[u]*r)/r;return i}var Pa=cn;function us(i,r,a){if(a===void 0&&(a={}),a.final===!0)return hs(i,r);var u=Ii(i),d=Ii(r),g=Oi(u[0]),_=Oi(d[0]),b=Oi(u[1]),C=Oi(d[1]),P=Math.sin(_-g)*Math.cos(C),U=Math.cos(b)*Math.sin(C)-Math.sin(b)*Math.cos(C)*Math.cos(_-g);return yi(Math.atan2(P,U))}function hs(i,r){var a=us(r,i);return a=(a+180)%360,a}function cs(i,r,a,u){u===void 0&&(u={});var d=Ii(i),g=Oi(d[0]),_=Oi(d[1]),b=Oi(a),C=Br(r,u.units),P=Math.asin(Math.sin(_)*Math.cos(C)+Math.cos(_)*Math.sin(C)*Math.cos(b)),U=g+Math.atan2(Math.sin(b)*Math.sin(C)*Math.cos(_),Math.cos(C)-Math.sin(_)*Math.sin(P)),F=yi(U),rt=yi(P);return Un([F,rt],u.properties)}function ds(i,r,a){a===void 0&&(a={});var u=Un([1/0,1/0],{dist:1/0}),d=0;return Vi(i,function(g){for(var _=Qi(g),b=0;b<_.length-1;b++){var C=Un(_[b]);C.properties.dist=$n(r,C,a);var P=Un(_[b+1]);P.properties.dist=$n(r,P,a);var U=$n(C,P,a),F=Math.max(C.properties.dist,P.properties.dist),rt=us(C,P),at=cs(r,F,rt+90,a),Et=cs(r,F,rt-90,a),Nt=tn(xn([at.geometry.coordinates,Et.geometry.coordinates]),xn([C.geometry.coordinates,P.geometry.coordinates])),Zt=null;Nt.features.length>0&&(Zt=Nt.features[0],Zt.properties.dist=$n(r,Zt,a),Zt.properties.location=d+$n(C,Zt,a)),C.properties.dist<u.properties.dist&&(u=C,u.properties.index=b,u.properties.location=d),P.properties.dist<u.properties.dist&&(u=P,u.properties.index=b+1,u.properties.location=d+U),Zt&&Zt.properties.dist<u.properties.dist&&(u=Zt,u.properties.index=b),d+=U}}),u}var sr=ds;function fs(i,r){if(!i)throw new Error("line is required");if(!r)throw new Error("splitter is required");var a=ro(i),u=ro(r);if(a!=="LineString")throw new Error("line must be LineString");if(u==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(u==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var d=Pa(r,{precision:7});switch(u){case"Point":return ms(i,d);case"MultiPoint":return ps(i,d);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return ps(i,tn(i,d))}}function ps(i,r){var a=[],u=(0,Ma.default)();return Vi(r,function(d){if(a.forEach(function(b,C){b.id=C}),!a.length)a=ms(i,d).features,a.forEach(function(b){b.bbox||(b.bbox=_u(Ar(b)))}),u.load(_i(a));else{var g=u.search(d);if(g.features.length){var _=Ba(d,g);a=a.filter(function(b){return b.id!==_.id}),u.remove(_),di(ms(_,d),function(b){a.push(b),u.insert(b)})}}}),_i(a)}function ms(i,r){var a=[],u=Qi(i)[0],d=Qi(i)[i.geometry.coordinates.length-1];if(or(u,Ii(r))||or(d,Ii(r)))return _i([i]);var g=(0,Ma.default)(),_=os(i);g.load(_);var b=g.search(r);if(!b.features.length)return _i([i]);var C=Ba(r,b),P=[u],U=nr(_,function(F,rt,at){var Et=Qi(rt)[1],Nt=Ii(r);return at===C.id?(F.push(Nt),a.push(xn(F)),or(Nt,Et)?[Nt]:[Nt,Et]):(F.push(Et),F)},P);return U.length>1&&a.push(xn(U)),_i(a)}function Ba(i,r){if(!r.features.length)throw new Error("lines must contain features");if(r.features.length===1)return r.features[0];var a,u=1/0;return di(r,function(d){var g=sr(d,i),_=g.properties.dist;_<u&&(a=d,u=_)}),a}function or(i,r){return i[0]===r[0]&&i[1]===r[1]}var yu=fs;function Tr(i,r,a){if(a===void 0&&(a={}),!i)throw new Error("point is required");if(!r)throw new Error("polygon is required");var u=Ii(i),d=ss(r),g=d.type,_=r.bbox,b=d.coordinates;if(_&&Aa(u,_)===!1)return!1;g==="Polygon"&&(b=[b]);for(var C=!1,P=0;P<b.length&&!C;P++)if(Sa(u,b[P][0],a.ignoreBoundary)){for(var U=!1,F=1;F<b[P].length&&!U;)Sa(u,b[P][F],!a.ignoreBoundary)&&(U=!0),F++;U||(C=!0)}return C}function Sa(i,r,a){var u=!1;r[0][0]===r[r.length-1][0]&&r[0][1]===r[r.length-1][1]&&(r=r.slice(0,r.length-1));for(var d=0,g=r.length-1;d<r.length;g=d++){var _=r[d][0],b=r[d][1],C=r[g][0],P=r[g][1],U=i[1]*(_-C)+b*(C-i[0])+P*(i[0]-_)===0&&(_-i[0])*(C-i[0])<=0&&(b-i[1])*(P-i[1])<=0;if(U)return!a;var F=b>i[1]!=P>i[1]&&i[0]<(C-_)*(i[1]-b)/(P-b)+_;F&&(u=!u)}return u}function Aa(i,r){return r[0]<=i[0]&&r[1]<=i[1]&&r[2]>=i[0]&&r[3]>=i[1]}function vu(i,r,a){a===void 0&&(a={});for(var u=Ii(i),d=Qi(r),g=0;g<d.length-1;g++){var _=!1;if(a.ignoreEndVertices&&(g===0&&(_="start"),g===d.length-2&&(_="end"),g===0&&g+1===d.length-1&&(_="both")),en(d[g],d[g+1],u,_,typeof a.epsilon>"u"?null:a.epsilon))return!0}return!1}function en(i,r,a,u,d){var g=a[0],_=a[1],b=i[0],C=i[1],P=r[0],U=r[1],F=a[0]-b,rt=a[1]-C,at=P-b,Et=U-C,Nt=F*Et-rt*at;if(d!==null){if(Math.abs(Nt)>d)return!1}else if(Nt!==0)return!1;if(u){if(u==="start")return Math.abs(at)>=Math.abs(Et)?at>0?b<g&&g<=P:P<=g&&g<b:Et>0?C<_&&_<=U:U<=_&&_<C;if(u==="end")return Math.abs(at)>=Math.abs(Et)?at>0?b<=g&&g<P:P<g&&g<=b:Et>0?C<=_&&_<U:U<_&&_<=C;if(u==="both")return Math.abs(at)>=Math.abs(Et)?at>0?b<g&&g<P:P<g&&g<b:Et>0?C<_&&_<U:U<_&&_<C}else return Math.abs(at)>=Math.abs(Et)?at>0?b<=g&&g<=P:P<=g&&g<=b:Et>0?C<=_&&_<=U:U<=_&&_<=C;return!1}var Ln=vu;function bu(i,r){var a=ss(i),u=ss(r),d=a.type,g=u.type,_=a.coordinates,b=u.coordinates;switch(d){case"Point":switch(g){case"Point":return _s(_,b);default:throw new Error("feature2 "+g+" geometry not supported")}case"MultiPoint":switch(g){case"Point":return gs(a,u);case"MultiPoint":return xu(a,u);default:throw new Error("feature2 "+g+" geometry not supported")}case"LineString":switch(g){case"Point":return Ln(u,a,{ignoreEndVertices:!0});case"LineString":return Dr(a,u);case"MultiPoint":return Ta(a,u);default:throw new Error("feature2 "+g+" geometry not supported")}case"Polygon":switch(g){case"Point":return Tr(u,a,{ignoreBoundary:!0});case"LineString":return Lu(a,u);case"Polygon":return ar(a,u);case"MultiPoint":return wu(a,u);default:throw new Error("feature2 "+g+" geometry not supported")}default:throw new Error("feature1 "+d+" geometry not supported")}}function gs(i,r){var a,u=!1;for(a=0;a<i.coordinates.length;a++)if(_s(i.coordinates[a],r.coordinates)){u=!0;break}return u}function xu(i,r){for(var a=0,u=r.coordinates;a<u.length;a++){for(var d=u[a],g=!1,_=0,b=i.coordinates;_<b.length;_++){var C=b[_];if(_s(d,C)){g=!0;break}}if(!g)return!1}return!0}function Ta(i,r){for(var a=!1,u=0,d=r.coordinates;u<d.length;u++){var g=d[u];if(Ln(g,i,{ignoreEndVertices:!0})&&(a=!0),!Ln(g,i))return!1}return!!a}function wu(i,r){for(var a=0,u=r.coordinates;a<u.length;a++){var d=u[a];if(!Tr(d,i,{ignoreBoundary:!0}))return!1}return!0}function Dr(i,r){for(var a=!1,u=0,d=r.coordinates;u<d.length;u++){var g=d[u];if(Ln({type:"Point",coordinates:g},i,{ignoreEndVertices:!0})&&(a=!0),!Ln({type:"Point",coordinates:g},i,{ignoreEndVertices:!1}))return!1}return a}function Lu(i,r){var a=!1,u=0,d=Ar(i),g=Ar(r);if(!ao(d,g))return!1;for(u;u<r.coordinates.length-1;u++){var _=Cu(r.coordinates[u],r.coordinates[u+1]);if(Tr({type:"Point",coordinates:_},i,{ignoreBoundary:!0})){a=!0;break}}return a}function ar(i,r){if(i.type==="Feature"&&i.geometry===null||r.type==="Feature"&&r.geometry===null)return!1;var a=Ar(i),u=Ar(r);if(!ao(a,u))return!1;for(var d=ss(r).coordinates,g=0,_=d;g<_.length;g++)for(var b=_[g],C=0,P=b;C<P.length;C++){var U=P[C];if(!Tr(U,i))return!1}return!0}function ao(i,r){return!(i[0]>r[0]||i[2]<r[2]||i[1]>r[1]||i[3]<r[3])}function _s(i,r){return i[0]===r[0]&&i[1]===r[1]}function Cu(i,r){return[(i[0]+r[0])/2,(i[1]+r[1])/2]}var dn=y(yn()),lo=i=>()=>i,ys=i=>{let r=i?(a,u)=>u.minus(a).abs().isLessThanOrEqualTo(i):lo(!1);return(a,u)=>r(a,u)?0:a.comparedTo(u)};function Rr(i){let r=i?(a,u,d,g,_)=>a.exponentiatedBy(2).isLessThanOrEqualTo(g.minus(u).exponentiatedBy(2).plus(_.minus(d).exponentiatedBy(2)).times(i)):lo(!1);return(a,u,d)=>{let g=a.x,_=a.y,b=d.x,C=d.y,P=_.minus(C).times(u.x.minus(b)).minus(g.minus(b).times(u.y.minus(C)));return r(P,g,_,b,C)?0:P.comparedTo(0)}}var ku=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,lr=Math.ceil,ui=Math.floor,fi="[BigNumber Error] ",uo=fi+"Number primitive has more than 15 significant digits: ",Hi=1e14,de=14,ho=9007199254740991,vs=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],fn=1e7,vi=1e9;function Da(i){var r,a,u,d=z.prototype={constructor:z,toString:null,valueOf:null},g=new z(1),_=20,b=4,C=-7,P=21,U=-1e7,F=1e7,rt=!1,at=1,Et=0,Nt={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},Zt="0123456789abcdefghijklmnopqrstuvwxyz",ke=!0;function z(k,A){var D,T,R,O,W,q,J,nt,it=this;if(!(it instanceof z))return new z(k,A);if(A==null){if(k&&k._isBigNumber===!0){it.s=k.s,!k.c||k.e>F?it.c=it.e=null:k.e<U?it.c=[it.e=0]:(it.e=k.e,it.c=k.c.slice());return}if((q=typeof k=="number")&&k*0==0){if(it.s=1/k<0?(k=-k,-1):1,k===~~k){for(O=0,W=k;W>=10;W/=10,O++);O>F?it.c=it.e=null:(it.e=O,it.c=[k]);return}nt=String(k)}else{if(!ku.test(nt=String(k)))return u(it,nt,q);it.s=nt.charCodeAt(0)==45?(nt=nt.slice(1),-1):1}(O=nt.indexOf("."))>-1&&(nt=nt.replace(".","")),(W=nt.search(/e/i))>0?(O<0&&(O=W),O+=+nt.slice(W+1),nt=nt.substring(0,W)):O<0&&(O=nt.length)}else{if(e(A,2,Zt.length,"Base"),A==10&&ke)return it=new z(k),Q(it,_+it.e+1,b);if(nt=String(k),q=typeof k=="number"){if(k*0!=0)return u(it,nt,q,A);if(it.s=1/k<0?(nt=nt.slice(1),-1):1,z.DEBUG&&nt.replace(/^0\.0*|\./,"").length>15)throw Error(uo+k)}else it.s=nt.charCodeAt(0)===45?(nt=nt.slice(1),-1):1;for(D=Zt.slice(0,A),O=W=0,J=nt.length;W<J;W++)if(D.indexOf(T=nt.charAt(W))<0){if(T=="."){if(W>O){O=J;continue}}else if(!R&&(nt==nt.toUpperCase()&&(nt=nt.toLowerCase())||nt==nt.toLowerCase()&&(nt=nt.toUpperCase()))){R=!0,W=-1,O=0;continue}return u(it,String(k),q,A)}q=!1,nt=a(nt,A,10,it.s),(O=nt.indexOf("."))>-1?nt=nt.replace(".",""):O=nt.length}for(W=0;nt.charCodeAt(W)===48;W++);for(J=nt.length;nt.charCodeAt(--J)===48;);if(nt=nt.slice(W,++J)){if(J-=W,q&&z.DEBUG&&J>15&&(k>ho||k!==ui(k)))throw Error(uo+it.s*k);if((O=O-W-1)>F)it.c=it.e=null;else if(O<U)it.c=[it.e=0];else{if(it.e=O,it.c=[],W=(O+1)%de,O<0&&(W+=de),W<J){for(W&&it.c.push(+nt.slice(0,W)),J-=de;W<J;)it.c.push(+nt.slice(W,W+=de));W=de-(nt=nt.slice(W)).length}else W-=J;for(;W--;nt+="0");it.c.push(+nt)}}else it.c=[it.e=0]}z.clone=Da,z.ROUND_UP=0,z.ROUND_DOWN=1,z.ROUND_CEIL=2,z.ROUND_FLOOR=3,z.ROUND_HALF_UP=4,z.ROUND_HALF_DOWN=5,z.ROUND_HALF_EVEN=6,z.ROUND_HALF_CEIL=7,z.ROUND_HALF_FLOOR=8,z.EUCLID=9,z.config=z.set=function(k){var A,D;if(k!=null)if(typeof k=="object"){if(k.hasOwnProperty(A="DECIMAL_PLACES")&&(D=k[A],e(D,0,vi,A),_=D),k.hasOwnProperty(A="ROUNDING_MODE")&&(D=k[A],e(D,0,8,A),b=D),k.hasOwnProperty(A="EXPONENTIAL_AT")&&(D=k[A],D&&D.pop?(e(D[0],-1e9,0,A),e(D[1],0,vi,A),C=D[0],P=D[1]):(e(D,-1e9,vi,A),C=-(P=D<0?-D:D))),k.hasOwnProperty(A="RANGE"))if(D=k[A],D&&D.pop)e(D[0],-1e9,-1,A),e(D[1],1,vi,A),U=D[0],F=D[1];else if(e(D,-1e9,vi,A),D)U=-(F=D<0?-D:D);else throw Error(fi+A+" cannot be zero: "+D);if(k.hasOwnProperty(A="CRYPTO"))if(D=k[A],D===!!D)if(D)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))rt=D;else throw rt=!D,Error(fi+"crypto unavailable");else rt=D;else throw Error(fi+A+" not true or false: "+D);if(k.hasOwnProperty(A="MODULO_MODE")&&(D=k[A],e(D,0,9,A),at=D),k.hasOwnProperty(A="POW_PRECISION")&&(D=k[A],e(D,0,vi,A),Et=D),k.hasOwnProperty(A="FORMAT"))if(D=k[A],typeof D=="object")Nt=D;else throw Error(fi+A+" not an object: "+D);if(k.hasOwnProperty(A="ALPHABET"))if(D=k[A],typeof D=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(D))ke=D.slice(0,10)=="0123456789",Zt=D;else throw Error(fi+A+" invalid: "+D)}else throw Error(fi+"Object expected: "+k);return{DECIMAL_PLACES:_,ROUNDING_MODE:b,EXPONENTIAL_AT:[C,P],RANGE:[U,F],CRYPTO:rt,MODULO_MODE:at,POW_PRECISION:Et,FORMAT:Nt,ALPHABET:Zt}},z.isBigNumber=function(k){if(!k||k._isBigNumber!==!0)return!1;if(!z.DEBUG)return!0;var A,D,T=k.c,R=k.e,O=k.s;t:if({}.toString.call(T)=="[object Array]"){if((O===1||O===-1)&&R>=-1e9&&R<=vi&&R===ui(R)){if(T[0]===0){if(R===0&&T.length===1)return!0;break t}if(A=(R+1)%de,A<1&&(A+=de),String(T[0]).length==A){for(A=0;A<T.length;A++)if(D=T[A],D<0||D>=Hi||D!==ui(D))break t;if(D!==0)return!0}}}else if(T===null&&R===null&&(O===null||O===1||O===-1))return!0;throw Error(fi+"Invalid BigNumber: "+k)},z.maximum=z.max=function(){return Y(arguments,-1)},z.minimum=z.min=function(){return Y(arguments,1)},z.random=function(){var k=9007199254740992,A=Math.random()*k&2097151?function(){return ui(Math.random()*k)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(D){var T,R,O,W,q,J=0,nt=[],it=new z(g);if(D==null?D=_:e(D,0,vi),W=lr(D/de),rt)if(crypto.getRandomValues){for(T=crypto.getRandomValues(new Uint32Array(W*=2));J<W;)q=T[J]*131072+(T[J+1]>>>11),q>=9e15?(R=crypto.getRandomValues(new Uint32Array(2)),T[J]=R[0],T[J+1]=R[1]):(nt.push(q%1e14),J+=2);J=W/2}else if(crypto.randomBytes){for(T=crypto.randomBytes(W*=7);J<W;)q=(T[J]&31)*281474976710656+T[J+1]*1099511627776+T[J+2]*4294967296+T[J+3]*16777216+(T[J+4]<<16)+(T[J+5]<<8)+T[J+6],q>=9e15?crypto.randomBytes(7).copy(T,J):(nt.push(q%1e14),J+=7);J=W/7}else throw rt=!1,Error(fi+"crypto unavailable");if(!rt)for(;J<W;)q=A(),q<9e15&&(nt[J++]=q%1e14);for(W=nt[--J],D%=de,W&&D&&(q=vs[de-D],nt[J]=ui(W/q)*q);nt[J]===0;nt.pop(),J--);if(J<0)nt=[O=0];else{for(O=-1;nt[0]===0;nt.splice(0,1),O-=de);for(J=1,q=nt[0];q>=10;q/=10,J++);J<de&&(O-=de-J)}return it.e=O,it.c=nt,it}}(),z.sum=function(){for(var k=1,A=arguments,D=new z(A[0]);k<A.length;)D=D.plus(A[k++]);return D},a=function(){var k="0123456789";function A(D,T,R,O){for(var W,q=[0],J,nt=0,it=D.length;nt<it;){for(J=q.length;J--;q[J]*=T);for(q[0]+=O.indexOf(D.charAt(nt++)),W=0;W<q.length;W++)q[W]>R-1&&(q[W+1]==null&&(q[W+1]=0),q[W+1]+=q[W]/R|0,q[W]%=R)}return q.reverse()}return function(D,T,R,O,W){var q,J,nt,it,Lt,Gt,Kt,ne,De=D.indexOf("."),Ne=_,Be=b;for(De>=0&&(it=Et,Et=0,D=D.replace(".",""),ne=new z(T),Gt=ne.pow(D.length-De),Et=it,ne.c=A(m(Bi(Gt.c),Gt.e,"0"),10,R,k),ne.e=ne.c.length),Kt=A(D,T,R,W?(q=Zt,k):(q=k,Zt)),nt=it=Kt.length;Kt[--it]==0;Kt.pop());if(!Kt[0])return q.charAt(0);if(De<0?--nt:(Gt.c=Kt,Gt.e=nt,Gt.s=O,Gt=r(Gt,ne,Ne,Be,R),Kt=Gt.c,Lt=Gt.r,nt=Gt.e),J=nt+Ne+1,De=Kt[J],it=R/2,Lt=Lt||J<0||Kt[J+1]!=null,Lt=Be<4?(De!=null||Lt)&&(Be==0||Be==(Gt.s<0?3:2)):De>it||De==it&&(Be==4||Lt||Be==6&&Kt[J-1]&1||Be==(Gt.s<0?8:7)),J<1||!Kt[0])D=Lt?m(q.charAt(1),-Ne,q.charAt(0)):q.charAt(0);else{if(Kt.length=J,Lt)for(--R;++Kt[--J]>R;)Kt[J]=0,J||(++nt,Kt=[1].concat(Kt));for(it=Kt.length;!Kt[--it];);for(De=0,D="";De<=it;D+=q.charAt(Kt[De++]));D=m(D,nt,q.charAt(0))}return D}}(),r=function(){function k(T,R,O){var W,q,J,nt,it=0,Lt=T.length,Gt=R%fn,Kt=R/fn|0;for(T=T.slice();Lt--;)J=T[Lt]%fn,nt=T[Lt]/fn|0,W=Kt*J+nt*Gt,q=Gt*J+W%fn*fn+it,it=(q/O|0)+(W/fn|0)+Kt*nt,T[Lt]=q%O;return it&&(T=[it].concat(T)),T}function A(T,R,O,W){var q,J;if(O!=W)J=O>W?1:-1;else for(q=J=0;q<O;q++)if(T[q]!=R[q]){J=T[q]>R[q]?1:-1;break}return J}function D(T,R,O,W){for(var q=0;O--;)T[O]-=q,q=T[O]<R[O]?1:0,T[O]=q*W+T[O]-R[O];for(;!T[0]&&T.length>1;T.splice(0,1));}return function(T,R,O,W,q){var J,nt,it,Lt,Gt,Kt,ne,De,Ne,Be,ze,xi,ja,Au,Tu,Cn,mo,sn=T.s==R.s?1:-1,Si=T.c,Ye=R.c;if(!Si||!Si[0]||!Ye||!Ye[0])return new z(!T.s||!R.s||(Si?Ye&&Si[0]==Ye[0]:!Ye)?NaN:Si&&Si[0]==0||!Ye?sn*0:sn/0);for(De=new z(sn),Ne=De.c=[],nt=T.e-R.e,sn=O+nt+1,q||(q=Hi,nt=Pi(T.e/de)-Pi(R.e/de),sn=sn/de|0),it=0;Ye[it]==(Si[it]||0);it++);if(Ye[it]>(Si[it]||0)&&nt--,sn<0)Ne.push(1),Lt=!0;else{for(Au=Si.length,Cn=Ye.length,it=0,sn+=2,Gt=ui(q/(Ye[0]+1)),Gt>1&&(Ye=k(Ye,Gt,q),Si=k(Si,Gt,q),Cn=Ye.length,Au=Si.length),ja=Cn,Be=Si.slice(0,Cn),ze=Be.length;ze<Cn;Be[ze++]=0);mo=Ye.slice(),mo=[0].concat(mo),Tu=Ye[0],Ye[1]>=q/2&&Tu++;do{if(Gt=0,J=A(Ye,Be,Cn,ze),J<0){if(xi=Be[0],Cn!=ze&&(xi=xi*q+(Be[1]||0)),Gt=ui(xi/Tu),Gt>1)for(Gt>=q&&(Gt=q-1),Kt=k(Ye,Gt,q),ne=Kt.length,ze=Be.length;A(Kt,Be,ne,ze)==1;)Gt--,D(Kt,Cn<ne?mo:Ye,ne,q),ne=Kt.length,J=1;else Gt==0&&(J=Gt=1),Kt=Ye.slice(),ne=Kt.length;if(ne<ze&&(Kt=[0].concat(Kt)),D(Be,Kt,ze,q),ze=Be.length,J==-1)for(;A(Ye,Be,Cn,ze)<1;)Gt++,D(Be,Cn<ze?mo:Ye,ze,q),ze=Be.length}else J===0&&(Gt++,Be=[0]);Ne[it++]=Gt,Be[0]?Be[ze++]=Si[ja]||0:(Be=[Si[ja]],ze=1)}while((ja++<Au||Be[0]!=null)&&sn--);Lt=Be[0]!=null,Ne[0]||Ne.splice(0,1)}if(q==Hi){for(it=1,sn=Ne[0];sn>=10;sn/=10,it++);Q(De,O+(De.e=it+nt*de-1)+1,W,Lt)}else De.e=nt,De.r=+Lt;return De}}();function Z(k,A,D,T){var R,O,W,q,J;if(D==null?D=b:e(D,0,8),!k.c)return k.toString();if(R=k.c[0],W=k.e,A==null)J=Bi(k.c),J=T==1||T==2&&(W<=C||W>=P)?h(J,W):m(J,W,"0");else if(k=Q(new z(k),A,D),O=k.e,J=Bi(k.c),q=J.length,T==1||T==2&&(A<=O||O<=C)){for(;q<A;J+="0",q++);J=h(J,O)}else if(A-=W,J=m(J,O,"0"),O+1>q){if(--A>0)for(J+=".";A--;J+="0");}else if(A+=O-q,A>0)for(O+1==q&&(J+=".");A--;J+="0");return k.s<0&&R?"-"+J:J}function Y(k,A){for(var D,T,R=1,O=new z(k[0]);R<k.length;R++)T=new z(k[R]),(!T.s||(D=Gn(O,T))===A||D===0&&O.s===A)&&(O=T);return O}function lt(k,A,D){for(var T=1,R=A.length;!A[--R];A.pop());for(R=A[0];R>=10;R/=10,T++);return(D=T+D*de-1)>F?k.c=k.e=null:D<U?k.c=[k.e=0]:(k.e=D,k.c=A),k}u=function(){var k=/^(-?)0([xbo])(?=\w[\w.]*$)/i,A=/^([^.]+)\.$/,D=/^\.([^.]+)$/,T=/^-?(Infinity|NaN)$/,R=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(O,W,q,J){var nt,it=q?W:W.replace(R,"");if(T.test(it))O.s=isNaN(it)?null:it<0?-1:1;else{if(!q&&(it=it.replace(k,function(Lt,Gt,Kt){return nt=(Kt=Kt.toLowerCase())=="x"?16:Kt=="b"?2:8,!J||J==nt?Gt:Lt}),J&&(nt=J,it=it.replace(A,"$1").replace(D,"0.$1")),W!=it))return new z(it,nt);if(z.DEBUG)throw Error(fi+"Not a"+(J?" base "+J:"")+" number: "+W);O.s=null}O.c=O.e=null}}();function Q(k,A,D,T){var R,O,W,q,J,nt,it,Lt=k.c,Gt=vs;if(Lt){t:{for(R=1,q=Lt[0];q>=10;q/=10,R++);if(O=A-R,O<0)O+=de,W=A,J=Lt[nt=0],it=ui(J/Gt[R-W-1]%10);else if(nt=lr((O+1)/de),nt>=Lt.length)if(T){for(;Lt.length<=nt;Lt.push(0));J=it=0,R=1,O%=de,W=O-de+1}else break t;else{for(J=q=Lt[nt],R=1;q>=10;q/=10,R++);O%=de,W=O-de+R,it=W<0?0:ui(J/Gt[R-W-1]%10)}if(T=T||A<0||Lt[nt+1]!=null||(W<0?J:J%Gt[R-W-1]),T=D<4?(it||T)&&(D==0||D==(k.s<0?3:2)):it>5||it==5&&(D==4||T||D==6&&(O>0?W>0?J/Gt[R-W]:0:Lt[nt-1])%10&1||D==(k.s<0?8:7)),A<1||!Lt[0])return Lt.length=0,T?(A-=k.e+1,Lt[0]=Gt[(de-A%de)%de],k.e=-A||0):Lt[0]=k.e=0,k;if(O==0?(Lt.length=nt,q=1,nt--):(Lt.length=nt+1,q=Gt[de-O],Lt[nt]=W>0?ui(J/Gt[R-W]%Gt[W])*q:0),T)for(;;)if(nt==0){for(O=1,W=Lt[0];W>=10;W/=10,O++);for(W=Lt[0]+=q,q=1;W>=10;W/=10,q++);O!=q&&(k.e++,Lt[0]==Hi&&(Lt[0]=1));break}else{if(Lt[nt]+=q,Lt[nt]!=Hi)break;Lt[nt--]=0,q=1}for(O=Lt.length;Lt[--O]===0;Lt.pop());}k.e>F?k.c=k.e=null:k.e<U&&(k.c=[k.e=0])}return k}function st(k){var A,D=k.e;return D===null?k.toString():(A=Bi(k.c),A=D<=C||D>=P?h(A,D):m(A,D,"0"),k.s<0?"-"+A:A)}return d.absoluteValue=d.abs=function(){var k=new z(this);return k.s<0&&(k.s=1),k},d.comparedTo=function(k,A){return Gn(this,new z(k,A))},d.decimalPlaces=d.dp=function(k,A){var D,T,R,O=this;if(k!=null)return e(k,0,vi),A==null?A=b:e(A,0,8),Q(new z(O),k+O.e+1,A);if(!(D=O.c))return null;if(T=((R=D.length-1)-Pi(this.e/de))*de,R=D[R])for(;R%10==0;R/=10,T--);return T<0&&(T=0),T},d.dividedBy=d.div=function(k,A){return r(this,new z(k,A),_,b)},d.dividedToIntegerBy=d.idiv=function(k,A){return r(this,new z(k,A),0,1)},d.exponentiatedBy=d.pow=function(k,A){var D,T,R,O,W,q,J,nt,it,Lt=this;if(k=new z(k),k.c&&!k.isInteger())throw Error(fi+"Exponent not an integer: "+st(k));if(A!=null&&(A=new z(A)),q=k.e>14,!Lt.c||!Lt.c[0]||Lt.c[0]==1&&!Lt.e&&Lt.c.length==1||!k.c||!k.c[0])return it=new z(Math.pow(+st(Lt),q?k.s*(2-s(k)):+st(k))),A?it.mod(A):it;if(J=k.s<0,A){if(A.c?!A.c[0]:!A.s)return new z(NaN);T=!J&&Lt.isInteger()&&A.isInteger(),T&&(Lt=Lt.mod(A))}else{if(k.e>9&&(Lt.e>0||Lt.e<-1||(Lt.e==0?Lt.c[0]>1||q&&Lt.c[1]>=24e7:Lt.c[0]<8e13||q&&Lt.c[0]<=9999975e7)))return O=Lt.s<0&&s(k)?-0:0,Lt.e>-1&&(O=1/O),new z(J?1/O:O);Et&&(O=lr(Et/de+2))}for(q?(D=new z(.5),J&&(k.s=1),nt=s(k)):(R=Math.abs(+st(k)),nt=R%2),it=new z(g);;){if(nt){if(it=it.times(Lt),!it.c)break;O?it.c.length>O&&(it.c.length=O):T&&(it=it.mod(A))}if(R){if(R=ui(R/2),R===0)break;nt=R%2}else if(k=k.times(D),Q(k,k.e+1,1),k.e>14)nt=s(k);else{if(R=+st(k),R===0)break;nt=R%2}Lt=Lt.times(Lt),O?Lt.c&&Lt.c.length>O&&(Lt.c.length=O):T&&(Lt=Lt.mod(A))}return T?it:(J&&(it=g.div(it)),A?it.mod(A):O?Q(it,Et,b,W):it)},d.integerValue=function(k){var A=new z(this);return k==null?k=b:e(k,0,8),Q(A,A.e+1,k)},d.isEqualTo=d.eq=function(k,A){return Gn(this,new z(k,A))===0},d.isFinite=function(){return!!this.c},d.isGreaterThan=d.gt=function(k,A){return Gn(this,new z(k,A))>0},d.isGreaterThanOrEqualTo=d.gte=function(k,A){return(A=Gn(this,new z(k,A)))===1||A===0},d.isInteger=function(){return!!this.c&&Pi(this.e/de)>this.c.length-2},d.isLessThan=d.lt=function(k,A){return Gn(this,new z(k,A))<0},d.isLessThanOrEqualTo=d.lte=function(k,A){return(A=Gn(this,new z(k,A)))===-1||A===0},d.isNaN=function(){return!this.s},d.isNegative=function(){return this.s<0},d.isPositive=function(){return this.s>0},d.isZero=function(){return!!this.c&&this.c[0]==0},d.minus=function(k,A){var D,T,R,O,W=this,q=W.s;if(k=new z(k,A),A=k.s,!q||!A)return new z(NaN);if(q!=A)return k.s=-A,W.plus(k);var J=W.e/de,nt=k.e/de,it=W.c,Lt=k.c;if(!J||!nt){if(!it||!Lt)return it?(k.s=-A,k):new z(Lt?W:NaN);if(!it[0]||!Lt[0])return Lt[0]?(k.s=-A,k):new z(it[0]?W:b==3?-0:0)}if(J=Pi(J),nt=Pi(nt),it=it.slice(),q=J-nt){for((O=q<0)?(q=-q,R=it):(nt=J,R=Lt),R.reverse(),A=q;A--;R.push(0));R.reverse()}else for(T=(O=(q=it.length)<(A=Lt.length))?q:A,q=A=0;A<T;A++)if(it[A]!=Lt[A]){O=it[A]<Lt[A];break}if(O&&(R=it,it=Lt,Lt=R,k.s=-k.s),A=(T=Lt.length)-(D=it.length),A>0)for(;A--;it[D++]=0);for(A=Hi-1;T>q;){if(it[--T]<Lt[T]){for(D=T;D&&!it[--D];it[D]=A);--it[D],it[T]+=Hi}it[T]-=Lt[T]}for(;it[0]==0;it.splice(0,1),--nt);return it[0]?lt(k,it,nt):(k.s=b==3?-1:1,k.c=[k.e=0],k)},d.modulo=d.mod=function(k,A){var D,T,R=this;return k=new z(k,A),!R.c||!k.s||k.c&&!k.c[0]?new z(NaN):!k.c||R.c&&!R.c[0]?new z(R):(at==9?(T=k.s,k.s=1,D=r(R,k,0,3),k.s=T,D.s*=T):D=r(R,k,0,at),k=R.minus(D.times(k)),!k.c[0]&&at==1&&(k.s=R.s),k)},d.multipliedBy=d.times=function(k,A){var D,T,R,O,W,q,J,nt,it,Lt,Gt,Kt,ne,De,Ne,Be=this,ze=Be.c,xi=(k=new z(k,A)).c;if(!ze||!xi||!ze[0]||!xi[0])return!Be.s||!k.s||ze&&!ze[0]&&!xi||xi&&!xi[0]&&!ze?k.c=k.e=k.s=null:(k.s*=Be.s,!ze||!xi?k.c=k.e=null:(k.c=[0],k.e=0)),k;for(T=Pi(Be.e/de)+Pi(k.e/de),k.s*=Be.s,J=ze.length,Lt=xi.length,J<Lt&&(ne=ze,ze=xi,xi=ne,R=J,J=Lt,Lt=R),R=J+Lt,ne=[];R--;ne.push(0));for(De=Hi,Ne=fn,R=Lt;--R>=0;){for(D=0,Gt=xi[R]%Ne,Kt=xi[R]/Ne|0,W=J,O=R+W;O>R;)nt=ze[--W]%Ne,it=ze[W]/Ne|0,q=Kt*nt+it*Gt,nt=Gt*nt+q%Ne*Ne+ne[O]+D,D=(nt/De|0)+(q/Ne|0)+Kt*it,ne[O--]=nt%De;ne[O]=D}return D?++T:ne.splice(0,1),lt(k,ne,T)},d.negated=function(){var k=new z(this);return k.s=-k.s||null,k},d.plus=function(k,A){var D,T=this,R=T.s;if(k=new z(k,A),A=k.s,!R||!A)return new z(NaN);if(R!=A)return k.s=-A,T.minus(k);var O=T.e/de,W=k.e/de,q=T.c,J=k.c;if(!O||!W){if(!q||!J)return new z(R/0);if(!q[0]||!J[0])return J[0]?k:new z(q[0]?T:R*0)}if(O=Pi(O),W=Pi(W),q=q.slice(),R=O-W){for(R>0?(W=O,D=J):(R=-R,D=q),D.reverse();R--;D.push(0));D.reverse()}for(R=q.length,A=J.length,R-A<0&&(D=J,J=q,q=D,A=R),R=0;A;)R=(q[--A]=q[A]+J[A]+R)/Hi|0,q[A]=Hi===q[A]?0:q[A]%Hi;return R&&(q=[R].concat(q),++W),lt(k,q,W)},d.precision=d.sd=function(k,A){var D,T,R,O=this;if(k!=null&&k!==!!k)return e(k,1,vi),A==null?A=b:e(A,0,8),Q(new z(O),k,A);if(!(D=O.c))return null;if(R=D.length-1,T=R*de+1,R=D[R]){for(;R%10==0;R/=10,T--);for(R=D[0];R>=10;R/=10,T++);}return k&&O.e+1>T&&(T=O.e+1),T},d.shiftedBy=function(k){return e(k,-9007199254740991,ho),this.times("1e"+k)},d.squareRoot=d.sqrt=function(){var k,A,D,T,R,O=this,W=O.c,q=O.s,J=O.e,nt=_+4,it=new z("0.5");if(q!==1||!W||!W[0])return new z(!q||q<0&&(!W||W[0])?NaN:W?O:1/0);if(q=Math.sqrt(+st(O)),q==0||q==1/0?(A=Bi(W),(A.length+J)%2==0&&(A+="0"),q=Math.sqrt(+A),J=Pi((J+1)/2)-(J<0||J%2),q==1/0?A="5e"+J:(A=q.toExponential(),A=A.slice(0,A.indexOf("e")+1)+J),D=new z(A)):D=new z(q+""),D.c[0]){for(J=D.e,q=J+nt,q<3&&(q=0);;)if(R=D,D=it.times(R.plus(r(O,R,nt,1))),Bi(R.c).slice(0,q)===(A=Bi(D.c)).slice(0,q))if(D.e<J&&--q,A=A.slice(q-3,q+1),A=="9999"||!T&&A=="4999"){if(!T&&(Q(R,R.e+_+2,0),R.times(R).eq(O))){D=R;break}nt+=4,q+=4,T=1}else{(!+A||!+A.slice(1)&&A.charAt(0)=="5")&&(Q(D,D.e+_+2,1),k=!D.times(D).eq(O));break}}return Q(D,D.e+_+1,b,k)},d.toExponential=function(k,A){return k!=null&&(e(k,0,vi),k++),Z(this,k,A,1)},d.toFixed=function(k,A){return k!=null&&(e(k,0,vi),k=k+this.e+1),Z(this,k,A)},d.toFormat=function(k,A,D){var T,R=this;if(D==null)k!=null&&A&&typeof A=="object"?(D=A,A=null):k&&typeof k=="object"?(D=k,k=A=null):D=Nt;else if(typeof D!="object")throw Error(fi+"Argument not an object: "+D);if(T=R.toFixed(k,A),R.c){var O,W=T.split("."),q=+D.groupSize,J=+D.secondaryGroupSize,nt=D.groupSeparator||"",it=W[0],Lt=W[1],Gt=R.s<0,Kt=Gt?it.slice(1):it,ne=Kt.length;if(J&&(O=q,q=J,J=O,ne-=O),q>0&&ne>0){for(O=ne%q||q,it=Kt.substr(0,O);O<ne;O+=q)it+=nt+Kt.substr(O,q);J>0&&(it+=nt+Kt.slice(O)),Gt&&(it="-"+it)}T=Lt?it+(D.decimalSeparator||"")+((J=+D.fractionGroupSize)?Lt.replace(new RegExp("\\d{"+J+"}\\B","g"),"$&"+(D.fractionGroupSeparator||"")):Lt):it}return(D.prefix||"")+T+(D.suffix||"")},d.toFraction=function(k){var A,D,T,R,O,W,q,J,nt,it,Lt,Gt,Kt=this,ne=Kt.c;if(k!=null&&(q=new z(k),!q.isInteger()&&(q.c||q.s!==1)||q.lt(g)))throw Error(fi+"Argument "+(q.isInteger()?"out of range: ":"not an integer: ")+st(q));if(!ne)return new z(Kt);for(A=new z(g),nt=D=new z(g),T=J=new z(g),Gt=Bi(ne),O=A.e=Gt.length-Kt.e-1,A.c[0]=vs[(W=O%de)<0?de+W:W],k=!k||q.comparedTo(A)>0?O>0?A:nt:q,W=F,F=1/0,q=new z(Gt),J.c[0]=0;it=r(q,A,0,1),R=D.plus(it.times(T)),R.comparedTo(k)!=1;)D=T,T=R,nt=J.plus(it.times(R=nt)),J=R,A=q.minus(it.times(R=A)),q=R;return R=r(k.minus(D),T,0,1),J=J.plus(R.times(nt)),D=D.plus(R.times(T)),J.s=nt.s=Kt.s,O=O*2,Lt=r(nt,T,O,b).minus(Kt).abs().comparedTo(r(J,D,O,b).minus(Kt).abs())<1?[nt,T]:[J,D],F=W,Lt},d.toNumber=function(){return+st(this)},d.toPrecision=function(k,A){return k!=null&&e(k,1,vi),Z(this,k,A,2)},d.toString=function(k){var A,D=this,T=D.s,R=D.e;return R===null?T?(A="Infinity",T<0&&(A="-"+A)):A="NaN":(k==null?A=R<=C||R>=P?h(Bi(D.c),R):m(Bi(D.c),R,"0"):k===10&&ke?(D=Q(new z(D),_+R+1,b),A=m(Bi(D.c),D.e,"0")):(e(k,2,Zt.length,"Base"),A=a(m(Bi(D.c),R,"0"),10,k,T,!0)),T<0&&D.c[0]&&(A="-"+A)),A},d.valueOf=d.toJSON=function(){return st(this)},d._isBigNumber=!0,d[Symbol.toStringTag]="BigNumber",d[Symbol.for("nodejs.util.inspect.custom")]=d.valueOf,i!=null&&z.set(i),z}function Pi(i){var r=i|0;return i>0||i===r?r:r-1}function Bi(i){for(var r,a,u=1,d=i.length,g=i[0]+"";u<d;){for(r=i[u++]+"",a=de-r.length;a--;r="0"+r);g+=r}for(d=g.length;g.charCodeAt(--d)===48;);return g.slice(0,d+1||1)}function Gn(i,r){var a,u,d=i.c,g=r.c,_=i.s,b=r.s,C=i.e,P=r.e;if(!_||!b)return null;if(a=d&&!d[0],u=g&&!g[0],a||u)return a?u?0:-b:_;if(_!=b)return _;if(a=_<0,u=C==P,!d||!g)return u?0:!d^a?1:-1;if(!u)return C>P^a?1:-1;for(b=(C=d.length)<(P=g.length)?C:P,_=0;_<b;_++)if(d[_]!=g[_])return d[_]>g[_]^a?1:-1;return C==P?0:C>P^a?1:-1}function e(i,r,a,u){if(i<r||i>a||i!==ui(i))throw Error(fi+(u||"Argument")+(typeof i=="number"?i<r||i>a?" out of range: ":" not an integer: ":" not a primitive number: ")+String(i))}function s(i){var r=i.c.length-1;return Pi(i.e/de)==r&&i.c[r]%2!=0}function h(i,r){return(i.length>1?i.charAt(0)+"."+i.slice(1):i)+(r<0?"e":"e+")+r}function m(i,r,a){var u,d;if(r<0){for(d=a+".";++r;d+=a);i=d+i}else if(u=i.length,++r>u){for(d=a,r-=u;--r;d+=a);i+=d}else r<u&&(i=i.slice(0,r)+"."+i.slice(r));return i}var x=Da(),S=x,H=class{constructor(i){Jt(this,"key");Jt(this,"left",null);Jt(this,"right",null);this.key=i}},et=class extends H{constructor(i){super(i)}},ct=class{constructor(){Jt(this,"size",0);Jt(this,"modificationCount",0);Jt(this,"splayCount",0)}splay(i){let r=this.root;if(r==null)return this.compare(i,i),-1;let a=null,u=null,d=null,g=null,_=r,b=this.compare,C;for(;;)if(C=b(_.key,i),C>0){let P=_.left;if(P==null||(C=b(P.key,i),C>0&&(_.left=P.right,P.right=_,_=P,P=_.left,P==null)))break;a==null?u=_:a.left=_,a=_,_=P}else if(C<0){let P=_.right;if(P==null||(C=b(P.key,i),C<0&&(_.right=P.left,P.left=_,_=P,P=_.right,P==null)))break;d==null?g=_:d.right=_,d=_,_=P}else break;return d!=null&&(d.right=_.left,_.left=g),a!=null&&(a.left=_.right,_.right=u),this.root!==_&&(this.root=_,this.splayCount++),C}splayMin(i){let r=i,a=r.left;for(;a!=null;){let u=a;r.left=u.right,u.right=r,r=u,a=r.left}return r}splayMax(i){let r=i,a=r.right;for(;a!=null;){let u=a;r.right=u.left,u.left=r,r=u,a=r.right}return r}_delete(i){if(this.root==null||this.splay(i)!=0)return null;let r=this.root,a=r,u=r.left;if(this.size--,u==null)this.root=r.right;else{let d=r.right;r=this.splayMax(u),r.right=d,this.root=r}return this.modificationCount++,a}addNewRoot(i,r){this.size++,this.modificationCount++;let a=this.root;if(a==null){this.root=i;return}r<0?(i.left=a,i.right=a.right,a.right=null):(i.right=a,i.left=a.left,a.left=null),this.root=i}_first(){let i=this.root;return i==null?null:(this.root=this.splayMin(i),this.root)}_last(){let i=this.root;return i==null?null:(this.root=this.splayMax(i),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(i){return this.validKey(i)&&this.splay(i)==0}defaultCompare(){return(i,r)=>i<r?-1:i>r?1:0}wrap(){return{getRoot:()=>this.root,setRoot:i=>{this.root=i},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:i=>{this.splayCount=i},splay:i=>this.splay(i),has:i=>this.has(i)}}},Ct=class Lo extends ct{constructor(a,u){super();Jt(this,"root",null);Jt(this,"compare");Jt(this,"validKey");Jt(this,tc,"[object Set]");this.compare=a??this.defaultCompare(),this.validKey=u??(d=>d!=null&&d!=null)}delete(a){return this.validKey(a)?this._delete(a)!=null:!1}deleteAll(a){for(let u of a)this.delete(u)}forEach(a){let u=this[Symbol.iterator](),d;for(;d=u.next(),!d.done;)a(d.value,d.value,this)}add(a){let u=this.splay(a);return u!=0&&this.addNewRoot(new et(a),u),this}addAndReturn(a){let u=this.splay(a);return u!=0&&this.addNewRoot(new et(a),u),this.root.key}addAll(a){for(let u of a)this.add(u)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(a){if(a==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(a)<0)return this.root.key;let u=this.root.left;if(u==null)return null;let d=u.right;for(;d!=null;)u=d,d=u.right;return u.key}firstAfter(a){if(a==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(a)>0)return this.root.key;let u=this.root.right;if(u==null)return null;let d=u.left;for(;d!=null;)u=d,d=u.left;return u.key}retainAll(a){let u=new Lo(this.compare,this.validKey),d=this.modificationCount;for(let g of a){if(d!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(g)&&this.splay(g)==0&&u.add(this.root.key)}u.size!=this.size&&(this.root=u.root,this.size=u.size,this.modificationCount++)}lookup(a){return!this.validKey(a)||this.splay(a)!=0?null:this.root.key}intersection(a){let u=new Lo(this.compare,this.validKey);for(let d of this)a.has(d)&&u.add(d);return u}difference(a){let u=new Lo(this.compare,this.validKey);for(let d of this)a.has(d)||u.add(d);return u}union(a){let u=this.clone();return u.addAll(a),u}clone(){let a=new Lo(this.compare,this.validKey);return a.size=this.size,a.root=this.copyNode(this.root),a}copyNode(a){if(a==null)return null;function u(g,_){let b,C;do{if(b=g.left,C=g.right,b!=null){let P=new et(b.key);_.left=P,u(b,P)}if(C!=null){let P=new et(C.key);_.right=P,g=C,_=P}}while(C!=null)}let d=new et(a.key);return u(a,d),d}toSet(){return this.clone()}entries(){return new xe(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(ec=Symbol.iterator,tc=Symbol.toStringTag,ec)](){return new oe(this.wrap())}},jt=class{constructor(i){Jt(this,"tree");Jt(this,"path",new Array);Jt(this,"modificationCount",null);Jt(this,"splayCount");this.tree=i,this.splayCount=i.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let i=this.path[this.path.length-1];return this.getValue(i)}rebuildPath(i){this.path.splice(0,this.path.length),this.tree.splay(i),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(i){for(;i!=null;)this.path.push(i),i=i.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let a=this.tree.getRoot();for(;a!=null;)this.path.push(a),a=a.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let i=this.path[this.path.length-1],r=i.right;if(r!=null){for(;r!=null;)this.path.push(r),r=r.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===i;)i=this.path.pop();return this.path.length>0}},oe=class extends jt{getValue(i){return i.key}},xe=class extends jt{getValue(i){return[i.key,i.key]}},pi=i=>i,ei=i=>{if(i){let r=new Ct(ys(i)),a=new Ct(ys(i)),u=(g,_)=>_.addAndReturn(g),d=g=>({x:u(g.x,r),y:u(g.y,a)});return d({x:new S(0),y:new S(0)}),d}return pi},bi=i=>({set:r=>{He=bi(r)},reset:()=>bi(i),compare:ys(i),snap:ei(i),orient:Rr(i)}),He=bi(),nn=(i,r)=>i.ll.x.isLessThanOrEqualTo(r.x)&&r.x.isLessThanOrEqualTo(i.ur.x)&&i.ll.y.isLessThanOrEqualTo(r.y)&&r.y.isLessThanOrEqualTo(i.ur.y),co=(i,r)=>{if(r.ur.x.isLessThan(i.ll.x)||i.ur.x.isLessThan(r.ll.x)||r.ur.y.isLessThan(i.ll.y)||i.ur.y.isLessThan(r.ll.y))return null;let a=i.ll.x.isLessThan(r.ll.x)?r.ll.x:i.ll.x,u=i.ur.x.isLessThan(r.ur.x)?i.ur.x:r.ur.x,d=i.ll.y.isLessThan(r.ll.y)?r.ll.y:i.ll.y,g=i.ur.y.isLessThan(r.ur.y)?i.ur.y:r.ur.y;return{ll:{x:a,y:d},ur:{x:u,y:g}}},bs=(i,r)=>i.x.times(r.y).minus(i.y.times(r.x)),Ra=(i,r)=>i.x.times(r.x).plus(i.y.times(r.y)),Or=i=>Ra(i,i).sqrt(),Eu=(i,r,a)=>{let u={x:r.x.minus(i.x),y:r.y.minus(i.y)},d={x:a.x.minus(i.x),y:a.y.minus(i.y)};return bs(d,u).div(Or(d)).div(Or(u))},Oa=(i,r,a)=>{let u={x:r.x.minus(i.x),y:r.y.minus(i.y)},d={x:a.x.minus(i.x),y:a.y.minus(i.y)};return Ra(d,u).div(Or(d)).div(Or(u))},qe=(i,r,a)=>r.y.isZero()?null:{x:i.x.plus(r.x.div(r.y).times(a.minus(i.y))),y:a},Ir=(i,r,a)=>r.x.isZero()?null:{x:a,y:i.y.plus(r.y.div(r.x).times(a.minus(i.x)))},Mu=(i,r,a,u)=>{if(r.x.isZero())return Ir(a,u,i.x);if(u.x.isZero())return Ir(i,r,a.x);if(r.y.isZero())return qe(a,u,i.y);if(u.y.isZero())return qe(i,r,a.y);let d=bs(r,u);if(d.isZero())return null;let g={x:a.x.minus(i.x),y:a.y.minus(i.y)},_=bs(g,r).div(d),b=bs(g,u).div(d),C=i.x.plus(b.times(r.x)),P=a.x.plus(_.times(u.x)),U=i.y.plus(b.times(r.y)),F=a.y.plus(_.times(u.y)),rt=C.plus(P).div(2),at=U.plus(F).div(2);return{x:rt,y:at}},rn=class Rp{constructor(r,a){Jt(this,"point");Jt(this,"isLeft");Jt(this,"segment");Jt(this,"otherSE");Jt(this,"consumedBy");r.events===void 0?r.events=[this]:r.events.push(this),this.point=r,this.isLeft=a}static compare(r,a){let u=Rp.comparePoints(r.point,a.point);return u!==0?u:(r.point!==a.point&&r.link(a),r.isLeft!==a.isLeft?r.isLeft?1:-1:ur.compare(r.segment,a.segment))}static comparePoints(r,a){return r.x.isLessThan(a.x)?-1:r.x.isGreaterThan(a.x)?1:r.y.isLessThan(a.y)?-1:r.y.isGreaterThan(a.y)?1:0}link(r){if(r.point===this.point)throw new Error("Tried to link already linked events");let a=r.point.events;for(let u=0,d=a.length;u<d;u++){let g=a[u];this.point.events.push(g),g.point=this.point}this.checkForConsuming()}checkForConsuming(){let r=this.point.events.length;for(let a=0;a<r;a++){let u=this.point.events[a];if(u.segment.consumedBy===void 0)for(let d=a+1;d<r;d++){let g=this.point.events[d];g.consumedBy===void 0&&u.otherSE.point.events===g.otherSE.point.events&&u.segment.consume(g.segment)}}}getAvailableLinkedEvents(){let r=[];for(let a=0,u=this.point.events.length;a<u;a++){let d=this.point.events[a];d!==this&&!d.segment.ringOut&&d.segment.isInResult()&&r.push(d)}return r}getLeftmostComparator(r){let a=new Map,u=d=>{let g=d.otherSE;a.set(d,{sine:Eu(this.point,r.point,g.point),cosine:Oa(this.point,r.point,g.point)})};return(d,g)=>{a.has(d)||u(d),a.has(g)||u(g);let{sine:_,cosine:b}=a.get(d),{sine:C,cosine:P}=a.get(g);return _.isGreaterThanOrEqualTo(0)&&C.isGreaterThanOrEqualTo(0)?b.isLessThan(P)?1:b.isGreaterThan(P)?-1:0:_.isLessThan(0)&&C.isLessThan(0)?b.isLessThan(P)?-1:b.isGreaterThan(P)?1:0:C.isLessThan(_)?-1:C.isGreaterThan(_)?1:0}}},Pu=0,ur=class il{constructor(r,a,u,d){Jt(this,"id");Jt(this,"leftSE");Jt(this,"rightSE");Jt(this,"rings");Jt(this,"windings");Jt(this,"ringOut");Jt(this,"consumedBy");Jt(this,"prev");Jt(this,"_prevInResult");Jt(this,"_beforeState");Jt(this,"_afterState");Jt(this,"_isInResult");this.id=++Pu,this.leftSE=r,r.segment=this,r.otherSE=a,this.rightSE=a,a.segment=this,a.otherSE=r,this.rings=u,this.windings=d}static compare(r,a){let u=r.leftSE.point.x,d=a.leftSE.point.x,g=r.rightSE.point.x,_=a.rightSE.point.x;if(_.isLessThan(u))return 1;if(g.isLessThan(d))return-1;let b=r.leftSE.point.y,C=a.leftSE.point.y,P=r.rightSE.point.y,U=a.rightSE.point.y;if(u.isLessThan(d)){if(C.isLessThan(b)&&C.isLessThan(P))return 1;if(C.isGreaterThan(b)&&C.isGreaterThan(P))return-1;let F=r.comparePoint(a.leftSE.point);if(F<0)return 1;if(F>0)return-1;let rt=a.comparePoint(r.rightSE.point);return rt!==0?rt:-1}if(u.isGreaterThan(d)){if(b.isLessThan(C)&&b.isLessThan(U))return-1;if(b.isGreaterThan(C)&&b.isGreaterThan(U))return 1;let F=a.comparePoint(r.leftSE.point);if(F!==0)return F;let rt=r.comparePoint(a.rightSE.point);return rt<0?1:rt>0?-1:1}if(b.isLessThan(C))return-1;if(b.isGreaterThan(C))return 1;if(g.isLessThan(_)){let F=a.comparePoint(r.rightSE.point);if(F!==0)return F}if(g.isGreaterThan(_)){let F=r.comparePoint(a.rightSE.point);if(F<0)return 1;if(F>0)return-1}if(!g.eq(_)){let F=P.minus(b),rt=g.minus(u),at=U.minus(C),Et=_.minus(d);if(F.isGreaterThan(rt)&&at.isLessThan(Et))return 1;if(F.isLessThan(rt)&&at.isGreaterThan(Et))return-1}return g.isGreaterThan(_)?1:g.isLessThan(_)||P.isLessThan(U)?-1:P.isGreaterThan(U)?1:r.id<a.id?-1:r.id>a.id?1:0}static fromRing(r,a,u){let d,g,_,b=rn.comparePoints(r,a);if(b<0)d=r,g=a,_=1;else if(b>0)d=a,g=r,_=-1;else throw new Error(`Tried to create degenerate segment at [${r.x}, ${r.y}]`);let C=new rn(d,!0),P=new rn(g,!1);return new il(C,P,[u],[_])}replaceRightSE(r){this.rightSE=r,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let r=this.leftSE.point.y,a=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:r.isLessThan(a)?r:a},ur:{x:this.rightSE.point.x,y:r.isGreaterThan(a)?r:a}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(r){return r.x.eq(this.leftSE.point.x)&&r.y.eq(this.leftSE.point.y)||r.x.eq(this.rightSE.point.x)&&r.y.eq(this.rightSE.point.y)}comparePoint(r){return He.orient(this.leftSE.point,r,this.rightSE.point)}getIntersection(r){let a=this.bbox(),u=r.bbox(),d=co(a,u);if(d===null)return null;let g=this.leftSE.point,_=this.rightSE.point,b=r.leftSE.point,C=r.rightSE.point,P=nn(a,b)&&this.comparePoint(b)===0,U=nn(u,g)&&r.comparePoint(g)===0,F=nn(a,C)&&this.comparePoint(C)===0,rt=nn(u,_)&&r.comparePoint(_)===0;if(U&&P)return rt&&!F?_:!rt&&F?C:null;if(U)return F&&g.x.eq(C.x)&&g.y.eq(C.y)?null:g;if(P)return rt&&_.x.eq(b.x)&&_.y.eq(b.y)?null:b;if(rt&&F)return null;if(rt)return _;if(F)return C;let at=Mu(g,this.vector(),b,r.vector());return at===null||!nn(d,at)?null:He.snap(at)}split(r){let a=[],u=r.events!==void 0,d=new rn(r,!0),g=new rn(r,!1),_=this.rightSE;this.replaceRightSE(g),a.push(g),a.push(d);let b=new il(d,_,this.rings.slice(),this.windings.slice());return rn.comparePoints(b.leftSE.point,b.rightSE.point)>0&&b.swapEvents(),rn.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),u&&(d.checkForConsuming(),g.checkForConsuming()),a}swapEvents(){let r=this.rightSE;this.rightSE=this.leftSE,this.leftSE=r,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let a=0,u=this.windings.length;a<u;a++)this.windings[a]*=-1}consume(r){let a=this,u=r;for(;a.consumedBy;)a=a.consumedBy;for(;u.consumedBy;)u=u.consumedBy;let d=il.compare(a,u);if(d!==0){if(d>0){let g=a;a=u,u=g}if(a.prev===u){let g=a;a=u,u=g}for(let g=0,_=u.rings.length;g<_;g++){let b=u.rings[g],C=u.windings[g],P=a.rings.indexOf(b);P===-1?(a.rings.push(b),a.windings.push(C)):a.windings[P]+=C}u.rings=null,u.windings=null,u.consumedBy=a,u.leftSE.consumedBy=a.leftSE,u.rightSE.consumedBy=a.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let r=this.prev.consumedBy||this.prev;this._beforeState=r.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let r=this.beforeState();this._afterState={rings:r.rings.slice(0),windings:r.windings.slice(0),multiPolys:[]};let a=this._afterState.rings,u=this._afterState.windings,d=this._afterState.multiPolys;for(let b=0,C=this.rings.length;b<C;b++){let P=this.rings[b],U=this.windings[b],F=a.indexOf(P);F===-1?(a.push(P),u.push(U)):u[F]+=U}let g=[],_=[];for(let b=0,C=a.length;b<C;b++){if(u[b]===0)continue;let P=a[b],U=P.poly;if(_.indexOf(U)===-1)if(P.isExterior)g.push(U);else{_.indexOf(U)===-1&&_.push(U);let F=g.indexOf(P.poly);F!==-1&&g.splice(F,1)}}for(let b=0,C=g.length;b<C;b++){let P=g[b].multiPoly;d.indexOf(P)===-1&&d.push(P)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let r=this.beforeState().multiPolys,a=this.afterState().multiPolys;switch(Ia.type){case"union":{let u=r.length===0,d=a.length===0;this._isInResult=u!==d;break}case"intersection":{let u,d;r.length<a.length?(u=r.length,d=a.length):(u=a.length,d=r.length),this._isInResult=d===Ia.numMultiPolys&&u<d;break}case"xor":{let u=Math.abs(r.length-a.length);this._isInResult=u%2===1;break}case"difference":{let u=d=>d.length===1&&d[0].isSubject;this._isInResult=u(r)!==u(a);break}}return this._isInResult}},fo=class{constructor(i,r,a){Jt(this,"poly");Jt(this,"isExterior");Jt(this,"segments");Jt(this,"bbox");if(!Array.isArray(i)||i.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=a,this.segments=[],typeof i[0][0]!="number"||typeof i[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let u=He.snap({x:new S(i[0][0]),y:new S(i[0][1])});this.bbox={ll:{x:u.x,y:u.y},ur:{x:u.x,y:u.y}};let d=u;for(let g=1,_=i.length;g<_;g++){if(typeof i[g][0]!="number"||typeof i[g][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let b=He.snap({x:new S(i[g][0]),y:new S(i[g][1])});b.x.eq(d.x)&&b.y.eq(d.y)||(this.segments.push(ur.fromRing(d,b,this)),b.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=b.x),b.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=b.y),b.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=b.x),b.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=b.y),d=b)}(!u.x.eq(d.x)||!u.y.eq(d.y))&&this.segments.push(ur.fromRing(d,u,this))}getSweepEvents(){let i=[];for(let r=0,a=this.segments.length;r<a;r++){let u=this.segments[r];i.push(u.leftSE),i.push(u.rightSE)}return i}},Bu=class{constructor(i,r){Jt(this,"multiPoly");Jt(this,"exteriorRing");Jt(this,"interiorRings");Jt(this,"bbox");if(!Array.isArray(i))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new fo(i[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let a=1,u=i.length;a<u;a++){let d=new fo(i[a],this,!1);d.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=d.bbox.ll.x),d.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=d.bbox.ll.y),d.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=d.bbox.ur.x),d.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=d.bbox.ur.y),this.interiorRings.push(d)}this.multiPoly=r}getSweepEvents(){let i=this.exteriorRing.getSweepEvents();for(let r=0,a=this.interiorRings.length;r<a;r++){let u=this.interiorRings[r].getSweepEvents();for(let d=0,g=u.length;d<g;d++)i.push(u[d])}return i}},qh=class{constructor(i,r){Jt(this,"isSubject");Jt(this,"polys");Jt(this,"bbox");if(!Array.isArray(i))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof i[0][0][0]=="number"&&(i=[i])}catch{}this.polys=[],this.bbox={ll:{x:new S(Number.POSITIVE_INFINITY),y:new S(Number.POSITIVE_INFINITY)},ur:{x:new S(Number.NEGATIVE_INFINITY),y:new S(Number.NEGATIVE_INFINITY)}};for(let a=0,u=i.length;a<u;a++){let d=new Bu(i[a],this);d.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=d.bbox.ll.x),d.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=d.bbox.ll.y),d.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=d.bbox.ur.x),d.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=d.bbox.ur.y),this.polys.push(d)}this.isSubject=r}getSweepEvents(){let i=[];for(let r=0,a=this.polys.length;r<a;r++){let u=this.polys[r].getSweepEvents();for(let d=0,g=u.length;d<g;d++)i.push(u[d])}return i}},Fp=class xh{constructor(r){Jt(this,"events");Jt(this,"poly");Jt(this,"_isExteriorRing");Jt(this,"_enclosingRing");this.events=r;for(let a=0,u=r.length;a<u;a++)r[a].segment.ringOut=this;this.poly=null}static factory(r){let a=[];for(let u=0,d=r.length;u<d;u++){let g=r[u];if(!g.isInResult()||g.ringOut)continue;let _=null,b=g.leftSE,C=g.rightSE,P=[b],U=b.point,F=[];for(;_=b,b=C,P.push(b),b.point!==U;)for(;;){let rt=b.getAvailableLinkedEvents();if(rt.length===0){let Nt=P[0].point,Zt=P[P.length-1].point;throw new Error(`Unable to complete output ring starting at [${Nt.x}, ${Nt.y}]. Last matching segment found ends at [${Zt.x}, ${Zt.y}].`)}if(rt.length===1){C=rt[0].otherSE;break}let at=null;for(let Nt=0,Zt=F.length;Nt<Zt;Nt++)if(F[Nt].point===b.point){at=Nt;break}if(at!==null){let Nt=F.splice(at)[0],Zt=P.splice(Nt.index);Zt.unshift(Zt[0].otherSE),a.push(new xh(Zt.reverse()));continue}F.push({index:P.length,point:b.point});let Et=b.getLeftmostComparator(_);C=rt.sort(Et)[0].otherSE;break}a.push(new xh(P))}return a}getGeom(){let r=this.events[0].point,a=[r];for(let P=1,U=this.events.length-1;P<U;P++){let F=this.events[P].point,rt=this.events[P+1].point;He.orient(F,r,rt)!==0&&(a.push(F),r=F)}if(a.length===1)return null;let u=a[0],d=a[1];He.orient(u,r,d)===0&&a.shift(),a.push(a[0]);let g=this.isExteriorRing()?1:-1,_=this.isExteriorRing()?0:a.length-1,b=this.isExteriorRing()?a.length:-1,C=[];for(let P=_;P!=b;P+=g)C.push([a[P].x.toNumber(),a[P].y.toNumber()]);return C}isExteriorRing(){if(this._isExteriorRing===void 0){let r=this.enclosingRing();this._isExteriorRing=r?!r.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var d,g;let r=this.events[0];for(let _=1,b=this.events.length;_<b;_++){let C=this.events[_];rn.compare(r,C)>0&&(r=C)}let a=r.segment.prevInResult(),u=a?a.prevInResult():null;for(;;){if(!a)return null;if(!u)return a.ringOut;if(u.ringOut!==a.ringOut)return((d=u.ringOut)==null?void 0:d.enclosingRing())!==a.ringOut?a.ringOut:(g=a.ringOut)==null?void 0:g.enclosingRing();a=u.prevInResult(),u=a?a.prevInResult():null}}},Kh=class{constructor(i){Jt(this,"exteriorRing");Jt(this,"interiorRings");this.exteriorRing=i,i.poly=this,this.interiorRings=[]}addInterior(i){this.interiorRings.push(i),i.poly=this}getGeom(){let i=this.exteriorRing.getGeom();if(i===null)return null;let r=[i];for(let a=0,u=this.interiorRings.length;a<u;a++){let d=this.interiorRings[a].getGeom();d!==null&&r.push(d)}return r}},Np=class{constructor(i){Jt(this,"rings");Jt(this,"polys");this.rings=i,this.polys=this._composePolys(i)}getGeom(){let i=[];for(let r=0,a=this.polys.length;r<a;r++){let u=this.polys[r].getGeom();u!==null&&i.push(u)}return i}_composePolys(i){var a;let r=[];for(let u=0,d=i.length;u<d;u++){let g=i[u];if(!g.poly)if(g.isExteriorRing())r.push(new Kh(g));else{let _=g.enclosingRing();_!=null&&_.poly||r.push(new Kh(_)),(a=_==null?void 0:_.poly)==null||a.addInterior(g)}}return r}},zp=class{constructor(i,r=ur.compare){Jt(this,"queue");Jt(this,"tree");Jt(this,"segments");this.queue=i,this.tree=new Ct(r),this.segments=[]}process(i){let r=i.segment,a=[];if(i.consumedBy)return i.isLeft?this.queue.delete(i.otherSE):this.tree.delete(r),a;i.isLeft&&this.tree.add(r);let u=r,d=r;do u=this.tree.lastBefore(u);while(u!=null&&u.consumedBy!=null);do d=this.tree.firstAfter(d);while(d!=null&&d.consumedBy!=null);if(i.isLeft){let g=null;if(u){let b=u.getIntersection(r);if(b!==null&&(r.isAnEndpoint(b)||(g=b),!u.isAnEndpoint(b))){let C=this._splitSafely(u,b);for(let P=0,U=C.length;P<U;P++)a.push(C[P])}}let _=null;if(d){let b=d.getIntersection(r);if(b!==null&&(r.isAnEndpoint(b)||(_=b),!d.isAnEndpoint(b))){let C=this._splitSafely(d,b);for(let P=0,U=C.length;P<U;P++)a.push(C[P])}}if(g!==null||_!==null){let b=null;g===null?b=_:_===null?b=g:b=rn.comparePoints(g,_)<=0?g:_,this.queue.delete(r.rightSE),a.push(r.rightSE);let C=r.split(b);for(let P=0,U=C.length;P<U;P++)a.push(C[P])}a.length>0?(this.tree.delete(r),a.push(i)):(this.segments.push(r),r.prev=u)}else{if(u&&d){let g=u.getIntersection(d);if(g!==null){if(!u.isAnEndpoint(g)){let _=this._splitSafely(u,g);for(let b=0,C=_.length;b<C;b++)a.push(_[b])}if(!d.isAnEndpoint(g)){let _=this._splitSafely(d,g);for(let b=0,C=_.length;b<C;b++)a.push(_[b])}}}this.tree.delete(r)}return a}_splitSafely(i,r){this.tree.delete(i);let a=i.rightSE;this.queue.delete(a);let u=i.split(r);return u.push(a),i.consumedBy===void 0&&this.tree.add(i),u}},jp=class{constructor(){Jt(this,"type");Jt(this,"numMultiPolys")}run(i,r,a){po.type=i;let u=[new qh(r,!0)];for(let C=0,P=a.length;C<P;C++)u.push(new qh(a[C],!1));if(po.numMultiPolys=u.length,po.type==="difference"){let C=u[0],P=1;for(;P<u.length;)co(u[P].bbox,C.bbox)!==null?P++:u.splice(P,1)}if(po.type==="intersection")for(let C=0,P=u.length;C<P;C++){let U=u[C];for(let F=C+1,rt=u.length;F<rt;F++)if(co(U.bbox,u[F].bbox)===null)return[]}let d=new Ct(rn.compare);for(let C=0,P=u.length;C<P;C++){let U=u[C].getSweepEvents();for(let F=0,rt=U.length;F<rt;F++)d.add(U[F])}let g=new zp(d),_=null;for(d.size!=0&&(_=d.first(),d.delete(_));_;){let C=g.process(_);for(let P=0,U=C.length;P<U;P++){let F=C[P];F.consumedBy===void 0&&d.add(F)}d.size!=0?(_=d.first(),d.delete(_)):_=null}He.reset();let b=Fp.factory(g.segments);return new Np(b).getGeom()}},po=new jp,Ia=po,Up=(i,...r)=>Ia.run("intersection",i,r),$p=(i,...r)=>Ia.run("difference",i,r);He.set;function Fa(i){let r={type:"Feature"};return r.geometry=i,r}function Na(i){return i.type==="Feature"?i.geometry:i}function Wh(i){return i&&i.geometry&&i.geometry.coordinates?i.geometry.coordinates:i}function Gp(i){return Fa({type:"LineString",coordinates:i})}function Vp(i){return Fa({type:"MultiLineString",coordinates:i})}function Jh(i){return Fa({type:"Polygon",coordinates:i})}function Xh(i){return Fa({type:"MultiPolygon",coordinates:i})}function Hp(i,r){let a=Na(i),u=Na(r),d=Up(a.coordinates,u.coordinates);return d.length===0?null:d.length===1?Jh(d[0]):Xh(d)}function Zp(i,r){let a=Na(i),u=Na(r),d=$p(a.coordinates,u.coordinates);return d.length===0?null:d.length===1?Jh(d[0]):Xh(d)}function Yh(i){return Array.isArray(i)?1+Yh(i[0]):-1}function qp(i){i instanceof L.Polyline&&(i=i.toGeoJSON(15));let r=Wh(i),a=Yh(r),u=[];return a>1?r.forEach(d=>{u.push(Gp(d))}):u.push(i),u}function Kp(i){let r=[];return i.eachLayer(a=>{r.push(Wh(a.toGeoJSON(15)))}),Vp(r)}si.Cut=si.Polygon.extend({initialize(i){this._map=i,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let i=this._layer.getLatLngs();if(i.length<=2)return;let r=L.polygon(i,this.options.pathOptions);r._latlngInfos=this._layer._latlngInfo,this.cut(r),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:u,originalLayer:d})=>{this._fireCut(d,u,d),this._fireCut(this._map,u,d),d.pm._fireEdit()}),this._editedLayers=[];let a=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(a))},cut(i){let r=this._map._layers,a=i._latlngInfos||[];Object.keys(r).map(u=>r[u]).filter(u=>u.pm).filter(u=>!u._pmTempLayer).filter(u=>!L.PM.optIn&&!u.options.pmIgnore||L.PM.optIn&&u.options.pmIgnore===!1).filter(u=>u instanceof L.Polyline).filter(u=>u!==i).filter(u=>u.pm.options.allowCutting).filter(u=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(u)>-1:!0).filter(u=>!this._layerGroup.hasLayer(u)).filter(u=>{try{let d=!!tn(i.toGeoJSON(15),u.toGeoJSON(15)).features.length>0;return d||u instanceof L.Polyline&&!(u instanceof L.Polygon)?d:!!Hp(i.toGeoJSON(15),u.toGeoJSON(15))}catch{return u instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(u=>{let d;if(u instanceof L.Polygon){d=L.polygon(u.getLatLngs());let C=d.getLatLngs();a.forEach(P=>{if(P&&P.snapInfo){let{latlng:U}=P,F=this._calcClosestLayer(U,[d]);if(F&&F.segment&&F.distance<this.options.snapDistance){let{segment:rt}=F;if(rt&&rt.length===2){let{indexPath:at,parentPath:Et,newIndex:Nt}=L.PM.Utils._getIndexFromSegment(C,rt);(at.length>1?(0,dn.default)(C,Et):C).splice(Nt,0,U)}}}})}else d=u;let g=this._cutLayer(i,d),_=L.geoJSON(g,u.options);_.getLayers().length===1&&([_]=_.getLayers()),this._setPane(_,"layerPane");let b=_.addTo(this._map.pm._getContainingLayer());if(b.pm.enable(u.pm.options),b.pm.disable(),u._pmTempLayer=!0,i._pmTempLayer=!0,u.remove(),u.removeFrom(this._map.pm._getContainingLayer()),i.remove(),i.removeFrom(this._map.pm._getContainingLayer()),b.getLayers&&b.getLayers().length===0&&this._map.pm.removeLayer({target:b}),b instanceof L.LayerGroup?(b.eachLayer(C=>{this._addDrawnLayerProp(C)}),this._addDrawnLayerProp(b)):this._addDrawnLayerProp(b),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let C=this.options.layersToCut.indexOf(u);C>-1&&this.options.layersToCut.splice(C,1)}this._editedLayers.push({layer:b,originalLayer:u})})},_cutLayer(i,r){let a=L.geoJSON(),u;if(r instanceof L.Polygon)u=Zp(r.toGeoJSON(15),i.toGeoJSON(15));else{let d=qp(r);d.forEach(g=>{let _=yu(g,i.toGeoJSON(15)),b;_&&_.features.length>0?b=L.geoJSON(_):b=L.geoJSON(g),b.getLayers().forEach(C=>{bu(i.toGeoJSON(15),C.toGeoJSON(15))||C.addTo(a)})}),d.length>1?u=Kp(a):u=a.toGeoJSON(15)}return u},_change:L.Util.falseFn}),si.Text=si.extend({initialize(i){this._map=i,this._shape="Text",this.toolbarButtonName="drawText"},enable(i){L.Util.setOptions(this,i),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(fe("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var i;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(i=this._hintMarker)==null||i.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let r=i;r.target=this._hintMarker,this._handleSnapping(r)}},_createMarker(i){var d,g,_,b;if(!i.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(d=this.options.textOptions)==null?void 0:d.className){let C=this.options.textOptions.className.split(" ");this.textArea.classList.add(...C)}let a=this._createTextIcon(this.textArea),u=new L.Marker(r,{textMarker:!0,_textMarkerOverPM:!0,icon:a});if(this._setPane(u,"markerPane"),this._finishLayer(u),u.pm||(u.options.draggable=!1),u.addTo(this._map.pm._getContainingLayer()),u.pm){u.pm.textArea=this.textArea,L.setOptions(u.pm,{removeIfEmpty:((g=this.options.textOptions)==null?void 0:g.removeIfEmpty)??!0});let C=((_=this.options.textOptions)==null?void 0:_.focusAfterDraw)??!0;u.pm._createTextMarker(C),(b=this.options.textOptions)!=null&&b.text&&u.pm.setText(this.options.textOptions.text)}this._fireCreate(u),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(i){this.enable(),this._hintMarker.setLatLng(i.latlng)},_createTextArea(){let i=document.createElement("textarea");return i.readOnly=!0,i.classList.add("pm-textarea","pm-disabled"),i},_createTextIcon(i){return L.divIcon({className:"pm-text-marker",html:i})}});var Wp={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,ci(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let i=this._getDOMElem();i&&(ci(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(i)):L.DomEvent.on(i,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,ci(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let i=this._getDOMElem();i&&(ci(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(i)):L.DomEvent.off(i,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(i){let r=i.touches?i.touches[0]:i,a={originalEvent:r,target:this._layer};return a.containerPoint=this._map.mouseEventToContainerPoint(r),a.latlng=this._map.containerPointToLatLng(a.containerPoint),this._dragMixinOnMouseDown(a),!1},_simulateMouseMoveEvent(i){let r=i.touches?i.touches[0]:i,a={originalEvent:r,target:this._layer};return a.containerPoint=this._map.mouseEventToContainerPoint(r),a.latlng=this._map.containerPointToLatLng(a.containerPoint),this._dragMixinOnMouseMove(a),!1},_simulateMouseUpEvent(i){let r={originalEvent:i.touches?i.touches[0]:i,target:this._layer};return i.type.indexOf("touch")===-1&&(r.containerPoint=this._map.mouseEventToContainerPoint(i),r.latlng=this._map.containerPointToLatLng(r.containerPoint)),this._dragMixinOnMouseUp(r),!1},_dragMixinOnMouseDown(i){if(i.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(i);let r=i._fromLayerSync,a=this._syncLayers("_dragMixinOnMouseDown",i);if(this._layer instanceof L.Marker&&(this.options.snappable&&!r&&!a?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let u="resizeableCircleMarker";this._layer instanceof L.Circle&&(u="resizeableCircle"),this.options.snappable&&!r&&!a?this._layer.pm.options[u]||this._initSnappableMarkersDrag():this._layer.pm.options[u]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=i.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(i){this._overwriteEventIfItComesFromMarker(i);let r=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",i),this._dragging||(this._dragging=!0,L.DomUtil.addClass(r,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=i.latlng),this._onLayerDrag(i),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(i){let r=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",i),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,r&&L.DomUtil.removeClass(r,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(i){let{latlng:r}=i,a={lat:r.lat-this._tempDragCoord.lat,lng:r.lng-this._tempDragCoord.lng},u=d=>d.map(g=>{if(Array.isArray(g))return u(g);let _={lat:g.lat+a.lat,lng:g.lng+a.lng};return(g.alt||g.alt===0)&&(_.alt=g.alt),_});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let d=u([this._layer.getLatLng()]);this._layer.setLatLng(d[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let d=this._layer.getLatLng();this._layer._snapped&&(d=this._layer._orgLatLng);let g=u([d]);this._layer.setLatLng(g[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let d=u([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(d),this._fireChange(this._layer.getBounds(),"Edit")}else{let d=u(this._layer.getLatLngs());this._layer.setLatLngs(d),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=r,i.layer=this._layer,this._fireDrag(i)},addDraggingClass(){let i=this._getDOMElem();i&&L.DomUtil.addClass(i,"leaflet-pm-draggable")},removeDraggingClass(){let i=this._getDOMElem();i&&L.DomUtil.removeClass(i,"leaflet-pm-draggable")},_getDOMElem(){let i=null;return this._layer._path?i=this._layer._path:this._layer._renderer&&this._layer._renderer._container?i=this._layer._renderer._container:this._layer._image?i=this._layer._image:this._layer._icon&&(i=this._layer._icon),i},_overwriteEventIfItComesFromMarker(i){i.target.getLatLng&&(!i.target._radius||i.target._radius<=10)&&(i.containerPoint=this._map.mouseEventToContainerPoint(i.originalEvent),i.latlng=this._map.containerPointToLatLng(i.containerPoint))},_syncLayers(i,r){if(this.enabled())return!1;if(!r._fromLayerSync&&this._layer===r.target&&this.options.syncLayersOnDrag){r._fromLayerSync=!0;let a=[];if(L.Util.isArray(this.options.syncLayersOnDrag))a=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(u=>{u instanceof L.LayerGroup&&(a=a.concat(u.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let u in this._parentLayerGroup){let d=this._parentLayerGroup[u];d.pm&&(a=d.pm.getLayers(!0))}return L.Util.isArray(a)&&a.length>0&&(a=a.filter(u=>!!u.pm).filter(u=>!!u.pm.options.draggable),a.forEach(u=>{u!==this._layer&&u.pm[i]&&(u._snapped=!1,u.pm[i](r))})),a.length>0}return!1},_stopDOMImageDrag(i){return i.preventDefault(),!1}},Jp=Wp,Xp=y(yn());function Yp(i,r,a,u){return a.unproject(r.transform(a.project(i,u)),u)}function Qh(i,r,a){let u=a.getMaxZoom();if(u===1/0&&(u=a.getZoom()),L.Util.isArray(i)){let d=[];return i.forEach(g=>{d.push(Qh(g,r,a))}),d}return i instanceof L.LatLng?Yp(i,r,a,u):null}function xs(i,r){r instanceof L.Layer&&(r=r.getLatLng());let a=i.getMaxZoom();return a===1/0&&(a=i.getZoom()),i.project(r,a)}function za(i,r){let a=i.getMaxZoom();return a===1/0&&(a=i.getZoom()),i.unproject(r,a)}var Qp={_onRotateStart(i){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=xs(this._map,this._rotationOriginLatLng),this._rotationStartPoint=xs(this._map,i.target.getLatLng()),this._initialRotateLatLng=Yi(this._layer),this._startAngle=this.getAngle();let r=Yi(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,r),this._fireRotationStart(this._map,r)},_onRotate(i){let r=xs(this._map,i.target.getLatLng()),a=this._rotationStartPoint,u=this._rotationOriginPoint,d=Math.atan2(r.y-u.y,r.x-u.x)-Math.atan2(a.y-u.y,a.x-u.x);this._layer.setLatLngs(this._rotateLayer(d,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let g=this;function _(U,F=[],rt=-1){if(rt>-1&&F.push(rt),L.Util.isArray(U[0]))U.forEach((at,Et)=>_(at,F.slice(),Et));else{let at=F.length>0?(0,Xp.default)(g._markers,F):g._markers[0];U.forEach((Et,Nt)=>{at[Nt].setLatLng(Et)})}}_(this._layer.getLatLngs());let b=Yi(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(d,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let C=d*180/Math.PI;C=C<0?C+360:C;let P=C+this._startAngle;this._setAngle(P),this._rotationLayer.pm._setAngle(P),this._fireRotation(this._rotationLayer,C,b),this._fireRotation(this._map,C,b),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let i=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let r=Yi(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Yi(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,i,r),this._fireRotationEnd(this._map,i,r),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(i,r,a,u,d){let g=xs(d,a);return this._matrix=u.clone().rotate(i,g).flip(),Qh(r,this._matrix,d)},_setAngle(i){i=i<0?i+360:i,this._angle=i%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let i=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),r=i.getCenter();return i.removeFrom(this._layer._map),r},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(is(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let i={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),i),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Yi(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(i){let r=this.getAngle(),a=this._layer.getLatLngs(),u=i*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(u,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+i),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(u,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let d=this.getAngle()-r;d=d<0?d+360:d,this._startAngle=r,this._fireRotation(this._layer,d,a,this._layer),this._fireRotation(this._map||this._layer._map,d,a,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(i){let r=i-this.getAngle();this.rotateLayer(r)},getAngle(){return this._angle||0},setInitAngle(i){this._setAngle(i)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(i){this._rotationCenter=i,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(i)}},tm=Qp,em=L.Class.extend({includes:[Jp,eo,tm,ts],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(i){L.Util.setOptions(this,i)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(i,r){r==="layerPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":r==="vertexPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":r==="markerPane"&&(i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(i,r){let a=r.target,u={layer:this._layer,marker:a,event:r},d="";return i==="move"?d="moveVertexValidation":i==="add"?d="addVertexValidation":i==="remove"&&(d="removeVertexValidation"),this.options[d]&&typeof this.options[d]=="function"&&!this.options[d](u)?(i==="move"&&(a._cancelDragEventChain=a.getLatLng()),!1):(a._cancelDragEventChain=null,!0)},_vertexValidationDrag(i){return i._cancelDragEventChain?(i._latlng=i._cancelDragEventChain,i.update(),!1):!0},_vertexValidationDragEnd(i){return i._cancelDragEventChain?(i._cancelDragEventChain=null,!1):!0}}),hi=em;hi.LayerGroup=L.Class.extend({initialize(i){this._layerGroup=i,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(u=>this._initLayer(u));let r=u=>{if(u.layer._pmTempLayer)return;this._layers=this.getLayers();let d=this._layers.filter(g=>!g.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in g.pm._parentLayerGroup));d.forEach(g=>{this._initLayer(g)}),d.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(r,100,this),this),this._layerGroup.on("layerremove",u=>{this._removeLayerFromGroup(u.target)},this);let a=u=>{u.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(a,100,this),this)},enable(i,r=[]){r.length===0&&(this._layers=this.getLayers()),this._options=i,this._layers.forEach(a=>{a instanceof L.LayerGroup?r.indexOf(a._leaflet_id)===-1&&(r.push(a._leaflet_id),a.pm.enable(i,r)):a.pm.enable(i)})},disable(i=[]){i.length===0&&(this._layers=this.getLayers()),this._layers.forEach(r=>{r instanceof L.LayerGroup?i.indexOf(r._leaflet_id)===-1&&(i.push(r._leaflet_id),r.pm.disable(i)):r.pm.disable()})},enabled(i=[]){return i.length===0&&(this._layers=this.getLayers()),!!this._layers.find(r=>r instanceof L.LayerGroup?i.indexOf(r._leaflet_id)===-1?(i.push(r._leaflet_id),r.pm.enabled(i)):!1:r.pm.enabled())},toggleEdit(i,r=[]){r.length===0&&(this._layers=this.getLayers()),this._options=i,this._layers.forEach(a=>{a instanceof L.LayerGroup?r.indexOf(a._leaflet_id)===-1&&(r.push(a._leaflet_id),a.pm.toggleEdit(i,r)):a.pm.toggleEdit(i)})},_initLayer(i){let r=L.Util.stamp(this._layerGroup);i.pm._parentLayerGroup||(i.pm._parentLayerGroup={}),i.pm._parentLayerGroup[r]=this._layerGroup},_removeLayerFromGroup(i){if(i.pm&&i.pm._layerGroup){let r=L.Util.stamp(this._layerGroup);delete i.pm._layerGroup[r]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(i=>i.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var i;return this._map||((i=this._layers.find(r=>!!r._map))==null?void 0:i._map)||null},getLayers(i=!1,r=!0,a=!0,u=[]){let d=[];return i?this._layerGroup.getLayers().forEach(g=>{d.push(g),g instanceof L.LayerGroup&&u.indexOf(g._leaflet_id)===-1&&(u.push(g._leaflet_id),d=d.concat(g.pm.getLayers(!0,!0,!0,u)))}):d=this._layerGroup.getLayers(),a&&(d=d.filter(g=>!(g instanceof L.LayerGroup))),r&&(d=d.filter(g=>!!g.pm),d=d.filter(g=>!g._pmTempLayer),d=d.filter(g=>!L.PM.optIn&&!g.options.pmIgnore||L.PM.optIn&&g.options.pmIgnore===!1)),d},setOptions(i,r=[]){r.length===0&&(this._layers=this.getLayers()),this.options=i,this._layers.forEach(a=>{a.pm&&(a instanceof L.LayerGroup?r.indexOf(a._leaflet_id)===-1&&(r.push(a._leaflet_id),a.pm.setOptions(i,r)):a.pm.setOptions(i))})}}),hi.Marker=hi.extend({_shape:"Marker",initialize(i){this._layer=i,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(i={draggable:!0}){if(L.Util.setOptions(this,i),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(i){let r=i.target;r.remove(),this._fireRemove(r),this._fireRemove(this._map,r)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let i=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,i.off("pm:drag",this._handleSnapping,this),i.on("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.on("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this),i.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let i=this._layer;i.off("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this)}});var hr=y(yn()),im={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let i=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=i.filter((r,a,u)=>u.indexOf(r)===a)},_removeFromCache(i){let r=this.markerCache.indexOf(i);r>-1&&this.markerCache.splice(r,1)},renderLimits(i){this.markerCache.forEach(r=>{i.includes(r)?this._markerGroup.addLayer(r):this._markerGroup.removeLayer(r)})},applyLimitFilters({latlng:i={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let r=[...this._filterClosestMarkers(i)];this.renderLimits(r)},_filterClosestMarkers(i){let r=[...this.markerCache],a=this.options.limitMarkersToCount;return a===-1?r:(r.sort((u,d)=>{let g=u._latlng.distanceTo(i),_=d._latlng.distanceTo(i);return g-_}),r.filter((u,d)=>a>-1?d<a:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(i){this._preventRenderMarkers=!!i}},nm=im;hi.Line=hi.extend({includes:[nm],_shape:"Line",initialize(i){this._layer=i,this._enabled=!1},enable(i){if(L.Util.setOptions(this,i),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let i=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(i,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(i){return this.enabled()?this.disable():this.enable(i),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let i=this._map,r=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(i),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let a=u=>{if(Array.isArray(u[0]))return u.map(a,this);let d=u.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&u.map((g,_)=>{let b=this.isPolygon()?(_+1)%u.length:_+1;return this._createMiddleMarker(d[_],d[b])}),d};this._markers=a(r),this.filterMarkerGroup(),i.addLayer(this._markerGroup)},_createMarker(i){let r=new L.Marker(i,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._pmTempLayer=!0,this.options.rotate?(r.on("dragstart",this._onRotateStart,this),r.on("drag",this._onRotate,this),r.on("dragend",this._onRotateEnd,this)):(r.on("click",this._onVertexClick,this),r.on("dragstart",this._onMarkerDragStart,this),r.on("move",this._onMarkerDrag,this),r.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||r.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(r),r},_createMiddleMarker(i,r){if(!i||!r)return!1;let a=L.PM.Utils.calcMiddleLatLng(this._map,i.getLatLng(),r.getLatLng()),u=this._createMarker(a),d=L.divIcon({className:"marker-icon marker-icon-middle"});return u.setIcon(d),u.leftM=i,u.rightM=r,i._middleMarkerNext=u,r._middleMarkerPrev=u,u.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),u.on("movestart",this._onMiddleMarkerMoveStart,this),u},_onMiddleMarkerClick(i){let r=i.target;if(!this._vertexValidation("add",i))return;let a=L.divIcon({className:"marker-icon"});r.setIcon(a),this._addMarker(r,r.leftM,r.rightM)},_onMiddleMarkerMoveStart(i){let r=i.target;if(r.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",i)){r.on("move",this._onMiddleMarkerMovePrevent,this);return}r._dragging=!0,this._addMarker(r,r.leftM,r.rightM)},_onMiddleMarkerMovePrevent(i){let r=i.target;this._vertexValidationDrag(r)},_onMiddleMarkerMoveEnd(i){let r=i.target;if(r.off("move",this._onMiddleMarkerMovePrevent,this),r.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(r))return;let a=L.divIcon({className:"marker-icon"});r.setIcon(a),setTimeout(()=>{delete r._dragging},100)},_addMarker(i,r,a){i.off("movestart",this._onMiddleMarkerMoveStart,this),i.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let u=i.getLatLng(),d=this._layer._latlngs;delete i.leftM,delete i.rightM;let{indexPath:g,index:_,parentPath:b}=L.PM.Utils.findDeepMarkerIndex(this._markers,r),C=g.length>1?(0,hr.default)(d,b):d,P=g.length>1?(0,hr.default)(this._markers,b):this._markers;C.splice(_+1,0,u),P.splice(_+1,0,i),this._layer.setLatLngs(d),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(r,i),this._createMiddleMarker(i,a)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(i,L.PM.Utils.findDeepMarkerIndex(this._markers,i).indexPath,u),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return rs(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(i){let r=this._layer,a,u;if(this.options.allowSelfIntersection?a=!1:(u=rs(this._layer.toGeoJSON(15)),a=u.features.length>0),a){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return a;i?this._flashLayer():(r.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(u)}else r.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return a},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(i,r){i.forEach(a=>{Array.isArray(a)?this._updateDisabledMarkerStyle(a,r):a._icon&&(r&&!this._checkMarkerAllowedToDrag(a)?L.DomUtil.addClass(a._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(a._icon,"vertexmarker-disabled"))})},_removeMarker(i){let r=i.target;if(!this._vertexValidation("remove",i))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=Yi(this._layer,this._layer.getLatLngs()));let a=this._layer.getLatLngs(),{indexPath:u,index:d,parentPath:g}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);if(!u)return;let _=u.length>1?(0,hr.default)(a,g):a,b=u.length>1?(0,hr.default)(this._markers,g):this._markers,C=g[g.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!C&&(_.length<=2||this.isPolygon()&&_.length<=3)){this._flashLayer();return}_.splice(d,1),this._layer.setLatLngs(a),this.isPolygon()&&_.length<=2&&_.splice(0,_.length);let P=!1;if(_.length<=1&&(_.splice(0,_.length),g.length>1&&u.length>1&&(a=Pr(a)),this._layer.setLatLngs(a),this._initMarkers(),P=!0),zn(a)||this._layer.remove(),a=Pr(a),this._layer.setLatLngs(a),this._markers=Pr(this._markers),!P&&(b=u.length>1?(0,hr.default)(this._markers,g):this._markers,r._middleMarkerPrev&&(this._markerGroup.removeLayer(r._middleMarkerPrev),this._removeFromCache(r._middleMarkerPrev)),r._middleMarkerNext&&(this._markerGroup.removeLayer(r._middleMarkerNext),this._removeFromCache(r._middleMarkerNext)),this._markerGroup.removeLayer(r),this._removeFromCache(r),b)){let U,F;if(this.isPolygon()?(U=(d+1)%b.length,F=(d+(b.length-1))%b.length):(F=d-1<0?void 0:d-1,U=d+1>=b.length?void 0:d+1),U!==F){let rt=b[F],at=b[U];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(rt,at)}b.splice(d,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(r,u),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(i){let r=this._layer.getLatLngs(),a=i.getLatLng(),{indexPath:u,index:d,parentPath:g}=L.PM.Utils.findDeepMarkerIndex(this._markers,i);(u.length>1?(0,hr.default)(r,g):r).splice(d,1,a),this._layer.setLatLngs(r)},_getNeighborMarkers(i){let{indexPath:r,index:a,parentPath:u}=L.PM.Utils.findDeepMarkerIndex(this._markers,i),d=r.length>1?(0,hr.default)(this._markers,u):this._markers,g=(a+1)%d.length,_=(a+(d.length-1))%d.length,b=d[_],C=d[g];return{prevMarker:b,nextMarker:C}},_checkMarkerAllowedToDrag(i){let{prevMarker:r,nextMarker:a}=this._getNeighborMarkers(i),u=L.polyline([r.getLatLng(),i.getLatLng()]),d=L.polyline([i.getLatLng(),a.getLatLng()]),g=tn(this._layer.toGeoJSON(15),u.toGeoJSON(15)).features.length,_=tn(this._layer.toGeoJSON(15),d.toGeoJSON(15)).features.length;return i.getLatLng()===this._markers[0][0].getLatLng()?_+=1:i.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(g+=1),!(g<=2&&_<=2)},_onMarkerDragStart(i){let r=i.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",i))return;let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDragStart(i,a),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Yi(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(r):this._markerAllowedToDrag=null},_onMarkerDrag(i){let r=i.target;if(!this._vertexValidationDrag(r))return;let{indexPath:a,index:u,parentPath:d}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);if(!a)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(r);let g=a.length>1?(0,hr.default)(this._markers,d):this._markers,_=(u+1)%g.length,b=(u+(g.length-1))%g.length,C=r.getLatLng(),P=g[b].getLatLng(),U=g[_].getLatLng();if(r._middleMarkerNext){let F=L.PM.Utils.calcMiddleLatLng(this._map,C,U);r._middleMarkerNext.setLatLng(F)}if(r._middleMarkerPrev){let F=L.PM.Utils.calcMiddleLatLng(this._map,C,P);r._middleMarkerPrev.setLatLng(F)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(i,a),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(i){let r=i.target;if(!this._vertexValidationDragEnd(r))return;let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r),u=!this.options.allowSelfIntersection&&this.hasSelfIntersection();u&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(u=!1);let d=!this.options.allowSelfIntersection&&u;if(this._fireMarkerDragEnd(i,a,d),d){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(i,a);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(i){let r=i.target;if(r._dragging)return;let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireVertexClick(i,a)}}),hi.Polygon=hi.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(i){let{prevMarker:r,nextMarker:a}=this._getNeighborMarkers(i),u=L.polyline([r.getLatLng(),i.getLatLng()]),d=L.polyline([i.getLatLng(),a.getLatLng()]),g=tn(this._layer.toGeoJSON(15),u.toGeoJSON(15)).features.length,_=tn(this._layer.toGeoJSON(15),d.toGeoJSON(15)).features.length;return!(g<=2&&_<=2)}}),hi.Rectangle=hi.Polygon.extend({_shape:"Rectangle",_initMarkers(){let i=this._map,r=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,i.addLayer(this._markerGroup),this._markers=[],this._markers[0]=r.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((a,u)=>{let d=this._cornerMarkers.find(g=>g._index===u);d&&d.setLatLng(a)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(i,r){let a=new L.Marker(i,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(a,"vertexPane"),a._origLatLng=i,a._index=r,a._pmTempLayer=!0,a.on("click",this._onVertexClick,this),this._markerGroup.addLayer(a),a},_addMarkerEvents(){this._markers[0].forEach(i=>{i.on("dragstart",this._onMarkerDragStart,this),i.on("drag",this._onMarkerDrag,this),i.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||i.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(i){if(!this._vertexValidation("move",i))return;let r=i.target,a=this._cornerMarkers;r._oppositeCornerLatLng=a.find(d=>d._index===(r._index+2)%4).getLatLng(),r._snapped=!1;let{indexPath:u}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDragStart(i,u)},_onMarkerDrag(i){let r=i.target;if(!this._vertexValidationDrag(r)||r._index===void 0)return;this._adjustRectangleForMarkerMove(r);let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDrag(i,a),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(i){let r=i.target;if(!this._vertexValidationDragEnd(r))return;this._cornerMarkers.forEach(u=>{delete u._oppositeCornerLatLng});let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDragEnd(i,a),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(i){L.extend(i._origLatLng,i._latlng);let r=L.PM.Utils._getRotatedRectangle(i.getLatLng(),i._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(r),this._adjustAllMarkers(i),this._layer.redraw()},_adjustAllMarkers(i){let r=this._layer.getLatLngs()[0];if(r&&r.length!==4&&r.length>0)r.forEach((a,u)=>{this._cornerMarkers[u].setLatLng(a)}),this._cornerMarkers.slice(r.length).forEach(a=>{a.setLatLng(r[0])});else if(!r||!r.length)console.error("The layer has no LatLngs");else{let a=r.findIndex(u=>i.getLatLng().equals(u));a>-1?(this._cornerMarkers[(i._index+1)%4].setLatLng(r[(a+1)%4]),this._cornerMarkers[(i._index+2)%4].setLatLng(r[(a+2)%4]),this._cornerMarkers[(i._index+3)%4].setLatLng(r[(a+3)%4])):this._cornerMarkers.forEach(u=>{u.setLatLng(r[u._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(is(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let i=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(i[0],i[2],this.getAngle(),this._map||this)}}),hi.CircleMarker=hi.extend({_shape:"CircleMarker",initialize(i){this._layer=i,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(i={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,i),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let i=this._map;this._helperLayers&&(this._helperLayers.removeFrom(i),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(i);let r=this._layer.getLatLng(),a=this._layer._radius,u=this._getLatLngOnCircle(r,a);this._centerMarker=this._createCenterMarker(r),this._outerMarker=this._createOuterMarker(u),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(i,r){let a=this._map.project(i),u=L.point(a.x+r,a.y);return this._map.unproject(u)},_createHintLine(i,r){let a=i.getLatLng(),u=r.getLatLng();this._hintline=L.polyline([a,u],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(i){let r=this._createMarker(i);return this.options.draggable?(L.DomUtil.addClass(r._icon,"leaflet-pm-draggable"),r.on("move",this._moveCircle,this)):r.dragging.disable(),r},_createOuterMarker(i){let r=this._createMarker(i);return r.on("drag",this._resizeCircle,this),r},_createMarker(i){let r=new L.Marker(i,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._origLatLng=i,r._pmTempLayer=!0,r.on("dragstart",this._onMarkerDragStart,this),r.on("drag",this._onMarkerDrag,this),r.on("dragend",this._onMarkerDragEnd,this),r.on("click",this._onVertexClick,this),this._helperLayers.addLayer(r),r},_moveCircle(i){if(i.target._cancelDragEventChain)return;let r=this._centerMarker.getLatLng();this._layer.setLatLng(r);let a=this._layer._radius,u=this._getLatLngOnCircle(r,a);this._outerMarker._latlng=u,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let i=this._layer.getLatLng(),r=this._layer._radius,a=this._getLatLngOnCircle(i,r);this._outerMarker.setLatLng(a),this._centerMarker.setLatLng(i),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let i=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng(),a=this._distanceCalculation(i,r);this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(a),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let i=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng();this._hintline.setLatLngs([i,r])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(i){this._vertexValidation("move",i)&&this._fireMarkerDragStart(i)},_onMarkerDrag(i){let r=i.target;r instanceof L.Marker&&!this._vertexValidationDrag(r)||this._fireMarkerDrag(i)},_onMarkerDragEnd(i){this._extedingMarkerDragEnd();let r=i.target;this._vertexValidationDragEnd(r)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(i))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let i=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,i.off("pm:drag",this._handleSnapping,this),i.on("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.on("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this),i.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let i=this._layer;i.off("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let i=this._layer._map||this._map;if(i){let r=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),i,this._layer.getLatLng()),a=L.circle(this._layer.getLatLng(),this._layer.options);a.setRadius(r);let u=i&&i.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(a,200,!u).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(a,200,!u),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let i=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng(),a=this._distanceCalculation(i,r);return this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?r=ns(this._map,i,r,this._getMinDistanceInMeter(i)):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&(r=ns(this._map,i,r,this._getMaxDistanceInMeter(i))),r},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let i=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng(),a=this._distanceCalculation(i,r);this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(i,r){return this._map.project(i).distanceTo(this._map.project(r))},_getMinDistanceInMeter(i){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,i)},_getMaxDistanceInMeter(i){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,i)},_onVertexClick(i){i.target._dragging||this._fireVertexClick(i,void 0)}}),hi.Circle=hi.CircleMarker.extend({_shape:"Circle",initialize(i){this._layer=i,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(i){L.PM.Edit.CircleMarker.prototype.enable.call(this,i||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let i=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(i,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let i=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!i).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!i),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(i,r){return this._map.distance(i,r)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(i){i.target._dragging||this._fireVertexClick(i,void 0)}}),hi.ImageOverlay=hi.extend({_shape:"ImageOverlay",initialize(i){this._layer=i,this._enabled=!1},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},enabled(){return this._enabled},enable(i={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,i),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let i=this._layer.getBounds(),r=i.getNorthWest(),a=i.getNorthEast(),u=i.getSouthEast(),d=i.getSouthWest();return[r,a,u,d]}}),hi.Text=hi.extend({_shape:"Text",initialize(i){this._layer=i,this._enabled=!1},enable(i){if(L.Util.setOptions(this,i),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let i=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),i.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let i=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,i.off("pm:drag",this._handleSnapping,this),i.on("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.on("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this),i.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let i=this._layer;i.off("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let i=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,r=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${i}px`,this.textArea.style.width=`${r}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(i){i.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(i={}){let r=this._hasFocus;this._hasFocus=i.type==="focus",!r!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(i){i&&(this.textArea.value=i),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let r=this.options.className.split(" ");this.textArea.classList.add(...r)}let i=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(i),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(i=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),i===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(i){i.preventDefault()}});var Su=function(i,r,a,u,d,g){this._matrix=[i,r,a,u,d,g]};Su.init=()=>new L.PM.Matrix(1,0,0,1,0,0),Su.prototype={transform(i){return this._transform(i.clone())},_transform(i){let r=this._matrix,{x:a,y:u}=i;return i.x=r[0]*a+r[1]*u+r[4],i.y=r[2]*a+r[3]*u+r[5],i},untransform(i){let r=this._matrix;return new L.Point((i.x/r[0]-r[4])/r[0],(i.y/r[2]-r[5])/r[2])},clone(){let i=this._matrix;return new L.PM.Matrix(i[0],i[1],i[2],i[3],i[4],i[5])},translate(i){if(i===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let r,a;return typeof i=="number"?(r=i,a=i):(r=i.x,a=i.y),this._add(1,0,0,1,r,a)},scale(i,r){if(i===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let a,u;return r=r||L.point(0,0),typeof i=="number"?(a=i,u=i):(a=i.x,u=i.y),this._add(a,0,0,u,r.x,r.y)._add(1,0,0,1,-r.x,-r.y)},rotate(i,r){let a=Math.cos(i),u=Math.sin(i);return r=r||new L.Point(0,0),this._add(a,u,-u,a,r.x,r.y)._add(1,0,0,1,-r.x,-r.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(i,r,a,u,d,g){let _=[[],[],[]],b=this._matrix,C=[[b[0],b[2],b[4]],[b[1],b[3],b[5]],[0,0,1]],P=[[i,a,d],[r,u,g],[0,0,1]],U;i&&i instanceof L.PM.Matrix&&(b=i._matrix,P=[[b[0],b[2],b[4]],[b[1],b[3],b[5]],[0,0,1]]);for(let F=0;F<3;F+=1)for(let rt=0;rt<3;rt+=1){U=0;for(let at=0;at<3;at+=1)U+=C[F][at]*P[at][rt];_[F][rt]=U}return this._matrix=[_[0][0],_[1][0],_[0][1],_[1][1],_[0][2],_[1][2]],this}};var rm=Su,sm={calcMiddleLatLng(i,r,a){let u=i.project(r),d=i.project(a);return i.unproject(u._add(d)._divideBy(2))},findLayers(i){let r=[];return i.eachLayer(a=>{(a instanceof L.Polyline||a instanceof L.Marker||a instanceof L.Circle||a instanceof L.CircleMarker||a instanceof L.ImageOverlay)&&r.push(a)}),r=r.filter(a=>!!a.pm),r=r.filter(a=>!a._pmTempLayer),r=r.filter(a=>!L.PM.optIn&&!a.options.pmIgnore||L.PM.optIn&&a.options.pmIgnore===!1),r},circleToPolygon(i,r=60,a=!0){let u=i.getLatLng(),d=i.getRadius(),g=es(u,d,r,0,a),_=[];for(let b=0;b<g.length;b+=1){let C=[g[b].lat,g[b].lng];_.push(C)}return L.polygon(_,i.options)},disablePopup(i){i.getPopup()&&(i._tempPopupCopy=i.getPopup(),i.unbindPopup())},enablePopup(i){i._tempPopupCopy&&(i.bindPopup(i._tempPopupCopy),delete i._tempPopupCopy)},_fireEvent(i,r,a,u=!1){i.fire(r,a,u);let{groups:d}=this.getAllParentGroups(i);d.forEach(g=>{g.fire(r,a,u)})},getAllParentGroups(i){let r=[],a=[],u=d=>{for(let g in d._eventParents)if(r.indexOf(g)===-1){r.push(g);let _=d._eventParents[g];a.push(_),u(_)}};return!i._pmLastGroupFetch||!i._pmLastGroupFetch.time||new Date().getTime()-i._pmLastGroupFetch.time>1e3?(u(i),i._pmLastGroupFetch={time:new Date().getTime(),groups:a,groupIds:r},{groupIds:r,groups:a}):{groups:i._pmLastGroupFetch.groups,groupIds:i._pmLastGroupFetch.groupIds}},createGeodesicPolygon:es,getTranslation:fe,findDeepCoordIndex(i,r,a=!0){let u,d=_=>(b,C)=>{let P=_.concat(C);if(a){if(b.lat&&b.lat===r.lat&&b.lng===r.lng)return u=P,!0}else if(b.lat&&L.latLng(b).equals(r))return u=P,!0;return Array.isArray(b)&&b.some(d(P))};i.some(d([]));let g={};return u&&(g={indexPath:u,index:u[u.length-1],parentPath:u.slice(0,u.length-1)}),g},findDeepMarkerIndex(i,r){let a,u=g=>(_,b)=>{let C=g.concat(b);return _._leaflet_id===r._leaflet_id?(a=C,!0):Array.isArray(_)&&_.some(u(C))};i.some(u([]));let d={};return a&&(d={indexPath:a,index:a[a.length-1],parentPath:a.slice(0,a.length-1)}),d},_getIndexFromSegment(i,r){if(r&&r.length===2){let a=this.findDeepCoordIndex(i,r[0]),u=this.findDeepCoordIndex(i,r[1]),d=Math.max(a.index,u.index);return(a.index===0||u.index===0)&&d!==1&&(d+=1),{indexA:a,indexB:u,newIndex:d,indexPath:a.indexPath,parentPath:a.parentPath}}return null},_getRotatedRectangle(i,r,a,u){let d=xs(u,i),g=xs(u,r),_=a*Math.PI/180,b=Math.cos(_),C=Math.sin(_),P=(g.x-d.x)*b+(g.y-d.y)*C,U=(g.y-d.y)*b-(g.x-d.x)*C,F=P*b+d.x,rt=P*C+d.y,at=-U*C+d.x,Et=U*b+d.y,Nt=za(u,d),Zt=za(u,{x:F,y:rt}),ke=za(u,g),z=za(u,{x:at,y:Et});return[Nt,Zt,ke,z]},pxRadiusToMeterRadius(i,r,a){let u=r.project(a),d=L.point(u.x+i,u.y);return r.distance(r.unproject(d),a)}},om=sm;L.PM=L.PM||{version:$s.version,Map:wa,Toolbar:to,Draw:si,Edit:hi,Utils:om,Matrix:rm,activeLang:"en",optIn:!1,initialize(i){this.addInitHooks(i)},setOptIn(i){this.optIn=!!i},addInitHooks(){function i(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(i);function r(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(r);function a(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(a);function u(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(u);function d(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(d);function g(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(g);function _(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(_);function b(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(b);function C(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(C)},reInitLayer(i){i instanceof L.LayerGroup&&i.eachLayer(r=>{this.reInitLayer(r)}),i.pm||L.PM.optIn&&i.options.pmIgnore!==!1||i.options.pmIgnore||(i instanceof L.Map?i.pm=new L.PM.Map(i):i instanceof L.Marker?i.options.textMarker?(i.pm=new L.PM.Edit.Text(i),i.pm._initTextMarker(),i.pm._createTextMarker(!1)):i.pm=new L.PM.Edit.Marker(i):i instanceof L.Circle?i.pm=new L.PM.Edit.Circle(i):i instanceof L.CircleMarker?i.pm=new L.PM.Edit.CircleMarker(i):i instanceof L.Rectangle?i.pm=new L.PM.Edit.Rectangle(i):i instanceof L.Polygon?i.pm=new L.PM.Edit.Polygon(i):i instanceof L.Polyline?i.pm=new L.PM.Edit.Line(i):i instanceof L.LayerGroup?i.pm=new L.PM.Edit.LayerGroup(i):i instanceof L.ImageOverlay&&(i.pm=new L.PM.Edit.ImageOverlay(i)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(i){let r=this._map.mouseEventToLayerPoint(i),a,u;for(let d=this._drawFirst;d;d=d.next)a=d.layer,a.options.interactive&&a._containsPoint(r)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(a))&&(u=a);u&&(L.DomEvent.fakeStop(i),this._fireEvent([u],i))}}),L.PM.initialize()})();function d1(){const t=Xt(null),n=Xt(null),o=E=>`${(E*100).toFixed(1)}%`,l=E=>`${E.toFixed(1)}°`,c=E=>{if("getLatLngs"in E){const N=E.getLatLngs(),I=Sp([N[0].map(G=>[G.lng,G.lat])]);return Dp(I)}return 0},f=E=>{if("getLatLngs"in E){const N=E.getLatLngs();if(Array.isArray(N)){const I=Ho(N.map(G=>[G.lng,G.lat]));return gl(I,{units:"meters"})}}return 0},p=E=>{if("getLatLngs"in E){const N=E.getLatLngs(),I=Ho([...N[0].map(G=>[G.lng,G.lat]),[N[0][0].lng,N[0][0].lat]]);return gl(I,{units:"meters"})}return 0},v=E=>E._mRadius?E._mRadius:0,y=(E,N)=>{const I={type:N,style:E.options};switch(N){case"Circle":case"Semicircle":I.radius=v(E),I.area=Math.PI*Math.pow(I.radius,2),I.center=E.getLatLng(),N==="Semicircle"&&(I.area/=2,I.startAngle=E.options.startAngle,I.stopAngle=E.options.stopAngle);break;case"Rectangle":case"Polygon":I.area=c(E),I.perimeter=p(E);break;case"Line":case"Polyline":if(I.length=f(E),E.elevation){const G=E.elevation.gain,K=I.length;I.slope=G/K}break}return I},M=E=>{t.value=E,E?n.value=y(E.layer,E.type):n.value=null},w=Ie(()=>{if(!n.value)return null;const E={...n.value};return E.area&&(E.areaFormatted=`${(E.area/1e4).toFixed(2)} ha`),E.length&&(E.lengthFormatted=`${E.length.toFixed(1)} m`),E.perimeter&&(E.perimeterFormatted=`${E.perimeter.toFixed(1)} m`),E.radius&&(E.radiusFormatted=`${E.radius.toFixed(1)} m`),E.slope&&(E.slopeFormatted=o(E.slope)),E.startAngle&&(E.startAngleFormatted=l(E.startAngle)),E.stopAngle&&(E.stopAngleFormatted=l(E.stopAngle)),E});return{selectedShape:t,shapeProperties:n,formattedProperties:w,updateSelectedShape:M,calculateProperties:y}}const Cd=100;function f1(){const t=Xt(!1),n=Xt(null),o=f=>{if(f.length<=Cd)return f;const p=Math.ceil(f.length/Cd);return f.filter((v,y)=>y%p===0)},l=async(f,p=!0)=>{t.value=!0,n.value=null;try{const v=p?o(f):f;console.log("Points à envoyer:",v);const y={points:v.map(w=>({latitude:w.lat,longitude:w.lng}))};return console.log("Payload complet:",y),(await We.post("/elevation/",y)).data.results.map(w=>({lat:w.latitude,lng:w.longitude,elevation:w.elevation}))}catch(v){throw console.error("Erreur lors de la récupération des données d'élévation:",v),n.value="Le service d'élévation est temporairement indisponible. Réessayez plus tard.",v}finally{t.value=!1}};return{loading:t,error:n,fetchElevation:l,calculateElevationProfile:async f=>{const p=await l(f);let v=1/0,y=-1/0,M=0,w=0;p.forEach((X,ut)=>{const ft=X.elevation||0;if(v=Math.min(v,ft),y=Math.max(y,ft),ut>0){const ht=p[ut-1].elevation||0,yt=ft-ht;yt>0?M+=yt:w+=Math.abs(yt)}});const E=p[0],I=(p[p.length-1].elevation||0)-(E.elevation||0),G=f.length,K=G>0?I/G:0;return{profile:p,stats:{minElevation:v,maxElevation:y,totalAscent:M,totalDescent:w,averageSlope:K}}}}}class qo extends je.Polygon{constructor(o,l,c,f=0,p=180,v=64){const y=qo.calculateArcPoints(o,l,c,f,p,v);super([y]);Jt(this,"center");Jt(this,"radius");Jt(this,"startAngle");Jt(this,"stopAngle");Jt(this,"numPoints");Jt(this,"map");this.map=o,this.center=l,this.radius=c,this.startAngle=f,this.stopAngle=p,this.numPoints=v}static calculateArcPoints(o,l,c,f,p,v){const y=[],M=p-f;y.push(l);const w=o.latLngToLayerPoint(l);for(let E=0;E<=v;E++){const I=(f+M*E/v)*Math.PI/180,G=w.x+c*Math.cos(I),K=w.y+c*Math.sin(I),X=o.layerPointToLatLng(new je.Point(G,K));y.push(X)}return y.push(l),y}setRadius(o){return this.radius=o,this.updateGeometry(),this}setAngles(o,l){return this.startAngle=(o%360+360)%360,this.stopAngle=(l%360+360)%360,this.stopAngle<=this.startAngle&&(this.stopAngle+=360),this.updateGeometry(),this}setOpeningAngle(o){const l=Math.max(0,Math.min(360,o));return this.stopAngle=this.startAngle+l,this.updateGeometry(),this}setCenter(o){return this.center=o,this.updateGeometry(),this}getCenter(){return this.center}getRadius(){return this.radius}getStartAngle(){return this.startAngle}getStopAngle(){return this.stopAngle}getOpeningAngle(){return(this.stopAngle-this.startAngle+360)%360}updateGeometry(){if(!this.map)return;const o=qo.calculateArcPoints(this.map,this.center,this.radius,this.startAngle,this.stopAngle,this.numPoints);this.setLatLngs([o])}}const kd=(t,n)=>{if(!t||typeof t!="string"||!t.startsWith("#"))return`rgba(0, 0, 0, ${n})`;const o=parseInt(t.slice(1,3),16),l=parseInt(t.slice(3,5),16),c=parseInt(t.slice(5,7),16);return`rgba(${o}, ${l}, ${c}, ${n})`},Za=(t,n)=>{n&&(n.fontSize&&(t.style.fontSize=n.fontSize),n.color&&(t.style.color=n.color),n.backgroundColor&&(t.style.backgroundColor=kd(n.backgroundColor,n.backgroundOpacity??1)),n.padding&&(t.style.padding=n.padding),n.borderRadius&&(t.style.borderRadius=n.borderRadius),n.hasBorder?t.style.border=`${n.borderWidth||"1px"} solid ${kd(n.borderColor,n.borderOpacity??1)}`:t.style.border="none")},Yu={fontSize:"14px",color:"#000000",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderWidth:"1px",borderOpacity:1,padding:"5px 10px",borderRadius:"3px",hasBorder:!0};function xo(t,n,o){const l=156543.03392*Math.cos(n*Math.PI/180)/Math.pow(2,o);return t/l}function p1(){const t=Xt(null),n=Xt(null),o=Xt(""),l=Xt(null),c=Xt(!1),{calculateProperties:f}=d1(),{fetchElevation:p}=f1(),v=(I,G=2)=>{var ht;if(!t.value){console.warn("Map is not available for text size update");return}const K=t.value.getZoom(),X=I.getLatLng().lat,ut=xo(G,X,K),ft=(ht=I.getElement())==null?void 0:ht.querySelector(".text-annotation");ft&&(I.properties.style.fontSize=`${ut}px`,I.properties.physicalWidth=G,I.properties.physicalHeight=G,Za(ft,I.properties.style))},y=(I,G,K)=>{const X=je.map(I).setView(G,K);t.value=X,je.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors"}).addTo(X);const ut=new je.FeatureGroup;return ut.addTo(X),n.value=ut,X.pm.addControls({position:"topleft",drawMarker:!1,drawPolyline:!1,drawRectangle:!1,drawPolygon:!1,drawCircle:!1,drawCircleMarker:!1,drawText:!1,editMode:!1,dragMode:!1,cutPolygon:!1,removalMode:!1}),X.on("pm:drawstart",()=>{c.value=!0}),X.on("pm:drawend",()=>{c.value=!1}),X.on("pm:create",async ft=>{var dt;const ht=ft.layer;(dt=n.value)==null||dt.addLayer(ht),ht.properties={style:{fillColor:"#3B82F6",fillOpacity:.2,color:"#2563EB",weight:2}};const yt=f(ht,t.value);ht.properties={...ht.properties,...yt};try{const Mt=N(ht),qt=await p(Mt);ht.properties.elevation=qt}catch(Mt){console.error("Erreur lors de la récupération des données d'élévation:",Mt)}l.value=ht}),X.on("click",ft=>{ft.target===X&&(l.value=null)}),n.value.on("click",ft=>{je.DomEvent.stopPropagation(ft);const ht=ft.layer;l.value=ht}),X.on("pm:edit",ft=>{const ht=ft.layer;if(ht){const yt=f(ht,t.value);ht.properties={...ht.properties,...yt},ht===l.value&&(l.value=ht)}}),X},M=I=>{if(t.value)switch(t.value.pm.disableDraw(),t.value.pm.disableGlobalEditMode(),t.value.pm.disableGlobalDragMode(),t.value.pm.disableGlobalRemovalMode(),o.value=I,I){case"Circle":t.value.pm.enableDraw("Circle");break;case"Semicircle":let G=null,K=0,X=null,ut=0,ft=180;t.value.pm.disableDraw();const ht=je.DomUtil.create("div","drawing-help-message");ht.innerHTML="Cliquez pour placer le centre du demi-cercle",document.body.appendChild(ht);const yt=qt=>{if(!t.value)return;G=qt.latlng,X=new qo(t.value,G,0,0,180),X.addTo(t.value),ht.innerHTML="Déplacez la souris pour définir le rayon, cliquez pour valider";const Ut=Pt=>{G&&X&&(K=G.distanceTo(Pt.latlng),X.setRadius(K))},Vt=Pt=>{if(!t.value)return;ht.innerHTML="Déplacez la souris pour orienter le demi-cercle, cliquez pour valider",t.value.off("mousemove",Ut),t.value.off("click",Vt);const St=ce=>{G&&X&&(ut=Math.atan2(ce.latlng.lat-G.lat,ce.latlng.lng-G.lng)*(180/Math.PI),X.setAngles(ut,ut+ft))},Qt=ce=>{if(!t.value)return;ht.innerHTML="Déplacez la souris pour ajuster l'angle d'ouverture, cliquez pour terminer",t.value.off("mousemove",St),t.value.off("click",Qt);const Wt=ce.latlng,ot=bt=>{if(G&&X){const pt=Math.atan2(Wt.lat-G.lat,Wt.lng-G.lng)*(180/Math.PI),re=Math.atan2(bt.latlng.lat-G.lat,bt.latlng.lng-G.lng)*(180/Math.PI);ft=Math.abs(re-pt),ft>360&&(ft=360),X.setAngles(ut,ut+ft)}},$=()=>{var bt;!t.value||!X||(t.value.off("mousemove",ot),t.value.off("click",$),(bt=document.querySelector(".drawing-help-message"))==null||bt.remove(),X.properties={type:"Semicircle",radius:K,orientation:ut,openingAngle:ft,style:{fillColor:"#3B82F6",fillOpacity:.2,color:"#2563EB",weight:2,startAngle:ut,stopAngle:ut+ft}},t.value.fire("pm:create",{layer:X,shape:"Semicircle",workingLayer:X}))};t.value.on("mousemove",ot),t.value.once("click",$)};t.value.on("mousemove",St),t.value.once("click",Qt)};t.value.on("mousemove",Ut),t.value.once("click",Vt)};t.value.once("click",yt);break;case"Rectangle":t.value.pm.enableDraw("Rectangle");break;case"Polygon":t.value.pm.enableDraw("Polygon");break;case"Line":t.value.pm.enableDraw("Line");break;case"Text":t.value.pm.disableDraw(),t.value.dragging.disable();const dt=je.DomUtil.create("div","drawing-help-message");dt.innerHTML="Cliquez pour placer le texte, redimensionnez ensuite",document.body.appendChild(dt);const Mt=qt=>{var se;if(!t.value||!n.value)return;const Ut=qt.latlng,Vt=t.value.getZoom(),Pt=5,St=2,Qt=xo(Pt,Ut.lat,Vt),ce=xo(St,Ut.lat,Vt),Wt=St/2/6378137*(180/Math.PI),ot=Pt/2/6378137*(180/Math.PI)/Math.cos(Ut.lat*Math.PI/180),$=je.latLngBounds([Ut.lat-Wt,Ut.lng-ot],[Ut.lat+Wt,Ut.lng+ot]),bt=je.rectangle($,{color:Yu.borderColor,weight:parseInt(Yu.borderWidth),fillOpacity:0,pmIgnore:!1}),pt=je.divIcon({html:`
              <div class="text-annotation" 
                   contenteditable="true"
                   style="width: ${Qt}px; height: ${ce}px; font-size: ${ce*.6}px;">
                Nouveau texte
              </div>`,className:"text-container",iconSize:[Qt,ce],iconAnchor:[Qt/2,ce/2]}),re=je.marker(Ut,{icon:pt,draggable:!1,pmIgnore:!0});bt.properties={type:"text",text:"Nouveau texte",style:{...Yu,fontSize:`${ce*.6}px`},physicalWidth:Pt,physicalHeight:St,_textLayer:re},re.properties=bt.properties;const At=()=>{var Rt;if(!t.value)return;const ue=bt.getBounds().getCenter(),pe=t.value.getZoom(),he=xo(bt.properties.physicalWidth,ue.lat,pe),$t=xo(bt.properties.physicalHeight,ue.lat,pe);re.setLatLng(ue);const mt=je.divIcon({html:`
                <div class="text-annotation" 
                     contenteditable="true"
                     style="width: ${he}px; height: ${$t}px; font-size: ${$t*.6}px;">
                  ${bt.properties.text}
                </div>`,className:"text-container",iconSize:[he,$t],iconAnchor:[he/2,$t/2]});re.setIcon(mt),bt.properties.style.fontSize=`${$t*.6}px`,Za((Rt=re.getElement())==null?void 0:Rt.querySelector(".text-annotation"),bt.properties.style)};bt.on("pm:edit",()=>{const xt=bt.getBounds(),ue=xt.getSouthWest(),pe=xt.getNorthEast();bt.properties.physicalWidth=Zo([ue.lng,ue.lat],[pe.lng,ue.lat],{units:"meters"}),bt.properties.physicalHeight=Zo([ue.lng,ue.lat],[ue.lng,pe.lat],{units:"meters"}),At(),bt===l.value&&(l.value=bt)}),bt.on("add",()=>{var ue,pe,he;(ue=n.value)==null||ue.addLayer(re),(pe=t.value)==null||pe.on("zoomend",At),bt.on("dragend",At);const xt=(he=re.getElement())==null?void 0:he.querySelector(".text-annotation");xt&&(Za(xt,bt.properties.style),xt.addEventListener("blur",()=>{var $t;bt.properties.text=xt.textContent||"Nouveau texte",($t=t.value)==null||$t.fire("pm:edit",{layer:bt})}),xt.addEventListener("dblclick",$t=>{$t.stopPropagation(),xt.focus(),xt.classList.add("editing")}),xt.addEventListener("blur",()=>xt.classList.remove("editing")),xt.addEventListener("mousedown",$t=>$t.stopPropagation()),xt.addEventListener("click",$t=>{var mt;$t.stopPropagation(),l.value=bt,(mt=t.value)==null||mt.fire("pm:select",{layer:bt})}))}),bt.on("remove",()=>{var xt,ue;(xt=n.value)==null||xt.removeLayer(re),(ue=t.value)==null||ue.off("zoomend",At)}),n.value.addLayer(bt),t.value.fire("pm:create",{layer:bt,shape:"Text",workingLayer:bt}),t.value.dragging.enable(),(se=document.querySelector(".drawing-help-message"))==null||se.remove(),t.value.off("click",Mt)};t.value.once("click",Mt);break;case"edit":t.value.pm.enableGlobalEditMode();break;case"drag":t.value.pm.enableGlobalDragMode();break;case"delete":t.value.pm.enableGlobalRemovalMode();break}},w=I=>{var K;if(!l.value)return;const G=l.value;if(G.properties=G.properties||{},G.properties.style=G.properties.style||{},G.properties.style={...G.properties.style,...I},G.properties.type==="text"){const X=G.properties._textLayer,ut=(K=X==null?void 0:X.getElement())==null?void 0:K.querySelector(".text-annotation");ut&&Za(ut,G.properties.style);const ft={color:I.borderColor||G.properties.style.borderColor,weight:parseInt(I.borderWidth||G.properties.style.borderWidth),opacity:I.borderOpacity??G.properties.style.borderOpacity};"setStyle"in G&&G.setStyle(ft)}else{const X={};I.fillColor&&(X.fillColor=I.fillColor),I.fillOpacity!==void 0&&(X.fillOpacity=I.fillOpacity),I.strokeColor&&(X.color=I.strokeColor),I.strokeOpacity!==void 0&&(X.opacity=I.strokeOpacity),I.strokeWidth!==void 0&&(X.weight=I.strokeWidth),I.dashArray&&(X.dashArray=I.dashArray),"setStyle"in G&&G.setStyle(X)}},E=I=>{if(!l.value)return;const G=l.value;G.properties={...G.properties,...I},I.radius&&G instanceof je.Circle&&G.setRadius(I.radius)},N=I=>I instanceof je.Circle?[I.getLatLng()]:I instanceof je.Polygon?I.getLatLngs()[0]:I instanceof je.Polyline?I.getLatLngs():[];return El(()=>{t.value&&(t.value.remove(),t.value=null)}),{map:t,featureGroup:n,currentTool:o,selectedShape:l,isDrawing:c,initMap:y,setDrawingTool:M,updateShapeStyle:w,updateShapeProperties:E,updateTextFixedSize:v}}function m1(){const t=Xt(null),n=Xt("");return Ni.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors"}),Ni.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"© Esri"}),Ni.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{attribution:"© OpenTopoMap contributors"}),{map:t,searchQuery:n,initMap:c=>{t.value=c},searchLocation:async()=>{if(!(!t.value||!n.value))try{const f=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(n.value)}`)).json();if(f&&f.length>0){const{lat:p,lon:v}=f[0];t.value.setView([p,v],13)}}catch(c){console.error("Erreur lors de la recherche de localisation:",c)}}}}const Hh=zh("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[]}),getters:{getPlanById:t=>n=>t.plans.find(o=>o.id===n),hasUnsavedChanges:t=>t.unsavedChanges,getCurrentPlanHistory:t=>t.planHistory},actions:{async fetchPlans(){var n,o;const t=Tn();this.loading=!0;try{let l="/plans/";t.isDealer?l+="?concessionnaire="+((n=t.user)==null?void 0:n.id):t.isClient&&(l+="?utilisateur="+((o=t.user)==null?void 0:o.id));const c=await Te.get(l);this.plans=c.data}catch(l){throw this.error="Erreur lors du chargement des plans",l}finally{this.loading=!1}},async createPlan(t){this.loading=!0;try{const n=await Te.post("/plans/",t);return this.plans.push(n.data),n.data}catch(n){throw this.error="Erreur lors de la création du plan",n}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(t){var n,o;if(this.unsavedChanges){this.loading=!0;try{const l=await Te.patch(`/plans/${t}/`,{...this.currentPlan,version:((n=this.currentPlan)==null?void 0:n.version)||1}),c=this.plans.findIndex(f=>f.id===t);return c!==-1&&(this.plans[c]=l.data),((o=this.currentPlan)==null?void 0:o.id)===t&&(this.currentPlan=l.data),this.unsavedChanges=!1,l.data}catch(l){throw this.error="Erreur lors de la sauvegarde du plan",l}finally{this.loading=!1}}},async fetchPlanHistory(t){this.loading=!0;try{const n=await Te.get(`/plans/${t}/historique/`);return this.planHistory=n.data,n.data}catch(n){throw this.error="Erreur lors de la récupération de l'historique",n}finally{this.loading=!1}},async restorePlanVersion(t,n){var o;this.loading=!0;try{const l=await Te.post(`/plans/${t}/restaurer/`,{version_id:n});((o=this.currentPlan)==null?void 0:o.id)===t&&(this.currentPlan=l.data);const c=this.plans.findIndex(f=>f.id===t);return c!==-1&&(this.plans[c]=l.data),l.data}catch(l){throw this.error="Erreur lors de la restauration de la version",l}finally{this.loading=!1}},setCurrentPlan(t){this.currentPlan=t,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.stopAutoSave()},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(t){var n;this.loading=!0;try{await Te.delete(`/plans/${t}/`),this.plans=this.plans.filter(o=>o.id!==t),((n=this.currentPlan)==null?void 0:n.id)===t&&this.clearCurrentPlan()}catch(o){throw this.error="Erreur lors de la suppression du plan",o}finally{this.loading=!1}}}}),g1=zh("drawing",{state:()=>({currentPlanId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null}),getters:{hasUnsavedChanges:t=>t.unsavedChanges,getCurrentElements:t=>t.elements,getSelectedElement:t=>t.selectedElement,getCurrentTool:t=>t.currentTool,getCurrentStyle:t=>t.currentStyle,getLastUsedType:t=>t.lastUsedType},actions:{setCurrentPlan(t){this.currentPlanId=t,t===null&&this.clearElements()},clearCurrentPlan(){this.currentPlanId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1},addElement(t){!t.type_forme&&this.lastUsedType&&(t.type_forme=this.lastUsedType),this.elements.push(t),this.unsavedChanges=!0},updateElement(t){const n=this.elements.findIndex(o=>o.id===t.id);if(n!==-1){const o=this.elements[n].type_forme;this.elements[n]={...t,type_forme:o},this.unsavedChanges=!0}},removeElement(t){const n=this.elements.findIndex(o=>o.id===t);n!==-1&&(this.elements.splice(n,1),this.unsavedChanges=!0)},selectElement(t){this.selectedElement=t},setCurrentTool(t){this.currentTool=t,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(t)&&(this.lastUsedType=t)},setCurrentStyle(t){this.currentStyle={...this.currentStyle,...t}},async loadPlanElements(t){var n;this.loading=!0;try{const l=(await Te.get(`/plans/${t}/`)).data;this.elements=l.formes.map(c=>({...c,type_forme:c.type_forme})),this.currentPlanId=t,this.unsavedChanges=!1,l.preferences&&(l.preferences.currentTool&&this.setCurrentTool(l.preferences.currentTool),l.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...l.preferences.currentStyle}),l.preferences.lastUsedType&&(this.lastUsedType=l.preferences.lastUsedType)),(n=this.selectedElement)!=null&&n.type_forme&&this.setCurrentTool(this.selectedElement.type_forme)}catch(o){throw console.error("Erreur lors du chargement des éléments:",o),this.error="Erreur lors du chargement des éléments du plan",o}finally{this.loading=!1}},async saveToPlan(t){Hh(),this.loading=!0;try{const n=t||this.currentPlanId;if(!n)throw new Error("Aucun plan sélectionné pour la sauvegarde");const o=this.elements.map(c=>({...c,type_forme:c.type_forme||this.lastUsedType})),l=await Te.post(`/plans/${n}/save_with_elements/`,{formes:o,connexions:[],annotations:[],preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}});return this.elements=l.data.formes.map(c=>({...c,type_forme:c.type_forme})),this.unsavedChanges=!1,l.data}catch(n){throw console.error("Erreur lors de la sauvegarde:",n),this.error="Erreur lors de la sauvegarde du plan",n}finally{this.loading=!1}}}}),_1={class:"h-full flex overflow-hidden"},y1={class:"flex-1 relative overflow-hidden"},v1={class:"absolute bottom-6 left-6 z-[1000]"},b1={class:"bg-white rounded-lg shadow-lg p-3 space-y-2"},x1={class:"flex items-center justify-between mb-2"},w1={key:0,class:"text-sm text-gray-500"},L1={class:"grid grid-cols-1 gap-2"},C1=["disabled"],k1={key:0,class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},E1={key:1,class:"animate-spin h-5 w-5 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},M1={key:0,class:"text-xs text-gray-500 mt-2"},P1={key:0,class:"fixed bottom-6 right-6 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg shadow-lg z-[2000] flex items-center transform transition-all duration-300 ease-in-out",role:"alert"},B1={class:"drawing-tools-container absolute top-4 right-4 z-[1000]"},S1={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},A1={class:"bg-white rounded-lg p-6 max-w-md w-full mx-4"},T1={class:"flex justify-between items-center mb-4"},D1={class:"flex justify-end space-x-3"},R1={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},O1={class:"bg-white rounded-lg p-6 max-w-md w-full mx-4"},I1={class:"flex justify-between items-center mb-4"},F1={class:"max-h-96 overflow-y-auto"},N1={key:0,class:"text-center py-8"},z1={key:1,class:"space-y-2"},j1=["onClick"],U1={class:"font-medium text-gray-900"},$1={class:"text-sm text-gray-500"},G1={class:"text-xs text-gray-400 mt-1"},Ed=Wi({__name:"MapView",setup(t){const n=Xt(null),o=Hh(),l=g1(),c=Xt([]),f=Xt(null),p=Xt({});Xt({mousedown:null,mousemove:null,mouseup:null});const{currentTool:v,selectedShape:y,map:M,initMap:w,setDrawingTool:E,updateShapeStyle:N,updateShapeProperties:I,featureGroup:G}=p1(),{initMap:K}=m1();ea();const X=Xt(!1),ut=Xt(!1),ft=Xt(null),ht=Xt({nom:"",description:""}),yt=Xt(!1),dt=Xt(!1);function Mt(ot){const $=ot.getCenter(),bt=ot.getZoom(),pt={lat:$.lat,lng:$.lng,zoom:bt};document.cookie=`mapState=${JSON.stringify(pt)};max-age=2592000;path=/`}function qt(){const $=document.cookie.split(";").find(bt=>bt.trim().startsWith("mapState="));if($)try{return JSON.parse($.split("=")[1])}catch(bt){return console.error("Erreur lors de la lecture du cookie de position:",bt),null}return null}wr(async()=>{if(n.value){const ot=qt(),$=ot?[ot.lat,ot.lng]:[46.603354,1.888334],bt=(ot==null?void 0:ot.zoom)??6,pt=w(n.value,$,bt);pt.pm.setLang("fr"),pt.pm.addControls({rotateMode:!1}),Ni.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles © Esri — Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",maxZoom:19}).addTo(pt),pt&&(K(pt),pt.on("moveend",()=>{Mt(pt)}),window.addEventListener("map-set-location",re=>{if(pt&&re.detail){const{lat:At,lng:se,zoom:xt}=re.detail;pt.flyTo([At,se],xt,{duration:1.5,easeLinearity:.25})}})),await o.fetchPlans()}}),Jn(()=>l.hasUnsavedChanges,ot=>{ot&&ft.value&&o.markUnsavedChanges()}),hf(()=>{M.value&&M.value.off("moveend")}),Xt({rectangle:0,circle:0,semicircle:0,line:0}),Jn(()=>p.value,ot=>{Ut()},{deep:!0});function Ut(){console.log("Updating drawing style:",p.value)}async function Vt(){try{const ot=await o.createPlan(ht.value);ft.value=ot,o.setCurrentPlan(ot),l.setCurrentPlan(ot.id),X.value=!1,ht.value={nom:"",description:""}}catch(ot){console.error("Erreur lors de la création du plan:",ot)}}function Pt(){G.value&&G.value.clearLayers(),c.value=[],y.value=null,f.value=null}async function St(ot){try{Pt(),await l.loadPlanElements(ot);const $=o.getPlanById(ot);$&&(ft.value=$,o.setCurrentPlan($),l.setCurrentPlan($.id),l.getCurrentElements.forEach(bt=>{if(!G.value||!bt.data)return;let pt;const{style:re={},...At}=bt.data;switch(bt.type_forme){case"CERCLE":pt=Ni.circle([At.center[1],At.center[0]],{...re,radius:At.radius});break;case"RECTANGLE":pt=Ni.rectangle([[At.bounds.southWest[1],At.bounds.southWest[0]],[At.bounds.northEast[1],At.bounds.northEast[0]]],re);break;case"DEMI_CERCLE":pt=new qo([At.center[1],At.center[0]],At.radius,At.startAngle,At.endAngle,re);break;case"LIGNE":pt=Ni.polyline(At.points.map(xt=>[xt[1],xt[0]]),re);break;case"TEXTE":const se=Ni.divIcon({html:`<div class="text-annotation" style="font-size: ${re.fontSize||"14px"}">${At.content}</div>`,className:"text-container"});pt=Ni.marker([At.position[1],At.position[0]],{icon:se,...re});break}pt&&(pt.properties={type:bt.type_forme,style:re,...At},G.value.addLayer(pt),c.value.push({id:bt.id,type:bt.type_forme,layer:pt,properties:pt.properties}),At.rotation&&typeof pt.setRotation=="function"&&pt.setRotation(At.rotation))})),ut.value=!1}catch($){console.error("Erreur lors du chargement du plan:",$)}}async function Qt(){if(!ft.value||!G.value){console.warn("Aucun plan actif ou groupe de formes à sauvegarder");return}yt.value=!0;try{const ot=[];G.value.eachLayer($=>{var At,se,xt,ue,pe,he,$t,mt;const bt={style:{color:((At=$.options)==null?void 0:At.color)||"#3388ff",fillColor:((se=$.options)==null?void 0:se.fillColor)||"#3388ff",fillOpacity:((xt=$.options)==null?void 0:xt.fillOpacity)||.2,weight:((ue=$.options)==null?void 0:ue.weight)||3,opacity:((pe=$.options)==null?void 0:pe.opacity)||1}};let pt,re;if($ instanceof Ni.Circle)pt="CERCLE",re={...bt,center:[$.getLatLng().lng,$.getLatLng().lat],radius:$.getRadius()};else if($ instanceof Ni.Rectangle){pt="RECTANGLE";const Rt=$.getBounds();re={...bt,bounds:{southWest:[Rt.getSouthWest().lng,Rt.getSouthWest().lat],northEast:[Rt.getNorthEast().lng,Rt.getNorthEast().lat]}}}else((he=$.properties)==null?void 0:he.type)==="Semicircle"?(pt="DEMI_CERCLE",re={...bt,center:[$.getLatLng().lng,$.getLatLng().lat],radius:$.getRadius(),startAngle:$.properties.style.startAngle||0,endAngle:$.properties.style.stopAngle||180}):$ instanceof Ni.Polyline&&!($ instanceof Ni.Polygon)?(pt="LIGNE",re={...bt,points:$.getLatLngs().map(Rt=>[Rt.lng,Rt.lat])}):(($t=$.properties)==null?void 0:$t.type)==="text"&&(pt="TEXTE",re={...bt,position:[$.getLatLng().lng,$.getLatLng().lat],content:$.properties.text,style:{...$.properties.style,fontSize:$.properties.style.fontSize}});pt&&re&&ot.push({id:$.id,type_forme:pt,data:{...re,rotation:((mt=$.properties)==null?void 0:mt.rotation)||0}})}),l.elements=ot,await l.saveToPlan(ft.value.id),dt.value=!0,setTimeout(()=>{dt.value=!1},3e3)}catch(ot){console.error("Erreur lors de la sauvegarde du plan:",ot)}finally{yt.value=!1}}El(()=>{o.clearCurrentPlan(),l.clearCurrentPlan()});function ce(ot){I(ot)}function Wt(ot){try{const $=new Date(ot);return isNaN($.getTime())?(console.error("Date invalide reçue:",ot),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format($)}catch($){return console.error("Erreur lors du formatage de la date:",$),"Date invalide"}}return(ot,$)=>{var bt;return Ot(),Ft("div",_1,[B("div",y1,[B("div",{ref_key:"mapContainer",ref:n,class:"absolute inset-0 w-full h-full"},null,512),B("div",v1,[B("div",b1,[B("div",x1,[$[7]||($[7]=B("span",{class:"text-sm font-medium text-gray-600"},"Plans",-1)),ft.value?(Ot(),Ft("span",w1,Yt(ft.value.nom),1)):ve("",!0)]),B("div",L1,[B("button",{onClick:$[0]||($[0]=pt=>X.value=!0),class:"flex items-center px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},$[8]||($[8]=[B("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Ui(" Nouveau plan ")])),B("button",{onClick:$[1]||($[1]=pt=>ut.value=!0),class:"flex items-center px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},$[9]||($[9]=[B("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),Ui(" Charger un plan ")])),ft.value?(Ot(),Ft("button",{key:0,onClick:Qt,class:"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors duration-200",disabled:yt.value},[yt.value?(Ot(),Ft("svg",E1,$[11]||($[11]=[B("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),B("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Ot(),Ft("svg",k1,$[10]||($[10]=[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"},null,-1)]))),Ui(" "+Yt(yt.value?"Sauvegarde...":"Enregistrer"),1)],8,C1)):ve("",!0)]),(bt=ft.value)!=null&&bt.date_modification?(Ot(),Ft("div",M1," Dernière sauvegarde : "+Yt(Wt(ft.value.date_modification)),1)):ve("",!0)])]),dt.value?(Ot(),Ft("div",P1,$[12]||($[12]=[B("svg",{class:"w-5 h-5 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),B("span",{class:"font-medium"},"Plan sauvegardé avec succès",-1)]))):ve("",!0),B("div",B1,[oi(c1,{"current-tool":mi(v),"selected-shape":mi(y),onToolChange:mi(E),onStyleUpdate:mi(N),onPropertiesUpdate:ce},null,8,["current-tool","selected-shape","onToolChange","onStyleUpdate"])]),X.value?(Ot(),Ft("div",S1,[B("div",A1,[B("div",T1,[$[14]||($[14]=B("h2",{class:"text-xl font-semibold text-gray-900"},"Créer un nouveau plan",-1)),B("button",{onClick:$[2]||($[2]=pt=>X.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},$[13]||($[13]=[B("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),B("form",{onSubmit:Yo(Vt,["prevent"]),class:"space-y-4"},[B("div",null,[$[15]||($[15]=B("label",{for:"nom",class:"block text-sm font-medium text-gray-700"},"Nom du plan",-1)),we(B("input",{type:"text",id:"nom","onUpdate:modelValue":$[3]||($[3]=pt=>ht.value.nom=pt),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",required:"",placeholder:"Entrez le nom du plan"},null,512),[[Ae,ht.value.nom]])]),B("div",null,[$[16]||($[16]=B("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),we(B("textarea",{id:"description","onUpdate:modelValue":$[4]||($[4]=pt=>ht.value.description=pt),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:"Décrivez votre plan"},null,512),[[Ae,ht.value.description]])]),B("div",D1,[B("button",{type:"button",onClick:$[5]||($[5]=pt=>X.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"}," Annuler "),$[17]||($[17]=B("button",{type:"submit",class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md hover:bg-primary-700"}," Créer ",-1))])],32)])])):ve("",!0),ut.value?(Ot(),Ft("div",R1,[B("div",O1,[B("div",I1,[$[19]||($[19]=B("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),B("button",{onClick:$[6]||($[6]=pt=>ut.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},$[18]||($[18]=[B("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),B("div",F1,[mi(o).plans.length===0?(Ot(),Ft("div",N1,$[20]||($[20]=[B("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(Ot(),Ft("div",z1,[(Ot(!0),Ft(Ke,null,ji(mi(o).plans,pt=>(Ot(),Ft("button",{key:pt.id,onClick:re=>St(pt.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},[B("div",U1,Yt(pt.nom),1),B("div",$1,Yt(pt.description),1),B("div",G1," Modifié le "+Yt(new Date(pt.date_modification).toLocaleDateString()),1)],8,j1))),128))]))])])])):ve("",!0)])])}}}),V1={class:"fixed inset-0 z-50 overflow-y-auto"},H1={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},Z1={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},q1={class:"mt-3 text-center sm:mt-0 sm:text-left"},K1={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},W1={class:"mt-4"},J1={class:"grid grid-cols-2 gap-4"},X1=["disabled"],Y1={key:0,class:"mt-1 text-sm text-gray-500"},Q1={class:"grid grid-cols-2 gap-4"},tx={key:0},ex=["disabled"],ix=["value"],nx={key:1},rx=["disabled"],sx=["value"],ox={key:0},ax={class:"grid grid-cols-2 gap-4"},lx={key:1,class:"rounded-md bg-red-50 p-4"},ux={class:"flex"},hx={class:"ml-3"},cx={class:"text-sm font-medium text-red-800"},dx={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense"},fx=["disabled"],px={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},mx=Wi({__name:"UserFormModal",props:{user:{type:Object,default:null},dealers:{type:Array,default:()=>[]},isAdmin:{type:Boolean,required:!0},currentDealer:{type:String,default:""}},emits:["close","save"],setup(t,{emit:n}){var I,G,K,X,ut,ft,ht;const o=t,l=n,c=Tn(),f=Xt(!1),p=Xt(null),v=Ie(()=>{var yt;return o.isAdmin?o.user?o.user.id!==((yt=c.user)==null?void 0:yt.id):!0:!1}),y=Ie(()=>o.isAdmin?[{value:"ADMIN",label:"Administrateur"},{value:"CONCESSIONNAIRE",label:"Concessionnaire"},{value:"UTILISATEUR",label:"Utilisateur Final"}]:[{value:"UTILISATEUR",label:"Utilisateur Final"}]),M=Ie(()=>o.isAdmin?w.role==="UTILISATEUR":!0),w=Yn({first_name:((I=o.user)==null?void 0:I.first_name)||"",last_name:((G=o.user)==null?void 0:G.last_name)||"",email:((K=o.user)==null?void 0:K.email)||"",username:((X=o.user)==null?void 0:X.username)||"",company_name:((ut=o.user)==null?void 0:ut.company_name)||"",role:((ft=o.user)==null?void 0:ft.role)||(o.isAdmin?"":"UTILISATEUR"),dealer:((ht=o.user)==null?void 0:ht.concessionnaire)||o.currentDealer,password:"",password_confirm:""}),E=()=>{if(!w.first_name||!w.last_name)return p.value="Le prénom et le nom sont requis",!1;if(!w.email)return p.value="L'email est requis",!1;if(!w.username)return p.value="Le nom d'utilisateur est requis",!1;if(!o.user){if(!w.password)return p.value="Le mot de passe est requis",!1;if(w.password!==w.password_confirm)return p.value="Les mots de passe ne correspondent pas",!1}return w.role==="UTILISATEUR"&&!w.dealer?(p.value="Un concessionnaire doit être sélectionné pour un utilisateur final",!1):!0},N=async()=>{if(p.value=null,!!E()){f.value=!0;try{const yt={...w};o.isAdmin?yt.dealer&&(yt.concessionnaire=yt.dealer,delete yt.dealer):(yt.role="UTILISATEUR",yt.concessionnaire=o.currentDealer),o.user&&(delete yt.password,delete yt.password_confirm),await l("save",yt)}catch(yt){p.value="Une erreur est survenue lors de l'enregistrement",console.error("Erreur lors de la sauvegarde:",yt)}finally{f.value=!1}}};return(yt,dt)=>(Ot(),Ft("div",V1,[B("div",H1,[dt[24]||(dt[24]=B("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[B("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),dt[25]||(dt[25]=B("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),B("div",Z1,[B("div",null,[B("div",q1,[B("h3",K1,Yt(t.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),B("div",W1,[B("form",{onSubmit:Yo(N,["prevent"]),class:"space-y-4"},[B("div",J1,[B("div",null,[dt[10]||(dt[10]=B("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prénom",-1)),we(B("input",{type:"text",id:"first_name","onUpdate:modelValue":dt[0]||(dt[0]=Mt=>w.first_name=Mt),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Ae,w.first_name]])]),B("div",null,[dt[11]||(dt[11]=B("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),we(B("input",{type:"text",id:"last_name","onUpdate:modelValue":dt[1]||(dt[1]=Mt=>w.last_name=Mt),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Ae,w.last_name]])])]),B("div",null,[dt[12]||(dt[12]=B("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),we(B("input",{type:"email",id:"email","onUpdate:modelValue":dt[2]||(dt[2]=Mt=>w.email=Mt),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Ae,w.email]])]),B("div",null,[dt[13]||(dt[13]=B("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),we(B("input",{type:"text",id:"username","onUpdate:modelValue":dt[3]||(dt[3]=Mt=>w.username=Mt),required:"",disabled:!!o.user,class:vr(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",{"bg-gray-100":!!o.user}])},null,10,X1),[[Ae,w.username]]),o.user?(Ot(),Ft("p",Y1," Le nom d'utilisateur ne peut pas être modifié après la création. ")):ve("",!0)]),B("div",null,[dt[14]||(dt[14]=B("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Nom de l'entreprise",-1)),we(B("input",{type:"text",id:"company_name","onUpdate:modelValue":dt[4]||(dt[4]=Mt=>w.company_name=Mt),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Ae,w.company_name]])]),B("div",Q1,[o.isAdmin?(Ot(),Ft("div",tx,[dt[16]||(dt[16]=B("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Rôle",-1)),we(B("select",{id:"role","onUpdate:modelValue":dt[5]||(dt[5]=Mt=>w.role=Mt),required:"",disabled:!v.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[dt[15]||(dt[15]=B("option",{value:""},"Sélectionner un rôle",-1)),(Ot(!0),Ft(Ke,null,ji(y.value,Mt=>(Ot(),Ft("option",{key:Mt.value,value:Mt.value},Yt(Mt.label),9,ix))),128))],8,ex),[[jo,w.role]])])):ve("",!0),M.value?(Ot(),Ft("div",nx,[dt[18]||(dt[18]=B("label",{for:"dealer",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),we(B("select",{id:"dealer","onUpdate:modelValue":dt[6]||(dt[6]=Mt=>w.dealer=Mt),required:"",disabled:!o.isAdmin,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[dt[17]||(dt[17]=B("option",{value:""},"Sélectionner un concessionnaire",-1)),(Ot(!0),Ft(Ke,null,ji(t.dealers,Mt=>(Ot(),Ft("option",{key:Mt.id,value:Mt.id},Yt(Mt.company_name||`${Mt.first_name} ${Mt.last_name}`),9,sx))),128))],8,rx),[[jo,w.dealer]])])):ve("",!0)]),t.user?ve("",!0):(Ot(),Ft("div",ox,[B("div",ax,[B("div",null,[dt[19]||(dt[19]=B("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),we(B("input",{type:"password",id:"password","onUpdate:modelValue":dt[7]||(dt[7]=Mt=>w.password=Mt),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Ae,w.password]])]),B("div",null,[dt[20]||(dt[20]=B("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),we(B("input",{type:"password",id:"password_confirm","onUpdate:modelValue":dt[8]||(dt[8]=Mt=>w.password_confirm=Mt),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Ae,w.password_confirm]])])]),dt[21]||(dt[21]=B("p",{class:"mt-1 text-sm text-gray-500"}," L'utilisateur devra changer son mot de passe à sa première connexion. ",-1))])),p.value?(Ot(),Ft("div",lx,[B("div",ux,[dt[22]||(dt[22]=B("div",{class:"flex-shrink-0"},[B("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),B("div",hx,[B("h3",cx,Yt(p.value),1)])])])):ve("",!0),B("div",dx,[B("button",{type:"submit",disabled:f.value,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:col-start-2 sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},[f.value?(Ot(),Ft("svg",px,dt[23]||(dt[23]=[B("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),B("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):ve("",!0),Ui(" "+Yt(f.value?"Enregistrement...":"Enregistrer"),1)],8,fx),B("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:col-start-1 sm:text-sm",onClick:dt[9]||(dt[9]=Mt=>yt.$emit("close"))}," Annuler ")])],32)])])])])])]))}}),gx={class:"fixed inset-0 z-50 overflow-y-auto"},_x={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},yx={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},vx={class:"sm:flex sm:items-start"},bx={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},xx={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},wx={class:"mt-2"},Lx={class:"text-sm text-gray-500"},Cx={class:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},kx=Wi({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(t){return(n,o)=>(Ot(),Ft("div",gx,[B("div",_x,[o[3]||(o[3]=B("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[B("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),o[4]||(o[4]=B("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),B("div",yx,[B("div",vx,[o[2]||(o[2]=B("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[B("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),B("div",bx,[B("h3",xx,Yt(t.title),1),B("div",wx,[B("p",Lx,Yt(t.message),1)])])]),B("div",Cx,[B("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:o[0]||(o[0]=l=>n.$emit("confirm"))}," Confirmer "),B("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:w-auto sm:text-sm",onClick:o[1]||(o[1]=l=>n.$emit("cancel"))}," Annuler ")])])])]))}}),Ex={class:"min-h-screen bg-gray-50 py-8"},Mx={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Px={class:"flex justify-between items-center mb-8"},Bx={class:"text-3xl font-extrabold text-gray-900"},Sx={class:"bg-white shadow rounded-lg mb-6 p-4"},Ax={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Tx={key:0},Dx=["placeholder"],Rx={key:1},Ox=["value"],Ix={class:"bg-white shadow rounded-lg"},Fx={class:"overflow-x-auto"},Nx={class:"min-w-full divide-y divide-gray-200"},zx={class:"bg-gray-50"},jx={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Ux={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},$x={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Gx={class:"bg-white divide-y divide-gray-200"},Vx={class:"px-6 py-4 whitespace-nowrap"},Hx={class:"flex items-center"},Zx={class:"flex-shrink-0 h-10 w-10"},qx={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},Kx={class:"text-primary-600 font-medium"},Wx={class:"ml-4"},Jx={class:"text-sm font-medium text-gray-900"},Xx={class:"text-sm text-gray-500"},Yx={class:"px-6 py-4 whitespace-nowrap"},Qx={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},t3={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},e3={class:"px-6 py-4 whitespace-nowrap"},i3={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},n3=["onClick"],r3=["onClick"],s3=Wi({__name:"UserListView",setup(t){const n=Tn(),o=Xt([]),l=Xt([]),c=Xt(!1),f=Xt(!1),p=Xt(null),v=Xt(null),y=Yn({role:"",search:"",dealer:""}),M=Ie(()=>n.isAdmin),w=Ie(()=>n.isDealer),E=Ie(()=>{var St;console.log("Computing filtered users..."),console.log("Current users:",o.value),console.log("Is admin:",M.value),console.log("Is dealer:",w.value),console.log("Current filters:",y);let Pt=o.value;if(w.value&&(console.log("Filtering for dealer:",(St=n.user)==null?void 0:St.id),Pt=Pt.filter(Qt=>{var ce;return Qt.role==="CLIENT"&&Qt.dealer===((ce=n.user)==null?void 0:ce.id)}),console.log("Filtered users for dealer:",Pt)),M.value&&(y.role&&(Pt=Pt.filter(Qt=>Qt.role===y.role),console.log("Filtered by role:",Pt)),y.dealer&&(Pt=Pt.filter(Qt=>String(Qt.dealer)===String(y.dealer)),console.log("Filtered by dealer:",Pt))),y.search){const Qt=y.search.toLowerCase();Pt=Pt.filter(ce=>ce.username.toLowerCase().includes(Qt)||ce.email.toLowerCase().includes(Qt)||ce.first_name.toLowerCase().includes(Qt)||ce.last_name.toLowerCase().includes(Qt)||ce.company_name&&ce.company_name.toLowerCase().includes(Qt)),console.log("Filtered by search:",Pt)}return console.log("Final filtered users:",Pt),Pt});wr(async()=>{await N(),M.value&&await I()});async function N(){try{console.log("Fetching users...");const Pt=await Te.get("/users/");console.log("Users API response:",Pt.data),o.value=Pt.data,console.log("Users after assignment:",o.value)}catch(Pt){console.error("Erreur lors de la récupération des utilisateurs:",Pt)}}async function I(){try{const Pt=await Te.get("/users/",{params:{role:"CONCESSIONNAIRE"}});l.value=Pt.data}catch(Pt){console.error("Erreur lors de la récupération des concessionnaires:",Pt)}}function G(){p.value=null,c.value=!0}function K(Pt){p.value={...Pt},c.value=!0}function X(){c.value=!1,p.value=null}async function ut(Pt){var St;try{w.value&&!Pt.id&&(Pt.role="CLIENT",Pt.dealer=(St=n.user)==null?void 0:St.id),Pt.id?await Te.patch(`/users/${Pt.id}/`,Pt):await Te.post("/users/",Pt),await N(),X()}catch(Qt){throw console.error("Erreur lors de la sauvegarde de l'utilisateur:",Qt),Qt}}function ft(Pt){v.value=Pt,f.value=!0}async function ht(){if(v.value)try{await Te.delete(`/users/${v.value.id}/`),await N(),f.value=!1,v.value=null}catch(Pt){throw console.error("Erreur lors de la suppression de l'utilisateur:",Pt),Pt}}function yt(Pt,St){return`${(Pt==null?void 0:Pt.charAt(0))||""}${(St==null?void 0:St.charAt(0))||""}`.toUpperCase()}const dt={ADMIN:"Admin",CONCESSIONNAIRE:"Concessionnaire",UTILISATEUR:"Utilisateur",CLIENT:"Client"};function Mt(Pt){return dt[Pt]||Pt}function qt(Pt){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function Ut(Pt){return Pt?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}function Vt(Pt){var St;return M.value?!0:w.value?Pt.role==="CLIENT"&&Pt.dealer===((St=n.user)==null?void 0:St.id):!1}return(Pt,St)=>{var Qt,ce;return Ot(),Ft("div",Ex,[B("div",Mx,[B("div",Px,[B("h1",Bx,Yt(M.value?"Gestion des Utilisateurs":"Mes Clients"),1),B("button",{onClick:G,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[St[4]||(St[4]=B("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),Ui(" "+Yt(M.value?"Nouvel Utilisateur":"Nouveau Client"),1)])]),B("div",Sx,[B("div",Ax,[M.value?(Ot(),Ft("div",Tx,[St[6]||(St[6]=B("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rôle",-1)),we(B("select",{id:"role-filter","onUpdate:modelValue":St[0]||(St[0]=Wt=>y.role=Wt),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},St[5]||(St[5]=[B("option",{value:""},"Tous les rôles",-1),B("option",{value:"ADMIN"},"Admin",-1),B("option",{value:"CONCESSIONNAIRE"},"Concessionnaire",-1),B("option",{value:"CLIENT"},"Client",-1)]),512),[[jo,y.role]])])):ve("",!0),B("div",null,[St[7]||(St[7]=B("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),we(B("input",{type:"text",id:"search","onUpdate:modelValue":St[1]||(St[1]=Wt=>y.search=Wt),placeholder:M.value?"Nom, email...":"Rechercher un client...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,8,Dx),[[Ae,y.search]])]),M.value?(Ot(),Ft("div",Rx,[St[9]||(St[9]=B("label",{for:"dealer-filter",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),we(B("select",{id:"dealer-filter","onUpdate:modelValue":St[2]||(St[2]=Wt=>y.dealer=Wt),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[St[8]||(St[8]=B("option",{value:""},"Tous les concessionnaires",-1)),(Ot(!0),Ft(Ke,null,ji(l.value,Wt=>(Ot(),Ft("option",{key:Wt.id,value:Wt.id},Yt(Wt.company_name||Wt.full_name),9,Ox))),128))],512),[[jo,y.dealer]])])):ve("",!0)])]),B("div",Ix,[B("div",Fx,[B("table",Nx,[B("thead",zx,[B("tr",null,[B("th",jx,Yt(M.value?"Utilisateur":"Client"),1),M.value?(Ot(),Ft("th",Ux," Rôle ")):ve("",!0),St[10]||(St[10]=B("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),M.value?(Ot(),Ft("th",$x," Concessionnaire ")):ve("",!0),St[11]||(St[11]=B("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),St[12]||(St[12]=B("th",{scope:"col",class:"relative px-6 py-3"},[B("span",{class:"sr-only"},"Actions")],-1))])]),B("tbody",Gx,[(Ot(!0),Ft(Ke,null,ji(E.value,Wt=>(Ot(),Ft("tr",{key:Wt.id},[B("td",Vx,[B("div",Hx,[B("div",Zx,[B("div",qx,[B("span",Kx,Yt(yt(Wt.first_name,Wt.last_name)),1)])]),B("div",Wx,[B("div",Jx,Yt(Wt.company_name||`${Wt.first_name} ${Wt.last_name}`),1),B("div",Xx,Yt(Wt.username),1)])])]),B("td",Yx,[B("span",{class:vr(qt(Wt.role))},Yt(Mt(Wt.role)),3)]),B("td",Qx,Yt(Wt.email),1),B("td",t3,Yt(Wt.dealer_name||"-"),1),B("td",e3,[B("span",{class:vr(Ut(Wt.is_active))},Yt(Wt.is_active?"Actif":"Inactif"),3)]),B("td",i3,[B("button",{onClick:ot=>K(Wt),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,n3),Vt(Wt)?(Ot(),Ft("button",{key:0,onClick:ot=>ft(Wt),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,r3)):ve("",!0)])]))),128))])])])])]),c.value?(Ot(),No(mx,{key:0,user:p.value,dealers:l.value,"is-admin":M.value,"current-dealer":(ce=(Qt=mi(n).user)==null?void 0:Qt.id)==null?void 0:ce.toString(),onClose:X,onSave:ut},null,8,["user","dealers","is-admin","current-dealer"])):ve("",!0),f.value?(Ot(),No(kx,{key:1,title:"Supprimer l'utilisateur",message:"Êtes-vous sûr de vouloir supprimer cet utilisateur ? Cette action est irréversible.",onConfirm:ht,onCancel:St[3]||(St[3]=Wt=>f.value=!1)})):ve("",!0)])}}}),o3={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},a3={class:"mt-8 flex flex-col"},l3={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},u3={class:"inline-block min-w-full py-2 align-middle"},h3={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5"},c3={class:"min-w-full divide-y divide-gray-300"},d3={class:"divide-y divide-gray-200 bg-white"},f3={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},p3={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},m3={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},g3={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},_3={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},y3=["onClick"],v3=["onClick"],b3={key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center"},x3={class:"bg-white rounded-lg p-6 max-w-md w-full"},w3={class:"space-y-4"},L3={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},C3=Wi({__name:"PlansView",setup(t){const n=ea(),o=Hh(),l=Xt([]),c=Xt(!1),f=Xt({nom:"",description:""});wr(async()=>{await p()});async function p(){try{await o.fetchPlans(),l.value=o.plans}catch(N){console.error("Erreur lors du chargement des plans:",N)}}function v(){c.value=!0,f.value={nom:"",description:""}}async function y(){try{o.currentPlan&&o.hasUnsavedChanges&&(confirm("Voulez-vous sauvegarder les modifications du plan actuel avant d'en créer un nouveau ?")&&await o.savePlan(o.currentPlan.id),o.clearCurrentPlan());const N=await o.createPlan(f.value);c.value=!1,await p(),o.setCurrentPlan(N),n.push("/")}catch(N){console.error("Erreur lors de la création du plan:",N)}}async function M(N){o.setCurrentPlan(N),n.push("/")}async function w(N){if(confirm("Êtes-vous sûr de vouloir supprimer ce plan ?"))try{await o.deletePlan(N.id),await p()}catch(I){console.error("Erreur lors de la suppression du plan:",I)}}function E(N){return new Date(N).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}return(N,I)=>(Ot(),Ft("div",o3,[B("div",{class:"sm:flex sm:items-center"},[I[3]||(I[3]=B("div",{class:"sm:flex-auto"},[B("h1",{class:"text-2xl font-semibold text-gray-900"},"Mes Plans"),B("p",{class:"mt-2 text-sm text-gray-700"}," Liste de tous vos plans d'irrigation ")],-1)),B("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[B("button",{onClick:v,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),B("div",a3,[B("div",l3,[B("div",u3,[B("div",h3,[B("table",c3,[I[4]||(I[4]=B("thead",{class:"bg-gray-50"},[B("tr",null,[B("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"}," Nom "),B("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description "),B("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Date de création "),B("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Dernière modification "),B("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[B("span",{class:"sr-only"},"Actions")])])],-1)),B("tbody",d3,[(Ot(!0),Ft(Ke,null,ji(l.value,G=>(Ot(),Ft("tr",{key:G.id},[B("td",f3,Yt(G.nom),1),B("td",p3,Yt(G.description),1),B("td",m3,Yt(E(G.date_creation)),1),B("td",g3,Yt(E(G.date_modification)),1),B("td",_3,[B("button",{onClick:K=>M(G),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,y3),B("button",{onClick:K=>w(G),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,v3)])]))),128))])])])])])]),c.value?(Ot(),Ft("div",b3,[B("div",x3,[I[8]||(I[8]=B("h2",{class:"text-lg font-medium mb-4"},"Nouveau plan",-1)),B("form",{onSubmit:Yo(y,["prevent"])},[B("div",w3,[B("div",null,[I[5]||(I[5]=B("label",{for:"name",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),we(B("input",{type:"text",id:"name","onUpdate:modelValue":I[0]||(I[0]=G=>f.value.nom=G),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",required:""},null,512),[[Ae,f.value.nom]])]),B("div",null,[I[6]||(I[6]=B("label",{for:"description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),we(B("textarea",{id:"description","onUpdate:modelValue":I[1]||(I[1]=G=>f.value.description=G),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[Ae,f.value.description]])])]),B("div",L3,[B("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:I[2]||(I[2]=G=>c.value=!1)}," Annuler "),I[7]||(I[7]=B("button",{type:"submit",class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm"}," Créer ",-1))])],32)])])):ve("",!0)]))}}),k3={class:"container mx-auto px-4 py-8"},E3={class:"sm:flex sm:items-center"},M3={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},P3={class:"mt-8 flex flex-col"},B3={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},S3={class:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8"},A3={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},T3={class:"min-w-full divide-y divide-gray-300"},D3={class:"divide-y divide-gray-200 bg-white"},R3={key:0,class:"animate-pulse"},O3={key:1},I3={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},F3={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},N3={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},z3={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},j3={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},U3=["onClick"],$3=["onClick"],G3=Wi({__name:"ClientListView",setup(t){const n=Tn(),o=Xt([]),l=Xt(!0),c=Xt(!1);wr(async()=>{await f()});async function f(){var M;try{const w=await We.get("/api/users/",{params:{dealer:(M=n.user)==null?void 0:M.id,role:"client"}});o.value=w.data}catch(w){console.error("Error fetching clients:",w)}finally{l.value=!1}}function p(M){return new Date(M).toLocaleDateString()}function v(M){console.log("View client details:",M)}function y(M){console.log("Edit client:",M)}return(M,w)=>(Ot(),Ft("div",k3,[B("div",E3,[w[1]||(w[1]=B("div",{class:"sm:flex-auto"},[B("h1",{class:"text-2xl font-semibold text-gray-900"},"Clients"),B("p",{class:"mt-2 text-sm text-gray-700"}," Liste de vos clients et leurs plans associés ")],-1)),B("div",M3,[B("button",{onClick:w[0]||(w[0]=E=>c.value=!0),class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Ajouter un client ")])]),B("div",P3,[B("div",B3,[B("div",S3,[B("div",A3,[B("table",T3,[w[4]||(w[4]=B("thead",{class:"bg-gray-50"},[B("tr",null,[B("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," Nom "),B("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Email "),B("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Nombre de plans "),B("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Dernier plan "),B("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[B("span",{class:"sr-only"},"Actions")])])],-1)),B("tbody",D3,[l.value?(Ot(),Ft("tr",R3,w[2]||(w[2]=[B("td",{colspan:"5",class:"py-4 px-6"},[B("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):o.value.length===0?(Ot(),Ft("tr",O3,w[3]||(w[3]=[B("td",{colspan:"5",class:"py-4 px-6 text-center text-gray-500"}," Aucun client trouvé ",-1)]))):ve("",!0),(Ot(!0),Ft(Ke,null,ji(o.value,E=>(Ot(),Ft("tr",{key:E.id,class:"hover:bg-gray-50"},[B("td",I3,Yt(E.first_name)+" "+Yt(E.last_name),1),B("td",F3,Yt(E.email),1),B("td",N3,Yt(E.plans_count),1),B("td",z3,Yt(E.last_plan_date?p(E.last_plan_date):"-"),1),B("td",j3,[B("button",{onClick:N=>v(E),class:"text-primary-600 hover:text-primary-900 mr-4"}," Voir les détails ",8,U3),B("button",{onClick:N=>y(E),class:"text-primary-600 hover:text-primary-900"}," Modifier ",8,$3)])]))),128))])])])])])])]))}}),Op=gv({history:qy("/"),routes:[{path:"/",name:"home",component:Ed,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/plans",name:"plans",component:C3,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/users",name:"users",component:s3,meta:{requiresAuth:!0,allowedRoles:["admin"]}},{path:"/clients",name:"clients",component:G3,meta:{requiresAuth:!0,allowedRoles:["dealer"]}},{path:"/profile",name:"profile",component:()=>Va(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/login",name:"login",component:xb,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>Va(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>Va(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:ob,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/map",name:"map",component:Ed,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>Va(()=>import("./NotFoundView.js"),[])}]});Op.beforeEach(async(t,n,o)=>{var v,y;const l=Tn();if(console.log("Route:",t.path,"Auth state:",{initialized:l.initialized,isAuthenticated:l.isAuthenticated,user:l.user}),!l.initialized)try{await l.initialize(window.INITIAL_STATE)}catch(M){console.error("Error initializing auth store:",M)}const c=l.isAuthenticated,f=(v=l.user)==null?void 0:v.must_change_password,p=(y=l.user)==null?void 0:y.user_type;if(t.meta.requiresAuth&&!c){o("/login");return}if(c&&f&&t.name!=="changePassword"){o({name:"changePassword"});return}if(t.name==="changePassword"&&!f){o({name:"home"});return}if(t.meta.allowedRoles&&p&&!t.meta.allowedRoles.includes(p)){o({name:"home"});return}if(t.meta.requiresGuest&&c){o({name:"home"});return}o()});const Zh=Sg(N4),Ip=Dg();Zh.use(Ip);Zh.use(Op);const V3=Tn(Ip);window.INITIAL_STATE&&V3.initialize(window.INITIAL_STATE);Zh.mount("#app");export{Yn as a,B as b,Ft as c,Wi as d,ve as e,we as f,Ot as g,Z3 as h,Ui as i,oi as j,Mo as k,f0 as l,cw as m,vr as n,wr as o,ea as p,Xt as r,Yt as t,Tn as u,Ae as v,Yo as w};
