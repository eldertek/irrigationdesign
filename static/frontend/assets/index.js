var _m=Object.defineProperty;var ym=(t,n,s)=>n in t?_m(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s;var ue=(t,n,s)=>ym(t,typeof n!="symbol"?n+"":n,s);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))l(h);new MutationObserver(h=>{for(const p of h)if(p.type==="childList")for(const f of p.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function s(h){const p={};return h.integrity&&(p.integrity=h.integrity),h.referrerPolicy&&(p.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?p.credentials="include":h.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function l(h){if(h.ep)return;h.ep=!0;const p=s(h);fetch(h.href,p)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Pc(t){const n=Object.create(null);for(const s of t.split(","))n[s]=1;return s=>s in n}const Ge={},Ts=[],On=()=>{},vm=()=>!1,xl=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Sc=t=>t.startsWith("onUpdate:"),Si=Object.assign,Bc=(t,n)=>{const s=t.indexOf(n);s>-1&&t.splice(s,1)},bm=Object.prototype.hasOwnProperty,ze=(t,n)=>bm.call(t,n),pe=Array.isArray,Ds=t=>Qo(t)==="[object Map]",Us=t=>Qo(t)==="[object Set]",lh=t=>Qo(t)==="[object Date]",xe=t=>typeof t=="function",oi=t=>typeof t=="string",In=t=>typeof t=="symbol",Ze=t=>t!==null&&typeof t=="object",Dd=t=>(Ze(t)||xe(t))&&xe(t.then)&&xe(t.catch),Rd=Object.prototype.toString,Qo=t=>Rd.call(t),xm=t=>Qo(t).slice(8,-1),Od=t=>Qo(t)==="[object Object]",Ac=t=>oi(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ro=Pc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),wl=t=>{const n=Object.create(null);return s=>n[s]||(n[s]=t(s))},wm=/-(\w)/g,fn=wl(t=>t.replace(wm,(n,s)=>s?s.toUpperCase():"")),Lm=/\B([A-Z])/g,Yr=wl(t=>t.replace(Lm,"-$1").toLowerCase()),Ll=wl(t=>t.charAt(0).toUpperCase()+t.slice(1)),Iu=wl(t=>t?`on${Ll(t)}`:""),br=(t,n)=>!Object.is(t,n),Wa=(t,...n)=>{for(let s=0;s<t.length;s++)t[s](...n)},Id=(t,n,s,l=!1)=>{Object.defineProperty(t,n,{configurable:!0,enumerable:!1,writable:l,value:s})},sl=t=>{const n=parseFloat(t);return isNaN(n)?t:n};let uh;const Cl=()=>uh||(uh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function El(t){if(pe(t)){const n={};for(let s=0;s<t.length;s++){const l=t[s],h=oi(l)?Mm(l):El(l);if(h)for(const p in h)n[p]=h[p]}return n}else if(oi(t)||Ze(t))return t}const Cm=/;(?![^(]*\))/g,Em=/:([^]+)/,km=/\/\*[^]*?\*\//g;function Mm(t){const n={};return t.replace(km,"").split(Cm).forEach(s=>{if(s){const l=s.split(Em);l.length>1&&(n[l[0].trim()]=l[1].trim())}}),n}function un(t){let n="";if(oi(t))n=t;else if(pe(t))for(let s=0;s<t.length;s++){const l=un(t[s]);l&&(n+=l+" ")}else if(Ze(t))for(const s in t)t[s]&&(n+=s+" ");return n.trim()}const Pm="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Sm=Pc(Pm);function Fd(t){return!!t||t===""}function Bm(t,n){if(t.length!==n.length)return!1;let s=!0;for(let l=0;s&&l<t.length;l++)s=qr(t[l],n[l]);return s}function qr(t,n){if(t===n)return!0;let s=lh(t),l=lh(n);if(s||l)return s&&l?t.getTime()===n.getTime():!1;if(s=In(t),l=In(n),s||l)return t===n;if(s=pe(t),l=pe(n),s||l)return s&&l?Bm(t,n):!1;if(s=Ze(t),l=Ze(n),s||l){if(!s||!l)return!1;const h=Object.keys(t).length,p=Object.keys(n).length;if(h!==p)return!1;for(const f in t){const v=t.hasOwnProperty(f),y=n.hasOwnProperty(f);if(v&&!y||!v&&y||!qr(t[f],n[f]))return!1}}return String(t)===String(n)}function Tc(t,n){return t.findIndex(s=>qr(s,n))}const zd=t=>!!(t&&t.__v_isRef===!0),qt=t=>oi(t)?t:t==null?"":pe(t)||Ze(t)&&(t.toString===Rd||!xe(t.toString))?zd(t)?qt(t.value):JSON.stringify(t,Nd,2):String(t),Nd=(t,n)=>zd(n)?Nd(t,n.value):Ds(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((s,[l,h],p)=>(s[Fu(l,p)+" =>"]=h,s),{})}:Us(n)?{[`Set(${n.size})`]:[...n.values()].map(s=>Fu(s))}:In(n)?Fu(n):Ze(n)&&!pe(n)&&!Od(n)?String(n):n,Fu=(t,n="")=>{var s;return In(t)?`Symbol(${(s=t.description)!=null?s:n})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Fi;class $d{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Fi,!n&&Fi&&(this.index=(Fi.scopes||(Fi.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let n,s;if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].pause();for(n=0,s=this.effects.length;n<s;n++)this.effects[n].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let n,s;if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].resume();for(n=0,s=this.effects.length;n<s;n++)this.effects[n].resume()}}run(n){if(this._active){const s=Fi;try{return Fi=this,n()}finally{Fi=s}}}on(){Fi=this}off(){Fi=this.parent}stop(n){if(this._active){this._active=!1;let s,l;for(s=0,l=this.effects.length;s<l;s++)this.effects[s].stop();for(this.effects.length=0,s=0,l=this.cleanups.length;s<l;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,l=this.scopes.length;s<l;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!n){const h=this.parent.scopes.pop();h&&h!==this&&(this.parent.scopes[this.index]=h,h.index=this.index)}this.parent=void 0}}}function jd(t){return new $d(t)}function Ud(){return Fi}function Am(t,n=!1){Fi&&Fi.cleanups.push(t)}let He;const zu=new WeakSet;class Gd{constructor(n){this.fn=n,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Fi&&Fi.active&&Fi.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,zu.has(this)&&(zu.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Hd(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ch(this),Zd(this);const n=He,s=bn;He=this,bn=!0;try{return this.fn()}finally{qd(this),He=n,bn=s,this.flags&=-3}}stop(){if(this.flags&1){for(let n=this.deps;n;n=n.nextDep)Oc(n);this.deps=this.depsTail=void 0,ch(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?zu.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ic(this)&&this.run()}get dirty(){return ic(this)}}let Vd=0,Oo,Io;function Hd(t,n=!1){if(t.flags|=8,n){t.next=Io,Io=t;return}t.next=Oo,Oo=t}function Dc(){Vd++}function Rc(){if(--Vd>0)return;if(Io){let n=Io;for(Io=void 0;n;){const s=n.next;n.next=void 0,n.flags&=-9,n=s}}let t;for(;Oo;){let n=Oo;for(Oo=void 0;n;){const s=n.next;if(n.next=void 0,n.flags&=-9,n.flags&1)try{n.trigger()}catch(l){t||(t=l)}n=s}}if(t)throw t}function Zd(t){for(let n=t.deps;n;n=n.nextDep)n.version=-1,n.prevActiveLink=n.dep.activeLink,n.dep.activeLink=n}function qd(t){let n,s=t.depsTail,l=s;for(;l;){const h=l.prevDep;l.version===-1?(l===s&&(s=h),Oc(l),Tm(l)):n=l,l.dep.activeLink=l.prevActiveLink,l.prevActiveLink=void 0,l=h}t.deps=n,t.depsTail=s}function ic(t){for(let n=t.deps;n;n=n.nextDep)if(n.dep.version!==n.version||n.dep.computed&&(Kd(n.dep.computed)||n.dep.version!==n.version))return!0;return!!t._dirty}function Kd(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Vo))return;t.globalVersion=Vo;const n=t.dep;if(t.flags|=2,n.version>0&&!t.isSSR&&t.deps&&!ic(t)){t.flags&=-3;return}const s=He,l=bn;He=t,bn=!0;try{Zd(t);const h=t.fn(t._value);(n.version===0||br(h,t._value))&&(t._value=h,n.version++)}catch(h){throw n.version++,h}finally{He=s,bn=l,qd(t),t.flags&=-3}}function Oc(t,n=!1){const{dep:s,prevSub:l,nextSub:h}=t;if(l&&(l.nextSub=h,t.prevSub=void 0),h&&(h.prevSub=l,t.nextSub=void 0),s.subs===t&&(s.subs=l,!l&&s.computed)){s.computed.flags&=-5;for(let p=s.computed.deps;p;p=p.nextDep)Oc(p,!0)}!n&&!--s.sc&&s.map&&s.map.delete(s.key)}function Tm(t){const{prevDep:n,nextDep:s}=t;n&&(n.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=n,t.nextDep=void 0)}let bn=!0;const Wd=[];function Lr(){Wd.push(bn),bn=!1}function Cr(){const t=Wd.pop();bn=t===void 0?!0:t}function ch(t){const{cleanup:n}=t;if(t.cleanup=void 0,n){const s=He;He=void 0;try{n()}finally{He=s}}}let Vo=0;class Dm{constructor(n,s){this.sub=n,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ic{constructor(n){this.computed=n,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(n){if(!He||!bn||He===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==He)s=this.activeLink=new Dm(He,this),He.deps?(s.prevDep=He.depsTail,He.depsTail.nextDep=s,He.depsTail=s):He.deps=He.depsTail=s,Jd(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const l=s.nextDep;l.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=l),s.prevDep=He.depsTail,s.nextDep=void 0,He.depsTail.nextDep=s,He.depsTail=s,He.deps===s&&(He.deps=l)}return s}trigger(n){this.version++,Vo++,this.notify(n)}notify(n){Dc();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Rc()}}}function Jd(t){if(t.dep.sc++,t.sub.flags&4){const n=t.dep.computed;if(n&&!t.dep.subs){n.flags|=20;for(let l=n.deps;l;l=l.nextDep)Jd(l)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const ol=new WeakMap,Vr=Symbol(""),nc=Symbol(""),Ho=Symbol("");function ki(t,n,s){if(bn&&He){let l=ol.get(t);l||ol.set(t,l=new Map);let h=l.get(s);h||(l.set(s,h=new Ic),h.map=l,h.key=s),h.track()}}function Yn(t,n,s,l,h,p){const f=ol.get(t);if(!f){Vo++;return}const v=y=>{y&&y.trigger()};if(Dc(),n==="clear")f.forEach(v);else{const y=pe(t),C=y&&Ac(s);if(y&&s==="length"){const M=Number(l);f.forEach((P,U)=>{(U==="length"||U===Ho||!In(U)&&U>=M)&&v(P)})}else switch((s!==void 0||f.has(void 0))&&v(f.get(s)),C&&v(f.get(Ho)),n){case"add":y?C&&v(f.get("length")):(v(f.get(Vr)),Ds(t)&&v(f.get(nc)));break;case"delete":y||(v(f.get(Vr)),Ds(t)&&v(f.get(nc)));break;case"set":Ds(t)&&v(f.get(Vr));break}}Rc()}function Rm(t,n){const s=ol.get(t);return s&&s.get(n)}function Ms(t){const n=Ae(t);return n===t?n:(ki(n,"iterate",Ho),cn(t)?n:n.map(Mi))}function kl(t){return ki(t=Ae(t),"iterate",Ho),t}const Om={__proto__:null,[Symbol.iterator](){return Nu(this,Symbol.iterator,Mi)},concat(...t){return Ms(this).concat(...t.map(n=>pe(n)?Ms(n):n))},entries(){return Nu(this,"entries",t=>(t[1]=Mi(t[1]),t))},every(t,n){return Wn(this,"every",t,n,void 0,arguments)},filter(t,n){return Wn(this,"filter",t,n,s=>s.map(Mi),arguments)},find(t,n){return Wn(this,"find",t,n,Mi,arguments)},findIndex(t,n){return Wn(this,"findIndex",t,n,void 0,arguments)},findLast(t,n){return Wn(this,"findLast",t,n,Mi,arguments)},findLastIndex(t,n){return Wn(this,"findLastIndex",t,n,void 0,arguments)},forEach(t,n){return Wn(this,"forEach",t,n,void 0,arguments)},includes(...t){return $u(this,"includes",t)},indexOf(...t){return $u(this,"indexOf",t)},join(t){return Ms(this).join(t)},lastIndexOf(...t){return $u(this,"lastIndexOf",t)},map(t,n){return Wn(this,"map",t,n,void 0,arguments)},pop(){return ko(this,"pop")},push(...t){return ko(this,"push",t)},reduce(t,...n){return hh(this,"reduce",t,n)},reduceRight(t,...n){return hh(this,"reduceRight",t,n)},shift(){return ko(this,"shift")},some(t,n){return Wn(this,"some",t,n,void 0,arguments)},splice(...t){return ko(this,"splice",t)},toReversed(){return Ms(this).toReversed()},toSorted(t){return Ms(this).toSorted(t)},toSpliced(...t){return Ms(this).toSpliced(...t)},unshift(...t){return ko(this,"unshift",t)},values(){return Nu(this,"values",Mi)}};function Nu(t,n,s){const l=kl(t),h=l[n]();return l!==t&&!cn(t)&&(h._next=h.next,h.next=()=>{const p=h._next();return p.value&&(p.value=s(p.value)),p}),h}const Im=Array.prototype;function Wn(t,n,s,l,h,p){const f=kl(t),v=f!==t&&!cn(t),y=f[n];if(y!==Im[n]){const P=y.apply(t,p);return v?Mi(P):P}let C=s;f!==t&&(v?C=function(P,U){return s.call(this,Mi(P),U,t)}:s.length>2&&(C=function(P,U){return s.call(this,P,U,t)}));const M=y.call(f,C,l);return v&&h?h(M):M}function hh(t,n,s,l){const h=kl(t);let p=s;return h!==t&&(cn(t)?s.length>3&&(p=function(f,v,y){return s.call(this,f,v,y,t)}):p=function(f,v,y){return s.call(this,f,Mi(v),y,t)}),h[n](p,...l)}function $u(t,n,s){const l=Ae(t);ki(l,"iterate",Ho);const h=l[n](...s);return(h===-1||h===!1)&&Nc(s[0])?(s[0]=Ae(s[0]),l[n](...s)):h}function ko(t,n,s=[]){Lr(),Dc();const l=Ae(t)[n].apply(t,s);return Rc(),Cr(),l}const Fm=Pc("__proto__,__v_isRef,__isVue"),Xd=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(In));function zm(t){In(t)||(t=String(t));const n=Ae(this);return ki(n,"has",t),n.hasOwnProperty(t)}class Yd{constructor(n=!1,s=!1){this._isReadonly=n,this._isShallow=s}get(n,s,l){if(s==="__v_skip")return n.__v_skip;const h=this._isReadonly,p=this._isShallow;if(s==="__v_isReactive")return!h;if(s==="__v_isReadonly")return h;if(s==="__v_isShallow")return p;if(s==="__v_raw")return l===(h?p?Km:nf:p?ef:tf).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(l)?n:void 0;const f=pe(n);if(!h){let y;if(f&&(y=Om[s]))return y;if(s==="hasOwnProperty")return zm}const v=Reflect.get(n,s,ni(n)?n:l);return(In(s)?Xd.has(s):Fm(s))||(h||ki(n,"get",s),p)?v:ni(v)?f&&Ac(s)?v:v.value:Ze(v)?h?sf(v):ir(v):v}}class Qd extends Yd{constructor(n=!1){super(!1,n)}set(n,s,l,h){let p=n[s];if(!this._isShallow){const y=Kr(p);if(!cn(l)&&!Kr(l)&&(p=Ae(p),l=Ae(l)),!pe(n)&&ni(p)&&!ni(l))return y?!1:(p.value=l,!0)}const f=pe(n)&&Ac(s)?Number(s)<n.length:ze(n,s),v=Reflect.set(n,s,l,ni(n)?n:h);return n===Ae(h)&&(f?br(l,p)&&Yn(n,"set",s,l):Yn(n,"add",s,l)),v}deleteProperty(n,s){const l=ze(n,s);n[s];const h=Reflect.deleteProperty(n,s);return h&&l&&Yn(n,"delete",s,void 0),h}has(n,s){const l=Reflect.has(n,s);return(!In(s)||!Xd.has(s))&&ki(n,"has",s),l}ownKeys(n){return ki(n,"iterate",pe(n)?"length":Vr),Reflect.ownKeys(n)}}class Nm extends Yd{constructor(n=!1){super(!0,n)}set(n,s){return!0}deleteProperty(n,s){return!0}}const $m=new Qd,jm=new Nm,Um=new Qd(!0);const rc=t=>t,Ga=t=>Reflect.getPrototypeOf(t);function Gm(t,n,s){return function(...l){const h=this.__v_raw,p=Ae(h),f=Ds(p),v=t==="entries"||t===Symbol.iterator&&f,y=t==="keys"&&f,C=h[t](...l),M=s?rc:n?sc:Mi;return!n&&ki(p,"iterate",y?nc:Vr),{next(){const{value:P,done:U}=C.next();return U?{value:P,done:U}:{value:v?[M(P[0]),M(P[1])]:M(P),done:U}},[Symbol.iterator](){return this}}}}function Va(t){return function(...n){return t==="delete"?!1:t==="clear"?void 0:this}}function Vm(t,n){const s={get(h){const p=this.__v_raw,f=Ae(p),v=Ae(h);t||(br(h,v)&&ki(f,"get",h),ki(f,"get",v));const{has:y}=Ga(f),C=n?rc:t?sc:Mi;if(y.call(f,h))return C(p.get(h));if(y.call(f,v))return C(p.get(v));p!==f&&p.get(h)},get size(){const h=this.__v_raw;return!t&&ki(Ae(h),"iterate",Vr),Reflect.get(h,"size",h)},has(h){const p=this.__v_raw,f=Ae(p),v=Ae(h);return t||(br(h,v)&&ki(f,"has",h),ki(f,"has",v)),h===v?p.has(h):p.has(h)||p.has(v)},forEach(h,p){const f=this,v=f.__v_raw,y=Ae(v),C=n?rc:t?sc:Mi;return!t&&ki(y,"iterate",Vr),v.forEach((M,P)=>h.call(p,C(M),C(P),f))}};return Si(s,t?{add:Va("add"),set:Va("set"),delete:Va("delete"),clear:Va("clear")}:{add(h){!n&&!cn(h)&&!Kr(h)&&(h=Ae(h));const p=Ae(this);return Ga(p).has.call(p,h)||(p.add(h),Yn(p,"add",h,h)),this},set(h,p){!n&&!cn(p)&&!Kr(p)&&(p=Ae(p));const f=Ae(this),{has:v,get:y}=Ga(f);let C=v.call(f,h);C||(h=Ae(h),C=v.call(f,h));const M=y.call(f,h);return f.set(h,p),C?br(p,M)&&Yn(f,"set",h,p):Yn(f,"add",h,p),this},delete(h){const p=Ae(this),{has:f,get:v}=Ga(p);let y=f.call(p,h);y||(h=Ae(h),y=f.call(p,h)),v&&v.call(p,h);const C=p.delete(h);return y&&Yn(p,"delete",h,void 0),C},clear(){const h=Ae(this),p=h.size!==0,f=h.clear();return p&&Yn(h,"clear",void 0,void 0),f}}),["keys","values","entries",Symbol.iterator].forEach(h=>{s[h]=Gm(h,t,n)}),s}function Fc(t,n){const s=Vm(t,n);return(l,h,p)=>h==="__v_isReactive"?!t:h==="__v_isReadonly"?t:h==="__v_raw"?l:Reflect.get(ze(s,h)&&h in l?s:l,h,p)}const Hm={get:Fc(!1,!1)},Zm={get:Fc(!1,!0)},qm={get:Fc(!0,!1)};const tf=new WeakMap,ef=new WeakMap,nf=new WeakMap,Km=new WeakMap;function Wm(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Jm(t){return t.__v_skip||!Object.isExtensible(t)?0:Wm(xm(t))}function ir(t){return Kr(t)?t:zc(t,!1,$m,Hm,tf)}function rf(t){return zc(t,!1,Um,Zm,ef)}function sf(t){return zc(t,!0,jm,qm,nf)}function zc(t,n,s,l,h){if(!Ze(t)||t.__v_raw&&!(n&&t.__v_isReactive))return t;const p=h.get(t);if(p)return p;const f=Jm(t);if(f===0)return t;const v=new Proxy(t,f===2?l:s);return h.set(t,v),v}function xr(t){return Kr(t)?xr(t.__v_raw):!!(t&&t.__v_isReactive)}function Kr(t){return!!(t&&t.__v_isReadonly)}function cn(t){return!!(t&&t.__v_isShallow)}function Nc(t){return t?!!t.__v_raw:!1}function Ae(t){const n=t&&t.__v_raw;return n?Ae(n):t}function $c(t){return!ze(t,"__v_skip")&&Object.isExtensible(t)&&Id(t,"__v_skip",!0),t}const Mi=t=>Ze(t)?ir(t):t,sc=t=>Ze(t)?sf(t):t;function ni(t){return t?t.__v_isRef===!0:!1}function Jt(t){return of(t,!1)}function Xm(t){return of(t,!0)}function of(t,n){return ni(t)?t:new Ym(t,n)}class Ym{constructor(n,s){this.dep=new Ic,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?n:Ae(n),this._value=s?n:Mi(n),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(n){const s=this._rawValue,l=this.__v_isShallow||cn(n)||Kr(n);n=l?n:Ae(n),br(n,s)&&(this._rawValue=n,this._value=l?n:Mi(n),this.dep.trigger())}}function Re(t){return ni(t)?t.value:t}const Qm={get:(t,n,s)=>n==="__v_raw"?t:Re(Reflect.get(t,n,s)),set:(t,n,s,l)=>{const h=t[n];return ni(h)&&!ni(s)?(h.value=s,!0):Reflect.set(t,n,s,l)}};function af(t){return xr(t)?t:new Proxy(t,Qm)}function t0(t){const n=pe(t)?new Array(t.length):{};for(const s in t)n[s]=i0(t,s);return n}class e0{constructor(n,s,l){this._object=n,this._key=s,this._defaultValue=l,this.__v_isRef=!0,this._value=void 0}get value(){const n=this._object[this._key];return this._value=n===void 0?this._defaultValue:n}set value(n){this._object[this._key]=n}get dep(){return Rm(Ae(this._object),this._key)}}function i0(t,n,s){const l=t[n];return ni(l)?l:new e0(t,n,s)}class n0{constructor(n,s,l){this.fn=n,this.setter=s,this._value=void 0,this.dep=new Ic(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Vo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=l}notify(){if(this.flags|=16,!(this.flags&8)&&He!==this)return Hd(this,!0),!0}get value(){const n=this.dep.track();return Kd(this),n&&(n.version=this.dep.version),this._value}set value(n){this.setter&&this.setter(n)}}function r0(t,n,s=!1){let l,h;return xe(t)?l=t:(l=t.get,h=t.set),new n0(l,h,s)}const Ha={},al=new WeakMap;let Ur;function s0(t,n=!1,s=Ur){if(s){let l=al.get(s);l||al.set(s,l=[]),l.push(t)}}function o0(t,n,s=Ge){const{immediate:l,deep:h,once:p,scheduler:f,augmentJob:v,call:y}=s,C=At=>h?At:cn(At)||h===!1||h===0?Qn(At,1):Qn(At);let M,P,U,J,R=!1,V=!1;if(ni(t)?(P=()=>t.value,R=cn(t)):xr(t)?(P=()=>C(t),R=!0):pe(t)?(V=!0,R=t.some(At=>xr(At)||cn(At)),P=()=>t.map(At=>{if(ni(At))return At.value;if(xr(At))return C(At);if(xe(At))return y?y(At,2):At()})):xe(t)?n?P=y?()=>y(t,2):t:P=()=>{if(U){Lr();try{U()}finally{Cr()}}const At=Ur;Ur=M;try{return y?y(t,3,[J]):t(J)}finally{Ur=At}}:P=On,n&&h){const At=P,Ut=h===!0?1/0:h;P=()=>Qn(At(),Ut)}const G=Ud(),_t=()=>{M.stop(),G&&G.active&&Bc(G.effects,M)};if(p&&n){const At=n;n=(...Ut)=>{At(...Ut),_t()}}let kt=V?new Array(t.length).fill(Ha):Ha;const pt=At=>{if(!(!(M.flags&1)||!M.dirty&&!At))if(n){const Ut=M.run();if(h||R||(V?Ut.some((Y,nt)=>br(Y,kt[nt])):br(Ut,kt))){U&&U();const Y=Ur;Ur=M;try{const nt=[Ut,kt===Ha?void 0:V&&kt[0]===Ha?[]:kt,J];y?y(n,3,nt):n(...nt),kt=Ut}finally{Ur=Y}}}else M.run()};return v&&v(pt),M=new Gd(P),M.scheduler=f?()=>f(pt,!1):pt,J=At=>s0(At,!1,M),U=M.onStop=()=>{const At=al.get(M);if(At){if(y)y(At,4);else for(const Ut of At)Ut();al.delete(M)}},n?l?pt(!0):kt=M.run():f?f(pt.bind(null,!0),!0):M.run(),_t.pause=M.pause.bind(M),_t.resume=M.resume.bind(M),_t.stop=_t,_t}function Qn(t,n=1/0,s){if(n<=0||!Ze(t)||t.__v_skip||(s=s||new Set,s.has(t)))return t;if(s.add(t),n--,ni(t))Qn(t.value,n,s);else if(pe(t))for(let l=0;l<t.length;l++)Qn(t[l],n,s);else if(Us(t)||Ds(t))t.forEach(l=>{Qn(l,n,s)});else if(Od(t)){for(const l in t)Qn(t[l],n,s);for(const l of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,l)&&Qn(t[l],n,s)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ta(t,n,s,l){try{return l?t(...l):t()}catch(h){Ml(h,n,s)}}function Fn(t,n,s,l){if(xe(t)){const h=ta(t,n,s,l);return h&&Dd(h)&&h.catch(p=>{Ml(p,n,s)}),h}if(pe(t)){const h=[];for(let p=0;p<t.length;p++)h.push(Fn(t[p],n,s,l));return h}}function Ml(t,n,s,l=!0){const h=n?n.vnode:null,{errorHandler:p,throwUnhandledErrorInProduction:f}=n&&n.appContext.config||Ge;if(n){let v=n.parent;const y=n.proxy,C=`https://vuejs.org/error-reference/#runtime-${s}`;for(;v;){const M=v.ec;if(M){for(let P=0;P<M.length;P++)if(M[P](t,y,C)===!1)return}v=v.parent}if(p){Lr(),ta(p,null,10,[t,y,C]),Cr();return}}a0(t,s,h,l,f)}function a0(t,n,s,l=!0,h=!1){if(h)throw t;console.error(t)}const zi=[];let Dn=-1;const Rs=[];let _r=null,Ss=0;const lf=Promise.resolve();let ll=null;function Os(t){const n=ll||lf;return t?n.then(this?t.bind(this):t):n}function l0(t){let n=Dn+1,s=zi.length;for(;n<s;){const l=n+s>>>1,h=zi[l],p=Zo(h);p<t||p===t&&h.flags&2?n=l+1:s=l}return n}function jc(t){if(!(t.flags&1)){const n=Zo(t),s=zi[zi.length-1];!s||!(t.flags&2)&&n>=Zo(s)?zi.push(t):zi.splice(l0(n),0,t),t.flags|=1,uf()}}function uf(){ll||(ll=lf.then(hf))}function u0(t){pe(t)?Rs.push(...t):_r&&t.id===-1?_r.splice(Ss+1,0,t):t.flags&1||(Rs.push(t),t.flags|=1),uf()}function dh(t,n,s=Dn+1){for(;s<zi.length;s++){const l=zi[s];if(l&&l.flags&2){if(t&&l.id!==t.uid)continue;zi.splice(s,1),s--,l.flags&4&&(l.flags&=-2),l(),l.flags&4||(l.flags&=-2)}}}function cf(t){if(Rs.length){const n=[...new Set(Rs)].sort((s,l)=>Zo(s)-Zo(l));if(Rs.length=0,_r){_r.push(...n);return}for(_r=n,Ss=0;Ss<_r.length;Ss++){const s=_r[Ss];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}_r=null,Ss=0}}const Zo=t=>t.id==null?t.flags&2?-1:1/0:t.id;function hf(t){try{for(Dn=0;Dn<zi.length;Dn++){const n=zi[Dn];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),ta(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;Dn<zi.length;Dn++){const n=zi[Dn];n&&(n.flags&=-2)}Dn=-1,zi.length=0,cf(),ll=null,(zi.length||Rs.length)&&hf()}}let Gi=null,df=null;function ul(t){const n=Gi;return Gi=t,df=t&&t.type.__scopeId||null,n}function Fo(t,n=Gi,s){if(!n||t._n)return t;const l=(...h)=>{l._d&&wh(-1);const p=ul(n);let f;try{f=t(...h)}finally{ul(p),l._d&&wh(1)}return f};return l._n=!0,l._c=!0,l._d=!0,l}function De(t,n){if(Gi===null)return t;const s=Tl(Gi),l=t.dirs||(t.dirs=[]);for(let h=0;h<n.length;h++){let[p,f,v,y=Ge]=n[h];p&&(xe(p)&&(p={mounted:p,updated:p}),p.deep&&Qn(f),l.push({dir:p,instance:s,value:f,oldValue:void 0,arg:v,modifiers:y}))}return t}function $r(t,n,s,l){const h=t.dirs,p=n&&n.dirs;for(let f=0;f<h.length;f++){const v=h[f];p&&(v.oldValue=p[f].value);let y=v.dir[l];y&&(Lr(),Fn(y,s,8,[t.el,v,t,n]),Cr())}}const c0=Symbol("_vte"),h0=t=>t.__isTeleport;function Uc(t,n){t.shapeFlag&6&&t.component?(t.transition=n,Uc(t.component.subTree,n)):t.shapeFlag&128?(t.ssContent.transition=n.clone(t.ssContent),t.ssFallback.transition=n.clone(t.ssFallback)):t.transition=n}/*! #__NO_SIDE_EFFECTS__ */function Yi(t,n){return xe(t)?Si({name:t.name},n,{setup:t}):t}function ff(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function cl(t,n,s,l,h=!1){if(pe(t)){t.forEach((R,V)=>cl(R,n&&(pe(n)?n[V]:n),s,l,h));return}if(zo(l)&&!h){l.shapeFlag&512&&l.type.__asyncResolved&&l.component.subTree.component&&cl(t,n,s,l.component.subTree);return}const p=l.shapeFlag&4?Tl(l.component):l.el,f=h?null:p,{i:v,r:y}=t,C=n&&n.r,M=v.refs===Ge?v.refs={}:v.refs,P=v.setupState,U=Ae(P),J=P===Ge?()=>!1:R=>ze(U,R);if(C!=null&&C!==y&&(oi(C)?(M[C]=null,J(C)&&(P[C]=null)):ni(C)&&(C.value=null)),xe(y))ta(y,v,12,[f,M]);else{const R=oi(y),V=ni(y);if(R||V){const G=()=>{if(t.f){const _t=R?J(y)?P[y]:M[y]:y.value;h?pe(_t)&&Bc(_t,p):pe(_t)?_t.includes(p)||_t.push(p):R?(M[y]=[p],J(y)&&(P[y]=M[y])):(y.value=[p],t.k&&(M[t.k]=y.value))}else R?(M[y]=f,J(y)&&(P[y]=f)):V&&(y.value=f,t.k&&(M[t.k]=f))};f?(G.id=-1,Wi(G,s)):G()}}}Cl().requestIdleCallback;Cl().cancelIdleCallback;const zo=t=>!!t.type.__asyncLoader,pf=t=>t.type.__isKeepAlive;function d0(t,n){mf(t,"a",n)}function f0(t,n){mf(t,"da",n)}function mf(t,n,s=vi){const l=t.__wdc||(t.__wdc=()=>{let h=s;for(;h;){if(h.isDeactivated)return;h=h.parent}return t()});if(Pl(n,l,s),s){let h=s.parent;for(;h&&h.parent;)pf(h.parent.vnode)&&p0(l,n,s,h),h=h.parent}}function p0(t,n,s,l){const h=Pl(n,t,l,!0);Sl(()=>{Bc(l[n],h)},s)}function Pl(t,n,s=vi,l=!1){if(s){const h=s[t]||(s[t]=[]),p=n.__weh||(n.__weh=(...f)=>{Lr();const v=ea(s),y=Fn(n,s,t,f);return v(),Cr(),y});return l?h.unshift(p):h.push(p),p}}const nr=t=>(n,s=vi)=>{(!Ko||t==="sp")&&Pl(t,(...l)=>n(...l),s)},m0=nr("bm"),Er=nr("m"),g0=nr("bu"),_0=nr("u"),gf=nr("bum"),Sl=nr("um"),y0=nr("sp"),v0=nr("rtg"),b0=nr("rtc");function x0(t,n=vi){Pl("ec",t,n)}const w0="components";function L0(t,n){return E0(w0,t,!0,n)||t}const C0=Symbol.for("v-ndc");function E0(t,n,s=!0,l=!1){const h=Gi||vi;if(h){const p=h.type;{const v=dg(p,!1);if(v&&(v===n||v===fn(n)||v===Ll(fn(n))))return p}const f=fh(h[t]||p[t],n)||fh(h.appContext[t],n);return!f&&l?p:f}}function fh(t,n){return t&&(t[n]||t[fn(n)]||t[Ll(fn(n))])}function ei(t,n,s,l){let h;const p=s,f=pe(t);if(f||oi(t)){const v=f&&xr(t);let y=!1;v&&(y=!cn(t),t=kl(t)),h=new Array(t.length);for(let C=0,M=t.length;C<M;C++)h[C]=n(y?Mi(t[C]):t[C],C,void 0,p)}else if(typeof t=="number"){h=new Array(t);for(let v=0;v<t;v++)h[v]=n(v+1,v,void 0,p)}else if(Ze(t))if(t[Symbol.iterator])h=Array.from(t,(v,y)=>n(v,y,void 0,p));else{const v=Object.keys(t);h=new Array(v.length);for(let y=0,C=v.length;y<C;y++){const M=v[y];h[y]=n(t[M],M,y,p)}}else h=[];return h}const oc=t=>t?Ff(t)?Tl(t):oc(t.parent):null,No=Si(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>oc(t.parent),$root:t=>oc(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>yf(t),$forceUpdate:t=>t.f||(t.f=()=>{jc(t.update)}),$nextTick:t=>t.n||(t.n=Os.bind(t.proxy)),$watch:t=>q0.bind(t)}),ju=(t,n)=>t!==Ge&&!t.__isScriptSetup&&ze(t,n),k0={get({_:t},n){if(n==="__v_skip")return!0;const{ctx:s,setupState:l,data:h,props:p,accessCache:f,type:v,appContext:y}=t;let C;if(n[0]!=="$"){const J=f[n];if(J!==void 0)switch(J){case 1:return l[n];case 2:return h[n];case 4:return s[n];case 3:return p[n]}else{if(ju(l,n))return f[n]=1,l[n];if(h!==Ge&&ze(h,n))return f[n]=2,h[n];if((C=t.propsOptions[0])&&ze(C,n))return f[n]=3,p[n];if(s!==Ge&&ze(s,n))return f[n]=4,s[n];ac&&(f[n]=0)}}const M=No[n];let P,U;if(M)return n==="$attrs"&&ki(t.attrs,"get",""),M(t);if((P=v.__cssModules)&&(P=P[n]))return P;if(s!==Ge&&ze(s,n))return f[n]=4,s[n];if(U=y.config.globalProperties,ze(U,n))return U[n]},set({_:t},n,s){const{data:l,setupState:h,ctx:p}=t;return ju(h,n)?(h[n]=s,!0):l!==Ge&&ze(l,n)?(l[n]=s,!0):ze(t.props,n)||n[0]==="$"&&n.slice(1)in t?!1:(p[n]=s,!0)},has({_:{data:t,setupState:n,accessCache:s,ctx:l,appContext:h,propsOptions:p}},f){let v;return!!s[f]||t!==Ge&&ze(t,f)||ju(n,f)||(v=p[0])&&ze(v,f)||ze(l,f)||ze(No,f)||ze(h.config.globalProperties,f)},defineProperty(t,n,s){return s.get!=null?t._.accessCache[n]=0:ze(s,"value")&&this.set(t,n,s.value,null),Reflect.defineProperty(t,n,s)}};function ph(t){return pe(t)?t.reduce((n,s)=>(n[s]=null,n),{}):t}let ac=!0;function M0(t){const n=yf(t),s=t.proxy,l=t.ctx;ac=!1,n.beforeCreate&&mh(n.beforeCreate,t,"bc");const{data:h,computed:p,methods:f,watch:v,provide:y,inject:C,created:M,beforeMount:P,mounted:U,beforeUpdate:J,updated:R,activated:V,deactivated:G,beforeDestroy:_t,beforeUnmount:kt,destroyed:pt,unmounted:At,render:Ut,renderTracked:Y,renderTriggered:nt,errorCaptured:z,serverPrefetch:rt,expose:dt,inheritAttrs:et,components:Mt,directives:Ot,filters:Q}=n;if(C&&P0(C,l,null),f)for(const Ct in f){const xt=f[Ct];xe(xt)&&(l[Ct]=xt.bind(s))}if(h){const Ct=h.call(s,s);Ze(Ct)&&(t.data=ir(Ct))}if(ac=!0,p)for(const Ct in p){const xt=p[Ct],Wt=xe(xt)?xt.bind(s,s):xe(xt.get)?xt.get.bind(s,s):On,$t=!xe(xt)&&xe(xt.set)?xt.set.bind(s):On,Lt=Pe({get:Wt,set:$t});Object.defineProperty(l,Ct,{enumerable:!0,configurable:!0,get:()=>Lt.value,set:gt=>Lt.value=gt})}if(v)for(const Ct in v)_f(v[Ct],l,s,Ct);if(y){const Ct=xe(y)?y.call(s):y;Reflect.ownKeys(Ct).forEach(xt=>{Ja(xt,Ct[xt])})}M&&mh(M,t,"c");function Pt(Ct,xt){pe(xt)?xt.forEach(Wt=>Ct(Wt.bind(s))):xt&&Ct(xt.bind(s))}if(Pt(m0,P),Pt(Er,U),Pt(g0,J),Pt(_0,R),Pt(d0,V),Pt(f0,G),Pt(x0,z),Pt(b0,Y),Pt(v0,nt),Pt(gf,kt),Pt(Sl,At),Pt(y0,rt),pe(dt))if(dt.length){const Ct=t.exposed||(t.exposed={});dt.forEach(xt=>{Object.defineProperty(Ct,xt,{get:()=>s[xt],set:Wt=>s[xt]=Wt})})}else t.exposed||(t.exposed={});Ut&&t.render===On&&(t.render=Ut),et!=null&&(t.inheritAttrs=et),Mt&&(t.components=Mt),Ot&&(t.directives=Ot),rt&&ff(t)}function P0(t,n,s=On){pe(t)&&(t=lc(t));for(const l in t){const h=t[l];let p;Ze(h)?"default"in h?p=hn(h.from||l,h.default,!0):p=hn(h.from||l):p=hn(h),ni(p)?Object.defineProperty(n,l,{enumerable:!0,configurable:!0,get:()=>p.value,set:f=>p.value=f}):n[l]=p}}function mh(t,n,s){Fn(pe(t)?t.map(l=>l.bind(n.proxy)):t.bind(n.proxy),n,s)}function _f(t,n,s,l){let h=l.includes(".")?Tf(s,l):()=>s[l];if(oi(t)){const p=n[t];xe(p)&&vn(h,p)}else if(xe(t))vn(h,t.bind(s));else if(Ze(t))if(pe(t))t.forEach(p=>_f(p,n,s,l));else{const p=xe(t.handler)?t.handler.bind(s):n[t.handler];xe(p)&&vn(h,p,t)}}function yf(t){const n=t.type,{mixins:s,extends:l}=n,{mixins:h,optionsCache:p,config:{optionMergeStrategies:f}}=t.appContext,v=p.get(n);let y;return v?y=v:!h.length&&!s&&!l?y=n:(y={},h.length&&h.forEach(C=>hl(y,C,f,!0)),hl(y,n,f)),Ze(n)&&p.set(n,y),y}function hl(t,n,s,l=!1){const{mixins:h,extends:p}=n;p&&hl(t,p,s,!0),h&&h.forEach(f=>hl(t,f,s,!0));for(const f in n)if(!(l&&f==="expose")){const v=S0[f]||s&&s[f];t[f]=v?v(t[f],n[f]):n[f]}return t}const S0={data:gh,props:_h,emits:_h,methods:To,computed:To,beforeCreate:Oi,created:Oi,beforeMount:Oi,mounted:Oi,beforeUpdate:Oi,updated:Oi,beforeDestroy:Oi,beforeUnmount:Oi,destroyed:Oi,unmounted:Oi,activated:Oi,deactivated:Oi,errorCaptured:Oi,serverPrefetch:Oi,components:To,directives:To,watch:A0,provide:gh,inject:B0};function gh(t,n){return n?t?function(){return Si(xe(t)?t.call(this,this):t,xe(n)?n.call(this,this):n)}:n:t}function B0(t,n){return To(lc(t),lc(n))}function lc(t){if(pe(t)){const n={};for(let s=0;s<t.length;s++)n[t[s]]=t[s];return n}return t}function Oi(t,n){return t?[...new Set([].concat(t,n))]:n}function To(t,n){return t?Si(Object.create(null),t,n):n}function _h(t,n){return t?pe(t)&&pe(n)?[...new Set([...t,...n])]:Si(Object.create(null),ph(t),ph(n??{})):n}function A0(t,n){if(!t)return n;if(!n)return t;const s=Si(Object.create(null),t);for(const l in n)s[l]=Oi(t[l],n[l]);return s}function vf(){return{app:null,config:{isNativeTag:vm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let T0=0;function D0(t,n){return function(l,h=null){xe(l)||(l=Si({},l)),h!=null&&!Ze(h)&&(h=null);const p=vf(),f=new WeakSet,v=[];let y=!1;const C=p.app={_uid:T0++,_component:l,_props:h,_container:null,_context:p,_instance:null,version:pg,get config(){return p.config},set config(M){},use(M,...P){return f.has(M)||(M&&xe(M.install)?(f.add(M),M.install(C,...P)):xe(M)&&(f.add(M),M(C,...P))),C},mixin(M){return p.mixins.includes(M)||p.mixins.push(M),C},component(M,P){return P?(p.components[M]=P,C):p.components[M]},directive(M,P){return P?(p.directives[M]=P,C):p.directives[M]},mount(M,P,U){if(!y){const J=C._ceVNode||ci(l,h);return J.appContext=p,U===!0?U="svg":U===!1&&(U=void 0),t(J,M,U),y=!0,C._container=M,M.__vue_app__=C,Tl(J.component)}},onUnmount(M){v.push(M)},unmount(){y&&(Fn(v,C._instance,16),t(null,C._container),delete C._container.__vue_app__)},provide(M,P){return p.provides[M]=P,C},runWithContext(M){const P=Hr;Hr=C;try{return M()}finally{Hr=P}}};return C}}let Hr=null;function Ja(t,n){if(vi){let s=vi.provides;const l=vi.parent&&vi.parent.provides;l===s&&(s=vi.provides=Object.create(l)),s[t]=n}}function hn(t,n,s=!1){const l=vi||Gi;if(l||Hr){const h=Hr?Hr._context.provides:l?l.parent==null?l.vnode.appContext&&l.vnode.appContext.provides:l.parent.provides:void 0;if(h&&t in h)return h[t];if(arguments.length>1)return s&&xe(n)?n.call(l&&l.proxy):n}}function R0(){return!!(vi||Gi||Hr)}const bf={},xf=()=>Object.create(bf),wf=t=>Object.getPrototypeOf(t)===bf;function O0(t,n,s,l=!1){const h={},p=xf();t.propsDefaults=Object.create(null),Lf(t,n,h,p);for(const f in t.propsOptions[0])f in h||(h[f]=void 0);s?t.props=l?h:rf(h):t.type.props?t.props=h:t.props=p,t.attrs=p}function I0(t,n,s,l){const{props:h,attrs:p,vnode:{patchFlag:f}}=t,v=Ae(h),[y]=t.propsOptions;let C=!1;if((l||f>0)&&!(f&16)){if(f&8){const M=t.vnode.dynamicProps;for(let P=0;P<M.length;P++){let U=M[P];if(Bl(t.emitsOptions,U))continue;const J=n[U];if(y)if(ze(p,U))J!==p[U]&&(p[U]=J,C=!0);else{const R=fn(U);h[R]=uc(y,v,R,J,t,!1)}else J!==p[U]&&(p[U]=J,C=!0)}}}else{Lf(t,n,h,p)&&(C=!0);let M;for(const P in v)(!n||!ze(n,P)&&((M=Yr(P))===P||!ze(n,M)))&&(y?s&&(s[P]!==void 0||s[M]!==void 0)&&(h[P]=uc(y,v,P,void 0,t,!0)):delete h[P]);if(p!==v)for(const P in p)(!n||!ze(n,P))&&(delete p[P],C=!0)}C&&Yn(t.attrs,"set","")}function Lf(t,n,s,l){const[h,p]=t.propsOptions;let f=!1,v;if(n)for(let y in n){if(Ro(y))continue;const C=n[y];let M;h&&ze(h,M=fn(y))?!p||!p.includes(M)?s[M]=C:(v||(v={}))[M]=C:Bl(t.emitsOptions,y)||(!(y in l)||C!==l[y])&&(l[y]=C,f=!0)}if(p){const y=Ae(s),C=v||Ge;for(let M=0;M<p.length;M++){const P=p[M];s[P]=uc(h,y,P,C[P],t,!ze(C,P))}}return f}function uc(t,n,s,l,h,p){const f=t[s];if(f!=null){const v=ze(f,"default");if(v&&l===void 0){const y=f.default;if(f.type!==Function&&!f.skipFactory&&xe(y)){const{propsDefaults:C}=h;if(s in C)l=C[s];else{const M=ea(h);l=C[s]=y.call(null,n),M()}}else l=y;h.ce&&h.ce._setProp(s,l)}f[0]&&(p&&!v?l=!1:f[1]&&(l===""||l===Yr(s))&&(l=!0))}return l}const F0=new WeakMap;function Cf(t,n,s=!1){const l=s?F0:n.propsCache,h=l.get(t);if(h)return h;const p=t.props,f={},v=[];let y=!1;if(!xe(t)){const M=P=>{y=!0;const[U,J]=Cf(P,n,!0);Si(f,U),J&&v.push(...J)};!s&&n.mixins.length&&n.mixins.forEach(M),t.extends&&M(t.extends),t.mixins&&t.mixins.forEach(M)}if(!p&&!y)return Ze(t)&&l.set(t,Ts),Ts;if(pe(p))for(let M=0;M<p.length;M++){const P=fn(p[M]);yh(P)&&(f[P]=Ge)}else if(p)for(const M in p){const P=fn(M);if(yh(P)){const U=p[M],J=f[P]=pe(U)||xe(U)?{type:U}:Si({},U),R=J.type;let V=!1,G=!0;if(pe(R))for(let _t=0;_t<R.length;++_t){const kt=R[_t],pt=xe(kt)&&kt.name;if(pt==="Boolean"){V=!0;break}else pt==="String"&&(G=!1)}else V=xe(R)&&R.name==="Boolean";J[0]=V,J[1]=G,(V||ze(J,"default"))&&v.push(P)}}const C=[f,v];return Ze(t)&&l.set(t,C),C}function yh(t){return t[0]!=="$"&&!Ro(t)}const Ef=t=>t[0]==="_"||t==="$stable",Gc=t=>pe(t)?t.map(Rn):[Rn(t)],z0=(t,n,s)=>{if(n._n)return n;const l=Fo((...h)=>Gc(n(...h)),s);return l._c=!1,l},kf=(t,n,s)=>{const l=t._ctx;for(const h in t){if(Ef(h))continue;const p=t[h];if(xe(p))n[h]=z0(h,p,l);else if(p!=null){const f=Gc(p);n[h]=()=>f}}},Mf=(t,n)=>{const s=Gc(n);t.slots.default=()=>s},Pf=(t,n,s)=>{for(const l in n)(s||l!=="_")&&(t[l]=n[l])},N0=(t,n,s)=>{const l=t.slots=xf();if(t.vnode.shapeFlag&32){const h=n._;h?(Pf(l,n,s),s&&Id(l,"_",h,!0)):kf(n,l)}else n&&Mf(t,n)},$0=(t,n,s)=>{const{vnode:l,slots:h}=t;let p=!0,f=Ge;if(l.shapeFlag&32){const v=n._;v?s&&v===1?p=!1:Pf(h,n,s):(p=!n.$stable,kf(n,h)),f=n}else n&&(Mf(t,n),f={default:1});if(p)for(const v in h)!Ef(v)&&f[v]==null&&delete h[v]},Wi=tg;function j0(t){return U0(t)}function U0(t,n){const s=Cl();s.__VUE__=!0;const{insert:l,remove:h,patchProp:p,createElement:f,createText:v,createComment:y,setText:C,setElementText:M,parentNode:P,nextSibling:U,setScopeId:J=On,insertStaticContent:R}=t,V=($,H,ot,St=null,It=null,at=null,X=void 0,jt=null,Bt=!!H.dynamicChildren)=>{if($===H)return;$&&!Mo($,H)&&(St=bt($),gt($,It,at,!0),$=null),H.patchFlag===-2&&(Bt=!1,H.dynamicChildren=null);const{type:Tt,ref:Dt,shapeFlag:Zt}=H;switch(Tt){case Al:G($,H,ot,St);break;case Wr:_t($,H,ot,St);break;case Xa:$==null&&kt(H,ot,St,X);break;case Oe:Mt($,H,ot,St,It,at,X,jt,Bt);break;default:Zt&1?Ut($,H,ot,St,It,at,X,jt,Bt):Zt&6?Ot($,H,ot,St,It,at,X,jt,Bt):(Zt&64||Zt&128)&&Tt.process($,H,ot,St,It,at,X,jt,Bt,Xt)}Dt!=null&&It&&cl(Dt,$&&$.ref,at,H||$,!H)},G=($,H,ot,St)=>{if($==null)l(H.el=v(H.children),ot,St);else{const It=H.el=$.el;H.children!==$.children&&C(It,H.children)}},_t=($,H,ot,St)=>{$==null?l(H.el=y(H.children||""),ot,St):H.el=$.el},kt=($,H,ot,St)=>{[$.el,$.anchor]=R($.children,H,ot,St,$.el,$.anchor)},pt=({el:$,anchor:H},ot,St)=>{let It;for(;$&&$!==H;)It=U($),l($,ot,St),$=It;l(H,ot,St)},At=({el:$,anchor:H})=>{let ot;for(;$&&$!==H;)ot=U($),h($),$=ot;h(H)},Ut=($,H,ot,St,It,at,X,jt,Bt)=>{H.type==="svg"?X="svg":H.type==="math"&&(X="mathml"),$==null?Y(H,ot,St,It,at,X,jt,Bt):rt($,H,It,at,X,jt,Bt)},Y=($,H,ot,St,It,at,X,jt)=>{let Bt,Tt;const{props:Dt,shapeFlag:Zt,transition:ae,dirs:de}=$;if(Bt=$.el=f($.type,at,Dt&&Dt.is,Dt),Zt&8?M(Bt,$.children):Zt&16&&z($.children,Bt,null,St,It,Uu($,at),X,jt),de&&$r($,null,St,"created"),nt(Bt,$,$.scopeId,X,St),Dt){for(const Se in Dt)Se!=="value"&&!Ro(Se)&&p(Bt,Se,null,Dt[Se],at,St);"value"in Dt&&p(Bt,"value",null,Dt.value,at),(Tt=Dt.onVnodeBeforeMount)&&An(Tt,St,$)}de&&$r($,null,St,"beforeMount");const ve=G0(It,ae);ve&&ae.beforeEnter(Bt),l(Bt,H,ot),((Tt=Dt&&Dt.onVnodeMounted)||ve||de)&&Wi(()=>{Tt&&An(Tt,St,$),ve&&ae.enter(Bt),de&&$r($,null,St,"mounted")},It)},nt=($,H,ot,St,It)=>{if(ot&&J($,ot),St)for(let at=0;at<St.length;at++)J($,St[at]);if(It){let at=It.subTree;if(H===at||Rf(at.type)&&(at.ssContent===H||at.ssFallback===H)){const X=It.vnode;nt($,X,X.scopeId,X.slotScopeIds,It.parent)}}},z=($,H,ot,St,It,at,X,jt,Bt=0)=>{for(let Tt=Bt;Tt<$.length;Tt++){const Dt=$[Tt]=jt?yr($[Tt]):Rn($[Tt]);V(null,Dt,H,ot,St,It,at,X,jt)}},rt=($,H,ot,St,It,at,X)=>{const jt=H.el=$.el;let{patchFlag:Bt,dynamicChildren:Tt,dirs:Dt}=H;Bt|=$.patchFlag&16;const Zt=$.props||Ge,ae=H.props||Ge;let de;if(ot&&jr(ot,!1),(de=ae.onVnodeBeforeUpdate)&&An(de,ot,H,$),Dt&&$r(H,$,ot,"beforeUpdate"),ot&&jr(ot,!0),(Zt.innerHTML&&ae.innerHTML==null||Zt.textContent&&ae.textContent==null)&&M(jt,""),Tt?dt($.dynamicChildren,Tt,jt,ot,St,Uu(H,It),at):X||xt($,H,jt,null,ot,St,Uu(H,It),at,!1),Bt>0){if(Bt&16)et(jt,Zt,ae,ot,It);else if(Bt&2&&Zt.class!==ae.class&&p(jt,"class",null,ae.class,It),Bt&4&&p(jt,"style",Zt.style,ae.style,It),Bt&8){const ve=H.dynamicProps;for(let Se=0;Se<ve.length;Se++){const Ee=ve[Se],ii=Zt[Ee],Ne=ae[Ee];(Ne!==ii||Ee==="value")&&p(jt,Ee,ii,Ne,It,ot)}}Bt&1&&$.children!==H.children&&M(jt,H.children)}else!X&&Tt==null&&et(jt,Zt,ae,ot,It);((de=ae.onVnodeUpdated)||Dt)&&Wi(()=>{de&&An(de,ot,H,$),Dt&&$r(H,$,ot,"updated")},St)},dt=($,H,ot,St,It,at,X)=>{for(let jt=0;jt<H.length;jt++){const Bt=$[jt],Tt=H[jt],Dt=Bt.el&&(Bt.type===Oe||!Mo(Bt,Tt)||Bt.shapeFlag&70)?P(Bt.el):ot;V(Bt,Tt,Dt,null,St,It,at,X,!0)}},et=($,H,ot,St,It)=>{if(H!==ot){if(H!==Ge)for(const at in H)!Ro(at)&&!(at in ot)&&p($,at,H[at],null,It,St);for(const at in ot){if(Ro(at))continue;const X=ot[at],jt=H[at];X!==jt&&at!=="value"&&p($,at,jt,X,It,St)}"value"in ot&&p($,"value",H.value,ot.value,It)}},Mt=($,H,ot,St,It,at,X,jt,Bt)=>{const Tt=H.el=$?$.el:v(""),Dt=H.anchor=$?$.anchor:v("");let{patchFlag:Zt,dynamicChildren:ae,slotScopeIds:de}=H;de&&(jt=jt?jt.concat(de):de),$==null?(l(Tt,ot,St),l(Dt,ot,St),z(H.children||[],ot,Dt,It,at,X,jt,Bt)):Zt>0&&Zt&64&&ae&&$.dynamicChildren?(dt($.dynamicChildren,ae,ot,It,at,X,jt),(H.key!=null||It&&H===It.subTree)&&Sf($,H,!0)):xt($,H,ot,Dt,It,at,X,jt,Bt)},Ot=($,H,ot,St,It,at,X,jt,Bt)=>{H.slotScopeIds=jt,$==null?H.shapeFlag&512?It.ctx.activate(H,ot,St,X,Bt):Q(H,ot,St,It,at,X,Bt):mt($,H,Bt)},Q=($,H,ot,St,It,at,X)=>{const jt=$.component=ag($,St,It);if(pf($)&&(jt.ctx.renderer=Xt),lg(jt,!1,X),jt.asyncDep){if(It&&It.registerDep(jt,Pt,X),!$.el){const Bt=jt.subTree=ci(Wr);_t(null,Bt,H,ot)}}else Pt(jt,$,H,ot,It,at,X)},mt=($,H,ot)=>{const St=H.component=$.component;if(Y0($,H,ot))if(St.asyncDep&&!St.asyncResolved){Ct(St,H,ot);return}else St.next=H,St.update();else H.el=$.el,St.vnode=H},Pt=($,H,ot,St,It,at,X)=>{const jt=()=>{if($.isMounted){let{next:Zt,bu:ae,u:de,parent:ve,vnode:Se}=$;{const ai=Bf($);if(ai){Zt&&(Zt.el=Se.el,Ct($,Zt,X)),ai.asyncDep.then(()=>{$.isUnmounted||jt()});return}}let Ee=Zt,ii;jr($,!1),Zt?(Zt.el=Se.el,Ct($,Zt,X)):Zt=Se,ae&&Wa(ae),(ii=Zt.props&&Zt.props.onVnodeBeforeUpdate)&&An(ii,ve,Zt,Se),jr($,!0);const Ne=bh($),Bi=$.subTree;$.subTree=Ne,V(Bi,Ne,P(Bi.el),bt(Bi),$,It,at),Zt.el=Ne.el,Ee===null&&Q0($,Ne.el),de&&Wi(de,It),(ii=Zt.props&&Zt.props.onVnodeUpdated)&&Wi(()=>An(ii,ve,Zt,Se),It)}else{let Zt;const{el:ae,props:de}=H,{bm:ve,m:Se,parent:Ee,root:ii,type:Ne}=$,Bi=zo(H);jr($,!1),ve&&Wa(ve),!Bi&&(Zt=de&&de.onVnodeBeforeMount)&&An(Zt,Ee,H),jr($,!0);{ii.ce&&ii.ce._injectChildStyle(Ne);const ai=$.subTree=bh($);V(null,ai,ot,St,$,It,at),H.el=ai.el}if(Se&&Wi(Se,It),!Bi&&(Zt=de&&de.onVnodeMounted)){const ai=H;Wi(()=>An(Zt,Ee,ai),It)}(H.shapeFlag&256||Ee&&zo(Ee.vnode)&&Ee.vnode.shapeFlag&256)&&$.a&&Wi($.a,It),$.isMounted=!0,H=ot=St=null}};$.scope.on();const Bt=$.effect=new Gd(jt);$.scope.off();const Tt=$.update=Bt.run.bind(Bt),Dt=$.job=Bt.runIfDirty.bind(Bt);Dt.i=$,Dt.id=$.uid,Bt.scheduler=()=>jc(Dt),jr($,!0),Tt()},Ct=($,H,ot)=>{H.component=$;const St=$.vnode.props;$.vnode=H,$.next=null,I0($,H.props,St,ot),$0($,H.children,ot),Lr(),dh($),Cr()},xt=($,H,ot,St,It,at,X,jt,Bt=!1)=>{const Tt=$&&$.children,Dt=$?$.shapeFlag:0,Zt=H.children,{patchFlag:ae,shapeFlag:de}=H;if(ae>0){if(ae&128){$t(Tt,Zt,ot,St,It,at,X,jt,Bt);return}else if(ae&256){Wt(Tt,Zt,ot,St,It,at,X,jt,Bt);return}}de&8?(Dt&16&&Qt(Tt,It,at),Zt!==Tt&&M(ot,Zt)):Dt&16?de&16?$t(Tt,Zt,ot,St,It,at,X,jt,Bt):Qt(Tt,It,at,!0):(Dt&8&&M(ot,""),de&16&&z(Zt,ot,St,It,at,X,jt,Bt))},Wt=($,H,ot,St,It,at,X,jt,Bt)=>{$=$||Ts,H=H||Ts;const Tt=$.length,Dt=H.length,Zt=Math.min(Tt,Dt);let ae;for(ae=0;ae<Zt;ae++){const de=H[ae]=Bt?yr(H[ae]):Rn(H[ae]);V($[ae],de,ot,null,It,at,X,jt,Bt)}Tt>Dt?Qt($,It,at,!0,!1,Zt):z(H,ot,St,It,at,X,jt,Bt,Zt)},$t=($,H,ot,St,It,at,X,jt,Bt)=>{let Tt=0;const Dt=H.length;let Zt=$.length-1,ae=Dt-1;for(;Tt<=Zt&&Tt<=ae;){const de=$[Tt],ve=H[Tt]=Bt?yr(H[Tt]):Rn(H[Tt]);if(Mo(de,ve))V(de,ve,ot,null,It,at,X,jt,Bt);else break;Tt++}for(;Tt<=Zt&&Tt<=ae;){const de=$[Zt],ve=H[ae]=Bt?yr(H[ae]):Rn(H[ae]);if(Mo(de,ve))V(de,ve,ot,null,It,at,X,jt,Bt);else break;Zt--,ae--}if(Tt>Zt){if(Tt<=ae){const de=ae+1,ve=de<Dt?H[de].el:St;for(;Tt<=ae;)V(null,H[Tt]=Bt?yr(H[Tt]):Rn(H[Tt]),ot,ve,It,at,X,jt,Bt),Tt++}}else if(Tt>ae)for(;Tt<=Zt;)gt($[Tt],It,at,!0),Tt++;else{const de=Tt,ve=Tt,Se=new Map;for(Tt=ve;Tt<=ae;Tt++){const Xe=H[Tt]=Bt?yr(H[Tt]):Rn(H[Tt]);Xe.key!=null&&Se.set(Xe.key,Tt)}let Ee,ii=0;const Ne=ae-ve+1;let Bi=!1,ai=0;const Ln=new Array(Ne);for(Tt=0;Tt<Ne;Tt++)Ln[Tt]=0;for(Tt=de;Tt<=Zt;Tt++){const Xe=$[Tt];if(ii>=Ne){gt(Xe,It,at,!0);continue}let Ai;if(Xe.key!=null)Ai=Se.get(Xe.key);else for(Ee=ve;Ee<=ae;Ee++)if(Ln[Ee-ve]===0&&Mo(Xe,H[Ee])){Ai=Ee;break}Ai===void 0?gt(Xe,It,at,!0):(Ln[Ai-ve]=Tt+1,Ai>=ai?ai=Ai:Bi=!0,V(Xe,H[Ai],ot,null,It,at,X,jt,Bt),ii++)}const zn=Bi?V0(Ln):Ts;for(Ee=zn.length-1,Tt=Ne-1;Tt>=0;Tt--){const Xe=ve+Tt,Ai=H[Xe],Qi=Xe+1<Dt?H[Xe+1].el:St;Ln[Tt]===0?V(null,Ai,ot,Qi,It,at,X,jt,Bt):Bi&&(Ee<0||Tt!==zn[Ee]?Lt(Ai,ot,Qi,2):Ee--)}}},Lt=($,H,ot,St,It=null)=>{const{el:at,type:X,transition:jt,children:Bt,shapeFlag:Tt}=$;if(Tt&6){Lt($.component.subTree,H,ot,St);return}if(Tt&128){$.suspense.move(H,ot,St);return}if(Tt&64){X.move($,H,ot,Xt);return}if(X===Oe){l(at,H,ot);for(let Zt=0;Zt<Bt.length;Zt++)Lt(Bt[Zt],H,ot,St);l($.anchor,H,ot);return}if(X===Xa){pt($,H,ot);return}if(St!==2&&Tt&1&&jt)if(St===0)jt.beforeEnter(at),l(at,H,ot),Wi(()=>jt.enter(at),It);else{const{leave:Zt,delayLeave:ae,afterLeave:de}=jt,ve=()=>l(at,H,ot),Se=()=>{Zt(at,()=>{ve(),de&&de()})};ae?ae(at,ve,Se):Se()}else l(at,H,ot)},gt=($,H,ot,St=!1,It=!1)=>{const{type:at,props:X,ref:jt,children:Bt,dynamicChildren:Tt,shapeFlag:Dt,patchFlag:Zt,dirs:ae,cacheIndex:de}=$;if(Zt===-2&&(It=!1),jt!=null&&cl(jt,null,ot,$,!0),de!=null&&(H.renderCache[de]=void 0),Dt&256){H.ctx.deactivate($);return}const ve=Dt&1&&ae,Se=!zo($);let Ee;if(Se&&(Ee=X&&X.onVnodeBeforeUnmount)&&An(Ee,H,$),Dt&6)ne($.component,ot,St);else{if(Dt&128){$.suspense.unmount(ot,St);return}ve&&$r($,null,H,"beforeUnmount"),Dt&64?$.type.remove($,H,ot,Xt,St):Tt&&!Tt.hasOnce&&(at!==Oe||Zt>0&&Zt&64)?Qt(Tt,H,ot,!1,!0):(at===Oe&&Zt&384||!It&&Dt&16)&&Qt(Bt,H,ot),St&&Kt($)}(Se&&(Ee=X&&X.onVnodeUnmounted)||ve)&&Wi(()=>{Ee&&An(Ee,H,$),ve&&$r($,null,H,"unmounted")},ot)},Kt=$=>{const{type:H,el:ot,anchor:St,transition:It}=$;if(H===Oe){ie(ot,St);return}if(H===Xa){At($);return}const at=()=>{h(ot),It&&!It.persisted&&It.afterLeave&&It.afterLeave()};if($.shapeFlag&1&&It&&!It.persisted){const{leave:X,delayLeave:jt}=It,Bt=()=>X(ot,at);jt?jt($.el,at,Bt):Bt()}else at()},ie=($,H)=>{let ot;for(;$!==H;)ot=U($),h($),$=ot;h(H)},ne=($,H,ot)=>{const{bum:St,scope:It,job:at,subTree:X,um:jt,m:Bt,a:Tt}=$;vh(Bt),vh(Tt),St&&Wa(St),It.stop(),at&&(at.flags|=8,gt(X,$,H,ot)),jt&&Wi(jt,H),Wi(()=>{$.isUnmounted=!0},H),H&&H.pendingBranch&&!H.isUnmounted&&$.asyncDep&&!$.asyncResolved&&$.suspenseId===H.pendingId&&(H.deps--,H.deps===0&&H.resolve())},Qt=($,H,ot,St=!1,It=!1,at=0)=>{for(let X=at;X<$.length;X++)gt($[X],H,ot,St,It)},bt=$=>{if($.shapeFlag&6)return bt($.component.subTree);if($.shapeFlag&128)return $.suspense.next();const H=U($.anchor||$.el),ot=H&&H[c0];return ot?U(ot):H};let Ht=!1;const Vt=($,H,ot)=>{$==null?H._vnode&&gt(H._vnode,null,null,!0):V(H._vnode||null,$,H,null,null,null,ot),H._vnode=$,Ht||(Ht=!0,dh(),cf(),Ht=!1)},Xt={p:V,um:gt,m:Lt,r:Kt,mt:Q,mc:z,pc:xt,pbc:dt,n:bt,o:t};return{render:Vt,hydrate:void 0,createApp:D0(Vt)}}function Uu({type:t,props:n},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:s}function jr({effect:t,job:n},s){s?(t.flags|=32,n.flags|=4):(t.flags&=-33,n.flags&=-5)}function G0(t,n){return(!t||t&&!t.pendingBranch)&&n&&!n.persisted}function Sf(t,n,s=!1){const l=t.children,h=n.children;if(pe(l)&&pe(h))for(let p=0;p<l.length;p++){const f=l[p];let v=h[p];v.shapeFlag&1&&!v.dynamicChildren&&((v.patchFlag<=0||v.patchFlag===32)&&(v=h[p]=yr(h[p]),v.el=f.el),!s&&v.patchFlag!==-2&&Sf(f,v)),v.type===Al&&(v.el=f.el)}}function V0(t){const n=t.slice(),s=[0];let l,h,p,f,v;const y=t.length;for(l=0;l<y;l++){const C=t[l];if(C!==0){if(h=s[s.length-1],t[h]<C){n[l]=h,s.push(l);continue}for(p=0,f=s.length-1;p<f;)v=p+f>>1,t[s[v]]<C?p=v+1:f=v;C<t[s[p]]&&(p>0&&(n[l]=s[p-1]),s[p]=l)}}for(p=s.length,f=s[p-1];p-- >0;)s[p]=f,f=n[f];return s}function Bf(t){const n=t.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:Bf(n)}function vh(t){if(t)for(let n=0;n<t.length;n++)t[n].flags|=8}const H0=Symbol.for("v-scx"),Z0=()=>hn(H0);function vn(t,n,s){return Af(t,n,s)}function Af(t,n,s=Ge){const{immediate:l,deep:h,flush:p,once:f}=s,v=Si({},s),y=n&&l||!n&&p!=="post";let C;if(Ko){if(p==="sync"){const J=Z0();C=J.__watcherHandles||(J.__watcherHandles=[])}else if(!y){const J=()=>{};return J.stop=On,J.resume=On,J.pause=On,J}}const M=vi;v.call=(J,R,V)=>Fn(J,M,R,V);let P=!1;p==="post"?v.scheduler=J=>{Wi(J,M&&M.suspense)}:p!=="sync"&&(P=!0,v.scheduler=(J,R)=>{R?J():jc(J)}),v.augmentJob=J=>{n&&(J.flags|=4),P&&(J.flags|=2,M&&(J.id=M.uid,J.i=M))};const U=o0(t,n,v);return Ko&&(C?C.push(U):y&&U()),U}function q0(t,n,s){const l=this.proxy,h=oi(t)?t.includes(".")?Tf(l,t):()=>l[t]:t.bind(l,l);let p;xe(n)?p=n:(p=n.handler,s=n);const f=ea(this),v=Af(h,p.bind(l),s);return f(),v}function Tf(t,n){const s=n.split(".");return()=>{let l=t;for(let h=0;h<s.length&&l;h++)l=l[s[h]];return l}}const K0=(t,n)=>n==="modelValue"||n==="model-value"?t.modelModifiers:t[`${n}Modifiers`]||t[`${fn(n)}Modifiers`]||t[`${Yr(n)}Modifiers`];function W0(t,n,...s){if(t.isUnmounted)return;const l=t.vnode.props||Ge;let h=s;const p=n.startsWith("update:"),f=p&&K0(l,n.slice(7));f&&(f.trim&&(h=s.map(M=>oi(M)?M.trim():M)),f.number&&(h=s.map(sl)));let v,y=l[v=Iu(n)]||l[v=Iu(fn(n))];!y&&p&&(y=l[v=Iu(Yr(n))]),y&&Fn(y,t,6,h);const C=l[v+"Once"];if(C){if(!t.emitted)t.emitted={};else if(t.emitted[v])return;t.emitted[v]=!0,Fn(C,t,6,h)}}function Df(t,n,s=!1){const l=n.emitsCache,h=l.get(t);if(h!==void 0)return h;const p=t.emits;let f={},v=!1;if(!xe(t)){const y=C=>{const M=Df(C,n,!0);M&&(v=!0,Si(f,M))};!s&&n.mixins.length&&n.mixins.forEach(y),t.extends&&y(t.extends),t.mixins&&t.mixins.forEach(y)}return!p&&!v?(Ze(t)&&l.set(t,null),null):(pe(p)?p.forEach(y=>f[y]=null):Si(f,p),Ze(t)&&l.set(t,f),f)}function Bl(t,n){return!t||!xl(n)?!1:(n=n.slice(2).replace(/Once$/,""),ze(t,n[0].toLowerCase()+n.slice(1))||ze(t,Yr(n))||ze(t,n))}function bh(t){const{type:n,vnode:s,proxy:l,withProxy:h,propsOptions:[p],slots:f,attrs:v,emit:y,render:C,renderCache:M,props:P,data:U,setupState:J,ctx:R,inheritAttrs:V}=t,G=ul(t);let _t,kt;try{if(s.shapeFlag&4){const At=h||l,Ut=At;_t=Rn(C.call(Ut,At,M,P,J,U,R)),kt=v}else{const At=n;_t=Rn(At.length>1?At(P,{attrs:v,slots:f,emit:y}):At(P,null)),kt=n.props?v:J0(v)}}catch(At){$o.length=0,Ml(At,t,1),_t=ci(Wr)}let pt=_t;if(kt&&V!==!1){const At=Object.keys(kt),{shapeFlag:Ut}=pt;At.length&&Ut&7&&(p&&At.some(Sc)&&(kt=X0(kt,p)),pt=Is(pt,kt,!1,!0))}return s.dirs&&(pt=Is(pt,null,!1,!0),pt.dirs=pt.dirs?pt.dirs.concat(s.dirs):s.dirs),s.transition&&Uc(pt,s.transition),_t=pt,ul(G),_t}const J0=t=>{let n;for(const s in t)(s==="class"||s==="style"||xl(s))&&((n||(n={}))[s]=t[s]);return n},X0=(t,n)=>{const s={};for(const l in t)(!Sc(l)||!(l.slice(9)in n))&&(s[l]=t[l]);return s};function Y0(t,n,s){const{props:l,children:h,component:p}=t,{props:f,children:v,patchFlag:y}=n,C=p.emitsOptions;if(n.dirs||n.transition)return!0;if(s&&y>=0){if(y&1024)return!0;if(y&16)return l?xh(l,f,C):!!f;if(y&8){const M=n.dynamicProps;for(let P=0;P<M.length;P++){const U=M[P];if(f[U]!==l[U]&&!Bl(C,U))return!0}}}else return(h||v)&&(!v||!v.$stable)?!0:l===f?!1:l?f?xh(l,f,C):!0:!!f;return!1}function xh(t,n,s){const l=Object.keys(n);if(l.length!==Object.keys(t).length)return!0;for(let h=0;h<l.length;h++){const p=l[h];if(n[p]!==t[p]&&!Bl(s,p))return!0}return!1}function Q0({vnode:t,parent:n},s){for(;n;){const l=n.subTree;if(l.suspense&&l.suspense.activeBranch===t&&(l.el=t.el),l===t)(t=n.vnode).el=s,n=n.parent;else break}}const Rf=t=>t.__isSuspense;function tg(t,n){n&&n.pendingBranch?pe(t)?n.effects.push(...t):n.effects.push(t):u0(t)}const Oe=Symbol.for("v-fgt"),Al=Symbol.for("v-txt"),Wr=Symbol.for("v-cmt"),Xa=Symbol.for("v-stc"),$o=[];let Ji=null;function Rt(t=!1){$o.push(Ji=t?null:[])}function eg(){$o.pop(),Ji=$o[$o.length-1]||null}let qo=1;function wh(t,n=!1){qo+=t,t<0&&Ji&&n&&(Ji.hasOnce=!0)}function Of(t){return t.dynamicChildren=qo>0?Ji||Ts:null,eg(),qo>0&&Ji&&Ji.push(t),t}function Nt(t,n,s,l,h,p){return Of(w(t,n,s,l,h,p,!0))}function Jr(t,n,s,l,h){return Of(ci(t,n,s,l,h,!0))}function dl(t){return t?t.__v_isVNode===!0:!1}function Mo(t,n){return t.type===n.type&&t.key===n.key}const If=({key:t})=>t??null,Ya=({ref:t,ref_key:n,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?oi(t)||ni(t)||xe(t)?{i:Gi,r:t,k:n,f:!!s}:t:null);function w(t,n=null,s=null,l=0,h=null,p=t===Oe?0:1,f=!1,v=!1){const y={__v_isVNode:!0,__v_skip:!0,type:t,props:n,key:n&&If(n),ref:n&&Ya(n),scopeId:df,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:p,patchFlag:l,dynamicProps:h,dynamicChildren:null,appContext:null,ctx:Gi};return v?(Vc(y,s),p&128&&t.normalize(y)):s&&(y.shapeFlag|=oi(s)?8:16),qo>0&&!f&&Ji&&(y.patchFlag>0||p&6)&&y.patchFlag!==32&&Ji.push(y),y}const ci=ig;function ig(t,n=null,s=null,l=0,h=null,p=!1){if((!t||t===C0)&&(t=Wr),dl(t)){const v=Is(t,n,!0);return s&&Vc(v,s),qo>0&&!p&&Ji&&(v.shapeFlag&6?Ji[Ji.indexOf(t)]=v:Ji.push(v)),v.patchFlag=-2,v}if(fg(t)&&(t=t.__vccOpts),n){n=ng(n);let{class:v,style:y}=n;v&&!oi(v)&&(n.class=un(v)),Ze(y)&&(Nc(y)&&!pe(y)&&(y=Si({},y)),n.style=El(y))}const f=oi(t)?1:Rf(t)?128:h0(t)?64:Ze(t)?4:xe(t)?2:0;return w(t,n,s,l,h,f,p,!0)}function ng(t){return t?Nc(t)||wf(t)?Si({},t):t:null}function Is(t,n,s=!1,l=!1){const{props:h,ref:p,patchFlag:f,children:v,transition:y}=t,C=n?rg(h||{},n):h,M={__v_isVNode:!0,__v_skip:!0,type:t.type,props:C,key:C&&If(C),ref:n&&n.ref?s&&p?pe(p)?p.concat(Ya(n)):[p,Ya(n)]:Ya(n):p,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:v,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:n&&t.type!==Oe?f===-1?16:f|16:f,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:y,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Is(t.ssContent),ssFallback:t.ssFallback&&Is(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return y&&l&&Uc(M,y.clone(M)),M}function yi(t=" ",n=0){return ci(Al,null,t,n)}function dL(t,n){const s=ci(Xa,null,t);return s.staticCount=n,s}function me(t="",n=!1){return n?(Rt(),Jr(Wr,null,t)):ci(Wr,null,t)}function Rn(t){return t==null||typeof t=="boolean"?ci(Wr):pe(t)?ci(Oe,null,t.slice()):dl(t)?yr(t):ci(Al,null,String(t))}function yr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Is(t)}function Vc(t,n){let s=0;const{shapeFlag:l}=t;if(n==null)n=null;else if(pe(n))s=16;else if(typeof n=="object")if(l&65){const h=n.default;h&&(h._c&&(h._d=!1),Vc(t,h()),h._c&&(h._d=!0));return}else{s=32;const h=n._;!h&&!wf(n)?n._ctx=Gi:h===3&&Gi&&(Gi.slots._===1?n._=1:(n._=2,t.patchFlag|=1024))}else xe(n)?(n={default:n,_ctx:Gi},s=32):(n=String(n),l&64?(s=16,n=[yi(n)]):s=8);t.children=n,t.shapeFlag|=s}function rg(...t){const n={};for(let s=0;s<t.length;s++){const l=t[s];for(const h in l)if(h==="class")n.class!==l.class&&(n.class=un([n.class,l.class]));else if(h==="style")n.style=El([n.style,l.style]);else if(xl(h)){const p=n[h],f=l[h];f&&p!==f&&!(pe(p)&&p.includes(f))&&(n[h]=p?[].concat(p,f):f)}else h!==""&&(n[h]=l[h])}return n}function An(t,n,s,l=null){Fn(t,n,7,[s,l])}const sg=vf();let og=0;function ag(t,n,s){const l=t.type,h=(n?n.appContext:t.appContext)||sg,p={uid:og++,vnode:t,type:l,parent:n,appContext:h,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new $d(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(h.provides),ids:n?n.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Cf(l,h),emitsOptions:Df(l,h),emit:null,emitted:null,propsDefaults:Ge,inheritAttrs:l.inheritAttrs,ctx:Ge,data:Ge,props:Ge,attrs:Ge,slots:Ge,refs:Ge,setupState:Ge,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return p.ctx={_:p},p.root=n?n.root:p,p.emit=W0.bind(null,p),t.ce&&t.ce(p),p}let vi=null,fl,cc;{const t=Cl(),n=(s,l)=>{let h;return(h=t[s])||(h=t[s]=[]),h.push(l),p=>{h.length>1?h.forEach(f=>f(p)):h[0](p)}};fl=n("__VUE_INSTANCE_SETTERS__",s=>vi=s),cc=n("__VUE_SSR_SETTERS__",s=>Ko=s)}const ea=t=>{const n=vi;return fl(t),t.scope.on(),()=>{t.scope.off(),fl(n)}},Lh=()=>{vi&&vi.scope.off(),fl(null)};function Ff(t){return t.vnode.shapeFlag&4}let Ko=!1;function lg(t,n=!1,s=!1){n&&cc(n);const{props:l,children:h}=t.vnode,p=Ff(t);O0(t,l,p,n),N0(t,h,s);const f=p?ug(t,n):void 0;return n&&cc(!1),f}function ug(t,n){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,k0);const{setup:l}=s;if(l){Lr();const h=t.setupContext=l.length>1?hg(t):null,p=ea(t),f=ta(l,t,0,[t.props,h]),v=Dd(f);if(Cr(),p(),(v||t.sp)&&!zo(t)&&ff(t),v){if(f.then(Lh,Lh),n)return f.then(y=>{Ch(t,y)}).catch(y=>{Ml(y,t,0)});t.asyncDep=f}else Ch(t,f)}else zf(t)}function Ch(t,n,s){xe(n)?t.type.__ssrInlineRender?t.ssrRender=n:t.render=n:Ze(n)&&(t.setupState=af(n)),zf(t)}function zf(t,n,s){const l=t.type;t.render||(t.render=l.render||On);{const h=ea(t);Lr();try{M0(t)}finally{Cr(),h()}}}const cg={get(t,n){return ki(t,"get",""),t[n]}};function hg(t){const n=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,cg),slots:t.slots,emit:t.emit,expose:n}}function Tl(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(af($c(t.exposed)),{get(n,s){if(s in n)return n[s];if(s in No)return No[s](t)},has(n,s){return s in n||s in No}})):t.proxy}function dg(t,n=!0){return xe(t)?t.displayName||t.name:t.name||n&&t.__name}function fg(t){return xe(t)&&"__vccOpts"in t}const Pe=(t,n)=>r0(t,n,Ko);function Nf(t,n,s){const l=arguments.length;return l===2?Ze(n)&&!pe(n)?dl(n)?ci(t,null,[n]):ci(t,n):ci(t,null,n):(l>3?s=Array.prototype.slice.call(arguments,2):l===3&&dl(s)&&(s=[s]),ci(t,n,s))}const pg="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let hc;const Eh=typeof window<"u"&&window.trustedTypes;if(Eh)try{hc=Eh.createPolicy("vue",{createHTML:t=>t})}catch{}const $f=hc?t=>hc.createHTML(t):t=>t,mg="http://www.w3.org/2000/svg",gg="http://www.w3.org/1998/Math/MathML",Xn=typeof document<"u"?document:null,kh=Xn&&Xn.createElement("template"),_g={insert:(t,n,s)=>{n.insertBefore(t,s||null)},remove:t=>{const n=t.parentNode;n&&n.removeChild(t)},createElement:(t,n,s,l)=>{const h=n==="svg"?Xn.createElementNS(mg,t):n==="mathml"?Xn.createElementNS(gg,t):s?Xn.createElement(t,{is:s}):Xn.createElement(t);return t==="select"&&l&&l.multiple!=null&&h.setAttribute("multiple",l.multiple),h},createText:t=>Xn.createTextNode(t),createComment:t=>Xn.createComment(t),setText:(t,n)=>{t.nodeValue=n},setElementText:(t,n)=>{t.textContent=n},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Xn.querySelector(t),setScopeId(t,n){t.setAttribute(n,"")},insertStaticContent(t,n,s,l,h,p){const f=s?s.previousSibling:n.lastChild;if(h&&(h===p||h.nextSibling))for(;n.insertBefore(h.cloneNode(!0),s),!(h===p||!(h=h.nextSibling)););else{kh.innerHTML=$f(l==="svg"?`<svg>${t}</svg>`:l==="mathml"?`<math>${t}</math>`:t);const v=kh.content;if(l==="svg"||l==="mathml"){const y=v.firstChild;for(;y.firstChild;)v.appendChild(y.firstChild);v.removeChild(y)}n.insertBefore(v,s)}return[f?f.nextSibling:n.firstChild,s?s.previousSibling:n.lastChild]}},yg=Symbol("_vtc");function vg(t,n,s){const l=t[yg];l&&(n=(n?[n,...l]:[...l]).join(" ")),n==null?t.removeAttribute("class"):s?t.setAttribute("class",n):t.className=n}const pl=Symbol("_vod"),jf=Symbol("_vsh"),Mh={beforeMount(t,{value:n},{transition:s}){t[pl]=t.style.display==="none"?"":t.style.display,s&&n?s.beforeEnter(t):Po(t,n)},mounted(t,{value:n},{transition:s}){s&&n&&s.enter(t)},updated(t,{value:n,oldValue:s},{transition:l}){!n!=!s&&(l?n?(l.beforeEnter(t),Po(t,!0),l.enter(t)):l.leave(t,()=>{Po(t,!1)}):Po(t,n))},beforeUnmount(t,{value:n}){Po(t,n)}};function Po(t,n){t.style.display=n?t[pl]:"none",t[jf]=!n}const bg=Symbol(""),xg=/(^|;)\s*display\s*:/;function wg(t,n,s){const l=t.style,h=oi(s);let p=!1;if(s&&!h){if(n)if(oi(n))for(const f of n.split(";")){const v=f.slice(0,f.indexOf(":")).trim();s[v]==null&&Qa(l,v,"")}else for(const f in n)s[f]==null&&Qa(l,f,"");for(const f in s)f==="display"&&(p=!0),Qa(l,f,s[f])}else if(h){if(n!==s){const f=l[bg];f&&(s+=";"+f),l.cssText=s,p=xg.test(s)}}else n&&t.removeAttribute("style");pl in t&&(t[pl]=p?l.display:"",t[jf]&&(l.display="none"))}const Ph=/\s*!important$/;function Qa(t,n,s){if(pe(s))s.forEach(l=>Qa(t,n,l));else if(s==null&&(s=""),n.startsWith("--"))t.setProperty(n,s);else{const l=Lg(t,n);Ph.test(s)?t.setProperty(Yr(l),s.replace(Ph,""),"important"):t[l]=s}}const Sh=["Webkit","Moz","ms"],Gu={};function Lg(t,n){const s=Gu[n];if(s)return s;let l=fn(n);if(l!=="filter"&&l in t)return Gu[n]=l;l=Ll(l);for(let h=0;h<Sh.length;h++){const p=Sh[h]+l;if(p in t)return Gu[n]=p}return n}const Bh="http://www.w3.org/1999/xlink";function Ah(t,n,s,l,h,p=Sm(n)){l&&n.startsWith("xlink:")?s==null?t.removeAttributeNS(Bh,n.slice(6,n.length)):t.setAttributeNS(Bh,n,s):s==null||p&&!Fd(s)?t.removeAttribute(n):t.setAttribute(n,p?"":In(s)?String(s):s)}function Th(t,n,s,l,h){if(n==="innerHTML"||n==="textContent"){s!=null&&(t[n]=n==="innerHTML"?$f(s):s);return}const p=t.tagName;if(n==="value"&&p!=="PROGRESS"&&!p.includes("-")){const v=p==="OPTION"?t.getAttribute("value")||"":t.value,y=s==null?t.type==="checkbox"?"on":"":String(s);(v!==y||!("_value"in t))&&(t.value=y),s==null&&t.removeAttribute(n),t._value=s;return}let f=!1;if(s===""||s==null){const v=typeof t[n];v==="boolean"?s=Fd(s):s==null&&v==="string"?(s="",f=!0):v==="number"&&(s=0,f=!0)}try{t[n]=s}catch{}f&&t.removeAttribute(h||n)}function tr(t,n,s,l){t.addEventListener(n,s,l)}function Cg(t,n,s,l){t.removeEventListener(n,s,l)}const Dh=Symbol("_vei");function Eg(t,n,s,l,h=null){const p=t[Dh]||(t[Dh]={}),f=p[n];if(l&&f)f.value=l;else{const[v,y]=kg(n);if(l){const C=p[n]=Sg(l,h);tr(t,v,C,y)}else f&&(Cg(t,v,f,y),p[n]=void 0)}}const Rh=/(?:Once|Passive|Capture)$/;function kg(t){let n;if(Rh.test(t)){n={};let l;for(;l=t.match(Rh);)t=t.slice(0,t.length-l[0].length),n[l[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Yr(t.slice(2)),n]}let Vu=0;const Mg=Promise.resolve(),Pg=()=>Vu||(Mg.then(()=>Vu=0),Vu=Date.now());function Sg(t,n){const s=l=>{if(!l._vts)l._vts=Date.now();else if(l._vts<=s.attached)return;Fn(Bg(l,s.value),n,5,[l])};return s.value=t,s.attached=Pg(),s}function Bg(t,n){if(pe(n)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},n.map(l=>h=>!h._stopped&&l&&l(h))}else return n}const Oh=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Ag=(t,n,s,l,h,p)=>{const f=h==="svg";n==="class"?vg(t,l,f):n==="style"?wg(t,s,l):xl(n)?Sc(n)||Eg(t,n,s,l,p):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):Tg(t,n,l,f))?(Th(t,n,l),!t.tagName.includes("-")&&(n==="value"||n==="checked"||n==="selected")&&Ah(t,n,l,f,p,n!=="value")):t._isVueCE&&(/[A-Z]/.test(n)||!oi(l))?Th(t,fn(n),l,p,n):(n==="true-value"?t._trueValue=l:n==="false-value"&&(t._falseValue=l),Ah(t,n,l,f))};function Tg(t,n,s,l){if(l)return!!(n==="innerHTML"||n==="textContent"||n in t&&Oh(n)&&xe(s));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&t.tagName==="INPUT"||n==="type"&&t.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const h=t.tagName;if(h==="IMG"||h==="VIDEO"||h==="CANVAS"||h==="SOURCE")return!1}return Oh(n)&&oi(s)?!1:n in t}const wr=t=>{const n=t.props["onUpdate:modelValue"]||!1;return pe(n)?s=>Wa(n,s):n};function Dg(t){t.target.composing=!0}function Ih(t){const n=t.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const dn=Symbol("_assign"),qe={created(t,{modifiers:{lazy:n,trim:s,number:l}},h){t[dn]=wr(h);const p=l||h.props&&h.props.type==="number";tr(t,n?"change":"input",f=>{if(f.target.composing)return;let v=t.value;s&&(v=v.trim()),p&&(v=sl(v)),t[dn](v)}),s&&tr(t,"change",()=>{t.value=t.value.trim()}),n||(tr(t,"compositionstart",Dg),tr(t,"compositionend",Ih),tr(t,"change",Ih))},mounted(t,{value:n}){t.value=n??""},beforeUpdate(t,{value:n,oldValue:s,modifiers:{lazy:l,trim:h,number:p}},f){if(t[dn]=wr(f),t.composing)return;const v=(p||t.type==="number")&&!/^0\d/.test(t.value)?sl(t.value):t.value,y=n??"";v!==y&&(document.activeElement===t&&t.type!=="range"&&(l&&n===s||h&&t.value.trim()===y)||(t.value=y))}},Uf={deep:!0,created(t,n,s){t[dn]=wr(s),tr(t,"change",()=>{const l=t._modelValue,h=zs(t),p=t.checked,f=t[dn];if(pe(l)){const v=Tc(l,h),y=v!==-1;if(p&&!y)f(l.concat(h));else if(!p&&y){const C=[...l];C.splice(v,1),f(C)}}else if(Us(l)){const v=new Set(l);p?v.add(h):v.delete(h),f(v)}else f(Gf(t,p))})},mounted:Fh,beforeUpdate(t,n,s){t[dn]=wr(s),Fh(t,n,s)}};function Fh(t,{value:n,oldValue:s},l){t._modelValue=n;let h;if(pe(n))h=Tc(n,l.props.value)>-1;else if(Us(n))h=n.has(l.props.value);else{if(n===s)return;h=qr(n,Gf(t,!0))}t.checked!==h&&(t.checked=h)}const Rg={created(t,{value:n},s){t.checked=qr(n,s.props.value),t[dn]=wr(s),tr(t,"change",()=>{t[dn](zs(t))})},beforeUpdate(t,{value:n,oldValue:s},l){t[dn]=wr(l),n!==s&&(t.checked=qr(n,l.props.value))}},Fs={deep:!0,created(t,{value:n,modifiers:{number:s}},l){const h=Us(n);tr(t,"change",()=>{const p=Array.prototype.filter.call(t.options,f=>f.selected).map(f=>s?sl(zs(f)):zs(f));t[dn](t.multiple?h?new Set(p):p:p[0]),t._assigning=!0,Os(()=>{t._assigning=!1})}),t[dn]=wr(l)},mounted(t,{value:n}){zh(t,n)},beforeUpdate(t,n,s){t[dn]=wr(s)},updated(t,{value:n}){t._assigning||zh(t,n)}};function zh(t,n){const s=t.multiple,l=pe(n);if(!(s&&!l&&!Us(n))){for(let h=0,p=t.options.length;h<p;h++){const f=t.options[h],v=zs(f);if(s)if(l){const y=typeof v;y==="string"||y==="number"?f.selected=n.some(C=>String(C)===String(v)):f.selected=Tc(n,v)>-1}else f.selected=n.has(v);else if(qr(zs(f),n)){t.selectedIndex!==h&&(t.selectedIndex=h);return}}!s&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function zs(t){return"_value"in t?t._value:t.value}function Gf(t,n){const s=n?"_trueValue":"_falseValue";return s in t?t[s]:n}const Og={created(t,n,s){Za(t,n,s,null,"created")},mounted(t,n,s){Za(t,n,s,null,"mounted")},beforeUpdate(t,n,s,l){Za(t,n,s,l,"beforeUpdate")},updated(t,n,s,l){Za(t,n,s,l,"updated")}};function Ig(t,n){switch(t){case"SELECT":return Fs;case"TEXTAREA":return qe;default:switch(n){case"checkbox":return Uf;case"radio":return Rg;default:return qe}}}function Za(t,n,s,l,h){const f=Ig(t.tagName,s.props&&s.props.type)[h];f&&f(t,n,s,l)}const Fg=["ctrl","shift","alt","meta"],zg={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,n)=>Fg.some(s=>t[`${s}Key`]&&!n.includes(s))},Ns=(t,n)=>{const s=t._withMods||(t._withMods={}),l=n.join(".");return s[l]||(s[l]=(h,...p)=>{for(let f=0;f<n.length;f++){const v=zg[n[f]];if(v&&v(h,n))return}return t(h,...p)})},Ng=Si({patchProp:Ag},_g);let Nh;function $g(){return Nh||(Nh=j0(Ng))}const jg=(...t)=>{const n=$g().createApp(...t),{mount:s}=n;return n.mount=l=>{const h=Gg(l);if(!h)return;const p=n._component;!xe(p)&&!p.render&&!p.template&&(p.template=h.innerHTML),h.nodeType===1&&(h.textContent="");const f=s(h,!1,Ug(h));return h instanceof Element&&(h.removeAttribute("v-cloak"),h.setAttribute("data-v-app","")),f},n};function Ug(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Gg(t){return oi(t)?document.querySelector(t):t}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Vf;const Dl=t=>Vf=t,Hf=Symbol();function dc(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var jo;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(jo||(jo={}));function Vg(){const t=jd(!0),n=t.run(()=>Jt({}));let s=[],l=[];const h=$c({install(p){Dl(h),h._a=p,p.provide(Hf,h),p.config.globalProperties.$pinia=h,l.forEach(f=>s.push(f)),l=[]},use(p){return this._a?s.push(p):l.push(p),this},_p:s,_a:null,_e:t,_s:new Map,state:n});return h}const Zf=()=>{};function $h(t,n,s,l=Zf){t.push(n);const h=()=>{const p=t.indexOf(n);p>-1&&(t.splice(p,1),l())};return!s&&Ud()&&Am(h),h}function Ps(t,...n){t.slice().forEach(s=>{s(...n)})}const Hg=t=>t(),jh=Symbol(),Hu=Symbol();function fc(t,n){t instanceof Map&&n instanceof Map?n.forEach((s,l)=>t.set(l,s)):t instanceof Set&&n instanceof Set&&n.forEach(t.add,t);for(const s in n){if(!n.hasOwnProperty(s))continue;const l=n[s],h=t[s];dc(h)&&dc(l)&&t.hasOwnProperty(s)&&!ni(l)&&!xr(l)?t[s]=fc(h,l):t[s]=l}return t}const Zg=Symbol();function qg(t){return!dc(t)||!t.hasOwnProperty(Zg)}const{assign:gr}=Object;function Kg(t){return!!(ni(t)&&t.effect)}function Wg(t,n,s,l){const{state:h,actions:p,getters:f}=n,v=s.state.value[t];let y;function C(){v||(s.state.value[t]=h?h():{});const M=t0(s.state.value[t]);return gr(M,p,Object.keys(f||{}).reduce((P,U)=>(P[U]=$c(Pe(()=>{Dl(s);const J=s._s.get(t);return f[U].call(J,J)})),P),{}))}return y=qf(t,C,n,s,l,!0),y}function qf(t,n,s={},l,h,p){let f;const v=gr({actions:{}},s),y={deep:!0};let C,M,P=[],U=[],J;const R=l.state.value[t];!p&&!R&&(l.state.value[t]={}),Jt({});let V;function G(z){let rt;C=M=!1,typeof z=="function"?(z(l.state.value[t]),rt={type:jo.patchFunction,storeId:t,events:J}):(fc(l.state.value[t],z),rt={type:jo.patchObject,payload:z,storeId:t,events:J});const dt=V=Symbol();Os().then(()=>{V===dt&&(C=!0)}),M=!0,Ps(P,rt,l.state.value[t])}const _t=p?function(){const{state:rt}=s,dt=rt?rt():{};this.$patch(et=>{gr(et,dt)})}:Zf;function kt(){f.stop(),P=[],U=[],l._s.delete(t)}const pt=(z,rt="")=>{if(jh in z)return z[Hu]=rt,z;const dt=function(){Dl(l);const et=Array.from(arguments),Mt=[],Ot=[];function Q(Ct){Mt.push(Ct)}function mt(Ct){Ot.push(Ct)}Ps(U,{args:et,name:dt[Hu],store:Ut,after:Q,onError:mt});let Pt;try{Pt=z.apply(this&&this.$id===t?this:Ut,et)}catch(Ct){throw Ps(Ot,Ct),Ct}return Pt instanceof Promise?Pt.then(Ct=>(Ps(Mt,Ct),Ct)).catch(Ct=>(Ps(Ot,Ct),Promise.reject(Ct))):(Ps(Mt,Pt),Pt)};return dt[jh]=!0,dt[Hu]=rt,dt},At={_p:l,$id:t,$onAction:$h.bind(null,U),$patch:G,$reset:_t,$subscribe(z,rt={}){const dt=$h(P,z,rt.detached,()=>et()),et=f.run(()=>vn(()=>l.state.value[t],Mt=>{(rt.flush==="sync"?M:C)&&z({storeId:t,type:jo.direct,events:J},Mt)},gr({},y,rt)));return dt},$dispose:kt},Ut=ir(At);l._s.set(t,Ut);const nt=(l._a&&l._a.runWithContext||Hg)(()=>l._e.run(()=>(f=jd()).run(()=>n({action:pt}))));for(const z in nt){const rt=nt[z];if(ni(rt)&&!Kg(rt)||xr(rt))p||(R&&qg(rt)&&(ni(rt)?rt.value=R[z]:fc(rt,R[z])),l.state.value[t][z]=rt);else if(typeof rt=="function"){const dt=pt(rt,z);nt[z]=dt,v.actions[z]=rt}}return gr(Ut,nt),gr(Ae(Ut),nt),Object.defineProperty(Ut,"$state",{get:()=>l.state.value[t],set:z=>{G(rt=>{gr(rt,z)})}}),l._p.forEach(z=>{gr(Ut,f.run(()=>z({store:Ut,app:l._a,pinia:l,options:v})))}),R&&p&&s.hydrate&&s.hydrate(Ut.$state,R),C=!0,M=!0,Ut}/*! #__NO_SIDE_EFFECTS__ */function Hc(t,n,s){let l,h;const p=typeof n=="function";typeof t=="string"?(l=t,h=p?s:n):(h=t,l=t.id);function f(v,y){const C=R0();return v=v||(C?hn(Hf,null):null),v&&Dl(v),v=Vf,v._s.has(l)||(p?qf(l,n,h,v):Wg(l,h,v)),v._s.get(l)}return f.$id=l,f}function Kf(t,n){return function(){return t.apply(n,arguments)}}const{toString:Jg}=Object.prototype,{getPrototypeOf:Zc}=Object,Rl=(t=>n=>{const s=Jg.call(n);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),wn=t=>(t=t.toLowerCase(),n=>Rl(n)===t),Ol=t=>n=>typeof n===t,{isArray:Gs}=Array,Wo=Ol("undefined");function Xg(t){return t!==null&&!Wo(t)&&t.constructor!==null&&!Wo(t.constructor)&&Xi(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Wf=wn("ArrayBuffer");function Yg(t){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(t):n=t&&t.buffer&&Wf(t.buffer),n}const Qg=Ol("string"),Xi=Ol("function"),Jf=Ol("number"),Il=t=>t!==null&&typeof t=="object",t_=t=>t===!0||t===!1,tl=t=>{if(Rl(t)!=="object")return!1;const n=Zc(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},e_=wn("Date"),i_=wn("File"),n_=wn("Blob"),r_=wn("FileList"),s_=t=>Il(t)&&Xi(t.pipe),o_=t=>{let n;return t&&(typeof FormData=="function"&&t instanceof FormData||Xi(t.append)&&((n=Rl(t))==="formdata"||n==="object"&&Xi(t.toString)&&t.toString()==="[object FormData]"))},a_=wn("URLSearchParams"),[l_,u_,c_,h_]=["ReadableStream","Request","Response","Headers"].map(wn),d_=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ia(t,n,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let l,h;if(typeof t!="object"&&(t=[t]),Gs(t))for(l=0,h=t.length;l<h;l++)n.call(null,t[l],l,t);else{const p=s?Object.getOwnPropertyNames(t):Object.keys(t),f=p.length;let v;for(l=0;l<f;l++)v=p[l],n.call(null,t[v],v,t)}}function Xf(t,n){n=n.toLowerCase();const s=Object.keys(t);let l=s.length,h;for(;l-- >0;)if(h=s[l],n===h.toLowerCase())return h;return null}const Gr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Yf=t=>!Wo(t)&&t!==Gr;function pc(){const{caseless:t}=Yf(this)&&this||{},n={},s=(l,h)=>{const p=t&&Xf(n,h)||h;tl(n[p])&&tl(l)?n[p]=pc(n[p],l):tl(l)?n[p]=pc({},l):Gs(l)?n[p]=l.slice():n[p]=l};for(let l=0,h=arguments.length;l<h;l++)arguments[l]&&ia(arguments[l],s);return n}const f_=(t,n,s,{allOwnKeys:l}={})=>(ia(n,(h,p)=>{s&&Xi(h)?t[p]=Kf(h,s):t[p]=h},{allOwnKeys:l}),t),p_=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),m_=(t,n,s,l)=>{t.prototype=Object.create(n.prototype,l),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:n.prototype}),s&&Object.assign(t.prototype,s)},g_=(t,n,s,l)=>{let h,p,f;const v={};if(n=n||{},t==null)return n;do{for(h=Object.getOwnPropertyNames(t),p=h.length;p-- >0;)f=h[p],(!l||l(f,t,n))&&!v[f]&&(n[f]=t[f],v[f]=!0);t=s!==!1&&Zc(t)}while(t&&(!s||s(t,n))&&t!==Object.prototype);return n},__=(t,n,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=n.length;const l=t.indexOf(n,s);return l!==-1&&l===s},y_=t=>{if(!t)return null;if(Gs(t))return t;let n=t.length;if(!Jf(n))return null;const s=new Array(n);for(;n-- >0;)s[n]=t[n];return s},v_=(t=>n=>t&&n instanceof t)(typeof Uint8Array<"u"&&Zc(Uint8Array)),b_=(t,n)=>{const l=(t&&t[Symbol.iterator]).call(t);let h;for(;(h=l.next())&&!h.done;){const p=h.value;n.call(t,p[0],p[1])}},x_=(t,n)=>{let s;const l=[];for(;(s=t.exec(n))!==null;)l.push(s);return l},w_=wn("HTMLFormElement"),L_=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,l,h){return l.toUpperCase()+h}),Uh=(({hasOwnProperty:t})=>(n,s)=>t.call(n,s))(Object.prototype),C_=wn("RegExp"),Qf=(t,n)=>{const s=Object.getOwnPropertyDescriptors(t),l={};ia(s,(h,p)=>{let f;(f=n(h,p,t))!==!1&&(l[p]=f||h)}),Object.defineProperties(t,l)},E_=t=>{Qf(t,(n,s)=>{if(Xi(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const l=t[s];if(Xi(l)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},k_=(t,n)=>{const s={},l=h=>{h.forEach(p=>{s[p]=!0})};return Gs(t)?l(t):l(String(t).split(n)),s},M_=()=>{},P_=(t,n)=>t!=null&&Number.isFinite(t=+t)?t:n,Zu="abcdefghijklmnopqrstuvwxyz",Gh="0123456789",tp={DIGIT:Gh,ALPHA:Zu,ALPHA_DIGIT:Zu+Zu.toUpperCase()+Gh},S_=(t=16,n=tp.ALPHA_DIGIT)=>{let s="";const{length:l}=n;for(;t--;)s+=n[Math.random()*l|0];return s};function B_(t){return!!(t&&Xi(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const A_=t=>{const n=new Array(10),s=(l,h)=>{if(Il(l)){if(n.indexOf(l)>=0)return;if(!("toJSON"in l)){n[h]=l;const p=Gs(l)?[]:{};return ia(l,(f,v)=>{const y=s(f,h+1);!Wo(y)&&(p[v]=y)}),n[h]=void 0,p}}return l};return s(t,0)},T_=wn("AsyncFunction"),D_=t=>t&&(Il(t)||Xi(t))&&Xi(t.then)&&Xi(t.catch),ep=((t,n)=>t?setImmediate:n?((s,l)=>(Gr.addEventListener("message",({source:h,data:p})=>{h===Gr&&p===s&&l.length&&l.shift()()},!1),h=>{l.push(h),Gr.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",Xi(Gr.postMessage)),R_=typeof queueMicrotask<"u"?queueMicrotask.bind(Gr):typeof process<"u"&&process.nextTick||ep,Et={isArray:Gs,isArrayBuffer:Wf,isBuffer:Xg,isFormData:o_,isArrayBufferView:Yg,isString:Qg,isNumber:Jf,isBoolean:t_,isObject:Il,isPlainObject:tl,isReadableStream:l_,isRequest:u_,isResponse:c_,isHeaders:h_,isUndefined:Wo,isDate:e_,isFile:i_,isBlob:n_,isRegExp:C_,isFunction:Xi,isStream:s_,isURLSearchParams:a_,isTypedArray:v_,isFileList:r_,forEach:ia,merge:pc,extend:f_,trim:d_,stripBOM:p_,inherits:m_,toFlatObject:g_,kindOf:Rl,kindOfTest:wn,endsWith:__,toArray:y_,forEachEntry:b_,matchAll:x_,isHTMLForm:w_,hasOwnProperty:Uh,hasOwnProp:Uh,reduceDescriptors:Qf,freezeMethods:E_,toObjectSet:k_,toCamelCase:L_,noop:M_,toFiniteNumber:P_,findKey:Xf,global:Gr,isContextDefined:Yf,ALPHABET:tp,generateString:S_,isSpecCompliantForm:B_,toJSONObject:A_,isAsyncFn:T_,isThenable:D_,setImmediate:ep,asap:R_};function we(t,n,s,l,h){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",n&&(this.code=n),s&&(this.config=s),l&&(this.request=l),h&&(this.response=h,this.status=h.status?h.status:null)}Et.inherits(we,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Et.toJSONObject(this.config),code:this.code,status:this.status}}});const ip=we.prototype,np={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{np[t]={value:t}});Object.defineProperties(we,np);Object.defineProperty(ip,"isAxiosError",{value:!0});we.from=(t,n,s,l,h,p)=>{const f=Object.create(ip);return Et.toFlatObject(t,f,function(y){return y!==Error.prototype},v=>v!=="isAxiosError"),we.call(f,t.message,n,s,l,h),f.cause=t,f.name=t.name,p&&Object.assign(f,p),f};const O_=null;function mc(t){return Et.isPlainObject(t)||Et.isArray(t)}function rp(t){return Et.endsWith(t,"[]")?t.slice(0,-2):t}function Vh(t,n,s){return t?t.concat(n).map(function(h,p){return h=rp(h),!s&&p?"["+h+"]":h}).join(s?".":""):n}function I_(t){return Et.isArray(t)&&!t.some(mc)}const F_=Et.toFlatObject(Et,{},null,function(n){return/^is[A-Z]/.test(n)});function Fl(t,n,s){if(!Et.isObject(t))throw new TypeError("target must be an object");n=n||new FormData,s=Et.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(V,G){return!Et.isUndefined(G[V])});const l=s.metaTokens,h=s.visitor||M,p=s.dots,f=s.indexes,y=(s.Blob||typeof Blob<"u"&&Blob)&&Et.isSpecCompliantForm(n);if(!Et.isFunction(h))throw new TypeError("visitor must be a function");function C(R){if(R===null)return"";if(Et.isDate(R))return R.toISOString();if(!y&&Et.isBlob(R))throw new we("Blob is not supported. Use a Buffer instead.");return Et.isArrayBuffer(R)||Et.isTypedArray(R)?y&&typeof Blob=="function"?new Blob([R]):Buffer.from(R):R}function M(R,V,G){let _t=R;if(R&&!G&&typeof R=="object"){if(Et.endsWith(V,"{}"))V=l?V:V.slice(0,-2),R=JSON.stringify(R);else if(Et.isArray(R)&&I_(R)||(Et.isFileList(R)||Et.endsWith(V,"[]"))&&(_t=Et.toArray(R)))return V=rp(V),_t.forEach(function(pt,At){!(Et.isUndefined(pt)||pt===null)&&n.append(f===!0?Vh([V],At,p):f===null?V:V+"[]",C(pt))}),!1}return mc(R)?!0:(n.append(Vh(G,V,p),C(R)),!1)}const P=[],U=Object.assign(F_,{defaultVisitor:M,convertValue:C,isVisitable:mc});function J(R,V){if(!Et.isUndefined(R)){if(P.indexOf(R)!==-1)throw Error("Circular reference detected in "+V.join("."));P.push(R),Et.forEach(R,function(_t,kt){(!(Et.isUndefined(_t)||_t===null)&&h.call(n,_t,Et.isString(kt)?kt.trim():kt,V,U))===!0&&J(_t,V?V.concat(kt):[kt])}),P.pop()}}if(!Et.isObject(t))throw new TypeError("data must be an object");return J(t),n}function Hh(t){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(l){return n[l]})}function qc(t,n){this._pairs=[],t&&Fl(t,this,n)}const sp=qc.prototype;sp.append=function(n,s){this._pairs.push([n,s])};sp.toString=function(n){const s=n?function(l){return n.call(this,l,Hh)}:Hh;return this._pairs.map(function(h){return s(h[0])+"="+s(h[1])},"").join("&")};function z_(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function op(t,n,s){if(!n)return t;const l=s&&s.encode||z_;Et.isFunction(s)&&(s={serialize:s});const h=s&&s.serialize;let p;if(h?p=h(n,s):p=Et.isURLSearchParams(n)?n.toString():new qc(n,s).toString(l),p){const f=t.indexOf("#");f!==-1&&(t=t.slice(0,f)),t+=(t.indexOf("?")===-1?"?":"&")+p}return t}class Zh{constructor(){this.handlers=[]}use(n,s,l){return this.handlers.push({fulfilled:n,rejected:s,synchronous:l?l.synchronous:!1,runWhen:l?l.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){Et.forEach(this.handlers,function(l){l!==null&&n(l)})}}const ap={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},N_=typeof URLSearchParams<"u"?URLSearchParams:qc,$_=typeof FormData<"u"?FormData:null,j_=typeof Blob<"u"?Blob:null,U_={isBrowser:!0,classes:{URLSearchParams:N_,FormData:$_,Blob:j_},protocols:["http","https","file","blob","url","data"]},Kc=typeof window<"u"&&typeof document<"u",gc=typeof navigator=="object"&&navigator||void 0,G_=Kc&&(!gc||["ReactNative","NativeScript","NS"].indexOf(gc.product)<0),V_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",H_=Kc&&window.location.href||"http://localhost",Z_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Kc,hasStandardBrowserEnv:G_,hasStandardBrowserWebWorkerEnv:V_,navigator:gc,origin:H_},Symbol.toStringTag,{value:"Module"})),Pi={...Z_,...U_};function q_(t,n){return Fl(t,new Pi.classes.URLSearchParams,Object.assign({visitor:function(s,l,h,p){return Pi.isNode&&Et.isBuffer(s)?(this.append(l,s.toString("base64")),!1):p.defaultVisitor.apply(this,arguments)}},n))}function K_(t){return Et.matchAll(/\w+|\[(\w*)]/g,t).map(n=>n[0]==="[]"?"":n[1]||n[0])}function W_(t){const n={},s=Object.keys(t);let l;const h=s.length;let p;for(l=0;l<h;l++)p=s[l],n[p]=t[p];return n}function lp(t){function n(s,l,h,p){let f=s[p++];if(f==="__proto__")return!0;const v=Number.isFinite(+f),y=p>=s.length;return f=!f&&Et.isArray(h)?h.length:f,y?(Et.hasOwnProp(h,f)?h[f]=[h[f],l]:h[f]=l,!v):((!h[f]||!Et.isObject(h[f]))&&(h[f]=[]),n(s,l,h[f],p)&&Et.isArray(h[f])&&(h[f]=W_(h[f])),!v)}if(Et.isFormData(t)&&Et.isFunction(t.entries)){const s={};return Et.forEachEntry(t,(l,h)=>{n(K_(l),h,s,0)}),s}return null}function J_(t,n,s){if(Et.isString(t))try{return(n||JSON.parse)(t),Et.trim(t)}catch(l){if(l.name!=="SyntaxError")throw l}return(s||JSON.stringify)(t)}const na={transitional:ap,adapter:["xhr","http","fetch"],transformRequest:[function(n,s){const l=s.getContentType()||"",h=l.indexOf("application/json")>-1,p=Et.isObject(n);if(p&&Et.isHTMLForm(n)&&(n=new FormData(n)),Et.isFormData(n))return h?JSON.stringify(lp(n)):n;if(Et.isArrayBuffer(n)||Et.isBuffer(n)||Et.isStream(n)||Et.isFile(n)||Et.isBlob(n)||Et.isReadableStream(n))return n;if(Et.isArrayBufferView(n))return n.buffer;if(Et.isURLSearchParams(n))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let v;if(p){if(l.indexOf("application/x-www-form-urlencoded")>-1)return q_(n,this.formSerializer).toString();if((v=Et.isFileList(n))||l.indexOf("multipart/form-data")>-1){const y=this.env&&this.env.FormData;return Fl(v?{"files[]":n}:n,y&&new y,this.formSerializer)}}return p||h?(s.setContentType("application/json",!1),J_(n)):n}],transformResponse:[function(n){const s=this.transitional||na.transitional,l=s&&s.forcedJSONParsing,h=this.responseType==="json";if(Et.isResponse(n)||Et.isReadableStream(n))return n;if(n&&Et.isString(n)&&(l&&!this.responseType||h)){const f=!(s&&s.silentJSONParsing)&&h;try{return JSON.parse(n)}catch(v){if(f)throw v.name==="SyntaxError"?we.from(v,we.ERR_BAD_RESPONSE,this,null,this.response):v}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Pi.classes.FormData,Blob:Pi.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Et.forEach(["delete","get","head","post","put","patch"],t=>{na.headers[t]={}});const X_=Et.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Y_=t=>{const n={};let s,l,h;return t&&t.split(`
`).forEach(function(f){h=f.indexOf(":"),s=f.substring(0,h).trim().toLowerCase(),l=f.substring(h+1).trim(),!(!s||n[s]&&X_[s])&&(s==="set-cookie"?n[s]?n[s].push(l):n[s]=[l]:n[s]=n[s]?n[s]+", "+l:l)}),n},qh=Symbol("internals");function So(t){return t&&String(t).trim().toLowerCase()}function el(t){return t===!1||t==null?t:Et.isArray(t)?t.map(el):String(t)}function Q_(t){const n=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let l;for(;l=s.exec(t);)n[l[1]]=l[2];return n}const ty=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function qu(t,n,s,l,h){if(Et.isFunction(l))return l.call(this,n,s);if(h&&(n=s),!!Et.isString(n)){if(Et.isString(l))return n.indexOf(l)!==-1;if(Et.isRegExp(l))return l.test(n)}}function ey(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,s,l)=>s.toUpperCase()+l)}function iy(t,n){const s=Et.toCamelCase(" "+n);["get","set","has"].forEach(l=>{Object.defineProperty(t,l+s,{value:function(h,p,f){return this[l].call(this,n,h,p,f)},configurable:!0})})}let Vi=class{constructor(n){n&&this.set(n)}set(n,s,l){const h=this;function p(v,y,C){const M=So(y);if(!M)throw new Error("header name must be a non-empty string");const P=Et.findKey(h,M);(!P||h[P]===void 0||C===!0||C===void 0&&h[P]!==!1)&&(h[P||y]=el(v))}const f=(v,y)=>Et.forEach(v,(C,M)=>p(C,M,y));if(Et.isPlainObject(n)||n instanceof this.constructor)f(n,s);else if(Et.isString(n)&&(n=n.trim())&&!ty(n))f(Y_(n),s);else if(Et.isHeaders(n))for(const[v,y]of n.entries())p(y,v,l);else n!=null&&p(s,n,l);return this}get(n,s){if(n=So(n),n){const l=Et.findKey(this,n);if(l){const h=this[l];if(!s)return h;if(s===!0)return Q_(h);if(Et.isFunction(s))return s.call(this,h,l);if(Et.isRegExp(s))return s.exec(h);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,s){if(n=So(n),n){const l=Et.findKey(this,n);return!!(l&&this[l]!==void 0&&(!s||qu(this,this[l],l,s)))}return!1}delete(n,s){const l=this;let h=!1;function p(f){if(f=So(f),f){const v=Et.findKey(l,f);v&&(!s||qu(l,l[v],v,s))&&(delete l[v],h=!0)}}return Et.isArray(n)?n.forEach(p):p(n),h}clear(n){const s=Object.keys(this);let l=s.length,h=!1;for(;l--;){const p=s[l];(!n||qu(this,this[p],p,n,!0))&&(delete this[p],h=!0)}return h}normalize(n){const s=this,l={};return Et.forEach(this,(h,p)=>{const f=Et.findKey(l,p);if(f){s[f]=el(h),delete s[p];return}const v=n?ey(p):String(p).trim();v!==p&&delete s[p],s[v]=el(h),l[v]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const s=Object.create(null);return Et.forEach(this,(l,h)=>{l!=null&&l!==!1&&(s[h]=n&&Et.isArray(l)?l.join(", "):l)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,s])=>n+": "+s).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...s){const l=new this(n);return s.forEach(h=>l.set(h)),l}static accessor(n){const l=(this[qh]=this[qh]={accessors:{}}).accessors,h=this.prototype;function p(f){const v=So(f);l[v]||(iy(h,f),l[v]=!0)}return Et.isArray(n)?n.forEach(p):p(n),this}};Vi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Et.reduceDescriptors(Vi.prototype,({value:t},n)=>{let s=n[0].toUpperCase()+n.slice(1);return{get:()=>t,set(l){this[s]=l}}});Et.freezeMethods(Vi);function Ku(t,n){const s=this||na,l=n||s,h=Vi.from(l.headers);let p=l.data;return Et.forEach(t,function(v){p=v.call(s,p,h.normalize(),n?n.status:void 0)}),h.normalize(),p}function up(t){return!!(t&&t.__CANCEL__)}function Vs(t,n,s){we.call(this,t??"canceled",we.ERR_CANCELED,n,s),this.name="CanceledError"}Et.inherits(Vs,we,{__CANCEL__:!0});function cp(t,n,s){const l=s.config.validateStatus;!s.status||!l||l(s.status)?t(s):n(new we("Request failed with status code "+s.status,[we.ERR_BAD_REQUEST,we.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function ny(t){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}function ry(t,n){t=t||10;const s=new Array(t),l=new Array(t);let h=0,p=0,f;return n=n!==void 0?n:1e3,function(y){const C=Date.now(),M=l[p];f||(f=C),s[h]=y,l[h]=C;let P=p,U=0;for(;P!==h;)U+=s[P++],P=P%t;if(h=(h+1)%t,h===p&&(p=(p+1)%t),C-f<n)return;const J=M&&C-M;return J?Math.round(U*1e3/J):void 0}}function sy(t,n){let s=0,l=1e3/n,h,p;const f=(C,M=Date.now())=>{s=M,h=null,p&&(clearTimeout(p),p=null),t.apply(null,C)};return[(...C)=>{const M=Date.now(),P=M-s;P>=l?f(C,M):(h=C,p||(p=setTimeout(()=>{p=null,f(h)},l-P)))},()=>h&&f(h)]}const ml=(t,n,s=3)=>{let l=0;const h=ry(50,250);return sy(p=>{const f=p.loaded,v=p.lengthComputable?p.total:void 0,y=f-l,C=h(y),M=f<=v;l=f;const P={loaded:f,total:v,progress:v?f/v:void 0,bytes:y,rate:C||void 0,estimated:C&&v&&M?(v-f)/C:void 0,event:p,lengthComputable:v!=null,[n?"download":"upload"]:!0};t(P)},s)},Kh=(t,n)=>{const s=t!=null;return[l=>n[0]({lengthComputable:s,total:t,loaded:l}),n[1]]},Wh=t=>(...n)=>Et.asap(()=>t(...n)),oy=Pi.hasStandardBrowserEnv?((t,n)=>s=>(s=new URL(s,Pi.origin),t.protocol===s.protocol&&t.host===s.host&&(n||t.port===s.port)))(new URL(Pi.origin),Pi.navigator&&/(msie|trident)/i.test(Pi.navigator.userAgent)):()=>!0,ay=Pi.hasStandardBrowserEnv?{write(t,n,s,l,h,p){const f=[t+"="+encodeURIComponent(n)];Et.isNumber(s)&&f.push("expires="+new Date(s).toGMTString()),Et.isString(l)&&f.push("path="+l),Et.isString(h)&&f.push("domain="+h),p===!0&&f.push("secure"),document.cookie=f.join("; ")},read(t){const n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function ly(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function uy(t,n){return n?t.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):t}function hp(t,n){return t&&!ly(n)?uy(t,n):n}const Jh=t=>t instanceof Vi?{...t}:t;function Xr(t,n){n=n||{};const s={};function l(C,M,P,U){return Et.isPlainObject(C)&&Et.isPlainObject(M)?Et.merge.call({caseless:U},C,M):Et.isPlainObject(M)?Et.merge({},M):Et.isArray(M)?M.slice():M}function h(C,M,P,U){if(Et.isUndefined(M)){if(!Et.isUndefined(C))return l(void 0,C,P,U)}else return l(C,M,P,U)}function p(C,M){if(!Et.isUndefined(M))return l(void 0,M)}function f(C,M){if(Et.isUndefined(M)){if(!Et.isUndefined(C))return l(void 0,C)}else return l(void 0,M)}function v(C,M,P){if(P in n)return l(C,M);if(P in t)return l(void 0,C)}const y={url:p,method:p,data:p,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:v,headers:(C,M,P)=>h(Jh(C),Jh(M),P,!0)};return Et.forEach(Object.keys(Object.assign({},t,n)),function(M){const P=y[M]||h,U=P(t[M],n[M],M);Et.isUndefined(U)&&P!==v||(s[M]=U)}),s}const dp=t=>{const n=Xr({},t);let{data:s,withXSRFToken:l,xsrfHeaderName:h,xsrfCookieName:p,headers:f,auth:v}=n;n.headers=f=Vi.from(f),n.url=op(hp(n.baseURL,n.url),t.params,t.paramsSerializer),v&&f.set("Authorization","Basic "+btoa((v.username||"")+":"+(v.password?unescape(encodeURIComponent(v.password)):"")));let y;if(Et.isFormData(s)){if(Pi.hasStandardBrowserEnv||Pi.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if((y=f.getContentType())!==!1){const[C,...M]=y?y.split(";").map(P=>P.trim()).filter(Boolean):[];f.setContentType([C||"multipart/form-data",...M].join("; "))}}if(Pi.hasStandardBrowserEnv&&(l&&Et.isFunction(l)&&(l=l(n)),l||l!==!1&&oy(n.url))){const C=h&&p&&ay.read(p);C&&f.set(h,C)}return n},cy=typeof XMLHttpRequest<"u",hy=cy&&function(t){return new Promise(function(s,l){const h=dp(t);let p=h.data;const f=Vi.from(h.headers).normalize();let{responseType:v,onUploadProgress:y,onDownloadProgress:C}=h,M,P,U,J,R;function V(){J&&J(),R&&R(),h.cancelToken&&h.cancelToken.unsubscribe(M),h.signal&&h.signal.removeEventListener("abort",M)}let G=new XMLHttpRequest;G.open(h.method.toUpperCase(),h.url,!0),G.timeout=h.timeout;function _t(){if(!G)return;const pt=Vi.from("getAllResponseHeaders"in G&&G.getAllResponseHeaders()),Ut={data:!v||v==="text"||v==="json"?G.responseText:G.response,status:G.status,statusText:G.statusText,headers:pt,config:t,request:G};cp(function(nt){s(nt),V()},function(nt){l(nt),V()},Ut),G=null}"onloadend"in G?G.onloadend=_t:G.onreadystatechange=function(){!G||G.readyState!==4||G.status===0&&!(G.responseURL&&G.responseURL.indexOf("file:")===0)||setTimeout(_t)},G.onabort=function(){G&&(l(new we("Request aborted",we.ECONNABORTED,t,G)),G=null)},G.onerror=function(){l(new we("Network Error",we.ERR_NETWORK,t,G)),G=null},G.ontimeout=function(){let At=h.timeout?"timeout of "+h.timeout+"ms exceeded":"timeout exceeded";const Ut=h.transitional||ap;h.timeoutErrorMessage&&(At=h.timeoutErrorMessage),l(new we(At,Ut.clarifyTimeoutError?we.ETIMEDOUT:we.ECONNABORTED,t,G)),G=null},p===void 0&&f.setContentType(null),"setRequestHeader"in G&&Et.forEach(f.toJSON(),function(At,Ut){G.setRequestHeader(Ut,At)}),Et.isUndefined(h.withCredentials)||(G.withCredentials=!!h.withCredentials),v&&v!=="json"&&(G.responseType=h.responseType),C&&([U,R]=ml(C,!0),G.addEventListener("progress",U)),y&&G.upload&&([P,J]=ml(y),G.upload.addEventListener("progress",P),G.upload.addEventListener("loadend",J)),(h.cancelToken||h.signal)&&(M=pt=>{G&&(l(!pt||pt.type?new Vs(null,t,G):pt),G.abort(),G=null)},h.cancelToken&&h.cancelToken.subscribe(M),h.signal&&(h.signal.aborted?M():h.signal.addEventListener("abort",M)));const kt=ny(h.url);if(kt&&Pi.protocols.indexOf(kt)===-1){l(new we("Unsupported protocol "+kt+":",we.ERR_BAD_REQUEST,t));return}G.send(p||null)})},dy=(t,n)=>{const{length:s}=t=t?t.filter(Boolean):[];if(n||s){let l=new AbortController,h;const p=function(C){if(!h){h=!0,v();const M=C instanceof Error?C:this.reason;l.abort(M instanceof we?M:new Vs(M instanceof Error?M.message:M))}};let f=n&&setTimeout(()=>{f=null,p(new we(`timeout ${n} of ms exceeded`,we.ETIMEDOUT))},n);const v=()=>{t&&(f&&clearTimeout(f),f=null,t.forEach(C=>{C.unsubscribe?C.unsubscribe(p):C.removeEventListener("abort",p)}),t=null)};t.forEach(C=>C.addEventListener("abort",p));const{signal:y}=l;return y.unsubscribe=()=>Et.asap(v),y}},fy=function*(t,n){let s=t.byteLength;if(s<n){yield t;return}let l=0,h;for(;l<s;)h=l+n,yield t.slice(l,h),l=h},py=async function*(t,n){for await(const s of my(t))yield*fy(s,n)},my=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const n=t.getReader();try{for(;;){const{done:s,value:l}=await n.read();if(s)break;yield l}}finally{await n.cancel()}},Xh=(t,n,s,l)=>{const h=py(t,n);let p=0,f,v=y=>{f||(f=!0,l&&l(y))};return new ReadableStream({async pull(y){try{const{done:C,value:M}=await h.next();if(C){v(),y.close();return}let P=M.byteLength;if(s){let U=p+=P;s(U)}y.enqueue(new Uint8Array(M))}catch(C){throw v(C),C}},cancel(y){return v(y),h.return()}},{highWaterMark:2})},zl=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",fp=zl&&typeof ReadableStream=="function",gy=zl&&(typeof TextEncoder=="function"?(t=>n=>t.encode(n))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),pp=(t,...n)=>{try{return!!t(...n)}catch{return!1}},_y=fp&&pp(()=>{let t=!1;const n=new Request(Pi.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!n}),Yh=64*1024,_c=fp&&pp(()=>Et.isReadableStream(new Response("").body)),gl={stream:_c&&(t=>t.body)};zl&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(n=>{!gl[n]&&(gl[n]=Et.isFunction(t[n])?s=>s[n]():(s,l)=>{throw new we(`Response type '${n}' is not supported`,we.ERR_NOT_SUPPORT,l)})})})(new Response);const yy=async t=>{if(t==null)return 0;if(Et.isBlob(t))return t.size;if(Et.isSpecCompliantForm(t))return(await new Request(Pi.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Et.isArrayBufferView(t)||Et.isArrayBuffer(t))return t.byteLength;if(Et.isURLSearchParams(t)&&(t=t+""),Et.isString(t))return(await gy(t)).byteLength},vy=async(t,n)=>{const s=Et.toFiniteNumber(t.getContentLength());return s??yy(n)},by=zl&&(async t=>{let{url:n,method:s,data:l,signal:h,cancelToken:p,timeout:f,onDownloadProgress:v,onUploadProgress:y,responseType:C,headers:M,withCredentials:P="same-origin",fetchOptions:U}=dp(t);C=C?(C+"").toLowerCase():"text";let J=dy([h,p&&p.toAbortSignal()],f),R;const V=J&&J.unsubscribe&&(()=>{J.unsubscribe()});let G;try{if(y&&_y&&s!=="get"&&s!=="head"&&(G=await vy(M,l))!==0){let Ut=new Request(n,{method:"POST",body:l,duplex:"half"}),Y;if(Et.isFormData(l)&&(Y=Ut.headers.get("content-type"))&&M.setContentType(Y),Ut.body){const[nt,z]=Kh(G,ml(Wh(y)));l=Xh(Ut.body,Yh,nt,z)}}Et.isString(P)||(P=P?"include":"omit");const _t="credentials"in Request.prototype;R=new Request(n,{...U,signal:J,method:s.toUpperCase(),headers:M.normalize().toJSON(),body:l,duplex:"half",credentials:_t?P:void 0});let kt=await fetch(R);const pt=_c&&(C==="stream"||C==="response");if(_c&&(v||pt&&V)){const Ut={};["status","statusText","headers"].forEach(rt=>{Ut[rt]=kt[rt]});const Y=Et.toFiniteNumber(kt.headers.get("content-length")),[nt,z]=v&&Kh(Y,ml(Wh(v),!0))||[];kt=new Response(Xh(kt.body,Yh,nt,()=>{z&&z(),V&&V()}),Ut)}C=C||"text";let At=await gl[Et.findKey(gl,C)||"text"](kt,t);return!pt&&V&&V(),await new Promise((Ut,Y)=>{cp(Ut,Y,{data:At,headers:Vi.from(kt.headers),status:kt.status,statusText:kt.statusText,config:t,request:R})})}catch(_t){throw V&&V(),_t&&_t.name==="TypeError"&&/fetch/i.test(_t.message)?Object.assign(new we("Network Error",we.ERR_NETWORK,t,R),{cause:_t.cause||_t}):we.from(_t,_t&&_t.code,t,R)}}),yc={http:O_,xhr:hy,fetch:by};Et.forEach(yc,(t,n)=>{if(t){try{Object.defineProperty(t,"name",{value:n})}catch{}Object.defineProperty(t,"adapterName",{value:n})}});const Qh=t=>`- ${t}`,xy=t=>Et.isFunction(t)||t===null||t===!1,mp={getAdapter:t=>{t=Et.isArray(t)?t:[t];const{length:n}=t;let s,l;const h={};for(let p=0;p<n;p++){s=t[p];let f;if(l=s,!xy(s)&&(l=yc[(f=String(s)).toLowerCase()],l===void 0))throw new we(`Unknown adapter '${f}'`);if(l)break;h[f||"#"+p]=l}if(!l){const p=Object.entries(h).map(([v,y])=>`adapter ${v} `+(y===!1?"is not supported by the environment":"is not available in the build"));let f=n?p.length>1?`since :
`+p.map(Qh).join(`
`):" "+Qh(p[0]):"as no adapter specified";throw new we("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return l},adapters:yc};function Wu(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Vs(null,t)}function td(t){return Wu(t),t.headers=Vi.from(t.headers),t.data=Ku.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),mp.getAdapter(t.adapter||na.adapter)(t).then(function(l){return Wu(t),l.data=Ku.call(t,t.transformResponse,l),l.headers=Vi.from(l.headers),l},function(l){return up(l)||(Wu(t),l&&l.response&&(l.response.data=Ku.call(t,t.transformResponse,l.response),l.response.headers=Vi.from(l.response.headers))),Promise.reject(l)})}const gp="1.7.9",Nl={};["object","boolean","number","function","string","symbol"].forEach((t,n)=>{Nl[t]=function(l){return typeof l===t||"a"+(n<1?"n ":" ")+t}});const ed={};Nl.transitional=function(n,s,l){function h(p,f){return"[Axios v"+gp+"] Transitional option '"+p+"'"+f+(l?". "+l:"")}return(p,f,v)=>{if(n===!1)throw new we(h(f," has been removed"+(s?" in "+s:"")),we.ERR_DEPRECATED);return s&&!ed[f]&&(ed[f]=!0,console.warn(h(f," has been deprecated since v"+s+" and will be removed in the near future"))),n?n(p,f,v):!0}};Nl.spelling=function(n){return(s,l)=>(console.warn(`${l} is likely a misspelling of ${n}`),!0)};function wy(t,n,s){if(typeof t!="object")throw new we("options must be an object",we.ERR_BAD_OPTION_VALUE);const l=Object.keys(t);let h=l.length;for(;h-- >0;){const p=l[h],f=n[p];if(f){const v=t[p],y=v===void 0||f(v,p,t);if(y!==!0)throw new we("option "+p+" must be "+y,we.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new we("Unknown option "+p,we.ERR_BAD_OPTION)}}const il={assertOptions:wy,validators:Nl},Tn=il.validators;let Zr=class{constructor(n){this.defaults=n,this.interceptors={request:new Zh,response:new Zh}}async request(n,s){try{return await this._request(n,s)}catch(l){if(l instanceof Error){let h={};Error.captureStackTrace?Error.captureStackTrace(h):h=new Error;const p=h.stack?h.stack.replace(/^.+\n/,""):"";try{l.stack?p&&!String(l.stack).endsWith(p.replace(/^.+\n.+\n/,""))&&(l.stack+=`
`+p):l.stack=p}catch{}}throw l}}_request(n,s){typeof n=="string"?(s=s||{},s.url=n):s=n||{},s=Xr(this.defaults,s);const{transitional:l,paramsSerializer:h,headers:p}=s;l!==void 0&&il.assertOptions(l,{silentJSONParsing:Tn.transitional(Tn.boolean),forcedJSONParsing:Tn.transitional(Tn.boolean),clarifyTimeoutError:Tn.transitional(Tn.boolean)},!1),h!=null&&(Et.isFunction(h)?s.paramsSerializer={serialize:h}:il.assertOptions(h,{encode:Tn.function,serialize:Tn.function},!0)),il.assertOptions(s,{baseUrl:Tn.spelling("baseURL"),withXsrfToken:Tn.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let f=p&&Et.merge(p.common,p[s.method]);p&&Et.forEach(["delete","get","head","post","put","patch","common"],R=>{delete p[R]}),s.headers=Vi.concat(f,p);const v=[];let y=!0;this.interceptors.request.forEach(function(V){typeof V.runWhen=="function"&&V.runWhen(s)===!1||(y=y&&V.synchronous,v.unshift(V.fulfilled,V.rejected))});const C=[];this.interceptors.response.forEach(function(V){C.push(V.fulfilled,V.rejected)});let M,P=0,U;if(!y){const R=[td.bind(this),void 0];for(R.unshift.apply(R,v),R.push.apply(R,C),U=R.length,M=Promise.resolve(s);P<U;)M=M.then(R[P++],R[P++]);return M}U=v.length;let J=s;for(P=0;P<U;){const R=v[P++],V=v[P++];try{J=R(J)}catch(G){V.call(this,G);break}}try{M=td.call(this,J)}catch(R){return Promise.reject(R)}for(P=0,U=C.length;P<U;)M=M.then(C[P++],C[P++]);return M}getUri(n){n=Xr(this.defaults,n);const s=hp(n.baseURL,n.url);return op(s,n.params,n.paramsSerializer)}};Et.forEach(["delete","get","head","options"],function(n){Zr.prototype[n]=function(s,l){return this.request(Xr(l||{},{method:n,url:s,data:(l||{}).data}))}});Et.forEach(["post","put","patch"],function(n){function s(l){return function(p,f,v){return this.request(Xr(v||{},{method:n,headers:l?{"Content-Type":"multipart/form-data"}:{},url:p,data:f}))}}Zr.prototype[n]=s(),Zr.prototype[n+"Form"]=s(!0)});let Ly=class _p{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(p){s=p});const l=this;this.promise.then(h=>{if(!l._listeners)return;let p=l._listeners.length;for(;p-- >0;)l._listeners[p](h);l._listeners=null}),this.promise.then=h=>{let p;const f=new Promise(v=>{l.subscribe(v),p=v}).then(h);return f.cancel=function(){l.unsubscribe(p)},f},n(function(p,f,v){l.reason||(l.reason=new Vs(p,f,v),s(l.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const s=this._listeners.indexOf(n);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const n=new AbortController,s=l=>{n.abort(l)};return this.subscribe(s),n.signal.unsubscribe=()=>this.unsubscribe(s),n.signal}static source(){let n;return{token:new _p(function(h){n=h}),cancel:n}}};function Cy(t){return function(s){return t.apply(null,s)}}function Ey(t){return Et.isObject(t)&&t.isAxiosError===!0}const vc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(vc).forEach(([t,n])=>{vc[n]=t});function yp(t){const n=new Zr(t),s=Kf(Zr.prototype.request,n);return Et.extend(s,Zr.prototype,n,{allOwnKeys:!0}),Et.extend(s,n,null,{allOwnKeys:!0}),s.create=function(h){return yp(Xr(t,h))},s}const ri=yp(na);ri.Axios=Zr;ri.CanceledError=Vs;ri.CancelToken=Ly;ri.isCancel=up;ri.VERSION=gp;ri.toFormData=Fl;ri.AxiosError=we;ri.Cancel=ri.CanceledError;ri.all=function(n){return Promise.all(n)};ri.spread=Cy;ri.isAxiosError=Ey;ri.mergeConfig=Xr;ri.AxiosHeaders=Vi;ri.formToJSON=t=>lp(Et.isHTMLForm(t)?new FormData(t):t);ri.getAdapter=mp.getAdapter;ri.HttpStatusCode=vc;ri.default=ri;const{Axios:mL,AxiosError:gL,CanceledError:_L,isCancel:yL,CancelToken:vL,VERSION:bL,all:xL,Cancel:wL,isAxiosError:LL,spread:CL,toFormData:EL,AxiosHeaders:kL,HttpStatusCode:ML,formToJSON:PL,getAdapter:SL,mergeConfig:BL}=ri,Ce=ri.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});function vp(t){var l;const s=`; ${document.cookie}`.split(`; ${t}=`);return s.length===2&&((l=s.pop())==null?void 0:l.split(";").shift())||null}Ce.interceptors.request.use(t=>{const n=vp("access_token");return n&&(t.headers.Authorization=`Bearer ${n}`),console.log("Request config:",{url:t.url,method:t.method,headers:t.headers,withCredentials:t.withCredentials}),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));Ce.interceptors.response.use(t=>t,async t=>{var s;const n=t.config;if(((s=t.response)==null?void 0:s.status)===401&&!n._retry){n._retry=!0;try{await Hi().refreshToken();const h=vp("access_token");if(h)return n.headers.Authorization=`Bearer ${h}`,Ce(n)}catch(l){console.error("Token refresh failed:",l),window.location.href="/login"}}return Promise.reject(t)});Ce.defaults.baseURL="/api";Ce.defaults.headers.common["Content-Type"]="application/json";Ce.defaults.withCredentials=!0;function _l(t){var l;const s=`; ${document.cookie}`.split(`; ${t}=`);return s.length===2&&((l=s.pop())==null?void 0:l.split(";").shift())||null}Ce.interceptors.request.use(t=>{const n=_l("access_token");return n&&(t.headers.Authorization=`Bearer ${n}`),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));Ce.interceptors.response.use(t=>t,async t=>{var l,h;const n=Hi(),s=t.config;if(((l=t.response)==null?void 0:l.status)===401&&!s._retry&&!((h=s.url)!=null&&h.includes("/token/refresh/"))){s._retry=!0;try{if(!_l("access_token"))throw new Error("No token available");await n.refreshToken();const f=_l("access_token");if(f)return s.headers.Authorization=`Bearer ${f}`,Ce(s)}catch(p){console.error("Token refresh failed:",p),await n.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(t)});function ky(t,n,s=1){const l=new Date;l.setTime(l.getTime()+s*24*60*60*1e3);const h=`expires=${l.toUTCString()}`;document.cookie=`${t}=${n};${h};path=/;secure;samesite=Strict`}const Hi=Hc("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,concessionnaires:[]}),getters:{isAdmin:t=>{var n;return((n=t.user)==null?void 0:n.user_type)==="admin"},isDealer:t=>{var n;return((n=t.user)==null?void 0:n.user_type)==="dealer"},isClient:t=>{var n;return((n=t.user)==null?void 0:n.user_type)==="client"},currentUser:t=>t.user,hasDealer:t=>{var n;return!!((n=t.user)!=null&&n.dealer)}},actions:{async initialize(t){if(console.log("Initializing auth store with state:",t),!t){console.log("No initial state, attempting to restore session...");const s=await this.restoreSession();return this.initialized=!0,s}if(t.isAuthenticated&&t.user)return this.user=t.user,this.isAuthenticated=!0,this.mustChangePassword=t.user.must_change_password||!1,this.initialized=!0,!0;const n=await this.restoreSession();return this.initialized=!0,n},async restoreSession(){console.log("Attempting to restore session...");try{if(!_l("access_token"))return console.log("No token found, skipping session restore"),this.isAuthenticated=!1,this.user=null,!1;const n=await Ce.post("/token/refresh/");return n.data.user?(this.user=n.data.user,this.isAuthenticated=!0,this.mustChangePassword=n.data.user.must_change_password||!1,console.log("Session restored successfully"),!0):(await this.fetchUserProfile(),!0)}catch(t){return console.error("Failed to restore session:",t),this.isAuthenticated=!1,this.user=null,!1}},async login(t,n){var s,l,h;try{const p=await Ce.post("/token/",{username:t,password:n});if(!p.data.access)throw new Error("Token d'accès non reçu");document.cookie=`access_token=${p.data.access}; path=/; secure; samesite=Strict`;const f=await this.fetchUserProfile();return this.user=f,this.isAuthenticated=!0,!0}catch(p){throw this.isAuthenticated=!1,this.user=null,((s=p.response)==null?void 0:s.status)===401?new Error("Identifiants incorrects"):(h=(l=p.response)==null?void 0:l.data)!=null&&h.detail?new Error(p.response.data.detail):p}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const t=await Ce.get("/users/me/");return this.user=t.data,this.isAuthenticated=!0,this.mustChangePassword=t.data.must_change_password||!1,t.data}catch(t){throw this.isAuthenticated=!1,this.user=null,t}},async changePassword(t,n){try{console.log("Attempting to change password...");const s=await Ce.post("/users/change_password/",{old_password:t,password:n});return console.log("Password change response:",s.data),this.user={...this.user,must_change_password:!1},s.data}catch(s){throw console.error("Password change error:",s),s}},async refreshToken(){var t,n,s,l;try{console.log("Attempting to refresh token...");const h=await Ce.post("/token/refresh/",{},{withCredentials:!0}),{access:p}=h.data;if(!p)throw new Error("No access token received");return console.log("Token refreshed successfully"),ky("access_token",p,1),this.isAuthenticated=!0,p}catch(h){throw console.error("Error refreshing token:",{status:(t=h.response)==null?void 0:t.status,data:(n=h.response)==null?void 0:n.data}),(((s=h.response)==null?void 0:s.status)===401||((l=h.response)==null?void 0:l.status)===403)&&(console.log("Token refresh failed with auth error, logging out"),await this.logout()),h}},async fetchConcessionnaires(){this.loading=!0;try{const t=await Ce.get("/users/",{params:{role:"dealer"}});this.concessionnaires=t.data}catch(t){throw this.error="Erreur lors de la récupération des concessionnaires",t}finally{this.loading=!1}},async setConcessionnaire(t,n){this.loading=!0;try{await Ce.patch(`/users/${t}/`,{concessionnaire:n}),this.user&&this.user.id===t&&(this.user.dealer=n)}catch(s){throw this.error="Erreur lors de la mise à jour du concessionnaire",s}finally{this.loading=!1}},async createUser(t){this.loading=!0;try{return(await Ce.post("/users/",t)).data}catch(n){throw this.error="Erreur lors de la création de l'utilisateur",n}finally{this.loading=!1}},async updateUserRole(t,n){this.loading=!0;try{const s=await Ce.patch(`/users/${t}/`,{role:n});return this.user&&this.user.id===t&&(this.user.user_type=n),s.data}catch(s){throw this.error="Erreur lors de la mise à jour du rôle",s}finally{this.loading=!1}},async updateUserEmail(t){var n;this.loading=!0;try{const s=await Ce.patch(`/users/${(n=this.user)==null?void 0:n.id}/`,{email:t});return this.user&&(this.user.email=t),s.data}catch(s){throw this.error="Erreur lors de la mise à jour de l'email",s}finally{this.loading=!1}},checkAccess(t){return this.user?t.includes(this.user.user_type):!1}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Bs=typeof document<"u";function bp(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function My(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&bp(t.default)}const Fe=Object.assign;function Ju(t,n){const s={};for(const l in n){const h=n[l];s[l]=xn(h)?h.map(t):t(h)}return s}const Uo=()=>{},xn=Array.isArray,xp=/#/g,Py=/&/g,Sy=/\//g,By=/=/g,Ay=/\?/g,wp=/\+/g,Ty=/%5B/g,Dy=/%5D/g,Lp=/%5E/g,Ry=/%60/g,Cp=/%7B/g,Oy=/%7C/g,Ep=/%7D/g,Iy=/%20/g;function Wc(t){return encodeURI(""+t).replace(Oy,"|").replace(Ty,"[").replace(Dy,"]")}function Fy(t){return Wc(t).replace(Cp,"{").replace(Ep,"}").replace(Lp,"^")}function bc(t){return Wc(t).replace(wp,"%2B").replace(Iy,"+").replace(xp,"%23").replace(Py,"%26").replace(Ry,"`").replace(Cp,"{").replace(Ep,"}").replace(Lp,"^")}function zy(t){return bc(t).replace(By,"%3D")}function Ny(t){return Wc(t).replace(xp,"%23").replace(Ay,"%3F")}function $y(t){return t==null?"":Ny(t).replace(Sy,"%2F")}function Jo(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const jy=/\/$/,Uy=t=>t.replace(jy,"");function Xu(t,n,s="/"){let l,h={},p="",f="";const v=n.indexOf("#");let y=n.indexOf("?");return v<y&&v>=0&&(y=-1),y>-1&&(l=n.slice(0,y),p=n.slice(y+1,v>-1?v:n.length),h=t(p)),v>-1&&(l=l||n.slice(0,v),f=n.slice(v,n.length)),l=Zy(l??n,s),{fullPath:l+(p&&"?")+p+f,path:l,query:h,hash:Jo(f)}}function Gy(t,n){const s=n.query?t(n.query):"";return n.path+(s&&"?")+s+(n.hash||"")}function id(t,n){return!n||!t.toLowerCase().startsWith(n.toLowerCase())?t:t.slice(n.length)||"/"}function Vy(t,n,s){const l=n.matched.length-1,h=s.matched.length-1;return l>-1&&l===h&&$s(n.matched[l],s.matched[h])&&kp(n.params,s.params)&&t(n.query)===t(s.query)&&n.hash===s.hash}function $s(t,n){return(t.aliasOf||t)===(n.aliasOf||n)}function kp(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const s in t)if(!Hy(t[s],n[s]))return!1;return!0}function Hy(t,n){return xn(t)?nd(t,n):xn(n)?nd(n,t):t===n}function nd(t,n){return xn(n)?t.length===n.length&&t.every((s,l)=>s===n[l]):t.length===1&&t[0]===n}function Zy(t,n){if(t.startsWith("/"))return t;if(!t)return n;const s=n.split("/"),l=t.split("/"),h=l[l.length-1];(h===".."||h===".")&&l.push("");let p=s.length-1,f,v;for(f=0;f<l.length;f++)if(v=l[f],v!==".")if(v==="..")p>1&&p--;else break;return s.slice(0,p).join("/")+"/"+l.slice(f).join("/")}const mr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Xo;(function(t){t.pop="pop",t.push="push"})(Xo||(Xo={}));var Go;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Go||(Go={}));function qy(t){if(!t)if(Bs){const n=document.querySelector("base");t=n&&n.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Uy(t)}const Ky=/^[^#]+#/;function Wy(t,n){return t.replace(Ky,"#")+n}function Jy(t,n){const s=document.documentElement.getBoundingClientRect(),l=t.getBoundingClientRect();return{behavior:n.behavior,left:l.left-s.left-(n.left||0),top:l.top-s.top-(n.top||0)}}const $l=()=>({left:window.scrollX,top:window.scrollY});function Xy(t){let n;if("el"in t){const s=t.el,l=typeof s=="string"&&s.startsWith("#"),h=typeof s=="string"?l?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!h)return;n=Jy(h,t)}else n=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.scrollX,n.top!=null?n.top:window.scrollY)}function rd(t,n){return(history.state?history.state.position-n:-1)+t}const xc=new Map;function Yy(t,n){xc.set(t,n)}function Qy(t){const n=xc.get(t);return xc.delete(t),n}let tv=()=>location.protocol+"//"+location.host;function Mp(t,n){const{pathname:s,search:l,hash:h}=n,p=t.indexOf("#");if(p>-1){let v=h.includes(t.slice(p))?t.slice(p).length:1,y=h.slice(v);return y[0]!=="/"&&(y="/"+y),id(y,"")}return id(s,t)+l+h}function ev(t,n,s,l){let h=[],p=[],f=null;const v=({state:U})=>{const J=Mp(t,location),R=s.value,V=n.value;let G=0;if(U){if(s.value=J,n.value=U,f&&f===R){f=null;return}G=V?U.position-V.position:0}else l(J);h.forEach(_t=>{_t(s.value,R,{delta:G,type:Xo.pop,direction:G?G>0?Go.forward:Go.back:Go.unknown})})};function y(){f=s.value}function C(U){h.push(U);const J=()=>{const R=h.indexOf(U);R>-1&&h.splice(R,1)};return p.push(J),J}function M(){const{history:U}=window;U.state&&U.replaceState(Fe({},U.state,{scroll:$l()}),"")}function P(){for(const U of p)U();p=[],window.removeEventListener("popstate",v),window.removeEventListener("beforeunload",M)}return window.addEventListener("popstate",v),window.addEventListener("beforeunload",M,{passive:!0}),{pauseListeners:y,listen:C,destroy:P}}function sd(t,n,s,l=!1,h=!1){return{back:t,current:n,forward:s,replaced:l,position:window.history.length,scroll:h?$l():null}}function iv(t){const{history:n,location:s}=window,l={value:Mp(t,s)},h={value:n.state};h.value||p(l.value,{back:null,current:l.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function p(y,C,M){const P=t.indexOf("#"),U=P>-1?(s.host&&document.querySelector("base")?t:t.slice(P))+y:tv()+t+y;try{n[M?"replaceState":"pushState"](C,"",U),h.value=C}catch(J){console.error(J),s[M?"replace":"assign"](U)}}function f(y,C){const M=Fe({},n.state,sd(h.value.back,y,h.value.forward,!0),C,{position:h.value.position});p(y,M,!0),l.value=y}function v(y,C){const M=Fe({},h.value,n.state,{forward:y,scroll:$l()});p(M.current,M,!0);const P=Fe({},sd(l.value,y,null),{position:M.position+1},C);p(y,P,!1),l.value=y}return{location:l,state:h,push:v,replace:f}}function nv(t){t=qy(t);const n=iv(t),s=ev(t,n.state,n.location,n.replace);function l(p,f=!0){f||s.pauseListeners(),history.go(p)}const h=Fe({location:"",base:t,go:l,createHref:Wy.bind(null,t)},n,s);return Object.defineProperty(h,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(h,"state",{enumerable:!0,get:()=>n.state.value}),h}function rv(t){return typeof t=="string"||t&&typeof t=="object"}function Pp(t){return typeof t=="string"||typeof t=="symbol"}const Sp=Symbol("");var od;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(od||(od={}));function js(t,n){return Fe(new Error,{type:t,[Sp]:!0},n)}function Jn(t,n){return t instanceof Error&&Sp in t&&(n==null||!!(t.type&n))}const ad="[^/]+?",sv={sensitive:!1,strict:!1,start:!0,end:!0},ov=/[.+*?^${}()[\]/\\]/g;function av(t,n){const s=Fe({},sv,n),l=[];let h=s.start?"^":"";const p=[];for(const C of t){const M=C.length?[]:[90];s.strict&&!C.length&&(h+="/");for(let P=0;P<C.length;P++){const U=C[P];let J=40+(s.sensitive?.25:0);if(U.type===0)P||(h+="/"),h+=U.value.replace(ov,"\\$&"),J+=40;else if(U.type===1){const{value:R,repeatable:V,optional:G,regexp:_t}=U;p.push({name:R,repeatable:V,optional:G});const kt=_t||ad;if(kt!==ad){J+=10;try{new RegExp(`(${kt})`)}catch(At){throw new Error(`Invalid custom RegExp for param "${R}" (${kt}): `+At.message)}}let pt=V?`((?:${kt})(?:/(?:${kt}))*)`:`(${kt})`;P||(pt=G&&C.length<2?`(?:/${pt})`:"/"+pt),G&&(pt+="?"),h+=pt,J+=20,G&&(J+=-8),V&&(J+=-20),kt===".*"&&(J+=-50)}M.push(J)}l.push(M)}if(s.strict&&s.end){const C=l.length-1;l[C][l[C].length-1]+=.7000000000000001}s.strict||(h+="/?"),s.end?h+="$":s.strict&&!h.endsWith("/")&&(h+="(?:/|$)");const f=new RegExp(h,s.sensitive?"":"i");function v(C){const M=C.match(f),P={};if(!M)return null;for(let U=1;U<M.length;U++){const J=M[U]||"",R=p[U-1];P[R.name]=J&&R.repeatable?J.split("/"):J}return P}function y(C){let M="",P=!1;for(const U of t){(!P||!M.endsWith("/"))&&(M+="/"),P=!1;for(const J of U)if(J.type===0)M+=J.value;else if(J.type===1){const{value:R,repeatable:V,optional:G}=J,_t=R in C?C[R]:"";if(xn(_t)&&!V)throw new Error(`Provided param "${R}" is an array but it is not repeatable (* or + modifiers)`);const kt=xn(_t)?_t.join("/"):_t;if(!kt)if(G)U.length<2&&(M.endsWith("/")?M=M.slice(0,-1):P=!0);else throw new Error(`Missing required param "${R}"`);M+=kt}}return M||"/"}return{re:f,score:l,keys:p,parse:v,stringify:y}}function lv(t,n){let s=0;for(;s<t.length&&s<n.length;){const l=n[s]-t[s];if(l)return l;s++}return t.length<n.length?t.length===1&&t[0]===80?-1:1:t.length>n.length?n.length===1&&n[0]===80?1:-1:0}function Bp(t,n){let s=0;const l=t.score,h=n.score;for(;s<l.length&&s<h.length;){const p=lv(l[s],h[s]);if(p)return p;s++}if(Math.abs(h.length-l.length)===1){if(ld(l))return 1;if(ld(h))return-1}return h.length-l.length}function ld(t){const n=t[t.length-1];return t.length>0&&n[n.length-1]<0}const uv={type:0,value:""},cv=/[a-zA-Z0-9_]/;function hv(t){if(!t)return[[]];if(t==="/")return[[uv]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function n(J){throw new Error(`ERR (${s})/"${C}": ${J}`)}let s=0,l=s;const h=[];let p;function f(){p&&h.push(p),p=[]}let v=0,y,C="",M="";function P(){C&&(s===0?p.push({type:0,value:C}):s===1||s===2||s===3?(p.length>1&&(y==="*"||y==="+")&&n(`A repeatable param (${C}) must be alone in its segment. eg: '/:ids+.`),p.push({type:1,value:C,regexp:M,repeatable:y==="*"||y==="+",optional:y==="*"||y==="?"})):n("Invalid state to consume buffer"),C="")}function U(){C+=y}for(;v<t.length;){if(y=t[v++],y==="\\"&&s!==2){l=s,s=4;continue}switch(s){case 0:y==="/"?(C&&P(),f()):y===":"?(P(),s=1):U();break;case 4:U(),s=l;break;case 1:y==="("?s=2:cv.test(y)?U():(P(),s=0,y!=="*"&&y!=="?"&&y!=="+"&&v--);break;case 2:y===")"?M[M.length-1]=="\\"?M=M.slice(0,-1)+y:s=3:M+=y;break;case 3:P(),s=0,y!=="*"&&y!=="?"&&y!=="+"&&v--,M="";break;default:n("Unknown state");break}}return s===2&&n(`Unfinished custom RegExp for param "${C}"`),P(),f(),h}function dv(t,n,s){const l=av(hv(t.path),s),h=Fe(l,{record:t,parent:n,children:[],alias:[]});return n&&!h.record.aliasOf==!n.record.aliasOf&&n.children.push(h),h}function fv(t,n){const s=[],l=new Map;n=dd({strict:!1,end:!0,sensitive:!1},n);function h(P){return l.get(P)}function p(P,U,J){const R=!J,V=cd(P);V.aliasOf=J&&J.record;const G=dd(n,P),_t=[V];if("alias"in P){const At=typeof P.alias=="string"?[P.alias]:P.alias;for(const Ut of At)_t.push(cd(Fe({},V,{components:J?J.record.components:V.components,path:Ut,aliasOf:J?J.record:V})))}let kt,pt;for(const At of _t){const{path:Ut}=At;if(U&&Ut[0]!=="/"){const Y=U.record.path,nt=Y[Y.length-1]==="/"?"":"/";At.path=U.record.path+(Ut&&nt+Ut)}if(kt=dv(At,U,G),J?J.alias.push(kt):(pt=pt||kt,pt!==kt&&pt.alias.push(kt),R&&P.name&&!hd(kt)&&f(P.name)),Ap(kt)&&y(kt),V.children){const Y=V.children;for(let nt=0;nt<Y.length;nt++)p(Y[nt],kt,J&&J.children[nt])}J=J||kt}return pt?()=>{f(pt)}:Uo}function f(P){if(Pp(P)){const U=l.get(P);U&&(l.delete(P),s.splice(s.indexOf(U),1),U.children.forEach(f),U.alias.forEach(f))}else{const U=s.indexOf(P);U>-1&&(s.splice(U,1),P.record.name&&l.delete(P.record.name),P.children.forEach(f),P.alias.forEach(f))}}function v(){return s}function y(P){const U=gv(P,s);s.splice(U,0,P),P.record.name&&!hd(P)&&l.set(P.record.name,P)}function C(P,U){let J,R={},V,G;if("name"in P&&P.name){if(J=l.get(P.name),!J)throw js(1,{location:P});G=J.record.name,R=Fe(ud(U.params,J.keys.filter(pt=>!pt.optional).concat(J.parent?J.parent.keys.filter(pt=>pt.optional):[]).map(pt=>pt.name)),P.params&&ud(P.params,J.keys.map(pt=>pt.name))),V=J.stringify(R)}else if(P.path!=null)V=P.path,J=s.find(pt=>pt.re.test(V)),J&&(R=J.parse(V),G=J.record.name);else{if(J=U.name?l.get(U.name):s.find(pt=>pt.re.test(U.path)),!J)throw js(1,{location:P,currentLocation:U});G=J.record.name,R=Fe({},U.params,P.params),V=J.stringify(R)}const _t=[];let kt=J;for(;kt;)_t.unshift(kt.record),kt=kt.parent;return{name:G,path:V,params:R,matched:_t,meta:mv(_t)}}t.forEach(P=>p(P));function M(){s.length=0,l.clear()}return{addRoute:p,resolve:C,removeRoute:f,clearRoutes:M,getRoutes:v,getRecordMatcher:h}}function ud(t,n){const s={};for(const l of n)l in t&&(s[l]=t[l]);return s}function cd(t){const n={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:pv(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(n,"mods",{value:{}}),n}function pv(t){const n={},s=t.props||!1;if("component"in t)n.default=s;else for(const l in t.components)n[l]=typeof s=="object"?s[l]:s;return n}function hd(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function mv(t){return t.reduce((n,s)=>Fe(n,s.meta),{})}function dd(t,n){const s={};for(const l in t)s[l]=l in n?n[l]:t[l];return s}function gv(t,n){let s=0,l=n.length;for(;s!==l;){const p=s+l>>1;Bp(t,n[p])<0?l=p:s=p+1}const h=_v(t);return h&&(l=n.lastIndexOf(h,l-1)),l}function _v(t){let n=t;for(;n=n.parent;)if(Ap(n)&&Bp(t,n)===0)return n}function Ap({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function yv(t){const n={};if(t===""||t==="?")return n;const l=(t[0]==="?"?t.slice(1):t).split("&");for(let h=0;h<l.length;++h){const p=l[h].replace(wp," "),f=p.indexOf("="),v=Jo(f<0?p:p.slice(0,f)),y=f<0?null:Jo(p.slice(f+1));if(v in n){let C=n[v];xn(C)||(C=n[v]=[C]),C.push(y)}else n[v]=y}return n}function fd(t){let n="";for(let s in t){const l=t[s];if(s=zy(s),l==null){l!==void 0&&(n+=(n.length?"&":"")+s);continue}(xn(l)?l.map(p=>p&&bc(p)):[l&&bc(l)]).forEach(p=>{p!==void 0&&(n+=(n.length?"&":"")+s,p!=null&&(n+="="+p))})}return n}function vv(t){const n={};for(const s in t){const l=t[s];l!==void 0&&(n[s]=xn(l)?l.map(h=>h==null?null:""+h):l==null?l:""+l)}return n}const bv=Symbol(""),pd=Symbol(""),jl=Symbol(""),Jc=Symbol(""),wc=Symbol("");function Bo(){let t=[];function n(l){return t.push(l),()=>{const h=t.indexOf(l);h>-1&&t.splice(h,1)}}function s(){t=[]}return{add:n,list:()=>t.slice(),reset:s}}function vr(t,n,s,l,h,p=f=>f()){const f=l&&(l.enterCallbacks[h]=l.enterCallbacks[h]||[]);return()=>new Promise((v,y)=>{const C=U=>{U===!1?y(js(4,{from:s,to:n})):U instanceof Error?y(U):rv(U)?y(js(2,{from:n,to:U})):(f&&l.enterCallbacks[h]===f&&typeof U=="function"&&f.push(U),v())},M=p(()=>t.call(l&&l.instances[h],n,s,C));let P=Promise.resolve(M);t.length<3&&(P=P.then(C)),P.catch(U=>y(U))})}function Yu(t,n,s,l,h=p=>p()){const p=[];for(const f of t)for(const v in f.components){let y=f.components[v];if(!(n!=="beforeRouteEnter"&&!f.instances[v]))if(bp(y)){const M=(y.__vccOpts||y)[n];M&&p.push(vr(M,s,l,f,v,h))}else{let C=y();p.push(()=>C.then(M=>{if(!M)throw new Error(`Couldn't resolve component "${v}" at "${f.path}"`);const P=My(M)?M.default:M;f.mods[v]=M,f.components[v]=P;const J=(P.__vccOpts||P)[n];return J&&vr(J,s,l,f,v,h)()}))}}return p}function md(t){const n=hn(jl),s=hn(Jc),l=Pe(()=>{const y=Re(t.to);return n.resolve(y)}),h=Pe(()=>{const{matched:y}=l.value,{length:C}=y,M=y[C-1],P=s.matched;if(!M||!P.length)return-1;const U=P.findIndex($s.bind(null,M));if(U>-1)return U;const J=gd(y[C-2]);return C>1&&gd(M)===J&&P[P.length-1].path!==J?P.findIndex($s.bind(null,y[C-2])):U}),p=Pe(()=>h.value>-1&&Cv(s.params,l.value.params)),f=Pe(()=>h.value>-1&&h.value===s.matched.length-1&&kp(s.params,l.value.params));function v(y={}){if(Lv(y)){const C=n[Re(t.replace)?"replace":"push"](Re(t.to)).catch(Uo);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>C),C}return Promise.resolve()}return{route:l,href:Pe(()=>l.value.href),isActive:p,isExactActive:f,navigate:v}}function xv(t){return t.length===1?t[0]:t}const wv=Yi({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:md,setup(t,{slots:n}){const s=ir(md(t)),{options:l}=hn(jl),h=Pe(()=>({[_d(t.activeClass,l.linkActiveClass,"router-link-active")]:s.isActive,[_d(t.exactActiveClass,l.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const p=n.default&&xv(n.default(s));return t.custom?p:Nf("a",{"aria-current":s.isExactActive?t.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:h.value},p)}}}),nl=wv;function Lv(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const n=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return t.preventDefault&&t.preventDefault(),!0}}function Cv(t,n){for(const s in n){const l=n[s],h=t[s];if(typeof l=="string"){if(l!==h)return!1}else if(!xn(h)||h.length!==l.length||l.some((p,f)=>p!==h[f]))return!1}return!0}function gd(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const _d=(t,n,s)=>t??n??s,Ev=Yi({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:n,slots:s}){const l=hn(wc),h=Pe(()=>t.route||l.value),p=hn(pd,0),f=Pe(()=>{let C=Re(p);const{matched:M}=h.value;let P;for(;(P=M[C])&&!P.components;)C++;return C}),v=Pe(()=>h.value.matched[f.value]);Ja(pd,Pe(()=>f.value+1)),Ja(bv,v),Ja(wc,h);const y=Jt();return vn(()=>[y.value,v.value,t.name],([C,M,P],[U,J,R])=>{M&&(M.instances[P]=C,J&&J!==M&&C&&C===U&&(M.leaveGuards.size||(M.leaveGuards=J.leaveGuards),M.updateGuards.size||(M.updateGuards=J.updateGuards))),C&&M&&(!J||!$s(M,J)||!U)&&(M.enterCallbacks[P]||[]).forEach(V=>V(C))},{flush:"post"}),()=>{const C=h.value,M=t.name,P=v.value,U=P&&P.components[M];if(!U)return yd(s.default,{Component:U,route:C});const J=P.props[M],R=J?J===!0?C.params:typeof J=="function"?J(C):J:null,G=Nf(U,Fe({},R,n,{onVnodeUnmounted:_t=>{_t.component.isUnmounted&&(P.instances[M]=null)},ref:y}));return yd(s.default,{Component:G,route:C})||G}}});function yd(t,n){if(!t)return null;const s=t(n);return s.length===1?s[0]:s}const Tp=Ev;function kv(t){const n=fv(t.routes,t),s=t.parseQuery||yv,l=t.stringifyQuery||fd,h=t.history,p=Bo(),f=Bo(),v=Bo(),y=Xm(mr);let C=mr;Bs&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const M=Ju.bind(null,bt=>""+bt),P=Ju.bind(null,$y),U=Ju.bind(null,Jo);function J(bt,Ht){let Vt,Xt;return Pp(bt)?(Vt=n.getRecordMatcher(bt),Xt=Ht):Xt=bt,n.addRoute(Xt,Vt)}function R(bt){const Ht=n.getRecordMatcher(bt);Ht&&n.removeRoute(Ht)}function V(){return n.getRoutes().map(bt=>bt.record)}function G(bt){return!!n.getRecordMatcher(bt)}function _t(bt,Ht){if(Ht=Fe({},Ht||y.value),typeof bt=="string"){const ot=Xu(s,bt,Ht.path),St=n.resolve({path:ot.path},Ht),It=h.createHref(ot.fullPath);return Fe(ot,St,{params:U(St.params),hash:Jo(ot.hash),redirectedFrom:void 0,href:It})}let Vt;if(bt.path!=null)Vt=Fe({},bt,{path:Xu(s,bt.path,Ht.path).path});else{const ot=Fe({},bt.params);for(const St in ot)ot[St]==null&&delete ot[St];Vt=Fe({},bt,{params:P(ot)}),Ht.params=P(Ht.params)}const Xt=n.resolve(Vt,Ht),te=bt.hash||"";Xt.params=M(U(Xt.params));const $=Gy(l,Fe({},bt,{hash:Fy(te),path:Xt.path})),H=h.createHref($);return Fe({fullPath:$,hash:te,query:l===fd?vv(bt.query):bt.query||{}},Xt,{redirectedFrom:void 0,href:H})}function kt(bt){return typeof bt=="string"?Xu(s,bt,y.value.path):Fe({},bt)}function pt(bt,Ht){if(C!==bt)return js(8,{from:Ht,to:bt})}function At(bt){return nt(bt)}function Ut(bt){return At(Fe(kt(bt),{replace:!0}))}function Y(bt){const Ht=bt.matched[bt.matched.length-1];if(Ht&&Ht.redirect){const{redirect:Vt}=Ht;let Xt=typeof Vt=="function"?Vt(bt):Vt;return typeof Xt=="string"&&(Xt=Xt.includes("?")||Xt.includes("#")?Xt=kt(Xt):{path:Xt},Xt.params={}),Fe({query:bt.query,hash:bt.hash,params:Xt.path!=null?{}:bt.params},Xt)}}function nt(bt,Ht){const Vt=C=_t(bt),Xt=y.value,te=bt.state,$=bt.force,H=bt.replace===!0,ot=Y(Vt);if(ot)return nt(Fe(kt(ot),{state:typeof ot=="object"?Fe({},te,ot.state):te,force:$,replace:H}),Ht||Vt);const St=Vt;St.redirectedFrom=Ht;let It;return!$&&Vy(l,Xt,Vt)&&(It=js(16,{to:St,from:Xt}),Lt(Xt,Xt,!0,!1)),(It?Promise.resolve(It):dt(St,Xt)).catch(at=>Jn(at)?Jn(at,2)?at:$t(at):xt(at,St,Xt)).then(at=>{if(at){if(Jn(at,2))return nt(Fe({replace:H},kt(at.to),{state:typeof at.to=="object"?Fe({},te,at.to.state):te,force:$}),Ht||St)}else at=Mt(St,Xt,!0,H,te);return et(St,Xt,at),at})}function z(bt,Ht){const Vt=pt(bt,Ht);return Vt?Promise.reject(Vt):Promise.resolve()}function rt(bt){const Ht=ie.values().next().value;return Ht&&typeof Ht.runWithContext=="function"?Ht.runWithContext(bt):bt()}function dt(bt,Ht){let Vt;const[Xt,te,$]=Mv(bt,Ht);Vt=Yu(Xt.reverse(),"beforeRouteLeave",bt,Ht);for(const ot of Xt)ot.leaveGuards.forEach(St=>{Vt.push(vr(St,bt,Ht))});const H=z.bind(null,bt,Ht);return Vt.push(H),Qt(Vt).then(()=>{Vt=[];for(const ot of p.list())Vt.push(vr(ot,bt,Ht));return Vt.push(H),Qt(Vt)}).then(()=>{Vt=Yu(te,"beforeRouteUpdate",bt,Ht);for(const ot of te)ot.updateGuards.forEach(St=>{Vt.push(vr(St,bt,Ht))});return Vt.push(H),Qt(Vt)}).then(()=>{Vt=[];for(const ot of $)if(ot.beforeEnter)if(xn(ot.beforeEnter))for(const St of ot.beforeEnter)Vt.push(vr(St,bt,Ht));else Vt.push(vr(ot.beforeEnter,bt,Ht));return Vt.push(H),Qt(Vt)}).then(()=>(bt.matched.forEach(ot=>ot.enterCallbacks={}),Vt=Yu($,"beforeRouteEnter",bt,Ht,rt),Vt.push(H),Qt(Vt))).then(()=>{Vt=[];for(const ot of f.list())Vt.push(vr(ot,bt,Ht));return Vt.push(H),Qt(Vt)}).catch(ot=>Jn(ot,8)?ot:Promise.reject(ot))}function et(bt,Ht,Vt){v.list().forEach(Xt=>rt(()=>Xt(bt,Ht,Vt)))}function Mt(bt,Ht,Vt,Xt,te){const $=pt(bt,Ht);if($)return $;const H=Ht===mr,ot=Bs?history.state:{};Vt&&(Xt||H?h.replace(bt.fullPath,Fe({scroll:H&&ot&&ot.scroll},te)):h.push(bt.fullPath,te)),y.value=bt,Lt(bt,Ht,Vt,H),$t()}let Ot;function Q(){Ot||(Ot=h.listen((bt,Ht,Vt)=>{if(!ne.listening)return;const Xt=_t(bt),te=Y(Xt);if(te){nt(Fe(te,{replace:!0,force:!0}),Xt).catch(Uo);return}C=Xt;const $=y.value;Bs&&Yy(rd($.fullPath,Vt.delta),$l()),dt(Xt,$).catch(H=>Jn(H,12)?H:Jn(H,2)?(nt(Fe(kt(H.to),{force:!0}),Xt).then(ot=>{Jn(ot,20)&&!Vt.delta&&Vt.type===Xo.pop&&h.go(-1,!1)}).catch(Uo),Promise.reject()):(Vt.delta&&h.go(-Vt.delta,!1),xt(H,Xt,$))).then(H=>{H=H||Mt(Xt,$,!1),H&&(Vt.delta&&!Jn(H,8)?h.go(-Vt.delta,!1):Vt.type===Xo.pop&&Jn(H,20)&&h.go(-1,!1)),et(Xt,$,H)}).catch(Uo)}))}let mt=Bo(),Pt=Bo(),Ct;function xt(bt,Ht,Vt){$t(bt);const Xt=Pt.list();return Xt.length?Xt.forEach(te=>te(bt,Ht,Vt)):console.error(bt),Promise.reject(bt)}function Wt(){return Ct&&y.value!==mr?Promise.resolve():new Promise((bt,Ht)=>{mt.add([bt,Ht])})}function $t(bt){return Ct||(Ct=!bt,Q(),mt.list().forEach(([Ht,Vt])=>bt?Vt(bt):Ht()),mt.reset()),bt}function Lt(bt,Ht,Vt,Xt){const{scrollBehavior:te}=t;if(!Bs||!te)return Promise.resolve();const $=!Vt&&Qy(rd(bt.fullPath,0))||(Xt||!Vt)&&history.state&&history.state.scroll||null;return Os().then(()=>te(bt,Ht,$)).then(H=>H&&Xy(H)).catch(H=>xt(H,bt,Ht))}const gt=bt=>h.go(bt);let Kt;const ie=new Set,ne={currentRoute:y,listening:!0,addRoute:J,removeRoute:R,clearRoutes:n.clearRoutes,hasRoute:G,getRoutes:V,resolve:_t,options:t,push:At,replace:Ut,go:gt,back:()=>gt(-1),forward:()=>gt(1),beforeEach:p.add,beforeResolve:f.add,afterEach:v.add,onError:Pt.add,isReady:Wt,install(bt){const Ht=this;bt.component("RouterLink",nl),bt.component("RouterView",Tp),bt.config.globalProperties.$router=Ht,Object.defineProperty(bt.config.globalProperties,"$route",{enumerable:!0,get:()=>Re(y)}),Bs&&!Kt&&y.value===mr&&(Kt=!0,At(h.location).catch(te=>{}));const Vt={};for(const te in mr)Object.defineProperty(Vt,te,{get:()=>y.value[te],enumerable:!0});bt.provide(jl,Ht),bt.provide(Jc,rf(Vt)),bt.provide(wc,y);const Xt=bt.unmount;ie.add(bt),bt.unmount=function(){ie.delete(bt),ie.size<1&&(C=mr,Ot&&Ot(),Ot=null,y.value=mr,Kt=!1,Ct=!1),Xt()}}};function Qt(bt){return bt.reduce((Ht,Vt)=>Ht.then(()=>rt(Vt)),Promise.resolve())}return ne}function Mv(t,n){const s=[],l=[],h=[],p=Math.max(n.matched.length,t.matched.length);for(let f=0;f<p;f++){const v=n.matched[f];v&&(t.matched.find(C=>$s(C,v))?l.push(v):s.push(v));const y=t.matched[f];y&&(n.matched.find(C=>$s(C,y))||h.push(y))}return[s,l,h]}function Hs(){return hn(jl)}function AL(t){return hn(Jc)}var er=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Pv(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}var Rp=Pv,Sv=typeof er=="object"&&er&&er.Object===Object&&er,Bv=Sv,Av=Bv,Tv=typeof self=="object"&&self&&self.Object===Object&&self,Dv=Av||Tv||Function("return this")(),Op=Dv,Rv=Op,Ov=function(){return Rv.Date.now()},Iv=Ov,Fv=/\s/;function zv(t){for(var n=t.length;n--&&Fv.test(t.charAt(n)););return n}var Nv=zv,$v=Nv,jv=/^\s+/;function Uv(t){return t&&t.slice(0,$v(t)+1).replace(jv,"")}var Gv=Uv,Vv=Op,Hv=Vv.Symbol,Ip=Hv,vd=Ip,Fp=Object.prototype,Zv=Fp.hasOwnProperty,qv=Fp.toString,Ao=vd?vd.toStringTag:void 0;function Kv(t){var n=Zv.call(t,Ao),s=t[Ao];try{t[Ao]=void 0;var l=!0}catch{}var h=qv.call(t);return l&&(n?t[Ao]=s:delete t[Ao]),h}var Wv=Kv,Jv=Object.prototype,Xv=Jv.toString;function Yv(t){return Xv.call(t)}var Qv=Yv,bd=Ip,t4=Wv,e4=Qv,i4="[object Null]",n4="[object Undefined]",xd=bd?bd.toStringTag:void 0;function r4(t){return t==null?t===void 0?n4:i4:xd&&xd in Object(t)?t4(t):e4(t)}var s4=r4;function o4(t){return t!=null&&typeof t=="object"}var a4=o4,l4=s4,u4=a4,c4="[object Symbol]";function h4(t){return typeof t=="symbol"||u4(t)&&l4(t)==c4}var d4=h4,f4=Gv,wd=Rp,p4=d4,Ld=NaN,m4=/^[-+]0x[0-9a-f]+$/i,g4=/^0b[01]+$/i,_4=/^0o[0-7]+$/i,y4=parseInt;function v4(t){if(typeof t=="number")return t;if(p4(t))return Ld;if(wd(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=wd(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=f4(t);var s=g4.test(t);return s||_4.test(t)?y4(t.slice(2),s?2:8):m4.test(t)?Ld:+t}var b4=v4,x4=Rp,Qu=Iv,Cd=b4,w4="Expected a function",L4=Math.max,C4=Math.min;function E4(t,n,s){var l,h,p,f,v,y,C=0,M=!1,P=!1,U=!0;if(typeof t!="function")throw new TypeError(w4);n=Cd(n)||0,x4(s)&&(M=!!s.leading,P="maxWait"in s,p=P?L4(Cd(s.maxWait)||0,n):p,U="trailing"in s?!!s.trailing:U);function J(Y){var nt=l,z=h;return l=h=void 0,C=Y,f=t.apply(z,nt),f}function R(Y){return C=Y,v=setTimeout(_t,n),M?J(Y):f}function V(Y){var nt=Y-y,z=Y-C,rt=n-nt;return P?C4(rt,p-z):rt}function G(Y){var nt=Y-y,z=Y-C;return y===void 0||nt>=n||nt<0||P&&z>=p}function _t(){var Y=Qu();if(G(Y))return kt(Y);v=setTimeout(_t,V(Y))}function kt(Y){return v=void 0,U&&l?J(Y):(l=h=void 0,f)}function pt(){v!==void 0&&clearTimeout(v),C=0,l=y=h=v=void 0}function At(){return v===void 0?f:kt(Qu())}function Ut(){var Y=Qu(),nt=G(Y);if(l=arguments,h=this,y=Y,nt){if(v===void 0)return R(y);if(P)return clearTimeout(v),v=setTimeout(_t,n),J(y)}return v===void 0&&(v=setTimeout(_t,n)),f}return Ut.cancel=pt,Ut.flush=At,Ut}var k4=E4;const M4=Dp(k4),P4={class:"relative"},S4={key:0,class:"absolute w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto z-[1001]"},B4=["onClick"],A4=Yi({__name:"SearchBar",emits:["select-location"],setup(t,{emit:n}){const s=Jt(""),l=Jt([]),h=n,p=M4(async y=>{if(y.length<3){l.value=[];return}try{const M=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(y)}`)).json();l.value=M}catch(C){console.error("Erreur lors de la recherche d'adresse:",C),l.value=[]}},300);function f(){p(s.value)}function v(y){s.value=y.display_name,l.value=[],h("select-location",{lat:parseFloat(y.lat),lng:parseFloat(y.lon)})}return(y,C)=>(Rt(),Nt("div",P4,[De(w("input",{"onUpdate:modelValue":C[0]||(C[0]=M=>s.value=M),onInput:f,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[qe,s.value]]),l.value.length>0?(Rt(),Nt("div",S4,[(Rt(!0),Nt(Oe,null,ei(l.value,M=>(Rt(),Nt("div",{key:M.place_id,onClick:P=>v(M),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},qt(M.display_name),9,B4))),128))])):me("",!0)]))}}),zp=(t,n)=>{const s=t.__vccOpts||t;for(const[l,h]of n)s[l]=h;return s},T4=zp(A4,[["__scopeId","data-v-4cda7c14"]]),D4={class:"h-screen flex flex-col"},R4={key:0,class:"bg-white shadow-sm"},O4={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},I4={class:"flex h-16 items-center justify-between"},F4={class:"flex items-center space-x-8"},z4={class:"hidden md:flex space-x-6"},N4={class:"flex-1 max-w-2xl mx-8"},$4={class:"flex items-center space-x-4"},j4={class:"relative"},U4={class:"flex flex-col items-end"},G4={class:"text-sm font-medium text-gray-700"},V4={key:0,class:"text-xs text-gray-500"},H4=["src","alt"],Z4={key:0,class:"absolute right-0 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3000]"},q4={class:"flex-1 overflow-auto"},K4=Yi({__name:"App",setup(t){const n=Hs(),s=Hi(),l=Jt(!1),h=Pe(()=>{const V=s.user;if(!V)return"";const G=`${V.first_name} ${V.last_name.toUpperCase()}`;return V.company_name?`${G} (${V.company_name})`:G}),p=Pe(()=>{var G;const V=(G=s.user)==null?void 0:G.user_type;switch(console.log("User type:",V),V){case"admin":return"Accès administrateur";case"dealer":return"Accès concessionnaire";case"client":return"Accès client";default:return""}}),f=Pe(()=>{var V;return((V=s.user)==null?void 0:V.user_type)==="admin"}),v=Jt(""),y=Pe(()=>s.isAuthenticated),C=[{name:"Carte",to:"/"},{name:"Plans",to:"/plans"}],M=Pe(()=>{var G;if(!y.value)return[];const V=[...C];return f.value?V.push({name:"Utilisateurs",to:"/users"}):((G=s.user)==null?void 0:G.user_type)==="dealer"&&V.push({name:"Clients",to:"/clients"}),V}),P=Pe(()=>y.value?[{name:"Mon profil",to:"/profile"}]:[]);async function U(){try{await s.logout(),n.push("/login")}catch(V){console.error("Erreur lors de la déconnexion:",V)}}function J(V){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:V.lat,lng:V.lng,zoom:16}}))}Er(async()=>{console.log("App mounted, checking auth...");try{localStorage.getItem("token")?(console.log("Token found, checking auth..."),await s.checkAuth(),await s.fetchUserProfile()):console.log("No token found")}catch(V){console.error("Auth check error:",V),n.push("/login")}});const R=Pe(()=>{const V="IrrigationDesign";if(!y.value)return`${V} - Connexion`;const G=n.currentRoute.value,kt={home:"Carte",plans:"Plans",users:"Utilisateurs",profile:"Mon profil",selectDealer:"Sélection du concessionnaire",changePassword:"Changement de mot de passe",map:"Carte"}[G.name]||"";return kt?`${V} - ${kt}`:V});return vn(R,V=>{document.title=V},{immediate:!0}),(V,G)=>(Rt(),Nt("div",D4,[y.value?(Rt(),Nt("nav",R4,[w("div",O4,[w("div",I4,[w("div",F4,[ci(Re(nl),{to:"/",class:"text-xl font-semibold text-primary-600"},{default:Fo(()=>G[2]||(G[2]=[yi(" IrrigationDesign ")])),_:1}),w("div",z4,[(Rt(!0),Nt(Oe,null,ei(M.value,_t=>(Rt(),Jr(Re(nl),{key:_t.name,to:_t.to,class:un(["text-sm font-medium transition-colors duration-200",[V.$route.path===_t.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Fo(()=>[yi(qt(_t.name),1)]),_:2},1032,["to","class"]))),128))])]),w("div",N4,[ci(T4,{onSelectLocation:J})]),w("div",$4,[G[3]||(G[3]=w("button",{class:"p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},[w("span",{class:"sr-only"},"Voir les notifications"),w("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})])],-1)),w("div",j4,[w("button",{onClick:G[0]||(G[0]=_t=>l.value=!l.value),class:"flex items-center space-x-3 focus:outline-none"},[w("div",U4,[w("span",G4,qt(h.value),1),p.value?(Rt(),Nt("span",V4,qt(p.value),1)):me("",!0)]),w("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:v.value||"https://ui-avatars.com/api/?name="+encodeURIComponent(h.value),alt:h.value},null,8,H4)]),l.value?(Rt(),Nt("div",Z4,[(Rt(!0),Nt(Oe,null,ei(P.value,_t=>(Rt(),Jr(Re(nl),{key:_t.name,to:_t.to,class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:G[1]||(G[1]=kt=>l.value=!1)},{default:Fo(()=>[yi(qt(_t.name),1)]),_:2},1032,["to"]))),128)),w("button",{onClick:U,class:"block w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-gray-50"}," Déconnexion ")])):me("",!0)])])])])])):me("",!0),w("main",q4,[ci(Re(Tp))])]))}}),W4="modulepreload",J4=function(t){return"/static/frontend/"+t},Ed={},qa=function(n,s,l){let h=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),v=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));h=Promise.allSettled(s.map(y=>{if(y=J4(y),y in Ed)return;Ed[y]=!0;const C=y.endsWith(".css"),M=C?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${M}`))return;const P=document.createElement("link");if(P.rel=C?"stylesheet":W4,C||(P.as="script"),P.crossOrigin="",P.href=y,v&&P.setAttribute("nonce",v),document.head.appendChild(P),C)return new Promise((U,J)=>{P.addEventListener("load",U),P.addEventListener("error",()=>J(new Error(`Unable to preload CSS for ${y}`)))})}))}function p(f){const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=f,window.dispatchEvent(v),!v.defaultPrevented)throw f}return h.then(f=>{for(const v of f||[])v.status==="rejected"&&p(v.reason);return n().catch(p)})},X4={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},Y4={class:"max-w-md w-full space-y-8"},Q4={class:"space-y-4"},tb={class:"mt-1"},eb={class:"mt-1"},ib={class:"mt-1"},nb={key:0,class:"rounded-md bg-red-50 p-4"},rb={class:"flex"},sb={class:"ml-3"},ob={class:"text-sm font-medium text-red-800"},ab={key:1,class:"rounded-md bg-yellow-50 p-4"},lb={class:"flex"},ub={class:"ml-3"},cb={class:"mt-2 text-sm text-yellow-700"},hb={class:"list-disc pl-5 space-y-1"},db=["disabled"],fb={class:"absolute left-0 inset-y-0 flex items-center pl-3"},pb={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},mb={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},gb=Yi({__name:"ChangePasswordForm",setup(t){const n=Hs(),s=Hi(),l=ir({oldPassword:"",newPassword:"",confirmPassword:""}),h=Jt(!1),p=Jt("");Er(()=>{var C,M;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:s.isAuthenticated,userId:(C=s.user)==null?void 0:C.id,mustChangePassword:(M=s.user)==null?void 0:M.must_change_password})});const f=Pe(()=>{const C=[];return l.newPassword&&l.newPassword.length<8&&C.push("Le nouveau mot de passe doit contenir au moins 8 caractères"),l.newPassword&&l.confirmPassword&&l.newPassword!==l.confirmPassword&&C.push("Les mots de passe ne correspondent pas"),C}),v=Pe(()=>l.oldPassword.length>0&&l.newPassword.length>=8&&l.newPassword===l.confirmPassword);async function y(){var C,M,P,U,J,R,V,G;if(!v.value){p.value="Veuillez corriger les erreurs avant de continuer";return}if(!((C=s.user)!=null&&C.id)){p.value="Erreur : utilisateur non identifié";return}h.value=!0,p.value="";try{console.log("Submitting password change..."),await s.changePassword(l.oldPassword,l.newPassword),console.log("Password changed successfully"),n.push("/")}catch(_t){console.error("Password change failed:",_t),(P=(M=_t.response)==null?void 0:M.data)!=null&&P.detail?p.value=_t.response.data.detail:(J=(U=_t.response)==null?void 0:U.data)!=null&&J.old_password?p.value=_t.response.data.old_password[0]:(V=(R=_t.response)==null?void 0:R.data)!=null&&V.password?p.value=_t.response.data.password[0]:((G=_t.response)==null?void 0:G.status)===401?(p.value="Session expirée, veuillez vous reconnecter",await s.logout(),n.push("/login")):p.value="Une erreur est survenue lors du changement de mot de passe"}finally{h.value=!1}}return(C,M)=>(Rt(),Nt("div",X4,[w("div",Y4,[M[12]||(M[12]=w("div",null,[w("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),w("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de sécurité, vous devez changer votre mot de passe. ")],-1)),w("form",{class:"mt-8 space-y-6",onSubmit:Ns(y,["prevent"])},[w("div",Q4,[w("div",null,[M[3]||(M[3]=w("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),w("div",tb,[De(w("input",{id:"old-password","onUpdate:modelValue":M[0]||(M[0]=P=>l.oldPassword=P),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[qe,l.oldPassword]])])]),w("div",null,[M[4]||(M[4]=w("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),w("div",eb,[De(w("input",{id:"new-password","onUpdate:modelValue":M[1]||(M[1]=P=>l.newPassword=P),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[qe,l.newPassword]])]),M[5]||(M[5]=w("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractères ",-1))]),w("div",null,[M[6]||(M[6]=w("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),w("div",ib,[De(w("input",{id:"confirm-password","onUpdate:modelValue":M[2]||(M[2]=P=>l.confirmPassword=P),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[qe,l.confirmPassword]])])])]),p.value?(Rt(),Nt("div",nb,[w("div",rb,[M[7]||(M[7]=w("div",{class:"flex-shrink-0"},[w("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),w("div",sb,[w("h3",ob,qt(p.value),1)])])])):me("",!0),f.value.length>0?(Rt(),Nt("div",ab,[w("div",lb,[M[9]||(M[9]=w("div",{class:"flex-shrink-0"},[w("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),w("div",ub,[M[8]||(M[8]=w("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),w("div",cb,[w("ul",hb,[(Rt(!0),Nt(Oe,null,ei(f.value,(P,U)=>(Rt(),Nt("li",{key:U},qt(P),1))),128))])])])])])):me("",!0),w("div",null,[w("button",{type:"submit",disabled:h.value||!v.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[w("span",fb,[h.value?(Rt(),Nt("svg",mb,M[11]||(M[11]=[w("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),w("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Rt(),Nt("svg",pb,M[10]||(M[10]=[w("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),yi(" "+qt(h.value?"Modification en cours...":"Changer le mot de passe"),1)],8,db)])],32)])]))}}),_b="/static/frontend/assets/logo.svg",yb={class:"min-h-screen bg-white from-blue-50 to-white flex flex-col justify-center py-12 sm:px-6 lg:px-8"},vb={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},bb={class:"bg-white py-8 px-6 shadow-lg rounded-md sm:px-10"},xb={key:0,class:"rounded-md bg-red-50 p-4"},wb={class:"flex"},Lb={class:"ml-3"},Cb={class:"text-sm font-medium text-red-800"},Eb={class:"mt-1"},kb={class:"mt-1 relative"},Mb=["type"],Pb={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Sb={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Bb={class:"flex items-center justify-between"},Ab={class:"flex items-center"},Tb={class:"text-sm"},Db=["disabled"],Rb={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Ob=Yi({__name:"LoginView",setup(t){const n=Hs(),s=Hi(),l=Jt(!1),h=Jt(null),p=Jt(!1),f=ir({username:"",password:"",rememberMe:!1});Er(()=>{var y;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE),(y=window.INITIAL_STATE)!=null&&y.isAuthenticated&&(console.log("User is authenticated, redirecting to home"),n.push("/"))});async function v(){var y,C,M,P,U,J;l.value=!0,h.value=null;try{if(!f.username||!f.password){h.value="Veuillez remplir tous les champs";return}await s.login(f.username,f.password),(y=s.user)!=null&&y.must_change_password?n.push("/change-password"):n.push("/")}catch(R){console.error("Login error:",R),h.value=((M=(C=R==null?void 0:R.response)==null?void 0:C.data)==null?void 0:M.detail)||((J=(U=(P=R==null?void 0:R.response)==null?void 0:P.data)==null?void 0:U.non_field_errors)==null?void 0:J[0])||(R==null?void 0:R.message)||"Erreur lors de la connexion"}finally{l.value=!1}}return(y,C)=>{const M=L0("router-link");return Rt(),Nt("div",yb,[C[12]||(C[12]=w("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[w("img",{src:_b,alt:"IrrigationDesign Logo",class:"mx-auto h-40 w-auto transition-transform duration-300 hover:scale-110"}),w("h2",{class:"mt-2 text-center text-3xl font-bold text-gray-800"}," IrrigationDesign "),w("p",{class:"mt-2 text-center text-sm text-gray-600"}," Connectez-vous pour accéder à votre espace ")],-1)),w("div",vb,[w("div",bb,[w("form",{class:"space-y-6",onSubmit:Ns(v,["prevent"])},[h.value?(Rt(),Nt("div",xb,[w("div",wb,[C[4]||(C[4]=w("div",{class:"flex-shrink-0"},[w("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),w("div",Lb,[w("h3",Cb,qt(h.value),1)])])])):me("",!0),w("div",null,[C[5]||(C[5]=w("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),w("div",Eb,[De(w("input",{id:"username","onUpdate:modelValue":C[0]||(C[0]=P=>f.username=P),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[qe,f.username]])])]),w("div",null,[C[8]||(C[8]=w("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),w("div",kb,[De(w("input",{id:"password","onUpdate:modelValue":C[1]||(C[1]=P=>f.password=P),type:p.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,Mb),[[Og,f.password]]),w("button",{type:"button",onClick:C[2]||(C[2]=P=>p.value=!p.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[p.value?(Rt(),Nt("svg",Pb,C[6]||(C[6]=[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(Rt(),Nt("svg",Sb,C[7]||(C[7]=[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),w("div",Bb,[w("div",Ab,[De(w("input",{id:"remember-me","onUpdate:modelValue":C[3]||(C[3]=P=>f.rememberMe=P),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[Uf,f.rememberMe]]),C[9]||(C[9]=w("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),w("div",Tb,[ci(M,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Fo(()=>C[10]||(C[10]=[yi(" Mot de passe oublié ? ")])),_:1})])]),w("div",null,[w("button",{type:"submit",disabled:l.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[l.value?(Rt(),Nt("svg",Rb,C[11]||(C[11]=[w("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),w("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):me("",!0),yi(" "+qt(l.value?"Connexion en cours...":"Se connecter"),1)],8,Db)])],32)])])])}}});var Lc={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,n){(function(s,l){l(n)})(er,function(s){var l="1.9.4";function h(e){var o,c,m,x;for(c=1,m=arguments.length;c<m;c++){x=arguments[c];for(o in x)e[o]=x[o]}return e}var p=Object.create||function(){function e(){}return function(o){return e.prototype=o,new e}}();function f(e,o){var c=Array.prototype.slice;if(e.bind)return e.bind.apply(e,c.call(arguments,1));var m=c.call(arguments,2);return function(){return e.apply(o,m.length?m.concat(c.call(arguments)):arguments)}}var v=0;function y(e){return"_leaflet_id"in e||(e._leaflet_id=++v),e._leaflet_id}function C(e,o,c){var m,x,B,Z;return Z=function(){m=!1,x&&(B.apply(c,x),x=!1)},B=function(){m?x=arguments:(e.apply(c,arguments),setTimeout(Z,o),m=!0)},B}function M(e,o,c){var m=o[1],x=o[0],B=m-x;return e===m&&c?e:((e-x)%B+B)%B+x}function P(){return!1}function U(e,o){if(o===!1)return e;var c=Math.pow(10,o===void 0?6:o);return Math.round(e*c)/c}function J(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function R(e){return J(e).split(/\s+/)}function V(e,o){Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?p(e.options):{});for(var c in o)e.options[c]=o[c];return e.options}function G(e,o,c){var m=[];for(var x in e)m.push(encodeURIComponent(c?x.toUpperCase():x)+"="+encodeURIComponent(e[x]));return(!o||o.indexOf("?")===-1?"?":"&")+m.join("&")}var _t=/\{ *([\w_ -]+) *\}/g;function kt(e,o){return e.replace(_t,function(c,m){var x=o[m];if(x===void 0)throw new Error("No value provided for variable "+c);return typeof x=="function"&&(x=x(o)),x})}var pt=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function At(e,o){for(var c=0;c<e.length;c++)if(e[c]===o)return c;return-1}var Ut="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Y(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var nt=0;function z(e){var o=+new Date,c=Math.max(0,16-(o-nt));return nt=o+c,window.setTimeout(e,c)}var rt=window.requestAnimationFrame||Y("RequestAnimationFrame")||z,dt=window.cancelAnimationFrame||Y("CancelAnimationFrame")||Y("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function et(e,o,c){if(c&&rt===z)e.call(o);else return rt.call(window,f(e,o))}function Mt(e){e&&dt.call(window,e)}var Ot={__proto__:null,extend:h,create:p,bind:f,get lastId(){return v},stamp:y,throttle:C,wrapNum:M,falseFn:P,formatNum:U,trim:J,splitWords:R,setOptions:V,getParamString:G,template:kt,isArray:pt,indexOf:At,emptyImageUrl:Ut,requestFn:rt,cancelFn:dt,requestAnimFrame:et,cancelAnimFrame:Mt};function Q(){}Q.extend=function(e){var o=function(){V(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=o.__super__=this.prototype,m=p(c);m.constructor=o,o.prototype=m;for(var x in this)Object.prototype.hasOwnProperty.call(this,x)&&x!=="prototype"&&x!=="__super__"&&(o[x]=this[x]);return e.statics&&h(o,e.statics),e.includes&&(mt(e.includes),h.apply(null,[m].concat(e.includes))),h(m,e),delete m.statics,delete m.includes,m.options&&(m.options=c.options?p(c.options):{},h(m.options,e.options)),m._initHooks=[],m.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var B=0,Z=m._initHooks.length;B<Z;B++)m._initHooks[B].call(this)}},o},Q.include=function(e){var o=this.prototype.options;return h(this.prototype,e),e.options&&(this.prototype.options=o,this.mergeOptions(e.options)),this},Q.mergeOptions=function(e){return h(this.prototype.options,e),this},Q.addInitHook=function(e){var o=Array.prototype.slice.call(arguments,1),c=typeof e=="function"?e:function(){this[e].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function mt(e){if(!(typeof L>"u"||!L||!L.Mixin)){e=pt(e)?e:[e];for(var o=0;o<e.length;o++)e[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Pt={on:function(e,o,c){if(typeof e=="object")for(var m in e)this._on(m,e[m],o);else{e=R(e);for(var x=0,B=e.length;x<B;x++)this._on(e[x],o,c)}return this},off:function(e,o,c){if(!arguments.length)delete this._events;else if(typeof e=="object")for(var m in e)this._off(m,e[m],o);else{e=R(e);for(var x=arguments.length===1,B=0,Z=e.length;B<Z;B++)x?this._off(e[B]):this._off(e[B],o,c)}return this},_on:function(e,o,c,m){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(e,o,c)===!1){c===this&&(c=void 0);var x={fn:o,ctx:c};m&&(x.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(x)}},_off:function(e,o,c){var m,x,B;if(this._events&&(m=this._events[e],!!m)){if(arguments.length===1){if(this._firingCount)for(x=0,B=m.length;x<B;x++)m[x].fn=P;delete this._events[e];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var Z=this._listens(e,o,c);if(Z!==!1){var lt=m[Z];this._firingCount&&(lt.fn=P,this._events[e]=m=m.slice()),m.splice(Z,1)}}},fire:function(e,o,c){if(!this.listens(e,c))return this;var m=h({},o,{type:e,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var x=this._events[e];if(x){this._firingCount=this._firingCount+1||1;for(var B=0,Z=x.length;B<Z;B++){var lt=x[B],wt=lt.fn;lt.once&&this.off(e,wt,lt.ctx),wt.call(lt.ctx||this,m)}this._firingCount--}}return c&&this._propagateEvent(m),this},listens:function(e,o,c,m){typeof e!="string"&&console.warn('"string" type argument expected');var x=o;typeof o!="function"&&(m=!!o,x=void 0,c=void 0);var B=this._events&&this._events[e];if(B&&B.length&&this._listens(e,x,c)!==!1)return!0;if(m){for(var Z in this._eventParents)if(this._eventParents[Z].listens(e,o,c,m))return!0}return!1},_listens:function(e,o,c){if(!this._events)return!1;var m=this._events[e]||[];if(!o)return!!m.length;c===this&&(c=void 0);for(var x=0,B=m.length;x<B;x++)if(m[x].fn===o&&m[x].ctx===c)return x;return!1},once:function(e,o,c){if(typeof e=="object")for(var m in e)this._on(m,e[m],o,!0);else{e=R(e);for(var x=0,B=e.length;x<B;x++)this._on(e[x],o,c,!0)}return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[y(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[y(e)],this},_propagateEvent:function(e){for(var o in this._eventParents)this._eventParents[o].fire(e.type,h({layer:e.target,propagatedFrom:e.target},e),!0)}};Pt.addEventListener=Pt.on,Pt.removeEventListener=Pt.clearAllEventListeners=Pt.off,Pt.addOneTimeEventListener=Pt.once,Pt.fireEvent=Pt.fire,Pt.hasEventListeners=Pt.listens;var Ct=Q.extend(Pt);function xt(e,o,c){this.x=c?Math.round(e):e,this.y=c?Math.round(o):o}var Wt=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};xt.prototype={clone:function(){return new xt(this.x,this.y)},add:function(e){return this.clone()._add($t(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract($t(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new xt(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new xt(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Wt(this.x),this.y=Wt(this.y),this},distanceTo:function(e){e=$t(e);var o=e.x-this.x,c=e.y-this.y;return Math.sqrt(o*o+c*c)},equals:function(e){return e=$t(e),e.x===this.x&&e.y===this.y},contains:function(e){return e=$t(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+U(this.x)+", "+U(this.y)+")"}};function $t(e,o,c){return e instanceof xt?e:pt(e)?new xt(e[0],e[1]):e==null?e:typeof e=="object"&&"x"in e&&"y"in e?new xt(e.x,e.y):new xt(e,o,c)}function Lt(e,o){if(e)for(var c=o?[e,o]:e,m=0,x=c.length;m<x;m++)this.extend(c[m])}Lt.prototype={extend:function(e){var o,c;if(!e)return this;if(e instanceof xt||typeof e[0]=="number"||"x"in e)o=c=$t(e);else if(e=gt(e),o=e.min,c=e.max,!o||!c)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=c.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(e){return $t((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return $t(this.min.x,this.max.y)},getTopRight:function(){return $t(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var o,c;return typeof e[0]=="number"||e instanceof xt?e=$t(e):e=gt(e),e instanceof Lt?(o=e.min,c=e.max):o=c=e,o.x>=this.min.x&&c.x<=this.max.x&&o.y>=this.min.y&&c.y<=this.max.y},intersects:function(e){e=gt(e);var o=this.min,c=this.max,m=e.min,x=e.max,B=x.x>=o.x&&m.x<=c.x,Z=x.y>=o.y&&m.y<=c.y;return B&&Z},overlaps:function(e){e=gt(e);var o=this.min,c=this.max,m=e.min,x=e.max,B=x.x>o.x&&m.x<c.x,Z=x.y>o.y&&m.y<c.y;return B&&Z},isValid:function(){return!!(this.min&&this.max)},pad:function(e){var o=this.min,c=this.max,m=Math.abs(o.x-c.x)*e,x=Math.abs(o.y-c.y)*e;return gt($t(o.x-m,o.y-x),$t(c.x+m,c.y+x))},equals:function(e){return e?(e=gt(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight())):!1}};function gt(e,o){return!e||e instanceof Lt?e:new Lt(e,o)}function Kt(e,o){if(e)for(var c=o?[e,o]:e,m=0,x=c.length;m<x;m++)this.extend(c[m])}Kt.prototype={extend:function(e){var o=this._southWest,c=this._northEast,m,x;if(e instanceof ne)m=e,x=e;else if(e instanceof Kt){if(m=e._southWest,x=e._northEast,!m||!x)return this}else return e?this.extend(Qt(e)||ie(e)):this;return!o&&!c?(this._southWest=new ne(m.lat,m.lng),this._northEast=new ne(x.lat,x.lng)):(o.lat=Math.min(m.lat,o.lat),o.lng=Math.min(m.lng,o.lng),c.lat=Math.max(x.lat,c.lat),c.lng=Math.max(x.lng,c.lng)),this},pad:function(e){var o=this._southWest,c=this._northEast,m=Math.abs(o.lat-c.lat)*e,x=Math.abs(o.lng-c.lng)*e;return new Kt(new ne(o.lat-m,o.lng-x),new ne(c.lat+m,c.lng+x))},getCenter:function(){return new ne((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ne(this.getNorth(),this.getWest())},getSouthEast:function(){return new ne(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){typeof e[0]=="number"||e instanceof ne||"lat"in e?e=Qt(e):e=ie(e);var o=this._southWest,c=this._northEast,m,x;return e instanceof Kt?(m=e.getSouthWest(),x=e.getNorthEast()):m=x=e,m.lat>=o.lat&&x.lat<=c.lat&&m.lng>=o.lng&&x.lng<=c.lng},intersects:function(e){e=ie(e);var o=this._southWest,c=this._northEast,m=e.getSouthWest(),x=e.getNorthEast(),B=x.lat>=o.lat&&m.lat<=c.lat,Z=x.lng>=o.lng&&m.lng<=c.lng;return B&&Z},overlaps:function(e){e=ie(e);var o=this._southWest,c=this._northEast,m=e.getSouthWest(),x=e.getNorthEast(),B=x.lat>o.lat&&m.lat<c.lat,Z=x.lng>o.lng&&m.lng<c.lng;return B&&Z},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,o){return e?(e=ie(e),this._southWest.equals(e.getSouthWest(),o)&&this._northEast.equals(e.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ie(e,o){return e instanceof Kt?e:new Kt(e,o)}function ne(e,o,c){if(isNaN(e)||isNaN(o))throw new Error("Invalid LatLng object: ("+e+", "+o+")");this.lat=+e,this.lng=+o,c!==void 0&&(this.alt=+c)}ne.prototype={equals:function(e,o){if(!e)return!1;e=Qt(e);var c=Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng));return c<=(o===void 0?1e-9:o)},toString:function(e){return"LatLng("+U(this.lat,e)+", "+U(this.lng,e)+")"},distanceTo:function(e){return Ht.distance(this,Qt(e))},wrap:function(){return Ht.wrapLatLng(this)},toBounds:function(e){var o=180*e/40075017,c=o/Math.cos(Math.PI/180*this.lat);return ie([this.lat-o,this.lng-c],[this.lat+o,this.lng+c])},clone:function(){return new ne(this.lat,this.lng,this.alt)}};function Qt(e,o,c){return e instanceof ne?e:pt(e)&&typeof e[0]!="object"?e.length===3?new ne(e[0],e[1],e[2]):e.length===2?new ne(e[0],e[1]):null:e==null?e:typeof e=="object"&&"lat"in e?new ne(e.lat,"lng"in e?e.lng:e.lon,e.alt):o===void 0?null:new ne(e,o,c)}var bt={latLngToPoint:function(e,o){var c=this.projection.project(e),m=this.scale(o);return this.transformation._transform(c,m)},pointToLatLng:function(e,o){var c=this.scale(o),m=this.transformation.untransform(e,c);return this.projection.unproject(m)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var o=this.projection.bounds,c=this.scale(e),m=this.transformation.transform(o.min,c),x=this.transformation.transform(o.max,c);return new Lt(m,x)},infinite:!1,wrapLatLng:function(e){var o=this.wrapLng?M(e.lng,this.wrapLng,!0):e.lng,c=this.wrapLat?M(e.lat,this.wrapLat,!0):e.lat,m=e.alt;return new ne(c,o,m)},wrapLatLngBounds:function(e){var o=e.getCenter(),c=this.wrapLatLng(o),m=o.lat-c.lat,x=o.lng-c.lng;if(m===0&&x===0)return e;var B=e.getSouthWest(),Z=e.getNorthEast(),lt=new ne(B.lat-m,B.lng-x),wt=new ne(Z.lat-m,Z.lng-x);return new Kt(lt,wt)}},Ht=h({},bt,{wrapLng:[-180,180],R:6371e3,distance:function(e,o){var c=Math.PI/180,m=e.lat*c,x=o.lat*c,B=Math.sin((o.lat-e.lat)*c/2),Z=Math.sin((o.lng-e.lng)*c/2),lt=B*B+Math.cos(m)*Math.cos(x)*Z*Z,wt=2*Math.atan2(Math.sqrt(lt),Math.sqrt(1-lt));return this.R*wt}}),Vt=6378137,Xt={R:Vt,MAX_LATITUDE:85.0511287798,project:function(e){var o=Math.PI/180,c=this.MAX_LATITUDE,m=Math.max(Math.min(c,e.lat),-c),x=Math.sin(m*o);return new xt(this.R*e.lng*o,this.R*Math.log((1+x)/(1-x))/2)},unproject:function(e){var o=180/Math.PI;return new ne((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*o,e.x*o/this.R)},bounds:function(){var e=Vt*Math.PI;return new Lt([-e,-e],[e,e])}()};function te(e,o,c,m){if(pt(e)){this._a=e[0],this._b=e[1],this._c=e[2],this._d=e[3];return}this._a=e,this._b=o,this._c=c,this._d=m}te.prototype={transform:function(e,o){return this._transform(e.clone(),o)},_transform:function(e,o){return o=o||1,e.x=o*(this._a*e.x+this._b),e.y=o*(this._c*e.y+this._d),e},untransform:function(e,o){return o=o||1,new xt((e.x/o-this._b)/this._a,(e.y/o-this._d)/this._c)}};function $(e,o,c,m){return new te(e,o,c,m)}var H=h({},Ht,{code:"EPSG:3857",projection:Xt,transformation:function(){var e=.5/(Math.PI*Xt.R);return $(e,.5,-e,.5)}()}),ot=h({},H,{code:"EPSG:900913"});function St(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function It(e,o){var c="",m,x,B,Z,lt,wt;for(m=0,B=e.length;m<B;m++){for(lt=e[m],x=0,Z=lt.length;x<Z;x++)wt=lt[x],c+=(x?"L":"M")+wt.x+" "+wt.y;c+=o?ce.svg?"z":"x":""}return c||"M0 0"}var at=document.documentElement.style,X="ActiveXObject"in window,jt=X&&!document.addEventListener,Bt="msLaunchUri"in navigator&&!("documentMode"in document),Tt=Zi("webkit"),Dt=Zi("android"),Zt=Zi("android 2")||Zi("android 3"),ae=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),de=Dt&&Zi("Google")&&ae<537&&!("AudioNode"in window),ve=!!window.opera,Se=!Bt&&Zi("chrome"),Ee=Zi("gecko")&&!Tt&&!ve&&!X,ii=!Se&&Zi("safari"),Ne=Zi("phantom"),Bi="OTransition"in at,ai=navigator.platform.indexOf("Win")===0,Ln=X&&"transition"in at,zn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Zt,Xe="MozPerspective"in at,Ai=!window.L_DISABLE_3D&&(Ln||zn||Xe)&&!Bi&&!Ne,Qi=typeof orientation<"u"||Zi("mobile"),Ul=Qi&&Tt,Gl=Qi&&zn,Zs=!window.PointerEvent&&window.MSPointerEvent,ra=!!(window.PointerEvent||Zs),sa="ontouchstart"in window||!!window.TouchEvent,Vl=!window.L_NO_TOUCH&&(sa||ra),Hl=Qi&&ve,oa=Qi&&Ee,aa=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Zl=function(){var e=!1;try{var o=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",P,o),window.removeEventListener("testPassiveEventSupport",P,o)}catch{}return e}(),ql=function(){return!!document.createElement("canvas").getContext}(),qs=!!(document.createElementNS&&St("svg").createSVGRect),la=!!qs&&function(){var e=document.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Kl=!qs&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var o=e.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}}(),Wl=navigator.platform.indexOf("Mac")===0,Jl=navigator.platform.indexOf("Linux")===0;function Zi(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var ce={ie:X,ielt9:jt,edge:Bt,webkit:Tt,android:Dt,android23:Zt,androidStock:de,opera:ve,chrome:Se,gecko:Ee,safari:ii,phantom:Ne,opera12:Bi,win:ai,ie3d:Ln,webkit3d:zn,gecko3d:Xe,any3d:Ai,mobile:Qi,mobileWebkit:Ul,mobileWebkit3d:Gl,msPointer:Zs,pointer:ra,touch:Vl,touchNative:sa,mobileOpera:Hl,mobileGecko:oa,retina:aa,passiveEvents:Zl,canvas:ql,svg:qs,vml:Kl,inlineSvg:la,mac:Wl,linux:Jl},ua=ce.msPointer?"MSPointerDown":"pointerdown",ca=ce.msPointer?"MSPointerMove":"pointermove",Ks=ce.msPointer?"MSPointerUp":"pointerup",ha=ce.msPointer?"MSPointerCancel":"pointercancel",Ws={touchstart:ua,touchmove:ca,touchend:Ks,touchcancel:ha},da={touchstart:eu,touchmove:ts,touchend:ts,touchcancel:ts},rr={},fa=!1;function Xl(e,o,c){return o==="touchstart"&&Js(),da[o]?(c=da[o].bind(this,c),e.addEventListener(Ws[o],c,!1),c):(console.warn("wrong event specified:",o),P)}function Yl(e,o,c){if(!Ws[o]){console.warn("wrong event specified:",o);return}e.removeEventListener(Ws[o],c,!1)}function Ql(e){rr[e.pointerId]=e}function tu(e){rr[e.pointerId]&&(rr[e.pointerId]=e)}function Qr(e){delete rr[e.pointerId]}function Js(){fa||(document.addEventListener(ua,Ql,!0),document.addEventListener(ca,tu,!0),document.addEventListener(Ks,Qr,!0),document.addEventListener(ha,Qr,!0),fa=!0)}function ts(e,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var c in rr)o.touches.push(rr[c]);o.changedTouches=[o],e(o)}}function eu(e,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&li(o),ts(e,o)}function iu(e){var o={},c,m;for(m in e)c=e[m],o[m]=c&&c.bind?c.bind(e):c;return e=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var nu=200;function ru(e,o){e.addEventListener("dblclick",o);var c=0,m;function x(B){if(B.detail!==1){m=B.detail;return}if(!(B.pointerType==="mouse"||B.sourceCapabilities&&!B.sourceCapabilities.firesTouchEvents)){var Z=ya(B);if(!(Z.some(function(wt){return wt instanceof HTMLLabelElement&&wt.attributes.for})&&!Z.some(function(wt){return wt instanceof HTMLInputElement||wt instanceof HTMLSelectElement}))){var lt=Date.now();lt-c<=nu?(m++,m===2&&o(iu(B))):m=1,c=lt}}}return e.addEventListener("click",x),{dblclick:o,simDblclick:x}}function su(e,o){e.removeEventListener("dblclick",o.dblclick),e.removeEventListener("click",o.simDblclick)}var Xs=is(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),kr=is(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),pa=kr==="webkitTransition"||kr==="OTransition"?kr+"End":"transitionend";function ma(e){return typeof e=="string"?document.getElementById(e):e}function Cn(e,o){var c=e.style[o]||e.currentStyle&&e.currentStyle[o];if((!c||c==="auto")&&document.defaultView){var m=document.defaultView.getComputedStyle(e,null);c=m?m[o]:null}return c==="auto"?null:c}function Be(e,o,c){var m=document.createElement(e);return m.className=o||"",c&&c.appendChild(m),m}function Ve(e){var o=e.parentNode;o&&o.removeChild(e)}function Mr(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function sr(e){var o=e.parentNode;o&&o.lastChild!==e&&o.appendChild(e)}function Nn(e){var o=e.parentNode;o&&o.firstChild!==e&&o.insertBefore(e,o.firstChild)}function Ys(e,o){if(e.classList!==void 0)return e.classList.contains(o);var c=es(e);return c.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(c)}function be(e,o){if(e.classList!==void 0)for(var c=R(o),m=0,x=c.length;m<x;m++)e.classList.add(c[m]);else if(!Ys(e,o)){var B=es(e);Qs(e,(B?B+" ":"")+o)}}function We(e,o){e.classList!==void 0?e.classList.remove(o):Qs(e,J((" "+es(e)+" ").replace(" "+o+" "," ")))}function Qs(e,o){e.className.baseVal===void 0?e.className=o:e.className.baseVal=o}function es(e){return e.correspondingElement&&(e=e.correspondingElement),e.className.baseVal===void 0?e.className:e.className.baseVal}function Ni(e,o){"opacity"in e.style?e.style.opacity=o:"filter"in e.style&&ou(e,o)}function ou(e,o){var c=!1,m="DXImageTransform.Microsoft.Alpha";try{c=e.filters.item(m)}catch{if(o===1)return}o=Math.round(o*100),c?(c.Enabled=o!==100,c.Opacity=o):e.style.filter+=" progid:"+m+"(opacity="+o+")"}function is(e){for(var o=document.documentElement.style,c=0;c<e.length;c++)if(e[c]in o)return e[c];return!1}function $n(e,o,c){var m=o||new xt(0,0);e.style[Xs]=(ce.ie3d?"translate("+m.x+"px,"+m.y+"px)":"translate3d("+m.x+"px,"+m.y+"px,0)")+(c?" scale("+c+")":"")}function Ye(e,o){e._leaflet_pos=o,ce.any3d?$n(e,o):(e.style.left=o.x+"px",e.style.top=o.y+"px")}function jn(e){return e._leaflet_pos||new xt(0,0)}var Pr,Sr,to;if("onselectstart"in document)Pr=function(){ye(window,"selectstart",li)},Sr=function(){$e(window,"selectstart",li)};else{var or=is(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Pr=function(){if(or){var e=document.documentElement.style;to=e[or],e[or]="none"}},Sr=function(){or&&(document.documentElement.style[or]=to,to=void 0)}}function eo(){ye(window,"dragstart",li)}function io(){$e(window,"dragstart",li)}var ns,no;function ro(e){for(;e.tabIndex===-1;)e=e.parentNode;e.style&&(rs(),ns=e,no=e.style.outlineStyle,e.style.outlineStyle="none",ye(window,"keydown",rs))}function rs(){ns&&(ns.style.outlineStyle=no,ns=void 0,no=void 0,$e(window,"keydown",rs))}function ga(e){do e=e.parentNode;while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function so(e){var o=e.getBoundingClientRect();return{x:o.width/e.offsetWidth||1,y:o.height/e.offsetHeight||1,boundingClientRect:o}}var au={__proto__:null,TRANSFORM:Xs,TRANSITION:kr,TRANSITION_END:pa,get:ma,getStyle:Cn,create:Be,remove:Ve,empty:Mr,toFront:sr,toBack:Nn,hasClass:Ys,addClass:be,removeClass:We,setClass:Qs,getClass:es,setOpacity:Ni,testProp:is,setTransform:$n,setPosition:Ye,getPosition:jn,get disableTextSelection(){return Pr},get enableTextSelection(){return Sr},disableImageDrag:eo,enableImageDrag:io,preventOutline:ro,restoreOutline:rs,getSizedParentNode:ga,getScale:so};function ye(e,o,c,m){if(o&&typeof o=="object")for(var x in o)ao(e,x,o[x],c);else{o=R(o);for(var B=0,Z=o.length;B<Z;B++)ao(e,o[B],c,m)}return this}var tn="_leaflet_events";function $e(e,o,c,m){if(arguments.length===1)_a(e),delete e[tn];else if(o&&typeof o=="object")for(var x in o)En(e,x,o[x],c);else if(o=R(o),arguments.length===2)_a(e,function(lt){return At(o,lt)!==-1});else for(var B=0,Z=o.length;B<Z;B++)En(e,o[B],c,m);return this}function _a(e,o){for(var c in e[tn]){var m=c.split(/\d/)[0];(!o||o(m))&&En(e,m,null,null,c)}}var oo={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ao(e,o,c,m){var x=o+y(c)+(m?"_"+y(m):"");if(e[tn]&&e[tn][x])return this;var B=function(lt){return c.call(m||e,lt||window.event)},Z=B;!ce.touchNative&&ce.pointer&&o.indexOf("touch")===0?B=Xl(e,o,B):ce.touch&&o==="dblclick"?B=ru(e,B):"addEventListener"in e?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?e.addEventListener(oo[o]||o,B,ce.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(B=function(lt){lt=lt||window.event,uo(e,lt)&&Z(lt)},e.addEventListener(oo[o],B,!1)):e.addEventListener(o,Z,!1):e.attachEvent("on"+o,B),e[tn]=e[tn]||{},e[tn][x]=B}function En(e,o,c,m,x){x=x||o+y(c)+(m?"_"+y(m):"");var B=e[tn]&&e[tn][x];if(!B)return this;!ce.touchNative&&ce.pointer&&o.indexOf("touch")===0?Yl(e,o,B):ce.touch&&o==="dblclick"?su(e,B):"removeEventListener"in e?e.removeEventListener(oo[o]||o,B,!1):e.detachEvent("on"+o,B),e[tn][x]=null}function Un(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function lo(e){return ao(e,"wheel",Un),this}function Br(e){return ye(e,"mousedown touchstart dblclick contextmenu",Un),e._leaflet_disable_click=!0,this}function li(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function Gn(e){return li(e),Un(e),this}function ya(e){if(e.composedPath)return e.composedPath();for(var o=[],c=e.target;c;)o.push(c),c=c.parentNode;return o}function va(e,o){if(!o)return new xt(e.clientX,e.clientY);var c=so(o),m=c.boundingClientRect;return new xt((e.clientX-m.left)/c.x-o.clientLeft,(e.clientY-m.top)/c.y-o.clientTop)}var lu=ce.linux&&ce.chrome?window.devicePixelRatio:ce.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ba(e){return ce.edge?e.wheelDeltaY/2:e.deltaY&&e.deltaMode===0?-e.deltaY/lu:e.deltaY&&e.deltaMode===1?-e.deltaY*20:e.deltaY&&e.deltaMode===2?-e.deltaY*60:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?-e.detail*20:e.detail?e.detail/-32765*60:0}function uo(e,o){var c=o.relatedTarget;if(!c)return!0;try{for(;c&&c!==e;)c=c.parentNode}catch{return!1}return c!==e}var ss={__proto__:null,on:ye,off:$e,stopPropagation:Un,disableScrollPropagation:lo,disableClickPropagation:Br,preventDefault:li,stop:Gn,getPropagationPath:ya,getMousePosition:va,getWheelDelta:ba,isExternalTarget:uo,addListener:ye,removeListener:$e},xa=Ct.extend({run:function(e,o,c,m){this.stop(),this._el=e,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(m||.5,.2),this._startPos=jn(e),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=et(this._animate,this),this._step()},_step:function(e){var o=+new Date-this._startTime,c=this._duration*1e3;o<c?this._runFrame(this._easeOut(o/c),e):(this._runFrame(1),this._complete())},_runFrame:function(e,o){var c=this._startPos.add(this._offset.multiplyBy(e));o&&c._round(),Ye(this._el,c),this.fire("step")},_complete:function(){Mt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),ke=Ct.extend({options:{crs:H,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,o){o=V(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(Qt(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=kr&&ce.any3d&&!ce.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ye(this._proxy,pa,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,o,c){if(o=o===void 0?this._zoom:this._limitZoom(o),e=this._limitCenter(Qt(e),o,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=h({animate:c.animate},c.zoom),c.pan=h({animate:c.animate,duration:c.duration},c.pan));var m=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,o,c.zoom):this._tryAnimatedPan(e,c.pan);if(m)return clearTimeout(this._sizeTimer),this}return this._resetView(e,o,c.pan&&c.pan.noMoveStart),this},setZoom:function(e,o){return this._loaded?this.setView(this.getCenter(),e,{zoom:o}):(this._zoom=e,this)},zoomIn:function(e,o){return e=e||(ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,o)},zoomOut:function(e,o){return e=e||(ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,o)},setZoomAround:function(e,o,c){var m=this.getZoomScale(o),x=this.getSize().divideBy(2),B=e instanceof xt?e:this.latLngToContainerPoint(e),Z=B.subtract(x).multiplyBy(1-1/m),lt=this.containerPointToLatLng(x.add(Z));return this.setView(lt,o,{zoom:c})},_getBoundsCenterZoom:function(e,o){o=o||{},e=e.getBounds?e.getBounds():ie(e);var c=$t(o.paddingTopLeft||o.padding||[0,0]),m=$t(o.paddingBottomRight||o.padding||[0,0]),x=this.getBoundsZoom(e,!1,c.add(m));if(x=typeof o.maxZoom=="number"?Math.min(o.maxZoom,x):x,x===1/0)return{center:e.getCenter(),zoom:x};var B=m.subtract(c).divideBy(2),Z=this.project(e.getSouthWest(),x),lt=this.project(e.getNorthEast(),x),wt=this.unproject(Z.add(lt).divideBy(2).add(B),x);return{center:wt,zoom:x}},fitBounds:function(e,o){if(e=ie(e),!e.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(e,o);return this.setView(c.center,c.zoom,o)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,o){return this.setView(e,this._zoom,{pan:o})},panBy:function(e,o){if(e=$t(e).round(),o=o||{},!e.x&&!e.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new xa,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){be(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,c,o.duration||.25,o.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,o,c){if(c=c||{},c.animate===!1||!ce.any3d)return this.setView(e,o,c);this._stop();var m=this.project(this.getCenter()),x=this.project(e),B=this.getSize(),Z=this._zoom;e=Qt(e),o=o===void 0?Z:o;var lt=Math.max(B.x,B.y),wt=lt*this.getZoomScale(Z,o),zt=x.distanceTo(m)||1,ee=1.42,fe=ee*ee;function Le(Je){var Nr=Je?-1:1,Bu=Je?wt:lt,an=wt*wt-lt*lt+Nr*fe*fe*zt*zt,Au=2*Bu*fe*zt,fr=an/Au,Lo=Math.sqrt(fr*fr+1)-fr,Tu=Lo<1e-9?-18:Math.log(Lo);return Tu}function _i(Je){return(Math.exp(Je)-Math.exp(-Je))/2}function si(Je){return(Math.exp(Je)+Math.exp(-Je))/2}function Li(Je){return _i(Je)/si(Je)}var Ke=Le(0);function on(Je){return lt*(si(Ke)/si(Ke+ee*Je))}function wo(Je){return lt*(si(Ke)*Li(Ke+ee*Je)-_i(Ke))/fe}function Es(Je){return 1-Math.pow(1-Je,1.5)}var Ia=Date.now(),zr=(Le(1)-Ke)/ee,Su=c.duration?1e3*c.duration:1e3*zr*.8;function Fa(){var Je=(Date.now()-Ia)/Su,Nr=Es(Je)*zr;Je<=1?(this._flyToFrame=et(Fa,this),this._move(this.unproject(m.add(x.subtract(m).multiplyBy(wo(Nr)/zt)),Z),this.getScaleZoom(lt/on(Nr),Z),{flyTo:!0})):this._move(e,o)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),Fa.call(this),this},flyToBounds:function(e,o){var c=this._getBoundsCenterZoom(e,o);return this.flyTo(c.center,c.zoom,o)},setMaxBounds:function(e){return e=ie(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var o=this.options.minZoom;return this.options.minZoom=e,this._loaded&&o!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var o=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&o!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,o){this._enforcingBounds=!0;var c=this.getCenter(),m=this._limitCenter(c,this._zoom,ie(e));return c.equals(m)||this.panTo(m,o),this._enforcingBounds=!1,this},panInside:function(e,o){o=o||{};var c=$t(o.paddingTopLeft||o.padding||[0,0]),m=$t(o.paddingBottomRight||o.padding||[0,0]),x=this.project(this.getCenter()),B=this.project(e),Z=this.getPixelBounds(),lt=gt([Z.min.add(c),Z.max.subtract(m)]),wt=lt.getSize();if(!lt.contains(B)){this._enforcingBounds=!0;var zt=B.subtract(lt.getCenter()),ee=lt.extend(B).getSize().subtract(wt);x.x+=zt.x<0?-ee.x:ee.x,x.y+=zt.y<0?-ee.y:ee.y,this.panTo(this.unproject(x),o),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=h({animate:!1,pan:!0},e===!0?{animate:!0}:e);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),m=o.divideBy(2).round(),x=c.divideBy(2).round(),B=m.subtract(x);return!B.x&&!B.y?this:(e.animate&&e.pan?this.panBy(B):(e.pan&&this._rawPanBy(B),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=h({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=f(this._handleGeolocationResponse,this),c=f(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,c,e):navigator.geolocation.getCurrentPosition(o,c,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var o=e.code,c=e.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var o=e.coords.latitude,c=e.coords.longitude,m=new ne(o,c),x=m.toBounds(e.coords.accuracy*2),B=this._locateOptions;if(B.setView){var Z=this.getBoundsZoom(x);this.setView(m,B.maxZoom?Math.min(Z,B.maxZoom):Z)}var lt={latlng:m,bounds:x,timestamp:e.timestamp};for(var wt in e.coords)typeof e.coords[wt]=="number"&&(lt[wt]=e.coords[wt]);this.fire("locationfound",lt)}},addHandler:function(e,o){if(!o)return this;var c=this[e]=new o(this);return this._handlers.push(c),this.options[e]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ve(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Mt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var e;for(e in this._layers)this._layers[e].remove();for(e in this._panes)Ve(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,o){var c="leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),m=Be("div",c,o||this._mapPane);return e&&(this._panes[e]=m),m},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),o=this.unproject(e.getBottomLeft()),c=this.unproject(e.getTopRight());return new Kt(o,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,o,c){e=ie(e),c=$t(c||[0,0]);var m=this.getZoom()||0,x=this.getMinZoom(),B=this.getMaxZoom(),Z=e.getNorthWest(),lt=e.getSouthEast(),wt=this.getSize().subtract(c),zt=gt(this.project(lt,m),this.project(Z,m)).getSize(),ee=ce.any3d?this.options.zoomSnap:1,fe=wt.x/zt.x,Le=wt.y/zt.y,_i=o?Math.max(fe,Le):Math.min(fe,Le);return m=this.getScaleZoom(_i,m),ee&&(m=Math.round(m/(ee/100))*(ee/100),m=o?Math.ceil(m/ee)*ee:Math.floor(m/ee)*ee),Math.max(x,Math.min(B,m))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new xt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,o){var c=this._getTopLeftPoint(e,o);return new Lt(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(e===void 0?this.getZoom():e)},getPane:function(e){return typeof e=="string"?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,o){var c=this.options.crs;return o=o===void 0?this._zoom:o,c.scale(e)/c.scale(o)},getScaleZoom:function(e,o){var c=this.options.crs;o=o===void 0?this._zoom:o;var m=c.zoom(e*c.scale(o));return isNaN(m)?1/0:m},project:function(e,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(Qt(e),o)},unproject:function(e,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng($t(e),o)},layerPointToLatLng:function(e){var o=$t(e).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(e){var o=this.project(Qt(e))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(Qt(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(ie(e))},distance:function(e,o){return this.options.crs.distance(Qt(e),Qt(o))},containerPointToLayerPoint:function(e){return $t(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return $t(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var o=this.containerPointToLayerPoint($t(e));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Qt(e)))},mouseEventToContainerPoint:function(e){return va(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var o=this._container=ma(e);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ye(o,"scroll",this._onScroll,this),this._containerId=y(o)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&ce.any3d,be(e,"leaflet-container"+(ce.touch?" leaflet-touch":"")+(ce.retina?" leaflet-retina":"")+(ce.ielt9?" leaflet-oldie":"")+(ce.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=Cn(e,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ye(this._mapPane,new xt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(be(e.markerPane,"leaflet-zoom-hide"),be(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,o,c){Ye(this._mapPane,new xt(0,0));var m=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var x=this._zoom!==o;this._moveStart(x,c)._move(e,o)._moveEnd(x),this.fire("viewreset"),m&&this.fire("load")},_moveStart:function(e,o){return e&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(e,o,c,m){o===void 0&&(o=this._zoom);var x=this._zoom!==o;return this._zoom=o,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),m?c&&c.pinch&&this.fire("zoom",c):((x||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Mt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){Ye(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[y(this._container)]=this;var o=e?$e:ye;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),ce.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Mt(this._resizeRequest),this._resizeRequest=et(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,o){for(var c=[],m,x=o==="mouseout"||o==="mouseover",B=e.target||e.srcElement,Z=!1;B;){if(m=this._targets[y(B)],m&&(o==="click"||o==="preclick")&&this._draggableMoved(m)){Z=!0;break}if(m&&m.listens(o,!0)&&(x&&!uo(B,e)||(c.push(m),x))||B===this._container)break;B=B.parentNode}return!c.length&&!Z&&!x&&this.listens(o,!0)&&(c=[this]),c},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var o=e.target||e.srcElement;if(!(!this._loaded||o._leaflet_disable_events||e.type==="click"&&this._isClickDisabled(o))){var c=e.type;c==="mousedown"&&ro(o),this._fireDOMEvent(e,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,o,c){if(e.type==="click"){var m=h({},e);m.type="preclick",this._fireDOMEvent(m,m.type,c)}var x=this._findEventTargets(e,o);if(c){for(var B=[],Z=0;Z<c.length;Z++)c[Z].listens(o,!0)&&B.push(c[Z]);x=B.concat(x)}if(x.length){o==="contextmenu"&&li(e);var lt=x[0],wt={originalEvent:e};if(e.type!=="keypress"&&e.type!=="keydown"&&e.type!=="keyup"){var zt=lt.getLatLng&&(!lt._radius||lt._radius<=10);wt.containerPoint=zt?this.latLngToContainerPoint(lt.getLatLng()):this.mouseEventToContainerPoint(e),wt.layerPoint=this.containerPointToLayerPoint(wt.containerPoint),wt.latlng=zt?lt.getLatLng():this.layerPointToLatLng(wt.layerPoint)}for(Z=0;Z<x.length;Z++)if(x[Z].fire(o,wt,!0),wt.originalEvent._stopped||x[Z].options.bubblingMouseEvents===!1&&At(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(e){return e=e.dragging&&e.dragging.enabled()?e:this,e.dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,o=this._handlers.length;e<o;e++)this._handlers[e].disable()},whenReady:function(e,o){return this._loaded?e.call(o||this,{target:this}):this.on("load",e,o),this},_getMapPanePos:function(){return jn(this._mapPane)||new xt(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,o){var c=e&&o!==void 0?this._getNewPixelOrigin(e,o):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,o){var c=this.getSize()._divideBy(2);return this.project(e,o)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,o,c){var m=this._getNewPixelOrigin(c,o);return this.project(e,o)._subtract(m)},_latLngBoundsToNewLayerBounds:function(e,o,c){var m=this._getNewPixelOrigin(c,o);return gt([this.project(e.getSouthWest(),o)._subtract(m),this.project(e.getNorthWest(),o)._subtract(m),this.project(e.getSouthEast(),o)._subtract(m),this.project(e.getNorthEast(),o)._subtract(m)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,o,c){if(!c)return e;var m=this.project(e,o),x=this.getSize().divideBy(2),B=new Lt(m.subtract(x),m.add(x)),Z=this._getBoundsOffset(B,c,o);return Math.abs(Z.x)<=1&&Math.abs(Z.y)<=1?e:this.unproject(m.add(Z),o)},_limitOffset:function(e,o){if(!o)return e;var c=this.getPixelBounds(),m=new Lt(c.min.add(e),c.max.add(e));return e.add(this._getBoundsOffset(m,o))},_getBoundsOffset:function(e,o,c){var m=gt(this.project(o.getNorthEast(),c),this.project(o.getSouthWest(),c)),x=m.min.subtract(e.min),B=m.max.subtract(e.max),Z=this._rebound(x.x,-B.x),lt=this._rebound(x.y,-B.y);return new xt(Z,lt)},_rebound:function(e,o){return e+o>0?Math.round(e-o)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(o))},_limitZoom:function(e){var o=this.getMinZoom(),c=this.getMaxZoom(),m=ce.any3d?this.options.zoomSnap:1;return m&&(e=Math.round(e/m)*m),Math.max(o,Math.min(c,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){We(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,o){var c=this._getCenterOffset(e)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,o),!0)},_createAnimProxy:function(){var e=this._proxy=Be("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(o){var c=Xs,m=this._proxy.style[c];$n(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),m===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ve(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),o=this.getZoom();$n(this._proxy,this.project(e,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,o,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var m=this.getZoomScale(o),x=this._getCenterOffset(e)._divideBy(1-1/m);return c.animate!==!0&&!this.getSize().contains(x)?!1:(et(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(e,o,!0)},this),!0)},_animateZoom:function(e,o,c,m){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=o,be(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:o,noUpdate:m}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&We(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function wa(e,o){return new ke(e,o)}var _e=Q.extend({options:{position:"topright"},initialize:function(e){V(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var o=this._map;return o&&o.removeControl(this),this.options.position=e,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var o=this._container=this.onAdd(e),c=this.getPosition(),m=e._controlCorners[c];return be(o,"leaflet-control"),c.indexOf("bottom")!==-1?m.insertBefore(o,m.firstChild):m.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ve(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),Vn=function(e){return new _e(e)};ke.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},o="leaflet-",c=this._controlContainer=Be("div",o+"control-container",this._container);function m(x,B){var Z=o+x+" "+o+B;e[x+B]=Be("div",Z,c)}m("top","left"),m("top","right"),m("bottom","left"),m("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)Ve(this._controlCorners[e]);Ve(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ar=_e.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,o,c,m){return c<m?-1:m<c?1:0}},initialize:function(e,o,c){V(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var m in e)this._addLayer(e[m],m);for(m in o)this._addLayer(o[m],m,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return _e.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,o){return this._addLayer(e,o),this._map?this._update():this},addOverlay:function(e,o){return this._addLayer(e,o,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var o=this._getLayer(y(e));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){be(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(be(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):We(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return We(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",o=this._container=Be("div",e),c=this.options.collapsed;o.setAttribute("aria-haspopup",!0),Br(o),lo(o);var m=this._section=Be("section",e+"-list");c&&(this._map.on("click",this.collapse,this),ye(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var x=this._layersLink=Be("a",e+"-toggle",o);x.href="#",x.title="Layers",x.setAttribute("role","button"),ye(x,{keydown:function(B){B.keyCode===13&&this._expandSafely()},click:function(B){li(B),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Be("div",e+"-base",m),this._separator=Be("div",e+"-separator",m),this._overlaysList=Be("div",e+"-overlays",m),o.appendChild(m)},_getLayer:function(e){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&y(this._layers[o].layer)===e)return this._layers[o]},_addLayer:function(e,o,c){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:o,overlay:c}),this.options.sortLayers&&this._layers.sort(f(function(m,x){return this.options.sortFunction(m.layer,x.layer,m.name,x.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Mr(this._baseLayersList),Mr(this._overlaysList),this._layerControlInputs=[];var e,o,c,m,x=0;for(c=0;c<this._layers.length;c++)m=this._layers[c],this._addItem(m),o=o||m.overlay,e=e||!m.overlay,x+=m.overlay?0:1;return this.options.hideSingleBase&&(e=e&&x>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=o&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var o=this._getLayer(y(e.target)),c=o.overlay?e.type==="add"?"overlayadd":"overlayremove":e.type==="add"?"baselayerchange":null;c&&this._map.fire(c,o)},_createRadioElement:function(e,o){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(o?' checked="checked"':"")+"/>",m=document.createElement("div");return m.innerHTML=c,m.firstChild},_addItem:function(e){var o=document.createElement("label"),c=this._map.hasLayer(e.layer),m;e.overlay?(m=document.createElement("input"),m.type="checkbox",m.className="leaflet-control-layers-selector",m.defaultChecked=c):m=this._createRadioElement("leaflet-base-layers_"+y(this),c),this._layerControlInputs.push(m),m.layerId=y(e.layer),ye(m,"click",this._onInputClick,this);var x=document.createElement("span");x.innerHTML=" "+e.name;var B=document.createElement("span");o.appendChild(B),B.appendChild(m),B.appendChild(x);var Z=e.overlay?this._overlaysList:this._baseLayersList;return Z.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var e=this._layerControlInputs,o,c,m=[],x=[];this._handlingClick=!0;for(var B=e.length-1;B>=0;B--)o=e[B],c=this._getLayer(o.layerId).layer,o.checked?m.push(c):o.checked||x.push(c);for(B=0;B<x.length;B++)this._map.hasLayer(x[B])&&this._map.removeLayer(x[B]);for(B=0;B<m.length;B++)this._map.hasLayer(m[B])||this._map.addLayer(m[B]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e=this._layerControlInputs,o,c,m=this._map.getZoom(),x=e.length-1;x>=0;x--)o=e[x],c=this._getLayer(o.layerId).layer,o.disabled=c.options.minZoom!==void 0&&m<c.options.minZoom||c.options.maxZoom!==void 0&&m>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,ye(e,"click",li),this.expand();var o=this;setTimeout(function(){$e(e,"click",li),o._preventClick=!1})}}),uu=function(e,o,c){return new Ar(e,o,c)},os=_e.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var o="leaflet-control-zoom",c=Be("div",o+" leaflet-bar"),m=this.options;return this._zoomInButton=this._createButton(m.zoomInText,m.zoomInTitle,o+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(m.zoomOutText,m.zoomOutTitle,o+"-out",c,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,o,c,m,x){var B=Be("a",c,m);return B.innerHTML=e,B.href="#",B.title=o,B.setAttribute("role","button"),B.setAttribute("aria-label",o),Br(B),ye(B,"click",Gn),ye(B,"click",x,this),ye(B,"click",this._refocusOnMap,this),B},_updateDisabled:function(){var e=this._map,o="leaflet-disabled";We(this._zoomInButton,o),We(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(be(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(be(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});ke.mergeOptions({zoomControl:!0}),ke.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new os,this.addControl(this.zoomControl))});var cu=function(e){return new os(e)},as=_e.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var o="leaflet-control-scale",c=Be("div",o),m=this.options;return this._addScales(m,o+"-line",c),e.on(m.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),c},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,o,c){e.metric&&(this._mScale=Be("div",o,c)),e.imperial&&(this._iScale=Be("div",o,c))},_update:function(){var e=this._map,o=e.getSize().y/2,c=e.distance(e.containerPointToLatLng([0,o]),e.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(c)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var o=this._getRoundNum(e),c=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,c,o/e)},_updateImperial:function(e){var o=e*3.2808399,c,m,x;o>5280?(c=o/5280,m=this._getRoundNum(c),this._updateScale(this._iScale,m+" mi",m/c)):(x=this._getRoundNum(o),this._updateScale(this._iScale,x+" ft",x/o))},_updateScale:function(e,o,c){e.style.width=Math.round(this.options.maxWidth*c)+"px",e.innerHTML=o},_getRoundNum:function(e){var o=Math.pow(10,(Math.floor(e)+"").length-1),c=e/o;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,o*c}}),ls=function(e){return new as(e)},hu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',en=_e.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ce.inlineSvg?hu+" ":"")+"Leaflet</a>"},initialize:function(e){V(this,e),this._attributions={}},onAdd:function(e){e.attributionControl=this,this._container=Be("div","leaflet-control-attribution"),Br(this._container);for(var o in e._layers)e._layers[o].getAttribution&&this.addAttribution(e._layers[o].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",function(){this.removeAttribution(e.layer.getAttribution())},this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var o in this._attributions)this._attributions[o]&&e.push(o);var c=[];this.options.prefix&&c.push(this.options.prefix),e.length&&c.push(e.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});ke.mergeOptions({attributionControl:!0}),ke.addInitHook(function(){this.options.attributionControl&&new en().addTo(this)});var La=function(e){return new en(e)};_e.Layers=Ar,_e.Zoom=os,_e.Scale=as,_e.Attribution=en,Vn.layers=uu,Vn.zoom=cu,Vn.scale=ls,Vn.attribution=La;var pi=Q.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});pi.addTo=function(e,o){return e.addHandler(o,this),this};var du={Events:Pt},Ca=ce.touch?"touchstart mousedown":"mousedown",kn=Ct.extend({options:{clickTolerance:3},initialize:function(e,o,c,m){V(this,m),this._element=e,this._dragStartTarget=o||e,this._preventOutline=c},enable:function(){this._enabled||(ye(this._dragStartTarget,Ca,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(kn._dragging===this&&this.finishDrag(!0),$e(this._dragStartTarget,Ca,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!Ys(this._element,"leaflet-zoom-anim"))){if(e.touches&&e.touches.length!==1){kn._dragging===this&&this.finishDrag();return}if(!(kn._dragging||e.shiftKey||e.which!==1&&e.button!==1&&!e.touches)&&(kn._dragging=this,this._preventOutline&&ro(this._element),eo(),Pr(),!this._moving)){this.fire("down");var o=e.touches?e.touches[0]:e,c=ga(this._element);this._startPoint=new xt(o.clientX,o.clientY),this._startPos=jn(this._element),this._parentScale=so(c);var m=e.type==="mousedown";ye(document,m?"mousemove":"touchmove",this._onMove,this),ye(document,m?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(e){if(this._enabled){if(e.touches&&e.touches.length>1){this._moved=!0;return}var o=e.touches&&e.touches.length===1?e.touches[0]:e,c=new xt(o.clientX,o.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,li(e),this._moved||(this.fire("dragstart"),this._moved=!0,be(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),be(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=e,this._updatePosition())}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),Ye(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){We(document.body,"leaflet-dragging"),this._lastTarget&&(We(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),$e(document,"mousemove touchmove",this._onMove,this),$e(document,"mouseup touchend touchcancel",this._onUp,this),io(),Sr();var o=this._moved&&this._moving;this._moving=!1,kn._dragging=!1,o&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function Ea(e,o,c){var m,x=[1,4,2,8],B,Z,lt,wt,zt,ee,fe,Le;for(B=0,ee=e.length;B<ee;B++)e[B]._code=bi(e[B],o);for(lt=0;lt<4;lt++){for(fe=x[lt],m=[],B=0,ee=e.length,Z=ee-1;B<ee;Z=B++)wt=e[B],zt=e[Z],wt._code&fe?zt._code&fe||(Le=Mn(zt,wt,fe,o,c),Le._code=bi(Le,o),m.push(Le)):(zt._code&fe&&(Le=Mn(zt,wt,fe,o,c),Le._code=bi(Le,o),m.push(Le)),m.push(wt));e=m}return e}function ka(e,o){var c,m,x,B,Z,lt,wt,zt,ee;if(!e||e.length===0)throw new Error("latlngs not passed");xi(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var fe=Qt([0,0]),Le=ie(e),_i=Le.getNorthWest().distanceTo(Le.getSouthWest())*Le.getNorthEast().distanceTo(Le.getNorthWest());_i<1700&&(fe=co(e));var si=e.length,Li=[];for(c=0;c<si;c++){var Ke=Qt(e[c]);Li.push(o.project(Qt([Ke.lat-fe.lat,Ke.lng-fe.lng])))}for(lt=wt=zt=0,c=0,m=si-1;c<si;m=c++)x=Li[c],B=Li[m],Z=x.y*B.x-B.y*x.x,wt+=(x.x+B.x)*Z,zt+=(x.y+B.y)*Z,lt+=Z*3;lt===0?ee=Li[0]:ee=[wt/lt,zt/lt];var on=o.unproject($t(ee));return Qt([on.lat+fe.lat,on.lng+fe.lng])}function co(e){for(var o=0,c=0,m=0,x=0;x<e.length;x++){var B=Qt(e[x]);o+=B.lat,c+=B.lng,m++}return Qt([o/m,c/m])}var fu={__proto__:null,clipPolygon:Ea,polygonCenter:ka,centroid:co};function Ma(e,o){if(!o||!e.length)return e.slice();var c=o*o;return e=Pa(e,c),e=ui(e,c),e}function ho(e,o,c){return Math.sqrt(Tr(e,o,c,!0))}function pu(e,o,c){return Tr(e,o,c)}function ui(e,o){var c=e.length,m=typeof Uint8Array<"u"?Uint8Array:Array,x=new m(c);x[0]=x[c-1]=1,hi(e,x,o,0,c-1);var B,Z=[];for(B=0;B<c;B++)x[B]&&Z.push(e[B]);return Z}function hi(e,o,c,m,x){var B=0,Z,lt,wt;for(lt=m+1;lt<=x-1;lt++)wt=Tr(e[lt],e[m],e[x],!0),wt>B&&(Z=lt,B=wt);B>c&&(o[Z]=1,hi(e,o,c,m,Z),hi(e,o,c,Z,x))}function Pa(e,o){for(var c=[e[0]],m=1,x=0,B=e.length;m<B;m++)mu(e[m],e[x])>o&&(c.push(e[m]),x=m);return x<B-1&&c.push(e[B-1]),c}var Hn;function Zn(e,o,c,m,x){var B=m?Hn:bi(e,c),Z=bi(o,c),lt,wt,zt;for(Hn=Z;;){if(!(B|Z))return[e,o];if(B&Z)return!1;lt=B||Z,wt=Mn(e,o,lt,c,x),zt=bi(wt,c),lt===B?(e=wt,B=zt):(o=wt,Z=zt)}}function Mn(e,o,c,m,x){var B=o.x-e.x,Z=o.y-e.y,lt=m.min,wt=m.max,zt,ee;return c&8?(zt=e.x+B*(wt.y-e.y)/Z,ee=wt.y):c&4?(zt=e.x+B*(lt.y-e.y)/Z,ee=lt.y):c&2?(zt=wt.x,ee=e.y+Z*(wt.x-e.x)/B):c&1&&(zt=lt.x,ee=e.y+Z*(lt.x-e.x)/B),new xt(zt,ee,x)}function bi(e,o){var c=0;return e.x<o.min.x?c|=1:e.x>o.max.x&&(c|=2),e.y<o.min.y?c|=4:e.y>o.max.y&&(c|=8),c}function mu(e,o){var c=o.x-e.x,m=o.y-e.y;return c*c+m*m}function Tr(e,o,c,m){var x=o.x,B=o.y,Z=c.x-x,lt=c.y-B,wt=Z*Z+lt*lt,zt;return wt>0&&(zt=((e.x-x)*Z+(e.y-B)*lt)/wt,zt>1?(x=c.x,B=c.y):zt>0&&(x+=Z*zt,B+=lt*zt)),Z=e.x-x,lt=e.y-B,m?Z*Z+lt*lt:new xt(x,B)}function xi(e){return!pt(e[0])||typeof e[0][0]!="object"&&typeof e[0][0]<"u"}function $i(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),xi(e)}function fo(e,o){var c,m,x,B,Z,lt,wt,zt;if(!e||e.length===0)throw new Error("latlngs not passed");xi(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var ee=Qt([0,0]),fe=ie(e),Le=fe.getNorthWest().distanceTo(fe.getSouthWest())*fe.getNorthEast().distanceTo(fe.getNorthWest());Le<1700&&(ee=co(e));var _i=e.length,si=[];for(c=0;c<_i;c++){var Li=Qt(e[c]);si.push(o.project(Qt([Li.lat-ee.lat,Li.lng-ee.lng])))}for(c=0,m=0;c<_i-1;c++)m+=si[c].distanceTo(si[c+1])/2;if(m===0)zt=si[0];else for(c=0,B=0;c<_i-1;c++)if(Z=si[c],lt=si[c+1],x=Z.distanceTo(lt),B+=x,B>m){wt=(B-m)/x,zt=[lt.x-wt*(lt.x-Z.x),lt.y-wt*(lt.y-Z.y)];break}var Ke=o.unproject($t(zt));return Qt([Ke.lat+ee.lat,Ke.lng+ee.lng])}var us={__proto__:null,simplify:Ma,pointToSegmentDistance:ho,closestPointOnSegment:pu,clipSegment:Zn,_getEdgeIntersection:Mn,_getBitCode:bi,_sqClosestPointOnSegment:Tr,isFlat:xi,_flat:$i,polylineCenter:fo},po={project:function(e){return new xt(e.lng,e.lat)},unproject:function(e){return new ne(e.y,e.x)},bounds:new Lt([-180,-90],[180,90])},ji={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Lt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(e){var o=Math.PI/180,c=this.R,m=e.lat*o,x=this.R_MINOR/c,B=Math.sqrt(1-x*x),Z=B*Math.sin(m),lt=Math.tan(Math.PI/4-m/2)/Math.pow((1-Z)/(1+Z),B/2);return m=-c*Math.log(Math.max(lt,1e-10)),new xt(e.lng*o*c,m)},unproject:function(e){for(var o=180/Math.PI,c=this.R,m=this.R_MINOR/c,x=Math.sqrt(1-m*m),B=Math.exp(-e.y/c),Z=Math.PI/2-2*Math.atan(B),lt=0,wt=.1,zt;lt<15&&Math.abs(wt)>1e-7;lt++)zt=x*Math.sin(Z),zt=Math.pow((1-zt)/(1+zt),x/2),wt=Math.PI/2-2*Math.atan(B*zt)-Z,Z+=wt;return new ne(Z*o,e.x*o/c)}},nn={__proto__:null,LonLat:po,Mercator:ji,SphericalMercator:Xt},cs=h({},Ht,{code:"EPSG:3395",projection:ji,transformation:function(){var e=.5/(Math.PI*ji.R);return $(e,.5,-e,.5)}()}),mo=h({},Ht,{code:"EPSG:4326",projection:po,transformation:$(1/180,1,-1/180,.5)}),go=h({},bt,{projection:po,transformation:$(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,o){var c=o.lng-e.lng,m=o.lat-e.lat;return Math.sqrt(c*c+m*m)},infinite:!0});bt.Earth=Ht,bt.EPSG3395=cs,bt.EPSG3857=H,bt.EPSG900913=ot,bt.EPSG4326=mo,bt.Simple=go;var mi=Ct.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[y(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[y(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var o=e.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var c=this.getEvents();o.on(c,this),this.once("remove",function(){o.off(c,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});ke.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var o=y(e);return this._layers[o]?this:(this._layers[o]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e),this)},removeLayer:function(e){var o=y(e);return this._layers[o]?(this._loaded&&e.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return y(e)in this._layers},eachLayer:function(e,o){for(var c in this._layers)e.call(o,this._layers[c]);return this},_addLayers:function(e){e=e?pt(e)?e:[e]:[];for(var o=0,c=e.length;o<c;o++)this.addLayer(e[o])},_addZoomLimit:function(e){(!isNaN(e.options.maxZoom)||!isNaN(e.options.minZoom))&&(this._zoomBoundLayers[y(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var o=y(e);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,o=-1/0,c=this._getZoomSpan();for(var m in this._zoomBoundLayers){var x=this._zoomBoundLayers[m].options;e=x.minZoom===void 0?e:Math.min(e,x.minZoom),o=x.maxZoom===void 0?o:Math.max(o,x.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=e===1/0?void 0:e,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ar=mi.extend({initialize:function(e,o){V(this,o),this._layers={};var c,m;if(e)for(c=0,m=e.length;c<m;c++)this.addLayer(e[c])},addLayer:function(e){var o=this.getLayerId(e);return this._layers[o]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var o=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(e){var o=typeof e=="number"?e:this.getLayerId(e);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var o=Array.prototype.slice.call(arguments,1),c,m;for(c in this._layers)m=this._layers[c],m[e]&&m[e].apply(m,o);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,o){for(var c in this._layers)e.call(o,this._layers[c]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return y(e)}}),gu=function(e,o){return new ar(e,o)},qi=ar.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),ar.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),ar.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new Kt;for(var o in this._layers){var c=this._layers[o];e.extend(c.getBounds?c.getBounds():c.getLatLng())}return e}}),_u=function(e,o){return new qi(e,o)},lr=Q.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){V(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,o){var c=this._getIconUrl(e);if(!c){if(e==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var m=this._createImg(c,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(m,e),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),m},_setIconStyles:function(e,o){var c=this.options,m=c[o+"Size"];typeof m=="number"&&(m=[m,m]);var x=$t(m),B=$t(o==="shadow"&&c.shadowAnchor||c.iconAnchor||x&&x.divideBy(2,!0));e.className="leaflet-marker-"+o+" "+(c.className||""),B&&(e.style.marginLeft=-B.x+"px",e.style.marginTop=-B.y+"px"),x&&(e.style.width=x.x+"px",e.style.height=x.y+"px")},_createImg:function(e,o){return o=o||document.createElement("img"),o.src=e,o},_getIconUrl:function(e){return ce.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function yu(e){return new lr(e)}var Dr=lr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return typeof Dr.imagePath!="string"&&(Dr.imagePath=this._detectIconPath()),(this.options.imagePath||Dr.imagePath)+lr.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var o=function(c,m,x){var B=m.exec(c);return B&&B[x]};return e=o(e,/^url\((['"])?(.+)\1\)$/,2),e&&o(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=Be("div","leaflet-default-icon-path",document.body),o=Cn(e,"background-image")||Cn(e,"backgroundImage");if(document.body.removeChild(e),o=this._stripUrl(o),o)return o;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),hs=pi.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new kn(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),be(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&We(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var o=this._marker,c=o._map,m=this._marker.options.autoPanSpeed,x=this._marker.options.autoPanPadding,B=jn(o._icon),Z=c.getPixelBounds(),lt=c.getPixelOrigin(),wt=gt(Z.min._subtract(lt).add(x),Z.max._subtract(lt).subtract(x));if(!wt.contains(B)){var zt=$t((Math.max(wt.max.x,B.x)-wt.max.x)/(Z.max.x-wt.max.x)-(Math.min(wt.min.x,B.x)-wt.min.x)/(Z.min.x-wt.min.x),(Math.max(wt.max.y,B.y)-wt.max.y)/(Z.max.y-wt.max.y)-(Math.min(wt.min.y,B.y)-wt.min.y)/(Z.min.y-wt.min.y)).multiplyBy(m);c.panBy(zt,{animate:!1}),this._draggable._newPos._add(zt),this._draggable._startPos._add(zt),Ye(o._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=et(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(Mt(this._panRequest),this._panRequest=et(this._adjustPan.bind(this,e)))},_onDrag:function(e){var o=this._marker,c=o._shadow,m=jn(o._icon),x=o._map.layerPointToLatLng(m);c&&Ye(c,m),o._latlng=x,e.latlng=x,e.oldLatLng=this._oldLatLng,o.fire("move",e).fire("drag",e)},_onDragEnd:function(e){Mt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),ds=mi.extend({options:{icon:new Dr,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,o){V(this,o),this._latlng=Qt(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var o=this._latlng;return this._latlng=Qt(e),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=e.icon.createIcon(this._icon),m=!1;c!==this._icon&&(this._icon&&this._removeIcon(),m=!0,e.title&&(c.title=e.title),c.tagName==="IMG"&&(c.alt=e.alt||"")),be(c,o),e.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ye(c,"focus",this._panOnFocus,this);var x=e.icon.createShadow(this._shadow),B=!1;x!==this._shadow&&(this._removeShadow(),B=!0),x&&(be(x,o),x.alt=""),this._shadow=x,e.opacity<1&&this._updateOpacity(),m&&this.getPane().appendChild(this._icon),this._initInteraction(),x&&B&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&$e(this._icon,"focus",this._panOnFocus,this),Ve(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ve(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&Ye(this._icon,e),this._shadow&&Ye(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var o=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(be(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),hs)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new hs(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&Ni(this._icon,e),this._shadow&&Ni(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var o=this.options.icon.options,c=o.iconSize?$t(o.iconSize):$t(0,0),m=o.iconAnchor?$t(o.iconAnchor):$t(0,0);e.panInside(this._latlng,{paddingTopLeft:m,paddingBottomRight:c.subtract(m)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function vu(e,o){return new ds(e,o)}var pn=mi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return V(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),rn=pn.extend({options:{fill:!0,radius:10},initialize:function(e,o){V(this,o),this._latlng=Qt(e),this._radius=this.options.radius},setLatLng:function(e){var o=this._latlng;return this._latlng=Qt(e),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var o=e&&e.radius||this._radius;return pn.prototype.setStyle.call(this,e),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,o=this._radiusY||e,c=this._clickTolerance(),m=[e+c,o+c];this._pxBounds=new Lt(this._point.subtract(m),this._point.add(m))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Sa(e,o){return new rn(e,o)}var _o=rn.extend({initialize:function(e,o,c){if(typeof o=="number"&&(o=h({},c,{radius:o})),V(this,o),this._latlng=Qt(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new Kt(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:pn.prototype.setStyle,_project:function(){var e=this._latlng.lng,o=this._latlng.lat,c=this._map,m=c.options.crs;if(m.distance===Ht.distance){var x=Math.PI/180,B=this._mRadius/Ht.R/x,Z=c.project([o+B,e]),lt=c.project([o-B,e]),wt=Z.add(lt).divideBy(2),zt=c.unproject(wt).lat,ee=Math.acos((Math.cos(B*x)-Math.sin(o*x)*Math.sin(zt*x))/(Math.cos(o*x)*Math.cos(zt*x)))/x;(isNaN(ee)||ee===0)&&(ee=B/Math.cos(Math.PI/180*o)),this._point=wt.subtract(c.getPixelOrigin()),this._radius=isNaN(ee)?0:wt.x-c.project([zt,e-ee]).x,this._radiusY=wt.y-Z.y}else{var fe=m.unproject(m.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(fe).x}this._updateBounds()}});function qn(e,o,c){return new _o(e,o,c)}var mn=pn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,o){V(this,o),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var o=1/0,c=null,m=Tr,x,B,Z=0,lt=this._parts.length;Z<lt;Z++)for(var wt=this._parts[Z],zt=1,ee=wt.length;zt<ee;zt++){x=wt[zt-1],B=wt[zt];var fe=m(e,x,B,!0);fe<o&&(o=fe,c=m(e,x,B))}return c&&(c.distance=Math.sqrt(o)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return fo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,o){return o=o||this._defaultShape(),e=Qt(e),o.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new Kt,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return xi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var o=[],c=xi(e),m=0,x=e.length;m<x;m++)c?(o[m]=Qt(e[m]),this._bounds.extend(o[m])):o[m]=this._convertLatLngs(e[m]);return o},_project:function(){var e=new Lt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),o=new xt(e,e);this._rawPxBounds&&(this._pxBounds=new Lt([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(e,o,c){var m=e[0]instanceof ne,x=e.length,B,Z;if(m){for(Z=[],B=0;B<x;B++)Z[B]=this._map.latLngToLayerPoint(e[B]),c.extend(Z[B]);o.push(Z)}else for(B=0;B<x;B++)this._projectLatlngs(e[B],o,c)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,c,m,x,B,Z,lt,wt;for(c=0,x=0,B=this._rings.length;c<B;c++)for(wt=this._rings[c],m=0,Z=wt.length;m<Z-1;m++)lt=Zn(wt[m],wt[m+1],e,m,!0),lt&&(o[x]=o[x]||[],o[x].push(lt[0]),(lt[1]!==wt[m+1]||m===Z-2)&&(o[x].push(lt[1]),x++))}},_simplifyPoints:function(){for(var e=this._parts,o=this.options.smoothFactor,c=0,m=e.length;c<m;c++)e[c]=Ma(e[c],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,o){var c,m,x,B,Z,lt,wt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(c=0,B=this._parts.length;c<B;c++)for(lt=this._parts[c],m=0,Z=lt.length,x=Z-1;m<Z;x=m++)if(!(!o&&m===0)&&ho(e,lt[x],lt[m])<=wt)return!0;return!1}});function bu(e,o){return new mn(e,o)}mn._flat=$i;var Pn=mn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ka(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var o=mn.prototype._convertLatLngs.call(this,e),c=o.length;return c>=2&&o[0]instanceof ne&&o[0].equals(o[c-1])&&o.pop(),o},_setLatLngs:function(e){mn.prototype._setLatLngs.call(this,e),xi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return xi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,o=this.options.weight,c=new xt(o,o);if(e=new Lt(e.min.subtract(c),e.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}for(var m=0,x=this._rings.length,B;m<x;m++)B=Ea(this._rings[m],e,!0),B.length&&this._parts.push(B)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var o=!1,c,m,x,B,Z,lt,wt,zt;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(B=0,wt=this._parts.length;B<wt;B++)for(c=this._parts[B],Z=0,zt=c.length,lt=zt-1;Z<zt;lt=Z++)m=c[Z],x=c[lt],m.y>e.y!=x.y>e.y&&e.x<(x.x-m.x)*(e.y-m.y)/(x.y-m.y)+m.x&&(o=!o);return o||mn.prototype._containsPoint.call(this,e,!0)}});function Rr(e,o){return new Pn(e,o)}var gn=qi.extend({initialize:function(e,o){V(this,o),this._layers={},e&&this.addData(e)},addData:function(e){var o=pt(e)?e:e.features,c,m,x;if(o){for(c=0,m=o.length;c<m;c++)x=o[c],(x.geometries||x.geometry||x.features||x.coordinates)&&this.addData(x);return this}var B=this.options;if(B.filter&&!B.filter(e))return this;var Z=fs(e,B);return Z?(Z.feature=ys(e),Z.defaultOptions=Z.options,this.resetStyle(Z),B.onEachFeature&&B.onEachFeature(e,Z),this.addLayer(Z)):this},resetStyle:function(e){return e===void 0?this.eachLayer(this.resetStyle,this):(e.options=h({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(o){this._setLayerStyle(o,e)},this)},_setLayerStyle:function(e,o){e.setStyle&&(typeof o=="function"&&(o=o(e.feature)),e.setStyle(o))}});function fs(e,o){var c=e.type==="Feature"?e.geometry:e,m=c?c.coordinates:null,x=[],B=o&&o.pointToLayer,Z=o&&o.coordsToLatLng||ps,lt,wt,zt,ee;if(!m&&!c)return null;switch(c.type){case"Point":return lt=Z(m),Ba(B,e,lt,o);case"MultiPoint":for(zt=0,ee=m.length;zt<ee;zt++)lt=Z(m[zt]),x.push(Ba(B,e,lt,o));return new qi(x);case"LineString":case"MultiLineString":return wt=ms(m,c.type==="LineString"?0:1,Z),new mn(wt,o);case"Polygon":case"MultiPolygon":return wt=ms(m,c.type==="Polygon"?1:2,Z),new Pn(wt,o);case"GeometryCollection":for(zt=0,ee=c.geometries.length;zt<ee;zt++){var fe=fs({geometry:c.geometries[zt],type:"Feature",properties:e.properties},o);fe&&x.push(fe)}return new qi(x);case"FeatureCollection":for(zt=0,ee=c.features.length;zt<ee;zt++){var Le=fs(c.features[zt],o);Le&&x.push(Le)}return new qi(x);default:throw new Error("Invalid GeoJSON object.")}}function Ba(e,o,c,m){return e?e(o,c):new ds(c,m&&m.markersInheritOptions&&m)}function ps(e){return new ne(e[1],e[0],e[2])}function ms(e,o,c){for(var m=[],x=0,B=e.length,Z;x<B;x++)Z=o?ms(e[x],o-1,c):(c||ps)(e[x]),m.push(Z);return m}function gs(e,o){return e=Qt(e),e.alt!==void 0?[U(e.lng,o),U(e.lat,o),U(e.alt,o)]:[U(e.lng,o),U(e.lat,o)]}function _s(e,o,c,m){for(var x=[],B=0,Z=e.length;B<Z;B++)x.push(o?_s(e[B],xi(e[B])?0:o-1,c,m):gs(e[B],m));return!o&&c&&x.length>0&&x.push(x[0].slice()),x}function ur(e,o){return e.feature?h({},e.feature,{geometry:o}):ys(o)}function ys(e){return e.type==="Feature"||e.type==="FeatureCollection"?e:{type:"Feature",properties:{},geometry:e}}var vs={toGeoJSON:function(e){return ur(this,{type:"Point",coordinates:gs(this.getLatLng(),e)})}};ds.include(vs),_o.include(vs),rn.include(vs),mn.include({toGeoJSON:function(e){var o=!xi(this._latlngs),c=_s(this._latlngs,o?1:0,!1,e);return ur(this,{type:(o?"Multi":"")+"LineString",coordinates:c})}}),Pn.include({toGeoJSON:function(e){var o=!xi(this._latlngs),c=o&&!xi(this._latlngs[0]),m=_s(this._latlngs,c?2:o?1:0,!0,e);return o||(m=[m]),ur(this,{type:(c?"Multi":"")+"Polygon",coordinates:m})}}),ar.include({toMultiPoint:function(e){var o=[];return this.eachLayer(function(c){o.push(c.toGeoJSON(e).geometry.coordinates)}),ur(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(e){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(e);var c=o==="GeometryCollection",m=[];return this.eachLayer(function(x){if(x.toGeoJSON){var B=x.toGeoJSON(e);if(c)m.push(B.geometry);else{var Z=ys(B);Z.type==="FeatureCollection"?m.push.apply(m,Z.features):m.push(Z)}}}),c?ur(this,{geometries:m,type:"GeometryCollection"}):{type:"FeatureCollection",features:m}}});function bs(e,o){return new gn(e,o)}var Aa=bs,cr=mi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,o,c){this._url=e,this._bounds=ie(o),V(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(be(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ve(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&sr(this._image),this},bringToBack:function(){return this._map&&Nn(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=ie(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e=this._url.tagName==="IMG",o=this._image=e?this._url:Be("img");if(be(o,"leaflet-image-layer"),this._zoomAnimated&&be(o,"leaflet-zoom-animated"),this.options.className&&be(o,this.options.className),o.onselectstart=P,o.onmousemove=P,o.onload=f(this.fire,this,"load"),o.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(e){var o=this._map.getZoomScale(e.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;$n(this._image,c,o)},_reset:function(){var e=this._image,o=new Lt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=o.getSize();Ye(e,o.min),e.style.width=c.x+"px",e.style.height=c.y+"px"},_updateOpacity:function(){Ni(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),xu=function(e,o,c){return new cr(e,o,c)},Or=cr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e=this._url.tagName==="VIDEO",o=this._image=e?this._url:Be("video");if(be(o,"leaflet-image-layer"),this._zoomAnimated&&be(o,"leaflet-zoom-animated"),this.options.className&&be(o,this.options.className),o.onselectstart=P,o.onmousemove=P,o.onloadeddata=f(this.fire,this,"load"),e){for(var c=o.getElementsByTagName("source"),m=[],x=0;x<c.length;x++)m.push(c[x].src);this._url=c.length>0?m:[o.src];return}pt(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var B=0;B<this._url.length;B++){var Z=Be("source");Z.src=this._url[B],o.appendChild(Z)}}});function Ta(e,o,c){return new Or(e,o,c)}var Da=cr.extend({_initImage:function(){var e=this._image=this._url;be(e,"leaflet-image-layer"),this._zoomAnimated&&be(e,"leaflet-zoom-animated"),this.options.className&&be(e,this.options.className),e.onselectstart=P,e.onmousemove=P}});function wu(e,o,c){return new Da(e,o,c)}var sn=mi.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,o){e&&(e instanceof ne||pt(e))?(this._latlng=Qt(e),V(this,o)):(V(this,e),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(e){return e=arguments.length?e:this._source._map,e.hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&Ni(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&Ni(this._container,1),this.bringToFront(),this.options.interactive&&(be(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(Ni(this._container,0),this._removeTimeout=setTimeout(f(Ve,void 0,this._container),200)):Ve(this._container),this.options.interactive&&(We(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=Qt(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&sr(this._container),this},bringToBack:function(){return this._map&&Nn(this._container),this},_prepareOpen:function(e){var o=this._source;if(!o._map)return!1;if(o instanceof qi){o=null;var c=this._source._layers;for(var m in c)if(c[m]._map){o=c[m];break}if(!o)return!1;this._source=o}if(!e)if(o.getCenter)e=o.getCenter();else if(o.getLatLng)e=o.getLatLng();else if(o.getBounds)e=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")e.innerHTML=o;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),o=$t(this.options.offset),c=this._getAnchor();this._zoomAnimated?Ye(this._container,e.add(c)):o=o.add(e).add(c);var m=this._containerBottom=-o.y,x=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=m+"px",this._container.style.left=x+"px"}},_getAnchor:function(){return[0,0]}});ke.include({_initOverlay:function(e,o,c,m){var x=o;return x instanceof e||(x=new e(m).setContent(o)),c&&x.setLatLng(c),x}}),mi.include({_initOverlay:function(e,o,c,m){var x=c;return x instanceof e?(V(x,m),x._source=this):(x=o&&!m?o:new e(m,this),x.setContent(c)),x}});var Sn=sn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return e=arguments.length?e:this._source._map,!e.hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,sn.prototype.openOn.call(this,e)},onAdd:function(e){sn.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof pn||this._source.on("preclick",Un))},onRemove:function(e){sn.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof pn||this._source.off("preclick",Un))},getEvents:function(){var e=sn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",o=this._container=Be("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Be("div",e+"-content-wrapper",o);if(this._contentNode=Be("div",e+"-content",c),Br(o),lo(this._contentNode),ye(o,"contextmenu",Un),this._tipContainer=Be("div",e+"-tip-container",o),this._tip=Be("div",e+"-tip",this._tipContainer),this.options.closeButton){var m=this._closeButton=Be("a",e+"-close-button",o);m.setAttribute("role","button"),m.setAttribute("aria-label","Close popup"),m.href="#close",m.innerHTML='<span aria-hidden="true">&#215;</span>',ye(m,"click",function(x){li(x),this.close()},this)}},_updateLayout:function(){var e=this._contentNode,o=e.style;o.width="",o.whiteSpace="nowrap";var c=e.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),o.width=c+1+"px",o.whiteSpace="",o.height="";var m=e.offsetHeight,x=this.options.maxHeight,B="leaflet-popup-scrolled";x&&m>x?(o.height=x+"px",be(e,B)):We(e,B),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var o=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),c=this._getAnchor();Ye(this._container,o.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var e=this._map,o=parseInt(Cn(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+o,m=this._containerWidth,x=new xt(this._containerLeft,-c-this._containerBottom);x._add(jn(this._container));var B=e.layerPointToContainerPoint(x),Z=$t(this.options.autoPanPadding),lt=$t(this.options.autoPanPaddingTopLeft||Z),wt=$t(this.options.autoPanPaddingBottomRight||Z),zt=e.getSize(),ee=0,fe=0;B.x+m+wt.x>zt.x&&(ee=B.x+m-zt.x+wt.x),B.x-ee-lt.x<0&&(ee=B.x-lt.x),B.y+c+wt.y>zt.y&&(fe=B.y+c-zt.y+wt.y),B.y-fe-lt.y<0&&(fe=B.y-lt.y),(ee||fe)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([ee,fe]))}},_getAnchor:function(){return $t(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Lu=function(e,o){return new Sn(e,o)};ke.mergeOptions({closePopupOnClick:!0}),ke.include({openPopup:function(e,o,c){return this._initOverlay(Sn,e,o,c).openOn(this),this},closePopup:function(e){return e=arguments.length?e:this._popup,e&&e.close(),this}}),mi.include({bindPopup:function(e,o){return this._popup=this._initOverlay(Sn,this._popup,e,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&(this instanceof qi||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(!(!this._popup||!this._map)){Gn(e);var o=e.layer||e.target;if(this._popup._source===o&&!(o instanceof pn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng);return}this._popup._source=o,this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){e.originalEvent.keyCode===13&&this._openPopup(e)}});var xs=sn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){sn.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){sn.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=sn.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip",o=e+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Be("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+y(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var o,c,m=this._map,x=this._container,B=m.latLngToContainerPoint(m.getCenter()),Z=m.layerPointToContainerPoint(e),lt=this.options.direction,wt=x.offsetWidth,zt=x.offsetHeight,ee=$t(this.options.offset),fe=this._getAnchor();lt==="top"?(o=wt/2,c=zt):lt==="bottom"?(o=wt/2,c=0):lt==="center"?(o=wt/2,c=zt/2):lt==="right"?(o=0,c=zt/2):lt==="left"?(o=wt,c=zt/2):Z.x<B.x?(lt="right",o=0,c=zt/2):(lt="left",o=wt+(ee.x+fe.x)*2,c=zt/2),e=e.subtract($t(o,c,!0)).add(ee).add(fe),We(x,"leaflet-tooltip-right"),We(x,"leaflet-tooltip-left"),We(x,"leaflet-tooltip-top"),We(x,"leaflet-tooltip-bottom"),be(x,"leaflet-tooltip-"+lt),Ye(x,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&Ni(this._container,e)},_animateZoom:function(e){var o=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(o)},_getAnchor:function(){return $t(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Cu=function(e,o){return new xs(e,o)};ke.include({openTooltip:function(e,o,c){return this._initOverlay(xs,e,o,c).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),mi.include({bindTooltip:function(e,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(xs,this._tooltip,e,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(!(!e&&this._tooltipHandlersAdded)){var o=e?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[o](c),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof qi||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var o=typeof e.getElement=="function"&&e.getElement();o&&(ye(o,"focus",function(){this._tooltip._source=e,this.openTooltip()},this),ye(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var o=typeof e.getElement=="function"&&e.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(e)});return}this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)}},_moveTooltip:function(e){var o=e.latlng,c,m;this._tooltip.options.sticky&&e.originalEvent&&(c=this._map.mouseEventToContainerPoint(e.originalEvent),m=this._map.containerPointToLayerPoint(c),o=this._map.layerPointToLatLng(m)),this._tooltip.setLatLng(o)}});var Ra=lr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var o=e&&e.tagName==="DIV"?e:document.createElement("div"),c=this.options;if(c.html instanceof Element?(Mr(o),o.appendChild(c.html)):o.innerHTML=c.html!==!1?c.html:"",c.bgPos){var m=$t(c.bgPos);o.style.backgroundPosition=-m.x+"px "+-m.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function Eu(e){return new Ra(e)}lr.Default=Dr;var Ir=mi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ce.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){V(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),Ve(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(sr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Nn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=C(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof xt?e:new xt(e,e)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var o=this.getPane().children,c=-e(-1/0,1/0),m=0,x=o.length,B;m<x;m++)B=o[m].style.zIndex,o[m]!==this._container&&B&&(c=e(c,+B));isFinite(c)&&(this.options.zIndex=c+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ce.ielt9){Ni(this._container,this.options.opacity);var e=+new Date,o=!1,c=!1;for(var m in this._tiles){var x=this._tiles[m];if(!(!x.current||!x.loaded)){var B=Math.min(1,(e-x.loaded)/200);Ni(x.el,B),B<1?o=!0:(x.active?c=!0:this._onOpaqueTile(x),x.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),o&&(Mt(this._fadeFrame),this._fadeFrame=et(this._updateOpacity,this))}},_onOpaqueTile:P,_initContainer:function(){this._container||(this._container=Be("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,o=this.options.maxZoom;if(e!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===e?(this._levels[c].el.style.zIndex=o-Math.abs(e-c),this._onUpdateLevel(c)):(Ve(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var m=this._levels[e],x=this._map;return m||(m=this._levels[e]={},m.el=Be("div","leaflet-tile-container leaflet-zoom-animated",this._container),m.el.style.zIndex=o,m.origin=x.project(x.unproject(x.getPixelOrigin()),e).round(),m.zoom=e,this._setZoomTransform(m,x.getCenter(),x.getZoom()),P(m.el.offsetWidth),this._onCreateLevel(m)),this._level=m,m}},_onUpdateLevel:P,_onRemoveLevel:P,_onCreateLevel:P,_pruneTiles:function(){if(this._map){var e,o,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(e in this._tiles)o=this._tiles[e],o.retain=o.current;for(e in this._tiles)if(o=this._tiles[e],o.current&&!o.active){var m=o.coords;this._retainParent(m.x,m.y,m.z,m.z-5)||this._retainChildren(m.x,m.y,m.z,m.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}},_removeTilesAtZoom:function(e){for(var o in this._tiles)this._tiles[o].coords.z===e&&this._removeTile(o)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)Ve(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,o,c,m){var x=Math.floor(e/2),B=Math.floor(o/2),Z=c-1,lt=new xt(+x,+B);lt.z=+Z;var wt=this._tileCoordsToKey(lt),zt=this._tiles[wt];return zt&&zt.active?(zt.retain=!0,!0):(zt&&zt.loaded&&(zt.retain=!0),Z>m?this._retainParent(x,B,Z,m):!1)},_retainChildren:function(e,o,c,m){for(var x=2*e;x<2*e+2;x++)for(var B=2*o;B<2*o+2;B++){var Z=new xt(x,B);Z.z=c+1;var lt=this._tileCoordsToKey(Z),wt=this._tiles[lt];if(wt&&wt.active){wt.retain=!0;continue}else wt&&wt.loaded&&(wt.retain=!0);c+1<m&&this._retainChildren(x,B,c+1,m)}},_resetView:function(e){var o=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var o=this.options;return o.minNativeZoom!==void 0&&e<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<e?o.maxNativeZoom:e},_setView:function(e,o,c,m){var x=Math.round(o);this.options.maxZoom!==void 0&&x>this.options.maxZoom||this.options.minZoom!==void 0&&x<this.options.minZoom?x=void 0:x=this._clampZoom(x);var B=this.options.updateWhenZooming&&x!==this._tileZoom;(!m||B)&&(this._tileZoom=x,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),x!==void 0&&this._update(e),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(e,o)},_setZoomTransforms:function(e,o){for(var c in this._levels)this._setZoomTransform(this._levels[c],e,o)},_setZoomTransform:function(e,o,c){var m=this._map.getZoomScale(c,e.zoom),x=e.origin.multiplyBy(m).subtract(this._map._getNewPixelOrigin(o,c)).round();ce.any3d?$n(e.el,x,m):Ye(e.el,x)},_resetGrid:function(){var e=this._map,o=e.options.crs,c=this._tileSize=this.getTileSize(),m=this._tileZoom,x=this._map.getPixelWorldBounds(this._tileZoom);x&&(this._globalTileRange=this._pxBoundsToTileRange(x)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,o.wrapLng[0]],m).x/c.x),Math.ceil(e.project([0,o.wrapLng[1]],m).x/c.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([o.wrapLat[0],0],m).y/c.x),Math.ceil(e.project([o.wrapLat[1],0],m).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(e){var o=this._map,c=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),m=o.getZoomScale(c,this._tileZoom),x=o.project(e,this._tileZoom).floor(),B=o.getSize().divideBy(m*2);return new Lt(x.subtract(B),x.add(B))},_update:function(e){var o=this._map;if(o){var c=this._clampZoom(o.getZoom());if(e===void 0&&(e=o.getCenter()),this._tileZoom!==void 0){var m=this._getTiledPixelBounds(e),x=this._pxBoundsToTileRange(m),B=x.getCenter(),Z=[],lt=this.options.keepBuffer,wt=new Lt(x.getBottomLeft().subtract([lt,-lt]),x.getTopRight().add([lt,-lt]));if(!(isFinite(x.min.x)&&isFinite(x.min.y)&&isFinite(x.max.x)&&isFinite(x.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var zt in this._tiles){var ee=this._tiles[zt].coords;(ee.z!==this._tileZoom||!wt.contains(new xt(ee.x,ee.y)))&&(this._tiles[zt].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(e,c);return}for(var fe=x.min.y;fe<=x.max.y;fe++)for(var Le=x.min.x;Le<=x.max.x;Le++){var _i=new xt(Le,fe);if(_i.z=this._tileZoom,!!this._isValidTile(_i)){var si=this._tiles[this._tileCoordsToKey(_i)];si?si.current=!0:Z.push(_i)}}if(Z.sort(function(Ke,on){return Ke.distanceTo(B)-on.distanceTo(B)}),Z.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Li=document.createDocumentFragment();for(Le=0;Le<Z.length;Le++)this._addTile(Z[Le],Li);this._level.el.appendChild(Li)}}}},_isValidTile:function(e){var o=this._map.options.crs;if(!o.infinite){var c=this._globalTileRange;if(!o.wrapLng&&(e.x<c.min.x||e.x>c.max.x)||!o.wrapLat&&(e.y<c.min.y||e.y>c.max.y))return!1}if(!this.options.bounds)return!0;var m=this._tileCoordsToBounds(e);return ie(this.options.bounds).overlaps(m)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var o=this._map,c=this.getTileSize(),m=e.scaleBy(c),x=m.add(c),B=o.unproject(m,e.z),Z=o.unproject(x,e.z);return[B,Z]},_tileCoordsToBounds:function(e){var o=this._tileCoordsToNwSe(e),c=new Kt(o[0],o[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var o=e.split(":"),c=new xt(+o[0],+o[1]);return c.z=+o[2],c},_removeTile:function(e){var o=this._tiles[e];o&&(Ve(o.el),delete this._tiles[e],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){be(e,"leaflet-tile");var o=this.getTileSize();e.style.width=o.x+"px",e.style.height=o.y+"px",e.onselectstart=P,e.onmousemove=P,ce.ielt9&&this.options.opacity<1&&Ni(e,this.options.opacity)},_addTile:function(e,o){var c=this._getTilePos(e),m=this._tileCoordsToKey(e),x=this.createTile(this._wrapCoords(e),f(this._tileReady,this,e));this._initTile(x),this.createTile.length<2&&et(f(this._tileReady,this,e,null,x)),Ye(x,c),this._tiles[m]={el:x,coords:e,current:!0},o.appendChild(x),this.fire("tileloadstart",{tile:x,coords:e})},_tileReady:function(e,o,c){o&&this.fire("tileerror",{error:o,tile:c,coords:e});var m=this._tileCoordsToKey(e);c=this._tiles[m],c&&(c.loaded=+new Date,this._map._fadeAnimated?(Ni(c.el,0),Mt(this._fadeFrame),this._fadeFrame=et(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),o||(be(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ce.ielt9||!this._map._fadeAnimated?et(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var o=new xt(this._wrapX?M(e.x,this._wrapX):e.x,this._wrapY?M(e.y,this._wrapY):e.y);return o.z=e.z,o},_pxBoundsToTileRange:function(e){var o=this.getTileSize();return new Lt(e.min.unscaleBy(o).floor(),e.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function ku(e){return new Ir(e)}var hr=Ir.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,o){this._url=e,o=V(this,o),o.detectRetina&&ce.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,o){return this._url===e&&o===void 0&&(o=!0),this._url=e,o||this.redraw(),this},createTile:function(e,o){var c=document.createElement("img");return ye(c,"load",f(this._tileOnLoad,this,o,c)),ye(c,"error",f(this._tileOnError,this,o,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(e),c},getTileUrl:function(e){var o={r:ce.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-e.y;this.options.tms&&(o.y=c),o["-y"]=c}return kt(this._url,h(o,this.options))},_tileOnLoad:function(e,o){ce.ielt9?setTimeout(f(e,this,null,o),0):e(null,o)},_tileOnError:function(e,o,c){var m=this.options.errorTileUrl;m&&o.getAttribute("src")!==m&&(o.src=m),e(c,o)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,o=this.options.maxZoom,c=this.options.zoomReverse,m=this.options.zoomOffset;return c&&(e=o-e),e+m},_getSubdomain:function(e){var o=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var e,o;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&(o=this._tiles[e].el,o.onload=P,o.onerror=P,!o.complete)){o.src=Ut;var c=this._tiles[e].coords;Ve(o),delete this._tiles[e],this.fire("tileabort",{tile:o,coords:c})}},_removeTile:function(e){var o=this._tiles[e];if(o)return o.el.setAttribute("src",Ut),Ir.prototype._removeTile.call(this,e)},_tileReady:function(e,o,c){if(!(!this._map||c&&c.getAttribute("src")===Ut))return Ir.prototype._tileReady.call(this,e,o,c)}});function yo(e,o){return new hr(e,o)}var ws=hr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,o){this._url=e;var c=h({},this.defaultWmsParams);for(var m in o)m in this.options||(c[m]=o[m]);o=V(this,o);var x=o.detectRetina&&ce.retina?2:1,B=this.getTileSize();c.width=B.x*x,c.height=B.y*x,this.wmsParams=c},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,hr.prototype.onAdd.call(this,e)},getTileUrl:function(e){var o=this._tileCoordsToNwSe(e),c=this._crs,m=gt(c.project(o[0]),c.project(o[1])),x=m.min,B=m.max,Z=(this._wmsVersion>=1.3&&this._crs===mo?[x.y,x.x,B.y,B.x]:[x.x,x.y,B.x,B.y]).join(","),lt=hr.prototype.getTileUrl.call(this,e);return lt+G(this.wmsParams,lt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Z},setParams:function(e,o){return h(this.wmsParams,e),o||this.redraw(),this}});function Mu(e,o){return new ws(e,o)}hr.WMS=ws,yo.wms=Mu;var _n=mi.extend({options:{padding:.1},initialize:function(e){V(this,e),y(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),be(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,o){var c=this._map.getZoomScale(o,this._zoom),m=this._map.getSize().multiplyBy(.5+this.options.padding),x=this._map.project(this._center,o),B=m.multiplyBy(-c).add(x).subtract(this._map._getNewPixelOrigin(e,o));ce.any3d?$n(this._container,B,c):Ye(this._container,B)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var e in this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,o=this._map.getSize(),c=this._map.containerPointToLayerPoint(o.multiplyBy(-e)).round();this._bounds=new Lt(c,c.add(o.multiplyBy(1+e*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),vo=_n.extend({options:{tolerance:0},getEvents:function(){var e=_n.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){_n.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");ye(e,"mousemove",this._onMouseMove,this),ye(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ye(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){Mt(this._redrawRequest),delete this._ctx,Ve(this._container),$e(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var e;this._redrawBounds=null;for(var o in this._layers)e=this._layers[o],e._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){_n.prototype._update.call(this);var e=this._bounds,o=this._container,c=e.getSize(),m=ce.retina?2:1;Ye(o,e.min),o.width=m*c.x,o.height=m*c.y,o.style.width=c.x+"px",o.style.height=c.y+"px",ce.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){_n.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[y(e)]=e;var o=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var o=e._order,c=o.next,m=o.prev;c?c.prev=m:this._drawLast=m,m?m.next=c:this._drawFirst=c,delete e._order,delete this._layers[y(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if(typeof e.options.dashArray=="string"){var o=e.options.dashArray.split(/[, ]+/),c=[],m,x;for(x=0;x<o.length;x++){if(m=Number(o[x]),isNaN(m))return;c.push(m)}e.options._dashArray=c}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||et(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var o=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Lt,this._redrawBounds.extend(e._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(e._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var o=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,o=this._redrawBounds;if(this._ctx.save(),o){var c=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var m=this._drawFirst;m;m=m.next)e=m.layer,(!o||e._pxBounds&&e._pxBounds.intersects(o))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,o){if(this._drawing){var c,m,x,B,Z=e._parts,lt=Z.length,wt=this._ctx;if(lt){for(wt.beginPath(),c=0;c<lt;c++){for(m=0,x=Z[c].length;m<x;m++)B=Z[c][m],wt[m?"lineTo":"moveTo"](B.x,B.y);o&&wt.closePath()}this._fillStroke(wt,e)}}},_updateCircle:function(e){if(!(!this._drawing||e._empty())){var o=e._point,c=this._ctx,m=Math.max(Math.round(e._radius),1),x=(Math.max(Math.round(e._radiusY),1)||m)/m;x!==1&&(c.save(),c.scale(1,x)),c.beginPath(),c.arc(o.x,o.y/x,m,0,Math.PI*2,!1),x!==1&&c.restore(),this._fillStroke(c,e)}},_fillStroke:function(e,o){var c=o.options;c.fill&&(e.globalAlpha=c.fillOpacity,e.fillStyle=c.fillColor||c.color,e.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(e.setLineDash&&e.setLineDash(o.options&&o.options._dashArray||[]),e.globalAlpha=c.opacity,e.lineWidth=c.weight,e.strokeStyle=c.color,e.lineCap=c.lineCap,e.lineJoin=c.lineJoin,e.stroke())},_onClick:function(e){for(var o=this._map.mouseEventToLayerPoint(e),c,m,x=this._drawFirst;x;x=x.next)c=x.layer,c.options.interactive&&c._containsPoint(o)&&(!(e.type==="click"||e.type==="preclick")||!this._map._draggableMoved(c))&&(m=c);this._fireEvent(m?[m]:!1,e)},_onMouseMove:function(e){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,o)}},_handleMouseOut:function(e){var o=this._hoveredLayer;o&&(We(this._container,"leaflet-interactive"),this._fireEvent([o],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,o){if(!this._mouseHoverThrottled){for(var c,m,x=this._drawFirst;x;x=x.next)c=x.layer,c.options.interactive&&c._containsPoint(o)&&(m=c);m!==this._hoveredLayer&&(this._handleMouseOut(e),m&&(be(this._container,"leaflet-interactive"),this._fireEvent([m],e,"mouseover"),this._hoveredLayer=m)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,e),this._mouseHoverThrottled=!0,setTimeout(f(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,o,c){this._map._fireDOMEvent(o,c||o.type,e)},_bringToFront:function(e){var o=e._order;if(o){var c=o.next,m=o.prev;if(c)c.prev=m;else return;m?m.next=c:c&&(this._drawFirst=c),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(e)}},_bringToBack:function(e){var o=e._order;if(o){var c=o.next,m=o.prev;if(m)m.next=c;else return;c?c.prev=m:m&&(this._drawLast=m),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(e)}}});function Ls(e){return ce.canvas?new vo(e):null}var Fr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch{}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Pu={_initContainer:function(){this._container=Be("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(_n.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var o=e._container=Fr("shape");be(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",e._path=Fr("path"),o.appendChild(e._path),this._updateStyle(e),this._layers[y(e)]=e},_addPath:function(e){var o=e._container;this._container.appendChild(o),e.options.interactive&&e.addInteractiveTarget(o)},_removePath:function(e){var o=e._container;Ve(o),e.removeInteractiveTarget(o),delete this._layers[y(e)]},_updateStyle:function(e){var o=e._stroke,c=e._fill,m=e.options,x=e._container;x.stroked=!!m.stroke,x.filled=!!m.fill,m.stroke?(o||(o=e._stroke=Fr("stroke")),x.appendChild(o),o.weight=m.weight+"px",o.color=m.color,o.opacity=m.opacity,m.dashArray?o.dashStyle=pt(m.dashArray)?m.dashArray.join(" "):m.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=m.lineCap.replace("butt","flat"),o.joinstyle=m.lineJoin):o&&(x.removeChild(o),e._stroke=null),m.fill?(c||(c=e._fill=Fr("fill")),x.appendChild(c),c.color=m.fillColor||m.color,c.opacity=m.fillOpacity):c&&(x.removeChild(c),e._fill=null)},_updateCircle:function(e){var o=e._point.round(),c=Math.round(e._radius),m=Math.round(e._radiusY||c);this._setPath(e,e._empty()?"M0 0":"AL "+o.x+","+o.y+" "+c+","+m+" 0,"+65535*360)},_setPath:function(e,o){e._path.v=o},_bringToFront:function(e){sr(e._container)},_bringToBack:function(e){Nn(e._container)}},dr=ce.vml?Fr:St,di=_n.extend({_initContainer:function(){this._container=dr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=dr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ve(this._container),$e(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){_n.prototype._update.call(this);var e=this._bounds,o=e.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,c.setAttribute("width",o.x),c.setAttribute("height",o.y)),Ye(c,e.min),c.setAttribute("viewBox",[e.min.x,e.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(e){var o=e._path=dr("path");e.options.className&&be(o,e.options.className),e.options.interactive&&be(o,"leaflet-interactive"),this._updateStyle(e),this._layers[y(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){Ve(e._path),e.removeInteractiveTarget(e._path),delete this._layers[y(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var o=e._path,c=e.options;o&&(c.stroke?(o.setAttribute("stroke",c.color),o.setAttribute("stroke-opacity",c.opacity),o.setAttribute("stroke-width",c.weight),o.setAttribute("stroke-linecap",c.lineCap),o.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?o.setAttribute("stroke-dasharray",c.dashArray):o.removeAttribute("stroke-dasharray"),c.dashOffset?o.setAttribute("stroke-dashoffset",c.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),c.fill?(o.setAttribute("fill",c.fillColor||c.color),o.setAttribute("fill-opacity",c.fillOpacity),o.setAttribute("fill-rule",c.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(e,o){this._setPath(e,It(e._parts,o))},_updateCircle:function(e){var o=e._point,c=Math.max(Math.round(e._radius),1),m=Math.max(Math.round(e._radiusY),1)||c,x="a"+c+","+m+" 0 1,0 ",B=e._empty()?"M0 0":"M"+(o.x-c)+","+o.y+x+c*2+",0 "+x+-c*2+",0 ";this._setPath(e,B)},_setPath:function(e,o){e._path.setAttribute("d",o)},_bringToFront:function(e){sr(e._path)},_bringToBack:function(e){Nn(e._path)}});ce.vml&&di.include(Pu);function gi(e){return ce.svg||ce.vml?new di(e):null}ke.include({getRenderer:function(e){var o=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(e){if(e==="overlayPane"||e===void 0)return!1;var o=this._paneRenderers[e];return o===void 0&&(o=this._createRenderer({pane:e}),this._paneRenderers[e]=o),o},_createRenderer:function(e){return this.options.preferCanvas&&Ls(e)||gi(e)}});var bo=Pn.extend({initialize:function(e,o){Pn.prototype.initialize.call(this,this._boundsToLatLngs(e),o)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=ie(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function Ki(e,o){return new bo(e,o)}di.create=dr,di.pointsToPath=It,gn.geometryToLayer=fs,gn.coordsToLatLng=ps,gn.coordsToLatLngs=ms,gn.latLngToCoords=gs,gn.latLngsToCoords=_s,gn.getFeature=ur,gn.asFeature=ys,ke.mergeOptions({boxZoom:!0});var ge=pi.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){ye(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){$e(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ve(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||e.which!==1&&e.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Pr(),eo(),this._startPoint=this._map.mouseEventToContainerPoint(e),ye(document,{contextmenu:Gn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=Be("div","leaflet-zoom-box",this._container),be(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var o=new Lt(this._point,this._startPoint),c=o.getSize();Ye(this._box,o.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(Ve(this._box),We(this._container,"leaflet-crosshair")),Sr(),io(),$e(document,{contextmenu:Gn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if(!(e.which!==1&&e.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var o=new Kt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(e){e.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ke.addInitHook("addHandler","boxZoom",ge),ke.mergeOptions({doubleClickZoom:!0});var xo=pi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var o=this._map,c=o.getZoom(),m=o.options.zoomDelta,x=e.originalEvent.shiftKey?c-m:c+m;o.options.doubleClickZoom==="center"?o.setZoom(x):o.setZoomAround(e.containerPoint,x)}});ke.addInitHook("addHandler","doubleClickZoom",xo),ke.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Cs=pi.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new kn(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}be(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){We(this._map._container,"leaflet-grab"),We(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=ie(this._map.options.maxBounds);this._offsetLimit=gt(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var o=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(o),this._prunePositions(o)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,o){return e-(e-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var e=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;e.x<o.min.x&&(e.x=this._viscousLimit(e.x,o.min.x)),e.y<o.min.y&&(e.y=this._viscousLimit(e.y,o.min.y)),e.x>o.max.x&&(e.x=this._viscousLimit(e.x,o.max.x)),e.y>o.max.y&&(e.y=this._viscousLimit(e.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,o=Math.round(e/2),c=this._initialWorldOffset,m=this._draggable._newPos.x,x=(m-o+c)%e+o-c,B=(m+o+c)%e-o-c,Z=Math.abs(x+c)<Math.abs(B+c)?x:B;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Z},_onDragEnd:function(e){var o=this._map,c=o.options,m=!c.inertia||e.noInertia||this._times.length<2;if(o.fire("dragend",e),m)o.fire("moveend");else{this._prunePositions(+new Date);var x=this._lastPos.subtract(this._positions[0]),B=(this._lastTime-this._times[0])/1e3,Z=c.easeLinearity,lt=x.multiplyBy(Z/B),wt=lt.distanceTo([0,0]),zt=Math.min(c.inertiaMaxSpeed,wt),ee=lt.multiplyBy(zt/wt),fe=zt/(c.inertiaDeceleration*Z),Le=ee.multiplyBy(-fe/2).round();!Le.x&&!Le.y?o.fire("moveend"):(Le=o._limitOffset(Le,o.options.maxBounds),et(function(){o.panBy(Le,{duration:fe,easeLinearity:Z,noMoveStart:!0,animate:!0})}))}}});ke.addInitHook("addHandler","dragging",Cs),ke.mergeOptions({keyboard:!0,keyboardPanDelta:80});var yn=pi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),ye(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),$e(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,o=document.documentElement,c=e.scrollTop||o.scrollTop,m=e.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(m,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var o=this._panKeys={},c=this.keyCodes,m,x;for(m=0,x=c.left.length;m<x;m++)o[c.left[m]]=[-1*e,0];for(m=0,x=c.right.length;m<x;m++)o[c.right[m]]=[e,0];for(m=0,x=c.down.length;m<x;m++)o[c.down[m]]=[0,e];for(m=0,x=c.up.length;m<x;m++)o[c.up[m]]=[0,-1*e]},_setZoomDelta:function(e){var o=this._zoomKeys={},c=this.keyCodes,m,x;for(m=0,x=c.zoomIn.length;m<x;m++)o[c.zoomIn[m]]=e;for(m=0,x=c.zoomOut.length;m<x;m++)o[c.zoomOut[m]]=-e},_addHooks:function(){ye(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){$e(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var o=e.keyCode,c=this._map,m;if(o in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(m=this._panKeys[o],e.shiftKey&&(m=$t(m).multiplyBy(3)),c.options.maxBounds&&(m=c._limitOffset($t(m),c.options.maxBounds)),c.options.worldCopyJump){var x=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(m)));c.panTo(x)}else c.panBy(m)}else if(o in this._zoomKeys)c.setZoom(c.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;Gn(e)}}});ke.addInitHook("addHandler","keyboard",yn),ke.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var wi=pi.extend({addHooks:function(){ye(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){$e(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var o=ba(e),c=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var m=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),m),Gn(e)},_performZoom:function(){var e=this._map,o=e.getZoom(),c=this._map.options.zoomSnap||0;e._stop();var m=this._delta/(this._map.options.wheelPxPerZoomLevel*4),x=4*Math.log(2/(1+Math.exp(-Math.abs(m))))/Math.LN2,B=c?Math.ceil(x/c)*c:x,Z=e._limitZoom(o+(this._delta>0?B:-B))-o;this._delta=0,this._startTime=null,Z&&(e.options.scrollWheelZoom==="center"?e.setZoom(o+Z):e.setZoomAround(this._lastMousePos,o+Z))}});ke.addInitHook("addHandler","scrollWheelZoom",wi);var Oa=600;ke.mergeOptions({tapHold:ce.touchNative&&ce.safari&&ce.mobile,tapTolerance:15});var Ti=pi.extend({addHooks:function(){ye(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){$e(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),e.touches.length===1){var o=e.touches[0];this._startPos=this._newPos=new xt(o.clientX,o.clientY),this._holdTimeout=setTimeout(f(function(){this._cancel(),this._isTapValid()&&(ye(document,"touchend",li),ye(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),Oa),ye(document,"touchend touchcancel contextmenu",this._cancel,this),ye(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){$e(document,"touchend",li),$e(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),$e(document,"touchend touchcancel contextmenu",this._cancel,this),$e(document,"touchmove",this._onMove,this)},_onMove:function(e){var o=e.touches[0];this._newPos=new xt(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,o){var c=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});c._simulated=!0,o.target.dispatchEvent(c)}});ke.addInitHook("addHandler","tapHold",Ti),ke.mergeOptions({touchZoom:ce.touch,bounceAtZoomLimits:!0});var Di=pi.extend({addHooks:function(){be(this._map._container,"leaflet-touch-zoom"),ye(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){We(this._map._container,"leaflet-touch-zoom"),$e(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var o=this._map;if(!(!e.touches||e.touches.length!==2||o._animatingZoom||this._zooming)){var c=o.mouseEventToContainerPoint(e.touches[0]),m=o.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(c.add(m)._divideBy(2))),this._startDist=c.distanceTo(m),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),ye(document,"touchmove",this._onTouchMove,this),ye(document,"touchend touchcancel",this._onTouchEnd,this),li(e)}},_onTouchMove:function(e){if(!(!e.touches||e.touches.length!==2||!this._zooming)){var o=this._map,c=o.mouseEventToContainerPoint(e.touches[0]),m=o.mouseEventToContainerPoint(e.touches[1]),x=c.distanceTo(m)/this._startDist;if(this._zoom=o.getScaleZoom(x,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&x<1||this._zoom>o.getMaxZoom()&&x>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,x===1)return}else{var B=c._add(m)._divideBy(2)._subtract(this._centerPoint);if(x===1&&B.x===0&&B.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(B),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),Mt(this._animRequest);var Z=f(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=et(Z,this,!0),li(e)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Mt(this._animRequest),$e(document,"touchmove",this._onTouchMove,this),$e(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ke.addInitHook("addHandler","touchZoom",Di),ke.BoxZoom=ge,ke.DoubleClickZoom=xo,ke.Drag=Cs,ke.Keyboard=yn,ke.ScrollWheelZoom=wi,ke.TapHold=Ti,ke.TouchZoom=Di,s.Bounds=Lt,s.Browser=ce,s.CRS=bt,s.Canvas=vo,s.Circle=_o,s.CircleMarker=rn,s.Class=Q,s.Control=_e,s.DivIcon=Ra,s.DivOverlay=sn,s.DomEvent=ss,s.DomUtil=au,s.Draggable=kn,s.Evented=Ct,s.FeatureGroup=qi,s.GeoJSON=gn,s.GridLayer=Ir,s.Handler=pi,s.Icon=lr,s.ImageOverlay=cr,s.LatLng=ne,s.LatLngBounds=Kt,s.Layer=mi,s.LayerGroup=ar,s.LineUtil=us,s.Map=ke,s.Marker=ds,s.Mixin=du,s.Path=pn,s.Point=xt,s.PolyUtil=fu,s.Polygon=Pn,s.Polyline=mn,s.Popup=Sn,s.PosAnimation=xa,s.Projection=nn,s.Rectangle=bo,s.Renderer=_n,s.SVG=di,s.SVGOverlay=Da,s.TileLayer=hr,s.Tooltip=xs,s.Transformation=te,s.Util=Ot,s.VideoOverlay=Or,s.bind=f,s.bounds=gt,s.canvas=Ls,s.circle=qn,s.circleMarker=Sa,s.control=Vn,s.divIcon=Eu,s.extend=h,s.featureGroup=_u,s.geoJSON=bs,s.geoJson=Aa,s.gridLayer=ku,s.icon=yu,s.imageOverlay=xu,s.latLng=Qt,s.latLngBounds=ie,s.layerGroup=gu,s.map=wa,s.marker=vu,s.point=$t,s.polygon=Rr,s.polyline=bu,s.popup=Lu,s.rectangle=Ki,s.setOptions=V,s.stamp=y,s.svg=gi,s.svgOverlay=wu,s.tileLayer=yo,s.tooltip=Cu,s.transformation=$,s.version=l,s.videoOverlay=Ta;var Kn=window.L;s.noConflict=function(){return window.L=Kn,this},window.L=s})})(Lc,Lc.exports);var Ii=Lc.exports;const se=Dp(Ii);var Ui=63710088e-1,Ib={centimeters:Ui*100,centimetres:Ui*100,degrees:Ui/111325,feet:Ui*3.28084,inches:Ui*39.37,kilometers:Ui/1e3,kilometres:Ui/1e3,meters:Ui,metres:Ui,miles:Ui/1609.344,millimeters:Ui*1e3,millimetres:Ui*1e3,nauticalmiles:Ui/1852,radians:1,yards:Ui*1.0936};function yl(t,n,s){s===void 0&&(s={});var l={type:"Feature"};return(s.id===0||s.id)&&(l.id=s.id),s.bbox&&(l.bbox=s.bbox),l.properties=n||{},l.geometry=t,l}function Cc(t,n,s){s===void 0&&(s={});for(var l=0,h=t;l<h.length;l++){var p=h[l];if(p.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var f=0;f<p[p.length-1].length;f++)if(p[p.length-1][f]!==p[0][f])throw new Error("First and last Position are not equivalent.")}var v={type:"Polygon",coordinates:t};return yl(v,n,s)}function Yo(t,n,s){if(s===void 0&&(s={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");var l={type:"LineString",coordinates:t};return yl(l,n,s)}function Fb(t,n){n===void 0&&(n="kilometers");var s=Ib[n];if(!s)throw new Error(n+" units is invalid");return t*s}function Ka(t){var n=t%360;return n*Math.PI/180}function Np(t,n,s){if(t!==null)for(var l,h,p,f,v,y,C,M=0,P=0,U,J=t.type,R=J==="FeatureCollection",V=J==="Feature",G=R?t.features.length:1,_t=0;_t<G;_t++){C=R?t.features[_t].geometry:V?t.geometry:t,U=C?C.type==="GeometryCollection":!1,v=U?C.geometries.length:1;for(var kt=0;kt<v;kt++){var pt=0,At=0;if(f=U?C.geometries[kt]:C,f!==null){y=f.coordinates;var Ut=f.type;switch(M=0,Ut){case null:break;case"Point":if(n(y,P,_t,pt,At)===!1)return!1;P++,pt++;break;case"LineString":case"MultiPoint":for(l=0;l<y.length;l++){if(n(y[l],P,_t,pt,At)===!1)return!1;P++,Ut==="MultiPoint"&&pt++}Ut==="LineString"&&pt++;break;case"Polygon":case"MultiLineString":for(l=0;l<y.length;l++){for(h=0;h<y[l].length-M;h++){if(n(y[l][h],P,_t,pt,At)===!1)return!1;P++}Ut==="MultiLineString"&&pt++,Ut==="Polygon"&&At++}Ut==="Polygon"&&pt++;break;case"MultiPolygon":for(l=0;l<y.length;l++){for(At=0,h=0;h<y[l].length;h++){for(p=0;p<y[l][h].length-M;p++){if(n(y[l][h][p],P,_t,pt,At)===!1)return!1;P++}At++}pt++}break;case"GeometryCollection":for(l=0;l<f.geometries.length;l++)if(Np(f.geometries[l],n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function $p(t,n){var s,l,h,p,f,v,y,C,M,P,U=0,J=t.type==="FeatureCollection",R=t.type==="Feature",V=J?t.features.length:1;for(s=0;s<V;s++){for(v=J?t.features[s].geometry:R?t.geometry:t,C=J?t.features[s].properties:R?t.properties:{},M=J?t.features[s].bbox:R?t.bbox:void 0,P=J?t.features[s].id:R?t.id:void 0,y=v?v.type==="GeometryCollection":!1,f=y?v.geometries.length:1,h=0;h<f;h++){if(p=y?v.geometries[h]:v,p===null){if(n(null,U,C,M,P)===!1)return!1;continue}switch(p.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(n(p,U,C,M,P)===!1)return!1;break}case"GeometryCollection":{for(l=0;l<p.geometries.length;l++)if(n(p.geometries[l],U,C,M,P)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}U++}}function zb(t,n,s){var l=s;return $p(t,function(h,p,f,v,y){l=n(l,h,p,f,v,y)}),l}function Nb(t,n){$p(t,function(s,l,h,p,f){var v=s===null?null:s.type;switch(v){case null:case"Point":case"LineString":case"Polygon":return n(yl(s,h,{bbox:p,id:f}),l,0)===!1?!1:void 0}var y;switch(v){case"MultiPoint":y="Point";break;case"MultiLineString":y="LineString";break;case"MultiPolygon":y="Polygon";break}for(var C=0;C<s.coordinates.length;C++){var M=s.coordinates[C],P={type:y,coordinates:M};if(n(yl(P,h),l,C)===!1)return!1}})}function $b(t,n){Nb(t,function(s,l,h){var p=0;if(s.geometry){var f=s.geometry.type;if(!(f==="Point"||f==="MultiPoint")){var v,y=0,C=0,M=0;if(Np(s,function(P,U,J,R,V){if(v===void 0||l>y||R>C||V>M){v=P,y=l,C=R,M=V,p=0;return}var G=Yo([v,P],s.properties);if(n(G,l,h,V,p)===!1)return!1;p++,v=P})===!1)return!1}}})}function jb(t,n,s){var l=s,h=!1;return $b(t,function(p,f,v,y,C){h===!1&&s===void 0?l=p:l=n(l,p,f,v,y,C),h=!0}),l}function kd(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Ec(t,n,s){s===void 0&&(s={});var l=kd(t),h=kd(n),p=Ka(h[1]-l[1]),f=Ka(h[0]-l[0]),v=Ka(l[1]),y=Ka(h[1]),C=Math.pow(Math.sin(p/2),2)+Math.pow(Math.sin(f/2),2)*Math.cos(v)*Math.cos(y);return Fb(2*Math.atan2(Math.sqrt(C),Math.sqrt(1-C)),s.units)}var Md=6378137;function kc(t){return zb(t,function(n,s){return n+Ub(s)},0)}function Ub(t){var n=0,s;switch(t.type){case"Polygon":return Pd(t.coordinates);case"MultiPolygon":for(s=0;s<t.coordinates.length;s++)n+=Pd(t.coordinates[s]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function Pd(t){var n=0;if(t&&t.length>0){n+=Math.abs(Sd(t[0]));for(var s=1;s<t.length;s++)n-=Math.abs(Sd(t[s]))}return n}function Sd(t){var n,s,l,h,p,f,v,y=0,C=t.length;if(C>2){for(v=0;v<C;v++)v===C-2?(h=C-2,p=C-1,f=0):v===C-1?(h=C-1,p=0,f=1):(h=v,p=v+1,f=v+2),n=t[h],s=t[p],l=t[f],y+=(tc(l[0])-tc(n[0]))*Math.sin(tc(s[1]));y=y*Md*Md/2}return y}function tc(t){return t*Math.PI/180}function vl(t,n){return n===void 0&&(n={}),jb(t,function(s,l){var h=l.geometry.coordinates;return s+Ec(h[0],h[1],n)},0)}const Gb={class:"drawing-tools"},Vb={class:"mb-4"},Hb={class:"grid grid-cols-2 gap-2"},Zb=["onClick"],qb={class:"text-sm"},Kb={key:0,class:"space-y-2"},Wb={class:"bg-gray-50 p-2 rounded text-sm"},Jb={class:"font-medium"},Xb={key:0,class:"text-gray-600"},Yb={class:"border rounded overflow-hidden"},Qb={class:"p-3 space-y-3"},t1={class:"grid grid-cols-6 gap-2"},e1=["onClick"],i1={class:"space-y-2"},n1={class:"flex items-center gap-2"},r1={class:"flex items-center gap-2"},s1=["value"],o1={key:0,class:"flex items-center gap-2"},a1={class:"border rounded overflow-hidden"},l1={class:"p-3"},u1={class:"space-y-1 text-sm"},c1={key:0},h1={key:1},d1={key:2},f1={key:3},p1={key:4},m1={key:5},g1={key:6},_1=Yi({__name:"DrawingTools",props:{currentTool:{},selectedShape:{}},emits:["tool-change","style-update","properties-update","delete-shape"],setup(t,{emit:n}){const s=t,l=n,h=[{type:"Circle",label:"Cercle"},{type:"Semicircle",label:"Demi-cercle"},{type:"Rectangle",label:"Rectangle"},{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"Text",label:"Texte"},{type:"delete",label:"Supprimer"}],p=["#2563EB","#DC2626","#059669","#D97706","#7C3AED","#DB2777"],f=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointillé"},{value:"dashdot",label:"Tiret-point"}],v=Jt("#3B82F6"),y=Jt(.2),C=Jt("#2563EB"),M=Jt(1),P=Jt(2),U=Jt("solid"),J=Jt(0),R=Jt(0),V=Pe(()=>{var Lt,gt;return(gt=(Lt=s.selectedShape)==null?void 0:Lt.properties)!=null&&gt.type?["Circle","Rectangle","Polygon"].includes(s.selectedShape.properties.type):!1}),G=Jt(""),_t=Jt(14),kt=Jt("#FFFFFF"),pt=Jt(1),At=Jt("#000000"),Ut=Jt(1),Y=Jt({style:!1,properties:!1});let nt=!1;const z=(Lt,gt)=>Math.abs((Lt||0)-(gt||0))>1e-4,rt=(Lt,gt)=>gt?z(Lt.radius,gt.radius)||z(Lt.area,gt.area)||z(Lt.perimeter,gt.perimeter)||z(Lt.width,gt.width)||z(Lt.height,gt.height)||z(Lt.length,gt.length):!0,dt=Lt=>{Y.value[Lt]=!Y.value[Lt]},et=Jt(null);vn(()=>{var Lt;return[s.selectedShape,(Lt=s.selectedShape)==null?void 0:Lt.properties]},([Lt])=>{if(!(nt||!Lt))try{nt=!0;const gt=Lt;if(!gt.properties||!gt.properties.type){console.warn("Invalid shape properties detected:",Ae(gt.properties));return}const Kt=Ae(gt.properties),ie=gt._lastProperties;if(ie&&!rt(Kt,ie)){console.log("No significant property changes detected");return}const ne={...Kt};setTimeout(()=>{var Qt,bt,Ht,Vt,Xt,te,$,H,ot,St,It;try{gt._lastProperties={...ne},v.value=((Qt=gt.options)==null?void 0:Qt.fillColor)||"#3B82F6",y.value=((bt=gt.options)==null?void 0:bt.fillOpacity)||.2,C.value=((Ht=gt.options)==null?void 0:Ht.color)||"#2563EB",M.value=((Vt=gt.options)==null?void 0:Vt.opacity)||1,P.value=((Xt=gt.options)==null?void 0:Xt.weight)||2,U.value=Ot(((te=gt.options)==null?void 0:te.dashArray)||""),J.value=ne.radius||0,R.value=ne.orientation||0,gt.properties.type==="text"&&(G.value=ne.text||"",_t.value=(($=ne.style)==null?void 0:$.fontSize)||14,kt.value=((H=ne.style)==null?void 0:H.backgroundColor)||"#FFFFFF",pt.value=((ot=ne.style)==null?void 0:ot.backgroundOpacity)||1,At.value=((St=ne.style)==null?void 0:St.borderColor)||"#000000",Ut.value=((It=ne.style)==null?void 0:It.borderOpacity)||1),et.value={...ne},gt.properties={...ne},l("properties-update",ne)}finally{nt=!1}},0)}catch(gt){console.error("Error in shape update:",gt),nt=!1}},{immediate:!0,deep:!0});const Mt=Lt=>{switch(Lt){case"dashed":return"10,10";case"dotted":return"2,5";case"dashdot":return"10,5,2,5";default:return""}},Ot=Lt=>{if(!Lt)return"solid";switch(Lt){case"10,10":return"dashed";case"2,5":return"dotted";case"10,5,2,5":return"dashdot";default:return"solid"}},Q=Lt=>{C.value=Lt,V.value&&(v.value=Lt),mt({strokeColor:Lt,fillColor:V.value?Lt:void 0})},mt=Lt=>{const gt={...Lt};Lt.strokeStyle&&(gt.dashArray=Mt(Lt.strokeStyle)),Lt.fillOpacity!==void 0&&(gt.fillOpacity=parseFloat(Lt.fillOpacity)),Lt.strokeOpacity!==void 0&&(gt.strokeOpacity=parseFloat(Lt.strokeOpacity)),Lt.strokeWidth!==void 0&&(gt.weight=parseInt(Lt.strokeWidth)),Lt.strokeColor&&(gt.color=Lt.strokeColor),l("style-update",gt)},Pt={Circle:"Cercle",Rectangle:"Rectangle",Polygon:"Polygone",Line:"Ligne",Semicircle:"Demi-cercle",unknown:"Inconnu"},Ct=Pe(()=>{var Lt,gt;return(gt=(Lt=s.selectedShape)==null?void 0:Lt.properties)!=null&&gt.type?s.selectedShape.properties.type:"unknown"}),xt=Pe(()=>Pt[Ct.value]||"Non défini"),Wt=Lt=>Lt<1e4?`${Lt.toFixed(1)} m²`:`${(Lt/1e4).toFixed(2)} ha`,$t=Lt=>Lt<1e3?`${Lt.toFixed(1)} m`:`${(Lt/1e3).toFixed(2)} km`;return(Lt,gt)=>{var Kt,ie,ne,Qt,bt,Ht,Vt,Xt;return Rt(),Nt("div",Gb,[w("div",Vb,[w("div",Hb,[(Rt(!0),Nt(Oe,null,ei(h.filter(te=>te.type!=="delete"),te=>(Rt(),Nt("button",{key:te.type,class:un(["flex items-center justify-center p-2 rounded border",{"bg-blue-50 border-blue-200":Lt.currentTool===te.type,"hover:bg-gray-50 border-gray-200":Lt.currentTool!==te.type}]),onClick:$=>Lt.$emit("tool-change",te.type)},[w("span",qb,qt(te.label),1)],10,Zb))),128))]),Lt.selectedShape?(Rt(),Nt("button",{key:0,class:un(["w-full mt-2 flex items-center justify-center p-2 rounded border border-red-500 bg-red-50 hover:bg-red-100 text-red-700 transition-colors duration-200",{"bg-red-100 border-red-600":Lt.currentTool==="delete"}]),onClick:gt[0]||(gt[0]=te=>Lt.$emit("delete-shape"))},gt[13]||(gt[13]=[w("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),w("span",{class:"text-sm font-medium"},"Supprimer la forme",-1)]),2)):me("",!0)]),Lt.selectedShape?(Rt(),Nt("div",Kb,[w("div",Wb,[w("div",Jb,qt(xt.value),1),(Kt=et.value)!=null&&Kt.area?(Rt(),Nt("div",Xb,qt(Wt(et.value.area)),1)):me("",!0)]),w("div",Yb,[w("button",{class:"w-full px-3 py-2 flex justify-between items-center bg-gray-50 hover:bg-gray-100",onClick:gt[1]||(gt[1]=te=>dt("style"))},[gt[15]||(gt[15]=w("span",{class:"font-medium"},"Style",-1)),(Rt(),Nt("svg",{class:un(["w-5 h-5 transform transition-transform",{"rotate-180":!Y.value.style}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},gt[14]||(gt[14]=[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),De(w("div",Qb,[w("div",t1,[(Rt(),Nt(Oe,null,ei(p,te=>w("button",{key:te,class:"w-6 h-6 rounded-full border hover:scale-110 transition-transform",style:El({backgroundColor:te}),onClick:$=>Q(te)},null,12,e1)),64))]),w("div",i1,[w("div",n1,[gt[16]||(gt[16]=w("span",{class:"text-xs text-gray-500"},"Contour",-1)),De(w("input",{type:"color","onUpdate:modelValue":gt[2]||(gt[2]=te=>C.value=te),class:"w-6 h-6",onChange:gt[3]||(gt[3]=te=>mt({strokeColor:C.value})),title:"Couleur du contour"},null,544),[[qe,C.value]]),De(w("input",{type:"range","onUpdate:modelValue":gt[4]||(gt[4]=te=>P.value=te),min:"1",max:"10",class:"flex-1",onChange:gt[5]||(gt[5]=te=>mt({strokeWidth:P.value})),title:"Épaisseur du contour"},null,544),[[qe,P.value]])]),w("div",r1,[gt[17]||(gt[17]=w("span",{class:"text-xs text-gray-500"},"Style",-1)),De(w("select",{"onUpdate:modelValue":gt[6]||(gt[6]=te=>U.value=te),class:"flex-1 text-sm border rounded px-1 py-0.5",onChange:gt[7]||(gt[7]=te=>mt({strokeStyle:U.value}))},[(Rt(),Nt(Oe,null,ei(f,te=>w("option",{key:te.value,value:te.value},qt(te.label),9,s1)),64))],544),[[Fs,U.value]])]),V.value?(Rt(),Nt("div",o1,[gt[18]||(gt[18]=w("span",{class:"text-xs text-gray-500"},"Remplissage",-1)),De(w("input",{type:"color","onUpdate:modelValue":gt[8]||(gt[8]=te=>v.value=te),class:"w-6 h-6",onChange:gt[9]||(gt[9]=te=>mt({fillColor:v.value})),title:"Couleur de remplissage"},null,544),[[qe,v.value]]),De(w("input",{type:"range","onUpdate:modelValue":gt[10]||(gt[10]=te=>y.value=te),min:"0",max:"1",step:"0.1",class:"flex-1",onChange:gt[11]||(gt[11]=te=>mt({fillOpacity:y.value})),title:"Opacité du remplissage"},null,544),[[qe,y.value]])])):me("",!0)])],512),[[Mh,!Y.value.style]])]),w("div",a1,[w("button",{class:"w-full px-3 py-2 flex justify-between items-center bg-gray-50 hover:bg-gray-100",onClick:gt[12]||(gt[12]=te=>dt("properties"))},[gt[20]||(gt[20]=w("span",{class:"font-medium"},"Propriétés",-1)),(Rt(),Nt("svg",{class:un(["w-5 h-5 transform transition-transform",{"rotate-180":!Y.value.properties}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},gt[19]||(gt[19]=[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),De(w("div",l1,[w("div",u1,[(ie=et.value)!=null&&ie.surfaceInterieure?(Rt(),Nt("div",c1," Surface intérieure: "+qt(Wt(et.value.surfaceInterieure)),1)):me("",!0),(ne=et.value)!=null&&ne.surfaceExterieure?(Rt(),Nt("div",h1," Surface extérieure: "+qt(Wt(et.value.surfaceExterieure)),1)):me("",!0),(Qt=et.value)!=null&&Qt.length?(Rt(),Nt("div",d1," Longueur: "+qt($t(et.value.length)),1)):me("",!0),(bt=et.value)!=null&&bt.perimeter?(Rt(),Nt("div",f1," Périmètre: "+qt($t(et.value.perimeter)),1)):me("",!0),(Ht=et.value)!=null&&Ht.radius?(Rt(),Nt("div",p1," Rayon: "+qt($t(et.value.radius)),1)):me("",!0),(Vt=et.value)!=null&&Vt.width?(Rt(),Nt("div",m1," Largeur: "+qt($t(et.value.width)),1)):me("",!0),(Xt=et.value)!=null&&Xt.height?(Rt(),Nt("div",g1," Hauteur: "+qt($t(et.value.height)),1)):me("",!0)])],512),[[Mh,!Y.value.properties]])])])):me("",!0)])}}}),y1=zp(_1,[["__scopeId","data-v-98cb7951"]]);(()=>{var oh,ah;var t=Object.create,n=Object.defineProperty,s=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,h=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,f=(i,r)=>()=>(r||i((r={exports:{}}).exports,r),r.exports),v=(i,r,a,u)=>{if(r&&typeof r=="object"||typeof r=="function")for(let d of l(r))!p.call(i,d)&&d!==a&&n(i,d,{get:()=>r[d],enumerable:!(u=s(r,d))||u.enumerable});return i},y=(i,r,a)=>(a=i!=null?t(h(i)):{},v(r||!i||!i.__esModule?n(a,"default",{value:i,enumerable:!0}):a,i)),C=f((i,r)=>{function a(){this.__data__=[],this.size=0}r.exports=a}),M=f((i,r)=>{function a(u,d){return u===d||u!==u&&d!==d}r.exports=a}),P=f((i,r)=>{var a=M();function u(d,g){for(var _=d.length;_--;)if(a(d[_][0],g))return _;return-1}r.exports=u}),U=f((i,r)=>{var a=P(),u=Array.prototype,d=u.splice;function g(_){var b=this.__data__,E=a(b,_);if(E<0)return!1;var S=b.length-1;return E==S?b.pop():d.call(b,E,1),--this.size,!0}r.exports=g}),J=f((i,r)=>{var a=P();function u(d){var g=this.__data__,_=a(g,d);return _<0?void 0:g[_][1]}r.exports=u}),R=f((i,r)=>{var a=P();function u(d){return a(this.__data__,d)>-1}r.exports=u}),V=f((i,r)=>{var a=P();function u(d,g){var _=this.__data__,b=a(_,d);return b<0?(++this.size,_.push([d,g])):_[b][1]=g,this}r.exports=u}),G=f((i,r)=>{var a=C(),u=U(),d=J(),g=R(),_=V();function b(E){var S=-1,j=E==null?0:E.length;for(this.clear();++S<j;){var F=E[S];this.set(F[0],F[1])}}b.prototype.clear=a,b.prototype.delete=u,b.prototype.get=d,b.prototype.has=g,b.prototype.set=_,r.exports=b}),_t=f((i,r)=>{var a=G();function u(){this.__data__=new a,this.size=0}r.exports=u}),kt=f((i,r)=>{function a(u){var d=this.__data__,g=d.delete(u);return this.size=d.size,g}r.exports=a}),pt=f((i,r)=>{function a(u){return this.__data__.get(u)}r.exports=a}),At=f((i,r)=>{function a(u){return this.__data__.has(u)}r.exports=a}),Ut=f((i,r)=>{var a=typeof er=="object"&&er&&er.Object===Object&&er;r.exports=a}),Y=f((i,r)=>{var a=Ut(),u=typeof self=="object"&&self&&self.Object===Object&&self,d=a||u||Function("return this")();r.exports=d}),nt=f((i,r)=>{var a=Y(),u=a.Symbol;r.exports=u}),z=f((i,r)=>{var a=nt(),u=Object.prototype,d=u.hasOwnProperty,g=u.toString,_=a?a.toStringTag:void 0;function b(E){var S=d.call(E,_),j=E[_];try{E[_]=void 0;var F=!0}catch{}var ht=g.call(E);return F&&(S?E[_]=j:delete E[_]),ht}r.exports=b}),rt=f((i,r)=>{var a=Object.prototype,u=a.toString;function d(g){return u.call(g)}r.exports=d}),dt=f((i,r)=>{var a=nt(),u=z(),d=rt(),g="[object Null]",_="[object Undefined]",b=a?a.toStringTag:void 0;function E(S){return S==null?S===void 0?_:g:b&&b in Object(S)?u(S):d(S)}r.exports=E}),et=f((i,r)=>{function a(u){var d=typeof u;return u!=null&&(d=="object"||d=="function")}r.exports=a}),Mt=f((i,r)=>{var a=dt(),u=et(),d="[object AsyncFunction]",g="[object Function]",_="[object GeneratorFunction]",b="[object Proxy]";function E(S){if(!u(S))return!1;var j=a(S);return j==g||j==_||j==d||j==b}r.exports=E}),Ot=f((i,r)=>{var a=Y(),u=a["__core-js_shared__"];r.exports=u}),Q=f((i,r)=>{var a=Ot(),u=function(){var g=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}();function d(g){return!!u&&u in g}r.exports=d}),mt=f((i,r)=>{var a=Function.prototype,u=a.toString;function d(g){if(g!=null){try{return u.call(g)}catch{}try{return g+""}catch{}}return""}r.exports=d}),Pt=f((i,r)=>{var a=Mt(),u=Q(),d=et(),g=mt(),_=/[\\^$.*+?()[\]{}|]/g,b=/^\[object .+?Constructor\]$/,E=Function.prototype,S=Object.prototype,j=E.toString,F=S.hasOwnProperty,ht=RegExp("^"+j.call(F).replace(_,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function yt(Gt){if(!d(Gt)||u(Gt))return!1;var Yt=a(Gt)?ht:b;return Yt.test(g(Gt))}r.exports=yt}),Ct=f((i,r)=>{function a(u,d){return u==null?void 0:u[d]}r.exports=a}),xt=f((i,r)=>{var a=Pt(),u=Ct();function d(g,_){var b=u(g,_);return a(b)?b:void 0}r.exports=d}),Wt=f((i,r)=>{var a=xt(),u=Y(),d=a(u,"Map");r.exports=d}),$t=f((i,r)=>{var a=xt(),u=a(Object,"create");r.exports=u}),Lt=f((i,r)=>{var a=$t();function u(){this.__data__=a?a(null):{},this.size=0}r.exports=u}),gt=f((i,r)=>{function a(u){var d=this.has(u)&&delete this.__data__[u];return this.size-=d?1:0,d}r.exports=a}),Kt=f((i,r)=>{var a=$t(),u="__lodash_hash_undefined__",d=Object.prototype,g=d.hasOwnProperty;function _(b){var E=this.__data__;if(a){var S=E[b];return S===u?void 0:S}return g.call(E,b)?E[b]:void 0}r.exports=_}),ie=f((i,r)=>{var a=$t(),u=Object.prototype,d=u.hasOwnProperty;function g(_){var b=this.__data__;return a?b[_]!==void 0:d.call(b,_)}r.exports=g}),ne=f((i,r)=>{var a=$t(),u="__lodash_hash_undefined__";function d(g,_){var b=this.__data__;return this.size+=this.has(g)?0:1,b[g]=a&&_===void 0?u:_,this}r.exports=d}),Qt=f((i,r)=>{var a=Lt(),u=gt(),d=Kt(),g=ie(),_=ne();function b(E){var S=-1,j=E==null?0:E.length;for(this.clear();++S<j;){var F=E[S];this.set(F[0],F[1])}}b.prototype.clear=a,b.prototype.delete=u,b.prototype.get=d,b.prototype.has=g,b.prototype.set=_,r.exports=b}),bt=f((i,r)=>{var a=Qt(),u=G(),d=Wt();function g(){this.size=0,this.__data__={hash:new a,map:new(d||u),string:new a}}r.exports=g}),Ht=f((i,r)=>{function a(u){var d=typeof u;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?u!=="__proto__":u===null}r.exports=a}),Vt=f((i,r)=>{var a=Ht();function u(d,g){var _=d.__data__;return a(g)?_[typeof g=="string"?"string":"hash"]:_.map}r.exports=u}),Xt=f((i,r)=>{var a=Vt();function u(d){var g=a(this,d).delete(d);return this.size-=g?1:0,g}r.exports=u}),te=f((i,r)=>{var a=Vt();function u(d){return a(this,d).get(d)}r.exports=u}),$=f((i,r)=>{var a=Vt();function u(d){return a(this,d).has(d)}r.exports=u}),H=f((i,r)=>{var a=Vt();function u(d,g){var _=a(this,d),b=_.size;return _.set(d,g),this.size+=_.size==b?0:1,this}r.exports=u}),ot=f((i,r)=>{var a=bt(),u=Xt(),d=te(),g=$(),_=H();function b(E){var S=-1,j=E==null?0:E.length;for(this.clear();++S<j;){var F=E[S];this.set(F[0],F[1])}}b.prototype.clear=a,b.prototype.delete=u,b.prototype.get=d,b.prototype.has=g,b.prototype.set=_,r.exports=b}),St=f((i,r)=>{var a=G(),u=Wt(),d=ot(),g=200;function _(b,E){var S=this.__data__;if(S instanceof a){var j=S.__data__;if(!u||j.length<g-1)return j.push([b,E]),this.size=++S.size,this;S=this.__data__=new d(j)}return S.set(b,E),this.size=S.size,this}r.exports=_}),It=f((i,r)=>{var a=G(),u=_t(),d=kt(),g=pt(),_=At(),b=St();function E(S){var j=this.__data__=new a(S);this.size=j.size}E.prototype.clear=u,E.prototype.delete=d,E.prototype.get=g,E.prototype.has=_,E.prototype.set=b,r.exports=E}),at=f((i,r)=>{var a=xt(),u=function(){try{var d=a(Object,"defineProperty");return d({},"",{}),d}catch{}}();r.exports=u}),X=f((i,r)=>{var a=at();function u(d,g,_){g=="__proto__"&&a?a(d,g,{configurable:!0,enumerable:!0,value:_,writable:!0}):d[g]=_}r.exports=u}),jt=f((i,r)=>{var a=X(),u=M();function d(g,_,b){(b!==void 0&&!u(g[_],b)||b===void 0&&!(_ in g))&&a(g,_,b)}r.exports=d}),Bt=f((i,r)=>{function a(u){return function(d,g,_){for(var b=-1,E=Object(d),S=_(d),j=S.length;j--;){var F=S[u?j:++b];if(g(E[F],F,E)===!1)break}return d}}r.exports=a}),Tt=f((i,r)=>{var a=Bt(),u=a();r.exports=u}),Dt=f((i,r)=>{var a=Y(),u=typeof i=="object"&&i&&!i.nodeType&&i,d=u&&typeof r=="object"&&r&&!r.nodeType&&r,g=d&&d.exports===u,_=g?a.Buffer:void 0,b=_?_.allocUnsafe:void 0;function E(S,j){if(j)return S.slice();var F=S.length,ht=b?b(F):new S.constructor(F);return S.copy(ht),ht}r.exports=E}),Zt=f((i,r)=>{var a=Y(),u=a.Uint8Array;r.exports=u}),ae=f((i,r)=>{var a=Zt();function u(d){var g=new d.constructor(d.byteLength);return new a(g).set(new a(d)),g}r.exports=u}),de=f((i,r)=>{var a=ae();function u(d,g){var _=g?a(d.buffer):d.buffer;return new d.constructor(_,d.byteOffset,d.length)}r.exports=u}),ve=f((i,r)=>{function a(u,d){var g=-1,_=u.length;for(d||(d=Array(_));++g<_;)d[g]=u[g];return d}r.exports=a}),Se=f((i,r)=>{var a=et(),u=Object.create,d=function(){function g(){}return function(_){if(!a(_))return{};if(u)return u(_);g.prototype=_;var b=new g;return g.prototype=void 0,b}}();r.exports=d}),Ee=f((i,r)=>{function a(u,d){return function(g){return u(d(g))}}r.exports=a}),ii=f((i,r)=>{var a=Ee(),u=a(Object.getPrototypeOf,Object);r.exports=u}),Ne=f((i,r)=>{var a=Object.prototype;function u(d){var g=d&&d.constructor,_=typeof g=="function"&&g.prototype||a;return d===_}r.exports=u}),Bi=f((i,r)=>{var a=Se(),u=ii(),d=Ne();function g(_){return typeof _.constructor=="function"&&!d(_)?a(u(_)):{}}r.exports=g}),ai=f((i,r)=>{function a(u){return u!=null&&typeof u=="object"}r.exports=a}),Ln=f((i,r)=>{var a=dt(),u=ai(),d="[object Arguments]";function g(_){return u(_)&&a(_)==d}r.exports=g}),zn=f((i,r)=>{var a=Ln(),u=ai(),d=Object.prototype,g=d.hasOwnProperty,_=d.propertyIsEnumerable,b=a(function(){return arguments}())?a:function(E){return u(E)&&g.call(E,"callee")&&!_.call(E,"callee")};r.exports=b}),Xe=f((i,r)=>{var a=Array.isArray;r.exports=a}),Ai=f((i,r)=>{var a=9007199254740991;function u(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=a}r.exports=u}),Qi=f((i,r)=>{var a=Mt(),u=Ai();function d(g){return g!=null&&u(g.length)&&!a(g)}r.exports=d}),Ul=f((i,r)=>{var a=Qi(),u=ai();function d(g){return u(g)&&a(g)}r.exports=d}),Gl=f((i,r)=>{function a(){return!1}r.exports=a}),Zs=f((i,r)=>{var a=Y(),u=Gl(),d=typeof i=="object"&&i&&!i.nodeType&&i,g=d&&typeof r=="object"&&r&&!r.nodeType&&r,_=g&&g.exports===d,b=_?a.Buffer:void 0,E=b?b.isBuffer:void 0,S=E||u;r.exports=S}),ra=f((i,r)=>{var a=dt(),u=ii(),d=ai(),g="[object Object]",_=Function.prototype,b=Object.prototype,E=_.toString,S=b.hasOwnProperty,j=E.call(Object);function F(ht){if(!d(ht)||a(ht)!=g)return!1;var yt=u(ht);if(yt===null)return!0;var Gt=S.call(yt,"constructor")&&yt.constructor;return typeof Gt=="function"&&Gt instanceof Gt&&E.call(Gt)==j}r.exports=F}),sa=f((i,r)=>{var a=dt(),u=Ai(),d=ai(),g="[object Arguments]",_="[object Array]",b="[object Boolean]",E="[object Date]",S="[object Error]",j="[object Function]",F="[object Map]",ht="[object Number]",yt="[object Object]",Gt="[object RegExp]",Yt="[object Set]",oe="[object String]",Me="[object WeakMap]",N="[object ArrayBuffer]",q="[object DataView]",it="[object Float32Array]",vt="[object Float64Array]",st="[object Int8Array]",ft="[object Int16Array]",k="[object Int32Array]",A="[object Uint8Array]",D="[object Uint8ClampedArray]",T="[object Uint16Array]",O="[object Uint32Array]",I={};I[it]=I[vt]=I[st]=I[ft]=I[k]=I[A]=I[D]=I[T]=I[O]=!0,I[g]=I[_]=I[N]=I[b]=I[q]=I[E]=I[S]=I[j]=I[F]=I[ht]=I[yt]=I[Gt]=I[Yt]=I[oe]=I[Me]=!1;function W(K){return d(K)&&u(K.length)&&!!I[a(K)]}r.exports=W}),Vl=f((i,r)=>{function a(u){return function(d){return u(d)}}r.exports=a}),Hl=f((i,r)=>{var a=Ut(),u=typeof i=="object"&&i&&!i.nodeType&&i,d=u&&typeof r=="object"&&r&&!r.nodeType&&r,g=d&&d.exports===u,_=g&&a.process,b=function(){try{var E=d&&d.require&&d.require("util").types;return E||_&&_.binding&&_.binding("util")}catch{}}();r.exports=b}),oa=f((i,r)=>{var a=sa(),u=Vl(),d=Hl(),g=d&&d.isTypedArray,_=g?u(g):a;r.exports=_}),aa=f((i,r)=>{function a(u,d){if(!(d==="constructor"&&typeof u[d]=="function")&&d!="__proto__")return u[d]}r.exports=a}),Zl=f((i,r)=>{var a=X(),u=M(),d=Object.prototype,g=d.hasOwnProperty;function _(b,E,S){var j=b[E];(!(g.call(b,E)&&u(j,S))||S===void 0&&!(E in b))&&a(b,E,S)}r.exports=_}),ql=f((i,r)=>{var a=Zl(),u=X();function d(g,_,b,E){var S=!b;b||(b={});for(var j=-1,F=_.length;++j<F;){var ht=_[j],yt=E?E(b[ht],g[ht],ht,b,g):void 0;yt===void 0&&(yt=g[ht]),S?u(b,ht,yt):a(b,ht,yt)}return b}r.exports=d}),qs=f((i,r)=>{function a(u,d){for(var g=-1,_=Array(u);++g<u;)_[g]=d(g);return _}r.exports=a}),la=f((i,r)=>{var a=9007199254740991,u=/^(?:0|[1-9]\d*)$/;function d(g,_){var b=typeof g;return _=_??a,!!_&&(b=="number"||b!="symbol"&&u.test(g))&&g>-1&&g%1==0&&g<_}r.exports=d}),Kl=f((i,r)=>{var a=qs(),u=zn(),d=Xe(),g=Zs(),_=la(),b=oa(),E=Object.prototype,S=E.hasOwnProperty;function j(F,ht){var yt=d(F),Gt=!yt&&u(F),Yt=!yt&&!Gt&&g(F),oe=!yt&&!Gt&&!Yt&&b(F),Me=yt||Gt||Yt||oe,N=Me?a(F.length,String):[],q=N.length;for(var it in F)(ht||S.call(F,it))&&!(Me&&(it=="length"||Yt&&(it=="offset"||it=="parent")||oe&&(it=="buffer"||it=="byteLength"||it=="byteOffset")||_(it,q)))&&N.push(it);return N}r.exports=j}),Wl=f((i,r)=>{function a(u){var d=[];if(u!=null)for(var g in Object(u))d.push(g);return d}r.exports=a}),Jl=f((i,r)=>{var a=et(),u=Ne(),d=Wl(),g=Object.prototype,_=g.hasOwnProperty;function b(E){if(!a(E))return d(E);var S=u(E),j=[];for(var F in E)F=="constructor"&&(S||!_.call(E,F))||j.push(F);return j}r.exports=b}),Zi=f((i,r)=>{var a=Kl(),u=Jl(),d=Qi();function g(_){return d(_)?a(_,!0):u(_)}r.exports=g}),ce=f((i,r)=>{var a=ql(),u=Zi();function d(g){return a(g,u(g))}r.exports=d}),ua=f((i,r)=>{var a=jt(),u=Dt(),d=de(),g=ve(),_=Bi(),b=zn(),E=Xe(),S=Ul(),j=Zs(),F=Mt(),ht=et(),yt=ra(),Gt=oa(),Yt=aa(),oe=ce();function Me(N,q,it,vt,st,ft,k){var A=Yt(N,it),D=Yt(q,it),T=k.get(D);if(T){a(N,it,T);return}var O=ft?ft(A,D,it+"",N,q,k):void 0,I=O===void 0;if(I){var W=E(D),K=!W&&j(D),tt=!W&&!K&&Gt(D);O=D,W||K||tt?E(A)?O=A:S(A)?O=g(A):K?(I=!1,O=u(D,!0)):tt?(I=!1,O=d(D,!0)):O=[]:yt(D)||b(D)?(O=A,b(A)?O=oe(A):(!ht(A)||F(A))&&(O=_(D))):I=!1}I&&(k.set(D,O),st(O,D,vt,ft,k),k.delete(D)),a(N,it,O)}r.exports=Me}),ca=f((i,r)=>{var a=It(),u=jt(),d=Tt(),g=ua(),_=et(),b=Zi(),E=aa();function S(j,F,ht,yt,Gt){j!==F&&d(F,function(Yt,oe){if(Gt||(Gt=new a),_(Yt))g(j,F,oe,ht,S,yt,Gt);else{var Me=yt?yt(E(j,oe),Yt,oe+"",j,F,Gt):void 0;Me===void 0&&(Me=Yt),u(j,oe,Me)}},b)}r.exports=S}),Ks=f((i,r)=>{function a(u){return u}r.exports=a}),ha=f((i,r)=>{function a(u,d,g){switch(g.length){case 0:return u.call(d);case 1:return u.call(d,g[0]);case 2:return u.call(d,g[0],g[1]);case 3:return u.call(d,g[0],g[1],g[2])}return u.apply(d,g)}r.exports=a}),Ws=f((i,r)=>{var a=ha(),u=Math.max;function d(g,_,b){return _=u(_===void 0?g.length-1:_,0),function(){for(var E=arguments,S=-1,j=u(E.length-_,0),F=Array(j);++S<j;)F[S]=E[_+S];S=-1;for(var ht=Array(_+1);++S<_;)ht[S]=E[S];return ht[_]=b(F),a(g,this,ht)}}r.exports=d}),da=f((i,r)=>{function a(u){return function(){return u}}r.exports=a}),rr=f((i,r)=>{var a=da(),u=at(),d=Ks(),g=u?function(_,b){return u(_,"toString",{configurable:!0,enumerable:!1,value:a(b),writable:!0})}:d;r.exports=g}),fa=f((i,r)=>{var a=800,u=16,d=Date.now;function g(_){var b=0,E=0;return function(){var S=d(),j=u-(S-E);if(E=S,j>0){if(++b>=a)return arguments[0]}else b=0;return _.apply(void 0,arguments)}}r.exports=g}),Xl=f((i,r)=>{var a=rr(),u=fa(),d=u(a);r.exports=d}),Yl=f((i,r)=>{var a=Ks(),u=Ws(),d=Xl();function g(_,b){return d(u(_,b,a),_+"")}r.exports=g}),Ql=f((i,r)=>{var a=M(),u=Qi(),d=la(),g=et();function _(b,E,S){if(!g(S))return!1;var j=typeof E;return(j=="number"?u(S)&&d(E,S.length):j=="string"&&E in S)?a(S[E],b):!1}r.exports=_}),tu=f((i,r)=>{var a=Yl(),u=Ql();function d(g){return a(function(_,b){var E=-1,S=b.length,j=S>1?b[S-1]:void 0,F=S>2?b[2]:void 0;for(j=g.length>3&&typeof j=="function"?(S--,j):void 0,F&&u(b[0],b[1],F)&&(j=S<3?void 0:j,S=1),_=Object(_);++E<S;){var ht=b[E];ht&&g(_,ht,E,j)}return _})}r.exports=d}),Qr=f((i,r)=>{var a=ca(),u=tu(),d=u(function(g,_,b){a(g,_,b)});r.exports=d}),Js=f((i,r)=>{var a=dt(),u=ai(),d="[object Symbol]";function g(_){return typeof _=="symbol"||u(_)&&a(_)==d}r.exports=g}),ts=f((i,r)=>{var a=Xe(),u=Js(),d=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,g=/^\w*$/;function _(b,E){if(a(b))return!1;var S=typeof b;return S=="number"||S=="symbol"||S=="boolean"||b==null||u(b)?!0:g.test(b)||!d.test(b)||E!=null&&b in Object(E)}r.exports=_}),eu=f((i,r)=>{var a=ot(),u="Expected a function";function d(g,_){if(typeof g!="function"||_!=null&&typeof _!="function")throw new TypeError(u);var b=function(){var E=arguments,S=_?_.apply(this,E):E[0],j=b.cache;if(j.has(S))return j.get(S);var F=g.apply(this,E);return b.cache=j.set(S,F)||j,F};return b.cache=new(d.Cache||a),b}d.Cache=a,r.exports=d}),iu=f((i,r)=>{var a=eu(),u=500;function d(g){var _=a(g,function(E){return b.size===u&&b.clear(),E}),b=_.cache;return _}r.exports=d}),nu=f((i,r)=>{var a=iu(),u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,d=/\\(\\)?/g,g=a(function(_){var b=[];return _.charCodeAt(0)===46&&b.push(""),_.replace(u,function(E,S,j,F){b.push(j?F.replace(d,"$1"):S||E)}),b});r.exports=g}),ru=f((i,r)=>{function a(u,d){for(var g=-1,_=u==null?0:u.length,b=Array(_);++g<_;)b[g]=d(u[g],g,u);return b}r.exports=a}),su=f((i,r)=>{var a=nt(),u=ru(),d=Xe(),g=Js(),_=a?a.prototype:void 0,b=_?_.toString:void 0;function E(S){if(typeof S=="string")return S;if(d(S))return u(S,E)+"";if(g(S))return b?b.call(S):"";var j=S+"";return j=="0"&&1/S==-1/0?"-0":j}r.exports=E}),Xs=f((i,r)=>{var a=su();function u(d){return d==null?"":a(d)}r.exports=u}),kr=f((i,r)=>{var a=Xe(),u=ts(),d=nu(),g=Xs();function _(b,E){return a(b)?b:u(b,E)?[b]:d(g(b))}r.exports=_}),pa=f((i,r)=>{var a=Js();function u(d){if(typeof d=="string"||a(d))return d;var g=d+"";return g=="0"&&1/d==-1/0?"-0":g}r.exports=u}),ma=f((i,r)=>{var a=kr(),u=pa();function d(g,_){_=a(_,g);for(var b=0,E=_.length;g!=null&&b<E;)g=g[u(_[b++])];return b&&b==E?g:void 0}r.exports=d}),Cn=f((i,r)=>{var a=ma();function u(d,g,_){var b=d==null?void 0:a(d,g);return b===void 0?_:b}r.exports=u}),Be=f((i,r)=>{(function(a,u){typeof i=="object"&&typeof r<"u"?r.exports=u():(a=a||self).RBush=u()})(i,function(){function a(N,q,it,vt,st){(function ft(k,A,D,T,O){for(;T>D;){if(T-D>600){var I=T-D+1,W=A-D+1,K=Math.log(I),tt=.5*Math.exp(2*K/3),ct=.5*Math.sqrt(K*tt*(I-tt)/I)*(W-I/2<0?-1:1),ut=Math.max(D,Math.floor(A-W*tt/I+ct)),Ft=Math.min(T,Math.floor(A+(I-W)*tt/I+ct));ft(k,A,ut,Ft,O)}var re=k[A],le=D,he=T;for(u(k,D,A),O(k[T],re)>0&&u(k,D,T);le<he;){for(u(k,le,he),le++,he--;O(k[le],re)<0;)le++;for(;O(k[he],re)>0;)he--}O(k[D],re)===0?u(k,D,he):u(k,++he,T),he<=A&&(D=he+1),A<=he&&(T=he-1)}})(N,q,it||0,vt||N.length-1,st||d)}function u(N,q,it){var vt=N[q];N[q]=N[it],N[it]=vt}function d(N,q){return N<q?-1:N>q?1:0}var g=function(N){N===void 0&&(N=9),this._maxEntries=Math.max(4,N),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function _(N,q,it){if(!it)return q.indexOf(N);for(var vt=0;vt<q.length;vt++)if(it(N,q[vt]))return vt;return-1}function b(N,q){E(N,0,N.children.length,q,N)}function E(N,q,it,vt,st){st||(st=oe(null)),st.minX=1/0,st.minY=1/0,st.maxX=-1/0,st.maxY=-1/0;for(var ft=q;ft<it;ft++){var k=N.children[ft];S(st,N.leaf?vt(k):k)}return st}function S(N,q){return N.minX=Math.min(N.minX,q.minX),N.minY=Math.min(N.minY,q.minY),N.maxX=Math.max(N.maxX,q.maxX),N.maxY=Math.max(N.maxY,q.maxY),N}function j(N,q){return N.minX-q.minX}function F(N,q){return N.minY-q.minY}function ht(N){return(N.maxX-N.minX)*(N.maxY-N.minY)}function yt(N){return N.maxX-N.minX+(N.maxY-N.minY)}function Gt(N,q){return N.minX<=q.minX&&N.minY<=q.minY&&q.maxX<=N.maxX&&q.maxY<=N.maxY}function Yt(N,q){return q.minX<=N.maxX&&q.minY<=N.maxY&&q.maxX>=N.minX&&q.maxY>=N.minY}function oe(N){return{children:N,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Me(N,q,it,vt,st){for(var ft=[q,it];ft.length;)if(!((it=ft.pop())-(q=ft.pop())<=vt)){var k=q+Math.ceil((it-q)/vt/2)*vt;a(N,k,q,it,st),ft.push(q,k,k,it)}}return g.prototype.all=function(){return this._all(this.data,[])},g.prototype.search=function(N){var q=this.data,it=[];if(!Yt(N,q))return it;for(var vt=this.toBBox,st=[];q;){for(var ft=0;ft<q.children.length;ft++){var k=q.children[ft],A=q.leaf?vt(k):k;Yt(N,A)&&(q.leaf?it.push(k):Gt(N,A)?this._all(k,it):st.push(k))}q=st.pop()}return it},g.prototype.collides=function(N){var q=this.data;if(!Yt(N,q))return!1;for(var it=[];q;){for(var vt=0;vt<q.children.length;vt++){var st=q.children[vt],ft=q.leaf?this.toBBox(st):st;if(Yt(N,ft)){if(q.leaf||Gt(N,ft))return!0;it.push(st)}}q=it.pop()}return!1},g.prototype.load=function(N){if(!N||!N.length)return this;if(N.length<this._minEntries){for(var q=0;q<N.length;q++)this.insert(N[q]);return this}var it=this._build(N.slice(),0,N.length-1,0);if(this.data.children.length)if(this.data.height===it.height)this._splitRoot(this.data,it);else{if(this.data.height<it.height){var vt=this.data;this.data=it,it=vt}this._insert(it,this.data.height-it.height-1,!0)}else this.data=it;return this},g.prototype.insert=function(N){return N&&this._insert(N,this.data.height-1),this},g.prototype.clear=function(){return this.data=oe([]),this},g.prototype.remove=function(N,q){if(!N)return this;for(var it,vt,st,ft=this.data,k=this.toBBox(N),A=[],D=[];ft||A.length;){if(ft||(ft=A.pop(),vt=A[A.length-1],it=D.pop(),st=!0),ft.leaf){var T=_(N,ft.children,q);if(T!==-1)return ft.children.splice(T,1),A.push(ft),this._condense(A),this}st||ft.leaf||!Gt(ft,k)?vt?(it++,ft=vt.children[it],st=!1):ft=null:(A.push(ft),D.push(it),it=0,vt=ft,ft=ft.children[0])}return this},g.prototype.toBBox=function(N){return N},g.prototype.compareMinX=function(N,q){return N.minX-q.minX},g.prototype.compareMinY=function(N,q){return N.minY-q.minY},g.prototype.toJSON=function(){return this.data},g.prototype.fromJSON=function(N){return this.data=N,this},g.prototype._all=function(N,q){for(var it=[];N;)N.leaf?q.push.apply(q,N.children):it.push.apply(it,N.children),N=it.pop();return q},g.prototype._build=function(N,q,it,vt){var st,ft=it-q+1,k=this._maxEntries;if(ft<=k)return b(st=oe(N.slice(q,it+1)),this.toBBox),st;vt||(vt=Math.ceil(Math.log(ft)/Math.log(k)),k=Math.ceil(ft/Math.pow(k,vt-1))),(st=oe([])).leaf=!1,st.height=vt;var A=Math.ceil(ft/k),D=A*Math.ceil(Math.sqrt(k));Me(N,q,it,D,this.compareMinX);for(var T=q;T<=it;T+=D){var O=Math.min(T+D-1,it);Me(N,T,O,A,this.compareMinY);for(var I=T;I<=O;I+=A){var W=Math.min(I+A-1,O);st.children.push(this._build(N,I,W,vt-1))}}return b(st,this.toBBox),st},g.prototype._chooseSubtree=function(N,q,it,vt){for(;vt.push(q),!q.leaf&&vt.length-1!==it;){for(var st=1/0,ft=1/0,k=void 0,A=0;A<q.children.length;A++){var D=q.children[A],T=ht(D),O=(I=N,W=D,(Math.max(W.maxX,I.maxX)-Math.min(W.minX,I.minX))*(Math.max(W.maxY,I.maxY)-Math.min(W.minY,I.minY))-T);O<ft?(ft=O,st=T<st?T:st,k=D):O===ft&&T<st&&(st=T,k=D)}q=k||q.children[0]}var I,W;return q},g.prototype._insert=function(N,q,it){var vt=it?N:this.toBBox(N),st=[],ft=this._chooseSubtree(vt,this.data,q,st);for(ft.children.push(N),S(ft,vt);q>=0&&st[q].children.length>this._maxEntries;)this._split(st,q),q--;this._adjustParentBBoxes(vt,st,q)},g.prototype._split=function(N,q){var it=N[q],vt=it.children.length,st=this._minEntries;this._chooseSplitAxis(it,st,vt);var ft=this._chooseSplitIndex(it,st,vt),k=oe(it.children.splice(ft,it.children.length-ft));k.height=it.height,k.leaf=it.leaf,b(it,this.toBBox),b(k,this.toBBox),q?N[q-1].children.push(k):this._splitRoot(it,k)},g.prototype._splitRoot=function(N,q){this.data=oe([N,q]),this.data.height=N.height+1,this.data.leaf=!1,b(this.data,this.toBBox)},g.prototype._chooseSplitIndex=function(N,q,it){for(var vt,st,ft,k,A,D,T,O=1/0,I=1/0,W=q;W<=it-q;W++){var K=E(N,0,W,this.toBBox),tt=E(N,W,it,this.toBBox),ct=(st=K,ft=tt,k=void 0,A=void 0,D=void 0,T=void 0,k=Math.max(st.minX,ft.minX),A=Math.max(st.minY,ft.minY),D=Math.min(st.maxX,ft.maxX),T=Math.min(st.maxY,ft.maxY),Math.max(0,D-k)*Math.max(0,T-A)),ut=ht(K)+ht(tt);ct<O?(O=ct,vt=W,I=ut<I?ut:I):ct===O&&ut<I&&(I=ut,vt=W)}return vt||it-q},g.prototype._chooseSplitAxis=function(N,q,it){var vt=N.leaf?this.compareMinX:j,st=N.leaf?this.compareMinY:F;this._allDistMargin(N,q,it,vt)<this._allDistMargin(N,q,it,st)&&N.children.sort(vt)},g.prototype._allDistMargin=function(N,q,it,vt){N.children.sort(vt);for(var st=this.toBBox,ft=E(N,0,q,st),k=E(N,it-q,it,st),A=yt(ft)+yt(k),D=q;D<it-q;D++){var T=N.children[D];S(ft,N.leaf?st(T):T),A+=yt(ft)}for(var O=it-q-1;O>=q;O--){var I=N.children[O];S(k,N.leaf?st(I):I),A+=yt(k)}return A},g.prototype._adjustParentBBoxes=function(N,q,it){for(var vt=it;vt>=0;vt--)S(q[vt],N)},g.prototype._condense=function(N){for(var q=N.length-1,it=void 0;q>=0;q--)N[q].children.length===0?q>0?(it=N[q-1].children).splice(it.indexOf(N[q]),1):this.clear():b(N[q],this.toBBox)},g})}),Ve=f(i=>{Object.defineProperty(i,"__esModule",{value:!0}),i.earthRadius=63710088e-1,i.factors={centimeters:i.earthRadius*100,centimetres:i.earthRadius*100,degrees:i.earthRadius/111325,feet:i.earthRadius*3.28084,inches:i.earthRadius*39.37,kilometers:i.earthRadius/1e3,kilometres:i.earthRadius/1e3,meters:i.earthRadius,metres:i.earthRadius,miles:i.earthRadius/1609.344,millimeters:i.earthRadius*1e3,millimetres:i.earthRadius*1e3,nauticalmiles:i.earthRadius/1852,radians:1,yards:i.earthRadius*1.0936},i.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/i.earthRadius,yards:1.0936133},i.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function r(T,O,I){I===void 0&&(I={});var W={type:"Feature"};return(I.id===0||I.id)&&(W.id=I.id),I.bbox&&(W.bbox=I.bbox),W.properties=O||{},W.geometry=T,W}i.feature=r;function a(T,O,I){switch(T){case"Point":return u(O).geometry;case"LineString":return b(O).geometry;case"Polygon":return g(O).geometry;case"MultiPoint":return F(O).geometry;case"MultiLineString":return j(O).geometry;case"MultiPolygon":return ht(O).geometry;default:throw new Error(T+" is invalid")}}i.geometry=a;function u(T,O,I){if(I===void 0&&(I={}),!T)throw new Error("coordinates is required");if(!Array.isArray(T))throw new Error("coordinates must be an Array");if(T.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ft(T[0])||!ft(T[1]))throw new Error("coordinates must contain numbers");var W={type:"Point",coordinates:T};return r(W,O,I)}i.point=u;function d(T,O,I){return I===void 0&&(I={}),S(T.map(function(W){return u(W,O)}),I)}i.points=d;function g(T,O,I){I===void 0&&(I={});for(var W=0,K=T;W<K.length;W++){var tt=K[W];if(tt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var ct=0;ct<tt[tt.length-1].length;ct++)if(tt[tt.length-1][ct]!==tt[0][ct])throw new Error("First and last Position are not equivalent.")}var ut={type:"Polygon",coordinates:T};return r(ut,O,I)}i.polygon=g;function _(T,O,I){return I===void 0&&(I={}),S(T.map(function(W){return g(W,O)}),I)}i.polygons=_;function b(T,O,I){if(I===void 0&&(I={}),T.length<2)throw new Error("coordinates must be an array of two or more positions");var W={type:"LineString",coordinates:T};return r(W,O,I)}i.lineString=b;function E(T,O,I){return I===void 0&&(I={}),S(T.map(function(W){return b(W,O)}),I)}i.lineStrings=E;function S(T,O){O===void 0&&(O={});var I={type:"FeatureCollection"};return O.id&&(I.id=O.id),O.bbox&&(I.bbox=O.bbox),I.features=T,I}i.featureCollection=S;function j(T,O,I){I===void 0&&(I={});var W={type:"MultiLineString",coordinates:T};return r(W,O,I)}i.multiLineString=j;function F(T,O,I){I===void 0&&(I={});var W={type:"MultiPoint",coordinates:T};return r(W,O,I)}i.multiPoint=F;function ht(T,O,I){I===void 0&&(I={});var W={type:"MultiPolygon",coordinates:T};return r(W,O,I)}i.multiPolygon=ht;function yt(T,O,I){I===void 0&&(I={});var W={type:"GeometryCollection",geometries:T};return r(W,O,I)}i.geometryCollection=yt;function Gt(T,O){if(O===void 0&&(O=0),O&&!(O>=0))throw new Error("precision must be a positive number");var I=Math.pow(10,O||0);return Math.round(T*I)/I}i.round=Gt;function Yt(T,O){O===void 0&&(O="kilometers");var I=i.factors[O];if(!I)throw new Error(O+" units is invalid");return T*I}i.radiansToLength=Yt;function oe(T,O){O===void 0&&(O="kilometers");var I=i.factors[O];if(!I)throw new Error(O+" units is invalid");return T/I}i.lengthToRadians=oe;function Me(T,O){return q(oe(T,O))}i.lengthToDegrees=Me;function N(T){var O=T%360;return O<0&&(O+=360),O}i.bearingToAzimuth=N;function q(T){var O=T%(2*Math.PI);return O*180/Math.PI}i.radiansToDegrees=q;function it(T){var O=T%360;return O*Math.PI/180}i.degreesToRadians=it;function vt(T,O,I){if(O===void 0&&(O="kilometers"),I===void 0&&(I="kilometers"),!(T>=0))throw new Error("length must be a positive number");return Yt(oe(T,O),I)}i.convertLength=vt;function st(T,O,I){if(O===void 0&&(O="meters"),I===void 0&&(I="kilometers"),!(T>=0))throw new Error("area must be a positive number");var W=i.areaFactors[O];if(!W)throw new Error("invalid original units");var K=i.areaFactors[I];if(!K)throw new Error("invalid final units");return T/W*K}i.convertArea=st;function ft(T){return!isNaN(T)&&T!==null&&!Array.isArray(T)}i.isNumber=ft;function k(T){return!!T&&T.constructor===Object}i.isObject=k;function A(T){if(!T)throw new Error("bbox is required");if(!Array.isArray(T))throw new Error("bbox must be an Array");if(T.length!==4&&T.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");T.forEach(function(O){if(!ft(O))throw new Error("bbox must only contain numbers")})}i.validateBBox=A;function D(T){if(!T)throw new Error("id is required");if(["string","number"].indexOf(typeof T)===-1)throw new Error("id must be a number or a string")}i.validateId=D}),Mr=f(i=>{Object.defineProperty(i,"__esModule",{value:!0});var r=Ve();function a(q,it,vt){if(q!==null)for(var st,ft,k,A,D,T,O,I=0,W=0,K,tt=q.type,ct=tt==="FeatureCollection",ut=tt==="Feature",Ft=ct?q.features.length:1,re=0;re<Ft;re++){O=ct?q.features[re].geometry:ut?q.geometry:q,K=O?O.type==="GeometryCollection":!1,D=K?O.geometries.length:1;for(var le=0;le<D;le++){var he=0,Ie=0;if(A=K?O.geometries[le]:O,A!==null){T=A.coordinates;var je=A.type;switch(I=vt&&(je==="Polygon"||je==="MultiPolygon")?1:0,je){case null:break;case"Point":if(it(T,W,re,he,Ie)===!1)return!1;W++,he++;break;case"LineString":case"MultiPoint":for(st=0;st<T.length;st++){if(it(T[st],W,re,he,Ie)===!1)return!1;W++,je==="MultiPoint"&&he++}je==="LineString"&&he++;break;case"Polygon":case"MultiLineString":for(st=0;st<T.length;st++){for(ft=0;ft<T[st].length-I;ft++){if(it(T[st][ft],W,re,he,Ie)===!1)return!1;W++}je==="MultiLineString"&&he++,je==="Polygon"&&Ie++}je==="Polygon"&&he++;break;case"MultiPolygon":for(st=0;st<T.length;st++){for(Ie=0,ft=0;ft<T[st].length;ft++){for(k=0;k<T[st][ft].length-I;k++){if(it(T[st][ft][k],W,re,he,Ie)===!1)return!1;W++}Ie++}he++}break;case"GeometryCollection":for(st=0;st<A.geometries.length;st++)if(a(A.geometries[st],it,vt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function u(q,it,vt,st){var ft=vt;return a(q,function(k,A,D,T,O){A===0&&vt===void 0?ft=k:ft=it(ft,k,A,D,T,O)},st),ft}function d(q,it){var vt;switch(q.type){case"FeatureCollection":for(vt=0;vt<q.features.length&&it(q.features[vt].properties,vt)!==!1;vt++);break;case"Feature":it(q.properties,0);break}}function g(q,it,vt){var st=vt;return d(q,function(ft,k){k===0&&vt===void 0?st=ft:st=it(st,ft,k)}),st}function _(q,it){if(q.type==="Feature")it(q,0);else if(q.type==="FeatureCollection")for(var vt=0;vt<q.features.length&&it(q.features[vt],vt)!==!1;vt++);}function b(q,it,vt){var st=vt;return _(q,function(ft,k){k===0&&vt===void 0?st=ft:st=it(st,ft,k)}),st}function E(q){var it=[];return a(q,function(vt){it.push(vt)}),it}function S(q,it){var vt,st,ft,k,A,D,T,O,I,W,K=0,tt=q.type==="FeatureCollection",ct=q.type==="Feature",ut=tt?q.features.length:1;for(vt=0;vt<ut;vt++){for(D=tt?q.features[vt].geometry:ct?q.geometry:q,O=tt?q.features[vt].properties:ct?q.properties:{},I=tt?q.features[vt].bbox:ct?q.bbox:void 0,W=tt?q.features[vt].id:ct?q.id:void 0,T=D?D.type==="GeometryCollection":!1,A=T?D.geometries.length:1,ft=0;ft<A;ft++){if(k=T?D.geometries[ft]:D,k===null){if(it(null,K,O,I,W)===!1)return!1;continue}switch(k.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(it(k,K,O,I,W)===!1)return!1;break}case"GeometryCollection":{for(st=0;st<k.geometries.length;st++)if(it(k.geometries[st],K,O,I,W)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}K++}}function j(q,it,vt){var st=vt;return S(q,function(ft,k,A,D,T){k===0&&vt===void 0?st=ft:st=it(st,ft,k,A,D,T)}),st}function F(q,it){S(q,function(vt,st,ft,k,A){var D=vt===null?null:vt.type;switch(D){case null:case"Point":case"LineString":case"Polygon":return it(r.feature(vt,ft,{bbox:k,id:A}),st,0)===!1?!1:void 0}var T;switch(D){case"MultiPoint":T="Point";break;case"MultiLineString":T="LineString";break;case"MultiPolygon":T="Polygon";break}for(var O=0;O<vt.coordinates.length;O++){var I=vt.coordinates[O],W={type:T,coordinates:I};if(it(r.feature(W,ft),st,O)===!1)return!1}})}function ht(q,it,vt){var st=vt;return F(q,function(ft,k,A){k===0&&A===0&&vt===void 0?st=ft:st=it(st,ft,k,A)}),st}function yt(q,it){F(q,function(vt,st,ft){var k=0;if(vt.geometry){var A=vt.geometry.type;if(!(A==="Point"||A==="MultiPoint")){var D,T=0,O=0,I=0;if(a(vt,function(W,K,tt,ct,ut){if(D===void 0||st>T||ct>O||ut>I){D=W,T=st,O=ct,I=ut,k=0;return}var Ft=r.lineString([D,W],vt.properties);if(it(Ft,st,ft,ut,k)===!1)return!1;k++,D=W})===!1)return!1}}})}function Gt(q,it,vt){var st=vt,ft=!1;return yt(q,function(k,A,D,T,O){ft===!1&&vt===void 0?st=k:st=it(st,k,A,D,T,O),ft=!0}),st}function Yt(q,it){if(!q)throw new Error("geojson is required");F(q,function(vt,st,ft){if(vt.geometry!==null){var k=vt.geometry.type,A=vt.geometry.coordinates;switch(k){case"LineString":if(it(vt,st,ft,0,0)===!1)return!1;break;case"Polygon":for(var D=0;D<A.length;D++)if(it(r.lineString(A[D],vt.properties),st,ft,D)===!1)return!1;break}}})}function oe(q,it,vt){var st=vt;return Yt(q,function(ft,k,A,D){k===0&&vt===void 0?st=ft:st=it(st,ft,k,A,D)}),st}function Me(q,it){if(it=it||{},!r.isObject(it))throw new Error("options is invalid");var vt=it.featureIndex||0,st=it.multiFeatureIndex||0,ft=it.geometryIndex||0,k=it.segmentIndex||0,A=it.properties,D;switch(q.type){case"FeatureCollection":vt<0&&(vt=q.features.length+vt),A=A||q.features[vt].properties,D=q.features[vt].geometry;break;case"Feature":A=A||q.properties,D=q.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":D=q;break;default:throw new Error("geojson is invalid")}if(D===null)return null;var T=D.coordinates;switch(D.type){case"Point":case"MultiPoint":return null;case"LineString":return k<0&&(k=T.length+k-1),r.lineString([T[k],T[k+1]],A,it);case"Polygon":return ft<0&&(ft=T.length+ft),k<0&&(k=T[ft].length+k-1),r.lineString([T[ft][k],T[ft][k+1]],A,it);case"MultiLineString":return st<0&&(st=T.length+st),k<0&&(k=T[st].length+k-1),r.lineString([T[st][k],T[st][k+1]],A,it);case"MultiPolygon":return st<0&&(st=T.length+st),ft<0&&(ft=T[st].length+ft),k<0&&(k=T[st][ft].length-k-1),r.lineString([T[st][ft][k],T[st][ft][k+1]],A,it)}throw new Error("geojson is invalid")}function N(q,it){if(it=it||{},!r.isObject(it))throw new Error("options is invalid");var vt=it.featureIndex||0,st=it.multiFeatureIndex||0,ft=it.geometryIndex||0,k=it.coordIndex||0,A=it.properties,D;switch(q.type){case"FeatureCollection":vt<0&&(vt=q.features.length+vt),A=A||q.features[vt].properties,D=q.features[vt].geometry;break;case"Feature":A=A||q.properties,D=q.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":D=q;break;default:throw new Error("geojson is invalid")}if(D===null)return null;var T=D.coordinates;switch(D.type){case"Point":return r.point(T,A,it);case"MultiPoint":return st<0&&(st=T.length+st),r.point(T[st],A,it);case"LineString":return k<0&&(k=T.length+k),r.point(T[k],A,it);case"Polygon":return ft<0&&(ft=T.length+ft),k<0&&(k=T[ft].length+k),r.point(T[ft][k],A,it);case"MultiLineString":return st<0&&(st=T.length+st),k<0&&(k=T[st].length+k),r.point(T[st][k],A,it);case"MultiPolygon":return st<0&&(st=T.length+st),ft<0&&(ft=T[st].length+ft),k<0&&(k=T[st][ft].length-k),r.point(T[st][ft][k],A,it)}throw new Error("geojson is invalid")}i.coordAll=E,i.coordEach=a,i.coordReduce=u,i.featureEach=_,i.featureReduce=b,i.findPoint=N,i.findSegment=Me,i.flattenEach=F,i.flattenReduce=ht,i.geomEach=S,i.geomReduce=j,i.lineEach=Yt,i.lineReduce=oe,i.propEach=d,i.propReduce=g,i.segmentEach=yt,i.segmentReduce=Gt}),sr=f(i=>{Object.defineProperty(i,"__esModule",{value:!0});var r=Mr();function a(u){var d=[1/0,1/0,-1/0,-1/0];return r.coordEach(u,function(g){d[0]>g[0]&&(d[0]=g[0]),d[1]>g[1]&&(d[1]=g[1]),d[2]<g[0]&&(d[2]=g[0]),d[3]<g[1]&&(d[3]=g[1])}),d}a.default=a,i.default=a}),Nn=f((i,r)=>{var a=Be(),u=Ve(),d=Mr(),g=sr().default,_=d.featureEach;d.coordEach,u.polygon;var b=u.featureCollection;function E(S){var j=new a(S);return j.insert=function(F){if(F.type!=="Feature")throw new Error("invalid feature");return F.bbox=F.bbox?F.bbox:g(F),a.prototype.insert.call(this,F)},j.load=function(F){var ht=[];return Array.isArray(F)?F.forEach(function(yt){if(yt.type!=="Feature")throw new Error("invalid features");yt.bbox=yt.bbox?yt.bbox:g(yt),ht.push(yt)}):_(F,function(yt){if(yt.type!=="Feature")throw new Error("invalid features");yt.bbox=yt.bbox?yt.bbox:g(yt),ht.push(yt)}),a.prototype.load.call(this,ht)},j.remove=function(F,ht){if(F.type!=="Feature")throw new Error("invalid feature");return F.bbox=F.bbox?F.bbox:g(F),a.prototype.remove.call(this,F,ht)},j.clear=function(){return a.prototype.clear.call(this)},j.search=function(F){var ht=a.prototype.search.call(this,this.toBBox(F));return b(ht)},j.collides=function(F){return a.prototype.collides.call(this,this.toBBox(F))},j.all=function(){var F=a.prototype.all.call(this);return b(F)},j.toJSON=function(){return a.prototype.toJSON.call(this)},j.fromJSON=function(F){return a.prototype.fromJSON.call(this,F)},j.toBBox=function(F){var ht;if(F.bbox)ht=F.bbox;else if(Array.isArray(F)&&F.length===4)ht=F;else if(Array.isArray(F)&&F.length===6)ht=[F[0],F[1],F[3],F[4]];else if(F.type==="Feature")ht=g(F);else if(F.type==="FeatureCollection")ht=g(F);else throw new Error("invalid geojson");return{minX:ht[0],minY:ht[1],maxX:ht[2],maxY:ht[3]}},j}r.exports=E,r.exports.default=E});Array.prototype.findIndex=Array.prototype.findIndex||function(i){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof i!="function")throw new TypeError("callback must be a function");for(var r=Object(this),a=r.length>>>0,u=arguments[1],d=0;d<a;d++)if(i.call(u,r[d],d,r))return d;return-1},Array.prototype.find=Array.prototype.find||function(i){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof i!="function")throw new TypeError("callback must be a function");for(var r=Object(this),a=r.length>>>0,u=arguments[1],d=0;d<a;d++){var g=r[d];if(i.call(u,g,d,r))return g}},typeof Object.assign!="function"&&(Object.assign=function(i){if(i==null)throw new TypeError("Cannot convert undefined or null to object");i=Object(i);for(var r=1;r<arguments.length;r++){var a=arguments[r];if(a!=null)for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(i[u]=a[u])}return i}),function(i){i.forEach(function(r){r.hasOwnProperty("remove")||Object.defineProperty(r,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(i,r){if(this==null)throw new TypeError('"this" is null or not defined');var a=Object(this),u=a.length>>>0;if(u===0)return!1;var d=r|0,g=Math.max(d>=0?d:u-Math.abs(d),0);function _(b,E){return b===E||typeof b=="number"&&typeof E=="number"&&isNaN(b)&&isNaN(E)}for(;g<u;){if(_(a[g],i))return!0;g++}return!1}});var Ys={version:"2.18.3"},be=y(Qr()),We={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},Qs={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex löschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer löschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknüpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Länge",segmentLength:"Segment Länge",area:"Fläche",radius:"Radius",perimeter:"Umfang",height:"Höhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},es={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},Ni={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},ou={tooltips:{placeMarker:"Adaugă un punct",firstVertex:"Apasă aici pentru a adăuga primul Vertex",continueLine:"Apasă aici pentru a continua desenul",finishLine:"Apasă pe orice obiect pentru a finisa desenul",finishPoly:"Apasă pe primul obiect pentru a finisa",finishRect:"Apasă pentru a finisa",startCircle:"Apasă pentru a desena un cerc",finishCircle:"Apasă pentru a finisa un cerc",placeCircleMarker:"Adaugă un punct"},actions:{finish:"Termină",cancel:"Anulează",removeLastVertex:"Șterge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaugă o bulină",drawPolyButton:"Desenează un poligon",drawLineButton:"Desenează o linie",drawCircleButton:"Desenează un cerc",drawRectButton:"Desenează un dreptunghi",editButton:"Editează straturile",dragButton:"Mută straturile",cutButton:"Taie straturile",deleteButton:"Șterge straturile",drawCircleMarkerButton:"Desenează marcatorul cercului",snappingButton:"Fixați marcatorul glisat pe alte straturi și vârfuri",pinningButton:"Fixați vârfurile partajate împreună",rotateButton:"Rotiți stratul"}},is={tooltips:{placeMarker:"Нажмите, чтобы нанести маркер",firstVertex:"Нажмите, чтобы нанести первый объект",continueLine:"Нажмите, чтобы продолжить рисование",finishLine:"Нажмите любой существующий маркер для завершения",finishPoly:"Выберите первую точку, чтобы закончить",finishRect:"Нажмите, чтобы закончить",startCircle:"Нажмите, чтобы добавить центр круга",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Нажмите, чтобы нанести круговой маркер"},actions:{finish:"Завершить",cancel:"Отменить",removeLastVertex:"Отменить последнее действие"},buttonTitles:{drawMarkerButton:"Добавить маркер",drawPolyButton:"Рисовать полигон",drawLineButton:"Рисовать кривую",drawCircleButton:"Рисовать круг",drawRectButton:"Рисовать прямоугольник",editButton:"Редактировать слой",dragButton:"Перенести слой",cutButton:"Вырезать слой",deleteButton:"Удалить слой",drawCircleMarkerButton:"Добавить круговой маркер",snappingButton:"Привязать перетаскиваемый маркер к другим слоям и вершинам",pinningButton:"Связать общие точки вместе",rotateButton:"Поворот слоя"}},$n={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vértice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del círculo",finishCircle:"Presiona para finalizar el círculo",placeCircleMarker:"Presiona para colocar un marcador de círculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar último vértice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polígono",drawLineButton:"Dibujar Línea",drawCircleButton:"Dibujar Círculo",drawRectButton:"Dibujar Rectángulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Círculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vértices",pinningButton:"Fijar juntos los vértices compartidos",rotateButton:"Rotar capa"}},Ye={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beëindigen",finishPoly:"Klik op het eerst punt om te beëindigen",finishRect:"Klik om te beëindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beëindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},jn={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer à dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"Éditer des calques",dragButton:"Déplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"Épingler ensemble les sommets partagés",rotateButton:"Tourner des calques"}},Pr={tooltips:{placeMarker:"单击放置标记",firstVertex:"单击放置首个顶点",continueLine:"单击继续绘制",finishLine:"单击任何存在的标记以完成",finishPoly:"单击第一个标记以完成",finishRect:"单击完成",startCircle:"单击放置圆心",finishCircle:"单击完成圆形",placeCircleMarker:"点击放置圆形标记"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最后的顶点"},buttonTitles:{drawMarkerButton:"绘制标记",drawPolyButton:"绘制多边形",drawLineButton:"绘制线段",drawCircleButton:"绘制圆形",drawRectButton:"绘制长方形",editButton:"编辑图层",dragButton:"拖拽图层",cutButton:"剪切图层",deleteButton:"删除图层",drawCircleMarkerButton:"画圆圈标记",snappingButton:"将拖动的标记捕捉到其他图层和顶点",pinningButton:"将共享顶点固定在一起",rotateButton:"旋转图层"}},Sr={tooltips:{placeMarker:"單擊放置標記",firstVertex:"單擊放置第一個頂點",continueLine:"單擊繼續繪製",finishLine:"單擊任何存在的標記以完成",finishPoly:"單擊第一個標記以完成",finishRect:"單擊完成",startCircle:"單擊放置圓心",finishCircle:"單擊完成圓形",placeCircleMarker:"點擊放置圓形標記"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最後一個頂點"},buttonTitles:{drawMarkerButton:"放置標記",drawPolyButton:"繪製多邊形",drawLineButton:"繪製線段",drawCircleButton:"繪製圓形",drawRectButton:"繪製方形",editButton:"編輯圖形",dragButton:"移動圖形",cutButton:"裁切圖形",deleteButton:"刪除圖形",drawCircleMarkerButton:"畫圓圈標記",snappingButton:"將拖動的標記對齊到其他圖層和頂點",pinningButton:"將共享頂點固定在一起",rotateButton:"旋轉圖形"}},to={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vértice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do círculo",finishCircle:"Clique para finalizar o círculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover último vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},or={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vértice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do círculo",finishCircle:"Clique para terminar o círculo",placeCircleMarker:"Clique para colocar marcador de círculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover Último Vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},eo={tooltips:{placeMarker:"Kliknij, aby umieścić znacznik",firstVertex:"Kliknij, aby umieścić pierwszy wierzchołek",continueLine:"Kliknij, aby kontynuować rysowanie",finishLine:"Kliknij dowolny istniejący znacznik, aby zakończyć",finishPoly:"Kliknij pierwszy znacznik, aby zakończyć",finishRect:"Kliknij, aby zakończyć",startCircle:"Kliknij, aby umieścić środek okręgu",finishCircle:"Kliknij, aby zakończyć okrąg",placeCircleMarker:"Kliknij, aby umieścić znacznik okręgu",placeText:"Kliknij, aby umieścić tekst"},actions:{finish:"Zakończ",cancel:"Anuluj",removeLastVertex:"Usuń ostatni wierzchołek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokąt",drawLineButton:"Rysuj linię",drawCircleButton:"Rysuj okrąg",drawRectButton:"Rysuj prostokąt",editButton:"Edytuj warstwy",dragButton:"Przeciągnij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usuń warstwy",drawCircleMarkerButton:"Rysuj znacznik okrągły",snappingButton:"Przyciągnij przenoszony znacznik do innych warstw i wierzchołków",pinningButton:"Przypnij wspólne wierzchołki razem",rotateButton:"Obróć warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne śledzenie linii"},measurements:{totalLength:"Długość",segmentLength:"Długość odcinka",area:"Obszar",radius:"Promień",perimeter:"Obwód",height:"Wysokość",width:"Szerokość",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},io={tooltips:{placeMarker:"Klicka för att placera markör",firstVertex:"Klicka för att placera första hörnet",continueLine:"Klicka för att fortsätta rita",finishLine:"Klicka på en existerande punkt för att slutföra",finishPoly:"Klicka på den första punkten för att slutföra",finishRect:"Klicka för att slutföra",startCircle:"Klicka för att placera cirkelns centrum",finishCircle:"Klicka för att slutföra cirkeln",placeCircleMarker:"Klicka för att placera cirkelmarkör"},actions:{finish:"Slutför",cancel:"Avbryt",removeLastVertex:"Ta bort sista hörnet"},buttonTitles:{drawMarkerButton:"Rita Markör",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkör",snappingButton:"Snäpp dra markören till andra lager och hörn",pinningButton:"Fäst delade hörn tillsammans",rotateButton:"Rotera lagret"}},ns={tooltips:{placeMarker:"Κάντε κλικ για να τοποθετήσετε Δείκτη",firstVertex:"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο",continueLine:"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε",finishLine:"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί",finishPoly:"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε",finishRect:"Κάντε κλικ για να τελειώσετε",startCircle:"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου",finishCircle:"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο",placeCircleMarker:"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},actions:{finish:"Τέλος",cancel:"Ακύρωση",removeLastVertex:"Κατάργηση τελευταίου σημείου"},buttonTitles:{drawMarkerButton:"Σχεδίαση Δείκτη",drawPolyButton:"Σχεδίαση Πολυγώνου",drawLineButton:"Σχεδίαση Γραμμής",drawCircleButton:"Σχεδίαση Κύκλου",drawRectButton:"Σχεδίαση Ορθογωνίου",editButton:"Επεξεργασία Επιπέδων",dragButton:"Μεταφορά Επιπέδων",cutButton:"Αποκοπή Επιπέδων",deleteButton:"Κατάργηση Επιπέδων",drawCircleMarkerButton:"Σχεδίαση Κυκλικού Δείκτη",snappingButton:"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές",pinningButton:"Περικοπή κοινών κορυφών μαζί",rotateButton:"Περιστρέψτε το στρώμα"}},no={tooltips:{placeMarker:"Kattintson a jelölő elhelyezéséhez",firstVertex:"Kattintson az első pont elhelyezéséhez",continueLine:"Kattintson a következő pont elhelyezéséhez",finishLine:"A befejezéshez kattintson egy meglévő pontra",finishPoly:"A befejezéshez kattintson az első pontra",finishRect:"Kattintson a befejezéshez",startCircle:"Kattintson a kör középpontjának elhelyezéséhez",finishCircle:"Kattintson a kör befejezéséhez",placeCircleMarker:"Kattintson a körjelölő elhelyezéséhez"},actions:{finish:"Befejezés",cancel:"Mégse",removeLastVertex:"Utolsó pont eltávolítása"},buttonTitles:{drawMarkerButton:"Jelölő rajzolása",drawPolyButton:"Poligon rajzolása",drawLineButton:"Vonal rajzolása",drawCircleButton:"Kör rajzolása",drawRectButton:"Négyzet rajzolása",editButton:"Elemek szerkesztése",dragButton:"Elemek mozgatása",cutButton:"Elemek vágása",deleteButton:"Elemek törlése",drawCircleMarkerButton:"Kör jelölő rajzolása",snappingButton:"Kapcsolja a jelöltőt másik elemhez vagy ponthoz",pinningButton:"Közös pontok összekötése",rotateButton:"Fólia elforgatása"}},ro={tooltips:{placeMarker:"Tryk for at placere en markør",firstVertex:"Tryk for at placere det første punkt",continueLine:"Tryk for at fortsætte linjen",finishLine:"Tryk på et eksisterende punkt for at afslutte",finishPoly:"Tryk på det første punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkør"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markør",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Træk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkør",snappingButton:"Fastgør trukket markør til andre elementer",pinningButton:"Sammenlæg delte elementer",rotateButton:"Roter laget"}},rs={tooltips:{placeMarker:"Klikk for å plassere punkt",firstVertex:"Klikk for å plassere første punkt",continueLine:"Klikk for å tegne videre",finishLine:"Klikk på et eksisterende punkt for å fullføre",finishPoly:"Klikk første punkt for å fullføre",finishRect:"Klikk for å fullføre",startCircle:"Klikk for å sette sirkel midtpunkt",finishCircle:"Klikk for å fullføre sirkel",placeCircleMarker:"Klikk for å plassere sirkel",placeText:"Klikk for å plassere tekst"},actions:{finish:"Fullfør",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotér objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalér objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Område",radius:"Radius",perimeter:"Omriss",height:"Høyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkør"}},ga={tooltips:{placeMarker:"کلیک برای جانمایی نشان",firstVertex:"کلیک برای رسم اولین رأس",continueLine:"کلیک برای ادامه رسم",finishLine:"کلیک روی هر نشان موجود برای پایان",finishPoly:"کلیک روی اولین نشان برای پایان",finishRect:"کلیک برای پایان",startCircle:"کلیک برای رسم مرکز دایره",finishCircle:"کلیک برای پایان رسم دایره",placeCircleMarker:"کلیک برای رسم نشان دایره",placeText:"کلیک برای نوشتن متن"},actions:{finish:"پایان",cancel:"لفو",removeLastVertex:"حذف آخرین رأس"},buttonTitles:{drawMarkerButton:"درج نشان",drawPolyButton:"رسم چندضلعی",drawLineButton:"رسم خط",drawCircleButton:"رسم دایره",drawRectButton:"رسم چهارضلعی",editButton:"ویرایش لایه‌ها",dragButton:"جابجایی لایه‌ها",cutButton:"برش لایه‌ها",deleteButton:"حذف لایه‌ها",drawCircleMarkerButton:"رسم نشان دایره",snappingButton:"نشانگر را به لایه‌ها و رئوس دیگر بکشید",pinningButton:"رئوس مشترک را با هم پین کنید",rotateButton:"چرخش لایه",drawTextButton:"رسم متن",scaleButton:"مقیاس‌گذاری",autoTracingButton:"ردیاب خودکار"},measurements:{totalLength:"طول",segmentLength:"طول بخش",area:"ناحیه",radius:"شعاع",perimeter:"محیط",height:"ارتفاع",width:"عرض",coordinates:"موقعیت",coordinatesMarker:"موقعیت نشان"}},so={tooltips:{placeMarker:"Натисніть, щоб нанести маркер",firstVertex:"Натисніть, щоб нанести першу вершину",continueLine:"Натисніть, щоб продовжити малювати",finishLine:"Натисніть будь-який існуючий маркер для завершення",finishPoly:"Виберіть перший маркер, щоб завершити",finishRect:"Натисніть, щоб завершити",startCircle:"Натисніть, щоб додати центр кола",finishCircle:"Натисніть, щоб завершити коло",placeCircleMarker:"Натисніть, щоб нанести круговий маркер"},actions:{finish:"Завершити",cancel:"Відмінити",removeLastVertex:"Видалити попередню вершину"},buttonTitles:{drawMarkerButton:"Малювати маркер",drawPolyButton:"Малювати полігон",drawLineButton:"Малювати криву",drawCircleButton:"Малювати коло",drawRectButton:"Малювати прямокутник",editButton:"Редагувати шари",dragButton:"Перенести шари",cutButton:"Вирізати шари",deleteButton:"Видалити шари",drawCircleMarkerButton:"Малювати круговий маркер",snappingButton:"Прив’язати перетягнутий маркер до інших шарів та вершин",pinningButton:"Зв'язати спільні вершини разом",rotateButton:"Повернути шар"}},au={tooltips:{placeMarker:"İşaretçi yerleştirmek için tıklayın",firstVertex:"İlk tepe noktasını yerleştirmek için tıklayın",continueLine:"Çizime devam etmek için tıklayın",finishLine:"Bitirmek için mevcut herhangi bir işaretçiyi tıklayın",finishPoly:"Bitirmek için ilk işaretçiyi tıklayın",finishRect:"Bitirmek için tıklayın",startCircle:"Daire merkezine yerleştirmek için tıklayın",finishCircle:"Daireyi bitirmek için tıklayın",placeCircleMarker:"Daire işaretçisi yerleştirmek için tıklayın"},actions:{finish:"Bitir",cancel:"İptal",removeLastVertex:"Son köşeyi kaldır"},buttonTitles:{drawMarkerButton:"Çizim İşaretçisi",drawPolyButton:"Çokgenler çiz",drawLineButton:"Çoklu çizgi çiz",drawCircleButton:"Çember çiz",drawRectButton:"Dikdörtgen çiz",editButton:"Katmanları düzenle",dragButton:"Katmanları sürükle",cutButton:"Katmanları kes",deleteButton:"Katmanları kaldır",drawCircleMarkerButton:"Daire işaretçisi çiz",snappingButton:"Sürüklenen işaretçiyi diğer katmanlara ve köşelere yapıştır",pinningButton:"Paylaşılan köşeleri birbirine sabitle",rotateButton:"Katmanı döndür"}},ye={tooltips:{placeMarker:"Kliknutím vytvoříte značku",firstVertex:"Kliknutím vytvoříte první objekt",continueLine:"Kliknutím pokračujte v kreslení",finishLine:"Kliknutí na libovolnou existující značku pro dokončení",finishPoly:"Vyberte první bod pro dokončení",finishRect:"Klikněte pro dokončení",startCircle:"Kliknutím přidejte střed kruhu",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Kliknutím nastavte poloměr"},actions:{finish:"Dokončit",cancel:"Zrušit",removeLastVertex:"Zrušit poslední akci"},buttonTitles:{drawMarkerButton:"Přidat značku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit křivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdélník",editButton:"Upravit vrstvu",dragButton:"Přeneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Přidat kruhovou značku",snappingButton:"Navázat tažnou značku k dalším vrstvám a vrcholům",pinningButton:"Spojit společné body dohromady",rotateButton:"Otočte vrstvu"}},tn={tooltips:{placeMarker:"クリックしてマーカーを配置",firstVertex:"クリックして最初の頂点を配置",continueLine:"クリックして描画を続ける",finishLine:"任意のマーカーをクリックして終了",finishPoly:"最初のマーカーをクリックして終了",finishRect:"クリックして終了",startCircle:"クリックして円の中心を配置",finishCircle:"クリックして円の描画を終了",placeCircleMarker:"クリックして円マーカーを配置",placeText:"クリックしてテキストを配置"},actions:{finish:"終了",cancel:"キャンセル",removeLastVertex:"最後の頂点を削除"},buttonTitles:{drawMarkerButton:"マーカーを描画",drawPolyButton:"ポリゴンを描画",drawLineButton:"折れ線を描画",drawCircleButton:"円を描画",drawRectButton:"矩形を描画",editButton:"レイヤーを編集",dragButton:"レイヤーをドラッグ",cutButton:"レイヤーを切り取り",deleteButton:"レイヤーを削除",drawCircleMarkerButton:"円マーカーを描画",snappingButton:"ドラッグしたマーカーを他のレイヤーや頂点にスナップする",pinningButton:"共有する頂点を同時に動かす",rotateButton:"レイヤーを回転",drawTextButton:"テキストを描画"}},$e={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmäisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtämistä",finishLine:"Klikkaa olemassa olevaa merkkiä lopettaaksesi",finishPoly:"Klikkaa ensimmäistä merkkiä lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrän keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrän",placeCircleMarker:"Klikkaa asettaaksesi ympyrämerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirrä merkkejä",drawPolyButton:"Piirrä monikulmioita",drawLineButton:"Piirrä viivoja",drawCircleButton:"Piirrä ympyrä",drawRectButton:"Piirrä neliskulmioita",editButton:"Muokkaa",dragButton:"Siirrä",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirrä ympyrämerkki",snappingButton:"Kiinnitä siirrettävä merkki toisiin muotoihin",pinningButton:"Kiinnitä jaetut muodot yhteen",rotateButton:"Käännä",drawTextButton:"Piirrä tekstiä"}},_a={tooltips:{placeMarker:"마커 위치를 클릭하세요",firstVertex:"첫번째 꼭지점 위치을 클릭하세요",continueLine:"계속 그리려면 클릭하세요",finishLine:"끝내려면 기존 마커를 클릭하세요",finishPoly:"끝내려면 처음 마커를 클릭하세요",finishRect:"끝내려면 클릭하세요",startCircle:"원의 중심이 될 위치를 클릭하세요",finishCircle:"원을 끝내려면 클릭하세요",placeCircleMarker:"원 마커 위치를 클릭하세요",placeText:"텍스트 위치를 클릭하세요"},actions:{finish:"끝내기",cancel:"취소",removeLastVertex:"마지막 꼭지점 제거"},buttonTitles:{drawMarkerButton:"마커 그리기",drawPolyButton:"다각형 그리기",drawLineButton:"다각선 그리기",drawCircleButton:"원 그리기",drawRectButton:"직사각형 그리기",editButton:"레이어 편집하기",dragButton:"레이어 끌기",cutButton:"레이어 자르기",deleteButton:"레이어 제거하기",drawCircleMarkerButton:"원 마커 그리기",snappingButton:"잡아끈 마커를 다른 레이어 및 꼭지점에 들러붙게 하기",pinningButton:"공유 꼭지점을 함께 찍기",rotateButton:"레이어 회전하기",drawTextButton:"텍스트 그리기"}},oo={tooltips:{placeMarker:"Маркерди жайгаштыруу үчүн басыңыз",firstVertex:"Биринчи чокуну жайгаштырууну үчүн басыңыз",continueLine:"Сүрөт тартууну улантуу үчүн басыңыз",finishLine:"Аяктоо үчүн учурдагы маркерди басыңыз",finishPoly:"Бүтүрүү үчүн биринчи маркерди басыңыз",finishRect:"Бүтүрүү үчүн басыңыз",startCircle:"Айлананын борборун жайгаштырууну үчүн басыңыз",finishCircle:"Айлананы бүтүрүү үчүн басыңыз",placeCircleMarker:"Тегерек маркерди жайгаштыруу үчүн басыңыз",placeText:"Текстти жайгаштыруу үчүн басыңыз"},actions:{finish:"Аягы",cancel:"Жок кылуу",removeLastVertex:"Акыркы чокуну өчүрүү"},buttonTitles:{drawMarkerButton:"Маркерди чизуу",drawPolyButton:"Полигон чизуу",drawLineButton:"Полилиния чизуу",drawCircleButton:"Дайынды чизуу",drawRectButton:"Прямоугольник чизуу",editButton:"Слоопту түзөтүү",dragButton:"Слоопту карап сүйлөү",cutButton:"Слооптун башын кесүү",deleteButton:"Слооптун өчүрүү",drawCircleMarkerButton:"Дайынды маркерди чизуу",snappingButton:"Башка слооптордун жана вертекстердин арасына чекилдөө",pinningButton:"Бөлүшкөн вертекстерди бирге тутуштуруу",rotateButton:"Слооптун өзгөртүү",drawTextButton:"Текст чизуу",scaleButton:"Слооптун өлчөмүн өзгөртүү",autoTracingButton:"Автоматтык тизмеги чизуу"},measurements:{totalLength:"Узундук",segmentLength:"Сегмент узундугу",area:"Аймак",radius:"Радиус",perimeter:"Периметр",height:"Диаметр",width:"Кенчилик",coordinates:"Координаттар",coordinatesMarker:"Маркердин координаттары"}},ao=or,En={en:We,de:Qs,it:es,id:Ni,ro:ou,ru:is,es:$n,nl:Ye,fr:jn,pt:ao,pt_br:to,pt_pt:or,zh:Pr,zh_tw:Sr,pl:eo,sv:io,el:ns,hu:no,da:ro,no:rs,fa:ga,ua:so,tr:au,cz:ye,ja:tn,fi:$e,ko:_a,ky:oo},Un={_globalEditModeEnabled:!1,enableGlobalEditMode(i){let r={...i};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(a=>{this._isRelevantForEdit(a)&&a.pm.enable(r)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(i=>{i.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(i=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(i)},handleLayerAdditionInGlobalEditMode(){let i=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let r in i){let a=i[r];this._isRelevantForEdit(a)&&a.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:i}){this._addedLayersEdit[L.stamp(i)]=i},_isRelevantForEdit(i){return i.pm&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.allowEditing}},lo=Un,Br={_globalDragModeEnabled:!1,enableGlobalDragMode(){let i=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},i.forEach(r=>{this._isRelevantForDrag(r)&&r.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let i=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,i.forEach(r=>{r.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let i=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let r in i){let a=i[r];this._isRelevantForDrag(a)&&a.pm.enableLayerDrag()}},_layerAddedDrag({layer:i}){this._addedLayersDrag[L.stamp(i)]=i},_isRelevantForDrag(i){return i.pm&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.draggable}},li=Br,Gn={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(i=>{this._isRelevantForRemoval(i)&&(i.pm.enabled()&&i.pm.disable(),i.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(i=>{i.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(i){let r=i.target;this._isRelevantForRemoval(r)&&!r.pm.dragging()&&(r.removeFrom(this.map.pm._getContainingLayer()),r.remove(),r instanceof L.LayerGroup?(this._fireRemoveLayerGroup(r),this._fireRemoveLayerGroup(this.map,r)):(r.pm._fireRemove(r),r.pm._fireRemove(this.map,r)))},_isRelevantForRemoval(i){return i.pm&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let i=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let r in i){let a=i[r];this._isRelevantForRemoval(a)&&(a.pm.enabled()&&a.pm.disable(),a.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:i}){this._addedLayersRemoval[L.stamp(i)]=i}},ya=Gn,va={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(i=>i instanceof L.Polyline).forEach(i=>{this._isRelevantForRotate(i)&&i.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(i=>i instanceof L.Polyline).forEach(i=>{i.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(i){return i.pm&&i instanceof L.Polyline&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let i=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let r in i){let a=i[r];this._isRelevantForRemoval(a)&&a.pm.enableRotate()}},_layerAddedRotate({layer:i}){this._addedLayersRotate[L.stamp(i)]=i}},lu=va,ba=y(Qr()),uo={_fireDrawStart(i="Draw",r={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},i,r)},_fireDrawEnd(i="Draw",r={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},i,r)},_fireCreate(i,r="Draw",a={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:i,layer:i},r,a)},_fireCenterPlaced(i="Draw",r={}){let a=i==="Draw"?this._layer:void 0,u=i!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:a,layer:u,latlng:this._layer.getLatLng()},i,r)},_fireCut(i,r,a,u="Draw",d={}){this.__fire(i,"pm:cut",{shape:this._shape,layer:r,originalLayer:a},u,d)},_fireEdit(i=this._layer,r="Edit",a={}){this.__fire(i,"pm:edit",{layer:this._layer,shape:this.getShape()},r,a)},_fireEnable(i="Edit",r={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},i,r)},_fireDisable(i="Edit",r={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},i,r)},_fireUpdate(i="Edit",r={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},i,r)},_fireMarkerDragStart(i,r=void 0,a="Edit",u={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:i,shape:this.getShape(),indexPath:r},a,u)},_fireMarkerDrag(i,r=void 0,a="Edit",u={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:i,shape:this.getShape(),indexPath:r},a,u)},_fireMarkerDragEnd(i,r=void 0,a=void 0,u="Edit",d={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:i,shape:this.getShape(),indexPath:r,intersectionReset:a},u,d)},_fireDragStart(i="Edit",r={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},i,r)},_fireDrag(i,r="Edit",a={}){this.__fire(this._layer,"pm:drag",{...i,shape:this.getShape()},r,a)},_fireDragEnd(i="Edit",r={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},i,r)},_fireDragEnable(i="Edit",r={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},i,r)},_fireDragDisable(i="Edit",r={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},i,r)},_fireRemove(i,r=i,a="Edit",u={}){this.__fire(i,"pm:remove",{layer:r,shape:this.getShape()},a,u)},_fireVertexAdded(i,r,a,u="Edit",d={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:i,indexPath:r,latlng:a,shape:this.getShape()},u,d)},_fireVertexRemoved(i,r,a="Edit",u={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:i,indexPath:r,shape:this.getShape()},a,u)},_fireVertexClick(i,r,a="Edit",u={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:i,indexPath:r,shape:this.getShape()},a,u)},_fireIntersect(i,r=this._layer,a="Edit",u={}){this.__fire(r,"pm:intersect",{layer:this._layer,intersection:i,shape:this.getShape()},a,u)},_fireLayerReset(i,r,a="Edit",u={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:i,indexPath:r,shape:this.getShape()},a,u)},_fireChange(i,r="Edit",a={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:i,shape:this.getShape()},r,a)},_fireTextChange(i,r="Edit",a={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:i,shape:this.getShape()},r,a)},_fireTextFocus(i="Edit",r={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},i,r)},_fireTextBlur(i="Edit",r={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},i,r)},_fireSnapDrag(i,r,a="Snapping",u={}){this.__fire(i,"pm:snapdrag",r,a,u)},_fireSnap(i,r,a="Snapping",u={}){this.__fire(i,"pm:snap",r,a,u)},_fireUnsnap(i,r,a="Snapping",u={}){this.__fire(i,"pm:unsnap",r,a,u)},_fireRotationEnable(i,r,a="Rotation",u={}){this.__fire(i,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},a,u)},_fireRotationDisable(i,r="Rotation",a={}){this.__fire(i,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},r,a)},_fireRotationStart(i,r,a="Rotation",u={}){this.__fire(i,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:r},a,u)},_fireRotation(i,r,a,u=this._rotationLayer,d="Rotation",g={}){this.__fire(i,"pm:rotate",{layer:u,helpLayer:this._layer,startAngle:this._startAngle,angle:u.pm.getAngle(),angleDiff:r,oldLatLngs:a,newLatLngs:u.getLatLngs()},d,g)},_fireRotationEnd(i,r,a,u="Rotation",d={}){this.__fire(i,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:r,angle:this._rotationLayer.pm.getAngle(),originLatLngs:a,newLatLngs:this._rotationLayer.getLatLngs()},u,d)},_fireActionClick(i,r,a,u="Toolbar",d={}){this.__fire(this._map,"pm:actionclick",{text:i.text,action:i,btnName:r,button:a},u,d)},_fireButtonClick(i,r,a="Toolbar",u={}){this.__fire(this._map,"pm:buttonclick",{btnName:i,button:r},a,u)},_fireLangChange(i,r,a,u,d="Global",g={}){this.__fire(this.map,"pm:langchange",{oldLang:i,activeLang:r,fallback:a,translations:u},d,g)},_fireGlobalDragModeToggled(i,r="Global",a={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:i,map:this.map},r,a)},_fireGlobalEditModeToggled(i,r="Global",a={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:i,map:this.map},r,a)},_fireGlobalRemovalModeToggled(i,r="Global",a={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:i,map:this.map},r,a)},_fireGlobalCutModeToggled(i="Global",r={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},i,r)},_fireGlobalDrawModeToggled(i="Global",r={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},i,r)},_fireGlobalRotateModeToggled(i="Global",r={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},i,r)},_fireRemoveLayerGroup(i,r=i,a="Edit",u={}){this.__fire(i,"pm:remove",{layer:r,shape:void 0},a,u)},_fireKeyeventEvent(i,r,a,u="Global",d={}){this.__fire(this.map,"pm:keyevent",{event:i,eventType:r,focusOn:a},u,d)},__fire(i,r,a,u,d={}){a=(0,ba.default)(a,d,{source:u}),L.PM.Utils._fireEvent(i,r,a)}},ss=uo,xa=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(i){this.map=i,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),i.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(i){let r="document";this.map.getContainer().contains(i.target)&&(r="map");let a={event:i,eventType:i.type,focusOn:r};this._lastEvents[i.type]=a,this._lastEvents.current=a,this.map.pm._fireKeyeventEvent(i,i.type,r)},_onBlur(i){i.altKey=!1;let r={event:i,eventType:i.type,focusOn:"document"};this._lastEvents[i.type]=r,this._lastEvents.current=r},getLastKeyEvent(i="current"){return this._lastEvents[i]},isShiftKeyPressed(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.shiftKey},isAltKeyPressed(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.altKey},isCtrlKeyPressed(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.ctrlKey},isMetaKeyPressed(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.metaKey},getPressedKey(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.key}}),ke=xa,wa=y(Cn());function _e(i){let r=L.PM.activeLang;return(0,wa.default)(En[r],i)||(0,wa.default)(En.en,i)||i}function Vn(i){for(let r=0;r<i.length;r+=1){let a=i[r];if(Array.isArray(a)){if(Vn(a))return!0}else if(a!=null&&a!=="")return!0}return!1}function Ar(i){return i.reduce((r,a)=>{if(a.length!==0){let u=Array.isArray(a)?Ar(a):a;Array.isArray(u)?u.length!==0&&r.push(u):r.push(u)}return r},[])}function uu(i,r,a){let u={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:d,b:g,f:_}=u,b=i.lng,E=i.lat,S=a,j=Math.PI,F=r*j/180,ht=Math.sin(F),yt=Math.cos(F),Gt=(1-_)*Math.tan(E*j/180),Yt=1/Math.sqrt(1+Gt*Gt),oe=Gt*Yt,Me=Math.atan2(Gt,yt),N=Yt*ht,q=1-N*N,it=q*(d*d-g*g)/(g*g),vt=1+it/16384*(4096+it*(-768+it*(320-175*it))),st=it/1024*(256+it*(-128+it*(74-47*it))),ft=S/(g*vt),k=2*Math.PI,A,D,T;for(;Math.abs(ft-k)>1e-12;){A=Math.cos(2*Me+ft),D=Math.sin(ft),T=Math.cos(ft);let Ft=st*D*(A+st/4*(T*(-1+2*A*A)-st/6*A*(-3+4*D*D)*(-3+4*A*A)));k=ft,ft=S/(g*vt)+Ft}let O=oe*D-Yt*T*yt,I=Math.atan2(oe*T+Yt*D*yt,(1-_)*Math.sqrt(N*N+O*O)),W=Math.atan2(D*ht,Yt*T-oe*D*yt),K=_/16*q*(4+_*(4-3*q)),tt=W-(1-K)*_*N*(ft+K*D*(A+K*T*(-1+2*A*A))),ct=b+tt*180/j,ut=I*180/j;return L.latLng(ct,ut)}function os(i,r,a,u,d=!0){let g,_,b,E=[];for(let S=0;S<a;S+=1){if(d)g=S*360/a+u,_=uu(i,g,r),b=L.latLng(_.lng,_.lat);else{let j=i.lat+Math.cos(2*S*Math.PI/a)*r,F=i.lng+Math.sin(2*S*Math.PI/a)*r;b=L.latLng(j,F)}E.push(b)}return E}function cu(i,r,a){r=(r+360)%360;let u=Math.PI/180,d=180/Math.PI,{R:g}=L.CRS.Earth,_=i.lng*u,b=i.lat*u,E=r*u,S=Math.sin(b),j=Math.cos(b),F=Math.cos(a/g),ht=Math.sin(a/g),yt=Math.asin(S*F+j*ht*Math.cos(E)),Gt=_+Math.atan2(Math.sin(E)*ht*j,F-S*Math.sin(yt));Gt*=d;let Yt=Gt-360,oe=Gt<-180?Gt+360:Gt;return Gt=Gt>180?Yt:oe,L.latLng([yt*d,Gt])}function as(i,r,a){let u=i.latLngToContainerPoint(r),d=i.latLngToContainerPoint(a),g=Math.atan2(d.y-u.y,d.x-u.x)*180/Math.PI+90;return g+=g<0?360:0,g}function ls(i,r,a,u){let d=as(i,r,a);return cu(r,d,u)}function hu(i,r,a="asc"){if(!r||Object.keys(r).length===0)return(E,S)=>E-S;let u=Object.keys(r),d,g=u.length-1,_={};for(;g>=0;)d=u[g],_[d.toLowerCase()]=r[d],g-=1;function b(E){if(E instanceof L.Marker)return"Marker";if(E instanceof L.Circle)return"Circle";if(E instanceof L.CircleMarker)return"CircleMarker";if(E instanceof L.Rectangle)return"Rectangle";if(E instanceof L.Polygon)return"Polygon";if(E instanceof L.Polyline)return"Line"}return(E,S)=>{let j,F;if(j=b(E.layer).toLowerCase(),F=b(S.layer).toLowerCase(),!j||!F)return 0;let ht=j in _?_[j]:Number.MAX_SAFE_INTEGER,yt=F in _?_[F]:Number.MAX_SAFE_INTEGER,Gt=0;return ht<yt?Gt=-1:ht>yt&&(Gt=1),a==="desc"?Gt*-1:Gt}}function en(i,r=i.getLatLngs()){return i instanceof L.Polygon?L.polygon(r).getLatLngs():L.polyline(r).getLatLngs()}function La(i,r){var a,u,d,g;if((u=(a=r.options.crs)==null?void 0:a.projection)!=null&&u.MAX_LATITUDE){let _=(g=(d=r.options.crs)==null?void 0:d.projection)==null?void 0:g.MAX_LATITUDE;i.lat=Math.max(Math.min(_,i.lat),-_)}return i}function pi(i){return i.options.renderer||i._map&&(i._map._getPaneRenderer(i.options.pane)||i._map.options.renderer||i._map._renderer)||i._renderer}var du=L.Class.extend({includes:[lo,li,ya,lu,ss],initialize(i){this.map=i,this.Draw=new L.PM.Draw(i),this.Toolbar=new L.PM.Toolbar(i),this.Keyboard=ke(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(i)},setLang(i="en",r,a="en"){if(i=i.trim().toLowerCase(),!/^[a-z]{2}$/.test(i)){let d=i.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(d){let g=[`${d[1]}_${d[2]}`,`${d[1]}`];for(let _ of g)if(En[_]){i=_;break}}}let u=L.PM.activeLang;r&&(En[i]=(0,be.default)(En[a],r)),L.PM.activeLang=i,this.map.pm.Toolbar.reinit(),this._fireLangChange(u,i,a,En[i])},addControls(i){this.Toolbar.addControls(i)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(i="Polygon",r){i==="Poly"&&(i="Polygon"),this.Draw.enable(i,r)},disableDraw(i="Polygon"){i==="Poly"&&(i="Polygon"),this.Draw.disable(i)},setPathOptions(i,r={}){let a=r.ignoreShapes||[],u=r.merge||!1;this.map.pm.Draw.shapes.forEach(d=>{a.indexOf(d)===-1&&this.map.pm.Draw[d].setPathOptions(i,u)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(i){let r=(0,be.default)(this.globalOptions,i);r.editable&&(r.resizeableCircleMarker=r.editable,delete r.editable);let a=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!r.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),a=!0);let u=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!r.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),u=!0),this.map.pm.Draw.shapes.forEach(d=>{this.map.pm.Draw[d].setOptions(r)}),a&&this.map.pm.Draw.CircleMarker.enable(),u&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(d=>{d.pm.setOptions(r)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=r,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(i=>{i.pm.enabled()&&i.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(i){return this.Draw.Cut.enable(i)},toggleGlobalCutMode(i){return this.Draw.Cut.toggle(i)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(i=!1){let r=L.PM.Utils.findLayers(this.map);if(!i)return r;let a=L.featureGroup();return a._pmTempLayer=!0,r.forEach(u=>{a.addLayer(u)}),a},getGeomanDrawLayers(i=!1){let r=L.PM.Utils.findLayers(this.map).filter(u=>u._drawnByGeoman===!0);if(!i)return r;let a=L.featureGroup();return a._pmTempLayer=!0,r.forEach(u=>{a.addLayer(u)}),a},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(i){this._touchEventCounter===0&&(L.DomEvent.on(i,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(i,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(i){this._touchEventCounter===1&&(L.DomEvent.off(i,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(i,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(i){pi(this.map)._onMouseMove(this._createMouseEvent("mousemove",i))},_canvasTouchClick(i){let r="";i.type==="touchstart"||i.type==="pointerdown"?r="mousedown":(i.type==="touchend"||i.type==="pointerup"||i.type==="touchcancel"||i.type==="pointercancel")&&(r="mouseup"),r&&pi(this.map)._onClick(this._createMouseEvent(r,i))},_createMouseEvent(i,r){let a,u=r.touches[0]||r.changedTouches[0];try{a=new MouseEvent(i,{bubbles:r.bubbles,cancelable:r.cancelable,view:r.view,detail:u.detail,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY,ctrlKey:r.ctrlKey,altKey:r.altKey,shiftKey:r.shiftKey,metaKey:r.metaKey,button:r.button,relatedTarget:r.relatedTarget})}catch{a=document.createEvent("MouseEvents"),a.initMouseEvent(i,r.bubbles,r.cancelable,r.view,u.detail,u.screenX,u.screenY,u.clientX,u.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.button,r.relatedTarget)}return a}}),Ca=du,kn=L.Control.extend({includes:[ss],options:{position:"topleft",disableByOtherButtons:!0},initialize(i){this._button=L.Util.extend({},this.options,i)},onAdd(i){return this._map=i,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let i=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),i?i.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(i){return typeof i=="boolean"?this._button.toggleStatus=i:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(i){i&&i.preventDefault(),!this._button.disabled&&(this._button.onClick(i,{button:this,event:i}),this._clicked(i),this._button.afterClick(i,{button:this,event:i}))},_makeButton(i){let r=this.options.position.indexOf("right")>-1?"pos-right":"",a=L.DomUtil.create("div",`button-container  ${r}`,this._container);i.title&&a.setAttribute("title",i.title);let u=L.DomUtil.create("a","leaflet-buttons-control-button",a);u.setAttribute("role","button"),u.setAttribute("tabindex","0"),u.href="#";let d=L.DomUtil.create("div",`leaflet-pm-actions-container ${r}`,a),g=i.actions,_={cancel:{text:_e("actions.cancel"),title:_e("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:_e("actions.finish"),title:_e("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:_e("actions.removeLastVertex"),title:_e("actions.removeLastVertex"),onClick(){this._map.pm.Draw[i.jsClass]._removeLastVertex()}},finish:{text:_e("actions.finish"),title:_e("actions.finish"),onClick(E){this._map.pm.Draw[i.jsClass]._finishShape(E)}}};i._preparedActions=g.map(E=>{let S=typeof E=="string"?E:E.name,j;if(_[S])j=_[S];else if(E.text)j=E;else return j;let F=L.DomUtil.create("a",`leaflet-pm-action ${r} action-${S}`,d);if(F.setAttribute("role","button"),F.setAttribute("tabindex","0"),F.href="#",j.title&&(F.title=j.title),F.innerHTML=j.text,L.DomEvent.disableClickPropagation(F),L.DomEvent.on(F,"click",L.DomEvent.stop),j._node=F,!i.disabled&&j.onClick){let ht=yt=>{yt.preventDefault();let Gt="",{buttons:Yt}=this._map.pm.Toolbar;for(let oe in Yt)if(Yt[oe]._button===i){Gt=oe;break}this._fireActionClick(j,Gt,i)};L.DomEvent.addListener(F,"click",ht,this),L.DomEvent.addListener(F,"click",j.onClick,this),L.DomEvent.addListener(F,"click",()=>this._updateActiveAction(i))}return j}),this._updateActiveAction(i),i.toggleStatus&&L.DomUtil.addClass(a,"active");let b=L.DomUtil.create("div","control-icon",u);return i.iconUrl&&b.setAttribute("src",i.iconUrl),i.className&&L.DomUtil.addClass(b,i.className),L.DomEvent.disableClickPropagation(u),L.DomEvent.on(u,"click",L.DomEvent.stop),i.disabled||(L.DomEvent.addListener(u,"click",this._onBtnClick,this),L.DomEvent.addListener(u,"click",this._triggerClick,this)),i.disabled&&(L.DomUtil.addClass(u,"pm-disabled"),u.setAttribute("aria-disabled","true")),a},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let i="",{buttons:r}=this._map.pm.Toolbar;for(let a in r)if(r[a]._button===this._button){i=a;break}this._fireButtonClick(i,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let i="pm-disabled",r=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(r,i),r.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(r,i),r.setAttribute("aria-disabled","false"))},_updateActiveAction(i){var r;(r=i._preparedActions)==null||r.forEach(a=>{a!=null&&a._node&&(a.isActive&&a.isActive.call(this)?L.DomUtil.addClass(a._node,"active-action"):L.DomUtil.removeClass(a._node,"active-action"))})}}),Ea=kn;L.Control.PMButton=Ea;var ka=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(i){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(i)},reinit(){let i=this.isVisible;this.removeControls(),this._defineButtons(),i&&this.addControls()},init(i){this.map=i,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(i){let r=`${i}Container`;return this[r]||(this[r]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${i} leaflet-bar leaflet-control`)),this[r]},getButtons(){return this.buttons},addControls(i=this.options){typeof i.editPolygon<"u"&&(i.editMode=i.editPolygon),typeof i.deleteLayer<"u"&&(i.removalMode=i.deleteLayer),L.Util.setOptions(this,i),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let i=this.getButtons(),r={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let a in i){let u=i[a];L.Util.setOptions(u,{className:r.geomanIcons[a]})}},removeControls(){let i=this.getButtons();for(let r in i)i[r].remove();this.isVisible=!1},toggleControls(i=this.options){this.isVisible?this.removeControls():this.addControls(i)},_addButton(i,r){return this.buttons[i]=r,this.options[i]=!!this.options[i]||!1,this.buttons[i]},triggerClickOnToggledButtons(i){for(let r in this.buttons){let a=this.buttons[r];a._button.disableByOtherButtons&&a!==i&&a.toggled()&&a._triggerClick()}},toggleButton(i,r,a=!0){i==="editPolygon"&&(i="editMode"),i==="deleteLayer"&&(i="removalMode");let u=i;return a&&this.triggerClickOnToggledButtons(this.buttons[u]),this.buttons[u]?this.buttons[u].toggle(r):!1},_defineButtons(){let i={className:"control-icon leaflet-pm-icon-marker",title:_e("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(ht,yt)=>{this.map.pm.Draw[yt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},r={title:_e("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(ht,yt)=>{this.map.pm.Draw[yt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},a={className:"control-icon leaflet-pm-icon-polyline",title:_e("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(ht,yt)=>{this.map.pm.Draw[yt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},u={title:_e("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(ht,yt)=>{this.map.pm.Draw[yt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},d={title:_e("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(ht,yt)=>{this.map.pm.Draw[yt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},g={title:_e("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(ht,yt)=>{this.map.pm.Draw[yt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},_={title:_e("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},b={title:_e("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},E={title:_e("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(ht,yt)=>{this.map.pm.Draw[yt.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},S={title:_e("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},j={title:_e("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},F={className:"control-icon leaflet-pm-icon-text",title:_e("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(ht,yt)=>{this.map.pm.Draw[yt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(i)),this._addButton("drawPolyline",new L.Control.PMButton(a)),this._addButton("drawRectangle",new L.Control.PMButton(g)),this._addButton("drawPolygon",new L.Control.PMButton(r)),this._addButton("drawCircle",new L.Control.PMButton(u)),this._addButton("drawCircleMarker",new L.Control.PMButton(d)),this._addButton("drawText",new L.Control.PMButton(F)),this._addButton("editMode",new L.Control.PMButton(_)),this._addButton("dragMode",new L.Control.PMButton(b)),this._addButton("cutPolygon",new L.Control.PMButton(E)),this._addButton("removalMode",new L.Control.PMButton(S)),this._addButton("rotateMode",new L.Control.PMButton(j))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let i=this.getButtons(),r=[];this.options.drawControls===!1&&(r=r.concat(Object.keys(i).filter(a=>!i[a]._button.tool))),this.options.editControls===!1&&(r=r.concat(Object.keys(i).filter(a=>i[a]._button.tool==="edit"))),this.options.optionsControls===!1&&(r=r.concat(Object.keys(i).filter(a=>i[a]._button.tool==="options"))),this.options.customControls===!1&&(r=r.concat(Object.keys(i).filter(a=>i[a]._button.tool==="custom")));for(let a in i)if(this.options[a]&&r.indexOf(a)===-1){let u=i[a]._button.tool;u||(u="draw"),i[a].setPosition(this._getBtnPosition(u)),i[a].addTo(this.map)}},_getBtnPosition(i){return this.options.positions&&this.options.positions[i]?this.options.positions[i]:this.options.position},setBlockPosition(i,r){this.options.positions[i]=r,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(i,r){if(r)typeof r!="object"&&(r={name:r});else throw new TypeError("Button has no name");let a=this._btnNameMapping(i);if(!r.name)throw new TypeError("Button has no name");if(this.buttons[r.name])throw new TypeError("Button with this name already exists");let u=this.map.pm.Draw.createNewDrawInstance(r.name,a);r={...this.buttons[a]._button,...r};let d=this.createCustomControl(r);return{drawInstance:u,control:d}},createCustomControl(i){if(!i.name)throw new TypeError("Button has no name");if(this.buttons[i.name])throw new TypeError("Button with this name already exists");i.onClick||(i.onClick=()=>{}),i.afterClick||(i.afterClick=()=>{}),i.toggle!==!1&&(i.toggle=!0),i.block&&(i.block=i.block.toLowerCase()),(!i.block||i.block==="draw")&&(i.block=""),i.className?i.className.indexOf("control-icon")===-1&&(i.className=`control-icon ${i.className}`):i.className="control-icon";let r={tool:i.block,className:i.className,title:i.title||"",jsClass:i.name,onClick:i.onClick,afterClick:i.afterClick,doToggle:i.toggle,toggleStatus:!1,disableOtherButtons:i.disableOtherButtons??!0,disableByOtherButtons:i.disableByOtherButtons??!0,cssToggle:i.toggle,position:this.options.position,actions:i.actions||[],disabled:!!i.disabled};this.options[i.name]!==!1&&(this.options[i.name]=!0);let a=this._addButton(i.name,new L.Control.PMButton(r));return this.changeControlOrder(),a},controlExists(i){return!!this.getButton(i)},getButton(i){return this.getButtons()[i]},getButtonsInBlock(i){let r={};if(i)for(let a in this.getButtons()){let u=this.getButtons()[a];(u._button.tool===i||i==="draw"&&!u._button.tool)&&(r[a]=u)}return r},changeControlOrder(i=[]){let r=this._shapeMapping(),a=[];i.forEach(g=>{r[g]?a.push(r[g]):a.push(g)});let u=this.getButtons(),d={};a.forEach(g=>{u[g]&&(d[g]=u[g])}),Object.keys(u).filter(g=>!u[g]._button.tool||u[g]._button.tool==="draw").forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),Object.keys(u).filter(g=>u[g]._button.tool==="edit").forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),Object.keys(u).filter(g=>u[g]._button.tool==="options").forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),Object.keys(u).filter(g=>u[g]._button.tool==="custom").forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),Object.keys(u).forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),this.map.pm.Toolbar.buttons=d,this._showHideButtons()},getControlOrder(){let i=this.getButtons(),r=[];for(let a in i)r.push(a);return r},changeActionsOfControl(i,r){let a=this._btnNameMapping(i);if(!a)throw new TypeError("No name passed");if(!r)throw new TypeError("No actions passed");if(!this.buttons[a])throw new TypeError("Button with this name not exists");this.buttons[a]._button.actions=r,this.changeControlOrder()},setButtonDisabled(i,r){let a=this._btnNameMapping(i);r?this.buttons[a].disable():this.buttons[a].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(i){let r=this._shapeMapping();return r[i]?r[i]:i}}),co=ka,fu=y(Qr()),Ma={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(i){i.forEach(r=>{if(Array.isArray(r)){this._assignEvents(r);return}r.off("drag",this._handleSnapping,this),r.on("drag",this._handleSnapping,this),r.off("dragend",this._cleanupSnapping,this),r.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(i){if(i){let r=i.target;r._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(r=>{r.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(i){var b,E,S;let r=i.target;if(r._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((b=i==null?void 0:i.originalEvent)==null?void 0:b.altKey)||((S=(E=this._map)==null?void 0:E.pm)==null?void 0:S.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let a=this._calcClosestLayer(r.getLatLng(),this._snapList);if(Object.keys(a).length===0)return!1;let u=a.layer instanceof L.Marker||a.layer instanceof L.CircleMarker||!this.options.snapSegment,d;u?d=a.latlng:d=this._checkPrioritiySnapping(a);let g=this.options.snapDistance,_={marker:r,shape:this._shape,snapLatLng:d,segment:a.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:a.layer,distance:a.distance};if(this._fireSnapDrag(_.marker,_),this._fireSnapDrag(this._layer,_),a.distance<g){r._orgLatLng=r.getLatLng(),r.setLatLng(d),r._snapped=!0,r._snapInfo=_;let j=()=>{this._snapLatLng=d,this._fireSnap(r,_),this._fireSnap(this._layer,_)},F=this._snapLatLng||{},ht=d||{};(F.lat!==ht.lat||F.lng!==ht.lng)&&j()}else this._snapLatLng&&(this._unsnap(_),r._snapped=!1,r._snapInfo=void 0,this._fireUnsnap(_.marker,_),this._fireUnsnap(this._layer,_));return!0},_createSnapList(){let i=[],r=[],a=this._map;a.off("layerremove",this._handleSnapLayerRemoval,this),a.on("layerremove",this._handleSnapLayerRemoval,this),a.eachLayer(u=>{if((u instanceof L.Polyline||u instanceof L.Marker||u instanceof L.CircleMarker||u instanceof L.ImageOverlay)&&u.options.snapIgnore!==!0){if(u.options.snapIgnore===void 0&&(!L.PM.optIn&&u.options.pmIgnore===!0||L.PM.optIn&&u.options.pmIgnore!==!1))return;(u instanceof L.Circle||u instanceof L.CircleMarker)&&u.pm&&u.pm._hiddenPolyCircle?i.push(u.pm._hiddenPolyCircle):u instanceof L.ImageOverlay&&(u=L.rectangle(u.getBounds())),i.push(u);let d=L.polyline([],{color:"red",pmIgnore:!0});d._pmTempLayer=!0,r.push(d),(u instanceof L.Circle||u instanceof L.CircleMarker)&&r.push(d)}}),i=i.filter(u=>this._layer!==u),i=i.filter(u=>u._latlng||u._latlngs&&Vn(u._latlngs)),i=i.filter(u=>!u._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let u=L.polyline([],{color:"red",pmIgnore:!0});u._pmTempLayer=!0,r.push(u)}),this._snapList=i.concat(this._otherSnapLayers)):this._snapList=i,this.debugIndicatorLines=r},_handleSnapLayerRemoval({layer:i}){if(!i._leaflet_id)return;let r=this._snapList.findIndex(a=>a._leaflet_id===i._leaflet_id);r>-1&&this._snapList.splice(r,1)},_calcClosestLayer(i,r){return this._calcClosestLayers(i,r,1)[0]},_calcClosestLayers(i,r,a=1){let u=[],d={};r.forEach((_,b)=>{var S;if(_._parentCopy&&_._parentCopy===this._layer||((S=_.getLatLngs)==null?void 0:S.call(_).flat(5).length)<2)return;let E=this._calcLayerDistances(i,_);if(E.distance=Math.floor(E.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[b]){let j=L.polyline([],{color:"red",pmIgnore:!0});j._pmTempLayer=!0,this.debugIndicatorLines[b]=j}this.debugIndicatorLines[b].setLatLngs([i,E.latlng])}a===1&&(d.distance===void 0||E.distance-5<=d.distance)?(E.distance+5<d.distance&&(u=[]),d=E,d.layer=_,u.push(d)):a!==1&&(d={},d=E,d.layer=_,u.push(d))}),a!==1&&(u=u.sort((_,b)=>_.distance-b.distance)),a===-1&&(a=u.length);let g=this._getClosestLayerByPriority(u,a);return L.Util.isArray(g)?g:[g]},_calcLayerDistances(i,r){let a=this._map,u=r instanceof L.Marker||r instanceof L.CircleMarker,d=r instanceof L.Polygon,g=i;if(u){let _=r.getLatLng();return{latlng:{..._},distance:this._getDistance(a,_,g)}}return this._calcLatLngDistances(g,r.getLatLngs(),a,d)},_calcLatLngDistances(i,r,a,u=!1){let d,g,_,b=E=>{E.forEach((S,j)=>{if(Array.isArray(S)){b(S);return}if(this.options.snapSegment){let F=S,ht;u?ht=j+1===E.length?0:j+1:ht=j+1===E.length?void 0:j+1;let yt=E[ht];if(yt){let Gt=this._getDistanceToSegment(a,i,F,yt);(g===void 0||Gt<g)&&(g=Gt,_=[F,yt])}}else{let F=this._getDistance(a,i,S);(g===void 0||F<g)&&(g=F,d=S)}})};return b(r),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(a,i,_[0],_[1])},segment:_,distance:g}:{latlng:d,distance:g}},_getClosestLayerByPriority(i,r=1){i=i.sort((_,b)=>_._leaflet_id-b._leaflet_id);let a=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],u=this._map.pm.globalOptions.snappingOrder||[],d=0,g={};return u.concat(a).forEach(_=>{g[_]||(d+=1,g[_]=d)}),i.sort(hu("instanceofShape",g)),r===1?i[0]||{}:i.slice(0,r)},_checkPrioritiySnapping(i){let r=this._map,a=i.segment[0],u=i.segment[1],d=i.latlng,g=d;if(this.options.snapVertex){let _=this._getDistance(r,a,d),b=this._getDistance(r,u,d),E=_<b?a:u,S=_<b?_:b;if(this.options.snapMiddle){let F=L.PM.Utils.calcMiddleLatLng(r,a,u),ht=this._getDistance(r,F,d);ht<_&&ht<b&&(E=F,S=ht)}let j=this.options.snapDistance;S<j&&(g=E)}return{...g}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(i,r,a,u){let d=i.getMaxZoom();d===1/0&&(d=i.getZoom());let g=i.project(r,d),_=i.project(a,d),b=i.project(u,d),E=L.LineUtil.closestPointOnSegment(g,_,b);return i.unproject(E,d)},_getDistanceToSegment(i,r,a,u){let d=i.latLngToContainerPoint(r),g=i.latLngToContainerPoint(a),_=i.latLngToContainerPoint(u);return L.LineUtil.pointToSegmentDistance(d,g,_)},_getDistance(i,r,a){return i.latLngToContainerPoint(r).distanceTo(i.latLngToContainerPoint(a))}},ho=Ma,pu=L.Class.extend({includes:[ho,ss],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(i){L.Util.setOptions(this,i),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(i){let r=new L.Icon.Default;r.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=r,this._map=i,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(a=>{this[a]=new L.PM.Draw[a](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(i,r=!1){r?this.options.pathOptions=(0,fu.default)(this.options.pathOptions,i):this.options.pathOptions=i},getShapes(){return this.shapes},getShape(){return this._shape},enable(i,r){if(!i)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[i].enable(r)},disable(){this.shapes.forEach(i=>{this[i].disable()})},addControls(){this.shapes.forEach(i=>{this[i].addButton()})},getActiveShape(){let i;return this.shapes.forEach(r=>{this[r]._enabled&&(i=r)}),i},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let i=[];this._map.eachLayer(r=>{(r instanceof L.Polyline||r instanceof L.Marker||r instanceof L.Circle||r instanceof L.CircleMarker||r instanceof L.ImageOverlay)&&(r._pmTempLayer||i.push(r))}),this._enabled?i.forEach(r=>{L.PM.Utils.disablePopup(r)}):i.forEach(r=>{L.PM.Utils.enablePopup(r)})},createNewDrawInstance(i,r){let a=this._getShapeFromBtnName(r);if(this[i])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[a])throw new TypeError(`There is no class L.PM.Draw.${a}`);return this[i]=new L.PM.Draw[a](this._map),this[i].toolbarButtonName=i,this[i]._shape=i,this.shapes.push(i),this[r]&&this[i].setOptions(this[r].options),this[i].setOptions(this[i].options),this[i]},_getShapeFromBtnName(i){let r={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return r[i]?r[i]:this[i]?this[i]._shape:i},_finishLayer(i){i.pm&&(i.pm.setOptions(this.options),i.pm._shape=this._shape,i.pm._map=this._map),this._addDrawnLayerProp(i)},_addDrawnLayerProp(i){i._drawnByGeoman=!0},_setPane(i,r){r==="layerPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":r==="vertexPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":r==="markerPane"&&(i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),ui=pu;ui.Marker=ui.extend({initialize(i){this._map=i,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(i){L.Util.setOptions(this,i),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(_e("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(r=>{this.isRelevantMarker(r)&&r.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(i=>{this.isRelevantMarker(i)&&i.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},isRelevantMarker(i){return i instanceof L.Marker&&i.pm&&!i._pmTempLayer&&!i.pm._initTextMarker},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let r=i;r.target=this._hintMarker,this._handleSnapping(r)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(i){if(!i.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng(),a=new L.Marker(r,this.options.markerStyle);this._setPane(a,"markerPane"),this._finishLayer(a),a.pm||(a.options.draggable=!1),a.addTo(this._map.pm._getContainingLayer()),a.pm&&this.options.markerEditable?a.pm.enable():a.dragging&&a.dragging.disable(),this._fireCreate(a),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var i,r;(i=this.options.markerStyle)!=null&&i.icon&&((r=this._hintMarker)==null||r.setIcon(this.options.markerStyle.icon))}});var hi=63710088e-1,Pa={centimeters:hi*100,centimetres:hi*100,degrees:hi/111325,feet:hi*3.28084,inches:hi*39.37,kilometers:hi/1e3,kilometres:hi/1e3,meters:hi,metres:hi,miles:hi/1609.344,millimeters:hi*1e3,millimetres:hi*1e3,nauticalmiles:hi/1852,radians:1,yards:hi*1.0936};function Hn(i,r,a){a===void 0&&(a={});var u={type:"Feature"};return(a.id===0||a.id)&&(u.id=a.id),a.bbox&&(u.bbox=a.bbox),u.properties=r||{},u.geometry=i,u}function Zn(i,r,a){if(a===void 0&&(a={}),!i)throw new Error("coordinates is required");if(!Array.isArray(i))throw new Error("coordinates must be an Array");if(i.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!fo(i[0])||!fo(i[1]))throw new Error("coordinates must contain numbers");var u={type:"Point",coordinates:i};return Hn(u,r,a)}function Mn(i,r,a){if(a===void 0&&(a={}),i.length<2)throw new Error("coordinates must be an array of two or more positions");var u={type:"LineString",coordinates:i};return Hn(u,r,a)}function bi(i,r){r===void 0&&(r={});var a={type:"FeatureCollection"};return r.id&&(a.id=r.id),r.bbox&&(a.bbox=r.bbox),a.features=i,a}function mu(i,r){r===void 0&&(r="kilometers");var a=Pa[r];if(!a)throw new Error(r+" units is invalid");return i*a}function Tr(i,r){r===void 0&&(r="kilometers");var a=Pa[r];if(!a)throw new Error(r+" units is invalid");return i/a}function xi(i){var r=i%(2*Math.PI);return r*180/Math.PI}function $i(i){var r=i%360;return r*Math.PI/180}function fo(i){return!isNaN(i)&&i!==null&&!Array.isArray(i)}function us(i){var r,a,u={type:"FeatureCollection",features:[]};if(i.type==="Feature"?a=i.geometry:a=i,a.type==="LineString")r=[a.coordinates];else if(a.type==="MultiLineString")r=a.coordinates;else if(a.type==="MultiPolygon")r=[].concat.apply([],a.coordinates);else if(a.type==="Polygon")r=a.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return r.forEach(function(d){r.forEach(function(g){for(var _=0;_<d.length-1;_++)for(var b=_;b<g.length-1;b++)if(!(d===g&&(Math.abs(_-b)===1||_===0&&b===d.length-2&&d[_][0]===d[d.length-1][0]&&d[_][1]===d[d.length-1][1]))){var E=po(d[_][0],d[_][1],d[_+1][0],d[_+1][1],g[b][0],g[b][1],g[b+1][0],g[b+1][1]);E&&u.features.push(Zn([E[0],E[1]]))}})}),u}function po(i,r,a,u,d,g,_,b){var E,S,j,F,ht,yt={x:null,y:null,onLine1:!1,onLine2:!1};return E=(b-g)*(a-i)-(_-d)*(u-r),E===0?yt.x!==null&&yt.y!==null?yt:!1:(S=r-g,j=i-d,F=(_-d)*S-(b-g)*j,ht=(a-i)*S-(u-r)*j,S=F/E,j=ht/E,yt.x=i+S*(a-i),yt.y=r+S*(u-r),S>=0&&S<=1&&(yt.onLine1=!0),j>=0&&j<=1&&(yt.onLine2=!0),yt.onLine1&&yt.onLine2?[yt.x,yt.y]:!1)}ui.Line=ui.extend({initialize(i){this._map=i,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(i){L.Util.setOptions(this,i),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(_e("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_syncHintLine(){let i=this._layer.getLatLngs();if(i.length>0){let r=i[i.length-1];this._hintline.setLatLngs([r,this._hintMarker.getLatLng()])}},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let a=i;a.target=this._hintMarker,this._handleSnapping(a)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let r=this._layer._defaultShape().slice();r.push(this._hintMarker.getLatLng()),this._change(r)},hasSelfIntersection(){return us(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(i,r){let a=L.polyline(this._layer.getLatLngs());i&&(r||(r=this._hintMarker.getLatLng()),a.addLatLng(r));let u=us(a.toGeoJSON(15));this._doesSelfIntersect=u.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(u,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(i){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,i.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng(),a=this._layer.getLatLngs(),u=a[a.length-1];if(r.equals(a[0])||a.length>0&&r.equals(u)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:r,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(r);let d=this._createMarker(r);this._setTooltipText(),this._setHintLineAfterNewVertex(r),this._fireVertexAdded(d,void 0,r,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(i)},_setHintLineAfterNewVertex(i){this._hintline.setLatLngs([i,i])},_removeLastVertex(){let i=this._markers;if(i.length<=1){this.disable();return}let r=this._layer.getLatLngs(),a=i[i.length-1],{indexPath:u}=L.PM.Utils.findDeepMarkerIndex(i,a);i.pop(),this._layerGroup.removeLayer(a);let d=i[i.length-1],g=r.indexOf(d.getLatLng());r=r.slice(0,g+1),this._layer.setLatLngs(r),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(a,u,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let i=this._layer.getLatLngs();if(i.length<=1)return;let r=L.polyline(i,this.options.pathOptions);this._setPane(r,"layerPane"),this._finishLayer(r),r.addTo(this._map.pm._getContainingLayer()),this._fireCreate(r),this.options.snappable&&this._cleanupSnapping();let a=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(a))},_createMarker(i){let r=new L.Marker(i,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._pmTempLayer=!0,this._layerGroup.addLayer(r),this._markers.push(r),r.on("click",this._finishShape,this),r},_setTooltipText(){let{length:i}=this._layer.getLatLngs().flat(),r="";i<=1?r=_e("tooltips.continueLine"):r=_e("tooltips.finishLine"),this._hintMarker.setTooltipContent(r)},_change(i){this._fireChange(i,"Draw")},setStyle(){var i,r;(i=this._layer)==null||i.setStyle(this.options.templineStyle),(r=this._hintline)==null||r.setStyle(this.options.hintlineStyle)}}),ui.Polygon=ui.Line.extend({initialize(i){this._map=i,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(i){L.PM.Draw.Line.prototype.enable.call(this,i),this._layer.pm._shape="Polygon"},_createMarker(i){let r=new L.Marker(i,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._pmTempLayer=!0,this._layerGroup.addLayer(r),this._markers.push(r),this._layer.getLatLngs().flat().length===1?(r.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(r)-1,this.options.snappable&&this._cleanupSnapping()):r.on("click",()=>1),r},_setTooltipText(){let{length:i}=this._layer.getLatLngs().flat(),r="";i<=2?r=_e("tooltips.continueLine"):r=_e("tooltips.finishPoly"),this._hintMarker.setTooltipContent(r)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let i=this._layer.getLatLngs();if(i.length<=2)return;let r=L.polygon(i,this.options.pathOptions);this._setPane(r,"layerPane"),this._finishLayer(r),r.addTo(this._map.pm._getContainingLayer()),this._fireCreate(r),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let a=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(a))}}),ui.Rectangle=ui.extend({initialize(i){this._map=i,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(i){if(L.Util.setOptions(this,i),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(_e("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let r=0;r<2;r+=1){let a=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(a,"vertexPane"),a._pmTempLayer=!0,this._layerGroup.addLayer(a),this._styleMarkers.push(a)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_placeStartingMarkers(i){this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(r),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(a=>{L.DomUtil.addClass(a._icon,"visible"),a.setLatLng(r)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(_e("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let i=this._startMarker.getLatLng();i&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([i,i]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let a=i;a.target=this._hintMarker,this._handleSnapping(a)}let r=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(r,"Draw")},_syncRectangleSize(){let i=La(this._startMarker.getLatLng(),this._map),r=La(this._hintMarker.getLatLng(),this._map),a=L.PM.Utils._getRotatedRectangle(i,r,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(a),this.options.cursorMarker&&this._styleMarkers){let u=[];a.forEach(d=>{!d.equals(i,1e-8)&&!d.equals(r,1e-8)&&u.push(d)}),u.forEach((d,g)=>{try{this._styleMarkers[g].setLatLng(d)}catch{}})}},_findCorners(){let i=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(i[0],i[2],this.options.rectangleAngle||0,this._map)},_finishShape(i){this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng(),a=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||a.equals(r))return;let u=L.rectangle([a,r],this.options.pathOptions);if(this.options.rectangleAngle){let g=L.PM.Utils._getRotatedRectangle(a,r,this.options.rectangleAngle||0,this._map);u.setLatLngs(g),u.pm&&u.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(u,"layerPane"),this._finishLayer(u),u.addTo(this._map.pm._getContainingLayer()),this._fireCreate(u);let d=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(d))},setStyle(){var i;(i=this._layer)==null||i.setStyle(this.options.pathOptions)}}),ui.CircleMarker=ui.extend({initialize(i){this._map=i,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(i){if(L.Util.setOptions(this,i),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let r={};L.extend(r,this.options.templineStyle),r.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),r),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(_e("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(_e("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(i=>{this.isRelevantMarker(i)&&i.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(i=>{this.isRelevantMarker(i)&&i.pm.disable()})},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_placeCenterMarker(i){this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let r=this._hintMarker.getLatLng();this._centerMarker.setLatLng(r),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let i=this._centerMarker.getLatLng();i&&(this._layer.setLatLng(i),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(_e("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let i=this._centerMarker.getLatLng(),r=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([i,r])},_syncCircleRadius(){let i=this._centerMarker.getLatLng(),r=this._hintMarker.getLatLng(),a=this._distanceCalculation(i,r);this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(a)},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let a=i;a.target=this._hintMarker,this._handleSnapping(a)}this._handleHintMarkerSnapping();let r=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(r,"Draw")},isRelevantMarker(i){return i instanceof L.CircleMarker&&!(i instanceof L.Circle)&&i.pm&&!i._pmTempLayer},_createMarker(i){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!i.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng(),a=new this._BaseCircleClass(r,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(a,"layerPane"),this._finishLayer(a),a.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(a),this._fireCreate(a),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(i){i.pm&&this.options.markerEditable&&i.pm.enable()},_finishShape(i){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._centerMarker.getLatLng(),a=this._defaultRadius;if(this.options[this._editableOption]){let _=this._hintMarker.getLatLng();a=this._distanceCalculation(r,_),this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?a=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&(a=this.options[this._maxRadiusOption])}let u={...this.options.pathOptions,radius:a},d=new this._BaseCircleClass(r,u);this._setPane(d,"layerPane"),this._finishLayer(d),d.addTo(this._map.pm._getContainingLayer()),d.pm&&d.pm._updateHiddenPolyCircle(),this._fireCreate(d);let g=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(g))},_getNewDestinationOfHintMarker(){let i=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return i;let r=this._centerMarker.getLatLng(),a=this._distanceCalculation(r,i);this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?i=ls(this._map,r,i,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&(i=ls(this._map,r,i,this._getMaxDistanceInMeter()))}return i},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let i=this._centerMarker.getLatLng(),r=this._hintMarker.getLatLng(),a=this._distanceCalculation(i,r);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var r,a;let i={};L.extend(i,this.options.templineStyle),this.options[this._editableOption]&&(i.radius=0),(r=this._layer)==null||r.setStyle(i),(a=this._hintline)==null||a.setStyle(this.options.hintlineStyle)},_distanceCalculation(i,r){return this._map.project(i).distanceTo(this._map.project(r))}}),ui.Circle=ui.CircleMarker.extend({initialize(i){this._map=i,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(i,r){return this._map.distance(i,r)}});function ji(i){if(!i)throw new Error("coord is required");if(!Array.isArray(i)){if(i.type==="Feature"&&i.geometry!==null&&i.geometry.type==="Point")return i.geometry.coordinates;if(i.type==="Point")return i.coordinates}if(Array.isArray(i)&&i.length>=2&&!Array.isArray(i[0])&&!Array.isArray(i[1]))return i;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function nn(i){if(Array.isArray(i))return i;if(i.type==="Feature"){if(i.geometry!==null)return i.geometry.coordinates}else if(i.coordinates)return i.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function cs(i){return i.type==="Feature"?i.geometry:i}function mo(i,r){return i.type==="FeatureCollection"?"FeatureCollection":i.type==="GeometryCollection"?"GeometryCollection":i.type==="Feature"&&i.geometry!==null?i.geometry.type:i.type}function go(i,r,a){if(i!==null)for(var u,d,g,_,b,E,S,j=0,F=0,ht,yt=i.type,Gt=yt==="FeatureCollection",Yt=yt==="Feature",oe=Gt?i.features.length:1,Me=0;Me<oe;Me++){S=Gt?i.features[Me].geometry:Yt?i.geometry:i,ht=S?S.type==="GeometryCollection":!1,b=ht?S.geometries.length:1;for(var N=0;N<b;N++){var q=0,it=0;if(_=ht?S.geometries[N]:S,_!==null){E=_.coordinates;var vt=_.type;switch(j=0,vt){case null:break;case"Point":if(r(E,F,Me,q,it)===!1)return!1;F++,q++;break;case"LineString":case"MultiPoint":for(u=0;u<E.length;u++){if(r(E[u],F,Me,q,it)===!1)return!1;F++,vt==="MultiPoint"&&q++}vt==="LineString"&&q++;break;case"Polygon":case"MultiLineString":for(u=0;u<E.length;u++){for(d=0;d<E[u].length-j;d++){if(r(E[u][d],F,Me,q,it)===!1)return!1;F++}vt==="MultiLineString"&&q++,vt==="Polygon"&&it++}vt==="Polygon"&&q++;break;case"MultiPolygon":for(u=0;u<E.length;u++){for(it=0,d=0;d<E[u].length;d++){for(g=0;g<E[u][d].length-j;g++){if(r(E[u][d][g],F,Me,q,it)===!1)return!1;F++}it++}q++}break;case"GeometryCollection":for(u=0;u<_.geometries.length;u++)if(go(_.geometries[u],r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function mi(i,r){if(i.type==="Feature")r(i,0);else if(i.type==="FeatureCollection")for(var a=0;a<i.features.length&&r(i.features[a],a)!==!1;a++);}function ar(i,r,a){var u=a;return mi(i,function(d,g){g===0&&a===void 0?u=d:u=r(u,d,g)}),u}function gu(i,r){var a,u,d,g,_,b,E,S,j,F,ht=0,yt=i.type==="FeatureCollection",Gt=i.type==="Feature",Yt=yt?i.features.length:1;for(a=0;a<Yt;a++){for(b=yt?i.features[a].geometry:Gt?i.geometry:i,S=yt?i.features[a].properties:Gt?i.properties:{},j=yt?i.features[a].bbox:Gt?i.bbox:void 0,F=yt?i.features[a].id:Gt?i.id:void 0,E=b?b.type==="GeometryCollection":!1,_=E?b.geometries.length:1,d=0;d<_;d++){if(g=E?b.geometries[d]:b,g===null){if(r(null,ht,S,j,F)===!1)return!1;continue}switch(g.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(r(g,ht,S,j,F)===!1)return!1;break}case"GeometryCollection":{for(u=0;u<g.geometries.length;u++)if(r(g.geometries[u],ht,S,j,F)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}ht++}}function qi(i,r){gu(i,function(a,u,d,g,_){var b=a===null?null:a.type;switch(b){case null:case"Point":case"LineString":case"Polygon":return r(Hn(a,d,{bbox:g,id:_}),u,0)===!1?!1:void 0}var E;switch(b){case"MultiPoint":E="Point";break;case"MultiLineString":E="LineString";break;case"MultiPolygon":E="Polygon";break}for(var S=0;S<a.coordinates.length;S++){var j=a.coordinates[S],F={type:E,coordinates:j};if(r(Hn(F,d),u,S)===!1)return!1}})}function _u(i){if(!i)throw new Error("geojson is required");var r=[];return qi(i,function(a){lr(a,r)}),bi(r)}function lr(i,r){var a=[],u=i.geometry;if(u!==null){switch(u.type){case"Polygon":a=nn(u);break;case"LineString":a=[nn(u)]}a.forEach(function(d){var g=yu(d,i.properties);g.forEach(function(_){_.id=r.length,r.push(_)})})}}function yu(i,r){var a=[];return i.reduce(function(u,d){var g=Mn([u,d],r);return g.bbox=Dr(u,d),a.push(g),d}),a}function Dr(i,r){var a=i[0],u=i[1],d=r[0],g=r[1],_=a<d?a:d,b=u<g?u:g,E=a>d?a:d,S=u>g?u:g;return[_,b,E,S]}var hs=_u,ds=y(Nn(),1);function vu(i,r){var a={},u=[];if(i.type==="LineString"&&(i=Hn(i)),r.type==="LineString"&&(r=Hn(r)),i.type==="Feature"&&r.type==="Feature"&&i.geometry!==null&&r.geometry!==null&&i.geometry.type==="LineString"&&r.geometry.type==="LineString"&&i.geometry.coordinates.length===2&&r.geometry.coordinates.length===2){var d=pn(i,r);return d&&u.push(d),bi(u)}var g=(0,ds.default)();return g.load(hs(r)),mi(hs(i),function(_){mi(g.search(_),function(b){var E=pn(_,b);if(E){var S=nn(E).join(",");a[S]||(a[S]=!0,u.push(E))}})}),bi(u)}function pn(i,r){var a=nn(i),u=nn(r);if(a.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(u.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var d=a[0][0],g=a[0][1],_=a[1][0],b=a[1][1],E=u[0][0],S=u[0][1],j=u[1][0],F=u[1][1],ht=(F-S)*(_-d)-(j-E)*(b-g),yt=(j-E)*(g-S)-(F-S)*(d-E),Gt=(_-d)*(g-S)-(b-g)*(d-E);if(ht===0)return null;var Yt=yt/ht,oe=Gt/ht;if(Yt>=0&&Yt<=1&&oe>=0&&oe<=1){var Me=d+Yt*(_-d),N=g+Yt*(b-g);return Zn([Me,N])}return null}var rn=vu,Sa=y(Nn(),1);function _o(i,r,a){a===void 0&&(a={});var u=ji(i),d=ji(r),g=$i(d[1]-u[1]),_=$i(d[0]-u[0]),b=$i(u[1]),E=$i(d[1]),S=Math.pow(Math.sin(g/2),2)+Math.pow(Math.sin(_/2),2)*Math.cos(b)*Math.cos(E);return mu(2*Math.atan2(Math.sqrt(S),Math.sqrt(1-S)),a.units)}var qn=_o;function mn(i){var r=i[0],a=i[1],u=i[2],d=i[3],g=qn(i.slice(0,2),[u,a]),_=qn(i.slice(0,2),[r,d]);if(g>=_){var b=(a+d)/2;return[r,b-(u-r)/2,u,b+(u-r)/2]}else{var E=(r+u)/2;return[E-(d-a)/2,a,E+(d-a)/2,d]}}var bu=mn;function Pn(i){var r=[1/0,1/0,-1/0,-1/0];return go(i,function(a){r[0]>a[0]&&(r[0]=a[0]),r[1]>a[1]&&(r[1]=a[1]),r[2]<a[0]&&(r[2]=a[0]),r[3]<a[1]&&(r[3]=a[1])}),r}Pn.default=Pn;var Rr=Pn;function gn(i,r){r===void 0&&(r={});var a=r.precision,u=r.coordinates,d=r.mutate;if(a=a==null||isNaN(a)?6:a,u=u==null||isNaN(u)?3:u,!i)throw new Error("<geojson> is required");if(typeof a!="number")throw new Error("<precision> must be a number");if(typeof u!="number")throw new Error("<coordinates> must be a number");(d===!1||d===void 0)&&(i=JSON.parse(JSON.stringify(i)));var g=Math.pow(10,a);return go(i,function(_){fs(_,g,u)}),i}function fs(i,r,a){i.length>a&&i.splice(a,i.length);for(var u=0;u<i.length;u++)i[u]=Math.round(i[u]*r)/r;return i}var Ba=gn;function ps(i,r,a){if(a===void 0&&(a={}),a.final===!0)return ms(i,r);var u=ji(i),d=ji(r),g=$i(u[0]),_=$i(d[0]),b=$i(u[1]),E=$i(d[1]),S=Math.sin(_-g)*Math.cos(E),j=Math.cos(b)*Math.sin(E)-Math.sin(b)*Math.cos(E)*Math.cos(_-g);return xi(Math.atan2(S,j))}function ms(i,r){var a=ps(r,i);return a=(a+180)%360,a}function gs(i,r,a,u){u===void 0&&(u={});var d=ji(i),g=$i(d[0]),_=$i(d[1]),b=$i(a),E=Tr(r,u.units),S=Math.asin(Math.sin(_)*Math.cos(E)+Math.cos(_)*Math.sin(E)*Math.cos(b)),j=g+Math.atan2(Math.sin(b)*Math.sin(E)*Math.cos(_),Math.cos(E)-Math.sin(_)*Math.sin(S)),F=xi(j),ht=xi(S);return Zn([F,ht],u.properties)}function _s(i,r,a){a===void 0&&(a={});var u=Zn([1/0,1/0],{dist:1/0}),d=0;return qi(i,function(g){for(var _=nn(g),b=0;b<_.length-1;b++){var E=Zn(_[b]);E.properties.dist=qn(r,E,a);var S=Zn(_[b+1]);S.properties.dist=qn(r,S,a);var j=qn(E,S,a),F=Math.max(E.properties.dist,S.properties.dist),ht=ps(E,S),yt=gs(r,F,ht+90,a),Gt=gs(r,F,ht-90,a),Yt=rn(Mn([yt.geometry.coordinates,Gt.geometry.coordinates]),Mn([E.geometry.coordinates,S.geometry.coordinates])),oe=null;Yt.features.length>0&&(oe=Yt.features[0],oe.properties.dist=qn(r,oe,a),oe.properties.location=d+qn(E,oe,a)),E.properties.dist<u.properties.dist&&(u=E,u.properties.index=b,u.properties.location=d),S.properties.dist<u.properties.dist&&(u=S,u.properties.index=b+1,u.properties.location=d+j),oe&&oe.properties.dist<u.properties.dist&&(u=oe,u.properties.index=b),d+=j}}),u}var ur=_s;function ys(i,r){if(!i)throw new Error("line is required");if(!r)throw new Error("splitter is required");var a=mo(i),u=mo(r);if(a!=="LineString")throw new Error("line must be LineString");if(u==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(u==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var d=Ba(r,{precision:7});switch(u){case"Point":return bs(i,d);case"MultiPoint":return vs(i,d);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return vs(i,rn(i,d))}}function vs(i,r){var a=[],u=(0,Sa.default)();return qi(r,function(d){if(a.forEach(function(b,E){b.id=E}),!a.length)a=bs(i,d).features,a.forEach(function(b){b.bbox||(b.bbox=bu(Rr(b)))}),u.load(bi(a));else{var g=u.search(d);if(g.features.length){var _=Aa(d,g);a=a.filter(function(b){return b.id!==_.id}),u.remove(_),mi(bs(_,d),function(b){a.push(b),u.insert(b)})}}}),bi(a)}function bs(i,r){var a=[],u=nn(i)[0],d=nn(i)[i.geometry.coordinates.length-1];if(cr(u,ji(r))||cr(d,ji(r)))return bi([i]);var g=(0,Sa.default)(),_=hs(i);g.load(_);var b=g.search(r);if(!b.features.length)return bi([i]);var E=Aa(r,b),S=[u],j=ar(_,function(F,ht,yt){var Gt=nn(ht)[1],Yt=ji(r);return yt===E.id?(F.push(Yt),a.push(Mn(F)),cr(Yt,Gt)?[Yt]:[Yt,Gt]):(F.push(Gt),F)},S);return j.length>1&&a.push(Mn(j)),bi(a)}function Aa(i,r){if(!r.features.length)throw new Error("lines must contain features");if(r.features.length===1)return r.features[0];var a,u=1/0;return mi(r,function(d){var g=ur(d,i),_=g.properties.dist;_<u&&(a=d,u=_)}),a}function cr(i,r){return i[0]===r[0]&&i[1]===r[1]}var xu=ys;function Or(i,r,a){if(a===void 0&&(a={}),!i)throw new Error("point is required");if(!r)throw new Error("polygon is required");var u=ji(i),d=cs(r),g=d.type,_=r.bbox,b=d.coordinates;if(_&&Da(u,_)===!1)return!1;g==="Polygon"&&(b=[b]);for(var E=!1,S=0;S<b.length&&!E;S++)if(Ta(u,b[S][0],a.ignoreBoundary)){for(var j=!1,F=1;F<b[S].length&&!j;)Ta(u,b[S][F],!a.ignoreBoundary)&&(j=!0),F++;j||(E=!0)}return E}function Ta(i,r,a){var u=!1;r[0][0]===r[r.length-1][0]&&r[0][1]===r[r.length-1][1]&&(r=r.slice(0,r.length-1));for(var d=0,g=r.length-1;d<r.length;g=d++){var _=r[d][0],b=r[d][1],E=r[g][0],S=r[g][1],j=i[1]*(_-E)+b*(E-i[0])+S*(i[0]-_)===0&&(_-i[0])*(E-i[0])<=0&&(b-i[1])*(S-i[1])<=0;if(j)return!a;var F=b>i[1]!=S>i[1]&&i[0]<(E-_)*(i[1]-b)/(S-b)+_;F&&(u=!u)}return u}function Da(i,r){return r[0]<=i[0]&&r[1]<=i[1]&&r[2]>=i[0]&&r[3]>=i[1]}function wu(i,r,a){a===void 0&&(a={});for(var u=ji(i),d=nn(r),g=0;g<d.length-1;g++){var _=!1;if(a.ignoreEndVertices&&(g===0&&(_="start"),g===d.length-2&&(_="end"),g===0&&g+1===d.length-1&&(_="both")),sn(d[g],d[g+1],u,_,typeof a.epsilon>"u"?null:a.epsilon))return!0}return!1}function sn(i,r,a,u,d){var g=a[0],_=a[1],b=i[0],E=i[1],S=r[0],j=r[1],F=a[0]-b,ht=a[1]-E,yt=S-b,Gt=j-E,Yt=F*Gt-ht*yt;if(d!==null){if(Math.abs(Yt)>d)return!1}else if(Yt!==0)return!1;if(u){if(u==="start")return Math.abs(yt)>=Math.abs(Gt)?yt>0?b<g&&g<=S:S<=g&&g<b:Gt>0?E<_&&_<=j:j<=_&&_<E;if(u==="end")return Math.abs(yt)>=Math.abs(Gt)?yt>0?b<=g&&g<S:S<g&&g<=b:Gt>0?E<=_&&_<j:j<_&&_<=E;if(u==="both")return Math.abs(yt)>=Math.abs(Gt)?yt>0?b<g&&g<S:S<g&&g<b:Gt>0?E<_&&_<j:j<_&&_<E}else return Math.abs(yt)>=Math.abs(Gt)?yt>0?b<=g&&g<=S:S<=g&&g<=b:Gt>0?E<=_&&_<=j:j<=_&&_<=E;return!1}var Sn=wu;function Lu(i,r){var a=cs(i),u=cs(r),d=a.type,g=u.type,_=a.coordinates,b=u.coordinates;switch(d){case"Point":switch(g){case"Point":return ws(_,b);default:throw new Error("feature2 "+g+" geometry not supported")}case"MultiPoint":switch(g){case"Point":return xs(a,u);case"MultiPoint":return Cu(a,u);default:throw new Error("feature2 "+g+" geometry not supported")}case"LineString":switch(g){case"Point":return Sn(u,a,{ignoreEndVertices:!0});case"LineString":return Ir(a,u);case"MultiPoint":return Ra(a,u);default:throw new Error("feature2 "+g+" geometry not supported")}case"Polygon":switch(g){case"Point":return Or(u,a,{ignoreBoundary:!0});case"LineString":return ku(a,u);case"Polygon":return hr(a,u);case"MultiPoint":return Eu(a,u);default:throw new Error("feature2 "+g+" geometry not supported")}default:throw new Error("feature1 "+d+" geometry not supported")}}function xs(i,r){var a,u=!1;for(a=0;a<i.coordinates.length;a++)if(ws(i.coordinates[a],r.coordinates)){u=!0;break}return u}function Cu(i,r){for(var a=0,u=r.coordinates;a<u.length;a++){for(var d=u[a],g=!1,_=0,b=i.coordinates;_<b.length;_++){var E=b[_];if(ws(d,E)){g=!0;break}}if(!g)return!1}return!0}function Ra(i,r){for(var a=!1,u=0,d=r.coordinates;u<d.length;u++){var g=d[u];if(Sn(g,i,{ignoreEndVertices:!0})&&(a=!0),!Sn(g,i))return!1}return!!a}function Eu(i,r){for(var a=0,u=r.coordinates;a<u.length;a++){var d=u[a];if(!Or(d,i,{ignoreBoundary:!0}))return!1}return!0}function Ir(i,r){for(var a=!1,u=0,d=r.coordinates;u<d.length;u++){var g=d[u];if(Sn({type:"Point",coordinates:g},i,{ignoreEndVertices:!0})&&(a=!0),!Sn({type:"Point",coordinates:g},i,{ignoreEndVertices:!1}))return!1}return a}function ku(i,r){var a=!1,u=0,d=Rr(i),g=Rr(r);if(!yo(d,g))return!1;for(u;u<r.coordinates.length-1;u++){var _=Mu(r.coordinates[u],r.coordinates[u+1]);if(Or({type:"Point",coordinates:_},i,{ignoreBoundary:!0})){a=!0;break}}return a}function hr(i,r){if(i.type==="Feature"&&i.geometry===null||r.type==="Feature"&&r.geometry===null)return!1;var a=Rr(i),u=Rr(r);if(!yo(a,u))return!1;for(var d=cs(r).coordinates,g=0,_=d;g<_.length;g++)for(var b=_[g],E=0,S=b;E<S.length;E++){var j=S[E];if(!Or(j,i))return!1}return!0}function yo(i,r){return!(i[0]>r[0]||i[2]<r[2]||i[1]>r[1]||i[3]<r[3])}function ws(i,r){return i[0]===r[0]&&i[1]===r[1]}function Mu(i,r){return[(i[0]+r[0])/2,(i[1]+r[1])/2]}var _n=y(Cn()),vo=i=>()=>i,Ls=i=>{let r=i?(a,u)=>u.minus(a).abs().isLessThanOrEqualTo(i):vo(!1);return(a,u)=>r(a,u)?0:a.comparedTo(u)};function Fr(i){let r=i?(a,u,d,g,_)=>a.exponentiatedBy(2).isLessThanOrEqualTo(g.minus(u).exponentiatedBy(2).plus(_.minus(d).exponentiatedBy(2)).times(i)):vo(!1);return(a,u,d)=>{let g=a.x,_=a.y,b=d.x,E=d.y,S=_.minus(E).times(u.x.minus(b)).minus(g.minus(b).times(u.y.minus(E)));return r(S,g,_,b,E)?0:S.comparedTo(0)}}var Pu=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,dr=Math.ceil,di=Math.floor,gi="[BigNumber Error] ",bo=gi+"Number primitive has more than 15 significant digits: ",Ki=1e14,ge=14,xo=9007199254740991,Cs=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],yn=1e7,wi=1e9;function Oa(i){var r,a,u,d=N.prototype={constructor:N,toString:null,valueOf:null},g=new N(1),_=20,b=4,E=-7,S=21,j=-1e7,F=1e7,ht=!1,yt=1,Gt=0,Yt={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},oe="0123456789abcdefghijklmnopqrstuvwxyz",Me=!0;function N(k,A){var D,T,O,I,W,K,tt,ct,ut=this;if(!(ut instanceof N))return new N(k,A);if(A==null){if(k&&k._isBigNumber===!0){ut.s=k.s,!k.c||k.e>F?ut.c=ut.e=null:k.e<j?ut.c=[ut.e=0]:(ut.e=k.e,ut.c=k.c.slice());return}if((K=typeof k=="number")&&k*0==0){if(ut.s=1/k<0?(k=-k,-1):1,k===~~k){for(I=0,W=k;W>=10;W/=10,I++);I>F?ut.c=ut.e=null:(ut.e=I,ut.c=[k]);return}ct=String(k)}else{if(!Pu.test(ct=String(k)))return u(ut,ct,K);ut.s=ct.charCodeAt(0)==45?(ct=ct.slice(1),-1):1}(I=ct.indexOf("."))>-1&&(ct=ct.replace(".","")),(W=ct.search(/e/i))>0?(I<0&&(I=W),I+=+ct.slice(W+1),ct=ct.substring(0,W)):I<0&&(I=ct.length)}else{if(e(A,2,oe.length,"Base"),A==10&&Me)return ut=new N(k),st(ut,_+ut.e+1,b);if(ct=String(k),K=typeof k=="number"){if(k*0!=0)return u(ut,ct,K,A);if(ut.s=1/k<0?(ct=ct.slice(1),-1):1,N.DEBUG&&ct.replace(/^0\.0*|\./,"").length>15)throw Error(bo+k)}else ut.s=ct.charCodeAt(0)===45?(ct=ct.slice(1),-1):1;for(D=oe.slice(0,A),I=W=0,tt=ct.length;W<tt;W++)if(D.indexOf(T=ct.charAt(W))<0){if(T=="."){if(W>I){I=tt;continue}}else if(!O&&(ct==ct.toUpperCase()&&(ct=ct.toLowerCase())||ct==ct.toLowerCase()&&(ct=ct.toUpperCase()))){O=!0,W=-1,I=0;continue}return u(ut,String(k),K,A)}K=!1,ct=a(ct,A,10,ut.s),(I=ct.indexOf("."))>-1?ct=ct.replace(".",""):I=ct.length}for(W=0;ct.charCodeAt(W)===48;W++);for(tt=ct.length;ct.charCodeAt(--tt)===48;);if(ct=ct.slice(W,++tt)){if(tt-=W,K&&N.DEBUG&&tt>15&&(k>xo||k!==di(k)))throw Error(bo+ut.s*k);if((I=I-W-1)>F)ut.c=ut.e=null;else if(I<j)ut.c=[ut.e=0];else{if(ut.e=I,ut.c=[],W=(I+1)%ge,I<0&&(W+=ge),W<tt){for(W&&ut.c.push(+ct.slice(0,W)),tt-=ge;W<tt;)ut.c.push(+ct.slice(W,W+=ge));W=ge-(ct=ct.slice(W)).length}else W-=tt;for(;W--;ct+="0");ut.c.push(+ct)}}else ut.c=[ut.e=0]}N.clone=Oa,N.ROUND_UP=0,N.ROUND_DOWN=1,N.ROUND_CEIL=2,N.ROUND_FLOOR=3,N.ROUND_HALF_UP=4,N.ROUND_HALF_DOWN=5,N.ROUND_HALF_EVEN=6,N.ROUND_HALF_CEIL=7,N.ROUND_HALF_FLOOR=8,N.EUCLID=9,N.config=N.set=function(k){var A,D;if(k!=null)if(typeof k=="object"){if(k.hasOwnProperty(A="DECIMAL_PLACES")&&(D=k[A],e(D,0,wi,A),_=D),k.hasOwnProperty(A="ROUNDING_MODE")&&(D=k[A],e(D,0,8,A),b=D),k.hasOwnProperty(A="EXPONENTIAL_AT")&&(D=k[A],D&&D.pop?(e(D[0],-1e9,0,A),e(D[1],0,wi,A),E=D[0],S=D[1]):(e(D,-1e9,wi,A),E=-(S=D<0?-D:D))),k.hasOwnProperty(A="RANGE"))if(D=k[A],D&&D.pop)e(D[0],-1e9,-1,A),e(D[1],1,wi,A),j=D[0],F=D[1];else if(e(D,-1e9,wi,A),D)j=-(F=D<0?-D:D);else throw Error(gi+A+" cannot be zero: "+D);if(k.hasOwnProperty(A="CRYPTO"))if(D=k[A],D===!!D)if(D)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))ht=D;else throw ht=!D,Error(gi+"crypto unavailable");else ht=D;else throw Error(gi+A+" not true or false: "+D);if(k.hasOwnProperty(A="MODULO_MODE")&&(D=k[A],e(D,0,9,A),yt=D),k.hasOwnProperty(A="POW_PRECISION")&&(D=k[A],e(D,0,wi,A),Gt=D),k.hasOwnProperty(A="FORMAT"))if(D=k[A],typeof D=="object")Yt=D;else throw Error(gi+A+" not an object: "+D);if(k.hasOwnProperty(A="ALPHABET"))if(D=k[A],typeof D=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(D))Me=D.slice(0,10)=="0123456789",oe=D;else throw Error(gi+A+" invalid: "+D)}else throw Error(gi+"Object expected: "+k);return{DECIMAL_PLACES:_,ROUNDING_MODE:b,EXPONENTIAL_AT:[E,S],RANGE:[j,F],CRYPTO:ht,MODULO_MODE:yt,POW_PRECISION:Gt,FORMAT:Yt,ALPHABET:oe}},N.isBigNumber=function(k){if(!k||k._isBigNumber!==!0)return!1;if(!N.DEBUG)return!0;var A,D,T=k.c,O=k.e,I=k.s;t:if({}.toString.call(T)=="[object Array]"){if((I===1||I===-1)&&O>=-1e9&&O<=wi&&O===di(O)){if(T[0]===0){if(O===0&&T.length===1)return!0;break t}if(A=(O+1)%ge,A<1&&(A+=ge),String(T[0]).length==A){for(A=0;A<T.length;A++)if(D=T[A],D<0||D>=Ki||D!==di(D))break t;if(D!==0)return!0}}}else if(T===null&&O===null&&(I===null||I===1||I===-1))return!0;throw Error(gi+"Invalid BigNumber: "+k)},N.maximum=N.max=function(){return it(arguments,-1)},N.minimum=N.min=function(){return it(arguments,1)},N.random=function(){var k=9007199254740992,A=Math.random()*k&2097151?function(){return di(Math.random()*k)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(D){var T,O,I,W,K,tt=0,ct=[],ut=new N(g);if(D==null?D=_:e(D,0,wi),W=dr(D/ge),ht)if(crypto.getRandomValues){for(T=crypto.getRandomValues(new Uint32Array(W*=2));tt<W;)K=T[tt]*131072+(T[tt+1]>>>11),K>=9e15?(O=crypto.getRandomValues(new Uint32Array(2)),T[tt]=O[0],T[tt+1]=O[1]):(ct.push(K%1e14),tt+=2);tt=W/2}else if(crypto.randomBytes){for(T=crypto.randomBytes(W*=7);tt<W;)K=(T[tt]&31)*281474976710656+T[tt+1]*1099511627776+T[tt+2]*4294967296+T[tt+3]*16777216+(T[tt+4]<<16)+(T[tt+5]<<8)+T[tt+6],K>=9e15?crypto.randomBytes(7).copy(T,tt):(ct.push(K%1e14),tt+=7);tt=W/7}else throw ht=!1,Error(gi+"crypto unavailable");if(!ht)for(;tt<W;)K=A(),K<9e15&&(ct[tt++]=K%1e14);for(W=ct[--tt],D%=ge,W&&D&&(K=Cs[ge-D],ct[tt]=di(W/K)*K);ct[tt]===0;ct.pop(),tt--);if(tt<0)ct=[I=0];else{for(I=-1;ct[0]===0;ct.splice(0,1),I-=ge);for(tt=1,K=ct[0];K>=10;K/=10,tt++);tt<ge&&(I-=ge-tt)}return ut.e=I,ut.c=ct,ut}}(),N.sum=function(){for(var k=1,A=arguments,D=new N(A[0]);k<A.length;)D=D.plus(A[k++]);return D},a=function(){var k="0123456789";function A(D,T,O,I){for(var W,K=[0],tt,ct=0,ut=D.length;ct<ut;){for(tt=K.length;tt--;K[tt]*=T);for(K[0]+=I.indexOf(D.charAt(ct++)),W=0;W<K.length;W++)K[W]>O-1&&(K[W+1]==null&&(K[W+1]=0),K[W+1]+=K[W]/O|0,K[W]%=O)}return K.reverse()}return function(D,T,O,I,W){var K,tt,ct,ut,Ft,re,le,he,Ie=D.indexOf("."),je=_,Te=b;for(Ie>=0&&(ut=Gt,Gt=0,D=D.replace(".",""),he=new N(T),re=he.pow(D.length-Ie),Gt=ut,he.c=A(m(Di(re.c),re.e,"0"),10,O,k),he.e=he.c.length),le=A(D,T,O,W?(K=oe,k):(K=k,oe)),ct=ut=le.length;le[--ut]==0;le.pop());if(!le[0])return K.charAt(0);if(Ie<0?--ct:(re.c=le,re.e=ct,re.s=I,re=r(re,he,je,Te,O),le=re.c,Ft=re.r,ct=re.e),tt=ct+je+1,Ie=le[tt],ut=O/2,Ft=Ft||tt<0||le[tt+1]!=null,Ft=Te<4?(Ie!=null||Ft)&&(Te==0||Te==(re.s<0?3:2)):Ie>ut||Ie==ut&&(Te==4||Ft||Te==6&&le[tt-1]&1||Te==(re.s<0?8:7)),tt<1||!le[0])D=Ft?m(K.charAt(1),-je,K.charAt(0)):K.charAt(0);else{if(le.length=tt,Ft)for(--O;++le[--tt]>O;)le[tt]=0,tt||(++ct,le=[1].concat(le));for(ut=le.length;!le[--ut];);for(Ie=0,D="";Ie<=ut;D+=K.charAt(le[Ie++]));D=m(D,ct,K.charAt(0))}return D}}(),r=function(){function k(T,O,I){var W,K,tt,ct,ut=0,Ft=T.length,re=O%yn,le=O/yn|0;for(T=T.slice();Ft--;)tt=T[Ft]%yn,ct=T[Ft]/yn|0,W=le*tt+ct*re,K=re*tt+W%yn*yn+ut,ut=(K/I|0)+(W/yn|0)+le*ct,T[Ft]=K%I;return ut&&(T=[ut].concat(T)),T}function A(T,O,I,W){var K,tt;if(I!=W)tt=I>W?1:-1;else for(K=tt=0;K<I;K++)if(T[K]!=O[K]){tt=T[K]>O[K]?1:-1;break}return tt}function D(T,O,I,W){for(var K=0;I--;)T[I]-=K,K=T[I]<O[I]?1:0,T[I]=K*W+T[I]-O[I];for(;!T[0]&&T.length>1;T.splice(0,1));}return function(T,O,I,W,K){var tt,ct,ut,Ft,re,le,he,Ie,je,Te,Ue,Ci,Ua,Ru,Ou,Bn,Eo,ln=T.s==O.s?1:-1,Ri=T.c,Qe=O.c;if(!Ri||!Ri[0]||!Qe||!Qe[0])return new N(!T.s||!O.s||(Ri?Qe&&Ri[0]==Qe[0]:!Qe)?NaN:Ri&&Ri[0]==0||!Qe?ln*0:ln/0);for(Ie=new N(ln),je=Ie.c=[],ct=T.e-O.e,ln=I+ct+1,K||(K=Ki,ct=Ti(T.e/ge)-Ti(O.e/ge),ln=ln/ge|0),ut=0;Qe[ut]==(Ri[ut]||0);ut++);if(Qe[ut]>(Ri[ut]||0)&&ct--,ln<0)je.push(1),Ft=!0;else{for(Ru=Ri.length,Bn=Qe.length,ut=0,ln+=2,re=di(K/(Qe[0]+1)),re>1&&(Qe=k(Qe,re,K),Ri=k(Ri,re,K),Bn=Qe.length,Ru=Ri.length),Ua=Bn,Te=Ri.slice(0,Bn),Ue=Te.length;Ue<Bn;Te[Ue++]=0);Eo=Qe.slice(),Eo=[0].concat(Eo),Ou=Qe[0],Qe[1]>=K/2&&Ou++;do{if(re=0,tt=A(Qe,Te,Bn,Ue),tt<0){if(Ci=Te[0],Bn!=Ue&&(Ci=Ci*K+(Te[1]||0)),re=di(Ci/Ou),re>1)for(re>=K&&(re=K-1),le=k(Qe,re,K),he=le.length,Ue=Te.length;A(le,Te,he,Ue)==1;)re--,D(le,Bn<he?Eo:Qe,he,K),he=le.length,tt=1;else re==0&&(tt=re=1),le=Qe.slice(),he=le.length;if(he<Ue&&(le=[0].concat(le)),D(Te,le,Ue,K),Ue=Te.length,tt==-1)for(;A(Qe,Te,Bn,Ue)<1;)re++,D(Te,Bn<Ue?Eo:Qe,Ue,K),Ue=Te.length}else tt===0&&(re++,Te=[0]);je[ut++]=re,Te[0]?Te[Ue++]=Ri[Ua]||0:(Te=[Ri[Ua]],Ue=1)}while((Ua++<Ru||Te[0]!=null)&&ln--);Ft=Te[0]!=null,je[0]||je.splice(0,1)}if(K==Ki){for(ut=1,ln=je[0];ln>=10;ln/=10,ut++);st(Ie,I+(Ie.e=ut+ct*ge-1)+1,W,Ft)}else Ie.e=ct,Ie.r=+Ft;return Ie}}();function q(k,A,D,T){var O,I,W,K,tt;if(D==null?D=b:e(D,0,8),!k.c)return k.toString();if(O=k.c[0],W=k.e,A==null)tt=Di(k.c),tt=T==1||T==2&&(W<=E||W>=S)?c(tt,W):m(tt,W,"0");else if(k=st(new N(k),A,D),I=k.e,tt=Di(k.c),K=tt.length,T==1||T==2&&(A<=I||I<=E)){for(;K<A;tt+="0",K++);tt=c(tt,I)}else if(A-=W,tt=m(tt,I,"0"),I+1>K){if(--A>0)for(tt+=".";A--;tt+="0");}else if(A+=I-K,A>0)for(I+1==K&&(tt+=".");A--;tt+="0");return k.s<0&&O?"-"+tt:tt}function it(k,A){for(var D,T,O=1,I=new N(k[0]);O<k.length;O++)T=new N(k[O]),(!T.s||(D=Kn(I,T))===A||D===0&&I.s===A)&&(I=T);return I}function vt(k,A,D){for(var T=1,O=A.length;!A[--O];A.pop());for(O=A[0];O>=10;O/=10,T++);return(D=T+D*ge-1)>F?k.c=k.e=null:D<j?k.c=[k.e=0]:(k.e=D,k.c=A),k}u=function(){var k=/^(-?)0([xbo])(?=\w[\w.]*$)/i,A=/^([^.]+)\.$/,D=/^\.([^.]+)$/,T=/^-?(Infinity|NaN)$/,O=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(I,W,K,tt){var ct,ut=K?W:W.replace(O,"");if(T.test(ut))I.s=isNaN(ut)?null:ut<0?-1:1;else{if(!K&&(ut=ut.replace(k,function(Ft,re,le){return ct=(le=le.toLowerCase())=="x"?16:le=="b"?2:8,!tt||tt==ct?re:Ft}),tt&&(ct=tt,ut=ut.replace(A,"$1").replace(D,"0.$1")),W!=ut))return new N(ut,ct);if(N.DEBUG)throw Error(gi+"Not a"+(tt?" base "+tt:"")+" number: "+W);I.s=null}I.c=I.e=null}}();function st(k,A,D,T){var O,I,W,K,tt,ct,ut,Ft=k.c,re=Cs;if(Ft){t:{for(O=1,K=Ft[0];K>=10;K/=10,O++);if(I=A-O,I<0)I+=ge,W=A,tt=Ft[ct=0],ut=di(tt/re[O-W-1]%10);else if(ct=dr((I+1)/ge),ct>=Ft.length)if(T){for(;Ft.length<=ct;Ft.push(0));tt=ut=0,O=1,I%=ge,W=I-ge+1}else break t;else{for(tt=K=Ft[ct],O=1;K>=10;K/=10,O++);I%=ge,W=I-ge+O,ut=W<0?0:di(tt/re[O-W-1]%10)}if(T=T||A<0||Ft[ct+1]!=null||(W<0?tt:tt%re[O-W-1]),T=D<4?(ut||T)&&(D==0||D==(k.s<0?3:2)):ut>5||ut==5&&(D==4||T||D==6&&(I>0?W>0?tt/re[O-W]:0:Ft[ct-1])%10&1||D==(k.s<0?8:7)),A<1||!Ft[0])return Ft.length=0,T?(A-=k.e+1,Ft[0]=re[(ge-A%ge)%ge],k.e=-A||0):Ft[0]=k.e=0,k;if(I==0?(Ft.length=ct,K=1,ct--):(Ft.length=ct+1,K=re[ge-I],Ft[ct]=W>0?di(tt/re[O-W]%re[W])*K:0),T)for(;;)if(ct==0){for(I=1,W=Ft[0];W>=10;W/=10,I++);for(W=Ft[0]+=K,K=1;W>=10;W/=10,K++);I!=K&&(k.e++,Ft[0]==Ki&&(Ft[0]=1));break}else{if(Ft[ct]+=K,Ft[ct]!=Ki)break;Ft[ct--]=0,K=1}for(I=Ft.length;Ft[--I]===0;Ft.pop());}k.e>F?k.c=k.e=null:k.e<j&&(k.c=[k.e=0])}return k}function ft(k){var A,D=k.e;return D===null?k.toString():(A=Di(k.c),A=D<=E||D>=S?c(A,D):m(A,D,"0"),k.s<0?"-"+A:A)}return d.absoluteValue=d.abs=function(){var k=new N(this);return k.s<0&&(k.s=1),k},d.comparedTo=function(k,A){return Kn(this,new N(k,A))},d.decimalPlaces=d.dp=function(k,A){var D,T,O,I=this;if(k!=null)return e(k,0,wi),A==null?A=b:e(A,0,8),st(new N(I),k+I.e+1,A);if(!(D=I.c))return null;if(T=((O=D.length-1)-Ti(this.e/ge))*ge,O=D[O])for(;O%10==0;O/=10,T--);return T<0&&(T=0),T},d.dividedBy=d.div=function(k,A){return r(this,new N(k,A),_,b)},d.dividedToIntegerBy=d.idiv=function(k,A){return r(this,new N(k,A),0,1)},d.exponentiatedBy=d.pow=function(k,A){var D,T,O,I,W,K,tt,ct,ut,Ft=this;if(k=new N(k),k.c&&!k.isInteger())throw Error(gi+"Exponent not an integer: "+ft(k));if(A!=null&&(A=new N(A)),K=k.e>14,!Ft.c||!Ft.c[0]||Ft.c[0]==1&&!Ft.e&&Ft.c.length==1||!k.c||!k.c[0])return ut=new N(Math.pow(+ft(Ft),K?k.s*(2-o(k)):+ft(k))),A?ut.mod(A):ut;if(tt=k.s<0,A){if(A.c?!A.c[0]:!A.s)return new N(NaN);T=!tt&&Ft.isInteger()&&A.isInteger(),T&&(Ft=Ft.mod(A))}else{if(k.e>9&&(Ft.e>0||Ft.e<-1||(Ft.e==0?Ft.c[0]>1||K&&Ft.c[1]>=24e7:Ft.c[0]<8e13||K&&Ft.c[0]<=9999975e7)))return I=Ft.s<0&&o(k)?-0:0,Ft.e>-1&&(I=1/I),new N(tt?1/I:I);Gt&&(I=dr(Gt/ge+2))}for(K?(D=new N(.5),tt&&(k.s=1),ct=o(k)):(O=Math.abs(+ft(k)),ct=O%2),ut=new N(g);;){if(ct){if(ut=ut.times(Ft),!ut.c)break;I?ut.c.length>I&&(ut.c.length=I):T&&(ut=ut.mod(A))}if(O){if(O=di(O/2),O===0)break;ct=O%2}else if(k=k.times(D),st(k,k.e+1,1),k.e>14)ct=o(k);else{if(O=+ft(k),O===0)break;ct=O%2}Ft=Ft.times(Ft),I?Ft.c&&Ft.c.length>I&&(Ft.c.length=I):T&&(Ft=Ft.mod(A))}return T?ut:(tt&&(ut=g.div(ut)),A?ut.mod(A):I?st(ut,Gt,b,W):ut)},d.integerValue=function(k){var A=new N(this);return k==null?k=b:e(k,0,8),st(A,A.e+1,k)},d.isEqualTo=d.eq=function(k,A){return Kn(this,new N(k,A))===0},d.isFinite=function(){return!!this.c},d.isGreaterThan=d.gt=function(k,A){return Kn(this,new N(k,A))>0},d.isGreaterThanOrEqualTo=d.gte=function(k,A){return(A=Kn(this,new N(k,A)))===1||A===0},d.isInteger=function(){return!!this.c&&Ti(this.e/ge)>this.c.length-2},d.isLessThan=d.lt=function(k,A){return Kn(this,new N(k,A))<0},d.isLessThanOrEqualTo=d.lte=function(k,A){return(A=Kn(this,new N(k,A)))===-1||A===0},d.isNaN=function(){return!this.s},d.isNegative=function(){return this.s<0},d.isPositive=function(){return this.s>0},d.isZero=function(){return!!this.c&&this.c[0]==0},d.minus=function(k,A){var D,T,O,I,W=this,K=W.s;if(k=new N(k,A),A=k.s,!K||!A)return new N(NaN);if(K!=A)return k.s=-A,W.plus(k);var tt=W.e/ge,ct=k.e/ge,ut=W.c,Ft=k.c;if(!tt||!ct){if(!ut||!Ft)return ut?(k.s=-A,k):new N(Ft?W:NaN);if(!ut[0]||!Ft[0])return Ft[0]?(k.s=-A,k):new N(ut[0]?W:b==3?-0:0)}if(tt=Ti(tt),ct=Ti(ct),ut=ut.slice(),K=tt-ct){for((I=K<0)?(K=-K,O=ut):(ct=tt,O=Ft),O.reverse(),A=K;A--;O.push(0));O.reverse()}else for(T=(I=(K=ut.length)<(A=Ft.length))?K:A,K=A=0;A<T;A++)if(ut[A]!=Ft[A]){I=ut[A]<Ft[A];break}if(I&&(O=ut,ut=Ft,Ft=O,k.s=-k.s),A=(T=Ft.length)-(D=ut.length),A>0)for(;A--;ut[D++]=0);for(A=Ki-1;T>K;){if(ut[--T]<Ft[T]){for(D=T;D&&!ut[--D];ut[D]=A);--ut[D],ut[T]+=Ki}ut[T]-=Ft[T]}for(;ut[0]==0;ut.splice(0,1),--ct);return ut[0]?vt(k,ut,ct):(k.s=b==3?-1:1,k.c=[k.e=0],k)},d.modulo=d.mod=function(k,A){var D,T,O=this;return k=new N(k,A),!O.c||!k.s||k.c&&!k.c[0]?new N(NaN):!k.c||O.c&&!O.c[0]?new N(O):(yt==9?(T=k.s,k.s=1,D=r(O,k,0,3),k.s=T,D.s*=T):D=r(O,k,0,yt),k=O.minus(D.times(k)),!k.c[0]&&yt==1&&(k.s=O.s),k)},d.multipliedBy=d.times=function(k,A){var D,T,O,I,W,K,tt,ct,ut,Ft,re,le,he,Ie,je,Te=this,Ue=Te.c,Ci=(k=new N(k,A)).c;if(!Ue||!Ci||!Ue[0]||!Ci[0])return!Te.s||!k.s||Ue&&!Ue[0]&&!Ci||Ci&&!Ci[0]&&!Ue?k.c=k.e=k.s=null:(k.s*=Te.s,!Ue||!Ci?k.c=k.e=null:(k.c=[0],k.e=0)),k;for(T=Ti(Te.e/ge)+Ti(k.e/ge),k.s*=Te.s,tt=Ue.length,Ft=Ci.length,tt<Ft&&(he=Ue,Ue=Ci,Ci=he,O=tt,tt=Ft,Ft=O),O=tt+Ft,he=[];O--;he.push(0));for(Ie=Ki,je=yn,O=Ft;--O>=0;){for(D=0,re=Ci[O]%je,le=Ci[O]/je|0,W=tt,I=O+W;I>O;)ct=Ue[--W]%je,ut=Ue[W]/je|0,K=le*ct+ut*re,ct=re*ct+K%je*je+he[I]+D,D=(ct/Ie|0)+(K/je|0)+le*ut,he[I--]=ct%Ie;he[I]=D}return D?++T:he.splice(0,1),vt(k,he,T)},d.negated=function(){var k=new N(this);return k.s=-k.s||null,k},d.plus=function(k,A){var D,T=this,O=T.s;if(k=new N(k,A),A=k.s,!O||!A)return new N(NaN);if(O!=A)return k.s=-A,T.minus(k);var I=T.e/ge,W=k.e/ge,K=T.c,tt=k.c;if(!I||!W){if(!K||!tt)return new N(O/0);if(!K[0]||!tt[0])return tt[0]?k:new N(K[0]?T:O*0)}if(I=Ti(I),W=Ti(W),K=K.slice(),O=I-W){for(O>0?(W=I,D=tt):(O=-O,D=K),D.reverse();O--;D.push(0));D.reverse()}for(O=K.length,A=tt.length,O-A<0&&(D=tt,tt=K,K=D,A=O),O=0;A;)O=(K[--A]=K[A]+tt[A]+O)/Ki|0,K[A]=Ki===K[A]?0:K[A]%Ki;return O&&(K=[O].concat(K),++W),vt(k,K,W)},d.precision=d.sd=function(k,A){var D,T,O,I=this;if(k!=null&&k!==!!k)return e(k,1,wi),A==null?A=b:e(A,0,8),st(new N(I),k,A);if(!(D=I.c))return null;if(O=D.length-1,T=O*ge+1,O=D[O]){for(;O%10==0;O/=10,T--);for(O=D[0];O>=10;O/=10,T++);}return k&&I.e+1>T&&(T=I.e+1),T},d.shiftedBy=function(k){return e(k,-9007199254740991,xo),this.times("1e"+k)},d.squareRoot=d.sqrt=function(){var k,A,D,T,O,I=this,W=I.c,K=I.s,tt=I.e,ct=_+4,ut=new N("0.5");if(K!==1||!W||!W[0])return new N(!K||K<0&&(!W||W[0])?NaN:W?I:1/0);if(K=Math.sqrt(+ft(I)),K==0||K==1/0?(A=Di(W),(A.length+tt)%2==0&&(A+="0"),K=Math.sqrt(+A),tt=Ti((tt+1)/2)-(tt<0||tt%2),K==1/0?A="5e"+tt:(A=K.toExponential(),A=A.slice(0,A.indexOf("e")+1)+tt),D=new N(A)):D=new N(K+""),D.c[0]){for(tt=D.e,K=tt+ct,K<3&&(K=0);;)if(O=D,D=ut.times(O.plus(r(I,O,ct,1))),Di(O.c).slice(0,K)===(A=Di(D.c)).slice(0,K))if(D.e<tt&&--K,A=A.slice(K-3,K+1),A=="9999"||!T&&A=="4999"){if(!T&&(st(O,O.e+_+2,0),O.times(O).eq(I))){D=O;break}ct+=4,K+=4,T=1}else{(!+A||!+A.slice(1)&&A.charAt(0)=="5")&&(st(D,D.e+_+2,1),k=!D.times(D).eq(I));break}}return st(D,D.e+_+1,b,k)},d.toExponential=function(k,A){return k!=null&&(e(k,0,wi),k++),q(this,k,A,1)},d.toFixed=function(k,A){return k!=null&&(e(k,0,wi),k=k+this.e+1),q(this,k,A)},d.toFormat=function(k,A,D){var T,O=this;if(D==null)k!=null&&A&&typeof A=="object"?(D=A,A=null):k&&typeof k=="object"?(D=k,k=A=null):D=Yt;else if(typeof D!="object")throw Error(gi+"Argument not an object: "+D);if(T=O.toFixed(k,A),O.c){var I,W=T.split("."),K=+D.groupSize,tt=+D.secondaryGroupSize,ct=D.groupSeparator||"",ut=W[0],Ft=W[1],re=O.s<0,le=re?ut.slice(1):ut,he=le.length;if(tt&&(I=K,K=tt,tt=I,he-=I),K>0&&he>0){for(I=he%K||K,ut=le.substr(0,I);I<he;I+=K)ut+=ct+le.substr(I,K);tt>0&&(ut+=ct+le.slice(I)),re&&(ut="-"+ut)}T=Ft?ut+(D.decimalSeparator||"")+((tt=+D.fractionGroupSize)?Ft.replace(new RegExp("\\d{"+tt+"}\\B","g"),"$&"+(D.fractionGroupSeparator||"")):Ft):ut}return(D.prefix||"")+T+(D.suffix||"")},d.toFraction=function(k){var A,D,T,O,I,W,K,tt,ct,ut,Ft,re,le=this,he=le.c;if(k!=null&&(K=new N(k),!K.isInteger()&&(K.c||K.s!==1)||K.lt(g)))throw Error(gi+"Argument "+(K.isInteger()?"out of range: ":"not an integer: ")+ft(K));if(!he)return new N(le);for(A=new N(g),ct=D=new N(g),T=tt=new N(g),re=Di(he),I=A.e=re.length-le.e-1,A.c[0]=Cs[(W=I%ge)<0?ge+W:W],k=!k||K.comparedTo(A)>0?I>0?A:ct:K,W=F,F=1/0,K=new N(re),tt.c[0]=0;ut=r(K,A,0,1),O=D.plus(ut.times(T)),O.comparedTo(k)!=1;)D=T,T=O,ct=tt.plus(ut.times(O=ct)),tt=O,A=K.minus(ut.times(O=A)),K=O;return O=r(k.minus(D),T,0,1),tt=tt.plus(O.times(ct)),D=D.plus(O.times(T)),tt.s=ct.s=le.s,I=I*2,Ft=r(ct,T,I,b).minus(le).abs().comparedTo(r(tt,D,I,b).minus(le).abs())<1?[ct,T]:[tt,D],F=W,Ft},d.toNumber=function(){return+ft(this)},d.toPrecision=function(k,A){return k!=null&&e(k,1,wi),q(this,k,A,2)},d.toString=function(k){var A,D=this,T=D.s,O=D.e;return O===null?T?(A="Infinity",T<0&&(A="-"+A)):A="NaN":(k==null?A=O<=E||O>=S?c(Di(D.c),O):m(Di(D.c),O,"0"):k===10&&Me?(D=st(new N(D),_+O+1,b),A=m(Di(D.c),D.e,"0")):(e(k,2,oe.length,"Base"),A=a(m(Di(D.c),O,"0"),10,k,T,!0)),T<0&&D.c[0]&&(A="-"+A)),A},d.valueOf=d.toJSON=function(){return ft(this)},d._isBigNumber=!0,d[Symbol.toStringTag]="BigNumber",d[Symbol.for("nodejs.util.inspect.custom")]=d.valueOf,i!=null&&N.set(i),N}function Ti(i){var r=i|0;return i>0||i===r?r:r-1}function Di(i){for(var r,a,u=1,d=i.length,g=i[0]+"";u<d;){for(r=i[u++]+"",a=ge-r.length;a--;r="0"+r);g+=r}for(d=g.length;g.charCodeAt(--d)===48;);return g.slice(0,d+1||1)}function Kn(i,r){var a,u,d=i.c,g=r.c,_=i.s,b=r.s,E=i.e,S=r.e;if(!_||!b)return null;if(a=d&&!d[0],u=g&&!g[0],a||u)return a?u?0:-b:_;if(_!=b)return _;if(a=_<0,u=E==S,!d||!g)return u?0:!d^a?1:-1;if(!u)return E>S^a?1:-1;for(b=(E=d.length)<(S=g.length)?E:S,_=0;_<b;_++)if(d[_]!=g[_])return d[_]>g[_]^a?1:-1;return E==S?0:E>S^a?1:-1}function e(i,r,a,u){if(i<r||i>a||i!==di(i))throw Error(gi+(u||"Argument")+(typeof i=="number"?i<r||i>a?" out of range: ":" not an integer: ":" not a primitive number: ")+String(i))}function o(i){var r=i.c.length-1;return Ti(i.e/ge)==r&&i.c[r]%2!=0}function c(i,r){return(i.length>1?i.charAt(0)+"."+i.slice(1):i)+(r<0?"e":"e+")+r}function m(i,r,a){var u,d;if(r<0){for(d=a+".";++r;d+=a);i=d+i}else if(u=i.length,++r>u){for(d=a,r-=u;--r;d+=a);i+=d}else r<u&&(i=i.slice(0,r)+"."+i.slice(r));return i}var x=Oa(),B=x,Z=class{constructor(i){ue(this,"key");ue(this,"left",null);ue(this,"right",null);this.key=i}},lt=class extends Z{constructor(i){super(i)}},wt=class{constructor(){ue(this,"size",0);ue(this,"modificationCount",0);ue(this,"splayCount",0)}splay(i){let r=this.root;if(r==null)return this.compare(i,i),-1;let a=null,u=null,d=null,g=null,_=r,b=this.compare,E;for(;;)if(E=b(_.key,i),E>0){let S=_.left;if(S==null||(E=b(S.key,i),E>0&&(_.left=S.right,S.right=_,_=S,S=_.left,S==null)))break;a==null?u=_:a.left=_,a=_,_=S}else if(E<0){let S=_.right;if(S==null||(E=b(S.key,i),E<0&&(_.right=S.left,S.left=_,_=S,S=_.right,S==null)))break;d==null?g=_:d.right=_,d=_,_=S}else break;return d!=null&&(d.right=_.left,_.left=g),a!=null&&(a.left=_.right,_.right=u),this.root!==_&&(this.root=_,this.splayCount++),E}splayMin(i){let r=i,a=r.left;for(;a!=null;){let u=a;r.left=u.right,u.right=r,r=u,a=r.left}return r}splayMax(i){let r=i,a=r.right;for(;a!=null;){let u=a;r.right=u.left,u.left=r,r=u,a=r.right}return r}_delete(i){if(this.root==null||this.splay(i)!=0)return null;let r=this.root,a=r,u=r.left;if(this.size--,u==null)this.root=r.right;else{let d=r.right;r=this.splayMax(u),r.right=d,this.root=r}return this.modificationCount++,a}addNewRoot(i,r){this.size++,this.modificationCount++;let a=this.root;if(a==null){this.root=i;return}r<0?(i.left=a,i.right=a.right,a.right=null):(i.right=a,i.left=a.left,a.left=null),this.root=i}_first(){let i=this.root;return i==null?null:(this.root=this.splayMin(i),this.root)}_last(){let i=this.root;return i==null?null:(this.root=this.splayMax(i),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(i){return this.validKey(i)&&this.splay(i)==0}defaultCompare(){return(i,r)=>i<r?-1:i>r?1:0}wrap(){return{getRoot:()=>this.root,setRoot:i=>{this.root=i},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:i=>{this.splayCount=i},splay:i=>this.splay(i),has:i=>this.has(i)}}},zt=class Do extends wt{constructor(a,u){super();ue(this,"root",null);ue(this,"compare");ue(this,"validKey");ue(this,oh,"[object Set]");this.compare=a??this.defaultCompare(),this.validKey=u??(d=>d!=null&&d!=null)}delete(a){return this.validKey(a)?this._delete(a)!=null:!1}deleteAll(a){for(let u of a)this.delete(u)}forEach(a){let u=this[Symbol.iterator](),d;for(;d=u.next(),!d.done;)a(d.value,d.value,this)}add(a){let u=this.splay(a);return u!=0&&this.addNewRoot(new lt(a),u),this}addAndReturn(a){let u=this.splay(a);return u!=0&&this.addNewRoot(new lt(a),u),this.root.key}addAll(a){for(let u of a)this.add(u)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(a){if(a==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(a)<0)return this.root.key;let u=this.root.left;if(u==null)return null;let d=u.right;for(;d!=null;)u=d,d=u.right;return u.key}firstAfter(a){if(a==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(a)>0)return this.root.key;let u=this.root.right;if(u==null)return null;let d=u.left;for(;d!=null;)u=d,d=u.left;return u.key}retainAll(a){let u=new Do(this.compare,this.validKey),d=this.modificationCount;for(let g of a){if(d!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(g)&&this.splay(g)==0&&u.add(this.root.key)}u.size!=this.size&&(this.root=u.root,this.size=u.size,this.modificationCount++)}lookup(a){return!this.validKey(a)||this.splay(a)!=0?null:this.root.key}intersection(a){let u=new Do(this.compare,this.validKey);for(let d of this)a.has(d)&&u.add(d);return u}difference(a){let u=new Do(this.compare,this.validKey);for(let d of this)a.has(d)||u.add(d);return u}union(a){let u=this.clone();return u.addAll(a),u}clone(){let a=new Do(this.compare,this.validKey);return a.size=this.size,a.root=this.copyNode(this.root),a}copyNode(a){if(a==null)return null;function u(g,_){let b,E;do{if(b=g.left,E=g.right,b!=null){let S=new lt(b.key);_.left=S,u(b,S)}if(E!=null){let S=new lt(E.key);_.right=S,g=E,_=S}}while(E!=null)}let d=new lt(a.key);return u(a,d),d}toSet(){return this.clone()}entries(){return new Le(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(ah=Symbol.iterator,oh=Symbol.toStringTag,ah)](){return new fe(this.wrap())}},ee=class{constructor(i){ue(this,"tree");ue(this,"path",new Array);ue(this,"modificationCount",null);ue(this,"splayCount");this.tree=i,this.splayCount=i.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let i=this.path[this.path.length-1];return this.getValue(i)}rebuildPath(i){this.path.splice(0,this.path.length),this.tree.splay(i),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(i){for(;i!=null;)this.path.push(i),i=i.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let a=this.tree.getRoot();for(;a!=null;)this.path.push(a),a=a.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let i=this.path[this.path.length-1],r=i.right;if(r!=null){for(;r!=null;)this.path.push(r),r=r.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===i;)i=this.path.pop();return this.path.length>0}},fe=class extends ee{getValue(i){return i.key}},Le=class extends ee{getValue(i){return[i.key,i.key]}},_i=i=>i,si=i=>{if(i){let r=new zt(Ls(i)),a=new zt(Ls(i)),u=(g,_)=>_.addAndReturn(g),d=g=>({x:u(g.x,r),y:u(g.y,a)});return d({x:new B(0),y:new B(0)}),d}return _i},Li=i=>({set:r=>{Ke=Li(r)},reset:()=>Li(i),compare:Ls(i),snap:si(i),orient:Fr(i)}),Ke=Li(),on=(i,r)=>i.ll.x.isLessThanOrEqualTo(r.x)&&r.x.isLessThanOrEqualTo(i.ur.x)&&i.ll.y.isLessThanOrEqualTo(r.y)&&r.y.isLessThanOrEqualTo(i.ur.y),wo=(i,r)=>{if(r.ur.x.isLessThan(i.ll.x)||i.ur.x.isLessThan(r.ll.x)||r.ur.y.isLessThan(i.ll.y)||i.ur.y.isLessThan(r.ll.y))return null;let a=i.ll.x.isLessThan(r.ll.x)?r.ll.x:i.ll.x,u=i.ur.x.isLessThan(r.ur.x)?i.ur.x:r.ur.x,d=i.ll.y.isLessThan(r.ll.y)?r.ll.y:i.ll.y,g=i.ur.y.isLessThan(r.ur.y)?i.ur.y:r.ur.y;return{ll:{x:a,y:d},ur:{x:u,y:g}}},Es=(i,r)=>i.x.times(r.y).minus(i.y.times(r.x)),Ia=(i,r)=>i.x.times(r.x).plus(i.y.times(r.y)),zr=i=>Ia(i,i).sqrt(),Su=(i,r,a)=>{let u={x:r.x.minus(i.x),y:r.y.minus(i.y)},d={x:a.x.minus(i.x),y:a.y.minus(i.y)};return Es(d,u).div(zr(d)).div(zr(u))},Fa=(i,r,a)=>{let u={x:r.x.minus(i.x),y:r.y.minus(i.y)},d={x:a.x.minus(i.x),y:a.y.minus(i.y)};return Ia(d,u).div(zr(d)).div(zr(u))},Je=(i,r,a)=>r.y.isZero()?null:{x:i.x.plus(r.x.div(r.y).times(a.minus(i.y))),y:a},Nr=(i,r,a)=>r.x.isZero()?null:{x:a,y:i.y.plus(r.y.div(r.x).times(a.minus(i.x)))},Bu=(i,r,a,u)=>{if(r.x.isZero())return Nr(a,u,i.x);if(u.x.isZero())return Nr(i,r,a.x);if(r.y.isZero())return Je(a,u,i.y);if(u.y.isZero())return Je(i,r,a.y);let d=Es(r,u);if(d.isZero())return null;let g={x:a.x.minus(i.x),y:a.y.minus(i.y)},_=Es(g,r).div(d),b=Es(g,u).div(d),E=i.x.plus(b.times(r.x)),S=a.x.plus(_.times(u.x)),j=i.y.plus(b.times(r.y)),F=a.y.plus(_.times(u.y)),ht=E.plus(S).div(2),yt=j.plus(F).div(2);return{x:ht,y:yt}},an=class jp{constructor(r,a){ue(this,"point");ue(this,"isLeft");ue(this,"segment");ue(this,"otherSE");ue(this,"consumedBy");r.events===void 0?r.events=[this]:r.events.push(this),this.point=r,this.isLeft=a}static compare(r,a){let u=jp.comparePoints(r.point,a.point);return u!==0?u:(r.point!==a.point&&r.link(a),r.isLeft!==a.isLeft?r.isLeft?1:-1:fr.compare(r.segment,a.segment))}static comparePoints(r,a){return r.x.isLessThan(a.x)?-1:r.x.isGreaterThan(a.x)?1:r.y.isLessThan(a.y)?-1:r.y.isGreaterThan(a.y)?1:0}link(r){if(r.point===this.point)throw new Error("Tried to link already linked events");let a=r.point.events;for(let u=0,d=a.length;u<d;u++){let g=a[u];this.point.events.push(g),g.point=this.point}this.checkForConsuming()}checkForConsuming(){let r=this.point.events.length;for(let a=0;a<r;a++){let u=this.point.events[a];if(u.segment.consumedBy===void 0)for(let d=a+1;d<r;d++){let g=this.point.events[d];g.consumedBy===void 0&&u.otherSE.point.events===g.otherSE.point.events&&u.segment.consume(g.segment)}}}getAvailableLinkedEvents(){let r=[];for(let a=0,u=this.point.events.length;a<u;a++){let d=this.point.events[a];d!==this&&!d.segment.ringOut&&d.segment.isInResult()&&r.push(d)}return r}getLeftmostComparator(r){let a=new Map,u=d=>{let g=d.otherSE;a.set(d,{sine:Su(this.point,r.point,g.point),cosine:Fa(this.point,r.point,g.point)})};return(d,g)=>{a.has(d)||u(d),a.has(g)||u(g);let{sine:_,cosine:b}=a.get(d),{sine:E,cosine:S}=a.get(g);return _.isGreaterThanOrEqualTo(0)&&E.isGreaterThanOrEqualTo(0)?b.isLessThan(S)?1:b.isGreaterThan(S)?-1:0:_.isLessThan(0)&&E.isLessThan(0)?b.isLessThan(S)?-1:b.isGreaterThan(S)?1:0:E.isLessThan(_)?-1:E.isGreaterThan(_)?1:0}}},Au=0,fr=class rl{constructor(r,a,u,d){ue(this,"id");ue(this,"leftSE");ue(this,"rightSE");ue(this,"rings");ue(this,"windings");ue(this,"ringOut");ue(this,"consumedBy");ue(this,"prev");ue(this,"_prevInResult");ue(this,"_beforeState");ue(this,"_afterState");ue(this,"_isInResult");this.id=++Au,this.leftSE=r,r.segment=this,r.otherSE=a,this.rightSE=a,a.segment=this,a.otherSE=r,this.rings=u,this.windings=d}static compare(r,a){let u=r.leftSE.point.x,d=a.leftSE.point.x,g=r.rightSE.point.x,_=a.rightSE.point.x;if(_.isLessThan(u))return 1;if(g.isLessThan(d))return-1;let b=r.leftSE.point.y,E=a.leftSE.point.y,S=r.rightSE.point.y,j=a.rightSE.point.y;if(u.isLessThan(d)){if(E.isLessThan(b)&&E.isLessThan(S))return 1;if(E.isGreaterThan(b)&&E.isGreaterThan(S))return-1;let F=r.comparePoint(a.leftSE.point);if(F<0)return 1;if(F>0)return-1;let ht=a.comparePoint(r.rightSE.point);return ht!==0?ht:-1}if(u.isGreaterThan(d)){if(b.isLessThan(E)&&b.isLessThan(j))return-1;if(b.isGreaterThan(E)&&b.isGreaterThan(j))return 1;let F=a.comparePoint(r.leftSE.point);if(F!==0)return F;let ht=r.comparePoint(a.rightSE.point);return ht<0?1:ht>0?-1:1}if(b.isLessThan(E))return-1;if(b.isGreaterThan(E))return 1;if(g.isLessThan(_)){let F=a.comparePoint(r.rightSE.point);if(F!==0)return F}if(g.isGreaterThan(_)){let F=r.comparePoint(a.rightSE.point);if(F<0)return 1;if(F>0)return-1}if(!g.eq(_)){let F=S.minus(b),ht=g.minus(u),yt=j.minus(E),Gt=_.minus(d);if(F.isGreaterThan(ht)&&yt.isLessThan(Gt))return 1;if(F.isLessThan(ht)&&yt.isGreaterThan(Gt))return-1}return g.isGreaterThan(_)?1:g.isLessThan(_)||S.isLessThan(j)?-1:S.isGreaterThan(j)?1:r.id<a.id?-1:r.id>a.id?1:0}static fromRing(r,a,u){let d,g,_,b=an.comparePoints(r,a);if(b<0)d=r,g=a,_=1;else if(b>0)d=a,g=r,_=-1;else throw new Error(`Tried to create degenerate segment at [${r.x}, ${r.y}]`);let E=new an(d,!0),S=new an(g,!1);return new rl(E,S,[u],[_])}replaceRightSE(r){this.rightSE=r,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let r=this.leftSE.point.y,a=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:r.isLessThan(a)?r:a},ur:{x:this.rightSE.point.x,y:r.isGreaterThan(a)?r:a}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(r){return r.x.eq(this.leftSE.point.x)&&r.y.eq(this.leftSE.point.y)||r.x.eq(this.rightSE.point.x)&&r.y.eq(this.rightSE.point.y)}comparePoint(r){return Ke.orient(this.leftSE.point,r,this.rightSE.point)}getIntersection(r){let a=this.bbox(),u=r.bbox(),d=wo(a,u);if(d===null)return null;let g=this.leftSE.point,_=this.rightSE.point,b=r.leftSE.point,E=r.rightSE.point,S=on(a,b)&&this.comparePoint(b)===0,j=on(u,g)&&r.comparePoint(g)===0,F=on(a,E)&&this.comparePoint(E)===0,ht=on(u,_)&&r.comparePoint(_)===0;if(j&&S)return ht&&!F?_:!ht&&F?E:null;if(j)return F&&g.x.eq(E.x)&&g.y.eq(E.y)?null:g;if(S)return ht&&_.x.eq(b.x)&&_.y.eq(b.y)?null:b;if(ht&&F)return null;if(ht)return _;if(F)return E;let yt=Bu(g,this.vector(),b,r.vector());return yt===null||!on(d,yt)?null:Ke.snap(yt)}split(r){let a=[],u=r.events!==void 0,d=new an(r,!0),g=new an(r,!1),_=this.rightSE;this.replaceRightSE(g),a.push(g),a.push(d);let b=new rl(d,_,this.rings.slice(),this.windings.slice());return an.comparePoints(b.leftSE.point,b.rightSE.point)>0&&b.swapEvents(),an.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),u&&(d.checkForConsuming(),g.checkForConsuming()),a}swapEvents(){let r=this.rightSE;this.rightSE=this.leftSE,this.leftSE=r,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let a=0,u=this.windings.length;a<u;a++)this.windings[a]*=-1}consume(r){let a=this,u=r;for(;a.consumedBy;)a=a.consumedBy;for(;u.consumedBy;)u=u.consumedBy;let d=rl.compare(a,u);if(d!==0){if(d>0){let g=a;a=u,u=g}if(a.prev===u){let g=a;a=u,u=g}for(let g=0,_=u.rings.length;g<_;g++){let b=u.rings[g],E=u.windings[g],S=a.rings.indexOf(b);S===-1?(a.rings.push(b),a.windings.push(E)):a.windings[S]+=E}u.rings=null,u.windings=null,u.consumedBy=a,u.leftSE.consumedBy=a.leftSE,u.rightSE.consumedBy=a.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let r=this.prev.consumedBy||this.prev;this._beforeState=r.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let r=this.beforeState();this._afterState={rings:r.rings.slice(0),windings:r.windings.slice(0),multiPolys:[]};let a=this._afterState.rings,u=this._afterState.windings,d=this._afterState.multiPolys;for(let b=0,E=this.rings.length;b<E;b++){let S=this.rings[b],j=this.windings[b],F=a.indexOf(S);F===-1?(a.push(S),u.push(j)):u[F]+=j}let g=[],_=[];for(let b=0,E=a.length;b<E;b++){if(u[b]===0)continue;let S=a[b],j=S.poly;if(_.indexOf(j)===-1)if(S.isExterior)g.push(j);else{_.indexOf(j)===-1&&_.push(j);let F=g.indexOf(S.poly);F!==-1&&g.splice(F,1)}}for(let b=0,E=g.length;b<E;b++){let S=g[b].multiPoly;d.indexOf(S)===-1&&d.push(S)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let r=this.beforeState().multiPolys,a=this.afterState().multiPolys;switch(za.type){case"union":{let u=r.length===0,d=a.length===0;this._isInResult=u!==d;break}case"intersection":{let u,d;r.length<a.length?(u=r.length,d=a.length):(u=a.length,d=r.length),this._isInResult=d===za.numMultiPolys&&u<d;break}case"xor":{let u=Math.abs(r.length-a.length);this._isInResult=u%2===1;break}case"difference":{let u=d=>d.length===1&&d[0].isSubject;this._isInResult=u(r)!==u(a);break}}return this._isInResult}},Lo=class{constructor(i,r,a){ue(this,"poly");ue(this,"isExterior");ue(this,"segments");ue(this,"bbox");if(!Array.isArray(i)||i.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=a,this.segments=[],typeof i[0][0]!="number"||typeof i[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let u=Ke.snap({x:new B(i[0][0]),y:new B(i[0][1])});this.bbox={ll:{x:u.x,y:u.y},ur:{x:u.x,y:u.y}};let d=u;for(let g=1,_=i.length;g<_;g++){if(typeof i[g][0]!="number"||typeof i[g][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let b=Ke.snap({x:new B(i[g][0]),y:new B(i[g][1])});b.x.eq(d.x)&&b.y.eq(d.y)||(this.segments.push(fr.fromRing(d,b,this)),b.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=b.x),b.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=b.y),b.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=b.x),b.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=b.y),d=b)}(!u.x.eq(d.x)||!u.y.eq(d.y))&&this.segments.push(fr.fromRing(d,u,this))}getSweepEvents(){let i=[];for(let r=0,a=this.segments.length;r<a;r++){let u=this.segments[r];i.push(u.leftSE),i.push(u.rightSE)}return i}},Tu=class{constructor(i,r){ue(this,"multiPoly");ue(this,"exteriorRing");ue(this,"interiorRings");ue(this,"bbox");if(!Array.isArray(i))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Lo(i[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let a=1,u=i.length;a<u;a++){let d=new Lo(i[a],this,!1);d.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=d.bbox.ll.x),d.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=d.bbox.ll.y),d.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=d.bbox.ur.x),d.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=d.bbox.ur.y),this.interiorRings.push(d)}this.multiPoly=r}getSweepEvents(){let i=this.exteriorRing.getSweepEvents();for(let r=0,a=this.interiorRings.length;r<a;r++){let u=this.interiorRings[r].getSweepEvents();for(let d=0,g=u.length;d<g;d++)i.push(u[d])}return i}},Qc=class{constructor(i,r){ue(this,"isSubject");ue(this,"polys");ue(this,"bbox");if(!Array.isArray(i))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof i[0][0][0]=="number"&&(i=[i])}catch{}this.polys=[],this.bbox={ll:{x:new B(Number.POSITIVE_INFINITY),y:new B(Number.POSITIVE_INFINITY)},ur:{x:new B(Number.NEGATIVE_INFINITY),y:new B(Number.NEGATIVE_INFINITY)}};for(let a=0,u=i.length;a<u;a++){let d=new Tu(i[a],this);d.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=d.bbox.ll.x),d.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=d.bbox.ll.y),d.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=d.bbox.ur.x),d.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=d.bbox.ur.y),this.polys.push(d)}this.isSubject=r}getSweepEvents(){let i=[];for(let r=0,a=this.polys.length;r<a;r++){let u=this.polys[r].getSweepEvents();for(let d=0,g=u.length;d<g;d++)i.push(u[d])}return i}},qp=class Mc{constructor(r){ue(this,"events");ue(this,"poly");ue(this,"_isExteriorRing");ue(this,"_enclosingRing");this.events=r;for(let a=0,u=r.length;a<u;a++)r[a].segment.ringOut=this;this.poly=null}static factory(r){let a=[];for(let u=0,d=r.length;u<d;u++){let g=r[u];if(!g.isInResult()||g.ringOut)continue;let _=null,b=g.leftSE,E=g.rightSE,S=[b],j=b.point,F=[];for(;_=b,b=E,S.push(b),b.point!==j;)for(;;){let ht=b.getAvailableLinkedEvents();if(ht.length===0){let Yt=S[0].point,oe=S[S.length-1].point;throw new Error(`Unable to complete output ring starting at [${Yt.x}, ${Yt.y}]. Last matching segment found ends at [${oe.x}, ${oe.y}].`)}if(ht.length===1){E=ht[0].otherSE;break}let yt=null;for(let Yt=0,oe=F.length;Yt<oe;Yt++)if(F[Yt].point===b.point){yt=Yt;break}if(yt!==null){let Yt=F.splice(yt)[0],oe=S.splice(Yt.index);oe.unshift(oe[0].otherSE),a.push(new Mc(oe.reverse()));continue}F.push({index:S.length,point:b.point});let Gt=b.getLeftmostComparator(_);E=ht.sort(Gt)[0].otherSE;break}a.push(new Mc(S))}return a}getGeom(){let r=this.events[0].point,a=[r];for(let S=1,j=this.events.length-1;S<j;S++){let F=this.events[S].point,ht=this.events[S+1].point;Ke.orient(F,r,ht)!==0&&(a.push(F),r=F)}if(a.length===1)return null;let u=a[0],d=a[1];Ke.orient(u,r,d)===0&&a.shift(),a.push(a[0]);let g=this.isExteriorRing()?1:-1,_=this.isExteriorRing()?0:a.length-1,b=this.isExteriorRing()?a.length:-1,E=[];for(let S=_;S!=b;S+=g)E.push([a[S].x.toNumber(),a[S].y.toNumber()]);return E}isExteriorRing(){if(this._isExteriorRing===void 0){let r=this.enclosingRing();this._isExteriorRing=r?!r.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var d,g;let r=this.events[0];for(let _=1,b=this.events.length;_<b;_++){let E=this.events[_];an.compare(r,E)>0&&(r=E)}let a=r.segment.prevInResult(),u=a?a.prevInResult():null;for(;;){if(!a)return null;if(!u)return a.ringOut;if(u.ringOut!==a.ringOut)return((d=u.ringOut)==null?void 0:d.enclosingRing())!==a.ringOut?a.ringOut:(g=a.ringOut)==null?void 0:g.enclosingRing();a=u.prevInResult(),u=a?a.prevInResult():null}}},th=class{constructor(i){ue(this,"exteriorRing");ue(this,"interiorRings");this.exteriorRing=i,i.poly=this,this.interiorRings=[]}addInterior(i){this.interiorRings.push(i),i.poly=this}getGeom(){let i=this.exteriorRing.getGeom();if(i===null)return null;let r=[i];for(let a=0,u=this.interiorRings.length;a<u;a++){let d=this.interiorRings[a].getGeom();d!==null&&r.push(d)}return r}},Kp=class{constructor(i){ue(this,"rings");ue(this,"polys");this.rings=i,this.polys=this._composePolys(i)}getGeom(){let i=[];for(let r=0,a=this.polys.length;r<a;r++){let u=this.polys[r].getGeom();u!==null&&i.push(u)}return i}_composePolys(i){var a;let r=[];for(let u=0,d=i.length;u<d;u++){let g=i[u];if(!g.poly)if(g.isExteriorRing())r.push(new th(g));else{let _=g.enclosingRing();_!=null&&_.poly||r.push(new th(_)),(a=_==null?void 0:_.poly)==null||a.addInterior(g)}}return r}},Wp=class{constructor(i,r=fr.compare){ue(this,"queue");ue(this,"tree");ue(this,"segments");this.queue=i,this.tree=new zt(r),this.segments=[]}process(i){let r=i.segment,a=[];if(i.consumedBy)return i.isLeft?this.queue.delete(i.otherSE):this.tree.delete(r),a;i.isLeft&&this.tree.add(r);let u=r,d=r;do u=this.tree.lastBefore(u);while(u!=null&&u.consumedBy!=null);do d=this.tree.firstAfter(d);while(d!=null&&d.consumedBy!=null);if(i.isLeft){let g=null;if(u){let b=u.getIntersection(r);if(b!==null&&(r.isAnEndpoint(b)||(g=b),!u.isAnEndpoint(b))){let E=this._splitSafely(u,b);for(let S=0,j=E.length;S<j;S++)a.push(E[S])}}let _=null;if(d){let b=d.getIntersection(r);if(b!==null&&(r.isAnEndpoint(b)||(_=b),!d.isAnEndpoint(b))){let E=this._splitSafely(d,b);for(let S=0,j=E.length;S<j;S++)a.push(E[S])}}if(g!==null||_!==null){let b=null;g===null?b=_:_===null?b=g:b=an.comparePoints(g,_)<=0?g:_,this.queue.delete(r.rightSE),a.push(r.rightSE);let E=r.split(b);for(let S=0,j=E.length;S<j;S++)a.push(E[S])}a.length>0?(this.tree.delete(r),a.push(i)):(this.segments.push(r),r.prev=u)}else{if(u&&d){let g=u.getIntersection(d);if(g!==null){if(!u.isAnEndpoint(g)){let _=this._splitSafely(u,g);for(let b=0,E=_.length;b<E;b++)a.push(_[b])}if(!d.isAnEndpoint(g)){let _=this._splitSafely(d,g);for(let b=0,E=_.length;b<E;b++)a.push(_[b])}}}this.tree.delete(r)}return a}_splitSafely(i,r){this.tree.delete(i);let a=i.rightSE;this.queue.delete(a);let u=i.split(r);return u.push(a),i.consumedBy===void 0&&this.tree.add(i),u}},Jp=class{constructor(){ue(this,"type");ue(this,"numMultiPolys")}run(i,r,a){Co.type=i;let u=[new Qc(r,!0)];for(let E=0,S=a.length;E<S;E++)u.push(new Qc(a[E],!1));if(Co.numMultiPolys=u.length,Co.type==="difference"){let E=u[0],S=1;for(;S<u.length;)wo(u[S].bbox,E.bbox)!==null?S++:u.splice(S,1)}if(Co.type==="intersection")for(let E=0,S=u.length;E<S;E++){let j=u[E];for(let F=E+1,ht=u.length;F<ht;F++)if(wo(j.bbox,u[F].bbox)===null)return[]}let d=new zt(an.compare);for(let E=0,S=u.length;E<S;E++){let j=u[E].getSweepEvents();for(let F=0,ht=j.length;F<ht;F++)d.add(j[F])}let g=new Wp(d),_=null;for(d.size!=0&&(_=d.first(),d.delete(_));_;){let E=g.process(_);for(let S=0,j=E.length;S<j;S++){let F=E[S];F.consumedBy===void 0&&d.add(F)}d.size!=0?(_=d.first(),d.delete(_)):_=null}Ke.reset();let b=qp.factory(g.segments);return new Kp(b).getGeom()}},Co=new Jp,za=Co,Xp=(i,...r)=>za.run("intersection",i,r),Yp=(i,...r)=>za.run("difference",i,r);Ke.set;function Na(i){let r={type:"Feature"};return r.geometry=i,r}function $a(i){return i.type==="Feature"?i.geometry:i}function eh(i){return i&&i.geometry&&i.geometry.coordinates?i.geometry.coordinates:i}function Qp(i){return Na({type:"LineString",coordinates:i})}function tm(i){return Na({type:"MultiLineString",coordinates:i})}function ih(i){return Na({type:"Polygon",coordinates:i})}function nh(i){return Na({type:"MultiPolygon",coordinates:i})}function em(i,r){let a=$a(i),u=$a(r),d=Xp(a.coordinates,u.coordinates);return d.length===0?null:d.length===1?ih(d[0]):nh(d)}function im(i,r){let a=$a(i),u=$a(r),d=Yp(a.coordinates,u.coordinates);return d.length===0?null:d.length===1?ih(d[0]):nh(d)}function rh(i){return Array.isArray(i)?1+rh(i[0]):-1}function nm(i){i instanceof L.Polyline&&(i=i.toGeoJSON(15));let r=eh(i),a=rh(r),u=[];return a>1?r.forEach(d=>{u.push(Qp(d))}):u.push(i),u}function rm(i){let r=[];return i.eachLayer(a=>{r.push(eh(a.toGeoJSON(15)))}),tm(r)}ui.Cut=ui.Polygon.extend({initialize(i){this._map=i,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let i=this._layer.getLatLngs();if(i.length<=2)return;let r=L.polygon(i,this.options.pathOptions);r._latlngInfos=this._layer._latlngInfo,this.cut(r),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:u,originalLayer:d})=>{this._fireCut(d,u,d),this._fireCut(this._map,u,d),d.pm._fireEdit()}),this._editedLayers=[];let a=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(a))},cut(i){let r=this._map._layers,a=i._latlngInfos||[];Object.keys(r).map(u=>r[u]).filter(u=>u.pm).filter(u=>!u._pmTempLayer).filter(u=>!L.PM.optIn&&!u.options.pmIgnore||L.PM.optIn&&u.options.pmIgnore===!1).filter(u=>u instanceof L.Polyline).filter(u=>u!==i).filter(u=>u.pm.options.allowCutting).filter(u=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(u)>-1:!0).filter(u=>!this._layerGroup.hasLayer(u)).filter(u=>{try{let d=!!rn(i.toGeoJSON(15),u.toGeoJSON(15)).features.length>0;return d||u instanceof L.Polyline&&!(u instanceof L.Polygon)?d:!!em(i.toGeoJSON(15),u.toGeoJSON(15))}catch{return u instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(u=>{let d;if(u instanceof L.Polygon){d=L.polygon(u.getLatLngs());let E=d.getLatLngs();a.forEach(S=>{if(S&&S.snapInfo){let{latlng:j}=S,F=this._calcClosestLayer(j,[d]);if(F&&F.segment&&F.distance<this.options.snapDistance){let{segment:ht}=F;if(ht&&ht.length===2){let{indexPath:yt,parentPath:Gt,newIndex:Yt}=L.PM.Utils._getIndexFromSegment(E,ht);(yt.length>1?(0,_n.default)(E,Gt):E).splice(Yt,0,j)}}}})}else d=u;let g=this._cutLayer(i,d),_=L.geoJSON(g,u.options);_.getLayers().length===1&&([_]=_.getLayers()),this._setPane(_,"layerPane");let b=_.addTo(this._map.pm._getContainingLayer());if(b.pm.enable(u.pm.options),b.pm.disable(),u._pmTempLayer=!0,i._pmTempLayer=!0,u.remove(),u.removeFrom(this._map.pm._getContainingLayer()),i.remove(),i.removeFrom(this._map.pm._getContainingLayer()),b.getLayers&&b.getLayers().length===0&&this._map.pm.removeLayer({target:b}),b instanceof L.LayerGroup?(b.eachLayer(E=>{this._addDrawnLayerProp(E)}),this._addDrawnLayerProp(b)):this._addDrawnLayerProp(b),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let E=this.options.layersToCut.indexOf(u);E>-1&&this.options.layersToCut.splice(E,1)}this._editedLayers.push({layer:b,originalLayer:u})})},_cutLayer(i,r){let a=L.geoJSON(),u;if(r instanceof L.Polygon)u=im(r.toGeoJSON(15),i.toGeoJSON(15));else{let d=nm(r);d.forEach(g=>{let _=xu(g,i.toGeoJSON(15)),b;_&&_.features.length>0?b=L.geoJSON(_):b=L.geoJSON(g),b.getLayers().forEach(E=>{Lu(i.toGeoJSON(15),E.toGeoJSON(15))||E.addTo(a)})}),d.length>1?u=rm(a):u=a.toGeoJSON(15)}return u},_change:L.Util.falseFn}),ui.Text=ui.extend({initialize(i){this._map=i,this._shape="Text",this.toolbarButtonName="drawText"},enable(i){L.Util.setOptions(this,i),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(_e("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var i;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(i=this._hintMarker)==null||i.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let r=i;r.target=this._hintMarker,this._handleSnapping(r)}},_createMarker(i){var d,g,_,b;if(!i.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(d=this.options.textOptions)==null?void 0:d.className){let E=this.options.textOptions.className.split(" ");this.textArea.classList.add(...E)}let a=this._createTextIcon(this.textArea),u=new L.Marker(r,{textMarker:!0,_textMarkerOverPM:!0,icon:a});if(this._setPane(u,"markerPane"),this._finishLayer(u),u.pm||(u.options.draggable=!1),u.addTo(this._map.pm._getContainingLayer()),u.pm){u.pm.textArea=this.textArea,L.setOptions(u.pm,{removeIfEmpty:((g=this.options.textOptions)==null?void 0:g.removeIfEmpty)??!0});let E=((_=this.options.textOptions)==null?void 0:_.focusAfterDraw)??!0;u.pm._createTextMarker(E),(b=this.options.textOptions)!=null&&b.text&&u.pm.setText(this.options.textOptions.text)}this._fireCreate(u),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(i){this.enable(),this._hintMarker.setLatLng(i.latlng)},_createTextArea(){let i=document.createElement("textarea");return i.readOnly=!0,i.classList.add("pm-textarea","pm-disabled"),i},_createTextIcon(i){return L.divIcon({className:"pm-text-marker",html:i})}});var sm={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,pi(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let i=this._getDOMElem();i&&(pi(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(i)):L.DomEvent.on(i,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,pi(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let i=this._getDOMElem();i&&(pi(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(i)):L.DomEvent.off(i,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(i){let r=i.touches?i.touches[0]:i,a={originalEvent:r,target:this._layer};return a.containerPoint=this._map.mouseEventToContainerPoint(r),a.latlng=this._map.containerPointToLatLng(a.containerPoint),this._dragMixinOnMouseDown(a),!1},_simulateMouseMoveEvent(i){let r=i.touches?i.touches[0]:i,a={originalEvent:r,target:this._layer};return a.containerPoint=this._map.mouseEventToContainerPoint(r),a.latlng=this._map.containerPointToLatLng(a.containerPoint),this._dragMixinOnMouseMove(a),!1},_simulateMouseUpEvent(i){let r={originalEvent:i.touches?i.touches[0]:i,target:this._layer};return i.type.indexOf("touch")===-1&&(r.containerPoint=this._map.mouseEventToContainerPoint(i),r.latlng=this._map.containerPointToLatLng(r.containerPoint)),this._dragMixinOnMouseUp(r),!1},_dragMixinOnMouseDown(i){if(i.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(i);let r=i._fromLayerSync,a=this._syncLayers("_dragMixinOnMouseDown",i);if(this._layer instanceof L.Marker&&(this.options.snappable&&!r&&!a?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let u="resizeableCircleMarker";this._layer instanceof L.Circle&&(u="resizeableCircle"),this.options.snappable&&!r&&!a?this._layer.pm.options[u]||this._initSnappableMarkersDrag():this._layer.pm.options[u]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=i.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(i){this._overwriteEventIfItComesFromMarker(i);let r=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",i),this._dragging||(this._dragging=!0,L.DomUtil.addClass(r,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=i.latlng),this._onLayerDrag(i),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(i){let r=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",i),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,r&&L.DomUtil.removeClass(r,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(i){let{latlng:r}=i,a={lat:r.lat-this._tempDragCoord.lat,lng:r.lng-this._tempDragCoord.lng},u=d=>d.map(g=>{if(Array.isArray(g))return u(g);let _={lat:g.lat+a.lat,lng:g.lng+a.lng};return(g.alt||g.alt===0)&&(_.alt=g.alt),_});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let d=u([this._layer.getLatLng()]);this._layer.setLatLng(d[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let d=this._layer.getLatLng();this._layer._snapped&&(d=this._layer._orgLatLng);let g=u([d]);this._layer.setLatLng(g[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let d=u([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(d),this._fireChange(this._layer.getBounds(),"Edit")}else{let d=u(this._layer.getLatLngs());this._layer.setLatLngs(d),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=r,i.layer=this._layer,this._fireDrag(i)},addDraggingClass(){let i=this._getDOMElem();i&&L.DomUtil.addClass(i,"leaflet-pm-draggable")},removeDraggingClass(){let i=this._getDOMElem();i&&L.DomUtil.removeClass(i,"leaflet-pm-draggable")},_getDOMElem(){let i=null;return this._layer._path?i=this._layer._path:this._layer._renderer&&this._layer._renderer._container?i=this._layer._renderer._container:this._layer._image?i=this._layer._image:this._layer._icon&&(i=this._layer._icon),i},_overwriteEventIfItComesFromMarker(i){i.target.getLatLng&&(!i.target._radius||i.target._radius<=10)&&(i.containerPoint=this._map.mouseEventToContainerPoint(i.originalEvent),i.latlng=this._map.containerPointToLatLng(i.containerPoint))},_syncLayers(i,r){if(this.enabled())return!1;if(!r._fromLayerSync&&this._layer===r.target&&this.options.syncLayersOnDrag){r._fromLayerSync=!0;let a=[];if(L.Util.isArray(this.options.syncLayersOnDrag))a=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(u=>{u instanceof L.LayerGroup&&(a=a.concat(u.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let u in this._parentLayerGroup){let d=this._parentLayerGroup[u];d.pm&&(a=d.pm.getLayers(!0))}return L.Util.isArray(a)&&a.length>0&&(a=a.filter(u=>!!u.pm).filter(u=>!!u.pm.options.draggable),a.forEach(u=>{u!==this._layer&&u.pm[i]&&(u._snapped=!1,u.pm[i](r))})),a.length>0}return!1},_stopDOMImageDrag(i){return i.preventDefault(),!1}},om=sm,am=y(Cn());function lm(i,r,a,u){return a.unproject(r.transform(a.project(i,u)),u)}function sh(i,r,a){let u=a.getMaxZoom();if(u===1/0&&(u=a.getZoom()),L.Util.isArray(i)){let d=[];return i.forEach(g=>{d.push(sh(g,r,a))}),d}return i instanceof L.LatLng?lm(i,r,a,u):null}function ks(i,r){r instanceof L.Layer&&(r=r.getLatLng());let a=i.getMaxZoom();return a===1/0&&(a=i.getZoom()),i.project(r,a)}function ja(i,r){let a=i.getMaxZoom();return a===1/0&&(a=i.getZoom()),i.unproject(r,a)}var um={_onRotateStart(i){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=ks(this._map,this._rotationOriginLatLng),this._rotationStartPoint=ks(this._map,i.target.getLatLng()),this._initialRotateLatLng=en(this._layer),this._startAngle=this.getAngle();let r=en(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,r),this._fireRotationStart(this._map,r)},_onRotate(i){let r=ks(this._map,i.target.getLatLng()),a=this._rotationStartPoint,u=this._rotationOriginPoint,d=Math.atan2(r.y-u.y,r.x-u.x)-Math.atan2(a.y-u.y,a.x-u.x);this._layer.setLatLngs(this._rotateLayer(d,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let g=this;function _(j,F=[],ht=-1){if(ht>-1&&F.push(ht),L.Util.isArray(j[0]))j.forEach((yt,Gt)=>_(yt,F.slice(),Gt));else{let yt=F.length>0?(0,am.default)(g._markers,F):g._markers[0];j.forEach((Gt,Yt)=>{yt[Yt].setLatLng(Gt)})}}_(this._layer.getLatLngs());let b=en(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(d,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let E=d*180/Math.PI;E=E<0?E+360:E;let S=E+this._startAngle;this._setAngle(S),this._rotationLayer.pm._setAngle(S),this._fireRotation(this._rotationLayer,E,b),this._fireRotation(this._map,E,b),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let i=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let r=en(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=en(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,i,r),this._fireRotationEnd(this._map,i,r),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(i,r,a,u,d){let g=ks(d,a);return this._matrix=u.clone().rotate(i,g).flip(),sh(r,this._matrix,d)},_setAngle(i){i=i<0?i+360:i,this._angle=i%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let i=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),r=i.getCenter();return i.removeFrom(this._layer._map),r},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(as(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let i={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),i),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=en(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(i){let r=this.getAngle(),a=this._layer.getLatLngs(),u=i*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(u,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+i),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(u,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let d=this.getAngle()-r;d=d<0?d+360:d,this._startAngle=r,this._fireRotation(this._layer,d,a,this._layer),this._fireRotation(this._map||this._layer._map,d,a,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(i){let r=i-this.getAngle();this.rotateLayer(r)},getAngle(){return this._angle||0},setInitAngle(i){this._setAngle(i)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(i){this._rotationCenter=i,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(i)}},cm=um,hm=L.Class.extend({includes:[om,ho,cm,ss],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(i){L.Util.setOptions(this,i)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(i,r){r==="layerPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":r==="vertexPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":r==="markerPane"&&(i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(i,r){let a=r.target,u={layer:this._layer,marker:a,event:r},d="";return i==="move"?d="moveVertexValidation":i==="add"?d="addVertexValidation":i==="remove"&&(d="removeVertexValidation"),this.options[d]&&typeof this.options[d]=="function"&&!this.options[d](u)?(i==="move"&&(a._cancelDragEventChain=a.getLatLng()),!1):(a._cancelDragEventChain=null,!0)},_vertexValidationDrag(i){return i._cancelDragEventChain?(i._latlng=i._cancelDragEventChain,i.update(),!1):!0},_vertexValidationDragEnd(i){return i._cancelDragEventChain?(i._cancelDragEventChain=null,!1):!0}}),fi=hm;fi.LayerGroup=L.Class.extend({initialize(i){this._layerGroup=i,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(u=>this._initLayer(u));let r=u=>{if(u.layer._pmTempLayer)return;this._layers=this.getLayers();let d=this._layers.filter(g=>!g.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in g.pm._parentLayerGroup));d.forEach(g=>{this._initLayer(g)}),d.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(r,100,this),this),this._layerGroup.on("layerremove",u=>{this._removeLayerFromGroup(u.target)},this);let a=u=>{u.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(a,100,this),this)},enable(i,r=[]){r.length===0&&(this._layers=this.getLayers()),this._options=i,this._layers.forEach(a=>{a instanceof L.LayerGroup?r.indexOf(a._leaflet_id)===-1&&(r.push(a._leaflet_id),a.pm.enable(i,r)):a.pm.enable(i)})},disable(i=[]){i.length===0&&(this._layers=this.getLayers()),this._layers.forEach(r=>{r instanceof L.LayerGroup?i.indexOf(r._leaflet_id)===-1&&(i.push(r._leaflet_id),r.pm.disable(i)):r.pm.disable()})},enabled(i=[]){return i.length===0&&(this._layers=this.getLayers()),!!this._layers.find(r=>r instanceof L.LayerGroup?i.indexOf(r._leaflet_id)===-1?(i.push(r._leaflet_id),r.pm.enabled(i)):!1:r.pm.enabled())},toggleEdit(i,r=[]){r.length===0&&(this._layers=this.getLayers()),this._options=i,this._layers.forEach(a=>{a instanceof L.LayerGroup?r.indexOf(a._leaflet_id)===-1&&(r.push(a._leaflet_id),a.pm.toggleEdit(i,r)):a.pm.toggleEdit(i)})},_initLayer(i){let r=L.Util.stamp(this._layerGroup);i.pm._parentLayerGroup||(i.pm._parentLayerGroup={}),i.pm._parentLayerGroup[r]=this._layerGroup},_removeLayerFromGroup(i){if(i.pm&&i.pm._layerGroup){let r=L.Util.stamp(this._layerGroup);delete i.pm._layerGroup[r]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(i=>i.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var i;return this._map||((i=this._layers.find(r=>!!r._map))==null?void 0:i._map)||null},getLayers(i=!1,r=!0,a=!0,u=[]){let d=[];return i?this._layerGroup.getLayers().forEach(g=>{d.push(g),g instanceof L.LayerGroup&&u.indexOf(g._leaflet_id)===-1&&(u.push(g._leaflet_id),d=d.concat(g.pm.getLayers(!0,!0,!0,u)))}):d=this._layerGroup.getLayers(),a&&(d=d.filter(g=>!(g instanceof L.LayerGroup))),r&&(d=d.filter(g=>!!g.pm),d=d.filter(g=>!g._pmTempLayer),d=d.filter(g=>!L.PM.optIn&&!g.options.pmIgnore||L.PM.optIn&&g.options.pmIgnore===!1)),d},setOptions(i,r=[]){r.length===0&&(this._layers=this.getLayers()),this.options=i,this._layers.forEach(a=>{a.pm&&(a instanceof L.LayerGroup?r.indexOf(a._leaflet_id)===-1&&(r.push(a._leaflet_id),a.pm.setOptions(i,r)):a.pm.setOptions(i))})}}),fi.Marker=fi.extend({_shape:"Marker",initialize(i){this._layer=i,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(i={draggable:!0}){if(L.Util.setOptions(this,i),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(i){let r=i.target;r.remove(),this._fireRemove(r),this._fireRemove(this._map,r)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let i=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,i.off("pm:drag",this._handleSnapping,this),i.on("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.on("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this),i.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let i=this._layer;i.off("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this)}});var pr=y(Cn()),dm={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let i=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=i.filter((r,a,u)=>u.indexOf(r)===a)},_removeFromCache(i){let r=this.markerCache.indexOf(i);r>-1&&this.markerCache.splice(r,1)},renderLimits(i){this.markerCache.forEach(r=>{i.includes(r)?this._markerGroup.addLayer(r):this._markerGroup.removeLayer(r)})},applyLimitFilters({latlng:i={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let r=[...this._filterClosestMarkers(i)];this.renderLimits(r)},_filterClosestMarkers(i){let r=[...this.markerCache],a=this.options.limitMarkersToCount;return a===-1?r:(r.sort((u,d)=>{let g=u._latlng.distanceTo(i),_=d._latlng.distanceTo(i);return g-_}),r.filter((u,d)=>a>-1?d<a:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(i){this._preventRenderMarkers=!!i}},fm=dm;fi.Line=fi.extend({includes:[fm],_shape:"Line",initialize(i){this._layer=i,this._enabled=!1},enable(i){if(L.Util.setOptions(this,i),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let i=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(i,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(i){return this.enabled()?this.disable():this.enable(i),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let i=this._map,r=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(i),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let a=u=>{if(Array.isArray(u[0]))return u.map(a,this);let d=u.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&u.map((g,_)=>{let b=this.isPolygon()?(_+1)%u.length:_+1;return this._createMiddleMarker(d[_],d[b])}),d};this._markers=a(r),this.filterMarkerGroup(),i.addLayer(this._markerGroup)},_createMarker(i){let r=new L.Marker(i,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._pmTempLayer=!0,this.options.rotate?(r.on("dragstart",this._onRotateStart,this),r.on("drag",this._onRotate,this),r.on("dragend",this._onRotateEnd,this)):(r.on("click",this._onVertexClick,this),r.on("dragstart",this._onMarkerDragStart,this),r.on("move",this._onMarkerDrag,this),r.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||r.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(r),r},_createMiddleMarker(i,r){if(!i||!r)return!1;let a=L.PM.Utils.calcMiddleLatLng(this._map,i.getLatLng(),r.getLatLng()),u=this._createMarker(a),d=L.divIcon({className:"marker-icon marker-icon-middle"});return u.setIcon(d),u.leftM=i,u.rightM=r,i._middleMarkerNext=u,r._middleMarkerPrev=u,u.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),u.on("movestart",this._onMiddleMarkerMoveStart,this),u},_onMiddleMarkerClick(i){let r=i.target;if(!this._vertexValidation("add",i))return;let a=L.divIcon({className:"marker-icon"});r.setIcon(a),this._addMarker(r,r.leftM,r.rightM)},_onMiddleMarkerMoveStart(i){let r=i.target;if(r.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",i)){r.on("move",this._onMiddleMarkerMovePrevent,this);return}r._dragging=!0,this._addMarker(r,r.leftM,r.rightM)},_onMiddleMarkerMovePrevent(i){let r=i.target;this._vertexValidationDrag(r)},_onMiddleMarkerMoveEnd(i){let r=i.target;if(r.off("move",this._onMiddleMarkerMovePrevent,this),r.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(r))return;let a=L.divIcon({className:"marker-icon"});r.setIcon(a),setTimeout(()=>{delete r._dragging},100)},_addMarker(i,r,a){i.off("movestart",this._onMiddleMarkerMoveStart,this),i.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let u=i.getLatLng(),d=this._layer._latlngs;delete i.leftM,delete i.rightM;let{indexPath:g,index:_,parentPath:b}=L.PM.Utils.findDeepMarkerIndex(this._markers,r),E=g.length>1?(0,pr.default)(d,b):d,S=g.length>1?(0,pr.default)(this._markers,b):this._markers;E.splice(_+1,0,u),S.splice(_+1,0,i),this._layer.setLatLngs(d),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(r,i),this._createMiddleMarker(i,a)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(i,L.PM.Utils.findDeepMarkerIndex(this._markers,i).indexPath,u),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return us(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(i){let r=this._layer,a,u;if(this.options.allowSelfIntersection?a=!1:(u=us(this._layer.toGeoJSON(15)),a=u.features.length>0),a){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return a;i?this._flashLayer():(r.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(u)}else r.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return a},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(i,r){i.forEach(a=>{Array.isArray(a)?this._updateDisabledMarkerStyle(a,r):a._icon&&(r&&!this._checkMarkerAllowedToDrag(a)?L.DomUtil.addClass(a._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(a._icon,"vertexmarker-disabled"))})},_removeMarker(i){let r=i.target;if(!this._vertexValidation("remove",i))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=en(this._layer,this._layer.getLatLngs()));let a=this._layer.getLatLngs(),{indexPath:u,index:d,parentPath:g}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);if(!u)return;let _=u.length>1?(0,pr.default)(a,g):a,b=u.length>1?(0,pr.default)(this._markers,g):this._markers,E=g[g.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!E&&(_.length<=2||this.isPolygon()&&_.length<=3)){this._flashLayer();return}_.splice(d,1),this._layer.setLatLngs(a),this.isPolygon()&&_.length<=2&&_.splice(0,_.length);let S=!1;if(_.length<=1&&(_.splice(0,_.length),g.length>1&&u.length>1&&(a=Ar(a)),this._layer.setLatLngs(a),this._initMarkers(),S=!0),Vn(a)||this._layer.remove(),a=Ar(a),this._layer.setLatLngs(a),this._markers=Ar(this._markers),!S&&(b=u.length>1?(0,pr.default)(this._markers,g):this._markers,r._middleMarkerPrev&&(this._markerGroup.removeLayer(r._middleMarkerPrev),this._removeFromCache(r._middleMarkerPrev)),r._middleMarkerNext&&(this._markerGroup.removeLayer(r._middleMarkerNext),this._removeFromCache(r._middleMarkerNext)),this._markerGroup.removeLayer(r),this._removeFromCache(r),b)){let j,F;if(this.isPolygon()?(j=(d+1)%b.length,F=(d+(b.length-1))%b.length):(F=d-1<0?void 0:d-1,j=d+1>=b.length?void 0:d+1),j!==F){let ht=b[F],yt=b[j];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(ht,yt)}b.splice(d,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(r,u),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(i){let r=this._layer.getLatLngs(),a=i.getLatLng(),{indexPath:u,index:d,parentPath:g}=L.PM.Utils.findDeepMarkerIndex(this._markers,i);(u.length>1?(0,pr.default)(r,g):r).splice(d,1,a),this._layer.setLatLngs(r)},_getNeighborMarkers(i){let{indexPath:r,index:a,parentPath:u}=L.PM.Utils.findDeepMarkerIndex(this._markers,i),d=r.length>1?(0,pr.default)(this._markers,u):this._markers,g=(a+1)%d.length,_=(a+(d.length-1))%d.length,b=d[_],E=d[g];return{prevMarker:b,nextMarker:E}},_checkMarkerAllowedToDrag(i){let{prevMarker:r,nextMarker:a}=this._getNeighborMarkers(i),u=L.polyline([r.getLatLng(),i.getLatLng()]),d=L.polyline([i.getLatLng(),a.getLatLng()]),g=rn(this._layer.toGeoJSON(15),u.toGeoJSON(15)).features.length,_=rn(this._layer.toGeoJSON(15),d.toGeoJSON(15)).features.length;return i.getLatLng()===this._markers[0][0].getLatLng()?_+=1:i.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(g+=1),!(g<=2&&_<=2)},_onMarkerDragStart(i){let r=i.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",i))return;let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDragStart(i,a),this.options.allowSelfIntersection||(this._coordsBeforeEdit=en(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(r):this._markerAllowedToDrag=null},_onMarkerDrag(i){let r=i.target;if(!this._vertexValidationDrag(r))return;let{indexPath:a,index:u,parentPath:d}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);if(!a)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(r);let g=a.length>1?(0,pr.default)(this._markers,d):this._markers,_=(u+1)%g.length,b=(u+(g.length-1))%g.length,E=r.getLatLng(),S=g[b].getLatLng(),j=g[_].getLatLng();if(r._middleMarkerNext){let F=L.PM.Utils.calcMiddleLatLng(this._map,E,j);r._middleMarkerNext.setLatLng(F)}if(r._middleMarkerPrev){let F=L.PM.Utils.calcMiddleLatLng(this._map,E,S);r._middleMarkerPrev.setLatLng(F)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(i,a),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(i){let r=i.target;if(!this._vertexValidationDragEnd(r))return;let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r),u=!this.options.allowSelfIntersection&&this.hasSelfIntersection();u&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(u=!1);let d=!this.options.allowSelfIntersection&&u;if(this._fireMarkerDragEnd(i,a,d),d){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(i,a);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(i){let r=i.target;if(r._dragging)return;let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireVertexClick(i,a)}}),fi.Polygon=fi.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(i){let{prevMarker:r,nextMarker:a}=this._getNeighborMarkers(i),u=L.polyline([r.getLatLng(),i.getLatLng()]),d=L.polyline([i.getLatLng(),a.getLatLng()]),g=rn(this._layer.toGeoJSON(15),u.toGeoJSON(15)).features.length,_=rn(this._layer.toGeoJSON(15),d.toGeoJSON(15)).features.length;return!(g<=2&&_<=2)}}),fi.Rectangle=fi.Polygon.extend({_shape:"Rectangle",_initMarkers(){let i=this._map,r=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,i.addLayer(this._markerGroup),this._markers=[],this._markers[0]=r.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((a,u)=>{let d=this._cornerMarkers.find(g=>g._index===u);d&&d.setLatLng(a)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(i,r){let a=new L.Marker(i,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(a,"vertexPane"),a._origLatLng=i,a._index=r,a._pmTempLayer=!0,a.on("click",this._onVertexClick,this),this._markerGroup.addLayer(a),a},_addMarkerEvents(){this._markers[0].forEach(i=>{i.on("dragstart",this._onMarkerDragStart,this),i.on("drag",this._onMarkerDrag,this),i.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||i.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(i){if(!this._vertexValidation("move",i))return;let r=i.target,a=this._cornerMarkers;r._oppositeCornerLatLng=a.find(d=>d._index===(r._index+2)%4).getLatLng(),r._snapped=!1;let{indexPath:u}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDragStart(i,u)},_onMarkerDrag(i){let r=i.target;if(!this._vertexValidationDrag(r)||r._index===void 0)return;this._adjustRectangleForMarkerMove(r);let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDrag(i,a),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(i){let r=i.target;if(!this._vertexValidationDragEnd(r))return;this._cornerMarkers.forEach(u=>{delete u._oppositeCornerLatLng});let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDragEnd(i,a),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(i){L.extend(i._origLatLng,i._latlng);let r=L.PM.Utils._getRotatedRectangle(i.getLatLng(),i._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(r),this._adjustAllMarkers(i),this._layer.redraw()},_adjustAllMarkers(i){let r=this._layer.getLatLngs()[0];if(r&&r.length!==4&&r.length>0)r.forEach((a,u)=>{this._cornerMarkers[u].setLatLng(a)}),this._cornerMarkers.slice(r.length).forEach(a=>{a.setLatLng(r[0])});else if(!r||!r.length)console.error("The layer has no LatLngs");else{let a=r.findIndex(u=>i.getLatLng().equals(u));a>-1?(this._cornerMarkers[(i._index+1)%4].setLatLng(r[(a+1)%4]),this._cornerMarkers[(i._index+2)%4].setLatLng(r[(a+2)%4]),this._cornerMarkers[(i._index+3)%4].setLatLng(r[(a+3)%4])):this._cornerMarkers.forEach(u=>{u.setLatLng(r[u._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(as(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let i=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(i[0],i[2],this.getAngle(),this._map||this)}}),fi.CircleMarker=fi.extend({_shape:"CircleMarker",initialize(i){this._layer=i,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(i={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,i),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let i=this._map;this._helperLayers&&(this._helperLayers.removeFrom(i),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(i);let r=this._layer.getLatLng(),a=this._layer._radius,u=this._getLatLngOnCircle(r,a);this._centerMarker=this._createCenterMarker(r),this._outerMarker=this._createOuterMarker(u),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(i,r){let a=this._map.project(i),u=L.point(a.x+r,a.y);return this._map.unproject(u)},_createHintLine(i,r){let a=i.getLatLng(),u=r.getLatLng();this._hintline=L.polyline([a,u],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(i){let r=this._createMarker(i);return this.options.draggable?(L.DomUtil.addClass(r._icon,"leaflet-pm-draggable"),r.on("move",this._moveCircle,this)):r.dragging.disable(),r},_createOuterMarker(i){let r=this._createMarker(i);return r.on("drag",this._resizeCircle,this),r},_createMarker(i){let r=new L.Marker(i,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._origLatLng=i,r._pmTempLayer=!0,r.on("dragstart",this._onMarkerDragStart,this),r.on("drag",this._onMarkerDrag,this),r.on("dragend",this._onMarkerDragEnd,this),r.on("click",this._onVertexClick,this),this._helperLayers.addLayer(r),r},_moveCircle(i){if(i.target._cancelDragEventChain)return;let r=this._centerMarker.getLatLng();this._layer.setLatLng(r);let a=this._layer._radius,u=this._getLatLngOnCircle(r,a);this._outerMarker._latlng=u,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let i=this._layer.getLatLng(),r=this._layer._radius,a=this._getLatLngOnCircle(i,r);this._outerMarker.setLatLng(a),this._centerMarker.setLatLng(i),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let i=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng(),a=this._distanceCalculation(i,r);this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(a),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let i=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng();this._hintline.setLatLngs([i,r])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(i){this._vertexValidation("move",i)&&this._fireMarkerDragStart(i)},_onMarkerDrag(i){let r=i.target;r instanceof L.Marker&&!this._vertexValidationDrag(r)||this._fireMarkerDrag(i)},_onMarkerDragEnd(i){this._extedingMarkerDragEnd();let r=i.target;this._vertexValidationDragEnd(r)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(i))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let i=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,i.off("pm:drag",this._handleSnapping,this),i.on("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.on("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this),i.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let i=this._layer;i.off("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let i=this._layer._map||this._map;if(i){let r=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),i,this._layer.getLatLng()),a=L.circle(this._layer.getLatLng(),this._layer.options);a.setRadius(r);let u=i&&i.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(a,200,!u).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(a,200,!u),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let i=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng(),a=this._distanceCalculation(i,r);return this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?r=ls(this._map,i,r,this._getMinDistanceInMeter(i)):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&(r=ls(this._map,i,r,this._getMaxDistanceInMeter(i))),r},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let i=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng(),a=this._distanceCalculation(i,r);this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(i,r){return this._map.project(i).distanceTo(this._map.project(r))},_getMinDistanceInMeter(i){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,i)},_getMaxDistanceInMeter(i){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,i)},_onVertexClick(i){i.target._dragging||this._fireVertexClick(i,void 0)}}),fi.Circle=fi.CircleMarker.extend({_shape:"Circle",initialize(i){this._layer=i,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(i){L.PM.Edit.CircleMarker.prototype.enable.call(this,i||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let i=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(i,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let i=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!i).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!i),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(i,r){return this._map.distance(i,r)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(i){i.target._dragging||this._fireVertexClick(i,void 0)}}),fi.ImageOverlay=fi.extend({_shape:"ImageOverlay",initialize(i){this._layer=i,this._enabled=!1},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},enabled(){return this._enabled},enable(i={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,i),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let i=this._layer.getBounds(),r=i.getNorthWest(),a=i.getNorthEast(),u=i.getSouthEast(),d=i.getSouthWest();return[r,a,u,d]}}),fi.Text=fi.extend({_shape:"Text",initialize(i){this._layer=i,this._enabled=!1},enable(i){if(L.Util.setOptions(this,i),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let i=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),i.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let i=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,i.off("pm:drag",this._handleSnapping,this),i.on("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.on("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this),i.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let i=this._layer;i.off("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let i=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,r=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${i}px`,this.textArea.style.width=`${r}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(i){i.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(i={}){let r=this._hasFocus;this._hasFocus=i.type==="focus",!r!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(i){i&&(this.textArea.value=i),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let r=this.options.className.split(" ");this.textArea.classList.add(...r)}let i=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(i),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(i=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),i===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(i){i.preventDefault()}});var Du=function(i,r,a,u,d,g){this._matrix=[i,r,a,u,d,g]};Du.init=()=>new L.PM.Matrix(1,0,0,1,0,0),Du.prototype={transform(i){return this._transform(i.clone())},_transform(i){let r=this._matrix,{x:a,y:u}=i;return i.x=r[0]*a+r[1]*u+r[4],i.y=r[2]*a+r[3]*u+r[5],i},untransform(i){let r=this._matrix;return new L.Point((i.x/r[0]-r[4])/r[0],(i.y/r[2]-r[5])/r[2])},clone(){let i=this._matrix;return new L.PM.Matrix(i[0],i[1],i[2],i[3],i[4],i[5])},translate(i){if(i===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let r,a;return typeof i=="number"?(r=i,a=i):(r=i.x,a=i.y),this._add(1,0,0,1,r,a)},scale(i,r){if(i===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let a,u;return r=r||L.point(0,0),typeof i=="number"?(a=i,u=i):(a=i.x,u=i.y),this._add(a,0,0,u,r.x,r.y)._add(1,0,0,1,-r.x,-r.y)},rotate(i,r){let a=Math.cos(i),u=Math.sin(i);return r=r||new L.Point(0,0),this._add(a,u,-u,a,r.x,r.y)._add(1,0,0,1,-r.x,-r.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(i,r,a,u,d,g){let _=[[],[],[]],b=this._matrix,E=[[b[0],b[2],b[4]],[b[1],b[3],b[5]],[0,0,1]],S=[[i,a,d],[r,u,g],[0,0,1]],j;i&&i instanceof L.PM.Matrix&&(b=i._matrix,S=[[b[0],b[2],b[4]],[b[1],b[3],b[5]],[0,0,1]]);for(let F=0;F<3;F+=1)for(let ht=0;ht<3;ht+=1){j=0;for(let yt=0;yt<3;yt+=1)j+=E[F][yt]*S[yt][ht];_[F][ht]=j}return this._matrix=[_[0][0],_[1][0],_[0][1],_[1][1],_[0][2],_[1][2]],this}};var pm=Du,mm={calcMiddleLatLng(i,r,a){let u=i.project(r),d=i.project(a);return i.unproject(u._add(d)._divideBy(2))},findLayers(i){let r=[];return i.eachLayer(a=>{(a instanceof L.Polyline||a instanceof L.Marker||a instanceof L.Circle||a instanceof L.CircleMarker||a instanceof L.ImageOverlay)&&r.push(a)}),r=r.filter(a=>!!a.pm),r=r.filter(a=>!a._pmTempLayer),r=r.filter(a=>!L.PM.optIn&&!a.options.pmIgnore||L.PM.optIn&&a.options.pmIgnore===!1),r},circleToPolygon(i,r=60,a=!0){let u=i.getLatLng(),d=i.getRadius(),g=os(u,d,r,0,a),_=[];for(let b=0;b<g.length;b+=1){let E=[g[b].lat,g[b].lng];_.push(E)}return L.polygon(_,i.options)},disablePopup(i){i.getPopup()&&(i._tempPopupCopy=i.getPopup(),i.unbindPopup())},enablePopup(i){i._tempPopupCopy&&(i.bindPopup(i._tempPopupCopy),delete i._tempPopupCopy)},_fireEvent(i,r,a,u=!1){i.fire(r,a,u);let{groups:d}=this.getAllParentGroups(i);d.forEach(g=>{g.fire(r,a,u)})},getAllParentGroups(i){let r=[],a=[],u=d=>{for(let g in d._eventParents)if(r.indexOf(g)===-1){r.push(g);let _=d._eventParents[g];a.push(_),u(_)}};return!i._pmLastGroupFetch||!i._pmLastGroupFetch.time||new Date().getTime()-i._pmLastGroupFetch.time>1e3?(u(i),i._pmLastGroupFetch={time:new Date().getTime(),groups:a,groupIds:r},{groupIds:r,groups:a}):{groups:i._pmLastGroupFetch.groups,groupIds:i._pmLastGroupFetch.groupIds}},createGeodesicPolygon:os,getTranslation:_e,findDeepCoordIndex(i,r,a=!0){let u,d=_=>(b,E)=>{let S=_.concat(E);if(a){if(b.lat&&b.lat===r.lat&&b.lng===r.lng)return u=S,!0}else if(b.lat&&L.latLng(b).equals(r))return u=S,!0;return Array.isArray(b)&&b.some(d(S))};i.some(d([]));let g={};return u&&(g={indexPath:u,index:u[u.length-1],parentPath:u.slice(0,u.length-1)}),g},findDeepMarkerIndex(i,r){let a,u=g=>(_,b)=>{let E=g.concat(b);return _._leaflet_id===r._leaflet_id?(a=E,!0):Array.isArray(_)&&_.some(u(E))};i.some(u([]));let d={};return a&&(d={indexPath:a,index:a[a.length-1],parentPath:a.slice(0,a.length-1)}),d},_getIndexFromSegment(i,r){if(r&&r.length===2){let a=this.findDeepCoordIndex(i,r[0]),u=this.findDeepCoordIndex(i,r[1]),d=Math.max(a.index,u.index);return(a.index===0||u.index===0)&&d!==1&&(d+=1),{indexA:a,indexB:u,newIndex:d,indexPath:a.indexPath,parentPath:a.parentPath}}return null},_getRotatedRectangle(i,r,a,u){let d=ks(u,i),g=ks(u,r),_=a*Math.PI/180,b=Math.cos(_),E=Math.sin(_),S=(g.x-d.x)*b+(g.y-d.y)*E,j=(g.y-d.y)*b-(g.x-d.x)*E,F=S*b+d.x,ht=S*E+d.y,yt=-j*E+d.x,Gt=j*b+d.y,Yt=ja(u,d),oe=ja(u,{x:F,y:ht}),Me=ja(u,g),N=ja(u,{x:yt,y:Gt});return[Yt,oe,Me,N]},pxRadiusToMeterRadius(i,r,a){let u=r.project(a),d=L.point(u.x+i,u.y);return r.distance(r.unproject(d),a)}},gm=mm;L.PM=L.PM||{version:Ys.version,Map:Ca,Toolbar:co,Draw:ui,Edit:fi,Utils:gm,Matrix:pm,activeLang:"en",optIn:!1,initialize(i){this.addInitHooks(i)},setOptIn(i){this.optIn=!!i},addInitHooks(){function i(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(i);function r(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(r);function a(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(a);function u(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(u);function d(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(d);function g(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(g);function _(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(_);function b(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(b);function E(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(E)},reInitLayer(i){i instanceof L.LayerGroup&&i.eachLayer(r=>{this.reInitLayer(r)}),i.pm||L.PM.optIn&&i.options.pmIgnore!==!1||i.options.pmIgnore||(i instanceof L.Map?i.pm=new L.PM.Map(i):i instanceof L.Marker?i.options.textMarker?(i.pm=new L.PM.Edit.Text(i),i.pm._initTextMarker(),i.pm._createTextMarker(!1)):i.pm=new L.PM.Edit.Marker(i):i instanceof L.Circle?i.pm=new L.PM.Edit.Circle(i):i instanceof L.CircleMarker?i.pm=new L.PM.Edit.CircleMarker(i):i instanceof L.Rectangle?i.pm=new L.PM.Edit.Rectangle(i):i instanceof L.Polygon?i.pm=new L.PM.Edit.Polygon(i):i instanceof L.Polyline?i.pm=new L.PM.Edit.Line(i):i instanceof L.LayerGroup?i.pm=new L.PM.Edit.LayerGroup(i):i instanceof L.ImageOverlay&&(i.pm=new L.PM.Edit.ImageOverlay(i)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(i){let r=this._map.mouseEventToLayerPoint(i),a,u;for(let d=this._drawFirst;d;d=d.next)a=d.layer,a.options.interactive&&a._containsPoint(r)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(a))&&(u=a);u&&(L.DomEvent.fakeStop(i),this._fireEvent([u],i))}}),L.PM.initialize()})();function v1(){const t=Jt(null),n=Jt(null),s=R=>`${(R*100).toFixed(1)}%`,l=R=>`${((R%360+360)%360).toFixed(1)}°`,h=R=>(R%360+360)%360,p=(R,V,G)=>{const _t=h(V);let pt=h(G)-_t;return pt<=0&&(pt+=360),Math.PI*R*pt/180},f=(R,V,G)=>{const _t=h(V);let pt=h(G)-_t;return pt<=0&&(pt+=360),Math.PI*R*R*pt/360},v=R=>{if("getLatLngs"in R){const G=R.getLatLngs();if(Array.isArray(G)&&G[0]){const kt=(Array.isArray(G[0])?G[0]:G).map(At=>[At.lng,At.lat]),pt=Cc([kt]);return kc(pt)}}return 0},y=R=>{if("getLatLngs"in R){const G=R.getLatLngs();if(Array.isArray(G)){const _t=(Array.isArray(G[0])?G[0]:G).map(pt=>[pt.lng,pt.lat]),kt=Yo(_t);return vl(kt,{units:"meters"})}}return 0},C=R=>{if("getLatLngs"in R){const G=R.getLatLngs();if(Array.isArray(G)&&G[0]){const kt=[...(Array.isArray(G[0])?G[0]:G).map(At=>[At.lng,At.lat])];kt.length>0&&kt.push(kt[0]);const pt=Yo(kt);return vl(pt,{units:"meters"})}}return 0},M=R=>{const V=R;return V._mRadius?V._mRadius:V.getRadius?V.getRadius():0},P=(R,V)=>{var _t,kt;console.log("=== CALCULATE PROPERTIES START ==="),console.log("Input:",{type:V,layer:{constructor:(_t=R==null?void 0:R.constructor)==null?void 0:_t.name,_mRadius:R._mRadius,_latlng:R._latlng,options:R.options}});const G={type:V,style:R.options};try{switch(V){case"Circle":const pt=M(R);console.log("Circle radius calculation:",{_mRadius:R._mRadius,calculatedRadius:pt,getRadius:(kt=R.getRadius)==null?void 0:kt.call(R)}),G.radius=pt,G.diameter=G.radius*2,G.area=Math.PI*Math.pow(G.radius,2),G.perimeter=2*Math.PI*G.radius,G.center=R.getLatLng(),console.log("Circle properties calculated:",G);break;case"Semicircle":G.radius=M(R),G.diameter=G.radius*2,G.center=R.getLatLng(),G.startAngle=h(R.options.startAngle||0),G.stopAngle=h(R.options.stopAngle||180),G.arcLength=p(G.radius,G.startAngle,G.stopAngle),G.area=f(G.radius,G.startAngle,G.stopAngle),G.chordLength=2*G.radius*Math.abs(Math.sin((G.stopAngle-G.startAngle)*Math.PI/360)),console.log("Semicircle properties calculated:",G);break;case"Rectangle":case"Polygon":G.area=v(R),G.perimeter=C(R),console.log("Rectangle/Polygon properties calculated:",G);break;case"Line":case"Polyline":if(G.length=y(R),R.elevation){const At=R.elevation.gain,Ut=G.length;G.slope=At/Ut}console.log("Line/Polyline properties calculated:",G);break}}catch(pt){console.error("Error calculating properties:",pt)}return console.log("=== CALCULATE PROPERTIES END ==="),console.log("Final properties:",G),G},U=R=>{var V,G,_t,kt,pt,At;if(console.log("=== UPDATE SELECTED SHAPE START ==="),console.log("Input shape:",{type:R==null?void 0:R.type,properties:R==null?void 0:R.properties,layer:R!=null&&R.layer?{type:R.layer.constructor.name,options:R.layer.options,_mRadius:R.layer._mRadius,_latlng:R.layer._latlng,bounds:(G=(V=R.layer).getBounds)==null?void 0:G.call(V)}:{type:(_t=R==null?void 0:R.constructor)==null?void 0:_t.name,options:R==null?void 0:R.options,_mRadius:R==null?void 0:R._mRadius,_latlng:R==null?void 0:R._latlng,bounds:(kt=R==null?void 0:R.getBounds)==null?void 0:kt.call(R)}}),(pt=t.value)!=null&&pt.off&&t.value.off("properties:updated"),t.value=R,R){R.on&&(console.log("Adding properties:updated event listener"),R.on("properties:updated",Y=>{var dt;console.log("Properties updated event received:",{event:Y,shape:{_mRadius:Y.shape._mRadius,_latlng:Y.shape._latlng,properties:Y.shape.properties,constructor:Y.shape.constructor.name}});const nt=Y.shape,z=((dt=nt.properties)==null?void 0:dt.type)||"unknown";console.log("Updating properties for shape:",{type:z,_mRadius:nt._mRadius,_latlng:nt._latlng,currentProperties:nt.properties});const rt=P(nt,z);console.log("Recalculated properties:",rt),n.value={...rt},nt.properties={...rt},console.log("Updated shapeProperties:",n.value)}));const Ut=P(R.layer||R,R.type||((At=R.properties)==null?void 0:At.type));console.log("Initial calculated properties:",Ut),n.value={...Ut},R.layer?R.layer.properties={...Ut}:R.properties={...Ut},console.log("Initial shapeProperties set:",n.value)}else console.log("No shape provided, clearing properties"),n.value=null;console.log("=== UPDATE SELECTED SHAPE END ===")},J=Pe(()=>{if(!n.value)return null;const R={...n.value};return R.area&&(R.areaFormatted=`${(R.area/1e4).toFixed(2)} ha`),R.length&&(R.lengthFormatted=`${R.length.toFixed(1)} m`),R.arcLength&&(R.arcLengthFormatted=`${R.arcLength.toFixed(1)} m`),R.perimeter&&(R.perimeterFormatted=`${(R.perimeter/1e3).toFixed(2)} km`),R.radius&&(R.radiusFormatted=`${R.radius.toFixed(1)} m`),R.diameter&&(R.diameterFormatted=`${R.diameter.toFixed(1)} m`),R.width&&(R.widthFormatted=`${R.width.toFixed(1)} m`),R.height&&(R.heightFormatted=`${R.height.toFixed(1)} m`),R.chordLength&&(R.chordLengthFormatted=`${R.chordLength.toFixed(1)} m`),R.slope&&(R.slopeFormatted=s(R.slope)),R.startAngle&&(R.startAngleFormatted=l(R.startAngle)),R.stopAngle&&(R.stopAngleFormatted=l(R.stopAngle)),R});return{selectedShape:t,shapeProperties:n,formattedProperties:J,updateSelectedShape:U,calculateProperties:P,normalizeAngle:h,calculateArcLength:p,calculateSectorArea:f}}class As extends se.Polygon{constructor(s,l,h=0,p=180,f={}){super([[]],{...f,pmIgnore:!1,interactive:!0,className:"leaflet-semicircle"});ue(this,"center");ue(this,"radius");ue(this,"startAngle");ue(this,"stopAngle");ue(this,"numPoints");ue(this,"properties");ue(this,"pm");this.center=s,this.radius=l,this.startAngle=this.normalizeAngle(h),this.stopAngle=this.normalizeAngle(p),this.numPoints=64,this.properties={type:"Semicircle",radius:this.radius,startAngle:this.startAngle,stopAngle:this.stopAngle,style:{...f,startAngle:this.startAngle,stopAngle:this.stopAngle}},this.on("pm:enable",v=>{var y;this.pm&&(this.pm._layers=[],this.pm._markers=[],(y=this.pm._markerGroup)==null||y.clearLayers())}),this.on("pm:vertexadded",v=>{var y;this.pm&&((y=this.pm._markerGroup)==null||y.clearLayers())}),this.on("add",()=>{this._map&&(this.updateGeometry(),this.pm&&this.pm.enable({allowSelfIntersection:!1,preventMarkerRemoval:!0}))})}normalizeAngle(s){return(s%360+360)%360}calculateArcPoints(){if(!this._map)return[];const s=[],l=(this.stopAngle-this.startAngle+360)%360;s.push(this.center);for(let h=0;h<=this.numPoints;h++){const f=(this.startAngle+l*h/this.numPoints)*Math.PI/180,v=this.radius*Math.cos(f),C=this.radius*Math.sin(f)/111319.9,M=v/(111319.9*Math.cos(this.center.lat*Math.PI/180)),P=se.latLng(this.center.lat+C,this.center.lng+M);s.push(P)}return s.push(this.center),s}setRadius(s){return s<=0?this:(this.radius=s,this.properties.radius=s,this.updateGeometry(),this)}setAngles(s,l){return this.startAngle=this.normalizeAngle(s),this.stopAngle=this.normalizeAngle(l),this.properties.startAngle=this.startAngle,this.properties.stopAngle=this.stopAngle,this.properties.style.startAngle=this.startAngle,this.properties.style.stopAngle=this.stopAngle,this.updateGeometry(),this}setOpeningAngle(s){return s<0||s>360?this:(this.stopAngle=this.normalizeAngle(this.startAngle+s),this.updateGeometry(),this)}setCenter(s){return!s.lat||!s.lng?this:(this.center=s,this.updateGeometry(),this)}getCenter(){return this.center}getRadius(){return this.radius}getStartAngle(){return this.startAngle}getStopAngle(){return this.stopAngle}getOpeningAngle(){return(this.stopAngle-this.startAngle+360)%360}updateGeometry(){if(!this._map)return;const s=this.calculateArcPoints();s.length>0&&this.setLatLngs([s])}toGeoJSON(){const s=super.toGeoJSON();return{...s,properties:{...s.properties,type:"Semicircle",radius:this.radius,startAngle:this.startAngle,stopAngle:this.stopAngle}}}}const bl=(t,n)=>{if(!t||typeof t!="string"||!t.startsWith("#"))return`rgba(0, 0, 0, ${n})`;const s=parseInt(t.slice(1,3),16),l=parseInt(t.slice(3,5),16),h=parseInt(t.slice(5,7),16);return`rgba(${s}, ${l}, ${h}, ${n})`},Bd=(t,n)=>{t.style.fontSize=n.fontSize,t.style.color=n.color,t.style.backgroundColor=bl(n.backgroundColor,n.backgroundOpacity),n.hasBorder?t.style.border=`${n.borderWidth} solid ${bl(n.borderColor,n.borderOpacity)}`:t.style.border="none",t.style.padding=n.padding,t.style.borderRadius=n.borderRadius},Ei=t=>{document.querySelectorAll(".drawing-help-message").forEach(l=>l.remove());const s=se.DomUtil.create("div","drawing-help-message");return s.innerHTML=t,s.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(s),s};function ec(t,n,s){const l=156543.03392*Math.cos(n*Math.PI/180)/Math.pow(2,s);return t/l}const ti=(t,n="m",s="")=>{let l,h;return n==="m²"?t>=1e4?(l=(t/1e4).toFixed(2),h="ha"):(l=t.toFixed(2),h="m²"):n==="m"?t>=1e3?(l=(t/1e3).toFixed(2),h="km"):(l=t.toFixed(2),h="m"):(l=t.toFixed(2),h=n),s?`${s}: ${l} ${h}`:`${l} ${h}`},b1=t=>`${((t%360+360)%360).toFixed(1)}°`,Ad=(t,n,s)=>{const l=s*Math.PI/180,h=Math.cos(l),p=Math.sin(l),f=t.x-n.x,v=t.y-n.y;return new se.Point(n.x+f*h-v*p,n.y+f*p+v*h)};function x1(){const t=Jt(null),n=Jt(null),s=Jt(""),l=Jt(null),h=Jt(!1),p=(z,rt="Double-cliquez pour éditer")=>{const dt={fontSize:"14px",color:"#000000",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderWidth:"1px",borderOpacity:1,padding:"5px 10px",borderRadius:"3px",hasBorder:!0,rotation:0,physicalSize:2},et=(gt,Kt)=>{var bt;const ie=((bt=t.value)==null?void 0:bt.getZoom())||14,ne=z.lat,Qt=ec(Kt.physicalSize,ne,ie);return`<div class="text-container" style="width:${Qt}px;height:${Qt}px;transform:rotate(${Kt.rotation}deg)">
        <div class="text-annotation" style="font-size:${Qt*.2}px;color:${Kt.color};background-color:${bl(Kt.backgroundColor,Kt.backgroundOpacity)};border:${Kt.hasBorder?Kt.borderWidth+" solid "+bl(Kt.borderColor,Kt.borderOpacity):"none"};padding:${Kt.padding};border-radius:${Kt.borderRadius}">${gt}</div>
        <div class="text-controls"><div class="control-button rotate"></div><div class="control-button move"></div></div>
      </div>`},Mt=()=>{if(!t.value)return;const gt=t.value.getZoom(),Kt=Q.getLatLng().lat;ec(Q.properties.style.physicalSize,Kt,gt);const ie=Q.getIcon(),ne={html:et(Q.properties.text,Q.properties.style),className:ie.options.className};Q.setIcon(se.divIcon(ne))},Ot=se.divIcon({html:et(rt,dt),className:"text-container",iconSize:[40,40],iconAnchor:[20,20]}),Q=se.marker(z,{icon:Ot,draggable:!1,pmIgnore:!0});Q.properties={type:"text",text:rt,style:{...dt}},t.value&&(t.value.on("zoomend",Mt),Q.on("remove",()=>{var gt;(gt=t.value)==null||gt.off("zoomend",Mt)})),Mt();let mt=!1,Pt=!1,Ct=0,xt=0;const Wt=gt=>{if(!t.value)return;const Kt=gt.target;if(Kt.classList.contains("rotate")){mt=!0;const ie=Q.getLatLng(),ne=t.value.mouseEventToLatLng(gt);Ct=Math.atan2(ne.lat-ie.lat,ne.lng-ie.lng)*180/Math.PI,xt=Q.properties.style.rotation||0}else Kt.classList.contains("move")&&(Pt=!0,t.value.latLngToLayerPoint(Q.getLatLng()));document.addEventListener("mousemove",$t),document.addEventListener("mouseup",Lt)},$t=gt=>{if(!(!Pt||!t.value)){if(mt){const Kt=Q.getLatLng(),ie=t.value.mouseEventToLatLng(gt),ne=Math.atan2(ie.lat-Kt.lat,ie.lng-Kt.lng)*180/Math.PI,Qt=(xt+(ne-Ct))%360;Q.properties.style.rotation=Qt;const bt=Q.getIcon(),Ht={html:et(Q.properties.text,Q.properties.style),className:bt.options.className};Q.setIcon(se.divIcon(Ht))}else if(Pt){const Kt=gt,ie=t.value.mouseEventToLatLng(Kt);Q.setLatLng(ie)}}},Lt=()=>{mt=!1,Pt=!1,document.removeEventListener("mousemove",$t),document.removeEventListener("mouseup",Lt)};return Q.on("add",()=>{const gt=Q.getElement();gt&&gt.querySelectorAll(".control-button").forEach(ie=>{ie.addEventListener("mousedown",Wt)})}),Q.on("remove",()=>{const gt=Q.getElement();gt&&gt.querySelectorAll(".control-button").forEach(ie=>{ie.removeEventListener("mousedown",Wt)})}),Q.on("dblclick",gt=>{var Ht;se.DomEvent.stopPropagation(gt);const Kt=(Ht=Q.getElement())==null?void 0:Ht.querySelector(".text-annotation");if(!Kt)return;Kt.contentEditable="true",Kt.focus(),Kt.classList.add("editing");const ie=window.getSelection(),ne=document.createRange();ne.selectNodeContents(Kt),ie==null||ie.removeAllRanges(),ie==null||ie.addRange(ne);const Qt=()=>{Kt.contentEditable="false",Kt.classList.remove("editing");const Vt=Kt.innerText.trim();if(Vt){Q.properties.text=Vt;const Xt=Q.getIcon(),te={html:et(Vt,Q.properties.style),className:Xt.options.className};Q.setIcon(se.divIcon(te))}Kt.removeEventListener("blur",Qt),Kt.removeEventListener("keydown",bt)},bt=Vt=>{Vt.key==="Enter"&&!Vt.shiftKey&&(Vt.preventDefault(),Qt())};Kt.addEventListener("blur",Qt),Kt.addEventListener("keydown",bt)}),Q},f=(z,rt)=>{const dt=se.DomUtil.create("div","measure-tooltip");if(dt.innerHTML=rt,dt.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(dt),t.value){const et=t.value.latLngToContainerPoint(z);dt.style.left=`${et.x+10}px`,dt.style.top=`${et.y-25}px`}return dt},v=(z,rt,dt)=>{z.on("mouseover",()=>{const et=f(z.getLatLng(),dt());z.measureDiv=et}),z.on("mousemove",et=>{if(z.measureDiv&&t.value){const Mt=t.value.latLngToContainerPoint(et.latlng);z.measureDiv.style.left=`${Mt.x+10}px`,z.measureDiv.style.top=`${Mt.y-25}px`}}),z.on("mouseout",()=>{z.measureDiv&&(z.measureDiv.remove(),z.measureDiv=void 0)})};v1();let y=[];const C=()=>{y.forEach(z=>{z&&z.remove&&("measureDiv"in z&&z.measureDiv&&(z.measureDiv.remove(),z.measureDiv=void 0),n.value&&n.value.removeLayer(z),z.remove())}),y=[],document.querySelectorAll(".measure-tooltip").forEach(z=>{z.remove()})},M=(z,rt="#2563EB")=>{const dt=se.circleMarker(z,{radius:6,color:rt,fillColor:rt,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return n.value&&n.value.addLayer(dt),dt},P=(z,rt)=>{var et,Mt,Ot,Q,mt,Pt;console.log("=== CALCULATING SHAPE PROPERTIES START ==="),console.log("Input layer:",{type:rt,instanceof:{Circle:z instanceof se.Circle,Rectangle:z instanceof se.Rectangle,Polygon:z instanceof se.Polygon,Polyline:z instanceof se.Polyline,CircleArc:z instanceof As},options:z.options});const dt={type:rt,style:z.options||{}};try{if(z instanceof se.Circle){const Ct=z.getRadius(),xt=z.getLatLng();dt.radius=Ct,dt.diameter=Ct*2,dt.area=Math.PI*Math.pow(Ct,2),dt.perimeter=2*Math.PI*Ct,dt.center=xt,dt.surfaceInterieure=dt.area,dt.surfaceExterieure=dt.area,console.log("Circle properties calculated:",dt)}else if(z instanceof As){const Ct=z.getRadius(),xt=z.getCenter(),Wt=z.getStartAngle(),$t=z.getStopAngle(),Lt=z.getOpeningAngle();dt.radius=Ct,dt.diameter=Ct*2,dt.area=Math.PI*Math.pow(Ct,2)*Lt/360,dt.arcLength=2*Math.PI*Ct*Lt/360,dt.perimeter=dt.arcLength+2*Ct,dt.center=xt,dt.startAngle=Wt,dt.stopAngle=$t,dt.openingAngle=Lt,dt.surfaceInterieure=dt.area,dt.surfaceExterieure=dt.area,console.log("CircleArc properties calculated:",dt)}else if(z instanceof se.Rectangle){const Ct=z.getBounds(),xt=Ct.getNorthEast(),Wt=Ct.getSouthWest(),$t=Ec([Wt.lng,Wt.lat],[xt.lng,Wt.lat],{units:"meters"}),Lt=Ec([Wt.lng,Wt.lat],[Wt.lng,xt.lat],{units:"meters"});dt.width=$t,dt.height=Lt,dt.area=$t*Lt,dt.perimeter=2*($t+Lt),dt.surfaceInterieure=dt.area,dt.surfaceExterieure=dt.area,dt.dimensions={width:$t,height:Lt},console.log("Rectangle properties calculated:",dt)}else if(z instanceof se.Polygon){const xt=z.getLatLngs()[0].map($t=>[$t.lng,$t.lat]);xt.push(xt[0]);const Wt=Cc([xt]);dt.area=kc(Wt),dt.perimeter=vl(Yo([...xt]),{units:"meters"}),dt.surfaceInterieure=dt.area,dt.surfaceExterieure=dt.area,console.log("Polygon properties calculated:",dt)}else if(z instanceof se.Polyline&&!(z instanceof se.Polygon)){const xt=z.getLatLngs().map(Lt=>[Lt.lng,Lt.lat]),Wt=Yo(xt);dt.length=vl(Wt,{units:"meters"});const $t=10;dt.surfaceInfluence=dt.length*$t,dt.dimensions={width:$t},console.log("Polyline properties calculated:",dt)}dt.style={...dt.style,color:((et=z.options)==null?void 0:et.color)||"#3388ff",weight:((Mt=z.options)==null?void 0:Mt.weight)||3,opacity:((Ot=z.options)==null?void 0:Ot.opacity)||1,fillColor:((Q=z.options)==null?void 0:Q.fillColor)||"#3388ff",fillOpacity:((mt=z.options)==null?void 0:mt.fillOpacity)||.2,dashArray:((Pt=z.options)==null?void 0:Pt.dashArray)||""}}catch(Ct){console.error("Error calculating shape properties:",Ct)}return console.log("=== CALCULATING SHAPE PROPERTIES END ==="),console.log("Final properties:",dt),dt},U=(z,rt=2)=>{var Q;if(!t.value){console.warn("Map is not available for text size update");return}const dt=t.value.getZoom(),et=z.getLatLng().lat,Mt=ec(rt,et,dt),Ot=(Q=z.getElement())==null?void 0:Q.querySelector(".text-annotation");Ot&&(z.properties.style.fontSize=`${Mt}px`,z.properties.physicalWidth=rt,z.properties.physicalHeight=rt,Bd(Ot,z.properties.style))},J=(z,rt,dt)=>{const et=se.map(z).setView(rt,dt);t.value=et,se.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors"}).addTo(et);const Mt=new se.FeatureGroup;return Mt.addTo(et),n.value=Mt,et.pm.addControls({position:"topleft",drawMarker:!1,drawPolyline:!1,drawRectangle:!1,drawPolygon:!1,drawCircle:!1,drawCircleMarker:!1,drawText:!1,editMode:!1,dragMode:!1,cutPolygon:!1,removalMode:!1}),et.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:Mt,templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),et.on("pm:drawstart",Ot=>{h.value=!0,Ot.shape==="Circle"&&s.value==="Semicircle"&&(et.getContainer().style.cursor="crosshair")}),et.on("pm:drawend",()=>{h.value=!1,et.getContainer().style.cursor="",l.value&&Ei("Cliquez sur la forme pour afficher les points de contrôle")}),et.on("pm:create",async Ot=>{var Pt,Ct,xt;const Q=Ot.layer;(Pt=n.value)==null||Pt.addLayer(Q);let mt="unknown";if(Q instanceof se.Circle?mt=s.value==="Semicircle"?"Semicircle":"Circle":Q instanceof se.Rectangle?mt="Rectangle":Q instanceof se.Polygon?mt="Polygon":Q instanceof se.Polyline&&!(Q instanceof se.Polygon)&&(mt="Line"),Q.properties=P(Q,mt),l.value=Q,mt==="Semicircle"){const Wt=Q.getLatLng(),$t=Q.getRadius();(Ct=n.value)==null||Ct.removeLayer(Q);const Lt=new As(Wt,$t);Lt.properties=P(Lt,"Semicircle"),(xt=n.value)==null||xt.addLayer(Lt),l.value=Lt,nt(Lt)}else Q instanceof se.Circle?pt(Q):Q instanceof se.Rectangle?At(Q):Q instanceof se.Polygon?Y(Q):Q instanceof se.Polyline&&!(Q instanceof se.Polygon)&&Ut(Q);Ei("Cliquez sur la forme pour afficher les points de contrôle")}),et.on("click",Ot=>{Ot.target===et&&(C(),l.value=null,document.querySelectorAll(".drawing-help-message").forEach(mt=>mt.remove()))}),Mt.on("click",Ot=>{var mt,Pt,Ct;se.DomEvent.stopPropagation(Ot);const Q=Ot.layer;C(),(mt=document.querySelector(".drawing-help-message"))==null||mt.remove(),l.value=Q,Q instanceof As||((Pt=Q.properties)==null?void 0:Pt.type)==="Semicircle"?(Q.pm&&(Q.pm._layers=[],Q.pm._markers=[],(Ct=Q.pm._markerGroup)==null||Ct.clearLayers()),nt(Q)):Q instanceof se.Circle?pt(Q):Q instanceof se.Rectangle?At(Q):Q instanceof se.Polygon?Y(Q):Q instanceof se.Polyline&&!(Q instanceof se.Polygon)&&Ut(Q)}),et.on("pm:edit",Ot=>{var mt,Pt;console.log("=== PM:EDIT EVENT START ==="),console.log("Event details:",Ot);const Q=Ot.layer;if(Q){console.log("Layer before update:",{type:(mt=Q.properties)==null?void 0:mt.type,properties:Q.properties,options:Q.options,_mRadius:Q._mRadius,_latlng:Q._latlng,constructor:Q.constructor.name});let Ct="unknown";Q instanceof se.Circle?(Ct=((Pt=Q.properties)==null?void 0:Pt.type)==="Semicircle"?"Semicircle":"Circle",console.log("Circle detected with radius:",Q.getRadius())):Q instanceof se.Rectangle?Ct="Rectangle":Q instanceof se.Polygon?Ct="Polygon":Q instanceof se.Polyline&&!(Q instanceof se.Polygon)&&(Ct="Line"),console.log("Detected shape type:",Ct);const xt=P(Q,Ct);if(console.log("Newly calculated properties:",xt),l.value&&l.value===Q){console.log("Updating selected shape...",{currentRadius:Q._mRadius,newRadius:xt.radius});const Wt={...xt};Q.properties=Wt,l.value=null,Os(()=>{l.value=Q}),console.log("Emitting properties:updated event with:",{shape:{_mRadius:Q._mRadius,_latlng:Q._latlng,properties:Wt,constructor:Q.constructor.name}}),Q.fire("properties:updated",{shape:Q,properties:Wt}),console.log("Shape properties after update:",{layerRadius:Q._mRadius,propertiesRadius:Q.properties.radius,fullProperties:Q.properties})}Ct==="Semicircle"?nt(Q):Q instanceof se.Circle?pt(Q):Q instanceof se.Rectangle?At(Q):Q instanceof se.Polygon?Y(Q):Q instanceof se.Polyline&&Ut(Q),Ei("Utilisez les points de contrôle pour modifier la forme")}console.log("=== PM:EDIT EVENT END ===")}),et.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(Ot=>Ot.remove()),Ei("Déplacez la forme à l'endroit souhaité")}),et.on("pm:dragend",Ot=>{var Q;if(Ot.layer&&l.value===Ot.layer){const mt=Ot.layer,Pt=((Q=mt.properties)==null?void 0:Q.type)||"unknown",Ct=P(mt,Pt);mt.properties={...Ct},l.value=null,Os(()=>{l.value=mt}),mt.fire("properties:updated",{shape:mt,properties:mt.properties})}setTimeout(()=>{Ei("Cliquez sur la forme pour afficher les points de contrôle")},100)}),et.on("pm:remove",()=>{var Ot;(Ot=document.querySelector(".drawing-help-message"))==null||Ot.remove()}),et.on("pm:select",Ot=>{var mt;const Q=Ot.layer;document.querySelectorAll(".drawing-help-message").forEach(Pt=>Pt.remove()),Q instanceof As||((mt=Q.properties)==null?void 0:mt.type)==="Semicircle"?Ei(`Points de contrôle : <span style="color: #059669">●</span> Ajuster le rayon, <span style="color: #2563EB">●</span> et <span style="color: #DC2626">●</span> Modifier l'ouverture du demi-cercle`):Ei("Utilisez les points de contrôle pour modifier la forme")}),et.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(Ot=>Ot.remove())}),et},R=()=>{if(!t.value||!n.value)return;const z=n.value.getBounds();z.isValid()&&t.value.fitBounds(z,{padding:[50,50],maxZoom:19})},V=z=>{if(t.value){console.log("=== SETTING DRAWING TOOL START ==="),console.log("Current tool:",s.value),console.log("New tool:",z),document.querySelectorAll(".drawing-help-message").forEach(rt=>rt.remove());try{console.log("Disabling all modes...");const rt=t.value.pm;rt.globalEditModeEnabled()&&rt.disableGlobalEditMode(),rt.globalDragModeEnabled()&&rt.disableGlobalDragMode(),rt.globalRemovalModeEnabled()&&rt.disableGlobalRemovalMode(),rt.disableDraw(),C()}catch(rt){console.error("Error disabling modes:",rt)}if(s.value=z,console.log("Tool set to:",s.value),!z){console.log("No tool selected, clearing control points"),C();return}setTimeout(()=>{var rt,dt,et,Mt,Ot,Q,mt;try{switch(console.log("Enabling tool:",z),z){case"Circle":Ei("Cliquez et maintenez pour dessiner un cercle, relâchez pour terminer"),(rt=t.value)==null||rt.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Semicircle":Ei("Cliquez et maintenez pour dessiner un demi-cercle, relâchez pour terminer"),(dt=t.value)==null||dt.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Rectangle":Ei("Cliquez et maintenez pour dessiner un rectangle, relâchez pour terminer"),(et=t.value)==null||et.pm.enableDraw("Rectangle",{finishOn:"mouseup"});break;case"Polygon":Ei("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(Mt=t.value)==null||Mt.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Line":Ei("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(Ot=t.value)==null||Ot.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Text":if(Ei("Cliquez pour ajouter du texte, double-cliquez pour éditer"),t.value){const Pt=Ct=>{if(!t.value||!n.value)return;const xt=p(Ct.latlng);n.value.addLayer(xt),l.value=xt,t.value.off("click",Pt),V("")};t.value.on("click",Pt)}break;case"drag":Ei("Cliquez et maintenez une forme pour la déplacer"),(Q=t.value)==null||Q.pm.enableGlobalDragMode();break;case"delete":Ei("Cliquez sur une forme pour la supprimer"),(mt=t.value)==null||mt.pm.enableGlobalRemovalMode();break}console.log("Tool enabled successfully")}catch(Pt){console.error("Error enabling tool:",Pt)}},100),console.log("=== SETTING DRAWING TOOL END ===")}},G=z=>{var dt;if(!l.value)return;const rt=l.value;if(rt.properties=rt.properties||{},rt.properties.style=rt.properties.style||{},rt.properties.style={...rt.properties.style,...z},rt.properties.type==="text"){const et=rt.properties._textLayer,Mt=(dt=et==null?void 0:et.getElement())==null?void 0:dt.querySelector(".text-annotation");Mt&&Bd(Mt,rt.properties.style);const Ot={color:z.borderColor||rt.properties.style.borderColor,weight:parseInt(z.borderWidth||rt.properties.style.borderWidth),opacity:z.borderOpacity??rt.properties.style.borderOpacity};"setStyle"in rt&&rt.setStyle(Ot)}else{const et={};z.fillColor&&(et.fillColor=z.fillColor),z.fillOpacity!==void 0&&(et.fillOpacity=z.fillOpacity),z.strokeColor&&(et.color=z.strokeColor),z.strokeOpacity!==void 0&&(et.opacity=z.strokeOpacity),z.strokeWidth!==void 0&&(et.weight=z.strokeWidth),z.dashArray&&(et.dashArray=z.dashArray),"setStyle"in rt&&rt.setStyle(et)}},_t=z=>{if(!l.value)return;const rt=l.value;rt.properties={...rt.properties,...z},z.radius&&rt instanceof se.Circle&&rt.setRadius(z.radius)},kt=(z,rt)=>se.latLng((z.lat+rt.lat)/2,(z.lng+rt.lng)/2),pt=z=>{if(!t.value||!n.value)return;C();const rt=z.getLatLng(),dt=z.getRadius(),et=M(rt,"#059669");y.push(et),v(et,z,()=>{const Mt=Math.PI*dt*dt;return[ti(dt,"m","Rayon"),ti(Mt,"m²","Surface")].join("<br>")}),et.on("mousedown",Mt=>{if(!t.value)return;se.DomEvent.stopPropagation(Mt),t.value.dragging.disable(),C(),y=[et];let Ot=!0;const Q=Pt=>{if(!Ot)return;z.setLatLng(Pt.latlng),et.setLatLng(Pt.latlng);const Ct=P(z,"Circle");z.properties={...Ct},z.fire("properties:updated",{shape:z,properties:z.properties})},mt=()=>{Ot=!1,t.value&&(t.value.off("mousemove",Q),document.removeEventListener("mouseup",mt),t.value.dragging.enable(),pt(z))};t.value.on("mousemove",Q),document.addEventListener("mouseup",mt)}),[0,45,90,135,180,225,270,315].forEach(Mt=>{const Ot=Mt*Math.PI/180,Q=se.latLng(rt.lat+dt/111319.9*Math.sin(Ot),rt.lng+dt/(111319.9*Math.cos(rt.lat*Math.PI/180))*Math.cos(Ot)),mt=M(Q,"#2563EB");y.push(mt),v(mt,z,()=>{const Pt=rt.distanceTo(mt.getLatLng());return ti(Pt,"m","Distance du centre")}),mt.on("mousedown",Pt=>{if(!t.value)return;se.DomEvent.stopPropagation(Pt),t.value.dragging.disable(),C(),y=[mt];let Ct=!0;const xt=$t=>{if(!Ct)return;const Lt=rt.distanceTo($t.latlng);z.setRadius(Lt),mt.setLatLng($t.latlng);const gt=P(z,"Circle");z.properties={...gt},z.fire("properties:updated",{shape:z,properties:z.properties})},Wt=()=>{Ct=!1,t.value&&(t.value.off("mousemove",xt),document.removeEventListener("mouseup",Wt),t.value.dragging.enable(),pt(z))};t.value.on("mousemove",xt),document.addEventListener("mouseup",Wt)})})},At=z=>{if(!t.value||!n.value)return;C();const rt=z.getBounds(),dt=[rt.getNorthWest(),rt.getNorthEast(),rt.getSouthEast(),rt.getSouthWest()];dt.forEach((Ot,Q)=>{const mt=M(Ot,"#059669");y.push(mt),v(mt,z,()=>{const Pt=z.getBounds(),Ct=Pt.getNorthEast().distanceTo(Pt.getNorthWest()),xt=Pt.getNorthWest().distanceTo(Pt.getSouthWest()),Wt=Ct*xt;return[ti(Ct,"m","Largeur"),ti(xt,"m","Hauteur"),ti(Wt,"m²","Surface")].join("<br>")}),mt.on("mousedown",Pt=>{if(!t.value)return;se.DomEvent.stopPropagation(Pt),t.value.dragging.disable();let Ct=!0;const xt=$t=>{if(!Ct)return;dt[Q]=$t.latlng;const Lt=se.latLngBounds([[Math.min(dt[0].lat,dt[2].lat),Math.min(dt[0].lng,dt[2].lng)],[Math.max(dt[0].lat,dt[2].lat),Math.max(dt[0].lng,dt[2].lng)]]);z.setBounds(Lt),mt.setLatLng($t.latlng)},Wt=()=>{Ct=!1,t.value&&(t.value.off("mousemove",xt),document.removeEventListener("mouseup",Wt),t.value.dragging.enable(),At(z))};t.value.on("mousemove",xt),document.addEventListener("mouseup",Wt)})});const et=rt.getCenter(),Mt=M(se.latLng(et.lat,et.lng+2e-4),"#2563EB");y.push(Mt),Mt.on("mousedown",Ot=>{if(!t.value)return;se.DomEvent.stopPropagation(Ot),t.value.dragging.disable();const Q=rt.getCenter();let mt=Math.atan2(Ot.latlng.lat-Q.lat,Ot.latlng.lng-Q.lng)*180/Math.PI,Pt=!0;const Ct=Wt=>{if(!Pt||!t.value)return;const $t=Math.atan2(Wt.latlng.lat-Q.lat,Wt.latlng.lng-Q.lng)*180/Math.PI,Lt=$t-mt,gt=t.value.latLngToLayerPoint(Q),ie=dt.map(Qt=>t.value.latLngToLayerPoint(Qt)).map(Qt=>t.value.layerPointToLatLng(Ad(Qt,gt,Lt)));z.setBounds(se.latLngBounds(ie));const ne=t.value.layerPointToLatLng(Ad(t.value.latLngToLayerPoint(Mt.getLatLng()),gt,Lt));Mt.setLatLng(ne),mt=$t,dt.forEach((Qt,bt)=>{dt[bt]=ie[bt]})},xt=()=>{Pt=!1,t.value&&(t.value.off("mousemove",Ct),document.removeEventListener("mouseup",xt),t.value.dragging.enable(),At(z))};t.value.on("mousemove",Ct),document.addEventListener("mouseup",xt)}),Ei("Utilisez le point bleu pour faire pivoter le rectangle")},Ut=z=>{if(!t.value||!n.value)return;C();const rt=z.getLatLngs();rt.forEach((et,Mt)=>{const Ot=M(et,"#059669");y.push(Ot),v(Ot,z,()=>{const Q=rt.reduce((Pt,Ct,xt)=>xt===0?0:Pt+Ct.distanceTo(rt[xt-1]),0);let mt=rt.slice(0,Mt+1).reduce((Pt,Ct,xt)=>xt===0?0:Pt+Ct.distanceTo(rt[xt-1]),0);return[ti(mt,"m","Distance depuis le début"),ti(Q,"m","Longueur totale")].join("<br>")}),Ot.on("mousedown",Q=>{if(!t.value)return;se.DomEvent.stopPropagation(Q),t.value.dragging.disable();let mt=!0;const Pt=xt=>{mt&&(rt[Mt]=xt.latlng,z.setLatLngs(rt),Ot.setLatLng(xt.latlng),dt())},Ct=()=>{mt=!1,t.value&&(t.value.off("mousemove",Pt),document.removeEventListener("mouseup",Ct),t.value.dragging.enable(),Ut(z))};t.value.on("mousemove",Pt),document.addEventListener("mouseup",Ct)})});const dt=()=>{y.slice(rt.length).forEach(et=>{n.value&&n.value.removeLayer(et)}),y=y.slice(0,rt.length);for(let et=0;et<rt.length-1;et++){const Mt=kt(rt[et],rt[et+1]),Ot=M(Mt,"#2563EB");y.push(Ot),v(Ot,z,()=>{const Q=rt[et].distanceTo(rt[et+1]),mt=rt.reduce((Ct,xt,Wt)=>Wt===0?0:Ct+xt.distanceTo(rt[Wt-1]),0),Pt=rt.slice(0,et+1).reduce((Ct,xt,Wt)=>Wt===0?0:Ct+xt.distanceTo(rt[Wt-1]),0)+Q/2;return[ti(Q,"m","Longueur du segment"),ti(Q/2,"m","Demi-segment"),ti(Pt,"m","Distance depuis le début"),ti(mt,"m","Longueur totale")].join("<br>")}),Ot.on("mousedown",Q=>{if(!t.value)return;se.DomEvent.stopPropagation(Q),t.value.dragging.disable();let mt=!0;const Pt=xt=>{mt&&(rt.splice(et+1,0,xt.latlng),z.setLatLngs(rt),Ut(z))},Ct=()=>{mt=!1,t.value&&(t.value.off("mousemove",Pt),document.removeEventListener("mouseup",Ct),t.value.dragging.enable())};t.value.on("mousemove",Pt),document.addEventListener("mouseup",Ct)})}};dt()},Y=z=>{if(!t.value||!n.value)return;C();const rt=z.getLatLngs()[0],dt=rt.map(mt=>[mt.lng,mt.lat]);dt.push(dt[0]);const et=Cc([dt]),Mt=kc(et),Ot=rt.reduce((mt,Pt,Ct)=>{const xt=rt[(Ct+1)%rt.length];return mt+Pt.distanceTo(xt)},0);rt.forEach((mt,Pt)=>{const Ct=M(mt,"#059669");y.push(Ct),v(Ct,z,()=>{const xt=rt[(Pt-1+rt.length)%rt.length],Wt=rt[(Pt+1)%rt.length],$t=mt.distanceTo(xt),Lt=mt.distanceTo(Wt);return[ti($t,"m","Distance au point précédent"),ti(Lt,"m","Distance au point suivant"),ti(Ot,"m","Périmètre total"),ti(Mt,"m²","Surface")].join("<br>")}),Ct.on("mousedown",xt=>{if(se.DomEvent.stopPropagation(xt),!t.value)return;t.value.dragging.disable();let Wt=!0;const $t=gt=>{Wt&&(se.DomEvent.stopPropagation(gt),rt[Pt]=gt.latlng,z.setLatLngs([rt]),Ct.setLatLng(gt.latlng),Q())},Lt=()=>{Wt=!1,t.value&&(t.value.off("mousemove",$t),document.removeEventListener("mouseup",Lt),t.value.dragging.enable())};t.value.on("mousemove",$t),document.addEventListener("mouseup",Lt)})});const Q=()=>{const mt=z.getLatLngs()[0];y.slice(mt.length).forEach(Pt=>{n.value&&n.value.removeLayer(Pt)}),y=y.slice(0,mt.length);for(let Pt=0;Pt<mt.length;Pt++){const Ct=mt[(Pt+1)%mt.length],xt=kt(mt[Pt],Ct),Wt=M(xt,"#2563EB");y.push(Wt),v(Wt,z,()=>{const $t=mt[Pt].distanceTo(Ct);return[ti($t,"m","Longueur du segment"),ti(Ot,"m","Périmètre total"),ti(Mt,"m²","Surface")].join("<br>")})}};Q()},nt=z=>{if(!t.value||!n.value)return;C();const rt=z.getCenter(),dt=z.getRadius(),et=z.getStartAngle(),Mt=z.getStopAngle(),Ot=M(rt,"#059669");y.push(Ot),v(Ot,z,()=>{const Wt=Math.PI*dt*dt/2;return[ti(dt,"m","Rayon"),ti(Wt,"m²","Surface")].join("<br>")});const mt=(et+Mt)/2*Math.PI/180,Pt=se.latLng(rt.lat+dt/111319.9*Math.sin(mt),rt.lng+dt/(111319.9*Math.cos(rt.lat*Math.PI/180))*Math.cos(mt)),Ct=M(Pt,"#2563EB");y.push(Ct),v(Ct,z,()=>ti(dt,"m","Rayon")),[et,Mt].forEach((Wt,$t)=>{const Lt=Wt*Math.PI/180,gt=se.latLng(rt.lat+dt/111319.9*Math.sin(Lt),rt.lng+dt/(111319.9*Math.cos(rt.lat*Math.PI/180))*Math.cos(Lt)),Kt=M(gt,"#DC2626");y.push(Kt),v(Kt,z,()=>`Angle: ${b1(Wt)}`),Kt.on("mousedown",ie=>{if(!t.value)return;se.DomEvent.stopPropagation(ie),t.value.dragging.disable();let ne=!0;const Qt=Ht=>{if(!ne)return;const Xt=((Math.atan2(Ht.latlng.lat-rt.lat,Ht.latlng.lng-rt.lng)*180/Math.PI+270)%360+360)%360;$t===0?z.setAngles(Xt,Mt):z.setAngles(et,Xt),Kt.setLatLng(Ht.latlng),nt(z)},bt=()=>{ne=!1,t.value&&(t.value.off("mousemove",Qt),document.removeEventListener("mouseup",bt),t.value.dragging.enable())};t.value.on("mousemove",Qt),document.addEventListener("mouseup",bt)})}),Ot.on("mousedown",Wt=>{if(!t.value)return;se.DomEvent.stopPropagation(Wt),t.value.dragging.disable();let $t=!0;const Lt=Kt=>{$t&&(z.setCenter(Kt.latlng),Ot.setLatLng(Kt.latlng),nt(z))},gt=()=>{$t=!1,t.value&&(t.value.off("mousemove",Lt),document.removeEventListener("mouseup",gt),t.value.dragging.enable())};t.value.on("mousemove",Lt),document.addEventListener("mouseup",gt)}),Ct.on("mousedown",Wt=>{if(!t.value)return;se.DomEvent.stopPropagation(Wt),t.value.dragging.disable();let $t=!0;const Lt=Kt=>{if(!$t)return;const ie=rt.distanceTo(Kt.latlng);z.setRadius(ie),Ct.setLatLng(Kt.latlng),nt(z)},gt=()=>{$t=!1,t.value&&(t.value.off("mousemove",Lt),document.removeEventListener("mouseup",gt),t.value.dragging.enable())};t.value.on("mousemove",Lt),document.addEventListener("mouseup",gt)})};return Sl(()=>{t.value&&(t.value.remove(),t.value=null)}),{map:t,featureGroup:n,currentTool:s,selectedShape:l,isDrawing:h,initMap:J,setDrawingTool:V,updateShapeStyle:G,updateShapeProperties:_t,updateTextFixedSize:U,adjustView:R}}function w1(){const t=Jt(null),n=Jt(""),s=Jt("Ville"),l={Ville:Ii.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors",maxZoom:19}),Satellite:Ii.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"© Esri",maxZoom:19}),Cadastre:Ii.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{attribution:"Cadastre - Carte © IGN/Geoportail",maxZoom:19})};return{map:t,searchQuery:n,currentBaseMap:s,baseMaps:l,initMap:v=>{t.value=v,Ii.control.layers(l).addTo(v),l[s.value].addTo(v)},searchLocation:async()=>{if(!(!t.value||!n.value))try{const y=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(n.value)}`)).json();if(y&&y.length>0){const{lat:C,lon:M}=y[0];t.value.setView([C,M],13)}}catch(v){console.error("Erreur lors de la recherche de localisation:",v)}},changeBaseMap:v=>{!t.value||!l[v]||(Object.values(l).forEach(y=>{var C;(C=t.value)!=null&&C.hasLayer(y)&&t.value.removeLayer(y)}),l[v].addTo(t.value),s.value=v)}}}const Xc=Hc("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[]}),getters:{getPlanById:t=>n=>t.plans.find(s=>s.id===n),hasUnsavedChanges:t=>t.unsavedChanges,getCurrentPlanHistory:t=>t.planHistory},actions:{async fetchPlans(){var n,s;const t=Hi();this.loading=!0;try{let l="/plans/";t.isDealer?l+="?concessionnaire="+((n=t.user)==null?void 0:n.id):t.isClient&&(l+="?utilisateur="+((s=t.user)==null?void 0:s.id));const h=await Ce.get(l);this.plans=h.data}catch(l){throw this.error="Erreur lors du chargement des plans",l}finally{this.loading=!1}},async fetchPlansWithDetails(){var n,s;const t=Hi();this.loading=!0;try{let l="/plans/";const h={include_details:!0};t.isDealer?h.concessionnaire=(n=t.user)==null?void 0:n.id:t.isClient&&(h.utilisateur=(s=t.user)==null?void 0:s.id);const p=await Ce.get(l,{params:h});return this.plans=p.data,p}catch(l){throw this.error="Erreur lors du chargement des plans",l}finally{this.loading=!1}},async createPlan(t){this.loading=!0;try{const n=await Ce.post("/plans/",t);return this.plans.push(n.data),n.data}catch(n){throw this.error="Erreur lors de la création du plan",n}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(t){var n,s;if(this.unsavedChanges){this.loading=!0;try{const l=await Ce.patch(`/plans/${t}/`,{...this.currentPlan,version:((n=this.currentPlan)==null?void 0:n.version)||1}),h=this.plans.findIndex(p=>p.id===t);return h!==-1&&(this.plans[h]=l.data),((s=this.currentPlan)==null?void 0:s.id)===t&&(this.currentPlan=l.data),this.unsavedChanges=!1,l.data}catch(l){throw this.error="Erreur lors de la sauvegarde du plan",l}finally{this.loading=!1}}},async updatePlanDetails(t,{nom:n,description:s}){var l;try{this.loading=!0,this.error=null;const h=await Ce.patch(`/plans/${t}/`,{nom:n,description:s}),p=this.plans.findIndex(f=>f.id===t);return p!==-1&&(this.plans[p]={...this.plans[p],...h.data}),((l=this.currentPlan)==null?void 0:l.id)===t&&(this.currentPlan={...this.currentPlan,...h.data}),h.data}catch(h){throw this.error=h.message,h}finally{this.loading=!1}},async fetchPlanHistory(t){this.loading=!0;try{const n=await Ce.get(`/plans/${t}/historique/`);return this.planHistory=n.data,n.data}catch(n){throw this.error="Erreur lors de la récupération de l'historique",n}finally{this.loading=!1}},async restorePlanVersion(t,n){var s;this.loading=!0;try{const l=await Ce.post(`/plans/${t}/restaurer/`,{version_id:n});((s=this.currentPlan)==null?void 0:s.id)===t&&(this.currentPlan=l.data);const h=this.plans.findIndex(p=>p.id===t);return h!==-1&&(this.plans[h]=l.data),l.data}catch(l){throw this.error="Erreur lors de la restauration de la version",l}finally{this.loading=!1}},setCurrentPlan(t){this.currentPlan=t,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.stopAutoSave()},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(t){var n;this.loading=!0;try{await Ce.delete(`/plans/${t}/`),this.plans=this.plans.filter(s=>s.id!==t),((n=this.currentPlan)==null?void 0:n.id)===t&&this.clearCurrentPlan()}catch(s){throw this.error="Erreur lors de la suppression du plan",s}finally{this.loading=!1}}}}),Up=Hc("drawing",{state:()=>({currentPlanId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null}),getters:{hasUnsavedChanges:t=>t.unsavedChanges,getCurrentElements:t=>t.elements,getSelectedElement:t=>t.selectedElement,getCurrentTool:t=>t.currentTool,getCurrentStyle:t=>t.currentStyle,getLastUsedType:t=>t.lastUsedType},actions:{setCurrentPlan(t){this.currentPlanId=t,t===null&&this.clearElements()},clearCurrentPlan(){this.currentPlanId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1},addElement(t){!t.type_forme&&this.lastUsedType&&(t.type_forme=this.lastUsedType),this.elements.push(t),this.unsavedChanges=!0},updateElement(t){const n=this.elements.findIndex(s=>s.id===t.id);if(n!==-1){const s=this.elements[n].type_forme;this.elements[n]={...t,type_forme:s},this.unsavedChanges=!0}},removeElement(t){const n=this.elements.findIndex(s=>s.id===t);n!==-1&&(this.elements.splice(n,1),this.unsavedChanges=!0)},selectElement(t){this.selectedElement=t},setCurrentTool(t){this.currentTool=t,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(t)&&(this.lastUsedType=t)},setCurrentStyle(t){this.currentStyle={...this.currentStyle,...t}},async loadPlanElements(t){var n;this.loading=!0;try{const l=(await Ce.get(`/plans/${t}/`)).data;this.elements=l.formes.map(h=>({...h,type_forme:h.type_forme})),this.currentPlanId=t,this.unsavedChanges=!1,l.preferences&&(l.preferences.currentTool&&this.setCurrentTool(l.preferences.currentTool),l.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...l.preferences.currentStyle}),l.preferences.lastUsedType&&(this.lastUsedType=l.preferences.lastUsedType)),(n=this.selectedElement)!=null&&n.type_forme&&this.setCurrentTool(this.selectedElement.type_forme)}catch(s){throw console.error("Erreur lors du chargement des éléments:",s),this.error="Erreur lors du chargement des éléments du plan",s}finally{this.loading=!1}},async saveToPlan(t){Xc(),this.loading=!0;try{const n=t||this.currentPlanId;if(!n)throw new Error("Aucun plan sélectionné pour la sauvegarde");const s=this.elements.map(h=>({...h,type_forme:h.type_forme||this.lastUsedType})),l=await Ce.post(`/plans/${n}/save_with_elements/`,{formes:s,connexions:[],annotations:[],preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}});return this.elements=l.data.formes.map(h=>({...h,type_forme:h.type_forme})),this.unsavedChanges=!1,l.data}catch(n){throw console.error("Erreur lors de la sauvegarde:",n),this.error="Erreur lors de la sauvegarde du plan",n}finally{this.loading=!1}}}}),L1={class:"h-full flex"},C1={class:"flex-1 relative"},E1={class:"absolute bottom-6 left-6 z-[1000]"},k1={class:"bg-white rounded-lg shadow-lg p-3 mb-3"},M1={class:"grid grid-cols-3 gap-2"},P1=["onClick"],S1={class:"bg-white rounded-lg shadow-lg p-3 space-y-2"},B1={class:"flex flex-col mb-2"},A1={class:"text-xl font-bold text-gray-800 mb-1"},T1={key:0,class:"text-sm text-gray-500"},D1={class:"grid grid-cols-1 gap-2"},R1=["disabled"],O1={key:0,class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},I1={key:1,class:"animate-spin h-5 w-5 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},F1={key:0,class:"text-xs text-gray-500 mt-2"},z1={key:0,class:"fixed bottom-6 right-6 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg shadow-lg z-[2000] flex items-center transform transition-all duration-300 ease-in-out",role:"alert"},N1={class:"drawing-tools-container absolute top-4 right-4 z-[1000]"},$1={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},j1={class:"bg-white rounded-lg p-6 max-w-md w-full mx-4"},U1={class:"flex justify-between items-center mb-4"},G1={class:"flex justify-end space-x-3"},V1={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},H1={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4"},Z1={class:"flex justify-between items-center mb-4"},q1={key:0,class:"space-y-4"},K1={key:0,class:"space-y-2"},W1={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},J1=["onClick"],X1={class:"font-medium text-gray-900"},Y1={class:"text-sm text-gray-500"},Q1={key:1,class:"space-y-2"},tx={class:"flex items-center mb-4"},ex={class:"text-sm text-gray-600"},ix={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},nx=["onClick"],rx={class:"font-medium text-gray-900"},sx={class:"text-sm text-gray-500"},ox={key:2,class:"space-y-2"},ax={class:"flex items-center mb-4"},lx={class:"text-sm text-gray-600"},ux={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},cx=["onClick"],hx={class:"font-medium text-gray-900"},dx={class:"text-sm text-gray-500"},fx={class:"text-xs text-gray-400 mt-1"},px={key:1,class:"max-h-96 overflow-y-auto"},mx={key:0,class:"text-center py-8"},gx={key:1,class:"space-y-2"},_x=["onClick"],yx={class:"font-medium text-gray-900"},vx={class:"text-sm text-gray-500"},bx={class:"text-xs text-gray-400 mt-1"},Td=Yi({__name:"MapView",setup(t){const n=Jt(null),s=Xc(),l=Up(),h=Jt([]),p=Jt(null),f=Jt({});Jt({mousedown:null,mousemove:null,mouseup:null});const{currentTool:v,selectedShape:y,map:C,initMap:M,setDrawingTool:P,updateShapeStyle:U,updateShapeProperties:J,featureGroup:R,adjustView:V}=x1(),{initMap:G,baseMaps:_t,currentBaseMap:kt,changeBaseMap:pt}=w1();Hs();const At=Jt(!1),Ut=Jt(!1),Y=Jt(null),nt=Jt({nom:"",description:""}),z=Jt(!1),rt=Jt(!1),dt=Hi(),et=Jt([]),Mt=Jt([]),Ot=Jt([]),Q=Jt(null),mt=Jt(null),Pt=Jt(!1),Ct=Jt(!1),xt=Jt(!1);function Wt(at){const X=at.getCenter(),jt=at.getZoom(),Bt={lat:X.lat,lng:X.lng,zoom:jt};document.cookie=`mapState=${JSON.stringify(Bt)};max-age=2592000;path=/`}function $t(){const X=document.cookie.split(";").find(jt=>jt.trim().startsWith("mapState="));if(X)try{return JSON.parse(X.split("=")[1])}catch(jt){return console.error("Erreur lors de la lecture du cookie de position:",jt),null}return null}Er(async()=>{if(n.value){const at=$t(),X=at?[at.lat,at.lng]:[46.603354,1.888334],jt=(at==null?void 0:at.zoom)??6,Bt=M(n.value,X,jt);Bt.pm.setLang("fr"),Bt.pm.addControls({rotateMode:!1}),Ii.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles © Esri — Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",maxZoom:19}).addTo(Bt),Bt&&(G(Bt),Bt.on("moveend",()=>{Wt(Bt)}),window.addEventListener("map-set-location",Tt=>{if(Bt&&Tt.detail){const{lat:Dt,lng:Zt,zoom:ae}=Tt.detail;Bt.flyTo([Dt,Zt],ae,{duration:1.5,easeLinearity:.25})}}),await s.fetchPlans(),s.currentPlan&&(await l.loadPlanElements(s.currentPlan.id),await ie(s.currentPlan.id)),dt.isAdmin&&await Xt())}}),vn(()=>l.hasUnsavedChanges,at=>{at&&Y.value&&s.markUnsavedChanges()}),vn(C,async at=>{at&&s.currentPlan&&(Kt(),await l.loadPlanElements(s.currentPlan.id),await ie(s.currentPlan.id))}),vn(()=>s.currentPlan,async at=>{at?(Y.value=at,C.value&&(Kt(),await l.loadPlanElements(at.id),await ie(at.id))):(Y.value=null,Kt())},{immediate:!0}),gf(()=>{C.value&&C.value.off("moveend")}),Jt({rectangle:0,circle:0,semicircle:0,line:0}),vn(()=>f.value,at=>{Lt()},{deep:!0});function Lt(){console.log("Updating drawing style:",f.value)}async function gt(){try{const at=await s.createPlan(nt.value);Y.value=at,s.setCurrentPlan(at),l.setCurrentPlan(at.id),At.value=!1,nt.value={nom:"",description:""}}catch(at){console.error("Erreur lors de la création du plan:",at)}}function Kt(){R.value&&R.value.clearLayers(),h.value=[],y.value=null,p.value=null}async function ie(at){try{Kt(),await l.loadPlanElements(at);const X=s.getPlanById(at);X&&(Y.value=X,s.setCurrentPlan(X),l.setCurrentPlan(X.id),l.getCurrentElements.forEach(jt=>{if(!R.value||!jt.data)return;let Bt;const{style:Tt={},...Dt}=jt.data;switch(jt.type_forme){case"CERCLE":Bt=Ii.circle([Dt.center[1],Dt.center[0]],{...Tt,radius:Dt.radius});break;case"RECTANGLE":Bt=Ii.rectangle([[Dt.bounds.southWest[1],Dt.bounds.southWest[0]],[Dt.bounds.northEast[1],Dt.bounds.northEast[0]]],Tt);break;case"DEMI_CERCLE":Bt=new As([Dt.center[1],Dt.center[0]],Dt.radius,Dt.startAngle,Dt.endAngle,Tt);break;case"LIGNE":Bt=Ii.polyline(Dt.points.map(ae=>[ae[1],ae[0]]),Tt);break;case"TEXTE":const Zt=Ii.divIcon({html:`<div class="text-annotation" style="font-size: ${Tt.fontSize||"14px"}">${Dt.content}</div>`,className:"text-container"});Bt=Ii.marker([Dt.position[1],Dt.position[0]],{icon:Zt,...Tt});break}Bt&&(Bt.properties={type:jt.type_forme,style:Tt,...Dt},R.value.addLayer(Bt),h.value.push({id:jt.id,type:jt.type_forme,layer:Bt,properties:Bt.properties}),Dt.rotation&&typeof Bt.setRotation=="function"&&Bt.setRotation(Dt.rotation))})),Ut.value=!1}catch(X){console.error("Erreur lors du chargement du plan:",X)}}async function ne(){if(!Y.value||!R.value){console.warn("Aucun plan actif ou groupe de formes à sauvegarder");return}z.value=!0;try{const at=[];R.value.eachLayer(X=>{var Dt,Zt,ae,de,ve,Se,Ee,ii;const jt={style:{color:((Dt=X.options)==null?void 0:Dt.color)||"#3388ff",fillColor:((Zt=X.options)==null?void 0:Zt.fillColor)||"#3388ff",fillOpacity:((ae=X.options)==null?void 0:ae.fillOpacity)||.2,weight:((de=X.options)==null?void 0:de.weight)||3,opacity:((ve=X.options)==null?void 0:ve.opacity)||1}};let Bt,Tt;if(X instanceof Ii.Circle)Bt="CERCLE",Tt={...jt,center:[X.getLatLng().lng,X.getLatLng().lat],radius:X.getRadius()};else if(X instanceof Ii.Rectangle){Bt="RECTANGLE";const Ne=X.getBounds();Tt={...jt,bounds:{southWest:[Ne.getSouthWest().lng,Ne.getSouthWest().lat],northEast:[Ne.getNorthEast().lng,Ne.getNorthEast().lat]}}}else((Se=X.properties)==null?void 0:Se.type)==="Semicircle"?(Bt="DEMI_CERCLE",Tt={...jt,center:[X.getLatLng().lng,X.getLatLng().lat],radius:X.getRadius(),startAngle:X.properties.style.startAngle||0,endAngle:X.properties.style.stopAngle||180}):X instanceof Ii.Polyline&&!(X instanceof Ii.Polygon)?(Bt="LIGNE",Tt={...jt,points:X.getLatLngs().map(Ne=>[Ne.lng,Ne.lat])}):((Ee=X.properties)==null?void 0:Ee.type)==="text"&&(Bt="TEXTE",Tt={...jt,position:[X.getLatLng().lng,X.getLatLng().lat],content:X.properties.text,style:{...X.properties.style,fontSize:X.properties.style.fontSize}});Bt&&Tt&&at.push({id:X.id,type_forme:Bt,data:{...Tt,rotation:((ii=X.properties)==null?void 0:ii.rotation)||0}})}),l.elements=at,await l.saveToPlan(Y.value.id),rt.value=!0,setTimeout(()=>{rt.value=!1},3e3)}catch(at){console.error("Erreur lors de la sauvegarde du plan:",at)}finally{z.value=!1}}Sl(()=>{s.clearCurrentPlan(),l.clearCurrentPlan()});function Qt(at){J(at)}function bt(at){try{const X=new Date(at);return isNaN(X.getTime())?(console.error("Date invalide reçue:",at),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(X)}catch(X){return console.error("Erreur lors du formatage de la date:",X),"Date invalide"}}const Ht=()=>{V()},Vt=()=>{y.value&&R.value&&(P(""),R.value.removeLayer(y.value),y.value=null)};async function Xt(){Pt.value=!0;try{const at=await Ce.get("/users/dealers/");et.value=at.data}catch(at){console.error("Erreur lors du chargement des concessionnaires:",at)}finally{Pt.value=!1}}async function te(at){Ct.value=!0;try{const X=await Ce.get(`/users/dealers/${at}/clients/`);Mt.value=X.data}catch(X){console.error("Erreur lors du chargement des clients:",X)}finally{Ct.value=!1}}async function $(at){xt.value=!0;try{const X=await Ce.get(`/plans/?utilisateur=${at}`);Ot.value=X.data}catch(X){console.error("Erreur lors du chargement des plans:",X)}finally{xt.value=!1}}function H(at){Q.value=at,te(at.id),mt.value=null,Ot.value=[]}function ot(at){mt.value=at,$(at.id)}function St(){Q.value=null,mt.value=null,Ot.value=[],Mt.value=[]}function It(){mt.value=null,Ot.value=[]}return(at,X)=>{var jt,Bt,Tt;return Rt(),Nt("div",L1,[w("div",C1,[w("div",{ref_key:"mapContainer",ref:n,class:"absolute inset-0 w-full h-full"},null,512),w("div",E1,[w("div",k1,[X[7]||(X[7]=w("h2",{class:"text-sm font-semibold text-gray-700 mb-2"},"Type de carte",-1)),w("div",M1,[(Rt(!0),Nt(Oe,null,ei(Re(_t),(Dt,Zt)=>(Rt(),Nt("button",{key:Zt,onClick:ae=>Re(pt)(Zt),class:un(["px-3 py-2 text-sm rounded-md transition-colors duration-200",{"bg-primary-600 text-white":Re(kt)===Zt,"bg-gray-100 text-gray-700 hover:bg-gray-200":Re(kt)!==Zt}])},qt(Zt),11,P1))),128))])]),w("div",S1,[w("div",B1,[w("h1",A1,qt(((jt=Y.value)==null?void 0:jt.nom)||"Aucun plan chargé"),1),(Bt=Y.value)!=null&&Bt.description?(Rt(),Nt("span",T1,qt(Y.value.description),1)):me("",!0)]),w("div",D1,[w("button",{onClick:X[0]||(X[0]=Dt=>At.value=!0),class:"flex items-center px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},X[8]||(X[8]=[w("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),yi(" Nouveau plan ")])),w("button",{onClick:X[1]||(X[1]=Dt=>Ut.value=!0),class:"flex items-center px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},X[9]||(X[9]=[w("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),yi(" Charger un plan ")])),Y.value?(Rt(),Nt("button",{key:0,onClick:ne,class:"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors duration-200",disabled:z.value},[z.value?(Rt(),Nt("svg",I1,X[11]||(X[11]=[w("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),w("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Rt(),Nt("svg",O1,X[10]||(X[10]=[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"},null,-1)]))),yi(" "+qt(z.value?"Sauvegarde...":"Enregistrer"),1)],8,R1)):me("",!0),w("button",{onClick:Ht,class:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors duration-200"},X[12]||(X[12]=[w("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1),yi(" Ajuster la vue ")]))]),(Tt=Y.value)!=null&&Tt.date_modification?(Rt(),Nt("div",F1," Dernière sauvegarde : "+qt(bt(Y.value.date_modification)),1)):me("",!0)])]),rt.value?(Rt(),Nt("div",z1,X[13]||(X[13]=[w("svg",{class:"w-5 h-5 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),w("span",{class:"font-medium"},"Plan sauvegardé avec succès",-1)]))):me("",!0),w("div",N1,[ci(y1,{"current-tool":Re(v),"selected-shape":Re(y),onToolChange:Re(P),onStyleUpdate:Re(U),onPropertiesUpdate:Qt,onDeleteShape:Vt},null,8,["current-tool","selected-shape","onToolChange","onStyleUpdate"])]),At.value?(Rt(),Nt("div",$1,[w("div",j1,[w("div",U1,[X[15]||(X[15]=w("h2",{class:"text-xl font-semibold text-gray-900"},"Créer un nouveau plan",-1)),w("button",{onClick:X[2]||(X[2]=Dt=>At.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},X[14]||(X[14]=[w("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),w("form",{onSubmit:Ns(gt,["prevent"]),class:"space-y-4"},[w("div",null,[X[16]||(X[16]=w("label",{for:"nom",class:"block text-sm font-medium text-gray-700"},"Nom du plan",-1)),De(w("input",{type:"text",id:"nom","onUpdate:modelValue":X[3]||(X[3]=Dt=>nt.value.nom=Dt),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",required:"",placeholder:"Entrez le nom du plan"},null,512),[[qe,nt.value.nom]])]),w("div",null,[X[17]||(X[17]=w("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),De(w("textarea",{id:"description","onUpdate:modelValue":X[4]||(X[4]=Dt=>nt.value.description=Dt),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:"Décrivez votre plan"},null,512),[[qe,nt.value.description]])]),w("div",G1,[w("button",{type:"button",onClick:X[5]||(X[5]=Dt=>At.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"}," Annuler "),X[18]||(X[18]=w("button",{type:"submit",class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md hover:bg-primary-700"}," Créer ",-1))])],32)])])):me("",!0),Ut.value?(Rt(),Nt("div",V1,[w("div",H1,[w("div",Z1,[X[20]||(X[20]=w("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),w("button",{onClick:X[6]||(X[6]=Dt=>Ut.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},X[19]||(X[19]=[w("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),Re(dt).isAdmin?(Rt(),Nt("div",q1,[Q.value?mt.value?(Rt(),Nt("div",ox,[w("div",ax,[w("button",{onClick:It,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},X[29]||(X[29]=[w("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),yi(" Retour aux clients ")])),X[30]||(X[30]=w("span",{class:"mx-2 text-gray-400"},"|",-1)),w("span",lx,qt(Q.value.company_name)+" > "+qt(mt.value.first_name)+" "+qt(mt.value.last_name),1)]),X[32]||(X[32]=w("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),w("div",ux,[xt.value?(Rt(),Nt(Oe,{key:0},ei(3,Dt=>w("div",{key:Dt,class:"animate-pulse"},X[31]||(X[31]=[w("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[w("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),w("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),w("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Rt(!0),Nt(Oe,{key:1},ei(Ot.value,Dt=>(Rt(),Nt("button",{key:Dt.id,onClick:Zt=>ie(Dt.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[w("div",hx,qt(Dt.nom),1),w("div",dx,qt(Dt.description),1),w("div",fx," Modifié le "+qt(bt(Dt.date_modification)),1)],8,cx))),128))])])):(Rt(),Nt("div",Q1,[w("div",tx,[w("button",{onClick:St,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},X[24]||(X[24]=[w("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),yi(" Retour aux concessionnaires ")])),X[25]||(X[25]=w("span",{class:"mx-2 text-gray-400"},"|",-1)),w("span",ex,qt(Q.value.company_name),1)]),X[28]||(X[28]=w("h3",{class:"font-medium text-gray-700"},"Sélectionnez un client",-1)),w("div",ix,[Ct.value?(Rt(),Nt(Oe,{key:0},ei(3,Dt=>w("div",{key:Dt,class:"animate-pulse"},X[26]||(X[26]=[w("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[w("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),w("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Rt(!0),Nt(Oe,{key:1},ei(Mt.value,Dt=>(Rt(),Nt("button",{key:Dt.id,onClick:Zt=>ot(Dt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[w("div",null,[w("div",rx,qt(Dt.first_name)+" "+qt(Dt.last_name),1),w("div",sx,qt(Dt.email),1)]),X[27]||(X[27]=w("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,nx))),128))])])):(Rt(),Nt("div",K1,[X[23]||(X[23]=w("h3",{class:"font-medium text-gray-700"},"Sélectionnez un concessionnaire",-1)),w("div",W1,[Pt.value?(Rt(),Nt(Oe,{key:0},ei(3,Dt=>w("div",{key:Dt,class:"animate-pulse"},X[21]||(X[21]=[w("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[w("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),w("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Rt(!0),Nt(Oe,{key:1},ei(et.value,Dt=>(Rt(),Nt("button",{key:Dt.id,onClick:Zt=>H(Dt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[w("div",null,[w("div",X1,qt(Dt.company_name),1),w("div",Y1,qt(Dt.email),1)]),X[22]||(X[22]=w("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,J1))),128))])]))])):(Rt(),Nt("div",px,[Re(s).plans.length===0?(Rt(),Nt("div",mx,X[33]||(X[33]=[w("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(Rt(),Nt("div",gx,[(Rt(!0),Nt(Oe,null,ei(Re(s).plans,Dt=>(Rt(),Nt("button",{key:Dt.id,onClick:Zt=>ie(Dt.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[w("div",yx,qt(Dt.nom),1),w("div",vx,qt(Dt.description),1),w("div",bx," Modifié le "+qt(bt(Dt.date_modification)),1)],8,_x))),128))]))]))])])):me("",!0)])])}}}),xx={class:"fixed inset-0 z-50 overflow-y-auto"},wx={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},Lx={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},Cx={class:"mt-3 text-center sm:mt-0 sm:text-left"},Ex={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},kx={class:"mt-4"},Mx={class:"grid grid-cols-2 gap-4"},Px=["disabled"],Sx={key:0,class:"mt-1 text-sm text-gray-500"},Bx={class:"grid grid-cols-2 gap-4"},Ax={key:0},Tx=["disabled"],Dx=["value"],Rx={key:1},Ox=["disabled"],Ix=["value"],Fx={key:0},zx={class:"grid grid-cols-2 gap-4"},Nx={key:1,class:"rounded-md bg-red-50 p-4"},$x={class:"flex"},jx={class:"ml-3"},Ux={class:"text-sm font-medium text-red-800"},Gx={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense"},Vx=["disabled"],Hx={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Gp=Yi({__name:"UserFormModal",props:{user:{type:Object,default:null},dealers:{type:Array,default:()=>[]},isAdmin:{type:Boolean,required:!0},currentDealer:{type:String,default:""}},emits:["close","save"],setup(t,{emit:n}){var R,V,G,_t,kt,pt,At;const s=t,l=n,h=Hi(),p=Jt(!1),f=Jt(null),v=Pe(()=>{var Ut;return s.isAdmin?s.user?s.user.id!==((Ut=h.user)==null?void 0:Ut.id):!0:!1}),y=Pe(()=>s.isAdmin?[{value:"ADMIN",label:"Administrateur"},{value:"CONCESSIONNAIRE",label:"Concessionnaire"},{value:"UTILISATEUR",label:"Client"}]:[{value:"UTILISATEUR",label:"Client"}]),C=Pe(()=>s.isAdmin?P.role==="UTILISATEUR":!0),M=Pe(()=>s.dealers.filter(Ut=>Ut.role==="CONCESSIONNAIRE")),P=ir({first_name:((R=s.user)==null?void 0:R.first_name)||"",last_name:((V=s.user)==null?void 0:V.last_name)||"",email:((G=s.user)==null?void 0:G.email)||"",username:((_t=s.user)==null?void 0:_t.username)||"",company_name:((kt=s.user)==null?void 0:kt.company_name)||"",role:((pt=s.user)==null?void 0:pt.role)||(s.isAdmin?"":"UTILISATEUR"),dealer:((At=s.user)==null?void 0:At.concessionnaire)||s.currentDealer,password:"",password_confirm:""}),U=()=>{if(!P.first_name||!P.last_name)return f.value="Le prénom et le nom sont requis",!1;if(!P.email)return f.value="L'email est requis",!1;if(!P.username)return f.value="Le nom d'utilisateur est requis",!1;if(!s.user){if(!P.password)return f.value="Le mot de passe est requis",!1;if(P.password!==P.password_confirm)return f.value="Les mots de passe ne correspondent pas",!1}return P.role==="UTILISATEUR"&&!P.dealer?(f.value="Un concessionnaire doit être sélectionné pour un client",!1):!0},J=async()=>{var Ut;if(f.value=null,!!U()){p.value=!0;try{const Y={...P};(Ut=s.user)!=null&&Ut.id&&(Y.id=s.user.id,delete Y.password,delete Y.password_confirm),Y.role==="UTILISATEUR"&&Y.dealer&&(Y.concessionnaire=Y.dealer),delete Y.dealer,await l("save",Y),l("close")}catch(Y){console.error("Erreur formulaire:",Y),f.value=Y.message,p.value=!1}}};return(Ut,Y)=>(Rt(),Nt("div",xx,[w("div",wx,[Y[24]||(Y[24]=w("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[w("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),Y[25]||(Y[25]=w("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),w("div",Lx,[w("div",null,[w("div",Cx,[w("h3",Ex,qt(t.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),w("div",kx,[w("form",{onSubmit:Ns(J,["prevent"]),class:"space-y-4"},[w("div",Mx,[w("div",null,[Y[10]||(Y[10]=w("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prénom",-1)),De(w("input",{type:"text",id:"first_name","onUpdate:modelValue":Y[0]||(Y[0]=nt=>P.first_name=nt),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[qe,P.first_name]])]),w("div",null,[Y[11]||(Y[11]=w("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),De(w("input",{type:"text",id:"last_name","onUpdate:modelValue":Y[1]||(Y[1]=nt=>P.last_name=nt),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[qe,P.last_name]])])]),w("div",null,[Y[12]||(Y[12]=w("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),De(w("input",{type:"email",id:"email","onUpdate:modelValue":Y[2]||(Y[2]=nt=>P.email=nt),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[qe,P.email]])]),w("div",null,[Y[13]||(Y[13]=w("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),De(w("input",{type:"text",id:"username","onUpdate:modelValue":Y[3]||(Y[3]=nt=>P.username=nt),required:"",disabled:!!s.user,class:un(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",{"bg-gray-100":!!s.user}])},null,10,Px),[[qe,P.username]]),s.user?(Rt(),Nt("p",Sx," Le nom d'utilisateur ne peut pas être modifié après la création. ")):me("",!0)]),w("div",null,[Y[14]||(Y[14]=w("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Nom de l'entreprise",-1)),De(w("input",{type:"text",id:"company_name","onUpdate:modelValue":Y[4]||(Y[4]=nt=>P.company_name=nt),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[qe,P.company_name]])]),w("div",Bx,[s.isAdmin?(Rt(),Nt("div",Ax,[Y[16]||(Y[16]=w("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Rôle",-1)),De(w("select",{id:"role","onUpdate:modelValue":Y[5]||(Y[5]=nt=>P.role=nt),required:"",disabled:!v.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Y[15]||(Y[15]=w("option",{value:""},"Sélectionner un rôle",-1)),(Rt(!0),Nt(Oe,null,ei(y.value,nt=>(Rt(),Nt("option",{key:nt.value,value:nt.value},qt(nt.label),9,Dx))),128))],8,Tx),[[Fs,P.role]])])):me("",!0),C.value?(Rt(),Nt("div",Rx,[Y[18]||(Y[18]=w("label",{for:"dealer",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),De(w("select",{id:"dealer","onUpdate:modelValue":Y[6]||(Y[6]=nt=>P.dealer=nt),required:"",disabled:!s.isAdmin,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Y[17]||(Y[17]=w("option",{value:""},"Sélectionner un concessionnaire",-1)),(Rt(!0),Nt(Oe,null,ei(M.value,nt=>(Rt(),Nt("option",{key:nt.id,value:nt.id},qt(nt.company_name||`${nt.first_name} ${nt.last_name}`),9,Ix))),128))],8,Ox),[[Fs,P.dealer]])])):me("",!0)]),t.user?me("",!0):(Rt(),Nt("div",Fx,[w("div",zx,[w("div",null,[Y[19]||(Y[19]=w("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),De(w("input",{type:"password",id:"password","onUpdate:modelValue":Y[7]||(Y[7]=nt=>P.password=nt),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[qe,P.password]])]),w("div",null,[Y[20]||(Y[20]=w("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),De(w("input",{type:"password",id:"password_confirm","onUpdate:modelValue":Y[8]||(Y[8]=nt=>P.password_confirm=nt),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[qe,P.password_confirm]])])]),Y[21]||(Y[21]=w("p",{class:"mt-1 text-sm text-gray-500"}," L'utilisateur devra changer son mot de passe à sa première connexion. ",-1))])),f.value?(Rt(),Nt("div",Nx,[w("div",$x,[Y[22]||(Y[22]=w("div",{class:"flex-shrink-0"},[w("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),w("div",jx,[w("h3",Ux,qt(f.value),1)])])])):me("",!0),w("div",Gx,[w("button",{type:"submit",disabled:p.value,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:col-start-2 sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},[p.value?(Rt(),Nt("svg",Hx,Y[23]||(Y[23]=[w("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),w("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):me("",!0),yi(" "+qt(p.value?"Enregistrement...":"Enregistrer"),1)],8,Vx),w("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:col-start-1 sm:text-sm",onClick:Y[9]||(Y[9]=nt=>Ut.$emit("close"))}," Annuler ")])],32)])])])])])]))}}),Zx={class:"fixed inset-0 z-50 overflow-y-auto"},qx={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},Kx={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},Wx={class:"sm:flex sm:items-start"},Jx={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},Xx={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},Yx={class:"mt-2"},Qx={class:"text-sm text-gray-500"},tw={class:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},Vp=Yi({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(t){return(n,s)=>(Rt(),Nt("div",Zx,[w("div",qx,[s[3]||(s[3]=w("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[w("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),s[4]||(s[4]=w("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),w("div",Kx,[w("div",Wx,[s[2]||(s[2]=w("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[w("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),w("div",Jx,[w("h3",Xx,qt(t.title),1),w("div",Yx,[w("p",Qx,qt(t.message),1)])])]),w("div",tw,[w("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:s[0]||(s[0]=l=>n.$emit("confirm"))}," Confirmer "),w("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:w-auto sm:text-sm",onClick:s[1]||(s[1]=l=>n.$emit("cancel"))}," Annuler ")])])])]))}}),ew={class:"h-full bg-gray-50"},iw={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},nw={class:"flex justify-between items-center mb-8"},rw={class:"text-3xl font-extrabold text-gray-900"},sw={class:"bg-white shadow rounded-lg mb-6 p-4"},ow={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},aw={key:0},lw=["placeholder"],uw={key:1},cw=["value"],hw={class:"bg-white shadow rounded-lg"},dw={class:"overflow-x-auto"},fw={class:"min-w-full divide-y divide-gray-200"},pw={class:"bg-gray-50"},mw={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},gw={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},_w={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},yw={class:"bg-white divide-y divide-gray-200"},vw={class:"px-6 py-4 whitespace-nowrap"},bw={class:"flex items-center"},xw={class:"flex-shrink-0 h-10 w-10"},ww={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},Lw={class:"text-primary-600 font-medium"},Cw={class:"ml-4"},Ew={class:"text-sm font-medium text-gray-900"},kw={key:0,class:"text-gray-500"},Mw={class:"text-sm text-gray-500"},Pw={class:"px-6 py-4 whitespace-nowrap"},Sw={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Bw={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Aw={class:"px-6 py-4 whitespace-nowrap"},Tw={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Dw=["onClick"],Rw=["onClick"],Ow=Yi({__name:"UserListView",setup(t){const n=Hi(),s=Jt([]),l=Jt([]),h=Jt(!1),p=Jt(!1),f=Jt(null),v=Jt(null),y=ir({role:"",search:"",dealer:""}),C=Pe(()=>n.isAdmin),M=Pe(()=>n.isDealer),P=Pe(()=>s.value.filter(et=>et.role==="CONCESSIONNAIRE")),U=Pe(()=>{var Mt;console.log("Computing filtered users..."),console.log("Current users:",s.value),console.log("Is admin:",C.value),console.log("Is dealer:",M.value),console.log("Current filters:",y);let et=s.value;if(M.value&&(console.log("Filtering for dealer:",(Mt=n.user)==null?void 0:Mt.id),et=et.filter(Ot=>{var Q;return Ot.role==="UTILISATEUR"&&Ot.dealer===((Q=n.user)==null?void 0:Q.id)}),console.log("Filtered users for dealer:",et)),C.value&&(y.role&&(et=et.filter(Ot=>Ot.role===y.role),console.log("Filtered by role:",et)),y.dealer&&(et=et.filter(Ot=>String(Ot.dealer)===String(y.dealer)),console.log("Filtered by dealer:",et))),y.search){const Ot=y.search.toLowerCase();et=et.filter(Q=>Q.username.toLowerCase().includes(Ot)||Q.email.toLowerCase().includes(Ot)||Q.first_name.toLowerCase().includes(Ot)||Q.last_name.toLowerCase().includes(Ot)||Q.company_name&&Q.company_name.toLowerCase().includes(Ot)),console.log("Filtered by search:",et)}return console.log("Final filtered users:",et),et});Er(async()=>{await J(),C.value&&await R()});async function J(){try{console.log("Fetching users...");const et=await Ce.get("/users/");console.log("Users API response:",et.data),s.value=et.data,console.log("Users after assignment:",s.value)}catch(et){console.error("Erreur lors de la récupération des utilisateurs:",et)}}async function R(){try{const et=await Ce.get("/users/",{params:{role:"CONCESSIONNAIRE"}});l.value=et.data}catch(et){console.error("Erreur lors de la récupération des concessionnaires:",et)}}function V(){f.value=null,h.value=!0}function G(et){f.value={...et},h.value=!0}function _t(){h.value=!1,f.value=null}async function kt(et){var Mt;try{let Ot;const Q=!!et.id,mt={...et};return delete mt.dealer_name,delete mt.full_name,delete mt.user_type,delete mt.permissions,Q?Ot=await Ce.patch(`/users/${et.id}/`,mt):Ot=await Ce.post("/users/",mt),await J(),_t(),Ot.data}catch(Ot){const Q=((Mt=Ot.response)==null?void 0:Mt.data)||{};let mt="";throw typeof Q=="object"&&(mt=Object.entries(Q).map(([Pt,Ct])=>Array.isArray(Ct)?Ct[0]:Ct).filter(Pt=>Pt).join(`
`)),mt||(mt="Une erreur est survenue lors de la sauvegarde"),new Error(mt)}}function pt(et){v.value=et,p.value=!0}async function At(){if(v.value)try{await Ce.delete(`/users/${v.value.id}/`),await J(),p.value=!1,v.value=null}catch(et){throw console.error("Erreur lors de la suppression de l'utilisateur:",et),et}}function Ut(et,Mt){return`${(et==null?void 0:et.charAt(0))||""}${(Mt==null?void 0:Mt.charAt(0))||""}`.toUpperCase()}const Y={ADMIN:"Admin",CONCESSIONNAIRE:"Concessionnaire",UTILISATEUR:"Client"};function nt(et){return Y[et]||et}function z(et){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function rt(et){return et?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}function dt(et){var Mt;return C.value?!0:M.value?et.role==="UTILISATEUR"&&et.dealer===((Mt=n.user)==null?void 0:Mt.id):!1}return(et,Mt)=>{var Ot,Q;return Rt(),Nt("div",ew,[w("div",iw,[w("div",nw,[w("h1",rw,qt(C.value?"Gestion des utilisateurs":"Mes clients"),1),w("button",{onClick:V,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[Mt[4]||(Mt[4]=w("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),yi(" "+qt(C.value?"Nouvel utilisateur":"Nouveau client"),1)])]),w("div",sw,[w("div",ow,[C.value?(Rt(),Nt("div",aw,[Mt[6]||(Mt[6]=w("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rôle",-1)),De(w("select",{id:"role-filter","onUpdate:modelValue":Mt[0]||(Mt[0]=mt=>y.role=mt),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},Mt[5]||(Mt[5]=[w("option",{value:""},"Tous les rôles",-1),w("option",{value:"ADMIN"},"Admin",-1),w("option",{value:"CONCESSIONNAIRE"},"Concessionnaire",-1),w("option",{value:"UTILISATEUR"},"Client",-1)]),512),[[Fs,y.role]])])):me("",!0),w("div",null,[Mt[7]||(Mt[7]=w("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),De(w("input",{type:"text",id:"search","onUpdate:modelValue":Mt[1]||(Mt[1]=mt=>y.search=mt),placeholder:C.value?"Nom, email...":"Rechercher un client...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,8,lw),[[qe,y.search]])]),C.value?(Rt(),Nt("div",uw,[Mt[9]||(Mt[9]=w("label",{for:"dealer-filter",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),De(w("select",{id:"dealer-filter","onUpdate:modelValue":Mt[2]||(Mt[2]=mt=>y.dealer=mt),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Mt[8]||(Mt[8]=w("option",{value:""},"Tous les concessionnaires",-1)),(Rt(!0),Nt(Oe,null,ei(P.value,mt=>(Rt(),Nt("option",{key:mt.id,value:mt.id},qt(mt.company_name||`${mt.first_name} ${mt.last_name}`),9,cw))),128))],512),[[Fs,y.dealer]])])):me("",!0)])]),w("div",hw,[w("div",dw,[w("table",fw,[w("thead",pw,[w("tr",null,[w("th",mw,qt(C.value?"Utilisateur":"Client"),1),C.value?(Rt(),Nt("th",gw," Rôle ")):me("",!0),Mt[10]||(Mt[10]=w("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),C.value?(Rt(),Nt("th",_w," Concessionnaire ")):me("",!0),Mt[11]||(Mt[11]=w("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),Mt[12]||(Mt[12]=w("th",{scope:"col",class:"relative px-6 py-3"},[w("span",{class:"sr-only"},"Actions")],-1))])]),w("tbody",yw,[(Rt(!0),Nt(Oe,null,ei(U.value,mt=>(Rt(),Nt("tr",{key:mt.id},[w("td",vw,[w("div",bw,[w("div",xw,[w("div",ww,[w("span",Lw,qt(Ut(mt.first_name,mt.last_name)),1)])]),w("div",Cw,[w("div",Ew,[yi(qt(mt.first_name)+" "+qt(mt.last_name.toUpperCase())+" ",1),mt.company_name?(Rt(),Nt("span",kw," ("+qt(mt.company_name)+") ",1)):me("",!0)]),w("div",Mw,qt(mt.username),1)])])]),w("td",Pw,[w("span",{class:un(z(mt.role))},qt(nt(mt.role)),3)]),w("td",Sw,qt(mt.email),1),w("td",Bw,qt(mt.dealer_name||"-"),1),w("td",Aw,[w("span",{class:un(rt(mt.is_active))},qt(mt.is_active?"Actif":"Inactif"),3)]),w("td",Tw,[w("button",{onClick:Pt=>G(mt),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,Dw),dt(mt)?(Rt(),Nt("button",{key:0,onClick:Pt=>pt(mt),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,Rw)):me("",!0)])]))),128))])])])])]),h.value?(Rt(),Jr(Gp,{key:0,user:f.value,dealers:l.value,"is-admin":C.value,"current-dealer":(Q=(Ot=Re(n).user)==null?void 0:Ot.id)==null?void 0:Q.toString(),onClose:_t,onSave:kt},null,8,["user","dealers","is-admin","current-dealer"])):me("",!0),p.value?(Rt(),Jr(Vp,{key:1,title:"Supprimer l'utilisateur",message:"Êtes-vous sûr de vouloir supprimer cet utilisateur ? Cette action est irréversible.",onConfirm:At,onCancel:Mt[3]||(Mt[3]=mt=>p.value=!1)})):me("",!0)])}}}),Iw={class:"h-full bg-gray-50"},Fw={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},zw={class:"mt-8"},Nw={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 rounded-lg"},$w={class:"overflow-x-auto"},jw={class:"min-w-full divide-y divide-gray-300"},Uw={class:"divide-y divide-gray-200 bg-white"},Gw={key:0},Vw={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},Hw={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},Zw={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},qw={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},Kw={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},Ww=["onClick"],Jw=["onClick"],Xw=["onClick"],Yw={key:0,class:"mt-12"},Qw={class:"mb-4"},t3={class:"mt-1 text-sm text-gray-500"},e3={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 rounded-lg"},i3={class:"overflow-x-auto"},n3={class:"min-w-full divide-y divide-gray-300"},r3={class:"bg-gray-50"},s3={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},o3={class:"divide-y divide-gray-200 bg-white"},a3={key:0},l3={colspan:"7",class:"py-4 px-6 text-center text-gray-500"},u3={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},c3={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},h3={class:"px-3 py-4 text-sm text-gray-900"},d3={class:"flex items-center"},f3={class:"h-8 w-8 flex-shrink-0"},p3={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},m3={class:"text-primary-700 font-medium text-sm"},g3={class:"ml-3"},_3={class:"font-medium"},y3={class:"text-gray-500 text-xs"},v3={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},b3={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},x3={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},w3={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},L3=["onClick"],C3=["onClick"],E3=["onClick"],k3={key:1,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center"},M3={class:"bg-white rounded-lg p-6 max-w-md w-full"},P3={class:"space-y-4"},S3={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},B3={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},A3={class:"bg-white rounded-lg p-6 max-w-md w-full"},T3={class:"flex justify-between items-center mb-4"},D3={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},R3=Yi({__name:"PlansView",setup(t){const n=Hs(),s=Xc(),l=Hi(),h=Up(),p=Jt([]),f=Jt(!1),v=Jt(!1),y=Jt({nom:"",description:""}),C=Jt({id:0,nom:"",description:""}),M=Pe(()=>p.value.filter(Y=>{var nt;return Y.createur.id===((nt=l.user)==null?void 0:nt.id)})),P=Pe(()=>p.value.filter(Y=>{var nt;return Y.createur.id!==((nt=l.user)==null?void 0:nt.id)}));Er(async()=>{await U()});async function U(){try{const Y=await s.fetchPlansWithDetails();p.value=Y.data}catch(Y){console.error("Erreur lors du chargement des plans:",Y)}}function J(){f.value=!0,y.value={nom:"",description:""}}async function R(){var Y;try{if(!y.value.nom.trim())throw new Error("Le nom du plan est requis");(Y=s.currentPlan)!=null&&Y.id&&s.hasUnsavedChanges&&(confirm("Voulez-vous sauvegarder les modifications du plan actuel avant d'en créer un nouveau ?")&&await s.savePlan(s.currentPlan.id),s.clearCurrentPlan());const nt=await s.createPlan({nom:y.value.nom.trim(),description:y.value.description.trim()});f.value=!1,await U(),s.setCurrentPlan(nt),n.push("/")}catch(nt){console.error("Erreur lors de la création du plan:",nt),alert(nt.message||"Une erreur est survenue lors de la création du plan")}}async function V(Y){try{s.setCurrentPlan(Y),await h.loadPlanElements(Y.id),n.push("/")}catch(nt){console.error("Erreur lors du chargement du plan:",nt),alert("Une erreur est survenue lors du chargement du plan")}}async function G(Y){var nt;if(Y!=null&&Y.id&&confirm("Êtes-vous sûr de vouloir supprimer ce plan ?"))try{await s.deletePlan(Y.id),await U(),((nt=s.currentPlan)==null?void 0:nt.id)===Y.id&&s.clearCurrentPlan()}catch(z){console.error("Erreur lors de la suppression du plan:",z),alert("Une erreur est survenue lors de la suppression du plan")}}function _t(Y){return new Date(Y).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function kt(Y){return Y?`${Y.first_name} ${Y.last_name}`.trim()||Y.username:"Non spécifié"}function pt(Y){if(!Y)return"";const nt=Y.first_name.charAt(0).toUpperCase()+Y.last_name.charAt(0).toUpperCase();return nt.length>2?nt.slice(0,2):nt}function At(Y){C.value={id:Y.id,nom:Y.nom,description:Y.description},v.value=!0}async function Ut(){try{if(!C.value.nom.trim())throw new Error("Le nom du plan est requis");await s.updatePlanDetails(C.value.id,{nom:C.value.nom.trim(),description:C.value.description.trim()}),v.value=!1,await U()}catch(Y){console.error("Erreur lors de la mise à jour du plan:",Y),alert(Y.message||"Une erreur est survenue lors de la mise à jour du plan")}}return(Y,nt)=>(Rt(),Nt("div",Iw,[w("div",Fw,[w("div",{class:"sm:flex sm:items-center"},[nt[7]||(nt[7]=w("div",{class:"sm:flex-auto"},[w("h1",{class:"text-2xl font-semibold text-gray-900"},"Plans d'irrigation"),w("p",{class:"mt-2 text-sm text-gray-700"}," Gérez vos plans d'irrigation ")],-1)),w("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[w("button",{onClick:J,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),w("div",zw,[nt[10]||(nt[10]=w("div",{class:"mb-4"},[w("h2",{class:"text-lg font-medium text-gray-900"},"Mes plans"),w("p",{class:"mt-1 text-sm text-gray-500"}," Plans que vous avez créés ")],-1)),w("div",Nw,[w("div",$w,[w("table",jw,[nt[9]||(nt[9]=w("thead",{class:"bg-gray-50"},[w("tr",null,[w("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"}," Nom du plan "),w("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description "),w("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Créé le "),w("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Modifié le "),w("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[w("span",{class:"sr-only"},"Actions")])])],-1)),w("tbody",Uw,[M.value.length===0?(Rt(),Nt("tr",Gw,nt[8]||(nt[8]=[w("td",{colspan:"5",class:"py-4 px-6 text-center text-gray-500"}," Vous n'avez pas encore créé de plans ",-1)]))):me("",!0),(Rt(!0),Nt(Oe,null,ei(M.value,z=>{var rt;return Rt(),Nt("tr",{key:z.id,class:"hover:bg-gray-50"},[w("td",Vw,qt(z.nom),1),w("td",Hw,qt(z.description||"-"),1),w("td",Zw,qt(_t(z.date_creation)),1),w("td",qw,qt(_t(z.date_modification)),1),w("td",Kw,[w("button",{onClick:dt=>V(z),class:"text-primary-600 hover:text-primary-900 mr-4"}," Ouvrir ",8,Ww),w("button",{onClick:dt=>At(z),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,Jw),z.createur.id===((rt=Re(l).user)==null?void 0:rt.id)?(Rt(),Nt("button",{key:0,onClick:dt=>G(z),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,Xw)):me("",!0)])])}),128))])])])])]),Re(l).isAdmin||Re(l).isDealer?(Rt(),Nt("div",Yw,[w("div",Qw,[nt[11]||(nt[11]=w("h2",{class:"text-lg font-medium text-gray-900"},"Plans des clients",-1)),w("p",t3,qt(Re(l).isAdmin?"Tous les plans créés par les clients et les concessionnaires":"Plans de vos clients"),1)]),w("div",e3,[w("div",i3,[w("table",n3,[w("thead",r3,[w("tr",null,[nt[12]||(nt[12]=w("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"}," Nom du plan ",-1)),nt[13]||(nt[13]=w("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),nt[14]||(nt[14]=w("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Client ",-1)),w("th",s3,qt(Re(l).isAdmin?"Concession":"Entreprise"),1),nt[15]||(nt[15]=w("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Créé le ",-1)),nt[16]||(nt[16]=w("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Modifié le ",-1)),nt[17]||(nt[17]=w("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[w("span",{class:"sr-only"},"Actions")],-1))])]),w("tbody",o3,[P.value.length===0?(Rt(),Nt("tr",a3,[w("td",l3,qt(Re(l).isAdmin?"Aucun plan client disponible":"Aucun plan de vos clients disponible"),1)])):me("",!0),(Rt(!0),Nt(Oe,null,ei(P.value,z=>{var rt;return Rt(),Nt("tr",{key:z.id,class:"hover:bg-gray-50"},[w("td",u3,qt(z.nom),1),w("td",c3,qt(z.description||"-"),1),w("td",h3,[w("div",d3,[w("div",f3,[w("div",p3,[w("span",m3,qt(pt(z.createur)),1)])]),w("div",g3,[w("div",_3,qt(kt(z.createur)),1),w("div",y3,qt(z.createur.email),1)])])]),w("td",v3,qt(z.createur.company_name||z.createur.concessionnaire_name||"-"),1),w("td",b3,qt(_t(z.date_creation)),1),w("td",x3,qt(_t(z.date_modification)),1),w("td",w3,[w("button",{onClick:dt=>V(z),class:"text-primary-600 hover:text-primary-900 mr-4"}," Ouvrir ",8,L3),w("button",{onClick:dt=>At(z),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,C3),z.createur.id===((rt=Re(l).user)==null?void 0:rt.id)?(Rt(),Nt("button",{key:0,onClick:dt=>G(z),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,E3)):me("",!0)])])}),128))])])])])])):me("",!0),f.value?(Rt(),Nt("div",k3,[w("div",M3,[nt[21]||(nt[21]=w("h2",{class:"text-lg font-medium mb-4"},"Nouveau plan",-1)),w("form",{onSubmit:Ns(R,["prevent"])},[w("div",P3,[w("div",null,[nt[18]||(nt[18]=w("label",{for:"name",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),De(w("input",{type:"text",id:"name","onUpdate:modelValue":nt[0]||(nt[0]=z=>y.value.nom=z),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",required:""},null,512),[[qe,y.value.nom]])]),w("div",null,[nt[19]||(nt[19]=w("label",{for:"description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),De(w("textarea",{id:"description","onUpdate:modelValue":nt[1]||(nt[1]=z=>y.value.description=z),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[qe,y.value.description]])])]),w("div",S3,[w("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:nt[2]||(nt[2]=z=>f.value=!1)}," Annuler "),nt[20]||(nt[20]=w("button",{type:"submit",class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm"}," Créer ",-1))])],32)])])):me("",!0),v.value?(Rt(),Nt("div",B3,[w("div",A3,[w("div",T3,[nt[23]||(nt[23]=w("h2",{class:"text-xl font-semibold text-gray-900"},"Modifier le plan",-1)),w("button",{onClick:nt[3]||(nt[3]=z=>v.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},nt[22]||(nt[22]=[w("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),w("form",{onSubmit:Ns(Ut,["prevent"]),class:"space-y-4"},[w("div",null,[nt[24]||(nt[24]=w("label",{for:"edit-nom",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),De(w("input",{type:"text",id:"edit-nom","onUpdate:modelValue":nt[4]||(nt[4]=z=>C.value.nom=z),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",required:""},null,512),[[qe,C.value.nom]])]),w("div",null,[nt[25]||(nt[25]=w("label",{for:"edit-description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),De(w("textarea",{id:"edit-description","onUpdate:modelValue":nt[5]||(nt[5]=z=>C.value.description=z),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[qe,C.value.description]])]),w("div",D3,[w("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:nt[6]||(nt[6]=z=>v.value=!1)}," Annuler "),nt[26]||(nt[26]=w("button",{type:"submit",class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm"}," Enregistrer ",-1))])],32)])])):me("",!0)])]))}}),O3={class:"h-full bg-gray-50"},I3={class:"container mx-auto px-4 py-8"},F3={class:"sm:flex sm:items-center"},z3={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},N3={class:"mt-8"},$3={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 rounded-lg"},j3={class:"overflow-x-auto"},U3={class:"min-w-full divide-y divide-gray-300"},G3={class:"divide-y divide-gray-200 bg-white"},V3={key:0,class:"animate-pulse"},H3={key:1},Z3={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-6"},q3={class:"flex items-center"},K3={class:"h-10 w-10 flex-shrink-0"},W3={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},J3={class:"text-primary-600 font-medium"},X3={class:"ml-4"},Y3={class:"font-medium text-gray-900"},Q3={class:"text-gray-500"},tL={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},eL={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},iL={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},nL={class:"flex items-center"},rL={class:"font-medium"},sL={class:"text-gray-400 ml-1"},oL={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},aL=["onClick"],lL=["onClick"],uL=Yi({__name:"ClientListView",setup(t){Hs();const n=Hi(),s=Jt([]),l=Jt(!0),h=Jt(!1),p=Jt(!1),f=Jt(null),v=Jt(null);Er(async()=>{await y()});async function y(){var V;try{const G=await Ce.get("/users/",{params:{dealer:(V=n.user)==null?void 0:V.id,role:"UTILISATEUR",include_plans:!0}});s.value=G.data}catch(G){console.error("Error fetching clients:",G)}finally{l.value=!1}}function C(V,G){return`${(V==null?void 0:V.charAt(0))||""}${(G==null?void 0:G.charAt(0))||""}`.toUpperCase()}function M(V){f.value=V,h.value=!0}function P(){h.value=!1,f.value=null}async function U(V){var G;try{const _t=!!V.id,kt=_t?`/users/${V.id}/`:"/users/",pt=_t?"patch":"post";V.role="UTILISATEUR",V.concessionnaire=(G=n.user)==null?void 0:G.id,await Ce[pt](kt,V),await y(),P()}catch(_t){throw console.error("Erreur lors de la sauvegarde du client:",_t),_t}}function J(V){v.value=V,p.value=!0}async function R(){if(v.value)try{await Ce.delete(`/users/${v.value.id}/`),await y(),p.value=!1,v.value=null}catch(V){throw console.error("Erreur lors de la suppression du client:",V),V}}return(V,G)=>{var _t,kt;return Rt(),Nt("div",O3,[w("div",I3,[w("div",F3,[G[3]||(G[3]=w("div",{class:"sm:flex-auto"},[w("h1",{class:"text-2xl font-semibold text-gray-900"},"Clients"),w("p",{class:"mt-2 text-sm text-gray-700"}," Liste de vos clients et leurs plans associés ")],-1)),w("div",z3,[w("button",{onClick:G[0]||(G[0]=pt=>h.value=!0),class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"},G[2]||(G[2]=[w("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1),yi(" Ajouter un client ")]))])]),w("div",N3,[w("div",$3,[w("div",j3,[w("table",U3,[G[6]||(G[6]=w("thead",{class:"bg-gray-50"},[w("tr",null,[w("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," Client "),w("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Email "),w("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise "),w("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Nombre de plans "),w("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[w("span",{class:"sr-only"},"Actions")])])],-1)),w("tbody",G3,[l.value?(Rt(),Nt("tr",V3,G[4]||(G[4]=[w("td",{colspan:"5",class:"py-4 px-6"},[w("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):s.value.length===0?(Rt(),Nt("tr",H3,G[5]||(G[5]=[w("td",{colspan:"5",class:"py-4 px-6 text-center text-gray-500"}," Aucun client trouvé ",-1)]))):me("",!0),(Rt(!0),Nt(Oe,null,ei(s.value,pt=>(Rt(),Nt("tr",{key:pt.id,class:"hover:bg-gray-50"},[w("td",Z3,[w("div",q3,[w("div",K3,[w("div",W3,[w("span",J3,qt(C(pt.first_name,pt.last_name)),1)])]),w("div",X3,[w("div",Y3,qt(pt.first_name)+" "+qt(pt.last_name.toUpperCase()),1),w("div",Q3,qt(pt.username),1)])])]),w("td",tL,qt(pt.email),1),w("td",eL,qt(pt.company_name||"-"),1),w("td",iL,[w("div",nL,[w("span",rL,qt(pt.plans_count||0),1),w("span",sL,"plan"+qt((pt.plans_count||0)>1?"s":""),1)])]),w("td",oL,[w("button",{onClick:At=>M(pt),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,aL),w("button",{onClick:At=>J(pt),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,lL)])]))),128))])])])])]),h.value?(Rt(),Jr(Gp,{key:0,user:f.value||{},dealers:[Re(n).user],"is-admin":!1,"current-dealer":(kt=(_t=Re(n).user)==null?void 0:_t.id)==null?void 0:kt.toString(),onClose:P,onSave:U},null,8,["user","dealers","current-dealer"])):me("",!0),p.value?(Rt(),Jr(Vp,{key:1,title:"Supprimer le client",message:"Êtes-vous sûr de vouloir supprimer ce client ? Cette action est irréversible.",onConfirm:R,onCancel:G[1]||(G[1]=pt=>p.value=!1)})):me("",!0)])])}}}),Hp=kv({history:nv("/"),routes:[{path:"/",name:"home",component:Td,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/plans",name:"plans",component:R3,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/users",name:"users",component:Ow,meta:{requiresAuth:!0,allowedRoles:["admin"]}},{path:"/clients",name:"clients",component:uL,meta:{requiresAuth:!0,allowedRoles:["dealer"]}},{path:"/profile",name:"profile",component:()=>qa(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/login",name:"login",component:Ob,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>qa(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>qa(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:gb,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/map",name:"map",component:Td,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>qa(()=>import("./NotFoundView.js"),[])}]});Hp.beforeEach(async(t,n,s)=>{var v,y;const l=Hi();if(console.log("Route:",t.path,"Auth state:",{initialized:l.initialized,isAuthenticated:l.isAuthenticated,user:l.user}),!l.initialized)try{await l.initialize(window.INITIAL_STATE)}catch(C){console.error("Error initializing auth store:",C)}const h=l.isAuthenticated,p=(v=l.user)==null?void 0:v.must_change_password,f=(y=l.user)==null?void 0:y.user_type;if(t.meta.requiresAuth&&!h){s("/login");return}if(h&&p&&t.name!=="changePassword"){s({name:"changePassword"});return}if(t.name==="changePassword"&&!p){s({name:"home"});return}if(t.meta.allowedRoles&&f&&!t.meta.allowedRoles.includes(f)){s({name:"home"});return}if(t.meta.requiresGuest&&h){s({name:"home"});return}s()});const Yc=jg(K4),Zp=Vg();Yc.use(Zp);Yc.use(Hp);const cL=Hi(Zp);window.INITIAL_STATE&&cL.initialize(window.INITIAL_STATE);Yc.mount("#app");export{ir as a,w as b,Nt as c,Yi as d,me as e,De as f,Rt as g,dL as h,yi as i,ci as j,Fo as k,L0 as l,AL as m,un as n,Er as o,Hs as p,Jt as r,qt as t,Hi as u,qe as v,Ns as w};
