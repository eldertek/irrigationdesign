var i1=Object.defineProperty;var s1=(e,t,n)=>t in e?i1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var me=(e,t,n)=>s1(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function qg(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const gn={},cl=[],fo=()=>{},o1=()=>!1,gp=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Hg=e=>e.startsWith("onUpdate:"),Kr=Object.assign,Zg=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},a1=Object.prototype.hasOwnProperty,un=(e,t)=>a1.call(e,t),Le=Array.isArray,hl=e=>Ch(e)==="[object Map]",Gl=e=>Ch(e)==="[object Set]",Um=e=>Ch(e)==="[object Date]",Oe=e=>typeof e=="function",rr=e=>typeof e=="string",go=e=>typeof e=="symbol",bn=e=>e!==null&&typeof e=="object",N0=e=>(bn(e)||Oe(e))&&Oe(e.then)&&Oe(e.catch),R0=Object.prototype.toString,Ch=e=>R0.call(e),u1=e=>Ch(e).slice(8,-1),O0=e=>Ch(e)==="[object Object]",Wg=e=>rr(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,zc=qg(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),mp=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},l1=/-(\w)/g,ps=mp(e=>e.replace(l1,(t,n)=>n?n.toUpperCase():"")),c1=/\B([A-Z])/g,wu=mp(e=>e.replace(c1,"-$1").toLowerCase()),_p=mp(e=>e.charAt(0).toUpperCase()+e.slice(1)),qd=mp(e=>e?`on${_p(e)}`:""),ba=(e,t)=>!Object.is(e,t),Af=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},B0=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},qf=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Vm;const yp=()=>Vm||(Vm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function vp(e){if(Le(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=rr(r)?d1(r):vp(r);if(i)for(const o in i)t[o]=i[o]}return t}else if(rr(e)||bn(e))return e}const h1=/;(?![^(]*\))/g,f1=/:([^]+)/,p1=/\/\*[^]*?\*\//g;function d1(e){const t={};return e.replace(p1,"").split(h1).forEach(n=>{if(n){const r=n.split(f1);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function As(e){let t="";if(rr(e))t=e;else if(Le(e))for(let n=0;n<e.length;n++){const r=As(e[n]);r&&(t+=r+" ")}else if(bn(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const g1="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",m1=qg(g1);function F0(e){return!!e||e===""}function _1(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=bh(e[r],t[r]);return n}function bh(e,t){if(e===t)return!0;let n=Um(e),r=Um(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=go(e),r=go(t),n||r)return e===t;if(n=Le(e),r=Le(t),n||r)return n&&r?_1(e,t):!1;if(n=bn(e),r=bn(t),n||r){if(!n||!r)return!1;const i=Object.keys(e).length,o=Object.keys(t).length;if(i!==o)return!1;for(const u in e){const f=e.hasOwnProperty(u),p=t.hasOwnProperty(u);if(f&&!p||!f&&p||!bh(e[u],t[u]))return!1}}return String(e)===String(t)}function Kg(e,t){return e.findIndex(n=>bh(n,t))}const z0=e=>!!(e&&e.__v_isRef===!0),ae=e=>rr(e)?e:e==null?"":Le(e)||bn(e)&&(e.toString===R0||!Oe(e.toString))?z0(e)?ae(e.value):JSON.stringify(e,G0,2):String(e),G0=(e,t)=>z0(t)?G0(e,t.value):hl(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i],o)=>(n[Hd(r,o)+" =>"]=i,n),{})}:Gl(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Hd(n))}:go(t)?Hd(t):bn(t)&&!Le(t)&&!O0(t)?String(t):t,Hd=(e,t="")=>{var n;return go(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ai;class U0{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ai,!t&&ai&&(this.index=(ai.scopes||(ai.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=ai;try{return ai=this,t()}finally{ai=n}}}on(){ai=this}off(){ai=this.parent}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function V0(e){return new U0(e)}function j0(){return ai}function y1(e,t=!1){ai&&ai.cleanups.push(e)}let xn;const Zd=new WeakSet;class q0{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ai&&ai.active&&ai.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Zd.has(this)&&(Zd.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Z0(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,jm(this),W0(this);const t=xn,n=Ns;xn=this,Ns=!0;try{return this.fn()}finally{K0(this),xn=t,Ns=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Yg(t);this.deps=this.depsTail=void 0,jm(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Zd.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){pg(this)&&this.run()}get dirty(){return pg(this)}}let H0=0,Gc,Uc;function Z0(e,t=!1){if(e.flags|=8,t){e.next=Uc,Uc=e;return}e.next=Gc,Gc=e}function $g(){H0++}function Xg(){if(--H0>0)return;if(Uc){let t=Uc;for(Uc=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Gc;){let t=Gc;for(Gc=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function W0(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function K0(e){let t,n=e.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),Yg(r),v1(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}e.deps=t,e.depsTail=n}function pg(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&($0(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function $0(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===$c))return;e.globalVersion=$c;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!pg(e)){e.flags&=-3;return}const n=xn,r=Ns;xn=e,Ns=!0;try{W0(e);const i=e.fn(e._value);(t.version===0||ba(i,e._value))&&(e._value=i,t.version++)}catch(i){throw t.version++,i}finally{xn=n,Ns=r,K0(e),e.flags&=-3}}function Yg(e,t=!1){const{dep:n,prevSub:r,nextSub:i}=e;if(r&&(r.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let o=n.computed.deps;o;o=o.nextDep)Yg(o,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function v1(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Ns=!0;const X0=[];function Ra(){X0.push(Ns),Ns=!1}function Oa(){const e=X0.pop();Ns=e===void 0?!0:e}function jm(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=xn;xn=void 0;try{t()}finally{xn=n}}}let $c=0;class x1{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Jg{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!xn||!Ns||xn===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==xn)n=this.activeLink=new x1(xn,this),xn.deps?(n.prevDep=xn.depsTail,xn.depsTail.nextDep=n,xn.depsTail=n):xn.deps=xn.depsTail=n,Y0(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=xn.depsTail,n.nextDep=void 0,xn.depsTail.nextDep=n,xn.depsTail=n,xn.deps===n&&(xn.deps=r)}return n}trigger(t){this.version++,$c++,this.notify(t)}notify(t){$g();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Xg()}}}function Y0(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)Y0(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Hf=new WeakMap,iu=Symbol(""),dg=Symbol(""),Xc=Symbol("");function qr(e,t,n){if(Ns&&xn){let r=Hf.get(e);r||Hf.set(e,r=new Map);let i=r.get(n);i||(r.set(n,i=new Jg),i.map=r,i.key=n),i.track()}}function zo(e,t,n,r,i,o){const u=Hf.get(e);if(!u){$c++;return}const f=p=>{p&&p.trigger()};if($g(),t==="clear")u.forEach(f);else{const p=Le(e),_=p&&Wg(n);if(p&&n==="length"){const y=Number(r);u.forEach((C,S)=>{(S==="length"||S===Xc||!go(S)&&S>=y)&&f(C)})}else switch((n!==void 0||u.has(void 0))&&f(u.get(n)),_&&f(u.get(Xc)),t){case"add":p?_&&f(u.get("length")):(f(u.get(iu)),hl(e)&&f(u.get(dg)));break;case"delete":p||(f(u.get(iu)),hl(e)&&f(u.get(dg)));break;case"set":hl(e)&&f(u.get(iu));break}}Xg()}function C1(e,t){const n=Hf.get(e);return n&&n.get(t)}function sl(e){const t=Ke(e);return t===e?t:(qr(t,"iterate",Xc),ls(e)?t:t.map(Hr))}function xp(e){return qr(e=Ke(e),"iterate",Xc),e}const b1={__proto__:null,[Symbol.iterator](){return Wd(this,Symbol.iterator,Hr)},concat(...e){return sl(this).concat(...e.map(t=>Le(t)?sl(t):t))},entries(){return Wd(this,"entries",e=>(e[1]=Hr(e[1]),e))},every(e,t){return Oo(this,"every",e,t,void 0,arguments)},filter(e,t){return Oo(this,"filter",e,t,n=>n.map(Hr),arguments)},find(e,t){return Oo(this,"find",e,t,Hr,arguments)},findIndex(e,t){return Oo(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Oo(this,"findLast",e,t,Hr,arguments)},findLastIndex(e,t){return Oo(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Oo(this,"forEach",e,t,void 0,arguments)},includes(...e){return Kd(this,"includes",e)},indexOf(...e){return Kd(this,"indexOf",e)},join(e){return sl(this).join(e)},lastIndexOf(...e){return Kd(this,"lastIndexOf",e)},map(e,t){return Oo(this,"map",e,t,void 0,arguments)},pop(){return Mc(this,"pop")},push(...e){return Mc(this,"push",e)},reduce(e,...t){return qm(this,"reduce",e,t)},reduceRight(e,...t){return qm(this,"reduceRight",e,t)},shift(){return Mc(this,"shift")},some(e,t){return Oo(this,"some",e,t,void 0,arguments)},splice(...e){return Mc(this,"splice",e)},toReversed(){return sl(this).toReversed()},toSorted(e){return sl(this).toSorted(e)},toSpliced(...e){return sl(this).toSpliced(...e)},unshift(...e){return Mc(this,"unshift",e)},values(){return Wd(this,"values",Hr)}};function Wd(e,t,n){const r=xp(e),i=r[t]();return r!==e&&!ls(e)&&(i._next=i.next,i.next=()=>{const o=i._next();return o.value&&(o.value=n(o.value)),o}),i}const E1=Array.prototype;function Oo(e,t,n,r,i,o){const u=xp(e),f=u!==e&&!ls(e),p=u[t];if(p!==E1[t]){const C=p.apply(e,o);return f?Hr(C):C}let _=n;u!==e&&(f?_=function(C,S){return n.call(this,Hr(C),S,e)}:n.length>2&&(_=function(C,S){return n.call(this,C,S,e)}));const y=p.call(u,_,r);return f&&i?i(y):y}function qm(e,t,n,r){const i=xp(e);let o=n;return i!==e&&(ls(e)?n.length>3&&(o=function(u,f,p){return n.call(this,u,f,p,e)}):o=function(u,f,p){return n.call(this,u,Hr(f),p,e)}),i[t](o,...r)}function Kd(e,t,n){const r=Ke(e);qr(r,"iterate",Xc);const i=r[t](...n);return(i===-1||i===!1)&&em(n[0])?(n[0]=Ke(n[0]),r[t](...n)):i}function Mc(e,t,n=[]){Ra(),$g();const r=Ke(e)[t].apply(e,n);return Xg(),Oa(),r}const L1=qg("__proto__,__v_isRef,__isVue"),J0=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(go));function w1(e){go(e)||(e=String(e));const t=Ke(this);return qr(t,"has",e),t.hasOwnProperty(e)}class Q0{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return o;if(n==="__v_raw")return r===(i?o?R1:ry:o?ny:ey).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const u=Le(t);if(!i){let p;if(u&&(p=b1[n]))return p;if(n==="hasOwnProperty")return w1}const f=Reflect.get(t,n,Zn(t)?t:r);return(go(n)?J0.has(n):L1(n))||(i||qr(t,"get",n),o)?f:Zn(f)?u&&Wg(n)?f:f.value:bn(f)?i?sy(f):ea(f):f}}class ty extends Q0{constructor(t=!1){super(!1,t)}set(t,n,r,i){let o=t[n];if(!this._isShallow){const p=au(o);if(!ls(r)&&!au(r)&&(o=Ke(o),r=Ke(r)),!Le(t)&&Zn(o)&&!Zn(r))return p?!1:(o.value=r,!0)}const u=Le(t)&&Wg(n)?Number(n)<t.length:un(t,n),f=Reflect.set(t,n,r,Zn(t)?t:i);return t===Ke(i)&&(u?ba(r,o)&&zo(t,"set",n,r):zo(t,"add",n,r)),f}deleteProperty(t,n){const r=un(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&r&&zo(t,"delete",n,void 0),i}has(t,n){const r=Reflect.has(t,n);return(!go(n)||!J0.has(n))&&qr(t,"has",n),r}ownKeys(t){return qr(t,"iterate",Le(t)?"length":iu),Reflect.ownKeys(t)}}class S1 extends Q0{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const P1=new ty,M1=new S1,I1=new ty(!0);const gg=e=>e,Cf=e=>Reflect.getPrototypeOf(e);function k1(e,t,n){return function(...r){const i=this.__v_raw,o=Ke(i),u=hl(o),f=e==="entries"||e===Symbol.iterator&&u,p=e==="keys"&&u,_=i[e](...r),y=n?gg:t?mg:Hr;return!t&&qr(o,"iterate",p?dg:iu),{next(){const{value:C,done:S}=_.next();return S?{value:C,done:S}:{value:f?[y(C[0]),y(C[1])]:y(C),done:S}},[Symbol.iterator](){return this}}}}function bf(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function T1(e,t){const n={get(i){const o=this.__v_raw,u=Ke(o),f=Ke(i);e||(ba(i,f)&&qr(u,"get",i),qr(u,"get",f));const{has:p}=Cf(u),_=t?gg:e?mg:Hr;if(p.call(u,i))return _(o.get(i));if(p.call(u,f))return _(o.get(f));o!==u&&o.get(i)},get size(){const i=this.__v_raw;return!e&&qr(Ke(i),"iterate",iu),Reflect.get(i,"size",i)},has(i){const o=this.__v_raw,u=Ke(o),f=Ke(i);return e||(ba(i,f)&&qr(u,"has",i),qr(u,"has",f)),i===f?o.has(i):o.has(i)||o.has(f)},forEach(i,o){const u=this,f=u.__v_raw,p=Ke(f),_=t?gg:e?mg:Hr;return!e&&qr(p,"iterate",iu),f.forEach((y,C)=>i.call(o,_(y),_(C),u))}};return Kr(n,e?{add:bf("add"),set:bf("set"),delete:bf("delete"),clear:bf("clear")}:{add(i){!t&&!ls(i)&&!au(i)&&(i=Ke(i));const o=Ke(this);return Cf(o).has.call(o,i)||(o.add(i),zo(o,"add",i,i)),this},set(i,o){!t&&!ls(o)&&!au(o)&&(o=Ke(o));const u=Ke(this),{has:f,get:p}=Cf(u);let _=f.call(u,i);_||(i=Ke(i),_=f.call(u,i));const y=p.call(u,i);return u.set(i,o),_?ba(o,y)&&zo(u,"set",i,o):zo(u,"add",i,o),this},delete(i){const o=Ke(this),{has:u,get:f}=Cf(o);let p=u.call(o,i);p||(i=Ke(i),p=u.call(o,i)),f&&f.call(o,i);const _=o.delete(i);return p&&zo(o,"delete",i,void 0),_},clear(){const i=Ke(this),o=i.size!==0,u=i.clear();return o&&zo(i,"clear",void 0,void 0),u}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=k1(i,e,t)}),n}function Qg(e,t){const n=T1(e,t);return(r,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(un(n,i)&&i in r?n:r,i,o)}const A1={get:Qg(!1,!1)},D1={get:Qg(!1,!0)},N1={get:Qg(!0,!1)};const ey=new WeakMap,ny=new WeakMap,ry=new WeakMap,R1=new WeakMap;function O1(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function B1(e){return e.__v_skip||!Object.isExtensible(e)?0:O1(u1(e))}function ea(e){return au(e)?e:tm(e,!1,P1,A1,ey)}function iy(e){return tm(e,!1,I1,D1,ny)}function sy(e){return tm(e,!0,M1,N1,ry)}function tm(e,t,n,r,i){if(!bn(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=i.get(e);if(o)return o;const u=B1(e);if(u===0)return e;const f=new Proxy(e,u===2?r:n);return i.set(e,f),f}function Ea(e){return au(e)?Ea(e.__v_raw):!!(e&&e.__v_isReactive)}function au(e){return!!(e&&e.__v_isReadonly)}function ls(e){return!!(e&&e.__v_isShallow)}function em(e){return e?!!e.__v_raw:!1}function Ke(e){const t=e&&e.__v_raw;return t?Ke(t):e}function nm(e){return!un(e,"__v_skip")&&Object.isExtensible(e)&&B0(e,"__v_skip",!0),e}const Hr=e=>bn(e)?ea(e):e,mg=e=>bn(e)?sy(e):e;function Zn(e){return e?e.__v_isRef===!0:!1}function de(e){return oy(e,!1)}function F1(e){return oy(e,!0)}function oy(e,t){return Zn(e)?e:new z1(e,t)}class z1{constructor(t,n){this.dep=new Jg,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Ke(t),this._value=n?t:Hr(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||ls(t)||au(t);t=r?t:Ke(t),ba(t,n)&&(this._rawValue=t,this._value=r?t:Hr(t),this.dep.trigger())}}function Ln(e){return Zn(e)?e.value:e}const G1={get:(e,t,n)=>t==="__v_raw"?e:Ln(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return Zn(i)&&!Zn(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function ay(e){return Ea(e)?e:new Proxy(e,G1)}function U1(e){const t=Le(e)?new Array(e.length):{};for(const n in e)t[n]=j1(e,n);return t}class V1{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return C1(Ke(this._object),this._key)}}function j1(e,t,n){const r=e[t];return Zn(r)?r:new V1(e,t,n)}class q1{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Jg(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=$c-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&xn!==this)return Z0(this,!0),!0}get value(){const t=this.dep.track();return $0(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function H1(e,t,n=!1){let r,i;return Oe(e)?r=e:(r=e.get,i=e.set),new q1(r,i,n)}const Ef={},Zf=new WeakMap;let nu;function Z1(e,t=!1,n=nu){if(n){let r=Zf.get(n);r||Zf.set(n,r=[]),r.push(e)}}function W1(e,t,n=gn){const{immediate:r,deep:i,once:o,scheduler:u,augmentJob:f,call:p}=n,_=ut=>i?ut:ls(ut)||i===!1||i===0?Go(ut,1):Go(ut);let y,C,S,k,P=!1,R=!1;if(Zn(e)?(C=()=>e.value,P=ls(e)):Ea(e)?(C=()=>_(e),P=!0):Le(e)?(R=!0,P=e.some(ut=>Ea(ut)||ls(ut)),C=()=>e.map(ut=>{if(Zn(ut))return ut.value;if(Ea(ut))return _(ut);if(Oe(ut))return p?p(ut,2):ut()})):Oe(e)?t?C=p?()=>p(e,2):e:C=()=>{if(S){Ra();try{S()}finally{Oa()}}const ut=nu;nu=y;try{return p?p(e,3,[k]):e(k)}finally{nu=ut}}:C=fo,t&&i){const ut=C,It=i===!0?1/0:i;C=()=>Go(ut(),It)}const O=j0(),H=()=>{y.stop(),O&&O.active&&Zg(O.effects,y)};if(o&&t){const ut=t;t=(...It)=>{ut(...It),H()}}let X=R?new Array(e.length).fill(Ef):Ef;const U=ut=>{if(!(!(y.flags&1)||!y.dirty&&!ut))if(t){const It=y.run();if(i||P||(R?It.some((ot,kt)=>ba(ot,X[kt])):ba(It,X))){S&&S();const ot=nu;nu=y;try{const kt=[It,X===Ef?void 0:R&&X[0]===Ef?[]:X,k];p?p(t,3,kt):t(...kt),X=It}finally{nu=ot}}}else y.run()};return f&&f(U),y=new q0(C),y.scheduler=u?()=>u(U,!1):U,k=ut=>Z1(ut,!1,y),S=y.onStop=()=>{const ut=Zf.get(y);if(ut){if(p)p(ut,4);else for(const It of ut)It();Zf.delete(y)}},t?r?U(!0):X=y.run():u?u(U.bind(null,!0),!0):y.run(),H.pause=y.pause.bind(y),H.resume=y.resume.bind(y),H.stop=H,H}function Go(e,t=1/0,n){if(t<=0||!bn(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Zn(e))Go(e.value,t,n);else if(Le(e))for(let r=0;r<e.length;r++)Go(e[r],t,n);else if(Gl(e)||hl(e))e.forEach(r=>{Go(r,t,n)});else if(O0(e)){for(const r in e)Go(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Go(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Eh(e,t,n,r){try{return r?e(...r):e()}catch(i){Cp(i,t,n)}}function mo(e,t,n,r){if(Oe(e)){const i=Eh(e,t,n,r);return i&&N0(i)&&i.catch(o=>{Cp(o,t,n)}),i}if(Le(e)){const i=[];for(let o=0;o<e.length;o++)i.push(mo(e[o],t,n,r));return i}}function Cp(e,t,n,r=!0){const i=t?t.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:u}=t&&t.appContext.config||gn;if(t){let f=t.parent;const p=t.proxy,_=`https://vuejs.org/error-reference/#runtime-${n}`;for(;f;){const y=f.ec;if(y){for(let C=0;C<y.length;C++)if(y[C](e,p,_)===!1)return}f=f.parent}if(o){Ra(),Eh(o,null,10,[e,p,_]),Oa();return}}K1(e,n,i,r,u)}function K1(e,t,n,r=!0,i=!1){if(i)throw e;console.error(e)}const ui=[];let oo=-1;const fl=[];let ya=null,al=0;const uy=Promise.resolve();let Wf=null;function bp(e){const t=Wf||uy;return e?t.then(this?e.bind(this):e):t}function $1(e){let t=oo+1,n=ui.length;for(;t<n;){const r=t+n>>>1,i=ui[r],o=Yc(i);o<e||o===e&&i.flags&2?t=r+1:n=r}return t}function rm(e){if(!(e.flags&1)){const t=Yc(e),n=ui[ui.length-1];!n||!(e.flags&2)&&t>=Yc(n)?ui.push(e):ui.splice($1(t),0,e),e.flags|=1,ly()}}function ly(){Wf||(Wf=uy.then(hy))}function X1(e){Le(e)?fl.push(...e):ya&&e.id===-1?ya.splice(al+1,0,e):e.flags&1||(fl.push(e),e.flags|=1),ly()}function Hm(e,t,n=oo+1){for(;n<ui.length;n++){const r=ui[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;ui.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function cy(e){if(fl.length){const t=[...new Set(fl)].sort((n,r)=>Yc(n)-Yc(r));if(fl.length=0,ya){ya.push(...t);return}for(ya=t,al=0;al<ya.length;al++){const n=ya[al];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ya=null,al=0}}const Yc=e=>e.id==null?e.flags&2?-1:1/0:e.id;function hy(e){try{for(oo=0;oo<ui.length;oo++){const t=ui[oo];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Eh(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;oo<ui.length;oo++){const t=ui[oo];t&&(t.flags&=-2)}oo=-1,ui.length=0,cy(),Wf=null,(ui.length||fl.length)&&hy()}}let Ci=null,fy=null;function Kf(e){const t=Ci;return Ci=e,fy=e&&e.type.__scopeId||null,t}function Vc(e,t=Ci,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&e_(-1);const o=Kf(t);let u;try{u=e(...i)}finally{Kf(o),r._d&&e_(1)}return u};return r._n=!0,r._c=!0,r._d=!0,r}function ln(e,t){if(Ci===null)return e;const n=Pp(Ci),r=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[o,u,f,p=gn]=t[i];o&&(Oe(o)&&(o={mounted:o,updated:o}),o.deep&&Go(u),r.push({dir:o,instance:n,value:u,oldValue:void 0,arg:f,modifiers:p}))}return e}function tu(e,t,n,r){const i=e.dirs,o=t&&t.dirs;for(let u=0;u<i.length;u++){const f=i[u];o&&(f.oldValue=o[u].value);let p=f.dir[r];p&&(Ra(),mo(p,n,8,[e.el,f,e,t]),Oa())}}const Y1=Symbol("_vte"),J1=e=>e.__isTeleport;function im(e,t){e.shapeFlag&6&&e.component?(e.transition=t,im(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function Wi(e,t){return Oe(e)?Kr({name:e.name},t,{setup:e}):e}function py(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function $f(e,t,n,r,i=!1){if(Le(e)){e.forEach((P,R)=>$f(P,t&&(Le(t)?t[R]:t),n,r,i));return}if(jc(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&$f(e,t,n,r.component.subTree);return}const o=r.shapeFlag&4?Pp(r.component):r.el,u=i?null:o,{i:f,r:p}=e,_=t&&t.r,y=f.refs===gn?f.refs={}:f.refs,C=f.setupState,S=Ke(C),k=C===gn?()=>!1:P=>un(S,P);if(_!=null&&_!==p&&(rr(_)?(y[_]=null,k(_)&&(C[_]=null)):Zn(_)&&(_.value=null)),Oe(p))Eh(p,f,12,[u,y]);else{const P=rr(p),R=Zn(p);if(P||R){const O=()=>{if(e.f){const H=P?k(p)?C[p]:y[p]:p.value;i?Le(H)&&Zg(H,o):Le(H)?H.includes(o)||H.push(o):P?(y[p]=[o],k(p)&&(C[p]=y[p])):(p.value=[o],e.k&&(y[e.k]=p.value))}else P?(y[p]=u,k(p)&&(C[p]=u)):R&&(p.value=u,e.k&&(y[e.k]=u))};u?(O.id=-1,Ni(O,n)):O()}}}yp().requestIdleCallback;yp().cancelIdleCallback;const jc=e=>!!e.type.__asyncLoader,dy=e=>e.type.__isKeepAlive;function Q1(e,t){gy(e,"a",t)}function tC(e,t){gy(e,"da",t)}function gy(e,t,n=Rr){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Ep(t,r,n),n){let i=n.parent;for(;i&&i.parent;)dy(i.parent.vnode)&&eC(r,t,n,i),i=i.parent}}function eC(e,t,n,r){const i=Ep(t,e,r,!0);Lp(()=>{Zg(r[t],i)},n)}function Ep(e,t,n=Rr,r=!1){if(n){const i=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...u)=>{Ra();const f=Lh(n),p=mo(t,n,e,u);return f(),Oa(),p});return r?i.unshift(o):i.push(o),o}}const na=e=>(t,n=Rr)=>{(!Qc||e==="sp")&&Ep(e,(...r)=>t(...r),n)},nC=na("bm"),Ba=na("m"),rC=na("bu"),iC=na("u"),my=na("bum"),Lp=na("um"),sC=na("sp"),oC=na("rtg"),aC=na("rtc");function uC(e,t=Rr){Ep("ec",e,t)}const lC="components";function cC(e,t){return fC(lC,e,!0,t)||e}const hC=Symbol.for("v-ndc");function fC(e,t,n=!0,r=!1){const i=Ci||Rr;if(i){const o=i.type;{const f=QC(o,!1);if(f&&(f===t||f===ps(t)||f===_p(ps(t))))return o}const u=Zm(i[e]||o[e],t)||Zm(i.appContext[e],t);return!u&&r?o:u}}function Zm(e,t){return e&&(e[t]||e[ps(t)]||e[_p(ps(t))])}function ci(e,t,n,r){let i;const o=n,u=Le(e);if(u||rr(e)){const f=u&&Ea(e);let p=!1;f&&(p=!ls(e),e=xp(e)),i=new Array(e.length);for(let _=0,y=e.length;_<y;_++)i[_]=t(p?Hr(e[_]):e[_],_,void 0,o)}else if(typeof e=="number"){i=new Array(e);for(let f=0;f<e;f++)i[f]=t(f+1,f,void 0,o)}else if(bn(e))if(e[Symbol.iterator])i=Array.from(e,(f,p)=>t(f,p,void 0,o));else{const f=Object.keys(e);i=new Array(f.length);for(let p=0,_=f.length;p<_;p++){const y=f[p];i[p]=t(e[y],y,p,o)}}else i=[];return i}const _g=e=>e?By(e)?Pp(e):_g(e.parent):null,qc=Kr(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>_g(e.parent),$root:e=>_g(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>yy(e),$forceUpdate:e=>e.f||(e.f=()=>{rm(e.update)}),$nextTick:e=>e.n||(e.n=bp.bind(e.proxy)),$watch:e=>NC.bind(e)}),$d=(e,t)=>e!==gn&&!e.__isScriptSetup&&un(e,t),pC={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:o,accessCache:u,type:f,appContext:p}=e;let _;if(t[0]!=="$"){const k=u[t];if(k!==void 0)switch(k){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return o[t]}else{if($d(r,t))return u[t]=1,r[t];if(i!==gn&&un(i,t))return u[t]=2,i[t];if((_=e.propsOptions[0])&&un(_,t))return u[t]=3,o[t];if(n!==gn&&un(n,t))return u[t]=4,n[t];yg&&(u[t]=0)}}const y=qc[t];let C,S;if(y)return t==="$attrs"&&qr(e.attrs,"get",""),y(e);if((C=f.__cssModules)&&(C=C[t]))return C;if(n!==gn&&un(n,t))return u[t]=4,n[t];if(S=p.config.globalProperties,un(S,t))return S[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:o}=e;return $d(i,t)?(i[t]=n,!0):r!==gn&&un(r,t)?(r[t]=n,!0):un(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:o}},u){let f;return!!n[u]||e!==gn&&un(e,u)||$d(t,u)||(f=o[0])&&un(f,u)||un(r,u)||un(qc,u)||un(i.config.globalProperties,u)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:un(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Wm(e){return Le(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let yg=!0;function dC(e){const t=yy(e),n=e.proxy,r=e.ctx;yg=!1,t.beforeCreate&&Km(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:u,watch:f,provide:p,inject:_,created:y,beforeMount:C,mounted:S,beforeUpdate:k,updated:P,activated:R,deactivated:O,beforeDestroy:H,beforeUnmount:X,destroyed:U,unmounted:ut,render:It,renderTracked:ot,renderTriggered:kt,errorCaptured:$,serverPrefetch:it,expose:xt,inheritAttrs:nt,components:Et,directives:At,filters:W}=t;if(_&&gC(_,r,null),u)for(const ht in u){const st=u[ht];Oe(st)&&(r[ht]=st.bind(n))}if(i){const ht=i.call(n,n);bn(ht)&&(e.data=ea(ht))}if(yg=!0,o)for(const ht in o){const st=o[ht],ft=Oe(st)?st.bind(n,n):Oe(st.get)?st.get.bind(n,n):fo,Tt=!Oe(st)&&Oe(st.set)?st.set.bind(n):fo,Pt=en({get:ft,set:Tt});Object.defineProperty(r,ht,{enumerable:!0,configurable:!0,get:()=>Pt.value,set:jt=>Pt.value=jt})}if(f)for(const ht in f)_y(f[ht],r,n,ht);if(p){const ht=Oe(p)?p.call(n):p;Reflect.ownKeys(ht).forEach(st=>{Df(st,ht[st])})}y&&Km(y,e,"c");function rt(ht,st){Le(st)?st.forEach(ft=>ht(ft.bind(n))):st&&ht(st.bind(n))}if(rt(nC,C),rt(Ba,S),rt(rC,k),rt(iC,P),rt(Q1,R),rt(tC,O),rt(uC,$),rt(aC,ot),rt(oC,kt),rt(my,X),rt(Lp,ut),rt(sC,it),Le(xt))if(xt.length){const ht=e.exposed||(e.exposed={});xt.forEach(st=>{Object.defineProperty(ht,st,{get:()=>n[st],set:ft=>n[st]=ft})})}else e.exposed||(e.exposed={});It&&e.render===fo&&(e.render=It),nt!=null&&(e.inheritAttrs=nt),Et&&(e.components=Et),At&&(e.directives=At),it&&py(e)}function gC(e,t,n=fo){Le(e)&&(e=vg(e));for(const r in e){const i=e[r];let o;bn(i)?"default"in i?o=cs(i.from||r,i.default,!0):o=cs(i.from||r):o=cs(i),Zn(o)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:u=>o.value=u}):t[r]=o}}function Km(e,t,n){mo(Le(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function _y(e,t,n,r){let i=r.includes(".")?Ay(n,r):()=>n[r];if(rr(e)){const o=t[e];Oe(o)&&Ds(i,o)}else if(Oe(e))Ds(i,e.bind(n));else if(bn(e))if(Le(e))e.forEach(o=>_y(o,t,n,r));else{const o=Oe(e.handler)?e.handler.bind(n):t[e.handler];Oe(o)&&Ds(i,o,e)}}function yy(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:u}}=e.appContext,f=o.get(t);let p;return f?p=f:!i.length&&!n&&!r?p=t:(p={},i.length&&i.forEach(_=>Xf(p,_,u,!0)),Xf(p,t,u)),bn(t)&&o.set(t,p),p}function Xf(e,t,n,r=!1){const{mixins:i,extends:o}=t;o&&Xf(e,o,n,!0),i&&i.forEach(u=>Xf(e,u,n,!0));for(const u in t)if(!(r&&u==="expose")){const f=mC[u]||n&&n[u];e[u]=f?f(e[u],t[u]):t[u]}return e}const mC={data:$m,props:Xm,emits:Xm,methods:Rc,computed:Rc,beforeCreate:si,created:si,beforeMount:si,mounted:si,beforeUpdate:si,updated:si,beforeDestroy:si,beforeUnmount:si,destroyed:si,unmounted:si,activated:si,deactivated:si,errorCaptured:si,serverPrefetch:si,components:Rc,directives:Rc,watch:yC,provide:$m,inject:_C};function $m(e,t){return t?e?function(){return Kr(Oe(e)?e.call(this,this):e,Oe(t)?t.call(this,this):t)}:t:e}function _C(e,t){return Rc(vg(e),vg(t))}function vg(e){if(Le(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function si(e,t){return e?[...new Set([].concat(e,t))]:t}function Rc(e,t){return e?Kr(Object.create(null),e,t):t}function Xm(e,t){return e?Le(e)&&Le(t)?[...new Set([...e,...t])]:Kr(Object.create(null),Wm(e),Wm(t??{})):t}function yC(e,t){if(!e)return t;if(!t)return e;const n=Kr(Object.create(null),e);for(const r in t)n[r]=si(e[r],t[r]);return n}function vy(){return{app:null,config:{isNativeTag:o1,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let vC=0;function xC(e,t){return function(r,i=null){Oe(r)||(r=Kr({},r)),i!=null&&!bn(i)&&(i=null);const o=vy(),u=new WeakSet,f=[];let p=!1;const _=o.app={_uid:vC++,_component:r,_props:i,_container:null,_context:o,_instance:null,version:eb,get config(){return o.config},set config(y){},use(y,...C){return u.has(y)||(y&&Oe(y.install)?(u.add(y),y.install(_,...C)):Oe(y)&&(u.add(y),y(_,...C))),_},mixin(y){return o.mixins.includes(y)||o.mixins.push(y),_},component(y,C){return C?(o.components[y]=C,_):o.components[y]},directive(y,C){return C?(o.directives[y]=C,_):o.directives[y]},mount(y,C,S){if(!p){const k=_._ceVNode||cr(r,i);return k.appContext=o,S===!0?S="svg":S===!1&&(S=void 0),e(k,y,S),p=!0,_._container=y,y.__vue_app__=_,Pp(k.component)}},onUnmount(y){f.push(y)},unmount(){p&&(mo(f,_._instance,16),e(null,_._container),delete _._container.__vue_app__)},provide(y,C){return o.provides[y]=C,_},runWithContext(y){const C=su;su=_;try{return y()}finally{su=C}}};return _}}let su=null;function Df(e,t){if(Rr){let n=Rr.provides;const r=Rr.parent&&Rr.parent.provides;r===n&&(n=Rr.provides=Object.create(r)),n[e]=t}}function cs(e,t,n=!1){const r=Rr||Ci;if(r||su){const i=su?su._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&Oe(t)?t.call(r&&r.proxy):t}}function CC(){return!!(Rr||Ci||su)}const xy={},Cy=()=>Object.create(xy),by=e=>Object.getPrototypeOf(e)===xy;function bC(e,t,n,r=!1){const i={},o=Cy();e.propsDefaults=Object.create(null),Ey(e,t,i,o);for(const u in e.propsOptions[0])u in i||(i[u]=void 0);n?e.props=r?i:iy(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function EC(e,t,n,r){const{props:i,attrs:o,vnode:{patchFlag:u}}=e,f=Ke(i),[p]=e.propsOptions;let _=!1;if((r||u>0)&&!(u&16)){if(u&8){const y=e.vnode.dynamicProps;for(let C=0;C<y.length;C++){let S=y[C];if(wp(e.emitsOptions,S))continue;const k=t[S];if(p)if(un(o,S))k!==o[S]&&(o[S]=k,_=!0);else{const P=ps(S);i[P]=xg(p,f,P,k,e,!1)}else k!==o[S]&&(o[S]=k,_=!0)}}}else{Ey(e,t,i,o)&&(_=!0);let y;for(const C in f)(!t||!un(t,C)&&((y=wu(C))===C||!un(t,y)))&&(p?n&&(n[C]!==void 0||n[y]!==void 0)&&(i[C]=xg(p,f,C,void 0,e,!0)):delete i[C]);if(o!==f)for(const C in o)(!t||!un(t,C))&&(delete o[C],_=!0)}_&&zo(e.attrs,"set","")}function Ey(e,t,n,r){const[i,o]=e.propsOptions;let u=!1,f;if(t)for(let p in t){if(zc(p))continue;const _=t[p];let y;i&&un(i,y=ps(p))?!o||!o.includes(y)?n[y]=_:(f||(f={}))[y]=_:wp(e.emitsOptions,p)||(!(p in r)||_!==r[p])&&(r[p]=_,u=!0)}if(o){const p=Ke(n),_=f||gn;for(let y=0;y<o.length;y++){const C=o[y];n[C]=xg(i,p,C,_[C],e,!un(_,C))}}return u}function xg(e,t,n,r,i,o){const u=e[n];if(u!=null){const f=un(u,"default");if(f&&r===void 0){const p=u.default;if(u.type!==Function&&!u.skipFactory&&Oe(p)){const{propsDefaults:_}=i;if(n in _)r=_[n];else{const y=Lh(i);r=_[n]=p.call(null,t),y()}}else r=p;i.ce&&i.ce._setProp(n,r)}u[0]&&(o&&!f?r=!1:u[1]&&(r===""||r===wu(n))&&(r=!0))}return r}const LC=new WeakMap;function Ly(e,t,n=!1){const r=n?LC:t.propsCache,i=r.get(e);if(i)return i;const o=e.props,u={},f=[];let p=!1;if(!Oe(e)){const y=C=>{p=!0;const[S,k]=Ly(C,t,!0);Kr(u,S),k&&f.push(...k)};!n&&t.mixins.length&&t.mixins.forEach(y),e.extends&&y(e.extends),e.mixins&&e.mixins.forEach(y)}if(!o&&!p)return bn(e)&&r.set(e,cl),cl;if(Le(o))for(let y=0;y<o.length;y++){const C=ps(o[y]);Ym(C)&&(u[C]=gn)}else if(o)for(const y in o){const C=ps(y);if(Ym(C)){const S=o[y],k=u[C]=Le(S)||Oe(S)?{type:S}:Kr({},S),P=k.type;let R=!1,O=!0;if(Le(P))for(let H=0;H<P.length;++H){const X=P[H],U=Oe(X)&&X.name;if(U==="Boolean"){R=!0;break}else U==="String"&&(O=!1)}else R=Oe(P)&&P.name==="Boolean";k[0]=R,k[1]=O,(R||un(k,"default"))&&f.push(C)}}const _=[u,f];return bn(e)&&r.set(e,_),_}function Ym(e){return e[0]!=="$"&&!zc(e)}const wy=e=>e[0]==="_"||e==="$stable",sm=e=>Le(e)?e.map(co):[co(e)],wC=(e,t,n)=>{if(t._n)return t;const r=Vc((...i)=>sm(t(...i)),n);return r._c=!1,r},Sy=(e,t,n)=>{const r=e._ctx;for(const i in e){if(wy(i))continue;const o=e[i];if(Oe(o))t[i]=wC(i,o,r);else if(o!=null){const u=sm(o);t[i]=()=>u}}},Py=(e,t)=>{const n=sm(t);e.slots.default=()=>n},My=(e,t,n)=>{for(const r in t)(n||r!=="_")&&(e[r]=t[r])},SC=(e,t,n)=>{const r=e.slots=Cy();if(e.vnode.shapeFlag&32){const i=t._;i?(My(r,t,n),n&&B0(r,"_",i,!0)):Sy(t,r)}else t&&Py(e,t)},PC=(e,t,n)=>{const{vnode:r,slots:i}=e;let o=!0,u=gn;if(r.shapeFlag&32){const f=t._;f?n&&f===1?o=!1:My(i,t,n):(o=!t.$stable,Sy(t,i)),u=t}else t&&(Py(e,t),u={default:1});if(o)for(const f in i)!wy(f)&&u[f]==null&&delete i[f]},Ni=UC;function MC(e){return IC(e)}function IC(e,t){const n=yp();n.__VUE__=!0;const{insert:r,remove:i,patchProp:o,createElement:u,createText:f,createComment:p,setText:_,setElementText:y,parentNode:C,nextSibling:S,setScopeId:k=fo,insertStaticContent:P}=e,R=(Z,Y,dt,Nt=null,Ft=null,Rt=null,Yt=void 0,Bt=null,Zt=!!Y.dynamicChildren)=>{if(Z===Y)return;Z&&!Ic(Z,Y)&&(Nt=Mt(Z),jt(Z,Ft,Rt,!0),Z=null),Y.patchFlag===-2&&(Zt=!1,Y.dynamicChildren=null);const{type:Gt,ref:oe,shapeFlag:te}=Y;switch(Gt){case Sp:O(Z,Y,dt,Nt);break;case uu:H(Z,Y,dt,Nt);break;case Nf:Z==null&&X(Y,dt,Nt,Yt);break;case kn:Et(Z,Y,dt,Nt,Ft,Rt,Yt,Bt,Zt);break;default:te&1?It(Z,Y,dt,Nt,Ft,Rt,Yt,Bt,Zt):te&6?At(Z,Y,dt,Nt,Ft,Rt,Yt,Bt,Zt):(te&64||te&128)&&Gt.process(Z,Y,dt,Nt,Ft,Rt,Yt,Bt,Zt,ie)}oe!=null&&Ft&&$f(oe,Z&&Z.ref,Rt,Y||Z,!Y)},O=(Z,Y,dt,Nt)=>{if(Z==null)r(Y.el=f(Y.children),dt,Nt);else{const Ft=Y.el=Z.el;Y.children!==Z.children&&_(Ft,Y.children)}},H=(Z,Y,dt,Nt)=>{Z==null?r(Y.el=p(Y.children||""),dt,Nt):Y.el=Z.el},X=(Z,Y,dt,Nt)=>{[Z.el,Z.anchor]=P(Z.children,Y,dt,Nt,Z.el,Z.anchor)},U=({el:Z,anchor:Y},dt,Nt)=>{let Ft;for(;Z&&Z!==Y;)Ft=S(Z),r(Z,dt,Nt),Z=Ft;r(Y,dt,Nt)},ut=({el:Z,anchor:Y})=>{let dt;for(;Z&&Z!==Y;)dt=S(Z),i(Z),Z=dt;i(Y)},It=(Z,Y,dt,Nt,Ft,Rt,Yt,Bt,Zt)=>{Y.type==="svg"?Yt="svg":Y.type==="math"&&(Yt="mathml"),Z==null?ot(Y,dt,Nt,Ft,Rt,Yt,Bt,Zt):it(Z,Y,Ft,Rt,Yt,Bt,Zt)},ot=(Z,Y,dt,Nt,Ft,Rt,Yt,Bt)=>{let Zt,Gt;const{props:oe,shapeFlag:te,transition:pe,dirs:xe}=Z;if(Zt=Z.el=u(Z.type,Rt,oe&&oe.is,oe),te&8?y(Zt,Z.children):te&16&&$(Z.children,Zt,null,Nt,Ft,Xd(Z,Rt),Yt,Bt),xe&&tu(Z,null,Nt,"created"),kt(Zt,Z,Z.scopeId,Yt,Nt),oe){for(const Xe in oe)Xe!=="value"&&!zc(Xe)&&o(Zt,Xe,null,oe[Xe],Rt,Nt);"value"in oe&&o(Zt,"value",null,oe.value,Rt),(Gt=oe.onVnodeBeforeMount)&&ro(Gt,Nt,Z)}xe&&tu(Z,null,Nt,"beforeMount");const Pe=kC(Ft,pe);Pe&&pe.beforeEnter(Zt),r(Zt,Y,dt),((Gt=oe&&oe.onVnodeMounted)||Pe||xe)&&Ni(()=>{Gt&&ro(Gt,Nt,Z),Pe&&pe.enter(Zt),xe&&tu(Z,null,Nt,"mounted")},Ft)},kt=(Z,Y,dt,Nt,Ft)=>{if(dt&&k(Z,dt),Nt)for(let Rt=0;Rt<Nt.length;Rt++)k(Z,Nt[Rt]);if(Ft){let Rt=Ft.subTree;if(Y===Rt||Ny(Rt.type)&&(Rt.ssContent===Y||Rt.ssFallback===Y)){const Yt=Ft.vnode;kt(Z,Yt,Yt.scopeId,Yt.slotScopeIds,Ft.parent)}}},$=(Z,Y,dt,Nt,Ft,Rt,Yt,Bt,Zt=0)=>{for(let Gt=Zt;Gt<Z.length;Gt++){const oe=Z[Gt]=Bt?va(Z[Gt]):co(Z[Gt]);R(null,oe,Y,dt,Nt,Ft,Rt,Yt,Bt)}},it=(Z,Y,dt,Nt,Ft,Rt,Yt)=>{const Bt=Y.el=Z.el;let{patchFlag:Zt,dynamicChildren:Gt,dirs:oe}=Y;Zt|=Z.patchFlag&16;const te=Z.props||gn,pe=Y.props||gn;let xe;if(dt&&eu(dt,!1),(xe=pe.onVnodeBeforeUpdate)&&ro(xe,dt,Y,Z),oe&&tu(Y,Z,dt,"beforeUpdate"),dt&&eu(dt,!0),(te.innerHTML&&pe.innerHTML==null||te.textContent&&pe.textContent==null)&&y(Bt,""),Gt?xt(Z.dynamicChildren,Gt,Bt,dt,Nt,Xd(Y,Ft),Rt):Yt||st(Z,Y,Bt,null,dt,Nt,Xd(Y,Ft),Rt,!1),Zt>0){if(Zt&16)nt(Bt,te,pe,dt,Ft);else if(Zt&2&&te.class!==pe.class&&o(Bt,"class",null,pe.class,Ft),Zt&4&&o(Bt,"style",te.style,pe.style,Ft),Zt&8){const Pe=Y.dynamicProps;for(let Xe=0;Xe<Pe.length;Xe++){const Ye=Pe[Xe],mr=te[Ye],Yn=pe[Ye];(Yn!==mr||Ye==="value")&&o(Bt,Ye,mr,Yn,Ft,dt)}}Zt&1&&Z.children!==Y.children&&y(Bt,Y.children)}else!Yt&&Gt==null&&nt(Bt,te,pe,dt,Ft);((xe=pe.onVnodeUpdated)||oe)&&Ni(()=>{xe&&ro(xe,dt,Y,Z),oe&&tu(Y,Z,dt,"updated")},Nt)},xt=(Z,Y,dt,Nt,Ft,Rt,Yt)=>{for(let Bt=0;Bt<Y.length;Bt++){const Zt=Z[Bt],Gt=Y[Bt],oe=Zt.el&&(Zt.type===kn||!Ic(Zt,Gt)||Zt.shapeFlag&70)?C(Zt.el):dt;R(Zt,Gt,oe,null,Nt,Ft,Rt,Yt,!0)}},nt=(Z,Y,dt,Nt,Ft)=>{if(Y!==dt){if(Y!==gn)for(const Rt in Y)!zc(Rt)&&!(Rt in dt)&&o(Z,Rt,Y[Rt],null,Ft,Nt);for(const Rt in dt){if(zc(Rt))continue;const Yt=dt[Rt],Bt=Y[Rt];Yt!==Bt&&Rt!=="value"&&o(Z,Rt,Bt,Yt,Ft,Nt)}"value"in dt&&o(Z,"value",Y.value,dt.value,Ft)}},Et=(Z,Y,dt,Nt,Ft,Rt,Yt,Bt,Zt)=>{const Gt=Y.el=Z?Z.el:f(""),oe=Y.anchor=Z?Z.anchor:f("");let{patchFlag:te,dynamicChildren:pe,slotScopeIds:xe}=Y;xe&&(Bt=Bt?Bt.concat(xe):xe),Z==null?(r(Gt,dt,Nt),r(oe,dt,Nt),$(Y.children||[],dt,oe,Ft,Rt,Yt,Bt,Zt)):te>0&&te&64&&pe&&Z.dynamicChildren?(xt(Z.dynamicChildren,pe,dt,Ft,Rt,Yt,Bt),(Y.key!=null||Ft&&Y===Ft.subTree)&&Iy(Z,Y,!0)):st(Z,Y,dt,oe,Ft,Rt,Yt,Bt,Zt)},At=(Z,Y,dt,Nt,Ft,Rt,Yt,Bt,Zt)=>{Y.slotScopeIds=Bt,Z==null?Y.shapeFlag&512?Ft.ctx.activate(Y,dt,Nt,Yt,Zt):W(Y,dt,Nt,Ft,Rt,Yt,Zt):V(Z,Y,Zt)},W=(Z,Y,dt,Nt,Ft,Rt,Yt)=>{const Bt=Z.component=KC(Z,Nt,Ft);if(dy(Z)&&(Bt.ctx.renderer=ie),$C(Bt,!1,Yt),Bt.asyncDep){if(Ft&&Ft.registerDep(Bt,rt,Yt),!Z.el){const Zt=Bt.subTree=cr(uu);H(null,Zt,Y,dt)}}else rt(Bt,Z,Y,dt,Ft,Rt,Yt)},V=(Z,Y,dt)=>{const Nt=Y.component=Z.component;if(zC(Z,Y,dt))if(Nt.asyncDep&&!Nt.asyncResolved){ht(Nt,Y,dt);return}else Nt.next=Y,Nt.update();else Y.el=Z.el,Nt.vnode=Y},rt=(Z,Y,dt,Nt,Ft,Rt,Yt)=>{const Bt=()=>{if(Z.isMounted){let{next:te,bu:pe,u:xe,parent:Pe,vnode:Xe}=Z;{const ar=ky(Z);if(ar){te&&(te.el=Xe.el,ht(Z,te,Yt)),ar.asyncDep.then(()=>{Z.isUnmounted||Bt()});return}}let Ye=te,mr;eu(Z,!1),te?(te.el=Xe.el,ht(Z,te,Yt)):te=Xe,pe&&Af(pe),(mr=te.props&&te.props.onVnodeBeforeUpdate)&&ro(mr,Pe,te,Xe),eu(Z,!0);const Yn=Qm(Z),Qr=Z.subTree;Z.subTree=Yn,R(Qr,Yn,C(Qr.el),Mt(Qr),Z,Ft,Rt),te.el=Yn.el,Ye===null&&GC(Z,Yn.el),xe&&Ni(xe,Ft),(mr=te.props&&te.props.onVnodeUpdated)&&Ni(()=>ro(mr,Pe,te,Xe),Ft)}else{let te;const{el:pe,props:xe}=Y,{bm:Pe,m:Xe,parent:Ye,root:mr,type:Yn}=Z,Qr=jc(Y);eu(Z,!1),Pe&&Af(Pe),!Qr&&(te=xe&&xe.onVnodeBeforeMount)&&ro(te,Ye,Y),eu(Z,!0);{mr.ce&&mr.ce._injectChildStyle(Yn);const ar=Z.subTree=Qm(Z);R(null,ar,dt,Nt,Z,Ft,Rt),Y.el=ar.el}if(Xe&&Ni(Xe,Ft),!Qr&&(te=xe&&xe.onVnodeMounted)){const ar=Y;Ni(()=>ro(te,Ye,ar),Ft)}(Y.shapeFlag&256||Ye&&jc(Ye.vnode)&&Ye.vnode.shapeFlag&256)&&Z.a&&Ni(Z.a,Ft),Z.isMounted=!0,Y=dt=Nt=null}};Z.scope.on();const Zt=Z.effect=new q0(Bt);Z.scope.off();const Gt=Z.update=Zt.run.bind(Zt),oe=Z.job=Zt.runIfDirty.bind(Zt);oe.i=Z,oe.id=Z.uid,Zt.scheduler=()=>rm(oe),eu(Z,!0),Gt()},ht=(Z,Y,dt)=>{Y.component=Z;const Nt=Z.vnode.props;Z.vnode=Y,Z.next=null,EC(Z,Y.props,Nt,dt),PC(Z,Y.children,dt),Ra(),Hm(Z),Oa()},st=(Z,Y,dt,Nt,Ft,Rt,Yt,Bt,Zt=!1)=>{const Gt=Z&&Z.children,oe=Z?Z.shapeFlag:0,te=Y.children,{patchFlag:pe,shapeFlag:xe}=Y;if(pe>0){if(pe&128){Tt(Gt,te,dt,Nt,Ft,Rt,Yt,Bt,Zt);return}else if(pe&256){ft(Gt,te,dt,Nt,Ft,Rt,Yt,Bt,Zt);return}}xe&8?(oe&16&&Jt(Gt,Ft,Rt),te!==Gt&&y(dt,te)):oe&16?xe&16?Tt(Gt,te,dt,Nt,Ft,Rt,Yt,Bt,Zt):Jt(Gt,Ft,Rt,!0):(oe&8&&y(dt,""),xe&16&&$(te,dt,Nt,Ft,Rt,Yt,Bt,Zt))},ft=(Z,Y,dt,Nt,Ft,Rt,Yt,Bt,Zt)=>{Z=Z||cl,Y=Y||cl;const Gt=Z.length,oe=Y.length,te=Math.min(Gt,oe);let pe;for(pe=0;pe<te;pe++){const xe=Y[pe]=Zt?va(Y[pe]):co(Y[pe]);R(Z[pe],xe,dt,null,Ft,Rt,Yt,Bt,Zt)}Gt>oe?Jt(Z,Ft,Rt,!0,!1,te):$(Y,dt,Nt,Ft,Rt,Yt,Bt,Zt,te)},Tt=(Z,Y,dt,Nt,Ft,Rt,Yt,Bt,Zt)=>{let Gt=0;const oe=Y.length;let te=Z.length-1,pe=oe-1;for(;Gt<=te&&Gt<=pe;){const xe=Z[Gt],Pe=Y[Gt]=Zt?va(Y[Gt]):co(Y[Gt]);if(Ic(xe,Pe))R(xe,Pe,dt,null,Ft,Rt,Yt,Bt,Zt);else break;Gt++}for(;Gt<=te&&Gt<=pe;){const xe=Z[te],Pe=Y[pe]=Zt?va(Y[pe]):co(Y[pe]);if(Ic(xe,Pe))R(xe,Pe,dt,null,Ft,Rt,Yt,Bt,Zt);else break;te--,pe--}if(Gt>te){if(Gt<=pe){const xe=pe+1,Pe=xe<oe?Y[xe].el:Nt;for(;Gt<=pe;)R(null,Y[Gt]=Zt?va(Y[Gt]):co(Y[Gt]),dt,Pe,Ft,Rt,Yt,Bt,Zt),Gt++}}else if(Gt>pe)for(;Gt<=te;)jt(Z[Gt],Ft,Rt,!0),Gt++;else{const xe=Gt,Pe=Gt,Xe=new Map;for(Gt=Pe;Gt<=pe;Gt++){const Vn=Y[Gt]=Zt?va(Y[Gt]):co(Y[Gt]);Vn.key!=null&&Xe.set(Vn.key,Gt)}let Ye,mr=0;const Yn=pe-Pe+1;let Qr=!1,ar=0;const $s=new Array(Yn);for(Gt=0;Gt<Yn;Gt++)$s[Gt]=0;for(Gt=xe;Gt<=te;Gt++){const Vn=Z[Gt];if(mr>=Yn){jt(Vn,Ft,Rt,!0);continue}let ti;if(Vn.key!=null)ti=Xe.get(Vn.key);else for(Ye=Pe;Ye<=pe;Ye++)if($s[Ye-Pe]===0&&Ic(Vn,Y[Ye])){ti=Ye;break}ti===void 0?jt(Vn,Ft,Rt,!0):($s[ti-Pe]=Gt+1,ti>=ar?ar=ti:Qr=!0,R(Vn,Y[ti],dt,null,Ft,Rt,Yt,Bt,Zt),mr++)}const wo=Qr?TC($s):cl;for(Ye=wo.length-1,Gt=Yn-1;Gt>=0;Gt--){const Vn=Pe+Gt,ti=Y[Vn],Xi=Vn+1<oe?Y[Vn+1].el:Nt;$s[Gt]===0?R(null,ti,dt,Xi,Ft,Rt,Yt,Bt,Zt):Qr&&(Ye<0||Gt!==wo[Ye]?Pt(ti,dt,Xi,2):Ye--)}}},Pt=(Z,Y,dt,Nt,Ft=null)=>{const{el:Rt,type:Yt,transition:Bt,children:Zt,shapeFlag:Gt}=Z;if(Gt&6){Pt(Z.component.subTree,Y,dt,Nt);return}if(Gt&128){Z.suspense.move(Y,dt,Nt);return}if(Gt&64){Yt.move(Z,Y,dt,ie);return}if(Yt===kn){r(Rt,Y,dt);for(let te=0;te<Zt.length;te++)Pt(Zt[te],Y,dt,Nt);r(Z.anchor,Y,dt);return}if(Yt===Nf){U(Z,Y,dt);return}if(Nt!==2&&Gt&1&&Bt)if(Nt===0)Bt.beforeEnter(Rt),r(Rt,Y,dt),Ni(()=>Bt.enter(Rt),Ft);else{const{leave:te,delayLeave:pe,afterLeave:xe}=Bt,Pe=()=>r(Rt,Y,dt),Xe=()=>{te(Rt,()=>{Pe(),xe&&xe()})};pe?pe(Rt,Pe,Xe):Xe()}else r(Rt,Y,dt)},jt=(Z,Y,dt,Nt=!1,Ft=!1)=>{const{type:Rt,props:Yt,ref:Bt,children:Zt,dynamicChildren:Gt,shapeFlag:oe,patchFlag:te,dirs:pe,cacheIndex:xe}=Z;if(te===-2&&(Ft=!1),Bt!=null&&$f(Bt,null,dt,Z,!0),xe!=null&&(Y.renderCache[xe]=void 0),oe&256){Y.ctx.deactivate(Z);return}const Pe=oe&1&&pe,Xe=!jc(Z);let Ye;if(Xe&&(Ye=Yt&&Yt.onVnodeBeforeUnmount)&&ro(Ye,Y,Z),oe&6)ne(Z.component,dt,Nt);else{if(oe&128){Z.suspense.unmount(dt,Nt);return}Pe&&tu(Z,null,Y,"beforeUnmount"),oe&64?Z.type.remove(Z,Y,dt,ie,Nt):Gt&&!Gt.hasOnce&&(Rt!==kn||te>0&&te&64)?Jt(Gt,Y,dt,!1,!0):(Rt===kn&&te&384||!Ft&&oe&16)&&Jt(Zt,Y,dt),Nt&&Ot(Z)}(Xe&&(Ye=Yt&&Yt.onVnodeUnmounted)||Pe)&&Ni(()=>{Ye&&ro(Ye,Y,Z),Pe&&tu(Z,null,Y,"unmounted")},dt)},Ot=Z=>{const{type:Y,el:dt,anchor:Nt,transition:Ft}=Z;if(Y===kn){ee(dt,Nt);return}if(Y===Nf){ut(Z);return}const Rt=()=>{i(dt),Ft&&!Ft.persisted&&Ft.afterLeave&&Ft.afterLeave()};if(Z.shapeFlag&1&&Ft&&!Ft.persisted){const{leave:Yt,delayLeave:Bt}=Ft,Zt=()=>Yt(dt,Rt);Bt?Bt(Z.el,Rt,Zt):Zt()}else Rt()},ee=(Z,Y)=>{let dt;for(;Z!==Y;)dt=S(Z),i(Z),Z=dt;i(Y)},ne=(Z,Y,dt)=>{const{bum:Nt,scope:Ft,job:Rt,subTree:Yt,um:Bt,m:Zt,a:Gt}=Z;Jm(Zt),Jm(Gt),Nt&&Af(Nt),Ft.stop(),Rt&&(Rt.flags|=8,jt(Yt,Z,Y,dt)),Bt&&Ni(Bt,Y),Ni(()=>{Z.isUnmounted=!0},Y),Y&&Y.pendingBranch&&!Y.isUnmounted&&Z.asyncDep&&!Z.asyncResolved&&Z.suspenseId===Y.pendingId&&(Y.deps--,Y.deps===0&&Y.resolve())},Jt=(Z,Y,dt,Nt=!1,Ft=!1,Rt=0)=>{for(let Yt=Rt;Yt<Z.length;Yt++)jt(Z[Yt],Y,dt,Nt,Ft)},Mt=Z=>{if(Z.shapeFlag&6)return Mt(Z.component.subTree);if(Z.shapeFlag&128)return Z.suspense.next();const Y=S(Z.anchor||Z.el),dt=Y&&Y[Y1];return dt?S(dt):Y};let Ht=!1;const Kt=(Z,Y,dt)=>{Z==null?Y._vnode&&jt(Y._vnode,null,null,!0):R(Y._vnode||null,Z,Y,null,null,null,dt),Y._vnode=Z,Ht||(Ht=!0,Hm(),cy(),Ht=!1)},ie={p:R,um:jt,m:Pt,r:Ot,mt:W,mc:$,pc:st,pbc:xt,n:Mt,o:e};return{render:Kt,hydrate:void 0,createApp:xC(Kt)}}function Xd({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function eu({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function kC(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Iy(e,t,n=!1){const r=e.children,i=t.children;if(Le(r)&&Le(i))for(let o=0;o<r.length;o++){const u=r[o];let f=i[o];f.shapeFlag&1&&!f.dynamicChildren&&((f.patchFlag<=0||f.patchFlag===32)&&(f=i[o]=va(i[o]),f.el=u.el),!n&&f.patchFlag!==-2&&Iy(u,f)),f.type===Sp&&(f.el=u.el)}}function TC(e){const t=e.slice(),n=[0];let r,i,o,u,f;const p=e.length;for(r=0;r<p;r++){const _=e[r];if(_!==0){if(i=n[n.length-1],e[i]<_){t[r]=i,n.push(r);continue}for(o=0,u=n.length-1;o<u;)f=o+u>>1,e[n[f]]<_?o=f+1:u=f;_<e[n[o]]&&(o>0&&(t[r]=n[o-1]),n[o]=r)}}for(o=n.length,u=n[o-1];o-- >0;)n[o]=u,u=t[u];return n}function ky(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:ky(t)}function Jm(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const AC=Symbol.for("v-scx"),DC=()=>cs(AC);function Ds(e,t,n){return Ty(e,t,n)}function Ty(e,t,n=gn){const{immediate:r,deep:i,flush:o,once:u}=n,f=Kr({},n),p=t&&r||!t&&o!=="post";let _;if(Qc){if(o==="sync"){const k=DC();_=k.__watcherHandles||(k.__watcherHandles=[])}else if(!p){const k=()=>{};return k.stop=fo,k.resume=fo,k.pause=fo,k}}const y=Rr;f.call=(k,P,R)=>mo(k,y,P,R);let C=!1;o==="post"?f.scheduler=k=>{Ni(k,y&&y.suspense)}:o!=="sync"&&(C=!0,f.scheduler=(k,P)=>{P?k():rm(k)}),f.augmentJob=k=>{t&&(k.flags|=4),C&&(k.flags|=2,y&&(k.id=y.uid,k.i=y))};const S=W1(e,t,f);return Qc&&(_?_.push(S):p&&S()),S}function NC(e,t,n){const r=this.proxy,i=rr(e)?e.includes(".")?Ay(r,e):()=>r[e]:e.bind(r,r);let o;Oe(t)?o=t:(o=t.handler,n=t);const u=Lh(this),f=Ty(i,o.bind(r),n);return u(),f}function Ay(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}const RC=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${ps(t)}Modifiers`]||e[`${wu(t)}Modifiers`];function OC(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||gn;let i=n;const o=t.startsWith("update:"),u=o&&RC(r,t.slice(7));u&&(u.trim&&(i=n.map(y=>rr(y)?y.trim():y)),u.number&&(i=n.map(qf)));let f,p=r[f=qd(t)]||r[f=qd(ps(t))];!p&&o&&(p=r[f=qd(wu(t))]),p&&mo(p,e,6,i);const _=r[f+"Once"];if(_){if(!e.emitted)e.emitted={};else if(e.emitted[f])return;e.emitted[f]=!0,mo(_,e,6,i)}}function Dy(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const o=e.emits;let u={},f=!1;if(!Oe(e)){const p=_=>{const y=Dy(_,t,!0);y&&(f=!0,Kr(u,y))};!n&&t.mixins.length&&t.mixins.forEach(p),e.extends&&p(e.extends),e.mixins&&e.mixins.forEach(p)}return!o&&!f?(bn(e)&&r.set(e,null),null):(Le(o)?o.forEach(p=>u[p]=null):Kr(u,o),bn(e)&&r.set(e,u),u)}function wp(e,t){return!e||!gp(t)?!1:(t=t.slice(2).replace(/Once$/,""),un(e,t[0].toLowerCase()+t.slice(1))||un(e,wu(t))||un(e,t))}function Qm(e){const{type:t,vnode:n,proxy:r,withProxy:i,propsOptions:[o],slots:u,attrs:f,emit:p,render:_,renderCache:y,props:C,data:S,setupState:k,ctx:P,inheritAttrs:R}=e,O=Kf(e);let H,X;try{if(n.shapeFlag&4){const ut=i||r,It=ut;H=co(_.call(It,ut,y,C,k,S,P)),X=f}else{const ut=t;H=co(ut.length>1?ut(C,{attrs:f,slots:u,emit:p}):ut(C,null)),X=t.props?f:BC(f)}}catch(ut){Hc.length=0,Cp(ut,e,1),H=cr(uu)}let U=H;if(X&&R!==!1){const ut=Object.keys(X),{shapeFlag:It}=U;ut.length&&It&7&&(o&&ut.some(Hg)&&(X=FC(X,o)),U=pl(U,X,!1,!0))}return n.dirs&&(U=pl(U,null,!1,!0),U.dirs=U.dirs?U.dirs.concat(n.dirs):n.dirs),n.transition&&im(U,n.transition),H=U,Kf(O),H}const BC=e=>{let t;for(const n in e)(n==="class"||n==="style"||gp(n))&&((t||(t={}))[n]=e[n]);return t},FC=(e,t)=>{const n={};for(const r in e)(!Hg(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function zC(e,t,n){const{props:r,children:i,component:o}=e,{props:u,children:f,patchFlag:p}=t,_=o.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&p>=0){if(p&1024)return!0;if(p&16)return r?t_(r,u,_):!!u;if(p&8){const y=t.dynamicProps;for(let C=0;C<y.length;C++){const S=y[C];if(u[S]!==r[S]&&!wp(_,S))return!0}}}else return(i||f)&&(!f||!f.$stable)?!0:r===u?!1:r?u?t_(r,u,_):!0:!!u;return!1}function t_(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(t[o]!==e[o]&&!wp(n,o))return!0}return!1}function GC({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const Ny=e=>e.__isSuspense;function UC(e,t){t&&t.pendingBranch?Le(e)?t.effects.push(...e):t.effects.push(e):X1(e)}const kn=Symbol.for("v-fgt"),Sp=Symbol.for("v-txt"),uu=Symbol.for("v-cmt"),Nf=Symbol.for("v-stc"),Hc=[];let Ri=null;function Wt(e=!1){Hc.push(Ri=e?null:[])}function VC(){Hc.pop(),Ri=Hc[Hc.length-1]||null}let Jc=1;function e_(e,t=!1){Jc+=e,e<0&&Ri&&t&&(Ri.hasOnce=!0)}function Ry(e){return e.dynamicChildren=Jc>0?Ri||cl:null,VC(),Jc>0&&Ri&&Ri.push(e),e}function Xt(e,t,n,r,i,o){return Ry(T(e,t,n,r,i,o,!0))}function lu(e,t,n,r,i){return Ry(cr(e,t,n,r,i,!0))}function Yf(e){return e?e.__v_isVNode===!0:!1}function Ic(e,t){return e.type===t.type&&e.key===t.key}const Oy=({key:e})=>e??null,Rf=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?rr(e)||Zn(e)||Oe(e)?{i:Ci,r:e,k:t,f:!!n}:e:null);function T(e,t=null,n=null,r=0,i=null,o=e===kn?0:1,u=!1,f=!1){const p={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Oy(t),ref:t&&Rf(t),scopeId:fy,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Ci};return f?(om(p,n),o&128&&e.normalize(p)):n&&(p.shapeFlag|=rr(n)?8:16),Jc>0&&!u&&Ri&&(p.patchFlag>0||o&6)&&p.patchFlag!==32&&Ri.push(p),p}const cr=jC;function jC(e,t=null,n=null,r=0,i=null,o=!1){if((!e||e===hC)&&(e=uu),Yf(e)){const f=pl(e,t,!0);return n&&om(f,n),Jc>0&&!o&&Ri&&(f.shapeFlag&6?Ri[Ri.indexOf(e)]=f:Ri.push(f)),f.patchFlag=-2,f}if(tb(e)&&(e=e.__vccOpts),t){t=qC(t);let{class:f,style:p}=t;f&&!rr(f)&&(t.class=As(f)),bn(p)&&(em(p)&&!Le(p)&&(p=Kr({},p)),t.style=vp(p))}const u=rr(e)?1:Ny(e)?128:J1(e)?64:bn(e)?4:Oe(e)?2:0;return T(e,t,n,r,i,u,o,!0)}function qC(e){return e?em(e)||by(e)?Kr({},e):e:null}function pl(e,t,n=!1,r=!1){const{props:i,ref:o,patchFlag:u,children:f,transition:p}=e,_=t?HC(i||{},t):i,y={__v_isVNode:!0,__v_skip:!0,type:e.type,props:_,key:_&&Oy(_),ref:t&&t.ref?n&&o?Le(o)?o.concat(Rf(t)):[o,Rf(t)]:Rf(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:f,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==kn?u===-1?16:u|16:u,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:p,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&pl(e.ssContent),ssFallback:e.ssFallback&&pl(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return p&&r&&im(y,p.clone(y)),y}function hr(e=" ",t=0){return cr(Sp,null,e,t)}function ak(e,t){const n=cr(Nf,null,e);return n.staticCount=t,n}function Me(e="",t=!1){return t?(Wt(),lu(uu,null,e)):cr(uu,null,e)}function co(e){return e==null||typeof e=="boolean"?cr(uu):Le(e)?cr(kn,null,e.slice()):Yf(e)?va(e):cr(Sp,null,String(e))}function va(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:pl(e)}function om(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Le(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),om(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!by(t)?t._ctx=Ci:i===3&&Ci&&(Ci.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Oe(t)?(t={default:t,_ctx:Ci},n=32):(t=String(t),r&64?(n=16,t=[hr(t)]):n=8);e.children=t,e.shapeFlag|=n}function HC(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=As([t.class,r.class]));else if(i==="style")t.style=vp([t.style,r.style]);else if(gp(i)){const o=t[i],u=r[i];u&&o!==u&&!(Le(o)&&o.includes(u))&&(t[i]=o?[].concat(o,u):u)}else i!==""&&(t[i]=r[i])}return t}function ro(e,t,n,r=null){mo(e,t,7,[n,r])}const ZC=vy();let WC=0;function KC(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||ZC,o={uid:WC++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new U0(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ly(r,i),emitsOptions:Dy(r,i),emit:null,emitted:null,propsDefaults:gn,inheritAttrs:r.inheritAttrs,ctx:gn,data:gn,props:gn,attrs:gn,slots:gn,refs:gn,setupState:gn,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=OC.bind(null,o),e.ce&&e.ce(o),o}let Rr=null,Jf,Cg;{const e=yp(),t=(n,r)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(r),o=>{i.length>1?i.forEach(u=>u(o)):i[0](o)}};Jf=t("__VUE_INSTANCE_SETTERS__",n=>Rr=n),Cg=t("__VUE_SSR_SETTERS__",n=>Qc=n)}const Lh=e=>{const t=Rr;return Jf(e),e.scope.on(),()=>{e.scope.off(),Jf(t)}},n_=()=>{Rr&&Rr.scope.off(),Jf(null)};function By(e){return e.vnode.shapeFlag&4}let Qc=!1;function $C(e,t=!1,n=!1){t&&Cg(t);const{props:r,children:i}=e.vnode,o=By(e);bC(e,r,o,t),SC(e,i,n);const u=o?XC(e,t):void 0;return t&&Cg(!1),u}function XC(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,pC);const{setup:r}=n;if(r){Ra();const i=e.setupContext=r.length>1?JC(e):null,o=Lh(e),u=Eh(r,e,0,[e.props,i]),f=N0(u);if(Oa(),o(),(f||e.sp)&&!jc(e)&&py(e),f){if(u.then(n_,n_),t)return u.then(p=>{r_(e,p)}).catch(p=>{Cp(p,e,0)});e.asyncDep=u}else r_(e,u)}else Fy(e)}function r_(e,t,n){Oe(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:bn(t)&&(e.setupState=ay(t)),Fy(e)}function Fy(e,t,n){const r=e.type;e.render||(e.render=r.render||fo);{const i=Lh(e);Ra();try{dC(e)}finally{Oa(),i()}}}const YC={get(e,t){return qr(e,"get",""),e[t]}};function JC(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,YC),slots:e.slots,emit:e.emit,expose:t}}function Pp(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(ay(nm(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in qc)return qc[n](e)},has(t,n){return n in t||n in qc}})):e.proxy}function QC(e,t=!0){return Oe(e)?e.displayName||e.name:e.name||t&&e.__name}function tb(e){return Oe(e)&&"__vccOpts"in e}const en=(e,t)=>H1(e,t,Qc);function zy(e,t,n){const r=arguments.length;return r===2?bn(t)&&!Le(t)?Yf(t)?cr(e,null,[t]):cr(e,t):cr(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Yf(n)&&(n=[n]),cr(e,t,n))}const eb="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let bg;const i_=typeof window<"u"&&window.trustedTypes;if(i_)try{bg=i_.createPolicy("vue",{createHTML:e=>e})}catch{}const Gy=bg?e=>bg.createHTML(e):e=>e,nb="http://www.w3.org/2000/svg",rb="http://www.w3.org/1998/Math/MathML",Fo=typeof document<"u"?document:null,s_=Fo&&Fo.createElement("template"),ib={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t==="svg"?Fo.createElementNS(nb,e):t==="mathml"?Fo.createElementNS(rb,e):n?Fo.createElement(e,{is:n}):Fo.createElement(e);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>Fo.createTextNode(e),createComment:e=>Fo.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Fo.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,o){const u=n?n.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===o||!(i=i.nextSibling)););else{s_.innerHTML=Gy(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const f=s_.content;if(r==="svg"||r==="mathml"){const p=f.firstChild;for(;p.firstChild;)f.appendChild(p.firstChild);f.removeChild(p)}t.insertBefore(f,n)}return[u?u.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},sb=Symbol("_vtc");function ob(e,t,n){const r=e[sb];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Qf=Symbol("_vod"),Uy=Symbol("_vsh"),o_={beforeMount(e,{value:t},{transition:n}){e[Qf]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):kc(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),kc(e,!0),r.enter(e)):r.leave(e,()=>{kc(e,!1)}):kc(e,t))},beforeUnmount(e,{value:t}){kc(e,t)}};function kc(e,t){e.style.display=t?e[Qf]:"none",e[Uy]=!t}const ab=Symbol(""),ub=/(^|;)\s*display\s*:/;function lb(e,t,n){const r=e.style,i=rr(n);let o=!1;if(n&&!i){if(t)if(rr(t))for(const u of t.split(";")){const f=u.slice(0,u.indexOf(":")).trim();n[f]==null&&Of(r,f,"")}else for(const u in t)n[u]==null&&Of(r,u,"");for(const u in n)u==="display"&&(o=!0),Of(r,u,n[u])}else if(i){if(t!==n){const u=r[ab];u&&(n+=";"+u),r.cssText=n,o=ub.test(n)}}else t&&e.removeAttribute("style");Qf in e&&(e[Qf]=o?r.display:"",e[Uy]&&(r.display="none"))}const a_=/\s*!important$/;function Of(e,t,n){if(Le(n))n.forEach(r=>Of(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=cb(e,t);a_.test(n)?e.setProperty(wu(r),n.replace(a_,""),"important"):e[r]=n}}const u_=["Webkit","Moz","ms"],Yd={};function cb(e,t){const n=Yd[t];if(n)return n;let r=ps(t);if(r!=="filter"&&r in e)return Yd[t]=r;r=_p(r);for(let i=0;i<u_.length;i++){const o=u_[i]+r;if(o in e)return Yd[t]=o}return t}const l_="http://www.w3.org/1999/xlink";function c_(e,t,n,r,i,o=m1(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(l_,t.slice(6,t.length)):e.setAttributeNS(l_,t,n):n==null||o&&!F0(n)?e.removeAttribute(t):e.setAttribute(t,o?"":go(n)?String(n):n)}function h_(e,t,n,r,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Gy(n):n);return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const f=o==="OPTION"?e.getAttribute("value")||"":e.value,p=n==null?e.type==="checkbox"?"on":"":String(n);(f!==p||!("_value"in e))&&(e.value=p),n==null&&e.removeAttribute(t),e._value=n;return}let u=!1;if(n===""||n==null){const f=typeof e[t];f==="boolean"?n=F0(n):n==null&&f==="string"?(n="",u=!0):f==="number"&&(n=0,u=!0)}try{e[t]=n}catch{}u&&e.removeAttribute(i||t)}function Ca(e,t,n,r){e.addEventListener(t,n,r)}function hb(e,t,n,r){e.removeEventListener(t,n,r)}const f_=Symbol("_vei");function fb(e,t,n,r,i=null){const o=e[f_]||(e[f_]={}),u=o[t];if(r&&u)u.value=r;else{const[f,p]=pb(t);if(r){const _=o[t]=mb(r,i);Ca(e,f,_,p)}else u&&(hb(e,f,u,p),o[t]=void 0)}}const p_=/(?:Once|Passive|Capture)$/;function pb(e){let t;if(p_.test(e)){t={};let r;for(;r=e.match(p_);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):wu(e.slice(2)),t]}let Jd=0;const db=Promise.resolve(),gb=()=>Jd||(db.then(()=>Jd=0),Jd=Date.now());function mb(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;mo(_b(r,n.value),t,5,[r])};return n.value=e,n.attached=gb(),n}function _b(e,t){if(Le(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const d_=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,yb=(e,t,n,r,i,o)=>{const u=i==="svg";t==="class"?ob(e,r,u):t==="style"?lb(e,n,r):gp(t)?Hg(t)||fb(e,t,n,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):vb(e,t,r,u))?(h_(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&c_(e,t,r,u,o,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!rr(r))?h_(e,ps(t),r,o,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),c_(e,t,r,u))};function vb(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&d_(t)&&Oe(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return d_(t)&&rr(n)?!1:t in e}const dl=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Le(t)?n=>Af(t,n):t};function xb(e){e.target.composing=!0}function g_(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const jo=Symbol("_assign"),Hn={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e[jo]=dl(i);const o=r||i.props&&i.props.type==="number";Ca(e,t?"change":"input",u=>{if(u.target.composing)return;let f=e.value;n&&(f=f.trim()),o&&(f=qf(f)),e[jo](f)}),n&&Ca(e,"change",()=>{e.value=e.value.trim()}),t||(Ca(e,"compositionstart",xb),Ca(e,"compositionend",g_),Ca(e,"change",g_))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:i,number:o}},u){if(e[jo]=dl(u),e.composing)return;const f=(o||e.type==="number")&&!/^0\d/.test(e.value)?qf(e.value):e.value,p=t??"";f!==p&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||i&&e.value.trim()===p)||(e.value=p))}},Cb={deep:!0,created(e,t,n){e[jo]=dl(n),Ca(e,"change",()=>{const r=e._modelValue,i=eh(e),o=e.checked,u=e[jo];if(Le(r)){const f=Kg(r,i),p=f!==-1;if(o&&!p)u(r.concat(i));else if(!o&&p){const _=[...r];_.splice(f,1),u(_)}}else if(Gl(r)){const f=new Set(r);o?f.add(i):f.delete(i),u(f)}else u(Vy(e,o))})},mounted:m_,beforeUpdate(e,t,n){e[jo]=dl(n),m_(e,t,n)}};function m_(e,{value:t,oldValue:n},r){e._modelValue=t;let i;if(Le(t))i=Kg(t,r.props.value)>-1;else if(Gl(t))i=t.has(r.props.value);else{if(t===n)return;i=bh(t,Vy(e,!0))}e.checked!==i&&(e.checked=i)}const th={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const i=Gl(t);Ca(e,"change",()=>{const o=Array.prototype.filter.call(e.options,u=>u.selected).map(u=>n?qf(eh(u)):eh(u));e[jo](e.multiple?i?new Set(o):o:o[0]),e._assigning=!0,bp(()=>{e._assigning=!1})}),e[jo]=dl(r)},mounted(e,{value:t}){__(e,t)},beforeUpdate(e,t,n){e[jo]=dl(n)},updated(e,{value:t}){e._assigning||__(e,t)}};function __(e,t){const n=e.multiple,r=Le(t);if(!(n&&!r&&!Gl(t))){for(let i=0,o=e.options.length;i<o;i++){const u=e.options[i],f=eh(u);if(n)if(r){const p=typeof f;p==="string"||p==="number"?u.selected=t.some(_=>String(_)===String(f)):u.selected=Kg(t,f)>-1}else u.selected=t.has(f);else if(bh(eh(u),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function eh(e){return"_value"in e?e._value:e.value}function Vy(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const bb=["ctrl","shift","alt","meta"],Eb={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>bb.some(n=>e[`${n}Key`]&&!t.includes(n))},wh=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(i,...o)=>{for(let u=0;u<t.length;u++){const f=Eb[t[u]];if(f&&f(i,t))return}return e(i,...o)})},Lb=Kr({patchProp:yb},ib);let y_;function wb(){return y_||(y_=MC(Lb))}const Sb=(...e)=>{const t=wb().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=Mb(r);if(!i)return;const o=t._component;!Oe(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const u=n(i,!1,Pb(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),u},t};function Pb(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Mb(e){return rr(e)?document.querySelector(e):e}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let jy;const Mp=e=>jy=e,qy=Symbol();function Eg(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Zc;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Zc||(Zc={}));function Ib(){const e=V0(!0),t=e.run(()=>de({}));let n=[],r=[];const i=nm({install(o){Mp(i),i._a=o,o.provide(qy,i),o.config.globalProperties.$pinia=i,r.forEach(u=>n.push(u)),r=[]},use(o){return this._a?n.push(o):r.push(o),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}const Hy=()=>{};function v_(e,t,n,r=Hy){e.push(t);const i=()=>{const o=e.indexOf(t);o>-1&&(e.splice(o,1),r())};return!n&&j0()&&y1(i),i}function ol(e,...t){e.slice().forEach(n=>{n(...t)})}const kb=e=>e(),x_=Symbol(),Qd=Symbol();function Lg(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,r)=>e.set(r,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],i=e[n];Eg(i)&&Eg(r)&&e.hasOwnProperty(n)&&!Zn(r)&&!Ea(r)?e[n]=Lg(i,r):e[n]=r}return e}const Tb=Symbol();function Ab(e){return!Eg(e)||!e.hasOwnProperty(Tb)}const{assign:_a}=Object;function Db(e){return!!(Zn(e)&&e.effect)}function Nb(e,t,n,r){const{state:i,actions:o,getters:u}=t,f=n.state.value[e];let p;function _(){f||(n.state.value[e]=i?i():{});const y=U1(n.state.value[e]);return _a(y,o,Object.keys(u||{}).reduce((C,S)=>(C[S]=nm(en(()=>{Mp(n);const k=n._s.get(e);return u[S].call(k,k)})),C),{}))}return p=Zy(e,_,t,n,r,!0),p}function Zy(e,t,n={},r,i,o){let u;const f=_a({actions:{}},n),p={deep:!0};let _,y,C=[],S=[],k;const P=r.state.value[e];!o&&!P&&(r.state.value[e]={}),de({});let R;function O($){let it;_=y=!1,typeof $=="function"?($(r.state.value[e]),it={type:Zc.patchFunction,storeId:e,events:k}):(Lg(r.state.value[e],$),it={type:Zc.patchObject,payload:$,storeId:e,events:k});const xt=R=Symbol();bp().then(()=>{R===xt&&(_=!0)}),y=!0,ol(C,it,r.state.value[e])}const H=o?function(){const{state:it}=n,xt=it?it():{};this.$patch(nt=>{_a(nt,xt)})}:Hy;function X(){u.stop(),C=[],S=[],r._s.delete(e)}const U=($,it="")=>{if(x_ in $)return $[Qd]=it,$;const xt=function(){Mp(r);const nt=Array.from(arguments),Et=[],At=[];function W(ht){Et.push(ht)}function V(ht){At.push(ht)}ol(S,{args:nt,name:xt[Qd],store:It,after:W,onError:V});let rt;try{rt=$.apply(this&&this.$id===e?this:It,nt)}catch(ht){throw ol(At,ht),ht}return rt instanceof Promise?rt.then(ht=>(ol(Et,ht),ht)).catch(ht=>(ol(At,ht),Promise.reject(ht))):(ol(Et,rt),rt)};return xt[x_]=!0,xt[Qd]=it,xt},ut={_p:r,$id:e,$onAction:v_.bind(null,S),$patch:O,$reset:H,$subscribe($,it={}){const xt=v_(C,$,it.detached,()=>nt()),nt=u.run(()=>Ds(()=>r.state.value[e],Et=>{(it.flush==="sync"?y:_)&&$({storeId:e,type:Zc.direct,events:k},Et)},_a({},p,it)));return xt},$dispose:X},It=ea(ut);r._s.set(e,It);const kt=(r._a&&r._a.runWithContext||kb)(()=>r._e.run(()=>(u=V0()).run(()=>t({action:U}))));for(const $ in kt){const it=kt[$];if(Zn(it)&&!Db(it)||Ea(it))o||(P&&Ab(it)&&(Zn(it)?it.value=P[$]:Lg(it,P[$])),r.state.value[e][$]=it);else if(typeof it=="function"){const xt=U(it,$);kt[$]=xt,f.actions[$]=it}}return _a(It,kt),_a(Ke(It),kt),Object.defineProperty(It,"$state",{get:()=>r.state.value[e],set:$=>{O(it=>{_a(it,$)})}}),r._p.forEach($=>{_a(It,u.run(()=>$({store:It,app:r._a,pinia:r,options:f})))}),P&&o&&n.hydrate&&n.hydrate(It.$state,P),_=!0,y=!0,It}/*! #__NO_SIDE_EFFECTS__ */function am(e,t,n){let r,i;const o=typeof t=="function";typeof e=="string"?(r=e,i=o?n:t):(i=e,r=e.id);function u(f,p){const _=CC();return f=f||(_?cs(qy,null):null),f&&Mp(f),f=jy,f._s.has(r)||(o?Zy(r,t,i,f):Nb(r,i,f)),f._s.get(r)}return u.$id=r,u}function Wy(e,t){return function(){return e.apply(t,arguments)}}const{toString:Rb}=Object.prototype,{getPrototypeOf:um}=Object,Ip=(e=>t=>{const n=Rb.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ws=e=>(e=e.toLowerCase(),t=>Ip(t)===e),kp=e=>t=>typeof t===e,{isArray:Ul}=Array,nh=kp("undefined");function Ob(e){return e!==null&&!nh(e)&&e.constructor!==null&&!nh(e.constructor)&&Oi(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Ky=Ws("ArrayBuffer");function Bb(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Ky(e.buffer),t}const Fb=kp("string"),Oi=kp("function"),$y=kp("number"),Tp=e=>e!==null&&typeof e=="object",zb=e=>e===!0||e===!1,Bf=e=>{if(Ip(e)!=="object")return!1;const t=um(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Gb=Ws("Date"),Ub=Ws("File"),Vb=Ws("Blob"),jb=Ws("FileList"),qb=e=>Tp(e)&&Oi(e.pipe),Hb=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Oi(e.append)&&((t=Ip(e))==="formdata"||t==="object"&&Oi(e.toString)&&e.toString()==="[object FormData]"))},Zb=Ws("URLSearchParams"),[Wb,Kb,$b,Xb]=["ReadableStream","Request","Response","Headers"].map(Ws),Yb=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Sh(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),Ul(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const o=n?Object.getOwnPropertyNames(e):Object.keys(e),u=o.length;let f;for(r=0;r<u;r++)f=o[r],t.call(null,e[f],f,e)}}function Xy(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const ru=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Yy=e=>!nh(e)&&e!==ru;function wg(){const{caseless:e}=Yy(this)&&this||{},t={},n=(r,i)=>{const o=e&&Xy(t,i)||i;Bf(t[o])&&Bf(r)?t[o]=wg(t[o],r):Bf(r)?t[o]=wg({},r):Ul(r)?t[o]=r.slice():t[o]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Sh(arguments[r],n);return t}const Jb=(e,t,n,{allOwnKeys:r}={})=>(Sh(t,(i,o)=>{n&&Oi(i)?e[o]=Wy(i,n):e[o]=i},{allOwnKeys:r}),e),Qb=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),tE=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},eE=(e,t,n,r)=>{let i,o,u;const f={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)u=i[o],(!r||r(u,e,t))&&!f[u]&&(t[u]=e[u],f[u]=!0);e=n!==!1&&um(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},nE=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},rE=e=>{if(!e)return null;if(Ul(e))return e;let t=e.length;if(!$y(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},iE=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&um(Uint8Array)),sE=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=r.next())&&!i.done;){const o=i.value;t.call(e,o[0],o[1])}},oE=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},aE=Ws("HTMLFormElement"),uE=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),C_=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),lE=Ws("RegExp"),Jy=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Sh(n,(i,o)=>{let u;(u=t(i,o,e))!==!1&&(r[o]=u||i)}),Object.defineProperties(e,r)},cE=e=>{Jy(e,(t,n)=>{if(Oi(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Oi(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},hE=(e,t)=>{const n={},r=i=>{i.forEach(o=>{n[o]=!0})};return Ul(e)?r(e):r(String(e).split(t)),n},fE=()=>{},pE=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,tg="abcdefghijklmnopqrstuvwxyz",b_="0123456789",Qy={DIGIT:b_,ALPHA:tg,ALPHA_DIGIT:tg+tg.toUpperCase()+b_},dE=(e=16,t=Qy.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function gE(e){return!!(e&&Oi(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const mE=e=>{const t=new Array(10),n=(r,i)=>{if(Tp(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[i]=r;const o=Ul(r)?[]:{};return Sh(r,(u,f)=>{const p=n(u,i+1);!nh(p)&&(o[f]=p)}),t[i]=void 0,o}}return r};return n(e,0)},_E=Ws("AsyncFunction"),yE=e=>e&&(Tp(e)||Oi(e))&&Oi(e.then)&&Oi(e.catch),tv=((e,t)=>e?setImmediate:t?((n,r)=>(ru.addEventListener("message",({source:i,data:o})=>{i===ru&&o===n&&r.length&&r.shift()()},!1),i=>{r.push(i),ru.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Oi(ru.postMessage)),vE=typeof queueMicrotask<"u"?queueMicrotask.bind(ru):typeof process<"u"&&process.nextTick||tv,Dt={isArray:Ul,isArrayBuffer:Ky,isBuffer:Ob,isFormData:Hb,isArrayBufferView:Bb,isString:Fb,isNumber:$y,isBoolean:zb,isObject:Tp,isPlainObject:Bf,isReadableStream:Wb,isRequest:Kb,isResponse:$b,isHeaders:Xb,isUndefined:nh,isDate:Gb,isFile:Ub,isBlob:Vb,isRegExp:lE,isFunction:Oi,isStream:qb,isURLSearchParams:Zb,isTypedArray:iE,isFileList:jb,forEach:Sh,merge:wg,extend:Jb,trim:Yb,stripBOM:Qb,inherits:tE,toFlatObject:eE,kindOf:Ip,kindOfTest:Ws,endsWith:nE,toArray:rE,forEachEntry:sE,matchAll:oE,isHTMLForm:aE,hasOwnProperty:C_,hasOwnProp:C_,reduceDescriptors:Jy,freezeMethods:cE,toObjectSet:hE,toCamelCase:uE,noop:fE,toFiniteNumber:pE,findKey:Xy,global:ru,isContextDefined:Yy,ALPHABET:Qy,generateString:dE,isSpecCompliantForm:gE,toJSONObject:mE,isAsyncFn:_E,isThenable:yE,setImmediate:tv,asap:vE};function Be(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Dt.inherits(Be,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Dt.toJSONObject(this.config),code:this.code,status:this.status}}});const ev=Be.prototype,nv={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{nv[e]={value:e}});Object.defineProperties(Be,nv);Object.defineProperty(ev,"isAxiosError",{value:!0});Be.from=(e,t,n,r,i,o)=>{const u=Object.create(ev);return Dt.toFlatObject(e,u,function(p){return p!==Error.prototype},f=>f!=="isAxiosError"),Be.call(u,e.message,t,n,r,i),u.cause=e,u.name=e.name,o&&Object.assign(u,o),u};const xE=null;function Sg(e){return Dt.isPlainObject(e)||Dt.isArray(e)}function rv(e){return Dt.endsWith(e,"[]")?e.slice(0,-2):e}function E_(e,t,n){return e?e.concat(t).map(function(i,o){return i=rv(i),!n&&o?"["+i+"]":i}).join(n?".":""):t}function CE(e){return Dt.isArray(e)&&!e.some(Sg)}const bE=Dt.toFlatObject(Dt,{},null,function(t){return/^is[A-Z]/.test(t)});function Ap(e,t,n){if(!Dt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Dt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(R,O){return!Dt.isUndefined(O[R])});const r=n.metaTokens,i=n.visitor||y,o=n.dots,u=n.indexes,p=(n.Blob||typeof Blob<"u"&&Blob)&&Dt.isSpecCompliantForm(t);if(!Dt.isFunction(i))throw new TypeError("visitor must be a function");function _(P){if(P===null)return"";if(Dt.isDate(P))return P.toISOString();if(!p&&Dt.isBlob(P))throw new Be("Blob is not supported. Use a Buffer instead.");return Dt.isArrayBuffer(P)||Dt.isTypedArray(P)?p&&typeof Blob=="function"?new Blob([P]):Buffer.from(P):P}function y(P,R,O){let H=P;if(P&&!O&&typeof P=="object"){if(Dt.endsWith(R,"{}"))R=r?R:R.slice(0,-2),P=JSON.stringify(P);else if(Dt.isArray(P)&&CE(P)||(Dt.isFileList(P)||Dt.endsWith(R,"[]"))&&(H=Dt.toArray(P)))return R=rv(R),H.forEach(function(U,ut){!(Dt.isUndefined(U)||U===null)&&t.append(u===!0?E_([R],ut,o):u===null?R:R+"[]",_(U))}),!1}return Sg(P)?!0:(t.append(E_(O,R,o),_(P)),!1)}const C=[],S=Object.assign(bE,{defaultVisitor:y,convertValue:_,isVisitable:Sg});function k(P,R){if(!Dt.isUndefined(P)){if(C.indexOf(P)!==-1)throw Error("Circular reference detected in "+R.join("."));C.push(P),Dt.forEach(P,function(H,X){(!(Dt.isUndefined(H)||H===null)&&i.call(t,H,Dt.isString(X)?X.trim():X,R,S))===!0&&k(H,R?R.concat(X):[X])}),C.pop()}}if(!Dt.isObject(e))throw new TypeError("data must be an object");return k(e),t}function L_(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function lm(e,t){this._pairs=[],e&&Ap(e,this,t)}const iv=lm.prototype;iv.append=function(t,n){this._pairs.push([t,n])};iv.toString=function(t){const n=t?function(r){return t.call(this,r,L_)}:L_;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function EE(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function sv(e,t,n){if(!t)return e;const r=n&&n.encode||EE;Dt.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let o;if(i?o=i(t,n):o=Dt.isURLSearchParams(t)?t.toString():new lm(t,n).toString(r),o){const u=e.indexOf("#");u!==-1&&(e=e.slice(0,u)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class w_{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Dt.forEach(this.handlers,function(r){r!==null&&t(r)})}}const ov={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},LE=typeof URLSearchParams<"u"?URLSearchParams:lm,wE=typeof FormData<"u"?FormData:null,SE=typeof Blob<"u"?Blob:null,PE={isBrowser:!0,classes:{URLSearchParams:LE,FormData:wE,Blob:SE},protocols:["http","https","file","blob","url","data"]},cm=typeof window<"u"&&typeof document<"u",Pg=typeof navigator=="object"&&navigator||void 0,ME=cm&&(!Pg||["ReactNative","NativeScript","NS"].indexOf(Pg.product)<0),IE=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",kE=cm&&window.location.href||"http://localhost",TE=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:cm,hasStandardBrowserEnv:ME,hasStandardBrowserWebWorkerEnv:IE,navigator:Pg,origin:kE},Symbol.toStringTag,{value:"Module"})),Zr={...TE,...PE};function AE(e,t){return Ap(e,new Zr.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,o){return Zr.isNode&&Dt.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function DE(e){return Dt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function NE(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}function av(e){function t(n,r,i,o){let u=n[o++];if(u==="__proto__")return!0;const f=Number.isFinite(+u),p=o>=n.length;return u=!u&&Dt.isArray(i)?i.length:u,p?(Dt.hasOwnProp(i,u)?i[u]=[i[u],r]:i[u]=r,!f):((!i[u]||!Dt.isObject(i[u]))&&(i[u]=[]),t(n,r,i[u],o)&&Dt.isArray(i[u])&&(i[u]=NE(i[u])),!f)}if(Dt.isFormData(e)&&Dt.isFunction(e.entries)){const n={};return Dt.forEachEntry(e,(r,i)=>{t(DE(r),i,n,0)}),n}return null}function RE(e,t,n){if(Dt.isString(e))try{return(t||JSON.parse)(e),Dt.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Ph={transitional:ov,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,o=Dt.isObject(t);if(o&&Dt.isHTMLForm(t)&&(t=new FormData(t)),Dt.isFormData(t))return i?JSON.stringify(av(t)):t;if(Dt.isArrayBuffer(t)||Dt.isBuffer(t)||Dt.isStream(t)||Dt.isFile(t)||Dt.isBlob(t)||Dt.isReadableStream(t))return t;if(Dt.isArrayBufferView(t))return t.buffer;if(Dt.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let f;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return AE(t,this.formSerializer).toString();if((f=Dt.isFileList(t))||r.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return Ap(f?{"files[]":t}:t,p&&new p,this.formSerializer)}}return o||i?(n.setContentType("application/json",!1),RE(t)):t}],transformResponse:[function(t){const n=this.transitional||Ph.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Dt.isResponse(t)||Dt.isReadableStream(t))return t;if(t&&Dt.isString(t)&&(r&&!this.responseType||i)){const u=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(f){if(u)throw f.name==="SyntaxError"?Be.from(f,Be.ERR_BAD_RESPONSE,this,null,this.response):f}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Zr.classes.FormData,Blob:Zr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Dt.forEach(["delete","get","head","post","put","patch"],e=>{Ph.headers[e]={}});const OE=Dt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),BE=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(u){i=u.indexOf(":"),n=u.substring(0,i).trim().toLowerCase(),r=u.substring(i+1).trim(),!(!n||t[n]&&OE[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},S_=Symbol("internals");function Tc(e){return e&&String(e).trim().toLowerCase()}function Ff(e){return e===!1||e==null?e:Dt.isArray(e)?e.map(Ff):String(e)}function FE(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const zE=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function eg(e,t,n,r,i){if(Dt.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!Dt.isString(t)){if(Dt.isString(r))return t.indexOf(r)!==-1;if(Dt.isRegExp(r))return r.test(t)}}function GE(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function UE(e,t){const n=Dt.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,o,u){return this[r].call(this,t,i,o,u)},configurable:!0})})}let bi=class{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function o(f,p,_){const y=Tc(p);if(!y)throw new Error("header name must be a non-empty string");const C=Dt.findKey(i,y);(!C||i[C]===void 0||_===!0||_===void 0&&i[C]!==!1)&&(i[C||p]=Ff(f))}const u=(f,p)=>Dt.forEach(f,(_,y)=>o(_,y,p));if(Dt.isPlainObject(t)||t instanceof this.constructor)u(t,n);else if(Dt.isString(t)&&(t=t.trim())&&!zE(t))u(BE(t),n);else if(Dt.isHeaders(t))for(const[f,p]of t.entries())o(p,f,r);else t!=null&&o(n,t,r);return this}get(t,n){if(t=Tc(t),t){const r=Dt.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return FE(i);if(Dt.isFunction(n))return n.call(this,i,r);if(Dt.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Tc(t),t){const r=Dt.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||eg(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function o(u){if(u=Tc(u),u){const f=Dt.findKey(r,u);f&&(!n||eg(r,r[f],f,n))&&(delete r[f],i=!0)}}return Dt.isArray(t)?t.forEach(o):o(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const o=n[r];(!t||eg(this,this[o],o,t,!0))&&(delete this[o],i=!0)}return i}normalize(t){const n=this,r={};return Dt.forEach(this,(i,o)=>{const u=Dt.findKey(r,o);if(u){n[u]=Ff(i),delete n[o];return}const f=t?GE(o):String(o).trim();f!==o&&delete n[o],n[f]=Ff(i),r[f]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Dt.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&Dt.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[S_]=this[S_]={accessors:{}}).accessors,i=this.prototype;function o(u){const f=Tc(u);r[f]||(UE(i,u),r[f]=!0)}return Dt.isArray(t)?t.forEach(o):o(t),this}};bi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Dt.reduceDescriptors(bi.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});Dt.freezeMethods(bi);function ng(e,t){const n=this||Ph,r=t||n,i=bi.from(r.headers);let o=r.data;return Dt.forEach(e,function(f){o=f.call(n,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function uv(e){return!!(e&&e.__CANCEL__)}function Vl(e,t,n){Be.call(this,e??"canceled",Be.ERR_CANCELED,t,n),this.name="CanceledError"}Dt.inherits(Vl,Be,{__CANCEL__:!0});function lv(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new Be("Request failed with status code "+n.status,[Be.ERR_BAD_REQUEST,Be.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function VE(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function jE(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,o=0,u;return t=t!==void 0?t:1e3,function(p){const _=Date.now(),y=r[o];u||(u=_),n[i]=p,r[i]=_;let C=o,S=0;for(;C!==i;)S+=n[C++],C=C%e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),_-u<t)return;const k=y&&_-y;return k?Math.round(S*1e3/k):void 0}}function qE(e,t){let n=0,r=1e3/t,i,o;const u=(_,y=Date.now())=>{n=y,i=null,o&&(clearTimeout(o),o=null),e.apply(null,_)};return[(..._)=>{const y=Date.now(),C=y-n;C>=r?u(_,y):(i=_,o||(o=setTimeout(()=>{o=null,u(i)},r-C)))},()=>i&&u(i)]}const tp=(e,t,n=3)=>{let r=0;const i=jE(50,250);return qE(o=>{const u=o.loaded,f=o.lengthComputable?o.total:void 0,p=u-r,_=i(p),y=u<=f;r=u;const C={loaded:u,total:f,progress:f?u/f:void 0,bytes:p,rate:_||void 0,estimated:_&&f&&y?(f-u)/_:void 0,event:o,lengthComputable:f!=null,[t?"download":"upload"]:!0};e(C)},n)},P_=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},M_=e=>(...t)=>Dt.asap(()=>e(...t)),HE=Zr.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Zr.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Zr.origin),Zr.navigator&&/(msie|trident)/i.test(Zr.navigator.userAgent)):()=>!0,ZE=Zr.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const u=[e+"="+encodeURIComponent(t)];Dt.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),Dt.isString(r)&&u.push("path="+r),Dt.isString(i)&&u.push("domain="+i),o===!0&&u.push("secure"),document.cookie=u.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function WE(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function KE(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function cv(e,t){return e&&!WE(t)?KE(e,t):t}const I_=e=>e instanceof bi?{...e}:e;function cu(e,t){t=t||{};const n={};function r(_,y,C,S){return Dt.isPlainObject(_)&&Dt.isPlainObject(y)?Dt.merge.call({caseless:S},_,y):Dt.isPlainObject(y)?Dt.merge({},y):Dt.isArray(y)?y.slice():y}function i(_,y,C,S){if(Dt.isUndefined(y)){if(!Dt.isUndefined(_))return r(void 0,_,C,S)}else return r(_,y,C,S)}function o(_,y){if(!Dt.isUndefined(y))return r(void 0,y)}function u(_,y){if(Dt.isUndefined(y)){if(!Dt.isUndefined(_))return r(void 0,_)}else return r(void 0,y)}function f(_,y,C){if(C in t)return r(_,y);if(C in e)return r(void 0,_)}const p={url:o,method:o,data:o,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:f,headers:(_,y,C)=>i(I_(_),I_(y),C,!0)};return Dt.forEach(Object.keys(Object.assign({},e,t)),function(y){const C=p[y]||i,S=C(e[y],t[y],y);Dt.isUndefined(S)&&C!==f||(n[y]=S)}),n}const hv=e=>{const t=cu({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:o,headers:u,auth:f}=t;t.headers=u=bi.from(u),t.url=sv(cv(t.baseURL,t.url),e.params,e.paramsSerializer),f&&u.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):"")));let p;if(Dt.isFormData(n)){if(Zr.hasStandardBrowserEnv||Zr.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if((p=u.getContentType())!==!1){const[_,...y]=p?p.split(";").map(C=>C.trim()).filter(Boolean):[];u.setContentType([_||"multipart/form-data",...y].join("; "))}}if(Zr.hasStandardBrowserEnv&&(r&&Dt.isFunction(r)&&(r=r(t)),r||r!==!1&&HE(t.url))){const _=i&&o&&ZE.read(o);_&&u.set(i,_)}return t},$E=typeof XMLHttpRequest<"u",XE=$E&&function(e){return new Promise(function(n,r){const i=hv(e);let o=i.data;const u=bi.from(i.headers).normalize();let{responseType:f,onUploadProgress:p,onDownloadProgress:_}=i,y,C,S,k,P;function R(){k&&k(),P&&P(),i.cancelToken&&i.cancelToken.unsubscribe(y),i.signal&&i.signal.removeEventListener("abort",y)}let O=new XMLHttpRequest;O.open(i.method.toUpperCase(),i.url,!0),O.timeout=i.timeout;function H(){if(!O)return;const U=bi.from("getAllResponseHeaders"in O&&O.getAllResponseHeaders()),It={data:!f||f==="text"||f==="json"?O.responseText:O.response,status:O.status,statusText:O.statusText,headers:U,config:e,request:O};lv(function(kt){n(kt),R()},function(kt){r(kt),R()},It),O=null}"onloadend"in O?O.onloadend=H:O.onreadystatechange=function(){!O||O.readyState!==4||O.status===0&&!(O.responseURL&&O.responseURL.indexOf("file:")===0)||setTimeout(H)},O.onabort=function(){O&&(r(new Be("Request aborted",Be.ECONNABORTED,e,O)),O=null)},O.onerror=function(){r(new Be("Network Error",Be.ERR_NETWORK,e,O)),O=null},O.ontimeout=function(){let ut=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const It=i.transitional||ov;i.timeoutErrorMessage&&(ut=i.timeoutErrorMessage),r(new Be(ut,It.clarifyTimeoutError?Be.ETIMEDOUT:Be.ECONNABORTED,e,O)),O=null},o===void 0&&u.setContentType(null),"setRequestHeader"in O&&Dt.forEach(u.toJSON(),function(ut,It){O.setRequestHeader(It,ut)}),Dt.isUndefined(i.withCredentials)||(O.withCredentials=!!i.withCredentials),f&&f!=="json"&&(O.responseType=i.responseType),_&&([S,P]=tp(_,!0),O.addEventListener("progress",S)),p&&O.upload&&([C,k]=tp(p),O.upload.addEventListener("progress",C),O.upload.addEventListener("loadend",k)),(i.cancelToken||i.signal)&&(y=U=>{O&&(r(!U||U.type?new Vl(null,e,O):U),O.abort(),O=null)},i.cancelToken&&i.cancelToken.subscribe(y),i.signal&&(i.signal.aborted?y():i.signal.addEventListener("abort",y)));const X=VE(i.url);if(X&&Zr.protocols.indexOf(X)===-1){r(new Be("Unsupported protocol "+X+":",Be.ERR_BAD_REQUEST,e));return}O.send(o||null)})},YE=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,i;const o=function(_){if(!i){i=!0,f();const y=_ instanceof Error?_:this.reason;r.abort(y instanceof Be?y:new Vl(y instanceof Error?y.message:y))}};let u=t&&setTimeout(()=>{u=null,o(new Be(`timeout ${t} of ms exceeded`,Be.ETIMEDOUT))},t);const f=()=>{e&&(u&&clearTimeout(u),u=null,e.forEach(_=>{_.unsubscribe?_.unsubscribe(o):_.removeEventListener("abort",o)}),e=null)};e.forEach(_=>_.addEventListener("abort",o));const{signal:p}=r;return p.unsubscribe=()=>Dt.asap(f),p}},JE=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},QE=async function*(e,t){for await(const n of tL(e))yield*JE(n,t)},tL=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},k_=(e,t,n,r)=>{const i=QE(e,t);let o=0,u,f=p=>{u||(u=!0,r&&r(p))};return new ReadableStream({async pull(p){try{const{done:_,value:y}=await i.next();if(_){f(),p.close();return}let C=y.byteLength;if(n){let S=o+=C;n(S)}p.enqueue(new Uint8Array(y))}catch(_){throw f(_),_}},cancel(p){return f(p),i.return()}},{highWaterMark:2})},Dp=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",fv=Dp&&typeof ReadableStream=="function",eL=Dp&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),pv=(e,...t)=>{try{return!!e(...t)}catch{return!1}},nL=fv&&pv(()=>{let e=!1;const t=new Request(Zr.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),T_=64*1024,Mg=fv&&pv(()=>Dt.isReadableStream(new Response("").body)),ep={stream:Mg&&(e=>e.body)};Dp&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!ep[t]&&(ep[t]=Dt.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new Be(`Response type '${t}' is not supported`,Be.ERR_NOT_SUPPORT,r)})})})(new Response);const rL=async e=>{if(e==null)return 0;if(Dt.isBlob(e))return e.size;if(Dt.isSpecCompliantForm(e))return(await new Request(Zr.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Dt.isArrayBufferView(e)||Dt.isArrayBuffer(e))return e.byteLength;if(Dt.isURLSearchParams(e)&&(e=e+""),Dt.isString(e))return(await eL(e)).byteLength},iL=async(e,t)=>{const n=Dt.toFiniteNumber(e.getContentLength());return n??rL(t)},sL=Dp&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:o,timeout:u,onDownloadProgress:f,onUploadProgress:p,responseType:_,headers:y,withCredentials:C="same-origin",fetchOptions:S}=hv(e);_=_?(_+"").toLowerCase():"text";let k=YE([i,o&&o.toAbortSignal()],u),P;const R=k&&k.unsubscribe&&(()=>{k.unsubscribe()});let O;try{if(p&&nL&&n!=="get"&&n!=="head"&&(O=await iL(y,r))!==0){let It=new Request(t,{method:"POST",body:r,duplex:"half"}),ot;if(Dt.isFormData(r)&&(ot=It.headers.get("content-type"))&&y.setContentType(ot),It.body){const[kt,$]=P_(O,tp(M_(p)));r=k_(It.body,T_,kt,$)}}Dt.isString(C)||(C=C?"include":"omit");const H="credentials"in Request.prototype;P=new Request(t,{...S,signal:k,method:n.toUpperCase(),headers:y.normalize().toJSON(),body:r,duplex:"half",credentials:H?C:void 0});let X=await fetch(P);const U=Mg&&(_==="stream"||_==="response");if(Mg&&(f||U&&R)){const It={};["status","statusText","headers"].forEach(it=>{It[it]=X[it]});const ot=Dt.toFiniteNumber(X.headers.get("content-length")),[kt,$]=f&&P_(ot,tp(M_(f),!0))||[];X=new Response(k_(X.body,T_,kt,()=>{$&&$(),R&&R()}),It)}_=_||"text";let ut=await ep[Dt.findKey(ep,_)||"text"](X,e);return!U&&R&&R(),await new Promise((It,ot)=>{lv(It,ot,{data:ut,headers:bi.from(X.headers),status:X.status,statusText:X.statusText,config:e,request:P})})}catch(H){throw R&&R(),H&&H.name==="TypeError"&&/fetch/i.test(H.message)?Object.assign(new Be("Network Error",Be.ERR_NETWORK,e,P),{cause:H.cause||H}):Be.from(H,H&&H.code,e,P)}}),Ig={http:xE,xhr:XE,fetch:sL};Dt.forEach(Ig,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const A_=e=>`- ${e}`,oL=e=>Dt.isFunction(e)||e===null||e===!1,dv={getAdapter:e=>{e=Dt.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){n=e[o];let u;if(r=n,!oL(n)&&(r=Ig[(u=String(n)).toLowerCase()],r===void 0))throw new Be(`Unknown adapter '${u}'`);if(r)break;i[u||"#"+o]=r}if(!r){const o=Object.entries(i).map(([f,p])=>`adapter ${f} `+(p===!1?"is not supported by the environment":"is not available in the build"));let u=t?o.length>1?`since :
`+o.map(A_).join(`
`):" "+A_(o[0]):"as no adapter specified";throw new Be("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return r},adapters:Ig};function rg(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Vl(null,e)}function D_(e){return rg(e),e.headers=bi.from(e.headers),e.data=ng.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),dv.getAdapter(e.adapter||Ph.adapter)(e).then(function(r){return rg(e),r.data=ng.call(e,e.transformResponse,r),r.headers=bi.from(r.headers),r},function(r){return uv(r)||(rg(e),r&&r.response&&(r.response.data=ng.call(e,e.transformResponse,r.response),r.response.headers=bi.from(r.response.headers))),Promise.reject(r)})}const gv="1.7.9",Np={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Np[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const N_={};Np.transitional=function(t,n,r){function i(o,u){return"[Axios v"+gv+"] Transitional option '"+o+"'"+u+(r?". "+r:"")}return(o,u,f)=>{if(t===!1)throw new Be(i(u," has been removed"+(n?" in "+n:"")),Be.ERR_DEPRECATED);return n&&!N_[u]&&(N_[u]=!0,console.warn(i(u," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,u,f):!0}};Np.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function aL(e,t,n){if(typeof e!="object")throw new Be("options must be an object",Be.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],u=t[o];if(u){const f=e[o],p=f===void 0||u(f,o,e);if(p!==!0)throw new Be("option "+o+" must be "+p,Be.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Be("Unknown option "+o,Be.ERR_BAD_OPTION)}}const zf={assertOptions:aL,validators:Np},io=zf.validators;let ou=class{constructor(t){this.defaults=t,this.interceptors={request:new w_,response:new w_}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=cu(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:o}=n;r!==void 0&&zf.assertOptions(r,{silentJSONParsing:io.transitional(io.boolean),forcedJSONParsing:io.transitional(io.boolean),clarifyTimeoutError:io.transitional(io.boolean)},!1),i!=null&&(Dt.isFunction(i)?n.paramsSerializer={serialize:i}:zf.assertOptions(i,{encode:io.function,serialize:io.function},!0)),zf.assertOptions(n,{baseUrl:io.spelling("baseURL"),withXsrfToken:io.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let u=o&&Dt.merge(o.common,o[n.method]);o&&Dt.forEach(["delete","get","head","post","put","patch","common"],P=>{delete o[P]}),n.headers=bi.concat(u,o);const f=[];let p=!0;this.interceptors.request.forEach(function(R){typeof R.runWhen=="function"&&R.runWhen(n)===!1||(p=p&&R.synchronous,f.unshift(R.fulfilled,R.rejected))});const _=[];this.interceptors.response.forEach(function(R){_.push(R.fulfilled,R.rejected)});let y,C=0,S;if(!p){const P=[D_.bind(this),void 0];for(P.unshift.apply(P,f),P.push.apply(P,_),S=P.length,y=Promise.resolve(n);C<S;)y=y.then(P[C++],P[C++]);return y}S=f.length;let k=n;for(C=0;C<S;){const P=f[C++],R=f[C++];try{k=P(k)}catch(O){R.call(this,O);break}}try{y=D_.call(this,k)}catch(P){return Promise.reject(P)}for(C=0,S=_.length;C<S;)y=y.then(_[C++],_[C++]);return y}getUri(t){t=cu(this.defaults,t);const n=cv(t.baseURL,t.url);return sv(n,t.params,t.paramsSerializer)}};Dt.forEach(["delete","get","head","options"],function(t){ou.prototype[t]=function(n,r){return this.request(cu(r||{},{method:t,url:n,data:(r||{}).data}))}});Dt.forEach(["post","put","patch"],function(t){function n(r){return function(o,u,f){return this.request(cu(f||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:u}))}}ou.prototype[t]=n(),ou.prototype[t+"Form"]=n(!0)});let uL=class mv{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const u=new Promise(f=>{r.subscribe(f),o=f}).then(i);return u.cancel=function(){r.unsubscribe(o)},u},t(function(o,u,f){r.reason||(r.reason=new Vl(o,u,f),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new mv(function(i){t=i}),cancel:t}}};function lL(e){return function(n){return e.apply(null,n)}}function cL(e){return Dt.isObject(e)&&e.isAxiosError===!0}const kg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(kg).forEach(([e,t])=>{kg[t]=e});function _v(e){const t=new ou(e),n=Wy(ou.prototype.request,t);return Dt.extend(n,ou.prototype,t,{allOwnKeys:!0}),Dt.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return _v(cu(e,i))},n}const Wn=_v(Ph);Wn.Axios=ou;Wn.CanceledError=Vl;Wn.CancelToken=uL;Wn.isCancel=uv;Wn.VERSION=gv;Wn.toFormData=Ap;Wn.AxiosError=Be;Wn.Cancel=Wn.CanceledError;Wn.all=function(t){return Promise.all(t)};Wn.spread=lL;Wn.isAxiosError=cL;Wn.mergeConfig=cu;Wn.AxiosHeaders=bi;Wn.formToJSON=e=>av(Dt.isHTMLForm(e)?new FormData(e):e);Wn.getAdapter=dv.getAdapter;Wn.HttpStatusCode=kg;Wn.default=Wn;const{Axios:ck,AxiosError:hk,CanceledError:fk,isCancel:pk,CancelToken:dk,VERSION:gk,all:mk,Cancel:_k,isAxiosError:yk,spread:vk,toFormData:xk,AxiosHeaders:Ck,HttpStatusCode:bk,formToJSON:Ek,getAdapter:Lk,mergeConfig:wk}=Wn,Ze=Wn.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});function yv(e){var r;const n=`; ${document.cookie}`.split(`; ${e}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}Ze.interceptors.request.use(e=>{const t=yv("access_token");return t&&(e.headers.Authorization=`Bearer ${t}`),console.log("Request config:",{url:e.url,method:e.method,headers:e.headers,withCredentials:e.withCredentials}),e},e=>(console.error("Request interceptor error:",e),Promise.reject(e)));Ze.interceptors.response.use(e=>e,async e=>{var n;const t=e.config;if(((n=e.response)==null?void 0:n.status)===401&&!t._retry){t._retry=!0;try{await zi().refreshToken();const i=yv("access_token");if(i)return t.headers.Authorization=`Bearer ${i}`,Ze(t)}catch(r){console.error("Token refresh failed:",r),window.location.href="/login"}}return Promise.reject(e)});Ze.defaults.baseURL="/api";Ze.defaults.headers.common["Content-Type"]="application/json";Ze.defaults.withCredentials=!0;function np(e){var r;const n=`; ${document.cookie}`.split(`; ${e}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}Ze.interceptors.request.use(e=>{const t=np("access_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>(console.error("Request interceptor error:",e),Promise.reject(e)));Ze.interceptors.response.use(e=>e,async e=>{var r,i;const t=zi(),n=e.config;if(((r=e.response)==null?void 0:r.status)===401&&!n._retry&&!((i=n.url)!=null&&i.includes("/token/refresh/"))){n._retry=!0;try{if(!np("access_token"))throw new Error("No token available");await t.refreshToken();const u=np("access_token");if(u)return n.headers.Authorization=`Bearer ${u}`,Ze(n)}catch(o){console.error("Token refresh failed:",o),await t.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(e)});function hL(e,t,n=1){const r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);const i=`expires=${r.toUTCString()}`;document.cookie=`${e}=${t};${i};path=/;secure;samesite=Strict`}const zi=am("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,concessionnaires:[]}),getters:{isAdmin:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="admin"},isDealer:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="dealer"},isClient:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="client"},currentUser:e=>e.user,hasDealer:e=>{var t;return!!((t=e.user)!=null&&t.dealer)}},actions:{async initialize(e){if(console.log("Initializing auth store with state:",e),!e){console.log("No initial state, attempting to restore session...");const n=await this.restoreSession();return this.initialized=!0,n}if(e.isAuthenticated&&e.user)return this.user=e.user,this.isAuthenticated=!0,this.mustChangePassword=e.user.must_change_password||!1,this.initialized=!0,!0;const t=await this.restoreSession();return this.initialized=!0,t},async restoreSession(){console.log("Attempting to restore session...");try{if(!np("access_token"))return console.log("No token found, skipping session restore"),this.isAuthenticated=!1,this.user=null,!1;const t=await Ze.post("/token/refresh/");return t.data.user?(this.user=t.data.user,this.isAuthenticated=!0,this.mustChangePassword=t.data.user.must_change_password||!1,console.log("Session restored successfully"),!0):(await this.fetchUserProfile(),!0)}catch(e){return console.error("Failed to restore session:",e),this.isAuthenticated=!1,this.user=null,!1}},async login(e,t){var n,r,i;try{const o=await Ze.post("/token/",{username:e,password:t});if(!o.data.access)throw new Error("Token d'accès non reçu");document.cookie=`access_token=${o.data.access}; path=/; secure; samesite=Strict`;const u=await this.fetchUserProfile();return this.user=u,this.isAuthenticated=!0,!0}catch(o){throw this.isAuthenticated=!1,this.user=null,((n=o.response)==null?void 0:n.status)===401?new Error("Identifiants incorrects"):(i=(r=o.response)==null?void 0:r.data)!=null&&i.detail?new Error(o.response.data.detail):o}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const e=await Ze.get("/users/me/");return this.user=e.data,this.isAuthenticated=!0,this.mustChangePassword=e.data.must_change_password||!1,e.data}catch(e){throw this.isAuthenticated=!1,this.user=null,e}},async changePassword(e,t){try{console.log("Attempting to change password...");const n=await Ze.post("/users/change_password/",{old_password:e,password:t});return console.log("Password change response:",n.data),this.user={...this.user,must_change_password:!1},n.data}catch(n){throw console.error("Password change error:",n),n}},async refreshToken(){var e,t,n,r;try{console.log("Attempting to refresh token...");const i=await Ze.post("/token/refresh/",{},{withCredentials:!0}),{access:o}=i.data;if(!o)throw new Error("No access token received");return console.log("Token refreshed successfully"),hL("access_token",o,1),this.isAuthenticated=!0,o}catch(i){throw console.error("Error refreshing token:",{status:(e=i.response)==null?void 0:e.status,data:(t=i.response)==null?void 0:t.data}),(((n=i.response)==null?void 0:n.status)===401||((r=i.response)==null?void 0:r.status)===403)&&(console.log("Token refresh failed with auth error, logging out"),await this.logout()),i}},async fetchConcessionnaires(){this.loading=!0;try{const e=await Ze.get("/users/",{params:{role:"dealer"}});this.concessionnaires=e.data}catch(e){throw this.error="Erreur lors de la récupération des concessionnaires",e}finally{this.loading=!1}},async setConcessionnaire(e,t){this.loading=!0;try{await Ze.patch(`/users/${e}/`,{concessionnaire:t}),this.user&&this.user.id===e&&(this.user.dealer=t)}catch(n){throw this.error="Erreur lors de la mise à jour du concessionnaire",n}finally{this.loading=!1}},async createUser(e){this.loading=!0;try{return(await Ze.post("/users/",e)).data}catch(t){throw this.error="Erreur lors de la création de l'utilisateur",t}finally{this.loading=!1}},async updateUserRole(e,t){this.loading=!0;try{const n=await Ze.patch(`/users/${e}/`,{role:t});return this.user&&this.user.id===e&&(this.user.user_type=t),n.data}catch(n){throw this.error="Erreur lors de la mise à jour du rôle",n}finally{this.loading=!1}},async updateUserEmail(e){var t;this.loading=!0;try{const n=await Ze.patch(`/users/${(t=this.user)==null?void 0:t.id}/`,{email:e});return this.user&&(this.user.email=e),n.data}catch(n){throw this.error="Erreur lors de la mise à jour de l'email",n}finally{this.loading=!1}},checkAccess(e){return this.user?e.includes(this.user.user_type):!1}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const ul=typeof document<"u";function vv(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function fL(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&vv(e.default)}const an=Object.assign;function ig(e,t){const n={};for(const r in t){const i=t[r];n[r]=Bs(i)?i.map(e):e(i)}return n}const Wc=()=>{},Bs=Array.isArray,xv=/#/g,pL=/&/g,dL=/\//g,gL=/=/g,mL=/\?/g,Cv=/\+/g,_L=/%5B/g,yL=/%5D/g,bv=/%5E/g,vL=/%60/g,Ev=/%7B/g,xL=/%7C/g,Lv=/%7D/g,CL=/%20/g;function hm(e){return encodeURI(""+e).replace(xL,"|").replace(_L,"[").replace(yL,"]")}function bL(e){return hm(e).replace(Ev,"{").replace(Lv,"}").replace(bv,"^")}function Tg(e){return hm(e).replace(Cv,"%2B").replace(CL,"+").replace(xv,"%23").replace(pL,"%26").replace(vL,"`").replace(Ev,"{").replace(Lv,"}").replace(bv,"^")}function EL(e){return Tg(e).replace(gL,"%3D")}function LL(e){return hm(e).replace(xv,"%23").replace(mL,"%3F")}function wL(e){return e==null?"":LL(e).replace(dL,"%2F")}function rh(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const SL=/\/$/,PL=e=>e.replace(SL,"");function sg(e,t,n="/"){let r,i={},o="",u="";const f=t.indexOf("#");let p=t.indexOf("?");return f<p&&f>=0&&(p=-1),p>-1&&(r=t.slice(0,p),o=t.slice(p+1,f>-1?f:t.length),i=e(o)),f>-1&&(r=r||t.slice(0,f),u=t.slice(f,t.length)),r=TL(r??t,n),{fullPath:r+(o&&"?")+o+u,path:r,query:i,hash:rh(u)}}function ML(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function R_(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function IL(e,t,n){const r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&gl(t.matched[r],n.matched[i])&&wv(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function gl(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function wv(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!kL(e[n],t[n]))return!1;return!0}function kL(e,t){return Bs(e)?O_(e,t):Bs(t)?O_(t,e):e===t}function O_(e,t){return Bs(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function TL(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let o=n.length-1,u,f;for(u=0;u<r.length;u++)if(f=r[u],f!==".")if(f==="..")o>1&&o--;else break;return n.slice(0,o).join("/")+"/"+r.slice(u).join("/")}const da={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var ih;(function(e){e.pop="pop",e.push="push"})(ih||(ih={}));var Kc;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Kc||(Kc={}));function AL(e){if(!e)if(ul){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),PL(e)}const DL=/^[^#]+#/;function NL(e,t){return e.replace(DL,"#")+t}function RL(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const Rp=()=>({left:window.scrollX,top:window.scrollY});function OL(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=RL(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function B_(e,t){return(history.state?history.state.position-t:-1)+e}const Ag=new Map;function BL(e,t){Ag.set(e,t)}function FL(e){const t=Ag.get(e);return Ag.delete(e),t}let zL=()=>location.protocol+"//"+location.host;function Sv(e,t){const{pathname:n,search:r,hash:i}=t,o=e.indexOf("#");if(o>-1){let f=i.includes(e.slice(o))?e.slice(o).length:1,p=i.slice(f);return p[0]!=="/"&&(p="/"+p),R_(p,"")}return R_(n,e)+r+i}function GL(e,t,n,r){let i=[],o=[],u=null;const f=({state:S})=>{const k=Sv(e,location),P=n.value,R=t.value;let O=0;if(S){if(n.value=k,t.value=S,u&&u===P){u=null;return}O=R?S.position-R.position:0}else r(k);i.forEach(H=>{H(n.value,P,{delta:O,type:ih.pop,direction:O?O>0?Kc.forward:Kc.back:Kc.unknown})})};function p(){u=n.value}function _(S){i.push(S);const k=()=>{const P=i.indexOf(S);P>-1&&i.splice(P,1)};return o.push(k),k}function y(){const{history:S}=window;S.state&&S.replaceState(an({},S.state,{scroll:Rp()}),"")}function C(){for(const S of o)S();o=[],window.removeEventListener("popstate",f),window.removeEventListener("beforeunload",y)}return window.addEventListener("popstate",f),window.addEventListener("beforeunload",y,{passive:!0}),{pauseListeners:p,listen:_,destroy:C}}function F_(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?Rp():null}}function UL(e){const{history:t,location:n}=window,r={value:Sv(e,n)},i={value:t.state};i.value||o(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(p,_,y){const C=e.indexOf("#"),S=C>-1?(n.host&&document.querySelector("base")?e:e.slice(C))+p:zL()+e+p;try{t[y?"replaceState":"pushState"](_,"",S),i.value=_}catch(k){console.error(k),n[y?"replace":"assign"](S)}}function u(p,_){const y=an({},t.state,F_(i.value.back,p,i.value.forward,!0),_,{position:i.value.position});o(p,y,!0),r.value=p}function f(p,_){const y=an({},i.value,t.state,{forward:p,scroll:Rp()});o(y.current,y,!0);const C=an({},F_(r.value,p,null),{position:y.position+1},_);o(p,C,!1),r.value=p}return{location:r,state:i,push:f,replace:u}}function VL(e){e=AL(e);const t=UL(e),n=GL(e,t.state,t.location,t.replace);function r(o,u=!0){u||n.pauseListeners(),history.go(o)}const i=an({location:"",base:e,go:r,createHref:NL.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function jL(e){return typeof e=="string"||e&&typeof e=="object"}function Pv(e){return typeof e=="string"||typeof e=="symbol"}const Mv=Symbol("");var z_;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(z_||(z_={}));function ml(e,t){return an(new Error,{type:e,[Mv]:!0},t)}function Bo(e,t){return e instanceof Error&&Mv in e&&(t==null||!!(e.type&t))}const G_="[^/]+?",qL={sensitive:!1,strict:!1,start:!0,end:!0},HL=/[.+*?^${}()[\]/\\]/g;function ZL(e,t){const n=an({},qL,t),r=[];let i=n.start?"^":"";const o=[];for(const _ of e){const y=_.length?[]:[90];n.strict&&!_.length&&(i+="/");for(let C=0;C<_.length;C++){const S=_[C];let k=40+(n.sensitive?.25:0);if(S.type===0)C||(i+="/"),i+=S.value.replace(HL,"\\$&"),k+=40;else if(S.type===1){const{value:P,repeatable:R,optional:O,regexp:H}=S;o.push({name:P,repeatable:R,optional:O});const X=H||G_;if(X!==G_){k+=10;try{new RegExp(`(${X})`)}catch(ut){throw new Error(`Invalid custom RegExp for param "${P}" (${X}): `+ut.message)}}let U=R?`((?:${X})(?:/(?:${X}))*)`:`(${X})`;C||(U=O&&_.length<2?`(?:/${U})`:"/"+U),O&&(U+="?"),i+=U,k+=20,O&&(k+=-8),R&&(k+=-20),X===".*"&&(k+=-50)}y.push(k)}r.push(y)}if(n.strict&&n.end){const _=r.length-1;r[_][r[_].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const u=new RegExp(i,n.sensitive?"":"i");function f(_){const y=_.match(u),C={};if(!y)return null;for(let S=1;S<y.length;S++){const k=y[S]||"",P=o[S-1];C[P.name]=k&&P.repeatable?k.split("/"):k}return C}function p(_){let y="",C=!1;for(const S of e){(!C||!y.endsWith("/"))&&(y+="/"),C=!1;for(const k of S)if(k.type===0)y+=k.value;else if(k.type===1){const{value:P,repeatable:R,optional:O}=k,H=P in _?_[P]:"";if(Bs(H)&&!R)throw new Error(`Provided param "${P}" is an array but it is not repeatable (* or + modifiers)`);const X=Bs(H)?H.join("/"):H;if(!X)if(O)S.length<2&&(y.endsWith("/")?y=y.slice(0,-1):C=!0);else throw new Error(`Missing required param "${P}"`);y+=X}}return y||"/"}return{re:u,score:r,keys:o,parse:f,stringify:p}}function WL(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Iv(e,t){let n=0;const r=e.score,i=t.score;for(;n<r.length&&n<i.length;){const o=WL(r[n],i[n]);if(o)return o;n++}if(Math.abs(i.length-r.length)===1){if(U_(r))return 1;if(U_(i))return-1}return i.length-r.length}function U_(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const KL={type:0,value:""},$L=/[a-zA-Z0-9_]/;function XL(e){if(!e)return[[]];if(e==="/")return[[KL]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(k){throw new Error(`ERR (${n})/"${_}": ${k}`)}let n=0,r=n;const i=[];let o;function u(){o&&i.push(o),o=[]}let f=0,p,_="",y="";function C(){_&&(n===0?o.push({type:0,value:_}):n===1||n===2||n===3?(o.length>1&&(p==="*"||p==="+")&&t(`A repeatable param (${_}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:_,regexp:y,repeatable:p==="*"||p==="+",optional:p==="*"||p==="?"})):t("Invalid state to consume buffer"),_="")}function S(){_+=p}for(;f<e.length;){if(p=e[f++],p==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:p==="/"?(_&&C(),u()):p===":"?(C(),n=1):S();break;case 4:S(),n=r;break;case 1:p==="("?n=2:$L.test(p)?S():(C(),n=0,p!=="*"&&p!=="?"&&p!=="+"&&f--);break;case 2:p===")"?y[y.length-1]=="\\"?y=y.slice(0,-1)+p:n=3:y+=p;break;case 3:C(),n=0,p!=="*"&&p!=="?"&&p!=="+"&&f--,y="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${_}"`),C(),u(),i}function YL(e,t,n){const r=ZL(XL(e.path),n),i=an(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function JL(e,t){const n=[],r=new Map;t=H_({strict:!1,end:!0,sensitive:!1},t);function i(C){return r.get(C)}function o(C,S,k){const P=!k,R=j_(C);R.aliasOf=k&&k.record;const O=H_(t,C),H=[R];if("alias"in C){const ut=typeof C.alias=="string"?[C.alias]:C.alias;for(const It of ut)H.push(j_(an({},R,{components:k?k.record.components:R.components,path:It,aliasOf:k?k.record:R})))}let X,U;for(const ut of H){const{path:It}=ut;if(S&&It[0]!=="/"){const ot=S.record.path,kt=ot[ot.length-1]==="/"?"":"/";ut.path=S.record.path+(It&&kt+It)}if(X=YL(ut,S,O),k?k.alias.push(X):(U=U||X,U!==X&&U.alias.push(X),P&&C.name&&!q_(X)&&u(C.name)),kv(X)&&p(X),R.children){const ot=R.children;for(let kt=0;kt<ot.length;kt++)o(ot[kt],X,k&&k.children[kt])}k=k||X}return U?()=>{u(U)}:Wc}function u(C){if(Pv(C)){const S=r.get(C);S&&(r.delete(C),n.splice(n.indexOf(S),1),S.children.forEach(u),S.alias.forEach(u))}else{const S=n.indexOf(C);S>-1&&(n.splice(S,1),C.record.name&&r.delete(C.record.name),C.children.forEach(u),C.alias.forEach(u))}}function f(){return n}function p(C){const S=ew(C,n);n.splice(S,0,C),C.record.name&&!q_(C)&&r.set(C.record.name,C)}function _(C,S){let k,P={},R,O;if("name"in C&&C.name){if(k=r.get(C.name),!k)throw ml(1,{location:C});O=k.record.name,P=an(V_(S.params,k.keys.filter(U=>!U.optional).concat(k.parent?k.parent.keys.filter(U=>U.optional):[]).map(U=>U.name)),C.params&&V_(C.params,k.keys.map(U=>U.name))),R=k.stringify(P)}else if(C.path!=null)R=C.path,k=n.find(U=>U.re.test(R)),k&&(P=k.parse(R),O=k.record.name);else{if(k=S.name?r.get(S.name):n.find(U=>U.re.test(S.path)),!k)throw ml(1,{location:C,currentLocation:S});O=k.record.name,P=an({},S.params,C.params),R=k.stringify(P)}const H=[];let X=k;for(;X;)H.unshift(X.record),X=X.parent;return{name:O,path:R,params:P,matched:H,meta:tw(H)}}e.forEach(C=>o(C));function y(){n.length=0,r.clear()}return{addRoute:o,resolve:_,removeRoute:u,clearRoutes:y,getRoutes:f,getRecordMatcher:i}}function V_(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function j_(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:QL(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function QL(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function q_(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function tw(e){return e.reduce((t,n)=>an(t,n.meta),{})}function H_(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function ew(e,t){let n=0,r=t.length;for(;n!==r;){const o=n+r>>1;Iv(e,t[o])<0?r=o:n=o+1}const i=nw(e);return i&&(r=t.lastIndexOf(i,r-1)),r}function nw(e){let t=e;for(;t=t.parent;)if(kv(t)&&Iv(e,t)===0)return t}function kv({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function rw(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<r.length;++i){const o=r[i].replace(Cv," "),u=o.indexOf("="),f=rh(u<0?o:o.slice(0,u)),p=u<0?null:rh(o.slice(u+1));if(f in t){let _=t[f];Bs(_)||(_=t[f]=[_]),_.push(p)}else t[f]=p}return t}function Z_(e){let t="";for(let n in e){const r=e[n];if(n=EL(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(Bs(r)?r.map(o=>o&&Tg(o)):[r&&Tg(r)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+n,o!=null&&(t+="="+o))})}return t}function iw(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=Bs(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return t}const sw=Symbol(""),W_=Symbol(""),Op=Symbol(""),fm=Symbol(""),Dg=Symbol("");function Ac(){let e=[];function t(r){return e.push(r),()=>{const i=e.indexOf(r);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function xa(e,t,n,r,i,o=u=>u()){const u=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((f,p)=>{const _=S=>{S===!1?p(ml(4,{from:n,to:t})):S instanceof Error?p(S):jL(S)?p(ml(2,{from:t,to:S})):(u&&r.enterCallbacks[i]===u&&typeof S=="function"&&u.push(S),f())},y=o(()=>e.call(r&&r.instances[i],t,n,_));let C=Promise.resolve(y);e.length<3&&(C=C.then(_)),C.catch(S=>p(S))})}function og(e,t,n,r,i=o=>o()){const o=[];for(const u of e)for(const f in u.components){let p=u.components[f];if(!(t!=="beforeRouteEnter"&&!u.instances[f]))if(vv(p)){const y=(p.__vccOpts||p)[t];y&&o.push(xa(y,n,r,u,f,i))}else{let _=p();o.push(()=>_.then(y=>{if(!y)throw new Error(`Couldn't resolve component "${f}" at "${u.path}"`);const C=fL(y)?y.default:y;u.mods[f]=y,u.components[f]=C;const k=(C.__vccOpts||C)[t];return k&&xa(k,n,r,u,f,i)()}))}}return o}function K_(e){const t=cs(Op),n=cs(fm),r=en(()=>{const p=Ln(e.to);return t.resolve(p)}),i=en(()=>{const{matched:p}=r.value,{length:_}=p,y=p[_-1],C=n.matched;if(!y||!C.length)return-1;const S=C.findIndex(gl.bind(null,y));if(S>-1)return S;const k=$_(p[_-2]);return _>1&&$_(y)===k&&C[C.length-1].path!==k?C.findIndex(gl.bind(null,p[_-2])):S}),o=en(()=>i.value>-1&&lw(n.params,r.value.params)),u=en(()=>i.value>-1&&i.value===n.matched.length-1&&wv(n.params,r.value.params));function f(p={}){if(uw(p)){const _=t[Ln(e.replace)?"replace":"push"](Ln(e.to)).catch(Wc);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>_),_}return Promise.resolve()}return{route:r,href:en(()=>r.value.href),isActive:o,isExactActive:u,navigate:f}}function ow(e){return e.length===1?e[0]:e}const aw=Wi({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:K_,setup(e,{slots:t}){const n=ea(K_(e)),{options:r}=cs(Op),i=en(()=>({[X_(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[X_(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const o=t.default&&ow(t.default(n));return e.custom?o:zy("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},o)}}}),Gf=aw;function uw(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function lw(e,t){for(const n in t){const r=t[n],i=e[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Bs(i)||i.length!==r.length||r.some((o,u)=>o!==i[u]))return!1}return!0}function $_(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const X_=(e,t,n)=>e??t??n,cw=Wi({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=cs(Dg),i=en(()=>e.route||r.value),o=cs(W_,0),u=en(()=>{let _=Ln(o);const{matched:y}=i.value;let C;for(;(C=y[_])&&!C.components;)_++;return _}),f=en(()=>i.value.matched[u.value]);Df(W_,en(()=>u.value+1)),Df(sw,f),Df(Dg,i);const p=de();return Ds(()=>[p.value,f.value,e.name],([_,y,C],[S,k,P])=>{y&&(y.instances[C]=_,k&&k!==y&&_&&_===S&&(y.leaveGuards.size||(y.leaveGuards=k.leaveGuards),y.updateGuards.size||(y.updateGuards=k.updateGuards))),_&&y&&(!k||!gl(y,k)||!S)&&(y.enterCallbacks[C]||[]).forEach(R=>R(_))},{flush:"post"}),()=>{const _=i.value,y=e.name,C=f.value,S=C&&C.components[y];if(!S)return Y_(n.default,{Component:S,route:_});const k=C.props[y],P=k?k===!0?_.params:typeof k=="function"?k(_):k:null,O=zy(S,an({},P,t,{onVnodeUnmounted:H=>{H.component.isUnmounted&&(C.instances[y]=null)},ref:p}));return Y_(n.default,{Component:O,route:_})||O}}});function Y_(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Tv=cw;function hw(e){const t=JL(e.routes,e),n=e.parseQuery||rw,r=e.stringifyQuery||Z_,i=e.history,o=Ac(),u=Ac(),f=Ac(),p=F1(da);let _=da;ul&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const y=ig.bind(null,Mt=>""+Mt),C=ig.bind(null,wL),S=ig.bind(null,rh);function k(Mt,Ht){let Kt,ie;return Pv(Mt)?(Kt=t.getRecordMatcher(Mt),ie=Ht):ie=Mt,t.addRoute(ie,Kt)}function P(Mt){const Ht=t.getRecordMatcher(Mt);Ht&&t.removeRoute(Ht)}function R(){return t.getRoutes().map(Mt=>Mt.record)}function O(Mt){return!!t.getRecordMatcher(Mt)}function H(Mt,Ht){if(Ht=an({},Ht||p.value),typeof Mt=="string"){const dt=sg(n,Mt,Ht.path),Nt=t.resolve({path:dt.path},Ht),Ft=i.createHref(dt.fullPath);return an(dt,Nt,{params:S(Nt.params),hash:rh(dt.hash),redirectedFrom:void 0,href:Ft})}let Kt;if(Mt.path!=null)Kt=an({},Mt,{path:sg(n,Mt.path,Ht.path).path});else{const dt=an({},Mt.params);for(const Nt in dt)dt[Nt]==null&&delete dt[Nt];Kt=an({},Mt,{params:C(dt)}),Ht.params=C(Ht.params)}const ie=t.resolve(Kt,Ht),Te=Mt.hash||"";ie.params=y(S(ie.params));const Z=ML(r,an({},Mt,{hash:bL(Te),path:ie.path})),Y=i.createHref(Z);return an({fullPath:Z,hash:Te,query:r===Z_?iw(Mt.query):Mt.query||{}},ie,{redirectedFrom:void 0,href:Y})}function X(Mt){return typeof Mt=="string"?sg(n,Mt,p.value.path):an({},Mt)}function U(Mt,Ht){if(_!==Mt)return ml(8,{from:Ht,to:Mt})}function ut(Mt){return kt(Mt)}function It(Mt){return ut(an(X(Mt),{replace:!0}))}function ot(Mt){const Ht=Mt.matched[Mt.matched.length-1];if(Ht&&Ht.redirect){const{redirect:Kt}=Ht;let ie=typeof Kt=="function"?Kt(Mt):Kt;return typeof ie=="string"&&(ie=ie.includes("?")||ie.includes("#")?ie=X(ie):{path:ie},ie.params={}),an({query:Mt.query,hash:Mt.hash,params:ie.path!=null?{}:Mt.params},ie)}}function kt(Mt,Ht){const Kt=_=H(Mt),ie=p.value,Te=Mt.state,Z=Mt.force,Y=Mt.replace===!0,dt=ot(Kt);if(dt)return kt(an(X(dt),{state:typeof dt=="object"?an({},Te,dt.state):Te,force:Z,replace:Y}),Ht||Kt);const Nt=Kt;Nt.redirectedFrom=Ht;let Ft;return!Z&&IL(r,ie,Kt)&&(Ft=ml(16,{to:Nt,from:ie}),Pt(ie,ie,!0,!1)),(Ft?Promise.resolve(Ft):xt(Nt,ie)).catch(Rt=>Bo(Rt)?Bo(Rt,2)?Rt:Tt(Rt):st(Rt,Nt,ie)).then(Rt=>{if(Rt){if(Bo(Rt,2))return kt(an({replace:Y},X(Rt.to),{state:typeof Rt.to=="object"?an({},Te,Rt.to.state):Te,force:Z}),Ht||Nt)}else Rt=Et(Nt,ie,!0,Y,Te);return nt(Nt,ie,Rt),Rt})}function $(Mt,Ht){const Kt=U(Mt,Ht);return Kt?Promise.reject(Kt):Promise.resolve()}function it(Mt){const Ht=ee.values().next().value;return Ht&&typeof Ht.runWithContext=="function"?Ht.runWithContext(Mt):Mt()}function xt(Mt,Ht){let Kt;const[ie,Te,Z]=fw(Mt,Ht);Kt=og(ie.reverse(),"beforeRouteLeave",Mt,Ht);for(const dt of ie)dt.leaveGuards.forEach(Nt=>{Kt.push(xa(Nt,Mt,Ht))});const Y=$.bind(null,Mt,Ht);return Kt.push(Y),Jt(Kt).then(()=>{Kt=[];for(const dt of o.list())Kt.push(xa(dt,Mt,Ht));return Kt.push(Y),Jt(Kt)}).then(()=>{Kt=og(Te,"beforeRouteUpdate",Mt,Ht);for(const dt of Te)dt.updateGuards.forEach(Nt=>{Kt.push(xa(Nt,Mt,Ht))});return Kt.push(Y),Jt(Kt)}).then(()=>{Kt=[];for(const dt of Z)if(dt.beforeEnter)if(Bs(dt.beforeEnter))for(const Nt of dt.beforeEnter)Kt.push(xa(Nt,Mt,Ht));else Kt.push(xa(dt.beforeEnter,Mt,Ht));return Kt.push(Y),Jt(Kt)}).then(()=>(Mt.matched.forEach(dt=>dt.enterCallbacks={}),Kt=og(Z,"beforeRouteEnter",Mt,Ht,it),Kt.push(Y),Jt(Kt))).then(()=>{Kt=[];for(const dt of u.list())Kt.push(xa(dt,Mt,Ht));return Kt.push(Y),Jt(Kt)}).catch(dt=>Bo(dt,8)?dt:Promise.reject(dt))}function nt(Mt,Ht,Kt){f.list().forEach(ie=>it(()=>ie(Mt,Ht,Kt)))}function Et(Mt,Ht,Kt,ie,Te){const Z=U(Mt,Ht);if(Z)return Z;const Y=Ht===da,dt=ul?history.state:{};Kt&&(ie||Y?i.replace(Mt.fullPath,an({scroll:Y&&dt&&dt.scroll},Te)):i.push(Mt.fullPath,Te)),p.value=Mt,Pt(Mt,Ht,Kt,Y),Tt()}let At;function W(){At||(At=i.listen((Mt,Ht,Kt)=>{if(!ne.listening)return;const ie=H(Mt),Te=ot(ie);if(Te){kt(an(Te,{replace:!0,force:!0}),ie).catch(Wc);return}_=ie;const Z=p.value;ul&&BL(B_(Z.fullPath,Kt.delta),Rp()),xt(ie,Z).catch(Y=>Bo(Y,12)?Y:Bo(Y,2)?(kt(an(X(Y.to),{force:!0}),ie).then(dt=>{Bo(dt,20)&&!Kt.delta&&Kt.type===ih.pop&&i.go(-1,!1)}).catch(Wc),Promise.reject()):(Kt.delta&&i.go(-Kt.delta,!1),st(Y,ie,Z))).then(Y=>{Y=Y||Et(ie,Z,!1),Y&&(Kt.delta&&!Bo(Y,8)?i.go(-Kt.delta,!1):Kt.type===ih.pop&&Bo(Y,20)&&i.go(-1,!1)),nt(ie,Z,Y)}).catch(Wc)}))}let V=Ac(),rt=Ac(),ht;function st(Mt,Ht,Kt){Tt(Mt);const ie=rt.list();return ie.length?ie.forEach(Te=>Te(Mt,Ht,Kt)):console.error(Mt),Promise.reject(Mt)}function ft(){return ht&&p.value!==da?Promise.resolve():new Promise((Mt,Ht)=>{V.add([Mt,Ht])})}function Tt(Mt){return ht||(ht=!Mt,W(),V.list().forEach(([Ht,Kt])=>Mt?Kt(Mt):Ht()),V.reset()),Mt}function Pt(Mt,Ht,Kt,ie){const{scrollBehavior:Te}=e;if(!ul||!Te)return Promise.resolve();const Z=!Kt&&FL(B_(Mt.fullPath,0))||(ie||!Kt)&&history.state&&history.state.scroll||null;return bp().then(()=>Te(Mt,Ht,Z)).then(Y=>Y&&OL(Y)).catch(Y=>st(Y,Mt,Ht))}const jt=Mt=>i.go(Mt);let Ot;const ee=new Set,ne={currentRoute:p,listening:!0,addRoute:k,removeRoute:P,clearRoutes:t.clearRoutes,hasRoute:O,getRoutes:R,resolve:H,options:e,push:ut,replace:It,go:jt,back:()=>jt(-1),forward:()=>jt(1),beforeEach:o.add,beforeResolve:u.add,afterEach:f.add,onError:rt.add,isReady:ft,install(Mt){const Ht=this;Mt.component("RouterLink",Gf),Mt.component("RouterView",Tv),Mt.config.globalProperties.$router=Ht,Object.defineProperty(Mt.config.globalProperties,"$route",{enumerable:!0,get:()=>Ln(p)}),ul&&!Ot&&p.value===da&&(Ot=!0,ut(i.location).catch(Te=>{}));const Kt={};for(const Te in da)Object.defineProperty(Kt,Te,{get:()=>p.value[Te],enumerable:!0});Mt.provide(Op,Ht),Mt.provide(fm,iy(Kt)),Mt.provide(Dg,p);const ie=Mt.unmount;ee.add(Mt),Mt.unmount=function(){ee.delete(Mt),ee.size<1&&(_=da,At&&At(),At=null,p.value=da,Ot=!1,ht=!1),ie()}}};function Jt(Mt){return Mt.reduce((Ht,Kt)=>Ht.then(()=>it(Kt)),Promise.resolve())}return ne}function fw(e,t){const n=[],r=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let u=0;u<o;u++){const f=t.matched[u];f&&(e.matched.find(_=>gl(_,f))?r.push(f):n.push(f));const p=e.matched[u];p&&(t.matched.find(_=>gl(_,p))||i.push(p))}return[n,r,i]}function jl(){return cs(Op)}function Sk(e){return cs(fm)}var Uo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Av(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function pw(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Dv=pw,dw=typeof Uo=="object"&&Uo&&Uo.Object===Object&&Uo,gw=dw,mw=gw,_w=typeof self=="object"&&self&&self.Object===Object&&self,yw=mw||_w||Function("return this")(),Nv=yw,vw=Nv,xw=function(){return vw.Date.now()},Cw=xw,bw=/\s/;function Ew(e){for(var t=e.length;t--&&bw.test(e.charAt(t)););return t}var Lw=Ew,ww=Lw,Sw=/^\s+/;function Pw(e){return e&&e.slice(0,ww(e)+1).replace(Sw,"")}var Mw=Pw,Iw=Nv,kw=Iw.Symbol,Rv=kw,J_=Rv,Ov=Object.prototype,Tw=Ov.hasOwnProperty,Aw=Ov.toString,Dc=J_?J_.toStringTag:void 0;function Dw(e){var t=Tw.call(e,Dc),n=e[Dc];try{e[Dc]=void 0;var r=!0}catch{}var i=Aw.call(e);return r&&(t?e[Dc]=n:delete e[Dc]),i}var Nw=Dw,Rw=Object.prototype,Ow=Rw.toString;function Bw(e){return Ow.call(e)}var Fw=Bw,Q_=Rv,zw=Nw,Gw=Fw,Uw="[object Null]",Vw="[object Undefined]",t0=Q_?Q_.toStringTag:void 0;function jw(e){return e==null?e===void 0?Vw:Uw:t0&&t0 in Object(e)?zw(e):Gw(e)}var qw=jw;function Hw(e){return e!=null&&typeof e=="object"}var Zw=Hw,Ww=qw,Kw=Zw,$w="[object Symbol]";function Xw(e){return typeof e=="symbol"||Kw(e)&&Ww(e)==$w}var Yw=Xw,Jw=Mw,e0=Dv,Qw=Yw,n0=NaN,t4=/^[-+]0x[0-9a-f]+$/i,e4=/^0b[01]+$/i,n4=/^0o[0-7]+$/i,r4=parseInt;function i4(e){if(typeof e=="number")return e;if(Qw(e))return n0;if(e0(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=e0(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Jw(e);var n=e4.test(e);return n||n4.test(e)?r4(e.slice(2),n?2:8):t4.test(e)?n0:+e}var s4=i4,o4=Dv,ag=Cw,r0=s4,a4="Expected a function",u4=Math.max,l4=Math.min;function c4(e,t,n){var r,i,o,u,f,p,_=0,y=!1,C=!1,S=!0;if(typeof e!="function")throw new TypeError(a4);t=r0(t)||0,o4(n)&&(y=!!n.leading,C="maxWait"in n,o=C?u4(r0(n.maxWait)||0,t):o,S="trailing"in n?!!n.trailing:S);function k(ot){var kt=r,$=i;return r=i=void 0,_=ot,u=e.apply($,kt),u}function P(ot){return _=ot,f=setTimeout(H,t),y?k(ot):u}function R(ot){var kt=ot-p,$=ot-_,it=t-kt;return C?l4(it,o-$):it}function O(ot){var kt=ot-p,$=ot-_;return p===void 0||kt>=t||kt<0||C&&$>=o}function H(){var ot=ag();if(O(ot))return X(ot);f=setTimeout(H,R(ot))}function X(ot){return f=void 0,S&&r?k(ot):(r=i=void 0,u)}function U(){f!==void 0&&clearTimeout(f),_=0,r=p=i=f=void 0}function ut(){return f===void 0?u:X(ag())}function It(){var ot=ag(),kt=O(ot);if(r=arguments,i=this,p=ot,kt){if(f===void 0)return P(p);if(C)return clearTimeout(f),f=setTimeout(H,t),k(p)}return f===void 0&&(f=setTimeout(H,t)),u}return It.cancel=U,It.flush=ut,It}var h4=c4;const f4=Av(h4),p4={class:"relative"},d4={key:0,class:"absolute w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto z-[1001]"},g4=["onClick"],m4=Wi({__name:"SearchBar",emits:["select-location"],setup(e,{emit:t}){const n=de(""),r=de([]),i=t,o=f4(async p=>{if(p.length<3){r.value=[];return}try{const y=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(p)}`)).json();r.value=y}catch(_){console.error("Erreur lors de la recherche d'adresse:",_),r.value=[]}},300);function u(){o(n.value)}function f(p){n.value=p.display_name,r.value=[],i("select-location",{lat:parseFloat(p.lat),lng:parseFloat(p.lon)})}return(p,_)=>(Wt(),Xt("div",p4,[ln(T("input",{"onUpdate:modelValue":_[0]||(_[0]=y=>n.value=y),onInput:u,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[Hn,n.value]]),r.value.length>0?(Wt(),Xt("div",d4,[(Wt(!0),Xt(kn,null,ci(r.value,y=>(Wt(),Xt("div",{key:y.place_id,onClick:C=>f(y),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},ae(y.display_name),9,g4))),128))])):Me("",!0)]))}}),Bv=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},_4=Bv(m4,[["__scopeId","data-v-4cda7c14"]]),y4={class:"h-screen flex flex-col overflow-hidden"},v4={key:0,class:"bg-white shadow-sm z-[2000]"},x4={class:"mx-auto px-4 sm:px-6 lg:px-8"},C4={class:"flex h-16 items-center justify-between"},b4={class:"flex items-center space-x-8"},E4={class:"hidden md:flex space-x-6"},L4={class:"flex-1 max-w-2xl mx-8"},w4={class:"flex items-center space-x-4"},S4={class:"relative"},P4={class:"flex flex-col items-end"},M4={class:"text-sm font-medium text-gray-700"},I4={key:0,class:"text-xs text-gray-500"},k4=["src","alt"],T4={key:0,class:"absolute right-0 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3000]"},A4={class:"flex-1 overflow-hidden"},D4=Wi({__name:"App",setup(e){const t=jl(),n=zi(),r=de(!1),i=en(()=>{const R=n.user;if(!R)return"";const O=`${R.first_name} ${R.last_name.toUpperCase()}`;return R.company_name?`${O} (${R.company_name})`:O}),o=en(()=>{var O;const R=(O=n.user)==null?void 0:O.user_type;switch(console.log("User type:",R),R){case"admin":return"Accès administrateur";case"dealer":return"Accès concessionnaire";case"client":return"Accès client";default:return""}}),u=en(()=>{var R;return((R=n.user)==null?void 0:R.user_type)==="admin"}),f=de(""),p=en(()=>n.isAuthenticated),_=[{name:"Carte",to:"/"},{name:"Plans",to:"/plans"}],y=en(()=>{var O;if(!p.value)return[];const R=[..._];return u.value?R.push({name:"Utilisateurs",to:"/users"}):((O=n.user)==null?void 0:O.user_type)==="dealer"&&R.push({name:"Clients",to:"/clients"}),R}),C=en(()=>p.value?[{name:"Mon profil",to:"/profile"}]:[]);async function S(){try{await n.logout(),t.push("/login")}catch(R){console.error("Erreur lors de la déconnexion:",R)}}function k(R){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:R.lat,lng:R.lng,zoom:16}}))}Ba(async()=>{console.log("App mounted, checking auth...");try{localStorage.getItem("token")?(console.log("Token found, checking auth..."),await n.checkAuth(),await n.fetchUserProfile()):console.log("No token found")}catch(R){console.error("Auth check error:",R),t.push("/login")}});const P=en(()=>{const R="IrrigationDesign";if(!p.value)return`${R} - Connexion`;const O=t.currentRoute.value,X={home:"Carte",plans:"Plans",users:"Utilisateurs",profile:"Mon profil",selectDealer:"Sélection du concessionnaire",changePassword:"Changement de mot de passe",map:"Carte"}[O.name]||"";return X?`${R} - ${X}`:R});return Ds(P,R=>{document.title=R},{immediate:!0}),(R,O)=>(Wt(),Xt("div",y4,[p.value?(Wt(),Xt("header",v4,[T("nav",x4,[T("div",C4,[T("div",b4,[cr(Ln(Gf),{to:"/",class:"text-xl font-semibold text-primary-600"},{default:Vc(()=>O[2]||(O[2]=[hr(" IrrigationDesign ")])),_:1}),T("div",E4,[(Wt(!0),Xt(kn,null,ci(y.value,H=>(Wt(),lu(Ln(Gf),{key:H.name,to:H.to,class:As(["text-sm font-medium transition-colors duration-200",[R.$route.path===H.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Vc(()=>[hr(ae(H.name),1)]),_:2},1032,["to","class"]))),128))])]),T("div",L4,[cr(_4,{onSelectLocation:k})]),T("div",w4,[O[3]||(O[3]=T("button",{class:"p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},[T("span",{class:"sr-only"},"Voir les notifications"),T("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[T("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})])],-1)),T("div",S4,[T("button",{onClick:O[0]||(O[0]=H=>r.value=!r.value),class:"flex items-center space-x-3 focus:outline-none"},[T("div",P4,[T("span",M4,ae(i.value),1),o.value?(Wt(),Xt("span",I4,ae(o.value),1)):Me("",!0)]),T("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:f.value||"https://ui-avatars.com/api/?name="+encodeURIComponent(i.value),alt:i.value},null,8,k4)]),r.value?(Wt(),Xt("div",T4,[(Wt(!0),Xt(kn,null,ci(C.value,H=>(Wt(),lu(Ln(Gf),{key:H.name,to:H.to,class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:O[1]||(O[1]=X=>r.value=!1)},{default:Vc(()=>[hr(ae(H.name),1)]),_:2},1032,["to"]))),128)),T("button",{onClick:S,class:"block w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-gray-50"}," Déconnexion ")])):Me("",!0)])])])])])):Me("",!0),T("main",A4,[cr(Ln(Tv))])]))}}),N4="modulepreload",R4=function(e){return"/"+e},i0={},Lf=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));i=Promise.allSettled(n.map(p=>{if(p=R4(p),p in i0)return;i0[p]=!0;const _=p.endsWith(".css"),y=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${y}`))return;const C=document.createElement("link");if(C.rel=_?"stylesheet":N4,_||(C.as="script"),C.crossOrigin="",C.href=p,f&&C.setAttribute("nonce",f),document.head.appendChild(C),_)return new Promise((S,k)=>{C.addEventListener("load",S),C.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return i.then(u=>{for(const f of u||[])f.status==="rejected"&&o(f.reason);return t().catch(o)})},O4={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},B4={class:"max-w-md w-full space-y-8"},F4={class:"space-y-4"},z4={class:"mt-1"},G4={class:"mt-1"},U4={class:"mt-1"},V4={key:0,class:"rounded-md bg-red-50 p-4"},j4={class:"flex"},q4={class:"ml-3"},H4={class:"text-sm font-medium text-red-800"},Z4={key:1,class:"rounded-md bg-yellow-50 p-4"},W4={class:"flex"},K4={class:"ml-3"},$4={class:"mt-2 text-sm text-yellow-700"},X4={class:"list-disc pl-5 space-y-1"},Y4=["disabled"],J4={class:"absolute left-0 inset-y-0 flex items-center pl-3"},Q4={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},tS={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},eS=Wi({__name:"ChangePasswordForm",setup(e){const t=jl(),n=zi(),r=ea({oldPassword:"",newPassword:"",confirmPassword:""}),i=de(!1),o=de("");Ba(()=>{var _,y;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:n.isAuthenticated,userId:(_=n.user)==null?void 0:_.id,mustChangePassword:(y=n.user)==null?void 0:y.must_change_password})});const u=en(()=>{const _=[];return r.newPassword&&r.newPassword.length<8&&_.push("Le nouveau mot de passe doit contenir au moins 8 caractères"),r.newPassword&&r.confirmPassword&&r.newPassword!==r.confirmPassword&&_.push("Les mots de passe ne correspondent pas"),_}),f=en(()=>r.oldPassword.length>0&&r.newPassword.length>=8&&r.newPassword===r.confirmPassword);async function p(){var _,y,C,S,k,P,R,O;if(!f.value){o.value="Veuillez corriger les erreurs avant de continuer";return}if(!((_=n.user)!=null&&_.id)){o.value="Erreur : utilisateur non identifié";return}i.value=!0,o.value="";try{console.log("Submitting password change..."),await n.changePassword(r.oldPassword,r.newPassword),console.log("Password changed successfully"),t.push("/")}catch(H){console.error("Password change failed:",H),(C=(y=H.response)==null?void 0:y.data)!=null&&C.detail?o.value=H.response.data.detail:(k=(S=H.response)==null?void 0:S.data)!=null&&k.old_password?o.value=H.response.data.old_password[0]:(R=(P=H.response)==null?void 0:P.data)!=null&&R.password?o.value=H.response.data.password[0]:((O=H.response)==null?void 0:O.status)===401?(o.value="Session expirée, veuillez vous reconnecter",await n.logout(),t.push("/login")):o.value="Une erreur est survenue lors du changement de mot de passe"}finally{i.value=!1}}return(_,y)=>(Wt(),Xt("div",O4,[T("div",B4,[y[12]||(y[12]=T("div",null,[T("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),T("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de sécurité, vous devez changer votre mot de passe. ")],-1)),T("form",{class:"mt-8 space-y-6",onSubmit:wh(p,["prevent"])},[T("div",F4,[T("div",null,[y[3]||(y[3]=T("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),T("div",z4,[ln(T("input",{id:"old-password","onUpdate:modelValue":y[0]||(y[0]=C=>r.oldPassword=C),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[Hn,r.oldPassword]])])]),T("div",null,[y[4]||(y[4]=T("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),T("div",G4,[ln(T("input",{id:"new-password","onUpdate:modelValue":y[1]||(y[1]=C=>r.newPassword=C),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[Hn,r.newPassword]])]),y[5]||(y[5]=T("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractères ",-1))]),T("div",null,[y[6]||(y[6]=T("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),T("div",U4,[ln(T("input",{id:"confirm-password","onUpdate:modelValue":y[2]||(y[2]=C=>r.confirmPassword=C),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[Hn,r.confirmPassword]])])])]),o.value?(Wt(),Xt("div",V4,[T("div",j4,[y[7]||(y[7]=T("div",{class:"flex-shrink-0"},[T("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[T("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),T("div",q4,[T("h3",H4,ae(o.value),1)])])])):Me("",!0),u.value.length>0?(Wt(),Xt("div",Z4,[T("div",W4,[y[9]||(y[9]=T("div",{class:"flex-shrink-0"},[T("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[T("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),T("div",K4,[y[8]||(y[8]=T("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),T("div",$4,[T("ul",X4,[(Wt(!0),Xt(kn,null,ci(u.value,(C,S)=>(Wt(),Xt("li",{key:S},ae(C),1))),128))])])])])])):Me("",!0),T("div",null,[T("button",{type:"submit",disabled:i.value||!f.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[T("span",J4,[i.value?(Wt(),Xt("svg",tS,y[11]||(y[11]=[T("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),T("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Wt(),Xt("svg",Q4,y[10]||(y[10]=[T("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),hr(" "+ae(i.value?"Modification en cours...":"Changer le mot de passe"),1)],8,Y4)])],32)])]))}}),nS={class:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8"},rS={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},iS={class:"bg-white py-8 px-4 shadow-sm rounded-lg sm:px-10"},sS={key:0,class:"rounded-md bg-red-50 p-4"},oS={class:"flex"},aS={class:"ml-3"},uS={class:"text-sm font-medium text-red-800"},lS={class:"mt-1"},cS={class:"mt-1"},hS={class:"flex items-center justify-between"},fS={class:"flex items-center"},pS={class:"text-sm"},dS=["disabled"],gS={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},mS=Wi({__name:"LoginView",setup(e){const t=jl(),n=zi(),r=de(!1),i=de(null),o=ea({username:"",password:"",rememberMe:!1});Ba(()=>{var f;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE),(f=window.INITIAL_STATE)!=null&&f.isAuthenticated&&(console.log("User is authenticated, redirecting to home"),t.push("/"))});async function u(){var f,p,_,y,C,S;r.value=!0,i.value=null;try{if(!o.username||!o.password){i.value="Veuillez remplir tous les champs";return}await n.login(o.username,o.password),(f=n.user)!=null&&f.must_change_password?t.push("/change-password"):t.push("/")}catch(k){console.error("Login error:",k),i.value=((_=(p=k==null?void 0:k.response)==null?void 0:p.data)==null?void 0:_.detail)||((S=(C=(y=k==null?void 0:k.response)==null?void 0:y.data)==null?void 0:C.non_field_errors)==null?void 0:S[0])||(k==null?void 0:k.message)||"Erreur lors de la connexion"}finally{r.value=!1}}return(f,p)=>{const _=cC("router-link");return Wt(),Xt("div",nS,[p[9]||(p[9]=T("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[T("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," IrrigationDesign "),T("p",{class:"mt-2 text-center text-sm text-gray-600"}," Connectez-vous pour accéder à votre espace ")],-1)),T("div",rS,[T("div",iS,[T("form",{class:"space-y-6",onSubmit:wh(u,["prevent"])},[i.value?(Wt(),Xt("div",sS,[T("div",oS,[p[3]||(p[3]=T("div",{class:"flex-shrink-0"},[T("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[T("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),T("div",aS,[T("h3",uS,ae(i.value),1)])])])):Me("",!0),T("div",null,[p[4]||(p[4]=T("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),T("div",lS,[ln(T("input",{id:"username","onUpdate:modelValue":p[0]||(p[0]=y=>o.username=y),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[Hn,o.username]])])]),T("div",null,[p[5]||(p[5]=T("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),T("div",cS,[ln(T("input",{id:"password","onUpdate:modelValue":p[1]||(p[1]=y=>o.password=y),name:"password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Mot de passe"},null,512),[[Hn,o.password]])])]),T("div",hS,[T("div",fS,[ln(T("input",{id:"remember-me","onUpdate:modelValue":p[2]||(p[2]=y=>o.rememberMe=y),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[Cb,o.rememberMe]]),p[6]||(p[6]=T("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),T("div",pS,[cr(_,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Vc(()=>p[7]||(p[7]=[hr(" Mot de passe oublié ? ")])),_:1})])]),T("div",null,[T("button",{type:"submit",disabled:r.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[r.value?(Wt(),Xt("svg",gS,p[8]||(p[8]=[T("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),T("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Me("",!0),hr(" "+ae(r.value?"Connexion en cours...":"Se connecter"),1)],8,dS)])],32)])])])}}});var Ng={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,r){r(t)})(Uo,function(n){var r="1.9.4";function i(s){var c,g,v,w;for(g=1,v=arguments.length;g<v;g++){w=arguments[g];for(c in w)s[c]=w[c]}return s}var o=Object.create||function(){function s(){}return function(c){return s.prototype=c,new s}}();function u(s,c){var g=Array.prototype.slice;if(s.bind)return s.bind.apply(s,g.call(arguments,1));var v=g.call(arguments,2);return function(){return s.apply(c,v.length?v.concat(g.call(arguments)):arguments)}}var f=0;function p(s){return"_leaflet_id"in s||(s._leaflet_id=++f),s._leaflet_id}function _(s,c,g){var v,w,D,J;return J=function(){v=!1,w&&(D.apply(g,w),w=!1)},D=function(){v?w=arguments:(s.apply(g,arguments),setTimeout(J,c),v=!0)},D}function y(s,c,g){var v=c[1],w=c[0],D=v-w;return s===v&&g?s:((s-w)%D+D)%D+w}function C(){return!1}function S(s,c){if(c===!1)return s;var g=Math.pow(10,c===void 0?6:c);return Math.round(s*g)/g}function k(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function P(s){return k(s).split(/\s+/)}function R(s,c){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var g in c)s.options[g]=c[g];return s.options}function O(s,c,g){var v=[];for(var w in s)v.push(encodeURIComponent(g?w.toUpperCase():w)+"="+encodeURIComponent(s[w]));return(!c||c.indexOf("?")===-1?"?":"&")+v.join("&")}var H=/\{ *([\w_ -]+) *\}/g;function X(s,c){return s.replace(H,function(g,v){var w=c[v];if(w===void 0)throw new Error("No value provided for variable "+g);return typeof w=="function"&&(w=w(c)),w})}var U=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function ut(s,c){for(var g=0;g<s.length;g++)if(s[g]===c)return g;return-1}var It="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ot(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var kt=0;function $(s){var c=+new Date,g=Math.max(0,16-(c-kt));return kt=c+g,window.setTimeout(s,g)}var it=window.requestAnimationFrame||ot("RequestAnimationFrame")||$,xt=window.cancelAnimationFrame||ot("CancelAnimationFrame")||ot("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function nt(s,c,g){if(g&&it===$)s.call(c);else return it.call(window,u(s,c))}function Et(s){s&&xt.call(window,s)}var At={__proto__:null,extend:i,create:o,bind:u,get lastId(){return f},stamp:p,throttle:_,wrapNum:y,falseFn:C,formatNum:S,trim:k,splitWords:P,setOptions:R,getParamString:O,template:X,isArray:U,indexOf:ut,emptyImageUrl:It,requestFn:it,cancelFn:xt,requestAnimFrame:nt,cancelAnimFrame:Et};function W(){}W.extend=function(s){var c=function(){R(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},g=c.__super__=this.prototype,v=o(g);v.constructor=c,c.prototype=v;for(var w in this)Object.prototype.hasOwnProperty.call(this,w)&&w!=="prototype"&&w!=="__super__"&&(c[w]=this[w]);return s.statics&&i(c,s.statics),s.includes&&(V(s.includes),i.apply(null,[v].concat(s.includes))),i(v,s),delete v.statics,delete v.includes,v.options&&(v.options=g.options?o(g.options):{},i(v.options,s.options)),v._initHooks=[],v.callInitHooks=function(){if(!this._initHooksCalled){g.callInitHooks&&g.callInitHooks.call(this),this._initHooksCalled=!0;for(var D=0,J=v._initHooks.length;D<J;D++)v._initHooks[D].call(this)}},c},W.include=function(s){var c=this.prototype.options;return i(this.prototype,s),s.options&&(this.prototype.options=c,this.mergeOptions(s.options)),this},W.mergeOptions=function(s){return i(this.prototype.options,s),this},W.addInitHook=function(s){var c=Array.prototype.slice.call(arguments,1),g=typeof s=="function"?s:function(){this[s].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(g),this};function V(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=U(s)?s:[s];for(var c=0;c<s.length;c++)s[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var rt={on:function(s,c,g){if(typeof s=="object")for(var v in s)this._on(v,s[v],c);else{s=P(s);for(var w=0,D=s.length;w<D;w++)this._on(s[w],c,g)}return this},off:function(s,c,g){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var v in s)this._off(v,s[v],c);else{s=P(s);for(var w=arguments.length===1,D=0,J=s.length;D<J;D++)w?this._off(s[D]):this._off(s[D],c,g)}return this},_on:function(s,c,g,v){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(s,c,g)===!1){g===this&&(g=void 0);var w={fn:c,ctx:g};v&&(w.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(w)}},_off:function(s,c,g){var v,w,D;if(this._events&&(v=this._events[s],!!v)){if(arguments.length===1){if(this._firingCount)for(w=0,D=v.length;w<D;w++)v[w].fn=C;delete this._events[s];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var J=this._listens(s,c,g);if(J!==!1){var gt=v[J];this._firingCount&&(gt.fn=C,this._events[s]=v=v.slice()),v.splice(J,1)}}},fire:function(s,c,g){if(!this.listens(s,g))return this;var v=i({},c,{type:s,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var w=this._events[s];if(w){this._firingCount=this._firingCount+1||1;for(var D=0,J=w.length;D<J;D++){var gt=w[D],St=gt.fn;gt.once&&this.off(s,St,gt.ctx),St.call(gt.ctx||this,v)}this._firingCount--}}return g&&this._propagateEvent(v),this},listens:function(s,c,g,v){typeof s!="string"&&console.warn('"string" type argument expected');var w=c;typeof c!="function"&&(v=!!c,w=void 0,g=void 0);var D=this._events&&this._events[s];if(D&&D.length&&this._listens(s,w,g)!==!1)return!0;if(v){for(var J in this._eventParents)if(this._eventParents[J].listens(s,c,g,v))return!0}return!1},_listens:function(s,c,g){if(!this._events)return!1;var v=this._events[s]||[];if(!c)return!!v.length;g===this&&(g=void 0);for(var w=0,D=v.length;w<D;w++)if(v[w].fn===c&&v[w].ctx===g)return w;return!1},once:function(s,c,g){if(typeof s=="object")for(var v in s)this._on(v,s[v],c,!0);else{s=P(s);for(var w=0,D=s.length;w<D;w++)this._on(s[w],c,g,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[p(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[p(s)],this},_propagateEvent:function(s){for(var c in this._eventParents)this._eventParents[c].fire(s.type,i({layer:s.target,propagatedFrom:s.target},s),!0)}};rt.addEventListener=rt.on,rt.removeEventListener=rt.clearAllEventListeners=rt.off,rt.addOneTimeEventListener=rt.once,rt.fireEvent=rt.fire,rt.hasEventListeners=rt.listens;var ht=W.extend(rt);function st(s,c,g){this.x=g?Math.round(s):s,this.y=g?Math.round(c):c}var ft=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};st.prototype={clone:function(){return new st(this.x,this.y)},add:function(s){return this.clone()._add(Tt(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(Tt(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new st(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new st(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ft(this.x),this.y=ft(this.y),this},distanceTo:function(s){s=Tt(s);var c=s.x-this.x,g=s.y-this.y;return Math.sqrt(c*c+g*g)},equals:function(s){return s=Tt(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=Tt(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+S(this.x)+", "+S(this.y)+")"}};function Tt(s,c,g){return s instanceof st?s:U(s)?new st(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new st(s.x,s.y):new st(s,c,g)}function Pt(s,c){if(s)for(var g=c?[s,c]:s,v=0,w=g.length;v<w;v++)this.extend(g[v])}Pt.prototype={extend:function(s){var c,g;if(!s)return this;if(s instanceof st||typeof s[0]=="number"||"x"in s)c=g=Tt(s);else if(s=jt(s),c=s.min,g=s.max,!c||!g)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=g.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(g.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(g.y,this.max.y)),this},getCenter:function(s){return Tt((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return Tt(this.min.x,this.max.y)},getTopRight:function(){return Tt(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var c,g;return typeof s[0]=="number"||s instanceof st?s=Tt(s):s=jt(s),s instanceof Pt?(c=s.min,g=s.max):c=g=s,c.x>=this.min.x&&g.x<=this.max.x&&c.y>=this.min.y&&g.y<=this.max.y},intersects:function(s){s=jt(s);var c=this.min,g=this.max,v=s.min,w=s.max,D=w.x>=c.x&&v.x<=g.x,J=w.y>=c.y&&v.y<=g.y;return D&&J},overlaps:function(s){s=jt(s);var c=this.min,g=this.max,v=s.min,w=s.max,D=w.x>c.x&&v.x<g.x,J=w.y>c.y&&v.y<g.y;return D&&J},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var c=this.min,g=this.max,v=Math.abs(c.x-g.x)*s,w=Math.abs(c.y-g.y)*s;return jt(Tt(c.x-v,c.y-w),Tt(g.x+v,g.y+w))},equals:function(s){return s?(s=jt(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function jt(s,c){return!s||s instanceof Pt?s:new Pt(s,c)}function Ot(s,c){if(s)for(var g=c?[s,c]:s,v=0,w=g.length;v<w;v++)this.extend(g[v])}Ot.prototype={extend:function(s){var c=this._southWest,g=this._northEast,v,w;if(s instanceof ne)v=s,w=s;else if(s instanceof Ot){if(v=s._southWest,w=s._northEast,!v||!w)return this}else return s?this.extend(Jt(s)||ee(s)):this;return!c&&!g?(this._southWest=new ne(v.lat,v.lng),this._northEast=new ne(w.lat,w.lng)):(c.lat=Math.min(v.lat,c.lat),c.lng=Math.min(v.lng,c.lng),g.lat=Math.max(w.lat,g.lat),g.lng=Math.max(w.lng,g.lng)),this},pad:function(s){var c=this._southWest,g=this._northEast,v=Math.abs(c.lat-g.lat)*s,w=Math.abs(c.lng-g.lng)*s;return new Ot(new ne(c.lat-v,c.lng-w),new ne(g.lat+v,g.lng+w))},getCenter:function(){return new ne((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ne(this.getNorth(),this.getWest())},getSouthEast:function(){return new ne(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof ne||"lat"in s?s=Jt(s):s=ee(s);var c=this._southWest,g=this._northEast,v,w;return s instanceof Ot?(v=s.getSouthWest(),w=s.getNorthEast()):v=w=s,v.lat>=c.lat&&w.lat<=g.lat&&v.lng>=c.lng&&w.lng<=g.lng},intersects:function(s){s=ee(s);var c=this._southWest,g=this._northEast,v=s.getSouthWest(),w=s.getNorthEast(),D=w.lat>=c.lat&&v.lat<=g.lat,J=w.lng>=c.lng&&v.lng<=g.lng;return D&&J},overlaps:function(s){s=ee(s);var c=this._southWest,g=this._northEast,v=s.getSouthWest(),w=s.getNorthEast(),D=w.lat>c.lat&&v.lat<g.lat,J=w.lng>c.lng&&v.lng<g.lng;return D&&J},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,c){return s?(s=ee(s),this._southWest.equals(s.getSouthWest(),c)&&this._northEast.equals(s.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ee(s,c){return s instanceof Ot?s:new Ot(s,c)}function ne(s,c,g){if(isNaN(s)||isNaN(c))throw new Error("Invalid LatLng object: ("+s+", "+c+")");this.lat=+s,this.lng=+c,g!==void 0&&(this.alt=+g)}ne.prototype={equals:function(s,c){if(!s)return!1;s=Jt(s);var g=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return g<=(c===void 0?1e-9:c)},toString:function(s){return"LatLng("+S(this.lat,s)+", "+S(this.lng,s)+")"},distanceTo:function(s){return Ht.distance(this,Jt(s))},wrap:function(){return Ht.wrapLatLng(this)},toBounds:function(s){var c=180*s/40075017,g=c/Math.cos(Math.PI/180*this.lat);return ee([this.lat-c,this.lng-g],[this.lat+c,this.lng+g])},clone:function(){return new ne(this.lat,this.lng,this.alt)}};function Jt(s,c,g){return s instanceof ne?s:U(s)&&typeof s[0]!="object"?s.length===3?new ne(s[0],s[1],s[2]):s.length===2?new ne(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new ne(s.lat,"lng"in s?s.lng:s.lon,s.alt):c===void 0?null:new ne(s,c,g)}var Mt={latLngToPoint:function(s,c){var g=this.projection.project(s),v=this.scale(c);return this.transformation._transform(g,v)},pointToLatLng:function(s,c){var g=this.scale(c),v=this.transformation.untransform(s,g);return this.projection.unproject(v)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var c=this.projection.bounds,g=this.scale(s),v=this.transformation.transform(c.min,g),w=this.transformation.transform(c.max,g);return new Pt(v,w)},infinite:!1,wrapLatLng:function(s){var c=this.wrapLng?y(s.lng,this.wrapLng,!0):s.lng,g=this.wrapLat?y(s.lat,this.wrapLat,!0):s.lat,v=s.alt;return new ne(g,c,v)},wrapLatLngBounds:function(s){var c=s.getCenter(),g=this.wrapLatLng(c),v=c.lat-g.lat,w=c.lng-g.lng;if(v===0&&w===0)return s;var D=s.getSouthWest(),J=s.getNorthEast(),gt=new ne(D.lat-v,D.lng-w),St=new ne(J.lat-v,J.lng-w);return new Ot(gt,St)}},Ht=i({},Mt,{wrapLng:[-180,180],R:6371e3,distance:function(s,c){var g=Math.PI/180,v=s.lat*g,w=c.lat*g,D=Math.sin((c.lat-s.lat)*g/2),J=Math.sin((c.lng-s.lng)*g/2),gt=D*D+Math.cos(v)*Math.cos(w)*J*J,St=2*Math.atan2(Math.sqrt(gt),Math.sqrt(1-gt));return this.R*St}}),Kt=6378137,ie={R:Kt,MAX_LATITUDE:85.0511287798,project:function(s){var c=Math.PI/180,g=this.MAX_LATITUDE,v=Math.max(Math.min(g,s.lat),-g),w=Math.sin(v*c);return new st(this.R*s.lng*c,this.R*Math.log((1+w)/(1-w))/2)},unproject:function(s){var c=180/Math.PI;return new ne((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*c,s.x*c/this.R)},bounds:function(){var s=Kt*Math.PI;return new Pt([-s,-s],[s,s])}()};function Te(s,c,g,v){if(U(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=c,this._c=g,this._d=v}Te.prototype={transform:function(s,c){return this._transform(s.clone(),c)},_transform:function(s,c){return c=c||1,s.x=c*(this._a*s.x+this._b),s.y=c*(this._c*s.y+this._d),s},untransform:function(s,c){return c=c||1,new st((s.x/c-this._b)/this._a,(s.y/c-this._d)/this._c)}};function Z(s,c,g,v){return new Te(s,c,g,v)}var Y=i({},Ht,{code:"EPSG:3857",projection:ie,transformation:function(){var s=.5/(Math.PI*ie.R);return Z(s,.5,-s,.5)}()}),dt=i({},Y,{code:"EPSG:900913"});function Nt(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Ft(s,c){var g="",v,w,D,J,gt,St;for(v=0,D=s.length;v<D;v++){for(gt=s[v],w=0,J=gt.length;w<J;w++)St=gt[w],g+=(w?"L":"M")+St.x+" "+St.y;g+=c?_e.svg?"z":"x":""}return g||"M0 0"}var Rt=document.documentElement.style,Yt="ActiveXObject"in window,Bt=Yt&&!document.addEventListener,Zt="msLaunchUri"in navigator&&!("documentMode"in document),Gt=Ti("webkit"),oe=Ti("android"),te=Ti("android 2")||Ti("android 3"),pe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),xe=oe&&Ti("Google")&&pe<537&&!("AudioNode"in window),Pe=!!window.opera,Xe=!Zt&&Ti("chrome"),Ye=Ti("gecko")&&!Gt&&!Pe&&!Yt,mr=!Xe&&Ti("safari"),Yn=Ti("phantom"),Qr="OTransition"in Rt,ar=navigator.platform.indexOf("Win")===0,$s=Yt&&"transition"in Rt,wo="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!te,Vn="MozPerspective"in Rt,ti=!window.L_DISABLE_3D&&($s||wo||Vn)&&!Qr&&!Yn,Xi=typeof orientation<"u"||Ti("mobile"),Xp=Xi&&Gt,Yp=Xi&&wo,$l=!window.PointerEvent&&window.MSPointerEvent,Rh=!!(window.PointerEvent||$l),Oh="ontouchstart"in window||!!window.TouchEvent,Jp=!window.L_NO_TOUCH&&(Oh||Rh),Qp=Xi&&Pe,Bh=Xi&&Ye,Fh=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,td=function(){var s=!1;try{var c=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",C,c),window.removeEventListener("testPassiveEventSupport",C,c)}catch{}return s}(),ed=function(){return!!document.createElement("canvas").getContext}(),Xl=!!(document.createElementNS&&Nt("svg").createSVGRect),zh=!!Xl&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),nd=!Xl&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var c=s.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),rd=navigator.platform.indexOf("Mac")===0,id=navigator.platform.indexOf("Linux")===0;function Ti(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var _e={ie:Yt,ielt9:Bt,edge:Zt,webkit:Gt,android:oe,android23:te,androidStock:xe,opera:Pe,chrome:Xe,gecko:Ye,safari:mr,phantom:Yn,opera12:Qr,win:ar,ie3d:$s,webkit3d:wo,gecko3d:Vn,any3d:ti,mobile:Xi,mobileWebkit:Xp,mobileWebkit3d:Yp,msPointer:$l,pointer:Rh,touch:Jp,touchNative:Oh,mobileOpera:Qp,mobileGecko:Bh,retina:Fh,passiveEvents:td,canvas:ed,svg:Xl,vml:nd,inlineSvg:zh,mac:rd,linux:id},Gh=_e.msPointer?"MSPointerDown":"pointerdown",Uh=_e.msPointer?"MSPointerMove":"pointermove",Yl=_e.msPointer?"MSPointerUp":"pointerup",Vh=_e.msPointer?"MSPointerCancel":"pointercancel",Jl={touchstart:Gh,touchmove:Uh,touchend:Yl,touchcancel:Vh},jh={touchstart:ld,touchmove:Au,touchend:Au,touchcancel:Au},ra={},qh=!1;function sd(s,c,g){return c==="touchstart"&&Ql(),jh[c]?(g=jh[c].bind(this,g),s.addEventListener(Jl[c],g,!1),g):(console.warn("wrong event specified:",c),C)}function od(s,c,g){if(!Jl[c]){console.warn("wrong event specified:",c);return}s.removeEventListener(Jl[c],g,!1)}function ad(s){ra[s.pointerId]=s}function ud(s){ra[s.pointerId]&&(ra[s.pointerId]=s)}function Tu(s){delete ra[s.pointerId]}function Ql(){qh||(document.addEventListener(Gh,ad,!0),document.addEventListener(Uh,ud,!0),document.addEventListener(Yl,Tu,!0),document.addEventListener(Vh,Tu,!0),qh=!0)}function Au(s,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var g in ra)c.touches.push(ra[g]);c.changedTouches=[c],s(c)}}function ld(s,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&ur(c),Au(s,c)}function cd(s){var c={},g,v;for(v in s)g=s[v],c[v]=g&&g.bind?g.bind(s):g;return s=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var hd=200;function fd(s,c){s.addEventListener("dblclick",c);var g=0,v;function w(D){if(D.detail!==1){v=D.detail;return}if(!(D.pointerType==="mouse"||D.sourceCapabilities&&!D.sourceCapabilities.firesTouchEvents)){var J=$h(D);if(!(J.some(function(St){return St instanceof HTMLLabelElement&&St.attributes.for})&&!J.some(function(St){return St instanceof HTMLInputElement||St instanceof HTMLSelectElement}))){var gt=Date.now();gt-g<=hd?(v++,v===2&&c(cd(D))):v=1,g=gt}}}return s.addEventListener("click",w),{dblclick:c,simDblclick:w}}function pd(s,c){s.removeEventListener("dblclick",c.dblclick),s.removeEventListener("click",c.simDblclick)}var tc=Nu(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ga=Nu(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Hh=Ga==="webkitTransition"||Ga==="OTransition"?Ga+"End":"transitionend";function Zh(s){return typeof s=="string"?document.getElementById(s):s}function Xs(s,c){var g=s.style[c]||s.currentStyle&&s.currentStyle[c];if((!g||g==="auto")&&document.defaultView){var v=document.defaultView.getComputedStyle(s,null);g=v?v[c]:null}return g==="auto"?null:g}function Je(s,c,g){var v=document.createElement(s);return v.className=c||"",g&&g.appendChild(v),v}function yn(s){var c=s.parentNode;c&&c.removeChild(s)}function Ua(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function ia(s){var c=s.parentNode;c&&c.lastChild!==s&&c.appendChild(s)}function So(s){var c=s.parentNode;c&&c.firstChild!==s&&c.insertBefore(s,c.firstChild)}function ec(s,c){if(s.classList!==void 0)return s.classList.contains(c);var g=Du(s);return g.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(g)}function Re(s,c){if(s.classList!==void 0)for(var g=P(c),v=0,w=g.length;v<w;v++)s.classList.add(g[v]);else if(!ec(s,c)){var D=Du(s);nc(s,(D?D+" ":"")+c)}}function Rn(s,c){s.classList!==void 0?s.classList.remove(c):nc(s,k((" "+Du(s)+" ").replace(" "+c+" "," ")))}function nc(s,c){s.className.baseVal===void 0?s.className=c:s.className.baseVal=c}function Du(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function _i(s,c){"opacity"in s.style?s.style.opacity=c:"filter"in s.style&&dd(s,c)}function dd(s,c){var g=!1,v="DXImageTransform.Microsoft.Alpha";try{g=s.filters.item(v)}catch{if(c===1)return}c=Math.round(c*100),g?(g.Enabled=c!==100,g.Opacity=c):s.style.filter+=" progid:"+v+"(opacity="+c+")"}function Nu(s){for(var c=document.documentElement.style,g=0;g<s.length;g++)if(s[g]in c)return s[g];return!1}function Po(s,c,g){var v=c||new st(0,0);s.style[tc]=(_e.ie3d?"translate("+v.x+"px,"+v.y+"px)":"translate3d("+v.x+"px,"+v.y+"px,0)")+(g?" scale("+g+")":"")}function jn(s,c){s._leaflet_pos=c,_e.any3d?Po(s,c):(s.style.left=c.x+"px",s.style.top=c.y+"px")}function Mo(s){return s._leaflet_pos||new st(0,0)}var Va,ja,rc;if("onselectstart"in document)Va=function(){Ae(window,"selectstart",ur)},ja=function(){hn(window,"selectstart",ur)};else{var sa=Nu(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Va=function(){if(sa){var s=document.documentElement.style;rc=s[sa],s[sa]="none"}},ja=function(){sa&&(document.documentElement.style[sa]=rc,rc=void 0)}}function ic(){Ae(window,"dragstart",ur)}function sc(){hn(window,"dragstart",ur)}var Ru,oc;function ac(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Ou(),Ru=s,oc=s.style.outlineStyle,s.style.outlineStyle="none",Ae(window,"keydown",Ou))}function Ou(){Ru&&(Ru.style.outlineStyle=oc,Ru=void 0,oc=void 0,hn(window,"keydown",Ou))}function Wh(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function uc(s){var c=s.getBoundingClientRect();return{x:c.width/s.offsetWidth||1,y:c.height/s.offsetHeight||1,boundingClientRect:c}}var gd={__proto__:null,TRANSFORM:tc,TRANSITION:Ga,TRANSITION_END:Hh,get:Zh,getStyle:Xs,create:Je,remove:yn,empty:Ua,toFront:ia,toBack:So,hasClass:ec,addClass:Re,removeClass:Rn,setClass:nc,getClass:Du,setOpacity:_i,testProp:Nu,setTransform:Po,setPosition:jn,getPosition:Mo,get disableTextSelection(){return Va},get enableTextSelection(){return ja},disableImageDrag:ic,enableImageDrag:sc,preventOutline:ac,restoreOutline:Ou,getSizedParentNode:Wh,getScale:uc};function Ae(s,c,g,v){if(c&&typeof c=="object")for(var w in c)cc(s,w,c[w],g);else{c=P(c);for(var D=0,J=c.length;D<J;D++)cc(s,c[D],g,v)}return this}var Yi="_leaflet_events";function hn(s,c,g,v){if(arguments.length===1)Kh(s),delete s[Yi];else if(c&&typeof c=="object")for(var w in c)Ys(s,w,c[w],g);else if(c=P(c),arguments.length===2)Kh(s,function(gt){return ut(c,gt)!==-1});else for(var D=0,J=c.length;D<J;D++)Ys(s,c[D],g,v);return this}function Kh(s,c){for(var g in s[Yi]){var v=g.split(/\d/)[0];(!c||c(v))&&Ys(s,v,null,null,g)}}var lc={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function cc(s,c,g,v){var w=c+p(g)+(v?"_"+p(v):"");if(s[Yi]&&s[Yi][w])return this;var D=function(gt){return g.call(v||s,gt||window.event)},J=D;!_e.touchNative&&_e.pointer&&c.indexOf("touch")===0?D=sd(s,c,D):_e.touch&&c==="dblclick"?D=fd(s,D):"addEventListener"in s?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?s.addEventListener(lc[c]||c,D,_e.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(D=function(gt){gt=gt||window.event,fc(s,gt)&&J(gt)},s.addEventListener(lc[c],D,!1)):s.addEventListener(c,J,!1):s.attachEvent("on"+c,D),s[Yi]=s[Yi]||{},s[Yi][w]=D}function Ys(s,c,g,v,w){w=w||c+p(g)+(v?"_"+p(v):"");var D=s[Yi]&&s[Yi][w];if(!D)return this;!_e.touchNative&&_e.pointer&&c.indexOf("touch")===0?od(s,c,D):_e.touch&&c==="dblclick"?pd(s,D):"removeEventListener"in s?s.removeEventListener(lc[c]||c,D,!1):s.detachEvent("on"+c,D),s[Yi][w]=null}function Io(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function hc(s){return cc(s,"wheel",Io),this}function qa(s){return Ae(s,"mousedown touchstart dblclick contextmenu",Io),s._leaflet_disable_click=!0,this}function ur(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function ko(s){return ur(s),Io(s),this}function $h(s){if(s.composedPath)return s.composedPath();for(var c=[],g=s.target;g;)c.push(g),g=g.parentNode;return c}function Xh(s,c){if(!c)return new st(s.clientX,s.clientY);var g=uc(c),v=g.boundingClientRect;return new st((s.clientX-v.left)/g.x-c.clientLeft,(s.clientY-v.top)/g.y-c.clientTop)}var md=_e.linux&&_e.chrome?window.devicePixelRatio:_e.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Yh(s){return _e.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/md:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function fc(s,c){var g=c.relatedTarget;if(!g)return!0;try{for(;g&&g!==s;)g=g.parentNode}catch{return!1}return g!==s}var Bu={__proto__:null,on:Ae,off:hn,stopPropagation:Io,disableScrollPropagation:hc,disableClickPropagation:qa,preventDefault:ur,stop:ko,getPropagationPath:$h,getMousePosition:Xh,getWheelDelta:Yh,isExternalTarget:fc,addListener:Ae,removeListener:hn},Jh=ht.extend({run:function(s,c,g,v){this.stop(),this._el=s,this._inProgress=!0,this._duration=g||.25,this._easeOutPower=1/Math.max(v||.5,.2),this._startPos=Mo(s),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=nt(this._animate,this),this._step()},_step:function(s){var c=+new Date-this._startTime,g=this._duration*1e3;c<g?this._runFrame(this._easeOut(c/g),s):(this._runFrame(1),this._complete())},_runFrame:function(s,c){var g=this._startPos.add(this._offset.multiplyBy(s));c&&g._round(),jn(this._el,g),this.fire("step")},_complete:function(){Et(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),He=ht.extend({options:{crs:Y,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,c){c=R(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(Jt(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ga&&_e.any3d&&!_e.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ae(this._proxy,Hh,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,c,g){if(c=c===void 0?this._zoom:this._limitZoom(c),s=this._limitCenter(Jt(s),c,this.options.maxBounds),g=g||{},this._stop(),this._loaded&&!g.reset&&g!==!0){g.animate!==void 0&&(g.zoom=i({animate:g.animate},g.zoom),g.pan=i({animate:g.animate,duration:g.duration},g.pan));var v=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,c,g.zoom):this._tryAnimatedPan(s,g.pan);if(v)return clearTimeout(this._sizeTimer),this}return this._resetView(s,c,g.pan&&g.pan.noMoveStart),this},setZoom:function(s,c){return this._loaded?this.setView(this.getCenter(),s,{zoom:c}):(this._zoom=s,this)},zoomIn:function(s,c){return s=s||(_e.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,c)},zoomOut:function(s,c){return s=s||(_e.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,c)},setZoomAround:function(s,c,g){var v=this.getZoomScale(c),w=this.getSize().divideBy(2),D=s instanceof st?s:this.latLngToContainerPoint(s),J=D.subtract(w).multiplyBy(1-1/v),gt=this.containerPointToLatLng(w.add(J));return this.setView(gt,c,{zoom:g})},_getBoundsCenterZoom:function(s,c){c=c||{},s=s.getBounds?s.getBounds():ee(s);var g=Tt(c.paddingTopLeft||c.padding||[0,0]),v=Tt(c.paddingBottomRight||c.padding||[0,0]),w=this.getBoundsZoom(s,!1,g.add(v));if(w=typeof c.maxZoom=="number"?Math.min(c.maxZoom,w):w,w===1/0)return{center:s.getCenter(),zoom:w};var D=v.subtract(g).divideBy(2),J=this.project(s.getSouthWest(),w),gt=this.project(s.getNorthEast(),w),St=this.unproject(J.add(gt).divideBy(2).add(D),w);return{center:St,zoom:w}},fitBounds:function(s,c){if(s=ee(s),!s.isValid())throw new Error("Bounds are not valid.");var g=this._getBoundsCenterZoom(s,c);return this.setView(g.center,g.zoom,c)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,c){return this.setView(s,this._zoom,{pan:c})},panBy:function(s,c){if(s=Tt(s).round(),c=c||{},!s.x&&!s.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Jh,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){Re(this._mapPane,"leaflet-pan-anim");var g=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,g,c.duration||.25,c.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,c,g){if(g=g||{},g.animate===!1||!_e.any3d)return this.setView(s,c,g);this._stop();var v=this.project(this.getCenter()),w=this.project(s),D=this.getSize(),J=this._zoom;s=Jt(s),c=c===void 0?J:c;var gt=Math.max(D.x,D.y),St=gt*this.getZoomScale(J,c),Ut=w.distanceTo(v)||1,se=1.42,Ee=se*se;function ze(On){var Qa=On?-1:1,Fd=On?St:gt,rs=St*St-gt*gt+Qa*Ee*Ee*Ut*Ut,zd=2*Fd*Ee*Ut,fa=rs/zd,wc=Math.sqrt(fa*fa+1)-fa,Gd=wc<1e-9?-18:Math.log(wc);return Gd}function Ar(On){return(Math.exp(On)-Math.exp(-On))/2}function Jn(On){return(Math.exp(On)+Math.exp(-On))/2}function Vr(On){return Ar(On)/Jn(On)}var In=ze(0);function ns(On){return gt*(Jn(In)/Jn(In+se*On))}function Lc(On){return gt*(Jn(In)*Vr(In+se*On)-Ar(In))/Ee}function rl(On){return 1-Math.pow(1-On,1.5)}var df=Date.now(),Ja=(ze(1)-In)/se,Bd=g.duration?1e3*g.duration:1e3*Ja*.8;function gf(){var On=(Date.now()-df)/Bd,Qa=rl(On)*Ja;On<=1?(this._flyToFrame=nt(gf,this),this._move(this.unproject(v.add(w.subtract(v).multiplyBy(Lc(Qa)/Ut)),J),this.getScaleZoom(gt/ns(Qa),J),{flyTo:!0})):this._move(s,c)._moveEnd(!0)}return this._moveStart(!0,g.noMoveStart),gf.call(this),this},flyToBounds:function(s,c){var g=this._getBoundsCenterZoom(s,c);return this.flyTo(g.center,g.zoom,c)},setMaxBounds:function(s){return s=ee(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var c=this.options.minZoom;return this.options.minZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var c=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,c){this._enforcingBounds=!0;var g=this.getCenter(),v=this._limitCenter(g,this._zoom,ee(s));return g.equals(v)||this.panTo(v,c),this._enforcingBounds=!1,this},panInside:function(s,c){c=c||{};var g=Tt(c.paddingTopLeft||c.padding||[0,0]),v=Tt(c.paddingBottomRight||c.padding||[0,0]),w=this.project(this.getCenter()),D=this.project(s),J=this.getPixelBounds(),gt=jt([J.min.add(g),J.max.subtract(v)]),St=gt.getSize();if(!gt.contains(D)){this._enforcingBounds=!0;var Ut=D.subtract(gt.getCenter()),se=gt.extend(D).getSize().subtract(St);w.x+=Ut.x<0?-se.x:se.x,w.y+=Ut.y<0?-se.y:se.y,this.panTo(this.unproject(w),c),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=i({animate:!1,pan:!0},s===!0?{animate:!0}:s);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var g=this.getSize(),v=c.divideBy(2).round(),w=g.divideBy(2).round(),D=v.subtract(w);return!D.x&&!D.y?this:(s.animate&&s.pan?this.panBy(D):(s.pan&&this._rawPanBy(D),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:g}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=i({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=u(this._handleGeolocationResponse,this),g=u(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,g,s):navigator.geolocation.getCurrentPosition(c,g,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var c=s.code,g=s.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+g+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var c=s.coords.latitude,g=s.coords.longitude,v=new ne(c,g),w=v.toBounds(s.coords.accuracy*2),D=this._locateOptions;if(D.setView){var J=this.getBoundsZoom(w);this.setView(v,D.maxZoom?Math.min(J,D.maxZoom):J)}var gt={latlng:v,bounds:w,timestamp:s.timestamp};for(var St in s.coords)typeof s.coords[St]=="number"&&(gt[St]=s.coords[St]);this.fire("locationfound",gt)}},addHandler:function(s,c){if(!c)return this;var g=this[s]=new c(this);return this._handlers.push(g),this.options[s]&&g.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),yn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Et(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)yn(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,c){var g="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),v=Je("div",g,c||this._mapPane);return s&&(this._panes[s]=v),v},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),c=this.unproject(s.getBottomLeft()),g=this.unproject(s.getTopRight());return new Ot(c,g)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,c,g){s=ee(s),g=Tt(g||[0,0]);var v=this.getZoom()||0,w=this.getMinZoom(),D=this.getMaxZoom(),J=s.getNorthWest(),gt=s.getSouthEast(),St=this.getSize().subtract(g),Ut=jt(this.project(gt,v),this.project(J,v)).getSize(),se=_e.any3d?this.options.zoomSnap:1,Ee=St.x/Ut.x,ze=St.y/Ut.y,Ar=c?Math.max(Ee,ze):Math.min(Ee,ze);return v=this.getScaleZoom(Ar,v),se&&(v=Math.round(v/(se/100))*(se/100),v=c?Math.ceil(v/se)*se:Math.floor(v/se)*se),Math.max(w,Math.min(D,v))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new st(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,c){var g=this._getTopLeftPoint(s,c);return new Pt(g,g.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,c){var g=this.options.crs;return c=c===void 0?this._zoom:c,g.scale(s)/g.scale(c)},getScaleZoom:function(s,c){var g=this.options.crs;c=c===void 0?this._zoom:c;var v=g.zoom(s*g.scale(c));return isNaN(v)?1/0:v},project:function(s,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(Jt(s),c)},unproject:function(s,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(Tt(s),c)},layerPointToLatLng:function(s){var c=Tt(s).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(s){var c=this.project(Jt(s))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(Jt(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(ee(s))},distance:function(s,c){return this.options.crs.distance(Jt(s),Jt(c))},containerPointToLayerPoint:function(s){return Tt(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return Tt(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var c=this.containerPointToLayerPoint(Tt(s));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Jt(s)))},mouseEventToContainerPoint:function(s){return Xh(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var c=this._container=Zh(s);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ae(c,"scroll",this._onScroll,this),this._containerId=p(c)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&_e.any3d,Re(s,"leaflet-container"+(_e.touch?" leaflet-touch":"")+(_e.retina?" leaflet-retina":"")+(_e.ielt9?" leaflet-oldie":"")+(_e.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=Xs(s,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),jn(this._mapPane,new st(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Re(s.markerPane,"leaflet-zoom-hide"),Re(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,c,g){jn(this._mapPane,new st(0,0));var v=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var w=this._zoom!==c;this._moveStart(w,g)._move(s,c)._moveEnd(w),this.fire("viewreset"),v&&this.fire("load")},_moveStart:function(s,c){return s&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(s,c,g,v){c===void 0&&(c=this._zoom);var w=this._zoom!==c;return this._zoom=c,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),v?g&&g.pinch&&this.fire("zoom",g):((w||g&&g.pinch)&&this.fire("zoom",g),this.fire("move",g)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Et(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){jn(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[p(this._container)]=this;var c=s?hn:Ae;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),_e.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Et(this._resizeRequest),this._resizeRequest=nt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,c){for(var g=[],v,w=c==="mouseout"||c==="mouseover",D=s.target||s.srcElement,J=!1;D;){if(v=this._targets[p(D)],v&&(c==="click"||c==="preclick")&&this._draggableMoved(v)){J=!0;break}if(v&&v.listens(c,!0)&&(w&&!fc(D,s)||(g.push(v),w))||D===this._container)break;D=D.parentNode}return!g.length&&!J&&!w&&this.listens(c,!0)&&(g=[this]),g},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var c=s.target||s.srcElement;if(!(!this._loaded||c._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(c))){var g=s.type;g==="mousedown"&&ac(c),this._fireDOMEvent(s,g)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,c,g){if(s.type==="click"){var v=i({},s);v.type="preclick",this._fireDOMEvent(v,v.type,g)}var w=this._findEventTargets(s,c);if(g){for(var D=[],J=0;J<g.length;J++)g[J].listens(c,!0)&&D.push(g[J]);w=D.concat(w)}if(w.length){c==="contextmenu"&&ur(s);var gt=w[0],St={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Ut=gt.getLatLng&&(!gt._radius||gt._radius<=10);St.containerPoint=Ut?this.latLngToContainerPoint(gt.getLatLng()):this.mouseEventToContainerPoint(s),St.layerPoint=this.containerPointToLayerPoint(St.containerPoint),St.latlng=Ut?gt.getLatLng():this.layerPointToLatLng(St.layerPoint)}for(J=0;J<w.length;J++)if(w[J].fire(c,St,!0),St.originalEvent._stopped||w[J].options.bubblingMouseEvents===!1&&ut(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,c=this._handlers.length;s<c;s++)this._handlers[s].disable()},whenReady:function(s,c){return this._loaded?s.call(c||this,{target:this}):this.on("load",s,c),this},_getMapPanePos:function(){return Mo(this._mapPane)||new st(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,c){var g=s&&c!==void 0?this._getNewPixelOrigin(s,c):this.getPixelOrigin();return g.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,c){var g=this.getSize()._divideBy(2);return this.project(s,c)._subtract(g)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,c,g){var v=this._getNewPixelOrigin(g,c);return this.project(s,c)._subtract(v)},_latLngBoundsToNewLayerBounds:function(s,c,g){var v=this._getNewPixelOrigin(g,c);return jt([this.project(s.getSouthWest(),c)._subtract(v),this.project(s.getNorthWest(),c)._subtract(v),this.project(s.getSouthEast(),c)._subtract(v),this.project(s.getNorthEast(),c)._subtract(v)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,c,g){if(!g)return s;var v=this.project(s,c),w=this.getSize().divideBy(2),D=new Pt(v.subtract(w),v.add(w)),J=this._getBoundsOffset(D,g,c);return Math.abs(J.x)<=1&&Math.abs(J.y)<=1?s:this.unproject(v.add(J),c)},_limitOffset:function(s,c){if(!c)return s;var g=this.getPixelBounds(),v=new Pt(g.min.add(s),g.max.add(s));return s.add(this._getBoundsOffset(v,c))},_getBoundsOffset:function(s,c,g){var v=jt(this.project(c.getNorthEast(),g),this.project(c.getSouthWest(),g)),w=v.min.subtract(s.min),D=v.max.subtract(s.max),J=this._rebound(w.x,-D.x),gt=this._rebound(w.y,-D.y);return new st(J,gt)},_rebound:function(s,c){return s+c>0?Math.round(s-c)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(c))},_limitZoom:function(s){var c=this.getMinZoom(),g=this.getMaxZoom(),v=_e.any3d?this.options.zoomSnap:1;return v&&(s=Math.round(s/v)*v),Math.max(c,Math.min(g,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Rn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,c){var g=this._getCenterOffset(s)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(g)?!1:(this.panBy(g,c),!0)},_createAnimProxy:function(){var s=this._proxy=Je("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(c){var g=tc,v=this._proxy.style[g];Po(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),v===this._proxy.style[g]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){yn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),c=this.getZoom();Po(this._proxy,this.project(s,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,c,g){if(this._animatingZoom)return!0;if(g=g||{},!this._zoomAnimated||g.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var v=this.getZoomScale(c),w=this._getCenterOffset(s)._divideBy(1-1/v);return g.animate!==!0&&!this.getSize().contains(w)?!1:(nt(function(){this._moveStart(!0,g.noMoveStart||!1)._animateZoom(s,c,!0)},this),!0)},_animateZoom:function(s,c,g,v){this._mapPane&&(g&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=c,Re(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:c,noUpdate:v}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Rn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Qh(s,c){return new He(s,c)}var ke=W.extend({options:{position:"topright"},initialize:function(s){R(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var c=this._map;return c&&c.removeControl(this),this.options.position=s,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var c=this._container=this.onAdd(s),g=this.getPosition(),v=s._controlCorners[g];return Re(c,"leaflet-control"),g.indexOf("bottom")!==-1?v.insertBefore(c,v.firstChild):v.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(yn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),To=function(s){return new ke(s)};He.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},c="leaflet-",g=this._controlContainer=Je("div",c+"control-container",this._container);function v(w,D){var J=c+w+" "+c+D;s[w+D]=Je("div",J,g)}v("top","left"),v("top","right"),v("bottom","left"),v("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)yn(this._controlCorners[s]);yn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ha=ke.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,c,g,v){return g<v?-1:v<g?1:0}},initialize:function(s,c,g){R(this,g),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var v in s)this._addLayer(s[v],v);for(v in c)this._addLayer(c[v],v,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return ke.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,c){return this._addLayer(s,c),this._map?this._update():this},addOverlay:function(s,c){return this._addLayer(s,c,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var c=this._getLayer(p(s));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){Re(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(Re(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Rn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Rn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",c=this._container=Je("div",s),g=this.options.collapsed;c.setAttribute("aria-haspopup",!0),qa(c),hc(c);var v=this._section=Je("section",s+"-list");g&&(this._map.on("click",this.collapse,this),Ae(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var w=this._layersLink=Je("a",s+"-toggle",c);w.href="#",w.title="Layers",w.setAttribute("role","button"),Ae(w,{keydown:function(D){D.keyCode===13&&this._expandSafely()},click:function(D){ur(D),this._expandSafely()}},this),g||this.expand(),this._baseLayersList=Je("div",s+"-base",v),this._separator=Je("div",s+"-separator",v),this._overlaysList=Je("div",s+"-overlays",v),c.appendChild(v)},_getLayer:function(s){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&p(this._layers[c].layer)===s)return this._layers[c]},_addLayer:function(s,c,g){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:c,overlay:g}),this.options.sortLayers&&this._layers.sort(u(function(v,w){return this.options.sortFunction(v.layer,w.layer,v.name,w.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ua(this._baseLayersList),Ua(this._overlaysList),this._layerControlInputs=[];var s,c,g,v,w=0;for(g=0;g<this._layers.length;g++)v=this._layers[g],this._addItem(v),c=c||v.overlay,s=s||!v.overlay,w+=v.overlay?0:1;return this.options.hideSingleBase&&(s=s&&w>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=c&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var c=this._getLayer(p(s.target)),g=c.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;g&&this._map.fire(g,c)},_createRadioElement:function(s,c){var g='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(c?' checked="checked"':"")+"/>",v=document.createElement("div");return v.innerHTML=g,v.firstChild},_addItem:function(s){var c=document.createElement("label"),g=this._map.hasLayer(s.layer),v;s.overlay?(v=document.createElement("input"),v.type="checkbox",v.className="leaflet-control-layers-selector",v.defaultChecked=g):v=this._createRadioElement("leaflet-base-layers_"+p(this),g),this._layerControlInputs.push(v),v.layerId=p(s.layer),Ae(v,"click",this._onInputClick,this);var w=document.createElement("span");w.innerHTML=" "+s.name;var D=document.createElement("span");c.appendChild(D),D.appendChild(v),D.appendChild(w);var J=s.overlay?this._overlaysList:this._baseLayersList;return J.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,c,g,v=[],w=[];this._handlingClick=!0;for(var D=s.length-1;D>=0;D--)c=s[D],g=this._getLayer(c.layerId).layer,c.checked?v.push(g):c.checked||w.push(g);for(D=0;D<w.length;D++)this._map.hasLayer(w[D])&&this._map.removeLayer(w[D]);for(D=0;D<v.length;D++)this._map.hasLayer(v[D])||this._map.addLayer(v[D]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,c,g,v=this._map.getZoom(),w=s.length-1;w>=0;w--)c=s[w],g=this._getLayer(c.layerId).layer,c.disabled=g.options.minZoom!==void 0&&v<g.options.minZoom||g.options.maxZoom!==void 0&&v>g.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,Ae(s,"click",ur),this.expand();var c=this;setTimeout(function(){hn(s,"click",ur),c._preventClick=!1})}}),_d=function(s,c,g){return new Ha(s,c,g)},Fu=ke.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var c="leaflet-control-zoom",g=Je("div",c+" leaflet-bar"),v=this.options;return this._zoomInButton=this._createButton(v.zoomInText,v.zoomInTitle,c+"-in",g,this._zoomIn),this._zoomOutButton=this._createButton(v.zoomOutText,v.zoomOutTitle,c+"-out",g,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),g},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,c,g,v,w){var D=Je("a",g,v);return D.innerHTML=s,D.href="#",D.title=c,D.setAttribute("role","button"),D.setAttribute("aria-label",c),qa(D),Ae(D,"click",ko),Ae(D,"click",w,this),Ae(D,"click",this._refocusOnMap,this),D},_updateDisabled:function(){var s=this._map,c="leaflet-disabled";Rn(this._zoomInButton,c),Rn(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(Re(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(Re(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});He.mergeOptions({zoomControl:!0}),He.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Fu,this.addControl(this.zoomControl))});var yd=function(s){return new Fu(s)},zu=ke.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var c="leaflet-control-scale",g=Je("div",c),v=this.options;return this._addScales(v,c+"-line",g),s.on(v.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),g},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,c,g){s.metric&&(this._mScale=Je("div",c,g)),s.imperial&&(this._iScale=Je("div",c,g))},_update:function(){var s=this._map,c=s.getSize().y/2,g=s.distance(s.containerPointToLatLng([0,c]),s.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(g)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var c=this._getRoundNum(s),g=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,g,c/s)},_updateImperial:function(s){var c=s*3.2808399,g,v,w;c>5280?(g=c/5280,v=this._getRoundNum(g),this._updateScale(this._iScale,v+" mi",v/g)):(w=this._getRoundNum(c),this._updateScale(this._iScale,w+" ft",w/c))},_updateScale:function(s,c,g){s.style.width=Math.round(this.options.maxWidth*g)+"px",s.innerHTML=c},_getRoundNum:function(s){var c=Math.pow(10,(Math.floor(s)+"").length-1),g=s/c;return g=g>=10?10:g>=5?5:g>=3?3:g>=2?2:1,c*g}}),Gu=function(s){return new zu(s)},vd='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ji=ke.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(_e.inlineSvg?vd+" ":"")+"Leaflet</a>"},initialize:function(s){R(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Je("div","leaflet-control-attribution"),qa(this._container);for(var c in s._layers)s._layers[c].getAttribution&&this.addAttribution(s._layers[c].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var c in this._attributions)this._attributions[c]&&s.push(c);var g=[];this.options.prefix&&g.push(this.options.prefix),s.length&&g.push(s.join(", ")),this._container.innerHTML=g.join(' <span aria-hidden="true">|</span> ')}}});He.mergeOptions({attributionControl:!0}),He.addInitHook(function(){this.options.attributionControl&&new Ji().addTo(this)});var tf=function(s){return new Ji(s)};ke.Layers=Ha,ke.Zoom=Fu,ke.Scale=zu,ke.Attribution=Ji,To.layers=_d,To.zoom=yd,To.scale=Gu,To.attribution=tf;var Ir=W.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ir.addTo=function(s,c){return s.addHandler(c,this),this};var xd={Events:rt},ef=_e.touch?"touchstart mousedown":"mousedown",Js=ht.extend({options:{clickTolerance:3},initialize:function(s,c,g,v){R(this,v),this._element=s,this._dragStartTarget=c||s,this._preventOutline=g},enable:function(){this._enabled||(Ae(this._dragStartTarget,ef,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Js._dragging===this&&this.finishDrag(!0),hn(this._dragStartTarget,ef,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!ec(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Js._dragging===this&&this.finishDrag();return}if(!(Js._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Js._dragging=this,this._preventOutline&&ac(this._element),ic(),Va(),!this._moving)){this.fire("down");var c=s.touches?s.touches[0]:s,g=Wh(this._element);this._startPoint=new st(c.clientX,c.clientY),this._startPos=Mo(this._element),this._parentScale=uc(g);var v=s.type==="mousedown";Ae(document,v?"mousemove":"touchmove",this._onMove,this),Ae(document,v?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var c=s.touches&&s.touches.length===1?s.touches[0]:s,g=new st(c.clientX,c.clientY)._subtract(this._startPoint);!g.x&&!g.y||Math.abs(g.x)+Math.abs(g.y)<this.options.clickTolerance||(g.x/=this._parentScale.x,g.y/=this._parentScale.y,ur(s),this._moved||(this.fire("dragstart"),this._moved=!0,Re(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Re(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(g),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),jn(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Rn(document.body,"leaflet-dragging"),this._lastTarget&&(Rn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),hn(document,"mousemove touchmove",this._onMove,this),hn(document,"mouseup touchend touchcancel",this._onUp,this),sc(),ja();var c=this._moved&&this._moving;this._moving=!1,Js._dragging=!1,c&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function nf(s,c,g){var v,w=[1,4,2,8],D,J,gt,St,Ut,se,Ee,ze;for(D=0,se=s.length;D<se;D++)s[D]._code=zr(s[D],c);for(gt=0;gt<4;gt++){for(Ee=w[gt],v=[],D=0,se=s.length,J=se-1;D<se;J=D++)St=s[D],Ut=s[J],St._code&Ee?Ut._code&Ee||(ze=Qs(Ut,St,Ee,c,g),ze._code=zr(ze,c),v.push(ze)):(Ut._code&Ee&&(ze=Qs(Ut,St,Ee,c,g),ze._code=zr(ze,c),v.push(ze)),v.push(St));s=v}return s}function rf(s,c){var g,v,w,D,J,gt,St,Ut,se;if(!s||s.length===0)throw new Error("latlngs not passed");Gr(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var Ee=Jt([0,0]),ze=ee(s),Ar=ze.getNorthWest().distanceTo(ze.getSouthWest())*ze.getNorthEast().distanceTo(ze.getNorthWest());Ar<1700&&(Ee=pc(s));var Jn=s.length,Vr=[];for(g=0;g<Jn;g++){var In=Jt(s[g]);Vr.push(c.project(Jt([In.lat-Ee.lat,In.lng-Ee.lng])))}for(gt=St=Ut=0,g=0,v=Jn-1;g<Jn;v=g++)w=Vr[g],D=Vr[v],J=w.y*D.x-D.y*w.x,St+=(w.x+D.x)*J,Ut+=(w.y+D.y)*J,gt+=J*3;gt===0?se=Vr[0]:se=[St/gt,Ut/gt];var ns=c.unproject(Tt(se));return Jt([ns.lat+Ee.lat,ns.lng+Ee.lng])}function pc(s){for(var c=0,g=0,v=0,w=0;w<s.length;w++){var D=Jt(s[w]);c+=D.lat,g+=D.lng,v++}return Jt([c/v,g/v])}var Cd={__proto__:null,clipPolygon:nf,polygonCenter:rf,centroid:pc};function sf(s,c){if(!c||!s.length)return s.slice();var g=c*c;return s=of(s,g),s=lr(s,g),s}function dc(s,c,g){return Math.sqrt(Za(s,c,g,!0))}function bd(s,c,g){return Za(s,c,g)}function lr(s,c){var g=s.length,v=typeof Uint8Array<"u"?Uint8Array:Array,w=new v(g);w[0]=w[g-1]=1,_r(s,w,c,0,g-1);var D,J=[];for(D=0;D<g;D++)w[D]&&J.push(s[D]);return J}function _r(s,c,g,v,w){var D=0,J,gt,St;for(gt=v+1;gt<=w-1;gt++)St=Za(s[gt],s[v],s[w],!0),St>D&&(J=gt,D=St);D>g&&(c[J]=1,_r(s,c,g,v,J),_r(s,c,g,J,w))}function of(s,c){for(var g=[s[0]],v=1,w=0,D=s.length;v<D;v++)Ed(s[v],s[w])>c&&(g.push(s[v]),w=v);return w<D-1&&g.push(s[D-1]),g}var Ao;function Do(s,c,g,v,w){var D=v?Ao:zr(s,g),J=zr(c,g),gt,St,Ut;for(Ao=J;;){if(!(D|J))return[s,c];if(D&J)return!1;gt=D||J,St=Qs(s,c,gt,g,w),Ut=zr(St,g),gt===D?(s=St,D=Ut):(c=St,J=Ut)}}function Qs(s,c,g,v,w){var D=c.x-s.x,J=c.y-s.y,gt=v.min,St=v.max,Ut,se;return g&8?(Ut=s.x+D*(St.y-s.y)/J,se=St.y):g&4?(Ut=s.x+D*(gt.y-s.y)/J,se=gt.y):g&2?(Ut=St.x,se=s.y+J*(St.x-s.x)/D):g&1&&(Ut=gt.x,se=s.y+J*(gt.x-s.x)/D),new st(Ut,se,w)}function zr(s,c){var g=0;return s.x<c.min.x?g|=1:s.x>c.max.x&&(g|=2),s.y<c.min.y?g|=4:s.y>c.max.y&&(g|=8),g}function Ed(s,c){var g=c.x-s.x,v=c.y-s.y;return g*g+v*v}function Za(s,c,g,v){var w=c.x,D=c.y,J=g.x-w,gt=g.y-D,St=J*J+gt*gt,Ut;return St>0&&(Ut=((s.x-w)*J+(s.y-D)*gt)/St,Ut>1?(w=g.x,D=g.y):Ut>0&&(w+=J*Ut,D+=gt*Ut)),J=s.x-w,gt=s.y-D,v?J*J+gt*gt:new st(w,D)}function Gr(s){return!U(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function yi(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Gr(s)}function gc(s,c){var g,v,w,D,J,gt,St,Ut;if(!s||s.length===0)throw new Error("latlngs not passed");Gr(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var se=Jt([0,0]),Ee=ee(s),ze=Ee.getNorthWest().distanceTo(Ee.getSouthWest())*Ee.getNorthEast().distanceTo(Ee.getNorthWest());ze<1700&&(se=pc(s));var Ar=s.length,Jn=[];for(g=0;g<Ar;g++){var Vr=Jt(s[g]);Jn.push(c.project(Jt([Vr.lat-se.lat,Vr.lng-se.lng])))}for(g=0,v=0;g<Ar-1;g++)v+=Jn[g].distanceTo(Jn[g+1])/2;if(v===0)Ut=Jn[0];else for(g=0,D=0;g<Ar-1;g++)if(J=Jn[g],gt=Jn[g+1],w=J.distanceTo(gt),D+=w,D>v){St=(D-v)/w,Ut=[gt.x-St*(gt.x-J.x),gt.y-St*(gt.y-J.y)];break}var In=c.unproject(Tt(Ut));return Jt([In.lat+se.lat,In.lng+se.lng])}var Uu={__proto__:null,simplify:sf,pointToSegmentDistance:dc,closestPointOnSegment:bd,clipSegment:Do,_getEdgeIntersection:Qs,_getBitCode:zr,_sqClosestPointOnSegment:Za,isFlat:Gr,_flat:yi,polylineCenter:gc},mc={project:function(s){return new st(s.lng,s.lat)},unproject:function(s){return new ne(s.y,s.x)},bounds:new Pt([-180,-90],[180,90])},vi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Pt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var c=Math.PI/180,g=this.R,v=s.lat*c,w=this.R_MINOR/g,D=Math.sqrt(1-w*w),J=D*Math.sin(v),gt=Math.tan(Math.PI/4-v/2)/Math.pow((1-J)/(1+J),D/2);return v=-g*Math.log(Math.max(gt,1e-10)),new st(s.lng*c*g,v)},unproject:function(s){for(var c=180/Math.PI,g=this.R,v=this.R_MINOR/g,w=Math.sqrt(1-v*v),D=Math.exp(-s.y/g),J=Math.PI/2-2*Math.atan(D),gt=0,St=.1,Ut;gt<15&&Math.abs(St)>1e-7;gt++)Ut=w*Math.sin(J),Ut=Math.pow((1-Ut)/(1+Ut),w/2),St=Math.PI/2-2*Math.atan(D*Ut)-J,J+=St;return new ne(J*c,s.x*c/g)}},Qi={__proto__:null,LonLat:mc,Mercator:vi,SphericalMercator:ie},Vu=i({},Ht,{code:"EPSG:3395",projection:vi,transformation:function(){var s=.5/(Math.PI*vi.R);return Z(s,.5,-s,.5)}()}),_c=i({},Ht,{code:"EPSG:4326",projection:mc,transformation:Z(1/180,1,-1/180,.5)}),yc=i({},Mt,{projection:mc,transformation:Z(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,c){var g=c.lng-s.lng,v=c.lat-s.lat;return Math.sqrt(g*g+v*v)},infinite:!0});Mt.Earth=Ht,Mt.EPSG3395=Vu,Mt.EPSG3857=Y,Mt.EPSG900913=dt,Mt.EPSG4326=_c,Mt.Simple=yc;var kr=ht.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[p(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[p(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var c=s.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var g=this.getEvents();c.on(g,this),this.once("remove",function(){c.off(g,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});He.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var c=p(s);return this._layers[c]?this:(this._layers[c]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var c=p(s);return this._layers[c]?(this._loaded&&s.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return p(s)in this._layers},eachLayer:function(s,c){for(var g in this._layers)s.call(c,this._layers[g]);return this},_addLayers:function(s){s=s?U(s)?s:[s]:[];for(var c=0,g=s.length;c<g;c++)this.addLayer(s[c])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[p(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var c=p(s);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,c=-1/0,g=this._getZoomSpan();for(var v in this._zoomBoundLayers){var w=this._zoomBoundLayers[v].options;s=w.minZoom===void 0?s:Math.min(s,w.minZoom),c=w.maxZoom===void 0?c:Math.max(c,w.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=s===1/0?void 0:s,g!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var oa=kr.extend({initialize:function(s,c){R(this,c),this._layers={};var g,v;if(s)for(g=0,v=s.length;g<v;g++)this.addLayer(s[g])},addLayer:function(s){var c=this.getLayerId(s);return this._layers[c]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var c=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(s){var c=typeof s=="number"?s:this.getLayerId(s);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var c=Array.prototype.slice.call(arguments,1),g,v;for(g in this._layers)v=this._layers[g],v[s]&&v[s].apply(v,c);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,c){for(var g in this._layers)s.call(c,this._layers[g]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return p(s)}}),Ld=function(s,c){return new oa(s,c)},Ai=oa.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),oa.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),oa.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Ot;for(var c in this._layers){var g=this._layers[c];s.extend(g.getBounds?g.getBounds():g.getLatLng())}return s}}),wd=function(s,c){return new Ai(s,c)},aa=W.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){R(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,c){var g=this._getIconUrl(s);if(!g){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var v=this._createImg(g,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(v,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),v},_setIconStyles:function(s,c){var g=this.options,v=g[c+"Size"];typeof v=="number"&&(v=[v,v]);var w=Tt(v),D=Tt(c==="shadow"&&g.shadowAnchor||g.iconAnchor||w&&w.divideBy(2,!0));s.className="leaflet-marker-"+c+" "+(g.className||""),D&&(s.style.marginLeft=-D.x+"px",s.style.marginTop=-D.y+"px"),w&&(s.style.width=w.x+"px",s.style.height=w.y+"px")},_createImg:function(s,c){return c=c||document.createElement("img"),c.src=s,c},_getIconUrl:function(s){return _e.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function Sd(s){return new aa(s)}var Wa=aa.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Wa.imagePath!="string"&&(Wa.imagePath=this._detectIconPath()),(this.options.imagePath||Wa.imagePath)+aa.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var c=function(g,v,w){var D=v.exec(g);return D&&D[w]};return s=c(s,/^url\((['"])?(.+)\1\)$/,2),s&&c(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Je("div","leaflet-default-icon-path",document.body),c=Xs(s,"background-image")||Xs(s,"backgroundImage");if(document.body.removeChild(s),c=this._stripUrl(c),c)return c;var g=document.querySelector('link[href$="leaflet.css"]');return g?g.href.substring(0,g.href.length-11-1):""}}),ju=Ir.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Js(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Re(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Rn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var c=this._marker,g=c._map,v=this._marker.options.autoPanSpeed,w=this._marker.options.autoPanPadding,D=Mo(c._icon),J=g.getPixelBounds(),gt=g.getPixelOrigin(),St=jt(J.min._subtract(gt).add(w),J.max._subtract(gt).subtract(w));if(!St.contains(D)){var Ut=Tt((Math.max(St.max.x,D.x)-St.max.x)/(J.max.x-St.max.x)-(Math.min(St.min.x,D.x)-St.min.x)/(J.min.x-St.min.x),(Math.max(St.max.y,D.y)-St.max.y)/(J.max.y-St.max.y)-(Math.min(St.min.y,D.y)-St.min.y)/(J.min.y-St.min.y)).multiplyBy(v);g.panBy(Ut,{animate:!1}),this._draggable._newPos._add(Ut),this._draggable._startPos._add(Ut),jn(c._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=nt(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(Et(this._panRequest),this._panRequest=nt(this._adjustPan.bind(this,s)))},_onDrag:function(s){var c=this._marker,g=c._shadow,v=Mo(c._icon),w=c._map.layerPointToLatLng(v);g&&jn(g,v),c._latlng=w,s.latlng=w,s.oldLatLng=this._oldLatLng,c.fire("move",s).fire("drag",s)},_onDragEnd:function(s){Et(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),qu=kr.extend({options:{icon:new Wa,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,c){R(this,c),this._latlng=Jt(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var c=this._latlng;return this._latlng=Jt(s),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),g=s.icon.createIcon(this._icon),v=!1;g!==this._icon&&(this._icon&&this._removeIcon(),v=!0,s.title&&(g.title=s.title),g.tagName==="IMG"&&(g.alt=s.alt||"")),Re(g,c),s.keyboard&&(g.tabIndex="0",g.setAttribute("role","button")),this._icon=g,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ae(g,"focus",this._panOnFocus,this);var w=s.icon.createShadow(this._shadow),D=!1;w!==this._shadow&&(this._removeShadow(),D=!0),w&&(Re(w,c),w.alt=""),this._shadow=w,s.opacity<1&&this._updateOpacity(),v&&this.getPane().appendChild(this._icon),this._initInteraction(),w&&D&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&hn(this._icon,"focus",this._panOnFocus,this),yn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&yn(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&jn(this._icon,s),this._shadow&&jn(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(Re(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ju)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ju(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&_i(this._icon,s),this._shadow&&_i(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var c=this.options.icon.options,g=c.iconSize?Tt(c.iconSize):Tt(0,0),v=c.iconAnchor?Tt(c.iconAnchor):Tt(0,0);s.panInside(this._latlng,{paddingTopLeft:v,paddingBottomRight:g.subtract(v)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Pd(s,c){return new qu(s,c)}var Ss=kr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return R(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ts=Ss.extend({options:{fill:!0,radius:10},initialize:function(s,c){R(this,c),this._latlng=Jt(s),this._radius=this.options.radius},setLatLng:function(s){var c=this._latlng;return this._latlng=Jt(s),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var c=s&&s.radius||this._radius;return Ss.prototype.setStyle.call(this,s),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,c=this._radiusY||s,g=this._clickTolerance(),v=[s+g,c+g];this._pxBounds=new Pt(this._point.subtract(v),this._point.add(v))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function af(s,c){return new ts(s,c)}var vc=ts.extend({initialize:function(s,c,g){if(typeof c=="number"&&(c=i({},g,{radius:c})),R(this,c),this._latlng=Jt(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Ot(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Ss.prototype.setStyle,_project:function(){var s=this._latlng.lng,c=this._latlng.lat,g=this._map,v=g.options.crs;if(v.distance===Ht.distance){var w=Math.PI/180,D=this._mRadius/Ht.R/w,J=g.project([c+D,s]),gt=g.project([c-D,s]),St=J.add(gt).divideBy(2),Ut=g.unproject(St).lat,se=Math.acos((Math.cos(D*w)-Math.sin(c*w)*Math.sin(Ut*w))/(Math.cos(c*w)*Math.cos(Ut*w)))/w;(isNaN(se)||se===0)&&(se=D/Math.cos(Math.PI/180*c)),this._point=St.subtract(g.getPixelOrigin()),this._radius=isNaN(se)?0:St.x-g.project([Ut,s-se]).x,this._radiusY=St.y-J.y}else{var Ee=v.unproject(v.project(this._latlng).subtract([this._mRadius,0]));this._point=g.latLngToLayerPoint(this._latlng),this._radius=this._point.x-g.latLngToLayerPoint(Ee).x}this._updateBounds()}});function No(s,c,g){return new vc(s,c,g)}var Ps=Ss.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,c){R(this,c),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var c=1/0,g=null,v=Za,w,D,J=0,gt=this._parts.length;J<gt;J++)for(var St=this._parts[J],Ut=1,se=St.length;Ut<se;Ut++){w=St[Ut-1],D=St[Ut];var Ee=v(s,w,D,!0);Ee<c&&(c=Ee,g=v(s,w,D))}return g&&(g.distance=Math.sqrt(c)),g},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return gc(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,c){return c=c||this._defaultShape(),s=Jt(s),c.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Ot,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Gr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var c=[],g=Gr(s),v=0,w=s.length;v<w;v++)g?(c[v]=Jt(s[v]),this._bounds.extend(c[v])):c[v]=this._convertLatLngs(s[v]);return c},_project:function(){var s=new Pt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),c=new st(s,s);this._rawPxBounds&&(this._pxBounds=new Pt([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(s,c,g){var v=s[0]instanceof ne,w=s.length,D,J;if(v){for(J=[],D=0;D<w;D++)J[D]=this._map.latLngToLayerPoint(s[D]),g.extend(J[D]);c.push(J)}else for(D=0;D<w;D++)this._projectLatlngs(s[D],c,g)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,g,v,w,D,J,gt,St;for(g=0,w=0,D=this._rings.length;g<D;g++)for(St=this._rings[g],v=0,J=St.length;v<J-1;v++)gt=Do(St[v],St[v+1],s,v,!0),gt&&(c[w]=c[w]||[],c[w].push(gt[0]),(gt[1]!==St[v+1]||v===J-2)&&(c[w].push(gt[1]),w++))}},_simplifyPoints:function(){for(var s=this._parts,c=this.options.smoothFactor,g=0,v=s.length;g<v;g++)s[g]=sf(s[g],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,c){var g,v,w,D,J,gt,St=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(g=0,D=this._parts.length;g<D;g++)for(gt=this._parts[g],v=0,J=gt.length,w=J-1;v<J;w=v++)if(!(!c&&v===0)&&dc(s,gt[w],gt[v])<=St)return!0;return!1}});function Md(s,c){return new Ps(s,c)}Ps._flat=yi;var to=Ps.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return rf(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var c=Ps.prototype._convertLatLngs.call(this,s),g=c.length;return g>=2&&c[0]instanceof ne&&c[0].equals(c[g-1])&&c.pop(),c},_setLatLngs:function(s){Ps.prototype._setLatLngs.call(this,s),Gr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Gr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,c=this.options.weight,g=new st(c,c);if(s=new Pt(s.min.subtract(g),s.max.add(g)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var v=0,w=this._rings.length,D;v<w;v++)D=nf(this._rings[v],s,!0),D.length&&this._parts.push(D)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var c=!1,g,v,w,D,J,gt,St,Ut;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(D=0,St=this._parts.length;D<St;D++)for(g=this._parts[D],J=0,Ut=g.length,gt=Ut-1;J<Ut;gt=J++)v=g[J],w=g[gt],v.y>s.y!=w.y>s.y&&s.x<(w.x-v.x)*(s.y-v.y)/(w.y-v.y)+v.x&&(c=!c);return c||Ps.prototype._containsPoint.call(this,s,!0)}});function Ka(s,c){return new to(s,c)}var Ms=Ai.extend({initialize:function(s,c){R(this,c),this._layers={},s&&this.addData(s)},addData:function(s){var c=U(s)?s:s.features,g,v,w;if(c){for(g=0,v=c.length;g<v;g++)w=c[g],(w.geometries||w.geometry||w.features||w.coordinates)&&this.addData(w);return this}var D=this.options;if(D.filter&&!D.filter(s))return this;var J=Hu(s,D);return J?(J.feature=Xu(s),J.defaultOptions=J.options,this.resetStyle(J),D.onEachFeature&&D.onEachFeature(s,J),this.addLayer(J)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=i({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(c){this._setLayerStyle(c,s)},this)},_setLayerStyle:function(s,c){s.setStyle&&(typeof c=="function"&&(c=c(s.feature)),s.setStyle(c))}});function Hu(s,c){var g=s.type==="Feature"?s.geometry:s,v=g?g.coordinates:null,w=[],D=c&&c.pointToLayer,J=c&&c.coordsToLatLng||Zu,gt,St,Ut,se;if(!v&&!g)return null;switch(g.type){case"Point":return gt=J(v),uf(D,s,gt,c);case"MultiPoint":for(Ut=0,se=v.length;Ut<se;Ut++)gt=J(v[Ut]),w.push(uf(D,s,gt,c));return new Ai(w);case"LineString":case"MultiLineString":return St=Wu(v,g.type==="LineString"?0:1,J),new Ps(St,c);case"Polygon":case"MultiPolygon":return St=Wu(v,g.type==="Polygon"?1:2,J),new to(St,c);case"GeometryCollection":for(Ut=0,se=g.geometries.length;Ut<se;Ut++){var Ee=Hu({geometry:g.geometries[Ut],type:"Feature",properties:s.properties},c);Ee&&w.push(Ee)}return new Ai(w);case"FeatureCollection":for(Ut=0,se=g.features.length;Ut<se;Ut++){var ze=Hu(g.features[Ut],c);ze&&w.push(ze)}return new Ai(w);default:throw new Error("Invalid GeoJSON object.")}}function uf(s,c,g,v){return s?s(c,g):new qu(g,v&&v.markersInheritOptions&&v)}function Zu(s){return new ne(s[1],s[0],s[2])}function Wu(s,c,g){for(var v=[],w=0,D=s.length,J;w<D;w++)J=c?Wu(s[w],c-1,g):(g||Zu)(s[w]),v.push(J);return v}function Ku(s,c){return s=Jt(s),s.alt!==void 0?[S(s.lng,c),S(s.lat,c),S(s.alt,c)]:[S(s.lng,c),S(s.lat,c)]}function $u(s,c,g,v){for(var w=[],D=0,J=s.length;D<J;D++)w.push(c?$u(s[D],Gr(s[D])?0:c-1,g,v):Ku(s[D],v));return!c&&g&&w.length>0&&w.push(w[0].slice()),w}function ua(s,c){return s.feature?i({},s.feature,{geometry:c}):Xu(c)}function Xu(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Yu={toGeoJSON:function(s){return ua(this,{type:"Point",coordinates:Ku(this.getLatLng(),s)})}};qu.include(Yu),vc.include(Yu),ts.include(Yu),Ps.include({toGeoJSON:function(s){var c=!Gr(this._latlngs),g=$u(this._latlngs,c?1:0,!1,s);return ua(this,{type:(c?"Multi":"")+"LineString",coordinates:g})}}),to.include({toGeoJSON:function(s){var c=!Gr(this._latlngs),g=c&&!Gr(this._latlngs[0]),v=$u(this._latlngs,g?2:c?1:0,!0,s);return c||(v=[v]),ua(this,{type:(g?"Multi":"")+"Polygon",coordinates:v})}}),oa.include({toMultiPoint:function(s){var c=[];return this.eachLayer(function(g){c.push(g.toGeoJSON(s).geometry.coordinates)}),ua(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(s){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(s);var g=c==="GeometryCollection",v=[];return this.eachLayer(function(w){if(w.toGeoJSON){var D=w.toGeoJSON(s);if(g)v.push(D.geometry);else{var J=Xu(D);J.type==="FeatureCollection"?v.push.apply(v,J.features):v.push(J)}}}),g?ua(this,{geometries:v,type:"GeometryCollection"}):{type:"FeatureCollection",features:v}}});function Ju(s,c){return new Ms(s,c)}var lf=Ju,la=kr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,c,g){this._url=s,this._bounds=ee(c),R(this,g)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Re(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){yn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&ia(this._image),this},bringToBack:function(){return this._map&&So(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=ee(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",c=this._image=s?this._url:Je("img");if(Re(c,"leaflet-image-layer"),this._zoomAnimated&&Re(c,"leaflet-zoom-animated"),this.options.className&&Re(c,this.options.className),c.onselectstart=C,c.onmousemove=C,c.onload=u(this.fire,this,"load"),c.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(s){var c=this._map.getZoomScale(s.zoom),g=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;Po(this._image,g,c)},_reset:function(){var s=this._image,c=new Pt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),g=c.getSize();jn(s,c.min),s.style.width=g.x+"px",s.style.height=g.y+"px"},_updateOpacity:function(){_i(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),Id=function(s,c,g){return new la(s,c,g)},$a=la.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",c=this._image=s?this._url:Je("video");if(Re(c,"leaflet-image-layer"),this._zoomAnimated&&Re(c,"leaflet-zoom-animated"),this.options.className&&Re(c,this.options.className),c.onselectstart=C,c.onmousemove=C,c.onloadeddata=u(this.fire,this,"load"),s){for(var g=c.getElementsByTagName("source"),v=[],w=0;w<g.length;w++)v.push(g[w].src);this._url=g.length>0?v:[c.src];return}U(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var D=0;D<this._url.length;D++){var J=Je("source");J.src=this._url[D],c.appendChild(J)}}});function cf(s,c,g){return new $a(s,c,g)}var hf=la.extend({_initImage:function(){var s=this._image=this._url;Re(s,"leaflet-image-layer"),this._zoomAnimated&&Re(s,"leaflet-zoom-animated"),this.options.className&&Re(s,this.options.className),s.onselectstart=C,s.onmousemove=C}});function kd(s,c,g){return new hf(s,c,g)}var es=kr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,c){s&&(s instanceof ne||U(s))?(this._latlng=Jt(s),R(this,c)):(R(this,s),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&_i(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&_i(this._container,1),this.bringToFront(),this.options.interactive&&(Re(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(_i(this._container,0),this._removeTimeout=setTimeout(u(yn,void 0,this._container),200)):yn(this._container),this.options.interactive&&(Rn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=Jt(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ia(this._container),this},bringToBack:function(){return this._map&&So(this._container),this},_prepareOpen:function(s){var c=this._source;if(!c._map)return!1;if(c instanceof Ai){c=null;var g=this._source._layers;for(var v in g)if(g[v]._map){c=g[v];break}if(!c)return!1;this._source=c}if(!s)if(c.getCenter)s=c.getCenter();else if(c.getLatLng)s=c.getLatLng();else if(c.getBounds)s=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")s.innerHTML=c;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),c=Tt(this.options.offset),g=this._getAnchor();this._zoomAnimated?jn(this._container,s.add(g)):c=c.add(s).add(g);var v=this._containerBottom=-c.y,w=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=v+"px",this._container.style.left=w+"px"}},_getAnchor:function(){return[0,0]}});He.include({_initOverlay:function(s,c,g,v){var w=c;return w instanceof s||(w=new s(v).setContent(c)),g&&w.setLatLng(g),w}}),kr.include({_initOverlay:function(s,c,g,v){var w=g;return w instanceof s?(R(w,v),w._source=this):(w=c&&!v?c:new s(v,this),w.setContent(g)),w}});var eo=es.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,es.prototype.openOn.call(this,s)},onAdd:function(s){es.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ss||this._source.on("preclick",Io))},onRemove:function(s){es.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ss||this._source.off("preclick",Io))},getEvents:function(){var s=es.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",c=this._container=Je("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),g=this._wrapper=Je("div",s+"-content-wrapper",c);if(this._contentNode=Je("div",s+"-content",g),qa(c),hc(this._contentNode),Ae(c,"contextmenu",Io),this._tipContainer=Je("div",s+"-tip-container",c),this._tip=Je("div",s+"-tip",this._tipContainer),this.options.closeButton){var v=this._closeButton=Je("a",s+"-close-button",c);v.setAttribute("role","button"),v.setAttribute("aria-label","Close popup"),v.href="#close",v.innerHTML='<span aria-hidden="true">&#215;</span>',Ae(v,"click",function(w){ur(w),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,c=s.style;c.width="",c.whiteSpace="nowrap";var g=s.offsetWidth;g=Math.min(g,this.options.maxWidth),g=Math.max(g,this.options.minWidth),c.width=g+1+"px",c.whiteSpace="",c.height="";var v=s.offsetHeight,w=this.options.maxHeight,D="leaflet-popup-scrolled";w&&v>w?(c.height=w+"px",Re(s,D)):Rn(s,D),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),g=this._getAnchor();jn(this._container,c.add(g))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,c=parseInt(Xs(this._container,"marginBottom"),10)||0,g=this._container.offsetHeight+c,v=this._containerWidth,w=new st(this._containerLeft,-g-this._containerBottom);w._add(Mo(this._container));var D=s.layerPointToContainerPoint(w),J=Tt(this.options.autoPanPadding),gt=Tt(this.options.autoPanPaddingTopLeft||J),St=Tt(this.options.autoPanPaddingBottomRight||J),Ut=s.getSize(),se=0,Ee=0;D.x+v+St.x>Ut.x&&(se=D.x+v-Ut.x+St.x),D.x-se-gt.x<0&&(se=D.x-gt.x),D.y+g+St.y>Ut.y&&(Ee=D.y+g-Ut.y+St.y),D.y-Ee-gt.y<0&&(Ee=D.y-gt.y),(se||Ee)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([se,Ee]))}},_getAnchor:function(){return Tt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Td=function(s,c){return new eo(s,c)};He.mergeOptions({closePopupOnClick:!0}),He.include({openPopup:function(s,c,g){return this._initOverlay(eo,s,c,g).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),kr.include({bindPopup:function(s,c){return this._popup=this._initOverlay(eo,this._popup,s,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Ai||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){ko(s);var c=s.layer||s.target;if(this._popup._source===c&&!(c instanceof Ss)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=c,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Qu=es.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){es.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){es.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=es.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",c=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Je("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+p(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var c,g,v=this._map,w=this._container,D=v.latLngToContainerPoint(v.getCenter()),J=v.layerPointToContainerPoint(s),gt=this.options.direction,St=w.offsetWidth,Ut=w.offsetHeight,se=Tt(this.options.offset),Ee=this._getAnchor();gt==="top"?(c=St/2,g=Ut):gt==="bottom"?(c=St/2,g=0):gt==="center"?(c=St/2,g=Ut/2):gt==="right"?(c=0,g=Ut/2):gt==="left"?(c=St,g=Ut/2):J.x<D.x?(gt="right",c=0,g=Ut/2):(gt="left",c=St+(se.x+Ee.x)*2,g=Ut/2),s=s.subtract(Tt(c,g,!0)).add(se).add(Ee),Rn(w,"leaflet-tooltip-right"),Rn(w,"leaflet-tooltip-left"),Rn(w,"leaflet-tooltip-top"),Rn(w,"leaflet-tooltip-bottom"),Re(w,"leaflet-tooltip-"+gt),jn(w,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&_i(this._container,s)},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(c)},_getAnchor:function(){return Tt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ad=function(s,c){return new Qu(s,c)};He.include({openTooltip:function(s,c,g){return this._initOverlay(Qu,s,c,g).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),kr.include({bindTooltip:function(s,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Qu,this._tooltip,s,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var c=s?"off":"on",g={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?g.add=this._openTooltip:(g.mouseover=this._openTooltip,g.mouseout=this.closeTooltip,g.click=this._openTooltip,this._map?this._addFocusListeners():g.add=this._addFocusListeners),this._tooltip.options.sticky&&(g.mousemove=this._moveTooltip),this[c](g),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Ai||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var c=typeof s.getElement=="function"&&s.getElement();c&&(Ae(c,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),Ae(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var c=typeof s.getElement=="function"&&s.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var c=s.latlng,g,v;this._tooltip.options.sticky&&s.originalEvent&&(g=this._map.mouseEventToContainerPoint(s.originalEvent),v=this._map.containerPointToLayerPoint(g),c=this._map.layerPointToLatLng(v)),this._tooltip.setLatLng(c)}});var ff=aa.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var c=s&&s.tagName==="DIV"?s:document.createElement("div"),g=this.options;if(g.html instanceof Element?(Ua(c),c.appendChild(g.html)):c.innerHTML=g.html!==!1?g.html:"",g.bgPos){var v=Tt(g.bgPos);c.style.backgroundPosition=-v.x+"px "+-v.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function Dd(s){return new ff(s)}aa.Default=Wa;var Xa=kr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:_e.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){R(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),yn(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ia(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(So(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof st?s:new st(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var c=this.getPane().children,g=-s(-1/0,1/0),v=0,w=c.length,D;v<w;v++)D=c[v].style.zIndex,c[v]!==this._container&&D&&(g=s(g,+D));isFinite(g)&&(this.options.zIndex=g+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!_e.ielt9){_i(this._container,this.options.opacity);var s=+new Date,c=!1,g=!1;for(var v in this._tiles){var w=this._tiles[v];if(!(!w.current||!w.loaded)){var D=Math.min(1,(s-w.loaded)/200);_i(w.el,D),D<1?c=!0:(w.active?g=!0:this._onOpaqueTile(w),w.active=!0)}}g&&!this._noPrune&&this._pruneTiles(),c&&(Et(this._fadeFrame),this._fadeFrame=nt(this._updateOpacity,this))}},_onOpaqueTile:C,_initContainer:function(){this._container||(this._container=Je("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,c=this.options.maxZoom;if(s!==void 0){for(var g in this._levels)g=Number(g),this._levels[g].el.children.length||g===s?(this._levels[g].el.style.zIndex=c-Math.abs(s-g),this._onUpdateLevel(g)):(yn(this._levels[g].el),this._removeTilesAtZoom(g),this._onRemoveLevel(g),delete this._levels[g]);var v=this._levels[s],w=this._map;return v||(v=this._levels[s]={},v.el=Je("div","leaflet-tile-container leaflet-zoom-animated",this._container),v.el.style.zIndex=c,v.origin=w.project(w.unproject(w.getPixelOrigin()),s).round(),v.zoom=s,this._setZoomTransform(v,w.getCenter(),w.getZoom()),C(v.el.offsetWidth),this._onCreateLevel(v)),this._level=v,v}},_onUpdateLevel:C,_onRemoveLevel:C,_onCreateLevel:C,_pruneTiles:function(){if(this._map){var s,c,g=this._map.getZoom();if(g>this.options.maxZoom||g<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)c=this._tiles[s],c.retain=c.current;for(s in this._tiles)if(c=this._tiles[s],c.current&&!c.active){var v=c.coords;this._retainParent(v.x,v.y,v.z,v.z-5)||this._retainChildren(v.x,v.y,v.z,v.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var c in this._tiles)this._tiles[c].coords.z===s&&this._removeTile(c)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)yn(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,c,g,v){var w=Math.floor(s/2),D=Math.floor(c/2),J=g-1,gt=new st(+w,+D);gt.z=+J;var St=this._tileCoordsToKey(gt),Ut=this._tiles[St];return Ut&&Ut.active?(Ut.retain=!0,!0):(Ut&&Ut.loaded&&(Ut.retain=!0),J>v?this._retainParent(w,D,J,v):!1)},_retainChildren:function(s,c,g,v){for(var w=2*s;w<2*s+2;w++)for(var D=2*c;D<2*c+2;D++){var J=new st(w,D);J.z=g+1;var gt=this._tileCoordsToKey(J),St=this._tiles[gt];if(St&&St.active){St.retain=!0;continue}else St&&St.loaded&&(St.retain=!0);g+1<v&&this._retainChildren(w,D,g+1,v)}},_resetView:function(s){var c=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var c=this.options;return c.minNativeZoom!==void 0&&s<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<s?c.maxNativeZoom:s},_setView:function(s,c,g,v){var w=Math.round(c);this.options.maxZoom!==void 0&&w>this.options.maxZoom||this.options.minZoom!==void 0&&w<this.options.minZoom?w=void 0:w=this._clampZoom(w);var D=this.options.updateWhenZooming&&w!==this._tileZoom;(!v||D)&&(this._tileZoom=w,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),w!==void 0&&this._update(s),g||this._pruneTiles(),this._noPrune=!!g),this._setZoomTransforms(s,c)},_setZoomTransforms:function(s,c){for(var g in this._levels)this._setZoomTransform(this._levels[g],s,c)},_setZoomTransform:function(s,c,g){var v=this._map.getZoomScale(g,s.zoom),w=s.origin.multiplyBy(v).subtract(this._map._getNewPixelOrigin(c,g)).round();_e.any3d?Po(s.el,w,v):jn(s.el,w)},_resetGrid:function(){var s=this._map,c=s.options.crs,g=this._tileSize=this.getTileSize(),v=this._tileZoom,w=this._map.getPixelWorldBounds(this._tileZoom);w&&(this._globalTileRange=this._pxBoundsToTileRange(w)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,c.wrapLng[0]],v).x/g.x),Math.ceil(s.project([0,c.wrapLng[1]],v).x/g.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([c.wrapLat[0],0],v).y/g.x),Math.ceil(s.project([c.wrapLat[1],0],v).y/g.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var c=this._map,g=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),v=c.getZoomScale(g,this._tileZoom),w=c.project(s,this._tileZoom).floor(),D=c.getSize().divideBy(v*2);return new Pt(w.subtract(D),w.add(D))},_update:function(s){var c=this._map;if(c){var g=this._clampZoom(c.getZoom());if(s===void 0&&(s=c.getCenter()),this._tileZoom!==void 0){var v=this._getTiledPixelBounds(s),w=this._pxBoundsToTileRange(v),D=w.getCenter(),J=[],gt=this.options.keepBuffer,St=new Pt(w.getBottomLeft().subtract([gt,-gt]),w.getTopRight().add([gt,-gt]));if(!(isFinite(w.min.x)&&isFinite(w.min.y)&&isFinite(w.max.x)&&isFinite(w.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ut in this._tiles){var se=this._tiles[Ut].coords;(se.z!==this._tileZoom||!St.contains(new st(se.x,se.y)))&&(this._tiles[Ut].current=!1)}if(Math.abs(g-this._tileZoom)>1){this._setView(s,g);return}for(var Ee=w.min.y;Ee<=w.max.y;Ee++)for(var ze=w.min.x;ze<=w.max.x;ze++){var Ar=new st(ze,Ee);if(Ar.z=this._tileZoom,!!this._isValidTile(Ar)){var Jn=this._tiles[this._tileCoordsToKey(Ar)];Jn?Jn.current=!0:J.push(Ar)}}if(J.sort(function(In,ns){return In.distanceTo(D)-ns.distanceTo(D)}),J.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Vr=document.createDocumentFragment();for(ze=0;ze<J.length;ze++)this._addTile(J[ze],Vr);this._level.el.appendChild(Vr)}}}},_isValidTile:function(s){var c=this._map.options.crs;if(!c.infinite){var g=this._globalTileRange;if(!c.wrapLng&&(s.x<g.min.x||s.x>g.max.x)||!c.wrapLat&&(s.y<g.min.y||s.y>g.max.y))return!1}if(!this.options.bounds)return!0;var v=this._tileCoordsToBounds(s);return ee(this.options.bounds).overlaps(v)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var c=this._map,g=this.getTileSize(),v=s.scaleBy(g),w=v.add(g),D=c.unproject(v,s.z),J=c.unproject(w,s.z);return[D,J]},_tileCoordsToBounds:function(s){var c=this._tileCoordsToNwSe(s),g=new Ot(c[0],c[1]);return this.options.noWrap||(g=this._map.wrapLatLngBounds(g)),g},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var c=s.split(":"),g=new st(+c[0],+c[1]);return g.z=+c[2],g},_removeTile:function(s){var c=this._tiles[s];c&&(yn(c.el),delete this._tiles[s],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){Re(s,"leaflet-tile");var c=this.getTileSize();s.style.width=c.x+"px",s.style.height=c.y+"px",s.onselectstart=C,s.onmousemove=C,_e.ielt9&&this.options.opacity<1&&_i(s,this.options.opacity)},_addTile:function(s,c){var g=this._getTilePos(s),v=this._tileCoordsToKey(s),w=this.createTile(this._wrapCoords(s),u(this._tileReady,this,s));this._initTile(w),this.createTile.length<2&&nt(u(this._tileReady,this,s,null,w)),jn(w,g),this._tiles[v]={el:w,coords:s,current:!0},c.appendChild(w),this.fire("tileloadstart",{tile:w,coords:s})},_tileReady:function(s,c,g){c&&this.fire("tileerror",{error:c,tile:g,coords:s});var v=this._tileCoordsToKey(s);g=this._tiles[v],g&&(g.loaded=+new Date,this._map._fadeAnimated?(_i(g.el,0),Et(this._fadeFrame),this._fadeFrame=nt(this._updateOpacity,this)):(g.active=!0,this._pruneTiles()),c||(Re(g.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:g.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),_e.ielt9||!this._map._fadeAnimated?nt(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var c=new st(this._wrapX?y(s.x,this._wrapX):s.x,this._wrapY?y(s.y,this._wrapY):s.y);return c.z=s.z,c},_pxBoundsToTileRange:function(s){var c=this.getTileSize();return new Pt(s.min.unscaleBy(c).floor(),s.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function Nd(s){return new Xa(s)}var ca=Xa.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,c){this._url=s,c=R(this,c),c.detectRetina&&_e.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,c){return this._url===s&&c===void 0&&(c=!0),this._url=s,c||this.redraw(),this},createTile:function(s,c){var g=document.createElement("img");return Ae(g,"load",u(this._tileOnLoad,this,c,g)),Ae(g,"error",u(this._tileOnError,this,c,g)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(g.referrerPolicy=this.options.referrerPolicy),g.alt="",g.src=this.getTileUrl(s),g},getTileUrl:function(s){var c={r:_e.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var g=this._globalTileRange.max.y-s.y;this.options.tms&&(c.y=g),c["-y"]=g}return X(this._url,i(c,this.options))},_tileOnLoad:function(s,c){_e.ielt9?setTimeout(u(s,this,null,c),0):s(null,c)},_tileOnError:function(s,c,g){var v=this.options.errorTileUrl;v&&c.getAttribute("src")!==v&&(c.src=v),s(g,c)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,c=this.options.maxZoom,g=this.options.zoomReverse,v=this.options.zoomOffset;return g&&(s=c-s),s+v},_getSubdomain:function(s){var c=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var s,c;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(c=this._tiles[s].el,c.onload=C,c.onerror=C,!c.complete)){c.src=It;var g=this._tiles[s].coords;yn(c),delete this._tiles[s],this.fire("tileabort",{tile:c,coords:g})}},_removeTile:function(s){var c=this._tiles[s];if(c)return c.el.setAttribute("src",It),Xa.prototype._removeTile.call(this,s)},_tileReady:function(s,c,g){if(!(!this._map||g&&g.getAttribute("src")===It))return Xa.prototype._tileReady.call(this,s,c,g)}});function xc(s,c){return new ca(s,c)}var tl=ca.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,c){this._url=s;var g=i({},this.defaultWmsParams);for(var v in c)v in this.options||(g[v]=c[v]);c=R(this,c);var w=c.detectRetina&&_e.retina?2:1,D=this.getTileSize();g.width=D.x*w,g.height=D.y*w,this.wmsParams=g},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,ca.prototype.onAdd.call(this,s)},getTileUrl:function(s){var c=this._tileCoordsToNwSe(s),g=this._crs,v=jt(g.project(c[0]),g.project(c[1])),w=v.min,D=v.max,J=(this._wmsVersion>=1.3&&this._crs===_c?[w.y,w.x,D.y,D.x]:[w.x,w.y,D.x,D.y]).join(","),gt=ca.prototype.getTileUrl.call(this,s);return gt+O(this.wmsParams,gt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+J},setParams:function(s,c){return i(this.wmsParams,s),c||this.redraw(),this}});function Rd(s,c){return new tl(s,c)}ca.WMS=tl,xc.wms=Rd;var Is=kr.extend({options:{padding:.1},initialize:function(s){R(this,s),p(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Re(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,c){var g=this._map.getZoomScale(c,this._zoom),v=this._map.getSize().multiplyBy(.5+this.options.padding),w=this._map.project(this._center,c),D=v.multiplyBy(-g).add(w).subtract(this._map._getNewPixelOrigin(s,c));_e.any3d?Po(this._container,D,g):jn(this._container,D)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,c=this._map.getSize(),g=this._map.containerPointToLayerPoint(c.multiplyBy(-s)).round();this._bounds=new Pt(g,g.add(c.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Cc=Is.extend({options:{tolerance:0},getEvents:function(){var s=Is.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Is.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");Ae(s,"mousemove",this._onMouseMove,this),Ae(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ae(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){Et(this._redrawRequest),delete this._ctx,yn(this._container),hn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var c in this._layers)s=this._layers[c],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Is.prototype._update.call(this);var s=this._bounds,c=this._container,g=s.getSize(),v=_e.retina?2:1;jn(c,s.min),c.width=v*g.x,c.height=v*g.y,c.style.width=g.x+"px",c.style.height=g.y+"px",_e.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Is.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[p(s)]=s;var c=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var c=s._order,g=c.next,v=c.prev;g?g.prev=v:this._drawLast=v,v?v.next=g:this._drawFirst=g,delete s._order,delete this._layers[p(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var c=s.options.dashArray.split(/[, ]+/),g=[],v,w;for(w=0;w<c.length;w++){if(v=Number(c[w]),isNaN(v))return;g.push(v)}s.options._dashArray=g}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||nt(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var c=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Pt,this._redrawBounds.extend(s._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(s._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var c=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,c=this._redrawBounds;if(this._ctx.save(),c){var g=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,g.x,g.y),this._ctx.clip()}this._drawing=!0;for(var v=this._drawFirst;v;v=v.next)s=v.layer,(!c||s._pxBounds&&s._pxBounds.intersects(c))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,c){if(this._drawing){var g,v,w,D,J=s._parts,gt=J.length,St=this._ctx;if(gt){for(St.beginPath(),g=0;g<gt;g++){for(v=0,w=J[g].length;v<w;v++)D=J[g][v],St[v?"lineTo":"moveTo"](D.x,D.y);c&&St.closePath()}this._fillStroke(St,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var c=s._point,g=this._ctx,v=Math.max(Math.round(s._radius),1),w=(Math.max(Math.round(s._radiusY),1)||v)/v;w!==1&&(g.save(),g.scale(1,w)),g.beginPath(),g.arc(c.x,c.y/w,v,0,Math.PI*2,!1),w!==1&&g.restore(),this._fillStroke(g,s)}},_fillStroke:function(s,c){var g=c.options;g.fill&&(s.globalAlpha=g.fillOpacity,s.fillStyle=g.fillColor||g.color,s.fill(g.fillRule||"evenodd")),g.stroke&&g.weight!==0&&(s.setLineDash&&s.setLineDash(c.options&&c.options._dashArray||[]),s.globalAlpha=g.opacity,s.lineWidth=g.weight,s.strokeStyle=g.color,s.lineCap=g.lineCap,s.lineJoin=g.lineJoin,s.stroke())},_onClick:function(s){for(var c=this._map.mouseEventToLayerPoint(s),g,v,w=this._drawFirst;w;w=w.next)g=w.layer,g.options.interactive&&g._containsPoint(c)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(g))&&(v=g);this._fireEvent(v?[v]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,c)}},_handleMouseOut:function(s){var c=this._hoveredLayer;c&&(Rn(this._container,"leaflet-interactive"),this._fireEvent([c],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,c){if(!this._mouseHoverThrottled){for(var g,v,w=this._drawFirst;w;w=w.next)g=w.layer,g.options.interactive&&g._containsPoint(c)&&(v=g);v!==this._hoveredLayer&&(this._handleMouseOut(s),v&&(Re(this._container,"leaflet-interactive"),this._fireEvent([v],s,"mouseover"),this._hoveredLayer=v)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,c,g){this._map._fireDOMEvent(c,g||c.type,s)},_bringToFront:function(s){var c=s._order;if(c){var g=c.next,v=c.prev;if(g)g.prev=v;else return;v?v.next=g:g&&(this._drawFirst=g),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(s)}},_bringToBack:function(s){var c=s._order;if(c){var g=c.next,v=c.prev;if(v)v.next=g;else return;g?g.prev=v:v&&(this._drawLast=v),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(s)}}});function el(s){return _e.canvas?new Cc(s):null}var Ya=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Od={_initContainer:function(){this._container=Je("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Is.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var c=s._container=Ya("shape");Re(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",s._path=Ya("path"),c.appendChild(s._path),this._updateStyle(s),this._layers[p(s)]=s},_addPath:function(s){var c=s._container;this._container.appendChild(c),s.options.interactive&&s.addInteractiveTarget(c)},_removePath:function(s){var c=s._container;yn(c),s.removeInteractiveTarget(c),delete this._layers[p(s)]},_updateStyle:function(s){var c=s._stroke,g=s._fill,v=s.options,w=s._container;w.stroked=!!v.stroke,w.filled=!!v.fill,v.stroke?(c||(c=s._stroke=Ya("stroke")),w.appendChild(c),c.weight=v.weight+"px",c.color=v.color,c.opacity=v.opacity,v.dashArray?c.dashStyle=U(v.dashArray)?v.dashArray.join(" "):v.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=v.lineCap.replace("butt","flat"),c.joinstyle=v.lineJoin):c&&(w.removeChild(c),s._stroke=null),v.fill?(g||(g=s._fill=Ya("fill")),w.appendChild(g),g.color=v.fillColor||v.color,g.opacity=v.fillOpacity):g&&(w.removeChild(g),s._fill=null)},_updateCircle:function(s){var c=s._point.round(),g=Math.round(s._radius),v=Math.round(s._radiusY||g);this._setPath(s,s._empty()?"M0 0":"AL "+c.x+","+c.y+" "+g+","+v+" 0,"+65535*360)},_setPath:function(s,c){s._path.v=c},_bringToFront:function(s){ia(s._container)},_bringToBack:function(s){So(s._container)}},ha=_e.vml?Ya:Nt,yr=Is.extend({_initContainer:function(){this._container=ha("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ha("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){yn(this._container),hn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Is.prototype._update.call(this);var s=this._bounds,c=s.getSize(),g=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,g.setAttribute("width",c.x),g.setAttribute("height",c.y)),jn(g,s.min),g.setAttribute("viewBox",[s.min.x,s.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(s){var c=s._path=ha("path");s.options.className&&Re(c,s.options.className),s.options.interactive&&Re(c,"leaflet-interactive"),this._updateStyle(s),this._layers[p(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){yn(s._path),s.removeInteractiveTarget(s._path),delete this._layers[p(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var c=s._path,g=s.options;c&&(g.stroke?(c.setAttribute("stroke",g.color),c.setAttribute("stroke-opacity",g.opacity),c.setAttribute("stroke-width",g.weight),c.setAttribute("stroke-linecap",g.lineCap),c.setAttribute("stroke-linejoin",g.lineJoin),g.dashArray?c.setAttribute("stroke-dasharray",g.dashArray):c.removeAttribute("stroke-dasharray"),g.dashOffset?c.setAttribute("stroke-dashoffset",g.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),g.fill?(c.setAttribute("fill",g.fillColor||g.color),c.setAttribute("fill-opacity",g.fillOpacity),c.setAttribute("fill-rule",g.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(s,c){this._setPath(s,Ft(s._parts,c))},_updateCircle:function(s){var c=s._point,g=Math.max(Math.round(s._radius),1),v=Math.max(Math.round(s._radiusY),1)||g,w="a"+g+","+v+" 0 1,0 ",D=s._empty()?"M0 0":"M"+(c.x-g)+","+c.y+w+g*2+",0 "+w+-g*2+",0 ";this._setPath(s,D)},_setPath:function(s,c){s._path.setAttribute("d",c)},_bringToFront:function(s){ia(s._path)},_bringToBack:function(s){So(s._path)}});_e.vml&&yr.include(Od);function Tr(s){return _e.svg||_e.vml?new yr(s):null}He.include({getRenderer:function(s){var c=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var c=this._paneRenderers[s];return c===void 0&&(c=this._createRenderer({pane:s}),this._paneRenderers[s]=c),c},_createRenderer:function(s){return this.options.preferCanvas&&el(s)||Tr(s)}});var bc=to.extend({initialize:function(s,c){to.prototype.initialize.call(this,this._boundsToLatLngs(s),c)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=ee(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function Di(s,c){return new bc(s,c)}yr.create=ha,yr.pointsToPath=Ft,Ms.geometryToLayer=Hu,Ms.coordsToLatLng=Zu,Ms.coordsToLatLngs=Wu,Ms.latLngToCoords=Ku,Ms.latLngsToCoords=$u,Ms.getFeature=ua,Ms.asFeature=Xu,He.mergeOptions({boxZoom:!0});var Ie=Ir.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){Ae(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){hn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){yn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Va(),ic(),this._startPoint=this._map.mouseEventToContainerPoint(s),Ae(document,{contextmenu:ko,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Je("div","leaflet-zoom-box",this._container),Re(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var c=new Pt(this._point,this._startPoint),g=c.getSize();jn(this._box,c.min),this._box.style.width=g.x+"px",this._box.style.height=g.y+"px"},_finish:function(){this._moved&&(yn(this._box),Rn(this._container,"leaflet-crosshair")),ja(),sc(),hn(document,{contextmenu:ko,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var c=new Ot(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});He.addInitHook("addHandler","boxZoom",Ie),He.mergeOptions({doubleClickZoom:!0});var Ec=Ir.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var c=this._map,g=c.getZoom(),v=c.options.zoomDelta,w=s.originalEvent.shiftKey?g-v:g+v;c.options.doubleClickZoom==="center"?c.setZoom(w):c.setZoomAround(s.containerPoint,w)}});He.addInitHook("addHandler","doubleClickZoom",Ec),He.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var nl=Ir.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Js(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}Re(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Rn(this._map._container,"leaflet-grab"),Rn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=ee(this._map.options.maxBounds);this._offsetLimit=jt(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var c=this._lastTime=+new Date,g=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(g),this._times.push(c),this._prunePositions(c)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,c){return s-(s-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;s.x<c.min.x&&(s.x=this._viscousLimit(s.x,c.min.x)),s.y<c.min.y&&(s.y=this._viscousLimit(s.y,c.min.y)),s.x>c.max.x&&(s.x=this._viscousLimit(s.x,c.max.x)),s.y>c.max.y&&(s.y=this._viscousLimit(s.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,c=Math.round(s/2),g=this._initialWorldOffset,v=this._draggable._newPos.x,w=(v-c+g)%s+c-g,D=(v+c+g)%s-c-g,J=Math.abs(w+g)<Math.abs(D+g)?w:D;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=J},_onDragEnd:function(s){var c=this._map,g=c.options,v=!g.inertia||s.noInertia||this._times.length<2;if(c.fire("dragend",s),v)c.fire("moveend");else{this._prunePositions(+new Date);var w=this._lastPos.subtract(this._positions[0]),D=(this._lastTime-this._times[0])/1e3,J=g.easeLinearity,gt=w.multiplyBy(J/D),St=gt.distanceTo([0,0]),Ut=Math.min(g.inertiaMaxSpeed,St),se=gt.multiplyBy(Ut/St),Ee=Ut/(g.inertiaDeceleration*J),ze=se.multiplyBy(-Ee/2).round();!ze.x&&!ze.y?c.fire("moveend"):(ze=c._limitOffset(ze,c.options.maxBounds),nt(function(){c.panBy(ze,{duration:Ee,easeLinearity:J,noMoveStart:!0,animate:!0})}))}}});He.addInitHook("addHandler","dragging",nl),He.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ks=Ir.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),Ae(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),hn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,c=document.documentElement,g=s.scrollTop||c.scrollTop,v=s.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(v,g)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var c=this._panKeys={},g=this.keyCodes,v,w;for(v=0,w=g.left.length;v<w;v++)c[g.left[v]]=[-1*s,0];for(v=0,w=g.right.length;v<w;v++)c[g.right[v]]=[s,0];for(v=0,w=g.down.length;v<w;v++)c[g.down[v]]=[0,s];for(v=0,w=g.up.length;v<w;v++)c[g.up[v]]=[0,-1*s]},_setZoomDelta:function(s){var c=this._zoomKeys={},g=this.keyCodes,v,w;for(v=0,w=g.zoomIn.length;v<w;v++)c[g.zoomIn[v]]=s;for(v=0,w=g.zoomOut.length;v<w;v++)c[g.zoomOut[v]]=-s},_addHooks:function(){Ae(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){hn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var c=s.keyCode,g=this._map,v;if(c in this._panKeys){if(!g._panAnim||!g._panAnim._inProgress)if(v=this._panKeys[c],s.shiftKey&&(v=Tt(v).multiplyBy(3)),g.options.maxBounds&&(v=g._limitOffset(Tt(v),g.options.maxBounds)),g.options.worldCopyJump){var w=g.wrapLatLng(g.unproject(g.project(g.getCenter()).add(v)));g.panTo(w)}else g.panBy(v)}else if(c in this._zoomKeys)g.setZoom(g.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&g._popup&&g._popup.options.closeOnEscapeKey)g.closePopup();else return;ko(s)}}});He.addInitHook("addHandler","keyboard",ks),He.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ur=Ir.extend({addHooks:function(){Ae(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){hn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var c=Yh(s),g=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var v=Math.max(g-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),v),ko(s)},_performZoom:function(){var s=this._map,c=s.getZoom(),g=this._map.options.zoomSnap||0;s._stop();var v=this._delta/(this._map.options.wheelPxPerZoomLevel*4),w=4*Math.log(2/(1+Math.exp(-Math.abs(v))))/Math.LN2,D=g?Math.ceil(w/g)*g:w,J=s._limitZoom(c+(this._delta>0?D:-D))-c;this._delta=0,this._startTime=null,J&&(s.options.scrollWheelZoom==="center"?s.setZoom(c+J):s.setZoomAround(this._lastMousePos,c+J))}});He.addInitHook("addHandler","scrollWheelZoom",Ur);var pf=600;He.mergeOptions({tapHold:_e.touchNative&&_e.safari&&_e.mobile,tapTolerance:15});var ei=Ir.extend({addHooks:function(){Ae(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){hn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var c=s.touches[0];this._startPos=this._newPos=new st(c.clientX,c.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(Ae(document,"touchend",ur),Ae(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),pf),Ae(document,"touchend touchcancel contextmenu",this._cancel,this),Ae(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){hn(document,"touchend",ur),hn(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),hn(document,"touchend touchcancel contextmenu",this._cancel,this),hn(document,"touchmove",this._onMove,this)},_onMove:function(s){var c=s.touches[0];this._newPos=new st(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,c){var g=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});g._simulated=!0,c.target.dispatchEvent(g)}});He.addInitHook("addHandler","tapHold",ei),He.mergeOptions({touchZoom:_e.touch,bounceAtZoomLimits:!0});var ni=Ir.extend({addHooks:function(){Re(this._map._container,"leaflet-touch-zoom"),Ae(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Rn(this._map._container,"leaflet-touch-zoom"),hn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var c=this._map;if(!(!s.touches||s.touches.length!==2||c._animatingZoom||this._zooming)){var g=c.mouseEventToContainerPoint(s.touches[0]),v=c.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(g.add(v)._divideBy(2))),this._startDist=g.distanceTo(v),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),Ae(document,"touchmove",this._onTouchMove,this),Ae(document,"touchend touchcancel",this._onTouchEnd,this),ur(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var c=this._map,g=c.mouseEventToContainerPoint(s.touches[0]),v=c.mouseEventToContainerPoint(s.touches[1]),w=g.distanceTo(v)/this._startDist;if(this._zoom=c.getScaleZoom(w,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&w<1||this._zoom>c.getMaxZoom()&&w>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,w===1)return}else{var D=g._add(v)._divideBy(2)._subtract(this._centerPoint);if(w===1&&D.x===0&&D.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(D),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),Et(this._animRequest);var J=u(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=nt(J,this,!0),ur(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Et(this._animRequest),hn(document,"touchmove",this._onTouchMove,this),hn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});He.addInitHook("addHandler","touchZoom",ni),He.BoxZoom=Ie,He.DoubleClickZoom=Ec,He.Drag=nl,He.Keyboard=ks,He.ScrollWheelZoom=Ur,He.TapHold=ei,He.TouchZoom=ni,n.Bounds=Pt,n.Browser=_e,n.CRS=Mt,n.Canvas=Cc,n.Circle=vc,n.CircleMarker=ts,n.Class=W,n.Control=ke,n.DivIcon=ff,n.DivOverlay=es,n.DomEvent=Bu,n.DomUtil=gd,n.Draggable=Js,n.Evented=ht,n.FeatureGroup=Ai,n.GeoJSON=Ms,n.GridLayer=Xa,n.Handler=Ir,n.Icon=aa,n.ImageOverlay=la,n.LatLng=ne,n.LatLngBounds=Ot,n.Layer=kr,n.LayerGroup=oa,n.LineUtil=Uu,n.Map=He,n.Marker=qu,n.Mixin=xd,n.Path=Ss,n.Point=st,n.PolyUtil=Cd,n.Polygon=to,n.Polyline=Ps,n.Popup=eo,n.PosAnimation=Jh,n.Projection=Qi,n.Rectangle=bc,n.Renderer=Is,n.SVG=yr,n.SVGOverlay=hf,n.TileLayer=ca,n.Tooltip=Qu,n.Transformation=Te,n.Util=At,n.VideoOverlay=$a,n.bind=u,n.bounds=jt,n.canvas=el,n.circle=No,n.circleMarker=af,n.control=To,n.divIcon=Dd,n.extend=i,n.featureGroup=wd,n.geoJSON=Ju,n.geoJson=lf,n.gridLayer=Nd,n.icon=Sd,n.imageOverlay=Id,n.latLng=Jt,n.latLngBounds=ee,n.layerGroup=Ld,n.map=Qh,n.marker=Pd,n.point=Tt,n.polygon=Ka,n.polyline=Md,n.popup=Td,n.rectangle=Di,n.setOptions=R,n.stamp=p,n.svg=Tr,n.svgOverlay=kd,n.tileLayer=xc,n.tooltip=Ad,n.transformation=Z,n.version=r,n.videoOverlay=cf;var Ro=window.L;n.noConflict=function(){return window.L=Ro,this},window.L=n})})(Ng,Ng.exports);var xi=Ng.exports;const ue=Av(xi);var oi=63710088e-1,Fv={centimeters:oi*100,centimetres:oi*100,degrees:oi/111325,feet:oi*3.28084,inches:oi*39.37,kilometers:oi/1e3,kilometres:oi/1e3,meters:oi,metres:oi,miles:oi/1609.344,millimeters:oi*1e3,millimetres:oi*1e3,nauticalmiles:oi/1852,radians:1,yards:oi*1.0936};function _l(e,t,n){n===void 0&&(n={});var r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function _S(e,t,n){if(n===void 0&&(n={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!s0(e[0])||!s0(e[1]))throw new Error("coordinates must contain numbers");var r={type:"Point",coordinates:e};return _l(r,t,n)}function rp(e,t,n){n===void 0&&(n={});for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var u=0;u<o[o.length-1].length;u++)if(o[o.length-1][u]!==o[0][u])throw new Error("First and last Position are not equivalent.")}var f={type:"Polygon",coordinates:e};return _l(f,t,n)}function hu(e,t,n){if(n===void 0&&(n={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var r={type:"LineString",coordinates:e};return _l(r,t,n)}function Rg(e,t){t===void 0&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function zv(e,t){t===void 0&&(t="kilometers");var n=Fv[t];if(!n)throw new Error(t+" units is invalid");return e*n}function yS(e,t){t===void 0&&(t="kilometers");var n=Fv[t];if(!n)throw new Error(t+" units is invalid");return e/n}function wf(e){var t=e%360;return t*Math.PI/180}function s0(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function pm(e,t,n){if(e!==null)for(var r,i,o,u,f,p,_,y=0,C=0,S,k=e.type,P=k==="FeatureCollection",R=k==="Feature",O=P?e.features.length:1,H=0;H<O;H++){_=P?e.features[H].geometry:R?e.geometry:e,S=_?_.type==="GeometryCollection":!1,f=S?_.geometries.length:1;for(var X=0;X<f;X++){var U=0,ut=0;if(u=S?_.geometries[X]:_,u!==null){p=u.coordinates;var It=u.type;switch(y=0,It){case null:break;case"Point":if(t(p,C,H,U,ut)===!1)return!1;C++,U++;break;case"LineString":case"MultiPoint":for(r=0;r<p.length;r++){if(t(p[r],C,H,U,ut)===!1)return!1;C++,It==="MultiPoint"&&U++}It==="LineString"&&U++;break;case"Polygon":case"MultiLineString":for(r=0;r<p.length;r++){for(i=0;i<p[r].length-y;i++){if(t(p[r][i],C,H,U,ut)===!1)return!1;C++}It==="MultiLineString"&&U++,It==="Polygon"&&ut++}It==="Polygon"&&U++;break;case"MultiPolygon":for(r=0;r<p.length;r++){for(ut=0,i=0;i<p[r].length;i++){for(o=0;o<p[r][i].length-y;o++){if(t(p[r][i][o],C,H,U,ut)===!1)return!1;C++}ut++}U++}break;case"GeometryCollection":for(r=0;r<u.geometries.length;r++)if(pm(u.geometries[r],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o0(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var n=0;n<e.features.length&&t(e.features[n],n)!==!1;n++);}function Bp(e,t){var n,r,i,o,u,f,p,_,y,C,S=0,k=e.type==="FeatureCollection",P=e.type==="Feature",R=k?e.features.length:1;for(n=0;n<R;n++){for(f=k?e.features[n].geometry:P?e.geometry:e,_=k?e.features[n].properties:P?e.properties:{},y=k?e.features[n].bbox:P?e.bbox:void 0,C=k?e.features[n].id:P?e.id:void 0,p=f?f.type==="GeometryCollection":!1,u=p?f.geometries.length:1,i=0;i<u;i++){if(o=p?f.geometries[i]:f,o===null){if(t(null,S,_,y,C)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(o,S,_,y,C)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<o.geometries.length;r++)if(t(o.geometries[r],S,_,y,C)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}S++}}function vS(e,t,n){var r=n;return Bp(e,function(i,o,u,f,p){r=t(r,i,o,u,f,p)}),r}function xS(e,t){Bp(e,function(n,r,i,o,u){var f=n===null?null:n.type;switch(f){case null:case"Point":case"LineString":case"Polygon":return t(_l(n,i,{bbox:o,id:u}),r,0)===!1?!1:void 0}var p;switch(f){case"MultiPoint":p="Point";break;case"MultiLineString":p="LineString";break;case"MultiPolygon":p="Polygon";break}for(var _=0;_<n.coordinates.length;_++){var y=n.coordinates[_],C={type:p,coordinates:y};if(t(_l(C,i),r,_)===!1)return!1}})}function CS(e,t){xS(e,function(n,r,i){var o=0;if(n.geometry){var u=n.geometry.type;if(!(u==="Point"||u==="MultiPoint")){var f,p=0,_=0,y=0;if(pm(n,function(C,S,k,P,R){if(f===void 0||r>p||P>_||R>y){f=C,p=r,_=P,y=R,o=0;return}var O=hu([f,C],n.properties);if(t(O,r,i,R,o)===!1)return!1;o++,f=C})===!1)return!1}}})}function bS(e,t,n){var r=n,i=!1;return CS(e,function(o,u,f,p,_){i===!1&&n===void 0?r=o:r=t(r,o,u,f,p,_),i=!0}),r}function Og(e){var t=[1/0,1/0,-1/0,-1/0];return pm(e,function(n){t[0]>n[0]&&(t[0]=n[0]),t[1]>n[1]&&(t[1]=n[1]),t[2]<n[0]&&(t[2]=n[0]),t[3]<n[1]&&(t[3]=n[1])}),t}Og.default=Og;function a0(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function sh(e,t,n){n===void 0&&(n={});var r=a0(e),i=a0(t),o=wf(i[1]-r[1]),u=wf(i[0]-r[0]),f=wf(r[1]),p=wf(i[1]),_=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(f)*Math.cos(p);return zv(2*Math.atan2(Math.sqrt(_),Math.sqrt(1-_)),n.units)}function ES(e,t){t===void 0&&(t={});var n=Og(e),r=(n[0]+n[2])/2,i=(n[1]+n[3])/2;return _S([r,i],t.properties,t)}var u0=6378137;function oh(e){return vS(e,function(t,n){return t+LS(n)},0)}function LS(e){var t=0,n;switch(e.type){case"Polygon":return l0(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)t+=l0(e.coordinates[n]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function l0(e){var t=0;if(e&&e.length>0){t+=Math.abs(c0(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(c0(e[n]))}return t}function c0(e){var t,n,r,i,o,u,f,p=0,_=e.length;if(_>2){for(f=0;f<_;f++)f===_-2?(i=_-2,o=_-1,u=0):f===_-1?(i=_-1,o=0,u=1):(i=f,o=f+1,u=f+2),t=e[i],n=e[o],r=e[u],p+=(ug(r[0])-ug(t[0]))*Math.sin(ug(n[1]));p=p*u0*u0/2}return p}function ug(e){return e*Math.PI/180}function yl(e,t){return t===void 0&&(t={}),bS(e,function(n,r){var i=r.geometry.coordinates;return n+sh(i[0],i[1],t)},0)}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(this===void 0||this===null)throw new TypeError(this+" is not an object");var n=Object(this),r=Math.max(Math.min(n.length,9007199254740991),0)||0,i=1 in arguments&&parseInt(Number(arguments[1]),10)||0;i=i<0?Math.max(r+i,0):Math.min(i,r);var o=2 in arguments&&arguments[2]!==void 0?parseInt(Number(arguments[2]),10)||0:r;for(o=o<0?Math.max(r+arguments[2],0):Math.min(o,r);i<o;)n[i]=t,++i;return n},writable:!0});Number.isFinite=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)};Number.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};Number.parseFloat=Number.parseFloat||parseFloat;Number.isNaN=Number.isNaN||function(e){return e!==e};Math.trunc=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};var fu=function(){};fu.prototype.interfaces_=function(){return[]};fu.prototype.getClass=function(){return fu};fu.prototype.equalsWithTolerance=function(t,n,r){return Math.abs(t-n)<=r};var dn=function(e){function t(n){e.call(this,n),this.name="IllegalArgumentException",this.message=n,this.stack=new e().stack}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),be=function(){},Gv={MAX_VALUE:{configurable:!0}};be.isNaN=function(t){return Number.isNaN(t)};be.doubleToLongBits=function(t){return t};be.longBitsToDouble=function(t){return t};be.isInfinite=function(t){return!Number.isFinite(t)};Gv.MAX_VALUE.get=function(){return Number.MAX_VALUE};Object.defineProperties(be,Gv);var Ii=function(){},Fp=function(){},vl=function(){};function ki(){}var ct=function e(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)this.x=0,this.y=0,this.z=e.NULL_ORDINATE;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.z=t.z}else arguments.length===2?(this.x=arguments[0],this.y=arguments[1],this.z=e.NULL_ORDINATE):arguments.length===3&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},Su={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};ct.prototype.setOrdinate=function(t,n){switch(t){case ct.X:this.x=n;break;case ct.Y:this.y=n;break;case ct.Z:this.z=n;break;default:throw new dn("Invalid ordinate index: "+t)}};ct.prototype.equals2D=function(){if(arguments.length===1){var t=arguments[0];return!(this.x!==t.x||this.y!==t.y)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return!(!fu.equalsWithTolerance(this.x,n.x,r)||!fu.equalsWithTolerance(this.y,n.y,r))}};ct.prototype.getOrdinate=function(t){switch(t){case ct.X:return this.x;case ct.Y:return this.y;case ct.Z:return this.z}throw new dn("Invalid ordinate index: "+t)};ct.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||be.isNaN(this.z))&&be.isNaN(t.z)};ct.prototype.equals=function(t){return t instanceof ct?this.equals2D(t):!1};ct.prototype.equalInZ=function(t,n){return fu.equalsWithTolerance(this.z,t.z,n)};ct.prototype.compareTo=function(t){var n=t;return this.x<n.x?-1:this.x>n.x?1:this.y<n.y?-1:this.y>n.y?1:0};ct.prototype.clone=function(){};ct.prototype.copy=function(){return new ct(this)};ct.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};ct.prototype.distance3D=function(t){var n=this.x-t.x,r=this.y-t.y,i=this.z-t.z;return Math.sqrt(n*n+r*r+i*i)};ct.prototype.distance=function(t){var n=this.x-t.x,r=this.y-t.y;return Math.sqrt(n*n+r*r)};ct.prototype.hashCode=function(){var t=17;return t=37*t+ct.hashCode(this.x),t=37*t+ct.hashCode(this.y),t};ct.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z};ct.prototype.interfaces_=function(){return[Ii,Fp,ki]};ct.prototype.getClass=function(){return ct};ct.hashCode=function(){if(arguments.length===1){var t=arguments[0],n=be.doubleToLongBits(t);return Math.trunc((n^n)>>>32)}};Su.DimensionalComparator.get=function(){return Vo};Su.serialVersionUID.get=function(){return 6683108902428367e3};Su.NULL_ORDINATE.get=function(){return be.NaN};Su.X.get=function(){return 0};Su.Y.get=function(){return 1};Su.Z.get=function(){return 2};Object.defineProperties(ct,Su);var Vo=function(t){if(this._dimensionsToTest=2,arguments.length!==0){if(arguments.length===1){var n=arguments[0];if(n!==2&&n!==3)throw new dn("only 2 or 3 dimensions may be specified");this._dimensionsToTest=n}}};Vo.prototype.compare=function(t,n){var r=t,i=n,o=Vo.compare(r.x,i.x);if(o!==0)return o;var u=Vo.compare(r.y,i.y);if(u!==0)return u;if(this._dimensionsToTest<=2)return 0;var f=Vo.compare(r.z,i.z);return f};Vo.prototype.interfaces_=function(){return[vl]};Vo.prototype.getClass=function(){return Vo};Vo.compare=function(t,n){return t<n?-1:t>n?1:be.isNaN(t)?be.isNaN(n)?0:-1:be.isNaN(n)?1:0};var xl=function(){};xl.prototype.create=function(){};xl.prototype.interfaces_=function(){return[]};xl.prototype.getClass=function(){return xl};var yt=function(){},Mh={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};yt.prototype.interfaces_=function(){return[]};yt.prototype.getClass=function(){return yt};yt.toLocationSymbol=function(t){switch(t){case yt.EXTERIOR:return"e";case yt.BOUNDARY:return"b";case yt.INTERIOR:return"i";case yt.NONE:return"-"}throw new dn("Unknown location value: "+t)};Mh.INTERIOR.get=function(){return 0};Mh.BOUNDARY.get=function(){return 1};Mh.EXTERIOR.get=function(){return 2};Mh.NONE.get=function(){return-1};Object.defineProperties(yt,Mh);var ve=function(e,t){return e.interfaces_&&e.interfaces_().indexOf(t)>-1},fi=function(){},Uv={LOG_10:{configurable:!0}};fi.prototype.interfaces_=function(){return[]};fi.prototype.getClass=function(){return fi};fi.log10=function(t){var n=Math.log(t);return be.isInfinite(n)||be.isNaN(n)?n:n/fi.LOG_10};fi.min=function(t,n,r,i){var o=t;return n<o&&(o=n),r<o&&(o=r),i<o&&(o=i),o};fi.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],n=arguments[1],r=arguments[2];return t<n?n:t>r?r:t}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1],u=arguments[2];return i<o?o:i>u?u:i}};fi.wrap=function(t,n){return t<0?n- -t%n:t%n};fi.max=function(){if(arguments.length===3){var t=arguments[0],n=arguments[1],r=arguments[2],i=t;return n>i&&(i=n),r>i&&(i=r),i}else if(arguments.length===4){var o=arguments[0],u=arguments[1],f=arguments[2],p=arguments[3],_=o;return u>_&&(_=u),f>_&&(_=f),p>_&&(_=p),_}};fi.average=function(t,n){return(t+n)/2};Uv.LOG_10.get=function(){return Math.log(10)};Object.defineProperties(fi,Uv);var Ls=function(t){this.str=t};Ls.prototype.append=function(t){this.str+=t};Ls.prototype.setCharAt=function(t,n){this.str=this.str.substr(0,t)+n+this.str.substr(t+1)};Ls.prototype.toString=function(t){return this.str};var ds=function(t){this.value=t};ds.prototype.intValue=function(){return this.value};ds.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0};ds.isNaN=function(t){return Number.isNaN(t)};var ah=function(){};ah.isWhitespace=function(t){return t<=32&&t>=0||t===127};ah.toUpperCase=function(t){return t.toUpperCase()};var wt=function e(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}else if(typeof arguments[0]=="string"){var r=arguments[0];e.call(this,e.parse(r))}}else if(arguments.length===2){var i=arguments[0],o=arguments[1];this.init(i,o)}},Ki={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};wt.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo};wt.prototype.extractSignificantDigits=function(t,n){var r=this.abs(),i=wt.magnitude(r._hi),o=wt.TEN.pow(i);r=r.divide(o),r.gt(wt.TEN)?(r=r.divide(wt.TEN),i+=1):r.lt(wt.ONE)&&(r=r.multiply(wt.TEN),i-=1);for(var u=i+1,f=new Ls,p=wt.MAX_PRINT_DIGITS-1,_=0;_<=p;_++){t&&_===u&&f.append(".");var y=Math.trunc(r._hi);if(y<0)break;var C=!1,S=0;y>9?(C=!0,S="9"):S="0"+y,f.append(S),r=r.subtract(wt.valueOf(y)).multiply(wt.TEN),C&&r.selfAdd(wt.TEN);var k=!0,P=wt.magnitude(r._hi);if(P<0&&Math.abs(P)>=p-_&&(k=!1),!k)break}return n[0]=i,f.toString()};wt.prototype.sqr=function(){return this.multiply(this)};wt.prototype.doubleValue=function(){return this._hi+this._lo};wt.prototype.subtract=function(){if(arguments[0]instanceof wt){var t=arguments[0];return this.add(t.negate())}else if(typeof arguments[0]=="number"){var n=arguments[0];return this.add(-n)}};wt.prototype.equals=function(){if(arguments.length===1){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}};wt.prototype.isZero=function(){return this._hi===0&&this._lo===0};wt.prototype.selfSubtract=function(){if(arguments[0]instanceof wt){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}else if(typeof arguments[0]=="number"){var n=arguments[0];return this.isNaN()?this:this.selfAdd(-n,0)}};wt.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null};wt.prototype.min=function(t){return this.le(t)?this:t};wt.prototype.selfDivide=function(){if(arguments.length===1){if(arguments[0]instanceof wt){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}else if(typeof arguments[0]=="number"){var n=arguments[0];return this.selfDivide(n,0)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1],o=null,u=null,f=null,p=null,_=null,y=null,C=null,S=null;return _=this._hi/r,y=wt.SPLIT*_,o=y-_,S=wt.SPLIT*r,o=y-o,u=_-o,f=S-r,C=_*r,f=S-f,p=r-f,S=o*f-C+o*p+u*f+u*p,y=(this._hi-C-S+this._lo-_*i)/r,S=_+y,this._hi=S,this._lo=_-S+y,this}};wt.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"};wt.prototype.divide=function(){if(arguments[0]instanceof wt){var t=arguments[0],n=null,r=null,i=null,o=null,u=null,f=null,p=null,_=null;u=this._hi/t._hi,f=wt.SPLIT*u,n=f-u,_=wt.SPLIT*t._hi,n=f-n,r=u-n,i=_-t._hi,p=u*t._hi,i=_-i,o=t._hi-i,_=n*i-p+n*o+r*i+r*o,f=(this._hi-p-_+this._lo-u*t._lo)/t._hi,_=u+f;var y=_,C=u-_+f;return new wt(y,C)}else if(typeof arguments[0]=="number"){var S=arguments[0];return be.isNaN(S)?wt.createNaN():wt.copy(this).selfDivide(S,0)}};wt.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo};wt.prototype.pow=function(t){if(t===0)return wt.valueOf(1);var n=new wt(this),r=wt.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2===1&&r.selfMultiply(n),i/=2,i>0&&(n=n.sqr());else r=n;return t<0?r.reciprocal():r};wt.prototype.ceil=function(){if(this.isNaN())return wt.NaN;var t=Math.ceil(this._hi),n=0;return t===this._hi&&(n=Math.ceil(this._lo)),new wt(t,n)};wt.prototype.compareTo=function(t){var n=t;return this._hi<n._hi?-1:this._hi>n._hi?1:this._lo<n._lo?-1:this._lo>n._lo?1:0};wt.prototype.rint=function(){if(this.isNaN())return this;var t=this.add(.5);return t.floor()};wt.prototype.setValue=function(){if(arguments[0]instanceof wt){var t=arguments[0];return this.init(t),this}else if(typeof arguments[0]=="number"){var n=arguments[0];return this.init(n),this}};wt.prototype.max=function(t){return this.ge(t)?this:t};wt.prototype.sqrt=function(){if(this.isZero())return wt.valueOf(0);if(this.isNegative())return wt.NaN;var t=1/Math.sqrt(this._hi),n=this._hi*t,r=wt.valueOf(n),i=this.subtract(r.sqr()),o=i._hi*(t*.5);return r.add(o)};wt.prototype.selfAdd=function(){if(arguments.length===1){if(arguments[0]instanceof wt){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}else if(typeof arguments[0]=="number"){var n=arguments[0],r=null,i=null,o=null,u=null,f=null,p=null;return o=this._hi+n,f=o-this._hi,u=o-f,u=n-f+(this._hi-u),p=u+this._lo,r=o+p,i=p+(o-r),this._hi=r+i,this._lo=i+(r-this._hi),this}}else if(arguments.length===2){var _=arguments[0],y=arguments[1],C=null,S=null,k=null,P=null,R=null,O=null,H=null,X=null;R=this._hi+_,k=this._lo+y,H=R-this._hi,X=k-this._lo,O=R-H,P=k-X,O=_-H+(this._hi-O),P=y-X+(this._lo-P),H=O+k,C=R+H,S=H+(R-C),H=P+S;var U=C+H,ut=H+(C-U);return this._hi=U,this._lo=ut,this}};wt.prototype.selfMultiply=function(){if(arguments.length===1){if(arguments[0]instanceof wt){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}else if(typeof arguments[0]=="number"){var n=arguments[0];return this.selfMultiply(n,0)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1],o=null,u=null,f=null,p=null,_=null,y=null;_=wt.SPLIT*this._hi,o=_-this._hi,y=wt.SPLIT*r,o=_-o,u=this._hi-o,f=y-r,_=this._hi*r,f=y-f,p=r-f,y=o*f-_+o*p+u*f+u*p+(this._hi*i+this._lo*r);var C=_+y;o=_-C;var S=y+o;return this._hi=C,this._lo=S,this}};wt.prototype.selfSqr=function(){return this.selfMultiply(this)};wt.prototype.floor=function(){if(this.isNaN())return wt.NaN;var t=Math.floor(this._hi),n=0;return t===this._hi&&(n=Math.floor(this._lo)),new wt(t,n)};wt.prototype.negate=function(){return this.isNaN()?this:new wt(-this._hi,-this._lo)};wt.prototype.clone=function(){};wt.prototype.multiply=function(){if(arguments[0]instanceof wt){var t=arguments[0];return t.isNaN()?wt.createNaN():wt.copy(this).selfMultiply(t)}else if(typeof arguments[0]=="number"){var n=arguments[0];return be.isNaN(n)?wt.createNaN():wt.copy(this).selfMultiply(n,0)}};wt.prototype.isNaN=function(){return be.isNaN(this._hi)};wt.prototype.intValue=function(){return Math.trunc(this._hi)};wt.prototype.toString=function(){var t=wt.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()};wt.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(t!==null)return t;var n=new Array(1).fill(null),r=this.extractSignificantDigits(!0,n),i=n[0]+1,o=r;if(r.charAt(0)===".")o="0"+r;else if(i<0)o="0."+wt.stringOfChar("0",-i)+r;else if(r.indexOf(".")===-1){var u=i-r.length,f=wt.stringOfChar("0",u);o=r+f+".0"}return this.isNegative()?"-"+o:o};wt.prototype.reciprocal=function(){var t=null,n=null,r=null,i=null,o=null,u=null,f=null,p=null;o=1/this._hi,u=wt.SPLIT*o,t=u-o,p=wt.SPLIT*this._hi,t=u-t,n=o-t,r=p-this._hi,f=o*this._hi,r=p-r,i=this._hi-r,p=t*r-f+t*i+n*r+n*i,u=(1-f-p-o*this._lo)/this._hi;var _=o+u,y=o-_+u;return new wt(_,y)};wt.prototype.toSciNotation=function(){if(this.isZero())return wt.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(t!==null)return t;var n=new Array(1).fill(null),r=this.extractSignificantDigits(!1,n),i=wt.SCI_NOT_EXPONENT_CHAR+n[0];if(r.charAt(0)==="0")throw new Error("Found leading zero: "+r);var o="";r.length>1&&(o=r.substring(1));var u=r.charAt(0)+"."+o;return this.isNegative()?"-"+u+i:u+i};wt.prototype.abs=function(){return this.isNaN()?wt.NaN:this.isNegative()?this.negate():new wt(this)};wt.prototype.isPositive=function(){return(this._hi>0||this._hi===0)&&this._lo>0};wt.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo};wt.prototype.add=function(){if(arguments[0]instanceof wt){var t=arguments[0];return wt.copy(this).selfAdd(t)}else if(typeof arguments[0]=="number"){var n=arguments[0];return wt.copy(this).selfAdd(n)}};wt.prototype.init=function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof wt){var n=arguments[0];this._hi=n._hi,this._lo=n._lo}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this._hi=r,this._lo=i}};wt.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo};wt.prototype.isNegative=function(){return(this._hi<0||this._hi===0)&&this._lo<0};wt.prototype.trunc=function(){return this.isNaN()?wt.NaN:this.isPositive()?this.floor():this.ceil()};wt.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0};wt.prototype.interfaces_=function(){return[ki,Ii,Fp]};wt.prototype.getClass=function(){return wt};wt.sqr=function(t){return wt.valueOf(t).selfMultiply(t)};wt.valueOf=function(){if(typeof arguments[0]=="string"){var t=arguments[0];return wt.parse(t)}else if(typeof arguments[0]=="number"){var n=arguments[0];return new wt(n)}};wt.sqrt=function(t){return wt.valueOf(t).sqrt()};wt.parse=function(t){for(var n=0,r=t.length;ah.isWhitespace(t.charAt(n));)n++;var i=!1;if(n<r){var o=t.charAt(n);(o==="-"||o==="+")&&(n++,o==="-"&&(i=!0))}for(var u=new wt,f=0,p=0,_=0;!(n>=r);){var y=t.charAt(n);if(n++,ah.isDigit(y)){var C=y-"0";u.selfMultiply(wt.TEN),u.selfAdd(C),f++;continue}if(y==="."){p=f;continue}if(y==="e"||y==="E"){var S=t.substring(n);try{_=ds.parseInt(S)}catch(H){throw H instanceof Error?new Error("Invalid exponent "+S+" in string "+t):H}finally{}break}throw new Error("Unexpected character '"+y+"' at position "+n+" in string "+t)}var k=u,P=f-p-_;if(P===0)k=u;else if(P>0){var R=wt.TEN.pow(P);k=u.divide(R)}else if(P<0){var O=wt.TEN.pow(-P);k=u.multiply(O)}return i?k.negate():k};wt.createNaN=function(){return new wt(be.NaN,be.NaN)};wt.copy=function(t){return new wt(t)};wt.magnitude=function(t){var n=Math.abs(t),r=Math.log(n)/Math.log(10),i=Math.trunc(Math.floor(r)),o=Math.pow(10,i);return o*10<=n&&(i+=1),i};wt.stringOfChar=function(t,n){for(var r=new Ls,i=0;i<n;i++)r.append(t);return r.toString()};Ki.PI.get=function(){return new wt(3.141592653589793,12246467991473532e-32)};Ki.TWO_PI.get=function(){return new wt(6.283185307179586,24492935982947064e-32)};Ki.PI_2.get=function(){return new wt(1.5707963267948966,6123233995736766e-32)};Ki.E.get=function(){return new wt(2.718281828459045,14456468917292502e-32)};Ki.NaN.get=function(){return new wt(be.NaN,be.NaN)};Ki.EPS.get=function(){return 123259516440783e-46};Ki.SPLIT.get=function(){return 134217729};Ki.MAX_PRINT_DIGITS.get=function(){return 32};Ki.TEN.get=function(){return wt.valueOf(10)};Ki.ONE.get=function(){return wt.valueOf(1)};Ki.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"};Ki.SCI_NOT_ZERO.get=function(){return"0.0E0"};Object.defineProperties(wt,Ki);var Nr=function(){},Vv={DP_SAFE_EPSILON:{configurable:!0}};Nr.prototype.interfaces_=function(){return[]};Nr.prototype.getClass=function(){return Nr};Nr.orientationIndex=function(t,n,r){var i=Nr.orientationIndexFilter(t,n,r);if(i<=1)return i;var o=wt.valueOf(n.x).selfAdd(-t.x),u=wt.valueOf(n.y).selfAdd(-t.y),f=wt.valueOf(r.x).selfAdd(-n.x),p=wt.valueOf(r.y).selfAdd(-n.y);return o.selfMultiply(p).selfSubtract(u.selfMultiply(f)).signum()};Nr.signOfDet2x2=function(t,n,r,i){var o=t.multiply(i).selfSubtract(n.multiply(r));return o.signum()};Nr.intersection=function(t,n,r,i){var o=wt.valueOf(i.y).selfSubtract(r.y).selfMultiply(wt.valueOf(n.x).selfSubtract(t.x)),u=wt.valueOf(i.x).selfSubtract(r.x).selfMultiply(wt.valueOf(n.y).selfSubtract(t.y)),f=o.subtract(u),p=wt.valueOf(i.x).selfSubtract(r.x).selfMultiply(wt.valueOf(t.y).selfSubtract(r.y)),_=wt.valueOf(i.y).selfSubtract(r.y).selfMultiply(wt.valueOf(t.x).selfSubtract(r.x)),y=p.subtract(_),C=y.selfDivide(f).doubleValue(),S=wt.valueOf(t.x).selfAdd(wt.valueOf(n.x).selfSubtract(t.x).selfMultiply(C)).doubleValue(),k=wt.valueOf(n.x).selfSubtract(t.x).selfMultiply(wt.valueOf(t.y).selfSubtract(r.y)),P=wt.valueOf(n.y).selfSubtract(t.y).selfMultiply(wt.valueOf(t.x).selfSubtract(r.x)),R=k.subtract(P),O=R.selfDivide(f).doubleValue(),H=wt.valueOf(r.y).selfAdd(wt.valueOf(i.y).selfSubtract(r.y).selfMultiply(O)).doubleValue();return new ct(S,H)};Nr.orientationIndexFilter=function(t,n,r){var i=null,o=(t.x-r.x)*(n.y-r.y),u=(t.y-r.y)*(n.x-r.x),f=o-u;if(o>0){if(u<=0)return Nr.signum(f);i=o+u}else if(o<0){if(u>=0)return Nr.signum(f);i=-o-u}else return Nr.signum(f);var p=Nr.DP_SAFE_EPSILON*i;return f>=p||-f>=p?Nr.signum(f):2};Nr.signum=function(t){return t>0?1:t<0?-1:0};Vv.DP_SAFE_EPSILON.get=function(){return 1e-15};Object.defineProperties(Nr,Vv);var Ge=function(){},Ih={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Ih.X.get=function(){return 0};Ih.Y.get=function(){return 1};Ih.Z.get=function(){return 2};Ih.M.get=function(){return 3};Ge.prototype.setOrdinate=function(t,n,r){};Ge.prototype.size=function(){};Ge.prototype.getOrdinate=function(t,n){};Ge.prototype.getCoordinate=function(){};Ge.prototype.getCoordinateCopy=function(t){};Ge.prototype.getDimension=function(){};Ge.prototype.getX=function(t){};Ge.prototype.clone=function(){};Ge.prototype.expandEnvelope=function(t){};Ge.prototype.copy=function(){};Ge.prototype.getY=function(t){};Ge.prototype.toCoordinateArray=function(){};Ge.prototype.interfaces_=function(){return[Fp]};Ge.prototype.getClass=function(){return Ge};Object.defineProperties(Ge,Ih);var jv=function(){},ql=function(e){function t(){e.call(this,"Projective point not representable on the Cartesian plane.")}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(jv),nr=function(){};nr.arraycopy=function(t,n,r,i,o){for(var u=0,f=n;f<n+o;f++)r[i+u]=t[f],u++};nr.getProperty=function(t){return{"line.separator":`
`}[t]};var Bi=function e(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof e&&arguments[1]instanceof e){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof ct&&arguments[1]instanceof ct){var u=arguments[0],f=arguments[1];this.x=u.y-f.y,this.y=f.x-u.x,this.w=u.x*f.y-f.x*u.y}}else if(arguments.length===3){var p=arguments[0],_=arguments[1],y=arguments[2];this.x=p,this.y=_,this.w=y}else if(arguments.length===4){var C=arguments[0],S=arguments[1],k=arguments[2],P=arguments[3],R=C.y-S.y,O=S.x-C.x,H=C.x*S.y-S.x*C.y,X=k.y-P.y,U=P.x-k.x,ut=k.x*P.y-P.x*k.y;this.x=O*ut-U*H,this.y=X*H-R*ut,this.w=R*U-X*O}};Bi.prototype.getY=function(){var t=this.y/this.w;if(be.isNaN(t)||be.isInfinite(t))throw new ql;return t};Bi.prototype.getX=function(){var t=this.x/this.w;if(be.isNaN(t)||be.isInfinite(t))throw new ql;return t};Bi.prototype.getCoordinate=function(){var t=new ct;return t.x=this.getX(),t.y=this.getY(),t};Bi.prototype.interfaces_=function(){return[]};Bi.prototype.getClass=function(){return Bi};Bi.intersection=function(t,n,r,i){var o=t.y-n.y,u=n.x-t.x,f=t.x*n.y-n.x*t.y,p=r.y-i.y,_=i.x-r.x,y=r.x*i.y-i.x*r.y,C=u*y-_*f,S=p*f-o*y,k=o*_-p*u,P=C/k,R=S/k;if(be.isNaN(P)||be.isInfinite(P)||be.isNaN(R)||be.isInfinite(R))throw new ql;return new ct(P,R)};var he=function e(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof ct){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(arguments.length===4){var o=arguments[0],u=arguments[1],f=arguments[2],p=arguments[3];this.init(o,u,f,p)}},qv={serialVersionUID:{configurable:!0}};he.prototype.getArea=function(){return this.getWidth()*this.getHeight()};he.prototype.equals=function(t){if(!(t instanceof he))return!1;var n=t;return this.isNull()?n.isNull():this._maxx===n.getMaxX()&&this._maxy===n.getMaxY()&&this._minx===n.getMinX()&&this._miny===n.getMinY()};he.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new he;var n=this._minx>t._minx?this._minx:t._minx,r=this._miny>t._miny?this._miny:t._miny,i=this._maxx<t._maxx?this._maxx:t._maxx,o=this._maxy<t._maxy?this._maxy:t._maxy;return new he(n,i,r,o)};he.prototype.isNull=function(){return this._maxx<this._minx};he.prototype.getMaxX=function(){return this._maxx};he.prototype.covers=function(){if(arguments.length===1){if(arguments[0]instanceof ct){var t=arguments[0];return this.covers(t.x,t.y)}else if(arguments[0]instanceof he){var n=arguments[0];return this.isNull()||n.isNull()?!1:n.getMinX()>=this._minx&&n.getMaxX()<=this._maxx&&n.getMinY()>=this._miny&&n.getMaxY()<=this._maxy}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isNull()?!1:r>=this._minx&&r<=this._maxx&&i>=this._miny&&i<=this._maxy}};he.prototype.intersects=function(){if(arguments.length===1){if(arguments[0]instanceof he){var t=arguments[0];return this.isNull()||t.isNull()?!1:!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}else if(arguments[0]instanceof ct){var n=arguments[0];return this.intersects(n.x,n.y)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isNull()?!1:!(r>this._maxx||r<this._minx||i>this._maxy||i<this._miny)}};he.prototype.getMinY=function(){return this._miny};he.prototype.getMinX=function(){return this._minx};he.prototype.expandToInclude=function(){if(arguments.length===1){if(arguments[0]instanceof ct){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof he){var n=arguments[0];if(n.isNull())return null;this.isNull()?(this._minx=n.getMinX(),this._maxx=n.getMaxX(),this._miny=n.getMinY(),this._maxy=n.getMaxY()):(n._minx<this._minx&&(this._minx=n._minx),n._maxx>this._maxx&&(this._maxx=n._maxx),n._miny<this._miny&&(this._miny=n._miny),n._maxy>this._maxy&&(this._maxy=n._maxy))}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.isNull()?(this._minx=r,this._maxx=r,this._miny=i,this._maxy=i):(r<this._minx&&(this._minx=r),r>this._maxx&&(this._maxx=r),i<this._miny&&(this._miny=i),i>this._maxy&&(this._maxy=i))}};he.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),n=this.getHeight();return t<n?t:n};he.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx};he.prototype.compareTo=function(t){var n=t;return this.isNull()?n.isNull()?0:-1:n.isNull()?1:this._minx<n._minx?-1:this._minx>n._minx?1:this._miny<n._miny?-1:this._miny>n._miny?1:this._maxx<n._maxx?-1:this._maxx>n._maxx?1:this._maxy<n._maxy?-1:this._maxy>n._maxy?1:0};he.prototype.translate=function(t,n){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+n,this.getMaxY()+n)};he.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"};he.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1};he.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny};he.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),n=this.getHeight();return t>n?t:n};he.prototype.expandBy=function(){if(arguments.length===1){var t=arguments[0];this.expandBy(t,t)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];if(this.isNull())return null;this._minx-=n,this._maxx+=n,this._miny-=r,this._maxy+=r,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}};he.prototype.contains=function(){if(arguments.length===1){if(arguments[0]instanceof he){var t=arguments[0];return this.covers(t)}else if(arguments[0]instanceof ct){var n=arguments[0];return this.covers(n)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.covers(r,i)}};he.prototype.centre=function(){return this.isNull()?null:new ct((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)};he.prototype.init=function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof ct){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof he){var n=arguments[0];this._minx=n._minx,this._maxx=n._maxx,this._miny=n._miny,this._maxy=n._maxy}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(arguments.length===4){var o=arguments[0],u=arguments[1],f=arguments[2],p=arguments[3];o<u?(this._minx=o,this._maxx=u):(this._minx=u,this._maxx=o),f<p?(this._miny=f,this._maxy=p):(this._miny=p,this._maxy=f)}};he.prototype.getMaxY=function(){return this._maxy};he.prototype.distance=function(t){if(this.intersects(t))return 0;var n=0;this._maxx<t._minx?n=t._minx-this._maxx:this._minx>t._maxx&&(n=this._minx-t._maxx);var r=0;return this._maxy<t._miny?r=t._miny-this._maxy:this._miny>t._maxy&&(r=this._miny-t._maxy),n===0?r:r===0?n:Math.sqrt(n*n+r*r)};he.prototype.hashCode=function(){var t=17;return t=37*t+ct.hashCode(this._minx),t=37*t+ct.hashCode(this._maxx),t=37*t+ct.hashCode(this._miny),t=37*t+ct.hashCode(this._maxy),t};he.prototype.interfaces_=function(){return[Ii,ki]};he.prototype.getClass=function(){return he};he.intersects=function(){if(arguments.length===3){var t=arguments[0],n=arguments[1],r=arguments[2];return r.x>=(t.x<n.x?t.x:n.x)&&r.x<=(t.x>n.x?t.x:n.x)&&r.y>=(t.y<n.y?t.y:n.y)&&r.y<=(t.y>n.y?t.y:n.y)}else if(arguments.length===4){var i=arguments[0],o=arguments[1],u=arguments[2],f=arguments[3],p=Math.min(u.x,f.x),_=Math.max(u.x,f.x),y=Math.min(i.x,o.x),C=Math.max(i.x,o.x);return!(y>_||C<p||(p=Math.min(u.y,f.y),_=Math.max(u.y,f.y),y=Math.min(i.y,o.y),C=Math.max(i.y,o.y),y>_)||C<p)}};qv.serialVersionUID.get=function(){return 5873921885273102e3};Object.defineProperties(he,qv);var ss={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},zp=function(t){this.geometryFactory=t||new De};zp.prototype.read=function(t){var n,r,i;t=t.replace(/[\n\r]/g," ");var o=ss.typeStr.exec(t);if(t.search("EMPTY")!==-1&&(o=ss.emptyTypeStr.exec(t),o[2]=void 0),o&&(r=o[1].toLowerCase(),i=o[2],ll[r]&&(n=ll[r].apply(this,[i]))),n===void 0)throw new Error("Could not parse WKT "+t);return n};zp.prototype.write=function(t){return this.extractGeometry(t)};zp.prototype.extractGeometry=function(t){var n=t.getGeometryType().toLowerCase();if(!ao[n])return null;var r=n.toUpperCase(),i;return t.isEmpty()?i=r+" EMPTY":i=r+"("+ao[n].apply(this,[t])+")",i};var ao={coordinate:function(t){return t.x+" "+t.y},point:function(t){return ao.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var n=this,r=[],i=0,o=t._geometries.length;i<o;++i)r.push("("+ao.point.apply(n,[t._geometries[i]])+")");return r.join(",")},linestring:function(t){for(var n=this,r=[],i=0,o=t._points._coordinates.length;i<o;++i)r.push(ao.coordinate.apply(n,[t._points._coordinates[i]]));return r.join(",")},linearring:function(t){for(var n=this,r=[],i=0,o=t._points._coordinates.length;i<o;++i)r.push(ao.coordinate.apply(n,[t._points._coordinates[i]]));return r.join(",")},multilinestring:function(t){for(var n=this,r=[],i=0,o=t._geometries.length;i<o;++i)r.push("("+ao.linestring.apply(n,[t._geometries[i]])+")");return r.join(",")},polygon:function(t){var n=this,r=[];r.push("("+ao.linestring.apply(this,[t._shell])+")");for(var i=0,o=t._holes.length;i<o;++i)r.push("("+ao.linestring.apply(n,[t._holes[i]])+")");return r.join(",")},multipolygon:function(t){for(var n=this,r=[],i=0,o=t._geometries.length;i<o;++i)r.push("("+ao.polygon.apply(n,[t._geometries[i]])+")");return r.join(",")},geometrycollection:function(t){for(var n=this,r=[],i=0,o=t._geometries.length;i<o;++i)r.push(n.extractGeometry(t._geometries[i]));return r.join(",")}},ll={point:function(t){if(t===void 0)return this.geometryFactory.createPoint();var n=t.trim().split(ss.spaces);return this.geometryFactory.createPoint(new ct(Number.parseFloat(n[0]),Number.parseFloat(n[1])))},multipoint:function(t){var n=this;if(t===void 0)return this.geometryFactory.createMultiPoint();for(var r,i=t.trim().split(","),o=[],u=0,f=i.length;u<f;++u)r=i[u].replace(ss.trimParens,"$1"),o.push(ll.point.apply(n,[r]));return this.geometryFactory.createMultiPoint(o)},linestring:function(t){if(t===void 0)return this.geometryFactory.createLineString();for(var n=t.trim().split(","),r=[],i,o=0,u=n.length;o<u;++o)i=n[o].trim().split(ss.spaces),r.push(new ct(Number.parseFloat(i[0]),Number.parseFloat(i[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(t===void 0)return this.geometryFactory.createLinearRing();for(var n=t.trim().split(","),r=[],i,o=0,u=n.length;o<u;++o)i=n[o].trim().split(ss.spaces),r.push(new ct(Number.parseFloat(i[0]),Number.parseFloat(i[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){var n=this;if(t===void 0)return this.geometryFactory.createMultiLineString();for(var r,i=t.trim().split(ss.parenComma),o=[],u=0,f=i.length;u<f;++u)r=i[u].replace(ss.trimParens,"$1"),o.push(ll.linestring.apply(n,[r]));return this.geometryFactory.createMultiLineString(o)},polygon:function(t){var n=this;if(t===void 0)return this.geometryFactory.createPolygon();for(var r,i,o,u=t.trim().split(ss.parenComma),f,p=[],_=0,y=u.length;_<y;++_)r=u[_].replace(ss.trimParens,"$1"),i=ll.linestring.apply(n,[r]),o=n.geometryFactory.createLinearRing(i._points),_===0?f=o:p.push(o);return this.geometryFactory.createPolygon(f,p)},multipolygon:function(t){var n=this;if(t===void 0)return this.geometryFactory.createMultiPolygon();for(var r,i=t.trim().split(ss.doubleParenComma),o=[],u=0,f=i.length;u<f;++u)r=i[u].replace(ss.trimParens,"$1"),o.push(ll.polygon.apply(n,[r]));return this.geometryFactory.createMultiPolygon(o)},geometrycollection:function(t){var n=this;if(t===void 0)return this.geometryFactory.createGeometryCollection();t=t.replace(/,\s*([A-Za-z])/g,"|$1");for(var r=t.trim().split("|"),i=[],o=0,u=r.length;o<u;++o)i.push(n.read(r[o]));return this.geometryFactory.createGeometryCollection(i)}},Gi=function(t){this.parser=new zp(t)};Gi.prototype.write=function(t){return this.parser.write(t)};Gi.toLineString=function(t,n){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+n.x+" "+n.y+" )"};var _o=function(e){function t(n){e.call(this,n),this.name="RuntimeException",this.message=n,this.stack=new e().stack}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),ip=function(e){function t(){if(e.call(this),arguments.length===0)e.call(this);else if(arguments.length===1){var n=arguments[0];e.call(this,n)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(_o),Se=function(){};Se.prototype.interfaces_=function(){return[]};Se.prototype.getClass=function(){return Se};Se.shouldNeverReachHere=function(){if(arguments.length===0)Se.shouldNeverReachHere(null);else if(arguments.length===1){var t=arguments[0];throw new ip("Should never reach here"+(t!==null?": "+t:""))}};Se.isTrue=function(){var t,n;if(arguments.length===1)t=arguments[0],Se.isTrue(t,null);else if(arguments.length===2&&(t=arguments[0],n=arguments[1],!t))throw n===null?new ip:new ip(n)};Se.equals=function(){var t,n,r;if(arguments.length===2)t=arguments[0],n=arguments[1],Se.equals(t,n,null);else if(arguments.length===3&&(t=arguments[0],n=arguments[1],r=arguments[2],!n.equals(t)))throw new ip("Expected "+t+" but encountered "+n+(r!==null?": "+r:""))};var mn=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new ct,this._intPt[1]=new ct,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},Pu={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};mn.prototype.getIndexAlongSegment=function(t,n){return this.computeIntLineIndex(),this._intLineIndex[t][n]};mn.prototype.getTopologySummary=function(){var t=new Ls;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()};mn.prototype.computeIntersection=function(t,n,r,i){this._inputLines[0][0]=t,this._inputLines[0][1]=n,this._inputLines[1][0]=r,this._inputLines[1][1]=i,this._result=this.computeIntersect(t,n,r,i)};mn.prototype.getIntersectionNum=function(){return this._result};mn.prototype.computeIntLineIndex=function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var t=arguments[0],n=this.getEdgeDistance(t,0),r=this.getEdgeDistance(t,1);n>r?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}};mn.prototype.isProper=function(){return this.hasIntersection()&&this._isProper};mn.prototype.setPrecisionModel=function(t){this._precisionModel=t};mn.prototype.isInteriorIntersection=function(){var t=this;if(arguments.length===0)return!!(this.isInteriorIntersection(0)||this.isInteriorIntersection(1));if(arguments.length===1){for(var n=arguments[0],r=0;r<this._result;r++)if(!(t._intPt[r].equals2D(t._inputLines[n][0])||t._intPt[r].equals2D(t._inputLines[n][1])))return!0;return!1}};mn.prototype.getIntersection=function(t){return this._intPt[t]};mn.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper};mn.prototype.hasIntersection=function(){return this._result!==mn.NO_INTERSECTION};mn.prototype.getEdgeDistance=function(t,n){var r=mn.computeEdgeDistance(this._intPt[n],this._inputLines[t][0],this._inputLines[t][1]);return r};mn.prototype.isCollinear=function(){return this._result===mn.COLLINEAR_INTERSECTION};mn.prototype.toString=function(){return Gi.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Gi.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()};mn.prototype.getEndpoint=function(t,n){return this._inputLines[t][n]};mn.prototype.isIntersection=function(t){for(var n=this,r=0;r<this._result;r++)if(n._intPt[r].equals2D(t))return!0;return!1};mn.prototype.getIntersectionAlongSegment=function(t,n){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][n]]};mn.prototype.interfaces_=function(){return[]};mn.prototype.getClass=function(){return mn};mn.computeEdgeDistance=function(t,n,r){var i=Math.abs(r.x-n.x),o=Math.abs(r.y-n.y),u=-1;if(t.equals(n))u=0;else if(t.equals(r))i>o?u=i:u=o;else{var f=Math.abs(t.x-n.x),p=Math.abs(t.y-n.y);i>o?u=f:u=p,u===0&&!t.equals(n)&&(u=Math.max(f,p))}return Se.isTrue(!(u===0&&!t.equals(n)),"Bad distance calculation"),u};mn.nonRobustComputeEdgeDistance=function(t,n,r){var i=t.x-n.x,o=t.y-n.y,u=Math.sqrt(i*i+o*o);return Se.isTrue(!(u===0&&!t.equals(n)),"Invalid distance calculation"),u};Pu.DONT_INTERSECT.get=function(){return 0};Pu.DO_INTERSECT.get=function(){return 1};Pu.COLLINEAR.get=function(){return 2};Pu.NO_INTERSECTION.get=function(){return 0};Pu.POINT_INTERSECTION.get=function(){return 1};Pu.COLLINEAR_INTERSECTION.get=function(){return 2};Object.defineProperties(mn,Pu);var Fa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isInSegmentEnvelopes=function(r){var i=new he(this._inputLines[0][0],this._inputLines[0][1]),o=new he(this._inputLines[1][0],this._inputLines[1][1]);return i.contains(r)&&o.contains(r)},t.prototype.computeIntersection=function(){if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];if(this._isProper=!1,he.intersects(i,o,r)&&Qt.orientationIndex(i,o,r)===0&&Qt.orientationIndex(o,i,r)===0)return this._isProper=!0,(r.equals(i)||r.equals(o))&&(this._isProper=!1),this._result=e.POINT_INTERSECTION,null;this._result=e.NO_INTERSECTION}else return e.prototype.computeIntersection.apply(this,arguments)},t.prototype.normalizeToMinimum=function(r,i,o,u,f){f.x=this.smallestInAbsValue(r.x,i.x,o.x,u.x),f.y=this.smallestInAbsValue(r.y,i.y,o.y,u.y),r.x-=f.x,r.y-=f.y,i.x-=f.x,i.y-=f.y,o.x-=f.x,o.y-=f.y,u.x-=f.x,u.y-=f.y},t.prototype.safeHCoordinateIntersection=function(r,i,o,u){var f=null;try{f=Bi.intersection(r,i,o,u)}catch(p){if(p instanceof ql)f=t.nearestEndpoint(r,i,o,u);else throw p}finally{}return f},t.prototype.intersection=function(r,i,o,u){var f=this.intersectionWithNormalization(r,i,o,u);return this.isInSegmentEnvelopes(f)||(f=new ct(t.nearestEndpoint(r,i,o,u))),this._precisionModel!==null&&this._precisionModel.makePrecise(f),f},t.prototype.smallestInAbsValue=function(r,i,o,u){var f=r,p=Math.abs(f);return Math.abs(i)<p&&(f=i,p=Math.abs(i)),Math.abs(o)<p&&(f=o,p=Math.abs(o)),Math.abs(u)<p&&(f=u),f},t.prototype.checkDD=function(r,i,o,u,f){var p=Nr.intersection(r,i,o,u),_=this.isInSegmentEnvelopes(p);nr.out.println("DD in env = "+_+"  --------------------- "+p),f.distance(p)>1e-4&&nr.out.println("Distance = "+f.distance(p))},t.prototype.intersectionWithNormalization=function(r,i,o,u){var f=new ct(r),p=new ct(i),_=new ct(o),y=new ct(u),C=new ct;this.normalizeToEnvCentre(f,p,_,y,C);var S=this.safeHCoordinateIntersection(f,p,_,y);return S.x+=C.x,S.y+=C.y,S},t.prototype.computeCollinearIntersection=function(r,i,o,u){var f=he.intersects(r,i,o),p=he.intersects(r,i,u),_=he.intersects(o,u,r),y=he.intersects(o,u,i);return f&&p?(this._intPt[0]=o,this._intPt[1]=u,e.COLLINEAR_INTERSECTION):_&&y?(this._intPt[0]=r,this._intPt[1]=i,e.COLLINEAR_INTERSECTION):f&&_?(this._intPt[0]=o,this._intPt[1]=r,o.equals(r)&&!p&&!y?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):f&&y?(this._intPt[0]=o,this._intPt[1]=i,o.equals(i)&&!p&&!_?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):p&&_?(this._intPt[0]=u,this._intPt[1]=r,u.equals(r)&&!f&&!y?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):p&&y?(this._intPt[0]=u,this._intPt[1]=i,u.equals(i)&&!f&&!_?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):e.NO_INTERSECTION},t.prototype.normalizeToEnvCentre=function(r,i,o,u,f){var p=r.x<i.x?r.x:i.x,_=r.y<i.y?r.y:i.y,y=r.x>i.x?r.x:i.x,C=r.y>i.y?r.y:i.y,S=o.x<u.x?o.x:u.x,k=o.y<u.y?o.y:u.y,P=o.x>u.x?o.x:u.x,R=o.y>u.y?o.y:u.y,O=p>S?p:S,H=y<P?y:P,X=_>k?_:k,U=C<R?C:R,ut=(O+H)/2,It=(X+U)/2;f.x=ut,f.y=It,r.x-=f.x,r.y-=f.y,i.x-=f.x,i.y-=f.y,o.x-=f.x,o.y-=f.y,u.x-=f.x,u.y-=f.y},t.prototype.computeIntersect=function(r,i,o,u){if(this._isProper=!1,!he.intersects(r,i,o,u))return e.NO_INTERSECTION;var f=Qt.orientationIndex(r,i,o),p=Qt.orientationIndex(r,i,u);if(f>0&&p>0||f<0&&p<0)return e.NO_INTERSECTION;var _=Qt.orientationIndex(o,u,r),y=Qt.orientationIndex(o,u,i);if(_>0&&y>0||_<0&&y<0)return e.NO_INTERSECTION;var C=f===0&&p===0&&_===0&&y===0;return C?this.computeCollinearIntersection(r,i,o,u):(f===0||p===0||_===0||y===0?(this._isProper=!1,r.equals2D(o)||r.equals2D(u)?this._intPt[0]=r:i.equals2D(o)||i.equals2D(u)?this._intPt[0]=i:f===0?this._intPt[0]=new ct(o):p===0?this._intPt[0]=new ct(u):_===0?this._intPt[0]=new ct(r):y===0&&(this._intPt[0]=new ct(i))):(this._isProper=!0,this._intPt[0]=this.intersection(r,i,o,u)),e.POINT_INTERSECTION)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.nearestEndpoint=function(r,i,o,u){var f=r,p=Qt.distancePointLine(r,o,u),_=Qt.distancePointLine(i,o,u);return _<p&&(p=_,f=i),_=Qt.distancePointLine(o,r,i),_<p&&(p=_,f=o),_=Qt.distancePointLine(u,r,i),_<p&&(p=_,f=u),f},t}(mn),pu=function(){};pu.prototype.interfaces_=function(){return[]};pu.prototype.getClass=function(){return pu};pu.orientationIndex=function(t,n,r){var i=n.x-t.x,o=n.y-t.y,u=r.x-n.x,f=r.y-n.y;return pu.signOfDet2x2(i,o,u,f)};pu.signOfDet2x2=function(t,n,r,i){var o=null,u=null,f=null;if(o=1,t===0||i===0)return n===0||r===0?0:n>0?r>0?-o:o:r>0?o:-o;if(n===0||r===0)return i>0?t>0?o:-o:t>0?-o:o;if(n>0?i>0?n<=i||(o=-o,u=t,t=r,r=u,u=n,n=i,i=u):n<=-i?(o=-o,r=-r,i=-i):(u=t,t=-r,r=u,u=n,n=-i,i=u):i>0?-n<=i?(o=-o,t=-t,n=-n):(u=-t,t=r,r=u,u=-n,n=i,i=u):n>=i?(t=-t,n=-n,r=-r,i=-i):(o=-o,u=-t,t=-r,r=u,u=-n,n=-i,i=u),t>0)if(r>0){if(!(t<=r))return o}else return o;else{if(r>0)return-o;if(t>=r)o=-o,t=-t,r=-r;else return-o}for(;;){if(f=Math.floor(r/t),r=r-f*t,i=i-f*n,i<0)return-o;if(i>n)return o;if(t>r+r){if(n<i+i)return o}else{if(n>i+i)return-o;r=t-r,i=n-i,o=-o}if(i===0)return r===0?0:-o;if(r===0||(f=Math.floor(t/r),t=t-f*r,n=n-f*i,n<0))return o;if(n>i)return-o;if(r>t+t){if(i<n+n)return-o}else{if(i>n+n)return o;t=r-t,n=i-n,o=-o}if(n===0)return t===0?0:o;if(t===0)return-o}};var hs=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};hs.prototype.countSegment=function(t,n){if(t.x<this._p.x&&n.x<this._p.x)return null;if(this._p.x===n.x&&this._p.y===n.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&n.y===this._p.y){var r=t.x,i=n.x;return r>i&&(r=n.x,i=t.x),this._p.x>=r&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&n.y<=this._p.y||n.y>this._p.y&&t.y<=this._p.y){var o=t.x-this._p.x,u=t.y-this._p.y,f=n.x-this._p.x,p=n.y-this._p.y,_=pu.signOfDet2x2(o,u,f,p);if(_===0)return this._isPointOnSegment=!0,null;p<u&&(_=-_),_>0&&this._crossingCount++}};hs.prototype.isPointInPolygon=function(){return this.getLocation()!==yt.EXTERIOR};hs.prototype.getLocation=function(){return this._isPointOnSegment?yt.BOUNDARY:this._crossingCount%2===1?yt.INTERIOR:yt.EXTERIOR};hs.prototype.isOnSegment=function(){return this._isPointOnSegment};hs.prototype.interfaces_=function(){return[]};hs.prototype.getClass=function(){return hs};hs.locatePointInRing=function(){if(arguments[0]instanceof ct&&ve(arguments[1],Ge)){for(var t=arguments[0],n=arguments[1],r=new hs(t),i=new ct,o=new ct,u=1;u<n.size();u++)if(n.getCoordinate(u,i),n.getCoordinate(u-1,o),r.countSegment(i,o),r.isOnSegment())return r.getLocation();return r.getLocation()}else if(arguments[0]instanceof ct&&arguments[1]instanceof Array){for(var f=arguments[0],p=arguments[1],_=new hs(f),y=1;y<p.length;y++){var C=p[y],S=p[y-1];if(_.countSegment(C,S),_.isOnSegment())return _.getLocation()}return _.getLocation()}};var Qt=function(){},Mu={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Qt.prototype.interfaces_=function(){return[]};Qt.prototype.getClass=function(){return Qt};Qt.orientationIndex=function(t,n,r){return Nr.orientationIndex(t,n,r)};Qt.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var n=0,r=t[0].x,i=1;i<t.length-1;i++){var o=t[i].x-r,u=t[i+1].y,f=t[i-1].y;n+=o*(f-u)}return n/2}else if(ve(arguments[0],Ge)){var p=arguments[0],_=p.size();if(_<3)return 0;var y=new ct,C=new ct,S=new ct;p.getCoordinate(0,C),p.getCoordinate(1,S);var k=C.x;S.x-=k;for(var P=0,R=1;R<_-1;R++)y.y=C.y,C.x=S.x,C.y=S.y,p.getCoordinate(R+1,S),S.x-=k,P+=C.x*(y.y-S.y);return P/2}};Qt.distanceLineLine=function(t,n,r,i){if(t.equals(n))return Qt.distancePointLine(t,r,i);if(r.equals(i))return Qt.distancePointLine(i,t,n);var o=!1;if(!he.intersects(t,n,r,i))o=!0;else{var u=(n.x-t.x)*(i.y-r.y)-(n.y-t.y)*(i.x-r.x);if(u===0)o=!0;else{var f=(t.y-r.y)*(i.x-r.x)-(t.x-r.x)*(i.y-r.y),p=(t.y-r.y)*(n.x-t.x)-(t.x-r.x)*(n.y-t.y),_=p/u,y=f/u;(y<0||y>1||_<0||_>1)&&(o=!0)}}return o?fi.min(Qt.distancePointLine(t,r,i),Qt.distancePointLine(n,r,i),Qt.distancePointLine(r,t,n),Qt.distancePointLine(i,t,n)):0};Qt.isPointInRing=function(t,n){return Qt.locatePointInRing(t,n)!==yt.EXTERIOR};Qt.computeLength=function(t){var n=t.size();if(n<=1)return 0;var r=0,i=new ct;t.getCoordinate(0,i);for(var o=i.x,u=i.y,f=1;f<n;f++){t.getCoordinate(f,i);var p=i.x,_=i.y,y=p-o,C=_-u;r+=Math.sqrt(y*y+C*C),o=p,u=_}return r};Qt.isCCW=function(t){var n=t.length-1;if(n<3)throw new dn("Ring has fewer than 4 points, so orientation cannot be determined");for(var r=t[0],i=0,o=1;o<=n;o++){var u=t[o];u.y>r.y&&(r=u,i=o)}var f=i;do f=f-1,f<0&&(f=n);while(t[f].equals2D(r)&&f!==i);var p=i;do p=(p+1)%n;while(t[p].equals2D(r)&&p!==i);var _=t[f],y=t[p];if(_.equals2D(r)||y.equals2D(r)||_.equals2D(y))return!1;var C=Qt.computeOrientation(_,r,y),S=!1;return C===0?S=_.x>y.x:S=C>0,S};Qt.locatePointInRing=function(t,n){return hs.locatePointInRing(t,n)};Qt.distancePointLinePerpendicular=function(t,n,r){var i=(r.x-n.x)*(r.x-n.x)+(r.y-n.y)*(r.y-n.y),o=((n.y-t.y)*(r.x-n.x)-(n.x-t.x)*(r.y-n.y))/i;return Math.abs(o)*Math.sqrt(i)};Qt.computeOrientation=function(t,n,r){return Qt.orientationIndex(t,n,r)};Qt.distancePointLine=function(){if(arguments.length===2){var t=arguments[0],n=arguments[1];if(n.length===0)throw new dn("Line array must contain at least one vertex");for(var r=t.distance(n[0]),i=0;i<n.length-1;i++){var o=Qt.distancePointLine(t,n[i],n[i+1]);o<r&&(r=o)}return r}else if(arguments.length===3){var u=arguments[0],f=arguments[1],p=arguments[2];if(f.x===p.x&&f.y===p.y)return u.distance(f);var _=(p.x-f.x)*(p.x-f.x)+(p.y-f.y)*(p.y-f.y),y=((u.x-f.x)*(p.x-f.x)+(u.y-f.y)*(p.y-f.y))/_;if(y<=0)return u.distance(f);if(y>=1)return u.distance(p);var C=((f.y-u.y)*(p.x-f.x)-(f.x-u.x)*(p.y-f.y))/_;return Math.abs(C)*Math.sqrt(_)}};Qt.isOnLine=function(t,n){for(var r=new Fa,i=1;i<n.length;i++){var o=n[i-1],u=n[i];if(r.computeIntersection(t,o,u),r.hasIntersection())return!0}return!1};Mu.CLOCKWISE.get=function(){return-1};Mu.RIGHT.get=function(){return Qt.CLOCKWISE};Mu.COUNTERCLOCKWISE.get=function(){return 1};Mu.LEFT.get=function(){return Qt.COUNTERCLOCKWISE};Mu.COLLINEAR.get=function(){return 0};Mu.STRAIGHT.get=function(){return Qt.COLLINEAR};Object.defineProperties(Qt,Mu);var yo=function(){};yo.prototype.filter=function(t){};yo.prototype.interfaces_=function(){return[]};yo.prototype.getClass=function(){return yo};var ye=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},Ks={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};ye.prototype.isGeometryCollection=function(){return this.getSortIndex()===ye.SORTINDEX_GEOMETRYCOLLECTION};ye.prototype.getFactory=function(){return this._factory};ye.prototype.getGeometryN=function(t){return this};ye.prototype.getArea=function(){return 0};ye.prototype.isRectangle=function(){return!1};ye.prototype.equals=function(){if(arguments[0]instanceof ye){var t=arguments[0];return t===null?!1:this.equalsTopo(t)}else if(arguments[0]instanceof Object){var n=arguments[0];if(!(n instanceof ye))return!1;var r=n;return this.equalsExact(r)}};ye.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)};ye.prototype.geometryChanged=function(){this.apply(ye.geometryChangedFilter)};ye.prototype.geometryChangedAction=function(){this._envelope=null};ye.prototype.equalsNorm=function(t){return t===null?!1:this.norm().equalsExact(t.norm())};ye.prototype.getLength=function(){return 0};ye.prototype.getNumGeometries=function(){return 1};ye.prototype.compareTo=function(){if(arguments.length===1){var t=arguments[0],n=t;return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(t)}else if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.getSortIndex()!==r.getSortIndex()?this.getSortIndex()-r.getSortIndex():this.isEmpty()&&r.isEmpty()?0:this.isEmpty()?-1:r.isEmpty()?1:this.compareToSameClass(r,i)}};ye.prototype.getUserData=function(){return this._userData};ye.prototype.getSRID=function(){return this._SRID};ye.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())};ye.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===ye.SORTINDEX_GEOMETRYCOLLECTION)throw new dn("This method does not support GeometryCollection arguments")};ye.prototype.equal=function(t,n,r){return r===0?t.equals(n):t.distance(n)<=r};ye.prototype.norm=function(){var t=this.copy();return t.normalize(),t};ye.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()};ye.prototype.getEnvelopeInternal=function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new he(this._envelope)};ye.prototype.setSRID=function(t){this._SRID=t};ye.prototype.setUserData=function(t){this._userData=t};ye.prototype.compare=function(t,n){for(var r=t.iterator(),i=n.iterator();r.hasNext()&&i.hasNext();){var o=r.next(),u=i.next(),f=o.compareTo(u);if(f!==0)return f}return r.hasNext()?1:i.hasNext()?-1:0};ye.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()};ye.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ye.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ye.SORTINDEX_MULTIPOINT||this.getSortIndex()===ye.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ye.SORTINDEX_MULTIPOLYGON};ye.prototype.interfaces_=function(){return[Fp,Ii,ki]};ye.prototype.getClass=function(){return ye};ye.hasNonEmptyElements=function(t){for(var n=0;n<t.length;n++)if(!t[n].isEmpty())return!0;return!1};ye.hasNullElements=function(t){for(var n=0;n<t.length;n++)if(t[n]===null)return!0;return!1};Ks.serialVersionUID.get=function(){return 8763622679187377e3};Ks.SORTINDEX_POINT.get=function(){return 0};Ks.SORTINDEX_MULTIPOINT.get=function(){return 1};Ks.SORTINDEX_LINESTRING.get=function(){return 2};Ks.SORTINDEX_LINEARRING.get=function(){return 3};Ks.SORTINDEX_MULTILINESTRING.get=function(){return 4};Ks.SORTINDEX_POLYGON.get=function(){return 5};Ks.SORTINDEX_MULTIPOLYGON.get=function(){return 6};Ks.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7};Ks.geometryChangedFilter.get=function(){return dm};Object.defineProperties(ye,Ks);var dm=function(){};dm.interfaces_=function(){return[yo]};dm.filter=function(t){t.geometryChangedAction()};var Fs=function(){};Fs.prototype.filter=function(t){};Fs.prototype.interfaces_=function(){return[]};Fs.prototype.getClass=function(){return Fs};var Si=function(){},Eo={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};Si.prototype.isInBoundary=function(t){};Si.prototype.interfaces_=function(){return[]};Si.prototype.getClass=function(){return Si};Eo.Mod2BoundaryNodeRule.get=function(){return Cl};Eo.EndPointBoundaryNodeRule.get=function(){return bl};Eo.MultiValentEndPointBoundaryNodeRule.get=function(){return El};Eo.MonoValentEndPointBoundaryNodeRule.get=function(){return Ll};Eo.MOD2_BOUNDARY_RULE.get=function(){return new Cl};Eo.ENDPOINT_BOUNDARY_RULE.get=function(){return new bl};Eo.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new El};Eo.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Ll};Eo.OGC_SFS_BOUNDARY_RULE.get=function(){return Si.MOD2_BOUNDARY_RULE};Object.defineProperties(Si,Eo);var Cl=function(){};Cl.prototype.isInBoundary=function(t){return t%2===1};Cl.prototype.interfaces_=function(){return[Si]};Cl.prototype.getClass=function(){return Cl};var bl=function(){};bl.prototype.isInBoundary=function(t){return t>0};bl.prototype.interfaces_=function(){return[Si]};bl.prototype.getClass=function(){return bl};var El=function(){};El.prototype.isInBoundary=function(t){return t>1};El.prototype.interfaces_=function(){return[Si]};El.prototype.getClass=function(){return El};var Ll=function(){};Ll.prototype.isInBoundary=function(t){return t===1};Ll.prototype.interfaces_=function(){return[Si]};Ll.prototype.getClass=function(){return Ll};var Bn=function(){};Bn.prototype.add=function(){};Bn.prototype.addAll=function(){};Bn.prototype.isEmpty=function(){};Bn.prototype.iterator=function(){};Bn.prototype.size=function(){};Bn.prototype.toArray=function(){};Bn.prototype.remove=function(){};function gm(e){this.message=e||""}gm.prototype=new Error;gm.prototype.name="IndexOutOfBoundsException";var Hl=function(){};Hl.prototype.hasNext=function(){};Hl.prototype.next=function(){};Hl.prototype.remove=function(){};var Fi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(){},t.prototype.set=function(){},t.prototype.isEmpty=function(){},t}(Bn);function Zl(e){this.message=e||""}Zl.prototype=new Error;Zl.prototype.name="NoSuchElementException";var $t=function(e){function t(){e.call(this),this.array_=[],arguments[0]instanceof Bn&&this.addAll(arguments[0])}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.ensureCapacity=function(){},t.prototype.interfaces_=function(){return[e,Bn]},t.prototype.add=function(r){return arguments.length===1?this.array_.push(r):this.array_.splice(arguments[0],arguments[1]),!0},t.prototype.clear=function(){this.array_=[]},t.prototype.addAll=function(r){for(var i=this,o=r.iterator();o.hasNext();)i.add(o.next());return!0},t.prototype.set=function(r,i){var o=this.array_[r];return this.array_[r]=i,o},t.prototype.iterator=function(){return new wS(this)},t.prototype.get=function(r){if(r<0||r>=this.size())throw new gm;return this.array_[r]},t.prototype.isEmpty=function(){return this.array_.length===0},t.prototype.size=function(){return this.array_.length},t.prototype.toArray=function(){for(var r=this,i=[],o=0,u=this.array_.length;o<u;o++)i.push(r.array_[o]);return i},t.prototype.remove=function(r){for(var i=this,o=!1,u=0,f=this.array_.length;u<f;u++)if(i.array_[u]===r){i.array_.splice(u,1),o=!0;break}return o},t}(Fi),wS=function(e){function t(n){e.call(this),this.arrayList_=n,this.position_=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new Zl;return this.arrayList_.get(this.position_++)},t.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},t.prototype.set=function(r){return this.arrayList_.set(this.position_-1,r)},t.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},t}(Hl),kh=function(e){function t(){if(e.call(this),arguments.length!==0){if(arguments.length===1){var r=arguments[0];this.ensureCapacity(r.length),this.add(r,!0)}else if(arguments.length===2){var i=arguments[0],o=arguments[1];this.ensureCapacity(i.length),this.add(i,o)}}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},t.prototype.getCoordinate=function(i){return this.get(i)},t.prototype.addAll=function(){var i=this;if(arguments.length===2){for(var o=arguments[0],u=arguments[1],f=!1,p=o.iterator();p.hasNext();)i.add(p.next(),u),f=!0;return f}else return e.prototype.addAll.apply(this,arguments)},t.prototype.clone=function(){for(var i=this,o=e.prototype.clone.call(this),u=0;u<this.size();u++)o.add(u,i.get(u).copy());return o},t.prototype.toCoordinateArray=function(){return this.toArray(t.coordArrayType)},t.prototype.add=function(){var i=this;if(arguments.length===1){var o=arguments[0];e.prototype.add.call(this,o)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var u=arguments[0],f=arguments[1];return this.add(u,f,!0),!0}else if(arguments[0]instanceof ct&&typeof arguments[1]=="boolean"){var p=arguments[0],_=arguments[1];if(!_&&this.size()>=1){var y=this.get(this.size()-1);if(y.equals2D(p))return null}e.prototype.add.call(this,p)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var C=arguments[0],S=arguments[1];return this.add(C,S),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var k=arguments[0],P=arguments[1],R=arguments[2];if(R)for(var O=0;O<k.length;O++)i.add(k[O],P);else for(var H=k.length-1;H>=0;H--)i.add(k[H],P);return!0}else if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof ct){var X=arguments[0],U=arguments[1],ut=arguments[2];if(!ut){var It=this.size();if(It>0){if(X>0){var ot=this.get(X-1);if(ot.equals2D(U))return null}if(X<It){var kt=this.get(X);if(kt.equals2D(U))return null}}}e.prototype.add.call(this,X,U)}}else if(arguments.length===4){var $=arguments[0],it=arguments[1],xt=arguments[2],nt=arguments[3],Et=1;xt>nt&&(Et=-1);for(var At=xt;At!==nt;At+=Et)i.add($[At],it);return!0}},t.prototype.closeRing=function(){this.size()>0&&this.add(new ct(this.get(0)),!1)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},Object.defineProperties(t,n),t}($t),Ne=function(){},Gp={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Gp.ForwardComparator.get=function(){return uh};Gp.BidirectionalComparator.get=function(){return wl};Gp.coordArrayType.get=function(){return new Array(0).fill(null)};Ne.prototype.interfaces_=function(){return[]};Ne.prototype.getClass=function(){return Ne};Ne.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))};Ne.ptNotInList=function(t,n){for(var r=0;r<t.length;r++){var i=t[r];if(Ne.indexOf(i,n)<0)return i}return null};Ne.scroll=function(t,n){var r=Ne.indexOf(n,t);if(r<0)return null;var i=new Array(t.length).fill(null);nr.arraycopy(t,r,i,0,t.length-r),nr.arraycopy(t,0,i,t.length-r,r),nr.arraycopy(i,0,t,0,t.length)};Ne.equals=function(){if(arguments.length===2){var t=arguments[0],n=arguments[1];if(t===n)return!0;if(t===null||n===null||t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(!t[r].equals(n[r]))return!1;return!0}else if(arguments.length===3){var i=arguments[0],o=arguments[1],u=arguments[2];if(i===o)return!0;if(i===null||o===null||i.length!==o.length)return!1;for(var f=0;f<i.length;f++)if(u.compare(i[f],o[f])!==0)return!1;return!0}};Ne.intersection=function(t,n){for(var r=new kh,i=0;i<t.length;i++)n.intersects(t[i])&&r.add(t[i],!0);return r.toCoordinateArray()};Ne.hasRepeatedPoints=function(t){for(var n=1;n<t.length;n++)if(t[n-1].equals(t[n]))return!0;return!1};Ne.removeRepeatedPoints=function(t){if(!Ne.hasRepeatedPoints(t))return t;var n=new kh(t,!1);return n.toCoordinateArray()};Ne.reverse=function(t){for(var n=t.length-1,r=Math.trunc(n/2),i=0;i<=r;i++){var o=t[i];t[i]=t[n-i],t[n-i]=o}};Ne.removeNull=function(t){for(var n=0,r=0;r<t.length;r++)t[r]!==null&&n++;var i=new Array(n).fill(null);if(n===0)return i;for(var o=0,u=0;u<t.length;u++)t[u]!==null&&(i[o++]=t[u]);return i};Ne.copyDeep=function(){if(arguments.length===1){for(var t=arguments[0],n=new Array(t.length).fill(null),r=0;r<t.length;r++)n[r]=new ct(t[r]);return n}else if(arguments.length===5)for(var i=arguments[0],o=arguments[1],u=arguments[2],f=arguments[3],p=arguments[4],_=0;_<p;_++)u[f+_]=new ct(i[o+_])};Ne.isEqualReversed=function(t,n){for(var r=0;r<t.length;r++){var i=t[r],o=n[t.length-r-1];if(i.compareTo(o)!==0)return!1}return!0};Ne.envelope=function(t){for(var n=new he,r=0;r<t.length;r++)n.expandToInclude(t[r]);return n};Ne.toCoordinateArray=function(t){return t.toArray(Ne.coordArrayType)};Ne.atLeastNCoordinatesOrNothing=function(t,n){return n.length>=t?n:[]};Ne.indexOf=function(t,n){for(var r=0;r<n.length;r++)if(t.equals(n[r]))return r;return-1};Ne.increasingDirection=function(t){for(var n=0;n<Math.trunc(t.length/2);n++){var r=t.length-1-n,i=t[n].compareTo(t[r]);if(i!==0)return i}return 1};Ne.compare=function(t,n){for(var r=0;r<t.length&&r<n.length;){var i=t[r].compareTo(n[r]);if(i!==0)return i;r++}return r<n.length?-1:r<t.length?1:0};Ne.minCoordinate=function(t){for(var n=null,r=0;r<t.length;r++)(n===null||n.compareTo(t[r])>0)&&(n=t[r]);return n};Ne.extract=function(t,n,r){n=fi.clamp(n,0,t.length),r=fi.clamp(r,-1,t.length);var i=r-n+1;r<0&&(i=0),n>=t.length&&(i=0),r<n&&(i=0);var o=new Array(i).fill(null);if(i===0)return o;for(var u=0,f=n;f<=r;f++)o[u++]=t[f];return o};Object.defineProperties(Ne,Gp);var uh=function(){};uh.prototype.compare=function(t,n){var r=t,i=n;return Ne.compare(r,i)};uh.prototype.interfaces_=function(){return[vl]};uh.prototype.getClass=function(){return uh};var wl=function(){};wl.prototype.compare=function(t,n){var r=t,i=n;if(r.length<i.length)return-1;if(r.length>i.length)return 1;if(r.length===0)return 0;var o=Ne.compare(r,i),u=Ne.isEqualReversed(r,i);return u?0:o};wl.prototype.OLDcompare=function(t,n){var r=t,i=n;if(r.length<i.length)return-1;if(r.length>i.length)return 1;if(r.length===0)return 0;for(var o=Ne.increasingDirection(r),u=Ne.increasingDirection(i),f=o>0?0:r.length-1,p=u>0?0:r.length-1,_=0;_<r.length;_++){var y=r[f].compareTo(i[p]);if(y!==0)return y;f+=o,p+=u}return 0};wl.prototype.interfaces_=function(){return[vl]};wl.prototype.getClass=function(){return wl};var Iu=function(){};Iu.prototype.get=function(){};Iu.prototype.put=function(){};Iu.prototype.size=function(){};Iu.prototype.values=function(){};Iu.prototype.entrySet=function(){};var SS=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Iu);function Th(e){this.message=e||""}Th.prototype=new Error;Th.prototype.name="OperationNotSupported";function Up(){}Up.prototype=new Bn;Up.prototype.contains=function(){};var mm=function(e){function t(){e.call(this),this.array_=[],arguments[0]instanceof Bn&&this.addAll(arguments[0])}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.contains=function(r){for(var i=this,o=0,u=this.array_.length;o<u;o++){var f=i.array_[o];if(f===r)return!0}return!1},t.prototype.add=function(r){return this.contains(r)?!1:(this.array_.push(r),!0)},t.prototype.addAll=function(r){for(var i=this,o=r.iterator();o.hasNext();)i.add(o.next());return!0},t.prototype.remove=function(r){throw new Error},t.prototype.size=function(){return this.array_.length},t.prototype.isEmpty=function(){return this.array_.length===0},t.prototype.toArray=function(){for(var r=this,i=[],o=0,u=this.array_.length;o<u;o++)i.push(r.array_[o]);return i},t.prototype.iterator=function(){return new PS(this)},t}(Up),PS=function(e){function t(n){e.call(this),this.hashSet_=n,this.position_=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new Zl;return this.hashSet_.array_[this.position_++]},t.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},t.prototype.remove=function(){throw new Th},t}(Hl),lo=0,ga=1;function h0(e){return e===null?lo:e.color}function rn(e){return e===null?null:e.parent}function so(e,t){e!==null&&(e.color=t)}function lg(e){return e===null?null:e.left}function f0(e){return e===null?null:e.right}function pr(){this.root_=null,this.size_=0}pr.prototype=new SS;pr.prototype.get=function(e){for(var t=this.root_;t!==null;){var n=e.compareTo(t.key);if(n<0)t=t.left;else if(n>0)t=t.right;else return t.value}return null};pr.prototype.put=function(e,t){if(this.root_===null)return this.root_={key:e,value:t,left:null,right:null,parent:null,color:lo,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n=this.root_,r,i;do if(r=n,i=e.compareTo(n.key),i<0)n=n.left;else if(i>0)n=n.right;else{var o=n.value;return n.value=t,o}while(n!==null);var u={key:e,left:null,right:null,value:t,parent:r,color:lo,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?r.left=u:r.right=u,this.fixAfterInsertion(u),this.size_++,null};pr.prototype.fixAfterInsertion=function(e){var t=this;for(e.color=ga;e!=null&&e!==this.root_&&e.parent.color===ga;)if(rn(e)===lg(rn(rn(e)))){var n=f0(rn(rn(e)));h0(n)===ga?(so(rn(e),lo),so(n,lo),so(rn(rn(e)),ga),e=rn(rn(e))):(e===f0(rn(e))&&(e=rn(e),t.rotateLeft(e)),so(rn(e),lo),so(rn(rn(e)),ga),t.rotateRight(rn(rn(e))))}else{var r=lg(rn(rn(e)));h0(r)===ga?(so(rn(e),lo),so(r,lo),so(rn(rn(e)),ga),e=rn(rn(e))):(e===lg(rn(e))&&(e=rn(e),t.rotateRight(e)),so(rn(e),lo),so(rn(rn(e)),ga),t.rotateLeft(rn(rn(e))))}this.root_.color=lo};pr.prototype.values=function(){var e=new $t,t=this.getFirstEntry();if(t!==null)for(e.add(t.value);(t=pr.successor(t))!==null;)e.add(t.value);return e};pr.prototype.entrySet=function(){var e=new mm,t=this.getFirstEntry();if(t!==null)for(e.add(t);(t=pr.successor(t))!==null;)e.add(t);return e};pr.prototype.rotateLeft=function(e){if(e!=null){var t=e.right;e.right=t.left,t.left!=null&&(t.left.parent=e),t.parent=e.parent,e.parent===null?this.root_=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}};pr.prototype.rotateRight=function(e){if(e!=null){var t=e.left;e.left=t.right,t.right!=null&&(t.right.parent=e),t.parent=e.parent,e.parent===null?this.root_=t:e.parent.right===e?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}};pr.prototype.getFirstEntry=function(){var e=this.root_;if(e!=null)for(;e.left!=null;)e=e.left;return e};pr.successor=function(e){if(e===null)return null;if(e.right!==null){for(var t=e.right;t.left!==null;)t=t.left;return t}else{for(var n=e.parent,r=e;n!==null&&r===n.right;)r=n,n=n.parent;return n}};pr.prototype.size=function(){return this.size_};var lh=function(){};lh.prototype.interfaces_=function(){return[]};lh.prototype.getClass=function(){return lh};function Hv(){}Hv.prototype=new Up;function gs(){this.array_=[],arguments[0]instanceof Bn&&this.addAll(arguments[0])}gs.prototype=new Hv;gs.prototype.contains=function(e){for(var t=this,n=0,r=this.array_.length;n<r;n++){var i=t.array_[n];if(i.compareTo(e)===0)return!0}return!1};gs.prototype.add=function(e){var t=this;if(this.contains(e))return!1;for(var n=0,r=this.array_.length;n<r;n++){var i=t.array_[n];if(i.compareTo(e)===1)return t.array_.splice(n,0,e),!0}return this.array_.push(e),!0};gs.prototype.addAll=function(e){for(var t=this,n=e.iterator();n.hasNext();)t.add(n.next());return!0};gs.prototype.remove=function(e){throw new Th};gs.prototype.size=function(){return this.array_.length};gs.prototype.isEmpty=function(){return this.array_.length===0};gs.prototype.toArray=function(){for(var e=this,t=[],n=0,r=this.array_.length;n<r;n++)t.push(e.array_[n]);return t};gs.prototype.iterator=function(){return new Vp(this)};var Vp=function(e){this.treeSet_=e,this.position_=0};Vp.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new Zl;return this.treeSet_.array_[this.position_++]};Vp.prototype.hasNext=function(){return this.position_<this.treeSet_.size()};Vp.prototype.remove=function(){throw new Th};var La=function(){};La.sort=function(){var t=arguments[0],n,r,i,o;if(arguments.length===1)o=function(f,p){return f.compareTo(p)},t.sort(o);else if(arguments.length===2)i=arguments[1],o=function(f,p){return i.compare(f,p)},t.sort(o);else if(arguments.length===3){r=t.slice(arguments[1],arguments[2]),r.sort();var u=t.slice(0,arguments[1]).concat(r,t.slice(arguments[2],t.length));for(t.splice(0,t.length),n=0;n<u.length;n++)t.push(u[n])}else if(arguments.length===4)for(r=t.slice(arguments[1],arguments[2]),i=arguments[3],o=function(f,p){return i.compare(f,p)},r.sort(o),u=t.slice(0,arguments[1]).concat(r,t.slice(arguments[2],t.length)),t.splice(0,t.length),n=0;n<u.length;n++)t.push(u[n])};La.asList=function(t){for(var n=new $t,r=0,i=t.length;r<i;r++)n.add(t[r]);return n};var Ue=function(){},$i={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};$i.P.get=function(){return 0};$i.L.get=function(){return 1};$i.A.get=function(){return 2};$i.FALSE.get=function(){return-1};$i.TRUE.get=function(){return-2};$i.DONTCARE.get=function(){return-3};$i.SYM_FALSE.get=function(){return"F"};$i.SYM_TRUE.get=function(){return"T"};$i.SYM_DONTCARE.get=function(){return"*"};$i.SYM_P.get=function(){return"0"};$i.SYM_L.get=function(){return"1"};$i.SYM_A.get=function(){return"2"};Ue.prototype.interfaces_=function(){return[]};Ue.prototype.getClass=function(){return Ue};Ue.toDimensionSymbol=function(t){switch(t){case Ue.FALSE:return Ue.SYM_FALSE;case Ue.TRUE:return Ue.SYM_TRUE;case Ue.DONTCARE:return Ue.SYM_DONTCARE;case Ue.P:return Ue.SYM_P;case Ue.L:return Ue.SYM_L;case Ue.A:return Ue.SYM_A}throw new dn("Unknown dimension value: "+t)};Ue.toDimensionValue=function(t){switch(ah.toUpperCase(t)){case Ue.SYM_FALSE:return Ue.FALSE;case Ue.SYM_TRUE:return Ue.TRUE;case Ue.SYM_DONTCARE:return Ue.DONTCARE;case Ue.SYM_P:return Ue.P;case Ue.SYM_L:return Ue.L;case Ue.SYM_A:return Ue.A}throw new dn("Unknown dimension symbol: "+t)};Object.defineProperties(Ue,$i);var ms=function(){};ms.prototype.filter=function(t){};ms.prototype.interfaces_=function(){return[]};ms.prototype.getClass=function(){return ms};var Ui=function(){};Ui.prototype.filter=function(t,n){};Ui.prototype.isDone=function(){};Ui.prototype.isGeometryChanged=function(){};Ui.prototype.interfaces_=function(){return[]};Ui.prototype.getClass=function(){return Ui};var wr=function(e){function t(r,i){if(e.call(this,i),this._geometries=r||[],e.hasNullElements(this._geometries))throw new dn("geometries must not contain null elements")}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){for(var i=this,o=new he,u=0;u<this._geometries.length;u++)o.expandToInclude(i._geometries[u].getEnvelopeInternal());return o},t.prototype.getGeometryN=function(i){return this._geometries[i]},t.prototype.getSortIndex=function(){return e.SORTINDEX_GEOMETRYCOLLECTION},t.prototype.getCoordinates=function(){for(var i=this,o=new Array(this.getNumPoints()).fill(null),u=-1,f=0;f<this._geometries.length;f++)for(var p=i._geometries[f].getCoordinates(),_=0;_<p.length;_++)u++,o[u]=p[_];return o},t.prototype.getArea=function(){for(var i=this,o=0,u=0;u<this._geometries.length;u++)o+=i._geometries[u].getArea();return o},t.prototype.equalsExact=function(){var i=this;if(arguments.length===2){var o=arguments[0],u=arguments[1];if(!this.isEquivalentClass(o))return!1;var f=o;if(this._geometries.length!==f._geometries.length)return!1;for(var p=0;p<this._geometries.length;p++)if(!i._geometries[p].equalsExact(f._geometries[p],u))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var i=this,o=0;o<this._geometries.length;o++)i._geometries[o].normalize();La.sort(this._geometries)},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},t.prototype.getBoundaryDimension=function(){for(var i=this,o=Ue.FALSE,u=0;u<this._geometries.length;u++)o=Math.max(o,i._geometries[u].getBoundaryDimension());return o},t.prototype.getDimension=function(){for(var i=this,o=Ue.FALSE,u=0;u<this._geometries.length;u++)o=Math.max(o,i._geometries[u].getDimension());return o},t.prototype.getLength=function(){for(var i=this,o=0,u=0;u<this._geometries.length;u++)o+=i._geometries[u].getLength();return o},t.prototype.getNumPoints=function(){for(var i=this,o=0,u=0;u<this._geometries.length;u++)o+=i._geometries[u].getNumPoints();return o},t.prototype.getNumGeometries=function(){return this._geometries.length},t.prototype.reverse=function(){for(var i=this,o=this._geometries.length,u=new Array(o).fill(null),f=0;f<this._geometries.length;f++)u[f]=i._geometries[f].reverse();return this.getFactory().createGeometryCollection(u)},t.prototype.compareToSameClass=function(){var i=this;if(arguments.length===1){var o=arguments[0],u=new gs(La.asList(this._geometries)),f=new gs(La.asList(o._geometries));return this.compare(u,f)}else if(arguments.length===2){for(var p=arguments[0],_=arguments[1],y=p,C=this.getNumGeometries(),S=y.getNumGeometries(),k=0;k<C&&k<S;){var P=i.getGeometryN(k),R=y.getGeometryN(k),O=P.compareToSameClass(R,_);if(O!==0)return O;k++}return k<C?1:k<S?-1:0}},t.prototype.apply=function(){var i=this;if(ve(arguments[0],Fs))for(var o=arguments[0],u=0;u<this._geometries.length;u++)i._geometries[u].apply(o);else if(ve(arguments[0],Ui)){var f=arguments[0];if(this._geometries.length===0)return null;for(var p=0;p<this._geometries.length&&(i._geometries[p].apply(f),!f.isDone());p++);f.isGeometryChanged()&&this.geometryChanged()}else if(ve(arguments[0],ms)){var _=arguments[0];_.filter(this);for(var y=0;y<this._geometries.length;y++)i._geometries[y].apply(_)}else if(ve(arguments[0],yo)){var C=arguments[0];C.filter(this);for(var S=0;S<this._geometries.length;S++)i._geometries[S].apply(C)}},t.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),Se.shouldNeverReachHere(),null},t.prototype.clone=function(){var i=this,o=e.prototype.clone.call(this);o._geometries=new Array(this._geometries.length).fill(null);for(var u=0;u<this._geometries.length;u++)o._geometries[u]=i._geometries[u].clone();return o},t.prototype.getGeometryType=function(){return"GeometryCollection"},t.prototype.copy=function(){for(var i=this,o=new Array(this._geometries.length).fill(null),u=0;u<o.length;u++)o[u]=i._geometries[u].copy();return new t(o,this._factory)},t.prototype.isEmpty=function(){for(var i=this,o=0;o<this._geometries.length;o++)if(!i._geometries[o].isEmpty())return!1;return!0},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-5694727726395021e3},Object.defineProperties(t,n),t}(ye),Sa=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return ye.SORTINDEX_MULTILINESTRING},t.prototype.equalsExact=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return this.isEquivalentClass(i)?e.prototype.equalsExact.call(this,i,o):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?Ue.FALSE:0},t.prototype.isClosed=function(){var i=this;if(this.isEmpty())return!1;for(var o=0;o<this._geometries.length;o++)if(!i._geometries[o].isClosed())return!1;return!0},t.prototype.getDimension=function(){return 1},t.prototype.reverse=function(){for(var i=this,o=this._geometries.length,u=new Array(o).fill(null),f=0;f<this._geometries.length;f++)u[o-1-f]=i._geometries[f].reverse();return this.getFactory().createMultiLineString(u)},t.prototype.getBoundary=function(){return new Ei(this).getBoundary()},t.prototype.getGeometryType=function(){return"MultiLineString"},t.prototype.copy=function(){for(var i=this,o=new Array(this._geometries.length).fill(null),u=0;u<o.length;u++)o[u]=i._geometries[u].copy();return new t(o,this._factory)},t.prototype.interfaces_=function(){return[lh]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 8166665132445434e3},Object.defineProperties(t,n),t}(wr),Ei=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,arguments.length===1){var t=arguments[0],n=Si.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=n}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this._geom=r,this._geomFact=r.getFactory(),this._bnRule=i}};Ei.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var n=this.computeBoundaryCoordinates(t);return n.length===1?this._geomFact.createPoint(n[0]):this._geomFact.createMultiPointFromCoords(n)};Ei.prototype.getBoundary=function(){return this._geom instanceof Cn?this.boundaryLineString(this._geom):this._geom instanceof Sa?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()};Ei.prototype.boundaryLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();if(t.isClosed()){var n=this._bnRule.isInBoundary(2);return n?t.getStartPoint():this._geomFact.createMultiPoint()}return this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])};Ei.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()};Ei.prototype.computeBoundaryCoordinates=function(t){var n=this,r=new $t;this._endpointMap=new pr;for(var i=0;i<t.getNumGeometries();i++){var o=t.getGeometryN(i);o.getNumPoints()!==0&&(n.addEndpoint(o.getCoordinateN(0)),n.addEndpoint(o.getCoordinateN(o.getNumPoints()-1)))}for(var u=this._endpointMap.entrySet().iterator();u.hasNext();){var f=u.next(),p=f.getValue(),_=p.count;n._bnRule.isInBoundary(_)&&r.add(f.getKey())}return Ne.toCoordinateArray(r)};Ei.prototype.addEndpoint=function(t){var n=this._endpointMap.get(t);n===null&&(n=new sp,this._endpointMap.put(t,n)),n.count++};Ei.prototype.interfaces_=function(){return[]};Ei.prototype.getClass=function(){return Ei};Ei.getBoundary=function(){if(arguments.length===1){var t=arguments[0],n=new Ei(t);return n.getBoundary()}else if(arguments.length===2){var r=arguments[0],i=arguments[1],o=new Ei(r,i);return o.getBoundary()}};var sp=function(){this.count=null};sp.prototype.interfaces_=function(){return[]};sp.prototype.getClass=function(){return sp};function MS(){}function IS(){}var kS=function(){};function TS(){}function AS(){}function DS(){}var Li=function(){},_m={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Li.prototype.interfaces_=function(){return[]};Li.prototype.getClass=function(){return Li};Li.chars=function(t,n){for(var r=new Array(n).fill(null),i=0;i<n;i++)r[i]=t;return String(r)};Li.getStackTrace=function(){if(arguments.length===1){var t=arguments[0],n=new TS,r=new MS;return t.printStackTrace(r),n.toString()}else if(arguments.length===2){var i=arguments[0],o=arguments[1],u="";new IS(Li.getStackTrace(i));for(var f=new DS,p=0;p<o;p++)try{u+=f.readLine()+Li.NEWLINE}catch(_){if(_ instanceof AS)Se.shouldNeverReachHere();else throw _}finally{}return u}};Li.split=function(t,n){for(var r=n.length,i=new $t,o=""+t,u=o.indexOf(n);u>=0;){var f=o.substring(0,u);i.add(f),o=o.substring(u+r),u=o.indexOf(n)}o.length>0&&i.add(o);for(var p=new Array(i.size()).fill(null),_=0;_<p.length;_++)p[_]=i.get(_);return p};Li.toString=function(){if(arguments.length===1){var t=arguments[0];return Li.SIMPLE_ORDINATE_FORMAT.format(t)}};Li.spaces=function(t){return Li.chars(" ",t)};_m.NEWLINE.get=function(){return nr.getProperty("line.separator")};_m.SIMPLE_ORDINATE_FORMAT.get=function(){return new kS};Object.defineProperties(Li,_m);var Pn=function(){};Pn.prototype.interfaces_=function(){return[]};Pn.prototype.getClass=function(){return Pn};Pn.copyCoord=function(t,n,r,i){for(var o=Math.min(t.getDimension(),r.getDimension()),u=0;u<o;u++)r.setOrdinate(i,u,t.getOrdinate(n,u))};Pn.isRing=function(t){var n=t.size();return n===0?!0:n<=3?!1:t.getOrdinate(0,Ge.X)===t.getOrdinate(n-1,Ge.X)&&t.getOrdinate(0,Ge.Y)===t.getOrdinate(n-1,Ge.Y)};Pn.isEqual=function(t,n){var r=t.size(),i=n.size();if(r!==i)return!1;for(var o=Math.min(t.getDimension(),n.getDimension()),u=0;u<r;u++)for(var f=0;f<o;f++){var p=t.getOrdinate(u,f),_=n.getOrdinate(u,f);if(t.getOrdinate(u,f)!==n.getOrdinate(u,f)&&!(be.isNaN(p)&&be.isNaN(_)))return!1}return!0};Pn.extend=function(t,n,r){var i=t.create(r,n.getDimension()),o=n.size();if(Pn.copy(n,0,i,0,o),o>0)for(var u=o;u<r;u++)Pn.copy(n,o-1,i,u,1);return i};Pn.reverse=function(t){for(var n=t.size()-1,r=Math.trunc(n/2),i=0;i<=r;i++)Pn.swap(t,i,n-i)};Pn.swap=function(t,n,r){if(n===r)return null;for(var i=0;i<t.getDimension();i++){var o=t.getOrdinate(n,i);t.setOrdinate(n,i,t.getOrdinate(r,i)),t.setOrdinate(r,i,o)}};Pn.copy=function(t,n,r,i,o){for(var u=0;u<o;u++)Pn.copyCoord(t,n+u,r,i+u)};Pn.toString=function(){if(arguments.length===1){var t=arguments[0],n=t.size();if(n===0)return"()";var r=t.getDimension(),i=new Ls;i.append("(");for(var o=0;o<n;o++){o>0&&i.append(" ");for(var u=0;u<r;u++)u>0&&i.append(","),i.append(Li.toString(t.getOrdinate(o,u)))}return i.append(")"),i.toString()}};Pn.ensureValidRing=function(t,n){var r=n.size();if(r===0)return n;if(r<=3)return Pn.createClosedRing(t,n,4);var i=n.getOrdinate(0,Ge.X)===n.getOrdinate(r-1,Ge.X)&&n.getOrdinate(0,Ge.Y)===n.getOrdinate(r-1,Ge.Y);return i?n:Pn.createClosedRing(t,n,r+1)};Pn.createClosedRing=function(t,n,r){var i=t.create(r,n.getDimension()),o=n.size();Pn.copy(n,0,i,0,o);for(var u=o;u<r;u++)Pn.copy(n,0,i,u,1);return i};var Cn=function(e){function t(r,i){e.call(this,i),this._points=null,this.init(r)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new he:this._points.expandEnvelope(new he)},t.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},t.prototype.getSortIndex=function(){return e.SORTINDEX_LINESTRING},t.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},t.prototype.equalsExact=function(){var i=this;if(arguments.length===2){var o=arguments[0],u=arguments[1];if(!this.isEquivalentClass(o))return!1;var f=o;if(this._points.size()!==f._points.size())return!1;for(var p=0;p<this._points.size();p++)if(!i.equal(i._points.getCoordinate(p),f._points.getCoordinate(p),u))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var i=this,o=0;o<Math.trunc(this._points.size()/2);o++){var u=i._points.size()-1-o;if(!i._points.getCoordinate(o).equals(i._points.getCoordinate(u)))return i._points.getCoordinate(o).compareTo(i._points.getCoordinate(u))>0&&Pn.reverse(i._points),null}},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?Ue.FALSE:0},t.prototype.isClosed=function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},t.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},t.prototype.getDimension=function(){return 1},t.prototype.getLength=function(){return Qt.computeLength(this._points)},t.prototype.getNumPoints=function(){return this._points.size()},t.prototype.reverse=function(){var i=this._points.copy();Pn.reverse(i);var o=this.getFactory().createLineString(i);return o},t.prototype.compareToSameClass=function(){var i=this;if(arguments.length===1){for(var o=arguments[0],u=o,f=0,p=0;f<this._points.size()&&p<u._points.size();){var _=i._points.getCoordinate(f).compareTo(u._points.getCoordinate(p));if(_!==0)return _;f++,p++}return f<this._points.size()?1:p<u._points.size()?-1:0}else if(arguments.length===2){var y=arguments[0],C=arguments[1],S=y;return C.compare(this._points,S._points)}},t.prototype.apply=function(){var i=this;if(ve(arguments[0],Fs))for(var o=arguments[0],u=0;u<this._points.size();u++)o.filter(i._points.getCoordinate(u));else if(ve(arguments[0],Ui)){var f=arguments[0];if(this._points.size()===0)return null;for(var p=0;p<this._points.size()&&(f.filter(i._points,p),!f.isDone());p++);f.isGeometryChanged()&&this.geometryChanged()}else if(ve(arguments[0],ms)){var _=arguments[0];_.filter(this)}else if(ve(arguments[0],yo)){var y=arguments[0];y.filter(this)}},t.prototype.getBoundary=function(){return new Ei(this).getBoundary()},t.prototype.isEquivalentClass=function(i){return i instanceof t},t.prototype.clone=function(){var i=e.prototype.clone.call(this);return i._points=this._points.clone(),i},t.prototype.getCoordinateN=function(i){return this._points.getCoordinate(i)},t.prototype.getGeometryType=function(){return"LineString"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._points},t.prototype.isEmpty=function(){return this._points.size()===0},t.prototype.init=function(i){if(i===null&&(i=this.getFactory().getCoordinateSequenceFactory().create([])),i.size()===1)throw new dn("Invalid number of points in LineString (found "+i.size()+" - must be 0 or >= 2)");this._points=i},t.prototype.isCoordinate=function(i){for(var o=this,u=0;u<this._points.size();u++)if(o._points.getCoordinate(u).equals(i))return!0;return!1},t.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},t.prototype.getPointN=function(i){return this.getFactory().createPoint(this._points.getCoordinate(i))},t.prototype.interfaces_=function(){return[lh]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(t,n),t}(ye),ch=function(){};ch.prototype.interfaces_=function(){return[]};ch.prototype.getClass=function(){return ch};var $r=function(e){function t(r,i){e.call(this,i),this._coordinates=r||null,this.init(this._coordinates)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new he;var i=new he;return i.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),i},t.prototype.getSortIndex=function(){return e.SORTINDEX_POINT},t.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},t.prototype.equalsExact=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return this.isEquivalentClass(i)?this.isEmpty()&&i.isEmpty()?!0:this.isEmpty()!==i.isEmpty()?!1:this.equal(i.getCoordinate(),this.getCoordinate(),o):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){},t.prototype.getCoordinate=function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null},t.prototype.getBoundaryDimension=function(){return Ue.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getNumPoints=function(){return this.isEmpty()?0:1},t.prototype.reverse=function(){return this.copy()},t.prototype.getX=function(){if(this.getCoordinate()===null)throw new Error("getX called on empty Point");return this.getCoordinate().x},t.prototype.compareToSameClass=function(){if(arguments.length===1){var i=arguments[0],o=i;return this.getCoordinate().compareTo(o.getCoordinate())}else if(arguments.length===2){var u=arguments[0],f=arguments[1],p=u;return f.compare(this._coordinates,p._coordinates)}},t.prototype.apply=function(){if(ve(arguments[0],Fs)){var i=arguments[0];if(this.isEmpty())return null;i.filter(this.getCoordinate())}else if(ve(arguments[0],Ui)){var o=arguments[0];if(this.isEmpty())return null;o.filter(this._coordinates,0),o.isGeometryChanged()&&this.geometryChanged()}else if(ve(arguments[0],ms)){var u=arguments[0];u.filter(this)}else if(ve(arguments[0],yo)){var f=arguments[0];f.filter(this)}},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.clone=function(){var i=e.prototype.clone.call(this);return i._coordinates=this._coordinates.clone(),i},t.prototype.getGeometryType=function(){return"Point"},t.prototype.copy=function(){return new t(this._coordinates.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._coordinates},t.prototype.getY=function(){if(this.getCoordinate()===null)throw new Error("getY called on empty Point");return this.getCoordinate().y},t.prototype.isEmpty=function(){return this._coordinates.size()===0},t.prototype.init=function(i){i===null&&(i=this.getFactory().getCoordinateSequenceFactory().create([])),Se.isTrue(i.size()<=1),this._coordinates=i},t.prototype.isSimple=function(){return!0},t.prototype.interfaces_=function(){return[ch]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 4902022702746615e3},Object.defineProperties(t,n),t}(ye),Zo=function(){};Zo.prototype.interfaces_=function(){return[]};Zo.prototype.getClass=function(){return Zo};var Un=function(e){function t(r,i,o){if(e.call(this,o),this._shell=null,this._holes=null,r===null&&(r=this.getFactory().createLinearRing()),i===null&&(i=[]),e.hasNullElements(i))throw new dn("holes must not contain null elements");if(r.isEmpty()&&e.hasNonEmptyElements(i))throw new dn("shell is empty but holes are not");this._shell=r,this._holes=i}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},t.prototype.getSortIndex=function(){return e.SORTINDEX_POLYGON},t.prototype.getCoordinates=function(){var i=this;if(this.isEmpty())return[];for(var o=new Array(this.getNumPoints()).fill(null),u=-1,f=this._shell.getCoordinates(),p=0;p<f.length;p++)u++,o[u]=f[p];for(var _=0;_<this._holes.length;_++)for(var y=i._holes[_].getCoordinates(),C=0;C<y.length;C++)u++,o[u]=y[C];return o},t.prototype.getArea=function(){var i=this,o=0;o+=Math.abs(Qt.signedArea(this._shell.getCoordinateSequence()));for(var u=0;u<this._holes.length;u++)o-=Math.abs(Qt.signedArea(i._holes[u].getCoordinateSequence()));return o},t.prototype.isRectangle=function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var i=this._shell.getCoordinateSequence(),o=this.getEnvelopeInternal(),u=0;u<5;u++){var f=i.getX(u);if(!(f===o.getMinX()||f===o.getMaxX()))return!1;var p=i.getY(u);if(!(p===o.getMinY()||p===o.getMaxY()))return!1}for(var _=i.getX(0),y=i.getY(0),C=1;C<=4;C++){var S=i.getX(C),k=i.getY(C),P=S!==_,R=k!==y;if(P===R)return!1;_=S,y=k}return!0},t.prototype.equalsExact=function(){var i=this;if(arguments.length===2){var o=arguments[0],u=arguments[1];if(!this.isEquivalentClass(o))return!1;var f=o,p=this._shell,_=f._shell;if(!p.equalsExact(_,u)||this._holes.length!==f._holes.length)return!1;for(var y=0;y<this._holes.length;y++)if(!i._holes[y].equalsExact(f._holes[y],u))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){var i=this;if(arguments.length===0){this.normalize(this._shell,!0);for(var o=0;o<this._holes.length;o++)i.normalize(i._holes[o],!1);La.sort(this._holes)}else if(arguments.length===2){var u=arguments[0],f=arguments[1];if(u.isEmpty())return null;var p=new Array(u.getCoordinates().length-1).fill(null);nr.arraycopy(u.getCoordinates(),0,p,0,p.length);var _=Ne.minCoordinate(u.getCoordinates());Ne.scroll(p,_),nr.arraycopy(p,0,u.getCoordinates(),0,p.length),u.getCoordinates()[p.length]=p[0],Qt.isCCW(u.getCoordinates())===f&&Ne.reverse(u.getCoordinates())}},t.prototype.getCoordinate=function(){return this._shell.getCoordinate()},t.prototype.getNumInteriorRing=function(){return this._holes.length},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.getLength=function(){var i=this,o=0;o+=this._shell.getLength();for(var u=0;u<this._holes.length;u++)o+=i._holes[u].getLength();return o},t.prototype.getNumPoints=function(){for(var i=this,o=this._shell.getNumPoints(),u=0;u<this._holes.length;u++)o+=i._holes[u].getNumPoints();return o},t.prototype.reverse=function(){var i=this,o=this.copy();o._shell=this._shell.copy().reverse(),o._holes=new Array(this._holes.length).fill(null);for(var u=0;u<this._holes.length;u++)o._holes[u]=i._holes[u].copy().reverse();return o},t.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},t.prototype.compareToSameClass=function(){var i=this;if(arguments.length===1){var o=arguments[0],u=this._shell,f=o._shell;return u.compareToSameClass(f)}else if(arguments.length===2){var p=arguments[0],_=arguments[1],y=p,C=this._shell,S=y._shell,k=C.compareToSameClass(S,_);if(k!==0)return k;for(var P=this.getNumInteriorRing(),R=y.getNumInteriorRing(),O=0;O<P&&O<R;){var H=i.getInteriorRingN(O),X=y.getInteriorRingN(O),U=H.compareToSameClass(X,_);if(U!==0)return U;O++}return O<P?1:O<R?-1:0}},t.prototype.apply=function(i){var o=this;if(ve(i,Fs)){this._shell.apply(i);for(var u=0;u<this._holes.length;u++)o._holes[u].apply(i)}else if(ve(i,Ui)){if(this._shell.apply(i),!i.isDone())for(var f=0;f<this._holes.length&&(o._holes[f].apply(i),!i.isDone());f++);i.isGeometryChanged()&&this.geometryChanged()}else if(ve(i,ms))i.filter(this);else if(ve(i,yo)){i.filter(this),this._shell.apply(i);for(var p=0;p<this._holes.length;p++)o._holes[p].apply(i)}},t.prototype.getBoundary=function(){var i=this;if(this.isEmpty())return this.getFactory().createMultiLineString();var o=new Array(this._holes.length+1).fill(null);o[0]=this._shell;for(var u=0;u<this._holes.length;u++)o[u+1]=i._holes[u];return o.length<=1?this.getFactory().createLinearRing(o[0].getCoordinateSequence()):this.getFactory().createMultiLineString(o)},t.prototype.clone=function(){var i=this,o=e.prototype.clone.call(this);o._shell=this._shell.clone(),o._holes=new Array(this._holes.length).fill(null);for(var u=0;u<this._holes.length;u++)o._holes[u]=i._holes[u].clone();return o},t.prototype.getGeometryType=function(){return"Polygon"},t.prototype.copy=function(){for(var i=this,o=this._shell.copy(),u=new Array(this._holes.length).fill(null),f=0;f<u.length;f++)u[f]=i._holes[f].copy();return new t(o,u,this._factory)},t.prototype.getExteriorRing=function(){return this._shell},t.prototype.isEmpty=function(){return this._shell.isEmpty()},t.prototype.getInteriorRingN=function(i){return this._holes[i]},t.prototype.interfaces_=function(){return[Zo]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(t,n),t}(ye),Sl=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return ye.SORTINDEX_MULTIPOINT},t.prototype.isValid=function(){return!0},t.prototype.equalsExact=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return this.isEquivalentClass(i)?e.prototype.equalsExact.call(this,i,o):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getCoordinate=function(){if(arguments.length===1){var i=arguments[0];return this._geometries[i].getCoordinate()}else return e.prototype.getCoordinate.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return Ue.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.getGeometryType=function(){return"MultiPoint"},t.prototype.copy=function(){for(var i=this,o=new Array(this._geometries.length).fill(null),u=0;u<o.length;u++)o[u]=i._geometries[u].copy();return new t(o,this._factory)},t.prototype.interfaces_=function(){return[ch]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-8048474874175356e3},Object.defineProperties(t,n),t}(wr),zs=function(e){function t(r,i){r instanceof ct&&i instanceof De&&(r=i.getCoordinateSequenceFactory().create(r)),e.call(this,r,i),this.validateConstruction()}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return ye.SORTINDEX_LINEARRING},t.prototype.getBoundaryDimension=function(){return Ue.FALSE},t.prototype.isClosed=function(){return this.isEmpty()?!0:e.prototype.isClosed.call(this)},t.prototype.reverse=function(){var i=this._points.copy();Pn.reverse(i);var o=this.getFactory().createLinearRing(i);return o},t.prototype.validateConstruction=function(){if(!this.isEmpty()&&!e.prototype.isClosed.call(this))throw new dn("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new dn("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},t.prototype.getGeometryType=function(){return"LinearRing"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(t,n),t}(Cn),Rs=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return ye.SORTINDEX_MULTIPOLYGON},t.prototype.equalsExact=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return this.isEquivalentClass(i)?e.prototype.equalsExact.call(this,i,o):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.reverse=function(){for(var i=this,o=this._geometries.length,u=new Array(o).fill(null),f=0;f<this._geometries.length;f++)u[f]=i._geometries[f].reverse();return this.getFactory().createMultiPolygon(u)},t.prototype.getBoundary=function(){var i=this;if(this.isEmpty())return this.getFactory().createMultiLineString();for(var o=new $t,u=0;u<this._geometries.length;u++)for(var f=i._geometries[u],p=f.getBoundary(),_=0;_<p.getNumGeometries();_++)o.add(p.getGeometryN(_));var y=new Array(o.size()).fill(null);return this.getFactory().createMultiLineString(o.toArray(y))},t.prototype.getGeometryType=function(){return"MultiPolygon"},t.prototype.copy=function(){for(var i=this,o=new Array(this._geometries.length).fill(null),u=0;u<o.length;u++)o[u]=i._geometries[u].copy();return new t(o,this._factory)},t.prototype.interfaces_=function(){return[Zo]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(t,n),t}(wr),Pi=function(t){this._factory=t||null,this._isUserDataCopied=!1},jp={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};Pi.prototype.setCopyUserData=function(t){this._isUserDataCopied=t};Pi.prototype.edit=function(t,n){if(t===null)return null;var r=this.editInternal(t,n);return this._isUserDataCopied&&r.setUserData(t.getUserData()),r};Pi.prototype.editInternal=function(t,n){return this._factory===null&&(this._factory=t.getFactory()),t instanceof wr?this.editGeometryCollection(t,n):t instanceof Un?this.editPolygon(t,n):t instanceof $r?n.edit(t,this._factory):t instanceof Cn?n.edit(t,this._factory):(Se.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)};Pi.prototype.editGeometryCollection=function(t,n){for(var r=this,i=n.edit(t,this._factory),o=new $t,u=0;u<i.getNumGeometries();u++){var f=r.edit(i.getGeometryN(u),n);f===null||f.isEmpty()||o.add(f)}return i.getClass()===Sl?this._factory.createMultiPoint(o.toArray([])):i.getClass()===Sa?this._factory.createMultiLineString(o.toArray([])):i.getClass()===Rs?this._factory.createMultiPolygon(o.toArray([])):this._factory.createGeometryCollection(o.toArray([]))};Pi.prototype.editPolygon=function(t,n){var r=this,i=n.edit(t,this._factory);if(i===null&&(i=this._factory.createPolygon(null)),i.isEmpty())return i;var o=this.edit(i.getExteriorRing(),n);if(o===null||o.isEmpty())return this._factory.createPolygon();for(var u=new $t,f=0;f<i.getNumInteriorRing();f++){var p=r.edit(i.getInteriorRingN(f),n);p===null||p.isEmpty()||u.add(p)}return this._factory.createPolygon(o,u.toArray([]))};Pi.prototype.interfaces_=function(){return[]};Pi.prototype.getClass=function(){return Pi};Pi.GeometryEditorOperation=function(){};jp.NoOpGeometryOperation.get=function(){return hh};jp.CoordinateOperation.get=function(){return fh};jp.CoordinateSequenceOperation.get=function(){return ph};Object.defineProperties(Pi,jp);var hh=function(){};hh.prototype.edit=function(t,n){return t};hh.prototype.interfaces_=function(){return[Pi.GeometryEditorOperation]};hh.prototype.getClass=function(){return hh};var fh=function(){};fh.prototype.edit=function(t,n){var r=this.editCoordinates(t.getCoordinates(),t);return r===null?t:t instanceof zs?n.createLinearRing(r):t instanceof Cn?n.createLineString(r):t instanceof $r?r.length>0?n.createPoint(r[0]):n.createPoint():t};fh.prototype.interfaces_=function(){return[Pi.GeometryEditorOperation]};fh.prototype.getClass=function(){return fh};var ph=function(){};ph.prototype.edit=function(t,n){return t instanceof zs?n.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Cn?n.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof $r?n.createPoint(this.edit(t.getCoordinateSequence(),t)):t};ph.prototype.interfaces_=function(){return[Pi.GeometryEditorOperation]};ph.prototype.getClass=function(){return ph};var wn=function(){var t=this;if(this._dimension=3,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var n=arguments[0];this._coordinates=new Array(n).fill(null);for(var r=0;r<n;r++)t._coordinates[r]=new ct}else if(ve(arguments[0],Ge)){var i=arguments[0];if(i===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=i.getDimension(),this._coordinates=new Array(i.size()).fill(null);for(var o=0;o<this._coordinates.length;o++)t._coordinates[o]=i.getCoordinateCopy(o)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var u=arguments[0],f=arguments[1];this._coordinates=u,this._dimension=f,u===null&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var p=arguments[0],_=arguments[1];this._coordinates=new Array(p).fill(null),this._dimension=_;for(var y=0;y<p;y++)t._coordinates[y]=new ct}}},Zv={serialVersionUID:{configurable:!0}};wn.prototype.setOrdinate=function(t,n,r){switch(n){case Ge.X:this._coordinates[t].x=r;break;case Ge.Y:this._coordinates[t].y=r;break;case Ge.Z:this._coordinates[t].z=r;break;default:throw new dn("invalid ordinateIndex")}};wn.prototype.size=function(){return this._coordinates.length};wn.prototype.getOrdinate=function(t,n){switch(n){case Ge.X:return this._coordinates[t].x;case Ge.Y:return this._coordinates[t].y;case Ge.Z:return this._coordinates[t].z}return be.NaN};wn.prototype.getCoordinate=function(){if(arguments.length===1){var t=arguments[0];return this._coordinates[t]}else if(arguments.length===2){var n=arguments[0],r=arguments[1];r.x=this._coordinates[n].x,r.y=this._coordinates[n].y,r.z=this._coordinates[n].z}};wn.prototype.getCoordinateCopy=function(t){return new ct(this._coordinates[t])};wn.prototype.getDimension=function(){return this._dimension};wn.prototype.getX=function(t){return this._coordinates[t].x};wn.prototype.clone=function(){for(var t=this,n=new Array(this.size()).fill(null),r=0;r<this._coordinates.length;r++)n[r]=t._coordinates[r].clone();return new wn(n,this._dimension)};wn.prototype.expandEnvelope=function(t){for(var n=this,r=0;r<this._coordinates.length;r++)t.expandToInclude(n._coordinates[r]);return t};wn.prototype.copy=function(){for(var t=this,n=new Array(this.size()).fill(null),r=0;r<this._coordinates.length;r++)n[r]=t._coordinates[r].copy();return new wn(n,this._dimension)};wn.prototype.toString=function(){var t=this;if(this._coordinates.length>0){var n=new Ls(17*this._coordinates.length);n.append("("),n.append(this._coordinates[0]);for(var r=1;r<this._coordinates.length;r++)n.append(", "),n.append(t._coordinates[r]);return n.append(")"),n.toString()}else return"()"};wn.prototype.getY=function(t){return this._coordinates[t].y};wn.prototype.toCoordinateArray=function(){return this._coordinates};wn.prototype.interfaces_=function(){return[Ge,ki]};wn.prototype.getClass=function(){return wn};Zv.serialVersionUID.get=function(){return-0xcb44a778db18e00};Object.defineProperties(wn,Zv);var Gs=function(){},ym={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Gs.prototype.readResolve=function(){return Gs.instance()};Gs.prototype.create=function(){if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return new wn(t)}else if(ve(arguments[0],Ge)){var n=arguments[0];return new wn(n)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];return i>3&&(i=3),i<2?new wn(r):new wn(r,i)}};Gs.prototype.interfaces_=function(){return[xl,ki]};Gs.prototype.getClass=function(){return Gs};Gs.instance=function(){return Gs.instanceObject};ym.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00};ym.instanceObject.get=function(){return new Gs};Object.defineProperties(Gs,ym);var Wv=function(e){function t(){e.call(this),this.map_=new Map}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(r){return this.map_.get(r)||null},t.prototype.put=function(r,i){return this.map_.set(r,i),i},t.prototype.values=function(){for(var r=new $t,i=this.map_.values(),o=i.next();!o.done;)r.add(o.value),o=i.next();return r},t.prototype.entrySet=function(){var r=new mm;return this.map_.entries().forEach(function(i){return r.add(i)}),r},t.prototype.size=function(){return this.map_.size()},t}(Iu),je=function e(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=e.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof _s){var t=arguments[0];this._modelType=t,t===e.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var n=arguments[0];this._modelType=e.FIXED,this.setScale(n)}else if(arguments[0]instanceof e){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}}},vm={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};je.prototype.equals=function(t){if(!(t instanceof je))return!1;var n=t;return this._modelType===n._modelType&&this._scale===n._scale};je.prototype.compareTo=function(t){var n=t,r=this.getMaximumSignificantDigits(),i=n.getMaximumSignificantDigits();return new ds(r).compareTo(new ds(i))};je.prototype.getScale=function(){return this._scale};je.prototype.isFloating=function(){return this._modelType===je.FLOATING||this._modelType===je.FLOATING_SINGLE};je.prototype.getType=function(){return this._modelType};je.prototype.toString=function(){var t="UNKNOWN";return this._modelType===je.FLOATING?t="Floating":this._modelType===je.FLOATING_SINGLE?t="Floating-Single":this._modelType===je.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t};je.prototype.makePrecise=function(){if(typeof arguments[0]=="number"){var t=arguments[0];if(be.isNaN(t))return t;if(this._modelType===je.FLOATING_SINGLE){var n=t;return n}return this._modelType===je.FIXED?Math.round(t*this._scale)/this._scale:t}else if(arguments[0]instanceof ct){var r=arguments[0];if(this._modelType===je.FLOATING)return null;r.x=this.makePrecise(r.x),r.y=this.makePrecise(r.y)}};je.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===je.FLOATING?t=16:this._modelType===je.FLOATING_SINGLE?t=6:this._modelType===je.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t};je.prototype.setScale=function(t){this._scale=Math.abs(t)};je.prototype.interfaces_=function(){return[ki,Ii]};je.prototype.getClass=function(){return je};je.mostPrecise=function(t,n){return t.compareTo(n)>=0?t:n};vm.serialVersionUID.get=function(){return 7777263578777804e3};vm.maximumPreciseValue.get=function(){return 9007199254740992};Object.defineProperties(je,vm);var _s=function e(t){this._name=t||null,e.nameToTypeMap.put(t,this)},xm={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};_s.prototype.readResolve=function(){return _s.nameToTypeMap.get(this._name)};_s.prototype.toString=function(){return this._name};_s.prototype.interfaces_=function(){return[ki]};_s.prototype.getClass=function(){return _s};xm.serialVersionUID.get=function(){return-552860263173159e4};xm.nameToTypeMap.get=function(){return new Wv};Object.defineProperties(_s,xm);je.Type=_s;je.FIXED=new _s("FIXED");je.FLOATING=new _s("FLOATING");je.FLOATING_SINGLE=new _s("FLOATING SINGLE");var De=function e(){this._precisionModel=new je,this._SRID=0,this._coordinateSequenceFactory=e.getDefaultCoordinateSequenceFactory(),arguments.length===0||(arguments.length===1?ve(arguments[0],xl)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof je&&(this._precisionModel=arguments[0]):arguments.length===2?(this._precisionModel=arguments[0],this._SRID=arguments[1]):arguments.length===3&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Kv={serialVersionUID:{configurable:!0}};De.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new ct(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new ct(t.getMinX(),t.getMinY()),new ct(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new ct(t.getMinX(),t.getMinY()),new ct(t.getMinX(),t.getMaxY()),new ct(t.getMaxX(),t.getMaxY()),new ct(t.getMaxX(),t.getMinY()),new ct(t.getMinX(),t.getMinY())]),null)};De.prototype.createLineString=function(t){if(t){if(t instanceof Array)return new Cn(this.getCoordinateSequenceFactory().create(t),this);if(ve(t,Ge))return new Cn(t,this)}else return new Cn(this.getCoordinateSequenceFactory().create([]),this)};De.prototype.createMultiLineString=function(){if(arguments.length===0)return new Sa(null,this);if(arguments.length===1){var t=arguments[0];return new Sa(t,this)}};De.prototype.buildGeometry=function(t){for(var n=null,r=!1,i=!1,o=t.iterator();o.hasNext();){var u=o.next(),f=u.getClass();n===null&&(n=f),f!==n&&(r=!0),u.isGeometryCollectionOrDerived()&&(i=!0)}if(n===null)return this.createGeometryCollection();if(r||i)return this.createGeometryCollection(De.toGeometryArray(t));var p=t.iterator().next(),_=t.size()>1;if(_){if(p instanceof Un)return this.createMultiPolygon(De.toPolygonArray(t));if(p instanceof Cn)return this.createMultiLineString(De.toLineStringArray(t));if(p instanceof $r)return this.createMultiPoint(De.toPointArray(t));Se.shouldNeverReachHere("Unhandled class: "+p.getClass().getName())}return p};De.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(t!==null?this.getCoordinateSequenceFactory().create(t):null)};De.prototype.createPoint=function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof ct){var t=arguments[0];return this.createPoint(t!==null?this.getCoordinateSequenceFactory().create([t]):null)}else if(ve(arguments[0],Ge)){var n=arguments[0];return new $r(n,this)}}};De.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory};De.prototype.createPolygon=function(){if(arguments.length===0)return new Un(null,null,this);if(arguments.length===1){if(ve(arguments[0],Ge)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}else if(arguments[0]instanceof Array){var n=arguments[0];return this.createPolygon(this.createLinearRing(n))}else if(arguments[0]instanceof zs){var r=arguments[0];return this.createPolygon(r,null)}}else if(arguments.length===2){var i=arguments[0],o=arguments[1];return new Un(i,o,this)}};De.prototype.getSRID=function(){return this._SRID};De.prototype.createGeometryCollection=function(){if(arguments.length===0)return new wr(null,this);if(arguments.length===1){var t=arguments[0];return new wr(t,this)}};De.prototype.createGeometry=function(t){var n=new Pi(this);return n.edit(t,{edit:function(){if(arguments.length===2){var r=arguments[0];return this._coordinateSequenceFactory.create(r)}}})};De.prototype.getPrecisionModel=function(){return this._precisionModel};De.prototype.createLinearRing=function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(t!==null?this.getCoordinateSequenceFactory().create(t):null)}else if(ve(arguments[0],Ge)){var n=arguments[0];return new zs(n,this)}}};De.prototype.createMultiPolygon=function(){if(arguments.length===0)return new Rs(null,this);if(arguments.length===1){var t=arguments[0];return new Rs(t,this)}};De.prototype.createMultiPoint=function(){var t=this;if(arguments.length===0)return new Sl(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var n=arguments[0];return new Sl(n,this)}else if(arguments[0]instanceof Array){var r=arguments[0];return this.createMultiPoint(r!==null?this.getCoordinateSequenceFactory().create(r):null)}else if(ve(arguments[0],Ge)){var i=arguments[0];if(i===null)return this.createMultiPoint(new Array(0).fill(null));for(var o=new Array(i.size()).fill(null),u=0;u<i.size();u++){var f=t.getCoordinateSequenceFactory().create(1,i.getDimension());Pn.copy(i,u,f,0,1),o[u]=t.createPoint(f)}return this.createMultiPoint(o)}}};De.prototype.interfaces_=function(){return[ki]};De.prototype.getClass=function(){return De};De.toMultiPolygonArray=function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)};De.toGeometryArray=function(t){if(t===null)return null;var n=new Array(t.size()).fill(null);return t.toArray(n)};De.getDefaultCoordinateSequenceFactory=function(){return Gs.instance()};De.toMultiLineStringArray=function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)};De.toLineStringArray=function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)};De.toMultiPointArray=function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)};De.toLinearRingArray=function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)};De.toPointArray=function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)};De.toPolygonArray=function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)};De.createPointFromInternalCoord=function(t,n){return n.getPrecisionModel().makePrecise(t),n.getFactory().createPoint(t)};Kv.serialVersionUID.get=function(){return-6820524753094096e3};Object.defineProperties(De,Kv);var NS=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],qp=function(t){this.geometryFactory=t||new De};qp.prototype.read=function(t){var n;typeof t=="string"?n=JSON.parse(t):n=t;var r=n.type;if(!as[r])throw new Error("Unknown GeoJSON type: "+n.type);return NS.indexOf(r)!==-1?as[r].apply(this,[n.coordinates]):r==="GeometryCollection"?as[r].apply(this,[n.geometries]):as[r].apply(this,[n])};qp.prototype.write=function(t){var n=t.getGeometryType();if(!uo[n])throw new Error("Geometry is not supported");return uo[n].apply(this,[t])};var as={Feature:function(e){var t={};for(var n in e)t[n]=e[n];if(e.geometry){var r=e.geometry.type;if(!as[r])throw new Error("Unknown GeoJSON type: "+e.type);t.geometry=this.read(e.geometry)}return e.bbox&&(t.bbox=as.bbox.apply(this,[e.bbox])),t},FeatureCollection:function(e){var t=this,n={};if(e.features){n.features=[];for(var r=0;r<e.features.length;++r)n.features.push(t.read(e.features[r]))}return e.bbox&&(n.bbox=this.parse.bbox.apply(this,[e.bbox])),n},coordinates:function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];t.push(new ct(r[0],r[1]))}return t},bbox:function(e){return this.geometryFactory.createLinearRing([new ct(e[0],e[1]),new ct(e[2],e[1]),new ct(e[2],e[3]),new ct(e[0],e[3]),new ct(e[0],e[1])])},Point:function(e){var t=new ct(e[0],e[1]);return this.geometryFactory.createPoint(t)},MultiPoint:function(e){for(var t=this,n=[],r=0;r<e.length;++r)n.push(as.Point.apply(t,[e[r]]));return this.geometryFactory.createMultiPoint(n)},LineString:function(e){var t=as.coordinates.apply(this,[e]);return this.geometryFactory.createLineString(t)},MultiLineString:function(e){for(var t=this,n=[],r=0;r<e.length;++r)n.push(as.LineString.apply(t,[e[r]]));return this.geometryFactory.createMultiLineString(n)},Polygon:function(e){for(var t=this,n=as.coordinates.apply(this,[e[0]]),r=this.geometryFactory.createLinearRing(n),i=[],o=1;o<e.length;++o){var u=e[o],f=as.coordinates.apply(t,[u]),p=t.geometryFactory.createLinearRing(f);i.push(p)}return this.geometryFactory.createPolygon(r,i)},MultiPolygon:function(e){for(var t=this,n=[],r=0;r<e.length;++r){var i=e[r];n.push(as.Polygon.apply(t,[i]))}return this.geometryFactory.createMultiPolygon(n)},GeometryCollection:function(e){for(var t=this,n=[],r=0;r<e.length;++r){var i=e[r];n.push(t.read(i))}return this.geometryFactory.createGeometryCollection(n)}},uo={coordinate:function(e){return[e.x,e.y]},Point:function(e){var t=uo.coordinate.apply(this,[e.getCoordinate()]);return{type:"Point",coordinates:t}},MultiPoint:function(e){for(var t=this,n=[],r=0;r<e._geometries.length;++r){var i=e._geometries[r],o=uo.Point.apply(t,[i]);n.push(o.coordinates)}return{type:"MultiPoint",coordinates:n}},LineString:function(e){for(var t=this,n=[],r=e.getCoordinates(),i=0;i<r.length;++i){var o=r[i];n.push(uo.coordinate.apply(t,[o]))}return{type:"LineString",coordinates:n}},MultiLineString:function(e){for(var t=this,n=[],r=0;r<e._geometries.length;++r){var i=e._geometries[r],o=uo.LineString.apply(t,[i]);n.push(o.coordinates)}return{type:"MultiLineString",coordinates:n}},Polygon:function(e){var t=this,n=[],r=uo.LineString.apply(this,[e._shell]);n.push(r.coordinates);for(var i=0;i<e._holes.length;++i){var o=e._holes[i],u=uo.LineString.apply(t,[o]);n.push(u.coordinates)}return{type:"Polygon",coordinates:n}},MultiPolygon:function(e){for(var t=this,n=[],r=0;r<e._geometries.length;++r){var i=e._geometries[r],o=uo.Polygon.apply(t,[i]);n.push(o.coordinates)}return{type:"MultiPolygon",coordinates:n}},GeometryCollection:function(e){for(var t=this,n=[],r=0;r<e._geometries.length;++r){var i=e._geometries[r],o=i.getGeometryType();n.push(uo[o].apply(t,[i]))}return{type:"GeometryCollection",geometries:n}}},Cm=function(t){this.geometryFactory=t||new De,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new qp(this.geometryFactory)};Cm.prototype.read=function(t){var n=this.parser.read(t);return this.precisionModel.getType()===je.FIXED&&this.reducePrecision(n),n};Cm.prototype.reducePrecision=function(t){var n=this,r,i;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(r=0,i=t.points.length;r<i;r++)n.precisionModel.makePrecise(t.points[r]);else if(t.geometries)for(r=0,i=t.geometries.length;r<i;r++)n.reducePrecision(t.geometries[r])};var $v=function(){this.parser=new qp(this.geometryFactory)};$v.prototype.write=function(t){return this.parser.write(t)};var qt=function(){},Hp={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};qt.prototype.interfaces_=function(){return[]};qt.prototype.getClass=function(){return qt};qt.opposite=function(t){return t===qt.LEFT?qt.RIGHT:t===qt.RIGHT?qt.LEFT:t};Hp.ON.get=function(){return 0};Hp.LEFT.get=function(){return 1};Hp.RIGHT.get=function(){return 2};Object.defineProperties(qt,Hp);function Zp(e){this.message=e||""}Zp.prototype=new Error;Zp.prototype.name="EmptyStackException";function ws(){this.array_=[]}ws.prototype=new Fi;ws.prototype.add=function(e){return this.array_.push(e),!0};ws.prototype.get=function(e){if(e<0||e>=this.size())throw new Error;return this.array_[e]};ws.prototype.push=function(e){return this.array_.push(e),e};ws.prototype.pop=function(e){if(this.array_.length===0)throw new Zp;return this.array_.pop()};ws.prototype.peek=function(){if(this.array_.length===0)throw new Zp;return this.array_[this.array_.length-1]};ws.prototype.empty=function(){return this.array_.length===0};ws.prototype.isEmpty=function(){return this.empty()};ws.prototype.search=function(e){return this.array_.indexOf(e)};ws.prototype.size=function(){return this.array_.length};ws.prototype.toArray=function(){for(var e=this,t=[],n=0,r=this.array_.length;n<r;n++)t.push(e.array_[n]);return t};var ys=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};ys.prototype.getCoordinate=function(){return this._minCoord};ys.prototype.getRightmostSide=function(t,n){var r=this.getRightmostSideOfSegment(t,n);return r<0&&(r=this.getRightmostSideOfSegment(t,n-1)),r<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),r};ys.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();Se.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var n=t[this._minIndex-1],r=t[this._minIndex+1],i=Qt.computeOrientation(this._minCoord,r,n),o=!1;(n.y<this._minCoord.y&&r.y<this._minCoord.y&&i===Qt.COUNTERCLOCKWISE||n.y>this._minCoord.y&&r.y>this._minCoord.y&&i===Qt.CLOCKWISE)&&(o=!0),o&&(this._minIndex=this._minIndex-1)};ys.prototype.getRightmostSideOfSegment=function(t,n){var r=t.getEdge(),i=r.getCoordinates();if(n<0||n+1>=i.length||i[n].y===i[n+1].y)return-1;var o=qt.LEFT;return i[n].y<i[n+1].y&&(o=qt.RIGHT),o};ys.prototype.getEdge=function(){return this._orientedDe};ys.prototype.checkForRightmostCoordinate=function(t){for(var n=this,r=t.getEdge().getCoordinates(),i=0;i<r.length-1;i++)(n._minCoord===null||r[i].x>n._minCoord.x)&&(n._minDe=t,n._minIndex=i,n._minCoord=r[i])};ys.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode(),n=t.getEdges();this._minDe=n.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)};ys.prototype.findEdge=function(t){for(var n=this,r=t.iterator();r.hasNext();){var i=r.next();i.isForward()&&n.checkForRightmostCoordinate(i)}Se.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe;var o=this.getRightmostSide(this._minDe,this._minIndex);o===qt.LEFT&&(this._orientedDe=this._minDe.getSym())};ys.prototype.interfaces_=function(){return[]};ys.prototype.getClass=function(){return ys};var vo=function(e){function t(n,r){e.call(this,t.msgWithCoord(n,r)),this.pt=r?new ct(r):null,this.name="TopologyException"}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getCoordinate=function(){return this.pt},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.msgWithCoord=function(r,i){return i?r:r+" [ "+i+" ]"},t}(_o),Wp=function(){this.array_=[]};Wp.prototype.addLast=function(t){this.array_.push(t)};Wp.prototype.removeFirst=function(){return this.array_.shift()};Wp.prototype.isEmpty=function(){return this.array_.length===0};var Sr=function(){this._finder=null,this._dirEdgeList=new $t,this._nodes=new $t,this._rightMostCoord=null,this._env=null,this._finder=new ys};Sr.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var n=t.next();n.setVisited(!1)}};Sr.prototype.getRightmostCoordinate=function(){return this._rightMostCoord};Sr.prototype.computeNodeDepth=function(t){for(var n=this,r=null,i=t.getEdges().iterator();i.hasNext();){var o=i.next();if(o.isVisited()||o.getSym().isVisited()){r=o;break}}if(r===null)throw new vo("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(r);for(var u=t.getEdges().iterator();u.hasNext();){var f=u.next();f.setVisited(!0),n.copySymDepths(f)}};Sr.prototype.computeDepth=function(t){this.clearVisitedEdges();var n=this._finder.getEdge();n.setEdgeDepths(qt.RIGHT,t),this.copySymDepths(n),this.computeDepths(n)};Sr.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()};Sr.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var n=t.next();n.getDepth(qt.RIGHT)>=1&&n.getDepth(qt.LEFT)<=0&&!n.isInteriorAreaEdge()&&n.setInResult(!0)}};Sr.prototype.computeDepths=function(t){var n=this,r=new mm,i=new Wp,o=t.getNode();for(i.addLast(o),r.add(o),t.setVisited(!0);!i.isEmpty();){var u=i.removeFirst();r.add(u),n.computeNodeDepth(u);for(var f=u.getEdges().iterator();f.hasNext();){var p=f.next(),_=p.getSym();if(!_.isVisited()){var y=_.getNode();r.contains(y)||(i.addLast(y),r.add(y))}}}};Sr.prototype.compareTo=function(t){var n=t;return this._rightMostCoord.x<n._rightMostCoord.x?-1:this._rightMostCoord.x>n._rightMostCoord.x?1:0};Sr.prototype.getEnvelope=function(){if(this._env===null){for(var t=new he,n=this._dirEdgeList.iterator();n.hasNext();)for(var r=n.next(),i=r.getEdge().getCoordinates(),o=0;o<i.length-1;o++)t.expandToInclude(i[o]);this._env=t}return this._env};Sr.prototype.addReachable=function(t){var n=this,r=new ws;for(r.add(t);!r.empty();){var i=r.pop();n.add(i,r)}};Sr.prototype.copySymDepths=function(t){var n=t.getSym();n.setDepth(qt.LEFT,t.getDepth(qt.RIGHT)),n.setDepth(qt.RIGHT,t.getDepth(qt.LEFT))};Sr.prototype.add=function(t,n){var r=this;t.setVisited(!0),this._nodes.add(t);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();r._dirEdgeList.add(o);var u=o.getSym(),f=u.getNode();f.isVisited()||n.push(f)}};Sr.prototype.getNodes=function(){return this._nodes};Sr.prototype.getDirectedEdges=function(){return this._dirEdgeList};Sr.prototype.interfaces_=function(){return[Ii]};Sr.prototype.getClass=function(){return Sr};var sn=function e(){var t=this;if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var n=arguments[0];this.init(n.length)}else if(Number.isInteger(arguments[0])){var r=arguments[0];this.init(1),this.location[qt.ON]=r}else if(arguments[0]instanceof e){var i=arguments[0];if(this.init(i.location.length),i!==null)for(var o=0;o<this.location.length;o++)t.location[o]=i.location[o]}}else if(arguments.length===3){var u=arguments[0],f=arguments[1],p=arguments[2];this.init(3),this.location[qt.ON]=u,this.location[qt.LEFT]=f,this.location[qt.RIGHT]=p}};sn.prototype.setAllLocations=function(t){for(var n=this,r=0;r<this.location.length;r++)n.location[r]=t};sn.prototype.isNull=function(){for(var t=this,n=0;n<this.location.length;n++)if(t.location[n]!==yt.NONE)return!1;return!0};sn.prototype.setAllLocationsIfNull=function(t){for(var n=this,r=0;r<this.location.length;r++)n.location[r]===yt.NONE&&(n.location[r]=t)};sn.prototype.isLine=function(){return this.location.length===1};sn.prototype.merge=function(t){var n=this;if(t.location.length>this.location.length){var r=new Array(3).fill(null);r[qt.ON]=this.location[qt.ON],r[qt.LEFT]=yt.NONE,r[qt.RIGHT]=yt.NONE,this.location=r}for(var i=0;i<this.location.length;i++)n.location[i]===yt.NONE&&i<t.location.length&&(n.location[i]=t.location[i])};sn.prototype.getLocations=function(){return this.location};sn.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[qt.LEFT];this.location[qt.LEFT]=this.location[qt.RIGHT],this.location[qt.RIGHT]=t};sn.prototype.toString=function(){var t=new Ls;return this.location.length>1&&t.append(yt.toLocationSymbol(this.location[qt.LEFT])),t.append(yt.toLocationSymbol(this.location[qt.ON])),this.location.length>1&&t.append(yt.toLocationSymbol(this.location[qt.RIGHT])),t.toString()};sn.prototype.setLocations=function(t,n,r){this.location[qt.ON]=t,this.location[qt.LEFT]=n,this.location[qt.RIGHT]=r};sn.prototype.get=function(t){return t<this.location.length?this.location[t]:yt.NONE};sn.prototype.isArea=function(){return this.location.length>1};sn.prototype.isAnyNull=function(){for(var t=this,n=0;n<this.location.length;n++)if(t.location[n]===yt.NONE)return!0;return!1};sn.prototype.setLocation=function(){if(arguments.length===1){var t=arguments[0];this.setLocation(qt.ON,t)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.location[n]=r}};sn.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(yt.NONE)};sn.prototype.isEqualOnSide=function(t,n){return this.location[n]===t.location[n]};sn.prototype.allPositionsEqual=function(t){for(var n=this,r=0;r<this.location.length;r++)if(n.location[r]!==t)return!1;return!0};sn.prototype.interfaces_=function(){return[]};sn.prototype.getClass=function(){return sn};var $e=function e(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new sn(t),this.elt[1]=new sn(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.elt[0]=new sn(n.elt[0]),this.elt[1]=new sn(n.elt[1])}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.elt[0]=new sn(yt.NONE),this.elt[1]=new sn(yt.NONE),this.elt[r].setLocation(i)}else if(arguments.length===3){var o=arguments[0],u=arguments[1],f=arguments[2];this.elt[0]=new sn(o,u,f),this.elt[1]=new sn(o,u,f)}else if(arguments.length===4){var p=arguments[0],_=arguments[1],y=arguments[2],C=arguments[3];this.elt[0]=new sn(yt.NONE,yt.NONE,yt.NONE),this.elt[1]=new sn(yt.NONE,yt.NONE,yt.NONE),this.elt[p].setLocations(_,y,C)}};$e.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t};$e.prototype.setAllLocations=function(t,n){this.elt[t].setAllLocations(n)};$e.prototype.isNull=function(t){return this.elt[t].isNull()};$e.prototype.setAllLocationsIfNull=function(){if(arguments.length===1){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.elt[n].setAllLocationsIfNull(r)}};$e.prototype.isLine=function(t){return this.elt[t].isLine()};$e.prototype.merge=function(t){for(var n=this,r=0;r<2;r++)n.elt[r]===null&&t.elt[r]!==null?n.elt[r]=new sn(t.elt[r]):n.elt[r].merge(t.elt[r])};$e.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()};$e.prototype.getLocation=function(){if(arguments.length===1){var t=arguments[0];return this.elt[t].get(qt.ON)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.elt[n].get(r)}};$e.prototype.toString=function(){var t=new Ls;return this.elt[0]!==null&&(t.append("A:"),t.append(this.elt[0].toString())),this.elt[1]!==null&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()};$e.prototype.isArea=function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var t=arguments[0];return this.elt[t].isArea()}};$e.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()};$e.prototype.setLocation=function(){if(arguments.length===2){var t=arguments[0],n=arguments[1];this.elt[t].setLocation(qt.ON,n)}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this.elt[r].setLocation(i,o)}};$e.prototype.isEqualOnSide=function(t,n){return this.elt[0].isEqualOnSide(t.elt[0],n)&&this.elt[1].isEqualOnSide(t.elt[1],n)};$e.prototype.allPositionsEqual=function(t,n){return this.elt[t].allPositionsEqual(n)};$e.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new sn(this.elt[t].location[0]))};$e.prototype.interfaces_=function(){return[]};$e.prototype.getClass=function(){return $e};$e.toLineLabel=function(t){for(var n=new $e(yt.NONE),r=0;r<2;r++)n.setLocation(r,t.getLocation(r));return n};var Nn=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new $t,this._pts=new $t,this._label=new $e(yt.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new $t,this._geometryFactory=null;var t=arguments[0],n=arguments[1];this._geometryFactory=n,this.computePoints(t),this.computeRing()};Nn.prototype.computeRing=function(){var t=this;if(this._ring!==null)return null;for(var n=new Array(this._pts.size()).fill(null),r=0;r<this._pts.size();r++)n[r]=t._pts.get(r);this._ring=this._geometryFactory.createLinearRing(n),this._isHole=Qt.isCCW(this._ring.getCoordinates())};Nn.prototype.isIsolated=function(){return this._label.getGeometryCount()===1};Nn.prototype.computePoints=function(t){var n=this;this._startDe=t;var r=t,i=!0;do{if(r===null)throw new vo("Found null DirectedEdge");if(r.getEdgeRing()===n)throw new vo("Directed Edge visited twice during ring-building at "+r.getCoordinate());n._edges.add(r);var o=r.getLabel();Se.isTrue(o.isArea()),n.mergeLabel(o),n.addPoints(r.getEdge(),r.isForward(),i),i=!1,n.setEdgeRing(r,n),r=n.getNext(r)}while(r!==this._startDe)};Nn.prototype.getLinearRing=function(){return this._ring};Nn.prototype.getCoordinate=function(t){return this._pts.get(t)};Nn.prototype.computeMaxNodeDegree=function(){var t=this;this._maxNodeDegree=0;var n=this._startDe;do{var r=n.getNode(),i=r.getEdges().getOutgoingDegree(t);i>t._maxNodeDegree&&(t._maxNodeDegree=i),n=t.getNext(n)}while(n!==this._startDe);this._maxNodeDegree*=2};Nn.prototype.addPoints=function(t,n,r){var i=this,o=t.getCoordinates();if(n){var u=1;r&&(u=0);for(var f=u;f<o.length;f++)i._pts.add(o[f])}else{var p=o.length-2;r&&(p=o.length-1);for(var _=p;_>=0;_--)i._pts.add(o[_])}};Nn.prototype.isHole=function(){return this._isHole};Nn.prototype.setInResult=function(){var t=this._startDe;do t.getEdge().setInResult(!0),t=t.getNext();while(t!==this._startDe)};Nn.prototype.containsPoint=function(t){var n=this.getLinearRing(),r=n.getEnvelopeInternal();if(!r.contains(t)||!Qt.isPointInRing(t,n.getCoordinates()))return!1;for(var i=this._holes.iterator();i.hasNext();){var o=i.next();if(o.containsPoint(t))return!1}return!0};Nn.prototype.addHole=function(t){this._holes.add(t)};Nn.prototype.isShell=function(){return this._shell===null};Nn.prototype.getLabel=function(){return this._label};Nn.prototype.getEdges=function(){return this._edges};Nn.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree};Nn.prototype.getShell=function(){return this._shell};Nn.prototype.mergeLabel=function(){if(arguments.length===1){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=n.getLocation(r,qt.RIGHT);if(i===yt.NONE)return null;if(this._label.getLocation(r)===yt.NONE)return this._label.setLocation(r,i),null}};Nn.prototype.setShell=function(t){this._shell=t,t!==null&&t.addHole(this)};Nn.prototype.toPolygon=function(t){for(var n=this,r=new Array(this._holes.size()).fill(null),i=0;i<this._holes.size();i++)r[i]=n._holes.get(i).getLinearRing();var o=t.createPolygon(this.getLinearRing(),r);return o};Nn.prototype.interfaces_=function(){return[]};Nn.prototype.getClass=function(){return Nn};var RS=function(e){function t(){var n=arguments[0],r=arguments[1];e.call(this,n,r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setEdgeRing=function(r,i){r.setMinEdgeRing(i)},t.prototype.getNext=function(r){return r.getNextMin()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Nn),OS=function(e){function t(){var n=arguments[0],r=arguments[1];e.call(this,n,r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.buildMinimalRings=function(){var r=this,i=new $t,o=this._startDe;do{if(o.getMinEdgeRing()===null){var u=new RS(o,r._geometryFactory);i.add(u)}o=o.getNext()}while(o!==this._startDe);return i},t.prototype.setEdgeRing=function(r,i){r.setEdgeRing(i)},t.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var r=this,i=this._startDe;do{var o=i.getNode();o.getEdges().linkMinimalDirectedEdges(r),i=i.getNext()}while(i!==this._startDe)},t.prototype.getNext=function(r){return r.getNext()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Nn),pi=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this._label=t}}};pi.prototype.setVisited=function(t){this._isVisited=t};pi.prototype.setInResult=function(t){this._isInResult=t};pi.prototype.isCovered=function(){return this._isCovered};pi.prototype.isCoveredSet=function(){return this._isCoveredSet};pi.prototype.setLabel=function(t){this._label=t};pi.prototype.getLabel=function(){return this._label};pi.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0};pi.prototype.updateIM=function(t){Se.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)};pi.prototype.isInResult=function(){return this._isInResult};pi.prototype.isVisited=function(){return this._isVisited};pi.prototype.interfaces_=function(){return[]};pi.prototype.getClass=function(){return pi};var Kp=function(e){function t(){e.call(this),this._coord=null,this._edges=null;var n=arguments[0],r=arguments[1];this._coord=n,this._edges=r,this._label=new $e(0,yt.NONE)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isIncidentEdgeInResult=function(){for(var r=this.getEdges().getEdges().iterator();r.hasNext();){var i=r.next();if(i.getEdge().isInResult())return!0}return!1},t.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},t.prototype.getCoordinate=function(){return this._coord},t.prototype.print=function(r){r.println("node "+this._coord+" lbl: "+this._label)},t.prototype.computeIM=function(r){},t.prototype.computeMergedLocation=function(r,i){var o=yt.NONE;if(o=this._label.getLocation(i),!r.isNull(i)){var u=r.getLocation(i);o!==yt.BOUNDARY&&(o=u)}return o},t.prototype.setLabel=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];this._label===null?this._label=new $e(r,i):this._label.setLocation(r,i)}else return e.prototype.setLabel.apply(this,arguments)},t.prototype.getEdges=function(){return this._edges},t.prototype.mergeLabel=function(){var r=this;if(arguments[0]instanceof t){var i=arguments[0];this.mergeLabel(i._label)}else if(arguments[0]instanceof $e)for(var o=arguments[0],u=0;u<2;u++){var f=r.computeMergedLocation(o,u),p=r._label.getLocation(u);p===yt.NONE&&r._label.setLocation(u,f)}},t.prototype.add=function(r){this._edges.insert(r),r.setNode(this)},t.prototype.setLabelBoundary=function(r){if(this._label===null)return null;var i=yt.NONE;this._label!==null&&(i=this._label.getLocation(r));var o=null;switch(i){case yt.BOUNDARY:o=yt.INTERIOR;break;case yt.INTERIOR:o=yt.BOUNDARY;break;default:o=yt.BOUNDARY;break}this._label.setLocation(r,o)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(pi),vs=function(){this.nodeMap=new pr,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};vs.prototype.find=function(t){return this.nodeMap.get(t)};vs.prototype.addNode=function(){if(arguments[0]instanceof ct){var t=arguments[0],n=this.nodeMap.get(t);return n===null&&(n=this.nodeFact.createNode(t),this.nodeMap.put(t,n)),n}else if(arguments[0]instanceof Kp){var r=arguments[0],i=this.nodeMap.get(r.getCoordinate());return i===null?(this.nodeMap.put(r.getCoordinate(),r),r):(i.mergeLabel(r),i)}};vs.prototype.print=function(t){for(var n=this.iterator();n.hasNext();){var r=n.next();r.print(t)}};vs.prototype.iterator=function(){return this.nodeMap.values().iterator()};vs.prototype.values=function(){return this.nodeMap.values()};vs.prototype.getBoundaryNodes=function(t){for(var n=new $t,r=this.iterator();r.hasNext();){var i=r.next();i.getLabel().getLocation(t)===yt.BOUNDARY&&n.add(i)}return n};vs.prototype.add=function(t){var n=t.getCoordinate(),r=this.addNode(n);r.add(t)};vs.prototype.interfaces_=function(){return[]};vs.prototype.getClass=function(){return vs};var tn=function(){},Ah={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};tn.prototype.interfaces_=function(){return[]};tn.prototype.getClass=function(){return tn};tn.isNorthern=function(t){return t===tn.NE||t===tn.NW};tn.isOpposite=function(t,n){if(t===n)return!1;var r=(t-n+4)%4;return r===2};tn.commonHalfPlane=function(t,n){if(t===n)return t;var r=(t-n+4)%4;if(r===2)return-1;var i=t<n?t:n,o=t>n?t:n;return i===0&&o===3?3:i};tn.isInHalfPlane=function(t,n){return n===tn.SE?t===tn.SE||t===tn.SW:t===n||t===n+1};tn.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],n=arguments[1];if(t===0&&n===0)throw new dn("Cannot compute the quadrant for point ( "+t+", "+n+" )");return t>=0?n>=0?tn.NE:tn.SE:n>=0?tn.NW:tn.SW}else if(arguments[0]instanceof ct&&arguments[1]instanceof ct){var r=arguments[0],i=arguments[1];if(i.x===r.x&&i.y===r.y)throw new dn("Cannot compute the quadrant for two identical points "+r);return i.x>=r.x?i.y>=r.y?tn.NE:tn.SE:i.y>=r.y?tn.NW:tn.SW}};Ah.NE.get=function(){return 0};Ah.NW.get=function(){return 1};Ah.SW.get=function(){return 2};Ah.SE.get=function(){return 3};Object.defineProperties(tn,Ah);var dr=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var t=arguments[0];this._edge=t}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2],o=null;this._edge=n,this.init(r,i),this._label=o}else if(arguments.length===4){var u=arguments[0],f=arguments[1],p=arguments[2],_=arguments[3];this._edge=u,this.init(f,p),this._label=_}};dr.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:Qt.computeOrientation(t._p0,t._p1,this._p1)};dr.prototype.getDy=function(){return this._dy};dr.prototype.getCoordinate=function(){return this._p0};dr.prototype.setNode=function(t){this._node=t};dr.prototype.print=function(t){var n=Math.atan2(this._dy,this._dx),r=this.getClass().getName(),i=r.lastIndexOf("."),o=r.substring(i+1);t.print("  "+o+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+n+"   "+this._label)};dr.prototype.compareTo=function(t){var n=t;return this.compareDirection(n)};dr.prototype.getDirectedCoordinate=function(){return this._p1};dr.prototype.getDx=function(){return this._dx};dr.prototype.getLabel=function(){return this._label};dr.prototype.getEdge=function(){return this._edge};dr.prototype.getQuadrant=function(){return this._quadrant};dr.prototype.getNode=function(){return this._node};dr.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);return"  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label};dr.prototype.computeLabel=function(t){};dr.prototype.init=function(t,n){this._p0=t,this._p1=n,this._dx=n.x-t.x,this._dy=n.y-t.y,this._quadrant=tn.quadrant(this._dx,this._dy),Se.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")};dr.prototype.interfaces_=function(){return[Ii]};dr.prototype.getClass=function(){return dr};var Bg=function(e){function t(){var n=arguments[0],r=arguments[1];if(e.call(this,n),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=r,r)this.init(n.getCoordinate(0),n.getCoordinate(1));else{var i=n.getNumPoints()-1;this.init(n.getCoordinate(i),n.getCoordinate(i-1))}this.computeDirectedLabel()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getNextMin=function(){return this._nextMin},t.prototype.getDepth=function(r){return this._depth[r]},t.prototype.setVisited=function(r){this._isVisited=r},t.prototype.computeDirectedLabel=function(){this._label=new $e(this._edge.getLabel()),this._isForward||this._label.flip()},t.prototype.getNext=function(){return this._next},t.prototype.setDepth=function(r,i){if(this._depth[r]!==-999&&this._depth[r]!==i)throw new vo("assigned depths do not match",this.getCoordinate());this._depth[r]=i},t.prototype.isInteriorAreaEdge=function(){for(var r=this,i=!0,o=0;o<2;o++)r._label.isArea(o)&&r._label.getLocation(o,qt.LEFT)===yt.INTERIOR&&r._label.getLocation(o,qt.RIGHT)===yt.INTERIOR||(i=!1);return i},t.prototype.setNextMin=function(r){this._nextMin=r},t.prototype.print=function(r){e.prototype.print.call(this,r),r.print(" "+this._depth[qt.LEFT]+"/"+this._depth[qt.RIGHT]),r.print(" ("+this.getDepthDelta()+")"),this._isInResult&&r.print(" inResult")},t.prototype.setMinEdgeRing=function(r){this._minEdgeRing=r},t.prototype.isLineEdge=function(){var r=this._label.isLine(0)||this._label.isLine(1),i=!this._label.isArea(0)||this._label.allPositionsEqual(0,yt.EXTERIOR),o=!this._label.isArea(1)||this._label.allPositionsEqual(1,yt.EXTERIOR);return r&&i&&o},t.prototype.setEdgeRing=function(r){this._edgeRing=r},t.prototype.getMinEdgeRing=function(){return this._minEdgeRing},t.prototype.getDepthDelta=function(){var r=this._edge.getDepthDelta();return this._isForward||(r=-r),r},t.prototype.setInResult=function(r){this._isInResult=r},t.prototype.getSym=function(){return this._sym},t.prototype.isForward=function(){return this._isForward},t.prototype.getEdge=function(){return this._edge},t.prototype.printEdge=function(r){this.print(r),r.print(" "),this._isForward?this._edge.print(r):this._edge.printReverse(r)},t.prototype.setSym=function(r){this._sym=r},t.prototype.setVisitedEdge=function(r){this.setVisited(r),this._sym.setVisited(r)},t.prototype.setEdgeDepths=function(r,i){var o=this.getEdge().getDepthDelta();this._isForward||(o=-o);var u=1;r===qt.LEFT&&(u=-1);var f=qt.opposite(r),p=o*u,_=i+p;this.setDepth(r,i),this.setDepth(f,_)},t.prototype.getEdgeRing=function(){return this._edgeRing},t.prototype.isInResult=function(){return this._isInResult},t.prototype.setNext=function(r){this._next=r},t.prototype.isVisited=function(){return this._isVisited},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.depthFactor=function(r,i){return r===yt.EXTERIOR&&i===yt.INTERIOR?1:r===yt.INTERIOR&&i===yt.EXTERIOR?-1:0},t}(dr),Pl=function(){};Pl.prototype.createNode=function(t){return new Kp(t,null)};Pl.prototype.interfaces_=function(){return[]};Pl.prototype.getClass=function(){return Pl};var _n=function(){if(this._edges=new $t,this._nodes=null,this._edgeEndList=new $t,arguments.length===0)this._nodes=new vs(new Pl);else if(arguments.length===1){var t=arguments[0];this._nodes=new vs(t)}};_n.prototype.printEdges=function(t){var n=this;t.println("Edges:");for(var r=0;r<this._edges.size();r++){t.println("edge "+r+":");var i=n._edges.get(r);i.print(t),i.eiList.print(t)}};_n.prototype.find=function(t){return this._nodes.find(t)};_n.prototype.addNode=function(){if(arguments[0]instanceof Kp){var t=arguments[0];return this._nodes.addNode(t)}else if(arguments[0]instanceof ct){var n=arguments[0];return this._nodes.addNode(n)}};_n.prototype.getNodeIterator=function(){return this._nodes.iterator()};_n.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();){var n=t.next();n.getEdges().linkResultDirectedEdges()}};_n.prototype.debugPrintln=function(t){nr.out.println(t)};_n.prototype.isBoundaryNode=function(t,n){var r=this._nodes.find(n);if(r===null)return!1;var i=r.getLabel();return i!==null&&i.getLocation(t)===yt.BOUNDARY};_n.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();){var n=t.next();n.getEdges().linkAllDirectedEdges()}};_n.prototype.matchInSameDirection=function(t,n,r,i){return t.equals(r)?Qt.computeOrientation(t,n,i)===Qt.COLLINEAR&&tn.quadrant(t,n)===tn.quadrant(r,i):!1};_n.prototype.getEdgeEnds=function(){return this._edgeEndList};_n.prototype.debugPrint=function(t){nr.out.print(t)};_n.prototype.getEdgeIterator=function(){return this._edges.iterator()};_n.prototype.findEdgeInSameDirection=function(t,n){for(var r=this,i=0;i<this._edges.size();i++){var o=r._edges.get(i),u=o.getCoordinates();if(r.matchInSameDirection(t,n,u[0],u[1])||r.matchInSameDirection(t,n,u[u.length-1],u[u.length-2]))return o}return null};_n.prototype.insertEdge=function(t){this._edges.add(t)};_n.prototype.findEdgeEnd=function(t){for(var n=this.getEdgeEnds().iterator();n.hasNext();){var r=n.next();if(r.getEdge()===t)return r}return null};_n.prototype.addEdges=function(t){for(var n=this,r=t.iterator();r.hasNext();){var i=r.next();n._edges.add(i);var o=new Bg(i,!0),u=new Bg(i,!1);o.setSym(u),u.setSym(o),n.add(o),n.add(u)}};_n.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)};_n.prototype.getNodes=function(){return this._nodes.values()};_n.prototype.findEdge=function(t,n){for(var r=this,i=0;i<this._edges.size();i++){var o=r._edges.get(i),u=o.getCoordinates();if(t.equals(u[0])&&n.equals(u[1]))return o}return null};_n.prototype.interfaces_=function(){return[]};_n.prototype.getClass=function(){return _n};_n.linkResultDirectedEdges=function(t){for(var n=t.iterator();n.hasNext();){var r=n.next();r.getEdges().linkResultDirectedEdges()}};var Xr=function(){this._geometryFactory=null,this._shellList=new $t;var t=arguments[0];this._geometryFactory=t};Xr.prototype.sortShellsAndHoles=function(t,n,r){for(var i=t.iterator();i.hasNext();){var o=i.next();o.isHole()?r.add(o):n.add(o)}};Xr.prototype.computePolygons=function(t){for(var n=this,r=new $t,i=t.iterator();i.hasNext();){var o=i.next(),u=o.toPolygon(n._geometryFactory);r.add(u)}return r};Xr.prototype.placeFreeHoles=function(t,n){for(var r=this,i=n.iterator();i.hasNext();){var o=i.next();if(o.getShell()===null){var u=r.findEdgeRingContaining(o,t);if(u===null)throw new vo("unable to assign hole to a shell",o.getCoordinate(0));o.setShell(u)}}};Xr.prototype.buildMinimalEdgeRings=function(t,n,r){for(var i=this,o=new $t,u=t.iterator();u.hasNext();){var f=u.next();if(f.getMaxNodeDegree()>2){f.linkDirectedEdgesForMinimalEdgeRings();var p=f.buildMinimalRings(),_=i.findShell(p);_!==null?(i.placePolygonHoles(_,p),n.add(_)):r.addAll(p)}else o.add(f)}return o};Xr.prototype.containsPoint=function(t){for(var n=this._shellList.iterator();n.hasNext();){var r=n.next();if(r.containsPoint(t))return!0}return!1};Xr.prototype.buildMaximalEdgeRings=function(t){for(var n=this,r=new $t,i=t.iterator();i.hasNext();){var o=i.next();if(o.isInResult()&&o.getLabel().isArea()&&o.getEdgeRing()===null){var u=new OS(o,n._geometryFactory);r.add(u),u.setInResult()}}return r};Xr.prototype.placePolygonHoles=function(t,n){for(var r=n.iterator();r.hasNext();){var i=r.next();i.isHole()&&i.setShell(t)}};Xr.prototype.getPolygons=function(){var t=this.computePolygons(this._shellList);return t};Xr.prototype.findEdgeRingContaining=function(t,n){for(var r=t.getLinearRing(),i=r.getEnvelopeInternal(),o=r.getCoordinateN(0),u=null,f=null,p=n.iterator();p.hasNext();){var _=p.next(),y=_.getLinearRing(),C=y.getEnvelopeInternal();u!==null&&(f=u.getLinearRing().getEnvelopeInternal());var S=!1;C.contains(i)&&Qt.isPointInRing(o,y.getCoordinates())&&(S=!0),S&&(u===null||f.contains(C))&&(u=_)}return u};Xr.prototype.findShell=function(t){for(var n=0,r=null,i=t.iterator();i.hasNext();){var o=i.next();o.isHole()||(r=o,n++)}return Se.isTrue(n<=1,"found two shells in MinimalEdgeRing list"),r};Xr.prototype.add=function(){if(arguments.length===1){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(arguments.length===2){var n=arguments[0],r=arguments[1];_n.linkResultDirectedEdges(r);var i=this.buildMaximalEdgeRings(n),o=new $t,u=this.buildMinimalEdgeRings(i,this._shellList,o);this.sortShellsAndHoles(u,this._shellList,o),this.placeFreeHoles(this._shellList,o)}};Xr.prototype.interfaces_=function(){return[]};Xr.prototype.getClass=function(){return Xr};var Ml=function(){};Ml.prototype.getBounds=function(){};Ml.prototype.interfaces_=function(){return[]};Ml.prototype.getClass=function(){return Ml};var Vi=function(){this._bounds=null,this._item=null;var t=arguments[0],n=arguments[1];this._bounds=t,this._item=n};Vi.prototype.getItem=function(){return this._item};Vi.prototype.getBounds=function(){return this._bounds};Vi.prototype.interfaces_=function(){return[Ml,ki]};Vi.prototype.getClass=function(){return Vi};var xo=function(){this._size=null,this._items=null,this._size=0,this._items=new $t,this._items.add(null)};xo.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t};xo.prototype.size=function(){return this._size};xo.prototype.reorder=function(t){for(var n=this,r=null,i=this._items.get(t);t*2<=this._size&&(r=t*2,r!==n._size&&n._items.get(r+1).compareTo(n._items.get(r))<0&&r++,n._items.get(r).compareTo(i)<0);t=r)n._items.set(t,n._items.get(r));this._items.set(t,i)};xo.prototype.clear=function(){this._size=0,this._items.clear()};xo.prototype.isEmpty=function(){return this._size===0};xo.prototype.add=function(t){var n=this;this._items.add(null),this._size+=1;var r=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(r/2)))<0;r/=2)n._items.set(r,n._items.get(Math.trunc(r/2)));this._items.set(r,t)};xo.prototype.interfaces_=function(){return[]};xo.prototype.getClass=function(){return xo};var Wo=function(){};Wo.prototype.visitItem=function(t){};Wo.prototype.interfaces_=function(){return[]};Wo.prototype.getClass=function(){return Wo};var du=function(){};du.prototype.insert=function(t,n){};du.prototype.remove=function(t,n){};du.prototype.query=function(){};du.prototype.interfaces_=function(){return[]};du.prototype.getClass=function(){return du};var Gn=function(){if(this._childBoundables=new $t,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this._level=t}}},Xv={serialVersionUID:{configurable:!0}};Gn.prototype.getLevel=function(){return this._level};Gn.prototype.size=function(){return this._childBoundables.size()};Gn.prototype.getChildBoundables=function(){return this._childBoundables};Gn.prototype.addChildBoundable=function(t){Se.isTrue(this._bounds===null),this._childBoundables.add(t)};Gn.prototype.isEmpty=function(){return this._childBoundables.isEmpty()};Gn.prototype.getBounds=function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds};Gn.prototype.interfaces_=function(){return[Ml,ki]};Gn.prototype.getClass=function(){return Gn};Xv.serialVersionUID.get=function(){return 6493722185909574e3};Object.defineProperties(Gn,Xv);var ji=function(){};ji.reverseOrder=function(){return{compare:function(n,r){return r.compareTo(n)}}};ji.min=function(t){return ji.sort(t),t.get(0)};ji.sort=function(t,n){var r=t.toArray();n?La.sort(r,n):La.sort(r);for(var i=t.iterator(),o=0,u=r.length;o<u;o++)i.next(),i.set(r[o])};ji.singletonList=function(t){var n=new $t;return n.add(t),n};var An=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],n=arguments[1],r=arguments[2];this._boundable1=t,this._boundable2=n,this._itemDistance=r,this._distance=this.distance()};An.prototype.expandToQueue=function(t,n){var r=An.isComposite(this._boundable1),i=An.isComposite(this._boundable2);if(r&&i)return An.area(this._boundable1)>An.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,n),null):(this.expand(this._boundable2,this._boundable1,t,n),null);if(r)return this.expand(this._boundable1,this._boundable2,t,n),null;if(i)return this.expand(this._boundable2,this._boundable1,t,n),null;throw new dn("neither boundable is composite")};An.prototype.isLeaves=function(){return!(An.isComposite(this._boundable1)||An.isComposite(this._boundable2))};An.prototype.compareTo=function(t){var n=t;return this._distance<n._distance?-1:this._distance>n._distance?1:0};An.prototype.expand=function(t,n,r,i){for(var o=this,u=t.getChildBoundables(),f=u.iterator();f.hasNext();){var p=f.next(),_=new An(p,n,o._itemDistance);_.getDistance()<i&&r.add(_)}};An.prototype.getBoundable=function(t){return t===0?this._boundable1:this._boundable2};An.prototype.getDistance=function(){return this._distance};An.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())};An.prototype.interfaces_=function(){return[Ii]};An.prototype.getClass=function(){return An};An.area=function(t){return t.getBounds().getArea()};An.isComposite=function(t){return t instanceof Gn};var Kn=function e(){if(this._root=null,this._built=!1,this._itemBoundables=new $t,this._nodeCapacity=null,arguments.length===0){var t=e.DEFAULT_NODE_CAPACITY;this._nodeCapacity=t}else if(arguments.length===1){var n=arguments[0];Se.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},$p={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Kn.prototype.getNodeCapacity=function(){return this._nodeCapacity};Kn.prototype.lastNode=function(t){return t.get(t.size()-1)};Kn.prototype.size=function(){var t=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var n=arguments[0],r=0,i=n.getChildBoundables().iterator();i.hasNext();){var o=i.next();o instanceof Gn?r+=t.size(o):o instanceof Vi&&(r+=1)}return r}};Kn.prototype.removeItem=function(t,n){for(var r=null,i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next();o instanceof Vi&&o.getItem()===n&&(r=o)}return r!==null?(t.getChildBoundables().remove(r),!0):!1};Kn.prototype.itemsTree=function(){var t=this;if(arguments.length===0){this.build();var n=this.itemsTree(this._root);return n===null?new $t:n}else if(arguments.length===1){for(var r=arguments[0],i=new $t,o=r.getChildBoundables().iterator();o.hasNext();){var u=o.next();if(u instanceof Gn){var f=t.itemsTree(u);f!==null&&i.add(f)}else u instanceof Vi?i.add(u.getItem()):Se.shouldNeverReachHere()}return i.size()<=0?null:i}};Kn.prototype.insert=function(t,n){Se.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Vi(t,n))};Kn.prototype.boundablesAtLevel=function(){var t=this;if(arguments.length===1){var n=arguments[0],r=new $t;return this.boundablesAtLevel(n,this._root,r),r}else if(arguments.length===3){var i=arguments[0],o=arguments[1],u=arguments[2];if(Se.isTrue(i>-2),o.getLevel()===i)return u.add(o),null;for(var f=o.getChildBoundables().iterator();f.hasNext();){var p=f.next();p instanceof Gn?t.boundablesAtLevel(i,p,u):(Se.isTrue(p instanceof Vi),i===-1&&u.add(p))}return null}};Kn.prototype.query=function(){var t=this;if(arguments.length===1){var n=arguments[0];this.build();var r=new $t;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r),r}else if(arguments.length===2){var i=arguments[0],o=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),i)&&this.query(i,this._root,o)}else if(arguments.length===3){if(ve(arguments[2],Wo)&&arguments[0]instanceof Object&&arguments[1]instanceof Gn)for(var u=arguments[0],f=arguments[1],p=arguments[2],_=f.getChildBoundables(),y=0;y<_.size();y++){var C=_.get(y);t.getIntersectsOp().intersects(C.getBounds(),u)&&(C instanceof Gn?t.query(u,C,p):C instanceof Vi?p.visitItem(C.getItem()):Se.shouldNeverReachHere())}else if(ve(arguments[2],Fi)&&arguments[0]instanceof Object&&arguments[1]instanceof Gn)for(var S=arguments[0],k=arguments[1],P=arguments[2],R=k.getChildBoundables(),O=0;O<R.size();O++){var H=R.get(O);t.getIntersectsOp().intersects(H.getBounds(),S)&&(H instanceof Gn?t.query(S,H,P):H instanceof Vi?P.add(H.getItem()):Se.shouldNeverReachHere())}}};Kn.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0};Kn.prototype.getRoot=function(){return this.build(),this._root};Kn.prototype.remove=function(){var t=this;if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.build(),this.getIntersectsOp().intersects(this._root.getBounds(),n)?this.remove(n,this._root,r):!1}else if(arguments.length===3){var i=arguments[0],o=arguments[1],u=arguments[2],f=this.removeItem(o,u);if(f)return!0;for(var p=null,_=o.getChildBoundables().iterator();_.hasNext();){var y=_.next();if(t.getIntersectsOp().intersects(y.getBounds(),i)&&y instanceof Gn&&(f=t.remove(i,y,u),f)){p=y;break}}return p!==null&&p.getChildBoundables().isEmpty()&&o.getChildBoundables().remove(p),f}};Kn.prototype.createHigherLevels=function(t,n){Se.isTrue(!t.isEmpty());var r=this.createParentBoundables(t,n+1);return r.size()===1?r.get(0):this.createHigherLevels(r,n+1)};Kn.prototype.depth=function(){var t=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var n=arguments[0],r=0,i=n.getChildBoundables().iterator();i.hasNext();){var o=i.next();if(o instanceof Gn){var u=t.depth(o);u>r&&(r=u)}}return r+1}};Kn.prototype.createParentBoundables=function(t,n){var r=this;Se.isTrue(!t.isEmpty());var i=new $t;i.add(this.createNode(n));var o=new $t(t);ji.sort(o,this.getComparator());for(var u=o.iterator();u.hasNext();){var f=u.next();r.lastNode(i).getChildBoundables().size()===r.getNodeCapacity()&&i.add(r.createNode(n)),r.lastNode(i).addChildBoundable(f)}return i};Kn.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()};Kn.prototype.interfaces_=function(){return[ki]};Kn.prototype.getClass=function(){return Kn};Kn.compareDoubles=function(t,n){return t>n?1:t<n?-1:0};$p.IntersectsOp.get=function(){return BS};$p.serialVersionUID.get=function(){return-3886435814360241e3};$p.DEFAULT_NODE_CAPACITY.get=function(){return 10};Object.defineProperties(Kn,$p);var BS=function(){},Il=function(){};Il.prototype.distance=function(t,n){};Il.prototype.interfaces_=function(){return[]};Il.prototype.getClass=function(){return Il};var Yv=function(e){function t(r){r=r||t.DEFAULT_NODE_CAPACITY,e.call(this,r)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return t.prototype.createParentBoundablesFromVerticalSlices=function(i,o){var u=this;Se.isTrue(i.length>0);for(var f=new $t,p=0;p<i.length;p++)f.addAll(u.createParentBoundablesFromVerticalSlice(i[p],o));return f},t.prototype.createNode=function(i){return new p0(i)},t.prototype.size=function(){return arguments.length===0?e.prototype.size.call(this):e.prototype.size.apply(this,arguments)},t.prototype.insert=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];if(i.isNull())return null;e.prototype.insert.call(this,i,o)}else return e.prototype.insert.apply(this,arguments)},t.prototype.getIntersectsOp=function(){return t.intersectsOp},t.prototype.verticalSlices=function(i,o){for(var u=Math.trunc(Math.ceil(i.size()/o)),f=new Array(o).fill(null),p=i.iterator(),_=0;_<o;_++){f[_]=new $t;for(var y=0;p.hasNext()&&y<u;){var C=p.next();f[_].add(C),y++}}return f},t.prototype.query=function(){if(arguments.length===1){var i=arguments[0];return e.prototype.query.call(this,i)}else if(arguments.length===2){var o=arguments[0],u=arguments[1];e.prototype.query.call(this,o,u)}else if(arguments.length===3){if(ve(arguments[2],Wo)&&arguments[0]instanceof Object&&arguments[1]instanceof Gn){var f=arguments[0],p=arguments[1],_=arguments[2];e.prototype.query.call(this,f,p,_)}else if(ve(arguments[2],Fi)&&arguments[0]instanceof Object&&arguments[1]instanceof Gn){var y=arguments[0],C=arguments[1],S=arguments[2];e.prototype.query.call(this,y,C,S)}}},t.prototype.getComparator=function(){return t.yComparator},t.prototype.createParentBoundablesFromVerticalSlice=function(i,o){return e.prototype.createParentBoundables.call(this,i,o)},t.prototype.remove=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return e.prototype.remove.call(this,i,o)}else return e.prototype.remove.apply(this,arguments)},t.prototype.depth=function(){return arguments.length===0?e.prototype.depth.call(this):e.prototype.depth.apply(this,arguments)},t.prototype.createParentBoundables=function(i,o){Se.isTrue(!i.isEmpty());var u=Math.trunc(Math.ceil(i.size()/this.getNodeCapacity())),f=new $t(i);ji.sort(f,t.xComparator);var p=this.verticalSlices(f,Math.trunc(Math.ceil(Math.sqrt(u))));return this.createParentBoundablesFromVerticalSlices(p,o)},t.prototype.nearestNeighbour=function(){if(arguments.length===1){if(ve(arguments[0],Il)){var i=arguments[0],o=new An(this.getRoot(),this.getRoot(),i);return this.nearestNeighbour(o)}else if(arguments[0]instanceof An){var u=arguments[0];return this.nearestNeighbour(u,be.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof t&&ve(arguments[1],Il)){var f=arguments[0],p=arguments[1],_=new An(this.getRoot(),f.getRoot(),p);return this.nearestNeighbour(_)}else if(arguments[0]instanceof An&&typeof arguments[1]=="number"){var y=arguments[0],C=arguments[1],S=C,k=null,P=new xo;for(P.add(y);!P.isEmpty()&&S>0;){var R=P.poll(),O=R.getDistance();if(O>=S)break;R.isLeaves()?(S=O,k=R):R.expandToQueue(P,S)}return[k.getBoundable(0).getItem(),k.getBoundable(1).getItem()]}}else if(arguments.length===3){var H=arguments[0],X=arguments[1],U=arguments[2],ut=new Vi(H,X),It=new An(this.getRoot(),ut,U);return this.nearestNeighbour(It)[0]}},t.prototype.interfaces_=function(){return[du,ki]},t.prototype.getClass=function(){return t},t.centreX=function(i){return t.avg(i.getMinX(),i.getMaxX())},t.avg=function(i,o){return(i+o)/2},t.centreY=function(i){return t.avg(i.getMinY(),i.getMaxY())},n.STRtreeNode.get=function(){return p0},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[vl]},compare:function(r,i){return e.compareDoubles(t.centreX(r.getBounds()),t.centreX(i.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[vl]},compare:function(r,i){return e.compareDoubles(t.centreY(r.getBounds()),t.centreY(i.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[e.IntersectsOp]},intersects:function(r,i){return r.intersects(i)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(t,n),t}(Kn),p0=function(e){function t(){var n=arguments[0];e.call(this,n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.computeBounds=function(){for(var r=null,i=this.getChildBoundables().iterator();i.hasNext();){var o=i.next();r===null?r=new he(o.getBounds()):r.expandToInclude(o.getBounds())}return r},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Gn),Dr=function(){};Dr.prototype.interfaces_=function(){return[]};Dr.prototype.getClass=function(){return Dr};Dr.relativeSign=function(t,n){return t<n?-1:t>n?1:0};Dr.compare=function(t,n,r){if(n.equals2D(r))return 0;var i=Dr.relativeSign(n.x,r.x),o=Dr.relativeSign(n.y,r.y);switch(t){case 0:return Dr.compareValue(i,o);case 1:return Dr.compareValue(o,i);case 2:return Dr.compareValue(o,-i);case 3:return Dr.compareValue(-i,o);case 4:return Dr.compareValue(-i,-o);case 5:return Dr.compareValue(-o,-i);case 6:return Dr.compareValue(-o,i);case 7:return Dr.compareValue(i,-o)}return Se.shouldNeverReachHere("invalid octant value"),0};Dr.compareValue=function(t,n){return t<0?-1:t>0?1:n<0?-1:n>0?1:0};var Ko=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this._segString=t,this.coord=new ct(n),this.segmentIndex=r,this._segmentOctant=i,this._isInterior=!n.equals2D(t.getCoordinate(r))};Ko.prototype.getCoordinate=function(){return this.coord};Ko.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)};Ko.prototype.compareTo=function(t){var n=t;return this.segmentIndex<n.segmentIndex?-1:this.segmentIndex>n.segmentIndex?1:this.coord.equals2D(n.coord)?0:Dr.compare(this._segmentOctant,this.coord,n.coord)};Ko.prototype.isEndPoint=function(t){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===t};Ko.prototype.isInterior=function(){return this._isInterior};Ko.prototype.interfaces_=function(){return[Ii]};Ko.prototype.getClass=function(){return Ko};var Pr=function(){this._nodeMap=new pr,this._edge=null;var t=arguments[0];this._edge=t};Pr.prototype.getSplitCoordinates=function(){var t=this,n=new kh;this.addEndpoints();for(var r=this.iterator(),i=r.next();r.hasNext();){var o=r.next();t.addEdgeCoordinates(i,o,n),i=o}return n.toCoordinateArray()};Pr.prototype.addCollapsedNodes=function(){var t=this,n=new $t;this.findCollapsesFromInsertedNodes(n),this.findCollapsesFromExistingVertices(n);for(var r=n.iterator();r.hasNext();){var i=r.next().intValue();t.add(t._edge.getCoordinate(i),i)}};Pr.prototype.print=function(t){t.println("Intersections:");for(var n=this.iterator();n.hasNext();){var r=n.next();r.print(t)}};Pr.prototype.findCollapsesFromExistingVertices=function(t){for(var n=this,r=0;r<this._edge.size()-2;r++){var i=n._edge.getCoordinate(r),o=n._edge.getCoordinate(r+2);i.equals2D(o)&&t.add(new ds(r+1))}};Pr.prototype.addEdgeCoordinates=function(t,n,r){var i=this,o=this._edge.getCoordinate(n.segmentIndex),u=n.isInterior()||!n.coord.equals2D(o);r.add(new ct(t.coord),!1);for(var f=t.segmentIndex+1;f<=n.segmentIndex;f++)r.add(i._edge.getCoordinate(f));u&&r.add(new ct(n.coord))};Pr.prototype.iterator=function(){return this._nodeMap.values().iterator()};Pr.prototype.addSplitEdges=function(t){var n=this;this.addEndpoints(),this.addCollapsedNodes();for(var r=this.iterator(),i=r.next();r.hasNext();){var o=r.next(),u=n.createSplitEdge(i,o);t.add(u),i=o}};Pr.prototype.findCollapseIndex=function(t,n,r){if(!t.coord.equals2D(n.coord))return!1;var i=n.segmentIndex-t.segmentIndex;return n.isInterior()||i--,i===1?(r[0]=t.segmentIndex+1,!0):!1};Pr.prototype.findCollapsesFromInsertedNodes=function(t){for(var n=this,r=new Array(1).fill(null),i=this.iterator(),o=i.next();i.hasNext();){var u=i.next(),f=n.findCollapseIndex(o,u,r);f&&t.add(new ds(r[0])),o=u}};Pr.prototype.getEdge=function(){return this._edge};Pr.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)};Pr.prototype.createSplitEdge=function(t,n){var r=this,i=n.segmentIndex-t.segmentIndex+2,o=this._edge.getCoordinate(n.segmentIndex),u=n.isInterior()||!n.coord.equals2D(o);u||i--;var f=new Array(i).fill(null),p=0;f[p++]=new ct(t.coord);for(var _=t.segmentIndex+1;_<=n.segmentIndex;_++)f[p++]=r._edge.getCoordinate(_);return u&&(f[p]=new ct(n.coord)),new Mn(f,this._edge.getData())};Pr.prototype.add=function(t,n){var r=new Ko(this._edge,t,n,this._edge.getSegmentOctant(n)),i=this._nodeMap.get(r);return i!==null?(Se.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this._nodeMap.put(r,r),r)};Pr.prototype.checkSplitEdgesCorrectness=function(t){var n=this._edge.getCoordinates(),r=t.get(0),i=r.getCoordinate(0);if(!i.equals2D(n[0]))throw new _o("bad split edge start point at "+i);var o=t.get(t.size()-1),u=o.getCoordinates(),f=u[u.length-1];if(!f.equals2D(n[n.length-1]))throw new _o("bad split edge end point at "+f)};Pr.prototype.interfaces_=function(){return[]};Pr.prototype.getClass=function(){return Pr};var gu=function(){};gu.prototype.interfaces_=function(){return[]};gu.prototype.getClass=function(){return gu};gu.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],n=arguments[1];if(t===0&&n===0)throw new dn("Cannot compute the octant for point ( "+t+", "+n+" )");var r=Math.abs(t),i=Math.abs(n);return t>=0?n>=0?r>=i?0:1:r>=i?7:6:n>=0?r>=i?3:2:r>=i?4:5}else if(arguments[0]instanceof ct&&arguments[1]instanceof ct){var o=arguments[0],u=arguments[1],f=u.x-o.x,p=u.y-o.y;if(f===0&&p===0)throw new dn("Cannot compute the octant for two identical points "+o);return gu.octant(f,p)}};var Us=function(){};Us.prototype.getCoordinates=function(){};Us.prototype.size=function(){};Us.prototype.getCoordinate=function(t){};Us.prototype.isClosed=function(){};Us.prototype.setData=function(t){};Us.prototype.getData=function(){};Us.prototype.interfaces_=function(){return[]};Us.prototype.getClass=function(){return Us};var dh=function(){};dh.prototype.addIntersection=function(t,n){};dh.prototype.interfaces_=function(){return[Us]};dh.prototype.getClass=function(){return dh};var Mn=function(){this._nodeList=new Pr(this),this._pts=null,this._data=null;var t=arguments[0],n=arguments[1];this._pts=t,this._data=n};Mn.prototype.getCoordinates=function(){return this._pts};Mn.prototype.size=function(){return this._pts.length};Mn.prototype.getCoordinate=function(t){return this._pts[t]};Mn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};Mn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))};Mn.prototype.setData=function(t){this._data=t};Mn.prototype.safeOctant=function(t,n){return t.equals2D(n)?0:gu.octant(t,n)};Mn.prototype.getData=function(){return this._data};Mn.prototype.addIntersection=function(){if(arguments.length===2){var t=arguments[0],n=arguments[1];this.addIntersectionNode(t,n)}else if(arguments.length===4){var r=arguments[0],i=arguments[1],o=arguments[3],u=new ct(r.getIntersection(o));this.addIntersection(u,i)}};Mn.prototype.toString=function(){return Gi.toLineString(new wn(this._pts))};Mn.prototype.getNodeList=function(){return this._nodeList};Mn.prototype.addIntersectionNode=function(t,n){var r=n,i=r+1;if(i<this._pts.length){var o=this._pts[i];t.equals2D(o)&&(r=i)}var u=this._nodeList.add(t,r);return u};Mn.prototype.addIntersections=function(t,n,r){for(var i=this,o=0;o<t.getIntersectionNum();o++)i.addIntersection(t,n,r,o)};Mn.prototype.interfaces_=function(){return[dh]};Mn.prototype.getClass=function(){return Mn};Mn.getNodedSubstrings=function(){if(arguments.length===1){var t=arguments[0],n=new $t;return Mn.getNodedSubstrings(t,n),n}else if(arguments.length===2)for(var r=arguments[0],i=arguments[1],o=r.iterator();o.hasNext();){var u=o.next();u.getNodeList().addSplitEdges(i)}};var fe=function(){if(this.p0=null,this.p1=null,arguments.length===0)this.p0=new ct,this.p1=new ct;else if(arguments.length===1){var t=arguments[0];this.p0=new ct(t.p0),this.p1=new ct(t.p1)}else if(arguments.length===2)this.p0=arguments[0],this.p1=arguments[1];else if(arguments.length===4){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this.p0=new ct(n,r),this.p1=new ct(i,o)}},Jv={serialVersionUID:{configurable:!0}};fe.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)};fe.prototype.orientationIndex=function(){if(arguments[0]instanceof fe){var t=arguments[0],n=Qt.orientationIndex(this.p0,this.p1,t.p0),r=Qt.orientationIndex(this.p0,this.p1,t.p1);return n>=0&&r>=0||n<=0&&r<=0?Math.max(n,r):0}else if(arguments[0]instanceof ct){var i=arguments[0];return Qt.orientationIndex(this.p0,this.p1,i)}};fe.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])};fe.prototype.isVertical=function(){return this.p0.x===this.p1.x};fe.prototype.equals=function(t){if(!(t instanceof fe))return!1;var n=t;return this.p0.equals(n.p0)&&this.p1.equals(n.p1)};fe.prototype.intersection=function(t){var n=new Fa;return n.computeIntersection(this.p0,this.p1,t.p0,t.p1),n.hasIntersection()?n.getIntersection(0):null};fe.prototype.project=function(){if(arguments[0]instanceof ct){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new ct(t);var n=this.projectionFactor(t),r=new ct;return r.x=this.p0.x+n*(this.p1.x-this.p0.x),r.y=this.p0.y+n*(this.p1.y-this.p0.y),r}else if(arguments[0]instanceof fe){var i=arguments[0],o=this.projectionFactor(i.p0),u=this.projectionFactor(i.p1);if(o>=1&&u>=1||o<=0&&u<=0)return null;var f=this.project(i.p0);o<0&&(f=this.p0),o>1&&(f=this.p1);var p=this.project(i.p1);return u<0&&(p=this.p0),u>1&&(p=this.p1),new fe(f,p)}};fe.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()};fe.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)};fe.prototype.getCoordinate=function(t){return t===0?this.p0:this.p1};fe.prototype.distancePerpendicular=function(t){return Qt.distancePointLinePerpendicular(t,this.p0,this.p1)};fe.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)};fe.prototype.midPoint=function(){return fe.midPoint(this.p0,this.p1)};fe.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var n=this.p1.x-this.p0.x,r=this.p1.y-this.p0.y,i=n*n+r*r;if(i<=0)return be.NaN;var o=((t.x-this.p0.x)*n+(t.y-this.p0.y)*r)/i;return o};fe.prototype.closestPoints=function(t){var n=this.intersection(t);if(n!==null)return[n,n];var r=new Array(2).fill(null),i=be.MAX_VALUE,o=null,u=this.closestPoint(t.p0);i=u.distance(t.p0),r[0]=u,r[1]=t.p0;var f=this.closestPoint(t.p1);o=f.distance(t.p1),o<i&&(i=o,r[0]=f,r[1]=t.p1);var p=t.closestPoint(this.p0);o=p.distance(this.p0),o<i&&(i=o,r[0]=this.p0,r[1]=p);var _=t.closestPoint(this.p1);return o=_.distance(this.p1),o<i&&(i=o,r[0]=this.p1,r[1]=_),r};fe.prototype.closestPoint=function(t){var n=this.projectionFactor(t);if(n>0&&n<1)return this.project(t);var r=this.p0.distance(t),i=this.p1.distance(t);return r<i?this.p0:this.p1};fe.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)};fe.prototype.getLength=function(){return this.p0.distance(this.p1)};fe.prototype.compareTo=function(t){var n=t,r=this.p0.compareTo(n.p0);return r!==0?r:this.p1.compareTo(n.p1)};fe.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t};fe.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)};fe.prototype.lineIntersection=function(t){try{var n=Bi.intersection(this.p0,this.p1,t.p0,t.p1);return n}catch(r){if(!(r instanceof ql))throw r}finally{}return null};fe.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)};fe.prototype.pointAlongOffset=function(t,n){var r=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),o=this.p1.x-this.p0.x,u=this.p1.y-this.p0.y,f=Math.sqrt(o*o+u*u),p=0,_=0;if(n!==0){if(f<=0)throw new Error("Cannot compute offset from zero-length line segment");p=n*o/f,_=n*u/f}var y=r-_,C=i+p,S=new ct(y,C);return S};fe.prototype.setCoordinates=function(){if(arguments.length===1){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.p0.x=n.x,this.p0.y=n.y,this.p1.x=r.x,this.p1.y=r.y}};fe.prototype.segmentFraction=function(t){var n=this.projectionFactor(t);return n<0?n=0:(n>1||be.isNaN(n))&&(n=1),n};fe.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"};fe.prototype.isHorizontal=function(){return this.p0.y===this.p1.y};fe.prototype.distance=function(){if(arguments[0]instanceof fe){var t=arguments[0];return Qt.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}else if(arguments[0]instanceof ct){var n=arguments[0];return Qt.distancePointLine(n,this.p0,this.p1)}};fe.prototype.pointAlong=function(t){var n=new ct;return n.x=this.p0.x+t*(this.p1.x-this.p0.x),n.y=this.p0.y+t*(this.p1.y-this.p0.y),n};fe.prototype.hashCode=function(){var t=be.doubleToLongBits(this.p0.x);t^=be.doubleToLongBits(this.p0.y)*31;var n=Math.trunc(t)^Math.trunc(t>>32),r=be.doubleToLongBits(this.p1.x);r^=be.doubleToLongBits(this.p1.y)*31;var i=Math.trunc(r)^Math.trunc(r>>32);return n^i};fe.prototype.interfaces_=function(){return[Ii,ki]};fe.prototype.getClass=function(){return fe};fe.midPoint=function(t,n){return new ct((t.x+n.x)/2,(t.y+n.y)/2)};Jv.serialVersionUID.get=function(){return 0x2d2172135f411c00};Object.defineProperties(fe,Jv);var gh=function(){this.tempEnv1=new he,this.tempEnv2=new he,this._overlapSeg1=new fe,this._overlapSeg2=new fe};gh.prototype.overlap=function(){if(arguments.length!==2){if(arguments.length===4){var t=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];t.getLineSegment(n,this._overlapSeg1),r.getLineSegment(i,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}};gh.prototype.interfaces_=function(){return[]};gh.prototype.getClass=function(){return gh};var Yr=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this._pts=t,this._start=n,this._end=r,this._context=i};Yr.prototype.getLineSegment=function(t,n){n.p0=this._pts[t],n.p1=this._pts[t+1]};Yr.prototype.computeSelect=function(t,n,r,i){var o=this._pts[n],u=this._pts[r];if(i.tempEnv1.init(o,u),r-n===1)return i.select(this,n),null;if(!t.intersects(i.tempEnv1))return null;var f=Math.trunc((n+r)/2);n<f&&this.computeSelect(t,n,f,i),f<r&&this.computeSelect(t,f,r,i)};Yr.prototype.getCoordinates=function(){for(var t=this,n=new Array(this._end-this._start+1).fill(null),r=0,i=this._start;i<=this._end;i++)n[r++]=t._pts[i];return n};Yr.prototype.computeOverlaps=function(t,n){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,n)};Yr.prototype.setId=function(t){this._id=t};Yr.prototype.select=function(t,n){this.computeSelect(t,this._start,this._end,n)};Yr.prototype.getEnvelope=function(){if(this._env===null){var t=this._pts[this._start],n=this._pts[this._end];this._env=new he(t,n)}return this._env};Yr.prototype.getEndIndex=function(){return this._end};Yr.prototype.getStartIndex=function(){return this._start};Yr.prototype.getContext=function(){return this._context};Yr.prototype.getId=function(){return this._id};Yr.prototype.computeOverlapsInternal=function(t,n,r,i,o,u){var f=this._pts[t],p=this._pts[n],_=r._pts[i],y=r._pts[o];if(n-t===1&&o-i===1)return u.overlap(this,t,r,i),null;if(u.tempEnv1.init(f,p),u.tempEnv2.init(_,y),!u.tempEnv1.intersects(u.tempEnv2))return null;var C=Math.trunc((t+n)/2),S=Math.trunc((i+o)/2);t<C&&(i<S&&this.computeOverlapsInternal(t,C,r,i,S,u),S<o&&this.computeOverlapsInternal(t,C,r,S,o,u)),C<n&&(i<S&&this.computeOverlapsInternal(C,n,r,i,S,u),S<o&&this.computeOverlapsInternal(C,n,r,S,o,u))};Yr.prototype.interfaces_=function(){return[]};Yr.prototype.getClass=function(){return Yr};var fs=function(){};fs.prototype.interfaces_=function(){return[]};fs.prototype.getClass=function(){return fs};fs.getChainStartIndices=function(t){var n=0,r=new $t;r.add(new ds(n));do{var i=fs.findChainEnd(t,n);r.add(new ds(i)),n=i}while(n<t.length-1);var o=fs.toIntArray(r);return o};fs.findChainEnd=function(t,n){for(var r=n;r<t.length-1&&t[r].equals2D(t[r+1]);)r++;if(r>=t.length-1)return t.length-1;for(var i=tn.quadrant(t[r],t[r+1]),o=n+1;o<t.length;){if(!t[o-1].equals2D(t[o])){var u=tn.quadrant(t[o-1],t[o]);if(u!==i)break}o++}return o-1};fs.getChains=function(){if(arguments.length===1){var t=arguments[0];return fs.getChains(t,null)}else if(arguments.length===2){for(var n=arguments[0],r=arguments[1],i=new $t,o=fs.getChainStartIndices(n),u=0;u<o.length-1;u++){var f=new Yr(n,o[u],o[u+1],r);i.add(f)}return i}};fs.toIntArray=function(t){for(var n=new Array(t.size()).fill(null),r=0;r<n.length;r++)n[r]=t.get(r).intValue();return n};var Pa=function(){};Pa.prototype.computeNodes=function(t){};Pa.prototype.getNodedSubstrings=function(){};Pa.prototype.interfaces_=function(){return[]};Pa.prototype.getClass=function(){return Pa};var mh=function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setSegmentIntersector(t)}}};mh.prototype.setSegmentIntersector=function(t){this._segInt=t};mh.prototype.interfaces_=function(){return[Pa]};mh.prototype.getClass=function(){return mh};var bm=function(e){function t(r){r?e.call(this,r):e.call(this),this._monoChains=new $t,this._index=new Yv,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={SegmentOverlapAction:{configurable:!0}};return t.prototype.getMonotoneChains=function(){return this._monoChains},t.prototype.getNodedSubstrings=function(){return Mn.getNodedSubstrings(this._nodedSegStrings)},t.prototype.getIndex=function(){return this._index},t.prototype.add=function(i){for(var o=this,u=fs.getChains(i.getCoordinates(),i),f=u.iterator();f.hasNext();){var p=f.next();p.setId(o._idCounter++),o._index.insert(p.getEnvelope(),p),o._monoChains.add(p)}},t.prototype.computeNodes=function(i){var o=this;this._nodedSegStrings=i;for(var u=i.iterator();u.hasNext();)o.add(u.next());this.intersectChains()},t.prototype.intersectChains=function(){for(var i=this,o=new d0(this._segInt),u=this._monoChains.iterator();u.hasNext();)for(var f=u.next(),p=i._index.query(f.getEnvelope()),_=p.iterator();_.hasNext();){var y=_.next();if(y.getId()>f.getId()&&(f.computeOverlaps(y,o),i._nOverlaps++),i._segInt.isDone())return null}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.SegmentOverlapAction.get=function(){return d0},Object.defineProperties(t,n),t}(mh),d0=function(e){function t(){e.call(this),this._si=null;var n=arguments[0];this._si=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.overlap=function(){if(arguments.length===4){var r=arguments[0],i=arguments[1],o=arguments[2],u=arguments[3],f=r.getContext(),p=o.getContext();this._si.processIntersections(f,i,p,u)}else return e.prototype.overlap.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(gh),Ve=function e(){if(this._quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=e.CAP_ROUND,this._joinStyle=e.JOIN_ROUND,this._mitreLimit=e.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=e.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setQuadrantSegments(t)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(arguments.length===4){var i=arguments[0],o=arguments[1],u=arguments[2],f=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(u),this.setMitreLimit(f)}}},Lo={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Ve.prototype.getEndCapStyle=function(){return this._endCapStyle};Ve.prototype.isSingleSided=function(){return this._isSingleSided};Ve.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,this._quadrantSegments===0&&(this._joinStyle=Ve.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Ve.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Ve.JOIN_ROUND&&(this._quadrantSegments=Ve.DEFAULT_QUADRANT_SEGMENTS)};Ve.prototype.getJoinStyle=function(){return this._joinStyle};Ve.prototype.setJoinStyle=function(t){this._joinStyle=t};Ve.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t};Ve.prototype.getSimplifyFactor=function(){return this._simplifyFactor};Ve.prototype.getQuadrantSegments=function(){return this._quadrantSegments};Ve.prototype.setEndCapStyle=function(t){this._endCapStyle=t};Ve.prototype.getMitreLimit=function(){return this._mitreLimit};Ve.prototype.setMitreLimit=function(t){this._mitreLimit=t};Ve.prototype.setSingleSided=function(t){this._isSingleSided=t};Ve.prototype.interfaces_=function(){return[]};Ve.prototype.getClass=function(){return Ve};Ve.bufferDistanceError=function(t){var n=Math.PI/2/t;return 1-Math.cos(n/2)};Lo.CAP_ROUND.get=function(){return 1};Lo.CAP_FLAT.get=function(){return 2};Lo.CAP_SQUARE.get=function(){return 3};Lo.JOIN_ROUND.get=function(){return 1};Lo.JOIN_MITRE.get=function(){return 2};Lo.JOIN_BEVEL.get=function(){return 3};Lo.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8};Lo.DEFAULT_MITRE_LIMIT.get=function(){return 5};Lo.DEFAULT_SIMPLIFY_FACTOR.get=function(){return .01};Object.defineProperties(Ve,Lo);var En=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Qt.COUNTERCLOCKWISE,this._inputLine=t||null},Dh={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};En.prototype.isDeletable=function(t,n,r,i){var o=this._inputLine[t],u=this._inputLine[n],f=this._inputLine[r];return!this.isConcave(o,u,f)||!this.isShallow(o,u,f,i)?!1:this.isShallowSampled(o,u,t,r,i)};En.prototype.deleteShallowConcavities=function(){for(var t=this,n=1,r=this.findNextNonDeletedIndex(n),i=this.findNextNonDeletedIndex(r),o=!1;i<this._inputLine.length;){var u=!1;t.isDeletable(n,r,i,t._distanceTol)&&(t._isDeleted[r]=En.DELETE,u=!0,o=!0),u?n=i:n=r,r=t.findNextNonDeletedIndex(n),i=t.findNextNonDeletedIndex(r)}return o};En.prototype.isShallowConcavity=function(t,n,r,i){var o=Qt.computeOrientation(t,n,r),u=o===this._angleOrientation;if(!u)return!1;var f=Qt.distancePointLine(n,t,r);return f<i};En.prototype.isShallowSampled=function(t,n,r,i,o){var u=this,f=Math.trunc((i-r)/En.NUM_PTS_TO_CHECK);f<=0&&(f=1);for(var p=r;p<i;p+=f)if(!u.isShallow(t,n,u._inputLine[p],o))return!1;return!0};En.prototype.isConcave=function(t,n,r){var i=Qt.computeOrientation(t,n,r),o=i===this._angleOrientation;return o};En.prototype.simplify=function(t){var n=this;this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=Qt.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var r=!1;do r=n.deleteShallowConcavities();while(r);return this.collapseLine()};En.prototype.findNextNonDeletedIndex=function(t){for(var n=t+1;n<this._inputLine.length&&this._isDeleted[n]===En.DELETE;)n++;return n};En.prototype.isShallow=function(t,n,r,i){var o=Qt.distancePointLine(n,t,r);return o<i};En.prototype.collapseLine=function(){for(var t=this,n=new kh,r=0;r<this._inputLine.length;r++)t._isDeleted[r]!==En.DELETE&&n.add(t._inputLine[r]);return n.toCoordinateArray()};En.prototype.interfaces_=function(){return[]};En.prototype.getClass=function(){return En};En.simplify=function(t,n){var r=new En(t);return r.simplify(n)};Dh.INIT.get=function(){return 0};Dh.DELETE.get=function(){return 1};Dh.KEEP.get=function(){return 1};Dh.NUM_PTS_TO_CHECK.get=function(){return 10};Object.defineProperties(En,Dh);var di=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new $t},Qv={COORDINATE_ARRAY_TYPE:{configurable:!0}};di.prototype.getCoordinates=function(){var t=this._ptList.toArray(di.COORDINATE_ARRAY_TYPE);return t};di.prototype.setPrecisionModel=function(t){this._precisionModel=t};di.prototype.addPt=function(t){var n=new ct(t);if(this._precisionModel.makePrecise(n),this.isRedundant(n))return null;this._ptList.add(n)};di.prototype.revere=function(){};di.prototype.addPts=function(t,n){var r=this;if(n)for(var i=0;i<t.length;i++)r.addPt(t[i]);else for(var o=t.length-1;o>=0;o--)r.addPt(t[o])};di.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var n=this._ptList.get(this._ptList.size()-1),r=t.distance(n);return r<this._minimimVertexDistance};di.prototype.toString=function(){var t=new De,n=t.createLineString(this.getCoordinates());return n.toString()};di.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new ct(this._ptList.get(0)),n=this._ptList.get(this._ptList.size()-1);if(t.equals(n))return null;this._ptList.add(t)};di.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t};di.prototype.interfaces_=function(){return[]};di.prototype.getClass=function(){return di};Qv.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)};Object.defineProperties(di,Qv);var Fe=function(){},ku={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Fe.prototype.interfaces_=function(){return[]};Fe.prototype.getClass=function(){return Fe};Fe.toDegrees=function(t){return t*180/Math.PI};Fe.normalize=function(t){for(;t>Math.PI;)t-=Fe.PI_TIMES_2;for(;t<=-Math.PI;)t+=Fe.PI_TIMES_2;return t};Fe.angle=function(){if(arguments.length===1){var t=arguments[0];return Math.atan2(t.y,t.x)}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=r.x-n.x,o=r.y-n.y;return Math.atan2(o,i)}};Fe.isAcute=function(t,n,r){var i=t.x-n.x,o=t.y-n.y,u=r.x-n.x,f=r.y-n.y,p=i*u+o*f;return p>0};Fe.isObtuse=function(t,n,r){var i=t.x-n.x,o=t.y-n.y,u=r.x-n.x,f=r.y-n.y,p=i*u+o*f;return p<0};Fe.interiorAngle=function(t,n,r){var i=Fe.angle(n,t),o=Fe.angle(n,r);return Math.abs(o-i)};Fe.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Fe.PI_TIMES_2;t>=Fe.PI_TIMES_2&&(t=0)}else{for(;t>=Fe.PI_TIMES_2;)t-=Fe.PI_TIMES_2;t<0&&(t=0)}return t};Fe.angleBetween=function(t,n,r){var i=Fe.angle(n,t),o=Fe.angle(n,r);return Fe.diff(i,o)};Fe.diff=function(t,n){var r=null;return t<n?r=n-t:r=t-n,r>Math.PI&&(r=2*Math.PI-r),r};Fe.toRadians=function(t){return t*Math.PI/180};Fe.getTurn=function(t,n){var r=Math.sin(n-t);return r>0?Fe.COUNTERCLOCKWISE:r<0?Fe.CLOCKWISE:Fe.NONE};Fe.angleBetweenOriented=function(t,n,r){var i=Fe.angle(n,t),o=Fe.angle(n,r),u=o-i;return u<=-Math.PI?u+Fe.PI_TIMES_2:u>Math.PI?u-Fe.PI_TIMES_2:u};ku.PI_TIMES_2.get=function(){return 2*Math.PI};ku.PI_OVER_2.get=function(){return Math.PI/2};ku.PI_OVER_4.get=function(){return Math.PI/4};ku.COUNTERCLOCKWISE.get=function(){return Qt.COUNTERCLOCKWISE};ku.CLOCKWISE.get=function(){return Qt.CLOCKWISE};ku.NONE.get=function(){return Qt.COLLINEAR};Object.defineProperties(Fe,ku);var cn=function e(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new fe,this._seg1=new fe,this._offset0=new fe,this._offset1=new fe,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=t,this._bufParams=n,this._li=new Fa,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Ve.JOIN_ROUND&&(this._closingSegLengthFactor=e.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},Nh={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};cn.prototype.addNextSegment=function(t,n){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var r=Qt.computeOrientation(this._s0,this._s1,this._s2),i=r===Qt.CLOCKWISE&&this._side===qt.LEFT||r===Qt.COUNTERCLOCKWISE&&this._side===qt.RIGHT;r===0?this.addCollinear(n):i?this.addOutsideTurn(r,n):this.addInsideTurn(r,n)};cn.prototype.addLineEndCap=function(t,n){var r=new fe(t,n),i=new fe;this.computeOffsetSegment(r,qt.LEFT,this._distance,i);var o=new fe;this.computeOffsetSegment(r,qt.RIGHT,this._distance,o);var u=n.x-t.x,f=n.y-t.y,p=Math.atan2(f,u);switch(this._bufParams.getEndCapStyle()){case Ve.CAP_ROUND:this._segList.addPt(i.p1),this.addFilletArc(n,p+Math.PI/2,p-Math.PI/2,Qt.CLOCKWISE,this._distance),this._segList.addPt(o.p1);break;case Ve.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(o.p1);break;case Ve.CAP_SQUARE:var _=new ct;_.x=Math.abs(this._distance)*Math.cos(p),_.y=Math.abs(this._distance)*Math.sin(p);var y=new ct(i.p1.x+_.x,i.p1.y+_.y),C=new ct(o.p1.x+_.x,o.p1.y+_.y);this._segList.addPt(y),this._segList.addPt(C);break}};cn.prototype.getCoordinates=function(){var t=this._segList.getCoordinates();return t};cn.prototype.addMitreJoin=function(t,n,r,i){var o=!0,u=null;try{u=Bi.intersection(n.p0,n.p1,r.p0,r.p1);var f=i<=0?1:u.distance(t)/Math.abs(i);f>this._bufParams.getMitreLimit()&&(o=!1)}catch(p){if(p instanceof ql)u=new ct(0,0),o=!1;else throw p}finally{}o?this._segList.addPt(u):this.addLimitedMitreJoin(n,r,i,this._bufParams.getMitreLimit())};cn.prototype.addFilletCorner=function(t,n,r,i,o){var u=n.x-t.x,f=n.y-t.y,p=Math.atan2(f,u),_=r.x-t.x,y=r.y-t.y,C=Math.atan2(y,_);i===Qt.CLOCKWISE?p<=C&&(p+=2*Math.PI):p>=C&&(p-=2*Math.PI),this._segList.addPt(n),this.addFilletArc(t,p,C,i,o),this._segList.addPt(r)};cn.prototype.addOutsideTurn=function(t,n){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*cn.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Ve.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Ve.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(n&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))};cn.prototype.createSquare=function(t){this._segList.addPt(new ct(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new ct(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new ct(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new ct(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()};cn.prototype.addSegments=function(t,n){this._segList.addPts(t,n)};cn.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)};cn.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)};cn.prototype.initSideSegments=function(t,n,r){this._s1=t,this._s2=n,this._side=r,this._seg1.setCoordinates(t,n),this.computeOffsetSegment(this._seg1,r,this._distance,this._offset1)};cn.prototype.addLimitedMitreJoin=function(t,n,r,i){var o=this._seg0.p1,u=Fe.angle(o,this._seg0.p0),f=Fe.angleBetweenOriented(this._seg0.p0,o,this._seg1.p1),p=f/2,_=Fe.normalize(u+p),y=Fe.normalize(_+Math.PI),C=i*r,S=C*Math.abs(Math.sin(p)),k=r-S,P=o.x+C*Math.cos(y),R=o.y+C*Math.sin(y),O=new ct(P,R),H=new fe(o,O),X=H.pointAlongOffset(1,k),U=H.pointAlongOffset(1,-k);this._side===qt.LEFT?(this._segList.addPt(X),this._segList.addPt(U)):(this._segList.addPt(U),this._segList.addPt(X))};cn.prototype.computeOffsetSegment=function(t,n,r,i){var o=n===qt.LEFT?1:-1,u=t.p1.x-t.p0.x,f=t.p1.y-t.p0.y,p=Math.sqrt(u*u+f*f),_=o*r*u/p,y=o*r*f/p;i.p0.x=t.p0.x-y,i.p0.y=t.p0.y+_,i.p1.x=t.p1.x-y,i.p1.y=t.p1.y+_};cn.prototype.addFilletArc=function(t,n,r,i,o){var u=this,f=i===Qt.CLOCKWISE?-1:1,p=Math.abs(n-r),_=Math.trunc(p/this._filletAngleQuantum+.5);if(_<1)return null;for(var y=0,C=p/_,S=y,k=new ct;S<p;){var P=n+f*S;k.x=t.x+o*Math.cos(P),k.y=t.y+o*Math.sin(P),u._segList.addPt(k),S+=C}};cn.prototype.addInsideTurn=function(t,n){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*cn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var r=new ct((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r);var i=new ct((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}};cn.prototype.createCircle=function(t){var n=new ct(t.x+this._distance,t.y);this._segList.addPt(n),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()};cn.prototype.addBevelJoin=function(t,n){this._segList.addPt(t.p1),this._segList.addPt(n.p0)};cn.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new di,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*cn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)};cn.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2);var n=this._li.getIntersectionNum();n>=2&&(this._bufParams.getJoinStyle()===Ve.JOIN_BEVEL||this._bufParams.getJoinStyle()===Ve.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Qt.CLOCKWISE,this._distance))};cn.prototype.closeRing=function(){this._segList.closeRing()};cn.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle};cn.prototype.interfaces_=function(){return[]};cn.prototype.getClass=function(){return cn};Nh.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return .001};Nh.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return .001};Nh.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6};Nh.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80};Object.defineProperties(cn,Nh);var Or=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],n=arguments[1];this._precisionModel=t,this._bufParams=n};Or.prototype.getOffsetCurve=function(t,n){if(this._distance=n,n===0)return null;var r=n<0,i=Math.abs(n),o=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],o):this.computeOffsetCurve(t,r,o);var u=o.getCoordinates();return r&&Ne.reverse(u),u};Or.prototype.computeSingleSidedBufferCurve=function(t,n,r){var i=this.simplifyTolerance(this._distance);if(n){r.addSegments(t,!0);var o=En.simplify(t,-i),u=o.length-1;r.initSideSegments(o[u],o[u-1],qt.LEFT),r.addFirstSegment();for(var f=u-2;f>=0;f--)r.addNextSegment(o[f],!0)}else{r.addSegments(t,!1);var p=En.simplify(t,i),_=p.length-1;r.initSideSegments(p[0],p[1],qt.LEFT),r.addFirstSegment();for(var y=2;y<=_;y++)r.addNextSegment(p[y],!0)}r.addLastSegment(),r.closeRing()};Or.prototype.computeRingBufferCurve=function(t,n,r){var i=this.simplifyTolerance(this._distance);n===qt.RIGHT&&(i=-i);var o=En.simplify(t,i),u=o.length-1;r.initSideSegments(o[u-1],o[0],n);for(var f=1;f<=u;f++){var p=f!==1;r.addNextSegment(o[f],p)}r.closeRing()};Or.prototype.computeLineBufferCurve=function(t,n){var r=this.simplifyTolerance(this._distance),i=En.simplify(t,r),o=i.length-1;n.initSideSegments(i[0],i[1],qt.LEFT);for(var u=2;u<=o;u++)n.addNextSegment(i[u],!0);n.addLastSegment(),n.addLineEndCap(i[o-1],i[o]);var f=En.simplify(t,-r),p=f.length-1;n.initSideSegments(f[p],f[p-1],qt.LEFT);for(var _=p-2;_>=0;_--)n.addNextSegment(f[_],!0);n.addLastSegment(),n.addLineEndCap(f[1],f[0]),n.closeRing()};Or.prototype.computePointCurve=function(t,n){switch(this._bufParams.getEndCapStyle()){case Ve.CAP_ROUND:n.createCircle(t);break;case Ve.CAP_SQUARE:n.createSquare(t);break}};Or.prototype.getLineCurve=function(t,n){if(this._distance=n,n<0&&!this._bufParams.isSingleSided()||n===0)return null;var r=Math.abs(n),i=this.getSegGen(r);if(t.length<=1)this.computePointCurve(t[0],i);else if(this._bufParams.isSingleSided()){var o=n<0;this.computeSingleSidedBufferCurve(t,o,i)}else this.computeLineBufferCurve(t,i);var u=i.getCoordinates();return u};Or.prototype.getBufferParameters=function(){return this._bufParams};Or.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()};Or.prototype.getRingCurve=function(t,n,r){if(this._distance=r,t.length<=2)return this.getLineCurve(t,r);if(r===0)return Or.copyCoordinates(t);var i=this.getSegGen(r);return this.computeRingBufferCurve(t,n,i),i.getCoordinates()};Or.prototype.computeOffsetCurve=function(t,n,r){var i=this.simplifyTolerance(this._distance);if(n){var o=En.simplify(t,-i),u=o.length-1;r.initSideSegments(o[u],o[u-1],qt.LEFT),r.addFirstSegment();for(var f=u-2;f>=0;f--)r.addNextSegment(o[f],!0)}else{var p=En.simplify(t,i),_=p.length-1;r.initSideSegments(p[0],p[1],qt.LEFT),r.addFirstSegment();for(var y=2;y<=_;y++)r.addNextSegment(p[y],!0)}r.addLastSegment()};Or.prototype.getSegGen=function(t){return new cn(this._precisionModel,this._bufParams,t)};Or.prototype.interfaces_=function(){return[]};Or.prototype.getClass=function(){return Or};Or.copyCoordinates=function(t){for(var n=new Array(t.length).fill(null),r=0;r<n.length;r++)n[r]=new ct(t[r]);return n};var mu=function(){this._subgraphs=null,this._seg=new fe,this._cga=new Qt;var t=arguments[0];this._subgraphs=t},tx={DepthSegment:{configurable:!0}};mu.prototype.findStabbedSegments=function(){var t=this;if(arguments.length===1){for(var n=arguments[0],r=new $t,i=this._subgraphs.iterator();i.hasNext();){var o=i.next(),u=o.getEnvelope();n.y<u.getMinY()||n.y>u.getMaxY()||t.findStabbedSegments(n,o.getDirectedEdges(),r)}return r}else if(arguments.length===3){if(ve(arguments[2],Fi)&&arguments[0]instanceof ct&&arguments[1]instanceof Bg)for(var f=arguments[0],p=arguments[1],_=arguments[2],y=p.getEdge().getCoordinates(),C=0;C<y.length-1;C++){t._seg.p0=y[C],t._seg.p1=y[C+1],t._seg.p0.y>t._seg.p1.y&&t._seg.reverse();var S=Math.max(t._seg.p0.x,t._seg.p1.x);if(!(S<f.x)&&!t._seg.isHorizontal()&&!(f.y<t._seg.p0.y||f.y>t._seg.p1.y)&&Qt.computeOrientation(t._seg.p0,t._seg.p1,f)!==Qt.RIGHT){var k=p.getDepth(qt.LEFT);t._seg.p0.equals(y[C])||(k=p.getDepth(qt.RIGHT));var P=new Ma(t._seg,k);_.add(P)}}else if(ve(arguments[2],Fi)&&arguments[0]instanceof ct&&ve(arguments[1],Fi))for(var R=arguments[0],O=arguments[1],H=arguments[2],X=O.iterator();X.hasNext();){var U=X.next();U.isForward()&&t.findStabbedSegments(R,U,H)}}};mu.prototype.getDepth=function(t){var n=this.findStabbedSegments(t);if(n.size()===0)return 0;var r=ji.min(n);return r._leftDepth};mu.prototype.interfaces_=function(){return[]};mu.prototype.getClass=function(){return mu};tx.DepthSegment.get=function(){return Ma};Object.defineProperties(mu,tx);var Ma=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],n=arguments[1];this._upwardSeg=new fe(t),this._leftDepth=n};Ma.prototype.compareTo=function(t){var n=t;if(this._upwardSeg.minX()>=n._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=n._upwardSeg.minX())return-1;var r=this._upwardSeg.orientationIndex(n._upwardSeg);return r!==0||(r=-1*n._upwardSeg.orientationIndex(this._upwardSeg),r!==0)?r:this._upwardSeg.compareTo(n._upwardSeg)};Ma.prototype.compareX=function(t,n){var r=t.p0.compareTo(n.p0);return r!==0?r:t.p1.compareTo(n.p1)};Ma.prototype.toString=function(){return this._upwardSeg.toString()};Ma.prototype.interfaces_=function(){return[Ii]};Ma.prototype.getClass=function(){return Ma};var qe=function(t,n,r){this.p0=t||null,this.p1=n||null,this.p2=r||null};qe.prototype.area=function(){return qe.area(this.p0,this.p1,this.p2)};qe.prototype.signedArea=function(){return qe.signedArea(this.p0,this.p1,this.p2)};qe.prototype.interpolateZ=function(t){if(t===null)throw new dn("Supplied point is null.");return qe.interpolateZ(t,this.p0,this.p1,this.p2)};qe.prototype.longestSideLength=function(){return qe.longestSideLength(this.p0,this.p1,this.p2)};qe.prototype.isAcute=function(){return qe.isAcute(this.p0,this.p1,this.p2)};qe.prototype.circumcentre=function(){return qe.circumcentre(this.p0,this.p1,this.p2)};qe.prototype.area3D=function(){return qe.area3D(this.p0,this.p1,this.p2)};qe.prototype.centroid=function(){return qe.centroid(this.p0,this.p1,this.p2)};qe.prototype.inCentre=function(){return qe.inCentre(this.p0,this.p1,this.p2)};qe.prototype.interfaces_=function(){return[]};qe.prototype.getClass=function(){return qe};qe.area=function(t,n,r){return Math.abs(((r.x-t.x)*(n.y-t.y)-(n.x-t.x)*(r.y-t.y))/2)};qe.signedArea=function(t,n,r){return((r.x-t.x)*(n.y-t.y)-(n.x-t.x)*(r.y-t.y))/2};qe.det=function(t,n,r,i){return t*i-n*r};qe.interpolateZ=function(t,n,r,i){var o=n.x,u=n.y,f=r.x-o,p=i.x-o,_=r.y-u,y=i.y-u,C=f*y-p*_,S=t.x-o,k=t.y-u,P=(y*S-p*k)/C,R=(-_*S+f*k)/C,O=n.z+P*(r.z-n.z)+R*(i.z-n.z);return O};qe.longestSideLength=function(t,n,r){var i=t.distance(n),o=n.distance(r),u=r.distance(t),f=i;return o>f&&(f=o),u>f&&(f=u),f};qe.isAcute=function(t,n,r){return!(!Fe.isAcute(t,n,r)||!Fe.isAcute(n,r,t)||!Fe.isAcute(r,t,n))};qe.circumcentre=function(t,n,r){var i=r.x,o=r.y,u=t.x-i,f=t.y-o,p=n.x-i,_=n.y-o,y=2*qe.det(u,f,p,_),C=qe.det(f,u*u+f*f,_,p*p+_*_),S=qe.det(u,u*u+f*f,p,p*p+_*_),k=i-C/y,P=o+S/y;return new ct(k,P)};qe.perpendicularBisector=function(t,n){var r=n.x-t.x,i=n.y-t.y,o=new Bi(t.x+r/2,t.y+i/2,1),u=new Bi(t.x-i+r/2,t.y+r+i/2,1);return new Bi(o,u)};qe.angleBisector=function(t,n,r){var i=n.distance(t),o=n.distance(r),u=i/(i+o),f=r.x-t.x,p=r.y-t.y,_=new ct(t.x+u*f,t.y+u*p);return _};qe.area3D=function(t,n,r){var i=n.x-t.x,o=n.y-t.y,u=n.z-t.z,f=r.x-t.x,p=r.y-t.y,_=r.z-t.z,y=o*_-u*p,C=u*f-i*_,S=i*p-o*f,k=y*y+C*C+S*S,P=Math.sqrt(k)/2;return P};qe.centroid=function(t,n,r){var i=(t.x+n.x+r.x)/3,o=(t.y+n.y+r.y)/3;return new ct(i,o)};qe.inCentre=function(t,n,r){var i=n.distance(r),o=t.distance(r),u=t.distance(n),f=i+o+u,p=(i*t.x+o*n.x+u*r.x)/f,_=(i*t.y+o*n.y+u*r.y)/f;return new ct(p,_)};var Mi=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new $t;var t=arguments[0],n=arguments[1],r=arguments[2];this._inputGeom=t,this._distance=n,this._curveBuilder=r};Mi.prototype.addPoint=function(t){if(this._distance<=0)return null;var n=t.getCoordinates(),r=this._curveBuilder.getLineCurve(n,this._distance);this.addCurve(r,yt.EXTERIOR,yt.INTERIOR)};Mi.prototype.addPolygon=function(t){var n=this,r=this._distance,i=qt.LEFT;this._distance<0&&(r=-this._distance,i=qt.RIGHT);var o=t.getExteriorRing(),u=Ne.removeRepeatedPoints(o.getCoordinates());if(this._distance<0&&this.isErodedCompletely(o,this._distance)||this._distance<=0&&u.length<3)return null;this.addPolygonRing(u,r,i,yt.EXTERIOR,yt.INTERIOR);for(var f=0;f<t.getNumInteriorRing();f++){var p=t.getInteriorRingN(f),_=Ne.removeRepeatedPoints(p.getCoordinates());n._distance>0&&n.isErodedCompletely(p,-n._distance)||n.addPolygonRing(_,r,qt.opposite(i),yt.INTERIOR,yt.EXTERIOR)}};Mi.prototype.isTriangleErodedCompletely=function(t,n){var r=new qe(t[0],t[1],t[2]),i=r.inCentre(),o=Qt.distancePointLine(i,r.p0,r.p1);return o<Math.abs(n)};Mi.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var n=Ne.removeRepeatedPoints(t.getCoordinates()),r=this._curveBuilder.getLineCurve(n,this._distance);this.addCurve(r,yt.EXTERIOR,yt.INTERIOR)};Mi.prototype.addCurve=function(t,n,r){if(t===null||t.length<2)return null;var i=new Mn(t,new $e(0,yt.BOUNDARY,n,r));this._curveList.add(i)};Mi.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList};Mi.prototype.addPolygonRing=function(t,n,r,i,o){if(n===0&&t.length<zs.MINIMUM_VALID_SIZE)return null;var u=i,f=o;t.length>=zs.MINIMUM_VALID_SIZE&&Qt.isCCW(t)&&(u=o,f=i,r=qt.opposite(r));var p=this._curveBuilder.getRingCurve(t,r,n);this.addCurve(p,u,f)};Mi.prototype.add=function(t){if(t.isEmpty())return null;t instanceof Un?this.addPolygon(t):t instanceof Cn?this.addLineString(t):t instanceof $r?this.addPoint(t):t instanceof Sl?this.addCollection(t):t instanceof Sa?this.addCollection(t):t instanceof Rs?this.addCollection(t):t instanceof wr&&this.addCollection(t)};Mi.prototype.isErodedCompletely=function(t,n){var r=t.getCoordinates();if(r.length<4)return n<0;if(r.length===4)return this.isTriangleErodedCompletely(r,n);var i=t.getEnvelopeInternal(),o=Math.min(i.getHeight(),i.getWidth());return n<0&&2*Math.abs(n)>o};Mi.prototype.addCollection=function(t){for(var n=this,r=0;r<t.getNumGeometries();r++){var i=t.getGeometryN(r);n.add(i)}};Mi.prototype.interfaces_=function(){return[]};Mi.prototype.getClass=function(){return Mi};var kl=function(){};kl.prototype.locate=function(t){};kl.prototype.interfaces_=function(){return[]};kl.prototype.getClass=function(){return kl};var Os=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Os.prototype.next=function(){if(this._atStart)return this._atStart=!1,Os.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Zl;var t=this._parent.getGeometryN(this._index++);return t instanceof wr?(this._subcollectionIterator=new Os(t),this._subcollectionIterator.next()):t};Os.prototype.remove=function(){throw new Error(this.getClass().getName())};Os.prototype.hasNext=function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)};Os.prototype.interfaces_=function(){return[Hl]};Os.prototype.getClass=function(){return Os};Os.isAtomic=function(t){return!(t instanceof wr)};var hi=function(){this._geom=null;var t=arguments[0];this._geom=t};hi.prototype.locate=function(t){return hi.locate(t,this._geom)};hi.prototype.interfaces_=function(){return[kl]};hi.prototype.getClass=function(){return hi};hi.isPointInRing=function(t,n){return n.getEnvelopeInternal().intersects(t)?Qt.isPointInRing(t,n.getCoordinates()):!1};hi.containsPointInPolygon=function(t,n){if(n.isEmpty())return!1;var r=n.getExteriorRing();if(!hi.isPointInRing(t,r))return!1;for(var i=0;i<n.getNumInteriorRing();i++){var o=n.getInteriorRingN(i);if(hi.isPointInRing(t,o))return!1}return!0};hi.containsPoint=function(t,n){if(n instanceof Un)return hi.containsPointInPolygon(t,n);if(n instanceof wr)for(var r=new Os(n);r.hasNext();){var i=r.next();if(i!==n&&hi.containsPoint(t,i))return!0}return!1};hi.locate=function(t,n){return n.isEmpty()?yt.EXTERIOR:hi.containsPoint(t,n)?yt.INTERIOR:yt.EXTERIOR};var gr=function(){this._edgeMap=new pr,this._edgeList=null,this._ptInAreaLocation=[yt.NONE,yt.NONE]};gr.prototype.getNextCW=function(t){this.getEdges();var n=this._edgeList.indexOf(t),r=n-1;return n===0&&(r=this._edgeList.size()-1),this._edgeList.get(r)};gr.prototype.propagateSideLabels=function(t){for(var n=yt.NONE,r=this.iterator();r.hasNext();){var i=r.next(),o=i.getLabel();o.isArea(t)&&o.getLocation(t,qt.LEFT)!==yt.NONE&&(n=o.getLocation(t,qt.LEFT))}if(n===yt.NONE)return null;for(var u=n,f=this.iterator();f.hasNext();){var p=f.next(),_=p.getLabel();if(_.getLocation(t,qt.ON)===yt.NONE&&_.setLocation(t,qt.ON,u),_.isArea(t)){var y=_.getLocation(t,qt.LEFT),C=_.getLocation(t,qt.RIGHT);if(C!==yt.NONE){if(C!==u)throw new vo("side location conflict",p.getCoordinate());y===yt.NONE&&Se.shouldNeverReachHere("found single null side (at "+p.getCoordinate()+")"),u=y}else Se.isTrue(_.getLocation(t,qt.LEFT)===yt.NONE,"found single null side"),_.setLocation(t,qt.RIGHT,u),_.setLocation(t,qt.LEFT,u)}}};gr.prototype.getCoordinate=function(){var t=this.iterator();if(!t.hasNext())return null;var n=t.next();return n.getCoordinate()};gr.prototype.print=function(t){nr.out.println("EdgeEndStar:   "+this.getCoordinate());for(var n=this.iterator();n.hasNext();){var r=n.next();r.print(t)}};gr.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)};gr.prototype.checkAreaLabelsConsistent=function(t){var n=this.getEdges();if(n.size()<=0)return!0;var r=n.size()-1,i=n.get(r).getLabel(),o=i.getLocation(t,qt.LEFT);Se.isTrue(o!==yt.NONE,"Found unlabelled area edge");for(var u=o,f=this.iterator();f.hasNext();){var p=f.next(),_=p.getLabel();Se.isTrue(_.isArea(t),"Found non-area edge");var y=_.getLocation(t,qt.LEFT),C=_.getLocation(t,qt.RIGHT);if(y===C||C!==u)return!1;u=y}return!0};gr.prototype.findIndex=function(t){var n=this;this.iterator();for(var r=0;r<this._edgeList.size();r++){var i=n._edgeList.get(r);if(i===t)return r}return-1};gr.prototype.iterator=function(){return this.getEdges().iterator()};gr.prototype.getEdges=function(){return this._edgeList===null&&(this._edgeList=new $t(this._edgeMap.values())),this._edgeList};gr.prototype.getLocation=function(t,n,r){return this._ptInAreaLocation[t]===yt.NONE&&(this._ptInAreaLocation[t]=hi.locate(n,r[t].getGeometry())),this._ptInAreaLocation[t]};gr.prototype.toString=function(){var t=new Ls;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append(`
`);for(var n=this.iterator();n.hasNext();){var r=n.next();t.append(r),t.append(`
`)}return t.toString()};gr.prototype.computeEdgeEndLabels=function(t){for(var n=this.iterator();n.hasNext();){var r=n.next();r.computeLabel(t)}};gr.prototype.computeLabelling=function(t){var n=this;this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var r=[!1,!1],i=this.iterator();i.hasNext();)for(var o=i.next(),u=o.getLabel(),f=0;f<2;f++)u.isLine(f)&&u.getLocation(f)===yt.BOUNDARY&&(r[f]=!0);for(var p=this.iterator();p.hasNext();)for(var _=p.next(),y=_.getLabel(),C=0;C<2;C++)if(y.isAnyNull(C)){var S=yt.NONE;if(r[C])S=yt.EXTERIOR;else{var k=_.getCoordinate();S=n.getLocation(C,k,t)}y.setAllLocationsIfNull(C,S)}};gr.prototype.getDegree=function(){return this._edgeMap.size()};gr.prototype.insertEdgeEnd=function(t,n){this._edgeMap.put(t,n),this._edgeList=null};gr.prototype.interfaces_=function(){return[]};gr.prototype.getClass=function(){return gr};var FS=function(e){function t(){e.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.linkResultDirectedEdges=function(){var r=this;this.getResultAreaEdges();for(var i=null,o=null,u=this._SCANNING_FOR_INCOMING,f=0;f<this._resultAreaEdgeList.size();f++){var p=r._resultAreaEdgeList.get(f),_=p.getSym();if(p.getLabel().isArea())switch(i===null&&p.isInResult()&&(i=p),u){case r._SCANNING_FOR_INCOMING:if(!_.isInResult())continue;o=_,u=r._LINKING_TO_OUTGOING;break;case r._LINKING_TO_OUTGOING:if(!p.isInResult())continue;o.setNext(p),u=r._SCANNING_FOR_INCOMING;break}}if(u===this._LINKING_TO_OUTGOING){if(i===null)throw new vo("no outgoing dirEdge found",this.getCoordinate());Se.isTrue(i.isInResult(),"unable to link last incoming dirEdge"),o.setNext(i)}},t.prototype.insert=function(r){var i=r;this.insertEdgeEnd(i,i)},t.prototype.getRightmostEdge=function(){var r=this.getEdges(),i=r.size();if(i<1)return null;var o=r.get(0);if(i===1)return o;var u=r.get(i-1),f=o.getQuadrant(),p=u.getQuadrant();return tn.isNorthern(f)&&tn.isNorthern(p)?o:!tn.isNorthern(f)&&!tn.isNorthern(p)?u:o.getDy()!==0?o:u.getDy()!==0?u:(Se.shouldNeverReachHere("found two horizontal edges incident on node"),null)},t.prototype.print=function(r){nr.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var i=this.iterator();i.hasNext();){var o=i.next();r.print("out "),o.print(r),r.println(),r.print("in "),o.getSym().print(r),r.println()}},t.prototype.getResultAreaEdges=function(){var r=this;if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new $t;for(var i=this.iterator();i.hasNext();){var o=i.next();(o.isInResult()||o.getSym().isInResult())&&r._resultAreaEdgeList.add(o)}return this._resultAreaEdgeList},t.prototype.updateLabelling=function(r){for(var i=this.iterator();i.hasNext();){var o=i.next(),u=o.getLabel();u.setAllLocationsIfNull(0,r.getLocation(0)),u.setAllLocationsIfNull(1,r.getLocation(1))}},t.prototype.linkAllDirectedEdges=function(){var r=this;this.getEdges();for(var i=null,o=null,u=this._edgeList.size()-1;u>=0;u--){var f=r._edgeList.get(u),p=f.getSym();o===null&&(o=p),i!==null&&p.setNext(i),i=f}o.setNext(i)},t.prototype.computeDepths=function(){var r=this;if(arguments.length===1){var i=arguments[0],o=this.findIndex(i),u=i.getDepth(qt.LEFT),f=i.getDepth(qt.RIGHT),p=this.computeDepths(o+1,this._edgeList.size(),u),_=this.computeDepths(0,o,p);if(_!==f)throw new vo("depth mismatch at "+i.getCoordinate())}else if(arguments.length===3){for(var y=arguments[0],C=arguments[1],S=arguments[2],k=S,P=y;P<C;P++){var R=r._edgeList.get(P);R.setEdgeDepths(qt.RIGHT,k),k=R.getDepth(qt.LEFT)}return k}},t.prototype.mergeSymLabels=function(){for(var r=this.iterator();r.hasNext();){var i=r.next(),o=i.getLabel();o.merge(i.getSym().getLabel())}},t.prototype.linkMinimalDirectedEdges=function(r){for(var i=this,o=null,u=null,f=this._SCANNING_FOR_INCOMING,p=this._resultAreaEdgeList.size()-1;p>=0;p--){var _=i._resultAreaEdgeList.get(p),y=_.getSym();switch(o===null&&_.getEdgeRing()===r&&(o=_),f){case i._SCANNING_FOR_INCOMING:if(y.getEdgeRing()!==r)continue;u=y,f=i._LINKING_TO_OUTGOING;break;case i._LINKING_TO_OUTGOING:if(_.getEdgeRing()!==r)continue;u.setNextMin(_),f=i._SCANNING_FOR_INCOMING;break}}f===this._LINKING_TO_OUTGOING&&(Se.isTrue(o!==null,"found null for first outgoing dirEdge"),Se.isTrue(o.getEdgeRing()===r,"unable to link last incoming dirEdge"),u.setNextMin(o))},t.prototype.getOutgoingDegree=function(){if(arguments.length===0){for(var r=0,i=this.iterator();i.hasNext();){var o=i.next();o.isInResult()&&r++}return r}else if(arguments.length===1){for(var u=arguments[0],f=0,p=this.iterator();p.hasNext();){var _=p.next();_.getEdgeRing()===u&&f++}return f}},t.prototype.getLabel=function(){return this._label},t.prototype.findCoveredLineEdges=function(){for(var r=yt.NONE,i=this.iterator();i.hasNext();){var o=i.next(),u=o.getSym();if(!o.isLineEdge()){if(o.isInResult()){r=yt.INTERIOR;break}if(u.isInResult()){r=yt.EXTERIOR;break}}}if(r===yt.NONE)return null;for(var f=r,p=this.iterator();p.hasNext();){var _=p.next(),y=_.getSym();_.isLineEdge()?_.getEdge().setCovered(f===yt.INTERIOR):(_.isInResult()&&(f=yt.EXTERIOR),y.isInResult()&&(f=yt.INTERIOR))}},t.prototype.computeLabelling=function(r){var i=this;e.prototype.computeLabelling.call(this,r),this._label=new $e(yt.NONE);for(var o=this.iterator();o.hasNext();)for(var u=o.next(),f=u.getEdge(),p=f.getLabel(),_=0;_<2;_++){var y=p.getLocation(_);(y===yt.INTERIOR||y===yt.BOUNDARY)&&i._label.setLocation(_,yt.INTERIOR)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(gr),ex=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createNode=function(r){return new Kp(r,new FS)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Pl),$o=function e(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=e.orientation(t)};$o.prototype.compareTo=function(t){var n=t,r=$o.compareOriented(this._pts,this._orientation,n._pts,n._orientation);return r};$o.prototype.interfaces_=function(){return[Ii]};$o.prototype.getClass=function(){return $o};$o.orientation=function(t){return Ne.increasingDirection(t)===1};$o.compareOriented=function(t,n,r,i){for(var o=n?1:-1,u=i?1:-1,f=n?t.length:-1,p=i?r.length:-1,_=n?0:t.length-1,y=i?0:r.length-1;;){var C=t[_].compareTo(r[y]);if(C!==0)return C;_+=o,y+=u;var S=_===f,k=y===p;if(S&&!k)return-1;if(!S&&k)return 1;if(S&&k)return 0}};var qi=function(){this._edges=new $t,this._ocaMap=new pr};qi.prototype.print=function(t){var n=this;t.print("MULTILINESTRING ( ");for(var r=0;r<this._edges.size();r++){var i=n._edges.get(r);r>0&&t.print(","),t.print("(");for(var o=i.getCoordinates(),u=0;u<o.length;u++)u>0&&t.print(","),t.print(o[u].x+" "+o[u].y);t.println(")")}t.print(")  ")};qi.prototype.addAll=function(t){for(var n=this,r=t.iterator();r.hasNext();)n.add(r.next())};qi.prototype.findEdgeIndex=function(t){for(var n=this,r=0;r<this._edges.size();r++)if(n._edges.get(r).equals(t))return r;return-1};qi.prototype.iterator=function(){return this._edges.iterator()};qi.prototype.getEdges=function(){return this._edges};qi.prototype.get=function(t){return this._edges.get(t)};qi.prototype.findEqualEdge=function(t){var n=new $o(t.getCoordinates()),r=this._ocaMap.get(n);return r};qi.prototype.add=function(t){this._edges.add(t);var n=new $o(t.getCoordinates());this._ocaMap.put(n,t)};qi.prototype.interfaces_=function(){return[]};qi.prototype.getClass=function(){return qi};var Ia=function(){};Ia.prototype.processIntersections=function(t,n,r,i){};Ia.prototype.isDone=function(){};Ia.prototype.interfaces_=function(){return[]};Ia.prototype.getClass=function(){return Ia};var gi=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};gi.prototype.isTrivialIntersection=function(t,n,r,i){if(t===r&&this._li.getIntersectionNum()===1){if(gi.isAdjacentSegments(n,i))return!0;if(t.isClosed()){var o=t.size()-1;if(n===0&&i===o||i===0&&n===o)return!0}}return!1};gi.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};gi.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};gi.prototype.getLineIntersector=function(){return this._li};gi.prototype.hasProperIntersection=function(){return this._hasProper};gi.prototype.processIntersections=function(t,n,r,i){if(t===r&&n===i)return null;this.numTests++;var o=t.getCoordinates()[n],u=t.getCoordinates()[n+1],f=r.getCoordinates()[i],p=r.getCoordinates()[i+1];this._li.computeIntersection(o,u,f,p),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,n,r,i)||(this._hasIntersection=!0,t.addIntersections(this._li,n,0),r.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))};gi.prototype.hasIntersection=function(){return this._hasIntersection};gi.prototype.isDone=function(){return!1};gi.prototype.hasInteriorIntersection=function(){return this._hasInterior};gi.prototype.interfaces_=function(){return[Ia]};gi.prototype.getClass=function(){return gi};gi.isAdjacentSegments=function(t,n){return Math.abs(t-n)===1};var xs=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],n=arguments[1],r=arguments[2];this.coord=new ct(t),this.segmentIndex=n,this.dist=r};xs.prototype.getSegmentIndex=function(){return this.segmentIndex};xs.prototype.getCoordinate=function(){return this.coord};xs.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)};xs.prototype.compareTo=function(t){var n=t;return this.compare(n.segmentIndex,n.dist)};xs.prototype.isEndPoint=function(t){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===t};xs.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist};xs.prototype.getDistance=function(){return this.dist};xs.prototype.compare=function(t,n){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<n?-1:this.dist>n?1:0};xs.prototype.interfaces_=function(){return[Ii]};xs.prototype.getClass=function(){return xs};var Vs=function(){this._nodeMap=new pr,this.edge=null;var t=arguments[0];this.edge=t};Vs.prototype.print=function(t){t.println("Intersections:");for(var n=this.iterator();n.hasNext();){var r=n.next();r.print(t)}};Vs.prototype.iterator=function(){return this._nodeMap.values().iterator()};Vs.prototype.addSplitEdges=function(t){var n=this;this.addEndpoints();for(var r=this.iterator(),i=r.next();r.hasNext();){var o=r.next(),u=n.createSplitEdge(i,o);t.add(u),i=o}};Vs.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)};Vs.prototype.createSplitEdge=function(t,n){var r=this,i=n.segmentIndex-t.segmentIndex+2,o=this.edge.pts[n.segmentIndex],u=n.dist>0||!n.coord.equals2D(o);u||i--;var f=new Array(i).fill(null),p=0;f[p++]=new ct(t.coord);for(var _=t.segmentIndex+1;_<=n.segmentIndex;_++)f[p++]=r.edge.pts[_];return u&&(f[p]=n.coord),new op(f,new $e(this.edge._label))};Vs.prototype.add=function(t,n,r){var i=new xs(t,n,r),o=this._nodeMap.get(i);return o!==null?o:(this._nodeMap.put(i,i),i)};Vs.prototype.isIntersection=function(t){for(var n=this.iterator();n.hasNext();){var r=n.next();if(r.coord.equals(t))return!0}return!1};Vs.prototype.interfaces_=function(){return[]};Vs.prototype.getClass=function(){return Vs};var ka=function(){};ka.prototype.getChainStartIndices=function(t){var n=this,r=0,i=new $t;i.add(new ds(r));do{var o=n.findChainEnd(t,r);i.add(new ds(o)),r=o}while(r<t.length-1);var u=ka.toIntArray(i);return u};ka.prototype.findChainEnd=function(t,n){for(var r=tn.quadrant(t[n],t[n+1]),i=n+1;i<t.length;){var o=tn.quadrant(t[i-1],t[i]);if(o!==r)break;i++}return i-1};ka.prototype.interfaces_=function(){return[]};ka.prototype.getClass=function(){return ka};ka.toIntArray=function(t){for(var n=new Array(t.size()).fill(null),r=0;r<n.length;r++)n[r]=t.get(r).intValue();return n};var Co=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new he,this.env2=new he;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var n=new ka;this.startIndex=n.getChainStartIndices(this.pts)};Co.prototype.getCoordinates=function(){return this.pts};Co.prototype.getMaxX=function(t){var n=this.pts[this.startIndex[t]].x,r=this.pts[this.startIndex[t+1]].x;return n>r?n:r};Co.prototype.getMinX=function(t){var n=this.pts[this.startIndex[t]].x,r=this.pts[this.startIndex[t+1]].x;return n<r?n:r};Co.prototype.computeIntersectsForChain=function(){if(arguments.length===4){var t=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],n,n.startIndex[r],n.startIndex[r+1],i)}else if(arguments.length===6){var o=arguments[0],u=arguments[1],f=arguments[2],p=arguments[3],_=arguments[4],y=arguments[5],C=this.pts[o],S=this.pts[u],k=f.pts[p],P=f.pts[_];if(u-o===1&&_-p===1)return y.addIntersections(this.e,o,f.e,p),null;if(this.env1.init(C,S),this.env2.init(k,P),!this.env1.intersects(this.env2))return null;var R=Math.trunc((o+u)/2),O=Math.trunc((p+_)/2);o<R&&(p<O&&this.computeIntersectsForChain(o,R,f,p,O,y),O<_&&this.computeIntersectsForChain(o,R,f,O,_,y)),R<u&&(p<O&&this.computeIntersectsForChain(R,u,f,p,O,y),O<_&&this.computeIntersectsForChain(R,u,f,O,_,y))}};Co.prototype.getStartIndexes=function(){return this.startIndex};Co.prototype.computeIntersects=function(t,n){for(var r=this,i=0;i<this.startIndex.length-1;i++)for(var o=0;o<t.startIndex.length-1;o++)r.computeIntersectsForChain(i,t,o,n)};Co.prototype.interfaces_=function(){return[]};Co.prototype.getClass=function(){return Co};var er=function e(){var t=this;this._depth=Array(2).fill().map(function(){return Array(3)});for(var n=0;n<2;n++)for(var r=0;r<3;r++)t._depth[n][r]=e.NULL_VALUE},nx={NULL_VALUE:{configurable:!0}};er.prototype.getDepth=function(t,n){return this._depth[t][n]};er.prototype.setDepth=function(t,n,r){this._depth[t][n]=r};er.prototype.isNull=function(){var t=this;if(arguments.length===0){for(var n=0;n<2;n++)for(var r=0;r<3;r++)if(t._depth[n][r]!==er.NULL_VALUE)return!1;return!0}else if(arguments.length===1){var i=arguments[0];return this._depth[i][1]===er.NULL_VALUE}else if(arguments.length===2){var o=arguments[0],u=arguments[1];return this._depth[o][u]===er.NULL_VALUE}};er.prototype.normalize=function(){for(var t=this,n=0;n<2;n++)if(!t.isNull(n)){var r=t._depth[n][1];t._depth[n][2]<r&&(r=t._depth[n][2]),r<0&&(r=0);for(var i=1;i<3;i++){var o=0;t._depth[n][i]>r&&(o=1),t._depth[n][i]=o}}};er.prototype.getDelta=function(t){return this._depth[t][qt.RIGHT]-this._depth[t][qt.LEFT]};er.prototype.getLocation=function(t,n){return this._depth[t][n]<=0?yt.EXTERIOR:yt.INTERIOR};er.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]};er.prototype.add=function(){var t=this;if(arguments.length===1)for(var n=arguments[0],r=0;r<2;r++)for(var i=1;i<3;i++){var o=n.getLocation(r,i);(o===yt.EXTERIOR||o===yt.INTERIOR)&&(t.isNull(r,i)?t._depth[r][i]=er.depthAtLocation(o):t._depth[r][i]+=er.depthAtLocation(o))}else if(arguments.length===3){var u=arguments[0],f=arguments[1],p=arguments[2];p===yt.INTERIOR&&this._depth[u][f]++}};er.prototype.interfaces_=function(){return[]};er.prototype.getClass=function(){return er};er.depthAtLocation=function(t){return t===yt.EXTERIOR?0:t===yt.INTERIOR?1:er.NULL_VALUE};nx.NULL_VALUE.get=function(){return-1};Object.defineProperties(er,nx);var op=function(e){function t(){if(e.call(this),this.pts=null,this._env=null,this.eiList=new Vs(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new er,this._depthDelta=0,arguments.length===1){var n=arguments[0];t.call(this,n,null)}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDepth=function(){return this._depth},t.prototype.getCollapsedEdge=function(){var r=new Array(2).fill(null);r[0]=this.pts[0],r[1]=this.pts[1];var i=new t(r,$e.toLineLabel(this._label));return i},t.prototype.isIsolated=function(){return this._isIsolated},t.prototype.getCoordinates=function(){return this.pts},t.prototype.setIsolated=function(r){this._isIsolated=r},t.prototype.setName=function(r){this._name=r},t.prototype.equals=function(r){var i=this;if(!(r instanceof t))return!1;var o=r;if(this.pts.length!==o.pts.length)return!1;for(var u=!0,f=!0,p=this.pts.length,_=0;_<this.pts.length;_++)if(i.pts[_].equals2D(o.pts[_])||(u=!1),i.pts[_].equals2D(o.pts[--p])||(f=!1),!u&&!f)return!1;return!0},t.prototype.getCoordinate=function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var r=arguments[0];return this.pts[r]}},t.prototype.print=function(r){var i=this;r.print("edge "+this._name+": "),r.print("LINESTRING (");for(var o=0;o<this.pts.length;o++)o>0&&r.print(","),r.print(i.pts[o].x+" "+i.pts[o].y);r.print(")  "+this._label+" "+this._depthDelta)},t.prototype.computeIM=function(r){t.updateIM(this._label,r)},t.prototype.isCollapsed=function(){return!this._label.isArea()||this.pts.length!==3?!1:!!this.pts[0].equals(this.pts[2])},t.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},t.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},t.prototype.getDepthDelta=function(){return this._depthDelta},t.prototype.getNumPoints=function(){return this.pts.length},t.prototype.printReverse=function(r){var i=this;r.print("edge "+this._name+": ");for(var o=this.pts.length-1;o>=0;o--)r.print(i.pts[o]+" ");r.println("")},t.prototype.getMonotoneChainEdge=function(){return this._mce===null&&(this._mce=new Co(this)),this._mce},t.prototype.getEnvelope=function(){var r=this;if(this._env===null){this._env=new he;for(var i=0;i<this.pts.length;i++)r._env.expandToInclude(r.pts[i])}return this._env},t.prototype.addIntersection=function(r,i,o,u){var f=new ct(r.getIntersection(u)),p=i,_=r.getEdgeDistance(o,u),y=p+1;if(y<this.pts.length){var C=this.pts[y];f.equals2D(C)&&(p=y,_=0)}this.eiList.add(f,p,_)},t.prototype.toString=function(){var r=this,i=new Ls;i.append("edge "+this._name+": "),i.append("LINESTRING (");for(var o=0;o<this.pts.length;o++)o>0&&i.append(","),i.append(r.pts[o].x+" "+r.pts[o].y);return i.append(")  "+this._label+" "+this._depthDelta),i.toString()},t.prototype.isPointwiseEqual=function(r){var i=this;if(this.pts.length!==r.pts.length)return!1;for(var o=0;o<this.pts.length;o++)if(!i.pts[o].equals2D(r.pts[o]))return!1;return!0},t.prototype.setDepthDelta=function(r){this._depthDelta=r},t.prototype.getEdgeIntersectionList=function(){return this.eiList},t.prototype.addIntersections=function(r,i,o){for(var u=this,f=0;f<r.getIntersectionNum();f++)u.addIntersection(r,i,o,f)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.updateIM=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];i.setAtLeastIfValid(r.getLocation(0,qt.ON),r.getLocation(1,qt.ON),1),r.isArea()&&(i.setAtLeastIfValid(r.getLocation(0,qt.LEFT),r.getLocation(1,qt.LEFT),2),i.setAtLeastIfValid(r.getLocation(0,qt.RIGHT),r.getLocation(1,qt.RIGHT),2))}else return e.prototype.updateIM.apply(this,arguments)},t}(pi),Lr=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new qi,this._bufParams=t||null};Lr.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t};Lr.prototype.insertUniqueEdge=function(t){var n=this._edgeList.findEqualEdge(t);if(n!==null){var r=n.getLabel(),i=t.getLabel();n.isPointwiseEqual(t)||(i=new $e(t.getLabel()),i.flip()),r.merge(i);var o=Lr.depthDelta(i),u=n.getDepthDelta(),f=u+o;n.setDepthDelta(f)}else this._edgeList.add(t),t.setDepthDelta(Lr.depthDelta(t.getLabel()))};Lr.prototype.buildSubgraphs=function(t,n){for(var r=new $t,i=t.iterator();i.hasNext();){var o=i.next(),u=o.getRightmostCoordinate(),f=new mu(r),p=f.getDepth(u);o.computeDepth(p),o.findResultEdges(),r.add(o),n.add(o.getDirectedEdges(),o.getNodes())}};Lr.prototype.createSubgraphs=function(t){for(var n=new $t,r=t.getNodes().iterator();r.hasNext();){var i=r.next();if(!i.isVisited()){var o=new Sr;o.create(i),n.add(o)}}return ji.sort(n,ji.reverseOrder()),n};Lr.prototype.createEmptyResultGeometry=function(){var t=this._geomFact.createPolygon();return t};Lr.prototype.getNoder=function(t){if(this._workingNoder!==null)return this._workingNoder;var n=new bm,r=new Fa;return r.setPrecisionModel(t),n.setSegmentIntersector(new gi(r)),n};Lr.prototype.buffer=function(t,n){var r=this._workingPrecisionModel;r===null&&(r=t.getPrecisionModel()),this._geomFact=t.getFactory();var i=new Or(r,this._bufParams),o=new Mi(t,n,i),u=o.getCurves();if(u.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(u,r),this._graph=new _n(new ex),this._graph.addEdges(this._edgeList.getEdges());var f=this.createSubgraphs(this._graph),p=new Xr(this._geomFact);this.buildSubgraphs(f,p);var _=p.getPolygons();if(_.size()<=0)return this.createEmptyResultGeometry();var y=this._geomFact.buildGeometry(_);return y};Lr.prototype.computeNodedEdges=function(t,n){var r=this,i=this.getNoder(n);i.computeNodes(t);for(var o=i.getNodedSubstrings(),u=o.iterator();u.hasNext();){var f=u.next(),p=f.getCoordinates();if(!(p.length===2&&p[0].equals2D(p[1]))){var _=f.getData(),y=new op(f.getCoordinates(),new $e(_));r.insertUniqueEdge(y)}}};Lr.prototype.setNoder=function(t){this._workingNoder=t};Lr.prototype.interfaces_=function(){return[]};Lr.prototype.getClass=function(){return Lr};Lr.depthDelta=function(t){var n=t.getLocation(0,qt.LEFT),r=t.getLocation(0,qt.RIGHT);return n===yt.INTERIOR&&r===yt.EXTERIOR?1:n===yt.EXTERIOR&&r===yt.INTERIOR?-1:0};Lr.convertSegStrings=function(t){for(var n=new De,r=new $t;t.hasNext();){var i=t.next(),o=n.createLineString(i.getCoordinates());r.add(o)}return n.buildGeometry(r)};var Xo=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var t=arguments[0],n=arguments[1];this._noder=t,this._scaleFactor=n,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(arguments.length===4){var r=arguments[0],i=arguments[1],o=arguments[2],u=arguments[3];this._noder=r,this._scaleFactor=i,this._offsetX=o,this._offsetY=u,this._isScaled=!this.isIntegerPrecision()}};Xo.prototype.rescale=function(){var t=this;if(ve(arguments[0],Bn))for(var n=arguments[0],r=n.iterator();r.hasNext();){var i=r.next();t.rescale(i.getCoordinates())}else if(arguments[0]instanceof Array){for(var o=arguments[0],u=0;u<o.length;u++)o[u].x=o[u].x/t._scaleFactor+t._offsetX,o[u].y=o[u].y/t._scaleFactor+t._offsetY;o.length===2&&o[0].equals2D(o[1])&&nr.out.println(o)}};Xo.prototype.scale=function(){var t=this;if(ve(arguments[0],Bn)){for(var n=arguments[0],r=new $t,i=n.iterator();i.hasNext();){var o=i.next();r.add(new Mn(t.scale(o.getCoordinates()),o.getData()))}return r}else if(arguments[0]instanceof Array){for(var u=arguments[0],f=new Array(u.length).fill(null),p=0;p<u.length;p++)f[p]=new ct(Math.round((u[p].x-t._offsetX)*t._scaleFactor),Math.round((u[p].y-t._offsetY)*t._scaleFactor),u[p].z);var _=Ne.removeRepeatedPoints(f);return _}};Xo.prototype.isIntegerPrecision=function(){return this._scaleFactor===1};Xo.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t};Xo.prototype.computeNodes=function(t){var n=t;this._isScaled&&(n=this.scale(t)),this._noder.computeNodes(n)};Xo.prototype.interfaces_=function(){return[Pa]};Xo.prototype.getClass=function(){return Xo};var Cs=function(){this._li=new Fa,this._segStrings=null;var t=arguments[0];this._segStrings=t},rx={fact:{configurable:!0}};Cs.prototype.checkEndPtVertexIntersections=function(){var t=this;if(arguments.length===0)for(var n=this._segStrings.iterator();n.hasNext();){var r=n.next(),i=r.getCoordinates();t.checkEndPtVertexIntersections(i[0],t._segStrings),t.checkEndPtVertexIntersections(i[i.length-1],t._segStrings)}else if(arguments.length===2){for(var o=arguments[0],u=arguments[1],f=u.iterator();f.hasNext();)for(var p=f.next(),_=p.getCoordinates(),y=1;y<_.length-1;y++)if(_[y].equals(o))throw new _o("found endpt/interior pt intersection at index "+y+" :pt "+o)}};Cs.prototype.checkInteriorIntersections=function(){var t=this;if(arguments.length===0)for(var n=this._segStrings.iterator();n.hasNext();)for(var r=n.next(),i=this._segStrings.iterator();i.hasNext();){var o=i.next();t.checkInteriorIntersections(r,o)}else if(arguments.length===2)for(var u=arguments[0],f=arguments[1],p=u.getCoordinates(),_=f.getCoordinates(),y=0;y<p.length-1;y++)for(var C=0;C<_.length-1;C++)t.checkInteriorIntersections(u,y,f,C);else if(arguments.length===4){var S=arguments[0],k=arguments[1],P=arguments[2],R=arguments[3];if(S===P&&k===R)return null;var O=S.getCoordinates()[k],H=S.getCoordinates()[k+1],X=P.getCoordinates()[R],U=P.getCoordinates()[R+1];if(this._li.computeIntersection(O,H,X,U),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,O,H)||this.hasInteriorIntersection(this._li,X,U)))throw new _o("found non-noded intersection at "+O+"-"+H+" and "+X+"-"+U)}};Cs.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()};Cs.prototype.checkCollapses=function(){var t=this;if(arguments.length===0)for(var n=this._segStrings.iterator();n.hasNext();){var r=n.next();t.checkCollapses(r)}else if(arguments.length===1)for(var i=arguments[0],o=i.getCoordinates(),u=0;u<o.length-2;u++)t.checkCollapse(o[u],o[u+1],o[u+2])};Cs.prototype.hasInteriorIntersection=function(t,n,r){for(var i=0;i<t.getIntersectionNum();i++){var o=t.getIntersection(i);if(!(o.equals(n)||o.equals(r)))return!0}return!1};Cs.prototype.checkCollapse=function(t,n,r){if(t.equals(r))throw new _o("found non-noded collapse at "+Cs.fact.createLineString([t,n,r]))};Cs.prototype.interfaces_=function(){return[]};Cs.prototype.getClass=function(){return Cs};rx.fact.get=function(){return new De};Object.defineProperties(Cs,rx);var Br=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],n=arguments[1],r=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=n,this._li=r,n<=0)throw new dn("Scale factor must be non-zero");n!==1&&(this._pt=new ct(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new ct,this._p1Scaled=new ct),this.initCorners(this._pt)},ix={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};Br.prototype.intersectsScaled=function(t,n){var r=Math.min(t.x,n.x),i=Math.max(t.x,n.x),o=Math.min(t.y,n.y),u=Math.max(t.y,n.y),f=this._maxx<r||this._minx>i||this._maxy<o||this._miny>u;if(f)return!1;var p=this.intersectsToleranceSquare(t,n);return Se.isTrue(!(f&&p),"Found bad envelope test"),p};Br.prototype.initCorners=function(t){var n=.5;this._minx=t.x-n,this._maxx=t.x+n,this._miny=t.y-n,this._maxy=t.y+n,this._corner[0]=new ct(this._maxx,this._maxy),this._corner[1]=new ct(this._minx,this._maxy),this._corner[2]=new ct(this._minx,this._miny),this._corner[3]=new ct(this._maxx,this._miny)};Br.prototype.intersects=function(t,n){return this._scaleFactor===1?this.intersectsScaled(t,n):(this.copyScaled(t,this._p0Scaled),this.copyScaled(n,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))};Br.prototype.scale=function(t){return Math.round(t*this._scaleFactor)};Br.prototype.getCoordinate=function(){return this._originalPt};Br.prototype.copyScaled=function(t,n){n.x=this.scale(t.x),n.y=this.scale(t.y)};Br.prototype.getSafeEnvelope=function(){if(this._safeEnv===null){var t=Br.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new he(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv};Br.prototype.intersectsPixelClosure=function(t,n){return this._li.computeIntersection(t,n,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,n,this._corner[1],this._corner[2]),this._li.hasIntersection())||(this._li.computeIntersection(t,n,this._corner[2],this._corner[3]),this._li.hasIntersection())||(this._li.computeIntersection(t,n,this._corner[3],this._corner[0]),this._li.hasIntersection()))};Br.prototype.intersectsToleranceSquare=function(t,n){var r=!1,i=!1;return this._li.computeIntersection(t,n,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,n,this._corner[1],this._corner[2]),this._li.isProper())||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,n,this._corner[2],this._corner[3]),this._li.isProper())||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,n,this._corner[3],this._corner[0]),this._li.isProper())||r&&i||t.equals(this._pt)||n.equals(this._pt))};Br.prototype.addSnappedNode=function(t,n){var r=t.getCoordinate(n),i=t.getCoordinate(n+1);return this.intersects(r,i)?(t.addIntersection(this.getCoordinate(),n),!0):!1};Br.prototype.interfaces_=function(){return[]};Br.prototype.getClass=function(){return Br};ix.SAFE_ENV_EXPANSION_FACTOR.get=function(){return .75};Object.defineProperties(Br,ix);var _h=function(){this.tempEnv1=new he,this.selectedSegment=new fe};_h.prototype.select=function(){if(arguments.length!==1){if(arguments.length===2){var t=arguments[0],n=arguments[1];t.getLineSegment(n,this.selectedSegment),this.select(this.selectedSegment)}}};_h.prototype.interfaces_=function(){return[]};_h.prototype.getClass=function(){return _h};var Tl=function(){this._index=null;var t=arguments[0];this._index=t},sx={HotPixelSnapAction:{configurable:!0}};Tl.prototype.snap=function(){if(arguments.length===1){var t=arguments[0];return this.snap(t,null,-1)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2],o=n.getSafeEnvelope(),u=new ox(n,r,i);return this._index.query(o,{interfaces_:function(){return[Wo]},visitItem:function(f){var p=f;p.select(o,u)}}),u.isNodeAdded()}};Tl.prototype.interfaces_=function(){return[]};Tl.prototype.getClass=function(){return Tl};sx.HotPixelSnapAction.get=function(){return ox};Object.defineProperties(Tl,sx);var ox=function(e){function t(){e.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var n=arguments[0],r=arguments[1],i=arguments[2];this._hotPixel=n,this._parentEdge=r,this._hotPixelVertexIndex=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isNodeAdded=function(){return this._isNodeAdded},t.prototype.select=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1],o=r.getContext();if(this._parentEdge!==null&&o===this._parentEdge&&i===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(o,i)}else return e.prototype.select.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(_h),_u=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new $t};_u.prototype.processIntersections=function(t,n,r,i){var o=this;if(t===r&&n===i)return null;var u=t.getCoordinates()[n],f=t.getCoordinates()[n+1],p=r.getCoordinates()[i],_=r.getCoordinates()[i+1];if(this._li.computeIntersection(u,f,p,_),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var y=0;y<this._li.getIntersectionNum();y++)o._interiorIntersections.add(o._li.getIntersection(y));t.addIntersections(this._li,n,0),r.addIntersections(this._li,i,1)}};_u.prototype.isDone=function(){return!1};_u.prototype.getInteriorIntersections=function(){return this._interiorIntersections};_u.prototype.interfaces_=function(){return[Ia]};_u.prototype.getClass=function(){return _u};var js=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new Fa,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};js.prototype.checkCorrectness=function(t){var n=Mn.getNodedSubstrings(t),r=new Cs(n);try{r.checkValid()}catch(i){if(i instanceof jv)i.printStackTrace();else throw i}finally{}};js.prototype.getNodedSubstrings=function(){return Mn.getNodedSubstrings(this._nodedSegStrings)};js.prototype.snapRound=function(t,n){var r=this.findInteriorIntersections(t,n);this.computeIntersectionSnaps(r),this.computeVertexSnaps(t)};js.prototype.findInteriorIntersections=function(t,n){var r=new _u(n);return this._noder.setSegmentIntersector(r),this._noder.computeNodes(t),r.getInteriorIntersections()};js.prototype.computeVertexSnaps=function(){var t=this;if(ve(arguments[0],Bn))for(var n=arguments[0],r=n.iterator();r.hasNext();){var i=r.next();t.computeVertexSnaps(i)}else if(arguments[0]instanceof Mn)for(var o=arguments[0],u=o.getCoordinates(),f=0;f<u.length;f++){var p=new Br(u[f],t._scaleFactor,t._li),_=t._pointSnapper.snap(p,o,f);_&&o.addIntersection(u[f],f)}};js.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new bm,this._pointSnapper=new Tl(this._noder.getIndex()),this.snapRound(t,this._li)};js.prototype.computeIntersectionSnaps=function(t){for(var n=this,r=t.iterator();r.hasNext();){var i=r.next(),o=new Br(i,n._scaleFactor,n._li);n._pointSnapper.snap(o)}};js.prototype.interfaces_=function(){return[Pa]};js.prototype.getClass=function(){return js};var tr=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Ve,this._resultGeometry=null,this._saveException=null,arguments.length===1){var t=arguments[0];this._argGeom=t}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this._argGeom=n,this._bufParams=r}},Wl={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};tr.prototype.bufferFixedPrecision=function(t){var n=new Xo(new js(new je(1)),t.getScale()),r=new Lr(this._bufParams);r.setWorkingPrecisionModel(t),r.setNoder(n),this._resultGeometry=r.buffer(this._argGeom,this._distance)};tr.prototype.bufferReducedPrecision=function(){var t=this;if(arguments.length===0){for(var n=tr.MAX_PRECISION_DIGITS;n>=0;n--){try{t.bufferReducedPrecision(n)}catch(u){if(u instanceof vo)t._saveException=u;else throw u}finally{}if(t._resultGeometry!==null)return null}throw this._saveException}else if(arguments.length===1){var r=arguments[0],i=tr.precisionScaleFactor(this._argGeom,this._distance,r),o=new je(i);this.bufferFixedPrecision(o)}};tr.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===je.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()};tr.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)};tr.prototype.bufferOriginalPrecision=function(){try{var t=new Lr(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(n){if(n instanceof _o)this._saveException=n;else throw n}finally{}};tr.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry};tr.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)};tr.prototype.interfaces_=function(){return[]};tr.prototype.getClass=function(){return tr};tr.bufferOp=function(){if(arguments.length===2){var t=arguments[0],n=arguments[1],r=new tr(t),i=r.getResultGeometry(n);return i}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ye&&typeof arguments[1]=="number"){var o=arguments[0],u=arguments[1],f=arguments[2],p=new tr(o);p.setQuadrantSegments(f);var _=p.getResultGeometry(u);return _}else if(arguments[2]instanceof Ve&&arguments[0]instanceof ye&&typeof arguments[1]=="number"){var y=arguments[0],C=arguments[1],S=arguments[2],k=new tr(y,S),P=k.getResultGeometry(C);return P}}else if(arguments.length===4){var R=arguments[0],O=arguments[1],H=arguments[2],X=arguments[3],U=new tr(R);U.setQuadrantSegments(H),U.setEndCapStyle(X);var ut=U.getResultGeometry(O);return ut}};tr.precisionScaleFactor=function(t,n,r){var i=t.getEnvelopeInternal(),o=fi.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY())),u=n>0?n:0,f=o+2*u,p=Math.trunc(Math.log(f)/Math.log(10)+1),_=r-p,y=Math.pow(10,_);return y};Wl.CAP_ROUND.get=function(){return Ve.CAP_ROUND};Wl.CAP_BUTT.get=function(){return Ve.CAP_FLAT};Wl.CAP_FLAT.get=function(){return Ve.CAP_FLAT};Wl.CAP_SQUARE.get=function(){return Ve.CAP_SQUARE};Wl.MAX_PRECISION_DIGITS.get=function(){return 12};Object.defineProperties(tr,Wl);var Cr=function(){this._pt=[new ct,new ct],this._distance=be.NaN,this._isNull=!0};Cr.prototype.getCoordinates=function(){return this._pt};Cr.prototype.getCoordinate=function(t){return this._pt[t]};Cr.prototype.setMinimum=function(){if(arguments.length===1){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(arguments.length===2){var n=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(n,r),null;var i=n.distance(r);i<this._distance&&this.initialize(n,r,i)}};Cr.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var t=arguments[0],n=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(n),this._distance=t.distance(n),this._isNull=!1}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._pt[0].setCoordinate(r),this._pt[1].setCoordinate(i),this._distance=o,this._isNull=!1}};Cr.prototype.getDistance=function(){return this._distance};Cr.prototype.setMaximum=function(){if(arguments.length===1){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(arguments.length===2){var n=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(n,r),null;var i=n.distance(r);i>this._distance&&this.initialize(n,r,i)}};Cr.prototype.interfaces_=function(){return[]};Cr.prototype.getClass=function(){return Cr};var Ts=function(){};Ts.prototype.interfaces_=function(){return[]};Ts.prototype.getClass=function(){return Ts};Ts.computeDistance=function(){if(arguments[2]instanceof Cr&&arguments[0]instanceof Cn&&arguments[1]instanceof ct)for(var t=arguments[0],n=arguments[1],r=arguments[2],i=t.getCoordinates(),o=new fe,u=0;u<i.length-1;u++){o.setCoordinates(i[u],i[u+1]);var f=o.closestPoint(n);r.setMinimum(f,n)}else if(arguments[2]instanceof Cr&&arguments[0]instanceof Un&&arguments[1]instanceof ct){var p=arguments[0],_=arguments[1],y=arguments[2];Ts.computeDistance(p.getExteriorRing(),_,y);for(var C=0;C<p.getNumInteriorRing();C++)Ts.computeDistance(p.getInteriorRingN(C),_,y)}else if(arguments[2]instanceof Cr&&arguments[0]instanceof ye&&arguments[1]instanceof ct){var S=arguments[0],k=arguments[1],P=arguments[2];if(S instanceof Cn)Ts.computeDistance(S,k,P);else if(S instanceof Un)Ts.computeDistance(S,k,P);else if(S instanceof wr)for(var R=S,O=0;O<R.getNumGeometries();O++){var H=R.getGeometryN(O);Ts.computeDistance(H,k,P)}else P.setMinimum(S.getCoordinate(),k)}else if(arguments[2]instanceof Cr&&arguments[0]instanceof fe&&arguments[1]instanceof ct){var X=arguments[0],U=arguments[1],ut=arguments[2],It=X.closestPoint(U);ut.setMinimum(It,U)}};var Ta=function(t){this._maxPtDist=new Cr,this._inputGeom=t||null},Em={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Ta.prototype.computeMaxMidpointDistance=function(t){var n=new Yo(this._inputGeom);t.apply(n),this._maxPtDist.setMaximum(n.getMaxPointDistance())};Ta.prototype.computeMaxVertexDistance=function(t){var n=new yu(this._inputGeom);t.apply(n),this._maxPtDist.setMaximum(n.getMaxPointDistance())};Ta.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()};Ta.prototype.getDistancePoints=function(){return this._maxPtDist};Ta.prototype.interfaces_=function(){return[]};Ta.prototype.getClass=function(){return Ta};Em.MaxPointDistanceFilter.get=function(){return yu};Em.MaxMidpointDistanceFilter.get=function(){return Yo};Object.defineProperties(Ta,Em);var yu=function(t){this._maxPtDist=new Cr,this._minPtDist=new Cr,this._geom=t||null};yu.prototype.filter=function(t){this._minPtDist.initialize(),Ts.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};yu.prototype.getMaxPointDistance=function(){return this._maxPtDist};yu.prototype.interfaces_=function(){return[Fs]};yu.prototype.getClass=function(){return yu};var Yo=function(t){this._maxPtDist=new Cr,this._minPtDist=new Cr,this._geom=t||null};Yo.prototype.filter=function(t,n){if(n===0)return null;var r=t.getCoordinate(n-1),i=t.getCoordinate(n),o=new ct((r.x+i.x)/2,(r.y+i.y)/2);this._minPtDist.initialize(),Ts.computeDistance(this._geom,o,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};Yo.prototype.isDone=function(){return!1};Yo.prototype.isGeometryChanged=function(){return!1};Yo.prototype.getMaxPointDistance=function(){return this._maxPtDist};Yo.prototype.interfaces_=function(){return[Ui]};Yo.prototype.getClass=function(){return Yo};var po=function(t){this._comps=t||null};po.prototype.filter=function(t){t instanceof Un&&this._comps.add(t)};po.prototype.interfaces_=function(){return[ms]};po.prototype.getClass=function(){return po};po.getPolygons=function(){if(arguments.length===1){var t=arguments[0];return po.getPolygons(t,new $t)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return n instanceof Un?r.add(n):n instanceof wr&&n.apply(new po(r)),r}};var Qn=function(){if(this._lines=null,this._isForcedToLineString=!1,arguments.length===1){var t=arguments[0];this._lines=t}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this._lines=n,this._isForcedToLineString=r}};Qn.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof zs){var n=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(n),null}t instanceof Cn&&this._lines.add(t)};Qn.prototype.setForceToLineString=function(t){this._isForcedToLineString=t};Qn.prototype.interfaces_=function(){return[yo]};Qn.prototype.getClass=function(){return Qn};Qn.getGeometry=function(){if(arguments.length===1){var t=arguments[0];return t.getFactory().buildGeometry(Qn.getLines(t))}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return n.getFactory().buildGeometry(Qn.getLines(n,r))}};Qn.getLines=function(){if(arguments.length===1){var t=arguments[0];return Qn.getLines(t,!1)}else if(arguments.length===2){if(ve(arguments[0],Bn)&&ve(arguments[1],Bn)){for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){var o=i.next();Qn.getLines(o,r)}return r}else if(arguments[0]instanceof ye&&typeof arguments[1]=="boolean"){var u=arguments[0],f=arguments[1],p=new $t;return u.apply(new Qn(p,f)),p}else if(arguments[0]instanceof ye&&ve(arguments[1],Bn)){var _=arguments[0],y=arguments[1];return _ instanceof Cn?y.add(_):_.apply(new Qn(y)),y}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&ve(arguments[0],Bn)&&ve(arguments[1],Bn)){for(var C=arguments[0],S=arguments[1],k=arguments[2],P=C.iterator();P.hasNext();){var R=P.next();Qn.getLines(R,S,k)}return S}else if(typeof arguments[2]=="boolean"&&arguments[0]instanceof ye&&ve(arguments[1],Bn)){var O=arguments[0],H=arguments[1],X=arguments[2];return O.apply(new Qn(H,X)),H}}};var Hi=function(){if(this._boundaryRule=Si.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];if(t===null)throw new dn("Rule must be non-null");this._boundaryRule=t}}};Hi.prototype.locateInternal=function(){var t=this;if(arguments[0]instanceof ct&&arguments[1]instanceof Un){var n=arguments[0],r=arguments[1];if(r.isEmpty())return yt.EXTERIOR;var i=r.getExteriorRing(),o=this.locateInPolygonRing(n,i);if(o===yt.EXTERIOR)return yt.EXTERIOR;if(o===yt.BOUNDARY)return yt.BOUNDARY;for(var u=0;u<r.getNumInteriorRing();u++){var f=r.getInteriorRingN(u),p=t.locateInPolygonRing(n,f);if(p===yt.INTERIOR)return yt.EXTERIOR;if(p===yt.BOUNDARY)return yt.BOUNDARY}return yt.INTERIOR}else if(arguments[0]instanceof ct&&arguments[1]instanceof Cn){var _=arguments[0],y=arguments[1];if(!y.getEnvelopeInternal().intersects(_))return yt.EXTERIOR;var C=y.getCoordinates();return!y.isClosed()&&(_.equals(C[0])||_.equals(C[C.length-1]))?yt.BOUNDARY:Qt.isOnLine(_,C)?yt.INTERIOR:yt.EXTERIOR}else if(arguments[0]instanceof ct&&arguments[1]instanceof $r){var S=arguments[0],k=arguments[1],P=k.getCoordinate();return P.equals2D(S)?yt.INTERIOR:yt.EXTERIOR}};Hi.prototype.locateInPolygonRing=function(t,n){return n.getEnvelopeInternal().intersects(t)?Qt.locatePointInRing(t,n.getCoordinates()):yt.EXTERIOR};Hi.prototype.intersects=function(t,n){return this.locate(t,n)!==yt.EXTERIOR};Hi.prototype.updateLocationInfo=function(t){t===yt.INTERIOR&&(this._isIn=!0),t===yt.BOUNDARY&&this._numBoundaries++};Hi.prototype.computeLocation=function(t,n){var r=this;if(n instanceof $r&&this.updateLocationInfo(this.locateInternal(t,n)),n instanceof Cn)this.updateLocationInfo(this.locateInternal(t,n));else if(n instanceof Un)this.updateLocationInfo(this.locateInternal(t,n));else if(n instanceof Sa)for(var i=n,o=0;o<i.getNumGeometries();o++){var u=i.getGeometryN(o);r.updateLocationInfo(r.locateInternal(t,u))}else if(n instanceof Rs)for(var f=n,p=0;p<f.getNumGeometries();p++){var _=f.getGeometryN(p);r.updateLocationInfo(r.locateInternal(t,_))}else if(n instanceof wr)for(var y=new Os(n);y.hasNext();){var C=y.next();C!==n&&r.computeLocation(t,C)}};Hi.prototype.locate=function(t,n){return n.isEmpty()?yt.EXTERIOR:n instanceof Cn?this.locateInternal(t,n):n instanceof Un?this.locateInternal(t,n):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,n),this._boundaryRule.isInBoundary(this._numBoundaries)?yt.BOUNDARY:this._numBoundaries>0||this._isIn?yt.INTERIOR:yt.EXTERIOR)};Hi.prototype.interfaces_=function(){return[]};Hi.prototype.getClass=function(){return Hi};var br=function e(){if(this._component=null,this._segIndex=null,this._pt=null,arguments.length===2){var t=arguments[0],n=arguments[1];e.call(this,t,e.INSIDE_AREA,n)}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._component=r,this._segIndex=i,this._pt=o}},ax={INSIDE_AREA:{configurable:!0}};br.prototype.isInsideArea=function(){return this._segIndex===br.INSIDE_AREA};br.prototype.getCoordinate=function(){return this._pt};br.prototype.getGeometryComponent=function(){return this._component};br.prototype.getSegmentIndex=function(){return this._segIndex};br.prototype.interfaces_=function(){return[]};br.prototype.getClass=function(){return br};ax.INSIDE_AREA.get=function(){return-1};Object.defineProperties(br,ax);var qo=function(t){this._pts=t||null};qo.prototype.filter=function(t){t instanceof $r&&this._pts.add(t)};qo.prototype.interfaces_=function(){return[ms]};qo.prototype.getClass=function(){return qo};qo.getPoints=function(){if(arguments.length===1){var t=arguments[0];return t instanceof $r?ji.singletonList(t):qo.getPoints(t,new $t)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return n instanceof $r?r.add(n):n instanceof wr&&n.apply(new qo(r)),r}};var vu=function(){this._locations=null;var t=arguments[0];this._locations=t};vu.prototype.filter=function(t){(t instanceof $r||t instanceof Cn||t instanceof Un)&&this._locations.add(new br(t,0,t.getCoordinate()))};vu.prototype.interfaces_=function(){return[ms]};vu.prototype.getClass=function(){return vu};vu.getLocations=function(t){var n=new $t;return t.apply(new vu(n)),n};var ir=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Hi,this._minDistanceLocation=null,this._minDistance=be.MAX_VALUE,arguments.length===2){var t=arguments[0],n=arguments[1];this._geom=[t,n],this._terminateDistance=0}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=r,this._geom[1]=i,this._terminateDistance=o}};ir.prototype.computeContainmentDistance=function(){var t=this;if(arguments.length===0){var n=new Array(2).fill(null);if(this.computeContainmentDistance(0,n),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,n)}else if(arguments.length===2){var r=arguments[0],i=arguments[1],o=1-r,u=po.getPolygons(this._geom[r]);if(u.size()>0){var f=vu.getLocations(this._geom[o]);if(this.computeContainmentDistance(f,u,i),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[o]=i[0],this._minDistanceLocation[r]=i[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&ve(arguments[0],Fi)&&ve(arguments[1],Fi)){for(var p=arguments[0],_=arguments[1],y=arguments[2],C=0;C<p.size();C++)for(var S=p.get(C),k=0;k<_.size();k++)if(t.computeContainmentDistance(S,_.get(k),y),t._minDistance<=t._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof br&&arguments[1]instanceof Un){var P=arguments[0],R=arguments[1],O=arguments[2],H=P.getCoordinate();if(yt.EXTERIOR!==this._ptLocator.locate(H,R))return this._minDistance=0,O[0]=P,O[1]=new br(R,H),null}}};ir.prototype.computeMinDistanceLinesPoints=function(t,n,r){for(var i=this,o=0;o<t.size();o++)for(var u=t.get(o),f=0;f<n.size();f++){var p=n.get(f);if(i.computeMinDistance(u,p,r),i._minDistance<=i._terminateDistance)return null}};ir.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),n=Qn.getLines(this._geom[0]),r=Qn.getLines(this._geom[1]),i=qo.getPoints(this._geom[0]),o=qo.getPoints(this._geom[1]);if(this.computeMinDistanceLines(n,r,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance||(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,o,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance)||(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(r,i,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance))return null;t[0]=null,t[1]=null,this.computeMinDistancePoints(i,o,t),this.updateMinDistance(t,!1)};ir.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation};ir.prototype.updateMinDistance=function(t,n){if(t[0]===null)return null;n?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])};ir.prototype.nearestPoints=function(){this.computeMinDistance();var t=[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()];return t};ir.prototype.computeMinDistance=function(){var t=this;if(arguments.length===0){if(this._minDistanceLocation!==null||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof Cn&&arguments[1]instanceof $r){var n=arguments[0],r=arguments[1],i=arguments[2];if(n.getEnvelopeInternal().distance(r.getEnvelopeInternal())>this._minDistance)return null;for(var o=n.getCoordinates(),u=r.getCoordinate(),f=0;f<o.length-1;f++){var p=Qt.distancePointLine(u,o[f],o[f+1]);if(p<t._minDistance){t._minDistance=p;var _=new fe(o[f],o[f+1]),y=_.closestPoint(u);i[0]=new br(n,f,y),i[1]=new br(r,0,u)}if(t._minDistance<=t._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Cn&&arguments[1]instanceof Cn){var C=arguments[0],S=arguments[1],k=arguments[2];if(C.getEnvelopeInternal().distance(S.getEnvelopeInternal())>this._minDistance)return null;for(var P=C.getCoordinates(),R=S.getCoordinates(),O=0;O<P.length-1;O++)for(var H=0;H<R.length-1;H++){var X=Qt.distanceLineLine(P[O],P[O+1],R[H],R[H+1]);if(X<t._minDistance){t._minDistance=X;var U=new fe(P[O],P[O+1]),ut=new fe(R[H],R[H+1]),It=U.closestPoints(ut);k[0]=new br(C,O,It[0]),k[1]=new br(S,H,It[1])}if(t._minDistance<=t._terminateDistance)return null}}}};ir.prototype.computeMinDistancePoints=function(t,n,r){for(var i=this,o=0;o<t.size();o++)for(var u=t.get(o),f=0;f<n.size();f++){var p=n.get(f),_=u.getCoordinate().distance(p.getCoordinate());if(_<i._minDistance&&(i._minDistance=_,r[0]=new br(u,0,u.getCoordinate()),r[1]=new br(p,0,p.getCoordinate())),i._minDistance<=i._terminateDistance)return null}};ir.prototype.distance=function(){if(this._geom[0]===null||this._geom[1]===null)throw new dn("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)};ir.prototype.computeMinDistanceLines=function(t,n,r){for(var i=this,o=0;o<t.size();o++)for(var u=t.get(o),f=0;f<n.size();f++){var p=n.get(f);if(i.computeMinDistance(u,p,r),i._minDistance<=i._terminateDistance)return null}};ir.prototype.interfaces_=function(){return[]};ir.prototype.getClass=function(){return ir};ir.distance=function(t,n){var r=new ir(t,n);return r.distance()};ir.isWithinDistance=function(t,n,r){var i=new ir(t,n,r);return i.distance()<=r};ir.nearestPoints=function(t,n){var r=new ir(t,n);return r.nearestPoints()};var fr=function(){this._pt=[new ct,new ct],this._distance=be.NaN,this._isNull=!0};fr.prototype.getCoordinates=function(){return this._pt};fr.prototype.getCoordinate=function(t){return this._pt[t]};fr.prototype.setMinimum=function(){if(arguments.length===1){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(arguments.length===2){var n=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(n,r),null;var i=n.distance(r);i<this._distance&&this.initialize(n,r,i)}};fr.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var t=arguments[0],n=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(n),this._distance=t.distance(n),this._isNull=!1}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._pt[0].setCoordinate(r),this._pt[1].setCoordinate(i),this._distance=o,this._isNull=!1}};fr.prototype.toString=function(){return Gi.toLineString(this._pt[0],this._pt[1])};fr.prototype.getDistance=function(){return this._distance};fr.prototype.setMaximum=function(){if(arguments.length===1){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(arguments.length===2){var n=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(n,r),null;var i=n.distance(r);i>this._distance&&this.initialize(n,r,i)}};fr.prototype.interfaces_=function(){return[]};fr.prototype.getClass=function(){return fr};var us=function(){};us.prototype.interfaces_=function(){return[]};us.prototype.getClass=function(){return us};us.computeDistance=function(){if(arguments[2]instanceof fr&&arguments[0]instanceof Cn&&arguments[1]instanceof ct)for(var t=arguments[0],n=arguments[1],r=arguments[2],i=new fe,o=t.getCoordinates(),u=0;u<o.length-1;u++){i.setCoordinates(o[u],o[u+1]);var f=i.closestPoint(n);r.setMinimum(f,n)}else if(arguments[2]instanceof fr&&arguments[0]instanceof Un&&arguments[1]instanceof ct){var p=arguments[0],_=arguments[1],y=arguments[2];us.computeDistance(p.getExteriorRing(),_,y);for(var C=0;C<p.getNumInteriorRing();C++)us.computeDistance(p.getInteriorRingN(C),_,y)}else if(arguments[2]instanceof fr&&arguments[0]instanceof ye&&arguments[1]instanceof ct){var S=arguments[0],k=arguments[1],P=arguments[2];if(S instanceof Cn)us.computeDistance(S,k,P);else if(S instanceof Un)us.computeDistance(S,k,P);else if(S instanceof wr)for(var R=S,O=0;O<R.getNumGeometries();O++){var H=R.getGeometryN(O);us.computeDistance(H,k,P)}else P.setMinimum(S.getCoordinate(),k)}else if(arguments[2]instanceof fr&&arguments[0]instanceof fe&&arguments[1]instanceof ct){var X=arguments[0],U=arguments[1],ut=arguments[2],It=X.closestPoint(U);ut.setMinimum(It,U)}};var wi=function(){this._g0=null,this._g1=null,this._ptDist=new fr,this._densifyFrac=0;var t=arguments[0],n=arguments[1];this._g0=t,this._g1=n},Lm={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};wi.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()};wi.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new dn("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t};wi.prototype.compute=function(t,n){this.computeOrientedDistance(t,n,this._ptDist),this.computeOrientedDistance(n,t,this._ptDist)};wi.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()};wi.prototype.computeOrientedDistance=function(t,n,r){var i=new xu(n);if(t.apply(i),r.setMaximum(i.getMaxPointDistance()),this._densifyFrac>0){var o=new Jo(n,this._densifyFrac);t.apply(o),r.setMaximum(o.getMaxPointDistance())}};wi.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()};wi.prototype.interfaces_=function(){return[]};wi.prototype.getClass=function(){return wi};wi.distance=function(){if(arguments.length===2){var t=arguments[0],n=arguments[1],r=new wi(t,n);return r.distance()}else if(arguments.length===3){var i=arguments[0],o=arguments[1],u=arguments[2],f=new wi(i,o);return f.setDensifyFraction(u),f.distance()}};Lm.MaxPointDistanceFilter.get=function(){return xu};Lm.MaxDensifiedByFractionDistanceFilter.get=function(){return Jo};Object.defineProperties(wi,Lm);var xu=function(){this._maxPtDist=new fr,this._minPtDist=new fr,this._euclideanDist=new us,this._geom=null;var t=arguments[0];this._geom=t};xu.prototype.filter=function(t){this._minPtDist.initialize(),us.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};xu.prototype.getMaxPointDistance=function(){return this._maxPtDist};xu.prototype.interfaces_=function(){return[Fs]};xu.prototype.getClass=function(){return xu};var Jo=function(){this._maxPtDist=new fr,this._minPtDist=new fr,this._geom=null,this._numSubSegs=0;var t=arguments[0],n=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/n))};Jo.prototype.filter=function(t,n){var r=this;if(n===0)return null;for(var i=t.getCoordinate(n-1),o=t.getCoordinate(n),u=(o.x-i.x)/this._numSubSegs,f=(o.y-i.y)/this._numSubSegs,p=0;p<this._numSubSegs;p++){var _=i.x+p*u,y=i.y+p*f,C=new ct(_,y);r._minPtDist.initialize(),us.computeDistance(r._geom,C,r._minPtDist),r._maxPtDist.setMaximum(r._minPtDist)}};Jo.prototype.isDone=function(){return!1};Jo.prototype.isGeometryChanged=function(){return!1};Jo.prototype.getMaxPointDistance=function(){return this._maxPtDist};Jo.prototype.interfaces_=function(){return[Ui]};Jo.prototype.getClass=function(){return Jo};var Wr=function(t,n,r){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=n||null,this._result=r||null},wm={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Wr.prototype.checkMaximumDistance=function(t,n,r){var i=new wi(n,t);if(i.setDensifyFraction(.25),this._maxDistanceFound=i.orientedDistance(),this._maxDistanceFound>r){this._isValid=!1;var o=i.getCoordinates();this._errorLocation=o[1],this._errorIndicator=t.getFactory().createLineString(o),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Gi.toLineString(o[0],o[1])+")"}};Wr.prototype.isValid=function(){var t=Math.abs(this._bufDistance),n=Wr.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-n,this._maxValidDistance=t+n,this._input.isEmpty()||this._result.isEmpty()?!0:(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Wr.VERBOSE&&nr.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)};Wr.prototype.checkNegativeValid=function(){if(!(this._input instanceof Un||this._input instanceof Rs||this._input instanceof wr))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)};Wr.prototype.getErrorIndicator=function(){return this._errorIndicator};Wr.prototype.checkMinimumDistance=function(t,n,r){var i=new ir(t,n,r);if(this._minDistanceFound=i.distance(),this._minDistanceFound<r){this._isValid=!1;var o=i.nearestPoints();this._errorLocation=i.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(o),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Gi.toLineString(o[0],o[1])+" )"}};Wr.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)};Wr.prototype.getErrorLocation=function(){return this._errorLocation};Wr.prototype.getPolygonLines=function(t){for(var n=new $t,r=new Qn(n),i=po.getPolygons(t),o=i.iterator();o.hasNext();){var u=o.next();u.apply(r)}return t.getFactory().buildGeometry(n)};Wr.prototype.getErrorMessage=function(){return this._errMsg};Wr.prototype.interfaces_=function(){return[]};Wr.prototype.getClass=function(){return Wr};wm.VERBOSE.get=function(){return!1};wm.MAX_DISTANCE_DIFF_FRAC.get=function(){return .012};Object.defineProperties(Wr,wm);var sr=function(t,n,r){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=n||null,this._result=r||null},Sm={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};sr.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid};sr.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*sr.MAX_ENV_DIFF_FRAC;t===0&&(t=.001);var n=new he(this._input.getEnvelopeInternal());n.expandBy(this._distance);var r=new he(this._result.getEnvelopeInternal());r.expandBy(t),r.contains(n)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(r)),this.report("Envelope")};sr.prototype.checkDistance=function(){var t=new Wr(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")};sr.prototype.checkArea=function(){var t=this._input.getArea(),n=this._result.getArea();this._distance>0&&t>n&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<n&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")};sr.prototype.checkPolygonal=function(){this._result instanceof Un||this._result instanceof Rs||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")};sr.prototype.getErrorIndicator=function(){return this._errorIndicator};sr.prototype.getErrorLocation=function(){return this._errorLocation};sr.prototype.checkExpectedEmpty=function(){if(this._input.getDimension()>=2||this._distance>0)return null;this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),this.report("ExpectedEmpty")};sr.prototype.report=function(t){if(!sr.VERBOSE)return null;nr.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))};sr.prototype.getErrorMessage=function(){return this._errorMsg};sr.prototype.interfaces_=function(){return[]};sr.prototype.getClass=function(){return sr};sr.isValidMsg=function(t,n,r){var i=new sr(t,n,r);return i.isValid()?null:i.getErrorMessage()};sr.isValid=function(t,n,r){var i=new sr(t,n,r);return!!i.isValid()};Sm.VERBOSE.get=function(){return!1};Sm.MAX_ENV_DIFF_FRAC.get=function(){return .012};Object.defineProperties(sr,Sm);var bs=function(){this._pts=null,this._data=null;var t=arguments[0],n=arguments[1];this._pts=t,this._data=n};bs.prototype.getCoordinates=function(){return this._pts};bs.prototype.size=function(){return this._pts.length};bs.prototype.getCoordinate=function(t){return this._pts[t]};bs.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};bs.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:gu.octant(this.getCoordinate(t),this.getCoordinate(t+1))};bs.prototype.setData=function(t){this._data=t};bs.prototype.getData=function(){return this._data};bs.prototype.toString=function(){return Gi.toLineString(new wn(this._pts))};bs.prototype.interfaces_=function(){return[Us]};bs.prototype.getClass=function(){return bs};var $n=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new $t,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};$n.prototype.getInteriorIntersection=function(){return this._interiorIntersection};$n.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t};$n.prototype.getIntersectionSegments=function(){return this._intSegments};$n.prototype.count=function(){return this._intersectionCount};$n.prototype.getIntersections=function(){return this._intersections};$n.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t};$n.prototype.setKeepIntersections=function(t){this._keepIntersections=t};$n.prototype.processIntersections=function(t,n,r,i){if(!this._findAllIntersections&&this.hasIntersection()||t===r&&n===i)return null;if(this._isCheckEndSegmentsOnly){var o=this.isEndSegment(t,n)||this.isEndSegment(r,i);if(!o)return null}var u=t.getCoordinates()[n],f=t.getCoordinates()[n+1],p=r.getCoordinates()[i],_=r.getCoordinates()[i+1];this._li.computeIntersection(u,f,p,_),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=u,this._intSegments[1]=f,this._intSegments[2]=p,this._intSegments[3]=_,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)};$n.prototype.isEndSegment=function(t,n){return n===0||n>=t.size()-2};$n.prototype.hasIntersection=function(){return this._interiorIntersection!==null};$n.prototype.isDone=function(){return this._findAllIntersections?!1:this._interiorIntersection!==null};$n.prototype.interfaces_=function(){return[Ia]};$n.prototype.getClass=function(){return $n};$n.createAllIntersectionsFinder=function(t){var n=new $n(t);return n.setFindAllIntersections(!0),n};$n.createAnyIntersectionFinder=function(t){return new $n(t)};$n.createIntersectionCounter=function(t){var n=new $n(t);return n.setFindAllIntersections(!0),n.setKeepIntersections(!1),n};var Zi=function(){this._li=new Fa,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Zi.prototype.execute=function(){if(this._segInt!==null)return null;this.checkInteriorIntersections()};Zi.prototype.getIntersections=function(){return this._segInt.getIntersections()};Zi.prototype.isValid=function(){return this.execute(),this._isValid};Zi.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t};Zi.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new $n(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new bm;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null};Zi.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new vo(this.getErrorMessage(),this._segInt.getInteriorIntersection())};Zi.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Gi.toLineString(t[0],t[1])+" and "+Gi.toLineString(t[2],t[3])};Zi.prototype.interfaces_=function(){return[]};Zi.prototype.getClass=function(){return Zi};Zi.computeIntersections=function(t){var n=new Zi(t);return n.setFindAllIntersections(!0),n.isValid(),n.getIntersections()};var Aa=function e(){this._nv=null;var t=arguments[0];this._nv=new Zi(e.toSegmentStrings(t))};Aa.prototype.checkValid=function(){this._nv.checkValid()};Aa.prototype.interfaces_=function(){return[]};Aa.prototype.getClass=function(){return Aa};Aa.toSegmentStrings=function(t){for(var n=new $t,r=t.iterator();r.hasNext();){var i=r.next();n.add(new bs(i.getCoordinates(),i))}return n};Aa.checkValid=function(t){var n=new Aa(t);n.checkValid()};var Cu=function(t){this._mapOp=t};Cu.prototype.map=function(t){for(var n=this,r=new $t,i=0;i<t.getNumGeometries();i++){var o=n._mapOp.map(t.getGeometryN(i));o.isEmpty()||r.add(o)}return t.getFactory().createGeometryCollection(De.toGeometryArray(r))};Cu.prototype.interfaces_=function(){return[]};Cu.prototype.getClass=function(){return Cu};Cu.map=function(t,n){var r=new Cu(n);return r.map(t)};var Es=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new $t,this._resultLineList=new $t;var t=arguments[0],n=arguments[1],r=arguments[2];this._op=t,this._geometryFactory=n,this._ptLocator=r};Es.prototype.collectLines=function(t){for(var n=this,r=this._op.getGraph().getEdgeEnds().iterator();r.hasNext();){var i=r.next();n.collectLineEdge(i,t,n._lineEdgesList),n.collectBoundaryTouchEdge(i,t,n._lineEdgesList)}};Es.prototype.labelIsolatedLine=function(t,n){var r=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(n));t.getLabel().setLocation(n,r)};Es.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList};Es.prototype.collectLineEdge=function(t,n,r){var i=t.getLabel(),o=t.getEdge();t.isLineEdge()&&!t.isVisited()&&we.isResultOfOp(i,n)&&!o.isCovered()&&(r.add(o),t.setVisitedEdge(!0))};Es.prototype.findCoveredLineEdges=function(){for(var t=this,n=this._op.getGraph().getNodes().iterator();n.hasNext();){var r=n.next();r.getEdges().findCoveredLineEdges()}for(var i=this._op.getGraph().getEdgeEnds().iterator();i.hasNext();){var o=i.next(),u=o.getEdge();if(o.isLineEdge()&&!u.isCoveredSet()){var f=t._op.isCoveredByA(o.getCoordinate());u.setCovered(f)}}};Es.prototype.labelIsolatedLines=function(t){for(var n=this,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getLabel();i.isIsolated()&&(o.isNull(0)?n.labelIsolatedLine(i,0):n.labelIsolatedLine(i,1))}};Es.prototype.buildLines=function(t){for(var n=this,r=this._lineEdgesList.iterator();r.hasNext();){var i=r.next(),o=n._geometryFactory.createLineString(i.getCoordinates());n._resultLineList.add(o),i.setInResult(!0)}};Es.prototype.collectBoundaryTouchEdge=function(t,n,r){var i=t.getLabel();if(t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult())return null;Se.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),we.isResultOfOp(i,n)&&n===we.INTERSECTION&&(r.add(t.getEdge()),t.setVisitedEdge(!0))};Es.prototype.interfaces_=function(){return[]};Es.prototype.getClass=function(){return Es};var bu=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new $t;var t=arguments[0],n=arguments[1];this._op=t,this._geometryFactory=n};bu.prototype.filterCoveredNodeToPoint=function(t){var n=t.getCoordinate();if(!this._op.isCoveredByLA(n)){var r=this._geometryFactory.createPoint(n);this._resultPointList.add(r)}};bu.prototype.extractNonCoveredResultNodes=function(t){for(var n=this,r=this._op.getGraph().getNodes().iterator();r.hasNext();){var i=r.next();if(!i.isInResult()&&!i.isIncidentEdgeInResult()&&(i.getEdges().getDegree()===0||t===we.INTERSECTION)){var o=i.getLabel();we.isResultOfOp(o,t)&&n.filterCoveredNodeToPoint(i)}}};bu.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList};bu.prototype.interfaces_=function(){return[]};bu.prototype.getClass=function(){return bu};var Fr=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Fr.prototype.transformPoint=function(t,n){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))};Fr.prototype.transformPolygon=function(t,n){var r=this,i=!0,o=this.transformLinearRing(t.getExteriorRing(),t);(o===null||!(o instanceof zs)||o.isEmpty())&&(i=!1);for(var u=new $t,f=0;f<t.getNumInteriorRing();f++){var p=r.transformLinearRing(t.getInteriorRingN(f),t);p===null||p.isEmpty()||(p instanceof zs||(i=!1),u.add(p))}if(i)return this._factory.createPolygon(o,u.toArray([]));var _=new $t;return o!==null&&_.add(o),_.addAll(u),this._factory.buildGeometry(_)};Fr.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)};Fr.prototype.getInputGeometry=function(){return this._inputGeom};Fr.prototype.transformMultiLineString=function(t,n){for(var r=this,i=new $t,o=0;o<t.getNumGeometries();o++){var u=r.transformLineString(t.getGeometryN(o),t);u!==null&&(u.isEmpty()||i.add(u))}return this._factory.buildGeometry(i)};Fr.prototype.transformCoordinates=function(t,n){return this.copy(t)};Fr.prototype.transformLineString=function(t,n){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))};Fr.prototype.transformMultiPoint=function(t,n){for(var r=this,i=new $t,o=0;o<t.getNumGeometries();o++){var u=r.transformPoint(t.getGeometryN(o),t);u!==null&&(u.isEmpty()||i.add(u))}return this._factory.buildGeometry(i)};Fr.prototype.transformMultiPolygon=function(t,n){for(var r=this,i=new $t,o=0;o<t.getNumGeometries();o++){var u=r.transformPolygon(t.getGeometryN(o),t);u!==null&&(u.isEmpty()||i.add(u))}return this._factory.buildGeometry(i)};Fr.prototype.copy=function(t){return t.copy()};Fr.prototype.transformGeometryCollection=function(t,n){for(var r=this,i=new $t,o=0;o<t.getNumGeometries();o++){var u=r.transform(t.getGeometryN(o));u!==null&&(r._pruneEmptyGeometry&&u.isEmpty()||i.add(u))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(De.toGeometryArray(i)):this._factory.buildGeometry(i)};Fr.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof $r)return this.transformPoint(t,null);if(t instanceof Sl)return this.transformMultiPoint(t,null);if(t instanceof zs)return this.transformLinearRing(t,null);if(t instanceof Cn)return this.transformLineString(t,null);if(t instanceof Sa)return this.transformMultiLineString(t,null);if(t instanceof Un)return this.transformPolygon(t,null);if(t instanceof Rs)return this.transformMultiPolygon(t,null);if(t instanceof wr)return this.transformGeometryCollection(t,null);throw new dn("Unknown Geometry subtype: "+t.getClass().getName())};Fr.prototype.transformLinearRing=function(t,n){var r=this.transformCoordinates(t.getCoordinateSequence(),t);if(r===null)return this._factory.createLinearRing(null);var i=r.size();return i>0&&i<4&&!this._preserveType?this._factory.createLineString(r):this._factory.createLinearRing(r)};Fr.prototype.interfaces_=function(){return[]};Fr.prototype.getClass=function(){return Fr};var qs=function e(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new fe,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Cn&&typeof arguments[1]=="number"){var t=arguments[0],n=arguments[1];e.call(this,t.getCoordinates(),n)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var r=arguments[0],i=arguments[1];this._srcPts=r,this._isClosed=e.isClosed(r),this._snapTolerance=i}};qs.prototype.snapVertices=function(t,n){for(var r=this,i=this._isClosed?t.size()-1:t.size(),o=0;o<i;o++){var u=t.get(o),f=r.findSnapForVertex(u,n);f!==null&&(t.set(o,new ct(f)),o===0&&r._isClosed&&t.set(t.size()-1,new ct(f)))}};qs.prototype.findSnapForVertex=function(t,n){for(var r=this,i=0;i<n.length;i++){if(t.equals2D(n[i]))return null;if(t.distance(n[i])<r._snapTolerance)return n[i]}return null};qs.prototype.snapTo=function(t){var n=new kh(this._srcPts);this.snapVertices(n,t),this.snapSegments(n,t);var r=n.toCoordinateArray();return r};qs.prototype.snapSegments=function(t,n){var r=this;if(n.length===0)return null;var i=n.length;n[0].equals2D(n[n.length-1])&&(i=n.length-1);for(var o=0;o<i;o++){var u=n[o],f=r.findSegmentIndexToSnap(u,t);f>=0&&t.add(f+1,new ct(u),!1)}};qs.prototype.findSegmentIndexToSnap=function(t,n){for(var r=this,i=be.MAX_VALUE,o=-1,u=0;u<n.size()-1;u++){if(r._seg.p0=n.get(u),r._seg.p1=n.get(u+1),r._seg.p0.equals2D(t)||r._seg.p1.equals2D(t)){if(r._allowSnappingToSourceVertices)continue;return-1}var f=r._seg.distance(t);f<r._snapTolerance&&f<i&&(i=f,o=u)}return o};qs.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t};qs.prototype.interfaces_=function(){return[]};qs.prototype.getClass=function(){return qs};qs.isClosed=function(t){return t.length<=1?!1:t[0].equals2D(t[t.length-1])};var Sn=function(t){this._srcGeom=t||null},ux={SNAP_PRECISION_FACTOR:{configurable:!0}};Sn.prototype.snapTo=function(t,n){var r=this.extractTargetCoordinates(t),i=new lx(n,r);return i.transform(this._srcGeom)};Sn.prototype.snapToSelf=function(t,n){var r=this.extractTargetCoordinates(this._srcGeom),i=new lx(t,r,!0),o=i.transform(this._srcGeom),u=o;return n&&ve(u,Zo)&&(u=o.buffer(0)),u};Sn.prototype.computeSnapTolerance=function(t){var n=this.computeMinimumSegmentLength(t),r=n/10;return r};Sn.prototype.extractTargetCoordinates=function(t){for(var n=new gs,r=t.getCoordinates(),i=0;i<r.length;i++)n.add(r[i]);return n.toArray(new Array(0).fill(null))};Sn.prototype.computeMinimumSegmentLength=function(t){for(var n=be.MAX_VALUE,r=0;r<t.length-1;r++){var i=t[r].distance(t[r+1]);i<n&&(n=i)}return n};Sn.prototype.interfaces_=function(){return[]};Sn.prototype.getClass=function(){return Sn};Sn.snap=function(t,n,r){var i=new Array(2).fill(null),o=new Sn(t);i[0]=o.snapTo(n,r);var u=new Sn(n);return i[1]=u.snapTo(i[0],r),i};Sn.computeOverlaySnapTolerance=function(){if(arguments.length===1){var t=arguments[0],n=Sn.computeSizeBasedSnapTolerance(t),r=t.getPrecisionModel();if(r.getType()===je.FIXED){var i=1/r.getScale()*2/1.415;i>n&&(n=i)}return n}else if(arguments.length===2){var o=arguments[0],u=arguments[1];return Math.min(Sn.computeOverlaySnapTolerance(o),Sn.computeOverlaySnapTolerance(u))}};Sn.computeSizeBasedSnapTolerance=function(t){var n=t.getEnvelopeInternal(),r=Math.min(n.getHeight(),n.getWidth()),i=r*Sn.SNAP_PRECISION_FACTOR;return i};Sn.snapToSelf=function(t,n,r){var i=new Sn(t);return i.snapToSelf(n,r)};ux.SNAP_PRECISION_FACTOR.get=function(){return 1e-9};Object.defineProperties(Sn,ux);var lx=function(e){function t(n,r,i){e.call(this),this._snapTolerance=n||null,this._snapPts=r||null,this._isSelfSnap=i!==void 0?i:!1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.snapLine=function(r,i){var o=new qs(r,this._snapTolerance);return o.setAllowSnappingToSourceVertices(this._isSelfSnap),o.snapTo(i)},t.prototype.transformCoordinates=function(r,i){var o=r.toCoordinateArray(),u=this.snapLine(o,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(u)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Fr),xr=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};xr.prototype.getCommon=function(){return be.longBitsToDouble(this._commonBits)};xr.prototype.add=function(t){var n=be.doubleToLongBits(t);if(this._isFirst)return this._commonBits=n,this._commonSignExp=xr.signExpBits(this._commonBits),this._isFirst=!1,null;var r=xr.signExpBits(n);if(r!==this._commonSignExp)return this._commonBits=0,null;this._commonMantissaBitsCount=xr.numCommonMostSigMantissaBits(this._commonBits,n),this._commonBits=xr.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))};xr.prototype.toString=function(){if(arguments.length===1){var t=arguments[0],n=be.longBitsToDouble(t),r=be.toBinaryString(t),i="0000000000000000000000000000000000000000000000000000000000000000"+r,o=i.substring(i.length-64),u=o.substring(0,1)+"  "+o.substring(1,12)+"(exp) "+o.substring(12)+" [ "+n+" ]";return u}};xr.prototype.interfaces_=function(){return[]};xr.prototype.getClass=function(){return xr};xr.getBit=function(t,n){var r=1<<n;return t&r?1:0};xr.signExpBits=function(t){return t>>52};xr.zeroLowerBits=function(t,n){var r=(1<<n)-1,i=~r,o=t&i;return o};xr.numCommonMostSigMantissaBits=function(t,n){for(var r=0,i=52;i>=0;i--){if(xr.getBit(t,i)!==xr.getBit(n,i))return r;r++}return 52};var Qo=function(){this._commonCoord=null,this._ccFilter=new Eu},Pm={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};Qo.prototype.addCommonBits=function(t){var n=new ta(this._commonCoord);t.apply(n),t.geometryChanged()};Qo.prototype.removeCommonBits=function(t){if(this._commonCoord.x===0&&this._commonCoord.y===0)return t;var n=new ct(this._commonCoord);n.x=-n.x,n.y=-n.y;var r=new ta(n);return t.apply(r),t.geometryChanged(),t};Qo.prototype.getCommonCoordinate=function(){return this._commonCoord};Qo.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()};Qo.prototype.interfaces_=function(){return[]};Qo.prototype.getClass=function(){return Qo};Pm.CommonCoordinateFilter.get=function(){return Eu};Pm.Translater.get=function(){return ta};Object.defineProperties(Qo,Pm);var Eu=function(){this._commonBitsX=new xr,this._commonBitsY=new xr};Eu.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)};Eu.prototype.getCommonCoordinate=function(){return new ct(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())};Eu.prototype.interfaces_=function(){return[Fs]};Eu.prototype.getClass=function(){return Eu};var ta=function(){this.trans=null;var t=arguments[0];this.trans=t};ta.prototype.filter=function(t,n){var r=t.getOrdinate(n,0)+this.trans.x,i=t.getOrdinate(n,1)+this.trans.y;t.setOrdinate(n,0,r),t.setOrdinate(n,1,i)};ta.prototype.isDone=function(){return!1};ta.prototype.isGeometryChanged=function(){return!0};ta.prototype.interfaces_=function(){return[Ui]};ta.prototype.getClass=function(){return ta};var Xn=function(t,n){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=n,this.computeSnapTolerance()};Xn.prototype.selfSnap=function(t){var n=new Sn(t),r=n.snapTo(t,this._snapTolerance);return r};Xn.prototype.removeCommonBits=function(t){this._cbr=new Qo,this._cbr.add(t[0]),this._cbr.add(t[1]);var n=new Array(2).fill(null);return n[0]=this._cbr.removeCommonBits(t[0].copy()),n[1]=this._cbr.removeCommonBits(t[1].copy()),n};Xn.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t};Xn.prototype.getResultGeometry=function(t){var n=this.snap(this._geom),r=we.overlayOp(n[0],n[1],t);return this.prepareResult(r)};Xn.prototype.checkValid=function(t){t.isValid()||nr.out.println("Snapped geometry is invalid")};Xn.prototype.computeSnapTolerance=function(){this._snapTolerance=Sn.computeOverlaySnapTolerance(this._geom[0],this._geom[1])};Xn.prototype.snap=function(t){var n=this.removeCommonBits(t),r=Sn.snap(n[0],n[1],this._snapTolerance);return r};Xn.prototype.interfaces_=function(){return[]};Xn.prototype.getClass=function(){return Xn};Xn.overlayOp=function(t,n,r){var i=new Xn(t,n);return i.getResultGeometry(r)};Xn.union=function(t,n){return Xn.overlayOp(t,n,we.UNION)};Xn.intersection=function(t,n){return Xn.overlayOp(t,n,we.INTERSECTION)};Xn.symDifference=function(t,n){return Xn.overlayOp(t,n,we.SYMDIFFERENCE)};Xn.difference=function(t,n){return Xn.overlayOp(t,n,we.DIFFERENCE)};var Mr=function(t,n){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=n};Mr.prototype.getResultGeometry=function(t){var n=null,r=!1,i=null;try{n=we.overlayOp(this._geom[0],this._geom[1],t);var o=!0;o&&(r=!0)}catch(u){if(u instanceof _o)i=u;else throw u}finally{}if(!r)try{n=Xn.overlayOp(this._geom[0],this._geom[1],t)}catch(u){throw u instanceof _o?i:u}finally{}return n};Mr.prototype.interfaces_=function(){return[]};Mr.prototype.getClass=function(){return Mr};Mr.overlayOp=function(t,n,r){var i=new Mr(t,n);return i.getResultGeometry(r)};Mr.union=function(t,n){return Mr.overlayOp(t,n,we.UNION)};Mr.intersection=function(t,n){return Mr.overlayOp(t,n,we.INTERSECTION)};Mr.symDifference=function(t,n){return Mr.overlayOp(t,n,we.SYMDIFFERENCE)};Mr.difference=function(t,n){return Mr.overlayOp(t,n,we.DIFFERENCE)};var yh=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],n=arguments[1];this.mce=t,this.chainIndex=n};yh.prototype.computeIntersections=function(t,n){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,n)};yh.prototype.interfaces_=function(){return[]};yh.prototype.getClass=function(){return yh};var Jr=function e(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,arguments.length===2){var t=arguments[0],n=arguments[1];this._eventType=e.DELETE,this._xValue=t,this._insertEvent=n}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=e.INSERT,this._label=r,this._xValue=i,this._obj=o}},Mm={INSERT:{configurable:!0},DELETE:{configurable:!0}};Jr.prototype.isDelete=function(){return this._eventType===Jr.DELETE};Jr.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t};Jr.prototype.getObject=function(){return this._obj};Jr.prototype.compareTo=function(t){var n=t;return this._xValue<n._xValue?-1:this._xValue>n._xValue?1:this._eventType<n._eventType?-1:this._eventType>n._eventType?1:0};Jr.prototype.getInsertEvent=function(){return this._insertEvent};Jr.prototype.isInsert=function(){return this._eventType===Jr.INSERT};Jr.prototype.isSameLabel=function(t){return this._label===null?!1:this._label===t._label};Jr.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex};Jr.prototype.interfaces_=function(){return[Ii]};Jr.prototype.getClass=function(){return Jr};Mm.INSERT.get=function(){return 1};Mm.DELETE.get=function(){return 2};Object.defineProperties(Jr,Mm);var ap=function(){};ap.prototype.interfaces_=function(){return[]};ap.prototype.getClass=function(){return ap};var or=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],n=arguments[1],r=arguments[2];this._li=t,this._includeProper=n,this._recordIsolated=r};or.prototype.isTrivialIntersection=function(t,n,r,i){if(t===r&&this._li.getIntersectionNum()===1){if(or.isAdjacentSegments(n,i))return!0;if(t.isClosed()){var o=t.getNumPoints()-1;if(n===0&&i===o||i===0&&n===o)return!0}}return!1};or.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};or.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t};or.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};or.prototype.isBoundaryPointInternal=function(t,n){for(var r=n.iterator();r.hasNext();){var i=r.next(),o=i.getCoordinate();if(t.isIntersection(o))return!0}return!1};or.prototype.hasProperIntersection=function(){return this._hasProper};or.prototype.hasIntersection=function(){return this._hasIntersection};or.prototype.isDone=function(){return this._isDone};or.prototype.isBoundaryPoint=function(t,n){return n===null?!1:!!(this.isBoundaryPointInternal(t,n[0])||this.isBoundaryPointInternal(t,n[1]))};or.prototype.setBoundaryNodes=function(t,n){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=n};or.prototype.addIntersections=function(t,n,r,i){if(t===r&&n===i)return null;this.numTests++;var o=t.getCoordinates()[n],u=t.getCoordinates()[n+1],f=r.getCoordinates()[i],p=r.getCoordinates()[i+1];this._li.computeIntersection(o,u,f,p),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),r.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,n,r,i)||(this._hasIntersection=!0,(this._includeProper||!this._li.isProper())&&(t.addIntersections(this._li,n,0),r.addIntersections(this._li,i,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))};or.prototype.interfaces_=function(){return[]};or.prototype.getClass=function(){return or};or.isAdjacentSegments=function(t,n){return Math.abs(t-n)===1};var zS=function(e){function t(){e.call(this),this.events=new $t,this.nOverlaps=null}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.prepareEvents=function(){var r=this;ji.sort(this.events);for(var i=0;i<this.events.size();i++){var o=r.events.get(i);o.isDelete()&&o.getInsertEvent().setDeleteEventIndex(i)}},t.prototype.computeIntersections=function(){var r=this;if(arguments.length===1){var i=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var o=0;o<this.events.size();o++){var u=r.events.get(o);if(u.isInsert()&&r.processOverlaps(o,u.getDeleteEventIndex(),u,i),i.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof or&&ve(arguments[0],Fi)&&ve(arguments[1],Fi)){var f=arguments[0],p=arguments[1],_=arguments[2];this.addEdges(f,f),this.addEdges(p,p),this.computeIntersections(_)}else if(typeof arguments[2]=="boolean"&&ve(arguments[0],Fi)&&arguments[1]instanceof or){var y=arguments[0],C=arguments[1],S=arguments[2];S?this.addEdges(y,null):this.addEdges(y),this.computeIntersections(C)}}},t.prototype.addEdge=function(r,i){for(var o=this,u=r.getMonotoneChainEdge(),f=u.getStartIndexes(),p=0;p<f.length-1;p++){var _=new yh(u,p),y=new Jr(i,u.getMinX(p),_);o.events.add(y),o.events.add(new Jr(u.getMaxX(p),y))}},t.prototype.processOverlaps=function(r,i,o,u){for(var f=this,p=o.getObject(),_=r;_<i;_++){var y=f.events.get(_);if(y.isInsert()){var C=y.getObject();o.isSameLabel(y)||(p.computeIntersections(C,u),f.nOverlaps++)}}},t.prototype.addEdges=function(){var r=this;if(arguments.length===1)for(var i=arguments[0],o=i.iterator();o.hasNext();){var u=o.next();r.addEdge(u,u)}else if(arguments.length===2)for(var f=arguments[0],p=arguments[1],_=f.iterator();_.hasNext();){var y=_.next();r.addEdge(y,p)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(ap),Hs=function(){this._min=be.POSITIVE_INFINITY,this._max=be.NEGATIVE_INFINITY},cx={NodeComparator:{configurable:!0}};Hs.prototype.getMin=function(){return this._min};Hs.prototype.intersects=function(t,n){return!(this._min>n||this._max<t)};Hs.prototype.getMax=function(){return this._max};Hs.prototype.toString=function(){return Gi.toLineString(new ct(this._min,0),new ct(this._max,0))};Hs.prototype.interfaces_=function(){return[]};Hs.prototype.getClass=function(){return Hs};cx.NodeComparator.get=function(){return vh};Object.defineProperties(Hs,cx);var vh=function(){};vh.prototype.compare=function(t,n){var r=t,i=n,o=(r._min+r._max)/2,u=(i._min+i._max)/2;return o<u?-1:o>u?1:0};vh.prototype.interfaces_=function(){return[vl]};vh.prototype.getClass=function(){return vh};var GS=function(e){function t(){e.call(this),this._item=null;var n=arguments[0],r=arguments[1],i=arguments[2];this._min=n,this._max=r,this._item=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.query=function(r,i,o){if(!this.intersects(r,i))return null;o.visitItem(this._item)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Hs),US=function(e){function t(){e.call(this),this._node1=null,this._node2=null;var n=arguments[0],r=arguments[1];this._node1=n,this._node2=r,this.buildExtent(this._node1,this._node2)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.buildExtent=function(r,i){this._min=Math.min(r._min,i._min),this._max=Math.max(r._max,i._max)},t.prototype.query=function(r,i,o){if(!this.intersects(r,i))return null;this._node1!==null&&this._node1.query(r,i,o),this._node2!==null&&this._node2.query(r,i,o)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Hs),Zs=function(){this._leaves=new $t,this._root=null,this._level=0};Zs.prototype.buildTree=function(){var t=this;ji.sort(this._leaves,new Hs.NodeComparator);for(var n=this._leaves,r=null,i=new $t;;){if(t.buildLevel(n,i),i.size()===1)return i.get(0);r=n,n=i,i=r}};Zs.prototype.insert=function(t,n,r){if(this._root!==null)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new GS(t,n,r))};Zs.prototype.query=function(t,n,r){this.init(),this._root.query(t,n,r)};Zs.prototype.buildRoot=function(){if(this._root!==null)return null;this._root=this.buildTree()};Zs.prototype.printNode=function(t){nr.out.println(Gi.toLineString(new ct(t._min,this._level),new ct(t._max,this._level)))};Zs.prototype.init=function(){if(this._root!==null)return null;this.buildRoot()};Zs.prototype.buildLevel=function(t,n){this._level++,n.clear();for(var r=0;r<t.size();r+=2){var i=t.get(r),o=r+1<t.size()?t.get(r):null;if(o===null)n.add(i);else{var u=new US(t.get(r),t.get(r+1));n.add(u)}}};Zs.prototype.interfaces_=function(){return[]};Zs.prototype.getClass=function(){return Zs};var Al=function(){this._items=new $t};Al.prototype.visitItem=function(t){this._items.add(t)};Al.prototype.getItems=function(){return this._items};Al.prototype.interfaces_=function(){return[Wo]};Al.prototype.getClass=function(){return Al};var Dl=function(){this._index=null;var t=arguments[0];if(!ve(t,Zo))throw new dn("Argument must be Polygonal");this._index=new Da(t)},Im={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Dl.prototype.locate=function(t){var n=new hs(t),r=new Nl(n);return this._index.query(t.y,t.y,r),n.getLocation()};Dl.prototype.interfaces_=function(){return[kl]};Dl.prototype.getClass=function(){return Dl};Im.SegmentVisitor.get=function(){return Nl};Im.IntervalIndexedGeometry.get=function(){return Da};Object.defineProperties(Dl,Im);var Nl=function(){this._counter=null;var t=arguments[0];this._counter=t};Nl.prototype.visitItem=function(t){var n=t;this._counter.countSegment(n.getCoordinate(0),n.getCoordinate(1))};Nl.prototype.interfaces_=function(){return[Wo]};Nl.prototype.getClass=function(){return Nl};var Da=function(){this._index=new Zs;var t=arguments[0];this.init(t)};Da.prototype.init=function(t){for(var n=this,r=Qn.getLines(t),i=r.iterator();i.hasNext();){var o=i.next(),u=o.getCoordinates();n.addLine(u)}};Da.prototype.addLine=function(t){for(var n=this,r=1;r<t.length;r++){var i=new fe(t[r-1],t[r]),o=Math.min(i.p0.y,i.p1.y),u=Math.max(i.p0.y,i.p1.y);n._index.insert(o,u,i)}};Da.prototype.query=function(){if(arguments.length===2){var t=arguments[0],n=arguments[1],r=new Al;return this._index.query(t,n,r),r.getItems()}else if(arguments.length===3){var i=arguments[0],o=arguments[1],u=arguments[2];this._index.query(i,o,u)}};Da.prototype.interfaces_=function(){return[]};Da.prototype.getClass=function(){return Da};var Nc=function(e){function t(){if(e.call(this),this._parentGeom=null,this._lineEdgeMap=new Wv,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Hi,arguments.length===2){var n=arguments[0],r=arguments[1],i=Si.OGC_SFS_BOUNDARY_RULE;this._argIndex=n,this._parentGeom=r,this._boundaryNodeRule=i,r!==null&&this.add(r)}else if(arguments.length===3){var o=arguments[0],u=arguments[1],f=arguments[2];this._argIndex=o,this._parentGeom=u,this._boundaryNodeRule=f,u!==null&&this.add(u)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.insertBoundaryPoint=function(r,i){var o=this._nodes.addNode(i),u=o.getLabel(),f=1,p=yt.NONE;p=u.getLocation(r,qt.ON),p===yt.BOUNDARY&&f++;var _=t.determineBoundary(this._boundaryNodeRule,f);u.setLocation(r,_)},t.prototype.computeSelfNodes=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.computeSelfNodes(r,i,!1)}else if(arguments.length===3){var o=arguments[0],u=arguments[1],f=arguments[2],p=new or(o,!0,!1);p.setIsDoneIfProperInt(f);var _=this.createEdgeSetIntersector(),y=this._parentGeom instanceof zs||this._parentGeom instanceof Un||this._parentGeom instanceof Rs,C=u||!y;return _.computeIntersections(this._edges,p,C),this.addSelfIntersectionNodes(this._argIndex),p}},t.prototype.computeSplitEdges=function(r){for(var i=this._edges.iterator();i.hasNext();){var o=i.next();o.eiList.addSplitEdges(r)}},t.prototype.computeEdgeIntersections=function(r,i,o){var u=new or(i,o,!0);u.setBoundaryNodes(this.getBoundaryNodes(),r.getBoundaryNodes());var f=this.createEdgeSetIntersector();return f.computeIntersections(this._edges,r._edges,u),u},t.prototype.getGeometry=function(){return this._parentGeom},t.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},t.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},t.prototype.addPoint=function(){if(arguments[0]instanceof $r){var r=arguments[0],i=r.getCoordinate();this.insertPoint(this._argIndex,i,yt.INTERIOR)}else if(arguments[0]instanceof ct){var o=arguments[0];this.insertPoint(this._argIndex,o,yt.INTERIOR)}},t.prototype.addPolygon=function(r){var i=this;this.addPolygonRing(r.getExteriorRing(),yt.EXTERIOR,yt.INTERIOR);for(var o=0;o<r.getNumInteriorRing();o++){var u=r.getInteriorRingN(o);i.addPolygonRing(u,yt.INTERIOR,yt.EXTERIOR)}},t.prototype.addEdge=function(r){this.insertEdge(r);var i=r.getCoordinates();this.insertPoint(this._argIndex,i[0],yt.BOUNDARY),this.insertPoint(this._argIndex,i[i.length-1],yt.BOUNDARY)},t.prototype.addLineString=function(r){var i=Ne.removeRepeatedPoints(r.getCoordinates());if(i.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=i[0],null;var o=new op(i,new $e(this._argIndex,yt.INTERIOR));this._lineEdgeMap.put(r,o),this.insertEdge(o),Se.isTrue(i.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,i[0]),this.insertBoundaryPoint(this._argIndex,i[i.length-1])},t.prototype.getInvalidPoint=function(){return this._invalidPoint},t.prototype.getBoundaryPoints=function(){for(var r=this.getBoundaryNodes(),i=new Array(r.size()).fill(null),o=0,u=r.iterator();u.hasNext();){var f=u.next();i[o++]=f.getCoordinate().copy()}return i},t.prototype.getBoundaryNodes=function(){return this._boundaryNodes===null&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},t.prototype.addSelfIntersectionNode=function(r,i,o){if(this.isBoundaryNode(r,i))return null;o===yt.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(r,i):this.insertPoint(r,i,o)},t.prototype.addPolygonRing=function(r,i,o){if(r.isEmpty())return null;var u=Ne.removeRepeatedPoints(r.getCoordinates());if(u.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=u[0],null;var f=i,p=o;Qt.isCCW(u)&&(f=o,p=i);var _=new op(u,new $e(this._argIndex,yt.BOUNDARY,f,p));this._lineEdgeMap.put(r,_),this.insertEdge(_),this.insertPoint(this._argIndex,u[0],yt.BOUNDARY)},t.prototype.insertPoint=function(r,i,o){var u=this._nodes.addNode(i),f=u.getLabel();f===null?u._label=new $e(r,o):f.setLocation(r,o)},t.prototype.createEdgeSetIntersector=function(){return new zS},t.prototype.addSelfIntersectionNodes=function(r){for(var i=this,o=this._edges.iterator();o.hasNext();)for(var u=o.next(),f=u.getLabel().getLocation(r),p=u.eiList.iterator();p.hasNext();){var _=p.next();i.addSelfIntersectionNode(r,_.coord,f)}},t.prototype.add=function(){if(arguments.length===1){var r=arguments[0];if(r.isEmpty())return null;if(r instanceof Rs&&(this._useBoundaryDeterminationRule=!1),r instanceof Un)this.addPolygon(r);else if(r instanceof Cn)this.addLineString(r);else if(r instanceof $r)this.addPoint(r);else if(r instanceof Sl)this.addCollection(r);else if(r instanceof Sa)this.addCollection(r);else if(r instanceof Rs)this.addCollection(r);else if(r instanceof wr)this.addCollection(r);else throw new Error(r.getClass().getName())}else return e.prototype.add.apply(this,arguments)},t.prototype.addCollection=function(r){for(var i=this,o=0;o<r.getNumGeometries();o++){var u=r.getGeometryN(o);i.add(u)}},t.prototype.locate=function(r){return ve(this._parentGeom,Zo)&&this._parentGeom.getNumGeometries()>50?(this._areaPtLocator===null&&(this._areaPtLocator=new Dl(this._parentGeom)),this._areaPtLocator.locate(r)):this._ptLocator.locate(r,this._parentGeom)},t.prototype.findEdge=function(){if(arguments.length===1){var r=arguments[0];return this._lineEdgeMap.get(r)}else return e.prototype.findEdge.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.determineBoundary=function(r,i){return r.isInBoundary(i)?yt.BOUNDARY:yt.INTERIOR},t}(_n),Rl=function(){if(this._li=new Fa,this._resultPrecisionModel=null,this._arg=null,arguments.length===1){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Nc(0,t)}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=Si.OGC_SFS_BOUNDARY_RULE;n.getPrecisionModel().compareTo(r.getPrecisionModel())>=0?this.setComputationPrecision(n.getPrecisionModel()):this.setComputationPrecision(r.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Nc(0,n,i),this._arg[1]=new Nc(1,r,i)}else if(arguments.length===3){var o=arguments[0],u=arguments[1],f=arguments[2];o.getPrecisionModel().compareTo(u.getPrecisionModel())>=0?this.setComputationPrecision(o.getPrecisionModel()):this.setComputationPrecision(u.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Nc(0,o,f),this._arg[1]=new Nc(1,u,f)}};Rl.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()};Rl.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)};Rl.prototype.interfaces_=function(){return[]};Rl.prototype.getClass=function(){return Rl};var wa=function(){};wa.prototype.interfaces_=function(){return[]};wa.prototype.getClass=function(){return wa};wa.map=function(){if(arguments[0]instanceof ye&&ve(arguments[1],wa.MapOp)){for(var t=arguments[0],n=arguments[1],r=new $t,i=0;i<t.getNumGeometries();i++){var o=n.map(t.getGeometryN(i));o!==null&&r.add(o)}return t.getFactory().buildGeometry(r)}else if(ve(arguments[0],Bn)&&ve(arguments[1],wa.MapOp)){for(var u=arguments[0],f=arguments[1],p=new $t,_=u.iterator();_.hasNext();){var y=_.next(),C=f.map(y);C!==null&&p.add(C)}return p}};wa.MapOp=function(){};var we=function(e){function t(){var n=arguments[0],r=arguments[1];e.call(this,n,r),this._ptLocator=new Hi,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new qi,this._resultPolyList=new $t,this._resultLineList=new $t,this._resultPointList=new $t,this._graph=new _n(new ex),this._geomFact=n.getFactory()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.insertUniqueEdge=function(r){var i=this._edgeList.findEqualEdge(r);if(i!==null){var o=i.getLabel(),u=r.getLabel();i.isPointwiseEqual(r)||(u=new $e(r.getLabel()),u.flip());var f=i.getDepth();f.isNull()&&f.add(o),f.add(u),o.merge(u)}else this._edgeList.add(r)},t.prototype.getGraph=function(){return this._graph},t.prototype.cancelDuplicateResultEdges=function(){for(var r=this._graph.getEdgeEnds().iterator();r.hasNext();){var i=r.next(),o=i.getSym();i.isInResult()&&o.isInResult()&&(i.setInResult(!1),o.setInResult(!1))}},t.prototype.isCoveredByLA=function(r){return!!(this.isCovered(r,this._resultLineList)||this.isCovered(r,this._resultPolyList))},t.prototype.computeGeometry=function(r,i,o,u){var f=new $t;return f.addAll(r),f.addAll(i),f.addAll(o),f.isEmpty()?t.createEmptyResult(u,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(f)},t.prototype.mergeSymLabels=function(){for(var r=this._graph.getNodes().iterator();r.hasNext();){var i=r.next();i.getEdges().mergeSymLabels()}},t.prototype.isCovered=function(r,i){for(var o=this,u=i.iterator();u.hasNext();){var f=u.next(),p=o._ptLocator.locate(r,f);if(p!==yt.EXTERIOR)return!0}return!1},t.prototype.replaceCollapsedEdges=function(){for(var r=new $t,i=this._edgeList.iterator();i.hasNext();){var o=i.next();o.isCollapsed()&&(i.remove(),r.add(o.getCollapsedEdge()))}this._edgeList.addAll(r)},t.prototype.updateNodeLabelling=function(){for(var r=this._graph.getNodes().iterator();r.hasNext();){var i=r.next(),o=i.getEdges().getLabel();i.getLabel().merge(o)}},t.prototype.getResultGeometry=function(r){return this.computeOverlay(r),this._resultGeom},t.prototype.insertUniqueEdges=function(r){for(var i=this,o=r.iterator();o.hasNext();){var u=o.next();i.insertUniqueEdge(u)}},t.prototype.computeOverlay=function(r){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var i=new $t;this._arg[0].computeSplitEdges(i),this._arg[1].computeSplitEdges(i),this.insertUniqueEdges(i),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Aa.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(r),this.cancelDuplicateResultEdges();var o=new Xr(this._geomFact);o.add(this._graph),this._resultPolyList=o.getPolygons();var u=new Es(this,this._geomFact,this._ptLocator);this._resultLineList=u.build(r);var f=new bu(this,this._geomFact,this._ptLocator);this._resultPointList=f.build(r),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,r)},t.prototype.labelIncompleteNode=function(r,i){var o=this._ptLocator.locate(r.getCoordinate(),this._arg[i].getGeometry());r.getLabel().setLocation(i,o)},t.prototype.copyPoints=function(r){for(var i=this,o=this._arg[r].getNodeIterator();o.hasNext();){var u=o.next(),f=i._graph.addNode(u.getCoordinate());f.setLabel(r,u.getLabel().getLocation(r))}},t.prototype.findResultAreaEdges=function(r){for(var i=this._graph.getEdgeEnds().iterator();i.hasNext();){var o=i.next(),u=o.getLabel();u.isArea()&&!o.isInteriorAreaEdge()&&t.isResultOfOp(u.getLocation(0,qt.RIGHT),u.getLocation(1,qt.RIGHT),r)&&o.setInResult(!0)}},t.prototype.computeLabelsFromDepths=function(){for(var r=this._edgeList.iterator();r.hasNext();){var i=r.next(),o=i.getLabel(),u=i.getDepth();if(!u.isNull()){u.normalize();for(var f=0;f<2;f++)!o.isNull(f)&&o.isArea()&&!u.isNull(f)&&(u.getDelta(f)===0?o.toLine(f):(Se.isTrue(!u.isNull(f,qt.LEFT),"depth of LEFT side has not been initialized"),o.setLocation(f,qt.LEFT,u.getLocation(f,qt.LEFT)),Se.isTrue(!u.isNull(f,qt.RIGHT),"depth of RIGHT side has not been initialized"),o.setLocation(f,qt.RIGHT,u.getLocation(f,qt.RIGHT))))}}},t.prototype.computeLabelling=function(){for(var r=this,i=this._graph.getNodes().iterator();i.hasNext();){var o=i.next();o.getEdges().computeLabelling(r._arg)}this.mergeSymLabels(),this.updateNodeLabelling()},t.prototype.labelIncompleteNodes=function(){for(var r=this,i=this._graph.getNodes().iterator();i.hasNext();){var o=i.next(),u=o.getLabel();o.isIsolated()&&(u.isNull(0)?r.labelIncompleteNode(o,0):r.labelIncompleteNode(o,1)),o.getEdges().updateLabelling(u)}},t.prototype.isCoveredByA=function(r){return!!this.isCovered(r,this._resultPolyList)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Rl);we.overlayOp=function(e,t,n){var r=new we(e,t),i=r.getResultGeometry(n);return i};we.intersection=function(e,t){if(e.isEmpty()||t.isEmpty())return we.createEmptyResult(we.INTERSECTION,e,t,e.getFactory());if(e.isGeometryCollection()){var n=t;return Cu.map(e,{interfaces_:function(){return[wa.MapOp]},map:function(r){return r.intersection(n)}})}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),Mr.overlayOp(e,t,we.INTERSECTION)};we.symDifference=function(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return we.createEmptyResult(we.SYMDIFFERENCE,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),Mr.overlayOp(e,t,we.SYMDIFFERENCE)};we.resultDimension=function(e,t,n){var r=t.getDimension(),i=n.getDimension(),o=-1;switch(e){case we.INTERSECTION:o=Math.min(r,i);break;case we.UNION:o=Math.max(r,i);break;case we.DIFFERENCE:o=r;break;case we.SYMDIFFERENCE:o=Math.max(r,i);break}return o};we.createEmptyResult=function(e,t,n,r){var i=null;switch(we.resultDimension(e,t,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon();break}return i};we.difference=function(e,t){return e.isEmpty()?we.createEmptyResult(we.DIFFERENCE,e,t,e.getFactory()):t.isEmpty()?e.copy():(e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),Mr.overlayOp(e,t,we.DIFFERENCE))};we.isResultOfOp=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=e.getLocation(0),r=e.getLocation(1);return we.isResultOfOp(n,r,t)}else if(arguments.length===3){var i=arguments[0],o=arguments[1],u=arguments[2];switch(i===yt.BOUNDARY&&(i=yt.INTERIOR),o===yt.BOUNDARY&&(o=yt.INTERIOR),u){case we.INTERSECTION:return i===yt.INTERIOR&&o===yt.INTERIOR;case we.UNION:return i===yt.INTERIOR||o===yt.INTERIOR;case we.DIFFERENCE:return i===yt.INTERIOR&&o!==yt.INTERIOR;case we.SYMDIFFERENCE:return i===yt.INTERIOR&&o!==yt.INTERIOR||i!==yt.INTERIOR&&o===yt.INTERIOR}return!1}};we.INTERSECTION=1;we.UNION=2;we.DIFFERENCE=3;we.SYMDIFFERENCE=4;var Ho=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Hi,this._seg=new fe;var t=arguments[0],n=arguments[1];this._g=t,this._boundaryDistanceTolerance=n,this._linework=this.extractLinework(t)};Ho.prototype.isWithinToleranceOfBoundary=function(t){for(var n=this,r=0;r<this._linework.getNumGeometries();r++)for(var i=n._linework.getGeometryN(r),o=i.getCoordinateSequence(),u=0;u<o.size()-1;u++){o.getCoordinate(u,n._seg.p0),o.getCoordinate(u+1,n._seg.p1);var f=n._seg.distance(t);if(f<=n._boundaryDistanceTolerance)return!0}return!1};Ho.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?yt.BOUNDARY:this._ptLocator.locate(t,this._g)};Ho.prototype.extractLinework=function(t){var n=new Ol;t.apply(n);var r=n.getLinework(),i=De.toLineStringArray(r);return t.getFactory().createMultiLineString(i)};Ho.prototype.interfaces_=function(){return[]};Ho.prototype.getClass=function(){return Ho};var Ol=function(){this._linework=null,this._linework=new $t};Ol.prototype.getLinework=function(){return this._linework};Ol.prototype.filter=function(t){var n=this;if(t instanceof Un){var r=t;this._linework.add(r.getExteriorRing());for(var i=0;i<r.getNumInteriorRing();i++)n._linework.add(r.getInteriorRingN(i))}};Ol.prototype.interfaces_=function(){return[ms]};Ol.prototype.getClass=function(){return Ol};var Na=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Na.prototype.extractPoints=function(t,n,r){for(var i=this,o=t.getCoordinates(),u=0;u<o.length-1;u++)i.computeOffsetPoints(o[u],o[u+1],n,r)};Na.prototype.setSidesToGenerate=function(t,n){this._doLeft=t,this._doRight=n};Na.prototype.getPoints=function(t){for(var n=this,r=new $t,i=Qn.getLines(this._g),o=i.iterator();o.hasNext();){var u=o.next();n.extractPoints(u,t,r)}return r};Na.prototype.computeOffsetPoints=function(t,n,r,i){var o=n.x-t.x,u=n.y-t.y,f=Math.sqrt(o*o+u*u),p=r*o/f,_=r*u/f,y=(n.x+t.x)/2,C=(n.y+t.y)/2;if(this._doLeft){var S=new ct(y-_,C+p);i.add(S)}if(this._doRight){var k=new ct(y+_,C-p);i.add(k)}};Na.prototype.interfaces_=function(){return[]};Na.prototype.getClass=function(){return Na};var mi=function e(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=e.TOLERANCE,this._testCoords=new $t;var t=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=e.computeBoundaryDistanceTolerance(t,n),this._geom=[t,n,r],this._locFinder=[new Ho(this._geom[0],this._boundaryDistanceTolerance),new Ho(this._geom[1],this._boundaryDistanceTolerance),new Ho(this._geom[2],this._boundaryDistanceTolerance)]},hx={TOLERANCE:{configurable:!0}};mi.prototype.reportResult=function(t,n,r){nr.out.println("Overlay result invalid - A:"+yt.toLocationSymbol(n[0])+" B:"+yt.toLocationSymbol(n[1])+" expected:"+(r?"i":"e")+" actual:"+yt.toLocationSymbol(n[2]))};mi.prototype.isValid=function(t){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var n=this.checkValid(t);return n};mi.prototype.checkValid=function(){var t=this;if(arguments.length===1){for(var n=arguments[0],r=0;r<this._testCoords.size();r++){var i=t._testCoords.get(r);if(!t.checkValid(n,i))return t._invalidLocation=i,!1}return!0}else if(arguments.length===2){var o=arguments[0],u=arguments[1];return this._location[0]=this._locFinder[0].getLocation(u),this._location[1]=this._locFinder[1].getLocation(u),this._location[2]=this._locFinder[2].getLocation(u),mi.hasLocation(this._location,yt.BOUNDARY)?!0:this.isValidResult(o,this._location)}};mi.prototype.addTestPts=function(t){var n=new Na(t);this._testCoords.addAll(n.getPoints(5*this._boundaryDistanceTolerance))};mi.prototype.isValidResult=function(t,n){var r=we.isResultOfOp(n[0],n[1],t),i=n[2]===yt.INTERIOR,o=!(r^i);return o||this.reportResult(t,n,r),o};mi.prototype.getInvalidLocation=function(){return this._invalidLocation};mi.prototype.interfaces_=function(){return[]};mi.prototype.getClass=function(){return mi};mi.hasLocation=function(t,n){for(var r=0;r<3;r++)if(t[r]===n)return!0;return!1};mi.computeBoundaryDistanceTolerance=function(t,n){return Math.min(Sn.computeSizeBasedSnapTolerance(t),Sn.computeSizeBasedSnapTolerance(n))};mi.isValid=function(t,n,r,i){var o=new mi(t,n,i);return o.isValid(r)};hx.TOLERANCE.get=function(){return 1e-6};Object.defineProperties(mi,hx);var li=function e(t){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=e.extractFactory(t),this._inputGeoms=t};li.prototype.extractElements=function(t,n){var r=this;if(t===null)return null;for(var i=0;i<t.getNumGeometries();i++){var o=t.getGeometryN(i);r._skipEmpty&&o.isEmpty()||n.add(o)}};li.prototype.combine=function(){for(var t=this,n=new $t,r=this._inputGeoms.iterator();r.hasNext();){var i=r.next();t.extractElements(i,n)}return n.size()===0?this._geomFactory!==null?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(n)};li.prototype.interfaces_=function(){return[]};li.prototype.getClass=function(){return li};li.combine=function(){if(arguments.length===1){var t=arguments[0],n=new li(t);return n.combine()}else if(arguments.length===2){var r=arguments[0],i=arguments[1],o=new li(li.createList(r,i));return o.combine()}else if(arguments.length===3){var u=arguments[0],f=arguments[1],p=arguments[2],_=new li(li.createList(u,f,p));return _.combine()}};li.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()};li.createList=function(){if(arguments.length===2){var t=arguments[0],n=arguments[1],r=new $t;return r.add(t),r.add(n),r}else if(arguments.length===3){var i=arguments[0],o=arguments[1],u=arguments[2],f=new $t;return f.add(i),f.add(o),f.add(u),f}};var Dn=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,this._inputPolys===null&&(this._inputPolys=new $t)},fx={STRTREE_NODE_CAPACITY:{configurable:!0}};Dn.prototype.reduceToGeometries=function(t){for(var n=this,r=new $t,i=t.iterator();i.hasNext();){var o=i.next(),u=null;ve(o,Fi)?u=n.unionTree(o):o instanceof ye&&(u=o),r.add(u)}return r};Dn.prototype.extractByEnvelope=function(t,n,r){for(var i=new $t,o=0;o<n.getNumGeometries();o++){var u=n.getGeometryN(o);u.getEnvelopeInternal().intersects(t)?i.add(u):r.add(u)}return this._geomFactory.buildGeometry(i)};Dn.prototype.unionOptimized=function(t,n){var r=t.getEnvelopeInternal(),i=n.getEnvelopeInternal();if(!r.intersects(i)){var o=li.combine(t,n);return o}if(t.getNumGeometries()<=1&&n.getNumGeometries()<=1)return this.unionActual(t,n);var u=r.intersection(i);return this.unionUsingEnvelopeIntersection(t,n,u)};Dn.prototype.union=function(){if(this._inputPolys===null)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new Yv(Dn.STRTREE_NODE_CAPACITY),n=this._inputPolys.iterator();n.hasNext();){var r=n.next();t.insert(r.getEnvelopeInternal(),r)}this._inputPolys=null;var i=t.itemsTree(),o=this.unionTree(i);return o};Dn.prototype.binaryUnion=function(){if(arguments.length===1){var t=arguments[0];return this.binaryUnion(t,0,t.size())}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];if(i-r<=1){var o=Dn.getGeometry(n,r);return this.unionSafe(o,null)}else{if(i-r===2)return this.unionSafe(Dn.getGeometry(n,r),Dn.getGeometry(n,r+1));var u=Math.trunc((i+r)/2),f=this.binaryUnion(n,r,u),p=this.binaryUnion(n,u,i);return this.unionSafe(f,p)}}};Dn.prototype.repeatedUnion=function(t){for(var n=null,r=t.iterator();r.hasNext();){var i=r.next();n===null?n=i.copy():n=n.union(i)}return n};Dn.prototype.unionSafe=function(t,n){return t===null&&n===null?null:t===null?n.copy():n===null?t.copy():this.unionOptimized(t,n)};Dn.prototype.unionActual=function(t,n){return Dn.restrictToPolygons(t.union(n))};Dn.prototype.unionTree=function(t){var n=this.reduceToGeometries(t),r=this.binaryUnion(n);return r};Dn.prototype.unionUsingEnvelopeIntersection=function(t,n,r){var i=new $t,o=this.extractByEnvelope(r,t,i),u=this.extractByEnvelope(r,n,i),f=this.unionActual(o,u);i.add(f);var p=li.combine(i);return p};Dn.prototype.bufferUnion=function(){if(arguments.length===1){var t=arguments[0],n=t.get(0).getFactory(),r=n.buildGeometry(t),i=r.buffer(0);return i}else if(arguments.length===2){var o=arguments[0],u=arguments[1],f=o.getFactory(),p=f.createGeometryCollection([o,u]),_=p.buffer(0);return _}};Dn.prototype.interfaces_=function(){return[]};Dn.prototype.getClass=function(){return Dn};Dn.restrictToPolygons=function(t){if(ve(t,Zo))return t;var n=po.getPolygons(t);return n.size()===1?n.get(0):t.getFactory().createMultiPolygon(De.toPolygonArray(n))};Dn.getGeometry=function(t,n){return n>=t.size()?null:t.get(n)};Dn.union=function(t){var n=new Dn(t);return n.union()};fx.STRTREE_NODE_CAPACITY.get=function(){return 4};Object.defineProperties(Dn,fx);var up=function(){};up.prototype.interfaces_=function(){return[]};up.prototype.getClass=function(){return up};up.union=function(t,n){if(t.isEmpty()||n.isEmpty()){if(t.isEmpty()&&n.isEmpty())return we.createEmptyResult(we.UNION,t,n,t.getFactory());if(t.isEmpty())return n.copy();if(n.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(n),Mr.overlayOp(t,n,we.UNION)};function za(){return new lp}function lp(){this.reset()}lp.prototype={constructor:lp,reset:function(){this.s=this.t=0},add:function(e){g0(Sf,e,this.t),g0(this,Sf.s,this.s),this.s?this.t+=Sf.t:this.s=Sf.t},valueOf:function(){return this.s}};var Sf=new lp;function g0(e,t,n){var r=e.s=t+n,i=r-t,o=r-i;e.t=t-o+(n-i)}var Tn=1e-6,nn=Math.PI,ho=nn/2,m0=nn/4,bo=nn*2,ma=180/nn,os=nn/180,Er=Math.abs,VS=Math.atan,Bl=Math.atan2,Fn=Math.cos,zn=Math.sin,Kl=Math.sqrt;function px(e){return e>1?0:e<-1?nn:Math.acos(e)}function Lu(e){return e>1?ho:e<-1?-ho:Math.asin(e)}function Oc(){}function cp(e,t){e&&y0.hasOwnProperty(e.type)&&y0[e.type](e,t)}var _0={Feature:function(e,t){cp(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)cp(n[r].geometry,t)}},y0={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Fg(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Fg(n[r],t,0)},Polygon:function(e,t){v0(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)v0(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)cp(n[r],t)}};function Fg(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function v0(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Fg(e[n],t,1);t.polygonEnd()}function jS(e,t){e&&_0.hasOwnProperty(e.type)?_0[e.type](e,t):cp(e,t)}za();za();function zg(e){return[Bl(e[1],e[0]),Lu(e[2])]}function Fl(e){var t=e[0],n=e[1],r=Fn(n);return[r*Fn(t),r*zn(t),zn(n)]}function Pf(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function hp(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function cg(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Mf(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Gg(e){var t=Kl(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}za();function dx(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function Ug(e,t){return[e>nn?e-bo:e<-nn?e+bo:e,t]}Ug.invert=Ug;function qS(e,t,n){return(e%=bo)?t||n?dx(C0(e),b0(t,n)):C0(e):t||n?b0(t,n):Ug}function x0(e){return function(t,n){return t+=e,[t>nn?t-bo:t<-nn?t+bo:t,n]}}function C0(e){var t=x0(e);return t.invert=x0(-e),t}function b0(e,t){var n=Fn(e),r=zn(e),i=Fn(t),o=zn(t);function u(f,p){var _=Fn(p),y=Fn(f)*_,C=zn(f)*_,S=zn(p),k=S*n+y*r;return[Bl(C*i-k*o,y*n-S*r),Lu(k*i+C*o)]}return u.invert=function(f,p){var _=Fn(p),y=Fn(f)*_,C=zn(f)*_,S=zn(p),k=S*i-C*o;return[Bl(C*i+S*o,y*n+k*r),Lu(k*n-y*r)]},u}function HS(e,t,n,r,i,o){if(n){var u=Fn(t),f=zn(t),p=r*n;i==null?(i=t+r*bo,o=t-p/2):(i=E0(u,i),o=E0(u,o),(r>0?i<o:i>o)&&(i+=r*bo));for(var _,y=i;r>0?y>o:y<o;y-=p)_=zg([u,-f*Fn(y),-f*zn(y)]),e.point(_[0],_[1])}}function E0(e,t){t=Fl(t),t[0]-=e,Gg(t);var n=px(-t[1]);return((-t[2]<0?-n:n)+bo-Tn)%bo}function gx(){var e=[],t;return{point:function(n,r){t.push([n,r])},lineStart:function(){e.push(t=[])},lineEnd:Oc,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function ZS(e,t,n,r,i,o){var u=e[0],f=e[1],p=t[0],_=t[1],y=0,C=1,S=p-u,k=_-f,P;if(P=n-u,!(!S&&P>0)){if(P/=S,S<0){if(P<y)return;P<C&&(C=P)}else if(S>0){if(P>C)return;P>y&&(y=P)}if(P=i-u,!(!S&&P<0)){if(P/=S,S<0){if(P>C)return;P>y&&(y=P)}else if(S>0){if(P<y)return;P<C&&(C=P)}if(P=r-f,!(!k&&P>0)){if(P/=k,k<0){if(P<y)return;P<C&&(C=P)}else if(k>0){if(P>C)return;P>y&&(y=P)}if(P=o-f,!(!k&&P<0)){if(P/=k,k<0){if(P>C)return;P>y&&(y=P)}else if(k>0){if(P<y)return;P<C&&(C=P)}return y>0&&(e[0]=u+y*S,e[1]=f+y*k),C<1&&(t[0]=u+C*S,t[1]=f+C*k),!0}}}}}function Uf(e,t){return Er(e[0]-t[0])<Tn&&Er(e[1]-t[1])<Tn}function If(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function mx(e,t,n,r,i){var o=[],u=[],f,p;if(e.forEach(function(P){if(!((R=P.length-1)<=0)){var R,O=P[0],H=P[R],X;if(Uf(O,H)){for(i.lineStart(),f=0;f<R;++f)i.point((O=P[f])[0],O[1]);i.lineEnd();return}o.push(X=new If(O,P,null,!0)),u.push(X.o=new If(O,null,X,!1)),o.push(X=new If(H,P,null,!1)),u.push(X.o=new If(H,null,X,!0))}}),!!o.length){for(u.sort(t),L0(o),L0(u),f=0,p=u.length;f<p;++f)u[f].e=n=!n;for(var _=o[0],y,C;;){for(var S=_,k=!0;S.v;)if((S=S.n)===_)return;y=S.z,i.lineStart();do{if(S.v=S.o.v=!0,S.e){if(k)for(f=0,p=y.length;f<p;++f)i.point((C=y[f])[0],C[1]);else r(S.x,S.n.x,1,i);S=S.n}else{if(k)for(y=S.p.z,f=y.length-1;f>=0;--f)i.point((C=y[f])[0],C[1]);else r(S.x,S.p.x,-1,i);S=S.p}S=S.o,y=S.z,k=!k}while(!S.v);i.lineEnd()}}}function L0(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function _x(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function WS(e){return e.length===1&&(e=KS(e)),{left:function(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}}function KS(e){return function(t,n){return _x(e(t),n)}}WS(_x);function yx(e){for(var t=e.length,n,r=-1,i=0,o,u;++r<t;)i+=e[r].length;for(o=new Array(i);--t>=0;)for(u=e[t],n=u.length;--n>=0;)o[--i]=u[n];return o}var kf=1e9,Tf=-1e9;function $S(e,t,n,r){function i(_,y){return e<=_&&_<=n&&t<=y&&y<=r}function o(_,y,C,S){var k=0,P=0;if(_==null||(k=u(_,C))!==(P=u(y,C))||p(_,y)<0^C>0)do S.point(k===0||k===3?e:n,k>1?r:t);while((k=(k+C+4)%4)!==P);else S.point(y[0],y[1])}function u(_,y){return Er(_[0]-e)<Tn?y>0?0:3:Er(_[0]-n)<Tn?y>0?2:1:Er(_[1]-t)<Tn?y>0?1:0:y>0?3:2}function f(_,y){return p(_.x,y.x)}function p(_,y){var C=u(_,1),S=u(y,1);return C!==S?C-S:C===0?y[1]-_[1]:C===1?_[0]-y[0]:C===2?_[1]-y[1]:y[0]-_[0]}return function(_){var y=_,C=gx(),S,k,P,R,O,H,X,U,ut,It,ot,kt={point:$,lineStart:Et,lineEnd:At,polygonStart:xt,polygonEnd:nt};function $(V,rt){i(V,rt)&&y.point(V,rt)}function it(){for(var V=0,rt=0,ht=k.length;rt<ht;++rt)for(var st=k[rt],ft=1,Tt=st.length,Pt=st[0],jt,Ot,ee=Pt[0],ne=Pt[1];ft<Tt;++ft)jt=ee,Ot=ne,Pt=st[ft],ee=Pt[0],ne=Pt[1],Ot<=r?ne>r&&(ee-jt)*(r-Ot)>(ne-Ot)*(e-jt)&&++V:ne<=r&&(ee-jt)*(r-Ot)<(ne-Ot)*(e-jt)&&--V;return V}function xt(){y=C,S=[],k=[],ot=!0}function nt(){var V=it(),rt=ot&&V,ht=(S=yx(S)).length;(rt||ht)&&(_.polygonStart(),rt&&(_.lineStart(),o(null,null,1,_),_.lineEnd()),ht&&mx(S,f,V,o,_),_.polygonEnd()),y=_,S=k=P=null}function Et(){kt.point=W,k&&k.push(P=[]),It=!0,ut=!1,X=U=NaN}function At(){S&&(W(R,O),H&&ut&&C.rejoin(),S.push(C.result())),kt.point=$,ut&&y.lineEnd()}function W(V,rt){var ht=i(V,rt);if(k&&P.push([V,rt]),It)R=V,O=rt,H=ht,It=!1,ht&&(y.lineStart(),y.point(V,rt));else if(ht&&ut)y.point(V,rt);else{var st=[X=Math.max(Tf,Math.min(kf,X)),U=Math.max(Tf,Math.min(kf,U))],ft=[V=Math.max(Tf,Math.min(kf,V)),rt=Math.max(Tf,Math.min(kf,rt))];ZS(st,ft,e,t,n,r)?(ut||(y.lineStart(),y.point(st[0],st[1])),y.point(ft[0],ft[1]),ht||y.lineEnd(),ot=!1):ht&&(y.lineStart(),y.point(V,rt),ot=!1)}X=V,U=rt,ut=ht}return kt}}var hg=za();function XS(e,t){var n=t[0],r=t[1],i=[zn(n),-Fn(n),0],o=0,u=0;hg.reset();for(var f=0,p=e.length;f<p;++f)if(y=(_=e[f]).length)for(var _,y,C=_[y-1],S=C[0],k=C[1]/2+m0,P=zn(k),R=Fn(k),O=0;O<y;++O,S=X,P=ut,R=It,C=H){var H=_[O],X=H[0],U=H[1]/2+m0,ut=zn(U),It=Fn(U),ot=X-S,kt=ot>=0?1:-1,$=kt*ot,it=$>nn,xt=P*ut;if(hg.add(Bl(xt*kt*zn($),R*It+xt*Fn($))),o+=it?ot+kt*bo:ot,it^S>=n^X>=n){var nt=hp(Fl(C),Fl(H));Gg(nt);var Et=hp(i,nt);Gg(Et);var At=(it^ot>=0?-1:1)*Lu(Et[2]);(r>At||r===At&&(nt[0]||nt[1]))&&(u+=it^ot>=0?1:-1)}}return(o<-1e-6||o<Tn&&hg<-1e-6)^u&1}za();function w0(e){return e}za();za();var zl=1/0,fp=zl,xh=-zl,pp=xh,S0={point:YS,lineStart:Oc,lineEnd:Oc,polygonStart:Oc,polygonEnd:Oc,result:function(){var e=[[zl,fp],[xh,pp]];return xh=pp=-(fp=zl=1/0),e}};function YS(e,t){e<zl&&(zl=e),e>xh&&(xh=e),t<fp&&(fp=t),t>pp&&(pp=t)}za();function vx(e,t,n,r){return function(i,o){var u=t(o),f=i.invert(r[0],r[1]),p=gx(),_=t(p),y=!1,C,S,k,P={point:R,lineStart:H,lineEnd:X,polygonStart:function(){P.point=U,P.lineStart=ut,P.lineEnd=It,S=[],C=[]},polygonEnd:function(){P.point=R,P.lineStart=H,P.lineEnd=X,S=yx(S);var ot=XS(C,f);S.length?(y||(o.polygonStart(),y=!0),mx(S,QS,ot,n,o)):ot&&(y||(o.polygonStart(),y=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),y&&(o.polygonEnd(),y=!1),S=C=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function R(ot,kt){var $=i(ot,kt);e(ot=$[0],kt=$[1])&&o.point(ot,kt)}function O(ot,kt){var $=i(ot,kt);u.point($[0],$[1])}function H(){P.point=O,u.lineStart()}function X(){P.point=R,u.lineEnd()}function U(ot,kt){k.push([ot,kt]);var $=i(ot,kt);_.point($[0],$[1])}function ut(){_.lineStart(),k=[]}function It(){U(k[0][0],k[0][1]),_.lineEnd();var ot=_.clean(),kt=p.result(),$,it=kt.length,xt,nt,Et;if(k.pop(),C.push(k),k=null,!!it){if(ot&1){if(nt=kt[0],(xt=nt.length-1)>0){for(y||(o.polygonStart(),y=!0),o.lineStart(),$=0;$<xt;++$)o.point((Et=nt[$])[0],Et[1]);o.lineEnd()}return}it>1&&ot&2&&kt.push(kt.pop().concat(kt.shift())),S.push(kt.filter(JS))}}return P}}function JS(e){return e.length>1}function QS(e,t){return((e=e.x)[0]<0?e[1]-ho-Tn:ho-e[1])-((t=t.x)[0]<0?t[1]-ho-Tn:ho-t[1])}const P0=vx(function(){return!0},t3,n3,[-nn,-ho]);function t3(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,u){var f=o>0?nn:-nn,p=Er(o-t);Er(p-nn)<Tn?(e.point(t,n=(n+u)/2>0?ho:-ho),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(f,n),e.point(o,n),i=0):r!==f&&p>=nn&&(Er(t-r)<Tn&&(t-=r*Tn),Er(o-f)<Tn&&(o-=f*Tn),n=e3(t,n,o,u),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(f,n),i=0),e.point(t=o,n=u),r=f},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function e3(e,t,n,r){var i,o,u=zn(e-n);return Er(u)>Tn?VS((zn(t)*(o=Fn(r))*zn(n)-zn(r)*(i=Fn(t))*zn(e))/(i*o*u)):(t+r)/2}function n3(e,t,n,r){var i;if(e==null)i=n*ho,r.point(-nn,i),r.point(0,i),r.point(nn,i),r.point(nn,0),r.point(nn,-i),r.point(0,-i),r.point(-nn,-i),r.point(-nn,0),r.point(-nn,i);else if(Er(e[0]-t[0])>Tn){var o=e[0]<t[0]?nn:-nn;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function r3(e,t){var n=Fn(e),r=n>0,i=Er(n)>Tn;function o(y,C,S,k){HS(k,e,t,S,y,C)}function u(y,C){return Fn(y)*Fn(C)>n}function f(y){var C,S,k,P,R;return{lineStart:function(){P=k=!1,R=1},point:function(O,H){var X=[O,H],U,ut=u(O,H),It=r?ut?0:_(O,H):ut?_(O+(O<0?nn:-nn),H):0;if(!C&&(P=k=ut)&&y.lineStart(),ut!==k&&(U=p(C,X),(!U||Uf(C,U)||Uf(X,U))&&(X[0]+=Tn,X[1]+=Tn,ut=u(X[0],X[1]))),ut!==k)R=0,ut?(y.lineStart(),U=p(X,C),y.point(U[0],U[1])):(U=p(C,X),y.point(U[0],U[1]),y.lineEnd()),C=U;else if(i&&C&&r^ut){var ot;!(It&S)&&(ot=p(X,C,!0))&&(R=0,r?(y.lineStart(),y.point(ot[0][0],ot[0][1]),y.point(ot[1][0],ot[1][1]),y.lineEnd()):(y.point(ot[1][0],ot[1][1]),y.lineEnd(),y.lineStart(),y.point(ot[0][0],ot[0][1])))}ut&&(!C||!Uf(C,X))&&y.point(X[0],X[1]),C=X,k=ut,S=It},lineEnd:function(){k&&y.lineEnd(),C=null},clean:function(){return R|(P&&k)<<1}}}function p(y,C,S){var k=Fl(y),P=Fl(C),R=[1,0,0],O=hp(k,P),H=Pf(O,O),X=O[0],U=H-X*X;if(!U)return!S&&y;var ut=n*H/U,It=-n*X/U,ot=hp(R,O),kt=Mf(R,ut),$=Mf(O,It);cg(kt,$);var it=ot,xt=Pf(kt,it),nt=Pf(it,it),Et=xt*xt-nt*(Pf(kt,kt)-1);if(!(Et<0)){var At=Kl(Et),W=Mf(it,(-xt-At)/nt);if(cg(W,kt),W=zg(W),!S)return W;var V=y[0],rt=C[0],ht=y[1],st=C[1],ft;rt<V&&(ft=V,V=rt,rt=ft);var Tt=rt-V,Pt=Er(Tt-nn)<Tn,jt=Pt||Tt<Tn;if(!Pt&&st<ht&&(ft=ht,ht=st,st=ft),jt?Pt?ht+st>0^W[1]<(Er(W[0]-V)<Tn?ht:st):ht<=W[1]&&W[1]<=st:Tt>nn^(V<=W[0]&&W[0]<=rt)){var Ot=Mf(it,(-xt+At)/nt);return cg(Ot,kt),[W,zg(Ot)]}}}function _(y,C){var S=r?e:nn-e,k=0;return y<-S?k|=1:y>S&&(k|=2),C<-S?k|=4:C>S&&(k|=8),k}return vx(u,f,o,r?[0,-e]:[-nn,e-nn])}function xx(e){return function(t){var n=new Vg;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Vg(){}Vg.prototype={constructor:Vg,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Cx(e,t,n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),o!=null&&e.clipExtent(null),jS(n,e.stream(S0));var u=S0.result(),f=Math.min(r/(u[1][0]-u[0][0]),i/(u[1][1]-u[0][1])),p=+t[0][0]+(r-f*(u[1][0]+u[0][0]))/2,_=+t[0][1]+(i-f*(u[1][1]+u[0][1]))/2;return o!=null&&e.clipExtent(o),e.scale(f*150).translate([p,_])}function i3(e,t,n){return Cx(e,[[0,0],t],n)}var M0=16,s3=Fn(30*os);function I0(e,t){return+t?a3(e,t):o3(e)}function o3(e){return xx({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function a3(e,t){function n(r,i,o,u,f,p,_,y,C,S,k,P,R,O){var H=_-r,X=y-i,U=H*H+X*X;if(U>4*t&&R--){var ut=u+S,It=f+k,ot=p+P,kt=Kl(ut*ut+It*It+ot*ot),$=Lu(ot/=kt),it=Er(Er(ot)-1)<Tn||Er(o-C)<Tn?(o+C)/2:Bl(It,ut),xt=e(it,$),nt=xt[0],Et=xt[1],At=nt-r,W=Et-i,V=X*At-H*W;(V*V/U>t||Er((H*At+X*W)/U-.5)>.3||u*S+f*k+p*P<s3)&&(n(r,i,o,u,f,p,nt,Et,it,ut/=kt,It/=kt,ot,R,O),O.point(nt,Et),n(nt,Et,it,ut,It,ot,_,y,C,S,k,P,R,O))}}return function(r){var i,o,u,f,p,_,y,C,S,k,P,R,O={point:H,lineStart:X,lineEnd:ut,polygonStart:function(){r.polygonStart(),O.lineStart=It},polygonEnd:function(){r.polygonEnd(),O.lineStart=X}};function H($,it){$=e($,it),r.point($[0],$[1])}function X(){C=NaN,O.point=U,r.lineStart()}function U($,it){var xt=Fl([$,it]),nt=e($,it);n(C,S,y,k,P,R,C=nt[0],S=nt[1],y=$,k=xt[0],P=xt[1],R=xt[2],M0,r),r.point(C,S)}function ut(){O.point=H,r.lineEnd()}function It(){X(),O.point=ot,O.lineEnd=kt}function ot($,it){U(i=$,it),o=C,u=S,f=k,p=P,_=R,O.point=U}function kt(){n(C,S,y,k,P,R,o,u,i,f,p,_,M0,r),O.lineEnd=ut,ut()}return O}}var u3=xx({point:function(e,t){this.stream.point(e*os,t*os)}});function l3(e){return c3(function(){return e})()}function c3(e){var t,n=150,r=480,i=250,o,u,f=0,p=0,_=0,y=0,C=0,S,k,P=null,R=P0,O=null,H,X,U,ut=w0,It=.5,ot=I0(nt,It),kt,$;function it(W){return W=k(W[0]*os,W[1]*os),[W[0]*n+o,u-W[1]*n]}function xt(W){return W=k.invert((W[0]-o)/n,(u-W[1])/n),W&&[W[0]*ma,W[1]*ma]}function nt(W,V){return W=t(W,V),[W[0]*n+o,u-W[1]*n]}it.stream=function(W){return kt&&$===W?kt:kt=u3(R(S,ot(ut($=W))))},it.clipAngle=function(W){return arguments.length?(R=+W?r3(P=W*os,6*os):(P=null,P0),At()):P*ma},it.clipExtent=function(W){return arguments.length?(ut=W==null?(O=H=X=U=null,w0):$S(O=+W[0][0],H=+W[0][1],X=+W[1][0],U=+W[1][1]),At()):O==null?null:[[O,H],[X,U]]},it.scale=function(W){return arguments.length?(n=+W,Et()):n},it.translate=function(W){return arguments.length?(r=+W[0],i=+W[1],Et()):[r,i]},it.center=function(W){return arguments.length?(f=W[0]%360*os,p=W[1]%360*os,Et()):[f*ma,p*ma]},it.rotate=function(W){return arguments.length?(_=W[0]%360*os,y=W[1]%360*os,C=W.length>2?W[2]%360*os:0,Et()):[_*ma,y*ma,C*ma]},it.precision=function(W){return arguments.length?(ot=I0(nt,It=W*W),At()):Kl(It)},it.fitExtent=function(W,V){return Cx(it,W,V)},it.fitSize=function(W,V){return i3(it,W,V)};function Et(){k=dx(S=qS(_,y,C),t);var W=t(f,p);return o=r-W[0]*n,u=i+W[1]*n,At()}function At(){return kt=$=null,it}return function(){return t=e.apply(this,arguments),it.invert=t.invert&&xt,Et()}}function bx(e){return function(t,n){var r=Fn(t),i=Fn(n),o=e(r*i);return[o*i*zn(t),o*zn(n)]}}function Ex(e){return function(t,n){var r=Kl(t*t+n*n),i=e(r),o=zn(i),u=Fn(i);return[Bl(t*o,r*u),Lu(r&&n*o/r)]}}var h3=bx(function(e){return Kl(2/(1+e))});h3.invert=Ex(function(e){return 2*Lu(e/2)});var Lx=bx(function(e){return(e=px(e))&&e/zn(e)});Lx.invert=Ex(function(e){return e});function f3(){return l3(Lx).scale(79.4188).clipAngle(180-.001)}function k0(e,t){return[e,t]}k0.invert=k0;function T0(e,t,n){n=n||{};var r=n.units||"kilometers",i=n.steps||8;if(!e)throw new Error("geojson is required");if(typeof n!="object")throw new Error("options must be an object");if(typeof i!="number")throw new Error("steps must be an number");if(t===void 0)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(e.type){case"GeometryCollection":return Bp(e,function(u){var f=Vf(u,t,r,i);f&&o.push(f)}),Rg(o);case"FeatureCollection":return o0(e,function(u){var f=Vf(u,t,r,i);f&&o0(f,function(p){p&&o.push(p)})}),Rg(o)}return Vf(e,t,r,i)}function Vf(e,t,n,r){var i=e.properties||{},o=e.type==="Feature"?e.geometry:e;if(o.type==="GeometryCollection"){var u=[];return Bp(e,function(R){var O=Vf(R,t,n,r);O&&u.push(O)}),Rg(u)}var f=p3(o),p={type:o.type,coordinates:Sx(o.coordinates,f)},_=new Cm,y=_.read(p),C=zv(yS(t,n),"meters"),S=tr.bufferOp(y,C,r),k=new $v;if(S=k.write(S),!wx(S.coordinates)){var P={type:S.type,coordinates:Px(S.coordinates,f)};return _l(P,i)}}function wx(e){return Array.isArray(e[0])?wx(e[0]):isNaN(e[0])}function Sx(e,t){return typeof e[0]!="object"?t(e):e.map(function(n){return Sx(n,t)})}function Px(e,t){return typeof e[0]!="object"?t.invert(e):e.map(function(n){return Px(n,t)})}function p3(e){var t=ES(e).geometry.coordinates,n=[-t[0],-t[1]];return f3().rotate(n).scale(oi)}const d3={class:"drawing-tools"},g3={class:"mb-4"},m3={class:"grid grid-cols-2 gap-2"},_3=["onClick"],y3={class:"text-sm"},v3={key:0,class:"space-y-2"},x3={class:"bg-gray-50 p-2 rounded text-sm"},C3={class:"font-medium"},b3={key:0,class:"text-gray-600"},E3={class:"border rounded overflow-hidden"},L3={class:"p-3 space-y-3"},w3={class:"grid grid-cols-6 gap-2"},S3=["onClick"],P3={class:"space-y-2"},M3={class:"flex items-center gap-2"},I3={class:"flex items-center gap-2"},k3=["value"],T3={key:0,class:"flex items-center gap-2"},A3={class:"border rounded overflow-hidden"},D3={class:"p-3"},N3={class:"space-y-1 text-sm"},R3={key:0},O3={key:1},B3={key:2},F3={key:3},z3={key:4},G3={key:5},U3={key:6},V3=Wi({__name:"DrawingTools",props:{currentTool:{},selectedShape:{}},emits:["tool-change","style-update","properties-update","delete-shape"],setup(e,{emit:t}){const n=e,r=t,i=[{type:"Circle",label:"Cercle"},{type:"Semicircle",label:"Demi-cercle"},{type:"Rectangle",label:"Rectangle"},{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"Text",label:"Texte"},{type:"delete",label:"Supprimer"}],o=["#2563EB","#DC2626","#059669","#D97706","#7C3AED","#DB2777"],u=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointillé"},{value:"dashdot",label:"Tiret-point"}],f=de("#3B82F6"),p=de(.2),_=de("#2563EB"),y=de(1),C=de(2),S=de("solid"),k=de(0),P=de(0),R=en(()=>{var V,rt;return(rt=(V=n.selectedShape)==null?void 0:V.properties)!=null&&rt.type?["Circle","Rectangle","Polygon"].includes(n.selectedShape.properties.type):!1}),O=de(""),H=de(14),X=de("#FFFFFF"),U=de(1),ut=de("#000000"),It=de(1),ot=de({style:!1,properties:!1}),kt=V=>{ot.value[V]=!ot.value[V]};Ds(()=>n.selectedShape,V=>{var rt,ht,st,ft,Tt,Pt,jt,Ot,ee,ne,Jt,Mt,Ht,Kt,ie,Te,Z,Y,dt,Nt,Ft,Rt;if(console.log("=== DRAWING TOOLS SHAPE UPDATE START ==="),console.log("Raw shape object:",Ke(V)),console.log("Shape constructor:",(rt=V==null?void 0:V.constructor)==null?void 0:rt.name),V){if(!V.properties||!V.properties.type){console.warn("Invalid shape properties detected:",Ke(V.properties));const Yt=V instanceof ue.Circle?"Circle":V instanceof ue.Rectangle?"Rectangle":V instanceof ue.Polygon&&!(V instanceof ue.Polyline)?"Polygon":V instanceof ue.Polyline?"Line":"unknown";console.log("Detected shape type:",Yt);const Bt={type:Yt,style:{color:((ht=V.options)==null?void 0:ht.color)||"#3388ff",weight:((st=V.options)==null?void 0:st.weight)||3,opacity:((ft=V.options)==null?void 0:ft.opacity)||1,fillColor:((Tt=V.options)==null?void 0:Tt.fillColor)||"#3388ff",fillOpacity:((Pt=V.options)==null?void 0:Pt.fillOpacity)||.2,dashArray:((jt=V.options)==null?void 0:jt.dashArray)||""}};if(V instanceof ue.Circle){const Zt=V.getRadius(),oe=(((Ot=V.options)==null?void 0:Ot.weight)||3)*.5;Bt.radius=Zt,Yt==="Circle"?(Bt.surfaceInterieure=Math.PI*Math.pow(Zt-oe,2),Bt.surfaceExterieure=Math.PI*Math.pow(Zt+oe,2),Bt.area=(Bt.surfaceInterieure+Bt.surfaceExterieure)/2,Bt.perimeter=2*Math.PI*Zt):(Yt==="Semicircle"||V.constructor.name==="CircleArc")&&(Bt.surfaceInterieure=Math.PI*Math.pow(Zt-oe,2)/2,Bt.surfaceExterieure=Math.PI*Math.pow(Zt+oe,2)/2,Bt.area=(Bt.surfaceInterieure+Bt.surfaceExterieure)/2,Bt.perimeter=Math.PI*Zt+2*Zt)}else if(V instanceof ue.Rectangle){const Zt=V.getBounds(),Gt=Zt.getNorthEast(),oe=Zt.getSouthWest(),pe=(((ee=V.options)==null?void 0:ee.weight)||3)*.5,xe=sh([oe.lng,oe.lat],[Gt.lng,oe.lat],{units:"meters"}),Pe=sh([oe.lng,oe.lat],[oe.lng,Gt.lat],{units:"meters"});Bt.width=xe,Bt.height=Pe,Bt.surfaceInterieure=(xe-pe*2)*(Pe-pe*2),Bt.surfaceExterieure=(xe+pe*2)*(Pe+pe*2),Bt.area=(Bt.surfaceInterieure+Bt.surfaceExterieure)/2,Bt.perimeter=2*(xe+Pe)}else if(V instanceof ue.Polygon){const Gt=V.getLatLngs()[0].map(Xe=>[Xe.lng,Xe.lat]);Gt.push(Gt[0]);const oe=rp([Gt]),pe=(((ne=V.options)==null?void 0:ne.weight)||3)*.5,xe=T0(oe,-pe,{units:"meters"}),Pe=T0(oe,pe,{units:"meters"});Bt.surfaceInterieure=oh(xe),Bt.surfaceExterieure=oh(Pe),Bt.area=(Bt.surfaceInterieure+Bt.surfaceExterieure)/2,Bt.perimeter=yl(hu([...Gt]),{units:"meters"})}else if(V instanceof ue.Polyline&&!(V instanceof ue.Polygon)){const Gt=V.getLatLngs().map(te=>[te.lng,te.lat]),oe=hu(Gt);Bt.length=yl(oe,{units:"meters"})}console.log("Created base properties:",Bt),V.properties=Bt}console.log("Final shape properties:",Ke(V.properties)),f.value=((Jt=V.options)==null?void 0:Jt.fillColor)||"#3B82F6",p.value=((Mt=V.options)==null?void 0:Mt.fillOpacity)||.2,_.value=((Ht=V.options)==null?void 0:Ht.color)||"#2563EB",y.value=((Kt=V.options)==null?void 0:Kt.opacity)||1,C.value=((ie=V.options)==null?void 0:ie.weight)||2,S.value=it((Te=V.options)==null?void 0:Te.dashArray),k.value=V.properties.radius||0,P.value=V.properties.orientation||0,console.log("Updated UI controls:",{fillColor:f.value,fillOpacity:p.value,strokeColor:_.value,strokeOpacity:y.value,strokeWidth:C.value,strokeStyle:S.value,radius:k.value,startAngle:P.value}),V&&((Z=V.properties)==null?void 0:Z.type)==="text"&&(O.value=V.properties.text||"",H.value=((Y=V.properties.style)==null?void 0:Y.fontSize)||14,X.value=((dt=V.properties.style)==null?void 0:dt.backgroundColor)||"#FFFFFF",U.value=((Nt=V.properties.style)==null?void 0:Nt.backgroundOpacity)||1,ut.value=((Ft=V.properties.style)==null?void 0:Ft.borderColor)||"#000000",It.value=((Rt=V.properties.style)==null?void 0:Rt.borderOpacity)||1)}console.log("=== DRAWING TOOLS SHAPE UPDATE END ===")},{immediate:!0,deep:!0});const $=V=>{switch(V){case"dashed":return"10,10";case"dotted":return"2,5";case"dashdot":return"10,5,2,5";default:return""}},it=V=>{if(!V)return"solid";switch(V){case"10,10":return"dashed";case"2,5":return"dotted";case"10,5,2,5":return"dashdot";default:return"solid"}},xt=V=>{_.value=V,R.value&&(f.value=V),nt({strokeColor:V,fillColor:R.value?V:void 0})},nt=V=>{const rt={...V};V.strokeStyle&&(rt.dashArray=$(V.strokeStyle)),V.fillOpacity!==void 0&&(rt.fillOpacity=parseFloat(V.fillOpacity)),V.strokeOpacity!==void 0&&(rt.strokeOpacity=parseFloat(V.strokeOpacity)),V.strokeWidth!==void 0&&(rt.weight=parseInt(V.strokeWidth)),V.strokeColor&&(rt.color=V.strokeColor),r("style-update",rt)},Et={Circle:"Cercle",Rectangle:"Rectangle",Polygon:"Polygone",Line:"Ligne",Semicircle:"Demi-cercle",unknown:"Inconnu"},At=V=>V<1e4?`${V.toFixed(1)} m²`:`${(V/1e4).toFixed(2)} ha`,W=V=>V<1e3?`${V.toFixed(1)} m`:`${(V/1e3).toFixed(2)} km`;return(V,rt)=>(Wt(),Xt("div",d3,[T("div",g3,[T("div",m3,[(Wt(!0),Xt(kn,null,ci(i.filter(ht=>ht.type!=="delete"),ht=>(Wt(),Xt("button",{key:ht.type,class:As(["flex items-center justify-center p-2 rounded border",{"bg-blue-50 border-blue-200":V.currentTool===ht.type,"hover:bg-gray-50 border-gray-200":V.currentTool!==ht.type}]),onClick:st=>V.$emit("tool-change",ht.type)},[T("span",y3,ae(ht.label),1)],10,_3))),128))]),V.selectedShape?(Wt(),Xt("button",{key:0,class:As(["w-full mt-2 flex items-center justify-center p-2 rounded border border-red-500 bg-red-50 hover:bg-red-100 text-red-700 transition-colors duration-200",{"bg-red-100 border-red-600":V.currentTool==="delete"}]),onClick:rt[0]||(rt[0]=ht=>V.$emit("delete-shape"))},rt[13]||(rt[13]=[T("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[T("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),T("span",{class:"text-sm font-medium"},"Supprimer la forme",-1)]),2)):Me("",!0)]),V.selectedShape?(Wt(),Xt("div",v3,[T("div",x3,[T("div",C3,ae(Et[V.selectedShape.properties.type]||"Non défini"),1),V.selectedShape.properties.area?(Wt(),Xt("div",b3,ae(At(V.selectedShape.properties.area)),1)):Me("",!0)]),T("div",E3,[T("button",{class:"w-full px-3 py-2 flex justify-between items-center bg-gray-50 hover:bg-gray-100",onClick:rt[1]||(rt[1]=ht=>kt("style"))},[rt[15]||(rt[15]=T("span",{class:"font-medium"},"Style",-1)),(Wt(),Xt("svg",{class:As(["w-5 h-5 transform transition-transform",{"rotate-180":!ot.value.style}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},rt[14]||(rt[14]=[T("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),ln(T("div",L3,[T("div",w3,[(Wt(),Xt(kn,null,ci(o,ht=>T("button",{key:ht,class:"w-6 h-6 rounded-full border hover:scale-110 transition-transform",style:vp({backgroundColor:ht}),onClick:st=>xt(ht)},null,12,S3)),64))]),T("div",P3,[T("div",M3,[rt[16]||(rt[16]=T("span",{class:"text-xs text-gray-500"},"Contour",-1)),ln(T("input",{type:"color","onUpdate:modelValue":rt[2]||(rt[2]=ht=>_.value=ht),class:"w-6 h-6",onChange:rt[3]||(rt[3]=ht=>nt({strokeColor:_.value})),title:"Couleur du contour"},null,544),[[Hn,_.value]]),ln(T("input",{type:"range","onUpdate:modelValue":rt[4]||(rt[4]=ht=>C.value=ht),min:"1",max:"10",class:"flex-1",onChange:rt[5]||(rt[5]=ht=>nt({strokeWidth:C.value})),title:"Épaisseur du contour"},null,544),[[Hn,C.value]])]),T("div",I3,[rt[17]||(rt[17]=T("span",{class:"text-xs text-gray-500"},"Style",-1)),ln(T("select",{"onUpdate:modelValue":rt[6]||(rt[6]=ht=>S.value=ht),class:"flex-1 text-sm border rounded px-1 py-0.5",onChange:rt[7]||(rt[7]=ht=>nt({strokeStyle:S.value}))},[(Wt(),Xt(kn,null,ci(u,ht=>T("option",{key:ht.value,value:ht.value},ae(ht.label),9,k3)),64))],544),[[th,S.value]])]),R.value?(Wt(),Xt("div",T3,[rt[18]||(rt[18]=T("span",{class:"text-xs text-gray-500"},"Remplissage",-1)),ln(T("input",{type:"color","onUpdate:modelValue":rt[8]||(rt[8]=ht=>f.value=ht),class:"w-6 h-6",onChange:rt[9]||(rt[9]=ht=>nt({fillColor:f.value})),title:"Couleur de remplissage"},null,544),[[Hn,f.value]]),ln(T("input",{type:"range","onUpdate:modelValue":rt[10]||(rt[10]=ht=>p.value=ht),min:"0",max:"1",step:"0.1",class:"flex-1",onChange:rt[11]||(rt[11]=ht=>nt({fillOpacity:p.value})),title:"Opacité du remplissage"},null,544),[[Hn,p.value]])])):Me("",!0)])],512),[[o_,!ot.value.style]])]),T("div",A3,[T("button",{class:"w-full px-3 py-2 flex justify-between items-center bg-gray-50 hover:bg-gray-100",onClick:rt[12]||(rt[12]=ht=>kt("properties"))},[rt[20]||(rt[20]=T("span",{class:"font-medium"},"Propriétés",-1)),(Wt(),Xt("svg",{class:As(["w-5 h-5 transform transition-transform",{"rotate-180":!ot.value.properties}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},rt[19]||(rt[19]=[T("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),ln(T("div",D3,[T("div",N3,[V.selectedShape.properties.surfaceInterieure?(Wt(),Xt("div",R3," Surface intérieure: "+ae(At(V.selectedShape.properties.surfaceInterieure)),1)):Me("",!0),V.selectedShape.properties.surfaceExterieure?(Wt(),Xt("div",O3," Surface extérieure: "+ae(At(V.selectedShape.properties.surfaceExterieure)),1)):Me("",!0),V.selectedShape.properties.length?(Wt(),Xt("div",B3," Longueur: "+ae(W(V.selectedShape.properties.length)),1)):Me("",!0),V.selectedShape.properties.perimeter?(Wt(),Xt("div",F3," Périmètre: "+ae(W(V.selectedShape.properties.perimeter)),1)):Me("",!0),V.selectedShape.properties.radius?(Wt(),Xt("div",z3," Rayon: "+ae(W(V.selectedShape.properties.radius)),1)):Me("",!0),V.selectedShape.properties.width?(Wt(),Xt("div",G3," Largeur: "+ae(W(V.selectedShape.properties.width)),1)):Me("",!0),V.selectedShape.properties.height?(Wt(),Xt("div",U3," Hauteur: "+ae(W(V.selectedShape.properties.height)),1)):Me("",!0)])],512),[[o_,!ot.value.properties]])])])):Me("",!0)]))}}),j3=Bv(V3,[["__scopeId","data-v-69d4c052"]]);(()=>{var zm,Gm;var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,u=(a,l)=>()=>(l||a((l={exports:{}}).exports,l),l.exports),f=(a,l,h,d)=>{if(l&&typeof l=="object"||typeof l=="function")for(let m of r(l))!o.call(a,m)&&m!==h&&t(a,m,{get:()=>l[m],enumerable:!(d=n(l,m))||d.enumerable});return a},p=(a,l,h)=>(h=a!=null?e(i(a)):{},f(l||!a||!a.__esModule?t(h,"default",{value:a,enumerable:!0}):h,a)),_=u((a,l)=>{function h(){this.__data__=[],this.size=0}l.exports=h}),y=u((a,l)=>{function h(d,m){return d===m||d!==d&&m!==m}l.exports=h}),C=u((a,l)=>{var h=y();function d(m,x){for(var b=m.length;b--;)if(h(m[b][0],x))return b;return-1}l.exports=d}),S=u((a,l)=>{var h=C(),d=Array.prototype,m=d.splice;function x(b){var E=this.__data__,M=h(E,b);if(M<0)return!1;var A=E.length-1;return M==A?E.pop():m.call(E,M,1),--this.size,!0}l.exports=x}),k=u((a,l)=>{var h=C();function d(m){var x=this.__data__,b=h(x,m);return b<0?void 0:x[b][1]}l.exports=d}),P=u((a,l)=>{var h=C();function d(m){return h(this.__data__,m)>-1}l.exports=d}),R=u((a,l)=>{var h=C();function d(m,x){var b=this.__data__,E=h(b,m);return E<0?(++this.size,b.push([m,x])):b[E][1]=x,this}l.exports=d}),O=u((a,l)=>{var h=_(),d=S(),m=k(),x=P(),b=R();function E(M){var A=-1,K=M==null?0:M.length;for(this.clear();++A<K;){var j=M[A];this.set(j[0],j[1])}}E.prototype.clear=h,E.prototype.delete=d,E.prototype.get=m,E.prototype.has=x,E.prototype.set=b,l.exports=E}),H=u((a,l)=>{var h=O();function d(){this.__data__=new h,this.size=0}l.exports=d}),X=u((a,l)=>{function h(d){var m=this.__data__,x=m.delete(d);return this.size=m.size,x}l.exports=h}),U=u((a,l)=>{function h(d){return this.__data__.get(d)}l.exports=h}),ut=u((a,l)=>{function h(d){return this.__data__.has(d)}l.exports=h}),It=u((a,l)=>{var h=typeof Uo=="object"&&Uo&&Uo.Object===Object&&Uo;l.exports=h}),ot=u((a,l)=>{var h=It(),d=typeof self=="object"&&self&&self.Object===Object&&self,m=h||d||Function("return this")();l.exports=m}),kt=u((a,l)=>{var h=ot(),d=h.Symbol;l.exports=d}),$=u((a,l)=>{var h=kt(),d=Object.prototype,m=d.hasOwnProperty,x=d.toString,b=h?h.toStringTag:void 0;function E(M){var A=m.call(M,b),K=M[b];try{M[b]=void 0;var j=!0}catch{}var vt=x.call(M);return j&&(A?M[b]=K:delete M[b]),vt}l.exports=E}),it=u((a,l)=>{var h=Object.prototype,d=h.toString;function m(x){return d.call(x)}l.exports=m}),xt=u((a,l)=>{var h=kt(),d=$(),m=it(),x="[object Null]",b="[object Undefined]",E=h?h.toStringTag:void 0;function M(A){return A==null?A===void 0?b:x:E&&E in Object(A)?d(A):m(A)}l.exports=M}),nt=u((a,l)=>{function h(d){var m=typeof d;return d!=null&&(m=="object"||m=="function")}l.exports=h}),Et=u((a,l)=>{var h=xt(),d=nt(),m="[object AsyncFunction]",x="[object Function]",b="[object GeneratorFunction]",E="[object Proxy]";function M(A){if(!d(A))return!1;var K=h(A);return K==x||K==b||K==m||K==E}l.exports=M}),At=u((a,l)=>{var h=ot(),d=h["__core-js_shared__"];l.exports=d}),W=u((a,l)=>{var h=At(),d=function(){var x=/[^.]+$/.exec(h&&h.keys&&h.keys.IE_PROTO||"");return x?"Symbol(src)_1."+x:""}();function m(x){return!!d&&d in x}l.exports=m}),V=u((a,l)=>{var h=Function.prototype,d=h.toString;function m(x){if(x!=null){try{return d.call(x)}catch{}try{return x+""}catch{}}return""}l.exports=m}),rt=u((a,l)=>{var h=Et(),d=W(),m=nt(),x=V(),b=/[\\^$.*+?()[\]{}|]/g,E=/^\[object .+?Constructor\]$/,M=Function.prototype,A=Object.prototype,K=M.toString,j=A.hasOwnProperty,vt=RegExp("^"+K.call(j).replace(b,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function bt(Vt){if(!m(Vt)||d(Vt))return!1;var re=h(Vt)?vt:E;return re.test(x(Vt))}l.exports=bt}),ht=u((a,l)=>{function h(d,m){return d==null?void 0:d[m]}l.exports=h}),st=u((a,l)=>{var h=rt(),d=ht();function m(x,b){var E=d(x,b);return h(E)?E:void 0}l.exports=m}),ft=u((a,l)=>{var h=st(),d=ot(),m=h(d,"Map");l.exports=m}),Tt=u((a,l)=>{var h=st(),d=h(Object,"create");l.exports=d}),Pt=u((a,l)=>{var h=Tt();function d(){this.__data__=h?h(null):{},this.size=0}l.exports=d}),jt=u((a,l)=>{function h(d){var m=this.has(d)&&delete this.__data__[d];return this.size-=m?1:0,m}l.exports=h}),Ot=u((a,l)=>{var h=Tt(),d="__lodash_hash_undefined__",m=Object.prototype,x=m.hasOwnProperty;function b(E){var M=this.__data__;if(h){var A=M[E];return A===d?void 0:A}return x.call(M,E)?M[E]:void 0}l.exports=b}),ee=u((a,l)=>{var h=Tt(),d=Object.prototype,m=d.hasOwnProperty;function x(b){var E=this.__data__;return h?E[b]!==void 0:m.call(E,b)}l.exports=x}),ne=u((a,l)=>{var h=Tt(),d="__lodash_hash_undefined__";function m(x,b){var E=this.__data__;return this.size+=this.has(x)?0:1,E[x]=h&&b===void 0?d:b,this}l.exports=m}),Jt=u((a,l)=>{var h=Pt(),d=jt(),m=Ot(),x=ee(),b=ne();function E(M){var A=-1,K=M==null?0:M.length;for(this.clear();++A<K;){var j=M[A];this.set(j[0],j[1])}}E.prototype.clear=h,E.prototype.delete=d,E.prototype.get=m,E.prototype.has=x,E.prototype.set=b,l.exports=E}),Mt=u((a,l)=>{var h=Jt(),d=O(),m=ft();function x(){this.size=0,this.__data__={hash:new h,map:new(m||d),string:new h}}l.exports=x}),Ht=u((a,l)=>{function h(d){var m=typeof d;return m=="string"||m=="number"||m=="symbol"||m=="boolean"?d!=="__proto__":d===null}l.exports=h}),Kt=u((a,l)=>{var h=Ht();function d(m,x){var b=m.__data__;return h(x)?b[typeof x=="string"?"string":"hash"]:b.map}l.exports=d}),ie=u((a,l)=>{var h=Kt();function d(m){var x=h(this,m).delete(m);return this.size-=x?1:0,x}l.exports=d}),Te=u((a,l)=>{var h=Kt();function d(m){return h(this,m).get(m)}l.exports=d}),Z=u((a,l)=>{var h=Kt();function d(m){return h(this,m).has(m)}l.exports=d}),Y=u((a,l)=>{var h=Kt();function d(m,x){var b=h(this,m),E=b.size;return b.set(m,x),this.size+=b.size==E?0:1,this}l.exports=d}),dt=u((a,l)=>{var h=Mt(),d=ie(),m=Te(),x=Z(),b=Y();function E(M){var A=-1,K=M==null?0:M.length;for(this.clear();++A<K;){var j=M[A];this.set(j[0],j[1])}}E.prototype.clear=h,E.prototype.delete=d,E.prototype.get=m,E.prototype.has=x,E.prototype.set=b,l.exports=E}),Nt=u((a,l)=>{var h=O(),d=ft(),m=dt(),x=200;function b(E,M){var A=this.__data__;if(A instanceof h){var K=A.__data__;if(!d||K.length<x-1)return K.push([E,M]),this.size=++A.size,this;A=this.__data__=new m(K)}return A.set(E,M),this.size=A.size,this}l.exports=b}),Ft=u((a,l)=>{var h=O(),d=H(),m=X(),x=U(),b=ut(),E=Nt();function M(A){var K=this.__data__=new h(A);this.size=K.size}M.prototype.clear=d,M.prototype.delete=m,M.prototype.get=x,M.prototype.has=b,M.prototype.set=E,l.exports=M}),Rt=u((a,l)=>{var h=st(),d=function(){try{var m=h(Object,"defineProperty");return m({},"",{}),m}catch{}}();l.exports=d}),Yt=u((a,l)=>{var h=Rt();function d(m,x,b){x=="__proto__"&&h?h(m,x,{configurable:!0,enumerable:!0,value:b,writable:!0}):m[x]=b}l.exports=d}),Bt=u((a,l)=>{var h=Yt(),d=y();function m(x,b,E){(E!==void 0&&!d(x[b],E)||E===void 0&&!(b in x))&&h(x,b,E)}l.exports=m}),Zt=u((a,l)=>{function h(d){return function(m,x,b){for(var E=-1,M=Object(m),A=b(m),K=A.length;K--;){var j=A[d?K:++E];if(x(M[j],j,M)===!1)break}return m}}l.exports=h}),Gt=u((a,l)=>{var h=Zt(),d=h();l.exports=d}),oe=u((a,l)=>{var h=ot(),d=typeof a=="object"&&a&&!a.nodeType&&a,m=d&&typeof l=="object"&&l&&!l.nodeType&&l,x=m&&m.exports===d,b=x?h.Buffer:void 0,E=b?b.allocUnsafe:void 0;function M(A,K){if(K)return A.slice();var j=A.length,vt=E?E(j):new A.constructor(j);return A.copy(vt),vt}l.exports=M}),te=u((a,l)=>{var h=ot(),d=h.Uint8Array;l.exports=d}),pe=u((a,l)=>{var h=te();function d(m){var x=new m.constructor(m.byteLength);return new h(x).set(new h(m)),x}l.exports=d}),xe=u((a,l)=>{var h=pe();function d(m,x){var b=x?h(m.buffer):m.buffer;return new m.constructor(b,m.byteOffset,m.length)}l.exports=d}),Pe=u((a,l)=>{function h(d,m){var x=-1,b=d.length;for(m||(m=Array(b));++x<b;)m[x]=d[x];return m}l.exports=h}),Xe=u((a,l)=>{var h=nt(),d=Object.create,m=function(){function x(){}return function(b){if(!h(b))return{};if(d)return d(b);x.prototype=b;var E=new x;return x.prototype=void 0,E}}();l.exports=m}),Ye=u((a,l)=>{function h(d,m){return function(x){return d(m(x))}}l.exports=h}),mr=u((a,l)=>{var h=Ye(),d=h(Object.getPrototypeOf,Object);l.exports=d}),Yn=u((a,l)=>{var h=Object.prototype;function d(m){var x=m&&m.constructor,b=typeof x=="function"&&x.prototype||h;return m===b}l.exports=d}),Qr=u((a,l)=>{var h=Xe(),d=mr(),m=Yn();function x(b){return typeof b.constructor=="function"&&!m(b)?h(d(b)):{}}l.exports=x}),ar=u((a,l)=>{function h(d){return d!=null&&typeof d=="object"}l.exports=h}),$s=u((a,l)=>{var h=xt(),d=ar(),m="[object Arguments]";function x(b){return d(b)&&h(b)==m}l.exports=x}),wo=u((a,l)=>{var h=$s(),d=ar(),m=Object.prototype,x=m.hasOwnProperty,b=m.propertyIsEnumerable,E=h(function(){return arguments}())?h:function(M){return d(M)&&x.call(M,"callee")&&!b.call(M,"callee")};l.exports=E}),Vn=u((a,l)=>{var h=Array.isArray;l.exports=h}),ti=u((a,l)=>{var h=9007199254740991;function d(m){return typeof m=="number"&&m>-1&&m%1==0&&m<=h}l.exports=d}),Xi=u((a,l)=>{var h=Et(),d=ti();function m(x){return x!=null&&d(x.length)&&!h(x)}l.exports=m}),Xp=u((a,l)=>{var h=Xi(),d=ar();function m(x){return d(x)&&h(x)}l.exports=m}),Yp=u((a,l)=>{function h(){return!1}l.exports=h}),$l=u((a,l)=>{var h=ot(),d=Yp(),m=typeof a=="object"&&a&&!a.nodeType&&a,x=m&&typeof l=="object"&&l&&!l.nodeType&&l,b=x&&x.exports===m,E=b?h.Buffer:void 0,M=E?E.isBuffer:void 0,A=M||d;l.exports=A}),Rh=u((a,l)=>{var h=xt(),d=mr(),m=ar(),x="[object Object]",b=Function.prototype,E=Object.prototype,M=b.toString,A=E.hasOwnProperty,K=M.call(Object);function j(vt){if(!m(vt)||h(vt)!=x)return!1;var bt=d(vt);if(bt===null)return!0;var Vt=A.call(bt,"constructor")&&bt.constructor;return typeof Vt=="function"&&Vt instanceof Vt&&M.call(Vt)==K}l.exports=j}),Oh=u((a,l)=>{var h=xt(),d=ti(),m=ar(),x="[object Arguments]",b="[object Array]",E="[object Boolean]",M="[object Date]",A="[object Error]",K="[object Function]",j="[object Map]",vt="[object Number]",bt="[object Object]",Vt="[object RegExp]",re="[object Set]",ce="[object String]",We="[object WeakMap]",q="[object ArrayBuffer]",Q="[object DataView]",lt="[object Float32Array]",Lt="[object Float64Array]",pt="[object Int8Array]",Ct="[object Int16Array]",I="[object Int32Array]",N="[object Uint8Array]",F="[object Uint8ClampedArray]",B="[object Uint16Array]",z="[object Uint32Array]",G={};G[lt]=G[Lt]=G[pt]=G[Ct]=G[I]=G[N]=G[F]=G[B]=G[z]=!0,G[x]=G[b]=G[q]=G[E]=G[Q]=G[M]=G[A]=G[K]=G[j]=G[vt]=G[bt]=G[Vt]=G[re]=G[ce]=G[We]=!1;function et(tt){return m(tt)&&d(tt.length)&&!!G[h(tt)]}l.exports=et}),Jp=u((a,l)=>{function h(d){return function(m){return d(m)}}l.exports=h}),Qp=u((a,l)=>{var h=It(),d=typeof a=="object"&&a&&!a.nodeType&&a,m=d&&typeof l=="object"&&l&&!l.nodeType&&l,x=m&&m.exports===d,b=x&&h.process,E=function(){try{var M=m&&m.require&&m.require("util").types;return M||b&&b.binding&&b.binding("util")}catch{}}();l.exports=E}),Bh=u((a,l)=>{var h=Oh(),d=Jp(),m=Qp(),x=m&&m.isTypedArray,b=x?d(x):h;l.exports=b}),Fh=u((a,l)=>{function h(d,m){if(!(m==="constructor"&&typeof d[m]=="function")&&m!="__proto__")return d[m]}l.exports=h}),td=u((a,l)=>{var h=Yt(),d=y(),m=Object.prototype,x=m.hasOwnProperty;function b(E,M,A){var K=E[M];(!(x.call(E,M)&&d(K,A))||A===void 0&&!(M in E))&&h(E,M,A)}l.exports=b}),ed=u((a,l)=>{var h=td(),d=Yt();function m(x,b,E,M){var A=!E;E||(E={});for(var K=-1,j=b.length;++K<j;){var vt=b[K],bt=M?M(E[vt],x[vt],vt,E,x):void 0;bt===void 0&&(bt=x[vt]),A?d(E,vt,bt):h(E,vt,bt)}return E}l.exports=m}),Xl=u((a,l)=>{function h(d,m){for(var x=-1,b=Array(d);++x<d;)b[x]=m(x);return b}l.exports=h}),zh=u((a,l)=>{var h=9007199254740991,d=/^(?:0|[1-9]\d*)$/;function m(x,b){var E=typeof x;return b=b??h,!!b&&(E=="number"||E!="symbol"&&d.test(x))&&x>-1&&x%1==0&&x<b}l.exports=m}),nd=u((a,l)=>{var h=Xl(),d=wo(),m=Vn(),x=$l(),b=zh(),E=Bh(),M=Object.prototype,A=M.hasOwnProperty;function K(j,vt){var bt=m(j),Vt=!bt&&d(j),re=!bt&&!Vt&&x(j),ce=!bt&&!Vt&&!re&&E(j),We=bt||Vt||re||ce,q=We?h(j.length,String):[],Q=q.length;for(var lt in j)(vt||A.call(j,lt))&&!(We&&(lt=="length"||re&&(lt=="offset"||lt=="parent")||ce&&(lt=="buffer"||lt=="byteLength"||lt=="byteOffset")||b(lt,Q)))&&q.push(lt);return q}l.exports=K}),rd=u((a,l)=>{function h(d){var m=[];if(d!=null)for(var x in Object(d))m.push(x);return m}l.exports=h}),id=u((a,l)=>{var h=nt(),d=Yn(),m=rd(),x=Object.prototype,b=x.hasOwnProperty;function E(M){if(!h(M))return m(M);var A=d(M),K=[];for(var j in M)j=="constructor"&&(A||!b.call(M,j))||K.push(j);return K}l.exports=E}),Ti=u((a,l)=>{var h=nd(),d=id(),m=Xi();function x(b){return m(b)?h(b,!0):d(b)}l.exports=x}),_e=u((a,l)=>{var h=ed(),d=Ti();function m(x){return h(x,d(x))}l.exports=m}),Gh=u((a,l)=>{var h=Bt(),d=oe(),m=xe(),x=Pe(),b=Qr(),E=wo(),M=Vn(),A=Xp(),K=$l(),j=Et(),vt=nt(),bt=Rh(),Vt=Bh(),re=Fh(),ce=_e();function We(q,Q,lt,Lt,pt,Ct,I){var N=re(q,lt),F=re(Q,lt),B=I.get(F);if(B){h(q,lt,B);return}var z=Ct?Ct(N,F,lt+"",q,Q,I):void 0,G=z===void 0;if(G){var et=M(F),tt=!et&&K(F),at=!et&&!tt&&Vt(F);z=F,et||tt||at?M(N)?z=N:A(N)?z=x(N):tt?(G=!1,z=d(F,!0)):at?(G=!1,z=m(F,!0)):z=[]:bt(F)||E(F)?(z=N,E(N)?z=ce(N):(!vt(N)||j(N))&&(z=b(F))):G=!1}G&&(I.set(F,z),pt(z,F,Lt,Ct,I),I.delete(F)),h(q,lt,z)}l.exports=We}),Uh=u((a,l)=>{var h=Ft(),d=Bt(),m=Gt(),x=Gh(),b=nt(),E=Ti(),M=Fh();function A(K,j,vt,bt,Vt){K!==j&&m(j,function(re,ce){if(Vt||(Vt=new h),b(re))x(K,j,ce,vt,A,bt,Vt);else{var We=bt?bt(M(K,ce),re,ce+"",K,j,Vt):void 0;We===void 0&&(We=re),d(K,ce,We)}},E)}l.exports=A}),Yl=u((a,l)=>{function h(d){return d}l.exports=h}),Vh=u((a,l)=>{function h(d,m,x){switch(x.length){case 0:return d.call(m);case 1:return d.call(m,x[0]);case 2:return d.call(m,x[0],x[1]);case 3:return d.call(m,x[0],x[1],x[2])}return d.apply(m,x)}l.exports=h}),Jl=u((a,l)=>{var h=Vh(),d=Math.max;function m(x,b,E){return b=d(b===void 0?x.length-1:b,0),function(){for(var M=arguments,A=-1,K=d(M.length-b,0),j=Array(K);++A<K;)j[A]=M[b+A];A=-1;for(var vt=Array(b+1);++A<b;)vt[A]=M[A];return vt[b]=E(j),h(x,this,vt)}}l.exports=m}),jh=u((a,l)=>{function h(d){return function(){return d}}l.exports=h}),ra=u((a,l)=>{var h=jh(),d=Rt(),m=Yl(),x=d?function(b,E){return d(b,"toString",{configurable:!0,enumerable:!1,value:h(E),writable:!0})}:m;l.exports=x}),qh=u((a,l)=>{var h=800,d=16,m=Date.now;function x(b){var E=0,M=0;return function(){var A=m(),K=d-(A-M);if(M=A,K>0){if(++E>=h)return arguments[0]}else E=0;return b.apply(void 0,arguments)}}l.exports=x}),sd=u((a,l)=>{var h=ra(),d=qh(),m=d(h);l.exports=m}),od=u((a,l)=>{var h=Yl(),d=Jl(),m=sd();function x(b,E){return m(d(b,E,h),b+"")}l.exports=x}),ad=u((a,l)=>{var h=y(),d=Xi(),m=zh(),x=nt();function b(E,M,A){if(!x(A))return!1;var K=typeof M;return(K=="number"?d(A)&&m(M,A.length):K=="string"&&M in A)?h(A[M],E):!1}l.exports=b}),ud=u((a,l)=>{var h=od(),d=ad();function m(x){return h(function(b,E){var M=-1,A=E.length,K=A>1?E[A-1]:void 0,j=A>2?E[2]:void 0;for(K=x.length>3&&typeof K=="function"?(A--,K):void 0,j&&d(E[0],E[1],j)&&(K=A<3?void 0:K,A=1),b=Object(b);++M<A;){var vt=E[M];vt&&x(b,vt,M,K)}return b})}l.exports=m}),Tu=u((a,l)=>{var h=Uh(),d=ud(),m=d(function(x,b,E){h(x,b,E)});l.exports=m}),Ql=u((a,l)=>{var h=xt(),d=ar(),m="[object Symbol]";function x(b){return typeof b=="symbol"||d(b)&&h(b)==m}l.exports=x}),Au=u((a,l)=>{var h=Vn(),d=Ql(),m=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,x=/^\w*$/;function b(E,M){if(h(E))return!1;var A=typeof E;return A=="number"||A=="symbol"||A=="boolean"||E==null||d(E)?!0:x.test(E)||!m.test(E)||M!=null&&E in Object(M)}l.exports=b}),ld=u((a,l)=>{var h=dt(),d="Expected a function";function m(x,b){if(typeof x!="function"||b!=null&&typeof b!="function")throw new TypeError(d);var E=function(){var M=arguments,A=b?b.apply(this,M):M[0],K=E.cache;if(K.has(A))return K.get(A);var j=x.apply(this,M);return E.cache=K.set(A,j)||K,j};return E.cache=new(m.Cache||h),E}m.Cache=h,l.exports=m}),cd=u((a,l)=>{var h=ld(),d=500;function m(x){var b=h(x,function(M){return E.size===d&&E.clear(),M}),E=b.cache;return b}l.exports=m}),hd=u((a,l)=>{var h=cd(),d=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,m=/\\(\\)?/g,x=h(function(b){var E=[];return b.charCodeAt(0)===46&&E.push(""),b.replace(d,function(M,A,K,j){E.push(K?j.replace(m,"$1"):A||M)}),E});l.exports=x}),fd=u((a,l)=>{function h(d,m){for(var x=-1,b=d==null?0:d.length,E=Array(b);++x<b;)E[x]=m(d[x],x,d);return E}l.exports=h}),pd=u((a,l)=>{var h=kt(),d=fd(),m=Vn(),x=Ql(),b=h?h.prototype:void 0,E=b?b.toString:void 0;function M(A){if(typeof A=="string")return A;if(m(A))return d(A,M)+"";if(x(A))return E?E.call(A):"";var K=A+"";return K=="0"&&1/A==-1/0?"-0":K}l.exports=M}),tc=u((a,l)=>{var h=pd();function d(m){return m==null?"":h(m)}l.exports=d}),Ga=u((a,l)=>{var h=Vn(),d=Au(),m=hd(),x=tc();function b(E,M){return h(E)?E:d(E,M)?[E]:m(x(E))}l.exports=b}),Hh=u((a,l)=>{var h=Ql();function d(m){if(typeof m=="string"||h(m))return m;var x=m+"";return x=="0"&&1/m==-1/0?"-0":x}l.exports=d}),Zh=u((a,l)=>{var h=Ga(),d=Hh();function m(x,b){b=h(b,x);for(var E=0,M=b.length;x!=null&&E<M;)x=x[d(b[E++])];return E&&E==M?x:void 0}l.exports=m}),Xs=u((a,l)=>{var h=Zh();function d(m,x,b){var E=m==null?void 0:h(m,x);return E===void 0?b:E}l.exports=d}),Je=u((a,l)=>{(function(h,d){typeof a=="object"&&typeof l<"u"?l.exports=d():(h=h||self).RBush=d()})(a,function(){function h(q,Q,lt,Lt,pt){(function Ct(I,N,F,B,z){for(;B>F;){if(B-F>600){var G=B-F+1,et=N-F+1,tt=Math.log(G),at=.5*Math.exp(2*tt/3),_t=.5*Math.sqrt(tt*at*(G-at)/G)*(et-G/2<0?-1:1),mt=Math.max(F,Math.floor(N-et*at/G+_t)),zt=Math.min(B,Math.floor(N+(G-et)*at/G+_t));Ct(I,N,mt,zt,z)}var le=I[N],ge=F,Ce=B;for(d(I,F,N),z(I[B],le)>0&&d(I,F,B);ge<Ce;){for(d(I,ge,Ce),ge++,Ce--;z(I[ge],le)<0;)ge++;for(;z(I[Ce],le)>0;)Ce--}z(I[F],le)===0?d(I,F,Ce):d(I,++Ce,B),Ce<=N&&(F=Ce+1),N<=Ce&&(B=Ce-1)}})(q,Q,lt||0,Lt||q.length-1,pt||m)}function d(q,Q,lt){var Lt=q[Q];q[Q]=q[lt],q[lt]=Lt}function m(q,Q){return q<Q?-1:q>Q?1:0}var x=function(q){q===void 0&&(q=9),this._maxEntries=Math.max(4,q),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function b(q,Q,lt){if(!lt)return Q.indexOf(q);for(var Lt=0;Lt<Q.length;Lt++)if(lt(q,Q[Lt]))return Lt;return-1}function E(q,Q){M(q,0,q.children.length,Q,q)}function M(q,Q,lt,Lt,pt){pt||(pt=ce(null)),pt.minX=1/0,pt.minY=1/0,pt.maxX=-1/0,pt.maxY=-1/0;for(var Ct=Q;Ct<lt;Ct++){var I=q.children[Ct];A(pt,q.leaf?Lt(I):I)}return pt}function A(q,Q){return q.minX=Math.min(q.minX,Q.minX),q.minY=Math.min(q.minY,Q.minY),q.maxX=Math.max(q.maxX,Q.maxX),q.maxY=Math.max(q.maxY,Q.maxY),q}function K(q,Q){return q.minX-Q.minX}function j(q,Q){return q.minY-Q.minY}function vt(q){return(q.maxX-q.minX)*(q.maxY-q.minY)}function bt(q){return q.maxX-q.minX+(q.maxY-q.minY)}function Vt(q,Q){return q.minX<=Q.minX&&q.minY<=Q.minY&&Q.maxX<=q.maxX&&Q.maxY<=q.maxY}function re(q,Q){return Q.minX<=q.maxX&&Q.minY<=q.maxY&&Q.maxX>=q.minX&&Q.maxY>=q.minY}function ce(q){return{children:q,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function We(q,Q,lt,Lt,pt){for(var Ct=[Q,lt];Ct.length;)if(!((lt=Ct.pop())-(Q=Ct.pop())<=Lt)){var I=Q+Math.ceil((lt-Q)/Lt/2)*Lt;h(q,I,Q,lt,pt),Ct.push(Q,I,I,lt)}}return x.prototype.all=function(){return this._all(this.data,[])},x.prototype.search=function(q){var Q=this.data,lt=[];if(!re(q,Q))return lt;for(var Lt=this.toBBox,pt=[];Q;){for(var Ct=0;Ct<Q.children.length;Ct++){var I=Q.children[Ct],N=Q.leaf?Lt(I):I;re(q,N)&&(Q.leaf?lt.push(I):Vt(q,N)?this._all(I,lt):pt.push(I))}Q=pt.pop()}return lt},x.prototype.collides=function(q){var Q=this.data;if(!re(q,Q))return!1;for(var lt=[];Q;){for(var Lt=0;Lt<Q.children.length;Lt++){var pt=Q.children[Lt],Ct=Q.leaf?this.toBBox(pt):pt;if(re(q,Ct)){if(Q.leaf||Vt(q,Ct))return!0;lt.push(pt)}}Q=lt.pop()}return!1},x.prototype.load=function(q){if(!q||!q.length)return this;if(q.length<this._minEntries){for(var Q=0;Q<q.length;Q++)this.insert(q[Q]);return this}var lt=this._build(q.slice(),0,q.length-1,0);if(this.data.children.length)if(this.data.height===lt.height)this._splitRoot(this.data,lt);else{if(this.data.height<lt.height){var Lt=this.data;this.data=lt,lt=Lt}this._insert(lt,this.data.height-lt.height-1,!0)}else this.data=lt;return this},x.prototype.insert=function(q){return q&&this._insert(q,this.data.height-1),this},x.prototype.clear=function(){return this.data=ce([]),this},x.prototype.remove=function(q,Q){if(!q)return this;for(var lt,Lt,pt,Ct=this.data,I=this.toBBox(q),N=[],F=[];Ct||N.length;){if(Ct||(Ct=N.pop(),Lt=N[N.length-1],lt=F.pop(),pt=!0),Ct.leaf){var B=b(q,Ct.children,Q);if(B!==-1)return Ct.children.splice(B,1),N.push(Ct),this._condense(N),this}pt||Ct.leaf||!Vt(Ct,I)?Lt?(lt++,Ct=Lt.children[lt],pt=!1):Ct=null:(N.push(Ct),F.push(lt),lt=0,Lt=Ct,Ct=Ct.children[0])}return this},x.prototype.toBBox=function(q){return q},x.prototype.compareMinX=function(q,Q){return q.minX-Q.minX},x.prototype.compareMinY=function(q,Q){return q.minY-Q.minY},x.prototype.toJSON=function(){return this.data},x.prototype.fromJSON=function(q){return this.data=q,this},x.prototype._all=function(q,Q){for(var lt=[];q;)q.leaf?Q.push.apply(Q,q.children):lt.push.apply(lt,q.children),q=lt.pop();return Q},x.prototype._build=function(q,Q,lt,Lt){var pt,Ct=lt-Q+1,I=this._maxEntries;if(Ct<=I)return E(pt=ce(q.slice(Q,lt+1)),this.toBBox),pt;Lt||(Lt=Math.ceil(Math.log(Ct)/Math.log(I)),I=Math.ceil(Ct/Math.pow(I,Lt-1))),(pt=ce([])).leaf=!1,pt.height=Lt;var N=Math.ceil(Ct/I),F=N*Math.ceil(Math.sqrt(I));We(q,Q,lt,F,this.compareMinX);for(var B=Q;B<=lt;B+=F){var z=Math.min(B+F-1,lt);We(q,B,z,N,this.compareMinY);for(var G=B;G<=z;G+=N){var et=Math.min(G+N-1,z);pt.children.push(this._build(q,G,et,Lt-1))}}return E(pt,this.toBBox),pt},x.prototype._chooseSubtree=function(q,Q,lt,Lt){for(;Lt.push(Q),!Q.leaf&&Lt.length-1!==lt;){for(var pt=1/0,Ct=1/0,I=void 0,N=0;N<Q.children.length;N++){var F=Q.children[N],B=vt(F),z=(G=q,et=F,(Math.max(et.maxX,G.maxX)-Math.min(et.minX,G.minX))*(Math.max(et.maxY,G.maxY)-Math.min(et.minY,G.minY))-B);z<Ct?(Ct=z,pt=B<pt?B:pt,I=F):z===Ct&&B<pt&&(pt=B,I=F)}Q=I||Q.children[0]}var G,et;return Q},x.prototype._insert=function(q,Q,lt){var Lt=lt?q:this.toBBox(q),pt=[],Ct=this._chooseSubtree(Lt,this.data,Q,pt);for(Ct.children.push(q),A(Ct,Lt);Q>=0&&pt[Q].children.length>this._maxEntries;)this._split(pt,Q),Q--;this._adjustParentBBoxes(Lt,pt,Q)},x.prototype._split=function(q,Q){var lt=q[Q],Lt=lt.children.length,pt=this._minEntries;this._chooseSplitAxis(lt,pt,Lt);var Ct=this._chooseSplitIndex(lt,pt,Lt),I=ce(lt.children.splice(Ct,lt.children.length-Ct));I.height=lt.height,I.leaf=lt.leaf,E(lt,this.toBBox),E(I,this.toBBox),Q?q[Q-1].children.push(I):this._splitRoot(lt,I)},x.prototype._splitRoot=function(q,Q){this.data=ce([q,Q]),this.data.height=q.height+1,this.data.leaf=!1,E(this.data,this.toBBox)},x.prototype._chooseSplitIndex=function(q,Q,lt){for(var Lt,pt,Ct,I,N,F,B,z=1/0,G=1/0,et=Q;et<=lt-Q;et++){var tt=M(q,0,et,this.toBBox),at=M(q,et,lt,this.toBBox),_t=(pt=tt,Ct=at,I=void 0,N=void 0,F=void 0,B=void 0,I=Math.max(pt.minX,Ct.minX),N=Math.max(pt.minY,Ct.minY),F=Math.min(pt.maxX,Ct.maxX),B=Math.min(pt.maxY,Ct.maxY),Math.max(0,F-I)*Math.max(0,B-N)),mt=vt(tt)+vt(at);_t<z?(z=_t,Lt=et,G=mt<G?mt:G):_t===z&&mt<G&&(G=mt,Lt=et)}return Lt||lt-Q},x.prototype._chooseSplitAxis=function(q,Q,lt){var Lt=q.leaf?this.compareMinX:K,pt=q.leaf?this.compareMinY:j;this._allDistMargin(q,Q,lt,Lt)<this._allDistMargin(q,Q,lt,pt)&&q.children.sort(Lt)},x.prototype._allDistMargin=function(q,Q,lt,Lt){q.children.sort(Lt);for(var pt=this.toBBox,Ct=M(q,0,Q,pt),I=M(q,lt-Q,lt,pt),N=bt(Ct)+bt(I),F=Q;F<lt-Q;F++){var B=q.children[F];A(Ct,q.leaf?pt(B):B),N+=bt(Ct)}for(var z=lt-Q-1;z>=Q;z--){var G=q.children[z];A(I,q.leaf?pt(G):G),N+=bt(I)}return N},x.prototype._adjustParentBBoxes=function(q,Q,lt){for(var Lt=lt;Lt>=0;Lt--)A(Q[Lt],q)},x.prototype._condense=function(q){for(var Q=q.length-1,lt=void 0;Q>=0;Q--)q[Q].children.length===0?Q>0?(lt=q[Q-1].children).splice(lt.indexOf(q[Q]),1):this.clear():E(q[Q],this.toBBox)},x})}),yn=u(a=>{Object.defineProperty(a,"__esModule",{value:!0}),a.earthRadius=63710088e-1,a.factors={centimeters:a.earthRadius*100,centimetres:a.earthRadius*100,degrees:a.earthRadius/111325,feet:a.earthRadius*3.28084,inches:a.earthRadius*39.37,kilometers:a.earthRadius/1e3,kilometres:a.earthRadius/1e3,meters:a.earthRadius,metres:a.earthRadius,miles:a.earthRadius/1609.344,millimeters:a.earthRadius*1e3,millimetres:a.earthRadius*1e3,nauticalmiles:a.earthRadius/1852,radians:1,yards:a.earthRadius*1.0936},a.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/a.earthRadius,yards:1.0936133},a.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function l(B,z,G){G===void 0&&(G={});var et={type:"Feature"};return(G.id===0||G.id)&&(et.id=G.id),G.bbox&&(et.bbox=G.bbox),et.properties=z||{},et.geometry=B,et}a.feature=l;function h(B,z,G){switch(B){case"Point":return d(z).geometry;case"LineString":return E(z).geometry;case"Polygon":return x(z).geometry;case"MultiPoint":return j(z).geometry;case"MultiLineString":return K(z).geometry;case"MultiPolygon":return vt(z).geometry;default:throw new Error(B+" is invalid")}}a.geometry=h;function d(B,z,G){if(G===void 0&&(G={}),!B)throw new Error("coordinates is required");if(!Array.isArray(B))throw new Error("coordinates must be an Array");if(B.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Ct(B[0])||!Ct(B[1]))throw new Error("coordinates must contain numbers");var et={type:"Point",coordinates:B};return l(et,z,G)}a.point=d;function m(B,z,G){return G===void 0&&(G={}),A(B.map(function(et){return d(et,z)}),G)}a.points=m;function x(B,z,G){G===void 0&&(G={});for(var et=0,tt=B;et<tt.length;et++){var at=tt[et];if(at.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var _t=0;_t<at[at.length-1].length;_t++)if(at[at.length-1][_t]!==at[0][_t])throw new Error("First and last Position are not equivalent.")}var mt={type:"Polygon",coordinates:B};return l(mt,z,G)}a.polygon=x;function b(B,z,G){return G===void 0&&(G={}),A(B.map(function(et){return x(et,z)}),G)}a.polygons=b;function E(B,z,G){if(G===void 0&&(G={}),B.length<2)throw new Error("coordinates must be an array of two or more positions");var et={type:"LineString",coordinates:B};return l(et,z,G)}a.lineString=E;function M(B,z,G){return G===void 0&&(G={}),A(B.map(function(et){return E(et,z)}),G)}a.lineStrings=M;function A(B,z){z===void 0&&(z={});var G={type:"FeatureCollection"};return z.id&&(G.id=z.id),z.bbox&&(G.bbox=z.bbox),G.features=B,G}a.featureCollection=A;function K(B,z,G){G===void 0&&(G={});var et={type:"MultiLineString",coordinates:B};return l(et,z,G)}a.multiLineString=K;function j(B,z,G){G===void 0&&(G={});var et={type:"MultiPoint",coordinates:B};return l(et,z,G)}a.multiPoint=j;function vt(B,z,G){G===void 0&&(G={});var et={type:"MultiPolygon",coordinates:B};return l(et,z,G)}a.multiPolygon=vt;function bt(B,z,G){G===void 0&&(G={});var et={type:"GeometryCollection",geometries:B};return l(et,z,G)}a.geometryCollection=bt;function Vt(B,z){if(z===void 0&&(z=0),z&&!(z>=0))throw new Error("precision must be a positive number");var G=Math.pow(10,z||0);return Math.round(B*G)/G}a.round=Vt;function re(B,z){z===void 0&&(z="kilometers");var G=a.factors[z];if(!G)throw new Error(z+" units is invalid");return B*G}a.radiansToLength=re;function ce(B,z){z===void 0&&(z="kilometers");var G=a.factors[z];if(!G)throw new Error(z+" units is invalid");return B/G}a.lengthToRadians=ce;function We(B,z){return Q(ce(B,z))}a.lengthToDegrees=We;function q(B){var z=B%360;return z<0&&(z+=360),z}a.bearingToAzimuth=q;function Q(B){var z=B%(2*Math.PI);return z*180/Math.PI}a.radiansToDegrees=Q;function lt(B){var z=B%360;return z*Math.PI/180}a.degreesToRadians=lt;function Lt(B,z,G){if(z===void 0&&(z="kilometers"),G===void 0&&(G="kilometers"),!(B>=0))throw new Error("length must be a positive number");return re(ce(B,z),G)}a.convertLength=Lt;function pt(B,z,G){if(z===void 0&&(z="meters"),G===void 0&&(G="kilometers"),!(B>=0))throw new Error("area must be a positive number");var et=a.areaFactors[z];if(!et)throw new Error("invalid original units");var tt=a.areaFactors[G];if(!tt)throw new Error("invalid final units");return B/et*tt}a.convertArea=pt;function Ct(B){return!isNaN(B)&&B!==null&&!Array.isArray(B)}a.isNumber=Ct;function I(B){return!!B&&B.constructor===Object}a.isObject=I;function N(B){if(!B)throw new Error("bbox is required");if(!Array.isArray(B))throw new Error("bbox must be an Array");if(B.length!==4&&B.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");B.forEach(function(z){if(!Ct(z))throw new Error("bbox must only contain numbers")})}a.validateBBox=N;function F(B){if(!B)throw new Error("id is required");if(["string","number"].indexOf(typeof B)===-1)throw new Error("id must be a number or a string")}a.validateId=F}),Ua=u(a=>{Object.defineProperty(a,"__esModule",{value:!0});var l=yn();function h(Q,lt,Lt){if(Q!==null)for(var pt,Ct,I,N,F,B,z,G=0,et=0,tt,at=Q.type,_t=at==="FeatureCollection",mt=at==="Feature",zt=_t?Q.features.length:1,le=0;le<zt;le++){z=_t?Q.features[le].geometry:mt?Q.geometry:Q,tt=z?z.type==="GeometryCollection":!1,F=tt?z.geometries.length:1;for(var ge=0;ge<F;ge++){var Ce=0,on=0;if(N=tt?z.geometries[ge]:z,N!==null){B=N.coordinates;var fn=N.type;switch(G=Lt&&(fn==="Polygon"||fn==="MultiPolygon")?1:0,fn){case null:break;case"Point":if(lt(B,et,le,Ce,on)===!1)return!1;et++,Ce++;break;case"LineString":case"MultiPoint":for(pt=0;pt<B.length;pt++){if(lt(B[pt],et,le,Ce,on)===!1)return!1;et++,fn==="MultiPoint"&&Ce++}fn==="LineString"&&Ce++;break;case"Polygon":case"MultiLineString":for(pt=0;pt<B.length;pt++){for(Ct=0;Ct<B[pt].length-G;Ct++){if(lt(B[pt][Ct],et,le,Ce,on)===!1)return!1;et++}fn==="MultiLineString"&&Ce++,fn==="Polygon"&&on++}fn==="Polygon"&&Ce++;break;case"MultiPolygon":for(pt=0;pt<B.length;pt++){for(on=0,Ct=0;Ct<B[pt].length;Ct++){for(I=0;I<B[pt][Ct].length-G;I++){if(lt(B[pt][Ct][I],et,le,Ce,on)===!1)return!1;et++}on++}Ce++}break;case"GeometryCollection":for(pt=0;pt<N.geometries.length;pt++)if(h(N.geometries[pt],lt,Lt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function d(Q,lt,Lt,pt){var Ct=Lt;return h(Q,function(I,N,F,B,z){N===0&&Lt===void 0?Ct=I:Ct=lt(Ct,I,N,F,B,z)},pt),Ct}function m(Q,lt){var Lt;switch(Q.type){case"FeatureCollection":for(Lt=0;Lt<Q.features.length&&lt(Q.features[Lt].properties,Lt)!==!1;Lt++);break;case"Feature":lt(Q.properties,0);break}}function x(Q,lt,Lt){var pt=Lt;return m(Q,function(Ct,I){I===0&&Lt===void 0?pt=Ct:pt=lt(pt,Ct,I)}),pt}function b(Q,lt){if(Q.type==="Feature")lt(Q,0);else if(Q.type==="FeatureCollection")for(var Lt=0;Lt<Q.features.length&&lt(Q.features[Lt],Lt)!==!1;Lt++);}function E(Q,lt,Lt){var pt=Lt;return b(Q,function(Ct,I){I===0&&Lt===void 0?pt=Ct:pt=lt(pt,Ct,I)}),pt}function M(Q){var lt=[];return h(Q,function(Lt){lt.push(Lt)}),lt}function A(Q,lt){var Lt,pt,Ct,I,N,F,B,z,G,et,tt=0,at=Q.type==="FeatureCollection",_t=Q.type==="Feature",mt=at?Q.features.length:1;for(Lt=0;Lt<mt;Lt++){for(F=at?Q.features[Lt].geometry:_t?Q.geometry:Q,z=at?Q.features[Lt].properties:_t?Q.properties:{},G=at?Q.features[Lt].bbox:_t?Q.bbox:void 0,et=at?Q.features[Lt].id:_t?Q.id:void 0,B=F?F.type==="GeometryCollection":!1,N=B?F.geometries.length:1,Ct=0;Ct<N;Ct++){if(I=B?F.geometries[Ct]:F,I===null){if(lt(null,tt,z,G,et)===!1)return!1;continue}switch(I.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(lt(I,tt,z,G,et)===!1)return!1;break}case"GeometryCollection":{for(pt=0;pt<I.geometries.length;pt++)if(lt(I.geometries[pt],tt,z,G,et)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}tt++}}function K(Q,lt,Lt){var pt=Lt;return A(Q,function(Ct,I,N,F,B){I===0&&Lt===void 0?pt=Ct:pt=lt(pt,Ct,I,N,F,B)}),pt}function j(Q,lt){A(Q,function(Lt,pt,Ct,I,N){var F=Lt===null?null:Lt.type;switch(F){case null:case"Point":case"LineString":case"Polygon":return lt(l.feature(Lt,Ct,{bbox:I,id:N}),pt,0)===!1?!1:void 0}var B;switch(F){case"MultiPoint":B="Point";break;case"MultiLineString":B="LineString";break;case"MultiPolygon":B="Polygon";break}for(var z=0;z<Lt.coordinates.length;z++){var G=Lt.coordinates[z],et={type:B,coordinates:G};if(lt(l.feature(et,Ct),pt,z)===!1)return!1}})}function vt(Q,lt,Lt){var pt=Lt;return j(Q,function(Ct,I,N){I===0&&N===0&&Lt===void 0?pt=Ct:pt=lt(pt,Ct,I,N)}),pt}function bt(Q,lt){j(Q,function(Lt,pt,Ct){var I=0;if(Lt.geometry){var N=Lt.geometry.type;if(!(N==="Point"||N==="MultiPoint")){var F,B=0,z=0,G=0;if(h(Lt,function(et,tt,at,_t,mt){if(F===void 0||pt>B||_t>z||mt>G){F=et,B=pt,z=_t,G=mt,I=0;return}var zt=l.lineString([F,et],Lt.properties);if(lt(zt,pt,Ct,mt,I)===!1)return!1;I++,F=et})===!1)return!1}}})}function Vt(Q,lt,Lt){var pt=Lt,Ct=!1;return bt(Q,function(I,N,F,B,z){Ct===!1&&Lt===void 0?pt=I:pt=lt(pt,I,N,F,B,z),Ct=!0}),pt}function re(Q,lt){if(!Q)throw new Error("geojson is required");j(Q,function(Lt,pt,Ct){if(Lt.geometry!==null){var I=Lt.geometry.type,N=Lt.geometry.coordinates;switch(I){case"LineString":if(lt(Lt,pt,Ct,0,0)===!1)return!1;break;case"Polygon":for(var F=0;F<N.length;F++)if(lt(l.lineString(N[F],Lt.properties),pt,Ct,F)===!1)return!1;break}}})}function ce(Q,lt,Lt){var pt=Lt;return re(Q,function(Ct,I,N,F){I===0&&Lt===void 0?pt=Ct:pt=lt(pt,Ct,I,N,F)}),pt}function We(Q,lt){if(lt=lt||{},!l.isObject(lt))throw new Error("options is invalid");var Lt=lt.featureIndex||0,pt=lt.multiFeatureIndex||0,Ct=lt.geometryIndex||0,I=lt.segmentIndex||0,N=lt.properties,F;switch(Q.type){case"FeatureCollection":Lt<0&&(Lt=Q.features.length+Lt),N=N||Q.features[Lt].properties,F=Q.features[Lt].geometry;break;case"Feature":N=N||Q.properties,F=Q.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":F=Q;break;default:throw new Error("geojson is invalid")}if(F===null)return null;var B=F.coordinates;switch(F.type){case"Point":case"MultiPoint":return null;case"LineString":return I<0&&(I=B.length+I-1),l.lineString([B[I],B[I+1]],N,lt);case"Polygon":return Ct<0&&(Ct=B.length+Ct),I<0&&(I=B[Ct].length+I-1),l.lineString([B[Ct][I],B[Ct][I+1]],N,lt);case"MultiLineString":return pt<0&&(pt=B.length+pt),I<0&&(I=B[pt].length+I-1),l.lineString([B[pt][I],B[pt][I+1]],N,lt);case"MultiPolygon":return pt<0&&(pt=B.length+pt),Ct<0&&(Ct=B[pt].length+Ct),I<0&&(I=B[pt][Ct].length-I-1),l.lineString([B[pt][Ct][I],B[pt][Ct][I+1]],N,lt)}throw new Error("geojson is invalid")}function q(Q,lt){if(lt=lt||{},!l.isObject(lt))throw new Error("options is invalid");var Lt=lt.featureIndex||0,pt=lt.multiFeatureIndex||0,Ct=lt.geometryIndex||0,I=lt.coordIndex||0,N=lt.properties,F;switch(Q.type){case"FeatureCollection":Lt<0&&(Lt=Q.features.length+Lt),N=N||Q.features[Lt].properties,F=Q.features[Lt].geometry;break;case"Feature":N=N||Q.properties,F=Q.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":F=Q;break;default:throw new Error("geojson is invalid")}if(F===null)return null;var B=F.coordinates;switch(F.type){case"Point":return l.point(B,N,lt);case"MultiPoint":return pt<0&&(pt=B.length+pt),l.point(B[pt],N,lt);case"LineString":return I<0&&(I=B.length+I),l.point(B[I],N,lt);case"Polygon":return Ct<0&&(Ct=B.length+Ct),I<0&&(I=B[Ct].length+I),l.point(B[Ct][I],N,lt);case"MultiLineString":return pt<0&&(pt=B.length+pt),I<0&&(I=B[pt].length+I),l.point(B[pt][I],N,lt);case"MultiPolygon":return pt<0&&(pt=B.length+pt),Ct<0&&(Ct=B[pt].length+Ct),I<0&&(I=B[pt][Ct].length-I),l.point(B[pt][Ct][I],N,lt)}throw new Error("geojson is invalid")}a.coordAll=M,a.coordEach=h,a.coordReduce=d,a.featureEach=b,a.featureReduce=E,a.findPoint=q,a.findSegment=We,a.flattenEach=j,a.flattenReduce=vt,a.geomEach=A,a.geomReduce=K,a.lineEach=re,a.lineReduce=ce,a.propEach=m,a.propReduce=x,a.segmentEach=bt,a.segmentReduce=Vt}),ia=u(a=>{Object.defineProperty(a,"__esModule",{value:!0});var l=Ua();function h(d){var m=[1/0,1/0,-1/0,-1/0];return l.coordEach(d,function(x){m[0]>x[0]&&(m[0]=x[0]),m[1]>x[1]&&(m[1]=x[1]),m[2]<x[0]&&(m[2]=x[0]),m[3]<x[1]&&(m[3]=x[1])}),m}h.default=h,a.default=h}),So=u((a,l)=>{var h=Je(),d=yn(),m=Ua(),x=ia().default,b=m.featureEach;m.coordEach,d.polygon;var E=d.featureCollection;function M(A){var K=new h(A);return K.insert=function(j){if(j.type!=="Feature")throw new Error("invalid feature");return j.bbox=j.bbox?j.bbox:x(j),h.prototype.insert.call(this,j)},K.load=function(j){var vt=[];return Array.isArray(j)?j.forEach(function(bt){if(bt.type!=="Feature")throw new Error("invalid features");bt.bbox=bt.bbox?bt.bbox:x(bt),vt.push(bt)}):b(j,function(bt){if(bt.type!=="Feature")throw new Error("invalid features");bt.bbox=bt.bbox?bt.bbox:x(bt),vt.push(bt)}),h.prototype.load.call(this,vt)},K.remove=function(j,vt){if(j.type!=="Feature")throw new Error("invalid feature");return j.bbox=j.bbox?j.bbox:x(j),h.prototype.remove.call(this,j,vt)},K.clear=function(){return h.prototype.clear.call(this)},K.search=function(j){var vt=h.prototype.search.call(this,this.toBBox(j));return E(vt)},K.collides=function(j){return h.prototype.collides.call(this,this.toBBox(j))},K.all=function(){var j=h.prototype.all.call(this);return E(j)},K.toJSON=function(){return h.prototype.toJSON.call(this)},K.fromJSON=function(j){return h.prototype.fromJSON.call(this,j)},K.toBBox=function(j){var vt;if(j.bbox)vt=j.bbox;else if(Array.isArray(j)&&j.length===4)vt=j;else if(Array.isArray(j)&&j.length===6)vt=[j[0],j[1],j[3],j[4]];else if(j.type==="Feature")vt=x(j);else if(j.type==="FeatureCollection")vt=x(j);else throw new Error("invalid geojson");return{minX:vt[0],minY:vt[1],maxX:vt[2],maxY:vt[3]}},K}l.exports=M,l.exports.default=M});Array.prototype.findIndex=Array.prototype.findIndex||function(a){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof a!="function")throw new TypeError("callback must be a function");for(var l=Object(this),h=l.length>>>0,d=arguments[1],m=0;m<h;m++)if(a.call(d,l[m],m,l))return m;return-1},Array.prototype.find=Array.prototype.find||function(a){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof a!="function")throw new TypeError("callback must be a function");for(var l=Object(this),h=l.length>>>0,d=arguments[1],m=0;m<h;m++){var x=l[m];if(a.call(d,x,m,l))return x}},typeof Object.assign!="function"&&(Object.assign=function(a){if(a==null)throw new TypeError("Cannot convert undefined or null to object");a=Object(a);for(var l=1;l<arguments.length;l++){var h=arguments[l];if(h!=null)for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(a[d]=h[d])}return a}),function(a){a.forEach(function(l){l.hasOwnProperty("remove")||Object.defineProperty(l,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(a,l){if(this==null)throw new TypeError('"this" is null or not defined');var h=Object(this),d=h.length>>>0;if(d===0)return!1;var m=l|0,x=Math.max(m>=0?m:d-Math.abs(m),0);function b(E,M){return E===M||typeof E=="number"&&typeof M=="number"&&isNaN(E)&&isNaN(M)}for(;x<d;){if(b(h[x],a))return!0;x++}return!1}});var ec={version:"2.18.3"},Re=p(Tu()),Rn={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},nc={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex löschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer löschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknüpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Länge",segmentLength:"Segment Länge",area:"Fläche",radius:"Radius",perimeter:"Umfang",height:"Höhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},Du={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},_i={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},dd={tooltips:{placeMarker:"Adaugă un punct",firstVertex:"Apasă aici pentru a adăuga primul Vertex",continueLine:"Apasă aici pentru a continua desenul",finishLine:"Apasă pe orice obiect pentru a finisa desenul",finishPoly:"Apasă pe primul obiect pentru a finisa",finishRect:"Apasă pentru a finisa",startCircle:"Apasă pentru a desena un cerc",finishCircle:"Apasă pentru a finisa un cerc",placeCircleMarker:"Adaugă un punct"},actions:{finish:"Termină",cancel:"Anulează",removeLastVertex:"Șterge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaugă o bulină",drawPolyButton:"Desenează un poligon",drawLineButton:"Desenează o linie",drawCircleButton:"Desenează un cerc",drawRectButton:"Desenează un dreptunghi",editButton:"Editează straturile",dragButton:"Mută straturile",cutButton:"Taie straturile",deleteButton:"Șterge straturile",drawCircleMarkerButton:"Desenează marcatorul cercului",snappingButton:"Fixați marcatorul glisat pe alte straturi și vârfuri",pinningButton:"Fixați vârfurile partajate împreună",rotateButton:"Rotiți stratul"}},Nu={tooltips:{placeMarker:"Нажмите, чтобы нанести маркер",firstVertex:"Нажмите, чтобы нанести первый объект",continueLine:"Нажмите, чтобы продолжить рисование",finishLine:"Нажмите любой существующий маркер для завершения",finishPoly:"Выберите первую точку, чтобы закончить",finishRect:"Нажмите, чтобы закончить",startCircle:"Нажмите, чтобы добавить центр круга",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Нажмите, чтобы нанести круговой маркер"},actions:{finish:"Завершить",cancel:"Отменить",removeLastVertex:"Отменить последнее действие"},buttonTitles:{drawMarkerButton:"Добавить маркер",drawPolyButton:"Рисовать полигон",drawLineButton:"Рисовать кривую",drawCircleButton:"Рисовать круг",drawRectButton:"Рисовать прямоугольник",editButton:"Редактировать слой",dragButton:"Перенести слой",cutButton:"Вырезать слой",deleteButton:"Удалить слой",drawCircleMarkerButton:"Добавить круговой маркер",snappingButton:"Привязать перетаскиваемый маркер к другим слоям и вершинам",pinningButton:"Связать общие точки вместе",rotateButton:"Поворот слоя"}},Po={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vértice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del círculo",finishCircle:"Presiona para finalizar el círculo",placeCircleMarker:"Presiona para colocar un marcador de círculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar último vértice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polígono",drawLineButton:"Dibujar Línea",drawCircleButton:"Dibujar Círculo",drawRectButton:"Dibujar Rectángulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Círculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vértices",pinningButton:"Fijar juntos los vértices compartidos",rotateButton:"Rotar capa"}},jn={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beëindigen",finishPoly:"Klik op het eerst punt om te beëindigen",finishRect:"Klik om te beëindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beëindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},Mo={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer à dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"Éditer des calques",dragButton:"Déplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"Épingler ensemble les sommets partagés",rotateButton:"Tourner des calques"}},Va={tooltips:{placeMarker:"单击放置标记",firstVertex:"单击放置首个顶点",continueLine:"单击继续绘制",finishLine:"单击任何存在的标记以完成",finishPoly:"单击第一个标记以完成",finishRect:"单击完成",startCircle:"单击放置圆心",finishCircle:"单击完成圆形",placeCircleMarker:"点击放置圆形标记"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最后的顶点"},buttonTitles:{drawMarkerButton:"绘制标记",drawPolyButton:"绘制多边形",drawLineButton:"绘制线段",drawCircleButton:"绘制圆形",drawRectButton:"绘制长方形",editButton:"编辑图层",dragButton:"拖拽图层",cutButton:"剪切图层",deleteButton:"删除图层",drawCircleMarkerButton:"画圆圈标记",snappingButton:"将拖动的标记捕捉到其他图层和顶点",pinningButton:"将共享顶点固定在一起",rotateButton:"旋转图层"}},ja={tooltips:{placeMarker:"單擊放置標記",firstVertex:"單擊放置第一個頂點",continueLine:"單擊繼續繪製",finishLine:"單擊任何存在的標記以完成",finishPoly:"單擊第一個標記以完成",finishRect:"單擊完成",startCircle:"單擊放置圓心",finishCircle:"單擊完成圓形",placeCircleMarker:"點擊放置圓形標記"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最後一個頂點"},buttonTitles:{drawMarkerButton:"放置標記",drawPolyButton:"繪製多邊形",drawLineButton:"繪製線段",drawCircleButton:"繪製圓形",drawRectButton:"繪製方形",editButton:"編輯圖形",dragButton:"移動圖形",cutButton:"裁切圖形",deleteButton:"刪除圖形",drawCircleMarkerButton:"畫圓圈標記",snappingButton:"將拖動的標記對齊到其他圖層和頂點",pinningButton:"將共享頂點固定在一起",rotateButton:"旋轉圖形"}},rc={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vértice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do círculo",finishCircle:"Clique para finalizar o círculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover último vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},sa={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vértice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do círculo",finishCircle:"Clique para terminar o círculo",placeCircleMarker:"Clique para colocar marcador de círculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover Último Vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},ic={tooltips:{placeMarker:"Kliknij, aby umieścić znacznik",firstVertex:"Kliknij, aby umieścić pierwszy wierzchołek",continueLine:"Kliknij, aby kontynuować rysowanie",finishLine:"Kliknij dowolny istniejący znacznik, aby zakończyć",finishPoly:"Kliknij pierwszy znacznik, aby zakończyć",finishRect:"Kliknij, aby zakończyć",startCircle:"Kliknij, aby umieścić środek okręgu",finishCircle:"Kliknij, aby zakończyć okrąg",placeCircleMarker:"Kliknij, aby umieścić znacznik okręgu",placeText:"Kliknij, aby umieścić tekst"},actions:{finish:"Zakończ",cancel:"Anuluj",removeLastVertex:"Usuń ostatni wierzchołek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokąt",drawLineButton:"Rysuj linię",drawCircleButton:"Rysuj okrąg",drawRectButton:"Rysuj prostokąt",editButton:"Edytuj warstwy",dragButton:"Przeciągnij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usuń warstwy",drawCircleMarkerButton:"Rysuj znacznik okrągły",snappingButton:"Przyciągnij przenoszony znacznik do innych warstw i wierzchołków",pinningButton:"Przypnij wspólne wierzchołki razem",rotateButton:"Obróć warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne śledzenie linii"},measurements:{totalLength:"Długość",segmentLength:"Długość odcinka",area:"Obszar",radius:"Promień",perimeter:"Obwód",height:"Wysokość",width:"Szerokość",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},sc={tooltips:{placeMarker:"Klicka för att placera markör",firstVertex:"Klicka för att placera första hörnet",continueLine:"Klicka för att fortsätta rita",finishLine:"Klicka på en existerande punkt för att slutföra",finishPoly:"Klicka på den första punkten för att slutföra",finishRect:"Klicka för att slutföra",startCircle:"Klicka för att placera cirkelns centrum",finishCircle:"Klicka för att slutföra cirkeln",placeCircleMarker:"Klicka för att placera cirkelmarkör"},actions:{finish:"Slutför",cancel:"Avbryt",removeLastVertex:"Ta bort sista hörnet"},buttonTitles:{drawMarkerButton:"Rita Markör",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkör",snappingButton:"Snäpp dra markören till andra lager och hörn",pinningButton:"Fäst delade hörn tillsammans",rotateButton:"Rotera lagret"}},Ru={tooltips:{placeMarker:"Κάντε κλικ για να τοποθετήσετε Δείκτη",firstVertex:"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο",continueLine:"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε",finishLine:"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί",finishPoly:"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε",finishRect:"Κάντε κλικ για να τελειώσετε",startCircle:"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου",finishCircle:"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο",placeCircleMarker:"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},actions:{finish:"Τέλος",cancel:"Ακύρωση",removeLastVertex:"Κατάργηση τελευταίου σημείου"},buttonTitles:{drawMarkerButton:"Σχεδίαση Δείκτη",drawPolyButton:"Σχεδίαση Πολυγώνου",drawLineButton:"Σχεδίαση Γραμμής",drawCircleButton:"Σχεδίαση Κύκλου",drawRectButton:"Σχεδίαση Ορθογωνίου",editButton:"Επεξεργασία Επιπέδων",dragButton:"Μεταφορά Επιπέδων",cutButton:"Αποκοπή Επιπέδων",deleteButton:"Κατάργηση Επιπέδων",drawCircleMarkerButton:"Σχεδίαση Κυκλικού Δείκτη",snappingButton:"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές",pinningButton:"Περικοπή κοινών κορυφών μαζί",rotateButton:"Περιστρέψτε το στρώμα"}},oc={tooltips:{placeMarker:"Kattintson a jelölő elhelyezéséhez",firstVertex:"Kattintson az első pont elhelyezéséhez",continueLine:"Kattintson a következő pont elhelyezéséhez",finishLine:"A befejezéshez kattintson egy meglévő pontra",finishPoly:"A befejezéshez kattintson az első pontra",finishRect:"Kattintson a befejezéshez",startCircle:"Kattintson a kör középpontjának elhelyezéséhez",finishCircle:"Kattintson a kör befejezéséhez",placeCircleMarker:"Kattintson a körjelölő elhelyezéséhez"},actions:{finish:"Befejezés",cancel:"Mégse",removeLastVertex:"Utolsó pont eltávolítása"},buttonTitles:{drawMarkerButton:"Jelölő rajzolása",drawPolyButton:"Poligon rajzolása",drawLineButton:"Vonal rajzolása",drawCircleButton:"Kör rajzolása",drawRectButton:"Négyzet rajzolása",editButton:"Elemek szerkesztése",dragButton:"Elemek mozgatása",cutButton:"Elemek vágása",deleteButton:"Elemek törlése",drawCircleMarkerButton:"Kör jelölő rajzolása",snappingButton:"Kapcsolja a jelöltőt másik elemhez vagy ponthoz",pinningButton:"Közös pontok összekötése",rotateButton:"Fólia elforgatása"}},ac={tooltips:{placeMarker:"Tryk for at placere en markør",firstVertex:"Tryk for at placere det første punkt",continueLine:"Tryk for at fortsætte linjen",finishLine:"Tryk på et eksisterende punkt for at afslutte",finishPoly:"Tryk på det første punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkør"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markør",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Træk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkør",snappingButton:"Fastgør trukket markør til andre elementer",pinningButton:"Sammenlæg delte elementer",rotateButton:"Roter laget"}},Ou={tooltips:{placeMarker:"Klikk for å plassere punkt",firstVertex:"Klikk for å plassere første punkt",continueLine:"Klikk for å tegne videre",finishLine:"Klikk på et eksisterende punkt for å fullføre",finishPoly:"Klikk første punkt for å fullføre",finishRect:"Klikk for å fullføre",startCircle:"Klikk for å sette sirkel midtpunkt",finishCircle:"Klikk for å fullføre sirkel",placeCircleMarker:"Klikk for å plassere sirkel",placeText:"Klikk for å plassere tekst"},actions:{finish:"Fullfør",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotér objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalér objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Område",radius:"Radius",perimeter:"Omriss",height:"Høyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkør"}},Wh={tooltips:{placeMarker:"کلیک برای جانمایی نشان",firstVertex:"کلیک برای رسم اولین رأس",continueLine:"کلیک برای ادامه رسم",finishLine:"کلیک روی هر نشان موجود برای پایان",finishPoly:"کلیک روی اولین نشان برای پایان",finishRect:"کلیک برای پایان",startCircle:"کلیک برای رسم مرکز دایره",finishCircle:"کلیک برای پایان رسم دایره",placeCircleMarker:"کلیک برای رسم نشان دایره",placeText:"کلیک برای نوشتن متن"},actions:{finish:"پایان",cancel:"لفو",removeLastVertex:"حذف آخرین رأس"},buttonTitles:{drawMarkerButton:"درج نشان",drawPolyButton:"رسم چندضلعی",drawLineButton:"رسم خط",drawCircleButton:"رسم دایره",drawRectButton:"رسم چهارضلعی",editButton:"ویرایش لایه‌ها",dragButton:"جابجایی لایه‌ها",cutButton:"برش لایه‌ها",deleteButton:"حذف لایه‌ها",drawCircleMarkerButton:"رسم نشان دایره",snappingButton:"نشانگر را به لایه‌ها و رئوس دیگر بکشید",pinningButton:"رئوس مشترک را با هم پین کنید",rotateButton:"چرخش لایه",drawTextButton:"رسم متن",scaleButton:"مقیاس‌گذاری",autoTracingButton:"ردیاب خودکار"},measurements:{totalLength:"طول",segmentLength:"طول بخش",area:"ناحیه",radius:"شعاع",perimeter:"محیط",height:"ارتفاع",width:"عرض",coordinates:"موقعیت",coordinatesMarker:"موقعیت نشان"}},uc={tooltips:{placeMarker:"Натисніть, щоб нанести маркер",firstVertex:"Натисніть, щоб нанести першу вершину",continueLine:"Натисніть, щоб продовжити малювати",finishLine:"Натисніть будь-який існуючий маркер для завершення",finishPoly:"Виберіть перший маркер, щоб завершити",finishRect:"Натисніть, щоб завершити",startCircle:"Натисніть, щоб додати центр кола",finishCircle:"Натисніть, щоб завершити коло",placeCircleMarker:"Натисніть, щоб нанести круговий маркер"},actions:{finish:"Завершити",cancel:"Відмінити",removeLastVertex:"Видалити попередню вершину"},buttonTitles:{drawMarkerButton:"Малювати маркер",drawPolyButton:"Малювати полігон",drawLineButton:"Малювати криву",drawCircleButton:"Малювати коло",drawRectButton:"Малювати прямокутник",editButton:"Редагувати шари",dragButton:"Перенести шари",cutButton:"Вирізати шари",deleteButton:"Видалити шари",drawCircleMarkerButton:"Малювати круговий маркер",snappingButton:"Прив’язати перетягнутий маркер до інших шарів та вершин",pinningButton:"Зв'язати спільні вершини разом",rotateButton:"Повернути шар"}},gd={tooltips:{placeMarker:"İşaretçi yerleştirmek için tıklayın",firstVertex:"İlk tepe noktasını yerleştirmek için tıklayın",continueLine:"Çizime devam etmek için tıklayın",finishLine:"Bitirmek için mevcut herhangi bir işaretçiyi tıklayın",finishPoly:"Bitirmek için ilk işaretçiyi tıklayın",finishRect:"Bitirmek için tıklayın",startCircle:"Daire merkezine yerleştirmek için tıklayın",finishCircle:"Daireyi bitirmek için tıklayın",placeCircleMarker:"Daire işaretçisi yerleştirmek için tıklayın"},actions:{finish:"Bitir",cancel:"İptal",removeLastVertex:"Son köşeyi kaldır"},buttonTitles:{drawMarkerButton:"Çizim İşaretçisi",drawPolyButton:"Çokgenler çiz",drawLineButton:"Çoklu çizgi çiz",drawCircleButton:"Çember çiz",drawRectButton:"Dikdörtgen çiz",editButton:"Katmanları düzenle",dragButton:"Katmanları sürükle",cutButton:"Katmanları kes",deleteButton:"Katmanları kaldır",drawCircleMarkerButton:"Daire işaretçisi çiz",snappingButton:"Sürüklenen işaretçiyi diğer katmanlara ve köşelere yapıştır",pinningButton:"Paylaşılan köşeleri birbirine sabitle",rotateButton:"Katmanı döndür"}},Ae={tooltips:{placeMarker:"Kliknutím vytvoříte značku",firstVertex:"Kliknutím vytvoříte první objekt",continueLine:"Kliknutím pokračujte v kreslení",finishLine:"Kliknutí na libovolnou existující značku pro dokončení",finishPoly:"Vyberte první bod pro dokončení",finishRect:"Klikněte pro dokončení",startCircle:"Kliknutím přidejte střed kruhu",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Kliknutím nastavte poloměr"},actions:{finish:"Dokončit",cancel:"Zrušit",removeLastVertex:"Zrušit poslední akci"},buttonTitles:{drawMarkerButton:"Přidat značku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit křivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdélník",editButton:"Upravit vrstvu",dragButton:"Přeneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Přidat kruhovou značku",snappingButton:"Navázat tažnou značku k dalším vrstvám a vrcholům",pinningButton:"Spojit společné body dohromady",rotateButton:"Otočte vrstvu"}},Yi={tooltips:{placeMarker:"クリックしてマーカーを配置",firstVertex:"クリックして最初の頂点を配置",continueLine:"クリックして描画を続ける",finishLine:"任意のマーカーをクリックして終了",finishPoly:"最初のマーカーをクリックして終了",finishRect:"クリックして終了",startCircle:"クリックして円の中心を配置",finishCircle:"クリックして円の描画を終了",placeCircleMarker:"クリックして円マーカーを配置",placeText:"クリックしてテキストを配置"},actions:{finish:"終了",cancel:"キャンセル",removeLastVertex:"最後の頂点を削除"},buttonTitles:{drawMarkerButton:"マーカーを描画",drawPolyButton:"ポリゴンを描画",drawLineButton:"折れ線を描画",drawCircleButton:"円を描画",drawRectButton:"矩形を描画",editButton:"レイヤーを編集",dragButton:"レイヤーをドラッグ",cutButton:"レイヤーを切り取り",deleteButton:"レイヤーを削除",drawCircleMarkerButton:"円マーカーを描画",snappingButton:"ドラッグしたマーカーを他のレイヤーや頂点にスナップする",pinningButton:"共有する頂点を同時に動かす",rotateButton:"レイヤーを回転",drawTextButton:"テキストを描画"}},hn={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmäisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtämistä",finishLine:"Klikkaa olemassa olevaa merkkiä lopettaaksesi",finishPoly:"Klikkaa ensimmäistä merkkiä lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrän keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrän",placeCircleMarker:"Klikkaa asettaaksesi ympyrämerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirrä merkkejä",drawPolyButton:"Piirrä monikulmioita",drawLineButton:"Piirrä viivoja",drawCircleButton:"Piirrä ympyrä",drawRectButton:"Piirrä neliskulmioita",editButton:"Muokkaa",dragButton:"Siirrä",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirrä ympyrämerkki",snappingButton:"Kiinnitä siirrettävä merkki toisiin muotoihin",pinningButton:"Kiinnitä jaetut muodot yhteen",rotateButton:"Käännä",drawTextButton:"Piirrä tekstiä"}},Kh={tooltips:{placeMarker:"마커 위치를 클릭하세요",firstVertex:"첫번째 꼭지점 위치을 클릭하세요",continueLine:"계속 그리려면 클릭하세요",finishLine:"끝내려면 기존 마커를 클릭하세요",finishPoly:"끝내려면 처음 마커를 클릭하세요",finishRect:"끝내려면 클릭하세요",startCircle:"원의 중심이 될 위치를 클릭하세요",finishCircle:"원을 끝내려면 클릭하세요",placeCircleMarker:"원 마커 위치를 클릭하세요",placeText:"텍스트 위치를 클릭하세요"},actions:{finish:"끝내기",cancel:"취소",removeLastVertex:"마지막 꼭지점 제거"},buttonTitles:{drawMarkerButton:"마커 그리기",drawPolyButton:"다각형 그리기",drawLineButton:"다각선 그리기",drawCircleButton:"원 그리기",drawRectButton:"직사각형 그리기",editButton:"레이어 편집하기",dragButton:"레이어 끌기",cutButton:"레이어 자르기",deleteButton:"레이어 제거하기",drawCircleMarkerButton:"원 마커 그리기",snappingButton:"잡아끈 마커를 다른 레이어 및 꼭지점에 들러붙게 하기",pinningButton:"공유 꼭지점을 함께 찍기",rotateButton:"레이어 회전하기",drawTextButton:"텍스트 그리기"}},lc={tooltips:{placeMarker:"Маркерди жайгаштыруу үчүн басыңыз",firstVertex:"Биринчи чокуну жайгаштырууну үчүн басыңыз",continueLine:"Сүрөт тартууну улантуу үчүн басыңыз",finishLine:"Аяктоо үчүн учурдагы маркерди басыңыз",finishPoly:"Бүтүрүү үчүн биринчи маркерди басыңыз",finishRect:"Бүтүрүү үчүн басыңыз",startCircle:"Айлананын борборун жайгаштырууну үчүн басыңыз",finishCircle:"Айлананы бүтүрүү үчүн басыңыз",placeCircleMarker:"Тегерек маркерди жайгаштыруу үчүн басыңыз",placeText:"Текстти жайгаштыруу үчүн басыңыз"},actions:{finish:"Аягы",cancel:"Жок кылуу",removeLastVertex:"Акыркы чокуну өчүрүү"},buttonTitles:{drawMarkerButton:"Маркерди чизуу",drawPolyButton:"Полигон чизуу",drawLineButton:"Полилиния чизуу",drawCircleButton:"Дайынды чизуу",drawRectButton:"Прямоугольник чизуу",editButton:"Слоопту түзөтүү",dragButton:"Слоопту карап сүйлөү",cutButton:"Слооптун башын кесүү",deleteButton:"Слооптун өчүрүү",drawCircleMarkerButton:"Дайынды маркерди чизуу",snappingButton:"Башка слооптордун жана вертекстердин арасына чекилдөө",pinningButton:"Бөлүшкөн вертекстерди бирге тутуштуруу",rotateButton:"Слооптун өзгөртүү",drawTextButton:"Текст чизуу",scaleButton:"Слооптун өлчөмүн өзгөртүү",autoTracingButton:"Автоматтык тизмеги чизуу"},measurements:{totalLength:"Узундук",segmentLength:"Сегмент узундугу",area:"Аймак",radius:"Радиус",perimeter:"Периметр",height:"Диаметр",width:"Кенчилик",coordinates:"Координаттар",coordinatesMarker:"Маркердин координаттары"}},cc=sa,Ys={en:Rn,de:nc,it:Du,id:_i,ro:dd,ru:Nu,es:Po,nl:jn,fr:Mo,pt:cc,pt_br:rc,pt_pt:sa,zh:Va,zh_tw:ja,pl:ic,sv:sc,el:Ru,hu:oc,da:ac,no:Ou,fa:Wh,ua:uc,tr:gd,cz:Ae,ja:Yi,fi:hn,ko:Kh,ky:lc},Io={_globalEditModeEnabled:!1,enableGlobalEditMode(a){let l={...a};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(h=>{this._isRelevantForEdit(h)&&h.pm.enable(l)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(a=>{a.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(a=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(a)},handleLayerAdditionInGlobalEditMode(){let a=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let l in a){let h=a[l];this._isRelevantForEdit(h)&&h.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:a}){this._addedLayersEdit[L.stamp(a)]=a},_isRelevantForEdit(a){return a.pm&&!(a instanceof L.LayerGroup)&&(!L.PM.optIn&&!a.options.pmIgnore||L.PM.optIn&&a.options.pmIgnore===!1)&&!a._pmTempLayer&&a.pm.options.allowEditing}},hc=Io,qa={_globalDragModeEnabled:!1,enableGlobalDragMode(){let a=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},a.forEach(l=>{this._isRelevantForDrag(l)&&l.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let a=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,a.forEach(l=>{l.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let a=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let l in a){let h=a[l];this._isRelevantForDrag(h)&&h.pm.enableLayerDrag()}},_layerAddedDrag({layer:a}){this._addedLayersDrag[L.stamp(a)]=a},_isRelevantForDrag(a){return a.pm&&!(a instanceof L.LayerGroup)&&(!L.PM.optIn&&!a.options.pmIgnore||L.PM.optIn&&a.options.pmIgnore===!1)&&!a._pmTempLayer&&a.pm.options.draggable}},ur=qa,ko={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(a=>{this._isRelevantForRemoval(a)&&(a.pm.enabled()&&a.pm.disable(),a.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(a=>{a.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(a){let l=a.target;this._isRelevantForRemoval(l)&&!l.pm.dragging()&&(l.removeFrom(this.map.pm._getContainingLayer()),l.remove(),l instanceof L.LayerGroup?(this._fireRemoveLayerGroup(l),this._fireRemoveLayerGroup(this.map,l)):(l.pm._fireRemove(l),l.pm._fireRemove(this.map,l)))},_isRelevantForRemoval(a){return a.pm&&!(a instanceof L.LayerGroup)&&(!L.PM.optIn&&!a.options.pmIgnore||L.PM.optIn&&a.options.pmIgnore===!1)&&!a._pmTempLayer&&a.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let a=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let l in a){let h=a[l];this._isRelevantForRemoval(h)&&(h.pm.enabled()&&h.pm.disable(),h.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:a}){this._addedLayersRemoval[L.stamp(a)]=a}},$h=ko,Xh={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(a=>a instanceof L.Polyline).forEach(a=>{this._isRelevantForRotate(a)&&a.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(a=>a instanceof L.Polyline).forEach(a=>{a.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(a){return a.pm&&a instanceof L.Polyline&&!(a instanceof L.LayerGroup)&&(!L.PM.optIn&&!a.options.pmIgnore||L.PM.optIn&&a.options.pmIgnore===!1)&&!a._pmTempLayer&&a.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let a=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let l in a){let h=a[l];this._isRelevantForRemoval(h)&&h.pm.enableRotate()}},_layerAddedRotate({layer:a}){this._addedLayersRotate[L.stamp(a)]=a}},md=Xh,Yh=p(Tu()),fc={_fireDrawStart(a="Draw",l={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},a,l)},_fireDrawEnd(a="Draw",l={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},a,l)},_fireCreate(a,l="Draw",h={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:a,layer:a},l,h)},_fireCenterPlaced(a="Draw",l={}){let h=a==="Draw"?this._layer:void 0,d=a!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:h,layer:d,latlng:this._layer.getLatLng()},a,l)},_fireCut(a,l,h,d="Draw",m={}){this.__fire(a,"pm:cut",{shape:this._shape,layer:l,originalLayer:h},d,m)},_fireEdit(a=this._layer,l="Edit",h={}){this.__fire(a,"pm:edit",{layer:this._layer,shape:this.getShape()},l,h)},_fireEnable(a="Edit",l={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},a,l)},_fireDisable(a="Edit",l={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},a,l)},_fireUpdate(a="Edit",l={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},a,l)},_fireMarkerDragStart(a,l=void 0,h="Edit",d={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:a,shape:this.getShape(),indexPath:l},h,d)},_fireMarkerDrag(a,l=void 0,h="Edit",d={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:a,shape:this.getShape(),indexPath:l},h,d)},_fireMarkerDragEnd(a,l=void 0,h=void 0,d="Edit",m={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:a,shape:this.getShape(),indexPath:l,intersectionReset:h},d,m)},_fireDragStart(a="Edit",l={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},a,l)},_fireDrag(a,l="Edit",h={}){this.__fire(this._layer,"pm:drag",{...a,shape:this.getShape()},l,h)},_fireDragEnd(a="Edit",l={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},a,l)},_fireDragEnable(a="Edit",l={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},a,l)},_fireDragDisable(a="Edit",l={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},a,l)},_fireRemove(a,l=a,h="Edit",d={}){this.__fire(a,"pm:remove",{layer:l,shape:this.getShape()},h,d)},_fireVertexAdded(a,l,h,d="Edit",m={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:a,indexPath:l,latlng:h,shape:this.getShape()},d,m)},_fireVertexRemoved(a,l,h="Edit",d={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:a,indexPath:l,shape:this.getShape()},h,d)},_fireVertexClick(a,l,h="Edit",d={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:a,indexPath:l,shape:this.getShape()},h,d)},_fireIntersect(a,l=this._layer,h="Edit",d={}){this.__fire(l,"pm:intersect",{layer:this._layer,intersection:a,shape:this.getShape()},h,d)},_fireLayerReset(a,l,h="Edit",d={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:a,indexPath:l,shape:this.getShape()},h,d)},_fireChange(a,l="Edit",h={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:a,shape:this.getShape()},l,h)},_fireTextChange(a,l="Edit",h={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:a,shape:this.getShape()},l,h)},_fireTextFocus(a="Edit",l={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},a,l)},_fireTextBlur(a="Edit",l={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},a,l)},_fireSnapDrag(a,l,h="Snapping",d={}){this.__fire(a,"pm:snapdrag",l,h,d)},_fireSnap(a,l,h="Snapping",d={}){this.__fire(a,"pm:snap",l,h,d)},_fireUnsnap(a,l,h="Snapping",d={}){this.__fire(a,"pm:unsnap",l,h,d)},_fireRotationEnable(a,l,h="Rotation",d={}){this.__fire(a,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},h,d)},_fireRotationDisable(a,l="Rotation",h={}){this.__fire(a,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},l,h)},_fireRotationStart(a,l,h="Rotation",d={}){this.__fire(a,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:l},h,d)},_fireRotation(a,l,h,d=this._rotationLayer,m="Rotation",x={}){this.__fire(a,"pm:rotate",{layer:d,helpLayer:this._layer,startAngle:this._startAngle,angle:d.pm.getAngle(),angleDiff:l,oldLatLngs:h,newLatLngs:d.getLatLngs()},m,x)},_fireRotationEnd(a,l,h,d="Rotation",m={}){this.__fire(a,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:l,angle:this._rotationLayer.pm.getAngle(),originLatLngs:h,newLatLngs:this._rotationLayer.getLatLngs()},d,m)},_fireActionClick(a,l,h,d="Toolbar",m={}){this.__fire(this._map,"pm:actionclick",{text:a.text,action:a,btnName:l,button:h},d,m)},_fireButtonClick(a,l,h="Toolbar",d={}){this.__fire(this._map,"pm:buttonclick",{btnName:a,button:l},h,d)},_fireLangChange(a,l,h,d,m="Global",x={}){this.__fire(this.map,"pm:langchange",{oldLang:a,activeLang:l,fallback:h,translations:d},m,x)},_fireGlobalDragModeToggled(a,l="Global",h={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:a,map:this.map},l,h)},_fireGlobalEditModeToggled(a,l="Global",h={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:a,map:this.map},l,h)},_fireGlobalRemovalModeToggled(a,l="Global",h={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:a,map:this.map},l,h)},_fireGlobalCutModeToggled(a="Global",l={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},a,l)},_fireGlobalDrawModeToggled(a="Global",l={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},a,l)},_fireGlobalRotateModeToggled(a="Global",l={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},a,l)},_fireRemoveLayerGroup(a,l=a,h="Edit",d={}){this.__fire(a,"pm:remove",{layer:l,shape:void 0},h,d)},_fireKeyeventEvent(a,l,h,d="Global",m={}){this.__fire(this.map,"pm:keyevent",{event:a,eventType:l,focusOn:h},d,m)},__fire(a,l,h,d,m={}){h=(0,Yh.default)(h,m,{source:d}),L.PM.Utils._fireEvent(a,l,h)}},Bu=fc,Jh=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(a){this.map=a,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),a.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(a){let l="document";this.map.getContainer().contains(a.target)&&(l="map");let h={event:a,eventType:a.type,focusOn:l};this._lastEvents[a.type]=h,this._lastEvents.current=h,this.map.pm._fireKeyeventEvent(a,a.type,l)},_onBlur(a){a.altKey=!1;let l={event:a,eventType:a.type,focusOn:"document"};this._lastEvents[a.type]=l,this._lastEvents.current=l},getLastKeyEvent(a="current"){return this._lastEvents[a]},isShiftKeyPressed(){var a;return(a=this._lastEvents.current)==null?void 0:a.event.shiftKey},isAltKeyPressed(){var a;return(a=this._lastEvents.current)==null?void 0:a.event.altKey},isCtrlKeyPressed(){var a;return(a=this._lastEvents.current)==null?void 0:a.event.ctrlKey},isMetaKeyPressed(){var a;return(a=this._lastEvents.current)==null?void 0:a.event.metaKey},getPressedKey(){var a;return(a=this._lastEvents.current)==null?void 0:a.event.key}}),He=Jh,Qh=p(Xs());function ke(a){let l=L.PM.activeLang;return(0,Qh.default)(Ys[l],a)||(0,Qh.default)(Ys.en,a)||a}function To(a){for(let l=0;l<a.length;l+=1){let h=a[l];if(Array.isArray(h)){if(To(h))return!0}else if(h!=null&&h!=="")return!0}return!1}function Ha(a){return a.reduce((l,h)=>{if(h.length!==0){let d=Array.isArray(h)?Ha(h):h;Array.isArray(d)?d.length!==0&&l.push(d):l.push(d)}return l},[])}function _d(a,l,h){let d={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:m,b:x,f:b}=d,E=a.lng,M=a.lat,A=h,K=Math.PI,j=l*K/180,vt=Math.sin(j),bt=Math.cos(j),Vt=(1-b)*Math.tan(M*K/180),re=1/Math.sqrt(1+Vt*Vt),ce=Vt*re,We=Math.atan2(Vt,bt),q=re*vt,Q=1-q*q,lt=Q*(m*m-x*x)/(x*x),Lt=1+lt/16384*(4096+lt*(-768+lt*(320-175*lt))),pt=lt/1024*(256+lt*(-128+lt*(74-47*lt))),Ct=A/(x*Lt),I=2*Math.PI,N,F,B;for(;Math.abs(Ct-I)>1e-12;){N=Math.cos(2*We+Ct),F=Math.sin(Ct),B=Math.cos(Ct);let zt=pt*F*(N+pt/4*(B*(-1+2*N*N)-pt/6*N*(-3+4*F*F)*(-3+4*N*N)));I=Ct,Ct=A/(x*Lt)+zt}let z=ce*F-re*B*bt,G=Math.atan2(ce*B+re*F*bt,(1-b)*Math.sqrt(q*q+z*z)),et=Math.atan2(F*vt,re*B-ce*F*bt),tt=b/16*Q*(4+b*(4-3*Q)),at=et-(1-tt)*b*q*(Ct+tt*F*(N+tt*B*(-1+2*N*N))),_t=E+at*180/K,mt=G*180/K;return L.latLng(_t,mt)}function Fu(a,l,h,d,m=!0){let x,b,E,M=[];for(let A=0;A<h;A+=1){if(m)x=A*360/h+d,b=_d(a,x,l),E=L.latLng(b.lng,b.lat);else{let K=a.lat+Math.cos(2*A*Math.PI/h)*l,j=a.lng+Math.sin(2*A*Math.PI/h)*l;E=L.latLng(K,j)}M.push(E)}return M}function yd(a,l,h){l=(l+360)%360;let d=Math.PI/180,m=180/Math.PI,{R:x}=L.CRS.Earth,b=a.lng*d,E=a.lat*d,M=l*d,A=Math.sin(E),K=Math.cos(E),j=Math.cos(h/x),vt=Math.sin(h/x),bt=Math.asin(A*j+K*vt*Math.cos(M)),Vt=b+Math.atan2(Math.sin(M)*vt*K,j-A*Math.sin(bt));Vt*=m;let re=Vt-360,ce=Vt<-180?Vt+360:Vt;return Vt=Vt>180?re:ce,L.latLng([bt*m,Vt])}function zu(a,l,h){let d=a.latLngToContainerPoint(l),m=a.latLngToContainerPoint(h),x=Math.atan2(m.y-d.y,m.x-d.x)*180/Math.PI+90;return x+=x<0?360:0,x}function Gu(a,l,h,d){let m=zu(a,l,h);return yd(l,m,d)}function vd(a,l,h="asc"){if(!l||Object.keys(l).length===0)return(M,A)=>M-A;let d=Object.keys(l),m,x=d.length-1,b={};for(;x>=0;)m=d[x],b[m.toLowerCase()]=l[m],x-=1;function E(M){if(M instanceof L.Marker)return"Marker";if(M instanceof L.Circle)return"Circle";if(M instanceof L.CircleMarker)return"CircleMarker";if(M instanceof L.Rectangle)return"Rectangle";if(M instanceof L.Polygon)return"Polygon";if(M instanceof L.Polyline)return"Line"}return(M,A)=>{let K,j;if(K=E(M.layer).toLowerCase(),j=E(A.layer).toLowerCase(),!K||!j)return 0;let vt=K in b?b[K]:Number.MAX_SAFE_INTEGER,bt=j in b?b[j]:Number.MAX_SAFE_INTEGER,Vt=0;return vt<bt?Vt=-1:vt>bt&&(Vt=1),h==="desc"?Vt*-1:Vt}}function Ji(a,l=a.getLatLngs()){return a instanceof L.Polygon?L.polygon(l).getLatLngs():L.polyline(l).getLatLngs()}function tf(a,l){var h,d,m,x;if((d=(h=l.options.crs)==null?void 0:h.projection)!=null&&d.MAX_LATITUDE){let b=(x=(m=l.options.crs)==null?void 0:m.projection)==null?void 0:x.MAX_LATITUDE;a.lat=Math.max(Math.min(b,a.lat),-b)}return a}function Ir(a){return a.options.renderer||a._map&&(a._map._getPaneRenderer(a.options.pane)||a._map.options.renderer||a._map._renderer)||a._renderer}var xd=L.Class.extend({includes:[hc,ur,$h,md,Bu],initialize(a){this.map=a,this.Draw=new L.PM.Draw(a),this.Toolbar=new L.PM.Toolbar(a),this.Keyboard=He(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(a)},setLang(a="en",l,h="en"){if(a=a.trim().toLowerCase(),!/^[a-z]{2}$/.test(a)){let m=a.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(m){let x=[`${m[1]}_${m[2]}`,`${m[1]}`];for(let b of x)if(Ys[b]){a=b;break}}}let d=L.PM.activeLang;l&&(Ys[a]=(0,Re.default)(Ys[h],l)),L.PM.activeLang=a,this.map.pm.Toolbar.reinit(),this._fireLangChange(d,a,h,Ys[a])},addControls(a){this.Toolbar.addControls(a)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(a="Polygon",l){a==="Poly"&&(a="Polygon"),this.Draw.enable(a,l)},disableDraw(a="Polygon"){a==="Poly"&&(a="Polygon"),this.Draw.disable(a)},setPathOptions(a,l={}){let h=l.ignoreShapes||[],d=l.merge||!1;this.map.pm.Draw.shapes.forEach(m=>{h.indexOf(m)===-1&&this.map.pm.Draw[m].setPathOptions(a,d)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(a){let l=(0,Re.default)(this.globalOptions,a);l.editable&&(l.resizeableCircleMarker=l.editable,delete l.editable);let h=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!l.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),h=!0);let d=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!l.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),d=!0),this.map.pm.Draw.shapes.forEach(m=>{this.map.pm.Draw[m].setOptions(l)}),h&&this.map.pm.Draw.CircleMarker.enable(),d&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(m=>{m.pm.setOptions(l)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=l,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(a=>{a.pm.enabled()&&a.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(a){return this.Draw.Cut.enable(a)},toggleGlobalCutMode(a){return this.Draw.Cut.toggle(a)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(a=!1){let l=L.PM.Utils.findLayers(this.map);if(!a)return l;let h=L.featureGroup();return h._pmTempLayer=!0,l.forEach(d=>{h.addLayer(d)}),h},getGeomanDrawLayers(a=!1){let l=L.PM.Utils.findLayers(this.map).filter(d=>d._drawnByGeoman===!0);if(!a)return l;let h=L.featureGroup();return h._pmTempLayer=!0,l.forEach(d=>{h.addLayer(d)}),h},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(a){this._touchEventCounter===0&&(L.DomEvent.on(a,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(a,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(a){this._touchEventCounter===1&&(L.DomEvent.off(a,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(a,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(a){Ir(this.map)._onMouseMove(this._createMouseEvent("mousemove",a))},_canvasTouchClick(a){let l="";a.type==="touchstart"||a.type==="pointerdown"?l="mousedown":(a.type==="touchend"||a.type==="pointerup"||a.type==="touchcancel"||a.type==="pointercancel")&&(l="mouseup"),l&&Ir(this.map)._onClick(this._createMouseEvent(l,a))},_createMouseEvent(a,l){let h,d=l.touches[0]||l.changedTouches[0];try{h=new MouseEvent(a,{bubbles:l.bubbles,cancelable:l.cancelable,view:l.view,detail:d.detail,screenX:d.screenX,screenY:d.screenY,clientX:d.clientX,clientY:d.clientY,ctrlKey:l.ctrlKey,altKey:l.altKey,shiftKey:l.shiftKey,metaKey:l.metaKey,button:l.button,relatedTarget:l.relatedTarget})}catch{h=document.createEvent("MouseEvents"),h.initMouseEvent(a,l.bubbles,l.cancelable,l.view,d.detail,d.screenX,d.screenY,d.clientX,d.clientY,l.ctrlKey,l.altKey,l.shiftKey,l.metaKey,l.button,l.relatedTarget)}return h}}),ef=xd,Js=L.Control.extend({includes:[Bu],options:{position:"topleft",disableByOtherButtons:!0},initialize(a){this._button=L.Util.extend({},this.options,a)},onAdd(a){return this._map=a,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let a=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),a?a.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(a){return typeof a=="boolean"?this._button.toggleStatus=a:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(a){a&&a.preventDefault(),!this._button.disabled&&(this._button.onClick(a,{button:this,event:a}),this._clicked(a),this._button.afterClick(a,{button:this,event:a}))},_makeButton(a){let l=this.options.position.indexOf("right")>-1?"pos-right":"",h=L.DomUtil.create("div",`button-container  ${l}`,this._container);a.title&&h.setAttribute("title",a.title);let d=L.DomUtil.create("a","leaflet-buttons-control-button",h);d.setAttribute("role","button"),d.setAttribute("tabindex","0"),d.href="#";let m=L.DomUtil.create("div",`leaflet-pm-actions-container ${l}`,h),x=a.actions,b={cancel:{text:ke("actions.cancel"),title:ke("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:ke("actions.finish"),title:ke("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:ke("actions.removeLastVertex"),title:ke("actions.removeLastVertex"),onClick(){this._map.pm.Draw[a.jsClass]._removeLastVertex()}},finish:{text:ke("actions.finish"),title:ke("actions.finish"),onClick(M){this._map.pm.Draw[a.jsClass]._finishShape(M)}}};a._preparedActions=x.map(M=>{let A=typeof M=="string"?M:M.name,K;if(b[A])K=b[A];else if(M.text)K=M;else return K;let j=L.DomUtil.create("a",`leaflet-pm-action ${l} action-${A}`,m);if(j.setAttribute("role","button"),j.setAttribute("tabindex","0"),j.href="#",K.title&&(j.title=K.title),j.innerHTML=K.text,L.DomEvent.disableClickPropagation(j),L.DomEvent.on(j,"click",L.DomEvent.stop),K._node=j,!a.disabled&&K.onClick){let vt=bt=>{bt.preventDefault();let Vt="",{buttons:re}=this._map.pm.Toolbar;for(let ce in re)if(re[ce]._button===a){Vt=ce;break}this._fireActionClick(K,Vt,a)};L.DomEvent.addListener(j,"click",vt,this),L.DomEvent.addListener(j,"click",K.onClick,this),L.DomEvent.addListener(j,"click",()=>this._updateActiveAction(a))}return K}),this._updateActiveAction(a),a.toggleStatus&&L.DomUtil.addClass(h,"active");let E=L.DomUtil.create("div","control-icon",d);return a.iconUrl&&E.setAttribute("src",a.iconUrl),a.className&&L.DomUtil.addClass(E,a.className),L.DomEvent.disableClickPropagation(d),L.DomEvent.on(d,"click",L.DomEvent.stop),a.disabled||(L.DomEvent.addListener(d,"click",this._onBtnClick,this),L.DomEvent.addListener(d,"click",this._triggerClick,this)),a.disabled&&(L.DomUtil.addClass(d,"pm-disabled"),d.setAttribute("aria-disabled","true")),h},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let a="",{buttons:l}=this._map.pm.Toolbar;for(let h in l)if(l[h]._button===this._button){a=h;break}this._fireButtonClick(a,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let a="pm-disabled",l=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(l,a),l.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(l,a),l.setAttribute("aria-disabled","false"))},_updateActiveAction(a){var l;(l=a._preparedActions)==null||l.forEach(h=>{h!=null&&h._node&&(h.isActive&&h.isActive.call(this)?L.DomUtil.addClass(h._node,"active-action"):L.DomUtil.removeClass(h._node,"active-action"))})}}),nf=Js;L.Control.PMButton=nf;var rf=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(a){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(a)},reinit(){let a=this.isVisible;this.removeControls(),this._defineButtons(),a&&this.addControls()},init(a){this.map=a,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(a){let l=`${a}Container`;return this[l]||(this[l]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${a} leaflet-bar leaflet-control`)),this[l]},getButtons(){return this.buttons},addControls(a=this.options){typeof a.editPolygon<"u"&&(a.editMode=a.editPolygon),typeof a.deleteLayer<"u"&&(a.removalMode=a.deleteLayer),L.Util.setOptions(this,a),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let a=this.getButtons(),l={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let h in a){let d=a[h];L.Util.setOptions(d,{className:l.geomanIcons[h]})}},removeControls(){let a=this.getButtons();for(let l in a)a[l].remove();this.isVisible=!1},toggleControls(a=this.options){this.isVisible?this.removeControls():this.addControls(a)},_addButton(a,l){return this.buttons[a]=l,this.options[a]=!!this.options[a]||!1,this.buttons[a]},triggerClickOnToggledButtons(a){for(let l in this.buttons){let h=this.buttons[l];h._button.disableByOtherButtons&&h!==a&&h.toggled()&&h._triggerClick()}},toggleButton(a,l,h=!0){a==="editPolygon"&&(a="editMode"),a==="deleteLayer"&&(a="removalMode");let d=a;return h&&this.triggerClickOnToggledButtons(this.buttons[d]),this.buttons[d]?this.buttons[d].toggle(l):!1},_defineButtons(){let a={className:"control-icon leaflet-pm-icon-marker",title:ke("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(vt,bt)=>{this.map.pm.Draw[bt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},l={title:ke("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(vt,bt)=>{this.map.pm.Draw[bt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},h={className:"control-icon leaflet-pm-icon-polyline",title:ke("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(vt,bt)=>{this.map.pm.Draw[bt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},d={title:ke("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(vt,bt)=>{this.map.pm.Draw[bt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},m={title:ke("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(vt,bt)=>{this.map.pm.Draw[bt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},x={title:ke("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(vt,bt)=>{this.map.pm.Draw[bt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},b={title:ke("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},E={title:ke("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},M={title:ke("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(vt,bt)=>{this.map.pm.Draw[bt.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},A={title:ke("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},K={title:ke("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},j={className:"control-icon leaflet-pm-icon-text",title:ke("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(vt,bt)=>{this.map.pm.Draw[bt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(a)),this._addButton("drawPolyline",new L.Control.PMButton(h)),this._addButton("drawRectangle",new L.Control.PMButton(x)),this._addButton("drawPolygon",new L.Control.PMButton(l)),this._addButton("drawCircle",new L.Control.PMButton(d)),this._addButton("drawCircleMarker",new L.Control.PMButton(m)),this._addButton("drawText",new L.Control.PMButton(j)),this._addButton("editMode",new L.Control.PMButton(b)),this._addButton("dragMode",new L.Control.PMButton(E)),this._addButton("cutPolygon",new L.Control.PMButton(M)),this._addButton("removalMode",new L.Control.PMButton(A)),this._addButton("rotateMode",new L.Control.PMButton(K))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let a=this.getButtons(),l=[];this.options.drawControls===!1&&(l=l.concat(Object.keys(a).filter(h=>!a[h]._button.tool))),this.options.editControls===!1&&(l=l.concat(Object.keys(a).filter(h=>a[h]._button.tool==="edit"))),this.options.optionsControls===!1&&(l=l.concat(Object.keys(a).filter(h=>a[h]._button.tool==="options"))),this.options.customControls===!1&&(l=l.concat(Object.keys(a).filter(h=>a[h]._button.tool==="custom")));for(let h in a)if(this.options[h]&&l.indexOf(h)===-1){let d=a[h]._button.tool;d||(d="draw"),a[h].setPosition(this._getBtnPosition(d)),a[h].addTo(this.map)}},_getBtnPosition(a){return this.options.positions&&this.options.positions[a]?this.options.positions[a]:this.options.position},setBlockPosition(a,l){this.options.positions[a]=l,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(a,l){if(l)typeof l!="object"&&(l={name:l});else throw new TypeError("Button has no name");let h=this._btnNameMapping(a);if(!l.name)throw new TypeError("Button has no name");if(this.buttons[l.name])throw new TypeError("Button with this name already exists");let d=this.map.pm.Draw.createNewDrawInstance(l.name,h);l={...this.buttons[h]._button,...l};let m=this.createCustomControl(l);return{drawInstance:d,control:m}},createCustomControl(a){if(!a.name)throw new TypeError("Button has no name");if(this.buttons[a.name])throw new TypeError("Button with this name already exists");a.onClick||(a.onClick=()=>{}),a.afterClick||(a.afterClick=()=>{}),a.toggle!==!1&&(a.toggle=!0),a.block&&(a.block=a.block.toLowerCase()),(!a.block||a.block==="draw")&&(a.block=""),a.className?a.className.indexOf("control-icon")===-1&&(a.className=`control-icon ${a.className}`):a.className="control-icon";let l={tool:a.block,className:a.className,title:a.title||"",jsClass:a.name,onClick:a.onClick,afterClick:a.afterClick,doToggle:a.toggle,toggleStatus:!1,disableOtherButtons:a.disableOtherButtons??!0,disableByOtherButtons:a.disableByOtherButtons??!0,cssToggle:a.toggle,position:this.options.position,actions:a.actions||[],disabled:!!a.disabled};this.options[a.name]!==!1&&(this.options[a.name]=!0);let h=this._addButton(a.name,new L.Control.PMButton(l));return this.changeControlOrder(),h},controlExists(a){return!!this.getButton(a)},getButton(a){return this.getButtons()[a]},getButtonsInBlock(a){let l={};if(a)for(let h in this.getButtons()){let d=this.getButtons()[h];(d._button.tool===a||a==="draw"&&!d._button.tool)&&(l[h]=d)}return l},changeControlOrder(a=[]){let l=this._shapeMapping(),h=[];a.forEach(x=>{l[x]?h.push(l[x]):h.push(x)});let d=this.getButtons(),m={};h.forEach(x=>{d[x]&&(m[x]=d[x])}),Object.keys(d).filter(x=>!d[x]._button.tool||d[x]._button.tool==="draw").forEach(x=>{h.indexOf(x)===-1&&(m[x]=d[x])}),Object.keys(d).filter(x=>d[x]._button.tool==="edit").forEach(x=>{h.indexOf(x)===-1&&(m[x]=d[x])}),Object.keys(d).filter(x=>d[x]._button.tool==="options").forEach(x=>{h.indexOf(x)===-1&&(m[x]=d[x])}),Object.keys(d).filter(x=>d[x]._button.tool==="custom").forEach(x=>{h.indexOf(x)===-1&&(m[x]=d[x])}),Object.keys(d).forEach(x=>{h.indexOf(x)===-1&&(m[x]=d[x])}),this.map.pm.Toolbar.buttons=m,this._showHideButtons()},getControlOrder(){let a=this.getButtons(),l=[];for(let h in a)l.push(h);return l},changeActionsOfControl(a,l){let h=this._btnNameMapping(a);if(!h)throw new TypeError("No name passed");if(!l)throw new TypeError("No actions passed");if(!this.buttons[h])throw new TypeError("Button with this name not exists");this.buttons[h]._button.actions=l,this.changeControlOrder()},setButtonDisabled(a,l){let h=this._btnNameMapping(a);l?this.buttons[h].disable():this.buttons[h].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(a){let l=this._shapeMapping();return l[a]?l[a]:a}}),pc=rf,Cd=p(Tu()),sf={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(a){a.forEach(l=>{if(Array.isArray(l)){this._assignEvents(l);return}l.off("drag",this._handleSnapping,this),l.on("drag",this._handleSnapping,this),l.off("dragend",this._cleanupSnapping,this),l.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(a){if(a){let l=a.target;l._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(l=>{l.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(a){var E,M,A;let l=a.target;if(l._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((E=a==null?void 0:a.originalEvent)==null?void 0:E.altKey)||((A=(M=this._map)==null?void 0:M.pm)==null?void 0:A.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let h=this._calcClosestLayer(l.getLatLng(),this._snapList);if(Object.keys(h).length===0)return!1;let d=h.layer instanceof L.Marker||h.layer instanceof L.CircleMarker||!this.options.snapSegment,m;d?m=h.latlng:m=this._checkPrioritiySnapping(h);let x=this.options.snapDistance,b={marker:l,shape:this._shape,snapLatLng:m,segment:h.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:h.layer,distance:h.distance};if(this._fireSnapDrag(b.marker,b),this._fireSnapDrag(this._layer,b),h.distance<x){l._orgLatLng=l.getLatLng(),l.setLatLng(m),l._snapped=!0,l._snapInfo=b;let K=()=>{this._snapLatLng=m,this._fireSnap(l,b),this._fireSnap(this._layer,b)},j=this._snapLatLng||{},vt=m||{};(j.lat!==vt.lat||j.lng!==vt.lng)&&K()}else this._snapLatLng&&(this._unsnap(b),l._snapped=!1,l._snapInfo=void 0,this._fireUnsnap(b.marker,b),this._fireUnsnap(this._layer,b));return!0},_createSnapList(){let a=[],l=[],h=this._map;h.off("layerremove",this._handleSnapLayerRemoval,this),h.on("layerremove",this._handleSnapLayerRemoval,this),h.eachLayer(d=>{if((d instanceof L.Polyline||d instanceof L.Marker||d instanceof L.CircleMarker||d instanceof L.ImageOverlay)&&d.options.snapIgnore!==!0){if(d.options.snapIgnore===void 0&&(!L.PM.optIn&&d.options.pmIgnore===!0||L.PM.optIn&&d.options.pmIgnore!==!1))return;(d instanceof L.Circle||d instanceof L.CircleMarker)&&d.pm&&d.pm._hiddenPolyCircle?a.push(d.pm._hiddenPolyCircle):d instanceof L.ImageOverlay&&(d=L.rectangle(d.getBounds())),a.push(d);let m=L.polyline([],{color:"red",pmIgnore:!0});m._pmTempLayer=!0,l.push(m),(d instanceof L.Circle||d instanceof L.CircleMarker)&&l.push(m)}}),a=a.filter(d=>this._layer!==d),a=a.filter(d=>d._latlng||d._latlngs&&To(d._latlngs)),a=a.filter(d=>!d._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let d=L.polyline([],{color:"red",pmIgnore:!0});d._pmTempLayer=!0,l.push(d)}),this._snapList=a.concat(this._otherSnapLayers)):this._snapList=a,this.debugIndicatorLines=l},_handleSnapLayerRemoval({layer:a}){if(!a._leaflet_id)return;let l=this._snapList.findIndex(h=>h._leaflet_id===a._leaflet_id);l>-1&&this._snapList.splice(l,1)},_calcClosestLayer(a,l){return this._calcClosestLayers(a,l,1)[0]},_calcClosestLayers(a,l,h=1){let d=[],m={};l.forEach((b,E)=>{var A;if(b._parentCopy&&b._parentCopy===this._layer||((A=b.getLatLngs)==null?void 0:A.call(b).flat(5).length)<2)return;let M=this._calcLayerDistances(a,b);if(M.distance=Math.floor(M.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[E]){let K=L.polyline([],{color:"red",pmIgnore:!0});K._pmTempLayer=!0,this.debugIndicatorLines[E]=K}this.debugIndicatorLines[E].setLatLngs([a,M.latlng])}h===1&&(m.distance===void 0||M.distance-5<=m.distance)?(M.distance+5<m.distance&&(d=[]),m=M,m.layer=b,d.push(m)):h!==1&&(m={},m=M,m.layer=b,d.push(m))}),h!==1&&(d=d.sort((b,E)=>b.distance-E.distance)),h===-1&&(h=d.length);let x=this._getClosestLayerByPriority(d,h);return L.Util.isArray(x)?x:[x]},_calcLayerDistances(a,l){let h=this._map,d=l instanceof L.Marker||l instanceof L.CircleMarker,m=l instanceof L.Polygon,x=a;if(d){let b=l.getLatLng();return{latlng:{...b},distance:this._getDistance(h,b,x)}}return this._calcLatLngDistances(x,l.getLatLngs(),h,m)},_calcLatLngDistances(a,l,h,d=!1){let m,x,b,E=M=>{M.forEach((A,K)=>{if(Array.isArray(A)){E(A);return}if(this.options.snapSegment){let j=A,vt;d?vt=K+1===M.length?0:K+1:vt=K+1===M.length?void 0:K+1;let bt=M[vt];if(bt){let Vt=this._getDistanceToSegment(h,a,j,bt);(x===void 0||Vt<x)&&(x=Vt,b=[j,bt])}}else{let j=this._getDistance(h,a,A);(x===void 0||j<x)&&(x=j,m=A)}})};return E(l),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(h,a,b[0],b[1])},segment:b,distance:x}:{latlng:m,distance:x}},_getClosestLayerByPriority(a,l=1){a=a.sort((b,E)=>b._leaflet_id-E._leaflet_id);let h=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],d=this._map.pm.globalOptions.snappingOrder||[],m=0,x={};return d.concat(h).forEach(b=>{x[b]||(m+=1,x[b]=m)}),a.sort(vd("instanceofShape",x)),l===1?a[0]||{}:a.slice(0,l)},_checkPrioritiySnapping(a){let l=this._map,h=a.segment[0],d=a.segment[1],m=a.latlng,x=m;if(this.options.snapVertex){let b=this._getDistance(l,h,m),E=this._getDistance(l,d,m),M=b<E?h:d,A=b<E?b:E;if(this.options.snapMiddle){let j=L.PM.Utils.calcMiddleLatLng(l,h,d),vt=this._getDistance(l,j,m);vt<b&&vt<E&&(M=j,A=vt)}let K=this.options.snapDistance;A<K&&(x=M)}return{...x}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(a,l,h,d){let m=a.getMaxZoom();m===1/0&&(m=a.getZoom());let x=a.project(l,m),b=a.project(h,m),E=a.project(d,m),M=L.LineUtil.closestPointOnSegment(x,b,E);return a.unproject(M,m)},_getDistanceToSegment(a,l,h,d){let m=a.latLngToContainerPoint(l),x=a.latLngToContainerPoint(h),b=a.latLngToContainerPoint(d);return L.LineUtil.pointToSegmentDistance(m,x,b)},_getDistance(a,l,h){return a.latLngToContainerPoint(l).distanceTo(a.latLngToContainerPoint(h))}},dc=sf,bd=L.Class.extend({includes:[dc,Bu],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(a){L.Util.setOptions(this,a),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(a){let l=new L.Icon.Default;l.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=l,this._map=a,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(h=>{this[h]=new L.PM.Draw[h](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(a,l=!1){l?this.options.pathOptions=(0,Cd.default)(this.options.pathOptions,a):this.options.pathOptions=a},getShapes(){return this.shapes},getShape(){return this._shape},enable(a,l){if(!a)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[a].enable(l)},disable(){this.shapes.forEach(a=>{this[a].disable()})},addControls(){this.shapes.forEach(a=>{this[a].addButton()})},getActiveShape(){let a;return this.shapes.forEach(l=>{this[l]._enabled&&(a=l)}),a},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let a=[];this._map.eachLayer(l=>{(l instanceof L.Polyline||l instanceof L.Marker||l instanceof L.Circle||l instanceof L.CircleMarker||l instanceof L.ImageOverlay)&&(l._pmTempLayer||a.push(l))}),this._enabled?a.forEach(l=>{L.PM.Utils.disablePopup(l)}):a.forEach(l=>{L.PM.Utils.enablePopup(l)})},createNewDrawInstance(a,l){let h=this._getShapeFromBtnName(l);if(this[a])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[h])throw new TypeError(`There is no class L.PM.Draw.${h}`);return this[a]=new L.PM.Draw[h](this._map),this[a].toolbarButtonName=a,this[a]._shape=a,this.shapes.push(a),this[l]&&this[a].setOptions(this[l].options),this[a].setOptions(this[a].options),this[a]},_getShapeFromBtnName(a){let l={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return l[a]?l[a]:this[a]?this[a]._shape:a},_finishLayer(a){a.pm&&(a.pm.setOptions(this.options),a.pm._shape=this._shape,a.pm._map=this._map),this._addDrawnLayerProp(a)},_addDrawnLayerProp(a){a._drawnByGeoman=!0},_setPane(a,l){l==="layerPane"?a.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":l==="vertexPane"?a.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":l==="markerPane"&&(a.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),lr=bd;lr.Marker=lr.extend({initialize(a){this._map=a,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(a){L.Util.setOptions(this,a),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(ke("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(l=>{this.isRelevantMarker(l)&&l.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(a=>{this.isRelevantMarker(a)&&a.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(a){this.enabled()?this.disable():this.enable(a)},isRelevantMarker(a){return a instanceof L.Marker&&a.pm&&!a._pmTempLayer&&!a.pm._initTextMarker},_syncHintMarker(a){if(this._hintMarker.setLatLng(a.latlng),this.options.snappable){let l=a;l.target=this._hintMarker,this._handleSnapping(l)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(a){if(!a.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(a.latlng);let l=this._hintMarker.getLatLng(),h=new L.Marker(l,this.options.markerStyle);this._setPane(h,"markerPane"),this._finishLayer(h),h.pm||(h.options.draggable=!1),h.addTo(this._map.pm._getContainingLayer()),h.pm&&this.options.markerEditable?h.pm.enable():h.dragging&&h.dragging.disable(),this._fireCreate(h),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var a,l;(a=this.options.markerStyle)!=null&&a.icon&&((l=this._hintMarker)==null||l.setIcon(this.options.markerStyle.icon))}});var _r=63710088e-1,of={centimeters:_r*100,centimetres:_r*100,degrees:_r/111325,feet:_r*3.28084,inches:_r*39.37,kilometers:_r/1e3,kilometres:_r/1e3,meters:_r,metres:_r,miles:_r/1609.344,millimeters:_r*1e3,millimetres:_r*1e3,nauticalmiles:_r/1852,radians:1,yards:_r*1.0936};function Ao(a,l,h){h===void 0&&(h={});var d={type:"Feature"};return(h.id===0||h.id)&&(d.id=h.id),h.bbox&&(d.bbox=h.bbox),d.properties=l||{},d.geometry=a,d}function Do(a,l,h){if(h===void 0&&(h={}),!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!gc(a[0])||!gc(a[1]))throw new Error("coordinates must contain numbers");var d={type:"Point",coordinates:a};return Ao(d,l,h)}function Qs(a,l,h){if(h===void 0&&(h={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");var d={type:"LineString",coordinates:a};return Ao(d,l,h)}function zr(a,l){l===void 0&&(l={});var h={type:"FeatureCollection"};return l.id&&(h.id=l.id),l.bbox&&(h.bbox=l.bbox),h.features=a,h}function Ed(a,l){l===void 0&&(l="kilometers");var h=of[l];if(!h)throw new Error(l+" units is invalid");return a*h}function Za(a,l){l===void 0&&(l="kilometers");var h=of[l];if(!h)throw new Error(l+" units is invalid");return a/h}function Gr(a){var l=a%(2*Math.PI);return l*180/Math.PI}function yi(a){var l=a%360;return l*Math.PI/180}function gc(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)}function Uu(a){var l,h,d={type:"FeatureCollection",features:[]};if(a.type==="Feature"?h=a.geometry:h=a,h.type==="LineString")l=[h.coordinates];else if(h.type==="MultiLineString")l=h.coordinates;else if(h.type==="MultiPolygon")l=[].concat.apply([],h.coordinates);else if(h.type==="Polygon")l=h.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return l.forEach(function(m){l.forEach(function(x){for(var b=0;b<m.length-1;b++)for(var E=b;E<x.length-1;E++)if(!(m===x&&(Math.abs(b-E)===1||b===0&&E===m.length-2&&m[b][0]===m[m.length-1][0]&&m[b][1]===m[m.length-1][1]))){var M=mc(m[b][0],m[b][1],m[b+1][0],m[b+1][1],x[E][0],x[E][1],x[E+1][0],x[E+1][1]);M&&d.features.push(Do([M[0],M[1]]))}})}),d}function mc(a,l,h,d,m,x,b,E){var M,A,K,j,vt,bt={x:null,y:null,onLine1:!1,onLine2:!1};return M=(E-x)*(h-a)-(b-m)*(d-l),M===0?bt.x!==null&&bt.y!==null?bt:!1:(A=l-x,K=a-m,j=(b-m)*A-(E-x)*K,vt=(h-a)*A-(d-l)*K,A=j/M,K=vt/M,bt.x=a+A*(h-a),bt.y=l+A*(d-l),A>=0&&A<=1&&(bt.onLine1=!0),K>=0&&K<=1&&(bt.onLine2=!0),bt.onLine1&&bt.onLine2?[bt.x,bt.y]:!1)}lr.Line=lr.extend({initialize(a){this._map=a,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(a){L.Util.setOptions(this,a),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(ke("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(a){this.enabled()?this.disable():this.enable(a)},_syncHintLine(){let a=this._layer.getLatLngs();if(a.length>0){let l=a[a.length-1];this._hintline.setLatLngs([l,this._hintMarker.getLatLng()])}},_syncHintMarker(a){if(this._hintMarker.setLatLng(a.latlng),this.options.snappable){let h=a;h.target=this._hintMarker,this._handleSnapping(h)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let l=this._layer._defaultShape().slice();l.push(this._hintMarker.getLatLng()),this._change(l)},hasSelfIntersection(){return Uu(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(a,l){let h=L.polyline(this._layer.getLatLngs());a&&(l||(l=this._hintMarker.getLatLng()),h.addLatLng(l));let d=Uu(h.toGeoJSON(15));this._doesSelfIntersect=d.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(d,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(a){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,a.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(a.latlng);let l=this._hintMarker.getLatLng(),h=this._layer.getLatLngs(),d=h[h.length-1];if(l.equals(h[0])||h.length>0&&l.equals(d)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:l,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(l);let m=this._createMarker(l);this._setTooltipText(),this._setHintLineAfterNewVertex(l),this._fireVertexAdded(m,void 0,l,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(a)},_setHintLineAfterNewVertex(a){this._hintline.setLatLngs([a,a])},_removeLastVertex(){let a=this._markers;if(a.length<=1){this.disable();return}let l=this._layer.getLatLngs(),h=a[a.length-1],{indexPath:d}=L.PM.Utils.findDeepMarkerIndex(a,h);a.pop(),this._layerGroup.removeLayer(h);let m=a[a.length-1],x=l.indexOf(m.getLatLng());l=l.slice(0,x+1),this._layer.setLatLngs(l),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(h,d,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let a=this._layer.getLatLngs();if(a.length<=1)return;let l=L.polyline(a,this.options.pathOptions);this._setPane(l,"layerPane"),this._finishLayer(l),l.addTo(this._map.pm._getContainingLayer()),this._fireCreate(l),this.options.snappable&&this._cleanupSnapping();let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))},_createMarker(a){let l=new L.Marker(a,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(l,"vertexPane"),l._pmTempLayer=!0,this._layerGroup.addLayer(l),this._markers.push(l),l.on("click",this._finishShape,this),l},_setTooltipText(){let{length:a}=this._layer.getLatLngs().flat(),l="";a<=1?l=ke("tooltips.continueLine"):l=ke("tooltips.finishLine"),this._hintMarker.setTooltipContent(l)},_change(a){this._fireChange(a,"Draw")},setStyle(){var a,l;(a=this._layer)==null||a.setStyle(this.options.templineStyle),(l=this._hintline)==null||l.setStyle(this.options.hintlineStyle)}}),lr.Polygon=lr.Line.extend({initialize(a){this._map=a,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(a){L.PM.Draw.Line.prototype.enable.call(this,a),this._layer.pm._shape="Polygon"},_createMarker(a){let l=new L.Marker(a,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(l,"vertexPane"),l._pmTempLayer=!0,this._layerGroup.addLayer(l),this._markers.push(l),this._layer.getLatLngs().flat().length===1?(l.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(l)-1,this.options.snappable&&this._cleanupSnapping()):l.on("click",()=>1),l},_setTooltipText(){let{length:a}=this._layer.getLatLngs().flat(),l="";a<=2?l=ke("tooltips.continueLine"):l=ke("tooltips.finishPoly"),this._hintMarker.setTooltipContent(l)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let a=this._layer.getLatLngs();if(a.length<=2)return;let l=L.polygon(a,this.options.pathOptions);this._setPane(l,"layerPane"),this._finishLayer(l),l.addTo(this._map.pm._getContainingLayer()),this._fireCreate(l),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))}}),lr.Rectangle=lr.extend({initialize(a){this._map=a,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(a){if(L.Util.setOptions(this,a),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(ke("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let l=0;l<2;l+=1){let h=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(h,"vertexPane"),h._pmTempLayer=!0,this._layerGroup.addLayer(h),this._styleMarkers.push(h)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(a){this.enabled()?this.disable():this.enable(a)},_placeStartingMarkers(a){this._hintMarker._snapped||this._hintMarker.setLatLng(a.latlng);let l=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(l),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(h=>{L.DomUtil.addClass(h._icon,"visible"),h.setLatLng(l)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(ke("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let a=this._startMarker.getLatLng();a&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([a,a]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(a){if(this._hintMarker.setLatLng(a.latlng),this.options.snappable){let h=a;h.target=this._hintMarker,this._handleSnapping(h)}let l=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(l,"Draw")},_syncRectangleSize(){let a=tf(this._startMarker.getLatLng(),this._map),l=tf(this._hintMarker.getLatLng(),this._map),h=L.PM.Utils._getRotatedRectangle(a,l,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(h),this.options.cursorMarker&&this._styleMarkers){let d=[];h.forEach(m=>{!m.equals(a,1e-8)&&!m.equals(l,1e-8)&&d.push(m)}),d.forEach((m,x)=>{try{this._styleMarkers[x].setLatLng(m)}catch{}})}},_findCorners(){let a=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(a[0],a[2],this.options.rectangleAngle||0,this._map)},_finishShape(a){this._hintMarker._snapped||this._hintMarker.setLatLng(a.latlng);let l=this._hintMarker.getLatLng(),h=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||h.equals(l))return;let d=L.rectangle([h,l],this.options.pathOptions);if(this.options.rectangleAngle){let x=L.PM.Utils._getRotatedRectangle(h,l,this.options.rectangleAngle||0,this._map);d.setLatLngs(x),d.pm&&d.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(d,"layerPane"),this._finishLayer(d),d.addTo(this._map.pm._getContainingLayer()),this._fireCreate(d);let m=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(m))},setStyle(){var a;(a=this._layer)==null||a.setStyle(this.options.pathOptions)}}),lr.CircleMarker=lr.extend({initialize(a){this._map=a,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(a){if(L.Util.setOptions(this,a),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let l={};L.extend(l,this.options.templineStyle),l.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),l),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(ke("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(ke("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(a=>{this.isRelevantMarker(a)&&a.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(a=>{this.isRelevantMarker(a)&&a.pm.disable()})},enabled(){return this._enabled},toggle(a){this.enabled()?this.disable():this.enable(a)},_placeCenterMarker(a){this._hintMarker._snapped||this._hintMarker.setLatLng(a.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let l=this._hintMarker.getLatLng();this._centerMarker.setLatLng(l),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let a=this._centerMarker.getLatLng();a&&(this._layer.setLatLng(a),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(ke("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let a=this._centerMarker.getLatLng(),l=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([a,l])},_syncCircleRadius(){let a=this._centerMarker.getLatLng(),l=this._hintMarker.getLatLng(),h=this._distanceCalculation(a,l);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(h)},_syncHintMarker(a){if(this._hintMarker.setLatLng(a.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let h=a;h.target=this._hintMarker,this._handleSnapping(h)}this._handleHintMarkerSnapping();let l=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(l,"Draw")},isRelevantMarker(a){return a instanceof L.CircleMarker&&!(a instanceof L.Circle)&&a.pm&&!a._pmTempLayer},_createMarker(a){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!a.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(a.latlng);let l=this._hintMarker.getLatLng(),h=new this._BaseCircleClass(l,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(h,"layerPane"),this._finishLayer(h),h.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(h),this._fireCreate(h),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(a){a.pm&&this.options.markerEditable&&a.pm.enable()},_finishShape(a){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(a.latlng);let l=this._centerMarker.getLatLng(),h=this._defaultRadius;if(this.options[this._editableOption]){let b=this._hintMarker.getLatLng();h=this._distanceCalculation(l,b),this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?h=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(h=this.options[this._maxRadiusOption])}let d={...this.options.pathOptions,radius:h},m=new this._BaseCircleClass(l,d);this._setPane(m,"layerPane"),this._finishLayer(m),m.addTo(this._map.pm._getContainingLayer()),m.pm&&m.pm._updateHiddenPolyCircle(),this._fireCreate(m);let x=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(x))},_getNewDestinationOfHintMarker(){let a=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return a;let l=this._centerMarker.getLatLng(),h=this._distanceCalculation(l,a);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?a=Gu(this._map,l,a,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(a=Gu(this._map,l,a,this._getMaxDistanceInMeter()))}return a},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let a=this._centerMarker.getLatLng(),l=this._hintMarker.getLatLng(),h=this._distanceCalculation(a,l);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var l,h;let a={};L.extend(a,this.options.templineStyle),this.options[this._editableOption]&&(a.radius=0),(l=this._layer)==null||l.setStyle(a),(h=this._hintline)==null||h.setStyle(this.options.hintlineStyle)},_distanceCalculation(a,l){return this._map.project(a).distanceTo(this._map.project(l))}}),lr.Circle=lr.CircleMarker.extend({initialize(a){this._map=a,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(a,l){return this._map.distance(a,l)}});function vi(a){if(!a)throw new Error("coord is required");if(!Array.isArray(a)){if(a.type==="Feature"&&a.geometry!==null&&a.geometry.type==="Point")return a.geometry.coordinates;if(a.type==="Point")return a.coordinates}if(Array.isArray(a)&&a.length>=2&&!Array.isArray(a[0])&&!Array.isArray(a[1]))return a;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Qi(a){if(Array.isArray(a))return a;if(a.type==="Feature"){if(a.geometry!==null)return a.geometry.coordinates}else if(a.coordinates)return a.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Vu(a){return a.type==="Feature"?a.geometry:a}function _c(a,l){return a.type==="FeatureCollection"?"FeatureCollection":a.type==="GeometryCollection"?"GeometryCollection":a.type==="Feature"&&a.geometry!==null?a.geometry.type:a.type}function yc(a,l,h){if(a!==null)for(var d,m,x,b,E,M,A,K=0,j=0,vt,bt=a.type,Vt=bt==="FeatureCollection",re=bt==="Feature",ce=Vt?a.features.length:1,We=0;We<ce;We++){A=Vt?a.features[We].geometry:re?a.geometry:a,vt=A?A.type==="GeometryCollection":!1,E=vt?A.geometries.length:1;for(var q=0;q<E;q++){var Q=0,lt=0;if(b=vt?A.geometries[q]:A,b!==null){M=b.coordinates;var Lt=b.type;switch(K=0,Lt){case null:break;case"Point":if(l(M,j,We,Q,lt)===!1)return!1;j++,Q++;break;case"LineString":case"MultiPoint":for(d=0;d<M.length;d++){if(l(M[d],j,We,Q,lt)===!1)return!1;j++,Lt==="MultiPoint"&&Q++}Lt==="LineString"&&Q++;break;case"Polygon":case"MultiLineString":for(d=0;d<M.length;d++){for(m=0;m<M[d].length-K;m++){if(l(M[d][m],j,We,Q,lt)===!1)return!1;j++}Lt==="MultiLineString"&&Q++,Lt==="Polygon"&&lt++}Lt==="Polygon"&&Q++;break;case"MultiPolygon":for(d=0;d<M.length;d++){for(lt=0,m=0;m<M[d].length;m++){for(x=0;x<M[d][m].length-K;x++){if(l(M[d][m][x],j,We,Q,lt)===!1)return!1;j++}lt++}Q++}break;case"GeometryCollection":for(d=0;d<b.geometries.length;d++)if(yc(b.geometries[d],l)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function kr(a,l){if(a.type==="Feature")l(a,0);else if(a.type==="FeatureCollection")for(var h=0;h<a.features.length&&l(a.features[h],h)!==!1;h++);}function oa(a,l,h){var d=h;return kr(a,function(m,x){x===0&&h===void 0?d=m:d=l(d,m,x)}),d}function Ld(a,l){var h,d,m,x,b,E,M,A,K,j,vt=0,bt=a.type==="FeatureCollection",Vt=a.type==="Feature",re=bt?a.features.length:1;for(h=0;h<re;h++){for(E=bt?a.features[h].geometry:Vt?a.geometry:a,A=bt?a.features[h].properties:Vt?a.properties:{},K=bt?a.features[h].bbox:Vt?a.bbox:void 0,j=bt?a.features[h].id:Vt?a.id:void 0,M=E?E.type==="GeometryCollection":!1,b=M?E.geometries.length:1,m=0;m<b;m++){if(x=M?E.geometries[m]:E,x===null){if(l(null,vt,A,K,j)===!1)return!1;continue}switch(x.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(l(x,vt,A,K,j)===!1)return!1;break}case"GeometryCollection":{for(d=0;d<x.geometries.length;d++)if(l(x.geometries[d],vt,A,K,j)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}vt++}}function Ai(a,l){Ld(a,function(h,d,m,x,b){var E=h===null?null:h.type;switch(E){case null:case"Point":case"LineString":case"Polygon":return l(Ao(h,m,{bbox:x,id:b}),d,0)===!1?!1:void 0}var M;switch(E){case"MultiPoint":M="Point";break;case"MultiLineString":M="LineString";break;case"MultiPolygon":M="Polygon";break}for(var A=0;A<h.coordinates.length;A++){var K=h.coordinates[A],j={type:M,coordinates:K};if(l(Ao(j,m),d,A)===!1)return!1}})}function wd(a){if(!a)throw new Error("geojson is required");var l=[];return Ai(a,function(h){aa(h,l)}),zr(l)}function aa(a,l){var h=[],d=a.geometry;if(d!==null){switch(d.type){case"Polygon":h=Qi(d);break;case"LineString":h=[Qi(d)]}h.forEach(function(m){var x=Sd(m,a.properties);x.forEach(function(b){b.id=l.length,l.push(b)})})}}function Sd(a,l){var h=[];return a.reduce(function(d,m){var x=Qs([d,m],l);return x.bbox=Wa(d,m),h.push(x),m}),h}function Wa(a,l){var h=a[0],d=a[1],m=l[0],x=l[1],b=h<m?h:m,E=d<x?d:x,M=h>m?h:m,A=d>x?d:x;return[b,E,M,A]}var ju=wd,qu=p(So(),1);function Pd(a,l){var h={},d=[];if(a.type==="LineString"&&(a=Ao(a)),l.type==="LineString"&&(l=Ao(l)),a.type==="Feature"&&l.type==="Feature"&&a.geometry!==null&&l.geometry!==null&&a.geometry.type==="LineString"&&l.geometry.type==="LineString"&&a.geometry.coordinates.length===2&&l.geometry.coordinates.length===2){var m=Ss(a,l);return m&&d.push(m),zr(d)}var x=(0,qu.default)();return x.load(ju(l)),kr(ju(a),function(b){kr(x.search(b),function(E){var M=Ss(b,E);if(M){var A=Qi(M).join(",");h[A]||(h[A]=!0,d.push(M))}})}),zr(d)}function Ss(a,l){var h=Qi(a),d=Qi(l);if(h.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(d.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var m=h[0][0],x=h[0][1],b=h[1][0],E=h[1][1],M=d[0][0],A=d[0][1],K=d[1][0],j=d[1][1],vt=(j-A)*(b-m)-(K-M)*(E-x),bt=(K-M)*(x-A)-(j-A)*(m-M),Vt=(b-m)*(x-A)-(E-x)*(m-M);if(vt===0)return null;var re=bt/vt,ce=Vt/vt;if(re>=0&&re<=1&&ce>=0&&ce<=1){var We=m+re*(b-m),q=x+re*(E-x);return Do([We,q])}return null}var ts=Pd,af=p(So(),1);function vc(a,l,h){h===void 0&&(h={});var d=vi(a),m=vi(l),x=yi(m[1]-d[1]),b=yi(m[0]-d[0]),E=yi(d[1]),M=yi(m[1]),A=Math.pow(Math.sin(x/2),2)+Math.pow(Math.sin(b/2),2)*Math.cos(E)*Math.cos(M);return Ed(2*Math.atan2(Math.sqrt(A),Math.sqrt(1-A)),h.units)}var No=vc;function Ps(a){var l=a[0],h=a[1],d=a[2],m=a[3],x=No(a.slice(0,2),[d,h]),b=No(a.slice(0,2),[l,m]);if(x>=b){var E=(h+m)/2;return[l,E-(d-l)/2,d,E+(d-l)/2]}else{var M=(l+d)/2;return[M-(m-h)/2,h,M+(m-h)/2,m]}}var Md=Ps;function to(a){var l=[1/0,1/0,-1/0,-1/0];return yc(a,function(h){l[0]>h[0]&&(l[0]=h[0]),l[1]>h[1]&&(l[1]=h[1]),l[2]<h[0]&&(l[2]=h[0]),l[3]<h[1]&&(l[3]=h[1])}),l}to.default=to;var Ka=to;function Ms(a,l){l===void 0&&(l={});var h=l.precision,d=l.coordinates,m=l.mutate;if(h=h==null||isNaN(h)?6:h,d=d==null||isNaN(d)?3:d,!a)throw new Error("<geojson> is required");if(typeof h!="number")throw new Error("<precision> must be a number");if(typeof d!="number")throw new Error("<coordinates> must be a number");(m===!1||m===void 0)&&(a=JSON.parse(JSON.stringify(a)));var x=Math.pow(10,h);return yc(a,function(b){Hu(b,x,d)}),a}function Hu(a,l,h){a.length>h&&a.splice(h,a.length);for(var d=0;d<a.length;d++)a[d]=Math.round(a[d]*l)/l;return a}var uf=Ms;function Zu(a,l,h){if(h===void 0&&(h={}),h.final===!0)return Wu(a,l);var d=vi(a),m=vi(l),x=yi(d[0]),b=yi(m[0]),E=yi(d[1]),M=yi(m[1]),A=Math.sin(b-x)*Math.cos(M),K=Math.cos(E)*Math.sin(M)-Math.sin(E)*Math.cos(M)*Math.cos(b-x);return Gr(Math.atan2(A,K))}function Wu(a,l){var h=Zu(l,a);return h=(h+180)%360,h}function Ku(a,l,h,d){d===void 0&&(d={});var m=vi(a),x=yi(m[0]),b=yi(m[1]),E=yi(h),M=Za(l,d.units),A=Math.asin(Math.sin(b)*Math.cos(M)+Math.cos(b)*Math.sin(M)*Math.cos(E)),K=x+Math.atan2(Math.sin(E)*Math.sin(M)*Math.cos(b),Math.cos(M)-Math.sin(b)*Math.sin(A)),j=Gr(K),vt=Gr(A);return Do([j,vt],d.properties)}function $u(a,l,h){h===void 0&&(h={});var d=Do([1/0,1/0],{dist:1/0}),m=0;return Ai(a,function(x){for(var b=Qi(x),E=0;E<b.length-1;E++){var M=Do(b[E]);M.properties.dist=No(l,M,h);var A=Do(b[E+1]);A.properties.dist=No(l,A,h);var K=No(M,A,h),j=Math.max(M.properties.dist,A.properties.dist),vt=Zu(M,A),bt=Ku(l,j,vt+90,h),Vt=Ku(l,j,vt-90,h),re=ts(Qs([bt.geometry.coordinates,Vt.geometry.coordinates]),Qs([M.geometry.coordinates,A.geometry.coordinates])),ce=null;re.features.length>0&&(ce=re.features[0],ce.properties.dist=No(l,ce,h),ce.properties.location=m+No(M,ce,h)),M.properties.dist<d.properties.dist&&(d=M,d.properties.index=E,d.properties.location=m),A.properties.dist<d.properties.dist&&(d=A,d.properties.index=E+1,d.properties.location=m+K),ce&&ce.properties.dist<d.properties.dist&&(d=ce,d.properties.index=E),m+=K}}),d}var ua=$u;function Xu(a,l){if(!a)throw new Error("line is required");if(!l)throw new Error("splitter is required");var h=_c(a),d=_c(l);if(h!=="LineString")throw new Error("line must be LineString");if(d==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(d==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var m=uf(l,{precision:7});switch(d){case"Point":return Ju(a,m);case"MultiPoint":return Yu(a,m);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Yu(a,ts(a,m))}}function Yu(a,l){var h=[],d=(0,af.default)();return Ai(l,function(m){if(h.forEach(function(E,M){E.id=M}),!h.length)h=Ju(a,m).features,h.forEach(function(E){E.bbox||(E.bbox=Md(Ka(E)))}),d.load(zr(h));else{var x=d.search(m);if(x.features.length){var b=lf(m,x);h=h.filter(function(E){return E.id!==b.id}),d.remove(b),kr(Ju(b,m),function(E){h.push(E),d.insert(E)})}}}),zr(h)}function Ju(a,l){var h=[],d=Qi(a)[0],m=Qi(a)[a.geometry.coordinates.length-1];if(la(d,vi(l))||la(m,vi(l)))return zr([a]);var x=(0,af.default)(),b=ju(a);x.load(b);var E=x.search(l);if(!E.features.length)return zr([a]);var M=lf(l,E),A=[d],K=oa(b,function(j,vt,bt){var Vt=Qi(vt)[1],re=vi(l);return bt===M.id?(j.push(re),h.push(Qs(j)),la(re,Vt)?[re]:[re,Vt]):(j.push(Vt),j)},A);return K.length>1&&h.push(Qs(K)),zr(h)}function lf(a,l){if(!l.features.length)throw new Error("lines must contain features");if(l.features.length===1)return l.features[0];var h,d=1/0;return kr(l,function(m){var x=ua(m,a),b=x.properties.dist;b<d&&(h=m,d=b)}),h}function la(a,l){return a[0]===l[0]&&a[1]===l[1]}var Id=Xu;function $a(a,l,h){if(h===void 0&&(h={}),!a)throw new Error("point is required");if(!l)throw new Error("polygon is required");var d=vi(a),m=Vu(l),x=m.type,b=l.bbox,E=m.coordinates;if(b&&hf(d,b)===!1)return!1;x==="Polygon"&&(E=[E]);for(var M=!1,A=0;A<E.length&&!M;A++)if(cf(d,E[A][0],h.ignoreBoundary)){for(var K=!1,j=1;j<E[A].length&&!K;)cf(d,E[A][j],!h.ignoreBoundary)&&(K=!0),j++;K||(M=!0)}return M}function cf(a,l,h){var d=!1;l[0][0]===l[l.length-1][0]&&l[0][1]===l[l.length-1][1]&&(l=l.slice(0,l.length-1));for(var m=0,x=l.length-1;m<l.length;x=m++){var b=l[m][0],E=l[m][1],M=l[x][0],A=l[x][1],K=a[1]*(b-M)+E*(M-a[0])+A*(a[0]-b)===0&&(b-a[0])*(M-a[0])<=0&&(E-a[1])*(A-a[1])<=0;if(K)return!h;var j=E>a[1]!=A>a[1]&&a[0]<(M-b)*(a[1]-E)/(A-E)+b;j&&(d=!d)}return d}function hf(a,l){return l[0]<=a[0]&&l[1]<=a[1]&&l[2]>=a[0]&&l[3]>=a[1]}function kd(a,l,h){h===void 0&&(h={});for(var d=vi(a),m=Qi(l),x=0;x<m.length-1;x++){var b=!1;if(h.ignoreEndVertices&&(x===0&&(b="start"),x===m.length-2&&(b="end"),x===0&&x+1===m.length-1&&(b="both")),es(m[x],m[x+1],d,b,typeof h.epsilon>"u"?null:h.epsilon))return!0}return!1}function es(a,l,h,d,m){var x=h[0],b=h[1],E=a[0],M=a[1],A=l[0],K=l[1],j=h[0]-E,vt=h[1]-M,bt=A-E,Vt=K-M,re=j*Vt-vt*bt;if(m!==null){if(Math.abs(re)>m)return!1}else if(re!==0)return!1;if(d){if(d==="start")return Math.abs(bt)>=Math.abs(Vt)?bt>0?E<x&&x<=A:A<=x&&x<E:Vt>0?M<b&&b<=K:K<=b&&b<M;if(d==="end")return Math.abs(bt)>=Math.abs(Vt)?bt>0?E<=x&&x<A:A<x&&x<=E:Vt>0?M<=b&&b<K:K<b&&b<=M;if(d==="both")return Math.abs(bt)>=Math.abs(Vt)?bt>0?E<x&&x<A:A<x&&x<E:Vt>0?M<b&&b<K:K<b&&b<M}else return Math.abs(bt)>=Math.abs(Vt)?bt>0?E<=x&&x<=A:A<=x&&x<=E:Vt>0?M<=b&&b<=K:K<=b&&b<=M;return!1}var eo=kd;function Td(a,l){var h=Vu(a),d=Vu(l),m=h.type,x=d.type,b=h.coordinates,E=d.coordinates;switch(m){case"Point":switch(x){case"Point":return tl(b,E);default:throw new Error("feature2 "+x+" geometry not supported")}case"MultiPoint":switch(x){case"Point":return Qu(h,d);case"MultiPoint":return Ad(h,d);default:throw new Error("feature2 "+x+" geometry not supported")}case"LineString":switch(x){case"Point":return eo(d,h,{ignoreEndVertices:!0});case"LineString":return Xa(h,d);case"MultiPoint":return ff(h,d);default:throw new Error("feature2 "+x+" geometry not supported")}case"Polygon":switch(x){case"Point":return $a(d,h,{ignoreBoundary:!0});case"LineString":return Nd(h,d);case"Polygon":return ca(h,d);case"MultiPoint":return Dd(h,d);default:throw new Error("feature2 "+x+" geometry not supported")}default:throw new Error("feature1 "+m+" geometry not supported")}}function Qu(a,l){var h,d=!1;for(h=0;h<a.coordinates.length;h++)if(tl(a.coordinates[h],l.coordinates)){d=!0;break}return d}function Ad(a,l){for(var h=0,d=l.coordinates;h<d.length;h++){for(var m=d[h],x=!1,b=0,E=a.coordinates;b<E.length;b++){var M=E[b];if(tl(m,M)){x=!0;break}}if(!x)return!1}return!0}function ff(a,l){for(var h=!1,d=0,m=l.coordinates;d<m.length;d++){var x=m[d];if(eo(x,a,{ignoreEndVertices:!0})&&(h=!0),!eo(x,a))return!1}return!!h}function Dd(a,l){for(var h=0,d=l.coordinates;h<d.length;h++){var m=d[h];if(!$a(m,a,{ignoreBoundary:!0}))return!1}return!0}function Xa(a,l){for(var h=!1,d=0,m=l.coordinates;d<m.length;d++){var x=m[d];if(eo({type:"Point",coordinates:x},a,{ignoreEndVertices:!0})&&(h=!0),!eo({type:"Point",coordinates:x},a,{ignoreEndVertices:!1}))return!1}return h}function Nd(a,l){var h=!1,d=0,m=Ka(a),x=Ka(l);if(!xc(m,x))return!1;for(d;d<l.coordinates.length-1;d++){var b=Rd(l.coordinates[d],l.coordinates[d+1]);if($a({type:"Point",coordinates:b},a,{ignoreBoundary:!0})){h=!0;break}}return h}function ca(a,l){if(a.type==="Feature"&&a.geometry===null||l.type==="Feature"&&l.geometry===null)return!1;var h=Ka(a),d=Ka(l);if(!xc(h,d))return!1;for(var m=Vu(l).coordinates,x=0,b=m;x<b.length;x++)for(var E=b[x],M=0,A=E;M<A.length;M++){var K=A[M];if(!$a(K,a))return!1}return!0}function xc(a,l){return!(a[0]>l[0]||a[2]<l[2]||a[1]>l[1]||a[3]<l[3])}function tl(a,l){return a[0]===l[0]&&a[1]===l[1]}function Rd(a,l){return[(a[0]+l[0])/2,(a[1]+l[1])/2]}var Is=p(Xs()),Cc=a=>()=>a,el=a=>{let l=a?(h,d)=>d.minus(h).abs().isLessThanOrEqualTo(a):Cc(!1);return(h,d)=>l(h,d)?0:h.comparedTo(d)};function Ya(a){let l=a?(h,d,m,x,b)=>h.exponentiatedBy(2).isLessThanOrEqualTo(x.minus(d).exponentiatedBy(2).plus(b.minus(m).exponentiatedBy(2)).times(a)):Cc(!1);return(h,d,m)=>{let x=h.x,b=h.y,E=m.x,M=m.y,A=b.minus(M).times(d.x.minus(E)).minus(x.minus(E).times(d.y.minus(M)));return l(A,x,b,E,M)?0:A.comparedTo(0)}}var Od=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,ha=Math.ceil,yr=Math.floor,Tr="[BigNumber Error] ",bc=Tr+"Number primitive has more than 15 significant digits: ",Di=1e14,Ie=14,Ec=9007199254740991,nl=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],ks=1e7,Ur=1e9;function pf(a){var l,h,d,m=q.prototype={constructor:q,toString:null,valueOf:null},x=new q(1),b=20,E=4,M=-7,A=21,K=-1e7,j=1e7,vt=!1,bt=1,Vt=0,re={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},ce="0123456789abcdefghijklmnopqrstuvwxyz",We=!0;function q(I,N){var F,B,z,G,et,tt,at,_t,mt=this;if(!(mt instanceof q))return new q(I,N);if(N==null){if(I&&I._isBigNumber===!0){mt.s=I.s,!I.c||I.e>j?mt.c=mt.e=null:I.e<K?mt.c=[mt.e=0]:(mt.e=I.e,mt.c=I.c.slice());return}if((tt=typeof I=="number")&&I*0==0){if(mt.s=1/I<0?(I=-I,-1):1,I===~~I){for(G=0,et=I;et>=10;et/=10,G++);G>j?mt.c=mt.e=null:(mt.e=G,mt.c=[I]);return}_t=String(I)}else{if(!Od.test(_t=String(I)))return d(mt,_t,tt);mt.s=_t.charCodeAt(0)==45?(_t=_t.slice(1),-1):1}(G=_t.indexOf("."))>-1&&(_t=_t.replace(".","")),(et=_t.search(/e/i))>0?(G<0&&(G=et),G+=+_t.slice(et+1),_t=_t.substring(0,et)):G<0&&(G=_t.length)}else{if(s(N,2,ce.length,"Base"),N==10&&We)return mt=new q(I),pt(mt,b+mt.e+1,E);if(_t=String(I),tt=typeof I=="number"){if(I*0!=0)return d(mt,_t,tt,N);if(mt.s=1/I<0?(_t=_t.slice(1),-1):1,q.DEBUG&&_t.replace(/^0\.0*|\./,"").length>15)throw Error(bc+I)}else mt.s=_t.charCodeAt(0)===45?(_t=_t.slice(1),-1):1;for(F=ce.slice(0,N),G=et=0,at=_t.length;et<at;et++)if(F.indexOf(B=_t.charAt(et))<0){if(B=="."){if(et>G){G=at;continue}}else if(!z&&(_t==_t.toUpperCase()&&(_t=_t.toLowerCase())||_t==_t.toLowerCase()&&(_t=_t.toUpperCase()))){z=!0,et=-1,G=0;continue}return d(mt,String(I),tt,N)}tt=!1,_t=h(_t,N,10,mt.s),(G=_t.indexOf("."))>-1?_t=_t.replace(".",""):G=_t.length}for(et=0;_t.charCodeAt(et)===48;et++);for(at=_t.length;_t.charCodeAt(--at)===48;);if(_t=_t.slice(et,++at)){if(at-=et,tt&&q.DEBUG&&at>15&&(I>Ec||I!==yr(I)))throw Error(bc+mt.s*I);if((G=G-et-1)>j)mt.c=mt.e=null;else if(G<K)mt.c=[mt.e=0];else{if(mt.e=G,mt.c=[],et=(G+1)%Ie,G<0&&(et+=Ie),et<at){for(et&&mt.c.push(+_t.slice(0,et)),at-=Ie;et<at;)mt.c.push(+_t.slice(et,et+=Ie));et=Ie-(_t=_t.slice(et)).length}else et-=at;for(;et--;_t+="0");mt.c.push(+_t)}}else mt.c=[mt.e=0]}q.clone=pf,q.ROUND_UP=0,q.ROUND_DOWN=1,q.ROUND_CEIL=2,q.ROUND_FLOOR=3,q.ROUND_HALF_UP=4,q.ROUND_HALF_DOWN=5,q.ROUND_HALF_EVEN=6,q.ROUND_HALF_CEIL=7,q.ROUND_HALF_FLOOR=8,q.EUCLID=9,q.config=q.set=function(I){var N,F;if(I!=null)if(typeof I=="object"){if(I.hasOwnProperty(N="DECIMAL_PLACES")&&(F=I[N],s(F,0,Ur,N),b=F),I.hasOwnProperty(N="ROUNDING_MODE")&&(F=I[N],s(F,0,8,N),E=F),I.hasOwnProperty(N="EXPONENTIAL_AT")&&(F=I[N],F&&F.pop?(s(F[0],-1e9,0,N),s(F[1],0,Ur,N),M=F[0],A=F[1]):(s(F,-1e9,Ur,N),M=-(A=F<0?-F:F))),I.hasOwnProperty(N="RANGE"))if(F=I[N],F&&F.pop)s(F[0],-1e9,-1,N),s(F[1],1,Ur,N),K=F[0],j=F[1];else if(s(F,-1e9,Ur,N),F)K=-(j=F<0?-F:F);else throw Error(Tr+N+" cannot be zero: "+F);if(I.hasOwnProperty(N="CRYPTO"))if(F=I[N],F===!!F)if(F)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))vt=F;else throw vt=!F,Error(Tr+"crypto unavailable");else vt=F;else throw Error(Tr+N+" not true or false: "+F);if(I.hasOwnProperty(N="MODULO_MODE")&&(F=I[N],s(F,0,9,N),bt=F),I.hasOwnProperty(N="POW_PRECISION")&&(F=I[N],s(F,0,Ur,N),Vt=F),I.hasOwnProperty(N="FORMAT"))if(F=I[N],typeof F=="object")re=F;else throw Error(Tr+N+" not an object: "+F);if(I.hasOwnProperty(N="ALPHABET"))if(F=I[N],typeof F=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(F))We=F.slice(0,10)=="0123456789",ce=F;else throw Error(Tr+N+" invalid: "+F)}else throw Error(Tr+"Object expected: "+I);return{DECIMAL_PLACES:b,ROUNDING_MODE:E,EXPONENTIAL_AT:[M,A],RANGE:[K,j],CRYPTO:vt,MODULO_MODE:bt,POW_PRECISION:Vt,FORMAT:re,ALPHABET:ce}},q.isBigNumber=function(I){if(!I||I._isBigNumber!==!0)return!1;if(!q.DEBUG)return!0;var N,F,B=I.c,z=I.e,G=I.s;t:if({}.toString.call(B)=="[object Array]"){if((G===1||G===-1)&&z>=-1e9&&z<=Ur&&z===yr(z)){if(B[0]===0){if(z===0&&B.length===1)return!0;break t}if(N=(z+1)%Ie,N<1&&(N+=Ie),String(B[0]).length==N){for(N=0;N<B.length;N++)if(F=B[N],F<0||F>=Di||F!==yr(F))break t;if(F!==0)return!0}}}else if(B===null&&z===null&&(G===null||G===1||G===-1))return!0;throw Error(Tr+"Invalid BigNumber: "+I)},q.maximum=q.max=function(){return lt(arguments,-1)},q.minimum=q.min=function(){return lt(arguments,1)},q.random=function(){var I=9007199254740992,N=Math.random()*I&2097151?function(){return yr(Math.random()*I)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(F){var B,z,G,et,tt,at=0,_t=[],mt=new q(x);if(F==null?F=b:s(F,0,Ur),et=ha(F/Ie),vt)if(crypto.getRandomValues){for(B=crypto.getRandomValues(new Uint32Array(et*=2));at<et;)tt=B[at]*131072+(B[at+1]>>>11),tt>=9e15?(z=crypto.getRandomValues(new Uint32Array(2)),B[at]=z[0],B[at+1]=z[1]):(_t.push(tt%1e14),at+=2);at=et/2}else if(crypto.randomBytes){for(B=crypto.randomBytes(et*=7);at<et;)tt=(B[at]&31)*281474976710656+B[at+1]*1099511627776+B[at+2]*4294967296+B[at+3]*16777216+(B[at+4]<<16)+(B[at+5]<<8)+B[at+6],tt>=9e15?crypto.randomBytes(7).copy(B,at):(_t.push(tt%1e14),at+=7);at=et/7}else throw vt=!1,Error(Tr+"crypto unavailable");if(!vt)for(;at<et;)tt=N(),tt<9e15&&(_t[at++]=tt%1e14);for(et=_t[--at],F%=Ie,et&&F&&(tt=nl[Ie-F],_t[at]=yr(et/tt)*tt);_t[at]===0;_t.pop(),at--);if(at<0)_t=[G=0];else{for(G=-1;_t[0]===0;_t.splice(0,1),G-=Ie);for(at=1,tt=_t[0];tt>=10;tt/=10,at++);at<Ie&&(G-=Ie-at)}return mt.e=G,mt.c=_t,mt}}(),q.sum=function(){for(var I=1,N=arguments,F=new q(N[0]);I<N.length;)F=F.plus(N[I++]);return F},h=function(){var I="0123456789";function N(F,B,z,G){for(var et,tt=[0],at,_t=0,mt=F.length;_t<mt;){for(at=tt.length;at--;tt[at]*=B);for(tt[0]+=G.indexOf(F.charAt(_t++)),et=0;et<tt.length;et++)tt[et]>z-1&&(tt[et+1]==null&&(tt[et+1]=0),tt[et+1]+=tt[et]/z|0,tt[et]%=z)}return tt.reverse()}return function(F,B,z,G,et){var tt,at,_t,mt,zt,le,ge,Ce,on=F.indexOf("."),fn=b,Qe=E;for(on>=0&&(mt=Vt,Vt=0,F=F.replace(".",""),Ce=new q(B),le=Ce.pow(F.length-on),Vt=mt,Ce.c=N(v(ni(le.c),le.e,"0"),10,z,I),Ce.e=Ce.c.length),ge=N(F,B,z,et?(tt=ce,I):(tt=I,ce)),_t=mt=ge.length;ge[--mt]==0;ge.pop());if(!ge[0])return tt.charAt(0);if(on<0?--_t:(le.c=ge,le.e=_t,le.s=G,le=l(le,Ce,fn,Qe,z),ge=le.c,zt=le.r,_t=le.e),at=_t+fn+1,on=ge[at],mt=z/2,zt=zt||at<0||ge[at+1]!=null,zt=Qe<4?(on!=null||zt)&&(Qe==0||Qe==(le.s<0?3:2)):on>mt||on==mt&&(Qe==4||zt||Qe==6&&ge[at-1]&1||Qe==(le.s<0?8:7)),at<1||!ge[0])F=zt?v(tt.charAt(1),-fn,tt.charAt(0)):tt.charAt(0);else{if(ge.length=at,zt)for(--z;++ge[--at]>z;)ge[at]=0,at||(++_t,ge=[1].concat(ge));for(mt=ge.length;!ge[--mt];);for(on=0,F="";on<=mt;F+=tt.charAt(ge[on++]));F=v(F,_t,tt.charAt(0))}return F}}(),l=function(){function I(B,z,G){var et,tt,at,_t,mt=0,zt=B.length,le=z%ks,ge=z/ks|0;for(B=B.slice();zt--;)at=B[zt]%ks,_t=B[zt]/ks|0,et=ge*at+_t*le,tt=le*at+et%ks*ks+mt,mt=(tt/G|0)+(et/ks|0)+ge*_t,B[zt]=tt%G;return mt&&(B=[mt].concat(B)),B}function N(B,z,G,et){var tt,at;if(G!=et)at=G>et?1:-1;else for(tt=at=0;tt<G;tt++)if(B[tt]!=z[tt]){at=B[tt]>z[tt]?1:-1;break}return at}function F(B,z,G,et){for(var tt=0;G--;)B[G]-=tt,tt=B[G]<z[G]?1:0,B[G]=tt*et+B[G]-z[G];for(;!B[0]&&B.length>1;B.splice(0,1));}return function(B,z,G,et,tt){var at,_t,mt,zt,le,ge,Ce,on,fn,Qe,pn,jr,xf,Vd,jd,no,Pc,is=B.s==z.s?1:-1,ri=B.c,qn=z.c;if(!ri||!ri[0]||!qn||!qn[0])return new q(!B.s||!z.s||(ri?qn&&ri[0]==qn[0]:!qn)?NaN:ri&&ri[0]==0||!qn?is*0:is/0);for(on=new q(is),fn=on.c=[],_t=B.e-z.e,is=G+_t+1,tt||(tt=Di,_t=ei(B.e/Ie)-ei(z.e/Ie),is=is/Ie|0),mt=0;qn[mt]==(ri[mt]||0);mt++);if(qn[mt]>(ri[mt]||0)&&_t--,is<0)fn.push(1),zt=!0;else{for(Vd=ri.length,no=qn.length,mt=0,is+=2,le=yr(tt/(qn[0]+1)),le>1&&(qn=I(qn,le,tt),ri=I(ri,le,tt),no=qn.length,Vd=ri.length),xf=no,Qe=ri.slice(0,no),pn=Qe.length;pn<no;Qe[pn++]=0);Pc=qn.slice(),Pc=[0].concat(Pc),jd=qn[0],qn[1]>=tt/2&&jd++;do{if(le=0,at=N(qn,Qe,no,pn),at<0){if(jr=Qe[0],no!=pn&&(jr=jr*tt+(Qe[1]||0)),le=yr(jr/jd),le>1)for(le>=tt&&(le=tt-1),ge=I(qn,le,tt),Ce=ge.length,pn=Qe.length;N(ge,Qe,Ce,pn)==1;)le--,F(ge,no<Ce?Pc:qn,Ce,tt),Ce=ge.length,at=1;else le==0&&(at=le=1),ge=qn.slice(),Ce=ge.length;if(Ce<pn&&(ge=[0].concat(ge)),F(Qe,ge,pn,tt),pn=Qe.length,at==-1)for(;N(qn,Qe,no,pn)<1;)le++,F(Qe,no<pn?Pc:qn,pn,tt),pn=Qe.length}else at===0&&(le++,Qe=[0]);fn[mt++]=le,Qe[0]?Qe[pn++]=ri[xf]||0:(Qe=[ri[xf]],pn=1)}while((xf++<Vd||Qe[0]!=null)&&is--);zt=Qe[0]!=null,fn[0]||fn.splice(0,1)}if(tt==Di){for(mt=1,is=fn[0];is>=10;is/=10,mt++);pt(on,G+(on.e=mt+_t*Ie-1)+1,et,zt)}else on.e=_t,on.r=+zt;return on}}();function Q(I,N,F,B){var z,G,et,tt,at;if(F==null?F=E:s(F,0,8),!I.c)return I.toString();if(z=I.c[0],et=I.e,N==null)at=ni(I.c),at=B==1||B==2&&(et<=M||et>=A)?g(at,et):v(at,et,"0");else if(I=pt(new q(I),N,F),G=I.e,at=ni(I.c),tt=at.length,B==1||B==2&&(N<=G||G<=M)){for(;tt<N;at+="0",tt++);at=g(at,G)}else if(N-=et,at=v(at,G,"0"),G+1>tt){if(--N>0)for(at+=".";N--;at+="0");}else if(N+=G-tt,N>0)for(G+1==tt&&(at+=".");N--;at+="0");return I.s<0&&z?"-"+at:at}function lt(I,N){for(var F,B,z=1,G=new q(I[0]);z<I.length;z++)B=new q(I[z]),(!B.s||(F=Ro(G,B))===N||F===0&&G.s===N)&&(G=B);return G}function Lt(I,N,F){for(var B=1,z=N.length;!N[--z];N.pop());for(z=N[0];z>=10;z/=10,B++);return(F=B+F*Ie-1)>j?I.c=I.e=null:F<K?I.c=[I.e=0]:(I.e=F,I.c=N),I}d=function(){var I=/^(-?)0([xbo])(?=\w[\w.]*$)/i,N=/^([^.]+)\.$/,F=/^\.([^.]+)$/,B=/^-?(Infinity|NaN)$/,z=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(G,et,tt,at){var _t,mt=tt?et:et.replace(z,"");if(B.test(mt))G.s=isNaN(mt)?null:mt<0?-1:1;else{if(!tt&&(mt=mt.replace(I,function(zt,le,ge){return _t=(ge=ge.toLowerCase())=="x"?16:ge=="b"?2:8,!at||at==_t?le:zt}),at&&(_t=at,mt=mt.replace(N,"$1").replace(F,"0.$1")),et!=mt))return new q(mt,_t);if(q.DEBUG)throw Error(Tr+"Not a"+(at?" base "+at:"")+" number: "+et);G.s=null}G.c=G.e=null}}();function pt(I,N,F,B){var z,G,et,tt,at,_t,mt,zt=I.c,le=nl;if(zt){t:{for(z=1,tt=zt[0];tt>=10;tt/=10,z++);if(G=N-z,G<0)G+=Ie,et=N,at=zt[_t=0],mt=yr(at/le[z-et-1]%10);else if(_t=ha((G+1)/Ie),_t>=zt.length)if(B){for(;zt.length<=_t;zt.push(0));at=mt=0,z=1,G%=Ie,et=G-Ie+1}else break t;else{for(at=tt=zt[_t],z=1;tt>=10;tt/=10,z++);G%=Ie,et=G-Ie+z,mt=et<0?0:yr(at/le[z-et-1]%10)}if(B=B||N<0||zt[_t+1]!=null||(et<0?at:at%le[z-et-1]),B=F<4?(mt||B)&&(F==0||F==(I.s<0?3:2)):mt>5||mt==5&&(F==4||B||F==6&&(G>0?et>0?at/le[z-et]:0:zt[_t-1])%10&1||F==(I.s<0?8:7)),N<1||!zt[0])return zt.length=0,B?(N-=I.e+1,zt[0]=le[(Ie-N%Ie)%Ie],I.e=-N||0):zt[0]=I.e=0,I;if(G==0?(zt.length=_t,tt=1,_t--):(zt.length=_t+1,tt=le[Ie-G],zt[_t]=et>0?yr(at/le[z-et]%le[et])*tt:0),B)for(;;)if(_t==0){for(G=1,et=zt[0];et>=10;et/=10,G++);for(et=zt[0]+=tt,tt=1;et>=10;et/=10,tt++);G!=tt&&(I.e++,zt[0]==Di&&(zt[0]=1));break}else{if(zt[_t]+=tt,zt[_t]!=Di)break;zt[_t--]=0,tt=1}for(G=zt.length;zt[--G]===0;zt.pop());}I.e>j?I.c=I.e=null:I.e<K&&(I.c=[I.e=0])}return I}function Ct(I){var N,F=I.e;return F===null?I.toString():(N=ni(I.c),N=F<=M||F>=A?g(N,F):v(N,F,"0"),I.s<0?"-"+N:N)}return m.absoluteValue=m.abs=function(){var I=new q(this);return I.s<0&&(I.s=1),I},m.comparedTo=function(I,N){return Ro(this,new q(I,N))},m.decimalPlaces=m.dp=function(I,N){var F,B,z,G=this;if(I!=null)return s(I,0,Ur),N==null?N=E:s(N,0,8),pt(new q(G),I+G.e+1,N);if(!(F=G.c))return null;if(B=((z=F.length-1)-ei(this.e/Ie))*Ie,z=F[z])for(;z%10==0;z/=10,B--);return B<0&&(B=0),B},m.dividedBy=m.div=function(I,N){return l(this,new q(I,N),b,E)},m.dividedToIntegerBy=m.idiv=function(I,N){return l(this,new q(I,N),0,1)},m.exponentiatedBy=m.pow=function(I,N){var F,B,z,G,et,tt,at,_t,mt,zt=this;if(I=new q(I),I.c&&!I.isInteger())throw Error(Tr+"Exponent not an integer: "+Ct(I));if(N!=null&&(N=new q(N)),tt=I.e>14,!zt.c||!zt.c[0]||zt.c[0]==1&&!zt.e&&zt.c.length==1||!I.c||!I.c[0])return mt=new q(Math.pow(+Ct(zt),tt?I.s*(2-c(I)):+Ct(I))),N?mt.mod(N):mt;if(at=I.s<0,N){if(N.c?!N.c[0]:!N.s)return new q(NaN);B=!at&&zt.isInteger()&&N.isInteger(),B&&(zt=zt.mod(N))}else{if(I.e>9&&(zt.e>0||zt.e<-1||(zt.e==0?zt.c[0]>1||tt&&zt.c[1]>=24e7:zt.c[0]<8e13||tt&&zt.c[0]<=9999975e7)))return G=zt.s<0&&c(I)?-0:0,zt.e>-1&&(G=1/G),new q(at?1/G:G);Vt&&(G=ha(Vt/Ie+2))}for(tt?(F=new q(.5),at&&(I.s=1),_t=c(I)):(z=Math.abs(+Ct(I)),_t=z%2),mt=new q(x);;){if(_t){if(mt=mt.times(zt),!mt.c)break;G?mt.c.length>G&&(mt.c.length=G):B&&(mt=mt.mod(N))}if(z){if(z=yr(z/2),z===0)break;_t=z%2}else if(I=I.times(F),pt(I,I.e+1,1),I.e>14)_t=c(I);else{if(z=+Ct(I),z===0)break;_t=z%2}zt=zt.times(zt),G?zt.c&&zt.c.length>G&&(zt.c.length=G):B&&(zt=zt.mod(N))}return B?mt:(at&&(mt=x.div(mt)),N?mt.mod(N):G?pt(mt,Vt,E,et):mt)},m.integerValue=function(I){var N=new q(this);return I==null?I=E:s(I,0,8),pt(N,N.e+1,I)},m.isEqualTo=m.eq=function(I,N){return Ro(this,new q(I,N))===0},m.isFinite=function(){return!!this.c},m.isGreaterThan=m.gt=function(I,N){return Ro(this,new q(I,N))>0},m.isGreaterThanOrEqualTo=m.gte=function(I,N){return(N=Ro(this,new q(I,N)))===1||N===0},m.isInteger=function(){return!!this.c&&ei(this.e/Ie)>this.c.length-2},m.isLessThan=m.lt=function(I,N){return Ro(this,new q(I,N))<0},m.isLessThanOrEqualTo=m.lte=function(I,N){return(N=Ro(this,new q(I,N)))===-1||N===0},m.isNaN=function(){return!this.s},m.isNegative=function(){return this.s<0},m.isPositive=function(){return this.s>0},m.isZero=function(){return!!this.c&&this.c[0]==0},m.minus=function(I,N){var F,B,z,G,et=this,tt=et.s;if(I=new q(I,N),N=I.s,!tt||!N)return new q(NaN);if(tt!=N)return I.s=-N,et.plus(I);var at=et.e/Ie,_t=I.e/Ie,mt=et.c,zt=I.c;if(!at||!_t){if(!mt||!zt)return mt?(I.s=-N,I):new q(zt?et:NaN);if(!mt[0]||!zt[0])return zt[0]?(I.s=-N,I):new q(mt[0]?et:E==3?-0:0)}if(at=ei(at),_t=ei(_t),mt=mt.slice(),tt=at-_t){for((G=tt<0)?(tt=-tt,z=mt):(_t=at,z=zt),z.reverse(),N=tt;N--;z.push(0));z.reverse()}else for(B=(G=(tt=mt.length)<(N=zt.length))?tt:N,tt=N=0;N<B;N++)if(mt[N]!=zt[N]){G=mt[N]<zt[N];break}if(G&&(z=mt,mt=zt,zt=z,I.s=-I.s),N=(B=zt.length)-(F=mt.length),N>0)for(;N--;mt[F++]=0);for(N=Di-1;B>tt;){if(mt[--B]<zt[B]){for(F=B;F&&!mt[--F];mt[F]=N);--mt[F],mt[B]+=Di}mt[B]-=zt[B]}for(;mt[0]==0;mt.splice(0,1),--_t);return mt[0]?Lt(I,mt,_t):(I.s=E==3?-1:1,I.c=[I.e=0],I)},m.modulo=m.mod=function(I,N){var F,B,z=this;return I=new q(I,N),!z.c||!I.s||I.c&&!I.c[0]?new q(NaN):!I.c||z.c&&!z.c[0]?new q(z):(bt==9?(B=I.s,I.s=1,F=l(z,I,0,3),I.s=B,F.s*=B):F=l(z,I,0,bt),I=z.minus(F.times(I)),!I.c[0]&&bt==1&&(I.s=z.s),I)},m.multipliedBy=m.times=function(I,N){var F,B,z,G,et,tt,at,_t,mt,zt,le,ge,Ce,on,fn,Qe=this,pn=Qe.c,jr=(I=new q(I,N)).c;if(!pn||!jr||!pn[0]||!jr[0])return!Qe.s||!I.s||pn&&!pn[0]&&!jr||jr&&!jr[0]&&!pn?I.c=I.e=I.s=null:(I.s*=Qe.s,!pn||!jr?I.c=I.e=null:(I.c=[0],I.e=0)),I;for(B=ei(Qe.e/Ie)+ei(I.e/Ie),I.s*=Qe.s,at=pn.length,zt=jr.length,at<zt&&(Ce=pn,pn=jr,jr=Ce,z=at,at=zt,zt=z),z=at+zt,Ce=[];z--;Ce.push(0));for(on=Di,fn=ks,z=zt;--z>=0;){for(F=0,le=jr[z]%fn,ge=jr[z]/fn|0,et=at,G=z+et;G>z;)_t=pn[--et]%fn,mt=pn[et]/fn|0,tt=ge*_t+mt*le,_t=le*_t+tt%fn*fn+Ce[G]+F,F=(_t/on|0)+(tt/fn|0)+ge*mt,Ce[G--]=_t%on;Ce[G]=F}return F?++B:Ce.splice(0,1),Lt(I,Ce,B)},m.negated=function(){var I=new q(this);return I.s=-I.s||null,I},m.plus=function(I,N){var F,B=this,z=B.s;if(I=new q(I,N),N=I.s,!z||!N)return new q(NaN);if(z!=N)return I.s=-N,B.minus(I);var G=B.e/Ie,et=I.e/Ie,tt=B.c,at=I.c;if(!G||!et){if(!tt||!at)return new q(z/0);if(!tt[0]||!at[0])return at[0]?I:new q(tt[0]?B:z*0)}if(G=ei(G),et=ei(et),tt=tt.slice(),z=G-et){for(z>0?(et=G,F=at):(z=-z,F=tt),F.reverse();z--;F.push(0));F.reverse()}for(z=tt.length,N=at.length,z-N<0&&(F=at,at=tt,tt=F,N=z),z=0;N;)z=(tt[--N]=tt[N]+at[N]+z)/Di|0,tt[N]=Di===tt[N]?0:tt[N]%Di;return z&&(tt=[z].concat(tt),++et),Lt(I,tt,et)},m.precision=m.sd=function(I,N){var F,B,z,G=this;if(I!=null&&I!==!!I)return s(I,1,Ur),N==null?N=E:s(N,0,8),pt(new q(G),I,N);if(!(F=G.c))return null;if(z=F.length-1,B=z*Ie+1,z=F[z]){for(;z%10==0;z/=10,B--);for(z=F[0];z>=10;z/=10,B++);}return I&&G.e+1>B&&(B=G.e+1),B},m.shiftedBy=function(I){return s(I,-9007199254740991,Ec),this.times("1e"+I)},m.squareRoot=m.sqrt=function(){var I,N,F,B,z,G=this,et=G.c,tt=G.s,at=G.e,_t=b+4,mt=new q("0.5");if(tt!==1||!et||!et[0])return new q(!tt||tt<0&&(!et||et[0])?NaN:et?G:1/0);if(tt=Math.sqrt(+Ct(G)),tt==0||tt==1/0?(N=ni(et),(N.length+at)%2==0&&(N+="0"),tt=Math.sqrt(+N),at=ei((at+1)/2)-(at<0||at%2),tt==1/0?N="5e"+at:(N=tt.toExponential(),N=N.slice(0,N.indexOf("e")+1)+at),F=new q(N)):F=new q(tt+""),F.c[0]){for(at=F.e,tt=at+_t,tt<3&&(tt=0);;)if(z=F,F=mt.times(z.plus(l(G,z,_t,1))),ni(z.c).slice(0,tt)===(N=ni(F.c)).slice(0,tt))if(F.e<at&&--tt,N=N.slice(tt-3,tt+1),N=="9999"||!B&&N=="4999"){if(!B&&(pt(z,z.e+b+2,0),z.times(z).eq(G))){F=z;break}_t+=4,tt+=4,B=1}else{(!+N||!+N.slice(1)&&N.charAt(0)=="5")&&(pt(F,F.e+b+2,1),I=!F.times(F).eq(G));break}}return pt(F,F.e+b+1,E,I)},m.toExponential=function(I,N){return I!=null&&(s(I,0,Ur),I++),Q(this,I,N,1)},m.toFixed=function(I,N){return I!=null&&(s(I,0,Ur),I=I+this.e+1),Q(this,I,N)},m.toFormat=function(I,N,F){var B,z=this;if(F==null)I!=null&&N&&typeof N=="object"?(F=N,N=null):I&&typeof I=="object"?(F=I,I=N=null):F=re;else if(typeof F!="object")throw Error(Tr+"Argument not an object: "+F);if(B=z.toFixed(I,N),z.c){var G,et=B.split("."),tt=+F.groupSize,at=+F.secondaryGroupSize,_t=F.groupSeparator||"",mt=et[0],zt=et[1],le=z.s<0,ge=le?mt.slice(1):mt,Ce=ge.length;if(at&&(G=tt,tt=at,at=G,Ce-=G),tt>0&&Ce>0){for(G=Ce%tt||tt,mt=ge.substr(0,G);G<Ce;G+=tt)mt+=_t+ge.substr(G,tt);at>0&&(mt+=_t+ge.slice(G)),le&&(mt="-"+mt)}B=zt?mt+(F.decimalSeparator||"")+((at=+F.fractionGroupSize)?zt.replace(new RegExp("\\d{"+at+"}\\B","g"),"$&"+(F.fractionGroupSeparator||"")):zt):mt}return(F.prefix||"")+B+(F.suffix||"")},m.toFraction=function(I){var N,F,B,z,G,et,tt,at,_t,mt,zt,le,ge=this,Ce=ge.c;if(I!=null&&(tt=new q(I),!tt.isInteger()&&(tt.c||tt.s!==1)||tt.lt(x)))throw Error(Tr+"Argument "+(tt.isInteger()?"out of range: ":"not an integer: ")+Ct(tt));if(!Ce)return new q(ge);for(N=new q(x),_t=F=new q(x),B=at=new q(x),le=ni(Ce),G=N.e=le.length-ge.e-1,N.c[0]=nl[(et=G%Ie)<0?Ie+et:et],I=!I||tt.comparedTo(N)>0?G>0?N:_t:tt,et=j,j=1/0,tt=new q(le),at.c[0]=0;mt=l(tt,N,0,1),z=F.plus(mt.times(B)),z.comparedTo(I)!=1;)F=B,B=z,_t=at.plus(mt.times(z=_t)),at=z,N=tt.minus(mt.times(z=N)),tt=z;return z=l(I.minus(F),B,0,1),at=at.plus(z.times(_t)),F=F.plus(z.times(B)),at.s=_t.s=ge.s,G=G*2,zt=l(_t,B,G,E).minus(ge).abs().comparedTo(l(at,F,G,E).minus(ge).abs())<1?[_t,B]:[at,F],j=et,zt},m.toNumber=function(){return+Ct(this)},m.toPrecision=function(I,N){return I!=null&&s(I,1,Ur),Q(this,I,N,2)},m.toString=function(I){var N,F=this,B=F.s,z=F.e;return z===null?B?(N="Infinity",B<0&&(N="-"+N)):N="NaN":(I==null?N=z<=M||z>=A?g(ni(F.c),z):v(ni(F.c),z,"0"):I===10&&We?(F=pt(new q(F),b+z+1,E),N=v(ni(F.c),F.e,"0")):(s(I,2,ce.length,"Base"),N=h(v(ni(F.c),z,"0"),10,I,B,!0)),B<0&&F.c[0]&&(N="-"+N)),N},m.valueOf=m.toJSON=function(){return Ct(this)},m._isBigNumber=!0,m[Symbol.toStringTag]="BigNumber",m[Symbol.for("nodejs.util.inspect.custom")]=m.valueOf,a!=null&&q.set(a),q}function ei(a){var l=a|0;return a>0||a===l?l:l-1}function ni(a){for(var l,h,d=1,m=a.length,x=a[0]+"";d<m;){for(l=a[d++]+"",h=Ie-l.length;h--;l="0"+l);x+=l}for(m=x.length;x.charCodeAt(--m)===48;);return x.slice(0,m+1||1)}function Ro(a,l){var h,d,m=a.c,x=l.c,b=a.s,E=l.s,M=a.e,A=l.e;if(!b||!E)return null;if(h=m&&!m[0],d=x&&!x[0],h||d)return h?d?0:-E:b;if(b!=E)return b;if(h=b<0,d=M==A,!m||!x)return d?0:!m^h?1:-1;if(!d)return M>A^h?1:-1;for(E=(M=m.length)<(A=x.length)?M:A,b=0;b<E;b++)if(m[b]!=x[b])return m[b]>x[b]^h?1:-1;return M==A?0:M>A^h?1:-1}function s(a,l,h,d){if(a<l||a>h||a!==yr(a))throw Error(Tr+(d||"Argument")+(typeof a=="number"?a<l||a>h?" out of range: ":" not an integer: ":" not a primitive number: ")+String(a))}function c(a){var l=a.c.length-1;return ei(a.e/Ie)==l&&a.c[l]%2!=0}function g(a,l){return(a.length>1?a.charAt(0)+"."+a.slice(1):a)+(l<0?"e":"e+")+l}function v(a,l,h){var d,m;if(l<0){for(m=h+".";++l;m+=h);a=m+a}else if(d=a.length,++l>d){for(m=h,l-=d;--l;m+=h);a+=m}else l<d&&(a=a.slice(0,l)+"."+a.slice(l));return a}var w=pf(),D=w,J=class{constructor(a){me(this,"key");me(this,"left",null);me(this,"right",null);this.key=a}},gt=class extends J{constructor(a){super(a)}},St=class{constructor(){me(this,"size",0);me(this,"modificationCount",0);me(this,"splayCount",0)}splay(a){let l=this.root;if(l==null)return this.compare(a,a),-1;let h=null,d=null,m=null,x=null,b=l,E=this.compare,M;for(;;)if(M=E(b.key,a),M>0){let A=b.left;if(A==null||(M=E(A.key,a),M>0&&(b.left=A.right,A.right=b,b=A,A=b.left,A==null)))break;h==null?d=b:h.left=b,h=b,b=A}else if(M<0){let A=b.right;if(A==null||(M=E(A.key,a),M<0&&(b.right=A.left,A.left=b,b=A,A=b.right,A==null)))break;m==null?x=b:m.right=b,m=b,b=A}else break;return m!=null&&(m.right=b.left,b.left=x),h!=null&&(h.left=b.right,b.right=d),this.root!==b&&(this.root=b,this.splayCount++),M}splayMin(a){let l=a,h=l.left;for(;h!=null;){let d=h;l.left=d.right,d.right=l,l=d,h=l.left}return l}splayMax(a){let l=a,h=l.right;for(;h!=null;){let d=h;l.right=d.left,d.left=l,l=d,h=l.right}return l}_delete(a){if(this.root==null||this.splay(a)!=0)return null;let l=this.root,h=l,d=l.left;if(this.size--,d==null)this.root=l.right;else{let m=l.right;l=this.splayMax(d),l.right=m,this.root=l}return this.modificationCount++,h}addNewRoot(a,l){this.size++,this.modificationCount++;let h=this.root;if(h==null){this.root=a;return}l<0?(a.left=h,a.right=h.right,h.right=null):(a.right=h,a.left=h.left,h.left=null),this.root=a}_first(){let a=this.root;return a==null?null:(this.root=this.splayMin(a),this.root)}_last(){let a=this.root;return a==null?null:(this.root=this.splayMax(a),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(a){return this.validKey(a)&&this.splay(a)==0}defaultCompare(){return(a,l)=>a<l?-1:a>l?1:0}wrap(){return{getRoot:()=>this.root,setRoot:a=>{this.root=a},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:a=>{this.splayCount=a},splay:a=>this.splay(a),has:a=>this.has(a)}}},Ut=class Bc extends St{constructor(h,d){super();me(this,"root",null);me(this,"compare");me(this,"validKey");me(this,zm,"[object Set]");this.compare=h??this.defaultCompare(),this.validKey=d??(m=>m!=null&&m!=null)}delete(h){return this.validKey(h)?this._delete(h)!=null:!1}deleteAll(h){for(let d of h)this.delete(d)}forEach(h){let d=this[Symbol.iterator](),m;for(;m=d.next(),!m.done;)h(m.value,m.value,this)}add(h){let d=this.splay(h);return d!=0&&this.addNewRoot(new gt(h),d),this}addAndReturn(h){let d=this.splay(h);return d!=0&&this.addNewRoot(new gt(h),d),this.root.key}addAll(h){for(let d of h)this.add(d)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(h){if(h==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(h)<0)return this.root.key;let d=this.root.left;if(d==null)return null;let m=d.right;for(;m!=null;)d=m,m=d.right;return d.key}firstAfter(h){if(h==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(h)>0)return this.root.key;let d=this.root.right;if(d==null)return null;let m=d.left;for(;m!=null;)d=m,m=d.left;return d.key}retainAll(h){let d=new Bc(this.compare,this.validKey),m=this.modificationCount;for(let x of h){if(m!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(x)&&this.splay(x)==0&&d.add(this.root.key)}d.size!=this.size&&(this.root=d.root,this.size=d.size,this.modificationCount++)}lookup(h){return!this.validKey(h)||this.splay(h)!=0?null:this.root.key}intersection(h){let d=new Bc(this.compare,this.validKey);for(let m of this)h.has(m)&&d.add(m);return d}difference(h){let d=new Bc(this.compare,this.validKey);for(let m of this)h.has(m)||d.add(m);return d}union(h){let d=this.clone();return d.addAll(h),d}clone(){let h=new Bc(this.compare,this.validKey);return h.size=this.size,h.root=this.copyNode(this.root),h}copyNode(h){if(h==null)return null;function d(x,b){let E,M;do{if(E=x.left,M=x.right,E!=null){let A=new gt(E.key);b.left=A,d(E,A)}if(M!=null){let A=new gt(M.key);b.right=A,x=M,b=A}}while(M!=null)}let m=new gt(h.key);return d(h,m),m}toSet(){return this.clone()}entries(){return new ze(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(Gm=Symbol.iterator,zm=Symbol.toStringTag,Gm)](){return new Ee(this.wrap())}},se=class{constructor(a){me(this,"tree");me(this,"path",new Array);me(this,"modificationCount",null);me(this,"splayCount");this.tree=a,this.splayCount=a.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let a=this.path[this.path.length-1];return this.getValue(a)}rebuildPath(a){this.path.splice(0,this.path.length),this.tree.splay(a),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(a){for(;a!=null;)this.path.push(a),a=a.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let h=this.tree.getRoot();for(;h!=null;)this.path.push(h),h=h.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let a=this.path[this.path.length-1],l=a.right;if(l!=null){for(;l!=null;)this.path.push(l),l=l.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===a;)a=this.path.pop();return this.path.length>0}},Ee=class extends se{getValue(a){return a.key}},ze=class extends se{getValue(a){return[a.key,a.key]}},Ar=a=>a,Jn=a=>{if(a){let l=new Ut(el(a)),h=new Ut(el(a)),d=(x,b)=>b.addAndReturn(x),m=x=>({x:d(x.x,l),y:d(x.y,h)});return m({x:new D(0),y:new D(0)}),m}return Ar},Vr=a=>({set:l=>{In=Vr(l)},reset:()=>Vr(a),compare:el(a),snap:Jn(a),orient:Ya(a)}),In=Vr(),ns=(a,l)=>a.ll.x.isLessThanOrEqualTo(l.x)&&l.x.isLessThanOrEqualTo(a.ur.x)&&a.ll.y.isLessThanOrEqualTo(l.y)&&l.y.isLessThanOrEqualTo(a.ur.y),Lc=(a,l)=>{if(l.ur.x.isLessThan(a.ll.x)||a.ur.x.isLessThan(l.ll.x)||l.ur.y.isLessThan(a.ll.y)||a.ur.y.isLessThan(l.ll.y))return null;let h=a.ll.x.isLessThan(l.ll.x)?l.ll.x:a.ll.x,d=a.ur.x.isLessThan(l.ur.x)?a.ur.x:l.ur.x,m=a.ll.y.isLessThan(l.ll.y)?l.ll.y:a.ll.y,x=a.ur.y.isLessThan(l.ur.y)?a.ur.y:l.ur.y;return{ll:{x:h,y:m},ur:{x:d,y:x}}},rl=(a,l)=>a.x.times(l.y).minus(a.y.times(l.x)),df=(a,l)=>a.x.times(l.x).plus(a.y.times(l.y)),Ja=a=>df(a,a).sqrt(),Bd=(a,l,h)=>{let d={x:l.x.minus(a.x),y:l.y.minus(a.y)},m={x:h.x.minus(a.x),y:h.y.minus(a.y)};return rl(m,d).div(Ja(m)).div(Ja(d))},gf=(a,l,h)=>{let d={x:l.x.minus(a.x),y:l.y.minus(a.y)},m={x:h.x.minus(a.x),y:h.y.minus(a.y)};return df(m,d).div(Ja(m)).div(Ja(d))},On=(a,l,h)=>l.y.isZero()?null:{x:a.x.plus(l.x.div(l.y).times(h.minus(a.y))),y:h},Qa=(a,l,h)=>l.x.isZero()?null:{x:h,y:a.y.plus(l.y.div(l.x).times(h.minus(a.x)))},Fd=(a,l,h,d)=>{if(l.x.isZero())return Qa(h,d,a.x);if(d.x.isZero())return Qa(a,l,h.x);if(l.y.isZero())return On(h,d,a.y);if(d.y.isZero())return On(a,l,h.y);let m=rl(l,d);if(m.isZero())return null;let x={x:h.x.minus(a.x),y:h.y.minus(a.y)},b=rl(x,l).div(m),E=rl(x,d).div(m),M=a.x.plus(E.times(l.x)),A=h.x.plus(b.times(d.x)),K=a.y.plus(E.times(l.y)),j=h.y.plus(b.times(d.y)),vt=M.plus(A).div(2),bt=K.plus(j).div(2);return{x:vt,y:bt}},rs=class Mx{constructor(l,h){me(this,"point");me(this,"isLeft");me(this,"segment");me(this,"otherSE");me(this,"consumedBy");l.events===void 0?l.events=[this]:l.events.push(this),this.point=l,this.isLeft=h}static compare(l,h){let d=Mx.comparePoints(l.point,h.point);return d!==0?d:(l.point!==h.point&&l.link(h),l.isLeft!==h.isLeft?l.isLeft?1:-1:fa.compare(l.segment,h.segment))}static comparePoints(l,h){return l.x.isLessThan(h.x)?-1:l.x.isGreaterThan(h.x)?1:l.y.isLessThan(h.y)?-1:l.y.isGreaterThan(h.y)?1:0}link(l){if(l.point===this.point)throw new Error("Tried to link already linked events");let h=l.point.events;for(let d=0,m=h.length;d<m;d++){let x=h[d];this.point.events.push(x),x.point=this.point}this.checkForConsuming()}checkForConsuming(){let l=this.point.events.length;for(let h=0;h<l;h++){let d=this.point.events[h];if(d.segment.consumedBy===void 0)for(let m=h+1;m<l;m++){let x=this.point.events[m];x.consumedBy===void 0&&d.otherSE.point.events===x.otherSE.point.events&&d.segment.consume(x.segment)}}}getAvailableLinkedEvents(){let l=[];for(let h=0,d=this.point.events.length;h<d;h++){let m=this.point.events[h];m!==this&&!m.segment.ringOut&&m.segment.isInResult()&&l.push(m)}return l}getLeftmostComparator(l){let h=new Map,d=m=>{let x=m.otherSE;h.set(m,{sine:Bd(this.point,l.point,x.point),cosine:gf(this.point,l.point,x.point)})};return(m,x)=>{h.has(m)||d(m),h.has(x)||d(x);let{sine:b,cosine:E}=h.get(m),{sine:M,cosine:A}=h.get(x);return b.isGreaterThanOrEqualTo(0)&&M.isGreaterThanOrEqualTo(0)?E.isLessThan(A)?1:E.isGreaterThan(A)?-1:0:b.isLessThan(0)&&M.isLessThan(0)?E.isLessThan(A)?-1:E.isGreaterThan(A)?1:0:M.isLessThan(b)?-1:M.isGreaterThan(b)?1:0}}},zd=0,fa=class jf{constructor(l,h,d,m){me(this,"id");me(this,"leftSE");me(this,"rightSE");me(this,"rings");me(this,"windings");me(this,"ringOut");me(this,"consumedBy");me(this,"prev");me(this,"_prevInResult");me(this,"_beforeState");me(this,"_afterState");me(this,"_isInResult");this.id=++zd,this.leftSE=l,l.segment=this,l.otherSE=h,this.rightSE=h,h.segment=this,h.otherSE=l,this.rings=d,this.windings=m}static compare(l,h){let d=l.leftSE.point.x,m=h.leftSE.point.x,x=l.rightSE.point.x,b=h.rightSE.point.x;if(b.isLessThan(d))return 1;if(x.isLessThan(m))return-1;let E=l.leftSE.point.y,M=h.leftSE.point.y,A=l.rightSE.point.y,K=h.rightSE.point.y;if(d.isLessThan(m)){if(M.isLessThan(E)&&M.isLessThan(A))return 1;if(M.isGreaterThan(E)&&M.isGreaterThan(A))return-1;let j=l.comparePoint(h.leftSE.point);if(j<0)return 1;if(j>0)return-1;let vt=h.comparePoint(l.rightSE.point);return vt!==0?vt:-1}if(d.isGreaterThan(m)){if(E.isLessThan(M)&&E.isLessThan(K))return-1;if(E.isGreaterThan(M)&&E.isGreaterThan(K))return 1;let j=h.comparePoint(l.leftSE.point);if(j!==0)return j;let vt=l.comparePoint(h.rightSE.point);return vt<0?1:vt>0?-1:1}if(E.isLessThan(M))return-1;if(E.isGreaterThan(M))return 1;if(x.isLessThan(b)){let j=h.comparePoint(l.rightSE.point);if(j!==0)return j}if(x.isGreaterThan(b)){let j=l.comparePoint(h.rightSE.point);if(j<0)return 1;if(j>0)return-1}if(!x.eq(b)){let j=A.minus(E),vt=x.minus(d),bt=K.minus(M),Vt=b.minus(m);if(j.isGreaterThan(vt)&&bt.isLessThan(Vt))return 1;if(j.isLessThan(vt)&&bt.isGreaterThan(Vt))return-1}return x.isGreaterThan(b)?1:x.isLessThan(b)||A.isLessThan(K)?-1:A.isGreaterThan(K)?1:l.id<h.id?-1:l.id>h.id?1:0}static fromRing(l,h,d){let m,x,b,E=rs.comparePoints(l,h);if(E<0)m=l,x=h,b=1;else if(E>0)m=h,x=l,b=-1;else throw new Error(`Tried to create degenerate segment at [${l.x}, ${l.y}]`);let M=new rs(m,!0),A=new rs(x,!1);return new jf(M,A,[d],[b])}replaceRightSE(l){this.rightSE=l,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let l=this.leftSE.point.y,h=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:l.isLessThan(h)?l:h},ur:{x:this.rightSE.point.x,y:l.isGreaterThan(h)?l:h}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(l){return l.x.eq(this.leftSE.point.x)&&l.y.eq(this.leftSE.point.y)||l.x.eq(this.rightSE.point.x)&&l.y.eq(this.rightSE.point.y)}comparePoint(l){return In.orient(this.leftSE.point,l,this.rightSE.point)}getIntersection(l){let h=this.bbox(),d=l.bbox(),m=Lc(h,d);if(m===null)return null;let x=this.leftSE.point,b=this.rightSE.point,E=l.leftSE.point,M=l.rightSE.point,A=ns(h,E)&&this.comparePoint(E)===0,K=ns(d,x)&&l.comparePoint(x)===0,j=ns(h,M)&&this.comparePoint(M)===0,vt=ns(d,b)&&l.comparePoint(b)===0;if(K&&A)return vt&&!j?b:!vt&&j?M:null;if(K)return j&&x.x.eq(M.x)&&x.y.eq(M.y)?null:x;if(A)return vt&&b.x.eq(E.x)&&b.y.eq(E.y)?null:E;if(vt&&j)return null;if(vt)return b;if(j)return M;let bt=Fd(x,this.vector(),E,l.vector());return bt===null||!ns(m,bt)?null:In.snap(bt)}split(l){let h=[],d=l.events!==void 0,m=new rs(l,!0),x=new rs(l,!1),b=this.rightSE;this.replaceRightSE(x),h.push(x),h.push(m);let E=new jf(m,b,this.rings.slice(),this.windings.slice());return rs.comparePoints(E.leftSE.point,E.rightSE.point)>0&&E.swapEvents(),rs.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),d&&(m.checkForConsuming(),x.checkForConsuming()),h}swapEvents(){let l=this.rightSE;this.rightSE=this.leftSE,this.leftSE=l,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let h=0,d=this.windings.length;h<d;h++)this.windings[h]*=-1}consume(l){let h=this,d=l;for(;h.consumedBy;)h=h.consumedBy;for(;d.consumedBy;)d=d.consumedBy;let m=jf.compare(h,d);if(m!==0){if(m>0){let x=h;h=d,d=x}if(h.prev===d){let x=h;h=d,d=x}for(let x=0,b=d.rings.length;x<b;x++){let E=d.rings[x],M=d.windings[x],A=h.rings.indexOf(E);A===-1?(h.rings.push(E),h.windings.push(M)):h.windings[A]+=M}d.rings=null,d.windings=null,d.consumedBy=h,d.leftSE.consumedBy=h.leftSE,d.rightSE.consumedBy=h.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let l=this.prev.consumedBy||this.prev;this._beforeState=l.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let l=this.beforeState();this._afterState={rings:l.rings.slice(0),windings:l.windings.slice(0),multiPolys:[]};let h=this._afterState.rings,d=this._afterState.windings,m=this._afterState.multiPolys;for(let E=0,M=this.rings.length;E<M;E++){let A=this.rings[E],K=this.windings[E],j=h.indexOf(A);j===-1?(h.push(A),d.push(K)):d[j]+=K}let x=[],b=[];for(let E=0,M=h.length;E<M;E++){if(d[E]===0)continue;let A=h[E],K=A.poly;if(b.indexOf(K)===-1)if(A.isExterior)x.push(K);else{b.indexOf(K)===-1&&b.push(K);let j=x.indexOf(A.poly);j!==-1&&x.splice(j,1)}}for(let E=0,M=x.length;E<M;E++){let A=x[E].multiPoly;m.indexOf(A)===-1&&m.push(A)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let l=this.beforeState().multiPolys,h=this.afterState().multiPolys;switch(mf.type){case"union":{let d=l.length===0,m=h.length===0;this._isInResult=d!==m;break}case"intersection":{let d,m;l.length<h.length?(d=l.length,m=h.length):(d=h.length,m=l.length),this._isInResult=m===mf.numMultiPolys&&d<m;break}case"xor":{let d=Math.abs(l.length-h.length);this._isInResult=d%2===1;break}case"difference":{let d=m=>m.length===1&&m[0].isSubject;this._isInResult=d(l)!==d(h);break}}return this._isInResult}},wc=class{constructor(a,l,h){me(this,"poly");me(this,"isExterior");me(this,"segments");me(this,"bbox");if(!Array.isArray(a)||a.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=l,this.isExterior=h,this.segments=[],typeof a[0][0]!="number"||typeof a[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let d=In.snap({x:new D(a[0][0]),y:new D(a[0][1])});this.bbox={ll:{x:d.x,y:d.y},ur:{x:d.x,y:d.y}};let m=d;for(let x=1,b=a.length;x<b;x++){if(typeof a[x][0]!="number"||typeof a[x][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let E=In.snap({x:new D(a[x][0]),y:new D(a[x][1])});E.x.eq(m.x)&&E.y.eq(m.y)||(this.segments.push(fa.fromRing(m,E,this)),E.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=E.x),E.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=E.y),E.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=E.x),E.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=E.y),m=E)}(!d.x.eq(m.x)||!d.y.eq(m.y))&&this.segments.push(fa.fromRing(m,d,this))}getSweepEvents(){let a=[];for(let l=0,h=this.segments.length;l<h;l++){let d=this.segments[l];a.push(d.leftSE),a.push(d.rightSE)}return a}},Gd=class{constructor(a,l){me(this,"multiPoly");me(this,"exteriorRing");me(this,"interiorRings");me(this,"bbox");if(!Array.isArray(a))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new wc(a[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let h=1,d=a.length;h<d;h++){let m=new wc(a[h],this,!1);m.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=m.bbox.ll.x),m.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=m.bbox.ll.y),m.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=m.bbox.ur.x),m.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=m.bbox.ur.y),this.interiorRings.push(m)}this.multiPoly=l}getSweepEvents(){let a=this.exteriorRing.getSweepEvents();for(let l=0,h=this.interiorRings.length;l<h;l++){let d=this.interiorRings[l].getSweepEvents();for(let m=0,x=d.length;m<x;m++)a.push(d[m])}return a}},Am=class{constructor(a,l){me(this,"isSubject");me(this,"polys");me(this,"bbox");if(!Array.isArray(a))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof a[0][0][0]=="number"&&(a=[a])}catch{}this.polys=[],this.bbox={ll:{x:new D(Number.POSITIVE_INFINITY),y:new D(Number.POSITIVE_INFINITY)},ur:{x:new D(Number.NEGATIVE_INFINITY),y:new D(Number.NEGATIVE_INFINITY)}};for(let h=0,d=a.length;h<d;h++){let m=new Gd(a[h],this);m.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=m.bbox.ll.x),m.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=m.bbox.ll.y),m.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=m.bbox.ur.x),m.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=m.bbox.ur.y),this.polys.push(m)}this.isSubject=l}getSweepEvents(){let a=[];for(let l=0,h=this.polys.length;l<h;l++){let d=this.polys[l].getSweepEvents();for(let m=0,x=d.length;m<x;m++)a.push(d[m])}return a}},Nx=class jg{constructor(l){me(this,"events");me(this,"poly");me(this,"_isExteriorRing");me(this,"_enclosingRing");this.events=l;for(let h=0,d=l.length;h<d;h++)l[h].segment.ringOut=this;this.poly=null}static factory(l){let h=[];for(let d=0,m=l.length;d<m;d++){let x=l[d];if(!x.isInResult()||x.ringOut)continue;let b=null,E=x.leftSE,M=x.rightSE,A=[E],K=E.point,j=[];for(;b=E,E=M,A.push(E),E.point!==K;)for(;;){let vt=E.getAvailableLinkedEvents();if(vt.length===0){let re=A[0].point,ce=A[A.length-1].point;throw new Error(`Unable to complete output ring starting at [${re.x}, ${re.y}]. Last matching segment found ends at [${ce.x}, ${ce.y}].`)}if(vt.length===1){M=vt[0].otherSE;break}let bt=null;for(let re=0,ce=j.length;re<ce;re++)if(j[re].point===E.point){bt=re;break}if(bt!==null){let re=j.splice(bt)[0],ce=A.splice(re.index);ce.unshift(ce[0].otherSE),h.push(new jg(ce.reverse()));continue}j.push({index:A.length,point:E.point});let Vt=E.getLeftmostComparator(b);M=vt.sort(Vt)[0].otherSE;break}h.push(new jg(A))}return h}getGeom(){let l=this.events[0].point,h=[l];for(let A=1,K=this.events.length-1;A<K;A++){let j=this.events[A].point,vt=this.events[A+1].point;In.orient(j,l,vt)!==0&&(h.push(j),l=j)}if(h.length===1)return null;let d=h[0],m=h[1];In.orient(d,l,m)===0&&h.shift(),h.push(h[0]);let x=this.isExteriorRing()?1:-1,b=this.isExteriorRing()?0:h.length-1,E=this.isExteriorRing()?h.length:-1,M=[];for(let A=b;A!=E;A+=x)M.push([h[A].x.toNumber(),h[A].y.toNumber()]);return M}isExteriorRing(){if(this._isExteriorRing===void 0){let l=this.enclosingRing();this._isExteriorRing=l?!l.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var m,x;let l=this.events[0];for(let b=1,E=this.events.length;b<E;b++){let M=this.events[b];rs.compare(l,M)>0&&(l=M)}let h=l.segment.prevInResult(),d=h?h.prevInResult():null;for(;;){if(!h)return null;if(!d)return h.ringOut;if(d.ringOut!==h.ringOut)return((m=d.ringOut)==null?void 0:m.enclosingRing())!==h.ringOut?h.ringOut:(x=h.ringOut)==null?void 0:x.enclosingRing();h=d.prevInResult(),d=h?h.prevInResult():null}}},Dm=class{constructor(a){me(this,"exteriorRing");me(this,"interiorRings");this.exteriorRing=a,a.poly=this,this.interiorRings=[]}addInterior(a){this.interiorRings.push(a),a.poly=this}getGeom(){let a=this.exteriorRing.getGeom();if(a===null)return null;let l=[a];for(let h=0,d=this.interiorRings.length;h<d;h++){let m=this.interiorRings[h].getGeom();m!==null&&l.push(m)}return l}},Rx=class{constructor(a){me(this,"rings");me(this,"polys");this.rings=a,this.polys=this._composePolys(a)}getGeom(){let a=[];for(let l=0,h=this.polys.length;l<h;l++){let d=this.polys[l].getGeom();d!==null&&a.push(d)}return a}_composePolys(a){var h;let l=[];for(let d=0,m=a.length;d<m;d++){let x=a[d];if(!x.poly)if(x.isExteriorRing())l.push(new Dm(x));else{let b=x.enclosingRing();b!=null&&b.poly||l.push(new Dm(b)),(h=b==null?void 0:b.poly)==null||h.addInterior(x)}}return l}},Ox=class{constructor(a,l=fa.compare){me(this,"queue");me(this,"tree");me(this,"segments");this.queue=a,this.tree=new Ut(l),this.segments=[]}process(a){let l=a.segment,h=[];if(a.consumedBy)return a.isLeft?this.queue.delete(a.otherSE):this.tree.delete(l),h;a.isLeft&&this.tree.add(l);let d=l,m=l;do d=this.tree.lastBefore(d);while(d!=null&&d.consumedBy!=null);do m=this.tree.firstAfter(m);while(m!=null&&m.consumedBy!=null);if(a.isLeft){let x=null;if(d){let E=d.getIntersection(l);if(E!==null&&(l.isAnEndpoint(E)||(x=E),!d.isAnEndpoint(E))){let M=this._splitSafely(d,E);for(let A=0,K=M.length;A<K;A++)h.push(M[A])}}let b=null;if(m){let E=m.getIntersection(l);if(E!==null&&(l.isAnEndpoint(E)||(b=E),!m.isAnEndpoint(E))){let M=this._splitSafely(m,E);for(let A=0,K=M.length;A<K;A++)h.push(M[A])}}if(x!==null||b!==null){let E=null;x===null?E=b:b===null?E=x:E=rs.comparePoints(x,b)<=0?x:b,this.queue.delete(l.rightSE),h.push(l.rightSE);let M=l.split(E);for(let A=0,K=M.length;A<K;A++)h.push(M[A])}h.length>0?(this.tree.delete(l),h.push(a)):(this.segments.push(l),l.prev=d)}else{if(d&&m){let x=d.getIntersection(m);if(x!==null){if(!d.isAnEndpoint(x)){let b=this._splitSafely(d,x);for(let E=0,M=b.length;E<M;E++)h.push(b[E])}if(!m.isAnEndpoint(x)){let b=this._splitSafely(m,x);for(let E=0,M=b.length;E<M;E++)h.push(b[E])}}}this.tree.delete(l)}return h}_splitSafely(a,l){this.tree.delete(a);let h=a.rightSE;this.queue.delete(h);let d=a.split(l);return d.push(h),a.consumedBy===void 0&&this.tree.add(a),d}},Bx=class{constructor(){me(this,"type");me(this,"numMultiPolys")}run(a,l,h){Sc.type=a;let d=[new Am(l,!0)];for(let M=0,A=h.length;M<A;M++)d.push(new Am(h[M],!1));if(Sc.numMultiPolys=d.length,Sc.type==="difference"){let M=d[0],A=1;for(;A<d.length;)Lc(d[A].bbox,M.bbox)!==null?A++:d.splice(A,1)}if(Sc.type==="intersection")for(let M=0,A=d.length;M<A;M++){let K=d[M];for(let j=M+1,vt=d.length;j<vt;j++)if(Lc(K.bbox,d[j].bbox)===null)return[]}let m=new Ut(rs.compare);for(let M=0,A=d.length;M<A;M++){let K=d[M].getSweepEvents();for(let j=0,vt=K.length;j<vt;j++)m.add(K[j])}let x=new Ox(m),b=null;for(m.size!=0&&(b=m.first(),m.delete(b));b;){let M=x.process(b);for(let A=0,K=M.length;A<K;A++){let j=M[A];j.consumedBy===void 0&&m.add(j)}m.size!=0?(b=m.first(),m.delete(b)):b=null}In.reset();let E=Nx.factory(x.segments);return new Rx(E).getGeom()}},Sc=new Bx,mf=Sc,Fx=(a,...l)=>mf.run("intersection",a,l),zx=(a,...l)=>mf.run("difference",a,l);In.set;function _f(a){let l={type:"Feature"};return l.geometry=a,l}function yf(a){return a.type==="Feature"?a.geometry:a}function Nm(a){return a&&a.geometry&&a.geometry.coordinates?a.geometry.coordinates:a}function Gx(a){return _f({type:"LineString",coordinates:a})}function Ux(a){return _f({type:"MultiLineString",coordinates:a})}function Rm(a){return _f({type:"Polygon",coordinates:a})}function Om(a){return _f({type:"MultiPolygon",coordinates:a})}function Vx(a,l){let h=yf(a),d=yf(l),m=Fx(h.coordinates,d.coordinates);return m.length===0?null:m.length===1?Rm(m[0]):Om(m)}function jx(a,l){let h=yf(a),d=yf(l),m=zx(h.coordinates,d.coordinates);return m.length===0?null:m.length===1?Rm(m[0]):Om(m)}function Bm(a){return Array.isArray(a)?1+Bm(a[0]):-1}function qx(a){a instanceof L.Polyline&&(a=a.toGeoJSON(15));let l=Nm(a),h=Bm(l),d=[];return h>1?l.forEach(m=>{d.push(Gx(m))}):d.push(a),d}function Hx(a){let l=[];return a.eachLayer(h=>{l.push(Nm(h.toGeoJSON(15)))}),Ux(l)}lr.Cut=lr.Polygon.extend({initialize(a){this._map=a,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let a=this._layer.getLatLngs();if(a.length<=2)return;let l=L.polygon(a,this.options.pathOptions);l._latlngInfos=this._layer._latlngInfo,this.cut(l),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:d,originalLayer:m})=>{this._fireCut(m,d,m),this._fireCut(this._map,d,m),m.pm._fireEdit()}),this._editedLayers=[];let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))},cut(a){let l=this._map._layers,h=a._latlngInfos||[];Object.keys(l).map(d=>l[d]).filter(d=>d.pm).filter(d=>!d._pmTempLayer).filter(d=>!L.PM.optIn&&!d.options.pmIgnore||L.PM.optIn&&d.options.pmIgnore===!1).filter(d=>d instanceof L.Polyline).filter(d=>d!==a).filter(d=>d.pm.options.allowCutting).filter(d=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(d)>-1:!0).filter(d=>!this._layerGroup.hasLayer(d)).filter(d=>{try{let m=!!ts(a.toGeoJSON(15),d.toGeoJSON(15)).features.length>0;return m||d instanceof L.Polyline&&!(d instanceof L.Polygon)?m:!!Vx(a.toGeoJSON(15),d.toGeoJSON(15))}catch{return d instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(d=>{let m;if(d instanceof L.Polygon){m=L.polygon(d.getLatLngs());let M=m.getLatLngs();h.forEach(A=>{if(A&&A.snapInfo){let{latlng:K}=A,j=this._calcClosestLayer(K,[m]);if(j&&j.segment&&j.distance<this.options.snapDistance){let{segment:vt}=j;if(vt&&vt.length===2){let{indexPath:bt,parentPath:Vt,newIndex:re}=L.PM.Utils._getIndexFromSegment(M,vt);(bt.length>1?(0,Is.default)(M,Vt):M).splice(re,0,K)}}}})}else m=d;let x=this._cutLayer(a,m),b=L.geoJSON(x,d.options);b.getLayers().length===1&&([b]=b.getLayers()),this._setPane(b,"layerPane");let E=b.addTo(this._map.pm._getContainingLayer());if(E.pm.enable(d.pm.options),E.pm.disable(),d._pmTempLayer=!0,a._pmTempLayer=!0,d.remove(),d.removeFrom(this._map.pm._getContainingLayer()),a.remove(),a.removeFrom(this._map.pm._getContainingLayer()),E.getLayers&&E.getLayers().length===0&&this._map.pm.removeLayer({target:E}),E instanceof L.LayerGroup?(E.eachLayer(M=>{this._addDrawnLayerProp(M)}),this._addDrawnLayerProp(E)):this._addDrawnLayerProp(E),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let M=this.options.layersToCut.indexOf(d);M>-1&&this.options.layersToCut.splice(M,1)}this._editedLayers.push({layer:E,originalLayer:d})})},_cutLayer(a,l){let h=L.geoJSON(),d;if(l instanceof L.Polygon)d=jx(l.toGeoJSON(15),a.toGeoJSON(15));else{let m=qx(l);m.forEach(x=>{let b=Id(x,a.toGeoJSON(15)),E;b&&b.features.length>0?E=L.geoJSON(b):E=L.geoJSON(x),E.getLayers().forEach(M=>{Td(a.toGeoJSON(15),M.toGeoJSON(15))||M.addTo(h)})}),m.length>1?d=Hx(h):d=h.toGeoJSON(15)}return d},_change:L.Util.falseFn}),lr.Text=lr.extend({initialize(a){this._map=a,this._shape="Text",this.toolbarButtonName="drawText"},enable(a){L.Util.setOptions(this,a),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(ke("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var a;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(a=this._hintMarker)==null||a.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(a){this.enabled()?this.disable():this.enable(a)},_syncHintMarker(a){if(this._hintMarker.setLatLng(a.latlng),this.options.snappable){let l=a;l.target=this._hintMarker,this._handleSnapping(l)}},_createMarker(a){var m,x,b,E;if(!a.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(a.latlng);let l=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(m=this.options.textOptions)==null?void 0:m.className){let M=this.options.textOptions.className.split(" ");this.textArea.classList.add(...M)}let h=this._createTextIcon(this.textArea),d=new L.Marker(l,{textMarker:!0,_textMarkerOverPM:!0,icon:h});if(this._setPane(d,"markerPane"),this._finishLayer(d),d.pm||(d.options.draggable=!1),d.addTo(this._map.pm._getContainingLayer()),d.pm){d.pm.textArea=this.textArea,L.setOptions(d.pm,{removeIfEmpty:((x=this.options.textOptions)==null?void 0:x.removeIfEmpty)??!0});let M=((b=this.options.textOptions)==null?void 0:b.focusAfterDraw)??!0;d.pm._createTextMarker(M),(E=this.options.textOptions)!=null&&E.text&&d.pm.setText(this.options.textOptions.text)}this._fireCreate(d),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(a){this.enable(),this._hintMarker.setLatLng(a.latlng)},_createTextArea(){let a=document.createElement("textarea");return a.readOnly=!0,a.classList.add("pm-textarea","pm-disabled"),a},_createTextIcon(a){return L.divIcon({className:"pm-text-marker",html:a})}});var Zx={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,Ir(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let a=this._getDOMElem();a&&(Ir(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(a)):L.DomEvent.on(a,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,Ir(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let a=this._getDOMElem();a&&(Ir(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(a)):L.DomEvent.off(a,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(a){let l=a.touches?a.touches[0]:a,h={originalEvent:l,target:this._layer};return h.containerPoint=this._map.mouseEventToContainerPoint(l),h.latlng=this._map.containerPointToLatLng(h.containerPoint),this._dragMixinOnMouseDown(h),!1},_simulateMouseMoveEvent(a){let l=a.touches?a.touches[0]:a,h={originalEvent:l,target:this._layer};return h.containerPoint=this._map.mouseEventToContainerPoint(l),h.latlng=this._map.containerPointToLatLng(h.containerPoint),this._dragMixinOnMouseMove(h),!1},_simulateMouseUpEvent(a){let l={originalEvent:a.touches?a.touches[0]:a,target:this._layer};return a.type.indexOf("touch")===-1&&(l.containerPoint=this._map.mouseEventToContainerPoint(a),l.latlng=this._map.containerPointToLatLng(l.containerPoint)),this._dragMixinOnMouseUp(l),!1},_dragMixinOnMouseDown(a){if(a.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(a);let l=a._fromLayerSync,h=this._syncLayers("_dragMixinOnMouseDown",a);if(this._layer instanceof L.Marker&&(this.options.snappable&&!l&&!h?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let d="resizeableCircleMarker";this._layer instanceof L.Circle&&(d="resizeableCircle"),this.options.snappable&&!l&&!h?this._layer.pm.options[d]||this._initSnappableMarkersDrag():this._layer.pm.options[d]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=a.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(a){this._overwriteEventIfItComesFromMarker(a);let l=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",a),this._dragging||(this._dragging=!0,L.DomUtil.addClass(l,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=a.latlng),this._onLayerDrag(a),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(a){let l=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",a),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,l&&L.DomUtil.removeClass(l,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(a){let{latlng:l}=a,h={lat:l.lat-this._tempDragCoord.lat,lng:l.lng-this._tempDragCoord.lng},d=m=>m.map(x=>{if(Array.isArray(x))return d(x);let b={lat:x.lat+h.lat,lng:x.lng+h.lng};return(x.alt||x.alt===0)&&(b.alt=x.alt),b});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let m=d([this._layer.getLatLng()]);this._layer.setLatLng(m[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let m=this._layer.getLatLng();this._layer._snapped&&(m=this._layer._orgLatLng);let x=d([m]);this._layer.setLatLng(x[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let m=d([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(m),this._fireChange(this._layer.getBounds(),"Edit")}else{let m=d(this._layer.getLatLngs());this._layer.setLatLngs(m),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=l,a.layer=this._layer,this._fireDrag(a)},addDraggingClass(){let a=this._getDOMElem();a&&L.DomUtil.addClass(a,"leaflet-pm-draggable")},removeDraggingClass(){let a=this._getDOMElem();a&&L.DomUtil.removeClass(a,"leaflet-pm-draggable")},_getDOMElem(){let a=null;return this._layer._path?a=this._layer._path:this._layer._renderer&&this._layer._renderer._container?a=this._layer._renderer._container:this._layer._image?a=this._layer._image:this._layer._icon&&(a=this._layer._icon),a},_overwriteEventIfItComesFromMarker(a){a.target.getLatLng&&(!a.target._radius||a.target._radius<=10)&&(a.containerPoint=this._map.mouseEventToContainerPoint(a.originalEvent),a.latlng=this._map.containerPointToLatLng(a.containerPoint))},_syncLayers(a,l){if(this.enabled())return!1;if(!l._fromLayerSync&&this._layer===l.target&&this.options.syncLayersOnDrag){l._fromLayerSync=!0;let h=[];if(L.Util.isArray(this.options.syncLayersOnDrag))h=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(d=>{d instanceof L.LayerGroup&&(h=h.concat(d.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let d in this._parentLayerGroup){let m=this._parentLayerGroup[d];m.pm&&(h=m.pm.getLayers(!0))}return L.Util.isArray(h)&&h.length>0&&(h=h.filter(d=>!!d.pm).filter(d=>!!d.pm.options.draggable),h.forEach(d=>{d!==this._layer&&d.pm[a]&&(d._snapped=!1,d.pm[a](l))})),h.length>0}return!1},_stopDOMImageDrag(a){return a.preventDefault(),!1}},Wx=Zx,Kx=p(Xs());function $x(a,l,h,d){return h.unproject(l.transform(h.project(a,d)),d)}function Fm(a,l,h){let d=h.getMaxZoom();if(d===1/0&&(d=h.getZoom()),L.Util.isArray(a)){let m=[];return a.forEach(x=>{m.push(Fm(x,l,h))}),m}return a instanceof L.LatLng?$x(a,l,h,d):null}function il(a,l){l instanceof L.Layer&&(l=l.getLatLng());let h=a.getMaxZoom();return h===1/0&&(h=a.getZoom()),a.project(l,h)}function vf(a,l){let h=a.getMaxZoom();return h===1/0&&(h=a.getZoom()),a.unproject(l,h)}var Xx={_onRotateStart(a){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=il(this._map,this._rotationOriginLatLng),this._rotationStartPoint=il(this._map,a.target.getLatLng()),this._initialRotateLatLng=Ji(this._layer),this._startAngle=this.getAngle();let l=Ji(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,l),this._fireRotationStart(this._map,l)},_onRotate(a){let l=il(this._map,a.target.getLatLng()),h=this._rotationStartPoint,d=this._rotationOriginPoint,m=Math.atan2(l.y-d.y,l.x-d.x)-Math.atan2(h.y-d.y,h.x-d.x);this._layer.setLatLngs(this._rotateLayer(m,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let x=this;function b(K,j=[],vt=-1){if(vt>-1&&j.push(vt),L.Util.isArray(K[0]))K.forEach((bt,Vt)=>b(bt,j.slice(),Vt));else{let bt=j.length>0?(0,Kx.default)(x._markers,j):x._markers[0];K.forEach((Vt,re)=>{bt[re].setLatLng(Vt)})}}b(this._layer.getLatLngs());let E=Ji(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(m,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let M=m*180/Math.PI;M=M<0?M+360:M;let A=M+this._startAngle;this._setAngle(A),this._rotationLayer.pm._setAngle(A),this._fireRotation(this._rotationLayer,M,E),this._fireRotation(this._map,M,E),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let a=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let l=Ji(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Ji(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,a,l),this._fireRotationEnd(this._map,a,l),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(a,l,h,d,m){let x=il(m,h);return this._matrix=d.clone().rotate(a,x).flip(),Fm(l,this._matrix,m)},_setAngle(a){a=a<0?a+360:a,this._angle=a%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let a=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),l=a.getCenter();return a.removeFrom(this._layer._map),l},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(zu(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let a={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),a),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Ji(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(a){let l=this.getAngle(),h=this._layer.getLatLngs(),d=a*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(d,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+a),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(d,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let m=this.getAngle()-l;m=m<0?m+360:m,this._startAngle=l,this._fireRotation(this._layer,m,h,this._layer),this._fireRotation(this._map||this._layer._map,m,h,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(a){let l=a-this.getAngle();this.rotateLayer(l)},getAngle(){return this._angle||0},setInitAngle(a){this._setAngle(a)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(a){this._rotationCenter=a,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(a)}},Yx=Xx,Jx=L.Class.extend({includes:[Wx,dc,Yx,Bu],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(a){L.Util.setOptions(this,a)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(a,l){l==="layerPane"?a.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":l==="vertexPane"?a.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":l==="markerPane"&&(a.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(a,l){let h=l.target,d={layer:this._layer,marker:h,event:l},m="";return a==="move"?m="moveVertexValidation":a==="add"?m="addVertexValidation":a==="remove"&&(m="removeVertexValidation"),this.options[m]&&typeof this.options[m]=="function"&&!this.options[m](d)?(a==="move"&&(h._cancelDragEventChain=h.getLatLng()),!1):(h._cancelDragEventChain=null,!0)},_vertexValidationDrag(a){return a._cancelDragEventChain?(a._latlng=a._cancelDragEventChain,a.update(),!1):!0},_vertexValidationDragEnd(a){return a._cancelDragEventChain?(a._cancelDragEventChain=null,!1):!0}}),vr=Jx;vr.LayerGroup=L.Class.extend({initialize(a){this._layerGroup=a,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(d=>this._initLayer(d));let l=d=>{if(d.layer._pmTempLayer)return;this._layers=this.getLayers();let m=this._layers.filter(x=>!x.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in x.pm._parentLayerGroup));m.forEach(x=>{this._initLayer(x)}),m.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(l,100,this),this),this._layerGroup.on("layerremove",d=>{this._removeLayerFromGroup(d.target)},this);let h=d=>{d.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(h,100,this),this)},enable(a,l=[]){l.length===0&&(this._layers=this.getLayers()),this._options=a,this._layers.forEach(h=>{h instanceof L.LayerGroup?l.indexOf(h._leaflet_id)===-1&&(l.push(h._leaflet_id),h.pm.enable(a,l)):h.pm.enable(a)})},disable(a=[]){a.length===0&&(this._layers=this.getLayers()),this._layers.forEach(l=>{l instanceof L.LayerGroup?a.indexOf(l._leaflet_id)===-1&&(a.push(l._leaflet_id),l.pm.disable(a)):l.pm.disable()})},enabled(a=[]){return a.length===0&&(this._layers=this.getLayers()),!!this._layers.find(l=>l instanceof L.LayerGroup?a.indexOf(l._leaflet_id)===-1?(a.push(l._leaflet_id),l.pm.enabled(a)):!1:l.pm.enabled())},toggleEdit(a,l=[]){l.length===0&&(this._layers=this.getLayers()),this._options=a,this._layers.forEach(h=>{h instanceof L.LayerGroup?l.indexOf(h._leaflet_id)===-1&&(l.push(h._leaflet_id),h.pm.toggleEdit(a,l)):h.pm.toggleEdit(a)})},_initLayer(a){let l=L.Util.stamp(this._layerGroup);a.pm._parentLayerGroup||(a.pm._parentLayerGroup={}),a.pm._parentLayerGroup[l]=this._layerGroup},_removeLayerFromGroup(a){if(a.pm&&a.pm._layerGroup){let l=L.Util.stamp(this._layerGroup);delete a.pm._layerGroup[l]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(a=>a.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var a;return this._map||((a=this._layers.find(l=>!!l._map))==null?void 0:a._map)||null},getLayers(a=!1,l=!0,h=!0,d=[]){let m=[];return a?this._layerGroup.getLayers().forEach(x=>{m.push(x),x instanceof L.LayerGroup&&d.indexOf(x._leaflet_id)===-1&&(d.push(x._leaflet_id),m=m.concat(x.pm.getLayers(!0,!0,!0,d)))}):m=this._layerGroup.getLayers(),h&&(m=m.filter(x=>!(x instanceof L.LayerGroup))),l&&(m=m.filter(x=>!!x.pm),m=m.filter(x=>!x._pmTempLayer),m=m.filter(x=>!L.PM.optIn&&!x.options.pmIgnore||L.PM.optIn&&x.options.pmIgnore===!1)),m},setOptions(a,l=[]){l.length===0&&(this._layers=this.getLayers()),this.options=a,this._layers.forEach(h=>{h.pm&&(h instanceof L.LayerGroup?l.indexOf(h._leaflet_id)===-1&&(l.push(h._leaflet_id),h.pm.setOptions(a,l)):h.pm.setOptions(a))})}}),vr.Marker=vr.extend({_shape:"Marker",initialize(a){this._layer=a,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(a={draggable:!0}){if(L.Util.setOptions(this,a),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(a){this.enabled()?this.disable():this.enable(a)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(a){let l=a.target;l.remove(),this._fireRemove(l),this._fireRemove(this._map,l)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let a=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,a.off("pm:drag",this._handleSnapping,this),a.on("pm:drag",this._handleSnapping,this),a.off("pm:dragend",this._cleanupSnapping,this),a.on("pm:dragend",this._cleanupSnapping,this),a.off("pm:dragstart",this._unsnap,this),a.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let a=this._layer;a.off("pm:drag",this._handleSnapping,this),a.off("pm:dragend",this._cleanupSnapping,this),a.off("pm:dragstart",this._unsnap,this)}});var pa=p(Xs()),Qx={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let a=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=a.filter((l,h,d)=>d.indexOf(l)===h)},_removeFromCache(a){let l=this.markerCache.indexOf(a);l>-1&&this.markerCache.splice(l,1)},renderLimits(a){this.markerCache.forEach(l=>{a.includes(l)?this._markerGroup.addLayer(l):this._markerGroup.removeLayer(l)})},applyLimitFilters({latlng:a={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let l=[...this._filterClosestMarkers(a)];this.renderLimits(l)},_filterClosestMarkers(a){let l=[...this.markerCache],h=this.options.limitMarkersToCount;return h===-1?l:(l.sort((d,m)=>{let x=d._latlng.distanceTo(a),b=m._latlng.distanceTo(a);return x-b}),l.filter((d,m)=>h>-1?m<h:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(a){this._preventRenderMarkers=!!a}},t1=Qx;vr.Line=vr.extend({includes:[t1],_shape:"Line",initialize(a){this._layer=a,this._enabled=!1},enable(a){if(L.Util.setOptions(this,a),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let a=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(a,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(a){return this.enabled()?this.disable():this.enable(a),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let a=this._map,l=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(a),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let h=d=>{if(Array.isArray(d[0]))return d.map(h,this);let m=d.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&d.map((x,b)=>{let E=this.isPolygon()?(b+1)%d.length:b+1;return this._createMiddleMarker(m[b],m[E])}),m};this._markers=h(l),this.filterMarkerGroup(),a.addLayer(this._markerGroup)},_createMarker(a){let l=new L.Marker(a,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(l,"vertexPane"),l._pmTempLayer=!0,this.options.rotate?(l.on("dragstart",this._onRotateStart,this),l.on("drag",this._onRotate,this),l.on("dragend",this._onRotateEnd,this)):(l.on("click",this._onVertexClick,this),l.on("dragstart",this._onMarkerDragStart,this),l.on("move",this._onMarkerDrag,this),l.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||l.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(l),l},_createMiddleMarker(a,l){if(!a||!l)return!1;let h=L.PM.Utils.calcMiddleLatLng(this._map,a.getLatLng(),l.getLatLng()),d=this._createMarker(h),m=L.divIcon({className:"marker-icon marker-icon-middle"});return d.setIcon(m),d.leftM=a,d.rightM=l,a._middleMarkerNext=d,l._middleMarkerPrev=d,d.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),d.on("movestart",this._onMiddleMarkerMoveStart,this),d},_onMiddleMarkerClick(a){let l=a.target;if(!this._vertexValidation("add",a))return;let h=L.divIcon({className:"marker-icon"});l.setIcon(h),this._addMarker(l,l.leftM,l.rightM)},_onMiddleMarkerMoveStart(a){let l=a.target;if(l.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",a)){l.on("move",this._onMiddleMarkerMovePrevent,this);return}l._dragging=!0,this._addMarker(l,l.leftM,l.rightM)},_onMiddleMarkerMovePrevent(a){let l=a.target;this._vertexValidationDrag(l)},_onMiddleMarkerMoveEnd(a){let l=a.target;if(l.off("move",this._onMiddleMarkerMovePrevent,this),l.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(l))return;let h=L.divIcon({className:"marker-icon"});l.setIcon(h),setTimeout(()=>{delete l._dragging},100)},_addMarker(a,l,h){a.off("movestart",this._onMiddleMarkerMoveStart,this),a.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let d=a.getLatLng(),m=this._layer._latlngs;delete a.leftM,delete a.rightM;let{indexPath:x,index:b,parentPath:E}=L.PM.Utils.findDeepMarkerIndex(this._markers,l),M=x.length>1?(0,pa.default)(m,E):m,A=x.length>1?(0,pa.default)(this._markers,E):this._markers;M.splice(b+1,0,d),A.splice(b+1,0,a),this._layer.setLatLngs(m),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(l,a),this._createMiddleMarker(a,h)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(a,L.PM.Utils.findDeepMarkerIndex(this._markers,a).indexPath,d),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return Uu(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(a){let l=this._layer,h,d;if(this.options.allowSelfIntersection?h=!1:(d=Uu(this._layer.toGeoJSON(15)),h=d.features.length>0),h){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return h;a?this._flashLayer():(l.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(d)}else l.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return h},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(a,l){a.forEach(h=>{Array.isArray(h)?this._updateDisabledMarkerStyle(h,l):h._icon&&(l&&!this._checkMarkerAllowedToDrag(h)?L.DomUtil.addClass(h._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(h._icon,"vertexmarker-disabled"))})},_removeMarker(a){let l=a.target;if(!this._vertexValidation("remove",a))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=Ji(this._layer,this._layer.getLatLngs()));let h=this._layer.getLatLngs(),{indexPath:d,index:m,parentPath:x}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);if(!d)return;let b=d.length>1?(0,pa.default)(h,x):h,E=d.length>1?(0,pa.default)(this._markers,x):this._markers,M=x[x.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!M&&(b.length<=2||this.isPolygon()&&b.length<=3)){this._flashLayer();return}b.splice(m,1),this._layer.setLatLngs(h),this.isPolygon()&&b.length<=2&&b.splice(0,b.length);let A=!1;if(b.length<=1&&(b.splice(0,b.length),x.length>1&&d.length>1&&(h=Ha(h)),this._layer.setLatLngs(h),this._initMarkers(),A=!0),To(h)||this._layer.remove(),h=Ha(h),this._layer.setLatLngs(h),this._markers=Ha(this._markers),!A&&(E=d.length>1?(0,pa.default)(this._markers,x):this._markers,l._middleMarkerPrev&&(this._markerGroup.removeLayer(l._middleMarkerPrev),this._removeFromCache(l._middleMarkerPrev)),l._middleMarkerNext&&(this._markerGroup.removeLayer(l._middleMarkerNext),this._removeFromCache(l._middleMarkerNext)),this._markerGroup.removeLayer(l),this._removeFromCache(l),E)){let K,j;if(this.isPolygon()?(K=(m+1)%E.length,j=(m+(E.length-1))%E.length):(j=m-1<0?void 0:m-1,K=m+1>=E.length?void 0:m+1),K!==j){let vt=E[j],bt=E[K];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(vt,bt)}E.splice(m,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(l,d),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(a){let l=this._layer.getLatLngs(),h=a.getLatLng(),{indexPath:d,index:m,parentPath:x}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);(d.length>1?(0,pa.default)(l,x):l).splice(m,1,h),this._layer.setLatLngs(l)},_getNeighborMarkers(a){let{indexPath:l,index:h,parentPath:d}=L.PM.Utils.findDeepMarkerIndex(this._markers,a),m=l.length>1?(0,pa.default)(this._markers,d):this._markers,x=(h+1)%m.length,b=(h+(m.length-1))%m.length,E=m[b],M=m[x];return{prevMarker:E,nextMarker:M}},_checkMarkerAllowedToDrag(a){let{prevMarker:l,nextMarker:h}=this._getNeighborMarkers(a),d=L.polyline([l.getLatLng(),a.getLatLng()]),m=L.polyline([a.getLatLng(),h.getLatLng()]),x=ts(this._layer.toGeoJSON(15),d.toGeoJSON(15)).features.length,b=ts(this._layer.toGeoJSON(15),m.toGeoJSON(15)).features.length;return a.getLatLng()===this._markers[0][0].getLatLng()?b+=1:a.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(x+=1),!(x<=2&&b<=2)},_onMarkerDragStart(a){let l=a.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",a))return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireMarkerDragStart(a,h),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Ji(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(l):this._markerAllowedToDrag=null},_onMarkerDrag(a){let l=a.target;if(!this._vertexValidationDrag(l))return;let{indexPath:h,index:d,parentPath:m}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);if(!h)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(l);let x=h.length>1?(0,pa.default)(this._markers,m):this._markers,b=(d+1)%x.length,E=(d+(x.length-1))%x.length,M=l.getLatLng(),A=x[E].getLatLng(),K=x[b].getLatLng();if(l._middleMarkerNext){let j=L.PM.Utils.calcMiddleLatLng(this._map,M,K);l._middleMarkerNext.setLatLng(j)}if(l._middleMarkerPrev){let j=L.PM.Utils.calcMiddleLatLng(this._map,M,A);l._middleMarkerPrev.setLatLng(j)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(a,h),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(a){let l=a.target;if(!this._vertexValidationDragEnd(l))return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l),d=!this.options.allowSelfIntersection&&this.hasSelfIntersection();d&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(d=!1);let m=!this.options.allowSelfIntersection&&d;if(this._fireMarkerDragEnd(a,h,m),m){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(a,h);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(a){let l=a.target;if(l._dragging)return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireVertexClick(a,h)}}),vr.Polygon=vr.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(a){let{prevMarker:l,nextMarker:h}=this._getNeighborMarkers(a),d=L.polyline([l.getLatLng(),a.getLatLng()]),m=L.polyline([a.getLatLng(),h.getLatLng()]),x=ts(this._layer.toGeoJSON(15),d.toGeoJSON(15)).features.length,b=ts(this._layer.toGeoJSON(15),m.toGeoJSON(15)).features.length;return!(x<=2&&b<=2)}}),vr.Rectangle=vr.Polygon.extend({_shape:"Rectangle",_initMarkers(){let a=this._map,l=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,a.addLayer(this._markerGroup),this._markers=[],this._markers[0]=l.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((h,d)=>{let m=this._cornerMarkers.find(x=>x._index===d);m&&m.setLatLng(h)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(a,l){let h=new L.Marker(a,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._origLatLng=a,h._index=l,h._pmTempLayer=!0,h.on("click",this._onVertexClick,this),this._markerGroup.addLayer(h),h},_addMarkerEvents(){this._markers[0].forEach(a=>{a.on("dragstart",this._onMarkerDragStart,this),a.on("drag",this._onMarkerDrag,this),a.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||a.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(a){if(!this._vertexValidation("move",a))return;let l=a.target,h=this._cornerMarkers;l._oppositeCornerLatLng=h.find(m=>m._index===(l._index+2)%4).getLatLng(),l._snapped=!1;let{indexPath:d}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireMarkerDragStart(a,d)},_onMarkerDrag(a){let l=a.target;if(!this._vertexValidationDrag(l)||l._index===void 0)return;this._adjustRectangleForMarkerMove(l);let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireMarkerDrag(a,h),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(a){let l=a.target;if(!this._vertexValidationDragEnd(l))return;this._cornerMarkers.forEach(d=>{delete d._oppositeCornerLatLng});let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireMarkerDragEnd(a,h),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(a){L.extend(a._origLatLng,a._latlng);let l=L.PM.Utils._getRotatedRectangle(a.getLatLng(),a._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(l),this._adjustAllMarkers(a),this._layer.redraw()},_adjustAllMarkers(a){let l=this._layer.getLatLngs()[0];if(l&&l.length!==4&&l.length>0)l.forEach((h,d)=>{this._cornerMarkers[d].setLatLng(h)}),this._cornerMarkers.slice(l.length).forEach(h=>{h.setLatLng(l[0])});else if(!l||!l.length)console.error("The layer has no LatLngs");else{let h=l.findIndex(d=>a.getLatLng().equals(d));h>-1?(this._cornerMarkers[(a._index+1)%4].setLatLng(l[(h+1)%4]),this._cornerMarkers[(a._index+2)%4].setLatLng(l[(h+2)%4]),this._cornerMarkers[(a._index+3)%4].setLatLng(l[(h+3)%4])):this._cornerMarkers.forEach(d=>{d.setLatLng(l[d._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(zu(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let a=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(a[0],a[2],this.getAngle(),this._map||this)}}),vr.CircleMarker=vr.extend({_shape:"CircleMarker",initialize(a){this._layer=a,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(a={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,a),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(a){this.enabled()?this.disable():this.enable(a)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let a=this._map;this._helperLayers&&(this._helperLayers.removeFrom(a),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(a);let l=this._layer.getLatLng(),h=this._layer._radius,d=this._getLatLngOnCircle(l,h);this._centerMarker=this._createCenterMarker(l),this._outerMarker=this._createOuterMarker(d),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(a,l){let h=this._map.project(a),d=L.point(h.x+l,h.y);return this._map.unproject(d)},_createHintLine(a,l){let h=a.getLatLng(),d=l.getLatLng();this._hintline=L.polyline([h,d],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(a){let l=this._createMarker(a);return this.options.draggable?(L.DomUtil.addClass(l._icon,"leaflet-pm-draggable"),l.on("move",this._moveCircle,this)):l.dragging.disable(),l},_createOuterMarker(a){let l=this._createMarker(a);return l.on("drag",this._resizeCircle,this),l},_createMarker(a){let l=new L.Marker(a,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(l,"vertexPane"),l._origLatLng=a,l._pmTempLayer=!0,l.on("dragstart",this._onMarkerDragStart,this),l.on("drag",this._onMarkerDrag,this),l.on("dragend",this._onMarkerDragEnd,this),l.on("click",this._onVertexClick,this),this._helperLayers.addLayer(l),l},_moveCircle(a){if(a.target._cancelDragEventChain)return;let l=this._centerMarker.getLatLng();this._layer.setLatLng(l);let h=this._layer._radius,d=this._getLatLngOnCircle(l,h);this._outerMarker._latlng=d,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let a=this._layer.getLatLng(),l=this._layer._radius,h=this._getLatLngOnCircle(a,l);this._outerMarker.setLatLng(h),this._centerMarker.setLatLng(a),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let a=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng(),h=this._distanceCalculation(a,l);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(h),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let a=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng();this._hintline.setLatLngs([a,l])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(a){this._vertexValidation("move",a)&&this._fireMarkerDragStart(a)},_onMarkerDrag(a){let l=a.target;l instanceof L.Marker&&!this._vertexValidationDrag(l)||this._fireMarkerDrag(a)},_onMarkerDragEnd(a){this._extedingMarkerDragEnd();let l=a.target;this._vertexValidationDragEnd(l)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(a))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let a=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,a.off("pm:drag",this._handleSnapping,this),a.on("pm:drag",this._handleSnapping,this),a.off("pm:dragend",this._cleanupSnapping,this),a.on("pm:dragend",this._cleanupSnapping,this),a.off("pm:dragstart",this._unsnap,this),a.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let a=this._layer;a.off("pm:drag",this._handleSnapping,this),a.off("pm:dragend",this._cleanupSnapping,this),a.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let a=this._layer._map||this._map;if(a){let l=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),a,this._layer.getLatLng()),h=L.circle(this._layer.getLatLng(),this._layer.options);h.setRadius(l);let d=a&&a.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(h,200,!d).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(h,200,!d),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let a=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng(),h=this._distanceCalculation(a,l);return this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?l=Gu(this._map,a,l,this._getMinDistanceInMeter(a)):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(l=Gu(this._map,a,l,this._getMaxDistanceInMeter(a))),l},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let a=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng(),h=this._distanceCalculation(a,l);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(a,l){return this._map.project(a).distanceTo(this._map.project(l))},_getMinDistanceInMeter(a){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,a)},_getMaxDistanceInMeter(a){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,a)},_onVertexClick(a){a.target._dragging||this._fireVertexClick(a,void 0)}}),vr.Circle=vr.CircleMarker.extend({_shape:"Circle",initialize(a){this._layer=a,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(a){L.PM.Edit.CircleMarker.prototype.enable.call(this,a||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let a=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(a,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let a=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!a).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!a),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(a,l){return this._map.distance(a,l)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(a){a.target._dragging||this._fireVertexClick(a,void 0)}}),vr.ImageOverlay=vr.extend({_shape:"ImageOverlay",initialize(a){this._layer=a,this._enabled=!1},toggleEdit(a){this.enabled()?this.disable():this.enable(a)},enabled(){return this._enabled},enable(a={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,a),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let a=this._layer.getBounds(),l=a.getNorthWest(),h=a.getNorthEast(),d=a.getSouthEast(),m=a.getSouthWest();return[l,h,d,m]}}),vr.Text=vr.extend({_shape:"Text",initialize(a){this._layer=a,this._enabled=!1},enable(a){if(L.Util.setOptions(this,a),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let a=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),a.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(a){this.enabled()?this.disable():this.enable(a)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let a=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,a.off("pm:drag",this._handleSnapping,this),a.on("pm:drag",this._handleSnapping,this),a.off("pm:dragend",this._cleanupSnapping,this),a.on("pm:dragend",this._cleanupSnapping,this),a.off("pm:dragstart",this._unsnap,this),a.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let a=this._layer;a.off("pm:drag",this._handleSnapping,this),a.off("pm:dragend",this._cleanupSnapping,this),a.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let a=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,l=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${a}px`,this.textArea.style.width=`${l}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(a){a.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(a={}){let l=this._hasFocus;this._hasFocus=a.type==="focus",!l!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(a){a&&(this.textArea.value=a),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let l=this.options.className.split(" ");this.textArea.classList.add(...l)}let a=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(a),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(a=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),a===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(a){a.preventDefault()}});var Ud=function(a,l,h,d,m,x){this._matrix=[a,l,h,d,m,x]};Ud.init=()=>new L.PM.Matrix(1,0,0,1,0,0),Ud.prototype={transform(a){return this._transform(a.clone())},_transform(a){let l=this._matrix,{x:h,y:d}=a;return a.x=l[0]*h+l[1]*d+l[4],a.y=l[2]*h+l[3]*d+l[5],a},untransform(a){let l=this._matrix;return new L.Point((a.x/l[0]-l[4])/l[0],(a.y/l[2]-l[5])/l[2])},clone(){let a=this._matrix;return new L.PM.Matrix(a[0],a[1],a[2],a[3],a[4],a[5])},translate(a){if(a===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let l,h;return typeof a=="number"?(l=a,h=a):(l=a.x,h=a.y),this._add(1,0,0,1,l,h)},scale(a,l){if(a===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let h,d;return l=l||L.point(0,0),typeof a=="number"?(h=a,d=a):(h=a.x,d=a.y),this._add(h,0,0,d,l.x,l.y)._add(1,0,0,1,-l.x,-l.y)},rotate(a,l){let h=Math.cos(a),d=Math.sin(a);return l=l||new L.Point(0,0),this._add(h,d,-d,h,l.x,l.y)._add(1,0,0,1,-l.x,-l.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(a,l,h,d,m,x){let b=[[],[],[]],E=this._matrix,M=[[E[0],E[2],E[4]],[E[1],E[3],E[5]],[0,0,1]],A=[[a,h,m],[l,d,x],[0,0,1]],K;a&&a instanceof L.PM.Matrix&&(E=a._matrix,A=[[E[0],E[2],E[4]],[E[1],E[3],E[5]],[0,0,1]]);for(let j=0;j<3;j+=1)for(let vt=0;vt<3;vt+=1){K=0;for(let bt=0;bt<3;bt+=1)K+=M[j][bt]*A[bt][vt];b[j][vt]=K}return this._matrix=[b[0][0],b[1][0],b[0][1],b[1][1],b[0][2],b[1][2]],this}};var e1=Ud,n1={calcMiddleLatLng(a,l,h){let d=a.project(l),m=a.project(h);return a.unproject(d._add(m)._divideBy(2))},findLayers(a){let l=[];return a.eachLayer(h=>{(h instanceof L.Polyline||h instanceof L.Marker||h instanceof L.Circle||h instanceof L.CircleMarker||h instanceof L.ImageOverlay)&&l.push(h)}),l=l.filter(h=>!!h.pm),l=l.filter(h=>!h._pmTempLayer),l=l.filter(h=>!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1),l},circleToPolygon(a,l=60,h=!0){let d=a.getLatLng(),m=a.getRadius(),x=Fu(d,m,l,0,h),b=[];for(let E=0;E<x.length;E+=1){let M=[x[E].lat,x[E].lng];b.push(M)}return L.polygon(b,a.options)},disablePopup(a){a.getPopup()&&(a._tempPopupCopy=a.getPopup(),a.unbindPopup())},enablePopup(a){a._tempPopupCopy&&(a.bindPopup(a._tempPopupCopy),delete a._tempPopupCopy)},_fireEvent(a,l,h,d=!1){a.fire(l,h,d);let{groups:m}=this.getAllParentGroups(a);m.forEach(x=>{x.fire(l,h,d)})},getAllParentGroups(a){let l=[],h=[],d=m=>{for(let x in m._eventParents)if(l.indexOf(x)===-1){l.push(x);let b=m._eventParents[x];h.push(b),d(b)}};return!a._pmLastGroupFetch||!a._pmLastGroupFetch.time||new Date().getTime()-a._pmLastGroupFetch.time>1e3?(d(a),a._pmLastGroupFetch={time:new Date().getTime(),groups:h,groupIds:l},{groupIds:l,groups:h}):{groups:a._pmLastGroupFetch.groups,groupIds:a._pmLastGroupFetch.groupIds}},createGeodesicPolygon:Fu,getTranslation:ke,findDeepCoordIndex(a,l,h=!0){let d,m=b=>(E,M)=>{let A=b.concat(M);if(h){if(E.lat&&E.lat===l.lat&&E.lng===l.lng)return d=A,!0}else if(E.lat&&L.latLng(E).equals(l))return d=A,!0;return Array.isArray(E)&&E.some(m(A))};a.some(m([]));let x={};return d&&(x={indexPath:d,index:d[d.length-1],parentPath:d.slice(0,d.length-1)}),x},findDeepMarkerIndex(a,l){let h,d=x=>(b,E)=>{let M=x.concat(E);return b._leaflet_id===l._leaflet_id?(h=M,!0):Array.isArray(b)&&b.some(d(M))};a.some(d([]));let m={};return h&&(m={indexPath:h,index:h[h.length-1],parentPath:h.slice(0,h.length-1)}),m},_getIndexFromSegment(a,l){if(l&&l.length===2){let h=this.findDeepCoordIndex(a,l[0]),d=this.findDeepCoordIndex(a,l[1]),m=Math.max(h.index,d.index);return(h.index===0||d.index===0)&&m!==1&&(m+=1),{indexA:h,indexB:d,newIndex:m,indexPath:h.indexPath,parentPath:h.parentPath}}return null},_getRotatedRectangle(a,l,h,d){let m=il(d,a),x=il(d,l),b=h*Math.PI/180,E=Math.cos(b),M=Math.sin(b),A=(x.x-m.x)*E+(x.y-m.y)*M,K=(x.y-m.y)*E-(x.x-m.x)*M,j=A*E+m.x,vt=A*M+m.y,bt=-K*M+m.x,Vt=K*E+m.y,re=vf(d,m),ce=vf(d,{x:j,y:vt}),We=vf(d,x),q=vf(d,{x:bt,y:Vt});return[re,ce,We,q]},pxRadiusToMeterRadius(a,l,h){let d=l.project(h),m=L.point(d.x+a,d.y);return l.distance(l.unproject(m),h)}},r1=n1;L.PM=L.PM||{version:ec.version,Map:ef,Toolbar:pc,Draw:lr,Edit:vr,Utils:r1,Matrix:e1,activeLang:"en",optIn:!1,initialize(a){this.addInitHooks(a)},setOptIn(a){this.optIn=!!a},addInitHooks(){function a(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(a);function l(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(l);function h(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(h);function d(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(d);function m(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(m);function x(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(x);function b(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(b);function E(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(E);function M(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(M)},reInitLayer(a){a instanceof L.LayerGroup&&a.eachLayer(l=>{this.reInitLayer(l)}),a.pm||L.PM.optIn&&a.options.pmIgnore!==!1||a.options.pmIgnore||(a instanceof L.Map?a.pm=new L.PM.Map(a):a instanceof L.Marker?a.options.textMarker?(a.pm=new L.PM.Edit.Text(a),a.pm._initTextMarker(),a.pm._createTextMarker(!1)):a.pm=new L.PM.Edit.Marker(a):a instanceof L.Circle?a.pm=new L.PM.Edit.Circle(a):a instanceof L.CircleMarker?a.pm=new L.PM.Edit.CircleMarker(a):a instanceof L.Rectangle?a.pm=new L.PM.Edit.Rectangle(a):a instanceof L.Polygon?a.pm=new L.PM.Edit.Polygon(a):a instanceof L.Polyline?a.pm=new L.PM.Edit.Line(a):a instanceof L.LayerGroup?a.pm=new L.PM.Edit.LayerGroup(a):a instanceof L.ImageOverlay&&(a.pm=new L.PM.Edit.ImageOverlay(a)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(a){let l=this._map.mouseEventToLayerPoint(a),h,d;for(let m=this._drawFirst;m;m=m.next)h=m.layer,h.options.interactive&&h._containsPoint(l)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(h))&&(d=h);d&&(L.DomEvent.fakeStop(a),this._fireEvent([d],a))}}),L.PM.initialize()})();function q3(){const e=de(null),t=de(null),n=P=>`${(P*100).toFixed(1)}%`,r=P=>`${((P%360+360)%360).toFixed(1)}°`,i=P=>(P%360+360)%360,o=(P,R,O)=>{const H=i(R);let U=i(O)-H;return U<=0&&(U+=360),Math.PI*P*U/180},u=(P,R,O)=>{const H=i(R);let U=i(O)-H;return U<=0&&(U+=360),Math.PI*P*P*U/360},f=P=>{if("getLatLngs"in P){const R=P.getLatLngs(),O=rp([R[0].map(H=>[H.lng,H.lat])]);return oh(O)}return 0},p=P=>{if("getLatLngs"in P){const R=P.getLatLngs();if(Array.isArray(R)){const O=hu(R.map(H=>[H.lng,H.lat]));return yl(O,{units:"meters"})}}return 0},_=P=>{if("getLatLngs"in P){const R=P.getLatLngs(),O=hu([...R[0].map(H=>[H.lng,H.lat]),[R[0][0].lng,R[0][0].lat]]);return yl(O,{units:"meters"})}return 0},y=P=>P._mRadius?P._mRadius:0,C=(P,R)=>{const O={type:R,style:P.options};switch(R){case"Circle":O.radius=y(P),O.diameter=O.radius*2,O.area=Math.PI*Math.pow(O.radius,2),O.perimeter=2*Math.PI*O.radius,O.center=P.getLatLng();break;case"Semicircle":O.radius=y(P),O.diameter=O.radius*2,O.center=P.getLatLng(),O.startAngle=i(P.options.startAngle||0),O.stopAngle=i(P.options.stopAngle||180),O.arcLength=o(O.radius,O.startAngle,O.stopAngle),O.area=u(O.radius,O.startAngle,O.stopAngle),O.chordLength=2*O.radius*Math.abs(Math.sin((O.stopAngle-O.startAngle)*Math.PI/360));break;case"Rectangle":case"Polygon":O.area=f(P),O.perimeter=_(P);break;case"Line":case"Polyline":if(O.length=p(P),P.elevation){const H=P.elevation.gain,X=O.length;O.slope=H/X}break}return O},S=P=>{e.value=P,P?t.value=C(P.layer,P.type):t.value=null},k=en(()=>{if(!t.value)return null;const P={...t.value};return P.area&&(P.areaFormatted=`${(P.area/1e4).toFixed(2)} ha`),P.length&&(P.lengthFormatted=`${P.length.toFixed(1)} m`),P.arcLength&&(P.arcLengthFormatted=`${P.arcLength.toFixed(1)} m`),P.perimeter&&(P.perimeterFormatted=`${(P.perimeter/1e3).toFixed(2)} km`),P.radius&&(P.radiusFormatted=`${P.radius.toFixed(1)} m`),P.diameter&&(P.diameterFormatted=`${P.diameter.toFixed(1)} m`),P.width&&(P.widthFormatted=`${P.width.toFixed(1)} m`),P.height&&(P.heightFormatted=`${P.height.toFixed(1)} m`),P.chordLength&&(P.chordLengthFormatted=`${P.chordLength.toFixed(1)} m`),P.slope&&(P.slopeFormatted=n(P.slope)),P.startAngle&&(P.startAngleFormatted=r(P.startAngle)),P.stopAngle&&(P.stopAngleFormatted=r(P.stopAngle)),P});return{selectedShape:e,shapeProperties:t,formattedProperties:k,updateSelectedShape:S,calculateProperties:C,normalizeAngle:i,calculateArcLength:o,calculateSectorArea:u}}class Fc extends ue.Polygon{constructor(n,r,i=0,o=180,u={}){super([[]],{...u,pmIgnore:!1,interactive:!0,className:"leaflet-semicircle"});me(this,"center");me(this,"radius");me(this,"startAngle");me(this,"stopAngle");me(this,"numPoints");me(this,"properties");me(this,"pm");this.center=n,this.radius=r,this.startAngle=this.normalizeAngle(i),this.stopAngle=this.normalizeAngle(o),this.numPoints=64,this.properties={type:"Semicircle",radius:this.radius,startAngle:this.startAngle,stopAngle:this.stopAngle,style:{...u,startAngle:this.startAngle,stopAngle:this.stopAngle}},this.on("pm:enable",f=>{var p;this.pm&&(this.pm._layers=[],this.pm._markers=[],(p=this.pm._markerGroup)==null||p.clearLayers())}),this.on("pm:vertexadded",f=>{var p;this.pm&&((p=this.pm._markerGroup)==null||p.clearLayers())}),this.on("add",()=>{this._map&&(this.updateGeometry(),this.pm&&this.pm.enable({allowSelfIntersection:!1,preventMarkerRemoval:!0}))})}normalizeAngle(n){return(n%360+360)%360}calculateArcPoints(){if(!this._map)return[];const n=[],r=(this.stopAngle-this.startAngle+360)%360;n.push(this.center);for(let i=0;i<=this.numPoints;i++){const u=(this.startAngle+r*i/this.numPoints)*Math.PI/180,f=this.radius*Math.cos(u),_=this.radius*Math.sin(u)/111319.9,y=f/(111319.9*Math.cos(this.center.lat*Math.PI/180)),C=ue.latLng(this.center.lat+_,this.center.lng+y);n.push(C)}return n.push(this.center),n}setRadius(n){return n<=0?this:(this.radius=n,this.properties.radius=n,this.updateGeometry(),this)}setAngles(n,r){return this.startAngle=this.normalizeAngle(n),this.stopAngle=this.normalizeAngle(r),this.properties.startAngle=this.startAngle,this.properties.stopAngle=this.stopAngle,this.properties.style.startAngle=this.startAngle,this.properties.style.stopAngle=this.stopAngle,this.updateGeometry(),this}setOpeningAngle(n){return n<0||n>360?this:(this.stopAngle=this.normalizeAngle(this.startAngle+n),this.updateGeometry(),this)}setCenter(n){return!n.lat||!n.lng?this:(this.center=n,this.updateGeometry(),this)}getCenter(){return this.center}getRadius(){return this.radius}getStartAngle(){return this.startAngle}getStopAngle(){return this.stopAngle}getOpeningAngle(){return(this.stopAngle-this.startAngle+360)%360}updateGeometry(){if(!this._map)return;const n=this.calculateArcPoints();n.length>0&&this.setLatLngs([n])}toGeoJSON(){const n=super.toGeoJSON();return{...n,properties:{...n.properties,type:"Semicircle",radius:this.radius,startAngle:this.startAngle,stopAngle:this.stopAngle}}}}const dp=(e,t)=>{if(!e||typeof e!="string"||!e.startsWith("#"))return`rgba(0, 0, 0, ${t})`;const n=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16);return`rgba(${n}, ${r}, ${i}, ${t})`},A0=(e,t)=>{e.style.fontSize=t.fontSize,e.style.color=t.color,e.style.backgroundColor=dp(t.backgroundColor,t.backgroundOpacity),t.hasBorder?e.style.border=`${t.borderWidth} solid ${dp(t.borderColor,t.borderOpacity)}`:e.style.border="none",e.style.padding=t.padding,e.style.borderRadius=t.borderRadius},ii=e=>{document.querySelectorAll(".drawing-help-message").forEach(r=>r.remove());const n=ue.DomUtil.create("div","drawing-help-message");return n.innerHTML=e,n.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(n),n};function fg(e,t,n){const r=156543.03392*Math.cos(t*Math.PI/180)/Math.pow(2,n);return e/r}const vn=(e,t="m",n="")=>{let r,i;return t==="m²"?e>=1e4?(r=(e/1e4).toFixed(2),i="ha"):(r=e.toFixed(2),i="m²"):t==="m"?e>=1e3?(r=(e/1e3).toFixed(2),i="km"):(r=e.toFixed(2),i="m"):(r=e.toFixed(2),i=t),n?`${n}: ${r} ${i}`:`${r} ${i}`},H3=e=>`${((e%360+360)%360).toFixed(1)}°`;function Z3(){const e=de(null),t=de(null),n=de(""),r=de(null),i=de(!1),o=($,it="Double-cliquez pour éditer")=>{const xt={fontSize:"14px",color:"#000000",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderWidth:"1px",borderOpacity:1,padding:"5px 10px",borderRadius:"3px",hasBorder:!0,rotation:0,physicalSize:2},nt=(jt,Ot)=>{var Mt;const ee=((Mt=e.value)==null?void 0:Mt.getZoom())||14,ne=$.lat,Jt=fg(Ot.physicalSize,ne,ee);return`<div class="text-container" style="width:${Jt}px;height:${Jt}px;transform:rotate(${Ot.rotation}deg)">
        <div class="text-annotation" style="font-size:${Jt*.2}px;color:${Ot.color};background-color:${dp(Ot.backgroundColor,Ot.backgroundOpacity)};border:${Ot.hasBorder?Ot.borderWidth+" solid "+dp(Ot.borderColor,Ot.borderOpacity):"none"};padding:${Ot.padding};border-radius:${Ot.borderRadius}">${jt}</div>
        <div class="text-controls"><div class="control-button rotate"></div><div class="control-button move"></div></div>
      </div>`},Et=()=>{if(!e.value)return;const jt=e.value.getZoom(),Ot=W.getLatLng().lat,ee=fg(W.properties.style.physicalSize,Ot,jt),ne=W.getIcon();ne.options.iconSize=[ee,ee],ne.options.iconAnchor=[ee/2,ee/2],ne.options.html=nt(W.properties.text,W.properties.style),W.setIcon(ne)},At=ue.divIcon({html:nt(it,xt),className:"text-container",iconSize:[40,40],iconAnchor:[20,20]}),W=ue.marker($,{icon:At,draggable:!1,pmIgnore:!0});W.properties={type:"text",text:it,style:{...xt}},e.value&&(e.value.on("zoomend",Et),W.on("remove",()=>{var jt;(jt=e.value)==null||jt.off("zoomend",Et)})),Et();let V=!1,rt=!1,ht=0,st=0;const ft=jt=>{if(!e.value)return;const Ot=jt.target;if(Ot.classList.contains("rotate")){V=!0;const ee=W.getLatLng(),ne=e.value.mouseEventToLatLng(jt);ht=Math.atan2(ne.lat-ee.lat,ne.lng-ee.lng)*180/Math.PI,st=W.properties.style.rotation||0}else Ot.classList.contains("move")&&(rt=!0,e.value.latLngToLayerPoint(W.getLatLng()));document.addEventListener("mousemove",Tt),document.addEventListener("mouseup",Pt)},Tt=jt=>{if(!(!e.value||!V&&!rt)){if(V){const Ot=W.getLatLng(),ee=e.value.mouseEventToLatLng(jt),ne=Math.atan2(ee.lat-Ot.lat,ee.lng-Ot.lng)*180/Math.PI,Jt=(st+(ne-ht))%360;W.properties.style.rotation=Jt;const Mt=W.getIcon();Mt.options.html=nt(W.properties.text,W.properties.style),W.setIcon(Mt)}else if(rt){const Ot=e.value.mouseEventToLatLng(jt);W.setLatLng(Ot)}}},Pt=()=>{V=!1,rt=!1,document.removeEventListener("mousemove",Tt),document.removeEventListener("mouseup",Pt)};return W.on("add",()=>{const jt=W.getElement();jt&&jt.querySelectorAll(".control-button").forEach(ee=>{ee.addEventListener("mousedown",ft)})}),W.on("remove",()=>{const jt=W.getElement();jt&&jt.querySelectorAll(".control-button").forEach(ee=>{ee.removeEventListener("mousedown",ft)})}),W.on("dblclick",jt=>{var Ht;ue.DomEvent.stopPropagation(jt);const Ot=(Ht=W.getElement())==null?void 0:Ht.querySelector(".text-annotation");if(!Ot)return;Ot.contentEditable="true",Ot.focus(),Ot.classList.add("editing");const ee=window.getSelection(),ne=document.createRange();ne.selectNodeContents(Ot),ee==null||ee.removeAllRanges(),ee==null||ee.addRange(ne);const Jt=()=>{Ot.contentEditable="false",Ot.classList.remove("editing");const Kt=Ot.innerText.trim();if(Kt){W.properties.text=Kt;const ie=W.getIcon();ie.options.html=nt(Kt,W.properties.style),W.setIcon(ie)}Ot.removeEventListener("blur",Jt),Ot.removeEventListener("keydown",Mt)},Mt=Kt=>{Kt.key==="Enter"&&!Kt.shiftKey&&(Kt.preventDefault(),Jt())};Ot.addEventListener("blur",Jt),Ot.addEventListener("keydown",Mt)}),W},u=($,it)=>{const xt=ue.DomUtil.create("div","measure-tooltip");if(xt.innerHTML=it,xt.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(xt),e.value){const nt=e.value.latLngToContainerPoint($);xt.style.left=`${nt.x+10}px`,xt.style.top=`${nt.y-25}px`}return xt},f=($,it,xt)=>{$.on("mouseover",()=>{const nt=u($.getLatLng(),xt());$.measureDiv=nt}),$.on("mousemove",nt=>{if($.measureDiv&&e.value){const Et=e.value.latLngToContainerPoint(nt.latlng);$.measureDiv.style.left=`${Et.x+10}px`,$.measureDiv.style.top=`${Et.y-25}px`}}),$.on("mouseout",()=>{$.measureDiv&&($.measureDiv.remove(),$.measureDiv=null)})};q3();let p=[];const _=()=>{p.forEach($=>{$&&$.remove&&("measureDiv"in $&&$.measureDiv&&($.measureDiv.remove(),$.measureDiv=void 0),t.value&&t.value.removeLayer($),$.remove())}),p=[],document.querySelectorAll(".measure-tooltip").forEach($=>{$.remove()})},y=($,it="#2563EB")=>{const xt=ue.circleMarker($,{radius:6,color:it,fillColor:it,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return t.value&&t.value.addLayer(xt),xt},C=($,it)=>{var nt,Et,At,W,V,rt;const xt={type:it,style:$.options||{}};try{if($ instanceof ue.Circle){const ht=$.getRadius(),st=$.getLatLng();xt.radius=ht,xt.diameter=ht*2,xt.area=Math.PI*Math.pow(ht,2),xt.perimeter=2*Math.PI*ht,xt.center=st,xt.surfaceInterieure=xt.area,xt.surfaceExterieure=xt.area}else if($ instanceof Fc){const ht=$.getRadius(),st=$.getCenter(),ft=$.getStartAngle(),Tt=$.getStopAngle(),Pt=$.getOpeningAngle(),jt=Math.PI*Math.pow(ht,2)*Pt/360,ee=2*Math.PI*ht*Pt/360+2*ht;xt.radius=ht,xt.diameter=ht*2,xt.area=jt,xt.perimeter=ee,xt.center=st,xt.startAngle=ft,xt.stopAngle=Tt,xt.openingAngle=Pt,xt.surfaceInterieure=jt,xt.surfaceExterieure=jt}else if($ instanceof ue.Rectangle){const ht=$.getBounds(),st=ht.getNorthEast(),ft=ht.getSouthWest(),Tt=sh([ft.lng,ft.lat],[st.lng,ft.lat],{units:"meters"}),Pt=sh([ft.lng,ft.lat],[ft.lng,st.lat],{units:"meters"});xt.width=Tt,xt.height=Pt,xt.area=Tt*Pt,xt.perimeter=2*(Tt+Pt),xt.surfaceInterieure=xt.area,xt.surfaceExterieure=xt.area,xt.dimensions={width:Tt,height:Pt}}else if($ instanceof ue.Polygon){const st=$.getLatLngs()[0].map(Tt=>[Tt.lng,Tt.lat]);st.push(st[0]);const ft=rp([st]);xt.area=oh(ft),xt.perimeter=yl(hu([...st]),{units:"meters"}),xt.surfaceInterieure=xt.area,xt.surfaceExterieure=xt.area}else if($ instanceof ue.Polyline&&!($ instanceof ue.Polygon)){const st=$.getLatLngs().map(Pt=>[Pt.lng,Pt.lat]),ft=hu(st);xt.length=yl(ft,{units:"meters"});const Tt=10;xt.surfaceInfluence=xt.length*Tt,xt.dimensions={width:Tt}}xt.style={...xt.style,color:((nt=$.options)==null?void 0:nt.color)||"#3388ff",weight:((Et=$.options)==null?void 0:Et.weight)||3,opacity:((At=$.options)==null?void 0:At.opacity)||1,fillColor:((W=$.options)==null?void 0:W.fillColor)||"#3388ff",fillOpacity:((V=$.options)==null?void 0:V.fillOpacity)||.2,dashArray:((rt=$.options)==null?void 0:rt.dashArray)||""}}catch(ht){console.error("Error calculating shape properties:",ht)}return xt},S=($,it=2)=>{var W;if(!e.value){console.warn("Map is not available for text size update");return}const xt=e.value.getZoom(),nt=$.getLatLng().lat,Et=fg(it,nt,xt),At=(W=$.getElement())==null?void 0:W.querySelector(".text-annotation");At&&($.properties.style.fontSize=`${Et}px`,$.properties.physicalWidth=it,$.properties.physicalHeight=it,A0(At,$.properties.style))},k=($,it,xt)=>{const nt=ue.map($).setView(it,xt);e.value=nt,ue.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors"}).addTo(nt);const Et=new ue.FeatureGroup;return Et.addTo(nt),t.value=Et,nt.pm.addControls({position:"topleft",drawMarker:!1,drawPolyline:!1,drawRectangle:!1,drawPolygon:!1,drawCircle:!1,drawCircleMarker:!1,drawText:!1,editMode:!1,dragMode:!1,cutPolygon:!1,removalMode:!1}),nt.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:Et,templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),nt.on("pm:drawstart",At=>{i.value=!0,At.shape==="Circle"&&n.value==="Semicircle"&&(nt.getContainer().style.cursor="crosshair")}),nt.on("pm:drawend",()=>{i.value=!1,nt.getContainer().style.cursor="",r.value&&ii("Cliquez sur la forme pour afficher les points de contrôle")}),nt.on("pm:create",async At=>{var rt,ht,st;const W=At.layer;(rt=t.value)==null||rt.addLayer(W);let V="unknown";if(W instanceof ue.Circle?V=n.value==="Semicircle"?"Semicircle":"Circle":W instanceof ue.Rectangle?V="Rectangle":W instanceof ue.Polygon?V="Polygon":W instanceof ue.Polyline&&!(W instanceof ue.Polygon)&&(V="Line"),W.properties=C(W,V),r.value=W,V==="Semicircle"){const ft=W.getLatLng(),Tt=W.getRadius();(ht=t.value)==null||ht.removeLayer(W);const Pt=new Fc(ft,Tt);Pt.properties=C(Pt,"Semicircle"),(st=t.value)==null||st.addLayer(Pt),r.value=Pt,kt(Pt)}else W instanceof ue.Circle?U(W):W instanceof ue.Rectangle?ut(W):W instanceof ue.Polygon?ot(W):W instanceof ue.Polyline&&!(W instanceof ue.Polygon)&&It(W);ii("Cliquez sur la forme pour afficher les points de contrôle")}),nt.on("click",At=>{At.target===nt&&(_(),r.value=null,document.querySelectorAll(".drawing-help-message").forEach(V=>V.remove()))}),Et.on("click",At=>{var V,rt,ht;ue.DomEvent.stopPropagation(At);const W=At.layer;_(),(V=document.querySelector(".drawing-help-message"))==null||V.remove(),r.value=W,W instanceof Fc||((rt=W.properties)==null?void 0:rt.type)==="Semicircle"?(W.pm&&(W.pm._layers=[],W.pm._markers=[],(ht=W.pm._markerGroup)==null||ht.clearLayers()),kt(W)):W instanceof ue.Circle?U(W):W instanceof ue.Rectangle?ut(W):W instanceof ue.Polygon?ot(W):W instanceof ue.Polyline&&!(W instanceof ue.Polygon)&&It(W)}),nt.on("pm:edit",At=>{var V;const W=At.layer;if(W){let rt="unknown";W instanceof ue.Circle?rt=((V=W.properties)==null?void 0:V.type)==="Semicircle"?"Semicircle":"Circle":W instanceof ue.Rectangle?rt="Rectangle":W instanceof ue.Polygon?rt="Polygon":W instanceof ue.Polyline&&!(W instanceof ue.Polygon)&&(rt="Line");const ht=C(W,rt);W.properties={...W.properties,...ht,type:rt},W===r.value&&(r.value=W,rt==="Semicircle"?kt(W):W instanceof ue.Circle?U(W):W instanceof ue.Rectangle?ut(W):W instanceof ue.Polygon?ot(W):W instanceof ue.Polyline&&It(W),ii("Utilisez les points de contrôle pour modifier la forme"))}}),nt.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(At=>At.remove()),ii("Déplacez la forme à l'endroit souhaité")}),nt.on("pm:dragend",()=>{setTimeout(()=>{ii("Cliquez sur la forme pour afficher les points de contrôle")},100)}),nt.on("pm:remove",()=>{var At;(At=document.querySelector(".drawing-help-message"))==null||At.remove()}),nt.on("pm:select",At=>{var V;const W=At.layer;document.querySelectorAll(".drawing-help-message").forEach(rt=>rt.remove()),W instanceof Fc||((V=W.properties)==null?void 0:V.type)==="Semicircle"?ii(`Points de contrôle : <span style="color: #059669">●</span> Ajuster le rayon, <span style="color: #2563EB">●</span> et <span style="color: #DC2626">●</span> Modifier l'ouverture du demi-cercle`):ii("Utilisez les points de contrôle pour modifier la forme")}),nt.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(At=>At.remove())}),nt},P=()=>{if(!e.value||!t.value)return;const $=t.value.getBounds();$.isValid()&&e.value.fitBounds($,{padding:[50,50],maxZoom:19})},R=$=>{if(e.value){if(document.querySelectorAll(".drawing-help-message").forEach(it=>it.remove()),e.value.pm.disableDraw(),e.value.pm.disableGlobalEditMode(),e.value.pm.disableGlobalDragMode(),e.value.pm.disableGlobalRemovalMode(),_(),n.value=$,!$){_();return}setTimeout(()=>{var it,xt,nt,Et,At,W,V;switch($){case"Circle":ii("Cliquez et maintenez pour dessiner un cercle, relâchez pour terminer"),(it=e.value)==null||it.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Semicircle":ii("Cliquez et maintenez pour dessiner un demi-cercle, relâchez pour terminer"),(xt=e.value)==null||xt.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Rectangle":ii("Cliquez et maintenez pour dessiner un rectangle, relâchez pour terminer"),(nt=e.value)==null||nt.pm.enableDraw("Rectangle",{finishOn:"mouseup"});break;case"Polygon":ii("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(Et=e.value)==null||Et.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Line":ii("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(At=e.value)==null||At.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Text":if(ii("Cliquez pour ajouter du texte, double-cliquez pour éditer"),e.value){const rt=ht=>{if(!e.value||!t.value)return;const st=o(ht.latlng);t.value.addLayer(st),r.value=st,e.value.off("click",rt),R("")};e.value.on("click",rt)}break;case"drag":ii("Cliquez et maintenez une forme pour la déplacer"),(W=e.value)==null||W.pm.enableGlobalDragMode();break;case"delete":ii("Cliquez sur une forme pour la supprimer"),(V=e.value)==null||V.pm.enableGlobalRemovalMode();break}},100)}},O=$=>{var xt;if(!r.value)return;const it=r.value;if(it.properties=it.properties||{},it.properties.style=it.properties.style||{},it.properties.style={...it.properties.style,...$},it.properties.type==="text"){const nt=it.properties._textLayer,Et=(xt=nt==null?void 0:nt.getElement())==null?void 0:xt.querySelector(".text-annotation");Et&&A0(Et,it.properties.style);const At={color:$.borderColor||it.properties.style.borderColor,weight:parseInt($.borderWidth||it.properties.style.borderWidth),opacity:$.borderOpacity??it.properties.style.borderOpacity};"setStyle"in it&&it.setStyle(At)}else{const nt={};$.fillColor&&(nt.fillColor=$.fillColor),$.fillOpacity!==void 0&&(nt.fillOpacity=$.fillOpacity),$.strokeColor&&(nt.color=$.strokeColor),$.strokeOpacity!==void 0&&(nt.opacity=$.strokeOpacity),$.strokeWidth!==void 0&&(nt.weight=$.strokeWidth),$.dashArray&&(nt.dashArray=$.dashArray),"setStyle"in it&&it.setStyle(nt)}},H=$=>{if(!r.value)return;const it=r.value;it.properties={...it.properties,...$},$.radius&&it instanceof ue.Circle&&it.setRadius($.radius)},X=($,it)=>ue.latLng(($.lat+it.lat)/2,($.lng+it.lng)/2),U=$=>{if(!e.value||!t.value)return;_();const it=$.getLatLng(),xt=$.getRadius(),nt=y(it,"#059669");p.push(nt),f(nt,$,()=>{const Et=Math.PI*xt*xt;return[vn(xt,"m","Rayon"),vn(Et,"m²","Surface")].join("<br>")}),nt.on("mousedown",Et=>{if(!e.value)return;ue.DomEvent.stopPropagation(Et),e.value.dragging.disable(),_(),p=[nt];let At=!0;const W=rt=>{At&&($.setLatLng(rt.latlng),nt.setLatLng(rt.latlng))},V=()=>{At=!1,e.value&&(e.value.off("mousemove",W),document.removeEventListener("mouseup",V),e.value.dragging.enable(),U($))};e.value.on("mousemove",W),document.addEventListener("mouseup",V)}),[0,45,90,135,180,225,270,315].forEach(Et=>{const At=Et*Math.PI/180,W=ue.latLng(it.lat+xt/111319.9*Math.sin(At),it.lng+xt/(111319.9*Math.cos(it.lat*Math.PI/180))*Math.cos(At)),V=y(W,"#2563EB");p.push(V),f(V,$,()=>{const rt=it.distanceTo(V.getLatLng());return vn(rt,"m","Distance du centre")}),V.on("mousedown",rt=>{if(!e.value)return;ue.DomEvent.stopPropagation(rt),e.value.dragging.disable(),_(),p=[V];let ht=!0;const st=Tt=>{if(!ht)return;const Pt=it.distanceTo(Tt.latlng);$.setRadius(Pt),V.setLatLng(Tt.latlng)},ft=()=>{ht=!1,e.value&&(e.value.off("mousemove",st),document.removeEventListener("mouseup",ft),e.value.dragging.enable(),U($))};e.value.on("mousemove",st),document.addEventListener("mouseup",ft)})})},ut=$=>{if(!e.value||!t.value)return;_();const it=$.getBounds(),xt=[it.getNorthWest(),it.getNorthEast(),it.getSouthEast(),it.getSouthWest()];xt.forEach((Et,At)=>{const W=y(Et,"#059669");p.push(W),f(W,$,()=>{const V=$.getBounds(),rt=V.getNorthEast().distanceTo(V.getNorthWest()),ht=V.getNorthWest().distanceTo(V.getSouthWest()),st=rt*ht;return[vn(rt,"m","Largeur"),vn(ht,"m","Hauteur"),vn(st,"m²","Surface")].join("<br>")}),W.on("mousedown",V=>{if(!e.value)return;ue.DomEvent.stopPropagation(V),e.value.dragging.disable();let rt=!0;const ht=ft=>{if(!rt)return;xt[At]=ft.latlng;const Tt=ue.latLngBounds([[Math.min(xt[0].lat,xt[2].lat),Math.min(xt[0].lng,xt[2].lng)],[Math.max(xt[0].lat,xt[2].lat),Math.max(xt[0].lng,xt[2].lng)]]);$.setBounds(Tt),W.setLatLng(ft.latlng),nt()},st=()=>{rt=!1,e.value&&(e.value.off("mousemove",ht),document.removeEventListener("mouseup",st),e.value.dragging.enable(),ut($))};e.value.on("mousemove",ht),document.addEventListener("mouseup",st)})});const nt=()=>{const Et=$.getBounds(),At=[Et.getNorthWest(),Et.getNorthEast(),Et.getSouthEast(),Et.getSouthWest()];p.slice(4).forEach(V=>{t.value&&t.value.removeLayer(V)}),p=p.slice(0,4),[[At[0],At[1]],[At[1],At[2]],[At[2],At[3]],[At[3],At[0]]].forEach((V,rt)=>{const ht=X(V[0],V[1]),st=y(ht,"#2563EB");p.push(st),f(st,$,()=>{const ft=$.getBounds(),Tt=rt===1||rt===3;let Pt;return Tt?(Pt=ft.getNorth()-ft.getSouth(),[vn(Pt,"m","Hauteur totale"),vn(Pt/2,"m","Demi-hauteur")].join("<br>")):(Pt=ft.getEast()-ft.getWest(),[vn(Pt,"m","Largeur totale"),vn(Pt/2,"m","Demi-largeur")].join("<br>"))}),st.on("mousedown",ft=>{if(!e.value)return;ue.DomEvent.stopPropagation(ft),e.value.dragging.disable();let Tt=!0;const Pt=Ot=>{if(!Tt)return;const ee=rt===1||rt===3,ne=$.getBounds(),Jt=[ne.getNorthWest(),ne.getNorthEast(),ne.getSouthEast(),ne.getSouthWest()];if(ee){const Ht=Ot.latlng.lng;rt===1?(Jt[1].lng=Ht,Jt[2].lng=Ht):(Jt[0].lng=Ht,Jt[3].lng=Ht)}else{const Ht=Ot.latlng.lat;rt===0?(Jt[0].lat=Ht,Jt[1].lat=Ht):(Jt[2].lat=Ht,Jt[3].lat=Ht)}const Mt=ue.latLngBounds([[Math.min(Jt[0].lat,Jt[2].lat),Math.min(Jt[0].lng,Jt[2].lng)],[Math.max(Jt[0].lat,Jt[2].lat),Math.max(Jt[0].lng,Jt[2].lng)]]);$.setBounds(Mt),st.setLatLng(Ot.latlng),nt()},jt=()=>{Tt=!1,e.value&&(e.value.off("mousemove",Pt),document.removeEventListener("mouseup",jt),e.value.dragging.enable(),ut($))};e.value.on("mousemove",Pt),document.addEventListener("mouseup",jt)})})};nt()},It=$=>{if(!e.value||!t.value)return;_();const it=$.getLatLngs();it.forEach((nt,Et)=>{const At=y(nt,"#059669");p.push(At),f(At,$,()=>{const W=it.reduce((rt,ht,st)=>st===0?0:rt+ht.distanceTo(it[st-1]),0);let V=it.slice(0,Et+1).reduce((rt,ht,st)=>st===0?0:rt+ht.distanceTo(it[st-1]),0);return[vn(V,"m","Distance depuis le début"),vn(W,"m","Longueur totale")].join("<br>")}),At.on("mousedown",W=>{if(!e.value)return;ue.DomEvent.stopPropagation(W),e.value.dragging.disable();let V=!0;const rt=st=>{V&&(it[Et]=st.latlng,$.setLatLngs(it),At.setLatLng(st.latlng),xt())},ht=()=>{V=!1,e.value&&(e.value.off("mousemove",rt),document.removeEventListener("mouseup",ht),e.value.dragging.enable(),It($))};e.value.on("mousemove",rt),document.addEventListener("mouseup",ht)})});const xt=()=>{p.slice(it.length).forEach(nt=>{t.value&&t.value.removeLayer(nt)}),p=p.slice(0,it.length);for(let nt=0;nt<it.length-1;nt++){const Et=X(it[nt],it[nt+1]),At=y(Et,"#2563EB");p.push(At),f(At,$,()=>{const W=it[nt].distanceTo(it[nt+1]),V=it.reduce((ht,st,ft)=>ft===0?0:ht+st.distanceTo(it[ft-1]),0),rt=it.slice(0,nt+1).reduce((ht,st,ft)=>ft===0?0:ht+st.distanceTo(it[ft-1]),0)+W/2;return[vn(W,"m","Longueur du segment"),vn(W/2,"m","Demi-segment"),vn(rt,"m","Distance depuis le début"),vn(V,"m","Longueur totale")].join("<br>")}),At.on("mousedown",W=>{if(!e.value)return;ue.DomEvent.stopPropagation(W),e.value.dragging.disable();let V=!0;const rt=st=>{V&&(it.splice(nt+1,0,st.latlng),$.setLatLngs(it),It($))},ht=()=>{V=!1,e.value&&(e.value.off("mousemove",rt),document.removeEventListener("mouseup",ht),e.value.dragging.enable())};e.value.on("mousemove",rt),document.addEventListener("mouseup",ht)})}};xt()},ot=$=>{if(!e.value||!t.value)return;_();const it=$.getLatLngs()[0],xt=it.map(V=>[V.lng,V.lat]);xt.push(xt[0]);const nt=rp([xt]),Et=oh(nt),At=it.reduce((V,rt,ht)=>{const st=it[(ht+1)%it.length];return V+rt.distanceTo(st)},0);it.forEach((V,rt)=>{const ht=y(V,"#059669");p.push(ht),f(ht,$,()=>{const st=it[(rt-1+it.length)%it.length],ft=it[(rt+1)%it.length],Tt=V.distanceTo(st),Pt=V.distanceTo(ft);return[vn(Tt,"m","Distance au point précédent"),vn(Pt,"m","Distance au point suivant"),vn(At,"m","Périmètre total"),vn(Et,"m²","Surface")].join("<br>")}),ht.on("mousedown",st=>{if(ue.DomEvent.stopPropagation(st),!e.value)return;e.value.dragging.disable();let ft=!0;const Tt=jt=>{ft&&(ue.DomEvent.stopPropagation(jt),it[rt]=jt.latlng,$.setLatLngs([it]),ht.setLatLng(jt.latlng),W())},Pt=()=>{ft=!1,e.value&&(e.value.off("mousemove",Tt),document.removeEventListener("mouseup",Pt),e.value.dragging.enable())};e.value.on("mousemove",Tt),document.addEventListener("mouseup",Pt)})});const W=()=>{const V=$.getLatLngs()[0];p.slice(V.length).forEach(rt=>{t.value&&t.value.removeLayer(rt)}),p=p.slice(0,V.length);for(let rt=0;rt<V.length;rt++){const ht=V[(rt+1)%V.length],st=X(V[rt],ht),ft=y(st,"#2563EB");p.push(ft),f(ft,$,()=>{const Tt=V[rt].distanceTo(ht);return[vn(Tt,"m","Longueur du segment"),vn(At,"m","Périmètre total"),vn(Et,"m²","Surface")].join("<br>")})}};W()},kt=$=>{if(!e.value||!t.value)return;_();const it=$.getCenter(),xt=$.getRadius(),nt=$.getStartAngle(),Et=$.getStopAngle(),At=y(it,"#059669");p.push(At),f(At,$,()=>{const ft=Math.PI*xt*xt/2;return[vn(xt,"m","Rayon"),vn(ft,"m²","Surface")].join("<br>")});const V=(nt+Et)/2*Math.PI/180,rt=ue.latLng(it.lat+xt/111319.9*Math.sin(V),it.lng+xt/(111319.9*Math.cos(it.lat*Math.PI/180))*Math.cos(V)),ht=y(rt,"#2563EB");p.push(ht),f(ht,$,()=>vn(xt,"m","Rayon")),[nt,Et].forEach((ft,Tt)=>{const Pt=ft*Math.PI/180,jt=ue.latLng(it.lat+xt/111319.9*Math.sin(Pt),it.lng+xt/(111319.9*Math.cos(it.lat*Math.PI/180))*Math.cos(Pt)),Ot=y(jt,"#DC2626");p.push(Ot),f(Ot,$,()=>`Angle: ${H3(ft)}`),Ot.on("mousedown",ee=>{if(!e.value)return;ue.DomEvent.stopPropagation(ee),e.value.dragging.disable();let ne=!0;const Jt=Ht=>{if(!ne)return;const ie=((Math.atan2(Ht.latlng.lat-it.lat,Ht.latlng.lng-it.lng)*180/Math.PI+270)%360+360)%360;Tt===0?$.setAngles(ie,Et):$.setAngles(nt,ie),Ot.setLatLng(Ht.latlng),kt($)},Mt=()=>{ne=!1,e.value&&(e.value.off("mousemove",Jt),document.removeEventListener("mouseup",Mt),e.value.dragging.enable())};e.value.on("mousemove",Jt),document.addEventListener("mouseup",Mt)})}),At.on("mousedown",ft=>{if(!e.value)return;ue.DomEvent.stopPropagation(ft),e.value.dragging.disable();let Tt=!0;const Pt=Ot=>{Tt&&($.setCenter(Ot.latlng),At.setLatLng(Ot.latlng),kt($))},jt=()=>{Tt=!1,e.value&&(e.value.off("mousemove",Pt),document.removeEventListener("mouseup",jt),e.value.dragging.enable())};e.value.on("mousemove",Pt),document.addEventListener("mouseup",jt)}),ht.on("mousedown",ft=>{if(!e.value)return;ue.DomEvent.stopPropagation(ft),e.value.dragging.disable();let Tt=!0;const Pt=Ot=>{if(!Tt)return;const ee=it.distanceTo(Ot.latlng);$.setRadius(ee),ht.setLatLng(Ot.latlng),kt($)},jt=()=>{Tt=!1,e.value&&(e.value.off("mousemove",Pt),document.removeEventListener("mouseup",jt),e.value.dragging.enable())};e.value.on("mousemove",Pt),document.addEventListener("mouseup",jt)})};return Lp(()=>{e.value&&(e.value.remove(),e.value=null)}),{map:e,featureGroup:t,currentTool:n,selectedShape:r,isDrawing:i,initMap:k,setDrawingTool:R,updateShapeStyle:O,updateShapeProperties:H,updateTextFixedSize:S,adjustView:P}}function W3(){const e=de(null),t=de("");return xi.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors"}),xi.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"© Esri"}),xi.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{attribution:"© OpenTopoMap contributors"}),{map:e,searchQuery:t,initMap:i=>{e.value=i},searchLocation:async()=>{if(!(!e.value||!t.value))try{const o=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(t.value)}`)).json();if(o&&o.length>0){const{lat:u,lon:f}=o[0];e.value.setView([u,f],13)}}catch(i){console.error("Erreur lors de la recherche de localisation:",i)}}}}const km=am("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[]}),getters:{getPlanById:e=>t=>e.plans.find(n=>n.id===t),hasUnsavedChanges:e=>e.unsavedChanges,getCurrentPlanHistory:e=>e.planHistory},actions:{async fetchPlans(){var t,n;const e=zi();this.loading=!0;try{let r="/plans/";e.isDealer?r+="?concessionnaire="+((t=e.user)==null?void 0:t.id):e.isClient&&(r+="?utilisateur="+((n=e.user)==null?void 0:n.id));const i=await Ze.get(r);this.plans=i.data}catch(r){throw this.error="Erreur lors du chargement des plans",r}finally{this.loading=!1}},async fetchPlansWithDetails(){var t,n;const e=zi();this.loading=!0;try{let r="/plans/";const i={include_details:!0};e.isDealer?i.concessionnaire=(t=e.user)==null?void 0:t.id:e.isClient&&(i.utilisateur=(n=e.user)==null?void 0:n.id);const o=await Ze.get(r,{params:i});return this.plans=o.data,o}catch(r){throw this.error="Erreur lors du chargement des plans",r}finally{this.loading=!1}},async createPlan(e){this.loading=!0;try{const t=await Ze.post("/plans/",e);return this.plans.push(t.data),t.data}catch(t){throw this.error="Erreur lors de la création du plan",t}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(e){var t,n;if(this.unsavedChanges){this.loading=!0;try{const r=await Ze.patch(`/plans/${e}/`,{...this.currentPlan,version:((t=this.currentPlan)==null?void 0:t.version)||1}),i=this.plans.findIndex(o=>o.id===e);return i!==-1&&(this.plans[i]=r.data),((n=this.currentPlan)==null?void 0:n.id)===e&&(this.currentPlan=r.data),this.unsavedChanges=!1,r.data}catch(r){throw this.error="Erreur lors de la sauvegarde du plan",r}finally{this.loading=!1}}},async fetchPlanHistory(e){this.loading=!0;try{const t=await Ze.get(`/plans/${e}/historique/`);return this.planHistory=t.data,t.data}catch(t){throw this.error="Erreur lors de la récupération de l'historique",t}finally{this.loading=!1}},async restorePlanVersion(e,t){var n;this.loading=!0;try{const r=await Ze.post(`/plans/${e}/restaurer/`,{version_id:t});((n=this.currentPlan)==null?void 0:n.id)===e&&(this.currentPlan=r.data);const i=this.plans.findIndex(o=>o.id===e);return i!==-1&&(this.plans[i]=r.data),r.data}catch(r){throw this.error="Erreur lors de la restauration de la version",r}finally{this.loading=!1}},setCurrentPlan(e){this.currentPlan=e,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.stopAutoSave()},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(e){var t;this.loading=!0;try{await Ze.delete(`/plans/${e}/`),this.plans=this.plans.filter(n=>n.id!==e),((t=this.currentPlan)==null?void 0:t.id)===e&&this.clearCurrentPlan()}catch(n){throw this.error="Erreur lors de la suppression du plan",n}finally{this.loading=!1}}}}),Ix=am("drawing",{state:()=>({currentPlanId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null}),getters:{hasUnsavedChanges:e=>e.unsavedChanges,getCurrentElements:e=>e.elements,getSelectedElement:e=>e.selectedElement,getCurrentTool:e=>e.currentTool,getCurrentStyle:e=>e.currentStyle,getLastUsedType:e=>e.lastUsedType},actions:{setCurrentPlan(e){this.currentPlanId=e,e===null&&this.clearElements()},clearCurrentPlan(){this.currentPlanId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1},addElement(e){!e.type_forme&&this.lastUsedType&&(e.type_forme=this.lastUsedType),this.elements.push(e),this.unsavedChanges=!0},updateElement(e){const t=this.elements.findIndex(n=>n.id===e.id);if(t!==-1){const n=this.elements[t].type_forme;this.elements[t]={...e,type_forme:n},this.unsavedChanges=!0}},removeElement(e){const t=this.elements.findIndex(n=>n.id===e);t!==-1&&(this.elements.splice(t,1),this.unsavedChanges=!0)},selectElement(e){this.selectedElement=e},setCurrentTool(e){this.currentTool=e,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(e)&&(this.lastUsedType=e)},setCurrentStyle(e){this.currentStyle={...this.currentStyle,...e}},async loadPlanElements(e){var t;this.loading=!0;try{const r=(await Ze.get(`/plans/${e}/`)).data;this.elements=r.formes.map(i=>({...i,type_forme:i.type_forme})),this.currentPlanId=e,this.unsavedChanges=!1,r.preferences&&(r.preferences.currentTool&&this.setCurrentTool(r.preferences.currentTool),r.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...r.preferences.currentStyle}),r.preferences.lastUsedType&&(this.lastUsedType=r.preferences.lastUsedType)),(t=this.selectedElement)!=null&&t.type_forme&&this.setCurrentTool(this.selectedElement.type_forme)}catch(n){throw console.error("Erreur lors du chargement des éléments:",n),this.error="Erreur lors du chargement des éléments du plan",n}finally{this.loading=!1}},async saveToPlan(e){km(),this.loading=!0;try{const t=e||this.currentPlanId;if(!t)throw new Error("Aucun plan sélectionné pour la sauvegarde");const n=this.elements.map(i=>({...i,type_forme:i.type_forme||this.lastUsedType})),r=await Ze.post(`/plans/${t}/save_with_elements/`,{formes:n,connexions:[],annotations:[],preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}});return this.elements=r.data.formes.map(i=>({...i,type_forme:i.type_forme})),this.unsavedChanges=!1,r.data}catch(t){throw console.error("Erreur lors de la sauvegarde:",t),this.error="Erreur lors de la sauvegarde du plan",t}finally{this.loading=!1}}}}),K3={class:"h-full flex overflow-hidden"},$3={class:"flex-1 relative overflow-hidden"},X3={class:"absolute bottom-6 left-6 z-[1000]"},Y3={class:"bg-white rounded-lg shadow-lg p-3 space-y-2"},J3={class:"flex items-center justify-between mb-2"},Q3={key:0,class:"text-sm text-gray-500"},tP={class:"grid grid-cols-1 gap-2"},eP=["disabled"],nP={key:0,class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},rP={key:1,class:"animate-spin h-5 w-5 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},iP={key:0,class:"text-xs text-gray-500 mt-2"},sP={key:0,class:"fixed bottom-6 right-6 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg shadow-lg z-[2000] flex items-center transform transition-all duration-300 ease-in-out",role:"alert"},oP={class:"drawing-tools-container absolute top-4 right-4 z-[1000]"},aP={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},uP={class:"bg-white rounded-lg p-6 max-w-md w-full mx-4"},lP={class:"flex justify-between items-center mb-4"},cP={class:"flex justify-end space-x-3"},hP={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},fP={class:"bg-white rounded-lg p-6 max-w-md w-full mx-4"},pP={class:"flex justify-between items-center mb-4"},dP={class:"max-h-96 overflow-y-auto"},gP={key:0,class:"text-center py-8"},mP={key:1,class:"space-y-2"},_P=["onClick"],yP={class:"font-medium text-gray-900"},vP={class:"text-sm text-gray-500"},xP={class:"text-xs text-gray-400 mt-1"},D0=Wi({__name:"MapView",setup(e){const t=de(null),n=km(),r=Ix(),i=de([]),o=de(null),u=de({});de({mousedown:null,mousemove:null,mouseup:null});const{currentTool:f,selectedShape:p,map:_,initMap:y,setDrawingTool:C,updateShapeStyle:S,updateShapeProperties:k,featureGroup:P,adjustView:R}=Z3(),{initMap:O}=W3();jl();const H=de(!1),X=de(!1),U=de(null),ut=de({nom:"",description:""}),It=de(!1),ot=de(!1);function kt(st){const ft=st.getCenter(),Tt=st.getZoom(),Pt={lat:ft.lat,lng:ft.lng,zoom:Tt};document.cookie=`mapState=${JSON.stringify(Pt)};max-age=2592000;path=/`}function $(){const ft=document.cookie.split(";").find(Tt=>Tt.trim().startsWith("mapState="));if(ft)try{return JSON.parse(ft.split("=")[1])}catch(Tt){return console.error("Erreur lors de la lecture du cookie de position:",Tt),null}return null}Ba(async()=>{if(t.value){const st=$(),ft=st?[st.lat,st.lng]:[46.603354,1.888334],Tt=(st==null?void 0:st.zoom)??6,Pt=y(t.value,ft,Tt);Pt.pm.setLang("fr"),Pt.pm.addControls({rotateMode:!1}),xi.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles © Esri — Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",maxZoom:19}).addTo(Pt),Pt&&(O(Pt),Pt.on("moveend",()=>{kt(Pt)}),window.addEventListener("map-set-location",jt=>{if(Pt&&jt.detail){const{lat:Ot,lng:ee,zoom:ne}=jt.detail;Pt.flyTo([Ot,ee],ne,{duration:1.5,easeLinearity:.25})}}),await n.fetchPlans(),n.currentPlan&&(await r.loadPlanElements(n.currentPlan.id),await Et(n.currentPlan.id)))}}),Ds(()=>r.hasUnsavedChanges,st=>{st&&U.value&&n.markUnsavedChanges()}),Ds(_,async st=>{st&&n.currentPlan&&(nt(),await r.loadPlanElements(n.currentPlan.id),await Et(n.currentPlan.id))}),Ds(()=>n.currentPlan,async st=>{st?(U.value=st,_.value&&(nt(),await r.loadPlanElements(st.id),await Et(st.id))):(U.value=null,nt())},{immediate:!0}),my(()=>{_.value&&_.value.off("moveend")}),de({rectangle:0,circle:0,semicircle:0,line:0}),Ds(()=>u.value,st=>{it()},{deep:!0});function it(){console.log("Updating drawing style:",u.value)}async function xt(){try{const st=await n.createPlan(ut.value);U.value=st,n.setCurrentPlan(st),r.setCurrentPlan(st.id),H.value=!1,ut.value={nom:"",description:""}}catch(st){console.error("Erreur lors de la création du plan:",st)}}function nt(){P.value&&P.value.clearLayers(),i.value=[],p.value=null,o.value=null}async function Et(st){try{nt(),await r.loadPlanElements(st);const ft=n.getPlanById(st);ft&&(U.value=ft,n.setCurrentPlan(ft),r.setCurrentPlan(ft.id),r.getCurrentElements.forEach(Tt=>{if(!P.value||!Tt.data)return;let Pt;const{style:jt={},...Ot}=Tt.data;switch(Tt.type_forme){case"CERCLE":Pt=xi.circle([Ot.center[1],Ot.center[0]],{...jt,radius:Ot.radius});break;case"RECTANGLE":Pt=xi.rectangle([[Ot.bounds.southWest[1],Ot.bounds.southWest[0]],[Ot.bounds.northEast[1],Ot.bounds.northEast[0]]],jt);break;case"DEMI_CERCLE":Pt=new Fc([Ot.center[1],Ot.center[0]],Ot.radius,Ot.startAngle,Ot.endAngle,jt);break;case"LIGNE":Pt=xi.polyline(Ot.points.map(ne=>[ne[1],ne[0]]),jt);break;case"TEXTE":const ee=xi.divIcon({html:`<div class="text-annotation" style="font-size: ${jt.fontSize||"14px"}">${Ot.content}</div>`,className:"text-container"});Pt=xi.marker([Ot.position[1],Ot.position[0]],{icon:ee,...jt});break}Pt&&(Pt.properties={type:Tt.type_forme,style:jt,...Ot},P.value.addLayer(Pt),i.value.push({id:Tt.id,type:Tt.type_forme,layer:Pt,properties:Pt.properties}),Ot.rotation&&typeof Pt.setRotation=="function"&&Pt.setRotation(Ot.rotation))})),X.value=!1}catch(ft){console.error("Erreur lors du chargement du plan:",ft)}}async function At(){if(!U.value||!P.value){console.warn("Aucun plan actif ou groupe de formes à sauvegarder");return}It.value=!0;try{const st=[];P.value.eachLayer(ft=>{var Ot,ee,ne,Jt,Mt,Ht,Kt,ie;const Tt={style:{color:((Ot=ft.options)==null?void 0:Ot.color)||"#3388ff",fillColor:((ee=ft.options)==null?void 0:ee.fillColor)||"#3388ff",fillOpacity:((ne=ft.options)==null?void 0:ne.fillOpacity)||.2,weight:((Jt=ft.options)==null?void 0:Jt.weight)||3,opacity:((Mt=ft.options)==null?void 0:Mt.opacity)||1}};let Pt,jt;if(ft instanceof xi.Circle)Pt="CERCLE",jt={...Tt,center:[ft.getLatLng().lng,ft.getLatLng().lat],radius:ft.getRadius()};else if(ft instanceof xi.Rectangle){Pt="RECTANGLE";const Te=ft.getBounds();jt={...Tt,bounds:{southWest:[Te.getSouthWest().lng,Te.getSouthWest().lat],northEast:[Te.getNorthEast().lng,Te.getNorthEast().lat]}}}else((Ht=ft.properties)==null?void 0:Ht.type)==="Semicircle"?(Pt="DEMI_CERCLE",jt={...Tt,center:[ft.getLatLng().lng,ft.getLatLng().lat],radius:ft.getRadius(),startAngle:ft.properties.style.startAngle||0,endAngle:ft.properties.style.stopAngle||180}):ft instanceof xi.Polyline&&!(ft instanceof xi.Polygon)?(Pt="LIGNE",jt={...Tt,points:ft.getLatLngs().map(Te=>[Te.lng,Te.lat])}):((Kt=ft.properties)==null?void 0:Kt.type)==="text"&&(Pt="TEXTE",jt={...Tt,position:[ft.getLatLng().lng,ft.getLatLng().lat],content:ft.properties.text,style:{...ft.properties.style,fontSize:ft.properties.style.fontSize}});Pt&&jt&&st.push({id:ft.id,type_forme:Pt,data:{...jt,rotation:((ie=ft.properties)==null?void 0:ie.rotation)||0}})}),r.elements=st,await r.saveToPlan(U.value.id),ot.value=!0,setTimeout(()=>{ot.value=!1},3e3)}catch(st){console.error("Erreur lors de la sauvegarde du plan:",st)}finally{It.value=!1}}Lp(()=>{n.clearCurrentPlan(),r.clearCurrentPlan()});function W(st){k(st)}function V(st){try{const ft=new Date(st);return isNaN(ft.getTime())?(console.error("Date invalide reçue:",st),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(ft)}catch(ft){return console.error("Erreur lors du formatage de la date:",ft),"Date invalide"}}const rt=()=>{R()},ht=()=>{p.value&&P.value&&(C(""),P.value.removeLayer(p.value),p.value=null)};return(st,ft)=>{var Tt;return Wt(),Xt("div",K3,[T("div",$3,[T("div",{ref_key:"mapContainer",ref:t,class:"absolute inset-0 w-full h-full"},null,512),T("div",X3,[T("div",Y3,[T("div",J3,[ft[7]||(ft[7]=T("span",{class:"text-sm font-medium text-gray-600"},"Plans",-1)),U.value?(Wt(),Xt("span",Q3,ae(U.value.nom),1)):Me("",!0)]),T("div",tP,[T("button",{onClick:ft[0]||(ft[0]=Pt=>H.value=!0),class:"flex items-center px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},ft[8]||(ft[8]=[T("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[T("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),hr(" Nouveau plan ")])),T("button",{onClick:ft[1]||(ft[1]=Pt=>X.value=!0),class:"flex items-center px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},ft[9]||(ft[9]=[T("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[T("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),hr(" Charger un plan ")])),U.value?(Wt(),Xt("button",{key:0,onClick:At,class:"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors duration-200",disabled:It.value},[It.value?(Wt(),Xt("svg",rP,ft[11]||(ft[11]=[T("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),T("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Wt(),Xt("svg",nP,ft[10]||(ft[10]=[T("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"},null,-1)]))),hr(" "+ae(It.value?"Sauvegarde...":"Enregistrer"),1)],8,eP)):Me("",!0),T("button",{onClick:rt,class:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors duration-200"},ft[12]||(ft[12]=[T("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[T("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1),hr(" Ajuster la vue ")]))]),(Tt=U.value)!=null&&Tt.date_modification?(Wt(),Xt("div",iP," Dernière sauvegarde : "+ae(V(U.value.date_modification)),1)):Me("",!0)])]),ot.value?(Wt(),Xt("div",sP,ft[13]||(ft[13]=[T("svg",{class:"w-5 h-5 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[T("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),T("span",{class:"font-medium"},"Plan sauvegardé avec succès",-1)]))):Me("",!0),T("div",oP,[cr(j3,{"current-tool":Ln(f),"selected-shape":Ln(p),"is-edit-mode":st.isEditMode,onToolChange:Ln(C),onStyleUpdate:Ln(S),onPropertiesUpdate:W,onToggleEditMode:st.toggleEditMode,onDeleteShape:ht},null,8,["current-tool","selected-shape","is-edit-mode","onToolChange","onStyleUpdate","onToggleEditMode"])]),H.value?(Wt(),Xt("div",aP,[T("div",uP,[T("div",lP,[ft[15]||(ft[15]=T("h2",{class:"text-xl font-semibold text-gray-900"},"Créer un nouveau plan",-1)),T("button",{onClick:ft[2]||(ft[2]=Pt=>H.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},ft[14]||(ft[14]=[T("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[T("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),T("form",{onSubmit:wh(xt,["prevent"]),class:"space-y-4"},[T("div",null,[ft[16]||(ft[16]=T("label",{for:"nom",class:"block text-sm font-medium text-gray-700"},"Nom du plan",-1)),ln(T("input",{type:"text",id:"nom","onUpdate:modelValue":ft[3]||(ft[3]=Pt=>ut.value.nom=Pt),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",required:"",placeholder:"Entrez le nom du plan"},null,512),[[Hn,ut.value.nom]])]),T("div",null,[ft[17]||(ft[17]=T("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),ln(T("textarea",{id:"description","onUpdate:modelValue":ft[4]||(ft[4]=Pt=>ut.value.description=Pt),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:"Décrivez votre plan"},null,512),[[Hn,ut.value.description]])]),T("div",cP,[T("button",{type:"button",onClick:ft[5]||(ft[5]=Pt=>H.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"}," Annuler "),ft[18]||(ft[18]=T("button",{type:"submit",class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md hover:bg-primary-700"}," Créer ",-1))])],32)])])):Me("",!0),X.value?(Wt(),Xt("div",hP,[T("div",fP,[T("div",pP,[ft[20]||(ft[20]=T("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),T("button",{onClick:ft[6]||(ft[6]=Pt=>X.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},ft[19]||(ft[19]=[T("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[T("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),T("div",dP,[Ln(n).plans.length===0?(Wt(),Xt("div",gP,ft[21]||(ft[21]=[T("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(Wt(),Xt("div",mP,[(Wt(!0),Xt(kn,null,ci(Ln(n).plans,Pt=>(Wt(),Xt("button",{key:Pt.id,onClick:jt=>Et(Pt.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},[T("div",yP,ae(Pt.nom),1),T("div",vP,ae(Pt.description),1),T("div",xP," Modifié le "+ae(new Date(Pt.date_modification).toLocaleDateString()),1)],8,_P))),128))]))])])])):Me("",!0)])])}}}),CP={class:"fixed inset-0 z-50 overflow-y-auto"},bP={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},EP={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},LP={class:"mt-3 text-center sm:mt-0 sm:text-left"},wP={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},SP={class:"mt-4"},PP={class:"grid grid-cols-2 gap-4"},MP=["disabled"],IP={key:0,class:"mt-1 text-sm text-gray-500"},kP={class:"grid grid-cols-2 gap-4"},TP={key:0},AP=["disabled"],DP=["value"],NP={key:1},RP=["disabled"],OP=["value"],BP={key:0},FP={class:"grid grid-cols-2 gap-4"},zP={key:1,class:"rounded-md bg-red-50 p-4"},GP={class:"flex"},UP={class:"ml-3"},VP={class:"text-sm font-medium text-red-800"},jP={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense"},qP=["disabled"],HP={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},kx=Wi({__name:"UserFormModal",props:{user:{type:Object,default:null},dealers:{type:Array,default:()=>[]},isAdmin:{type:Boolean,required:!0},currentDealer:{type:String,default:""}},emits:["close","save"],setup(e,{emit:t}){var P,R,O,H,X,U,ut;const n=e,r=t,i=zi(),o=de(!1),u=de(null),f=en(()=>{var It;return n.isAdmin?n.user?n.user.id!==((It=i.user)==null?void 0:It.id):!0:!1}),p=en(()=>n.isAdmin?[{value:"ADMIN",label:"Administrateur"},{value:"CONCESSIONNAIRE",label:"Concessionnaire"},{value:"UTILISATEUR",label:"Client"}]:[{value:"UTILISATEUR",label:"Client"}]),_=en(()=>n.isAdmin?C.role==="UTILISATEUR":!0),y=en(()=>n.dealers.filter(It=>It.role==="CONCESSIONNAIRE")),C=ea({first_name:((P=n.user)==null?void 0:P.first_name)||"",last_name:((R=n.user)==null?void 0:R.last_name)||"",email:((O=n.user)==null?void 0:O.email)||"",username:((H=n.user)==null?void 0:H.username)||"",company_name:((X=n.user)==null?void 0:X.company_name)||"",role:((U=n.user)==null?void 0:U.role)||(n.isAdmin?"":"UTILISATEUR"),dealer:((ut=n.user)==null?void 0:ut.concessionnaire)||n.currentDealer,password:"",password_confirm:""}),S=()=>{if(!C.first_name||!C.last_name)return u.value="Le prénom et le nom sont requis",!1;if(!C.email)return u.value="L'email est requis",!1;if(!C.username)return u.value="Le nom d'utilisateur est requis",!1;if(!n.user){if(!C.password)return u.value="Le mot de passe est requis",!1;if(C.password!==C.password_confirm)return u.value="Les mots de passe ne correspondent pas",!1}return C.role==="UTILISATEUR"&&!C.dealer?(u.value="Un concessionnaire doit être sélectionné pour un client",!1):!0},k=async()=>{var It;if(u.value=null,!!S()){o.value=!0;try{const ot={...C};(It=n.user)!=null&&It.id&&(ot.id=n.user.id,delete ot.password,delete ot.password_confirm),ot.role==="UTILISATEUR"&&ot.dealer&&(ot.concessionnaire=ot.dealer),delete ot.dealer,await r("save",ot),r("close")}catch(ot){console.error("Erreur formulaire:",ot),u.value=ot.message,o.value=!1}}};return(It,ot)=>(Wt(),Xt("div",CP,[T("div",bP,[ot[24]||(ot[24]=T("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[T("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),ot[25]||(ot[25]=T("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),T("div",EP,[T("div",null,[T("div",LP,[T("h3",wP,ae(e.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),T("div",SP,[T("form",{onSubmit:wh(k,["prevent"]),class:"space-y-4"},[T("div",PP,[T("div",null,[ot[10]||(ot[10]=T("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prénom",-1)),ln(T("input",{type:"text",id:"first_name","onUpdate:modelValue":ot[0]||(ot[0]=kt=>C.first_name=kt),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Hn,C.first_name]])]),T("div",null,[ot[11]||(ot[11]=T("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),ln(T("input",{type:"text",id:"last_name","onUpdate:modelValue":ot[1]||(ot[1]=kt=>C.last_name=kt),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Hn,C.last_name]])])]),T("div",null,[ot[12]||(ot[12]=T("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),ln(T("input",{type:"email",id:"email","onUpdate:modelValue":ot[2]||(ot[2]=kt=>C.email=kt),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Hn,C.email]])]),T("div",null,[ot[13]||(ot[13]=T("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),ln(T("input",{type:"text",id:"username","onUpdate:modelValue":ot[3]||(ot[3]=kt=>C.username=kt),required:"",disabled:!!n.user,class:As(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",{"bg-gray-100":!!n.user}])},null,10,MP),[[Hn,C.username]]),n.user?(Wt(),Xt("p",IP," Le nom d'utilisateur ne peut pas être modifié après la création. ")):Me("",!0)]),T("div",null,[ot[14]||(ot[14]=T("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Nom de l'entreprise",-1)),ln(T("input",{type:"text",id:"company_name","onUpdate:modelValue":ot[4]||(ot[4]=kt=>C.company_name=kt),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Hn,C.company_name]])]),T("div",kP,[n.isAdmin?(Wt(),Xt("div",TP,[ot[16]||(ot[16]=T("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Rôle",-1)),ln(T("select",{id:"role","onUpdate:modelValue":ot[5]||(ot[5]=kt=>C.role=kt),required:"",disabled:!f.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[ot[15]||(ot[15]=T("option",{value:""},"Sélectionner un rôle",-1)),(Wt(!0),Xt(kn,null,ci(p.value,kt=>(Wt(),Xt("option",{key:kt.value,value:kt.value},ae(kt.label),9,DP))),128))],8,AP),[[th,C.role]])])):Me("",!0),_.value?(Wt(),Xt("div",NP,[ot[18]||(ot[18]=T("label",{for:"dealer",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),ln(T("select",{id:"dealer","onUpdate:modelValue":ot[6]||(ot[6]=kt=>C.dealer=kt),required:"",disabled:!n.isAdmin,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[ot[17]||(ot[17]=T("option",{value:""},"Sélectionner un concessionnaire",-1)),(Wt(!0),Xt(kn,null,ci(y.value,kt=>(Wt(),Xt("option",{key:kt.id,value:kt.id},ae(kt.company_name||`${kt.first_name} ${kt.last_name}`),9,OP))),128))],8,RP),[[th,C.dealer]])])):Me("",!0)]),e.user?Me("",!0):(Wt(),Xt("div",BP,[T("div",FP,[T("div",null,[ot[19]||(ot[19]=T("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),ln(T("input",{type:"password",id:"password","onUpdate:modelValue":ot[7]||(ot[7]=kt=>C.password=kt),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Hn,C.password]])]),T("div",null,[ot[20]||(ot[20]=T("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),ln(T("input",{type:"password",id:"password_confirm","onUpdate:modelValue":ot[8]||(ot[8]=kt=>C.password_confirm=kt),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Hn,C.password_confirm]])])]),ot[21]||(ot[21]=T("p",{class:"mt-1 text-sm text-gray-500"}," L'utilisateur devra changer son mot de passe à sa première connexion. ",-1))])),u.value?(Wt(),Xt("div",zP,[T("div",GP,[ot[22]||(ot[22]=T("div",{class:"flex-shrink-0"},[T("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[T("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),T("div",UP,[T("h3",VP,ae(u.value),1)])])])):Me("",!0),T("div",jP,[T("button",{type:"submit",disabled:o.value,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:col-start-2 sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},[o.value?(Wt(),Xt("svg",HP,ot[23]||(ot[23]=[T("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),T("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Me("",!0),hr(" "+ae(o.value?"Enregistrement...":"Enregistrer"),1)],8,qP),T("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:col-start-1 sm:text-sm",onClick:ot[9]||(ot[9]=kt=>It.$emit("close"))}," Annuler ")])],32)])])])])])]))}}),ZP={class:"fixed inset-0 z-50 overflow-y-auto"},WP={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},KP={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},$P={class:"sm:flex sm:items-start"},XP={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},YP={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},JP={class:"mt-2"},QP={class:"text-sm text-gray-500"},tM={class:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},Tx=Wi({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(e){return(t,n)=>(Wt(),Xt("div",ZP,[T("div",WP,[n[3]||(n[3]=T("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[T("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),n[4]||(n[4]=T("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),T("div",KP,[T("div",$P,[n[2]||(n[2]=T("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[T("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[T("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),T("div",XP,[T("h3",YP,ae(e.title),1),T("div",JP,[T("p",QP,ae(e.message),1)])])]),T("div",tM,[T("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:n[0]||(n[0]=r=>t.$emit("confirm"))}," Confirmer "),T("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:w-auto sm:text-sm",onClick:n[1]||(n[1]=r=>t.$emit("cancel"))}," Annuler ")])])])]))}}),eM={class:"min-h-screen bg-gray-50 py-8"},nM={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},rM={class:"flex justify-between items-center mb-8"},iM={class:"text-3xl font-extrabold text-gray-900"},sM={class:"bg-white shadow rounded-lg mb-6 p-4"},oM={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},aM={key:0},uM=["placeholder"],lM={key:1},cM=["value"],hM={class:"bg-white shadow rounded-lg"},fM={class:"overflow-x-auto"},pM={class:"min-w-full divide-y divide-gray-200"},dM={class:"bg-gray-50"},gM={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},mM={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},_M={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},yM={class:"bg-white divide-y divide-gray-200"},vM={class:"px-6 py-4 whitespace-nowrap"},xM={class:"flex items-center"},CM={class:"flex-shrink-0 h-10 w-10"},bM={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},EM={class:"text-primary-600 font-medium"},LM={class:"ml-4"},wM={class:"text-sm font-medium text-gray-900"},SM={key:0,class:"text-gray-500"},PM={class:"text-sm text-gray-500"},MM={class:"px-6 py-4 whitespace-nowrap"},IM={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},kM={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},TM={class:"px-6 py-4 whitespace-nowrap"},AM={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},DM=["onClick"],NM=["onClick"],RM=Wi({__name:"UserListView",setup(e){const t=zi(),n=de([]),r=de([]),i=de(!1),o=de(!1),u=de(null),f=de(null),p=ea({role:"",search:"",dealer:""}),_=en(()=>t.isAdmin),y=en(()=>t.isDealer),C=en(()=>n.value.filter(nt=>nt.role==="CONCESSIONNAIRE")),S=en(()=>{var Et;console.log("Computing filtered users..."),console.log("Current users:",n.value),console.log("Is admin:",_.value),console.log("Is dealer:",y.value),console.log("Current filters:",p);let nt=n.value;if(y.value&&(console.log("Filtering for dealer:",(Et=t.user)==null?void 0:Et.id),nt=nt.filter(At=>{var W;return At.role==="UTILISATEUR"&&At.dealer===((W=t.user)==null?void 0:W.id)}),console.log("Filtered users for dealer:",nt)),_.value&&(p.role&&(nt=nt.filter(At=>At.role===p.role),console.log("Filtered by role:",nt)),p.dealer&&(nt=nt.filter(At=>String(At.dealer)===String(p.dealer)),console.log("Filtered by dealer:",nt))),p.search){const At=p.search.toLowerCase();nt=nt.filter(W=>W.username.toLowerCase().includes(At)||W.email.toLowerCase().includes(At)||W.first_name.toLowerCase().includes(At)||W.last_name.toLowerCase().includes(At)||W.company_name&&W.company_name.toLowerCase().includes(At)),console.log("Filtered by search:",nt)}return console.log("Final filtered users:",nt),nt});Ba(async()=>{await k(),_.value&&await P()});async function k(){try{console.log("Fetching users...");const nt=await Ze.get("/users/");console.log("Users API response:",nt.data),n.value=nt.data,console.log("Users after assignment:",n.value)}catch(nt){console.error("Erreur lors de la récupération des utilisateurs:",nt)}}async function P(){try{const nt=await Ze.get("/users/",{params:{role:"CONCESSIONNAIRE"}});r.value=nt.data}catch(nt){console.error("Erreur lors de la récupération des concessionnaires:",nt)}}function R(){u.value=null,i.value=!0}function O(nt){u.value={...nt},i.value=!0}function H(){i.value=!1,u.value=null}async function X(nt){var Et;try{let At;const W=!!nt.id,V={...nt};return delete V.dealer_name,delete V.full_name,delete V.user_type,delete V.permissions,W?At=await Ze.patch(`/users/${nt.id}/`,V):At=await Ze.post("/users/",V),await k(),H(),At.data}catch(At){const W=((Et=At.response)==null?void 0:Et.data)||{};let V="";throw typeof W=="object"&&(V=Object.entries(W).map(([rt,ht])=>Array.isArray(ht)?ht[0]:ht).filter(rt=>rt).join(`
`)),V||(V="Une erreur est survenue lors de la sauvegarde"),new Error(V)}}function U(nt){f.value=nt,o.value=!0}async function ut(){if(f.value)try{await Ze.delete(`/users/${f.value.id}/`),await k(),o.value=!1,f.value=null}catch(nt){throw console.error("Erreur lors de la suppression de l'utilisateur:",nt),nt}}function It(nt,Et){return`${(nt==null?void 0:nt.charAt(0))||""}${(Et==null?void 0:Et.charAt(0))||""}`.toUpperCase()}const ot={ADMIN:"Admin",CONCESSIONNAIRE:"Concessionnaire",UTILISATEUR:"Client"};function kt(nt){return ot[nt]||nt}function $(nt){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function it(nt){return nt?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}function xt(nt){var Et;return _.value?!0:y.value?nt.role==="UTILISATEUR"&&nt.dealer===((Et=t.user)==null?void 0:Et.id):!1}return(nt,Et)=>{var At,W;return Wt(),Xt("div",eM,[T("div",nM,[T("div",rM,[T("h1",iM,ae(_.value?"Gestion des utilisateurs":"Mes clients"),1),T("button",{onClick:R,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[Et[4]||(Et[4]=T("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[T("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),hr(" "+ae(_.value?"Nouvel utilisateur":"Nouveau client"),1)])]),T("div",sM,[T("div",oM,[_.value?(Wt(),Xt("div",aM,[Et[6]||(Et[6]=T("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rôle",-1)),ln(T("select",{id:"role-filter","onUpdate:modelValue":Et[0]||(Et[0]=V=>p.role=V),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},Et[5]||(Et[5]=[T("option",{value:""},"Tous les rôles",-1),T("option",{value:"ADMIN"},"Admin",-1),T("option",{value:"CONCESSIONNAIRE"},"Concessionnaire",-1),T("option",{value:"UTILISATEUR"},"Client",-1)]),512),[[th,p.role]])])):Me("",!0),T("div",null,[Et[7]||(Et[7]=T("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),ln(T("input",{type:"text",id:"search","onUpdate:modelValue":Et[1]||(Et[1]=V=>p.search=V),placeholder:_.value?"Nom, email...":"Rechercher un client...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,8,uM),[[Hn,p.search]])]),_.value?(Wt(),Xt("div",lM,[Et[9]||(Et[9]=T("label",{for:"dealer-filter",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),ln(T("select",{id:"dealer-filter","onUpdate:modelValue":Et[2]||(Et[2]=V=>p.dealer=V),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Et[8]||(Et[8]=T("option",{value:""},"Tous les concessionnaires",-1)),(Wt(!0),Xt(kn,null,ci(C.value,V=>(Wt(),Xt("option",{key:V.id,value:V.id},ae(V.company_name||`${V.first_name} ${V.last_name}`),9,cM))),128))],512),[[th,p.dealer]])])):Me("",!0)])]),T("div",hM,[T("div",fM,[T("table",pM,[T("thead",dM,[T("tr",null,[T("th",gM,ae(_.value?"Utilisateur":"Client"),1),_.value?(Wt(),Xt("th",mM," Rôle ")):Me("",!0),Et[10]||(Et[10]=T("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),_.value?(Wt(),Xt("th",_M," Concessionnaire ")):Me("",!0),Et[11]||(Et[11]=T("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),Et[12]||(Et[12]=T("th",{scope:"col",class:"relative px-6 py-3"},[T("span",{class:"sr-only"},"Actions")],-1))])]),T("tbody",yM,[(Wt(!0),Xt(kn,null,ci(S.value,V=>(Wt(),Xt("tr",{key:V.id},[T("td",vM,[T("div",xM,[T("div",CM,[T("div",bM,[T("span",EM,ae(It(V.first_name,V.last_name)),1)])]),T("div",LM,[T("div",wM,[hr(ae(V.first_name)+" "+ae(V.last_name.toUpperCase())+" ",1),V.company_name?(Wt(),Xt("span",SM," ("+ae(V.company_name)+") ",1)):Me("",!0)]),T("div",PM,ae(V.username),1)])])]),T("td",MM,[T("span",{class:As($(V.role))},ae(kt(V.role)),3)]),T("td",IM,ae(V.email),1),T("td",kM,ae(V.dealer_name||"-"),1),T("td",TM,[T("span",{class:As(it(V.is_active))},ae(V.is_active?"Actif":"Inactif"),3)]),T("td",AM,[T("button",{onClick:rt=>O(V),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,DM),xt(V)?(Wt(),Xt("button",{key:0,onClick:rt=>U(V),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,NM)):Me("",!0)])]))),128))])])])])]),i.value?(Wt(),lu(kx,{key:0,user:u.value,dealers:r.value,"is-admin":_.value,"current-dealer":(W=(At=Ln(t).user)==null?void 0:At.id)==null?void 0:W.toString(),onClose:H,onSave:X},null,8,["user","dealers","is-admin","current-dealer"])):Me("",!0),o.value?(Wt(),lu(Tx,{key:1,title:"Supprimer l'utilisateur",message:"Êtes-vous sûr de vouloir supprimer cet utilisateur ? Cette action est irréversible.",onConfirm:ut,onCancel:Et[3]||(Et[3]=V=>o.value=!1)})):Me("",!0)])}}}),OM={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},BM={class:"mt-8"},FM={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},zM={class:"inline-block min-w-full py-2 align-middle"},GM={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5"},UM={class:"min-w-full divide-y divide-gray-300"},VM={class:"divide-y divide-gray-200 bg-white"},jM={key:0},qM={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},HM={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},ZM={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},WM={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},KM={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},$M=["onClick"],XM=["onClick"],YM={key:0,class:"mt-12"},JM={class:"mb-4"},QM={class:"mt-1 text-sm text-gray-500"},tI={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},eI={class:"inline-block min-w-full py-2 align-middle"},nI={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5"},rI={class:"min-w-full divide-y divide-gray-300"},iI={class:"bg-gray-50"},sI={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},oI={class:"divide-y divide-gray-200 bg-white"},aI={key:0},uI={colspan:"7",class:"py-4 px-6 text-center text-gray-500"},lI={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},cI={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},hI={class:"px-3 py-4 text-sm text-gray-900"},fI={class:"flex items-center"},pI={class:"h-8 w-8 flex-shrink-0"},dI={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},gI={class:"text-primary-700 font-medium text-sm"},mI={class:"ml-3"},_I={class:"font-medium"},yI={class:"text-gray-500 text-xs"},vI={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},xI={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},CI={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},bI={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},EI=["onClick"],LI=["onClick"],wI={key:1,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center"},SI={class:"bg-white rounded-lg p-6 max-w-md w-full"},PI={class:"space-y-4"},MI={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},II=Wi({__name:"PlansView",setup(e){const t=jl(),n=km(),r=zi(),i=Ix(),o=de([]),u=de(!1),f=de({nom:"",description:""}),p=en(()=>o.value.filter(X=>{var U;return X.createur.id===((U=r.user)==null?void 0:U.id)})),_=en(()=>o.value.filter(X=>{var U;return X.createur.id!==((U=r.user)==null?void 0:U.id)}));Ba(async()=>{await y()});async function y(){try{const X=await n.fetchPlansWithDetails();o.value=X.data}catch(X){console.error("Erreur lors du chargement des plans:",X)}}function C(){u.value=!0,f.value={nom:"",description:""}}async function S(){var X;try{if(!f.value.nom.trim())throw new Error("Le nom du plan est requis");(X=n.currentPlan)!=null&&X.id&&n.hasUnsavedChanges&&(confirm("Voulez-vous sauvegarder les modifications du plan actuel avant d'en créer un nouveau ?")&&await n.savePlan(n.currentPlan.id),n.clearCurrentPlan());const U=await n.createPlan({nom:f.value.nom.trim(),description:f.value.description.trim()});u.value=!1,await y(),n.setCurrentPlan(U),t.push("/")}catch(U){console.error("Erreur lors de la création du plan:",U),alert(U.message||"Une erreur est survenue lors de la création du plan")}}async function k(X){try{n.setCurrentPlan(X),await i.loadPlanElements(X.id),t.push("/")}catch(U){console.error("Erreur lors du chargement du plan:",U),alert("Une erreur est survenue lors du chargement du plan")}}async function P(X){var U;if(X!=null&&X.id&&confirm("Êtes-vous sûr de vouloir supprimer ce plan ?"))try{await n.deletePlan(X.id),await y(),((U=n.currentPlan)==null?void 0:U.id)===X.id&&n.clearCurrentPlan()}catch(ut){console.error("Erreur lors de la suppression du plan:",ut),alert("Une erreur est survenue lors de la suppression du plan")}}function R(X){return new Date(X).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function O(X){return X?`${X.first_name} ${X.last_name}`.trim()||X.username:"Non spécifié"}function H(X){if(!X)return"";const U=X.first_name.charAt(0).toUpperCase()+X.last_name.charAt(0).toUpperCase();return U.length>2?U.slice(0,2):U}return(X,U)=>(Wt(),Xt("div",OM,[T("div",{class:"sm:flex sm:items-center"},[U[3]||(U[3]=T("div",{class:"sm:flex-auto"},[T("h1",{class:"text-2xl font-semibold text-gray-900"},"Plans d'irrigation"),T("p",{class:"mt-2 text-sm text-gray-700"}," Gérez vos plans d'irrigation ")],-1)),T("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[T("button",{onClick:C,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),T("div",BM,[U[8]||(U[8]=T("div",{class:"mb-4"},[T("h2",{class:"text-lg font-medium text-gray-900"},"Mes plans"),T("p",{class:"mt-1 text-sm text-gray-500"}," Plans que vous avez créés ")],-1)),T("div",FM,[T("div",zM,[T("div",GM,[T("table",UM,[U[7]||(U[7]=T("thead",{class:"bg-gray-50"},[T("tr",null,[T("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"}," Nom du plan "),T("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description "),T("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Créé le "),T("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Modifié le "),T("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[T("span",{class:"sr-only"},"Actions")])])],-1)),T("tbody",VM,[p.value.length===0?(Wt(),Xt("tr",jM,U[4]||(U[4]=[T("td",{colspan:"5",class:"py-4 px-6 text-center text-gray-500"}," Vous n'avez pas encore créé de plans ",-1)]))):Me("",!0),(Wt(!0),Xt(kn,null,ci(p.value,ut=>(Wt(),Xt("tr",{key:ut.id,class:"hover:bg-gray-50"},[T("td",qM,ae(ut.nom),1),T("td",HM,ae(ut.description||"-"),1),T("td",ZM,ae(R(ut.date_creation)),1),T("td",WM,ae(R(ut.date_modification)),1),T("td",KM,[T("button",{onClick:It=>k(ut),class:"text-primary-600 hover:text-primary-900 mr-4 inline-flex items-center"},U[5]||(U[5]=[T("svg",{class:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[T("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),hr(" Modifier ")]),8,$M),T("button",{onClick:It=>P(ut),class:"text-red-600 hover:text-red-900 inline-flex items-center"},U[6]||(U[6]=[T("svg",{class:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[T("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),hr(" Supprimer ")]),8,XM)])]))),128))])])])])])]),Ln(r).isAdmin||Ln(r).isDealer?(Wt(),Xt("div",YM,[T("div",JM,[U[9]||(U[9]=T("h2",{class:"text-lg font-medium text-gray-900"},"Plans des clients",-1)),T("p",QM,ae(Ln(r).isAdmin?"Tous les plans créés par les clients et les concessionnaires":"Plans de vos clients"),1)]),T("div",tI,[T("div",eI,[T("div",nI,[T("table",rI,[T("thead",iI,[T("tr",null,[U[10]||(U[10]=T("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"}," Nom du plan ",-1)),U[11]||(U[11]=T("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),U[12]||(U[12]=T("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Client ",-1)),T("th",sI,ae(Ln(r).isAdmin?"Concession":"Entreprise"),1),U[13]||(U[13]=T("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Créé le ",-1)),U[14]||(U[14]=T("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Modifié le ",-1)),U[15]||(U[15]=T("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[T("span",{class:"sr-only"},"Actions")],-1))])]),T("tbody",oI,[_.value.length===0?(Wt(),Xt("tr",aI,[T("td",uI,ae(Ln(r).isAdmin?"Aucun plan client disponible":"Aucun plan de vos clients disponible"),1)])):Me("",!0),(Wt(!0),Xt(kn,null,ci(_.value,ut=>(Wt(),Xt("tr",{key:ut.id,class:"hover:bg-gray-50"},[T("td",lI,ae(ut.nom),1),T("td",cI,ae(ut.description||"-"),1),T("td",hI,[T("div",fI,[T("div",pI,[T("div",dI,[T("span",gI,ae(H(ut.createur)),1)])]),T("div",mI,[T("div",_I,ae(O(ut.createur)),1),T("div",yI,ae(ut.createur.email),1)])])]),T("td",vI,ae(ut.createur.company_name||ut.createur.concessionnaire_name||"-"),1),T("td",xI,ae(R(ut.date_creation)),1),T("td",CI,ae(R(ut.date_modification)),1),T("td",bI,[T("button",{onClick:It=>k(ut),class:"text-primary-600 hover:text-primary-900 mr-4 inline-flex items-center"},U[16]||(U[16]=[T("svg",{class:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[T("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),hr(" Modifier ")]),8,EI),Ln(r).isAdmin?(Wt(),Xt("button",{key:0,onClick:It=>P(ut),class:"text-red-600 hover:text-red-900 inline-flex items-center"},U[17]||(U[17]=[T("svg",{class:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[T("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),hr(" Supprimer ")]),8,LI)):Me("",!0)])]))),128))])])])])])])):Me("",!0),u.value?(Wt(),Xt("div",wI,[T("div",SI,[U[21]||(U[21]=T("h2",{class:"text-lg font-medium mb-4"},"Nouveau plan",-1)),T("form",{onSubmit:wh(S,["prevent"])},[T("div",PI,[T("div",null,[U[18]||(U[18]=T("label",{for:"name",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),ln(T("input",{type:"text",id:"name","onUpdate:modelValue":U[0]||(U[0]=ut=>f.value.nom=ut),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",required:""},null,512),[[Hn,f.value.nom]])]),T("div",null,[U[19]||(U[19]=T("label",{for:"description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),ln(T("textarea",{id:"description","onUpdate:modelValue":U[1]||(U[1]=ut=>f.value.description=ut),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[Hn,f.value.description]])])]),T("div",MI,[T("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:U[2]||(U[2]=ut=>u.value=!1)}," Annuler "),U[20]||(U[20]=T("button",{type:"submit",class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm"}," Créer ",-1))])],32)])])):Me("",!0)]))}}),kI={class:"container mx-auto px-4 py-8"},TI={class:"sm:flex sm:items-center"},AI={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},DI={class:"mt-8 flex flex-col"},NI={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},RI={class:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8"},OI={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},BI={class:"min-w-full divide-y divide-gray-300"},FI={class:"divide-y divide-gray-200 bg-white"},zI={key:0,class:"animate-pulse"},GI={key:1},UI={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-6"},VI={class:"flex items-center"},jI={class:"h-10 w-10 flex-shrink-0"},qI={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},HI={class:"text-primary-600 font-medium"},ZI={class:"ml-4"},WI={class:"font-medium text-gray-900"},KI={class:"text-gray-500"},$I={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},XI={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},YI={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},JI={class:"flex items-center"},QI={class:"font-medium"},tk={class:"text-gray-400 ml-1"},ek={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},nk=["onClick"],rk=["onClick"],ik=Wi({__name:"ClientListView",setup(e){jl();const t=zi(),n=de([]),r=de(!0),i=de(!1),o=de(!1),u=de(null),f=de(null);Ba(async()=>{await p()});async function p(){var R;try{const O=await Ze.get("/users/",{params:{dealer:(R=t.user)==null?void 0:R.id,role:"UTILISATEUR",include_plans:!0}});n.value=O.data}catch(O){console.error("Error fetching clients:",O)}finally{r.value=!1}}function _(R,O){return`${(R==null?void 0:R.charAt(0))||""}${(O==null?void 0:O.charAt(0))||""}`.toUpperCase()}function y(R){u.value=R,i.value=!0}function C(){i.value=!1,u.value=null}async function S(R){var O;try{const H=!!R.id,X=H?`/users/${R.id}/`:"/users/",U=H?"patch":"post";R.role="UTILISATEUR",R.concessionnaire=(O=t.user)==null?void 0:O.id,await Ze[U](X,R),await p(),C()}catch(H){throw console.error("Erreur lors de la sauvegarde du client:",H),H}}function k(R){f.value=R,o.value=!0}async function P(){if(f.value)try{await Ze.delete(`/users/${f.value.id}/`),await p(),o.value=!1,f.value=null}catch(R){throw console.error("Erreur lors de la suppression du client:",R),R}}return(R,O)=>{var H,X;return Wt(),Xt("div",kI,[T("div",TI,[O[3]||(O[3]=T("div",{class:"sm:flex-auto"},[T("h1",{class:"text-2xl font-semibold text-gray-900"},"Clients"),T("p",{class:"mt-2 text-sm text-gray-700"}," Liste de vos clients et leurs plans associés ")],-1)),T("div",AI,[T("button",{onClick:O[0]||(O[0]=U=>i.value=!0),class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"},O[2]||(O[2]=[T("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[T("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1),hr(" Ajouter un client ")]))])]),T("div",DI,[T("div",NI,[T("div",RI,[T("div",OI,[T("table",BI,[O[6]||(O[6]=T("thead",{class:"bg-gray-50"},[T("tr",null,[T("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," Client "),T("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Email "),T("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise "),T("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Nombre de plans "),T("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[T("span",{class:"sr-only"},"Actions")])])],-1)),T("tbody",FI,[r.value?(Wt(),Xt("tr",zI,O[4]||(O[4]=[T("td",{colspan:"5",class:"py-4 px-6"},[T("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):n.value.length===0?(Wt(),Xt("tr",GI,O[5]||(O[5]=[T("td",{colspan:"5",class:"py-4 px-6 text-center text-gray-500"}," Aucun client trouvé ",-1)]))):Me("",!0),(Wt(!0),Xt(kn,null,ci(n.value,U=>(Wt(),Xt("tr",{key:U.id,class:"hover:bg-gray-50"},[T("td",UI,[T("div",VI,[T("div",jI,[T("div",qI,[T("span",HI,ae(_(U.first_name,U.last_name)),1)])]),T("div",ZI,[T("div",WI,ae(U.first_name)+" "+ae(U.last_name.toUpperCase()),1),T("div",KI,ae(U.username),1)])])]),T("td",$I,ae(U.email),1),T("td",XI,ae(U.company_name||"-"),1),T("td",YI,[T("div",JI,[T("span",QI,ae(U.plans_count||0),1),T("span",tk,"plan"+ae((U.plans_count||0)>1?"s":""),1)])]),T("td",ek,[T("button",{onClick:ut=>y(U),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,nk),T("button",{onClick:ut=>k(U),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,rk)])]))),128))])])])])])]),i.value?(Wt(),lu(kx,{key:0,user:u.value||{},dealers:[Ln(t).user],"is-admin":!1,"current-dealer":(X=(H=Ln(t).user)==null?void 0:H.id)==null?void 0:X.toString(),onClose:C,onSave:S},null,8,["user","dealers","current-dealer"])):Me("",!0),o.value?(Wt(),lu(Tx,{key:1,title:"Supprimer le client",message:"Êtes-vous sûr de vouloir supprimer ce client ? Cette action est irréversible.",onConfirm:P,onCancel:O[1]||(O[1]=U=>o.value=!1)})):Me("",!0)])}}}),Ax=hw({history:VL("/"),routes:[{path:"/",name:"home",component:D0,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/plans",name:"plans",component:II,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/users",name:"users",component:RM,meta:{requiresAuth:!0,allowedRoles:["admin"]}},{path:"/clients",name:"clients",component:ik,meta:{requiresAuth:!0,allowedRoles:["dealer"]}},{path:"/profile",name:"profile",component:()=>Lf(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/login",name:"login",component:mS,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>Lf(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>Lf(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:eS,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/map",name:"map",component:D0,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>Lf(()=>import("./NotFoundView.js"),[])}]});Ax.beforeEach(async(e,t,n)=>{var f,p;const r=zi();if(console.log("Route:",e.path,"Auth state:",{initialized:r.initialized,isAuthenticated:r.isAuthenticated,user:r.user}),!r.initialized)try{await r.initialize(window.INITIAL_STATE)}catch(_){console.error("Error initializing auth store:",_)}const i=r.isAuthenticated,o=(f=r.user)==null?void 0:f.must_change_password,u=(p=r.user)==null?void 0:p.user_type;if(e.meta.requiresAuth&&!i){n("/login");return}if(i&&o&&e.name!=="changePassword"){n({name:"changePassword"});return}if(e.name==="changePassword"&&!o){n({name:"home"});return}if(e.meta.allowedRoles&&u&&!e.meta.allowedRoles.includes(u)){n({name:"home"});return}if(e.meta.requiresGuest&&i){n({name:"home"});return}n()});const Tm=Sb(D4),Dx=Ib();Tm.use(Dx);Tm.use(Ax);const sk=zi(Dx);window.INITIAL_STATE&&sk.initialize(window.INITIAL_STATE);Tm.mount("#app");export{ea as a,T as b,Xt as c,Wi as d,Me as e,ln as f,Wt as g,ak as h,hr as i,cr as j,Vc as k,cC as l,Sk as m,As as n,Ba as o,jl as p,de as r,ae as t,zi as u,Hn as v,wh as w};
