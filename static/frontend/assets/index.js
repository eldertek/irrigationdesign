var vm=Object.defineProperty;var bm=(e,n,s)=>n in e?vm(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s;var ut=(e,n,s)=>bm(e,typeof n!="symbol"?n+"":n,s);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))l(h);new MutationObserver(h=>{for(const p of h)if(p.type==="childList")for(const f of p.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function s(h){const p={};return h.integrity&&(p.integrity=h.integrity),h.referrerPolicy&&(p.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?p.credentials="include":h.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function l(h){if(h.ep)return;h.ep=!0;const p=s(h);fetch(h.href,p)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Bc(e){const n=Object.create(null);for(const s of e.split(","))n[s]=1;return s=>s in n}const Vt={},Rs=[],In=()=>{},xm=()=>!1,xl=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ac=e=>e.startsWith("onUpdate:"),Si=Object.assign,Tc=(e,n)=>{const s=e.indexOf(n);s>-1&&e.splice(s,1)},wm=Object.prototype.hasOwnProperty,zt=(e,n)=>wm.call(e,n),mt=Array.isArray,Os=e=>Qo(e)==="[object Map]",js=e=>Qo(e)==="[object Set]",uh=e=>Qo(e)==="[object Date]",wt=e=>typeof e=="function",li=e=>typeof e=="string",Fn=e=>typeof e=="symbol",qt=e=>e!==null&&typeof e=="object",Rd=e=>(qt(e)||wt(e))&&wt(e.then)&&wt(e.catch),Od=Object.prototype.toString,Qo=e=>Od.call(e),Lm=e=>Qo(e).slice(8,-1),Id=e=>Qo(e)==="[object Object]",Dc=e=>li(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ro=Bc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),wl=e=>{const n=Object.create(null);return s=>n[s]||(n[s]=e(s))},Cm=/-(\w)/g,mn=wl(e=>e.replace(Cm,(n,s)=>s?s.toUpperCase():"")),km=/\B([A-Z])/g,es=wl(e=>e.replace(km,"-$1").toLowerCase()),Ll=wl(e=>e.charAt(0).toUpperCase()+e.slice(1)),Nu=wl(e=>e?`on${Ll(e)}`:""),xr=(e,n)=>!Object.is(e,n),Wa=(e,...n)=>{for(let s=0;s<e.length;s++)e[s](...n)},Fd=(e,n,s,l=!1)=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,writable:l,value:s})},sl=e=>{const n=parseFloat(e);return isNaN(n)?e:n};let ch;const Cl=()=>ch||(ch=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function kl(e){if(mt(e)){const n={};for(let s=0;s<e.length;s++){const l=e[s],h=li(l)?Sm(l):kl(l);if(h)for(const p in h)n[p]=h[p]}return n}else if(li(e)||qt(e))return e}const Em=/;(?![^(]*\))/g,Mm=/:([^]+)/,Pm=/\/\*[^]*?\*\//g;function Sm(e){const n={};return e.replace(Pm,"").split(Em).forEach(s=>{if(s){const l=s.split(Mm);l.length>1&&(n[l[0].trim()]=l[1].trim())}}),n}function $i(e){let n="";if(li(e))n=e;else if(mt(e))for(let s=0;s<e.length;s++){const l=$i(e[s]);l&&(n+=l+" ")}else if(qt(e))for(const s in e)e[s]&&(n+=s+" ");return n.trim()}const Bm="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Am=Bc(Bm);function Nd(e){return!!e||e===""}function Tm(e,n){if(e.length!==n.length)return!1;let s=!0;for(let l=0;s&&l<e.length;l++)s=Wr(e[l],n[l]);return s}function Wr(e,n){if(e===n)return!0;let s=uh(e),l=uh(n);if(s||l)return s&&l?e.getTime()===n.getTime():!1;if(s=Fn(e),l=Fn(n),s||l)return e===n;if(s=mt(e),l=mt(n),s||l)return s&&l?Tm(e,n):!1;if(s=qt(e),l=qt(n),s||l){if(!s||!l)return!1;const h=Object.keys(e).length,p=Object.keys(n).length;if(h!==p)return!1;for(const f in e){const y=e.hasOwnProperty(f),v=n.hasOwnProperty(f);if(y&&!v||!y&&v||!Wr(e[f],n[f]))return!1}}return String(e)===String(n)}function Rc(e,n){return e.findIndex(s=>Wr(s,n))}const zd=e=>!!(e&&e.__v_isRef===!0),Ve=e=>li(e)?e:e==null?"":mt(e)||qt(e)&&(e.toString===Od||!wt(e.toString))?zd(e)?Ve(e.value):JSON.stringify(e,$d,2):String(e),$d=(e,n)=>zd(n)?$d(e,n.value):Os(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((s,[l,h],p)=>(s[zu(l,p)+" =>"]=h,s),{})}:js(n)?{[`Set(${n.size})`]:[...n.values()].map(s=>zu(s))}:Fn(n)?zu(n):qt(n)&&!mt(n)&&!Id(n)?String(n):n,zu=(e,n="")=>{var s;return Fn(e)?`Symbol(${(s=e.description)!=null?s:n})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Fi;class Ud{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Fi,!n&&Fi&&(this.index=(Fi.scopes||(Fi.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let n,s;if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].pause();for(n=0,s=this.effects.length;n<s;n++)this.effects[n].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let n,s;if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].resume();for(n=0,s=this.effects.length;n<s;n++)this.effects[n].resume()}}run(n){if(this._active){const s=Fi;try{return Fi=this,n()}finally{Fi=s}}}on(){Fi=this}off(){Fi=this.parent}stop(n){if(this._active){this._active=!1;let s,l;for(s=0,l=this.effects.length;s<l;s++)this.effects[s].stop();for(this.effects.length=0,s=0,l=this.cleanups.length;s<l;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,l=this.scopes.length;s<l;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!n){const h=this.parent.scopes.pop();h&&h!==this&&(this.parent.scopes[this.index]=h,h.index=this.index)}this.parent=void 0}}}function jd(e){return new Ud(e)}function Gd(){return Fi}function Dm(e,n=!1){Fi&&Fi.cleanups.push(e)}let Zt;const $u=new WeakSet;class Vd{constructor(n){this.fn=n,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Fi&&Fi.active&&Fi.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,$u.has(this)&&($u.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Zd(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,hh(this),qd(this);const n=Zt,s=xn;Zt=this,xn=!0;try{return this.fn()}finally{Kd(this),Zt=n,xn=s,this.flags&=-3}}stop(){if(this.flags&1){for(let n=this.deps;n;n=n.nextDep)Fc(n);this.deps=this.depsTail=void 0,hh(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?$u.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){rc(this)&&this.run()}get dirty(){return rc(this)}}let Hd=0,Oo,Io;function Zd(e,n=!1){if(e.flags|=8,n){e.next=Io,Io=e;return}e.next=Oo,Oo=e}function Oc(){Hd++}function Ic(){if(--Hd>0)return;if(Io){let n=Io;for(Io=void 0;n;){const s=n.next;n.next=void 0,n.flags&=-9,n=s}}let e;for(;Oo;){let n=Oo;for(Oo=void 0;n;){const s=n.next;if(n.next=void 0,n.flags&=-9,n.flags&1)try{n.trigger()}catch(l){e||(e=l)}n=s}}if(e)throw e}function qd(e){for(let n=e.deps;n;n=n.nextDep)n.version=-1,n.prevActiveLink=n.dep.activeLink,n.dep.activeLink=n}function Kd(e){let n,s=e.depsTail,l=s;for(;l;){const h=l.prevDep;l.version===-1?(l===s&&(s=h),Fc(l),Rm(l)):n=l,l.dep.activeLink=l.prevActiveLink,l.prevActiveLink=void 0,l=h}e.deps=n,e.depsTail=s}function rc(e){for(let n=e.deps;n;n=n.nextDep)if(n.dep.version!==n.version||n.dep.computed&&(Wd(n.dep.computed)||n.dep.version!==n.version))return!0;return!!e._dirty}function Wd(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Vo))return;e.globalVersion=Vo;const n=e.dep;if(e.flags|=2,n.version>0&&!e.isSSR&&e.deps&&!rc(e)){e.flags&=-3;return}const s=Zt,l=xn;Zt=e,xn=!0;try{qd(e);const h=e.fn(e._value);(n.version===0||xr(h,e._value))&&(e._value=h,n.version++)}catch(h){throw n.version++,h}finally{Zt=s,xn=l,Kd(e),e.flags&=-3}}function Fc(e,n=!1){const{dep:s,prevSub:l,nextSub:h}=e;if(l&&(l.nextSub=h,e.prevSub=void 0),h&&(h.prevSub=l,e.nextSub=void 0),s.subs===e&&(s.subs=l,!l&&s.computed)){s.computed.flags&=-5;for(let p=s.computed.deps;p;p=p.nextDep)Fc(p,!0)}!n&&!--s.sc&&s.map&&s.map.delete(s.key)}function Rm(e){const{prevDep:n,nextDep:s}=e;n&&(n.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=n,e.nextDep=void 0)}let xn=!0;const Jd=[];function Cr(){Jd.push(xn),xn=!1}function kr(){const e=Jd.pop();xn=e===void 0?!0:e}function hh(e){const{cleanup:n}=e;if(e.cleanup=void 0,n){const s=Zt;Zt=void 0;try{n()}finally{Zt=s}}}let Vo=0;class Om{constructor(n,s){this.sub=n,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Nc{constructor(n){this.computed=n,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(n){if(!Zt||!xn||Zt===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Zt)s=this.activeLink=new Om(Zt,this),Zt.deps?(s.prevDep=Zt.depsTail,Zt.depsTail.nextDep=s,Zt.depsTail=s):Zt.deps=Zt.depsTail=s,Xd(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const l=s.nextDep;l.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=l),s.prevDep=Zt.depsTail,s.nextDep=void 0,Zt.depsTail.nextDep=s,Zt.depsTail=s,Zt.deps===s&&(Zt.deps=l)}return s}trigger(n){this.version++,Vo++,this.notify(n)}notify(n){Oc();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Ic()}}}function Xd(e){if(e.dep.sc++,e.sub.flags&4){const n=e.dep.computed;if(n&&!e.dep.subs){n.flags|=20;for(let l=n.deps;l;l=l.nextDep)Xd(l)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const ol=new WeakMap,Zr=Symbol(""),sc=Symbol(""),Ho=Symbol("");function Ei(e,n,s){if(xn&&Zt){let l=ol.get(e);l||ol.set(e,l=new Map);let h=l.get(s);h||(l.set(s,h=new Nc),h.map=l,h.key=s),h.track()}}function Qn(e,n,s,l,h,p){const f=ol.get(e);if(!f){Vo++;return}const y=v=>{v&&v.trigger()};if(Oc(),n==="clear")f.forEach(y);else{const v=mt(e),C=v&&Dc(s);if(v&&s==="length"){const M=Number(l);f.forEach((P,G)=>{(G==="length"||G===Ho||!Fn(G)&&G>=M)&&y(P)})}else switch((s!==void 0||f.has(void 0))&&y(f.get(s)),C&&y(f.get(Ho)),n){case"add":v?C&&y(f.get("length")):(y(f.get(Zr)),Os(e)&&y(f.get(sc)));break;case"delete":v||(y(f.get(Zr)),Os(e)&&y(f.get(sc)));break;case"set":Os(e)&&y(f.get(Zr));break}}Ic()}function Im(e,n){const s=ol.get(e);return s&&s.get(n)}function Ss(e){const n=Rt(e);return n===e?n:(Ei(n,"iterate",Ho),dn(e)?n:n.map(Mi))}function El(e){return Ei(e=Rt(e),"iterate",Ho),e}const Fm={__proto__:null,[Symbol.iterator](){return Uu(this,Symbol.iterator,Mi)},concat(...e){return Ss(this).concat(...e.map(n=>mt(n)?Ss(n):n))},entries(){return Uu(this,"entries",e=>(e[1]=Mi(e[1]),e))},every(e,n){return Jn(this,"every",e,n,void 0,arguments)},filter(e,n){return Jn(this,"filter",e,n,s=>s.map(Mi),arguments)},find(e,n){return Jn(this,"find",e,n,Mi,arguments)},findIndex(e,n){return Jn(this,"findIndex",e,n,void 0,arguments)},findLast(e,n){return Jn(this,"findLast",e,n,Mi,arguments)},findLastIndex(e,n){return Jn(this,"findLastIndex",e,n,void 0,arguments)},forEach(e,n){return Jn(this,"forEach",e,n,void 0,arguments)},includes(...e){return ju(this,"includes",e)},indexOf(...e){return ju(this,"indexOf",e)},join(e){return Ss(this).join(e)},lastIndexOf(...e){return ju(this,"lastIndexOf",e)},map(e,n){return Jn(this,"map",e,n,void 0,arguments)},pop(){return Eo(this,"pop")},push(...e){return Eo(this,"push",e)},reduce(e,...n){return dh(this,"reduce",e,n)},reduceRight(e,...n){return dh(this,"reduceRight",e,n)},shift(){return Eo(this,"shift")},some(e,n){return Jn(this,"some",e,n,void 0,arguments)},splice(...e){return Eo(this,"splice",e)},toReversed(){return Ss(this).toReversed()},toSorted(e){return Ss(this).toSorted(e)},toSpliced(...e){return Ss(this).toSpliced(...e)},unshift(...e){return Eo(this,"unshift",e)},values(){return Uu(this,"values",Mi)}};function Uu(e,n,s){const l=El(e),h=l[n]();return l!==e&&!dn(e)&&(h._next=h.next,h.next=()=>{const p=h._next();return p.value&&(p.value=s(p.value)),p}),h}const Nm=Array.prototype;function Jn(e,n,s,l,h,p){const f=El(e),y=f!==e&&!dn(e),v=f[n];if(v!==Nm[n]){const P=v.apply(e,p);return y?Mi(P):P}let C=s;f!==e&&(y?C=function(P,G){return s.call(this,Mi(P),G,e)}:s.length>2&&(C=function(P,G){return s.call(this,P,G,e)}));const M=v.call(f,C,l);return y&&h?h(M):M}function dh(e,n,s,l){const h=El(e);let p=s;return h!==e&&(dn(e)?s.length>3&&(p=function(f,y,v){return s.call(this,f,y,v,e)}):p=function(f,y,v){return s.call(this,f,Mi(y),v,e)}),h[n](p,...l)}function ju(e,n,s){const l=Rt(e);Ei(l,"iterate",Ho);const h=l[n](...s);return(h===-1||h===!1)&&Uc(s[0])?(s[0]=Rt(s[0]),l[n](...s)):h}function Eo(e,n,s=[]){Cr(),Oc();const l=Rt(e)[n].apply(e,s);return Ic(),kr(),l}const zm=Bc("__proto__,__v_isRef,__isVue"),Yd=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Fn));function $m(e){Fn(e)||(e=String(e));const n=Rt(this);return Ei(n,"has",e),n.hasOwnProperty(e)}class Qd{constructor(n=!1,s=!1){this._isReadonly=n,this._isShallow=s}get(n,s,l){if(s==="__v_skip")return n.__v_skip;const h=this._isReadonly,p=this._isShallow;if(s==="__v_isReactive")return!h;if(s==="__v_isReadonly")return h;if(s==="__v_isShallow")return p;if(s==="__v_raw")return l===(h?p?Jm:rf:p?nf:tf).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(l)?n:void 0;const f=mt(n);if(!h){let v;if(f&&(v=Fm[s]))return v;if(s==="hasOwnProperty")return $m}const y=Reflect.get(n,s,si(n)?n:l);return(Fn(s)?Yd.has(s):zm(s))||(h||Ei(n,"get",s),p)?y:si(y)?f&&Dc(s)?y:y.value:qt(y)?h?of(y):nr(y):y}}class ef extends Qd{constructor(n=!1){super(!1,n)}set(n,s,l,h){let p=n[s];if(!this._isShallow){const v=Jr(p);if(!dn(l)&&!Jr(l)&&(p=Rt(p),l=Rt(l)),!mt(n)&&si(p)&&!si(l))return v?!1:(p.value=l,!0)}const f=mt(n)&&Dc(s)?Number(s)<n.length:zt(n,s),y=Reflect.set(n,s,l,si(n)?n:h);return n===Rt(h)&&(f?xr(l,p)&&Qn(n,"set",s,l):Qn(n,"add",s,l)),y}deleteProperty(n,s){const l=zt(n,s);n[s];const h=Reflect.deleteProperty(n,s);return h&&l&&Qn(n,"delete",s,void 0),h}has(n,s){const l=Reflect.has(n,s);return(!Fn(s)||!Yd.has(s))&&Ei(n,"has",s),l}ownKeys(n){return Ei(n,"iterate",mt(n)?"length":Zr),Reflect.ownKeys(n)}}class Um extends Qd{constructor(n=!1){super(!0,n)}set(n,s){return!0}deleteProperty(n,s){return!0}}const jm=new ef,Gm=new Um,Vm=new ef(!0);const oc=e=>e,Ga=e=>Reflect.getPrototypeOf(e);function Hm(e,n,s){return function(...l){const h=this.__v_raw,p=Rt(h),f=Os(p),y=e==="entries"||e===Symbol.iterator&&f,v=e==="keys"&&f,C=h[e](...l),M=s?oc:n?ac:Mi;return!n&&Ei(p,"iterate",v?sc:Zr),{next(){const{value:P,done:G}=C.next();return G?{value:P,done:G}:{value:y?[M(P[0]),M(P[1])]:M(P),done:G}},[Symbol.iterator](){return this}}}}function Va(e){return function(...n){return e==="delete"?!1:e==="clear"?void 0:this}}function Zm(e,n){const s={get(h){const p=this.__v_raw,f=Rt(p),y=Rt(h);e||(xr(h,y)&&Ei(f,"get",h),Ei(f,"get",y));const{has:v}=Ga(f),C=n?oc:e?ac:Mi;if(v.call(f,h))return C(p.get(h));if(v.call(f,y))return C(p.get(y));p!==f&&p.get(h)},get size(){const h=this.__v_raw;return!e&&Ei(Rt(h),"iterate",Zr),Reflect.get(h,"size",h)},has(h){const p=this.__v_raw,f=Rt(p),y=Rt(h);return e||(xr(h,y)&&Ei(f,"has",h),Ei(f,"has",y)),h===y?p.has(h):p.has(h)||p.has(y)},forEach(h,p){const f=this,y=f.__v_raw,v=Rt(y),C=n?oc:e?ac:Mi;return!e&&Ei(v,"iterate",Zr),y.forEach((M,P)=>h.call(p,C(M),C(P),f))}};return Si(s,e?{add:Va("add"),set:Va("set"),delete:Va("delete"),clear:Va("clear")}:{add(h){!n&&!dn(h)&&!Jr(h)&&(h=Rt(h));const p=Rt(this);return Ga(p).has.call(p,h)||(p.add(h),Qn(p,"add",h,h)),this},set(h,p){!n&&!dn(p)&&!Jr(p)&&(p=Rt(p));const f=Rt(this),{has:y,get:v}=Ga(f);let C=y.call(f,h);C||(h=Rt(h),C=y.call(f,h));const M=v.call(f,h);return f.set(h,p),C?xr(p,M)&&Qn(f,"set",h,p):Qn(f,"add",h,p),this},delete(h){const p=Rt(this),{has:f,get:y}=Ga(p);let v=f.call(p,h);v||(h=Rt(h),v=f.call(p,h)),y&&y.call(p,h);const C=p.delete(h);return v&&Qn(p,"delete",h,void 0),C},clear(){const h=Rt(this),p=h.size!==0,f=h.clear();return p&&Qn(h,"clear",void 0,void 0),f}}),["keys","values","entries",Symbol.iterator].forEach(h=>{s[h]=Hm(h,e,n)}),s}function zc(e,n){const s=Zm(e,n);return(l,h,p)=>h==="__v_isReactive"?!e:h==="__v_isReadonly"?e:h==="__v_raw"?l:Reflect.get(zt(s,h)&&h in l?s:l,h,p)}const qm={get:zc(!1,!1)},Km={get:zc(!1,!0)},Wm={get:zc(!0,!1)};const tf=new WeakMap,nf=new WeakMap,rf=new WeakMap,Jm=new WeakMap;function Xm(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ym(e){return e.__v_skip||!Object.isExtensible(e)?0:Xm(Lm(e))}function nr(e){return Jr(e)?e:$c(e,!1,jm,qm,tf)}function sf(e){return $c(e,!1,Vm,Km,nf)}function of(e){return $c(e,!0,Gm,Wm,rf)}function $c(e,n,s,l,h){if(!qt(e)||e.__v_raw&&!(n&&e.__v_isReactive))return e;const p=h.get(e);if(p)return p;const f=Ym(e);if(f===0)return e;const y=new Proxy(e,f===2?l:s);return h.set(e,y),y}function wr(e){return Jr(e)?wr(e.__v_raw):!!(e&&e.__v_isReactive)}function Jr(e){return!!(e&&e.__v_isReadonly)}function dn(e){return!!(e&&e.__v_isShallow)}function Uc(e){return e?!!e.__v_raw:!1}function Rt(e){const n=e&&e.__v_raw;return n?Rt(n):e}function jc(e){return!zt(e,"__v_skip")&&Object.isExtensible(e)&&Fd(e,"__v_skip",!0),e}const Mi=e=>qt(e)?nr(e):e,ac=e=>qt(e)?of(e):e;function si(e){return e?e.__v_isRef===!0:!1}function qe(e){return af(e,!1)}function Qm(e){return af(e,!0)}function af(e,n){return si(e)?e:new e0(e,n)}class e0{constructor(n,s){this.dep=new Nc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?n:Rt(n),this._value=s?n:Mi(n),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(n){const s=this._rawValue,l=this.__v_isShallow||dn(n)||Jr(n);n=l?n:Rt(n),xr(n,s)&&(this._rawValue=n,this._value=l?n:Mi(n),this.dep.trigger())}}function Mt(e){return si(e)?e.value:e}const t0={get:(e,n,s)=>n==="__v_raw"?e:Mt(Reflect.get(e,n,s)),set:(e,n,s,l)=>{const h=e[n];return si(h)&&!si(s)?(h.value=s,!0):Reflect.set(e,n,s,l)}};function lf(e){return wr(e)?e:new Proxy(e,t0)}function i0(e){const n=mt(e)?new Array(e.length):{};for(const s in e)n[s]=r0(e,s);return n}class n0{constructor(n,s,l){this._object=n,this._key=s,this._defaultValue=l,this.__v_isRef=!0,this._value=void 0}get value(){const n=this._object[this._key];return this._value=n===void 0?this._defaultValue:n}set value(n){this._object[this._key]=n}get dep(){return Im(Rt(this._object),this._key)}}function r0(e,n,s){const l=e[n];return si(l)?l:new n0(e,n,s)}class s0{constructor(n,s,l){this.fn=n,this.setter=s,this._value=void 0,this.dep=new Nc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Vo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=l}notify(){if(this.flags|=16,!(this.flags&8)&&Zt!==this)return Zd(this,!0),!0}get value(){const n=this.dep.track();return Wd(this),n&&(n.version=this.dep.version),this._value}set value(n){this.setter&&this.setter(n)}}function o0(e,n,s=!1){let l,h;return wt(e)?l=e:(l=e.get,h=e.set),new s0(l,h,s)}const Ha={},al=new WeakMap;let Gr;function a0(e,n=!1,s=Gr){if(s){let l=al.get(s);l||al.set(s,l=[]),l.push(e)}}function l0(e,n,s=Vt){const{immediate:l,deep:h,once:p,scheduler:f,augmentJob:y,call:v}=s,C=Ne=>h?Ne:dn(Ne)||h===!1||h===0?er(Ne,1):er(Ne);let M,P,G,W,D=!1,z=!1;if(si(e)?(P=()=>e.value,D=dn(e)):wr(e)?(P=()=>C(e),D=!0):mt(e)?(z=!0,D=e.some(Ne=>wr(Ne)||dn(Ne)),P=()=>e.map(Ne=>{if(si(Ne))return Ne.value;if(wr(Ne))return C(Ne);if(wt(Ne))return v?v(Ne,2):Ne()})):wt(e)?n?P=v?()=>v(e,2):e:P=()=>{if(G){Cr();try{G()}finally{kr()}}const Ne=Gr;Gr=M;try{return v?v(e,3,[W]):e(W)}finally{Gr=Ne}}:P=In,n&&h){const Ne=P,Ue=h===!0?1/0:h;P=()=>er(Ne(),Ue)}const j=Gd(),_e=()=>{M.stop(),j&&j.active&&Tc(j.effects,M)};if(p&&n){const Ne=n;n=(...Ue)=>{Ne(...Ue),_e()}}let Be=z?new Array(e.length).fill(Ha):Ha;const ge=Ne=>{if(!(!(M.flags&1)||!M.dirty&&!Ne))if(n){const Ue=M.run();if(h||D||(z?Ue.some((fe,Pe)=>xr(fe,Be[Pe])):xr(Ue,Be))){G&&G();const fe=Gr;Gr=M;try{const Pe=[Ue,Be===Ha?void 0:z&&Be[0]===Ha?[]:Be,W];v?v(n,3,Pe):n(...Pe),Be=Ue}finally{Gr=fe}}}else M.run()};return y&&y(ge),M=new Vd(P),M.scheduler=f?()=>f(ge,!1):ge,W=Ne=>a0(Ne,!1,M),G=M.onStop=()=>{const Ne=al.get(M);if(Ne){if(v)v(Ne,4);else for(const Ue of Ne)Ue();al.delete(M)}},n?l?ge(!0):Be=M.run():f?f(ge.bind(null,!0),!0):M.run(),_e.pause=M.pause.bind(M),_e.resume=M.resume.bind(M),_e.stop=_e,_e}function er(e,n=1/0,s){if(n<=0||!qt(e)||e.__v_skip||(s=s||new Set,s.has(e)))return e;if(s.add(e),n--,si(e))er(e.value,n,s);else if(mt(e))for(let l=0;l<e.length;l++)er(e[l],n,s);else if(js(e)||Os(e))e.forEach(l=>{er(l,n,s)});else if(Id(e)){for(const l in e)er(e[l],n,s);for(const l of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,l)&&er(e[l],n,s)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ea(e,n,s,l){try{return l?e(...l):e()}catch(h){Ml(h,n,s)}}function Nn(e,n,s,l){if(wt(e)){const h=ea(e,n,s,l);return h&&Rd(h)&&h.catch(p=>{Ml(p,n,s)}),h}if(mt(e)){const h=[];for(let p=0;p<e.length;p++)h.push(Nn(e[p],n,s,l));return h}}function Ml(e,n,s,l=!0){const h=n?n.vnode:null,{errorHandler:p,throwUnhandledErrorInProduction:f}=n&&n.appContext.config||Vt;if(n){let y=n.parent;const v=n.proxy,C=`https://vuejs.org/error-reference/#runtime-${s}`;for(;y;){const M=y.ec;if(M){for(let P=0;P<M.length;P++)if(M[P](e,v,C)===!1)return}y=y.parent}if(p){Cr(),ea(p,null,10,[e,v,C]),kr();return}}u0(e,s,h,l,f)}function u0(e,n,s,l=!0,h=!1){if(h)throw e;console.error(e)}const Ni=[];let Rn=-1;const Is=[];let yr=null,As=0;const uf=Promise.resolve();let ll=null;function Fs(e){const n=ll||uf;return e?n.then(this?e.bind(this):e):n}function c0(e){let n=Rn+1,s=Ni.length;for(;n<s;){const l=n+s>>>1,h=Ni[l],p=Zo(h);p<e||p===e&&h.flags&2?n=l+1:s=l}return n}function Gc(e){if(!(e.flags&1)){const n=Zo(e),s=Ni[Ni.length-1];!s||!(e.flags&2)&&n>=Zo(s)?Ni.push(e):Ni.splice(c0(n),0,e),e.flags|=1,cf()}}function cf(){ll||(ll=uf.then(df))}function h0(e){mt(e)?Is.push(...e):yr&&e.id===-1?yr.splice(As+1,0,e):e.flags&1||(Is.push(e),e.flags|=1),cf()}function fh(e,n,s=Rn+1){for(;s<Ni.length;s++){const l=Ni[s];if(l&&l.flags&2){if(e&&l.id!==e.uid)continue;Ni.splice(s,1),s--,l.flags&4&&(l.flags&=-2),l(),l.flags&4||(l.flags&=-2)}}}function hf(e){if(Is.length){const n=[...new Set(Is)].sort((s,l)=>Zo(s)-Zo(l));if(Is.length=0,yr){yr.push(...n);return}for(yr=n,As=0;As<yr.length;As++){const s=yr[As];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}yr=null,As=0}}const Zo=e=>e.id==null?e.flags&2?-1:1/0:e.id;function df(e){try{for(Rn=0;Rn<Ni.length;Rn++){const n=Ni[Rn];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),ea(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;Rn<Ni.length;Rn++){const n=Ni[Rn];n&&(n.flags&=-2)}Rn=-1,Ni.length=0,hf(),ll=null,(Ni.length||Is.length)&&df()}}let Zi=null,ff=null;function ul(e){const n=Zi;return Zi=e,ff=e&&e.type.__scopeId||null,n}function Fo(e,n=Zi,s){if(!n||e._n)return e;const l=(...h)=>{l._d&&Lh(-1);const p=ul(n);let f;try{f=e(...h)}finally{ul(p),l._d&&Lh(1)}return f};return l._n=!0,l._c=!0,l._d=!0,l}function St(e,n){if(Zi===null)return e;const s=Tl(Zi),l=e.dirs||(e.dirs=[]);for(let h=0;h<n.length;h++){let[p,f,y,v=Vt]=n[h];p&&(wt(p)&&(p={mounted:p,updated:p}),p.deep&&er(f),l.push({dir:p,instance:s,value:f,oldValue:void 0,arg:y,modifiers:v}))}return e}function Ur(e,n,s,l){const h=e.dirs,p=n&&n.dirs;for(let f=0;f<h.length;f++){const y=h[f];p&&(y.oldValue=p[f].value);let v=y.dir[l];v&&(Cr(),Nn(v,s,8,[e.el,y,e,n]),kr())}}const d0=Symbol("_vte"),f0=e=>e.__isTeleport;function Vc(e,n){e.shapeFlag&6&&e.component?(e.transition=n,Vc(e.component.subTree,n)):e.shapeFlag&128?(e.ssContent.transition=n.clone(e.ssContent),e.ssFallback.transition=n.clone(e.ssFallback)):e.transition=n}/*! #__NO_SIDE_EFFECTS__ */function Ki(e,n){return wt(e)?Si({name:e.name},n,{setup:e}):e}function pf(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function cl(e,n,s,l,h=!1){if(mt(e)){e.forEach((D,z)=>cl(D,n&&(mt(n)?n[z]:n),s,l,h));return}if(No(l)&&!h){l.shapeFlag&512&&l.type.__asyncResolved&&l.component.subTree.component&&cl(e,n,s,l.component.subTree);return}const p=l.shapeFlag&4?Tl(l.component):l.el,f=h?null:p,{i:y,r:v}=e,C=n&&n.r,M=y.refs===Vt?y.refs={}:y.refs,P=y.setupState,G=Rt(P),W=P===Vt?()=>!1:D=>zt(G,D);if(C!=null&&C!==v&&(li(C)?(M[C]=null,W(C)&&(P[C]=null)):si(C)&&(C.value=null)),wt(v))ea(v,y,12,[f,M]);else{const D=li(v),z=si(v);if(D||z){const j=()=>{if(e.f){const _e=D?W(v)?P[v]:M[v]:v.value;h?mt(_e)&&Tc(_e,p):mt(_e)?_e.includes(p)||_e.push(p):D?(M[v]=[p],W(v)&&(P[v]=M[v])):(v.value=[p],e.k&&(M[e.k]=v.value))}else D?(M[v]=f,W(v)&&(P[v]=f)):z&&(v.value=f,e.k&&(M[e.k]=f))};f?(j.id=-1,Yi(j,s)):j()}}}Cl().requestIdleCallback;Cl().cancelIdleCallback;const No=e=>!!e.type.__asyncLoader,mf=e=>e.type.__isKeepAlive;function p0(e,n){gf(e,"a",n)}function m0(e,n){gf(e,"da",n)}function gf(e,n,s=vi){const l=e.__wdc||(e.__wdc=()=>{let h=s;for(;h;){if(h.isDeactivated)return;h=h.parent}return e()});if(Pl(n,l,s),s){let h=s.parent;for(;h&&h.parent;)mf(h.parent.vnode)&&g0(l,n,s,h),h=h.parent}}function g0(e,n,s,l){const h=Pl(n,e,l,!0);Sl(()=>{Tc(l[n],h)},s)}function Pl(e,n,s=vi,l=!1){if(s){const h=s[e]||(s[e]=[]),p=n.__weh||(n.__weh=(...f)=>{Cr();const y=ta(s),v=Nn(n,s,e,f);return y(),kr(),v});return l?h.unshift(p):h.push(p),p}}const rr=e=>(n,s=vi)=>{(!Ko||e==="sp")&&Pl(e,(...l)=>n(...l),s)},_0=rr("bm"),Er=rr("m"),y0=rr("bu"),v0=rr("u"),_f=rr("bum"),Sl=rr("um"),b0=rr("sp"),x0=rr("rtg"),w0=rr("rtc");function L0(e,n=vi){Pl("ec",e,n)}const C0="components";function k0(e,n){return M0(C0,e,!0,n)||e}const E0=Symbol.for("v-ndc");function M0(e,n,s=!0,l=!1){const h=Zi||vi;if(h){const p=h.type;{const y=pg(p,!1);if(y&&(y===n||y===mn(n)||y===Ll(mn(n))))return p}const f=ph(h[e]||p[e],n)||ph(h.appContext[e],n);return!f&&l?p:f}}function ph(e,n){return e&&(e[n]||e[mn(n)]||e[Ll(mn(n))])}function It(e,n,s,l){let h;const p=s,f=mt(e);if(f||li(e)){const y=f&&wr(e);let v=!1;y&&(v=!dn(e),e=El(e)),h=new Array(e.length);for(let C=0,M=e.length;C<M;C++)h[C]=n(v?Mi(e[C]):e[C],C,void 0,p)}else if(typeof e=="number"){h=new Array(e);for(let y=0;y<e;y++)h[y]=n(y+1,y,void 0,p)}else if(qt(e))if(e[Symbol.iterator])h=Array.from(e,(y,v)=>n(y,v,void 0,p));else{const y=Object.keys(e);h=new Array(y.length);for(let v=0,C=y.length;v<C;v++){const M=y[v];h[v]=n(e[M],M,v,p)}}else h=[];return h}const lc=e=>e?Nf(e)?Tl(e):lc(e.parent):null,zo=Si(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>lc(e.parent),$root:e=>lc(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>vf(e),$forceUpdate:e=>e.f||(e.f=()=>{Gc(e.update)}),$nextTick:e=>e.n||(e.n=Fs.bind(e.proxy)),$watch:e=>W0.bind(e)}),Gu=(e,n)=>e!==Vt&&!e.__isScriptSetup&&zt(e,n),P0={get({_:e},n){if(n==="__v_skip")return!0;const{ctx:s,setupState:l,data:h,props:p,accessCache:f,type:y,appContext:v}=e;let C;if(n[0]!=="$"){const W=f[n];if(W!==void 0)switch(W){case 1:return l[n];case 2:return h[n];case 4:return s[n];case 3:return p[n]}else{if(Gu(l,n))return f[n]=1,l[n];if(h!==Vt&&zt(h,n))return f[n]=2,h[n];if((C=e.propsOptions[0])&&zt(C,n))return f[n]=3,p[n];if(s!==Vt&&zt(s,n))return f[n]=4,s[n];uc&&(f[n]=0)}}const M=zo[n];let P,G;if(M)return n==="$attrs"&&Ei(e.attrs,"get",""),M(e);if((P=y.__cssModules)&&(P=P[n]))return P;if(s!==Vt&&zt(s,n))return f[n]=4,s[n];if(G=v.config.globalProperties,zt(G,n))return G[n]},set({_:e},n,s){const{data:l,setupState:h,ctx:p}=e;return Gu(h,n)?(h[n]=s,!0):l!==Vt&&zt(l,n)?(l[n]=s,!0):zt(e.props,n)||n[0]==="$"&&n.slice(1)in e?!1:(p[n]=s,!0)},has({_:{data:e,setupState:n,accessCache:s,ctx:l,appContext:h,propsOptions:p}},f){let y;return!!s[f]||e!==Vt&&zt(e,f)||Gu(n,f)||(y=p[0])&&zt(y,f)||zt(l,f)||zt(zo,f)||zt(h.config.globalProperties,f)},defineProperty(e,n,s){return s.get!=null?e._.accessCache[n]=0:zt(s,"value")&&this.set(e,n,s.value,null),Reflect.defineProperty(e,n,s)}};function mh(e){return mt(e)?e.reduce((n,s)=>(n[s]=null,n),{}):e}let uc=!0;function S0(e){const n=vf(e),s=e.proxy,l=e.ctx;uc=!1,n.beforeCreate&&gh(n.beforeCreate,e,"bc");const{data:h,computed:p,methods:f,watch:y,provide:v,inject:C,created:M,beforeMount:P,mounted:G,beforeUpdate:W,updated:D,activated:z,deactivated:j,beforeDestroy:_e,beforeUnmount:Be,destroyed:ge,unmounted:Ne,render:Ue,renderTracked:fe,renderTriggered:Pe,errorCaptured:F,serverPrefetch:X,expose:pe,inheritAttrs:ee,components:De,directives:Ae,filters:ie}=n;if(C&&B0(C,l,null),f)for(const Ee in f){const Z=f[Ee];wt(Z)&&(l[Ee]=Z.bind(s))}if(h){const Ee=h.call(s,s);qt(Ee)&&(e.data=nr(Ee))}if(uc=!0,p)for(const Ee in p){const Z=p[Ee],te=wt(Z)?Z.bind(s,s):wt(Z.get)?Z.get.bind(s,s):In,re=!wt(Z)&&wt(Z.set)?Z.set.bind(s):In,be=Ct({get:te,set:re});Object.defineProperty(l,Ee,{enumerable:!0,configurable:!0,get:()=>be.value,set:me=>be.value=me})}if(y)for(const Ee in y)yf(y[Ee],l,s,Ee);if(v){const Ee=wt(v)?v.call(s):v;Reflect.ownKeys(Ee).forEach(Z=>{Ja(Z,Ee[Z])})}M&&gh(M,e,"c");function Re(Ee,Z){mt(Z)?Z.forEach(te=>Ee(te.bind(s))):Z&&Ee(Z.bind(s))}if(Re(_0,P),Re(Er,G),Re(y0,W),Re(v0,D),Re(p0,z),Re(m0,j),Re(L0,F),Re(w0,fe),Re(x0,Pe),Re(_f,Be),Re(Sl,Ne),Re(b0,X),mt(pe))if(pe.length){const Ee=e.exposed||(e.exposed={});pe.forEach(Z=>{Object.defineProperty(Ee,Z,{get:()=>s[Z],set:te=>s[Z]=te})})}else e.exposed||(e.exposed={});Ue&&e.render===In&&(e.render=Ue),ee!=null&&(e.inheritAttrs=ee),De&&(e.components=De),Ae&&(e.directives=Ae),X&&pf(e)}function B0(e,n,s=In){mt(e)&&(e=cc(e));for(const l in e){const h=e[l];let p;qt(h)?"default"in h?p=fn(h.from||l,h.default,!0):p=fn(h.from||l):p=fn(h),si(p)?Object.defineProperty(n,l,{enumerable:!0,configurable:!0,get:()=>p.value,set:f=>p.value=f}):n[l]=p}}function gh(e,n,s){Nn(mt(e)?e.map(l=>l.bind(n.proxy)):e.bind(n.proxy),n,s)}function yf(e,n,s,l){let h=l.includes(".")?Df(s,l):()=>s[l];if(li(e)){const p=n[e];wt(p)&&zi(h,p)}else if(wt(e))zi(h,e.bind(s));else if(qt(e))if(mt(e))e.forEach(p=>yf(p,n,s,l));else{const p=wt(e.handler)?e.handler.bind(s):n[e.handler];wt(p)&&zi(h,p,e)}}function vf(e){const n=e.type,{mixins:s,extends:l}=n,{mixins:h,optionsCache:p,config:{optionMergeStrategies:f}}=e.appContext,y=p.get(n);let v;return y?v=y:!h.length&&!s&&!l?v=n:(v={},h.length&&h.forEach(C=>hl(v,C,f,!0)),hl(v,n,f)),qt(n)&&p.set(n,v),v}function hl(e,n,s,l=!1){const{mixins:h,extends:p}=n;p&&hl(e,p,s,!0),h&&h.forEach(f=>hl(e,f,s,!0));for(const f in n)if(!(l&&f==="expose")){const y=A0[f]||s&&s[f];e[f]=y?y(e[f],n[f]):n[f]}return e}const A0={data:_h,props:yh,emits:yh,methods:To,computed:To,beforeCreate:Oi,created:Oi,beforeMount:Oi,mounted:Oi,beforeUpdate:Oi,updated:Oi,beforeDestroy:Oi,beforeUnmount:Oi,destroyed:Oi,unmounted:Oi,activated:Oi,deactivated:Oi,errorCaptured:Oi,serverPrefetch:Oi,components:To,directives:To,watch:D0,provide:_h,inject:T0};function _h(e,n){return n?e?function(){return Si(wt(e)?e.call(this,this):e,wt(n)?n.call(this,this):n)}:n:e}function T0(e,n){return To(cc(e),cc(n))}function cc(e){if(mt(e)){const n={};for(let s=0;s<e.length;s++)n[e[s]]=e[s];return n}return e}function Oi(e,n){return e?[...new Set([].concat(e,n))]:n}function To(e,n){return e?Si(Object.create(null),e,n):n}function yh(e,n){return e?mt(e)&&mt(n)?[...new Set([...e,...n])]:Si(Object.create(null),mh(e),mh(n??{})):n}function D0(e,n){if(!e)return n;if(!n)return e;const s=Si(Object.create(null),e);for(const l in n)s[l]=Oi(e[l],n[l]);return s}function bf(){return{app:null,config:{isNativeTag:xm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let R0=0;function O0(e,n){return function(l,h=null){wt(l)||(l=Si({},l)),h!=null&&!qt(h)&&(h=null);const p=bf(),f=new WeakSet,y=[];let v=!1;const C=p.app={_uid:R0++,_component:l,_props:h,_container:null,_context:p,_instance:null,version:gg,get config(){return p.config},set config(M){},use(M,...P){return f.has(M)||(M&&wt(M.install)?(f.add(M),M.install(C,...P)):wt(M)&&(f.add(M),M(C,...P))),C},mixin(M){return p.mixins.includes(M)||p.mixins.push(M),C},component(M,P){return P?(p.components[M]=P,C):p.components[M]},directive(M,P){return P?(p.directives[M]=P,C):p.directives[M]},mount(M,P,G){if(!v){const W=C._ceVNode||ri(l,h);return W.appContext=p,G===!0?G="svg":G===!1&&(G=void 0),e(W,M,G),v=!0,C._container=M,M.__vue_app__=C,Tl(W.component)}},onUnmount(M){y.push(M)},unmount(){v&&(Nn(y,C._instance,16),e(null,C._container),delete C._container.__vue_app__)},provide(M,P){return p.provides[M]=P,C},runWithContext(M){const P=qr;qr=C;try{return M()}finally{qr=P}}};return C}}let qr=null;function Ja(e,n){if(vi){let s=vi.provides;const l=vi.parent&&vi.parent.provides;l===s&&(s=vi.provides=Object.create(l)),s[e]=n}}function fn(e,n,s=!1){const l=vi||Zi;if(l||qr){const h=qr?qr._context.provides:l?l.parent==null?l.vnode.appContext&&l.vnode.appContext.provides:l.parent.provides:void 0;if(h&&e in h)return h[e];if(arguments.length>1)return s&&wt(n)?n.call(l&&l.proxy):n}}function I0(){return!!(vi||Zi||qr)}const xf={},wf=()=>Object.create(xf),Lf=e=>Object.getPrototypeOf(e)===xf;function F0(e,n,s,l=!1){const h={},p=wf();e.propsDefaults=Object.create(null),Cf(e,n,h,p);for(const f in e.propsOptions[0])f in h||(h[f]=void 0);s?e.props=l?h:sf(h):e.type.props?e.props=h:e.props=p,e.attrs=p}function N0(e,n,s,l){const{props:h,attrs:p,vnode:{patchFlag:f}}=e,y=Rt(h),[v]=e.propsOptions;let C=!1;if((l||f>0)&&!(f&16)){if(f&8){const M=e.vnode.dynamicProps;for(let P=0;P<M.length;P++){let G=M[P];if(Bl(e.emitsOptions,G))continue;const W=n[G];if(v)if(zt(p,G))W!==p[G]&&(p[G]=W,C=!0);else{const D=mn(G);h[D]=hc(v,y,D,W,e,!1)}else W!==p[G]&&(p[G]=W,C=!0)}}}else{Cf(e,n,h,p)&&(C=!0);let M;for(const P in y)(!n||!zt(n,P)&&((M=es(P))===P||!zt(n,M)))&&(v?s&&(s[P]!==void 0||s[M]!==void 0)&&(h[P]=hc(v,y,P,void 0,e,!0)):delete h[P]);if(p!==y)for(const P in p)(!n||!zt(n,P))&&(delete p[P],C=!0)}C&&Qn(e.attrs,"set","")}function Cf(e,n,s,l){const[h,p]=e.propsOptions;let f=!1,y;if(n)for(let v in n){if(Ro(v))continue;const C=n[v];let M;h&&zt(h,M=mn(v))?!p||!p.includes(M)?s[M]=C:(y||(y={}))[M]=C:Bl(e.emitsOptions,v)||(!(v in l)||C!==l[v])&&(l[v]=C,f=!0)}if(p){const v=Rt(s),C=y||Vt;for(let M=0;M<p.length;M++){const P=p[M];s[P]=hc(h,v,P,C[P],e,!zt(C,P))}}return f}function hc(e,n,s,l,h,p){const f=e[s];if(f!=null){const y=zt(f,"default");if(y&&l===void 0){const v=f.default;if(f.type!==Function&&!f.skipFactory&&wt(v)){const{propsDefaults:C}=h;if(s in C)l=C[s];else{const M=ta(h);l=C[s]=v.call(null,n),M()}}else l=v;h.ce&&h.ce._setProp(s,l)}f[0]&&(p&&!y?l=!1:f[1]&&(l===""||l===es(s))&&(l=!0))}return l}const z0=new WeakMap;function kf(e,n,s=!1){const l=s?z0:n.propsCache,h=l.get(e);if(h)return h;const p=e.props,f={},y=[];let v=!1;if(!wt(e)){const M=P=>{v=!0;const[G,W]=kf(P,n,!0);Si(f,G),W&&y.push(...W)};!s&&n.mixins.length&&n.mixins.forEach(M),e.extends&&M(e.extends),e.mixins&&e.mixins.forEach(M)}if(!p&&!v)return qt(e)&&l.set(e,Rs),Rs;if(mt(p))for(let M=0;M<p.length;M++){const P=mn(p[M]);vh(P)&&(f[P]=Vt)}else if(p)for(const M in p){const P=mn(M);if(vh(P)){const G=p[M],W=f[P]=mt(G)||wt(G)?{type:G}:Si({},G),D=W.type;let z=!1,j=!0;if(mt(D))for(let _e=0;_e<D.length;++_e){const Be=D[_e],ge=wt(Be)&&Be.name;if(ge==="Boolean"){z=!0;break}else ge==="String"&&(j=!1)}else z=wt(D)&&D.name==="Boolean";W[0]=z,W[1]=j,(z||zt(W,"default"))&&y.push(P)}}const C=[f,y];return qt(e)&&l.set(e,C),C}function vh(e){return e[0]!=="$"&&!Ro(e)}const Ef=e=>e[0]==="_"||e==="$stable",Hc=e=>mt(e)?e.map(On):[On(e)],$0=(e,n,s)=>{if(n._n)return n;const l=Fo((...h)=>Hc(n(...h)),s);return l._c=!1,l},Mf=(e,n,s)=>{const l=e._ctx;for(const h in e){if(Ef(h))continue;const p=e[h];if(wt(p))n[h]=$0(h,p,l);else if(p!=null){const f=Hc(p);n[h]=()=>f}}},Pf=(e,n)=>{const s=Hc(n);e.slots.default=()=>s},Sf=(e,n,s)=>{for(const l in n)(s||l!=="_")&&(e[l]=n[l])},U0=(e,n,s)=>{const l=e.slots=wf();if(e.vnode.shapeFlag&32){const h=n._;h?(Sf(l,n,s),s&&Fd(l,"_",h,!0)):Mf(n,l)}else n&&Pf(e,n)},j0=(e,n,s)=>{const{vnode:l,slots:h}=e;let p=!0,f=Vt;if(l.shapeFlag&32){const y=n._;y?s&&y===1?p=!1:Sf(h,n,s):(p=!n.$stable,Mf(n,h)),f=n}else n&&(Pf(e,n),f={default:1});if(p)for(const y in h)!Ef(y)&&f[y]==null&&delete h[y]},Yi=ig;function G0(e){return V0(e)}function V0(e,n){const s=Cl();s.__VUE__=!0;const{insert:l,remove:h,patchProp:p,createElement:f,createText:y,createComment:v,setText:C,setElementText:M,parentNode:P,nextSibling:G,setScopeId:W=In,insertStaticContent:D}=e,z=(U,H,ae,Fe=null,$e=null,le=null,q=void 0,Oe=null,Ie=!!H.dynamicChildren)=>{if(U===H)return;U&&!Mo(U,H)&&(Fe=ke(U),me(U,$e,le,!0),U=null),H.patchFlag===-2&&(Ie=!1,H.dynamicChildren=null);const{type:ze,ref:Se,shapeFlag:We}=H;switch(ze){case Al:j(U,H,ae,Fe);break;case Xr:_e(U,H,ae,Fe);break;case Xa:U==null&&Be(H,ae,Fe,q);break;case kt:De(U,H,ae,Fe,$e,le,q,Oe,Ie);break;default:We&1?Ue(U,H,ae,Fe,$e,le,q,Oe,Ie):We&6?Ae(U,H,ae,Fe,$e,le,q,Oe,Ie):(We&64||We&128)&&ze.process(U,H,ae,Fe,$e,le,q,Oe,Ie,Ye)}Se!=null&&$e&&cl(Se,U&&U.ref,le,H||U,!H)},j=(U,H,ae,Fe)=>{if(U==null)l(H.el=y(H.children),ae,Fe);else{const $e=H.el=U.el;H.children!==U.children&&C($e,H.children)}},_e=(U,H,ae,Fe)=>{U==null?l(H.el=v(H.children||""),ae,Fe):H.el=U.el},Be=(U,H,ae,Fe)=>{[U.el,U.anchor]=D(U.children,H,ae,Fe,U.el,U.anchor)},ge=({el:U,anchor:H},ae,Fe)=>{let $e;for(;U&&U!==H;)$e=G(U),l(U,ae,Fe),U=$e;l(H,ae,Fe)},Ne=({el:U,anchor:H})=>{let ae;for(;U&&U!==H;)ae=G(U),h(U),U=ae;h(H)},Ue=(U,H,ae,Fe,$e,le,q,Oe,Ie)=>{H.type==="svg"?q="svg":H.type==="math"&&(q="mathml"),U==null?fe(H,ae,Fe,$e,le,q,Oe,Ie):X(U,H,$e,le,q,Oe,Ie)},fe=(U,H,ae,Fe,$e,le,q,Oe)=>{let Ie,ze;const{props:Se,shapeFlag:We,transition:at,dirs:dt}=U;if(Ie=U.el=f(U.type,le,Se&&Se.is,Se),We&8?M(Ie,U.children):We&16&&F(U.children,Ie,null,Fe,$e,Vu(U,le),q,Oe),dt&&Ur(U,null,Fe,"created"),Pe(Ie,U,U.scopeId,q,Fe),Se){for(const Tt in Se)Tt!=="value"&&!Ro(Tt)&&p(Ie,Tt,null,Se[Tt],le,Fe);"value"in Se&&p(Ie,"value",null,Se.value,le),(ze=Se.onVnodeBeforeMount)&&Tn(ze,Fe,U)}dt&&Ur(U,null,Fe,"beforeMount");const yt=H0($e,at);yt&&at.beforeEnter(Ie),l(Ie,H,ae),((ze=Se&&Se.onVnodeMounted)||yt||dt)&&Yi(()=>{ze&&Tn(ze,Fe,U),yt&&at.enter(Ie),dt&&Ur(U,null,Fe,"mounted")},$e)},Pe=(U,H,ae,Fe,$e)=>{if(ae&&W(U,ae),Fe)for(let le=0;le<Fe.length;le++)W(U,Fe[le]);if($e){let le=$e.subTree;if(H===le||Of(le.type)&&(le.ssContent===H||le.ssFallback===H)){const q=$e.vnode;Pe(U,q,q.scopeId,q.slotScopeIds,$e.parent)}}},F=(U,H,ae,Fe,$e,le,q,Oe,Ie=0)=>{for(let ze=Ie;ze<U.length;ze++){const Se=U[ze]=Oe?vr(U[ze]):On(U[ze]);z(null,Se,H,ae,Fe,$e,le,q,Oe)}},X=(U,H,ae,Fe,$e,le,q)=>{const Oe=H.el=U.el;let{patchFlag:Ie,dynamicChildren:ze,dirs:Se}=H;Ie|=U.patchFlag&16;const We=U.props||Vt,at=H.props||Vt;let dt;if(ae&&jr(ae,!1),(dt=at.onVnodeBeforeUpdate)&&Tn(dt,ae,H,U),Se&&Ur(H,U,ae,"beforeUpdate"),ae&&jr(ae,!0),(We.innerHTML&&at.innerHTML==null||We.textContent&&at.textContent==null)&&M(Oe,""),ze?pe(U.dynamicChildren,ze,Oe,ae,Fe,Vu(H,$e),le):q||Z(U,H,Oe,null,ae,Fe,Vu(H,$e),le,!1),Ie>0){if(Ie&16)ee(Oe,We,at,ae,$e);else if(Ie&2&&We.class!==at.class&&p(Oe,"class",null,at.class,$e),Ie&4&&p(Oe,"style",We.style,at.style,$e),Ie&8){const yt=H.dynamicProps;for(let Tt=0;Tt<yt.length;Tt++){const Pt=yt[Tt],ii=We[Pt],$t=at[Pt];($t!==ii||Pt==="value")&&p(Oe,Pt,ii,$t,$e,ae)}}Ie&1&&U.children!==H.children&&M(Oe,H.children)}else!q&&ze==null&&ee(Oe,We,at,ae,$e);((dt=at.onVnodeUpdated)||Se)&&Yi(()=>{dt&&Tn(dt,ae,H,U),Se&&Ur(H,U,ae,"updated")},Fe)},pe=(U,H,ae,Fe,$e,le,q)=>{for(let Oe=0;Oe<H.length;Oe++){const Ie=U[Oe],ze=H[Oe],Se=Ie.el&&(Ie.type===kt||!Mo(Ie,ze)||Ie.shapeFlag&70)?P(Ie.el):ae;z(Ie,ze,Se,null,Fe,$e,le,q,!0)}},ee=(U,H,ae,Fe,$e)=>{if(H!==ae){if(H!==Vt)for(const le in H)!Ro(le)&&!(le in ae)&&p(U,le,H[le],null,$e,Fe);for(const le in ae){if(Ro(le))continue;const q=ae[le],Oe=H[le];q!==Oe&&le!=="value"&&p(U,le,Oe,q,$e,Fe)}"value"in ae&&p(U,"value",H.value,ae.value,$e)}},De=(U,H,ae,Fe,$e,le,q,Oe,Ie)=>{const ze=H.el=U?U.el:y(""),Se=H.anchor=U?U.anchor:y("");let{patchFlag:We,dynamicChildren:at,slotScopeIds:dt}=H;dt&&(Oe=Oe?Oe.concat(dt):dt),U==null?(l(ze,ae,Fe),l(Se,ae,Fe),F(H.children||[],ae,Se,$e,le,q,Oe,Ie)):We>0&&We&64&&at&&U.dynamicChildren?(pe(U.dynamicChildren,at,ae,$e,le,q,Oe),(H.key!=null||$e&&H===$e.subTree)&&Bf(U,H,!0)):Z(U,H,ae,Se,$e,le,q,Oe,Ie)},Ae=(U,H,ae,Fe,$e,le,q,Oe,Ie)=>{H.slotScopeIds=Oe,U==null?H.shapeFlag&512?$e.ctx.activate(H,ae,Fe,q,Ie):ie(H,ae,Fe,$e,le,q,Ie):Le(U,H,Ie)},ie=(U,H,ae,Fe,$e,le,q)=>{const Oe=U.component=ug(U,Fe,$e);if(mf(U)&&(Oe.ctx.renderer=Ye),cg(Oe,!1,q),Oe.asyncDep){if($e&&$e.registerDep(Oe,Re,q),!U.el){const Ie=Oe.subTree=ri(Xr);_e(null,Ie,H,ae)}}else Re(Oe,U,H,ae,$e,le,q)},Le=(U,H,ae)=>{const Fe=H.component=U.component;if(eg(U,H,ae))if(Fe.asyncDep&&!Fe.asyncResolved){Ee(Fe,H,ae);return}else Fe.next=H,Fe.update();else H.el=U.el,Fe.vnode=H},Re=(U,H,ae,Fe,$e,le,q)=>{const Oe=()=>{if(U.isMounted){let{next:We,bu:at,u:dt,parent:yt,vnode:Tt}=U;{const ui=Af(U);if(ui){We&&(We.el=Tt.el,Ee(U,We,q)),ui.asyncDep.then(()=>{U.isUnmounted||Oe()});return}}let Pt=We,ii;jr(U,!1),We?(We.el=Tt.el,Ee(U,We,q)):We=Tt,at&&Wa(at),(ii=We.props&&We.props.onVnodeBeforeUpdate)&&Tn(ii,yt,We,Tt),jr(U,!0);const $t=xh(U),Bi=U.subTree;U.subTree=$t,z(Bi,$t,P(Bi.el),ke(Bi),U,$e,le),We.el=$t.el,Pt===null&&tg(U,$t.el),dt&&Yi(dt,$e),(ii=We.props&&We.props.onVnodeUpdated)&&Yi(()=>Tn(ii,yt,We,Tt),$e)}else{let We;const{el:at,props:dt}=H,{bm:yt,m:Tt,parent:Pt,root:ii,type:$t}=U,Bi=No(H);jr(U,!1),yt&&Wa(yt),!Bi&&(We=dt&&dt.onVnodeBeforeMount)&&Tn(We,Pt,H),jr(U,!0);{ii.ce&&ii.ce._injectChildStyle($t);const ui=U.subTree=xh(U);z(null,ui,ae,Fe,U,$e,le),H.el=ui.el}if(Tt&&Yi(Tt,$e),!Bi&&(We=dt&&dt.onVnodeMounted)){const ui=H;Yi(()=>Tn(We,Pt,ui),$e)}(H.shapeFlag&256||Pt&&No(Pt.vnode)&&Pt.vnode.shapeFlag&256)&&U.a&&Yi(U.a,$e),U.isMounted=!0,H=ae=Fe=null}};U.scope.on();const Ie=U.effect=new Vd(Oe);U.scope.off();const ze=U.update=Ie.run.bind(Ie),Se=U.job=Ie.runIfDirty.bind(Ie);Se.i=U,Se.id=U.uid,Ie.scheduler=()=>Gc(Se),jr(U,!0),ze()},Ee=(U,H,ae)=>{H.component=U;const Fe=U.vnode.props;U.vnode=H,U.next=null,N0(U,H.props,Fe,ae),j0(U,H.children,ae),Cr(),fh(U),kr()},Z=(U,H,ae,Fe,$e,le,q,Oe,Ie=!1)=>{const ze=U&&U.children,Se=U?U.shapeFlag:0,We=H.children,{patchFlag:at,shapeFlag:dt}=H;if(at>0){if(at&128){re(ze,We,ae,Fe,$e,le,q,Oe,Ie);return}else if(at&256){te(ze,We,ae,Fe,$e,le,q,Oe,Ie);return}}dt&8?(Se&16&&Xe(ze,$e,le),We!==ze&&M(ae,We)):Se&16?dt&16?re(ze,We,ae,Fe,$e,le,q,Oe,Ie):Xe(ze,$e,le,!0):(Se&8&&M(ae,""),dt&16&&F(We,ae,Fe,$e,le,q,Oe,Ie))},te=(U,H,ae,Fe,$e,le,q,Oe,Ie)=>{U=U||Rs,H=H||Rs;const ze=U.length,Se=H.length,We=Math.min(ze,Se);let at;for(at=0;at<We;at++){const dt=H[at]=Ie?vr(H[at]):On(H[at]);z(U[at],dt,ae,null,$e,le,q,Oe,Ie)}ze>Se?Xe(U,$e,le,!0,!1,We):F(H,ae,Fe,$e,le,q,Oe,Ie,We)},re=(U,H,ae,Fe,$e,le,q,Oe,Ie)=>{let ze=0;const Se=H.length;let We=U.length-1,at=Se-1;for(;ze<=We&&ze<=at;){const dt=U[ze],yt=H[ze]=Ie?vr(H[ze]):On(H[ze]);if(Mo(dt,yt))z(dt,yt,ae,null,$e,le,q,Oe,Ie);else break;ze++}for(;ze<=We&&ze<=at;){const dt=U[We],yt=H[at]=Ie?vr(H[at]):On(H[at]);if(Mo(dt,yt))z(dt,yt,ae,null,$e,le,q,Oe,Ie);else break;We--,at--}if(ze>We){if(ze<=at){const dt=at+1,yt=dt<Se?H[dt].el:Fe;for(;ze<=at;)z(null,H[ze]=Ie?vr(H[ze]):On(H[ze]),ae,yt,$e,le,q,Oe,Ie),ze++}}else if(ze>at)for(;ze<=We;)me(U[ze],$e,le,!0),ze++;else{const dt=ze,yt=ze,Tt=new Map;for(ze=yt;ze<=at;ze++){const Yt=H[ze]=Ie?vr(H[ze]):On(H[ze]);Yt.key!=null&&Tt.set(Yt.key,ze)}let Pt,ii=0;const $t=at-yt+1;let Bi=!1,ui=0;const Cn=new Array($t);for(ze=0;ze<$t;ze++)Cn[ze]=0;for(ze=dt;ze<=We;ze++){const Yt=U[ze];if(ii>=$t){me(Yt,$e,le,!0);continue}let Ai;if(Yt.key!=null)Ai=Tt.get(Yt.key);else for(Pt=yt;Pt<=at;Pt++)if(Cn[Pt-yt]===0&&Mo(Yt,H[Pt])){Ai=Pt;break}Ai===void 0?me(Yt,$e,le,!0):(Cn[Ai-yt]=ze+1,Ai>=ui?ui=Ai:Bi=!0,z(Yt,H[Ai],ae,null,$e,le,q,Oe,Ie),ii++)}const zn=Bi?Z0(Cn):Rs;for(Pt=zn.length-1,ze=$t-1;ze>=0;ze--){const Yt=yt+ze,Ai=H[Yt],nn=Yt+1<Se?H[Yt+1].el:Fe;Cn[ze]===0?z(null,Ai,ae,nn,$e,le,q,Oe,Ie):Bi&&(Pt<0||ze!==zn[Pt]?be(Ai,ae,nn,2):Pt--)}}},be=(U,H,ae,Fe,$e=null)=>{const{el:le,type:q,transition:Oe,children:Ie,shapeFlag:ze}=U;if(ze&6){be(U.component.subTree,H,ae,Fe);return}if(ze&128){U.suspense.move(H,ae,Fe);return}if(ze&64){q.move(U,H,ae,Ye);return}if(q===kt){l(le,H,ae);for(let We=0;We<Ie.length;We++)be(Ie[We],H,ae,Fe);l(U.anchor,H,ae);return}if(q===Xa){ge(U,H,ae);return}if(Fe!==2&&ze&1&&Oe)if(Fe===0)Oe.beforeEnter(le),l(le,H,ae),Yi(()=>Oe.enter(le),$e);else{const{leave:We,delayLeave:at,afterLeave:dt}=Oe,yt=()=>l(le,H,ae),Tt=()=>{We(le,()=>{yt(),dt&&dt()})};at?at(le,yt,Tt):Tt()}else l(le,H,ae)},me=(U,H,ae,Fe=!1,$e=!1)=>{const{type:le,props:q,ref:Oe,children:Ie,dynamicChildren:ze,shapeFlag:Se,patchFlag:We,dirs:at,cacheIndex:dt}=U;if(We===-2&&($e=!1),Oe!=null&&cl(Oe,null,ae,U,!0),dt!=null&&(H.renderCache[dt]=void 0),Se&256){H.ctx.deactivate(U);return}const yt=Se&1&&at,Tt=!No(U);let Pt;if(Tt&&(Pt=q&&q.onVnodeBeforeUnmount)&&Tn(Pt,H,U),Se&6)nt(U.component,ae,Fe);else{if(Se&128){U.suspense.unmount(ae,Fe);return}yt&&Ur(U,null,H,"beforeUnmount"),Se&64?U.type.remove(U,H,ae,Ye,Fe):ze&&!ze.hasOnce&&(le!==kt||We>0&&We&64)?Xe(ze,H,ae,!1,!0):(le===kt&&We&384||!$e&&Se&16)&&Xe(Ie,H,ae),Fe&&Je(U)}(Tt&&(Pt=q&&q.onVnodeUnmounted)||yt)&&Yi(()=>{Pt&&Tn(Pt,H,U),yt&&Ur(U,null,H,"unmounted")},ae)},Je=U=>{const{type:H,el:ae,anchor:Fe,transition:$e}=U;if(H===kt){et(ae,Fe);return}if(H===Xa){Ne(U);return}const le=()=>{h(ae),$e&&!$e.persisted&&$e.afterLeave&&$e.afterLeave()};if(U.shapeFlag&1&&$e&&!$e.persisted){const{leave:q,delayLeave:Oe}=$e,Ie=()=>q(ae,le);Oe?Oe(U.el,le,Ie):Ie()}else le()},et=(U,H)=>{let ae;for(;U!==H;)ae=G(U),h(U),U=ae;h(H)},nt=(U,H,ae)=>{const{bum:Fe,scope:$e,job:le,subTree:q,um:Oe,m:Ie,a:ze}=U;bh(Ie),bh(ze),Fe&&Wa(Fe),$e.stop(),le&&(le.flags|=8,me(q,U,H,ae)),Oe&&Yi(Oe,H),Yi(()=>{U.isUnmounted=!0},H),H&&H.pendingBranch&&!H.isUnmounted&&U.asyncDep&&!U.asyncResolved&&U.suspenseId===H.pendingId&&(H.deps--,H.deps===0&&H.resolve())},Xe=(U,H,ae,Fe=!1,$e=!1,le=0)=>{for(let q=le;q<U.length;q++)me(U[q],H,ae,Fe,$e)},ke=U=>{if(U.shapeFlag&6)return ke(U.component.subTree);if(U.shapeFlag&128)return U.suspense.next();const H=G(U.anchor||U.el),ae=H&&H[d0];return ae?G(ae):H};let Ke=!1;const Ze=(U,H,ae)=>{U==null?H._vnode&&me(H._vnode,null,null,!0):z(H._vnode||null,U,H,null,null,null,ae),H._vnode=U,Ke||(Ke=!0,fh(),hf(),Ke=!1)},Ye={p:z,um:me,m:be,r:Je,mt:ie,mc:F,pc:Z,pbc:pe,n:ke,o:e};return{render:Ze,hydrate:void 0,createApp:O0(Ze)}}function Vu({type:e,props:n},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:s}function jr({effect:e,job:n},s){s?(e.flags|=32,n.flags|=4):(e.flags&=-33,n.flags&=-5)}function H0(e,n){return(!e||e&&!e.pendingBranch)&&n&&!n.persisted}function Bf(e,n,s=!1){const l=e.children,h=n.children;if(mt(l)&&mt(h))for(let p=0;p<l.length;p++){const f=l[p];let y=h[p];y.shapeFlag&1&&!y.dynamicChildren&&((y.patchFlag<=0||y.patchFlag===32)&&(y=h[p]=vr(h[p]),y.el=f.el),!s&&y.patchFlag!==-2&&Bf(f,y)),y.type===Al&&(y.el=f.el)}}function Z0(e){const n=e.slice(),s=[0];let l,h,p,f,y;const v=e.length;for(l=0;l<v;l++){const C=e[l];if(C!==0){if(h=s[s.length-1],e[h]<C){n[l]=h,s.push(l);continue}for(p=0,f=s.length-1;p<f;)y=p+f>>1,e[s[y]]<C?p=y+1:f=y;C<e[s[p]]&&(p>0&&(n[l]=s[p-1]),s[p]=l)}}for(p=s.length,f=s[p-1];p-- >0;)s[p]=f,f=n[f];return s}function Af(e){const n=e.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:Af(n)}function bh(e){if(e)for(let n=0;n<e.length;n++)e[n].flags|=8}const q0=Symbol.for("v-scx"),K0=()=>fn(q0);function zi(e,n,s){return Tf(e,n,s)}function Tf(e,n,s=Vt){const{immediate:l,deep:h,flush:p,once:f}=s,y=Si({},s),v=n&&l||!n&&p!=="post";let C;if(Ko){if(p==="sync"){const W=K0();C=W.__watcherHandles||(W.__watcherHandles=[])}else if(!v){const W=()=>{};return W.stop=In,W.resume=In,W.pause=In,W}}const M=vi;y.call=(W,D,z)=>Nn(W,M,D,z);let P=!1;p==="post"?y.scheduler=W=>{Yi(W,M&&M.suspense)}:p!=="sync"&&(P=!0,y.scheduler=(W,D)=>{D?W():Gc(W)}),y.augmentJob=W=>{n&&(W.flags|=4),P&&(W.flags|=2,M&&(W.id=M.uid,W.i=M))};const G=l0(e,n,y);return Ko&&(C?C.push(G):v&&G()),G}function W0(e,n,s){const l=this.proxy,h=li(e)?e.includes(".")?Df(l,e):()=>l[e]:e.bind(l,l);let p;wt(n)?p=n:(p=n.handler,s=n);const f=ta(this),y=Tf(h,p.bind(l),s);return f(),y}function Df(e,n){const s=n.split(".");return()=>{let l=e;for(let h=0;h<s.length&&l;h++)l=l[s[h]];return l}}const J0=(e,n)=>n==="modelValue"||n==="model-value"?e.modelModifiers:e[`${n}Modifiers`]||e[`${mn(n)}Modifiers`]||e[`${es(n)}Modifiers`];function X0(e,n,...s){if(e.isUnmounted)return;const l=e.vnode.props||Vt;let h=s;const p=n.startsWith("update:"),f=p&&J0(l,n.slice(7));f&&(f.trim&&(h=s.map(M=>li(M)?M.trim():M)),f.number&&(h=s.map(sl)));let y,v=l[y=Nu(n)]||l[y=Nu(mn(n))];!v&&p&&(v=l[y=Nu(es(n))]),v&&Nn(v,e,6,h);const C=l[y+"Once"];if(C){if(!e.emitted)e.emitted={};else if(e.emitted[y])return;e.emitted[y]=!0,Nn(C,e,6,h)}}function Rf(e,n,s=!1){const l=n.emitsCache,h=l.get(e);if(h!==void 0)return h;const p=e.emits;let f={},y=!1;if(!wt(e)){const v=C=>{const M=Rf(C,n,!0);M&&(y=!0,Si(f,M))};!s&&n.mixins.length&&n.mixins.forEach(v),e.extends&&v(e.extends),e.mixins&&e.mixins.forEach(v)}return!p&&!y?(qt(e)&&l.set(e,null),null):(mt(p)?p.forEach(v=>f[v]=null):Si(f,p),qt(e)&&l.set(e,f),f)}function Bl(e,n){return!e||!xl(n)?!1:(n=n.slice(2).replace(/Once$/,""),zt(e,n[0].toLowerCase()+n.slice(1))||zt(e,es(n))||zt(e,n))}function xh(e){const{type:n,vnode:s,proxy:l,withProxy:h,propsOptions:[p],slots:f,attrs:y,emit:v,render:C,renderCache:M,props:P,data:G,setupState:W,ctx:D,inheritAttrs:z}=e,j=ul(e);let _e,Be;try{if(s.shapeFlag&4){const Ne=h||l,Ue=Ne;_e=On(C.call(Ue,Ne,M,P,W,G,D)),Be=y}else{const Ne=n;_e=On(Ne.length>1?Ne(P,{attrs:y,slots:f,emit:v}):Ne(P,null)),Be=n.props?y:Y0(y)}}catch(Ne){$o.length=0,Ml(Ne,e,1),_e=ri(Xr)}let ge=_e;if(Be&&z!==!1){const Ne=Object.keys(Be),{shapeFlag:Ue}=ge;Ne.length&&Ue&7&&(p&&Ne.some(Ac)&&(Be=Q0(Be,p)),ge=Ns(ge,Be,!1,!0))}return s.dirs&&(ge=Ns(ge,null,!1,!0),ge.dirs=ge.dirs?ge.dirs.concat(s.dirs):s.dirs),s.transition&&Vc(ge,s.transition),_e=ge,ul(j),_e}const Y0=e=>{let n;for(const s in e)(s==="class"||s==="style"||xl(s))&&((n||(n={}))[s]=e[s]);return n},Q0=(e,n)=>{const s={};for(const l in e)(!Ac(l)||!(l.slice(9)in n))&&(s[l]=e[l]);return s};function eg(e,n,s){const{props:l,children:h,component:p}=e,{props:f,children:y,patchFlag:v}=n,C=p.emitsOptions;if(n.dirs||n.transition)return!0;if(s&&v>=0){if(v&1024)return!0;if(v&16)return l?wh(l,f,C):!!f;if(v&8){const M=n.dynamicProps;for(let P=0;P<M.length;P++){const G=M[P];if(f[G]!==l[G]&&!Bl(C,G))return!0}}}else return(h||y)&&(!y||!y.$stable)?!0:l===f?!1:l?f?wh(l,f,C):!0:!!f;return!1}function wh(e,n,s){const l=Object.keys(n);if(l.length!==Object.keys(e).length)return!0;for(let h=0;h<l.length;h++){const p=l[h];if(n[p]!==e[p]&&!Bl(s,p))return!0}return!1}function tg({vnode:e,parent:n},s){for(;n;){const l=n.subTree;if(l.suspense&&l.suspense.activeBranch===e&&(l.el=e.el),l===e)(e=n.vnode).el=s,n=n.parent;else break}}const Of=e=>e.__isSuspense;function ig(e,n){n&&n.pendingBranch?mt(e)?n.effects.push(...e):n.effects.push(e):h0(e)}const kt=Symbol.for("v-fgt"),Al=Symbol.for("v-txt"),Xr=Symbol.for("v-cmt"),Xa=Symbol.for("v-stc"),$o=[];let en=null;function ve(e=!1){$o.push(en=e?null:[])}function ng(){$o.pop(),en=$o[$o.length-1]||null}let qo=1;function Lh(e,n=!1){qo+=e,e<0&&en&&n&&(en.hasOnce=!0)}function If(e){return e.dynamicChildren=qo>0?en||Rs:null,ng(),qo>0&&en&&en.push(e),e}function Ce(e,n,s,l,h,p){return If(w(e,n,s,l,h,p,!0))}function Yr(e,n,s,l,h){return If(ri(e,n,s,l,h,!0))}function dl(e){return e?e.__v_isVNode===!0:!1}function Mo(e,n){return e.type===n.type&&e.key===n.key}const Ff=({key:e})=>e??null,Ya=({ref:e,ref_key:n,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?li(e)||si(e)||wt(e)?{i:Zi,r:e,k:n,f:!!s}:e:null);function w(e,n=null,s=null,l=0,h=null,p=e===kt?0:1,f=!1,y=!1){const v={__v_isVNode:!0,__v_skip:!0,type:e,props:n,key:n&&Ff(n),ref:n&&Ya(n),scopeId:ff,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:p,patchFlag:l,dynamicProps:h,dynamicChildren:null,appContext:null,ctx:Zi};return y?(Zc(v,s),p&128&&e.normalize(v)):s&&(v.shapeFlag|=li(s)?8:16),qo>0&&!f&&en&&(v.patchFlag>0||p&6)&&v.patchFlag!==32&&en.push(v),v}const ri=rg;function rg(e,n=null,s=null,l=0,h=null,p=!1){if((!e||e===E0)&&(e=Xr),dl(e)){const y=Ns(e,n,!0);return s&&Zc(y,s),qo>0&&!p&&en&&(y.shapeFlag&6?en[en.indexOf(e)]=y:en.push(y)),y.patchFlag=-2,y}if(mg(e)&&(e=e.__vccOpts),n){n=sg(n);let{class:y,style:v}=n;y&&!li(y)&&(n.class=$i(y)),qt(v)&&(Uc(v)&&!mt(v)&&(v=Si({},v)),n.style=kl(v))}const f=li(e)?1:Of(e)?128:f0(e)?64:qt(e)?4:wt(e)?2:0;return w(e,n,s,l,h,f,p,!0)}function sg(e){return e?Uc(e)||Lf(e)?Si({},e):e:null}function Ns(e,n,s=!1,l=!1){const{props:h,ref:p,patchFlag:f,children:y,transition:v}=e,C=n?og(h||{},n):h,M={__v_isVNode:!0,__v_skip:!0,type:e.type,props:C,key:C&&Ff(C),ref:n&&n.ref?s&&p?mt(p)?p.concat(Ya(n)):[p,Ya(n)]:Ya(n):p,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:y,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:n&&e.type!==kt?f===-1?16:f|16:f,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:v,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ns(e.ssContent),ssFallback:e.ssFallback&&Ns(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return v&&l&&Vc(M,v.clone(M)),M}function ni(e=" ",n=0){return ri(Al,null,e,n)}function JL(e,n){const s=ri(Xa,null,e);return s.staticCount=n,s}function ft(e="",n=!1){return n?(ve(),Yr(Xr,null,e)):ri(Xr,null,e)}function On(e){return e==null||typeof e=="boolean"?ri(Xr):mt(e)?ri(kt,null,e.slice()):dl(e)?vr(e):ri(Al,null,String(e))}function vr(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Ns(e)}function Zc(e,n){let s=0;const{shapeFlag:l}=e;if(n==null)n=null;else if(mt(n))s=16;else if(typeof n=="object")if(l&65){const h=n.default;h&&(h._c&&(h._d=!1),Zc(e,h()),h._c&&(h._d=!0));return}else{s=32;const h=n._;!h&&!Lf(n)?n._ctx=Zi:h===3&&Zi&&(Zi.slots._===1?n._=1:(n._=2,e.patchFlag|=1024))}else wt(n)?(n={default:n,_ctx:Zi},s=32):(n=String(n),l&64?(s=16,n=[ni(n)]):s=8);e.children=n,e.shapeFlag|=s}function og(...e){const n={};for(let s=0;s<e.length;s++){const l=e[s];for(const h in l)if(h==="class")n.class!==l.class&&(n.class=$i([n.class,l.class]));else if(h==="style")n.style=kl([n.style,l.style]);else if(xl(h)){const p=n[h],f=l[h];f&&p!==f&&!(mt(p)&&p.includes(f))&&(n[h]=p?[].concat(p,f):f)}else h!==""&&(n[h]=l[h])}return n}function Tn(e,n,s,l=null){Nn(e,n,7,[s,l])}const ag=bf();let lg=0;function ug(e,n,s){const l=e.type,h=(n?n.appContext:e.appContext)||ag,p={uid:lg++,vnode:e,type:l,parent:n,appContext:h,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ud(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(h.provides),ids:n?n.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:kf(l,h),emitsOptions:Rf(l,h),emit:null,emitted:null,propsDefaults:Vt,inheritAttrs:l.inheritAttrs,ctx:Vt,data:Vt,props:Vt,attrs:Vt,slots:Vt,refs:Vt,setupState:Vt,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return p.ctx={_:p},p.root=n?n.root:p,p.emit=X0.bind(null,p),e.ce&&e.ce(p),p}let vi=null,fl,dc;{const e=Cl(),n=(s,l)=>{let h;return(h=e[s])||(h=e[s]=[]),h.push(l),p=>{h.length>1?h.forEach(f=>f(p)):h[0](p)}};fl=n("__VUE_INSTANCE_SETTERS__",s=>vi=s),dc=n("__VUE_SSR_SETTERS__",s=>Ko=s)}const ta=e=>{const n=vi;return fl(e),e.scope.on(),()=>{e.scope.off(),fl(n)}},Ch=()=>{vi&&vi.scope.off(),fl(null)};function Nf(e){return e.vnode.shapeFlag&4}let Ko=!1;function cg(e,n=!1,s=!1){n&&dc(n);const{props:l,children:h}=e.vnode,p=Nf(e);F0(e,l,p,n),U0(e,h,s);const f=p?hg(e,n):void 0;return n&&dc(!1),f}function hg(e,n){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,P0);const{setup:l}=s;if(l){Cr();const h=e.setupContext=l.length>1?fg(e):null,p=ta(e),f=ea(l,e,0,[e.props,h]),y=Rd(f);if(kr(),p(),(y||e.sp)&&!No(e)&&pf(e),y){if(f.then(Ch,Ch),n)return f.then(v=>{kh(e,v)}).catch(v=>{Ml(v,e,0)});e.asyncDep=f}else kh(e,f)}else zf(e)}function kh(e,n,s){wt(n)?e.type.__ssrInlineRender?e.ssrRender=n:e.render=n:qt(n)&&(e.setupState=lf(n)),zf(e)}function zf(e,n,s){const l=e.type;e.render||(e.render=l.render||In);{const h=ta(e);Cr();try{S0(e)}finally{kr(),h()}}}const dg={get(e,n){return Ei(e,"get",""),e[n]}};function fg(e){const n=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,dg),slots:e.slots,emit:e.emit,expose:n}}function Tl(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(lf(jc(e.exposed)),{get(n,s){if(s in n)return n[s];if(s in zo)return zo[s](e)},has(n,s){return s in n||s in zo}})):e.proxy}function pg(e,n=!0){return wt(e)?e.displayName||e.name:e.name||n&&e.__name}function mg(e){return wt(e)&&"__vccOpts"in e}const Ct=(e,n)=>o0(e,n,Ko);function $f(e,n,s){const l=arguments.length;return l===2?qt(n)&&!mt(n)?dl(n)?ri(e,null,[n]):ri(e,n):ri(e,null,n):(l>3?s=Array.prototype.slice.call(arguments,2):l===3&&dl(s)&&(s=[s]),ri(e,n,s))}const gg="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let fc;const Eh=typeof window<"u"&&window.trustedTypes;if(Eh)try{fc=Eh.createPolicy("vue",{createHTML:e=>e})}catch{}const Uf=fc?e=>fc.createHTML(e):e=>e,_g="http://www.w3.org/2000/svg",yg="http://www.w3.org/1998/Math/MathML",Yn=typeof document<"u"?document:null,Mh=Yn&&Yn.createElement("template"),vg={insert:(e,n,s)=>{n.insertBefore(e,s||null)},remove:e=>{const n=e.parentNode;n&&n.removeChild(e)},createElement:(e,n,s,l)=>{const h=n==="svg"?Yn.createElementNS(_g,e):n==="mathml"?Yn.createElementNS(yg,e):s?Yn.createElement(e,{is:s}):Yn.createElement(e);return e==="select"&&l&&l.multiple!=null&&h.setAttribute("multiple",l.multiple),h},createText:e=>Yn.createTextNode(e),createComment:e=>Yn.createComment(e),setText:(e,n)=>{e.nodeValue=n},setElementText:(e,n)=>{e.textContent=n},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Yn.querySelector(e),setScopeId(e,n){e.setAttribute(n,"")},insertStaticContent(e,n,s,l,h,p){const f=s?s.previousSibling:n.lastChild;if(h&&(h===p||h.nextSibling))for(;n.insertBefore(h.cloneNode(!0),s),!(h===p||!(h=h.nextSibling)););else{Mh.innerHTML=Uf(l==="svg"?`<svg>${e}</svg>`:l==="mathml"?`<math>${e}</math>`:e);const y=Mh.content;if(l==="svg"||l==="mathml"){const v=y.firstChild;for(;v.firstChild;)y.appendChild(v.firstChild);y.removeChild(v)}n.insertBefore(y,s)}return[f?f.nextSibling:n.firstChild,s?s.previousSibling:n.lastChild]}},bg=Symbol("_vtc");function xg(e,n,s){const l=e[bg];l&&(n=(n?[n,...l]:[...l]).join(" ")),n==null?e.removeAttribute("class"):s?e.setAttribute("class",n):e.className=n}const pl=Symbol("_vod"),jf=Symbol("_vsh"),Ph={beforeMount(e,{value:n},{transition:s}){e[pl]=e.style.display==="none"?"":e.style.display,s&&n?s.beforeEnter(e):Po(e,n)},mounted(e,{value:n},{transition:s}){s&&n&&s.enter(e)},updated(e,{value:n,oldValue:s},{transition:l}){!n!=!s&&(l?n?(l.beforeEnter(e),Po(e,!0),l.enter(e)):l.leave(e,()=>{Po(e,!1)}):Po(e,n))},beforeUnmount(e,{value:n}){Po(e,n)}};function Po(e,n){e.style.display=n?e[pl]:"none",e[jf]=!n}const wg=Symbol(""),Lg=/(^|;)\s*display\s*:/;function Cg(e,n,s){const l=e.style,h=li(s);let p=!1;if(s&&!h){if(n)if(li(n))for(const f of n.split(";")){const y=f.slice(0,f.indexOf(":")).trim();s[y]==null&&Qa(l,y,"")}else for(const f in n)s[f]==null&&Qa(l,f,"");for(const f in s)f==="display"&&(p=!0),Qa(l,f,s[f])}else if(h){if(n!==s){const f=l[wg];f&&(s+=";"+f),l.cssText=s,p=Lg.test(s)}}else n&&e.removeAttribute("style");pl in e&&(e[pl]=p?l.display:"",e[jf]&&(l.display="none"))}const Sh=/\s*!important$/;function Qa(e,n,s){if(mt(s))s.forEach(l=>Qa(e,n,l));else if(s==null&&(s=""),n.startsWith("--"))e.setProperty(n,s);else{const l=kg(e,n);Sh.test(s)?e.setProperty(es(l),s.replace(Sh,""),"important"):e[l]=s}}const Bh=["Webkit","Moz","ms"],Hu={};function kg(e,n){const s=Hu[n];if(s)return s;let l=mn(n);if(l!=="filter"&&l in e)return Hu[n]=l;l=Ll(l);for(let h=0;h<Bh.length;h++){const p=Bh[h]+l;if(p in e)return Hu[n]=p}return n}const Ah="http://www.w3.org/1999/xlink";function Th(e,n,s,l,h,p=Am(n)){l&&n.startsWith("xlink:")?s==null?e.removeAttributeNS(Ah,n.slice(6,n.length)):e.setAttributeNS(Ah,n,s):s==null||p&&!Nd(s)?e.removeAttribute(n):e.setAttribute(n,p?"":Fn(s)?String(s):s)}function Dh(e,n,s,l,h){if(n==="innerHTML"||n==="textContent"){s!=null&&(e[n]=n==="innerHTML"?Uf(s):s);return}const p=e.tagName;if(n==="value"&&p!=="PROGRESS"&&!p.includes("-")){const y=p==="OPTION"?e.getAttribute("value")||"":e.value,v=s==null?e.type==="checkbox"?"on":"":String(s);(y!==v||!("_value"in e))&&(e.value=v),s==null&&e.removeAttribute(n),e._value=s;return}let f=!1;if(s===""||s==null){const y=typeof e[n];y==="boolean"?s=Nd(s):s==null&&y==="string"?(s="",f=!0):y==="number"&&(s=0,f=!0)}try{e[n]=s}catch{}f&&e.removeAttribute(h||n)}function tr(e,n,s,l){e.addEventListener(n,s,l)}function Eg(e,n,s,l){e.removeEventListener(n,s,l)}const Rh=Symbol("_vei");function Mg(e,n,s,l,h=null){const p=e[Rh]||(e[Rh]={}),f=p[n];if(l&&f)f.value=l;else{const[y,v]=Pg(n);if(l){const C=p[n]=Ag(l,h);tr(e,y,C,v)}else f&&(Eg(e,y,f,v),p[n]=void 0)}}const Oh=/(?:Once|Passive|Capture)$/;function Pg(e){let n;if(Oh.test(e)){n={};let l;for(;l=e.match(Oh);)e=e.slice(0,e.length-l[0].length),n[l[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):es(e.slice(2)),n]}let Zu=0;const Sg=Promise.resolve(),Bg=()=>Zu||(Sg.then(()=>Zu=0),Zu=Date.now());function Ag(e,n){const s=l=>{if(!l._vts)l._vts=Date.now();else if(l._vts<=s.attached)return;Nn(Tg(l,s.value),n,5,[l])};return s.value=e,s.attached=Bg(),s}function Tg(e,n){if(mt(n)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},n.map(l=>h=>!h._stopped&&l&&l(h))}else return n}const Ih=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Dg=(e,n,s,l,h,p)=>{const f=h==="svg";n==="class"?xg(e,l,f):n==="style"?Cg(e,s,l):xl(n)?Ac(n)||Mg(e,n,s,l,p):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):Rg(e,n,l,f))?(Dh(e,n,l),!e.tagName.includes("-")&&(n==="value"||n==="checked"||n==="selected")&&Th(e,n,l,f,p,n!=="value")):e._isVueCE&&(/[A-Z]/.test(n)||!li(l))?Dh(e,mn(n),l,p,n):(n==="true-value"?e._trueValue=l:n==="false-value"&&(e._falseValue=l),Th(e,n,l,f))};function Rg(e,n,s,l){if(l)return!!(n==="innerHTML"||n==="textContent"||n in e&&Ih(n)&&wt(s));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&e.tagName==="INPUT"||n==="type"&&e.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const h=e.tagName;if(h==="IMG"||h==="VIDEO"||h==="CANVAS"||h==="SOURCE")return!1}return Ih(n)&&li(s)?!1:n in e}const Lr=e=>{const n=e.props["onUpdate:modelValue"]||!1;return mt(n)?s=>Wa(n,s):n};function Og(e){e.target.composing=!0}function Fh(e){const n=e.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const pn=Symbol("_assign"),Xt={created(e,{modifiers:{lazy:n,trim:s,number:l}},h){e[pn]=Lr(h);const p=l||h.props&&h.props.type==="number";tr(e,n?"change":"input",f=>{if(f.target.composing)return;let y=e.value;s&&(y=y.trim()),p&&(y=sl(y)),e[pn](y)}),s&&tr(e,"change",()=>{e.value=e.value.trim()}),n||(tr(e,"compositionstart",Og),tr(e,"compositionend",Fh),tr(e,"change",Fh))},mounted(e,{value:n}){e.value=n??""},beforeUpdate(e,{value:n,oldValue:s,modifiers:{lazy:l,trim:h,number:p}},f){if(e[pn]=Lr(f),e.composing)return;const y=(p||e.type==="number")&&!/^0\d/.test(e.value)?sl(e.value):e.value,v=n??"";y!==v&&(document.activeElement===e&&e.type!=="range"&&(l&&n===s||h&&e.value.trim()===v)||(e.value=v))}},Gf={deep:!0,created(e,n,s){e[pn]=Lr(s),tr(e,"change",()=>{const l=e._modelValue,h=zs(e),p=e.checked,f=e[pn];if(mt(l)){const y=Rc(l,h),v=y!==-1;if(p&&!v)f(l.concat(h));else if(!p&&v){const C=[...l];C.splice(y,1),f(C)}}else if(js(l)){const y=new Set(l);p?y.add(h):y.delete(h),f(y)}else f(Vf(e,p))})},mounted:Nh,beforeUpdate(e,n,s){e[pn]=Lr(s),Nh(e,n,s)}};function Nh(e,{value:n,oldValue:s},l){e._modelValue=n;let h;if(mt(n))h=Rc(n,l.props.value)>-1;else if(js(n))h=n.has(l.props.value);else{if(n===s)return;h=Wr(n,Vf(e,!0))}e.checked!==h&&(e.checked=h)}const Ig={created(e,{value:n},s){e.checked=Wr(n,s.props.value),e[pn]=Lr(s),tr(e,"change",()=>{e[pn](zs(e))})},beforeUpdate(e,{value:n,oldValue:s},l){e[pn]=Lr(l),n!==s&&(e.checked=Wr(n,l.props.value))}},Qi={deep:!0,created(e,{value:n,modifiers:{number:s}},l){const h=js(n);tr(e,"change",()=>{const p=Array.prototype.filter.call(e.options,f=>f.selected).map(f=>s?sl(zs(f)):zs(f));e[pn](e.multiple?h?new Set(p):p:p[0]),e._assigning=!0,Fs(()=>{e._assigning=!1})}),e[pn]=Lr(l)},mounted(e,{value:n}){zh(e,n)},beforeUpdate(e,n,s){e[pn]=Lr(s)},updated(e,{value:n}){e._assigning||zh(e,n)}};function zh(e,n){const s=e.multiple,l=mt(n);if(!(s&&!l&&!js(n))){for(let h=0,p=e.options.length;h<p;h++){const f=e.options[h],y=zs(f);if(s)if(l){const v=typeof y;v==="string"||v==="number"?f.selected=n.some(C=>String(C)===String(y)):f.selected=Rc(n,y)>-1}else f.selected=n.has(y);else if(Wr(zs(f),n)){e.selectedIndex!==h&&(e.selectedIndex=h);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function zs(e){return"_value"in e?e._value:e.value}function Vf(e,n){const s=n?"_trueValue":"_falseValue";return s in e?e[s]:n}const Fg={created(e,n,s){Za(e,n,s,null,"created")},mounted(e,n,s){Za(e,n,s,null,"mounted")},beforeUpdate(e,n,s,l){Za(e,n,s,l,"beforeUpdate")},updated(e,n,s,l){Za(e,n,s,l,"updated")}};function Ng(e,n){switch(e){case"SELECT":return Qi;case"TEXTAREA":return Xt;default:switch(n){case"checkbox":return Gf;case"radio":return Ig;default:return Xt}}}function Za(e,n,s,l,h){const f=Ng(e.tagName,s.props&&s.props.type)[h];f&&f(e,n,s,l)}const zg=["ctrl","shift","alt","meta"],$g={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,n)=>zg.some(s=>e[`${s}Key`]&&!n.includes(s))},Dl=(e,n)=>{const s=e._withMods||(e._withMods={}),l=n.join(".");return s[l]||(s[l]=(h,...p)=>{for(let f=0;f<n.length;f++){const y=$g[n[f]];if(y&&y(h,n))return}return e(h,...p)})},Ug=Si({patchProp:Dg},vg);let $h;function jg(){return $h||($h=G0(Ug))}const Gg=(...e)=>{const n=jg().createApp(...e),{mount:s}=n;return n.mount=l=>{const h=Hg(l);if(!h)return;const p=n._component;!wt(p)&&!p.render&&!p.template&&(p.template=h.innerHTML),h.nodeType===1&&(h.textContent="");const f=s(h,!1,Vg(h));return h instanceof Element&&(h.removeAttribute("v-cloak"),h.setAttribute("data-v-app","")),f},n};function Vg(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Hg(e){return li(e)?document.querySelector(e):e}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Hf;const Rl=e=>Hf=e,Zf=Symbol();function pc(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Uo;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Uo||(Uo={}));function Zg(){const e=jd(!0),n=e.run(()=>qe({}));let s=[],l=[];const h=jc({install(p){Rl(h),h._a=p,p.provide(Zf,h),p.config.globalProperties.$pinia=h,l.forEach(f=>s.push(f)),l=[]},use(p){return this._a?s.push(p):l.push(p),this},_p:s,_a:null,_e:e,_s:new Map,state:n});return h}const qf=()=>{};function Uh(e,n,s,l=qf){e.push(n);const h=()=>{const p=e.indexOf(n);p>-1&&(e.splice(p,1),l())};return!s&&Gd()&&Dm(h),h}function Bs(e,...n){e.slice().forEach(s=>{s(...n)})}const qg=e=>e(),jh=Symbol(),qu=Symbol();function mc(e,n){e instanceof Map&&n instanceof Map?n.forEach((s,l)=>e.set(l,s)):e instanceof Set&&n instanceof Set&&n.forEach(e.add,e);for(const s in n){if(!n.hasOwnProperty(s))continue;const l=n[s],h=e[s];pc(h)&&pc(l)&&e.hasOwnProperty(s)&&!si(l)&&!wr(l)?e[s]=mc(h,l):e[s]=l}return e}const Kg=Symbol();function Wg(e){return!pc(e)||!e.hasOwnProperty(Kg)}const{assign:_r}=Object;function Jg(e){return!!(si(e)&&e.effect)}function Xg(e,n,s,l){const{state:h,actions:p,getters:f}=n,y=s.state.value[e];let v;function C(){y||(s.state.value[e]=h?h():{});const M=i0(s.state.value[e]);return _r(M,p,Object.keys(f||{}).reduce((P,G)=>(P[G]=jc(Ct(()=>{Rl(s);const W=s._s.get(e);return f[G].call(W,W)})),P),{}))}return v=Kf(e,C,n,s,l,!0),v}function Kf(e,n,s={},l,h,p){let f;const y=_r({actions:{}},s),v={deep:!0};let C,M,P=[],G=[],W;const D=l.state.value[e];!p&&!D&&(l.state.value[e]={}),qe({});let z;function j(F){let X;C=M=!1,typeof F=="function"?(F(l.state.value[e]),X={type:Uo.patchFunction,storeId:e,events:W}):(mc(l.state.value[e],F),X={type:Uo.patchObject,payload:F,storeId:e,events:W});const pe=z=Symbol();Fs().then(()=>{z===pe&&(C=!0)}),M=!0,Bs(P,X,l.state.value[e])}const _e=p?function(){const{state:X}=s,pe=X?X():{};this.$patch(ee=>{_r(ee,pe)})}:qf;function Be(){f.stop(),P=[],G=[],l._s.delete(e)}const ge=(F,X="")=>{if(jh in F)return F[qu]=X,F;const pe=function(){Rl(l);const ee=Array.from(arguments),De=[],Ae=[];function ie(Ee){De.push(Ee)}function Le(Ee){Ae.push(Ee)}Bs(G,{args:ee,name:pe[qu],store:Ue,after:ie,onError:Le});let Re;try{Re=F.apply(this&&this.$id===e?this:Ue,ee)}catch(Ee){throw Bs(Ae,Ee),Ee}return Re instanceof Promise?Re.then(Ee=>(Bs(De,Ee),Ee)).catch(Ee=>(Bs(Ae,Ee),Promise.reject(Ee))):(Bs(De,Re),Re)};return pe[jh]=!0,pe[qu]=X,pe},Ne={_p:l,$id:e,$onAction:Uh.bind(null,G),$patch:j,$reset:_e,$subscribe(F,X={}){const pe=Uh(P,F,X.detached,()=>ee()),ee=f.run(()=>zi(()=>l.state.value[e],De=>{(X.flush==="sync"?M:C)&&F({storeId:e,type:Uo.direct,events:W},De)},_r({},v,X)));return pe},$dispose:Be},Ue=nr(Ne);l._s.set(e,Ue);const Pe=(l._a&&l._a.runWithContext||qg)(()=>l._e.run(()=>(f=jd()).run(()=>n({action:ge}))));for(const F in Pe){const X=Pe[F];if(si(X)&&!Jg(X)||wr(X))p||(D&&Wg(X)&&(si(X)?X.value=D[F]:mc(X,D[F])),l.state.value[e][F]=X);else if(typeof X=="function"){const pe=ge(X,F);Pe[F]=pe,y.actions[F]=X}}return _r(Ue,Pe),_r(Rt(Ue),Pe),Object.defineProperty(Ue,"$state",{get:()=>l.state.value[e],set:F=>{j(X=>{_r(X,F)})}}),l._p.forEach(F=>{_r(Ue,f.run(()=>F({store:Ue,app:l._a,pinia:l,options:y})))}),D&&p&&s.hydrate&&s.hydrate(Ue.$state,D),C=!0,M=!0,Ue}/*! #__NO_SIDE_EFFECTS__ */function qc(e,n,s){let l,h;const p=typeof n=="function";typeof e=="string"?(l=e,h=p?s:n):(h=e,l=e.id);function f(y,v){const C=I0();return y=y||(C?fn(Zf,null):null),y&&Rl(y),y=Hf,y._s.has(l)||(p?Kf(l,n,h,y):Xg(l,h,y)),y._s.get(l)}return f.$id=l,f}function Wf(e,n){return function(){return e.apply(n,arguments)}}const{toString:Yg}=Object.prototype,{getPrototypeOf:Kc}=Object,Ol=(e=>n=>{const s=Yg.call(n);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Ln=e=>(e=e.toLowerCase(),n=>Ol(n)===e),Il=e=>n=>typeof n===e,{isArray:Gs}=Array,Wo=Il("undefined");function Qg(e){return e!==null&&!Wo(e)&&e.constructor!==null&&!Wo(e.constructor)&&tn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Jf=Ln("ArrayBuffer");function e_(e){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(e):n=e&&e.buffer&&Jf(e.buffer),n}const t_=Il("string"),tn=Il("function"),Xf=Il("number"),Fl=e=>e!==null&&typeof e=="object",i_=e=>e===!0||e===!1,el=e=>{if(Ol(e)!=="object")return!1;const n=Kc(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},n_=Ln("Date"),r_=Ln("File"),s_=Ln("Blob"),o_=Ln("FileList"),a_=e=>Fl(e)&&tn(e.pipe),l_=e=>{let n;return e&&(typeof FormData=="function"&&e instanceof FormData||tn(e.append)&&((n=Ol(e))==="formdata"||n==="object"&&tn(e.toString)&&e.toString()==="[object FormData]"))},u_=Ln("URLSearchParams"),[c_,h_,d_,f_]=["ReadableStream","Request","Response","Headers"].map(Ln),p_=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ia(e,n,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let l,h;if(typeof e!="object"&&(e=[e]),Gs(e))for(l=0,h=e.length;l<h;l++)n.call(null,e[l],l,e);else{const p=s?Object.getOwnPropertyNames(e):Object.keys(e),f=p.length;let y;for(l=0;l<f;l++)y=p[l],n.call(null,e[y],y,e)}}function Yf(e,n){n=n.toLowerCase();const s=Object.keys(e);let l=s.length,h;for(;l-- >0;)if(h=s[l],n===h.toLowerCase())return h;return null}const Vr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Qf=e=>!Wo(e)&&e!==Vr;function gc(){const{caseless:e}=Qf(this)&&this||{},n={},s=(l,h)=>{const p=e&&Yf(n,h)||h;el(n[p])&&el(l)?n[p]=gc(n[p],l):el(l)?n[p]=gc({},l):Gs(l)?n[p]=l.slice():n[p]=l};for(let l=0,h=arguments.length;l<h;l++)arguments[l]&&ia(arguments[l],s);return n}const m_=(e,n,s,{allOwnKeys:l}={})=>(ia(n,(h,p)=>{s&&tn(h)?e[p]=Wf(h,s):e[p]=h},{allOwnKeys:l}),e),g_=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),__=(e,n,s,l)=>{e.prototype=Object.create(n.prototype,l),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:n.prototype}),s&&Object.assign(e.prototype,s)},y_=(e,n,s,l)=>{let h,p,f;const y={};if(n=n||{},e==null)return n;do{for(h=Object.getOwnPropertyNames(e),p=h.length;p-- >0;)f=h[p],(!l||l(f,e,n))&&!y[f]&&(n[f]=e[f],y[f]=!0);e=s!==!1&&Kc(e)}while(e&&(!s||s(e,n))&&e!==Object.prototype);return n},v_=(e,n,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=n.length;const l=e.indexOf(n,s);return l!==-1&&l===s},b_=e=>{if(!e)return null;if(Gs(e))return e;let n=e.length;if(!Xf(n))return null;const s=new Array(n);for(;n-- >0;)s[n]=e[n];return s},x_=(e=>n=>e&&n instanceof e)(typeof Uint8Array<"u"&&Kc(Uint8Array)),w_=(e,n)=>{const l=(e&&e[Symbol.iterator]).call(e);let h;for(;(h=l.next())&&!h.done;){const p=h.value;n.call(e,p[0],p[1])}},L_=(e,n)=>{let s;const l=[];for(;(s=e.exec(n))!==null;)l.push(s);return l},C_=Ln("HTMLFormElement"),k_=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,l,h){return l.toUpperCase()+h}),Gh=(({hasOwnProperty:e})=>(n,s)=>e.call(n,s))(Object.prototype),E_=Ln("RegExp"),ep=(e,n)=>{const s=Object.getOwnPropertyDescriptors(e),l={};ia(s,(h,p)=>{let f;(f=n(h,p,e))!==!1&&(l[p]=f||h)}),Object.defineProperties(e,l)},M_=e=>{ep(e,(n,s)=>{if(tn(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const l=e[s];if(tn(l)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},P_=(e,n)=>{const s={},l=h=>{h.forEach(p=>{s[p]=!0})};return Gs(e)?l(e):l(String(e).split(n)),s},S_=()=>{},B_=(e,n)=>e!=null&&Number.isFinite(e=+e)?e:n,Ku="abcdefghijklmnopqrstuvwxyz",Vh="0123456789",tp={DIGIT:Vh,ALPHA:Ku,ALPHA_DIGIT:Ku+Ku.toUpperCase()+Vh},A_=(e=16,n=tp.ALPHA_DIGIT)=>{let s="";const{length:l}=n;for(;e--;)s+=n[Math.random()*l|0];return s};function T_(e){return!!(e&&tn(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const D_=e=>{const n=new Array(10),s=(l,h)=>{if(Fl(l)){if(n.indexOf(l)>=0)return;if(!("toJSON"in l)){n[h]=l;const p=Gs(l)?[]:{};return ia(l,(f,y)=>{const v=s(f,h+1);!Wo(v)&&(p[y]=v)}),n[h]=void 0,p}}return l};return s(e,0)},R_=Ln("AsyncFunction"),O_=e=>e&&(Fl(e)||tn(e))&&tn(e.then)&&tn(e.catch),ip=((e,n)=>e?setImmediate:n?((s,l)=>(Vr.addEventListener("message",({source:h,data:p})=>{h===Vr&&p===s&&l.length&&l.shift()()},!1),h=>{l.push(h),Vr.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",tn(Vr.postMessage)),I_=typeof queueMicrotask<"u"?queueMicrotask.bind(Vr):typeof process<"u"&&process.nextTick||ip,Te={isArray:Gs,isArrayBuffer:Jf,isBuffer:Qg,isFormData:l_,isArrayBufferView:e_,isString:t_,isNumber:Xf,isBoolean:i_,isObject:Fl,isPlainObject:el,isReadableStream:c_,isRequest:h_,isResponse:d_,isHeaders:f_,isUndefined:Wo,isDate:n_,isFile:r_,isBlob:s_,isRegExp:E_,isFunction:tn,isStream:a_,isURLSearchParams:u_,isTypedArray:x_,isFileList:o_,forEach:ia,merge:gc,extend:m_,trim:p_,stripBOM:g_,inherits:__,toFlatObject:y_,kindOf:Ol,kindOfTest:Ln,endsWith:v_,toArray:b_,forEachEntry:w_,matchAll:L_,isHTMLForm:C_,hasOwnProperty:Gh,hasOwnProp:Gh,reduceDescriptors:ep,freezeMethods:M_,toObjectSet:P_,toCamelCase:k_,noop:S_,toFiniteNumber:B_,findKey:Yf,global:Vr,isContextDefined:Qf,ALPHABET:tp,generateString:A_,isSpecCompliantForm:T_,toJSONObject:D_,isAsyncFn:R_,isThenable:O_,setImmediate:ip,asap:I_};function Lt(e,n,s,l,h){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",n&&(this.code=n),s&&(this.config=s),l&&(this.request=l),h&&(this.response=h,this.status=h.status?h.status:null)}Te.inherits(Lt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Te.toJSONObject(this.config),code:this.code,status:this.status}}});const np=Lt.prototype,rp={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{rp[e]={value:e}});Object.defineProperties(Lt,rp);Object.defineProperty(np,"isAxiosError",{value:!0});Lt.from=(e,n,s,l,h,p)=>{const f=Object.create(np);return Te.toFlatObject(e,f,function(v){return v!==Error.prototype},y=>y!=="isAxiosError"),Lt.call(f,e.message,n,s,l,h),f.cause=e,f.name=e.name,p&&Object.assign(f,p),f};const F_=null;function _c(e){return Te.isPlainObject(e)||Te.isArray(e)}function sp(e){return Te.endsWith(e,"[]")?e.slice(0,-2):e}function Hh(e,n,s){return e?e.concat(n).map(function(h,p){return h=sp(h),!s&&p?"["+h+"]":h}).join(s?".":""):n}function N_(e){return Te.isArray(e)&&!e.some(_c)}const z_=Te.toFlatObject(Te,{},null,function(n){return/^is[A-Z]/.test(n)});function Nl(e,n,s){if(!Te.isObject(e))throw new TypeError("target must be an object");n=n||new FormData,s=Te.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(z,j){return!Te.isUndefined(j[z])});const l=s.metaTokens,h=s.visitor||M,p=s.dots,f=s.indexes,v=(s.Blob||typeof Blob<"u"&&Blob)&&Te.isSpecCompliantForm(n);if(!Te.isFunction(h))throw new TypeError("visitor must be a function");function C(D){if(D===null)return"";if(Te.isDate(D))return D.toISOString();if(!v&&Te.isBlob(D))throw new Lt("Blob is not supported. Use a Buffer instead.");return Te.isArrayBuffer(D)||Te.isTypedArray(D)?v&&typeof Blob=="function"?new Blob([D]):Buffer.from(D):D}function M(D,z,j){let _e=D;if(D&&!j&&typeof D=="object"){if(Te.endsWith(z,"{}"))z=l?z:z.slice(0,-2),D=JSON.stringify(D);else if(Te.isArray(D)&&N_(D)||(Te.isFileList(D)||Te.endsWith(z,"[]"))&&(_e=Te.toArray(D)))return z=sp(z),_e.forEach(function(ge,Ne){!(Te.isUndefined(ge)||ge===null)&&n.append(f===!0?Hh([z],Ne,p):f===null?z:z+"[]",C(ge))}),!1}return _c(D)?!0:(n.append(Hh(j,z,p),C(D)),!1)}const P=[],G=Object.assign(z_,{defaultVisitor:M,convertValue:C,isVisitable:_c});function W(D,z){if(!Te.isUndefined(D)){if(P.indexOf(D)!==-1)throw Error("Circular reference detected in "+z.join("."));P.push(D),Te.forEach(D,function(_e,Be){(!(Te.isUndefined(_e)||_e===null)&&h.call(n,_e,Te.isString(Be)?Be.trim():Be,z,G))===!0&&W(_e,z?z.concat(Be):[Be])}),P.pop()}}if(!Te.isObject(e))throw new TypeError("data must be an object");return W(e),n}function Zh(e){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(l){return n[l]})}function Wc(e,n){this._pairs=[],e&&Nl(e,this,n)}const op=Wc.prototype;op.append=function(n,s){this._pairs.push([n,s])};op.toString=function(n){const s=n?function(l){return n.call(this,l,Zh)}:Zh;return this._pairs.map(function(h){return s(h[0])+"="+s(h[1])},"").join("&")};function $_(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ap(e,n,s){if(!n)return e;const l=s&&s.encode||$_;Te.isFunction(s)&&(s={serialize:s});const h=s&&s.serialize;let p;if(h?p=h(n,s):p=Te.isURLSearchParams(n)?n.toString():new Wc(n,s).toString(l),p){const f=e.indexOf("#");f!==-1&&(e=e.slice(0,f)),e+=(e.indexOf("?")===-1?"?":"&")+p}return e}class qh{constructor(){this.handlers=[]}use(n,s,l){return this.handlers.push({fulfilled:n,rejected:s,synchronous:l?l.synchronous:!1,runWhen:l?l.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){Te.forEach(this.handlers,function(l){l!==null&&n(l)})}}const lp={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},U_=typeof URLSearchParams<"u"?URLSearchParams:Wc,j_=typeof FormData<"u"?FormData:null,G_=typeof Blob<"u"?Blob:null,V_={isBrowser:!0,classes:{URLSearchParams:U_,FormData:j_,Blob:G_},protocols:["http","https","file","blob","url","data"]},Jc=typeof window<"u"&&typeof document<"u",yc=typeof navigator=="object"&&navigator||void 0,H_=Jc&&(!yc||["ReactNative","NativeScript","NS"].indexOf(yc.product)<0),Z_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",q_=Jc&&window.location.href||"http://localhost",K_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Jc,hasStandardBrowserEnv:H_,hasStandardBrowserWebWorkerEnv:Z_,navigator:yc,origin:q_},Symbol.toStringTag,{value:"Module"})),Pi={...K_,...V_};function W_(e,n){return Nl(e,new Pi.classes.URLSearchParams,Object.assign({visitor:function(s,l,h,p){return Pi.isNode&&Te.isBuffer(s)?(this.append(l,s.toString("base64")),!1):p.defaultVisitor.apply(this,arguments)}},n))}function J_(e){return Te.matchAll(/\w+|\[(\w*)]/g,e).map(n=>n[0]==="[]"?"":n[1]||n[0])}function X_(e){const n={},s=Object.keys(e);let l;const h=s.length;let p;for(l=0;l<h;l++)p=s[l],n[p]=e[p];return n}function up(e){function n(s,l,h,p){let f=s[p++];if(f==="__proto__")return!0;const y=Number.isFinite(+f),v=p>=s.length;return f=!f&&Te.isArray(h)?h.length:f,v?(Te.hasOwnProp(h,f)?h[f]=[h[f],l]:h[f]=l,!y):((!h[f]||!Te.isObject(h[f]))&&(h[f]=[]),n(s,l,h[f],p)&&Te.isArray(h[f])&&(h[f]=X_(h[f])),!y)}if(Te.isFormData(e)&&Te.isFunction(e.entries)){const s={};return Te.forEachEntry(e,(l,h)=>{n(J_(l),h,s,0)}),s}return null}function Y_(e,n,s){if(Te.isString(e))try{return(n||JSON.parse)(e),Te.trim(e)}catch(l){if(l.name!=="SyntaxError")throw l}return(s||JSON.stringify)(e)}const na={transitional:lp,adapter:["xhr","http","fetch"],transformRequest:[function(n,s){const l=s.getContentType()||"",h=l.indexOf("application/json")>-1,p=Te.isObject(n);if(p&&Te.isHTMLForm(n)&&(n=new FormData(n)),Te.isFormData(n))return h?JSON.stringify(up(n)):n;if(Te.isArrayBuffer(n)||Te.isBuffer(n)||Te.isStream(n)||Te.isFile(n)||Te.isBlob(n)||Te.isReadableStream(n))return n;if(Te.isArrayBufferView(n))return n.buffer;if(Te.isURLSearchParams(n))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let y;if(p){if(l.indexOf("application/x-www-form-urlencoded")>-1)return W_(n,this.formSerializer).toString();if((y=Te.isFileList(n))||l.indexOf("multipart/form-data")>-1){const v=this.env&&this.env.FormData;return Nl(y?{"files[]":n}:n,v&&new v,this.formSerializer)}}return p||h?(s.setContentType("application/json",!1),Y_(n)):n}],transformResponse:[function(n){const s=this.transitional||na.transitional,l=s&&s.forcedJSONParsing,h=this.responseType==="json";if(Te.isResponse(n)||Te.isReadableStream(n))return n;if(n&&Te.isString(n)&&(l&&!this.responseType||h)){const f=!(s&&s.silentJSONParsing)&&h;try{return JSON.parse(n)}catch(y){if(f)throw y.name==="SyntaxError"?Lt.from(y,Lt.ERR_BAD_RESPONSE,this,null,this.response):y}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Pi.classes.FormData,Blob:Pi.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Te.forEach(["delete","get","head","post","put","patch"],e=>{na.headers[e]={}});const Q_=Te.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ey=e=>{const n={};let s,l,h;return e&&e.split(`
`).forEach(function(f){h=f.indexOf(":"),s=f.substring(0,h).trim().toLowerCase(),l=f.substring(h+1).trim(),!(!s||n[s]&&Q_[s])&&(s==="set-cookie"?n[s]?n[s].push(l):n[s]=[l]:n[s]=n[s]?n[s]+", "+l:l)}),n},Kh=Symbol("internals");function So(e){return e&&String(e).trim().toLowerCase()}function tl(e){return e===!1||e==null?e:Te.isArray(e)?e.map(tl):String(e)}function ty(e){const n=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let l;for(;l=s.exec(e);)n[l[1]]=l[2];return n}const iy=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Wu(e,n,s,l,h){if(Te.isFunction(l))return l.call(this,n,s);if(h&&(n=s),!!Te.isString(n)){if(Te.isString(l))return n.indexOf(l)!==-1;if(Te.isRegExp(l))return l.test(n)}}function ny(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,s,l)=>s.toUpperCase()+l)}function ry(e,n){const s=Te.toCamelCase(" "+n);["get","set","has"].forEach(l=>{Object.defineProperty(e,l+s,{value:function(h,p,f){return this[l].call(this,n,h,p,f)},configurable:!0})})}let qi=class{constructor(n){n&&this.set(n)}set(n,s,l){const h=this;function p(y,v,C){const M=So(v);if(!M)throw new Error("header name must be a non-empty string");const P=Te.findKey(h,M);(!P||h[P]===void 0||C===!0||C===void 0&&h[P]!==!1)&&(h[P||v]=tl(y))}const f=(y,v)=>Te.forEach(y,(C,M)=>p(C,M,v));if(Te.isPlainObject(n)||n instanceof this.constructor)f(n,s);else if(Te.isString(n)&&(n=n.trim())&&!iy(n))f(ey(n),s);else if(Te.isHeaders(n))for(const[y,v]of n.entries())p(v,y,l);else n!=null&&p(s,n,l);return this}get(n,s){if(n=So(n),n){const l=Te.findKey(this,n);if(l){const h=this[l];if(!s)return h;if(s===!0)return ty(h);if(Te.isFunction(s))return s.call(this,h,l);if(Te.isRegExp(s))return s.exec(h);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,s){if(n=So(n),n){const l=Te.findKey(this,n);return!!(l&&this[l]!==void 0&&(!s||Wu(this,this[l],l,s)))}return!1}delete(n,s){const l=this;let h=!1;function p(f){if(f=So(f),f){const y=Te.findKey(l,f);y&&(!s||Wu(l,l[y],y,s))&&(delete l[y],h=!0)}}return Te.isArray(n)?n.forEach(p):p(n),h}clear(n){const s=Object.keys(this);let l=s.length,h=!1;for(;l--;){const p=s[l];(!n||Wu(this,this[p],p,n,!0))&&(delete this[p],h=!0)}return h}normalize(n){const s=this,l={};return Te.forEach(this,(h,p)=>{const f=Te.findKey(l,p);if(f){s[f]=tl(h),delete s[p];return}const y=n?ny(p):String(p).trim();y!==p&&delete s[p],s[y]=tl(h),l[y]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const s=Object.create(null);return Te.forEach(this,(l,h)=>{l!=null&&l!==!1&&(s[h]=n&&Te.isArray(l)?l.join(", "):l)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,s])=>n+": "+s).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...s){const l=new this(n);return s.forEach(h=>l.set(h)),l}static accessor(n){const l=(this[Kh]=this[Kh]={accessors:{}}).accessors,h=this.prototype;function p(f){const y=So(f);l[y]||(ry(h,f),l[y]=!0)}return Te.isArray(n)?n.forEach(p):p(n),this}};qi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Te.reduceDescriptors(qi.prototype,({value:e},n)=>{let s=n[0].toUpperCase()+n.slice(1);return{get:()=>e,set(l){this[s]=l}}});Te.freezeMethods(qi);function Ju(e,n){const s=this||na,l=n||s,h=qi.from(l.headers);let p=l.data;return Te.forEach(e,function(y){p=y.call(s,p,h.normalize(),n?n.status:void 0)}),h.normalize(),p}function cp(e){return!!(e&&e.__CANCEL__)}function Vs(e,n,s){Lt.call(this,e??"canceled",Lt.ERR_CANCELED,n,s),this.name="CanceledError"}Te.inherits(Vs,Lt,{__CANCEL__:!0});function hp(e,n,s){const l=s.config.validateStatus;!s.status||!l||l(s.status)?e(s):n(new Lt("Request failed with status code "+s.status,[Lt.ERR_BAD_REQUEST,Lt.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function sy(e){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}function oy(e,n){e=e||10;const s=new Array(e),l=new Array(e);let h=0,p=0,f;return n=n!==void 0?n:1e3,function(v){const C=Date.now(),M=l[p];f||(f=C),s[h]=v,l[h]=C;let P=p,G=0;for(;P!==h;)G+=s[P++],P=P%e;if(h=(h+1)%e,h===p&&(p=(p+1)%e),C-f<n)return;const W=M&&C-M;return W?Math.round(G*1e3/W):void 0}}function ay(e,n){let s=0,l=1e3/n,h,p;const f=(C,M=Date.now())=>{s=M,h=null,p&&(clearTimeout(p),p=null),e.apply(null,C)};return[(...C)=>{const M=Date.now(),P=M-s;P>=l?f(C,M):(h=C,p||(p=setTimeout(()=>{p=null,f(h)},l-P)))},()=>h&&f(h)]}const ml=(e,n,s=3)=>{let l=0;const h=oy(50,250);return ay(p=>{const f=p.loaded,y=p.lengthComputable?p.total:void 0,v=f-l,C=h(v),M=f<=y;l=f;const P={loaded:f,total:y,progress:y?f/y:void 0,bytes:v,rate:C||void 0,estimated:C&&y&&M?(y-f)/C:void 0,event:p,lengthComputable:y!=null,[n?"download":"upload"]:!0};e(P)},s)},Wh=(e,n)=>{const s=e!=null;return[l=>n[0]({lengthComputable:s,total:e,loaded:l}),n[1]]},Jh=e=>(...n)=>Te.asap(()=>e(...n)),ly=Pi.hasStandardBrowserEnv?((e,n)=>s=>(s=new URL(s,Pi.origin),e.protocol===s.protocol&&e.host===s.host&&(n||e.port===s.port)))(new URL(Pi.origin),Pi.navigator&&/(msie|trident)/i.test(Pi.navigator.userAgent)):()=>!0,uy=Pi.hasStandardBrowserEnv?{write(e,n,s,l,h,p){const f=[e+"="+encodeURIComponent(n)];Te.isNumber(s)&&f.push("expires="+new Date(s).toGMTString()),Te.isString(l)&&f.push("path="+l),Te.isString(h)&&f.push("domain="+h),p===!0&&f.push("secure"),document.cookie=f.join("; ")},read(e){const n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function cy(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function hy(e,n){return n?e.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):e}function dp(e,n){return e&&!cy(n)?hy(e,n):n}const Xh=e=>e instanceof qi?{...e}:e;function Qr(e,n){n=n||{};const s={};function l(C,M,P,G){return Te.isPlainObject(C)&&Te.isPlainObject(M)?Te.merge.call({caseless:G},C,M):Te.isPlainObject(M)?Te.merge({},M):Te.isArray(M)?M.slice():M}function h(C,M,P,G){if(Te.isUndefined(M)){if(!Te.isUndefined(C))return l(void 0,C,P,G)}else return l(C,M,P,G)}function p(C,M){if(!Te.isUndefined(M))return l(void 0,M)}function f(C,M){if(Te.isUndefined(M)){if(!Te.isUndefined(C))return l(void 0,C)}else return l(void 0,M)}function y(C,M,P){if(P in n)return l(C,M);if(P in e)return l(void 0,C)}const v={url:p,method:p,data:p,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:y,headers:(C,M,P)=>h(Xh(C),Xh(M),P,!0)};return Te.forEach(Object.keys(Object.assign({},e,n)),function(M){const P=v[M]||h,G=P(e[M],n[M],M);Te.isUndefined(G)&&P!==y||(s[M]=G)}),s}const fp=e=>{const n=Qr({},e);let{data:s,withXSRFToken:l,xsrfHeaderName:h,xsrfCookieName:p,headers:f,auth:y}=n;n.headers=f=qi.from(f),n.url=ap(dp(n.baseURL,n.url),e.params,e.paramsSerializer),y&&f.set("Authorization","Basic "+btoa((y.username||"")+":"+(y.password?unescape(encodeURIComponent(y.password)):"")));let v;if(Te.isFormData(s)){if(Pi.hasStandardBrowserEnv||Pi.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if((v=f.getContentType())!==!1){const[C,...M]=v?v.split(";").map(P=>P.trim()).filter(Boolean):[];f.setContentType([C||"multipart/form-data",...M].join("; "))}}if(Pi.hasStandardBrowserEnv&&(l&&Te.isFunction(l)&&(l=l(n)),l||l!==!1&&ly(n.url))){const C=h&&p&&uy.read(p);C&&f.set(h,C)}return n},dy=typeof XMLHttpRequest<"u",fy=dy&&function(e){return new Promise(function(s,l){const h=fp(e);let p=h.data;const f=qi.from(h.headers).normalize();let{responseType:y,onUploadProgress:v,onDownloadProgress:C}=h,M,P,G,W,D;function z(){W&&W(),D&&D(),h.cancelToken&&h.cancelToken.unsubscribe(M),h.signal&&h.signal.removeEventListener("abort",M)}let j=new XMLHttpRequest;j.open(h.method.toUpperCase(),h.url,!0),j.timeout=h.timeout;function _e(){if(!j)return;const ge=qi.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),Ue={data:!y||y==="text"||y==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:ge,config:e,request:j};hp(function(Pe){s(Pe),z()},function(Pe){l(Pe),z()},Ue),j=null}"onloadend"in j?j.onloadend=_e:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(_e)},j.onabort=function(){j&&(l(new Lt("Request aborted",Lt.ECONNABORTED,e,j)),j=null)},j.onerror=function(){l(new Lt("Network Error",Lt.ERR_NETWORK,e,j)),j=null},j.ontimeout=function(){let Ne=h.timeout?"timeout of "+h.timeout+"ms exceeded":"timeout exceeded";const Ue=h.transitional||lp;h.timeoutErrorMessage&&(Ne=h.timeoutErrorMessage),l(new Lt(Ne,Ue.clarifyTimeoutError?Lt.ETIMEDOUT:Lt.ECONNABORTED,e,j)),j=null},p===void 0&&f.setContentType(null),"setRequestHeader"in j&&Te.forEach(f.toJSON(),function(Ne,Ue){j.setRequestHeader(Ue,Ne)}),Te.isUndefined(h.withCredentials)||(j.withCredentials=!!h.withCredentials),y&&y!=="json"&&(j.responseType=h.responseType),C&&([G,D]=ml(C,!0),j.addEventListener("progress",G)),v&&j.upload&&([P,W]=ml(v),j.upload.addEventListener("progress",P),j.upload.addEventListener("loadend",W)),(h.cancelToken||h.signal)&&(M=ge=>{j&&(l(!ge||ge.type?new Vs(null,e,j):ge),j.abort(),j=null)},h.cancelToken&&h.cancelToken.subscribe(M),h.signal&&(h.signal.aborted?M():h.signal.addEventListener("abort",M)));const Be=sy(h.url);if(Be&&Pi.protocols.indexOf(Be)===-1){l(new Lt("Unsupported protocol "+Be+":",Lt.ERR_BAD_REQUEST,e));return}j.send(p||null)})},py=(e,n)=>{const{length:s}=e=e?e.filter(Boolean):[];if(n||s){let l=new AbortController,h;const p=function(C){if(!h){h=!0,y();const M=C instanceof Error?C:this.reason;l.abort(M instanceof Lt?M:new Vs(M instanceof Error?M.message:M))}};let f=n&&setTimeout(()=>{f=null,p(new Lt(`timeout ${n} of ms exceeded`,Lt.ETIMEDOUT))},n);const y=()=>{e&&(f&&clearTimeout(f),f=null,e.forEach(C=>{C.unsubscribe?C.unsubscribe(p):C.removeEventListener("abort",p)}),e=null)};e.forEach(C=>C.addEventListener("abort",p));const{signal:v}=l;return v.unsubscribe=()=>Te.asap(y),v}},my=function*(e,n){let s=e.byteLength;if(s<n){yield e;return}let l=0,h;for(;l<s;)h=l+n,yield e.slice(l,h),l=h},gy=async function*(e,n){for await(const s of _y(e))yield*my(s,n)},_y=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const n=e.getReader();try{for(;;){const{done:s,value:l}=await n.read();if(s)break;yield l}}finally{await n.cancel()}},Yh=(e,n,s,l)=>{const h=gy(e,n);let p=0,f,y=v=>{f||(f=!0,l&&l(v))};return new ReadableStream({async pull(v){try{const{done:C,value:M}=await h.next();if(C){y(),v.close();return}let P=M.byteLength;if(s){let G=p+=P;s(G)}v.enqueue(new Uint8Array(M))}catch(C){throw y(C),C}},cancel(v){return y(v),h.return()}},{highWaterMark:2})},zl=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",pp=zl&&typeof ReadableStream=="function",yy=zl&&(typeof TextEncoder=="function"?(e=>n=>e.encode(n))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),mp=(e,...n)=>{try{return!!e(...n)}catch{return!1}},vy=pp&&mp(()=>{let e=!1;const n=new Request(Pi.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!n}),Qh=64*1024,vc=pp&&mp(()=>Te.isReadableStream(new Response("").body)),gl={stream:vc&&(e=>e.body)};zl&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(n=>{!gl[n]&&(gl[n]=Te.isFunction(e[n])?s=>s[n]():(s,l)=>{throw new Lt(`Response type '${n}' is not supported`,Lt.ERR_NOT_SUPPORT,l)})})})(new Response);const by=async e=>{if(e==null)return 0;if(Te.isBlob(e))return e.size;if(Te.isSpecCompliantForm(e))return(await new Request(Pi.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Te.isArrayBufferView(e)||Te.isArrayBuffer(e))return e.byteLength;if(Te.isURLSearchParams(e)&&(e=e+""),Te.isString(e))return(await yy(e)).byteLength},xy=async(e,n)=>{const s=Te.toFiniteNumber(e.getContentLength());return s??by(n)},wy=zl&&(async e=>{let{url:n,method:s,data:l,signal:h,cancelToken:p,timeout:f,onDownloadProgress:y,onUploadProgress:v,responseType:C,headers:M,withCredentials:P="same-origin",fetchOptions:G}=fp(e);C=C?(C+"").toLowerCase():"text";let W=py([h,p&&p.toAbortSignal()],f),D;const z=W&&W.unsubscribe&&(()=>{W.unsubscribe()});let j;try{if(v&&vy&&s!=="get"&&s!=="head"&&(j=await xy(M,l))!==0){let Ue=new Request(n,{method:"POST",body:l,duplex:"half"}),fe;if(Te.isFormData(l)&&(fe=Ue.headers.get("content-type"))&&M.setContentType(fe),Ue.body){const[Pe,F]=Wh(j,ml(Jh(v)));l=Yh(Ue.body,Qh,Pe,F)}}Te.isString(P)||(P=P?"include":"omit");const _e="credentials"in Request.prototype;D=new Request(n,{...G,signal:W,method:s.toUpperCase(),headers:M.normalize().toJSON(),body:l,duplex:"half",credentials:_e?P:void 0});let Be=await fetch(D);const ge=vc&&(C==="stream"||C==="response");if(vc&&(y||ge&&z)){const Ue={};["status","statusText","headers"].forEach(X=>{Ue[X]=Be[X]});const fe=Te.toFiniteNumber(Be.headers.get("content-length")),[Pe,F]=y&&Wh(fe,ml(Jh(y),!0))||[];Be=new Response(Yh(Be.body,Qh,Pe,()=>{F&&F(),z&&z()}),Ue)}C=C||"text";let Ne=await gl[Te.findKey(gl,C)||"text"](Be,e);return!ge&&z&&z(),await new Promise((Ue,fe)=>{hp(Ue,fe,{data:Ne,headers:qi.from(Be.headers),status:Be.status,statusText:Be.statusText,config:e,request:D})})}catch(_e){throw z&&z(),_e&&_e.name==="TypeError"&&/fetch/i.test(_e.message)?Object.assign(new Lt("Network Error",Lt.ERR_NETWORK,e,D),{cause:_e.cause||_e}):Lt.from(_e,_e&&_e.code,e,D)}}),bc={http:F_,xhr:fy,fetch:wy};Te.forEach(bc,(e,n)=>{if(e){try{Object.defineProperty(e,"name",{value:n})}catch{}Object.defineProperty(e,"adapterName",{value:n})}});const ed=e=>`- ${e}`,Ly=e=>Te.isFunction(e)||e===null||e===!1,gp={getAdapter:e=>{e=Te.isArray(e)?e:[e];const{length:n}=e;let s,l;const h={};for(let p=0;p<n;p++){s=e[p];let f;if(l=s,!Ly(s)&&(l=bc[(f=String(s)).toLowerCase()],l===void 0))throw new Lt(`Unknown adapter '${f}'`);if(l)break;h[f||"#"+p]=l}if(!l){const p=Object.entries(h).map(([y,v])=>`adapter ${y} `+(v===!1?"is not supported by the environment":"is not available in the build"));let f=n?p.length>1?`since :
`+p.map(ed).join(`
`):" "+ed(p[0]):"as no adapter specified";throw new Lt("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return l},adapters:bc};function Xu(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Vs(null,e)}function td(e){return Xu(e),e.headers=qi.from(e.headers),e.data=Ju.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),gp.getAdapter(e.adapter||na.adapter)(e).then(function(l){return Xu(e),l.data=Ju.call(e,e.transformResponse,l),l.headers=qi.from(l.headers),l},function(l){return cp(l)||(Xu(e),l&&l.response&&(l.response.data=Ju.call(e,e.transformResponse,l.response),l.response.headers=qi.from(l.response.headers))),Promise.reject(l)})}const _p="1.7.9",$l={};["object","boolean","number","function","string","symbol"].forEach((e,n)=>{$l[e]=function(l){return typeof l===e||"a"+(n<1?"n ":" ")+e}});const id={};$l.transitional=function(n,s,l){function h(p,f){return"[Axios v"+_p+"] Transitional option '"+p+"'"+f+(l?". "+l:"")}return(p,f,y)=>{if(n===!1)throw new Lt(h(f," has been removed"+(s?" in "+s:"")),Lt.ERR_DEPRECATED);return s&&!id[f]&&(id[f]=!0,console.warn(h(f," has been deprecated since v"+s+" and will be removed in the near future"))),n?n(p,f,y):!0}};$l.spelling=function(n){return(s,l)=>(console.warn(`${l} is likely a misspelling of ${n}`),!0)};function Cy(e,n,s){if(typeof e!="object")throw new Lt("options must be an object",Lt.ERR_BAD_OPTION_VALUE);const l=Object.keys(e);let h=l.length;for(;h-- >0;){const p=l[h],f=n[p];if(f){const y=e[p],v=y===void 0||f(y,p,e);if(v!==!0)throw new Lt("option "+p+" must be "+v,Lt.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new Lt("Unknown option "+p,Lt.ERR_BAD_OPTION)}}const il={assertOptions:Cy,validators:$l},Dn=il.validators;let Kr=class{constructor(n){this.defaults=n,this.interceptors={request:new qh,response:new qh}}async request(n,s){try{return await this._request(n,s)}catch(l){if(l instanceof Error){let h={};Error.captureStackTrace?Error.captureStackTrace(h):h=new Error;const p=h.stack?h.stack.replace(/^.+\n/,""):"";try{l.stack?p&&!String(l.stack).endsWith(p.replace(/^.+\n.+\n/,""))&&(l.stack+=`
`+p):l.stack=p}catch{}}throw l}}_request(n,s){typeof n=="string"?(s=s||{},s.url=n):s=n||{},s=Qr(this.defaults,s);const{transitional:l,paramsSerializer:h,headers:p}=s;l!==void 0&&il.assertOptions(l,{silentJSONParsing:Dn.transitional(Dn.boolean),forcedJSONParsing:Dn.transitional(Dn.boolean),clarifyTimeoutError:Dn.transitional(Dn.boolean)},!1),h!=null&&(Te.isFunction(h)?s.paramsSerializer={serialize:h}:il.assertOptions(h,{encode:Dn.function,serialize:Dn.function},!0)),il.assertOptions(s,{baseUrl:Dn.spelling("baseURL"),withXsrfToken:Dn.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let f=p&&Te.merge(p.common,p[s.method]);p&&Te.forEach(["delete","get","head","post","put","patch","common"],D=>{delete p[D]}),s.headers=qi.concat(f,p);const y=[];let v=!0;this.interceptors.request.forEach(function(z){typeof z.runWhen=="function"&&z.runWhen(s)===!1||(v=v&&z.synchronous,y.unshift(z.fulfilled,z.rejected))});const C=[];this.interceptors.response.forEach(function(z){C.push(z.fulfilled,z.rejected)});let M,P=0,G;if(!v){const D=[td.bind(this),void 0];for(D.unshift.apply(D,y),D.push.apply(D,C),G=D.length,M=Promise.resolve(s);P<G;)M=M.then(D[P++],D[P++]);return M}G=y.length;let W=s;for(P=0;P<G;){const D=y[P++],z=y[P++];try{W=D(W)}catch(j){z.call(this,j);break}}try{M=td.call(this,W)}catch(D){return Promise.reject(D)}for(P=0,G=C.length;P<G;)M=M.then(C[P++],C[P++]);return M}getUri(n){n=Qr(this.defaults,n);const s=dp(n.baseURL,n.url);return ap(s,n.params,n.paramsSerializer)}};Te.forEach(["delete","get","head","options"],function(n){Kr.prototype[n]=function(s,l){return this.request(Qr(l||{},{method:n,url:s,data:(l||{}).data}))}});Te.forEach(["post","put","patch"],function(n){function s(l){return function(p,f,y){return this.request(Qr(y||{},{method:n,headers:l?{"Content-Type":"multipart/form-data"}:{},url:p,data:f}))}}Kr.prototype[n]=s(),Kr.prototype[n+"Form"]=s(!0)});let ky=class yp{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(p){s=p});const l=this;this.promise.then(h=>{if(!l._listeners)return;let p=l._listeners.length;for(;p-- >0;)l._listeners[p](h);l._listeners=null}),this.promise.then=h=>{let p;const f=new Promise(y=>{l.subscribe(y),p=y}).then(h);return f.cancel=function(){l.unsubscribe(p)},f},n(function(p,f,y){l.reason||(l.reason=new Vs(p,f,y),s(l.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const s=this._listeners.indexOf(n);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const n=new AbortController,s=l=>{n.abort(l)};return this.subscribe(s),n.signal.unsubscribe=()=>this.unsubscribe(s),n.signal}static source(){let n;return{token:new yp(function(h){n=h}),cancel:n}}};function Ey(e){return function(s){return e.apply(null,s)}}function My(e){return Te.isObject(e)&&e.isAxiosError===!0}const xc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(xc).forEach(([e,n])=>{xc[n]=e});function vp(e){const n=new Kr(e),s=Wf(Kr.prototype.request,n);return Te.extend(s,Kr.prototype,n,{allOwnKeys:!0}),Te.extend(s,n,null,{allOwnKeys:!0}),s.create=function(h){return vp(Qr(e,h))},s}const oi=vp(na);oi.Axios=Kr;oi.CanceledError=Vs;oi.CancelToken=ky;oi.isCancel=cp;oi.VERSION=_p;oi.toFormData=Nl;oi.AxiosError=Lt;oi.Cancel=oi.CanceledError;oi.all=function(n){return Promise.all(n)};oi.spread=Ey;oi.isAxiosError=My;oi.mergeConfig=Qr;oi.AxiosHeaders=qi;oi.formToJSON=e=>up(Te.isHTMLForm(e)?new FormData(e):e);oi.getAdapter=gp.getAdapter;oi.HttpStatusCode=xc;oi.default=oi;const{Axios:QL,AxiosError:eC,CanceledError:tC,isCancel:iC,CancelToken:nC,VERSION:rC,all:sC,Cancel:oC,isAxiosError:aC,spread:lC,toFormData:uC,AxiosHeaders:cC,HttpStatusCode:hC,formToJSON:dC,getAdapter:fC,mergeConfig:pC}=oi,gt=oi.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});function bp(e){var l;const s=`; ${document.cookie}`.split(`; ${e}=`);return s.length===2&&((l=s.pop())==null?void 0:l.split(";").shift())||null}gt.interceptors.request.use(e=>{const n=bp("access_token");return n&&(e.headers.Authorization=`Bearer ${n}`),console.log("Request config:",{url:e.url,method:e.method,headers:e.headers,withCredentials:e.withCredentials}),e},e=>(console.error("Request interceptor error:",e),Promise.reject(e)));gt.interceptors.response.use(e=>e,async e=>{var s;const n=e.config;if(((s=e.response)==null?void 0:s.status)===401&&!n._retry){n._retry=!0;try{await Ui().refreshToken();const h=bp("access_token");if(h)return n.headers.Authorization=`Bearer ${h}`,gt(n)}catch(l){console.error("Token refresh failed:",l),window.location.href="/login"}}return Promise.reject(e)});gt.defaults.baseURL="/api";gt.defaults.headers.common["Content-Type"]="application/json";gt.defaults.withCredentials=!0;function _l(e){var l;const s=`; ${document.cookie}`.split(`; ${e}=`);return s.length===2&&((l=s.pop())==null?void 0:l.split(";").shift())||null}gt.interceptors.request.use(e=>{const n=_l("access_token");return n&&(e.headers.Authorization=`Bearer ${n}`),e},e=>(console.error("Request interceptor error:",e),Promise.reject(e)));gt.interceptors.response.use(e=>e,async e=>{var l,h;const n=Ui(),s=e.config;if(((l=e.response)==null?void 0:l.status)===401&&!s._retry&&!((h=s.url)!=null&&h.includes("/token/refresh/"))){s._retry=!0;try{if(!_l("access_token"))throw new Error("No token available");await n.refreshToken();const f=_l("access_token");if(f)return s.headers.Authorization=`Bearer ${f}`,gt(s)}catch(p){console.error("Token refresh failed:",p),await n.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(e)});function Py(e,n,s=1){const l=new Date;l.setTime(l.getTime()+s*24*60*60*1e3);const h=`expires=${l.toUTCString()}`;document.cookie=`${e}=${n};${h};path=/;secure;samesite=Strict`}function Hr(e){if(!e)return"Non spcifi";const n=`${e.first_name} ${e.last_name.toUpperCase()}`;return e.company_name?`${n} (${e.company_name})`:n}const Ui=qc("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,concessionnaires:[]}),getters:{isAdmin:e=>{var n;return((n=e.user)==null?void 0:n.user_type)==="admin"},isDealer:e=>{var n;return((n=e.user)==null?void 0:n.user_type)==="dealer"},isClient:e=>{var n;return((n=e.user)==null?void 0:n.user_type)==="client"},currentUser:e=>e.user,hasDealer:e=>{var n;return!!((n=e.user)!=null&&n.dealer)}},actions:{async initialize(e){if(console.log("Initializing auth store with state:",e),!e){console.log("No initial state, attempting to restore session...");const s=await this.restoreSession();return this.initialized=!0,s}if(e.isAuthenticated&&e.user)return this.user=e.user,this.isAuthenticated=!0,this.mustChangePassword=e.user.must_change_password||!1,this.initialized=!0,!0;const n=await this.restoreSession();return this.initialized=!0,n},async restoreSession(){console.log("Attempting to restore session...");try{if(!_l("access_token"))return console.log("No token found, skipping session restore"),this.isAuthenticated=!1,this.user=null,!1;const n=await gt.post("/token/refresh/");return n.data.user?(this.user=n.data.user,this.isAuthenticated=!0,this.mustChangePassword=n.data.user.must_change_password||!1,console.log("Session restored successfully"),!0):(await this.fetchUserProfile(),!0)}catch(e){return console.error("Failed to restore session:",e),this.isAuthenticated=!1,this.user=null,!1}},async login(e,n){var s,l,h;try{const p=await gt.post("/token/",{username:e,password:n});if(!p.data.access)throw new Error("Token d'accs non reu");document.cookie=`access_token=${p.data.access}; path=/; secure; samesite=Strict`;const f=await this.fetchUserProfile();return this.user=f,this.isAuthenticated=!0,!0}catch(p){throw this.isAuthenticated=!1,this.user=null,((s=p.response)==null?void 0:s.status)===401?new Error("Identifiants incorrects"):(h=(l=p.response)==null?void 0:l.data)!=null&&h.detail?new Error(p.response.data.detail):p}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const e=await gt.get("/users/me/");return this.user=e.data,this.isAuthenticated=!0,this.mustChangePassword=e.data.must_change_password||!1,e.data}catch(e){throw this.isAuthenticated=!1,this.user=null,e}},async changePassword(e,n){try{console.log("Attempting to change password...");const s=await gt.post("/users/change_password/",{old_password:e,password:n});return console.log("Password change response:",s.data),this.user={...this.user,must_change_password:!1},s.data}catch(s){throw console.error("Password change error:",s),s}},async refreshToken(){var e,n,s,l;try{console.log("Attempting to refresh token...");const h=await gt.post("/token/refresh/",{},{withCredentials:!0}),{access:p}=h.data;if(!p)throw new Error("No access token received");return console.log("Token refreshed successfully"),Py("access_token",p,1),this.isAuthenticated=!0,p}catch(h){throw console.error("Error refreshing token:",{status:(e=h.response)==null?void 0:e.status,data:(n=h.response)==null?void 0:n.data}),(((s=h.response)==null?void 0:s.status)===401||((l=h.response)==null?void 0:l.status)===403)&&(console.log("Token refresh failed with auth error, logging out"),await this.logout()),h}},async fetchConcessionnaires(){this.loading=!0;try{const e=await gt.get("/users/",{params:{role:"dealer"}});this.concessionnaires=e.data}catch(e){throw this.error="Erreur lors de la rcupration des concessionnaires",e}finally{this.loading=!1}},async setConcessionnaire(e,n){this.loading=!0;try{await gt.patch(`/users/${e}/`,{concessionnaire:n}),this.user&&this.user.id===e&&(this.user.dealer=n)}catch(s){throw this.error="Erreur lors de la mise  jour du concessionnaire",s}finally{this.loading=!1}},async createUser(e){this.loading=!0;try{return(await gt.post("/users/",e)).data}catch(n){throw this.error="Erreur lors de la cration de l'utilisateur",n}finally{this.loading=!1}},async updateUserRole(e,n){this.loading=!0;try{const s=await gt.patch(`/users/${e}/`,{role:n});return this.user&&this.user.id===e&&(this.user.user_type=n),s.data}catch(s){throw this.error="Erreur lors de la mise  jour du rle",s}finally{this.loading=!1}},async updateUserEmail(e){var n;this.loading=!0;try{const s=await gt.patch(`/users/${(n=this.user)==null?void 0:n.id}/`,{email:e});return this.user&&(this.user.email=e),s.data}catch(s){throw this.error="Erreur lors de la mise  jour de l'email",s}finally{this.loading=!1}},checkAccess(e){return this.user?e.includes(this.user.user_type):!1}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Ts=typeof document<"u";function xp(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Sy(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&xp(e.default)}const Nt=Object.assign;function Yu(e,n){const s={};for(const l in n){const h=n[l];s[l]=wn(h)?h.map(e):e(h)}return s}const jo=()=>{},wn=Array.isArray,wp=/#/g,By=/&/g,Ay=/\//g,Ty=/=/g,Dy=/\?/g,Lp=/\+/g,Ry=/%5B/g,Oy=/%5D/g,Cp=/%5E/g,Iy=/%60/g,kp=/%7B/g,Fy=/%7C/g,Ep=/%7D/g,Ny=/%20/g;function Xc(e){return encodeURI(""+e).replace(Fy,"|").replace(Ry,"[").replace(Oy,"]")}function zy(e){return Xc(e).replace(kp,"{").replace(Ep,"}").replace(Cp,"^")}function wc(e){return Xc(e).replace(Lp,"%2B").replace(Ny,"+").replace(wp,"%23").replace(By,"%26").replace(Iy,"`").replace(kp,"{").replace(Ep,"}").replace(Cp,"^")}function $y(e){return wc(e).replace(Ty,"%3D")}function Uy(e){return Xc(e).replace(wp,"%23").replace(Dy,"%3F")}function jy(e){return e==null?"":Uy(e).replace(Ay,"%2F")}function Jo(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const Gy=/\/$/,Vy=e=>e.replace(Gy,"");function Qu(e,n,s="/"){let l,h={},p="",f="";const y=n.indexOf("#");let v=n.indexOf("?");return y<v&&y>=0&&(v=-1),v>-1&&(l=n.slice(0,v),p=n.slice(v+1,y>-1?y:n.length),h=e(p)),y>-1&&(l=l||n.slice(0,y),f=n.slice(y,n.length)),l=Ky(l??n,s),{fullPath:l+(p&&"?")+p+f,path:l,query:h,hash:Jo(f)}}function Hy(e,n){const s=n.query?e(n.query):"";return n.path+(s&&"?")+s+(n.hash||"")}function nd(e,n){return!n||!e.toLowerCase().startsWith(n.toLowerCase())?e:e.slice(n.length)||"/"}function Zy(e,n,s){const l=n.matched.length-1,h=s.matched.length-1;return l>-1&&l===h&&$s(n.matched[l],s.matched[h])&&Mp(n.params,s.params)&&e(n.query)===e(s.query)&&n.hash===s.hash}function $s(e,n){return(e.aliasOf||e)===(n.aliasOf||n)}function Mp(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const s in e)if(!qy(e[s],n[s]))return!1;return!0}function qy(e,n){return wn(e)?rd(e,n):wn(n)?rd(n,e):e===n}function rd(e,n){return wn(n)?e.length===n.length&&e.every((s,l)=>s===n[l]):e.length===1&&e[0]===n}function Ky(e,n){if(e.startsWith("/"))return e;if(!e)return n;const s=n.split("/"),l=e.split("/"),h=l[l.length-1];(h===".."||h===".")&&l.push("");let p=s.length-1,f,y;for(f=0;f<l.length;f++)if(y=l[f],y!==".")if(y==="..")p>1&&p--;else break;return s.slice(0,p).join("/")+"/"+l.slice(f).join("/")}const gr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Xo;(function(e){e.pop="pop",e.push="push"})(Xo||(Xo={}));var Go;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Go||(Go={}));function Wy(e){if(!e)if(Ts){const n=document.querySelector("base");e=n&&n.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Vy(e)}const Jy=/^[^#]+#/;function Xy(e,n){return e.replace(Jy,"#")+n}function Yy(e,n){const s=document.documentElement.getBoundingClientRect(),l=e.getBoundingClientRect();return{behavior:n.behavior,left:l.left-s.left-(n.left||0),top:l.top-s.top-(n.top||0)}}const Ul=()=>({left:window.scrollX,top:window.scrollY});function Qy(e){let n;if("el"in e){const s=e.el,l=typeof s=="string"&&s.startsWith("#"),h=typeof s=="string"?l?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!h)return;n=Yy(h,e)}else n=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.scrollX,n.top!=null?n.top:window.scrollY)}function sd(e,n){return(history.state?history.state.position-n:-1)+e}const Lc=new Map;function ev(e,n){Lc.set(e,n)}function tv(e){const n=Lc.get(e);return Lc.delete(e),n}let iv=()=>location.protocol+"//"+location.host;function Pp(e,n){const{pathname:s,search:l,hash:h}=n,p=e.indexOf("#");if(p>-1){let y=h.includes(e.slice(p))?e.slice(p).length:1,v=h.slice(y);return v[0]!=="/"&&(v="/"+v),nd(v,"")}return nd(s,e)+l+h}function nv(e,n,s,l){let h=[],p=[],f=null;const y=({state:G})=>{const W=Pp(e,location),D=s.value,z=n.value;let j=0;if(G){if(s.value=W,n.value=G,f&&f===D){f=null;return}j=z?G.position-z.position:0}else l(W);h.forEach(_e=>{_e(s.value,D,{delta:j,type:Xo.pop,direction:j?j>0?Go.forward:Go.back:Go.unknown})})};function v(){f=s.value}function C(G){h.push(G);const W=()=>{const D=h.indexOf(G);D>-1&&h.splice(D,1)};return p.push(W),W}function M(){const{history:G}=window;G.state&&G.replaceState(Nt({},G.state,{scroll:Ul()}),"")}function P(){for(const G of p)G();p=[],window.removeEventListener("popstate",y),window.removeEventListener("beforeunload",M)}return window.addEventListener("popstate",y),window.addEventListener("beforeunload",M,{passive:!0}),{pauseListeners:v,listen:C,destroy:P}}function od(e,n,s,l=!1,h=!1){return{back:e,current:n,forward:s,replaced:l,position:window.history.length,scroll:h?Ul():null}}function rv(e){const{history:n,location:s}=window,l={value:Pp(e,s)},h={value:n.state};h.value||p(l.value,{back:null,current:l.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function p(v,C,M){const P=e.indexOf("#"),G=P>-1?(s.host&&document.querySelector("base")?e:e.slice(P))+v:iv()+e+v;try{n[M?"replaceState":"pushState"](C,"",G),h.value=C}catch(W){console.error(W),s[M?"replace":"assign"](G)}}function f(v,C){const M=Nt({},n.state,od(h.value.back,v,h.value.forward,!0),C,{position:h.value.position});p(v,M,!0),l.value=v}function y(v,C){const M=Nt({},h.value,n.state,{forward:v,scroll:Ul()});p(M.current,M,!0);const P=Nt({},od(l.value,v,null),{position:M.position+1},C);p(v,P,!1),l.value=v}return{location:l,state:h,push:y,replace:f}}function sv(e){e=Wy(e);const n=rv(e),s=nv(e,n.state,n.location,n.replace);function l(p,f=!0){f||s.pauseListeners(),history.go(p)}const h=Nt({location:"",base:e,go:l,createHref:Xy.bind(null,e)},n,s);return Object.defineProperty(h,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(h,"state",{enumerable:!0,get:()=>n.state.value}),h}function ov(e){return typeof e=="string"||e&&typeof e=="object"}function Sp(e){return typeof e=="string"||typeof e=="symbol"}const Bp=Symbol("");var ad;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(ad||(ad={}));function Us(e,n){return Nt(new Error,{type:e,[Bp]:!0},n)}function Xn(e,n){return e instanceof Error&&Bp in e&&(n==null||!!(e.type&n))}const ld="[^/]+?",av={sensitive:!1,strict:!1,start:!0,end:!0},lv=/[.+*?^${}()[\]/\\]/g;function uv(e,n){const s=Nt({},av,n),l=[];let h=s.start?"^":"";const p=[];for(const C of e){const M=C.length?[]:[90];s.strict&&!C.length&&(h+="/");for(let P=0;P<C.length;P++){const G=C[P];let W=40+(s.sensitive?.25:0);if(G.type===0)P||(h+="/"),h+=G.value.replace(lv,"\\$&"),W+=40;else if(G.type===1){const{value:D,repeatable:z,optional:j,regexp:_e}=G;p.push({name:D,repeatable:z,optional:j});const Be=_e||ld;if(Be!==ld){W+=10;try{new RegExp(`(${Be})`)}catch(Ne){throw new Error(`Invalid custom RegExp for param "${D}" (${Be}): `+Ne.message)}}let ge=z?`((?:${Be})(?:/(?:${Be}))*)`:`(${Be})`;P||(ge=j&&C.length<2?`(?:/${ge})`:"/"+ge),j&&(ge+="?"),h+=ge,W+=20,j&&(W+=-8),z&&(W+=-20),Be===".*"&&(W+=-50)}M.push(W)}l.push(M)}if(s.strict&&s.end){const C=l.length-1;l[C][l[C].length-1]+=.7000000000000001}s.strict||(h+="/?"),s.end?h+="$":s.strict&&!h.endsWith("/")&&(h+="(?:/|$)");const f=new RegExp(h,s.sensitive?"":"i");function y(C){const M=C.match(f),P={};if(!M)return null;for(let G=1;G<M.length;G++){const W=M[G]||"",D=p[G-1];P[D.name]=W&&D.repeatable?W.split("/"):W}return P}function v(C){let M="",P=!1;for(const G of e){(!P||!M.endsWith("/"))&&(M+="/"),P=!1;for(const W of G)if(W.type===0)M+=W.value;else if(W.type===1){const{value:D,repeatable:z,optional:j}=W,_e=D in C?C[D]:"";if(wn(_e)&&!z)throw new Error(`Provided param "${D}" is an array but it is not repeatable (* or + modifiers)`);const Be=wn(_e)?_e.join("/"):_e;if(!Be)if(j)G.length<2&&(M.endsWith("/")?M=M.slice(0,-1):P=!0);else throw new Error(`Missing required param "${D}"`);M+=Be}}return M||"/"}return{re:f,score:l,keys:p,parse:y,stringify:v}}function cv(e,n){let s=0;for(;s<e.length&&s<n.length;){const l=n[s]-e[s];if(l)return l;s++}return e.length<n.length?e.length===1&&e[0]===80?-1:1:e.length>n.length?n.length===1&&n[0]===80?1:-1:0}function Ap(e,n){let s=0;const l=e.score,h=n.score;for(;s<l.length&&s<h.length;){const p=cv(l[s],h[s]);if(p)return p;s++}if(Math.abs(h.length-l.length)===1){if(ud(l))return 1;if(ud(h))return-1}return h.length-l.length}function ud(e){const n=e[e.length-1];return e.length>0&&n[n.length-1]<0}const hv={type:0,value:""},dv=/[a-zA-Z0-9_]/;function fv(e){if(!e)return[[]];if(e==="/")return[[hv]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function n(W){throw new Error(`ERR (${s})/"${C}": ${W}`)}let s=0,l=s;const h=[];let p;function f(){p&&h.push(p),p=[]}let y=0,v,C="",M="";function P(){C&&(s===0?p.push({type:0,value:C}):s===1||s===2||s===3?(p.length>1&&(v==="*"||v==="+")&&n(`A repeatable param (${C}) must be alone in its segment. eg: '/:ids+.`),p.push({type:1,value:C,regexp:M,repeatable:v==="*"||v==="+",optional:v==="*"||v==="?"})):n("Invalid state to consume buffer"),C="")}function G(){C+=v}for(;y<e.length;){if(v=e[y++],v==="\\"&&s!==2){l=s,s=4;continue}switch(s){case 0:v==="/"?(C&&P(),f()):v===":"?(P(),s=1):G();break;case 4:G(),s=l;break;case 1:v==="("?s=2:dv.test(v)?G():(P(),s=0,v!=="*"&&v!=="?"&&v!=="+"&&y--);break;case 2:v===")"?M[M.length-1]=="\\"?M=M.slice(0,-1)+v:s=3:M+=v;break;case 3:P(),s=0,v!=="*"&&v!=="?"&&v!=="+"&&y--,M="";break;default:n("Unknown state");break}}return s===2&&n(`Unfinished custom RegExp for param "${C}"`),P(),f(),h}function pv(e,n,s){const l=uv(fv(e.path),s),h=Nt(l,{record:e,parent:n,children:[],alias:[]});return n&&!h.record.aliasOf==!n.record.aliasOf&&n.children.push(h),h}function mv(e,n){const s=[],l=new Map;n=fd({strict:!1,end:!0,sensitive:!1},n);function h(P){return l.get(P)}function p(P,G,W){const D=!W,z=hd(P);z.aliasOf=W&&W.record;const j=fd(n,P),_e=[z];if("alias"in P){const Ne=typeof P.alias=="string"?[P.alias]:P.alias;for(const Ue of Ne)_e.push(hd(Nt({},z,{components:W?W.record.components:z.components,path:Ue,aliasOf:W?W.record:z})))}let Be,ge;for(const Ne of _e){const{path:Ue}=Ne;if(G&&Ue[0]!=="/"){const fe=G.record.path,Pe=fe[fe.length-1]==="/"?"":"/";Ne.path=G.record.path+(Ue&&Pe+Ue)}if(Be=pv(Ne,G,j),W?W.alias.push(Be):(ge=ge||Be,ge!==Be&&ge.alias.push(Be),D&&P.name&&!dd(Be)&&f(P.name)),Tp(Be)&&v(Be),z.children){const fe=z.children;for(let Pe=0;Pe<fe.length;Pe++)p(fe[Pe],Be,W&&W.children[Pe])}W=W||Be}return ge?()=>{f(ge)}:jo}function f(P){if(Sp(P)){const G=l.get(P);G&&(l.delete(P),s.splice(s.indexOf(G),1),G.children.forEach(f),G.alias.forEach(f))}else{const G=s.indexOf(P);G>-1&&(s.splice(G,1),P.record.name&&l.delete(P.record.name),P.children.forEach(f),P.alias.forEach(f))}}function y(){return s}function v(P){const G=yv(P,s);s.splice(G,0,P),P.record.name&&!dd(P)&&l.set(P.record.name,P)}function C(P,G){let W,D={},z,j;if("name"in P&&P.name){if(W=l.get(P.name),!W)throw Us(1,{location:P});j=W.record.name,D=Nt(cd(G.params,W.keys.filter(ge=>!ge.optional).concat(W.parent?W.parent.keys.filter(ge=>ge.optional):[]).map(ge=>ge.name)),P.params&&cd(P.params,W.keys.map(ge=>ge.name))),z=W.stringify(D)}else if(P.path!=null)z=P.path,W=s.find(ge=>ge.re.test(z)),W&&(D=W.parse(z),j=W.record.name);else{if(W=G.name?l.get(G.name):s.find(ge=>ge.re.test(G.path)),!W)throw Us(1,{location:P,currentLocation:G});j=W.record.name,D=Nt({},G.params,P.params),z=W.stringify(D)}const _e=[];let Be=W;for(;Be;)_e.unshift(Be.record),Be=Be.parent;return{name:j,path:z,params:D,matched:_e,meta:_v(_e)}}e.forEach(P=>p(P));function M(){s.length=0,l.clear()}return{addRoute:p,resolve:C,removeRoute:f,clearRoutes:M,getRoutes:y,getRecordMatcher:h}}function cd(e,n){const s={};for(const l of n)l in e&&(s[l]=e[l]);return s}function hd(e){const n={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:gv(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(n,"mods",{value:{}}),n}function gv(e){const n={},s=e.props||!1;if("component"in e)n.default=s;else for(const l in e.components)n[l]=typeof s=="object"?s[l]:s;return n}function dd(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function _v(e){return e.reduce((n,s)=>Nt(n,s.meta),{})}function fd(e,n){const s={};for(const l in e)s[l]=l in n?n[l]:e[l];return s}function yv(e,n){let s=0,l=n.length;for(;s!==l;){const p=s+l>>1;Ap(e,n[p])<0?l=p:s=p+1}const h=vv(e);return h&&(l=n.lastIndexOf(h,l-1)),l}function vv(e){let n=e;for(;n=n.parent;)if(Tp(n)&&Ap(e,n)===0)return n}function Tp({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function bv(e){const n={};if(e===""||e==="?")return n;const l=(e[0]==="?"?e.slice(1):e).split("&");for(let h=0;h<l.length;++h){const p=l[h].replace(Lp," "),f=p.indexOf("="),y=Jo(f<0?p:p.slice(0,f)),v=f<0?null:Jo(p.slice(f+1));if(y in n){let C=n[y];wn(C)||(C=n[y]=[C]),C.push(v)}else n[y]=v}return n}function pd(e){let n="";for(let s in e){const l=e[s];if(s=$y(s),l==null){l!==void 0&&(n+=(n.length?"&":"")+s);continue}(wn(l)?l.map(p=>p&&wc(p)):[l&&wc(l)]).forEach(p=>{p!==void 0&&(n+=(n.length?"&":"")+s,p!=null&&(n+="="+p))})}return n}function xv(e){const n={};for(const s in e){const l=e[s];l!==void 0&&(n[s]=wn(l)?l.map(h=>h==null?null:""+h):l==null?l:""+l)}return n}const wv=Symbol(""),md=Symbol(""),jl=Symbol(""),Yc=Symbol(""),Cc=Symbol("");function Bo(){let e=[];function n(l){return e.push(l),()=>{const h=e.indexOf(l);h>-1&&e.splice(h,1)}}function s(){e=[]}return{add:n,list:()=>e.slice(),reset:s}}function br(e,n,s,l,h,p=f=>f()){const f=l&&(l.enterCallbacks[h]=l.enterCallbacks[h]||[]);return()=>new Promise((y,v)=>{const C=G=>{G===!1?v(Us(4,{from:s,to:n})):G instanceof Error?v(G):ov(G)?v(Us(2,{from:n,to:G})):(f&&l.enterCallbacks[h]===f&&typeof G=="function"&&f.push(G),y())},M=p(()=>e.call(l&&l.instances[h],n,s,C));let P=Promise.resolve(M);e.length<3&&(P=P.then(C)),P.catch(G=>v(G))})}function ec(e,n,s,l,h=p=>p()){const p=[];for(const f of e)for(const y in f.components){let v=f.components[y];if(!(n!=="beforeRouteEnter"&&!f.instances[y]))if(xp(v)){const M=(v.__vccOpts||v)[n];M&&p.push(br(M,s,l,f,y,h))}else{let C=v();p.push(()=>C.then(M=>{if(!M)throw new Error(`Couldn't resolve component "${y}" at "${f.path}"`);const P=Sy(M)?M.default:M;f.mods[y]=M,f.components[y]=P;const W=(P.__vccOpts||P)[n];return W&&br(W,s,l,f,y,h)()}))}}return p}function gd(e){const n=fn(jl),s=fn(Yc),l=Ct(()=>{const v=Mt(e.to);return n.resolve(v)}),h=Ct(()=>{const{matched:v}=l.value,{length:C}=v,M=v[C-1],P=s.matched;if(!M||!P.length)return-1;const G=P.findIndex($s.bind(null,M));if(G>-1)return G;const W=_d(v[C-2]);return C>1&&_d(M)===W&&P[P.length-1].path!==W?P.findIndex($s.bind(null,v[C-2])):G}),p=Ct(()=>h.value>-1&&Ev(s.params,l.value.params)),f=Ct(()=>h.value>-1&&h.value===s.matched.length-1&&Mp(s.params,l.value.params));function y(v={}){if(kv(v)){const C=n[Mt(e.replace)?"replace":"push"](Mt(e.to)).catch(jo);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>C),C}return Promise.resolve()}return{route:l,href:Ct(()=>l.value.href),isActive:p,isExactActive:f,navigate:y}}function Lv(e){return e.length===1?e[0]:e}const Cv=Ki({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:gd,setup(e,{slots:n}){const s=nr(gd(e)),{options:l}=fn(jl),h=Ct(()=>({[yd(e.activeClass,l.linkActiveClass,"router-link-active")]:s.isActive,[yd(e.exactActiveClass,l.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const p=n.default&&Lv(n.default(s));return e.custom?p:$f("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:h.value},p)}}}),nl=Cv;function kv(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const n=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return e.preventDefault&&e.preventDefault(),!0}}function Ev(e,n){for(const s in n){const l=n[s],h=e[s];if(typeof l=="string"){if(l!==h)return!1}else if(!wn(h)||h.length!==l.length||l.some((p,f)=>p!==h[f]))return!1}return!0}function _d(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const yd=(e,n,s)=>e??n??s,Mv=Ki({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:n,slots:s}){const l=fn(Cc),h=Ct(()=>e.route||l.value),p=fn(md,0),f=Ct(()=>{let C=Mt(p);const{matched:M}=h.value;let P;for(;(P=M[C])&&!P.components;)C++;return C}),y=Ct(()=>h.value.matched[f.value]);Ja(md,Ct(()=>f.value+1)),Ja(wv,y),Ja(Cc,h);const v=qe();return zi(()=>[v.value,y.value,e.name],([C,M,P],[G,W,D])=>{M&&(M.instances[P]=C,W&&W!==M&&C&&C===G&&(M.leaveGuards.size||(M.leaveGuards=W.leaveGuards),M.updateGuards.size||(M.updateGuards=W.updateGuards))),C&&M&&(!W||!$s(M,W)||!G)&&(M.enterCallbacks[P]||[]).forEach(z=>z(C))},{flush:"post"}),()=>{const C=h.value,M=e.name,P=y.value,G=P&&P.components[M];if(!G)return vd(s.default,{Component:G,route:C});const W=P.props[M],D=W?W===!0?C.params:typeof W=="function"?W(C):W:null,j=$f(G,Nt({},D,n,{onVnodeUnmounted:_e=>{_e.component.isUnmounted&&(P.instances[M]=null)},ref:v}));return vd(s.default,{Component:j,route:C})||j}}});function vd(e,n){if(!e)return null;const s=e(n);return s.length===1?s[0]:s}const Dp=Mv;function Pv(e){const n=mv(e.routes,e),s=e.parseQuery||bv,l=e.stringifyQuery||pd,h=e.history,p=Bo(),f=Bo(),y=Bo(),v=Qm(gr);let C=gr;Ts&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const M=Yu.bind(null,ke=>""+ke),P=Yu.bind(null,jy),G=Yu.bind(null,Jo);function W(ke,Ke){let Ze,Ye;return Sp(ke)?(Ze=n.getRecordMatcher(ke),Ye=Ke):Ye=ke,n.addRoute(Ye,Ze)}function D(ke){const Ke=n.getRecordMatcher(ke);Ke&&n.removeRoute(Ke)}function z(){return n.getRoutes().map(ke=>ke.record)}function j(ke){return!!n.getRecordMatcher(ke)}function _e(ke,Ke){if(Ke=Nt({},Ke||v.value),typeof ke=="string"){const ae=Qu(s,ke,Ke.path),Fe=n.resolve({path:ae.path},Ke),$e=h.createHref(ae.fullPath);return Nt(ae,Fe,{params:G(Fe.params),hash:Jo(ae.hash),redirectedFrom:void 0,href:$e})}let Ze;if(ke.path!=null)Ze=Nt({},ke,{path:Qu(s,ke.path,Ke.path).path});else{const ae=Nt({},ke.params);for(const Fe in ae)ae[Fe]==null&&delete ae[Fe];Ze=Nt({},ke,{params:P(ae)}),Ke.params=P(Ke.params)}const Ye=n.resolve(Ze,Ke),tt=ke.hash||"";Ye.params=M(G(Ye.params));const U=Hy(l,Nt({},ke,{hash:zy(tt),path:Ye.path})),H=h.createHref(U);return Nt({fullPath:U,hash:tt,query:l===pd?xv(ke.query):ke.query||{}},Ye,{redirectedFrom:void 0,href:H})}function Be(ke){return typeof ke=="string"?Qu(s,ke,v.value.path):Nt({},ke)}function ge(ke,Ke){if(C!==ke)return Us(8,{from:Ke,to:ke})}function Ne(ke){return Pe(ke)}function Ue(ke){return Ne(Nt(Be(ke),{replace:!0}))}function fe(ke){const Ke=ke.matched[ke.matched.length-1];if(Ke&&Ke.redirect){const{redirect:Ze}=Ke;let Ye=typeof Ze=="function"?Ze(ke):Ze;return typeof Ye=="string"&&(Ye=Ye.includes("?")||Ye.includes("#")?Ye=Be(Ye):{path:Ye},Ye.params={}),Nt({query:ke.query,hash:ke.hash,params:Ye.path!=null?{}:ke.params},Ye)}}function Pe(ke,Ke){const Ze=C=_e(ke),Ye=v.value,tt=ke.state,U=ke.force,H=ke.replace===!0,ae=fe(Ze);if(ae)return Pe(Nt(Be(ae),{state:typeof ae=="object"?Nt({},tt,ae.state):tt,force:U,replace:H}),Ke||Ze);const Fe=Ze;Fe.redirectedFrom=Ke;let $e;return!U&&Zy(l,Ye,Ze)&&($e=Us(16,{to:Fe,from:Ye}),be(Ye,Ye,!0,!1)),($e?Promise.resolve($e):pe(Fe,Ye)).catch(le=>Xn(le)?Xn(le,2)?le:re(le):Z(le,Fe,Ye)).then(le=>{if(le){if(Xn(le,2))return Pe(Nt({replace:H},Be(le.to),{state:typeof le.to=="object"?Nt({},tt,le.to.state):tt,force:U}),Ke||Fe)}else le=De(Fe,Ye,!0,H,tt);return ee(Fe,Ye,le),le})}function F(ke,Ke){const Ze=ge(ke,Ke);return Ze?Promise.reject(Ze):Promise.resolve()}function X(ke){const Ke=et.values().next().value;return Ke&&typeof Ke.runWithContext=="function"?Ke.runWithContext(ke):ke()}function pe(ke,Ke){let Ze;const[Ye,tt,U]=Sv(ke,Ke);Ze=ec(Ye.reverse(),"beforeRouteLeave",ke,Ke);for(const ae of Ye)ae.leaveGuards.forEach(Fe=>{Ze.push(br(Fe,ke,Ke))});const H=F.bind(null,ke,Ke);return Ze.push(H),Xe(Ze).then(()=>{Ze=[];for(const ae of p.list())Ze.push(br(ae,ke,Ke));return Ze.push(H),Xe(Ze)}).then(()=>{Ze=ec(tt,"beforeRouteUpdate",ke,Ke);for(const ae of tt)ae.updateGuards.forEach(Fe=>{Ze.push(br(Fe,ke,Ke))});return Ze.push(H),Xe(Ze)}).then(()=>{Ze=[];for(const ae of U)if(ae.beforeEnter)if(wn(ae.beforeEnter))for(const Fe of ae.beforeEnter)Ze.push(br(Fe,ke,Ke));else Ze.push(br(ae.beforeEnter,ke,Ke));return Ze.push(H),Xe(Ze)}).then(()=>(ke.matched.forEach(ae=>ae.enterCallbacks={}),Ze=ec(U,"beforeRouteEnter",ke,Ke,X),Ze.push(H),Xe(Ze))).then(()=>{Ze=[];for(const ae of f.list())Ze.push(br(ae,ke,Ke));return Ze.push(H),Xe(Ze)}).catch(ae=>Xn(ae,8)?ae:Promise.reject(ae))}function ee(ke,Ke,Ze){y.list().forEach(Ye=>X(()=>Ye(ke,Ke,Ze)))}function De(ke,Ke,Ze,Ye,tt){const U=ge(ke,Ke);if(U)return U;const H=Ke===gr,ae=Ts?history.state:{};Ze&&(Ye||H?h.replace(ke.fullPath,Nt({scroll:H&&ae&&ae.scroll},tt)):h.push(ke.fullPath,tt)),v.value=ke,be(ke,Ke,Ze,H),re()}let Ae;function ie(){Ae||(Ae=h.listen((ke,Ke,Ze)=>{if(!nt.listening)return;const Ye=_e(ke),tt=fe(Ye);if(tt){Pe(Nt(tt,{replace:!0,force:!0}),Ye).catch(jo);return}C=Ye;const U=v.value;Ts&&ev(sd(U.fullPath,Ze.delta),Ul()),pe(Ye,U).catch(H=>Xn(H,12)?H:Xn(H,2)?(Pe(Nt(Be(H.to),{force:!0}),Ye).then(ae=>{Xn(ae,20)&&!Ze.delta&&Ze.type===Xo.pop&&h.go(-1,!1)}).catch(jo),Promise.reject()):(Ze.delta&&h.go(-Ze.delta,!1),Z(H,Ye,U))).then(H=>{H=H||De(Ye,U,!1),H&&(Ze.delta&&!Xn(H,8)?h.go(-Ze.delta,!1):Ze.type===Xo.pop&&Xn(H,20)&&h.go(-1,!1)),ee(Ye,U,H)}).catch(jo)}))}let Le=Bo(),Re=Bo(),Ee;function Z(ke,Ke,Ze){re(ke);const Ye=Re.list();return Ye.length?Ye.forEach(tt=>tt(ke,Ke,Ze)):console.error(ke),Promise.reject(ke)}function te(){return Ee&&v.value!==gr?Promise.resolve():new Promise((ke,Ke)=>{Le.add([ke,Ke])})}function re(ke){return Ee||(Ee=!ke,ie(),Le.list().forEach(([Ke,Ze])=>ke?Ze(ke):Ke()),Le.reset()),ke}function be(ke,Ke,Ze,Ye){const{scrollBehavior:tt}=e;if(!Ts||!tt)return Promise.resolve();const U=!Ze&&tv(sd(ke.fullPath,0))||(Ye||!Ze)&&history.state&&history.state.scroll||null;return Fs().then(()=>tt(ke,Ke,U)).then(H=>H&&Qy(H)).catch(H=>Z(H,ke,Ke))}const me=ke=>h.go(ke);let Je;const et=new Set,nt={currentRoute:v,listening:!0,addRoute:W,removeRoute:D,clearRoutes:n.clearRoutes,hasRoute:j,getRoutes:z,resolve:_e,options:e,push:Ne,replace:Ue,go:me,back:()=>me(-1),forward:()=>me(1),beforeEach:p.add,beforeResolve:f.add,afterEach:y.add,onError:Re.add,isReady:te,install(ke){const Ke=this;ke.component("RouterLink",nl),ke.component("RouterView",Dp),ke.config.globalProperties.$router=Ke,Object.defineProperty(ke.config.globalProperties,"$route",{enumerable:!0,get:()=>Mt(v)}),Ts&&!Je&&v.value===gr&&(Je=!0,Ne(h.location).catch(tt=>{}));const Ze={};for(const tt in gr)Object.defineProperty(Ze,tt,{get:()=>v.value[tt],enumerable:!0});ke.provide(jl,Ke),ke.provide(Yc,sf(Ze)),ke.provide(Cc,v);const Ye=ke.unmount;et.add(ke),ke.unmount=function(){et.delete(ke),et.size<1&&(C=gr,Ae&&Ae(),Ae=null,v.value=gr,Je=!1,Ee=!1),Ye()}}};function Xe(ke){return ke.reduce((Ke,Ze)=>Ke.then(()=>X(Ze)),Promise.resolve())}return nt}function Sv(e,n){const s=[],l=[],h=[],p=Math.max(n.matched.length,e.matched.length);for(let f=0;f<p;f++){const y=n.matched[f];y&&(e.matched.find(C=>$s(C,y))?l.push(y):s.push(y));const v=e.matched[f];v&&(n.matched.find(C=>$s(C,v))||h.push(v))}return[s,l,h]}function Hs(){return fn(jl)}function mC(e){return fn(Yc)}var ir=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Bv(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var Op=Bv,Av=typeof ir=="object"&&ir&&ir.Object===Object&&ir,Tv=Av,Dv=Tv,Rv=typeof self=="object"&&self&&self.Object===Object&&self,Ov=Dv||Rv||Function("return this")(),Ip=Ov,Iv=Ip,Fv=function(){return Iv.Date.now()},Nv=Fv,zv=/\s/;function $v(e){for(var n=e.length;n--&&zv.test(e.charAt(n)););return n}var Uv=$v,jv=Uv,Gv=/^\s+/;function Vv(e){return e&&e.slice(0,jv(e)+1).replace(Gv,"")}var Hv=Vv,Zv=Ip,qv=Zv.Symbol,Fp=qv,bd=Fp,Np=Object.prototype,Kv=Np.hasOwnProperty,Wv=Np.toString,Ao=bd?bd.toStringTag:void 0;function Jv(e){var n=Kv.call(e,Ao),s=e[Ao];try{e[Ao]=void 0;var l=!0}catch{}var h=Wv.call(e);return l&&(n?e[Ao]=s:delete e[Ao]),h}var Xv=Jv,Yv=Object.prototype,Qv=Yv.toString;function e4(e){return Qv.call(e)}var t4=e4,xd=Fp,i4=Xv,n4=t4,r4="[object Null]",s4="[object Undefined]",wd=xd?xd.toStringTag:void 0;function o4(e){return e==null?e===void 0?s4:r4:wd&&wd in Object(e)?i4(e):n4(e)}var a4=o4;function l4(e){return e!=null&&typeof e=="object"}var u4=l4,c4=a4,h4=u4,d4="[object Symbol]";function f4(e){return typeof e=="symbol"||h4(e)&&c4(e)==d4}var p4=f4,m4=Hv,Ld=Op,g4=p4,Cd=NaN,_4=/^[-+]0x[0-9a-f]+$/i,y4=/^0b[01]+$/i,v4=/^0o[0-7]+$/i,b4=parseInt;function x4(e){if(typeof e=="number")return e;if(g4(e))return Cd;if(Ld(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=Ld(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=m4(e);var s=y4.test(e);return s||v4.test(e)?b4(e.slice(2),s?2:8):_4.test(e)?Cd:+e}var w4=x4,L4=Op,tc=Nv,kd=w4,C4="Expected a function",k4=Math.max,E4=Math.min;function M4(e,n,s){var l,h,p,f,y,v,C=0,M=!1,P=!1,G=!0;if(typeof e!="function")throw new TypeError(C4);n=kd(n)||0,L4(s)&&(M=!!s.leading,P="maxWait"in s,p=P?k4(kd(s.maxWait)||0,n):p,G="trailing"in s?!!s.trailing:G);function W(fe){var Pe=l,F=h;return l=h=void 0,C=fe,f=e.apply(F,Pe),f}function D(fe){return C=fe,y=setTimeout(_e,n),M?W(fe):f}function z(fe){var Pe=fe-v,F=fe-C,X=n-Pe;return P?E4(X,p-F):X}function j(fe){var Pe=fe-v,F=fe-C;return v===void 0||Pe>=n||Pe<0||P&&F>=p}function _e(){var fe=tc();if(j(fe))return Be(fe);y=setTimeout(_e,z(fe))}function Be(fe){return y=void 0,G&&l?W(fe):(l=h=void 0,f)}function ge(){y!==void 0&&clearTimeout(y),C=0,l=v=h=y=void 0}function Ne(){return y===void 0?f:Be(tc())}function Ue(){var fe=tc(),Pe=j(fe);if(l=arguments,h=this,v=fe,Pe){if(y===void 0)return D(v);if(P)return clearTimeout(y),y=setTimeout(_e,n),W(v)}return y===void 0&&(y=setTimeout(_e,n)),f}return Ue.cancel=ge,Ue.flush=Ne,Ue}var P4=M4;const S4=Rp(P4),B4={class:"relative"},A4={key:0,class:"absolute w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto z-[1001]"},T4=["onClick"],D4=Ki({__name:"SearchBar",emits:["select-location"],setup(e,{emit:n}){const s=qe(""),l=qe([]),h=n,p=S4(async v=>{if(v.length<3){l.value=[];return}try{const M=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(v)}`)).json();l.value=M}catch(C){console.error("Erreur lors de la recherche d'adresse:",C),l.value=[]}},300);function f(){p(s.value)}function y(v){s.value=v.display_name,l.value=[],h("select-location",{lat:parseFloat(v.lat),lng:parseFloat(v.lon)})}return(v,C)=>(ve(),Ce("div",B4,[St(w("input",{"onUpdate:modelValue":C[0]||(C[0]=M=>s.value=M),onInput:f,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[Xt,s.value]]),l.value.length>0?(ve(),Ce("div",A4,[(ve(!0),Ce(kt,null,It(l.value,M=>(ve(),Ce("div",{key:M.place_id,onClick:P=>y(M),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},Ve(M.display_name),9,T4))),128))])):ft("",!0)]))}}),zp=(e,n)=>{const s=e.__vccOpts||e;for(const[l,h]of n)s[l]=h;return s},R4=zp(D4,[["__scopeId","data-v-4cda7c14"]]),O4={class:"h-screen flex flex-col"},I4={key:0,class:"bg-white shadow-sm z-[2000]"},F4={class:"mx-auto px-4 sm:px-6 lg:px-8"},N4={class:"flex h-16 items-center justify-between"},z4={class:"flex items-center space-x-8"},$4={class:"hidden md:flex space-x-6"},U4={class:"flex-1 max-w-2xl mx-8"},j4={class:"flex items-center space-x-4"},G4={class:"relative"},V4={class:"flex flex-col items-end"},H4={class:"text-sm font-medium text-gray-700"},Z4={key:0,class:"text-xs text-gray-500"},q4=["src","alt"],K4={key:0,class:"absolute right-0 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3000]"},W4={class:"flex-1 overflow-auto"},J4=Ki({__name:"App",setup(e){const n=Hs(),s=Ui(),l=qe(!1),h=Ct(()=>{const z=s.user;if(!z)return"";const j=`${z.first_name} ${z.last_name.toUpperCase()}`;return z.company_name?`${j} (${z.company_name})`:j}),p=Ct(()=>{var j;const z=(j=s.user)==null?void 0:j.user_type;switch(console.log("User type:",z),z){case"admin":return"Accs administrateur";case"dealer":return"Accs concessionnaire";case"client":return"Accs client";default:return""}}),f=Ct(()=>{var z;return((z=s.user)==null?void 0:z.user_type)==="admin"}),y=qe(""),v=Ct(()=>s.isAuthenticated),C=[{name:"Carte",to:"/"},{name:"Plans",to:"/plans"}],M=Ct(()=>{var j;if(!v.value)return[];const z=[...C];return f.value?z.push({name:"Utilisateurs",to:"/users"}):((j=s.user)==null?void 0:j.user_type)==="dealer"&&z.push({name:"Clients",to:"/clients"}),z}),P=Ct(()=>v.value?[{name:"Mon profil",to:"/profile"}]:[]);async function G(){try{await s.logout(),n.push("/login")}catch(z){console.error("Erreur lors de la dconnexion:",z)}}function W(z){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:z.lat,lng:z.lng,zoom:16}}))}Er(async()=>{console.log("App mounted, checking auth...");try{localStorage.getItem("token")?(console.log("Token found, checking auth..."),await s.checkAuth(),await s.fetchUserProfile()):console.log("No token found")}catch(z){console.error("Auth check error:",z),n.push("/login")}});const D=Ct(()=>{const z="IrrigationDesign";if(!v.value)return`${z} - Connexion`;const j=n.currentRoute.value,Be={home:"Carte",plans:"Plans",users:"Utilisateurs",profile:"Mon profil",selectDealer:"Slection du concessionnaire",changePassword:"Changement de mot de passe",map:"Carte"}[j.name]||"";return Be?`${z} - ${Be}`:z});return zi(D,z=>{document.title=z},{immediate:!0}),(z,j)=>(ve(),Ce("div",O4,[v.value?(ve(),Ce("header",I4,[w("nav",F4,[w("div",N4,[w("div",z4,[ri(Mt(nl),{to:"/",class:"text-xl font-semibold text-primary-600"},{default:Fo(()=>j[2]||(j[2]=[ni(" IrrigationDesign ")])),_:1}),w("div",$4,[(ve(!0),Ce(kt,null,It(M.value,_e=>(ve(),Yr(Mt(nl),{key:_e.name,to:_e.to,class:$i(["text-sm font-medium transition-colors duration-200",[z.$route.path===_e.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Fo(()=>[ni(Ve(_e.name),1)]),_:2},1032,["to","class"]))),128))])]),w("div",U4,[ri(R4,{onSelectLocation:W})]),w("div",j4,[j[3]||(j[3]=w("button",{class:"p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},[w("span",{class:"sr-only"},"Voir les notifications"),w("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})])],-1)),w("div",G4,[w("button",{onClick:j[0]||(j[0]=_e=>l.value=!l.value),class:"flex items-center space-x-3 focus:outline-none"},[w("div",V4,[w("span",H4,Ve(h.value),1),p.value?(ve(),Ce("span",Z4,Ve(p.value),1)):ft("",!0)]),w("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:y.value||"https://ui-avatars.com/api/?name="+encodeURIComponent(h.value),alt:h.value},null,8,q4)]),l.value?(ve(),Ce("div",K4,[(ve(!0),Ce(kt,null,It(P.value,_e=>(ve(),Yr(Mt(nl),{key:_e.name,to:_e.to,class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:j[1]||(j[1]=Be=>l.value=!1)},{default:Fo(()=>[ni(Ve(_e.name),1)]),_:2},1032,["to"]))),128)),w("button",{onClick:G,class:"block w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-gray-50"}," Dconnexion ")])):ft("",!0)])])])])])):ft("",!0),w("main",W4,[ri(Mt(Dp))])]))}}),X4="modulepreload",Y4=function(e){return"/static/frontend/"+e},Ed={},qa=function(n,s,l){let h=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),y=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));h=Promise.allSettled(s.map(v=>{if(v=Y4(v),v in Ed)return;Ed[v]=!0;const C=v.endsWith(".css"),M=C?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${M}`))return;const P=document.createElement("link");if(P.rel=C?"stylesheet":X4,C||(P.as="script"),P.crossOrigin="",P.href=v,y&&P.setAttribute("nonce",y),document.head.appendChild(P),C)return new Promise((G,W)=>{P.addEventListener("load",G),P.addEventListener("error",()=>W(new Error(`Unable to preload CSS for ${v}`)))})}))}function p(f){const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=f,window.dispatchEvent(y),!y.defaultPrevented)throw f}return h.then(f=>{for(const y of f||[])y.status==="rejected"&&p(y.reason);return n().catch(p)})},Q4={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},e1={class:"max-w-md w-full space-y-8"},t1={class:"space-y-4"},i1={class:"mt-1"},n1={class:"mt-1"},r1={class:"mt-1"},s1={key:0,class:"rounded-md bg-red-50 p-4"},o1={class:"flex"},a1={class:"ml-3"},l1={class:"text-sm font-medium text-red-800"},u1={key:1,class:"rounded-md bg-yellow-50 p-4"},c1={class:"flex"},h1={class:"ml-3"},d1={class:"mt-2 text-sm text-yellow-700"},f1={class:"list-disc pl-5 space-y-1"},p1=["disabled"],m1={class:"absolute left-0 inset-y-0 flex items-center pl-3"},g1={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},_1={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},y1=Ki({__name:"ChangePasswordForm",setup(e){const n=Hs(),s=Ui(),l=nr({oldPassword:"",newPassword:"",confirmPassword:""}),h=qe(!1),p=qe("");Er(()=>{var C,M;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:s.isAuthenticated,userId:(C=s.user)==null?void 0:C.id,mustChangePassword:(M=s.user)==null?void 0:M.must_change_password})});const f=Ct(()=>{const C=[];return l.newPassword&&l.newPassword.length<8&&C.push("Le nouveau mot de passe doit contenir au moins 8 caractres"),l.newPassword&&l.confirmPassword&&l.newPassword!==l.confirmPassword&&C.push("Les mots de passe ne correspondent pas"),C}),y=Ct(()=>l.oldPassword.length>0&&l.newPassword.length>=8&&l.newPassword===l.confirmPassword);async function v(){var C,M,P,G,W,D,z,j;if(!y.value){p.value="Veuillez corriger les erreurs avant de continuer";return}if(!((C=s.user)!=null&&C.id)){p.value="Erreur : utilisateur non identifi";return}h.value=!0,p.value="";try{console.log("Submitting password change..."),await s.changePassword(l.oldPassword,l.newPassword),console.log("Password changed successfully"),n.push("/")}catch(_e){console.error("Password change failed:",_e),(P=(M=_e.response)==null?void 0:M.data)!=null&&P.detail?p.value=_e.response.data.detail:(W=(G=_e.response)==null?void 0:G.data)!=null&&W.old_password?p.value=_e.response.data.old_password[0]:(z=(D=_e.response)==null?void 0:D.data)!=null&&z.password?p.value=_e.response.data.password[0]:((j=_e.response)==null?void 0:j.status)===401?(p.value="Session expire, veuillez vous reconnecter",await s.logout(),n.push("/login")):p.value="Une erreur est survenue lors du changement de mot de passe"}finally{h.value=!1}}return(C,M)=>(ve(),Ce("div",Q4,[w("div",e1,[M[12]||(M[12]=w("div",null,[w("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),w("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de scurit, vous devez changer votre mot de passe. ")],-1)),w("form",{class:"mt-8 space-y-6",onSubmit:Dl(v,["prevent"])},[w("div",t1,[w("div",null,[M[3]||(M[3]=w("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),w("div",i1,[St(w("input",{id:"old-password","onUpdate:modelValue":M[0]||(M[0]=P=>l.oldPassword=P),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[Xt,l.oldPassword]])])]),w("div",null,[M[4]||(M[4]=w("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),w("div",n1,[St(w("input",{id:"new-password","onUpdate:modelValue":M[1]||(M[1]=P=>l.newPassword=P),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[Xt,l.newPassword]])]),M[5]||(M[5]=w("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractres ",-1))]),w("div",null,[M[6]||(M[6]=w("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),w("div",r1,[St(w("input",{id:"confirm-password","onUpdate:modelValue":M[2]||(M[2]=P=>l.confirmPassword=P),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[Xt,l.confirmPassword]])])])]),p.value?(ve(),Ce("div",s1,[w("div",o1,[M[7]||(M[7]=w("div",{class:"flex-shrink-0"},[w("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),w("div",a1,[w("h3",l1,Ve(p.value),1)])])])):ft("",!0),f.value.length>0?(ve(),Ce("div",u1,[w("div",c1,[M[9]||(M[9]=w("div",{class:"flex-shrink-0"},[w("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),w("div",h1,[M[8]||(M[8]=w("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),w("div",d1,[w("ul",f1,[(ve(!0),Ce(kt,null,It(f.value,(P,G)=>(ve(),Ce("li",{key:G},Ve(P),1))),128))])])])])])):ft("",!0),w("div",null,[w("button",{type:"submit",disabled:h.value||!y.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[w("span",m1,[h.value?(ve(),Ce("svg",_1,M[11]||(M[11]=[w("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),w("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(ve(),Ce("svg",g1,M[10]||(M[10]=[w("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),ni(" "+Ve(h.value?"Modification en cours...":"Changer le mot de passe"),1)],8,p1)])],32)])]))}}),v1="/static/frontend/assets/logo.svg",b1={class:"min-h-screen bg-white from-blue-50 to-white flex flex-col justify-center py-12 sm:px-6 lg:px-8"},x1={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},w1={class:"bg-white py-8 px-6 shadow-lg rounded-md sm:px-10"},L1={key:0,class:"rounded-md bg-red-50 p-4"},C1={class:"flex"},k1={class:"ml-3"},E1={class:"text-sm font-medium text-red-800"},M1={class:"mt-1"},P1={class:"mt-1 relative"},S1=["type"],B1={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},A1={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},T1={class:"flex items-center justify-between"},D1={class:"flex items-center"},R1={class:"text-sm"},O1=["disabled"],I1={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},F1=Ki({__name:"LoginView",setup(e){const n=Hs(),s=Ui(),l=qe(!1),h=qe(null),p=qe(!1),f=nr({username:"",password:"",rememberMe:!1});Er(()=>{var v;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE),(v=window.INITIAL_STATE)!=null&&v.isAuthenticated&&(console.log("User is authenticated, redirecting to home"),n.push("/"))});async function y(){var v,C,M,P,G,W;l.value=!0,h.value=null;try{if(!f.username||!f.password){h.value="Veuillez remplir tous les champs";return}await s.login(f.username,f.password),(v=s.user)!=null&&v.must_change_password?n.push("/change-password"):n.push("/")}catch(D){console.error("Login error:",D),h.value=((M=(C=D==null?void 0:D.response)==null?void 0:C.data)==null?void 0:M.detail)||((W=(G=(P=D==null?void 0:D.response)==null?void 0:P.data)==null?void 0:G.non_field_errors)==null?void 0:W[0])||(D==null?void 0:D.message)||"Erreur lors de la connexion"}finally{l.value=!1}}return(v,C)=>{const M=k0("router-link");return ve(),Ce("div",b1,[C[12]||(C[12]=w("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[w("img",{src:v1,alt:"IrrigationDesign Logo",class:"mx-auto h-40 w-auto transition-transform duration-300 hover:scale-110"}),w("h2",{class:"mt-2 text-center text-3xl font-bold text-gray-800"}," IrrigationDesign "),w("p",{class:"mt-2 text-center text-sm text-gray-600"}," Connectez-vous pour accder  votre espace ")],-1)),w("div",x1,[w("div",w1,[w("form",{class:"space-y-6",onSubmit:Dl(y,["prevent"])},[h.value?(ve(),Ce("div",L1,[w("div",C1,[C[4]||(C[4]=w("div",{class:"flex-shrink-0"},[w("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),w("div",k1,[w("h3",E1,Ve(h.value),1)])])])):ft("",!0),w("div",null,[C[5]||(C[5]=w("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),w("div",M1,[St(w("input",{id:"username","onUpdate:modelValue":C[0]||(C[0]=P=>f.username=P),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[Xt,f.username]])])]),w("div",null,[C[8]||(C[8]=w("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),w("div",P1,[St(w("input",{id:"password","onUpdate:modelValue":C[1]||(C[1]=P=>f.password=P),type:p.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,S1),[[Fg,f.password]]),w("button",{type:"button",onClick:C[2]||(C[2]=P=>p.value=!p.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[p.value?(ve(),Ce("svg",B1,C[6]||(C[6]=[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(ve(),Ce("svg",A1,C[7]||(C[7]=[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),w("div",T1,[w("div",D1,[St(w("input",{id:"remember-me","onUpdate:modelValue":C[3]||(C[3]=P=>f.rememberMe=P),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[Gf,f.rememberMe]]),C[9]||(C[9]=w("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),w("div",R1,[ri(M,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Fo(()=>C[10]||(C[10]=[ni(" Mot de passe oubli ? ")])),_:1})])]),w("div",null,[w("button",{type:"submit",disabled:l.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[l.value?(ve(),Ce("svg",I1,C[11]||(C[11]=[w("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),w("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):ft("",!0),ni(" "+Ve(l.value?"Connexion en cours...":"Se connecter"),1)],8,O1)])],32)])])])}}});var kc={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,n){(function(s,l){l(n)})(ir,function(s){var l="1.9.4";function h(t){var o,c,m,x;for(c=1,m=arguments.length;c<m;c++){x=arguments[c];for(o in x)t[o]=x[o]}return t}var p=Object.create||function(){function t(){}return function(o){return t.prototype=o,new t}}();function f(t,o){var c=Array.prototype.slice;if(t.bind)return t.bind.apply(t,c.call(arguments,1));var m=c.call(arguments,2);return function(){return t.apply(o,m.length?m.concat(c.call(arguments)):arguments)}}var y=0;function v(t){return"_leaflet_id"in t||(t._leaflet_id=++y),t._leaflet_id}function C(t,o,c){var m,x,B,K;return K=function(){m=!1,x&&(B.apply(c,x),x=!1)},B=function(){m?x=arguments:(t.apply(c,arguments),setTimeout(K,o),m=!0)},B}function M(t,o,c){var m=o[1],x=o[0],B=m-x;return t===m&&c?t:((t-x)%B+B)%B+x}function P(){return!1}function G(t,o){if(o===!1)return t;var c=Math.pow(10,o===void 0?6:o);return Math.round(t*c)/c}function W(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function D(t){return W(t).split(/\s+/)}function z(t,o){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?p(t.options):{});for(var c in o)t.options[c]=o[c];return t.options}function j(t,o,c){var m=[];for(var x in t)m.push(encodeURIComponent(c?x.toUpperCase():x)+"="+encodeURIComponent(t[x]));return(!o||o.indexOf("?")===-1?"?":"&")+m.join("&")}var _e=/\{ *([\w_ -]+) *\}/g;function Be(t,o){return t.replace(_e,function(c,m){var x=o[m];if(x===void 0)throw new Error("No value provided for variable "+c);return typeof x=="function"&&(x=x(o)),x})}var ge=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function Ne(t,o){for(var c=0;c<t.length;c++)if(t[c]===o)return c;return-1}var Ue="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function fe(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var Pe=0;function F(t){var o=+new Date,c=Math.max(0,16-(o-Pe));return Pe=o+c,window.setTimeout(t,c)}var X=window.requestAnimationFrame||fe("RequestAnimationFrame")||F,pe=window.cancelAnimationFrame||fe("CancelAnimationFrame")||fe("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function ee(t,o,c){if(c&&X===F)t.call(o);else return X.call(window,f(t,o))}function De(t){t&&pe.call(window,t)}var Ae={__proto__:null,extend:h,create:p,bind:f,get lastId(){return y},stamp:v,throttle:C,wrapNum:M,falseFn:P,formatNum:G,trim:W,splitWords:D,setOptions:z,getParamString:j,template:Be,isArray:ge,indexOf:Ne,emptyImageUrl:Ue,requestFn:X,cancelFn:pe,requestAnimFrame:ee,cancelAnimFrame:De};function ie(){}ie.extend=function(t){var o=function(){z(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=o.__super__=this.prototype,m=p(c);m.constructor=o,o.prototype=m;for(var x in this)Object.prototype.hasOwnProperty.call(this,x)&&x!=="prototype"&&x!=="__super__"&&(o[x]=this[x]);return t.statics&&h(o,t.statics),t.includes&&(Le(t.includes),h.apply(null,[m].concat(t.includes))),h(m,t),delete m.statics,delete m.includes,m.options&&(m.options=c.options?p(c.options):{},h(m.options,t.options)),m._initHooks=[],m.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var B=0,K=m._initHooks.length;B<K;B++)m._initHooks[B].call(this)}},o},ie.include=function(t){var o=this.prototype.options;return h(this.prototype,t),t.options&&(this.prototype.options=o,this.mergeOptions(t.options)),this},ie.mergeOptions=function(t){return h(this.prototype.options,t),this},ie.addInitHook=function(t){var o=Array.prototype.slice.call(arguments,1),c=typeof t=="function"?t:function(){this[t].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function Le(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=ge(t)?t:[t];for(var o=0;o<t.length;o++)t[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Re={on:function(t,o,c){if(typeof t=="object")for(var m in t)this._on(m,t[m],o);else{t=D(t);for(var x=0,B=t.length;x<B;x++)this._on(t[x],o,c)}return this},off:function(t,o,c){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var m in t)this._off(m,t[m],o);else{t=D(t);for(var x=arguments.length===1,B=0,K=t.length;B<K;B++)x?this._off(t[B]):this._off(t[B],o,c)}return this},_on:function(t,o,c,m){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(t,o,c)===!1){c===this&&(c=void 0);var x={fn:o,ctx:c};m&&(x.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(x)}},_off:function(t,o,c){var m,x,B;if(this._events&&(m=this._events[t],!!m)){if(arguments.length===1){if(this._firingCount)for(x=0,B=m.length;x<B;x++)m[x].fn=P;delete this._events[t];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var K=this._listens(t,o,c);if(K!==!1){var ue=m[K];this._firingCount&&(ue.fn=P,this._events[t]=m=m.slice()),m.splice(K,1)}}},fire:function(t,o,c){if(!this.listens(t,c))return this;var m=h({},o,{type:t,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var x=this._events[t];if(x){this._firingCount=this._firingCount+1||1;for(var B=0,K=x.length;B<K;B++){var ue=x[B],Me=ue.fn;ue.once&&this.off(t,Me,ue.ctx),Me.call(ue.ctx||this,m)}this._firingCount--}}return c&&this._propagateEvent(m),this},listens:function(t,o,c,m){typeof t!="string"&&console.warn('"string" type argument expected');var x=o;typeof o!="function"&&(m=!!o,x=void 0,c=void 0);var B=this._events&&this._events[t];if(B&&B.length&&this._listens(t,x,c)!==!1)return!0;if(m){for(var K in this._eventParents)if(this._eventParents[K].listens(t,o,c,m))return!0}return!1},_listens:function(t,o,c){if(!this._events)return!1;var m=this._events[t]||[];if(!o)return!!m.length;c===this&&(c=void 0);for(var x=0,B=m.length;x<B;x++)if(m[x].fn===o&&m[x].ctx===c)return x;return!1},once:function(t,o,c){if(typeof t=="object")for(var m in t)this._on(m,t[m],o,!0);else{t=D(t);for(var x=0,B=t.length;x<B;x++)this._on(t[x],o,c,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[v(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[v(t)],this},_propagateEvent:function(t){for(var o in this._eventParents)this._eventParents[o].fire(t.type,h({layer:t.target,propagatedFrom:t.target},t),!0)}};Re.addEventListener=Re.on,Re.removeEventListener=Re.clearAllEventListeners=Re.off,Re.addOneTimeEventListener=Re.once,Re.fireEvent=Re.fire,Re.hasEventListeners=Re.listens;var Ee=ie.extend(Re);function Z(t,o,c){this.x=c?Math.round(t):t,this.y=c?Math.round(o):o}var te=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};Z.prototype={clone:function(){return new Z(this.x,this.y)},add:function(t){return this.clone()._add(re(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(re(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new Z(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new Z(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=te(this.x),this.y=te(this.y),this},distanceTo:function(t){t=re(t);var o=t.x-this.x,c=t.y-this.y;return Math.sqrt(o*o+c*c)},equals:function(t){return t=re(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=re(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+G(this.x)+", "+G(this.y)+")"}};function re(t,o,c){return t instanceof Z?t:ge(t)?new Z(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new Z(t.x,t.y):new Z(t,o,c)}function be(t,o){if(t)for(var c=o?[t,o]:t,m=0,x=c.length;m<x;m++)this.extend(c[m])}be.prototype={extend:function(t){var o,c;if(!t)return this;if(t instanceof Z||typeof t[0]=="number"||"x"in t)o=c=re(t);else if(t=me(t),o=t.min,c=t.max,!o||!c)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=c.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(t){return re((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return re(this.min.x,this.max.y)},getTopRight:function(){return re(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var o,c;return typeof t[0]=="number"||t instanceof Z?t=re(t):t=me(t),t instanceof be?(o=t.min,c=t.max):o=c=t,o.x>=this.min.x&&c.x<=this.max.x&&o.y>=this.min.y&&c.y<=this.max.y},intersects:function(t){t=me(t);var o=this.min,c=this.max,m=t.min,x=t.max,B=x.x>=o.x&&m.x<=c.x,K=x.y>=o.y&&m.y<=c.y;return B&&K},overlaps:function(t){t=me(t);var o=this.min,c=this.max,m=t.min,x=t.max,B=x.x>o.x&&m.x<c.x,K=x.y>o.y&&m.y<c.y;return B&&K},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var o=this.min,c=this.max,m=Math.abs(o.x-c.x)*t,x=Math.abs(o.y-c.y)*t;return me(re(o.x-m,o.y-x),re(c.x+m,c.y+x))},equals:function(t){return t?(t=me(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function me(t,o){return!t||t instanceof be?t:new be(t,o)}function Je(t,o){if(t)for(var c=o?[t,o]:t,m=0,x=c.length;m<x;m++)this.extend(c[m])}Je.prototype={extend:function(t){var o=this._southWest,c=this._northEast,m,x;if(t instanceof nt)m=t,x=t;else if(t instanceof Je){if(m=t._southWest,x=t._northEast,!m||!x)return this}else return t?this.extend(Xe(t)||et(t)):this;return!o&&!c?(this._southWest=new nt(m.lat,m.lng),this._northEast=new nt(x.lat,x.lng)):(o.lat=Math.min(m.lat,o.lat),o.lng=Math.min(m.lng,o.lng),c.lat=Math.max(x.lat,c.lat),c.lng=Math.max(x.lng,c.lng)),this},pad:function(t){var o=this._southWest,c=this._northEast,m=Math.abs(o.lat-c.lat)*t,x=Math.abs(o.lng-c.lng)*t;return new Je(new nt(o.lat-m,o.lng-x),new nt(c.lat+m,c.lng+x))},getCenter:function(){return new nt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new nt(this.getNorth(),this.getWest())},getSouthEast:function(){return new nt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof nt||"lat"in t?t=Xe(t):t=et(t);var o=this._southWest,c=this._northEast,m,x;return t instanceof Je?(m=t.getSouthWest(),x=t.getNorthEast()):m=x=t,m.lat>=o.lat&&x.lat<=c.lat&&m.lng>=o.lng&&x.lng<=c.lng},intersects:function(t){t=et(t);var o=this._southWest,c=this._northEast,m=t.getSouthWest(),x=t.getNorthEast(),B=x.lat>=o.lat&&m.lat<=c.lat,K=x.lng>=o.lng&&m.lng<=c.lng;return B&&K},overlaps:function(t){t=et(t);var o=this._southWest,c=this._northEast,m=t.getSouthWest(),x=t.getNorthEast(),B=x.lat>o.lat&&m.lat<c.lat,K=x.lng>o.lng&&m.lng<c.lng;return B&&K},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,o){return t?(t=et(t),this._southWest.equals(t.getSouthWest(),o)&&this._northEast.equals(t.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function et(t,o){return t instanceof Je?t:new Je(t,o)}function nt(t,o,c){if(isNaN(t)||isNaN(o))throw new Error("Invalid LatLng object: ("+t+", "+o+")");this.lat=+t,this.lng=+o,c!==void 0&&(this.alt=+c)}nt.prototype={equals:function(t,o){if(!t)return!1;t=Xe(t);var c=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return c<=(o===void 0?1e-9:o)},toString:function(t){return"LatLng("+G(this.lat,t)+", "+G(this.lng,t)+")"},distanceTo:function(t){return Ke.distance(this,Xe(t))},wrap:function(){return Ke.wrapLatLng(this)},toBounds:function(t){var o=180*t/40075017,c=o/Math.cos(Math.PI/180*this.lat);return et([this.lat-o,this.lng-c],[this.lat+o,this.lng+c])},clone:function(){return new nt(this.lat,this.lng,this.alt)}};function Xe(t,o,c){return t instanceof nt?t:ge(t)&&typeof t[0]!="object"?t.length===3?new nt(t[0],t[1],t[2]):t.length===2?new nt(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new nt(t.lat,"lng"in t?t.lng:t.lon,t.alt):o===void 0?null:new nt(t,o,c)}var ke={latLngToPoint:function(t,o){var c=this.projection.project(t),m=this.scale(o);return this.transformation._transform(c,m)},pointToLatLng:function(t,o){var c=this.scale(o),m=this.transformation.untransform(t,c);return this.projection.unproject(m)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var o=this.projection.bounds,c=this.scale(t),m=this.transformation.transform(o.min,c),x=this.transformation.transform(o.max,c);return new be(m,x)},infinite:!1,wrapLatLng:function(t){var o=this.wrapLng?M(t.lng,this.wrapLng,!0):t.lng,c=this.wrapLat?M(t.lat,this.wrapLat,!0):t.lat,m=t.alt;return new nt(c,o,m)},wrapLatLngBounds:function(t){var o=t.getCenter(),c=this.wrapLatLng(o),m=o.lat-c.lat,x=o.lng-c.lng;if(m===0&&x===0)return t;var B=t.getSouthWest(),K=t.getNorthEast(),ue=new nt(B.lat-m,B.lng-x),Me=new nt(K.lat-m,K.lng-x);return new Je(ue,Me)}},Ke=h({},ke,{wrapLng:[-180,180],R:6371e3,distance:function(t,o){var c=Math.PI/180,m=t.lat*c,x=o.lat*c,B=Math.sin((o.lat-t.lat)*c/2),K=Math.sin((o.lng-t.lng)*c/2),ue=B*B+Math.cos(m)*Math.cos(x)*K*K,Me=2*Math.atan2(Math.sqrt(ue),Math.sqrt(1-ue));return this.R*Me}}),Ze=6378137,Ye={R:Ze,MAX_LATITUDE:85.0511287798,project:function(t){var o=Math.PI/180,c=this.MAX_LATITUDE,m=Math.max(Math.min(c,t.lat),-c),x=Math.sin(m*o);return new Z(this.R*t.lng*o,this.R*Math.log((1+x)/(1-x))/2)},unproject:function(t){var o=180/Math.PI;return new nt((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*o,t.x*o/this.R)},bounds:function(){var t=Ze*Math.PI;return new be([-t,-t],[t,t])}()};function tt(t,o,c,m){if(ge(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=o,this._c=c,this._d=m}tt.prototype={transform:function(t,o){return this._transform(t.clone(),o)},_transform:function(t,o){return o=o||1,t.x=o*(this._a*t.x+this._b),t.y=o*(this._c*t.y+this._d),t},untransform:function(t,o){return o=o||1,new Z((t.x/o-this._b)/this._a,(t.y/o-this._d)/this._c)}};function U(t,o,c,m){return new tt(t,o,c,m)}var H=h({},Ke,{code:"EPSG:3857",projection:Ye,transformation:function(){var t=.5/(Math.PI*Ye.R);return U(t,.5,-t,.5)}()}),ae=h({},H,{code:"EPSG:900913"});function Fe(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function $e(t,o){var c="",m,x,B,K,ue,Me;for(m=0,B=t.length;m<B;m++){for(ue=t[m],x=0,K=ue.length;x<K;x++)Me=ue[x],c+=(x?"L":"M")+Me.x+" "+Me.y;c+=o?ct.svg?"z":"x":""}return c||"M0 0"}var le=document.documentElement.style,q="ActiveXObject"in window,Oe=q&&!document.addEventListener,Ie="msLaunchUri"in navigator&&!("documentMode"in document),ze=Wi("webkit"),Se=Wi("android"),We=Wi("android 2")||Wi("android 3"),at=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),dt=Se&&Wi("Google")&&at<537&&!("AudioNode"in window),yt=!!window.opera,Tt=!Ie&&Wi("chrome"),Pt=Wi("gecko")&&!ze&&!yt&&!q,ii=!Tt&&Wi("safari"),$t=Wi("phantom"),Bi="OTransition"in le,ui=navigator.platform.indexOf("Win")===0,Cn=q&&"transition"in le,zn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!We,Yt="MozPerspective"in le,Ai=!window.L_DISABLE_3D&&(Cn||zn||Yt)&&!Bi&&!$t,nn=typeof orientation<"u"||Wi("mobile"),Vl=nn&&ze,Hl=nn&&zn,Zs=!window.PointerEvent&&window.MSPointerEvent,ra=!!(window.PointerEvent||Zs),sa="ontouchstart"in window||!!window.TouchEvent,Zl=!window.L_NO_TOUCH&&(sa||ra),ql=nn&&yt,oa=nn&&Pt,aa=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Kl=function(){var t=!1;try{var o=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",P,o),window.removeEventListener("testPassiveEventSupport",P,o)}catch{}return t}(),Wl=function(){return!!document.createElement("canvas").getContext}(),qs=!!(document.createElementNS&&Fe("svg").createSVGRect),la=!!qs&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Jl=!qs&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var o=t.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}}(),Xl=navigator.platform.indexOf("Mac")===0,Yl=navigator.platform.indexOf("Linux")===0;function Wi(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var ct={ie:q,ielt9:Oe,edge:Ie,webkit:ze,android:Se,android23:We,androidStock:dt,opera:yt,chrome:Tt,gecko:Pt,safari:ii,phantom:$t,opera12:Bi,win:ui,ie3d:Cn,webkit3d:zn,gecko3d:Yt,any3d:Ai,mobile:nn,mobileWebkit:Vl,mobileWebkit3d:Hl,msPointer:Zs,pointer:ra,touch:Zl,touchNative:sa,mobileOpera:ql,mobileGecko:oa,retina:aa,passiveEvents:Kl,canvas:Wl,svg:qs,vml:Jl,inlineSvg:la,mac:Xl,linux:Yl},ua=ct.msPointer?"MSPointerDown":"pointerdown",ca=ct.msPointer?"MSPointerMove":"pointermove",Ks=ct.msPointer?"MSPointerUp":"pointerup",ha=ct.msPointer?"MSPointerCancel":"pointercancel",Ws={touchstart:ua,touchmove:ca,touchend:Ks,touchcancel:ha},da={touchstart:nu,touchmove:is,touchend:is,touchcancel:is},sr={},fa=!1;function Ql(t,o,c){return o==="touchstart"&&Js(),da[o]?(c=da[o].bind(this,c),t.addEventListener(Ws[o],c,!1),c):(console.warn("wrong event specified:",o),P)}function eu(t,o,c){if(!Ws[o]){console.warn("wrong event specified:",o);return}t.removeEventListener(Ws[o],c,!1)}function tu(t){sr[t.pointerId]=t}function iu(t){sr[t.pointerId]&&(sr[t.pointerId]=t)}function ts(t){delete sr[t.pointerId]}function Js(){fa||(document.addEventListener(ua,tu,!0),document.addEventListener(ca,iu,!0),document.addEventListener(Ks,ts,!0),document.addEventListener(ha,ts,!0),fa=!0)}function is(t,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var c in sr)o.touches.push(sr[c]);o.changedTouches=[o],t(o)}}function nu(t,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&ci(o),is(t,o)}function ru(t){var o={},c,m;for(m in t)c=t[m],o[m]=c&&c.bind?c.bind(t):c;return t=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var su=200;function ou(t,o){t.addEventListener("dblclick",o);var c=0,m;function x(B){if(B.detail!==1){m=B.detail;return}if(!(B.pointerType==="mouse"||B.sourceCapabilities&&!B.sourceCapabilities.firesTouchEvents)){var K=ya(B);if(!(K.some(function(Me){return Me instanceof HTMLLabelElement&&Me.attributes.for})&&!K.some(function(Me){return Me instanceof HTMLInputElement||Me instanceof HTMLSelectElement}))){var ue=Date.now();ue-c<=su?(m++,m===2&&o(ru(B))):m=1,c=ue}}}return t.addEventListener("click",x),{dblclick:o,simDblclick:x}}function au(t,o){t.removeEventListener("dblclick",o.dblclick),t.removeEventListener("click",o.simDblclick)}var Xs=rs(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Mr=rs(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),pa=Mr==="webkitTransition"||Mr==="OTransition"?Mr+"End":"transitionend";function ma(t){return typeof t=="string"?document.getElementById(t):t}function kn(t,o){var c=t.style[o]||t.currentStyle&&t.currentStyle[o];if((!c||c==="auto")&&document.defaultView){var m=document.defaultView.getComputedStyle(t,null);c=m?m[o]:null}return c==="auto"?null:c}function Dt(t,o,c){var m=document.createElement(t);return m.className=o||"",c&&c.appendChild(m),m}function Ht(t){var o=t.parentNode;o&&o.removeChild(t)}function Pr(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function or(t){var o=t.parentNode;o&&o.lastChild!==t&&o.appendChild(t)}function $n(t){var o=t.parentNode;o&&o.firstChild!==t&&o.insertBefore(t,o.firstChild)}function Ys(t,o){if(t.classList!==void 0)return t.classList.contains(o);var c=ns(t);return c.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(c)}function xt(t,o){if(t.classList!==void 0)for(var c=D(o),m=0,x=c.length;m<x;m++)t.classList.add(c[m]);else if(!Ys(t,o)){var B=ns(t);Qs(t,(B?B+" ":"")+o)}}function Wt(t,o){t.classList!==void 0?t.classList.remove(o):Qs(t,W((" "+ns(t)+" ").replace(" "+o+" "," ")))}function Qs(t,o){t.className.baseVal===void 0?t.className=o:t.className.baseVal=o}function ns(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function ji(t,o){"opacity"in t.style?t.style.opacity=o:"filter"in t.style&&lu(t,o)}function lu(t,o){var c=!1,m="DXImageTransform.Microsoft.Alpha";try{c=t.filters.item(m)}catch{if(o===1)return}o=Math.round(o*100),c?(c.Enabled=o!==100,c.Opacity=o):t.style.filter+=" progid:"+m+"(opacity="+o+")"}function rs(t){for(var o=document.documentElement.style,c=0;c<t.length;c++)if(t[c]in o)return t[c];return!1}function Un(t,o,c){var m=o||new Z(0,0);t.style[Xs]=(ct.ie3d?"translate("+m.x+"px,"+m.y+"px)":"translate3d("+m.x+"px,"+m.y+"px,0)")+(c?" scale("+c+")":"")}function Qt(t,o){t._leaflet_pos=o,ct.any3d?Un(t,o):(t.style.left=o.x+"px",t.style.top=o.y+"px")}function jn(t){return t._leaflet_pos||new Z(0,0)}var Sr,Br,eo;if("onselectstart"in document)Sr=function(){bt(window,"selectstart",ci)},Br=function(){Ut(window,"selectstart",ci)};else{var ar=rs(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Sr=function(){if(ar){var t=document.documentElement.style;eo=t[ar],t[ar]="none"}},Br=function(){ar&&(document.documentElement.style[ar]=eo,eo=void 0)}}function to(){bt(window,"dragstart",ci)}function io(){Ut(window,"dragstart",ci)}var ss,no;function ro(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(os(),ss=t,no=t.style.outlineStyle,t.style.outlineStyle="none",bt(window,"keydown",os))}function os(){ss&&(ss.style.outlineStyle=no,ss=void 0,no=void 0,Ut(window,"keydown",os))}function ga(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function so(t){var o=t.getBoundingClientRect();return{x:o.width/t.offsetWidth||1,y:o.height/t.offsetHeight||1,boundingClientRect:o}}var uu={__proto__:null,TRANSFORM:Xs,TRANSITION:Mr,TRANSITION_END:pa,get:ma,getStyle:kn,create:Dt,remove:Ht,empty:Pr,toFront:or,toBack:$n,hasClass:Ys,addClass:xt,removeClass:Wt,setClass:Qs,getClass:ns,setOpacity:ji,testProp:rs,setTransform:Un,setPosition:Qt,getPosition:jn,get disableTextSelection(){return Sr},get enableTextSelection(){return Br},disableImageDrag:to,enableImageDrag:io,preventOutline:ro,restoreOutline:os,getSizedParentNode:ga,getScale:so};function bt(t,o,c,m){if(o&&typeof o=="object")for(var x in o)ao(t,x,o[x],c);else{o=D(o);for(var B=0,K=o.length;B<K;B++)ao(t,o[B],c,m)}return this}var rn="_leaflet_events";function Ut(t,o,c,m){if(arguments.length===1)_a(t),delete t[rn];else if(o&&typeof o=="object")for(var x in o)En(t,x,o[x],c);else if(o=D(o),arguments.length===2)_a(t,function(ue){return Ne(o,ue)!==-1});else for(var B=0,K=o.length;B<K;B++)En(t,o[B],c,m);return this}function _a(t,o){for(var c in t[rn]){var m=c.split(/\d/)[0];(!o||o(m))&&En(t,m,null,null,c)}}var oo={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ao(t,o,c,m){var x=o+v(c)+(m?"_"+v(m):"");if(t[rn]&&t[rn][x])return this;var B=function(ue){return c.call(m||t,ue||window.event)},K=B;!ct.touchNative&&ct.pointer&&o.indexOf("touch")===0?B=Ql(t,o,B):ct.touch&&o==="dblclick"?B=ou(t,B):"addEventListener"in t?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?t.addEventListener(oo[o]||o,B,ct.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(B=function(ue){ue=ue||window.event,uo(t,ue)&&K(ue)},t.addEventListener(oo[o],B,!1)):t.addEventListener(o,K,!1):t.attachEvent("on"+o,B),t[rn]=t[rn]||{},t[rn][x]=B}function En(t,o,c,m,x){x=x||o+v(c)+(m?"_"+v(m):"");var B=t[rn]&&t[rn][x];if(!B)return this;!ct.touchNative&&ct.pointer&&o.indexOf("touch")===0?eu(t,o,B):ct.touch&&o==="dblclick"?au(t,B):"removeEventListener"in t?t.removeEventListener(oo[o]||o,B,!1):t.detachEvent("on"+o,B),t[rn][x]=null}function Gn(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function lo(t){return ao(t,"wheel",Gn),this}function Ar(t){return bt(t,"mousedown touchstart dblclick contextmenu",Gn),t._leaflet_disable_click=!0,this}function ci(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Vn(t){return ci(t),Gn(t),this}function ya(t){if(t.composedPath)return t.composedPath();for(var o=[],c=t.target;c;)o.push(c),c=c.parentNode;return o}function va(t,o){if(!o)return new Z(t.clientX,t.clientY);var c=so(o),m=c.boundingClientRect;return new Z((t.clientX-m.left)/c.x-o.clientLeft,(t.clientY-m.top)/c.y-o.clientTop)}var cu=ct.linux&&ct.chrome?window.devicePixelRatio:ct.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ba(t){return ct.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/cu:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function uo(t,o){var c=o.relatedTarget;if(!c)return!0;try{for(;c&&c!==t;)c=c.parentNode}catch{return!1}return c!==t}var as={__proto__:null,on:bt,off:Ut,stopPropagation:Gn,disableScrollPropagation:lo,disableClickPropagation:Ar,preventDefault:ci,stop:Vn,getPropagationPath:ya,getMousePosition:va,getWheelDelta:ba,isExternalTarget:uo,addListener:bt,removeListener:Ut},xa=Ee.extend({run:function(t,o,c,m){this.stop(),this._el=t,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(m||.5,.2),this._startPos=jn(t),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ee(this._animate,this),this._step()},_step:function(t){var o=+new Date-this._startTime,c=this._duration*1e3;o<c?this._runFrame(this._easeOut(o/c),t):(this._runFrame(1),this._complete())},_runFrame:function(t,o){var c=this._startPos.add(this._offset.multiplyBy(t));o&&c._round(),Qt(this._el,c),this.fire("step")},_complete:function(){De(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Bt=Ee.extend({options:{crs:H,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,o){o=z(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(Xe(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Mr&&ct.any3d&&!ct.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),bt(this._proxy,pa,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,o,c){if(o=o===void 0?this._zoom:this._limitZoom(o),t=this._limitCenter(Xe(t),o,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=h({animate:c.animate},c.zoom),c.pan=h({animate:c.animate,duration:c.duration},c.pan));var m=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,o,c.zoom):this._tryAnimatedPan(t,c.pan);if(m)return clearTimeout(this._sizeTimer),this}return this._resetView(t,o,c.pan&&c.pan.noMoveStart),this},setZoom:function(t,o){return this._loaded?this.setView(this.getCenter(),t,{zoom:o}):(this._zoom=t,this)},zoomIn:function(t,o){return t=t||(ct.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,o)},zoomOut:function(t,o){return t=t||(ct.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,o)},setZoomAround:function(t,o,c){var m=this.getZoomScale(o),x=this.getSize().divideBy(2),B=t instanceof Z?t:this.latLngToContainerPoint(t),K=B.subtract(x).multiplyBy(1-1/m),ue=this.containerPointToLatLng(x.add(K));return this.setView(ue,o,{zoom:c})},_getBoundsCenterZoom:function(t,o){o=o||{},t=t.getBounds?t.getBounds():et(t);var c=re(o.paddingTopLeft||o.padding||[0,0]),m=re(o.paddingBottomRight||o.padding||[0,0]),x=this.getBoundsZoom(t,!1,c.add(m));if(x=typeof o.maxZoom=="number"?Math.min(o.maxZoom,x):x,x===1/0)return{center:t.getCenter(),zoom:x};var B=m.subtract(c).divideBy(2),K=this.project(t.getSouthWest(),x),ue=this.project(t.getNorthEast(),x),Me=this.unproject(K.add(ue).divideBy(2).add(B),x);return{center:Me,zoom:x}},fitBounds:function(t,o){if(t=et(t),!t.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(t,o);return this.setView(c.center,c.zoom,o)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,o){return this.setView(t,this._zoom,{pan:o})},panBy:function(t,o){if(t=re(t).round(),o=o||{},!t.x&&!t.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new xa,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){xt(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,c,o.duration||.25,o.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,o,c){if(c=c||{},c.animate===!1||!ct.any3d)return this.setView(t,o,c);this._stop();var m=this.project(this.getCenter()),x=this.project(t),B=this.getSize(),K=this._zoom;t=Xe(t),o=o===void 0?K:o;var ue=Math.max(B.x,B.y),Me=ue*this.getZoomScale(K,o),Ge=x.distanceTo(m)||1,it=1.42,pt=it*it;function Et(Jt){var $r=Jt?-1:1,Tu=Jt?Me:ue,cn=Me*Me-ue*ue+$r*pt*pt*Ge*Ge,Du=2*Tu*pt*Ge,pr=cn/Du,Lo=Math.sqrt(pr*pr+1)-pr,Ru=Lo<1e-9?-18:Math.log(Lo);return Ru}function yi(Jt){return(Math.exp(Jt)-Math.exp(-Jt))/2}function ai(Jt){return(Math.exp(Jt)+Math.exp(-Jt))/2}function Li(Jt){return yi(Jt)/ai(Jt)}var Kt=Et(0);function un(Jt){return ue*(ai(Kt)/ai(Kt+it*Jt))}function wo(Jt){return ue*(ai(Kt)*Li(Kt+it*Jt)-yi(Kt))/pt}function Ms(Jt){return 1-Math.pow(1-Jt,1.5)}var Ia=Date.now(),zr=(Et(1)-Kt)/it,Au=c.duration?1e3*c.duration:1e3*zr*.8;function Fa(){var Jt=(Date.now()-Ia)/Au,$r=Ms(Jt)*zr;Jt<=1?(this._flyToFrame=ee(Fa,this),this._move(this.unproject(m.add(x.subtract(m).multiplyBy(wo($r)/Ge)),K),this.getScaleZoom(ue/un($r),K),{flyTo:!0})):this._move(t,o)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),Fa.call(this),this},flyToBounds:function(t,o){var c=this._getBoundsCenterZoom(t,o);return this.flyTo(c.center,c.zoom,o)},setMaxBounds:function(t){return t=et(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var o=this.options.minZoom;return this.options.minZoom=t,this._loaded&&o!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var o=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&o!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,o){this._enforcingBounds=!0;var c=this.getCenter(),m=this._limitCenter(c,this._zoom,et(t));return c.equals(m)||this.panTo(m,o),this._enforcingBounds=!1,this},panInside:function(t,o){o=o||{};var c=re(o.paddingTopLeft||o.padding||[0,0]),m=re(o.paddingBottomRight||o.padding||[0,0]),x=this.project(this.getCenter()),B=this.project(t),K=this.getPixelBounds(),ue=me([K.min.add(c),K.max.subtract(m)]),Me=ue.getSize();if(!ue.contains(B)){this._enforcingBounds=!0;var Ge=B.subtract(ue.getCenter()),it=ue.extend(B).getSize().subtract(Me);x.x+=Ge.x<0?-it.x:it.x,x.y+=Ge.y<0?-it.y:it.y,this.panTo(this.unproject(x),o),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=h({animate:!1,pan:!0},t===!0?{animate:!0}:t);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),m=o.divideBy(2).round(),x=c.divideBy(2).round(),B=m.subtract(x);return!B.x&&!B.y?this:(t.animate&&t.pan?this.panBy(B):(t.pan&&this._rawPanBy(B),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=h({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=f(this._handleGeolocationResponse,this),c=f(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,c,t):navigator.geolocation.getCurrentPosition(o,c,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var o=t.code,c=t.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var o=t.coords.latitude,c=t.coords.longitude,m=new nt(o,c),x=m.toBounds(t.coords.accuracy*2),B=this._locateOptions;if(B.setView){var K=this.getBoundsZoom(x);this.setView(m,B.maxZoom?Math.min(K,B.maxZoom):K)}var ue={latlng:m,bounds:x,timestamp:t.timestamp};for(var Me in t.coords)typeof t.coords[Me]=="number"&&(ue[Me]=t.coords[Me]);this.fire("locationfound",ue)}},addHandler:function(t,o){if(!o)return this;var c=this[t]=new o(this);return this._handlers.push(c),this.options[t]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ht(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(De(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)Ht(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,o){var c="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),m=Dt("div",c,o||this._mapPane);return t&&(this._panes[t]=m),m},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),o=this.unproject(t.getBottomLeft()),c=this.unproject(t.getTopRight());return new Je(o,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,o,c){t=et(t),c=re(c||[0,0]);var m=this.getZoom()||0,x=this.getMinZoom(),B=this.getMaxZoom(),K=t.getNorthWest(),ue=t.getSouthEast(),Me=this.getSize().subtract(c),Ge=me(this.project(ue,m),this.project(K,m)).getSize(),it=ct.any3d?this.options.zoomSnap:1,pt=Me.x/Ge.x,Et=Me.y/Ge.y,yi=o?Math.max(pt,Et):Math.min(pt,Et);return m=this.getScaleZoom(yi,m),it&&(m=Math.round(m/(it/100))*(it/100),m=o?Math.ceil(m/it)*it:Math.floor(m/it)*it),Math.max(x,Math.min(B,m))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,o){var c=this._getTopLeftPoint(t,o);return new be(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,o){var c=this.options.crs;return o=o===void 0?this._zoom:o,c.scale(t)/c.scale(o)},getScaleZoom:function(t,o){var c=this.options.crs;o=o===void 0?this._zoom:o;var m=c.zoom(t*c.scale(o));return isNaN(m)?1/0:m},project:function(t,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(Xe(t),o)},unproject:function(t,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(re(t),o)},layerPointToLatLng:function(t){var o=re(t).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(t){var o=this.project(Xe(t))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(Xe(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(et(t))},distance:function(t,o){return this.options.crs.distance(Xe(t),Xe(o))},containerPointToLayerPoint:function(t){return re(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return re(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var o=this.containerPointToLayerPoint(re(t));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Xe(t)))},mouseEventToContainerPoint:function(t){return va(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var o=this._container=ma(t);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");bt(o,"scroll",this._onScroll,this),this._containerId=v(o)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&ct.any3d,xt(t,"leaflet-container"+(ct.touch?" leaflet-touch":"")+(ct.retina?" leaflet-retina":"")+(ct.ielt9?" leaflet-oldie":"")+(ct.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=kn(t,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Qt(this._mapPane,new Z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(xt(t.markerPane,"leaflet-zoom-hide"),xt(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,o,c){Qt(this._mapPane,new Z(0,0));var m=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var x=this._zoom!==o;this._moveStart(x,c)._move(t,o)._moveEnd(x),this.fire("viewreset"),m&&this.fire("load")},_moveStart:function(t,o){return t&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(t,o,c,m){o===void 0&&(o=this._zoom);var x=this._zoom!==o;return this._zoom=o,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),m?c&&c.pinch&&this.fire("zoom",c):((x||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return De(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Qt(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[v(this._container)]=this;var o=t?Ut:bt;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),ct.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){De(this._resizeRequest),this._resizeRequest=ee(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,o){for(var c=[],m,x=o==="mouseout"||o==="mouseover",B=t.target||t.srcElement,K=!1;B;){if(m=this._targets[v(B)],m&&(o==="click"||o==="preclick")&&this._draggableMoved(m)){K=!0;break}if(m&&m.listens(o,!0)&&(x&&!uo(B,t)||(c.push(m),x))||B===this._container)break;B=B.parentNode}return!c.length&&!K&&!x&&this.listens(o,!0)&&(c=[this]),c},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var o=t.target||t.srcElement;if(!(!this._loaded||o._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(o))){var c=t.type;c==="mousedown"&&ro(o),this._fireDOMEvent(t,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,o,c){if(t.type==="click"){var m=h({},t);m.type="preclick",this._fireDOMEvent(m,m.type,c)}var x=this._findEventTargets(t,o);if(c){for(var B=[],K=0;K<c.length;K++)c[K].listens(o,!0)&&B.push(c[K]);x=B.concat(x)}if(x.length){o==="contextmenu"&&ci(t);var ue=x[0],Me={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var Ge=ue.getLatLng&&(!ue._radius||ue._radius<=10);Me.containerPoint=Ge?this.latLngToContainerPoint(ue.getLatLng()):this.mouseEventToContainerPoint(t),Me.layerPoint=this.containerPointToLayerPoint(Me.containerPoint),Me.latlng=Ge?ue.getLatLng():this.layerPointToLatLng(Me.layerPoint)}for(K=0;K<x.length;K++)if(x[K].fire(o,Me,!0),Me.originalEvent._stopped||x[K].options.bubblingMouseEvents===!1&&Ne(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,o=this._handlers.length;t<o;t++)this._handlers[t].disable()},whenReady:function(t,o){return this._loaded?t.call(o||this,{target:this}):this.on("load",t,o),this},_getMapPanePos:function(){return jn(this._mapPane)||new Z(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,o){var c=t&&o!==void 0?this._getNewPixelOrigin(t,o):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,o){var c=this.getSize()._divideBy(2);return this.project(t,o)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,o,c){var m=this._getNewPixelOrigin(c,o);return this.project(t,o)._subtract(m)},_latLngBoundsToNewLayerBounds:function(t,o,c){var m=this._getNewPixelOrigin(c,o);return me([this.project(t.getSouthWest(),o)._subtract(m),this.project(t.getNorthWest(),o)._subtract(m),this.project(t.getSouthEast(),o)._subtract(m),this.project(t.getNorthEast(),o)._subtract(m)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,o,c){if(!c)return t;var m=this.project(t,o),x=this.getSize().divideBy(2),B=new be(m.subtract(x),m.add(x)),K=this._getBoundsOffset(B,c,o);return Math.abs(K.x)<=1&&Math.abs(K.y)<=1?t:this.unproject(m.add(K),o)},_limitOffset:function(t,o){if(!o)return t;var c=this.getPixelBounds(),m=new be(c.min.add(t),c.max.add(t));return t.add(this._getBoundsOffset(m,o))},_getBoundsOffset:function(t,o,c){var m=me(this.project(o.getNorthEast(),c),this.project(o.getSouthWest(),c)),x=m.min.subtract(t.min),B=m.max.subtract(t.max),K=this._rebound(x.x,-B.x),ue=this._rebound(x.y,-B.y);return new Z(K,ue)},_rebound:function(t,o){return t+o>0?Math.round(t-o)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(o))},_limitZoom:function(t){var o=this.getMinZoom(),c=this.getMaxZoom(),m=ct.any3d?this.options.zoomSnap:1;return m&&(t=Math.round(t/m)*m),Math.max(o,Math.min(c,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Wt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,o){var c=this._getCenterOffset(t)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,o),!0)},_createAnimProxy:function(){var t=this._proxy=Dt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(o){var c=Xs,m=this._proxy.style[c];Un(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),m===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ht(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),o=this.getZoom();Un(this._proxy,this.project(t,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,o,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var m=this.getZoomScale(o),x=this._getCenterOffset(t)._divideBy(1-1/m);return c.animate!==!0&&!this.getSize().contains(x)?!1:(ee(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(t,o,!0)},this),!0)},_animateZoom:function(t,o,c,m){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=o,xt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:o,noUpdate:m}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Wt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function wa(t,o){return new Bt(t,o)}var vt=ie.extend({options:{position:"topright"},initialize:function(t){z(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var o=this._map;return o&&o.removeControl(this),this.options.position=t,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var o=this._container=this.onAdd(t),c=this.getPosition(),m=t._controlCorners[c];return xt(o,"leaflet-control"),c.indexOf("bottom")!==-1?m.insertBefore(o,m.firstChild):m.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ht(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Hn=function(t){return new vt(t)};Bt.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},o="leaflet-",c=this._controlContainer=Dt("div",o+"control-container",this._container);function m(x,B){var K=o+x+" "+o+B;t[x+B]=Dt("div",K,c)}m("top","left"),m("top","right"),m("bottom","left"),m("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Ht(this._controlCorners[t]);Ht(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Tr=vt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,o,c,m){return c<m?-1:m<c?1:0}},initialize:function(t,o,c){z(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var m in t)this._addLayer(t[m],m);for(m in o)this._addLayer(o[m],m,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return vt.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,o){return this._addLayer(t,o),this._map?this._update():this},addOverlay:function(t,o){return this._addLayer(t,o,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var o=this._getLayer(v(t));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){xt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(xt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):Wt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Wt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",o=this._container=Dt("div",t),c=this.options.collapsed;o.setAttribute("aria-haspopup",!0),Ar(o),lo(o);var m=this._section=Dt("section",t+"-list");c&&(this._map.on("click",this.collapse,this),bt(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var x=this._layersLink=Dt("a",t+"-toggle",o);x.href="#",x.title="Layers",x.setAttribute("role","button"),bt(x,{keydown:function(B){B.keyCode===13&&this._expandSafely()},click:function(B){ci(B),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Dt("div",t+"-base",m),this._separator=Dt("div",t+"-separator",m),this._overlaysList=Dt("div",t+"-overlays",m),o.appendChild(m)},_getLayer:function(t){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&v(this._layers[o].layer)===t)return this._layers[o]},_addLayer:function(t,o,c){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:o,overlay:c}),this.options.sortLayers&&this._layers.sort(f(function(m,x){return this.options.sortFunction(m.layer,x.layer,m.name,x.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Pr(this._baseLayersList),Pr(this._overlaysList),this._layerControlInputs=[];var t,o,c,m,x=0;for(c=0;c<this._layers.length;c++)m=this._layers[c],this._addItem(m),o=o||m.overlay,t=t||!m.overlay,x+=m.overlay?0:1;return this.options.hideSingleBase&&(t=t&&x>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=o&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var o=this._getLayer(v(t.target)),c=o.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;c&&this._map.fire(c,o)},_createRadioElement:function(t,o){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(o?' checked="checked"':"")+"/>",m=document.createElement("div");return m.innerHTML=c,m.firstChild},_addItem:function(t){var o=document.createElement("label"),c=this._map.hasLayer(t.layer),m;t.overlay?(m=document.createElement("input"),m.type="checkbox",m.className="leaflet-control-layers-selector",m.defaultChecked=c):m=this._createRadioElement("leaflet-base-layers_"+v(this),c),this._layerControlInputs.push(m),m.layerId=v(t.layer),bt(m,"click",this._onInputClick,this);var x=document.createElement("span");x.innerHTML=" "+t.name;var B=document.createElement("span");o.appendChild(B),B.appendChild(m),B.appendChild(x);var K=t.overlay?this._overlaysList:this._baseLayersList;return K.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,o,c,m=[],x=[];this._handlingClick=!0;for(var B=t.length-1;B>=0;B--)o=t[B],c=this._getLayer(o.layerId).layer,o.checked?m.push(c):o.checked||x.push(c);for(B=0;B<x.length;B++)this._map.hasLayer(x[B])&&this._map.removeLayer(x[B]);for(B=0;B<m.length;B++)this._map.hasLayer(m[B])||this._map.addLayer(m[B]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,o,c,m=this._map.getZoom(),x=t.length-1;x>=0;x--)o=t[x],c=this._getLayer(o.layerId).layer,o.disabled=c.options.minZoom!==void 0&&m<c.options.minZoom||c.options.maxZoom!==void 0&&m>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,bt(t,"click",ci),this.expand();var o=this;setTimeout(function(){Ut(t,"click",ci),o._preventClick=!1})}}),hu=function(t,o,c){return new Tr(t,o,c)},ls=vt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var o="leaflet-control-zoom",c=Dt("div",o+" leaflet-bar"),m=this.options;return this._zoomInButton=this._createButton(m.zoomInText,m.zoomInTitle,o+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(m.zoomOutText,m.zoomOutTitle,o+"-out",c,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,o,c,m,x){var B=Dt("a",c,m);return B.innerHTML=t,B.href="#",B.title=o,B.setAttribute("role","button"),B.setAttribute("aria-label",o),Ar(B),bt(B,"click",Vn),bt(B,"click",x,this),bt(B,"click",this._refocusOnMap,this),B},_updateDisabled:function(){var t=this._map,o="leaflet-disabled";Wt(this._zoomInButton,o),Wt(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(xt(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(xt(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});Bt.mergeOptions({zoomControl:!0}),Bt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ls,this.addControl(this.zoomControl))});var du=function(t){return new ls(t)},us=vt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var o="leaflet-control-scale",c=Dt("div",o),m=this.options;return this._addScales(m,o+"-line",c),t.on(m.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),c},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,o,c){t.metric&&(this._mScale=Dt("div",o,c)),t.imperial&&(this._iScale=Dt("div",o,c))},_update:function(){var t=this._map,o=t.getSize().y/2,c=t.distance(t.containerPointToLatLng([0,o]),t.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(c)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var o=this._getRoundNum(t),c=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,c,o/t)},_updateImperial:function(t){var o=t*3.2808399,c,m,x;o>5280?(c=o/5280,m=this._getRoundNum(c),this._updateScale(this._iScale,m+" mi",m/c)):(x=this._getRoundNum(o),this._updateScale(this._iScale,x+" ft",x/o))},_updateScale:function(t,o,c){t.style.width=Math.round(this.options.maxWidth*c)+"px",t.innerHTML=o},_getRoundNum:function(t){var o=Math.pow(10,(Math.floor(t)+"").length-1),c=t/o;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,o*c}}),cs=function(t){return new us(t)},fu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',sn=vt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ct.inlineSvg?fu+" ":"")+"Leaflet</a>"},initialize:function(t){z(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=Dt("div","leaflet-control-attribution"),Ar(this._container);for(var o in t._layers)t._layers[o].getAttribution&&this.addAttribution(t._layers[o].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var o in this._attributions)this._attributions[o]&&t.push(o);var c=[];this.options.prefix&&c.push(this.options.prefix),t.length&&c.push(t.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Bt.mergeOptions({attributionControl:!0}),Bt.addInitHook(function(){this.options.attributionControl&&new sn().addTo(this)});var La=function(t){return new sn(t)};vt.Layers=Tr,vt.Zoom=ls,vt.Scale=us,vt.Attribution=sn,Hn.layers=hu,Hn.zoom=du,Hn.scale=cs,Hn.attribution=La;var mi=ie.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});mi.addTo=function(t,o){return t.addHandler(o,this),this};var pu={Events:Re},Ca=ct.touch?"touchstart mousedown":"mousedown",Mn=Ee.extend({options:{clickTolerance:3},initialize:function(t,o,c,m){z(this,m),this._element=t,this._dragStartTarget=o||t,this._preventOutline=c},enable:function(){this._enabled||(bt(this._dragStartTarget,Ca,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Mn._dragging===this&&this.finishDrag(!0),Ut(this._dragStartTarget,Ca,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!Ys(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){Mn._dragging===this&&this.finishDrag();return}if(!(Mn._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(Mn._dragging=this,this._preventOutline&&ro(this._element),to(),Sr(),!this._moving)){this.fire("down");var o=t.touches?t.touches[0]:t,c=ga(this._element);this._startPoint=new Z(o.clientX,o.clientY),this._startPos=jn(this._element),this._parentScale=so(c);var m=t.type==="mousedown";bt(document,m?"mousemove":"touchmove",this._onMove,this),bt(document,m?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var o=t.touches&&t.touches.length===1?t.touches[0]:t,c=new Z(o.clientX,o.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,ci(t),this._moved||(this.fire("dragstart"),this._moved=!0,xt(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),xt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Qt(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){Wt(document.body,"leaflet-dragging"),this._lastTarget&&(Wt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ut(document,"mousemove touchmove",this._onMove,this),Ut(document,"mouseup touchend touchcancel",this._onUp,this),io(),Br();var o=this._moved&&this._moving;this._moving=!1,Mn._dragging=!1,o&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function ka(t,o,c){var m,x=[1,4,2,8],B,K,ue,Me,Ge,it,pt,Et;for(B=0,it=t.length;B<it;B++)t[B]._code=bi(t[B],o);for(ue=0;ue<4;ue++){for(pt=x[ue],m=[],B=0,it=t.length,K=it-1;B<it;K=B++)Me=t[B],Ge=t[K],Me._code&pt?Ge._code&pt||(Et=Pn(Ge,Me,pt,o,c),Et._code=bi(Et,o),m.push(Et)):(Ge._code&pt&&(Et=Pn(Ge,Me,pt,o,c),Et._code=bi(Et,o),m.push(Et)),m.push(Me));t=m}return t}function Ea(t,o){var c,m,x,B,K,ue,Me,Ge,it;if(!t||t.length===0)throw new Error("latlngs not passed");xi(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var pt=Xe([0,0]),Et=et(t),yi=Et.getNorthWest().distanceTo(Et.getSouthWest())*Et.getNorthEast().distanceTo(Et.getNorthWest());yi<1700&&(pt=co(t));var ai=t.length,Li=[];for(c=0;c<ai;c++){var Kt=Xe(t[c]);Li.push(o.project(Xe([Kt.lat-pt.lat,Kt.lng-pt.lng])))}for(ue=Me=Ge=0,c=0,m=ai-1;c<ai;m=c++)x=Li[c],B=Li[m],K=x.y*B.x-B.y*x.x,Me+=(x.x+B.x)*K,Ge+=(x.y+B.y)*K,ue+=K*3;ue===0?it=Li[0]:it=[Me/ue,Ge/ue];var un=o.unproject(re(it));return Xe([un.lat+pt.lat,un.lng+pt.lng])}function co(t){for(var o=0,c=0,m=0,x=0;x<t.length;x++){var B=Xe(t[x]);o+=B.lat,c+=B.lng,m++}return Xe([o/m,c/m])}var mu={__proto__:null,clipPolygon:ka,polygonCenter:Ea,centroid:co};function Ma(t,o){if(!o||!t.length)return t.slice();var c=o*o;return t=Pa(t,c),t=hi(t,c),t}function ho(t,o,c){return Math.sqrt(Dr(t,o,c,!0))}function gu(t,o,c){return Dr(t,o,c)}function hi(t,o){var c=t.length,m=typeof Uint8Array<"u"?Uint8Array:Array,x=new m(c);x[0]=x[c-1]=1,di(t,x,o,0,c-1);var B,K=[];for(B=0;B<c;B++)x[B]&&K.push(t[B]);return K}function di(t,o,c,m,x){var B=0,K,ue,Me;for(ue=m+1;ue<=x-1;ue++)Me=Dr(t[ue],t[m],t[x],!0),Me>B&&(K=ue,B=Me);B>c&&(o[K]=1,di(t,o,c,m,K),di(t,o,c,K,x))}function Pa(t,o){for(var c=[t[0]],m=1,x=0,B=t.length;m<B;m++)_u(t[m],t[x])>o&&(c.push(t[m]),x=m);return x<B-1&&c.push(t[B-1]),c}var Zn;function qn(t,o,c,m,x){var B=m?Zn:bi(t,c),K=bi(o,c),ue,Me,Ge;for(Zn=K;;){if(!(B|K))return[t,o];if(B&K)return!1;ue=B||K,Me=Pn(t,o,ue,c,x),Ge=bi(Me,c),ue===B?(t=Me,B=Ge):(o=Me,K=Ge)}}function Pn(t,o,c,m,x){var B=o.x-t.x,K=o.y-t.y,ue=m.min,Me=m.max,Ge,it;return c&8?(Ge=t.x+B*(Me.y-t.y)/K,it=Me.y):c&4?(Ge=t.x+B*(ue.y-t.y)/K,it=ue.y):c&2?(Ge=Me.x,it=t.y+K*(Me.x-t.x)/B):c&1&&(Ge=ue.x,it=t.y+K*(ue.x-t.x)/B),new Z(Ge,it,x)}function bi(t,o){var c=0;return t.x<o.min.x?c|=1:t.x>o.max.x&&(c|=2),t.y<o.min.y?c|=4:t.y>o.max.y&&(c|=8),c}function _u(t,o){var c=o.x-t.x,m=o.y-t.y;return c*c+m*m}function Dr(t,o,c,m){var x=o.x,B=o.y,K=c.x-x,ue=c.y-B,Me=K*K+ue*ue,Ge;return Me>0&&(Ge=((t.x-x)*K+(t.y-B)*ue)/Me,Ge>1?(x=c.x,B=c.y):Ge>0&&(x+=K*Ge,B+=ue*Ge)),K=t.x-x,ue=t.y-B,m?K*K+ue*ue:new Z(x,B)}function xi(t){return!ge(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Gi(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),xi(t)}function fo(t,o){var c,m,x,B,K,ue,Me,Ge;if(!t||t.length===0)throw new Error("latlngs not passed");xi(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var it=Xe([0,0]),pt=et(t),Et=pt.getNorthWest().distanceTo(pt.getSouthWest())*pt.getNorthEast().distanceTo(pt.getNorthWest());Et<1700&&(it=co(t));var yi=t.length,ai=[];for(c=0;c<yi;c++){var Li=Xe(t[c]);ai.push(o.project(Xe([Li.lat-it.lat,Li.lng-it.lng])))}for(c=0,m=0;c<yi-1;c++)m+=ai[c].distanceTo(ai[c+1])/2;if(m===0)Ge=ai[0];else for(c=0,B=0;c<yi-1;c++)if(K=ai[c],ue=ai[c+1],x=K.distanceTo(ue),B+=x,B>m){Me=(B-m)/x,Ge=[ue.x-Me*(ue.x-K.x),ue.y-Me*(ue.y-K.y)];break}var Kt=o.unproject(re(Ge));return Xe([Kt.lat+it.lat,Kt.lng+it.lng])}var hs={__proto__:null,simplify:Ma,pointToSegmentDistance:ho,closestPointOnSegment:gu,clipSegment:qn,_getEdgeIntersection:Pn,_getBitCode:bi,_sqClosestPointOnSegment:Dr,isFlat:xi,_flat:Gi,polylineCenter:fo},po={project:function(t){return new Z(t.lng,t.lat)},unproject:function(t){return new nt(t.y,t.x)},bounds:new be([-180,-90],[180,90])},Vi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new be([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var o=Math.PI/180,c=this.R,m=t.lat*o,x=this.R_MINOR/c,B=Math.sqrt(1-x*x),K=B*Math.sin(m),ue=Math.tan(Math.PI/4-m/2)/Math.pow((1-K)/(1+K),B/2);return m=-c*Math.log(Math.max(ue,1e-10)),new Z(t.lng*o*c,m)},unproject:function(t){for(var o=180/Math.PI,c=this.R,m=this.R_MINOR/c,x=Math.sqrt(1-m*m),B=Math.exp(-t.y/c),K=Math.PI/2-2*Math.atan(B),ue=0,Me=.1,Ge;ue<15&&Math.abs(Me)>1e-7;ue++)Ge=x*Math.sin(K),Ge=Math.pow((1-Ge)/(1+Ge),x/2),Me=Math.PI/2-2*Math.atan(B*Ge)-K,K+=Me;return new nt(K*o,t.x*o/c)}},on={__proto__:null,LonLat:po,Mercator:Vi,SphericalMercator:Ye},ds=h({},Ke,{code:"EPSG:3395",projection:Vi,transformation:function(){var t=.5/(Math.PI*Vi.R);return U(t,.5,-t,.5)}()}),mo=h({},Ke,{code:"EPSG:4326",projection:po,transformation:U(1/180,1,-1/180,.5)}),go=h({},ke,{projection:po,transformation:U(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,o){var c=o.lng-t.lng,m=o.lat-t.lat;return Math.sqrt(c*c+m*m)},infinite:!0});ke.Earth=Ke,ke.EPSG3395=ds,ke.EPSG3857=H,ke.EPSG900913=ae,ke.EPSG4326=mo,ke.Simple=go;var gi=Ee.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[v(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[v(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var o=t.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var c=this.getEvents();o.on(c,this),this.once("remove",function(){o.off(c,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});Bt.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var o=v(t);return this._layers[o]?this:(this._layers[o]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var o=v(t);return this._layers[o]?(this._loaded&&t.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return v(t)in this._layers},eachLayer:function(t,o){for(var c in this._layers)t.call(o,this._layers[c]);return this},_addLayers:function(t){t=t?ge(t)?t:[t]:[];for(var o=0,c=t.length;o<c;o++)this.addLayer(t[o])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[v(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var o=v(t);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,o=-1/0,c=this._getZoomSpan();for(var m in this._zoomBoundLayers){var x=this._zoomBoundLayers[m].options;t=x.minZoom===void 0?t:Math.min(t,x.minZoom),o=x.maxZoom===void 0?o:Math.max(o,x.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=t===1/0?void 0:t,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var lr=gi.extend({initialize:function(t,o){z(this,o),this._layers={};var c,m;if(t)for(c=0,m=t.length;c<m;c++)this.addLayer(t[c])},addLayer:function(t){var o=this.getLayerId(t);return this._layers[o]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var o=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(t){var o=typeof t=="number"?t:this.getLayerId(t);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var o=Array.prototype.slice.call(arguments,1),c,m;for(c in this._layers)m=this._layers[c],m[t]&&m[t].apply(m,o);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,o){for(var c in this._layers)t.call(o,this._layers[c]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return v(t)}}),yu=function(t,o){return new lr(t,o)},Ji=lr.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),lr.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),lr.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new Je;for(var o in this._layers){var c=this._layers[o];t.extend(c.getBounds?c.getBounds():c.getLatLng())}return t}}),vu=function(t,o){return new Ji(t,o)},ur=ie.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){z(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,o){var c=this._getIconUrl(t);if(!c){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var m=this._createImg(c,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(m,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),m},_setIconStyles:function(t,o){var c=this.options,m=c[o+"Size"];typeof m=="number"&&(m=[m,m]);var x=re(m),B=re(o==="shadow"&&c.shadowAnchor||c.iconAnchor||x&&x.divideBy(2,!0));t.className="leaflet-marker-"+o+" "+(c.className||""),B&&(t.style.marginLeft=-B.x+"px",t.style.marginTop=-B.y+"px"),x&&(t.style.width=x.x+"px",t.style.height=x.y+"px")},_createImg:function(t,o){return o=o||document.createElement("img"),o.src=t,o},_getIconUrl:function(t){return ct.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function bu(t){return new ur(t)}var Rr=ur.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Rr.imagePath!="string"&&(Rr.imagePath=this._detectIconPath()),(this.options.imagePath||Rr.imagePath)+ur.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var o=function(c,m,x){var B=m.exec(c);return B&&B[x]};return t=o(t,/^url\((['"])?(.+)\1\)$/,2),t&&o(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=Dt("div","leaflet-default-icon-path",document.body),o=kn(t,"background-image")||kn(t,"backgroundImage");if(document.body.removeChild(t),o=this._stripUrl(o),o)return o;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),fs=mi.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Mn(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),xt(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Wt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var o=this._marker,c=o._map,m=this._marker.options.autoPanSpeed,x=this._marker.options.autoPanPadding,B=jn(o._icon),K=c.getPixelBounds(),ue=c.getPixelOrigin(),Me=me(K.min._subtract(ue).add(x),K.max._subtract(ue).subtract(x));if(!Me.contains(B)){var Ge=re((Math.max(Me.max.x,B.x)-Me.max.x)/(K.max.x-Me.max.x)-(Math.min(Me.min.x,B.x)-Me.min.x)/(K.min.x-Me.min.x),(Math.max(Me.max.y,B.y)-Me.max.y)/(K.max.y-Me.max.y)-(Math.min(Me.min.y,B.y)-Me.min.y)/(K.min.y-Me.min.y)).multiplyBy(m);c.panBy(Ge,{animate:!1}),this._draggable._newPos._add(Ge),this._draggable._startPos._add(Ge),Qt(o._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=ee(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(De(this._panRequest),this._panRequest=ee(this._adjustPan.bind(this,t)))},_onDrag:function(t){var o=this._marker,c=o._shadow,m=jn(o._icon),x=o._map.layerPointToLatLng(m);c&&Qt(c,m),o._latlng=x,t.latlng=x,t.oldLatLng=this._oldLatLng,o.fire("move",t).fire("drag",t)},_onDragEnd:function(t){De(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),ps=gi.extend({options:{icon:new Rr,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,o){z(this,o),this._latlng=Xe(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var o=this._latlng;return this._latlng=Xe(t),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=t.icon.createIcon(this._icon),m=!1;c!==this._icon&&(this._icon&&this._removeIcon(),m=!0,t.title&&(c.title=t.title),c.tagName==="IMG"&&(c.alt=t.alt||"")),xt(c,o),t.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&bt(c,"focus",this._panOnFocus,this);var x=t.icon.createShadow(this._shadow),B=!1;x!==this._shadow&&(this._removeShadow(),B=!0),x&&(xt(x,o),x.alt=""),this._shadow=x,t.opacity<1&&this._updateOpacity(),m&&this.getPane().appendChild(this._icon),this._initInteraction(),x&&B&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ut(this._icon,"focus",this._panOnFocus,this),Ht(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ht(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&Qt(this._icon,t),this._shadow&&Qt(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(xt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),fs)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new fs(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&ji(this._icon,t),this._shadow&&ji(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var o=this.options.icon.options,c=o.iconSize?re(o.iconSize):re(0,0),m=o.iconAnchor?re(o.iconAnchor):re(0,0);t.panInside(this._latlng,{paddingTopLeft:m,paddingBottomRight:c.subtract(m)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function xu(t,o){return new ps(t,o)}var gn=gi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return z(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),an=gn.extend({options:{fill:!0,radius:10},initialize:function(t,o){z(this,o),this._latlng=Xe(t),this._radius=this.options.radius},setLatLng:function(t){var o=this._latlng;return this._latlng=Xe(t),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var o=t&&t.radius||this._radius;return gn.prototype.setStyle.call(this,t),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,o=this._radiusY||t,c=this._clickTolerance(),m=[t+c,o+c];this._pxBounds=new be(this._point.subtract(m),this._point.add(m))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Sa(t,o){return new an(t,o)}var _o=an.extend({initialize:function(t,o,c){if(typeof o=="number"&&(o=h({},c,{radius:o})),z(this,o),this._latlng=Xe(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new Je(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:gn.prototype.setStyle,_project:function(){var t=this._latlng.lng,o=this._latlng.lat,c=this._map,m=c.options.crs;if(m.distance===Ke.distance){var x=Math.PI/180,B=this._mRadius/Ke.R/x,K=c.project([o+B,t]),ue=c.project([o-B,t]),Me=K.add(ue).divideBy(2),Ge=c.unproject(Me).lat,it=Math.acos((Math.cos(B*x)-Math.sin(o*x)*Math.sin(Ge*x))/(Math.cos(o*x)*Math.cos(Ge*x)))/x;(isNaN(it)||it===0)&&(it=B/Math.cos(Math.PI/180*o)),this._point=Me.subtract(c.getPixelOrigin()),this._radius=isNaN(it)?0:Me.x-c.project([Ge,t-it]).x,this._radiusY=Me.y-K.y}else{var pt=m.unproject(m.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(pt).x}this._updateBounds()}});function Kn(t,o,c){return new _o(t,o,c)}var _n=gn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,o){z(this,o),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var o=1/0,c=null,m=Dr,x,B,K=0,ue=this._parts.length;K<ue;K++)for(var Me=this._parts[K],Ge=1,it=Me.length;Ge<it;Ge++){x=Me[Ge-1],B=Me[Ge];var pt=m(t,x,B,!0);pt<o&&(o=pt,c=m(t,x,B))}return c&&(c.distance=Math.sqrt(o)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return fo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,o){return o=o||this._defaultShape(),t=Xe(t),o.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new Je,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return xi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var o=[],c=xi(t),m=0,x=t.length;m<x;m++)c?(o[m]=Xe(t[m]),this._bounds.extend(o[m])):o[m]=this._convertLatLngs(t[m]);return o},_project:function(){var t=new be;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),o=new Z(t,t);this._rawPxBounds&&(this._pxBounds=new be([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(t,o,c){var m=t[0]instanceof nt,x=t.length,B,K;if(m){for(K=[],B=0;B<x;B++)K[B]=this._map.latLngToLayerPoint(t[B]),c.extend(K[B]);o.push(K)}else for(B=0;B<x;B++)this._projectLatlngs(t[B],o,c)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,c,m,x,B,K,ue,Me;for(c=0,x=0,B=this._rings.length;c<B;c++)for(Me=this._rings[c],m=0,K=Me.length;m<K-1;m++)ue=qn(Me[m],Me[m+1],t,m,!0),ue&&(o[x]=o[x]||[],o[x].push(ue[0]),(ue[1]!==Me[m+1]||m===K-2)&&(o[x].push(ue[1]),x++))}},_simplifyPoints:function(){for(var t=this._parts,o=this.options.smoothFactor,c=0,m=t.length;c<m;c++)t[c]=Ma(t[c],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,o){var c,m,x,B,K,ue,Me=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(c=0,B=this._parts.length;c<B;c++)for(ue=this._parts[c],m=0,K=ue.length,x=K-1;m<K;x=m++)if(!(!o&&m===0)&&ho(t,ue[x],ue[m])<=Me)return!0;return!1}});function wu(t,o){return new _n(t,o)}_n._flat=Gi;var Sn=_n.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ea(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var o=_n.prototype._convertLatLngs.call(this,t),c=o.length;return c>=2&&o[0]instanceof nt&&o[0].equals(o[c-1])&&o.pop(),o},_setLatLngs:function(t){_n.prototype._setLatLngs.call(this,t),xi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return xi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,o=this.options.weight,c=new Z(o,o);if(t=new be(t.min.subtract(c),t.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var m=0,x=this._rings.length,B;m<x;m++)B=ka(this._rings[m],t,!0),B.length&&this._parts.push(B)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var o=!1,c,m,x,B,K,ue,Me,Ge;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(B=0,Me=this._parts.length;B<Me;B++)for(c=this._parts[B],K=0,Ge=c.length,ue=Ge-1;K<Ge;ue=K++)m=c[K],x=c[ue],m.y>t.y!=x.y>t.y&&t.x<(x.x-m.x)*(t.y-m.y)/(x.y-m.y)+m.x&&(o=!o);return o||_n.prototype._containsPoint.call(this,t,!0)}});function Or(t,o){return new Sn(t,o)}var yn=Ji.extend({initialize:function(t,o){z(this,o),this._layers={},t&&this.addData(t)},addData:function(t){var o=ge(t)?t:t.features,c,m,x;if(o){for(c=0,m=o.length;c<m;c++)x=o[c],(x.geometries||x.geometry||x.features||x.coordinates)&&this.addData(x);return this}var B=this.options;if(B.filter&&!B.filter(t))return this;var K=ms(t,B);return K?(K.feature=bs(t),K.defaultOptions=K.options,this.resetStyle(K),B.onEachFeature&&B.onEachFeature(t,K),this.addLayer(K)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=h({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(o){this._setLayerStyle(o,t)},this)},_setLayerStyle:function(t,o){t.setStyle&&(typeof o=="function"&&(o=o(t.feature)),t.setStyle(o))}});function ms(t,o){var c=t.type==="Feature"?t.geometry:t,m=c?c.coordinates:null,x=[],B=o&&o.pointToLayer,K=o&&o.coordsToLatLng||gs,ue,Me,Ge,it;if(!m&&!c)return null;switch(c.type){case"Point":return ue=K(m),Ba(B,t,ue,o);case"MultiPoint":for(Ge=0,it=m.length;Ge<it;Ge++)ue=K(m[Ge]),x.push(Ba(B,t,ue,o));return new Ji(x);case"LineString":case"MultiLineString":return Me=_s(m,c.type==="LineString"?0:1,K),new _n(Me,o);case"Polygon":case"MultiPolygon":return Me=_s(m,c.type==="Polygon"?1:2,K),new Sn(Me,o);case"GeometryCollection":for(Ge=0,it=c.geometries.length;Ge<it;Ge++){var pt=ms({geometry:c.geometries[Ge],type:"Feature",properties:t.properties},o);pt&&x.push(pt)}return new Ji(x);case"FeatureCollection":for(Ge=0,it=c.features.length;Ge<it;Ge++){var Et=ms(c.features[Ge],o);Et&&x.push(Et)}return new Ji(x);default:throw new Error("Invalid GeoJSON object.")}}function Ba(t,o,c,m){return t?t(o,c):new ps(c,m&&m.markersInheritOptions&&m)}function gs(t){return new nt(t[1],t[0],t[2])}function _s(t,o,c){for(var m=[],x=0,B=t.length,K;x<B;x++)K=o?_s(t[x],o-1,c):(c||gs)(t[x]),m.push(K);return m}function ys(t,o){return t=Xe(t),t.alt!==void 0?[G(t.lng,o),G(t.lat,o),G(t.alt,o)]:[G(t.lng,o),G(t.lat,o)]}function vs(t,o,c,m){for(var x=[],B=0,K=t.length;B<K;B++)x.push(o?vs(t[B],xi(t[B])?0:o-1,c,m):ys(t[B],m));return!o&&c&&x.length>0&&x.push(x[0].slice()),x}function cr(t,o){return t.feature?h({},t.feature,{geometry:o}):bs(o)}function bs(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var xs={toGeoJSON:function(t){return cr(this,{type:"Point",coordinates:ys(this.getLatLng(),t)})}};ps.include(xs),_o.include(xs),an.include(xs),_n.include({toGeoJSON:function(t){var o=!xi(this._latlngs),c=vs(this._latlngs,o?1:0,!1,t);return cr(this,{type:(o?"Multi":"")+"LineString",coordinates:c})}}),Sn.include({toGeoJSON:function(t){var o=!xi(this._latlngs),c=o&&!xi(this._latlngs[0]),m=vs(this._latlngs,c?2:o?1:0,!0,t);return o||(m=[m]),cr(this,{type:(c?"Multi":"")+"Polygon",coordinates:m})}}),lr.include({toMultiPoint:function(t){var o=[];return this.eachLayer(function(c){o.push(c.toGeoJSON(t).geometry.coordinates)}),cr(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(t){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(t);var c=o==="GeometryCollection",m=[];return this.eachLayer(function(x){if(x.toGeoJSON){var B=x.toGeoJSON(t);if(c)m.push(B.geometry);else{var K=bs(B);K.type==="FeatureCollection"?m.push.apply(m,K.features):m.push(K)}}}),c?cr(this,{geometries:m,type:"GeometryCollection"}):{type:"FeatureCollection",features:m}}});function ws(t,o){return new yn(t,o)}var Aa=ws,hr=gi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,o,c){this._url=t,this._bounds=et(o),z(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(xt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ht(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&or(this._image),this},bringToBack:function(){return this._map&&$n(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=et(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",o=this._image=t?this._url:Dt("img");if(xt(o,"leaflet-image-layer"),this._zoomAnimated&&xt(o,"leaflet-zoom-animated"),this.options.className&&xt(o,this.options.className),o.onselectstart=P,o.onmousemove=P,o.onload=f(this.fire,this,"load"),o.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(t){var o=this._map.getZoomScale(t.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Un(this._image,c,o)},_reset:function(){var t=this._image,o=new be(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=o.getSize();Qt(t,o.min),t.style.width=c.x+"px",t.style.height=c.y+"px"},_updateOpacity:function(){ji(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Lu=function(t,o,c){return new hr(t,o,c)},Ir=hr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",o=this._image=t?this._url:Dt("video");if(xt(o,"leaflet-image-layer"),this._zoomAnimated&&xt(o,"leaflet-zoom-animated"),this.options.className&&xt(o,this.options.className),o.onselectstart=P,o.onmousemove=P,o.onloadeddata=f(this.fire,this,"load"),t){for(var c=o.getElementsByTagName("source"),m=[],x=0;x<c.length;x++)m.push(c[x].src);this._url=c.length>0?m:[o.src];return}ge(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var B=0;B<this._url.length;B++){var K=Dt("source");K.src=this._url[B],o.appendChild(K)}}});function Ta(t,o,c){return new Ir(t,o,c)}var Da=hr.extend({_initImage:function(){var t=this._image=this._url;xt(t,"leaflet-image-layer"),this._zoomAnimated&&xt(t,"leaflet-zoom-animated"),this.options.className&&xt(t,this.options.className),t.onselectstart=P,t.onmousemove=P}});function Cu(t,o,c){return new Da(t,o,c)}var ln=gi.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,o){t&&(t instanceof nt||ge(t))?(this._latlng=Xe(t),z(this,o)):(z(this,t),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&ji(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&ji(this._container,1),this.bringToFront(),this.options.interactive&&(xt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(ji(this._container,0),this._removeTimeout=setTimeout(f(Ht,void 0,this._container),200)):Ht(this._container),this.options.interactive&&(Wt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=Xe(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&or(this._container),this},bringToBack:function(){return this._map&&$n(this._container),this},_prepareOpen:function(t){var o=this._source;if(!o._map)return!1;if(o instanceof Ji){o=null;var c=this._source._layers;for(var m in c)if(c[m]._map){o=c[m];break}if(!o)return!1;this._source=o}if(!t)if(o.getCenter)t=o.getCenter();else if(o.getLatLng)t=o.getLatLng();else if(o.getBounds)t=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")t.innerHTML=o;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),o=re(this.options.offset),c=this._getAnchor();this._zoomAnimated?Qt(this._container,t.add(c)):o=o.add(t).add(c);var m=this._containerBottom=-o.y,x=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=m+"px",this._container.style.left=x+"px"}},_getAnchor:function(){return[0,0]}});Bt.include({_initOverlay:function(t,o,c,m){var x=o;return x instanceof t||(x=new t(m).setContent(o)),c&&x.setLatLng(c),x}}),gi.include({_initOverlay:function(t,o,c,m){var x=c;return x instanceof t?(z(x,m),x._source=this):(x=o&&!m?o:new t(m,this),x.setContent(c)),x}});var Bn=ln.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,ln.prototype.openOn.call(this,t)},onAdd:function(t){ln.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof gn||this._source.on("preclick",Gn))},onRemove:function(t){ln.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof gn||this._source.off("preclick",Gn))},getEvents:function(){var t=ln.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",o=this._container=Dt("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Dt("div",t+"-content-wrapper",o);if(this._contentNode=Dt("div",t+"-content",c),Ar(o),lo(this._contentNode),bt(o,"contextmenu",Gn),this._tipContainer=Dt("div",t+"-tip-container",o),this._tip=Dt("div",t+"-tip",this._tipContainer),this.options.closeButton){var m=this._closeButton=Dt("a",t+"-close-button",o);m.setAttribute("role","button"),m.setAttribute("aria-label","Close popup"),m.href="#close",m.innerHTML='<span aria-hidden="true">&#215;</span>',bt(m,"click",function(x){ci(x),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,o=t.style;o.width="",o.whiteSpace="nowrap";var c=t.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),o.width=c+1+"px",o.whiteSpace="",o.height="";var m=t.offsetHeight,x=this.options.maxHeight,B="leaflet-popup-scrolled";x&&m>x?(o.height=x+"px",xt(t,B)):Wt(t,B),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),c=this._getAnchor();Qt(this._container,o.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,o=parseInt(kn(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+o,m=this._containerWidth,x=new Z(this._containerLeft,-c-this._containerBottom);x._add(jn(this._container));var B=t.layerPointToContainerPoint(x),K=re(this.options.autoPanPadding),ue=re(this.options.autoPanPaddingTopLeft||K),Me=re(this.options.autoPanPaddingBottomRight||K),Ge=t.getSize(),it=0,pt=0;B.x+m+Me.x>Ge.x&&(it=B.x+m-Ge.x+Me.x),B.x-it-ue.x<0&&(it=B.x-ue.x),B.y+c+Me.y>Ge.y&&(pt=B.y+c-Ge.y+Me.y),B.y-pt-ue.y<0&&(pt=B.y-ue.y),(it||pt)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([it,pt]))}},_getAnchor:function(){return re(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ku=function(t,o){return new Bn(t,o)};Bt.mergeOptions({closePopupOnClick:!0}),Bt.include({openPopup:function(t,o,c){return this._initOverlay(Bn,t,o,c).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),gi.include({bindPopup:function(t,o){return this._popup=this._initOverlay(Bn,this._popup,t,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Ji||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){Vn(t);var o=t.layer||t.target;if(this._popup._source===o&&!(o instanceof gn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=o,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Ls=ln.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){ln.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){ln.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=ln.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",o=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Dt("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+v(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var o,c,m=this._map,x=this._container,B=m.latLngToContainerPoint(m.getCenter()),K=m.layerPointToContainerPoint(t),ue=this.options.direction,Me=x.offsetWidth,Ge=x.offsetHeight,it=re(this.options.offset),pt=this._getAnchor();ue==="top"?(o=Me/2,c=Ge):ue==="bottom"?(o=Me/2,c=0):ue==="center"?(o=Me/2,c=Ge/2):ue==="right"?(o=0,c=Ge/2):ue==="left"?(o=Me,c=Ge/2):K.x<B.x?(ue="right",o=0,c=Ge/2):(ue="left",o=Me+(it.x+pt.x)*2,c=Ge/2),t=t.subtract(re(o,c,!0)).add(it).add(pt),Wt(x,"leaflet-tooltip-right"),Wt(x,"leaflet-tooltip-left"),Wt(x,"leaflet-tooltip-top"),Wt(x,"leaflet-tooltip-bottom"),xt(x,"leaflet-tooltip-"+ue),Qt(x,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&ji(this._container,t)},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(o)},_getAnchor:function(){return re(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Eu=function(t,o){return new Ls(t,o)};Bt.include({openTooltip:function(t,o,c){return this._initOverlay(Ls,t,o,c).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),gi.include({bindTooltip:function(t,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ls,this._tooltip,t,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var o=t?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[o](c),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Ji||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var o=typeof t.getElement=="function"&&t.getElement();o&&(bt(o,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),bt(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var o=typeof t.getElement=="function"&&t.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var o=t.latlng,c,m;this._tooltip.options.sticky&&t.originalEvent&&(c=this._map.mouseEventToContainerPoint(t.originalEvent),m=this._map.containerPointToLayerPoint(c),o=this._map.layerPointToLatLng(m)),this._tooltip.setLatLng(o)}});var Ra=ur.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var o=t&&t.tagName==="DIV"?t:document.createElement("div"),c=this.options;if(c.html instanceof Element?(Pr(o),o.appendChild(c.html)):o.innerHTML=c.html!==!1?c.html:"",c.bgPos){var m=re(c.bgPos);o.style.backgroundPosition=-m.x+"px "+-m.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function Mu(t){return new Ra(t)}ur.Default=Rr;var Fr=gi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ct.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){z(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Ht(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(or(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&($n(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=C(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof Z?t:new Z(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var o=this.getPane().children,c=-t(-1/0,1/0),m=0,x=o.length,B;m<x;m++)B=o[m].style.zIndex,o[m]!==this._container&&B&&(c=t(c,+B));isFinite(c)&&(this.options.zIndex=c+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ct.ielt9){ji(this._container,this.options.opacity);var t=+new Date,o=!1,c=!1;for(var m in this._tiles){var x=this._tiles[m];if(!(!x.current||!x.loaded)){var B=Math.min(1,(t-x.loaded)/200);ji(x.el,B),B<1?o=!0:(x.active?c=!0:this._onOpaqueTile(x),x.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),o&&(De(this._fadeFrame),this._fadeFrame=ee(this._updateOpacity,this))}},_onOpaqueTile:P,_initContainer:function(){this._container||(this._container=Dt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,o=this.options.maxZoom;if(t!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===t?(this._levels[c].el.style.zIndex=o-Math.abs(t-c),this._onUpdateLevel(c)):(Ht(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var m=this._levels[t],x=this._map;return m||(m=this._levels[t]={},m.el=Dt("div","leaflet-tile-container leaflet-zoom-animated",this._container),m.el.style.zIndex=o,m.origin=x.project(x.unproject(x.getPixelOrigin()),t).round(),m.zoom=t,this._setZoomTransform(m,x.getCenter(),x.getZoom()),P(m.el.offsetWidth),this._onCreateLevel(m)),this._level=m,m}},_onUpdateLevel:P,_onRemoveLevel:P,_onCreateLevel:P,_pruneTiles:function(){if(this._map){var t,o,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)o=this._tiles[t],o.retain=o.current;for(t in this._tiles)if(o=this._tiles[t],o.current&&!o.active){var m=o.coords;this._retainParent(m.x,m.y,m.z,m.z-5)||this._retainChildren(m.x,m.y,m.z,m.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var o in this._tiles)this._tiles[o].coords.z===t&&this._removeTile(o)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Ht(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,o,c,m){var x=Math.floor(t/2),B=Math.floor(o/2),K=c-1,ue=new Z(+x,+B);ue.z=+K;var Me=this._tileCoordsToKey(ue),Ge=this._tiles[Me];return Ge&&Ge.active?(Ge.retain=!0,!0):(Ge&&Ge.loaded&&(Ge.retain=!0),K>m?this._retainParent(x,B,K,m):!1)},_retainChildren:function(t,o,c,m){for(var x=2*t;x<2*t+2;x++)for(var B=2*o;B<2*o+2;B++){var K=new Z(x,B);K.z=c+1;var ue=this._tileCoordsToKey(K),Me=this._tiles[ue];if(Me&&Me.active){Me.retain=!0;continue}else Me&&Me.loaded&&(Me.retain=!0);c+1<m&&this._retainChildren(x,B,c+1,m)}},_resetView:function(t){var o=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var o=this.options;return o.minNativeZoom!==void 0&&t<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<t?o.maxNativeZoom:t},_setView:function(t,o,c,m){var x=Math.round(o);this.options.maxZoom!==void 0&&x>this.options.maxZoom||this.options.minZoom!==void 0&&x<this.options.minZoom?x=void 0:x=this._clampZoom(x);var B=this.options.updateWhenZooming&&x!==this._tileZoom;(!m||B)&&(this._tileZoom=x,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),x!==void 0&&this._update(t),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(t,o)},_setZoomTransforms:function(t,o){for(var c in this._levels)this._setZoomTransform(this._levels[c],t,o)},_setZoomTransform:function(t,o,c){var m=this._map.getZoomScale(c,t.zoom),x=t.origin.multiplyBy(m).subtract(this._map._getNewPixelOrigin(o,c)).round();ct.any3d?Un(t.el,x,m):Qt(t.el,x)},_resetGrid:function(){var t=this._map,o=t.options.crs,c=this._tileSize=this.getTileSize(),m=this._tileZoom,x=this._map.getPixelWorldBounds(this._tileZoom);x&&(this._globalTileRange=this._pxBoundsToTileRange(x)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,o.wrapLng[0]],m).x/c.x),Math.ceil(t.project([0,o.wrapLng[1]],m).x/c.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([o.wrapLat[0],0],m).y/c.x),Math.ceil(t.project([o.wrapLat[1],0],m).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var o=this._map,c=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),m=o.getZoomScale(c,this._tileZoom),x=o.project(t,this._tileZoom).floor(),B=o.getSize().divideBy(m*2);return new be(x.subtract(B),x.add(B))},_update:function(t){var o=this._map;if(o){var c=this._clampZoom(o.getZoom());if(t===void 0&&(t=o.getCenter()),this._tileZoom!==void 0){var m=this._getTiledPixelBounds(t),x=this._pxBoundsToTileRange(m),B=x.getCenter(),K=[],ue=this.options.keepBuffer,Me=new be(x.getBottomLeft().subtract([ue,-ue]),x.getTopRight().add([ue,-ue]));if(!(isFinite(x.min.x)&&isFinite(x.min.y)&&isFinite(x.max.x)&&isFinite(x.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ge in this._tiles){var it=this._tiles[Ge].coords;(it.z!==this._tileZoom||!Me.contains(new Z(it.x,it.y)))&&(this._tiles[Ge].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(t,c);return}for(var pt=x.min.y;pt<=x.max.y;pt++)for(var Et=x.min.x;Et<=x.max.x;Et++){var yi=new Z(Et,pt);if(yi.z=this._tileZoom,!!this._isValidTile(yi)){var ai=this._tiles[this._tileCoordsToKey(yi)];ai?ai.current=!0:K.push(yi)}}if(K.sort(function(Kt,un){return Kt.distanceTo(B)-un.distanceTo(B)}),K.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Li=document.createDocumentFragment();for(Et=0;Et<K.length;Et++)this._addTile(K[Et],Li);this._level.el.appendChild(Li)}}}},_isValidTile:function(t){var o=this._map.options.crs;if(!o.infinite){var c=this._globalTileRange;if(!o.wrapLng&&(t.x<c.min.x||t.x>c.max.x)||!o.wrapLat&&(t.y<c.min.y||t.y>c.max.y))return!1}if(!this.options.bounds)return!0;var m=this._tileCoordsToBounds(t);return et(this.options.bounds).overlaps(m)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var o=this._map,c=this.getTileSize(),m=t.scaleBy(c),x=m.add(c),B=o.unproject(m,t.z),K=o.unproject(x,t.z);return[B,K]},_tileCoordsToBounds:function(t){var o=this._tileCoordsToNwSe(t),c=new Je(o[0],o[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var o=t.split(":"),c=new Z(+o[0],+o[1]);return c.z=+o[2],c},_removeTile:function(t){var o=this._tiles[t];o&&(Ht(o.el),delete this._tiles[t],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){xt(t,"leaflet-tile");var o=this.getTileSize();t.style.width=o.x+"px",t.style.height=o.y+"px",t.onselectstart=P,t.onmousemove=P,ct.ielt9&&this.options.opacity<1&&ji(t,this.options.opacity)},_addTile:function(t,o){var c=this._getTilePos(t),m=this._tileCoordsToKey(t),x=this.createTile(this._wrapCoords(t),f(this._tileReady,this,t));this._initTile(x),this.createTile.length<2&&ee(f(this._tileReady,this,t,null,x)),Qt(x,c),this._tiles[m]={el:x,coords:t,current:!0},o.appendChild(x),this.fire("tileloadstart",{tile:x,coords:t})},_tileReady:function(t,o,c){o&&this.fire("tileerror",{error:o,tile:c,coords:t});var m=this._tileCoordsToKey(t);c=this._tiles[m],c&&(c.loaded=+new Date,this._map._fadeAnimated?(ji(c.el,0),De(this._fadeFrame),this._fadeFrame=ee(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),o||(xt(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ct.ielt9||!this._map._fadeAnimated?ee(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var o=new Z(this._wrapX?M(t.x,this._wrapX):t.x,this._wrapY?M(t.y,this._wrapY):t.y);return o.z=t.z,o},_pxBoundsToTileRange:function(t){var o=this.getTileSize();return new be(t.min.unscaleBy(o).floor(),t.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Pu(t){return new Fr(t)}var dr=Fr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,o){this._url=t,o=z(this,o),o.detectRetina&&ct.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,o){return this._url===t&&o===void 0&&(o=!0),this._url=t,o||this.redraw(),this},createTile:function(t,o){var c=document.createElement("img");return bt(c,"load",f(this._tileOnLoad,this,o,c)),bt(c,"error",f(this._tileOnError,this,o,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(t),c},getTileUrl:function(t){var o={r:ct.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-t.y;this.options.tms&&(o.y=c),o["-y"]=c}return Be(this._url,h(o,this.options))},_tileOnLoad:function(t,o){ct.ielt9?setTimeout(f(t,this,null,o),0):t(null,o)},_tileOnError:function(t,o,c){var m=this.options.errorTileUrl;m&&o.getAttribute("src")!==m&&(o.src=m),t(c,o)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,o=this.options.maxZoom,c=this.options.zoomReverse,m=this.options.zoomOffset;return c&&(t=o-t),t+m},_getSubdomain:function(t){var o=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var t,o;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(o=this._tiles[t].el,o.onload=P,o.onerror=P,!o.complete)){o.src=Ue;var c=this._tiles[t].coords;Ht(o),delete this._tiles[t],this.fire("tileabort",{tile:o,coords:c})}},_removeTile:function(t){var o=this._tiles[t];if(o)return o.el.setAttribute("src",Ue),Fr.prototype._removeTile.call(this,t)},_tileReady:function(t,o,c){if(!(!this._map||c&&c.getAttribute("src")===Ue))return Fr.prototype._tileReady.call(this,t,o,c)}});function yo(t,o){return new dr(t,o)}var Cs=dr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,o){this._url=t;var c=h({},this.defaultWmsParams);for(var m in o)m in this.options||(c[m]=o[m]);o=z(this,o);var x=o.detectRetina&&ct.retina?2:1,B=this.getTileSize();c.width=B.x*x,c.height=B.y*x,this.wmsParams=c},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,dr.prototype.onAdd.call(this,t)},getTileUrl:function(t){var o=this._tileCoordsToNwSe(t),c=this._crs,m=me(c.project(o[0]),c.project(o[1])),x=m.min,B=m.max,K=(this._wmsVersion>=1.3&&this._crs===mo?[x.y,x.x,B.y,B.x]:[x.x,x.y,B.x,B.y]).join(","),ue=dr.prototype.getTileUrl.call(this,t);return ue+j(this.wmsParams,ue,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+K},setParams:function(t,o){return h(this.wmsParams,t),o||this.redraw(),this}});function Su(t,o){return new Cs(t,o)}dr.WMS=Cs,yo.wms=Su;var vn=gi.extend({options:{padding:.1},initialize:function(t){z(this,t),v(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),xt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,o){var c=this._map.getZoomScale(o,this._zoom),m=this._map.getSize().multiplyBy(.5+this.options.padding),x=this._map.project(this._center,o),B=m.multiplyBy(-c).add(x).subtract(this._map._getNewPixelOrigin(t,o));ct.any3d?Un(this._container,B,c):Qt(this._container,B)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,o=this._map.getSize(),c=this._map.containerPointToLayerPoint(o.multiplyBy(-t)).round();this._bounds=new be(c,c.add(o.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),vo=vn.extend({options:{tolerance:0},getEvents:function(){var t=vn.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){vn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");bt(t,"mousemove",this._onMouseMove,this),bt(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),bt(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){De(this._redrawRequest),delete this._ctx,Ht(this._container),Ut(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var o in this._layers)t=this._layers[o],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){vn.prototype._update.call(this);var t=this._bounds,o=this._container,c=t.getSize(),m=ct.retina?2:1;Qt(o,t.min),o.width=m*c.x,o.height=m*c.y,o.style.width=c.x+"px",o.style.height=c.y+"px",ct.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){vn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[v(t)]=t;var o=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var o=t._order,c=o.next,m=o.prev;c?c.prev=m:this._drawLast=m,m?m.next=c:this._drawFirst=c,delete t._order,delete this._layers[v(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var o=t.options.dashArray.split(/[, ]+/),c=[],m,x;for(x=0;x<o.length;x++){if(m=Number(o[x]),isNaN(m))return;c.push(m)}t.options._dashArray=c}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||ee(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var o=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new be,this._redrawBounds.extend(t._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(t._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var o=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,o=this._redrawBounds;if(this._ctx.save(),o){var c=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var m=this._drawFirst;m;m=m.next)t=m.layer,(!o||t._pxBounds&&t._pxBounds.intersects(o))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,o){if(this._drawing){var c,m,x,B,K=t._parts,ue=K.length,Me=this._ctx;if(ue){for(Me.beginPath(),c=0;c<ue;c++){for(m=0,x=K[c].length;m<x;m++)B=K[c][m],Me[m?"lineTo":"moveTo"](B.x,B.y);o&&Me.closePath()}this._fillStroke(Me,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var o=t._point,c=this._ctx,m=Math.max(Math.round(t._radius),1),x=(Math.max(Math.round(t._radiusY),1)||m)/m;x!==1&&(c.save(),c.scale(1,x)),c.beginPath(),c.arc(o.x,o.y/x,m,0,Math.PI*2,!1),x!==1&&c.restore(),this._fillStroke(c,t)}},_fillStroke:function(t,o){var c=o.options;c.fill&&(t.globalAlpha=c.fillOpacity,t.fillStyle=c.fillColor||c.color,t.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(t.setLineDash&&t.setLineDash(o.options&&o.options._dashArray||[]),t.globalAlpha=c.opacity,t.lineWidth=c.weight,t.strokeStyle=c.color,t.lineCap=c.lineCap,t.lineJoin=c.lineJoin,t.stroke())},_onClick:function(t){for(var o=this._map.mouseEventToLayerPoint(t),c,m,x=this._drawFirst;x;x=x.next)c=x.layer,c.options.interactive&&c._containsPoint(o)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(c))&&(m=c);this._fireEvent(m?[m]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,o)}},_handleMouseOut:function(t){var o=this._hoveredLayer;o&&(Wt(this._container,"leaflet-interactive"),this._fireEvent([o],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,o){if(!this._mouseHoverThrottled){for(var c,m,x=this._drawFirst;x;x=x.next)c=x.layer,c.options.interactive&&c._containsPoint(o)&&(m=c);m!==this._hoveredLayer&&(this._handleMouseOut(t),m&&(xt(this._container,"leaflet-interactive"),this._fireEvent([m],t,"mouseover"),this._hoveredLayer=m)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(f(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,o,c){this._map._fireDOMEvent(o,c||o.type,t)},_bringToFront:function(t){var o=t._order;if(o){var c=o.next,m=o.prev;if(c)c.prev=m;else return;m?m.next=c:c&&(this._drawFirst=c),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(t)}},_bringToBack:function(t){var o=t._order;if(o){var c=o.next,m=o.prev;if(m)m.next=c;else return;c?c.prev=m:m&&(this._drawLast=m),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(t)}}});function ks(t){return ct.canvas?new vo(t):null}var Nr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Bu={_initContainer:function(){this._container=Dt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(vn.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var o=t._container=Nr("shape");xt(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",t._path=Nr("path"),o.appendChild(t._path),this._updateStyle(t),this._layers[v(t)]=t},_addPath:function(t){var o=t._container;this._container.appendChild(o),t.options.interactive&&t.addInteractiveTarget(o)},_removePath:function(t){var o=t._container;Ht(o),t.removeInteractiveTarget(o),delete this._layers[v(t)]},_updateStyle:function(t){var o=t._stroke,c=t._fill,m=t.options,x=t._container;x.stroked=!!m.stroke,x.filled=!!m.fill,m.stroke?(o||(o=t._stroke=Nr("stroke")),x.appendChild(o),o.weight=m.weight+"px",o.color=m.color,o.opacity=m.opacity,m.dashArray?o.dashStyle=ge(m.dashArray)?m.dashArray.join(" "):m.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=m.lineCap.replace("butt","flat"),o.joinstyle=m.lineJoin):o&&(x.removeChild(o),t._stroke=null),m.fill?(c||(c=t._fill=Nr("fill")),x.appendChild(c),c.color=m.fillColor||m.color,c.opacity=m.fillOpacity):c&&(x.removeChild(c),t._fill=null)},_updateCircle:function(t){var o=t._point.round(),c=Math.round(t._radius),m=Math.round(t._radiusY||c);this._setPath(t,t._empty()?"M0 0":"AL "+o.x+","+o.y+" "+c+","+m+" 0,"+65535*360)},_setPath:function(t,o){t._path.v=o},_bringToFront:function(t){or(t._container)},_bringToBack:function(t){$n(t._container)}},fr=ct.vml?Nr:Fe,fi=vn.extend({_initContainer:function(){this._container=fr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=fr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ht(this._container),Ut(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){vn.prototype._update.call(this);var t=this._bounds,o=t.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,c.setAttribute("width",o.x),c.setAttribute("height",o.y)),Qt(c,t.min),c.setAttribute("viewBox",[t.min.x,t.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(t){var o=t._path=fr("path");t.options.className&&xt(o,t.options.className),t.options.interactive&&xt(o,"leaflet-interactive"),this._updateStyle(t),this._layers[v(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Ht(t._path),t.removeInteractiveTarget(t._path),delete this._layers[v(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var o=t._path,c=t.options;o&&(c.stroke?(o.setAttribute("stroke",c.color),o.setAttribute("stroke-opacity",c.opacity),o.setAttribute("stroke-width",c.weight),o.setAttribute("stroke-linecap",c.lineCap),o.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?o.setAttribute("stroke-dasharray",c.dashArray):o.removeAttribute("stroke-dasharray"),c.dashOffset?o.setAttribute("stroke-dashoffset",c.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),c.fill?(o.setAttribute("fill",c.fillColor||c.color),o.setAttribute("fill-opacity",c.fillOpacity),o.setAttribute("fill-rule",c.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(t,o){this._setPath(t,$e(t._parts,o))},_updateCircle:function(t){var o=t._point,c=Math.max(Math.round(t._radius),1),m=Math.max(Math.round(t._radiusY),1)||c,x="a"+c+","+m+" 0 1,0 ",B=t._empty()?"M0 0":"M"+(o.x-c)+","+o.y+x+c*2+",0 "+x+-c*2+",0 ";this._setPath(t,B)},_setPath:function(t,o){t._path.setAttribute("d",o)},_bringToFront:function(t){or(t._path)},_bringToBack:function(t){$n(t._path)}});ct.vml&&fi.include(Bu);function _i(t){return ct.svg||ct.vml?new fi(t):null}Bt.include({getRenderer:function(t){var o=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var o=this._paneRenderers[t];return o===void 0&&(o=this._createRenderer({pane:t}),this._paneRenderers[t]=o),o},_createRenderer:function(t){return this.options.preferCanvas&&ks(t)||_i(t)}});var bo=Sn.extend({initialize:function(t,o){Sn.prototype.initialize.call(this,this._boundsToLatLngs(t),o)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=et(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Xi(t,o){return new bo(t,o)}fi.create=fr,fi.pointsToPath=$e,yn.geometryToLayer=ms,yn.coordsToLatLng=gs,yn.coordsToLatLngs=_s,yn.latLngToCoords=ys,yn.latLngsToCoords=vs,yn.getFeature=cr,yn.asFeature=bs,Bt.mergeOptions({boxZoom:!0});var _t=mi.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){bt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ut(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ht(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Sr(),to(),this._startPoint=this._map.mouseEventToContainerPoint(t),bt(document,{contextmenu:Vn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=Dt("div","leaflet-zoom-box",this._container),xt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var o=new be(this._point,this._startPoint),c=o.getSize();Qt(this._box,o.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(Ht(this._box),Wt(this._container,"leaflet-crosshair")),Br(),io(),Ut(document,{contextmenu:Vn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var o=new Je(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Bt.addInitHook("addHandler","boxZoom",_t),Bt.mergeOptions({doubleClickZoom:!0});var xo=mi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var o=this._map,c=o.getZoom(),m=o.options.zoomDelta,x=t.originalEvent.shiftKey?c-m:c+m;o.options.doubleClickZoom==="center"?o.setZoom(x):o.setZoomAround(t.containerPoint,x)}});Bt.addInitHook("addHandler","doubleClickZoom",xo),Bt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Es=mi.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Mn(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}xt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Wt(this._map._container,"leaflet-grab"),Wt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=et(this._map.options.maxBounds);this._offsetLimit=me(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var o=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(o),this._prunePositions(o)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,o){return t-(t-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;t.x<o.min.x&&(t.x=this._viscousLimit(t.x,o.min.x)),t.y<o.min.y&&(t.y=this._viscousLimit(t.y,o.min.y)),t.x>o.max.x&&(t.x=this._viscousLimit(t.x,o.max.x)),t.y>o.max.y&&(t.y=this._viscousLimit(t.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,o=Math.round(t/2),c=this._initialWorldOffset,m=this._draggable._newPos.x,x=(m-o+c)%t+o-c,B=(m+o+c)%t-o-c,K=Math.abs(x+c)<Math.abs(B+c)?x:B;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=K},_onDragEnd:function(t){var o=this._map,c=o.options,m=!c.inertia||t.noInertia||this._times.length<2;if(o.fire("dragend",t),m)o.fire("moveend");else{this._prunePositions(+new Date);var x=this._lastPos.subtract(this._positions[0]),B=(this._lastTime-this._times[0])/1e3,K=c.easeLinearity,ue=x.multiplyBy(K/B),Me=ue.distanceTo([0,0]),Ge=Math.min(c.inertiaMaxSpeed,Me),it=ue.multiplyBy(Ge/Me),pt=Ge/(c.inertiaDeceleration*K),Et=it.multiplyBy(-pt/2).round();!Et.x&&!Et.y?o.fire("moveend"):(Et=o._limitOffset(Et,o.options.maxBounds),ee(function(){o.panBy(Et,{duration:pt,easeLinearity:K,noMoveStart:!0,animate:!0})}))}}});Bt.addInitHook("addHandler","dragging",Es),Bt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var bn=mi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),bt(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ut(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,o=document.documentElement,c=t.scrollTop||o.scrollTop,m=t.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(m,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var o=this._panKeys={},c=this.keyCodes,m,x;for(m=0,x=c.left.length;m<x;m++)o[c.left[m]]=[-1*t,0];for(m=0,x=c.right.length;m<x;m++)o[c.right[m]]=[t,0];for(m=0,x=c.down.length;m<x;m++)o[c.down[m]]=[0,t];for(m=0,x=c.up.length;m<x;m++)o[c.up[m]]=[0,-1*t]},_setZoomDelta:function(t){var o=this._zoomKeys={},c=this.keyCodes,m,x;for(m=0,x=c.zoomIn.length;m<x;m++)o[c.zoomIn[m]]=t;for(m=0,x=c.zoomOut.length;m<x;m++)o[c.zoomOut[m]]=-t},_addHooks:function(){bt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ut(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var o=t.keyCode,c=this._map,m;if(o in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(m=this._panKeys[o],t.shiftKey&&(m=re(m).multiplyBy(3)),c.options.maxBounds&&(m=c._limitOffset(re(m),c.options.maxBounds)),c.options.worldCopyJump){var x=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(m)));c.panTo(x)}else c.panBy(m)}else if(o in this._zoomKeys)c.setZoom(c.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;Vn(t)}}});Bt.addInitHook("addHandler","keyboard",bn),Bt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var wi=mi.extend({addHooks:function(){bt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ut(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var o=ba(t),c=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var m=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),m),Vn(t)},_performZoom:function(){var t=this._map,o=t.getZoom(),c=this._map.options.zoomSnap||0;t._stop();var m=this._delta/(this._map.options.wheelPxPerZoomLevel*4),x=4*Math.log(2/(1+Math.exp(-Math.abs(m))))/Math.LN2,B=c?Math.ceil(x/c)*c:x,K=t._limitZoom(o+(this._delta>0?B:-B))-o;this._delta=0,this._startTime=null,K&&(t.options.scrollWheelZoom==="center"?t.setZoom(o+K):t.setZoomAround(this._lastMousePos,o+K))}});Bt.addInitHook("addHandler","scrollWheelZoom",wi);var Oa=600;Bt.mergeOptions({tapHold:ct.touchNative&&ct.safari&&ct.mobile,tapTolerance:15});var Ti=mi.extend({addHooks:function(){bt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ut(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var o=t.touches[0];this._startPos=this._newPos=new Z(o.clientX,o.clientY),this._holdTimeout=setTimeout(f(function(){this._cancel(),this._isTapValid()&&(bt(document,"touchend",ci),bt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),Oa),bt(document,"touchend touchcancel contextmenu",this._cancel,this),bt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){Ut(document,"touchend",ci),Ut(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),Ut(document,"touchend touchcancel contextmenu",this._cancel,this),Ut(document,"touchmove",this._onMove,this)},_onMove:function(t){var o=t.touches[0];this._newPos=new Z(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,o){var c=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});c._simulated=!0,o.target.dispatchEvent(c)}});Bt.addInitHook("addHandler","tapHold",Ti),Bt.mergeOptions({touchZoom:ct.touch,bounceAtZoomLimits:!0});var Di=mi.extend({addHooks:function(){xt(this._map._container,"leaflet-touch-zoom"),bt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Wt(this._map._container,"leaflet-touch-zoom"),Ut(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var o=this._map;if(!(!t.touches||t.touches.length!==2||o._animatingZoom||this._zooming)){var c=o.mouseEventToContainerPoint(t.touches[0]),m=o.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(c.add(m)._divideBy(2))),this._startDist=c.distanceTo(m),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),bt(document,"touchmove",this._onTouchMove,this),bt(document,"touchend touchcancel",this._onTouchEnd,this),ci(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var o=this._map,c=o.mouseEventToContainerPoint(t.touches[0]),m=o.mouseEventToContainerPoint(t.touches[1]),x=c.distanceTo(m)/this._startDist;if(this._zoom=o.getScaleZoom(x,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&x<1||this._zoom>o.getMaxZoom()&&x>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,x===1)return}else{var B=c._add(m)._divideBy(2)._subtract(this._centerPoint);if(x===1&&B.x===0&&B.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(B),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),De(this._animRequest);var K=f(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ee(K,this,!0),ci(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,De(this._animRequest),Ut(document,"touchmove",this._onTouchMove,this),Ut(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Bt.addInitHook("addHandler","touchZoom",Di),Bt.BoxZoom=_t,Bt.DoubleClickZoom=xo,Bt.Drag=Es,Bt.Keyboard=bn,Bt.ScrollWheelZoom=wi,Bt.TapHold=Ti,Bt.TouchZoom=Di,s.Bounds=be,s.Browser=ct,s.CRS=ke,s.Canvas=vo,s.Circle=_o,s.CircleMarker=an,s.Class=ie,s.Control=vt,s.DivIcon=Ra,s.DivOverlay=ln,s.DomEvent=as,s.DomUtil=uu,s.Draggable=Mn,s.Evented=Ee,s.FeatureGroup=Ji,s.GeoJSON=yn,s.GridLayer=Fr,s.Handler=mi,s.Icon=ur,s.ImageOverlay=hr,s.LatLng=nt,s.LatLngBounds=Je,s.Layer=gi,s.LayerGroup=lr,s.LineUtil=hs,s.Map=Bt,s.Marker=ps,s.Mixin=pu,s.Path=gn,s.Point=Z,s.PolyUtil=mu,s.Polygon=Sn,s.Polyline=_n,s.Popup=Bn,s.PosAnimation=xa,s.Projection=on,s.Rectangle=bo,s.Renderer=vn,s.SVG=fi,s.SVGOverlay=Da,s.TileLayer=dr,s.Tooltip=Ls,s.Transformation=tt,s.Util=Ae,s.VideoOverlay=Ir,s.bind=f,s.bounds=me,s.canvas=ks,s.circle=Kn,s.circleMarker=Sa,s.control=Hn,s.divIcon=Mu,s.extend=h,s.featureGroup=vu,s.geoJSON=ws,s.geoJson=Aa,s.gridLayer=Pu,s.icon=bu,s.imageOverlay=Lu,s.latLng=Xe,s.latLngBounds=et,s.layerGroup=yu,s.map=wa,s.marker=xu,s.point=re,s.polygon=Or,s.polyline=wu,s.popup=ku,s.rectangle=Xi,s.setOptions=z,s.stamp=v,s.svg=_i,s.svgOverlay=Cu,s.tileLayer=yo,s.tooltip=Eu,s.transformation=U,s.version=l,s.videoOverlay=Ta;var Wn=window.L;s.noConflict=function(){return window.L=Wn,this},window.L=s})})(kc,kc.exports);var Ii=kc.exports;const st=Rp(Ii);var Hi=63710088e-1,N1={centimeters:Hi*100,centimetres:Hi*100,degrees:Hi/111325,feet:Hi*3.28084,inches:Hi*39.37,kilometers:Hi/1e3,kilometres:Hi/1e3,meters:Hi,metres:Hi,miles:Hi/1609.344,millimeters:Hi*1e3,millimetres:Hi*1e3,nauticalmiles:Hi/1852,radians:1,yards:Hi*1.0936};function yl(e,n,s){s===void 0&&(s={});var l={type:"Feature"};return(s.id===0||s.id)&&(l.id=s.id),s.bbox&&(l.bbox=s.bbox),l.properties=n||{},l.geometry=e,l}function Ec(e,n,s){s===void 0&&(s={});for(var l=0,h=e;l<h.length;l++){var p=h[l];if(p.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var f=0;f<p[p.length-1].length;f++)if(p[p.length-1][f]!==p[0][f])throw new Error("First and last Position are not equivalent.")}var y={type:"Polygon",coordinates:e};return yl(y,n,s)}function Yo(e,n,s){if(s===void 0&&(s={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var l={type:"LineString",coordinates:e};return yl(l,n,s)}function z1(e,n){n===void 0&&(n="kilometers");var s=N1[n];if(!s)throw new Error(n+" units is invalid");return e*s}function Ka(e){var n=e%360;return n*Math.PI/180}function $p(e,n,s){if(e!==null)for(var l,h,p,f,y,v,C,M=0,P=0,G,W=e.type,D=W==="FeatureCollection",z=W==="Feature",j=D?e.features.length:1,_e=0;_e<j;_e++){C=D?e.features[_e].geometry:z?e.geometry:e,G=C?C.type==="GeometryCollection":!1,y=G?C.geometries.length:1;for(var Be=0;Be<y;Be++){var ge=0,Ne=0;if(f=G?C.geometries[Be]:C,f!==null){v=f.coordinates;var Ue=f.type;switch(M=0,Ue){case null:break;case"Point":if(n(v,P,_e,ge,Ne)===!1)return!1;P++,ge++;break;case"LineString":case"MultiPoint":for(l=0;l<v.length;l++){if(n(v[l],P,_e,ge,Ne)===!1)return!1;P++,Ue==="MultiPoint"&&ge++}Ue==="LineString"&&ge++;break;case"Polygon":case"MultiLineString":for(l=0;l<v.length;l++){for(h=0;h<v[l].length-M;h++){if(n(v[l][h],P,_e,ge,Ne)===!1)return!1;P++}Ue==="MultiLineString"&&ge++,Ue==="Polygon"&&Ne++}Ue==="Polygon"&&ge++;break;case"MultiPolygon":for(l=0;l<v.length;l++){for(Ne=0,h=0;h<v[l].length;h++){for(p=0;p<v[l][h].length-M;p++){if(n(v[l][h][p],P,_e,ge,Ne)===!1)return!1;P++}Ne++}ge++}break;case"GeometryCollection":for(l=0;l<f.geometries.length;l++)if($p(f.geometries[l],n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Up(e,n){var s,l,h,p,f,y,v,C,M,P,G=0,W=e.type==="FeatureCollection",D=e.type==="Feature",z=W?e.features.length:1;for(s=0;s<z;s++){for(y=W?e.features[s].geometry:D?e.geometry:e,C=W?e.features[s].properties:D?e.properties:{},M=W?e.features[s].bbox:D?e.bbox:void 0,P=W?e.features[s].id:D?e.id:void 0,v=y?y.type==="GeometryCollection":!1,f=v?y.geometries.length:1,h=0;h<f;h++){if(p=v?y.geometries[h]:y,p===null){if(n(null,G,C,M,P)===!1)return!1;continue}switch(p.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(n(p,G,C,M,P)===!1)return!1;break}case"GeometryCollection":{for(l=0;l<p.geometries.length;l++)if(n(p.geometries[l],G,C,M,P)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}G++}}function $1(e,n,s){var l=s;return Up(e,function(h,p,f,y,v){l=n(l,h,p,f,y,v)}),l}function U1(e,n){Up(e,function(s,l,h,p,f){var y=s===null?null:s.type;switch(y){case null:case"Point":case"LineString":case"Polygon":return n(yl(s,h,{bbox:p,id:f}),l,0)===!1?!1:void 0}var v;switch(y){case"MultiPoint":v="Point";break;case"MultiLineString":v="LineString";break;case"MultiPolygon":v="Polygon";break}for(var C=0;C<s.coordinates.length;C++){var M=s.coordinates[C],P={type:v,coordinates:M};if(n(yl(P,h),l,C)===!1)return!1}})}function j1(e,n){U1(e,function(s,l,h){var p=0;if(s.geometry){var f=s.geometry.type;if(!(f==="Point"||f==="MultiPoint")){var y,v=0,C=0,M=0;if($p(s,function(P,G,W,D,z){if(y===void 0||l>v||D>C||z>M){y=P,v=l,C=D,M=z,p=0;return}var j=Yo([y,P],s.properties);if(n(j,l,h,z,p)===!1)return!1;p++,y=P})===!1)return!1}}})}function G1(e,n,s){var l=s,h=!1;return j1(e,function(p,f,y,v,C){h===!1&&s===void 0?l=p:l=n(l,p,f,y,v,C),h=!0}),l}function Md(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Mc(e,n,s){s===void 0&&(s={});var l=Md(e),h=Md(n),p=Ka(h[1]-l[1]),f=Ka(h[0]-l[0]),y=Ka(l[1]),v=Ka(h[1]),C=Math.pow(Math.sin(p/2),2)+Math.pow(Math.sin(f/2),2)*Math.cos(y)*Math.cos(v);return z1(2*Math.atan2(Math.sqrt(C),Math.sqrt(1-C)),s.units)}var Pd=6378137;function Pc(e){return $1(e,function(n,s){return n+V1(s)},0)}function V1(e){var n=0,s;switch(e.type){case"Polygon":return Sd(e.coordinates);case"MultiPolygon":for(s=0;s<e.coordinates.length;s++)n+=Sd(e.coordinates[s]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function Sd(e){var n=0;if(e&&e.length>0){n+=Math.abs(Bd(e[0]));for(var s=1;s<e.length;s++)n-=Math.abs(Bd(e[s]))}return n}function Bd(e){var n,s,l,h,p,f,y,v=0,C=e.length;if(C>2){for(y=0;y<C;y++)y===C-2?(h=C-2,p=C-1,f=0):y===C-1?(h=C-1,p=0,f=1):(h=y,p=y+1,f=y+2),n=e[h],s=e[p],l=e[f],v+=(ic(l[0])-ic(n[0]))*Math.sin(ic(s[1]));v=v*Pd*Pd/2}return v}function ic(e){return e*Math.PI/180}function vl(e,n){return n===void 0&&(n={}),G1(e,function(s,l){var h=l.geometry.coordinates;return s+Mc(h[0],h[1],n)},0)}const H1={class:"drawing-tools"},Z1={class:"mb-4"},q1={class:"grid grid-cols-2 gap-2"},K1=["onClick"],W1={class:"text-sm"},J1={key:0,class:"space-y-2"},X1={class:"bg-gray-50 p-2 rounded text-sm"},Y1={class:"font-medium"},Q1={key:0,class:"text-gray-600"},eb={class:"border rounded overflow-hidden"},tb={class:"p-3 space-y-3"},ib={class:"grid grid-cols-6 gap-2"},nb=["onClick"],rb={class:"space-y-2"},sb={class:"flex items-center gap-2"},ob={class:"flex items-center gap-2"},ab=["value"],lb={key:0,class:"flex items-center gap-2"},ub={class:"border rounded overflow-hidden"},cb={class:"p-3"},hb={class:"space-y-1 text-sm"},db={key:0},fb={key:1},pb={key:2},mb={key:3},gb={key:4},_b={key:5},yb={key:6},vb=Ki({__name:"DrawingTools",props:{currentTool:{},selectedShape:{}},emits:["tool-change","style-update","properties-update","delete-shape"],setup(e,{emit:n}){const s=e,l=n,h=[{type:"Circle",label:"Cercle"},{type:"Semicircle",label:"Demi-cercle"},{type:"Rectangle",label:"Rectangle"},{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"Text",label:"Texte"},{type:"delete",label:"Supprimer"}],p=["#2563EB","#DC2626","#059669","#D97706","#7C3AED","#DB2777"],f=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointill"},{value:"dashdot",label:"Tiret-point"}],y=qe("#3B82F6"),v=qe(.2),C=qe("#2563EB"),M=qe(1),P=qe(2),G=qe("solid"),W=qe(0),D=qe(0),z=Ct(()=>{var be,me;return(me=(be=s.selectedShape)==null?void 0:be.properties)!=null&&me.type?["Circle","Rectangle","Polygon"].includes(s.selectedShape.properties.type):!1}),j=qe(""),_e=qe(14),Be=qe("#FFFFFF"),ge=qe(1),Ne=qe("#000000"),Ue=qe(1),fe=qe({style:!1,properties:!1});let Pe=!1;const F=(be,me)=>Math.abs((be||0)-(me||0))>1e-4,X=(be,me)=>me?F(be.radius,me.radius)||F(be.area,me.area)||F(be.perimeter,me.perimeter)||F(be.width,me.width)||F(be.height,me.height)||F(be.length,me.length):!0,pe=be=>{fe.value[be]=!fe.value[be]},ee=qe(null);zi(()=>{var be;return[s.selectedShape,(be=s.selectedShape)==null?void 0:be.properties]},([be])=>{if(!(Pe||!be))try{Pe=!0;const me=be;if(!me.properties||!me.properties.type){console.warn("Invalid shape properties detected:",Rt(me.properties));return}const Je=Rt(me.properties),et=me._lastProperties;if(et&&!X(Je,et)){console.log("No significant property changes detected");return}const nt={...Je};setTimeout(()=>{var Xe,ke,Ke,Ze,Ye,tt,U,H,ae,Fe,$e;try{me._lastProperties={...nt},y.value=((Xe=me.options)==null?void 0:Xe.fillColor)||"#3B82F6",v.value=((ke=me.options)==null?void 0:ke.fillOpacity)||.2,C.value=((Ke=me.options)==null?void 0:Ke.color)||"#2563EB",M.value=((Ze=me.options)==null?void 0:Ze.opacity)||1,P.value=((Ye=me.options)==null?void 0:Ye.weight)||2,G.value=Ae(((tt=me.options)==null?void 0:tt.dashArray)||""),W.value=nt.radius||0,D.value=nt.orientation||0,me.properties.type==="text"&&(j.value=nt.text||"",_e.value=((U=nt.style)==null?void 0:U.fontSize)||14,Be.value=((H=nt.style)==null?void 0:H.backgroundColor)||"#FFFFFF",ge.value=((ae=nt.style)==null?void 0:ae.backgroundOpacity)||1,Ne.value=((Fe=nt.style)==null?void 0:Fe.borderColor)||"#000000",Ue.value=(($e=nt.style)==null?void 0:$e.borderOpacity)||1),ee.value={...nt},me.properties={...nt},l("properties-update",nt)}finally{Pe=!1}},0)}catch(me){console.error("Error in shape update:",me),Pe=!1}},{immediate:!0,deep:!0});const De=be=>{switch(be){case"dashed":return"10,10";case"dotted":return"2,5";case"dashdot":return"10,5,2,5";default:return""}},Ae=be=>{if(!be)return"solid";switch(be){case"10,10":return"dashed";case"2,5":return"dotted";case"10,5,2,5":return"dashdot";default:return"solid"}},ie=be=>{C.value=be,z.value&&(y.value=be),Le({strokeColor:be,fillColor:z.value?be:void 0})},Le=be=>{const me={...be};be.strokeStyle&&(me.dashArray=De(be.strokeStyle)),be.fillOpacity!==void 0&&(me.fillOpacity=parseFloat(be.fillOpacity)),be.strokeOpacity!==void 0&&(me.strokeOpacity=parseFloat(be.strokeOpacity)),be.strokeWidth!==void 0&&(me.weight=parseInt(be.strokeWidth)),be.strokeColor&&(me.color=be.strokeColor),l("style-update",me)},Re={Circle:"Cercle",Rectangle:"Rectangle",Polygon:"Polygone",Line:"Ligne",Semicircle:"Demi-cercle",unknown:"Inconnu"},Ee=Ct(()=>{var be,me;return(me=(be=s.selectedShape)==null?void 0:be.properties)!=null&&me.type?s.selectedShape.properties.type:"unknown"}),Z=Ct(()=>Re[Ee.value]||"Non dfini"),te=be=>be<1e4?`${be.toFixed(1)} m`:`${(be/1e4).toFixed(2)} ha`,re=be=>be<1e3?`${be.toFixed(1)} m`:`${(be/1e3).toFixed(2)} km`;return(be,me)=>{var Je,et,nt,Xe,ke,Ke,Ze,Ye;return ve(),Ce("div",H1,[w("div",Z1,[w("div",q1,[(ve(!0),Ce(kt,null,It(h.filter(tt=>tt.type!=="delete"),tt=>(ve(),Ce("button",{key:tt.type,class:$i(["flex items-center justify-center p-2 rounded border",{"bg-blue-50 border-blue-200":be.currentTool===tt.type,"hover:bg-gray-50 border-gray-200":be.currentTool!==tt.type}]),onClick:U=>be.$emit("tool-change",tt.type)},[w("span",W1,Ve(tt.label),1)],10,K1))),128))]),be.selectedShape?(ve(),Ce("button",{key:0,class:$i(["w-full mt-2 flex items-center justify-center p-2 rounded border border-red-500 bg-red-50 hover:bg-red-100 text-red-700 transition-colors duration-200",{"bg-red-100 border-red-600":be.currentTool==="delete"}]),onClick:me[0]||(me[0]=tt=>be.$emit("delete-shape"))},me[13]||(me[13]=[w("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),w("span",{class:"text-sm font-medium"},"Supprimer la forme",-1)]),2)):ft("",!0)]),be.selectedShape?(ve(),Ce("div",J1,[w("div",X1,[w("div",Y1,Ve(Z.value),1),(Je=ee.value)!=null&&Je.area?(ve(),Ce("div",Q1,Ve(te(ee.value.area)),1)):ft("",!0)]),w("div",eb,[w("button",{class:"w-full px-3 py-2 flex justify-between items-center bg-gray-50 hover:bg-gray-100",onClick:me[1]||(me[1]=tt=>pe("style"))},[me[15]||(me[15]=w("span",{class:"font-medium"},"Style",-1)),(ve(),Ce("svg",{class:$i(["w-5 h-5 transform transition-transform",{"rotate-180":!fe.value.style}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},me[14]||(me[14]=[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),St(w("div",tb,[w("div",ib,[(ve(),Ce(kt,null,It(p,tt=>w("button",{key:tt,class:"w-6 h-6 rounded-full border hover:scale-110 transition-transform",style:kl({backgroundColor:tt}),onClick:U=>ie(tt)},null,12,nb)),64))]),w("div",rb,[w("div",sb,[me[16]||(me[16]=w("span",{class:"text-xs text-gray-500"},"Contour",-1)),St(w("input",{type:"color","onUpdate:modelValue":me[2]||(me[2]=tt=>C.value=tt),class:"w-6 h-6",onChange:me[3]||(me[3]=tt=>Le({strokeColor:C.value})),title:"Couleur du contour"},null,544),[[Xt,C.value]]),St(w("input",{type:"range","onUpdate:modelValue":me[4]||(me[4]=tt=>P.value=tt),min:"1",max:"10",class:"flex-1",onChange:me[5]||(me[5]=tt=>Le({strokeWidth:P.value})),title:"paisseur du contour"},null,544),[[Xt,P.value]])]),w("div",ob,[me[17]||(me[17]=w("span",{class:"text-xs text-gray-500"},"Style",-1)),St(w("select",{"onUpdate:modelValue":me[6]||(me[6]=tt=>G.value=tt),class:"flex-1 text-sm border rounded px-1 py-0.5",onChange:me[7]||(me[7]=tt=>Le({strokeStyle:G.value}))},[(ve(),Ce(kt,null,It(f,tt=>w("option",{key:tt.value,value:tt.value},Ve(tt.label),9,ab)),64))],544),[[Qi,G.value]])]),z.value?(ve(),Ce("div",lb,[me[18]||(me[18]=w("span",{class:"text-xs text-gray-500"},"Remplissage",-1)),St(w("input",{type:"color","onUpdate:modelValue":me[8]||(me[8]=tt=>y.value=tt),class:"w-6 h-6",onChange:me[9]||(me[9]=tt=>Le({fillColor:y.value})),title:"Couleur de remplissage"},null,544),[[Xt,y.value]]),St(w("input",{type:"range","onUpdate:modelValue":me[10]||(me[10]=tt=>v.value=tt),min:"0",max:"1",step:"0.1",class:"flex-1",onChange:me[11]||(me[11]=tt=>Le({fillOpacity:v.value})),title:"Opacit du remplissage"},null,544),[[Xt,v.value]])])):ft("",!0)])],512),[[Ph,!fe.value.style]])]),w("div",ub,[w("button",{class:"w-full px-3 py-2 flex justify-between items-center bg-gray-50 hover:bg-gray-100",onClick:me[12]||(me[12]=tt=>pe("properties"))},[me[20]||(me[20]=w("span",{class:"font-medium"},"Proprits",-1)),(ve(),Ce("svg",{class:$i(["w-5 h-5 transform transition-transform",{"rotate-180":!fe.value.properties}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},me[19]||(me[19]=[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),St(w("div",cb,[w("div",hb,[(et=ee.value)!=null&&et.surfaceInterieure?(ve(),Ce("div",db," Surface intrieure: "+Ve(te(ee.value.surfaceInterieure)),1)):ft("",!0),(nt=ee.value)!=null&&nt.surfaceExterieure?(ve(),Ce("div",fb," Surface extrieure: "+Ve(te(ee.value.surfaceExterieure)),1)):ft("",!0),(Xe=ee.value)!=null&&Xe.length?(ve(),Ce("div",pb," Longueur: "+Ve(re(ee.value.length)),1)):ft("",!0),(ke=ee.value)!=null&&ke.perimeter?(ve(),Ce("div",mb," Primtre: "+Ve(re(ee.value.perimeter)),1)):ft("",!0),(Ke=ee.value)!=null&&Ke.radius?(ve(),Ce("div",gb," Rayon: "+Ve(re(ee.value.radius)),1)):ft("",!0),(Ze=ee.value)!=null&&Ze.width?(ve(),Ce("div",_b," Largeur: "+Ve(re(ee.value.width)),1)):ft("",!0),(Ye=ee.value)!=null&&Ye.height?(ve(),Ce("div",yb," Hauteur: "+Ve(re(ee.value.height)),1)):ft("",!0)])],512),[[Ph,!fe.value.properties]])])])):ft("",!0)])}}}),bb=zp(vb,[["__scopeId","data-v-98cb7951"]]);(()=>{var ah,lh;var e=Object.create,n=Object.defineProperty,s=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,h=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,f=(i,r)=>()=>(r||i((r={exports:{}}).exports,r),r.exports),y=(i,r,a,u)=>{if(r&&typeof r=="object"||typeof r=="function")for(let d of l(r))!p.call(i,d)&&d!==a&&n(i,d,{get:()=>r[d],enumerable:!(u=s(r,d))||u.enumerable});return i},v=(i,r,a)=>(a=i!=null?e(h(i)):{},y(r||!i||!i.__esModule?n(a,"default",{value:i,enumerable:!0}):a,i)),C=f((i,r)=>{function a(){this.__data__=[],this.size=0}r.exports=a}),M=f((i,r)=>{function a(u,d){return u===d||u!==u&&d!==d}r.exports=a}),P=f((i,r)=>{var a=M();function u(d,g){for(var _=d.length;_--;)if(a(d[_][0],g))return _;return-1}r.exports=u}),G=f((i,r)=>{var a=P(),u=Array.prototype,d=u.splice;function g(_){var b=this.__data__,k=a(b,_);if(k<0)return!1;var S=b.length-1;return k==S?b.pop():d.call(b,k,1),--this.size,!0}r.exports=g}),W=f((i,r)=>{var a=P();function u(d){var g=this.__data__,_=a(g,d);return _<0?void 0:g[_][1]}r.exports=u}),D=f((i,r)=>{var a=P();function u(d){return a(this.__data__,d)>-1}r.exports=u}),z=f((i,r)=>{var a=P();function u(d,g){var _=this.__data__,b=a(_,d);return b<0?(++this.size,_.push([d,g])):_[b][1]=g,this}r.exports=u}),j=f((i,r)=>{var a=C(),u=G(),d=W(),g=D(),_=z();function b(k){var S=-1,V=k==null?0:k.length;for(this.clear();++S<V;){var N=k[S];this.set(N[0],N[1])}}b.prototype.clear=a,b.prototype.delete=u,b.prototype.get=d,b.prototype.has=g,b.prototype.set=_,r.exports=b}),_e=f((i,r)=>{var a=j();function u(){this.__data__=new a,this.size=0}r.exports=u}),Be=f((i,r)=>{function a(u){var d=this.__data__,g=d.delete(u);return this.size=d.size,g}r.exports=a}),ge=f((i,r)=>{function a(u){return this.__data__.get(u)}r.exports=a}),Ne=f((i,r)=>{function a(u){return this.__data__.has(u)}r.exports=a}),Ue=f((i,r)=>{var a=typeof ir=="object"&&ir&&ir.Object===Object&&ir;r.exports=a}),fe=f((i,r)=>{var a=Ue(),u=typeof self=="object"&&self&&self.Object===Object&&self,d=a||u||Function("return this")();r.exports=d}),Pe=f((i,r)=>{var a=fe(),u=a.Symbol;r.exports=u}),F=f((i,r)=>{var a=Pe(),u=Object.prototype,d=u.hasOwnProperty,g=u.toString,_=a?a.toStringTag:void 0;function b(k){var S=d.call(k,_),V=k[_];try{k[_]=void 0;var N=!0}catch{}var de=g.call(k);return N&&(S?k[_]=V:delete k[_]),de}r.exports=b}),X=f((i,r)=>{var a=Object.prototype,u=a.toString;function d(g){return u.call(g)}r.exports=d}),pe=f((i,r)=>{var a=Pe(),u=F(),d=X(),g="[object Null]",_="[object Undefined]",b=a?a.toStringTag:void 0;function k(S){return S==null?S===void 0?_:g:b&&b in Object(S)?u(S):d(S)}r.exports=k}),ee=f((i,r)=>{function a(u){var d=typeof u;return u!=null&&(d=="object"||d=="function")}r.exports=a}),De=f((i,r)=>{var a=pe(),u=ee(),d="[object AsyncFunction]",g="[object Function]",_="[object GeneratorFunction]",b="[object Proxy]";function k(S){if(!u(S))return!1;var V=a(S);return V==g||V==_||V==d||V==b}r.exports=k}),Ae=f((i,r)=>{var a=fe(),u=a["__core-js_shared__"];r.exports=u}),ie=f((i,r)=>{var a=Ae(),u=function(){var g=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}();function d(g){return!!u&&u in g}r.exports=d}),Le=f((i,r)=>{var a=Function.prototype,u=a.toString;function d(g){if(g!=null){try{return u.call(g)}catch{}try{return g+""}catch{}}return""}r.exports=d}),Re=f((i,r)=>{var a=De(),u=ie(),d=ee(),g=Le(),_=/[\\^$.*+?()[\]{}|]/g,b=/^\[object .+?Constructor\]$/,k=Function.prototype,S=Object.prototype,V=k.toString,N=S.hasOwnProperty,de=RegExp("^"+V.call(N).replace(_,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function xe(He){if(!d(He)||u(He))return!1;var Qe=a(He)?de:b;return Qe.test(g(He))}r.exports=xe}),Ee=f((i,r)=>{function a(u,d){return u==null?void 0:u[d]}r.exports=a}),Z=f((i,r)=>{var a=Re(),u=Ee();function d(g,_){var b=u(g,_);return a(b)?b:void 0}r.exports=d}),te=f((i,r)=>{var a=Z(),u=fe(),d=a(u,"Map");r.exports=d}),re=f((i,r)=>{var a=Z(),u=a(Object,"create");r.exports=u}),be=f((i,r)=>{var a=re();function u(){this.__data__=a?a(null):{},this.size=0}r.exports=u}),me=f((i,r)=>{function a(u){var d=this.has(u)&&delete this.__data__[u];return this.size-=d?1:0,d}r.exports=a}),Je=f((i,r)=>{var a=re(),u="__lodash_hash_undefined__",d=Object.prototype,g=d.hasOwnProperty;function _(b){var k=this.__data__;if(a){var S=k[b];return S===u?void 0:S}return g.call(k,b)?k[b]:void 0}r.exports=_}),et=f((i,r)=>{var a=re(),u=Object.prototype,d=u.hasOwnProperty;function g(_){var b=this.__data__;return a?b[_]!==void 0:d.call(b,_)}r.exports=g}),nt=f((i,r)=>{var a=re(),u="__lodash_hash_undefined__";function d(g,_){var b=this.__data__;return this.size+=this.has(g)?0:1,b[g]=a&&_===void 0?u:_,this}r.exports=d}),Xe=f((i,r)=>{var a=be(),u=me(),d=Je(),g=et(),_=nt();function b(k){var S=-1,V=k==null?0:k.length;for(this.clear();++S<V;){var N=k[S];this.set(N[0],N[1])}}b.prototype.clear=a,b.prototype.delete=u,b.prototype.get=d,b.prototype.has=g,b.prototype.set=_,r.exports=b}),ke=f((i,r)=>{var a=Xe(),u=j(),d=te();function g(){this.size=0,this.__data__={hash:new a,map:new(d||u),string:new a}}r.exports=g}),Ke=f((i,r)=>{function a(u){var d=typeof u;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?u!=="__proto__":u===null}r.exports=a}),Ze=f((i,r)=>{var a=Ke();function u(d,g){var _=d.__data__;return a(g)?_[typeof g=="string"?"string":"hash"]:_.map}r.exports=u}),Ye=f((i,r)=>{var a=Ze();function u(d){var g=a(this,d).delete(d);return this.size-=g?1:0,g}r.exports=u}),tt=f((i,r)=>{var a=Ze();function u(d){return a(this,d).get(d)}r.exports=u}),U=f((i,r)=>{var a=Ze();function u(d){return a(this,d).has(d)}r.exports=u}),H=f((i,r)=>{var a=Ze();function u(d,g){var _=a(this,d),b=_.size;return _.set(d,g),this.size+=_.size==b?0:1,this}r.exports=u}),ae=f((i,r)=>{var a=ke(),u=Ye(),d=tt(),g=U(),_=H();function b(k){var S=-1,V=k==null?0:k.length;for(this.clear();++S<V;){var N=k[S];this.set(N[0],N[1])}}b.prototype.clear=a,b.prototype.delete=u,b.prototype.get=d,b.prototype.has=g,b.prototype.set=_,r.exports=b}),Fe=f((i,r)=>{var a=j(),u=te(),d=ae(),g=200;function _(b,k){var S=this.__data__;if(S instanceof a){var V=S.__data__;if(!u||V.length<g-1)return V.push([b,k]),this.size=++S.size,this;S=this.__data__=new d(V)}return S.set(b,k),this.size=S.size,this}r.exports=_}),$e=f((i,r)=>{var a=j(),u=_e(),d=Be(),g=ge(),_=Ne(),b=Fe();function k(S){var V=this.__data__=new a(S);this.size=V.size}k.prototype.clear=u,k.prototype.delete=d,k.prototype.get=g,k.prototype.has=_,k.prototype.set=b,r.exports=k}),le=f((i,r)=>{var a=Z(),u=function(){try{var d=a(Object,"defineProperty");return d({},"",{}),d}catch{}}();r.exports=u}),q=f((i,r)=>{var a=le();function u(d,g,_){g=="__proto__"&&a?a(d,g,{configurable:!0,enumerable:!0,value:_,writable:!0}):d[g]=_}r.exports=u}),Oe=f((i,r)=>{var a=q(),u=M();function d(g,_,b){(b!==void 0&&!u(g[_],b)||b===void 0&&!(_ in g))&&a(g,_,b)}r.exports=d}),Ie=f((i,r)=>{function a(u){return function(d,g,_){for(var b=-1,k=Object(d),S=_(d),V=S.length;V--;){var N=S[u?V:++b];if(g(k[N],N,k)===!1)break}return d}}r.exports=a}),ze=f((i,r)=>{var a=Ie(),u=a();r.exports=u}),Se=f((i,r)=>{var a=fe(),u=typeof i=="object"&&i&&!i.nodeType&&i,d=u&&typeof r=="object"&&r&&!r.nodeType&&r,g=d&&d.exports===u,_=g?a.Buffer:void 0,b=_?_.allocUnsafe:void 0;function k(S,V){if(V)return S.slice();var N=S.length,de=b?b(N):new S.constructor(N);return S.copy(de),de}r.exports=k}),We=f((i,r)=>{var a=fe(),u=a.Uint8Array;r.exports=u}),at=f((i,r)=>{var a=We();function u(d){var g=new d.constructor(d.byteLength);return new a(g).set(new a(d)),g}r.exports=u}),dt=f((i,r)=>{var a=at();function u(d,g){var _=g?a(d.buffer):d.buffer;return new d.constructor(_,d.byteOffset,d.length)}r.exports=u}),yt=f((i,r)=>{function a(u,d){var g=-1,_=u.length;for(d||(d=Array(_));++g<_;)d[g]=u[g];return d}r.exports=a}),Tt=f((i,r)=>{var a=ee(),u=Object.create,d=function(){function g(){}return function(_){if(!a(_))return{};if(u)return u(_);g.prototype=_;var b=new g;return g.prototype=void 0,b}}();r.exports=d}),Pt=f((i,r)=>{function a(u,d){return function(g){return u(d(g))}}r.exports=a}),ii=f((i,r)=>{var a=Pt(),u=a(Object.getPrototypeOf,Object);r.exports=u}),$t=f((i,r)=>{var a=Object.prototype;function u(d){var g=d&&d.constructor,_=typeof g=="function"&&g.prototype||a;return d===_}r.exports=u}),Bi=f((i,r)=>{var a=Tt(),u=ii(),d=$t();function g(_){return typeof _.constructor=="function"&&!d(_)?a(u(_)):{}}r.exports=g}),ui=f((i,r)=>{function a(u){return u!=null&&typeof u=="object"}r.exports=a}),Cn=f((i,r)=>{var a=pe(),u=ui(),d="[object Arguments]";function g(_){return u(_)&&a(_)==d}r.exports=g}),zn=f((i,r)=>{var a=Cn(),u=ui(),d=Object.prototype,g=d.hasOwnProperty,_=d.propertyIsEnumerable,b=a(function(){return arguments}())?a:function(k){return u(k)&&g.call(k,"callee")&&!_.call(k,"callee")};r.exports=b}),Yt=f((i,r)=>{var a=Array.isArray;r.exports=a}),Ai=f((i,r)=>{var a=9007199254740991;function u(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=a}r.exports=u}),nn=f((i,r)=>{var a=De(),u=Ai();function d(g){return g!=null&&u(g.length)&&!a(g)}r.exports=d}),Vl=f((i,r)=>{var a=nn(),u=ui();function d(g){return u(g)&&a(g)}r.exports=d}),Hl=f((i,r)=>{function a(){return!1}r.exports=a}),Zs=f((i,r)=>{var a=fe(),u=Hl(),d=typeof i=="object"&&i&&!i.nodeType&&i,g=d&&typeof r=="object"&&r&&!r.nodeType&&r,_=g&&g.exports===d,b=_?a.Buffer:void 0,k=b?b.isBuffer:void 0,S=k||u;r.exports=S}),ra=f((i,r)=>{var a=pe(),u=ii(),d=ui(),g="[object Object]",_=Function.prototype,b=Object.prototype,k=_.toString,S=b.hasOwnProperty,V=k.call(Object);function N(de){if(!d(de)||a(de)!=g)return!1;var xe=u(de);if(xe===null)return!0;var He=S.call(xe,"constructor")&&xe.constructor;return typeof He=="function"&&He instanceof He&&k.call(He)==V}r.exports=N}),sa=f((i,r)=>{var a=pe(),u=Ai(),d=ui(),g="[object Arguments]",_="[object Array]",b="[object Boolean]",k="[object Date]",S="[object Error]",V="[object Function]",N="[object Map]",de="[object Number]",xe="[object Object]",He="[object RegExp]",Qe="[object Set]",ot="[object String]",At="[object WeakMap]",$="[object ArrayBuffer]",J="[object DataView]",se="[object Float32Array]",we="[object Float64Array]",oe="[object Int8Array]",ye="[object Int16Array]",E="[object Int32Array]",A="[object Uint8Array]",R="[object Uint8ClampedArray]",T="[object Uint16Array]",O="[object Uint32Array]",I={};I[se]=I[we]=I[oe]=I[ye]=I[E]=I[A]=I[R]=I[T]=I[O]=!0,I[g]=I[_]=I[$]=I[b]=I[J]=I[k]=I[S]=I[V]=I[N]=I[de]=I[xe]=I[He]=I[Qe]=I[ot]=I[At]=!1;function Q(Y){return d(Y)&&u(Y.length)&&!!I[a(Y)]}r.exports=Q}),Zl=f((i,r)=>{function a(u){return function(d){return u(d)}}r.exports=a}),ql=f((i,r)=>{var a=Ue(),u=typeof i=="object"&&i&&!i.nodeType&&i,d=u&&typeof r=="object"&&r&&!r.nodeType&&r,g=d&&d.exports===u,_=g&&a.process,b=function(){try{var k=d&&d.require&&d.require("util").types;return k||_&&_.binding&&_.binding("util")}catch{}}();r.exports=b}),oa=f((i,r)=>{var a=sa(),u=Zl(),d=ql(),g=d&&d.isTypedArray,_=g?u(g):a;r.exports=_}),aa=f((i,r)=>{function a(u,d){if(!(d==="constructor"&&typeof u[d]=="function")&&d!="__proto__")return u[d]}r.exports=a}),Kl=f((i,r)=>{var a=q(),u=M(),d=Object.prototype,g=d.hasOwnProperty;function _(b,k,S){var V=b[k];(!(g.call(b,k)&&u(V,S))||S===void 0&&!(k in b))&&a(b,k,S)}r.exports=_}),Wl=f((i,r)=>{var a=Kl(),u=q();function d(g,_,b,k){var S=!b;b||(b={});for(var V=-1,N=_.length;++V<N;){var de=_[V],xe=k?k(b[de],g[de],de,b,g):void 0;xe===void 0&&(xe=g[de]),S?u(b,de,xe):a(b,de,xe)}return b}r.exports=d}),qs=f((i,r)=>{function a(u,d){for(var g=-1,_=Array(u);++g<u;)_[g]=d(g);return _}r.exports=a}),la=f((i,r)=>{var a=9007199254740991,u=/^(?:0|[1-9]\d*)$/;function d(g,_){var b=typeof g;return _=_??a,!!_&&(b=="number"||b!="symbol"&&u.test(g))&&g>-1&&g%1==0&&g<_}r.exports=d}),Jl=f((i,r)=>{var a=qs(),u=zn(),d=Yt(),g=Zs(),_=la(),b=oa(),k=Object.prototype,S=k.hasOwnProperty;function V(N,de){var xe=d(N),He=!xe&&u(N),Qe=!xe&&!He&&g(N),ot=!xe&&!He&&!Qe&&b(N),At=xe||He||Qe||ot,$=At?a(N.length,String):[],J=$.length;for(var se in N)(de||S.call(N,se))&&!(At&&(se=="length"||Qe&&(se=="offset"||se=="parent")||ot&&(se=="buffer"||se=="byteLength"||se=="byteOffset")||_(se,J)))&&$.push(se);return $}r.exports=V}),Xl=f((i,r)=>{function a(u){var d=[];if(u!=null)for(var g in Object(u))d.push(g);return d}r.exports=a}),Yl=f((i,r)=>{var a=ee(),u=$t(),d=Xl(),g=Object.prototype,_=g.hasOwnProperty;function b(k){if(!a(k))return d(k);var S=u(k),V=[];for(var N in k)N=="constructor"&&(S||!_.call(k,N))||V.push(N);return V}r.exports=b}),Wi=f((i,r)=>{var a=Jl(),u=Yl(),d=nn();function g(_){return d(_)?a(_,!0):u(_)}r.exports=g}),ct=f((i,r)=>{var a=Wl(),u=Wi();function d(g){return a(g,u(g))}r.exports=d}),ua=f((i,r)=>{var a=Oe(),u=Se(),d=dt(),g=yt(),_=Bi(),b=zn(),k=Yt(),S=Vl(),V=Zs(),N=De(),de=ee(),xe=ra(),He=oa(),Qe=aa(),ot=ct();function At($,J,se,we,oe,ye,E){var A=Qe($,se),R=Qe(J,se),T=E.get(R);if(T){a($,se,T);return}var O=ye?ye(A,R,se+"",$,J,E):void 0,I=O===void 0;if(I){var Q=k(R),Y=!Q&&V(R),ne=!Q&&!Y&&He(R);O=R,Q||Y||ne?k(A)?O=A:S(A)?O=g(A):Y?(I=!1,O=u(R,!0)):ne?(I=!1,O=d(R,!0)):O=[]:xe(R)||b(R)?(O=A,b(A)?O=ot(A):(!de(A)||N(A))&&(O=_(R))):I=!1}I&&(E.set(R,O),oe(O,R,we,ye,E),E.delete(R)),a($,se,O)}r.exports=At}),ca=f((i,r)=>{var a=$e(),u=Oe(),d=ze(),g=ua(),_=ee(),b=Wi(),k=aa();function S(V,N,de,xe,He){V!==N&&d(N,function(Qe,ot){if(He||(He=new a),_(Qe))g(V,N,ot,de,S,xe,He);else{var At=xe?xe(k(V,ot),Qe,ot+"",V,N,He):void 0;At===void 0&&(At=Qe),u(V,ot,At)}},b)}r.exports=S}),Ks=f((i,r)=>{function a(u){return u}r.exports=a}),ha=f((i,r)=>{function a(u,d,g){switch(g.length){case 0:return u.call(d);case 1:return u.call(d,g[0]);case 2:return u.call(d,g[0],g[1]);case 3:return u.call(d,g[0],g[1],g[2])}return u.apply(d,g)}r.exports=a}),Ws=f((i,r)=>{var a=ha(),u=Math.max;function d(g,_,b){return _=u(_===void 0?g.length-1:_,0),function(){for(var k=arguments,S=-1,V=u(k.length-_,0),N=Array(V);++S<V;)N[S]=k[_+S];S=-1;for(var de=Array(_+1);++S<_;)de[S]=k[S];return de[_]=b(N),a(g,this,de)}}r.exports=d}),da=f((i,r)=>{function a(u){return function(){return u}}r.exports=a}),sr=f((i,r)=>{var a=da(),u=le(),d=Ks(),g=u?function(_,b){return u(_,"toString",{configurable:!0,enumerable:!1,value:a(b),writable:!0})}:d;r.exports=g}),fa=f((i,r)=>{var a=800,u=16,d=Date.now;function g(_){var b=0,k=0;return function(){var S=d(),V=u-(S-k);if(k=S,V>0){if(++b>=a)return arguments[0]}else b=0;return _.apply(void 0,arguments)}}r.exports=g}),Ql=f((i,r)=>{var a=sr(),u=fa(),d=u(a);r.exports=d}),eu=f((i,r)=>{var a=Ks(),u=Ws(),d=Ql();function g(_,b){return d(u(_,b,a),_+"")}r.exports=g}),tu=f((i,r)=>{var a=M(),u=nn(),d=la(),g=ee();function _(b,k,S){if(!g(S))return!1;var V=typeof k;return(V=="number"?u(S)&&d(k,S.length):V=="string"&&k in S)?a(S[k],b):!1}r.exports=_}),iu=f((i,r)=>{var a=eu(),u=tu();function d(g){return a(function(_,b){var k=-1,S=b.length,V=S>1?b[S-1]:void 0,N=S>2?b[2]:void 0;for(V=g.length>3&&typeof V=="function"?(S--,V):void 0,N&&u(b[0],b[1],N)&&(V=S<3?void 0:V,S=1),_=Object(_);++k<S;){var de=b[k];de&&g(_,de,k,V)}return _})}r.exports=d}),ts=f((i,r)=>{var a=ca(),u=iu(),d=u(function(g,_,b){a(g,_,b)});r.exports=d}),Js=f((i,r)=>{var a=pe(),u=ui(),d="[object Symbol]";function g(_){return typeof _=="symbol"||u(_)&&a(_)==d}r.exports=g}),is=f((i,r)=>{var a=Yt(),u=Js(),d=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,g=/^\w*$/;function _(b,k){if(a(b))return!1;var S=typeof b;return S=="number"||S=="symbol"||S=="boolean"||b==null||u(b)?!0:g.test(b)||!d.test(b)||k!=null&&b in Object(k)}r.exports=_}),nu=f((i,r)=>{var a=ae(),u="Expected a function";function d(g,_){if(typeof g!="function"||_!=null&&typeof _!="function")throw new TypeError(u);var b=function(){var k=arguments,S=_?_.apply(this,k):k[0],V=b.cache;if(V.has(S))return V.get(S);var N=g.apply(this,k);return b.cache=V.set(S,N)||V,N};return b.cache=new(d.Cache||a),b}d.Cache=a,r.exports=d}),ru=f((i,r)=>{var a=nu(),u=500;function d(g){var _=a(g,function(k){return b.size===u&&b.clear(),k}),b=_.cache;return _}r.exports=d}),su=f((i,r)=>{var a=ru(),u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,d=/\\(\\)?/g,g=a(function(_){var b=[];return _.charCodeAt(0)===46&&b.push(""),_.replace(u,function(k,S,V,N){b.push(V?N.replace(d,"$1"):S||k)}),b});r.exports=g}),ou=f((i,r)=>{function a(u,d){for(var g=-1,_=u==null?0:u.length,b=Array(_);++g<_;)b[g]=d(u[g],g,u);return b}r.exports=a}),au=f((i,r)=>{var a=Pe(),u=ou(),d=Yt(),g=Js(),_=a?a.prototype:void 0,b=_?_.toString:void 0;function k(S){if(typeof S=="string")return S;if(d(S))return u(S,k)+"";if(g(S))return b?b.call(S):"";var V=S+"";return V=="0"&&1/S==-1/0?"-0":V}r.exports=k}),Xs=f((i,r)=>{var a=au();function u(d){return d==null?"":a(d)}r.exports=u}),Mr=f((i,r)=>{var a=Yt(),u=is(),d=su(),g=Xs();function _(b,k){return a(b)?b:u(b,k)?[b]:d(g(b))}r.exports=_}),pa=f((i,r)=>{var a=Js();function u(d){if(typeof d=="string"||a(d))return d;var g=d+"";return g=="0"&&1/d==-1/0?"-0":g}r.exports=u}),ma=f((i,r)=>{var a=Mr(),u=pa();function d(g,_){_=a(_,g);for(var b=0,k=_.length;g!=null&&b<k;)g=g[u(_[b++])];return b&&b==k?g:void 0}r.exports=d}),kn=f((i,r)=>{var a=ma();function u(d,g,_){var b=d==null?void 0:a(d,g);return b===void 0?_:b}r.exports=u}),Dt=f((i,r)=>{(function(a,u){typeof i=="object"&&typeof r<"u"?r.exports=u():(a=a||self).RBush=u()})(i,function(){function a($,J,se,we,oe){(function ye(E,A,R,T,O){for(;T>R;){if(T-R>600){var I=T-R+1,Q=A-R+1,Y=Math.log(I),ne=.5*Math.exp(2*Y/3),he=.5*Math.sqrt(Y*ne*(I-ne)/I)*(Q-I/2<0?-1:1),ce=Math.max(R,Math.floor(A-Q*ne/I+he)),je=Math.min(T,Math.floor(A+(I-Q)*ne/I+he));ye(E,A,ce,je,O)}var rt=E[A],lt=R,ht=T;for(u(E,R,A),O(E[T],rt)>0&&u(E,R,T);lt<ht;){for(u(E,lt,ht),lt++,ht--;O(E[lt],rt)<0;)lt++;for(;O(E[ht],rt)>0;)ht--}O(E[R],rt)===0?u(E,R,ht):u(E,++ht,T),ht<=A&&(R=ht+1),A<=ht&&(T=ht-1)}})($,J,se||0,we||$.length-1,oe||d)}function u($,J,se){var we=$[J];$[J]=$[se],$[se]=we}function d($,J){return $<J?-1:$>J?1:0}var g=function($){$===void 0&&($=9),this._maxEntries=Math.max(4,$),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function _($,J,se){if(!se)return J.indexOf($);for(var we=0;we<J.length;we++)if(se($,J[we]))return we;return-1}function b($,J){k($,0,$.children.length,J,$)}function k($,J,se,we,oe){oe||(oe=ot(null)),oe.minX=1/0,oe.minY=1/0,oe.maxX=-1/0,oe.maxY=-1/0;for(var ye=J;ye<se;ye++){var E=$.children[ye];S(oe,$.leaf?we(E):E)}return oe}function S($,J){return $.minX=Math.min($.minX,J.minX),$.minY=Math.min($.minY,J.minY),$.maxX=Math.max($.maxX,J.maxX),$.maxY=Math.max($.maxY,J.maxY),$}function V($,J){return $.minX-J.minX}function N($,J){return $.minY-J.minY}function de($){return($.maxX-$.minX)*($.maxY-$.minY)}function xe($){return $.maxX-$.minX+($.maxY-$.minY)}function He($,J){return $.minX<=J.minX&&$.minY<=J.minY&&J.maxX<=$.maxX&&J.maxY<=$.maxY}function Qe($,J){return J.minX<=$.maxX&&J.minY<=$.maxY&&J.maxX>=$.minX&&J.maxY>=$.minY}function ot($){return{children:$,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function At($,J,se,we,oe){for(var ye=[J,se];ye.length;)if(!((se=ye.pop())-(J=ye.pop())<=we)){var E=J+Math.ceil((se-J)/we/2)*we;a($,E,J,se,oe),ye.push(J,E,E,se)}}return g.prototype.all=function(){return this._all(this.data,[])},g.prototype.search=function($){var J=this.data,se=[];if(!Qe($,J))return se;for(var we=this.toBBox,oe=[];J;){for(var ye=0;ye<J.children.length;ye++){var E=J.children[ye],A=J.leaf?we(E):E;Qe($,A)&&(J.leaf?se.push(E):He($,A)?this._all(E,se):oe.push(E))}J=oe.pop()}return se},g.prototype.collides=function($){var J=this.data;if(!Qe($,J))return!1;for(var se=[];J;){for(var we=0;we<J.children.length;we++){var oe=J.children[we],ye=J.leaf?this.toBBox(oe):oe;if(Qe($,ye)){if(J.leaf||He($,ye))return!0;se.push(oe)}}J=se.pop()}return!1},g.prototype.load=function($){if(!$||!$.length)return this;if($.length<this._minEntries){for(var J=0;J<$.length;J++)this.insert($[J]);return this}var se=this._build($.slice(),0,$.length-1,0);if(this.data.children.length)if(this.data.height===se.height)this._splitRoot(this.data,se);else{if(this.data.height<se.height){var we=this.data;this.data=se,se=we}this._insert(se,this.data.height-se.height-1,!0)}else this.data=se;return this},g.prototype.insert=function($){return $&&this._insert($,this.data.height-1),this},g.prototype.clear=function(){return this.data=ot([]),this},g.prototype.remove=function($,J){if(!$)return this;for(var se,we,oe,ye=this.data,E=this.toBBox($),A=[],R=[];ye||A.length;){if(ye||(ye=A.pop(),we=A[A.length-1],se=R.pop(),oe=!0),ye.leaf){var T=_($,ye.children,J);if(T!==-1)return ye.children.splice(T,1),A.push(ye),this._condense(A),this}oe||ye.leaf||!He(ye,E)?we?(se++,ye=we.children[se],oe=!1):ye=null:(A.push(ye),R.push(se),se=0,we=ye,ye=ye.children[0])}return this},g.prototype.toBBox=function($){return $},g.prototype.compareMinX=function($,J){return $.minX-J.minX},g.prototype.compareMinY=function($,J){return $.minY-J.minY},g.prototype.toJSON=function(){return this.data},g.prototype.fromJSON=function($){return this.data=$,this},g.prototype._all=function($,J){for(var se=[];$;)$.leaf?J.push.apply(J,$.children):se.push.apply(se,$.children),$=se.pop();return J},g.prototype._build=function($,J,se,we){var oe,ye=se-J+1,E=this._maxEntries;if(ye<=E)return b(oe=ot($.slice(J,se+1)),this.toBBox),oe;we||(we=Math.ceil(Math.log(ye)/Math.log(E)),E=Math.ceil(ye/Math.pow(E,we-1))),(oe=ot([])).leaf=!1,oe.height=we;var A=Math.ceil(ye/E),R=A*Math.ceil(Math.sqrt(E));At($,J,se,R,this.compareMinX);for(var T=J;T<=se;T+=R){var O=Math.min(T+R-1,se);At($,T,O,A,this.compareMinY);for(var I=T;I<=O;I+=A){var Q=Math.min(I+A-1,O);oe.children.push(this._build($,I,Q,we-1))}}return b(oe,this.toBBox),oe},g.prototype._chooseSubtree=function($,J,se,we){for(;we.push(J),!J.leaf&&we.length-1!==se;){for(var oe=1/0,ye=1/0,E=void 0,A=0;A<J.children.length;A++){var R=J.children[A],T=de(R),O=(I=$,Q=R,(Math.max(Q.maxX,I.maxX)-Math.min(Q.minX,I.minX))*(Math.max(Q.maxY,I.maxY)-Math.min(Q.minY,I.minY))-T);O<ye?(ye=O,oe=T<oe?T:oe,E=R):O===ye&&T<oe&&(oe=T,E=R)}J=E||J.children[0]}var I,Q;return J},g.prototype._insert=function($,J,se){var we=se?$:this.toBBox($),oe=[],ye=this._chooseSubtree(we,this.data,J,oe);for(ye.children.push($),S(ye,we);J>=0&&oe[J].children.length>this._maxEntries;)this._split(oe,J),J--;this._adjustParentBBoxes(we,oe,J)},g.prototype._split=function($,J){var se=$[J],we=se.children.length,oe=this._minEntries;this._chooseSplitAxis(se,oe,we);var ye=this._chooseSplitIndex(se,oe,we),E=ot(se.children.splice(ye,se.children.length-ye));E.height=se.height,E.leaf=se.leaf,b(se,this.toBBox),b(E,this.toBBox),J?$[J-1].children.push(E):this._splitRoot(se,E)},g.prototype._splitRoot=function($,J){this.data=ot([$,J]),this.data.height=$.height+1,this.data.leaf=!1,b(this.data,this.toBBox)},g.prototype._chooseSplitIndex=function($,J,se){for(var we,oe,ye,E,A,R,T,O=1/0,I=1/0,Q=J;Q<=se-J;Q++){var Y=k($,0,Q,this.toBBox),ne=k($,Q,se,this.toBBox),he=(oe=Y,ye=ne,E=void 0,A=void 0,R=void 0,T=void 0,E=Math.max(oe.minX,ye.minX),A=Math.max(oe.minY,ye.minY),R=Math.min(oe.maxX,ye.maxX),T=Math.min(oe.maxY,ye.maxY),Math.max(0,R-E)*Math.max(0,T-A)),ce=de(Y)+de(ne);he<O?(O=he,we=Q,I=ce<I?ce:I):he===O&&ce<I&&(I=ce,we=Q)}return we||se-J},g.prototype._chooseSplitAxis=function($,J,se){var we=$.leaf?this.compareMinX:V,oe=$.leaf?this.compareMinY:N;this._allDistMargin($,J,se,we)<this._allDistMargin($,J,se,oe)&&$.children.sort(we)},g.prototype._allDistMargin=function($,J,se,we){$.children.sort(we);for(var oe=this.toBBox,ye=k($,0,J,oe),E=k($,se-J,se,oe),A=xe(ye)+xe(E),R=J;R<se-J;R++){var T=$.children[R];S(ye,$.leaf?oe(T):T),A+=xe(ye)}for(var O=se-J-1;O>=J;O--){var I=$.children[O];S(E,$.leaf?oe(I):I),A+=xe(E)}return A},g.prototype._adjustParentBBoxes=function($,J,se){for(var we=se;we>=0;we--)S(J[we],$)},g.prototype._condense=function($){for(var J=$.length-1,se=void 0;J>=0;J--)$[J].children.length===0?J>0?(se=$[J-1].children).splice(se.indexOf($[J]),1):this.clear():b($[J],this.toBBox)},g})}),Ht=f(i=>{Object.defineProperty(i,"__esModule",{value:!0}),i.earthRadius=63710088e-1,i.factors={centimeters:i.earthRadius*100,centimetres:i.earthRadius*100,degrees:i.earthRadius/111325,feet:i.earthRadius*3.28084,inches:i.earthRadius*39.37,kilometers:i.earthRadius/1e3,kilometres:i.earthRadius/1e3,meters:i.earthRadius,metres:i.earthRadius,miles:i.earthRadius/1609.344,millimeters:i.earthRadius*1e3,millimetres:i.earthRadius*1e3,nauticalmiles:i.earthRadius/1852,radians:1,yards:i.earthRadius*1.0936},i.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/i.earthRadius,yards:1.0936133},i.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function r(T,O,I){I===void 0&&(I={});var Q={type:"Feature"};return(I.id===0||I.id)&&(Q.id=I.id),I.bbox&&(Q.bbox=I.bbox),Q.properties=O||{},Q.geometry=T,Q}i.feature=r;function a(T,O,I){switch(T){case"Point":return u(O).geometry;case"LineString":return b(O).geometry;case"Polygon":return g(O).geometry;case"MultiPoint":return N(O).geometry;case"MultiLineString":return V(O).geometry;case"MultiPolygon":return de(O).geometry;default:throw new Error(T+" is invalid")}}i.geometry=a;function u(T,O,I){if(I===void 0&&(I={}),!T)throw new Error("coordinates is required");if(!Array.isArray(T))throw new Error("coordinates must be an Array");if(T.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ye(T[0])||!ye(T[1]))throw new Error("coordinates must contain numbers");var Q={type:"Point",coordinates:T};return r(Q,O,I)}i.point=u;function d(T,O,I){return I===void 0&&(I={}),S(T.map(function(Q){return u(Q,O)}),I)}i.points=d;function g(T,O,I){I===void 0&&(I={});for(var Q=0,Y=T;Q<Y.length;Q++){var ne=Y[Q];if(ne.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var he=0;he<ne[ne.length-1].length;he++)if(ne[ne.length-1][he]!==ne[0][he])throw new Error("First and last Position are not equivalent.")}var ce={type:"Polygon",coordinates:T};return r(ce,O,I)}i.polygon=g;function _(T,O,I){return I===void 0&&(I={}),S(T.map(function(Q){return g(Q,O)}),I)}i.polygons=_;function b(T,O,I){if(I===void 0&&(I={}),T.length<2)throw new Error("coordinates must be an array of two or more positions");var Q={type:"LineString",coordinates:T};return r(Q,O,I)}i.lineString=b;function k(T,O,I){return I===void 0&&(I={}),S(T.map(function(Q){return b(Q,O)}),I)}i.lineStrings=k;function S(T,O){O===void 0&&(O={});var I={type:"FeatureCollection"};return O.id&&(I.id=O.id),O.bbox&&(I.bbox=O.bbox),I.features=T,I}i.featureCollection=S;function V(T,O,I){I===void 0&&(I={});var Q={type:"MultiLineString",coordinates:T};return r(Q,O,I)}i.multiLineString=V;function N(T,O,I){I===void 0&&(I={});var Q={type:"MultiPoint",coordinates:T};return r(Q,O,I)}i.multiPoint=N;function de(T,O,I){I===void 0&&(I={});var Q={type:"MultiPolygon",coordinates:T};return r(Q,O,I)}i.multiPolygon=de;function xe(T,O,I){I===void 0&&(I={});var Q={type:"GeometryCollection",geometries:T};return r(Q,O,I)}i.geometryCollection=xe;function He(T,O){if(O===void 0&&(O=0),O&&!(O>=0))throw new Error("precision must be a positive number");var I=Math.pow(10,O||0);return Math.round(T*I)/I}i.round=He;function Qe(T,O){O===void 0&&(O="kilometers");var I=i.factors[O];if(!I)throw new Error(O+" units is invalid");return T*I}i.radiansToLength=Qe;function ot(T,O){O===void 0&&(O="kilometers");var I=i.factors[O];if(!I)throw new Error(O+" units is invalid");return T/I}i.lengthToRadians=ot;function At(T,O){return J(ot(T,O))}i.lengthToDegrees=At;function $(T){var O=T%360;return O<0&&(O+=360),O}i.bearingToAzimuth=$;function J(T){var O=T%(2*Math.PI);return O*180/Math.PI}i.radiansToDegrees=J;function se(T){var O=T%360;return O*Math.PI/180}i.degreesToRadians=se;function we(T,O,I){if(O===void 0&&(O="kilometers"),I===void 0&&(I="kilometers"),!(T>=0))throw new Error("length must be a positive number");return Qe(ot(T,O),I)}i.convertLength=we;function oe(T,O,I){if(O===void 0&&(O="meters"),I===void 0&&(I="kilometers"),!(T>=0))throw new Error("area must be a positive number");var Q=i.areaFactors[O];if(!Q)throw new Error("invalid original units");var Y=i.areaFactors[I];if(!Y)throw new Error("invalid final units");return T/Q*Y}i.convertArea=oe;function ye(T){return!isNaN(T)&&T!==null&&!Array.isArray(T)}i.isNumber=ye;function E(T){return!!T&&T.constructor===Object}i.isObject=E;function A(T){if(!T)throw new Error("bbox is required");if(!Array.isArray(T))throw new Error("bbox must be an Array");if(T.length!==4&&T.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");T.forEach(function(O){if(!ye(O))throw new Error("bbox must only contain numbers")})}i.validateBBox=A;function R(T){if(!T)throw new Error("id is required");if(["string","number"].indexOf(typeof T)===-1)throw new Error("id must be a number or a string")}i.validateId=R}),Pr=f(i=>{Object.defineProperty(i,"__esModule",{value:!0});var r=Ht();function a(J,se,we){if(J!==null)for(var oe,ye,E,A,R,T,O,I=0,Q=0,Y,ne=J.type,he=ne==="FeatureCollection",ce=ne==="Feature",je=he?J.features.length:1,rt=0;rt<je;rt++){O=he?J.features[rt].geometry:ce?J.geometry:J,Y=O?O.type==="GeometryCollection":!1,R=Y?O.geometries.length:1;for(var lt=0;lt<R;lt++){var ht=0,Ft=0;if(A=Y?O.geometries[lt]:O,A!==null){T=A.coordinates;var jt=A.type;switch(I=we&&(jt==="Polygon"||jt==="MultiPolygon")?1:0,jt){case null:break;case"Point":if(se(T,Q,rt,ht,Ft)===!1)return!1;Q++,ht++;break;case"LineString":case"MultiPoint":for(oe=0;oe<T.length;oe++){if(se(T[oe],Q,rt,ht,Ft)===!1)return!1;Q++,jt==="MultiPoint"&&ht++}jt==="LineString"&&ht++;break;case"Polygon":case"MultiLineString":for(oe=0;oe<T.length;oe++){for(ye=0;ye<T[oe].length-I;ye++){if(se(T[oe][ye],Q,rt,ht,Ft)===!1)return!1;Q++}jt==="MultiLineString"&&ht++,jt==="Polygon"&&Ft++}jt==="Polygon"&&ht++;break;case"MultiPolygon":for(oe=0;oe<T.length;oe++){for(Ft=0,ye=0;ye<T[oe].length;ye++){for(E=0;E<T[oe][ye].length-I;E++){if(se(T[oe][ye][E],Q,rt,ht,Ft)===!1)return!1;Q++}Ft++}ht++}break;case"GeometryCollection":for(oe=0;oe<A.geometries.length;oe++)if(a(A.geometries[oe],se,we)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function u(J,se,we,oe){var ye=we;return a(J,function(E,A,R,T,O){A===0&&we===void 0?ye=E:ye=se(ye,E,A,R,T,O)},oe),ye}function d(J,se){var we;switch(J.type){case"FeatureCollection":for(we=0;we<J.features.length&&se(J.features[we].properties,we)!==!1;we++);break;case"Feature":se(J.properties,0);break}}function g(J,se,we){var oe=we;return d(J,function(ye,E){E===0&&we===void 0?oe=ye:oe=se(oe,ye,E)}),oe}function _(J,se){if(J.type==="Feature")se(J,0);else if(J.type==="FeatureCollection")for(var we=0;we<J.features.length&&se(J.features[we],we)!==!1;we++);}function b(J,se,we){var oe=we;return _(J,function(ye,E){E===0&&we===void 0?oe=ye:oe=se(oe,ye,E)}),oe}function k(J){var se=[];return a(J,function(we){se.push(we)}),se}function S(J,se){var we,oe,ye,E,A,R,T,O,I,Q,Y=0,ne=J.type==="FeatureCollection",he=J.type==="Feature",ce=ne?J.features.length:1;for(we=0;we<ce;we++){for(R=ne?J.features[we].geometry:he?J.geometry:J,O=ne?J.features[we].properties:he?J.properties:{},I=ne?J.features[we].bbox:he?J.bbox:void 0,Q=ne?J.features[we].id:he?J.id:void 0,T=R?R.type==="GeometryCollection":!1,A=T?R.geometries.length:1,ye=0;ye<A;ye++){if(E=T?R.geometries[ye]:R,E===null){if(se(null,Y,O,I,Q)===!1)return!1;continue}switch(E.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(se(E,Y,O,I,Q)===!1)return!1;break}case"GeometryCollection":{for(oe=0;oe<E.geometries.length;oe++)if(se(E.geometries[oe],Y,O,I,Q)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}Y++}}function V(J,se,we){var oe=we;return S(J,function(ye,E,A,R,T){E===0&&we===void 0?oe=ye:oe=se(oe,ye,E,A,R,T)}),oe}function N(J,se){S(J,function(we,oe,ye,E,A){var R=we===null?null:we.type;switch(R){case null:case"Point":case"LineString":case"Polygon":return se(r.feature(we,ye,{bbox:E,id:A}),oe,0)===!1?!1:void 0}var T;switch(R){case"MultiPoint":T="Point";break;case"MultiLineString":T="LineString";break;case"MultiPolygon":T="Polygon";break}for(var O=0;O<we.coordinates.length;O++){var I=we.coordinates[O],Q={type:T,coordinates:I};if(se(r.feature(Q,ye),oe,O)===!1)return!1}})}function de(J,se,we){var oe=we;return N(J,function(ye,E,A){E===0&&A===0&&we===void 0?oe=ye:oe=se(oe,ye,E,A)}),oe}function xe(J,se){N(J,function(we,oe,ye){var E=0;if(we.geometry){var A=we.geometry.type;if(!(A==="Point"||A==="MultiPoint")){var R,T=0,O=0,I=0;if(a(we,function(Q,Y,ne,he,ce){if(R===void 0||oe>T||he>O||ce>I){R=Q,T=oe,O=he,I=ce,E=0;return}var je=r.lineString([R,Q],we.properties);if(se(je,oe,ye,ce,E)===!1)return!1;E++,R=Q})===!1)return!1}}})}function He(J,se,we){var oe=we,ye=!1;return xe(J,function(E,A,R,T,O){ye===!1&&we===void 0?oe=E:oe=se(oe,E,A,R,T,O),ye=!0}),oe}function Qe(J,se){if(!J)throw new Error("geojson is required");N(J,function(we,oe,ye){if(we.geometry!==null){var E=we.geometry.type,A=we.geometry.coordinates;switch(E){case"LineString":if(se(we,oe,ye,0,0)===!1)return!1;break;case"Polygon":for(var R=0;R<A.length;R++)if(se(r.lineString(A[R],we.properties),oe,ye,R)===!1)return!1;break}}})}function ot(J,se,we){var oe=we;return Qe(J,function(ye,E,A,R){E===0&&we===void 0?oe=ye:oe=se(oe,ye,E,A,R)}),oe}function At(J,se){if(se=se||{},!r.isObject(se))throw new Error("options is invalid");var we=se.featureIndex||0,oe=se.multiFeatureIndex||0,ye=se.geometryIndex||0,E=se.segmentIndex||0,A=se.properties,R;switch(J.type){case"FeatureCollection":we<0&&(we=J.features.length+we),A=A||J.features[we].properties,R=J.features[we].geometry;break;case"Feature":A=A||J.properties,R=J.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":R=J;break;default:throw new Error("geojson is invalid")}if(R===null)return null;var T=R.coordinates;switch(R.type){case"Point":case"MultiPoint":return null;case"LineString":return E<0&&(E=T.length+E-1),r.lineString([T[E],T[E+1]],A,se);case"Polygon":return ye<0&&(ye=T.length+ye),E<0&&(E=T[ye].length+E-1),r.lineString([T[ye][E],T[ye][E+1]],A,se);case"MultiLineString":return oe<0&&(oe=T.length+oe),E<0&&(E=T[oe].length+E-1),r.lineString([T[oe][E],T[oe][E+1]],A,se);case"MultiPolygon":return oe<0&&(oe=T.length+oe),ye<0&&(ye=T[oe].length+ye),E<0&&(E=T[oe][ye].length-E-1),r.lineString([T[oe][ye][E],T[oe][ye][E+1]],A,se)}throw new Error("geojson is invalid")}function $(J,se){if(se=se||{},!r.isObject(se))throw new Error("options is invalid");var we=se.featureIndex||0,oe=se.multiFeatureIndex||0,ye=se.geometryIndex||0,E=se.coordIndex||0,A=se.properties,R;switch(J.type){case"FeatureCollection":we<0&&(we=J.features.length+we),A=A||J.features[we].properties,R=J.features[we].geometry;break;case"Feature":A=A||J.properties,R=J.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":R=J;break;default:throw new Error("geojson is invalid")}if(R===null)return null;var T=R.coordinates;switch(R.type){case"Point":return r.point(T,A,se);case"MultiPoint":return oe<0&&(oe=T.length+oe),r.point(T[oe],A,se);case"LineString":return E<0&&(E=T.length+E),r.point(T[E],A,se);case"Polygon":return ye<0&&(ye=T.length+ye),E<0&&(E=T[ye].length+E),r.point(T[ye][E],A,se);case"MultiLineString":return oe<0&&(oe=T.length+oe),E<0&&(E=T[oe].length+E),r.point(T[oe][E],A,se);case"MultiPolygon":return oe<0&&(oe=T.length+oe),ye<0&&(ye=T[oe].length+ye),E<0&&(E=T[oe][ye].length-E),r.point(T[oe][ye][E],A,se)}throw new Error("geojson is invalid")}i.coordAll=k,i.coordEach=a,i.coordReduce=u,i.featureEach=_,i.featureReduce=b,i.findPoint=$,i.findSegment=At,i.flattenEach=N,i.flattenReduce=de,i.geomEach=S,i.geomReduce=V,i.lineEach=Qe,i.lineReduce=ot,i.propEach=d,i.propReduce=g,i.segmentEach=xe,i.segmentReduce=He}),or=f(i=>{Object.defineProperty(i,"__esModule",{value:!0});var r=Pr();function a(u){var d=[1/0,1/0,-1/0,-1/0];return r.coordEach(u,function(g){d[0]>g[0]&&(d[0]=g[0]),d[1]>g[1]&&(d[1]=g[1]),d[2]<g[0]&&(d[2]=g[0]),d[3]<g[1]&&(d[3]=g[1])}),d}a.default=a,i.default=a}),$n=f((i,r)=>{var a=Dt(),u=Ht(),d=Pr(),g=or().default,_=d.featureEach;d.coordEach,u.polygon;var b=u.featureCollection;function k(S){var V=new a(S);return V.insert=function(N){if(N.type!=="Feature")throw new Error("invalid feature");return N.bbox=N.bbox?N.bbox:g(N),a.prototype.insert.call(this,N)},V.load=function(N){var de=[];return Array.isArray(N)?N.forEach(function(xe){if(xe.type!=="Feature")throw new Error("invalid features");xe.bbox=xe.bbox?xe.bbox:g(xe),de.push(xe)}):_(N,function(xe){if(xe.type!=="Feature")throw new Error("invalid features");xe.bbox=xe.bbox?xe.bbox:g(xe),de.push(xe)}),a.prototype.load.call(this,de)},V.remove=function(N,de){if(N.type!=="Feature")throw new Error("invalid feature");return N.bbox=N.bbox?N.bbox:g(N),a.prototype.remove.call(this,N,de)},V.clear=function(){return a.prototype.clear.call(this)},V.search=function(N){var de=a.prototype.search.call(this,this.toBBox(N));return b(de)},V.collides=function(N){return a.prototype.collides.call(this,this.toBBox(N))},V.all=function(){var N=a.prototype.all.call(this);return b(N)},V.toJSON=function(){return a.prototype.toJSON.call(this)},V.fromJSON=function(N){return a.prototype.fromJSON.call(this,N)},V.toBBox=function(N){var de;if(N.bbox)de=N.bbox;else if(Array.isArray(N)&&N.length===4)de=N;else if(Array.isArray(N)&&N.length===6)de=[N[0],N[1],N[3],N[4]];else if(N.type==="Feature")de=g(N);else if(N.type==="FeatureCollection")de=g(N);else throw new Error("invalid geojson");return{minX:de[0],minY:de[1],maxX:de[2],maxY:de[3]}},V}r.exports=k,r.exports.default=k});Array.prototype.findIndex=Array.prototype.findIndex||function(i){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof i!="function")throw new TypeError("callback must be a function");for(var r=Object(this),a=r.length>>>0,u=arguments[1],d=0;d<a;d++)if(i.call(u,r[d],d,r))return d;return-1},Array.prototype.find=Array.prototype.find||function(i){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof i!="function")throw new TypeError("callback must be a function");for(var r=Object(this),a=r.length>>>0,u=arguments[1],d=0;d<a;d++){var g=r[d];if(i.call(u,g,d,r))return g}},typeof Object.assign!="function"&&(Object.assign=function(i){if(i==null)throw new TypeError("Cannot convert undefined or null to object");i=Object(i);for(var r=1;r<arguments.length;r++){var a=arguments[r];if(a!=null)for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(i[u]=a[u])}return i}),function(i){i.forEach(function(r){r.hasOwnProperty("remove")||Object.defineProperty(r,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(i,r){if(this==null)throw new TypeError('"this" is null or not defined');var a=Object(this),u=a.length>>>0;if(u===0)return!1;var d=r|0,g=Math.max(d>=0?d:u-Math.abs(d),0);function _(b,k){return b===k||typeof b=="number"&&typeof k=="number"&&isNaN(b)&&isNaN(k)}for(;g<u;){if(_(a[g],i))return!0;g++}return!1}});var Ys={version:"2.18.3"},xt=v(ts()),Wt={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},Qs={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex lschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer lschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Lnge",segmentLength:"Segment Lnge",area:"Flche",radius:"Radius",perimeter:"Umfang",height:"Hhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},ns={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},ji={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},lu={tooltips:{placeMarker:"Adaug un punct",firstVertex:"Apas aici pentru a aduga primul Vertex",continueLine:"Apas aici pentru a continua desenul",finishLine:"Apas pe orice obiect pentru a finisa desenul",finishPoly:"Apas pe primul obiect pentru a finisa",finishRect:"Apas pentru a finisa",startCircle:"Apas pentru a desena un cerc",finishCircle:"Apas pentru a finisa un cerc",placeCircleMarker:"Adaug un punct"},actions:{finish:"Termin",cancel:"Anuleaz",removeLastVertex:"terge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaug o bulin",drawPolyButton:"Deseneaz un poligon",drawLineButton:"Deseneaz o linie",drawCircleButton:"Deseneaz un cerc",drawRectButton:"Deseneaz un dreptunghi",editButton:"Editeaz straturile",dragButton:"Mut straturile",cutButton:"Taie straturile",deleteButton:"terge straturile",drawCircleMarkerButton:"Deseneaz marcatorul cercului",snappingButton:"Fixai marcatorul glisat pe alte straturi i vrfuri",pinningButton:"Fixai vrfurile partajate mpreun",rotateButton:"Rotii stratul"}},rs={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:"     ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" "}},Un={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vrtice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del crculo",finishCircle:"Presiona para finalizar el crculo",placeCircleMarker:"Presiona para colocar un marcador de crculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar ltimo vrtice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polgono",drawLineButton:"Dibujar Lnea",drawCircleButton:"Dibujar Crculo",drawRectButton:"Dibujar Rectngulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Crculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vrtices",pinningButton:"Fijar juntos los vrtices compartidos",rotateButton:"Rotar capa"}},Qt={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beindigen",finishPoly:"Klik op het eerst punt om te beindigen",finishRect:"Klik om te beindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},jn={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer  dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"diter des calques",dragButton:"Dplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"pingler ensemble les sommets partags",rotateButton:"Tourner des calques"}},Sr={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},Br={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},eo={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vrtice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do crculo",finishCircle:"Clique para finalizar o crculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover ltimo vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},ar={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vrtice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do crculo",finishCircle:"Clique para terminar o crculo",placeCircleMarker:"Clique para colocar marcador de crculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover ltimo Vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},to={tooltips:{placeMarker:"Kliknij, aby umieci znacznik",firstVertex:"Kliknij, aby umieci pierwszy wierzchoek",continueLine:"Kliknij, aby kontynuowa rysowanie",finishLine:"Kliknij dowolny istniejcy znacznik, aby zakoczy",finishPoly:"Kliknij pierwszy znacznik, aby zakoczy",finishRect:"Kliknij, aby zakoczy",startCircle:"Kliknij, aby umieci rodek okrgu",finishCircle:"Kliknij, aby zakoczy okrg",placeCircleMarker:"Kliknij, aby umieci znacznik okrgu",placeText:"Kliknij, aby umieci tekst"},actions:{finish:"Zakocz",cancel:"Anuluj",removeLastVertex:"Usu ostatni wierzchoek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokt",drawLineButton:"Rysuj lini",drawCircleButton:"Rysuj okrg",drawRectButton:"Rysuj prostokt",editButton:"Edytuj warstwy",dragButton:"Przecignij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usu warstwy",drawCircleMarkerButton:"Rysuj znacznik okrgy",snappingButton:"Przycignij przenoszony znacznik do innych warstw i wierzchokw",pinningButton:"Przypnij wsplne wierzchoki razem",rotateButton:"Obr warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne ledzenie linii"},measurements:{totalLength:"Dugo",segmentLength:"Dugo odcinka",area:"Obszar",radius:"Promie",perimeter:"Obwd",height:"Wysoko",width:"Szeroko",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},io={tooltips:{placeMarker:"Klicka fr att placera markr",firstVertex:"Klicka fr att placera frsta hrnet",continueLine:"Klicka fr att fortstta rita",finishLine:"Klicka p en existerande punkt fr att slutfra",finishPoly:"Klicka p den frsta punkten fr att slutfra",finishRect:"Klicka fr att slutfra",startCircle:"Klicka fr att placera cirkelns centrum",finishCircle:"Klicka fr att slutfra cirkeln",placeCircleMarker:"Klicka fr att placera cirkelmarkr"},actions:{finish:"Slutfr",cancel:"Avbryt",removeLastVertex:"Ta bort sista hrnet"},buttonTitles:{drawMarkerButton:"Rita Markr",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkr",snappingButton:"Snpp dra markren till andra lager och hrn",pinningButton:"Fst delade hrn tillsammans",rotateButton:"Rotera lagret"}},ss={tooltips:{placeMarker:"     ",firstVertex:"       ",continueLine:"      ",finishLine:"        ",finishPoly:"       ",finishRect:"    ",startCircle:"      ",finishCircle:"      ",placeCircleMarker:"      "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"        ",pinningButton:"   ",rotateButton:"  "}},no={tooltips:{placeMarker:"Kattintson a jell elhelyezshez",firstVertex:"Kattintson az els pont elhelyezshez",continueLine:"Kattintson a kvetkez pont elhelyezshez",finishLine:"A befejezshez kattintson egy meglv pontra",finishPoly:"A befejezshez kattintson az els pontra",finishRect:"Kattintson a befejezshez",startCircle:"Kattintson a kr kzppontjnak elhelyezshez",finishCircle:"Kattintson a kr befejezshez",placeCircleMarker:"Kattintson a krjell elhelyezshez"},actions:{finish:"Befejezs",cancel:"Mgse",removeLastVertex:"Utols pont eltvoltsa"},buttonTitles:{drawMarkerButton:"Jell rajzolsa",drawPolyButton:"Poligon rajzolsa",drawLineButton:"Vonal rajzolsa",drawCircleButton:"Kr rajzolsa",drawRectButton:"Ngyzet rajzolsa",editButton:"Elemek szerkesztse",dragButton:"Elemek mozgatsa",cutButton:"Elemek vgsa",deleteButton:"Elemek trlse",drawCircleMarkerButton:"Kr jell rajzolsa",snappingButton:"Kapcsolja a jelltt msik elemhez vagy ponthoz",pinningButton:"Kzs pontok sszektse",rotateButton:"Flia elforgatsa"}},ro={tooltips:{placeMarker:"Tryk for at placere en markr",firstVertex:"Tryk for at placere det frste punkt",continueLine:"Tryk for at fortstte linjen",finishLine:"Tryk p et eksisterende punkt for at afslutte",finishPoly:"Tryk p det frste punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkr"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markr",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Trk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkr",snappingButton:"Fastgr trukket markr til andre elementer",pinningButton:"Sammenlg delte elementer",rotateButton:"Roter laget"}},os={tooltips:{placeMarker:"Klikk for  plassere punkt",firstVertex:"Klikk for  plassere frste punkt",continueLine:"Klikk for  tegne videre",finishLine:"Klikk p et eksisterende punkt for  fullfre",finishPoly:"Klikk frste punkt for  fullfre",finishRect:"Klikk for  fullfre",startCircle:"Klikk for  sette sirkel midtpunkt",finishCircle:"Klikk for  fullfre sirkel",placeCircleMarker:"Klikk for  plassere sirkel",placeText:"Klikk for  plassere tekst"},actions:{finish:"Fullfr",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotr objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalr objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Omrde",radius:"Radius",perimeter:"Omriss",height:"Hyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkr"}},ga={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"   ",finishLine:"      ",finishPoly:"     ",finishRect:"  ",startCircle:"    ",finishCircle:"    ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"      ",rotateButton:" ",drawTextButton:" ",scaleButton:"",autoTracingButton:" "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},so={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:" -    ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"'   ",rotateButton:" "}},uu={tooltips:{placeMarker:"areti yerletirmek iin tklayn",firstVertex:"lk tepe noktasn yerletirmek iin tklayn",continueLine:"izime devam etmek iin tklayn",finishLine:"Bitirmek iin mevcut herhangi bir iaretiyi tklayn",finishPoly:"Bitirmek iin ilk iaretiyi tklayn",finishRect:"Bitirmek iin tklayn",startCircle:"Daire merkezine yerletirmek iin tklayn",finishCircle:"Daireyi bitirmek iin tklayn",placeCircleMarker:"Daire iaretisi yerletirmek iin tklayn"},actions:{finish:"Bitir",cancel:"ptal",removeLastVertex:"Son keyi kaldr"},buttonTitles:{drawMarkerButton:"izim aretisi",drawPolyButton:"okgenler iz",drawLineButton:"oklu izgi iz",drawCircleButton:"ember iz",drawRectButton:"Dikdrtgen iz",editButton:"Katmanlar dzenle",dragButton:"Katmanlar srkle",cutButton:"Katmanlar kes",deleteButton:"Katmanlar kaldr",drawCircleMarkerButton:"Daire iaretisi iz",snappingButton:"Srklenen iaretiyi dier katmanlara ve kelere yaptr",pinningButton:"Paylalan keleri birbirine sabitle",rotateButton:"Katman dndr"}},bt={tooltips:{placeMarker:"Kliknutm vytvote znaku",firstVertex:"Kliknutm vytvote prvn objekt",continueLine:"Kliknutm pokraujte v kreslen",finishLine:"Kliknut na libovolnou existujc znaku pro dokonen",finishPoly:"Vyberte prvn bod pro dokonen",finishRect:"Kliknte pro dokonen",startCircle:"Kliknutm pidejte sted kruhu",finishCircle:",   ",placeCircleMarker:"Kliknutm nastavte polomr"},actions:{finish:"Dokonit",cancel:"Zruit",removeLastVertex:"Zruit posledn akci"},buttonTitles:{drawMarkerButton:"Pidat znaku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit kivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdlnk",editButton:"Upravit vrstvu",dragButton:"Peneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Pidat kruhovou znaku",snappingButton:"Navzat tanou znaku k dalm vrstvm a vrcholm",pinningButton:"Spojit spolen body dohromady",rotateButton:"Otote vrstvu"}},rn={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:"",placeText:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:"",drawTextButton:""}},Ut={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtmist",finishLine:"Klikkaa olemassa olevaa merkki lopettaaksesi",finishPoly:"Klikkaa ensimmist merkki lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrn keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrn",placeCircleMarker:"Klikkaa asettaaksesi ympyrmerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirr merkkej",drawPolyButton:"Piirr monikulmioita",drawLineButton:"Piirr viivoja",drawCircleButton:"Piirr ympyr",drawRectButton:"Piirr neliskulmioita",editButton:"Muokkaa",dragButton:"Siirr",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirr ympyrmerkki",snappingButton:"Kiinnit siirrettv merkki toisiin muotoihin",pinningButton:"Kiinnit jaetut muodot yhteen",rotateButton:"Knn",drawTextButton:"Piirr teksti"}},_a={tooltips:{placeMarker:"  ",firstVertex:"   ",continueLine:"  ",finishLine:"   ",finishPoly:"   ",finishRect:" ",startCircle:"    ",finishCircle:"  ",placeCircleMarker:"   ",placeText:"  "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" ",drawTextButton:" "}},oo={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"    ",finishLine:"    ",finishPoly:"    ",finishRect:"  ",startCircle:"    ",finishCircle:"   ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:" ",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:"  ",cutButton:"  ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"     ",pinningButton:"   ",rotateButton:" ",drawTextButton:" ",scaleButton:"  ",autoTracingButton:"  "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},ao=ar,En={en:Wt,de:Qs,it:ns,id:ji,ro:lu,ru:rs,es:Un,nl:Qt,fr:jn,pt:ao,pt_br:eo,pt_pt:ar,zh:Sr,zh_tw:Br,pl:to,sv:io,el:ss,hu:no,da:ro,no:os,fa:ga,ua:so,tr:uu,cz:bt,ja:rn,fi:Ut,ko:_a,ky:oo},Gn={_globalEditModeEnabled:!1,enableGlobalEditMode(i){let r={...i};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(a=>{this._isRelevantForEdit(a)&&a.pm.enable(r)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(i=>{i.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(i=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(i)},handleLayerAdditionInGlobalEditMode(){let i=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let r in i){let a=i[r];this._isRelevantForEdit(a)&&a.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:i}){this._addedLayersEdit[L.stamp(i)]=i},_isRelevantForEdit(i){return i.pm&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.allowEditing}},lo=Gn,Ar={_globalDragModeEnabled:!1,enableGlobalDragMode(){let i=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},i.forEach(r=>{this._isRelevantForDrag(r)&&r.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let i=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,i.forEach(r=>{r.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let i=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let r in i){let a=i[r];this._isRelevantForDrag(a)&&a.pm.enableLayerDrag()}},_layerAddedDrag({layer:i}){this._addedLayersDrag[L.stamp(i)]=i},_isRelevantForDrag(i){return i.pm&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.draggable}},ci=Ar,Vn={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(i=>{this._isRelevantForRemoval(i)&&(i.pm.enabled()&&i.pm.disable(),i.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(i=>{i.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(i){let r=i.target;this._isRelevantForRemoval(r)&&!r.pm.dragging()&&(r.removeFrom(this.map.pm._getContainingLayer()),r.remove(),r instanceof L.LayerGroup?(this._fireRemoveLayerGroup(r),this._fireRemoveLayerGroup(this.map,r)):(r.pm._fireRemove(r),r.pm._fireRemove(this.map,r)))},_isRelevantForRemoval(i){return i.pm&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let i=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let r in i){let a=i[r];this._isRelevantForRemoval(a)&&(a.pm.enabled()&&a.pm.disable(),a.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:i}){this._addedLayersRemoval[L.stamp(i)]=i}},ya=Vn,va={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(i=>i instanceof L.Polyline).forEach(i=>{this._isRelevantForRotate(i)&&i.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(i=>i instanceof L.Polyline).forEach(i=>{i.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(i){return i.pm&&i instanceof L.Polyline&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let i=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let r in i){let a=i[r];this._isRelevantForRemoval(a)&&a.pm.enableRotate()}},_layerAddedRotate({layer:i}){this._addedLayersRotate[L.stamp(i)]=i}},cu=va,ba=v(ts()),uo={_fireDrawStart(i="Draw",r={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},i,r)},_fireDrawEnd(i="Draw",r={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},i,r)},_fireCreate(i,r="Draw",a={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:i,layer:i},r,a)},_fireCenterPlaced(i="Draw",r={}){let a=i==="Draw"?this._layer:void 0,u=i!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:a,layer:u,latlng:this._layer.getLatLng()},i,r)},_fireCut(i,r,a,u="Draw",d={}){this.__fire(i,"pm:cut",{shape:this._shape,layer:r,originalLayer:a},u,d)},_fireEdit(i=this._layer,r="Edit",a={}){this.__fire(i,"pm:edit",{layer:this._layer,shape:this.getShape()},r,a)},_fireEnable(i="Edit",r={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},i,r)},_fireDisable(i="Edit",r={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},i,r)},_fireUpdate(i="Edit",r={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},i,r)},_fireMarkerDragStart(i,r=void 0,a="Edit",u={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:i,shape:this.getShape(),indexPath:r},a,u)},_fireMarkerDrag(i,r=void 0,a="Edit",u={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:i,shape:this.getShape(),indexPath:r},a,u)},_fireMarkerDragEnd(i,r=void 0,a=void 0,u="Edit",d={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:i,shape:this.getShape(),indexPath:r,intersectionReset:a},u,d)},_fireDragStart(i="Edit",r={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},i,r)},_fireDrag(i,r="Edit",a={}){this.__fire(this._layer,"pm:drag",{...i,shape:this.getShape()},r,a)},_fireDragEnd(i="Edit",r={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},i,r)},_fireDragEnable(i="Edit",r={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},i,r)},_fireDragDisable(i="Edit",r={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},i,r)},_fireRemove(i,r=i,a="Edit",u={}){this.__fire(i,"pm:remove",{layer:r,shape:this.getShape()},a,u)},_fireVertexAdded(i,r,a,u="Edit",d={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:i,indexPath:r,latlng:a,shape:this.getShape()},u,d)},_fireVertexRemoved(i,r,a="Edit",u={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:i,indexPath:r,shape:this.getShape()},a,u)},_fireVertexClick(i,r,a="Edit",u={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:i,indexPath:r,shape:this.getShape()},a,u)},_fireIntersect(i,r=this._layer,a="Edit",u={}){this.__fire(r,"pm:intersect",{layer:this._layer,intersection:i,shape:this.getShape()},a,u)},_fireLayerReset(i,r,a="Edit",u={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:i,indexPath:r,shape:this.getShape()},a,u)},_fireChange(i,r="Edit",a={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:i,shape:this.getShape()},r,a)},_fireTextChange(i,r="Edit",a={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:i,shape:this.getShape()},r,a)},_fireTextFocus(i="Edit",r={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},i,r)},_fireTextBlur(i="Edit",r={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},i,r)},_fireSnapDrag(i,r,a="Snapping",u={}){this.__fire(i,"pm:snapdrag",r,a,u)},_fireSnap(i,r,a="Snapping",u={}){this.__fire(i,"pm:snap",r,a,u)},_fireUnsnap(i,r,a="Snapping",u={}){this.__fire(i,"pm:unsnap",r,a,u)},_fireRotationEnable(i,r,a="Rotation",u={}){this.__fire(i,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},a,u)},_fireRotationDisable(i,r="Rotation",a={}){this.__fire(i,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},r,a)},_fireRotationStart(i,r,a="Rotation",u={}){this.__fire(i,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:r},a,u)},_fireRotation(i,r,a,u=this._rotationLayer,d="Rotation",g={}){this.__fire(i,"pm:rotate",{layer:u,helpLayer:this._layer,startAngle:this._startAngle,angle:u.pm.getAngle(),angleDiff:r,oldLatLngs:a,newLatLngs:u.getLatLngs()},d,g)},_fireRotationEnd(i,r,a,u="Rotation",d={}){this.__fire(i,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:r,angle:this._rotationLayer.pm.getAngle(),originLatLngs:a,newLatLngs:this._rotationLayer.getLatLngs()},u,d)},_fireActionClick(i,r,a,u="Toolbar",d={}){this.__fire(this._map,"pm:actionclick",{text:i.text,action:i,btnName:r,button:a},u,d)},_fireButtonClick(i,r,a="Toolbar",u={}){this.__fire(this._map,"pm:buttonclick",{btnName:i,button:r},a,u)},_fireLangChange(i,r,a,u,d="Global",g={}){this.__fire(this.map,"pm:langchange",{oldLang:i,activeLang:r,fallback:a,translations:u},d,g)},_fireGlobalDragModeToggled(i,r="Global",a={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:i,map:this.map},r,a)},_fireGlobalEditModeToggled(i,r="Global",a={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:i,map:this.map},r,a)},_fireGlobalRemovalModeToggled(i,r="Global",a={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:i,map:this.map},r,a)},_fireGlobalCutModeToggled(i="Global",r={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},i,r)},_fireGlobalDrawModeToggled(i="Global",r={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},i,r)},_fireGlobalRotateModeToggled(i="Global",r={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},i,r)},_fireRemoveLayerGroup(i,r=i,a="Edit",u={}){this.__fire(i,"pm:remove",{layer:r,shape:void 0},a,u)},_fireKeyeventEvent(i,r,a,u="Global",d={}){this.__fire(this.map,"pm:keyevent",{event:i,eventType:r,focusOn:a},u,d)},__fire(i,r,a,u,d={}){a=(0,ba.default)(a,d,{source:u}),L.PM.Utils._fireEvent(i,r,a)}},as=uo,xa=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(i){this.map=i,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),i.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(i){let r="document";this.map.getContainer().contains(i.target)&&(r="map");let a={event:i,eventType:i.type,focusOn:r};this._lastEvents[i.type]=a,this._lastEvents.current=a,this.map.pm._fireKeyeventEvent(i,i.type,r)},_onBlur(i){i.altKey=!1;let r={event:i,eventType:i.type,focusOn:"document"};this._lastEvents[i.type]=r,this._lastEvents.current=r},getLastKeyEvent(i="current"){return this._lastEvents[i]},isShiftKeyPressed(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.shiftKey},isAltKeyPressed(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.altKey},isCtrlKeyPressed(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.ctrlKey},isMetaKeyPressed(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.metaKey},getPressedKey(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.key}}),Bt=xa,wa=v(kn());function vt(i){let r=L.PM.activeLang;return(0,wa.default)(En[r],i)||(0,wa.default)(En.en,i)||i}function Hn(i){for(let r=0;r<i.length;r+=1){let a=i[r];if(Array.isArray(a)){if(Hn(a))return!0}else if(a!=null&&a!=="")return!0}return!1}function Tr(i){return i.reduce((r,a)=>{if(a.length!==0){let u=Array.isArray(a)?Tr(a):a;Array.isArray(u)?u.length!==0&&r.push(u):r.push(u)}return r},[])}function hu(i,r,a){let u={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:d,b:g,f:_}=u,b=i.lng,k=i.lat,S=a,V=Math.PI,N=r*V/180,de=Math.sin(N),xe=Math.cos(N),He=(1-_)*Math.tan(k*V/180),Qe=1/Math.sqrt(1+He*He),ot=He*Qe,At=Math.atan2(He,xe),$=Qe*de,J=1-$*$,se=J*(d*d-g*g)/(g*g),we=1+se/16384*(4096+se*(-768+se*(320-175*se))),oe=se/1024*(256+se*(-128+se*(74-47*se))),ye=S/(g*we),E=2*Math.PI,A,R,T;for(;Math.abs(ye-E)>1e-12;){A=Math.cos(2*At+ye),R=Math.sin(ye),T=Math.cos(ye);let je=oe*R*(A+oe/4*(T*(-1+2*A*A)-oe/6*A*(-3+4*R*R)*(-3+4*A*A)));E=ye,ye=S/(g*we)+je}let O=ot*R-Qe*T*xe,I=Math.atan2(ot*T+Qe*R*xe,(1-_)*Math.sqrt($*$+O*O)),Q=Math.atan2(R*de,Qe*T-ot*R*xe),Y=_/16*J*(4+_*(4-3*J)),ne=Q-(1-Y)*_*$*(ye+Y*R*(A+Y*T*(-1+2*A*A))),he=b+ne*180/V,ce=I*180/V;return L.latLng(he,ce)}function ls(i,r,a,u,d=!0){let g,_,b,k=[];for(let S=0;S<a;S+=1){if(d)g=S*360/a+u,_=hu(i,g,r),b=L.latLng(_.lng,_.lat);else{let V=i.lat+Math.cos(2*S*Math.PI/a)*r,N=i.lng+Math.sin(2*S*Math.PI/a)*r;b=L.latLng(V,N)}k.push(b)}return k}function du(i,r,a){r=(r+360)%360;let u=Math.PI/180,d=180/Math.PI,{R:g}=L.CRS.Earth,_=i.lng*u,b=i.lat*u,k=r*u,S=Math.sin(b),V=Math.cos(b),N=Math.cos(a/g),de=Math.sin(a/g),xe=Math.asin(S*N+V*de*Math.cos(k)),He=_+Math.atan2(Math.sin(k)*de*V,N-S*Math.sin(xe));He*=d;let Qe=He-360,ot=He<-180?He+360:He;return He=He>180?Qe:ot,L.latLng([xe*d,He])}function us(i,r,a){let u=i.latLngToContainerPoint(r),d=i.latLngToContainerPoint(a),g=Math.atan2(d.y-u.y,d.x-u.x)*180/Math.PI+90;return g+=g<0?360:0,g}function cs(i,r,a,u){let d=us(i,r,a);return du(r,d,u)}function fu(i,r,a="asc"){if(!r||Object.keys(r).length===0)return(k,S)=>k-S;let u=Object.keys(r),d,g=u.length-1,_={};for(;g>=0;)d=u[g],_[d.toLowerCase()]=r[d],g-=1;function b(k){if(k instanceof L.Marker)return"Marker";if(k instanceof L.Circle)return"Circle";if(k instanceof L.CircleMarker)return"CircleMarker";if(k instanceof L.Rectangle)return"Rectangle";if(k instanceof L.Polygon)return"Polygon";if(k instanceof L.Polyline)return"Line"}return(k,S)=>{let V,N;if(V=b(k.layer).toLowerCase(),N=b(S.layer).toLowerCase(),!V||!N)return 0;let de=V in _?_[V]:Number.MAX_SAFE_INTEGER,xe=N in _?_[N]:Number.MAX_SAFE_INTEGER,He=0;return de<xe?He=-1:de>xe&&(He=1),a==="desc"?He*-1:He}}function sn(i,r=i.getLatLngs()){return i instanceof L.Polygon?L.polygon(r).getLatLngs():L.polyline(r).getLatLngs()}function La(i,r){var a,u,d,g;if((u=(a=r.options.crs)==null?void 0:a.projection)!=null&&u.MAX_LATITUDE){let _=(g=(d=r.options.crs)==null?void 0:d.projection)==null?void 0:g.MAX_LATITUDE;i.lat=Math.max(Math.min(_,i.lat),-_)}return i}function mi(i){return i.options.renderer||i._map&&(i._map._getPaneRenderer(i.options.pane)||i._map.options.renderer||i._map._renderer)||i._renderer}var pu=L.Class.extend({includes:[lo,ci,ya,cu,as],initialize(i){this.map=i,this.Draw=new L.PM.Draw(i),this.Toolbar=new L.PM.Toolbar(i),this.Keyboard=Bt(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(i)},setLang(i="en",r,a="en"){if(i=i.trim().toLowerCase(),!/^[a-z]{2}$/.test(i)){let d=i.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(d){let g=[`${d[1]}_${d[2]}`,`${d[1]}`];for(let _ of g)if(En[_]){i=_;break}}}let u=L.PM.activeLang;r&&(En[i]=(0,xt.default)(En[a],r)),L.PM.activeLang=i,this.map.pm.Toolbar.reinit(),this._fireLangChange(u,i,a,En[i])},addControls(i){this.Toolbar.addControls(i)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(i="Polygon",r){i==="Poly"&&(i="Polygon"),this.Draw.enable(i,r)},disableDraw(i="Polygon"){i==="Poly"&&(i="Polygon"),this.Draw.disable(i)},setPathOptions(i,r={}){let a=r.ignoreShapes||[],u=r.merge||!1;this.map.pm.Draw.shapes.forEach(d=>{a.indexOf(d)===-1&&this.map.pm.Draw[d].setPathOptions(i,u)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(i){let r=(0,xt.default)(this.globalOptions,i);r.editable&&(r.resizeableCircleMarker=r.editable,delete r.editable);let a=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!r.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),a=!0);let u=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!r.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),u=!0),this.map.pm.Draw.shapes.forEach(d=>{this.map.pm.Draw[d].setOptions(r)}),a&&this.map.pm.Draw.CircleMarker.enable(),u&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(d=>{d.pm.setOptions(r)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=r,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(i=>{i.pm.enabled()&&i.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(i){return this.Draw.Cut.enable(i)},toggleGlobalCutMode(i){return this.Draw.Cut.toggle(i)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(i=!1){let r=L.PM.Utils.findLayers(this.map);if(!i)return r;let a=L.featureGroup();return a._pmTempLayer=!0,r.forEach(u=>{a.addLayer(u)}),a},getGeomanDrawLayers(i=!1){let r=L.PM.Utils.findLayers(this.map).filter(u=>u._drawnByGeoman===!0);if(!i)return r;let a=L.featureGroup();return a._pmTempLayer=!0,r.forEach(u=>{a.addLayer(u)}),a},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(i){this._touchEventCounter===0&&(L.DomEvent.on(i,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(i,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(i){this._touchEventCounter===1&&(L.DomEvent.off(i,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(i,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(i){mi(this.map)._onMouseMove(this._createMouseEvent("mousemove",i))},_canvasTouchClick(i){let r="";i.type==="touchstart"||i.type==="pointerdown"?r="mousedown":(i.type==="touchend"||i.type==="pointerup"||i.type==="touchcancel"||i.type==="pointercancel")&&(r="mouseup"),r&&mi(this.map)._onClick(this._createMouseEvent(r,i))},_createMouseEvent(i,r){let a,u=r.touches[0]||r.changedTouches[0];try{a=new MouseEvent(i,{bubbles:r.bubbles,cancelable:r.cancelable,view:r.view,detail:u.detail,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY,ctrlKey:r.ctrlKey,altKey:r.altKey,shiftKey:r.shiftKey,metaKey:r.metaKey,button:r.button,relatedTarget:r.relatedTarget})}catch{a=document.createEvent("MouseEvents"),a.initMouseEvent(i,r.bubbles,r.cancelable,r.view,u.detail,u.screenX,u.screenY,u.clientX,u.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.button,r.relatedTarget)}return a}}),Ca=pu,Mn=L.Control.extend({includes:[as],options:{position:"topleft",disableByOtherButtons:!0},initialize(i){this._button=L.Util.extend({},this.options,i)},onAdd(i){return this._map=i,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let i=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),i?i.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(i){return typeof i=="boolean"?this._button.toggleStatus=i:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(i){i&&i.preventDefault(),!this._button.disabled&&(this._button.onClick(i,{button:this,event:i}),this._clicked(i),this._button.afterClick(i,{button:this,event:i}))},_makeButton(i){let r=this.options.position.indexOf("right")>-1?"pos-right":"",a=L.DomUtil.create("div",`button-container  ${r}`,this._container);i.title&&a.setAttribute("title",i.title);let u=L.DomUtil.create("a","leaflet-buttons-control-button",a);u.setAttribute("role","button"),u.setAttribute("tabindex","0"),u.href="#";let d=L.DomUtil.create("div",`leaflet-pm-actions-container ${r}`,a),g=i.actions,_={cancel:{text:vt("actions.cancel"),title:vt("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:vt("actions.finish"),title:vt("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:vt("actions.removeLastVertex"),title:vt("actions.removeLastVertex"),onClick(){this._map.pm.Draw[i.jsClass]._removeLastVertex()}},finish:{text:vt("actions.finish"),title:vt("actions.finish"),onClick(k){this._map.pm.Draw[i.jsClass]._finishShape(k)}}};i._preparedActions=g.map(k=>{let S=typeof k=="string"?k:k.name,V;if(_[S])V=_[S];else if(k.text)V=k;else return V;let N=L.DomUtil.create("a",`leaflet-pm-action ${r} action-${S}`,d);if(N.setAttribute("role","button"),N.setAttribute("tabindex","0"),N.href="#",V.title&&(N.title=V.title),N.innerHTML=V.text,L.DomEvent.disableClickPropagation(N),L.DomEvent.on(N,"click",L.DomEvent.stop),V._node=N,!i.disabled&&V.onClick){let de=xe=>{xe.preventDefault();let He="",{buttons:Qe}=this._map.pm.Toolbar;for(let ot in Qe)if(Qe[ot]._button===i){He=ot;break}this._fireActionClick(V,He,i)};L.DomEvent.addListener(N,"click",de,this),L.DomEvent.addListener(N,"click",V.onClick,this),L.DomEvent.addListener(N,"click",()=>this._updateActiveAction(i))}return V}),this._updateActiveAction(i),i.toggleStatus&&L.DomUtil.addClass(a,"active");let b=L.DomUtil.create("div","control-icon",u);return i.iconUrl&&b.setAttribute("src",i.iconUrl),i.className&&L.DomUtil.addClass(b,i.className),L.DomEvent.disableClickPropagation(u),L.DomEvent.on(u,"click",L.DomEvent.stop),i.disabled||(L.DomEvent.addListener(u,"click",this._onBtnClick,this),L.DomEvent.addListener(u,"click",this._triggerClick,this)),i.disabled&&(L.DomUtil.addClass(u,"pm-disabled"),u.setAttribute("aria-disabled","true")),a},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let i="",{buttons:r}=this._map.pm.Toolbar;for(let a in r)if(r[a]._button===this._button){i=a;break}this._fireButtonClick(i,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let i="pm-disabled",r=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(r,i),r.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(r,i),r.setAttribute("aria-disabled","false"))},_updateActiveAction(i){var r;(r=i._preparedActions)==null||r.forEach(a=>{a!=null&&a._node&&(a.isActive&&a.isActive.call(this)?L.DomUtil.addClass(a._node,"active-action"):L.DomUtil.removeClass(a._node,"active-action"))})}}),ka=Mn;L.Control.PMButton=ka;var Ea=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(i){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(i)},reinit(){let i=this.isVisible;this.removeControls(),this._defineButtons(),i&&this.addControls()},init(i){this.map=i,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(i){let r=`${i}Container`;return this[r]||(this[r]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${i} leaflet-bar leaflet-control`)),this[r]},getButtons(){return this.buttons},addControls(i=this.options){typeof i.editPolygon<"u"&&(i.editMode=i.editPolygon),typeof i.deleteLayer<"u"&&(i.removalMode=i.deleteLayer),L.Util.setOptions(this,i),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let i=this.getButtons(),r={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let a in i){let u=i[a];L.Util.setOptions(u,{className:r.geomanIcons[a]})}},removeControls(){let i=this.getButtons();for(let r in i)i[r].remove();this.isVisible=!1},toggleControls(i=this.options){this.isVisible?this.removeControls():this.addControls(i)},_addButton(i,r){return this.buttons[i]=r,this.options[i]=!!this.options[i]||!1,this.buttons[i]},triggerClickOnToggledButtons(i){for(let r in this.buttons){let a=this.buttons[r];a._button.disableByOtherButtons&&a!==i&&a.toggled()&&a._triggerClick()}},toggleButton(i,r,a=!0){i==="editPolygon"&&(i="editMode"),i==="deleteLayer"&&(i="removalMode");let u=i;return a&&this.triggerClickOnToggledButtons(this.buttons[u]),this.buttons[u]?this.buttons[u].toggle(r):!1},_defineButtons(){let i={className:"control-icon leaflet-pm-icon-marker",title:vt("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(de,xe)=>{this.map.pm.Draw[xe.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},r={title:vt("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(de,xe)=>{this.map.pm.Draw[xe.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},a={className:"control-icon leaflet-pm-icon-polyline",title:vt("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(de,xe)=>{this.map.pm.Draw[xe.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},u={title:vt("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(de,xe)=>{this.map.pm.Draw[xe.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},d={title:vt("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(de,xe)=>{this.map.pm.Draw[xe.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},g={title:vt("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(de,xe)=>{this.map.pm.Draw[xe.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},_={title:vt("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},b={title:vt("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},k={title:vt("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(de,xe)=>{this.map.pm.Draw[xe.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},S={title:vt("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},V={title:vt("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},N={className:"control-icon leaflet-pm-icon-text",title:vt("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(de,xe)=>{this.map.pm.Draw[xe.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(i)),this._addButton("drawPolyline",new L.Control.PMButton(a)),this._addButton("drawRectangle",new L.Control.PMButton(g)),this._addButton("drawPolygon",new L.Control.PMButton(r)),this._addButton("drawCircle",new L.Control.PMButton(u)),this._addButton("drawCircleMarker",new L.Control.PMButton(d)),this._addButton("drawText",new L.Control.PMButton(N)),this._addButton("editMode",new L.Control.PMButton(_)),this._addButton("dragMode",new L.Control.PMButton(b)),this._addButton("cutPolygon",new L.Control.PMButton(k)),this._addButton("removalMode",new L.Control.PMButton(S)),this._addButton("rotateMode",new L.Control.PMButton(V))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let i=this.getButtons(),r=[];this.options.drawControls===!1&&(r=r.concat(Object.keys(i).filter(a=>!i[a]._button.tool))),this.options.editControls===!1&&(r=r.concat(Object.keys(i).filter(a=>i[a]._button.tool==="edit"))),this.options.optionsControls===!1&&(r=r.concat(Object.keys(i).filter(a=>i[a]._button.tool==="options"))),this.options.customControls===!1&&(r=r.concat(Object.keys(i).filter(a=>i[a]._button.tool==="custom")));for(let a in i)if(this.options[a]&&r.indexOf(a)===-1){let u=i[a]._button.tool;u||(u="draw"),i[a].setPosition(this._getBtnPosition(u)),i[a].addTo(this.map)}},_getBtnPosition(i){return this.options.positions&&this.options.positions[i]?this.options.positions[i]:this.options.position},setBlockPosition(i,r){this.options.positions[i]=r,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(i,r){if(r)typeof r!="object"&&(r={name:r});else throw new TypeError("Button has no name");let a=this._btnNameMapping(i);if(!r.name)throw new TypeError("Button has no name");if(this.buttons[r.name])throw new TypeError("Button with this name already exists");let u=this.map.pm.Draw.createNewDrawInstance(r.name,a);r={...this.buttons[a]._button,...r};let d=this.createCustomControl(r);return{drawInstance:u,control:d}},createCustomControl(i){if(!i.name)throw new TypeError("Button has no name");if(this.buttons[i.name])throw new TypeError("Button with this name already exists");i.onClick||(i.onClick=()=>{}),i.afterClick||(i.afterClick=()=>{}),i.toggle!==!1&&(i.toggle=!0),i.block&&(i.block=i.block.toLowerCase()),(!i.block||i.block==="draw")&&(i.block=""),i.className?i.className.indexOf("control-icon")===-1&&(i.className=`control-icon ${i.className}`):i.className="control-icon";let r={tool:i.block,className:i.className,title:i.title||"",jsClass:i.name,onClick:i.onClick,afterClick:i.afterClick,doToggle:i.toggle,toggleStatus:!1,disableOtherButtons:i.disableOtherButtons??!0,disableByOtherButtons:i.disableByOtherButtons??!0,cssToggle:i.toggle,position:this.options.position,actions:i.actions||[],disabled:!!i.disabled};this.options[i.name]!==!1&&(this.options[i.name]=!0);let a=this._addButton(i.name,new L.Control.PMButton(r));return this.changeControlOrder(),a},controlExists(i){return!!this.getButton(i)},getButton(i){return this.getButtons()[i]},getButtonsInBlock(i){let r={};if(i)for(let a in this.getButtons()){let u=this.getButtons()[a];(u._button.tool===i||i==="draw"&&!u._button.tool)&&(r[a]=u)}return r},changeControlOrder(i=[]){let r=this._shapeMapping(),a=[];i.forEach(g=>{r[g]?a.push(r[g]):a.push(g)});let u=this.getButtons(),d={};a.forEach(g=>{u[g]&&(d[g]=u[g])}),Object.keys(u).filter(g=>!u[g]._button.tool||u[g]._button.tool==="draw").forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),Object.keys(u).filter(g=>u[g]._button.tool==="edit").forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),Object.keys(u).filter(g=>u[g]._button.tool==="options").forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),Object.keys(u).filter(g=>u[g]._button.tool==="custom").forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),Object.keys(u).forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),this.map.pm.Toolbar.buttons=d,this._showHideButtons()},getControlOrder(){let i=this.getButtons(),r=[];for(let a in i)r.push(a);return r},changeActionsOfControl(i,r){let a=this._btnNameMapping(i);if(!a)throw new TypeError("No name passed");if(!r)throw new TypeError("No actions passed");if(!this.buttons[a])throw new TypeError("Button with this name not exists");this.buttons[a]._button.actions=r,this.changeControlOrder()},setButtonDisabled(i,r){let a=this._btnNameMapping(i);r?this.buttons[a].disable():this.buttons[a].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(i){let r=this._shapeMapping();return r[i]?r[i]:i}}),co=Ea,mu=v(ts()),Ma={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(i){i.forEach(r=>{if(Array.isArray(r)){this._assignEvents(r);return}r.off("drag",this._handleSnapping,this),r.on("drag",this._handleSnapping,this),r.off("dragend",this._cleanupSnapping,this),r.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(i){if(i){let r=i.target;r._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(r=>{r.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(i){var b,k,S;let r=i.target;if(r._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((b=i==null?void 0:i.originalEvent)==null?void 0:b.altKey)||((S=(k=this._map)==null?void 0:k.pm)==null?void 0:S.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let a=this._calcClosestLayer(r.getLatLng(),this._snapList);if(Object.keys(a).length===0)return!1;let u=a.layer instanceof L.Marker||a.layer instanceof L.CircleMarker||!this.options.snapSegment,d;u?d=a.latlng:d=this._checkPrioritiySnapping(a);let g=this.options.snapDistance,_={marker:r,shape:this._shape,snapLatLng:d,segment:a.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:a.layer,distance:a.distance};if(this._fireSnapDrag(_.marker,_),this._fireSnapDrag(this._layer,_),a.distance<g){r._orgLatLng=r.getLatLng(),r.setLatLng(d),r._snapped=!0,r._snapInfo=_;let V=()=>{this._snapLatLng=d,this._fireSnap(r,_),this._fireSnap(this._layer,_)},N=this._snapLatLng||{},de=d||{};(N.lat!==de.lat||N.lng!==de.lng)&&V()}else this._snapLatLng&&(this._unsnap(_),r._snapped=!1,r._snapInfo=void 0,this._fireUnsnap(_.marker,_),this._fireUnsnap(this._layer,_));return!0},_createSnapList(){let i=[],r=[],a=this._map;a.off("layerremove",this._handleSnapLayerRemoval,this),a.on("layerremove",this._handleSnapLayerRemoval,this),a.eachLayer(u=>{if((u instanceof L.Polyline||u instanceof L.Marker||u instanceof L.CircleMarker||u instanceof L.ImageOverlay)&&u.options.snapIgnore!==!0){if(u.options.snapIgnore===void 0&&(!L.PM.optIn&&u.options.pmIgnore===!0||L.PM.optIn&&u.options.pmIgnore!==!1))return;(u instanceof L.Circle||u instanceof L.CircleMarker)&&u.pm&&u.pm._hiddenPolyCircle?i.push(u.pm._hiddenPolyCircle):u instanceof L.ImageOverlay&&(u=L.rectangle(u.getBounds())),i.push(u);let d=L.polyline([],{color:"red",pmIgnore:!0});d._pmTempLayer=!0,r.push(d),(u instanceof L.Circle||u instanceof L.CircleMarker)&&r.push(d)}}),i=i.filter(u=>this._layer!==u),i=i.filter(u=>u._latlng||u._latlngs&&Hn(u._latlngs)),i=i.filter(u=>!u._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let u=L.polyline([],{color:"red",pmIgnore:!0});u._pmTempLayer=!0,r.push(u)}),this._snapList=i.concat(this._otherSnapLayers)):this._snapList=i,this.debugIndicatorLines=r},_handleSnapLayerRemoval({layer:i}){if(!i._leaflet_id)return;let r=this._snapList.findIndex(a=>a._leaflet_id===i._leaflet_id);r>-1&&this._snapList.splice(r,1)},_calcClosestLayer(i,r){return this._calcClosestLayers(i,r,1)[0]},_calcClosestLayers(i,r,a=1){let u=[],d={};r.forEach((_,b)=>{var S;if(_._parentCopy&&_._parentCopy===this._layer||((S=_.getLatLngs)==null?void 0:S.call(_).flat(5).length)<2)return;let k=this._calcLayerDistances(i,_);if(k.distance=Math.floor(k.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[b]){let V=L.polyline([],{color:"red",pmIgnore:!0});V._pmTempLayer=!0,this.debugIndicatorLines[b]=V}this.debugIndicatorLines[b].setLatLngs([i,k.latlng])}a===1&&(d.distance===void 0||k.distance-5<=d.distance)?(k.distance+5<d.distance&&(u=[]),d=k,d.layer=_,u.push(d)):a!==1&&(d={},d=k,d.layer=_,u.push(d))}),a!==1&&(u=u.sort((_,b)=>_.distance-b.distance)),a===-1&&(a=u.length);let g=this._getClosestLayerByPriority(u,a);return L.Util.isArray(g)?g:[g]},_calcLayerDistances(i,r){let a=this._map,u=r instanceof L.Marker||r instanceof L.CircleMarker,d=r instanceof L.Polygon,g=i;if(u){let _=r.getLatLng();return{latlng:{..._},distance:this._getDistance(a,_,g)}}return this._calcLatLngDistances(g,r.getLatLngs(),a,d)},_calcLatLngDistances(i,r,a,u=!1){let d,g,_,b=k=>{k.forEach((S,V)=>{if(Array.isArray(S)){b(S);return}if(this.options.snapSegment){let N=S,de;u?de=V+1===k.length?0:V+1:de=V+1===k.length?void 0:V+1;let xe=k[de];if(xe){let He=this._getDistanceToSegment(a,i,N,xe);(g===void 0||He<g)&&(g=He,_=[N,xe])}}else{let N=this._getDistance(a,i,S);(g===void 0||N<g)&&(g=N,d=S)}})};return b(r),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(a,i,_[0],_[1])},segment:_,distance:g}:{latlng:d,distance:g}},_getClosestLayerByPriority(i,r=1){i=i.sort((_,b)=>_._leaflet_id-b._leaflet_id);let a=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],u=this._map.pm.globalOptions.snappingOrder||[],d=0,g={};return u.concat(a).forEach(_=>{g[_]||(d+=1,g[_]=d)}),i.sort(fu("instanceofShape",g)),r===1?i[0]||{}:i.slice(0,r)},_checkPrioritiySnapping(i){let r=this._map,a=i.segment[0],u=i.segment[1],d=i.latlng,g=d;if(this.options.snapVertex){let _=this._getDistance(r,a,d),b=this._getDistance(r,u,d),k=_<b?a:u,S=_<b?_:b;if(this.options.snapMiddle){let N=L.PM.Utils.calcMiddleLatLng(r,a,u),de=this._getDistance(r,N,d);de<_&&de<b&&(k=N,S=de)}let V=this.options.snapDistance;S<V&&(g=k)}return{...g}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(i,r,a,u){let d=i.getMaxZoom();d===1/0&&(d=i.getZoom());let g=i.project(r,d),_=i.project(a,d),b=i.project(u,d),k=L.LineUtil.closestPointOnSegment(g,_,b);return i.unproject(k,d)},_getDistanceToSegment(i,r,a,u){let d=i.latLngToContainerPoint(r),g=i.latLngToContainerPoint(a),_=i.latLngToContainerPoint(u);return L.LineUtil.pointToSegmentDistance(d,g,_)},_getDistance(i,r,a){return i.latLngToContainerPoint(r).distanceTo(i.latLngToContainerPoint(a))}},ho=Ma,gu=L.Class.extend({includes:[ho,as],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(i){L.Util.setOptions(this,i),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(i){let r=new L.Icon.Default;r.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=r,this._map=i,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(a=>{this[a]=new L.PM.Draw[a](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(i,r=!1){r?this.options.pathOptions=(0,mu.default)(this.options.pathOptions,i):this.options.pathOptions=i},getShapes(){return this.shapes},getShape(){return this._shape},enable(i,r){if(!i)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[i].enable(r)},disable(){this.shapes.forEach(i=>{this[i].disable()})},addControls(){this.shapes.forEach(i=>{this[i].addButton()})},getActiveShape(){let i;return this.shapes.forEach(r=>{this[r]._enabled&&(i=r)}),i},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let i=[];this._map.eachLayer(r=>{(r instanceof L.Polyline||r instanceof L.Marker||r instanceof L.Circle||r instanceof L.CircleMarker||r instanceof L.ImageOverlay)&&(r._pmTempLayer||i.push(r))}),this._enabled?i.forEach(r=>{L.PM.Utils.disablePopup(r)}):i.forEach(r=>{L.PM.Utils.enablePopup(r)})},createNewDrawInstance(i,r){let a=this._getShapeFromBtnName(r);if(this[i])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[a])throw new TypeError(`There is no class L.PM.Draw.${a}`);return this[i]=new L.PM.Draw[a](this._map),this[i].toolbarButtonName=i,this[i]._shape=i,this.shapes.push(i),this[r]&&this[i].setOptions(this[r].options),this[i].setOptions(this[i].options),this[i]},_getShapeFromBtnName(i){let r={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return r[i]?r[i]:this[i]?this[i]._shape:i},_finishLayer(i){i.pm&&(i.pm.setOptions(this.options),i.pm._shape=this._shape,i.pm._map=this._map),this._addDrawnLayerProp(i)},_addDrawnLayerProp(i){i._drawnByGeoman=!0},_setPane(i,r){r==="layerPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":r==="vertexPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":r==="markerPane"&&(i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),hi=gu;hi.Marker=hi.extend({initialize(i){this._map=i,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(i){L.Util.setOptions(this,i),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(vt("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(r=>{this.isRelevantMarker(r)&&r.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(i=>{this.isRelevantMarker(i)&&i.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},isRelevantMarker(i){return i instanceof L.Marker&&i.pm&&!i._pmTempLayer&&!i.pm._initTextMarker},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let r=i;r.target=this._hintMarker,this._handleSnapping(r)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(i){if(!i.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng(),a=new L.Marker(r,this.options.markerStyle);this._setPane(a,"markerPane"),this._finishLayer(a),a.pm||(a.options.draggable=!1),a.addTo(this._map.pm._getContainingLayer()),a.pm&&this.options.markerEditable?a.pm.enable():a.dragging&&a.dragging.disable(),this._fireCreate(a),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var i,r;(i=this.options.markerStyle)!=null&&i.icon&&((r=this._hintMarker)==null||r.setIcon(this.options.markerStyle.icon))}});var di=63710088e-1,Pa={centimeters:di*100,centimetres:di*100,degrees:di/111325,feet:di*3.28084,inches:di*39.37,kilometers:di/1e3,kilometres:di/1e3,meters:di,metres:di,miles:di/1609.344,millimeters:di*1e3,millimetres:di*1e3,nauticalmiles:di/1852,radians:1,yards:di*1.0936};function Zn(i,r,a){a===void 0&&(a={});var u={type:"Feature"};return(a.id===0||a.id)&&(u.id=a.id),a.bbox&&(u.bbox=a.bbox),u.properties=r||{},u.geometry=i,u}function qn(i,r,a){if(a===void 0&&(a={}),!i)throw new Error("coordinates is required");if(!Array.isArray(i))throw new Error("coordinates must be an Array");if(i.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!fo(i[0])||!fo(i[1]))throw new Error("coordinates must contain numbers");var u={type:"Point",coordinates:i};return Zn(u,r,a)}function Pn(i,r,a){if(a===void 0&&(a={}),i.length<2)throw new Error("coordinates must be an array of two or more positions");var u={type:"LineString",coordinates:i};return Zn(u,r,a)}function bi(i,r){r===void 0&&(r={});var a={type:"FeatureCollection"};return r.id&&(a.id=r.id),r.bbox&&(a.bbox=r.bbox),a.features=i,a}function _u(i,r){r===void 0&&(r="kilometers");var a=Pa[r];if(!a)throw new Error(r+" units is invalid");return i*a}function Dr(i,r){r===void 0&&(r="kilometers");var a=Pa[r];if(!a)throw new Error(r+" units is invalid");return i/a}function xi(i){var r=i%(2*Math.PI);return r*180/Math.PI}function Gi(i){var r=i%360;return r*Math.PI/180}function fo(i){return!isNaN(i)&&i!==null&&!Array.isArray(i)}function hs(i){var r,a,u={type:"FeatureCollection",features:[]};if(i.type==="Feature"?a=i.geometry:a=i,a.type==="LineString")r=[a.coordinates];else if(a.type==="MultiLineString")r=a.coordinates;else if(a.type==="MultiPolygon")r=[].concat.apply([],a.coordinates);else if(a.type==="Polygon")r=a.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return r.forEach(function(d){r.forEach(function(g){for(var _=0;_<d.length-1;_++)for(var b=_;b<g.length-1;b++)if(!(d===g&&(Math.abs(_-b)===1||_===0&&b===d.length-2&&d[_][0]===d[d.length-1][0]&&d[_][1]===d[d.length-1][1]))){var k=po(d[_][0],d[_][1],d[_+1][0],d[_+1][1],g[b][0],g[b][1],g[b+1][0],g[b+1][1]);k&&u.features.push(qn([k[0],k[1]]))}})}),u}function po(i,r,a,u,d,g,_,b){var k,S,V,N,de,xe={x:null,y:null,onLine1:!1,onLine2:!1};return k=(b-g)*(a-i)-(_-d)*(u-r),k===0?xe.x!==null&&xe.y!==null?xe:!1:(S=r-g,V=i-d,N=(_-d)*S-(b-g)*V,de=(a-i)*S-(u-r)*V,S=N/k,V=de/k,xe.x=i+S*(a-i),xe.y=r+S*(u-r),S>=0&&S<=1&&(xe.onLine1=!0),V>=0&&V<=1&&(xe.onLine2=!0),xe.onLine1&&xe.onLine2?[xe.x,xe.y]:!1)}hi.Line=hi.extend({initialize(i){this._map=i,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(i){L.Util.setOptions(this,i),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(vt("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_syncHintLine(){let i=this._layer.getLatLngs();if(i.length>0){let r=i[i.length-1];this._hintline.setLatLngs([r,this._hintMarker.getLatLng()])}},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let a=i;a.target=this._hintMarker,this._handleSnapping(a)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let r=this._layer._defaultShape().slice();r.push(this._hintMarker.getLatLng()),this._change(r)},hasSelfIntersection(){return hs(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(i,r){let a=L.polyline(this._layer.getLatLngs());i&&(r||(r=this._hintMarker.getLatLng()),a.addLatLng(r));let u=hs(a.toGeoJSON(15));this._doesSelfIntersect=u.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(u,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(i){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,i.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng(),a=this._layer.getLatLngs(),u=a[a.length-1];if(r.equals(a[0])||a.length>0&&r.equals(u)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:r,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(r);let d=this._createMarker(r);this._setTooltipText(),this._setHintLineAfterNewVertex(r),this._fireVertexAdded(d,void 0,r,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(i)},_setHintLineAfterNewVertex(i){this._hintline.setLatLngs([i,i])},_removeLastVertex(){let i=this._markers;if(i.length<=1){this.disable();return}let r=this._layer.getLatLngs(),a=i[i.length-1],{indexPath:u}=L.PM.Utils.findDeepMarkerIndex(i,a);i.pop(),this._layerGroup.removeLayer(a);let d=i[i.length-1],g=r.indexOf(d.getLatLng());r=r.slice(0,g+1),this._layer.setLatLngs(r),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(a,u,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let i=this._layer.getLatLngs();if(i.length<=1)return;let r=L.polyline(i,this.options.pathOptions);this._setPane(r,"layerPane"),this._finishLayer(r),r.addTo(this._map.pm._getContainingLayer()),this._fireCreate(r),this.options.snappable&&this._cleanupSnapping();let a=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(a))},_createMarker(i){let r=new L.Marker(i,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._pmTempLayer=!0,this._layerGroup.addLayer(r),this._markers.push(r),r.on("click",this._finishShape,this),r},_setTooltipText(){let{length:i}=this._layer.getLatLngs().flat(),r="";i<=1?r=vt("tooltips.continueLine"):r=vt("tooltips.finishLine"),this._hintMarker.setTooltipContent(r)},_change(i){this._fireChange(i,"Draw")},setStyle(){var i,r;(i=this._layer)==null||i.setStyle(this.options.templineStyle),(r=this._hintline)==null||r.setStyle(this.options.hintlineStyle)}}),hi.Polygon=hi.Line.extend({initialize(i){this._map=i,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(i){L.PM.Draw.Line.prototype.enable.call(this,i),this._layer.pm._shape="Polygon"},_createMarker(i){let r=new L.Marker(i,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._pmTempLayer=!0,this._layerGroup.addLayer(r),this._markers.push(r),this._layer.getLatLngs().flat().length===1?(r.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(r)-1,this.options.snappable&&this._cleanupSnapping()):r.on("click",()=>1),r},_setTooltipText(){let{length:i}=this._layer.getLatLngs().flat(),r="";i<=2?r=vt("tooltips.continueLine"):r=vt("tooltips.finishPoly"),this._hintMarker.setTooltipContent(r)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let i=this._layer.getLatLngs();if(i.length<=2)return;let r=L.polygon(i,this.options.pathOptions);this._setPane(r,"layerPane"),this._finishLayer(r),r.addTo(this._map.pm._getContainingLayer()),this._fireCreate(r),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let a=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(a))}}),hi.Rectangle=hi.extend({initialize(i){this._map=i,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(i){if(L.Util.setOptions(this,i),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(vt("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let r=0;r<2;r+=1){let a=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(a,"vertexPane"),a._pmTempLayer=!0,this._layerGroup.addLayer(a),this._styleMarkers.push(a)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_placeStartingMarkers(i){this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(r),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(a=>{L.DomUtil.addClass(a._icon,"visible"),a.setLatLng(r)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(vt("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let i=this._startMarker.getLatLng();i&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([i,i]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let a=i;a.target=this._hintMarker,this._handleSnapping(a)}let r=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(r,"Draw")},_syncRectangleSize(){let i=La(this._startMarker.getLatLng(),this._map),r=La(this._hintMarker.getLatLng(),this._map),a=L.PM.Utils._getRotatedRectangle(i,r,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(a),this.options.cursorMarker&&this._styleMarkers){let u=[];a.forEach(d=>{!d.equals(i,1e-8)&&!d.equals(r,1e-8)&&u.push(d)}),u.forEach((d,g)=>{try{this._styleMarkers[g].setLatLng(d)}catch{}})}},_findCorners(){let i=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(i[0],i[2],this.options.rectangleAngle||0,this._map)},_finishShape(i){this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng(),a=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||a.equals(r))return;let u=L.rectangle([a,r],this.options.pathOptions);if(this.options.rectangleAngle){let g=L.PM.Utils._getRotatedRectangle(a,r,this.options.rectangleAngle||0,this._map);u.setLatLngs(g),u.pm&&u.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(u,"layerPane"),this._finishLayer(u),u.addTo(this._map.pm._getContainingLayer()),this._fireCreate(u);let d=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(d))},setStyle(){var i;(i=this._layer)==null||i.setStyle(this.options.pathOptions)}}),hi.CircleMarker=hi.extend({initialize(i){this._map=i,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(i){if(L.Util.setOptions(this,i),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let r={};L.extend(r,this.options.templineStyle),r.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),r),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(vt("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(vt("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(i=>{this.isRelevantMarker(i)&&i.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(i=>{this.isRelevantMarker(i)&&i.pm.disable()})},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_placeCenterMarker(i){this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let r=this._hintMarker.getLatLng();this._centerMarker.setLatLng(r),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let i=this._centerMarker.getLatLng();i&&(this._layer.setLatLng(i),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(vt("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let i=this._centerMarker.getLatLng(),r=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([i,r])},_syncCircleRadius(){let i=this._centerMarker.getLatLng(),r=this._hintMarker.getLatLng(),a=this._distanceCalculation(i,r);this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(a)},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let a=i;a.target=this._hintMarker,this._handleSnapping(a)}this._handleHintMarkerSnapping();let r=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(r,"Draw")},isRelevantMarker(i){return i instanceof L.CircleMarker&&!(i instanceof L.Circle)&&i.pm&&!i._pmTempLayer},_createMarker(i){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!i.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng(),a=new this._BaseCircleClass(r,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(a,"layerPane"),this._finishLayer(a),a.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(a),this._fireCreate(a),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(i){i.pm&&this.options.markerEditable&&i.pm.enable()},_finishShape(i){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._centerMarker.getLatLng(),a=this._defaultRadius;if(this.options[this._editableOption]){let _=this._hintMarker.getLatLng();a=this._distanceCalculation(r,_),this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?a=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&(a=this.options[this._maxRadiusOption])}let u={...this.options.pathOptions,radius:a},d=new this._BaseCircleClass(r,u);this._setPane(d,"layerPane"),this._finishLayer(d),d.addTo(this._map.pm._getContainingLayer()),d.pm&&d.pm._updateHiddenPolyCircle(),this._fireCreate(d);let g=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(g))},_getNewDestinationOfHintMarker(){let i=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return i;let r=this._centerMarker.getLatLng(),a=this._distanceCalculation(r,i);this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?i=cs(this._map,r,i,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&(i=cs(this._map,r,i,this._getMaxDistanceInMeter()))}return i},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let i=this._centerMarker.getLatLng(),r=this._hintMarker.getLatLng(),a=this._distanceCalculation(i,r);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var r,a;let i={};L.extend(i,this.options.templineStyle),this.options[this._editableOption]&&(i.radius=0),(r=this._layer)==null||r.setStyle(i),(a=this._hintline)==null||a.setStyle(this.options.hintlineStyle)},_distanceCalculation(i,r){return this._map.project(i).distanceTo(this._map.project(r))}}),hi.Circle=hi.CircleMarker.extend({initialize(i){this._map=i,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(i,r){return this._map.distance(i,r)}});function Vi(i){if(!i)throw new Error("coord is required");if(!Array.isArray(i)){if(i.type==="Feature"&&i.geometry!==null&&i.geometry.type==="Point")return i.geometry.coordinates;if(i.type==="Point")return i.coordinates}if(Array.isArray(i)&&i.length>=2&&!Array.isArray(i[0])&&!Array.isArray(i[1]))return i;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function on(i){if(Array.isArray(i))return i;if(i.type==="Feature"){if(i.geometry!==null)return i.geometry.coordinates}else if(i.coordinates)return i.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function ds(i){return i.type==="Feature"?i.geometry:i}function mo(i,r){return i.type==="FeatureCollection"?"FeatureCollection":i.type==="GeometryCollection"?"GeometryCollection":i.type==="Feature"&&i.geometry!==null?i.geometry.type:i.type}function go(i,r,a){if(i!==null)for(var u,d,g,_,b,k,S,V=0,N=0,de,xe=i.type,He=xe==="FeatureCollection",Qe=xe==="Feature",ot=He?i.features.length:1,At=0;At<ot;At++){S=He?i.features[At].geometry:Qe?i.geometry:i,de=S?S.type==="GeometryCollection":!1,b=de?S.geometries.length:1;for(var $=0;$<b;$++){var J=0,se=0;if(_=de?S.geometries[$]:S,_!==null){k=_.coordinates;var we=_.type;switch(V=0,we){case null:break;case"Point":if(r(k,N,At,J,se)===!1)return!1;N++,J++;break;case"LineString":case"MultiPoint":for(u=0;u<k.length;u++){if(r(k[u],N,At,J,se)===!1)return!1;N++,we==="MultiPoint"&&J++}we==="LineString"&&J++;break;case"Polygon":case"MultiLineString":for(u=0;u<k.length;u++){for(d=0;d<k[u].length-V;d++){if(r(k[u][d],N,At,J,se)===!1)return!1;N++}we==="MultiLineString"&&J++,we==="Polygon"&&se++}we==="Polygon"&&J++;break;case"MultiPolygon":for(u=0;u<k.length;u++){for(se=0,d=0;d<k[u].length;d++){for(g=0;g<k[u][d].length-V;g++){if(r(k[u][d][g],N,At,J,se)===!1)return!1;N++}se++}J++}break;case"GeometryCollection":for(u=0;u<_.geometries.length;u++)if(go(_.geometries[u],r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function gi(i,r){if(i.type==="Feature")r(i,0);else if(i.type==="FeatureCollection")for(var a=0;a<i.features.length&&r(i.features[a],a)!==!1;a++);}function lr(i,r,a){var u=a;return gi(i,function(d,g){g===0&&a===void 0?u=d:u=r(u,d,g)}),u}function yu(i,r){var a,u,d,g,_,b,k,S,V,N,de=0,xe=i.type==="FeatureCollection",He=i.type==="Feature",Qe=xe?i.features.length:1;for(a=0;a<Qe;a++){for(b=xe?i.features[a].geometry:He?i.geometry:i,S=xe?i.features[a].properties:He?i.properties:{},V=xe?i.features[a].bbox:He?i.bbox:void 0,N=xe?i.features[a].id:He?i.id:void 0,k=b?b.type==="GeometryCollection":!1,_=k?b.geometries.length:1,d=0;d<_;d++){if(g=k?b.geometries[d]:b,g===null){if(r(null,de,S,V,N)===!1)return!1;continue}switch(g.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(r(g,de,S,V,N)===!1)return!1;break}case"GeometryCollection":{for(u=0;u<g.geometries.length;u++)if(r(g.geometries[u],de,S,V,N)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}de++}}function Ji(i,r){yu(i,function(a,u,d,g,_){var b=a===null?null:a.type;switch(b){case null:case"Point":case"LineString":case"Polygon":return r(Zn(a,d,{bbox:g,id:_}),u,0)===!1?!1:void 0}var k;switch(b){case"MultiPoint":k="Point";break;case"MultiLineString":k="LineString";break;case"MultiPolygon":k="Polygon";break}for(var S=0;S<a.coordinates.length;S++){var V=a.coordinates[S],N={type:k,coordinates:V};if(r(Zn(N,d),u,S)===!1)return!1}})}function vu(i){if(!i)throw new Error("geojson is required");var r=[];return Ji(i,function(a){ur(a,r)}),bi(r)}function ur(i,r){var a=[],u=i.geometry;if(u!==null){switch(u.type){case"Polygon":a=on(u);break;case"LineString":a=[on(u)]}a.forEach(function(d){var g=bu(d,i.properties);g.forEach(function(_){_.id=r.length,r.push(_)})})}}function bu(i,r){var a=[];return i.reduce(function(u,d){var g=Pn([u,d],r);return g.bbox=Rr(u,d),a.push(g),d}),a}function Rr(i,r){var a=i[0],u=i[1],d=r[0],g=r[1],_=a<d?a:d,b=u<g?u:g,k=a>d?a:d,S=u>g?u:g;return[_,b,k,S]}var fs=vu,ps=v($n(),1);function xu(i,r){var a={},u=[];if(i.type==="LineString"&&(i=Zn(i)),r.type==="LineString"&&(r=Zn(r)),i.type==="Feature"&&r.type==="Feature"&&i.geometry!==null&&r.geometry!==null&&i.geometry.type==="LineString"&&r.geometry.type==="LineString"&&i.geometry.coordinates.length===2&&r.geometry.coordinates.length===2){var d=gn(i,r);return d&&u.push(d),bi(u)}var g=(0,ps.default)();return g.load(fs(r)),gi(fs(i),function(_){gi(g.search(_),function(b){var k=gn(_,b);if(k){var S=on(k).join(",");a[S]||(a[S]=!0,u.push(k))}})}),bi(u)}function gn(i,r){var a=on(i),u=on(r);if(a.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(u.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var d=a[0][0],g=a[0][1],_=a[1][0],b=a[1][1],k=u[0][0],S=u[0][1],V=u[1][0],N=u[1][1],de=(N-S)*(_-d)-(V-k)*(b-g),xe=(V-k)*(g-S)-(N-S)*(d-k),He=(_-d)*(g-S)-(b-g)*(d-k);if(de===0)return null;var Qe=xe/de,ot=He/de;if(Qe>=0&&Qe<=1&&ot>=0&&ot<=1){var At=d+Qe*(_-d),$=g+Qe*(b-g);return qn([At,$])}return null}var an=xu,Sa=v($n(),1);function _o(i,r,a){a===void 0&&(a={});var u=Vi(i),d=Vi(r),g=Gi(d[1]-u[1]),_=Gi(d[0]-u[0]),b=Gi(u[1]),k=Gi(d[1]),S=Math.pow(Math.sin(g/2),2)+Math.pow(Math.sin(_/2),2)*Math.cos(b)*Math.cos(k);return _u(2*Math.atan2(Math.sqrt(S),Math.sqrt(1-S)),a.units)}var Kn=_o;function _n(i){var r=i[0],a=i[1],u=i[2],d=i[3],g=Kn(i.slice(0,2),[u,a]),_=Kn(i.slice(0,2),[r,d]);if(g>=_){var b=(a+d)/2;return[r,b-(u-r)/2,u,b+(u-r)/2]}else{var k=(r+u)/2;return[k-(d-a)/2,a,k+(d-a)/2,d]}}var wu=_n;function Sn(i){var r=[1/0,1/0,-1/0,-1/0];return go(i,function(a){r[0]>a[0]&&(r[0]=a[0]),r[1]>a[1]&&(r[1]=a[1]),r[2]<a[0]&&(r[2]=a[0]),r[3]<a[1]&&(r[3]=a[1])}),r}Sn.default=Sn;var Or=Sn;function yn(i,r){r===void 0&&(r={});var a=r.precision,u=r.coordinates,d=r.mutate;if(a=a==null||isNaN(a)?6:a,u=u==null||isNaN(u)?3:u,!i)throw new Error("<geojson> is required");if(typeof a!="number")throw new Error("<precision> must be a number");if(typeof u!="number")throw new Error("<coordinates> must be a number");(d===!1||d===void 0)&&(i=JSON.parse(JSON.stringify(i)));var g=Math.pow(10,a);return go(i,function(_){ms(_,g,u)}),i}function ms(i,r,a){i.length>a&&i.splice(a,i.length);for(var u=0;u<i.length;u++)i[u]=Math.round(i[u]*r)/r;return i}var Ba=yn;function gs(i,r,a){if(a===void 0&&(a={}),a.final===!0)return _s(i,r);var u=Vi(i),d=Vi(r),g=Gi(u[0]),_=Gi(d[0]),b=Gi(u[1]),k=Gi(d[1]),S=Math.sin(_-g)*Math.cos(k),V=Math.cos(b)*Math.sin(k)-Math.sin(b)*Math.cos(k)*Math.cos(_-g);return xi(Math.atan2(S,V))}function _s(i,r){var a=gs(r,i);return a=(a+180)%360,a}function ys(i,r,a,u){u===void 0&&(u={});var d=Vi(i),g=Gi(d[0]),_=Gi(d[1]),b=Gi(a),k=Dr(r,u.units),S=Math.asin(Math.sin(_)*Math.cos(k)+Math.cos(_)*Math.sin(k)*Math.cos(b)),V=g+Math.atan2(Math.sin(b)*Math.sin(k)*Math.cos(_),Math.cos(k)-Math.sin(_)*Math.sin(S)),N=xi(V),de=xi(S);return qn([N,de],u.properties)}function vs(i,r,a){a===void 0&&(a={});var u=qn([1/0,1/0],{dist:1/0}),d=0;return Ji(i,function(g){for(var _=on(g),b=0;b<_.length-1;b++){var k=qn(_[b]);k.properties.dist=Kn(r,k,a);var S=qn(_[b+1]);S.properties.dist=Kn(r,S,a);var V=Kn(k,S,a),N=Math.max(k.properties.dist,S.properties.dist),de=gs(k,S),xe=ys(r,N,de+90,a),He=ys(r,N,de-90,a),Qe=an(Pn([xe.geometry.coordinates,He.geometry.coordinates]),Pn([k.geometry.coordinates,S.geometry.coordinates])),ot=null;Qe.features.length>0&&(ot=Qe.features[0],ot.properties.dist=Kn(r,ot,a),ot.properties.location=d+Kn(k,ot,a)),k.properties.dist<u.properties.dist&&(u=k,u.properties.index=b,u.properties.location=d),S.properties.dist<u.properties.dist&&(u=S,u.properties.index=b+1,u.properties.location=d+V),ot&&ot.properties.dist<u.properties.dist&&(u=ot,u.properties.index=b),d+=V}}),u}var cr=vs;function bs(i,r){if(!i)throw new Error("line is required");if(!r)throw new Error("splitter is required");var a=mo(i),u=mo(r);if(a!=="LineString")throw new Error("line must be LineString");if(u==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(u==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var d=Ba(r,{precision:7});switch(u){case"Point":return ws(i,d);case"MultiPoint":return xs(i,d);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return xs(i,an(i,d))}}function xs(i,r){var a=[],u=(0,Sa.default)();return Ji(r,function(d){if(a.forEach(function(b,k){b.id=k}),!a.length)a=ws(i,d).features,a.forEach(function(b){b.bbox||(b.bbox=wu(Or(b)))}),u.load(bi(a));else{var g=u.search(d);if(g.features.length){var _=Aa(d,g);a=a.filter(function(b){return b.id!==_.id}),u.remove(_),gi(ws(_,d),function(b){a.push(b),u.insert(b)})}}}),bi(a)}function ws(i,r){var a=[],u=on(i)[0],d=on(i)[i.geometry.coordinates.length-1];if(hr(u,Vi(r))||hr(d,Vi(r)))return bi([i]);var g=(0,Sa.default)(),_=fs(i);g.load(_);var b=g.search(r);if(!b.features.length)return bi([i]);var k=Aa(r,b),S=[u],V=lr(_,function(N,de,xe){var He=on(de)[1],Qe=Vi(r);return xe===k.id?(N.push(Qe),a.push(Pn(N)),hr(Qe,He)?[Qe]:[Qe,He]):(N.push(He),N)},S);return V.length>1&&a.push(Pn(V)),bi(a)}function Aa(i,r){if(!r.features.length)throw new Error("lines must contain features");if(r.features.length===1)return r.features[0];var a,u=1/0;return gi(r,function(d){var g=cr(d,i),_=g.properties.dist;_<u&&(a=d,u=_)}),a}function hr(i,r){return i[0]===r[0]&&i[1]===r[1]}var Lu=bs;function Ir(i,r,a){if(a===void 0&&(a={}),!i)throw new Error("point is required");if(!r)throw new Error("polygon is required");var u=Vi(i),d=ds(r),g=d.type,_=r.bbox,b=d.coordinates;if(_&&Da(u,_)===!1)return!1;g==="Polygon"&&(b=[b]);for(var k=!1,S=0;S<b.length&&!k;S++)if(Ta(u,b[S][0],a.ignoreBoundary)){for(var V=!1,N=1;N<b[S].length&&!V;)Ta(u,b[S][N],!a.ignoreBoundary)&&(V=!0),N++;V||(k=!0)}return k}function Ta(i,r,a){var u=!1;r[0][0]===r[r.length-1][0]&&r[0][1]===r[r.length-1][1]&&(r=r.slice(0,r.length-1));for(var d=0,g=r.length-1;d<r.length;g=d++){var _=r[d][0],b=r[d][1],k=r[g][0],S=r[g][1],V=i[1]*(_-k)+b*(k-i[0])+S*(i[0]-_)===0&&(_-i[0])*(k-i[0])<=0&&(b-i[1])*(S-i[1])<=0;if(V)return!a;var N=b>i[1]!=S>i[1]&&i[0]<(k-_)*(i[1]-b)/(S-b)+_;N&&(u=!u)}return u}function Da(i,r){return r[0]<=i[0]&&r[1]<=i[1]&&r[2]>=i[0]&&r[3]>=i[1]}function Cu(i,r,a){a===void 0&&(a={});for(var u=Vi(i),d=on(r),g=0;g<d.length-1;g++){var _=!1;if(a.ignoreEndVertices&&(g===0&&(_="start"),g===d.length-2&&(_="end"),g===0&&g+1===d.length-1&&(_="both")),ln(d[g],d[g+1],u,_,typeof a.epsilon>"u"?null:a.epsilon))return!0}return!1}function ln(i,r,a,u,d){var g=a[0],_=a[1],b=i[0],k=i[1],S=r[0],V=r[1],N=a[0]-b,de=a[1]-k,xe=S-b,He=V-k,Qe=N*He-de*xe;if(d!==null){if(Math.abs(Qe)>d)return!1}else if(Qe!==0)return!1;if(u){if(u==="start")return Math.abs(xe)>=Math.abs(He)?xe>0?b<g&&g<=S:S<=g&&g<b:He>0?k<_&&_<=V:V<=_&&_<k;if(u==="end")return Math.abs(xe)>=Math.abs(He)?xe>0?b<=g&&g<S:S<g&&g<=b:He>0?k<=_&&_<V:V<_&&_<=k;if(u==="both")return Math.abs(xe)>=Math.abs(He)?xe>0?b<g&&g<S:S<g&&g<b:He>0?k<_&&_<V:V<_&&_<k}else return Math.abs(xe)>=Math.abs(He)?xe>0?b<=g&&g<=S:S<=g&&g<=b:He>0?k<=_&&_<=V:V<=_&&_<=k;return!1}var Bn=Cu;function ku(i,r){var a=ds(i),u=ds(r),d=a.type,g=u.type,_=a.coordinates,b=u.coordinates;switch(d){case"Point":switch(g){case"Point":return Cs(_,b);default:throw new Error("feature2 "+g+" geometry not supported")}case"MultiPoint":switch(g){case"Point":return Ls(a,u);case"MultiPoint":return Eu(a,u);default:throw new Error("feature2 "+g+" geometry not supported")}case"LineString":switch(g){case"Point":return Bn(u,a,{ignoreEndVertices:!0});case"LineString":return Fr(a,u);case"MultiPoint":return Ra(a,u);default:throw new Error("feature2 "+g+" geometry not supported")}case"Polygon":switch(g){case"Point":return Ir(u,a,{ignoreBoundary:!0});case"LineString":return Pu(a,u);case"Polygon":return dr(a,u);case"MultiPoint":return Mu(a,u);default:throw new Error("feature2 "+g+" geometry not supported")}default:throw new Error("feature1 "+d+" geometry not supported")}}function Ls(i,r){var a,u=!1;for(a=0;a<i.coordinates.length;a++)if(Cs(i.coordinates[a],r.coordinates)){u=!0;break}return u}function Eu(i,r){for(var a=0,u=r.coordinates;a<u.length;a++){for(var d=u[a],g=!1,_=0,b=i.coordinates;_<b.length;_++){var k=b[_];if(Cs(d,k)){g=!0;break}}if(!g)return!1}return!0}function Ra(i,r){for(var a=!1,u=0,d=r.coordinates;u<d.length;u++){var g=d[u];if(Bn(g,i,{ignoreEndVertices:!0})&&(a=!0),!Bn(g,i))return!1}return!!a}function Mu(i,r){for(var a=0,u=r.coordinates;a<u.length;a++){var d=u[a];if(!Ir(d,i,{ignoreBoundary:!0}))return!1}return!0}function Fr(i,r){for(var a=!1,u=0,d=r.coordinates;u<d.length;u++){var g=d[u];if(Bn({type:"Point",coordinates:g},i,{ignoreEndVertices:!0})&&(a=!0),!Bn({type:"Point",coordinates:g},i,{ignoreEndVertices:!1}))return!1}return a}function Pu(i,r){var a=!1,u=0,d=Or(i),g=Or(r);if(!yo(d,g))return!1;for(u;u<r.coordinates.length-1;u++){var _=Su(r.coordinates[u],r.coordinates[u+1]);if(Ir({type:"Point",coordinates:_},i,{ignoreBoundary:!0})){a=!0;break}}return a}function dr(i,r){if(i.type==="Feature"&&i.geometry===null||r.type==="Feature"&&r.geometry===null)return!1;var a=Or(i),u=Or(r);if(!yo(a,u))return!1;for(var d=ds(r).coordinates,g=0,_=d;g<_.length;g++)for(var b=_[g],k=0,S=b;k<S.length;k++){var V=S[k];if(!Ir(V,i))return!1}return!0}function yo(i,r){return!(i[0]>r[0]||i[2]<r[2]||i[1]>r[1]||i[3]<r[3])}function Cs(i,r){return i[0]===r[0]&&i[1]===r[1]}function Su(i,r){return[(i[0]+r[0])/2,(i[1]+r[1])/2]}var vn=v(kn()),vo=i=>()=>i,ks=i=>{let r=i?(a,u)=>u.minus(a).abs().isLessThanOrEqualTo(i):vo(!1);return(a,u)=>r(a,u)?0:a.comparedTo(u)};function Nr(i){let r=i?(a,u,d,g,_)=>a.exponentiatedBy(2).isLessThanOrEqualTo(g.minus(u).exponentiatedBy(2).plus(_.minus(d).exponentiatedBy(2)).times(i)):vo(!1);return(a,u,d)=>{let g=a.x,_=a.y,b=d.x,k=d.y,S=_.minus(k).times(u.x.minus(b)).minus(g.minus(b).times(u.y.minus(k)));return r(S,g,_,b,k)?0:S.comparedTo(0)}}var Bu=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,fr=Math.ceil,fi=Math.floor,_i="[BigNumber Error] ",bo=_i+"Number primitive has more than 15 significant digits: ",Xi=1e14,_t=14,xo=9007199254740991,Es=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],bn=1e7,wi=1e9;function Oa(i){var r,a,u,d=$.prototype={constructor:$,toString:null,valueOf:null},g=new $(1),_=20,b=4,k=-7,S=21,V=-1e7,N=1e7,de=!1,xe=1,He=0,Qe={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},ot="0123456789abcdefghijklmnopqrstuvwxyz",At=!0;function $(E,A){var R,T,O,I,Q,Y,ne,he,ce=this;if(!(ce instanceof $))return new $(E,A);if(A==null){if(E&&E._isBigNumber===!0){ce.s=E.s,!E.c||E.e>N?ce.c=ce.e=null:E.e<V?ce.c=[ce.e=0]:(ce.e=E.e,ce.c=E.c.slice());return}if((Y=typeof E=="number")&&E*0==0){if(ce.s=1/E<0?(E=-E,-1):1,E===~~E){for(I=0,Q=E;Q>=10;Q/=10,I++);I>N?ce.c=ce.e=null:(ce.e=I,ce.c=[E]);return}he=String(E)}else{if(!Bu.test(he=String(E)))return u(ce,he,Y);ce.s=he.charCodeAt(0)==45?(he=he.slice(1),-1):1}(I=he.indexOf("."))>-1&&(he=he.replace(".","")),(Q=he.search(/e/i))>0?(I<0&&(I=Q),I+=+he.slice(Q+1),he=he.substring(0,Q)):I<0&&(I=he.length)}else{if(t(A,2,ot.length,"Base"),A==10&&At)return ce=new $(E),oe(ce,_+ce.e+1,b);if(he=String(E),Y=typeof E=="number"){if(E*0!=0)return u(ce,he,Y,A);if(ce.s=1/E<0?(he=he.slice(1),-1):1,$.DEBUG&&he.replace(/^0\.0*|\./,"").length>15)throw Error(bo+E)}else ce.s=he.charCodeAt(0)===45?(he=he.slice(1),-1):1;for(R=ot.slice(0,A),I=Q=0,ne=he.length;Q<ne;Q++)if(R.indexOf(T=he.charAt(Q))<0){if(T=="."){if(Q>I){I=ne;continue}}else if(!O&&(he==he.toUpperCase()&&(he=he.toLowerCase())||he==he.toLowerCase()&&(he=he.toUpperCase()))){O=!0,Q=-1,I=0;continue}return u(ce,String(E),Y,A)}Y=!1,he=a(he,A,10,ce.s),(I=he.indexOf("."))>-1?he=he.replace(".",""):I=he.length}for(Q=0;he.charCodeAt(Q)===48;Q++);for(ne=he.length;he.charCodeAt(--ne)===48;);if(he=he.slice(Q,++ne)){if(ne-=Q,Y&&$.DEBUG&&ne>15&&(E>xo||E!==fi(E)))throw Error(bo+ce.s*E);if((I=I-Q-1)>N)ce.c=ce.e=null;else if(I<V)ce.c=[ce.e=0];else{if(ce.e=I,ce.c=[],Q=(I+1)%_t,I<0&&(Q+=_t),Q<ne){for(Q&&ce.c.push(+he.slice(0,Q)),ne-=_t;Q<ne;)ce.c.push(+he.slice(Q,Q+=_t));Q=_t-(he=he.slice(Q)).length}else Q-=ne;for(;Q--;he+="0");ce.c.push(+he)}}else ce.c=[ce.e=0]}$.clone=Oa,$.ROUND_UP=0,$.ROUND_DOWN=1,$.ROUND_CEIL=2,$.ROUND_FLOOR=3,$.ROUND_HALF_UP=4,$.ROUND_HALF_DOWN=5,$.ROUND_HALF_EVEN=6,$.ROUND_HALF_CEIL=7,$.ROUND_HALF_FLOOR=8,$.EUCLID=9,$.config=$.set=function(E){var A,R;if(E!=null)if(typeof E=="object"){if(E.hasOwnProperty(A="DECIMAL_PLACES")&&(R=E[A],t(R,0,wi,A),_=R),E.hasOwnProperty(A="ROUNDING_MODE")&&(R=E[A],t(R,0,8,A),b=R),E.hasOwnProperty(A="EXPONENTIAL_AT")&&(R=E[A],R&&R.pop?(t(R[0],-1e9,0,A),t(R[1],0,wi,A),k=R[0],S=R[1]):(t(R,-1e9,wi,A),k=-(S=R<0?-R:R))),E.hasOwnProperty(A="RANGE"))if(R=E[A],R&&R.pop)t(R[0],-1e9,-1,A),t(R[1],1,wi,A),V=R[0],N=R[1];else if(t(R,-1e9,wi,A),R)V=-(N=R<0?-R:R);else throw Error(_i+A+" cannot be zero: "+R);if(E.hasOwnProperty(A="CRYPTO"))if(R=E[A],R===!!R)if(R)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))de=R;else throw de=!R,Error(_i+"crypto unavailable");else de=R;else throw Error(_i+A+" not true or false: "+R);if(E.hasOwnProperty(A="MODULO_MODE")&&(R=E[A],t(R,0,9,A),xe=R),E.hasOwnProperty(A="POW_PRECISION")&&(R=E[A],t(R,0,wi,A),He=R),E.hasOwnProperty(A="FORMAT"))if(R=E[A],typeof R=="object")Qe=R;else throw Error(_i+A+" not an object: "+R);if(E.hasOwnProperty(A="ALPHABET"))if(R=E[A],typeof R=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(R))At=R.slice(0,10)=="0123456789",ot=R;else throw Error(_i+A+" invalid: "+R)}else throw Error(_i+"Object expected: "+E);return{DECIMAL_PLACES:_,ROUNDING_MODE:b,EXPONENTIAL_AT:[k,S],RANGE:[V,N],CRYPTO:de,MODULO_MODE:xe,POW_PRECISION:He,FORMAT:Qe,ALPHABET:ot}},$.isBigNumber=function(E){if(!E||E._isBigNumber!==!0)return!1;if(!$.DEBUG)return!0;var A,R,T=E.c,O=E.e,I=E.s;e:if({}.toString.call(T)=="[object Array]"){if((I===1||I===-1)&&O>=-1e9&&O<=wi&&O===fi(O)){if(T[0]===0){if(O===0&&T.length===1)return!0;break e}if(A=(O+1)%_t,A<1&&(A+=_t),String(T[0]).length==A){for(A=0;A<T.length;A++)if(R=T[A],R<0||R>=Xi||R!==fi(R))break e;if(R!==0)return!0}}}else if(T===null&&O===null&&(I===null||I===1||I===-1))return!0;throw Error(_i+"Invalid BigNumber: "+E)},$.maximum=$.max=function(){return se(arguments,-1)},$.minimum=$.min=function(){return se(arguments,1)},$.random=function(){var E=9007199254740992,A=Math.random()*E&2097151?function(){return fi(Math.random()*E)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(R){var T,O,I,Q,Y,ne=0,he=[],ce=new $(g);if(R==null?R=_:t(R,0,wi),Q=fr(R/_t),de)if(crypto.getRandomValues){for(T=crypto.getRandomValues(new Uint32Array(Q*=2));ne<Q;)Y=T[ne]*131072+(T[ne+1]>>>11),Y>=9e15?(O=crypto.getRandomValues(new Uint32Array(2)),T[ne]=O[0],T[ne+1]=O[1]):(he.push(Y%1e14),ne+=2);ne=Q/2}else if(crypto.randomBytes){for(T=crypto.randomBytes(Q*=7);ne<Q;)Y=(T[ne]&31)*281474976710656+T[ne+1]*1099511627776+T[ne+2]*4294967296+T[ne+3]*16777216+(T[ne+4]<<16)+(T[ne+5]<<8)+T[ne+6],Y>=9e15?crypto.randomBytes(7).copy(T,ne):(he.push(Y%1e14),ne+=7);ne=Q/7}else throw de=!1,Error(_i+"crypto unavailable");if(!de)for(;ne<Q;)Y=A(),Y<9e15&&(he[ne++]=Y%1e14);for(Q=he[--ne],R%=_t,Q&&R&&(Y=Es[_t-R],he[ne]=fi(Q/Y)*Y);he[ne]===0;he.pop(),ne--);if(ne<0)he=[I=0];else{for(I=-1;he[0]===0;he.splice(0,1),I-=_t);for(ne=1,Y=he[0];Y>=10;Y/=10,ne++);ne<_t&&(I-=_t-ne)}return ce.e=I,ce.c=he,ce}}(),$.sum=function(){for(var E=1,A=arguments,R=new $(A[0]);E<A.length;)R=R.plus(A[E++]);return R},a=function(){var E="0123456789";function A(R,T,O,I){for(var Q,Y=[0],ne,he=0,ce=R.length;he<ce;){for(ne=Y.length;ne--;Y[ne]*=T);for(Y[0]+=I.indexOf(R.charAt(he++)),Q=0;Q<Y.length;Q++)Y[Q]>O-1&&(Y[Q+1]==null&&(Y[Q+1]=0),Y[Q+1]+=Y[Q]/O|0,Y[Q]%=O)}return Y.reverse()}return function(R,T,O,I,Q){var Y,ne,he,ce,je,rt,lt,ht,Ft=R.indexOf("."),jt=_,Ot=b;for(Ft>=0&&(ce=He,He=0,R=R.replace(".",""),ht=new $(T),rt=ht.pow(R.length-Ft),He=ce,ht.c=A(m(Di(rt.c),rt.e,"0"),10,O,E),ht.e=ht.c.length),lt=A(R,T,O,Q?(Y=ot,E):(Y=E,ot)),he=ce=lt.length;lt[--ce]==0;lt.pop());if(!lt[0])return Y.charAt(0);if(Ft<0?--he:(rt.c=lt,rt.e=he,rt.s=I,rt=r(rt,ht,jt,Ot,O),lt=rt.c,je=rt.r,he=rt.e),ne=he+jt+1,Ft=lt[ne],ce=O/2,je=je||ne<0||lt[ne+1]!=null,je=Ot<4?(Ft!=null||je)&&(Ot==0||Ot==(rt.s<0?3:2)):Ft>ce||Ft==ce&&(Ot==4||je||Ot==6&&lt[ne-1]&1||Ot==(rt.s<0?8:7)),ne<1||!lt[0])R=je?m(Y.charAt(1),-jt,Y.charAt(0)):Y.charAt(0);else{if(lt.length=ne,je)for(--O;++lt[--ne]>O;)lt[ne]=0,ne||(++he,lt=[1].concat(lt));for(ce=lt.length;!lt[--ce];);for(Ft=0,R="";Ft<=ce;R+=Y.charAt(lt[Ft++]));R=m(R,he,Y.charAt(0))}return R}}(),r=function(){function E(T,O,I){var Q,Y,ne,he,ce=0,je=T.length,rt=O%bn,lt=O/bn|0;for(T=T.slice();je--;)ne=T[je]%bn,he=T[je]/bn|0,Q=lt*ne+he*rt,Y=rt*ne+Q%bn*bn+ce,ce=(Y/I|0)+(Q/bn|0)+lt*he,T[je]=Y%I;return ce&&(T=[ce].concat(T)),T}function A(T,O,I,Q){var Y,ne;if(I!=Q)ne=I>Q?1:-1;else for(Y=ne=0;Y<I;Y++)if(T[Y]!=O[Y]){ne=T[Y]>O[Y]?1:-1;break}return ne}function R(T,O,I,Q){for(var Y=0;I--;)T[I]-=Y,Y=T[I]<O[I]?1:0,T[I]=Y*Q+T[I]-O[I];for(;!T[0]&&T.length>1;T.splice(0,1));}return function(T,O,I,Q,Y){var ne,he,ce,je,rt,lt,ht,Ft,jt,Ot,Gt,Ci,ja,Iu,Fu,An,ko,hn=T.s==O.s?1:-1,Ri=T.c,ei=O.c;if(!Ri||!Ri[0]||!ei||!ei[0])return new $(!T.s||!O.s||(Ri?ei&&Ri[0]==ei[0]:!ei)?NaN:Ri&&Ri[0]==0||!ei?hn*0:hn/0);for(Ft=new $(hn),jt=Ft.c=[],he=T.e-O.e,hn=I+he+1,Y||(Y=Xi,he=Ti(T.e/_t)-Ti(O.e/_t),hn=hn/_t|0),ce=0;ei[ce]==(Ri[ce]||0);ce++);if(ei[ce]>(Ri[ce]||0)&&he--,hn<0)jt.push(1),je=!0;else{for(Iu=Ri.length,An=ei.length,ce=0,hn+=2,rt=fi(Y/(ei[0]+1)),rt>1&&(ei=E(ei,rt,Y),Ri=E(Ri,rt,Y),An=ei.length,Iu=Ri.length),ja=An,Ot=Ri.slice(0,An),Gt=Ot.length;Gt<An;Ot[Gt++]=0);ko=ei.slice(),ko=[0].concat(ko),Fu=ei[0],ei[1]>=Y/2&&Fu++;do{if(rt=0,ne=A(ei,Ot,An,Gt),ne<0){if(Ci=Ot[0],An!=Gt&&(Ci=Ci*Y+(Ot[1]||0)),rt=fi(Ci/Fu),rt>1)for(rt>=Y&&(rt=Y-1),lt=E(ei,rt,Y),ht=lt.length,Gt=Ot.length;A(lt,Ot,ht,Gt)==1;)rt--,R(lt,An<ht?ko:ei,ht,Y),ht=lt.length,ne=1;else rt==0&&(ne=rt=1),lt=ei.slice(),ht=lt.length;if(ht<Gt&&(lt=[0].concat(lt)),R(Ot,lt,Gt,Y),Gt=Ot.length,ne==-1)for(;A(ei,Ot,An,Gt)<1;)rt++,R(Ot,An<Gt?ko:ei,Gt,Y),Gt=Ot.length}else ne===0&&(rt++,Ot=[0]);jt[ce++]=rt,Ot[0]?Ot[Gt++]=Ri[ja]||0:(Ot=[Ri[ja]],Gt=1)}while((ja++<Iu||Ot[0]!=null)&&hn--);je=Ot[0]!=null,jt[0]||jt.splice(0,1)}if(Y==Xi){for(ce=1,hn=jt[0];hn>=10;hn/=10,ce++);oe(Ft,I+(Ft.e=ce+he*_t-1)+1,Q,je)}else Ft.e=he,Ft.r=+je;return Ft}}();function J(E,A,R,T){var O,I,Q,Y,ne;if(R==null?R=b:t(R,0,8),!E.c)return E.toString();if(O=E.c[0],Q=E.e,A==null)ne=Di(E.c),ne=T==1||T==2&&(Q<=k||Q>=S)?c(ne,Q):m(ne,Q,"0");else if(E=oe(new $(E),A,R),I=E.e,ne=Di(E.c),Y=ne.length,T==1||T==2&&(A<=I||I<=k)){for(;Y<A;ne+="0",Y++);ne=c(ne,I)}else if(A-=Q,ne=m(ne,I,"0"),I+1>Y){if(--A>0)for(ne+=".";A--;ne+="0");}else if(A+=I-Y,A>0)for(I+1==Y&&(ne+=".");A--;ne+="0");return E.s<0&&O?"-"+ne:ne}function se(E,A){for(var R,T,O=1,I=new $(E[0]);O<E.length;O++)T=new $(E[O]),(!T.s||(R=Wn(I,T))===A||R===0&&I.s===A)&&(I=T);return I}function we(E,A,R){for(var T=1,O=A.length;!A[--O];A.pop());for(O=A[0];O>=10;O/=10,T++);return(R=T+R*_t-1)>N?E.c=E.e=null:R<V?E.c=[E.e=0]:(E.e=R,E.c=A),E}u=function(){var E=/^(-?)0([xbo])(?=\w[\w.]*$)/i,A=/^([^.]+)\.$/,R=/^\.([^.]+)$/,T=/^-?(Infinity|NaN)$/,O=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(I,Q,Y,ne){var he,ce=Y?Q:Q.replace(O,"");if(T.test(ce))I.s=isNaN(ce)?null:ce<0?-1:1;else{if(!Y&&(ce=ce.replace(E,function(je,rt,lt){return he=(lt=lt.toLowerCase())=="x"?16:lt=="b"?2:8,!ne||ne==he?rt:je}),ne&&(he=ne,ce=ce.replace(A,"$1").replace(R,"0.$1")),Q!=ce))return new $(ce,he);if($.DEBUG)throw Error(_i+"Not a"+(ne?" base "+ne:"")+" number: "+Q);I.s=null}I.c=I.e=null}}();function oe(E,A,R,T){var O,I,Q,Y,ne,he,ce,je=E.c,rt=Es;if(je){e:{for(O=1,Y=je[0];Y>=10;Y/=10,O++);if(I=A-O,I<0)I+=_t,Q=A,ne=je[he=0],ce=fi(ne/rt[O-Q-1]%10);else if(he=fr((I+1)/_t),he>=je.length)if(T){for(;je.length<=he;je.push(0));ne=ce=0,O=1,I%=_t,Q=I-_t+1}else break e;else{for(ne=Y=je[he],O=1;Y>=10;Y/=10,O++);I%=_t,Q=I-_t+O,ce=Q<0?0:fi(ne/rt[O-Q-1]%10)}if(T=T||A<0||je[he+1]!=null||(Q<0?ne:ne%rt[O-Q-1]),T=R<4?(ce||T)&&(R==0||R==(E.s<0?3:2)):ce>5||ce==5&&(R==4||T||R==6&&(I>0?Q>0?ne/rt[O-Q]:0:je[he-1])%10&1||R==(E.s<0?8:7)),A<1||!je[0])return je.length=0,T?(A-=E.e+1,je[0]=rt[(_t-A%_t)%_t],E.e=-A||0):je[0]=E.e=0,E;if(I==0?(je.length=he,Y=1,he--):(je.length=he+1,Y=rt[_t-I],je[he]=Q>0?fi(ne/rt[O-Q]%rt[Q])*Y:0),T)for(;;)if(he==0){for(I=1,Q=je[0];Q>=10;Q/=10,I++);for(Q=je[0]+=Y,Y=1;Q>=10;Q/=10,Y++);I!=Y&&(E.e++,je[0]==Xi&&(je[0]=1));break}else{if(je[he]+=Y,je[he]!=Xi)break;je[he--]=0,Y=1}for(I=je.length;je[--I]===0;je.pop());}E.e>N?E.c=E.e=null:E.e<V&&(E.c=[E.e=0])}return E}function ye(E){var A,R=E.e;return R===null?E.toString():(A=Di(E.c),A=R<=k||R>=S?c(A,R):m(A,R,"0"),E.s<0?"-"+A:A)}return d.absoluteValue=d.abs=function(){var E=new $(this);return E.s<0&&(E.s=1),E},d.comparedTo=function(E,A){return Wn(this,new $(E,A))},d.decimalPlaces=d.dp=function(E,A){var R,T,O,I=this;if(E!=null)return t(E,0,wi),A==null?A=b:t(A,0,8),oe(new $(I),E+I.e+1,A);if(!(R=I.c))return null;if(T=((O=R.length-1)-Ti(this.e/_t))*_t,O=R[O])for(;O%10==0;O/=10,T--);return T<0&&(T=0),T},d.dividedBy=d.div=function(E,A){return r(this,new $(E,A),_,b)},d.dividedToIntegerBy=d.idiv=function(E,A){return r(this,new $(E,A),0,1)},d.exponentiatedBy=d.pow=function(E,A){var R,T,O,I,Q,Y,ne,he,ce,je=this;if(E=new $(E),E.c&&!E.isInteger())throw Error(_i+"Exponent not an integer: "+ye(E));if(A!=null&&(A=new $(A)),Y=E.e>14,!je.c||!je.c[0]||je.c[0]==1&&!je.e&&je.c.length==1||!E.c||!E.c[0])return ce=new $(Math.pow(+ye(je),Y?E.s*(2-o(E)):+ye(E))),A?ce.mod(A):ce;if(ne=E.s<0,A){if(A.c?!A.c[0]:!A.s)return new $(NaN);T=!ne&&je.isInteger()&&A.isInteger(),T&&(je=je.mod(A))}else{if(E.e>9&&(je.e>0||je.e<-1||(je.e==0?je.c[0]>1||Y&&je.c[1]>=24e7:je.c[0]<8e13||Y&&je.c[0]<=9999975e7)))return I=je.s<0&&o(E)?-0:0,je.e>-1&&(I=1/I),new $(ne?1/I:I);He&&(I=fr(He/_t+2))}for(Y?(R=new $(.5),ne&&(E.s=1),he=o(E)):(O=Math.abs(+ye(E)),he=O%2),ce=new $(g);;){if(he){if(ce=ce.times(je),!ce.c)break;I?ce.c.length>I&&(ce.c.length=I):T&&(ce=ce.mod(A))}if(O){if(O=fi(O/2),O===0)break;he=O%2}else if(E=E.times(R),oe(E,E.e+1,1),E.e>14)he=o(E);else{if(O=+ye(E),O===0)break;he=O%2}je=je.times(je),I?je.c&&je.c.length>I&&(je.c.length=I):T&&(je=je.mod(A))}return T?ce:(ne&&(ce=g.div(ce)),A?ce.mod(A):I?oe(ce,He,b,Q):ce)},d.integerValue=function(E){var A=new $(this);return E==null?E=b:t(E,0,8),oe(A,A.e+1,E)},d.isEqualTo=d.eq=function(E,A){return Wn(this,new $(E,A))===0},d.isFinite=function(){return!!this.c},d.isGreaterThan=d.gt=function(E,A){return Wn(this,new $(E,A))>0},d.isGreaterThanOrEqualTo=d.gte=function(E,A){return(A=Wn(this,new $(E,A)))===1||A===0},d.isInteger=function(){return!!this.c&&Ti(this.e/_t)>this.c.length-2},d.isLessThan=d.lt=function(E,A){return Wn(this,new $(E,A))<0},d.isLessThanOrEqualTo=d.lte=function(E,A){return(A=Wn(this,new $(E,A)))===-1||A===0},d.isNaN=function(){return!this.s},d.isNegative=function(){return this.s<0},d.isPositive=function(){return this.s>0},d.isZero=function(){return!!this.c&&this.c[0]==0},d.minus=function(E,A){var R,T,O,I,Q=this,Y=Q.s;if(E=new $(E,A),A=E.s,!Y||!A)return new $(NaN);if(Y!=A)return E.s=-A,Q.plus(E);var ne=Q.e/_t,he=E.e/_t,ce=Q.c,je=E.c;if(!ne||!he){if(!ce||!je)return ce?(E.s=-A,E):new $(je?Q:NaN);if(!ce[0]||!je[0])return je[0]?(E.s=-A,E):new $(ce[0]?Q:b==3?-0:0)}if(ne=Ti(ne),he=Ti(he),ce=ce.slice(),Y=ne-he){for((I=Y<0)?(Y=-Y,O=ce):(he=ne,O=je),O.reverse(),A=Y;A--;O.push(0));O.reverse()}else for(T=(I=(Y=ce.length)<(A=je.length))?Y:A,Y=A=0;A<T;A++)if(ce[A]!=je[A]){I=ce[A]<je[A];break}if(I&&(O=ce,ce=je,je=O,E.s=-E.s),A=(T=je.length)-(R=ce.length),A>0)for(;A--;ce[R++]=0);for(A=Xi-1;T>Y;){if(ce[--T]<je[T]){for(R=T;R&&!ce[--R];ce[R]=A);--ce[R],ce[T]+=Xi}ce[T]-=je[T]}for(;ce[0]==0;ce.splice(0,1),--he);return ce[0]?we(E,ce,he):(E.s=b==3?-1:1,E.c=[E.e=0],E)},d.modulo=d.mod=function(E,A){var R,T,O=this;return E=new $(E,A),!O.c||!E.s||E.c&&!E.c[0]?new $(NaN):!E.c||O.c&&!O.c[0]?new $(O):(xe==9?(T=E.s,E.s=1,R=r(O,E,0,3),E.s=T,R.s*=T):R=r(O,E,0,xe),E=O.minus(R.times(E)),!E.c[0]&&xe==1&&(E.s=O.s),E)},d.multipliedBy=d.times=function(E,A){var R,T,O,I,Q,Y,ne,he,ce,je,rt,lt,ht,Ft,jt,Ot=this,Gt=Ot.c,Ci=(E=new $(E,A)).c;if(!Gt||!Ci||!Gt[0]||!Ci[0])return!Ot.s||!E.s||Gt&&!Gt[0]&&!Ci||Ci&&!Ci[0]&&!Gt?E.c=E.e=E.s=null:(E.s*=Ot.s,!Gt||!Ci?E.c=E.e=null:(E.c=[0],E.e=0)),E;for(T=Ti(Ot.e/_t)+Ti(E.e/_t),E.s*=Ot.s,ne=Gt.length,je=Ci.length,ne<je&&(ht=Gt,Gt=Ci,Ci=ht,O=ne,ne=je,je=O),O=ne+je,ht=[];O--;ht.push(0));for(Ft=Xi,jt=bn,O=je;--O>=0;){for(R=0,rt=Ci[O]%jt,lt=Ci[O]/jt|0,Q=ne,I=O+Q;I>O;)he=Gt[--Q]%jt,ce=Gt[Q]/jt|0,Y=lt*he+ce*rt,he=rt*he+Y%jt*jt+ht[I]+R,R=(he/Ft|0)+(Y/jt|0)+lt*ce,ht[I--]=he%Ft;ht[I]=R}return R?++T:ht.splice(0,1),we(E,ht,T)},d.negated=function(){var E=new $(this);return E.s=-E.s||null,E},d.plus=function(E,A){var R,T=this,O=T.s;if(E=new $(E,A),A=E.s,!O||!A)return new $(NaN);if(O!=A)return E.s=-A,T.minus(E);var I=T.e/_t,Q=E.e/_t,Y=T.c,ne=E.c;if(!I||!Q){if(!Y||!ne)return new $(O/0);if(!Y[0]||!ne[0])return ne[0]?E:new $(Y[0]?T:O*0)}if(I=Ti(I),Q=Ti(Q),Y=Y.slice(),O=I-Q){for(O>0?(Q=I,R=ne):(O=-O,R=Y),R.reverse();O--;R.push(0));R.reverse()}for(O=Y.length,A=ne.length,O-A<0&&(R=ne,ne=Y,Y=R,A=O),O=0;A;)O=(Y[--A]=Y[A]+ne[A]+O)/Xi|0,Y[A]=Xi===Y[A]?0:Y[A]%Xi;return O&&(Y=[O].concat(Y),++Q),we(E,Y,Q)},d.precision=d.sd=function(E,A){var R,T,O,I=this;if(E!=null&&E!==!!E)return t(E,1,wi),A==null?A=b:t(A,0,8),oe(new $(I),E,A);if(!(R=I.c))return null;if(O=R.length-1,T=O*_t+1,O=R[O]){for(;O%10==0;O/=10,T--);for(O=R[0];O>=10;O/=10,T++);}return E&&I.e+1>T&&(T=I.e+1),T},d.shiftedBy=function(E){return t(E,-9007199254740991,xo),this.times("1e"+E)},d.squareRoot=d.sqrt=function(){var E,A,R,T,O,I=this,Q=I.c,Y=I.s,ne=I.e,he=_+4,ce=new $("0.5");if(Y!==1||!Q||!Q[0])return new $(!Y||Y<0&&(!Q||Q[0])?NaN:Q?I:1/0);if(Y=Math.sqrt(+ye(I)),Y==0||Y==1/0?(A=Di(Q),(A.length+ne)%2==0&&(A+="0"),Y=Math.sqrt(+A),ne=Ti((ne+1)/2)-(ne<0||ne%2),Y==1/0?A="5e"+ne:(A=Y.toExponential(),A=A.slice(0,A.indexOf("e")+1)+ne),R=new $(A)):R=new $(Y+""),R.c[0]){for(ne=R.e,Y=ne+he,Y<3&&(Y=0);;)if(O=R,R=ce.times(O.plus(r(I,O,he,1))),Di(O.c).slice(0,Y)===(A=Di(R.c)).slice(0,Y))if(R.e<ne&&--Y,A=A.slice(Y-3,Y+1),A=="9999"||!T&&A=="4999"){if(!T&&(oe(O,O.e+_+2,0),O.times(O).eq(I))){R=O;break}he+=4,Y+=4,T=1}else{(!+A||!+A.slice(1)&&A.charAt(0)=="5")&&(oe(R,R.e+_+2,1),E=!R.times(R).eq(I));break}}return oe(R,R.e+_+1,b,E)},d.toExponential=function(E,A){return E!=null&&(t(E,0,wi),E++),J(this,E,A,1)},d.toFixed=function(E,A){return E!=null&&(t(E,0,wi),E=E+this.e+1),J(this,E,A)},d.toFormat=function(E,A,R){var T,O=this;if(R==null)E!=null&&A&&typeof A=="object"?(R=A,A=null):E&&typeof E=="object"?(R=E,E=A=null):R=Qe;else if(typeof R!="object")throw Error(_i+"Argument not an object: "+R);if(T=O.toFixed(E,A),O.c){var I,Q=T.split("."),Y=+R.groupSize,ne=+R.secondaryGroupSize,he=R.groupSeparator||"",ce=Q[0],je=Q[1],rt=O.s<0,lt=rt?ce.slice(1):ce,ht=lt.length;if(ne&&(I=Y,Y=ne,ne=I,ht-=I),Y>0&&ht>0){for(I=ht%Y||Y,ce=lt.substr(0,I);I<ht;I+=Y)ce+=he+lt.substr(I,Y);ne>0&&(ce+=he+lt.slice(I)),rt&&(ce="-"+ce)}T=je?ce+(R.decimalSeparator||"")+((ne=+R.fractionGroupSize)?je.replace(new RegExp("\\d{"+ne+"}\\B","g"),"$&"+(R.fractionGroupSeparator||"")):je):ce}return(R.prefix||"")+T+(R.suffix||"")},d.toFraction=function(E){var A,R,T,O,I,Q,Y,ne,he,ce,je,rt,lt=this,ht=lt.c;if(E!=null&&(Y=new $(E),!Y.isInteger()&&(Y.c||Y.s!==1)||Y.lt(g)))throw Error(_i+"Argument "+(Y.isInteger()?"out of range: ":"not an integer: ")+ye(Y));if(!ht)return new $(lt);for(A=new $(g),he=R=new $(g),T=ne=new $(g),rt=Di(ht),I=A.e=rt.length-lt.e-1,A.c[0]=Es[(Q=I%_t)<0?_t+Q:Q],E=!E||Y.comparedTo(A)>0?I>0?A:he:Y,Q=N,N=1/0,Y=new $(rt),ne.c[0]=0;ce=r(Y,A,0,1),O=R.plus(ce.times(T)),O.comparedTo(E)!=1;)R=T,T=O,he=ne.plus(ce.times(O=he)),ne=O,A=Y.minus(ce.times(O=A)),Y=O;return O=r(E.minus(R),T,0,1),ne=ne.plus(O.times(he)),R=R.plus(O.times(T)),ne.s=he.s=lt.s,I=I*2,je=r(he,T,I,b).minus(lt).abs().comparedTo(r(ne,R,I,b).minus(lt).abs())<1?[he,T]:[ne,R],N=Q,je},d.toNumber=function(){return+ye(this)},d.toPrecision=function(E,A){return E!=null&&t(E,1,wi),J(this,E,A,2)},d.toString=function(E){var A,R=this,T=R.s,O=R.e;return O===null?T?(A="Infinity",T<0&&(A="-"+A)):A="NaN":(E==null?A=O<=k||O>=S?c(Di(R.c),O):m(Di(R.c),O,"0"):E===10&&At?(R=oe(new $(R),_+O+1,b),A=m(Di(R.c),R.e,"0")):(t(E,2,ot.length,"Base"),A=a(m(Di(R.c),O,"0"),10,E,T,!0)),T<0&&R.c[0]&&(A="-"+A)),A},d.valueOf=d.toJSON=function(){return ye(this)},d._isBigNumber=!0,d[Symbol.toStringTag]="BigNumber",d[Symbol.for("nodejs.util.inspect.custom")]=d.valueOf,i!=null&&$.set(i),$}function Ti(i){var r=i|0;return i>0||i===r?r:r-1}function Di(i){for(var r,a,u=1,d=i.length,g=i[0]+"";u<d;){for(r=i[u++]+"",a=_t-r.length;a--;r="0"+r);g+=r}for(d=g.length;g.charCodeAt(--d)===48;);return g.slice(0,d+1||1)}function Wn(i,r){var a,u,d=i.c,g=r.c,_=i.s,b=r.s,k=i.e,S=r.e;if(!_||!b)return null;if(a=d&&!d[0],u=g&&!g[0],a||u)return a?u?0:-b:_;if(_!=b)return _;if(a=_<0,u=k==S,!d||!g)return u?0:!d^a?1:-1;if(!u)return k>S^a?1:-1;for(b=(k=d.length)<(S=g.length)?k:S,_=0;_<b;_++)if(d[_]!=g[_])return d[_]>g[_]^a?1:-1;return k==S?0:k>S^a?1:-1}function t(i,r,a,u){if(i<r||i>a||i!==fi(i))throw Error(_i+(u||"Argument")+(typeof i=="number"?i<r||i>a?" out of range: ":" not an integer: ":" not a primitive number: ")+String(i))}function o(i){var r=i.c.length-1;return Ti(i.e/_t)==r&&i.c[r]%2!=0}function c(i,r){return(i.length>1?i.charAt(0)+"."+i.slice(1):i)+(r<0?"e":"e+")+r}function m(i,r,a){var u,d;if(r<0){for(d=a+".";++r;d+=a);i=d+i}else if(u=i.length,++r>u){for(d=a,r-=u;--r;d+=a);i+=d}else r<u&&(i=i.slice(0,r)+"."+i.slice(r));return i}var x=Oa(),B=x,K=class{constructor(i){ut(this,"key");ut(this,"left",null);ut(this,"right",null);this.key=i}},ue=class extends K{constructor(i){super(i)}},Me=class{constructor(){ut(this,"size",0);ut(this,"modificationCount",0);ut(this,"splayCount",0)}splay(i){let r=this.root;if(r==null)return this.compare(i,i),-1;let a=null,u=null,d=null,g=null,_=r,b=this.compare,k;for(;;)if(k=b(_.key,i),k>0){let S=_.left;if(S==null||(k=b(S.key,i),k>0&&(_.left=S.right,S.right=_,_=S,S=_.left,S==null)))break;a==null?u=_:a.left=_,a=_,_=S}else if(k<0){let S=_.right;if(S==null||(k=b(S.key,i),k<0&&(_.right=S.left,S.left=_,_=S,S=_.right,S==null)))break;d==null?g=_:d.right=_,d=_,_=S}else break;return d!=null&&(d.right=_.left,_.left=g),a!=null&&(a.left=_.right,_.right=u),this.root!==_&&(this.root=_,this.splayCount++),k}splayMin(i){let r=i,a=r.left;for(;a!=null;){let u=a;r.left=u.right,u.right=r,r=u,a=r.left}return r}splayMax(i){let r=i,a=r.right;for(;a!=null;){let u=a;r.right=u.left,u.left=r,r=u,a=r.right}return r}_delete(i){if(this.root==null||this.splay(i)!=0)return null;let r=this.root,a=r,u=r.left;if(this.size--,u==null)this.root=r.right;else{let d=r.right;r=this.splayMax(u),r.right=d,this.root=r}return this.modificationCount++,a}addNewRoot(i,r){this.size++,this.modificationCount++;let a=this.root;if(a==null){this.root=i;return}r<0?(i.left=a,i.right=a.right,a.right=null):(i.right=a,i.left=a.left,a.left=null),this.root=i}_first(){let i=this.root;return i==null?null:(this.root=this.splayMin(i),this.root)}_last(){let i=this.root;return i==null?null:(this.root=this.splayMax(i),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(i){return this.validKey(i)&&this.splay(i)==0}defaultCompare(){return(i,r)=>i<r?-1:i>r?1:0}wrap(){return{getRoot:()=>this.root,setRoot:i=>{this.root=i},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:i=>{this.splayCount=i},splay:i=>this.splay(i),has:i=>this.has(i)}}},Ge=class Do extends Me{constructor(a,u){super();ut(this,"root",null);ut(this,"compare");ut(this,"validKey");ut(this,ah,"[object Set]");this.compare=a??this.defaultCompare(),this.validKey=u??(d=>d!=null&&d!=null)}delete(a){return this.validKey(a)?this._delete(a)!=null:!1}deleteAll(a){for(let u of a)this.delete(u)}forEach(a){let u=this[Symbol.iterator](),d;for(;d=u.next(),!d.done;)a(d.value,d.value,this)}add(a){let u=this.splay(a);return u!=0&&this.addNewRoot(new ue(a),u),this}addAndReturn(a){let u=this.splay(a);return u!=0&&this.addNewRoot(new ue(a),u),this.root.key}addAll(a){for(let u of a)this.add(u)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(a){if(a==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(a)<0)return this.root.key;let u=this.root.left;if(u==null)return null;let d=u.right;for(;d!=null;)u=d,d=u.right;return u.key}firstAfter(a){if(a==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(a)>0)return this.root.key;let u=this.root.right;if(u==null)return null;let d=u.left;for(;d!=null;)u=d,d=u.left;return u.key}retainAll(a){let u=new Do(this.compare,this.validKey),d=this.modificationCount;for(let g of a){if(d!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(g)&&this.splay(g)==0&&u.add(this.root.key)}u.size!=this.size&&(this.root=u.root,this.size=u.size,this.modificationCount++)}lookup(a){return!this.validKey(a)||this.splay(a)!=0?null:this.root.key}intersection(a){let u=new Do(this.compare,this.validKey);for(let d of this)a.has(d)&&u.add(d);return u}difference(a){let u=new Do(this.compare,this.validKey);for(let d of this)a.has(d)||u.add(d);return u}union(a){let u=this.clone();return u.addAll(a),u}clone(){let a=new Do(this.compare,this.validKey);return a.size=this.size,a.root=this.copyNode(this.root),a}copyNode(a){if(a==null)return null;function u(g,_){let b,k;do{if(b=g.left,k=g.right,b!=null){let S=new ue(b.key);_.left=S,u(b,S)}if(k!=null){let S=new ue(k.key);_.right=S,g=k,_=S}}while(k!=null)}let d=new ue(a.key);return u(a,d),d}toSet(){return this.clone()}entries(){return new Et(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(lh=Symbol.iterator,ah=Symbol.toStringTag,lh)](){return new pt(this.wrap())}},it=class{constructor(i){ut(this,"tree");ut(this,"path",new Array);ut(this,"modificationCount",null);ut(this,"splayCount");this.tree=i,this.splayCount=i.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let i=this.path[this.path.length-1];return this.getValue(i)}rebuildPath(i){this.path.splice(0,this.path.length),this.tree.splay(i),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(i){for(;i!=null;)this.path.push(i),i=i.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let a=this.tree.getRoot();for(;a!=null;)this.path.push(a),a=a.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let i=this.path[this.path.length-1],r=i.right;if(r!=null){for(;r!=null;)this.path.push(r),r=r.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===i;)i=this.path.pop();return this.path.length>0}},pt=class extends it{getValue(i){return i.key}},Et=class extends it{getValue(i){return[i.key,i.key]}},yi=i=>i,ai=i=>{if(i){let r=new Ge(ks(i)),a=new Ge(ks(i)),u=(g,_)=>_.addAndReturn(g),d=g=>({x:u(g.x,r),y:u(g.y,a)});return d({x:new B(0),y:new B(0)}),d}return yi},Li=i=>({set:r=>{Kt=Li(r)},reset:()=>Li(i),compare:ks(i),snap:ai(i),orient:Nr(i)}),Kt=Li(),un=(i,r)=>i.ll.x.isLessThanOrEqualTo(r.x)&&r.x.isLessThanOrEqualTo(i.ur.x)&&i.ll.y.isLessThanOrEqualTo(r.y)&&r.y.isLessThanOrEqualTo(i.ur.y),wo=(i,r)=>{if(r.ur.x.isLessThan(i.ll.x)||i.ur.x.isLessThan(r.ll.x)||r.ur.y.isLessThan(i.ll.y)||i.ur.y.isLessThan(r.ll.y))return null;let a=i.ll.x.isLessThan(r.ll.x)?r.ll.x:i.ll.x,u=i.ur.x.isLessThan(r.ur.x)?i.ur.x:r.ur.x,d=i.ll.y.isLessThan(r.ll.y)?r.ll.y:i.ll.y,g=i.ur.y.isLessThan(r.ur.y)?i.ur.y:r.ur.y;return{ll:{x:a,y:d},ur:{x:u,y:g}}},Ms=(i,r)=>i.x.times(r.y).minus(i.y.times(r.x)),Ia=(i,r)=>i.x.times(r.x).plus(i.y.times(r.y)),zr=i=>Ia(i,i).sqrt(),Au=(i,r,a)=>{let u={x:r.x.minus(i.x),y:r.y.minus(i.y)},d={x:a.x.minus(i.x),y:a.y.minus(i.y)};return Ms(d,u).div(zr(d)).div(zr(u))},Fa=(i,r,a)=>{let u={x:r.x.minus(i.x),y:r.y.minus(i.y)},d={x:a.x.minus(i.x),y:a.y.minus(i.y)};return Ia(d,u).div(zr(d)).div(zr(u))},Jt=(i,r,a)=>r.y.isZero()?null:{x:i.x.plus(r.x.div(r.y).times(a.minus(i.y))),y:a},$r=(i,r,a)=>r.x.isZero()?null:{x:a,y:i.y.plus(r.y.div(r.x).times(a.minus(i.x)))},Tu=(i,r,a,u)=>{if(r.x.isZero())return $r(a,u,i.x);if(u.x.isZero())return $r(i,r,a.x);if(r.y.isZero())return Jt(a,u,i.y);if(u.y.isZero())return Jt(i,r,a.y);let d=Ms(r,u);if(d.isZero())return null;let g={x:a.x.minus(i.x),y:a.y.minus(i.y)},_=Ms(g,r).div(d),b=Ms(g,u).div(d),k=i.x.plus(b.times(r.x)),S=a.x.plus(_.times(u.x)),V=i.y.plus(b.times(r.y)),N=a.y.plus(_.times(u.y)),de=k.plus(S).div(2),xe=V.plus(N).div(2);return{x:de,y:xe}},cn=class jp{constructor(r,a){ut(this,"point");ut(this,"isLeft");ut(this,"segment");ut(this,"otherSE");ut(this,"consumedBy");r.events===void 0?r.events=[this]:r.events.push(this),this.point=r,this.isLeft=a}static compare(r,a){let u=jp.comparePoints(r.point,a.point);return u!==0?u:(r.point!==a.point&&r.link(a),r.isLeft!==a.isLeft?r.isLeft?1:-1:pr.compare(r.segment,a.segment))}static comparePoints(r,a){return r.x.isLessThan(a.x)?-1:r.x.isGreaterThan(a.x)?1:r.y.isLessThan(a.y)?-1:r.y.isGreaterThan(a.y)?1:0}link(r){if(r.point===this.point)throw new Error("Tried to link already linked events");let a=r.point.events;for(let u=0,d=a.length;u<d;u++){let g=a[u];this.point.events.push(g),g.point=this.point}this.checkForConsuming()}checkForConsuming(){let r=this.point.events.length;for(let a=0;a<r;a++){let u=this.point.events[a];if(u.segment.consumedBy===void 0)for(let d=a+1;d<r;d++){let g=this.point.events[d];g.consumedBy===void 0&&u.otherSE.point.events===g.otherSE.point.events&&u.segment.consume(g.segment)}}}getAvailableLinkedEvents(){let r=[];for(let a=0,u=this.point.events.length;a<u;a++){let d=this.point.events[a];d!==this&&!d.segment.ringOut&&d.segment.isInResult()&&r.push(d)}return r}getLeftmostComparator(r){let a=new Map,u=d=>{let g=d.otherSE;a.set(d,{sine:Au(this.point,r.point,g.point),cosine:Fa(this.point,r.point,g.point)})};return(d,g)=>{a.has(d)||u(d),a.has(g)||u(g);let{sine:_,cosine:b}=a.get(d),{sine:k,cosine:S}=a.get(g);return _.isGreaterThanOrEqualTo(0)&&k.isGreaterThanOrEqualTo(0)?b.isLessThan(S)?1:b.isGreaterThan(S)?-1:0:_.isLessThan(0)&&k.isLessThan(0)?b.isLessThan(S)?-1:b.isGreaterThan(S)?1:0:k.isLessThan(_)?-1:k.isGreaterThan(_)?1:0}}},Du=0,pr=class rl{constructor(r,a,u,d){ut(this,"id");ut(this,"leftSE");ut(this,"rightSE");ut(this,"rings");ut(this,"windings");ut(this,"ringOut");ut(this,"consumedBy");ut(this,"prev");ut(this,"_prevInResult");ut(this,"_beforeState");ut(this,"_afterState");ut(this,"_isInResult");this.id=++Du,this.leftSE=r,r.segment=this,r.otherSE=a,this.rightSE=a,a.segment=this,a.otherSE=r,this.rings=u,this.windings=d}static compare(r,a){let u=r.leftSE.point.x,d=a.leftSE.point.x,g=r.rightSE.point.x,_=a.rightSE.point.x;if(_.isLessThan(u))return 1;if(g.isLessThan(d))return-1;let b=r.leftSE.point.y,k=a.leftSE.point.y,S=r.rightSE.point.y,V=a.rightSE.point.y;if(u.isLessThan(d)){if(k.isLessThan(b)&&k.isLessThan(S))return 1;if(k.isGreaterThan(b)&&k.isGreaterThan(S))return-1;let N=r.comparePoint(a.leftSE.point);if(N<0)return 1;if(N>0)return-1;let de=a.comparePoint(r.rightSE.point);return de!==0?de:-1}if(u.isGreaterThan(d)){if(b.isLessThan(k)&&b.isLessThan(V))return-1;if(b.isGreaterThan(k)&&b.isGreaterThan(V))return 1;let N=a.comparePoint(r.leftSE.point);if(N!==0)return N;let de=r.comparePoint(a.rightSE.point);return de<0?1:de>0?-1:1}if(b.isLessThan(k))return-1;if(b.isGreaterThan(k))return 1;if(g.isLessThan(_)){let N=a.comparePoint(r.rightSE.point);if(N!==0)return N}if(g.isGreaterThan(_)){let N=r.comparePoint(a.rightSE.point);if(N<0)return 1;if(N>0)return-1}if(!g.eq(_)){let N=S.minus(b),de=g.minus(u),xe=V.minus(k),He=_.minus(d);if(N.isGreaterThan(de)&&xe.isLessThan(He))return 1;if(N.isLessThan(de)&&xe.isGreaterThan(He))return-1}return g.isGreaterThan(_)?1:g.isLessThan(_)||S.isLessThan(V)?-1:S.isGreaterThan(V)?1:r.id<a.id?-1:r.id>a.id?1:0}static fromRing(r,a,u){let d,g,_,b=cn.comparePoints(r,a);if(b<0)d=r,g=a,_=1;else if(b>0)d=a,g=r,_=-1;else throw new Error(`Tried to create degenerate segment at [${r.x}, ${r.y}]`);let k=new cn(d,!0),S=new cn(g,!1);return new rl(k,S,[u],[_])}replaceRightSE(r){this.rightSE=r,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let r=this.leftSE.point.y,a=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:r.isLessThan(a)?r:a},ur:{x:this.rightSE.point.x,y:r.isGreaterThan(a)?r:a}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(r){return r.x.eq(this.leftSE.point.x)&&r.y.eq(this.leftSE.point.y)||r.x.eq(this.rightSE.point.x)&&r.y.eq(this.rightSE.point.y)}comparePoint(r){return Kt.orient(this.leftSE.point,r,this.rightSE.point)}getIntersection(r){let a=this.bbox(),u=r.bbox(),d=wo(a,u);if(d===null)return null;let g=this.leftSE.point,_=this.rightSE.point,b=r.leftSE.point,k=r.rightSE.point,S=un(a,b)&&this.comparePoint(b)===0,V=un(u,g)&&r.comparePoint(g)===0,N=un(a,k)&&this.comparePoint(k)===0,de=un(u,_)&&r.comparePoint(_)===0;if(V&&S)return de&&!N?_:!de&&N?k:null;if(V)return N&&g.x.eq(k.x)&&g.y.eq(k.y)?null:g;if(S)return de&&_.x.eq(b.x)&&_.y.eq(b.y)?null:b;if(de&&N)return null;if(de)return _;if(N)return k;let xe=Tu(g,this.vector(),b,r.vector());return xe===null||!un(d,xe)?null:Kt.snap(xe)}split(r){let a=[],u=r.events!==void 0,d=new cn(r,!0),g=new cn(r,!1),_=this.rightSE;this.replaceRightSE(g),a.push(g),a.push(d);let b=new rl(d,_,this.rings.slice(),this.windings.slice());return cn.comparePoints(b.leftSE.point,b.rightSE.point)>0&&b.swapEvents(),cn.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),u&&(d.checkForConsuming(),g.checkForConsuming()),a}swapEvents(){let r=this.rightSE;this.rightSE=this.leftSE,this.leftSE=r,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let a=0,u=this.windings.length;a<u;a++)this.windings[a]*=-1}consume(r){let a=this,u=r;for(;a.consumedBy;)a=a.consumedBy;for(;u.consumedBy;)u=u.consumedBy;let d=rl.compare(a,u);if(d!==0){if(d>0){let g=a;a=u,u=g}if(a.prev===u){let g=a;a=u,u=g}for(let g=0,_=u.rings.length;g<_;g++){let b=u.rings[g],k=u.windings[g],S=a.rings.indexOf(b);S===-1?(a.rings.push(b),a.windings.push(k)):a.windings[S]+=k}u.rings=null,u.windings=null,u.consumedBy=a,u.leftSE.consumedBy=a.leftSE,u.rightSE.consumedBy=a.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let r=this.prev.consumedBy||this.prev;this._beforeState=r.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let r=this.beforeState();this._afterState={rings:r.rings.slice(0),windings:r.windings.slice(0),multiPolys:[]};let a=this._afterState.rings,u=this._afterState.windings,d=this._afterState.multiPolys;for(let b=0,k=this.rings.length;b<k;b++){let S=this.rings[b],V=this.windings[b],N=a.indexOf(S);N===-1?(a.push(S),u.push(V)):u[N]+=V}let g=[],_=[];for(let b=0,k=a.length;b<k;b++){if(u[b]===0)continue;let S=a[b],V=S.poly;if(_.indexOf(V)===-1)if(S.isExterior)g.push(V);else{_.indexOf(V)===-1&&_.push(V);let N=g.indexOf(S.poly);N!==-1&&g.splice(N,1)}}for(let b=0,k=g.length;b<k;b++){let S=g[b].multiPoly;d.indexOf(S)===-1&&d.push(S)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let r=this.beforeState().multiPolys,a=this.afterState().multiPolys;switch(Na.type){case"union":{let u=r.length===0,d=a.length===0;this._isInResult=u!==d;break}case"intersection":{let u,d;r.length<a.length?(u=r.length,d=a.length):(u=a.length,d=r.length),this._isInResult=d===Na.numMultiPolys&&u<d;break}case"xor":{let u=Math.abs(r.length-a.length);this._isInResult=u%2===1;break}case"difference":{let u=d=>d.length===1&&d[0].isSubject;this._isInResult=u(r)!==u(a);break}}return this._isInResult}},Lo=class{constructor(i,r,a){ut(this,"poly");ut(this,"isExterior");ut(this,"segments");ut(this,"bbox");if(!Array.isArray(i)||i.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=a,this.segments=[],typeof i[0][0]!="number"||typeof i[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let u=Kt.snap({x:new B(i[0][0]),y:new B(i[0][1])});this.bbox={ll:{x:u.x,y:u.y},ur:{x:u.x,y:u.y}};let d=u;for(let g=1,_=i.length;g<_;g++){if(typeof i[g][0]!="number"||typeof i[g][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let b=Kt.snap({x:new B(i[g][0]),y:new B(i[g][1])});b.x.eq(d.x)&&b.y.eq(d.y)||(this.segments.push(pr.fromRing(d,b,this)),b.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=b.x),b.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=b.y),b.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=b.x),b.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=b.y),d=b)}(!u.x.eq(d.x)||!u.y.eq(d.y))&&this.segments.push(pr.fromRing(d,u,this))}getSweepEvents(){let i=[];for(let r=0,a=this.segments.length;r<a;r++){let u=this.segments[r];i.push(u.leftSE),i.push(u.rightSE)}return i}},Ru=class{constructor(i,r){ut(this,"multiPoly");ut(this,"exteriorRing");ut(this,"interiorRings");ut(this,"bbox");if(!Array.isArray(i))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Lo(i[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let a=1,u=i.length;a<u;a++){let d=new Lo(i[a],this,!1);d.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=d.bbox.ll.x),d.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=d.bbox.ll.y),d.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=d.bbox.ur.x),d.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=d.bbox.ur.y),this.interiorRings.push(d)}this.multiPoly=r}getSweepEvents(){let i=this.exteriorRing.getSweepEvents();for(let r=0,a=this.interiorRings.length;r<a;r++){let u=this.interiorRings[r].getSweepEvents();for(let d=0,g=u.length;d<g;d++)i.push(u[d])}return i}},eh=class{constructor(i,r){ut(this,"isSubject");ut(this,"polys");ut(this,"bbox");if(!Array.isArray(i))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof i[0][0][0]=="number"&&(i=[i])}catch{}this.polys=[],this.bbox={ll:{x:new B(Number.POSITIVE_INFINITY),y:new B(Number.POSITIVE_INFINITY)},ur:{x:new B(Number.NEGATIVE_INFINITY),y:new B(Number.NEGATIVE_INFINITY)}};for(let a=0,u=i.length;a<u;a++){let d=new Ru(i[a],this);d.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=d.bbox.ll.x),d.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=d.bbox.ll.y),d.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=d.bbox.ur.x),d.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=d.bbox.ur.y),this.polys.push(d)}this.isSubject=r}getSweepEvents(){let i=[];for(let r=0,a=this.polys.length;r<a;r++){let u=this.polys[r].getSweepEvents();for(let d=0,g=u.length;d<g;d++)i.push(u[d])}return i}},Wp=class Sc{constructor(r){ut(this,"events");ut(this,"poly");ut(this,"_isExteriorRing");ut(this,"_enclosingRing");this.events=r;for(let a=0,u=r.length;a<u;a++)r[a].segment.ringOut=this;this.poly=null}static factory(r){let a=[];for(let u=0,d=r.length;u<d;u++){let g=r[u];if(!g.isInResult()||g.ringOut)continue;let _=null,b=g.leftSE,k=g.rightSE,S=[b],V=b.point,N=[];for(;_=b,b=k,S.push(b),b.point!==V;)for(;;){let de=b.getAvailableLinkedEvents();if(de.length===0){let Qe=S[0].point,ot=S[S.length-1].point;throw new Error(`Unable to complete output ring starting at [${Qe.x}, ${Qe.y}]. Last matching segment found ends at [${ot.x}, ${ot.y}].`)}if(de.length===1){k=de[0].otherSE;break}let xe=null;for(let Qe=0,ot=N.length;Qe<ot;Qe++)if(N[Qe].point===b.point){xe=Qe;break}if(xe!==null){let Qe=N.splice(xe)[0],ot=S.splice(Qe.index);ot.unshift(ot[0].otherSE),a.push(new Sc(ot.reverse()));continue}N.push({index:S.length,point:b.point});let He=b.getLeftmostComparator(_);k=de.sort(He)[0].otherSE;break}a.push(new Sc(S))}return a}getGeom(){let r=this.events[0].point,a=[r];for(let S=1,V=this.events.length-1;S<V;S++){let N=this.events[S].point,de=this.events[S+1].point;Kt.orient(N,r,de)!==0&&(a.push(N),r=N)}if(a.length===1)return null;let u=a[0],d=a[1];Kt.orient(u,r,d)===0&&a.shift(),a.push(a[0]);let g=this.isExteriorRing()?1:-1,_=this.isExteriorRing()?0:a.length-1,b=this.isExteriorRing()?a.length:-1,k=[];for(let S=_;S!=b;S+=g)k.push([a[S].x.toNumber(),a[S].y.toNumber()]);return k}isExteriorRing(){if(this._isExteriorRing===void 0){let r=this.enclosingRing();this._isExteriorRing=r?!r.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var d,g;let r=this.events[0];for(let _=1,b=this.events.length;_<b;_++){let k=this.events[_];cn.compare(r,k)>0&&(r=k)}let a=r.segment.prevInResult(),u=a?a.prevInResult():null;for(;;){if(!a)return null;if(!u)return a.ringOut;if(u.ringOut!==a.ringOut)return((d=u.ringOut)==null?void 0:d.enclosingRing())!==a.ringOut?a.ringOut:(g=a.ringOut)==null?void 0:g.enclosingRing();a=u.prevInResult(),u=a?a.prevInResult():null}}},th=class{constructor(i){ut(this,"exteriorRing");ut(this,"interiorRings");this.exteriorRing=i,i.poly=this,this.interiorRings=[]}addInterior(i){this.interiorRings.push(i),i.poly=this}getGeom(){let i=this.exteriorRing.getGeom();if(i===null)return null;let r=[i];for(let a=0,u=this.interiorRings.length;a<u;a++){let d=this.interiorRings[a].getGeom();d!==null&&r.push(d)}return r}},Jp=class{constructor(i){ut(this,"rings");ut(this,"polys");this.rings=i,this.polys=this._composePolys(i)}getGeom(){let i=[];for(let r=0,a=this.polys.length;r<a;r++){let u=this.polys[r].getGeom();u!==null&&i.push(u)}return i}_composePolys(i){var a;let r=[];for(let u=0,d=i.length;u<d;u++){let g=i[u];if(!g.poly)if(g.isExteriorRing())r.push(new th(g));else{let _=g.enclosingRing();_!=null&&_.poly||r.push(new th(_)),(a=_==null?void 0:_.poly)==null||a.addInterior(g)}}return r}},Xp=class{constructor(i,r=pr.compare){ut(this,"queue");ut(this,"tree");ut(this,"segments");this.queue=i,this.tree=new Ge(r),this.segments=[]}process(i){let r=i.segment,a=[];if(i.consumedBy)return i.isLeft?this.queue.delete(i.otherSE):this.tree.delete(r),a;i.isLeft&&this.tree.add(r);let u=r,d=r;do u=this.tree.lastBefore(u);while(u!=null&&u.consumedBy!=null);do d=this.tree.firstAfter(d);while(d!=null&&d.consumedBy!=null);if(i.isLeft){let g=null;if(u){let b=u.getIntersection(r);if(b!==null&&(r.isAnEndpoint(b)||(g=b),!u.isAnEndpoint(b))){let k=this._splitSafely(u,b);for(let S=0,V=k.length;S<V;S++)a.push(k[S])}}let _=null;if(d){let b=d.getIntersection(r);if(b!==null&&(r.isAnEndpoint(b)||(_=b),!d.isAnEndpoint(b))){let k=this._splitSafely(d,b);for(let S=0,V=k.length;S<V;S++)a.push(k[S])}}if(g!==null||_!==null){let b=null;g===null?b=_:_===null?b=g:b=cn.comparePoints(g,_)<=0?g:_,this.queue.delete(r.rightSE),a.push(r.rightSE);let k=r.split(b);for(let S=0,V=k.length;S<V;S++)a.push(k[S])}a.length>0?(this.tree.delete(r),a.push(i)):(this.segments.push(r),r.prev=u)}else{if(u&&d){let g=u.getIntersection(d);if(g!==null){if(!u.isAnEndpoint(g)){let _=this._splitSafely(u,g);for(let b=0,k=_.length;b<k;b++)a.push(_[b])}if(!d.isAnEndpoint(g)){let _=this._splitSafely(d,g);for(let b=0,k=_.length;b<k;b++)a.push(_[b])}}}this.tree.delete(r)}return a}_splitSafely(i,r){this.tree.delete(i);let a=i.rightSE;this.queue.delete(a);let u=i.split(r);return u.push(a),i.consumedBy===void 0&&this.tree.add(i),u}},Yp=class{constructor(){ut(this,"type");ut(this,"numMultiPolys")}run(i,r,a){Co.type=i;let u=[new eh(r,!0)];for(let k=0,S=a.length;k<S;k++)u.push(new eh(a[k],!1));if(Co.numMultiPolys=u.length,Co.type==="difference"){let k=u[0],S=1;for(;S<u.length;)wo(u[S].bbox,k.bbox)!==null?S++:u.splice(S,1)}if(Co.type==="intersection")for(let k=0,S=u.length;k<S;k++){let V=u[k];for(let N=k+1,de=u.length;N<de;N++)if(wo(V.bbox,u[N].bbox)===null)return[]}let d=new Ge(cn.compare);for(let k=0,S=u.length;k<S;k++){let V=u[k].getSweepEvents();for(let N=0,de=V.length;N<de;N++)d.add(V[N])}let g=new Xp(d),_=null;for(d.size!=0&&(_=d.first(),d.delete(_));_;){let k=g.process(_);for(let S=0,V=k.length;S<V;S++){let N=k[S];N.consumedBy===void 0&&d.add(N)}d.size!=0?(_=d.first(),d.delete(_)):_=null}Kt.reset();let b=Wp.factory(g.segments);return new Jp(b).getGeom()}},Co=new Yp,Na=Co,Qp=(i,...r)=>Na.run("intersection",i,r),em=(i,...r)=>Na.run("difference",i,r);Kt.set;function za(i){let r={type:"Feature"};return r.geometry=i,r}function $a(i){return i.type==="Feature"?i.geometry:i}function ih(i){return i&&i.geometry&&i.geometry.coordinates?i.geometry.coordinates:i}function tm(i){return za({type:"LineString",coordinates:i})}function im(i){return za({type:"MultiLineString",coordinates:i})}function nh(i){return za({type:"Polygon",coordinates:i})}function rh(i){return za({type:"MultiPolygon",coordinates:i})}function nm(i,r){let a=$a(i),u=$a(r),d=Qp(a.coordinates,u.coordinates);return d.length===0?null:d.length===1?nh(d[0]):rh(d)}function rm(i,r){let a=$a(i),u=$a(r),d=em(a.coordinates,u.coordinates);return d.length===0?null:d.length===1?nh(d[0]):rh(d)}function sh(i){return Array.isArray(i)?1+sh(i[0]):-1}function sm(i){i instanceof L.Polyline&&(i=i.toGeoJSON(15));let r=ih(i),a=sh(r),u=[];return a>1?r.forEach(d=>{u.push(tm(d))}):u.push(i),u}function om(i){let r=[];return i.eachLayer(a=>{r.push(ih(a.toGeoJSON(15)))}),im(r)}hi.Cut=hi.Polygon.extend({initialize(i){this._map=i,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let i=this._layer.getLatLngs();if(i.length<=2)return;let r=L.polygon(i,this.options.pathOptions);r._latlngInfos=this._layer._latlngInfo,this.cut(r),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:u,originalLayer:d})=>{this._fireCut(d,u,d),this._fireCut(this._map,u,d),d.pm._fireEdit()}),this._editedLayers=[];let a=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(a))},cut(i){let r=this._map._layers,a=i._latlngInfos||[];Object.keys(r).map(u=>r[u]).filter(u=>u.pm).filter(u=>!u._pmTempLayer).filter(u=>!L.PM.optIn&&!u.options.pmIgnore||L.PM.optIn&&u.options.pmIgnore===!1).filter(u=>u instanceof L.Polyline).filter(u=>u!==i).filter(u=>u.pm.options.allowCutting).filter(u=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(u)>-1:!0).filter(u=>!this._layerGroup.hasLayer(u)).filter(u=>{try{let d=!!an(i.toGeoJSON(15),u.toGeoJSON(15)).features.length>0;return d||u instanceof L.Polyline&&!(u instanceof L.Polygon)?d:!!nm(i.toGeoJSON(15),u.toGeoJSON(15))}catch{return u instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(u=>{let d;if(u instanceof L.Polygon){d=L.polygon(u.getLatLngs());let k=d.getLatLngs();a.forEach(S=>{if(S&&S.snapInfo){let{latlng:V}=S,N=this._calcClosestLayer(V,[d]);if(N&&N.segment&&N.distance<this.options.snapDistance){let{segment:de}=N;if(de&&de.length===2){let{indexPath:xe,parentPath:He,newIndex:Qe}=L.PM.Utils._getIndexFromSegment(k,de);(xe.length>1?(0,vn.default)(k,He):k).splice(Qe,0,V)}}}})}else d=u;let g=this._cutLayer(i,d),_=L.geoJSON(g,u.options);_.getLayers().length===1&&([_]=_.getLayers()),this._setPane(_,"layerPane");let b=_.addTo(this._map.pm._getContainingLayer());if(b.pm.enable(u.pm.options),b.pm.disable(),u._pmTempLayer=!0,i._pmTempLayer=!0,u.remove(),u.removeFrom(this._map.pm._getContainingLayer()),i.remove(),i.removeFrom(this._map.pm._getContainingLayer()),b.getLayers&&b.getLayers().length===0&&this._map.pm.removeLayer({target:b}),b instanceof L.LayerGroup?(b.eachLayer(k=>{this._addDrawnLayerProp(k)}),this._addDrawnLayerProp(b)):this._addDrawnLayerProp(b),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let k=this.options.layersToCut.indexOf(u);k>-1&&this.options.layersToCut.splice(k,1)}this._editedLayers.push({layer:b,originalLayer:u})})},_cutLayer(i,r){let a=L.geoJSON(),u;if(r instanceof L.Polygon)u=rm(r.toGeoJSON(15),i.toGeoJSON(15));else{let d=sm(r);d.forEach(g=>{let _=Lu(g,i.toGeoJSON(15)),b;_&&_.features.length>0?b=L.geoJSON(_):b=L.geoJSON(g),b.getLayers().forEach(k=>{ku(i.toGeoJSON(15),k.toGeoJSON(15))||k.addTo(a)})}),d.length>1?u=om(a):u=a.toGeoJSON(15)}return u},_change:L.Util.falseFn}),hi.Text=hi.extend({initialize(i){this._map=i,this._shape="Text",this.toolbarButtonName="drawText"},enable(i){L.Util.setOptions(this,i),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(vt("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var i;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(i=this._hintMarker)==null||i.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let r=i;r.target=this._hintMarker,this._handleSnapping(r)}},_createMarker(i){var d,g,_,b;if(!i.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(d=this.options.textOptions)==null?void 0:d.className){let k=this.options.textOptions.className.split(" ");this.textArea.classList.add(...k)}let a=this._createTextIcon(this.textArea),u=new L.Marker(r,{textMarker:!0,_textMarkerOverPM:!0,icon:a});if(this._setPane(u,"markerPane"),this._finishLayer(u),u.pm||(u.options.draggable=!1),u.addTo(this._map.pm._getContainingLayer()),u.pm){u.pm.textArea=this.textArea,L.setOptions(u.pm,{removeIfEmpty:((g=this.options.textOptions)==null?void 0:g.removeIfEmpty)??!0});let k=((_=this.options.textOptions)==null?void 0:_.focusAfterDraw)??!0;u.pm._createTextMarker(k),(b=this.options.textOptions)!=null&&b.text&&u.pm.setText(this.options.textOptions.text)}this._fireCreate(u),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(i){this.enable(),this._hintMarker.setLatLng(i.latlng)},_createTextArea(){let i=document.createElement("textarea");return i.readOnly=!0,i.classList.add("pm-textarea","pm-disabled"),i},_createTextIcon(i){return L.divIcon({className:"pm-text-marker",html:i})}});var am={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,mi(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let i=this._getDOMElem();i&&(mi(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(i)):L.DomEvent.on(i,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,mi(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let i=this._getDOMElem();i&&(mi(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(i)):L.DomEvent.off(i,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(i){let r=i.touches?i.touches[0]:i,a={originalEvent:r,target:this._layer};return a.containerPoint=this._map.mouseEventToContainerPoint(r),a.latlng=this._map.containerPointToLatLng(a.containerPoint),this._dragMixinOnMouseDown(a),!1},_simulateMouseMoveEvent(i){let r=i.touches?i.touches[0]:i,a={originalEvent:r,target:this._layer};return a.containerPoint=this._map.mouseEventToContainerPoint(r),a.latlng=this._map.containerPointToLatLng(a.containerPoint),this._dragMixinOnMouseMove(a),!1},_simulateMouseUpEvent(i){let r={originalEvent:i.touches?i.touches[0]:i,target:this._layer};return i.type.indexOf("touch")===-1&&(r.containerPoint=this._map.mouseEventToContainerPoint(i),r.latlng=this._map.containerPointToLatLng(r.containerPoint)),this._dragMixinOnMouseUp(r),!1},_dragMixinOnMouseDown(i){if(i.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(i);let r=i._fromLayerSync,a=this._syncLayers("_dragMixinOnMouseDown",i);if(this._layer instanceof L.Marker&&(this.options.snappable&&!r&&!a?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let u="resizeableCircleMarker";this._layer instanceof L.Circle&&(u="resizeableCircle"),this.options.snappable&&!r&&!a?this._layer.pm.options[u]||this._initSnappableMarkersDrag():this._layer.pm.options[u]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=i.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(i){this._overwriteEventIfItComesFromMarker(i);let r=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",i),this._dragging||(this._dragging=!0,L.DomUtil.addClass(r,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=i.latlng),this._onLayerDrag(i),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(i){let r=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",i),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,r&&L.DomUtil.removeClass(r,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(i){let{latlng:r}=i,a={lat:r.lat-this._tempDragCoord.lat,lng:r.lng-this._tempDragCoord.lng},u=d=>d.map(g=>{if(Array.isArray(g))return u(g);let _={lat:g.lat+a.lat,lng:g.lng+a.lng};return(g.alt||g.alt===0)&&(_.alt=g.alt),_});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let d=u([this._layer.getLatLng()]);this._layer.setLatLng(d[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let d=this._layer.getLatLng();this._layer._snapped&&(d=this._layer._orgLatLng);let g=u([d]);this._layer.setLatLng(g[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let d=u([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(d),this._fireChange(this._layer.getBounds(),"Edit")}else{let d=u(this._layer.getLatLngs());this._layer.setLatLngs(d),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=r,i.layer=this._layer,this._fireDrag(i)},addDraggingClass(){let i=this._getDOMElem();i&&L.DomUtil.addClass(i,"leaflet-pm-draggable")},removeDraggingClass(){let i=this._getDOMElem();i&&L.DomUtil.removeClass(i,"leaflet-pm-draggable")},_getDOMElem(){let i=null;return this._layer._path?i=this._layer._path:this._layer._renderer&&this._layer._renderer._container?i=this._layer._renderer._container:this._layer._image?i=this._layer._image:this._layer._icon&&(i=this._layer._icon),i},_overwriteEventIfItComesFromMarker(i){i.target.getLatLng&&(!i.target._radius||i.target._radius<=10)&&(i.containerPoint=this._map.mouseEventToContainerPoint(i.originalEvent),i.latlng=this._map.containerPointToLatLng(i.containerPoint))},_syncLayers(i,r){if(this.enabled())return!1;if(!r._fromLayerSync&&this._layer===r.target&&this.options.syncLayersOnDrag){r._fromLayerSync=!0;let a=[];if(L.Util.isArray(this.options.syncLayersOnDrag))a=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(u=>{u instanceof L.LayerGroup&&(a=a.concat(u.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let u in this._parentLayerGroup){let d=this._parentLayerGroup[u];d.pm&&(a=d.pm.getLayers(!0))}return L.Util.isArray(a)&&a.length>0&&(a=a.filter(u=>!!u.pm).filter(u=>!!u.pm.options.draggable),a.forEach(u=>{u!==this._layer&&u.pm[i]&&(u._snapped=!1,u.pm[i](r))})),a.length>0}return!1},_stopDOMImageDrag(i){return i.preventDefault(),!1}},lm=am,um=v(kn());function cm(i,r,a,u){return a.unproject(r.transform(a.project(i,u)),u)}function oh(i,r,a){let u=a.getMaxZoom();if(u===1/0&&(u=a.getZoom()),L.Util.isArray(i)){let d=[];return i.forEach(g=>{d.push(oh(g,r,a))}),d}return i instanceof L.LatLng?cm(i,r,a,u):null}function Ps(i,r){r instanceof L.Layer&&(r=r.getLatLng());let a=i.getMaxZoom();return a===1/0&&(a=i.getZoom()),i.project(r,a)}function Ua(i,r){let a=i.getMaxZoom();return a===1/0&&(a=i.getZoom()),i.unproject(r,a)}var hm={_onRotateStart(i){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Ps(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Ps(this._map,i.target.getLatLng()),this._initialRotateLatLng=sn(this._layer),this._startAngle=this.getAngle();let r=sn(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,r),this._fireRotationStart(this._map,r)},_onRotate(i){let r=Ps(this._map,i.target.getLatLng()),a=this._rotationStartPoint,u=this._rotationOriginPoint,d=Math.atan2(r.y-u.y,r.x-u.x)-Math.atan2(a.y-u.y,a.x-u.x);this._layer.setLatLngs(this._rotateLayer(d,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let g=this;function _(V,N=[],de=-1){if(de>-1&&N.push(de),L.Util.isArray(V[0]))V.forEach((xe,He)=>_(xe,N.slice(),He));else{let xe=N.length>0?(0,um.default)(g._markers,N):g._markers[0];V.forEach((He,Qe)=>{xe[Qe].setLatLng(He)})}}_(this._layer.getLatLngs());let b=sn(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(d,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let k=d*180/Math.PI;k=k<0?k+360:k;let S=k+this._startAngle;this._setAngle(S),this._rotationLayer.pm._setAngle(S),this._fireRotation(this._rotationLayer,k,b),this._fireRotation(this._map,k,b),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let i=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let r=sn(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=sn(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,i,r),this._fireRotationEnd(this._map,i,r),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(i,r,a,u,d){let g=Ps(d,a);return this._matrix=u.clone().rotate(i,g).flip(),oh(r,this._matrix,d)},_setAngle(i){i=i<0?i+360:i,this._angle=i%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let i=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),r=i.getCenter();return i.removeFrom(this._layer._map),r},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(us(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let i={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),i),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=sn(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(i){let r=this.getAngle(),a=this._layer.getLatLngs(),u=i*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(u,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+i),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(u,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let d=this.getAngle()-r;d=d<0?d+360:d,this._startAngle=r,this._fireRotation(this._layer,d,a,this._layer),this._fireRotation(this._map||this._layer._map,d,a,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(i){let r=i-this.getAngle();this.rotateLayer(r)},getAngle(){return this._angle||0},setInitAngle(i){this._setAngle(i)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(i){this._rotationCenter=i,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(i)}},dm=hm,fm=L.Class.extend({includes:[lm,ho,dm,as],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(i){L.Util.setOptions(this,i)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(i,r){r==="layerPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":r==="vertexPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":r==="markerPane"&&(i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(i,r){let a=r.target,u={layer:this._layer,marker:a,event:r},d="";return i==="move"?d="moveVertexValidation":i==="add"?d="addVertexValidation":i==="remove"&&(d="removeVertexValidation"),this.options[d]&&typeof this.options[d]=="function"&&!this.options[d](u)?(i==="move"&&(a._cancelDragEventChain=a.getLatLng()),!1):(a._cancelDragEventChain=null,!0)},_vertexValidationDrag(i){return i._cancelDragEventChain?(i._latlng=i._cancelDragEventChain,i.update(),!1):!0},_vertexValidationDragEnd(i){return i._cancelDragEventChain?(i._cancelDragEventChain=null,!1):!0}}),pi=fm;pi.LayerGroup=L.Class.extend({initialize(i){this._layerGroup=i,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(u=>this._initLayer(u));let r=u=>{if(u.layer._pmTempLayer)return;this._layers=this.getLayers();let d=this._layers.filter(g=>!g.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in g.pm._parentLayerGroup));d.forEach(g=>{this._initLayer(g)}),d.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(r,100,this),this),this._layerGroup.on("layerremove",u=>{this._removeLayerFromGroup(u.target)},this);let a=u=>{u.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(a,100,this),this)},enable(i,r=[]){r.length===0&&(this._layers=this.getLayers()),this._options=i,this._layers.forEach(a=>{a instanceof L.LayerGroup?r.indexOf(a._leaflet_id)===-1&&(r.push(a._leaflet_id),a.pm.enable(i,r)):a.pm.enable(i)})},disable(i=[]){i.length===0&&(this._layers=this.getLayers()),this._layers.forEach(r=>{r instanceof L.LayerGroup?i.indexOf(r._leaflet_id)===-1&&(i.push(r._leaflet_id),r.pm.disable(i)):r.pm.disable()})},enabled(i=[]){return i.length===0&&(this._layers=this.getLayers()),!!this._layers.find(r=>r instanceof L.LayerGroup?i.indexOf(r._leaflet_id)===-1?(i.push(r._leaflet_id),r.pm.enabled(i)):!1:r.pm.enabled())},toggleEdit(i,r=[]){r.length===0&&(this._layers=this.getLayers()),this._options=i,this._layers.forEach(a=>{a instanceof L.LayerGroup?r.indexOf(a._leaflet_id)===-1&&(r.push(a._leaflet_id),a.pm.toggleEdit(i,r)):a.pm.toggleEdit(i)})},_initLayer(i){let r=L.Util.stamp(this._layerGroup);i.pm._parentLayerGroup||(i.pm._parentLayerGroup={}),i.pm._parentLayerGroup[r]=this._layerGroup},_removeLayerFromGroup(i){if(i.pm&&i.pm._layerGroup){let r=L.Util.stamp(this._layerGroup);delete i.pm._layerGroup[r]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(i=>i.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var i;return this._map||((i=this._layers.find(r=>!!r._map))==null?void 0:i._map)||null},getLayers(i=!1,r=!0,a=!0,u=[]){let d=[];return i?this._layerGroup.getLayers().forEach(g=>{d.push(g),g instanceof L.LayerGroup&&u.indexOf(g._leaflet_id)===-1&&(u.push(g._leaflet_id),d=d.concat(g.pm.getLayers(!0,!0,!0,u)))}):d=this._layerGroup.getLayers(),a&&(d=d.filter(g=>!(g instanceof L.LayerGroup))),r&&(d=d.filter(g=>!!g.pm),d=d.filter(g=>!g._pmTempLayer),d=d.filter(g=>!L.PM.optIn&&!g.options.pmIgnore||L.PM.optIn&&g.options.pmIgnore===!1)),d},setOptions(i,r=[]){r.length===0&&(this._layers=this.getLayers()),this.options=i,this._layers.forEach(a=>{a.pm&&(a instanceof L.LayerGroup?r.indexOf(a._leaflet_id)===-1&&(r.push(a._leaflet_id),a.pm.setOptions(i,r)):a.pm.setOptions(i))})}}),pi.Marker=pi.extend({_shape:"Marker",initialize(i){this._layer=i,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(i={draggable:!0}){if(L.Util.setOptions(this,i),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(i){let r=i.target;r.remove(),this._fireRemove(r),this._fireRemove(this._map,r)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let i=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,i.off("pm:drag",this._handleSnapping,this),i.on("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.on("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this),i.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let i=this._layer;i.off("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this)}});var mr=v(kn()),pm={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let i=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=i.filter((r,a,u)=>u.indexOf(r)===a)},_removeFromCache(i){let r=this.markerCache.indexOf(i);r>-1&&this.markerCache.splice(r,1)},renderLimits(i){this.markerCache.forEach(r=>{i.includes(r)?this._markerGroup.addLayer(r):this._markerGroup.removeLayer(r)})},applyLimitFilters({latlng:i={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let r=[...this._filterClosestMarkers(i)];this.renderLimits(r)},_filterClosestMarkers(i){let r=[...this.markerCache],a=this.options.limitMarkersToCount;return a===-1?r:(r.sort((u,d)=>{let g=u._latlng.distanceTo(i),_=d._latlng.distanceTo(i);return g-_}),r.filter((u,d)=>a>-1?d<a:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(i){this._preventRenderMarkers=!!i}},mm=pm;pi.Line=pi.extend({includes:[mm],_shape:"Line",initialize(i){this._layer=i,this._enabled=!1},enable(i){if(L.Util.setOptions(this,i),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let i=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(i,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(i){return this.enabled()?this.disable():this.enable(i),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let i=this._map,r=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(i),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let a=u=>{if(Array.isArray(u[0]))return u.map(a,this);let d=u.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&u.map((g,_)=>{let b=this.isPolygon()?(_+1)%u.length:_+1;return this._createMiddleMarker(d[_],d[b])}),d};this._markers=a(r),this.filterMarkerGroup(),i.addLayer(this._markerGroup)},_createMarker(i){let r=new L.Marker(i,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._pmTempLayer=!0,this.options.rotate?(r.on("dragstart",this._onRotateStart,this),r.on("drag",this._onRotate,this),r.on("dragend",this._onRotateEnd,this)):(r.on("click",this._onVertexClick,this),r.on("dragstart",this._onMarkerDragStart,this),r.on("move",this._onMarkerDrag,this),r.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||r.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(r),r},_createMiddleMarker(i,r){if(!i||!r)return!1;let a=L.PM.Utils.calcMiddleLatLng(this._map,i.getLatLng(),r.getLatLng()),u=this._createMarker(a),d=L.divIcon({className:"marker-icon marker-icon-middle"});return u.setIcon(d),u.leftM=i,u.rightM=r,i._middleMarkerNext=u,r._middleMarkerPrev=u,u.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),u.on("movestart",this._onMiddleMarkerMoveStart,this),u},_onMiddleMarkerClick(i){let r=i.target;if(!this._vertexValidation("add",i))return;let a=L.divIcon({className:"marker-icon"});r.setIcon(a),this._addMarker(r,r.leftM,r.rightM)},_onMiddleMarkerMoveStart(i){let r=i.target;if(r.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",i)){r.on("move",this._onMiddleMarkerMovePrevent,this);return}r._dragging=!0,this._addMarker(r,r.leftM,r.rightM)},_onMiddleMarkerMovePrevent(i){let r=i.target;this._vertexValidationDrag(r)},_onMiddleMarkerMoveEnd(i){let r=i.target;if(r.off("move",this._onMiddleMarkerMovePrevent,this),r.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(r))return;let a=L.divIcon({className:"marker-icon"});r.setIcon(a),setTimeout(()=>{delete r._dragging},100)},_addMarker(i,r,a){i.off("movestart",this._onMiddleMarkerMoveStart,this),i.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let u=i.getLatLng(),d=this._layer._latlngs;delete i.leftM,delete i.rightM;let{indexPath:g,index:_,parentPath:b}=L.PM.Utils.findDeepMarkerIndex(this._markers,r),k=g.length>1?(0,mr.default)(d,b):d,S=g.length>1?(0,mr.default)(this._markers,b):this._markers;k.splice(_+1,0,u),S.splice(_+1,0,i),this._layer.setLatLngs(d),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(r,i),this._createMiddleMarker(i,a)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(i,L.PM.Utils.findDeepMarkerIndex(this._markers,i).indexPath,u),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return hs(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(i){let r=this._layer,a,u;if(this.options.allowSelfIntersection?a=!1:(u=hs(this._layer.toGeoJSON(15)),a=u.features.length>0),a){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return a;i?this._flashLayer():(r.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(u)}else r.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return a},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(i,r){i.forEach(a=>{Array.isArray(a)?this._updateDisabledMarkerStyle(a,r):a._icon&&(r&&!this._checkMarkerAllowedToDrag(a)?L.DomUtil.addClass(a._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(a._icon,"vertexmarker-disabled"))})},_removeMarker(i){let r=i.target;if(!this._vertexValidation("remove",i))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=sn(this._layer,this._layer.getLatLngs()));let a=this._layer.getLatLngs(),{indexPath:u,index:d,parentPath:g}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);if(!u)return;let _=u.length>1?(0,mr.default)(a,g):a,b=u.length>1?(0,mr.default)(this._markers,g):this._markers,k=g[g.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!k&&(_.length<=2||this.isPolygon()&&_.length<=3)){this._flashLayer();return}_.splice(d,1),this._layer.setLatLngs(a),this.isPolygon()&&_.length<=2&&_.splice(0,_.length);let S=!1;if(_.length<=1&&(_.splice(0,_.length),g.length>1&&u.length>1&&(a=Tr(a)),this._layer.setLatLngs(a),this._initMarkers(),S=!0),Hn(a)||this._layer.remove(),a=Tr(a),this._layer.setLatLngs(a),this._markers=Tr(this._markers),!S&&(b=u.length>1?(0,mr.default)(this._markers,g):this._markers,r._middleMarkerPrev&&(this._markerGroup.removeLayer(r._middleMarkerPrev),this._removeFromCache(r._middleMarkerPrev)),r._middleMarkerNext&&(this._markerGroup.removeLayer(r._middleMarkerNext),this._removeFromCache(r._middleMarkerNext)),this._markerGroup.removeLayer(r),this._removeFromCache(r),b)){let V,N;if(this.isPolygon()?(V=(d+1)%b.length,N=(d+(b.length-1))%b.length):(N=d-1<0?void 0:d-1,V=d+1>=b.length?void 0:d+1),V!==N){let de=b[N],xe=b[V];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(de,xe)}b.splice(d,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(r,u),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(i){let r=this._layer.getLatLngs(),a=i.getLatLng(),{indexPath:u,index:d,parentPath:g}=L.PM.Utils.findDeepMarkerIndex(this._markers,i);(u.length>1?(0,mr.default)(r,g):r).splice(d,1,a),this._layer.setLatLngs(r)},_getNeighborMarkers(i){let{indexPath:r,index:a,parentPath:u}=L.PM.Utils.findDeepMarkerIndex(this._markers,i),d=r.length>1?(0,mr.default)(this._markers,u):this._markers,g=(a+1)%d.length,_=(a+(d.length-1))%d.length,b=d[_],k=d[g];return{prevMarker:b,nextMarker:k}},_checkMarkerAllowedToDrag(i){let{prevMarker:r,nextMarker:a}=this._getNeighborMarkers(i),u=L.polyline([r.getLatLng(),i.getLatLng()]),d=L.polyline([i.getLatLng(),a.getLatLng()]),g=an(this._layer.toGeoJSON(15),u.toGeoJSON(15)).features.length,_=an(this._layer.toGeoJSON(15),d.toGeoJSON(15)).features.length;return i.getLatLng()===this._markers[0][0].getLatLng()?_+=1:i.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(g+=1),!(g<=2&&_<=2)},_onMarkerDragStart(i){let r=i.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",i))return;let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDragStart(i,a),this.options.allowSelfIntersection||(this._coordsBeforeEdit=sn(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(r):this._markerAllowedToDrag=null},_onMarkerDrag(i){let r=i.target;if(!this._vertexValidationDrag(r))return;let{indexPath:a,index:u,parentPath:d}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);if(!a)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(r);let g=a.length>1?(0,mr.default)(this._markers,d):this._markers,_=(u+1)%g.length,b=(u+(g.length-1))%g.length,k=r.getLatLng(),S=g[b].getLatLng(),V=g[_].getLatLng();if(r._middleMarkerNext){let N=L.PM.Utils.calcMiddleLatLng(this._map,k,V);r._middleMarkerNext.setLatLng(N)}if(r._middleMarkerPrev){let N=L.PM.Utils.calcMiddleLatLng(this._map,k,S);r._middleMarkerPrev.setLatLng(N)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(i,a),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(i){let r=i.target;if(!this._vertexValidationDragEnd(r))return;let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r),u=!this.options.allowSelfIntersection&&this.hasSelfIntersection();u&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(u=!1);let d=!this.options.allowSelfIntersection&&u;if(this._fireMarkerDragEnd(i,a,d),d){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(i,a);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(i){let r=i.target;if(r._dragging)return;let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireVertexClick(i,a)}}),pi.Polygon=pi.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(i){let{prevMarker:r,nextMarker:a}=this._getNeighborMarkers(i),u=L.polyline([r.getLatLng(),i.getLatLng()]),d=L.polyline([i.getLatLng(),a.getLatLng()]),g=an(this._layer.toGeoJSON(15),u.toGeoJSON(15)).features.length,_=an(this._layer.toGeoJSON(15),d.toGeoJSON(15)).features.length;return!(g<=2&&_<=2)}}),pi.Rectangle=pi.Polygon.extend({_shape:"Rectangle",_initMarkers(){let i=this._map,r=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,i.addLayer(this._markerGroup),this._markers=[],this._markers[0]=r.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((a,u)=>{let d=this._cornerMarkers.find(g=>g._index===u);d&&d.setLatLng(a)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(i,r){let a=new L.Marker(i,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(a,"vertexPane"),a._origLatLng=i,a._index=r,a._pmTempLayer=!0,a.on("click",this._onVertexClick,this),this._markerGroup.addLayer(a),a},_addMarkerEvents(){this._markers[0].forEach(i=>{i.on("dragstart",this._onMarkerDragStart,this),i.on("drag",this._onMarkerDrag,this),i.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||i.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(i){if(!this._vertexValidation("move",i))return;let r=i.target,a=this._cornerMarkers;r._oppositeCornerLatLng=a.find(d=>d._index===(r._index+2)%4).getLatLng(),r._snapped=!1;let{indexPath:u}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDragStart(i,u)},_onMarkerDrag(i){let r=i.target;if(!this._vertexValidationDrag(r)||r._index===void 0)return;this._adjustRectangleForMarkerMove(r);let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDrag(i,a),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(i){let r=i.target;if(!this._vertexValidationDragEnd(r))return;this._cornerMarkers.forEach(u=>{delete u._oppositeCornerLatLng});let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDragEnd(i,a),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(i){L.extend(i._origLatLng,i._latlng);let r=L.PM.Utils._getRotatedRectangle(i.getLatLng(),i._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(r),this._adjustAllMarkers(i),this._layer.redraw()},_adjustAllMarkers(i){let r=this._layer.getLatLngs()[0];if(r&&r.length!==4&&r.length>0)r.forEach((a,u)=>{this._cornerMarkers[u].setLatLng(a)}),this._cornerMarkers.slice(r.length).forEach(a=>{a.setLatLng(r[0])});else if(!r||!r.length)console.error("The layer has no LatLngs");else{let a=r.findIndex(u=>i.getLatLng().equals(u));a>-1?(this._cornerMarkers[(i._index+1)%4].setLatLng(r[(a+1)%4]),this._cornerMarkers[(i._index+2)%4].setLatLng(r[(a+2)%4]),this._cornerMarkers[(i._index+3)%4].setLatLng(r[(a+3)%4])):this._cornerMarkers.forEach(u=>{u.setLatLng(r[u._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(us(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let i=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(i[0],i[2],this.getAngle(),this._map||this)}}),pi.CircleMarker=pi.extend({_shape:"CircleMarker",initialize(i){this._layer=i,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(i={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,i),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let i=this._map;this._helperLayers&&(this._helperLayers.removeFrom(i),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(i);let r=this._layer.getLatLng(),a=this._layer._radius,u=this._getLatLngOnCircle(r,a);this._centerMarker=this._createCenterMarker(r),this._outerMarker=this._createOuterMarker(u),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(i,r){let a=this._map.project(i),u=L.point(a.x+r,a.y);return this._map.unproject(u)},_createHintLine(i,r){let a=i.getLatLng(),u=r.getLatLng();this._hintline=L.polyline([a,u],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(i){let r=this._createMarker(i);return this.options.draggable?(L.DomUtil.addClass(r._icon,"leaflet-pm-draggable"),r.on("move",this._moveCircle,this)):r.dragging.disable(),r},_createOuterMarker(i){let r=this._createMarker(i);return r.on("drag",this._resizeCircle,this),r},_createMarker(i){let r=new L.Marker(i,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._origLatLng=i,r._pmTempLayer=!0,r.on("dragstart",this._onMarkerDragStart,this),r.on("drag",this._onMarkerDrag,this),r.on("dragend",this._onMarkerDragEnd,this),r.on("click",this._onVertexClick,this),this._helperLayers.addLayer(r),r},_moveCircle(i){if(i.target._cancelDragEventChain)return;let r=this._centerMarker.getLatLng();this._layer.setLatLng(r);let a=this._layer._radius,u=this._getLatLngOnCircle(r,a);this._outerMarker._latlng=u,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let i=this._layer.getLatLng(),r=this._layer._radius,a=this._getLatLngOnCircle(i,r);this._outerMarker.setLatLng(a),this._centerMarker.setLatLng(i),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let i=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng(),a=this._distanceCalculation(i,r);this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(a),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let i=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng();this._hintline.setLatLngs([i,r])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(i){this._vertexValidation("move",i)&&this._fireMarkerDragStart(i)},_onMarkerDrag(i){let r=i.target;r instanceof L.Marker&&!this._vertexValidationDrag(r)||this._fireMarkerDrag(i)},_onMarkerDragEnd(i){this._extedingMarkerDragEnd();let r=i.target;this._vertexValidationDragEnd(r)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(i))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let i=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,i.off("pm:drag",this._handleSnapping,this),i.on("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.on("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this),i.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let i=this._layer;i.off("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let i=this._layer._map||this._map;if(i){let r=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),i,this._layer.getLatLng()),a=L.circle(this._layer.getLatLng(),this._layer.options);a.setRadius(r);let u=i&&i.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(a,200,!u).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(a,200,!u),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let i=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng(),a=this._distanceCalculation(i,r);return this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?r=cs(this._map,i,r,this._getMinDistanceInMeter(i)):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&(r=cs(this._map,i,r,this._getMaxDistanceInMeter(i))),r},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let i=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng(),a=this._distanceCalculation(i,r);this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(i,r){return this._map.project(i).distanceTo(this._map.project(r))},_getMinDistanceInMeter(i){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,i)},_getMaxDistanceInMeter(i){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,i)},_onVertexClick(i){i.target._dragging||this._fireVertexClick(i,void 0)}}),pi.Circle=pi.CircleMarker.extend({_shape:"Circle",initialize(i){this._layer=i,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(i){L.PM.Edit.CircleMarker.prototype.enable.call(this,i||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let i=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(i,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let i=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!i).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!i),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(i,r){return this._map.distance(i,r)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(i){i.target._dragging||this._fireVertexClick(i,void 0)}}),pi.ImageOverlay=pi.extend({_shape:"ImageOverlay",initialize(i){this._layer=i,this._enabled=!1},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},enabled(){return this._enabled},enable(i={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,i),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let i=this._layer.getBounds(),r=i.getNorthWest(),a=i.getNorthEast(),u=i.getSouthEast(),d=i.getSouthWest();return[r,a,u,d]}}),pi.Text=pi.extend({_shape:"Text",initialize(i){this._layer=i,this._enabled=!1},enable(i){if(L.Util.setOptions(this,i),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let i=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),i.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let i=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,i.off("pm:drag",this._handleSnapping,this),i.on("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.on("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this),i.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let i=this._layer;i.off("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let i=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,r=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${i}px`,this.textArea.style.width=`${r}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(i){i.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(i={}){let r=this._hasFocus;this._hasFocus=i.type==="focus",!r!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(i){i&&(this.textArea.value=i),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let r=this.options.className.split(" ");this.textArea.classList.add(...r)}let i=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(i),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(i=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),i===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(i){i.preventDefault()}});var Ou=function(i,r,a,u,d,g){this._matrix=[i,r,a,u,d,g]};Ou.init=()=>new L.PM.Matrix(1,0,0,1,0,0),Ou.prototype={transform(i){return this._transform(i.clone())},_transform(i){let r=this._matrix,{x:a,y:u}=i;return i.x=r[0]*a+r[1]*u+r[4],i.y=r[2]*a+r[3]*u+r[5],i},untransform(i){let r=this._matrix;return new L.Point((i.x/r[0]-r[4])/r[0],(i.y/r[2]-r[5])/r[2])},clone(){let i=this._matrix;return new L.PM.Matrix(i[0],i[1],i[2],i[3],i[4],i[5])},translate(i){if(i===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let r,a;return typeof i=="number"?(r=i,a=i):(r=i.x,a=i.y),this._add(1,0,0,1,r,a)},scale(i,r){if(i===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let a,u;return r=r||L.point(0,0),typeof i=="number"?(a=i,u=i):(a=i.x,u=i.y),this._add(a,0,0,u,r.x,r.y)._add(1,0,0,1,-r.x,-r.y)},rotate(i,r){let a=Math.cos(i),u=Math.sin(i);return r=r||new L.Point(0,0),this._add(a,u,-u,a,r.x,r.y)._add(1,0,0,1,-r.x,-r.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(i,r,a,u,d,g){let _=[[],[],[]],b=this._matrix,k=[[b[0],b[2],b[4]],[b[1],b[3],b[5]],[0,0,1]],S=[[i,a,d],[r,u,g],[0,0,1]],V;i&&i instanceof L.PM.Matrix&&(b=i._matrix,S=[[b[0],b[2],b[4]],[b[1],b[3],b[5]],[0,0,1]]);for(let N=0;N<3;N+=1)for(let de=0;de<3;de+=1){V=0;for(let xe=0;xe<3;xe+=1)V+=k[N][xe]*S[xe][de];_[N][de]=V}return this._matrix=[_[0][0],_[1][0],_[0][1],_[1][1],_[0][2],_[1][2]],this}};var gm=Ou,_m={calcMiddleLatLng(i,r,a){let u=i.project(r),d=i.project(a);return i.unproject(u._add(d)._divideBy(2))},findLayers(i){let r=[];return i.eachLayer(a=>{(a instanceof L.Polyline||a instanceof L.Marker||a instanceof L.Circle||a instanceof L.CircleMarker||a instanceof L.ImageOverlay)&&r.push(a)}),r=r.filter(a=>!!a.pm),r=r.filter(a=>!a._pmTempLayer),r=r.filter(a=>!L.PM.optIn&&!a.options.pmIgnore||L.PM.optIn&&a.options.pmIgnore===!1),r},circleToPolygon(i,r=60,a=!0){let u=i.getLatLng(),d=i.getRadius(),g=ls(u,d,r,0,a),_=[];for(let b=0;b<g.length;b+=1){let k=[g[b].lat,g[b].lng];_.push(k)}return L.polygon(_,i.options)},disablePopup(i){i.getPopup()&&(i._tempPopupCopy=i.getPopup(),i.unbindPopup())},enablePopup(i){i._tempPopupCopy&&(i.bindPopup(i._tempPopupCopy),delete i._tempPopupCopy)},_fireEvent(i,r,a,u=!1){i.fire(r,a,u);let{groups:d}=this.getAllParentGroups(i);d.forEach(g=>{g.fire(r,a,u)})},getAllParentGroups(i){let r=[],a=[],u=d=>{for(let g in d._eventParents)if(r.indexOf(g)===-1){r.push(g);let _=d._eventParents[g];a.push(_),u(_)}};return!i._pmLastGroupFetch||!i._pmLastGroupFetch.time||new Date().getTime()-i._pmLastGroupFetch.time>1e3?(u(i),i._pmLastGroupFetch={time:new Date().getTime(),groups:a,groupIds:r},{groupIds:r,groups:a}):{groups:i._pmLastGroupFetch.groups,groupIds:i._pmLastGroupFetch.groupIds}},createGeodesicPolygon:ls,getTranslation:vt,findDeepCoordIndex(i,r,a=!0){let u,d=_=>(b,k)=>{let S=_.concat(k);if(a){if(b.lat&&b.lat===r.lat&&b.lng===r.lng)return u=S,!0}else if(b.lat&&L.latLng(b).equals(r))return u=S,!0;return Array.isArray(b)&&b.some(d(S))};i.some(d([]));let g={};return u&&(g={indexPath:u,index:u[u.length-1],parentPath:u.slice(0,u.length-1)}),g},findDeepMarkerIndex(i,r){let a,u=g=>(_,b)=>{let k=g.concat(b);return _._leaflet_id===r._leaflet_id?(a=k,!0):Array.isArray(_)&&_.some(u(k))};i.some(u([]));let d={};return a&&(d={indexPath:a,index:a[a.length-1],parentPath:a.slice(0,a.length-1)}),d},_getIndexFromSegment(i,r){if(r&&r.length===2){let a=this.findDeepCoordIndex(i,r[0]),u=this.findDeepCoordIndex(i,r[1]),d=Math.max(a.index,u.index);return(a.index===0||u.index===0)&&d!==1&&(d+=1),{indexA:a,indexB:u,newIndex:d,indexPath:a.indexPath,parentPath:a.parentPath}}return null},_getRotatedRectangle(i,r,a,u){let d=Ps(u,i),g=Ps(u,r),_=a*Math.PI/180,b=Math.cos(_),k=Math.sin(_),S=(g.x-d.x)*b+(g.y-d.y)*k,V=(g.y-d.y)*b-(g.x-d.x)*k,N=S*b+d.x,de=S*k+d.y,xe=-V*k+d.x,He=V*b+d.y,Qe=Ua(u,d),ot=Ua(u,{x:N,y:de}),At=Ua(u,g),$=Ua(u,{x:xe,y:He});return[Qe,ot,At,$]},pxRadiusToMeterRadius(i,r,a){let u=r.project(a),d=L.point(u.x+i,u.y);return r.distance(r.unproject(d),a)}},ym=_m;L.PM=L.PM||{version:Ys.version,Map:Ca,Toolbar:co,Draw:hi,Edit:pi,Utils:ym,Matrix:gm,activeLang:"en",optIn:!1,initialize(i){this.addInitHooks(i)},setOptIn(i){this.optIn=!!i},addInitHooks(){function i(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(i);function r(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(r);function a(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(a);function u(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(u);function d(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(d);function g(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(g);function _(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(_);function b(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(b);function k(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(k)},reInitLayer(i){i instanceof L.LayerGroup&&i.eachLayer(r=>{this.reInitLayer(r)}),i.pm||L.PM.optIn&&i.options.pmIgnore!==!1||i.options.pmIgnore||(i instanceof L.Map?i.pm=new L.PM.Map(i):i instanceof L.Marker?i.options.textMarker?(i.pm=new L.PM.Edit.Text(i),i.pm._initTextMarker(),i.pm._createTextMarker(!1)):i.pm=new L.PM.Edit.Marker(i):i instanceof L.Circle?i.pm=new L.PM.Edit.Circle(i):i instanceof L.CircleMarker?i.pm=new L.PM.Edit.CircleMarker(i):i instanceof L.Rectangle?i.pm=new L.PM.Edit.Rectangle(i):i instanceof L.Polygon?i.pm=new L.PM.Edit.Polygon(i):i instanceof L.Polyline?i.pm=new L.PM.Edit.Line(i):i instanceof L.LayerGroup?i.pm=new L.PM.Edit.LayerGroup(i):i instanceof L.ImageOverlay&&(i.pm=new L.PM.Edit.ImageOverlay(i)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(i){let r=this._map.mouseEventToLayerPoint(i),a,u;for(let d=this._drawFirst;d;d=d.next)a=d.layer,a.options.interactive&&a._containsPoint(r)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(a))&&(u=a);u&&(L.DomEvent.fakeStop(i),this._fireEvent([u],i))}}),L.PM.initialize()})();function xb(){const e=qe(null),n=qe(null),s=D=>`${(D*100).toFixed(1)}%`,l=D=>`${((D%360+360)%360).toFixed(1)}`,h=D=>(D%360+360)%360,p=(D,z,j)=>{const _e=h(z);let ge=h(j)-_e;return ge<=0&&(ge+=360),Math.PI*D*ge/180},f=(D,z,j)=>{const _e=h(z);let ge=h(j)-_e;return ge<=0&&(ge+=360),Math.PI*D*D*ge/360},y=D=>{if("getLatLngs"in D){const j=D.getLatLngs();if(Array.isArray(j)&&j[0]){const Be=(Array.isArray(j[0])?j[0]:j).map(Ne=>[Ne.lng,Ne.lat]),ge=Ec([Be]);return Pc(ge)}}return 0},v=D=>{if("getLatLngs"in D){const j=D.getLatLngs();if(Array.isArray(j)){const _e=(Array.isArray(j[0])?j[0]:j).map(ge=>[ge.lng,ge.lat]),Be=Yo(_e);return vl(Be,{units:"meters"})}}return 0},C=D=>{if("getLatLngs"in D){const j=D.getLatLngs();if(Array.isArray(j)&&j[0]){const Be=[...(Array.isArray(j[0])?j[0]:j).map(Ne=>[Ne.lng,Ne.lat])];Be.length>0&&Be.push(Be[0]);const ge=Yo(Be);return vl(ge,{units:"meters"})}}return 0},M=D=>{const z=D;return z._mRadius?z._mRadius:z.getRadius?z.getRadius():0},P=(D,z)=>{var _e,Be;console.log("=== CALCULATE PROPERTIES START ==="),console.log("Input:",{type:z,layer:{constructor:(_e=D==null?void 0:D.constructor)==null?void 0:_e.name,_mRadius:D._mRadius,_latlng:D._latlng,options:D.options}});const j={type:z,style:D.options};try{switch(z){case"Circle":const ge=M(D);console.log("Circle radius calculation:",{_mRadius:D._mRadius,calculatedRadius:ge,getRadius:(Be=D.getRadius)==null?void 0:Be.call(D)}),j.radius=ge,j.diameter=j.radius*2,j.area=Math.PI*Math.pow(j.radius,2),j.perimeter=2*Math.PI*j.radius,j.center=D.getLatLng(),console.log("Circle properties calculated:",j);break;case"Semicircle":j.radius=M(D),j.diameter=j.radius*2,j.center=D.getLatLng(),j.startAngle=h(D.options.startAngle||0),j.stopAngle=h(D.options.stopAngle||180),j.arcLength=p(j.radius,j.startAngle,j.stopAngle),j.area=f(j.radius,j.startAngle,j.stopAngle),j.chordLength=2*j.radius*Math.abs(Math.sin((j.stopAngle-j.startAngle)*Math.PI/360)),console.log("Semicircle properties calculated:",j);break;case"Rectangle":case"Polygon":j.area=y(D),j.perimeter=C(D),console.log("Rectangle/Polygon properties calculated:",j);break;case"Line":case"Polyline":if(j.length=v(D),D.elevation){const Ne=D.elevation.gain,Ue=j.length;j.slope=Ne/Ue}console.log("Line/Polyline properties calculated:",j);break}}catch(ge){console.error("Error calculating properties:",ge)}return console.log("=== CALCULATE PROPERTIES END ==="),console.log("Final properties:",j),j},G=D=>{var z,j,_e,Be,ge,Ne;if(console.log("=== UPDATE SELECTED SHAPE START ==="),console.log("Input shape:",{type:D==null?void 0:D.type,properties:D==null?void 0:D.properties,layer:D!=null&&D.layer?{type:D.layer.constructor.name,options:D.layer.options,_mRadius:D.layer._mRadius,_latlng:D.layer._latlng,bounds:(j=(z=D.layer).getBounds)==null?void 0:j.call(z)}:{type:(_e=D==null?void 0:D.constructor)==null?void 0:_e.name,options:D==null?void 0:D.options,_mRadius:D==null?void 0:D._mRadius,_latlng:D==null?void 0:D._latlng,bounds:(Be=D==null?void 0:D.getBounds)==null?void 0:Be.call(D)}}),(ge=e.value)!=null&&ge.off&&e.value.off("properties:updated"),e.value=D,D){D.on&&(console.log("Adding properties:updated event listener"),D.on("properties:updated",fe=>{var pe;console.log("Properties updated event received:",{event:fe,shape:{_mRadius:fe.shape._mRadius,_latlng:fe.shape._latlng,properties:fe.shape.properties,constructor:fe.shape.constructor.name}});const Pe=fe.shape,F=((pe=Pe.properties)==null?void 0:pe.type)||"unknown";console.log("Updating properties for shape:",{type:F,_mRadius:Pe._mRadius,_latlng:Pe._latlng,currentProperties:Pe.properties});const X=P(Pe,F);console.log("Recalculated properties:",X),n.value={...X},Pe.properties={...X},console.log("Updated shapeProperties:",n.value)}));const Ue=P(D.layer||D,D.type||((Ne=D.properties)==null?void 0:Ne.type));console.log("Initial calculated properties:",Ue),n.value={...Ue},D.layer?D.layer.properties={...Ue}:D.properties={...Ue},console.log("Initial shapeProperties set:",n.value)}else console.log("No shape provided, clearing properties"),n.value=null;console.log("=== UPDATE SELECTED SHAPE END ===")},W=Ct(()=>{if(!n.value)return null;const D={...n.value};return D.area&&(D.areaFormatted=`${(D.area/1e4).toFixed(2)} ha`),D.length&&(D.lengthFormatted=`${D.length.toFixed(1)} m`),D.arcLength&&(D.arcLengthFormatted=`${D.arcLength.toFixed(1)} m`),D.perimeter&&(D.perimeterFormatted=`${(D.perimeter/1e3).toFixed(2)} km`),D.radius&&(D.radiusFormatted=`${D.radius.toFixed(1)} m`),D.diameter&&(D.diameterFormatted=`${D.diameter.toFixed(1)} m`),D.width&&(D.widthFormatted=`${D.width.toFixed(1)} m`),D.height&&(D.heightFormatted=`${D.height.toFixed(1)} m`),D.chordLength&&(D.chordLengthFormatted=`${D.chordLength.toFixed(1)} m`),D.slope&&(D.slopeFormatted=s(D.slope)),D.startAngle&&(D.startAngleFormatted=l(D.startAngle)),D.stopAngle&&(D.stopAngleFormatted=l(D.stopAngle)),D});return{selectedShape:e,shapeProperties:n,formattedProperties:W,updateSelectedShape:G,calculateProperties:P,normalizeAngle:h,calculateArcLength:p,calculateSectorArea:f}}class Ds extends st.Polygon{constructor(s,l,h=0,p=180,f={}){super([[]],{...f,pmIgnore:!1,interactive:!0,className:"leaflet-semicircle"});ut(this,"center");ut(this,"radius");ut(this,"startAngle");ut(this,"stopAngle");ut(this,"numPoints");ut(this,"properties");ut(this,"pm");this.center=s,this.radius=l,this.startAngle=this.normalizeAngle(h),this.stopAngle=this.normalizeAngle(p),this.numPoints=64,this.properties={type:"Semicircle",radius:this.radius,startAngle:this.startAngle,stopAngle:this.stopAngle,style:{...f,startAngle:this.startAngle,stopAngle:this.stopAngle}},this.on("pm:enable",y=>{var v;this.pm&&(this.pm._layers=[],this.pm._markers=[],(v=this.pm._markerGroup)==null||v.clearLayers())}),this.on("pm:vertexadded",y=>{var v;this.pm&&((v=this.pm._markerGroup)==null||v.clearLayers())}),this.on("add",()=>{this._map&&(this.updateGeometry(),this.pm&&this.pm.enable({allowSelfIntersection:!1,preventMarkerRemoval:!0}))})}normalizeAngle(s){return(s%360+360)%360}calculateArcPoints(){if(!this._map)return[];const s=[],l=(this.stopAngle-this.startAngle+360)%360;s.push(this.center);for(let h=0;h<=this.numPoints;h++){const f=(this.startAngle+l*h/this.numPoints)*Math.PI/180,y=this.radius*Math.cos(f),C=this.radius*Math.sin(f)/111319.9,M=y/(111319.9*Math.cos(this.center.lat*Math.PI/180)),P=st.latLng(this.center.lat+C,this.center.lng+M);s.push(P)}return s.push(this.center),s}setRadius(s){return s<=0?this:(this.radius=s,this.properties.radius=s,this.updateGeometry(),this)}setAngles(s,l){return this.startAngle=this.normalizeAngle(s),this.stopAngle=this.normalizeAngle(l),this.properties.startAngle=this.startAngle,this.properties.stopAngle=this.stopAngle,this.properties.style.startAngle=this.startAngle,this.properties.style.stopAngle=this.stopAngle,this.updateGeometry(),this}setOpeningAngle(s){return s<0||s>360?this:(this.stopAngle=this.normalizeAngle(this.startAngle+s),this.updateGeometry(),this)}setCenter(s){return!s.lat||!s.lng?this:(this.center=s,this.updateGeometry(),this)}getCenter(){return this.center}getRadius(){return this.radius}getStartAngle(){return this.startAngle}getStopAngle(){return this.stopAngle}getOpeningAngle(){return(this.stopAngle-this.startAngle+360)%360}updateGeometry(){if(!this._map)return;const s=this.calculateArcPoints();s.length>0&&this.setLatLngs([s])}toGeoJSON(){const s=super.toGeoJSON();return{...s,properties:{...s.properties,type:"Semicircle",radius:this.radius,startAngle:this.startAngle,stopAngle:this.stopAngle}}}}const bl=(e,n)=>{if(!e||typeof e!="string"||!e.startsWith("#"))return`rgba(0, 0, 0, ${n})`;const s=parseInt(e.slice(1,3),16),l=parseInt(e.slice(3,5),16),h=parseInt(e.slice(5,7),16);return`rgba(${s}, ${l}, ${h}, ${n})`},Ad=(e,n)=>{e.style.fontSize=n.fontSize,e.style.color=n.color,e.style.backgroundColor=bl(n.backgroundColor,n.backgroundOpacity),n.hasBorder?e.style.border=`${n.borderWidth} solid ${bl(n.borderColor,n.borderOpacity)}`:e.style.border="none",e.style.padding=n.padding,e.style.borderRadius=n.borderRadius},ki=e=>{document.querySelectorAll(".drawing-help-message").forEach(l=>l.remove());const s=st.DomUtil.create("div","drawing-help-message");return s.innerHTML=e,s.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(s),s};function nc(e,n,s){const l=156543.03392*Math.cos(n*Math.PI/180)/Math.pow(2,s);return e/l}const ti=(e,n="m",s="")=>{let l,h;return n==="m"?e>=1e4?(l=(e/1e4).toFixed(2),h="ha"):(l=e.toFixed(2),h="m"):n==="m"?e>=1e3?(l=(e/1e3).toFixed(2),h="km"):(l=e.toFixed(2),h="m"):(l=e.toFixed(2),h=n),s?`${s}: ${l} ${h}`:`${l} ${h}`},wb=e=>`${((e%360+360)%360).toFixed(1)}`,Td=(e,n,s)=>{const l=s*Math.PI/180,h=Math.cos(l),p=Math.sin(l),f=e.x-n.x,y=e.y-n.y;return new st.Point(n.x+f*h-y*p,n.y+f*p+y*h)};function Lb(){const e=qe(null),n=qe(null),s=qe(""),l=qe(null),h=qe(!1),p=(F,X="Double-cliquez pour diter")=>{const pe={fontSize:"14px",color:"#000000",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderWidth:"1px",borderOpacity:1,padding:"5px 10px",borderRadius:"3px",hasBorder:!0,rotation:0,physicalSize:2},ee=(me,Je)=>{var ke;const et=((ke=e.value)==null?void 0:ke.getZoom())||14,nt=F.lat,Xe=nc(Je.physicalSize,nt,et);return`<div class="text-container" style="width:${Xe}px;height:${Xe}px;transform:rotate(${Je.rotation}deg)">
        <div class="text-annotation" style="font-size:${Xe*.2}px;color:${Je.color};background-color:${bl(Je.backgroundColor,Je.backgroundOpacity)};border:${Je.hasBorder?Je.borderWidth+" solid "+bl(Je.borderColor,Je.borderOpacity):"none"};padding:${Je.padding};border-radius:${Je.borderRadius}">${me}</div>
        <div class="text-controls"><div class="control-button rotate"></div><div class="control-button move"></div></div>
      </div>`},De=()=>{if(!e.value)return;const me=e.value.getZoom(),Je=ie.getLatLng().lat;nc(ie.properties.style.physicalSize,Je,me);const et=ie.getIcon(),nt={html:ee(ie.properties.text,ie.properties.style),className:et.options.className};ie.setIcon(st.divIcon(nt))},Ae=st.divIcon({html:ee(X,pe),className:"text-container",iconSize:[40,40],iconAnchor:[20,20]}),ie=st.marker(F,{icon:Ae,draggable:!1,pmIgnore:!0});ie.properties={type:"text",text:X,style:{...pe}},e.value&&(e.value.on("zoomend",De),ie.on("remove",()=>{var me;(me=e.value)==null||me.off("zoomend",De)})),De();let Le=!1,Re=!1,Ee=0,Z=0;const te=me=>{if(!e.value)return;const Je=me.target;if(Je.classList.contains("rotate")){Le=!0;const et=ie.getLatLng(),nt=e.value.mouseEventToLatLng(me);Ee=Math.atan2(nt.lat-et.lat,nt.lng-et.lng)*180/Math.PI,Z=ie.properties.style.rotation||0}else Je.classList.contains("move")&&(Re=!0,e.value.latLngToLayerPoint(ie.getLatLng()));document.addEventListener("mousemove",re),document.addEventListener("mouseup",be)},re=me=>{if(!(!Re||!e.value)){if(Le){const Je=ie.getLatLng(),et=e.value.mouseEventToLatLng(me),nt=Math.atan2(et.lat-Je.lat,et.lng-Je.lng)*180/Math.PI,Xe=(Z+(nt-Ee))%360;ie.properties.style.rotation=Xe;const ke=ie.getIcon(),Ke={html:ee(ie.properties.text,ie.properties.style),className:ke.options.className};ie.setIcon(st.divIcon(Ke))}else if(Re){const Je=me,et=e.value.mouseEventToLatLng(Je);ie.setLatLng(et)}}},be=()=>{Le=!1,Re=!1,document.removeEventListener("mousemove",re),document.removeEventListener("mouseup",be)};return ie.on("add",()=>{const me=ie.getElement();me&&me.querySelectorAll(".control-button").forEach(et=>{et.addEventListener("mousedown",te)})}),ie.on("remove",()=>{const me=ie.getElement();me&&me.querySelectorAll(".control-button").forEach(et=>{et.removeEventListener("mousedown",te)})}),ie.on("dblclick",me=>{var Ke;st.DomEvent.stopPropagation(me);const Je=(Ke=ie.getElement())==null?void 0:Ke.querySelector(".text-annotation");if(!Je)return;Je.contentEditable="true",Je.focus(),Je.classList.add("editing");const et=window.getSelection(),nt=document.createRange();nt.selectNodeContents(Je),et==null||et.removeAllRanges(),et==null||et.addRange(nt);const Xe=()=>{Je.contentEditable="false",Je.classList.remove("editing");const Ze=Je.innerText.trim();if(Ze){ie.properties.text=Ze;const Ye=ie.getIcon(),tt={html:ee(Ze,ie.properties.style),className:Ye.options.className};ie.setIcon(st.divIcon(tt))}Je.removeEventListener("blur",Xe),Je.removeEventListener("keydown",ke)},ke=Ze=>{Ze.key==="Enter"&&!Ze.shiftKey&&(Ze.preventDefault(),Xe())};Je.addEventListener("blur",Xe),Je.addEventListener("keydown",ke)}),ie},f=(F,X)=>{const pe=st.DomUtil.create("div","measure-tooltip");if(pe.innerHTML=X,pe.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(pe),e.value){const ee=e.value.latLngToContainerPoint(F);pe.style.left=`${ee.x+10}px`,pe.style.top=`${ee.y-25}px`}return pe},y=(F,X,pe)=>{F.on("mouseover",()=>{const ee=f(F.getLatLng(),pe());F.measureDiv=ee}),F.on("mousemove",ee=>{if(F.measureDiv&&e.value){const De=e.value.latLngToContainerPoint(ee.latlng);F.measureDiv.style.left=`${De.x+10}px`,F.measureDiv.style.top=`${De.y-25}px`}}),F.on("mouseout",()=>{F.measureDiv&&(F.measureDiv.remove(),F.measureDiv=void 0)})};xb();let v=[];const C=()=>{v.forEach(F=>{F&&F.remove&&("measureDiv"in F&&F.measureDiv&&(F.measureDiv.remove(),F.measureDiv=void 0),n.value&&n.value.removeLayer(F),F.remove())}),v=[],document.querySelectorAll(".measure-tooltip").forEach(F=>{F.remove()})},M=(F,X="#2563EB")=>{const pe=st.circleMarker(F,{radius:6,color:X,fillColor:X,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return n.value&&n.value.addLayer(pe),pe},P=(F,X)=>{var ee,De,Ae,ie,Le,Re;console.log("=== CALCULATING SHAPE PROPERTIES START ==="),console.log("Input layer:",{type:X,instanceof:{Circle:F instanceof st.Circle,Rectangle:F instanceof st.Rectangle,Polygon:F instanceof st.Polygon,Polyline:F instanceof st.Polyline,CircleArc:F instanceof Ds},options:F.options});const pe={type:X,style:F.options||{}};try{if(F instanceof st.Circle){const Ee=F.getRadius(),Z=F.getLatLng();pe.radius=Ee,pe.diameter=Ee*2,pe.area=Math.PI*Math.pow(Ee,2),pe.perimeter=2*Math.PI*Ee,pe.center=Z,pe.surfaceInterieure=pe.area,pe.surfaceExterieure=pe.area,console.log("Circle properties calculated:",pe)}else if(F instanceof Ds){const Ee=F.getRadius(),Z=F.getCenter(),te=F.getStartAngle(),re=F.getStopAngle(),be=F.getOpeningAngle();pe.radius=Ee,pe.diameter=Ee*2,pe.area=Math.PI*Math.pow(Ee,2)*be/360,pe.arcLength=2*Math.PI*Ee*be/360,pe.perimeter=pe.arcLength+2*Ee,pe.center=Z,pe.startAngle=te,pe.stopAngle=re,pe.openingAngle=be,pe.surfaceInterieure=pe.area,pe.surfaceExterieure=pe.area,console.log("CircleArc properties calculated:",pe)}else if(F instanceof st.Rectangle){const Ee=F.getBounds(),Z=Ee.getNorthEast(),te=Ee.getSouthWest(),re=Mc([te.lng,te.lat],[Z.lng,te.lat],{units:"meters"}),be=Mc([te.lng,te.lat],[te.lng,Z.lat],{units:"meters"});pe.width=re,pe.height=be,pe.area=re*be,pe.perimeter=2*(re+be),pe.surfaceInterieure=pe.area,pe.surfaceExterieure=pe.area,pe.dimensions={width:re,height:be},console.log("Rectangle properties calculated:",pe)}else if(F instanceof st.Polygon){const Z=F.getLatLngs()[0].map(re=>[re.lng,re.lat]);Z.push(Z[0]);const te=Ec([Z]);pe.area=Pc(te),pe.perimeter=vl(Yo([...Z]),{units:"meters"}),pe.surfaceInterieure=pe.area,pe.surfaceExterieure=pe.area,console.log("Polygon properties calculated:",pe)}else if(F instanceof st.Polyline&&!(F instanceof st.Polygon)){const Z=F.getLatLngs().map(be=>[be.lng,be.lat]),te=Yo(Z);pe.length=vl(te,{units:"meters"});const re=10;pe.surfaceInfluence=pe.length*re,pe.dimensions={width:re},console.log("Polyline properties calculated:",pe)}pe.style={...pe.style,color:((ee=F.options)==null?void 0:ee.color)||"#3388ff",weight:((De=F.options)==null?void 0:De.weight)||3,opacity:((Ae=F.options)==null?void 0:Ae.opacity)||1,fillColor:((ie=F.options)==null?void 0:ie.fillColor)||"#3388ff",fillOpacity:((Le=F.options)==null?void 0:Le.fillOpacity)||.2,dashArray:((Re=F.options)==null?void 0:Re.dashArray)||""}}catch(Ee){console.error("Error calculating shape properties:",Ee)}return console.log("=== CALCULATING SHAPE PROPERTIES END ==="),console.log("Final properties:",pe),pe},G=(F,X=2)=>{var ie;if(!e.value){console.warn("Map is not available for text size update");return}const pe=e.value.getZoom(),ee=F.getLatLng().lat,De=nc(X,ee,pe),Ae=(ie=F.getElement())==null?void 0:ie.querySelector(".text-annotation");Ae&&(F.properties.style.fontSize=`${De}px`,F.properties.physicalWidth=X,F.properties.physicalHeight=X,Ad(Ae,F.properties.style))},W=(F,X,pe)=>{const ee=st.map(F).setView(X,pe);e.value=ee,st.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors"}).addTo(ee);const De=new st.FeatureGroup;return De.addTo(ee),n.value=De,ee.pm.addControls({position:"topleft",drawMarker:!1,drawPolyline:!1,drawRectangle:!1,drawPolygon:!1,drawCircle:!1,drawCircleMarker:!1,drawText:!1,editMode:!1,dragMode:!1,cutPolygon:!1,removalMode:!1}),ee.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:De,templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),ee.on("pm:drawstart",Ae=>{h.value=!0,Ae.shape==="Circle"&&s.value==="Semicircle"&&(ee.getContainer().style.cursor="crosshair")}),ee.on("pm:drawend",()=>{h.value=!1,ee.getContainer().style.cursor="",l.value&&ki("Cliquez sur la forme pour afficher les points de contrle")}),ee.on("pm:create",async Ae=>{var Re,Ee,Z;const ie=Ae.layer;(Re=n.value)==null||Re.addLayer(ie);let Le="unknown";if(ie instanceof st.Circle?Le=s.value==="Semicircle"?"Semicircle":"Circle":ie instanceof st.Rectangle?Le="Rectangle":ie instanceof st.Polygon?Le="Polygon":ie instanceof st.Polyline&&!(ie instanceof st.Polygon)&&(Le="Line"),ie.properties=P(ie,Le),l.value=ie,Le==="Semicircle"){const te=ie.getLatLng(),re=ie.getRadius();(Ee=n.value)==null||Ee.removeLayer(ie);const be=new Ds(te,re);be.properties=P(be,"Semicircle"),(Z=n.value)==null||Z.addLayer(be),l.value=be,Pe(be)}else ie instanceof st.Circle?ge(ie):ie instanceof st.Rectangle?Ne(ie):ie instanceof st.Polygon?fe(ie):ie instanceof st.Polyline&&!(ie instanceof st.Polygon)&&Ue(ie);ki("Cliquez sur la forme pour afficher les points de contrle")}),ee.on("click",Ae=>{Ae.target===ee&&(C(),l.value=null,document.querySelectorAll(".drawing-help-message").forEach(Le=>Le.remove()))}),De.on("click",Ae=>{var Le,Re,Ee;st.DomEvent.stopPropagation(Ae);const ie=Ae.layer;C(),(Le=document.querySelector(".drawing-help-message"))==null||Le.remove(),l.value=ie,ie instanceof Ds||((Re=ie.properties)==null?void 0:Re.type)==="Semicircle"?(ie.pm&&(ie.pm._layers=[],ie.pm._markers=[],(Ee=ie.pm._markerGroup)==null||Ee.clearLayers()),Pe(ie)):ie instanceof st.Circle?ge(ie):ie instanceof st.Rectangle?Ne(ie):ie instanceof st.Polygon?fe(ie):ie instanceof st.Polyline&&!(ie instanceof st.Polygon)&&Ue(ie)}),ee.on("pm:edit",Ae=>{var Le,Re;console.log("=== PM:EDIT EVENT START ==="),console.log("Event details:",Ae);const ie=Ae.layer;if(ie){console.log("Layer before update:",{type:(Le=ie.properties)==null?void 0:Le.type,properties:ie.properties,options:ie.options,_mRadius:ie._mRadius,_latlng:ie._latlng,constructor:ie.constructor.name});let Ee="unknown";ie instanceof st.Circle?(Ee=((Re=ie.properties)==null?void 0:Re.type)==="Semicircle"?"Semicircle":"Circle",console.log("Circle detected with radius:",ie.getRadius())):ie instanceof st.Rectangle?Ee="Rectangle":ie instanceof st.Polygon?Ee="Polygon":ie instanceof st.Polyline&&!(ie instanceof st.Polygon)&&(Ee="Line"),console.log("Detected shape type:",Ee);const Z=P(ie,Ee);if(console.log("Newly calculated properties:",Z),l.value&&l.value===ie){console.log("Updating selected shape...",{currentRadius:ie._mRadius,newRadius:Z.radius});const te={...Z};ie.properties=te,l.value=null,Fs(()=>{l.value=ie}),console.log("Emitting properties:updated event with:",{shape:{_mRadius:ie._mRadius,_latlng:ie._latlng,properties:te,constructor:ie.constructor.name}}),ie.fire("properties:updated",{shape:ie,properties:te}),console.log("Shape properties after update:",{layerRadius:ie._mRadius,propertiesRadius:ie.properties.radius,fullProperties:ie.properties})}Ee==="Semicircle"?Pe(ie):ie instanceof st.Circle?ge(ie):ie instanceof st.Rectangle?Ne(ie):ie instanceof st.Polygon?fe(ie):ie instanceof st.Polyline&&Ue(ie),ki("Utilisez les points de contrle pour modifier la forme")}console.log("=== PM:EDIT EVENT END ===")}),ee.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(Ae=>Ae.remove()),ki("Dplacez la forme  l'endroit souhait")}),ee.on("pm:dragend",Ae=>{var ie;if(Ae.layer&&l.value===Ae.layer){const Le=Ae.layer,Re=((ie=Le.properties)==null?void 0:ie.type)||"unknown",Ee=P(Le,Re);Le.properties={...Ee},l.value=null,Fs(()=>{l.value=Le}),Le.fire("properties:updated",{shape:Le,properties:Le.properties})}setTimeout(()=>{ki("Cliquez sur la forme pour afficher les points de contrle")},100)}),ee.on("pm:remove",()=>{var Ae;(Ae=document.querySelector(".drawing-help-message"))==null||Ae.remove()}),ee.on("pm:select",Ae=>{var Le;const ie=Ae.layer;document.querySelectorAll(".drawing-help-message").forEach(Re=>Re.remove()),ie instanceof Ds||((Le=ie.properties)==null?void 0:Le.type)==="Semicircle"?ki(`Points de contrle : <span style="color: #059669"></span> Ajuster le rayon, <span style="color: #2563EB"></span> et <span style="color: #DC2626"></span> Modifier l'ouverture du demi-cercle`):ki("Utilisez les points de contrle pour modifier la forme")}),ee.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(Ae=>Ae.remove())}),ee},D=()=>{if(!e.value||!n.value)return;const F=n.value.getBounds();F.isValid()&&e.value.fitBounds(F,{padding:[50,50],maxZoom:19})},z=F=>{if(e.value){console.log("=== SETTING DRAWING TOOL START ==="),console.log("Current tool:",s.value),console.log("New tool:",F),document.querySelectorAll(".drawing-help-message").forEach(X=>X.remove());try{console.log("Disabling all modes...");const X=e.value.pm;X.globalEditModeEnabled()&&X.disableGlobalEditMode(),X.globalDragModeEnabled()&&X.disableGlobalDragMode(),X.globalRemovalModeEnabled()&&X.disableGlobalRemovalMode(),X.disableDraw(),C()}catch(X){console.error("Error disabling modes:",X)}if(s.value=F,console.log("Tool set to:",s.value),!F){console.log("No tool selected, clearing control points"),C();return}setTimeout(()=>{var X,pe,ee,De,Ae,ie,Le;try{switch(console.log("Enabling tool:",F),F){case"Circle":ki("Cliquez et maintenez pour dessiner un cercle, relchez pour terminer"),(X=e.value)==null||X.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Semicircle":ki("Cliquez et maintenez pour dessiner un demi-cercle, relchez pour terminer"),(pe=e.value)==null||pe.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Rectangle":ki("Cliquez et maintenez pour dessiner un rectangle, relchez pour terminer"),(ee=e.value)==null||ee.pm.enableDraw("Rectangle",{finishOn:"mouseup"});break;case"Polygon":ki("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(De=e.value)==null||De.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Line":ki("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(Ae=e.value)==null||Ae.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Text":if(ki("Cliquez pour ajouter du texte, double-cliquez pour diter"),e.value){const Re=Ee=>{if(!e.value||!n.value)return;const Z=p(Ee.latlng);n.value.addLayer(Z),l.value=Z,e.value.off("click",Re),z("")};e.value.on("click",Re)}break;case"drag":ki("Cliquez et maintenez une forme pour la dplacer"),(ie=e.value)==null||ie.pm.enableGlobalDragMode();break;case"delete":ki("Cliquez sur une forme pour la supprimer"),(Le=e.value)==null||Le.pm.enableGlobalRemovalMode();break}console.log("Tool enabled successfully")}catch(Re){console.error("Error enabling tool:",Re)}},100),console.log("=== SETTING DRAWING TOOL END ===")}},j=F=>{var pe;if(!l.value)return;const X=l.value;if(X.properties=X.properties||{},X.properties.style=X.properties.style||{},X.properties.style={...X.properties.style,...F},X.properties.type==="text"){const ee=X.properties._textLayer,De=(pe=ee==null?void 0:ee.getElement())==null?void 0:pe.querySelector(".text-annotation");De&&Ad(De,X.properties.style);const Ae={color:F.borderColor||X.properties.style.borderColor,weight:parseInt(F.borderWidth||X.properties.style.borderWidth),opacity:F.borderOpacity??X.properties.style.borderOpacity};"setStyle"in X&&X.setStyle(Ae)}else{const ee={};F.fillColor&&(ee.fillColor=F.fillColor),F.fillOpacity!==void 0&&(ee.fillOpacity=F.fillOpacity),F.strokeColor&&(ee.color=F.strokeColor),F.strokeOpacity!==void 0&&(ee.opacity=F.strokeOpacity),F.strokeWidth!==void 0&&(ee.weight=F.strokeWidth),F.dashArray&&(ee.dashArray=F.dashArray),"setStyle"in X&&X.setStyle(ee)}},_e=F=>{if(!l.value)return;const X=l.value;X.properties={...X.properties,...F},F.radius&&X instanceof st.Circle&&X.setRadius(F.radius)},Be=(F,X)=>st.latLng((F.lat+X.lat)/2,(F.lng+X.lng)/2),ge=F=>{if(!e.value||!n.value)return;C();const X=F.getLatLng(),pe=F.getRadius(),ee=M(X,"#059669");v.push(ee),y(ee,F,()=>{const De=Math.PI*pe*pe;return[ti(pe,"m","Rayon"),ti(De,"m","Surface")].join("<br>")}),ee.on("mousedown",De=>{if(!e.value)return;st.DomEvent.stopPropagation(De),e.value.dragging.disable(),C(),v=[ee];let Ae=!0;const ie=Re=>{if(!Ae)return;F.setLatLng(Re.latlng),ee.setLatLng(Re.latlng);const Ee=P(F,"Circle");F.properties={...Ee},F.fire("properties:updated",{shape:F,properties:F.properties})},Le=()=>{Ae=!1,e.value&&(e.value.off("mousemove",ie),document.removeEventListener("mouseup",Le),e.value.dragging.enable(),ge(F))};e.value.on("mousemove",ie),document.addEventListener("mouseup",Le)}),[0,45,90,135,180,225,270,315].forEach(De=>{const Ae=De*Math.PI/180,ie=st.latLng(X.lat+pe/111319.9*Math.sin(Ae),X.lng+pe/(111319.9*Math.cos(X.lat*Math.PI/180))*Math.cos(Ae)),Le=M(ie,"#2563EB");v.push(Le),y(Le,F,()=>{const Re=X.distanceTo(Le.getLatLng());return ti(Re,"m","Distance du centre")}),Le.on("mousedown",Re=>{if(!e.value)return;st.DomEvent.stopPropagation(Re),e.value.dragging.disable(),C(),v=[Le];let Ee=!0;const Z=re=>{if(!Ee)return;const be=X.distanceTo(re.latlng);F.setRadius(be),Le.setLatLng(re.latlng);const me=P(F,"Circle");F.properties={...me},F.fire("properties:updated",{shape:F,properties:F.properties})},te=()=>{Ee=!1,e.value&&(e.value.off("mousemove",Z),document.removeEventListener("mouseup",te),e.value.dragging.enable(),ge(F))};e.value.on("mousemove",Z),document.addEventListener("mouseup",te)})})},Ne=F=>{if(!e.value||!n.value)return;C();const X=F.getBounds(),pe=[X.getNorthWest(),X.getNorthEast(),X.getSouthEast(),X.getSouthWest()];pe.forEach((Ae,ie)=>{const Le=M(Ae,"#059669");v.push(Le),y(Le,F,()=>{const Re=F.getBounds(),Ee=Re.getNorthEast().distanceTo(Re.getNorthWest()),Z=Re.getNorthWest().distanceTo(Re.getSouthWest()),te=Ee*Z;return[ti(Ee,"m","Largeur"),ti(Z,"m","Hauteur"),ti(te,"m","Surface")].join("<br>")}),Le.on("mousedown",Re=>{if(!e.value)return;st.DomEvent.stopPropagation(Re),e.value.dragging.disable();let Ee=!0;const Z=re=>{if(!Ee)return;pe[ie]=re.latlng;const be=st.latLngBounds([[Math.min(pe[0].lat,pe[2].lat),Math.min(pe[0].lng,pe[2].lng)],[Math.max(pe[0].lat,pe[2].lat),Math.max(pe[0].lng,pe[2].lng)]]);F.setBounds(be),Le.setLatLng(re.latlng)},te=()=>{Ee=!1,e.value&&(e.value.off("mousemove",Z),document.removeEventListener("mouseup",te),e.value.dragging.enable(),Ne(F))};e.value.on("mousemove",Z),document.addEventListener("mouseup",te)})});const ee=X.getCenter(),De=M(st.latLng(ee.lat,ee.lng+2e-4),"#2563EB");v.push(De),De.on("mousedown",Ae=>{if(!e.value)return;st.DomEvent.stopPropagation(Ae),e.value.dragging.disable();const ie=X.getCenter();let Le=Math.atan2(Ae.latlng.lat-ie.lat,Ae.latlng.lng-ie.lng)*180/Math.PI,Re=!0;const Ee=te=>{if(!Re||!e.value)return;const re=Math.atan2(te.latlng.lat-ie.lat,te.latlng.lng-ie.lng)*180/Math.PI,be=re-Le,me=e.value.latLngToLayerPoint(ie),et=pe.map(Xe=>e.value.latLngToLayerPoint(Xe)).map(Xe=>e.value.layerPointToLatLng(Td(Xe,me,be)));F.setBounds(st.latLngBounds(et));const nt=e.value.layerPointToLatLng(Td(e.value.latLngToLayerPoint(De.getLatLng()),me,be));De.setLatLng(nt),Le=re,pe.forEach((Xe,ke)=>{pe[ke]=et[ke]})},Z=()=>{Re=!1,e.value&&(e.value.off("mousemove",Ee),document.removeEventListener("mouseup",Z),e.value.dragging.enable(),Ne(F))};e.value.on("mousemove",Ee),document.addEventListener("mouseup",Z)}),ki("Utilisez le point bleu pour faire pivoter le rectangle")},Ue=F=>{if(!e.value||!n.value)return;C();const X=F.getLatLngs();X.forEach((ee,De)=>{const Ae=M(ee,"#059669");v.push(Ae),y(Ae,F,()=>{const ie=X.reduce((Re,Ee,Z)=>Z===0?0:Re+Ee.distanceTo(X[Z-1]),0);let Le=X.slice(0,De+1).reduce((Re,Ee,Z)=>Z===0?0:Re+Ee.distanceTo(X[Z-1]),0);return[ti(Le,"m","Distance depuis le dbut"),ti(ie,"m","Longueur totale")].join("<br>")}),Ae.on("mousedown",ie=>{if(!e.value)return;st.DomEvent.stopPropagation(ie),e.value.dragging.disable();let Le=!0;const Re=Z=>{Le&&(X[De]=Z.latlng,F.setLatLngs(X),Ae.setLatLng(Z.latlng),pe())},Ee=()=>{Le=!1,e.value&&(e.value.off("mousemove",Re),document.removeEventListener("mouseup",Ee),e.value.dragging.enable(),Ue(F))};e.value.on("mousemove",Re),document.addEventListener("mouseup",Ee)})});const pe=()=>{v.slice(X.length).forEach(ee=>{n.value&&n.value.removeLayer(ee)}),v=v.slice(0,X.length);for(let ee=0;ee<X.length-1;ee++){const De=Be(X[ee],X[ee+1]),Ae=M(De,"#2563EB");v.push(Ae),y(Ae,F,()=>{const ie=X[ee].distanceTo(X[ee+1]),Le=X.reduce((Ee,Z,te)=>te===0?0:Ee+Z.distanceTo(X[te-1]),0),Re=X.slice(0,ee+1).reduce((Ee,Z,te)=>te===0?0:Ee+Z.distanceTo(X[te-1]),0)+ie/2;return[ti(ie,"m","Longueur du segment"),ti(ie/2,"m","Demi-segment"),ti(Re,"m","Distance depuis le dbut"),ti(Le,"m","Longueur totale")].join("<br>")}),Ae.on("mousedown",ie=>{if(!e.value)return;st.DomEvent.stopPropagation(ie),e.value.dragging.disable();let Le=!0;const Re=Z=>{Le&&(X.splice(ee+1,0,Z.latlng),F.setLatLngs(X),Ue(F))},Ee=()=>{Le=!1,e.value&&(e.value.off("mousemove",Re),document.removeEventListener("mouseup",Ee),e.value.dragging.enable())};e.value.on("mousemove",Re),document.addEventListener("mouseup",Ee)})}};pe()},fe=F=>{if(!e.value||!n.value)return;C();const X=F.getLatLngs()[0],pe=X.map(Le=>[Le.lng,Le.lat]);pe.push(pe[0]);const ee=Ec([pe]),De=Pc(ee),Ae=X.reduce((Le,Re,Ee)=>{const Z=X[(Ee+1)%X.length];return Le+Re.distanceTo(Z)},0);X.forEach((Le,Re)=>{const Ee=M(Le,"#059669");v.push(Ee),y(Ee,F,()=>{const Z=X[(Re-1+X.length)%X.length],te=X[(Re+1)%X.length],re=Le.distanceTo(Z),be=Le.distanceTo(te);return[ti(re,"m","Distance au point prcdent"),ti(be,"m","Distance au point suivant"),ti(Ae,"m","Primtre total"),ti(De,"m","Surface")].join("<br>")}),Ee.on("mousedown",Z=>{if(st.DomEvent.stopPropagation(Z),!e.value)return;e.value.dragging.disable();let te=!0;const re=me=>{te&&(st.DomEvent.stopPropagation(me),X[Re]=me.latlng,F.setLatLngs([X]),Ee.setLatLng(me.latlng),ie())},be=()=>{te=!1,e.value&&(e.value.off("mousemove",re),document.removeEventListener("mouseup",be),e.value.dragging.enable())};e.value.on("mousemove",re),document.addEventListener("mouseup",be)})});const ie=()=>{const Le=F.getLatLngs()[0];v.slice(Le.length).forEach(Re=>{n.value&&n.value.removeLayer(Re)}),v=v.slice(0,Le.length);for(let Re=0;Re<Le.length;Re++){const Ee=Le[(Re+1)%Le.length],Z=Be(Le[Re],Ee),te=M(Z,"#2563EB");v.push(te),y(te,F,()=>{const re=Le[Re].distanceTo(Ee);return[ti(re,"m","Longueur du segment"),ti(Ae,"m","Primtre total"),ti(De,"m","Surface")].join("<br>")})}};ie()},Pe=F=>{if(!e.value||!n.value)return;C();const X=F.getCenter(),pe=F.getRadius(),ee=F.getStartAngle(),De=F.getStopAngle(),Ae=M(X,"#059669");v.push(Ae),y(Ae,F,()=>{const te=Math.PI*pe*pe/2;return[ti(pe,"m","Rayon"),ti(te,"m","Surface")].join("<br>")});const Le=(ee+De)/2*Math.PI/180,Re=st.latLng(X.lat+pe/111319.9*Math.sin(Le),X.lng+pe/(111319.9*Math.cos(X.lat*Math.PI/180))*Math.cos(Le)),Ee=M(Re,"#2563EB");v.push(Ee),y(Ee,F,()=>ti(pe,"m","Rayon")),[ee,De].forEach((te,re)=>{const be=te*Math.PI/180,me=st.latLng(X.lat+pe/111319.9*Math.sin(be),X.lng+pe/(111319.9*Math.cos(X.lat*Math.PI/180))*Math.cos(be)),Je=M(me,"#DC2626");v.push(Je),y(Je,F,()=>`Angle: ${wb(te)}`),Je.on("mousedown",et=>{if(!e.value)return;st.DomEvent.stopPropagation(et),e.value.dragging.disable();let nt=!0;const Xe=Ke=>{if(!nt)return;const Ye=((Math.atan2(Ke.latlng.lat-X.lat,Ke.latlng.lng-X.lng)*180/Math.PI+270)%360+360)%360;re===0?F.setAngles(Ye,De):F.setAngles(ee,Ye),Je.setLatLng(Ke.latlng),Pe(F)},ke=()=>{nt=!1,e.value&&(e.value.off("mousemove",Xe),document.removeEventListener("mouseup",ke),e.value.dragging.enable())};e.value.on("mousemove",Xe),document.addEventListener("mouseup",ke)})}),Ae.on("mousedown",te=>{if(!e.value)return;st.DomEvent.stopPropagation(te),e.value.dragging.disable();let re=!0;const be=Je=>{re&&(F.setCenter(Je.latlng),Ae.setLatLng(Je.latlng),Pe(F))},me=()=>{re=!1,e.value&&(e.value.off("mousemove",be),document.removeEventListener("mouseup",me),e.value.dragging.enable())};e.value.on("mousemove",be),document.addEventListener("mouseup",me)}),Ee.on("mousedown",te=>{if(!e.value)return;st.DomEvent.stopPropagation(te),e.value.dragging.disable();let re=!0;const be=Je=>{if(!re)return;const et=X.distanceTo(Je.latlng);F.setRadius(et),Ee.setLatLng(Je.latlng),Pe(F)},me=()=>{re=!1,e.value&&(e.value.off("mousemove",be),document.removeEventListener("mouseup",me),e.value.dragging.enable())};e.value.on("mousemove",be),document.addEventListener("mouseup",me)})};return Sl(()=>{e.value&&(e.value.remove(),e.value=null)}),{map:e,featureGroup:n,currentTool:s,selectedShape:l,isDrawing:h,initMap:W,setDrawingTool:z,updateShapeStyle:j,updateShapeProperties:_e,updateTextFixedSize:G,adjustView:D}}function Cb(){const e=qe(null),n=qe(""),s=qe("Ville"),l={Ville:Ii.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19}),Satellite:Ii.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:" Esri",maxZoom:19}),Cadastre:Ii.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{attribution:"Cadastre - Carte  IGN/Geoportail",maxZoom:19})};return{map:e,searchQuery:n,currentBaseMap:s,baseMaps:l,initMap:y=>{e.value=y,Ii.control.layers(l).addTo(y),l[s.value].addTo(y)},searchLocation:async()=>{if(!(!e.value||!n.value))try{const v=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(n.value)}`)).json();if(v&&v.length>0){const{lat:C,lon:M}=v[0];e.value.setView([C,M],13)}}catch(y){console.error("Erreur lors de la recherche de localisation:",y)}},changeBaseMap:y=>{!e.value||!l[y]||(Object.values(l).forEach(v=>{var C;(C=e.value)!=null&&C.hasLayer(v)&&e.value.removeLayer(v)}),l[y].addTo(e.value),s.value=y)}}}const Gl=qc("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[]}),getters:{getPlanById:e=>n=>e.plans.find(s=>s.id===n),hasUnsavedChanges:e=>e.unsavedChanges,getCurrentPlanHistory:e=>e.planHistory},actions:{async fetchPlans(){var n,s;const e=Ui();this.loading=!0;try{let l="/plans/";e.isDealer?l+="?concessionnaire="+((n=e.user)==null?void 0:n.id):e.isClient&&(l+="?utilisateur="+((s=e.user)==null?void 0:s.id));const h=await gt.get(l);this.plans=h.data}catch(l){throw this.error="Erreur lors du chargement des plans",l}finally{this.loading=!1}},async fetchPlansWithDetails(){var n,s;const e=Ui();this.loading=!0;try{let l="/plans/";const h={include_details:!0};e.isDealer?h.concessionnaire=(n=e.user)==null?void 0:n.id:e.isClient&&(h.utilisateur=(s=e.user)==null?void 0:s.id);const p=await gt.get(l,{params:h});return this.plans=p.data,p}catch(l){throw this.error="Erreur lors du chargement des plans",l}finally{this.loading=!1}},async createPlan(e){this.loading=!0;try{console.log("Creating plan with data:",e);const n=await gt.post("/plans/",e);return console.log("Plan creation response:",n.data),this.plans.push(n.data),n.data}catch(n){const s=n instanceof Error?n.message:String(n);throw console.error("Error creating plan:",s),this.error="Erreur lors de la cration du plan",n}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(e){var n,s;if(this.unsavedChanges){this.loading=!0;try{const l=await gt.patch(`/plans/${e}/`,{...this.currentPlan,version:((n=this.currentPlan)==null?void 0:n.version)||1}),h=this.plans.findIndex(p=>p.id===e);return h!==-1&&(this.plans[h]=l.data),((s=this.currentPlan)==null?void 0:s.id)===e&&(this.currentPlan=l.data),this.unsavedChanges=!1,l.data}catch(l){throw this.error="Erreur lors de la sauvegarde du plan",l}finally{this.loading=!1}}},async updatePlanDetails(e,n){var s;try{const l=await gt.patch(`/plans/${e}/`,n),h=this.plans.findIndex(p=>p.id===e);return h!==-1&&(this.plans[h]={...this.plans[h],...l.data}),((s=this.currentPlan)==null?void 0:s.id)===e&&(this.currentPlan={...this.currentPlan,...l.data}),l.data}catch(l){throw console.error("Erreur lors de la mise  jour du plan:",l),l}},async fetchPlanHistory(e){this.loading=!0;try{const n=await gt.get(`/plans/${e}/historique/`);return this.planHistory=n.data,n.data}catch(n){throw this.error="Erreur lors de la rcupration de l'historique",n}finally{this.loading=!1}},async restorePlanVersion(e,n){var s;this.loading=!0;try{const l=await gt.post(`/plans/${e}/restaurer/`,{version_id:n});((s=this.currentPlan)==null?void 0:s.id)===e&&(this.currentPlan=l.data);const h=this.plans.findIndex(p=>p.id===e);return h!==-1&&(this.plans[h]=l.data),l.data}catch(l){throw this.error="Erreur lors de la restauration de la version",l}finally{this.loading=!1}},setCurrentPlan(e){this.currentPlan=e,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.stopAutoSave()},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(e){var n;this.loading=!0;try{await gt.delete(`/plans/${e}/`),this.plans=this.plans.filter(s=>s.id!==e),((n=this.currentPlan)==null?void 0:n.id)===e&&this.clearCurrentPlan()}catch(s){throw this.error="Erreur lors de la suppression du plan",s}finally{this.loading=!1}}}}),Gp=qc("drawing",{state:()=>({currentPlanId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null}),getters:{hasUnsavedChanges:e=>e.unsavedChanges,getCurrentElements:e=>e.elements,getSelectedElement:e=>e.selectedElement,getCurrentTool:e=>e.currentTool,getCurrentStyle:e=>e.currentStyle,getLastUsedType:e=>e.lastUsedType},actions:{setCurrentPlan(e){this.currentPlanId=e,e===null&&this.clearElements()},clearCurrentPlan(){this.currentPlanId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1},addElement(e){!e.type_forme&&this.lastUsedType&&(e.type_forme=this.lastUsedType),this.elements.push(e),this.unsavedChanges=!0},updateElement(e){const n=this.elements.findIndex(s=>s.id===e.id);if(n!==-1){const s=this.elements[n].type_forme;this.elements[n]={...e,type_forme:s},this.unsavedChanges=!0}},removeElement(e){const n=this.elements.findIndex(s=>s.id===e);n!==-1&&(this.elements.splice(n,1),this.unsavedChanges=!0)},selectElement(e){this.selectedElement=e},setCurrentTool(e){this.currentTool=e,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(e)&&(this.lastUsedType=e)},setCurrentStyle(e){this.currentStyle={...this.currentStyle,...e}},async loadPlanElements(e){var n;this.loading=!0;try{const l=(await gt.get(`/plans/${e}/`)).data;this.elements=l.formes.map(h=>({...h,type_forme:h.type_forme})),this.currentPlanId=e,this.unsavedChanges=!1,l.preferences&&(l.preferences.currentTool&&this.setCurrentTool(l.preferences.currentTool),l.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...l.preferences.currentStyle}),l.preferences.lastUsedType&&(this.lastUsedType=l.preferences.lastUsedType)),(n=this.selectedElement)!=null&&n.type_forme&&this.setCurrentTool(this.selectedElement.type_forme)}catch(s){throw console.error("Erreur lors du chargement des lments:",s),this.error="Erreur lors du chargement des lments du plan",s}finally{this.loading=!1}},async saveToPlan(e){Gl(),this.loading=!0;try{const n=e||this.currentPlanId;if(!n)throw new Error("Aucun plan slectionn pour la sauvegarde");const s=this.elements.map(h=>({...h,type_forme:h.type_forme||this.lastUsedType})),l=await gt.post(`/plans/${n}/save_with_elements/`,{formes:s,connexions:[],annotations:[],preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}});return this.elements=l.data.formes.map(h=>({...h,type_forme:h.type_forme})),this.unsavedChanges=!1,l.data}catch(n){throw console.error("Erreur lors de la sauvegarde:",n),this.error="Erreur lors de la sauvegarde du plan",n}finally{this.loading=!1}}}}),kb={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},Eb={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4"},Mb={key:0,class:"mb-4"},Pb={key:0,class:"animate-pulse"},Sb=["value"],Bb={class:"mb-4"},Ab={key:0,class:"animate-pulse"},Tb=["disabled"],Db={value:null},Rb=["value"],Ob={class:"mb-4"},Ib={class:"mb-6"},Fb={class:"flex justify-end space-x-3"},Nb=["disabled"],zb={key:0},$b={key:1},Vp=Ki({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","dealerSelected","clientSelected"],setup(e,{expose:n,emit:s}){const l=e,h=s,p=Ui(),f=Gl();qe(!1);const y=qe(!1),v=qe(null),C=qe([]),M=qe([]),P=qe(null),G=qe(null),W=qe(!1),D=qe(!1),z=qe({nom:"",description:"",concessionnaire:null,client:null}),j=Ct(()=>{var Pe,F;return((Pe=p.user)==null?void 0:Pe.user_type)==="admin"?z.value.nom.trim()&&z.value.concessionnaire&&z.value.client:((F=p.user)==null?void 0:F.user_type)==="dealer"?z.value.nom.trim()&&z.value.client:z.value.nom.trim()});zi(()=>z.value.concessionnaire,async Pe=>{if(l.modelValue)if(console.log("[NewPlanModal] Concessionnaire changed:",Pe),Pe){const F=C.value.find(X=>X.id===Pe);F&&await ge(F)}else M.value=[],P.value=null,G.value=null,z.value.client=null}),zi(()=>l.modelValue,Pe=>{var F,X;Pe?((F=p.user)==null?void 0:F.user_type)==="admin"?_e():((X=p.user)==null?void 0:X.user_type)==="dealer"&&Be(p.user.id):(z.value={nom:"",description:"",concessionnaire:null,client:null},P.value=null,G.value=null,M.value=[],C.value=[],v.value=null)}),Ct(()=>{var Pe;return((Pe=p.user)==null?void 0:Pe.user_type)==="admin"?P.value?M.value:[]:M.value});async function _e(){console.log("[NewPlanModal] Loading dealers..."),W.value=!0;try{const Pe=await gt.get("/users/",{params:{role:"CONCESSIONNAIRE"}});console.log("[NewPlanModal] Dealers loaded:",Pe.data),C.value=Pe.data}catch(Pe){console.error("[NewPlanModal] Error loading dealers:",Pe)}finally{W.value=!1}}async function Be(Pe){console.log("[NewPlanModal] Loading clients for dealer:",Pe),D.value=!0;try{const F=await gt.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:Pe}});console.log("[NewPlanModal] Clients loaded:",F.data),M.value=Array.isArray(F.data)?F.data:[F.data]}catch(F){console.error("[NewPlanModal] Error loading clients:",F),M.value=[]}finally{D.value=!1}}async function ge(Pe){if(l.modelValue){console.log("[NewPlanModal] Selecting dealer:",Pe),P.value=Pe,z.value.concessionnaire=Pe.id,D.value=!0;try{const F=await gt.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:Pe.id}});console.log("[NewPlanModal] Clients loaded:",F.data),M.value=Array.isArray(F.data)?F.data:[F.data]}catch(F){console.error("[NewPlanModal] Error loading clients:",F),M.value=[]}finally{D.value=!1}}}function Ne(Pe){l.modelValue&&(console.log("[NewPlanModal] Client selected:",Pe),G.value=Pe,z.value.client=Pe.id,h("clientSelected",Pe))}function Ue(){h("update:modelValue",!1),z.value={nom:"",description:"",concessionnaire:null,client:null},P.value=null,G.value=null,M.value=[],v.value=null}async function fe(){var Pe,F,X,pe,ee,De;v.value=null,y.value=!0;try{const Ae={nom:z.value.nom.trim(),description:z.value.description.trim(),concessionnaire:((Pe=p.user)==null?void 0:Pe.user_type)==="admin"?z.value.concessionnaire:(F=p.user)==null?void 0:F.id,client:((X=p.user)==null?void 0:X.user_type)==="client"?(pe=p.user)==null?void 0:pe.id:z.value.client},ie=await f.createPlan(Ae);h("created",ie.id),Ue()}catch(Ae){console.error("[NewPlanModal] Error creating plan:",Ae),v.value=((De=(ee=Ae.response)==null?void 0:ee.data)==null?void 0:De.detail)||Ae.message||"Une erreur est survenue lors de la cration du plan"}finally{y.value=!1}}return n({dealers:C,dealerClients:M,selectedDealer:P,selectedClient:G,loadDealers:_e,loadDealerClients:Be,selectDealer:ge,selectClient:Ne}),(Pe,F)=>Pe.modelValue?(ve(),Ce("div",kb,[w("div",Eb,[w("div",{class:"flex justify-between items-center mb-4"},[F[5]||(F[5]=w("h2",{class:"text-xl font-semibold text-gray-900"},"Crer un nouveau plan",-1)),w("button",{onClick:Ue,class:"text-gray-400 hover:text-gray-500"},F[4]||(F[4]=[w("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),Mt(p).isAdmin?(ve(),Ce("div",Mb,[F[8]||(F[8]=w("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Concessionnaire",-1)),W.value?(ve(),Ce("div",Pb,F[6]||(F[6]=[w("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):St((ve(),Ce("select",{key:1,"onUpdate:modelValue":F[0]||(F[0]=X=>z.value.concessionnaire=X),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[F[7]||(F[7]=w("option",{value:null},"Slectionnez un concessionnaire",-1)),(ve(!0),Ce(kt,null,It(C.value,X=>(ve(),Ce("option",{key:X.id,value:X.id},Ve(X.first_name)+" "+Ve(X.last_name)+" ("+Ve(X.company_name)+") ",9,Sb))),128))],512)),[[Qi,z.value.concessionnaire]])])):ft("",!0),w("div",Bb,[F[10]||(F[10]=w("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Client",-1)),D.value?(ve(),Ce("div",Ab,F[9]||(F[9]=[w("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):St((ve(),Ce("select",{key:1,"onUpdate:modelValue":F[1]||(F[1]=X=>z.value.client=X),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!M.value.length},[w("option",Db,Ve(M.value.length?"Slectionnez un client":"Aucun client disponible"),1),(ve(!0),Ce(kt,null,It(M.value,X=>(ve(),Ce("option",{key:X.id,value:X.id},Ve(X.first_name)+" "+Ve(X.last_name)+" ("+Ve(X.company_name)+") ",9,Rb))),128))],8,Tb)),[[Qi,z.value.client]])]),w("div",Ob,[F[11]||(F[11]=w("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),St(w("input",{"onUpdate:modelValue":F[2]||(F[2]=X=>z.value.nom=X),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[Xt,z.value.nom]])]),w("div",Ib,[F[12]||(F[12]=w("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),St(w("textarea",{"onUpdate:modelValue":F[3]||(F[3]=X=>z.value.description=X),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[Xt,z.value.description]])]),w("div",Fb,[w("button",{onClick:Ue,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),w("button",{onClick:fe,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!j.value||y.value},[y.value?(ve(),Ce("span",zb,"Cration en cours...")):(ve(),Ce("span",$b,"Crer le plan"))],8,Nb)])])])):ft("",!0)}}),Ub={class:"h-full flex"},jb={class:"flex-1 relative"},Gb={class:"absolute bottom-6 left-6 z-[1000]"},Vb={class:"bg-white rounded-lg shadow-lg p-3 mb-3"},Hb={class:"grid grid-cols-3 gap-2"},Zb=["onClick"],qb={class:"bg-white rounded-lg shadow-lg p-3 space-y-2"},Kb={class:"flex flex-col mb-2"},Wb={class:"text-xl font-bold text-gray-800 mb-1"},Jb={key:0,class:"text-sm text-gray-500"},Xb={class:"grid grid-cols-1 gap-2"},Yb=["disabled"],Qb={key:0,class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ex={key:1,class:"animate-spin h-5 w-5 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},tx={key:0,class:"text-xs text-gray-500 mt-2"},ix={key:0,class:"fixed bottom-6 right-6 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg shadow-lg z-[2000] flex items-center transform transition-all duration-300 ease-in-out",role:"alert"},nx={class:"drawing-tools-container absolute top-4 right-4 z-[1000]"},rx={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},sx={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4"},ox={class:"flex justify-between items-center mb-4"},ax={key:0,class:"space-y-4"},lx={key:0,class:"space-y-2"},ux={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},cx=["onClick"],hx={class:"font-medium text-gray-900"},dx={key:1,class:"space-y-2"},fx={class:"flex items-center mb-4"},px={class:"text-sm text-gray-600"},mx={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},gx=["onClick"],_x={class:"font-medium text-gray-900"},yx={key:2,class:"space-y-2"},vx={class:"flex items-center mb-4"},bx={class:"text-sm text-gray-600"},xx={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},wx=["onClick"],Lx={class:"font-medium text-gray-900"},Cx={class:"text-sm text-gray-500"},kx={class:"text-xs text-gray-400 mt-1"},Ex={key:1,class:"space-y-4"},Mx={key:0,class:"space-y-2"},Px={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},Sx=["onClick"],Bx={class:"font-medium text-gray-900"},Ax={key:1,class:"space-y-2"},Tx={class:"flex items-center mb-4"},Dx={class:"text-sm text-gray-600"},Rx={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},Ox=["onClick"],Ix={class:"font-medium text-gray-900"},Fx={class:"text-sm text-gray-500"},Nx={class:"text-xs text-gray-400 mt-1"},zx={key:2,class:"max-h-96 overflow-y-auto"},$x={key:0,class:"text-center py-8"},Ux={key:1,class:"space-y-2"},jx=["onClick"],Gx={class:"font-medium text-gray-900"},Vx={class:"text-sm text-gray-500"},Hx={class:"text-xs text-gray-400 mt-1"},Dd=Ki({__name:"MapView",setup(e){const n=qe(null),s=Gl(),l=Gp(),h=qe([]),p=qe(null),f=qe({});qe({mousedown:null,mousemove:null,mouseup:null});const{currentTool:y,selectedShape:v,map:C,initMap:M,setDrawingTool:P,updateShapeStyle:G,updateShapeProperties:W,featureGroup:D,adjustView:z}=Lb(),{initMap:j,baseMaps:_e,currentBaseMap:Be,changeBaseMap:ge}=Cb();Hs();const Ne=qe(!1),Ue=qe(!1),fe=qe(null);qe({nom:"",description:""});const Pe=qe(!1),F=qe(!1),X=Ui(),pe=qe([]),ee=qe([]),De=qe([]),Ae=qe(null),ie=qe(null),Le=qe(!1),Re=qe(!1),Ee=qe(!1),Z=qe(null),te=Ct(()=>{var le,q,Oe;if(console.log("[MapView][filteredClients] Computing with:",{userType:(le=X.user)==null?void 0:le.user_type,selectedDealer:Ae.value,dealerClients:ee.value}),((q=X.user)==null?void 0:q.user_type)==="admin"){const Ie=Ae.value?ee.value:[];return console.log("[MapView][filteredClients] Admin clients:",Ie),Ie}else if(((Oe=X.user)==null?void 0:Oe.user_type)==="dealer")return console.log("[MapView][filteredClients] Dealer clients:",ee.value),ee.value;return console.log("[MapView][filteredClients] No clients returned"),[]});function re(le){const q=le.getCenter(),Oe=le.getZoom(),Ie={lat:q.lat,lng:q.lng,zoom:Oe};document.cookie=`mapState=${JSON.stringify(Ie)};max-age=2592000;path=/`}function be(){const q=document.cookie.split(";").find(Oe=>Oe.trim().startsWith("mapState="));if(q)try{return JSON.parse(q.split("=")[1])}catch(Oe){return console.error("Erreur lors de la lecture du cookie de position:",Oe),null}return null}Er(async()=>{var le,q;if(console.log("[onMounted] Starting initialization..."),n.value){const Oe=be(),Ie=Oe?[Oe.lat,Oe.lng]:[46.603354,1.888334],ze=(Oe==null?void 0:Oe.zoom)??6,Se=M(n.value,Ie,ze);Se.pm.setLang("fr"),Se.pm.addControls({rotateMode:!1}),Ii.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles  Esri  Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",maxZoom:19}).addTo(Se),Se&&(j(Se),Se.on("moveend",()=>{re(Se)}),window.addEventListener("map-set-location",We=>{if(Se&&We.detail){const{lat:at,lng:dt,zoom:yt}=We.detail;Se.flyTo([at,dt],yt,{duration:1.5,easeLinearity:.25})}}),await s.fetchPlans(),s.currentPlan&&(await l.loadPlanElements(s.currentPlan.id),await et(s.currentPlan.id)),((le=X.user)==null?void 0:le.user_type)==="admin"&&(console.log("[onMounted] Loading dealers for admin..."),await Ye()),((q=X.user)==null?void 0:q.user_type)==="dealer"&&(console.log("[onMounted] Loading clients for dealer..."),await tt()))}}),zi(()=>l.hasUnsavedChanges,le=>{le&&fe.value&&s.markUnsavedChanges()}),zi(C,async le=>{le&&s.currentPlan&&(Je(),await l.loadPlanElements(s.currentPlan.id),await et(s.currentPlan.id))}),zi(()=>s.currentPlan,async le=>{le?(fe.value=le,C.value&&(Je(),await l.loadPlanElements(le.id),await et(le.id))):(fe.value=null,Je())},{immediate:!0}),_f(()=>{C.value&&C.value.off("moveend")}),qe({rectangle:0,circle:0,semicircle:0,line:0}),zi(()=>f.value,le=>{me()},{deep:!0});function me(){console.log("Updating drawing style:",f.value)}function Je(){D.value&&D.value.clearLayers(),h.value=[],v.value=null,p.value=null}async function et(le){try{Je(),await l.loadPlanElements(le);const q=s.getPlanById(le);q&&(fe.value=q,s.setCurrentPlan(q),l.setCurrentPlan(q.id),l.getCurrentElements.forEach(Oe=>{if(!D.value||!Oe.data)return;let Ie;const{style:ze={},...Se}=Oe.data;switch(Oe.type_forme){case"CERCLE":Ie=Ii.circle([Se.center[1],Se.center[0]],{...ze,radius:Se.radius});break;case"RECTANGLE":Ie=Ii.rectangle([[Se.bounds.southWest[1],Se.bounds.southWest[0]],[Se.bounds.northEast[1],Se.bounds.northEast[0]]],ze);break;case"DEMI_CERCLE":Ie=new Ds([Se.center[1],Se.center[0]],Se.radius,Se.startAngle,Se.endAngle,ze);break;case"LIGNE":Ie=Ii.polyline(Se.points.map(at=>[at[1],at[0]]),ze);break;case"TEXTE":const We=Ii.divIcon({html:`<div class="text-annotation" style="font-size: ${ze.fontSize||"14px"}">${Se.content}</div>`,className:"text-container"});Ie=Ii.marker([Se.position[1],Se.position[0]],{icon:We,...ze});break}Ie&&(Ie.properties={type:Oe.type_forme,style:ze,...Se},D.value.addLayer(Ie),h.value.push({id:Oe.id,type:Oe.type_forme,layer:Ie,properties:Ie.properties}),Se.rotation&&typeof Ie.setRotation=="function"&&Ie.setRotation(Se.rotation))})),Ue.value=!1}catch(q){console.error("Erreur lors du chargement du plan:",q)}}async function nt(){if(!fe.value||!D.value){console.warn("Aucun plan actif ou groupe de formes  sauvegarder");return}Pe.value=!0;try{const le=[];D.value.eachLayer(q=>{var Se,We,at,dt,yt,Tt,Pt,ii;const Oe={style:{color:((Se=q.options)==null?void 0:Se.color)||"#3388ff",fillColor:((We=q.options)==null?void 0:We.fillColor)||"#3388ff",fillOpacity:((at=q.options)==null?void 0:at.fillOpacity)||.2,weight:((dt=q.options)==null?void 0:dt.weight)||3,opacity:((yt=q.options)==null?void 0:yt.opacity)||1}};let Ie,ze;if(q instanceof Ii.Circle)Ie="CERCLE",ze={...Oe,center:[q.getLatLng().lng,q.getLatLng().lat],radius:q.getRadius()};else if(q instanceof Ii.Rectangle){Ie="RECTANGLE";const $t=q.getBounds();ze={...Oe,bounds:{southWest:[$t.getSouthWest().lng,$t.getSouthWest().lat],northEast:[$t.getNorthEast().lng,$t.getNorthEast().lat]}}}else((Tt=q.properties)==null?void 0:Tt.type)==="Semicircle"?(Ie="DEMI_CERCLE",ze={...Oe,center:[q.getLatLng().lng,q.getLatLng().lat],radius:q.getRadius(),startAngle:q.properties.style.startAngle||0,endAngle:q.properties.style.stopAngle||180}):q instanceof Ii.Polyline&&!(q instanceof Ii.Polygon)?(Ie="LIGNE",ze={...Oe,points:q.getLatLngs().map($t=>[$t.lng,$t.lat])}):((Pt=q.properties)==null?void 0:Pt.type)==="text"&&(Ie="TEXTE",ze={...Oe,position:[q.getLatLng().lng,q.getLatLng().lat],content:q.properties.text,style:{...q.properties.style,fontSize:q.properties.style.fontSize}});Ie&&ze&&le.push({id:q.id,type_forme:Ie,data:{...ze,rotation:((ii=q.properties)==null?void 0:ii.rotation)||0}})}),l.elements=le,await l.saveToPlan(fe.value.id),F.value=!0,setTimeout(()=>{F.value=!1},3e3)}catch(le){console.error("Erreur lors de la sauvegarde du plan:",le)}finally{Pe.value=!1}}Sl(()=>{s.clearCurrentPlan(),l.clearCurrentPlan()});function Xe(le){W(le)}function ke(le){try{const q=new Date(le);return isNaN(q.getTime())?(console.error("Date invalide reue:",le),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(q)}catch(q){return console.error("Erreur lors du formatage de la date:",q),"Date invalide"}}const Ke=()=>{z()},Ze=()=>{v.value&&D.value&&(P(""),D.value.removeLayer(v.value),v.value=null)};async function Ye(){Le.value=!0;try{const le=await gt.get("/users/",{params:{role:"CONCESSIONNAIRE"}});pe.value=le.data}catch(le){console.error("Erreur lors du chargement des concessionnaires:",le)}finally{Le.value=!1}}async function tt(){var le;console.log("[loadDealerClients] Starting..."),console.log("[loadDealerClients] authStore.user:",X.user),Re.value=!0;try{const q=(le=X.user)==null?void 0:le.id;if(console.log("[loadDealerClients] Using dealerId:",q),!q){console.error("[loadDealerClients] No dealer ID available");return}const Oe=await gt.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:q}});console.log("[loadDealerClients] Response:",Oe.data),Array.isArray(Oe.data)?ee.value=Oe.data:Oe.data?ee.value=[Oe.data]:ee.value=[],console.log("[loadDealerClients] Processed clients:",ee.value)}catch(q){console.error("[loadDealerClients] Error:",q),ee.value=[]}finally{Re.value=!1}}async function U(le){if(console.log("[MapView][selectClient] Starting with client:",le),console.log("[MapView][selectClient] Current state:",{selectedDealer:Ae.value,selectedClient:ie.value,newPlanModalRef:!!Z.value}),Z.value){console.log("[MapView][selectClient] Using NewPlanModal ref"),Z.value.selectClient(le),ie.value=le,console.log("[MapView][selectClient] Updated selectedClient:",ie.value),Ee.value=!0;try{const q=await gt.get("/plans/",{params:{client:le.id}});console.log("[MapView][selectClient] Loaded client plans:",q.data),De.value=q.data}catch(q){console.error("[MapView][selectClient] Error loading client plans:",q),De.value=[]}finally{Ee.value=!1}}else console.warn("[MapView][selectClient] NewPlanModal ref is not available")}function H(){Ae.value=null,ie.value=null,ee.value=[],De.value=[]}function ae(){ie.value=null,De.value=[]}async function Fe(le){const q=await s.getPlanById(le);q&&(fe.value=q,s.setCurrentPlan(q),l.setCurrentPlan(q.id),Ne.value=!1)}async function $e(le){console.log("[MapView][selectDealer] Starting with dealer:",le),console.log("[MapView][selectDealer] Current state:",{authStore:{user:X.user,isAdmin:X.isAdmin},selectedDealer:Ae.value,dealerClients:ee.value});try{Z.value?(console.log("[MapView][selectDealer] Using NewPlanModal ref"),await Z.value.selectDealer(le),Ae.value=le,ee.value=Z.value.dealerClients,console.log("[MapView][selectDealer] Updated state:",{selectedDealer:Ae.value,dealerClients:ee.value})):console.warn("[MapView][selectDealer] NewPlanModal ref is not available")}catch(q){console.error("[MapView][selectDealer] Error:",q)}}return zi(Ae,async le=>{var q,Oe;if(console.log("[MapView][watch selectedDealer] New dealer selected:",le),console.log("[MapView][watch selectedDealer] Current user type:",(q=X.user)==null?void 0:q.user_type),le&&((Oe=X.user)==null?void 0:Oe.user_type)==="admin"){console.log("[MapView][watch selectedDealer] Loading clients for dealer:",le.id),Re.value=!0;try{const Ie=await gt.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:le.id}});console.log("[MapView][watch selectedDealer] API response:",Ie.data),ee.value=Array.isArray(Ie.data)?Ie.data:[Ie.data],console.log("[MapView][watch selectedDealer] Updated dealerClients:",ee.value)}catch(Ie){console.error("[MapView][watch selectedDealer] Error loading clients:",Ie),ee.value=[]}finally{Re.value=!1}}}),(le,q)=>{var Oe,Ie,ze;return ve(),Ce("div",Ub,[w("div",jb,[w("div",{ref_key:"mapContainer",ref:n,class:"absolute inset-0 w-full h-full"},null,512),w("div",Gb,[w("div",Vb,[q[6]||(q[6]=w("h2",{class:"text-sm font-semibold text-gray-700 mb-2"},"Type de carte",-1)),w("div",Hb,[(ve(!0),Ce(kt,null,It(Mt(_e),(Se,We)=>(ve(),Ce("button",{key:We,onClick:at=>Mt(ge)(We),class:$i(["px-3 py-2 text-sm rounded-md transition-colors duration-200",{"bg-primary-600 text-white":Mt(Be)===We,"bg-gray-100 text-gray-700 hover:bg-gray-200":Mt(Be)!==We}])},Ve(We),11,Zb))),128))])]),w("div",qb,[w("div",Kb,[w("h1",Wb,Ve(((Oe=fe.value)==null?void 0:Oe.nom)||"Aucun plan charg"),1),(Ie=fe.value)!=null&&Ie.description?(ve(),Ce("span",Jb,Ve(fe.value.description),1)):ft("",!0)]),w("div",Xb,[w("button",{onClick:q[0]||(q[0]=Se=>Ne.value=!0),class:"flex items-center px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},q[7]||(q[7]=[w("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),ni(" Nouveau plan ")])),w("button",{onClick:q[1]||(q[1]=Se=>Ue.value=!0),class:"flex items-center px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},q[8]||(q[8]=[w("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),ni(" Charger un plan ")])),fe.value?(ve(),Ce("button",{key:0,onClick:nt,class:"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors duration-200",disabled:Pe.value},[Pe.value?(ve(),Ce("svg",ex,q[10]||(q[10]=[w("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),w("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(ve(),Ce("svg",Qb,q[9]||(q[9]=[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"},null,-1)]))),ni(" "+Ve(Pe.value?"Sauvegarde...":"Enregistrer"),1)],8,Yb)):ft("",!0),w("button",{onClick:Ke,class:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors duration-200"},q[11]||(q[11]=[w("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1),ni(" Ajuster la vue ")]))]),(ze=fe.value)!=null&&ze.date_modification?(ve(),Ce("div",tx," Dernire sauvegarde : "+Ve(ke(fe.value.date_modification)),1)):ft("",!0)])]),F.value?(ve(),Ce("div",ix,q[12]||(q[12]=[w("svg",{class:"w-5 h-5 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),w("span",{class:"font-medium"},"Plan sauvegard avec succs",-1)]))):ft("",!0),w("div",nx,[ri(bb,{"current-tool":Mt(y),"selected-shape":Mt(v),onToolChange:Mt(P),onStyleUpdate:Mt(G),onPropertiesUpdate:Xe,onDeleteShape:Ze},null,8,["current-tool","selected-shape","onToolChange","onStyleUpdate"])]),ri(Vp,{ref_key:"newPlanModalRef",ref:Z,modelValue:Ne.value,"onUpdate:modelValue":q[2]||(q[2]=Se=>Ne.value=Se),onCreated:Fe,onDealerSelected:q[3]||(q[3]=Se=>Ae.value=Se),onClientSelected:q[4]||(q[4]=Se=>ie.value=Se)},null,8,["modelValue"]),Ue.value?(ve(),Ce("div",rx,[w("div",sx,[w("div",ox,[q[14]||(q[14]=w("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),w("button",{onClick:q[5]||(q[5]=Se=>Ue.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},q[13]||(q[13]=[w("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),Mt(X).isAdmin?(ve(),Ce("div",ax,[Ae.value?ie.value?(ve(),Ce("div",yx,[w("div",vx,[w("button",{onClick:ae,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},q[23]||(q[23]=[w("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ni(" Retour  la liste des clients ")])),q[24]||(q[24]=w("span",{class:"mx-2 text-gray-400"},"|",-1)),w("span",bx,Ve(ie.value.first_name)+" "+Ve(ie.value.last_name)+" ("+Ve(ie.value.company_name)+") ",1)]),q[26]||(q[26]=w("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),w("div",xx,[Ee.value?(ve(),Ce(kt,{key:0},It(3,Se=>w("div",{key:Se,class:"animate-pulse"},q[25]||(q[25]=[w("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[w("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),w("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),w("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(ve(!0),Ce(kt,{key:1},It(De.value,Se=>(ve(),Ce("button",{key:Se.id,onClick:We=>et(Se.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[w("div",Lx,Ve(Se.nom),1),w("div",Cx,Ve(Se.description),1),w("div",kx," Modifi le "+Ve(ke(Se.date_modification)),1)],8,wx))),128))])])):(ve(),Ce("div",dx,[w("div",fx,[w("button",{onClick:H,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},q[18]||(q[18]=[w("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ni(" Retour  la liste des concessionnaires ")])),q[19]||(q[19]=w("span",{class:"mx-2 text-gray-400"},"|",-1)),w("span",px,Ve(Ae.value.first_name)+" "+Ve(Ae.value.last_name)+" ("+Ve(Ae.value.company_name)+") ",1)]),q[22]||(q[22]=w("h3",{class:"font-medium text-gray-700"},"Slectionnez un client",-1)),w("div",mx,[Re.value?(ve(),Ce(kt,{key:0},It(3,Se=>w("div",{key:Se,class:"animate-pulse"},q[20]||(q[20]=[w("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[w("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),w("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(ve(!0),Ce(kt,{key:1},It(te.value,Se=>(ve(),Ce("button",{key:Se.id,onClick:We=>U(Se),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[w("div",null,[w("div",_x,Ve(Se.first_name)+" "+Ve(Se.last_name)+" ("+Ve(Se.company_name)+")",1)]),q[21]||(q[21]=w("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,gx))),128))])])):(ve(),Ce("div",lx,[q[17]||(q[17]=w("h3",{class:"font-medium text-gray-700"},"Slectionnez un concessionnaire",-1)),w("div",ux,[Le.value?(ve(),Ce(kt,{key:0},It(3,Se=>w("div",{key:Se,class:"animate-pulse"},q[15]||(q[15]=[w("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[w("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),w("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(ve(!0),Ce(kt,{key:1},It(pe.value,Se=>(ve(),Ce("button",{key:Se.id,onClick:We=>$e(Se),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[w("div",null,[w("div",hx,Ve(Se.first_name)+" "+Ve(Se.last_name)+" ("+Ve(Se.company_name)+")",1)]),q[16]||(q[16]=w("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,cx))),128))])]))])):Mt(X).isDealer?(ve(),Ce("div",Ex,[ie.value?(ve(),Ce("div",Ax,[w("div",Tx,[w("button",{onClick:ae,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},q[30]||(q[30]=[w("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ni(" Retour  la liste des clients ")])),q[31]||(q[31]=w("span",{class:"mx-2 text-gray-400"},"|",-1)),w("span",Dx,Ve(ie.value.first_name)+" "+Ve(ie.value.last_name),1)]),q[33]||(q[33]=w("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),w("div",Rx,[Ee.value?(ve(),Ce(kt,{key:0},It(3,Se=>w("div",{key:Se,class:"animate-pulse"},q[32]||(q[32]=[w("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[w("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),w("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),w("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(ve(!0),Ce(kt,{key:1},It(De.value,Se=>(ve(),Ce("button",{key:Se.id,onClick:We=>et(Se.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[w("div",Ix,Ve(Se.nom),1),w("div",Fx,Ve(Se.description),1),w("div",Nx," Modifi le "+Ve(ke(Se.date_modification)),1)],8,Ox))),128))])])):(ve(),Ce("div",Mx,[q[29]||(q[29]=w("h3",{class:"font-medium text-gray-700"},"Slectionnez un client",-1)),w("div",Px,[Re.value?(ve(),Ce(kt,{key:0},It(3,Se=>w("div",{key:Se,class:"animate-pulse"},q[27]||(q[27]=[w("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[w("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),w("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(ve(!0),Ce(kt,{key:1},It(te.value,Se=>(ve(),Ce("button",{key:Se.id,onClick:We=>U(Se),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[w("div",null,[w("div",Bx,Ve(Se.first_name)+" "+Ve(Se.last_name)+" ("+Ve(Se.company_name)+")",1)]),q[28]||(q[28]=w("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,Sx))),128))])]))])):(ve(),Ce("div",zx,[Mt(s).plans.length===0?(ve(),Ce("div",$x,q[34]||(q[34]=[w("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(ve(),Ce("div",Ux,[(ve(!0),Ce(kt,null,It(Mt(s).plans,Se=>(ve(),Ce("button",{key:Se.id,onClick:We=>et(Se.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[w("div",Gx,Ve(Se.nom),1),w("div",Vx,Ve(Se.description),1),w("div",Hx," Modifi le "+Ve(ke(Se.date_modification)),1)],8,jx))),128))]))]))])])):ft("",!0)])])}}}),Zx={class:"fixed inset-0 z-50 overflow-y-auto"},qx={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},Kx={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},Wx={class:"mt-3 text-center sm:mt-0 sm:text-left"},Jx={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},Xx={class:"mt-4"},Yx={class:"grid grid-cols-2 gap-4"},Qx=["disabled"],ew={key:0,class:"mt-1 text-sm text-gray-500"},tw={class:"grid grid-cols-2 gap-4"},iw={key:0},nw=["disabled"],rw=["value"],sw={key:1},ow=["disabled"],aw=["value"],lw={key:0},uw={class:"grid grid-cols-2 gap-4"},cw={key:1,class:"rounded-md bg-red-50 p-4"},hw={class:"flex"},dw={class:"ml-3"},fw={class:"text-sm font-medium text-red-800"},pw={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense"},mw=["disabled"],gw={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Hp=Ki({__name:"UserFormModal",props:{user:{type:Object,default:null},dealers:{type:Array,default:()=>[]},isAdmin:{type:Boolean,required:!0},currentDealer:{type:String,default:""}},emits:["close","save"],setup(e,{emit:n}){var D,z,j,_e,Be,ge,Ne;const s=e,l=n,h=Ui(),p=qe(!1),f=qe(null),y=Ct(()=>{var Ue;return s.isAdmin?s.user?s.user.id!==((Ue=h.user)==null?void 0:Ue.id):!0:!1}),v=Ct(()=>s.isAdmin?[{value:"ADMIN",label:"Administrateur"},{value:"CONCESSIONNAIRE",label:"Concessionnaire"},{value:"UTILISATEUR",label:"Client"}]:[{value:"UTILISATEUR",label:"Client"}]),C=Ct(()=>s.isAdmin?P.role==="UTILISATEUR":!0),M=Ct(()=>s.dealers.filter(Ue=>Ue.role==="CONCESSIONNAIRE")),P=nr({first_name:((D=s.user)==null?void 0:D.first_name)||"",last_name:((z=s.user)==null?void 0:z.last_name)||"",email:((j=s.user)==null?void 0:j.email)||"",username:((_e=s.user)==null?void 0:_e.username)||"",company_name:((Be=s.user)==null?void 0:Be.company_name)||"",role:((ge=s.user)==null?void 0:ge.role)||(s.isAdmin?"":"UTILISATEUR"),dealer:((Ne=s.user)==null?void 0:Ne.concessionnaire)||s.currentDealer,password:"",password_confirm:""}),G=()=>{if(!P.first_name||!P.last_name)return f.value="Le prnom et le nom sont requis",!1;if(!P.email)return f.value="L'email est requis",!1;if(!P.username)return f.value="Le nom d'utilisateur est requis",!1;if(!s.user){if(!P.password)return f.value="Le mot de passe est requis",!1;if(P.password!==P.password_confirm)return f.value="Les mots de passe ne correspondent pas",!1}return P.role==="UTILISATEUR"&&!P.dealer?(f.value="Un concessionnaire doit tre slectionn pour un client",!1):!0},W=async()=>{var Ue;if(f.value=null,!!G()){p.value=!0;try{const fe={...P};(Ue=s.user)!=null&&Ue.id&&(fe.id=s.user.id,delete fe.password,delete fe.password_confirm),fe.role==="UTILISATEUR"&&fe.dealer&&(fe.concessionnaire=fe.dealer),delete fe.dealer,await l("save",fe),l("close")}catch(fe){console.error("Erreur formulaire:",fe),f.value=fe.message,p.value=!1}}};return(Ue,fe)=>(ve(),Ce("div",Zx,[w("div",qx,[fe[24]||(fe[24]=w("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[w("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),fe[25]||(fe[25]=w("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"",-1)),w("div",Kx,[w("div",null,[w("div",Wx,[w("h3",Jx,Ve(e.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),w("div",Xx,[w("form",{onSubmit:Dl(W,["prevent"]),class:"space-y-4"},[w("div",Yx,[w("div",null,[fe[10]||(fe[10]=w("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prnom",-1)),St(w("input",{type:"text",id:"first_name","onUpdate:modelValue":fe[0]||(fe[0]=Pe=>P.first_name=Pe),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Xt,P.first_name]])]),w("div",null,[fe[11]||(fe[11]=w("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),St(w("input",{type:"text",id:"last_name","onUpdate:modelValue":fe[1]||(fe[1]=Pe=>P.last_name=Pe),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Xt,P.last_name]])])]),w("div",null,[fe[12]||(fe[12]=w("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),St(w("input",{type:"email",id:"email","onUpdate:modelValue":fe[2]||(fe[2]=Pe=>P.email=Pe),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Xt,P.email]])]),w("div",null,[fe[13]||(fe[13]=w("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),St(w("input",{type:"text",id:"username","onUpdate:modelValue":fe[3]||(fe[3]=Pe=>P.username=Pe),required:"",disabled:!!s.user,class:$i(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",{"bg-gray-100":!!s.user}])},null,10,Qx),[[Xt,P.username]]),s.user?(ve(),Ce("p",ew," Le nom d'utilisateur ne peut pas tre modifi aprs la cration. ")):ft("",!0)]),w("div",null,[fe[14]||(fe[14]=w("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Nom de l'entreprise",-1)),St(w("input",{type:"text",id:"company_name","onUpdate:modelValue":fe[4]||(fe[4]=Pe=>P.company_name=Pe),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Xt,P.company_name]])]),w("div",tw,[s.isAdmin?(ve(),Ce("div",iw,[fe[16]||(fe[16]=w("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Rle",-1)),St(w("select",{id:"role","onUpdate:modelValue":fe[5]||(fe[5]=Pe=>P.role=Pe),required:"",disabled:!y.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[fe[15]||(fe[15]=w("option",{value:""},"Slectionner un rle",-1)),(ve(!0),Ce(kt,null,It(v.value,Pe=>(ve(),Ce("option",{key:Pe.value,value:Pe.value},Ve(Pe.label),9,rw))),128))],8,nw),[[Qi,P.role]])])):ft("",!0),C.value?(ve(),Ce("div",sw,[fe[18]||(fe[18]=w("label",{for:"dealer",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),St(w("select",{id:"dealer","onUpdate:modelValue":fe[6]||(fe[6]=Pe=>P.dealer=Pe),required:"",disabled:!s.isAdmin,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[fe[17]||(fe[17]=w("option",{value:""},"Slectionner un concessionnaire",-1)),(ve(!0),Ce(kt,null,It(M.value,Pe=>(ve(),Ce("option",{key:Pe.id,value:Pe.id},Ve(Mt(Hr)(Pe)),9,aw))),128))],8,ow),[[Qi,P.dealer]])])):ft("",!0)]),e.user?ft("",!0):(ve(),Ce("div",lw,[w("div",uw,[w("div",null,[fe[19]||(fe[19]=w("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),St(w("input",{type:"password",id:"password","onUpdate:modelValue":fe[7]||(fe[7]=Pe=>P.password=Pe),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Xt,P.password]])]),w("div",null,[fe[20]||(fe[20]=w("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),St(w("input",{type:"password",id:"password_confirm","onUpdate:modelValue":fe[8]||(fe[8]=Pe=>P.password_confirm=Pe),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Xt,P.password_confirm]])])]),fe[21]||(fe[21]=w("p",{class:"mt-1 text-sm text-gray-500"}," L'utilisateur devra changer son mot de passe  sa premire connexion. ",-1))])),f.value?(ve(),Ce("div",cw,[w("div",hw,[fe[22]||(fe[22]=w("div",{class:"flex-shrink-0"},[w("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),w("div",dw,[w("h3",fw,Ve(f.value),1)])])])):ft("",!0),w("div",pw,[w("button",{type:"submit",disabled:p.value,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:col-start-2 sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},[p.value?(ve(),Ce("svg",gw,fe[23]||(fe[23]=[w("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),w("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):ft("",!0),ni(" "+Ve(p.value?"Enregistrement...":"Enregistrer"),1)],8,mw),w("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:col-start-1 sm:text-sm",onClick:fe[9]||(fe[9]=Pe=>Ue.$emit("close"))}," Annuler ")])],32)])])])])])]))}}),_w={class:"fixed inset-0 z-50 overflow-y-auto"},yw={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},vw={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},bw={class:"sm:flex sm:items-start"},xw={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},ww={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},Lw={class:"mt-2"},Cw={class:"text-sm text-gray-500"},kw={class:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},Zp=Ki({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(e){return(n,s)=>(ve(),Ce("div",_w,[w("div",yw,[s[3]||(s[3]=w("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[w("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),s[4]||(s[4]=w("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"",-1)),w("div",vw,[w("div",bw,[s[2]||(s[2]=w("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[w("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),w("div",xw,[w("h3",ww,Ve(e.title),1),w("div",Lw,[w("p",Cw,Ve(e.message),1)])])]),w("div",kw,[w("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:s[0]||(s[0]=l=>n.$emit("confirm"))}," Confirmer "),w("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:w-auto sm:text-sm",onClick:s[1]||(s[1]=l=>n.$emit("cancel"))}," Annuler ")])])])]))}}),Ew={class:"h-full bg-gray-50"},Mw={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Pw={class:"flex justify-between items-center mb-8"},Sw={class:"text-3xl font-extrabold text-gray-900"},Bw={class:"bg-white shadow rounded-lg mb-6 p-4"},Aw={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Tw={key:0},Dw=["placeholder"],Rw={key:1},Ow=["value"],Iw={class:"bg-white shadow rounded-lg"},Fw={class:"overflow-x-auto"},Nw={class:"min-w-full divide-y divide-gray-200"},zw={class:"bg-gray-50"},$w={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Uw={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},jw={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Gw={class:"bg-white divide-y divide-gray-200"},Vw={class:"px-6 py-4 whitespace-nowrap"},Hw={class:"flex items-center"},Zw={class:"flex-shrink-0 h-10 w-10"},qw={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},Kw={class:"text-primary-600 font-medium"},Ww={class:"ml-4"},Jw={class:"text-sm font-medium text-gray-900"},Xw={class:"text-sm text-gray-500"},Yw={class:"px-6 py-4 whitespace-nowrap"},Qw={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},e3={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},t3={class:"px-6 py-4 whitespace-nowrap"},i3={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},n3=["onClick"],r3=["onClick"],s3=Ki({__name:"UserListView",setup(e){const n=Ui(),s=qe([]),l=qe([]),h=qe(!1),p=qe(!1),f=qe(null),y=qe(null),v=nr({role:"",search:"",dealer:""}),C=Ct(()=>n.isAdmin),M=Ct(()=>n.isDealer),P=Ct(()=>s.value.filter(ee=>ee.role==="CONCESSIONNAIRE")),G=Ct(()=>{var De;console.log("Computing filtered users..."),console.log("Current users:",s.value),console.log("Is admin:",C.value),console.log("Is dealer:",M.value),console.log("Current filters:",v);let ee=s.value;if(M.value&&(console.log("Filtering for dealer:",(De=n.user)==null?void 0:De.id),ee=ee.filter(Ae=>{var ie;return Ae.role==="UTILISATEUR"&&Ae.dealer===((ie=n.user)==null?void 0:ie.id)}),console.log("Filtered users for dealer:",ee)),C.value&&(v.role&&(ee=ee.filter(Ae=>Ae.role===v.role),console.log("Filtered by role:",ee)),v.dealer&&(ee=ee.filter(Ae=>String(Ae.dealer)===String(v.dealer)),console.log("Filtered by dealer:",ee))),v.search){const Ae=v.search.toLowerCase();ee=ee.filter(ie=>ie.username.toLowerCase().includes(Ae)||ie.email.toLowerCase().includes(Ae)||ie.first_name.toLowerCase().includes(Ae)||ie.last_name.toLowerCase().includes(Ae)||ie.company_name&&ie.company_name.toLowerCase().includes(Ae)),console.log("Filtered by search:",ee)}return console.log("Final filtered users:",ee),ee});Er(async()=>{await W(),C.value&&await D()});async function W(){try{console.log("Fetching users...");const ee=await gt.get("/users/");console.log("Users API response:",ee.data),s.value=ee.data,console.log("Users after assignment:",s.value)}catch(ee){console.error("Erreur lors de la rcupration des utilisateurs:",ee)}}async function D(){try{const ee=await gt.get("/users/",{params:{role:"CONCESSIONNAIRE"}});l.value=ee.data}catch(ee){console.error("Erreur lors de la rcupration des concessionnaires:",ee)}}function z(){f.value=null,h.value=!0}function j(ee){f.value={...ee},h.value=!0}function _e(){h.value=!1,f.value=null}async function Be(ee){var De;try{let Ae;const ie=!!ee.id,Le={...ee};return delete Le.dealer_name,delete Le.full_name,delete Le.user_type,delete Le.permissions,ie?Ae=await gt.patch(`/users/${ee.id}/`,Le):Ae=await gt.post("/users/",Le),await W(),_e(),Ae.data}catch(Ae){const ie=((De=Ae.response)==null?void 0:De.data)||{};let Le="";throw typeof ie=="object"&&(Le=Object.entries(ie).map(([Re,Ee])=>Array.isArray(Ee)?Ee[0]:Ee).filter(Re=>Re).join(`
`)),Le||(Le="Une erreur est survenue lors de la sauvegarde"),new Error(Le)}}function ge(ee){y.value=ee,p.value=!0}async function Ne(){if(y.value)try{await gt.delete(`/users/${y.value.id}/`),await W(),p.value=!1,y.value=null}catch(ee){throw console.error("Erreur lors de la suppression de l'utilisateur:",ee),ee}}function Ue(ee,De){return`${(ee==null?void 0:ee.charAt(0))||""}${(De==null?void 0:De.charAt(0))||""}`.toUpperCase()}const fe={ADMIN:"Admin",CONCESSIONNAIRE:"Concessionnaire",UTILISATEUR:"Client"};function Pe(ee){return fe[ee]||ee}function F(ee){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function X(ee){return ee?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}function pe(ee){var De;return C.value?!0:M.value?ee.role==="UTILISATEUR"&&ee.dealer===((De=n.user)==null?void 0:De.id):!1}return(ee,De)=>{var Ae,ie;return ve(),Ce("div",Ew,[w("div",Mw,[w("div",Pw,[w("h1",Sw,Ve(C.value?"Gestion des utilisateurs":"Mes clients"),1),w("button",{onClick:z,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[De[4]||(De[4]=w("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),ni(" "+Ve(C.value?"Nouvel utilisateur":"Nouveau client"),1)])]),w("div",Bw,[w("div",Aw,[C.value?(ve(),Ce("div",Tw,[De[6]||(De[6]=w("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rle",-1)),St(w("select",{id:"role-filter","onUpdate:modelValue":De[0]||(De[0]=Le=>v.role=Le),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},De[5]||(De[5]=[w("option",{value:""},"Tous les rles",-1),w("option",{value:"ADMIN"},"Admin",-1),w("option",{value:"CONCESSIONNAIRE"},"Concessionnaire",-1),w("option",{value:"UTILISATEUR"},"Client",-1)]),512),[[Qi,v.role]])])):ft("",!0),w("div",null,[De[7]||(De[7]=w("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),St(w("input",{type:"text",id:"search","onUpdate:modelValue":De[1]||(De[1]=Le=>v.search=Le),placeholder:C.value?"Nom, email...":"Rechercher un client...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,8,Dw),[[Xt,v.search]])]),C.value?(ve(),Ce("div",Rw,[De[9]||(De[9]=w("label",{for:"dealer-filter",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),St(w("select",{id:"dealer-filter","onUpdate:modelValue":De[2]||(De[2]=Le=>v.dealer=Le),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[De[8]||(De[8]=w("option",{value:""},"Tous les concessionnaires",-1)),(ve(!0),Ce(kt,null,It(P.value,Le=>(ve(),Ce("option",{key:Le.id,value:Le.id},Ve(Le.company_name||`${Le.first_name} ${Le.last_name}`),9,Ow))),128))],512),[[Qi,v.dealer]])])):ft("",!0)])]),w("div",Iw,[w("div",Fw,[w("table",Nw,[w("thead",zw,[w("tr",null,[w("th",$w,Ve(C.value?"Utilisateur":"Client"),1),C.value?(ve(),Ce("th",Uw," Rle ")):ft("",!0),De[10]||(De[10]=w("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),C.value?(ve(),Ce("th",jw," Concessionnaire ")):ft("",!0),De[11]||(De[11]=w("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),De[12]||(De[12]=w("th",{scope:"col",class:"relative px-6 py-3"},[w("span",{class:"sr-only"},"Actions")],-1))])]),w("tbody",Gw,[(ve(!0),Ce(kt,null,It(G.value,Le=>(ve(),Ce("tr",{key:Le.id},[w("td",Vw,[w("div",Hw,[w("div",Zw,[w("div",qw,[w("span",Kw,Ve(Ue(Le.first_name,Le.last_name)),1)])]),w("div",Ww,[w("div",Jw,Ve(Mt(Hr)(Le)),1),w("div",Xw,Ve(Le.username),1)])])]),w("td",Yw,[w("span",{class:$i(F(Le.role))},Ve(Pe(Le.role)),3)]),w("td",Qw,Ve(Le.email),1),w("td",e3,Ve(Le.dealer_name||"-"),1),w("td",t3,[w("span",{class:$i(X(Le.is_active))},Ve(Le.is_active?"Actif":"Inactif"),3)]),w("td",i3,[w("button",{onClick:Re=>j(Le),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,n3),pe(Le)?(ve(),Ce("button",{key:0,onClick:Re=>ge(Le),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,r3)):ft("",!0)])]))),128))])])])])]),h.value?(ve(),Yr(Hp,{key:0,user:f.value,dealers:l.value,"is-admin":C.value,"current-dealer":(ie=(Ae=Mt(n).user)==null?void 0:Ae.id)==null?void 0:ie.toString(),onClose:_e,onSave:Be},null,8,["user","dealers","is-admin","current-dealer"])):ft("",!0),p.value?(ve(),Yr(Zp,{key:1,title:"Supprimer l'utilisateur",message:"tes-vous sr de vouloir supprimer cet utilisateur ? Cette action est irrversible.",onConfirm:Ne,onCancel:De[3]||(De[3]=Le=>p.value=!1)})):ft("",!0)])}}}),o3={class:"h-full bg-gray-50"},a3={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},l3={class:"sm:flex sm:items-center"},u3={class:"sm:flex-auto"},c3={class:"text-2xl font-semibold text-gray-900"},h3={class:"mt-2 text-sm text-gray-700"},d3={key:0,class:"mt-8"},f3={class:"mb-6"},p3=["value"],m3={key:0,class:"mb-6"},g3=["value"],_3={key:1,class:"mt-8"},y3={class:"mb-6"},v3=["value"],b3={class:"mt-8"},x3={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 rounded-lg"},w3={class:"overflow-x-auto"},L3={class:"min-w-full divide-y divide-gray-300"},C3={class:"bg-gray-50"},k3={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"},E3={class:"ml-2 flex-none rounded"},M3={key:0,scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},P3={key:1,scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},S3={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},B3={class:"ml-2 flex-none rounded"},A3={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},T3={class:"ml-2 flex-none rounded"},D3={class:"divide-y divide-gray-200 bg-white"},R3={key:0},O3={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},I3={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},F3={key:0,class:"px-3 py-4 text-sm text-gray-900"},N3={key:0,class:"flex items-center"},z3={class:"h-8 w-8 flex-shrink-0"},$3={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},U3={class:"text-primary-700 font-medium text-sm"},j3={class:"ml-3"},G3={class:"font-medium"},V3={key:1,class:"text-gray-500"},H3={key:1,class:"px-3 py-4 text-sm text-gray-900"},Z3={key:0,class:"flex items-center"},q3={class:"h-8 w-8 flex-shrink-0"},K3={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},W3={class:"text-primary-700 font-medium text-sm"},J3={class:"ml-3"},X3={class:"font-medium"},Y3={key:1,class:"text-gray-500"},Q3={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},eL={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},tL={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},iL=["onClick"],nL=["onClick"],rL=["onClick"],sL={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},oL={class:"bg-white rounded-lg p-6 max-w-md w-full"},aL={class:"flex justify-between items-center mb-4"},lL={key:0,class:"space-y-4"},uL=["value"],cL=["value"],hL={key:1,class:"mt-4 bg-red-50 p-4 rounded-md"},dL={class:"flex"},fL={class:"ml-3"},pL={class:"text-sm font-medium text-red-800"},mL={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},gL=["disabled"],_L={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},yL=Ki({__name:"PlansView",setup(e){const n=Hs(),s=Gl(),l=Ui(),h=Gp(),p=qe([]),f=qe([]),y=qe([]),v=qe(!1),C=qe(!1),M=qe({nom:"",description:"",client:null}),P=qe({id:0,nom:"",description:"",concessionnaire:null,client:null}),G=qe(!1),W=qe(null),D=qe(null),z=qe(null),j=qe("date_modification"),_e=qe("desc"),Be=Ct(()=>D.value?y.value.filter(Z=>Z.concessionnaire===D.value):y.value),ge=Ct(()=>{let Z=p.value;return l.isAdmin?D.value&&(Z=Z.filter(te=>te.concessionnaire===D.value),z.value&&(Z=Z.filter(te=>te.client===z.value))):l.isDealer&&(Z=Z.filter(te=>{var re;return te.concessionnaire===((re=l.user)==null?void 0:re.id)}),z.value&&(Z=Z.filter(te=>te.client===z.value))),[...Z].sort((te,re)=>{if(j.value==="nom")return _e.value==="asc"?te.nom.localeCompare(re.nom):re.nom.localeCompare(te.nom);{const be=new Date(te[j.value]).getTime(),me=new Date(re[j.value]).getTime();return _e.value==="asc"?be-me:me-be}})});Ct(()=>p.value.filter(Z=>{var te;return Z.createur.id===((te=l.user)==null?void 0:te.id)})),Ct(()=>p.value.filter(Z=>{var te,re,be;return l.isAdmin?Z.createur.id!==((te=l.user)==null?void 0:te.id):l.isDealer?Z.concessionnaire===((re=l.user)==null?void 0:re.id):Z.client===((be=l.user)==null?void 0:be.id)}));const Ne=Ct(()=>l.isAdmin?{title:"Tous les plans",description:"Liste complte des plans",plans:p.value}:l.isDealer?{title:"Plans des clients",description:"Plans o vous tes assign comme concessionnaire",plans:p.value.filter(Z=>{var te;return Z.concessionnaire===((te=l.user)==null?void 0:te.id)})}:{title:"Mes plans",description:"Plans qui vous sont assigns ou que vous avez crs",plans:p.value.filter(Z=>{var te,re;return Z.client===((te=l.user)==null?void 0:te.id)||Z.createur.id===((re=l.user)==null?void 0:re.id)})});Er(async()=>{var Z;await Ue(),l.isAdmin?await fe():l.isDealer&&await Ae(((Z=l.user)==null?void 0:Z.id)||0)});async function Ue(){try{const Z=await s.fetchPlansWithDetails();p.value=Z.data}catch(Z){console.error("Erreur lors du chargement des plans:",Z)}}async function fe(){try{const[Z,te]=await Promise.all([gt.get("/users/",{params:{role:"CONCESSIONNAIRE"}}),gt.get("/users/",{params:{role:"UTILISATEUR"}})]);f.value=Z.data,y.value=te.data}catch(Z){console.error("Erreur lors du chargement des dealers et clients:",Z)}}function Pe(){v.value=!0,M.value={nom:"",description:"",client:null}}async function F(Z){try{s.setCurrentPlan(Z),await h.loadPlanElements(Z.id),n.push("/")}catch(te){console.error("Erreur lors du chargement du plan:",te),alert("Une erreur est survenue lors du chargement du plan")}}async function X(Z){var te;if(Z!=null&&Z.id&&confirm("tes-vous sr de vouloir supprimer ce plan ?"))try{await s.deletePlan(Z.id),await Ue(),((te=s.currentPlan)==null?void 0:te.id)===Z.id&&s.clearCurrentPlan()}catch(re){console.error("Erreur lors de la suppression du plan:",re),alert("Une erreur est survenue lors de la suppression du plan")}}function pe(Z){return new Date(Z).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function ee(Z){return Z?(Z.first_name.charAt(0)+Z.last_name.charAt(0)).toUpperCase():""}function De(Z){P.value={id:Z.id,nom:Z.nom,description:Z.description,concessionnaire:Z.concessionnaire||null,client:Z.client||null},Z.concessionnaire&&Ae(Z.concessionnaire),C.value=!0}async function Ae(Z){try{const te=await gt.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:Z}});y.value=te.data}catch(te){console.error("Erreur lors du chargement des clients:",te),y.value=[]}}async function ie(){var Z,te,re,be,me;W.value=null,G.value=!0;try{if(!P.value.nom.trim())throw new Error("Le nom du plan est requis");if(P.value.client&&!P.value.concessionnaire)throw new Error("Un concessionnaire doit tre slectionn pour assigner un client");await s.updatePlanDetails(P.value.id,{nom:P.value.nom.trim(),description:P.value.description.trim(),concessionnaire:P.value.concessionnaire,client:P.value.client})&&(C.value=!1,await Ue())}catch(Je){if(console.error("Erreur lors de la mise  jour du plan:",Je),(te=(Z=Je.response)==null?void 0:Z.data)!=null&&te.detail)W.value=Je.response.data.detail;else if((be=(re=Je.response)==null?void 0:re.data)!=null&&be.non_field_errors)W.value=Je.response.data.non_field_errors[0];else if((me=Je.response)!=null&&me.data){const et=Object.entries(Je.response.data).map(([nt,Xe])=>`${nt}: ${Array.isArray(Xe)?Xe[0]:Xe}`);W.value=et.join(`
`)}else W.value=Je.message||"Une erreur est survenue lors de la mise  jour du plan"}finally{G.value=!1}}zi(()=>P.value.concessionnaire,async Z=>{Z?await Ae(Z):(y.value=[],P.value.client=null)});function Le(Z){const te=l.user;return te?te.user_type==="admin"?!0:te.user_type==="dealer"?Z.concessionnaire===te.id:Z.client===te.id||Z.createur.id===te.id:!1}Ct(()=>{const Z=new Map;return p.value.forEach(te=>{te.createur&&Z.set(te.createur.id,te.createur),te.concessionnaire_details&&Z.set(te.concessionnaire_details.id,te.concessionnaire_details),te.client_details&&Z.set(te.client_details.id,te.client_details)}),Z});async function Re(Z){await Ue(),n.push("/")}function Ee(Z){j.value===Z?_e.value=_e.value==="asc"?"desc":"asc":(j.value=Z,_e.value="desc")}return(Z,te)=>(ve(),Ce("div",o3,[w("div",a3,[w("div",l3,[w("div",u3,[w("h1",c3,Ve(Ne.value.title),1),w("p",h3,Ve(Ne.value.description),1)]),w("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[w("button",{onClick:Pe,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),Mt(l).isAdmin?(ve(),Ce("div",d3,[w("div",f3,[te[14]||(te[14]=w("label",{for:"dealer-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par concessionnaire",-1)),St(w("select",{id:"dealer-filter","onUpdate:modelValue":te[0]||(te[0]=re=>D.value=re),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[te[13]||(te[13]=w("option",{value:null},"Tous les concessionnaires",-1)),(ve(!0),Ce(kt,null,It(f.value,re=>(ve(),Ce("option",{key:re.id,value:re.id},Ve(re.first_name)+" "+Ve(re.last_name)+" ("+Ve(re.company_name)+") ",9,p3))),128))],512),[[Qi,D.value]])]),D.value?(ve(),Ce("div",m3,[te[16]||(te[16]=w("label",{for:"client-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par client",-1)),St(w("select",{id:"client-filter","onUpdate:modelValue":te[1]||(te[1]=re=>z.value=re),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[te[15]||(te[15]=w("option",{value:null},"Tous les clients",-1)),(ve(!0),Ce(kt,null,It(Be.value,re=>(ve(),Ce("option",{key:re.id,value:re.id},Ve(re.first_name)+" "+Ve(re.last_name)+" ("+Ve(re.company_name)+") ",9,g3))),128))],512),[[Qi,z.value]])])):ft("",!0)])):Mt(l).isDealer?(ve(),Ce("div",_3,[w("div",y3,[te[18]||(te[18]=w("label",{for:"client-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par client",-1)),St(w("select",{id:"client-filter","onUpdate:modelValue":te[2]||(te[2]=re=>z.value=re),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[te[17]||(te[17]=w("option",{value:null},"Tous les clients",-1)),(ve(!0),Ce(kt,null,It(y.value,re=>(ve(),Ce("option",{key:re.id,value:re.id},Ve(re.first_name)+" "+Ve(re.last_name)+" ("+Ve(re.company_name)+") ",9,v3))),128))],512),[[Qi,z.value]])])])):ft("",!0),w("div",b3,[w("div",x3,[w("div",w3,[w("table",L3,[w("thead",C3,[w("tr",null,[w("th",k3,[w("button",{onClick:te[3]||(te[3]=re=>Ee("nom")),class:"group inline-flex items-center"},[te[20]||(te[20]=ni(" Nom ")),w("span",E3,[(ve(),Ce("svg",{class:$i(["h-5 w-5",{"text-gray-900":j.value==="nom","text-gray-400":j.value!=="nom","rotate-180":j.value==="nom"&&_e.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},te[19]||(te[19]=[w("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),te[25]||(te[25]=w("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),Mt(l).isDealer?ft("",!0):(ve(),Ce("th",M3," Concessionnaire ")),Mt(l).isClient?ft("",!0):(ve(),Ce("th",P3," Client ")),w("th",S3,[w("button",{onClick:te[4]||(te[4]=re=>Ee("date_creation")),class:"group inline-flex items-center"},[te[22]||(te[22]=ni(" Cr le ")),w("span",B3,[(ve(),Ce("svg",{class:$i(["h-5 w-5",{"text-gray-900":j.value==="date_creation","text-gray-400":j.value!=="date_creation","rotate-180":j.value==="date_creation"&&_e.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},te[21]||(te[21]=[w("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),w("th",A3,[w("button",{onClick:te[5]||(te[5]=re=>Ee("date_modification")),class:"group inline-flex items-center"},[te[24]||(te[24]=ni(" Modifi le ")),w("span",T3,[(ve(),Ce("svg",{class:$i(["h-5 w-5",{"text-gray-900":j.value==="date_modification","text-gray-400":j.value!=="date_modification","rotate-180":j.value==="date_modification"&&_e.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},te[23]||(te[23]=[w("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),te[26]||(te[26]=w("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[w("span",{class:"sr-only"},"Actions")],-1))])]),w("tbody",D3,[ge.value.length===0?(ve(),Ce("tr",R3,te[27]||(te[27]=[w("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun plan disponible ",-1)]))):ft("",!0),(ve(!0),Ce(kt,null,It(ge.value,re=>(ve(),Ce("tr",{key:re.id,class:"hover:bg-gray-50"},[w("td",O3,Ve(re.nom),1),w("td",I3,Ve(re.description||"-"),1),Mt(l).isDealer?ft("",!0):(ve(),Ce("td",F3,[re.concessionnaire_details?(ve(),Ce("div",N3,[w("div",z3,[w("div",$3,[w("span",U3,Ve(ee(re.concessionnaire_details)),1)])]),w("div",j3,[w("div",G3,Ve(Mt(Hr)(re.concessionnaire_details)),1)])])):(ve(),Ce("div",V3,"-"))])),Mt(l).isClient?ft("",!0):(ve(),Ce("td",H3,[re.client_details?(ve(),Ce("div",Z3,[w("div",q3,[w("div",K3,[w("span",W3,Ve(ee(re.client_details)),1)])]),w("div",J3,[w("div",X3,Ve(Mt(Hr)(re.client_details)),1)])])):(ve(),Ce("div",Y3,"-"))])),w("td",Q3,Ve(pe(re.date_creation)),1),w("td",eL,Ve(pe(re.date_modification)),1),w("td",tL,[w("button",{onClick:be=>F(re),class:"text-primary-600 hover:text-primary-900 mr-4"}," Ouvrir ",8,iL),w("button",{onClick:be=>De(re),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,nL),Le(re)?(ve(),Ce("button",{key:0,onClick:be=>X(re),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,rL)):ft("",!0)])]))),128))])])])])]),ri(Vp,{modelValue:v.value,"onUpdate:modelValue":te[6]||(te[6]=re=>v.value=re),dealers:f.value,clients:y.value,onCreated:Re},null,8,["modelValue","dealers","clients"]),C.value?(ve(),Ce("div",sL,[w("div",oL,[w("div",aL,[te[29]||(te[29]=w("h2",{class:"text-xl font-semibold text-gray-900"},"Modifier le plan",-1)),w("button",{onClick:te[7]||(te[7]=re=>C.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},te[28]||(te[28]=[w("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),w("form",{onSubmit:Dl(ie,["prevent"]),class:"space-y-4"},[w("div",null,[te[30]||(te[30]=w("label",{for:"edit-nom",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),St(w("input",{type:"text",id:"edit-nom","onUpdate:modelValue":te[8]||(te[8]=re=>P.value.nom=re),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",required:""},null,512),[[Xt,P.value.nom]])]),w("div",null,[te[31]||(te[31]=w("label",{for:"edit-description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),St(w("textarea",{id:"edit-description","onUpdate:modelValue":te[9]||(te[9]=re=>P.value.description=re),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[Xt,P.value.description]])]),Mt(l).isAdmin?(ve(),Ce("div",lL,[w("div",null,[te[33]||(te[33]=w("label",{for:"edit-concessionnaire",class:"block text-sm font-medium text-gray-700"}," Concessionnaire ",-1)),St(w("select",{id:"edit-concessionnaire","onUpdate:modelValue":te[10]||(te[10]=re=>P.value.concessionnaire=re),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[te[32]||(te[32]=w("option",{value:null},"Aucun",-1)),(ve(!0),Ce(kt,null,It(f.value,re=>(ve(),Ce("option",{key:re.id,value:re.id},Ve(Mt(Hr)(re)),9,uL))),128))],512),[[Qi,P.value.concessionnaire]])]),w("div",null,[te[35]||(te[35]=w("label",{for:"edit-client",class:"block text-sm font-medium text-gray-700"}," Client ",-1)),St(w("select",{id:"edit-client","onUpdate:modelValue":te[11]||(te[11]=re=>P.value.client=re),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[te[34]||(te[34]=w("option",{value:null},"Aucun",-1)),(ve(!0),Ce(kt,null,It(Be.value,re=>(ve(),Ce("option",{key:re.id,value:re.id},Ve(Mt(Hr)(re)),9,cL))),128))],512),[[Qi,P.value.client]])])])):ft("",!0),W.value?(ve(),Ce("div",hL,[w("div",dL,[te[36]||(te[36]=w("div",{class:"flex-shrink-0"},[w("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),w("div",fL,[w("p",pL,Ve(W.value),1)])])])):ft("",!0),w("div",mL,[w("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:te[12]||(te[12]=re=>C.value=!1)}," Annuler "),w("button",{type:"submit",disabled:G.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm disabled:opacity-50"},[G.value?(ve(),Ce("svg",_L,te[37]||(te[37]=[w("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),w("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):ft("",!0),ni(" "+Ve(G.value?"Enregistrement...":"Enregistrer"),1)],8,gL)])],32)])])):ft("",!0)])]))}}),vL={class:"h-full bg-gray-50"},bL={class:"container mx-auto px-4 py-8"},xL={class:"sm:flex sm:items-center"},wL={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},LL={class:"mt-8"},CL={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 rounded-lg"},kL={class:"overflow-x-auto"},EL={class:"min-w-full divide-y divide-gray-300"},ML={class:"divide-y divide-gray-200 bg-white"},PL={key:0,class:"animate-pulse"},SL={key:1},BL={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-6"},AL={class:"flex items-center"},TL={class:"h-10 w-10 flex-shrink-0"},DL={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},RL={class:"text-primary-600 font-medium"},OL={class:"ml-4"},IL={class:"font-medium text-gray-900"},FL={class:"text-gray-500"},NL={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},zL={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},$L={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},UL={class:"flex items-center"},jL={class:"font-medium"},GL={class:"text-gray-400 ml-1"},VL={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},HL=["onClick"],ZL=["onClick"],qL=Ki({__name:"ClientListView",setup(e){Hs();const n=Ui(),s=qe([]),l=qe(!0),h=qe(!1),p=qe(!1),f=qe(null),y=qe(null);Er(async()=>{await v()});async function v(){var z;try{const j=await gt.get("/users/",{params:{dealer:(z=n.user)==null?void 0:z.id,role:"UTILISATEUR",include_plans:!0}});s.value=j.data}catch(j){console.error("Error fetching clients:",j)}finally{l.value=!1}}function C(z,j){return`${(z==null?void 0:z.charAt(0))||""}${(j==null?void 0:j.charAt(0))||""}`.toUpperCase()}function M(z){f.value=z,h.value=!0}function P(){h.value=!1,f.value=null}async function G(z){var j;try{const _e=!!z.id,Be=_e?`/users/${z.id}/`:"/users/",ge=_e?"patch":"post";z.role="UTILISATEUR",z.concessionnaire=(j=n.user)==null?void 0:j.id,await gt[ge](Be,z),await v(),P()}catch(_e){throw console.error("Erreur lors de la sauvegarde du client:",_e),_e}}function W(z){y.value=z,p.value=!0}async function D(){if(y.value)try{await gt.delete(`/users/${y.value.id}/`),await v(),p.value=!1,y.value=null}catch(z){throw console.error("Erreur lors de la suppression du client:",z),z}}return(z,j)=>{var _e,Be;return ve(),Ce("div",vL,[w("div",bL,[w("div",xL,[j[3]||(j[3]=w("div",{class:"sm:flex-auto"},[w("h1",{class:"text-2xl font-semibold text-gray-900"},"Clients"),w("p",{class:"mt-2 text-sm text-gray-700"}," Liste de vos clients et leurs plans associs ")],-1)),w("div",wL,[w("button",{onClick:j[0]||(j[0]=ge=>h.value=!0),class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"},j[2]||(j[2]=[w("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1),ni(" Ajouter un client ")]))])]),w("div",LL,[w("div",CL,[w("div",kL,[w("table",EL,[j[6]||(j[6]=w("thead",{class:"bg-gray-50"},[w("tr",null,[w("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," Client "),w("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Email "),w("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise "),w("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Nombre de plans "),w("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[w("span",{class:"sr-only"},"Actions")])])],-1)),w("tbody",ML,[l.value?(ve(),Ce("tr",PL,j[4]||(j[4]=[w("td",{colspan:"5",class:"py-4 px-6"},[w("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):s.value.length===0?(ve(),Ce("tr",SL,j[5]||(j[5]=[w("td",{colspan:"5",class:"py-4 px-6 text-center text-gray-500"}," Aucun client trouv ",-1)]))):ft("",!0),(ve(!0),Ce(kt,null,It(s.value,ge=>(ve(),Ce("tr",{key:ge.id,class:"hover:bg-gray-50"},[w("td",BL,[w("div",AL,[w("div",TL,[w("div",DL,[w("span",RL,Ve(C(ge.first_name,ge.last_name)),1)])]),w("div",OL,[w("div",IL,Ve(Mt(Hr)(ge)),1),w("div",FL,Ve(ge.username),1)])])]),w("td",NL,Ve(ge.email),1),w("td",zL,Ve(ge.company_name||"-"),1),w("td",$L,[w("div",UL,[w("span",jL,Ve(ge.plans_count||0),1),w("span",GL,"plan"+Ve((ge.plans_count||0)>1?"s":""),1)])]),w("td",VL,[w("button",{onClick:Ne=>M(ge),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,HL),w("button",{onClick:Ne=>W(ge),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,ZL)])]))),128))])])])])]),h.value?(ve(),Yr(Hp,{key:0,user:f.value||{},dealers:[Mt(n).user],"is-admin":!1,"current-dealer":(Be=(_e=Mt(n).user)==null?void 0:_e.id)==null?void 0:Be.toString(),onClose:P,onSave:G},null,8,["user","dealers","current-dealer"])):ft("",!0),p.value?(ve(),Yr(Zp,{key:1,title:"Supprimer le client",message:"tes-vous sr de vouloir supprimer ce client ? Cette action est irrversible.",onConfirm:D,onCancel:j[1]||(j[1]=ge=>p.value=!1)})):ft("",!0)])])}}}),qp=Pv({history:sv("/"),routes:[{path:"/",name:"home",component:Dd,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/plans",name:"plans",component:yL,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/users",name:"users",component:s3,meta:{requiresAuth:!0,allowedRoles:["admin"]}},{path:"/clients",name:"clients",component:qL,meta:{requiresAuth:!0,allowedRoles:["dealer"]}},{path:"/profile",name:"profile",component:()=>qa(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/login",name:"login",component:F1,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>qa(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>qa(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:y1,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/map",name:"map",component:Dd,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>qa(()=>import("./NotFoundView.js"),[])}]});qp.beforeEach(async(e,n,s)=>{var y,v;const l=Ui();if(console.log("Route:",e.path,"Auth state:",{initialized:l.initialized,isAuthenticated:l.isAuthenticated,user:l.user}),!l.initialized)try{await l.initialize(window.INITIAL_STATE)}catch(C){console.error("Error initializing auth store:",C)}const h=l.isAuthenticated,p=(y=l.user)==null?void 0:y.must_change_password,f=(v=l.user)==null?void 0:v.user_type;if(e.meta.requiresAuth&&!h){s("/login");return}if(h&&p&&e.name!=="changePassword"){s({name:"changePassword"});return}if(e.name==="changePassword"&&!p){s({name:"home"});return}if(e.meta.allowedRoles&&f&&!e.meta.allowedRoles.includes(f)){s({name:"home"});return}if(e.meta.requiresGuest&&h){s({name:"home"});return}s()});const Qc=Gg(J4),Kp=Zg();Qc.use(Kp);Qc.use(qp);const KL=Ui(Kp);window.INITIAL_STATE&&KL.initialize(window.INITIAL_STATE);Qc.mount("#app");export{nr as a,w as b,Ce as c,Ki as d,ft as e,St as f,ve as g,JL as h,ni as i,ri as j,Fo as k,k0 as l,mC as m,$i as n,Er as o,Hs as p,qe as r,Ve as t,Ui as u,Xt as v,Dl as w};
