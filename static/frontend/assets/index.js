var xm=Object.defineProperty;var wm=(e,n,s)=>n in e?xm(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s;var ut=(e,n,s)=>wm(e,typeof n!="symbol"?n+"":n,s);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))l(h);new MutationObserver(h=>{for(const p of h)if(p.type==="childList")for(const f of p.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function s(h){const p={};return h.integrity&&(p.integrity=h.integrity),h.referrerPolicy&&(p.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?p.credentials="include":h.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function l(h){if(h.ep)return;h.ep=!0;const p=s(h);fetch(h.href,p)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Bc(e){const n=Object.create(null);for(const s of e.split(","))n[s]=1;return s=>s in n}const Vt={},Is=[],In=()=>{},Lm=()=>!1,xl=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ac=e=>e.startsWith("onUpdate:"),Ai=Object.assign,Tc=(e,n)=>{const s=e.indexOf(n);s>-1&&e.splice(s,1)},Cm=Object.prototype.hasOwnProperty,zt=(e,n)=>Cm.call(e,n),mt=Array.isArray,Fs=e=>ea(e)==="[object Map]",Vs=e=>ea(e)==="[object Set]",ch=e=>ea(e)==="[object Date]",wt=e=>typeof e=="function",li=e=>typeof e=="string",Fn=e=>typeof e=="symbol",qt=e=>e!==null&&typeof e=="object",Id=e=>(qt(e)||wt(e))&&wt(e.then)&&wt(e.catch),Fd=Object.prototype.toString,ea=e=>Fd.call(e),km=e=>ea(e).slice(8,-1),Nd=e=>ea(e)==="[object Object]",Dc=e=>li(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Io=Bc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),wl=e=>{const n=Object.create(null);return s=>n[s]||(n[s]=e(s))},Em=/-(\w)/g,mn=wl(e=>e.replace(Em,(n,s)=>s?s.toUpperCase():"")),Mm=/\B([A-Z])/g,ts=wl(e=>e.replace(Mm,"-$1").toLowerCase()),Ll=wl(e=>e.charAt(0).toUpperCase()+e.slice(1)),Nu=wl(e=>e?`on${Ll(e)}`:""),Lr=(e,n)=>!Object.is(e,n),Ja=(e,...n)=>{for(let s=0;s<e.length;s++)e[s](...n)},zd=(e,n,s,l=!1)=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,writable:l,value:s})},sl=e=>{const n=parseFloat(e);return isNaN(n)?e:n};let hh;const Cl=()=>hh||(hh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function kl(e){if(mt(e)){const n={};for(let s=0;s<e.length;s++){const l=e[s],h=li(l)?Am(l):kl(l);if(h)for(const p in h)n[p]=h[p]}return n}else if(li(e)||qt(e))return e}const Pm=/;(?![^(]*\))/g,Sm=/:([^]+)/,Bm=/\/\*[^]*?\*\//g;function Am(e){const n={};return e.replace(Bm,"").split(Pm).forEach(s=>{if(s){const l=s.split(Sm);l.length>1&&(n[l[0].trim()]=l[1].trim())}}),n}function Bi(e){let n="";if(li(e))n=e;else if(mt(e))for(let s=0;s<e.length;s++){const l=Bi(e[s]);l&&(n+=l+" ")}else if(qt(e))for(const s in e)e[s]&&(n+=s+" ");return n.trim()}const Tm="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Dm=Bc(Tm);function $d(e){return!!e||e===""}function Rm(e,n){if(e.length!==n.length)return!1;let s=!0;for(let l=0;s&&l<e.length;l++)s=Xr(e[l],n[l]);return s}function Xr(e,n){if(e===n)return!0;let s=ch(e),l=ch(n);if(s||l)return s&&l?e.getTime()===n.getTime():!1;if(s=Fn(e),l=Fn(n),s||l)return e===n;if(s=mt(e),l=mt(n),s||l)return s&&l?Rm(e,n):!1;if(s=qt(e),l=qt(n),s||l){if(!s||!l)return!1;const h=Object.keys(e).length,p=Object.keys(n).length;if(h!==p)return!1;for(const f in e){const y=e.hasOwnProperty(f),v=n.hasOwnProperty(f);if(y&&!v||!y&&v||!Xr(e[f],n[f]))return!1}}return String(e)===String(n)}function Rc(e,n){return e.findIndex(s=>Xr(s,n))}const jd=e=>!!(e&&e.__v_isRef===!0),Ge=e=>li(e)?e:e==null?"":mt(e)||qt(e)&&(e.toString===Fd||!wt(e.toString))?jd(e)?Ge(e.value):JSON.stringify(e,Ud,2):String(e),Ud=(e,n)=>jd(n)?Ud(e,n.value):Fs(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((s,[l,h],p)=>(s[zu(l,p)+" =>"]=h,s),{})}:Vs(n)?{[`Set(${n.size})`]:[...n.values()].map(s=>zu(s))}:Fn(n)?zu(n):qt(n)&&!mt(n)&&!Nd(n)?String(n):n,zu=(e,n="")=>{var s;return Fn(e)?`Symbol(${(s=e.description)!=null?s:n})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ni;class Gd{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ni,!n&&Ni&&(this.index=(Ni.scopes||(Ni.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let n,s;if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].pause();for(n=0,s=this.effects.length;n<s;n++)this.effects[n].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let n,s;if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].resume();for(n=0,s=this.effects.length;n<s;n++)this.effects[n].resume()}}run(n){if(this._active){const s=Ni;try{return Ni=this,n()}finally{Ni=s}}}on(){Ni=this}off(){Ni=this.parent}stop(n){if(this._active){this._active=!1;let s,l;for(s=0,l=this.effects.length;s<l;s++)this.effects[s].stop();for(this.effects.length=0,s=0,l=this.cleanups.length;s<l;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,l=this.scopes.length;s<l;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!n){const h=this.parent.scopes.pop();h&&h!==this&&(this.parent.scopes[this.index]=h,h.index=this.index)}this.parent=void 0}}}function Vd(e){return new Gd(e)}function Hd(){return Ni}function Om(e,n=!1){Ni&&Ni.cleanups.push(e)}let Zt;const $u=new WeakSet;class Zd{constructor(n){this.fn=n,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ni&&Ni.active&&Ni.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,$u.has(this)&&($u.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Kd(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,dh(this),Wd(this);const n=Zt,s=xn;Zt=this,xn=!0;try{return this.fn()}finally{Jd(this),Zt=n,xn=s,this.flags&=-3}}stop(){if(this.flags&1){for(let n=this.deps;n;n=n.nextDep)Fc(n);this.deps=this.depsTail=void 0,dh(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?$u.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){rc(this)&&this.run()}get dirty(){return rc(this)}}let qd=0,Fo,No;function Kd(e,n=!1){if(e.flags|=8,n){e.next=No,No=e;return}e.next=Fo,Fo=e}function Oc(){qd++}function Ic(){if(--qd>0)return;if(No){let n=No;for(No=void 0;n;){const s=n.next;n.next=void 0,n.flags&=-9,n=s}}let e;for(;Fo;){let n=Fo;for(Fo=void 0;n;){const s=n.next;if(n.next=void 0,n.flags&=-9,n.flags&1)try{n.trigger()}catch(l){e||(e=l)}n=s}}if(e)throw e}function Wd(e){for(let n=e.deps;n;n=n.nextDep)n.version=-1,n.prevActiveLink=n.dep.activeLink,n.dep.activeLink=n}function Jd(e){let n,s=e.depsTail,l=s;for(;l;){const h=l.prevDep;l.version===-1?(l===s&&(s=h),Fc(l),Im(l)):n=l,l.dep.activeLink=l.prevActiveLink,l.prevActiveLink=void 0,l=h}e.deps=n,e.depsTail=s}function rc(e){for(let n=e.deps;n;n=n.nextDep)if(n.dep.version!==n.version||n.dep.computed&&(Xd(n.dep.computed)||n.dep.version!==n.version))return!0;return!!e._dirty}function Xd(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ho))return;e.globalVersion=Ho;const n=e.dep;if(e.flags|=2,n.version>0&&!e.isSSR&&e.deps&&!rc(e)){e.flags&=-3;return}const s=Zt,l=xn;Zt=e,xn=!0;try{Wd(e);const h=e.fn(e._value);(n.version===0||Lr(h,e._value))&&(e._value=h,n.version++)}catch(h){throw n.version++,h}finally{Zt=s,xn=l,Jd(e),e.flags&=-3}}function Fc(e,n=!1){const{dep:s,prevSub:l,nextSub:h}=e;if(l&&(l.nextSub=h,e.prevSub=void 0),h&&(h.prevSub=l,e.nextSub=void 0),s.subs===e&&(s.subs=l,!l&&s.computed)){s.computed.flags&=-5;for(let p=s.computed.deps;p;p=p.nextDep)Fc(p,!0)}!n&&!--s.sc&&s.map&&s.map.delete(s.key)}function Im(e){const{prevDep:n,nextDep:s}=e;n&&(n.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=n,e.nextDep=void 0)}let xn=!0;const Yd=[];function Er(){Yd.push(xn),xn=!1}function Mr(){const e=Yd.pop();xn=e===void 0?!0:e}function dh(e){const{cleanup:n}=e;if(e.cleanup=void 0,n){const s=Zt;Zt=void 0;try{n()}finally{Zt=s}}}let Ho=0;class Fm{constructor(n,s){this.sub=n,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Nc{constructor(n){this.computed=n,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(n){if(!Zt||!xn||Zt===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Zt)s=this.activeLink=new Fm(Zt,this),Zt.deps?(s.prevDep=Zt.depsTail,Zt.depsTail.nextDep=s,Zt.depsTail=s):Zt.deps=Zt.depsTail=s,Qd(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const l=s.nextDep;l.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=l),s.prevDep=Zt.depsTail,s.nextDep=void 0,Zt.depsTail.nextDep=s,Zt.depsTail=s,Zt.deps===s&&(Zt.deps=l)}return s}trigger(n){this.version++,Ho++,this.notify(n)}notify(n){Oc();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Ic()}}}function Qd(e){if(e.dep.sc++,e.sub.flags&4){const n=e.dep.computed;if(n&&!e.dep.subs){n.flags|=20;for(let l=n.deps;l;l=l.nextDep)Qd(l)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const ol=new WeakMap,Kr=Symbol(""),sc=Symbol(""),Zo=Symbol("");function Mi(e,n,s){if(xn&&Zt){let l=ol.get(e);l||ol.set(e,l=new Map);let h=l.get(s);h||(l.set(s,h=new Nc),h.map=l,h.key=s),h.track()}}function Qn(e,n,s,l,h,p){const f=ol.get(e);if(!f){Ho++;return}const y=v=>{v&&v.trigger()};if(Oc(),n==="clear")f.forEach(y);else{const v=mt(e),C=v&&Dc(s);if(v&&s==="length"){const P=Number(l);f.forEach((M,j)=>{(j==="length"||j===Zo||!Fn(j)&&j>=P)&&y(M)})}else switch((s!==void 0||f.has(void 0))&&y(f.get(s)),C&&y(f.get(Zo)),n){case"add":v?C&&y(f.get("length")):(y(f.get(Kr)),Fs(e)&&y(f.get(sc)));break;case"delete":v||(y(f.get(Kr)),Fs(e)&&y(f.get(sc)));break;case"set":Fs(e)&&y(f.get(Kr));break}}Ic()}function Nm(e,n){const s=ol.get(e);return s&&s.get(n)}function Bs(e){const n=Rt(e);return n===e?n:(Mi(n,"iterate",Zo),dn(e)?n:n.map(Pi))}function El(e){return Mi(e=Rt(e),"iterate",Zo),e}const zm={__proto__:null,[Symbol.iterator](){return ju(this,Symbol.iterator,Pi)},concat(...e){return Bs(this).concat(...e.map(n=>mt(n)?Bs(n):n))},entries(){return ju(this,"entries",e=>(e[1]=Pi(e[1]),e))},every(e,n){return Jn(this,"every",e,n,void 0,arguments)},filter(e,n){return Jn(this,"filter",e,n,s=>s.map(Pi),arguments)},find(e,n){return Jn(this,"find",e,n,Pi,arguments)},findIndex(e,n){return Jn(this,"findIndex",e,n,void 0,arguments)},findLast(e,n){return Jn(this,"findLast",e,n,Pi,arguments)},findLastIndex(e,n){return Jn(this,"findLastIndex",e,n,void 0,arguments)},forEach(e,n){return Jn(this,"forEach",e,n,void 0,arguments)},includes(...e){return Uu(this,"includes",e)},indexOf(...e){return Uu(this,"indexOf",e)},join(e){return Bs(this).join(e)},lastIndexOf(...e){return Uu(this,"lastIndexOf",e)},map(e,n){return Jn(this,"map",e,n,void 0,arguments)},pop(){return Po(this,"pop")},push(...e){return Po(this,"push",e)},reduce(e,...n){return fh(this,"reduce",e,n)},reduceRight(e,...n){return fh(this,"reduceRight",e,n)},shift(){return Po(this,"shift")},some(e,n){return Jn(this,"some",e,n,void 0,arguments)},splice(...e){return Po(this,"splice",e)},toReversed(){return Bs(this).toReversed()},toSorted(e){return Bs(this).toSorted(e)},toSpliced(...e){return Bs(this).toSpliced(...e)},unshift(...e){return Po(this,"unshift",e)},values(){return ju(this,"values",Pi)}};function ju(e,n,s){const l=El(e),h=l[n]();return l!==e&&!dn(e)&&(h._next=h.next,h.next=()=>{const p=h._next();return p.value&&(p.value=s(p.value)),p}),h}const $m=Array.prototype;function Jn(e,n,s,l,h,p){const f=El(e),y=f!==e&&!dn(e),v=f[n];if(v!==$m[n]){const M=v.apply(e,p);return y?Pi(M):M}let C=s;f!==e&&(y?C=function(M,j){return s.call(this,Pi(M),j,e)}:s.length>2&&(C=function(M,j){return s.call(this,M,j,e)}));const P=v.call(f,C,l);return y&&h?h(P):P}function fh(e,n,s,l){const h=El(e);let p=s;return h!==e&&(dn(e)?s.length>3&&(p=function(f,y,v){return s.call(this,f,y,v,e)}):p=function(f,y,v){return s.call(this,f,Pi(y),v,e)}),h[n](p,...l)}function Uu(e,n,s){const l=Rt(e);Mi(l,"iterate",Zo);const h=l[n](...s);return(h===-1||h===!1)&&jc(s[0])?(s[0]=Rt(s[0]),l[n](...s)):h}function Po(e,n,s=[]){Er(),Oc();const l=Rt(e)[n].apply(e,s);return Ic(),Mr(),l}const jm=Bc("__proto__,__v_isRef,__isVue"),ef=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Fn));function Um(e){Fn(e)||(e=String(e));const n=Rt(this);return Mi(n,"has",e),n.hasOwnProperty(e)}class tf{constructor(n=!1,s=!1){this._isReadonly=n,this._isShallow=s}get(n,s,l){if(s==="__v_skip")return n.__v_skip;const h=this._isReadonly,p=this._isShallow;if(s==="__v_isReactive")return!h;if(s==="__v_isReadonly")return h;if(s==="__v_isShallow")return p;if(s==="__v_raw")return l===(h?p?Ym:of:p?sf:rf).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(l)?n:void 0;const f=mt(n);if(!h){let v;if(f&&(v=zm[s]))return v;if(s==="hasOwnProperty")return Um}const y=Reflect.get(n,s,si(n)?n:l);return(Fn(s)?ef.has(s):jm(s))||(h||Mi(n,"get",s),p)?y:si(y)?f&&Dc(s)?y:y.value:qt(y)?h?lf(y):sr(y):y}}class nf extends tf{constructor(n=!1){super(!1,n)}set(n,s,l,h){let p=n[s];if(!this._isShallow){const v=Yr(p);if(!dn(l)&&!Yr(l)&&(p=Rt(p),l=Rt(l)),!mt(n)&&si(p)&&!si(l))return v?!1:(p.value=l,!0)}const f=mt(n)&&Dc(s)?Number(s)<n.length:zt(n,s),y=Reflect.set(n,s,l,si(n)?n:h);return n===Rt(h)&&(f?Lr(l,p)&&Qn(n,"set",s,l):Qn(n,"add",s,l)),y}deleteProperty(n,s){const l=zt(n,s);n[s];const h=Reflect.deleteProperty(n,s);return h&&l&&Qn(n,"delete",s,void 0),h}has(n,s){const l=Reflect.has(n,s);return(!Fn(s)||!ef.has(s))&&Mi(n,"has",s),l}ownKeys(n){return Mi(n,"iterate",mt(n)?"length":Kr),Reflect.ownKeys(n)}}class Gm extends tf{constructor(n=!1){super(!0,n)}set(n,s){return!0}deleteProperty(n,s){return!0}}const Vm=new nf,Hm=new Gm,Zm=new nf(!0);const oc=e=>e,Va=e=>Reflect.getPrototypeOf(e);function qm(e,n,s){return function(...l){const h=this.__v_raw,p=Rt(h),f=Fs(p),y=e==="entries"||e===Symbol.iterator&&f,v=e==="keys"&&f,C=h[e](...l),P=s?oc:n?ac:Pi;return!n&&Mi(p,"iterate",v?sc:Kr),{next(){const{value:M,done:j}=C.next();return j?{value:M,done:j}:{value:y?[P(M[0]),P(M[1])]:P(M),done:j}},[Symbol.iterator](){return this}}}}function Ha(e){return function(...n){return e==="delete"?!1:e==="clear"?void 0:this}}function Km(e,n){const s={get(h){const p=this.__v_raw,f=Rt(p),y=Rt(h);e||(Lr(h,y)&&Mi(f,"get",h),Mi(f,"get",y));const{has:v}=Va(f),C=n?oc:e?ac:Pi;if(v.call(f,h))return C(p.get(h));if(v.call(f,y))return C(p.get(y));p!==f&&p.get(h)},get size(){const h=this.__v_raw;return!e&&Mi(Rt(h),"iterate",Kr),Reflect.get(h,"size",h)},has(h){const p=this.__v_raw,f=Rt(p),y=Rt(h);return e||(Lr(h,y)&&Mi(f,"has",h),Mi(f,"has",y)),h===y?p.has(h):p.has(h)||p.has(y)},forEach(h,p){const f=this,y=f.__v_raw,v=Rt(y),C=n?oc:e?ac:Pi;return!e&&Mi(v,"iterate",Kr),y.forEach((P,M)=>h.call(p,C(P),C(M),f))}};return Ai(s,e?{add:Ha("add"),set:Ha("set"),delete:Ha("delete"),clear:Ha("clear")}:{add(h){!n&&!dn(h)&&!Yr(h)&&(h=Rt(h));const p=Rt(this);return Va(p).has.call(p,h)||(p.add(h),Qn(p,"add",h,h)),this},set(h,p){!n&&!dn(p)&&!Yr(p)&&(p=Rt(p));const f=Rt(this),{has:y,get:v}=Va(f);let C=y.call(f,h);C||(h=Rt(h),C=y.call(f,h));const P=v.call(f,h);return f.set(h,p),C?Lr(p,P)&&Qn(f,"set",h,p):Qn(f,"add",h,p),this},delete(h){const p=Rt(this),{has:f,get:y}=Va(p);let v=f.call(p,h);v||(h=Rt(h),v=f.call(p,h)),y&&y.call(p,h);const C=p.delete(h);return v&&Qn(p,"delete",h,void 0),C},clear(){const h=Rt(this),p=h.size!==0,f=h.clear();return p&&Qn(h,"clear",void 0,void 0),f}}),["keys","values","entries",Symbol.iterator].forEach(h=>{s[h]=qm(h,e,n)}),s}function zc(e,n){const s=Km(e,n);return(l,h,p)=>h==="__v_isReactive"?!e:h==="__v_isReadonly"?e:h==="__v_raw"?l:Reflect.get(zt(s,h)&&h in l?s:l,h,p)}const Wm={get:zc(!1,!1)},Jm={get:zc(!1,!0)},Xm={get:zc(!0,!1)};const rf=new WeakMap,sf=new WeakMap,of=new WeakMap,Ym=new WeakMap;function Qm(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function e0(e){return e.__v_skip||!Object.isExtensible(e)?0:Qm(km(e))}function sr(e){return Yr(e)?e:$c(e,!1,Vm,Wm,rf)}function af(e){return $c(e,!1,Zm,Jm,sf)}function lf(e){return $c(e,!0,Hm,Xm,of)}function $c(e,n,s,l,h){if(!qt(e)||e.__v_raw&&!(n&&e.__v_isReactive))return e;const p=h.get(e);if(p)return p;const f=e0(e);if(f===0)return e;const y=new Proxy(e,f===2?l:s);return h.set(e,y),y}function Cr(e){return Yr(e)?Cr(e.__v_raw):!!(e&&e.__v_isReactive)}function Yr(e){return!!(e&&e.__v_isReadonly)}function dn(e){return!!(e&&e.__v_isShallow)}function jc(e){return e?!!e.__v_raw:!1}function Rt(e){const n=e&&e.__v_raw;return n?Rt(n):e}function Uc(e){return!zt(e,"__v_skip")&&Object.isExtensible(e)&&zd(e,"__v_skip",!0),e}const Pi=e=>qt(e)?sr(e):e,ac=e=>qt(e)?lf(e):e;function si(e){return e?e.__v_isRef===!0:!1}function Ze(e){return uf(e,!1)}function t0(e){return uf(e,!0)}function uf(e,n){return si(e)?e:new i0(e,n)}class i0{constructor(n,s){this.dep=new Nc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?n:Rt(n),this._value=s?n:Pi(n),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(n){const s=this._rawValue,l=this.__v_isShallow||dn(n)||Yr(n);n=l?n:Rt(n),Lr(n,s)&&(this._rawValue=n,this._value=l?n:Pi(n),this.dep.trigger())}}function Lt(e){return si(e)?e.value:e}const n0={get:(e,n,s)=>n==="__v_raw"?e:Lt(Reflect.get(e,n,s)),set:(e,n,s,l)=>{const h=e[n];return si(h)&&!si(s)?(h.value=s,!0):Reflect.set(e,n,s,l)}};function cf(e){return Cr(e)?e:new Proxy(e,n0)}function r0(e){const n=mt(e)?new Array(e.length):{};for(const s in e)n[s]=o0(e,s);return n}class s0{constructor(n,s,l){this._object=n,this._key=s,this._defaultValue=l,this.__v_isRef=!0,this._value=void 0}get value(){const n=this._object[this._key];return this._value=n===void 0?this._defaultValue:n}set value(n){this._object[this._key]=n}get dep(){return Nm(Rt(this._object),this._key)}}function o0(e,n,s){const l=e[n];return si(l)?l:new s0(e,n,s)}class a0{constructor(n,s,l){this.fn=n,this.setter=s,this._value=void 0,this.dep=new Nc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ho-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=l}notify(){if(this.flags|=16,!(this.flags&8)&&Zt!==this)return Kd(this,!0),!0}get value(){const n=this.dep.track();return Xd(this),n&&(n.version=this.dep.version),this._value}set value(n){this.setter&&this.setter(n)}}function l0(e,n,s=!1){let l,h;return wt(e)?l=e:(l=e.get,h=e.set),new a0(l,h,s)}const Za={},al=new WeakMap;let Vr;function u0(e,n=!1,s=Vr){if(s){let l=al.get(s);l||al.set(s,l=[]),l.push(e)}}function c0(e,n,s=Vt){const{immediate:l,deep:h,once:p,scheduler:f,augmentJob:y,call:v}=s,C=Ae=>h?Ae:dn(Ae)||h===!1||h===0?er(Ae,1):er(Ae);let P,M,j,W,D=!1,V=!1;if(si(e)?(M=()=>e.value,D=dn(e)):Cr(e)?(M=()=>C(e),D=!0):mt(e)?(V=!0,D=e.some(Ae=>Cr(Ae)||dn(Ae)),M=()=>e.map(Ae=>{if(si(Ae))return Ae.value;if(Cr(Ae))return C(Ae);if(wt(Ae))return v?v(Ae,2):Ae()})):wt(e)?n?M=v?()=>v(e,2):e:M=()=>{if(j){Er();try{j()}finally{Mr()}}const Ae=Vr;Vr=P;try{return v?v(e,3,[W]):e(W)}finally{Vr=Ae}}:M=In,n&&h){const Ae=M,$e=h===!0?1/0:h;M=()=>er(Ae(),$e)}const H=Hd(),Ce=()=>{P.stop(),H&&H.active&&Tc(H.effects,P)};if(p&&n){const Ae=n;n=(...$e)=>{Ae(...$e),Ce()}}let pe=V?new Array(e.length).fill(Za):Za;const re=Ae=>{if(!(!(P.flags&1)||!P.dirty&&!Ae))if(n){const $e=P.run();if(h||D||(V?$e.some((ge,Be)=>Lr(ge,pe[Be])):Lr($e,pe))){j&&j();const ge=Vr;Vr=P;try{const Be=[$e,pe===Za?void 0:V&&pe[0]===Za?[]:pe,W];v?v(n,3,Be):n(...Be),pe=$e}finally{Vr=ge}}}else P.run()};return y&&y(re),P=new Zd(M),P.scheduler=f?()=>f(re,!1):re,W=Ae=>u0(Ae,!1,P),j=P.onStop=()=>{const Ae=al.get(P);if(Ae){if(v)v(Ae,4);else for(const $e of Ae)$e();al.delete(P)}},n?l?re(!0):pe=P.run():f?f(re.bind(null,!0),!0):P.run(),Ce.pause=P.pause.bind(P),Ce.resume=P.resume.bind(P),Ce.stop=Ce,Ce}function er(e,n=1/0,s){if(n<=0||!qt(e)||e.__v_skip||(s=s||new Set,s.has(e)))return e;if(s.add(e),n--,si(e))er(e.value,n,s);else if(mt(e))for(let l=0;l<e.length;l++)er(e[l],n,s);else if(Vs(e)||Fs(e))e.forEach(l=>{er(l,n,s)});else if(Nd(e)){for(const l in e)er(e[l],n,s);for(const l of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,l)&&er(e[l],n,s)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ta(e,n,s,l){try{return l?e(...l):e()}catch(h){Ml(h,n,s)}}function Nn(e,n,s,l){if(wt(e)){const h=ta(e,n,s,l);return h&&Id(h)&&h.catch(p=>{Ml(p,n,s)}),h}if(mt(e)){const h=[];for(let p=0;p<e.length;p++)h.push(Nn(e[p],n,s,l));return h}}function Ml(e,n,s,l=!0){const h=n?n.vnode:null,{errorHandler:p,throwUnhandledErrorInProduction:f}=n&&n.appContext.config||Vt;if(n){let y=n.parent;const v=n.proxy,C=`https://vuejs.org/error-reference/#runtime-${s}`;for(;y;){const P=y.ec;if(P){for(let M=0;M<P.length;M++)if(P[M](e,v,C)===!1)return}y=y.parent}if(p){Er(),ta(p,null,10,[e,v,C]),Mr();return}}h0(e,s,h,l,f)}function h0(e,n,s,l=!0,h=!1){if(h)throw e;console.error(e)}const zi=[];let Rn=-1;const Ns=[];let br=null,Ts=0;const hf=Promise.resolve();let ll=null;function zs(e){const n=ll||hf;return e?n.then(this?e.bind(this):e):n}function d0(e){let n=Rn+1,s=zi.length;for(;n<s;){const l=n+s>>>1,h=zi[l],p=qo(h);p<e||p===e&&h.flags&2?n=l+1:s=l}return n}function Gc(e){if(!(e.flags&1)){const n=qo(e),s=zi[zi.length-1];!s||!(e.flags&2)&&n>=qo(s)?zi.push(e):zi.splice(d0(n),0,e),e.flags|=1,df()}}function df(){ll||(ll=hf.then(pf))}function f0(e){mt(e)?Ns.push(...e):br&&e.id===-1?br.splice(Ts+1,0,e):e.flags&1||(Ns.push(e),e.flags|=1),df()}function ph(e,n,s=Rn+1){for(;s<zi.length;s++){const l=zi[s];if(l&&l.flags&2){if(e&&l.id!==e.uid)continue;zi.splice(s,1),s--,l.flags&4&&(l.flags&=-2),l(),l.flags&4||(l.flags&=-2)}}}function ff(e){if(Ns.length){const n=[...new Set(Ns)].sort((s,l)=>qo(s)-qo(l));if(Ns.length=0,br){br.push(...n);return}for(br=n,Ts=0;Ts<br.length;Ts++){const s=br[Ts];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}br=null,Ts=0}}const qo=e=>e.id==null?e.flags&2?-1:1/0:e.id;function pf(e){try{for(Rn=0;Rn<zi.length;Rn++){const n=zi[Rn];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),ta(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;Rn<zi.length;Rn++){const n=zi[Rn];n&&(n.flags&=-2)}Rn=-1,zi.length=0,ff(),ll=null,(zi.length||Ns.length)&&pf()}}let Zi=null,mf=null;function ul(e){const n=Zi;return Zi=e,mf=e&&e.type.__scopeId||null,n}function Hr(e,n=Zi,s){if(!n||e._n)return e;const l=(...h)=>{l._d&&Ch(-1);const p=ul(n);let f;try{f=e(...h)}finally{ul(p),l._d&&Ch(1)}return f};return l._n=!0,l._c=!0,l._d=!0,l}function St(e,n){if(Zi===null)return e;const s=Tl(Zi),l=e.dirs||(e.dirs=[]);for(let h=0;h<n.length;h++){let[p,f,y,v=Vt]=n[h];p&&(wt(p)&&(p={mounted:p,updated:p}),p.deep&&er(f),l.push({dir:p,instance:s,value:f,oldValue:void 0,arg:y,modifiers:v}))}return e}function Ur(e,n,s,l){const h=e.dirs,p=n&&n.dirs;for(let f=0;f<h.length;f++){const y=h[f];p&&(y.oldValue=p[f].value);let v=y.dir[l];v&&(Er(),Nn(v,s,8,[e.el,y,e,n]),Mr())}}const p0=Symbol("_vte"),m0=e=>e.__isTeleport;function Vc(e,n){e.shapeFlag&6&&e.component?(e.transition=n,Vc(e.component.subTree,n)):e.shapeFlag&128?(e.ssContent.transition=n.clone(e.ssContent),e.ssFallback.transition=n.clone(e.ssFallback)):e.transition=n}/*! #__NO_SIDE_EFFECTS__ */function Ki(e,n){return wt(e)?Ai({name:e.name},n,{setup:e}):e}function gf(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function cl(e,n,s,l,h=!1){if(mt(e)){e.forEach((D,V)=>cl(D,n&&(mt(n)?n[V]:n),s,l,h));return}if(zo(l)&&!h){l.shapeFlag&512&&l.type.__asyncResolved&&l.component.subTree.component&&cl(e,n,s,l.component.subTree);return}const p=l.shapeFlag&4?Tl(l.component):l.el,f=h?null:p,{i:y,r:v}=e,C=n&&n.r,P=y.refs===Vt?y.refs={}:y.refs,M=y.setupState,j=Rt(M),W=M===Vt?()=>!1:D=>zt(j,D);if(C!=null&&C!==v&&(li(C)?(P[C]=null,W(C)&&(M[C]=null)):si(C)&&(C.value=null)),wt(v))ta(v,y,12,[f,P]);else{const D=li(v),V=si(v);if(D||V){const H=()=>{if(e.f){const Ce=D?W(v)?M[v]:P[v]:v.value;h?mt(Ce)&&Tc(Ce,p):mt(Ce)?Ce.includes(p)||Ce.push(p):D?(P[v]=[p],W(v)&&(M[v]=P[v])):(v.value=[p],e.k&&(P[e.k]=v.value))}else D?(P[v]=f,W(v)&&(M[v]=f)):V&&(v.value=f,e.k&&(P[e.k]=f))};f?(H.id=-1,Yi(H,s)):H()}}}Cl().requestIdleCallback;Cl().cancelIdleCallback;const zo=e=>!!e.type.__asyncLoader,_f=e=>e.type.__isKeepAlive;function g0(e,n){yf(e,"a",n)}function _0(e,n){yf(e,"da",n)}function yf(e,n,s=vi){const l=e.__wdc||(e.__wdc=()=>{let h=s;for(;h;){if(h.isDeactivated)return;h=h.parent}return e()});if(Pl(n,l,s),s){let h=s.parent;for(;h&&h.parent;)_f(h.parent.vnode)&&y0(l,n,s,h),h=h.parent}}function y0(e,n,s,l){const h=Pl(n,e,l,!0);Sl(()=>{Tc(l[n],h)},s)}function Pl(e,n,s=vi,l=!1){if(s){const h=s[e]||(s[e]=[]),p=n.__weh||(n.__weh=(...f)=>{Er();const y=ia(s),v=Nn(n,s,e,f);return y(),Mr(),v});return l?h.unshift(p):h.push(p),p}}const or=e=>(n,s=vi)=>{(!Wo||e==="sp")&&Pl(e,(...l)=>n(...l),s)},v0=or("bm"),rr=or("m"),b0=or("bu"),x0=or("u"),Hc=or("bum"),Sl=or("um"),w0=or("sp"),L0=or("rtg"),C0=or("rtc");function k0(e,n=vi){Pl("ec",e,n)}const E0="components";function M0(e,n){return S0(E0,e,!0,n)||e}const P0=Symbol.for("v-ndc");function S0(e,n,s=!0,l=!1){const h=Zi||vi;if(h){const p=h.type;{const y=_g(p,!1);if(y&&(y===n||y===mn(n)||y===Ll(mn(n))))return p}const f=mh(h[e]||p[e],n)||mh(h.appContext[e],n);return!f&&l?p:f}}function mh(e,n){return e&&(e[n]||e[mn(n)]||e[Ll(mn(n))])}function It(e,n,s,l){let h;const p=s,f=mt(e);if(f||li(e)){const y=f&&Cr(e);let v=!1;y&&(v=!dn(e),e=El(e)),h=new Array(e.length);for(let C=0,P=e.length;C<P;C++)h[C]=n(v?Pi(e[C]):e[C],C,void 0,p)}else if(typeof e=="number"){h=new Array(e);for(let y=0;y<e;y++)h[y]=n(y+1,y,void 0,p)}else if(qt(e))if(e[Symbol.iterator])h=Array.from(e,(y,v)=>n(y,v,void 0,p));else{const y=Object.keys(e);h=new Array(y.length);for(let v=0,C=y.length;v<C;v++){const P=y[v];h[v]=n(e[P],P,v,p)}}else h=[];return h}const lc=e=>e?zf(e)?Tl(e):lc(e.parent):null,$o=Ai(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>lc(e.parent),$root:e=>lc(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>bf(e),$forceUpdate:e=>e.f||(e.f=()=>{Gc(e.update)}),$nextTick:e=>e.n||(e.n=zs.bind(e.proxy)),$watch:e=>X0.bind(e)}),Gu=(e,n)=>e!==Vt&&!e.__isScriptSetup&&zt(e,n),B0={get({_:e},n){if(n==="__v_skip")return!0;const{ctx:s,setupState:l,data:h,props:p,accessCache:f,type:y,appContext:v}=e;let C;if(n[0]!=="$"){const W=f[n];if(W!==void 0)switch(W){case 1:return l[n];case 2:return h[n];case 4:return s[n];case 3:return p[n]}else{if(Gu(l,n))return f[n]=1,l[n];if(h!==Vt&&zt(h,n))return f[n]=2,h[n];if((C=e.propsOptions[0])&&zt(C,n))return f[n]=3,p[n];if(s!==Vt&&zt(s,n))return f[n]=4,s[n];uc&&(f[n]=0)}}const P=$o[n];let M,j;if(P)return n==="$attrs"&&Mi(e.attrs,"get",""),P(e);if((M=y.__cssModules)&&(M=M[n]))return M;if(s!==Vt&&zt(s,n))return f[n]=4,s[n];if(j=v.config.globalProperties,zt(j,n))return j[n]},set({_:e},n,s){const{data:l,setupState:h,ctx:p}=e;return Gu(h,n)?(h[n]=s,!0):l!==Vt&&zt(l,n)?(l[n]=s,!0):zt(e.props,n)||n[0]==="$"&&n.slice(1)in e?!1:(p[n]=s,!0)},has({_:{data:e,setupState:n,accessCache:s,ctx:l,appContext:h,propsOptions:p}},f){let y;return!!s[f]||e!==Vt&&zt(e,f)||Gu(n,f)||(y=p[0])&&zt(y,f)||zt(l,f)||zt($o,f)||zt(h.config.globalProperties,f)},defineProperty(e,n,s){return s.get!=null?e._.accessCache[n]=0:zt(s,"value")&&this.set(e,n,s.value,null),Reflect.defineProperty(e,n,s)}};function gh(e){return mt(e)?e.reduce((n,s)=>(n[s]=null,n),{}):e}let uc=!0;function A0(e){const n=bf(e),s=e.proxy,l=e.ctx;uc=!1,n.beforeCreate&&_h(n.beforeCreate,e,"bc");const{data:h,computed:p,methods:f,watch:y,provide:v,inject:C,created:P,beforeMount:M,mounted:j,beforeUpdate:W,updated:D,activated:V,deactivated:H,beforeDestroy:Ce,beforeUnmount:pe,destroyed:re,unmounted:Ae,render:$e,renderTracked:ge,renderTriggered:Be,errorCaptured:F,serverPrefetch:X,expose:_e,inheritAttrs:ee,components:Re,directives:Te,filters:ie}=n;if(C&&T0(C,l,null),f)for(const Me in f){const q=f[Me];wt(q)&&(l[Me]=q.bind(s))}if(h){const Me=h.call(s,s);qt(Me)&&(e.data=sr(Me))}if(uc=!0,p)for(const Me in p){const q=p[Me],te=wt(q)?q.bind(s,s):wt(q.get)?q.get.bind(s,s):In,se=!wt(q)&&wt(q.set)?q.set.bind(s):In,xe=Et({get:te,set:se});Object.defineProperty(l,Me,{enumerable:!0,configurable:!0,get:()=>xe.value,set:ve=>xe.value=ve})}if(y)for(const Me in y)vf(y[Me],l,s,Me);if(v){const Me=wt(v)?v.call(s):v;Reflect.ownKeys(Me).forEach(q=>{Xa(q,Me[q])})}P&&_h(P,e,"c");function Ie(Me,q){mt(q)?q.forEach(te=>Me(te.bind(s))):q&&Me(q.bind(s))}if(Ie(v0,M),Ie(rr,j),Ie(b0,W),Ie(x0,D),Ie(g0,V),Ie(_0,H),Ie(k0,F),Ie(C0,ge),Ie(L0,Be),Ie(Hc,pe),Ie(Sl,Ae),Ie(w0,X),mt(_e))if(_e.length){const Me=e.exposed||(e.exposed={});_e.forEach(q=>{Object.defineProperty(Me,q,{get:()=>s[q],set:te=>s[q]=te})})}else e.exposed||(e.exposed={});$e&&e.render===In&&(e.render=$e),ee!=null&&(e.inheritAttrs=ee),Re&&(e.components=Re),Te&&(e.directives=Te),X&&gf(e)}function T0(e,n,s=In){mt(e)&&(e=cc(e));for(const l in e){const h=e[l];let p;qt(h)?"default"in h?p=fn(h.from||l,h.default,!0):p=fn(h.from||l):p=fn(h),si(p)?Object.defineProperty(n,l,{enumerable:!0,configurable:!0,get:()=>p.value,set:f=>p.value=f}):n[l]=p}}function _h(e,n,s){Nn(mt(e)?e.map(l=>l.bind(n.proxy)):e.bind(n.proxy),n,s)}function vf(e,n,s,l){let h=l.includes(".")?Rf(s,l):()=>s[l];if(li(e)){const p=n[e];wt(p)&&$i(h,p)}else if(wt(e))$i(h,e.bind(s));else if(qt(e))if(mt(e))e.forEach(p=>vf(p,n,s,l));else{const p=wt(e.handler)?e.handler.bind(s):n[e.handler];wt(p)&&$i(h,p,e)}}function bf(e){const n=e.type,{mixins:s,extends:l}=n,{mixins:h,optionsCache:p,config:{optionMergeStrategies:f}}=e.appContext,y=p.get(n);let v;return y?v=y:!h.length&&!s&&!l?v=n:(v={},h.length&&h.forEach(C=>hl(v,C,f,!0)),hl(v,n,f)),qt(n)&&p.set(n,v),v}function hl(e,n,s,l=!1){const{mixins:h,extends:p}=n;p&&hl(e,p,s,!0),h&&h.forEach(f=>hl(e,f,s,!0));for(const f in n)if(!(l&&f==="expose")){const y=D0[f]||s&&s[f];e[f]=y?y(e[f],n[f]):n[f]}return e}const D0={data:yh,props:vh,emits:vh,methods:Ro,computed:Ro,beforeCreate:Fi,created:Fi,beforeMount:Fi,mounted:Fi,beforeUpdate:Fi,updated:Fi,beforeDestroy:Fi,beforeUnmount:Fi,destroyed:Fi,unmounted:Fi,activated:Fi,deactivated:Fi,errorCaptured:Fi,serverPrefetch:Fi,components:Ro,directives:Ro,watch:O0,provide:yh,inject:R0};function yh(e,n){return n?e?function(){return Ai(wt(e)?e.call(this,this):e,wt(n)?n.call(this,this):n)}:n:e}function R0(e,n){return Ro(cc(e),cc(n))}function cc(e){if(mt(e)){const n={};for(let s=0;s<e.length;s++)n[e[s]]=e[s];return n}return e}function Fi(e,n){return e?[...new Set([].concat(e,n))]:n}function Ro(e,n){return e?Ai(Object.create(null),e,n):n}function vh(e,n){return e?mt(e)&&mt(n)?[...new Set([...e,...n])]:Ai(Object.create(null),gh(e),gh(n??{})):n}function O0(e,n){if(!e)return n;if(!n)return e;const s=Ai(Object.create(null),e);for(const l in n)s[l]=Fi(e[l],n[l]);return s}function xf(){return{app:null,config:{isNativeTag:Lm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let I0=0;function F0(e,n){return function(l,h=null){wt(l)||(l=Ai({},l)),h!=null&&!qt(h)&&(h=null);const p=xf(),f=new WeakSet,y=[];let v=!1;const C=p.app={_uid:I0++,_component:l,_props:h,_container:null,_context:p,_instance:null,version:vg,get config(){return p.config},set config(P){},use(P,...M){return f.has(P)||(P&&wt(P.install)?(f.add(P),P.install(C,...M)):wt(P)&&(f.add(P),P(C,...M))),C},mixin(P){return p.mixins.includes(P)||p.mixins.push(P),C},component(P,M){return M?(p.components[P]=M,C):p.components[P]},directive(P,M){return M?(p.directives[P]=M,C):p.directives[P]},mount(P,M,j){if(!v){const W=C._ceVNode||ni(l,h);return W.appContext=p,j===!0?j="svg":j===!1&&(j=void 0),e(W,P,j),v=!0,C._container=P,P.__vue_app__=C,Tl(W.component)}},onUnmount(P){y.push(P)},unmount(){v&&(Nn(y,C._instance,16),e(null,C._container),delete C._container.__vue_app__)},provide(P,M){return p.provides[P]=M,C},runWithContext(P){const M=Wr;Wr=C;try{return P()}finally{Wr=M}}};return C}}let Wr=null;function Xa(e,n){if(vi){let s=vi.provides;const l=vi.parent&&vi.parent.provides;l===s&&(s=vi.provides=Object.create(l)),s[e]=n}}function fn(e,n,s=!1){const l=vi||Zi;if(l||Wr){const h=Wr?Wr._context.provides:l?l.parent==null?l.vnode.appContext&&l.vnode.appContext.provides:l.parent.provides:void 0;if(h&&e in h)return h[e];if(arguments.length>1)return s&&wt(n)?n.call(l&&l.proxy):n}}function N0(){return!!(vi||Zi||Wr)}const wf={},Lf=()=>Object.create(wf),Cf=e=>Object.getPrototypeOf(e)===wf;function z0(e,n,s,l=!1){const h={},p=Lf();e.propsDefaults=Object.create(null),kf(e,n,h,p);for(const f in e.propsOptions[0])f in h||(h[f]=void 0);s?e.props=l?h:af(h):e.type.props?e.props=h:e.props=p,e.attrs=p}function $0(e,n,s,l){const{props:h,attrs:p,vnode:{patchFlag:f}}=e,y=Rt(h),[v]=e.propsOptions;let C=!1;if((l||f>0)&&!(f&16)){if(f&8){const P=e.vnode.dynamicProps;for(let M=0;M<P.length;M++){let j=P[M];if(Bl(e.emitsOptions,j))continue;const W=n[j];if(v)if(zt(p,j))W!==p[j]&&(p[j]=W,C=!0);else{const D=mn(j);h[D]=hc(v,y,D,W,e,!1)}else W!==p[j]&&(p[j]=W,C=!0)}}}else{kf(e,n,h,p)&&(C=!0);let P;for(const M in y)(!n||!zt(n,M)&&((P=ts(M))===M||!zt(n,P)))&&(v?s&&(s[M]!==void 0||s[P]!==void 0)&&(h[M]=hc(v,y,M,void 0,e,!0)):delete h[M]);if(p!==y)for(const M in p)(!n||!zt(n,M))&&(delete p[M],C=!0)}C&&Qn(e.attrs,"set","")}function kf(e,n,s,l){const[h,p]=e.propsOptions;let f=!1,y;if(n)for(let v in n){if(Io(v))continue;const C=n[v];let P;h&&zt(h,P=mn(v))?!p||!p.includes(P)?s[P]=C:(y||(y={}))[P]=C:Bl(e.emitsOptions,v)||(!(v in l)||C!==l[v])&&(l[v]=C,f=!0)}if(p){const v=Rt(s),C=y||Vt;for(let P=0;P<p.length;P++){const M=p[P];s[M]=hc(h,v,M,C[M],e,!zt(C,M))}}return f}function hc(e,n,s,l,h,p){const f=e[s];if(f!=null){const y=zt(f,"default");if(y&&l===void 0){const v=f.default;if(f.type!==Function&&!f.skipFactory&&wt(v)){const{propsDefaults:C}=h;if(s in C)l=C[s];else{const P=ia(h);l=C[s]=v.call(null,n),P()}}else l=v;h.ce&&h.ce._setProp(s,l)}f[0]&&(p&&!y?l=!1:f[1]&&(l===""||l===ts(s))&&(l=!0))}return l}const j0=new WeakMap;function Ef(e,n,s=!1){const l=s?j0:n.propsCache,h=l.get(e);if(h)return h;const p=e.props,f={},y=[];let v=!1;if(!wt(e)){const P=M=>{v=!0;const[j,W]=Ef(M,n,!0);Ai(f,j),W&&y.push(...W)};!s&&n.mixins.length&&n.mixins.forEach(P),e.extends&&P(e.extends),e.mixins&&e.mixins.forEach(P)}if(!p&&!v)return qt(e)&&l.set(e,Is),Is;if(mt(p))for(let P=0;P<p.length;P++){const M=mn(p[P]);bh(M)&&(f[M]=Vt)}else if(p)for(const P in p){const M=mn(P);if(bh(M)){const j=p[P],W=f[M]=mt(j)||wt(j)?{type:j}:Ai({},j),D=W.type;let V=!1,H=!0;if(mt(D))for(let Ce=0;Ce<D.length;++Ce){const pe=D[Ce],re=wt(pe)&&pe.name;if(re==="Boolean"){V=!0;break}else re==="String"&&(H=!1)}else V=wt(D)&&D.name==="Boolean";W[0]=V,W[1]=H,(V||zt(W,"default"))&&y.push(M)}}const C=[f,y];return qt(e)&&l.set(e,C),C}function bh(e){return e[0]!=="$"&&!Io(e)}const Mf=e=>e[0]==="_"||e==="$stable",Zc=e=>mt(e)?e.map(On):[On(e)],U0=(e,n,s)=>{if(n._n)return n;const l=Hr((...h)=>Zc(n(...h)),s);return l._c=!1,l},Pf=(e,n,s)=>{const l=e._ctx;for(const h in e){if(Mf(h))continue;const p=e[h];if(wt(p))n[h]=U0(h,p,l);else if(p!=null){const f=Zc(p);n[h]=()=>f}}},Sf=(e,n)=>{const s=Zc(n);e.slots.default=()=>s},Bf=(e,n,s)=>{for(const l in n)(s||l!=="_")&&(e[l]=n[l])},G0=(e,n,s)=>{const l=e.slots=Lf();if(e.vnode.shapeFlag&32){const h=n._;h?(Bf(l,n,s),s&&zd(l,"_",h,!0)):Pf(n,l)}else n&&Sf(e,n)},V0=(e,n,s)=>{const{vnode:l,slots:h}=e;let p=!0,f=Vt;if(l.shapeFlag&32){const y=n._;y?s&&y===1?p=!1:Bf(h,n,s):(p=!n.$stable,Pf(n,h)),f=n}else n&&(Sf(e,n),f={default:1});if(p)for(const y in h)!Mf(y)&&f[y]==null&&delete h[y]},Yi=rg;function H0(e){return Z0(e)}function Z0(e,n){const s=Cl();s.__VUE__=!0;const{insert:l,remove:h,patchProp:p,createElement:f,createText:y,createComment:v,setText:C,setElementText:P,parentNode:M,nextSibling:j,setScopeId:W=In,insertStaticContent:D}=e,V=($,Z,le,ze=null,je=null,ue=null,G=void 0,Oe=null,Ne=!!Z.dynamicChildren)=>{if($===Z)return;$&&!So($,Z)&&(ze=Ee($),ve($,je,ue,!0),$=null),Z.patchFlag===-2&&(Ne=!1,Z.dynamicChildren=null);const{type:Fe,ref:Pe,shapeFlag:We}=Z;switch(Fe){case Al:H($,Z,le,ze);break;case Qr:Ce($,Z,le,ze);break;case Ya:$==null&&pe(Z,le,ze,G);break;case Ct:Re($,Z,le,ze,je,ue,G,Oe,Ne);break;default:We&1?$e($,Z,le,ze,je,ue,G,Oe,Ne):We&6?Te($,Z,le,ze,je,ue,G,Oe,Ne):(We&64||We&128)&&Fe.process($,Z,le,ze,je,ue,G,Oe,Ne,Ye)}Pe!=null&&je&&cl(Pe,$&&$.ref,ue,Z||$,!Z)},H=($,Z,le,ze)=>{if($==null)l(Z.el=y(Z.children),le,ze);else{const je=Z.el=$.el;Z.children!==$.children&&C(je,Z.children)}},Ce=($,Z,le,ze)=>{$==null?l(Z.el=v(Z.children||""),le,ze):Z.el=$.el},pe=($,Z,le,ze)=>{[$.el,$.anchor]=D($.children,Z,le,ze,$.el,$.anchor)},re=({el:$,anchor:Z},le,ze)=>{let je;for(;$&&$!==Z;)je=j($),l($,le,ze),$=je;l(Z,le,ze)},Ae=({el:$,anchor:Z})=>{let le;for(;$&&$!==Z;)le=j($),h($),$=le;h(Z)},$e=($,Z,le,ze,je,ue,G,Oe,Ne)=>{Z.type==="svg"?G="svg":Z.type==="math"&&(G="mathml"),$==null?ge(Z,le,ze,je,ue,G,Oe,Ne):X($,Z,je,ue,G,Oe,Ne)},ge=($,Z,le,ze,je,ue,G,Oe)=>{let Ne,Fe;const{props:Pe,shapeFlag:We,transition:at,dirs:ft}=$;if(Ne=$.el=f($.type,ue,Pe&&Pe.is,Pe),We&8?P(Ne,$.children):We&16&&F($.children,Ne,null,ze,je,Vu($,ue),G,Oe),ft&&Ur($,null,ze,"created"),Be(Ne,$,$.scopeId,G,ze),Pe){for(const Tt in Pe)Tt!=="value"&&!Io(Tt)&&p(Ne,Tt,null,Pe[Tt],ue,ze);"value"in Pe&&p(Ne,"value",null,Pe.value,ue),(Fe=Pe.onVnodeBeforeMount)&&Tn(Fe,ze,$)}ft&&Ur($,null,ze,"beforeMount");const yt=q0(je,at);yt&&at.beforeEnter(Ne),l(Ne,Z,le),((Fe=Pe&&Pe.onVnodeMounted)||yt||ft)&&Yi(()=>{Fe&&Tn(Fe,ze,$),yt&&at.enter(Ne),ft&&Ur($,null,ze,"mounted")},je)},Be=($,Z,le,ze,je)=>{if(le&&W($,le),ze)for(let ue=0;ue<ze.length;ue++)W($,ze[ue]);if(je){let ue=je.subTree;if(Z===ue||If(ue.type)&&(ue.ssContent===Z||ue.ssFallback===Z)){const G=je.vnode;Be($,G,G.scopeId,G.slotScopeIds,je.parent)}}},F=($,Z,le,ze,je,ue,G,Oe,Ne=0)=>{for(let Fe=Ne;Fe<$.length;Fe++){const Pe=$[Fe]=Oe?xr($[Fe]):On($[Fe]);V(null,Pe,Z,le,ze,je,ue,G,Oe)}},X=($,Z,le,ze,je,ue,G)=>{const Oe=Z.el=$.el;let{patchFlag:Ne,dynamicChildren:Fe,dirs:Pe}=Z;Ne|=$.patchFlag&16;const We=$.props||Vt,at=Z.props||Vt;let ft;if(le&&Gr(le,!1),(ft=at.onVnodeBeforeUpdate)&&Tn(ft,le,Z,$),Pe&&Ur(Z,$,le,"beforeUpdate"),le&&Gr(le,!0),(We.innerHTML&&at.innerHTML==null||We.textContent&&at.textContent==null)&&P(Oe,""),Fe?_e($.dynamicChildren,Fe,Oe,le,ze,Vu(Z,je),ue):G||q($,Z,Oe,null,le,ze,Vu(Z,je),ue,!1),Ne>0){if(Ne&16)ee(Oe,We,at,le,je);else if(Ne&2&&We.class!==at.class&&p(Oe,"class",null,at.class,je),Ne&4&&p(Oe,"style",We.style,at.style,je),Ne&8){const yt=Z.dynamicProps;for(let Tt=0;Tt<yt.length;Tt++){const Pt=yt[Tt],ri=We[Pt],$t=at[Pt];($t!==ri||Pt==="value")&&p(Oe,Pt,ri,$t,je,le)}}Ne&1&&$.children!==Z.children&&P(Oe,Z.children)}else!G&&Fe==null&&ee(Oe,We,at,le,je);((ft=at.onVnodeUpdated)||Pe)&&Yi(()=>{ft&&Tn(ft,le,Z,$),Pe&&Ur(Z,$,le,"updated")},ze)},_e=($,Z,le,ze,je,ue,G)=>{for(let Oe=0;Oe<Z.length;Oe++){const Ne=$[Oe],Fe=Z[Oe],Pe=Ne.el&&(Ne.type===Ct||!So(Ne,Fe)||Ne.shapeFlag&70)?M(Ne.el):le;V(Ne,Fe,Pe,null,ze,je,ue,G,!0)}},ee=($,Z,le,ze,je)=>{if(Z!==le){if(Z!==Vt)for(const ue in Z)!Io(ue)&&!(ue in le)&&p($,ue,Z[ue],null,je,ze);for(const ue in le){if(Io(ue))continue;const G=le[ue],Oe=Z[ue];G!==Oe&&ue!=="value"&&p($,ue,Oe,G,je,ze)}"value"in le&&p($,"value",Z.value,le.value,je)}},Re=($,Z,le,ze,je,ue,G,Oe,Ne)=>{const Fe=Z.el=$?$.el:y(""),Pe=Z.anchor=$?$.anchor:y("");let{patchFlag:We,dynamicChildren:at,slotScopeIds:ft}=Z;ft&&(Oe=Oe?Oe.concat(ft):ft),$==null?(l(Fe,le,ze),l(Pe,le,ze),F(Z.children||[],le,Pe,je,ue,G,Oe,Ne)):We>0&&We&64&&at&&$.dynamicChildren?(_e($.dynamicChildren,at,le,je,ue,G,Oe),(Z.key!=null||je&&Z===je.subTree)&&Af($,Z,!0)):q($,Z,le,Pe,je,ue,G,Oe,Ne)},Te=($,Z,le,ze,je,ue,G,Oe,Ne)=>{Z.slotScopeIds=Oe,$==null?Z.shapeFlag&512?je.ctx.activate(Z,le,ze,G,Ne):ie(Z,le,ze,je,ue,G,Ne):ke($,Z,Ne)},ie=($,Z,le,ze,je,ue,G)=>{const Oe=$.component=dg($,ze,je);if(_f($)&&(Oe.ctx.renderer=Ye),fg(Oe,!1,G),Oe.asyncDep){if(je&&je.registerDep(Oe,Ie,G),!$.el){const Ne=Oe.subTree=ni(Qr);Ce(null,Ne,Z,le)}}else Ie(Oe,$,Z,le,je,ue,G)},ke=($,Z,le)=>{const ze=Z.component=$.component;if(ig($,Z,le))if(ze.asyncDep&&!ze.asyncResolved){Me(ze,Z,le);return}else ze.next=Z,ze.update();else Z.el=$.el,ze.vnode=Z},Ie=($,Z,le,ze,je,ue,G)=>{const Oe=()=>{if($.isMounted){let{next:We,bu:at,u:ft,parent:yt,vnode:Tt}=$;{const ui=Tf($);if(ui){We&&(We.el=Tt.el,Me($,We,G)),ui.asyncDep.then(()=>{$.isUnmounted||Oe()});return}}let Pt=We,ri;Gr($,!1),We?(We.el=Tt.el,Me($,We,G)):We=Tt,at&&Ja(at),(ri=We.props&&We.props.onVnodeBeforeUpdate)&&Tn(ri,yt,We,Tt),Gr($,!0);const $t=wh($),Ti=$.subTree;$.subTree=$t,V(Ti,$t,M(Ti.el),Ee(Ti),$,je,ue),We.el=$t.el,Pt===null&&ng($,$t.el),ft&&Yi(ft,je),(ri=We.props&&We.props.onVnodeUpdated)&&Yi(()=>Tn(ri,yt,We,Tt),je)}else{let We;const{el:at,props:ft}=Z,{bm:yt,m:Tt,parent:Pt,root:ri,type:$t}=$,Ti=zo(Z);Gr($,!1),yt&&Ja(yt),!Ti&&(We=ft&&ft.onVnodeBeforeMount)&&Tn(We,Pt,Z),Gr($,!0);{ri.ce&&ri.ce._injectChildStyle($t);const ui=$.subTree=wh($);V(null,ui,le,ze,$,je,ue),Z.el=ui.el}if(Tt&&Yi(Tt,je),!Ti&&(We=ft&&ft.onVnodeMounted)){const ui=Z;Yi(()=>Tn(We,Pt,ui),je)}(Z.shapeFlag&256||Pt&&zo(Pt.vnode)&&Pt.vnode.shapeFlag&256)&&$.a&&Yi($.a,je),$.isMounted=!0,Z=le=ze=null}};$.scope.on();const Ne=$.effect=new Zd(Oe);$.scope.off();const Fe=$.update=Ne.run.bind(Ne),Pe=$.job=Ne.runIfDirty.bind(Ne);Pe.i=$,Pe.id=$.uid,Ne.scheduler=()=>Gc(Pe),Gr($,!0),Fe()},Me=($,Z,le)=>{Z.component=$;const ze=$.vnode.props;$.vnode=Z,$.next=null,$0($,Z.props,ze,le),V0($,Z.children,le),Er(),ph($),Mr()},q=($,Z,le,ze,je,ue,G,Oe,Ne=!1)=>{const Fe=$&&$.children,Pe=$?$.shapeFlag:0,We=Z.children,{patchFlag:at,shapeFlag:ft}=Z;if(at>0){if(at&128){se(Fe,We,le,ze,je,ue,G,Oe,Ne);return}else if(at&256){te(Fe,We,le,ze,je,ue,G,Oe,Ne);return}}ft&8?(Pe&16&&Xe(Fe,je,ue),We!==Fe&&P(le,We)):Pe&16?ft&16?se(Fe,We,le,ze,je,ue,G,Oe,Ne):Xe(Fe,je,ue,!0):(Pe&8&&P(le,""),ft&16&&F(We,le,ze,je,ue,G,Oe,Ne))},te=($,Z,le,ze,je,ue,G,Oe,Ne)=>{$=$||Is,Z=Z||Is;const Fe=$.length,Pe=Z.length,We=Math.min(Fe,Pe);let at;for(at=0;at<We;at++){const ft=Z[at]=Ne?xr(Z[at]):On(Z[at]);V($[at],ft,le,null,je,ue,G,Oe,Ne)}Fe>Pe?Xe($,je,ue,!0,!1,We):F(Z,le,ze,je,ue,G,Oe,Ne,We)},se=($,Z,le,ze,je,ue,G,Oe,Ne)=>{let Fe=0;const Pe=Z.length;let We=$.length-1,at=Pe-1;for(;Fe<=We&&Fe<=at;){const ft=$[Fe],yt=Z[Fe]=Ne?xr(Z[Fe]):On(Z[Fe]);if(So(ft,yt))V(ft,yt,le,null,je,ue,G,Oe,Ne);else break;Fe++}for(;Fe<=We&&Fe<=at;){const ft=$[We],yt=Z[at]=Ne?xr(Z[at]):On(Z[at]);if(So(ft,yt))V(ft,yt,le,null,je,ue,G,Oe,Ne);else break;We--,at--}if(Fe>We){if(Fe<=at){const ft=at+1,yt=ft<Pe?Z[ft].el:ze;for(;Fe<=at;)V(null,Z[Fe]=Ne?xr(Z[Fe]):On(Z[Fe]),le,yt,je,ue,G,Oe,Ne),Fe++}}else if(Fe>at)for(;Fe<=We;)ve($[Fe],je,ue,!0),Fe++;else{const ft=Fe,yt=Fe,Tt=new Map;for(Fe=yt;Fe<=at;Fe++){const Qt=Z[Fe]=Ne?xr(Z[Fe]):On(Z[Fe]);Qt.key!=null&&Tt.set(Qt.key,Fe)}let Pt,ri=0;const $t=at-yt+1;let Ti=!1,ui=0;const Cn=new Array($t);for(Fe=0;Fe<$t;Fe++)Cn[Fe]=0;for(Fe=ft;Fe<=We;Fe++){const Qt=$[Fe];if(ri>=$t){ve(Qt,je,ue,!0);continue}let Di;if(Qt.key!=null)Di=Tt.get(Qt.key);else for(Pt=yt;Pt<=at;Pt++)if(Cn[Pt-yt]===0&&So(Qt,Z[Pt])){Di=Pt;break}Di===void 0?ve(Qt,je,ue,!0):(Cn[Di-yt]=Fe+1,Di>=ui?ui=Di:Ti=!0,V(Qt,Z[Di],le,null,je,ue,G,Oe,Ne),ri++)}const zn=Ti?K0(Cn):Is;for(Pt=zn.length-1,Fe=$t-1;Fe>=0;Fe--){const Qt=yt+Fe,Di=Z[Qt],nn=Qt+1<Pe?Z[Qt+1].el:ze;Cn[Fe]===0?V(null,Di,le,nn,je,ue,G,Oe,Ne):Ti&&(Pt<0||Fe!==zn[Pt]?xe(Di,le,nn,2):Pt--)}}},xe=($,Z,le,ze,je=null)=>{const{el:ue,type:G,transition:Oe,children:Ne,shapeFlag:Fe}=$;if(Fe&6){xe($.component.subTree,Z,le,ze);return}if(Fe&128){$.suspense.move(Z,le,ze);return}if(Fe&64){G.move($,Z,le,Ye);return}if(G===Ct){l(ue,Z,le);for(let We=0;We<Ne.length;We++)xe(Ne[We],Z,le,ze);l($.anchor,Z,le);return}if(G===Ya){re($,Z,le);return}if(ze!==2&&Fe&1&&Oe)if(ze===0)Oe.beforeEnter(ue),l(ue,Z,le),Yi(()=>Oe.enter(ue),je);else{const{leave:We,delayLeave:at,afterLeave:ft}=Oe,yt=()=>l(ue,Z,le),Tt=()=>{We(ue,()=>{yt(),ft&&ft()})};at?at(ue,yt,Tt):Tt()}else l(ue,Z,le)},ve=($,Z,le,ze=!1,je=!1)=>{const{type:ue,props:G,ref:Oe,children:Ne,dynamicChildren:Fe,shapeFlag:Pe,patchFlag:We,dirs:at,cacheIndex:ft}=$;if(We===-2&&(je=!1),Oe!=null&&cl(Oe,null,le,$,!0),ft!=null&&(Z.renderCache[ft]=void 0),Pe&256){Z.ctx.deactivate($);return}const yt=Pe&1&&at,Tt=!zo($);let Pt;if(Tt&&(Pt=G&&G.onVnodeBeforeUnmount)&&Tn(Pt,Z,$),Pe&6)nt($.component,le,ze);else{if(Pe&128){$.suspense.unmount(le,ze);return}yt&&Ur($,null,Z,"beforeUnmount"),Pe&64?$.type.remove($,Z,le,Ye,ze):Fe&&!Fe.hasOnce&&(ue!==Ct||We>0&&We&64)?Xe(Fe,Z,le,!1,!0):(ue===Ct&&We&384||!je&&Pe&16)&&Xe(Ne,Z,le),ze&&Je($)}(Tt&&(Pt=G&&G.onVnodeUnmounted)||yt)&&Yi(()=>{Pt&&Tn(Pt,Z,$),yt&&Ur($,null,Z,"unmounted")},le)},Je=$=>{const{type:Z,el:le,anchor:ze,transition:je}=$;if(Z===Ct){et(le,ze);return}if(Z===Ya){Ae($);return}const ue=()=>{h(le),je&&!je.persisted&&je.afterLeave&&je.afterLeave()};if($.shapeFlag&1&&je&&!je.persisted){const{leave:G,delayLeave:Oe}=je,Ne=()=>G(le,ue);Oe?Oe($.el,ue,Ne):Ne()}else ue()},et=($,Z)=>{let le;for(;$!==Z;)le=j($),h($),$=le;h(Z)},nt=($,Z,le)=>{const{bum:ze,scope:je,job:ue,subTree:G,um:Oe,m:Ne,a:Fe}=$;xh(Ne),xh(Fe),ze&&Ja(ze),je.stop(),ue&&(ue.flags|=8,ve(G,$,Z,le)),Oe&&Yi(Oe,Z),Yi(()=>{$.isUnmounted=!0},Z),Z&&Z.pendingBranch&&!Z.isUnmounted&&$.asyncDep&&!$.asyncResolved&&$.suspenseId===Z.pendingId&&(Z.deps--,Z.deps===0&&Z.resolve())},Xe=($,Z,le,ze=!1,je=!1,ue=0)=>{for(let G=ue;G<$.length;G++)ve($[G],Z,le,ze,je)},Ee=$=>{if($.shapeFlag&6)return Ee($.component.subTree);if($.shapeFlag&128)return $.suspense.next();const Z=j($.anchor||$.el),le=Z&&Z[p0];return le?j(le):Z};let Ke=!1;const qe=($,Z,le)=>{$==null?Z._vnode&&ve(Z._vnode,null,null,!0):V(Z._vnode||null,$,Z,null,null,null,le),Z._vnode=$,Ke||(Ke=!0,ph(),ff(),Ke=!1)},Ye={p:V,um:ve,m:xe,r:Je,mt:ie,mc:F,pc:q,pbc:_e,n:Ee,o:e};return{render:qe,hydrate:void 0,createApp:F0(qe)}}function Vu({type:e,props:n},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:s}function Gr({effect:e,job:n},s){s?(e.flags|=32,n.flags|=4):(e.flags&=-33,n.flags&=-5)}function q0(e,n){return(!e||e&&!e.pendingBranch)&&n&&!n.persisted}function Af(e,n,s=!1){const l=e.children,h=n.children;if(mt(l)&&mt(h))for(let p=0;p<l.length;p++){const f=l[p];let y=h[p];y.shapeFlag&1&&!y.dynamicChildren&&((y.patchFlag<=0||y.patchFlag===32)&&(y=h[p]=xr(h[p]),y.el=f.el),!s&&y.patchFlag!==-2&&Af(f,y)),y.type===Al&&(y.el=f.el)}}function K0(e){const n=e.slice(),s=[0];let l,h,p,f,y;const v=e.length;for(l=0;l<v;l++){const C=e[l];if(C!==0){if(h=s[s.length-1],e[h]<C){n[l]=h,s.push(l);continue}for(p=0,f=s.length-1;p<f;)y=p+f>>1,e[s[y]]<C?p=y+1:f=y;C<e[s[p]]&&(p>0&&(n[l]=s[p-1]),s[p]=l)}}for(p=s.length,f=s[p-1];p-- >0;)s[p]=f,f=n[f];return s}function Tf(e){const n=e.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:Tf(n)}function xh(e){if(e)for(let n=0;n<e.length;n++)e[n].flags|=8}const W0=Symbol.for("v-scx"),J0=()=>fn(W0);function $i(e,n,s){return Df(e,n,s)}function Df(e,n,s=Vt){const{immediate:l,deep:h,flush:p,once:f}=s,y=Ai({},s),v=n&&l||!n&&p!=="post";let C;if(Wo){if(p==="sync"){const W=J0();C=W.__watcherHandles||(W.__watcherHandles=[])}else if(!v){const W=()=>{};return W.stop=In,W.resume=In,W.pause=In,W}}const P=vi;y.call=(W,D,V)=>Nn(W,P,D,V);let M=!1;p==="post"?y.scheduler=W=>{Yi(W,P&&P.suspense)}:p!=="sync"&&(M=!0,y.scheduler=(W,D)=>{D?W():Gc(W)}),y.augmentJob=W=>{n&&(W.flags|=4),M&&(W.flags|=2,P&&(W.id=P.uid,W.i=P))};const j=c0(e,n,y);return Wo&&(C?C.push(j):v&&j()),j}function X0(e,n,s){const l=this.proxy,h=li(e)?e.includes(".")?Rf(l,e):()=>l[e]:e.bind(l,l);let p;wt(n)?p=n:(p=n.handler,s=n);const f=ia(this),y=Df(h,p.bind(l),s);return f(),y}function Rf(e,n){const s=n.split(".");return()=>{let l=e;for(let h=0;h<s.length&&l;h++)l=l[s[h]];return l}}const Y0=(e,n)=>n==="modelValue"||n==="model-value"?e.modelModifiers:e[`${n}Modifiers`]||e[`${mn(n)}Modifiers`]||e[`${ts(n)}Modifiers`];function Q0(e,n,...s){if(e.isUnmounted)return;const l=e.vnode.props||Vt;let h=s;const p=n.startsWith("update:"),f=p&&Y0(l,n.slice(7));f&&(f.trim&&(h=s.map(P=>li(P)?P.trim():P)),f.number&&(h=s.map(sl)));let y,v=l[y=Nu(n)]||l[y=Nu(mn(n))];!v&&p&&(v=l[y=Nu(ts(n))]),v&&Nn(v,e,6,h);const C=l[y+"Once"];if(C){if(!e.emitted)e.emitted={};else if(e.emitted[y])return;e.emitted[y]=!0,Nn(C,e,6,h)}}function Of(e,n,s=!1){const l=n.emitsCache,h=l.get(e);if(h!==void 0)return h;const p=e.emits;let f={},y=!1;if(!wt(e)){const v=C=>{const P=Of(C,n,!0);P&&(y=!0,Ai(f,P))};!s&&n.mixins.length&&n.mixins.forEach(v),e.extends&&v(e.extends),e.mixins&&e.mixins.forEach(v)}return!p&&!y?(qt(e)&&l.set(e,null),null):(mt(p)?p.forEach(v=>f[v]=null):Ai(f,p),qt(e)&&l.set(e,f),f)}function Bl(e,n){return!e||!xl(n)?!1:(n=n.slice(2).replace(/Once$/,""),zt(e,n[0].toLowerCase()+n.slice(1))||zt(e,ts(n))||zt(e,n))}function wh(e){const{type:n,vnode:s,proxy:l,withProxy:h,propsOptions:[p],slots:f,attrs:y,emit:v,render:C,renderCache:P,props:M,data:j,setupState:W,ctx:D,inheritAttrs:V}=e,H=ul(e);let Ce,pe;try{if(s.shapeFlag&4){const Ae=h||l,$e=Ae;Ce=On(C.call($e,Ae,P,M,W,j,D)),pe=y}else{const Ae=n;Ce=On(Ae.length>1?Ae(M,{attrs:y,slots:f,emit:v}):Ae(M,null)),pe=n.props?y:eg(y)}}catch(Ae){jo.length=0,Ml(Ae,e,1),Ce=ni(Qr)}let re=Ce;if(pe&&V!==!1){const Ae=Object.keys(pe),{shapeFlag:$e}=re;Ae.length&&$e&7&&(p&&Ae.some(Ac)&&(pe=tg(pe,p)),re=$s(re,pe,!1,!0))}return s.dirs&&(re=$s(re,null,!1,!0),re.dirs=re.dirs?re.dirs.concat(s.dirs):s.dirs),s.transition&&Vc(re,s.transition),Ce=re,ul(H),Ce}const eg=e=>{let n;for(const s in e)(s==="class"||s==="style"||xl(s))&&((n||(n={}))[s]=e[s]);return n},tg=(e,n)=>{const s={};for(const l in e)(!Ac(l)||!(l.slice(9)in n))&&(s[l]=e[l]);return s};function ig(e,n,s){const{props:l,children:h,component:p}=e,{props:f,children:y,patchFlag:v}=n,C=p.emitsOptions;if(n.dirs||n.transition)return!0;if(s&&v>=0){if(v&1024)return!0;if(v&16)return l?Lh(l,f,C):!!f;if(v&8){const P=n.dynamicProps;for(let M=0;M<P.length;M++){const j=P[M];if(f[j]!==l[j]&&!Bl(C,j))return!0}}}else return(h||y)&&(!y||!y.$stable)?!0:l===f?!1:l?f?Lh(l,f,C):!0:!!f;return!1}function Lh(e,n,s){const l=Object.keys(n);if(l.length!==Object.keys(e).length)return!0;for(let h=0;h<l.length;h++){const p=l[h];if(n[p]!==e[p]&&!Bl(s,p))return!0}return!1}function ng({vnode:e,parent:n},s){for(;n;){const l=n.subTree;if(l.suspense&&l.suspense.activeBranch===e&&(l.el=e.el),l===e)(e=n.vnode).el=s,n=n.parent;else break}}const If=e=>e.__isSuspense;function rg(e,n){n&&n.pendingBranch?mt(e)?n.effects.push(...e):n.effects.push(e):f0(e)}const Ct=Symbol.for("v-fgt"),Al=Symbol.for("v-txt"),Qr=Symbol.for("v-cmt"),Ya=Symbol.for("v-stc"),jo=[];let en=null;function ce(e=!1){jo.push(en=e?null:[])}function sg(){jo.pop(),en=jo[jo.length-1]||null}let Ko=1;function Ch(e,n=!1){Ko+=e,e<0&&en&&n&&(en.hasOnce=!0)}function Ff(e){return e.dynamicChildren=Ko>0?en||Is:null,sg(),Ko>0&&en&&en.push(e),e}function ye(e,n,s,l,h,p){return Ff(w(e,n,s,l,h,p,!0))}function ir(e,n,s,l,h){return Ff(ni(e,n,s,l,h,!0))}function dl(e){return e?e.__v_isVNode===!0:!1}function So(e,n){return e.type===n.type&&e.key===n.key}const Nf=({key:e})=>e??null,Qa=({ref:e,ref_key:n,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?li(e)||si(e)||wt(e)?{i:Zi,r:e,k:n,f:!!s}:e:null);function w(e,n=null,s=null,l=0,h=null,p=e===Ct?0:1,f=!1,y=!1){const v={__v_isVNode:!0,__v_skip:!0,type:e,props:n,key:n&&Nf(n),ref:n&&Qa(n),scopeId:mf,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:p,patchFlag:l,dynamicProps:h,dynamicChildren:null,appContext:null,ctx:Zi};return y?(qc(v,s),p&128&&e.normalize(v)):s&&(v.shapeFlag|=li(s)?8:16),Ko>0&&!f&&en&&(v.patchFlag>0||p&6)&&v.patchFlag!==32&&en.push(v),v}const ni=og;function og(e,n=null,s=null,l=0,h=null,p=!1){if((!e||e===P0)&&(e=Qr),dl(e)){const y=$s(e,n,!0);return s&&qc(y,s),Ko>0&&!p&&en&&(y.shapeFlag&6?en[en.indexOf(e)]=y:en.push(y)),y.patchFlag=-2,y}if(yg(e)&&(e=e.__vccOpts),n){n=ag(n);let{class:y,style:v}=n;y&&!li(y)&&(n.class=Bi(y)),qt(v)&&(jc(v)&&!mt(v)&&(v=Ai({},v)),n.style=kl(v))}const f=li(e)?1:If(e)?128:m0(e)?64:qt(e)?4:wt(e)?2:0;return w(e,n,s,l,h,f,p,!0)}function ag(e){return e?jc(e)||Cf(e)?Ai({},e):e:null}function $s(e,n,s=!1,l=!1){const{props:h,ref:p,patchFlag:f,children:y,transition:v}=e,C=n?ug(h||{},n):h,P={__v_isVNode:!0,__v_skip:!0,type:e.type,props:C,key:C&&Nf(C),ref:n&&n.ref?s&&p?mt(p)?p.concat(Qa(n)):[p,Qa(n)]:Qa(n):p,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:y,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:n&&e.type!==Ct?f===-1?16:f|16:f,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:v,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&$s(e.ssContent),ssFallback:e.ssFallback&&$s(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return v&&l&&Vc(P,v.clone(P)),P}function Wt(e=" ",n=0){return ni(Al,null,e,n)}function lg(e,n){const s=ni(Ya,null,e);return s.staticCount=n,s}function ct(e="",n=!1){return n?(ce(),ir(Qr,null,e)):ni(Qr,null,e)}function On(e){return e==null||typeof e=="boolean"?ni(Qr):mt(e)?ni(Ct,null,e.slice()):dl(e)?xr(e):ni(Al,null,String(e))}function xr(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:$s(e)}function qc(e,n){let s=0;const{shapeFlag:l}=e;if(n==null)n=null;else if(mt(n))s=16;else if(typeof n=="object")if(l&65){const h=n.default;h&&(h._c&&(h._d=!1),qc(e,h()),h._c&&(h._d=!0));return}else{s=32;const h=n._;!h&&!Cf(n)?n._ctx=Zi:h===3&&Zi&&(Zi.slots._===1?n._=1:(n._=2,e.patchFlag|=1024))}else wt(n)?(n={default:n,_ctx:Zi},s=32):(n=String(n),l&64?(s=16,n=[Wt(n)]):s=8);e.children=n,e.shapeFlag|=s}function ug(...e){const n={};for(let s=0;s<e.length;s++){const l=e[s];for(const h in l)if(h==="class")n.class!==l.class&&(n.class=Bi([n.class,l.class]));else if(h==="style")n.style=kl([n.style,l.style]);else if(xl(h)){const p=n[h],f=l[h];f&&p!==f&&!(mt(p)&&p.includes(f))&&(n[h]=p?[].concat(p,f):f)}else h!==""&&(n[h]=l[h])}return n}function Tn(e,n,s,l=null){Nn(e,n,7,[s,l])}const cg=xf();let hg=0;function dg(e,n,s){const l=e.type,h=(n?n.appContext:e.appContext)||cg,p={uid:hg++,vnode:e,type:l,parent:n,appContext:h,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Gd(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(h.provides),ids:n?n.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ef(l,h),emitsOptions:Of(l,h),emit:null,emitted:null,propsDefaults:Vt,inheritAttrs:l.inheritAttrs,ctx:Vt,data:Vt,props:Vt,attrs:Vt,slots:Vt,refs:Vt,setupState:Vt,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return p.ctx={_:p},p.root=n?n.root:p,p.emit=Q0.bind(null,p),e.ce&&e.ce(p),p}let vi=null,fl,dc;{const e=Cl(),n=(s,l)=>{let h;return(h=e[s])||(h=e[s]=[]),h.push(l),p=>{h.length>1?h.forEach(f=>f(p)):h[0](p)}};fl=n("__VUE_INSTANCE_SETTERS__",s=>vi=s),dc=n("__VUE_SSR_SETTERS__",s=>Wo=s)}const ia=e=>{const n=vi;return fl(e),e.scope.on(),()=>{e.scope.off(),fl(n)}},kh=()=>{vi&&vi.scope.off(),fl(null)};function zf(e){return e.vnode.shapeFlag&4}let Wo=!1;function fg(e,n=!1,s=!1){n&&dc(n);const{props:l,children:h}=e.vnode,p=zf(e);z0(e,l,p,n),G0(e,h,s);const f=p?pg(e,n):void 0;return n&&dc(!1),f}function pg(e,n){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,B0);const{setup:l}=s;if(l){Er();const h=e.setupContext=l.length>1?gg(e):null,p=ia(e),f=ta(l,e,0,[e.props,h]),y=Id(f);if(Mr(),p(),(y||e.sp)&&!zo(e)&&gf(e),y){if(f.then(kh,kh),n)return f.then(v=>{Eh(e,v)}).catch(v=>{Ml(v,e,0)});e.asyncDep=f}else Eh(e,f)}else $f(e)}function Eh(e,n,s){wt(n)?e.type.__ssrInlineRender?e.ssrRender=n:e.render=n:qt(n)&&(e.setupState=cf(n)),$f(e)}function $f(e,n,s){const l=e.type;e.render||(e.render=l.render||In);{const h=ia(e);Er();try{A0(e)}finally{Mr(),h()}}}const mg={get(e,n){return Mi(e,"get",""),e[n]}};function gg(e){const n=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,mg),slots:e.slots,emit:e.emit,expose:n}}function Tl(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(cf(Uc(e.exposed)),{get(n,s){if(s in n)return n[s];if(s in $o)return $o[s](e)},has(n,s){return s in n||s in $o}})):e.proxy}function _g(e,n=!0){return wt(e)?e.displayName||e.name:e.name||n&&e.__name}function yg(e){return wt(e)&&"__vccOpts"in e}const Et=(e,n)=>l0(e,n,Wo);function jf(e,n,s){const l=arguments.length;return l===2?qt(n)&&!mt(n)?dl(n)?ni(e,null,[n]):ni(e,n):ni(e,null,n):(l>3?s=Array.prototype.slice.call(arguments,2):l===3&&dl(s)&&(s=[s]),ni(e,n,s))}const vg="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let fc;const Mh=typeof window<"u"&&window.trustedTypes;if(Mh)try{fc=Mh.createPolicy("vue",{createHTML:e=>e})}catch{}const Uf=fc?e=>fc.createHTML(e):e=>e,bg="http://www.w3.org/2000/svg",xg="http://www.w3.org/1998/Math/MathML",Yn=typeof document<"u"?document:null,Ph=Yn&&Yn.createElement("template"),wg={insert:(e,n,s)=>{n.insertBefore(e,s||null)},remove:e=>{const n=e.parentNode;n&&n.removeChild(e)},createElement:(e,n,s,l)=>{const h=n==="svg"?Yn.createElementNS(bg,e):n==="mathml"?Yn.createElementNS(xg,e):s?Yn.createElement(e,{is:s}):Yn.createElement(e);return e==="select"&&l&&l.multiple!=null&&h.setAttribute("multiple",l.multiple),h},createText:e=>Yn.createTextNode(e),createComment:e=>Yn.createComment(e),setText:(e,n)=>{e.nodeValue=n},setElementText:(e,n)=>{e.textContent=n},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Yn.querySelector(e),setScopeId(e,n){e.setAttribute(n,"")},insertStaticContent(e,n,s,l,h,p){const f=s?s.previousSibling:n.lastChild;if(h&&(h===p||h.nextSibling))for(;n.insertBefore(h.cloneNode(!0),s),!(h===p||!(h=h.nextSibling)););else{Ph.innerHTML=Uf(l==="svg"?`<svg>${e}</svg>`:l==="mathml"?`<math>${e}</math>`:e);const y=Ph.content;if(l==="svg"||l==="mathml"){const v=y.firstChild;for(;v.firstChild;)y.appendChild(v.firstChild);y.removeChild(v)}n.insertBefore(y,s)}return[f?f.nextSibling:n.firstChild,s?s.previousSibling:n.lastChild]}},Lg=Symbol("_vtc");function Cg(e,n,s){const l=e[Lg];l&&(n=(n?[n,...l]:[...l]).join(" ")),n==null?e.removeAttribute("class"):s?e.setAttribute("class",n):e.className=n}const pl=Symbol("_vod"),Gf=Symbol("_vsh"),Sh={beforeMount(e,{value:n},{transition:s}){e[pl]=e.style.display==="none"?"":e.style.display,s&&n?s.beforeEnter(e):Bo(e,n)},mounted(e,{value:n},{transition:s}){s&&n&&s.enter(e)},updated(e,{value:n,oldValue:s},{transition:l}){!n!=!s&&(l?n?(l.beforeEnter(e),Bo(e,!0),l.enter(e)):l.leave(e,()=>{Bo(e,!1)}):Bo(e,n))},beforeUnmount(e,{value:n}){Bo(e,n)}};function Bo(e,n){e.style.display=n?e[pl]:"none",e[Gf]=!n}const kg=Symbol(""),Eg=/(^|;)\s*display\s*:/;function Mg(e,n,s){const l=e.style,h=li(s);let p=!1;if(s&&!h){if(n)if(li(n))for(const f of n.split(";")){const y=f.slice(0,f.indexOf(":")).trim();s[y]==null&&el(l,y,"")}else for(const f in n)s[f]==null&&el(l,f,"");for(const f in s)f==="display"&&(p=!0),el(l,f,s[f])}else if(h){if(n!==s){const f=l[kg];f&&(s+=";"+f),l.cssText=s,p=Eg.test(s)}}else n&&e.removeAttribute("style");pl in e&&(e[pl]=p?l.display:"",e[Gf]&&(l.display="none"))}const Bh=/\s*!important$/;function el(e,n,s){if(mt(s))s.forEach(l=>el(e,n,l));else if(s==null&&(s=""),n.startsWith("--"))e.setProperty(n,s);else{const l=Pg(e,n);Bh.test(s)?e.setProperty(ts(l),s.replace(Bh,""),"important"):e[l]=s}}const Ah=["Webkit","Moz","ms"],Hu={};function Pg(e,n){const s=Hu[n];if(s)return s;let l=mn(n);if(l!=="filter"&&l in e)return Hu[n]=l;l=Ll(l);for(let h=0;h<Ah.length;h++){const p=Ah[h]+l;if(p in e)return Hu[n]=p}return n}const Th="http://www.w3.org/1999/xlink";function Dh(e,n,s,l,h,p=Dm(n)){l&&n.startsWith("xlink:")?s==null?e.removeAttributeNS(Th,n.slice(6,n.length)):e.setAttributeNS(Th,n,s):s==null||p&&!$d(s)?e.removeAttribute(n):e.setAttribute(n,p?"":Fn(s)?String(s):s)}function Rh(e,n,s,l,h){if(n==="innerHTML"||n==="textContent"){s!=null&&(e[n]=n==="innerHTML"?Uf(s):s);return}const p=e.tagName;if(n==="value"&&p!=="PROGRESS"&&!p.includes("-")){const y=p==="OPTION"?e.getAttribute("value")||"":e.value,v=s==null?e.type==="checkbox"?"on":"":String(s);(y!==v||!("_value"in e))&&(e.value=v),s==null&&e.removeAttribute(n),e._value=s;return}let f=!1;if(s===""||s==null){const y=typeof e[n];y==="boolean"?s=$d(s):s==null&&y==="string"?(s="",f=!0):y==="number"&&(s=0,f=!0)}try{e[n]=s}catch{}f&&e.removeAttribute(h||n)}function tr(e,n,s,l){e.addEventListener(n,s,l)}function Sg(e,n,s,l){e.removeEventListener(n,s,l)}const Oh=Symbol("_vei");function Bg(e,n,s,l,h=null){const p=e[Oh]||(e[Oh]={}),f=p[n];if(l&&f)f.value=l;else{const[y,v]=Ag(n);if(l){const C=p[n]=Rg(l,h);tr(e,y,C,v)}else f&&(Sg(e,y,f,v),p[n]=void 0)}}const Ih=/(?:Once|Passive|Capture)$/;function Ag(e){let n;if(Ih.test(e)){n={};let l;for(;l=e.match(Ih);)e=e.slice(0,e.length-l[0].length),n[l[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ts(e.slice(2)),n]}let Zu=0;const Tg=Promise.resolve(),Dg=()=>Zu||(Tg.then(()=>Zu=0),Zu=Date.now());function Rg(e,n){const s=l=>{if(!l._vts)l._vts=Date.now();else if(l._vts<=s.attached)return;Nn(Og(l,s.value),n,5,[l])};return s.value=e,s.attached=Dg(),s}function Og(e,n){if(mt(n)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},n.map(l=>h=>!h._stopped&&l&&l(h))}else return n}const Fh=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Ig=(e,n,s,l,h,p)=>{const f=h==="svg";n==="class"?Cg(e,l,f):n==="style"?Mg(e,s,l):xl(n)?Ac(n)||Bg(e,n,s,l,p):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):Fg(e,n,l,f))?(Rh(e,n,l),!e.tagName.includes("-")&&(n==="value"||n==="checked"||n==="selected")&&Dh(e,n,l,f,p,n!=="value")):e._isVueCE&&(/[A-Z]/.test(n)||!li(l))?Rh(e,mn(n),l,p,n):(n==="true-value"?e._trueValue=l:n==="false-value"&&(e._falseValue=l),Dh(e,n,l,f))};function Fg(e,n,s,l){if(l)return!!(n==="innerHTML"||n==="textContent"||n in e&&Fh(n)&&wt(s));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&e.tagName==="INPUT"||n==="type"&&e.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const h=e.tagName;if(h==="IMG"||h==="VIDEO"||h==="CANVAS"||h==="SOURCE")return!1}return Fh(n)&&li(s)?!1:n in e}const kr=e=>{const n=e.props["onUpdate:modelValue"]||!1;return mt(n)?s=>Ja(n,s):n};function Ng(e){e.target.composing=!0}function Nh(e){const n=e.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const pn=Symbol("_assign"),Yt={created(e,{modifiers:{lazy:n,trim:s,number:l}},h){e[pn]=kr(h);const p=l||h.props&&h.props.type==="number";tr(e,n?"change":"input",f=>{if(f.target.composing)return;let y=e.value;s&&(y=y.trim()),p&&(y=sl(y)),e[pn](y)}),s&&tr(e,"change",()=>{e.value=e.value.trim()}),n||(tr(e,"compositionstart",Ng),tr(e,"compositionend",Nh),tr(e,"change",Nh))},mounted(e,{value:n}){e.value=n??""},beforeUpdate(e,{value:n,oldValue:s,modifiers:{lazy:l,trim:h,number:p}},f){if(e[pn]=kr(f),e.composing)return;const y=(p||e.type==="number")&&!/^0\d/.test(e.value)?sl(e.value):e.value,v=n??"";y!==v&&(document.activeElement===e&&e.type!=="range"&&(l&&n===s||h&&e.value.trim()===v)||(e.value=v))}},Vf={deep:!0,created(e,n,s){e[pn]=kr(s),tr(e,"change",()=>{const l=e._modelValue,h=js(e),p=e.checked,f=e[pn];if(mt(l)){const y=Rc(l,h),v=y!==-1;if(p&&!v)f(l.concat(h));else if(!p&&v){const C=[...l];C.splice(y,1),f(C)}}else if(Vs(l)){const y=new Set(l);p?y.add(h):y.delete(h),f(y)}else f(Hf(e,p))})},mounted:zh,beforeUpdate(e,n,s){e[pn]=kr(s),zh(e,n,s)}};function zh(e,{value:n,oldValue:s},l){e._modelValue=n;let h;if(mt(n))h=Rc(n,l.props.value)>-1;else if(Vs(n))h=n.has(l.props.value);else{if(n===s)return;h=Xr(n,Hf(e,!0))}e.checked!==h&&(e.checked=h)}const zg={created(e,{value:n},s){e.checked=Xr(n,s.props.value),e[pn]=kr(s),tr(e,"change",()=>{e[pn](js(e))})},beforeUpdate(e,{value:n,oldValue:s},l){e[pn]=kr(l),n!==s&&(e.checked=Xr(n,l.props.value))}},Qi={deep:!0,created(e,{value:n,modifiers:{number:s}},l){const h=Vs(n);tr(e,"change",()=>{const p=Array.prototype.filter.call(e.options,f=>f.selected).map(f=>s?sl(js(f)):js(f));e[pn](e.multiple?h?new Set(p):p:p[0]),e._assigning=!0,zs(()=>{e._assigning=!1})}),e[pn]=kr(l)},mounted(e,{value:n}){$h(e,n)},beforeUpdate(e,n,s){e[pn]=kr(s)},updated(e,{value:n}){e._assigning||$h(e,n)}};function $h(e,n){const s=e.multiple,l=mt(n);if(!(s&&!l&&!Vs(n))){for(let h=0,p=e.options.length;h<p;h++){const f=e.options[h],y=js(f);if(s)if(l){const v=typeof y;v==="string"||v==="number"?f.selected=n.some(C=>String(C)===String(y)):f.selected=Rc(n,y)>-1}else f.selected=n.has(y);else if(Xr(js(f),n)){e.selectedIndex!==h&&(e.selectedIndex=h);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function js(e){return"_value"in e?e._value:e.value}function Hf(e,n){const s=n?"_trueValue":"_falseValue";return s in e?e[s]:n}const $g={created(e,n,s){qa(e,n,s,null,"created")},mounted(e,n,s){qa(e,n,s,null,"mounted")},beforeUpdate(e,n,s,l){qa(e,n,s,l,"beforeUpdate")},updated(e,n,s,l){qa(e,n,s,l,"updated")}};function jg(e,n){switch(e){case"SELECT":return Qi;case"TEXTAREA":return Yt;default:switch(n){case"checkbox":return Vf;case"radio":return zg;default:return Yt}}}function qa(e,n,s,l,h){const f=jg(e.tagName,s.props&&s.props.type)[h];f&&f(e,n,s,l)}const Ug=["ctrl","shift","alt","meta"],Gg={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,n)=>Ug.some(s=>e[`${s}Key`]&&!n.includes(s))},Dl=(e,n)=>{const s=e._withMods||(e._withMods={}),l=n.join(".");return s[l]||(s[l]=(h,...p)=>{for(let f=0;f<n.length;f++){const y=Gg[n[f]];if(y&&y(h,n))return}return e(h,...p)})},Vg=Ai({patchProp:Ig},wg);let jh;function Hg(){return jh||(jh=H0(Vg))}const Zg=(...e)=>{const n=Hg().createApp(...e),{mount:s}=n;return n.mount=l=>{const h=Kg(l);if(!h)return;const p=n._component;!wt(p)&&!p.render&&!p.template&&(p.template=h.innerHTML),h.nodeType===1&&(h.textContent="");const f=s(h,!1,qg(h));return h instanceof Element&&(h.removeAttribute("v-cloak"),h.setAttribute("data-v-app","")),f},n};function qg(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Kg(e){return li(e)?document.querySelector(e):e}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Zf;const Rl=e=>Zf=e,qf=Symbol();function pc(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Uo;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Uo||(Uo={}));function Wg(){const e=Vd(!0),n=e.run(()=>Ze({}));let s=[],l=[];const h=Uc({install(p){Rl(h),h._a=p,p.provide(qf,h),p.config.globalProperties.$pinia=h,l.forEach(f=>s.push(f)),l=[]},use(p){return this._a?s.push(p):l.push(p),this},_p:s,_a:null,_e:e,_s:new Map,state:n});return h}const Kf=()=>{};function Uh(e,n,s,l=Kf){e.push(n);const h=()=>{const p=e.indexOf(n);p>-1&&(e.splice(p,1),l())};return!s&&Hd()&&Om(h),h}function As(e,...n){e.slice().forEach(s=>{s(...n)})}const Jg=e=>e(),Gh=Symbol(),qu=Symbol();function mc(e,n){e instanceof Map&&n instanceof Map?n.forEach((s,l)=>e.set(l,s)):e instanceof Set&&n instanceof Set&&n.forEach(e.add,e);for(const s in n){if(!n.hasOwnProperty(s))continue;const l=n[s],h=e[s];pc(h)&&pc(l)&&e.hasOwnProperty(s)&&!si(l)&&!Cr(l)?e[s]=mc(h,l):e[s]=l}return e}const Xg=Symbol();function Yg(e){return!pc(e)||!e.hasOwnProperty(Xg)}const{assign:vr}=Object;function Qg(e){return!!(si(e)&&e.effect)}function e_(e,n,s,l){const{state:h,actions:p,getters:f}=n,y=s.state.value[e];let v;function C(){y||(s.state.value[e]=h?h():{});const P=r0(s.state.value[e]);return vr(P,p,Object.keys(f||{}).reduce((M,j)=>(M[j]=Uc(Et(()=>{Rl(s);const W=s._s.get(e);return f[j].call(W,W)})),M),{}))}return v=Wf(e,C,n,s,l,!0),v}function Wf(e,n,s={},l,h,p){let f;const y=vr({actions:{}},s),v={deep:!0};let C,P,M=[],j=[],W;const D=l.state.value[e];!p&&!D&&(l.state.value[e]={}),Ze({});let V;function H(F){let X;C=P=!1,typeof F=="function"?(F(l.state.value[e]),X={type:Uo.patchFunction,storeId:e,events:W}):(mc(l.state.value[e],F),X={type:Uo.patchObject,payload:F,storeId:e,events:W});const _e=V=Symbol();zs().then(()=>{V===_e&&(C=!0)}),P=!0,As(M,X,l.state.value[e])}const Ce=p?function(){const{state:X}=s,_e=X?X():{};this.$patch(ee=>{vr(ee,_e)})}:Kf;function pe(){f.stop(),M=[],j=[],l._s.delete(e)}const re=(F,X="")=>{if(Gh in F)return F[qu]=X,F;const _e=function(){Rl(l);const ee=Array.from(arguments),Re=[],Te=[];function ie(Me){Re.push(Me)}function ke(Me){Te.push(Me)}As(j,{args:ee,name:_e[qu],store:$e,after:ie,onError:ke});let Ie;try{Ie=F.apply(this&&this.$id===e?this:$e,ee)}catch(Me){throw As(Te,Me),Me}return Ie instanceof Promise?Ie.then(Me=>(As(Re,Me),Me)).catch(Me=>(As(Te,Me),Promise.reject(Me))):(As(Re,Ie),Ie)};return _e[Gh]=!0,_e[qu]=X,_e},Ae={_p:l,$id:e,$onAction:Uh.bind(null,j),$patch:H,$reset:Ce,$subscribe(F,X={}){const _e=Uh(M,F,X.detached,()=>ee()),ee=f.run(()=>$i(()=>l.state.value[e],Re=>{(X.flush==="sync"?P:C)&&F({storeId:e,type:Uo.direct,events:W},Re)},vr({},v,X)));return _e},$dispose:pe},$e=sr(Ae);l._s.set(e,$e);const Be=(l._a&&l._a.runWithContext||Jg)(()=>l._e.run(()=>(f=Vd()).run(()=>n({action:re}))));for(const F in Be){const X=Be[F];if(si(X)&&!Qg(X)||Cr(X))p||(D&&Yg(X)&&(si(X)?X.value=D[F]:mc(X,D[F])),l.state.value[e][F]=X);else if(typeof X=="function"){const _e=re(X,F);Be[F]=_e,y.actions[F]=X}}return vr($e,Be),vr(Rt($e),Be),Object.defineProperty($e,"$state",{get:()=>l.state.value[e],set:F=>{H(X=>{vr(X,F)})}}),l._p.forEach(F=>{vr($e,f.run(()=>F({store:$e,app:l._a,pinia:l,options:y})))}),D&&p&&s.hydrate&&s.hydrate($e.$state,D),C=!0,P=!0,$e}/*! #__NO_SIDE_EFFECTS__ */function Kc(e,n,s){let l,h;const p=typeof n=="function";typeof e=="string"?(l=e,h=p?s:n):(h=e,l=e.id);function f(y,v){const C=N0();return y=y||(C?fn(qf,null):null),y&&Rl(y),y=Zf,y._s.has(l)||(p?Wf(l,n,h,y):e_(l,h,y)),y._s.get(l)}return f.$id=l,f}function Jf(e,n){return function(){return e.apply(n,arguments)}}const{toString:t_}=Object.prototype,{getPrototypeOf:Wc}=Object,Ol=(e=>n=>{const s=t_.call(n);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Ln=e=>(e=e.toLowerCase(),n=>Ol(n)===e),Il=e=>n=>typeof n===e,{isArray:Hs}=Array,Jo=Il("undefined");function i_(e){return e!==null&&!Jo(e)&&e.constructor!==null&&!Jo(e.constructor)&&tn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Xf=Ln("ArrayBuffer");function n_(e){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(e):n=e&&e.buffer&&Xf(e.buffer),n}const r_=Il("string"),tn=Il("function"),Yf=Il("number"),Fl=e=>e!==null&&typeof e=="object",s_=e=>e===!0||e===!1,tl=e=>{if(Ol(e)!=="object")return!1;const n=Wc(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},o_=Ln("Date"),a_=Ln("File"),l_=Ln("Blob"),u_=Ln("FileList"),c_=e=>Fl(e)&&tn(e.pipe),h_=e=>{let n;return e&&(typeof FormData=="function"&&e instanceof FormData||tn(e.append)&&((n=Ol(e))==="formdata"||n==="object"&&tn(e.toString)&&e.toString()==="[object FormData]"))},d_=Ln("URLSearchParams"),[f_,p_,m_,g_]=["ReadableStream","Request","Response","Headers"].map(Ln),__=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function na(e,n,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let l,h;if(typeof e!="object"&&(e=[e]),Hs(e))for(l=0,h=e.length;l<h;l++)n.call(null,e[l],l,e);else{const p=s?Object.getOwnPropertyNames(e):Object.keys(e),f=p.length;let y;for(l=0;l<f;l++)y=p[l],n.call(null,e[y],y,e)}}function Qf(e,n){n=n.toLowerCase();const s=Object.keys(e);let l=s.length,h;for(;l-- >0;)if(h=s[l],n===h.toLowerCase())return h;return null}const Zr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ep=e=>!Jo(e)&&e!==Zr;function gc(){const{caseless:e}=ep(this)&&this||{},n={},s=(l,h)=>{const p=e&&Qf(n,h)||h;tl(n[p])&&tl(l)?n[p]=gc(n[p],l):tl(l)?n[p]=gc({},l):Hs(l)?n[p]=l.slice():n[p]=l};for(let l=0,h=arguments.length;l<h;l++)arguments[l]&&na(arguments[l],s);return n}const y_=(e,n,s,{allOwnKeys:l}={})=>(na(n,(h,p)=>{s&&tn(h)?e[p]=Jf(h,s):e[p]=h},{allOwnKeys:l}),e),v_=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),b_=(e,n,s,l)=>{e.prototype=Object.create(n.prototype,l),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:n.prototype}),s&&Object.assign(e.prototype,s)},x_=(e,n,s,l)=>{let h,p,f;const y={};if(n=n||{},e==null)return n;do{for(h=Object.getOwnPropertyNames(e),p=h.length;p-- >0;)f=h[p],(!l||l(f,e,n))&&!y[f]&&(n[f]=e[f],y[f]=!0);e=s!==!1&&Wc(e)}while(e&&(!s||s(e,n))&&e!==Object.prototype);return n},w_=(e,n,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=n.length;const l=e.indexOf(n,s);return l!==-1&&l===s},L_=e=>{if(!e)return null;if(Hs(e))return e;let n=e.length;if(!Yf(n))return null;const s=new Array(n);for(;n-- >0;)s[n]=e[n];return s},C_=(e=>n=>e&&n instanceof e)(typeof Uint8Array<"u"&&Wc(Uint8Array)),k_=(e,n)=>{const l=(e&&e[Symbol.iterator]).call(e);let h;for(;(h=l.next())&&!h.done;){const p=h.value;n.call(e,p[0],p[1])}},E_=(e,n)=>{let s;const l=[];for(;(s=e.exec(n))!==null;)l.push(s);return l},M_=Ln("HTMLFormElement"),P_=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,l,h){return l.toUpperCase()+h}),Vh=(({hasOwnProperty:e})=>(n,s)=>e.call(n,s))(Object.prototype),S_=Ln("RegExp"),tp=(e,n)=>{const s=Object.getOwnPropertyDescriptors(e),l={};na(s,(h,p)=>{let f;(f=n(h,p,e))!==!1&&(l[p]=f||h)}),Object.defineProperties(e,l)},B_=e=>{tp(e,(n,s)=>{if(tn(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const l=e[s];if(tn(l)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},A_=(e,n)=>{const s={},l=h=>{h.forEach(p=>{s[p]=!0})};return Hs(e)?l(e):l(String(e).split(n)),s},T_=()=>{},D_=(e,n)=>e!=null&&Number.isFinite(e=+e)?e:n,Ku="abcdefghijklmnopqrstuvwxyz",Hh="0123456789",ip={DIGIT:Hh,ALPHA:Ku,ALPHA_DIGIT:Ku+Ku.toUpperCase()+Hh},R_=(e=16,n=ip.ALPHA_DIGIT)=>{let s="";const{length:l}=n;for(;e--;)s+=n[Math.random()*l|0];return s};function O_(e){return!!(e&&tn(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const I_=e=>{const n=new Array(10),s=(l,h)=>{if(Fl(l)){if(n.indexOf(l)>=0)return;if(!("toJSON"in l)){n[h]=l;const p=Hs(l)?[]:{};return na(l,(f,y)=>{const v=s(f,h+1);!Jo(v)&&(p[y]=v)}),n[h]=void 0,p}}return l};return s(e,0)},F_=Ln("AsyncFunction"),N_=e=>e&&(Fl(e)||tn(e))&&tn(e.then)&&tn(e.catch),np=((e,n)=>e?setImmediate:n?((s,l)=>(Zr.addEventListener("message",({source:h,data:p})=>{h===Zr&&p===s&&l.length&&l.shift()()},!1),h=>{l.push(h),Zr.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",tn(Zr.postMessage)),z_=typeof queueMicrotask<"u"?queueMicrotask.bind(Zr):typeof process<"u"&&process.nextTick||np,De={isArray:Hs,isArrayBuffer:Xf,isBuffer:i_,isFormData:h_,isArrayBufferView:n_,isString:r_,isNumber:Yf,isBoolean:s_,isObject:Fl,isPlainObject:tl,isReadableStream:f_,isRequest:p_,isResponse:m_,isHeaders:g_,isUndefined:Jo,isDate:o_,isFile:a_,isBlob:l_,isRegExp:S_,isFunction:tn,isStream:c_,isURLSearchParams:d_,isTypedArray:C_,isFileList:u_,forEach:na,merge:gc,extend:y_,trim:__,stripBOM:v_,inherits:b_,toFlatObject:x_,kindOf:Ol,kindOfTest:Ln,endsWith:w_,toArray:L_,forEachEntry:k_,matchAll:E_,isHTMLForm:M_,hasOwnProperty:Vh,hasOwnProp:Vh,reduceDescriptors:tp,freezeMethods:B_,toObjectSet:A_,toCamelCase:P_,noop:T_,toFiniteNumber:D_,findKey:Qf,global:Zr,isContextDefined:ep,ALPHABET:ip,generateString:R_,isSpecCompliantForm:O_,toJSONObject:I_,isAsyncFn:F_,isThenable:N_,setImmediate:np,asap:z_};function kt(e,n,s,l,h){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",n&&(this.code=n),s&&(this.config=s),l&&(this.request=l),h&&(this.response=h,this.status=h.status?h.status:null)}De.inherits(kt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:De.toJSONObject(this.config),code:this.code,status:this.status}}});const rp=kt.prototype,sp={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{sp[e]={value:e}});Object.defineProperties(kt,sp);Object.defineProperty(rp,"isAxiosError",{value:!0});kt.from=(e,n,s,l,h,p)=>{const f=Object.create(rp);return De.toFlatObject(e,f,function(v){return v!==Error.prototype},y=>y!=="isAxiosError"),kt.call(f,e.message,n,s,l,h),f.cause=e,f.name=e.name,p&&Object.assign(f,p),f};const $_=null;function _c(e){return De.isPlainObject(e)||De.isArray(e)}function op(e){return De.endsWith(e,"[]")?e.slice(0,-2):e}function Zh(e,n,s){return e?e.concat(n).map(function(h,p){return h=op(h),!s&&p?"["+h+"]":h}).join(s?".":""):n}function j_(e){return De.isArray(e)&&!e.some(_c)}const U_=De.toFlatObject(De,{},null,function(n){return/^is[A-Z]/.test(n)});function Nl(e,n,s){if(!De.isObject(e))throw new TypeError("target must be an object");n=n||new FormData,s=De.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(V,H){return!De.isUndefined(H[V])});const l=s.metaTokens,h=s.visitor||P,p=s.dots,f=s.indexes,v=(s.Blob||typeof Blob<"u"&&Blob)&&De.isSpecCompliantForm(n);if(!De.isFunction(h))throw new TypeError("visitor must be a function");function C(D){if(D===null)return"";if(De.isDate(D))return D.toISOString();if(!v&&De.isBlob(D))throw new kt("Blob is not supported. Use a Buffer instead.");return De.isArrayBuffer(D)||De.isTypedArray(D)?v&&typeof Blob=="function"?new Blob([D]):Buffer.from(D):D}function P(D,V,H){let Ce=D;if(D&&!H&&typeof D=="object"){if(De.endsWith(V,"{}"))V=l?V:V.slice(0,-2),D=JSON.stringify(D);else if(De.isArray(D)&&j_(D)||(De.isFileList(D)||De.endsWith(V,"[]"))&&(Ce=De.toArray(D)))return V=op(V),Ce.forEach(function(re,Ae){!(De.isUndefined(re)||re===null)&&n.append(f===!0?Zh([V],Ae,p):f===null?V:V+"[]",C(re))}),!1}return _c(D)?!0:(n.append(Zh(H,V,p),C(D)),!1)}const M=[],j=Object.assign(U_,{defaultVisitor:P,convertValue:C,isVisitable:_c});function W(D,V){if(!De.isUndefined(D)){if(M.indexOf(D)!==-1)throw Error("Circular reference detected in "+V.join("."));M.push(D),De.forEach(D,function(Ce,pe){(!(De.isUndefined(Ce)||Ce===null)&&h.call(n,Ce,De.isString(pe)?pe.trim():pe,V,j))===!0&&W(Ce,V?V.concat(pe):[pe])}),M.pop()}}if(!De.isObject(e))throw new TypeError("data must be an object");return W(e),n}function qh(e){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(l){return n[l]})}function Jc(e,n){this._pairs=[],e&&Nl(e,this,n)}const ap=Jc.prototype;ap.append=function(n,s){this._pairs.push([n,s])};ap.toString=function(n){const s=n?function(l){return n.call(this,l,qh)}:qh;return this._pairs.map(function(h){return s(h[0])+"="+s(h[1])},"").join("&")};function G_(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function lp(e,n,s){if(!n)return e;const l=s&&s.encode||G_;De.isFunction(s)&&(s={serialize:s});const h=s&&s.serialize;let p;if(h?p=h(n,s):p=De.isURLSearchParams(n)?n.toString():new Jc(n,s).toString(l),p){const f=e.indexOf("#");f!==-1&&(e=e.slice(0,f)),e+=(e.indexOf("?")===-1?"?":"&")+p}return e}class Kh{constructor(){this.handlers=[]}use(n,s,l){return this.handlers.push({fulfilled:n,rejected:s,synchronous:l?l.synchronous:!1,runWhen:l?l.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){De.forEach(this.handlers,function(l){l!==null&&n(l)})}}const up={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},V_=typeof URLSearchParams<"u"?URLSearchParams:Jc,H_=typeof FormData<"u"?FormData:null,Z_=typeof Blob<"u"?Blob:null,q_={isBrowser:!0,classes:{URLSearchParams:V_,FormData:H_,Blob:Z_},protocols:["http","https","file","blob","url","data"]},Xc=typeof window<"u"&&typeof document<"u",yc=typeof navigator=="object"&&navigator||void 0,K_=Xc&&(!yc||["ReactNative","NativeScript","NS"].indexOf(yc.product)<0),W_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",J_=Xc&&window.location.href||"http://localhost",X_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Xc,hasStandardBrowserEnv:K_,hasStandardBrowserWebWorkerEnv:W_,navigator:yc,origin:J_},Symbol.toStringTag,{value:"Module"})),Si={...X_,...q_};function Y_(e,n){return Nl(e,new Si.classes.URLSearchParams,Object.assign({visitor:function(s,l,h,p){return Si.isNode&&De.isBuffer(s)?(this.append(l,s.toString("base64")),!1):p.defaultVisitor.apply(this,arguments)}},n))}function Q_(e){return De.matchAll(/\w+|\[(\w*)]/g,e).map(n=>n[0]==="[]"?"":n[1]||n[0])}function ey(e){const n={},s=Object.keys(e);let l;const h=s.length;let p;for(l=0;l<h;l++)p=s[l],n[p]=e[p];return n}function cp(e){function n(s,l,h,p){let f=s[p++];if(f==="__proto__")return!0;const y=Number.isFinite(+f),v=p>=s.length;return f=!f&&De.isArray(h)?h.length:f,v?(De.hasOwnProp(h,f)?h[f]=[h[f],l]:h[f]=l,!y):((!h[f]||!De.isObject(h[f]))&&(h[f]=[]),n(s,l,h[f],p)&&De.isArray(h[f])&&(h[f]=ey(h[f])),!y)}if(De.isFormData(e)&&De.isFunction(e.entries)){const s={};return De.forEachEntry(e,(l,h)=>{n(Q_(l),h,s,0)}),s}return null}function ty(e,n,s){if(De.isString(e))try{return(n||JSON.parse)(e),De.trim(e)}catch(l){if(l.name!=="SyntaxError")throw l}return(s||JSON.stringify)(e)}const ra={transitional:up,adapter:["xhr","http","fetch"],transformRequest:[function(n,s){const l=s.getContentType()||"",h=l.indexOf("application/json")>-1,p=De.isObject(n);if(p&&De.isHTMLForm(n)&&(n=new FormData(n)),De.isFormData(n))return h?JSON.stringify(cp(n)):n;if(De.isArrayBuffer(n)||De.isBuffer(n)||De.isStream(n)||De.isFile(n)||De.isBlob(n)||De.isReadableStream(n))return n;if(De.isArrayBufferView(n))return n.buffer;if(De.isURLSearchParams(n))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let y;if(p){if(l.indexOf("application/x-www-form-urlencoded")>-1)return Y_(n,this.formSerializer).toString();if((y=De.isFileList(n))||l.indexOf("multipart/form-data")>-1){const v=this.env&&this.env.FormData;return Nl(y?{"files[]":n}:n,v&&new v,this.formSerializer)}}return p||h?(s.setContentType("application/json",!1),ty(n)):n}],transformResponse:[function(n){const s=this.transitional||ra.transitional,l=s&&s.forcedJSONParsing,h=this.responseType==="json";if(De.isResponse(n)||De.isReadableStream(n))return n;if(n&&De.isString(n)&&(l&&!this.responseType||h)){const f=!(s&&s.silentJSONParsing)&&h;try{return JSON.parse(n)}catch(y){if(f)throw y.name==="SyntaxError"?kt.from(y,kt.ERR_BAD_RESPONSE,this,null,this.response):y}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Si.classes.FormData,Blob:Si.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};De.forEach(["delete","get","head","post","put","patch"],e=>{ra.headers[e]={}});const iy=De.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ny=e=>{const n={};let s,l,h;return e&&e.split(`
`).forEach(function(f){h=f.indexOf(":"),s=f.substring(0,h).trim().toLowerCase(),l=f.substring(h+1).trim(),!(!s||n[s]&&iy[s])&&(s==="set-cookie"?n[s]?n[s].push(l):n[s]=[l]:n[s]=n[s]?n[s]+", "+l:l)}),n},Wh=Symbol("internals");function Ao(e){return e&&String(e).trim().toLowerCase()}function il(e){return e===!1||e==null?e:De.isArray(e)?e.map(il):String(e)}function ry(e){const n=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let l;for(;l=s.exec(e);)n[l[1]]=l[2];return n}const sy=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Wu(e,n,s,l,h){if(De.isFunction(l))return l.call(this,n,s);if(h&&(n=s),!!De.isString(n)){if(De.isString(l))return n.indexOf(l)!==-1;if(De.isRegExp(l))return l.test(n)}}function oy(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,s,l)=>s.toUpperCase()+l)}function ay(e,n){const s=De.toCamelCase(" "+n);["get","set","has"].forEach(l=>{Object.defineProperty(e,l+s,{value:function(h,p,f){return this[l].call(this,n,h,p,f)},configurable:!0})})}let qi=class{constructor(n){n&&this.set(n)}set(n,s,l){const h=this;function p(y,v,C){const P=Ao(v);if(!P)throw new Error("header name must be a non-empty string");const M=De.findKey(h,P);(!M||h[M]===void 0||C===!0||C===void 0&&h[M]!==!1)&&(h[M||v]=il(y))}const f=(y,v)=>De.forEach(y,(C,P)=>p(C,P,v));if(De.isPlainObject(n)||n instanceof this.constructor)f(n,s);else if(De.isString(n)&&(n=n.trim())&&!sy(n))f(ny(n),s);else if(De.isHeaders(n))for(const[y,v]of n.entries())p(v,y,l);else n!=null&&p(s,n,l);return this}get(n,s){if(n=Ao(n),n){const l=De.findKey(this,n);if(l){const h=this[l];if(!s)return h;if(s===!0)return ry(h);if(De.isFunction(s))return s.call(this,h,l);if(De.isRegExp(s))return s.exec(h);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,s){if(n=Ao(n),n){const l=De.findKey(this,n);return!!(l&&this[l]!==void 0&&(!s||Wu(this,this[l],l,s)))}return!1}delete(n,s){const l=this;let h=!1;function p(f){if(f=Ao(f),f){const y=De.findKey(l,f);y&&(!s||Wu(l,l[y],y,s))&&(delete l[y],h=!0)}}return De.isArray(n)?n.forEach(p):p(n),h}clear(n){const s=Object.keys(this);let l=s.length,h=!1;for(;l--;){const p=s[l];(!n||Wu(this,this[p],p,n,!0))&&(delete this[p],h=!0)}return h}normalize(n){const s=this,l={};return De.forEach(this,(h,p)=>{const f=De.findKey(l,p);if(f){s[f]=il(h),delete s[p];return}const y=n?oy(p):String(p).trim();y!==p&&delete s[p],s[y]=il(h),l[y]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const s=Object.create(null);return De.forEach(this,(l,h)=>{l!=null&&l!==!1&&(s[h]=n&&De.isArray(l)?l.join(", "):l)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,s])=>n+": "+s).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...s){const l=new this(n);return s.forEach(h=>l.set(h)),l}static accessor(n){const l=(this[Wh]=this[Wh]={accessors:{}}).accessors,h=this.prototype;function p(f){const y=Ao(f);l[y]||(ay(h,f),l[y]=!0)}return De.isArray(n)?n.forEach(p):p(n),this}};qi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);De.reduceDescriptors(qi.prototype,({value:e},n)=>{let s=n[0].toUpperCase()+n.slice(1);return{get:()=>e,set(l){this[s]=l}}});De.freezeMethods(qi);function Ju(e,n){const s=this||ra,l=n||s,h=qi.from(l.headers);let p=l.data;return De.forEach(e,function(y){p=y.call(s,p,h.normalize(),n?n.status:void 0)}),h.normalize(),p}function hp(e){return!!(e&&e.__CANCEL__)}function Zs(e,n,s){kt.call(this,e??"canceled",kt.ERR_CANCELED,n,s),this.name="CanceledError"}De.inherits(Zs,kt,{__CANCEL__:!0});function dp(e,n,s){const l=s.config.validateStatus;!s.status||!l||l(s.status)?e(s):n(new kt("Request failed with status code "+s.status,[kt.ERR_BAD_REQUEST,kt.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function ly(e){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}function uy(e,n){e=e||10;const s=new Array(e),l=new Array(e);let h=0,p=0,f;return n=n!==void 0?n:1e3,function(v){const C=Date.now(),P=l[p];f||(f=C),s[h]=v,l[h]=C;let M=p,j=0;for(;M!==h;)j+=s[M++],M=M%e;if(h=(h+1)%e,h===p&&(p=(p+1)%e),C-f<n)return;const W=P&&C-P;return W?Math.round(j*1e3/W):void 0}}function cy(e,n){let s=0,l=1e3/n,h,p;const f=(C,P=Date.now())=>{s=P,h=null,p&&(clearTimeout(p),p=null),e.apply(null,C)};return[(...C)=>{const P=Date.now(),M=P-s;M>=l?f(C,P):(h=C,p||(p=setTimeout(()=>{p=null,f(h)},l-M)))},()=>h&&f(h)]}const ml=(e,n,s=3)=>{let l=0;const h=uy(50,250);return cy(p=>{const f=p.loaded,y=p.lengthComputable?p.total:void 0,v=f-l,C=h(v),P=f<=y;l=f;const M={loaded:f,total:y,progress:y?f/y:void 0,bytes:v,rate:C||void 0,estimated:C&&y&&P?(y-f)/C:void 0,event:p,lengthComputable:y!=null,[n?"download":"upload"]:!0};e(M)},s)},Jh=(e,n)=>{const s=e!=null;return[l=>n[0]({lengthComputable:s,total:e,loaded:l}),n[1]]},Xh=e=>(...n)=>De.asap(()=>e(...n)),hy=Si.hasStandardBrowserEnv?((e,n)=>s=>(s=new URL(s,Si.origin),e.protocol===s.protocol&&e.host===s.host&&(n||e.port===s.port)))(new URL(Si.origin),Si.navigator&&/(msie|trident)/i.test(Si.navigator.userAgent)):()=>!0,dy=Si.hasStandardBrowserEnv?{write(e,n,s,l,h,p){const f=[e+"="+encodeURIComponent(n)];De.isNumber(s)&&f.push("expires="+new Date(s).toGMTString()),De.isString(l)&&f.push("path="+l),De.isString(h)&&f.push("domain="+h),p===!0&&f.push("secure"),document.cookie=f.join("; ")},read(e){const n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function fy(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function py(e,n){return n?e.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):e}function fp(e,n){return e&&!fy(n)?py(e,n):n}const Yh=e=>e instanceof qi?{...e}:e;function es(e,n){n=n||{};const s={};function l(C,P,M,j){return De.isPlainObject(C)&&De.isPlainObject(P)?De.merge.call({caseless:j},C,P):De.isPlainObject(P)?De.merge({},P):De.isArray(P)?P.slice():P}function h(C,P,M,j){if(De.isUndefined(P)){if(!De.isUndefined(C))return l(void 0,C,M,j)}else return l(C,P,M,j)}function p(C,P){if(!De.isUndefined(P))return l(void 0,P)}function f(C,P){if(De.isUndefined(P)){if(!De.isUndefined(C))return l(void 0,C)}else return l(void 0,P)}function y(C,P,M){if(M in n)return l(C,P);if(M in e)return l(void 0,C)}const v={url:p,method:p,data:p,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:y,headers:(C,P,M)=>h(Yh(C),Yh(P),M,!0)};return De.forEach(Object.keys(Object.assign({},e,n)),function(P){const M=v[P]||h,j=M(e[P],n[P],P);De.isUndefined(j)&&M!==y||(s[P]=j)}),s}const pp=e=>{const n=es({},e);let{data:s,withXSRFToken:l,xsrfHeaderName:h,xsrfCookieName:p,headers:f,auth:y}=n;n.headers=f=qi.from(f),n.url=lp(fp(n.baseURL,n.url),e.params,e.paramsSerializer),y&&f.set("Authorization","Basic "+btoa((y.username||"")+":"+(y.password?unescape(encodeURIComponent(y.password)):"")));let v;if(De.isFormData(s)){if(Si.hasStandardBrowserEnv||Si.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if((v=f.getContentType())!==!1){const[C,...P]=v?v.split(";").map(M=>M.trim()).filter(Boolean):[];f.setContentType([C||"multipart/form-data",...P].join("; "))}}if(Si.hasStandardBrowserEnv&&(l&&De.isFunction(l)&&(l=l(n)),l||l!==!1&&hy(n.url))){const C=h&&p&&dy.read(p);C&&f.set(h,C)}return n},my=typeof XMLHttpRequest<"u",gy=my&&function(e){return new Promise(function(s,l){const h=pp(e);let p=h.data;const f=qi.from(h.headers).normalize();let{responseType:y,onUploadProgress:v,onDownloadProgress:C}=h,P,M,j,W,D;function V(){W&&W(),D&&D(),h.cancelToken&&h.cancelToken.unsubscribe(P),h.signal&&h.signal.removeEventListener("abort",P)}let H=new XMLHttpRequest;H.open(h.method.toUpperCase(),h.url,!0),H.timeout=h.timeout;function Ce(){if(!H)return;const re=qi.from("getAllResponseHeaders"in H&&H.getAllResponseHeaders()),$e={data:!y||y==="text"||y==="json"?H.responseText:H.response,status:H.status,statusText:H.statusText,headers:re,config:e,request:H};dp(function(Be){s(Be),V()},function(Be){l(Be),V()},$e),H=null}"onloadend"in H?H.onloadend=Ce:H.onreadystatechange=function(){!H||H.readyState!==4||H.status===0&&!(H.responseURL&&H.responseURL.indexOf("file:")===0)||setTimeout(Ce)},H.onabort=function(){H&&(l(new kt("Request aborted",kt.ECONNABORTED,e,H)),H=null)},H.onerror=function(){l(new kt("Network Error",kt.ERR_NETWORK,e,H)),H=null},H.ontimeout=function(){let Ae=h.timeout?"timeout of "+h.timeout+"ms exceeded":"timeout exceeded";const $e=h.transitional||up;h.timeoutErrorMessage&&(Ae=h.timeoutErrorMessage),l(new kt(Ae,$e.clarifyTimeoutError?kt.ETIMEDOUT:kt.ECONNABORTED,e,H)),H=null},p===void 0&&f.setContentType(null),"setRequestHeader"in H&&De.forEach(f.toJSON(),function(Ae,$e){H.setRequestHeader($e,Ae)}),De.isUndefined(h.withCredentials)||(H.withCredentials=!!h.withCredentials),y&&y!=="json"&&(H.responseType=h.responseType),C&&([j,D]=ml(C,!0),H.addEventListener("progress",j)),v&&H.upload&&([M,W]=ml(v),H.upload.addEventListener("progress",M),H.upload.addEventListener("loadend",W)),(h.cancelToken||h.signal)&&(P=re=>{H&&(l(!re||re.type?new Zs(null,e,H):re),H.abort(),H=null)},h.cancelToken&&h.cancelToken.subscribe(P),h.signal&&(h.signal.aborted?P():h.signal.addEventListener("abort",P)));const pe=ly(h.url);if(pe&&Si.protocols.indexOf(pe)===-1){l(new kt("Unsupported protocol "+pe+":",kt.ERR_BAD_REQUEST,e));return}H.send(p||null)})},_y=(e,n)=>{const{length:s}=e=e?e.filter(Boolean):[];if(n||s){let l=new AbortController,h;const p=function(C){if(!h){h=!0,y();const P=C instanceof Error?C:this.reason;l.abort(P instanceof kt?P:new Zs(P instanceof Error?P.message:P))}};let f=n&&setTimeout(()=>{f=null,p(new kt(`timeout ${n} of ms exceeded`,kt.ETIMEDOUT))},n);const y=()=>{e&&(f&&clearTimeout(f),f=null,e.forEach(C=>{C.unsubscribe?C.unsubscribe(p):C.removeEventListener("abort",p)}),e=null)};e.forEach(C=>C.addEventListener("abort",p));const{signal:v}=l;return v.unsubscribe=()=>De.asap(y),v}},yy=function*(e,n){let s=e.byteLength;if(s<n){yield e;return}let l=0,h;for(;l<s;)h=l+n,yield e.slice(l,h),l=h},vy=async function*(e,n){for await(const s of by(e))yield*yy(s,n)},by=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const n=e.getReader();try{for(;;){const{done:s,value:l}=await n.read();if(s)break;yield l}}finally{await n.cancel()}},Qh=(e,n,s,l)=>{const h=vy(e,n);let p=0,f,y=v=>{f||(f=!0,l&&l(v))};return new ReadableStream({async pull(v){try{const{done:C,value:P}=await h.next();if(C){y(),v.close();return}let M=P.byteLength;if(s){let j=p+=M;s(j)}v.enqueue(new Uint8Array(P))}catch(C){throw y(C),C}},cancel(v){return y(v),h.return()}},{highWaterMark:2})},zl=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",mp=zl&&typeof ReadableStream=="function",xy=zl&&(typeof TextEncoder=="function"?(e=>n=>e.encode(n))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),gp=(e,...n)=>{try{return!!e(...n)}catch{return!1}},wy=mp&&gp(()=>{let e=!1;const n=new Request(Si.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!n}),ed=64*1024,vc=mp&&gp(()=>De.isReadableStream(new Response("").body)),gl={stream:vc&&(e=>e.body)};zl&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(n=>{!gl[n]&&(gl[n]=De.isFunction(e[n])?s=>s[n]():(s,l)=>{throw new kt(`Response type '${n}' is not supported`,kt.ERR_NOT_SUPPORT,l)})})})(new Response);const Ly=async e=>{if(e==null)return 0;if(De.isBlob(e))return e.size;if(De.isSpecCompliantForm(e))return(await new Request(Si.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(De.isArrayBufferView(e)||De.isArrayBuffer(e))return e.byteLength;if(De.isURLSearchParams(e)&&(e=e+""),De.isString(e))return(await xy(e)).byteLength},Cy=async(e,n)=>{const s=De.toFiniteNumber(e.getContentLength());return s??Ly(n)},ky=zl&&(async e=>{let{url:n,method:s,data:l,signal:h,cancelToken:p,timeout:f,onDownloadProgress:y,onUploadProgress:v,responseType:C,headers:P,withCredentials:M="same-origin",fetchOptions:j}=pp(e);C=C?(C+"").toLowerCase():"text";let W=_y([h,p&&p.toAbortSignal()],f),D;const V=W&&W.unsubscribe&&(()=>{W.unsubscribe()});let H;try{if(v&&wy&&s!=="get"&&s!=="head"&&(H=await Cy(P,l))!==0){let $e=new Request(n,{method:"POST",body:l,duplex:"half"}),ge;if(De.isFormData(l)&&(ge=$e.headers.get("content-type"))&&P.setContentType(ge),$e.body){const[Be,F]=Jh(H,ml(Xh(v)));l=Qh($e.body,ed,Be,F)}}De.isString(M)||(M=M?"include":"omit");const Ce="credentials"in Request.prototype;D=new Request(n,{...j,signal:W,method:s.toUpperCase(),headers:P.normalize().toJSON(),body:l,duplex:"half",credentials:Ce?M:void 0});let pe=await fetch(D);const re=vc&&(C==="stream"||C==="response");if(vc&&(y||re&&V)){const $e={};["status","statusText","headers"].forEach(X=>{$e[X]=pe[X]});const ge=De.toFiniteNumber(pe.headers.get("content-length")),[Be,F]=y&&Jh(ge,ml(Xh(y),!0))||[];pe=new Response(Qh(pe.body,ed,Be,()=>{F&&F(),V&&V()}),$e)}C=C||"text";let Ae=await gl[De.findKey(gl,C)||"text"](pe,e);return!re&&V&&V(),await new Promise(($e,ge)=>{dp($e,ge,{data:Ae,headers:qi.from(pe.headers),status:pe.status,statusText:pe.statusText,config:e,request:D})})}catch(Ce){throw V&&V(),Ce&&Ce.name==="TypeError"&&/fetch/i.test(Ce.message)?Object.assign(new kt("Network Error",kt.ERR_NETWORK,e,D),{cause:Ce.cause||Ce}):kt.from(Ce,Ce&&Ce.code,e,D)}}),bc={http:$_,xhr:gy,fetch:ky};De.forEach(bc,(e,n)=>{if(e){try{Object.defineProperty(e,"name",{value:n})}catch{}Object.defineProperty(e,"adapterName",{value:n})}});const td=e=>`- ${e}`,Ey=e=>De.isFunction(e)||e===null||e===!1,_p={getAdapter:e=>{e=De.isArray(e)?e:[e];const{length:n}=e;let s,l;const h={};for(let p=0;p<n;p++){s=e[p];let f;if(l=s,!Ey(s)&&(l=bc[(f=String(s)).toLowerCase()],l===void 0))throw new kt(`Unknown adapter '${f}'`);if(l)break;h[f||"#"+p]=l}if(!l){const p=Object.entries(h).map(([y,v])=>`adapter ${y} `+(v===!1?"is not supported by the environment":"is not available in the build"));let f=n?p.length>1?`since :
`+p.map(td).join(`
`):" "+td(p[0]):"as no adapter specified";throw new kt("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return l},adapters:bc};function Xu(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Zs(null,e)}function id(e){return Xu(e),e.headers=qi.from(e.headers),e.data=Ju.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),_p.getAdapter(e.adapter||ra.adapter)(e).then(function(l){return Xu(e),l.data=Ju.call(e,e.transformResponse,l),l.headers=qi.from(l.headers),l},function(l){return hp(l)||(Xu(e),l&&l.response&&(l.response.data=Ju.call(e,e.transformResponse,l.response),l.response.headers=qi.from(l.response.headers))),Promise.reject(l)})}const yp="1.7.9",$l={};["object","boolean","number","function","string","symbol"].forEach((e,n)=>{$l[e]=function(l){return typeof l===e||"a"+(n<1?"n ":" ")+e}});const nd={};$l.transitional=function(n,s,l){function h(p,f){return"[Axios v"+yp+"] Transitional option '"+p+"'"+f+(l?". "+l:"")}return(p,f,y)=>{if(n===!1)throw new kt(h(f," has been removed"+(s?" in "+s:"")),kt.ERR_DEPRECATED);return s&&!nd[f]&&(nd[f]=!0,console.warn(h(f," has been deprecated since v"+s+" and will be removed in the near future"))),n?n(p,f,y):!0}};$l.spelling=function(n){return(s,l)=>(console.warn(`${l} is likely a misspelling of ${n}`),!0)};function My(e,n,s){if(typeof e!="object")throw new kt("options must be an object",kt.ERR_BAD_OPTION_VALUE);const l=Object.keys(e);let h=l.length;for(;h-- >0;){const p=l[h],f=n[p];if(f){const y=e[p],v=y===void 0||f(y,p,e);if(v!==!0)throw new kt("option "+p+" must be "+v,kt.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new kt("Unknown option "+p,kt.ERR_BAD_OPTION)}}const nl={assertOptions:My,validators:$l},Dn=nl.validators;let Jr=class{constructor(n){this.defaults=n,this.interceptors={request:new Kh,response:new Kh}}async request(n,s){try{return await this._request(n,s)}catch(l){if(l instanceof Error){let h={};Error.captureStackTrace?Error.captureStackTrace(h):h=new Error;const p=h.stack?h.stack.replace(/^.+\n/,""):"";try{l.stack?p&&!String(l.stack).endsWith(p.replace(/^.+\n.+\n/,""))&&(l.stack+=`
`+p):l.stack=p}catch{}}throw l}}_request(n,s){typeof n=="string"?(s=s||{},s.url=n):s=n||{},s=es(this.defaults,s);const{transitional:l,paramsSerializer:h,headers:p}=s;l!==void 0&&nl.assertOptions(l,{silentJSONParsing:Dn.transitional(Dn.boolean),forcedJSONParsing:Dn.transitional(Dn.boolean),clarifyTimeoutError:Dn.transitional(Dn.boolean)},!1),h!=null&&(De.isFunction(h)?s.paramsSerializer={serialize:h}:nl.assertOptions(h,{encode:Dn.function,serialize:Dn.function},!0)),nl.assertOptions(s,{baseUrl:Dn.spelling("baseURL"),withXsrfToken:Dn.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let f=p&&De.merge(p.common,p[s.method]);p&&De.forEach(["delete","get","head","post","put","patch","common"],D=>{delete p[D]}),s.headers=qi.concat(f,p);const y=[];let v=!0;this.interceptors.request.forEach(function(V){typeof V.runWhen=="function"&&V.runWhen(s)===!1||(v=v&&V.synchronous,y.unshift(V.fulfilled,V.rejected))});const C=[];this.interceptors.response.forEach(function(V){C.push(V.fulfilled,V.rejected)});let P,M=0,j;if(!v){const D=[id.bind(this),void 0];for(D.unshift.apply(D,y),D.push.apply(D,C),j=D.length,P=Promise.resolve(s);M<j;)P=P.then(D[M++],D[M++]);return P}j=y.length;let W=s;for(M=0;M<j;){const D=y[M++],V=y[M++];try{W=D(W)}catch(H){V.call(this,H);break}}try{P=id.call(this,W)}catch(D){return Promise.reject(D)}for(M=0,j=C.length;M<j;)P=P.then(C[M++],C[M++]);return P}getUri(n){n=es(this.defaults,n);const s=fp(n.baseURL,n.url);return lp(s,n.params,n.paramsSerializer)}};De.forEach(["delete","get","head","options"],function(n){Jr.prototype[n]=function(s,l){return this.request(es(l||{},{method:n,url:s,data:(l||{}).data}))}});De.forEach(["post","put","patch"],function(n){function s(l){return function(p,f,y){return this.request(es(y||{},{method:n,headers:l?{"Content-Type":"multipart/form-data"}:{},url:p,data:f}))}}Jr.prototype[n]=s(),Jr.prototype[n+"Form"]=s(!0)});let Py=class vp{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(p){s=p});const l=this;this.promise.then(h=>{if(!l._listeners)return;let p=l._listeners.length;for(;p-- >0;)l._listeners[p](h);l._listeners=null}),this.promise.then=h=>{let p;const f=new Promise(y=>{l.subscribe(y),p=y}).then(h);return f.cancel=function(){l.unsubscribe(p)},f},n(function(p,f,y){l.reason||(l.reason=new Zs(p,f,y),s(l.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const s=this._listeners.indexOf(n);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const n=new AbortController,s=l=>{n.abort(l)};return this.subscribe(s),n.signal.unsubscribe=()=>this.unsubscribe(s),n.signal}static source(){let n;return{token:new vp(function(h){n=h}),cancel:n}}};function Sy(e){return function(s){return e.apply(null,s)}}function By(e){return De.isObject(e)&&e.isAxiosError===!0}const xc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(xc).forEach(([e,n])=>{xc[n]=e});function bp(e){const n=new Jr(e),s=Jf(Jr.prototype.request,n);return De.extend(s,Jr.prototype,n,{allOwnKeys:!0}),De.extend(s,n,null,{allOwnKeys:!0}),s.create=function(h){return bp(es(e,h))},s}const oi=bp(ra);oi.Axios=Jr;oi.CanceledError=Zs;oi.CancelToken=Py;oi.isCancel=hp;oi.VERSION=yp;oi.toFormData=Nl;oi.AxiosError=kt;oi.Cancel=oi.CanceledError;oi.all=function(n){return Promise.all(n)};oi.spread=Sy;oi.isAxiosError=By;oi.mergeConfig=es;oi.AxiosHeaders=qi;oi.formToJSON=e=>cp(De.isHTMLForm(e)?new FormData(e):e);oi.getAdapter=_p.getAdapter;oi.HttpStatusCode=xc;oi.default=oi;const{Axios:pC,AxiosError:mC,CanceledError:gC,isCancel:_C,CancelToken:yC,VERSION:vC,all:bC,Cancel:xC,isAxiosError:wC,spread:LC,toFormData:CC,AxiosHeaders:kC,HttpStatusCode:EC,formToJSON:MC,getAdapter:PC,mergeConfig:SC}=oi,gt=oi.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});function xp(e){var l;const s=`; ${document.cookie}`.split(`; ${e}=`);return s.length===2&&((l=s.pop())==null?void 0:l.split(";").shift())||null}gt.interceptors.request.use(e=>{const n=xp("access_token");return n&&(e.headers.Authorization=`Bearer ${n}`),console.log("Request config:",{url:e.url,method:e.method,headers:e.headers,withCredentials:e.withCredentials}),e},e=>(console.error("Request interceptor error:",e),Promise.reject(e)));gt.interceptors.response.use(e=>e,async e=>{var s;const n=e.config;if(((s=e.response)==null?void 0:s.status)===401&&!n._retry){n._retry=!0;try{await ji().refreshToken();const h=xp("access_token");if(h)return n.headers.Authorization=`Bearer ${h}`,gt(n)}catch(l){console.error("Token refresh failed:",l),window.location.href="/login"}}return Promise.reject(e)});gt.defaults.baseURL="/api";gt.defaults.headers.common["Content-Type"]="application/json";gt.defaults.withCredentials=!0;function _l(e){var l;const s=`; ${document.cookie}`.split(`; ${e}=`);return s.length===2&&((l=s.pop())==null?void 0:l.split(";").shift())||null}gt.interceptors.request.use(e=>{const n=_l("access_token");return n&&(e.headers.Authorization=`Bearer ${n}`),e},e=>(console.error("Request interceptor error:",e),Promise.reject(e)));gt.interceptors.response.use(e=>e,async e=>{var l,h;const n=ji(),s=e.config;if(((l=e.response)==null?void 0:l.status)===401&&!s._retry&&!((h=s.url)!=null&&h.includes("/token/refresh/"))){s._retry=!0;try{if(!_l("access_token"))throw new Error("No token available");await n.refreshToken();const f=_l("access_token");if(f)return s.headers.Authorization=`Bearer ${f}`,gt(s)}catch(p){console.error("Token refresh failed:",p),await n.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(e)});function Ay(e,n,s=1){const l=new Date;l.setTime(l.getTime()+s*24*60*60*1e3);const h=`expires=${l.toUTCString()}`;document.cookie=`${e}=${n};${h};path=/;secure;samesite=Strict`}function qr(e){if(!e)return"Non spcifi";const n=`${e.first_name} ${e.last_name.toUpperCase()}`;return e.company_name?`${n} (${e.company_name})`:n}const ji=Kc("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,concessionnaires:[]}),getters:{isAdmin:e=>{var n;return((n=e.user)==null?void 0:n.user_type)==="admin"},isDealer:e=>{var n;return((n=e.user)==null?void 0:n.user_type)==="dealer"},isClient:e=>{var n;return((n=e.user)==null?void 0:n.user_type)==="client"},currentUser:e=>e.user,hasDealer:e=>{var n;return!!((n=e.user)!=null&&n.dealer)}},actions:{async initialize(e){if(console.log("Initializing auth store with state:",e),!e){console.log("No initial state, attempting to restore session...");const s=await this.restoreSession();return this.initialized=!0,s}if(e.isAuthenticated&&e.user)return this.user=e.user,this.isAuthenticated=!0,this.mustChangePassword=e.user.must_change_password||!1,this.initialized=!0,!0;const n=await this.restoreSession();return this.initialized=!0,n},async restoreSession(){console.log("Attempting to restore session...");try{if(!_l("access_token"))return console.log("No token found, skipping session restore"),this.isAuthenticated=!1,this.user=null,!1;const n=await gt.post("/token/refresh/");return n.data.user?(this.user=n.data.user,this.isAuthenticated=!0,this.mustChangePassword=n.data.user.must_change_password||!1,console.log("Session restored successfully"),!0):(await this.fetchUserProfile(),!0)}catch(e){return console.error("Failed to restore session:",e),this.isAuthenticated=!1,this.user=null,!1}},async login(e,n){var s,l,h;try{const p=await gt.post("/token/",{username:e,password:n});if(!p.data.access)throw new Error("Token d'accs non reu");document.cookie=`access_token=${p.data.access}; path=/; secure; samesite=Strict`;const f=await this.fetchUserProfile();return this.user=f,this.isAuthenticated=!0,!0}catch(p){throw this.isAuthenticated=!1,this.user=null,((s=p.response)==null?void 0:s.status)===401?new Error("Identifiants incorrects"):(h=(l=p.response)==null?void 0:l.data)!=null&&h.detail?new Error(p.response.data.detail):p}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const e=await gt.get("/users/me/");return this.user=e.data,this.isAuthenticated=!0,this.mustChangePassword=e.data.must_change_password||!1,e.data}catch(e){throw this.isAuthenticated=!1,this.user=null,e}},async changePassword(e,n){try{console.log("Attempting to change password...");const s=await gt.post("/users/change_password/",{old_password:e,password:n});return console.log("Password change response:",s.data),this.user={...this.user,must_change_password:!1},s.data}catch(s){throw console.error("Password change error:",s),s}},async refreshToken(){var e,n,s,l;try{console.log("Attempting to refresh token...");const h=await gt.post("/token/refresh/",{},{withCredentials:!0}),{access:p}=h.data;if(!p)throw new Error("No access token received");return console.log("Token refreshed successfully"),Ay("access_token",p,1),this.isAuthenticated=!0,p}catch(h){throw console.error("Error refreshing token:",{status:(e=h.response)==null?void 0:e.status,data:(n=h.response)==null?void 0:n.data}),(((s=h.response)==null?void 0:s.status)===401||((l=h.response)==null?void 0:l.status)===403)&&(console.log("Token refresh failed with auth error, logging out"),await this.logout()),h}},async fetchConcessionnaires(){this.loading=!0;try{const e=await gt.get("/users/",{params:{role:"dealer"}});this.concessionnaires=e.data}catch(e){throw this.error="Erreur lors de la rcupration des concessionnaires",e}finally{this.loading=!1}},async setConcessionnaire(e,n){this.loading=!0;try{await gt.patch(`/users/${e}/`,{concessionnaire:n}),this.user&&this.user.id===e&&(this.user.dealer=n)}catch(s){throw this.error="Erreur lors de la mise  jour du concessionnaire",s}finally{this.loading=!1}},async createUser(e){this.loading=!0;try{return(await gt.post("/users/",e)).data}catch(n){throw this.error="Erreur lors de la cration de l'utilisateur",n}finally{this.loading=!1}},async updateUserRole(e,n){this.loading=!0;try{const s=await gt.patch(`/users/${e}/`,{role:n});return this.user&&this.user.id===e&&(this.user.user_type=n),s.data}catch(s){throw this.error="Erreur lors de la mise  jour du rle",s}finally{this.loading=!1}},async updateUserEmail(e){var n;this.loading=!0;try{const s=await gt.patch(`/users/${(n=this.user)==null?void 0:n.id}/`,{email:e});return this.user&&(this.user.email=e),s.data}catch(s){throw this.error="Erreur lors de la mise  jour de l'email",s}finally{this.loading=!1}},checkAccess(e){return this.user?e.includes(this.user.user_type):!1}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Ds=typeof document<"u";function wp(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Ty(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&wp(e.default)}const Nt=Object.assign;function Yu(e,n){const s={};for(const l in n){const h=n[l];s[l]=wn(h)?h.map(e):e(h)}return s}const Go=()=>{},wn=Array.isArray,Lp=/#/g,Dy=/&/g,Ry=/\//g,Oy=/=/g,Iy=/\?/g,Cp=/\+/g,Fy=/%5B/g,Ny=/%5D/g,kp=/%5E/g,zy=/%60/g,Ep=/%7B/g,$y=/%7C/g,Mp=/%7D/g,jy=/%20/g;function Yc(e){return encodeURI(""+e).replace($y,"|").replace(Fy,"[").replace(Ny,"]")}function Uy(e){return Yc(e).replace(Ep,"{").replace(Mp,"}").replace(kp,"^")}function wc(e){return Yc(e).replace(Cp,"%2B").replace(jy,"+").replace(Lp,"%23").replace(Dy,"%26").replace(zy,"`").replace(Ep,"{").replace(Mp,"}").replace(kp,"^")}function Gy(e){return wc(e).replace(Oy,"%3D")}function Vy(e){return Yc(e).replace(Lp,"%23").replace(Iy,"%3F")}function Hy(e){return e==null?"":Vy(e).replace(Ry,"%2F")}function Xo(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const Zy=/\/$/,qy=e=>e.replace(Zy,"");function Qu(e,n,s="/"){let l,h={},p="",f="";const y=n.indexOf("#");let v=n.indexOf("?");return y<v&&y>=0&&(v=-1),v>-1&&(l=n.slice(0,v),p=n.slice(v+1,y>-1?y:n.length),h=e(p)),y>-1&&(l=l||n.slice(0,y),f=n.slice(y,n.length)),l=Xy(l??n,s),{fullPath:l+(p&&"?")+p+f,path:l,query:h,hash:Xo(f)}}function Ky(e,n){const s=n.query?e(n.query):"";return n.path+(s&&"?")+s+(n.hash||"")}function rd(e,n){return!n||!e.toLowerCase().startsWith(n.toLowerCase())?e:e.slice(n.length)||"/"}function Wy(e,n,s){const l=n.matched.length-1,h=s.matched.length-1;return l>-1&&l===h&&Us(n.matched[l],s.matched[h])&&Pp(n.params,s.params)&&e(n.query)===e(s.query)&&n.hash===s.hash}function Us(e,n){return(e.aliasOf||e)===(n.aliasOf||n)}function Pp(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const s in e)if(!Jy(e[s],n[s]))return!1;return!0}function Jy(e,n){return wn(e)?sd(e,n):wn(n)?sd(n,e):e===n}function sd(e,n){return wn(n)?e.length===n.length&&e.every((s,l)=>s===n[l]):e.length===1&&e[0]===n}function Xy(e,n){if(e.startsWith("/"))return e;if(!e)return n;const s=n.split("/"),l=e.split("/"),h=l[l.length-1];(h===".."||h===".")&&l.push("");let p=s.length-1,f,y;for(f=0;f<l.length;f++)if(y=l[f],y!==".")if(y==="..")p>1&&p--;else break;return s.slice(0,p).join("/")+"/"+l.slice(f).join("/")}const yr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Yo;(function(e){e.pop="pop",e.push="push"})(Yo||(Yo={}));var Vo;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Vo||(Vo={}));function Yy(e){if(!e)if(Ds){const n=document.querySelector("base");e=n&&n.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),qy(e)}const Qy=/^[^#]+#/;function ev(e,n){return e.replace(Qy,"#")+n}function tv(e,n){const s=document.documentElement.getBoundingClientRect(),l=e.getBoundingClientRect();return{behavior:n.behavior,left:l.left-s.left-(n.left||0),top:l.top-s.top-(n.top||0)}}const jl=()=>({left:window.scrollX,top:window.scrollY});function iv(e){let n;if("el"in e){const s=e.el,l=typeof s=="string"&&s.startsWith("#"),h=typeof s=="string"?l?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!h)return;n=tv(h,e)}else n=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.scrollX,n.top!=null?n.top:window.scrollY)}function od(e,n){return(history.state?history.state.position-n:-1)+e}const Lc=new Map;function nv(e,n){Lc.set(e,n)}function rv(e){const n=Lc.get(e);return Lc.delete(e),n}let sv=()=>location.protocol+"//"+location.host;function Sp(e,n){const{pathname:s,search:l,hash:h}=n,p=e.indexOf("#");if(p>-1){let y=h.includes(e.slice(p))?e.slice(p).length:1,v=h.slice(y);return v[0]!=="/"&&(v="/"+v),rd(v,"")}return rd(s,e)+l+h}function ov(e,n,s,l){let h=[],p=[],f=null;const y=({state:j})=>{const W=Sp(e,location),D=s.value,V=n.value;let H=0;if(j){if(s.value=W,n.value=j,f&&f===D){f=null;return}H=V?j.position-V.position:0}else l(W);h.forEach(Ce=>{Ce(s.value,D,{delta:H,type:Yo.pop,direction:H?H>0?Vo.forward:Vo.back:Vo.unknown})})};function v(){f=s.value}function C(j){h.push(j);const W=()=>{const D=h.indexOf(j);D>-1&&h.splice(D,1)};return p.push(W),W}function P(){const{history:j}=window;j.state&&j.replaceState(Nt({},j.state,{scroll:jl()}),"")}function M(){for(const j of p)j();p=[],window.removeEventListener("popstate",y),window.removeEventListener("beforeunload",P)}return window.addEventListener("popstate",y),window.addEventListener("beforeunload",P,{passive:!0}),{pauseListeners:v,listen:C,destroy:M}}function ad(e,n,s,l=!1,h=!1){return{back:e,current:n,forward:s,replaced:l,position:window.history.length,scroll:h?jl():null}}function av(e){const{history:n,location:s}=window,l={value:Sp(e,s)},h={value:n.state};h.value||p(l.value,{back:null,current:l.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function p(v,C,P){const M=e.indexOf("#"),j=M>-1?(s.host&&document.querySelector("base")?e:e.slice(M))+v:sv()+e+v;try{n[P?"replaceState":"pushState"](C,"",j),h.value=C}catch(W){console.error(W),s[P?"replace":"assign"](j)}}function f(v,C){const P=Nt({},n.state,ad(h.value.back,v,h.value.forward,!0),C,{position:h.value.position});p(v,P,!0),l.value=v}function y(v,C){const P=Nt({},h.value,n.state,{forward:v,scroll:jl()});p(P.current,P,!0);const M=Nt({},ad(l.value,v,null),{position:P.position+1},C);p(v,M,!1),l.value=v}return{location:l,state:h,push:y,replace:f}}function lv(e){e=Yy(e);const n=av(e),s=ov(e,n.state,n.location,n.replace);function l(p,f=!0){f||s.pauseListeners(),history.go(p)}const h=Nt({location:"",base:e,go:l,createHref:ev.bind(null,e)},n,s);return Object.defineProperty(h,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(h,"state",{enumerable:!0,get:()=>n.state.value}),h}function uv(e){return typeof e=="string"||e&&typeof e=="object"}function Bp(e){return typeof e=="string"||typeof e=="symbol"}const Ap=Symbol("");var ld;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(ld||(ld={}));function Gs(e,n){return Nt(new Error,{type:e,[Ap]:!0},n)}function Xn(e,n){return e instanceof Error&&Ap in e&&(n==null||!!(e.type&n))}const ud="[^/]+?",cv={sensitive:!1,strict:!1,start:!0,end:!0},hv=/[.+*?^${}()[\]/\\]/g;function dv(e,n){const s=Nt({},cv,n),l=[];let h=s.start?"^":"";const p=[];for(const C of e){const P=C.length?[]:[90];s.strict&&!C.length&&(h+="/");for(let M=0;M<C.length;M++){const j=C[M];let W=40+(s.sensitive?.25:0);if(j.type===0)M||(h+="/"),h+=j.value.replace(hv,"\\$&"),W+=40;else if(j.type===1){const{value:D,repeatable:V,optional:H,regexp:Ce}=j;p.push({name:D,repeatable:V,optional:H});const pe=Ce||ud;if(pe!==ud){W+=10;try{new RegExp(`(${pe})`)}catch(Ae){throw new Error(`Invalid custom RegExp for param "${D}" (${pe}): `+Ae.message)}}let re=V?`((?:${pe})(?:/(?:${pe}))*)`:`(${pe})`;M||(re=H&&C.length<2?`(?:/${re})`:"/"+re),H&&(re+="?"),h+=re,W+=20,H&&(W+=-8),V&&(W+=-20),pe===".*"&&(W+=-50)}P.push(W)}l.push(P)}if(s.strict&&s.end){const C=l.length-1;l[C][l[C].length-1]+=.7000000000000001}s.strict||(h+="/?"),s.end?h+="$":s.strict&&!h.endsWith("/")&&(h+="(?:/|$)");const f=new RegExp(h,s.sensitive?"":"i");function y(C){const P=C.match(f),M={};if(!P)return null;for(let j=1;j<P.length;j++){const W=P[j]||"",D=p[j-1];M[D.name]=W&&D.repeatable?W.split("/"):W}return M}function v(C){let P="",M=!1;for(const j of e){(!M||!P.endsWith("/"))&&(P+="/"),M=!1;for(const W of j)if(W.type===0)P+=W.value;else if(W.type===1){const{value:D,repeatable:V,optional:H}=W,Ce=D in C?C[D]:"";if(wn(Ce)&&!V)throw new Error(`Provided param "${D}" is an array but it is not repeatable (* or + modifiers)`);const pe=wn(Ce)?Ce.join("/"):Ce;if(!pe)if(H)j.length<2&&(P.endsWith("/")?P=P.slice(0,-1):M=!0);else throw new Error(`Missing required param "${D}"`);P+=pe}}return P||"/"}return{re:f,score:l,keys:p,parse:y,stringify:v}}function fv(e,n){let s=0;for(;s<e.length&&s<n.length;){const l=n[s]-e[s];if(l)return l;s++}return e.length<n.length?e.length===1&&e[0]===80?-1:1:e.length>n.length?n.length===1&&n[0]===80?1:-1:0}function Tp(e,n){let s=0;const l=e.score,h=n.score;for(;s<l.length&&s<h.length;){const p=fv(l[s],h[s]);if(p)return p;s++}if(Math.abs(h.length-l.length)===1){if(cd(l))return 1;if(cd(h))return-1}return h.length-l.length}function cd(e){const n=e[e.length-1];return e.length>0&&n[n.length-1]<0}const pv={type:0,value:""},mv=/[a-zA-Z0-9_]/;function gv(e){if(!e)return[[]];if(e==="/")return[[pv]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function n(W){throw new Error(`ERR (${s})/"${C}": ${W}`)}let s=0,l=s;const h=[];let p;function f(){p&&h.push(p),p=[]}let y=0,v,C="",P="";function M(){C&&(s===0?p.push({type:0,value:C}):s===1||s===2||s===3?(p.length>1&&(v==="*"||v==="+")&&n(`A repeatable param (${C}) must be alone in its segment. eg: '/:ids+.`),p.push({type:1,value:C,regexp:P,repeatable:v==="*"||v==="+",optional:v==="*"||v==="?"})):n("Invalid state to consume buffer"),C="")}function j(){C+=v}for(;y<e.length;){if(v=e[y++],v==="\\"&&s!==2){l=s,s=4;continue}switch(s){case 0:v==="/"?(C&&M(),f()):v===":"?(M(),s=1):j();break;case 4:j(),s=l;break;case 1:v==="("?s=2:mv.test(v)?j():(M(),s=0,v!=="*"&&v!=="?"&&v!=="+"&&y--);break;case 2:v===")"?P[P.length-1]=="\\"?P=P.slice(0,-1)+v:s=3:P+=v;break;case 3:M(),s=0,v!=="*"&&v!=="?"&&v!=="+"&&y--,P="";break;default:n("Unknown state");break}}return s===2&&n(`Unfinished custom RegExp for param "${C}"`),M(),f(),h}function _v(e,n,s){const l=dv(gv(e.path),s),h=Nt(l,{record:e,parent:n,children:[],alias:[]});return n&&!h.record.aliasOf==!n.record.aliasOf&&n.children.push(h),h}function yv(e,n){const s=[],l=new Map;n=pd({strict:!1,end:!0,sensitive:!1},n);function h(M){return l.get(M)}function p(M,j,W){const D=!W,V=dd(M);V.aliasOf=W&&W.record;const H=pd(n,M),Ce=[V];if("alias"in M){const Ae=typeof M.alias=="string"?[M.alias]:M.alias;for(const $e of Ae)Ce.push(dd(Nt({},V,{components:W?W.record.components:V.components,path:$e,aliasOf:W?W.record:V})))}let pe,re;for(const Ae of Ce){const{path:$e}=Ae;if(j&&$e[0]!=="/"){const ge=j.record.path,Be=ge[ge.length-1]==="/"?"":"/";Ae.path=j.record.path+($e&&Be+$e)}if(pe=_v(Ae,j,H),W?W.alias.push(pe):(re=re||pe,re!==pe&&re.alias.push(pe),D&&M.name&&!fd(pe)&&f(M.name)),Dp(pe)&&v(pe),V.children){const ge=V.children;for(let Be=0;Be<ge.length;Be++)p(ge[Be],pe,W&&W.children[Be])}W=W||pe}return re?()=>{f(re)}:Go}function f(M){if(Bp(M)){const j=l.get(M);j&&(l.delete(M),s.splice(s.indexOf(j),1),j.children.forEach(f),j.alias.forEach(f))}else{const j=s.indexOf(M);j>-1&&(s.splice(j,1),M.record.name&&l.delete(M.record.name),M.children.forEach(f),M.alias.forEach(f))}}function y(){return s}function v(M){const j=xv(M,s);s.splice(j,0,M),M.record.name&&!fd(M)&&l.set(M.record.name,M)}function C(M,j){let W,D={},V,H;if("name"in M&&M.name){if(W=l.get(M.name),!W)throw Gs(1,{location:M});H=W.record.name,D=Nt(hd(j.params,W.keys.filter(re=>!re.optional).concat(W.parent?W.parent.keys.filter(re=>re.optional):[]).map(re=>re.name)),M.params&&hd(M.params,W.keys.map(re=>re.name))),V=W.stringify(D)}else if(M.path!=null)V=M.path,W=s.find(re=>re.re.test(V)),W&&(D=W.parse(V),H=W.record.name);else{if(W=j.name?l.get(j.name):s.find(re=>re.re.test(j.path)),!W)throw Gs(1,{location:M,currentLocation:j});H=W.record.name,D=Nt({},j.params,M.params),V=W.stringify(D)}const Ce=[];let pe=W;for(;pe;)Ce.unshift(pe.record),pe=pe.parent;return{name:H,path:V,params:D,matched:Ce,meta:bv(Ce)}}e.forEach(M=>p(M));function P(){s.length=0,l.clear()}return{addRoute:p,resolve:C,removeRoute:f,clearRoutes:P,getRoutes:y,getRecordMatcher:h}}function hd(e,n){const s={};for(const l of n)l in e&&(s[l]=e[l]);return s}function dd(e){const n={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:vv(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(n,"mods",{value:{}}),n}function vv(e){const n={},s=e.props||!1;if("component"in e)n.default=s;else for(const l in e.components)n[l]=typeof s=="object"?s[l]:s;return n}function fd(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function bv(e){return e.reduce((n,s)=>Nt(n,s.meta),{})}function pd(e,n){const s={};for(const l in e)s[l]=l in n?n[l]:e[l];return s}function xv(e,n){let s=0,l=n.length;for(;s!==l;){const p=s+l>>1;Tp(e,n[p])<0?l=p:s=p+1}const h=wv(e);return h&&(l=n.lastIndexOf(h,l-1)),l}function wv(e){let n=e;for(;n=n.parent;)if(Dp(n)&&Tp(e,n)===0)return n}function Dp({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Lv(e){const n={};if(e===""||e==="?")return n;const l=(e[0]==="?"?e.slice(1):e).split("&");for(let h=0;h<l.length;++h){const p=l[h].replace(Cp," "),f=p.indexOf("="),y=Xo(f<0?p:p.slice(0,f)),v=f<0?null:Xo(p.slice(f+1));if(y in n){let C=n[y];wn(C)||(C=n[y]=[C]),C.push(v)}else n[y]=v}return n}function md(e){let n="";for(let s in e){const l=e[s];if(s=Gy(s),l==null){l!==void 0&&(n+=(n.length?"&":"")+s);continue}(wn(l)?l.map(p=>p&&wc(p)):[l&&wc(l)]).forEach(p=>{p!==void 0&&(n+=(n.length?"&":"")+s,p!=null&&(n+="="+p))})}return n}function Cv(e){const n={};for(const s in e){const l=e[s];l!==void 0&&(n[s]=wn(l)?l.map(h=>h==null?null:""+h):l==null?l:""+l)}return n}const kv=Symbol(""),gd=Symbol(""),Ul=Symbol(""),Qc=Symbol(""),Cc=Symbol("");function To(){let e=[];function n(l){return e.push(l),()=>{const h=e.indexOf(l);h>-1&&e.splice(h,1)}}function s(){e=[]}return{add:n,list:()=>e.slice(),reset:s}}function wr(e,n,s,l,h,p=f=>f()){const f=l&&(l.enterCallbacks[h]=l.enterCallbacks[h]||[]);return()=>new Promise((y,v)=>{const C=j=>{j===!1?v(Gs(4,{from:s,to:n})):j instanceof Error?v(j):uv(j)?v(Gs(2,{from:n,to:j})):(f&&l.enterCallbacks[h]===f&&typeof j=="function"&&f.push(j),y())},P=p(()=>e.call(l&&l.instances[h],n,s,C));let M=Promise.resolve(P);e.length<3&&(M=M.then(C)),M.catch(j=>v(j))})}function ec(e,n,s,l,h=p=>p()){const p=[];for(const f of e)for(const y in f.components){let v=f.components[y];if(!(n!=="beforeRouteEnter"&&!f.instances[y]))if(wp(v)){const P=(v.__vccOpts||v)[n];P&&p.push(wr(P,s,l,f,y,h))}else{let C=v();p.push(()=>C.then(P=>{if(!P)throw new Error(`Couldn't resolve component "${y}" at "${f.path}"`);const M=Ty(P)?P.default:P;f.mods[y]=P,f.components[y]=M;const W=(M.__vccOpts||M)[n];return W&&wr(W,s,l,f,y,h)()}))}}return p}function _d(e){const n=fn(Ul),s=fn(Qc),l=Et(()=>{const v=Lt(e.to);return n.resolve(v)}),h=Et(()=>{const{matched:v}=l.value,{length:C}=v,P=v[C-1],M=s.matched;if(!P||!M.length)return-1;const j=M.findIndex(Us.bind(null,P));if(j>-1)return j;const W=yd(v[C-2]);return C>1&&yd(P)===W&&M[M.length-1].path!==W?M.findIndex(Us.bind(null,v[C-2])):j}),p=Et(()=>h.value>-1&&Sv(s.params,l.value.params)),f=Et(()=>h.value>-1&&h.value===s.matched.length-1&&Pp(s.params,l.value.params));function y(v={}){if(Pv(v)){const C=n[Lt(e.replace)?"replace":"push"](Lt(e.to)).catch(Go);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>C),C}return Promise.resolve()}return{route:l,href:Et(()=>l.value.href),isActive:p,isExactActive:f,navigate:y}}function Ev(e){return e.length===1?e[0]:e}const Mv=Ki({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:_d,setup(e,{slots:n}){const s=sr(_d(e)),{options:l}=fn(Ul),h=Et(()=>({[vd(e.activeClass,l.linkActiveClass,"router-link-active")]:s.isActive,[vd(e.exactActiveClass,l.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const p=n.default&&Ev(n.default(s));return e.custom?p:jf("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:h.value},p)}}}),Rs=Mv;function Pv(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const n=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return e.preventDefault&&e.preventDefault(),!0}}function Sv(e,n){for(const s in n){const l=n[s],h=e[s];if(typeof l=="string"){if(l!==h)return!1}else if(!wn(h)||h.length!==l.length||l.some((p,f)=>p!==h[f]))return!1}return!0}function yd(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const vd=(e,n,s)=>e??n??s,Bv=Ki({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:n,slots:s}){const l=fn(Cc),h=Et(()=>e.route||l.value),p=fn(gd,0),f=Et(()=>{let C=Lt(p);const{matched:P}=h.value;let M;for(;(M=P[C])&&!M.components;)C++;return C}),y=Et(()=>h.value.matched[f.value]);Xa(gd,Et(()=>f.value+1)),Xa(kv,y),Xa(Cc,h);const v=Ze();return $i(()=>[v.value,y.value,e.name],([C,P,M],[j,W,D])=>{P&&(P.instances[M]=C,W&&W!==P&&C&&C===j&&(P.leaveGuards.size||(P.leaveGuards=W.leaveGuards),P.updateGuards.size||(P.updateGuards=W.updateGuards))),C&&P&&(!W||!Us(P,W)||!j)&&(P.enterCallbacks[M]||[]).forEach(V=>V(C))},{flush:"post"}),()=>{const C=h.value,P=e.name,M=y.value,j=M&&M.components[P];if(!j)return bd(s.default,{Component:j,route:C});const W=M.props[P],D=W?W===!0?C.params:typeof W=="function"?W(C):W:null,H=jf(j,Nt({},D,n,{onVnodeUnmounted:Ce=>{Ce.component.isUnmounted&&(M.instances[P]=null)},ref:v}));return bd(s.default,{Component:H,route:C})||H}}});function bd(e,n){if(!e)return null;const s=e(n);return s.length===1?s[0]:s}const Rp=Bv;function Av(e){const n=yv(e.routes,e),s=e.parseQuery||Lv,l=e.stringifyQuery||md,h=e.history,p=To(),f=To(),y=To(),v=t0(yr);let C=yr;Ds&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const P=Yu.bind(null,Ee=>""+Ee),M=Yu.bind(null,Hy),j=Yu.bind(null,Xo);function W(Ee,Ke){let qe,Ye;return Bp(Ee)?(qe=n.getRecordMatcher(Ee),Ye=Ke):Ye=Ee,n.addRoute(Ye,qe)}function D(Ee){const Ke=n.getRecordMatcher(Ee);Ke&&n.removeRoute(Ke)}function V(){return n.getRoutes().map(Ee=>Ee.record)}function H(Ee){return!!n.getRecordMatcher(Ee)}function Ce(Ee,Ke){if(Ke=Nt({},Ke||v.value),typeof Ee=="string"){const le=Qu(s,Ee,Ke.path),ze=n.resolve({path:le.path},Ke),je=h.createHref(le.fullPath);return Nt(le,ze,{params:j(ze.params),hash:Xo(le.hash),redirectedFrom:void 0,href:je})}let qe;if(Ee.path!=null)qe=Nt({},Ee,{path:Qu(s,Ee.path,Ke.path).path});else{const le=Nt({},Ee.params);for(const ze in le)le[ze]==null&&delete le[ze];qe=Nt({},Ee,{params:M(le)}),Ke.params=M(Ke.params)}const Ye=n.resolve(qe,Ke),tt=Ee.hash||"";Ye.params=P(j(Ye.params));const $=Ky(l,Nt({},Ee,{hash:Uy(tt),path:Ye.path})),Z=h.createHref($);return Nt({fullPath:$,hash:tt,query:l===md?Cv(Ee.query):Ee.query||{}},Ye,{redirectedFrom:void 0,href:Z})}function pe(Ee){return typeof Ee=="string"?Qu(s,Ee,v.value.path):Nt({},Ee)}function re(Ee,Ke){if(C!==Ee)return Gs(8,{from:Ke,to:Ee})}function Ae(Ee){return Be(Ee)}function $e(Ee){return Ae(Nt(pe(Ee),{replace:!0}))}function ge(Ee){const Ke=Ee.matched[Ee.matched.length-1];if(Ke&&Ke.redirect){const{redirect:qe}=Ke;let Ye=typeof qe=="function"?qe(Ee):qe;return typeof Ye=="string"&&(Ye=Ye.includes("?")||Ye.includes("#")?Ye=pe(Ye):{path:Ye},Ye.params={}),Nt({query:Ee.query,hash:Ee.hash,params:Ye.path!=null?{}:Ee.params},Ye)}}function Be(Ee,Ke){const qe=C=Ce(Ee),Ye=v.value,tt=Ee.state,$=Ee.force,Z=Ee.replace===!0,le=ge(qe);if(le)return Be(Nt(pe(le),{state:typeof le=="object"?Nt({},tt,le.state):tt,force:$,replace:Z}),Ke||qe);const ze=qe;ze.redirectedFrom=Ke;let je;return!$&&Wy(l,Ye,qe)&&(je=Gs(16,{to:ze,from:Ye}),xe(Ye,Ye,!0,!1)),(je?Promise.resolve(je):_e(ze,Ye)).catch(ue=>Xn(ue)?Xn(ue,2)?ue:se(ue):q(ue,ze,Ye)).then(ue=>{if(ue){if(Xn(ue,2))return Be(Nt({replace:Z},pe(ue.to),{state:typeof ue.to=="object"?Nt({},tt,ue.to.state):tt,force:$}),Ke||ze)}else ue=Re(ze,Ye,!0,Z,tt);return ee(ze,Ye,ue),ue})}function F(Ee,Ke){const qe=re(Ee,Ke);return qe?Promise.reject(qe):Promise.resolve()}function X(Ee){const Ke=et.values().next().value;return Ke&&typeof Ke.runWithContext=="function"?Ke.runWithContext(Ee):Ee()}function _e(Ee,Ke){let qe;const[Ye,tt,$]=Tv(Ee,Ke);qe=ec(Ye.reverse(),"beforeRouteLeave",Ee,Ke);for(const le of Ye)le.leaveGuards.forEach(ze=>{qe.push(wr(ze,Ee,Ke))});const Z=F.bind(null,Ee,Ke);return qe.push(Z),Xe(qe).then(()=>{qe=[];for(const le of p.list())qe.push(wr(le,Ee,Ke));return qe.push(Z),Xe(qe)}).then(()=>{qe=ec(tt,"beforeRouteUpdate",Ee,Ke);for(const le of tt)le.updateGuards.forEach(ze=>{qe.push(wr(ze,Ee,Ke))});return qe.push(Z),Xe(qe)}).then(()=>{qe=[];for(const le of $)if(le.beforeEnter)if(wn(le.beforeEnter))for(const ze of le.beforeEnter)qe.push(wr(ze,Ee,Ke));else qe.push(wr(le.beforeEnter,Ee,Ke));return qe.push(Z),Xe(qe)}).then(()=>(Ee.matched.forEach(le=>le.enterCallbacks={}),qe=ec($,"beforeRouteEnter",Ee,Ke,X),qe.push(Z),Xe(qe))).then(()=>{qe=[];for(const le of f.list())qe.push(wr(le,Ee,Ke));return qe.push(Z),Xe(qe)}).catch(le=>Xn(le,8)?le:Promise.reject(le))}function ee(Ee,Ke,qe){y.list().forEach(Ye=>X(()=>Ye(Ee,Ke,qe)))}function Re(Ee,Ke,qe,Ye,tt){const $=re(Ee,Ke);if($)return $;const Z=Ke===yr,le=Ds?history.state:{};qe&&(Ye||Z?h.replace(Ee.fullPath,Nt({scroll:Z&&le&&le.scroll},tt)):h.push(Ee.fullPath,tt)),v.value=Ee,xe(Ee,Ke,qe,Z),se()}let Te;function ie(){Te||(Te=h.listen((Ee,Ke,qe)=>{if(!nt.listening)return;const Ye=Ce(Ee),tt=ge(Ye);if(tt){Be(Nt(tt,{replace:!0,force:!0}),Ye).catch(Go);return}C=Ye;const $=v.value;Ds&&nv(od($.fullPath,qe.delta),jl()),_e(Ye,$).catch(Z=>Xn(Z,12)?Z:Xn(Z,2)?(Be(Nt(pe(Z.to),{force:!0}),Ye).then(le=>{Xn(le,20)&&!qe.delta&&qe.type===Yo.pop&&h.go(-1,!1)}).catch(Go),Promise.reject()):(qe.delta&&h.go(-qe.delta,!1),q(Z,Ye,$))).then(Z=>{Z=Z||Re(Ye,$,!1),Z&&(qe.delta&&!Xn(Z,8)?h.go(-qe.delta,!1):qe.type===Yo.pop&&Xn(Z,20)&&h.go(-1,!1)),ee(Ye,$,Z)}).catch(Go)}))}let ke=To(),Ie=To(),Me;function q(Ee,Ke,qe){se(Ee);const Ye=Ie.list();return Ye.length?Ye.forEach(tt=>tt(Ee,Ke,qe)):console.error(Ee),Promise.reject(Ee)}function te(){return Me&&v.value!==yr?Promise.resolve():new Promise((Ee,Ke)=>{ke.add([Ee,Ke])})}function se(Ee){return Me||(Me=!Ee,ie(),ke.list().forEach(([Ke,qe])=>Ee?qe(Ee):Ke()),ke.reset()),Ee}function xe(Ee,Ke,qe,Ye){const{scrollBehavior:tt}=e;if(!Ds||!tt)return Promise.resolve();const $=!qe&&rv(od(Ee.fullPath,0))||(Ye||!qe)&&history.state&&history.state.scroll||null;return zs().then(()=>tt(Ee,Ke,$)).then(Z=>Z&&iv(Z)).catch(Z=>q(Z,Ee,Ke))}const ve=Ee=>h.go(Ee);let Je;const et=new Set,nt={currentRoute:v,listening:!0,addRoute:W,removeRoute:D,clearRoutes:n.clearRoutes,hasRoute:H,getRoutes:V,resolve:Ce,options:e,push:Ae,replace:$e,go:ve,back:()=>ve(-1),forward:()=>ve(1),beforeEach:p.add,beforeResolve:f.add,afterEach:y.add,onError:Ie.add,isReady:te,install(Ee){const Ke=this;Ee.component("RouterLink",Rs),Ee.component("RouterView",Rp),Ee.config.globalProperties.$router=Ke,Object.defineProperty(Ee.config.globalProperties,"$route",{enumerable:!0,get:()=>Lt(v)}),Ds&&!Je&&v.value===yr&&(Je=!0,Ae(h.location).catch(tt=>{}));const qe={};for(const tt in yr)Object.defineProperty(qe,tt,{get:()=>v.value[tt],enumerable:!0});Ee.provide(Ul,Ke),Ee.provide(Qc,af(qe)),Ee.provide(Cc,v);const Ye=Ee.unmount;et.add(Ee),Ee.unmount=function(){et.delete(Ee),et.size<1&&(C=yr,Te&&Te(),Te=null,v.value=yr,Je=!1,Me=!1),Ye()}}};function Xe(Ee){return Ee.reduce((Ke,qe)=>Ke.then(()=>X(qe)),Promise.resolve())}return nt}function Tv(e,n){const s=[],l=[],h=[],p=Math.max(n.matched.length,e.matched.length);for(let f=0;f<p;f++){const y=n.matched[f];y&&(e.matched.find(C=>Us(C,y))?l.push(y):s.push(y));const v=e.matched[f];v&&(n.matched.find(C=>Us(C,v))||h.push(v))}return[s,l,h]}function qs(){return fn(Ul)}function BC(e){return fn(Qc)}var nr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Op(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Dv(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var Ip=Dv,Rv=typeof nr=="object"&&nr&&nr.Object===Object&&nr,Ov=Rv,Iv=Ov,Fv=typeof self=="object"&&self&&self.Object===Object&&self,Nv=Iv||Fv||Function("return this")(),Fp=Nv,zv=Fp,$v=function(){return zv.Date.now()},jv=$v,Uv=/\s/;function Gv(e){for(var n=e.length;n--&&Uv.test(e.charAt(n)););return n}var Vv=Gv,Hv=Vv,Zv=/^\s+/;function qv(e){return e&&e.slice(0,Hv(e)+1).replace(Zv,"")}var Kv=qv,Wv=Fp,Jv=Wv.Symbol,Np=Jv,xd=Np,zp=Object.prototype,Xv=zp.hasOwnProperty,Yv=zp.toString,Do=xd?xd.toStringTag:void 0;function Qv(e){var n=Xv.call(e,Do),s=e[Do];try{e[Do]=void 0;var l=!0}catch{}var h=Yv.call(e);return l&&(n?e[Do]=s:delete e[Do]),h}var e4=Qv,t4=Object.prototype,i4=t4.toString;function n4(e){return i4.call(e)}var r4=n4,wd=Np,s4=e4,o4=r4,a4="[object Null]",l4="[object Undefined]",Ld=wd?wd.toStringTag:void 0;function u4(e){return e==null?e===void 0?l4:a4:Ld&&Ld in Object(e)?s4(e):o4(e)}var c4=u4;function h4(e){return e!=null&&typeof e=="object"}var d4=h4,f4=c4,p4=d4,m4="[object Symbol]";function g4(e){return typeof e=="symbol"||p4(e)&&f4(e)==m4}var _4=g4,y4=Kv,Cd=Ip,v4=_4,kd=NaN,b4=/^[-+]0x[0-9a-f]+$/i,x4=/^0b[01]+$/i,w4=/^0o[0-7]+$/i,L4=parseInt;function C4(e){if(typeof e=="number")return e;if(v4(e))return kd;if(Cd(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=Cd(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=y4(e);var s=x4.test(e);return s||w4.test(e)?L4(e.slice(2),s?2:8):b4.test(e)?kd:+e}var k4=C4,E4=Ip,tc=jv,Ed=k4,M4="Expected a function",P4=Math.max,S4=Math.min;function B4(e,n,s){var l,h,p,f,y,v,C=0,P=!1,M=!1,j=!0;if(typeof e!="function")throw new TypeError(M4);n=Ed(n)||0,E4(s)&&(P=!!s.leading,M="maxWait"in s,p=M?P4(Ed(s.maxWait)||0,n):p,j="trailing"in s?!!s.trailing:j);function W(ge){var Be=l,F=h;return l=h=void 0,C=ge,f=e.apply(F,Be),f}function D(ge){return C=ge,y=setTimeout(Ce,n),P?W(ge):f}function V(ge){var Be=ge-v,F=ge-C,X=n-Be;return M?S4(X,p-F):X}function H(ge){var Be=ge-v,F=ge-C;return v===void 0||Be>=n||Be<0||M&&F>=p}function Ce(){var ge=tc();if(H(ge))return pe(ge);y=setTimeout(Ce,V(ge))}function pe(ge){return y=void 0,j&&l?W(ge):(l=h=void 0,f)}function re(){y!==void 0&&clearTimeout(y),C=0,l=v=h=y=void 0}function Ae(){return y===void 0?f:pe(tc())}function $e(){var ge=tc(),Be=H(ge);if(l=arguments,h=this,v=ge,Be){if(y===void 0)return D(v);if(M)return clearTimeout(y),y=setTimeout(Ce,n),W(v)}return y===void 0&&(y=setTimeout(Ce,n)),f}return $e.cancel=re,$e.flush=Ae,$e}var A4=B4;const T4=Op(A4),D4={class:"relative w-full"},R4={key:0,class:"absolute w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto z-[1001]"},O4=["onClick"],I4=Ki({__name:"SearchBar",emits:["select-location"],setup(e,{emit:n}){const s=Ze(""),l=Ze([]),h=n,p=T4(async v=>{if(v.length<3){l.value=[];return}try{const P=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(v)}`)).json();l.value=P}catch(C){console.error("Erreur lors de la recherche d'adresse:",C),l.value=[]}},300);function f(){p(s.value)}function y(v){s.value=v.display_name,l.value=[],h("select-location",{lat:parseFloat(v.lat),lng:parseFloat(v.lon)})}return(v,C)=>(ce(),ye("div",D4,[St(w("input",{"onUpdate:modelValue":C[0]||(C[0]=P=>s.value=P),onInput:f,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[Yt,s.value]]),l.value.length>0?(ce(),ye("div",R4,[(ce(!0),ye(Ct,null,It(l.value,P=>(ce(),ye("div",{key:P.place_id,onClick:M=>y(P),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},Ge(P.display_name),9,O4))),128))])):ct("",!0)]))}}),$p=(e,n)=>{const s=e.__vccOpts||e;for(const[l,h]of n)s[l]=h;return s},Md=$p(I4,[["__scopeId","data-v-0102bcad"]]),F4={class:"h-screen flex flex-col"},N4={key:0,class:"bg-white shadow-sm z-[2000]"},z4={class:"mx-auto px-4 sm:px-6 lg:px-8"},$4={class:"flex h-16 items-center justify-between"},j4={class:"flex items-center space-x-8"},U4={class:"hidden md:flex space-x-6"},G4={key:0,class:"hidden md:block flex-1 mx-8"},V4={key:1,class:"flex-1"},H4={class:"flex items-center space-x-2 md:space-x-4"},Z4={class:"flex md:hidden"},q4={class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},K4={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},W4={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},J4={class:"relative"},X4={class:"hidden md:flex flex-col items-end"},Y4={class:"text-sm font-medium text-gray-700"},Q4={key:0,class:"text-xs text-gray-500"},e1=["src","alt"],t1={key:0,class:"absolute right-0 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3000]"},i1={class:"md:hidden px-4 py-2 border-b border-gray-100"},n1={class:"text-sm font-medium text-gray-700"},r1={class:"text-xs text-gray-500"},s1={key:0,class:"md:hidden"},o1={class:"space-y-1 px-2 pb-3 pt-2"},a1={key:0,class:"px-4 py-3"},l1={class:"flex-1 overflow-auto"},u1={key:0,class:"fixed inset-0 bg-white z-[2001] flex flex-col items-center justify-center p-6 text-center"},c1=Ki({__name:"App",setup(e){const n=qs(),s=ji(),l=Ze(!1),h=Ze(!1),p=Ze(!1);function f(){p.value=window.innerWidth<768}rr(()=>{f(),window.addEventListener("resize",f)}),Hc(()=>{window.removeEventListener("resize",f)});const y=Et(()=>{const pe=s.user;if(!pe)return"";const re=`${pe.first_name} ${pe.last_name.toUpperCase()}`;return pe.company_name?`${re} (${pe.company_name})`:re}),v=Et(()=>{var re;const pe=(re=s.user)==null?void 0:re.user_type;switch(console.log("User type:",pe),pe){case"admin":return"Accs administrateur";case"dealer":return"Accs concessionnaire";case"client":return"Accs client";default:return""}}),C=Et(()=>{var pe;return((pe=s.user)==null?void 0:pe.user_type)==="admin"}),P=Ze(""),M=Et(()=>s.isAuthenticated),j=[{name:"Carte",to:"/"},{name:"Plans",to:"/plans"}],W=Et(()=>{var re;if(!M.value)return[];const pe=[...j];return C.value?pe.push({name:"Utilisateurs",to:"/users"}):((re=s.user)==null?void 0:re.user_type)==="dealer"&&pe.push({name:"Clients",to:"/clients"}),pe}),D=Et(()=>M.value?[{name:"Mon profil",to:"/profile"}]:[]);async function V(){try{await s.logout(),n.push("/login")}catch(pe){console.error("Erreur lors de la dconnexion:",pe)}}function H(pe){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:pe.lat,lng:pe.lng,zoom:16}}))}rr(async()=>{console.log("App mounted, checking auth...");try{localStorage.getItem("token")?(console.log("Token found, checking auth..."),await s.checkAuth(),await s.fetchUserProfile()):console.log("No token found")}catch(pe){console.error("Auth check error:",pe),n.push("/login")}});const Ce=Et(()=>{const pe="IrrigationDesign";if(!M.value)return`${pe} - Connexion`;const re=n.currentRoute.value,$e={home:"Carte",plans:"Plans",users:"Utilisateurs",profile:"Mon profil",selectDealer:"Slection du concessionnaire",changePassword:"Changement de mot de passe",map:"Carte"}[re.name]||"";return $e?`${pe} - ${$e}`:pe});return $i(Ce,pe=>{document.title=pe},{immediate:!0}),(pe,re)=>(ce(),ye("div",F4,[M.value?(ce(),ye("header",N4,[w("nav",z4,[w("div",$4,[w("div",j4,[ni(Lt(Rs),{to:"/",class:"text-xl font-semibold text-primary-600 truncate"},{default:Hr(()=>re[4]||(re[4]=[w("span",{class:"md:inline hidden"},"IrrigationDesign",-1),w("span",{class:"md:hidden inline"},"ID",-1)])),_:1}),w("div",U4,[(ce(!0),ye(Ct,null,It(W.value,Ae=>(ce(),ir(Lt(Rs),{key:Ae.name,to:Ae.to,class:Bi(["text-sm font-medium transition-colors duration-200",[pe.$route.path===Ae.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Hr(()=>[Wt(Ge(Ae.name),1)]),_:2},1032,["to","class"]))),128))])]),pe.$route.path==="/"?(ce(),ye("div",G4,[ni(Md,{onSelectLocation:H})])):(ce(),ye("div",V4)),w("div",H4,[w("div",Z4,[w("button",{onClick:re[0]||(re[0]=Ae=>h.value=!h.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500"},[re[5]||(re[5]=w("span",{class:"sr-only"},"Ouvrir le menu",-1)),(ce(),ye("svg",q4,[h.value?(ce(),ye("path",W4)):(ce(),ye("path",K4))]))])]),re[6]||(re[6]=w("button",{class:"hidden md:flex p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},[w("span",{class:"sr-only"},"Voir les notifications"),w("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})])],-1)),w("div",J4,[w("button",{onClick:re[1]||(re[1]=Ae=>l.value=!l.value),class:"flex items-center space-x-2 md:space-x-3 focus:outline-none"},[w("div",X4,[w("span",Y4,Ge(y.value),1),v.value?(ce(),ye("span",Q4,Ge(v.value),1)):ct("",!0)]),w("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:P.value||"https://ui-avatars.com/api/?name="+encodeURIComponent(y.value),alt:y.value},null,8,e1)]),l.value?(ce(),ye("div",t1,[w("div",i1,[w("div",n1,Ge(y.value),1),w("div",r1,Ge(v.value),1)]),(ce(!0),ye(Ct,null,It(D.value,Ae=>(ce(),ir(Lt(Rs),{key:Ae.name,to:Ae.to,class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:re[2]||(re[2]=$e=>l.value=!1)},{default:Hr(()=>[Wt(Ge(Ae.name),1)]),_:2},1032,["to"]))),128)),w("button",{onClick:V,class:"block w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-gray-50"}," Dconnexion ")])):ct("",!0)])])]),h.value?(ce(),ye("div",s1,[w("div",o1,[(ce(!0),ye(Ct,null,It(W.value,Ae=>(ce(),ir(Lt(Rs),{key:Ae.name,to:Ae.to,class:Bi(["block px-3 py-2 rounded-md text-base font-medium",[pe.$route.path===Ae.to?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]]),onClick:re[3]||(re[3]=$e=>h.value=!1)},{default:Hr(()=>[Wt(Ge(Ae.name),1)]),_:2},1032,["to","class"]))),128))]),pe.$route.path==="/"?(ce(),ye("div",a1,[ni(Md,{onSelectLocation:H})])):ct("",!0)])):ct("",!0)])])):ct("",!0),w("main",l1,[p.value&&pe.$route.path==="/"?(ce(),ye("div",u1,[re[8]||(re[8]=w("svg",{class:"w-24 h-24 text-primary-500 mb-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),re[9]||(re[9]=w("h2",{class:"text-2xl font-bold text-gray-900 mb-4"}," Version bureau recommande ",-1)),re[10]||(re[10]=w("p",{class:"text-gray-600 mb-8 max-w-md"}," Pour une meilleure exprience de conception d'irrigation, nous vous recommandons d'utiliser un cran plus large ou un ordinateur. ",-1)),ni(Lt(Rs),{to:"/plans",class:"inline-flex items-center px-4 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700"},{default:Hr(()=>re[7]||(re[7]=[Wt(" Voir mes plans ")])),_:1})])):(ce(),ir(Lt(Rp),{key:1}))])]))}}),h1="modulepreload",d1=function(e){return"/static/frontend/"+e},Pd={},Ka=function(n,s,l){let h=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),y=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));h=Promise.allSettled(s.map(v=>{if(v=d1(v),v in Pd)return;Pd[v]=!0;const C=v.endsWith(".css"),P=C?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${P}`))return;const M=document.createElement("link");if(M.rel=C?"stylesheet":h1,C||(M.as="script"),M.crossOrigin="",M.href=v,y&&M.setAttribute("nonce",y),document.head.appendChild(M),C)return new Promise((j,W)=>{M.addEventListener("load",j),M.addEventListener("error",()=>W(new Error(`Unable to preload CSS for ${v}`)))})}))}function p(f){const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=f,window.dispatchEvent(y),!y.defaultPrevented)throw f}return h.then(f=>{for(const y of f||[])y.status==="rejected"&&p(y.reason);return n().catch(p)})},f1={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},p1={class:"max-w-md w-full space-y-8"},m1={class:"space-y-4"},g1={class:"mt-1"},_1={class:"mt-1"},y1={class:"mt-1"},v1={key:0,class:"rounded-md bg-red-50 p-4"},b1={class:"flex"},x1={class:"ml-3"},w1={class:"text-sm font-medium text-red-800"},L1={key:1,class:"rounded-md bg-yellow-50 p-4"},C1={class:"flex"},k1={class:"ml-3"},E1={class:"mt-2 text-sm text-yellow-700"},M1={class:"list-disc pl-5 space-y-1"},P1=["disabled"],S1={class:"absolute left-0 inset-y-0 flex items-center pl-3"},B1={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},A1={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},T1=Ki({__name:"ChangePasswordForm",setup(e){const n=qs(),s=ji(),l=sr({oldPassword:"",newPassword:"",confirmPassword:""}),h=Ze(!1),p=Ze("");rr(()=>{var C,P;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:s.isAuthenticated,userId:(C=s.user)==null?void 0:C.id,mustChangePassword:(P=s.user)==null?void 0:P.must_change_password})});const f=Et(()=>{const C=[];return l.newPassword&&l.newPassword.length<8&&C.push("Le nouveau mot de passe doit contenir au moins 8 caractres"),l.newPassword&&l.confirmPassword&&l.newPassword!==l.confirmPassword&&C.push("Les mots de passe ne correspondent pas"),C}),y=Et(()=>l.oldPassword.length>0&&l.newPassword.length>=8&&l.newPassword===l.confirmPassword);async function v(){var C,P,M,j,W,D,V,H;if(!y.value){p.value="Veuillez corriger les erreurs avant de continuer";return}if(!((C=s.user)!=null&&C.id)){p.value="Erreur : utilisateur non identifi";return}h.value=!0,p.value="";try{console.log("Submitting password change..."),await s.changePassword(l.oldPassword,l.newPassword),console.log("Password changed successfully"),n.push("/")}catch(Ce){console.error("Password change failed:",Ce),(M=(P=Ce.response)==null?void 0:P.data)!=null&&M.detail?p.value=Ce.response.data.detail:(W=(j=Ce.response)==null?void 0:j.data)!=null&&W.old_password?p.value=Ce.response.data.old_password[0]:(V=(D=Ce.response)==null?void 0:D.data)!=null&&V.password?p.value=Ce.response.data.password[0]:((H=Ce.response)==null?void 0:H.status)===401?(p.value="Session expire, veuillez vous reconnecter",await s.logout(),n.push("/login")):p.value="Une erreur est survenue lors du changement de mot de passe"}finally{h.value=!1}}return(C,P)=>(ce(),ye("div",f1,[w("div",p1,[P[12]||(P[12]=w("div",null,[w("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),w("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de scurit, vous devez changer votre mot de passe. ")],-1)),w("form",{class:"mt-8 space-y-6",onSubmit:Dl(v,["prevent"])},[w("div",m1,[w("div",null,[P[3]||(P[3]=w("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),w("div",g1,[St(w("input",{id:"old-password","onUpdate:modelValue":P[0]||(P[0]=M=>l.oldPassword=M),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[Yt,l.oldPassword]])])]),w("div",null,[P[4]||(P[4]=w("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),w("div",_1,[St(w("input",{id:"new-password","onUpdate:modelValue":P[1]||(P[1]=M=>l.newPassword=M),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[Yt,l.newPassword]])]),P[5]||(P[5]=w("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractres ",-1))]),w("div",null,[P[6]||(P[6]=w("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),w("div",y1,[St(w("input",{id:"confirm-password","onUpdate:modelValue":P[2]||(P[2]=M=>l.confirmPassword=M),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[Yt,l.confirmPassword]])])])]),p.value?(ce(),ye("div",v1,[w("div",b1,[P[7]||(P[7]=w("div",{class:"flex-shrink-0"},[w("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),w("div",x1,[w("h3",w1,Ge(p.value),1)])])])):ct("",!0),f.value.length>0?(ce(),ye("div",L1,[w("div",C1,[P[9]||(P[9]=w("div",{class:"flex-shrink-0"},[w("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),w("div",k1,[P[8]||(P[8]=w("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),w("div",E1,[w("ul",M1,[(ce(!0),ye(Ct,null,It(f.value,(M,j)=>(ce(),ye("li",{key:j},Ge(M),1))),128))])])])])])):ct("",!0),w("div",null,[w("button",{type:"submit",disabled:h.value||!y.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[w("span",S1,[h.value?(ce(),ye("svg",A1,P[11]||(P[11]=[w("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),w("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(ce(),ye("svg",B1,P[10]||(P[10]=[w("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),Wt(" "+Ge(h.value?"Modification en cours...":"Changer le mot de passe"),1)],8,P1)])],32)])]))}}),jp="/static/frontend/assets/logo.svg",D1={class:"min-h-screen bg-white from-blue-50 to-white flex flex-col justify-center py-12 sm:px-6 lg:px-8"},R1={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},O1={class:"bg-white py-8 px-6 shadow-lg rounded-md sm:px-10"},I1={key:0,class:"rounded-md bg-red-50 p-4"},F1={class:"flex"},N1={class:"ml-3"},z1={class:"text-sm font-medium text-red-800"},$1={class:"mt-1"},j1={class:"mt-1 relative"},U1=["type"],G1={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},V1={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},H1={class:"flex items-center justify-between"},Z1={class:"flex items-center"},q1={class:"text-sm"},K1=["disabled"],W1={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},J1=Ki({__name:"LoginView",setup(e){const n=qs(),s=ji(),l=Ze(!1),h=Ze(null),p=Ze(!1),f=sr({username:"",password:"",rememberMe:!1});rr(()=>{var v;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE),(v=window.INITIAL_STATE)!=null&&v.isAuthenticated&&(console.log("User is authenticated, redirecting to home"),n.push("/"))});async function y(){var v,C,P,M,j,W;l.value=!0,h.value=null;try{if(!f.username||!f.password){h.value="Veuillez remplir tous les champs";return}await s.login(f.username,f.password),(v=s.user)!=null&&v.must_change_password?n.push("/change-password"):n.push("/")}catch(D){console.error("Login error:",D),h.value=((P=(C=D==null?void 0:D.response)==null?void 0:C.data)==null?void 0:P.detail)||((W=(j=(M=D==null?void 0:D.response)==null?void 0:M.data)==null?void 0:j.non_field_errors)==null?void 0:W[0])||(D==null?void 0:D.message)||"Erreur lors de la connexion"}finally{l.value=!1}}return(v,C)=>{const P=M0("router-link");return ce(),ye("div",D1,[C[12]||(C[12]=w("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[w("img",{src:jp,alt:"IrrigationDesign Logo",class:"mx-auto h-40 w-auto transition-transform duration-300 hover:scale-110"}),w("h2",{class:"mt-2 text-center text-3xl font-bold text-gray-800"}," IrrigationDesign "),w("p",{class:"mt-2 text-center text-sm text-gray-600"}," Connectez-vous pour accder  votre espace ")],-1)),w("div",R1,[w("div",O1,[w("form",{class:"space-y-6",onSubmit:Dl(y,["prevent"])},[h.value?(ce(),ye("div",I1,[w("div",F1,[C[4]||(C[4]=w("div",{class:"flex-shrink-0"},[w("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),w("div",N1,[w("h3",z1,Ge(h.value),1)])])])):ct("",!0),w("div",null,[C[5]||(C[5]=w("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),w("div",$1,[St(w("input",{id:"username","onUpdate:modelValue":C[0]||(C[0]=M=>f.username=M),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[Yt,f.username]])])]),w("div",null,[C[8]||(C[8]=w("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),w("div",j1,[St(w("input",{id:"password","onUpdate:modelValue":C[1]||(C[1]=M=>f.password=M),type:p.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,U1),[[$g,f.password]]),w("button",{type:"button",onClick:C[2]||(C[2]=M=>p.value=!p.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[p.value?(ce(),ye("svg",G1,C[6]||(C[6]=[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(ce(),ye("svg",V1,C[7]||(C[7]=[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),w("div",H1,[w("div",Z1,[St(w("input",{id:"remember-me","onUpdate:modelValue":C[3]||(C[3]=M=>f.rememberMe=M),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[Vf,f.rememberMe]]),C[9]||(C[9]=w("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),w("div",q1,[ni(P,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Hr(()=>C[10]||(C[10]=[Wt(" Mot de passe oubli ? ")])),_:1})])]),w("div",null,[w("button",{type:"submit",disabled:l.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[l.value?(ce(),ye("svg",W1,C[11]||(C[11]=[w("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),w("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):ct("",!0),Wt(" "+Ge(l.value?"Connexion en cours...":"Se connecter"),1)],8,K1)])],32)])])])}}});var kc={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,n){(function(s,l){l(n)})(nr,function(s){var l="1.9.4";function h(t){var o,c,m,x;for(c=1,m=arguments.length;c<m;c++){x=arguments[c];for(o in x)t[o]=x[o]}return t}var p=Object.create||function(){function t(){}return function(o){return t.prototype=o,new t}}();function f(t,o){var c=Array.prototype.slice;if(t.bind)return t.bind.apply(t,c.call(arguments,1));var m=c.call(arguments,2);return function(){return t.apply(o,m.length?m.concat(c.call(arguments)):arguments)}}var y=0;function v(t){return"_leaflet_id"in t||(t._leaflet_id=++y),t._leaflet_id}function C(t,o,c){var m,x,B,K;return K=function(){m=!1,x&&(B.apply(c,x),x=!1)},B=function(){m?x=arguments:(t.apply(c,arguments),setTimeout(K,o),m=!0)},B}function P(t,o,c){var m=o[1],x=o[0],B=m-x;return t===m&&c?t:((t-x)%B+B)%B+x}function M(){return!1}function j(t,o){if(o===!1)return t;var c=Math.pow(10,o===void 0?6:o);return Math.round(t*c)/c}function W(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function D(t){return W(t).split(/\s+/)}function V(t,o){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?p(t.options):{});for(var c in o)t.options[c]=o[c];return t.options}function H(t,o,c){var m=[];for(var x in t)m.push(encodeURIComponent(c?x.toUpperCase():x)+"="+encodeURIComponent(t[x]));return(!o||o.indexOf("?")===-1?"?":"&")+m.join("&")}var Ce=/\{ *([\w_ -]+) *\}/g;function pe(t,o){return t.replace(Ce,function(c,m){var x=o[m];if(x===void 0)throw new Error("No value provided for variable "+c);return typeof x=="function"&&(x=x(o)),x})}var re=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function Ae(t,o){for(var c=0;c<t.length;c++)if(t[c]===o)return c;return-1}var $e="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ge(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var Be=0;function F(t){var o=+new Date,c=Math.max(0,16-(o-Be));return Be=o+c,window.setTimeout(t,c)}var X=window.requestAnimationFrame||ge("RequestAnimationFrame")||F,_e=window.cancelAnimationFrame||ge("CancelAnimationFrame")||ge("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function ee(t,o,c){if(c&&X===F)t.call(o);else return X.call(window,f(t,o))}function Re(t){t&&_e.call(window,t)}var Te={__proto__:null,extend:h,create:p,bind:f,get lastId(){return y},stamp:v,throttle:C,wrapNum:P,falseFn:M,formatNum:j,trim:W,splitWords:D,setOptions:V,getParamString:H,template:pe,isArray:re,indexOf:Ae,emptyImageUrl:$e,requestFn:X,cancelFn:_e,requestAnimFrame:ee,cancelAnimFrame:Re};function ie(){}ie.extend=function(t){var o=function(){V(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=o.__super__=this.prototype,m=p(c);m.constructor=o,o.prototype=m;for(var x in this)Object.prototype.hasOwnProperty.call(this,x)&&x!=="prototype"&&x!=="__super__"&&(o[x]=this[x]);return t.statics&&h(o,t.statics),t.includes&&(ke(t.includes),h.apply(null,[m].concat(t.includes))),h(m,t),delete m.statics,delete m.includes,m.options&&(m.options=c.options?p(c.options):{},h(m.options,t.options)),m._initHooks=[],m.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var B=0,K=m._initHooks.length;B<K;B++)m._initHooks[B].call(this)}},o},ie.include=function(t){var o=this.prototype.options;return h(this.prototype,t),t.options&&(this.prototype.options=o,this.mergeOptions(t.options)),this},ie.mergeOptions=function(t){return h(this.prototype.options,t),this},ie.addInitHook=function(t){var o=Array.prototype.slice.call(arguments,1),c=typeof t=="function"?t:function(){this[t].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function ke(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=re(t)?t:[t];for(var o=0;o<t.length;o++)t[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ie={on:function(t,o,c){if(typeof t=="object")for(var m in t)this._on(m,t[m],o);else{t=D(t);for(var x=0,B=t.length;x<B;x++)this._on(t[x],o,c)}return this},off:function(t,o,c){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var m in t)this._off(m,t[m],o);else{t=D(t);for(var x=arguments.length===1,B=0,K=t.length;B<K;B++)x?this._off(t[B]):this._off(t[B],o,c)}return this},_on:function(t,o,c,m){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(t,o,c)===!1){c===this&&(c=void 0);var x={fn:o,ctx:c};m&&(x.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(x)}},_off:function(t,o,c){var m,x,B;if(this._events&&(m=this._events[t],!!m)){if(arguments.length===1){if(this._firingCount)for(x=0,B=m.length;x<B;x++)m[x].fn=M;delete this._events[t];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var K=this._listens(t,o,c);if(K!==!1){var he=m[K];this._firingCount&&(he.fn=M,this._events[t]=m=m.slice()),m.splice(K,1)}}},fire:function(t,o,c){if(!this.listens(t,c))return this;var m=h({},o,{type:t,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var x=this._events[t];if(x){this._firingCount=this._firingCount+1||1;for(var B=0,K=x.length;B<K;B++){var he=x[B],Se=he.fn;he.once&&this.off(t,Se,he.ctx),Se.call(he.ctx||this,m)}this._firingCount--}}return c&&this._propagateEvent(m),this},listens:function(t,o,c,m){typeof t!="string"&&console.warn('"string" type argument expected');var x=o;typeof o!="function"&&(m=!!o,x=void 0,c=void 0);var B=this._events&&this._events[t];if(B&&B.length&&this._listens(t,x,c)!==!1)return!0;if(m){for(var K in this._eventParents)if(this._eventParents[K].listens(t,o,c,m))return!0}return!1},_listens:function(t,o,c){if(!this._events)return!1;var m=this._events[t]||[];if(!o)return!!m.length;c===this&&(c=void 0);for(var x=0,B=m.length;x<B;x++)if(m[x].fn===o&&m[x].ctx===c)return x;return!1},once:function(t,o,c){if(typeof t=="object")for(var m in t)this._on(m,t[m],o,!0);else{t=D(t);for(var x=0,B=t.length;x<B;x++)this._on(t[x],o,c,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[v(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[v(t)],this},_propagateEvent:function(t){for(var o in this._eventParents)this._eventParents[o].fire(t.type,h({layer:t.target,propagatedFrom:t.target},t),!0)}};Ie.addEventListener=Ie.on,Ie.removeEventListener=Ie.clearAllEventListeners=Ie.off,Ie.addOneTimeEventListener=Ie.once,Ie.fireEvent=Ie.fire,Ie.hasEventListeners=Ie.listens;var Me=ie.extend(Ie);function q(t,o,c){this.x=c?Math.round(t):t,this.y=c?Math.round(o):o}var te=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};q.prototype={clone:function(){return new q(this.x,this.y)},add:function(t){return this.clone()._add(se(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(se(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new q(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new q(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=te(this.x),this.y=te(this.y),this},distanceTo:function(t){t=se(t);var o=t.x-this.x,c=t.y-this.y;return Math.sqrt(o*o+c*c)},equals:function(t){return t=se(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=se(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+j(this.x)+", "+j(this.y)+")"}};function se(t,o,c){return t instanceof q?t:re(t)?new q(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new q(t.x,t.y):new q(t,o,c)}function xe(t,o){if(t)for(var c=o?[t,o]:t,m=0,x=c.length;m<x;m++)this.extend(c[m])}xe.prototype={extend:function(t){var o,c;if(!t)return this;if(t instanceof q||typeof t[0]=="number"||"x"in t)o=c=se(t);else if(t=ve(t),o=t.min,c=t.max,!o||!c)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=c.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(t){return se((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return se(this.min.x,this.max.y)},getTopRight:function(){return se(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var o,c;return typeof t[0]=="number"||t instanceof q?t=se(t):t=ve(t),t instanceof xe?(o=t.min,c=t.max):o=c=t,o.x>=this.min.x&&c.x<=this.max.x&&o.y>=this.min.y&&c.y<=this.max.y},intersects:function(t){t=ve(t);var o=this.min,c=this.max,m=t.min,x=t.max,B=x.x>=o.x&&m.x<=c.x,K=x.y>=o.y&&m.y<=c.y;return B&&K},overlaps:function(t){t=ve(t);var o=this.min,c=this.max,m=t.min,x=t.max,B=x.x>o.x&&m.x<c.x,K=x.y>o.y&&m.y<c.y;return B&&K},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var o=this.min,c=this.max,m=Math.abs(o.x-c.x)*t,x=Math.abs(o.y-c.y)*t;return ve(se(o.x-m,o.y-x),se(c.x+m,c.y+x))},equals:function(t){return t?(t=ve(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function ve(t,o){return!t||t instanceof xe?t:new xe(t,o)}function Je(t,o){if(t)for(var c=o?[t,o]:t,m=0,x=c.length;m<x;m++)this.extend(c[m])}Je.prototype={extend:function(t){var o=this._southWest,c=this._northEast,m,x;if(t instanceof nt)m=t,x=t;else if(t instanceof Je){if(m=t._southWest,x=t._northEast,!m||!x)return this}else return t?this.extend(Xe(t)||et(t)):this;return!o&&!c?(this._southWest=new nt(m.lat,m.lng),this._northEast=new nt(x.lat,x.lng)):(o.lat=Math.min(m.lat,o.lat),o.lng=Math.min(m.lng,o.lng),c.lat=Math.max(x.lat,c.lat),c.lng=Math.max(x.lng,c.lng)),this},pad:function(t){var o=this._southWest,c=this._northEast,m=Math.abs(o.lat-c.lat)*t,x=Math.abs(o.lng-c.lng)*t;return new Je(new nt(o.lat-m,o.lng-x),new nt(c.lat+m,c.lng+x))},getCenter:function(){return new nt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new nt(this.getNorth(),this.getWest())},getSouthEast:function(){return new nt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof nt||"lat"in t?t=Xe(t):t=et(t);var o=this._southWest,c=this._northEast,m,x;return t instanceof Je?(m=t.getSouthWest(),x=t.getNorthEast()):m=x=t,m.lat>=o.lat&&x.lat<=c.lat&&m.lng>=o.lng&&x.lng<=c.lng},intersects:function(t){t=et(t);var o=this._southWest,c=this._northEast,m=t.getSouthWest(),x=t.getNorthEast(),B=x.lat>=o.lat&&m.lat<=c.lat,K=x.lng>=o.lng&&m.lng<=c.lng;return B&&K},overlaps:function(t){t=et(t);var o=this._southWest,c=this._northEast,m=t.getSouthWest(),x=t.getNorthEast(),B=x.lat>o.lat&&m.lat<c.lat,K=x.lng>o.lng&&m.lng<c.lng;return B&&K},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,o){return t?(t=et(t),this._southWest.equals(t.getSouthWest(),o)&&this._northEast.equals(t.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function et(t,o){return t instanceof Je?t:new Je(t,o)}function nt(t,o,c){if(isNaN(t)||isNaN(o))throw new Error("Invalid LatLng object: ("+t+", "+o+")");this.lat=+t,this.lng=+o,c!==void 0&&(this.alt=+c)}nt.prototype={equals:function(t,o){if(!t)return!1;t=Xe(t);var c=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return c<=(o===void 0?1e-9:o)},toString:function(t){return"LatLng("+j(this.lat,t)+", "+j(this.lng,t)+")"},distanceTo:function(t){return Ke.distance(this,Xe(t))},wrap:function(){return Ke.wrapLatLng(this)},toBounds:function(t){var o=180*t/40075017,c=o/Math.cos(Math.PI/180*this.lat);return et([this.lat-o,this.lng-c],[this.lat+o,this.lng+c])},clone:function(){return new nt(this.lat,this.lng,this.alt)}};function Xe(t,o,c){return t instanceof nt?t:re(t)&&typeof t[0]!="object"?t.length===3?new nt(t[0],t[1],t[2]):t.length===2?new nt(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new nt(t.lat,"lng"in t?t.lng:t.lon,t.alt):o===void 0?null:new nt(t,o,c)}var Ee={latLngToPoint:function(t,o){var c=this.projection.project(t),m=this.scale(o);return this.transformation._transform(c,m)},pointToLatLng:function(t,o){var c=this.scale(o),m=this.transformation.untransform(t,c);return this.projection.unproject(m)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var o=this.projection.bounds,c=this.scale(t),m=this.transformation.transform(o.min,c),x=this.transformation.transform(o.max,c);return new xe(m,x)},infinite:!1,wrapLatLng:function(t){var o=this.wrapLng?P(t.lng,this.wrapLng,!0):t.lng,c=this.wrapLat?P(t.lat,this.wrapLat,!0):t.lat,m=t.alt;return new nt(c,o,m)},wrapLatLngBounds:function(t){var o=t.getCenter(),c=this.wrapLatLng(o),m=o.lat-c.lat,x=o.lng-c.lng;if(m===0&&x===0)return t;var B=t.getSouthWest(),K=t.getNorthEast(),he=new nt(B.lat-m,B.lng-x),Se=new nt(K.lat-m,K.lng-x);return new Je(he,Se)}},Ke=h({},Ee,{wrapLng:[-180,180],R:6371e3,distance:function(t,o){var c=Math.PI/180,m=t.lat*c,x=o.lat*c,B=Math.sin((o.lat-t.lat)*c/2),K=Math.sin((o.lng-t.lng)*c/2),he=B*B+Math.cos(m)*Math.cos(x)*K*K,Se=2*Math.atan2(Math.sqrt(he),Math.sqrt(1-he));return this.R*Se}}),qe=6378137,Ye={R:qe,MAX_LATITUDE:85.0511287798,project:function(t){var o=Math.PI/180,c=this.MAX_LATITUDE,m=Math.max(Math.min(c,t.lat),-c),x=Math.sin(m*o);return new q(this.R*t.lng*o,this.R*Math.log((1+x)/(1-x))/2)},unproject:function(t){var o=180/Math.PI;return new nt((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*o,t.x*o/this.R)},bounds:function(){var t=qe*Math.PI;return new xe([-t,-t],[t,t])}()};function tt(t,o,c,m){if(re(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=o,this._c=c,this._d=m}tt.prototype={transform:function(t,o){return this._transform(t.clone(),o)},_transform:function(t,o){return o=o||1,t.x=o*(this._a*t.x+this._b),t.y=o*(this._c*t.y+this._d),t},untransform:function(t,o){return o=o||1,new q((t.x/o-this._b)/this._a,(t.y/o-this._d)/this._c)}};function $(t,o,c,m){return new tt(t,o,c,m)}var Z=h({},Ke,{code:"EPSG:3857",projection:Ye,transformation:function(){var t=.5/(Math.PI*Ye.R);return $(t,.5,-t,.5)}()}),le=h({},Z,{code:"EPSG:900913"});function ze(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function je(t,o){var c="",m,x,B,K,he,Se;for(m=0,B=t.length;m<B;m++){for(he=t[m],x=0,K=he.length;x<K;x++)Se=he[x],c+=(x?"L":"M")+Se.x+" "+Se.y;c+=o?ht.svg?"z":"x":""}return c||"M0 0"}var ue=document.documentElement.style,G="ActiveXObject"in window,Oe=G&&!document.addEventListener,Ne="msLaunchUri"in navigator&&!("documentMode"in document),Fe=Wi("webkit"),Pe=Wi("android"),We=Wi("android 2")||Wi("android 3"),at=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ft=Pe&&Wi("Google")&&at<537&&!("AudioNode"in window),yt=!!window.opera,Tt=!Ne&&Wi("chrome"),Pt=Wi("gecko")&&!Fe&&!yt&&!G,ri=!Tt&&Wi("safari"),$t=Wi("phantom"),Ti="OTransition"in ue,ui=navigator.platform.indexOf("Win")===0,Cn=G&&"transition"in ue,zn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!We,Qt="MozPerspective"in ue,Di=!window.L_DISABLE_3D&&(Cn||zn||Qt)&&!Ti&&!$t,nn=typeof orientation<"u"||Wi("mobile"),Vl=nn&&Fe,Hl=nn&&zn,Ks=!window.PointerEvent&&window.MSPointerEvent,sa=!!(window.PointerEvent||Ks),oa="ontouchstart"in window||!!window.TouchEvent,Zl=!window.L_NO_TOUCH&&(oa||sa),ql=nn&&yt,aa=nn&&Pt,la=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Kl=function(){var t=!1;try{var o=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",M,o),window.removeEventListener("testPassiveEventSupport",M,o)}catch{}return t}(),Wl=function(){return!!document.createElement("canvas").getContext}(),Ws=!!(document.createElementNS&&ze("svg").createSVGRect),ua=!!Ws&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Jl=!Ws&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var o=t.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}}(),Xl=navigator.platform.indexOf("Mac")===0,Yl=navigator.platform.indexOf("Linux")===0;function Wi(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var ht={ie:G,ielt9:Oe,edge:Ne,webkit:Fe,android:Pe,android23:We,androidStock:ft,opera:yt,chrome:Tt,gecko:Pt,safari:ri,phantom:$t,opera12:Ti,win:ui,ie3d:Cn,webkit3d:zn,gecko3d:Qt,any3d:Di,mobile:nn,mobileWebkit:Vl,mobileWebkit3d:Hl,msPointer:Ks,pointer:sa,touch:Zl,touchNative:oa,mobileOpera:ql,mobileGecko:aa,retina:la,passiveEvents:Kl,canvas:Wl,svg:Ws,vml:Jl,inlineSvg:ua,mac:Xl,linux:Yl},ca=ht.msPointer?"MSPointerDown":"pointerdown",ha=ht.msPointer?"MSPointerMove":"pointermove",Js=ht.msPointer?"MSPointerUp":"pointerup",da=ht.msPointer?"MSPointerCancel":"pointercancel",Xs={touchstart:ca,touchmove:ha,touchend:Js,touchcancel:da},fa={touchstart:nu,touchmove:ns,touchend:ns,touchcancel:ns},ar={},pa=!1;function Ql(t,o,c){return o==="touchstart"&&Ys(),fa[o]?(c=fa[o].bind(this,c),t.addEventListener(Xs[o],c,!1),c):(console.warn("wrong event specified:",o),M)}function eu(t,o,c){if(!Xs[o]){console.warn("wrong event specified:",o);return}t.removeEventListener(Xs[o],c,!1)}function tu(t){ar[t.pointerId]=t}function iu(t){ar[t.pointerId]&&(ar[t.pointerId]=t)}function is(t){delete ar[t.pointerId]}function Ys(){pa||(document.addEventListener(ca,tu,!0),document.addEventListener(ha,iu,!0),document.addEventListener(Js,is,!0),document.addEventListener(da,is,!0),pa=!0)}function ns(t,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var c in ar)o.touches.push(ar[c]);o.changedTouches=[o],t(o)}}function nu(t,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&ci(o),ns(t,o)}function ru(t){var o={},c,m;for(m in t)c=t[m],o[m]=c&&c.bind?c.bind(t):c;return t=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var su=200;function ou(t,o){t.addEventListener("dblclick",o);var c=0,m;function x(B){if(B.detail!==1){m=B.detail;return}if(!(B.pointerType==="mouse"||B.sourceCapabilities&&!B.sourceCapabilities.firesTouchEvents)){var K=va(B);if(!(K.some(function(Se){return Se instanceof HTMLLabelElement&&Se.attributes.for})&&!K.some(function(Se){return Se instanceof HTMLInputElement||Se instanceof HTMLSelectElement}))){var he=Date.now();he-c<=su?(m++,m===2&&o(ru(B))):m=1,c=he}}}return t.addEventListener("click",x),{dblclick:o,simDblclick:x}}function au(t,o){t.removeEventListener("dblclick",o.dblclick),t.removeEventListener("click",o.simDblclick)}var Qs=ss(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Pr=ss(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ma=Pr==="webkitTransition"||Pr==="OTransition"?Pr+"End":"transitionend";function ga(t){return typeof t=="string"?document.getElementById(t):t}function kn(t,o){var c=t.style[o]||t.currentStyle&&t.currentStyle[o];if((!c||c==="auto")&&document.defaultView){var m=document.defaultView.getComputedStyle(t,null);c=m?m[o]:null}return c==="auto"?null:c}function Dt(t,o,c){var m=document.createElement(t);return m.className=o||"",c&&c.appendChild(m),m}function Ht(t){var o=t.parentNode;o&&o.removeChild(t)}function Sr(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function lr(t){var o=t.parentNode;o&&o.lastChild!==t&&o.appendChild(t)}function $n(t){var o=t.parentNode;o&&o.firstChild!==t&&o.insertBefore(t,o.firstChild)}function eo(t,o){if(t.classList!==void 0)return t.classList.contains(o);var c=rs(t);return c.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(c)}function xt(t,o){if(t.classList!==void 0)for(var c=D(o),m=0,x=c.length;m<x;m++)t.classList.add(c[m]);else if(!eo(t,o)){var B=rs(t);to(t,(B?B+" ":"")+o)}}function Jt(t,o){t.classList!==void 0?t.classList.remove(o):to(t,W((" "+rs(t)+" ").replace(" "+o+" "," ")))}function to(t,o){t.className.baseVal===void 0?t.className=o:t.className.baseVal=o}function rs(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function Ui(t,o){"opacity"in t.style?t.style.opacity=o:"filter"in t.style&&lu(t,o)}function lu(t,o){var c=!1,m="DXImageTransform.Microsoft.Alpha";try{c=t.filters.item(m)}catch{if(o===1)return}o=Math.round(o*100),c?(c.Enabled=o!==100,c.Opacity=o):t.style.filter+=" progid:"+m+"(opacity="+o+")"}function ss(t){for(var o=document.documentElement.style,c=0;c<t.length;c++)if(t[c]in o)return t[c];return!1}function jn(t,o,c){var m=o||new q(0,0);t.style[Qs]=(ht.ie3d?"translate("+m.x+"px,"+m.y+"px)":"translate3d("+m.x+"px,"+m.y+"px,0)")+(c?" scale("+c+")":"")}function ei(t,o){t._leaflet_pos=o,ht.any3d?jn(t,o):(t.style.left=o.x+"px",t.style.top=o.y+"px")}function Un(t){return t._leaflet_pos||new q(0,0)}var Br,Ar,io;if("onselectstart"in document)Br=function(){bt(window,"selectstart",ci)},Ar=function(){jt(window,"selectstart",ci)};else{var ur=ss(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Br=function(){if(ur){var t=document.documentElement.style;io=t[ur],t[ur]="none"}},Ar=function(){ur&&(document.documentElement.style[ur]=io,io=void 0)}}function no(){bt(window,"dragstart",ci)}function ro(){jt(window,"dragstart",ci)}var os,so;function oo(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(as(),os=t,so=t.style.outlineStyle,t.style.outlineStyle="none",bt(window,"keydown",as))}function as(){os&&(os.style.outlineStyle=so,os=void 0,so=void 0,jt(window,"keydown",as))}function _a(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function ao(t){var o=t.getBoundingClientRect();return{x:o.width/t.offsetWidth||1,y:o.height/t.offsetHeight||1,boundingClientRect:o}}var uu={__proto__:null,TRANSFORM:Qs,TRANSITION:Pr,TRANSITION_END:ma,get:ga,getStyle:kn,create:Dt,remove:Ht,empty:Sr,toFront:lr,toBack:$n,hasClass:eo,addClass:xt,removeClass:Jt,setClass:to,getClass:rs,setOpacity:Ui,testProp:ss,setTransform:jn,setPosition:ei,getPosition:Un,get disableTextSelection(){return Br},get enableTextSelection(){return Ar},disableImageDrag:no,enableImageDrag:ro,preventOutline:oo,restoreOutline:as,getSizedParentNode:_a,getScale:ao};function bt(t,o,c,m){if(o&&typeof o=="object")for(var x in o)uo(t,x,o[x],c);else{o=D(o);for(var B=0,K=o.length;B<K;B++)uo(t,o[B],c,m)}return this}var rn="_leaflet_events";function jt(t,o,c,m){if(arguments.length===1)ya(t),delete t[rn];else if(o&&typeof o=="object")for(var x in o)En(t,x,o[x],c);else if(o=D(o),arguments.length===2)ya(t,function(he){return Ae(o,he)!==-1});else for(var B=0,K=o.length;B<K;B++)En(t,o[B],c,m);return this}function ya(t,o){for(var c in t[rn]){var m=c.split(/\d/)[0];(!o||o(m))&&En(t,m,null,null,c)}}var lo={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function uo(t,o,c,m){var x=o+v(c)+(m?"_"+v(m):"");if(t[rn]&&t[rn][x])return this;var B=function(he){return c.call(m||t,he||window.event)},K=B;!ht.touchNative&&ht.pointer&&o.indexOf("touch")===0?B=Ql(t,o,B):ht.touch&&o==="dblclick"?B=ou(t,B):"addEventListener"in t?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?t.addEventListener(lo[o]||o,B,ht.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(B=function(he){he=he||window.event,ho(t,he)&&K(he)},t.addEventListener(lo[o],B,!1)):t.addEventListener(o,K,!1):t.attachEvent("on"+o,B),t[rn]=t[rn]||{},t[rn][x]=B}function En(t,o,c,m,x){x=x||o+v(c)+(m?"_"+v(m):"");var B=t[rn]&&t[rn][x];if(!B)return this;!ht.touchNative&&ht.pointer&&o.indexOf("touch")===0?eu(t,o,B):ht.touch&&o==="dblclick"?au(t,B):"removeEventListener"in t?t.removeEventListener(lo[o]||o,B,!1):t.detachEvent("on"+o,B),t[rn][x]=null}function Gn(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function co(t){return uo(t,"wheel",Gn),this}function Tr(t){return bt(t,"mousedown touchstart dblclick contextmenu",Gn),t._leaflet_disable_click=!0,this}function ci(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Vn(t){return ci(t),Gn(t),this}function va(t){if(t.composedPath)return t.composedPath();for(var o=[],c=t.target;c;)o.push(c),c=c.parentNode;return o}function ba(t,o){if(!o)return new q(t.clientX,t.clientY);var c=ao(o),m=c.boundingClientRect;return new q((t.clientX-m.left)/c.x-o.clientLeft,(t.clientY-m.top)/c.y-o.clientTop)}var cu=ht.linux&&ht.chrome?window.devicePixelRatio:ht.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function xa(t){return ht.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/cu:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function ho(t,o){var c=o.relatedTarget;if(!c)return!0;try{for(;c&&c!==t;)c=c.parentNode}catch{return!1}return c!==t}var ls={__proto__:null,on:bt,off:jt,stopPropagation:Gn,disableScrollPropagation:co,disableClickPropagation:Tr,preventDefault:ci,stop:Vn,getPropagationPath:va,getMousePosition:ba,getWheelDelta:xa,isExternalTarget:ho,addListener:bt,removeListener:jt},wa=Me.extend({run:function(t,o,c,m){this.stop(),this._el=t,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(m||.5,.2),this._startPos=Un(t),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ee(this._animate,this),this._step()},_step:function(t){var o=+new Date-this._startTime,c=this._duration*1e3;o<c?this._runFrame(this._easeOut(o/c),t):(this._runFrame(1),this._complete())},_runFrame:function(t,o){var c=this._startPos.add(this._offset.multiplyBy(t));o&&c._round(),ei(this._el,c),this.fire("step")},_complete:function(){Re(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Bt=Me.extend({options:{crs:Z,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,o){o=V(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(Xe(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Pr&&ht.any3d&&!ht.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),bt(this._proxy,ma,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,o,c){if(o=o===void 0?this._zoom:this._limitZoom(o),t=this._limitCenter(Xe(t),o,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=h({animate:c.animate},c.zoom),c.pan=h({animate:c.animate,duration:c.duration},c.pan));var m=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,o,c.zoom):this._tryAnimatedPan(t,c.pan);if(m)return clearTimeout(this._sizeTimer),this}return this._resetView(t,o,c.pan&&c.pan.noMoveStart),this},setZoom:function(t,o){return this._loaded?this.setView(this.getCenter(),t,{zoom:o}):(this._zoom=t,this)},zoomIn:function(t,o){return t=t||(ht.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,o)},zoomOut:function(t,o){return t=t||(ht.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,o)},setZoomAround:function(t,o,c){var m=this.getZoomScale(o),x=this.getSize().divideBy(2),B=t instanceof q?t:this.latLngToContainerPoint(t),K=B.subtract(x).multiplyBy(1-1/m),he=this.containerPointToLatLng(x.add(K));return this.setView(he,o,{zoom:c})},_getBoundsCenterZoom:function(t,o){o=o||{},t=t.getBounds?t.getBounds():et(t);var c=se(o.paddingTopLeft||o.padding||[0,0]),m=se(o.paddingBottomRight||o.padding||[0,0]),x=this.getBoundsZoom(t,!1,c.add(m));if(x=typeof o.maxZoom=="number"?Math.min(o.maxZoom,x):x,x===1/0)return{center:t.getCenter(),zoom:x};var B=m.subtract(c).divideBy(2),K=this.project(t.getSouthWest(),x),he=this.project(t.getNorthEast(),x),Se=this.unproject(K.add(he).divideBy(2).add(B),x);return{center:Se,zoom:x}},fitBounds:function(t,o){if(t=et(t),!t.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(t,o);return this.setView(c.center,c.zoom,o)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,o){return this.setView(t,this._zoom,{pan:o})},panBy:function(t,o){if(t=se(t).round(),o=o||{},!t.x&&!t.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new wa,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){xt(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,c,o.duration||.25,o.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,o,c){if(c=c||{},c.animate===!1||!ht.any3d)return this.setView(t,o,c);this._stop();var m=this.project(this.getCenter()),x=this.project(t),B=this.getSize(),K=this._zoom;t=Xe(t),o=o===void 0?K:o;var he=Math.max(B.x,B.y),Se=he*this.getZoomScale(K,o),Ve=x.distanceTo(m)||1,it=1.42,pt=it*it;function Mt(Xt){var jr=Xt?-1:1,Tu=Xt?Se:he,cn=Se*Se-he*he+jr*pt*pt*Ve*Ve,Du=2*Tu*pt*Ve,gr=cn/Du,ko=Math.sqrt(gr*gr+1)-gr,Ru=ko<1e-9?-18:Math.log(ko);return Ru}function yi(Xt){return(Math.exp(Xt)-Math.exp(-Xt))/2}function ai(Xt){return(Math.exp(Xt)+Math.exp(-Xt))/2}function Li(Xt){return yi(Xt)/ai(Xt)}var Kt=Mt(0);function un(Xt){return he*(ai(Kt)/ai(Kt+it*Xt))}function Co(Xt){return he*(ai(Kt)*Li(Kt+it*Xt)-yi(Kt))/pt}function Ps(Xt){return 1-Math.pow(1-Xt,1.5)}var Fa=Date.now(),$r=(Mt(1)-Kt)/it,Au=c.duration?1e3*c.duration:1e3*$r*.8;function Na(){var Xt=(Date.now()-Fa)/Au,jr=Ps(Xt)*$r;Xt<=1?(this._flyToFrame=ee(Na,this),this._move(this.unproject(m.add(x.subtract(m).multiplyBy(Co(jr)/Ve)),K),this.getScaleZoom(he/un(jr),K),{flyTo:!0})):this._move(t,o)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),Na.call(this),this},flyToBounds:function(t,o){var c=this._getBoundsCenterZoom(t,o);return this.flyTo(c.center,c.zoom,o)},setMaxBounds:function(t){return t=et(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var o=this.options.minZoom;return this.options.minZoom=t,this._loaded&&o!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var o=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&o!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,o){this._enforcingBounds=!0;var c=this.getCenter(),m=this._limitCenter(c,this._zoom,et(t));return c.equals(m)||this.panTo(m,o),this._enforcingBounds=!1,this},panInside:function(t,o){o=o||{};var c=se(o.paddingTopLeft||o.padding||[0,0]),m=se(o.paddingBottomRight||o.padding||[0,0]),x=this.project(this.getCenter()),B=this.project(t),K=this.getPixelBounds(),he=ve([K.min.add(c),K.max.subtract(m)]),Se=he.getSize();if(!he.contains(B)){this._enforcingBounds=!0;var Ve=B.subtract(he.getCenter()),it=he.extend(B).getSize().subtract(Se);x.x+=Ve.x<0?-it.x:it.x,x.y+=Ve.y<0?-it.y:it.y,this.panTo(this.unproject(x),o),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=h({animate:!1,pan:!0},t===!0?{animate:!0}:t);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),m=o.divideBy(2).round(),x=c.divideBy(2).round(),B=m.subtract(x);return!B.x&&!B.y?this:(t.animate&&t.pan?this.panBy(B):(t.pan&&this._rawPanBy(B),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=h({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=f(this._handleGeolocationResponse,this),c=f(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,c,t):navigator.geolocation.getCurrentPosition(o,c,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var o=t.code,c=t.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var o=t.coords.latitude,c=t.coords.longitude,m=new nt(o,c),x=m.toBounds(t.coords.accuracy*2),B=this._locateOptions;if(B.setView){var K=this.getBoundsZoom(x);this.setView(m,B.maxZoom?Math.min(K,B.maxZoom):K)}var he={latlng:m,bounds:x,timestamp:t.timestamp};for(var Se in t.coords)typeof t.coords[Se]=="number"&&(he[Se]=t.coords[Se]);this.fire("locationfound",he)}},addHandler:function(t,o){if(!o)return this;var c=this[t]=new o(this);return this._handlers.push(c),this.options[t]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ht(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Re(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)Ht(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,o){var c="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),m=Dt("div",c,o||this._mapPane);return t&&(this._panes[t]=m),m},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),o=this.unproject(t.getBottomLeft()),c=this.unproject(t.getTopRight());return new Je(o,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,o,c){t=et(t),c=se(c||[0,0]);var m=this.getZoom()||0,x=this.getMinZoom(),B=this.getMaxZoom(),K=t.getNorthWest(),he=t.getSouthEast(),Se=this.getSize().subtract(c),Ve=ve(this.project(he,m),this.project(K,m)).getSize(),it=ht.any3d?this.options.zoomSnap:1,pt=Se.x/Ve.x,Mt=Se.y/Ve.y,yi=o?Math.max(pt,Mt):Math.min(pt,Mt);return m=this.getScaleZoom(yi,m),it&&(m=Math.round(m/(it/100))*(it/100),m=o?Math.ceil(m/it)*it:Math.floor(m/it)*it),Math.max(x,Math.min(B,m))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new q(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,o){var c=this._getTopLeftPoint(t,o);return new xe(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,o){var c=this.options.crs;return o=o===void 0?this._zoom:o,c.scale(t)/c.scale(o)},getScaleZoom:function(t,o){var c=this.options.crs;o=o===void 0?this._zoom:o;var m=c.zoom(t*c.scale(o));return isNaN(m)?1/0:m},project:function(t,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(Xe(t),o)},unproject:function(t,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(se(t),o)},layerPointToLatLng:function(t){var o=se(t).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(t){var o=this.project(Xe(t))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(Xe(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(et(t))},distance:function(t,o){return this.options.crs.distance(Xe(t),Xe(o))},containerPointToLayerPoint:function(t){return se(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return se(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var o=this.containerPointToLayerPoint(se(t));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Xe(t)))},mouseEventToContainerPoint:function(t){return ba(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var o=this._container=ga(t);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");bt(o,"scroll",this._onScroll,this),this._containerId=v(o)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&ht.any3d,xt(t,"leaflet-container"+(ht.touch?" leaflet-touch":"")+(ht.retina?" leaflet-retina":"")+(ht.ielt9?" leaflet-oldie":"")+(ht.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=kn(t,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ei(this._mapPane,new q(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(xt(t.markerPane,"leaflet-zoom-hide"),xt(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,o,c){ei(this._mapPane,new q(0,0));var m=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var x=this._zoom!==o;this._moveStart(x,c)._move(t,o)._moveEnd(x),this.fire("viewreset"),m&&this.fire("load")},_moveStart:function(t,o){return t&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(t,o,c,m){o===void 0&&(o=this._zoom);var x=this._zoom!==o;return this._zoom=o,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),m?c&&c.pinch&&this.fire("zoom",c):((x||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Re(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){ei(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[v(this._container)]=this;var o=t?jt:bt;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),ht.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Re(this._resizeRequest),this._resizeRequest=ee(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,o){for(var c=[],m,x=o==="mouseout"||o==="mouseover",B=t.target||t.srcElement,K=!1;B;){if(m=this._targets[v(B)],m&&(o==="click"||o==="preclick")&&this._draggableMoved(m)){K=!0;break}if(m&&m.listens(o,!0)&&(x&&!ho(B,t)||(c.push(m),x))||B===this._container)break;B=B.parentNode}return!c.length&&!K&&!x&&this.listens(o,!0)&&(c=[this]),c},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var o=t.target||t.srcElement;if(!(!this._loaded||o._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(o))){var c=t.type;c==="mousedown"&&oo(o),this._fireDOMEvent(t,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,o,c){if(t.type==="click"){var m=h({},t);m.type="preclick",this._fireDOMEvent(m,m.type,c)}var x=this._findEventTargets(t,o);if(c){for(var B=[],K=0;K<c.length;K++)c[K].listens(o,!0)&&B.push(c[K]);x=B.concat(x)}if(x.length){o==="contextmenu"&&ci(t);var he=x[0],Se={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var Ve=he.getLatLng&&(!he._radius||he._radius<=10);Se.containerPoint=Ve?this.latLngToContainerPoint(he.getLatLng()):this.mouseEventToContainerPoint(t),Se.layerPoint=this.containerPointToLayerPoint(Se.containerPoint),Se.latlng=Ve?he.getLatLng():this.layerPointToLatLng(Se.layerPoint)}for(K=0;K<x.length;K++)if(x[K].fire(o,Se,!0),Se.originalEvent._stopped||x[K].options.bubblingMouseEvents===!1&&Ae(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,o=this._handlers.length;t<o;t++)this._handlers[t].disable()},whenReady:function(t,o){return this._loaded?t.call(o||this,{target:this}):this.on("load",t,o),this},_getMapPanePos:function(){return Un(this._mapPane)||new q(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,o){var c=t&&o!==void 0?this._getNewPixelOrigin(t,o):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,o){var c=this.getSize()._divideBy(2);return this.project(t,o)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,o,c){var m=this._getNewPixelOrigin(c,o);return this.project(t,o)._subtract(m)},_latLngBoundsToNewLayerBounds:function(t,o,c){var m=this._getNewPixelOrigin(c,o);return ve([this.project(t.getSouthWest(),o)._subtract(m),this.project(t.getNorthWest(),o)._subtract(m),this.project(t.getSouthEast(),o)._subtract(m),this.project(t.getNorthEast(),o)._subtract(m)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,o,c){if(!c)return t;var m=this.project(t,o),x=this.getSize().divideBy(2),B=new xe(m.subtract(x),m.add(x)),K=this._getBoundsOffset(B,c,o);return Math.abs(K.x)<=1&&Math.abs(K.y)<=1?t:this.unproject(m.add(K),o)},_limitOffset:function(t,o){if(!o)return t;var c=this.getPixelBounds(),m=new xe(c.min.add(t),c.max.add(t));return t.add(this._getBoundsOffset(m,o))},_getBoundsOffset:function(t,o,c){var m=ve(this.project(o.getNorthEast(),c),this.project(o.getSouthWest(),c)),x=m.min.subtract(t.min),B=m.max.subtract(t.max),K=this._rebound(x.x,-B.x),he=this._rebound(x.y,-B.y);return new q(K,he)},_rebound:function(t,o){return t+o>0?Math.round(t-o)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(o))},_limitZoom:function(t){var o=this.getMinZoom(),c=this.getMaxZoom(),m=ht.any3d?this.options.zoomSnap:1;return m&&(t=Math.round(t/m)*m),Math.max(o,Math.min(c,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Jt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,o){var c=this._getCenterOffset(t)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,o),!0)},_createAnimProxy:function(){var t=this._proxy=Dt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(o){var c=Qs,m=this._proxy.style[c];jn(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),m===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ht(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),o=this.getZoom();jn(this._proxy,this.project(t,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,o,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var m=this.getZoomScale(o),x=this._getCenterOffset(t)._divideBy(1-1/m);return c.animate!==!0&&!this.getSize().contains(x)?!1:(ee(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(t,o,!0)},this),!0)},_animateZoom:function(t,o,c,m){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=o,xt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:o,noUpdate:m}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Jt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function La(t,o){return new Bt(t,o)}var vt=ie.extend({options:{position:"topright"},initialize:function(t){V(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var o=this._map;return o&&o.removeControl(this),this.options.position=t,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var o=this._container=this.onAdd(t),c=this.getPosition(),m=t._controlCorners[c];return xt(o,"leaflet-control"),c.indexOf("bottom")!==-1?m.insertBefore(o,m.firstChild):m.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ht(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Hn=function(t){return new vt(t)};Bt.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},o="leaflet-",c=this._controlContainer=Dt("div",o+"control-container",this._container);function m(x,B){var K=o+x+" "+o+B;t[x+B]=Dt("div",K,c)}m("top","left"),m("top","right"),m("bottom","left"),m("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Ht(this._controlCorners[t]);Ht(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Dr=vt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,o,c,m){return c<m?-1:m<c?1:0}},initialize:function(t,o,c){V(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var m in t)this._addLayer(t[m],m);for(m in o)this._addLayer(o[m],m,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return vt.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,o){return this._addLayer(t,o),this._map?this._update():this},addOverlay:function(t,o){return this._addLayer(t,o,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var o=this._getLayer(v(t));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){xt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(xt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):Jt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Jt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",o=this._container=Dt("div",t),c=this.options.collapsed;o.setAttribute("aria-haspopup",!0),Tr(o),co(o);var m=this._section=Dt("section",t+"-list");c&&(this._map.on("click",this.collapse,this),bt(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var x=this._layersLink=Dt("a",t+"-toggle",o);x.href="#",x.title="Layers",x.setAttribute("role","button"),bt(x,{keydown:function(B){B.keyCode===13&&this._expandSafely()},click:function(B){ci(B),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Dt("div",t+"-base",m),this._separator=Dt("div",t+"-separator",m),this._overlaysList=Dt("div",t+"-overlays",m),o.appendChild(m)},_getLayer:function(t){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&v(this._layers[o].layer)===t)return this._layers[o]},_addLayer:function(t,o,c){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:o,overlay:c}),this.options.sortLayers&&this._layers.sort(f(function(m,x){return this.options.sortFunction(m.layer,x.layer,m.name,x.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Sr(this._baseLayersList),Sr(this._overlaysList),this._layerControlInputs=[];var t,o,c,m,x=0;for(c=0;c<this._layers.length;c++)m=this._layers[c],this._addItem(m),o=o||m.overlay,t=t||!m.overlay,x+=m.overlay?0:1;return this.options.hideSingleBase&&(t=t&&x>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=o&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var o=this._getLayer(v(t.target)),c=o.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;c&&this._map.fire(c,o)},_createRadioElement:function(t,o){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(o?' checked="checked"':"")+"/>",m=document.createElement("div");return m.innerHTML=c,m.firstChild},_addItem:function(t){var o=document.createElement("label"),c=this._map.hasLayer(t.layer),m;t.overlay?(m=document.createElement("input"),m.type="checkbox",m.className="leaflet-control-layers-selector",m.defaultChecked=c):m=this._createRadioElement("leaflet-base-layers_"+v(this),c),this._layerControlInputs.push(m),m.layerId=v(t.layer),bt(m,"click",this._onInputClick,this);var x=document.createElement("span");x.innerHTML=" "+t.name;var B=document.createElement("span");o.appendChild(B),B.appendChild(m),B.appendChild(x);var K=t.overlay?this._overlaysList:this._baseLayersList;return K.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,o,c,m=[],x=[];this._handlingClick=!0;for(var B=t.length-1;B>=0;B--)o=t[B],c=this._getLayer(o.layerId).layer,o.checked?m.push(c):o.checked||x.push(c);for(B=0;B<x.length;B++)this._map.hasLayer(x[B])&&this._map.removeLayer(x[B]);for(B=0;B<m.length;B++)this._map.hasLayer(m[B])||this._map.addLayer(m[B]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,o,c,m=this._map.getZoom(),x=t.length-1;x>=0;x--)o=t[x],c=this._getLayer(o.layerId).layer,o.disabled=c.options.minZoom!==void 0&&m<c.options.minZoom||c.options.maxZoom!==void 0&&m>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,bt(t,"click",ci),this.expand();var o=this;setTimeout(function(){jt(t,"click",ci),o._preventClick=!1})}}),hu=function(t,o,c){return new Dr(t,o,c)},us=vt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var o="leaflet-control-zoom",c=Dt("div",o+" leaflet-bar"),m=this.options;return this._zoomInButton=this._createButton(m.zoomInText,m.zoomInTitle,o+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(m.zoomOutText,m.zoomOutTitle,o+"-out",c,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,o,c,m,x){var B=Dt("a",c,m);return B.innerHTML=t,B.href="#",B.title=o,B.setAttribute("role","button"),B.setAttribute("aria-label",o),Tr(B),bt(B,"click",Vn),bt(B,"click",x,this),bt(B,"click",this._refocusOnMap,this),B},_updateDisabled:function(){var t=this._map,o="leaflet-disabled";Jt(this._zoomInButton,o),Jt(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(xt(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(xt(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});Bt.mergeOptions({zoomControl:!0}),Bt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new us,this.addControl(this.zoomControl))});var du=function(t){return new us(t)},cs=vt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var o="leaflet-control-scale",c=Dt("div",o),m=this.options;return this._addScales(m,o+"-line",c),t.on(m.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),c},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,o,c){t.metric&&(this._mScale=Dt("div",o,c)),t.imperial&&(this._iScale=Dt("div",o,c))},_update:function(){var t=this._map,o=t.getSize().y/2,c=t.distance(t.containerPointToLatLng([0,o]),t.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(c)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var o=this._getRoundNum(t),c=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,c,o/t)},_updateImperial:function(t){var o=t*3.2808399,c,m,x;o>5280?(c=o/5280,m=this._getRoundNum(c),this._updateScale(this._iScale,m+" mi",m/c)):(x=this._getRoundNum(o),this._updateScale(this._iScale,x+" ft",x/o))},_updateScale:function(t,o,c){t.style.width=Math.round(this.options.maxWidth*c)+"px",t.innerHTML=o},_getRoundNum:function(t){var o=Math.pow(10,(Math.floor(t)+"").length-1),c=t/o;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,o*c}}),hs=function(t){return new cs(t)},fu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',sn=vt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ht.inlineSvg?fu+" ":"")+"Leaflet</a>"},initialize:function(t){V(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=Dt("div","leaflet-control-attribution"),Tr(this._container);for(var o in t._layers)t._layers[o].getAttribution&&this.addAttribution(t._layers[o].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var o in this._attributions)this._attributions[o]&&t.push(o);var c=[];this.options.prefix&&c.push(this.options.prefix),t.length&&c.push(t.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Bt.mergeOptions({attributionControl:!0}),Bt.addInitHook(function(){this.options.attributionControl&&new sn().addTo(this)});var Ca=function(t){return new sn(t)};vt.Layers=Dr,vt.Zoom=us,vt.Scale=cs,vt.Attribution=sn,Hn.layers=hu,Hn.zoom=du,Hn.scale=hs,Hn.attribution=Ca;var mi=ie.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});mi.addTo=function(t,o){return t.addHandler(o,this),this};var pu={Events:Ie},ka=ht.touch?"touchstart mousedown":"mousedown",Mn=Me.extend({options:{clickTolerance:3},initialize:function(t,o,c,m){V(this,m),this._element=t,this._dragStartTarget=o||t,this._preventOutline=c},enable:function(){this._enabled||(bt(this._dragStartTarget,ka,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Mn._dragging===this&&this.finishDrag(!0),jt(this._dragStartTarget,ka,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!eo(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){Mn._dragging===this&&this.finishDrag();return}if(!(Mn._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(Mn._dragging=this,this._preventOutline&&oo(this._element),no(),Br(),!this._moving)){this.fire("down");var o=t.touches?t.touches[0]:t,c=_a(this._element);this._startPoint=new q(o.clientX,o.clientY),this._startPos=Un(this._element),this._parentScale=ao(c);var m=t.type==="mousedown";bt(document,m?"mousemove":"touchmove",this._onMove,this),bt(document,m?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var o=t.touches&&t.touches.length===1?t.touches[0]:t,c=new q(o.clientX,o.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,ci(t),this._moved||(this.fire("dragstart"),this._moved=!0,xt(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),xt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),ei(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){Jt(document.body,"leaflet-dragging"),this._lastTarget&&(Jt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),jt(document,"mousemove touchmove",this._onMove,this),jt(document,"mouseup touchend touchcancel",this._onUp,this),ro(),Ar();var o=this._moved&&this._moving;this._moving=!1,Mn._dragging=!1,o&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function Ea(t,o,c){var m,x=[1,4,2,8],B,K,he,Se,Ve,it,pt,Mt;for(B=0,it=t.length;B<it;B++)t[B]._code=bi(t[B],o);for(he=0;he<4;he++){for(pt=x[he],m=[],B=0,it=t.length,K=it-1;B<it;K=B++)Se=t[B],Ve=t[K],Se._code&pt?Ve._code&pt||(Mt=Pn(Ve,Se,pt,o,c),Mt._code=bi(Mt,o),m.push(Mt)):(Ve._code&pt&&(Mt=Pn(Ve,Se,pt,o,c),Mt._code=bi(Mt,o),m.push(Mt)),m.push(Se));t=m}return t}function Ma(t,o){var c,m,x,B,K,he,Se,Ve,it;if(!t||t.length===0)throw new Error("latlngs not passed");xi(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var pt=Xe([0,0]),Mt=et(t),yi=Mt.getNorthWest().distanceTo(Mt.getSouthWest())*Mt.getNorthEast().distanceTo(Mt.getNorthWest());yi<1700&&(pt=fo(t));var ai=t.length,Li=[];for(c=0;c<ai;c++){var Kt=Xe(t[c]);Li.push(o.project(Xe([Kt.lat-pt.lat,Kt.lng-pt.lng])))}for(he=Se=Ve=0,c=0,m=ai-1;c<ai;m=c++)x=Li[c],B=Li[m],K=x.y*B.x-B.y*x.x,Se+=(x.x+B.x)*K,Ve+=(x.y+B.y)*K,he+=K*3;he===0?it=Li[0]:it=[Se/he,Ve/he];var un=o.unproject(se(it));return Xe([un.lat+pt.lat,un.lng+pt.lng])}function fo(t){for(var o=0,c=0,m=0,x=0;x<t.length;x++){var B=Xe(t[x]);o+=B.lat,c+=B.lng,m++}return Xe([o/m,c/m])}var mu={__proto__:null,clipPolygon:Ea,polygonCenter:Ma,centroid:fo};function Pa(t,o){if(!o||!t.length)return t.slice();var c=o*o;return t=Sa(t,c),t=hi(t,c),t}function po(t,o,c){return Math.sqrt(Rr(t,o,c,!0))}function gu(t,o,c){return Rr(t,o,c)}function hi(t,o){var c=t.length,m=typeof Uint8Array<"u"?Uint8Array:Array,x=new m(c);x[0]=x[c-1]=1,di(t,x,o,0,c-1);var B,K=[];for(B=0;B<c;B++)x[B]&&K.push(t[B]);return K}function di(t,o,c,m,x){var B=0,K,he,Se;for(he=m+1;he<=x-1;he++)Se=Rr(t[he],t[m],t[x],!0),Se>B&&(K=he,B=Se);B>c&&(o[K]=1,di(t,o,c,m,K),di(t,o,c,K,x))}function Sa(t,o){for(var c=[t[0]],m=1,x=0,B=t.length;m<B;m++)_u(t[m],t[x])>o&&(c.push(t[m]),x=m);return x<B-1&&c.push(t[B-1]),c}var Zn;function qn(t,o,c,m,x){var B=m?Zn:bi(t,c),K=bi(o,c),he,Se,Ve;for(Zn=K;;){if(!(B|K))return[t,o];if(B&K)return!1;he=B||K,Se=Pn(t,o,he,c,x),Ve=bi(Se,c),he===B?(t=Se,B=Ve):(o=Se,K=Ve)}}function Pn(t,o,c,m,x){var B=o.x-t.x,K=o.y-t.y,he=m.min,Se=m.max,Ve,it;return c&8?(Ve=t.x+B*(Se.y-t.y)/K,it=Se.y):c&4?(Ve=t.x+B*(he.y-t.y)/K,it=he.y):c&2?(Ve=Se.x,it=t.y+K*(Se.x-t.x)/B):c&1&&(Ve=he.x,it=t.y+K*(he.x-t.x)/B),new q(Ve,it,x)}function bi(t,o){var c=0;return t.x<o.min.x?c|=1:t.x>o.max.x&&(c|=2),t.y<o.min.y?c|=4:t.y>o.max.y&&(c|=8),c}function _u(t,o){var c=o.x-t.x,m=o.y-t.y;return c*c+m*m}function Rr(t,o,c,m){var x=o.x,B=o.y,K=c.x-x,he=c.y-B,Se=K*K+he*he,Ve;return Se>0&&(Ve=((t.x-x)*K+(t.y-B)*he)/Se,Ve>1?(x=c.x,B=c.y):Ve>0&&(x+=K*Ve,B+=he*Ve)),K=t.x-x,he=t.y-B,m?K*K+he*he:new q(x,B)}function xi(t){return!re(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Gi(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),xi(t)}function mo(t,o){var c,m,x,B,K,he,Se,Ve;if(!t||t.length===0)throw new Error("latlngs not passed");xi(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var it=Xe([0,0]),pt=et(t),Mt=pt.getNorthWest().distanceTo(pt.getSouthWest())*pt.getNorthEast().distanceTo(pt.getNorthWest());Mt<1700&&(it=fo(t));var yi=t.length,ai=[];for(c=0;c<yi;c++){var Li=Xe(t[c]);ai.push(o.project(Xe([Li.lat-it.lat,Li.lng-it.lng])))}for(c=0,m=0;c<yi-1;c++)m+=ai[c].distanceTo(ai[c+1])/2;if(m===0)Ve=ai[0];else for(c=0,B=0;c<yi-1;c++)if(K=ai[c],he=ai[c+1],x=K.distanceTo(he),B+=x,B>m){Se=(B-m)/x,Ve=[he.x-Se*(he.x-K.x),he.y-Se*(he.y-K.y)];break}var Kt=o.unproject(se(Ve));return Xe([Kt.lat+it.lat,Kt.lng+it.lng])}var ds={__proto__:null,simplify:Pa,pointToSegmentDistance:po,closestPointOnSegment:gu,clipSegment:qn,_getEdgeIntersection:Pn,_getBitCode:bi,_sqClosestPointOnSegment:Rr,isFlat:xi,_flat:Gi,polylineCenter:mo},go={project:function(t){return new q(t.lng,t.lat)},unproject:function(t){return new nt(t.y,t.x)},bounds:new xe([-180,-90],[180,90])},Vi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new xe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var o=Math.PI/180,c=this.R,m=t.lat*o,x=this.R_MINOR/c,B=Math.sqrt(1-x*x),K=B*Math.sin(m),he=Math.tan(Math.PI/4-m/2)/Math.pow((1-K)/(1+K),B/2);return m=-c*Math.log(Math.max(he,1e-10)),new q(t.lng*o*c,m)},unproject:function(t){for(var o=180/Math.PI,c=this.R,m=this.R_MINOR/c,x=Math.sqrt(1-m*m),B=Math.exp(-t.y/c),K=Math.PI/2-2*Math.atan(B),he=0,Se=.1,Ve;he<15&&Math.abs(Se)>1e-7;he++)Ve=x*Math.sin(K),Ve=Math.pow((1-Ve)/(1+Ve),x/2),Se=Math.PI/2-2*Math.atan(B*Ve)-K,K+=Se;return new nt(K*o,t.x*o/c)}},on={__proto__:null,LonLat:go,Mercator:Vi,SphericalMercator:Ye},fs=h({},Ke,{code:"EPSG:3395",projection:Vi,transformation:function(){var t=.5/(Math.PI*Vi.R);return $(t,.5,-t,.5)}()}),_o=h({},Ke,{code:"EPSG:4326",projection:go,transformation:$(1/180,1,-1/180,.5)}),yo=h({},Ee,{projection:go,transformation:$(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,o){var c=o.lng-t.lng,m=o.lat-t.lat;return Math.sqrt(c*c+m*m)},infinite:!0});Ee.Earth=Ke,Ee.EPSG3395=fs,Ee.EPSG3857=Z,Ee.EPSG900913=le,Ee.EPSG4326=_o,Ee.Simple=yo;var gi=Me.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[v(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[v(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var o=t.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var c=this.getEvents();o.on(c,this),this.once("remove",function(){o.off(c,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});Bt.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var o=v(t);return this._layers[o]?this:(this._layers[o]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var o=v(t);return this._layers[o]?(this._loaded&&t.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return v(t)in this._layers},eachLayer:function(t,o){for(var c in this._layers)t.call(o,this._layers[c]);return this},_addLayers:function(t){t=t?re(t)?t:[t]:[];for(var o=0,c=t.length;o<c;o++)this.addLayer(t[o])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[v(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var o=v(t);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,o=-1/0,c=this._getZoomSpan();for(var m in this._zoomBoundLayers){var x=this._zoomBoundLayers[m].options;t=x.minZoom===void 0?t:Math.min(t,x.minZoom),o=x.maxZoom===void 0?o:Math.max(o,x.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=t===1/0?void 0:t,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var cr=gi.extend({initialize:function(t,o){V(this,o),this._layers={};var c,m;if(t)for(c=0,m=t.length;c<m;c++)this.addLayer(t[c])},addLayer:function(t){var o=this.getLayerId(t);return this._layers[o]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var o=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(t){var o=typeof t=="number"?t:this.getLayerId(t);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var o=Array.prototype.slice.call(arguments,1),c,m;for(c in this._layers)m=this._layers[c],m[t]&&m[t].apply(m,o);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,o){for(var c in this._layers)t.call(o,this._layers[c]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return v(t)}}),yu=function(t,o){return new cr(t,o)},Ji=cr.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),cr.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),cr.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new Je;for(var o in this._layers){var c=this._layers[o];t.extend(c.getBounds?c.getBounds():c.getLatLng())}return t}}),vu=function(t,o){return new Ji(t,o)},hr=ie.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){V(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,o){var c=this._getIconUrl(t);if(!c){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var m=this._createImg(c,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(m,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),m},_setIconStyles:function(t,o){var c=this.options,m=c[o+"Size"];typeof m=="number"&&(m=[m,m]);var x=se(m),B=se(o==="shadow"&&c.shadowAnchor||c.iconAnchor||x&&x.divideBy(2,!0));t.className="leaflet-marker-"+o+" "+(c.className||""),B&&(t.style.marginLeft=-B.x+"px",t.style.marginTop=-B.y+"px"),x&&(t.style.width=x.x+"px",t.style.height=x.y+"px")},_createImg:function(t,o){return o=o||document.createElement("img"),o.src=t,o},_getIconUrl:function(t){return ht.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function bu(t){return new hr(t)}var Or=hr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Or.imagePath!="string"&&(Or.imagePath=this._detectIconPath()),(this.options.imagePath||Or.imagePath)+hr.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var o=function(c,m,x){var B=m.exec(c);return B&&B[x]};return t=o(t,/^url\((['"])?(.+)\1\)$/,2),t&&o(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=Dt("div","leaflet-default-icon-path",document.body),o=kn(t,"background-image")||kn(t,"backgroundImage");if(document.body.removeChild(t),o=this._stripUrl(o),o)return o;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),ps=mi.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Mn(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),xt(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Jt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var o=this._marker,c=o._map,m=this._marker.options.autoPanSpeed,x=this._marker.options.autoPanPadding,B=Un(o._icon),K=c.getPixelBounds(),he=c.getPixelOrigin(),Se=ve(K.min._subtract(he).add(x),K.max._subtract(he).subtract(x));if(!Se.contains(B)){var Ve=se((Math.max(Se.max.x,B.x)-Se.max.x)/(K.max.x-Se.max.x)-(Math.min(Se.min.x,B.x)-Se.min.x)/(K.min.x-Se.min.x),(Math.max(Se.max.y,B.y)-Se.max.y)/(K.max.y-Se.max.y)-(Math.min(Se.min.y,B.y)-Se.min.y)/(K.min.y-Se.min.y)).multiplyBy(m);c.panBy(Ve,{animate:!1}),this._draggable._newPos._add(Ve),this._draggable._startPos._add(Ve),ei(o._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=ee(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(Re(this._panRequest),this._panRequest=ee(this._adjustPan.bind(this,t)))},_onDrag:function(t){var o=this._marker,c=o._shadow,m=Un(o._icon),x=o._map.layerPointToLatLng(m);c&&ei(c,m),o._latlng=x,t.latlng=x,t.oldLatLng=this._oldLatLng,o.fire("move",t).fire("drag",t)},_onDragEnd:function(t){Re(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),ms=gi.extend({options:{icon:new Or,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,o){V(this,o),this._latlng=Xe(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var o=this._latlng;return this._latlng=Xe(t),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=t.icon.createIcon(this._icon),m=!1;c!==this._icon&&(this._icon&&this._removeIcon(),m=!0,t.title&&(c.title=t.title),c.tagName==="IMG"&&(c.alt=t.alt||"")),xt(c,o),t.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&bt(c,"focus",this._panOnFocus,this);var x=t.icon.createShadow(this._shadow),B=!1;x!==this._shadow&&(this._removeShadow(),B=!0),x&&(xt(x,o),x.alt=""),this._shadow=x,t.opacity<1&&this._updateOpacity(),m&&this.getPane().appendChild(this._icon),this._initInteraction(),x&&B&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&jt(this._icon,"focus",this._panOnFocus,this),Ht(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ht(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&ei(this._icon,t),this._shadow&&ei(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(xt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ps)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ps(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Ui(this._icon,t),this._shadow&&Ui(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var o=this.options.icon.options,c=o.iconSize?se(o.iconSize):se(0,0),m=o.iconAnchor?se(o.iconAnchor):se(0,0);t.panInside(this._latlng,{paddingTopLeft:m,paddingBottomRight:c.subtract(m)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function xu(t,o){return new ms(t,o)}var gn=gi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return V(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),an=gn.extend({options:{fill:!0,radius:10},initialize:function(t,o){V(this,o),this._latlng=Xe(t),this._radius=this.options.radius},setLatLng:function(t){var o=this._latlng;return this._latlng=Xe(t),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var o=t&&t.radius||this._radius;return gn.prototype.setStyle.call(this,t),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,o=this._radiusY||t,c=this._clickTolerance(),m=[t+c,o+c];this._pxBounds=new xe(this._point.subtract(m),this._point.add(m))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ba(t,o){return new an(t,o)}var vo=an.extend({initialize:function(t,o,c){if(typeof o=="number"&&(o=h({},c,{radius:o})),V(this,o),this._latlng=Xe(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new Je(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:gn.prototype.setStyle,_project:function(){var t=this._latlng.lng,o=this._latlng.lat,c=this._map,m=c.options.crs;if(m.distance===Ke.distance){var x=Math.PI/180,B=this._mRadius/Ke.R/x,K=c.project([o+B,t]),he=c.project([o-B,t]),Se=K.add(he).divideBy(2),Ve=c.unproject(Se).lat,it=Math.acos((Math.cos(B*x)-Math.sin(o*x)*Math.sin(Ve*x))/(Math.cos(o*x)*Math.cos(Ve*x)))/x;(isNaN(it)||it===0)&&(it=B/Math.cos(Math.PI/180*o)),this._point=Se.subtract(c.getPixelOrigin()),this._radius=isNaN(it)?0:Se.x-c.project([Ve,t-it]).x,this._radiusY=Se.y-K.y}else{var pt=m.unproject(m.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(pt).x}this._updateBounds()}});function Kn(t,o,c){return new vo(t,o,c)}var _n=gn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,o){V(this,o),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var o=1/0,c=null,m=Rr,x,B,K=0,he=this._parts.length;K<he;K++)for(var Se=this._parts[K],Ve=1,it=Se.length;Ve<it;Ve++){x=Se[Ve-1],B=Se[Ve];var pt=m(t,x,B,!0);pt<o&&(o=pt,c=m(t,x,B))}return c&&(c.distance=Math.sqrt(o)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return mo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,o){return o=o||this._defaultShape(),t=Xe(t),o.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new Je,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return xi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var o=[],c=xi(t),m=0,x=t.length;m<x;m++)c?(o[m]=Xe(t[m]),this._bounds.extend(o[m])):o[m]=this._convertLatLngs(t[m]);return o},_project:function(){var t=new xe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),o=new q(t,t);this._rawPxBounds&&(this._pxBounds=new xe([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(t,o,c){var m=t[0]instanceof nt,x=t.length,B,K;if(m){for(K=[],B=0;B<x;B++)K[B]=this._map.latLngToLayerPoint(t[B]),c.extend(K[B]);o.push(K)}else for(B=0;B<x;B++)this._projectLatlngs(t[B],o,c)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,c,m,x,B,K,he,Se;for(c=0,x=0,B=this._rings.length;c<B;c++)for(Se=this._rings[c],m=0,K=Se.length;m<K-1;m++)he=qn(Se[m],Se[m+1],t,m,!0),he&&(o[x]=o[x]||[],o[x].push(he[0]),(he[1]!==Se[m+1]||m===K-2)&&(o[x].push(he[1]),x++))}},_simplifyPoints:function(){for(var t=this._parts,o=this.options.smoothFactor,c=0,m=t.length;c<m;c++)t[c]=Pa(t[c],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,o){var c,m,x,B,K,he,Se=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(c=0,B=this._parts.length;c<B;c++)for(he=this._parts[c],m=0,K=he.length,x=K-1;m<K;x=m++)if(!(!o&&m===0)&&po(t,he[x],he[m])<=Se)return!0;return!1}});function wu(t,o){return new _n(t,o)}_n._flat=Gi;var Sn=_n.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ma(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var o=_n.prototype._convertLatLngs.call(this,t),c=o.length;return c>=2&&o[0]instanceof nt&&o[0].equals(o[c-1])&&o.pop(),o},_setLatLngs:function(t){_n.prototype._setLatLngs.call(this,t),xi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return xi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,o=this.options.weight,c=new q(o,o);if(t=new xe(t.min.subtract(c),t.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var m=0,x=this._rings.length,B;m<x;m++)B=Ea(this._rings[m],t,!0),B.length&&this._parts.push(B)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var o=!1,c,m,x,B,K,he,Se,Ve;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(B=0,Se=this._parts.length;B<Se;B++)for(c=this._parts[B],K=0,Ve=c.length,he=Ve-1;K<Ve;he=K++)m=c[K],x=c[he],m.y>t.y!=x.y>t.y&&t.x<(x.x-m.x)*(t.y-m.y)/(x.y-m.y)+m.x&&(o=!o);return o||_n.prototype._containsPoint.call(this,t,!0)}});function Ir(t,o){return new Sn(t,o)}var yn=Ji.extend({initialize:function(t,o){V(this,o),this._layers={},t&&this.addData(t)},addData:function(t){var o=re(t)?t:t.features,c,m,x;if(o){for(c=0,m=o.length;c<m;c++)x=o[c],(x.geometries||x.geometry||x.features||x.coordinates)&&this.addData(x);return this}var B=this.options;if(B.filter&&!B.filter(t))return this;var K=gs(t,B);return K?(K.feature=xs(t),K.defaultOptions=K.options,this.resetStyle(K),B.onEachFeature&&B.onEachFeature(t,K),this.addLayer(K)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=h({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(o){this._setLayerStyle(o,t)},this)},_setLayerStyle:function(t,o){t.setStyle&&(typeof o=="function"&&(o=o(t.feature)),t.setStyle(o))}});function gs(t,o){var c=t.type==="Feature"?t.geometry:t,m=c?c.coordinates:null,x=[],B=o&&o.pointToLayer,K=o&&o.coordsToLatLng||_s,he,Se,Ve,it;if(!m&&!c)return null;switch(c.type){case"Point":return he=K(m),Aa(B,t,he,o);case"MultiPoint":for(Ve=0,it=m.length;Ve<it;Ve++)he=K(m[Ve]),x.push(Aa(B,t,he,o));return new Ji(x);case"LineString":case"MultiLineString":return Se=ys(m,c.type==="LineString"?0:1,K),new _n(Se,o);case"Polygon":case"MultiPolygon":return Se=ys(m,c.type==="Polygon"?1:2,K),new Sn(Se,o);case"GeometryCollection":for(Ve=0,it=c.geometries.length;Ve<it;Ve++){var pt=gs({geometry:c.geometries[Ve],type:"Feature",properties:t.properties},o);pt&&x.push(pt)}return new Ji(x);case"FeatureCollection":for(Ve=0,it=c.features.length;Ve<it;Ve++){var Mt=gs(c.features[Ve],o);Mt&&x.push(Mt)}return new Ji(x);default:throw new Error("Invalid GeoJSON object.")}}function Aa(t,o,c,m){return t?t(o,c):new ms(c,m&&m.markersInheritOptions&&m)}function _s(t){return new nt(t[1],t[0],t[2])}function ys(t,o,c){for(var m=[],x=0,B=t.length,K;x<B;x++)K=o?ys(t[x],o-1,c):(c||_s)(t[x]),m.push(K);return m}function vs(t,o){return t=Xe(t),t.alt!==void 0?[j(t.lng,o),j(t.lat,o),j(t.alt,o)]:[j(t.lng,o),j(t.lat,o)]}function bs(t,o,c,m){for(var x=[],B=0,K=t.length;B<K;B++)x.push(o?bs(t[B],xi(t[B])?0:o-1,c,m):vs(t[B],m));return!o&&c&&x.length>0&&x.push(x[0].slice()),x}function dr(t,o){return t.feature?h({},t.feature,{geometry:o}):xs(o)}function xs(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var ws={toGeoJSON:function(t){return dr(this,{type:"Point",coordinates:vs(this.getLatLng(),t)})}};ms.include(ws),vo.include(ws),an.include(ws),_n.include({toGeoJSON:function(t){var o=!xi(this._latlngs),c=bs(this._latlngs,o?1:0,!1,t);return dr(this,{type:(o?"Multi":"")+"LineString",coordinates:c})}}),Sn.include({toGeoJSON:function(t){var o=!xi(this._latlngs),c=o&&!xi(this._latlngs[0]),m=bs(this._latlngs,c?2:o?1:0,!0,t);return o||(m=[m]),dr(this,{type:(c?"Multi":"")+"Polygon",coordinates:m})}}),cr.include({toMultiPoint:function(t){var o=[];return this.eachLayer(function(c){o.push(c.toGeoJSON(t).geometry.coordinates)}),dr(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(t){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(t);var c=o==="GeometryCollection",m=[];return this.eachLayer(function(x){if(x.toGeoJSON){var B=x.toGeoJSON(t);if(c)m.push(B.geometry);else{var K=xs(B);K.type==="FeatureCollection"?m.push.apply(m,K.features):m.push(K)}}}),c?dr(this,{geometries:m,type:"GeometryCollection"}):{type:"FeatureCollection",features:m}}});function Ls(t,o){return new yn(t,o)}var Ta=Ls,fr=gi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,o,c){this._url=t,this._bounds=et(o),V(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(xt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ht(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&lr(this._image),this},bringToBack:function(){return this._map&&$n(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=et(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",o=this._image=t?this._url:Dt("img");if(xt(o,"leaflet-image-layer"),this._zoomAnimated&&xt(o,"leaflet-zoom-animated"),this.options.className&&xt(o,this.options.className),o.onselectstart=M,o.onmousemove=M,o.onload=f(this.fire,this,"load"),o.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(t){var o=this._map.getZoomScale(t.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;jn(this._image,c,o)},_reset:function(){var t=this._image,o=new xe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=o.getSize();ei(t,o.min),t.style.width=c.x+"px",t.style.height=c.y+"px"},_updateOpacity:function(){Ui(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Lu=function(t,o,c){return new fr(t,o,c)},Fr=fr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",o=this._image=t?this._url:Dt("video");if(xt(o,"leaflet-image-layer"),this._zoomAnimated&&xt(o,"leaflet-zoom-animated"),this.options.className&&xt(o,this.options.className),o.onselectstart=M,o.onmousemove=M,o.onloadeddata=f(this.fire,this,"load"),t){for(var c=o.getElementsByTagName("source"),m=[],x=0;x<c.length;x++)m.push(c[x].src);this._url=c.length>0?m:[o.src];return}re(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var B=0;B<this._url.length;B++){var K=Dt("source");K.src=this._url[B],o.appendChild(K)}}});function Da(t,o,c){return new Fr(t,o,c)}var Ra=fr.extend({_initImage:function(){var t=this._image=this._url;xt(t,"leaflet-image-layer"),this._zoomAnimated&&xt(t,"leaflet-zoom-animated"),this.options.className&&xt(t,this.options.className),t.onselectstart=M,t.onmousemove=M}});function Cu(t,o,c){return new Ra(t,o,c)}var ln=gi.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,o){t&&(t instanceof nt||re(t))?(this._latlng=Xe(t),V(this,o)):(V(this,t),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Ui(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Ui(this._container,1),this.bringToFront(),this.options.interactive&&(xt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Ui(this._container,0),this._removeTimeout=setTimeout(f(Ht,void 0,this._container),200)):Ht(this._container),this.options.interactive&&(Jt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=Xe(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&lr(this._container),this},bringToBack:function(){return this._map&&$n(this._container),this},_prepareOpen:function(t){var o=this._source;if(!o._map)return!1;if(o instanceof Ji){o=null;var c=this._source._layers;for(var m in c)if(c[m]._map){o=c[m];break}if(!o)return!1;this._source=o}if(!t)if(o.getCenter)t=o.getCenter();else if(o.getLatLng)t=o.getLatLng();else if(o.getBounds)t=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")t.innerHTML=o;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),o=se(this.options.offset),c=this._getAnchor();this._zoomAnimated?ei(this._container,t.add(c)):o=o.add(t).add(c);var m=this._containerBottom=-o.y,x=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=m+"px",this._container.style.left=x+"px"}},_getAnchor:function(){return[0,0]}});Bt.include({_initOverlay:function(t,o,c,m){var x=o;return x instanceof t||(x=new t(m).setContent(o)),c&&x.setLatLng(c),x}}),gi.include({_initOverlay:function(t,o,c,m){var x=c;return x instanceof t?(V(x,m),x._source=this):(x=o&&!m?o:new t(m,this),x.setContent(c)),x}});var Bn=ln.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,ln.prototype.openOn.call(this,t)},onAdd:function(t){ln.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof gn||this._source.on("preclick",Gn))},onRemove:function(t){ln.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof gn||this._source.off("preclick",Gn))},getEvents:function(){var t=ln.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",o=this._container=Dt("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Dt("div",t+"-content-wrapper",o);if(this._contentNode=Dt("div",t+"-content",c),Tr(o),co(this._contentNode),bt(o,"contextmenu",Gn),this._tipContainer=Dt("div",t+"-tip-container",o),this._tip=Dt("div",t+"-tip",this._tipContainer),this.options.closeButton){var m=this._closeButton=Dt("a",t+"-close-button",o);m.setAttribute("role","button"),m.setAttribute("aria-label","Close popup"),m.href="#close",m.innerHTML='<span aria-hidden="true">&#215;</span>',bt(m,"click",function(x){ci(x),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,o=t.style;o.width="",o.whiteSpace="nowrap";var c=t.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),o.width=c+1+"px",o.whiteSpace="",o.height="";var m=t.offsetHeight,x=this.options.maxHeight,B="leaflet-popup-scrolled";x&&m>x?(o.height=x+"px",xt(t,B)):Jt(t,B),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),c=this._getAnchor();ei(this._container,o.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,o=parseInt(kn(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+o,m=this._containerWidth,x=new q(this._containerLeft,-c-this._containerBottom);x._add(Un(this._container));var B=t.layerPointToContainerPoint(x),K=se(this.options.autoPanPadding),he=se(this.options.autoPanPaddingTopLeft||K),Se=se(this.options.autoPanPaddingBottomRight||K),Ve=t.getSize(),it=0,pt=0;B.x+m+Se.x>Ve.x&&(it=B.x+m-Ve.x+Se.x),B.x-it-he.x<0&&(it=B.x-he.x),B.y+c+Se.y>Ve.y&&(pt=B.y+c-Ve.y+Se.y),B.y-pt-he.y<0&&(pt=B.y-he.y),(it||pt)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([it,pt]))}},_getAnchor:function(){return se(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ku=function(t,o){return new Bn(t,o)};Bt.mergeOptions({closePopupOnClick:!0}),Bt.include({openPopup:function(t,o,c){return this._initOverlay(Bn,t,o,c).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),gi.include({bindPopup:function(t,o){return this._popup=this._initOverlay(Bn,this._popup,t,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Ji||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){Vn(t);var o=t.layer||t.target;if(this._popup._source===o&&!(o instanceof gn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=o,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Cs=ln.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){ln.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){ln.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=ln.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",o=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Dt("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+v(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var o,c,m=this._map,x=this._container,B=m.latLngToContainerPoint(m.getCenter()),K=m.layerPointToContainerPoint(t),he=this.options.direction,Se=x.offsetWidth,Ve=x.offsetHeight,it=se(this.options.offset),pt=this._getAnchor();he==="top"?(o=Se/2,c=Ve):he==="bottom"?(o=Se/2,c=0):he==="center"?(o=Se/2,c=Ve/2):he==="right"?(o=0,c=Ve/2):he==="left"?(o=Se,c=Ve/2):K.x<B.x?(he="right",o=0,c=Ve/2):(he="left",o=Se+(it.x+pt.x)*2,c=Ve/2),t=t.subtract(se(o,c,!0)).add(it).add(pt),Jt(x,"leaflet-tooltip-right"),Jt(x,"leaflet-tooltip-left"),Jt(x,"leaflet-tooltip-top"),Jt(x,"leaflet-tooltip-bottom"),xt(x,"leaflet-tooltip-"+he),ei(x,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Ui(this._container,t)},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(o)},_getAnchor:function(){return se(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Eu=function(t,o){return new Cs(t,o)};Bt.include({openTooltip:function(t,o,c){return this._initOverlay(Cs,t,o,c).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),gi.include({bindTooltip:function(t,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Cs,this._tooltip,t,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var o=t?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[o](c),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Ji||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var o=typeof t.getElement=="function"&&t.getElement();o&&(bt(o,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),bt(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var o=typeof t.getElement=="function"&&t.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var o=t.latlng,c,m;this._tooltip.options.sticky&&t.originalEvent&&(c=this._map.mouseEventToContainerPoint(t.originalEvent),m=this._map.containerPointToLayerPoint(c),o=this._map.layerPointToLatLng(m)),this._tooltip.setLatLng(o)}});var Oa=hr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var o=t&&t.tagName==="DIV"?t:document.createElement("div"),c=this.options;if(c.html instanceof Element?(Sr(o),o.appendChild(c.html)):o.innerHTML=c.html!==!1?c.html:"",c.bgPos){var m=se(c.bgPos);o.style.backgroundPosition=-m.x+"px "+-m.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function Mu(t){return new Oa(t)}hr.Default=Or;var Nr=gi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ht.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){V(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Ht(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(lr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&($n(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=C(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof q?t:new q(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var o=this.getPane().children,c=-t(-1/0,1/0),m=0,x=o.length,B;m<x;m++)B=o[m].style.zIndex,o[m]!==this._container&&B&&(c=t(c,+B));isFinite(c)&&(this.options.zIndex=c+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ht.ielt9){Ui(this._container,this.options.opacity);var t=+new Date,o=!1,c=!1;for(var m in this._tiles){var x=this._tiles[m];if(!(!x.current||!x.loaded)){var B=Math.min(1,(t-x.loaded)/200);Ui(x.el,B),B<1?o=!0:(x.active?c=!0:this._onOpaqueTile(x),x.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),o&&(Re(this._fadeFrame),this._fadeFrame=ee(this._updateOpacity,this))}},_onOpaqueTile:M,_initContainer:function(){this._container||(this._container=Dt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,o=this.options.maxZoom;if(t!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===t?(this._levels[c].el.style.zIndex=o-Math.abs(t-c),this._onUpdateLevel(c)):(Ht(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var m=this._levels[t],x=this._map;return m||(m=this._levels[t]={},m.el=Dt("div","leaflet-tile-container leaflet-zoom-animated",this._container),m.el.style.zIndex=o,m.origin=x.project(x.unproject(x.getPixelOrigin()),t).round(),m.zoom=t,this._setZoomTransform(m,x.getCenter(),x.getZoom()),M(m.el.offsetWidth),this._onCreateLevel(m)),this._level=m,m}},_onUpdateLevel:M,_onRemoveLevel:M,_onCreateLevel:M,_pruneTiles:function(){if(this._map){var t,o,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)o=this._tiles[t],o.retain=o.current;for(t in this._tiles)if(o=this._tiles[t],o.current&&!o.active){var m=o.coords;this._retainParent(m.x,m.y,m.z,m.z-5)||this._retainChildren(m.x,m.y,m.z,m.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var o in this._tiles)this._tiles[o].coords.z===t&&this._removeTile(o)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Ht(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,o,c,m){var x=Math.floor(t/2),B=Math.floor(o/2),K=c-1,he=new q(+x,+B);he.z=+K;var Se=this._tileCoordsToKey(he),Ve=this._tiles[Se];return Ve&&Ve.active?(Ve.retain=!0,!0):(Ve&&Ve.loaded&&(Ve.retain=!0),K>m?this._retainParent(x,B,K,m):!1)},_retainChildren:function(t,o,c,m){for(var x=2*t;x<2*t+2;x++)for(var B=2*o;B<2*o+2;B++){var K=new q(x,B);K.z=c+1;var he=this._tileCoordsToKey(K),Se=this._tiles[he];if(Se&&Se.active){Se.retain=!0;continue}else Se&&Se.loaded&&(Se.retain=!0);c+1<m&&this._retainChildren(x,B,c+1,m)}},_resetView:function(t){var o=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var o=this.options;return o.minNativeZoom!==void 0&&t<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<t?o.maxNativeZoom:t},_setView:function(t,o,c,m){var x=Math.round(o);this.options.maxZoom!==void 0&&x>this.options.maxZoom||this.options.minZoom!==void 0&&x<this.options.minZoom?x=void 0:x=this._clampZoom(x);var B=this.options.updateWhenZooming&&x!==this._tileZoom;(!m||B)&&(this._tileZoom=x,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),x!==void 0&&this._update(t),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(t,o)},_setZoomTransforms:function(t,o){for(var c in this._levels)this._setZoomTransform(this._levels[c],t,o)},_setZoomTransform:function(t,o,c){var m=this._map.getZoomScale(c,t.zoom),x=t.origin.multiplyBy(m).subtract(this._map._getNewPixelOrigin(o,c)).round();ht.any3d?jn(t.el,x,m):ei(t.el,x)},_resetGrid:function(){var t=this._map,o=t.options.crs,c=this._tileSize=this.getTileSize(),m=this._tileZoom,x=this._map.getPixelWorldBounds(this._tileZoom);x&&(this._globalTileRange=this._pxBoundsToTileRange(x)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,o.wrapLng[0]],m).x/c.x),Math.ceil(t.project([0,o.wrapLng[1]],m).x/c.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([o.wrapLat[0],0],m).y/c.x),Math.ceil(t.project([o.wrapLat[1],0],m).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var o=this._map,c=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),m=o.getZoomScale(c,this._tileZoom),x=o.project(t,this._tileZoom).floor(),B=o.getSize().divideBy(m*2);return new xe(x.subtract(B),x.add(B))},_update:function(t){var o=this._map;if(o){var c=this._clampZoom(o.getZoom());if(t===void 0&&(t=o.getCenter()),this._tileZoom!==void 0){var m=this._getTiledPixelBounds(t),x=this._pxBoundsToTileRange(m),B=x.getCenter(),K=[],he=this.options.keepBuffer,Se=new xe(x.getBottomLeft().subtract([he,-he]),x.getTopRight().add([he,-he]));if(!(isFinite(x.min.x)&&isFinite(x.min.y)&&isFinite(x.max.x)&&isFinite(x.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ve in this._tiles){var it=this._tiles[Ve].coords;(it.z!==this._tileZoom||!Se.contains(new q(it.x,it.y)))&&(this._tiles[Ve].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(t,c);return}for(var pt=x.min.y;pt<=x.max.y;pt++)for(var Mt=x.min.x;Mt<=x.max.x;Mt++){var yi=new q(Mt,pt);if(yi.z=this._tileZoom,!!this._isValidTile(yi)){var ai=this._tiles[this._tileCoordsToKey(yi)];ai?ai.current=!0:K.push(yi)}}if(K.sort(function(Kt,un){return Kt.distanceTo(B)-un.distanceTo(B)}),K.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Li=document.createDocumentFragment();for(Mt=0;Mt<K.length;Mt++)this._addTile(K[Mt],Li);this._level.el.appendChild(Li)}}}},_isValidTile:function(t){var o=this._map.options.crs;if(!o.infinite){var c=this._globalTileRange;if(!o.wrapLng&&(t.x<c.min.x||t.x>c.max.x)||!o.wrapLat&&(t.y<c.min.y||t.y>c.max.y))return!1}if(!this.options.bounds)return!0;var m=this._tileCoordsToBounds(t);return et(this.options.bounds).overlaps(m)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var o=this._map,c=this.getTileSize(),m=t.scaleBy(c),x=m.add(c),B=o.unproject(m,t.z),K=o.unproject(x,t.z);return[B,K]},_tileCoordsToBounds:function(t){var o=this._tileCoordsToNwSe(t),c=new Je(o[0],o[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var o=t.split(":"),c=new q(+o[0],+o[1]);return c.z=+o[2],c},_removeTile:function(t){var o=this._tiles[t];o&&(Ht(o.el),delete this._tiles[t],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){xt(t,"leaflet-tile");var o=this.getTileSize();t.style.width=o.x+"px",t.style.height=o.y+"px",t.onselectstart=M,t.onmousemove=M,ht.ielt9&&this.options.opacity<1&&Ui(t,this.options.opacity)},_addTile:function(t,o){var c=this._getTilePos(t),m=this._tileCoordsToKey(t),x=this.createTile(this._wrapCoords(t),f(this._tileReady,this,t));this._initTile(x),this.createTile.length<2&&ee(f(this._tileReady,this,t,null,x)),ei(x,c),this._tiles[m]={el:x,coords:t,current:!0},o.appendChild(x),this.fire("tileloadstart",{tile:x,coords:t})},_tileReady:function(t,o,c){o&&this.fire("tileerror",{error:o,tile:c,coords:t});var m=this._tileCoordsToKey(t);c=this._tiles[m],c&&(c.loaded=+new Date,this._map._fadeAnimated?(Ui(c.el,0),Re(this._fadeFrame),this._fadeFrame=ee(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),o||(xt(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ht.ielt9||!this._map._fadeAnimated?ee(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var o=new q(this._wrapX?P(t.x,this._wrapX):t.x,this._wrapY?P(t.y,this._wrapY):t.y);return o.z=t.z,o},_pxBoundsToTileRange:function(t){var o=this.getTileSize();return new xe(t.min.unscaleBy(o).floor(),t.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Pu(t){return new Nr(t)}var pr=Nr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,o){this._url=t,o=V(this,o),o.detectRetina&&ht.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,o){return this._url===t&&o===void 0&&(o=!0),this._url=t,o||this.redraw(),this},createTile:function(t,o){var c=document.createElement("img");return bt(c,"load",f(this._tileOnLoad,this,o,c)),bt(c,"error",f(this._tileOnError,this,o,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(t),c},getTileUrl:function(t){var o={r:ht.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-t.y;this.options.tms&&(o.y=c),o["-y"]=c}return pe(this._url,h(o,this.options))},_tileOnLoad:function(t,o){ht.ielt9?setTimeout(f(t,this,null,o),0):t(null,o)},_tileOnError:function(t,o,c){var m=this.options.errorTileUrl;m&&o.getAttribute("src")!==m&&(o.src=m),t(c,o)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,o=this.options.maxZoom,c=this.options.zoomReverse,m=this.options.zoomOffset;return c&&(t=o-t),t+m},_getSubdomain:function(t){var o=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var t,o;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(o=this._tiles[t].el,o.onload=M,o.onerror=M,!o.complete)){o.src=$e;var c=this._tiles[t].coords;Ht(o),delete this._tiles[t],this.fire("tileabort",{tile:o,coords:c})}},_removeTile:function(t){var o=this._tiles[t];if(o)return o.el.setAttribute("src",$e),Nr.prototype._removeTile.call(this,t)},_tileReady:function(t,o,c){if(!(!this._map||c&&c.getAttribute("src")===$e))return Nr.prototype._tileReady.call(this,t,o,c)}});function bo(t,o){return new pr(t,o)}var ks=pr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,o){this._url=t;var c=h({},this.defaultWmsParams);for(var m in o)m in this.options||(c[m]=o[m]);o=V(this,o);var x=o.detectRetina&&ht.retina?2:1,B=this.getTileSize();c.width=B.x*x,c.height=B.y*x,this.wmsParams=c},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,pr.prototype.onAdd.call(this,t)},getTileUrl:function(t){var o=this._tileCoordsToNwSe(t),c=this._crs,m=ve(c.project(o[0]),c.project(o[1])),x=m.min,B=m.max,K=(this._wmsVersion>=1.3&&this._crs===_o?[x.y,x.x,B.y,B.x]:[x.x,x.y,B.x,B.y]).join(","),he=pr.prototype.getTileUrl.call(this,t);return he+H(this.wmsParams,he,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+K},setParams:function(t,o){return h(this.wmsParams,t),o||this.redraw(),this}});function Su(t,o){return new ks(t,o)}pr.WMS=ks,bo.wms=Su;var vn=gi.extend({options:{padding:.1},initialize:function(t){V(this,t),v(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),xt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,o){var c=this._map.getZoomScale(o,this._zoom),m=this._map.getSize().multiplyBy(.5+this.options.padding),x=this._map.project(this._center,o),B=m.multiplyBy(-c).add(x).subtract(this._map._getNewPixelOrigin(t,o));ht.any3d?jn(this._container,B,c):ei(this._container,B)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,o=this._map.getSize(),c=this._map.containerPointToLayerPoint(o.multiplyBy(-t)).round();this._bounds=new xe(c,c.add(o.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),xo=vn.extend({options:{tolerance:0},getEvents:function(){var t=vn.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){vn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");bt(t,"mousemove",this._onMouseMove,this),bt(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),bt(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){Re(this._redrawRequest),delete this._ctx,Ht(this._container),jt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var o in this._layers)t=this._layers[o],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){vn.prototype._update.call(this);var t=this._bounds,o=this._container,c=t.getSize(),m=ht.retina?2:1;ei(o,t.min),o.width=m*c.x,o.height=m*c.y,o.style.width=c.x+"px",o.style.height=c.y+"px",ht.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){vn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[v(t)]=t;var o=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var o=t._order,c=o.next,m=o.prev;c?c.prev=m:this._drawLast=m,m?m.next=c:this._drawFirst=c,delete t._order,delete this._layers[v(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var o=t.options.dashArray.split(/[, ]+/),c=[],m,x;for(x=0;x<o.length;x++){if(m=Number(o[x]),isNaN(m))return;c.push(m)}t.options._dashArray=c}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||ee(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var o=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new xe,this._redrawBounds.extend(t._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(t._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var o=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,o=this._redrawBounds;if(this._ctx.save(),o){var c=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var m=this._drawFirst;m;m=m.next)t=m.layer,(!o||t._pxBounds&&t._pxBounds.intersects(o))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,o){if(this._drawing){var c,m,x,B,K=t._parts,he=K.length,Se=this._ctx;if(he){for(Se.beginPath(),c=0;c<he;c++){for(m=0,x=K[c].length;m<x;m++)B=K[c][m],Se[m?"lineTo":"moveTo"](B.x,B.y);o&&Se.closePath()}this._fillStroke(Se,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var o=t._point,c=this._ctx,m=Math.max(Math.round(t._radius),1),x=(Math.max(Math.round(t._radiusY),1)||m)/m;x!==1&&(c.save(),c.scale(1,x)),c.beginPath(),c.arc(o.x,o.y/x,m,0,Math.PI*2,!1),x!==1&&c.restore(),this._fillStroke(c,t)}},_fillStroke:function(t,o){var c=o.options;c.fill&&(t.globalAlpha=c.fillOpacity,t.fillStyle=c.fillColor||c.color,t.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(t.setLineDash&&t.setLineDash(o.options&&o.options._dashArray||[]),t.globalAlpha=c.opacity,t.lineWidth=c.weight,t.strokeStyle=c.color,t.lineCap=c.lineCap,t.lineJoin=c.lineJoin,t.stroke())},_onClick:function(t){for(var o=this._map.mouseEventToLayerPoint(t),c,m,x=this._drawFirst;x;x=x.next)c=x.layer,c.options.interactive&&c._containsPoint(o)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(c))&&(m=c);this._fireEvent(m?[m]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,o)}},_handleMouseOut:function(t){var o=this._hoveredLayer;o&&(Jt(this._container,"leaflet-interactive"),this._fireEvent([o],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,o){if(!this._mouseHoverThrottled){for(var c,m,x=this._drawFirst;x;x=x.next)c=x.layer,c.options.interactive&&c._containsPoint(o)&&(m=c);m!==this._hoveredLayer&&(this._handleMouseOut(t),m&&(xt(this._container,"leaflet-interactive"),this._fireEvent([m],t,"mouseover"),this._hoveredLayer=m)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(f(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,o,c){this._map._fireDOMEvent(o,c||o.type,t)},_bringToFront:function(t){var o=t._order;if(o){var c=o.next,m=o.prev;if(c)c.prev=m;else return;m?m.next=c:c&&(this._drawFirst=c),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(t)}},_bringToBack:function(t){var o=t._order;if(o){var c=o.next,m=o.prev;if(m)m.next=c;else return;c?c.prev=m:m&&(this._drawLast=m),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(t)}}});function Es(t){return ht.canvas?new xo(t):null}var zr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Bu={_initContainer:function(){this._container=Dt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(vn.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var o=t._container=zr("shape");xt(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",t._path=zr("path"),o.appendChild(t._path),this._updateStyle(t),this._layers[v(t)]=t},_addPath:function(t){var o=t._container;this._container.appendChild(o),t.options.interactive&&t.addInteractiveTarget(o)},_removePath:function(t){var o=t._container;Ht(o),t.removeInteractiveTarget(o),delete this._layers[v(t)]},_updateStyle:function(t){var o=t._stroke,c=t._fill,m=t.options,x=t._container;x.stroked=!!m.stroke,x.filled=!!m.fill,m.stroke?(o||(o=t._stroke=zr("stroke")),x.appendChild(o),o.weight=m.weight+"px",o.color=m.color,o.opacity=m.opacity,m.dashArray?o.dashStyle=re(m.dashArray)?m.dashArray.join(" "):m.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=m.lineCap.replace("butt","flat"),o.joinstyle=m.lineJoin):o&&(x.removeChild(o),t._stroke=null),m.fill?(c||(c=t._fill=zr("fill")),x.appendChild(c),c.color=m.fillColor||m.color,c.opacity=m.fillOpacity):c&&(x.removeChild(c),t._fill=null)},_updateCircle:function(t){var o=t._point.round(),c=Math.round(t._radius),m=Math.round(t._radiusY||c);this._setPath(t,t._empty()?"M0 0":"AL "+o.x+","+o.y+" "+c+","+m+" 0,"+65535*360)},_setPath:function(t,o){t._path.v=o},_bringToFront:function(t){lr(t._container)},_bringToBack:function(t){$n(t._container)}},mr=ht.vml?zr:ze,fi=vn.extend({_initContainer:function(){this._container=mr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=mr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ht(this._container),jt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){vn.prototype._update.call(this);var t=this._bounds,o=t.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,c.setAttribute("width",o.x),c.setAttribute("height",o.y)),ei(c,t.min),c.setAttribute("viewBox",[t.min.x,t.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(t){var o=t._path=mr("path");t.options.className&&xt(o,t.options.className),t.options.interactive&&xt(o,"leaflet-interactive"),this._updateStyle(t),this._layers[v(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Ht(t._path),t.removeInteractiveTarget(t._path),delete this._layers[v(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var o=t._path,c=t.options;o&&(c.stroke?(o.setAttribute("stroke",c.color),o.setAttribute("stroke-opacity",c.opacity),o.setAttribute("stroke-width",c.weight),o.setAttribute("stroke-linecap",c.lineCap),o.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?o.setAttribute("stroke-dasharray",c.dashArray):o.removeAttribute("stroke-dasharray"),c.dashOffset?o.setAttribute("stroke-dashoffset",c.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),c.fill?(o.setAttribute("fill",c.fillColor||c.color),o.setAttribute("fill-opacity",c.fillOpacity),o.setAttribute("fill-rule",c.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(t,o){this._setPath(t,je(t._parts,o))},_updateCircle:function(t){var o=t._point,c=Math.max(Math.round(t._radius),1),m=Math.max(Math.round(t._radiusY),1)||c,x="a"+c+","+m+" 0 1,0 ",B=t._empty()?"M0 0":"M"+(o.x-c)+","+o.y+x+c*2+",0 "+x+-c*2+",0 ";this._setPath(t,B)},_setPath:function(t,o){t._path.setAttribute("d",o)},_bringToFront:function(t){lr(t._path)},_bringToBack:function(t){$n(t._path)}});ht.vml&&fi.include(Bu);function _i(t){return ht.svg||ht.vml?new fi(t):null}Bt.include({getRenderer:function(t){var o=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var o=this._paneRenderers[t];return o===void 0&&(o=this._createRenderer({pane:t}),this._paneRenderers[t]=o),o},_createRenderer:function(t){return this.options.preferCanvas&&Es(t)||_i(t)}});var wo=Sn.extend({initialize:function(t,o){Sn.prototype.initialize.call(this,this._boundsToLatLngs(t),o)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=et(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Xi(t,o){return new wo(t,o)}fi.create=mr,fi.pointsToPath=je,yn.geometryToLayer=gs,yn.coordsToLatLng=_s,yn.coordsToLatLngs=ys,yn.latLngToCoords=vs,yn.latLngsToCoords=bs,yn.getFeature=dr,yn.asFeature=xs,Bt.mergeOptions({boxZoom:!0});var _t=mi.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){bt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){jt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ht(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Br(),no(),this._startPoint=this._map.mouseEventToContainerPoint(t),bt(document,{contextmenu:Vn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=Dt("div","leaflet-zoom-box",this._container),xt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var o=new xe(this._point,this._startPoint),c=o.getSize();ei(this._box,o.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(Ht(this._box),Jt(this._container,"leaflet-crosshair")),Ar(),ro(),jt(document,{contextmenu:Vn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var o=new Je(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Bt.addInitHook("addHandler","boxZoom",_t),Bt.mergeOptions({doubleClickZoom:!0});var Lo=mi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var o=this._map,c=o.getZoom(),m=o.options.zoomDelta,x=t.originalEvent.shiftKey?c-m:c+m;o.options.doubleClickZoom==="center"?o.setZoom(x):o.setZoomAround(t.containerPoint,x)}});Bt.addInitHook("addHandler","doubleClickZoom",Lo),Bt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ms=mi.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Mn(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}xt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Jt(this._map._container,"leaflet-grab"),Jt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=et(this._map.options.maxBounds);this._offsetLimit=ve(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var o=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(o),this._prunePositions(o)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,o){return t-(t-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;t.x<o.min.x&&(t.x=this._viscousLimit(t.x,o.min.x)),t.y<o.min.y&&(t.y=this._viscousLimit(t.y,o.min.y)),t.x>o.max.x&&(t.x=this._viscousLimit(t.x,o.max.x)),t.y>o.max.y&&(t.y=this._viscousLimit(t.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,o=Math.round(t/2),c=this._initialWorldOffset,m=this._draggable._newPos.x,x=(m-o+c)%t+o-c,B=(m+o+c)%t-o-c,K=Math.abs(x+c)<Math.abs(B+c)?x:B;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=K},_onDragEnd:function(t){var o=this._map,c=o.options,m=!c.inertia||t.noInertia||this._times.length<2;if(o.fire("dragend",t),m)o.fire("moveend");else{this._prunePositions(+new Date);var x=this._lastPos.subtract(this._positions[0]),B=(this._lastTime-this._times[0])/1e3,K=c.easeLinearity,he=x.multiplyBy(K/B),Se=he.distanceTo([0,0]),Ve=Math.min(c.inertiaMaxSpeed,Se),it=he.multiplyBy(Ve/Se),pt=Ve/(c.inertiaDeceleration*K),Mt=it.multiplyBy(-pt/2).round();!Mt.x&&!Mt.y?o.fire("moveend"):(Mt=o._limitOffset(Mt,o.options.maxBounds),ee(function(){o.panBy(Mt,{duration:pt,easeLinearity:K,noMoveStart:!0,animate:!0})}))}}});Bt.addInitHook("addHandler","dragging",Ms),Bt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var bn=mi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),bt(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),jt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,o=document.documentElement,c=t.scrollTop||o.scrollTop,m=t.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(m,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var o=this._panKeys={},c=this.keyCodes,m,x;for(m=0,x=c.left.length;m<x;m++)o[c.left[m]]=[-1*t,0];for(m=0,x=c.right.length;m<x;m++)o[c.right[m]]=[t,0];for(m=0,x=c.down.length;m<x;m++)o[c.down[m]]=[0,t];for(m=0,x=c.up.length;m<x;m++)o[c.up[m]]=[0,-1*t]},_setZoomDelta:function(t){var o=this._zoomKeys={},c=this.keyCodes,m,x;for(m=0,x=c.zoomIn.length;m<x;m++)o[c.zoomIn[m]]=t;for(m=0,x=c.zoomOut.length;m<x;m++)o[c.zoomOut[m]]=-t},_addHooks:function(){bt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){jt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var o=t.keyCode,c=this._map,m;if(o in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(m=this._panKeys[o],t.shiftKey&&(m=se(m).multiplyBy(3)),c.options.maxBounds&&(m=c._limitOffset(se(m),c.options.maxBounds)),c.options.worldCopyJump){var x=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(m)));c.panTo(x)}else c.panBy(m)}else if(o in this._zoomKeys)c.setZoom(c.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;Vn(t)}}});Bt.addInitHook("addHandler","keyboard",bn),Bt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var wi=mi.extend({addHooks:function(){bt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){jt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var o=xa(t),c=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var m=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),m),Vn(t)},_performZoom:function(){var t=this._map,o=t.getZoom(),c=this._map.options.zoomSnap||0;t._stop();var m=this._delta/(this._map.options.wheelPxPerZoomLevel*4),x=4*Math.log(2/(1+Math.exp(-Math.abs(m))))/Math.LN2,B=c?Math.ceil(x/c)*c:x,K=t._limitZoom(o+(this._delta>0?B:-B))-o;this._delta=0,this._startTime=null,K&&(t.options.scrollWheelZoom==="center"?t.setZoom(o+K):t.setZoomAround(this._lastMousePos,o+K))}});Bt.addInitHook("addHandler","scrollWheelZoom",wi);var Ia=600;Bt.mergeOptions({tapHold:ht.touchNative&&ht.safari&&ht.mobile,tapTolerance:15});var Ri=mi.extend({addHooks:function(){bt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){jt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var o=t.touches[0];this._startPos=this._newPos=new q(o.clientX,o.clientY),this._holdTimeout=setTimeout(f(function(){this._cancel(),this._isTapValid()&&(bt(document,"touchend",ci),bt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),Ia),bt(document,"touchend touchcancel contextmenu",this._cancel,this),bt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){jt(document,"touchend",ci),jt(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),jt(document,"touchend touchcancel contextmenu",this._cancel,this),jt(document,"touchmove",this._onMove,this)},_onMove:function(t){var o=t.touches[0];this._newPos=new q(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,o){var c=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});c._simulated=!0,o.target.dispatchEvent(c)}});Bt.addInitHook("addHandler","tapHold",Ri),Bt.mergeOptions({touchZoom:ht.touch,bounceAtZoomLimits:!0});var Oi=mi.extend({addHooks:function(){xt(this._map._container,"leaflet-touch-zoom"),bt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Jt(this._map._container,"leaflet-touch-zoom"),jt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var o=this._map;if(!(!t.touches||t.touches.length!==2||o._animatingZoom||this._zooming)){var c=o.mouseEventToContainerPoint(t.touches[0]),m=o.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(c.add(m)._divideBy(2))),this._startDist=c.distanceTo(m),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),bt(document,"touchmove",this._onTouchMove,this),bt(document,"touchend touchcancel",this._onTouchEnd,this),ci(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var o=this._map,c=o.mouseEventToContainerPoint(t.touches[0]),m=o.mouseEventToContainerPoint(t.touches[1]),x=c.distanceTo(m)/this._startDist;if(this._zoom=o.getScaleZoom(x,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&x<1||this._zoom>o.getMaxZoom()&&x>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,x===1)return}else{var B=c._add(m)._divideBy(2)._subtract(this._centerPoint);if(x===1&&B.x===0&&B.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(B),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),Re(this._animRequest);var K=f(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ee(K,this,!0),ci(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Re(this._animRequest),jt(document,"touchmove",this._onTouchMove,this),jt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Bt.addInitHook("addHandler","touchZoom",Oi),Bt.BoxZoom=_t,Bt.DoubleClickZoom=Lo,Bt.Drag=Ms,Bt.Keyboard=bn,Bt.ScrollWheelZoom=wi,Bt.TapHold=Ri,Bt.TouchZoom=Oi,s.Bounds=xe,s.Browser=ht,s.CRS=Ee,s.Canvas=xo,s.Circle=vo,s.CircleMarker=an,s.Class=ie,s.Control=vt,s.DivIcon=Oa,s.DivOverlay=ln,s.DomEvent=ls,s.DomUtil=uu,s.Draggable=Mn,s.Evented=Me,s.FeatureGroup=Ji,s.GeoJSON=yn,s.GridLayer=Nr,s.Handler=mi,s.Icon=hr,s.ImageOverlay=fr,s.LatLng=nt,s.LatLngBounds=Je,s.Layer=gi,s.LayerGroup=cr,s.LineUtil=ds,s.Map=Bt,s.Marker=ms,s.Mixin=pu,s.Path=gn,s.Point=q,s.PolyUtil=mu,s.Polygon=Sn,s.Polyline=_n,s.Popup=Bn,s.PosAnimation=wa,s.Projection=on,s.Rectangle=wo,s.Renderer=vn,s.SVG=fi,s.SVGOverlay=Ra,s.TileLayer=pr,s.Tooltip=Cs,s.Transformation=tt,s.Util=Te,s.VideoOverlay=Fr,s.bind=f,s.bounds=ve,s.canvas=Es,s.circle=Kn,s.circleMarker=Ba,s.control=Hn,s.divIcon=Mu,s.extend=h,s.featureGroup=vu,s.geoJSON=Ls,s.geoJson=Ta,s.gridLayer=Pu,s.icon=bu,s.imageOverlay=Lu,s.latLng=Xe,s.latLngBounds=et,s.layerGroup=yu,s.map=La,s.marker=xu,s.point=se,s.polygon=Ir,s.polyline=wu,s.popup=ku,s.rectangle=Xi,s.setOptions=V,s.stamp=v,s.svg=_i,s.svgOverlay=Cu,s.tileLayer=bo,s.tooltip=Eu,s.transformation=$,s.version=l,s.videoOverlay=Da;var Wn=window.L;s.noConflict=function(){return window.L=Wn,this},window.L=s})})(kc,kc.exports);var Ei=kc.exports;const st=Op(Ei);var Hi=63710088e-1,X1={centimeters:Hi*100,centimetres:Hi*100,degrees:Hi/111325,feet:Hi*3.28084,inches:Hi*39.37,kilometers:Hi/1e3,kilometres:Hi/1e3,meters:Hi,metres:Hi,miles:Hi/1609.344,millimeters:Hi*1e3,millimetres:Hi*1e3,nauticalmiles:Hi/1852,radians:1,yards:Hi*1.0936};function yl(e,n,s){s===void 0&&(s={});var l={type:"Feature"};return(s.id===0||s.id)&&(l.id=s.id),s.bbox&&(l.bbox=s.bbox),l.properties=n||{},l.geometry=e,l}function Ec(e,n,s){s===void 0&&(s={});for(var l=0,h=e;l<h.length;l++){var p=h[l];if(p.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var f=0;f<p[p.length-1].length;f++)if(p[p.length-1][f]!==p[0][f])throw new Error("First and last Position are not equivalent.")}var y={type:"Polygon",coordinates:e};return yl(y,n,s)}function Qo(e,n,s){if(s===void 0&&(s={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var l={type:"LineString",coordinates:e};return yl(l,n,s)}function Y1(e,n){n===void 0&&(n="kilometers");var s=X1[n];if(!s)throw new Error(n+" units is invalid");return e*s}function Wa(e){var n=e%360;return n*Math.PI/180}function Up(e,n,s){if(e!==null)for(var l,h,p,f,y,v,C,P=0,M=0,j,W=e.type,D=W==="FeatureCollection",V=W==="Feature",H=D?e.features.length:1,Ce=0;Ce<H;Ce++){C=D?e.features[Ce].geometry:V?e.geometry:e,j=C?C.type==="GeometryCollection":!1,y=j?C.geometries.length:1;for(var pe=0;pe<y;pe++){var re=0,Ae=0;if(f=j?C.geometries[pe]:C,f!==null){v=f.coordinates;var $e=f.type;switch(P=0,$e){case null:break;case"Point":if(n(v,M,Ce,re,Ae)===!1)return!1;M++,re++;break;case"LineString":case"MultiPoint":for(l=0;l<v.length;l++){if(n(v[l],M,Ce,re,Ae)===!1)return!1;M++,$e==="MultiPoint"&&re++}$e==="LineString"&&re++;break;case"Polygon":case"MultiLineString":for(l=0;l<v.length;l++){for(h=0;h<v[l].length-P;h++){if(n(v[l][h],M,Ce,re,Ae)===!1)return!1;M++}$e==="MultiLineString"&&re++,$e==="Polygon"&&Ae++}$e==="Polygon"&&re++;break;case"MultiPolygon":for(l=0;l<v.length;l++){for(Ae=0,h=0;h<v[l].length;h++){for(p=0;p<v[l][h].length-P;p++){if(n(v[l][h][p],M,Ce,re,Ae)===!1)return!1;M++}Ae++}re++}break;case"GeometryCollection":for(l=0;l<f.geometries.length;l++)if(Up(f.geometries[l],n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Gp(e,n){var s,l,h,p,f,y,v,C,P,M,j=0,W=e.type==="FeatureCollection",D=e.type==="Feature",V=W?e.features.length:1;for(s=0;s<V;s++){for(y=W?e.features[s].geometry:D?e.geometry:e,C=W?e.features[s].properties:D?e.properties:{},P=W?e.features[s].bbox:D?e.bbox:void 0,M=W?e.features[s].id:D?e.id:void 0,v=y?y.type==="GeometryCollection":!1,f=v?y.geometries.length:1,h=0;h<f;h++){if(p=v?y.geometries[h]:y,p===null){if(n(null,j,C,P,M)===!1)return!1;continue}switch(p.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(n(p,j,C,P,M)===!1)return!1;break}case"GeometryCollection":{for(l=0;l<p.geometries.length;l++)if(n(p.geometries[l],j,C,P,M)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}j++}}function Q1(e,n,s){var l=s;return Gp(e,function(h,p,f,y,v){l=n(l,h,p,f,y,v)}),l}function eb(e,n){Gp(e,function(s,l,h,p,f){var y=s===null?null:s.type;switch(y){case null:case"Point":case"LineString":case"Polygon":return n(yl(s,h,{bbox:p,id:f}),l,0)===!1?!1:void 0}var v;switch(y){case"MultiPoint":v="Point";break;case"MultiLineString":v="LineString";break;case"MultiPolygon":v="Polygon";break}for(var C=0;C<s.coordinates.length;C++){var P=s.coordinates[C],M={type:v,coordinates:P};if(n(yl(M,h),l,C)===!1)return!1}})}function tb(e,n){eb(e,function(s,l,h){var p=0;if(s.geometry){var f=s.geometry.type;if(!(f==="Point"||f==="MultiPoint")){var y,v=0,C=0,P=0;if(Up(s,function(M,j,W,D,V){if(y===void 0||l>v||D>C||V>P){y=M,v=l,C=D,P=V,p=0;return}var H=Qo([y,M],s.properties);if(n(H,l,h,V,p)===!1)return!1;p++,y=M})===!1)return!1}}})}function ib(e,n,s){var l=s,h=!1;return tb(e,function(p,f,y,v,C){h===!1&&s===void 0?l=p:l=n(l,p,f,y,v,C),h=!0}),l}function Sd(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Mc(e,n,s){s===void 0&&(s={});var l=Sd(e),h=Sd(n),p=Wa(h[1]-l[1]),f=Wa(h[0]-l[0]),y=Wa(l[1]),v=Wa(h[1]),C=Math.pow(Math.sin(p/2),2)+Math.pow(Math.sin(f/2),2)*Math.cos(y)*Math.cos(v);return Y1(2*Math.atan2(Math.sqrt(C),Math.sqrt(1-C)),s.units)}var Bd=6378137;function Pc(e){return Q1(e,function(n,s){return n+nb(s)},0)}function nb(e){var n=0,s;switch(e.type){case"Polygon":return Ad(e.coordinates);case"MultiPolygon":for(s=0;s<e.coordinates.length;s++)n+=Ad(e.coordinates[s]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function Ad(e){var n=0;if(e&&e.length>0){n+=Math.abs(Td(e[0]));for(var s=1;s<e.length;s++)n-=Math.abs(Td(e[s]))}return n}function Td(e){var n,s,l,h,p,f,y,v=0,C=e.length;if(C>2){for(y=0;y<C;y++)y===C-2?(h=C-2,p=C-1,f=0):y===C-1?(h=C-1,p=0,f=1):(h=y,p=y+1,f=y+2),n=e[h],s=e[p],l=e[f],v+=(ic(l[0])-ic(n[0]))*Math.sin(ic(s[1]));v=v*Bd*Bd/2}return v}function ic(e){return e*Math.PI/180}function vl(e,n){return n===void 0&&(n={}),ib(e,function(s,l){var h=l.geometry.coordinates;return s+Mc(h[0],h[1],n)},0)}const rb={class:"drawing-tools"},sb={class:"mb-4"},ob={class:"grid grid-cols-2 gap-2"},ab=["onClick"],lb={class:"text-sm"},ub={key:0,class:"space-y-2"},cb={class:"bg-gray-50 p-2 rounded text-sm"},hb={class:"font-medium"},db={key:0,class:"text-gray-600"},fb={class:"border rounded overflow-hidden"},pb={class:"p-3 space-y-3"},mb={class:"grid grid-cols-6 gap-2"},gb=["onClick"],_b={class:"space-y-2"},yb={class:"flex items-center gap-2"},vb={class:"flex items-center gap-2"},bb=["value"],xb={key:0,class:"flex items-center gap-2"},wb={class:"border rounded overflow-hidden"},Lb={class:"p-3"},Cb={class:"space-y-1 text-sm"},kb={key:0},Eb={key:1},Mb={key:2},Pb={key:3},Sb={key:4},Bb={key:5},Ab={key:6},Tb=Ki({__name:"DrawingTools",props:{currentTool:{},selectedShape:{}},emits:["tool-change","style-update","properties-update","delete-shape"],setup(e,{emit:n}){const s=e,l=n,h=[{type:"Circle",label:"Cercle"},{type:"Semicircle",label:"Demi-cercle"},{type:"Rectangle",label:"Rectangle"},{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"Text",label:"Texte"},{type:"delete",label:"Supprimer"}],p=["#2563EB","#DC2626","#059669","#D97706","#7C3AED","#DB2777"],f=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointill"},{value:"dashdot",label:"Tiret-point"}],y=Ze("#3B82F6"),v=Ze(.2),C=Ze("#2563EB"),P=Ze(1),M=Ze(2),j=Ze("solid"),W=Ze(0),D=Ze(0),V=Et(()=>{var xe,ve;return(ve=(xe=s.selectedShape)==null?void 0:xe.properties)!=null&&ve.type?["Circle","Rectangle","Polygon"].includes(s.selectedShape.properties.type):!1}),H=Ze(""),Ce=Ze(14),pe=Ze("#FFFFFF"),re=Ze(1),Ae=Ze("#000000"),$e=Ze(1),ge=Ze({style:!1,properties:!1});let Be=!1;const F=(xe,ve)=>Math.abs((xe||0)-(ve||0))>1e-4,X=(xe,ve)=>ve?F(xe.radius,ve.radius)||F(xe.area,ve.area)||F(xe.perimeter,ve.perimeter)||F(xe.width,ve.width)||F(xe.height,ve.height)||F(xe.length,ve.length):!0,_e=xe=>{ge.value[xe]=!ge.value[xe]},ee=Ze(null);$i(()=>{var xe;return[s.selectedShape,(xe=s.selectedShape)==null?void 0:xe.properties]},([xe])=>{if(!(Be||!xe))try{Be=!0;const ve=xe;if(!ve.properties||!ve.properties.type){console.warn("Invalid shape properties detected:",Rt(ve.properties));return}const Je=Rt(ve.properties),et=ve._lastProperties;if(et&&!X(Je,et)){console.log("No significant property changes detected");return}const nt={...Je};setTimeout(()=>{var Xe,Ee,Ke,qe,Ye,tt,$,Z,le,ze,je;try{ve._lastProperties={...nt},y.value=((Xe=ve.options)==null?void 0:Xe.fillColor)||"#3B82F6",v.value=((Ee=ve.options)==null?void 0:Ee.fillOpacity)||.2,C.value=((Ke=ve.options)==null?void 0:Ke.color)||"#2563EB",P.value=((qe=ve.options)==null?void 0:qe.opacity)||1,M.value=((Ye=ve.options)==null?void 0:Ye.weight)||2,j.value=Te(((tt=ve.options)==null?void 0:tt.dashArray)||""),W.value=nt.radius||0,D.value=nt.orientation||0,ve.properties.type==="text"&&(H.value=nt.text||"",Ce.value=(($=nt.style)==null?void 0:$.fontSize)||14,pe.value=((Z=nt.style)==null?void 0:Z.backgroundColor)||"#FFFFFF",re.value=((le=nt.style)==null?void 0:le.backgroundOpacity)||1,Ae.value=((ze=nt.style)==null?void 0:ze.borderColor)||"#000000",$e.value=((je=nt.style)==null?void 0:je.borderOpacity)||1),ee.value={...nt},ve.properties={...nt},l("properties-update",nt)}finally{Be=!1}},0)}catch(ve){console.error("Error in shape update:",ve),Be=!1}},{immediate:!0,deep:!0});const Re=xe=>{switch(xe){case"dashed":return"10,10";case"dotted":return"2,5";case"dashdot":return"10,5,2,5";default:return""}},Te=xe=>{if(!xe)return"solid";switch(xe){case"10,10":return"dashed";case"2,5":return"dotted";case"10,5,2,5":return"dashdot";default:return"solid"}},ie=xe=>{C.value=xe,V.value&&(y.value=xe),ke({strokeColor:xe,fillColor:V.value?xe:void 0})},ke=xe=>{const ve={...xe};xe.strokeStyle&&(ve.dashArray=Re(xe.strokeStyle)),xe.fillOpacity!==void 0&&(ve.fillOpacity=parseFloat(xe.fillOpacity)),xe.strokeOpacity!==void 0&&(ve.strokeOpacity=parseFloat(xe.strokeOpacity)),xe.strokeWidth!==void 0&&(ve.weight=parseInt(xe.strokeWidth)),xe.strokeColor&&(ve.color=xe.strokeColor),l("style-update",ve)},Ie={Circle:"Cercle",Rectangle:"Rectangle",Polygon:"Polygone",Line:"Ligne",Semicircle:"Demi-cercle",unknown:"Inconnu"},Me=Et(()=>{var xe,ve;return(ve=(xe=s.selectedShape)==null?void 0:xe.properties)!=null&&ve.type?s.selectedShape.properties.type:"unknown"}),q=Et(()=>Ie[Me.value]||"Non dfini"),te=xe=>xe<1e4?`${xe.toFixed(1)} m`:`${(xe/1e4).toFixed(2)} ha`,se=xe=>xe<1e3?`${xe.toFixed(1)} m`:`${(xe/1e3).toFixed(2)} km`;return(xe,ve)=>{var Je,et,nt,Xe,Ee,Ke,qe,Ye;return ce(),ye("div",rb,[w("div",sb,[w("div",ob,[(ce(!0),ye(Ct,null,It(h.filter(tt=>tt.type!=="delete"),tt=>(ce(),ye("button",{key:tt.type,class:Bi(["flex items-center justify-center p-2 rounded border",{"bg-blue-50 border-blue-200":xe.currentTool===tt.type,"hover:bg-gray-50 border-gray-200":xe.currentTool!==tt.type}]),onClick:$=>xe.$emit("tool-change",tt.type)},[w("span",lb,Ge(tt.label),1)],10,ab))),128))]),xe.selectedShape?(ce(),ye("button",{key:0,class:Bi(["w-full mt-2 flex items-center justify-center p-2 rounded border border-red-500 bg-red-50 hover:bg-red-100 text-red-700 transition-colors duration-200",{"bg-red-100 border-red-600":xe.currentTool==="delete"}]),onClick:ve[0]||(ve[0]=tt=>xe.$emit("delete-shape"))},ve[13]||(ve[13]=[w("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),w("span",{class:"text-sm font-medium"},"Supprimer la forme",-1)]),2)):ct("",!0)]),xe.selectedShape?(ce(),ye("div",ub,[w("div",cb,[w("div",hb,Ge(q.value),1),(Je=ee.value)!=null&&Je.area?(ce(),ye("div",db,Ge(te(ee.value.area)),1)):ct("",!0)]),w("div",fb,[w("button",{class:"w-full px-3 py-2 flex justify-between items-center bg-gray-50 hover:bg-gray-100",onClick:ve[1]||(ve[1]=tt=>_e("style"))},[ve[15]||(ve[15]=w("span",{class:"font-medium"},"Style",-1)),(ce(),ye("svg",{class:Bi(["w-5 h-5 transform transition-transform",{"rotate-180":!ge.value.style}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ve[14]||(ve[14]=[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),St(w("div",pb,[w("div",mb,[(ce(),ye(Ct,null,It(p,tt=>w("button",{key:tt,class:"w-6 h-6 rounded-full border hover:scale-110 transition-transform",style:kl({backgroundColor:tt}),onClick:$=>ie(tt)},null,12,gb)),64))]),w("div",_b,[w("div",yb,[ve[16]||(ve[16]=w("span",{class:"text-xs text-gray-500"},"Contour",-1)),St(w("input",{type:"color","onUpdate:modelValue":ve[2]||(ve[2]=tt=>C.value=tt),class:"w-6 h-6",onChange:ve[3]||(ve[3]=tt=>ke({strokeColor:C.value})),title:"Couleur du contour"},null,544),[[Yt,C.value]]),St(w("input",{type:"range","onUpdate:modelValue":ve[4]||(ve[4]=tt=>M.value=tt),min:"1",max:"10",class:"flex-1",onChange:ve[5]||(ve[5]=tt=>ke({strokeWidth:M.value})),title:"paisseur du contour"},null,544),[[Yt,M.value]])]),w("div",vb,[ve[17]||(ve[17]=w("span",{class:"text-xs text-gray-500"},"Style",-1)),St(w("select",{"onUpdate:modelValue":ve[6]||(ve[6]=tt=>j.value=tt),class:"flex-1 text-sm border rounded px-1 py-0.5",onChange:ve[7]||(ve[7]=tt=>ke({strokeStyle:j.value}))},[(ce(),ye(Ct,null,It(f,tt=>w("option",{key:tt.value,value:tt.value},Ge(tt.label),9,bb)),64))],544),[[Qi,j.value]])]),V.value?(ce(),ye("div",xb,[ve[18]||(ve[18]=w("span",{class:"text-xs text-gray-500"},"Remplissage",-1)),St(w("input",{type:"color","onUpdate:modelValue":ve[8]||(ve[8]=tt=>y.value=tt),class:"w-6 h-6",onChange:ve[9]||(ve[9]=tt=>ke({fillColor:y.value})),title:"Couleur de remplissage"},null,544),[[Yt,y.value]]),St(w("input",{type:"range","onUpdate:modelValue":ve[10]||(ve[10]=tt=>v.value=tt),min:"0",max:"1",step:"0.1",class:"flex-1",onChange:ve[11]||(ve[11]=tt=>ke({fillOpacity:v.value})),title:"Opacit du remplissage"},null,544),[[Yt,v.value]])])):ct("",!0)])],512),[[Sh,!ge.value.style]])]),w("div",wb,[w("button",{class:"w-full px-3 py-2 flex justify-between items-center bg-gray-50 hover:bg-gray-100",onClick:ve[12]||(ve[12]=tt=>_e("properties"))},[ve[20]||(ve[20]=w("span",{class:"font-medium"},"Proprits",-1)),(ce(),ye("svg",{class:Bi(["w-5 h-5 transform transition-transform",{"rotate-180":!ge.value.properties}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ve[19]||(ve[19]=[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),St(w("div",Lb,[w("div",Cb,[(et=ee.value)!=null&&et.surfaceInterieure?(ce(),ye("div",kb," Surface intrieure: "+Ge(te(ee.value.surfaceInterieure)),1)):ct("",!0),(nt=ee.value)!=null&&nt.surfaceExterieure?(ce(),ye("div",Eb," Surface extrieure: "+Ge(te(ee.value.surfaceExterieure)),1)):ct("",!0),(Xe=ee.value)!=null&&Xe.length?(ce(),ye("div",Mb," Longueur: "+Ge(se(ee.value.length)),1)):ct("",!0),(Ee=ee.value)!=null&&Ee.perimeter?(ce(),ye("div",Pb," Primtre: "+Ge(se(ee.value.perimeter)),1)):ct("",!0),(Ke=ee.value)!=null&&Ke.radius?(ce(),ye("div",Sb," Rayon: "+Ge(se(ee.value.radius)),1)):ct("",!0),(qe=ee.value)!=null&&qe.width?(ce(),ye("div",Bb," Largeur: "+Ge(se(ee.value.width)),1)):ct("",!0),(Ye=ee.value)!=null&&Ye.height?(ce(),ye("div",Ab," Hauteur: "+Ge(se(ee.value.height)),1)):ct("",!0)])],512),[[Sh,!ge.value.properties]])])])):ct("",!0)])}}}),Db=$p(Tb,[["__scopeId","data-v-98cb7951"]]);(()=>{var lh,uh;var e=Object.create,n=Object.defineProperty,s=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,h=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,f=(i,r)=>()=>(r||i((r={exports:{}}).exports,r),r.exports),y=(i,r,a,u)=>{if(r&&typeof r=="object"||typeof r=="function")for(let d of l(r))!p.call(i,d)&&d!==a&&n(i,d,{get:()=>r[d],enumerable:!(u=s(r,d))||u.enumerable});return i},v=(i,r,a)=>(a=i!=null?e(h(i)):{},y(r||!i||!i.__esModule?n(a,"default",{value:i,enumerable:!0}):a,i)),C=f((i,r)=>{function a(){this.__data__=[],this.size=0}r.exports=a}),P=f((i,r)=>{function a(u,d){return u===d||u!==u&&d!==d}r.exports=a}),M=f((i,r)=>{var a=P();function u(d,g){for(var _=d.length;_--;)if(a(d[_][0],g))return _;return-1}r.exports=u}),j=f((i,r)=>{var a=M(),u=Array.prototype,d=u.splice;function g(_){var b=this.__data__,k=a(b,_);if(k<0)return!1;var S=b.length-1;return k==S?b.pop():d.call(b,k,1),--this.size,!0}r.exports=g}),W=f((i,r)=>{var a=M();function u(d){var g=this.__data__,_=a(g,d);return _<0?void 0:g[_][1]}r.exports=u}),D=f((i,r)=>{var a=M();function u(d){return a(this.__data__,d)>-1}r.exports=u}),V=f((i,r)=>{var a=M();function u(d,g){var _=this.__data__,b=a(_,d);return b<0?(++this.size,_.push([d,g])):_[b][1]=g,this}r.exports=u}),H=f((i,r)=>{var a=C(),u=j(),d=W(),g=D(),_=V();function b(k){var S=-1,U=k==null?0:k.length;for(this.clear();++S<U;){var N=k[S];this.set(N[0],N[1])}}b.prototype.clear=a,b.prototype.delete=u,b.prototype.get=d,b.prototype.has=g,b.prototype.set=_,r.exports=b}),Ce=f((i,r)=>{var a=H();function u(){this.__data__=new a,this.size=0}r.exports=u}),pe=f((i,r)=>{function a(u){var d=this.__data__,g=d.delete(u);return this.size=d.size,g}r.exports=a}),re=f((i,r)=>{function a(u){return this.__data__.get(u)}r.exports=a}),Ae=f((i,r)=>{function a(u){return this.__data__.has(u)}r.exports=a}),$e=f((i,r)=>{var a=typeof nr=="object"&&nr&&nr.Object===Object&&nr;r.exports=a}),ge=f((i,r)=>{var a=$e(),u=typeof self=="object"&&self&&self.Object===Object&&self,d=a||u||Function("return this")();r.exports=d}),Be=f((i,r)=>{var a=ge(),u=a.Symbol;r.exports=u}),F=f((i,r)=>{var a=Be(),u=Object.prototype,d=u.hasOwnProperty,g=u.toString,_=a?a.toStringTag:void 0;function b(k){var S=d.call(k,_),U=k[_];try{k[_]=void 0;var N=!0}catch{}var me=g.call(k);return N&&(S?k[_]=U:delete k[_]),me}r.exports=b}),X=f((i,r)=>{var a=Object.prototype,u=a.toString;function d(g){return u.call(g)}r.exports=d}),_e=f((i,r)=>{var a=Be(),u=F(),d=X(),g="[object Null]",_="[object Undefined]",b=a?a.toStringTag:void 0;function k(S){return S==null?S===void 0?_:g:b&&b in Object(S)?u(S):d(S)}r.exports=k}),ee=f((i,r)=>{function a(u){var d=typeof u;return u!=null&&(d=="object"||d=="function")}r.exports=a}),Re=f((i,r)=>{var a=_e(),u=ee(),d="[object AsyncFunction]",g="[object Function]",_="[object GeneratorFunction]",b="[object Proxy]";function k(S){if(!u(S))return!1;var U=a(S);return U==g||U==_||U==d||U==b}r.exports=k}),Te=f((i,r)=>{var a=ge(),u=a["__core-js_shared__"];r.exports=u}),ie=f((i,r)=>{var a=Te(),u=function(){var g=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}();function d(g){return!!u&&u in g}r.exports=d}),ke=f((i,r)=>{var a=Function.prototype,u=a.toString;function d(g){if(g!=null){try{return u.call(g)}catch{}try{return g+""}catch{}}return""}r.exports=d}),Ie=f((i,r)=>{var a=Re(),u=ie(),d=ee(),g=ke(),_=/[\\^$.*+?()[\]{}|]/g,b=/^\[object .+?Constructor\]$/,k=Function.prototype,S=Object.prototype,U=k.toString,N=S.hasOwnProperty,me=RegExp("^"+U.call(N).replace(_,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function we(He){if(!d(He)||u(He))return!1;var Qe=a(He)?me:b;return Qe.test(g(He))}r.exports=we}),Me=f((i,r)=>{function a(u,d){return u==null?void 0:u[d]}r.exports=a}),q=f((i,r)=>{var a=Ie(),u=Me();function d(g,_){var b=u(g,_);return a(b)?b:void 0}r.exports=d}),te=f((i,r)=>{var a=q(),u=ge(),d=a(u,"Map");r.exports=d}),se=f((i,r)=>{var a=q(),u=a(Object,"create");r.exports=u}),xe=f((i,r)=>{var a=se();function u(){this.__data__=a?a(null):{},this.size=0}r.exports=u}),ve=f((i,r)=>{function a(u){var d=this.has(u)&&delete this.__data__[u];return this.size-=d?1:0,d}r.exports=a}),Je=f((i,r)=>{var a=se(),u="__lodash_hash_undefined__",d=Object.prototype,g=d.hasOwnProperty;function _(b){var k=this.__data__;if(a){var S=k[b];return S===u?void 0:S}return g.call(k,b)?k[b]:void 0}r.exports=_}),et=f((i,r)=>{var a=se(),u=Object.prototype,d=u.hasOwnProperty;function g(_){var b=this.__data__;return a?b[_]!==void 0:d.call(b,_)}r.exports=g}),nt=f((i,r)=>{var a=se(),u="__lodash_hash_undefined__";function d(g,_){var b=this.__data__;return this.size+=this.has(g)?0:1,b[g]=a&&_===void 0?u:_,this}r.exports=d}),Xe=f((i,r)=>{var a=xe(),u=ve(),d=Je(),g=et(),_=nt();function b(k){var S=-1,U=k==null?0:k.length;for(this.clear();++S<U;){var N=k[S];this.set(N[0],N[1])}}b.prototype.clear=a,b.prototype.delete=u,b.prototype.get=d,b.prototype.has=g,b.prototype.set=_,r.exports=b}),Ee=f((i,r)=>{var a=Xe(),u=H(),d=te();function g(){this.size=0,this.__data__={hash:new a,map:new(d||u),string:new a}}r.exports=g}),Ke=f((i,r)=>{function a(u){var d=typeof u;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?u!=="__proto__":u===null}r.exports=a}),qe=f((i,r)=>{var a=Ke();function u(d,g){var _=d.__data__;return a(g)?_[typeof g=="string"?"string":"hash"]:_.map}r.exports=u}),Ye=f((i,r)=>{var a=qe();function u(d){var g=a(this,d).delete(d);return this.size-=g?1:0,g}r.exports=u}),tt=f((i,r)=>{var a=qe();function u(d){return a(this,d).get(d)}r.exports=u}),$=f((i,r)=>{var a=qe();function u(d){return a(this,d).has(d)}r.exports=u}),Z=f((i,r)=>{var a=qe();function u(d,g){var _=a(this,d),b=_.size;return _.set(d,g),this.size+=_.size==b?0:1,this}r.exports=u}),le=f((i,r)=>{var a=Ee(),u=Ye(),d=tt(),g=$(),_=Z();function b(k){var S=-1,U=k==null?0:k.length;for(this.clear();++S<U;){var N=k[S];this.set(N[0],N[1])}}b.prototype.clear=a,b.prototype.delete=u,b.prototype.get=d,b.prototype.has=g,b.prototype.set=_,r.exports=b}),ze=f((i,r)=>{var a=H(),u=te(),d=le(),g=200;function _(b,k){var S=this.__data__;if(S instanceof a){var U=S.__data__;if(!u||U.length<g-1)return U.push([b,k]),this.size=++S.size,this;S=this.__data__=new d(U)}return S.set(b,k),this.size=S.size,this}r.exports=_}),je=f((i,r)=>{var a=H(),u=Ce(),d=pe(),g=re(),_=Ae(),b=ze();function k(S){var U=this.__data__=new a(S);this.size=U.size}k.prototype.clear=u,k.prototype.delete=d,k.prototype.get=g,k.prototype.has=_,k.prototype.set=b,r.exports=k}),ue=f((i,r)=>{var a=q(),u=function(){try{var d=a(Object,"defineProperty");return d({},"",{}),d}catch{}}();r.exports=u}),G=f((i,r)=>{var a=ue();function u(d,g,_){g=="__proto__"&&a?a(d,g,{configurable:!0,enumerable:!0,value:_,writable:!0}):d[g]=_}r.exports=u}),Oe=f((i,r)=>{var a=G(),u=P();function d(g,_,b){(b!==void 0&&!u(g[_],b)||b===void 0&&!(_ in g))&&a(g,_,b)}r.exports=d}),Ne=f((i,r)=>{function a(u){return function(d,g,_){for(var b=-1,k=Object(d),S=_(d),U=S.length;U--;){var N=S[u?U:++b];if(g(k[N],N,k)===!1)break}return d}}r.exports=a}),Fe=f((i,r)=>{var a=Ne(),u=a();r.exports=u}),Pe=f((i,r)=>{var a=ge(),u=typeof i=="object"&&i&&!i.nodeType&&i,d=u&&typeof r=="object"&&r&&!r.nodeType&&r,g=d&&d.exports===u,_=g?a.Buffer:void 0,b=_?_.allocUnsafe:void 0;function k(S,U){if(U)return S.slice();var N=S.length,me=b?b(N):new S.constructor(N);return S.copy(me),me}r.exports=k}),We=f((i,r)=>{var a=ge(),u=a.Uint8Array;r.exports=u}),at=f((i,r)=>{var a=We();function u(d){var g=new d.constructor(d.byteLength);return new a(g).set(new a(d)),g}r.exports=u}),ft=f((i,r)=>{var a=at();function u(d,g){var _=g?a(d.buffer):d.buffer;return new d.constructor(_,d.byteOffset,d.length)}r.exports=u}),yt=f((i,r)=>{function a(u,d){var g=-1,_=u.length;for(d||(d=Array(_));++g<_;)d[g]=u[g];return d}r.exports=a}),Tt=f((i,r)=>{var a=ee(),u=Object.create,d=function(){function g(){}return function(_){if(!a(_))return{};if(u)return u(_);g.prototype=_;var b=new g;return g.prototype=void 0,b}}();r.exports=d}),Pt=f((i,r)=>{function a(u,d){return function(g){return u(d(g))}}r.exports=a}),ri=f((i,r)=>{var a=Pt(),u=a(Object.getPrototypeOf,Object);r.exports=u}),$t=f((i,r)=>{var a=Object.prototype;function u(d){var g=d&&d.constructor,_=typeof g=="function"&&g.prototype||a;return d===_}r.exports=u}),Ti=f((i,r)=>{var a=Tt(),u=ri(),d=$t();function g(_){return typeof _.constructor=="function"&&!d(_)?a(u(_)):{}}r.exports=g}),ui=f((i,r)=>{function a(u){return u!=null&&typeof u=="object"}r.exports=a}),Cn=f((i,r)=>{var a=_e(),u=ui(),d="[object Arguments]";function g(_){return u(_)&&a(_)==d}r.exports=g}),zn=f((i,r)=>{var a=Cn(),u=ui(),d=Object.prototype,g=d.hasOwnProperty,_=d.propertyIsEnumerable,b=a(function(){return arguments}())?a:function(k){return u(k)&&g.call(k,"callee")&&!_.call(k,"callee")};r.exports=b}),Qt=f((i,r)=>{var a=Array.isArray;r.exports=a}),Di=f((i,r)=>{var a=9007199254740991;function u(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=a}r.exports=u}),nn=f((i,r)=>{var a=Re(),u=Di();function d(g){return g!=null&&u(g.length)&&!a(g)}r.exports=d}),Vl=f((i,r)=>{var a=nn(),u=ui();function d(g){return u(g)&&a(g)}r.exports=d}),Hl=f((i,r)=>{function a(){return!1}r.exports=a}),Ks=f((i,r)=>{var a=ge(),u=Hl(),d=typeof i=="object"&&i&&!i.nodeType&&i,g=d&&typeof r=="object"&&r&&!r.nodeType&&r,_=g&&g.exports===d,b=_?a.Buffer:void 0,k=b?b.isBuffer:void 0,S=k||u;r.exports=S}),sa=f((i,r)=>{var a=_e(),u=ri(),d=ui(),g="[object Object]",_=Function.prototype,b=Object.prototype,k=_.toString,S=b.hasOwnProperty,U=k.call(Object);function N(me){if(!d(me)||a(me)!=g)return!1;var we=u(me);if(we===null)return!0;var He=S.call(we,"constructor")&&we.constructor;return typeof He=="function"&&He instanceof He&&k.call(He)==U}r.exports=N}),oa=f((i,r)=>{var a=_e(),u=Di(),d=ui(),g="[object Arguments]",_="[object Array]",b="[object Boolean]",k="[object Date]",S="[object Error]",U="[object Function]",N="[object Map]",me="[object Number]",we="[object Object]",He="[object RegExp]",Qe="[object Set]",ot="[object String]",At="[object WeakMap]",z="[object ArrayBuffer]",J="[object DataView]",oe="[object Float32Array]",Le="[object Float64Array]",ae="[object Int8Array]",be="[object Int16Array]",E="[object Int32Array]",A="[object Uint8Array]",R="[object Uint8ClampedArray]",T="[object Uint16Array]",O="[object Uint32Array]",I={};I[oe]=I[Le]=I[ae]=I[be]=I[E]=I[A]=I[R]=I[T]=I[O]=!0,I[g]=I[_]=I[z]=I[b]=I[J]=I[k]=I[S]=I[U]=I[N]=I[me]=I[we]=I[He]=I[Qe]=I[ot]=I[At]=!1;function Q(Y){return d(Y)&&u(Y.length)&&!!I[a(Y)]}r.exports=Q}),Zl=f((i,r)=>{function a(u){return function(d){return u(d)}}r.exports=a}),ql=f((i,r)=>{var a=$e(),u=typeof i=="object"&&i&&!i.nodeType&&i,d=u&&typeof r=="object"&&r&&!r.nodeType&&r,g=d&&d.exports===u,_=g&&a.process,b=function(){try{var k=d&&d.require&&d.require("util").types;return k||_&&_.binding&&_.binding("util")}catch{}}();r.exports=b}),aa=f((i,r)=>{var a=oa(),u=Zl(),d=ql(),g=d&&d.isTypedArray,_=g?u(g):a;r.exports=_}),la=f((i,r)=>{function a(u,d){if(!(d==="constructor"&&typeof u[d]=="function")&&d!="__proto__")return u[d]}r.exports=a}),Kl=f((i,r)=>{var a=G(),u=P(),d=Object.prototype,g=d.hasOwnProperty;function _(b,k,S){var U=b[k];(!(g.call(b,k)&&u(U,S))||S===void 0&&!(k in b))&&a(b,k,S)}r.exports=_}),Wl=f((i,r)=>{var a=Kl(),u=G();function d(g,_,b,k){var S=!b;b||(b={});for(var U=-1,N=_.length;++U<N;){var me=_[U],we=k?k(b[me],g[me],me,b,g):void 0;we===void 0&&(we=g[me]),S?u(b,me,we):a(b,me,we)}return b}r.exports=d}),Ws=f((i,r)=>{function a(u,d){for(var g=-1,_=Array(u);++g<u;)_[g]=d(g);return _}r.exports=a}),ua=f((i,r)=>{var a=9007199254740991,u=/^(?:0|[1-9]\d*)$/;function d(g,_){var b=typeof g;return _=_??a,!!_&&(b=="number"||b!="symbol"&&u.test(g))&&g>-1&&g%1==0&&g<_}r.exports=d}),Jl=f((i,r)=>{var a=Ws(),u=zn(),d=Qt(),g=Ks(),_=ua(),b=aa(),k=Object.prototype,S=k.hasOwnProperty;function U(N,me){var we=d(N),He=!we&&u(N),Qe=!we&&!He&&g(N),ot=!we&&!He&&!Qe&&b(N),At=we||He||Qe||ot,z=At?a(N.length,String):[],J=z.length;for(var oe in N)(me||S.call(N,oe))&&!(At&&(oe=="length"||Qe&&(oe=="offset"||oe=="parent")||ot&&(oe=="buffer"||oe=="byteLength"||oe=="byteOffset")||_(oe,J)))&&z.push(oe);return z}r.exports=U}),Xl=f((i,r)=>{function a(u){var d=[];if(u!=null)for(var g in Object(u))d.push(g);return d}r.exports=a}),Yl=f((i,r)=>{var a=ee(),u=$t(),d=Xl(),g=Object.prototype,_=g.hasOwnProperty;function b(k){if(!a(k))return d(k);var S=u(k),U=[];for(var N in k)N=="constructor"&&(S||!_.call(k,N))||U.push(N);return U}r.exports=b}),Wi=f((i,r)=>{var a=Jl(),u=Yl(),d=nn();function g(_){return d(_)?a(_,!0):u(_)}r.exports=g}),ht=f((i,r)=>{var a=Wl(),u=Wi();function d(g){return a(g,u(g))}r.exports=d}),ca=f((i,r)=>{var a=Oe(),u=Pe(),d=ft(),g=yt(),_=Ti(),b=zn(),k=Qt(),S=Vl(),U=Ks(),N=Re(),me=ee(),we=sa(),He=aa(),Qe=la(),ot=ht();function At(z,J,oe,Le,ae,be,E){var A=Qe(z,oe),R=Qe(J,oe),T=E.get(R);if(T){a(z,oe,T);return}var O=be?be(A,R,oe+"",z,J,E):void 0,I=O===void 0;if(I){var Q=k(R),Y=!Q&&U(R),ne=!Q&&!Y&&He(R);O=R,Q||Y||ne?k(A)?O=A:S(A)?O=g(A):Y?(I=!1,O=u(R,!0)):ne?(I=!1,O=d(R,!0)):O=[]:we(R)||b(R)?(O=A,b(A)?O=ot(A):(!me(A)||N(A))&&(O=_(R))):I=!1}I&&(E.set(R,O),ae(O,R,Le,be,E),E.delete(R)),a(z,oe,O)}r.exports=At}),ha=f((i,r)=>{var a=je(),u=Oe(),d=Fe(),g=ca(),_=ee(),b=Wi(),k=la();function S(U,N,me,we,He){U!==N&&d(N,function(Qe,ot){if(He||(He=new a),_(Qe))g(U,N,ot,me,S,we,He);else{var At=we?we(k(U,ot),Qe,ot+"",U,N,He):void 0;At===void 0&&(At=Qe),u(U,ot,At)}},b)}r.exports=S}),Js=f((i,r)=>{function a(u){return u}r.exports=a}),da=f((i,r)=>{function a(u,d,g){switch(g.length){case 0:return u.call(d);case 1:return u.call(d,g[0]);case 2:return u.call(d,g[0],g[1]);case 3:return u.call(d,g[0],g[1],g[2])}return u.apply(d,g)}r.exports=a}),Xs=f((i,r)=>{var a=da(),u=Math.max;function d(g,_,b){return _=u(_===void 0?g.length-1:_,0),function(){for(var k=arguments,S=-1,U=u(k.length-_,0),N=Array(U);++S<U;)N[S]=k[_+S];S=-1;for(var me=Array(_+1);++S<_;)me[S]=k[S];return me[_]=b(N),a(g,this,me)}}r.exports=d}),fa=f((i,r)=>{function a(u){return function(){return u}}r.exports=a}),ar=f((i,r)=>{var a=fa(),u=ue(),d=Js(),g=u?function(_,b){return u(_,"toString",{configurable:!0,enumerable:!1,value:a(b),writable:!0})}:d;r.exports=g}),pa=f((i,r)=>{var a=800,u=16,d=Date.now;function g(_){var b=0,k=0;return function(){var S=d(),U=u-(S-k);if(k=S,U>0){if(++b>=a)return arguments[0]}else b=0;return _.apply(void 0,arguments)}}r.exports=g}),Ql=f((i,r)=>{var a=ar(),u=pa(),d=u(a);r.exports=d}),eu=f((i,r)=>{var a=Js(),u=Xs(),d=Ql();function g(_,b){return d(u(_,b,a),_+"")}r.exports=g}),tu=f((i,r)=>{var a=P(),u=nn(),d=ua(),g=ee();function _(b,k,S){if(!g(S))return!1;var U=typeof k;return(U=="number"?u(S)&&d(k,S.length):U=="string"&&k in S)?a(S[k],b):!1}r.exports=_}),iu=f((i,r)=>{var a=eu(),u=tu();function d(g){return a(function(_,b){var k=-1,S=b.length,U=S>1?b[S-1]:void 0,N=S>2?b[2]:void 0;for(U=g.length>3&&typeof U=="function"?(S--,U):void 0,N&&u(b[0],b[1],N)&&(U=S<3?void 0:U,S=1),_=Object(_);++k<S;){var me=b[k];me&&g(_,me,k,U)}return _})}r.exports=d}),is=f((i,r)=>{var a=ha(),u=iu(),d=u(function(g,_,b){a(g,_,b)});r.exports=d}),Ys=f((i,r)=>{var a=_e(),u=ui(),d="[object Symbol]";function g(_){return typeof _=="symbol"||u(_)&&a(_)==d}r.exports=g}),ns=f((i,r)=>{var a=Qt(),u=Ys(),d=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,g=/^\w*$/;function _(b,k){if(a(b))return!1;var S=typeof b;return S=="number"||S=="symbol"||S=="boolean"||b==null||u(b)?!0:g.test(b)||!d.test(b)||k!=null&&b in Object(k)}r.exports=_}),nu=f((i,r)=>{var a=le(),u="Expected a function";function d(g,_){if(typeof g!="function"||_!=null&&typeof _!="function")throw new TypeError(u);var b=function(){var k=arguments,S=_?_.apply(this,k):k[0],U=b.cache;if(U.has(S))return U.get(S);var N=g.apply(this,k);return b.cache=U.set(S,N)||U,N};return b.cache=new(d.Cache||a),b}d.Cache=a,r.exports=d}),ru=f((i,r)=>{var a=nu(),u=500;function d(g){var _=a(g,function(k){return b.size===u&&b.clear(),k}),b=_.cache;return _}r.exports=d}),su=f((i,r)=>{var a=ru(),u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,d=/\\(\\)?/g,g=a(function(_){var b=[];return _.charCodeAt(0)===46&&b.push(""),_.replace(u,function(k,S,U,N){b.push(U?N.replace(d,"$1"):S||k)}),b});r.exports=g}),ou=f((i,r)=>{function a(u,d){for(var g=-1,_=u==null?0:u.length,b=Array(_);++g<_;)b[g]=d(u[g],g,u);return b}r.exports=a}),au=f((i,r)=>{var a=Be(),u=ou(),d=Qt(),g=Ys(),_=a?a.prototype:void 0,b=_?_.toString:void 0;function k(S){if(typeof S=="string")return S;if(d(S))return u(S,k)+"";if(g(S))return b?b.call(S):"";var U=S+"";return U=="0"&&1/S==-1/0?"-0":U}r.exports=k}),Qs=f((i,r)=>{var a=au();function u(d){return d==null?"":a(d)}r.exports=u}),Pr=f((i,r)=>{var a=Qt(),u=ns(),d=su(),g=Qs();function _(b,k){return a(b)?b:u(b,k)?[b]:d(g(b))}r.exports=_}),ma=f((i,r)=>{var a=Ys();function u(d){if(typeof d=="string"||a(d))return d;var g=d+"";return g=="0"&&1/d==-1/0?"-0":g}r.exports=u}),ga=f((i,r)=>{var a=Pr(),u=ma();function d(g,_){_=a(_,g);for(var b=0,k=_.length;g!=null&&b<k;)g=g[u(_[b++])];return b&&b==k?g:void 0}r.exports=d}),kn=f((i,r)=>{var a=ga();function u(d,g,_){var b=d==null?void 0:a(d,g);return b===void 0?_:b}r.exports=u}),Dt=f((i,r)=>{(function(a,u){typeof i=="object"&&typeof r<"u"?r.exports=u():(a=a||self).RBush=u()})(i,function(){function a(z,J,oe,Le,ae){(function be(E,A,R,T,O){for(;T>R;){if(T-R>600){var I=T-R+1,Q=A-R+1,Y=Math.log(I),ne=.5*Math.exp(2*Y/3),fe=.5*Math.sqrt(Y*ne*(I-ne)/I)*(Q-I/2<0?-1:1),de=Math.max(R,Math.floor(A-Q*ne/I+fe)),Ue=Math.min(T,Math.floor(A+(I-Q)*ne/I+fe));be(E,A,de,Ue,O)}var rt=E[A],lt=R,dt=T;for(u(E,R,A),O(E[T],rt)>0&&u(E,R,T);lt<dt;){for(u(E,lt,dt),lt++,dt--;O(E[lt],rt)<0;)lt++;for(;O(E[dt],rt)>0;)dt--}O(E[R],rt)===0?u(E,R,dt):u(E,++dt,T),dt<=A&&(R=dt+1),A<=dt&&(T=dt-1)}})(z,J,oe||0,Le||z.length-1,ae||d)}function u(z,J,oe){var Le=z[J];z[J]=z[oe],z[oe]=Le}function d(z,J){return z<J?-1:z>J?1:0}var g=function(z){z===void 0&&(z=9),this._maxEntries=Math.max(4,z),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function _(z,J,oe){if(!oe)return J.indexOf(z);for(var Le=0;Le<J.length;Le++)if(oe(z,J[Le]))return Le;return-1}function b(z,J){k(z,0,z.children.length,J,z)}function k(z,J,oe,Le,ae){ae||(ae=ot(null)),ae.minX=1/0,ae.minY=1/0,ae.maxX=-1/0,ae.maxY=-1/0;for(var be=J;be<oe;be++){var E=z.children[be];S(ae,z.leaf?Le(E):E)}return ae}function S(z,J){return z.minX=Math.min(z.minX,J.minX),z.minY=Math.min(z.minY,J.minY),z.maxX=Math.max(z.maxX,J.maxX),z.maxY=Math.max(z.maxY,J.maxY),z}function U(z,J){return z.minX-J.minX}function N(z,J){return z.minY-J.minY}function me(z){return(z.maxX-z.minX)*(z.maxY-z.minY)}function we(z){return z.maxX-z.minX+(z.maxY-z.minY)}function He(z,J){return z.minX<=J.minX&&z.minY<=J.minY&&J.maxX<=z.maxX&&J.maxY<=z.maxY}function Qe(z,J){return J.minX<=z.maxX&&J.minY<=z.maxY&&J.maxX>=z.minX&&J.maxY>=z.minY}function ot(z){return{children:z,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function At(z,J,oe,Le,ae){for(var be=[J,oe];be.length;)if(!((oe=be.pop())-(J=be.pop())<=Le)){var E=J+Math.ceil((oe-J)/Le/2)*Le;a(z,E,J,oe,ae),be.push(J,E,E,oe)}}return g.prototype.all=function(){return this._all(this.data,[])},g.prototype.search=function(z){var J=this.data,oe=[];if(!Qe(z,J))return oe;for(var Le=this.toBBox,ae=[];J;){for(var be=0;be<J.children.length;be++){var E=J.children[be],A=J.leaf?Le(E):E;Qe(z,A)&&(J.leaf?oe.push(E):He(z,A)?this._all(E,oe):ae.push(E))}J=ae.pop()}return oe},g.prototype.collides=function(z){var J=this.data;if(!Qe(z,J))return!1;for(var oe=[];J;){for(var Le=0;Le<J.children.length;Le++){var ae=J.children[Le],be=J.leaf?this.toBBox(ae):ae;if(Qe(z,be)){if(J.leaf||He(z,be))return!0;oe.push(ae)}}J=oe.pop()}return!1},g.prototype.load=function(z){if(!z||!z.length)return this;if(z.length<this._minEntries){for(var J=0;J<z.length;J++)this.insert(z[J]);return this}var oe=this._build(z.slice(),0,z.length-1,0);if(this.data.children.length)if(this.data.height===oe.height)this._splitRoot(this.data,oe);else{if(this.data.height<oe.height){var Le=this.data;this.data=oe,oe=Le}this._insert(oe,this.data.height-oe.height-1,!0)}else this.data=oe;return this},g.prototype.insert=function(z){return z&&this._insert(z,this.data.height-1),this},g.prototype.clear=function(){return this.data=ot([]),this},g.prototype.remove=function(z,J){if(!z)return this;for(var oe,Le,ae,be=this.data,E=this.toBBox(z),A=[],R=[];be||A.length;){if(be||(be=A.pop(),Le=A[A.length-1],oe=R.pop(),ae=!0),be.leaf){var T=_(z,be.children,J);if(T!==-1)return be.children.splice(T,1),A.push(be),this._condense(A),this}ae||be.leaf||!He(be,E)?Le?(oe++,be=Le.children[oe],ae=!1):be=null:(A.push(be),R.push(oe),oe=0,Le=be,be=be.children[0])}return this},g.prototype.toBBox=function(z){return z},g.prototype.compareMinX=function(z,J){return z.minX-J.minX},g.prototype.compareMinY=function(z,J){return z.minY-J.minY},g.prototype.toJSON=function(){return this.data},g.prototype.fromJSON=function(z){return this.data=z,this},g.prototype._all=function(z,J){for(var oe=[];z;)z.leaf?J.push.apply(J,z.children):oe.push.apply(oe,z.children),z=oe.pop();return J},g.prototype._build=function(z,J,oe,Le){var ae,be=oe-J+1,E=this._maxEntries;if(be<=E)return b(ae=ot(z.slice(J,oe+1)),this.toBBox),ae;Le||(Le=Math.ceil(Math.log(be)/Math.log(E)),E=Math.ceil(be/Math.pow(E,Le-1))),(ae=ot([])).leaf=!1,ae.height=Le;var A=Math.ceil(be/E),R=A*Math.ceil(Math.sqrt(E));At(z,J,oe,R,this.compareMinX);for(var T=J;T<=oe;T+=R){var O=Math.min(T+R-1,oe);At(z,T,O,A,this.compareMinY);for(var I=T;I<=O;I+=A){var Q=Math.min(I+A-1,O);ae.children.push(this._build(z,I,Q,Le-1))}}return b(ae,this.toBBox),ae},g.prototype._chooseSubtree=function(z,J,oe,Le){for(;Le.push(J),!J.leaf&&Le.length-1!==oe;){for(var ae=1/0,be=1/0,E=void 0,A=0;A<J.children.length;A++){var R=J.children[A],T=me(R),O=(I=z,Q=R,(Math.max(Q.maxX,I.maxX)-Math.min(Q.minX,I.minX))*(Math.max(Q.maxY,I.maxY)-Math.min(Q.minY,I.minY))-T);O<be?(be=O,ae=T<ae?T:ae,E=R):O===be&&T<ae&&(ae=T,E=R)}J=E||J.children[0]}var I,Q;return J},g.prototype._insert=function(z,J,oe){var Le=oe?z:this.toBBox(z),ae=[],be=this._chooseSubtree(Le,this.data,J,ae);for(be.children.push(z),S(be,Le);J>=0&&ae[J].children.length>this._maxEntries;)this._split(ae,J),J--;this._adjustParentBBoxes(Le,ae,J)},g.prototype._split=function(z,J){var oe=z[J],Le=oe.children.length,ae=this._minEntries;this._chooseSplitAxis(oe,ae,Le);var be=this._chooseSplitIndex(oe,ae,Le),E=ot(oe.children.splice(be,oe.children.length-be));E.height=oe.height,E.leaf=oe.leaf,b(oe,this.toBBox),b(E,this.toBBox),J?z[J-1].children.push(E):this._splitRoot(oe,E)},g.prototype._splitRoot=function(z,J){this.data=ot([z,J]),this.data.height=z.height+1,this.data.leaf=!1,b(this.data,this.toBBox)},g.prototype._chooseSplitIndex=function(z,J,oe){for(var Le,ae,be,E,A,R,T,O=1/0,I=1/0,Q=J;Q<=oe-J;Q++){var Y=k(z,0,Q,this.toBBox),ne=k(z,Q,oe,this.toBBox),fe=(ae=Y,be=ne,E=void 0,A=void 0,R=void 0,T=void 0,E=Math.max(ae.minX,be.minX),A=Math.max(ae.minY,be.minY),R=Math.min(ae.maxX,be.maxX),T=Math.min(ae.maxY,be.maxY),Math.max(0,R-E)*Math.max(0,T-A)),de=me(Y)+me(ne);fe<O?(O=fe,Le=Q,I=de<I?de:I):fe===O&&de<I&&(I=de,Le=Q)}return Le||oe-J},g.prototype._chooseSplitAxis=function(z,J,oe){var Le=z.leaf?this.compareMinX:U,ae=z.leaf?this.compareMinY:N;this._allDistMargin(z,J,oe,Le)<this._allDistMargin(z,J,oe,ae)&&z.children.sort(Le)},g.prototype._allDistMargin=function(z,J,oe,Le){z.children.sort(Le);for(var ae=this.toBBox,be=k(z,0,J,ae),E=k(z,oe-J,oe,ae),A=we(be)+we(E),R=J;R<oe-J;R++){var T=z.children[R];S(be,z.leaf?ae(T):T),A+=we(be)}for(var O=oe-J-1;O>=J;O--){var I=z.children[O];S(E,z.leaf?ae(I):I),A+=we(E)}return A},g.prototype._adjustParentBBoxes=function(z,J,oe){for(var Le=oe;Le>=0;Le--)S(J[Le],z)},g.prototype._condense=function(z){for(var J=z.length-1,oe=void 0;J>=0;J--)z[J].children.length===0?J>0?(oe=z[J-1].children).splice(oe.indexOf(z[J]),1):this.clear():b(z[J],this.toBBox)},g})}),Ht=f(i=>{Object.defineProperty(i,"__esModule",{value:!0}),i.earthRadius=63710088e-1,i.factors={centimeters:i.earthRadius*100,centimetres:i.earthRadius*100,degrees:i.earthRadius/111325,feet:i.earthRadius*3.28084,inches:i.earthRadius*39.37,kilometers:i.earthRadius/1e3,kilometres:i.earthRadius/1e3,meters:i.earthRadius,metres:i.earthRadius,miles:i.earthRadius/1609.344,millimeters:i.earthRadius*1e3,millimetres:i.earthRadius*1e3,nauticalmiles:i.earthRadius/1852,radians:1,yards:i.earthRadius*1.0936},i.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/i.earthRadius,yards:1.0936133},i.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function r(T,O,I){I===void 0&&(I={});var Q={type:"Feature"};return(I.id===0||I.id)&&(Q.id=I.id),I.bbox&&(Q.bbox=I.bbox),Q.properties=O||{},Q.geometry=T,Q}i.feature=r;function a(T,O,I){switch(T){case"Point":return u(O).geometry;case"LineString":return b(O).geometry;case"Polygon":return g(O).geometry;case"MultiPoint":return N(O).geometry;case"MultiLineString":return U(O).geometry;case"MultiPolygon":return me(O).geometry;default:throw new Error(T+" is invalid")}}i.geometry=a;function u(T,O,I){if(I===void 0&&(I={}),!T)throw new Error("coordinates is required");if(!Array.isArray(T))throw new Error("coordinates must be an Array");if(T.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!be(T[0])||!be(T[1]))throw new Error("coordinates must contain numbers");var Q={type:"Point",coordinates:T};return r(Q,O,I)}i.point=u;function d(T,O,I){return I===void 0&&(I={}),S(T.map(function(Q){return u(Q,O)}),I)}i.points=d;function g(T,O,I){I===void 0&&(I={});for(var Q=0,Y=T;Q<Y.length;Q++){var ne=Y[Q];if(ne.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var fe=0;fe<ne[ne.length-1].length;fe++)if(ne[ne.length-1][fe]!==ne[0][fe])throw new Error("First and last Position are not equivalent.")}var de={type:"Polygon",coordinates:T};return r(de,O,I)}i.polygon=g;function _(T,O,I){return I===void 0&&(I={}),S(T.map(function(Q){return g(Q,O)}),I)}i.polygons=_;function b(T,O,I){if(I===void 0&&(I={}),T.length<2)throw new Error("coordinates must be an array of two or more positions");var Q={type:"LineString",coordinates:T};return r(Q,O,I)}i.lineString=b;function k(T,O,I){return I===void 0&&(I={}),S(T.map(function(Q){return b(Q,O)}),I)}i.lineStrings=k;function S(T,O){O===void 0&&(O={});var I={type:"FeatureCollection"};return O.id&&(I.id=O.id),O.bbox&&(I.bbox=O.bbox),I.features=T,I}i.featureCollection=S;function U(T,O,I){I===void 0&&(I={});var Q={type:"MultiLineString",coordinates:T};return r(Q,O,I)}i.multiLineString=U;function N(T,O,I){I===void 0&&(I={});var Q={type:"MultiPoint",coordinates:T};return r(Q,O,I)}i.multiPoint=N;function me(T,O,I){I===void 0&&(I={});var Q={type:"MultiPolygon",coordinates:T};return r(Q,O,I)}i.multiPolygon=me;function we(T,O,I){I===void 0&&(I={});var Q={type:"GeometryCollection",geometries:T};return r(Q,O,I)}i.geometryCollection=we;function He(T,O){if(O===void 0&&(O=0),O&&!(O>=0))throw new Error("precision must be a positive number");var I=Math.pow(10,O||0);return Math.round(T*I)/I}i.round=He;function Qe(T,O){O===void 0&&(O="kilometers");var I=i.factors[O];if(!I)throw new Error(O+" units is invalid");return T*I}i.radiansToLength=Qe;function ot(T,O){O===void 0&&(O="kilometers");var I=i.factors[O];if(!I)throw new Error(O+" units is invalid");return T/I}i.lengthToRadians=ot;function At(T,O){return J(ot(T,O))}i.lengthToDegrees=At;function z(T){var O=T%360;return O<0&&(O+=360),O}i.bearingToAzimuth=z;function J(T){var O=T%(2*Math.PI);return O*180/Math.PI}i.radiansToDegrees=J;function oe(T){var O=T%360;return O*Math.PI/180}i.degreesToRadians=oe;function Le(T,O,I){if(O===void 0&&(O="kilometers"),I===void 0&&(I="kilometers"),!(T>=0))throw new Error("length must be a positive number");return Qe(ot(T,O),I)}i.convertLength=Le;function ae(T,O,I){if(O===void 0&&(O="meters"),I===void 0&&(I="kilometers"),!(T>=0))throw new Error("area must be a positive number");var Q=i.areaFactors[O];if(!Q)throw new Error("invalid original units");var Y=i.areaFactors[I];if(!Y)throw new Error("invalid final units");return T/Q*Y}i.convertArea=ae;function be(T){return!isNaN(T)&&T!==null&&!Array.isArray(T)}i.isNumber=be;function E(T){return!!T&&T.constructor===Object}i.isObject=E;function A(T){if(!T)throw new Error("bbox is required");if(!Array.isArray(T))throw new Error("bbox must be an Array");if(T.length!==4&&T.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");T.forEach(function(O){if(!be(O))throw new Error("bbox must only contain numbers")})}i.validateBBox=A;function R(T){if(!T)throw new Error("id is required");if(["string","number"].indexOf(typeof T)===-1)throw new Error("id must be a number or a string")}i.validateId=R}),Sr=f(i=>{Object.defineProperty(i,"__esModule",{value:!0});var r=Ht();function a(J,oe,Le){if(J!==null)for(var ae,be,E,A,R,T,O,I=0,Q=0,Y,ne=J.type,fe=ne==="FeatureCollection",de=ne==="Feature",Ue=fe?J.features.length:1,rt=0;rt<Ue;rt++){O=fe?J.features[rt].geometry:de?J.geometry:J,Y=O?O.type==="GeometryCollection":!1,R=Y?O.geometries.length:1;for(var lt=0;lt<R;lt++){var dt=0,Ft=0;if(A=Y?O.geometries[lt]:O,A!==null){T=A.coordinates;var Ut=A.type;switch(I=Le&&(Ut==="Polygon"||Ut==="MultiPolygon")?1:0,Ut){case null:break;case"Point":if(oe(T,Q,rt,dt,Ft)===!1)return!1;Q++,dt++;break;case"LineString":case"MultiPoint":for(ae=0;ae<T.length;ae++){if(oe(T[ae],Q,rt,dt,Ft)===!1)return!1;Q++,Ut==="MultiPoint"&&dt++}Ut==="LineString"&&dt++;break;case"Polygon":case"MultiLineString":for(ae=0;ae<T.length;ae++){for(be=0;be<T[ae].length-I;be++){if(oe(T[ae][be],Q,rt,dt,Ft)===!1)return!1;Q++}Ut==="MultiLineString"&&dt++,Ut==="Polygon"&&Ft++}Ut==="Polygon"&&dt++;break;case"MultiPolygon":for(ae=0;ae<T.length;ae++){for(Ft=0,be=0;be<T[ae].length;be++){for(E=0;E<T[ae][be].length-I;E++){if(oe(T[ae][be][E],Q,rt,dt,Ft)===!1)return!1;Q++}Ft++}dt++}break;case"GeometryCollection":for(ae=0;ae<A.geometries.length;ae++)if(a(A.geometries[ae],oe,Le)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function u(J,oe,Le,ae){var be=Le;return a(J,function(E,A,R,T,O){A===0&&Le===void 0?be=E:be=oe(be,E,A,R,T,O)},ae),be}function d(J,oe){var Le;switch(J.type){case"FeatureCollection":for(Le=0;Le<J.features.length&&oe(J.features[Le].properties,Le)!==!1;Le++);break;case"Feature":oe(J.properties,0);break}}function g(J,oe,Le){var ae=Le;return d(J,function(be,E){E===0&&Le===void 0?ae=be:ae=oe(ae,be,E)}),ae}function _(J,oe){if(J.type==="Feature")oe(J,0);else if(J.type==="FeatureCollection")for(var Le=0;Le<J.features.length&&oe(J.features[Le],Le)!==!1;Le++);}function b(J,oe,Le){var ae=Le;return _(J,function(be,E){E===0&&Le===void 0?ae=be:ae=oe(ae,be,E)}),ae}function k(J){var oe=[];return a(J,function(Le){oe.push(Le)}),oe}function S(J,oe){var Le,ae,be,E,A,R,T,O,I,Q,Y=0,ne=J.type==="FeatureCollection",fe=J.type==="Feature",de=ne?J.features.length:1;for(Le=0;Le<de;Le++){for(R=ne?J.features[Le].geometry:fe?J.geometry:J,O=ne?J.features[Le].properties:fe?J.properties:{},I=ne?J.features[Le].bbox:fe?J.bbox:void 0,Q=ne?J.features[Le].id:fe?J.id:void 0,T=R?R.type==="GeometryCollection":!1,A=T?R.geometries.length:1,be=0;be<A;be++){if(E=T?R.geometries[be]:R,E===null){if(oe(null,Y,O,I,Q)===!1)return!1;continue}switch(E.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(oe(E,Y,O,I,Q)===!1)return!1;break}case"GeometryCollection":{for(ae=0;ae<E.geometries.length;ae++)if(oe(E.geometries[ae],Y,O,I,Q)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}Y++}}function U(J,oe,Le){var ae=Le;return S(J,function(be,E,A,R,T){E===0&&Le===void 0?ae=be:ae=oe(ae,be,E,A,R,T)}),ae}function N(J,oe){S(J,function(Le,ae,be,E,A){var R=Le===null?null:Le.type;switch(R){case null:case"Point":case"LineString":case"Polygon":return oe(r.feature(Le,be,{bbox:E,id:A}),ae,0)===!1?!1:void 0}var T;switch(R){case"MultiPoint":T="Point";break;case"MultiLineString":T="LineString";break;case"MultiPolygon":T="Polygon";break}for(var O=0;O<Le.coordinates.length;O++){var I=Le.coordinates[O],Q={type:T,coordinates:I};if(oe(r.feature(Q,be),ae,O)===!1)return!1}})}function me(J,oe,Le){var ae=Le;return N(J,function(be,E,A){E===0&&A===0&&Le===void 0?ae=be:ae=oe(ae,be,E,A)}),ae}function we(J,oe){N(J,function(Le,ae,be){var E=0;if(Le.geometry){var A=Le.geometry.type;if(!(A==="Point"||A==="MultiPoint")){var R,T=0,O=0,I=0;if(a(Le,function(Q,Y,ne,fe,de){if(R===void 0||ae>T||fe>O||de>I){R=Q,T=ae,O=fe,I=de,E=0;return}var Ue=r.lineString([R,Q],Le.properties);if(oe(Ue,ae,be,de,E)===!1)return!1;E++,R=Q})===!1)return!1}}})}function He(J,oe,Le){var ae=Le,be=!1;return we(J,function(E,A,R,T,O){be===!1&&Le===void 0?ae=E:ae=oe(ae,E,A,R,T,O),be=!0}),ae}function Qe(J,oe){if(!J)throw new Error("geojson is required");N(J,function(Le,ae,be){if(Le.geometry!==null){var E=Le.geometry.type,A=Le.geometry.coordinates;switch(E){case"LineString":if(oe(Le,ae,be,0,0)===!1)return!1;break;case"Polygon":for(var R=0;R<A.length;R++)if(oe(r.lineString(A[R],Le.properties),ae,be,R)===!1)return!1;break}}})}function ot(J,oe,Le){var ae=Le;return Qe(J,function(be,E,A,R){E===0&&Le===void 0?ae=be:ae=oe(ae,be,E,A,R)}),ae}function At(J,oe){if(oe=oe||{},!r.isObject(oe))throw new Error("options is invalid");var Le=oe.featureIndex||0,ae=oe.multiFeatureIndex||0,be=oe.geometryIndex||0,E=oe.segmentIndex||0,A=oe.properties,R;switch(J.type){case"FeatureCollection":Le<0&&(Le=J.features.length+Le),A=A||J.features[Le].properties,R=J.features[Le].geometry;break;case"Feature":A=A||J.properties,R=J.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":R=J;break;default:throw new Error("geojson is invalid")}if(R===null)return null;var T=R.coordinates;switch(R.type){case"Point":case"MultiPoint":return null;case"LineString":return E<0&&(E=T.length+E-1),r.lineString([T[E],T[E+1]],A,oe);case"Polygon":return be<0&&(be=T.length+be),E<0&&(E=T[be].length+E-1),r.lineString([T[be][E],T[be][E+1]],A,oe);case"MultiLineString":return ae<0&&(ae=T.length+ae),E<0&&(E=T[ae].length+E-1),r.lineString([T[ae][E],T[ae][E+1]],A,oe);case"MultiPolygon":return ae<0&&(ae=T.length+ae),be<0&&(be=T[ae].length+be),E<0&&(E=T[ae][be].length-E-1),r.lineString([T[ae][be][E],T[ae][be][E+1]],A,oe)}throw new Error("geojson is invalid")}function z(J,oe){if(oe=oe||{},!r.isObject(oe))throw new Error("options is invalid");var Le=oe.featureIndex||0,ae=oe.multiFeatureIndex||0,be=oe.geometryIndex||0,E=oe.coordIndex||0,A=oe.properties,R;switch(J.type){case"FeatureCollection":Le<0&&(Le=J.features.length+Le),A=A||J.features[Le].properties,R=J.features[Le].geometry;break;case"Feature":A=A||J.properties,R=J.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":R=J;break;default:throw new Error("geojson is invalid")}if(R===null)return null;var T=R.coordinates;switch(R.type){case"Point":return r.point(T,A,oe);case"MultiPoint":return ae<0&&(ae=T.length+ae),r.point(T[ae],A,oe);case"LineString":return E<0&&(E=T.length+E),r.point(T[E],A,oe);case"Polygon":return be<0&&(be=T.length+be),E<0&&(E=T[be].length+E),r.point(T[be][E],A,oe);case"MultiLineString":return ae<0&&(ae=T.length+ae),E<0&&(E=T[ae].length+E),r.point(T[ae][E],A,oe);case"MultiPolygon":return ae<0&&(ae=T.length+ae),be<0&&(be=T[ae].length+be),E<0&&(E=T[ae][be].length-E),r.point(T[ae][be][E],A,oe)}throw new Error("geojson is invalid")}i.coordAll=k,i.coordEach=a,i.coordReduce=u,i.featureEach=_,i.featureReduce=b,i.findPoint=z,i.findSegment=At,i.flattenEach=N,i.flattenReduce=me,i.geomEach=S,i.geomReduce=U,i.lineEach=Qe,i.lineReduce=ot,i.propEach=d,i.propReduce=g,i.segmentEach=we,i.segmentReduce=He}),lr=f(i=>{Object.defineProperty(i,"__esModule",{value:!0});var r=Sr();function a(u){var d=[1/0,1/0,-1/0,-1/0];return r.coordEach(u,function(g){d[0]>g[0]&&(d[0]=g[0]),d[1]>g[1]&&(d[1]=g[1]),d[2]<g[0]&&(d[2]=g[0]),d[3]<g[1]&&(d[3]=g[1])}),d}a.default=a,i.default=a}),$n=f((i,r)=>{var a=Dt(),u=Ht(),d=Sr(),g=lr().default,_=d.featureEach;d.coordEach,u.polygon;var b=u.featureCollection;function k(S){var U=new a(S);return U.insert=function(N){if(N.type!=="Feature")throw new Error("invalid feature");return N.bbox=N.bbox?N.bbox:g(N),a.prototype.insert.call(this,N)},U.load=function(N){var me=[];return Array.isArray(N)?N.forEach(function(we){if(we.type!=="Feature")throw new Error("invalid features");we.bbox=we.bbox?we.bbox:g(we),me.push(we)}):_(N,function(we){if(we.type!=="Feature")throw new Error("invalid features");we.bbox=we.bbox?we.bbox:g(we),me.push(we)}),a.prototype.load.call(this,me)},U.remove=function(N,me){if(N.type!=="Feature")throw new Error("invalid feature");return N.bbox=N.bbox?N.bbox:g(N),a.prototype.remove.call(this,N,me)},U.clear=function(){return a.prototype.clear.call(this)},U.search=function(N){var me=a.prototype.search.call(this,this.toBBox(N));return b(me)},U.collides=function(N){return a.prototype.collides.call(this,this.toBBox(N))},U.all=function(){var N=a.prototype.all.call(this);return b(N)},U.toJSON=function(){return a.prototype.toJSON.call(this)},U.fromJSON=function(N){return a.prototype.fromJSON.call(this,N)},U.toBBox=function(N){var me;if(N.bbox)me=N.bbox;else if(Array.isArray(N)&&N.length===4)me=N;else if(Array.isArray(N)&&N.length===6)me=[N[0],N[1],N[3],N[4]];else if(N.type==="Feature")me=g(N);else if(N.type==="FeatureCollection")me=g(N);else throw new Error("invalid geojson");return{minX:me[0],minY:me[1],maxX:me[2],maxY:me[3]}},U}r.exports=k,r.exports.default=k});Array.prototype.findIndex=Array.prototype.findIndex||function(i){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof i!="function")throw new TypeError("callback must be a function");for(var r=Object(this),a=r.length>>>0,u=arguments[1],d=0;d<a;d++)if(i.call(u,r[d],d,r))return d;return-1},Array.prototype.find=Array.prototype.find||function(i){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof i!="function")throw new TypeError("callback must be a function");for(var r=Object(this),a=r.length>>>0,u=arguments[1],d=0;d<a;d++){var g=r[d];if(i.call(u,g,d,r))return g}},typeof Object.assign!="function"&&(Object.assign=function(i){if(i==null)throw new TypeError("Cannot convert undefined or null to object");i=Object(i);for(var r=1;r<arguments.length;r++){var a=arguments[r];if(a!=null)for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(i[u]=a[u])}return i}),function(i){i.forEach(function(r){r.hasOwnProperty("remove")||Object.defineProperty(r,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(i,r){if(this==null)throw new TypeError('"this" is null or not defined');var a=Object(this),u=a.length>>>0;if(u===0)return!1;var d=r|0,g=Math.max(d>=0?d:u-Math.abs(d),0);function _(b,k){return b===k||typeof b=="number"&&typeof k=="number"&&isNaN(b)&&isNaN(k)}for(;g<u;){if(_(a[g],i))return!0;g++}return!1}});var eo={version:"2.18.3"},xt=v(is()),Jt={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},to={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex lschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer lschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Lnge",segmentLength:"Segment Lnge",area:"Flche",radius:"Radius",perimeter:"Umfang",height:"Hhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},rs={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},Ui={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},lu={tooltips:{placeMarker:"Adaug un punct",firstVertex:"Apas aici pentru a aduga primul Vertex",continueLine:"Apas aici pentru a continua desenul",finishLine:"Apas pe orice obiect pentru a finisa desenul",finishPoly:"Apas pe primul obiect pentru a finisa",finishRect:"Apas pentru a finisa",startCircle:"Apas pentru a desena un cerc",finishCircle:"Apas pentru a finisa un cerc",placeCircleMarker:"Adaug un punct"},actions:{finish:"Termin",cancel:"Anuleaz",removeLastVertex:"terge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaug o bulin",drawPolyButton:"Deseneaz un poligon",drawLineButton:"Deseneaz o linie",drawCircleButton:"Deseneaz un cerc",drawRectButton:"Deseneaz un dreptunghi",editButton:"Editeaz straturile",dragButton:"Mut straturile",cutButton:"Taie straturile",deleteButton:"terge straturile",drawCircleMarkerButton:"Deseneaz marcatorul cercului",snappingButton:"Fixai marcatorul glisat pe alte straturi i vrfuri",pinningButton:"Fixai vrfurile partajate mpreun",rotateButton:"Rotii stratul"}},ss={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:"     ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" "}},jn={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vrtice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del crculo",finishCircle:"Presiona para finalizar el crculo",placeCircleMarker:"Presiona para colocar un marcador de crculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar ltimo vrtice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polgono",drawLineButton:"Dibujar Lnea",drawCircleButton:"Dibujar Crculo",drawRectButton:"Dibujar Rectngulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Crculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vrtices",pinningButton:"Fijar juntos los vrtices compartidos",rotateButton:"Rotar capa"}},ei={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beindigen",finishPoly:"Klik op het eerst punt om te beindigen",finishRect:"Klik om te beindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},Un={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer  dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"diter des calques",dragButton:"Dplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"pingler ensemble les sommets partags",rotateButton:"Tourner des calques"}},Br={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},Ar={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},io={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vrtice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do crculo",finishCircle:"Clique para finalizar o crculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover ltimo vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},ur={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vrtice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do crculo",finishCircle:"Clique para terminar o crculo",placeCircleMarker:"Clique para colocar marcador de crculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover ltimo Vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},no={tooltips:{placeMarker:"Kliknij, aby umieci znacznik",firstVertex:"Kliknij, aby umieci pierwszy wierzchoek",continueLine:"Kliknij, aby kontynuowa rysowanie",finishLine:"Kliknij dowolny istniejcy znacznik, aby zakoczy",finishPoly:"Kliknij pierwszy znacznik, aby zakoczy",finishRect:"Kliknij, aby zakoczy",startCircle:"Kliknij, aby umieci rodek okrgu",finishCircle:"Kliknij, aby zakoczy okrg",placeCircleMarker:"Kliknij, aby umieci znacznik okrgu",placeText:"Kliknij, aby umieci tekst"},actions:{finish:"Zakocz",cancel:"Anuluj",removeLastVertex:"Usu ostatni wierzchoek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokt",drawLineButton:"Rysuj lini",drawCircleButton:"Rysuj okrg",drawRectButton:"Rysuj prostokt",editButton:"Edytuj warstwy",dragButton:"Przecignij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usu warstwy",drawCircleMarkerButton:"Rysuj znacznik okrgy",snappingButton:"Przycignij przenoszony znacznik do innych warstw i wierzchokw",pinningButton:"Przypnij wsplne wierzchoki razem",rotateButton:"Obr warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne ledzenie linii"},measurements:{totalLength:"Dugo",segmentLength:"Dugo odcinka",area:"Obszar",radius:"Promie",perimeter:"Obwd",height:"Wysoko",width:"Szeroko",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},ro={tooltips:{placeMarker:"Klicka fr att placera markr",firstVertex:"Klicka fr att placera frsta hrnet",continueLine:"Klicka fr att fortstta rita",finishLine:"Klicka p en existerande punkt fr att slutfra",finishPoly:"Klicka p den frsta punkten fr att slutfra",finishRect:"Klicka fr att slutfra",startCircle:"Klicka fr att placera cirkelns centrum",finishCircle:"Klicka fr att slutfra cirkeln",placeCircleMarker:"Klicka fr att placera cirkelmarkr"},actions:{finish:"Slutfr",cancel:"Avbryt",removeLastVertex:"Ta bort sista hrnet"},buttonTitles:{drawMarkerButton:"Rita Markr",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkr",snappingButton:"Snpp dra markren till andra lager och hrn",pinningButton:"Fst delade hrn tillsammans",rotateButton:"Rotera lagret"}},os={tooltips:{placeMarker:"     ",firstVertex:"       ",continueLine:"      ",finishLine:"        ",finishPoly:"       ",finishRect:"    ",startCircle:"      ",finishCircle:"      ",placeCircleMarker:"      "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"        ",pinningButton:"   ",rotateButton:"  "}},so={tooltips:{placeMarker:"Kattintson a jell elhelyezshez",firstVertex:"Kattintson az els pont elhelyezshez",continueLine:"Kattintson a kvetkez pont elhelyezshez",finishLine:"A befejezshez kattintson egy meglv pontra",finishPoly:"A befejezshez kattintson az els pontra",finishRect:"Kattintson a befejezshez",startCircle:"Kattintson a kr kzppontjnak elhelyezshez",finishCircle:"Kattintson a kr befejezshez",placeCircleMarker:"Kattintson a krjell elhelyezshez"},actions:{finish:"Befejezs",cancel:"Mgse",removeLastVertex:"Utols pont eltvoltsa"},buttonTitles:{drawMarkerButton:"Jell rajzolsa",drawPolyButton:"Poligon rajzolsa",drawLineButton:"Vonal rajzolsa",drawCircleButton:"Kr rajzolsa",drawRectButton:"Ngyzet rajzolsa",editButton:"Elemek szerkesztse",dragButton:"Elemek mozgatsa",cutButton:"Elemek vgsa",deleteButton:"Elemek trlse",drawCircleMarkerButton:"Kr jell rajzolsa",snappingButton:"Kapcsolja a jelltt msik elemhez vagy ponthoz",pinningButton:"Kzs pontok sszektse",rotateButton:"Flia elforgatsa"}},oo={tooltips:{placeMarker:"Tryk for at placere en markr",firstVertex:"Tryk for at placere det frste punkt",continueLine:"Tryk for at fortstte linjen",finishLine:"Tryk p et eksisterende punkt for at afslutte",finishPoly:"Tryk p det frste punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkr"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markr",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Trk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkr",snappingButton:"Fastgr trukket markr til andre elementer",pinningButton:"Sammenlg delte elementer",rotateButton:"Roter laget"}},as={tooltips:{placeMarker:"Klikk for  plassere punkt",firstVertex:"Klikk for  plassere frste punkt",continueLine:"Klikk for  tegne videre",finishLine:"Klikk p et eksisterende punkt for  fullfre",finishPoly:"Klikk frste punkt for  fullfre",finishRect:"Klikk for  fullfre",startCircle:"Klikk for  sette sirkel midtpunkt",finishCircle:"Klikk for  fullfre sirkel",placeCircleMarker:"Klikk for  plassere sirkel",placeText:"Klikk for  plassere tekst"},actions:{finish:"Fullfr",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotr objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalr objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Omrde",radius:"Radius",perimeter:"Omriss",height:"Hyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkr"}},_a={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"   ",finishLine:"      ",finishPoly:"     ",finishRect:"  ",startCircle:"    ",finishCircle:"    ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"      ",rotateButton:" ",drawTextButton:" ",scaleButton:"",autoTracingButton:" "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},ao={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:" -    ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"'   ",rotateButton:" "}},uu={tooltips:{placeMarker:"areti yerletirmek iin tklayn",firstVertex:"lk tepe noktasn yerletirmek iin tklayn",continueLine:"izime devam etmek iin tklayn",finishLine:"Bitirmek iin mevcut herhangi bir iaretiyi tklayn",finishPoly:"Bitirmek iin ilk iaretiyi tklayn",finishRect:"Bitirmek iin tklayn",startCircle:"Daire merkezine yerletirmek iin tklayn",finishCircle:"Daireyi bitirmek iin tklayn",placeCircleMarker:"Daire iaretisi yerletirmek iin tklayn"},actions:{finish:"Bitir",cancel:"ptal",removeLastVertex:"Son keyi kaldr"},buttonTitles:{drawMarkerButton:"izim aretisi",drawPolyButton:"okgenler iz",drawLineButton:"oklu izgi iz",drawCircleButton:"ember iz",drawRectButton:"Dikdrtgen iz",editButton:"Katmanlar dzenle",dragButton:"Katmanlar srkle",cutButton:"Katmanlar kes",deleteButton:"Katmanlar kaldr",drawCircleMarkerButton:"Daire iaretisi iz",snappingButton:"Srklenen iaretiyi dier katmanlara ve kelere yaptr",pinningButton:"Paylalan keleri birbirine sabitle",rotateButton:"Katman dndr"}},bt={tooltips:{placeMarker:"Kliknutm vytvote znaku",firstVertex:"Kliknutm vytvote prvn objekt",continueLine:"Kliknutm pokraujte v kreslen",finishLine:"Kliknut na libovolnou existujc znaku pro dokonen",finishPoly:"Vyberte prvn bod pro dokonen",finishRect:"Kliknte pro dokonen",startCircle:"Kliknutm pidejte sted kruhu",finishCircle:",   ",placeCircleMarker:"Kliknutm nastavte polomr"},actions:{finish:"Dokonit",cancel:"Zruit",removeLastVertex:"Zruit posledn akci"},buttonTitles:{drawMarkerButton:"Pidat znaku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit kivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdlnk",editButton:"Upravit vrstvu",dragButton:"Peneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Pidat kruhovou znaku",snappingButton:"Navzat tanou znaku k dalm vrstvm a vrcholm",pinningButton:"Spojit spolen body dohromady",rotateButton:"Otote vrstvu"}},rn={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:"",placeText:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:"",drawTextButton:""}},jt={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtmist",finishLine:"Klikkaa olemassa olevaa merkki lopettaaksesi",finishPoly:"Klikkaa ensimmist merkki lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrn keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrn",placeCircleMarker:"Klikkaa asettaaksesi ympyrmerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirr merkkej",drawPolyButton:"Piirr monikulmioita",drawLineButton:"Piirr viivoja",drawCircleButton:"Piirr ympyr",drawRectButton:"Piirr neliskulmioita",editButton:"Muokkaa",dragButton:"Siirr",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirr ympyrmerkki",snappingButton:"Kiinnit siirrettv merkki toisiin muotoihin",pinningButton:"Kiinnit jaetut muodot yhteen",rotateButton:"Knn",drawTextButton:"Piirr teksti"}},ya={tooltips:{placeMarker:"  ",firstVertex:"   ",continueLine:"  ",finishLine:"   ",finishPoly:"   ",finishRect:" ",startCircle:"    ",finishCircle:"  ",placeCircleMarker:"   ",placeText:"  "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" ",drawTextButton:" "}},lo={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"    ",finishLine:"    ",finishPoly:"    ",finishRect:"  ",startCircle:"    ",finishCircle:"   ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:" ",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:"  ",cutButton:"  ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"     ",pinningButton:"   ",rotateButton:" ",drawTextButton:" ",scaleButton:"  ",autoTracingButton:"  "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},uo=ur,En={en:Jt,de:to,it:rs,id:Ui,ro:lu,ru:ss,es:jn,nl:ei,fr:Un,pt:uo,pt_br:io,pt_pt:ur,zh:Br,zh_tw:Ar,pl:no,sv:ro,el:os,hu:so,da:oo,no:as,fa:_a,ua:ao,tr:uu,cz:bt,ja:rn,fi:jt,ko:ya,ky:lo},Gn={_globalEditModeEnabled:!1,enableGlobalEditMode(i){let r={...i};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(a=>{this._isRelevantForEdit(a)&&a.pm.enable(r)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(i=>{i.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(i=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(i)},handleLayerAdditionInGlobalEditMode(){let i=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let r in i){let a=i[r];this._isRelevantForEdit(a)&&a.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:i}){this._addedLayersEdit[L.stamp(i)]=i},_isRelevantForEdit(i){return i.pm&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.allowEditing}},co=Gn,Tr={_globalDragModeEnabled:!1,enableGlobalDragMode(){let i=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},i.forEach(r=>{this._isRelevantForDrag(r)&&r.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let i=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,i.forEach(r=>{r.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let i=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let r in i){let a=i[r];this._isRelevantForDrag(a)&&a.pm.enableLayerDrag()}},_layerAddedDrag({layer:i}){this._addedLayersDrag[L.stamp(i)]=i},_isRelevantForDrag(i){return i.pm&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.draggable}},ci=Tr,Vn={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(i=>{this._isRelevantForRemoval(i)&&(i.pm.enabled()&&i.pm.disable(),i.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(i=>{i.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(i){let r=i.target;this._isRelevantForRemoval(r)&&!r.pm.dragging()&&(r.removeFrom(this.map.pm._getContainingLayer()),r.remove(),r instanceof L.LayerGroup?(this._fireRemoveLayerGroup(r),this._fireRemoveLayerGroup(this.map,r)):(r.pm._fireRemove(r),r.pm._fireRemove(this.map,r)))},_isRelevantForRemoval(i){return i.pm&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let i=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let r in i){let a=i[r];this._isRelevantForRemoval(a)&&(a.pm.enabled()&&a.pm.disable(),a.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:i}){this._addedLayersRemoval[L.stamp(i)]=i}},va=Vn,ba={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(i=>i instanceof L.Polyline).forEach(i=>{this._isRelevantForRotate(i)&&i.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(i=>i instanceof L.Polyline).forEach(i=>{i.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(i){return i.pm&&i instanceof L.Polyline&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let i=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let r in i){let a=i[r];this._isRelevantForRemoval(a)&&a.pm.enableRotate()}},_layerAddedRotate({layer:i}){this._addedLayersRotate[L.stamp(i)]=i}},cu=ba,xa=v(is()),ho={_fireDrawStart(i="Draw",r={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},i,r)},_fireDrawEnd(i="Draw",r={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},i,r)},_fireCreate(i,r="Draw",a={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:i,layer:i},r,a)},_fireCenterPlaced(i="Draw",r={}){let a=i==="Draw"?this._layer:void 0,u=i!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:a,layer:u,latlng:this._layer.getLatLng()},i,r)},_fireCut(i,r,a,u="Draw",d={}){this.__fire(i,"pm:cut",{shape:this._shape,layer:r,originalLayer:a},u,d)},_fireEdit(i=this._layer,r="Edit",a={}){this.__fire(i,"pm:edit",{layer:this._layer,shape:this.getShape()},r,a)},_fireEnable(i="Edit",r={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},i,r)},_fireDisable(i="Edit",r={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},i,r)},_fireUpdate(i="Edit",r={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},i,r)},_fireMarkerDragStart(i,r=void 0,a="Edit",u={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:i,shape:this.getShape(),indexPath:r},a,u)},_fireMarkerDrag(i,r=void 0,a="Edit",u={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:i,shape:this.getShape(),indexPath:r},a,u)},_fireMarkerDragEnd(i,r=void 0,a=void 0,u="Edit",d={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:i,shape:this.getShape(),indexPath:r,intersectionReset:a},u,d)},_fireDragStart(i="Edit",r={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},i,r)},_fireDrag(i,r="Edit",a={}){this.__fire(this._layer,"pm:drag",{...i,shape:this.getShape()},r,a)},_fireDragEnd(i="Edit",r={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},i,r)},_fireDragEnable(i="Edit",r={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},i,r)},_fireDragDisable(i="Edit",r={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},i,r)},_fireRemove(i,r=i,a="Edit",u={}){this.__fire(i,"pm:remove",{layer:r,shape:this.getShape()},a,u)},_fireVertexAdded(i,r,a,u="Edit",d={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:i,indexPath:r,latlng:a,shape:this.getShape()},u,d)},_fireVertexRemoved(i,r,a="Edit",u={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:i,indexPath:r,shape:this.getShape()},a,u)},_fireVertexClick(i,r,a="Edit",u={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:i,indexPath:r,shape:this.getShape()},a,u)},_fireIntersect(i,r=this._layer,a="Edit",u={}){this.__fire(r,"pm:intersect",{layer:this._layer,intersection:i,shape:this.getShape()},a,u)},_fireLayerReset(i,r,a="Edit",u={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:i,indexPath:r,shape:this.getShape()},a,u)},_fireChange(i,r="Edit",a={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:i,shape:this.getShape()},r,a)},_fireTextChange(i,r="Edit",a={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:i,shape:this.getShape()},r,a)},_fireTextFocus(i="Edit",r={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},i,r)},_fireTextBlur(i="Edit",r={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},i,r)},_fireSnapDrag(i,r,a="Snapping",u={}){this.__fire(i,"pm:snapdrag",r,a,u)},_fireSnap(i,r,a="Snapping",u={}){this.__fire(i,"pm:snap",r,a,u)},_fireUnsnap(i,r,a="Snapping",u={}){this.__fire(i,"pm:unsnap",r,a,u)},_fireRotationEnable(i,r,a="Rotation",u={}){this.__fire(i,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},a,u)},_fireRotationDisable(i,r="Rotation",a={}){this.__fire(i,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},r,a)},_fireRotationStart(i,r,a="Rotation",u={}){this.__fire(i,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:r},a,u)},_fireRotation(i,r,a,u=this._rotationLayer,d="Rotation",g={}){this.__fire(i,"pm:rotate",{layer:u,helpLayer:this._layer,startAngle:this._startAngle,angle:u.pm.getAngle(),angleDiff:r,oldLatLngs:a,newLatLngs:u.getLatLngs()},d,g)},_fireRotationEnd(i,r,a,u="Rotation",d={}){this.__fire(i,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:r,angle:this._rotationLayer.pm.getAngle(),originLatLngs:a,newLatLngs:this._rotationLayer.getLatLngs()},u,d)},_fireActionClick(i,r,a,u="Toolbar",d={}){this.__fire(this._map,"pm:actionclick",{text:i.text,action:i,btnName:r,button:a},u,d)},_fireButtonClick(i,r,a="Toolbar",u={}){this.__fire(this._map,"pm:buttonclick",{btnName:i,button:r},a,u)},_fireLangChange(i,r,a,u,d="Global",g={}){this.__fire(this.map,"pm:langchange",{oldLang:i,activeLang:r,fallback:a,translations:u},d,g)},_fireGlobalDragModeToggled(i,r="Global",a={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:i,map:this.map},r,a)},_fireGlobalEditModeToggled(i,r="Global",a={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:i,map:this.map},r,a)},_fireGlobalRemovalModeToggled(i,r="Global",a={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:i,map:this.map},r,a)},_fireGlobalCutModeToggled(i="Global",r={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},i,r)},_fireGlobalDrawModeToggled(i="Global",r={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},i,r)},_fireGlobalRotateModeToggled(i="Global",r={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},i,r)},_fireRemoveLayerGroup(i,r=i,a="Edit",u={}){this.__fire(i,"pm:remove",{layer:r,shape:void 0},a,u)},_fireKeyeventEvent(i,r,a,u="Global",d={}){this.__fire(this.map,"pm:keyevent",{event:i,eventType:r,focusOn:a},u,d)},__fire(i,r,a,u,d={}){a=(0,xa.default)(a,d,{source:u}),L.PM.Utils._fireEvent(i,r,a)}},ls=ho,wa=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(i){this.map=i,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),i.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(i){let r="document";this.map.getContainer().contains(i.target)&&(r="map");let a={event:i,eventType:i.type,focusOn:r};this._lastEvents[i.type]=a,this._lastEvents.current=a,this.map.pm._fireKeyeventEvent(i,i.type,r)},_onBlur(i){i.altKey=!1;let r={event:i,eventType:i.type,focusOn:"document"};this._lastEvents[i.type]=r,this._lastEvents.current=r},getLastKeyEvent(i="current"){return this._lastEvents[i]},isShiftKeyPressed(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.shiftKey},isAltKeyPressed(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.altKey},isCtrlKeyPressed(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.ctrlKey},isMetaKeyPressed(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.metaKey},getPressedKey(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.key}}),Bt=wa,La=v(kn());function vt(i){let r=L.PM.activeLang;return(0,La.default)(En[r],i)||(0,La.default)(En.en,i)||i}function Hn(i){for(let r=0;r<i.length;r+=1){let a=i[r];if(Array.isArray(a)){if(Hn(a))return!0}else if(a!=null&&a!=="")return!0}return!1}function Dr(i){return i.reduce((r,a)=>{if(a.length!==0){let u=Array.isArray(a)?Dr(a):a;Array.isArray(u)?u.length!==0&&r.push(u):r.push(u)}return r},[])}function hu(i,r,a){let u={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:d,b:g,f:_}=u,b=i.lng,k=i.lat,S=a,U=Math.PI,N=r*U/180,me=Math.sin(N),we=Math.cos(N),He=(1-_)*Math.tan(k*U/180),Qe=1/Math.sqrt(1+He*He),ot=He*Qe,At=Math.atan2(He,we),z=Qe*me,J=1-z*z,oe=J*(d*d-g*g)/(g*g),Le=1+oe/16384*(4096+oe*(-768+oe*(320-175*oe))),ae=oe/1024*(256+oe*(-128+oe*(74-47*oe))),be=S/(g*Le),E=2*Math.PI,A,R,T;for(;Math.abs(be-E)>1e-12;){A=Math.cos(2*At+be),R=Math.sin(be),T=Math.cos(be);let Ue=ae*R*(A+ae/4*(T*(-1+2*A*A)-ae/6*A*(-3+4*R*R)*(-3+4*A*A)));E=be,be=S/(g*Le)+Ue}let O=ot*R-Qe*T*we,I=Math.atan2(ot*T+Qe*R*we,(1-_)*Math.sqrt(z*z+O*O)),Q=Math.atan2(R*me,Qe*T-ot*R*we),Y=_/16*J*(4+_*(4-3*J)),ne=Q-(1-Y)*_*z*(be+Y*R*(A+Y*T*(-1+2*A*A))),fe=b+ne*180/U,de=I*180/U;return L.latLng(fe,de)}function us(i,r,a,u,d=!0){let g,_,b,k=[];for(let S=0;S<a;S+=1){if(d)g=S*360/a+u,_=hu(i,g,r),b=L.latLng(_.lng,_.lat);else{let U=i.lat+Math.cos(2*S*Math.PI/a)*r,N=i.lng+Math.sin(2*S*Math.PI/a)*r;b=L.latLng(U,N)}k.push(b)}return k}function du(i,r,a){r=(r+360)%360;let u=Math.PI/180,d=180/Math.PI,{R:g}=L.CRS.Earth,_=i.lng*u,b=i.lat*u,k=r*u,S=Math.sin(b),U=Math.cos(b),N=Math.cos(a/g),me=Math.sin(a/g),we=Math.asin(S*N+U*me*Math.cos(k)),He=_+Math.atan2(Math.sin(k)*me*U,N-S*Math.sin(we));He*=d;let Qe=He-360,ot=He<-180?He+360:He;return He=He>180?Qe:ot,L.latLng([we*d,He])}function cs(i,r,a){let u=i.latLngToContainerPoint(r),d=i.latLngToContainerPoint(a),g=Math.atan2(d.y-u.y,d.x-u.x)*180/Math.PI+90;return g+=g<0?360:0,g}function hs(i,r,a,u){let d=cs(i,r,a);return du(r,d,u)}function fu(i,r,a="asc"){if(!r||Object.keys(r).length===0)return(k,S)=>k-S;let u=Object.keys(r),d,g=u.length-1,_={};for(;g>=0;)d=u[g],_[d.toLowerCase()]=r[d],g-=1;function b(k){if(k instanceof L.Marker)return"Marker";if(k instanceof L.Circle)return"Circle";if(k instanceof L.CircleMarker)return"CircleMarker";if(k instanceof L.Rectangle)return"Rectangle";if(k instanceof L.Polygon)return"Polygon";if(k instanceof L.Polyline)return"Line"}return(k,S)=>{let U,N;if(U=b(k.layer).toLowerCase(),N=b(S.layer).toLowerCase(),!U||!N)return 0;let me=U in _?_[U]:Number.MAX_SAFE_INTEGER,we=N in _?_[N]:Number.MAX_SAFE_INTEGER,He=0;return me<we?He=-1:me>we&&(He=1),a==="desc"?He*-1:He}}function sn(i,r=i.getLatLngs()){return i instanceof L.Polygon?L.polygon(r).getLatLngs():L.polyline(r).getLatLngs()}function Ca(i,r){var a,u,d,g;if((u=(a=r.options.crs)==null?void 0:a.projection)!=null&&u.MAX_LATITUDE){let _=(g=(d=r.options.crs)==null?void 0:d.projection)==null?void 0:g.MAX_LATITUDE;i.lat=Math.max(Math.min(_,i.lat),-_)}return i}function mi(i){return i.options.renderer||i._map&&(i._map._getPaneRenderer(i.options.pane)||i._map.options.renderer||i._map._renderer)||i._renderer}var pu=L.Class.extend({includes:[co,ci,va,cu,ls],initialize(i){this.map=i,this.Draw=new L.PM.Draw(i),this.Toolbar=new L.PM.Toolbar(i),this.Keyboard=Bt(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(i)},setLang(i="en",r,a="en"){if(i=i.trim().toLowerCase(),!/^[a-z]{2}$/.test(i)){let d=i.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(d){let g=[`${d[1]}_${d[2]}`,`${d[1]}`];for(let _ of g)if(En[_]){i=_;break}}}let u=L.PM.activeLang;r&&(En[i]=(0,xt.default)(En[a],r)),L.PM.activeLang=i,this.map.pm.Toolbar.reinit(),this._fireLangChange(u,i,a,En[i])},addControls(i){this.Toolbar.addControls(i)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(i="Polygon",r){i==="Poly"&&(i="Polygon"),this.Draw.enable(i,r)},disableDraw(i="Polygon"){i==="Poly"&&(i="Polygon"),this.Draw.disable(i)},setPathOptions(i,r={}){let a=r.ignoreShapes||[],u=r.merge||!1;this.map.pm.Draw.shapes.forEach(d=>{a.indexOf(d)===-1&&this.map.pm.Draw[d].setPathOptions(i,u)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(i){let r=(0,xt.default)(this.globalOptions,i);r.editable&&(r.resizeableCircleMarker=r.editable,delete r.editable);let a=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!r.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),a=!0);let u=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!r.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),u=!0),this.map.pm.Draw.shapes.forEach(d=>{this.map.pm.Draw[d].setOptions(r)}),a&&this.map.pm.Draw.CircleMarker.enable(),u&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(d=>{d.pm.setOptions(r)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=r,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(i=>{i.pm.enabled()&&i.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(i){return this.Draw.Cut.enable(i)},toggleGlobalCutMode(i){return this.Draw.Cut.toggle(i)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(i=!1){let r=L.PM.Utils.findLayers(this.map);if(!i)return r;let a=L.featureGroup();return a._pmTempLayer=!0,r.forEach(u=>{a.addLayer(u)}),a},getGeomanDrawLayers(i=!1){let r=L.PM.Utils.findLayers(this.map).filter(u=>u._drawnByGeoman===!0);if(!i)return r;let a=L.featureGroup();return a._pmTempLayer=!0,r.forEach(u=>{a.addLayer(u)}),a},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(i){this._touchEventCounter===0&&(L.DomEvent.on(i,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(i,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(i){this._touchEventCounter===1&&(L.DomEvent.off(i,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(i,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(i){mi(this.map)._onMouseMove(this._createMouseEvent("mousemove",i))},_canvasTouchClick(i){let r="";i.type==="touchstart"||i.type==="pointerdown"?r="mousedown":(i.type==="touchend"||i.type==="pointerup"||i.type==="touchcancel"||i.type==="pointercancel")&&(r="mouseup"),r&&mi(this.map)._onClick(this._createMouseEvent(r,i))},_createMouseEvent(i,r){let a,u=r.touches[0]||r.changedTouches[0];try{a=new MouseEvent(i,{bubbles:r.bubbles,cancelable:r.cancelable,view:r.view,detail:u.detail,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY,ctrlKey:r.ctrlKey,altKey:r.altKey,shiftKey:r.shiftKey,metaKey:r.metaKey,button:r.button,relatedTarget:r.relatedTarget})}catch{a=document.createEvent("MouseEvents"),a.initMouseEvent(i,r.bubbles,r.cancelable,r.view,u.detail,u.screenX,u.screenY,u.clientX,u.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.button,r.relatedTarget)}return a}}),ka=pu,Mn=L.Control.extend({includes:[ls],options:{position:"topleft",disableByOtherButtons:!0},initialize(i){this._button=L.Util.extend({},this.options,i)},onAdd(i){return this._map=i,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let i=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),i?i.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(i){return typeof i=="boolean"?this._button.toggleStatus=i:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(i){i&&i.preventDefault(),!this._button.disabled&&(this._button.onClick(i,{button:this,event:i}),this._clicked(i),this._button.afterClick(i,{button:this,event:i}))},_makeButton(i){let r=this.options.position.indexOf("right")>-1?"pos-right":"",a=L.DomUtil.create("div",`button-container  ${r}`,this._container);i.title&&a.setAttribute("title",i.title);let u=L.DomUtil.create("a","leaflet-buttons-control-button",a);u.setAttribute("role","button"),u.setAttribute("tabindex","0"),u.href="#";let d=L.DomUtil.create("div",`leaflet-pm-actions-container ${r}`,a),g=i.actions,_={cancel:{text:vt("actions.cancel"),title:vt("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:vt("actions.finish"),title:vt("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:vt("actions.removeLastVertex"),title:vt("actions.removeLastVertex"),onClick(){this._map.pm.Draw[i.jsClass]._removeLastVertex()}},finish:{text:vt("actions.finish"),title:vt("actions.finish"),onClick(k){this._map.pm.Draw[i.jsClass]._finishShape(k)}}};i._preparedActions=g.map(k=>{let S=typeof k=="string"?k:k.name,U;if(_[S])U=_[S];else if(k.text)U=k;else return U;let N=L.DomUtil.create("a",`leaflet-pm-action ${r} action-${S}`,d);if(N.setAttribute("role","button"),N.setAttribute("tabindex","0"),N.href="#",U.title&&(N.title=U.title),N.innerHTML=U.text,L.DomEvent.disableClickPropagation(N),L.DomEvent.on(N,"click",L.DomEvent.stop),U._node=N,!i.disabled&&U.onClick){let me=we=>{we.preventDefault();let He="",{buttons:Qe}=this._map.pm.Toolbar;for(let ot in Qe)if(Qe[ot]._button===i){He=ot;break}this._fireActionClick(U,He,i)};L.DomEvent.addListener(N,"click",me,this),L.DomEvent.addListener(N,"click",U.onClick,this),L.DomEvent.addListener(N,"click",()=>this._updateActiveAction(i))}return U}),this._updateActiveAction(i),i.toggleStatus&&L.DomUtil.addClass(a,"active");let b=L.DomUtil.create("div","control-icon",u);return i.iconUrl&&b.setAttribute("src",i.iconUrl),i.className&&L.DomUtil.addClass(b,i.className),L.DomEvent.disableClickPropagation(u),L.DomEvent.on(u,"click",L.DomEvent.stop),i.disabled||(L.DomEvent.addListener(u,"click",this._onBtnClick,this),L.DomEvent.addListener(u,"click",this._triggerClick,this)),i.disabled&&(L.DomUtil.addClass(u,"pm-disabled"),u.setAttribute("aria-disabled","true")),a},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let i="",{buttons:r}=this._map.pm.Toolbar;for(let a in r)if(r[a]._button===this._button){i=a;break}this._fireButtonClick(i,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let i="pm-disabled",r=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(r,i),r.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(r,i),r.setAttribute("aria-disabled","false"))},_updateActiveAction(i){var r;(r=i._preparedActions)==null||r.forEach(a=>{a!=null&&a._node&&(a.isActive&&a.isActive.call(this)?L.DomUtil.addClass(a._node,"active-action"):L.DomUtil.removeClass(a._node,"active-action"))})}}),Ea=Mn;L.Control.PMButton=Ea;var Ma=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(i){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(i)},reinit(){let i=this.isVisible;this.removeControls(),this._defineButtons(),i&&this.addControls()},init(i){this.map=i,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(i){let r=`${i}Container`;return this[r]||(this[r]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${i} leaflet-bar leaflet-control`)),this[r]},getButtons(){return this.buttons},addControls(i=this.options){typeof i.editPolygon<"u"&&(i.editMode=i.editPolygon),typeof i.deleteLayer<"u"&&(i.removalMode=i.deleteLayer),L.Util.setOptions(this,i),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let i=this.getButtons(),r={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let a in i){let u=i[a];L.Util.setOptions(u,{className:r.geomanIcons[a]})}},removeControls(){let i=this.getButtons();for(let r in i)i[r].remove();this.isVisible=!1},toggleControls(i=this.options){this.isVisible?this.removeControls():this.addControls(i)},_addButton(i,r){return this.buttons[i]=r,this.options[i]=!!this.options[i]||!1,this.buttons[i]},triggerClickOnToggledButtons(i){for(let r in this.buttons){let a=this.buttons[r];a._button.disableByOtherButtons&&a!==i&&a.toggled()&&a._triggerClick()}},toggleButton(i,r,a=!0){i==="editPolygon"&&(i="editMode"),i==="deleteLayer"&&(i="removalMode");let u=i;return a&&this.triggerClickOnToggledButtons(this.buttons[u]),this.buttons[u]?this.buttons[u].toggle(r):!1},_defineButtons(){let i={className:"control-icon leaflet-pm-icon-marker",title:vt("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(me,we)=>{this.map.pm.Draw[we.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},r={title:vt("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(me,we)=>{this.map.pm.Draw[we.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},a={className:"control-icon leaflet-pm-icon-polyline",title:vt("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(me,we)=>{this.map.pm.Draw[we.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},u={title:vt("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(me,we)=>{this.map.pm.Draw[we.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},d={title:vt("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(me,we)=>{this.map.pm.Draw[we.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},g={title:vt("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(me,we)=>{this.map.pm.Draw[we.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},_={title:vt("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},b={title:vt("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},k={title:vt("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(me,we)=>{this.map.pm.Draw[we.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},S={title:vt("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},U={title:vt("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},N={className:"control-icon leaflet-pm-icon-text",title:vt("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(me,we)=>{this.map.pm.Draw[we.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(i)),this._addButton("drawPolyline",new L.Control.PMButton(a)),this._addButton("drawRectangle",new L.Control.PMButton(g)),this._addButton("drawPolygon",new L.Control.PMButton(r)),this._addButton("drawCircle",new L.Control.PMButton(u)),this._addButton("drawCircleMarker",new L.Control.PMButton(d)),this._addButton("drawText",new L.Control.PMButton(N)),this._addButton("editMode",new L.Control.PMButton(_)),this._addButton("dragMode",new L.Control.PMButton(b)),this._addButton("cutPolygon",new L.Control.PMButton(k)),this._addButton("removalMode",new L.Control.PMButton(S)),this._addButton("rotateMode",new L.Control.PMButton(U))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let i=this.getButtons(),r=[];this.options.drawControls===!1&&(r=r.concat(Object.keys(i).filter(a=>!i[a]._button.tool))),this.options.editControls===!1&&(r=r.concat(Object.keys(i).filter(a=>i[a]._button.tool==="edit"))),this.options.optionsControls===!1&&(r=r.concat(Object.keys(i).filter(a=>i[a]._button.tool==="options"))),this.options.customControls===!1&&(r=r.concat(Object.keys(i).filter(a=>i[a]._button.tool==="custom")));for(let a in i)if(this.options[a]&&r.indexOf(a)===-1){let u=i[a]._button.tool;u||(u="draw"),i[a].setPosition(this._getBtnPosition(u)),i[a].addTo(this.map)}},_getBtnPosition(i){return this.options.positions&&this.options.positions[i]?this.options.positions[i]:this.options.position},setBlockPosition(i,r){this.options.positions[i]=r,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(i,r){if(r)typeof r!="object"&&(r={name:r});else throw new TypeError("Button has no name");let a=this._btnNameMapping(i);if(!r.name)throw new TypeError("Button has no name");if(this.buttons[r.name])throw new TypeError("Button with this name already exists");let u=this.map.pm.Draw.createNewDrawInstance(r.name,a);r={...this.buttons[a]._button,...r};let d=this.createCustomControl(r);return{drawInstance:u,control:d}},createCustomControl(i){if(!i.name)throw new TypeError("Button has no name");if(this.buttons[i.name])throw new TypeError("Button with this name already exists");i.onClick||(i.onClick=()=>{}),i.afterClick||(i.afterClick=()=>{}),i.toggle!==!1&&(i.toggle=!0),i.block&&(i.block=i.block.toLowerCase()),(!i.block||i.block==="draw")&&(i.block=""),i.className?i.className.indexOf("control-icon")===-1&&(i.className=`control-icon ${i.className}`):i.className="control-icon";let r={tool:i.block,className:i.className,title:i.title||"",jsClass:i.name,onClick:i.onClick,afterClick:i.afterClick,doToggle:i.toggle,toggleStatus:!1,disableOtherButtons:i.disableOtherButtons??!0,disableByOtherButtons:i.disableByOtherButtons??!0,cssToggle:i.toggle,position:this.options.position,actions:i.actions||[],disabled:!!i.disabled};this.options[i.name]!==!1&&(this.options[i.name]=!0);let a=this._addButton(i.name,new L.Control.PMButton(r));return this.changeControlOrder(),a},controlExists(i){return!!this.getButton(i)},getButton(i){return this.getButtons()[i]},getButtonsInBlock(i){let r={};if(i)for(let a in this.getButtons()){let u=this.getButtons()[a];(u._button.tool===i||i==="draw"&&!u._button.tool)&&(r[a]=u)}return r},changeControlOrder(i=[]){let r=this._shapeMapping(),a=[];i.forEach(g=>{r[g]?a.push(r[g]):a.push(g)});let u=this.getButtons(),d={};a.forEach(g=>{u[g]&&(d[g]=u[g])}),Object.keys(u).filter(g=>!u[g]._button.tool||u[g]._button.tool==="draw").forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),Object.keys(u).filter(g=>u[g]._button.tool==="edit").forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),Object.keys(u).filter(g=>u[g]._button.tool==="options").forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),Object.keys(u).filter(g=>u[g]._button.tool==="custom").forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),Object.keys(u).forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),this.map.pm.Toolbar.buttons=d,this._showHideButtons()},getControlOrder(){let i=this.getButtons(),r=[];for(let a in i)r.push(a);return r},changeActionsOfControl(i,r){let a=this._btnNameMapping(i);if(!a)throw new TypeError("No name passed");if(!r)throw new TypeError("No actions passed");if(!this.buttons[a])throw new TypeError("Button with this name not exists");this.buttons[a]._button.actions=r,this.changeControlOrder()},setButtonDisabled(i,r){let a=this._btnNameMapping(i);r?this.buttons[a].disable():this.buttons[a].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(i){let r=this._shapeMapping();return r[i]?r[i]:i}}),fo=Ma,mu=v(is()),Pa={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(i){i.forEach(r=>{if(Array.isArray(r)){this._assignEvents(r);return}r.off("drag",this._handleSnapping,this),r.on("drag",this._handleSnapping,this),r.off("dragend",this._cleanupSnapping,this),r.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(i){if(i){let r=i.target;r._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(r=>{r.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(i){var b,k,S;let r=i.target;if(r._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((b=i==null?void 0:i.originalEvent)==null?void 0:b.altKey)||((S=(k=this._map)==null?void 0:k.pm)==null?void 0:S.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let a=this._calcClosestLayer(r.getLatLng(),this._snapList);if(Object.keys(a).length===0)return!1;let u=a.layer instanceof L.Marker||a.layer instanceof L.CircleMarker||!this.options.snapSegment,d;u?d=a.latlng:d=this._checkPrioritiySnapping(a);let g=this.options.snapDistance,_={marker:r,shape:this._shape,snapLatLng:d,segment:a.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:a.layer,distance:a.distance};if(this._fireSnapDrag(_.marker,_),this._fireSnapDrag(this._layer,_),a.distance<g){r._orgLatLng=r.getLatLng(),r.setLatLng(d),r._snapped=!0,r._snapInfo=_;let U=()=>{this._snapLatLng=d,this._fireSnap(r,_),this._fireSnap(this._layer,_)},N=this._snapLatLng||{},me=d||{};(N.lat!==me.lat||N.lng!==me.lng)&&U()}else this._snapLatLng&&(this._unsnap(_),r._snapped=!1,r._snapInfo=void 0,this._fireUnsnap(_.marker,_),this._fireUnsnap(this._layer,_));return!0},_createSnapList(){let i=[],r=[],a=this._map;a.off("layerremove",this._handleSnapLayerRemoval,this),a.on("layerremove",this._handleSnapLayerRemoval,this),a.eachLayer(u=>{if((u instanceof L.Polyline||u instanceof L.Marker||u instanceof L.CircleMarker||u instanceof L.ImageOverlay)&&u.options.snapIgnore!==!0){if(u.options.snapIgnore===void 0&&(!L.PM.optIn&&u.options.pmIgnore===!0||L.PM.optIn&&u.options.pmIgnore!==!1))return;(u instanceof L.Circle||u instanceof L.CircleMarker)&&u.pm&&u.pm._hiddenPolyCircle?i.push(u.pm._hiddenPolyCircle):u instanceof L.ImageOverlay&&(u=L.rectangle(u.getBounds())),i.push(u);let d=L.polyline([],{color:"red",pmIgnore:!0});d._pmTempLayer=!0,r.push(d),(u instanceof L.Circle||u instanceof L.CircleMarker)&&r.push(d)}}),i=i.filter(u=>this._layer!==u),i=i.filter(u=>u._latlng||u._latlngs&&Hn(u._latlngs)),i=i.filter(u=>!u._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let u=L.polyline([],{color:"red",pmIgnore:!0});u._pmTempLayer=!0,r.push(u)}),this._snapList=i.concat(this._otherSnapLayers)):this._snapList=i,this.debugIndicatorLines=r},_handleSnapLayerRemoval({layer:i}){if(!i._leaflet_id)return;let r=this._snapList.findIndex(a=>a._leaflet_id===i._leaflet_id);r>-1&&this._snapList.splice(r,1)},_calcClosestLayer(i,r){return this._calcClosestLayers(i,r,1)[0]},_calcClosestLayers(i,r,a=1){let u=[],d={};r.forEach((_,b)=>{var S;if(_._parentCopy&&_._parentCopy===this._layer||((S=_.getLatLngs)==null?void 0:S.call(_).flat(5).length)<2)return;let k=this._calcLayerDistances(i,_);if(k.distance=Math.floor(k.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[b]){let U=L.polyline([],{color:"red",pmIgnore:!0});U._pmTempLayer=!0,this.debugIndicatorLines[b]=U}this.debugIndicatorLines[b].setLatLngs([i,k.latlng])}a===1&&(d.distance===void 0||k.distance-5<=d.distance)?(k.distance+5<d.distance&&(u=[]),d=k,d.layer=_,u.push(d)):a!==1&&(d={},d=k,d.layer=_,u.push(d))}),a!==1&&(u=u.sort((_,b)=>_.distance-b.distance)),a===-1&&(a=u.length);let g=this._getClosestLayerByPriority(u,a);return L.Util.isArray(g)?g:[g]},_calcLayerDistances(i,r){let a=this._map,u=r instanceof L.Marker||r instanceof L.CircleMarker,d=r instanceof L.Polygon,g=i;if(u){let _=r.getLatLng();return{latlng:{..._},distance:this._getDistance(a,_,g)}}return this._calcLatLngDistances(g,r.getLatLngs(),a,d)},_calcLatLngDistances(i,r,a,u=!1){let d,g,_,b=k=>{k.forEach((S,U)=>{if(Array.isArray(S)){b(S);return}if(this.options.snapSegment){let N=S,me;u?me=U+1===k.length?0:U+1:me=U+1===k.length?void 0:U+1;let we=k[me];if(we){let He=this._getDistanceToSegment(a,i,N,we);(g===void 0||He<g)&&(g=He,_=[N,we])}}else{let N=this._getDistance(a,i,S);(g===void 0||N<g)&&(g=N,d=S)}})};return b(r),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(a,i,_[0],_[1])},segment:_,distance:g}:{latlng:d,distance:g}},_getClosestLayerByPriority(i,r=1){i=i.sort((_,b)=>_._leaflet_id-b._leaflet_id);let a=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],u=this._map.pm.globalOptions.snappingOrder||[],d=0,g={};return u.concat(a).forEach(_=>{g[_]||(d+=1,g[_]=d)}),i.sort(fu("instanceofShape",g)),r===1?i[0]||{}:i.slice(0,r)},_checkPrioritiySnapping(i){let r=this._map,a=i.segment[0],u=i.segment[1],d=i.latlng,g=d;if(this.options.snapVertex){let _=this._getDistance(r,a,d),b=this._getDistance(r,u,d),k=_<b?a:u,S=_<b?_:b;if(this.options.snapMiddle){let N=L.PM.Utils.calcMiddleLatLng(r,a,u),me=this._getDistance(r,N,d);me<_&&me<b&&(k=N,S=me)}let U=this.options.snapDistance;S<U&&(g=k)}return{...g}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(i,r,a,u){let d=i.getMaxZoom();d===1/0&&(d=i.getZoom());let g=i.project(r,d),_=i.project(a,d),b=i.project(u,d),k=L.LineUtil.closestPointOnSegment(g,_,b);return i.unproject(k,d)},_getDistanceToSegment(i,r,a,u){let d=i.latLngToContainerPoint(r),g=i.latLngToContainerPoint(a),_=i.latLngToContainerPoint(u);return L.LineUtil.pointToSegmentDistance(d,g,_)},_getDistance(i,r,a){return i.latLngToContainerPoint(r).distanceTo(i.latLngToContainerPoint(a))}},po=Pa,gu=L.Class.extend({includes:[po,ls],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(i){L.Util.setOptions(this,i),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(i){let r=new L.Icon.Default;r.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=r,this._map=i,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(a=>{this[a]=new L.PM.Draw[a](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(i,r=!1){r?this.options.pathOptions=(0,mu.default)(this.options.pathOptions,i):this.options.pathOptions=i},getShapes(){return this.shapes},getShape(){return this._shape},enable(i,r){if(!i)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[i].enable(r)},disable(){this.shapes.forEach(i=>{this[i].disable()})},addControls(){this.shapes.forEach(i=>{this[i].addButton()})},getActiveShape(){let i;return this.shapes.forEach(r=>{this[r]._enabled&&(i=r)}),i},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let i=[];this._map.eachLayer(r=>{(r instanceof L.Polyline||r instanceof L.Marker||r instanceof L.Circle||r instanceof L.CircleMarker||r instanceof L.ImageOverlay)&&(r._pmTempLayer||i.push(r))}),this._enabled?i.forEach(r=>{L.PM.Utils.disablePopup(r)}):i.forEach(r=>{L.PM.Utils.enablePopup(r)})},createNewDrawInstance(i,r){let a=this._getShapeFromBtnName(r);if(this[i])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[a])throw new TypeError(`There is no class L.PM.Draw.${a}`);return this[i]=new L.PM.Draw[a](this._map),this[i].toolbarButtonName=i,this[i]._shape=i,this.shapes.push(i),this[r]&&this[i].setOptions(this[r].options),this[i].setOptions(this[i].options),this[i]},_getShapeFromBtnName(i){let r={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return r[i]?r[i]:this[i]?this[i]._shape:i},_finishLayer(i){i.pm&&(i.pm.setOptions(this.options),i.pm._shape=this._shape,i.pm._map=this._map),this._addDrawnLayerProp(i)},_addDrawnLayerProp(i){i._drawnByGeoman=!0},_setPane(i,r){r==="layerPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":r==="vertexPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":r==="markerPane"&&(i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),hi=gu;hi.Marker=hi.extend({initialize(i){this._map=i,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(i){L.Util.setOptions(this,i),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(vt("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(r=>{this.isRelevantMarker(r)&&r.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(i=>{this.isRelevantMarker(i)&&i.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},isRelevantMarker(i){return i instanceof L.Marker&&i.pm&&!i._pmTempLayer&&!i.pm._initTextMarker},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let r=i;r.target=this._hintMarker,this._handleSnapping(r)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(i){if(!i.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng(),a=new L.Marker(r,this.options.markerStyle);this._setPane(a,"markerPane"),this._finishLayer(a),a.pm||(a.options.draggable=!1),a.addTo(this._map.pm._getContainingLayer()),a.pm&&this.options.markerEditable?a.pm.enable():a.dragging&&a.dragging.disable(),this._fireCreate(a),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var i,r;(i=this.options.markerStyle)!=null&&i.icon&&((r=this._hintMarker)==null||r.setIcon(this.options.markerStyle.icon))}});var di=63710088e-1,Sa={centimeters:di*100,centimetres:di*100,degrees:di/111325,feet:di*3.28084,inches:di*39.37,kilometers:di/1e3,kilometres:di/1e3,meters:di,metres:di,miles:di/1609.344,millimeters:di*1e3,millimetres:di*1e3,nauticalmiles:di/1852,radians:1,yards:di*1.0936};function Zn(i,r,a){a===void 0&&(a={});var u={type:"Feature"};return(a.id===0||a.id)&&(u.id=a.id),a.bbox&&(u.bbox=a.bbox),u.properties=r||{},u.geometry=i,u}function qn(i,r,a){if(a===void 0&&(a={}),!i)throw new Error("coordinates is required");if(!Array.isArray(i))throw new Error("coordinates must be an Array");if(i.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!mo(i[0])||!mo(i[1]))throw new Error("coordinates must contain numbers");var u={type:"Point",coordinates:i};return Zn(u,r,a)}function Pn(i,r,a){if(a===void 0&&(a={}),i.length<2)throw new Error("coordinates must be an array of two or more positions");var u={type:"LineString",coordinates:i};return Zn(u,r,a)}function bi(i,r){r===void 0&&(r={});var a={type:"FeatureCollection"};return r.id&&(a.id=r.id),r.bbox&&(a.bbox=r.bbox),a.features=i,a}function _u(i,r){r===void 0&&(r="kilometers");var a=Sa[r];if(!a)throw new Error(r+" units is invalid");return i*a}function Rr(i,r){r===void 0&&(r="kilometers");var a=Sa[r];if(!a)throw new Error(r+" units is invalid");return i/a}function xi(i){var r=i%(2*Math.PI);return r*180/Math.PI}function Gi(i){var r=i%360;return r*Math.PI/180}function mo(i){return!isNaN(i)&&i!==null&&!Array.isArray(i)}function ds(i){var r,a,u={type:"FeatureCollection",features:[]};if(i.type==="Feature"?a=i.geometry:a=i,a.type==="LineString")r=[a.coordinates];else if(a.type==="MultiLineString")r=a.coordinates;else if(a.type==="MultiPolygon")r=[].concat.apply([],a.coordinates);else if(a.type==="Polygon")r=a.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return r.forEach(function(d){r.forEach(function(g){for(var _=0;_<d.length-1;_++)for(var b=_;b<g.length-1;b++)if(!(d===g&&(Math.abs(_-b)===1||_===0&&b===d.length-2&&d[_][0]===d[d.length-1][0]&&d[_][1]===d[d.length-1][1]))){var k=go(d[_][0],d[_][1],d[_+1][0],d[_+1][1],g[b][0],g[b][1],g[b+1][0],g[b+1][1]);k&&u.features.push(qn([k[0],k[1]]))}})}),u}function go(i,r,a,u,d,g,_,b){var k,S,U,N,me,we={x:null,y:null,onLine1:!1,onLine2:!1};return k=(b-g)*(a-i)-(_-d)*(u-r),k===0?we.x!==null&&we.y!==null?we:!1:(S=r-g,U=i-d,N=(_-d)*S-(b-g)*U,me=(a-i)*S-(u-r)*U,S=N/k,U=me/k,we.x=i+S*(a-i),we.y=r+S*(u-r),S>=0&&S<=1&&(we.onLine1=!0),U>=0&&U<=1&&(we.onLine2=!0),we.onLine1&&we.onLine2?[we.x,we.y]:!1)}hi.Line=hi.extend({initialize(i){this._map=i,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(i){L.Util.setOptions(this,i),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(vt("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_syncHintLine(){let i=this._layer.getLatLngs();if(i.length>0){let r=i[i.length-1];this._hintline.setLatLngs([r,this._hintMarker.getLatLng()])}},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let a=i;a.target=this._hintMarker,this._handleSnapping(a)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let r=this._layer._defaultShape().slice();r.push(this._hintMarker.getLatLng()),this._change(r)},hasSelfIntersection(){return ds(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(i,r){let a=L.polyline(this._layer.getLatLngs());i&&(r||(r=this._hintMarker.getLatLng()),a.addLatLng(r));let u=ds(a.toGeoJSON(15));this._doesSelfIntersect=u.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(u,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(i){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,i.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng(),a=this._layer.getLatLngs(),u=a[a.length-1];if(r.equals(a[0])||a.length>0&&r.equals(u)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:r,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(r);let d=this._createMarker(r);this._setTooltipText(),this._setHintLineAfterNewVertex(r),this._fireVertexAdded(d,void 0,r,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(i)},_setHintLineAfterNewVertex(i){this._hintline.setLatLngs([i,i])},_removeLastVertex(){let i=this._markers;if(i.length<=1){this.disable();return}let r=this._layer.getLatLngs(),a=i[i.length-1],{indexPath:u}=L.PM.Utils.findDeepMarkerIndex(i,a);i.pop(),this._layerGroup.removeLayer(a);let d=i[i.length-1],g=r.indexOf(d.getLatLng());r=r.slice(0,g+1),this._layer.setLatLngs(r),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(a,u,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let i=this._layer.getLatLngs();if(i.length<=1)return;let r=L.polyline(i,this.options.pathOptions);this._setPane(r,"layerPane"),this._finishLayer(r),r.addTo(this._map.pm._getContainingLayer()),this._fireCreate(r),this.options.snappable&&this._cleanupSnapping();let a=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(a))},_createMarker(i){let r=new L.Marker(i,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._pmTempLayer=!0,this._layerGroup.addLayer(r),this._markers.push(r),r.on("click",this._finishShape,this),r},_setTooltipText(){let{length:i}=this._layer.getLatLngs().flat(),r="";i<=1?r=vt("tooltips.continueLine"):r=vt("tooltips.finishLine"),this._hintMarker.setTooltipContent(r)},_change(i){this._fireChange(i,"Draw")},setStyle(){var i,r;(i=this._layer)==null||i.setStyle(this.options.templineStyle),(r=this._hintline)==null||r.setStyle(this.options.hintlineStyle)}}),hi.Polygon=hi.Line.extend({initialize(i){this._map=i,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(i){L.PM.Draw.Line.prototype.enable.call(this,i),this._layer.pm._shape="Polygon"},_createMarker(i){let r=new L.Marker(i,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._pmTempLayer=!0,this._layerGroup.addLayer(r),this._markers.push(r),this._layer.getLatLngs().flat().length===1?(r.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(r)-1,this.options.snappable&&this._cleanupSnapping()):r.on("click",()=>1),r},_setTooltipText(){let{length:i}=this._layer.getLatLngs().flat(),r="";i<=2?r=vt("tooltips.continueLine"):r=vt("tooltips.finishPoly"),this._hintMarker.setTooltipContent(r)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let i=this._layer.getLatLngs();if(i.length<=2)return;let r=L.polygon(i,this.options.pathOptions);this._setPane(r,"layerPane"),this._finishLayer(r),r.addTo(this._map.pm._getContainingLayer()),this._fireCreate(r),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let a=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(a))}}),hi.Rectangle=hi.extend({initialize(i){this._map=i,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(i){if(L.Util.setOptions(this,i),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(vt("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let r=0;r<2;r+=1){let a=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(a,"vertexPane"),a._pmTempLayer=!0,this._layerGroup.addLayer(a),this._styleMarkers.push(a)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_placeStartingMarkers(i){this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(r),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(a=>{L.DomUtil.addClass(a._icon,"visible"),a.setLatLng(r)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(vt("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let i=this._startMarker.getLatLng();i&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([i,i]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let a=i;a.target=this._hintMarker,this._handleSnapping(a)}let r=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(r,"Draw")},_syncRectangleSize(){let i=Ca(this._startMarker.getLatLng(),this._map),r=Ca(this._hintMarker.getLatLng(),this._map),a=L.PM.Utils._getRotatedRectangle(i,r,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(a),this.options.cursorMarker&&this._styleMarkers){let u=[];a.forEach(d=>{!d.equals(i,1e-8)&&!d.equals(r,1e-8)&&u.push(d)}),u.forEach((d,g)=>{try{this._styleMarkers[g].setLatLng(d)}catch{}})}},_findCorners(){let i=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(i[0],i[2],this.options.rectangleAngle||0,this._map)},_finishShape(i){this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng(),a=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||a.equals(r))return;let u=L.rectangle([a,r],this.options.pathOptions);if(this.options.rectangleAngle){let g=L.PM.Utils._getRotatedRectangle(a,r,this.options.rectangleAngle||0,this._map);u.setLatLngs(g),u.pm&&u.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(u,"layerPane"),this._finishLayer(u),u.addTo(this._map.pm._getContainingLayer()),this._fireCreate(u);let d=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(d))},setStyle(){var i;(i=this._layer)==null||i.setStyle(this.options.pathOptions)}}),hi.CircleMarker=hi.extend({initialize(i){this._map=i,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(i){if(L.Util.setOptions(this,i),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let r={};L.extend(r,this.options.templineStyle),r.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),r),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(vt("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(vt("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(i=>{this.isRelevantMarker(i)&&i.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(i=>{this.isRelevantMarker(i)&&i.pm.disable()})},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_placeCenterMarker(i){this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let r=this._hintMarker.getLatLng();this._centerMarker.setLatLng(r),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let i=this._centerMarker.getLatLng();i&&(this._layer.setLatLng(i),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(vt("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let i=this._centerMarker.getLatLng(),r=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([i,r])},_syncCircleRadius(){let i=this._centerMarker.getLatLng(),r=this._hintMarker.getLatLng(),a=this._distanceCalculation(i,r);this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(a)},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let a=i;a.target=this._hintMarker,this._handleSnapping(a)}this._handleHintMarkerSnapping();let r=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(r,"Draw")},isRelevantMarker(i){return i instanceof L.CircleMarker&&!(i instanceof L.Circle)&&i.pm&&!i._pmTempLayer},_createMarker(i){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!i.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng(),a=new this._BaseCircleClass(r,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(a,"layerPane"),this._finishLayer(a),a.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(a),this._fireCreate(a),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(i){i.pm&&this.options.markerEditable&&i.pm.enable()},_finishShape(i){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._centerMarker.getLatLng(),a=this._defaultRadius;if(this.options[this._editableOption]){let _=this._hintMarker.getLatLng();a=this._distanceCalculation(r,_),this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?a=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&(a=this.options[this._maxRadiusOption])}let u={...this.options.pathOptions,radius:a},d=new this._BaseCircleClass(r,u);this._setPane(d,"layerPane"),this._finishLayer(d),d.addTo(this._map.pm._getContainingLayer()),d.pm&&d.pm._updateHiddenPolyCircle(),this._fireCreate(d);let g=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(g))},_getNewDestinationOfHintMarker(){let i=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return i;let r=this._centerMarker.getLatLng(),a=this._distanceCalculation(r,i);this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?i=hs(this._map,r,i,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&(i=hs(this._map,r,i,this._getMaxDistanceInMeter()))}return i},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let i=this._centerMarker.getLatLng(),r=this._hintMarker.getLatLng(),a=this._distanceCalculation(i,r);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var r,a;let i={};L.extend(i,this.options.templineStyle),this.options[this._editableOption]&&(i.radius=0),(r=this._layer)==null||r.setStyle(i),(a=this._hintline)==null||a.setStyle(this.options.hintlineStyle)},_distanceCalculation(i,r){return this._map.project(i).distanceTo(this._map.project(r))}}),hi.Circle=hi.CircleMarker.extend({initialize(i){this._map=i,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(i,r){return this._map.distance(i,r)}});function Vi(i){if(!i)throw new Error("coord is required");if(!Array.isArray(i)){if(i.type==="Feature"&&i.geometry!==null&&i.geometry.type==="Point")return i.geometry.coordinates;if(i.type==="Point")return i.coordinates}if(Array.isArray(i)&&i.length>=2&&!Array.isArray(i[0])&&!Array.isArray(i[1]))return i;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function on(i){if(Array.isArray(i))return i;if(i.type==="Feature"){if(i.geometry!==null)return i.geometry.coordinates}else if(i.coordinates)return i.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function fs(i){return i.type==="Feature"?i.geometry:i}function _o(i,r){return i.type==="FeatureCollection"?"FeatureCollection":i.type==="GeometryCollection"?"GeometryCollection":i.type==="Feature"&&i.geometry!==null?i.geometry.type:i.type}function yo(i,r,a){if(i!==null)for(var u,d,g,_,b,k,S,U=0,N=0,me,we=i.type,He=we==="FeatureCollection",Qe=we==="Feature",ot=He?i.features.length:1,At=0;At<ot;At++){S=He?i.features[At].geometry:Qe?i.geometry:i,me=S?S.type==="GeometryCollection":!1,b=me?S.geometries.length:1;for(var z=0;z<b;z++){var J=0,oe=0;if(_=me?S.geometries[z]:S,_!==null){k=_.coordinates;var Le=_.type;switch(U=0,Le){case null:break;case"Point":if(r(k,N,At,J,oe)===!1)return!1;N++,J++;break;case"LineString":case"MultiPoint":for(u=0;u<k.length;u++){if(r(k[u],N,At,J,oe)===!1)return!1;N++,Le==="MultiPoint"&&J++}Le==="LineString"&&J++;break;case"Polygon":case"MultiLineString":for(u=0;u<k.length;u++){for(d=0;d<k[u].length-U;d++){if(r(k[u][d],N,At,J,oe)===!1)return!1;N++}Le==="MultiLineString"&&J++,Le==="Polygon"&&oe++}Le==="Polygon"&&J++;break;case"MultiPolygon":for(u=0;u<k.length;u++){for(oe=0,d=0;d<k[u].length;d++){for(g=0;g<k[u][d].length-U;g++){if(r(k[u][d][g],N,At,J,oe)===!1)return!1;N++}oe++}J++}break;case"GeometryCollection":for(u=0;u<_.geometries.length;u++)if(yo(_.geometries[u],r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function gi(i,r){if(i.type==="Feature")r(i,0);else if(i.type==="FeatureCollection")for(var a=0;a<i.features.length&&r(i.features[a],a)!==!1;a++);}function cr(i,r,a){var u=a;return gi(i,function(d,g){g===0&&a===void 0?u=d:u=r(u,d,g)}),u}function yu(i,r){var a,u,d,g,_,b,k,S,U,N,me=0,we=i.type==="FeatureCollection",He=i.type==="Feature",Qe=we?i.features.length:1;for(a=0;a<Qe;a++){for(b=we?i.features[a].geometry:He?i.geometry:i,S=we?i.features[a].properties:He?i.properties:{},U=we?i.features[a].bbox:He?i.bbox:void 0,N=we?i.features[a].id:He?i.id:void 0,k=b?b.type==="GeometryCollection":!1,_=k?b.geometries.length:1,d=0;d<_;d++){if(g=k?b.geometries[d]:b,g===null){if(r(null,me,S,U,N)===!1)return!1;continue}switch(g.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(r(g,me,S,U,N)===!1)return!1;break}case"GeometryCollection":{for(u=0;u<g.geometries.length;u++)if(r(g.geometries[u],me,S,U,N)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}me++}}function Ji(i,r){yu(i,function(a,u,d,g,_){var b=a===null?null:a.type;switch(b){case null:case"Point":case"LineString":case"Polygon":return r(Zn(a,d,{bbox:g,id:_}),u,0)===!1?!1:void 0}var k;switch(b){case"MultiPoint":k="Point";break;case"MultiLineString":k="LineString";break;case"MultiPolygon":k="Polygon";break}for(var S=0;S<a.coordinates.length;S++){var U=a.coordinates[S],N={type:k,coordinates:U};if(r(Zn(N,d),u,S)===!1)return!1}})}function vu(i){if(!i)throw new Error("geojson is required");var r=[];return Ji(i,function(a){hr(a,r)}),bi(r)}function hr(i,r){var a=[],u=i.geometry;if(u!==null){switch(u.type){case"Polygon":a=on(u);break;case"LineString":a=[on(u)]}a.forEach(function(d){var g=bu(d,i.properties);g.forEach(function(_){_.id=r.length,r.push(_)})})}}function bu(i,r){var a=[];return i.reduce(function(u,d){var g=Pn([u,d],r);return g.bbox=Or(u,d),a.push(g),d}),a}function Or(i,r){var a=i[0],u=i[1],d=r[0],g=r[1],_=a<d?a:d,b=u<g?u:g,k=a>d?a:d,S=u>g?u:g;return[_,b,k,S]}var ps=vu,ms=v($n(),1);function xu(i,r){var a={},u=[];if(i.type==="LineString"&&(i=Zn(i)),r.type==="LineString"&&(r=Zn(r)),i.type==="Feature"&&r.type==="Feature"&&i.geometry!==null&&r.geometry!==null&&i.geometry.type==="LineString"&&r.geometry.type==="LineString"&&i.geometry.coordinates.length===2&&r.geometry.coordinates.length===2){var d=gn(i,r);return d&&u.push(d),bi(u)}var g=(0,ms.default)();return g.load(ps(r)),gi(ps(i),function(_){gi(g.search(_),function(b){var k=gn(_,b);if(k){var S=on(k).join(",");a[S]||(a[S]=!0,u.push(k))}})}),bi(u)}function gn(i,r){var a=on(i),u=on(r);if(a.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(u.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var d=a[0][0],g=a[0][1],_=a[1][0],b=a[1][1],k=u[0][0],S=u[0][1],U=u[1][0],N=u[1][1],me=(N-S)*(_-d)-(U-k)*(b-g),we=(U-k)*(g-S)-(N-S)*(d-k),He=(_-d)*(g-S)-(b-g)*(d-k);if(me===0)return null;var Qe=we/me,ot=He/me;if(Qe>=0&&Qe<=1&&ot>=0&&ot<=1){var At=d+Qe*(_-d),z=g+Qe*(b-g);return qn([At,z])}return null}var an=xu,Ba=v($n(),1);function vo(i,r,a){a===void 0&&(a={});var u=Vi(i),d=Vi(r),g=Gi(d[1]-u[1]),_=Gi(d[0]-u[0]),b=Gi(u[1]),k=Gi(d[1]),S=Math.pow(Math.sin(g/2),2)+Math.pow(Math.sin(_/2),2)*Math.cos(b)*Math.cos(k);return _u(2*Math.atan2(Math.sqrt(S),Math.sqrt(1-S)),a.units)}var Kn=vo;function _n(i){var r=i[0],a=i[1],u=i[2],d=i[3],g=Kn(i.slice(0,2),[u,a]),_=Kn(i.slice(0,2),[r,d]);if(g>=_){var b=(a+d)/2;return[r,b-(u-r)/2,u,b+(u-r)/2]}else{var k=(r+u)/2;return[k-(d-a)/2,a,k+(d-a)/2,d]}}var wu=_n;function Sn(i){var r=[1/0,1/0,-1/0,-1/0];return yo(i,function(a){r[0]>a[0]&&(r[0]=a[0]),r[1]>a[1]&&(r[1]=a[1]),r[2]<a[0]&&(r[2]=a[0]),r[3]<a[1]&&(r[3]=a[1])}),r}Sn.default=Sn;var Ir=Sn;function yn(i,r){r===void 0&&(r={});var a=r.precision,u=r.coordinates,d=r.mutate;if(a=a==null||isNaN(a)?6:a,u=u==null||isNaN(u)?3:u,!i)throw new Error("<geojson> is required");if(typeof a!="number")throw new Error("<precision> must be a number");if(typeof u!="number")throw new Error("<coordinates> must be a number");(d===!1||d===void 0)&&(i=JSON.parse(JSON.stringify(i)));var g=Math.pow(10,a);return yo(i,function(_){gs(_,g,u)}),i}function gs(i,r,a){i.length>a&&i.splice(a,i.length);for(var u=0;u<i.length;u++)i[u]=Math.round(i[u]*r)/r;return i}var Aa=yn;function _s(i,r,a){if(a===void 0&&(a={}),a.final===!0)return ys(i,r);var u=Vi(i),d=Vi(r),g=Gi(u[0]),_=Gi(d[0]),b=Gi(u[1]),k=Gi(d[1]),S=Math.sin(_-g)*Math.cos(k),U=Math.cos(b)*Math.sin(k)-Math.sin(b)*Math.cos(k)*Math.cos(_-g);return xi(Math.atan2(S,U))}function ys(i,r){var a=_s(r,i);return a=(a+180)%360,a}function vs(i,r,a,u){u===void 0&&(u={});var d=Vi(i),g=Gi(d[0]),_=Gi(d[1]),b=Gi(a),k=Rr(r,u.units),S=Math.asin(Math.sin(_)*Math.cos(k)+Math.cos(_)*Math.sin(k)*Math.cos(b)),U=g+Math.atan2(Math.sin(b)*Math.sin(k)*Math.cos(_),Math.cos(k)-Math.sin(_)*Math.sin(S)),N=xi(U),me=xi(S);return qn([N,me],u.properties)}function bs(i,r,a){a===void 0&&(a={});var u=qn([1/0,1/0],{dist:1/0}),d=0;return Ji(i,function(g){for(var _=on(g),b=0;b<_.length-1;b++){var k=qn(_[b]);k.properties.dist=Kn(r,k,a);var S=qn(_[b+1]);S.properties.dist=Kn(r,S,a);var U=Kn(k,S,a),N=Math.max(k.properties.dist,S.properties.dist),me=_s(k,S),we=vs(r,N,me+90,a),He=vs(r,N,me-90,a),Qe=an(Pn([we.geometry.coordinates,He.geometry.coordinates]),Pn([k.geometry.coordinates,S.geometry.coordinates])),ot=null;Qe.features.length>0&&(ot=Qe.features[0],ot.properties.dist=Kn(r,ot,a),ot.properties.location=d+Kn(k,ot,a)),k.properties.dist<u.properties.dist&&(u=k,u.properties.index=b,u.properties.location=d),S.properties.dist<u.properties.dist&&(u=S,u.properties.index=b+1,u.properties.location=d+U),ot&&ot.properties.dist<u.properties.dist&&(u=ot,u.properties.index=b),d+=U}}),u}var dr=bs;function xs(i,r){if(!i)throw new Error("line is required");if(!r)throw new Error("splitter is required");var a=_o(i),u=_o(r);if(a!=="LineString")throw new Error("line must be LineString");if(u==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(u==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var d=Aa(r,{precision:7});switch(u){case"Point":return Ls(i,d);case"MultiPoint":return ws(i,d);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return ws(i,an(i,d))}}function ws(i,r){var a=[],u=(0,Ba.default)();return Ji(r,function(d){if(a.forEach(function(b,k){b.id=k}),!a.length)a=Ls(i,d).features,a.forEach(function(b){b.bbox||(b.bbox=wu(Ir(b)))}),u.load(bi(a));else{var g=u.search(d);if(g.features.length){var _=Ta(d,g);a=a.filter(function(b){return b.id!==_.id}),u.remove(_),gi(Ls(_,d),function(b){a.push(b),u.insert(b)})}}}),bi(a)}function Ls(i,r){var a=[],u=on(i)[0],d=on(i)[i.geometry.coordinates.length-1];if(fr(u,Vi(r))||fr(d,Vi(r)))return bi([i]);var g=(0,Ba.default)(),_=ps(i);g.load(_);var b=g.search(r);if(!b.features.length)return bi([i]);var k=Ta(r,b),S=[u],U=cr(_,function(N,me,we){var He=on(me)[1],Qe=Vi(r);return we===k.id?(N.push(Qe),a.push(Pn(N)),fr(Qe,He)?[Qe]:[Qe,He]):(N.push(He),N)},S);return U.length>1&&a.push(Pn(U)),bi(a)}function Ta(i,r){if(!r.features.length)throw new Error("lines must contain features");if(r.features.length===1)return r.features[0];var a,u=1/0;return gi(r,function(d){var g=dr(d,i),_=g.properties.dist;_<u&&(a=d,u=_)}),a}function fr(i,r){return i[0]===r[0]&&i[1]===r[1]}var Lu=xs;function Fr(i,r,a){if(a===void 0&&(a={}),!i)throw new Error("point is required");if(!r)throw new Error("polygon is required");var u=Vi(i),d=fs(r),g=d.type,_=r.bbox,b=d.coordinates;if(_&&Ra(u,_)===!1)return!1;g==="Polygon"&&(b=[b]);for(var k=!1,S=0;S<b.length&&!k;S++)if(Da(u,b[S][0],a.ignoreBoundary)){for(var U=!1,N=1;N<b[S].length&&!U;)Da(u,b[S][N],!a.ignoreBoundary)&&(U=!0),N++;U||(k=!0)}return k}function Da(i,r,a){var u=!1;r[0][0]===r[r.length-1][0]&&r[0][1]===r[r.length-1][1]&&(r=r.slice(0,r.length-1));for(var d=0,g=r.length-1;d<r.length;g=d++){var _=r[d][0],b=r[d][1],k=r[g][0],S=r[g][1],U=i[1]*(_-k)+b*(k-i[0])+S*(i[0]-_)===0&&(_-i[0])*(k-i[0])<=0&&(b-i[1])*(S-i[1])<=0;if(U)return!a;var N=b>i[1]!=S>i[1]&&i[0]<(k-_)*(i[1]-b)/(S-b)+_;N&&(u=!u)}return u}function Ra(i,r){return r[0]<=i[0]&&r[1]<=i[1]&&r[2]>=i[0]&&r[3]>=i[1]}function Cu(i,r,a){a===void 0&&(a={});for(var u=Vi(i),d=on(r),g=0;g<d.length-1;g++){var _=!1;if(a.ignoreEndVertices&&(g===0&&(_="start"),g===d.length-2&&(_="end"),g===0&&g+1===d.length-1&&(_="both")),ln(d[g],d[g+1],u,_,typeof a.epsilon>"u"?null:a.epsilon))return!0}return!1}function ln(i,r,a,u,d){var g=a[0],_=a[1],b=i[0],k=i[1],S=r[0],U=r[1],N=a[0]-b,me=a[1]-k,we=S-b,He=U-k,Qe=N*He-me*we;if(d!==null){if(Math.abs(Qe)>d)return!1}else if(Qe!==0)return!1;if(u){if(u==="start")return Math.abs(we)>=Math.abs(He)?we>0?b<g&&g<=S:S<=g&&g<b:He>0?k<_&&_<=U:U<=_&&_<k;if(u==="end")return Math.abs(we)>=Math.abs(He)?we>0?b<=g&&g<S:S<g&&g<=b:He>0?k<=_&&_<U:U<_&&_<=k;if(u==="both")return Math.abs(we)>=Math.abs(He)?we>0?b<g&&g<S:S<g&&g<b:He>0?k<_&&_<U:U<_&&_<k}else return Math.abs(we)>=Math.abs(He)?we>0?b<=g&&g<=S:S<=g&&g<=b:He>0?k<=_&&_<=U:U<=_&&_<=k;return!1}var Bn=Cu;function ku(i,r){var a=fs(i),u=fs(r),d=a.type,g=u.type,_=a.coordinates,b=u.coordinates;switch(d){case"Point":switch(g){case"Point":return ks(_,b);default:throw new Error("feature2 "+g+" geometry not supported")}case"MultiPoint":switch(g){case"Point":return Cs(a,u);case"MultiPoint":return Eu(a,u);default:throw new Error("feature2 "+g+" geometry not supported")}case"LineString":switch(g){case"Point":return Bn(u,a,{ignoreEndVertices:!0});case"LineString":return Nr(a,u);case"MultiPoint":return Oa(a,u);default:throw new Error("feature2 "+g+" geometry not supported")}case"Polygon":switch(g){case"Point":return Fr(u,a,{ignoreBoundary:!0});case"LineString":return Pu(a,u);case"Polygon":return pr(a,u);case"MultiPoint":return Mu(a,u);default:throw new Error("feature2 "+g+" geometry not supported")}default:throw new Error("feature1 "+d+" geometry not supported")}}function Cs(i,r){var a,u=!1;for(a=0;a<i.coordinates.length;a++)if(ks(i.coordinates[a],r.coordinates)){u=!0;break}return u}function Eu(i,r){for(var a=0,u=r.coordinates;a<u.length;a++){for(var d=u[a],g=!1,_=0,b=i.coordinates;_<b.length;_++){var k=b[_];if(ks(d,k)){g=!0;break}}if(!g)return!1}return!0}function Oa(i,r){for(var a=!1,u=0,d=r.coordinates;u<d.length;u++){var g=d[u];if(Bn(g,i,{ignoreEndVertices:!0})&&(a=!0),!Bn(g,i))return!1}return!!a}function Mu(i,r){for(var a=0,u=r.coordinates;a<u.length;a++){var d=u[a];if(!Fr(d,i,{ignoreBoundary:!0}))return!1}return!0}function Nr(i,r){for(var a=!1,u=0,d=r.coordinates;u<d.length;u++){var g=d[u];if(Bn({type:"Point",coordinates:g},i,{ignoreEndVertices:!0})&&(a=!0),!Bn({type:"Point",coordinates:g},i,{ignoreEndVertices:!1}))return!1}return a}function Pu(i,r){var a=!1,u=0,d=Ir(i),g=Ir(r);if(!bo(d,g))return!1;for(u;u<r.coordinates.length-1;u++){var _=Su(r.coordinates[u],r.coordinates[u+1]);if(Fr({type:"Point",coordinates:_},i,{ignoreBoundary:!0})){a=!0;break}}return a}function pr(i,r){if(i.type==="Feature"&&i.geometry===null||r.type==="Feature"&&r.geometry===null)return!1;var a=Ir(i),u=Ir(r);if(!bo(a,u))return!1;for(var d=fs(r).coordinates,g=0,_=d;g<_.length;g++)for(var b=_[g],k=0,S=b;k<S.length;k++){var U=S[k];if(!Fr(U,i))return!1}return!0}function bo(i,r){return!(i[0]>r[0]||i[2]<r[2]||i[1]>r[1]||i[3]<r[3])}function ks(i,r){return i[0]===r[0]&&i[1]===r[1]}function Su(i,r){return[(i[0]+r[0])/2,(i[1]+r[1])/2]}var vn=v(kn()),xo=i=>()=>i,Es=i=>{let r=i?(a,u)=>u.minus(a).abs().isLessThanOrEqualTo(i):xo(!1);return(a,u)=>r(a,u)?0:a.comparedTo(u)};function zr(i){let r=i?(a,u,d,g,_)=>a.exponentiatedBy(2).isLessThanOrEqualTo(g.minus(u).exponentiatedBy(2).plus(_.minus(d).exponentiatedBy(2)).times(i)):xo(!1);return(a,u,d)=>{let g=a.x,_=a.y,b=d.x,k=d.y,S=_.minus(k).times(u.x.minus(b)).minus(g.minus(b).times(u.y.minus(k)));return r(S,g,_,b,k)?0:S.comparedTo(0)}}var Bu=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,mr=Math.ceil,fi=Math.floor,_i="[BigNumber Error] ",wo=_i+"Number primitive has more than 15 significant digits: ",Xi=1e14,_t=14,Lo=9007199254740991,Ms=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],bn=1e7,wi=1e9;function Ia(i){var r,a,u,d=z.prototype={constructor:z,toString:null,valueOf:null},g=new z(1),_=20,b=4,k=-7,S=21,U=-1e7,N=1e7,me=!1,we=1,He=0,Qe={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},ot="0123456789abcdefghijklmnopqrstuvwxyz",At=!0;function z(E,A){var R,T,O,I,Q,Y,ne,fe,de=this;if(!(de instanceof z))return new z(E,A);if(A==null){if(E&&E._isBigNumber===!0){de.s=E.s,!E.c||E.e>N?de.c=de.e=null:E.e<U?de.c=[de.e=0]:(de.e=E.e,de.c=E.c.slice());return}if((Y=typeof E=="number")&&E*0==0){if(de.s=1/E<0?(E=-E,-1):1,E===~~E){for(I=0,Q=E;Q>=10;Q/=10,I++);I>N?de.c=de.e=null:(de.e=I,de.c=[E]);return}fe=String(E)}else{if(!Bu.test(fe=String(E)))return u(de,fe,Y);de.s=fe.charCodeAt(0)==45?(fe=fe.slice(1),-1):1}(I=fe.indexOf("."))>-1&&(fe=fe.replace(".","")),(Q=fe.search(/e/i))>0?(I<0&&(I=Q),I+=+fe.slice(Q+1),fe=fe.substring(0,Q)):I<0&&(I=fe.length)}else{if(t(A,2,ot.length,"Base"),A==10&&At)return de=new z(E),ae(de,_+de.e+1,b);if(fe=String(E),Y=typeof E=="number"){if(E*0!=0)return u(de,fe,Y,A);if(de.s=1/E<0?(fe=fe.slice(1),-1):1,z.DEBUG&&fe.replace(/^0\.0*|\./,"").length>15)throw Error(wo+E)}else de.s=fe.charCodeAt(0)===45?(fe=fe.slice(1),-1):1;for(R=ot.slice(0,A),I=Q=0,ne=fe.length;Q<ne;Q++)if(R.indexOf(T=fe.charAt(Q))<0){if(T=="."){if(Q>I){I=ne;continue}}else if(!O&&(fe==fe.toUpperCase()&&(fe=fe.toLowerCase())||fe==fe.toLowerCase()&&(fe=fe.toUpperCase()))){O=!0,Q=-1,I=0;continue}return u(de,String(E),Y,A)}Y=!1,fe=a(fe,A,10,de.s),(I=fe.indexOf("."))>-1?fe=fe.replace(".",""):I=fe.length}for(Q=0;fe.charCodeAt(Q)===48;Q++);for(ne=fe.length;fe.charCodeAt(--ne)===48;);if(fe=fe.slice(Q,++ne)){if(ne-=Q,Y&&z.DEBUG&&ne>15&&(E>Lo||E!==fi(E)))throw Error(wo+de.s*E);if((I=I-Q-1)>N)de.c=de.e=null;else if(I<U)de.c=[de.e=0];else{if(de.e=I,de.c=[],Q=(I+1)%_t,I<0&&(Q+=_t),Q<ne){for(Q&&de.c.push(+fe.slice(0,Q)),ne-=_t;Q<ne;)de.c.push(+fe.slice(Q,Q+=_t));Q=_t-(fe=fe.slice(Q)).length}else Q-=ne;for(;Q--;fe+="0");de.c.push(+fe)}}else de.c=[de.e=0]}z.clone=Ia,z.ROUND_UP=0,z.ROUND_DOWN=1,z.ROUND_CEIL=2,z.ROUND_FLOOR=3,z.ROUND_HALF_UP=4,z.ROUND_HALF_DOWN=5,z.ROUND_HALF_EVEN=6,z.ROUND_HALF_CEIL=7,z.ROUND_HALF_FLOOR=8,z.EUCLID=9,z.config=z.set=function(E){var A,R;if(E!=null)if(typeof E=="object"){if(E.hasOwnProperty(A="DECIMAL_PLACES")&&(R=E[A],t(R,0,wi,A),_=R),E.hasOwnProperty(A="ROUNDING_MODE")&&(R=E[A],t(R,0,8,A),b=R),E.hasOwnProperty(A="EXPONENTIAL_AT")&&(R=E[A],R&&R.pop?(t(R[0],-1e9,0,A),t(R[1],0,wi,A),k=R[0],S=R[1]):(t(R,-1e9,wi,A),k=-(S=R<0?-R:R))),E.hasOwnProperty(A="RANGE"))if(R=E[A],R&&R.pop)t(R[0],-1e9,-1,A),t(R[1],1,wi,A),U=R[0],N=R[1];else if(t(R,-1e9,wi,A),R)U=-(N=R<0?-R:R);else throw Error(_i+A+" cannot be zero: "+R);if(E.hasOwnProperty(A="CRYPTO"))if(R=E[A],R===!!R)if(R)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))me=R;else throw me=!R,Error(_i+"crypto unavailable");else me=R;else throw Error(_i+A+" not true or false: "+R);if(E.hasOwnProperty(A="MODULO_MODE")&&(R=E[A],t(R,0,9,A),we=R),E.hasOwnProperty(A="POW_PRECISION")&&(R=E[A],t(R,0,wi,A),He=R),E.hasOwnProperty(A="FORMAT"))if(R=E[A],typeof R=="object")Qe=R;else throw Error(_i+A+" not an object: "+R);if(E.hasOwnProperty(A="ALPHABET"))if(R=E[A],typeof R=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(R))At=R.slice(0,10)=="0123456789",ot=R;else throw Error(_i+A+" invalid: "+R)}else throw Error(_i+"Object expected: "+E);return{DECIMAL_PLACES:_,ROUNDING_MODE:b,EXPONENTIAL_AT:[k,S],RANGE:[U,N],CRYPTO:me,MODULO_MODE:we,POW_PRECISION:He,FORMAT:Qe,ALPHABET:ot}},z.isBigNumber=function(E){if(!E||E._isBigNumber!==!0)return!1;if(!z.DEBUG)return!0;var A,R,T=E.c,O=E.e,I=E.s;e:if({}.toString.call(T)=="[object Array]"){if((I===1||I===-1)&&O>=-1e9&&O<=wi&&O===fi(O)){if(T[0]===0){if(O===0&&T.length===1)return!0;break e}if(A=(O+1)%_t,A<1&&(A+=_t),String(T[0]).length==A){for(A=0;A<T.length;A++)if(R=T[A],R<0||R>=Xi||R!==fi(R))break e;if(R!==0)return!0}}}else if(T===null&&O===null&&(I===null||I===1||I===-1))return!0;throw Error(_i+"Invalid BigNumber: "+E)},z.maximum=z.max=function(){return oe(arguments,-1)},z.minimum=z.min=function(){return oe(arguments,1)},z.random=function(){var E=9007199254740992,A=Math.random()*E&2097151?function(){return fi(Math.random()*E)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(R){var T,O,I,Q,Y,ne=0,fe=[],de=new z(g);if(R==null?R=_:t(R,0,wi),Q=mr(R/_t),me)if(crypto.getRandomValues){for(T=crypto.getRandomValues(new Uint32Array(Q*=2));ne<Q;)Y=T[ne]*131072+(T[ne+1]>>>11),Y>=9e15?(O=crypto.getRandomValues(new Uint32Array(2)),T[ne]=O[0],T[ne+1]=O[1]):(fe.push(Y%1e14),ne+=2);ne=Q/2}else if(crypto.randomBytes){for(T=crypto.randomBytes(Q*=7);ne<Q;)Y=(T[ne]&31)*281474976710656+T[ne+1]*1099511627776+T[ne+2]*4294967296+T[ne+3]*16777216+(T[ne+4]<<16)+(T[ne+5]<<8)+T[ne+6],Y>=9e15?crypto.randomBytes(7).copy(T,ne):(fe.push(Y%1e14),ne+=7);ne=Q/7}else throw me=!1,Error(_i+"crypto unavailable");if(!me)for(;ne<Q;)Y=A(),Y<9e15&&(fe[ne++]=Y%1e14);for(Q=fe[--ne],R%=_t,Q&&R&&(Y=Ms[_t-R],fe[ne]=fi(Q/Y)*Y);fe[ne]===0;fe.pop(),ne--);if(ne<0)fe=[I=0];else{for(I=-1;fe[0]===0;fe.splice(0,1),I-=_t);for(ne=1,Y=fe[0];Y>=10;Y/=10,ne++);ne<_t&&(I-=_t-ne)}return de.e=I,de.c=fe,de}}(),z.sum=function(){for(var E=1,A=arguments,R=new z(A[0]);E<A.length;)R=R.plus(A[E++]);return R},a=function(){var E="0123456789";function A(R,T,O,I){for(var Q,Y=[0],ne,fe=0,de=R.length;fe<de;){for(ne=Y.length;ne--;Y[ne]*=T);for(Y[0]+=I.indexOf(R.charAt(fe++)),Q=0;Q<Y.length;Q++)Y[Q]>O-1&&(Y[Q+1]==null&&(Y[Q+1]=0),Y[Q+1]+=Y[Q]/O|0,Y[Q]%=O)}return Y.reverse()}return function(R,T,O,I,Q){var Y,ne,fe,de,Ue,rt,lt,dt,Ft=R.indexOf("."),Ut=_,Ot=b;for(Ft>=0&&(de=He,He=0,R=R.replace(".",""),dt=new z(T),rt=dt.pow(R.length-Ft),He=de,dt.c=A(m(Oi(rt.c),rt.e,"0"),10,O,E),dt.e=dt.c.length),lt=A(R,T,O,Q?(Y=ot,E):(Y=E,ot)),fe=de=lt.length;lt[--de]==0;lt.pop());if(!lt[0])return Y.charAt(0);if(Ft<0?--fe:(rt.c=lt,rt.e=fe,rt.s=I,rt=r(rt,dt,Ut,Ot,O),lt=rt.c,Ue=rt.r,fe=rt.e),ne=fe+Ut+1,Ft=lt[ne],de=O/2,Ue=Ue||ne<0||lt[ne+1]!=null,Ue=Ot<4?(Ft!=null||Ue)&&(Ot==0||Ot==(rt.s<0?3:2)):Ft>de||Ft==de&&(Ot==4||Ue||Ot==6&&lt[ne-1]&1||Ot==(rt.s<0?8:7)),ne<1||!lt[0])R=Ue?m(Y.charAt(1),-Ut,Y.charAt(0)):Y.charAt(0);else{if(lt.length=ne,Ue)for(--O;++lt[--ne]>O;)lt[ne]=0,ne||(++fe,lt=[1].concat(lt));for(de=lt.length;!lt[--de];);for(Ft=0,R="";Ft<=de;R+=Y.charAt(lt[Ft++]));R=m(R,fe,Y.charAt(0))}return R}}(),r=function(){function E(T,O,I){var Q,Y,ne,fe,de=0,Ue=T.length,rt=O%bn,lt=O/bn|0;for(T=T.slice();Ue--;)ne=T[Ue]%bn,fe=T[Ue]/bn|0,Q=lt*ne+fe*rt,Y=rt*ne+Q%bn*bn+de,de=(Y/I|0)+(Q/bn|0)+lt*fe,T[Ue]=Y%I;return de&&(T=[de].concat(T)),T}function A(T,O,I,Q){var Y,ne;if(I!=Q)ne=I>Q?1:-1;else for(Y=ne=0;Y<I;Y++)if(T[Y]!=O[Y]){ne=T[Y]>O[Y]?1:-1;break}return ne}function R(T,O,I,Q){for(var Y=0;I--;)T[I]-=Y,Y=T[I]<O[I]?1:0,T[I]=Y*Q+T[I]-O[I];for(;!T[0]&&T.length>1;T.splice(0,1));}return function(T,O,I,Q,Y){var ne,fe,de,Ue,rt,lt,dt,Ft,Ut,Ot,Gt,Ci,Ga,Iu,Fu,An,Mo,hn=T.s==O.s?1:-1,Ii=T.c,ti=O.c;if(!Ii||!Ii[0]||!ti||!ti[0])return new z(!T.s||!O.s||(Ii?ti&&Ii[0]==ti[0]:!ti)?NaN:Ii&&Ii[0]==0||!ti?hn*0:hn/0);for(Ft=new z(hn),Ut=Ft.c=[],fe=T.e-O.e,hn=I+fe+1,Y||(Y=Xi,fe=Ri(T.e/_t)-Ri(O.e/_t),hn=hn/_t|0),de=0;ti[de]==(Ii[de]||0);de++);if(ti[de]>(Ii[de]||0)&&fe--,hn<0)Ut.push(1),Ue=!0;else{for(Iu=Ii.length,An=ti.length,de=0,hn+=2,rt=fi(Y/(ti[0]+1)),rt>1&&(ti=E(ti,rt,Y),Ii=E(Ii,rt,Y),An=ti.length,Iu=Ii.length),Ga=An,Ot=Ii.slice(0,An),Gt=Ot.length;Gt<An;Ot[Gt++]=0);Mo=ti.slice(),Mo=[0].concat(Mo),Fu=ti[0],ti[1]>=Y/2&&Fu++;do{if(rt=0,ne=A(ti,Ot,An,Gt),ne<0){if(Ci=Ot[0],An!=Gt&&(Ci=Ci*Y+(Ot[1]||0)),rt=fi(Ci/Fu),rt>1)for(rt>=Y&&(rt=Y-1),lt=E(ti,rt,Y),dt=lt.length,Gt=Ot.length;A(lt,Ot,dt,Gt)==1;)rt--,R(lt,An<dt?Mo:ti,dt,Y),dt=lt.length,ne=1;else rt==0&&(ne=rt=1),lt=ti.slice(),dt=lt.length;if(dt<Gt&&(lt=[0].concat(lt)),R(Ot,lt,Gt,Y),Gt=Ot.length,ne==-1)for(;A(ti,Ot,An,Gt)<1;)rt++,R(Ot,An<Gt?Mo:ti,Gt,Y),Gt=Ot.length}else ne===0&&(rt++,Ot=[0]);Ut[de++]=rt,Ot[0]?Ot[Gt++]=Ii[Ga]||0:(Ot=[Ii[Ga]],Gt=1)}while((Ga++<Iu||Ot[0]!=null)&&hn--);Ue=Ot[0]!=null,Ut[0]||Ut.splice(0,1)}if(Y==Xi){for(de=1,hn=Ut[0];hn>=10;hn/=10,de++);ae(Ft,I+(Ft.e=de+fe*_t-1)+1,Q,Ue)}else Ft.e=fe,Ft.r=+Ue;return Ft}}();function J(E,A,R,T){var O,I,Q,Y,ne;if(R==null?R=b:t(R,0,8),!E.c)return E.toString();if(O=E.c[0],Q=E.e,A==null)ne=Oi(E.c),ne=T==1||T==2&&(Q<=k||Q>=S)?c(ne,Q):m(ne,Q,"0");else if(E=ae(new z(E),A,R),I=E.e,ne=Oi(E.c),Y=ne.length,T==1||T==2&&(A<=I||I<=k)){for(;Y<A;ne+="0",Y++);ne=c(ne,I)}else if(A-=Q,ne=m(ne,I,"0"),I+1>Y){if(--A>0)for(ne+=".";A--;ne+="0");}else if(A+=I-Y,A>0)for(I+1==Y&&(ne+=".");A--;ne+="0");return E.s<0&&O?"-"+ne:ne}function oe(E,A){for(var R,T,O=1,I=new z(E[0]);O<E.length;O++)T=new z(E[O]),(!T.s||(R=Wn(I,T))===A||R===0&&I.s===A)&&(I=T);return I}function Le(E,A,R){for(var T=1,O=A.length;!A[--O];A.pop());for(O=A[0];O>=10;O/=10,T++);return(R=T+R*_t-1)>N?E.c=E.e=null:R<U?E.c=[E.e=0]:(E.e=R,E.c=A),E}u=function(){var E=/^(-?)0([xbo])(?=\w[\w.]*$)/i,A=/^([^.]+)\.$/,R=/^\.([^.]+)$/,T=/^-?(Infinity|NaN)$/,O=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(I,Q,Y,ne){var fe,de=Y?Q:Q.replace(O,"");if(T.test(de))I.s=isNaN(de)?null:de<0?-1:1;else{if(!Y&&(de=de.replace(E,function(Ue,rt,lt){return fe=(lt=lt.toLowerCase())=="x"?16:lt=="b"?2:8,!ne||ne==fe?rt:Ue}),ne&&(fe=ne,de=de.replace(A,"$1").replace(R,"0.$1")),Q!=de))return new z(de,fe);if(z.DEBUG)throw Error(_i+"Not a"+(ne?" base "+ne:"")+" number: "+Q);I.s=null}I.c=I.e=null}}();function ae(E,A,R,T){var O,I,Q,Y,ne,fe,de,Ue=E.c,rt=Ms;if(Ue){e:{for(O=1,Y=Ue[0];Y>=10;Y/=10,O++);if(I=A-O,I<0)I+=_t,Q=A,ne=Ue[fe=0],de=fi(ne/rt[O-Q-1]%10);else if(fe=mr((I+1)/_t),fe>=Ue.length)if(T){for(;Ue.length<=fe;Ue.push(0));ne=de=0,O=1,I%=_t,Q=I-_t+1}else break e;else{for(ne=Y=Ue[fe],O=1;Y>=10;Y/=10,O++);I%=_t,Q=I-_t+O,de=Q<0?0:fi(ne/rt[O-Q-1]%10)}if(T=T||A<0||Ue[fe+1]!=null||(Q<0?ne:ne%rt[O-Q-1]),T=R<4?(de||T)&&(R==0||R==(E.s<0?3:2)):de>5||de==5&&(R==4||T||R==6&&(I>0?Q>0?ne/rt[O-Q]:0:Ue[fe-1])%10&1||R==(E.s<0?8:7)),A<1||!Ue[0])return Ue.length=0,T?(A-=E.e+1,Ue[0]=rt[(_t-A%_t)%_t],E.e=-A||0):Ue[0]=E.e=0,E;if(I==0?(Ue.length=fe,Y=1,fe--):(Ue.length=fe+1,Y=rt[_t-I],Ue[fe]=Q>0?fi(ne/rt[O-Q]%rt[Q])*Y:0),T)for(;;)if(fe==0){for(I=1,Q=Ue[0];Q>=10;Q/=10,I++);for(Q=Ue[0]+=Y,Y=1;Q>=10;Q/=10,Y++);I!=Y&&(E.e++,Ue[0]==Xi&&(Ue[0]=1));break}else{if(Ue[fe]+=Y,Ue[fe]!=Xi)break;Ue[fe--]=0,Y=1}for(I=Ue.length;Ue[--I]===0;Ue.pop());}E.e>N?E.c=E.e=null:E.e<U&&(E.c=[E.e=0])}return E}function be(E){var A,R=E.e;return R===null?E.toString():(A=Oi(E.c),A=R<=k||R>=S?c(A,R):m(A,R,"0"),E.s<0?"-"+A:A)}return d.absoluteValue=d.abs=function(){var E=new z(this);return E.s<0&&(E.s=1),E},d.comparedTo=function(E,A){return Wn(this,new z(E,A))},d.decimalPlaces=d.dp=function(E,A){var R,T,O,I=this;if(E!=null)return t(E,0,wi),A==null?A=b:t(A,0,8),ae(new z(I),E+I.e+1,A);if(!(R=I.c))return null;if(T=((O=R.length-1)-Ri(this.e/_t))*_t,O=R[O])for(;O%10==0;O/=10,T--);return T<0&&(T=0),T},d.dividedBy=d.div=function(E,A){return r(this,new z(E,A),_,b)},d.dividedToIntegerBy=d.idiv=function(E,A){return r(this,new z(E,A),0,1)},d.exponentiatedBy=d.pow=function(E,A){var R,T,O,I,Q,Y,ne,fe,de,Ue=this;if(E=new z(E),E.c&&!E.isInteger())throw Error(_i+"Exponent not an integer: "+be(E));if(A!=null&&(A=new z(A)),Y=E.e>14,!Ue.c||!Ue.c[0]||Ue.c[0]==1&&!Ue.e&&Ue.c.length==1||!E.c||!E.c[0])return de=new z(Math.pow(+be(Ue),Y?E.s*(2-o(E)):+be(E))),A?de.mod(A):de;if(ne=E.s<0,A){if(A.c?!A.c[0]:!A.s)return new z(NaN);T=!ne&&Ue.isInteger()&&A.isInteger(),T&&(Ue=Ue.mod(A))}else{if(E.e>9&&(Ue.e>0||Ue.e<-1||(Ue.e==0?Ue.c[0]>1||Y&&Ue.c[1]>=24e7:Ue.c[0]<8e13||Y&&Ue.c[0]<=9999975e7)))return I=Ue.s<0&&o(E)?-0:0,Ue.e>-1&&(I=1/I),new z(ne?1/I:I);He&&(I=mr(He/_t+2))}for(Y?(R=new z(.5),ne&&(E.s=1),fe=o(E)):(O=Math.abs(+be(E)),fe=O%2),de=new z(g);;){if(fe){if(de=de.times(Ue),!de.c)break;I?de.c.length>I&&(de.c.length=I):T&&(de=de.mod(A))}if(O){if(O=fi(O/2),O===0)break;fe=O%2}else if(E=E.times(R),ae(E,E.e+1,1),E.e>14)fe=o(E);else{if(O=+be(E),O===0)break;fe=O%2}Ue=Ue.times(Ue),I?Ue.c&&Ue.c.length>I&&(Ue.c.length=I):T&&(Ue=Ue.mod(A))}return T?de:(ne&&(de=g.div(de)),A?de.mod(A):I?ae(de,He,b,Q):de)},d.integerValue=function(E){var A=new z(this);return E==null?E=b:t(E,0,8),ae(A,A.e+1,E)},d.isEqualTo=d.eq=function(E,A){return Wn(this,new z(E,A))===0},d.isFinite=function(){return!!this.c},d.isGreaterThan=d.gt=function(E,A){return Wn(this,new z(E,A))>0},d.isGreaterThanOrEqualTo=d.gte=function(E,A){return(A=Wn(this,new z(E,A)))===1||A===0},d.isInteger=function(){return!!this.c&&Ri(this.e/_t)>this.c.length-2},d.isLessThan=d.lt=function(E,A){return Wn(this,new z(E,A))<0},d.isLessThanOrEqualTo=d.lte=function(E,A){return(A=Wn(this,new z(E,A)))===-1||A===0},d.isNaN=function(){return!this.s},d.isNegative=function(){return this.s<0},d.isPositive=function(){return this.s>0},d.isZero=function(){return!!this.c&&this.c[0]==0},d.minus=function(E,A){var R,T,O,I,Q=this,Y=Q.s;if(E=new z(E,A),A=E.s,!Y||!A)return new z(NaN);if(Y!=A)return E.s=-A,Q.plus(E);var ne=Q.e/_t,fe=E.e/_t,de=Q.c,Ue=E.c;if(!ne||!fe){if(!de||!Ue)return de?(E.s=-A,E):new z(Ue?Q:NaN);if(!de[0]||!Ue[0])return Ue[0]?(E.s=-A,E):new z(de[0]?Q:b==3?-0:0)}if(ne=Ri(ne),fe=Ri(fe),de=de.slice(),Y=ne-fe){for((I=Y<0)?(Y=-Y,O=de):(fe=ne,O=Ue),O.reverse(),A=Y;A--;O.push(0));O.reverse()}else for(T=(I=(Y=de.length)<(A=Ue.length))?Y:A,Y=A=0;A<T;A++)if(de[A]!=Ue[A]){I=de[A]<Ue[A];break}if(I&&(O=de,de=Ue,Ue=O,E.s=-E.s),A=(T=Ue.length)-(R=de.length),A>0)for(;A--;de[R++]=0);for(A=Xi-1;T>Y;){if(de[--T]<Ue[T]){for(R=T;R&&!de[--R];de[R]=A);--de[R],de[T]+=Xi}de[T]-=Ue[T]}for(;de[0]==0;de.splice(0,1),--fe);return de[0]?Le(E,de,fe):(E.s=b==3?-1:1,E.c=[E.e=0],E)},d.modulo=d.mod=function(E,A){var R,T,O=this;return E=new z(E,A),!O.c||!E.s||E.c&&!E.c[0]?new z(NaN):!E.c||O.c&&!O.c[0]?new z(O):(we==9?(T=E.s,E.s=1,R=r(O,E,0,3),E.s=T,R.s*=T):R=r(O,E,0,we),E=O.minus(R.times(E)),!E.c[0]&&we==1&&(E.s=O.s),E)},d.multipliedBy=d.times=function(E,A){var R,T,O,I,Q,Y,ne,fe,de,Ue,rt,lt,dt,Ft,Ut,Ot=this,Gt=Ot.c,Ci=(E=new z(E,A)).c;if(!Gt||!Ci||!Gt[0]||!Ci[0])return!Ot.s||!E.s||Gt&&!Gt[0]&&!Ci||Ci&&!Ci[0]&&!Gt?E.c=E.e=E.s=null:(E.s*=Ot.s,!Gt||!Ci?E.c=E.e=null:(E.c=[0],E.e=0)),E;for(T=Ri(Ot.e/_t)+Ri(E.e/_t),E.s*=Ot.s,ne=Gt.length,Ue=Ci.length,ne<Ue&&(dt=Gt,Gt=Ci,Ci=dt,O=ne,ne=Ue,Ue=O),O=ne+Ue,dt=[];O--;dt.push(0));for(Ft=Xi,Ut=bn,O=Ue;--O>=0;){for(R=0,rt=Ci[O]%Ut,lt=Ci[O]/Ut|0,Q=ne,I=O+Q;I>O;)fe=Gt[--Q]%Ut,de=Gt[Q]/Ut|0,Y=lt*fe+de*rt,fe=rt*fe+Y%Ut*Ut+dt[I]+R,R=(fe/Ft|0)+(Y/Ut|0)+lt*de,dt[I--]=fe%Ft;dt[I]=R}return R?++T:dt.splice(0,1),Le(E,dt,T)},d.negated=function(){var E=new z(this);return E.s=-E.s||null,E},d.plus=function(E,A){var R,T=this,O=T.s;if(E=new z(E,A),A=E.s,!O||!A)return new z(NaN);if(O!=A)return E.s=-A,T.minus(E);var I=T.e/_t,Q=E.e/_t,Y=T.c,ne=E.c;if(!I||!Q){if(!Y||!ne)return new z(O/0);if(!Y[0]||!ne[0])return ne[0]?E:new z(Y[0]?T:O*0)}if(I=Ri(I),Q=Ri(Q),Y=Y.slice(),O=I-Q){for(O>0?(Q=I,R=ne):(O=-O,R=Y),R.reverse();O--;R.push(0));R.reverse()}for(O=Y.length,A=ne.length,O-A<0&&(R=ne,ne=Y,Y=R,A=O),O=0;A;)O=(Y[--A]=Y[A]+ne[A]+O)/Xi|0,Y[A]=Xi===Y[A]?0:Y[A]%Xi;return O&&(Y=[O].concat(Y),++Q),Le(E,Y,Q)},d.precision=d.sd=function(E,A){var R,T,O,I=this;if(E!=null&&E!==!!E)return t(E,1,wi),A==null?A=b:t(A,0,8),ae(new z(I),E,A);if(!(R=I.c))return null;if(O=R.length-1,T=O*_t+1,O=R[O]){for(;O%10==0;O/=10,T--);for(O=R[0];O>=10;O/=10,T++);}return E&&I.e+1>T&&(T=I.e+1),T},d.shiftedBy=function(E){return t(E,-9007199254740991,Lo),this.times("1e"+E)},d.squareRoot=d.sqrt=function(){var E,A,R,T,O,I=this,Q=I.c,Y=I.s,ne=I.e,fe=_+4,de=new z("0.5");if(Y!==1||!Q||!Q[0])return new z(!Y||Y<0&&(!Q||Q[0])?NaN:Q?I:1/0);if(Y=Math.sqrt(+be(I)),Y==0||Y==1/0?(A=Oi(Q),(A.length+ne)%2==0&&(A+="0"),Y=Math.sqrt(+A),ne=Ri((ne+1)/2)-(ne<0||ne%2),Y==1/0?A="5e"+ne:(A=Y.toExponential(),A=A.slice(0,A.indexOf("e")+1)+ne),R=new z(A)):R=new z(Y+""),R.c[0]){for(ne=R.e,Y=ne+fe,Y<3&&(Y=0);;)if(O=R,R=de.times(O.plus(r(I,O,fe,1))),Oi(O.c).slice(0,Y)===(A=Oi(R.c)).slice(0,Y))if(R.e<ne&&--Y,A=A.slice(Y-3,Y+1),A=="9999"||!T&&A=="4999"){if(!T&&(ae(O,O.e+_+2,0),O.times(O).eq(I))){R=O;break}fe+=4,Y+=4,T=1}else{(!+A||!+A.slice(1)&&A.charAt(0)=="5")&&(ae(R,R.e+_+2,1),E=!R.times(R).eq(I));break}}return ae(R,R.e+_+1,b,E)},d.toExponential=function(E,A){return E!=null&&(t(E,0,wi),E++),J(this,E,A,1)},d.toFixed=function(E,A){return E!=null&&(t(E,0,wi),E=E+this.e+1),J(this,E,A)},d.toFormat=function(E,A,R){var T,O=this;if(R==null)E!=null&&A&&typeof A=="object"?(R=A,A=null):E&&typeof E=="object"?(R=E,E=A=null):R=Qe;else if(typeof R!="object")throw Error(_i+"Argument not an object: "+R);if(T=O.toFixed(E,A),O.c){var I,Q=T.split("."),Y=+R.groupSize,ne=+R.secondaryGroupSize,fe=R.groupSeparator||"",de=Q[0],Ue=Q[1],rt=O.s<0,lt=rt?de.slice(1):de,dt=lt.length;if(ne&&(I=Y,Y=ne,ne=I,dt-=I),Y>0&&dt>0){for(I=dt%Y||Y,de=lt.substr(0,I);I<dt;I+=Y)de+=fe+lt.substr(I,Y);ne>0&&(de+=fe+lt.slice(I)),rt&&(de="-"+de)}T=Ue?de+(R.decimalSeparator||"")+((ne=+R.fractionGroupSize)?Ue.replace(new RegExp("\\d{"+ne+"}\\B","g"),"$&"+(R.fractionGroupSeparator||"")):Ue):de}return(R.prefix||"")+T+(R.suffix||"")},d.toFraction=function(E){var A,R,T,O,I,Q,Y,ne,fe,de,Ue,rt,lt=this,dt=lt.c;if(E!=null&&(Y=new z(E),!Y.isInteger()&&(Y.c||Y.s!==1)||Y.lt(g)))throw Error(_i+"Argument "+(Y.isInteger()?"out of range: ":"not an integer: ")+be(Y));if(!dt)return new z(lt);for(A=new z(g),fe=R=new z(g),T=ne=new z(g),rt=Oi(dt),I=A.e=rt.length-lt.e-1,A.c[0]=Ms[(Q=I%_t)<0?_t+Q:Q],E=!E||Y.comparedTo(A)>0?I>0?A:fe:Y,Q=N,N=1/0,Y=new z(rt),ne.c[0]=0;de=r(Y,A,0,1),O=R.plus(de.times(T)),O.comparedTo(E)!=1;)R=T,T=O,fe=ne.plus(de.times(O=fe)),ne=O,A=Y.minus(de.times(O=A)),Y=O;return O=r(E.minus(R),T,0,1),ne=ne.plus(O.times(fe)),R=R.plus(O.times(T)),ne.s=fe.s=lt.s,I=I*2,Ue=r(fe,T,I,b).minus(lt).abs().comparedTo(r(ne,R,I,b).minus(lt).abs())<1?[fe,T]:[ne,R],N=Q,Ue},d.toNumber=function(){return+be(this)},d.toPrecision=function(E,A){return E!=null&&t(E,1,wi),J(this,E,A,2)},d.toString=function(E){var A,R=this,T=R.s,O=R.e;return O===null?T?(A="Infinity",T<0&&(A="-"+A)):A="NaN":(E==null?A=O<=k||O>=S?c(Oi(R.c),O):m(Oi(R.c),O,"0"):E===10&&At?(R=ae(new z(R),_+O+1,b),A=m(Oi(R.c),R.e,"0")):(t(E,2,ot.length,"Base"),A=a(m(Oi(R.c),O,"0"),10,E,T,!0)),T<0&&R.c[0]&&(A="-"+A)),A},d.valueOf=d.toJSON=function(){return be(this)},d._isBigNumber=!0,d[Symbol.toStringTag]="BigNumber",d[Symbol.for("nodejs.util.inspect.custom")]=d.valueOf,i!=null&&z.set(i),z}function Ri(i){var r=i|0;return i>0||i===r?r:r-1}function Oi(i){for(var r,a,u=1,d=i.length,g=i[0]+"";u<d;){for(r=i[u++]+"",a=_t-r.length;a--;r="0"+r);g+=r}for(d=g.length;g.charCodeAt(--d)===48;);return g.slice(0,d+1||1)}function Wn(i,r){var a,u,d=i.c,g=r.c,_=i.s,b=r.s,k=i.e,S=r.e;if(!_||!b)return null;if(a=d&&!d[0],u=g&&!g[0],a||u)return a?u?0:-b:_;if(_!=b)return _;if(a=_<0,u=k==S,!d||!g)return u?0:!d^a?1:-1;if(!u)return k>S^a?1:-1;for(b=(k=d.length)<(S=g.length)?k:S,_=0;_<b;_++)if(d[_]!=g[_])return d[_]>g[_]^a?1:-1;return k==S?0:k>S^a?1:-1}function t(i,r,a,u){if(i<r||i>a||i!==fi(i))throw Error(_i+(u||"Argument")+(typeof i=="number"?i<r||i>a?" out of range: ":" not an integer: ":" not a primitive number: ")+String(i))}function o(i){var r=i.c.length-1;return Ri(i.e/_t)==r&&i.c[r]%2!=0}function c(i,r){return(i.length>1?i.charAt(0)+"."+i.slice(1):i)+(r<0?"e":"e+")+r}function m(i,r,a){var u,d;if(r<0){for(d=a+".";++r;d+=a);i=d+i}else if(u=i.length,++r>u){for(d=a,r-=u;--r;d+=a);i+=d}else r<u&&(i=i.slice(0,r)+"."+i.slice(r));return i}var x=Ia(),B=x,K=class{constructor(i){ut(this,"key");ut(this,"left",null);ut(this,"right",null);this.key=i}},he=class extends K{constructor(i){super(i)}},Se=class{constructor(){ut(this,"size",0);ut(this,"modificationCount",0);ut(this,"splayCount",0)}splay(i){let r=this.root;if(r==null)return this.compare(i,i),-1;let a=null,u=null,d=null,g=null,_=r,b=this.compare,k;for(;;)if(k=b(_.key,i),k>0){let S=_.left;if(S==null||(k=b(S.key,i),k>0&&(_.left=S.right,S.right=_,_=S,S=_.left,S==null)))break;a==null?u=_:a.left=_,a=_,_=S}else if(k<0){let S=_.right;if(S==null||(k=b(S.key,i),k<0&&(_.right=S.left,S.left=_,_=S,S=_.right,S==null)))break;d==null?g=_:d.right=_,d=_,_=S}else break;return d!=null&&(d.right=_.left,_.left=g),a!=null&&(a.left=_.right,_.right=u),this.root!==_&&(this.root=_,this.splayCount++),k}splayMin(i){let r=i,a=r.left;for(;a!=null;){let u=a;r.left=u.right,u.right=r,r=u,a=r.left}return r}splayMax(i){let r=i,a=r.right;for(;a!=null;){let u=a;r.right=u.left,u.left=r,r=u,a=r.right}return r}_delete(i){if(this.root==null||this.splay(i)!=0)return null;let r=this.root,a=r,u=r.left;if(this.size--,u==null)this.root=r.right;else{let d=r.right;r=this.splayMax(u),r.right=d,this.root=r}return this.modificationCount++,a}addNewRoot(i,r){this.size++,this.modificationCount++;let a=this.root;if(a==null){this.root=i;return}r<0?(i.left=a,i.right=a.right,a.right=null):(i.right=a,i.left=a.left,a.left=null),this.root=i}_first(){let i=this.root;return i==null?null:(this.root=this.splayMin(i),this.root)}_last(){let i=this.root;return i==null?null:(this.root=this.splayMax(i),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(i){return this.validKey(i)&&this.splay(i)==0}defaultCompare(){return(i,r)=>i<r?-1:i>r?1:0}wrap(){return{getRoot:()=>this.root,setRoot:i=>{this.root=i},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:i=>{this.splayCount=i},splay:i=>this.splay(i),has:i=>this.has(i)}}},Ve=class Oo extends Se{constructor(a,u){super();ut(this,"root",null);ut(this,"compare");ut(this,"validKey");ut(this,lh,"[object Set]");this.compare=a??this.defaultCompare(),this.validKey=u??(d=>d!=null&&d!=null)}delete(a){return this.validKey(a)?this._delete(a)!=null:!1}deleteAll(a){for(let u of a)this.delete(u)}forEach(a){let u=this[Symbol.iterator](),d;for(;d=u.next(),!d.done;)a(d.value,d.value,this)}add(a){let u=this.splay(a);return u!=0&&this.addNewRoot(new he(a),u),this}addAndReturn(a){let u=this.splay(a);return u!=0&&this.addNewRoot(new he(a),u),this.root.key}addAll(a){for(let u of a)this.add(u)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(a){if(a==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(a)<0)return this.root.key;let u=this.root.left;if(u==null)return null;let d=u.right;for(;d!=null;)u=d,d=u.right;return u.key}firstAfter(a){if(a==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(a)>0)return this.root.key;let u=this.root.right;if(u==null)return null;let d=u.left;for(;d!=null;)u=d,d=u.left;return u.key}retainAll(a){let u=new Oo(this.compare,this.validKey),d=this.modificationCount;for(let g of a){if(d!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(g)&&this.splay(g)==0&&u.add(this.root.key)}u.size!=this.size&&(this.root=u.root,this.size=u.size,this.modificationCount++)}lookup(a){return!this.validKey(a)||this.splay(a)!=0?null:this.root.key}intersection(a){let u=new Oo(this.compare,this.validKey);for(let d of this)a.has(d)&&u.add(d);return u}difference(a){let u=new Oo(this.compare,this.validKey);for(let d of this)a.has(d)||u.add(d);return u}union(a){let u=this.clone();return u.addAll(a),u}clone(){let a=new Oo(this.compare,this.validKey);return a.size=this.size,a.root=this.copyNode(this.root),a}copyNode(a){if(a==null)return null;function u(g,_){let b,k;do{if(b=g.left,k=g.right,b!=null){let S=new he(b.key);_.left=S,u(b,S)}if(k!=null){let S=new he(k.key);_.right=S,g=k,_=S}}while(k!=null)}let d=new he(a.key);return u(a,d),d}toSet(){return this.clone()}entries(){return new Mt(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(uh=Symbol.iterator,lh=Symbol.toStringTag,uh)](){return new pt(this.wrap())}},it=class{constructor(i){ut(this,"tree");ut(this,"path",new Array);ut(this,"modificationCount",null);ut(this,"splayCount");this.tree=i,this.splayCount=i.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let i=this.path[this.path.length-1];return this.getValue(i)}rebuildPath(i){this.path.splice(0,this.path.length),this.tree.splay(i),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(i){for(;i!=null;)this.path.push(i),i=i.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let a=this.tree.getRoot();for(;a!=null;)this.path.push(a),a=a.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let i=this.path[this.path.length-1],r=i.right;if(r!=null){for(;r!=null;)this.path.push(r),r=r.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===i;)i=this.path.pop();return this.path.length>0}},pt=class extends it{getValue(i){return i.key}},Mt=class extends it{getValue(i){return[i.key,i.key]}},yi=i=>i,ai=i=>{if(i){let r=new Ve(Es(i)),a=new Ve(Es(i)),u=(g,_)=>_.addAndReturn(g),d=g=>({x:u(g.x,r),y:u(g.y,a)});return d({x:new B(0),y:new B(0)}),d}return yi},Li=i=>({set:r=>{Kt=Li(r)},reset:()=>Li(i),compare:Es(i),snap:ai(i),orient:zr(i)}),Kt=Li(),un=(i,r)=>i.ll.x.isLessThanOrEqualTo(r.x)&&r.x.isLessThanOrEqualTo(i.ur.x)&&i.ll.y.isLessThanOrEqualTo(r.y)&&r.y.isLessThanOrEqualTo(i.ur.y),Co=(i,r)=>{if(r.ur.x.isLessThan(i.ll.x)||i.ur.x.isLessThan(r.ll.x)||r.ur.y.isLessThan(i.ll.y)||i.ur.y.isLessThan(r.ll.y))return null;let a=i.ll.x.isLessThan(r.ll.x)?r.ll.x:i.ll.x,u=i.ur.x.isLessThan(r.ur.x)?i.ur.x:r.ur.x,d=i.ll.y.isLessThan(r.ll.y)?r.ll.y:i.ll.y,g=i.ur.y.isLessThan(r.ur.y)?i.ur.y:r.ur.y;return{ll:{x:a,y:d},ur:{x:u,y:g}}},Ps=(i,r)=>i.x.times(r.y).minus(i.y.times(r.x)),Fa=(i,r)=>i.x.times(r.x).plus(i.y.times(r.y)),$r=i=>Fa(i,i).sqrt(),Au=(i,r,a)=>{let u={x:r.x.minus(i.x),y:r.y.minus(i.y)},d={x:a.x.minus(i.x),y:a.y.minus(i.y)};return Ps(d,u).div($r(d)).div($r(u))},Na=(i,r,a)=>{let u={x:r.x.minus(i.x),y:r.y.minus(i.y)},d={x:a.x.minus(i.x),y:a.y.minus(i.y)};return Fa(d,u).div($r(d)).div($r(u))},Xt=(i,r,a)=>r.y.isZero()?null:{x:i.x.plus(r.x.div(r.y).times(a.minus(i.y))),y:a},jr=(i,r,a)=>r.x.isZero()?null:{x:a,y:i.y.plus(r.y.div(r.x).times(a.minus(i.x)))},Tu=(i,r,a,u)=>{if(r.x.isZero())return jr(a,u,i.x);if(u.x.isZero())return jr(i,r,a.x);if(r.y.isZero())return Xt(a,u,i.y);if(u.y.isZero())return Xt(i,r,a.y);let d=Ps(r,u);if(d.isZero())return null;let g={x:a.x.minus(i.x),y:a.y.minus(i.y)},_=Ps(g,r).div(d),b=Ps(g,u).div(d),k=i.x.plus(b.times(r.x)),S=a.x.plus(_.times(u.x)),U=i.y.plus(b.times(r.y)),N=a.y.plus(_.times(u.y)),me=k.plus(S).div(2),we=U.plus(N).div(2);return{x:me,y:we}},cn=class Vp{constructor(r,a){ut(this,"point");ut(this,"isLeft");ut(this,"segment");ut(this,"otherSE");ut(this,"consumedBy");r.events===void 0?r.events=[this]:r.events.push(this),this.point=r,this.isLeft=a}static compare(r,a){let u=Vp.comparePoints(r.point,a.point);return u!==0?u:(r.point!==a.point&&r.link(a),r.isLeft!==a.isLeft?r.isLeft?1:-1:gr.compare(r.segment,a.segment))}static comparePoints(r,a){return r.x.isLessThan(a.x)?-1:r.x.isGreaterThan(a.x)?1:r.y.isLessThan(a.y)?-1:r.y.isGreaterThan(a.y)?1:0}link(r){if(r.point===this.point)throw new Error("Tried to link already linked events");let a=r.point.events;for(let u=0,d=a.length;u<d;u++){let g=a[u];this.point.events.push(g),g.point=this.point}this.checkForConsuming()}checkForConsuming(){let r=this.point.events.length;for(let a=0;a<r;a++){let u=this.point.events[a];if(u.segment.consumedBy===void 0)for(let d=a+1;d<r;d++){let g=this.point.events[d];g.consumedBy===void 0&&u.otherSE.point.events===g.otherSE.point.events&&u.segment.consume(g.segment)}}}getAvailableLinkedEvents(){let r=[];for(let a=0,u=this.point.events.length;a<u;a++){let d=this.point.events[a];d!==this&&!d.segment.ringOut&&d.segment.isInResult()&&r.push(d)}return r}getLeftmostComparator(r){let a=new Map,u=d=>{let g=d.otherSE;a.set(d,{sine:Au(this.point,r.point,g.point),cosine:Na(this.point,r.point,g.point)})};return(d,g)=>{a.has(d)||u(d),a.has(g)||u(g);let{sine:_,cosine:b}=a.get(d),{sine:k,cosine:S}=a.get(g);return _.isGreaterThanOrEqualTo(0)&&k.isGreaterThanOrEqualTo(0)?b.isLessThan(S)?1:b.isGreaterThan(S)?-1:0:_.isLessThan(0)&&k.isLessThan(0)?b.isLessThan(S)?-1:b.isGreaterThan(S)?1:0:k.isLessThan(_)?-1:k.isGreaterThan(_)?1:0}}},Du=0,gr=class rl{constructor(r,a,u,d){ut(this,"id");ut(this,"leftSE");ut(this,"rightSE");ut(this,"rings");ut(this,"windings");ut(this,"ringOut");ut(this,"consumedBy");ut(this,"prev");ut(this,"_prevInResult");ut(this,"_beforeState");ut(this,"_afterState");ut(this,"_isInResult");this.id=++Du,this.leftSE=r,r.segment=this,r.otherSE=a,this.rightSE=a,a.segment=this,a.otherSE=r,this.rings=u,this.windings=d}static compare(r,a){let u=r.leftSE.point.x,d=a.leftSE.point.x,g=r.rightSE.point.x,_=a.rightSE.point.x;if(_.isLessThan(u))return 1;if(g.isLessThan(d))return-1;let b=r.leftSE.point.y,k=a.leftSE.point.y,S=r.rightSE.point.y,U=a.rightSE.point.y;if(u.isLessThan(d)){if(k.isLessThan(b)&&k.isLessThan(S))return 1;if(k.isGreaterThan(b)&&k.isGreaterThan(S))return-1;let N=r.comparePoint(a.leftSE.point);if(N<0)return 1;if(N>0)return-1;let me=a.comparePoint(r.rightSE.point);return me!==0?me:-1}if(u.isGreaterThan(d)){if(b.isLessThan(k)&&b.isLessThan(U))return-1;if(b.isGreaterThan(k)&&b.isGreaterThan(U))return 1;let N=a.comparePoint(r.leftSE.point);if(N!==0)return N;let me=r.comparePoint(a.rightSE.point);return me<0?1:me>0?-1:1}if(b.isLessThan(k))return-1;if(b.isGreaterThan(k))return 1;if(g.isLessThan(_)){let N=a.comparePoint(r.rightSE.point);if(N!==0)return N}if(g.isGreaterThan(_)){let N=r.comparePoint(a.rightSE.point);if(N<0)return 1;if(N>0)return-1}if(!g.eq(_)){let N=S.minus(b),me=g.minus(u),we=U.minus(k),He=_.minus(d);if(N.isGreaterThan(me)&&we.isLessThan(He))return 1;if(N.isLessThan(me)&&we.isGreaterThan(He))return-1}return g.isGreaterThan(_)?1:g.isLessThan(_)||S.isLessThan(U)?-1:S.isGreaterThan(U)?1:r.id<a.id?-1:r.id>a.id?1:0}static fromRing(r,a,u){let d,g,_,b=cn.comparePoints(r,a);if(b<0)d=r,g=a,_=1;else if(b>0)d=a,g=r,_=-1;else throw new Error(`Tried to create degenerate segment at [${r.x}, ${r.y}]`);let k=new cn(d,!0),S=new cn(g,!1);return new rl(k,S,[u],[_])}replaceRightSE(r){this.rightSE=r,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let r=this.leftSE.point.y,a=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:r.isLessThan(a)?r:a},ur:{x:this.rightSE.point.x,y:r.isGreaterThan(a)?r:a}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(r){return r.x.eq(this.leftSE.point.x)&&r.y.eq(this.leftSE.point.y)||r.x.eq(this.rightSE.point.x)&&r.y.eq(this.rightSE.point.y)}comparePoint(r){return Kt.orient(this.leftSE.point,r,this.rightSE.point)}getIntersection(r){let a=this.bbox(),u=r.bbox(),d=Co(a,u);if(d===null)return null;let g=this.leftSE.point,_=this.rightSE.point,b=r.leftSE.point,k=r.rightSE.point,S=un(a,b)&&this.comparePoint(b)===0,U=un(u,g)&&r.comparePoint(g)===0,N=un(a,k)&&this.comparePoint(k)===0,me=un(u,_)&&r.comparePoint(_)===0;if(U&&S)return me&&!N?_:!me&&N?k:null;if(U)return N&&g.x.eq(k.x)&&g.y.eq(k.y)?null:g;if(S)return me&&_.x.eq(b.x)&&_.y.eq(b.y)?null:b;if(me&&N)return null;if(me)return _;if(N)return k;let we=Tu(g,this.vector(),b,r.vector());return we===null||!un(d,we)?null:Kt.snap(we)}split(r){let a=[],u=r.events!==void 0,d=new cn(r,!0),g=new cn(r,!1),_=this.rightSE;this.replaceRightSE(g),a.push(g),a.push(d);let b=new rl(d,_,this.rings.slice(),this.windings.slice());return cn.comparePoints(b.leftSE.point,b.rightSE.point)>0&&b.swapEvents(),cn.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),u&&(d.checkForConsuming(),g.checkForConsuming()),a}swapEvents(){let r=this.rightSE;this.rightSE=this.leftSE,this.leftSE=r,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let a=0,u=this.windings.length;a<u;a++)this.windings[a]*=-1}consume(r){let a=this,u=r;for(;a.consumedBy;)a=a.consumedBy;for(;u.consumedBy;)u=u.consumedBy;let d=rl.compare(a,u);if(d!==0){if(d>0){let g=a;a=u,u=g}if(a.prev===u){let g=a;a=u,u=g}for(let g=0,_=u.rings.length;g<_;g++){let b=u.rings[g],k=u.windings[g],S=a.rings.indexOf(b);S===-1?(a.rings.push(b),a.windings.push(k)):a.windings[S]+=k}u.rings=null,u.windings=null,u.consumedBy=a,u.leftSE.consumedBy=a.leftSE,u.rightSE.consumedBy=a.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let r=this.prev.consumedBy||this.prev;this._beforeState=r.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let r=this.beforeState();this._afterState={rings:r.rings.slice(0),windings:r.windings.slice(0),multiPolys:[]};let a=this._afterState.rings,u=this._afterState.windings,d=this._afterState.multiPolys;for(let b=0,k=this.rings.length;b<k;b++){let S=this.rings[b],U=this.windings[b],N=a.indexOf(S);N===-1?(a.push(S),u.push(U)):u[N]+=U}let g=[],_=[];for(let b=0,k=a.length;b<k;b++){if(u[b]===0)continue;let S=a[b],U=S.poly;if(_.indexOf(U)===-1)if(S.isExterior)g.push(U);else{_.indexOf(U)===-1&&_.push(U);let N=g.indexOf(S.poly);N!==-1&&g.splice(N,1)}}for(let b=0,k=g.length;b<k;b++){let S=g[b].multiPoly;d.indexOf(S)===-1&&d.push(S)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let r=this.beforeState().multiPolys,a=this.afterState().multiPolys;switch(za.type){case"union":{let u=r.length===0,d=a.length===0;this._isInResult=u!==d;break}case"intersection":{let u,d;r.length<a.length?(u=r.length,d=a.length):(u=a.length,d=r.length),this._isInResult=d===za.numMultiPolys&&u<d;break}case"xor":{let u=Math.abs(r.length-a.length);this._isInResult=u%2===1;break}case"difference":{let u=d=>d.length===1&&d[0].isSubject;this._isInResult=u(r)!==u(a);break}}return this._isInResult}},ko=class{constructor(i,r,a){ut(this,"poly");ut(this,"isExterior");ut(this,"segments");ut(this,"bbox");if(!Array.isArray(i)||i.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=a,this.segments=[],typeof i[0][0]!="number"||typeof i[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let u=Kt.snap({x:new B(i[0][0]),y:new B(i[0][1])});this.bbox={ll:{x:u.x,y:u.y},ur:{x:u.x,y:u.y}};let d=u;for(let g=1,_=i.length;g<_;g++){if(typeof i[g][0]!="number"||typeof i[g][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let b=Kt.snap({x:new B(i[g][0]),y:new B(i[g][1])});b.x.eq(d.x)&&b.y.eq(d.y)||(this.segments.push(gr.fromRing(d,b,this)),b.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=b.x),b.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=b.y),b.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=b.x),b.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=b.y),d=b)}(!u.x.eq(d.x)||!u.y.eq(d.y))&&this.segments.push(gr.fromRing(d,u,this))}getSweepEvents(){let i=[];for(let r=0,a=this.segments.length;r<a;r++){let u=this.segments[r];i.push(u.leftSE),i.push(u.rightSE)}return i}},Ru=class{constructor(i,r){ut(this,"multiPoly");ut(this,"exteriorRing");ut(this,"interiorRings");ut(this,"bbox");if(!Array.isArray(i))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new ko(i[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let a=1,u=i.length;a<u;a++){let d=new ko(i[a],this,!1);d.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=d.bbox.ll.x),d.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=d.bbox.ll.y),d.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=d.bbox.ur.x),d.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=d.bbox.ur.y),this.interiorRings.push(d)}this.multiPoly=r}getSweepEvents(){let i=this.exteriorRing.getSweepEvents();for(let r=0,a=this.interiorRings.length;r<a;r++){let u=this.interiorRings[r].getSweepEvents();for(let d=0,g=u.length;d<g;d++)i.push(u[d])}return i}},th=class{constructor(i,r){ut(this,"isSubject");ut(this,"polys");ut(this,"bbox");if(!Array.isArray(i))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof i[0][0][0]=="number"&&(i=[i])}catch{}this.polys=[],this.bbox={ll:{x:new B(Number.POSITIVE_INFINITY),y:new B(Number.POSITIVE_INFINITY)},ur:{x:new B(Number.NEGATIVE_INFINITY),y:new B(Number.NEGATIVE_INFINITY)}};for(let a=0,u=i.length;a<u;a++){let d=new Ru(i[a],this);d.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=d.bbox.ll.x),d.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=d.bbox.ll.y),d.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=d.bbox.ur.x),d.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=d.bbox.ur.y),this.polys.push(d)}this.isSubject=r}getSweepEvents(){let i=[];for(let r=0,a=this.polys.length;r<a;r++){let u=this.polys[r].getSweepEvents();for(let d=0,g=u.length;d<g;d++)i.push(u[d])}return i}},Xp=class Sc{constructor(r){ut(this,"events");ut(this,"poly");ut(this,"_isExteriorRing");ut(this,"_enclosingRing");this.events=r;for(let a=0,u=r.length;a<u;a++)r[a].segment.ringOut=this;this.poly=null}static factory(r){let a=[];for(let u=0,d=r.length;u<d;u++){let g=r[u];if(!g.isInResult()||g.ringOut)continue;let _=null,b=g.leftSE,k=g.rightSE,S=[b],U=b.point,N=[];for(;_=b,b=k,S.push(b),b.point!==U;)for(;;){let me=b.getAvailableLinkedEvents();if(me.length===0){let Qe=S[0].point,ot=S[S.length-1].point;throw new Error(`Unable to complete output ring starting at [${Qe.x}, ${Qe.y}]. Last matching segment found ends at [${ot.x}, ${ot.y}].`)}if(me.length===1){k=me[0].otherSE;break}let we=null;for(let Qe=0,ot=N.length;Qe<ot;Qe++)if(N[Qe].point===b.point){we=Qe;break}if(we!==null){let Qe=N.splice(we)[0],ot=S.splice(Qe.index);ot.unshift(ot[0].otherSE),a.push(new Sc(ot.reverse()));continue}N.push({index:S.length,point:b.point});let He=b.getLeftmostComparator(_);k=me.sort(He)[0].otherSE;break}a.push(new Sc(S))}return a}getGeom(){let r=this.events[0].point,a=[r];for(let S=1,U=this.events.length-1;S<U;S++){let N=this.events[S].point,me=this.events[S+1].point;Kt.orient(N,r,me)!==0&&(a.push(N),r=N)}if(a.length===1)return null;let u=a[0],d=a[1];Kt.orient(u,r,d)===0&&a.shift(),a.push(a[0]);let g=this.isExteriorRing()?1:-1,_=this.isExteriorRing()?0:a.length-1,b=this.isExteriorRing()?a.length:-1,k=[];for(let S=_;S!=b;S+=g)k.push([a[S].x.toNumber(),a[S].y.toNumber()]);return k}isExteriorRing(){if(this._isExteriorRing===void 0){let r=this.enclosingRing();this._isExteriorRing=r?!r.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var d,g;let r=this.events[0];for(let _=1,b=this.events.length;_<b;_++){let k=this.events[_];cn.compare(r,k)>0&&(r=k)}let a=r.segment.prevInResult(),u=a?a.prevInResult():null;for(;;){if(!a)return null;if(!u)return a.ringOut;if(u.ringOut!==a.ringOut)return((d=u.ringOut)==null?void 0:d.enclosingRing())!==a.ringOut?a.ringOut:(g=a.ringOut)==null?void 0:g.enclosingRing();a=u.prevInResult(),u=a?a.prevInResult():null}}},ih=class{constructor(i){ut(this,"exteriorRing");ut(this,"interiorRings");this.exteriorRing=i,i.poly=this,this.interiorRings=[]}addInterior(i){this.interiorRings.push(i),i.poly=this}getGeom(){let i=this.exteriorRing.getGeom();if(i===null)return null;let r=[i];for(let a=0,u=this.interiorRings.length;a<u;a++){let d=this.interiorRings[a].getGeom();d!==null&&r.push(d)}return r}},Yp=class{constructor(i){ut(this,"rings");ut(this,"polys");this.rings=i,this.polys=this._composePolys(i)}getGeom(){let i=[];for(let r=0,a=this.polys.length;r<a;r++){let u=this.polys[r].getGeom();u!==null&&i.push(u)}return i}_composePolys(i){var a;let r=[];for(let u=0,d=i.length;u<d;u++){let g=i[u];if(!g.poly)if(g.isExteriorRing())r.push(new ih(g));else{let _=g.enclosingRing();_!=null&&_.poly||r.push(new ih(_)),(a=_==null?void 0:_.poly)==null||a.addInterior(g)}}return r}},Qp=class{constructor(i,r=gr.compare){ut(this,"queue");ut(this,"tree");ut(this,"segments");this.queue=i,this.tree=new Ve(r),this.segments=[]}process(i){let r=i.segment,a=[];if(i.consumedBy)return i.isLeft?this.queue.delete(i.otherSE):this.tree.delete(r),a;i.isLeft&&this.tree.add(r);let u=r,d=r;do u=this.tree.lastBefore(u);while(u!=null&&u.consumedBy!=null);do d=this.tree.firstAfter(d);while(d!=null&&d.consumedBy!=null);if(i.isLeft){let g=null;if(u){let b=u.getIntersection(r);if(b!==null&&(r.isAnEndpoint(b)||(g=b),!u.isAnEndpoint(b))){let k=this._splitSafely(u,b);for(let S=0,U=k.length;S<U;S++)a.push(k[S])}}let _=null;if(d){let b=d.getIntersection(r);if(b!==null&&(r.isAnEndpoint(b)||(_=b),!d.isAnEndpoint(b))){let k=this._splitSafely(d,b);for(let S=0,U=k.length;S<U;S++)a.push(k[S])}}if(g!==null||_!==null){let b=null;g===null?b=_:_===null?b=g:b=cn.comparePoints(g,_)<=0?g:_,this.queue.delete(r.rightSE),a.push(r.rightSE);let k=r.split(b);for(let S=0,U=k.length;S<U;S++)a.push(k[S])}a.length>0?(this.tree.delete(r),a.push(i)):(this.segments.push(r),r.prev=u)}else{if(u&&d){let g=u.getIntersection(d);if(g!==null){if(!u.isAnEndpoint(g)){let _=this._splitSafely(u,g);for(let b=0,k=_.length;b<k;b++)a.push(_[b])}if(!d.isAnEndpoint(g)){let _=this._splitSafely(d,g);for(let b=0,k=_.length;b<k;b++)a.push(_[b])}}}this.tree.delete(r)}return a}_splitSafely(i,r){this.tree.delete(i);let a=i.rightSE;this.queue.delete(a);let u=i.split(r);return u.push(a),i.consumedBy===void 0&&this.tree.add(i),u}},em=class{constructor(){ut(this,"type");ut(this,"numMultiPolys")}run(i,r,a){Eo.type=i;let u=[new th(r,!0)];for(let k=0,S=a.length;k<S;k++)u.push(new th(a[k],!1));if(Eo.numMultiPolys=u.length,Eo.type==="difference"){let k=u[0],S=1;for(;S<u.length;)Co(u[S].bbox,k.bbox)!==null?S++:u.splice(S,1)}if(Eo.type==="intersection")for(let k=0,S=u.length;k<S;k++){let U=u[k];for(let N=k+1,me=u.length;N<me;N++)if(Co(U.bbox,u[N].bbox)===null)return[]}let d=new Ve(cn.compare);for(let k=0,S=u.length;k<S;k++){let U=u[k].getSweepEvents();for(let N=0,me=U.length;N<me;N++)d.add(U[N])}let g=new Qp(d),_=null;for(d.size!=0&&(_=d.first(),d.delete(_));_;){let k=g.process(_);for(let S=0,U=k.length;S<U;S++){let N=k[S];N.consumedBy===void 0&&d.add(N)}d.size!=0?(_=d.first(),d.delete(_)):_=null}Kt.reset();let b=Xp.factory(g.segments);return new Yp(b).getGeom()}},Eo=new em,za=Eo,tm=(i,...r)=>za.run("intersection",i,r),im=(i,...r)=>za.run("difference",i,r);Kt.set;function $a(i){let r={type:"Feature"};return r.geometry=i,r}function ja(i){return i.type==="Feature"?i.geometry:i}function nh(i){return i&&i.geometry&&i.geometry.coordinates?i.geometry.coordinates:i}function nm(i){return $a({type:"LineString",coordinates:i})}function rm(i){return $a({type:"MultiLineString",coordinates:i})}function rh(i){return $a({type:"Polygon",coordinates:i})}function sh(i){return $a({type:"MultiPolygon",coordinates:i})}function sm(i,r){let a=ja(i),u=ja(r),d=tm(a.coordinates,u.coordinates);return d.length===0?null:d.length===1?rh(d[0]):sh(d)}function om(i,r){let a=ja(i),u=ja(r),d=im(a.coordinates,u.coordinates);return d.length===0?null:d.length===1?rh(d[0]):sh(d)}function oh(i){return Array.isArray(i)?1+oh(i[0]):-1}function am(i){i instanceof L.Polyline&&(i=i.toGeoJSON(15));let r=nh(i),a=oh(r),u=[];return a>1?r.forEach(d=>{u.push(nm(d))}):u.push(i),u}function lm(i){let r=[];return i.eachLayer(a=>{r.push(nh(a.toGeoJSON(15)))}),rm(r)}hi.Cut=hi.Polygon.extend({initialize(i){this._map=i,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let i=this._layer.getLatLngs();if(i.length<=2)return;let r=L.polygon(i,this.options.pathOptions);r._latlngInfos=this._layer._latlngInfo,this.cut(r),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:u,originalLayer:d})=>{this._fireCut(d,u,d),this._fireCut(this._map,u,d),d.pm._fireEdit()}),this._editedLayers=[];let a=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(a))},cut(i){let r=this._map._layers,a=i._latlngInfos||[];Object.keys(r).map(u=>r[u]).filter(u=>u.pm).filter(u=>!u._pmTempLayer).filter(u=>!L.PM.optIn&&!u.options.pmIgnore||L.PM.optIn&&u.options.pmIgnore===!1).filter(u=>u instanceof L.Polyline).filter(u=>u!==i).filter(u=>u.pm.options.allowCutting).filter(u=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(u)>-1:!0).filter(u=>!this._layerGroup.hasLayer(u)).filter(u=>{try{let d=!!an(i.toGeoJSON(15),u.toGeoJSON(15)).features.length>0;return d||u instanceof L.Polyline&&!(u instanceof L.Polygon)?d:!!sm(i.toGeoJSON(15),u.toGeoJSON(15))}catch{return u instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(u=>{let d;if(u instanceof L.Polygon){d=L.polygon(u.getLatLngs());let k=d.getLatLngs();a.forEach(S=>{if(S&&S.snapInfo){let{latlng:U}=S,N=this._calcClosestLayer(U,[d]);if(N&&N.segment&&N.distance<this.options.snapDistance){let{segment:me}=N;if(me&&me.length===2){let{indexPath:we,parentPath:He,newIndex:Qe}=L.PM.Utils._getIndexFromSegment(k,me);(we.length>1?(0,vn.default)(k,He):k).splice(Qe,0,U)}}}})}else d=u;let g=this._cutLayer(i,d),_=L.geoJSON(g,u.options);_.getLayers().length===1&&([_]=_.getLayers()),this._setPane(_,"layerPane");let b=_.addTo(this._map.pm._getContainingLayer());if(b.pm.enable(u.pm.options),b.pm.disable(),u._pmTempLayer=!0,i._pmTempLayer=!0,u.remove(),u.removeFrom(this._map.pm._getContainingLayer()),i.remove(),i.removeFrom(this._map.pm._getContainingLayer()),b.getLayers&&b.getLayers().length===0&&this._map.pm.removeLayer({target:b}),b instanceof L.LayerGroup?(b.eachLayer(k=>{this._addDrawnLayerProp(k)}),this._addDrawnLayerProp(b)):this._addDrawnLayerProp(b),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let k=this.options.layersToCut.indexOf(u);k>-1&&this.options.layersToCut.splice(k,1)}this._editedLayers.push({layer:b,originalLayer:u})})},_cutLayer(i,r){let a=L.geoJSON(),u;if(r instanceof L.Polygon)u=om(r.toGeoJSON(15),i.toGeoJSON(15));else{let d=am(r);d.forEach(g=>{let _=Lu(g,i.toGeoJSON(15)),b;_&&_.features.length>0?b=L.geoJSON(_):b=L.geoJSON(g),b.getLayers().forEach(k=>{ku(i.toGeoJSON(15),k.toGeoJSON(15))||k.addTo(a)})}),d.length>1?u=lm(a):u=a.toGeoJSON(15)}return u},_change:L.Util.falseFn}),hi.Text=hi.extend({initialize(i){this._map=i,this._shape="Text",this.toolbarButtonName="drawText"},enable(i){L.Util.setOptions(this,i),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(vt("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var i;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(i=this._hintMarker)==null||i.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let r=i;r.target=this._hintMarker,this._handleSnapping(r)}},_createMarker(i){var d,g,_,b;if(!i.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(d=this.options.textOptions)==null?void 0:d.className){let k=this.options.textOptions.className.split(" ");this.textArea.classList.add(...k)}let a=this._createTextIcon(this.textArea),u=new L.Marker(r,{textMarker:!0,_textMarkerOverPM:!0,icon:a});if(this._setPane(u,"markerPane"),this._finishLayer(u),u.pm||(u.options.draggable=!1),u.addTo(this._map.pm._getContainingLayer()),u.pm){u.pm.textArea=this.textArea,L.setOptions(u.pm,{removeIfEmpty:((g=this.options.textOptions)==null?void 0:g.removeIfEmpty)??!0});let k=((_=this.options.textOptions)==null?void 0:_.focusAfterDraw)??!0;u.pm._createTextMarker(k),(b=this.options.textOptions)!=null&&b.text&&u.pm.setText(this.options.textOptions.text)}this._fireCreate(u),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(i){this.enable(),this._hintMarker.setLatLng(i.latlng)},_createTextArea(){let i=document.createElement("textarea");return i.readOnly=!0,i.classList.add("pm-textarea","pm-disabled"),i},_createTextIcon(i){return L.divIcon({className:"pm-text-marker",html:i})}});var um={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,mi(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let i=this._getDOMElem();i&&(mi(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(i)):L.DomEvent.on(i,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,mi(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let i=this._getDOMElem();i&&(mi(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(i)):L.DomEvent.off(i,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(i){let r=i.touches?i.touches[0]:i,a={originalEvent:r,target:this._layer};return a.containerPoint=this._map.mouseEventToContainerPoint(r),a.latlng=this._map.containerPointToLatLng(a.containerPoint),this._dragMixinOnMouseDown(a),!1},_simulateMouseMoveEvent(i){let r=i.touches?i.touches[0]:i,a={originalEvent:r,target:this._layer};return a.containerPoint=this._map.mouseEventToContainerPoint(r),a.latlng=this._map.containerPointToLatLng(a.containerPoint),this._dragMixinOnMouseMove(a),!1},_simulateMouseUpEvent(i){let r={originalEvent:i.touches?i.touches[0]:i,target:this._layer};return i.type.indexOf("touch")===-1&&(r.containerPoint=this._map.mouseEventToContainerPoint(i),r.latlng=this._map.containerPointToLatLng(r.containerPoint)),this._dragMixinOnMouseUp(r),!1},_dragMixinOnMouseDown(i){if(i.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(i);let r=i._fromLayerSync,a=this._syncLayers("_dragMixinOnMouseDown",i);if(this._layer instanceof L.Marker&&(this.options.snappable&&!r&&!a?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let u="resizeableCircleMarker";this._layer instanceof L.Circle&&(u="resizeableCircle"),this.options.snappable&&!r&&!a?this._layer.pm.options[u]||this._initSnappableMarkersDrag():this._layer.pm.options[u]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=i.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(i){this._overwriteEventIfItComesFromMarker(i);let r=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",i),this._dragging||(this._dragging=!0,L.DomUtil.addClass(r,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=i.latlng),this._onLayerDrag(i),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(i){let r=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",i),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,r&&L.DomUtil.removeClass(r,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(i){let{latlng:r}=i,a={lat:r.lat-this._tempDragCoord.lat,lng:r.lng-this._tempDragCoord.lng},u=d=>d.map(g=>{if(Array.isArray(g))return u(g);let _={lat:g.lat+a.lat,lng:g.lng+a.lng};return(g.alt||g.alt===0)&&(_.alt=g.alt),_});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let d=u([this._layer.getLatLng()]);this._layer.setLatLng(d[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let d=this._layer.getLatLng();this._layer._snapped&&(d=this._layer._orgLatLng);let g=u([d]);this._layer.setLatLng(g[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let d=u([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(d),this._fireChange(this._layer.getBounds(),"Edit")}else{let d=u(this._layer.getLatLngs());this._layer.setLatLngs(d),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=r,i.layer=this._layer,this._fireDrag(i)},addDraggingClass(){let i=this._getDOMElem();i&&L.DomUtil.addClass(i,"leaflet-pm-draggable")},removeDraggingClass(){let i=this._getDOMElem();i&&L.DomUtil.removeClass(i,"leaflet-pm-draggable")},_getDOMElem(){let i=null;return this._layer._path?i=this._layer._path:this._layer._renderer&&this._layer._renderer._container?i=this._layer._renderer._container:this._layer._image?i=this._layer._image:this._layer._icon&&(i=this._layer._icon),i},_overwriteEventIfItComesFromMarker(i){i.target.getLatLng&&(!i.target._radius||i.target._radius<=10)&&(i.containerPoint=this._map.mouseEventToContainerPoint(i.originalEvent),i.latlng=this._map.containerPointToLatLng(i.containerPoint))},_syncLayers(i,r){if(this.enabled())return!1;if(!r._fromLayerSync&&this._layer===r.target&&this.options.syncLayersOnDrag){r._fromLayerSync=!0;let a=[];if(L.Util.isArray(this.options.syncLayersOnDrag))a=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(u=>{u instanceof L.LayerGroup&&(a=a.concat(u.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let u in this._parentLayerGroup){let d=this._parentLayerGroup[u];d.pm&&(a=d.pm.getLayers(!0))}return L.Util.isArray(a)&&a.length>0&&(a=a.filter(u=>!!u.pm).filter(u=>!!u.pm.options.draggable),a.forEach(u=>{u!==this._layer&&u.pm[i]&&(u._snapped=!1,u.pm[i](r))})),a.length>0}return!1},_stopDOMImageDrag(i){return i.preventDefault(),!1}},cm=um,hm=v(kn());function dm(i,r,a,u){return a.unproject(r.transform(a.project(i,u)),u)}function ah(i,r,a){let u=a.getMaxZoom();if(u===1/0&&(u=a.getZoom()),L.Util.isArray(i)){let d=[];return i.forEach(g=>{d.push(ah(g,r,a))}),d}return i instanceof L.LatLng?dm(i,r,a,u):null}function Ss(i,r){r instanceof L.Layer&&(r=r.getLatLng());let a=i.getMaxZoom();return a===1/0&&(a=i.getZoom()),i.project(r,a)}function Ua(i,r){let a=i.getMaxZoom();return a===1/0&&(a=i.getZoom()),i.unproject(r,a)}var fm={_onRotateStart(i){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Ss(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Ss(this._map,i.target.getLatLng()),this._initialRotateLatLng=sn(this._layer),this._startAngle=this.getAngle();let r=sn(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,r),this._fireRotationStart(this._map,r)},_onRotate(i){let r=Ss(this._map,i.target.getLatLng()),a=this._rotationStartPoint,u=this._rotationOriginPoint,d=Math.atan2(r.y-u.y,r.x-u.x)-Math.atan2(a.y-u.y,a.x-u.x);this._layer.setLatLngs(this._rotateLayer(d,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let g=this;function _(U,N=[],me=-1){if(me>-1&&N.push(me),L.Util.isArray(U[0]))U.forEach((we,He)=>_(we,N.slice(),He));else{let we=N.length>0?(0,hm.default)(g._markers,N):g._markers[0];U.forEach((He,Qe)=>{we[Qe].setLatLng(He)})}}_(this._layer.getLatLngs());let b=sn(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(d,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let k=d*180/Math.PI;k=k<0?k+360:k;let S=k+this._startAngle;this._setAngle(S),this._rotationLayer.pm._setAngle(S),this._fireRotation(this._rotationLayer,k,b),this._fireRotation(this._map,k,b),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let i=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let r=sn(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=sn(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,i,r),this._fireRotationEnd(this._map,i,r),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(i,r,a,u,d){let g=Ss(d,a);return this._matrix=u.clone().rotate(i,g).flip(),ah(r,this._matrix,d)},_setAngle(i){i=i<0?i+360:i,this._angle=i%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let i=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),r=i.getCenter();return i.removeFrom(this._layer._map),r},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(cs(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let i={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),i),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=sn(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(i){let r=this.getAngle(),a=this._layer.getLatLngs(),u=i*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(u,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+i),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(u,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let d=this.getAngle()-r;d=d<0?d+360:d,this._startAngle=r,this._fireRotation(this._layer,d,a,this._layer),this._fireRotation(this._map||this._layer._map,d,a,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(i){let r=i-this.getAngle();this.rotateLayer(r)},getAngle(){return this._angle||0},setInitAngle(i){this._setAngle(i)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(i){this._rotationCenter=i,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(i)}},pm=fm,mm=L.Class.extend({includes:[cm,po,pm,ls],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(i){L.Util.setOptions(this,i)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(i,r){r==="layerPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":r==="vertexPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":r==="markerPane"&&(i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(i,r){let a=r.target,u={layer:this._layer,marker:a,event:r},d="";return i==="move"?d="moveVertexValidation":i==="add"?d="addVertexValidation":i==="remove"&&(d="removeVertexValidation"),this.options[d]&&typeof this.options[d]=="function"&&!this.options[d](u)?(i==="move"&&(a._cancelDragEventChain=a.getLatLng()),!1):(a._cancelDragEventChain=null,!0)},_vertexValidationDrag(i){return i._cancelDragEventChain?(i._latlng=i._cancelDragEventChain,i.update(),!1):!0},_vertexValidationDragEnd(i){return i._cancelDragEventChain?(i._cancelDragEventChain=null,!1):!0}}),pi=mm;pi.LayerGroup=L.Class.extend({initialize(i){this._layerGroup=i,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(u=>this._initLayer(u));let r=u=>{if(u.layer._pmTempLayer)return;this._layers=this.getLayers();let d=this._layers.filter(g=>!g.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in g.pm._parentLayerGroup));d.forEach(g=>{this._initLayer(g)}),d.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(r,100,this),this),this._layerGroup.on("layerremove",u=>{this._removeLayerFromGroup(u.target)},this);let a=u=>{u.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(a,100,this),this)},enable(i,r=[]){r.length===0&&(this._layers=this.getLayers()),this._options=i,this._layers.forEach(a=>{a instanceof L.LayerGroup?r.indexOf(a._leaflet_id)===-1&&(r.push(a._leaflet_id),a.pm.enable(i,r)):a.pm.enable(i)})},disable(i=[]){i.length===0&&(this._layers=this.getLayers()),this._layers.forEach(r=>{r instanceof L.LayerGroup?i.indexOf(r._leaflet_id)===-1&&(i.push(r._leaflet_id),r.pm.disable(i)):r.pm.disable()})},enabled(i=[]){return i.length===0&&(this._layers=this.getLayers()),!!this._layers.find(r=>r instanceof L.LayerGroup?i.indexOf(r._leaflet_id)===-1?(i.push(r._leaflet_id),r.pm.enabled(i)):!1:r.pm.enabled())},toggleEdit(i,r=[]){r.length===0&&(this._layers=this.getLayers()),this._options=i,this._layers.forEach(a=>{a instanceof L.LayerGroup?r.indexOf(a._leaflet_id)===-1&&(r.push(a._leaflet_id),a.pm.toggleEdit(i,r)):a.pm.toggleEdit(i)})},_initLayer(i){let r=L.Util.stamp(this._layerGroup);i.pm._parentLayerGroup||(i.pm._parentLayerGroup={}),i.pm._parentLayerGroup[r]=this._layerGroup},_removeLayerFromGroup(i){if(i.pm&&i.pm._layerGroup){let r=L.Util.stamp(this._layerGroup);delete i.pm._layerGroup[r]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(i=>i.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var i;return this._map||((i=this._layers.find(r=>!!r._map))==null?void 0:i._map)||null},getLayers(i=!1,r=!0,a=!0,u=[]){let d=[];return i?this._layerGroup.getLayers().forEach(g=>{d.push(g),g instanceof L.LayerGroup&&u.indexOf(g._leaflet_id)===-1&&(u.push(g._leaflet_id),d=d.concat(g.pm.getLayers(!0,!0,!0,u)))}):d=this._layerGroup.getLayers(),a&&(d=d.filter(g=>!(g instanceof L.LayerGroup))),r&&(d=d.filter(g=>!!g.pm),d=d.filter(g=>!g._pmTempLayer),d=d.filter(g=>!L.PM.optIn&&!g.options.pmIgnore||L.PM.optIn&&g.options.pmIgnore===!1)),d},setOptions(i,r=[]){r.length===0&&(this._layers=this.getLayers()),this.options=i,this._layers.forEach(a=>{a.pm&&(a instanceof L.LayerGroup?r.indexOf(a._leaflet_id)===-1&&(r.push(a._leaflet_id),a.pm.setOptions(i,r)):a.pm.setOptions(i))})}}),pi.Marker=pi.extend({_shape:"Marker",initialize(i){this._layer=i,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(i={draggable:!0}){if(L.Util.setOptions(this,i),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(i){let r=i.target;r.remove(),this._fireRemove(r),this._fireRemove(this._map,r)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let i=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,i.off("pm:drag",this._handleSnapping,this),i.on("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.on("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this),i.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let i=this._layer;i.off("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this)}});var _r=v(kn()),gm={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let i=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=i.filter((r,a,u)=>u.indexOf(r)===a)},_removeFromCache(i){let r=this.markerCache.indexOf(i);r>-1&&this.markerCache.splice(r,1)},renderLimits(i){this.markerCache.forEach(r=>{i.includes(r)?this._markerGroup.addLayer(r):this._markerGroup.removeLayer(r)})},applyLimitFilters({latlng:i={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let r=[...this._filterClosestMarkers(i)];this.renderLimits(r)},_filterClosestMarkers(i){let r=[...this.markerCache],a=this.options.limitMarkersToCount;return a===-1?r:(r.sort((u,d)=>{let g=u._latlng.distanceTo(i),_=d._latlng.distanceTo(i);return g-_}),r.filter((u,d)=>a>-1?d<a:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(i){this._preventRenderMarkers=!!i}},_m=gm;pi.Line=pi.extend({includes:[_m],_shape:"Line",initialize(i){this._layer=i,this._enabled=!1},enable(i){if(L.Util.setOptions(this,i),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let i=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(i,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(i){return this.enabled()?this.disable():this.enable(i),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let i=this._map,r=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(i),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let a=u=>{if(Array.isArray(u[0]))return u.map(a,this);let d=u.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&u.map((g,_)=>{let b=this.isPolygon()?(_+1)%u.length:_+1;return this._createMiddleMarker(d[_],d[b])}),d};this._markers=a(r),this.filterMarkerGroup(),i.addLayer(this._markerGroup)},_createMarker(i){let r=new L.Marker(i,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._pmTempLayer=!0,this.options.rotate?(r.on("dragstart",this._onRotateStart,this),r.on("drag",this._onRotate,this),r.on("dragend",this._onRotateEnd,this)):(r.on("click",this._onVertexClick,this),r.on("dragstart",this._onMarkerDragStart,this),r.on("move",this._onMarkerDrag,this),r.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||r.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(r),r},_createMiddleMarker(i,r){if(!i||!r)return!1;let a=L.PM.Utils.calcMiddleLatLng(this._map,i.getLatLng(),r.getLatLng()),u=this._createMarker(a),d=L.divIcon({className:"marker-icon marker-icon-middle"});return u.setIcon(d),u.leftM=i,u.rightM=r,i._middleMarkerNext=u,r._middleMarkerPrev=u,u.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),u.on("movestart",this._onMiddleMarkerMoveStart,this),u},_onMiddleMarkerClick(i){let r=i.target;if(!this._vertexValidation("add",i))return;let a=L.divIcon({className:"marker-icon"});r.setIcon(a),this._addMarker(r,r.leftM,r.rightM)},_onMiddleMarkerMoveStart(i){let r=i.target;if(r.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",i)){r.on("move",this._onMiddleMarkerMovePrevent,this);return}r._dragging=!0,this._addMarker(r,r.leftM,r.rightM)},_onMiddleMarkerMovePrevent(i){let r=i.target;this._vertexValidationDrag(r)},_onMiddleMarkerMoveEnd(i){let r=i.target;if(r.off("move",this._onMiddleMarkerMovePrevent,this),r.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(r))return;let a=L.divIcon({className:"marker-icon"});r.setIcon(a),setTimeout(()=>{delete r._dragging},100)},_addMarker(i,r,a){i.off("movestart",this._onMiddleMarkerMoveStart,this),i.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let u=i.getLatLng(),d=this._layer._latlngs;delete i.leftM,delete i.rightM;let{indexPath:g,index:_,parentPath:b}=L.PM.Utils.findDeepMarkerIndex(this._markers,r),k=g.length>1?(0,_r.default)(d,b):d,S=g.length>1?(0,_r.default)(this._markers,b):this._markers;k.splice(_+1,0,u),S.splice(_+1,0,i),this._layer.setLatLngs(d),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(r,i),this._createMiddleMarker(i,a)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(i,L.PM.Utils.findDeepMarkerIndex(this._markers,i).indexPath,u),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return ds(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(i){let r=this._layer,a,u;if(this.options.allowSelfIntersection?a=!1:(u=ds(this._layer.toGeoJSON(15)),a=u.features.length>0),a){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return a;i?this._flashLayer():(r.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(u)}else r.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return a},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(i,r){i.forEach(a=>{Array.isArray(a)?this._updateDisabledMarkerStyle(a,r):a._icon&&(r&&!this._checkMarkerAllowedToDrag(a)?L.DomUtil.addClass(a._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(a._icon,"vertexmarker-disabled"))})},_removeMarker(i){let r=i.target;if(!this._vertexValidation("remove",i))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=sn(this._layer,this._layer.getLatLngs()));let a=this._layer.getLatLngs(),{indexPath:u,index:d,parentPath:g}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);if(!u)return;let _=u.length>1?(0,_r.default)(a,g):a,b=u.length>1?(0,_r.default)(this._markers,g):this._markers,k=g[g.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!k&&(_.length<=2||this.isPolygon()&&_.length<=3)){this._flashLayer();return}_.splice(d,1),this._layer.setLatLngs(a),this.isPolygon()&&_.length<=2&&_.splice(0,_.length);let S=!1;if(_.length<=1&&(_.splice(0,_.length),g.length>1&&u.length>1&&(a=Dr(a)),this._layer.setLatLngs(a),this._initMarkers(),S=!0),Hn(a)||this._layer.remove(),a=Dr(a),this._layer.setLatLngs(a),this._markers=Dr(this._markers),!S&&(b=u.length>1?(0,_r.default)(this._markers,g):this._markers,r._middleMarkerPrev&&(this._markerGroup.removeLayer(r._middleMarkerPrev),this._removeFromCache(r._middleMarkerPrev)),r._middleMarkerNext&&(this._markerGroup.removeLayer(r._middleMarkerNext),this._removeFromCache(r._middleMarkerNext)),this._markerGroup.removeLayer(r),this._removeFromCache(r),b)){let U,N;if(this.isPolygon()?(U=(d+1)%b.length,N=(d+(b.length-1))%b.length):(N=d-1<0?void 0:d-1,U=d+1>=b.length?void 0:d+1),U!==N){let me=b[N],we=b[U];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(me,we)}b.splice(d,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(r,u),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(i){let r=this._layer.getLatLngs(),a=i.getLatLng(),{indexPath:u,index:d,parentPath:g}=L.PM.Utils.findDeepMarkerIndex(this._markers,i);(u.length>1?(0,_r.default)(r,g):r).splice(d,1,a),this._layer.setLatLngs(r)},_getNeighborMarkers(i){let{indexPath:r,index:a,parentPath:u}=L.PM.Utils.findDeepMarkerIndex(this._markers,i),d=r.length>1?(0,_r.default)(this._markers,u):this._markers,g=(a+1)%d.length,_=(a+(d.length-1))%d.length,b=d[_],k=d[g];return{prevMarker:b,nextMarker:k}},_checkMarkerAllowedToDrag(i){let{prevMarker:r,nextMarker:a}=this._getNeighborMarkers(i),u=L.polyline([r.getLatLng(),i.getLatLng()]),d=L.polyline([i.getLatLng(),a.getLatLng()]),g=an(this._layer.toGeoJSON(15),u.toGeoJSON(15)).features.length,_=an(this._layer.toGeoJSON(15),d.toGeoJSON(15)).features.length;return i.getLatLng()===this._markers[0][0].getLatLng()?_+=1:i.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(g+=1),!(g<=2&&_<=2)},_onMarkerDragStart(i){let r=i.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",i))return;let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDragStart(i,a),this.options.allowSelfIntersection||(this._coordsBeforeEdit=sn(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(r):this._markerAllowedToDrag=null},_onMarkerDrag(i){let r=i.target;if(!this._vertexValidationDrag(r))return;let{indexPath:a,index:u,parentPath:d}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);if(!a)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(r);let g=a.length>1?(0,_r.default)(this._markers,d):this._markers,_=(u+1)%g.length,b=(u+(g.length-1))%g.length,k=r.getLatLng(),S=g[b].getLatLng(),U=g[_].getLatLng();if(r._middleMarkerNext){let N=L.PM.Utils.calcMiddleLatLng(this._map,k,U);r._middleMarkerNext.setLatLng(N)}if(r._middleMarkerPrev){let N=L.PM.Utils.calcMiddleLatLng(this._map,k,S);r._middleMarkerPrev.setLatLng(N)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(i,a),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(i){let r=i.target;if(!this._vertexValidationDragEnd(r))return;let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r),u=!this.options.allowSelfIntersection&&this.hasSelfIntersection();u&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(u=!1);let d=!this.options.allowSelfIntersection&&u;if(this._fireMarkerDragEnd(i,a,d),d){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(i,a);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(i){let r=i.target;if(r._dragging)return;let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireVertexClick(i,a)}}),pi.Polygon=pi.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(i){let{prevMarker:r,nextMarker:a}=this._getNeighborMarkers(i),u=L.polyline([r.getLatLng(),i.getLatLng()]),d=L.polyline([i.getLatLng(),a.getLatLng()]),g=an(this._layer.toGeoJSON(15),u.toGeoJSON(15)).features.length,_=an(this._layer.toGeoJSON(15),d.toGeoJSON(15)).features.length;return!(g<=2&&_<=2)}}),pi.Rectangle=pi.Polygon.extend({_shape:"Rectangle",_initMarkers(){let i=this._map,r=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,i.addLayer(this._markerGroup),this._markers=[],this._markers[0]=r.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((a,u)=>{let d=this._cornerMarkers.find(g=>g._index===u);d&&d.setLatLng(a)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(i,r){let a=new L.Marker(i,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(a,"vertexPane"),a._origLatLng=i,a._index=r,a._pmTempLayer=!0,a.on("click",this._onVertexClick,this),this._markerGroup.addLayer(a),a},_addMarkerEvents(){this._markers[0].forEach(i=>{i.on("dragstart",this._onMarkerDragStart,this),i.on("drag",this._onMarkerDrag,this),i.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||i.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(i){if(!this._vertexValidation("move",i))return;let r=i.target,a=this._cornerMarkers;r._oppositeCornerLatLng=a.find(d=>d._index===(r._index+2)%4).getLatLng(),r._snapped=!1;let{indexPath:u}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDragStart(i,u)},_onMarkerDrag(i){let r=i.target;if(!this._vertexValidationDrag(r)||r._index===void 0)return;this._adjustRectangleForMarkerMove(r);let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDrag(i,a),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(i){let r=i.target;if(!this._vertexValidationDragEnd(r))return;this._cornerMarkers.forEach(u=>{delete u._oppositeCornerLatLng});let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDragEnd(i,a),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(i){L.extend(i._origLatLng,i._latlng);let r=L.PM.Utils._getRotatedRectangle(i.getLatLng(),i._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(r),this._adjustAllMarkers(i),this._layer.redraw()},_adjustAllMarkers(i){let r=this._layer.getLatLngs()[0];if(r&&r.length!==4&&r.length>0)r.forEach((a,u)=>{this._cornerMarkers[u].setLatLng(a)}),this._cornerMarkers.slice(r.length).forEach(a=>{a.setLatLng(r[0])});else if(!r||!r.length)console.error("The layer has no LatLngs");else{let a=r.findIndex(u=>i.getLatLng().equals(u));a>-1?(this._cornerMarkers[(i._index+1)%4].setLatLng(r[(a+1)%4]),this._cornerMarkers[(i._index+2)%4].setLatLng(r[(a+2)%4]),this._cornerMarkers[(i._index+3)%4].setLatLng(r[(a+3)%4])):this._cornerMarkers.forEach(u=>{u.setLatLng(r[u._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(cs(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let i=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(i[0],i[2],this.getAngle(),this._map||this)}}),pi.CircleMarker=pi.extend({_shape:"CircleMarker",initialize(i){this._layer=i,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(i={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,i),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let i=this._map;this._helperLayers&&(this._helperLayers.removeFrom(i),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(i);let r=this._layer.getLatLng(),a=this._layer._radius,u=this._getLatLngOnCircle(r,a);this._centerMarker=this._createCenterMarker(r),this._outerMarker=this._createOuterMarker(u),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(i,r){let a=this._map.project(i),u=L.point(a.x+r,a.y);return this._map.unproject(u)},_createHintLine(i,r){let a=i.getLatLng(),u=r.getLatLng();this._hintline=L.polyline([a,u],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(i){let r=this._createMarker(i);return this.options.draggable?(L.DomUtil.addClass(r._icon,"leaflet-pm-draggable"),r.on("move",this._moveCircle,this)):r.dragging.disable(),r},_createOuterMarker(i){let r=this._createMarker(i);return r.on("drag",this._resizeCircle,this),r},_createMarker(i){let r=new L.Marker(i,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._origLatLng=i,r._pmTempLayer=!0,r.on("dragstart",this._onMarkerDragStart,this),r.on("drag",this._onMarkerDrag,this),r.on("dragend",this._onMarkerDragEnd,this),r.on("click",this._onVertexClick,this),this._helperLayers.addLayer(r),r},_moveCircle(i){if(i.target._cancelDragEventChain)return;let r=this._centerMarker.getLatLng();this._layer.setLatLng(r);let a=this._layer._radius,u=this._getLatLngOnCircle(r,a);this._outerMarker._latlng=u,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let i=this._layer.getLatLng(),r=this._layer._radius,a=this._getLatLngOnCircle(i,r);this._outerMarker.setLatLng(a),this._centerMarker.setLatLng(i),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let i=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng(),a=this._distanceCalculation(i,r);this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(a),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let i=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng();this._hintline.setLatLngs([i,r])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(i){this._vertexValidation("move",i)&&this._fireMarkerDragStart(i)},_onMarkerDrag(i){let r=i.target;r instanceof L.Marker&&!this._vertexValidationDrag(r)||this._fireMarkerDrag(i)},_onMarkerDragEnd(i){this._extedingMarkerDragEnd();let r=i.target;this._vertexValidationDragEnd(r)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(i))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let i=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,i.off("pm:drag",this._handleSnapping,this),i.on("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.on("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this),i.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let i=this._layer;i.off("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let i=this._layer._map||this._map;if(i){let r=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),i,this._layer.getLatLng()),a=L.circle(this._layer.getLatLng(),this._layer.options);a.setRadius(r);let u=i&&i.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(a,200,!u).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(a,200,!u),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let i=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng(),a=this._distanceCalculation(i,r);return this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?r=hs(this._map,i,r,this._getMinDistanceInMeter(i)):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&(r=hs(this._map,i,r,this._getMaxDistanceInMeter(i))),r},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let i=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng(),a=this._distanceCalculation(i,r);this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(i,r){return this._map.project(i).distanceTo(this._map.project(r))},_getMinDistanceInMeter(i){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,i)},_getMaxDistanceInMeter(i){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,i)},_onVertexClick(i){i.target._dragging||this._fireVertexClick(i,void 0)}}),pi.Circle=pi.CircleMarker.extend({_shape:"Circle",initialize(i){this._layer=i,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(i){L.PM.Edit.CircleMarker.prototype.enable.call(this,i||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let i=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(i,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let i=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!i).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!i),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(i,r){return this._map.distance(i,r)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(i){i.target._dragging||this._fireVertexClick(i,void 0)}}),pi.ImageOverlay=pi.extend({_shape:"ImageOverlay",initialize(i){this._layer=i,this._enabled=!1},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},enabled(){return this._enabled},enable(i={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,i),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let i=this._layer.getBounds(),r=i.getNorthWest(),a=i.getNorthEast(),u=i.getSouthEast(),d=i.getSouthWest();return[r,a,u,d]}}),pi.Text=pi.extend({_shape:"Text",initialize(i){this._layer=i,this._enabled=!1},enable(i){if(L.Util.setOptions(this,i),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let i=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),i.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let i=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,i.off("pm:drag",this._handleSnapping,this),i.on("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.on("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this),i.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let i=this._layer;i.off("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let i=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,r=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${i}px`,this.textArea.style.width=`${r}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(i){i.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(i={}){let r=this._hasFocus;this._hasFocus=i.type==="focus",!r!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(i){i&&(this.textArea.value=i),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let r=this.options.className.split(" ");this.textArea.classList.add(...r)}let i=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(i),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(i=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),i===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(i){i.preventDefault()}});var Ou=function(i,r,a,u,d,g){this._matrix=[i,r,a,u,d,g]};Ou.init=()=>new L.PM.Matrix(1,0,0,1,0,0),Ou.prototype={transform(i){return this._transform(i.clone())},_transform(i){let r=this._matrix,{x:a,y:u}=i;return i.x=r[0]*a+r[1]*u+r[4],i.y=r[2]*a+r[3]*u+r[5],i},untransform(i){let r=this._matrix;return new L.Point((i.x/r[0]-r[4])/r[0],(i.y/r[2]-r[5])/r[2])},clone(){let i=this._matrix;return new L.PM.Matrix(i[0],i[1],i[2],i[3],i[4],i[5])},translate(i){if(i===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let r,a;return typeof i=="number"?(r=i,a=i):(r=i.x,a=i.y),this._add(1,0,0,1,r,a)},scale(i,r){if(i===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let a,u;return r=r||L.point(0,0),typeof i=="number"?(a=i,u=i):(a=i.x,u=i.y),this._add(a,0,0,u,r.x,r.y)._add(1,0,0,1,-r.x,-r.y)},rotate(i,r){let a=Math.cos(i),u=Math.sin(i);return r=r||new L.Point(0,0),this._add(a,u,-u,a,r.x,r.y)._add(1,0,0,1,-r.x,-r.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(i,r,a,u,d,g){let _=[[],[],[]],b=this._matrix,k=[[b[0],b[2],b[4]],[b[1],b[3],b[5]],[0,0,1]],S=[[i,a,d],[r,u,g],[0,0,1]],U;i&&i instanceof L.PM.Matrix&&(b=i._matrix,S=[[b[0],b[2],b[4]],[b[1],b[3],b[5]],[0,0,1]]);for(let N=0;N<3;N+=1)for(let me=0;me<3;me+=1){U=0;for(let we=0;we<3;we+=1)U+=k[N][we]*S[we][me];_[N][me]=U}return this._matrix=[_[0][0],_[1][0],_[0][1],_[1][1],_[0][2],_[1][2]],this}};var ym=Ou,vm={calcMiddleLatLng(i,r,a){let u=i.project(r),d=i.project(a);return i.unproject(u._add(d)._divideBy(2))},findLayers(i){let r=[];return i.eachLayer(a=>{(a instanceof L.Polyline||a instanceof L.Marker||a instanceof L.Circle||a instanceof L.CircleMarker||a instanceof L.ImageOverlay)&&r.push(a)}),r=r.filter(a=>!!a.pm),r=r.filter(a=>!a._pmTempLayer),r=r.filter(a=>!L.PM.optIn&&!a.options.pmIgnore||L.PM.optIn&&a.options.pmIgnore===!1),r},circleToPolygon(i,r=60,a=!0){let u=i.getLatLng(),d=i.getRadius(),g=us(u,d,r,0,a),_=[];for(let b=0;b<g.length;b+=1){let k=[g[b].lat,g[b].lng];_.push(k)}return L.polygon(_,i.options)},disablePopup(i){i.getPopup()&&(i._tempPopupCopy=i.getPopup(),i.unbindPopup())},enablePopup(i){i._tempPopupCopy&&(i.bindPopup(i._tempPopupCopy),delete i._tempPopupCopy)},_fireEvent(i,r,a,u=!1){i.fire(r,a,u);let{groups:d}=this.getAllParentGroups(i);d.forEach(g=>{g.fire(r,a,u)})},getAllParentGroups(i){let r=[],a=[],u=d=>{for(let g in d._eventParents)if(r.indexOf(g)===-1){r.push(g);let _=d._eventParents[g];a.push(_),u(_)}};return!i._pmLastGroupFetch||!i._pmLastGroupFetch.time||new Date().getTime()-i._pmLastGroupFetch.time>1e3?(u(i),i._pmLastGroupFetch={time:new Date().getTime(),groups:a,groupIds:r},{groupIds:r,groups:a}):{groups:i._pmLastGroupFetch.groups,groupIds:i._pmLastGroupFetch.groupIds}},createGeodesicPolygon:us,getTranslation:vt,findDeepCoordIndex(i,r,a=!0){let u,d=_=>(b,k)=>{let S=_.concat(k);if(a){if(b.lat&&b.lat===r.lat&&b.lng===r.lng)return u=S,!0}else if(b.lat&&L.latLng(b).equals(r))return u=S,!0;return Array.isArray(b)&&b.some(d(S))};i.some(d([]));let g={};return u&&(g={indexPath:u,index:u[u.length-1],parentPath:u.slice(0,u.length-1)}),g},findDeepMarkerIndex(i,r){let a,u=g=>(_,b)=>{let k=g.concat(b);return _._leaflet_id===r._leaflet_id?(a=k,!0):Array.isArray(_)&&_.some(u(k))};i.some(u([]));let d={};return a&&(d={indexPath:a,index:a[a.length-1],parentPath:a.slice(0,a.length-1)}),d},_getIndexFromSegment(i,r){if(r&&r.length===2){let a=this.findDeepCoordIndex(i,r[0]),u=this.findDeepCoordIndex(i,r[1]),d=Math.max(a.index,u.index);return(a.index===0||u.index===0)&&d!==1&&(d+=1),{indexA:a,indexB:u,newIndex:d,indexPath:a.indexPath,parentPath:a.parentPath}}return null},_getRotatedRectangle(i,r,a,u){let d=Ss(u,i),g=Ss(u,r),_=a*Math.PI/180,b=Math.cos(_),k=Math.sin(_),S=(g.x-d.x)*b+(g.y-d.y)*k,U=(g.y-d.y)*b-(g.x-d.x)*k,N=S*b+d.x,me=S*k+d.y,we=-U*k+d.x,He=U*b+d.y,Qe=Ua(u,d),ot=Ua(u,{x:N,y:me}),At=Ua(u,g),z=Ua(u,{x:we,y:He});return[Qe,ot,At,z]},pxRadiusToMeterRadius(i,r,a){let u=r.project(a),d=L.point(u.x+i,u.y);return r.distance(r.unproject(d),a)}},bm=vm;L.PM=L.PM||{version:eo.version,Map:ka,Toolbar:fo,Draw:hi,Edit:pi,Utils:bm,Matrix:ym,activeLang:"en",optIn:!1,initialize(i){this.addInitHooks(i)},setOptIn(i){this.optIn=!!i},addInitHooks(){function i(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(i);function r(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(r);function a(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(a);function u(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(u);function d(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(d);function g(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(g);function _(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(_);function b(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(b);function k(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(k)},reInitLayer(i){i instanceof L.LayerGroup&&i.eachLayer(r=>{this.reInitLayer(r)}),i.pm||L.PM.optIn&&i.options.pmIgnore!==!1||i.options.pmIgnore||(i instanceof L.Map?i.pm=new L.PM.Map(i):i instanceof L.Marker?i.options.textMarker?(i.pm=new L.PM.Edit.Text(i),i.pm._initTextMarker(),i.pm._createTextMarker(!1)):i.pm=new L.PM.Edit.Marker(i):i instanceof L.Circle?i.pm=new L.PM.Edit.Circle(i):i instanceof L.CircleMarker?i.pm=new L.PM.Edit.CircleMarker(i):i instanceof L.Rectangle?i.pm=new L.PM.Edit.Rectangle(i):i instanceof L.Polygon?i.pm=new L.PM.Edit.Polygon(i):i instanceof L.Polyline?i.pm=new L.PM.Edit.Line(i):i instanceof L.LayerGroup?i.pm=new L.PM.Edit.LayerGroup(i):i instanceof L.ImageOverlay&&(i.pm=new L.PM.Edit.ImageOverlay(i)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(i){let r=this._map.mouseEventToLayerPoint(i),a,u;for(let d=this._drawFirst;d;d=d.next)a=d.layer,a.options.interactive&&a._containsPoint(r)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(a))&&(u=a);u&&(L.DomEvent.fakeStop(i),this._fireEvent([u],i))}}),L.PM.initialize()})();function Rb(){const e=Ze(null),n=Ze(null),s=D=>`${(D*100).toFixed(1)}%`,l=D=>`${((D%360+360)%360).toFixed(1)}`,h=D=>(D%360+360)%360,p=(D,V,H)=>{const Ce=h(V);let re=h(H)-Ce;return re<=0&&(re+=360),Math.PI*D*re/180},f=(D,V,H)=>{const Ce=h(V);let re=h(H)-Ce;return re<=0&&(re+=360),Math.PI*D*D*re/360},y=D=>{if("getLatLngs"in D){const H=D.getLatLngs();if(Array.isArray(H)&&H[0]){const pe=(Array.isArray(H[0])?H[0]:H).map(Ae=>[Ae.lng,Ae.lat]),re=Ec([pe]);return Pc(re)}}return 0},v=D=>{if("getLatLngs"in D){const H=D.getLatLngs();if(Array.isArray(H)){const Ce=(Array.isArray(H[0])?H[0]:H).map(re=>[re.lng,re.lat]),pe=Qo(Ce);return vl(pe,{units:"meters"})}}return 0},C=D=>{if("getLatLngs"in D){const H=D.getLatLngs();if(Array.isArray(H)&&H[0]){const pe=[...(Array.isArray(H[0])?H[0]:H).map(Ae=>[Ae.lng,Ae.lat])];pe.length>0&&pe.push(pe[0]);const re=Qo(pe);return vl(re,{units:"meters"})}}return 0},P=D=>{const V=D;return V._mRadius?V._mRadius:V.getRadius?V.getRadius():0},M=(D,V)=>{var Ce,pe;console.log("=== CALCULATE PROPERTIES START ==="),console.log("Input:",{type:V,layer:{constructor:(Ce=D==null?void 0:D.constructor)==null?void 0:Ce.name,_mRadius:D._mRadius,_latlng:D._latlng,options:D.options}});const H={type:V,style:D.options};try{switch(V){case"Circle":const re=P(D);console.log("Circle radius calculation:",{_mRadius:D._mRadius,calculatedRadius:re,getRadius:(pe=D.getRadius)==null?void 0:pe.call(D)}),H.radius=re,H.diameter=H.radius*2,H.area=Math.PI*Math.pow(H.radius,2),H.perimeter=2*Math.PI*H.radius,H.center=D.getLatLng(),console.log("Circle properties calculated:",H);break;case"Semicircle":H.radius=P(D),H.diameter=H.radius*2,H.center=D.getLatLng(),H.startAngle=h(D.options.startAngle||0),H.stopAngle=h(D.options.stopAngle||180),H.arcLength=p(H.radius,H.startAngle,H.stopAngle),H.area=f(H.radius,H.startAngle,H.stopAngle),H.chordLength=2*H.radius*Math.abs(Math.sin((H.stopAngle-H.startAngle)*Math.PI/360)),console.log("Semicircle properties calculated:",H);break;case"Rectangle":case"Polygon":H.area=y(D),H.perimeter=C(D),console.log("Rectangle/Polygon properties calculated:",H);break;case"Line":case"Polyline":if(H.length=v(D),D.elevation){const Ae=D.elevation.gain,$e=H.length;H.slope=Ae/$e}console.log("Line/Polyline properties calculated:",H);break}}catch(re){console.error("Error calculating properties:",re)}return console.log("=== CALCULATE PROPERTIES END ==="),console.log("Final properties:",H),H},j=D=>{var V,H,Ce,pe,re,Ae;if(console.log("=== UPDATE SELECTED SHAPE START ==="),console.log("Input shape:",{type:D==null?void 0:D.type,properties:D==null?void 0:D.properties,layer:D!=null&&D.layer?{type:D.layer.constructor.name,options:D.layer.options,_mRadius:D.layer._mRadius,_latlng:D.layer._latlng,bounds:(H=(V=D.layer).getBounds)==null?void 0:H.call(V)}:{type:(Ce=D==null?void 0:D.constructor)==null?void 0:Ce.name,options:D==null?void 0:D.options,_mRadius:D==null?void 0:D._mRadius,_latlng:D==null?void 0:D._latlng,bounds:(pe=D==null?void 0:D.getBounds)==null?void 0:pe.call(D)}}),(re=e.value)!=null&&re.off&&e.value.off("properties:updated"),e.value=D,D){D.on&&(console.log("Adding properties:updated event listener"),D.on("properties:updated",ge=>{var _e;console.log("Properties updated event received:",{event:ge,shape:{_mRadius:ge.shape._mRadius,_latlng:ge.shape._latlng,properties:ge.shape.properties,constructor:ge.shape.constructor.name}});const Be=ge.shape,F=((_e=Be.properties)==null?void 0:_e.type)||"unknown";console.log("Updating properties for shape:",{type:F,_mRadius:Be._mRadius,_latlng:Be._latlng,currentProperties:Be.properties});const X=M(Be,F);console.log("Recalculated properties:",X),n.value={...X},Be.properties={...X},console.log("Updated shapeProperties:",n.value)}));const $e=M(D.layer||D,D.type||((Ae=D.properties)==null?void 0:Ae.type));console.log("Initial calculated properties:",$e),n.value={...$e},D.layer?D.layer.properties={...$e}:D.properties={...$e},console.log("Initial shapeProperties set:",n.value)}else console.log("No shape provided, clearing properties"),n.value=null;console.log("=== UPDATE SELECTED SHAPE END ===")},W=Et(()=>{if(!n.value)return null;const D={...n.value};return D.area&&(D.areaFormatted=`${(D.area/1e4).toFixed(2)} ha`),D.length&&(D.lengthFormatted=`${D.length.toFixed(1)} m`),D.arcLength&&(D.arcLengthFormatted=`${D.arcLength.toFixed(1)} m`),D.perimeter&&(D.perimeterFormatted=`${(D.perimeter/1e3).toFixed(2)} km`),D.radius&&(D.radiusFormatted=`${D.radius.toFixed(1)} m`),D.diameter&&(D.diameterFormatted=`${D.diameter.toFixed(1)} m`),D.width&&(D.widthFormatted=`${D.width.toFixed(1)} m`),D.height&&(D.heightFormatted=`${D.height.toFixed(1)} m`),D.chordLength&&(D.chordLengthFormatted=`${D.chordLength.toFixed(1)} m`),D.slope&&(D.slopeFormatted=s(D.slope)),D.startAngle&&(D.startAngleFormatted=l(D.startAngle)),D.stopAngle&&(D.stopAngleFormatted=l(D.stopAngle)),D});return{selectedShape:e,shapeProperties:n,formattedProperties:W,updateSelectedShape:j,calculateProperties:M,normalizeAngle:h,calculateArcLength:p,calculateSectorArea:f}}class Os extends st.Polygon{constructor(s,l,h=0,p=180,f={}){super([[]],{...f,pmIgnore:!1,interactive:!0,className:"leaflet-semicircle"});ut(this,"center");ut(this,"radius");ut(this,"startAngle");ut(this,"stopAngle");ut(this,"numPoints");ut(this,"properties");ut(this,"pm");this.center=s,this.radius=l,this.startAngle=this.normalizeAngle(h),this.stopAngle=this.normalizeAngle(p),this.numPoints=64,this.properties={type:"Semicircle",radius:this.radius,startAngle:this.startAngle,stopAngle:this.stopAngle,style:{...f,startAngle:this.startAngle,stopAngle:this.stopAngle}},this.on("pm:enable",y=>{var v;this.pm&&(this.pm._layers=[],this.pm._markers=[],(v=this.pm._markerGroup)==null||v.clearLayers())}),this.on("pm:vertexadded",y=>{var v;this.pm&&((v=this.pm._markerGroup)==null||v.clearLayers())}),this.on("add",()=>{this._map&&(this.updateGeometry(),this.pm&&this.pm.enable({allowSelfIntersection:!1,preventMarkerRemoval:!0}))})}normalizeAngle(s){return(s%360+360)%360}calculateArcPoints(){if(!this._map)return[];const s=[],l=(this.stopAngle-this.startAngle+360)%360;s.push(this.center);for(let h=0;h<=this.numPoints;h++){const f=(this.startAngle+l*h/this.numPoints)*Math.PI/180,y=this.radius*Math.cos(f),C=this.radius*Math.sin(f)/111319.9,P=y/(111319.9*Math.cos(this.center.lat*Math.PI/180)),M=st.latLng(this.center.lat+C,this.center.lng+P);s.push(M)}return s.push(this.center),s}setRadius(s){return s<=0?this:(this.radius=s,this.properties.radius=s,this.updateGeometry(),this)}setAngles(s,l){return this.startAngle=this.normalizeAngle(s),this.stopAngle=this.normalizeAngle(l),this.properties.startAngle=this.startAngle,this.properties.stopAngle=this.stopAngle,this.properties.style.startAngle=this.startAngle,this.properties.style.stopAngle=this.stopAngle,this.updateGeometry(),this}setOpeningAngle(s){return s<0||s>360?this:(this.stopAngle=this.normalizeAngle(this.startAngle+s),this.updateGeometry(),this)}setCenter(s){return!s.lat||!s.lng?this:(this.center=s,this.updateGeometry(),this)}getCenter(){return this.center}getRadius(){return this.radius}getStartAngle(){return this.startAngle}getStopAngle(){return this.stopAngle}getOpeningAngle(){return(this.stopAngle-this.startAngle+360)%360}updateGeometry(){if(!this._map)return;const s=this.calculateArcPoints();s.length>0&&this.setLatLngs([s])}toGeoJSON(){const s=super.toGeoJSON();return{...s,properties:{...s.properties,type:"Semicircle",radius:this.radius,startAngle:this.startAngle,stopAngle:this.stopAngle}}}}const bl=(e,n)=>{if(!e||typeof e!="string"||!e.startsWith("#"))return`rgba(0, 0, 0, ${n})`;const s=parseInt(e.slice(1,3),16),l=parseInt(e.slice(3,5),16),h=parseInt(e.slice(5,7),16);return`rgba(${s}, ${l}, ${h}, ${n})`},Dd=(e,n)=>{e.style.fontSize=n.fontSize,e.style.color=n.color,e.style.backgroundColor=bl(n.backgroundColor,n.backgroundOpacity),n.hasBorder?e.style.border=`${n.borderWidth} solid ${bl(n.borderColor,n.borderOpacity)}`:e.style.border="none",e.style.padding=n.padding,e.style.borderRadius=n.borderRadius},ki=e=>{document.querySelectorAll(".drawing-help-message").forEach(l=>l.remove());const s=st.DomUtil.create("div","drawing-help-message");return s.innerHTML=e,s.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(s),s};function nc(e,n,s){const l=156543.03392*Math.cos(n*Math.PI/180)/Math.pow(2,s);return e/l}const ii=(e,n="m",s="")=>{let l,h;return n==="m"?e>=1e4?(l=(e/1e4).toFixed(2),h="ha"):(l=e.toFixed(2),h="m"):n==="m"?e>=1e3?(l=(e/1e3).toFixed(2),h="km"):(l=e.toFixed(2),h="m"):(l=e.toFixed(2),h=n),s?`${s}: ${l} ${h}`:`${l} ${h}`},Ob=e=>`${((e%360+360)%360).toFixed(1)}`,Rd=(e,n,s)=>{const l=s*Math.PI/180,h=Math.cos(l),p=Math.sin(l),f=e.x-n.x,y=e.y-n.y;return new st.Point(n.x+f*h-y*p,n.y+f*p+y*h)};function Ib(){const e=Ze(null),n=Ze(null),s=Ze(""),l=Ze(null),h=Ze(!1),p=(F,X="Double-cliquez pour diter")=>{const _e={fontSize:"14px",color:"#000000",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderWidth:"1px",borderOpacity:1,padding:"5px 10px",borderRadius:"3px",hasBorder:!0,rotation:0,physicalSize:2},ee=(ve,Je)=>{var Ee;const et=((Ee=e.value)==null?void 0:Ee.getZoom())||14,nt=F.lat,Xe=nc(Je.physicalSize,nt,et);return`<div class="text-container" style="width:${Xe}px;height:${Xe}px;transform:rotate(${Je.rotation}deg)">
        <div class="text-annotation" style="font-size:${Xe*.2}px;color:${Je.color};background-color:${bl(Je.backgroundColor,Je.backgroundOpacity)};border:${Je.hasBorder?Je.borderWidth+" solid "+bl(Je.borderColor,Je.borderOpacity):"none"};padding:${Je.padding};border-radius:${Je.borderRadius}">${ve}</div>
        <div class="text-controls"><div class="control-button rotate"></div><div class="control-button move"></div></div>
      </div>`},Re=()=>{if(!e.value)return;const ve=e.value.getZoom(),Je=ie.getLatLng().lat;nc(ie.properties.style.physicalSize,Je,ve);const et=ie.getIcon(),nt={html:ee(ie.properties.text,ie.properties.style),className:et.options.className};ie.setIcon(st.divIcon(nt))},Te=st.divIcon({html:ee(X,_e),className:"text-container",iconSize:[40,40],iconAnchor:[20,20]}),ie=st.marker(F,{icon:Te,draggable:!1,pmIgnore:!0});ie.properties={type:"text",text:X,style:{..._e}},e.value&&(e.value.on("zoomend",Re),ie.on("remove",()=>{var ve;(ve=e.value)==null||ve.off("zoomend",Re)})),Re();let ke=!1,Ie=!1,Me=0,q=0;const te=ve=>{if(!e.value)return;const Je=ve.target;if(Je.classList.contains("rotate")){ke=!0;const et=ie.getLatLng(),nt=e.value.mouseEventToLatLng(ve);Me=Math.atan2(nt.lat-et.lat,nt.lng-et.lng)*180/Math.PI,q=ie.properties.style.rotation||0}else Je.classList.contains("move")&&(Ie=!0,e.value.latLngToLayerPoint(ie.getLatLng()));document.addEventListener("mousemove",se),document.addEventListener("mouseup",xe)},se=ve=>{if(!(!Ie||!e.value)){if(ke){const Je=ie.getLatLng(),et=e.value.mouseEventToLatLng(ve),nt=Math.atan2(et.lat-Je.lat,et.lng-Je.lng)*180/Math.PI,Xe=(q+(nt-Me))%360;ie.properties.style.rotation=Xe;const Ee=ie.getIcon(),Ke={html:ee(ie.properties.text,ie.properties.style),className:Ee.options.className};ie.setIcon(st.divIcon(Ke))}else if(Ie){const Je=ve,et=e.value.mouseEventToLatLng(Je);ie.setLatLng(et)}}},xe=()=>{ke=!1,Ie=!1,document.removeEventListener("mousemove",se),document.removeEventListener("mouseup",xe)};return ie.on("add",()=>{const ve=ie.getElement();ve&&ve.querySelectorAll(".control-button").forEach(et=>{et.addEventListener("mousedown",te)})}),ie.on("remove",()=>{const ve=ie.getElement();ve&&ve.querySelectorAll(".control-button").forEach(et=>{et.removeEventListener("mousedown",te)})}),ie.on("dblclick",ve=>{var Ke;st.DomEvent.stopPropagation(ve);const Je=(Ke=ie.getElement())==null?void 0:Ke.querySelector(".text-annotation");if(!Je)return;Je.contentEditable="true",Je.focus(),Je.classList.add("editing");const et=window.getSelection(),nt=document.createRange();nt.selectNodeContents(Je),et==null||et.removeAllRanges(),et==null||et.addRange(nt);const Xe=()=>{Je.contentEditable="false",Je.classList.remove("editing");const qe=Je.innerText.trim();if(qe){ie.properties.text=qe;const Ye=ie.getIcon(),tt={html:ee(qe,ie.properties.style),className:Ye.options.className};ie.setIcon(st.divIcon(tt))}Je.removeEventListener("blur",Xe),Je.removeEventListener("keydown",Ee)},Ee=qe=>{qe.key==="Enter"&&!qe.shiftKey&&(qe.preventDefault(),Xe())};Je.addEventListener("blur",Xe),Je.addEventListener("keydown",Ee)}),ie},f=(F,X)=>{const _e=st.DomUtil.create("div","measure-tooltip");if(_e.innerHTML=X,_e.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(_e),e.value){const ee=e.value.latLngToContainerPoint(F);_e.style.left=`${ee.x+10}px`,_e.style.top=`${ee.y-25}px`}return _e},y=(F,X,_e)=>{F.on("mouseover",()=>{const ee=f(F.getLatLng(),_e());F.measureDiv=ee}),F.on("mousemove",ee=>{if(F.measureDiv&&e.value){const Re=e.value.latLngToContainerPoint(ee.latlng);F.measureDiv.style.left=`${Re.x+10}px`,F.measureDiv.style.top=`${Re.y-25}px`}}),F.on("mouseout",()=>{F.measureDiv&&(F.measureDiv.remove(),F.measureDiv=void 0)})};Rb();let v=[];const C=()=>{v.forEach(F=>{F&&F.remove&&("measureDiv"in F&&F.measureDiv&&(F.measureDiv.remove(),F.measureDiv=void 0),n.value&&n.value.removeLayer(F),F.remove())}),v=[],document.querySelectorAll(".measure-tooltip").forEach(F=>{F.remove()})},P=(F,X="#2563EB")=>{const _e=st.circleMarker(F,{radius:6,color:X,fillColor:X,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return n.value&&n.value.addLayer(_e),_e},M=(F,X)=>{var ee,Re,Te,ie,ke,Ie;console.log("=== CALCULATING SHAPE PROPERTIES START ==="),console.log("Input layer:",{type:X,instanceof:{Circle:F instanceof st.Circle,Rectangle:F instanceof st.Rectangle,Polygon:F instanceof st.Polygon,Polyline:F instanceof st.Polyline,CircleArc:F instanceof Os},options:F.options});const _e={type:X,style:F.options||{}};try{if(F instanceof st.Circle){const Me=F.getRadius(),q=F.getLatLng();_e.radius=Me,_e.diameter=Me*2,_e.area=Math.PI*Math.pow(Me,2),_e.perimeter=2*Math.PI*Me,_e.center=q,_e.surfaceInterieure=_e.area,_e.surfaceExterieure=_e.area,console.log("Circle properties calculated:",_e)}else if(F instanceof Os){const Me=F.getRadius(),q=F.getCenter(),te=F.getStartAngle(),se=F.getStopAngle(),xe=F.getOpeningAngle();_e.radius=Me,_e.diameter=Me*2,_e.area=Math.PI*Math.pow(Me,2)*xe/360,_e.arcLength=2*Math.PI*Me*xe/360,_e.perimeter=_e.arcLength+2*Me,_e.center=q,_e.startAngle=te,_e.stopAngle=se,_e.openingAngle=xe,_e.surfaceInterieure=_e.area,_e.surfaceExterieure=_e.area,console.log("CircleArc properties calculated:",_e)}else if(F instanceof st.Rectangle){const Me=F.getBounds(),q=Me.getNorthEast(),te=Me.getSouthWest(),se=Mc([te.lng,te.lat],[q.lng,te.lat],{units:"meters"}),xe=Mc([te.lng,te.lat],[te.lng,q.lat],{units:"meters"});_e.width=se,_e.height=xe,_e.area=se*xe,_e.perimeter=2*(se+xe),_e.surfaceInterieure=_e.area,_e.surfaceExterieure=_e.area,_e.dimensions={width:se,height:xe},console.log("Rectangle properties calculated:",_e)}else if(F instanceof st.Polygon){const q=F.getLatLngs()[0].map(se=>[se.lng,se.lat]);q.push(q[0]);const te=Ec([q]);_e.area=Pc(te),_e.perimeter=vl(Qo([...q]),{units:"meters"}),_e.surfaceInterieure=_e.area,_e.surfaceExterieure=_e.area,console.log("Polygon properties calculated:",_e)}else if(F instanceof st.Polyline&&!(F instanceof st.Polygon)){const q=F.getLatLngs().map(xe=>[xe.lng,xe.lat]),te=Qo(q);_e.length=vl(te,{units:"meters"});const se=10;_e.surfaceInfluence=_e.length*se,_e.dimensions={width:se},console.log("Polyline properties calculated:",_e)}_e.style={..._e.style,color:((ee=F.options)==null?void 0:ee.color)||"#3388ff",weight:((Re=F.options)==null?void 0:Re.weight)||3,opacity:((Te=F.options)==null?void 0:Te.opacity)||1,fillColor:((ie=F.options)==null?void 0:ie.fillColor)||"#3388ff",fillOpacity:((ke=F.options)==null?void 0:ke.fillOpacity)||.2,dashArray:((Ie=F.options)==null?void 0:Ie.dashArray)||""}}catch(Me){console.error("Error calculating shape properties:",Me)}return console.log("=== CALCULATING SHAPE PROPERTIES END ==="),console.log("Final properties:",_e),_e},j=(F,X=2)=>{var ie;if(!e.value){console.warn("Map is not available for text size update");return}const _e=e.value.getZoom(),ee=F.getLatLng().lat,Re=nc(X,ee,_e),Te=(ie=F.getElement())==null?void 0:ie.querySelector(".text-annotation");Te&&(F.properties.style.fontSize=`${Re}px`,F.properties.physicalWidth=X,F.properties.physicalHeight=X,Dd(Te,F.properties.style))},W=(F,X,_e)=>{const ee=st.map(F).setView(X,_e);e.value=ee,st.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors"}).addTo(ee);const Re=new st.FeatureGroup;return Re.addTo(ee),n.value=Re,ee.pm.addControls({position:"topleft",drawMarker:!1,drawPolyline:!1,drawRectangle:!1,drawPolygon:!1,drawCircle:!1,drawCircleMarker:!1,drawText:!1,editMode:!1,dragMode:!1,cutPolygon:!1,removalMode:!1}),ee.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:Re,templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),ee.on("pm:drawstart",Te=>{h.value=!0,Te.shape==="Circle"&&s.value==="Semicircle"&&(ee.getContainer().style.cursor="crosshair")}),ee.on("pm:drawend",()=>{h.value=!1,ee.getContainer().style.cursor="",l.value&&ki("Cliquez sur la forme pour afficher les points de contrle")}),ee.on("pm:create",async Te=>{var Ie,Me,q;const ie=Te.layer;(Ie=n.value)==null||Ie.addLayer(ie);let ke="unknown";if(ie instanceof st.Circle?ke=s.value==="Semicircle"?"Semicircle":"Circle":ie instanceof st.Rectangle?ke="Rectangle":ie instanceof st.Polygon?ke="Polygon":ie instanceof st.Polyline&&!(ie instanceof st.Polygon)&&(ke="Line"),ie.properties=M(ie,ke),l.value=ie,ke==="Semicircle"){const te=ie.getLatLng(),se=ie.getRadius();(Me=n.value)==null||Me.removeLayer(ie);const xe=new Os(te,se);xe.properties=M(xe,"Semicircle"),(q=n.value)==null||q.addLayer(xe),l.value=xe,Be(xe)}else ie instanceof st.Circle?re(ie):ie instanceof st.Rectangle?Ae(ie):ie instanceof st.Polygon?ge(ie):ie instanceof st.Polyline&&!(ie instanceof st.Polygon)&&$e(ie);ki("Cliquez sur la forme pour afficher les points de contrle")}),ee.on("click",Te=>{Te.target===ee&&(C(),l.value=null,document.querySelectorAll(".drawing-help-message").forEach(ke=>ke.remove()))}),Re.on("click",Te=>{var ke,Ie,Me;st.DomEvent.stopPropagation(Te);const ie=Te.layer;C(),(ke=document.querySelector(".drawing-help-message"))==null||ke.remove(),l.value=ie,ie instanceof Os||((Ie=ie.properties)==null?void 0:Ie.type)==="Semicircle"?(ie.pm&&(ie.pm._layers=[],ie.pm._markers=[],(Me=ie.pm._markerGroup)==null||Me.clearLayers()),Be(ie)):ie instanceof st.Circle?re(ie):ie instanceof st.Rectangle?Ae(ie):ie instanceof st.Polygon?ge(ie):ie instanceof st.Polyline&&!(ie instanceof st.Polygon)&&$e(ie)}),ee.on("pm:edit",Te=>{var ke,Ie;console.log("=== PM:EDIT EVENT START ==="),console.log("Event details:",Te);const ie=Te.layer;if(ie){console.log("Layer before update:",{type:(ke=ie.properties)==null?void 0:ke.type,properties:ie.properties,options:ie.options,_mRadius:ie._mRadius,_latlng:ie._latlng,constructor:ie.constructor.name});let Me="unknown";ie instanceof st.Circle?(Me=((Ie=ie.properties)==null?void 0:Ie.type)==="Semicircle"?"Semicircle":"Circle",console.log("Circle detected with radius:",ie.getRadius())):ie instanceof st.Rectangle?Me="Rectangle":ie instanceof st.Polygon?Me="Polygon":ie instanceof st.Polyline&&!(ie instanceof st.Polygon)&&(Me="Line"),console.log("Detected shape type:",Me);const q=M(ie,Me);if(console.log("Newly calculated properties:",q),l.value&&l.value===ie){console.log("Updating selected shape...",{currentRadius:ie._mRadius,newRadius:q.radius});const te={...q};ie.properties=te,l.value=null,zs(()=>{l.value=ie}),console.log("Emitting properties:updated event with:",{shape:{_mRadius:ie._mRadius,_latlng:ie._latlng,properties:te,constructor:ie.constructor.name}}),ie.fire("properties:updated",{shape:ie,properties:te}),console.log("Shape properties after update:",{layerRadius:ie._mRadius,propertiesRadius:ie.properties.radius,fullProperties:ie.properties})}Me==="Semicircle"?Be(ie):ie instanceof st.Circle?re(ie):ie instanceof st.Rectangle?Ae(ie):ie instanceof st.Polygon?ge(ie):ie instanceof st.Polyline&&$e(ie),ki("Utilisez les points de contrle pour modifier la forme")}console.log("=== PM:EDIT EVENT END ===")}),ee.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(Te=>Te.remove()),ki("Dplacez la forme  l'endroit souhait")}),ee.on("pm:dragend",Te=>{var ie;if(Te.layer&&l.value===Te.layer){const ke=Te.layer,Ie=((ie=ke.properties)==null?void 0:ie.type)||"unknown",Me=M(ke,Ie);ke.properties={...Me},l.value=null,zs(()=>{l.value=ke}),ke.fire("properties:updated",{shape:ke,properties:ke.properties})}setTimeout(()=>{ki("Cliquez sur la forme pour afficher les points de contrle")},100)}),ee.on("pm:remove",()=>{var Te;(Te=document.querySelector(".drawing-help-message"))==null||Te.remove()}),ee.on("pm:select",Te=>{var ke;const ie=Te.layer;document.querySelectorAll(".drawing-help-message").forEach(Ie=>Ie.remove()),ie instanceof Os||((ke=ie.properties)==null?void 0:ke.type)==="Semicircle"?ki(`Points de contrle : <span style="color: #059669"></span> Ajuster le rayon, <span style="color: #2563EB"></span> et <span style="color: #DC2626"></span> Modifier l'ouverture du demi-cercle`):ki("Utilisez les points de contrle pour modifier la forme")}),ee.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(Te=>Te.remove())}),ee},D=()=>{if(!e.value||!n.value)return;const F=n.value.getBounds();F.isValid()&&e.value.fitBounds(F,{padding:[50,50],maxZoom:19})},V=F=>{if(e.value){console.log("=== SETTING DRAWING TOOL START ==="),console.log("Current tool:",s.value),console.log("New tool:",F),document.querySelectorAll(".drawing-help-message").forEach(X=>X.remove());try{console.log("Disabling all modes...");const X=e.value.pm;X.globalEditModeEnabled()&&X.disableGlobalEditMode(),X.globalDragModeEnabled()&&X.disableGlobalDragMode(),X.globalRemovalModeEnabled()&&X.disableGlobalRemovalMode(),X.disableDraw(),C()}catch(X){console.error("Error disabling modes:",X)}if(s.value=F,console.log("Tool set to:",s.value),!F){console.log("No tool selected, clearing control points"),C();return}setTimeout(()=>{var X,_e,ee,Re,Te,ie,ke;try{switch(console.log("Enabling tool:",F),F){case"Circle":ki("Cliquez et maintenez pour dessiner un cercle, relchez pour terminer"),(X=e.value)==null||X.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Semicircle":ki("Cliquez et maintenez pour dessiner un demi-cercle, relchez pour terminer"),(_e=e.value)==null||_e.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Rectangle":ki("Cliquez et maintenez pour dessiner un rectangle, relchez pour terminer"),(ee=e.value)==null||ee.pm.enableDraw("Rectangle",{finishOn:"mouseup"});break;case"Polygon":ki("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(Re=e.value)==null||Re.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Line":ki("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(Te=e.value)==null||Te.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Text":if(ki("Cliquez pour ajouter du texte, double-cliquez pour diter"),e.value){const Ie=Me=>{if(!e.value||!n.value)return;const q=p(Me.latlng);n.value.addLayer(q),l.value=q,e.value.off("click",Ie),V("")};e.value.on("click",Ie)}break;case"drag":ki("Cliquez et maintenez une forme pour la dplacer"),(ie=e.value)==null||ie.pm.enableGlobalDragMode();break;case"delete":ki("Cliquez sur une forme pour la supprimer"),(ke=e.value)==null||ke.pm.enableGlobalRemovalMode();break}console.log("Tool enabled successfully")}catch(Ie){console.error("Error enabling tool:",Ie)}},100),console.log("=== SETTING DRAWING TOOL END ===")}},H=F=>{var _e;if(!l.value)return;const X=l.value;if(X.properties=X.properties||{},X.properties.style=X.properties.style||{},X.properties.style={...X.properties.style,...F},X.properties.type==="text"){const ee=X.properties._textLayer,Re=(_e=ee==null?void 0:ee.getElement())==null?void 0:_e.querySelector(".text-annotation");Re&&Dd(Re,X.properties.style);const Te={color:F.borderColor||X.properties.style.borderColor,weight:parseInt(F.borderWidth||X.properties.style.borderWidth),opacity:F.borderOpacity??X.properties.style.borderOpacity};"setStyle"in X&&X.setStyle(Te)}else{const ee={};F.fillColor&&(ee.fillColor=F.fillColor),F.fillOpacity!==void 0&&(ee.fillOpacity=F.fillOpacity),F.strokeColor&&(ee.color=F.strokeColor),F.strokeOpacity!==void 0&&(ee.opacity=F.strokeOpacity),F.strokeWidth!==void 0&&(ee.weight=F.strokeWidth),F.dashArray&&(ee.dashArray=F.dashArray),"setStyle"in X&&X.setStyle(ee)}},Ce=F=>{if(!l.value)return;const X=l.value;X.properties={...X.properties,...F},F.radius&&X instanceof st.Circle&&X.setRadius(F.radius)},pe=(F,X)=>st.latLng((F.lat+X.lat)/2,(F.lng+X.lng)/2),re=F=>{if(!e.value||!n.value)return;C();const X=F.getLatLng(),_e=F.getRadius(),ee=P(X,"#059669");v.push(ee),y(ee,F,()=>{const Re=Math.PI*_e*_e;return[ii(_e,"m","Rayon"),ii(Re,"m","Surface")].join("<br>")}),ee.on("mousedown",Re=>{if(!e.value)return;st.DomEvent.stopPropagation(Re),e.value.dragging.disable(),C(),v=[ee];let Te=!0;const ie=Ie=>{if(!Te)return;F.setLatLng(Ie.latlng),ee.setLatLng(Ie.latlng);const Me=M(F,"Circle");F.properties={...Me},F.fire("properties:updated",{shape:F,properties:F.properties})},ke=()=>{Te=!1,e.value&&(e.value.off("mousemove",ie),document.removeEventListener("mouseup",ke),e.value.dragging.enable(),re(F))};e.value.on("mousemove",ie),document.addEventListener("mouseup",ke)}),[0,45,90,135,180,225,270,315].forEach(Re=>{const Te=Re*Math.PI/180,ie=st.latLng(X.lat+_e/111319.9*Math.sin(Te),X.lng+_e/(111319.9*Math.cos(X.lat*Math.PI/180))*Math.cos(Te)),ke=P(ie,"#2563EB");v.push(ke),y(ke,F,()=>{const Ie=X.distanceTo(ke.getLatLng());return ii(Ie,"m","Distance du centre")}),ke.on("mousedown",Ie=>{if(!e.value)return;st.DomEvent.stopPropagation(Ie),e.value.dragging.disable(),C(),v=[ke];let Me=!0;const q=se=>{if(!Me)return;const xe=X.distanceTo(se.latlng);F.setRadius(xe),ke.setLatLng(se.latlng);const ve=M(F,"Circle");F.properties={...ve},F.fire("properties:updated",{shape:F,properties:F.properties})},te=()=>{Me=!1,e.value&&(e.value.off("mousemove",q),document.removeEventListener("mouseup",te),e.value.dragging.enable(),re(F))};e.value.on("mousemove",q),document.addEventListener("mouseup",te)})})},Ae=F=>{if(!e.value||!n.value)return;C();const X=F.getBounds(),_e=[X.getNorthWest(),X.getNorthEast(),X.getSouthEast(),X.getSouthWest()];_e.forEach((Te,ie)=>{const ke=P(Te,"#059669");v.push(ke),y(ke,F,()=>{const Ie=F.getBounds(),Me=Ie.getNorthEast().distanceTo(Ie.getNorthWest()),q=Ie.getNorthWest().distanceTo(Ie.getSouthWest()),te=Me*q;return[ii(Me,"m","Largeur"),ii(q,"m","Hauteur"),ii(te,"m","Surface")].join("<br>")}),ke.on("mousedown",Ie=>{if(!e.value)return;st.DomEvent.stopPropagation(Ie),e.value.dragging.disable();let Me=!0;const q=se=>{if(!Me)return;_e[ie]=se.latlng;const xe=st.latLngBounds([[Math.min(_e[0].lat,_e[2].lat),Math.min(_e[0].lng,_e[2].lng)],[Math.max(_e[0].lat,_e[2].lat),Math.max(_e[0].lng,_e[2].lng)]]);F.setBounds(xe),ke.setLatLng(se.latlng)},te=()=>{Me=!1,e.value&&(e.value.off("mousemove",q),document.removeEventListener("mouseup",te),e.value.dragging.enable(),Ae(F))};e.value.on("mousemove",q),document.addEventListener("mouseup",te)})});const ee=X.getCenter(),Re=P(st.latLng(ee.lat,ee.lng+2e-4),"#2563EB");v.push(Re),Re.on("mousedown",Te=>{if(!e.value)return;st.DomEvent.stopPropagation(Te),e.value.dragging.disable();const ie=X.getCenter();let ke=Math.atan2(Te.latlng.lat-ie.lat,Te.latlng.lng-ie.lng)*180/Math.PI,Ie=!0;const Me=te=>{if(!Ie||!e.value)return;const se=Math.atan2(te.latlng.lat-ie.lat,te.latlng.lng-ie.lng)*180/Math.PI,xe=se-ke,ve=e.value.latLngToLayerPoint(ie),et=_e.map(Xe=>e.value.latLngToLayerPoint(Xe)).map(Xe=>e.value.layerPointToLatLng(Rd(Xe,ve,xe)));F.setBounds(st.latLngBounds(et));const nt=e.value.layerPointToLatLng(Rd(e.value.latLngToLayerPoint(Re.getLatLng()),ve,xe));Re.setLatLng(nt),ke=se,_e.forEach((Xe,Ee)=>{_e[Ee]=et[Ee]})},q=()=>{Ie=!1,e.value&&(e.value.off("mousemove",Me),document.removeEventListener("mouseup",q),e.value.dragging.enable(),Ae(F))};e.value.on("mousemove",Me),document.addEventListener("mouseup",q)}),ki("Utilisez le point bleu pour faire pivoter le rectangle")},$e=F=>{if(!e.value||!n.value)return;C();const X=F.getLatLngs();X.forEach((ee,Re)=>{const Te=P(ee,"#059669");v.push(Te),y(Te,F,()=>{const ie=X.reduce((Ie,Me,q)=>q===0?0:Ie+Me.distanceTo(X[q-1]),0);let ke=X.slice(0,Re+1).reduce((Ie,Me,q)=>q===0?0:Ie+Me.distanceTo(X[q-1]),0);return[ii(ke,"m","Distance depuis le dbut"),ii(ie,"m","Longueur totale")].join("<br>")}),Te.on("mousedown",ie=>{if(!e.value)return;st.DomEvent.stopPropagation(ie),e.value.dragging.disable();let ke=!0;const Ie=q=>{ke&&(X[Re]=q.latlng,F.setLatLngs(X),Te.setLatLng(q.latlng),_e())},Me=()=>{ke=!1,e.value&&(e.value.off("mousemove",Ie),document.removeEventListener("mouseup",Me),e.value.dragging.enable(),$e(F))};e.value.on("mousemove",Ie),document.addEventListener("mouseup",Me)})});const _e=()=>{v.slice(X.length).forEach(ee=>{n.value&&n.value.removeLayer(ee)}),v=v.slice(0,X.length);for(let ee=0;ee<X.length-1;ee++){const Re=pe(X[ee],X[ee+1]),Te=P(Re,"#2563EB");v.push(Te),y(Te,F,()=>{const ie=X[ee].distanceTo(X[ee+1]),ke=X.reduce((Me,q,te)=>te===0?0:Me+q.distanceTo(X[te-1]),0),Ie=X.slice(0,ee+1).reduce((Me,q,te)=>te===0?0:Me+q.distanceTo(X[te-1]),0)+ie/2;return[ii(ie,"m","Longueur du segment"),ii(ie/2,"m","Demi-segment"),ii(Ie,"m","Distance depuis le dbut"),ii(ke,"m","Longueur totale")].join("<br>")}),Te.on("mousedown",ie=>{if(!e.value)return;st.DomEvent.stopPropagation(ie),e.value.dragging.disable();let ke=!0;const Ie=q=>{ke&&(X.splice(ee+1,0,q.latlng),F.setLatLngs(X),$e(F))},Me=()=>{ke=!1,e.value&&(e.value.off("mousemove",Ie),document.removeEventListener("mouseup",Me),e.value.dragging.enable())};e.value.on("mousemove",Ie),document.addEventListener("mouseup",Me)})}};_e()},ge=F=>{if(!e.value||!n.value)return;C();const X=F.getLatLngs()[0],_e=X.map(ke=>[ke.lng,ke.lat]);_e.push(_e[0]);const ee=Ec([_e]),Re=Pc(ee),Te=X.reduce((ke,Ie,Me)=>{const q=X[(Me+1)%X.length];return ke+Ie.distanceTo(q)},0);X.forEach((ke,Ie)=>{const Me=P(ke,"#059669");v.push(Me),y(Me,F,()=>{const q=X[(Ie-1+X.length)%X.length],te=X[(Ie+1)%X.length],se=ke.distanceTo(q),xe=ke.distanceTo(te);return[ii(se,"m","Distance au point prcdent"),ii(xe,"m","Distance au point suivant"),ii(Te,"m","Primtre total"),ii(Re,"m","Surface")].join("<br>")}),Me.on("mousedown",q=>{if(st.DomEvent.stopPropagation(q),!e.value)return;e.value.dragging.disable();let te=!0;const se=ve=>{te&&(st.DomEvent.stopPropagation(ve),X[Ie]=ve.latlng,F.setLatLngs([X]),Me.setLatLng(ve.latlng),ie())},xe=()=>{te=!1,e.value&&(e.value.off("mousemove",se),document.removeEventListener("mouseup",xe),e.value.dragging.enable())};e.value.on("mousemove",se),document.addEventListener("mouseup",xe)})});const ie=()=>{const ke=F.getLatLngs()[0];v.slice(ke.length).forEach(Ie=>{n.value&&n.value.removeLayer(Ie)}),v=v.slice(0,ke.length);for(let Ie=0;Ie<ke.length;Ie++){const Me=ke[(Ie+1)%ke.length],q=pe(ke[Ie],Me),te=P(q,"#2563EB");v.push(te),y(te,F,()=>{const se=ke[Ie].distanceTo(Me);return[ii(se,"m","Longueur du segment"),ii(Te,"m","Primtre total"),ii(Re,"m","Surface")].join("<br>")})}};ie()},Be=F=>{if(!e.value||!n.value)return;C();const X=F.getCenter(),_e=F.getRadius(),ee=F.getStartAngle(),Re=F.getStopAngle(),Te=P(X,"#059669");v.push(Te),y(Te,F,()=>{const te=Math.PI*_e*_e/2;return[ii(_e,"m","Rayon"),ii(te,"m","Surface")].join("<br>")});const ke=(ee+Re)/2*Math.PI/180,Ie=st.latLng(X.lat+_e/111319.9*Math.sin(ke),X.lng+_e/(111319.9*Math.cos(X.lat*Math.PI/180))*Math.cos(ke)),Me=P(Ie,"#2563EB");v.push(Me),y(Me,F,()=>ii(_e,"m","Rayon")),[ee,Re].forEach((te,se)=>{const xe=te*Math.PI/180,ve=st.latLng(X.lat+_e/111319.9*Math.sin(xe),X.lng+_e/(111319.9*Math.cos(X.lat*Math.PI/180))*Math.cos(xe)),Je=P(ve,"#DC2626");v.push(Je),y(Je,F,()=>`Angle: ${Ob(te)}`),Je.on("mousedown",et=>{if(!e.value)return;st.DomEvent.stopPropagation(et),e.value.dragging.disable();let nt=!0;const Xe=Ke=>{if(!nt)return;const Ye=((Math.atan2(Ke.latlng.lat-X.lat,Ke.latlng.lng-X.lng)*180/Math.PI+270)%360+360)%360;se===0?F.setAngles(Ye,Re):F.setAngles(ee,Ye),Je.setLatLng(Ke.latlng),Be(F)},Ee=()=>{nt=!1,e.value&&(e.value.off("mousemove",Xe),document.removeEventListener("mouseup",Ee),e.value.dragging.enable())};e.value.on("mousemove",Xe),document.addEventListener("mouseup",Ee)})}),Te.on("mousedown",te=>{if(!e.value)return;st.DomEvent.stopPropagation(te),e.value.dragging.disable();let se=!0;const xe=Je=>{se&&(F.setCenter(Je.latlng),Te.setLatLng(Je.latlng),Be(F))},ve=()=>{se=!1,e.value&&(e.value.off("mousemove",xe),document.removeEventListener("mouseup",ve),e.value.dragging.enable())};e.value.on("mousemove",xe),document.addEventListener("mouseup",ve)}),Me.on("mousedown",te=>{if(!e.value)return;st.DomEvent.stopPropagation(te),e.value.dragging.disable();let se=!0;const xe=Je=>{if(!se)return;const et=X.distanceTo(Je.latlng);F.setRadius(et),Me.setLatLng(Je.latlng),Be(F)},ve=()=>{se=!1,e.value&&(e.value.off("mousemove",xe),document.removeEventListener("mouseup",ve),e.value.dragging.enable())};e.value.on("mousemove",xe),document.addEventListener("mouseup",ve)})};return Sl(()=>{e.value&&(e.value.remove(),e.value=null)}),{map:e,featureGroup:n,currentTool:s,selectedShape:l,isDrawing:h,initMap:W,setDrawingTool:V,updateShapeStyle:H,updateShapeProperties:Ce,updateTextFixedSize:j,adjustView:D}}function Fb(){const e=Ze(null),n=Ze(""),s=Ze("Ville"),l={Ville:Ei.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19}),Satellite:Ei.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:" Esri",maxZoom:19}),Cadastre:Ei.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{attribution:"Cadastre - Carte  IGN/Geoportail",maxZoom:19})};return{map:e,searchQuery:n,currentBaseMap:s,baseMaps:l,initMap:y=>{e.value=y,Ei.control.layers(l).addTo(y),l[s.value].addTo(y)},searchLocation:async()=>{if(!(!e.value||!n.value))try{const v=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(n.value)}`)).json();if(v&&v.length>0){const{lat:C,lon:P}=v[0];e.value.setView([C,P],13)}}catch(y){console.error("Erreur lors de la recherche de localisation:",y)}},changeBaseMap:y=>{!e.value||!l[y]||(Object.values(l).forEach(v=>{var C;(C=e.value)!=null&&C.hasLayer(v)&&e.value.removeLayer(v)}),l[y].addTo(e.value),s.value=y)}}}const Gl=Kc("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[]}),getters:{getPlanById:e=>n=>e.plans.find(s=>s.id===n),hasUnsavedChanges:e=>e.unsavedChanges,getCurrentPlanHistory:e=>e.planHistory},actions:{async fetchPlans(){var n,s;const e=ji();this.loading=!0;try{let l="/plans/";e.isDealer?l+="?concessionnaire="+((n=e.user)==null?void 0:n.id):e.isClient&&(l+="?utilisateur="+((s=e.user)==null?void 0:s.id));const h=await gt.get(l);this.plans=h.data}catch(l){throw this.error="Erreur lors du chargement des plans",l}finally{this.loading=!1}},async fetchPlansWithDetails(){var n,s;const e=ji();this.loading=!0;try{let l="/plans/";const h={include_details:!0};e.isDealer?h.concessionnaire=(n=e.user)==null?void 0:n.id:e.isClient&&(h.utilisateur=(s=e.user)==null?void 0:s.id);const p=await gt.get(l,{params:h});return this.plans=p.data,p}catch(l){throw this.error="Erreur lors du chargement des plans",l}finally{this.loading=!1}},async createPlan(e){this.loading=!0;try{console.log("Creating plan with data:",e);const n=await gt.post("/plans/",e);return console.log("Plan creation response:",n.data),this.plans.push(n.data),n.data}catch(n){const s=n instanceof Error?n.message:String(n);throw console.error("Error creating plan:",s),this.error="Erreur lors de la cration du plan",n}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(e){var n,s;if(this.unsavedChanges){this.loading=!0;try{const l=await gt.patch(`/plans/${e}/`,{...this.currentPlan,version:((n=this.currentPlan)==null?void 0:n.version)||1}),h=this.plans.findIndex(p=>p.id===e);return h!==-1&&(this.plans[h]=l.data),((s=this.currentPlan)==null?void 0:s.id)===e&&(this.currentPlan=l.data),this.unsavedChanges=!1,l.data}catch(l){throw this.error="Erreur lors de la sauvegarde du plan",l}finally{this.loading=!1}}},async updatePlanDetails(e,n){var s;try{const l=await gt.patch(`/plans/${e}/`,n),h=this.plans.findIndex(p=>p.id===e);return h!==-1&&(this.plans[h]={...this.plans[h],...l.data}),((s=this.currentPlan)==null?void 0:s.id)===e&&(this.currentPlan={...this.currentPlan,...l.data}),l.data}catch(l){throw console.error("Erreur lors de la mise  jour du plan:",l),l}},async fetchPlanHistory(e){this.loading=!0;try{const n=await gt.get(`/plans/${e}/historique/`);return this.planHistory=n.data,n.data}catch(n){throw this.error="Erreur lors de la rcupration de l'historique",n}finally{this.loading=!1}},async restorePlanVersion(e,n){var s;this.loading=!0;try{const l=await gt.post(`/plans/${e}/restaurer/`,{version_id:n});((s=this.currentPlan)==null?void 0:s.id)===e&&(this.currentPlan=l.data);const h=this.plans.findIndex(p=>p.id===e);return h!==-1&&(this.plans[h]=l.data),l.data}catch(l){throw this.error="Erreur lors de la restauration de la version",l}finally{this.loading=!1}},setCurrentPlan(e){this.currentPlan=e,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.stopAutoSave()},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(e){var n;this.loading=!0;try{await gt.delete(`/plans/${e}/`),this.plans=this.plans.filter(s=>s.id!==e),((n=this.currentPlan)==null?void 0:n.id)===e&&this.clearCurrentPlan()}catch(s){throw this.error="Erreur lors de la suppression du plan",s}finally{this.loading=!1}}}}),Hp=Kc("drawing",{state:()=>({currentPlanId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null}),getters:{hasUnsavedChanges:e=>e.unsavedChanges,getCurrentElements:e=>e.elements,getSelectedElement:e=>e.selectedElement,getCurrentTool:e=>e.currentTool,getCurrentStyle:e=>e.currentStyle,getLastUsedType:e=>e.lastUsedType},actions:{setCurrentPlan(e){this.currentPlanId=e,e===null&&this.clearElements()},clearCurrentPlan(){this.currentPlanId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1},addElement(e){!e.type_forme&&this.lastUsedType&&(e.type_forme=this.lastUsedType),this.elements.push(e),this.unsavedChanges=!0},updateElement(e){const n=this.elements.findIndex(s=>s.id===e.id);if(n!==-1){const s=this.elements[n].type_forme;this.elements[n]={...e,type_forme:s},this.unsavedChanges=!0}},removeElement(e){const n=this.elements.findIndex(s=>s.id===e);n!==-1&&(this.elements.splice(n,1),this.unsavedChanges=!0)},selectElement(e){this.selectedElement=e},setCurrentTool(e){this.currentTool=e,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(e)&&(this.lastUsedType=e)},setCurrentStyle(e){this.currentStyle={...this.currentStyle,...e}},async loadPlanElements(e){var n;this.loading=!0;try{const l=(await gt.get(`/plans/${e}/`)).data;this.elements=l.formes.map(h=>({...h,type_forme:h.type_forme})),this.currentPlanId=e,this.unsavedChanges=!1,l.preferences&&(l.preferences.currentTool&&this.setCurrentTool(l.preferences.currentTool),l.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...l.preferences.currentStyle}),l.preferences.lastUsedType&&(this.lastUsedType=l.preferences.lastUsedType)),(n=this.selectedElement)!=null&&n.type_forme&&this.setCurrentTool(this.selectedElement.type_forme)}catch(s){throw console.error("Erreur lors du chargement des lments:",s),this.error="Erreur lors du chargement des lments du plan",s}finally{this.loading=!1}},async saveToPlan(e){Gl(),this.loading=!0;try{const n=e||this.currentPlanId;if(!n)throw new Error("Aucun plan slectionn pour la sauvegarde");const s=this.elements.map(h=>({...h,type_forme:h.type_forme||this.lastUsedType})),l=await gt.post(`/plans/${n}/save_with_elements/`,{formes:s,connexions:[],annotations:[],preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}});return this.elements=l.data.formes.map(h=>({...h,type_forme:h.type_forme})),this.unsavedChanges=!1,l.data}catch(n){throw console.error("Erreur lors de la sauvegarde:",n),this.error="Erreur lors de la sauvegarde du plan",n}finally{this.loading=!1}}}}),Nb={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},zb={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4"},$b={key:0,class:"mb-4"},jb={key:0,class:"animate-pulse"},Ub=["value"],Gb={class:"mb-4"},Vb={key:0,class:"animate-pulse"},Hb=["disabled"],Zb={value:null},qb=["value"],Kb={class:"mb-4"},Wb={class:"mb-6"},Jb={class:"flex justify-end space-x-3"},Xb=["disabled"],Yb={key:0},Qb={key:1},Zp=Ki({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","dealerSelected","clientSelected"],setup(e,{expose:n,emit:s}){const l=e,h=s,p=ji(),f=Gl();Ze(!1);const y=Ze(!1),v=Ze(null),C=Ze([]),P=Ze([]),M=Ze(null),j=Ze(null),W=Ze(!1),D=Ze(!1),V=Ze({nom:"",description:"",concessionnaire:null,client:null}),H=Et(()=>{var Be,F;return((Be=p.user)==null?void 0:Be.user_type)==="admin"?V.value.nom.trim()&&V.value.concessionnaire&&V.value.client:((F=p.user)==null?void 0:F.user_type)==="dealer"?V.value.nom.trim()&&V.value.client:V.value.nom.trim()});$i(()=>V.value.concessionnaire,async Be=>{if(l.modelValue)if(console.log("[NewPlanModal] Concessionnaire changed:",Be),Be){const F=C.value.find(X=>X.id===Be);F&&await re(F)}else P.value=[],M.value=null,j.value=null,V.value.client=null}),$i(()=>l.modelValue,Be=>{var F,X;Be?((F=p.user)==null?void 0:F.user_type)==="admin"?Ce():((X=p.user)==null?void 0:X.user_type)==="dealer"&&pe(p.user.id):(V.value={nom:"",description:"",concessionnaire:null,client:null},M.value=null,j.value=null,P.value=[],C.value=[],v.value=null)}),Et(()=>{var Be;return((Be=p.user)==null?void 0:Be.user_type)==="admin"?M.value?P.value:[]:P.value});async function Ce(){console.log("[NewPlanModal] Loading dealers..."),W.value=!0;try{const Be=await gt.get("/users/",{params:{role:"CONCESSIONNAIRE"}});console.log("[NewPlanModal] Dealers loaded:",Be.data),C.value=Be.data}catch(Be){console.error("[NewPlanModal] Error loading dealers:",Be)}finally{W.value=!1}}async function pe(Be){console.log("[NewPlanModal] Loading clients for dealer:",Be),D.value=!0;try{const F=await gt.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:Be}});console.log("[NewPlanModal] Clients loaded:",F.data),P.value=Array.isArray(F.data)?F.data:[F.data]}catch(F){console.error("[NewPlanModal] Error loading clients:",F),P.value=[]}finally{D.value=!1}}async function re(Be){if(l.modelValue){console.log("[NewPlanModal] Selecting dealer:",Be),M.value=Be,V.value.concessionnaire=Be.id,D.value=!0;try{const F=await gt.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:Be.id}});console.log("[NewPlanModal] Clients loaded:",F.data),P.value=Array.isArray(F.data)?F.data:[F.data]}catch(F){console.error("[NewPlanModal] Error loading clients:",F),P.value=[]}finally{D.value=!1}}}function Ae(Be){l.modelValue&&(console.log("[NewPlanModal] Client selected:",Be),j.value=Be,V.value.client=Be.id,h("clientSelected",Be))}function $e(){h("update:modelValue",!1),V.value={nom:"",description:"",concessionnaire:null,client:null},M.value=null,j.value=null,P.value=[],v.value=null}async function ge(){var Be,F,X,_e,ee,Re;v.value=null,y.value=!0;try{const Te={nom:V.value.nom.trim(),description:V.value.description.trim(),concessionnaire:((Be=p.user)==null?void 0:Be.user_type)==="admin"?V.value.concessionnaire:(F=p.user)==null?void 0:F.id,client:((X=p.user)==null?void 0:X.user_type)==="client"?(_e=p.user)==null?void 0:_e.id:V.value.client},ie=await f.createPlan(Te);h("created",ie.id),$e()}catch(Te){console.error("[NewPlanModal] Error creating plan:",Te),v.value=((Re=(ee=Te.response)==null?void 0:ee.data)==null?void 0:Re.detail)||Te.message||"Une erreur est survenue lors de la cration du plan"}finally{y.value=!1}}return n({dealers:C,dealerClients:P,selectedDealer:M,selectedClient:j,loadDealers:Ce,loadDealerClients:pe,selectDealer:re,selectClient:Ae}),(Be,F)=>Be.modelValue?(ce(),ye("div",Nb,[w("div",zb,[w("div",{class:"flex justify-between items-center mb-4"},[F[5]||(F[5]=w("h2",{class:"text-xl font-semibold text-gray-900"},"Crer un nouveau plan",-1)),w("button",{onClick:$e,class:"text-gray-400 hover:text-gray-500"},F[4]||(F[4]=[w("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),Lt(p).isAdmin?(ce(),ye("div",$b,[F[8]||(F[8]=w("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Concessionnaire",-1)),W.value?(ce(),ye("div",jb,F[6]||(F[6]=[w("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):St((ce(),ye("select",{key:1,"onUpdate:modelValue":F[0]||(F[0]=X=>V.value.concessionnaire=X),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[F[7]||(F[7]=w("option",{value:null},"Slectionnez un concessionnaire",-1)),(ce(!0),ye(Ct,null,It(C.value,X=>(ce(),ye("option",{key:X.id,value:X.id},Ge(X.first_name)+" "+Ge(X.last_name)+" ("+Ge(X.company_name)+") ",9,Ub))),128))],512)),[[Qi,V.value.concessionnaire]])])):ct("",!0),w("div",Gb,[F[10]||(F[10]=w("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Client",-1)),D.value?(ce(),ye("div",Vb,F[9]||(F[9]=[w("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):St((ce(),ye("select",{key:1,"onUpdate:modelValue":F[1]||(F[1]=X=>V.value.client=X),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!P.value.length},[w("option",Zb,Ge(P.value.length?"Slectionnez un client":"Aucun client disponible"),1),(ce(!0),ye(Ct,null,It(P.value,X=>(ce(),ye("option",{key:X.id,value:X.id},Ge(X.first_name)+" "+Ge(X.last_name)+" ("+Ge(X.company_name)+") ",9,qb))),128))],8,Hb)),[[Qi,V.value.client]])]),w("div",Kb,[F[11]||(F[11]=w("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),St(w("input",{"onUpdate:modelValue":F[2]||(F[2]=X=>V.value.nom=X),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[Yt,V.value.nom]])]),w("div",Wb,[F[12]||(F[12]=w("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),St(w("textarea",{"onUpdate:modelValue":F[3]||(F[3]=X=>V.value.description=X),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[Yt,V.value.description]])]),w("div",Jb,[w("button",{onClick:$e,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),w("button",{onClick:ge,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!H.value||y.value},[y.value?(ce(),ye("span",Yb,"Cration en cours...")):(ce(),ye("span",Qb,"Crer le plan"))],8,Xb)])])])):ct("",!0)}}),ex={class:"h-full flex"},tx={class:"flex-1 relative"},ix={key:0,class:"absolute inset-0 flex items-center justify-center bg-gray-50 z-[1000]"},nx={class:"text-center max-w-lg mx-auto p-8"},rx={class:"space-y-4"},sx={key:1,class:"absolute bottom-6 left-6 z-[1000]"},ox={class:"bg-white rounded-lg shadow-lg p-3 mb-3"},ax={class:"grid grid-cols-3 gap-2"},lx=["onClick"],ux={class:"bg-white rounded-lg shadow-lg p-3 space-y-2"},cx={class:"flex flex-col mb-2"},hx={class:"text-xl font-bold text-gray-800 mb-1"},dx={key:0,class:"text-sm text-gray-500"},fx={class:"grid grid-cols-1 gap-2"},px=["disabled"],mx={key:0,class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},gx={key:1,class:"animate-spin h-5 w-5 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},_x={key:0,class:"text-xs text-gray-500 mt-2"},yx={key:2,class:"fixed bottom-6 right-6 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg shadow-lg z-[2000] flex items-center transform transition-all duration-300 ease-in-out",role:"alert"},vx={key:3,class:"drawing-tools-container absolute top-4 right-4 z-[1000]"},bx={key:4,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},xx={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4"},wx={class:"flex justify-between items-center mb-4"},Lx={key:0,class:"space-y-4"},Cx={key:0,class:"space-y-2"},kx={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},Ex=["onClick"],Mx={class:"font-medium text-gray-900"},Px={key:1,class:"space-y-2"},Sx={class:"flex items-center mb-4"},Bx={class:"text-sm text-gray-600"},Ax={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},Tx=["onClick"],Dx={class:"font-medium text-gray-900"},Rx={key:2,class:"space-y-2"},Ox={class:"flex items-center mb-4"},Ix={class:"text-sm text-gray-600"},Fx={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},Nx=["onClick"],zx={class:"font-medium text-gray-900"},$x={class:"text-sm text-gray-500"},jx={class:"text-xs text-gray-400 mt-1"},Ux={key:1,class:"space-y-4"},Gx={key:0,class:"space-y-2"},Vx={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},Hx=["onClick"],Zx={class:"font-medium text-gray-900"},qx={key:1,class:"space-y-2"},Kx={class:"flex items-center mb-4"},Wx={class:"text-sm text-gray-600"},Jx={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},Xx=["onClick"],Yx={class:"font-medium text-gray-900"},Qx={class:"text-sm text-gray-500"},ew={class:"text-xs text-gray-400 mt-1"},tw={key:2,class:"max-h-96 overflow-y-auto"},iw={key:0,class:"text-center py-8"},nw={key:1,class:"space-y-2"},rw=["onClick"],sw={class:"font-medium text-gray-900"},ow={class:"text-sm text-gray-500"},aw={class:"text-xs text-gray-400 mt-1"},Od=Ki({__name:"MapView",setup(e){const n=Ze(null),s=Gl(),l=Hp(),h=Ze([]),p=Ze(null),f=Ze({});Ze({mousedown:null,mousemove:null,mouseup:null});const{currentTool:y,selectedShape:v,map:C,initMap:P,setDrawingTool:M,updateShapeStyle:j,updateShapeProperties:W,featureGroup:D,adjustView:V}=Ib(),{initMap:H,baseMaps:Ce,currentBaseMap:pe,changeBaseMap:re}=Fb();qs();const Ae=Ze(!1),$e=Ze(!1),ge=Ze(null);Ze({nom:"",description:""});const Be=Ze(!1),F=Ze(!1),X=ji(),_e=Ze([]),ee=Ze([]),Re=Ze([]),Te=Ze(null),ie=Ze(null),ke=Ze(!1),Ie=Ze(!1),Me=Ze(!1),q=Ze(null),te=Et(()=>{var ue,G,Oe;if(console.log("[MapView][filteredClients] Computing with:",{userType:(ue=X.user)==null?void 0:ue.user_type,selectedDealer:Te.value,dealerClients:ee.value}),((G=X.user)==null?void 0:G.user_type)==="admin"){const Ne=Te.value?ee.value:[];return console.log("[MapView][filteredClients] Admin clients:",Ne),Ne}else if(((Oe=X.user)==null?void 0:Oe.user_type)==="dealer")return console.log("[MapView][filteredClients] Dealer clients:",ee.value),ee.value;return console.log("[MapView][filteredClients] No clients returned"),[]});function se(ue){const G=ue.getCenter(),Oe=ue.getZoom(),Ne={lat:G.lat,lng:G.lng,zoom:Oe};document.cookie=`mapState=${JSON.stringify(Ne)};max-age=2592000;path=/`}function xe(){const G=document.cookie.split(";").find(Oe=>Oe.trim().startsWith("mapState="));if(G)try{return JSON.parse(G.split("=")[1])}catch(Oe){return console.error("Erreur lors de la lecture du cookie de position:",Oe),null}return null}rr(async()=>{var ue,G;if(console.log("[onMounted] Starting initialization..."),await s.fetchPlans(),s.currentPlan&&n.value){const Oe=xe(),Ne=Oe?[Oe.lat,Oe.lng]:[46.603354,1.888334],Fe=(Oe==null?void 0:Oe.zoom)??6,Pe=P(n.value,Ne,Fe);Pe.pm.setLang("fr"),Pe.pm.addControls({rotateMode:!1}),Ei.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles  Esri  Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",maxZoom:19}).addTo(Pe),Pe&&(H(Pe),Pe.on("moveend",()=>{se(Pe)}),window.addEventListener("map-set-location",We=>{if(Pe&&We.detail){const{lat:at,lng:ft,zoom:yt}=We.detail;Pe.flyTo([at,ft],yt,{duration:1.5,easeLinearity:.25})}}),await l.loadPlanElements(s.currentPlan.id),await et(s.currentPlan.id))}((ue=X.user)==null?void 0:ue.user_type)==="admin"&&(console.log("[onMounted] Loading dealers for admin..."),await Ye()),((G=X.user)==null?void 0:G.user_type)==="dealer"&&(console.log("[onMounted] Loading clients for dealer..."),await tt())}),$i(()=>l.hasUnsavedChanges,ue=>{ue&&ge.value&&s.markUnsavedChanges()}),$i(C,async ue=>{ue&&s.currentPlan&&(Je(),await l.loadPlanElements(s.currentPlan.id),await et(s.currentPlan.id))}),$i(()=>s.currentPlan,async ue=>{if(ue){if(ge.value=ue,!C.value&&n.value){const G=xe(),Oe=G?[G.lat,G.lng]:[46.603354,1.888334],Ne=(G==null?void 0:G.zoom)??6,Fe=P(n.value,Oe,Ne);Fe.pm.setLang("fr"),Fe.pm.addControls({rotateMode:!1}),Ei.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles  Esri  Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",maxZoom:19}).addTo(Fe),H(Fe),Fe.on("moveend",()=>{se(Fe)})}C.value&&(Je(),await l.loadPlanElements(ue.id),await et(ue.id))}else ge.value=null,Je()},{immediate:!0}),Hc(()=>{C.value&&C.value.off("moveend")}),Ze({rectangle:0,circle:0,semicircle:0,line:0}),$i(()=>f.value,ue=>{ve()},{deep:!0});function ve(){console.log("Updating drawing style:",f.value)}function Je(){D.value&&D.value.clearLayers(),h.value=[],v.value=null,p.value=null}async function et(ue){try{Je(),await l.loadPlanElements(ue);const G=s.getPlanById(ue);G&&(ge.value=G,s.setCurrentPlan(G),l.setCurrentPlan(G.id),l.getCurrentElements.forEach(Oe=>{if(!D.value||!Oe.data)return;let Ne;const{style:Fe={},...Pe}=Oe.data;switch(Oe.type_forme){case"CERCLE":Ne=Ei.circle([Pe.center[1],Pe.center[0]],{...Fe,radius:Pe.radius});break;case"RECTANGLE":Ne=Ei.rectangle([[Pe.bounds.southWest[1],Pe.bounds.southWest[0]],[Pe.bounds.northEast[1],Pe.bounds.northEast[0]]],Fe);break;case"DEMI_CERCLE":Ne=new Os([Pe.center[1],Pe.center[0]],Pe.radius,Pe.startAngle,Pe.endAngle,Fe);break;case"LIGNE":Ne=Ei.polyline(Pe.points.map(at=>[at[1],at[0]]),Fe);break;case"TEXTE":const We=Ei.divIcon({html:`<div class="text-annotation" style="font-size: ${Fe.fontSize||"14px"}">${Pe.content}</div>`,className:"text-container"});Ne=Ei.marker([Pe.position[1],Pe.position[0]],{icon:We,...Fe});break}Ne&&(Ne.properties={type:Oe.type_forme,style:Fe,...Pe},D.value.addLayer(Ne),h.value.push({id:Oe.id,type:Oe.type_forme,layer:Ne,properties:Ne.properties}),Pe.rotation&&typeof Ne.setRotation=="function"&&Ne.setRotation(Pe.rotation))})),$e.value=!1}catch(G){console.error("Erreur lors du chargement du plan:",G)}}async function nt(){if(!ge.value||!D.value){console.warn("Aucun plan actif ou groupe de formes  sauvegarder");return}Be.value=!0;try{const ue=[];D.value.eachLayer(G=>{var Pe,We,at,ft,yt,Tt,Pt,ri;const Oe={style:{color:((Pe=G.options)==null?void 0:Pe.color)||"#3388ff",fillColor:((We=G.options)==null?void 0:We.fillColor)||"#3388ff",fillOpacity:((at=G.options)==null?void 0:at.fillOpacity)||.2,weight:((ft=G.options)==null?void 0:ft.weight)||3,opacity:((yt=G.options)==null?void 0:yt.opacity)||1}};let Ne,Fe;if(G instanceof Ei.Circle)Ne="CERCLE",Fe={...Oe,center:[G.getLatLng().lng,G.getLatLng().lat],radius:G.getRadius()};else if(G instanceof Ei.Rectangle){Ne="RECTANGLE";const $t=G.getBounds();Fe={...Oe,bounds:{southWest:[$t.getSouthWest().lng,$t.getSouthWest().lat],northEast:[$t.getNorthEast().lng,$t.getNorthEast().lat]}}}else((Tt=G.properties)==null?void 0:Tt.type)==="Semicircle"?(Ne="DEMI_CERCLE",Fe={...Oe,center:[G.getLatLng().lng,G.getLatLng().lat],radius:G.getRadius(),startAngle:G.properties.style.startAngle||0,endAngle:G.properties.style.stopAngle||180}):G instanceof Ei.Polyline&&!(G instanceof Ei.Polygon)?(Ne="LIGNE",Fe={...Oe,points:G.getLatLngs().map($t=>[$t.lng,$t.lat])}):((Pt=G.properties)==null?void 0:Pt.type)==="text"&&(Ne="TEXTE",Fe={...Oe,position:[G.getLatLng().lng,G.getLatLng().lat],content:G.properties.text,style:{...G.properties.style,fontSize:G.properties.style.fontSize}});Ne&&Fe&&ue.push({id:G.id,type_forme:Ne,data:{...Fe,rotation:((ri=G.properties)==null?void 0:ri.rotation)||0}})}),l.elements=ue,await l.saveToPlan(ge.value.id),F.value=!0,setTimeout(()=>{F.value=!1},3e3)}catch(ue){console.error("Erreur lors de la sauvegarde du plan:",ue)}finally{Be.value=!1}}Sl(()=>{s.clearCurrentPlan(),l.clearCurrentPlan()});function Xe(ue){W(ue)}function Ee(ue){try{const G=new Date(ue);return isNaN(G.getTime())?(console.error("Date invalide reue:",ue),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(G)}catch(G){return console.error("Erreur lors du formatage de la date:",G),"Date invalide"}}const Ke=()=>{V()},qe=()=>{v.value&&D.value&&(M(""),D.value.removeLayer(v.value),v.value=null)};async function Ye(){ke.value=!0;try{const ue=await gt.get("/users/",{params:{role:"CONCESSIONNAIRE"}});_e.value=ue.data}catch(ue){console.error("Erreur lors du chargement des concessionnaires:",ue)}finally{ke.value=!1}}async function tt(){var ue;console.log("[loadDealerClients] Starting..."),console.log("[loadDealerClients] authStore.user:",X.user),Ie.value=!0;try{const G=(ue=X.user)==null?void 0:ue.id;if(console.log("[loadDealerClients] Using dealerId:",G),!G){console.error("[loadDealerClients] No dealer ID available");return}const Oe=await gt.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:G}});console.log("[loadDealerClients] Response:",Oe.data),Array.isArray(Oe.data)?ee.value=Oe.data:Oe.data?ee.value=[Oe.data]:ee.value=[],console.log("[loadDealerClients] Processed clients:",ee.value)}catch(G){console.error("[loadDealerClients] Error:",G),ee.value=[]}finally{Ie.value=!1}}async function $(ue){if(console.log("[MapView][selectClient] Starting with client:",ue),console.log("[MapView][selectClient] Current state:",{selectedDealer:Te.value,selectedClient:ie.value,newPlanModalRef:!!q.value}),q.value){console.log("[MapView][selectClient] Using NewPlanModal ref"),q.value.selectClient(ue),ie.value=ue,console.log("[MapView][selectClient] Updated selectedClient:",ie.value),Me.value=!0;try{const G={client:ue.id};Te.value&&(G.concessionnaire=Te.value.id);const Oe=await gt.get("/plans/",{params:G});console.log("[MapView][selectClient] Loaded client plans:",Oe.data),Re.value=Oe.data}catch(G){console.error("[MapView][selectClient] Error loading client plans:",G),Re.value=[]}finally{Me.value=!1}}else console.warn("[MapView][selectClient] NewPlanModal ref is not available")}function Z(){Te.value=null,ie.value=null,ee.value=[],Re.value=[]}function le(){ie.value=null,Re.value=[]}async function ze(ue){const G=await s.getPlanById(ue);G&&(ge.value=G,s.setCurrentPlan(G),l.setCurrentPlan(G.id),Ae.value=!1)}async function je(ue){console.log("[MapView][selectDealer] Starting with dealer:",ue),console.log("[MapView][selectDealer] Current state:",{authStore:{user:X.user,isAdmin:X.isAdmin},selectedDealer:Te.value,dealerClients:ee.value});try{q.value?(console.log("[MapView][selectDealer] Using NewPlanModal ref"),await q.value.selectDealer(ue),Te.value=ue,ee.value=q.value.dealerClients,console.log("[MapView][selectDealer] Updated state:",{selectedDealer:Te.value,dealerClients:ee.value})):console.warn("[MapView][selectDealer] NewPlanModal ref is not available")}catch(G){console.error("[MapView][selectDealer] Error:",G)}}return $i(Te,async ue=>{var G,Oe;if(console.log("[MapView][watch selectedDealer] New dealer selected:",ue),console.log("[MapView][watch selectedDealer] Current user type:",(G=X.user)==null?void 0:G.user_type),ue&&((Oe=X.user)==null?void 0:Oe.user_type)==="admin"){console.log("[MapView][watch selectedDealer] Loading clients for dealer:",ue.id),Ie.value=!0;try{const Ne=await gt.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:ue.id}});console.log("[MapView][watch selectedDealer] API response:",Ne.data),ee.value=Array.isArray(Ne.data)?Ne.data:[Ne.data],console.log("[MapView][watch selectedDealer] Updated dealerClients:",ee.value)}catch(Ne){console.error("[MapView][watch selectedDealer] Error loading clients:",Ne),ee.value=[]}finally{Ie.value=!1}}}),(ue,G)=>{var Oe,Ne,Fe;return ce(),ye("div",ex,[w("div",tx,[ge.value?ct("",!0):(ce(),ye("div",ix,[w("div",nx,[G[10]||(G[10]=lg('<div class="relative w-48 h-48 mx-auto mb-12 rounded-full bg-gradient-to-br from-primary-100 to-primary-50 p-8 shadow-lg ring-4 ring-white"><img src="'+jp+'" alt="IrrigationDesign Logo" class="w-full h-full object-contain filter drop-shadow-md"><div class="absolute inset-0 rounded-full bg-gradient-to-t from-transparent to-white/10 pointer-events-none"></div></div><h1 class="text-3xl font-bold text-gray-900 mb-4">Bienvenue sur IrrigationDesign</h1><p class="text-gray-600 mb-8">Pour commencer  dessiner, vous devez d&#39;abord crer un nouveau plan ou charger un plan existant.</p>',3)),w("div",rx,[w("button",{onClick:G[0]||(G[0]=Pe=>Ae.value=!0),class:"w-full flex items-center justify-center px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},G[8]||(G[8]=[w("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Wt(" Crer un nouveau plan ")])),w("button",{onClick:G[1]||(G[1]=Pe=>$e.value=!0),class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},G[9]||(G[9]=[w("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),Wt(" Charger un plan existant ")]))])])])),w("div",{ref_key:"mapContainer",ref:n,class:"absolute inset-0 w-full h-full"},null,512),ge.value?(ce(),ye("div",sx,[w("div",ox,[G[11]||(G[11]=w("h2",{class:"text-sm font-semibold text-gray-700 mb-2"},"Type de carte",-1)),w("div",ax,[(ce(!0),ye(Ct,null,It(Lt(Ce),(Pe,We)=>(ce(),ye("button",{key:We,onClick:at=>Lt(re)(We),class:Bi(["px-3 py-2 text-sm rounded-md transition-colors duration-200",{"bg-primary-600 text-white":Lt(pe)===We,"bg-gray-100 text-gray-700 hover:bg-gray-200":Lt(pe)!==We}])},Ge(We),11,lx))),128))])]),w("div",ux,[w("div",cx,[w("h1",hx,Ge(((Oe=ge.value)==null?void 0:Oe.nom)||"Aucun plan charg"),1),(Ne=ge.value)!=null&&Ne.description?(ce(),ye("span",dx,Ge(ge.value.description),1)):ct("",!0)]),w("div",fx,[w("button",{onClick:G[2]||(G[2]=Pe=>Ae.value=!0),class:"flex items-center px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},G[12]||(G[12]=[w("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Wt(" Nouveau plan ")])),w("button",{onClick:G[3]||(G[3]=Pe=>$e.value=!0),class:"flex items-center px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},G[13]||(G[13]=[w("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),Wt(" Charger un plan ")])),ge.value?(ce(),ye("button",{key:0,onClick:nt,class:"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors duration-200",disabled:Be.value},[Be.value?(ce(),ye("svg",gx,G[15]||(G[15]=[w("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),w("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(ce(),ye("svg",mx,G[14]||(G[14]=[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"},null,-1)]))),Wt(" "+Ge(Be.value?"Sauvegarde...":"Enregistrer"),1)],8,px)):ct("",!0),w("button",{onClick:Ke,class:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors duration-200"},G[16]||(G[16]=[w("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1),Wt(" Ajuster la vue ")]))]),(Fe=ge.value)!=null&&Fe.date_modification?(ce(),ye("div",_x," Dernire sauvegarde : "+Ge(Ee(ge.value.date_modification)),1)):ct("",!0)])])):ct("",!0),F.value?(ce(),ye("div",yx,G[17]||(G[17]=[w("svg",{class:"w-5 h-5 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),w("span",{class:"font-medium"},"Plan sauvegard avec succs",-1)]))):ct("",!0),ge.value?(ce(),ye("div",vx,[ni(Db,{"current-tool":Lt(y),"selected-shape":Lt(v),onToolChange:Lt(M),onStyleUpdate:Lt(j),onPropertiesUpdate:Xe,onDeleteShape:qe},null,8,["current-tool","selected-shape","onToolChange","onStyleUpdate"])])):ct("",!0),ni(Zp,{ref_key:"newPlanModalRef",ref:q,modelValue:Ae.value,"onUpdate:modelValue":G[4]||(G[4]=Pe=>Ae.value=Pe),onCreated:ze,onDealerSelected:G[5]||(G[5]=Pe=>Te.value=Pe),onClientSelected:G[6]||(G[6]=Pe=>ie.value=Pe)},null,8,["modelValue"]),$e.value?(ce(),ye("div",bx,[w("div",xx,[w("div",wx,[G[19]||(G[19]=w("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),w("button",{onClick:G[7]||(G[7]=Pe=>$e.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},G[18]||(G[18]=[w("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),Lt(X).isAdmin?(ce(),ye("div",Lx,[Te.value?ie.value?(ce(),ye("div",Rx,[w("div",Ox,[w("button",{onClick:le,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},G[28]||(G[28]=[w("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Wt(" Retour  la liste des clients ")])),G[29]||(G[29]=w("span",{class:"mx-2 text-gray-400"},"|",-1)),w("span",Ix,Ge(ie.value.first_name)+" "+Ge(ie.value.last_name)+" ("+Ge(ie.value.company_name)+") ",1)]),G[31]||(G[31]=w("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),w("div",Fx,[Me.value?(ce(),ye(Ct,{key:0},It(3,Pe=>w("div",{key:Pe,class:"animate-pulse"},G[30]||(G[30]=[w("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[w("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),w("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),w("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(ce(!0),ye(Ct,{key:1},It(Re.value,Pe=>(ce(),ye("button",{key:Pe.id,onClick:We=>et(Pe.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[w("div",zx,Ge(Pe.nom),1),w("div",$x,Ge(Pe.description),1),w("div",jx," Modifi le "+Ge(Ee(Pe.date_modification)),1)],8,Nx))),128))])])):(ce(),ye("div",Px,[w("div",Sx,[w("button",{onClick:Z,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},G[23]||(G[23]=[w("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Wt(" Retour  la liste des concessionnaires ")])),G[24]||(G[24]=w("span",{class:"mx-2 text-gray-400"},"|",-1)),w("span",Bx,Ge(Te.value.first_name)+" "+Ge(Te.value.last_name)+" ("+Ge(Te.value.company_name)+") ",1)]),G[27]||(G[27]=w("h3",{class:"font-medium text-gray-700"},"Slectionnez un client",-1)),w("div",Ax,[Ie.value?(ce(),ye(Ct,{key:0},It(3,Pe=>w("div",{key:Pe,class:"animate-pulse"},G[25]||(G[25]=[w("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[w("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),w("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(ce(!0),ye(Ct,{key:1},It(te.value,Pe=>(ce(),ye("button",{key:Pe.id,onClick:We=>$(Pe),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[w("div",null,[w("div",Dx,Ge(Pe.first_name)+" "+Ge(Pe.last_name)+" ("+Ge(Pe.company_name)+")",1)]),G[26]||(G[26]=w("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,Tx))),128))])])):(ce(),ye("div",Cx,[G[22]||(G[22]=w("h3",{class:"font-medium text-gray-700"},"Slectionnez un concessionnaire",-1)),w("div",kx,[ke.value?(ce(),ye(Ct,{key:0},It(3,Pe=>w("div",{key:Pe,class:"animate-pulse"},G[20]||(G[20]=[w("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[w("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),w("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(ce(!0),ye(Ct,{key:1},It(_e.value,Pe=>(ce(),ye("button",{key:Pe.id,onClick:We=>je(Pe),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[w("div",null,[w("div",Mx,Ge(Pe.first_name)+" "+Ge(Pe.last_name)+" ("+Ge(Pe.company_name)+")",1)]),G[21]||(G[21]=w("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,Ex))),128))])]))])):Lt(X).isDealer?(ce(),ye("div",Ux,[ie.value?(ce(),ye("div",qx,[w("div",Kx,[w("button",{onClick:le,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},G[35]||(G[35]=[w("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Wt(" Retour  la liste des clients ")])),G[36]||(G[36]=w("span",{class:"mx-2 text-gray-400"},"|",-1)),w("span",Wx,Ge(ie.value.first_name)+" "+Ge(ie.value.last_name),1)]),G[38]||(G[38]=w("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),w("div",Jx,[Me.value?(ce(),ye(Ct,{key:0},It(3,Pe=>w("div",{key:Pe,class:"animate-pulse"},G[37]||(G[37]=[w("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[w("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),w("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),w("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(ce(!0),ye(Ct,{key:1},It(Re.value,Pe=>(ce(),ye("button",{key:Pe.id,onClick:We=>et(Pe.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[w("div",Yx,Ge(Pe.nom),1),w("div",Qx,Ge(Pe.description),1),w("div",ew," Modifi le "+Ge(Ee(Pe.date_modification)),1)],8,Xx))),128))])])):(ce(),ye("div",Gx,[G[34]||(G[34]=w("h3",{class:"font-medium text-gray-700"},"Slectionnez un client",-1)),w("div",Vx,[Ie.value?(ce(),ye(Ct,{key:0},It(3,Pe=>w("div",{key:Pe,class:"animate-pulse"},G[32]||(G[32]=[w("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[w("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),w("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(ce(!0),ye(Ct,{key:1},It(te.value,Pe=>(ce(),ye("button",{key:Pe.id,onClick:We=>$(Pe),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[w("div",null,[w("div",Zx,Ge(Pe.first_name)+" "+Ge(Pe.last_name)+" ("+Ge(Pe.company_name)+")",1)]),G[33]||(G[33]=w("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,Hx))),128))])]))])):(ce(),ye("div",tw,[Lt(s).plans.length===0?(ce(),ye("div",iw,G[39]||(G[39]=[w("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(ce(),ye("div",nw,[(ce(!0),ye(Ct,null,It(Lt(s).plans,Pe=>(ce(),ye("button",{key:Pe.id,onClick:We=>et(Pe.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[w("div",sw,Ge(Pe.nom),1),w("div",ow,Ge(Pe.description),1),w("div",aw," Modifi le "+Ge(Ee(Pe.date_modification)),1)],8,rw))),128))]))]))])])):ct("",!0)])])}}}),lw={class:"fixed inset-0 z-50 overflow-y-auto"},uw={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},cw={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},hw={class:"mt-3 text-center sm:mt-0 sm:text-left"},dw={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},fw={class:"mt-4"},pw={class:"grid grid-cols-2 gap-4"},mw=["disabled"],gw={key:0,class:"mt-1 text-sm text-gray-500"},_w={class:"grid grid-cols-2 gap-4"},yw={key:0},vw=["disabled"],bw=["value"],xw={key:1},ww=["disabled"],Lw=["value"],Cw={key:0},kw={class:"grid grid-cols-2 gap-4"},Ew={key:1,class:"rounded-md bg-red-50 p-4"},Mw={class:"flex"},Pw={class:"ml-3"},Sw={class:"text-sm font-medium text-red-800"},Bw={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense"},Aw=["disabled"],Tw={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},qp=Ki({__name:"UserFormModal",props:{user:{type:Object,default:null},dealers:{type:Array,default:()=>[]},isAdmin:{type:Boolean,required:!0},currentDealer:{type:String,default:""}},emits:["close","save"],setup(e,{emit:n}){var D,V,H,Ce,pe,re,Ae;const s=e,l=n,h=ji(),p=Ze(!1),f=Ze(null),y=Et(()=>{var $e;return s.isAdmin?s.user?s.user.id!==(($e=h.user)==null?void 0:$e.id):!0:!1}),v=Et(()=>s.isAdmin?[{value:"ADMIN",label:"Administrateur"},{value:"CONCESSIONNAIRE",label:"Concessionnaire"},{value:"UTILISATEUR",label:"Client"}]:[{value:"UTILISATEUR",label:"Client"}]),C=Et(()=>s.isAdmin?M.role==="UTILISATEUR":!0),P=Et(()=>s.dealers.filter($e=>$e.role==="CONCESSIONNAIRE")),M=sr({first_name:((D=s.user)==null?void 0:D.first_name)||"",last_name:((V=s.user)==null?void 0:V.last_name)||"",email:((H=s.user)==null?void 0:H.email)||"",username:((Ce=s.user)==null?void 0:Ce.username)||"",company_name:((pe=s.user)==null?void 0:pe.company_name)||"",role:((re=s.user)==null?void 0:re.role)||(s.isAdmin?"":"UTILISATEUR"),dealer:((Ae=s.user)==null?void 0:Ae.concessionnaire)||s.currentDealer,password:"",password_confirm:""}),j=()=>{if(!M.first_name||!M.last_name)return f.value="Le prnom et le nom sont requis",!1;if(!M.email)return f.value="L'email est requis",!1;if(!M.username)return f.value="Le nom d'utilisateur est requis",!1;if(!s.user){if(!M.password)return f.value="Le mot de passe est requis",!1;if(M.password!==M.password_confirm)return f.value="Les mots de passe ne correspondent pas",!1}return M.role==="UTILISATEUR"&&!M.dealer?(f.value="Un concessionnaire doit tre slectionn pour un client",!1):!0},W=async()=>{var $e;if(f.value=null,!!j()){p.value=!0;try{const ge={...M};($e=s.user)!=null&&$e.id&&(ge.id=s.user.id,delete ge.password,delete ge.password_confirm),ge.role==="UTILISATEUR"&&ge.dealer&&(ge.concessionnaire=ge.dealer),delete ge.dealer,await l("save",ge),l("close")}catch(ge){console.error("Erreur formulaire:",ge),f.value=ge.message,p.value=!1}}};return($e,ge)=>(ce(),ye("div",lw,[w("div",uw,[ge[24]||(ge[24]=w("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[w("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),ge[25]||(ge[25]=w("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"",-1)),w("div",cw,[w("div",null,[w("div",hw,[w("h3",dw,Ge(e.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),w("div",fw,[w("form",{onSubmit:Dl(W,["prevent"]),class:"space-y-4"},[w("div",pw,[w("div",null,[ge[10]||(ge[10]=w("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prnom",-1)),St(w("input",{type:"text",id:"first_name","onUpdate:modelValue":ge[0]||(ge[0]=Be=>M.first_name=Be),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Yt,M.first_name]])]),w("div",null,[ge[11]||(ge[11]=w("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),St(w("input",{type:"text",id:"last_name","onUpdate:modelValue":ge[1]||(ge[1]=Be=>M.last_name=Be),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Yt,M.last_name]])])]),w("div",null,[ge[12]||(ge[12]=w("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),St(w("input",{type:"email",id:"email","onUpdate:modelValue":ge[2]||(ge[2]=Be=>M.email=Be),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Yt,M.email]])]),w("div",null,[ge[13]||(ge[13]=w("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),St(w("input",{type:"text",id:"username","onUpdate:modelValue":ge[3]||(ge[3]=Be=>M.username=Be),required:"",disabled:!!s.user,class:Bi(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",{"bg-gray-100":!!s.user}])},null,10,mw),[[Yt,M.username]]),s.user?(ce(),ye("p",gw," Le nom d'utilisateur ne peut pas tre modifi aprs la cration. ")):ct("",!0)]),w("div",null,[ge[14]||(ge[14]=w("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Nom de l'entreprise",-1)),St(w("input",{type:"text",id:"company_name","onUpdate:modelValue":ge[4]||(ge[4]=Be=>M.company_name=Be),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Yt,M.company_name]])]),w("div",_w,[s.isAdmin?(ce(),ye("div",yw,[ge[16]||(ge[16]=w("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Rle",-1)),St(w("select",{id:"role","onUpdate:modelValue":ge[5]||(ge[5]=Be=>M.role=Be),required:"",disabled:!y.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[ge[15]||(ge[15]=w("option",{value:""},"Slectionner un rle",-1)),(ce(!0),ye(Ct,null,It(v.value,Be=>(ce(),ye("option",{key:Be.value,value:Be.value},Ge(Be.label),9,bw))),128))],8,vw),[[Qi,M.role]])])):ct("",!0),C.value?(ce(),ye("div",xw,[ge[18]||(ge[18]=w("label",{for:"dealer",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),St(w("select",{id:"dealer","onUpdate:modelValue":ge[6]||(ge[6]=Be=>M.dealer=Be),required:"",disabled:!s.isAdmin,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[ge[17]||(ge[17]=w("option",{value:""},"Slectionner un concessionnaire",-1)),(ce(!0),ye(Ct,null,It(P.value,Be=>(ce(),ye("option",{key:Be.id,value:Be.id},Ge(Lt(qr)(Be)),9,Lw))),128))],8,ww),[[Qi,M.dealer]])])):ct("",!0)]),e.user?ct("",!0):(ce(),ye("div",Cw,[w("div",kw,[w("div",null,[ge[19]||(ge[19]=w("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),St(w("input",{type:"password",id:"password","onUpdate:modelValue":ge[7]||(ge[7]=Be=>M.password=Be),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Yt,M.password]])]),w("div",null,[ge[20]||(ge[20]=w("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),St(w("input",{type:"password",id:"password_confirm","onUpdate:modelValue":ge[8]||(ge[8]=Be=>M.password_confirm=Be),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Yt,M.password_confirm]])])]),ge[21]||(ge[21]=w("p",{class:"mt-1 text-sm text-gray-500"}," L'utilisateur devra changer son mot de passe  sa premire connexion. ",-1))])),f.value?(ce(),ye("div",Ew,[w("div",Mw,[ge[22]||(ge[22]=w("div",{class:"flex-shrink-0"},[w("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),w("div",Pw,[w("h3",Sw,Ge(f.value),1)])])])):ct("",!0),w("div",Bw,[w("button",{type:"submit",disabled:p.value,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:col-start-2 sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},[p.value?(ce(),ye("svg",Tw,ge[23]||(ge[23]=[w("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),w("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):ct("",!0),Wt(" "+Ge(p.value?"Enregistrement...":"Enregistrer"),1)],8,Aw),w("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:col-start-1 sm:text-sm",onClick:ge[9]||(ge[9]=Be=>$e.$emit("close"))}," Annuler ")])],32)])])])])])]))}}),Dw={class:"fixed inset-0 z-50 overflow-y-auto"},Rw={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},Ow={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},Iw={class:"sm:flex sm:items-start"},Fw={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},Nw={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},zw={class:"mt-2"},$w={class:"text-sm text-gray-500"},jw={class:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},Kp=Ki({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(e){return(n,s)=>(ce(),ye("div",Dw,[w("div",Rw,[s[3]||(s[3]=w("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[w("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),s[4]||(s[4]=w("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"",-1)),w("div",Ow,[w("div",Iw,[s[2]||(s[2]=w("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[w("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),w("div",Fw,[w("h3",Nw,Ge(e.title),1),w("div",zw,[w("p",$w,Ge(e.message),1)])])]),w("div",jw,[w("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:s[0]||(s[0]=l=>n.$emit("confirm"))}," Confirmer "),w("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:w-auto sm:text-sm",onClick:s[1]||(s[1]=l=>n.$emit("cancel"))}," Annuler ")])])])]))}}),Uw={class:"h-full bg-gray-50"},Gw={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Vw={class:"flex justify-between items-center mb-8"},Hw={class:"text-3xl font-extrabold text-gray-900"},Zw={class:"bg-white shadow rounded-lg mb-6 p-4"},qw={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Kw={key:0},Ww=["placeholder"],Jw={key:1},Xw=["value"],Yw={class:"bg-white shadow rounded-lg"},Qw={class:"overflow-x-auto"},e3={class:"min-w-full divide-y divide-gray-200"},t3={class:"bg-gray-50"},i3={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},n3={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},r3={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},s3={class:"bg-white divide-y divide-gray-200"},o3={class:"px-6 py-4 whitespace-nowrap"},a3={class:"flex items-center"},l3={class:"flex-shrink-0 h-10 w-10"},u3={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},c3={class:"text-primary-600 font-medium"},h3={class:"ml-4"},d3={class:"text-sm font-medium text-gray-900"},f3={class:"text-sm text-gray-500"},p3={class:"px-6 py-4 whitespace-nowrap"},m3={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},g3={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},_3={class:"px-6 py-4 whitespace-nowrap"},y3={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},v3=["onClick"],b3=["onClick"],x3=Ki({__name:"UserListView",setup(e){const n=ji(),s=Ze([]),l=Ze([]),h=Ze(!1),p=Ze(!1),f=Ze(null),y=Ze(null),v=sr({role:"",search:"",dealer:""}),C=Et(()=>n.isAdmin),P=Et(()=>n.isDealer),M=Et(()=>s.value.filter(ee=>ee.role==="CONCESSIONNAIRE")),j=Et(()=>{var Re;console.log("Computing filtered users..."),console.log("Current users:",s.value),console.log("Is admin:",C.value),console.log("Is dealer:",P.value),console.log("Current filters:",v);let ee=s.value;if(P.value&&(console.log("Filtering for dealer:",(Re=n.user)==null?void 0:Re.id),ee=ee.filter(Te=>{var ie;return Te.role==="UTILISATEUR"&&Te.dealer===((ie=n.user)==null?void 0:ie.id)}),console.log("Filtered users for dealer:",ee)),C.value&&(v.role&&(ee=ee.filter(Te=>Te.role===v.role),console.log("Filtered by role:",ee)),v.dealer&&(ee=ee.filter(Te=>String(Te.dealer)===String(v.dealer)),console.log("Filtered by dealer:",ee))),v.search){const Te=v.search.toLowerCase();ee=ee.filter(ie=>ie.username.toLowerCase().includes(Te)||ie.email.toLowerCase().includes(Te)||ie.first_name.toLowerCase().includes(Te)||ie.last_name.toLowerCase().includes(Te)||ie.company_name&&ie.company_name.toLowerCase().includes(Te)),console.log("Filtered by search:",ee)}return console.log("Final filtered users:",ee),ee});rr(async()=>{await W(),C.value&&await D()});async function W(){try{console.log("Fetching users...");const ee=await gt.get("/users/");console.log("Users API response:",ee.data),s.value=ee.data,console.log("Users after assignment:",s.value)}catch(ee){console.error("Erreur lors de la rcupration des utilisateurs:",ee)}}async function D(){try{const ee=await gt.get("/users/",{params:{role:"CONCESSIONNAIRE"}});l.value=ee.data}catch(ee){console.error("Erreur lors de la rcupration des concessionnaires:",ee)}}function V(){f.value=null,h.value=!0}function H(ee){f.value={...ee},h.value=!0}function Ce(){h.value=!1,f.value=null}async function pe(ee){var Re;try{let Te;const ie=!!ee.id,ke={...ee};return delete ke.dealer_name,delete ke.full_name,delete ke.user_type,delete ke.permissions,ie?Te=await gt.patch(`/users/${ee.id}/`,ke):Te=await gt.post("/users/",ke),await W(),Ce(),Te.data}catch(Te){const ie=((Re=Te.response)==null?void 0:Re.data)||{};let ke="";throw typeof ie=="object"&&(ke=Object.entries(ie).map(([Ie,Me])=>Array.isArray(Me)?Me[0]:Me).filter(Ie=>Ie).join(`
`)),ke||(ke="Une erreur est survenue lors de la sauvegarde"),new Error(ke)}}function re(ee){y.value=ee,p.value=!0}async function Ae(){if(y.value)try{await gt.delete(`/users/${y.value.id}/`),await W(),p.value=!1,y.value=null}catch(ee){throw console.error("Erreur lors de la suppression de l'utilisateur:",ee),ee}}function $e(ee,Re){return`${(ee==null?void 0:ee.charAt(0))||""}${(Re==null?void 0:Re.charAt(0))||""}`.toUpperCase()}const ge={ADMIN:"Admin",CONCESSIONNAIRE:"Concessionnaire",UTILISATEUR:"Client"};function Be(ee){return ge[ee]||ee}function F(ee){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function X(ee){return ee?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}function _e(ee){var Re;return C.value?!0:P.value?ee.role==="UTILISATEUR"&&ee.dealer===((Re=n.user)==null?void 0:Re.id):!1}return(ee,Re)=>{var Te,ie;return ce(),ye("div",Uw,[w("div",Gw,[w("div",Vw,[w("h1",Hw,Ge(C.value?"Gestion des utilisateurs":"Mes clients"),1),w("button",{onClick:V,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[Re[4]||(Re[4]=w("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),Wt(" "+Ge(C.value?"Nouvel utilisateur":"Nouveau client"),1)])]),w("div",Zw,[w("div",qw,[C.value?(ce(),ye("div",Kw,[Re[6]||(Re[6]=w("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rle",-1)),St(w("select",{id:"role-filter","onUpdate:modelValue":Re[0]||(Re[0]=ke=>v.role=ke),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},Re[5]||(Re[5]=[w("option",{value:""},"Tous les rles",-1),w("option",{value:"ADMIN"},"Admin",-1),w("option",{value:"CONCESSIONNAIRE"},"Concessionnaire",-1),w("option",{value:"UTILISATEUR"},"Client",-1)]),512),[[Qi,v.role]])])):ct("",!0),w("div",null,[Re[7]||(Re[7]=w("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),St(w("input",{type:"text",id:"search","onUpdate:modelValue":Re[1]||(Re[1]=ke=>v.search=ke),placeholder:C.value?"Nom, email...":"Rechercher un client...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,8,Ww),[[Yt,v.search]])]),C.value?(ce(),ye("div",Jw,[Re[9]||(Re[9]=w("label",{for:"dealer-filter",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),St(w("select",{id:"dealer-filter","onUpdate:modelValue":Re[2]||(Re[2]=ke=>v.dealer=ke),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Re[8]||(Re[8]=w("option",{value:""},"Tous les concessionnaires",-1)),(ce(!0),ye(Ct,null,It(M.value,ke=>(ce(),ye("option",{key:ke.id,value:ke.id},Ge(ke.company_name||`${ke.first_name} ${ke.last_name}`),9,Xw))),128))],512),[[Qi,v.dealer]])])):ct("",!0)])]),w("div",Yw,[w("div",Qw,[w("table",e3,[w("thead",t3,[w("tr",null,[w("th",i3,Ge(C.value?"Utilisateur":"Client"),1),C.value?(ce(),ye("th",n3," Rle ")):ct("",!0),Re[10]||(Re[10]=w("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),C.value?(ce(),ye("th",r3," Concessionnaire ")):ct("",!0),Re[11]||(Re[11]=w("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),Re[12]||(Re[12]=w("th",{scope:"col",class:"relative px-6 py-3"},[w("span",{class:"sr-only"},"Actions")],-1))])]),w("tbody",s3,[(ce(!0),ye(Ct,null,It(j.value,ke=>(ce(),ye("tr",{key:ke.id},[w("td",o3,[w("div",a3,[w("div",l3,[w("div",u3,[w("span",c3,Ge($e(ke.first_name,ke.last_name)),1)])]),w("div",h3,[w("div",d3,Ge(Lt(qr)(ke)),1),w("div",f3,Ge(ke.username),1)])])]),w("td",p3,[w("span",{class:Bi(F(ke.role))},Ge(Be(ke.role)),3)]),w("td",m3,Ge(ke.email),1),w("td",g3,Ge(ke.dealer_name||"-"),1),w("td",_3,[w("span",{class:Bi(X(ke.is_active))},Ge(ke.is_active?"Actif":"Inactif"),3)]),w("td",y3,[w("button",{onClick:Ie=>H(ke),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,v3),_e(ke)?(ce(),ye("button",{key:0,onClick:Ie=>re(ke),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,b3)):ct("",!0)])]))),128))])])])])]),h.value?(ce(),ir(qp,{key:0,user:f.value,dealers:l.value,"is-admin":C.value,"current-dealer":(ie=(Te=Lt(n).user)==null?void 0:Te.id)==null?void 0:ie.toString(),onClose:Ce,onSave:pe},null,8,["user","dealers","is-admin","current-dealer"])):ct("",!0),p.value?(ce(),ir(Kp,{key:1,title:"Supprimer l'utilisateur",message:"tes-vous sr de vouloir supprimer cet utilisateur ? Cette action est irrversible.",onConfirm:Ae,onCancel:Re[3]||(Re[3]=ke=>p.value=!1)})):ct("",!0)])}}}),w3={class:"h-full bg-gray-50"},L3={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},C3={class:"sm:flex sm:items-center"},k3={class:"sm:flex-auto"},E3={class:"text-2xl font-semibold text-gray-900"},M3={class:"mt-2 text-sm text-gray-700"},P3={key:0,class:"mt-8"},S3={class:"mb-6"},B3=["value"],A3={key:0,class:"mb-6"},T3=["value"],D3={key:1,class:"mt-8"},R3={class:"mb-6"},O3=["value"],I3={class:"mt-8"},F3={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 rounded-lg"},N3={class:"overflow-x-auto"},z3={class:"min-w-full divide-y divide-gray-300"},$3={class:"bg-gray-50"},j3={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"},U3={class:"ml-2 flex-none rounded"},G3={key:0,scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},V3={key:1,scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},H3={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},Z3={class:"ml-2 flex-none rounded"},q3={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},K3={class:"ml-2 flex-none rounded"},W3={class:"divide-y divide-gray-200 bg-white"},J3={key:0},X3={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},Y3={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},Q3={key:0,class:"px-3 py-4 text-sm text-gray-900"},eL={key:0,class:"flex items-center"},tL={class:"h-8 w-8 flex-shrink-0"},iL={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},nL={class:"text-primary-700 font-medium text-sm"},rL={class:"ml-3"},sL={class:"font-medium"},oL={key:1,class:"text-gray-500"},aL={key:1,class:"px-3 py-4 text-sm text-gray-900"},lL={key:0,class:"flex items-center"},uL={class:"h-8 w-8 flex-shrink-0"},cL={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},hL={class:"text-primary-700 font-medium text-sm"},dL={class:"ml-3"},fL={class:"font-medium"},pL={key:1,class:"text-gray-500"},mL={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},gL={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},_L={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},yL=["onClick"],vL=["onClick"],bL=["onClick"],xL={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},wL={class:"bg-white rounded-lg p-6 max-w-md w-full"},LL={class:"flex justify-between items-center mb-4"},CL={key:0,class:"space-y-4"},kL=["value"],EL=["value"],ML={key:1,class:"mt-4 bg-red-50 p-4 rounded-md"},PL={class:"flex"},SL={class:"ml-3"},BL={class:"text-sm font-medium text-red-800"},AL={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},TL=["disabled"],DL={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},RL=Ki({__name:"PlansView",setup(e){const n=qs(),s=Gl(),l=ji(),h=Hp(),p=Ze([]),f=Ze([]),y=Ze([]),v=Ze(!1),C=Ze(!1),P=Ze({nom:"",description:"",client:null}),M=Ze({id:0,nom:"",description:"",concessionnaire:null,client:null}),j=Ze(!1),W=Ze(null),D=Ze(null),V=Ze(null),H=Ze("date_modification"),Ce=Ze("desc"),pe=Et(()=>D.value?y.value.filter(q=>q.concessionnaire===D.value):y.value),re=Et(()=>{let q=p.value;return l.isAdmin?D.value&&(q=q.filter(te=>te.concessionnaire===D.value),V.value&&(q=q.filter(te=>te.client===V.value))):l.isDealer&&(q=q.filter(te=>{var se;return te.concessionnaire===((se=l.user)==null?void 0:se.id)}),V.value&&(q=q.filter(te=>te.client===V.value))),[...q].sort((te,se)=>{if(H.value==="nom")return Ce.value==="asc"?te.nom.localeCompare(se.nom):se.nom.localeCompare(te.nom);{const xe=new Date(te[H.value]).getTime(),ve=new Date(se[H.value]).getTime();return Ce.value==="asc"?xe-ve:ve-xe}})});Et(()=>p.value.filter(q=>{var te;return q.createur.id===((te=l.user)==null?void 0:te.id)})),Et(()=>p.value.filter(q=>{var te,se,xe;return l.isAdmin?q.createur.id!==((te=l.user)==null?void 0:te.id):l.isDealer?q.concessionnaire===((se=l.user)==null?void 0:se.id):q.client===((xe=l.user)==null?void 0:xe.id)}));const Ae=Et(()=>l.isAdmin?{title:"Tous les plans",description:"Liste complte des plans",plans:p.value}:l.isDealer?{title:"Plans des clients",description:"Plans o vous tes assign comme concessionnaire",plans:p.value.filter(q=>{var te;return q.concessionnaire===((te=l.user)==null?void 0:te.id)})}:{title:"Mes plans",description:"Plans qui vous sont assigns ou que vous avez crs",plans:p.value.filter(q=>{var te,se;return q.client===((te=l.user)==null?void 0:te.id)||q.createur.id===((se=l.user)==null?void 0:se.id)})});rr(async()=>{var q;await $e(),l.isAdmin?await ge():l.isDealer&&await Te(((q=l.user)==null?void 0:q.id)||0)});async function $e(){try{const q=await s.fetchPlansWithDetails();p.value=q.data}catch(q){console.error("Erreur lors du chargement des plans:",q)}}async function ge(){try{const[q,te]=await Promise.all([gt.get("/users/",{params:{role:"CONCESSIONNAIRE"}}),gt.get("/users/",{params:{role:"UTILISATEUR"}})]);f.value=q.data,y.value=te.data}catch(q){console.error("Erreur lors du chargement des dealers et clients:",q)}}function Be(){v.value=!0,P.value={nom:"",description:"",client:null}}async function F(q){try{s.setCurrentPlan(q),await h.loadPlanElements(q.id),n.push("/")}catch(te){console.error("Erreur lors du chargement du plan:",te),alert("Une erreur est survenue lors du chargement du plan")}}async function X(q){var te;if(q!=null&&q.id&&confirm("tes-vous sr de vouloir supprimer ce plan ?"))try{await s.deletePlan(q.id),await $e(),((te=s.currentPlan)==null?void 0:te.id)===q.id&&s.clearCurrentPlan()}catch(se){console.error("Erreur lors de la suppression du plan:",se),alert("Une erreur est survenue lors de la suppression du plan")}}function _e(q){return new Date(q).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function ee(q){return q?(q.first_name.charAt(0)+q.last_name.charAt(0)).toUpperCase():""}function Re(q){M.value={id:q.id,nom:q.nom,description:q.description,concessionnaire:q.concessionnaire||null,client:q.client||null},q.concessionnaire&&Te(q.concessionnaire),C.value=!0}async function Te(q){try{const te=await gt.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:q}});y.value=te.data}catch(te){console.error("Erreur lors du chargement des clients:",te),y.value=[]}}async function ie(){var q,te,se,xe,ve;W.value=null,j.value=!0;try{if(!M.value.nom.trim())throw new Error("Le nom du plan est requis");if(M.value.client&&!M.value.concessionnaire)throw new Error("Un concessionnaire doit tre slectionn pour assigner un client");await s.updatePlanDetails(M.value.id,{nom:M.value.nom.trim(),description:M.value.description.trim(),concessionnaire:M.value.concessionnaire,client:M.value.client})&&(C.value=!1,await $e())}catch(Je){if(console.error("Erreur lors de la mise  jour du plan:",Je),(te=(q=Je.response)==null?void 0:q.data)!=null&&te.detail)W.value=Je.response.data.detail;else if((xe=(se=Je.response)==null?void 0:se.data)!=null&&xe.non_field_errors)W.value=Je.response.data.non_field_errors[0];else if((ve=Je.response)!=null&&ve.data){const et=Object.entries(Je.response.data).map(([nt,Xe])=>`${nt}: ${Array.isArray(Xe)?Xe[0]:Xe}`);W.value=et.join(`
`)}else W.value=Je.message||"Une erreur est survenue lors de la mise  jour du plan"}finally{j.value=!1}}$i(()=>M.value.concessionnaire,async q=>{q?await Te(q):(y.value=[],M.value.client=null)});function ke(q){const te=l.user;return te?te.user_type==="admin"?!0:te.user_type==="dealer"?q.concessionnaire===te.id:q.client===te.id||q.createur.id===te.id:!1}Et(()=>{const q=new Map;return p.value.forEach(te=>{te.createur&&q.set(te.createur.id,te.createur),te.concessionnaire_details&&q.set(te.concessionnaire_details.id,te.concessionnaire_details),te.client_details&&q.set(te.client_details.id,te.client_details)}),q});async function Ie(q){await $e(),n.push("/")}function Me(q){H.value===q?Ce.value=Ce.value==="asc"?"desc":"asc":(H.value=q,Ce.value="desc")}return(q,te)=>(ce(),ye("div",w3,[w("div",L3,[w("div",C3,[w("div",k3,[w("h1",E3,Ge(Ae.value.title),1),w("p",M3,Ge(Ae.value.description),1)]),w("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[w("button",{onClick:Be,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),Lt(l).isAdmin?(ce(),ye("div",P3,[w("div",S3,[te[14]||(te[14]=w("label",{for:"dealer-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par concessionnaire",-1)),St(w("select",{id:"dealer-filter","onUpdate:modelValue":te[0]||(te[0]=se=>D.value=se),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[te[13]||(te[13]=w("option",{value:null},"Tous les concessionnaires",-1)),(ce(!0),ye(Ct,null,It(f.value,se=>(ce(),ye("option",{key:se.id,value:se.id},Ge(se.first_name)+" "+Ge(se.last_name)+" ("+Ge(se.company_name)+") ",9,B3))),128))],512),[[Qi,D.value]])]),D.value?(ce(),ye("div",A3,[te[16]||(te[16]=w("label",{for:"client-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par client",-1)),St(w("select",{id:"client-filter","onUpdate:modelValue":te[1]||(te[1]=se=>V.value=se),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[te[15]||(te[15]=w("option",{value:null},"Tous les clients",-1)),(ce(!0),ye(Ct,null,It(pe.value,se=>(ce(),ye("option",{key:se.id,value:se.id},Ge(se.first_name)+" "+Ge(se.last_name)+" ("+Ge(se.company_name)+") ",9,T3))),128))],512),[[Qi,V.value]])])):ct("",!0)])):Lt(l).isDealer?(ce(),ye("div",D3,[w("div",R3,[te[18]||(te[18]=w("label",{for:"client-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par client",-1)),St(w("select",{id:"client-filter","onUpdate:modelValue":te[2]||(te[2]=se=>V.value=se),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[te[17]||(te[17]=w("option",{value:null},"Tous les clients",-1)),(ce(!0),ye(Ct,null,It(y.value,se=>(ce(),ye("option",{key:se.id,value:se.id},Ge(se.first_name)+" "+Ge(se.last_name)+" ("+Ge(se.company_name)+") ",9,O3))),128))],512),[[Qi,V.value]])])])):ct("",!0),w("div",I3,[w("div",F3,[w("div",N3,[w("table",z3,[w("thead",$3,[w("tr",null,[w("th",j3,[w("button",{onClick:te[3]||(te[3]=se=>Me("nom")),class:"group inline-flex items-center"},[te[20]||(te[20]=Wt(" Nom ")),w("span",U3,[(ce(),ye("svg",{class:Bi(["h-5 w-5",{"text-gray-900":H.value==="nom","text-gray-400":H.value!=="nom","rotate-180":H.value==="nom"&&Ce.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},te[19]||(te[19]=[w("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),te[25]||(te[25]=w("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),Lt(l).isDealer?ct("",!0):(ce(),ye("th",G3," Concessionnaire ")),Lt(l).isClient?ct("",!0):(ce(),ye("th",V3," Client ")),w("th",H3,[w("button",{onClick:te[4]||(te[4]=se=>Me("date_creation")),class:"group inline-flex items-center"},[te[22]||(te[22]=Wt(" Cr le ")),w("span",Z3,[(ce(),ye("svg",{class:Bi(["h-5 w-5",{"text-gray-900":H.value==="date_creation","text-gray-400":H.value!=="date_creation","rotate-180":H.value==="date_creation"&&Ce.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},te[21]||(te[21]=[w("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),w("th",q3,[w("button",{onClick:te[5]||(te[5]=se=>Me("date_modification")),class:"group inline-flex items-center"},[te[24]||(te[24]=Wt(" Modifi le ")),w("span",K3,[(ce(),ye("svg",{class:Bi(["h-5 w-5",{"text-gray-900":H.value==="date_modification","text-gray-400":H.value!=="date_modification","rotate-180":H.value==="date_modification"&&Ce.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},te[23]||(te[23]=[w("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),te[26]||(te[26]=w("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[w("span",{class:"sr-only"},"Actions")],-1))])]),w("tbody",W3,[re.value.length===0?(ce(),ye("tr",J3,te[27]||(te[27]=[w("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun plan disponible ",-1)]))):ct("",!0),(ce(!0),ye(Ct,null,It(re.value,se=>(ce(),ye("tr",{key:se.id,class:"hover:bg-gray-50"},[w("td",X3,Ge(se.nom),1),w("td",Y3,Ge(se.description||"-"),1),Lt(l).isDealer?ct("",!0):(ce(),ye("td",Q3,[se.concessionnaire_details?(ce(),ye("div",eL,[w("div",tL,[w("div",iL,[w("span",nL,Ge(ee(se.concessionnaire_details)),1)])]),w("div",rL,[w("div",sL,Ge(Lt(qr)(se.concessionnaire_details)),1)])])):(ce(),ye("div",oL,"-"))])),Lt(l).isClient?ct("",!0):(ce(),ye("td",aL,[se.client_details?(ce(),ye("div",lL,[w("div",uL,[w("div",cL,[w("span",hL,Ge(ee(se.client_details)),1)])]),w("div",dL,[w("div",fL,Ge(Lt(qr)(se.client_details)),1)])])):(ce(),ye("div",pL,"-"))])),w("td",mL,Ge(_e(se.date_creation)),1),w("td",gL,Ge(_e(se.date_modification)),1),w("td",_L,[w("button",{onClick:xe=>F(se),class:"text-primary-600 hover:text-primary-900 mr-4"}," Ouvrir ",8,yL),w("button",{onClick:xe=>Re(se),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,vL),ke(se)?(ce(),ye("button",{key:0,onClick:xe=>X(se),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,bL)):ct("",!0)])]))),128))])])])])]),ni(Zp,{modelValue:v.value,"onUpdate:modelValue":te[6]||(te[6]=se=>v.value=se),dealers:f.value,clients:y.value,onCreated:Ie},null,8,["modelValue","dealers","clients"]),C.value?(ce(),ye("div",xL,[w("div",wL,[w("div",LL,[te[29]||(te[29]=w("h2",{class:"text-xl font-semibold text-gray-900"},"Modifier le plan",-1)),w("button",{onClick:te[7]||(te[7]=se=>C.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},te[28]||(te[28]=[w("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),w("form",{onSubmit:Dl(ie,["prevent"]),class:"space-y-4"},[w("div",null,[te[30]||(te[30]=w("label",{for:"edit-nom",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),St(w("input",{type:"text",id:"edit-nom","onUpdate:modelValue":te[8]||(te[8]=se=>M.value.nom=se),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",required:""},null,512),[[Yt,M.value.nom]])]),w("div",null,[te[31]||(te[31]=w("label",{for:"edit-description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),St(w("textarea",{id:"edit-description","onUpdate:modelValue":te[9]||(te[9]=se=>M.value.description=se),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[Yt,M.value.description]])]),Lt(l).isAdmin?(ce(),ye("div",CL,[w("div",null,[te[33]||(te[33]=w("label",{for:"edit-concessionnaire",class:"block text-sm font-medium text-gray-700"}," Concessionnaire ",-1)),St(w("select",{id:"edit-concessionnaire","onUpdate:modelValue":te[10]||(te[10]=se=>M.value.concessionnaire=se),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[te[32]||(te[32]=w("option",{value:null},"Aucun",-1)),(ce(!0),ye(Ct,null,It(f.value,se=>(ce(),ye("option",{key:se.id,value:se.id},Ge(Lt(qr)(se)),9,kL))),128))],512),[[Qi,M.value.concessionnaire]])]),w("div",null,[te[35]||(te[35]=w("label",{for:"edit-client",class:"block text-sm font-medium text-gray-700"}," Client ",-1)),St(w("select",{id:"edit-client","onUpdate:modelValue":te[11]||(te[11]=se=>M.value.client=se),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[te[34]||(te[34]=w("option",{value:null},"Aucun",-1)),(ce(!0),ye(Ct,null,It(pe.value,se=>(ce(),ye("option",{key:se.id,value:se.id},Ge(Lt(qr)(se)),9,EL))),128))],512),[[Qi,M.value.client]])])])):ct("",!0),W.value?(ce(),ye("div",ML,[w("div",PL,[te[36]||(te[36]=w("div",{class:"flex-shrink-0"},[w("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),w("div",SL,[w("p",BL,Ge(W.value),1)])])])):ct("",!0),w("div",AL,[w("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:te[12]||(te[12]=se=>C.value=!1)}," Annuler "),w("button",{type:"submit",disabled:j.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm disabled:opacity-50"},[j.value?(ce(),ye("svg",DL,te[37]||(te[37]=[w("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),w("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):ct("",!0),Wt(" "+Ge(j.value?"Enregistrement...":"Enregistrer"),1)],8,TL)])],32)])])):ct("",!0)])]))}}),OL={class:"h-full bg-gray-50"},IL={class:"container mx-auto px-4 py-8"},FL={class:"sm:flex sm:items-center"},NL={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},zL={class:"mt-8"},$L={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 rounded-lg"},jL={class:"overflow-x-auto"},UL={class:"min-w-full divide-y divide-gray-300"},GL={class:"divide-y divide-gray-200 bg-white"},VL={key:0,class:"animate-pulse"},HL={key:1},ZL={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-6"},qL={class:"flex items-center"},KL={class:"h-10 w-10 flex-shrink-0"},WL={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},JL={class:"text-primary-600 font-medium"},XL={class:"ml-4"},YL={class:"font-medium text-gray-900"},QL={class:"text-gray-500"},eC={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},tC={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},iC={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},nC={class:"flex items-center"},rC={class:"font-medium"},sC={class:"text-gray-400 ml-1"},oC={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},aC=["onClick"],lC=["onClick"],uC=Ki({__name:"ClientListView",setup(e){qs();const n=ji(),s=Ze([]),l=Ze(!0),h=Ze(!1),p=Ze(!1),f=Ze(null),y=Ze(null);rr(async()=>{await v()});async function v(){var V;try{const H=await gt.get("/users/",{params:{dealer:(V=n.user)==null?void 0:V.id,role:"UTILISATEUR",include_plans:!0}});s.value=H.data}catch(H){console.error("Error fetching clients:",H)}finally{l.value=!1}}function C(V,H){return`${(V==null?void 0:V.charAt(0))||""}${(H==null?void 0:H.charAt(0))||""}`.toUpperCase()}function P(V){f.value=V,h.value=!0}function M(){h.value=!1,f.value=null}async function j(V){var H;try{const Ce=!!V.id,pe=Ce?`/users/${V.id}/`:"/users/",re=Ce?"patch":"post";V.role="UTILISATEUR",V.concessionnaire=(H=n.user)==null?void 0:H.id,await gt[re](pe,V),await v(),M()}catch(Ce){throw console.error("Erreur lors de la sauvegarde du client:",Ce),Ce}}function W(V){y.value=V,p.value=!0}async function D(){if(y.value)try{await gt.delete(`/users/${y.value.id}/`),await v(),p.value=!1,y.value=null}catch(V){throw console.error("Erreur lors de la suppression du client:",V),V}}return(V,H)=>{var Ce,pe;return ce(),ye("div",OL,[w("div",IL,[w("div",FL,[H[3]||(H[3]=w("div",{class:"sm:flex-auto"},[w("h1",{class:"text-2xl font-semibold text-gray-900"},"Clients"),w("p",{class:"mt-2 text-sm text-gray-700"}," Liste de vos clients et leurs plans associs ")],-1)),w("div",NL,[w("button",{onClick:H[0]||(H[0]=re=>h.value=!0),class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"},H[2]||(H[2]=[w("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1),Wt(" Ajouter un client ")]))])]),w("div",zL,[w("div",$L,[w("div",jL,[w("table",UL,[H[6]||(H[6]=w("thead",{class:"bg-gray-50"},[w("tr",null,[w("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," Client "),w("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Email "),w("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise "),w("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Nombre de plans "),w("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[w("span",{class:"sr-only"},"Actions")])])],-1)),w("tbody",GL,[l.value?(ce(),ye("tr",VL,H[4]||(H[4]=[w("td",{colspan:"5",class:"py-4 px-6"},[w("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):s.value.length===0?(ce(),ye("tr",HL,H[5]||(H[5]=[w("td",{colspan:"5",class:"py-4 px-6 text-center text-gray-500"}," Aucun client trouv ",-1)]))):ct("",!0),(ce(!0),ye(Ct,null,It(s.value,re=>(ce(),ye("tr",{key:re.id,class:"hover:bg-gray-50"},[w("td",ZL,[w("div",qL,[w("div",KL,[w("div",WL,[w("span",JL,Ge(C(re.first_name,re.last_name)),1)])]),w("div",XL,[w("div",YL,Ge(Lt(qr)(re)),1),w("div",QL,Ge(re.username),1)])])]),w("td",eC,Ge(re.email),1),w("td",tC,Ge(re.company_name||"-"),1),w("td",iC,[w("div",nC,[w("span",rC,Ge(re.plans_count||0),1),w("span",sC,"plan"+Ge((re.plans_count||0)>1?"s":""),1)])]),w("td",oC,[w("button",{onClick:Ae=>P(re),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,aC),w("button",{onClick:Ae=>W(re),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,lC)])]))),128))])])])])]),h.value?(ce(),ir(qp,{key:0,user:f.value||{},dealers:[Lt(n).user],"is-admin":!1,"current-dealer":(pe=(Ce=Lt(n).user)==null?void 0:Ce.id)==null?void 0:pe.toString(),onClose:M,onSave:j},null,8,["user","dealers","current-dealer"])):ct("",!0),p.value?(ce(),ir(Kp,{key:1,title:"Supprimer le client",message:"tes-vous sr de vouloir supprimer ce client ? Cette action est irrversible.",onConfirm:D,onCancel:H[1]||(H[1]=re=>p.value=!1)})):ct("",!0)])])}}}),Wp=Av({history:lv("/"),routes:[{path:"/",name:"home",component:Od,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/plans",name:"plans",component:RL,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/users",name:"users",component:x3,meta:{requiresAuth:!0,allowedRoles:["admin"]}},{path:"/clients",name:"clients",component:uC,meta:{requiresAuth:!0,allowedRoles:["dealer"]}},{path:"/profile",name:"profile",component:()=>Ka(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/login",name:"login",component:J1,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>Ka(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>Ka(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:T1,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/map",name:"map",component:Od,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>Ka(()=>import("./NotFoundView.js"),[])}]});Wp.beforeEach(async(e,n,s)=>{var y,v;const l=ji();if(console.log("Route:",e.path,"Auth state:",{initialized:l.initialized,isAuthenticated:l.isAuthenticated,user:l.user}),!l.initialized)try{await l.initialize(window.INITIAL_STATE)}catch(C){console.error("Error initializing auth store:",C)}const h=l.isAuthenticated,p=(y=l.user)==null?void 0:y.must_change_password,f=(v=l.user)==null?void 0:v.user_type;if(e.meta.requiresAuth&&!h){s("/login");return}if(h&&p&&e.name!=="changePassword"){s({name:"changePassword"});return}if(e.name==="changePassword"&&!p){s({name:"home"});return}if(e.meta.allowedRoles&&f&&!e.meta.allowedRoles.includes(f)){s({name:"home"});return}if(e.meta.requiresGuest&&h){s({name:"home"});return}s()});const eh=Zg(c1),Jp=Wg();eh.use(Jp);eh.use(Wp);const cC=ji(Jp);window.INITIAL_STATE&&cC.initialize(window.INITIAL_STATE);eh.mount("#app");export{sr as a,w as b,ye as c,Ki as d,ct as e,St as f,ce as g,lg as h,Wt as i,ni as j,Hr as k,M0 as l,BC as m,Bi as n,rr as o,qs as p,Ze as r,Ge as t,ji as u,Yt as v,Dl as w};
